id,project,branch,change_id,subject,status,created,updated,submitted,reviewers,revisions,total_comment_count,number,current_revision,discussion_messages_count,reviewers_count,revisions_count,owner_account_id,owner_name,owner_username,is_owner_bot,commit_message,git_command,changed_files,files_count,commit_id,topic,added_lines,deleted_lines,insertions,deletions
openstack%2Fnetworking-generic-switch~master~I3198c058192984b7551ed9d48b66fc6ea7a95186,openstack/networking-generic-switch,master,I3198c058192984b7551ed9d48b66fc6ea7a95186,Fix tempest based job,MERGED,2021-08-03 08:52:58.000000000,2021-08-04 22:56:41.000000000,2021-08-04 22:53:27.000000000,"[{'_account_id': 10239}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-08-03 08:52:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-generic-switch/commit/58ec28a269a7109290cbb04c5438ae5fe67e800a', 'message': ""Fix tempest based job\n\nSince we're using OVN, the neutron agent should be stopped.\n\nThis avoids the job failing with the error:\n'[ERROR] /opt/stack/devstack/lib/neutron_plugins/ovn_agent:331\nThe q-agt/neutron-agt service must be disabled with OVN.'\n\nChange-Id: I3198c058192984b7551ed9d48b66fc6ea7a95186\n""}, {'number': 2, 'created': '2021-08-03 14:17:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-generic-switch/commit/1eae33580d7f8e39cb7171aa90a0b47b05b643c0', 'message': 'Fix tempest based job\n\nWe should not use OVN services.\nAlso Python 3 is now default.\n\nChange-Id: I3198c058192984b7551ed9d48b66fc6ea7a95186\n'}, {'number': 3, 'created': '2021-08-04 07:53:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-generic-switch/commit/95c1c24805ca85175528298058907aa01a12fc98', 'message': 'Fix tempest based job\n\nWe should not use OVN services.\nAlso Python 3 is now default.\n\nChange-Id: I3198c058192984b7551ed9d48b66fc6ea7a95186\n'}, {'number': 4, 'created': '2021-08-04 10:06:20.000000000', 'files': ['zuul.d/networking-generic-switch-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/networking-generic-switch/commit/903e969b441a2cd2cd6414c0f418aa6c1eb311c8', 'message': 'Fix tempest based job\n\nWe should not use OVN services.\nAlso Python 3 is now default.\n\nChange-Id: I3198c058192984b7551ed9d48b66fc6ea7a95186\n'}]",0,803320,903e969b441a2cd2cd6414c0f418aa6c1eb311c8,16,4,4,23851,,,0,"Fix tempest based job

We should not use OVN services.
Also Python 3 is now default.

Change-Id: I3198c058192984b7551ed9d48b66fc6ea7a95186
",git fetch https://review.opendev.org/openstack/networking-generic-switch refs/changes/20/803320/4 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/networking-generic-switch-jobs.yaml'],1,58ec28a269a7109290cbb04c5438ae5fe67e800a,fix-tempest, q-agt: False, q-agt: True,1,1
openstack%2Ftripleo-upgrade~master~I84f2a7b9aae674d1971b4f64628ca59bf40419ad,openstack/tripleo-upgrade,master,I84f2a7b9aae674d1971b4f64628ca59bf40419ad,Make the gerrit_url of patches configurable,MERGED,2021-08-04 09:21:34.000000000,2021-08-04 22:55:21.000000000,2021-08-04 22:55:21.000000000,"[{'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-08-04 09:21:34.000000000', 'files': ['templates/workarounds.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/15f4fc5a02988bfc862f85f8dd18530b1024dd4a', 'message': ""Make the gerrit_url of patches configurable\n\nCurrently patches must come from review.openstack.org but it may\nbe useful to also source them from an alternative gerrit.\n\nThis patch adds a new parameter called 'gerrit_url' which is the\nURL to the gerrit where the patch should be sourced from. The\ndefault value is 'https://review.opendev.org' to ensure that it\nmaintains the current behaviour for backwards compatibility.\n\nChange-Id: I84f2a7b9aae674d1971b4f64628ca59bf40419ad\n(cherry picked from commit d93341dc6898ec807119e6fd1d92690b9f47bfa9)\n""}]",0,803437,15f4fc5a02988bfc862f85f8dd18530b1024dd4a,6,4,1,6816,,,0,"Make the gerrit_url of patches configurable

Currently patches must come from review.openstack.org but it may
be useful to also source them from an alternative gerrit.

This patch adds a new parameter called 'gerrit_url' which is the
URL to the gerrit where the patch should be sourced from. The
default value is 'https://review.opendev.org' to ensure that it
maintains the current behaviour for backwards compatibility.

Change-Id: I84f2a7b9aae674d1971b4f64628ca59bf40419ad
(cherry picked from commit d93341dc6898ec807119e6fd1d92690b9f47bfa9)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/37/803437/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/workarounds.sh.j2'],1,15f4fc5a02988bfc862f85f8dd18530b1024dd4a,," local gerrit_url=$5 curl -4 --retry 5 ${gerrit_url}/changes/${patch_id}/revisions/${patch_revision}/patch?download | \ echo ""Failed to download patch ${gerrit_url}/${patch_id}""{% set _gerrit_url = value.gerrit_url | default('https://review.opendev.org', True) -%} apply_patch {{ value.basedir }} {{ value.id }} {{ _patch_revision }} {{ _patch_strip }} {{ _gerrit_url }}"," curl -4 --retry 5 https://review.opendev.org/changes/${patch_id}/revisions/${patch_revision}/patch?download | \ echo ""Failed to download patch https://review.opendev.org/#/c/${patch_id}/""apply_patch {{ value.basedir }} {{ value.id }} {{ _patch_revision }} {{ _patch_strip }}",5,3
openstack%2Fneutron~master~I10e0834594f68e06244c393c00d0b3d840c45fc5,openstack/neutron,master,I10e0834594f68e06244c393c00d0b3d840c45fc5,Fix typo in OVN SUPPORTED_DHCP_OPTS_MAPPING dictionary (ia-addr),MERGED,2021-07-30 13:50:26.000000000,2021-08-04 22:36:12.000000000,2021-08-02 11:32:10.000000000,"[{'_account_id': 6773}, {'_account_id': 9845}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 13:50:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/18da6c0dd71b8c43638e8bc48c6399988c8beaef', 'message': 'Fix typo in OVN SUPPORTED_DHCP_OPTS_MAPPING dictionary (ia-addr)\n\nCloses-Bug: #1938569\n\nChange-Id: I10e0834594f68e06244c393c00d0b3d840c45fc5\n'}, {'number': 2, 'created': '2021-07-30 15:24:48.000000000', 'files': ['doc/source/ovn/dhcp_opts.rst', 'neutron/common/ovn/constants.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/d4b1b4a0729c187551e1fa2b2855db136456d496', 'message': 'Fix typo in OVN SUPPORTED_DHCP_OPTS_MAPPING dictionary (ia-addr)\n\nCloses-Bug: #1938569\n\nChange-Id: I10e0834594f68e06244c393c00d0b3d840c45fc5\n'}]",0,803037,d4b1b4a0729c187551e1fa2b2855db136456d496,32,4,2,31291,,,0,"Fix typo in OVN SUPPORTED_DHCP_OPTS_MAPPING dictionary (ia-addr)

Closes-Bug: #1938569

Change-Id: I10e0834594f68e06244c393c00d0b3d840c45fc5
",git fetch https://review.opendev.org/openstack/neutron refs/changes/37/803037/2 && git format-patch -1 --stdout FETCH_HEAD,['neutron/common/ovn/constants.py'],1,18da6c0dd71b8c43638e8bc48c6399988c8beaef,," 'ia-addr': 'ia_addr',"," 'ia-addr': 'ip_addr',",1,1
openstack%2Fcharm-specs~master~I1d86695f75773764bfed2cefe644c9fbbafed575,openstack/charm-specs,master,I1d86695f75773764bfed2cefe644c9fbbafed575,Open the Xena Specs,MERGED,2021-07-31 21:45:11.000000000,2021-08-04 22:01:35.000000000,2021-08-04 22:00:20.000000000,"[{'_account_id': 20634}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-31 21:45:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/43b67dc0f6eb59cc87b33970752e6b60c8399014', 'message': 'Open the Xena Specs\n\nOpen the Xena cycle specs (a bit late, but better late than never).\n\nChange-Id: I1d86695f75773764bfed2cefe644c9fbbafed575\n'}, {'number': 2, 'created': '2021-08-03 16:52:46.000000000', 'files': ['doc/source/specs/xena/index.rst', '.gitignore', 'specs/wallaby/implemented/compute-nodes-az-sync.rst', 'doc/source/specs/xena/approved', 'test-requirements.txt', 'specs/wallaby/implemented/manila-netapp.rst', 'specs/xena/backlog/ceph-storage-action.rst', 'specs/xena/backlog/charm-panko.rst', 'specs/xena/backlog/cinder-backup-swift.rst', 'doc/source/specs/xena/backlog', 'doc/source/specs/victoria/backlog', 'specs/xena/backlog/swift-extended-cluster-operations.rst', 'doc/source/specs/xena/redirects', 'specs/xena/backlog/release-notes-migration-to-reno.rst', 'doc/source/specs/xena/template.rst', 'specs/wallaby/implemented/deferred-service-restarts.rst', 'specs/wallaby/implemented/ceph-benchmarking.rst', 'specs/xena/backlog/openstack-load-balancer.rst', 'specs/wallaby/implemented/cinder-ceph-replication.rst', 'specs/xena/backlog/controlled-service-restarts.rst', 'specs/wallaby/implemented/charm-magnum-spec.rst', 'specs/xena/backlog/service-discovery.rst', 'doc/source/specs/wallaby/index.rst', 'specs/xena/approved/memory-fragmentation-tuning.rst', 'specs/xena/approved/.keep', 'specs/xena/implemented/.keep', 'doc/source/specs/victoria/approved', 'specs/xena/backlog/audit-middleware.rst', 'specs/xena/redirects', 'doc/source/index.rst', 'doc/source/specs/wallaby/backlog', 'specs/xena/backlog/numa-live-migration.rst', 'specs/xena/approved/ceph-dashboard.rst', 'doc/source/specs/xena/implemented'], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/69aa54891985792a36766ea3a109c02a4777bae4', 'message': 'Open the Xena Specs\n\nOpen the Xena cycle specs (a bit late, but better late than never).\n\nChange-Id: I1d86695f75773764bfed2cefe644c9fbbafed575\n'}]",0,803107,69aa54891985792a36766ea3a109c02a4777bae4,9,2,2,8992,,,0,"Open the Xena Specs

Open the Xena cycle specs (a bit late, but better late than never).

Change-Id: I1d86695f75773764bfed2cefe644c9fbbafed575
",git fetch https://review.opendev.org/openstack/charm-specs refs/changes/07/803107/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/specs/xena/index.rst', '.gitignore', 'doc/source/specs/xena/approved', 'test-requirements.txt', 'specs/wallaby/implemented/manila-netapp.rst', 'specs/xena/backlog/ceph-storage-action.rst', 'specs/xena/backlog/charm-panko.rst', 'specs/xena/backlog/cinder-backup-swift.rst', 'doc/source/specs/xena/backlog', 'doc/source/specs/victoria/backlog', 'specs/xena/backlog/swift-extended-cluster-operations.rst', 'doc/source/specs/xena/redirects', 'specs/xena/backlog/release-notes-migration-to-reno.rst', 'doc/source/specs/xena/template.rst', 'specs/wallaby/implemented/deferred-service-restarts.rst', 'specs/wallaby/implemented/ceph-benchmarking.rst', 'specs/xena/backlog/openstack-load-balancer.rst', 'specs/wallaby/implemented/cinder-ceph-replication.rst', 'specs/xena/backlog/controlled-service-restarts.rst', 'specs/wallaby/implemented/charm-magnum-spec.rst', 'specs/xena/backlog/service-discovery.rst', 'doc/source/specs/wallaby/index.rst', 'specs/xena/approved/memory-fragmentation-tuning.rst', 'specs/xena/approved/.keep', 'specs/xena/implemented/.keep', 'doc/source/specs/victoria/approved', 'specs/xena/backlog/audit-middleware.rst', 'specs/xena/redirects', 'doc/source/index.rst', 'doc/source/specs/wallaby/backlog', 'specs/xena/backlog/numa-live-migration.rst', 'specs/xena/approved/ceph-dashboard.rst', 'doc/source/specs/xena/implemented']",33,43b67dc0f6eb59cc87b33970752e6b60c8399014,charm-xena-specs,../../../../specs/xena/implemented,,185,36
openstack%2Fkolla-ansible~master~I5b42ad72f316541fb6f46d135b2589c73d0677e4,openstack/kolla-ansible,master,I5b42ad72f316541fb6f46d135b2589c73d0677e4,Add possibility to configure neutron ovs agent secgroup fw driver,ABANDONED,2020-06-25 14:33:20.000000000,2021-08-04 20:25:36.000000000,,"[{'_account_id': 22348}, {'_account_id': 27339}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-06-25 14:33:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/0f35c919cfe0827ae8845260e2f0e6a87535954d', 'message': 'Add possibility to configure neutron ovs agent secgroup fw driver\n\nDefault value was not changed to avoid breaking compatibility\nwith current deploys.\n\nChange-Id: I5b42ad72f316541fb6f46d135b2589c73d0677e4\n'}, {'number': 2, 'created': '2020-06-25 14:34:42.000000000', 'files': ['ansible/group_vars/all.yml', 'ansible/roles/neutron/templates/openvswitch_agent.ini.j2', 'etc/kolla/globals.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/fc63db4309d5ace875586b09c1b91924e4e35876', 'message': 'Add possibility to configure neutron ovs agent secgroup fw driver\n\nDefault value was not changed to avoid breaking compatibility\nwith current deploys.\n\nChange-Id: I5b42ad72f316541fb6f46d135b2589c73d0677e4\n'}]",0,738044,fc63db4309d5ace875586b09c1b91924e4e35876,11,3,2,27339,,,0,"Add possibility to configure neutron ovs agent secgroup fw driver

Default value was not changed to avoid breaking compatibility
with current deploys.

Change-Id: I5b42ad72f316541fb6f46d135b2589c73d0677e4
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/44/738044/2 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/group_vars/all.yml', 'ansible/roles/neutron/templates/openvswitch_agent.ini.j2', 'etc/kolla/globals.yml']",3,0f35c919cfe0827ae8845260e2f0e6a87535954d,,"# Valid option are [ iptables, iptables_hybrid, openvswitch ] # default value neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver # is currently set by full path because : # - it is hardcoded in previous versions # - stevedore was not loading entrypoints correctly in past # # [neutron.agent.firewall_drivers] # iptables = neutron.agent.linux.iptables_firewall:IptablesFirewallDriver # iptables_hybrid = neutron.agent.linux.iptables_firewall:OVSHybridIptablesFirewallDriver # noop = neutron.agent.firewall:NoopFirewallDriver # openvswitch = neutron.agent.linux.openvswitch_firewall:OVSFirewallDriver #neutron_agent_secgroup_fw_driver: ""neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver"" ",,17,1
openstack%2Ftripleo-ansible~master~Ib3ebd504c4fc07296a62900981c40179af8d6037,openstack/tripleo-ansible,master,Ib3ebd504c4fc07296a62900981c40179af8d6037,Convert all OS module imports to collections imports,ABANDONED,2021-07-28 13:45:54.000000000,2021-08-04 20:11:40.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-28 13:45:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c36760c7b3b97cd5e422182fff564e52f25152c2', 'message': 'Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 2, 'created': '2021-07-28 16:10:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/59304d58eeb22274be340a2e0601b2b688f6eb10', 'message': 'Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 3, 'created': '2021-07-29 08:12:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/a3156391d415027c217bc40ec168553b448611c1', 'message': 'Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 4, 'created': '2021-07-29 08:41:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/b1032abb6e407d231d586a3a9deb33c9295841a3', 'message': 'Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 5, 'created': '2021-07-29 09:00:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/abeea3c4e78423033de1a053e66ececda9fa3820', 'message': 'WIP Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 6, 'created': '2021-07-29 10:08:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/11664f1321fd953a2923fa84fef0f684f65e99e9', 'message': 'WIP Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 7, 'created': '2021-07-31 13:44:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/bf5d84359e7e93025895fecf8752bd26bd86b457', 'message': 'WIP Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 8, 'created': '2021-07-31 18:06:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/b49ef7575fb038986af8319e89179f76645d8e03', 'message': 'WIP Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 9, 'created': '2021-07-31 20:32:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/51842259c6ab0de800129daab076a9482b4fc823', 'message': 'WIP Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 10, 'created': '2021-07-31 21:18:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/759572fa122ece6e95deef25a32618ba4f902f02', 'message': 'WIP Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 11, 'created': '2021-08-01 07:08:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/fd5cf7cba0b6292df1127df7c33883dc3b4e65f4', 'message': 'Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 12, 'created': '2021-08-01 09:29:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/00869478ce1996dd410b0ac4ab187d2ce88a4929', 'message': 'Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}, {'number': 13, 'created': '2021-08-01 09:33:10.000000000', 'files': ['tripleo_ansible/ansible_plugins/modules/tripleo_get_dpdk_core_list.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_vip_extract.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_service_vip.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_config_download.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_ports.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_composable_network.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_generate_ansible_inventory.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_network_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/os_tripleo_baremetal_node_introspection.py', 'ansible-test-env.rc', 'tripleo_ansible/ansible_plugins/modules/os_baremetal_node_info.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_fernet_keys_rotate.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_flavor_profile.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_baremetal_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_introspected_data.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_list_overclouds.py', 'tripleo_ansible/ansible-collections-requirements.yml', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_dpdk_socket_memory.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_unmanaged_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_baremetal_check_existing.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_container_image_prepare.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_host_cpus.py', 'tripleo_ansible/ansible_plugins/modules/os_baremetal_provide_node.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_build_heat_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_dpdk_nics_numa_info.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_nova_image_cache.py', 'tripleo_ansible/ansible_plugins/modules/os_baremetal_clean_node.py', 'molecule-requirements.txt', 'ansible-requirements.txt', 'tripleo_ansible/ansible_plugins/modules/tripleo_passwords_rotate.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_ovn_mac_addresses.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_generate_inventory_network_config.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_vip_provision.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_extract.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_vip_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_unprovision_network.py', 'tripleo_ansible/ansible_plugins/modules/baremetal_register_or_update_nodes.py', 'tox.ini', 'tripleo_ansible/ansible_plugins/modules/tripleo_network_ports_populate_environment.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ce82924d23c7a17c70ce880af0878c4663bdedd8', 'message': 'Convert all OS module imports to collections imports\n\nInstead of importing code from 2.9 Ansible modules, start import\nit from Openstack Ansible collection.\nIt requires Openstack Ansible collection to be installed and will\nwork with both Ansible 2.9 and 2.11\nChange-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037\n'}]",0,802715,ce82924d23c7a17c70ce880af0878c4663bdedd8,32,3,13,10969,,,0,"Convert all OS module imports to collections imports

Instead of importing code from 2.9 Ansible modules, start import
it from Openstack Ansible collection.
It requires Openstack Ansible collection to be installed and will
work with both Ansible 2.9 and 2.11
Change-Id: Ib3ebd504c4fc07296a62900981c40179af8d6037
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/15/802715/12 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/ansible_plugins/modules/tripleo_get_dpdk_core_list.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_vip_extract.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_service_vip.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_config_download.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_ports.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_composable_network.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_generate_ansible_inventory.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_network_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/os_tripleo_baremetal_node_introspection.py', 'tripleo_ansible/ansible_plugins/modules/os_baremetal_node_info.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_fernet_keys_rotate.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_flavor_profile.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_baremetal_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_introspected_data.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_list_overclouds.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_dpdk_socket_memory.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_unmanaged_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_baremetal_check_existing.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_container_image_prepare.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_host_cpus.py', 'tripleo_ansible/ansible_plugins/modules/os_baremetal_provide_node.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_build_heat_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_get_dpdk_nics_numa_info.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_nova_image_cache.py', 'tripleo_ansible/ansible_plugins/modules/os_baremetal_clean_node.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_passwords_rotate.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_ovn_mac_addresses.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_generate_inventory_network_config.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_vip_provision.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_extract.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_overcloud_network_vip_populate_environment.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_unprovision_network.py', 'tripleo_ansible/ansible_plugins/modules/baremetal_register_or_update_nodes.py', 'tripleo_ansible/ansible_plugins/modules/tripleo_network_ports_populate_environment.py']",34,c36760c7b3b97cd5e422182fff564e52f25152c2,newos,from ansible_collections.openstack.cloud.plugins.module_utils import openstack_full_argument_spec from ansible_collections.openstack.cloud.plugins.module_utils import openstack_module_kwargs from ansible_collections.openstack.cloud.plugins.module_utils import openstack_cloud_from_module,from ansible.module_utils.openstack import openstack_full_argument_spec from ansible.module_utils.openstack import openstack_module_kwargs from ansible.module_utils.openstack import openstack_cloud_from_module,96,96
openstack%2Fneutron~stable%2Fussuri~I9fe62c673e922186892c0cfb510788c0a7398ab4,openstack/neutron,stable/ussuri,I9fe62c673e922186892c0cfb510788c0a7398ab4,[stable only] Disable functional IPv6 GRE tests,MERGED,2021-07-27 16:23:36.000000000,2021-08-04 19:59:45.000000000,2021-08-04 19:58:10.000000000,"[{'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-27 16:23:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/08015107b7954aba957dff73deca1d94de878f12', 'message': '[DNM] Test functional job in ussuri\n\n2 recent backports fail both functional jobs with TIMED_OUT:\nhttps://review.opendev.org/c/openstack/neutron/+/801882\nhttps://review.opendev.org/c/openstack/neutron/+/802528\n\nNothing obvious in logs, so checking with DNM change\n\nChange-Id: I9fe62c673e922186892c0cfb510788c0a7398ab4\n'}, {'number': 2, 'created': '2021-08-03 07:34:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ce7924b4b8b53abe3a75d483373217c798a9ae2d', 'message': '[DNM] Test functional job in ussuri\n\n2 recent backports fail both functional jobs with TIMED_OUT:\nhttps://review.opendev.org/c/openstack/neutron/+/801882\nhttps://review.opendev.org/c/openstack/neutron/+/802528\n\nThis seems to be caused by recent kernel in Focal, see launchpad for\ndetails\n\nChange-Id: I9fe62c673e922186892c0cfb510788c0a7398ab4\n'}, {'number': 3, 'created': '2021-08-03 07:42:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ef2da0c6227923d399f693943f0ae9c28580d2cb', 'message': '[DNM] Test functional job in ussuri\n\n2 recent backports fail both functional jobs with TIMED_OUT:\nhttps://review.opendev.org/c/openstack/neutron/+/801882\nhttps://review.opendev.org/c/openstack/neutron/+/802528\n\nThis seems to be caused by recent kernel in Bionic, see launchpad for\ndetails\n\nChange-Id: I9fe62c673e922186892c0cfb510788c0a7398ab4\n'}, {'number': 4, 'created': '2021-08-03 08:12:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1becc6e6d188013654b8e49b84aef9a2b84dd2a1', 'message': '[DNM] Test functional job in ussuri\n\n2 recent backports fail both functional jobs with TIMED_OUT:\nhttps://review.opendev.org/c/openstack/neutron/+/801882\nhttps://review.opendev.org/c/openstack/neutron/+/802528\n\nThis seems to be caused by recent kernel in Bionic, see launchpad for\ndetails, disable GRE IPv6 tests\n\nChange-Id: I9fe62c673e922186892c0cfb510788c0a7398ab4\n'}, {'number': 5, 'created': '2021-08-03 13:18:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1a9260ca5b3f9ad0bfcae0ea54e7b53479b621f4', 'message': '[stable only] Disable functional IPv6 GRE tests\n\nRecent backports started timing out functional jobs in CI, where Bionic\nnodes use 4.15.0-151-generic kernel.\n\nOnce relevant tests are executed, we get timeouts in many network\nnamespace operations, and following tests failing until node is\nrebooted.\n\nThis can be seen in system log:\nkernel: unregister_netdevice: waiting for ip6gre0 to become free. Usage count = -1\n\nUntil relevant fix [0] is backported and newer kernel released, skip\nboth tests making use of IPv6+GRE\n\n[0] https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=0d7a7b2014b1a499a0fe24c9f3063d7856b5aaaf\n\nChange-Id: I9fe62c673e922186892c0cfb510788c0a7398ab4\nPartial-Bug: #1938262\n'}, {'number': 6, 'created': '2021-08-03 13:33:04.000000000', 'files': ['neutron/tests/functional/agent/common/test_ovs_lib.py', 'neutron/tests/functional/agent/test_ovs_lib.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/f48b43c6cb840066b880c1abcd384b618fc7577c', 'message': '[stable only] Disable functional IPv6 GRE tests\n\nRecent backports started timing out functional jobs in CI, where Bionic\nnodes use 4.15.0-151-generic kernel.\n\nOnce relevant tests are executed, we get timeouts in many network\nnamespace operations, and following tests failing until node is\nrebooted.\n\nThis can be seen in system log:\nkernel: unregister_netdevice: waiting for ip6gre0 to become free. Usage count = -1\n\nThe ip6gre0 kernel log pointed me to a related follow-up upstream fix\n[0], which s included in the current kernel [1], but apparently we can\nstill trigger a similar issue in ussuri functional tests.\n\nUntil this is sorted out, skip both tests making use of IPv6+GRE\n\n[0] https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=0d7a7b2014b1a499a0fe24c9f3063d7856b5aaaf\n[1] https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1930472\n\nChange-Id: I9fe62c673e922186892c0cfb510788c0a7398ab4\nPartial-Bug: #1938262\n'}]",0,802552,f48b43c6cb840066b880c1abcd384b618fc7577c,29,4,6,21798,,,0,"[stable only] Disable functional IPv6 GRE tests

Recent backports started timing out functional jobs in CI, where Bionic
nodes use 4.15.0-151-generic kernel.

Once relevant tests are executed, we get timeouts in many network
namespace operations, and following tests failing until node is
rebooted.

This can be seen in system log:
kernel: unregister_netdevice: waiting for ip6gre0 to become free. Usage count = -1

The ip6gre0 kernel log pointed me to a related follow-up upstream fix
[0], which s included in the current kernel [1], but apparently we can
still trigger a similar issue in ussuri functional tests.

Until this is sorted out, skip both tests making use of IPv6+GRE

[0] https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=0d7a7b2014b1a499a0fe24c9f3063d7856b5aaaf
[1] https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1930472

Change-Id: I9fe62c673e922186892c0cfb510788c0a7398ab4
Partial-Bug: #1938262
",git fetch https://review.opendev.org/openstack/neutron refs/changes/52/802552/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/base.py'],1,08015107b7954aba957dff73deca1d94de878f12,bug/1938262, # Dummy change,,1,0
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I27f677467263c0e6cc78d775edff55b3811fec1f,openstack/tripleo-heat-templates,stable/train,I27f677467263c0e6cc78d775edff55b3811fec1f,Introduce new HideSensitiveLogs parameter,MERGED,2021-08-04 09:43:55.000000000,2021-08-04 19:48:25.000000000,2021-08-04 19:48:25.000000000,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-08-04 09:43:55.000000000', 'files': ['deployment/haproxy/haproxy-public-tls-inject.yaml', 'common/deploy-steps.j2', 'deployment/nova/novajoin-container-puppet.yaml', 'deployment/ipsec/ipsec-baremetal-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d2def42c539b78510ac8a6ba5c9850f91ef00d88', 'message': 'Introduce new HideSensitiveLogs parameter\n\nThis one toggles the no_log parameter. Directly related to #1873770 in\norder to allow a deeper debug within CI.\n\nChange-Id: I27f677467263c0e6cc78d775edff55b3811fec1f\nRelated-Bug: #1873770\n(cherry picked from commit cabed543fa74014d17a6ac603bc2239237864b21)\n'}]",0,803438,d2def42c539b78510ac8a6ba5c9850f91ef00d88,10,5,1,8833,,,0,"Introduce new HideSensitiveLogs parameter

This one toggles the no_log parameter. Directly related to #1873770 in
order to allow a deeper debug within CI.

Change-Id: I27f677467263c0e6cc78d775edff55b3811fec1f
Related-Bug: #1873770
(cherry picked from commit cabed543fa74014d17a6ac603bc2239237864b21)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/38/803438/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/haproxy/haproxy-public-tls-inject.yaml', 'common/deploy-steps.j2', 'deployment/ipsec/ipsec-baremetal-ansible.yaml', 'deployment/nova/novajoin-container-puppet.yaml']",4,d2def42c539b78510ac8a6ba5c9850f91ef00d88,HideSensibleLogs-stable/train," no_log: ""{{ hide_sensitive_logs | bool }}""", no_log: true,12,5
openstack%2Frequirements~master~If70777c69e50a5557129c7cc8cc0f974144266af,openstack/requirements,master,If70777c69e50a5557129c7cc8cc0f974144266af,Updated from generate-constraints,MERGED,2021-08-01 06:28:21.000000000,2021-08-04 19:26:28.000000000,2021-08-04 19:25:14.000000000,"[{'_account_id': 4393}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-01 06:28:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/d78e802eb57de80f55078530ee66f6b6359ebc8d', 'message': 'Updated from generate-constraints\n\nChange-Id: If70777c69e50a5557129c7cc8cc0f974144266af\n'}, {'number': 2, 'created': '2021-08-01 16:49:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/430ffec1d01542a8680ccc52deb787cb07ae18e2', 'message': 'Updated from generate-constraints\n\nHeld back:\n- XStatic-Angular===1.8.2.1\n- WSME===0.11.0\n- fasteners===0.16.3\n\nremoved:\n- pkg_resources===0.0.0\n\nreadded:\n- setuptools===57.4.0\n\nChange-Id: If70777c69e50a5557129c7cc8cc0f974144266af\n'}, {'number': 3, 'created': '2021-08-04 14:38:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/c7e2ab30ccb4e17fb3480db080e1a1b2708d79c9', 'message': 'Updated from generate-constraints\n\nHeld back:\n- XStatic-Angular===1.8.2.1\n- WSME===0.11.0\n- fasteners===0.16.3\n\nremoved:\n- pkg_resources===0.0.0\n\nreadded:\n- setuptools===57.4.0\n\nDepends-On: https://review.opendev.org/803484\n\nChange-Id: If70777c69e50a5557129c7cc8cc0f974144266af\n'}, {'number': 4, 'created': '2021-08-04 14:42:41.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/3dac248b10e5bccbeb56b26d494b3fd9f36187e3', 'message': 'Updated from generate-constraints\n\nHeld back:\n- XStatic-Angular===1.8.2.1\n- WSME===0.11.0\n- fasteners===0.16.3\n\nremoved:\n- pkg_resources===0.0.0\n\nreadded:\n- setuptools===57.4.0\n\nDepends-On: https://review.opendev.org/803484\nChange-Id: If70777c69e50a5557129c7cc8cc0f974144266af\nSigned-off-by: Matthew Thode <mthode@mthode.org>\n'}]",0,803113,3dac248b10e5bccbeb56b26d494b3fd9f36187e3,18,3,4,11131,,,0,"Updated from generate-constraints

Held back:
- XStatic-Angular===1.8.2.1
- WSME===0.11.0
- fasteners===0.16.3

removed:
- pkg_resources===0.0.0

readded:
- setuptools===57.4.0

Depends-On: https://review.opendev.org/803484
Change-Id: If70777c69e50a5557129c7cc8cc0f974144266af
Signed-off-by: Matthew Thode <mthode@mthode.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/13/803113/3 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,d78e802eb57de80f55078530ee66f6b6359ebc8d,openstack/requirements/constraints/glance-fails,# generated using: tox -e generatenetworkx===2.5.1;python_version=='3.6' networkx===2.6.2;python_version=='3.8'XStatic-Angular===1.8.2.1pkg_resources===0.0.0importlib-metadata===4.6.3WSME===0.11.0decorator===4.4.2;python_version=='3.6' decorator===5.0.9;python_version=='3.8'fasteners===0.16.3virtualenv===20.7.0,networkx===2.5.1XStatic-Angular===1.5.8.0importlib-metadata===4.6.2WSME===0.10.1decorator===4.4.2fasteners===0.14.1virtualenv===20.6.0setuptools===57.4.0,11,8
openstack%2Fopenstack-ansible-os_keystone~master~I50c649fda50b9e6a984abccdf61717a2294caaee,openstack/openstack-ansible-os_keystone,master,I50c649fda50b9e6a984abccdf61717a2294caaee,Fix shibboleth compatibility for ubuntu 18.04,MERGED,2021-07-22 13:07:35.000000000,2021-08-04 18:26:27.000000000,2021-08-04 18:25:08.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 29865}]","[{'number': 1, 'created': '2021-07-22 13:07:35.000000000', 'files': ['vars/ubuntu-18.04.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_keystone/commit/22208370f429ba1cdfe5067b48dc54b76f62aad8', 'message': 'Fix shibboleth compatibility for ubuntu 18.04\n\nPackage and module names were accidentally updated to equivalents\nused for Debian and Ubuntu Focal+. This patch adds a temporary\nvars file for Ubuntu 18.04 to maintain compatibility.\n\nChange-Id: I50c649fda50b9e6a984abccdf61717a2294caaee\n'}]",0,801849,22208370f429ba1cdfe5067b48dc54b76f62aad8,9,3,1,31542,,,0,"Fix shibboleth compatibility for ubuntu 18.04

Package and module names were accidentally updated to equivalents
used for Debian and Ubuntu Focal+. This patch adds a temporary
vars file for Ubuntu 18.04 to maintain compatibility.

Change-Id: I50c649fda50b9e6a984abccdf61717a2294caaee
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_keystone refs/changes/49/801849/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/ubuntu-18.04.yml'],1,22208370f429ba1cdfe5067b48dc54b76f62aad8,,"--- # Copyright 2016, Rackspace US, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. cache_timeout: 600 keystone_distro_packages: - git - openssh-server - rsync - cron - libpython3-dev keystone_devel_distro_packages: - docutils-common - libffi-dev - libjs-sphinxdoc - libjs-underscore - libldap2-dev - libsasl2-dev - libsystemd-dev - libssl-dev - libxslt1.1 - libxslt1-dev - libxml2-dev - pkg-config - python3-dev keystone_service_distro_packages: - python3-keystone - python3-systemd - uwsgi - uwsgi-plugin-python3 keystone_apache_distro_packages: - apache2 - apache2-utils - libapache2-mod-proxy-uwsgi keystone_nginx_distro_packages: - nginx-extras keystone_idp_distro_packages: - ssl-cert - xmlsec1 keystone_sp_apache_mod_packages: - name: libapache2-mod-shib2 state: ""{{ keystone_sp_apache_mod_shib | ternary('present', 'absent') }}"" - name: libapache2-mod-auth-openidc state: ""{{ keystone_sp_apache_mod_auth_openidc | ternary('present', 'absent') }}"" keystone_developer_mode_distro_packages: - build-essential keystone_oslomsg_amqp1_distro_packages: - libsasl2-modules - sasl2-bin keystone_apache_default_sites: - ""/etc/apache2/sites-enabled/000-default.conf"" keystone_apache_site_available: ""/etc/apache2/sites-available/keystone-httpd.conf"" keystone_apache_site_enabled: ""/etc/apache2/sites-enabled/keystone-httpd.conf"" keystone_apache_conf: ""/etc/apache2/apache2.conf"" keystone_apache_default_log_folder: ""/var/log/apache2"" keystone_apache_default_log_owner: ""root"" keystone_apache_default_log_grp: ""adm"" keystone_apache_security_conf: ""/etc/apache2/conf-available/security.conf"" keystone_apache_configs: - { src: ""keystone-ports.conf.j2"", dest: ""/etc/apache2/ports.conf"" } - { src: ""keystone-httpd.conf.j2"", dest: ""/etc/apache2/sites-available/keystone-httpd.conf"" } - { src: ""keystone-httpd-mpm.conf.j2"", dest: ""/etc/apache2/mods-available/mpm_{{ keystone_httpd_mpm_backend }}.conf"" } keystone_apache_modules: - name: ""ssl"" state: ""{{ (keystone_ssl | bool) | ternary('present', 'absent') }}"" - name: ""shib2"" state: ""{{ keystone_sp_apache_mod_shib | ternary('present', 'absent') }}"" - name: ""auth_openidc"" state: ""{{ keystone_sp_apache_mod_auth_openidc | ternary('present', 'absent') }}"" - name: ""proxy_uwsgi"" state: ""present"" - name: ""headers"" state: ""present"" # This can be enabled when Apache2.5+ is available # - name: ""mod_journald"" # state: ""present keystone_nginx_conf_path: ""sites-available"" keystone_system_service_name: apache2 keystone_uwsgi_bin: '/usr/bin' keystone_sshd: ssh ",,108,0
openstack%2Fglance-specs~master~I43dd686118374d1320d15fc85bca716cc1010ff0,openstack/glance-specs,master,I43dd686118374d1320d15fc85bca716cc1010ff0,Policy layer refactoring,MERGED,2021-06-17 05:24:19.000000000,2021-08-04 18:04:38.000000000,2021-07-14 13:47:18.000000000,"[{'_account_id': 4393}, {'_account_id': 5046}, {'_account_id': 5202}, {'_account_id': 5314}, {'_account_id': 7973}, {'_account_id': 8122}, {'_account_id': 9303}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-17 05:24:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/85f7d6dd249d71f832998f540ff476c854b9fc13', 'message': 'Policy layer refactoring\n\nChange-Id: I43dd686118374d1320d15fc85bca716cc1010ff0\n'}, {'number': 2, 'created': '2021-06-22 05:43:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/bc4a9774e374e2d3cd1f0d678c0ceb4c70a0880d', 'message': 'Policy layer refactoring\n\nRelated-Bug: https://bugs.launchpad.net/glance/+bug/1915582\nChange-Id: I43dd686118374d1320d15fc85bca716cc1010ff0\n'}, {'number': 3, 'created': '2021-06-22 16:12:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/631c9572cbe005ef51a554a721eeb48077371b5b', 'message': 'Policy layer refactoring\n\nRelated-Bug: https://bugs.launchpad.net/glance/+bug/1915582\nChange-Id: I43dd686118374d1320d15fc85bca716cc1010ff0\n'}, {'number': 4, 'created': '2021-07-05 05:39:44.000000000', 'files': ['specs/xena/approved/glance/glance-policy-refactoring.rst'], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/3c54a84d9ce044a1e159a6abeb59ccf7ce44d67a', 'message': 'Policy layer refactoring\n\nRelated-Bug: https://bugs.launchpad.net/glance/+bug/1915582\nChange-Id: I43dd686118374d1320d15fc85bca716cc1010ff0\n'}]",60,796753,3c54a84d9ce044a1e159a6abeb59ccf7ce44d67a,37,8,4,9303,,,0,"Policy layer refactoring

Related-Bug: https://bugs.launchpad.net/glance/+bug/1915582
Change-Id: I43dd686118374d1320d15fc85bca716cc1010ff0
",git fetch https://review.opendev.org/openstack/glance-specs refs/changes/53/796753/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/xena/approved/glance/glance-policy-refactoring.rst'],1,85f7d6dd249d71f832998f540ff476c854b9fc13,bp/policy-refactoring,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode ======================== Policy Layer Refactoring ======================== https://blueprints.launchpad.net/glance/+spec/policy-refactor During implementation of V2 Image API in glance an Onion layered architecture was introduced. The reason behind implementing the layered architecture was to avoid regression in any layer if either of the layer is modified. Glance has separate layer for Policy injections which is closed to database rather than API. This spec will act as a Master specification for policy refactoring and have several spec-lite's to explain respective implementation details. Problem description =================== The current policy enforcement occurs in Policy layer. As such, it is conceptually tied to the Objects implemented in the Glance architecture. A problem with this design, which has only revealed itself as the v2 API has matured, is that operators want to use policies to control who can make API calls (as they can with most other OpenStack services). In Glance, however, policies directly affect the objects dealt with internally by Glance, and only indirectly affect who can make API calls. This makes it difficult for operators to configure Glance. In addition, while implementing Secure RBAC in glance we also noticed that certain API calls enforce multiple policies down the layer. For example in case of `modify_image` policy it enforces `get_image` policy which enforces `get_image_location` policy. This can be confusing for operators modifying the policy for `modify_image` and wondering why it hasn't taken effect if the `get_image` policy or `get_image_policy` short-circuits the operation. Proposed change =============== We need a better way of handling policies: 1. One of the major proposal is to move the actual policy enforcement up to the API layer so that an operator can, for example, easily restrict access to a particular call. 2. Make `get_*` policies to be enforced only while showing particular resource rather than enforcing it for each API call. For example `get_image` policy should be enforced only for showing particular image to end user and not for other API calls such as update, delete, upload or download image. 3. We can keep resource specific policies such as image members, visibility related policies close to database layer. 4. Policy enforcement should be backward compatible means it should work with old policies as well as new secure RBAC structured policies. 5. At the moment our unit and functional tests are referring to policy.yaml file from the test repo, instead it should be used our default policies and needed to overridden as and when required. 6. In order to test new policy changes with RBAC we need two different CI jobs which will run our tests with old policies as well as with the new RBAC flag enabled. Note: Some of the above changes will have its own spec lite to further discuss the implementation details. Alternatives ------------ Keep it as it is and use hacks while implementing other scopes of Secure RBAC. Data model impact ----------------- None REST API impact --------------- None Security impact --------------- None Notifications impact -------------------- None Other end user impact --------------------- None Performance Impact ------------------ None Other deployer impact --------------------- Operators need to understand which policies to govern and how to configure them properly, specifically related to secure RBAC. Developer impact ---------------- Developers will have go be more aware of policies and where policy enforcement must happen. Implementation ============== Assignee(s) ----------- Primary assignee: dansmith Other contributors: abhishek-kekane Work Items ---------- * Move API specific policy checks up to the API layer * Enforce `get_*` policies at API layer only * Enforce resource specific policies close to database layer * Policy enforcement should be compatible with secure RBAC structure * Tests should run using default policies and not policy.yaml * New CI jobs to run tempest tests with and without Secure RBAC enabled Dependencies ============ None Testing ======= As explained in Work Items section our unit and functional tests need to use our default polices in code rather than policy.yaml file. We also need new CI jobs to run tempest tests with and without Secure RBAC enabled. Documentation Impact ==================== Policies are documented in code, so the documentation will be updated as the refactoring occurs. References ========== * https://review.opendev.org/q/topic:%22policy-poc%22+(status:open%20OR%20status:merged) * https://bugs.launchpad.net/glance/+bug/1915582 ",,169,0
openstack%2Fpython-cinderclient~master~I324cd145da8469f505ae2c135ee5035ee7008ca1,openstack/python-cinderclient,master,I324cd145da8469f505ae2c135ee5035ee7008ca1,Dropping lower constraints testing,MERGED,2021-05-02 01:29:16.000000000,2021-08-04 17:05:55.000000000,2021-08-04 17:02:22.000000000,"[{'_account_id': 4523}, {'_account_id': 5314}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-05-02 01:29:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/3f601008e0cdc9df453ae79b7349d354e0188d6a', 'message': 'Dropping lower constraints testing\n\nWe facing errors related to the new pip resolver, this\ntopic was discussed on the ML and QA team proposed to\nto test lower-constraints [1].\n\nI propose to drop this test because the complexity and recurring pain needed\nto maintain that now exceeds the benefits provided by this mechanismes.\n\n[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-December/019390.html\n\nChange-Id: I324cd145da8469f505ae2c135ee5035ee7008ca1\n'}, {'number': 2, 'created': '2021-07-07 20:40:59.000000000', 'files': ['.zuul.yaml', 'lower-constraints.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/14bb5434db5c4e5de6cb46add098f6559871155d', 'message': 'Dropping lower constraints testing\n\nWe facing errors related to the new pip resolver, this\ntopic was discussed on the ML and QA team proposed to\nto test lower-constraints [1].\n\nI propose to drop this test because the complexity and recurring pain needed\nto maintain that now exceeds the benefits provided by this mechanismes.\n\n[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-December/019390.html\n\nChange-Id: I324cd145da8469f505ae2c135ee5035ee7008ca1\n'}]",0,789065,14bb5434db5c4e5de6cb46add098f6559871155d,12,3,2,30384,,,0,"Dropping lower constraints testing

We facing errors related to the new pip resolver, this
topic was discussed on the ML and QA team proposed to
to test lower-constraints [1].

I propose to drop this test because the complexity and recurring pain needed
to maintain that now exceeds the benefits provided by this mechanismes.

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-December/019390.html

Change-Id: I324cd145da8469f505ae2c135ee5035ee7008ca1
",git fetch https://review.opendev.org/openstack/python-cinderclient refs/changes/65/789065/2 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'lower-constraints.txt', 'tox.ini']",3,3f601008e0cdc9df453ae79b7349d354e0188d6a,drop-l-c,,[testenv:lower-constraints] deps = -c{toxinidir}/lower-constraints.txt -r{toxinidir}/test-requirements.txt -r{toxinidir}/requirements.txt,0,25
openstack%2Fnova~master~Icad539593111c352342026567f51253cd3a0b52b,openstack/nova,master,Icad539593111c352342026567f51253cd3a0b52b,Fix incorrect reservation IDs in unit tests,NEW,2021-08-03 15:33:05.000000000,2021-08-04 17:02:47.000000000,,"[{'_account_id': 19234}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 15:33:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/497dac650ac1f379626ed7213f8376327092ab9e', 'message': 'Fix incorrect reservation IDs in unit tests\n\nReservation ID should start with ""r-"" prefix and contain 8 random\nnumbers or lower-case letters. Some tests contain definitions of\nreservation ID which doesn\'t match requirements.\n\nThis change fixes this minor problem in gentle way: appends\nextra number to existing ""r-fakeres"" reservation IDs and\nintroduces hardcoded reservation IDs when existing definition\ndoesn\'t match format at all.\n\nPartial-Bug: #1746747\nChange-Id: Icad539593111c352342026567f51253cd3a0b52b\n'}, {'number': 2, 'created': '2021-08-04 12:34:49.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_hosts.py', 'nova/tests/unit/api/openstack/compute/test_server_groups.py', 'nova/tests/unit/test_quota.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/unit/api/openstack/compute/test_servers.py', 'nova/tests/unit/compute/test_compute_utils.py', 'nova/tests/unit/db/test_db_api.py', 'nova/tests/unit/compute/test_api.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a2487344c2978dca90ed3505904508b0dca57b1c', 'message': 'Fix incorrect reservation IDs in unit tests\n\nReservation ID should start with ""r-"" prefix and contain 8 random\nnumbers or lower-case letters. Some tests contain definitions of\nreservation ID which doesn\'t match requirements.\n\nThis change fixes this minor problem in gentle way: appends\nextra number to existing ""r-fakeres"" reservation IDs, uses\n""r-fakeres1"" and ""r-fakeres2"" instead of malformed\nreservation ID where it helps to preserver readability and\nintroduces hardcoded reservation IDs when existing definition\ndoesn\'t match format at all.\n\nPartial-Bug: #1746747\nChange-Id: Icad539593111c352342026567f51253cd3a0b52b\n'}]",0,803363,a2487344c2978dca90ed3505904508b0dca57b1c,14,2,2,19234,,,0,"Fix incorrect reservation IDs in unit tests

Reservation ID should start with ""r-"" prefix and contain 8 random
numbers or lower-case letters. Some tests contain definitions of
reservation ID which doesn't match requirements.

This change fixes this minor problem in gentle way: appends
extra number to existing ""r-fakeres"" reservation IDs, uses
""r-fakeres1"" and ""r-fakeres2"" instead of malformed
reservation ID where it helps to preserver readability and
introduces hardcoded reservation IDs when existing definition
doesn't match format at all.

Partial-Bug: #1746747
Change-Id: Icad539593111c352342026567f51253cd3a0b52b
",git fetch https://review.opendev.org/openstack/nova refs/changes/63/803363/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/api/openstack/compute/test_hosts.py', 'nova/tests/unit/api/openstack/compute/test_server_groups.py', 'nova/tests/unit/test_quota.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/unit/api/openstack/compute/test_servers.py', 'nova/tests/unit/compute/test_compute_utils.py', 'nova/tests/unit/db/test_db_api.py', 'nova/tests/unit/compute/test_api.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",9,497dac650ac1f379626ed7213f8376327092ab9e,1746747, inst['reservation_id'] = 'r-fakeres1', inst['reservation_id'] = 'r-fakeres',32,29
openstack%2Fproject-config~master~I7370673cc453e656b00390f477db9d64c6d5fafa,openstack/project-config,master,I7370673cc453e656b00390f477db9d64c6d5fafa,Allow kolla cores to edit kolla hashtags,MERGED,2021-07-28 15:44:37.000000000,2021-08-04 16:58:58.000000000,2021-08-04 16:17:36.000000000,"[{'_account_id': 4146}, {'_account_id': 5263}, {'_account_id': 13252}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}]","[{'number': 1, 'created': '2021-07-28 15:44:37.000000000', 'files': ['gerrit/acls/openstack/kolla-ansible.config', 'gerrit/acls/openstack/kolla.config', 'gerrit/acls/openstack/kayobe.config'], 'web_link': 'https://opendev.org/openstack/project-config/commit/9d97572f1761c5d7778670fa2d331afd9a18b401', 'message': 'Allow kolla cores to edit kolla hashtags\n\nConsidering each subteam (kolla-ansible and kayobe) as well.\n\nChange-Id: I7370673cc453e656b00390f477db9d64c6d5fafa\n'}]",0,802744,9d97572f1761c5d7778670fa2d331afd9a18b401,11,6,1,30491,,,0,"Allow kolla cores to edit kolla hashtags

Considering each subteam (kolla-ansible and kayobe) as well.

Change-Id: I7370673cc453e656b00390f477db9d64c6d5fafa
",git fetch https://review.opendev.org/openstack/project-config refs/changes/44/802744/1 && git format-patch -1 --stdout FETCH_HEAD,"['gerrit/acls/openstack/kolla-ansible.config', 'gerrit/acls/openstack/kolla.config', 'gerrit/acls/openstack/kayobe.config']",3,9d97572f1761c5d7778670fa2d331afd9a18b401,kolla-core-allow-edit-hashtags,editHashtags = group kayobe-core,,3,0
openstack%2Fhorizon~master~I8f8359e8e17e8d83202f4ac00e1de3f78c119b27,openstack/horizon,master,I8f8359e8e17e8d83202f4ac00e1de3f78c119b27,Remove NoVNC authorization token from URL,NEW,2018-11-05 16:42:40.000000000,2021-08-04 16:51:34.000000000,,"[{'_account_id': 841}, {'_account_id': 22348}, {'_account_id': 27838}]","[{'number': 1, 'created': '2018-11-05 16:42:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/60ef450efdda366158c826c0ff7bd32d96530d57', 'message': '[WIP] Remove NoVNC authorization token from URL\n\nCurrently, Console tab in Instances dashboards passes NoVNC token in GET\nrequest query. It is insecure. NoVNC supports token passed in cookies,\nwhich are at least not logged. Proposed patch makes Horizon using\ncookies for this purpose.\n\nChange-Id: I8f8359e8e17e8d83202f4ac00e1de3f78c119b27\n'}, {'number': 2, 'created': '2021-08-04 12:10:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/8b582d46d9b4e1c43406fd1fe5e3898e22b8e5ce', 'message': '[WIP] Remove NoVNC authorization token from URL\n\nCurrently, Console tab in Instances dashboards passes NoVNC token in GET\nrequest query. It is insecure. NoVNC supports token passed in cookies,\nwhich are at least not logged. Proposed patch makes Horizon using\ncookies for this purpose.\n\nChange-Id: I8f8359e8e17e8d83202f4ac00e1de3f78c119b27\n'}, {'number': 3, 'created': '2021-08-04 15:25:30.000000000', 'files': ['horizon/tabs/views.py', 'openstack_dashboard/dashboards/project/instances/tabs.py', 'openstack_dashboard/dashboards/project/instances/views.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/4564c82748aadac6a364c67ae23962112820fb63', 'message': 'Remove NoVNC authorization token from URL\n\nCurrently, Console tab in Instances dashboards passes NoVNC token in GET\nrequest query. It is insecure. NoVNC supports token passed in cookies,\nwhich are at least not logged. Proposed patch makes Horizon using\ncookies for this purpose.\n\nChange-Id: I8f8359e8e17e8d83202f4ac00e1de3f78c119b27\n'}]",156,615599,4564c82748aadac6a364c67ae23962112820fb63,9,3,3,27838,,,0,"Remove NoVNC authorization token from URL

Currently, Console tab in Instances dashboards passes NoVNC token in GET
request query. It is insecure. NoVNC supports token passed in cookies,
which are at least not logged. Proposed patch makes Horizon using
cookies for this purpose.

Change-Id: I8f8359e8e17e8d83202f4ac00e1de3f78c119b27
",git fetch https://review.opendev.org/openstack/horizon refs/changes/99/615599/2 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'horizon/tabs/views.py', 'openstack_dashboard/dashboards/project/instances/templates/instances/_detail_console.html', 'openstack_dashboard/dashboards/project/instances/tabs.py', 'openstack_dashboard/dashboards/project/instances/views.py']",5,60ef450efdda366158c826c0ff7bd32d96530d57,change-615599-1," self.request.COOKIES['token'] = self.request.session.get('novnc_token', None) # import ipdb; ipdb.set_trace() def render_to_response(self, context): response = super(DetailView, self).render_to_response(context) # import ipdb;ipdb.set_trace() response.set_cookie('token', self.request.session.get('novnc_token', None)) return response ",,40,4
openstack%2Fpuppet-tripleo~master~I2a28cd1b7a92776b711eb784db3c4a486dcf6a85,openstack/puppet-tripleo,master,I2a28cd1b7a92776b711eb784db3c4a486dcf6a85,Include db classes explicitly,MERGED,2021-04-16 13:00:00.000000000,2021-08-04 16:44:16.000000000,2021-08-04 07:40:58.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-04-16 13:00:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/84ab30d28eeb7b09623e62fa4a32bcd5827b506a', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 2, 'created': '2021-04-16 13:07:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/e5c78d67dc6ae06892596803d63b41541e175dde', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 3, 'created': '2021-04-16 13:08:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/dbf68f984d2303f43fc9d3b2be0187f325593826', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 4, 'created': '2021-04-17 07:12:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/ec8802f2aebdbc4090a3a8572a2db9631d0900d5', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 5, 'created': '2021-04-19 14:03:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/8d9c25ce9aa2f770acdf6795f413553adf3dffdc', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 6, 'created': '2021-04-19 14:06:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/e5db6b08e50f65cd9f086fbdeeeceb39aa8100e3', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 7, 'created': '2021-04-19 14:36:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/860295e1662cc90a47b50a7d863de79e17353908', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 8, 'created': '2021-04-19 23:15:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/41ebaa8ab103571233e103eceefc20aeedfded59', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 9, 'created': '2021-07-04 23:34:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/5db707dbc48acc7700a3c2b3b0b42c30de6a29e2', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 10, 'created': '2021-07-25 23:26:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/9ad9e8b5b42a303c3e3c3cbfff7af12659db3406', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}, {'number': 11, 'created': '2021-07-26 01:13:41.000000000', 'files': ['spec/classes/tripleo_profile_base_mistral_spec.rb', 'spec/classes/tripleo_profile_base_placement_spec.rb', 'manifests/profile/base/octavia.pp', 'manifests/profile/base/ironic.pp', 'spec/classes/tripleo_profile_base_keystone_spec.rb', 'manifests/profile/base/manila.pp', 'manifests/profile/base/gnocchi.pp', 'manifests/profile/base/mistral.pp', 'manifests/profile/base/aodh.pp', 'manifests/profile/base/barbican.pp', 'spec/classes/tripleo_profile_base_ceilometer_spec.rb', 'spec/classes/tripleo_profile_base_gnocchi_spec.rb', 'spec/classes/tripleo_profile_base_octavia_spec.rb', 'manifests/profile/base/heat.pp', 'spec/classes/tripleo_profile_base_glance_api_spec.rb', 'manifests/profile/base/keystone.pp', 'spec/classes/tripleo_profile_base_aodh_spec.rb', 'spec/classes/tripleo_profile_base_cinder_spec.rb', 'manifests/profile/base/glance/api.pp', 'spec/classes/tripleo_profile_base_heat_spec.rb', 'manifests/profile/base/ironic_inspector.pp', 'manifests/profile/base/placement.pp', 'spec/classes/tripleo_profile_base_ironic_inspector_spec.rb', 'spec/classes/tripleo_profile_base_ironic_spec.rb', 'manifests/profile/base/ceilometer.pp', 'manifests/profile/base/cinder.pp', 'spec/classes/tripleo_profile_base_barbican_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/7b3a8cd8919399e0309c6343894a594e528d2f9a', 'message': ""Include db classes explicitly\n\nSince database parameters in the base classes were deprecated, it is\nlikely that db classes are no longer included automatically in a future\nrelease. Let's ensure that the db classes are included so that\ndatabase parameters are always set.\n\nChange-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85\n""}]",0,786644,7b3a8cd8919399e0309c6343894a594e528d2f9a,47,4,11,9816,,,0,"Include db classes explicitly

Since database parameters in the base classes were deprecated, it is
likely that db classes are no longer included automatically in a future
release. Let's ensure that the db classes are included so that
database parameters are always set.

Change-Id: I2a28cd1b7a92776b711eb784db3c4a486dcf6a85
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/44/786644/10 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/tripleo_profile_base_mistral_spec.rb', 'spec/classes/tripleo_profile_base_placement_spec.rb', 'manifests/profile/base/octavia.pp', 'manifests/profile/base/neutron.pp', 'manifests/profile/base/ironic.pp', 'spec/classes/tripleo_profile_base_keystone_spec.rb', 'manifests/profile/base/manila.pp', 'manifests/profile/base/gnocchi.pp', 'manifests/profile/base/mistral.pp', 'manifests/profile/base/aodh.pp', 'manifests/profile/base/barbican.pp', 'spec/classes/tripleo_profile_base_ceilometer_spec.rb', 'spec/classes/tripleo_profile_base_gnocchi_spec.rb', 'spec/classes/tripleo_profile_base_neutron_spec.rb', 'spec/classes/tripleo_profile_base_octavia_spec.rb', 'manifests/profile/base/heat.pp', 'spec/classes/tripleo_profile_base_glance_api_spec.rb', 'manifests/profile/base/zaqar.pp', 'manifests/profile/base/keystone.pp', 'spec/classes/tripleo_profile_base_aodh_spec.rb', 'spec/classes/tripleo_profile_base_cinder_spec.rb', 'spec/classes/tripleo_profile_base_designate_spec.rb', 'manifests/profile/base/glance/api.pp', 'spec/classes/tripleo_profile_base_heat_spec.rb', 'manifests/profile/base/ironic_inspector.pp', 'manifests/profile/base/designate.pp', 'manifests/profile/base/placement.pp', 'spec/classes/tripleo_profile_base_ironic_inspector_spec.rb', 'spec/classes/tripleo_profile_base_zaqar_spec.rb', 'spec/classes/tripleo_profile_base_ironic_spec.rb', 'manifests/profile/base/ceilometer.pp', 'manifests/profile/base/cinder.pp', 'spec/classes/tripleo_profile_base_barbican_spec.rb']",33,84ab30d28eeb7b09623e62fa4a32bcd5827b506a,db, is_expected.to_not contain_class('barbican::db') is_expected.to contain_class('barbican::db'),,91,26
openstack%2Fmanila-test-image~master~I73bc84c0182ff066e1e9c91df685c9af444b3d6f,openstack/manila-test-image,master,I73bc84c0182ff066e1e9c91df685c9af444b3d6f,DNM: testing gate on ubuntu focal,ABANDONED,2020-07-27 00:41:27.000000000,2021-08-04 16:28:52.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-27 00:41:27.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/manila-test-image/commit/16389e2693c7d74d381da0c3e17b4fb0515feb76', 'message': 'DNM: testing gate on ubuntu focal\n\nThis tests:\n- unit tests jobs\n- functional tests jobs\n- docs jobs\nStory: #2007865\nTask: #40194\nDepends-On: https://review.opendev.org/#/c/734700/\n\nChange-Id: I73bc84c0182ff066e1e9c91df685c9af444b3d6f\n'}]",0,743139,16389e2693c7d74d381da0c3e17b4fb0515feb76,3,1,1,8556,,,0,"DNM: testing gate on ubuntu focal

This tests:
- unit tests jobs
- functional tests jobs
- docs jobs
Story: #2007865
Task: #40194
Depends-On: https://review.opendev.org/#/c/734700/

Change-Id: I73bc84c0182ff066e1e9c91df685c9af444b3d6f
",git fetch https://review.opendev.org/openstack/manila-test-image refs/changes/39/743139/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,16389e2693c7d74d381da0c3e17b4fb0515feb76,,#test focal,,1,0
openstack%2Fkeystoneauth~master~I5bf7b8660634c92e761c951492d18090ae731bb4,openstack/keystoneauth,master,I5bf7b8660634c92e761c951492d18090ae731bb4,DNM: testing py35 job fix,ABANDONED,2020-05-21 23:51:37.000000000,2021-08-04 16:28:48.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-21 23:51:37.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/keystoneauth/commit/fe322f7b4bc903449e0793c0a2eee97e80f7027a', 'message': 'DNM: testing py35 job fix\n\nDepends-On: https://review.opendev.org/#/c/730148/\nChange-Id: I5bf7b8660634c92e761c951492d18090ae731bb4\n'}]",0,730150,fe322f7b4bc903449e0793c0a2eee97e80f7027a,11,2,1,8556,,,0,"DNM: testing py35 job fix

Depends-On: https://review.opendev.org/#/c/730148/
Change-Id: I5bf7b8660634c92e761c951492d18090ae731bb4
",git fetch https://review.opendev.org/openstack/keystoneauth refs/changes/50/730150/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,fe322f7b4bc903449e0793c0a2eee97e80f7027a,,# NOTE(browne): This is required for the integration test job of the bandit,# NOTE(browne): This is required for the integration test job of the bandit,1,1
openstack%2Fkeystone~stable%2Ftrain~I9cda31ffbbccfe287a48fc022a3136a04da10fbe,openstack/keystone,stable/train,I9cda31ffbbccfe287a48fc022a3136a04da10fbe,DNM: testing py2 job on stable/train|stein,ABANDONED,2020-05-20 14:11:29.000000000,2021-08-04 16:28:45.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-20 14:11:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/84b5a8f9a5003ffa28f6a013297d1f1fe2e094e6', 'message': 'DNM: testing py2 job on stable/train|stein\n\nChange-Id: I9cda31ffbbccfe287a48fc022a3136a04da10fbe\n'}, {'number': 2, 'created': '2020-05-21 02:06:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/72da39d77da01b0d878dd091b7d2db0c90659864', 'message': 'DNM: testing py2 job on stable/train|stein\n\nDepends-On: https://review.opendev.org/#/c/729814/\nChange-Id: I9cda31ffbbccfe287a48fc022a3136a04da10fbe\n'}, {'number': 3, 'created': '2020-05-21 03:52:31.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/keystone/commit/5f0a3ecfb72aa1e2b4adc3711042b735abe2ab0b', 'message': 'DNM: testing py2 job on stable/train|stein\n\nDepends-On: https://review.opendev.org/#/c/729814/\nDepends-On: https://review.opendev.org/#/c/729722/\nChange-Id: I9cda31ffbbccfe287a48fc022a3136a04da10fbe\n'}]",0,729611,5f0a3ecfb72aa1e2b4adc3711042b735abe2ab0b,16,2,3,8556,,,0,"DNM: testing py2 job on stable/train|stein

Depends-On: https://review.opendev.org/#/c/729814/
Depends-On: https://review.opendev.org/#/c/729722/
Change-Id: I9cda31ffbbccfe287a48fc022a3136a04da10fbe
",git fetch https://review.opendev.org/openstack/keystone refs/changes/11/729611/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,84b5a8f9a5003ffa28f6a013297d1f1fe2e094e6,,# This job will execute 'tox -e upgrade' from the OSA,# This job will execute 'tox -e upgrade' from the OSA,1,1
openstack%2Fkeystone~stable%2Fstein~I9cda31ffbbccfe287a48fc022a3136a04da10fbe,openstack/keystone,stable/stein,I9cda31ffbbccfe287a48fc022a3136a04da10fbe,DNM: testing py2 job on stable/train|stein,ABANDONED,2020-05-20 14:13:19.000000000,2021-08-04 16:28:41.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-05-20 14:13:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/eccdf0d82762d81553ab279a8d3f89519614fe43', 'message': 'DNM: testing py2 job on stable/train|stein\n\nChange-Id: I9cda31ffbbccfe287a48fc022a3136a04da10fbe\n'}, {'number': 2, 'created': '2020-05-21 02:06:31.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/keystone/commit/05a5bf92aadb653c861081b3680593d861d01515', 'message': 'DNM: testing py2 job on stable/train|stein\n\nDepends-On: https://review.opendev.org/#/c/729814/\nChange-Id: I9cda31ffbbccfe287a48fc022a3136a04da10fbe\n'}]",0,729612,05a5bf92aadb653c861081b3680593d861d01515,5,1,2,8556,,,0,"DNM: testing py2 job on stable/train|stein

Depends-On: https://review.opendev.org/#/c/729814/
Change-Id: I9cda31ffbbccfe287a48fc022a3136a04da10fbe
",git fetch https://review.opendev.org/openstack/keystone refs/changes/12/729612/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,eccdf0d82762d81553ab279a8d3f89519614fe43,,# This job will execute 'tox -e upgrade' from the OSA,# This job will execute 'tox -e upgrade' from the OSA,1,1
openstack%2Fironic~stable%2Ftrain~Ic5bb1281d0092c0c56ad6056f06c541a99d77cc3,openstack/ironic,stable/train,Ic5bb1281d0092c0c56ad6056f06c541a99d77cc3,DNM: testing py2 job with older tempest fix,ABANDONED,2020-05-20 17:18:48.000000000,2021-08-04 16:28:38.000000000,,"[{'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-20 17:18:48.000000000', 'files': ['zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/b73222722624590c1fb4a5762abf501e475e513b', 'message': 'DNM: testing py2 job with older tempest fix\n\nDepends-On: https://review.opendev.org/#/c/729722/\nChange-Id: Ic5bb1281d0092c0c56ad6056f06c541a99d77cc3\n'}]",0,729723,b73222722624590c1fb4a5762abf501e475e513b,5,3,1,8556,,,0,"DNM: testing py2 job with older tempest fix

Depends-On: https://review.opendev.org/#/c/729722/
Change-Id: Ic5bb1281d0092c0c56ad6056f06c541a99d77cc3
",git fetch https://review.opendev.org/openstack/ironic refs/changes/23/729723/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,b73222722624590c1fb4a5762abf501e475e513b,, # Temporary disable voting because of end of cycle CI instability., # Temporary disable voting because of end of cycle CI instability.,1,1
openstack%2Fneutron~master~I38c2139fb0af7871caa2dc4d0645b7c35f5dd7ee,openstack/neutron,master,I38c2139fb0af7871caa2dc4d0645b7c35f5dd7ee,DNM: testing requirement missing fix,ABANDONED,2020-03-30 01:10:45.000000000,2021-08-04 16:28:33.000000000,,"[{'_account_id': 9732}, {'_account_id': 9845}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-03-30 01:10:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/4407dd6af91b6127e7d0892a1ee9614934c0e28a', 'message': 'DNM: testing requirement missing fix\n\nDepends-On: https://review.opendev.org/#/c/715745/\nChange-Id: I38c2139fb0af7871caa2dc4d0645b7c35f5dd7ee\n'}, {'number': 2, 'created': '2020-03-30 16:04:25.000000000', 'files': ['neutron/worker.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/5db7627dc91114dafb004bca33eec37f8b2ff551', 'message': 'DNM: testing requirement missing fix\n\nDepends-on: https://review.opendev.org/715835\nChange-Id: I38c2139fb0af7871caa2dc4d0645b7c35f5dd7ee\n'}]",0,715746,5db7627dc91114dafb004bca33eec37f8b2ff551,16,5,2,8556,,,0,"DNM: testing requirement missing fix

Depends-on: https://review.opendev.org/715835
Change-Id: I38c2139fb0af7871caa2dc4d0645b7c35f5dd7ee
",git fetch https://review.opendev.org/openstack/neutron refs/changes/46/715746/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/worker.py'],1,4407dd6af91b6127e7d0892a1ee9614934c0e28a,," """"""A worker that runs a function at a fixed interval."""""""," """"""A worker that runs a function at a fixed interval.""""""",1,1
openstack%2Fmistral~stable%2Ftrain~I48347fac036fcca4b8815d1ed7dad2b9125211cc,openstack/mistral,stable/train,I48347fac036fcca4b8815d1ed7dad2b9125211cc,DNM: testing mistral jobs keep running on py2,ABANDONED,2020-01-23 19:29:46.000000000,2021-08-04 16:28:28.000000000,,"[{'_account_id': 8556}, {'_account_id': 19134}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-01-23 19:29:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/0f433ebb27f81ff5263d35e24c48ed40918f3b93', 'message': 'DNM: testing mistral jobs keep running on py2\n\nDepends-On: https://review.opendev.org/#/c/704055/\nChange-Id: I48347fac036fcca4b8815d1ed7dad2b9125211cc\n'}, {'number': 2, 'created': '2020-01-28 07:49:55.000000000', 'files': ['mistral/version.py'], 'web_link': 'https://opendev.org/openstack/mistral/commit/df7575b2594b4e3eb06817bbc5abee44fe77b389', 'message': 'DNM: testing mistral jobs keep running on py2\n\nDepends-On: https://review.opendev.org/#/c/704055/\nDepends-On: https://review.opendev.org/#/c/704274/\nChange-Id: I48347fac036fcca4b8815d1ed7dad2b9125211cc\n'}]",0,704056,df7575b2594b4e3eb06817bbc5abee44fe77b389,8,3,2,8556,,,0,"DNM: testing mistral jobs keep running on py2

Depends-On: https://review.opendev.org/#/c/704055/
Depends-On: https://review.opendev.org/#/c/704274/
Change-Id: I48347fac036fcca4b8815d1ed7dad2b9125211cc
",git fetch https://review.opendev.org/openstack/mistral refs/changes/56/704056/2 && git format-patch -1 --stdout FETCH_HEAD,['mistral/version.py'],1,0f433ebb27f81ff5263d35e24c48ed40918f3b93,,,,1,0
openstack%2Fdevstack~master~I59e50766a156881067b52bce3f6c5baf604858af,openstack/devstack,master,I59e50766a156881067b52bce3f6c5baf604858af,DNM: testing tempest tag,ABANDONED,2020-01-29 22:19:50.000000000,2021-08-04 16:28:24.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-01-29 22:19:50.000000000', 'files': ['stackrc'], 'web_link': 'https://opendev.org/openstack/devstack/commit/f5d21b472d145d293b7b8bff8b1af2ff3140004d', 'message': 'DNM: testing tempest tag\n\nChange-Id: I59e50766a156881067b52bce3f6c5baf604858af\n'}]",0,704899,f5d21b472d145d293b7b8bff8b1af2ff3140004d,5,3,1,8556,,,0,"DNM: testing tempest tag

Change-Id: I59e50766a156881067b52bce3f6c5baf604858af
",git fetch https://review.opendev.org/openstack/devstack refs/changes/99/704899/1 && git format-patch -1 --stdout FETCH_HEAD,['stackrc'],1,f5d21b472d145d293b7b8bff8b1af2ff3140004d,testing-tag,TEMPEST_BRANCH=${TEMPEST_BRANCH:-23.0.0},TEMPEST_BRANCH=${TEMPEST_BRANCH:-$BRANCHLESS_TARGET_BRANCH},1,1
openstack%2Ftacker~master~Ia151c3df4807c7cf5ddb994ee0da4aad666af64f,openstack/tacker,master,Ia151c3df4807c7cf5ddb994ee0da4aad666af64f,DNM: testing,ABANDONED,2019-11-14 13:14:11.000000000,2021-08-04 16:28:20.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-11-14 13:14:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/517d7c30c15ef2134c8a6f63da2f7fdf01f88203', 'message': 'DNM: testing\n\nChange-Id: Ia151c3df4807c7cf5ddb994ee0da4aad666af64f\n'}, {'number': 2, 'created': '2019-11-14 17:31:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/6036135d43250c696d75b3fce9de4a7b497aa1da', 'message': 'DNM: testing\n\nDepends-On: https://review.opendev.org/#/c/693631/\n\nChange-Id: Ia151c3df4807c7cf5ddb994ee0da4aad666af64f\n'}, {'number': 3, 'created': '2019-11-15 00:13:05.000000000', 'files': ['requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/tacker/commit/ce12ada475ea307cbaba0094e35f3c9a02d985a5', 'message': 'DNM: testing\n\nDepends-On: https://review.opendev.org/#/c/693631/\n\nChange-Id: Ia151c3df4807c7cf5ddb994ee0da4aad666af64f\n'}]",0,694288,ce12ada475ea307cbaba0094e35f3c9a02d985a5,8,2,3,8556,,,0,"DNM: testing

Depends-On: https://review.opendev.org/#/c/693631/

Change-Id: Ia151c3df4807c7cf5ddb994ee0da4aad666af64f
",git fetch https://review.opendev.org/openstack/tacker refs/changes/88/694288/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,517d7c30c15ef2134c8a6f63da2f7fdf01f88203,,# E128 continuation line under-indented for visual indent,# E128 continuation line under-indented for visual indent,1,1
openstack%2Fdevstack~master~I1f370b5fee30bd789e7d88e69d325f1e77dbc387,openstack/devstack,master,I1f370b5fee30bd789e7d88e69d325f1e77dbc387,test stestr >2.5.0,ABANDONED,2019-09-11 10:03:11.000000000,2021-08-04 16:28:13.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-09-11 10:03:11.000000000', 'files': ['lib/tempest'], 'web_link': 'https://opendev.org/openstack/devstack/commit/e5995b20dbc63982a19587093b152b6aab6ccb1a', 'message': 'test stestr >2.5.0\n\nChange-Id: I1f370b5fee30bd789e7d88e69d325f1e77dbc387\n'}]",0,681428,e5995b20dbc63982a19587093b152b6aab6ccb1a,3,1,1,8556,,,0,"test stestr >2.5.0

Change-Id: I1f370b5fee30bd789e7d88e69d325f1e77dbc387
",git fetch https://review.opendev.org/openstack/devstack refs/changes/28/681428/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/tempest'],1,e5995b20dbc63982a19587093b152b6aab6ccb1a,, tox -evenv-tempest -- pip install -c $REQUIREMENTS_DIR/upper-constraints.txt -r requirements.txt, (cd $REQUIREMENTS_DIR && git show origin/master:upper-constraints.txt) > u-c-m.txt tox -evenv-tempest -- pip install -c u-c-m.txt -r requirements.txt,1,2
openstack%2Fzaqar~master~I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994,openstack/zaqar,master,I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994,WIP: zaqar IPv6 job,ABANDONED,2019-09-08 12:11:31.000000000,2021-08-04 16:28:09.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-09-08 12:11:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/129e784b8cef2db93d7fd7e193e5032e61a26986', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 2, 'created': '2019-09-08 13:13:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/3ba2152c29206d035f4175241a084bd2962ee08c', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 3, 'created': '2019-09-09 12:15:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/7bda695c9b83c4085a60eb63282a9c6387dc15c4', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 4, 'created': '2019-09-10 02:44:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/fca9b1b35aa6984c85096831afe1df7bb4a07bd9', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 5, 'created': '2019-09-10 12:08:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/53ab349cfbebd59d650c5f04fb43a206932efbba', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 6, 'created': '2019-09-10 15:59:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/0a9e781a8b0d24ce773fea714e7db6824500920d', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 7, 'created': '2019-09-10 16:59:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/de78035d8fe07fd45db7b192aefea6130851ece1', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 8, 'created': '2019-09-10 20:25:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/43cd5c2b70a09f5b0356a3d37a0db1f4bf98d402', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 9, 'created': '2019-09-11 01:41:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/2f3af60abc671ba59d08536aa6ff48c277388104', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 10, 'created': '2019-09-11 03:01:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/7d296c3ea92fd541862046581e07fee2e00bc8b0', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}, {'number': 11, 'created': '2019-09-11 04:06:22.000000000', 'files': ['playbooks/legacy/tempest-devstack-zaqar-base/pre-ipv6.yaml', '.zuul.yaml', 'playbooks/legacy/tempest-devstack-zaqar-base/post-ipv6.yaml'], 'web_link': 'https://opendev.org/openstack/zaqar/commit/bf2fc6c06ef79a495d9c61918acabef802b51a33', 'message': 'WIP: zaqar IPv6 job\n\nChange-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994\n'}]",0,680854,bf2fc6c06ef79a495d9c61918acabef802b51a33,25,2,11,8556,,,0,"WIP: zaqar IPv6 job

Change-Id: I06b3cf03a1aa7acb98c93a0ba6530b0d2444b994
",git fetch https://review.opendev.org/openstack/zaqar refs/changes/54/680854/8 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/tempest-devstack-zaqar-base/pre-ipv6.yaml', '.zuul.yaml', 'playbooks/legacy/tempest-devstack-zaqar-base/post-ipv6.yaml']",3,129e784b8cef2db93d7fd7e193e5032e61a26986,,- hosts: primary roles: - ipv6-only-deployments-verification ,,50,17
openstack%2Fcharm-guide~master~Ia180efa215f211f3f8f7eb09957db1cb7286b5d6,openstack/charm-guide,master,Ia180efa215f211f3f8f7eb09957db1cb7286b5d6,designate charm: new options for creating DNS records',MERGED,2021-07-13 21:57:55.000000000,2021-08-04 16:27:44.000000000,2021-08-04 16:26:17.000000000,"[{'_account_id': 2424}, {'_account_id': 22348}, {'_account_id': 30561}]","[{'number': 1, 'created': '2021-07-13 21:57:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/4b2f9b12c006da3453f305769d1aac43bb06cad7', 'message': ""designate charm: new options 'default-ttl' and 'default-soa-*'\n\nRelated-Bug: #1902923\nChange-Id: Ia180efa215f211f3f8f7eb09957db1cb7286b5d6\n""}, {'number': 2, 'created': '2021-08-02 20:47:30.000000000', 'files': ['doc/source/2110.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/ef21a5e8db055517a14cc42f0ceeef664ce160fc', 'message': ""designate charm: new options for creating DNS records'\n\nThis change documents the new charm configuration options:\n\n* default-ttl\n* default-soa-minimum\n* default-soa-refresh-min\n* default-soa-refresh-max\n* default-soa-retry\n\nRelated-Bug: #1902923\nChange-Id: Ia180efa215f211f3f8f7eb09957db1cb7286b5d6\n""}]",13,800729,ef21a5e8db055517a14cc42f0ceeef664ce160fc,13,3,2,2424,,,0,"designate charm: new options for creating DNS records'

This change documents the new charm configuration options:

* default-ttl
* default-soa-minimum
* default-soa-refresh-min
* default-soa-refresh-max
* default-soa-retry

Related-Bug: #1902923
Change-Id: Ia180efa215f211f3f8f7eb09957db1cb7286b5d6
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/29/800729/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/2110.rst'],1,4b2f9b12c006da3453f305769d1aac43bb06cad7,bug/1902923, * `designate charm: new options 'default-ttl' and 'default-soa-*'`_designate charm: new options 'default-ttl' and 'default-soa-*' -------------------------------------------------------------- The designate charm has new configuration options as: * default-ttl * default-soa-minimum * default-soa-refresh-min * default-soa-refresh-max * default-soa-retry Those options can be used for adjusting the default values that need to be used when creating new DNS records. These values will only affect newly created records and have no effect on already existing entries. ,,15,0
openstack%2Fglance~master~I105aa225f8fc146cb882bf788b001c790f6f24bc,openstack/glance,master,I105aa225f8fc146cb882bf788b001c790f6f24bc,Add glance v1 tempest job in experimental pipeline,ABANDONED,2018-08-06 08:45:09.000000000,2021-08-04 16:26:50.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2018-08-06 08:45:09.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/glance/commit/490d52cf0617030d7444e174ce1ea9e726cdb3dd', 'message': 'Add glance v1 tempest job in experimental pipeline\n\nGlance v1 APIs are deprecated and there is no gate job\nwhich run tempest tests for glance v1 APIs.\n\nAs we discussed on Rocky PTG[1] we need to test v1 till its code\nis available on tested branches. Tempest will keep testing all the\ndeprecated APIs till they are being removed completely from all\nstable supported branches.\n\nBelow Tempest patch provide a separate job to run v1 tests\nand run that job as voting on check pipeline.\n- https://review.openstack.org/#/c/589076/\n\nGlance does not need to run those as check or gate pipeline but at least\nshould run those as experimental so that v1 API can be checked on\nrequest basis.\n\nDepends-On: https://review.openstack.org/#/c/589076/\n\n[1] https://etherpad.openstack.org/p/qa-rocky-ptg-remove-deprecated-apis-tests\n\nChange-Id: I105aa225f8fc146cb882bf788b001c790f6f24bc\n'}]",0,589078,490d52cf0617030d7444e174ce1ea9e726cdb3dd,5,2,1,8556,,,0,"Add glance v1 tempest job in experimental pipeline

Glance v1 APIs are deprecated and there is no gate job
which run tempest tests for glance v1 APIs.

As we discussed on Rocky PTG[1] we need to test v1 till its code
is available on tested branches. Tempest will keep testing all the
deprecated APIs till they are being removed completely from all
stable supported branches.

Below Tempest patch provide a separate job to run v1 tests
and run that job as voting on check pipeline.
- https://review.openstack.org/#/c/589076/

Glance does not need to run those as check or gate pipeline but at least
should run those as experimental so that v1 API can be checked on
request basis.

Depends-On: https://review.openstack.org/#/c/589076/

[1] https://etherpad.openstack.org/p/qa-rocky-ptg-remove-deprecated-apis-tests

Change-Id: I105aa225f8fc146cb882bf788b001c790f6f24bc
",git fetch https://review.opendev.org/openstack/glance refs/changes/78/589078/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,490d52cf0617030d7444e174ce1ea9e726cdb3dd,test-glance-v1, - tempest-glance-v1-api,,1,0
openstack%2Fironic~stable%2Fwallaby~Iec99d09670238d2bebf5506802e08e1de4f4faa7,openstack/ironic,stable/wallaby,Iec99d09670238d2bebf5506802e08e1de4f4faa7,[DNM] Test lower-constraints should not run on stable branch,ABANDONED,2021-08-02 07:23:38.000000000,2021-08-04 16:01:40.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-02 07:23:38.000000000', 'files': ['zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/315c276dcb284338683c91f539874781f53dceea', 'message': '[DNM] Test lower-constraints should not run on stable branch\n\nChange-Id: Iec99d09670238d2bebf5506802e08e1de4f4faa7\n'}]",0,803142,315c276dcb284338683c91f539874781f53dceea,5,1,1,23851,,,0,"[DNM] Test lower-constraints should not run on stable branch

Change-Id: Iec99d09670238d2bebf5506802e08e1de4f4faa7
",git fetch https://review.opendev.org/openstack/ironic refs/changes/42/803142/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,315c276dcb284338683c91f539874781f53dceea,test-lcmasteronly, - openstack-lower-constraints-master-branch-jobs,,1,0
openstack%2Fproject-config~master~Iee2e37f47fee9ee1fb0016f87069d7cf90a30f5d,openstack/project-config,master,Iee2e37f47fee9ee1fb0016f87069d7cf90a30f5d,Reintroduce x/tap-as-a-service shared ACL,MERGED,2021-08-04 13:41:22.000000000,2021-08-04 15:57:32.000000000,2021-08-04 15:00:41.000000000,"[{'_account_id': 4146}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-04 13:41:22.000000000', 'files': ['gerrit/acls/x/tap-as-a-service.config'], 'web_link': 'https://opendev.org/openstack/project-config/commit/52c8cba54d7e7bc85f612b220935ad110212354a', 'message': 'Reintroduce x/tap-as-a-service shared ACL\n\nWhen x/tap-as-a-service was renamed to openstack/tap-as-a-service in\nIaa6fc7b0a9dca20ea77637a3890c603837ac7014 its ACL moved into the\nopenstack namespace along with it. However, because these move\nchanges are currently untestable, we did not spot that the ACL was\nalso shared by the x/tap-as-a-service-dashboard and\nx/tap-as-a-service-tempest-plugin projects which were not included\nin the rename work.\n\nFor now, add back the old x/tap-as-a-service Gerrit ACL as it\nappeared prior to the move, so that our consistency checks will stop\nfailing unrelated changes. Separately, we can discuss the fate of\nthese other two projects with their stakeholders, and see what can\nbe done to clean this up a bit.\n\nChange-Id: Iee2e37f47fee9ee1fb0016f87069d7cf90a30f5d\n'}]",0,803480,52c8cba54d7e7bc85f612b220935ad110212354a,8,2,1,5263,,,0,"Reintroduce x/tap-as-a-service shared ACL

When x/tap-as-a-service was renamed to openstack/tap-as-a-service in
Iaa6fc7b0a9dca20ea77637a3890c603837ac7014 its ACL moved into the
openstack namespace along with it. However, because these move
changes are currently untestable, we did not spot that the ACL was
also shared by the x/tap-as-a-service-dashboard and
x/tap-as-a-service-tempest-plugin projects which were not included
in the rename work.

For now, add back the old x/tap-as-a-service Gerrit ACL as it
appeared prior to the move, so that our consistency checks will stop
failing unrelated changes. Separately, we can discuss the fate of
these other two projects with their stakeholders, and see what can
be done to clean this up a bit.

Change-Id: Iee2e37f47fee9ee1fb0016f87069d7cf90a30f5d
",git fetch https://review.opendev.org/openstack/project-config refs/changes/80/803480/1 && git format-patch -1 --stdout FETCH_HEAD,['gerrit/acls/x/tap-as-a-service.config'],1,52c8cba54d7e7bc85f612b220935ad110212354a,,"[access ""refs/heads/*""] abandon = group tap-as-a-service-core create = group tap-as-a-service-release label-Code-Review = -2..+2 group tap-as-a-service-core label-Workflow = -1..+1 group tap-as-a-service-core [access ""refs/tags/*""] pushSignedTag = group tap-as-a-service-release [receive] requireChangeId = true requireContributorAgreement = true [submit] mergeContent = true ",,15,0
openstack%2Fnova~master~I332d4f33ea6b9506cc24ac12e5c0994f208a3107,openstack/nova,master,I332d4f33ea6b9506cc24ac12e5c0994f208a3107,Add functional test for bug 1937375,MERGED,2021-07-23 11:50:49.000000000,2021-08-04 15:16:45.000000000,2021-08-04 13:35:57.000000000,"[{'_account_id': 9708}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 29074}]","[{'number': 1, 'created': '2021-07-23 11:50:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/03b014d2e062c338f58e9efddbba4528bb02edb2', 'message': 'WIP: Add functional test for duplicate bdms\n\nChange-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107\n'}, {'number': 2, 'created': '2021-07-23 13:18:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7253136cd1072cc7e3939c4c8863f8e215beaf25', 'message': 'Add functional test for bug 1937375\n\nRelated-Bug: #1937375\nChange-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107\n'}, {'number': 3, 'created': '2021-07-27 20:59:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/10b0b4ae9415b7fe3880c9616688f7fadeb50f63', 'message': 'Add functional test for bug 1937375\n\nRelated-Bug: #1937375\nChange-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107\n'}, {'number': 4, 'created': '2021-08-04 11:37:53.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1937375.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/2ffd9738602531e93495a1feca76bbb687c3e72c', 'message': 'Add functional test for bug 1937375\n\nRelated-Bug: #1937375\nChange-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107\n'}]",10,802011,2ffd9738602531e93495a1feca76bbb687c3e72c,33,4,4,10135,,,0,"Add functional test for bug 1937375

Related-Bug: #1937375
Change-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107
",git fetch https://review.opendev.org/openstack/nova refs/changes/11/802011/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_duplicate_bdms.py'],1,03b014d2e062c338f58e9efddbba4528bb02edb2,bug/1937375,"# Copyright 2020, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import mock import time from nova import context from nova import objects from nova.tests.functional import integrated_helpers class TestDuplicateVolAttachRace(integrated_helpers._IntegratedTestBase): """"""Regression test for bug #??????. """""" microversion = 'latest' # TODO(lyarwood): Copied from test_bug_1675570.py, move both into # _IntegratedTestBase. def _wait_for_volume_attach(self, server_id, volume_id): timeout = 0.0 server = self.api.get_server(server_id) attached_vols = [vol['id'] for vol in server['os-extended-volumes:volumes_attached']] while volume_id not in attached_vols and timeout < 10.0: time.sleep(.1) timeout += .1 server = self.api.get_server(server_id) attached_vols = [vol['id'] for vol in server['os-extended-volumes:volumes_attached']] if volume_id not in attached_vols: self.fail('Timed out waiting for volume %s to be attached to ' 'server %s. Currently attached volumes: %s' % (volume_id, server_id, attached_vols)) def test_duplicate_volume_attach_race(self): ctxt = context.get_admin_context() volume_id = self.cinder.IMAGE_BACKED_VOL server_id = self._create_server(networks='none')['id'] original_reserve_name = self.compute.manager.reserve_block_device_name def wrap_reserve_block_device_name(*args, **kwargs): # We can't cause a race with duplicate API requests as functional # tests are single threaded and the first would always complete # before the second was serviced. Instead we can wrap # reserve_block_device_name on the compute manager and call it # twice to mimic two callers racing each other after the checks on # the api. original_reserve_name(*args, **kwargs) return original_reserve_name(*args, **kwargs) with mock.patch.object( self.compute.manager, 'reserve_block_device_name', wrap_reserve_block_device_name ): self.api.post_server_volume( server_id, {'volumeAttachment': {'volumeId': volume_id}} ) # Wait for a volume to be attached self._wait_for_volume_attach(server_id, volume_id) # Fetch all bdms for the instance to assert what we have bdms = objects.BlockDeviceMappingList.get_by_instance_uuid( ctxt, server_id) # FIXME(lyarwood): This is bug #, we now have 3 bdms for the instance, # the original root disk and two duplicate volume bdms for the same # volume attachment. self.assertEqual(3, len(bdms)) self.assertEqual(volume_id, bdms[2].volume_id) self.assertEqual(volume_id, bdms[1].volume_id) self.assertEqual('local', bdms[0].destination_type) ",,89,0
openstack%2Fironic~bugfix%2F18.1~I7f004d40c1b8c617f9a456216df091e44d69693f,openstack/ironic,bugfix/18.1,I7f004d40c1b8c617f9a456216df091e44d69693f,"Use shim-signed on Ubuntu, shim is empty now",MERGED,2021-08-04 10:59:47.000000000,2021-08-04 14:50:08.000000000,2021-08-04 14:48:03.000000000,"[{'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-08-04 10:59:47.000000000', 'files': ['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/260d5f13214269fb5abb8a51d06ea5d214387140', 'message': 'Use shim-signed on Ubuntu, shim is empty now\n\nAlso fix the documentation to use the correct paths and versions.\n\nChange-Id: I7f004d40c1b8c617f9a456216df091e44d69693f\n(cherry picked from commit 294046befae669dacd159d9f26bcdd3bc8ff26c9)\n'}]",0,803460,260d5f13214269fb5abb8a51d06ea5d214387140,9,2,1,10239,,,0,"Use shim-signed on Ubuntu, shim is empty now

Also fix the documentation to use the correct paths and versions.

Change-Id: I7f004d40c1b8c617f9a456216df091e44d69693f
(cherry picked from commit 294046befae669dacd159d9f26bcdd3bc8ff26c9)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/60/803460/1 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst']",3,260d5f13214269fb5abb8a51d06ea5d214387140,, Ubuntu (18.04LTS and later):: Ubuntu (18.04LTS and later):: sudo cp /usr/lib/shim/shimx64.efi.signed /tftpboot/bootx64.efi, Ubuntu (16.04LTS and later):: Ubuntu (16.04LTS and later):: sudo cp /usr/lib/shim/shim.efi.signed /tftpboot/bootx64.efi,10,6
openstack%2Fansible-role-collect-logs~master~I537b6e828c33872ae7e7765ffc1cce6201947527,openstack/ansible-role-collect-logs,master,I537b6e828c33872ae7e7765ffc1cce6201947527,DO NOT MERGE - just debug,NEW,2021-08-04 11:28:20.000000000,2021-08-04 14:25:25.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-04 11:28:20.000000000', 'files': ['roles/collect_logs/molecule/infrared/molecule.yml', 'testrun.sh', 'roles/collect_logs/molecule/default/molecule.yml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/ansible-role-collect-logs/commit/2cb0974595c0a4256697804492fbace140e9f674', 'message': 'DO NOT MERGE - just debug\n\nChange-Id: I537b6e828c33872ae7e7765ffc1cce6201947527\n'}]",0,803466,2cb0974595c0a4256697804492fbace140e9f674,3,2,1,6683,,,0,"DO NOT MERGE - just debug

Change-Id: I537b6e828c33872ae7e7765ffc1cce6201947527
",git fetch https://review.opendev.org/openstack/ansible-role-collect-logs refs/changes/66/803466/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/collect_logs/molecule/infrared/molecule.yml', 'testrun.sh', 'roles/collect_logs/molecule/default/molecule.yml', 'tox.ini']",4,2cb0974595c0a4256697804492fbace140e9f674,podman," molecule[test,docker,podman]>=3.3.2,<3.4 # MIT pytest-molecule>=1.4.0"," molecule[test,docker]>=3.2.2,<3.3 # MIT pytest-molecule>=1.3.4",21,4
openstack%2Fgrenade~master~I1eb352deca11916f4db1010a50d15a83e33a61bb,openstack/grenade,master,I1eb352deca11916f4db1010a50d15a83e33a61bb,Unblock Gate: create encryption type with right params,MERGED,2021-08-03 07:41:51.000000000,2021-08-04 13:55:25.000000000,2021-08-03 18:38:38.000000000,"[{'_account_id': 8556}, {'_account_id': 9303}, {'_account_id': 10135}, {'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-08-03 07:41:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/grenade/commit/882a1b4fce321521bb08bf9f1eb38327f7eeab33', 'message': 'Unblock Gate: create encryption type with right params\n\nRecently we added a check in cinder for cipher algorithm[1]\nCurrently grenade is not passing cipher when creating an\nencrypted type, hence gate is failing.\nThis patch addresses the same by passing the cipher and other\nproperties.\n\n[1] https://review.opendev.org/c/openstack/cinder/+/800268\n\nChange-Id: I1eb352deca11916f4db1010a50d15a83e33a61bb\n'}, {'number': 2, 'created': '2021-08-03 08:01:18.000000000', 'files': ['projects/70_cinder/resources.sh'], 'web_link': 'https://opendev.org/openstack/grenade/commit/d61a95325b3d052216aa13931c7a6d4a132a5843', 'message': 'Unblock Gate: create encryption type with right params\n\nRecently we added a check in cinder for cipher algorithm[1]\nCurrently grenade is not passing cipher when creating an\nencrypted type, hence grenade job is failing in glance and cinder gate.\nThis patch addresses the same by passing the cipher and other\nproperties.\n\n[1] https://review.opendev.org/c/openstack/cinder/+/800268\n\nCloses-Bug: #1938763\n\nChange-Id: I1eb352deca11916f4db1010a50d15a83e33a61bb\n'}]",2,803317,d61a95325b3d052216aa13931c7a6d4a132a5843,21,7,2,27615,,,0,"Unblock Gate: create encryption type with right params

Recently we added a check in cinder for cipher algorithm[1]
Currently grenade is not passing cipher when creating an
encrypted type, hence grenade job is failing in glance and cinder gate.
This patch addresses the same by passing the cipher and other
properties.

[1] https://review.opendev.org/c/openstack/cinder/+/800268

Closes-Bug: #1938763

Change-Id: I1eb352deca11916f4db1010a50d15a83e33a61bb
",git fetch https://review.opendev.org/openstack/grenade refs/changes/17/803317/2 && git format-patch -1 --stdout FETCH_HEAD,['projects/70_cinder/resources.sh'],1,882a1b4fce321521bb08bf9f1eb38327f7eeab33,, eval $(openstack volume type create \ --encryption-provider nova.volume.encryptors.luks.LuksEncryptor \ --encryption-cipher aes-xts-plain64 --encryption-key-size 256 \ $CINDER_VOL_ENCRYPTED_TYPE -f shell), eval $(openstack volume type create --encryption-provider luks $CINDER_VOL_ENCRYPTED_TYPE -f shell),4,1
openstack%2Fkolla~master~I27dfe34ade088228d71f6857ec4f3ab28ee63915,openstack/kolla,master,I27dfe34ade088228d71f6857ec4f3ab28ee63915,drop leftovers of RHEL support,MERGED,2021-04-09 07:37:26.000000000,2021-08-04 13:55:03.000000000,2021-08-04 13:53:41.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 27339}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-04-09 07:37:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/793f8d0b8c6092d1dce6b34522769fd360d14765', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 2, 'created': '2021-04-09 07:48:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/baa92385c56e37f4c9482361db36d66aea62980c', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 3, 'created': '2021-04-09 08:44:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/9bc6c4eebdf2451fa6e46aed2f8ff976a628f82e', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 4, 'created': '2021-04-09 09:16:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/71f57a08bac0d3d25b08daca6792196d69dc5a54', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 5, 'created': '2021-04-09 09:17:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/a5a4506f89640782e49c8b2067c7c91fed92f583', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 6, 'created': '2021-04-26 09:19:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/de5f53962cc77a6f32d4d83e2fb6a0b974a9b867', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 7, 'created': '2021-04-26 09:44:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/c52d180469a595fa0f2b3eeff6cc560859165a85', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 8, 'created': '2021-04-26 09:47:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/e698c8ba909ce5cdf2a1294bfd45799d724b1938', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 9, 'created': '2021-04-26 10:20:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/20916cf983f93f9f38b2732cd6209c07ef389597', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 10, 'created': '2021-04-27 14:13:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/6a8de5bab13985cfa488fcfdd03792c54533a141', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 11, 'created': '2021-05-08 09:00:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/2d4e431c43f63e170379792d630c613d3e5c486a', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 12, 'created': '2021-05-17 06:47:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/300aa8927f5ee7418848ce003a68ed87930bf11a', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 13, 'created': '2021-05-17 10:20:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/a13845a602b0db579fd01bd89357daeaaa482955', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 14, 'created': '2021-05-17 12:37:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/e76d91a97d2b5f5fa545e2c482efe3f6a9ffd029', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 15, 'created': '2021-06-15 10:30:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/d1e94ff5ecd65a5d1f29b9c541a61cce2f592fc3', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 16, 'created': '2021-06-28 09:04:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/cc591a834dfdef820d9555d6d3da7a909a9f4d8b', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 17, 'created': '2021-06-29 14:59:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/c25a03ca15acd063c69eb9a67b340e4e0be0955c', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 18, 'created': '2021-07-06 11:04:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/fb80b1433e44ffed1ba6f505328757f2f2bc87f2', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}, {'number': 19, 'created': '2021-07-28 16:04:21.000000000', 'files': ['docker/ovsdpdk/ovsdpdk/Dockerfile.j2', 'doc/source/support_matrix.rst', 'docker/magnum/magnum-base/Dockerfile.j2', 'doc/source/admin/image-building.rst', 'docker/macros.j2', 'kolla/template/repos.yaml', 'tests/files/process_build_logs.py', 'kolla/common/config.py', 'kolla/tests/test_methods.py', 'docker/ironic/ironic-pxe/extend_start.sh', 'kolla/image/build.py', 'releasenotes/notes/drop-rhel-support-03ccce1a69bd88a7.yaml', 'docker/magnum/magnum-api/Dockerfile.j2', 'docker/magnum/magnum-conductor/Dockerfile.j2', 'tools/validate-binary-build.sh', 'docker/base/Dockerfile.j2', 'docker/base/copy_cacerts.sh', 'doc/source/admin/kolla_api.rst', 'kolla/tests/test_build.py'], 'web_link': 'https://opendev.org/openstack/kolla/commit/bd90b02708d8c6b88692ec7308a41229fdcdaf22', 'message': 'drop leftovers of RHEL support\n\nAs a project we never built RHEL based images so support for them\nwas not tested.\n\nChange-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915\n'}]",8,785569,bd90b02708d8c6b88692ec7308a41229fdcdaf22,70,5,19,24072,,,0,"drop leftovers of RHEL support

As a project we never built RHEL based images so support for them
was not tested.

Change-Id: I27dfe34ade088228d71f6857ec4f3ab28ee63915
",git fetch https://review.opendev.org/openstack/kolla refs/changes/69/785569/16 && git format-patch -1 --stdout FETCH_HEAD,"['docker/ovsdpdk/ovsdpdk/Dockerfile.j2', 'docker/magnum/magnum-base/Dockerfile.j2', 'docker/macros.j2', 'kolla/template/repos.yaml', 'kolla/common/config.py', 'kolla/tests/test_methods.py', 'docker/ironic/ironic-pxe/extend_start.sh', 'kolla/image/build.py', 'releasenotes/notes/drop-rhel-support-03ccce1a69bd88a7.yaml', 'docker/magnum/magnum-api/Dockerfile.j2', 'docker/magnum/magnum-conductor/Dockerfile.j2', 'docker/base/Dockerfile.j2', 'kolla/tests/test_build.py']",13,793f8d0b8c6092d1dce6b34522769fd360d14765,," rh_base = ['centos'] rh_type = ['source', 'binary', 'rdo'] ['ubuntu', 'debian'], ['rdo']):"," rh_base = ['centos', 'rhel'] rh_type = ['source', 'binary', 'rdo', 'rhos'] ['ubuntu', 'debian'], ['rdo', 'rhos']): def test_build_distro_python_version_rhel80(self): """"""check distro_python_version for RHEL8.0"""""" self.conf.set_override('base', 'rhel') self.conf.set_override('base_tag', '8.0') kolla = build.KollaWorker(self.conf) self.assertEqual('3.6', kolla.distro_python_version) def test_build_distro_python_version_rhel8(self): """"""check distro_python_version for RHEL8"""""" self.conf.set_override('base', 'rhel') self.conf.set_override('base_tag', '8') kolla = build.KollaWorker(self.conf) self.assertEqual('3.6', kolla.distro_python_version) def test_build_distro_package_manager_rhel8(self): """"""check distro_package_manager dnf for rhel8"""""" self.conf.set_override('base', 'rhel') self.conf.set_override('base_tag', '8') kolla = build.KollaWorker(self.conf) self.assertEqual('dnf', kolla.distro_package_manager) def test_build_distro_package_manager_rhel8_minor(self): """"""check distro_package_manager dnf for rhel8"""""" self.conf.set_override('base', 'rhel') self.conf.set_override('base_tag', '8.1.2') kolla = build.KollaWorker(self.conf) self.assertEqual('dnf', kolla.distro_package_manager) def test_base_package_type_rhel(self): """"""check base_package_type rpm for rhel"""""" self.conf.set_override('base', 'rhel') kolla = build.KollaWorker(self.conf) self.assertEqual('rpm', kolla.base_package_type) ",19,111
openstack%2Fcharm-trilio-wlm~master~I4dcc5d285e705c15ffc72c4497c3154877c7a44f,openstack/charm-trilio-wlm,master,I4dcc5d285e705c15ffc72c4497c3154877c7a44f,Add post-upgrade-configuration action,MERGED,2021-08-03 13:26:34.000000000,2021-08-04 13:49:29.000000000,2021-08-04 13:49:29.000000000,"[{'_account_id': 935}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 13:26:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/87b9c62553d05c5e04b05bddeececc02fe1a58ce', 'message': 'Add post-upgrade-configuration action\n\nAdd post-upgrade-configuration action which can be run after a Trilio upgrade.\n\nTrilio sometimes updates packages in package repositiories that require DB\nmigrations or config file changes. Since these package updates are not applied by the\ncharm as they would be by changing the openstack-origin or triliovault-pkg-source\nthe charm has no event to react to to automatically perform the post package\nupgrade actions. This change adds an action `post-upgrade-configuration` which can\nbe run to apply the changes.\n\nfunc-test-pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/613\nChange-Id: I4dcc5d285e705c15ffc72c4497c3154877c7a44f\n'}, {'number': 2, 'created': '2021-08-04 08:26:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/4e07e7fc62c54c2d22e0c1d452a0901fe9e98675', 'message': 'Add post-upgrade-configuration action\n\nAdd post-upgrade-configuration action which can be run after a Trilio upgrade.\n\nTrilio sometimes updates packages in package repositiories that require DB\nmigrations or config file changes. Since these package updates are not applied by the\ncharm as they would be by changing the openstack-origin or triliovault-pkg-source\nthe charm has no event to react to to automatically perform the post package\nupgrade actions. This change adds an action `post-upgrade-configuration` which can\nbe run to apply the changes.\n\nfunc-test-pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/613\nChange-Id: I4dcc5d285e705c15ffc72c4497c3154877c7a44f\n'}, {'number': 3, 'created': '2021-08-04 08:45:31.000000000', 'files': ['.gitignore', 'src/actions/post-upgrade-configuration', 'src/actions.yaml', 'src/actions/actions.py'], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/5e45300331b51e7b217c323643a1e46295353be9', 'message': 'Add post-upgrade-configuration action\n\nAdd post-upgrade-configuration action which can be run after a Trilio\nupgrade.\n\nTrilio sometimes updates packages in package repositiories that\nrequire DB migrations or config file changes. Since these package\nupdates are not applied by the charm as they would be by changing the\nopenstack-origin or triliovault-pkg-source the charm has no event to\nreact to to automatically perform the post package upgrade actions.\nThis change adds an action `post-upgrade-configuration` which can\nbe run to apply the changes.\n\nfunc-test-pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/613\nChange-Id: I4dcc5d285e705c15ffc72c4497c3154877c7a44f\n'}]",1,803340,5e45300331b51e7b217c323643a1e46295353be9,13,3,3,12549,,,0,"Add post-upgrade-configuration action

Add post-upgrade-configuration action which can be run after a Trilio
upgrade.

Trilio sometimes updates packages in package repositiories that
require DB migrations or config file changes. Since these package
updates are not applied by the charm as they would be by changing the
openstack-origin or triliovault-pkg-source the charm has no event to
react to to automatically perform the post package upgrade actions.
This change adds an action `post-upgrade-configuration` which can
be run to apply the changes.

func-test-pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/613
Change-Id: I4dcc5d285e705c15ffc72c4497c3154877c7a44f
",git fetch https://review.opendev.org/openstack/charm-trilio-wlm refs/changes/40/803340/1 && git format-patch -1 --stdout FETCH_HEAD,"['src/actions/post-upgrade-configuration', 'src/actions.yaml', 'src/.config.yaml.swp', 'src/actions/actions.py']",4,87b9c62553d05c5e04b05bddeececc02fe1a58ce,post-upgrade-action,"def post_upgrade_configuration(*args): """"""Run setup after Trilio upgrade. """""" with charms_openstack.charm.provide_charm_instance() as trilio_wlm_charm: trilio_wlm_charm.render_all_configs() if hookenv.is_leader(): trilio_wlm_charm.do_trilio_upgrade_db_migration() trilio_wlm_charm._assess_status() ""post-upgrade-configuration"": post_upgrade_configuration,",,17,0
openstack%2Fneutron~master~I89f52929cec067bbe55b183f5dcdbc64a92805de,openstack/neutron,master,I89f52929cec067bbe55b183f5dcdbc64a92805de,Bump oslo.log to version 4.5.0,MERGED,2021-08-02 09:25:26.000000000,2021-08-04 13:37:39.000000000,2021-08-04 13:35:50.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 15554}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 09:25:26.000000000', 'files': ['requirements.txt', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/neutron/commit/2356f0eb874b01d4bab696e49e0286de51554f35', 'message': 'Bump oslo.log to version 4.5.0\n\nIn this version versionutils were updated for Xena release.\n\nRelated-bug: #1922237\nChange-Id: I89f52929cec067bbe55b183f5dcdbc64a92805de\n'}]",0,803160,2356f0eb874b01d4bab696e49e0286de51554f35,11,5,1,33652,,,0,"Bump oslo.log to version 4.5.0

In this version versionutils were updated for Xena release.

Related-bug: #1922237
Change-Id: I89f52929cec067bbe55b183f5dcdbc64a92805de
",git fetch https://review.opendev.org/openstack/neutron refs/changes/60/803160/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'lower-constraints.txt']",2,2356f0eb874b01d4bab696e49e0286de51554f35,bp/qos-minimum-guaranteed-packet-rate,oslo.log==4.5.0,oslo.log==4.3.0,2,2
openstack%2Fcharm-neutron-openvswitch~master~I65ace64e0a71f78fa857481fff0a874cc018d7d8,openstack/charm-neutron-openvswitch,master,I65ace64e0a71f78fa857481fff0a874cc018d7d8,Set NoopFirewallDriver when SGs disabled,MERGED,2021-07-18 16:02:27.000000000,2021-08-04 13:34:24.000000000,2021-08-04 13:34:24.000000000,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-18 16:02:27.000000000', 'files': ['templates/queens/openvswitch_agent.ini', 'templates/ussuri/openvswitch_agent.ini'], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/cc4cc00ca3d82350a0800c104e7c99a522569fbd', 'message': 'Set NoopFirewallDriver when SGs disabled\n\nLeaving firewall_driver unconfigured has expose an error\nwhen configuring vlan trunk ports while security groups\nare disabled. Setting it to NoopFirewallDriver allows it\nto work properly.\n\nChange-Id: I65ace64e0a71f78fa857481fff0a874cc018d7d8\nCloses-Bug: #1934904\n'}]",0,801191,cc4cc00ca3d82350a0800c104e7c99a522569fbd,14,4,1,6737,,,0,"Set NoopFirewallDriver when SGs disabled

Leaving firewall_driver unconfigured has expose an error
when configuring vlan trunk ports while security groups
are disabled. Setting it to NoopFirewallDriver allows it
to work properly.

Change-Id: I65ace64e0a71f78fa857481fff0a874cc018d7d8
Closes-Bug: #1934904
",git fetch https://review.opendev.org/openstack/charm-neutron-openvswitch refs/changes/91/801191/1 && git format-patch -1 --stdout FETCH_HEAD,"['templates/queens/openvswitch_agent.ini', 'templates/ussuri/openvswitch_agent.ini']",2,cc4cc00ca3d82350a0800c104e7c99a522569fbd,bug/1934904,firewall_driver = neutron.agent.firewall.NoopFirewallDriver,,2,0
openstack%2Fneutron~master~Icc88accb88d9cec40c960c56f032c3c27317b42e,openstack/neutron,master,Icc88accb88d9cec40c960c56f032c3c27317b42e,[QoS] Add rule type packet per second (pps),MERGED,2021-06-15 04:55:55.000000000,2021-08-04 13:31:48.000000000,2021-08-04 13:30:17.000000000,"[{'_account_id': 9531}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 33145}]","[{'number': 1, 'created': '2021-06-15 04:55:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/947c3d4400a2a81b7c87d46c4936eedec42d34ac', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 2, 'created': '2021-06-15 06:12:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/42279bf664f894ed05fdb80d4bea8f1af76dea8e', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nBump version of neutron-lib to 2.12.0.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 3, 'created': '2021-06-15 08:35:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/5c5608e5158ed3367168432995dedfcb1601177f', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 4, 'created': '2021-06-16 02:46:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6b463fb12cb50dc1b3c0c0685f23d6909e3062df', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 5, 'created': '2021-06-17 03:42:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f7f0e7afb56de76a9ed9399badfd2323853cb81f', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 6, 'created': '2021-06-22 01:43:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1d9f90852fd805f776d7631dfa4e82bdbb6caef0', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 7, 'created': '2021-06-27 15:41:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/bd70a35b6469a5987d2f30fa391de1dbe6367d97', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 8, 'created': '2021-06-30 02:07:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a9b702dcec4bc67237a140845cafdd6137ed8a11', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 9, 'created': '2021-06-30 11:07:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a5ea0ef09535ea985b430725c55c9c49be18cf67', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 10, 'created': '2021-07-01 01:01:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/96367ab047af6b5182b1a01c81a5e70da764689c', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 11, 'created': '2021-07-19 09:58:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e028c42dc0c0444b288b868d24b91e79622c0553', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 12, 'created': '2021-07-20 10:35:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3e7b04df755f3e623de73b4d5586a07e22d63c59', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 13, 'created': '2021-07-21 03:12:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/44fab5aeda54a24a652cdc13e82c6c39b7a3649b', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 14, 'created': '2021-07-21 09:07:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/4152ec8889de76b7e52f1b11490898c9bd132108', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}, {'number': 15, 'created': '2021-07-22 01:54:20.000000000', 'files': ['neutron/db/qos/models.py', 'neutron/services/qos/drivers/manager.py', 'neutron/extensions/qos_pps_rule.py', 'neutron/db/migration/alembic_migrations/versions/EXPAND_HEAD', 'neutron/tests/unit/objects/qos/test_policy.py', 'neutron/db/migration/alembic_migrations/versions/xena/expand/1bb3393de75d_add_qos_pps_rule.py', 'neutron/objects/qos/rule.py', 'neutron/objects/qos/policy.py', 'neutron/tests/unit/objects/test_objects.py', 'neutron/services/qos/qos_plugin.py', 'neutron/services/qos/constants.py', 'neutron/tests/unit/objects/qos/test_rule_type.py', 'neutron/extensions/qos.py', 'releasenotes/notes/qos_rule_type_pps-27254b90f26c10b6.yaml', 'neutron/objects/qos/rule_type.py', 'setup.cfg', 'neutron/tests/unit/objects/qos/test_rule.py', 'neutron/tests/unit/services/qos/test_qos_plugin.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/8e30639452312019de17f3e1e8364f579752944e', 'message': '[QoS] Add rule type packet per second (pps)\n\nThis patch adds new API extension to QoS service plugin\nto allow CURD actions for packet rate limit (packet per\nsecond) rule in Neutron server side.\n\nNOTE: This patch will NOT implement the real functionality\nin L2/L3 backend to limit the pps.\n\nCo-Authored-By:  NANALI <lin203@chinaunicom.cn>\n\nCloses-bug: #1912460\nChange-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e\n'}]",37,796363,8e30639452312019de17f3e1e8364f579752944e,123,6,15,9531,,,0,"[QoS] Add rule type packet per second (pps)

This patch adds new API extension to QoS service plugin
to allow CURD actions for packet rate limit (packet per
second) rule in Neutron server side.

NOTE: This patch will NOT implement the real functionality
in L2/L3 backend to limit the pps.

Co-Authored-By:  NANALI <lin203@chinaunicom.cn>

Closes-bug: #1912460
Change-Id: Icc88accb88d9cec40c960c56f032c3c27317b42e
",git fetch https://review.opendev.org/openstack/neutron refs/changes/63/796363/2 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/db/qos/models.py', 'neutron/services/qos/drivers/manager.py', 'neutron/extensions/qos_pps_rule.py', 'neutron/db/migration/alembic_migrations/versions/EXPAND_HEAD', 'neutron/db/migration/alembic_migrations/versions/xena/expand/1bb3393de75d_add_qos_pps_rule.py', 'neutron/objects/qos/rule.py', 'neutron/objects/qos/policy.py', 'neutron/tests/unit/objects/test_objects.py', 'neutron/services/qos/qos_plugin.py', 'neutron/services/qos/constants.py', 'neutron/tests/unit/objects/qos/test_rule_type.py', 'neutron/extensions/qos.py', 'neutron/objects/qos/rule_type.py', 'setup.cfg', 'neutron/tests/unit/objects/qos/test_rule.py', 'neutron/tests/unit/services/qos/test_qos_plugin.py']",16,947c3d4400a2a81b7c87d46c4936eedec42d34ac,packet_rate_limit,"from neutron.services.qos import constants as qos_constants 'min_kbps': 10}, 'packet_rate_limit_rule': { 'id': uuidutils.generate_uuid(), 'max_kpps': 20, 'max_burst_kpps': 130}} self.pps_rule = rule_object.QosPacketRateLimitRule( self.ctxt, **self.rule_data['packet_rate_limit_rule']) return_value=qos_constants.VALID_RULE_TYPES) self.assertEqual(sorted(qos_constants.VALID_RULE_TYPES), def test_create_policy_packet_rate_limit_rule(self): _policy = policy_object.QosPolicy( self.ctxt, **self.policy_data['policy']) with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=_policy): setattr(_policy, ""rules"", [self.pps_rule]) self.qos_plugin.create_policy_packet_rate_limit_rule( self.ctxt, self.policy.id, self.rule_data) self._validate_driver_params('update_policy', self.ctxt) def test_create_policy_pps_rule_duplicates(self): _policy = self._get_policy() setattr(_policy, ""rules"", [self.pps_rule]) new_rule_data = { 'packet_rate_limit_rule': { 'max_kpps': 400, 'direction': self.pps_rule.direction } } with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=_policy) as mock_qos_get_obj: self.assertRaises( qos_exc.QoSRulesConflict, self.qos_plugin.create_policy_packet_rate_limit_rule, self.ctxt, _policy.id, new_rule_data) mock_qos_get_obj.assert_called_once_with(self.ctxt, id=_policy.id) def test_update_policy_packet_rate_limit_rule(self): _policy = policy_object.QosPolicy( self.ctxt, **self.policy_data['policy']) with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=_policy): setattr(_policy, ""rules"", [self.pps_rule]) self.qos_plugin.update_policy_packet_rate_limit_rule( self.ctxt, self.pps_rule.id, self.policy.id, self.rule_data) self._validate_driver_params('update_policy', self.ctxt) def test_update_policy_pps_rule_bad_policy(self): _policy = policy_object.QosPolicy( self.ctxt, **self.policy_data['policy']) with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=_policy): setattr(_policy, ""rules"", []) self.assertRaises( qos_exc.QosRuleNotFound, self.qos_plugin.update_policy_packet_rate_limit_rule, self.ctxt, self.pps_rule.id, self.policy.id, self.rule_data) def test_delete_policy_packet_rate_limit_rule(self): _policy = policy_object.QosPolicy( self.ctxt, **self.policy_data['policy']) with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=_policy): setattr(_policy, ""rules"", [self.pps_rule]) self.qos_plugin.delete_policy_packet_rate_limit_rule( self.ctxt, self.pps_rule.id, self.policy.id) self._validate_driver_params('update_policy', self.ctxt) def test_delete_policy_pps_rule_bad_policy(self): _policy = policy_object.QosPolicy( self.ctxt, **self.policy_data['policy']) with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=_policy): setattr(_policy, ""rules"", []) self.assertRaises( qos_exc.QosRuleNotFound, self.qos_plugin.delete_policy_packet_rate_limit_rule, self.ctxt, self.pps_rule.id, _policy.id) def test_get_policy_packet_rate_limit_rule(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=self.policy): with mock.patch('neutron.objects.qos.rule.' 'QosPacketRateLimitRule.' 'get_object') as get_object_mock: self.qos_plugin.get_policy_packet_rate_limit_rule( self.ctxt, self.pps_rule.id, self.policy.id) get_object_mock.assert_called_once_with(self.ctxt, id=self.pps_rule.id) def test_get_policy_packet_rate_limit_rules_for_policy(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=self.policy): with mock.patch('neutron.objects.qos.rule.' 'QosPacketRateLimitRule.' 'get_objects') as get_objects_mock: self.qos_plugin.get_policy_packet_rate_limit_rules( self.ctxt, self.policy.id) get_objects_mock.assert_called_once_with( self.ctxt, _pager=mock.ANY, qos_policy_id=self.policy.id) def test_get_policy_packet_rate_limit_rules_for_policy_with_filters(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=self.policy): with mock.patch('neutron.objects.qos.rule.' 'QosPacketRateLimitRule.' 'get_objects') as get_objects_mock: filters = {'filter': 'filter_id'} self.qos_plugin.get_policy_packet_rate_limit_rules( self.ctxt, self.policy.id, filters=filters) get_objects_mock.assert_called_once_with( self.ctxt, _pager=mock.ANY, qos_policy_id=self.policy.id, filter='filter_id') def test_get_policy_packet_rate_limit_rule_for_nonexistent_policy(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=None): self.assertRaises( qos_exc.QosPolicyNotFound, self.qos_plugin.get_policy_packet_rate_limit_rule, self.ctxt, self.pps_rule.id, self.policy.id) def test_get_policy_packet_rate_limit_rules_for_nonexistent_policy(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=None): self.assertRaises( qos_exc.QosPolicyNotFound, self.qos_plugin.get_policy_packet_rate_limit_rules, self.ctxt, self.policy.id) def test_create_policy_pps_rule_for_nonexistent_policy(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=None): self.assertRaises( qos_exc.QosPolicyNotFound, self.qos_plugin.create_policy_packet_rate_limit_rule, self.ctxt, self.policy.id, self.rule_data) def test_update_policy_pps_rule_for_nonexistent_policy(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=None): self.assertRaises( qos_exc.QosPolicyNotFound, self.qos_plugin.update_policy_packet_rate_limit_rule, self.ctxt, self.pps_rule.id, self.policy.id, self.rule_data) def test_delete_policy_pps_rule_for_nonexistent_policy(self): with mock.patch('neutron.objects.qos.policy.QosPolicy.get_object', return_value=None): self.assertRaises( qos_exc.QosPolicyNotFound, self.qos_plugin.delete_policy_packet_rate_limit_rule, self.ctxt, self.pps_rule.id, self.policy.id) def test_get_pps_rule_type(self): admin_ctxt = context.get_admin_context() drivers_details = [{ 'name': 'fake-driver', 'supported_parameters': [{ 'parameter_name': 'max_kpps', 'parameter_type': lib_constants.VALUES_TYPE_RANGE, 'parameter_range': {'start': 0, 'end': 100} }] }] with mock.patch.object( qos_plugin.QoSPlugin, ""supported_rule_type_details"", return_value=drivers_details ): rule_type_details = self.qos_plugin.get_rule_type( admin_ctxt, qos_constants.RULE_TYPE_PACKET_RATE_LIMIT) self.assertEqual( qos_constants.RULE_TYPE_PACKET_RATE_LIMIT, rule_type_details['type']) self.assertEqual( drivers_details, rule_type_details['drivers']) def test_get_pps_rule_type_as_user(self): self.assertRaises( lib_exc.NotAuthorized, self.qos_plugin.get_rule_type, self.ctxt, qos_constants.RULE_TYPE_PACKET_RATE_LIMIT) "," 'min_kbps': 10}} return_value=qos_consts.VALID_RULE_TYPES) self.assertEqual(sorted(qos_consts.VALID_RULE_TYPES),",432,21
openstack%2Fkolla-ansible~master~Iec517226e4c82ea351889b55689a3efceaadcc76,openstack/kolla-ansible,master,Iec517226e4c82ea351889b55689a3efceaadcc76,Fix nova deployment failure when rabbitmq is disabled,MERGED,2021-07-07 15:42:18.000000000,2021-08-04 13:13:40.000000000,2021-08-04 13:12:14.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 19779}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-07 15:42:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7e95aab2f7ef38e72e476226dda1f6d089fe425b', 'message': 'Fix nova deploy failed when disable rabbimtq\n\nNova always try to create the rabbimtq user regardless of\nwhether RabbitMQ is enable or not.\nThis ps also adds a note for external rabbitmq user in global.yaml.\n\nChange-Id: Iec517226e4c82ea351889b55689a3efceaadcc76\n'}, {'number': 2, 'created': '2021-07-20 15:14:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3b3fc4ae4fcb413012883ad93973148a61d6e0cc', 'message': 'Fix nova deploy failed when disable rabbimtq\n\nNova always try to create the rabbimtq user regardless of\nwhether RabbitMQ is enable or not.\nThis ps also adds a note for external rabbitmq user in global.yaml.\n\nChange-Id: Iec517226e4c82ea351889b55689a3efceaadcc76\n'}, {'number': 3, 'created': '2021-07-21 12:23:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/274252aaabc1e895b72010d1db4ecff5813b8374', 'message': 'Fix nova deployment failure when rabbitmq is disabled\n\nNova always tries to create the rabbitmq user regardless of\nwhether RabbitMQ is enabled or not.\nThis ps also adds an external rabbitmq doc.\n\nChange-Id: Iec517226e4c82ea351889b55689a3efceaadcc76\n'}, {'number': 4, 'created': '2021-07-22 11:03:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c334fc3e0c87d6c4f45a754ea4efa4ecc990e0fe', 'message': 'Fix nova deployment failure when rabbitmq is disabled\n\nNova always tries to create the rabbitmq user regardless of\nwhether RabbitMQ is enabled or not.\nThis ps also adds an external rabbitmq doc.\n\nChange-Id: Iec517226e4c82ea351889b55689a3efceaadcc76\n'}, {'number': 5, 'created': '2021-07-27 14:07:23.000000000', 'files': ['ansible/roles/nova-cell/tasks/rabbitmq.yml', 'doc/source/reference/message-queues/index.rst', 'doc/source/reference/message-queues/external-rabbitmq-guide.rst'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/24d08142d2ecaf6e8baa40a1fe972b61e1731687', 'message': 'Fix nova deployment failure when rabbitmq is disabled\n\nNova always tries to create the rabbitmq user regardless of\nwhether RabbitMQ is enabled or not.\nThis ps also adds an external rabbitmq doc.\n\nChange-Id: Iec517226e4c82ea351889b55689a3efceaadcc76\n'}]",22,799857,24d08142d2ecaf6e8baa40a1fe972b61e1731687,29,5,5,26285,,,0,"Fix nova deployment failure when rabbitmq is disabled

Nova always tries to create the rabbitmq user regardless of
whether RabbitMQ is enabled or not.
This ps also adds an external rabbitmq doc.

Change-Id: Iec517226e4c82ea351889b55689a3efceaadcc76
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/57/799857/4 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/nova-cell/tasks/rabbitmq.yml', 'etc/kolla/globals.yml']",2,7e95aab2f7ef38e72e476226dda1f6d089fe425b,fix-external-rabbitmq,"# External Rabbit users should override these and set enable_rabbitmq to false #rpc_transport_url: #notify_transport_url: ""{{ rpc_transport_url }}"" #nova_cell_rpc_transport_url: ""{{ rpc_transport_url }}"" #nova_cell_notify_transport_url: ""{{ nova_cell_rpc_transport_url }}""",,8,1
openstack%2Ftripleo-repos~master~I01c4bd54621bd8084d989f71a1c7835de84f432a,openstack/tripleo-repos,master,I01c4bd54621bd8084d989f71a1c7835de84f432a,Fix pylint violations (sanity),MERGED,2021-07-30 12:54:19.000000000,2021-08-04 13:04:57.000000000,2021-08-04 13:04:57.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-07-30 12:54:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/7f827768588e4d909a758e15954fcb92af6e0198', 'message': 'Fix pylint violations (sanity)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I01c4bd54621bd8084d989f71a1c7835de84f432a\n'}, {'number': 2, 'created': '2021-07-30 13:15:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/473d92588b51c5a104164faa9ad60c24693b3bc1', 'message': 'Fix pylint violations (sanity)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I01c4bd54621bd8084d989f71a1c7835de84f432a\n'}, {'number': 3, 'created': '2021-08-04 08:08:30.000000000', 'files': ['galaxy.yml', 'plugins/modules/yum_config.py', 'plugins/module_utils/tripleo_repos/get_hash/tripleo_hash_info.py', 'plugins/module_utils/tripleo_repos/yum_config/yum_config.py', 'tests/sanity/ignore-2.9.txt', 'plugins/module_utils/tripleo_repos/yum_config/dnf_manager.py', 'plugins/module_utils/tripleo_repos/main.py', 'plugins/module_utils/tripleo_repos/get_hash/__main__.py'], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/854ca64d47617666e15e32b71863d90025d61754', 'message': 'Fix pylint violations (sanity)\n\nStory: TRIPLEOCI-559\nChange-Id: I01c4bd54621bd8084d989f71a1c7835de84f432a\n'}]",5,803008,854ca64d47617666e15e32b71863d90025d61754,15,5,3,24162,,,0,"Fix pylint violations (sanity)

Story: TRIPLEOCI-559
Change-Id: I01c4bd54621bd8084d989f71a1c7835de84f432a
",git fetch https://review.opendev.org/openstack/tripleo-repos refs/changes/08/803008/2 && git format-patch -1 --stdout FETCH_HEAD,"['galaxy.yml', 'plugins/modules/yum_config.py', 'plugins/module_utils/tripleo_repos/get_hash/tripleo_hash_info.py', 'plugins/module_utils/tripleo_repos/yum_config/yum_config.py', 'tests/sanity/ignore-2.9.txt', 'plugins/module_utils/tripleo_repos/yum_config/dnf_manager.py', 'plugins/module_utils/tripleo_repos/main.py', 'plugins/module_utils/tripleo_repos/get_hash/__main__.py']",8,7f827768588e4d909a758e15954fcb92af6e0198,tripleo.repos, print(tripleo_hash_info), tripleo_hash_info.pretty_print(),39,47
openstack%2Fcharm-hacluster~stable%2F21.04~I48aea64a1154e68d91e2dd5f6d05085b6ba9f38a,openstack/charm-hacluster,stable/21.04,I48aea64a1154e68d91e2dd5f6d05085b6ba9f38a,c-h sync - restore proxy env vars for add-apt-repository,MERGED,2021-07-02 17:03:32.000000000,2021-08-04 13:03:51.000000000,2021-08-04 13:03:51.000000000,"[{'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-02 17:03:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/df01885446fca8a97be887f964b7ebab97005e3b', 'message': 'c-h sync - restore proxy env vars for add-apt-repository\n\nChange-Id: I48aea64a1154e68d91e2dd5f6d05085b6ba9f38a\n'}, {'number': 2, 'created': '2021-07-05 11:56:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/509fbe71ce15352c4c4a036cbd7a47ec7f49f6e6', 'message': 'c-h sync - restore proxy env vars for add-apt-repository\n\nChange-Id: I48aea64a1154e68d91e2dd5f6d05085b6ba9f38a\nCo-authored-by: Aurelien Lourot <aurelien.lourot@canonical.com>\n'}, {'number': 3, 'created': '2021-08-03 12:56:45.000000000', 'files': ['charmhelpers/contrib/openstack/deferred_events.py', 'charmhelpers/contrib/openstack/utils.py', 'osci.yaml', 'charmhelpers/fetch/ubuntu.py'], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/ac5a0a5283908b75e85108b45d5daf9f73b183f3', 'message': 'c-h sync - restore proxy env vars for add-apt-repository\n\nChange-Id: I48aea64a1154e68d91e2dd5f6d05085b6ba9f38a\nCo-authored-by: Aurelien Lourot <aurelien.lourot@canonical.com>\n'}]",0,799261,ac5a0a5283908b75e85108b45d5daf9f73b183f3,23,4,3,11805,,,0,"c-h sync - restore proxy env vars for add-apt-repository

Change-Id: I48aea64a1154e68d91e2dd5f6d05085b6ba9f38a
Co-authored-by: Aurelien Lourot <aurelien.lourot@canonical.com>
",git fetch https://review.opendev.org/openstack/charm-hacluster refs/changes/61/799261/1 && git format-patch -1 --stdout FETCH_HEAD,"['charmhelpers/contrib/openstack/deferred_events.py', 'charmhelpers/contrib/openstack/utils.py', 'charmhelpers/fetch/ubuntu.py']",3,df01885446fca8a97be887f964b7ebab97005e3b,batch-update," if '{series}' in spec: series = get_distrib_codename() _run_with_retries(['add-apt-repository', '--yes', spec], cmd_env=env_proxy_settings(['https', 'http']))"," series = get_distrib_codename() if '{series}' in spec: # software-properties package for bionic properly reacts to proxy settings # set via apt.conf (see lp:1433761), however this is not the case for LTS # and non-LTS releases before bionic. if series in ('trusty', 'xenial'): _run_with_retries(['add-apt-repository', '--yes', spec], cmd_env=env_proxy_settings(['https', 'http'])) else: _run_with_retries(['add-apt-repository', '--yes', spec])",18,13
openstack%2Fkolla-ansible~master~I43bc11183c2fa9773811a74a93c37cecceed7454,openstack/kolla-ansible,master,I43bc11183c2fa9773811a74a93c37cecceed7454,Fix deployment failure when kolla_dev_mod is enabled,MERGED,2021-07-21 13:47:55.000000000,2021-08-04 13:02:25.000000000,2021-08-04 13:00:58.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}, {'_account_id': 31506}]","[{'number': 1, 'created': '2021-07-21 13:47:55.000000000', 'files': ['ansible/roles/masakari/tasks/clone.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/200e36da7dd322013dd67b21fec0eed8d2cc84d6', 'message': 'Fix deployment failure when kolla_dev_mod is enabled\n\ntrivial fix\n\nChange-Id: I43bc11183c2fa9773811a74a93c37cecceed7454\n'}]",0,801625,200e36da7dd322013dd67b21fec0eed8d2cc84d6,11,5,1,26285,,,0,"Fix deployment failure when kolla_dev_mod is enabled

trivial fix

Change-Id: I43bc11183c2fa9773811a74a93c37cecceed7454
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/25/801625/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/masakari/tasks/clone.yml'],1,200e36da7dd322013dd67b21fec0eed8d2cc84d6,,"- name: Cloning masakari monitors source repository for development repo: ""{{ masakari_monitors_git_repository }}"" update: ""{{ masakari_monitors_dev_repos_pull }}"" version: ""{{ masakari_monitors_source_version }}""","- name: Cloning masakarimonitors source repository for development repo: ""{{ masakarimonitors_git_repository }}"" update: ""{{ masakarimonitors_dev_repos_pull }}"" version: ""{{ masakarimonitors_source_version }}""",4,4
openstack%2Fnova~master~I29f5c39abc635f7cc1b250cfa6ee14d2629ba45c,openstack/nova,master,I29f5c39abc635f7cc1b250cfa6ee14d2629ba45c,Synchronize network-vif-deleted event processing,NEW,2021-07-06 08:29:58.000000000,2021-08-04 12:56:14.000000000,,"[{'_account_id': 22348}, {'_account_id': 28332}]","[{'number': 1, 'created': '2021-07-06 08:29:58.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/bbcb30c50dde58c54df1b889d473741e59c9636b', 'message': ""Synchronize network-vif-deleted event processing\n\nWhen an attached port is deleted, nova receives an event\n'network-vif-deleted' and processes it by updating network_info\ncache and running driver.detach_interface.\n\nThe issue is that it may race with an ongoing interface attach\nor detach run by manager, and lead to interface leak as\ndepicted in related Bug.\n\nCurrently, compute manager detach_interface/attach_interface\nrun synchronized, this change proposes to also constraint\n_process_instance_vif_deleted_event method with the same lock.\n\nCloses-Bug: #1934742\nChange-Id: I29f5c39abc635f7cc1b250cfa6ee14d2629ba45c\n""}]",1,799606,bbcb30c50dde58c54df1b889d473741e59c9636b,8,2,1,28332,,,0,"Synchronize network-vif-deleted event processing

When an attached port is deleted, nova receives an event
'network-vif-deleted' and processes it by updating network_info
cache and running driver.detach_interface.

The issue is that it may race with an ongoing interface attach
or detach run by manager, and lead to interface leak as
depicted in related Bug.

Currently, compute manager detach_interface/attach_interface
run synchronized, this change proposes to also constraint
_process_instance_vif_deleted_event method with the same lock.

Closes-Bug: #1934742
Change-Id: I29f5c39abc635f7cc1b250cfa6ee14d2629ba45c
",git fetch https://review.opendev.org/openstack/nova refs/changes/06/799606/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/compute/manager.py']",2,bbcb30c50dde58c54df1b889d473741e59c9636b,bug/1934742," lockname = 'interface-%s-%s' % (instance.uuid, deleted_vif_id) @utils.synchronized(lockname) def do_process_instance_vif_deleted_event( context, instance, deleted_vif_id): return self._do_process_instance_vif_deleted_event( context, instance, deleted_vif_id) return do_process_instance_vif_deleted_event( context, instance, deleted_vif_id) def _do_process_instance_vif_deleted_event(self, context, instance, deleted_vif_id):",,21,1
openstack%2Ftripleo-ci~master~I1fd588f02195dc09620f4950029faacb98b85eed,openstack/tripleo-ci,master,I1fd588f02195dc09620f4950029faacb98b85eed,Install tripleo-operator-ansible from git for baremetal,MERGED,2021-08-03 13:18:20.000000000,2021-08-04 12:47:31.000000000,2021-08-04 12:47:31.000000000,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-03 13:18:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/1387a3a8d0e1974438709e741b9d611a34b00c21', 'message': 'Install tripleo-operator-ansible from git for baremetal\n\nIn baremetal deployment, quickstart execution is done from\nzuul node and quickstart depends on tripleo-operator-ansible.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nalready removed the git installation of tripleo-operator-ansible\nand we cannot install it via rpm so the failure is legit.\n\nIn order to fix that, we need to install tripleo-operator-ansible\nfrom git on zuul node.\n\nRelated-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I1fd588f02195dc09620f4950029faacb98b85eed\n'}, {'number': 2, 'created': '2021-08-03 13:38:41.000000000', 'files': ['roles/run-test/templates/toci_quickstart.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/9efd855e786ddc906085a3b23a4fb6054e66f7e5', 'message': 'Install tripleo-operator-ansible from git for baremetal\n\nIn baremetal deployment, quickstart execution is done from\nzuul node and quickstart depends on tripleo-operator-ansible.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nalready removed the git installation of tripleo-operator-ansible\nand we cannot install it via rpm so the failure is legit.\n\nIn order to fix that, we need to install tripleo-operator-ansible\nfrom git on zuul node.\n\nRelated-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I1fd588f02195dc09620f4950029faacb98b85eed\n'}]",0,803336,9efd855e786ddc906085a3b23a4fb6054e66f7e5,14,6,2,12393,,,0,"Install tripleo-operator-ansible from git for baremetal

In baremetal deployment, quickstart execution is done from
zuul node and quickstart depends on tripleo-operator-ansible.

Since https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701
already removed the git installation of tripleo-operator-ansible
and we cannot install it via rpm so the failure is legit.

In order to fix that, we need to install tripleo-operator-ansible
from git on zuul node.

Related-Bug: #1938638

Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: I1fd588f02195dc09620f4950029faacb98b85eed
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/36/803336/2 && git format-patch -1 --stdout FETCH_HEAD,['roles/run-test/templates/toci_quickstart.sh.j2'],1,1387a3a8d0e1974438709e741b9d611a34b00c21,remove_uneeded_tq_requirements,{% if environment_type == 'baremetal' -%} # It needs to be installed on zuul node to drive deployment --url-requirements git+https://opendev.org/openstack/tripleo-operator-ansible/#egg=tripleo-operator-ansible {% endif %},,4,0
openstack%2Fkolla-ansible~master~Ifefb9c74ee6a80cdbc458992d0196850ddfe7ffa,openstack/kolla-ansible,master,Ifefb9c74ee6a80cdbc458992d0196850ddfe7ffa,Do not run timesync checks on deployment host,MERGED,2021-06-23 13:32:58.000000000,2021-08-04 12:42:19.000000000,2021-08-04 12:40:38.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 27339}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-06-23 13:32:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/bec93a00e31d6fe982ee592b89885200c0f31bcb', 'message': 'Do not try to get container facts on localhost\n\nKolla-ansible install python docker library in role/baremetal\nto group/baremetal, because of this get container facts\nis failing on localhost.\n\nThis patch is limiting container_facts to baremetal group\nonly.\n\nCloses-Bug: #1933347\nChange-Id: Ifefb9c74ee6a80cdbc458992d0196850ddfe7ffa\n'}, {'number': 2, 'created': '2021-06-23 13:47:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7e4894e568a4d4fe3680aa8115d3aef1b829dd13', 'message': 'Do not try to get container facts on deployment host\n\nKolla-ansible install python docker library in role/baremetal\nto group/baremetal, because of this get container facts\nis failing on deployment host.\n\nThis patch adding when conditional, so deployment host\nwill be skipped.\n\nCloses-Bug: #1933347\nChange-Id: Ifefb9c74ee6a80cdbc458992d0196850ddfe7ffa\n'}, {'number': 3, 'created': '2021-06-24 07:24:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3ac88f181e45169a93cceee9fb920a6b13cf066d', 'message': 'Do not run timesync checks on deployment host\n\nKolla-ansible install python docker library in role/baremetal\nto group/baremetal, because of this get container facts\nfor timesync checks is failing on deployment host.\n\nThis patch adding when conditional, so deployment host\nwill be skipped as there is no need to run timesync\nchecks.\n\nCloses-Bug: #1933347\nChange-Id: Ifefb9c74ee6a80cdbc458992d0196850ddfe7ffa\n'}, {'number': 4, 'created': '2021-08-02 08:04:58.000000000', 'files': ['ansible/roles/prechecks/tasks/main.yml', 'releasenotes/notes/bug-1933347-4031d94ef7decb3c.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/281c9935da076eb7a744136e3738084468692278', 'message': 'Do not run timesync checks on deployment host\n\nKolla-ansible install python docker library in role/baremetal\nto group/baremetal, because of this get container facts\nfor timesync checks is failing on deployment host.\n\nThis patch adding when conditional, so deployment host\nwill be skipped as there is no need to run timesync\nchecks.\n\nCloses-Bug: #1933347\nChange-Id: Ifefb9c74ee6a80cdbc458992d0196850ddfe7ffa\n'}]",1,797646,281c9935da076eb7a744136e3738084468692278,25,4,4,27339,,,0,"Do not run timesync checks on deployment host

Kolla-ansible install python docker library in role/baremetal
to group/baremetal, because of this get container facts
for timesync checks is failing on deployment host.

This patch adding when conditional, so deployment host
will be skipped as there is no need to run timesync
checks.

Closes-Bug: #1933347
Change-Id: Ifefb9c74ee6a80cdbc458992d0196850ddfe7ffa
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/46/797646/4 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/prechecks/tasks/main.yml'],1,bec93a00e31d6fe982ee592b89885200c0f31bcb,bug/1933347, - inventory_hostname in groups['baremetal'],,1,0
openstack%2Fkolla-ansible~stable%2Fwallaby~Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323,openstack/kolla-ansible,stable/wallaby,Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323,Trivial fix horizon's healthcheck when SSL turned on,MERGED,2021-08-03 11:04:33.000000000,2021-08-04 12:42:15.000000000,2021-08-04 12:40:35.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 26285}]","[{'number': 1, 'created': '2021-08-03 11:04:33.000000000', 'files': ['ansible/roles/horizon/templates/horizon.conf.j2', 'releasenotes/notes/bug-1933846-122a62e9724b638c.yaml', 'ansible/group_vars/all.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6eb1bfa2a83c4bebbbf27dc83f21014a2a55476d', 'message': ""Trivial fix horizon's healthcheck when SSL turned on\n\nThis patch is fixing docker healthcheck for horizon\nby changing value of horizon_listen_port, so\nboth apache's virtualhost and healthcheck will have\nsame correct port always. Also removing useless\napache's redirect as all redirects are done on\nhaproxy side.\n\nCloses-Bug: #1933846\nChange-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323\n""}]",0,803282,6eb1bfa2a83c4bebbbf27dc83f21014a2a55476d,9,3,1,27339,,,0,"Trivial fix horizon's healthcheck when SSL turned on

This patch is fixing docker healthcheck for horizon
by changing value of horizon_listen_port, so
both apache's virtualhost and healthcheck will have
same correct port always. Also removing useless
apache's redirect as all redirects are done on
haproxy side.

Closes-Bug: #1933846
Change-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/82/803282/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/horizon/templates/horizon.conf.j2', 'releasenotes/notes/bug-1933846-122a62e9724b638c.yaml', 'ansible/group_vars/all.yml']",3,6eb1bfa2a83c4bebbbf27dc83f21014a2a55476d,bug/1933846-stable/wallaby,"horizon_listen_port: ""{{ horizon_tls_port if horizon_enable_tls_backend | bool else horizon_port }}""","horizon_listen_port: ""{{ horizon_port }}""",7,7
openstack%2Fkolla-ansible~stable%2Fvictoria~Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323,openstack/kolla-ansible,stable/victoria,Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323,Trivial fix horizon's healthcheck when SSL turned on,MERGED,2021-08-03 15:57:19.000000000,2021-08-04 12:42:09.000000000,2021-08-04 12:40:31.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 27339}]","[{'number': 1, 'created': '2021-08-03 15:57:19.000000000', 'files': ['ansible/roles/horizon/templates/horizon.conf.j2', 'releasenotes/notes/bug-1933846-122a62e9724b638c.yaml', 'ansible/group_vars/all.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f06d6e3eddcd6fb5d5dfddc894262c3c2c0a3c33', 'message': ""Trivial fix horizon's healthcheck when SSL turned on\n\nThis patch is fixing docker healthcheck for horizon\nby changing value of horizon_listen_port, so\nboth apache's virtualhost and healthcheck will have\nsame correct port always. Also removing useless\napache's redirect as all redirects are done on\nhaproxy side.\n\nCloses-Bug: #1933846\nChange-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323\n(cherry picked from commit 6ac4638cfb83ee4a28b316fc646db9a594d5cc1d)\n""}]",0,803286,f06d6e3eddcd6fb5d5dfddc894262c3c2c0a3c33,9,4,1,14826,,,0,"Trivial fix horizon's healthcheck when SSL turned on

This patch is fixing docker healthcheck for horizon
by changing value of horizon_listen_port, so
both apache's virtualhost and healthcheck will have
same correct port always. Also removing useless
apache's redirect as all redirects are done on
haproxy side.

Closes-Bug: #1933846
Change-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323
(cherry picked from commit 6ac4638cfb83ee4a28b316fc646db9a594d5cc1d)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/86/803286/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/horizon/templates/horizon.conf.j2', 'releasenotes/notes/bug-1933846-122a62e9724b638c.yaml', 'ansible/group_vars/all.yml']",3,f06d6e3eddcd6fb5d5dfddc894262c3c2c0a3c33,bug/1933846-stable/victoria,"horizon_listen_port: ""{{ horizon_tls_port if horizon_enable_tls_backend | bool else horizon_port }}""","horizon_listen_port: ""{{ horizon_port }}""",7,7
openstack%2Fneutron-tempest-plugin~master~I0313ac13f8e8922849f6388d2d1379817230294b,openstack/neutron-tempest-plugin,master,I0313ac13f8e8922849f6388d2d1379817230294b,Add test for mac learning,MERGED,2021-06-14 11:33:01.000000000,2021-08-04 12:24:08.000000000,2021-08-04 12:24:08.000000000,"[{'_account_id': 6773}, {'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 32586}]","[{'number': 1, 'created': '2021-06-14 11:33:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/97a76ecdd6c4bac8cb2eb919d491dce40490a2c8', 'message': '[WIP] Add test for mac learning\n\nThis scenario test checks that, even with no DHCP and no port security,\npackets are not flooded to every port on the network. This is only\nachieved if OVN uses its mac learning capabilities as intended. More\ninformation on the mac learning capability available here[0].\n\n[0] https://review.opendev.org/c/openstack/neutron/+/763567\n\nChange-Id: I0313ac13f8e8922849f6388d2d1379817230294b\n'}, {'number': 2, 'created': '2021-06-21 10:42:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/2e830de968eedf05471b20cabc19cb70037e60b9', 'message': 'Add test for mac learning\n\nThis scenario test checks that, even with no DHCP and no port security,\npackets are not flooded to every port on the network. This is only\nachieved if OVN uses its mac learning capabilities as intended. More\ninformation on the mac learning capability available here[0].\n\n[0] https://review.opendev.org/c/openstack/neutron/+/763567\n\nChange-Id: I0313ac13f8e8922849f6388d2d1379817230294b\n'}, {'number': 3, 'created': '2021-06-30 15:38:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/b2e29737788de76cf1a084300615ab9d83d45ff7', 'message': 'Add test for mac learning\n\nThis scenario test checks that, even with no DHCP and no port security,\npackets are not flooded to every port on the network. This is only\nachieved if neutron uses its mac learning capabilities as intended.\nMore information on the mac learning capability available here[0].\n\n[0] https://review.opendev.org/c/openstack/neutron/+/763567\n\nChange-Id: I0313ac13f8e8922849f6388d2d1379817230294b\n'}, {'number': 4, 'created': '2021-06-30 15:40:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/3e4c3d9fc0cc1a762ef3fc5b476f0ff2789b7690', 'message': 'Add test for mac learning\n\nThis scenario test checks that, even with no DHCP and no port security,\npackets are not flooded to every port on the network. This is only\nachieved if neutron uses its mac learning capabilities as intended.\nMore information on the mac learning capability available here[0].\n\n[0] https://review.opendev.org/c/openstack/neutron/+/763567\n\nChange-Id: I0313ac13f8e8922849f6388d2d1379817230294b\n'}, {'number': 5, 'created': '2021-07-06 19:04:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/238f8135eaaf57ada34331b32ed8b8a50dafb5ec', 'message': 'Add test for mac learning\n\nThis scenario test checks that, even with no DHCP and no port security,\npackets are not flooded to every port on the network.\n\nTo see this work in OVN, port security and DHCP must be disabled on a\nnetwork. Before having those capabilities, packets would be flooded\nto all servers. Now, the OVN switch can learn the MAC of a port and\nstore it on the FDB table. The adoption of this feature was completed\nin [0].\n\n[0] https://review.opendev.org/c/openstack/neutron/+/763567\n\nChange-Id: I0313ac13f8e8922849f6388d2d1379817230294b\n'}, {'number': 6, 'created': '2021-07-26 10:22:45.000000000', 'files': ['neutron_tempest_plugin/scenario/test_mac_learning.py'], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/585ade8235d065d2cd2812a6d5d3df5f3cf10420', 'message': 'Add test for mac learning\n\nThis scenario test checks that, even with no DHCP and no port security,\npackets are not flooded to every port on the network.\n\nTo see this work in OVN, port security and DHCP must be disabled on a\nnetwork. Before having those capabilities, packets would be flooded\nto all servers. Now, the OVN switch can learn the MAC of a port and\nstore it on the FDB table. The adoption of this feature was completed\nin [0].\n\n[0] https://review.opendev.org/c/openstack/neutron/+/763567\n\nChange-Id: I0313ac13f8e8922849f6388d2d1379817230294b\n'}]",44,796267,585ade8235d065d2cd2812a6d5d3df5f3cf10420,48,5,6,32586,,,0,"Add test for mac learning

This scenario test checks that, even with no DHCP and no port security,
packets are not flooded to every port on the network.

To see this work in OVN, port security and DHCP must be disabled on a
network. Before having those capabilities, packets would be flooded
to all servers. Now, the OVN switch can learn the MAC of a port and
store it on the FDB table. The adoption of this feature was completed
in [0].

[0] https://review.opendev.org/c/openstack/neutron/+/763567

Change-Id: I0313ac13f8e8922849f6388d2d1379817230294b
",git fetch https://review.opendev.org/openstack/neutron-tempest-plugin refs/changes/67/796267/3 && git format-patch -1 --stdout FETCH_HEAD,['neutron_tempest_plugin/scenario/test_mac_learning.py'],1,97a76ecdd6c4bac8cb2eb919d491dce40490a2c8,mac-learning-scenario-test,"# Copyright 2018 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from neutron_lib import constants from oslo_log import log from tempest.lib.common.utils import data_utils from tempest.lib import decorators from neutron_tempest_plugin.common import ssh from neutron_tempest_plugin.common import utils from neutron_tempest_plugin import config from neutron_tempest_plugin import exceptions from neutron_tempest_plugin.scenario import base CONF = config.CONF LOG = log.getLogger(__name__) PYTHON3_BIN = ""python3"" def get_receiver_script(result_file, packets_expected): """"""Script that listen icmp echos and write the output on result_file."""""" return """"""#!/bin/bash export LC_ALL=en_US.UTF-8 tcpdump -i all -n -v 'icmp[icmptype] = icmp-echoreply or icmp[icmptype] = \ icmp-echo -A -l -c%(packets_expected)d' > %(result_file)s & """""" % {'result_file': result_file, 'packets_expected': packets_expected} def get_sender_script(result_file, receiver_address, completed_message): """"""Script that """""" return """"""#!/bin/bash export LC_ALL=en_US.UTF-8 ping -c 5 %(address)s echo '%(completed_message)s' > %(result_file)s & """""" % {'result_file': result_file, 'address': receiver_address, 'completed_message': completed_message} class BaseMacLearningTest(object): credentials = ['primary', 'admin'] force_tenant_isolation = False # Import configuration options available_type_drivers = ( CONF.neutron_plugin_options.available_type_drivers) completed_message = ""Done!"" receiver_output_file = ""/tmp/receiver_out"" non_receiver_output_file = ""/tmp/non_receiver_out"" sender_output_file = ""/tmp/sender_out"" @classmethod def skip_checks(cls): super(BaseMacLearningTest, cls).skip_checks() advanced_image_available = ( CONF.neutron_plugin_options.advanced_image_ref or CONF.neutron_plugin_options.default_image_is_advanced) if not advanced_image_available: skip_reason = ""This test require advanced tools for this test"" raise cls.skipException(skip_reason) @classmethod def resource_setup(cls): super(BaseMacLearningTest, cls).resource_setup() if CONF.neutron_plugin_options.default_image_is_advanced: cls.flavor_ref = CONF.compute.flavor_ref cls.image_ref = CONF.compute.image_ref cls.username = CONF.validation.image_ssh_user else: cls.flavor_ref = ( CONF.neutron_plugin_options.advanced_image_flavor_ref) cls.image_ref = CONF.neutron_plugin_options.advanced_image_ref cls.username = CONF.neutron_plugin_options.advanced_image_ssh_user # setup basic topology for servers we can log into it cls.network = cls.create_network(port_security_enabled=False) cls.subnet = cls.create_subnet(cls.network, enable_dhcp=False) cls.router = cls.create_router_by_client() cls.create_router_interface(cls.router['id'], cls.subnet['id']) cls.keypair = cls.create_keypair() def _create_server(self): name = data_utils.rand_name(""maclearning-server"") server = self.create_server( flavor_ref=self.flavor_ref, image_ref=self.image_ref, key_name=self.keypair['name'], name=name, networks=[{'uuid': self.network['id']}], config_drive='True')['server'] self.wait_for_server_active(server) self.wait_for_guest_os_ready(server) server['port'] = self.client.list_ports( network_id=self.network['id'], device_id=server['id'])['ports'][0] server['fip'] = self.create_floatingip(port=server['port']) server['ssh_client'] = ssh.Client(server['fip']['floating_ip_address'], self.username, pkey=self.keypair['private_key']) self._check_cmd_installed_on_server(server['ssh_client'], server['id'], PYTHON3_BIN) return server def _check_cmd_installed_on_server(self, ssh_client, server_id, cmd): try: ssh_client.execute_script('which %s' % cmd) except exceptions.SSHScriptFailed: raise self.skipException( ""%s is not available on server %s"" % (cmd, server_id)) def _prepare_sender(self, server, address): ssh_client = ssh.Client( server['fip']['floating_ip_address'], self.username, pkey=self.keypair['private_key']) check_script = get_sender_script(self.sender_output_file, address, self.completed_message) self._check_cmd_installed_on_server(ssh_client, server['id'], 'tcpdump') server['ssh_client'].execute_script( 'echo ""%s"" > /tmp/ping.sh' % check_script) def _prepare_listener(self, server, n_packets): ssh_client = ssh.Client( server['fip']['floating_ip_address'], self.username, pkey=self.keypair['private_key']) check_script = get_receiver_script( result_file=self.non_receiver_output_file, packets_expected=n_packets) self._check_cmd_installed_on_server(ssh_client, server['id'], 'tcpdump') server['ssh_client'].execute_script( 'echo ""%s"" > /tmp/traffic.sh' % check_script) @decorators.idempotent_id('013686ac-23b1-23e4-8361-10b1c98a2861') def test_mac_learning_vms_on_same_network(self): """"""Test mac learning works in a network. The receiver server will receive more than 1 packet. The other server in the network will only receive the first packet. """""" sender = self._create_server() receiver = self._create_server() non_receiver = self._create_server() self._check_mac_learning(sender=sender, receiver=receiver, non_receiver=non_receiver) def _check_mac_learning(self, sender, receiver, non_receiver): """"""Test that the OVN mac learning feature works correctly."""""" def _message_received(client, msg, file_path): result = client.execute_script( ""cat {path} || echo '{path} not exists yet'"".format( path=file_path)) return msg in result # Prepare the server that is not intended receive of the packets. # It will still receive the first packet because the OVN Logical Switch # (the neutron network) needs to learn where is the address requested. LOG.debug('Prepare to sleep 60 sec') import time; time.sleep(60) LOG.debug('Time ended!') self._prepare_listener(non_receiver, 2) # Prepare the server that is intended to receive the packets self._prepare_listener(receiver, 5) # Run the scripts non_receiver['ssh_client'].execute_script( ""bash /tmp/traffic.sh"", become_root=True) receiver['ssh_client'].execute_script( ""bash /tmp/traffic.sh"", become_root=True) # Prepare the server that will make the ping. target_ip = receiver['port']['dns_assignment'][0]['ip_address'] self._prepare_sender(sender, target_ip) # Run the sender node script sender['ssh_client'].execute_script( ""bash /tmp/ping.sh"", become_root=True) # Check if the message was sent utils.wait_until_true( lambda: _message_received( sender['ssh_client'], self.completed_message, self.receiver_output_file), exception=RuntimeError( ""Sender script wasn't executed properly"")) def check_server_result(server, expected_result, output_file): result = server['ssh_client'].execute_script( ""cat {path} || echo '{path} not exists yet'"".format( path=output_file)) LOG.debug(""VM result: %s"", result) return expected_result in result # Check receiver server receiver_expected_result = '5 packets captured' check_server_result(receiver, receiver_expected_result, self.receiver_output_file) # Check the non_receiver server non_receiver_expected_result = '1 packet captured' try: non_receiver['ssh_client'].execute_script( ""killall tcpdump && sleep 2"", become_root=True) except exceptions.SSHScriptFailed: # Probably more packets than expected captured by tcpdump and due # to that it has already stopped self.assertTrue(check_server_result(non_receiver, non_receiver_expected_result, self.non_receiver_output_file), 'Non targeted server received unexpected packets') return utils.wait_until_true( check_server_result(non_receiver, non_receiver_expected_result, self.non_receiver_output_file), exception=RuntimeError( 'Non receiver server did not receive expected packet')) class MacLearningTest(BaseMacLearningTest, base.BaseTempestTestCase): # IP version specific parameters _ip_version = constants.IP_VERSION_4 any_addresses = constants.IPv4_ANY # run the test: # stestr run -n neutron_tempest_plugin.scenario.test_mac_learning.\ # MacLearningTest.test_mac_learning_vms_on_same_network -vvvvv ",,250,0
openstack%2Fkolla-ansible~master~I3a5cd98ecf4916ebd0748e7c08111ad0e4dca0b2,openstack/kolla-ansible,master,I3a5cd98ecf4916ebd0748e7c08111ad0e4dca0b2,Fix freezed spice console in horizon,MERGED,2021-07-30 13:03:34.000000000,2021-08-04 12:23:19.000000000,2021-08-04 12:21:45.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-30 13:03:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6e95be464cf7b297cc9f57c0250b13ec7dcc85ac', 'message': 'Fix freezed spice console in horizon\n\nThis trivial patch is setting ""timeout tunnel"" in haproxy\'s\nconfiguration for spicehtml5proxy. This option extends time\nwhen spice\'s websocket connection is closed, so spice will\nnot be freezed. Default value is set to 1h as it is in novnc.\n\nCloses-Bug: #1938549\nChange-Id: I3a5cd98ecf4916ebd0748e7c08111ad0e4dca0b2\n'}, {'number': 2, 'created': '2021-07-30 13:05:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/03ac216df3c26842f270649d956342f4538c56e4', 'message': 'Fix freezed spice console in horizon\n\nThis trivial patch is setting ""timeout tunnel"" in haproxy\'s\nconfiguration for spicehtml5proxy. This option extends time\nwhen spice\'s websocket connection is closed, so spice will\nnot be freezed. Default value is set to 1h as it is in novnc.\n\nCloses-Bug: #1938549\nChange-Id: I3a5cd98ecf4916ebd0748e7c08111ad0e4dca0b2\n'}, {'number': 3, 'created': '2021-08-02 07:55:49.000000000', 'files': ['ansible/roles/nova-cell/defaults/main.yml', 'releasenotes/notes/bug-1938549-e73042a61f0a5935.yaml', 'ansible/roles/nova-cell/tasks/loadbalancer.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c281a018c41bf1819d6b92343ef4871337702e6f', 'message': 'Fix freezed spice console in horizon\n\nThis trivial patch is setting ""timeout tunnel"" in haproxy\'s\nconfiguration for spicehtml5proxy. This option extends time\nwhen spice\'s websocket connection is closed, so spice will\nnot be freezed. Default value is set to 1h as it is in novnc.\n\nCloses-Bug: #1938549\nChange-Id: I3a5cd98ecf4916ebd0748e7c08111ad0e4dca0b2\n'}]",0,803031,c281a018c41bf1819d6b92343ef4871337702e6f,14,4,3,27339,,,0,"Fix freezed spice console in horizon

This trivial patch is setting ""timeout tunnel"" in haproxy's
configuration for spicehtml5proxy. This option extends time
when spice's websocket connection is closed, so spice will
not be freezed. Default value is set to 1h as it is in novnc.

Closes-Bug: #1938549
Change-Id: I3a5cd98ecf4916ebd0748e7c08111ad0e4dca0b2
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/31/803031/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/nova-cell/defaults/main.yml', 'releasenotes/notes/bug-1938549-e73042a61f0a5935.yaml', 'ansible/roles/nova-cell/tasks/loadbalancer.yml']",3,6e95be464cf7b297cc9f57c0250b13ec7dcc85ac,bug/1938549," backend_http_extra: - ""timeout tunnel {{ haproxy_nova_spicehtml5_proxy_tunnel_timeout }}"" backend_http_extra: - ""timeout tunnel {{ haproxy_nova_spicehtml5_proxy_tunnel_timeout }}""",,15,0
openstack%2Freleases~master~I4b13d66c6420ad4c6a4297d1bf8afdbdd19ad689,openstack/releases,master,I4b13d66c6420ad4c6a4297d1bf8afdbdd19ad689,Release validations-common 1.1.2 for stable/train backward compatibility,ABANDONED,2021-06-25 17:48:18.000000000,2021-08-04 12:03:44.000000000,,"[{'_account_id': 308}, {'_account_id': 8449}, {'_account_id': 11491}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-25 17:48:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/6983f24500a8f8d0fda491f6dac6213c5c3ecb9b', 'message': 'Release validations-common 1.1.2 for stable/train backward compatibility\n\nChange-Id: I4b13d66c6420ad4c6a4297d1bf8afdbdd19ad689\n'}, {'number': 2, 'created': '2021-06-28 07:35:06.000000000', 'files': ['deliverables/_independent/validations-common.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/0edf92144a6b3aabdd9ebec5e99896bae1e58429', 'message': 'Release validations-common 1.1.2 for stable/train backward compatibility\n\nChange-Id: I4b13d66c6420ad4c6a4297d1bf8afdbdd19ad689\n'}]",2,798144,0edf92144a6b3aabdd9ebec5e99896bae1e58429,12,4,2,16515,,,0,"Release validations-common 1.1.2 for stable/train backward compatibility

Change-Id: I4b13d66c6420ad4c6a4297d1bf8afdbdd19ad689
",git fetch https://review.opendev.org/openstack/releases refs/changes/44/798144/2 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/validations-common.yaml'],1,6983f24500a8f8d0fda491f6dac6213c5c3ecb9b,v-common/1.1.2, - hash: 92f51eadc73438fe3cb91c608aa47714a02d20e2 repo: openstack/validations-common version: 1.1.2 - projects:,,4,0
openstack%2Freleases~master~I8c97acf6a72417363a6192a0e36728b9592257b6,openstack/releases,master,I8c97acf6a72417363a6192a0e36728b9592257b6,Release panko for stable/ussuri,MERGED,2021-07-23 20:12:11.000000000,2021-08-04 12:01:09.000000000,2021-08-04 12:01:09.000000000,"[{'_account_id': 308}, {'_account_id': 4264}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-07-23 20:12:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/0a2a71820a16f0715e5c4f0144a55444bc36f648', 'message': 'Release panko for stable/ussuri\n\nThis release picks up new commits to panko since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\n$ git log --oneline --no-merges 8.0.0..0a8d5b4f\n0a8d5b4f Add max_count argument for clear_expired_data call\n4e8597a1 Update TOX_CONSTRAINTS_FILE for stable/ussuri\nc47b5791 Update .gitreview for stable/ussuri\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I8c97acf6a72417363a6192a0e36728b9592257b6\n'}, {'number': 2, 'created': '2021-08-04 09:30:00.000000000', 'files': ['deliverables/ussuri/panko.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/7f9ccae01d129aab1b7fa0c833f86f5cb1a5d06f', 'message': 'Release panko for stable/ussuri\n\nThis release picks up new commits to panko since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\n$ git log --oneline --no-merges 8.0.0..0a8d5b4f\n0a8d5b4f Add max_count argument for clear_expired_data call\n4e8597a1 Update TOX_CONSTRAINTS_FILE for stable/ussuri\nc47b5791 Update .gitreview for stable/ussuri\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I8c97acf6a72417363a6192a0e36728b9592257b6\n'}]",0,802109,7f9ccae01d129aab1b7fa0c833f86f5cb1a5d06f,15,4,2,17685,,,0,"Release panko for stable/ussuri

This release picks up new commits to panko since
the last release from stable/ussuri.

This is being proposed as a convenience to help make sure stable
changes are being released. If the team is good with this going out,
please respond with a +1 to let the release team know it is OK to
proceed.

If it is not wanted at this time, or if there are more changes that
would be good to get merged before doing a stable release, please
leave a -1 with a comment with what the team would prefer. We can
then either abandon this patch, or wait for an update with a new
commit hash to use instead.

$ git log --oneline --no-merges 8.0.0..0a8d5b4f
0a8d5b4f Add max_count argument for clear_expired_data call
4e8597a1 Update TOX_CONSTRAINTS_FILE for stable/ussuri
c47b5791 Update .gitreview for stable/ussuri

Signed-off-by: Elod Illes <elod.illes@est.tech>
Change-Id: I8c97acf6a72417363a6192a0e36728b9592257b6
",git fetch https://review.opendev.org/openstack/releases refs/changes/09/802109/2 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/ussuri/panko.yaml'],1,0a2a71820a16f0715e5c4f0144a55444bc36f648,add-pypi-template, - version: 8.1.0 projects: - repo: openstack/panko hash: 0a8d5b4fc0169108468404e88d12ee6fefed4e63,,4,0
openstack%2Freleases~master~I2aaac8414f9d49d1268eb3b8f3ec8c5467480399,openstack/releases,master,I2aaac8414f9d49d1268eb3b8f3ec8c5467480399,Adding support of publish-to-pypi-stable-only template for deprecated repo,MERGED,2021-08-04 09:28:27.000000000,2021-08-04 12:01:06.000000000,2021-08-04 12:01:06.000000000,"[{'_account_id': 308}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-04 09:28:27.000000000', 'files': ['openstack_releases/project_config.py'], 'web_link': 'https://opendev.org/openstack/releases/commit/fa46c1fec4874b373664e3350f65048c22166367', 'message': 'Adding support of publish-to-pypi-stable-only template for deprecated repo\n\nhttps://opendev.org/openstack/project-config/commit/d7304b6416b7596fc3221f5989758db79642f8a9\n\nChange-Id: I2aaac8414f9d49d1268eb3b8f3ec8c5467480399\n'}]",0,803452,fa46c1fec4874b373664e3350f65048c22166367,7,2,1,28522,,,0,"Adding support of publish-to-pypi-stable-only template for deprecated repo

https://opendev.org/openstack/project-config/commit/d7304b6416b7596fc3221f5989758db79642f8a9

Change-Id: I2aaac8414f9d49d1268eb3b8f3ec8c5467480399
",git fetch https://review.opendev.org/openstack/releases refs/changes/52/803452/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_releases/project_config.py'],1,fa46c1fec4874b373664e3350f65048c22166367,add-pypi-template," 'publish-to-pypi-stable-only', 'publish-to-pypi-stable-only', 'publish-to-pypi-stable-only', 'publish-to-pypi-stable-only', 'publish-to-pypi-stable-only',",,5,0
openstack%2Ftripleo-ansible~stable%2Fussuri~Ib6140c8991469c950fd7e1b323c614103394e3f1,openstack/tripleo-ansible,stable/ussuri,Ib6140c8991469c950fd7e1b323c614103394e3f1,tripleo-kernel: prevent reboot when TSX flag was added,MERGED,2021-07-30 13:40:36.000000000,2021-08-04 11:46:33.000000000,2021-08-04 11:46:33.000000000,"[{'_account_id': 6816}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 13:40:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/080cf00f82392bb9f8b515e88972bdff4621137e', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n(cherry picked from commit c97ce60fd8153553c807bf9873527b854c517f1d)\n""}, {'number': 2, 'created': '2021-07-30 14:08:08.000000000', 'files': ['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ee6cf0cb2662645aaa428cf79298ac6ba5454c1d', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n(cherry picked from commit 601b607d7ea033c1ac09a68e7f1b109ec52a4b04)\n""}]",1,803021,ee6cf0cb2662645aaa428cf79298ac6ba5454c1d,12,12,2,27419,,,0,"tripleo-kernel: prevent reboot when TSX flag was added

During the 16.2 upgrade path, we enforce the inclusion of tsx flag by
operators. If there was already kernelargs present, the node won't get
rebooted, but if it's a new KernelArgs, the node will get rebooted as
per the related bug.

We want to prevent the unexpected reboot of nodes with workload when
the TSX flag was added.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1975240
Change-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1
(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)
(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)
(cherry picked from commit 601b607d7ea033c1ac09a68e7f1b109ec52a4b04)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/21/803021/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'],1,080cf00f82392bb9f8b515e88972bdff4621137e,,"- name: TSX KernelArgs compute node reboot prevention when: - '""nova_libvirt"" in groups' block: - name: Check if node has a nova.conf stat: path: /var/lib/config-data/puppet-generated/nova_libvirt/etc/nova/nova.conf register: nova_conf_check - name: Enabling defer_reboot when TSX was added or appended when: - nova_conf_check.stat.exists - tripleo_kernel_args is regex(""^[\s]*tsx=[^\s]+[\s]*$"") block: - name: Warn operator about workload protection debug: msg: | Automated reboot for this node has been defered because it is already provisionned. Please schedule a manual reboot after this deployment is completed. - name: Setting defer reboot fact set_fact: tripleo_kernel_defer_reboot: true ",,24,0
openstack%2Ftripleo-ansible~stable%2Ftrain~If1239369b9c650ab62be58b4ae125cff120fa49a,openstack/tripleo-ansible,stable/train,If1239369b9c650ab62be58b4ae125cff120fa49a,Configure vhost-postcopy-support,MERGED,2021-07-30 13:31:38.000000000,2021-08-04 11:46:30.000000000,2021-08-04 11:46:30.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 13:31:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ef427d020b3fb2f88adaa3c3d3a21c055a65c600', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)\n(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)\n(cherry picked from commit 47b499ac50139610d72c32265a0bc8e7eed75884)\n(cherry picked from commit bd0fcf363f773ee0852b1421d1066ae065b2b91c)\n'}, {'number': 2, 'created': '2021-07-30 13:35:48.000000000', 'files': ['tripleo_ansible/roles/tripleo-ovs-dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo-ovs-dpdk/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8bf70996f132944be6a743371a7e65001acbc5e5', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)\n(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)\n(cherry picked from commit 47b499ac50139610d72c32265a0bc8e7eed75884)\n(cherry picked from commit bd0fcf363f773ee0852b1421d1066ae065b2b91c)\n'}]",0,803018,8bf70996f132944be6a743371a7e65001acbc5e5,11,9,2,27419,,,0,"Configure vhost-postcopy-support

Libvirt PostCopy helps with live-migration. For postcopy to work with
vhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Change-Id: If1239369b9c650ab62be58b4ae125cff120fa49a
(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)
(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)
(cherry picked from commit 47b499ac50139610d72c32265a0bc8e7eed75884)
(cherry picked from commit bd0fcf363f773ee0852b1421d1066ae065b2b91c)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/18/803018/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml']",2,ef427d020b3fb2f88adaa3c3d3a21c055a65c600,vhost-postcopy,"<<<<<<< HEAD (7045d9 Merge ""Use serial or parallel execution depending on the kin) ======= --- # Copyright 2019 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # All variables intended for modification should place placed in this file. # All variables within this role should have a prefix of ""tripleo_ovs_dpdk"" tripleo_ovs_dpdk_debug: ""{{ (ansible_verbosity | int) >= 2 | bool }}"" tripleo_ovs_dpdk_pmd_core_list: """" tripleo_ovs_dpdk_lcore_list: """" tripleo_ovs_dpdk_memory_channels: 4 tripleo_ovs_dpdk_extra: """" tripleo_ovs_dpdk_socket_memory: """" tripleo_ovs_dpdk_revalidator_cores: """" tripleo_ovs_dpdk_handler_cores: """" tripleo_ovs_dpdk_emc_insertion_probablity: """" tripleo_ovs_dpdk_pmd_auto_lb: false tripleo_ovs_dpdk_pmd_load_threshold: """" tripleo_ovs_dpdk_pmd_improvement_threshold: """" tripleo_ovs_dpdk_pmd_rebal_interval: """" tripleo_ovs_dpdk_vhost_postcopy_support: false >>>>>>> CHANGE (bd0fcf Configure vhost-postcopy-support) ",,257,0
openstack%2Fnova~master~I824655387a10ac9b813c1b7b2399e25ed95f7fc3,openstack/nova,master,I824655387a10ac9b813c1b7b2399e25ed95f7fc3,zuul: Increase GLANCE_LIMIT_IMAGE_SIZE_TOTAL for nova-lvm,MERGED,2021-08-03 09:11:39.000000000,2021-08-04 11:16:23.000000000,2021-08-04 10:55:05.000000000,"[{'_account_id': 4393}, {'_account_id': 7166}, {'_account_id': 7634}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 09:11:39.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/dbf3e276ba5971f1f6483e04b84cb0fc403cd592', 'message': ""zuul: Increase GLANCE_LIMIT_IMAGE_SIZE_TOTAL for nova-lvm\n\nAs seen before in bug #1913451 the nova-lvm job creates large RAW\nsnapshots during each run due to the nature of using LVM storage for the\nephemeral instance disks.\n\nId425aa546f1a5973bae8be9c017782d18f0b4a47 recently landed capping the\nper teneant image size total to 1000 MiB that is far too low for this\njob given the RAW snapshots it's creating. This in turn resulted in\n504 failures when n-cpu attempted to upload snapshots to g-api.\n\nThis change simply increases the per tenant limit to 10 GiB that should\nbe more than enough for all of the tests covered by the nova-lvm job.\n\nCloses-Bug: #1938765\nChange-Id: I824655387a10ac9b813c1b7b2399e25ed95f7fc3\n""}]",0,803322,dbf3e276ba5971f1f6483e04b84cb0fc403cd592,48,5,1,10135,,,0,"zuul: Increase GLANCE_LIMIT_IMAGE_SIZE_TOTAL for nova-lvm

As seen before in bug #1913451 the nova-lvm job creates large RAW
snapshots during each run due to the nature of using LVM storage for the
ephemeral instance disks.

Id425aa546f1a5973bae8be9c017782d18f0b4a47 recently landed capping the
per teneant image size total to 1000 MiB that is far too low for this
job given the RAW snapshots it's creating. This in turn resulted in
504 failures when n-cpu attempted to upload snapshots to g-api.

This change simply increases the per tenant limit to 10 GiB that should
be more than enough for all of the tests covered by the nova-lvm job.

Closes-Bug: #1938765
Change-Id: I824655387a10ac9b813c1b7b2399e25ed95f7fc3
",git fetch https://review.opendev.org/openstack/nova refs/changes/22/803322/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,dbf3e276ba5971f1f6483e04b84cb0fc403cd592,," # As above, increase the total image limit per tenant to 10G GLANCE_LIMIT_IMAGE_SIZE_TOTAL: 10240",,2,0
openstack%2Fcharm-nova-cloud-controller~stable%2F21.04~Ie72016b524b6b42948f6628acd2ba03b575476d8,openstack/charm-nova-cloud-controller,stable/21.04,Ie72016b524b6b42948f6628acd2ba03b575476d8,c-h sync - restore proxy env vars for add-apt-repository,MERGED,2021-07-02 17:04:15.000000000,2021-08-04 11:14:37.000000000,2021-08-04 11:14:37.000000000,"[{'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-02 17:04:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/96b292bce4eb0fdc657ada10230c0851db744aee', 'message': 'c-h sync - restore proxy env vars for add-apt-repository\n\nChange-Id: Ie72016b524b6b42948f6628acd2ba03b575476d8\n'}, {'number': 2, 'created': '2021-08-03 13:02:47.000000000', 'files': ['charmhelpers/contrib/openstack/deferred_events.py', 'charmhelpers/contrib/openstack/utils.py', 'charmhelpers/fetch/ubuntu.py'], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/d17f1e683fe639759442f3691cba988f42802c39', 'message': 'c-h sync - restore proxy env vars for add-apt-repository\n\nChange-Id: Ie72016b524b6b42948f6628acd2ba03b575476d8\n'}]",0,799267,d17f1e683fe639759442f3691cba988f42802c39,19,4,2,11805,,,0,"c-h sync - restore proxy env vars for add-apt-repository

Change-Id: Ie72016b524b6b42948f6628acd2ba03b575476d8
",git fetch https://review.opendev.org/openstack/charm-nova-cloud-controller refs/changes/67/799267/2 && git format-patch -1 --stdout FETCH_HEAD,"['charmhelpers/contrib/openstack/deferred_events.py', 'charmhelpers/contrib/openstack/utils.py', 'charmhelpers/fetch/ubuntu.py']",3,96b292bce4eb0fdc657ada10230c0851db744aee,batch-update," if '{series}' in spec: series = get_distrib_codename() _run_with_retries(['add-apt-repository', '--yes', spec], cmd_env=env_proxy_settings(['https', 'http']))"," series = get_distrib_codename() if '{series}' in spec: # software-properties package for bionic properly reacts to proxy settings # set via apt.conf (see lp:1433761), however this is not the case for LTS # and non-LTS releases before bionic. if series in ('trusty', 'xenial'): _run_with_retries(['add-apt-repository', '--yes', spec], cmd_env=env_proxy_settings(['https', 'http'])) else: _run_with_retries(['add-apt-repository', '--yes', spec])",18,13
openstack%2Fheat~master~Ia65dabd7e357ad4ed8076fef3a3134c87100d4ed,openstack/heat,master,Ia65dabd7e357ad4ed8076fef3a3134c87100d4ed,Make grenade job voting again,MERGED,2021-08-04 03:34:48.000000000,2021-08-04 11:03:47.000000000,2021-08-04 10:59:04.000000000,"[{'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-04 03:34:48.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/heat/commit/42b5f68bf047252a7ec6e0db98f0546c042286f3', 'message': 'Make grenade job voting again\n\nChange-Id: Ia65dabd7e357ad4ed8076fef3a3134c87100d4ed\n'}]",0,803414,42b5f68bf047252a7ec6e0db98f0546c042286f3,13,2,1,30073,,,0,"Make grenade job voting again

Change-Id: Ia65dabd7e357ad4ed8076fef3a3134c87100d4ed
",git fetch https://review.opendev.org/openstack/heat refs/changes/14/803414/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,42b5f68bf047252a7ec6e0db98f0546c042286f3,,, voting: false,0,1
openstack%2Fpuppet-openstack-integration~master~I131ee4417c5f8628c18616f2cf5570075e0f81cf,openstack/puppet-openstack-integration,master,I131ee4417c5f8628c18616f2cf5570075e0f81cf,Updated from Puppet OpenStack modules constraints,MERGED,2021-08-03 06:14:47.000000000,2021-08-04 11:01:01.000000000,2021-08-04 11:01:01.000000000,"[{'_account_id': 9816}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 06:14:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/75b933c3550a9281258bbde971f7090513668320', 'message': 'Updated from Puppet OpenStack modules constraints\n\nChange-Id: I131ee4417c5f8628c18616f2cf5570075e0f81cf\n'}, {'number': 2, 'created': '2021-08-04 06:27:22.000000000', 'files': ['Puppetfile'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/575a1fca6151de3fb3098060ec890af5d3a34647', 'message': 'Updated from Puppet OpenStack modules constraints\n\nChange-Id: I131ee4417c5f8628c18616f2cf5570075e0f81cf\n'}]",0,803309,575a1fca6151de3fb3098060ec890af5d3a34647,9,3,2,11131,,,0,"Updated from Puppet OpenStack modules constraints

Change-Id: I131ee4417c5f8628c18616f2cf5570075e0f81cf
",git fetch https://review.opendev.org/openstack/puppet-openstack-integration refs/changes/09/803309/1 && git format-patch -1 --stdout FETCH_HEAD,['Puppetfile'],1,75b933c3550a9281258bbde971f7090513668320,openstack/puppet/constraints, :ref => 'v6.4.0', :ref => 'v6.3.1',1,1
openstack%2Fneutron~master~I0ca07d1a1aaf05c1992aea9e29575580d7933324,openstack/neutron,master,I0ca07d1a1aaf05c1992aea9e29575580d7933324,Use elevated context to get default SG from database,MERGED,2021-06-30 09:38:10.000000000,2021-08-04 10:43:30.000000000,2021-08-04 10:41:52.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 33145}]","[{'number': 1, 'created': '2021-06-30 09:38:10.000000000', 'files': ['neutron/db/securitygroups_db.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/f6c3747caeac08df9d865312686be8eccb7f0472', 'message': ""Use elevated context to get default SG from database\n\nWith new system/project scopes it may happen that project admin\nwill try to list security groups for different project and during\nthat call Neutron will ensure that default security group is created.\n\nIn such case elevated context needs to be used to get SG object from\nthe database otherwise, SG will not be found and error 500 will be\nreturned through the API.\n\nUse of elevated context is fine here as if user don't have access to\nthe SG, it will be filtered out by policy mechanism and it will not\nbe returned through API.\n\nCloses-Bug: #1934115\nChange-Id: I0ca07d1a1aaf05c1992aea9e29575580d7933324\n""}]",3,798821,f6c3747caeac08df9d865312686be8eccb7f0472,16,5,1,11975,,,0,"Use elevated context to get default SG from database

With new system/project scopes it may happen that project admin
will try to list security groups for different project and during
that call Neutron will ensure that default security group is created.

In such case elevated context needs to be used to get SG object from
the database otherwise, SG will not be found and error 500 will be
returned through the API.

Use of elevated context is fine here as if user don't have access to
the SG, it will be filtered out by policy mechanism and it will not
be returned through API.

Closes-Bug: #1934115
Change-Id: I0ca07d1a1aaf05c1992aea9e29575580d7933324
",git fetch https://review.opendev.org/openstack/neutron refs/changes/21/798821/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/db/securitygroups_db.py'],1,f6c3747caeac08df9d865312686be8eccb7f0472,bug/1934115," # NOTE(slaweq): With new system/project scopes it may happen that # project admin will try to list security groups for different # project and during that call Neutron will ensure that default # security group is created. In such case elevated context needs to # be used here otherwise, SG will not be found and error 500 will # be returned through the API get_context = context.elevated() if default_sg else context sg = sg_obj.SecurityGroup.get_object(get_context, id=sg.id)"," sg = sg_obj.SecurityGroup.get_object(context, id=sg.id)",8,1
openstack%2Fdevstack~stable%2Fvictoria~I508eceb00d7501ffcfac73d7bc2272badb241494,openstack/devstack,stable/victoria,I508eceb00d7501ffcfac73d7bc2272badb241494,Fix Usage of rdo-release rpm,MERGED,2021-07-30 17:15:02.000000000,2021-08-04 10:43:08.000000000,2021-08-04 10:41:56.000000000,"[{'_account_id': 5314}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-30 17:15:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/ed1adf3fa043e18b81b7cfb951cfc1f90177f837', 'message': 'Fix Usage of rdo-release rpm\n\nrdo-release.el8.rpm rpm points to latest RDO release,\nso use it for master, for stable releases use corresponding\nrelease rpm.\n\nChange-Id: I508eceb00d7501ffcfac73d7bc2272badb241494\n'}, {'number': 2, 'created': '2021-08-03 14:44:12.000000000', 'files': ['stack.sh'], 'web_link': 'https://opendev.org/openstack/devstack/commit/3e54b3c0e7c6401fe92ea690bb0e66388833ec14', 'message': 'Fix Usage of rdo-release rpm\n\nrdo-release.el8.rpm rpm points to latest RDO release,\nso use it for master, for stable releases use corresponding\nrelease rpm.\n\nChange-Id: I508eceb00d7501ffcfac73d7bc2272badb241494\n(cherry picked from commit 0456baaee5309431cd1f88ba4a0ceaa7f050b743)\n'}]",0,803072,3e54b3c0e7c6401fe92ea690bb0e66388833ec14,25,5,2,13861,,,0,"Fix Usage of rdo-release rpm

rdo-release.el8.rpm rpm points to latest RDO release,
so use it for master, for stable releases use corresponding
release rpm.

Change-Id: I508eceb00d7501ffcfac73d7bc2272badb241494
(cherry picked from commit 0456baaee5309431cd1f88ba4a0ceaa7f050b743)
",git fetch https://review.opendev.org/openstack/devstack refs/changes/72/803072/2 && git format-patch -1 --stdout FETCH_HEAD,['stack.sh'],1,ed1adf3fa043e18b81b7cfb951cfc1f90177f837,," if [[ ""$TARGET_BRANCH"" == ""master"" ]]; then # rdo-release.el8.rpm points to latest RDO release, use that for master sudo dnf -y install https://rdoproject.org/repos/rdo-release.el8.rpm else # For stable branches use corresponding release rpm rdo_release=$(echo $TARGET_BRANCH | sed ""s|stable/||g"") sudo dnf -y install https://rdoproject.org/repos/openstack-${rdo_release}/rdo-release-${rdo_release}.el8.rpm fi"," # NOTE(ianw) 2020-04-30 : when we have future branches, we # probably want to install the relevant branch RDO release as # well. But for now it's all master. sudo dnf -y install https://rdoproject.org/repos/rdo-release.el8.rpm",8,4
openstack%2Fsushy~stable%2Fwallaby~I975b3a4aa53704906cb13c859b61a254de79933f,openstack/sushy,stable/wallaby,I975b3a4aa53704906cb13c859b61a254de79933f,Removing optional fields from insert_media payload,MERGED,2021-08-02 11:52:45.000000000,2021-08-04 10:38:02.000000000,2021-08-04 10:36:41.000000000,"[{'_account_id': 10239}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 32177}]","[{'number': 1, 'created': '2021-08-02 11:52:45.000000000', 'files': ['releasenotes/notes/fix-insert-media-payload-b5d4c707f81d9603.yaml', 'sushy/resources/manager/virtual_media.py', 'sushy/tests/unit/resources/manager/test_virtual_media.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/b76050c5c162e78572976dd4b199cab389d1d2d5', 'message': 'Removing optional fields from insert_media payload\n\nRemoving ""Inserted"" and ""WriteProtected"" from the\nVirtualMedia::insert_media() API call payload when PATCH method of\nconfiguring virtual media is not used (e.g. InserMedia action) and\nvalues are set to defaults as per Redfish specification\n(https://redfish.dmtf.org/schemas/v1/VirtualMedia.v1_3_0.json):\n{""Inserted"": true, ""WriteProtected"": True}.\n\n""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()\nare optional and should have reasonable default values on the BMC side.\nSpecifying them in every insert_media call can cause issues on those BMCs that\ntreat them as read-only and not specifying these attributes at all should\nnot cause issues. SuperMicro X11/X12 platforms can be such example -\nvMedia will not work on these without this fix.\nKeeping old behaviour in BMCs using PATCH request for configuring\nvirtual media (e.g. Lenovo SD530) as these may need ""Inserted"" attribute\nto attach virtual media correctly.\n\nStory: 2009086\nTask: 42907\nrhbz#1986238\n\nChange-Id: I975b3a4aa53704906cb13c859b61a254de79933f\n(cherry picked from commit 11a6de24ef7fc735d8a46fe0c1e336f8e099622f)\n'}]",2,803197,b76050c5c162e78572976dd4b199cab389d1d2d5,23,4,1,32177,,,0,"Removing optional fields from insert_media payload

Removing ""Inserted"" and ""WriteProtected"" from the
VirtualMedia::insert_media() API call payload when PATCH method of
configuring virtual media is not used (e.g. InserMedia action) and
values are set to defaults as per Redfish specification
(https://redfish.dmtf.org/schemas/v1/VirtualMedia.v1_3_0.json):
{""Inserted"": true, ""WriteProtected"": True}.

""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()
are optional and should have reasonable default values on the BMC side.
Specifying them in every insert_media call can cause issues on those BMCs that
treat them as read-only and not specifying these attributes at all should
not cause issues. SuperMicro X11/X12 platforms can be such example -
vMedia will not work on these without this fix.
Keeping old behaviour in BMCs using PATCH request for configuring
virtual media (e.g. Lenovo SD530) as these may need ""Inserted"" attribute
to attach virtual media correctly.

Story: 2009086
Task: 42907
rhbz#1986238

Change-Id: I975b3a4aa53704906cb13c859b61a254de79933f
(cherry picked from commit 11a6de24ef7fc735d8a46fe0c1e336f8e099622f)
",git fetch https://review.opendev.org/openstack/sushy refs/changes/97/803197/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix-insert-media-payload-b5d4c707f81d9603.yaml', 'sushy/resources/manager/virtual_media.py', 'sushy/tests/unit/resources/manager/test_virtual_media.py']",3,b76050c5c162e78572976dd4b199cab389d1d2d5,," ""WriteProtected"": False} ) self.assertTrue(self.sys_virtual_media._is_stale) def test_insert_media_rf_default(self): self.assertFalse(self.sys_virtual_media._is_stale) self.sys_virtual_media.insert_media( ""https://www.dmtf.org/freeImages/Sardine.img"", True, True) self.sys_virtual_media._conn.post.assert_called_once_with( (""/redfish/v1/Managers/BMC/VirtualMedia/Floppy1/Actions"" ""/VirtualMedia.InsertMedia""), data={""Image"": ""https://www.dmtf.org/freeImages/Sardine.img""}"," ""Inserted"": True, ""WriteProtected"": False}",52,3
openstack%2Fcinder~master~I35873b85d021a9d4c2903ee2da78fbe9559eb4d4,openstack/cinder,master,I35873b85d021a9d4c2903ee2da78fbe9559eb4d4,FIX BUG: https://bugs.launchpad.net/cinder/+bug/1567263,NEW,2021-08-02 00:28:50.000000000,2021-08-04 10:26:35.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-02 00:28:50.000000000', 'files': ['cinder/tests/unit/api/contrib/test_backups.py', 'cinder/backup/api.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/67b25d9ca3e8242528826af1a51541f8ff4d6820', 'message': 'FIX BUG:\nhttps://bugs.launchpad.net/cinder/+bug/1567263\n\nChange-Id: I490e838f70f1e1da8a5ee59951601eebe73b3f49\nupdate unit test\n\nChange-Id: I35873b85d021a9d4c2903ee2da78fbe9559eb4d4\n'}]",0,803130,67b25d9ca3e8242528826af1a51541f8ff4d6820,13,1,1,33412,,,0,"FIX BUG:
https://bugs.launchpad.net/cinder/+bug/1567263

Change-Id: I490e838f70f1e1da8a5ee59951601eebe73b3f49
update unit test

Change-Id: I35873b85d021a9d4c2903ee2da78fbe9559eb4d4
",git fetch https://review.opendev.org/openstack/cinder refs/changes/30/803130/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/tests/unit/api/contrib/test_backups.py', 'cinder/backup/api.py']",2,67b25d9ca3e8242528826af1a51541f8ff4d6820,dev-yangyang," encrypted_volume_type = None if backup['encryption_key_id']: volume = self.volume_api.get(context, backup['volume_id']) encrypted_volume_type = volume['volume_type'] volume = self.volume_api.create(context, size, name, description, volume_type=encrypted_volume_type)"," volume = self.volume_api.create(context, size, name, description)",14,5
openstack%2Fpython-tripleoclient~stable%2Fwallaby~I28219759922b7407121a3fa4d2f49ee1f4b8a3cd,openstack/python-tripleoclient,stable/wallaby,I28219759922b7407121a3fa4d2f49ee1f4b8a3cd,Allow for cron programming of backups,MERGED,2021-08-03 09:45:54.000000000,2021-08-04 10:22:03.000000000,2021-08-04 10:20:49.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 32728}]","[{'number': 1, 'created': '2021-08-03 09:45:54.000000000', 'files': ['tripleoclient/v1/undercloud_backup.py', 'tripleoclient/v1/overcloud_backup.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/3fb5f341151c6152cd81d9d8c4e22eacfc909840', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nDepends-on: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\nChange-Id: I28219759922b7407121a3fa4d2f49ee1f4b8a3cd\n(cherry picked from commit c5347fbac354099852ba9d2f7291485704f7922d)\n'}]",0,803278,3fb5f341151c6152cd81d9d8c4e22eacfc909840,8,6,1,32968,,,0,"Allow for cron programming of backups

Normally, backups are not done interactively, but during nights or
weekends. This patch introduces the capacity of introducing in an easy
way cron programming that will execute backups in predictable intervals.

Closes-Bug: #1935675

Depends-on: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa
Change-Id: I28219759922b7407121a3fa4d2f49ee1f4b8a3cd
(cherry picked from commit c5347fbac354099852ba9d2f7291485704f7922d)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/78/803278/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/v1/undercloud_backup.py', 'tripleoclient/v1/overcloud_backup.py']",2,3fb5f341151c6152cd81d9d8c4e22eacfc909840,cron-stable/wallaby," '--cron', default=False, action='store_true', help=_(""Sets up a new cron job that by default will "" ""execute a weekly backup at Sundays midnight, "" ""but that can be customized by using the "" ""tripleo_backup_and_restore_cron extra-var."") ) parser.add_argument( if parsed_args.cron is True: LOG.debug(_('Programming cron backup')) self._run_ansible_playbook( playbook='cli-overcloud-backup-cron.yaml', inventory=parsed_args.inventory, tags=None, skip_tags=None, extra_vars=extra_vars ) parsed_args.cron is False and",,43,0
openstack%2Fopenstack-zuul-jobs~master~If3e5c47bab37c1353c2d6dc1fe549e7d5bc60da6,openstack/openstack-zuul-jobs,master,If3e5c47bab37c1353c2d6dc1fe549e7d5bc60da6,Add CentOS 8 Stream wheel builds,MERGED,2021-07-30 06:07:59.000000000,2021-08-04 10:01:38.000000000,2021-08-04 09:57:34.000000000,"[{'_account_id': 4146}, {'_account_id': 6547}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 06:07:59.000000000', 'files': ['zuul.d/project.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-zuul-jobs/commit/989a904ba4e3054c866d306898ebe2512a615209', 'message': 'Add CentOS 8 Stream wheel builds\n\nChange-Id: If3e5c47bab37c1353c2d6dc1fe549e7d5bc60da6\n'}]",0,802988,989a904ba4e3054c866d306898ebe2512a615209,9,3,1,7118,,,0,"Add CentOS 8 Stream wheel builds

Change-Id: If3e5c47bab37c1353c2d6dc1fe549e7d5bc60da6
",git fetch https://review.opendev.org/openstack/openstack-zuul-jobs refs/changes/88/802988/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'zuul.d/jobs.yaml']",2,989a904ba4e3054c866d306898ebe2512a615209,centos-8-stream, name: build-wheel-cache-centos-8-stream parent: build-wheel-cache-base description: | Build CentOS 8 wheels for OpenStack CI mirrors. nodeset: nodes: - name: wheel-cache-centos-8-stream-python3 label: centos-8-stream host-vars: wheel-cache-centos-8-stream-python3: wheel_python: python3 - job: name: build-wheel-cache-centos-8-stream-arm64 parent: build-wheel-cache-base description: | Build CentOS 8 wheels for OpenStack CI mirrors. nodeset: nodes: - name: wheel-cache-centos-8-stream-arm64-python3 label: centos-8-stream-arm64 host-vars: wheel-cache-centos-8-stream-arm64-python3: wheel_python: python3 - job:,,34,0
openstack%2Fcharm-nova-compute~master~I7613f4296a86c7889bdad41a68868117b4d93fdb,openstack/charm-nova-compute,master,I7613f4296a86c7889bdad41a68868117b4d93fdb,Sync release-tools,MERGED,2021-07-22 12:59:04.000000000,2021-08-04 09:56:59.000000000,2021-08-04 09:56:59.000000000,"[{'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-22 12:59:04.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-nova-compute/commit/50ca3cc76c0827f90ae6f7345628ae223f3159e4', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I7613f4296a86c7889bdad41a68868117b4d93fdb\n'}]",0,801829,50ca3cc76c0827f90ae6f7345628ae223f3159e4,13,3,1,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: I7613f4296a86c7889bdad41a68868117b4d93fdb
",git fetch https://review.opendev.org/openstack/charm-nova-compute refs/changes/29/801829/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'tox.ini']",3,50ca3cc76c0827f90ae6f7345628ae223f3159e4,fix-tox-pip-resolutionimpossible,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/requirements.txt -r{toxinidir}/test-requirements.txt,4,10
openstack%2Fcharm-designate~master~I2ad0aec7d50a36e9e5227a08295aef4e99130d78,openstack/charm-designate,master,I2ad0aec7d50a36e9e5227a08295aef4e99130d78,Add config options to handle SOA records.,MERGED,2020-11-10 16:03:22.000000000,2021-08-04 09:33:40.000000000,2021-08-04 09:33:40.000000000,"[{'_account_id': 2424}, {'_account_id': 6737}, {'_account_id': 19298}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}, {'_account_id': 32438}]","[{'number': 1, 'created': '2020-11-10 16:03:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/2f5b3438f7e0a069d776c854a3a007f7ad4c30a8', 'message': 'Add config options to handle SOA records.\n\nNew configuration options:\n\n- default-ttl\n- default-soa-minimum\n- default-soa-refresh-min\n- default-soa-refresh-max\n- default-soa-retry\n\nChange-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78\nCloses-Bug: #1902922\n'}, {'number': 2, 'created': '2020-11-12 00:02:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/5be55458148451cc21ea1e563c0e98973d95a48e', 'message': 'Add config options to handle SOA records.\n\nNew configuration options:\n\n- default-ttl\n- default-soa-minimum\n- default-soa-refresh-min\n- default-soa-refresh-max\n- default-soa-retry\n\nChange-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78\nCloses-Bug: #1902922\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/457\n'}, {'number': 3, 'created': '2020-12-11 18:31:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/a11f665a5f241fea5389658f685b2b138e4651c0', 'message': 'Add config options to handle SOA records.\n\nNew configuration options:\n\n- default-ttl\n- default-soa-minimum\n- default-soa-refresh-min\n- default-soa-refresh-max\n- default-soa-retry\n\nChange-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78\nCloses-Bug: #1902922\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/457\n'}, {'number': 4, 'created': '2021-01-15 21:46:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/0febc115d3a9120373726cb776714b1e340184fe', 'message': 'Add config options to handle SOA records.\n\nNew configuration options:\n\n- default-ttl\n- default-soa-minimum\n- default-soa-refresh-min\n- default-soa-refresh-max\n- default-soa-retry\n\nChange-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78\nCloses-Bug: #1902922\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/457\n'}, {'number': 5, 'created': '2021-01-19 12:35:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/56ae3d380d2d24bfd5ac48c08fdd46713e6b8440', 'message': 'Add config options to handle SOA records.\n\nNew configuration options:\n\n- default-ttl\n- default-soa-minimum\n- default-soa-refresh-min\n- default-soa-refresh-max\n- default-soa-retry\n\nChange-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78\nCloses-Bug: #1902923\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/457\n'}, {'number': 6, 'created': '2021-07-13 21:58:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/cdc4dcdb8a088eb4afa3a797e19b9dabeb986a46', 'message': 'Add config options to handle SOA records.\n\nNew configuration options:\n\n- default-ttl\n- default-soa-minimum\n- default-soa-refresh-min\n- default-soa-refresh-max\n- default-soa-retry\n\nChange-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78\nCloses-Bug: #1902923\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/457\n'}, {'number': 7, 'created': '2021-08-03 22:16:46.000000000', 'files': ['src/config.yaml', 'src/templates/queens/designate.conf', 'src/templates/rocky/designate.conf', 'src/templates/mitaka/designate.conf'], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/b0903882423f3f2f406112be8fdd365b9b68c579', 'message': 'Add config options to handle SOA records.\n\nNew configuration options:\n\n- default-ttl\n- default-soa-minimum\n- default-soa-refresh-min\n- default-soa-refresh-max\n- default-soa-retry\n\nChange-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78\nCloses-Bug: #1902923\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/457\n'}]",4,762166,b0903882423f3f2f406112be8fdd365b9b68c579,82,7,7,2424,,,0,"Add config options to handle SOA records.

New configuration options:

- default-ttl
- default-soa-minimum
- default-soa-refresh-min
- default-soa-refresh-max
- default-soa-retry

Change-Id: I2ad0aec7d50a36e9e5227a08295aef4e99130d78
Closes-Bug: #1902923
Func-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/457
",git fetch https://review.opendev.org/openstack/charm-designate refs/changes/66/762166/7 && git format-patch -1 --stdout FETCH_HEAD,"['src/config.yaml', 'src/templates/queens/designate.conf', 'src/templates/rocky/designate.conf', 'src/templates/mitaka/designate.conf']",4,2f5b3438f7e0a069d776c854a3a007f7ad4c30a8,bug/1902923,{%- if options.default_ttl %} # TTL Value (integer value) default_ttl = {{ options.default_ttl }} {%- endif %} {%- if options.default_soa_refresh_min %} # SOA refresh-min value (integer value) default_soa_refresh_min = {{ options.default_soa_refresh_min %} {%- endif %} {%- if options.default_soa_refresh_max %} # SOA max value (integer value) default_soa_refresh_max = {{ options.default_soa_refresh_max %} {%- endif %} {%- if options.default_soa_retry %} # SOA retry (integer value) default_soa_retry = {{ options.default_soa_retry }} {%- endif %} {%- if options.default_soa_minimum %} # SOA minimum value (integer value) default_soa_minimum = {{ options.default_soa_minimum }} {%- endif %},,96,1
openstack%2Fcharm-designate~master~I863b565efd26ad1e22fd48562d08df5676ee3779,openstack/charm-designate,master,I863b565efd26ad1e22fd48562d08df5676ee3779,Moving to OFTC,MERGED,2021-05-27 12:24:56.000000000,2021-08-04 09:31:57.000000000,2021-08-04 09:31:57.000000000,"[{'_account_id': 8556}, {'_account_id': 13686}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 30561}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-05-27 12:24:56.000000000', 'files': ['README.md'], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/9e3552417a69380018831ea9411acf6c2b1cffb2', 'message': 'Moving to OFTC\n\nChange-Id: I863b565efd26ad1e22fd48562d08df5676ee3779\nSigned-off-by: Nicolas Bock <nicolas.bock@canonical.com>\n'}]",0,793395,9e3552417a69380018831ea9411acf6c2b1cffb2,12,7,1,19298,,,0,"Moving to OFTC

Change-Id: I863b565efd26ad1e22fd48562d08df5676ee3779
Signed-off-by: Nicolas Bock <nicolas.bock@canonical.com>
",git fetch https://review.opendev.org/openstack/charm-designate refs/changes/95/793395/1 && git format-patch -1 --stdout FETCH_HEAD,['README.md'],1,9e3552417a69380018831ea9411acf6c2b1cffb2,oftc,OFTC IRC: #openstack-charms,Freenode IRC: #openstack-charms,1,1
openstack%2Fglance~master~Ie8bea199175a0eb35428b1508af1c49111a87c37,openstack/glance,master,Ie8bea199175a0eb35428b1508af1c49111a87c37,Refactor gateway get_repo auth layer,MERGED,2021-05-05 15:59:21.000000000,2021-08-04 09:21:50.000000000,2021-08-04 07:10:16.000000000,"[{'_account_id': 5046}, {'_account_id': 5202}, {'_account_id': 5314}, {'_account_id': 7973}, {'_account_id': 8122}, {'_account_id': 9303}, {'_account_id': 14250}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-05-05 15:59:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/bc96b33d014599ae8a1ff0ccd694f1afce370eb2', 'message': 'WIP: Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, I believe we need to discard this layer.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 2, 'created': '2021-06-02 19:24:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/d8fae109dcbbf166f88f2af8061a91c4d50a25ee', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 3, 'created': '2021-06-11 21:39:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/716bde2845dcdc9302422124f45ab55f047fed11', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 4, 'created': '2021-06-23 17:07:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/19078269a4452ae884409334867a9567da420f96', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 5, 'created': '2021-06-25 10:47:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/44fd0e8eff8b54870dc12d72226798122bb850d9', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 6, 'created': '2021-06-28 17:48:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/2b9fe30acd4b7fd92782bbe262eb764d245b4482', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 7, 'created': '2021-07-02 14:49:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/7500722d588f4a04c0a2df6ec97147ecf1fdac12', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 8, 'created': '2021-07-06 10:51:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/1d13fed80a753f0f79a1a2eec47f6de3593b9640', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 9, 'created': '2021-07-06 18:00:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/9c6890c2f0fa9ff81d50342605f7121e55ab5134', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 10, 'created': '2021-07-14 14:03:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/00b19f019f0972f446bf55cfa5cb6600dce8c36a', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 11, 'created': '2021-07-14 19:32:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/bee98d0e632e3e230143e45a819f8885e5551c74', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 12, 'created': '2021-07-16 13:56:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/e6ffa7ad61fdba15ad25780436e9c5eea7c14797', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 13, 'created': '2021-07-16 15:28:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/467ba9664388afbbc49a955b3be61f5f84d45347', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 14, 'created': '2021-07-20 16:30:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/63c4ad9ad6d4f8353675956230fbdfb648897893', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 15, 'created': '2021-07-26 19:49:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/162f9abf34fae00fb3f864868b5a34479fb477ba', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 16, 'created': '2021-07-27 18:34:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/71ed92a3c9fa6faeef68d680803d5f956ea83273', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}, {'number': 17, 'created': '2021-08-02 17:22:08.000000000', 'files': ['glance/gateway.py', 'glance/tests/unit/test_gateway.py'], 'web_link': 'https://opendev.org/openstack/glance/commit/8767489f7b8f8c98d402ab77e8a34a6445e25a04', 'message': 'Refactor gateway get_repo auth layer\n\nThis makes us able to optionally not get the authorization layer on\ntop of the stack. The authorization layer makes everything on an\nImage read-only based on hard-coded checks for ""owner or admin"".\nIf we are going to move to using policy to enforce modifications\nto images, we need to discard this layer.\n\nWhen the flag is True we also don\'t insert the policy layer in the\nmiddle of the stack.\n\nThis patch cleans up the stacking to be a little more modular, and\nadds a flag to control whether or not we get the authorization layer\non top or not.\n\nPartially-Implements: blueprint policy-refactor\n\nChange-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37\n'}]",12,789913,8767489f7b8f8c98d402ab77e8a34a6445e25a04,69,8,17,4393,,,0,"Refactor gateway get_repo auth layer

This makes us able to optionally not get the authorization layer on
top of the stack. The authorization layer makes everything on an
Image read-only based on hard-coded checks for ""owner or admin"".
If we are going to move to using policy to enforce modifications
to images, we need to discard this layer.

When the flag is True we also don't insert the policy layer in the
middle of the stack.

This patch cleans up the stacking to be a little more modular, and
adds a flag to control whether or not we get the authorization layer
on top or not.

Partially-Implements: blueprint policy-refactor

Change-Id: Ie8bea199175a0eb35428b1508af1c49111a87c37
",git fetch https://review.opendev.org/openstack/glance refs/changes/13/789913/11 && git format-patch -1 --stdout FETCH_HEAD,['glance/gateway.py'],1,bc96b33d014599ae8a1ff0ccd694f1afce370eb2,bp/policy-refactor," def get_repo(self, context, authorization_layer=True): """"""Get the layered ImageRepo model. This is where we construct the ""the onion"" by layering ImageRepo models on top of each other, starting with the DB at the bottom. :param context: The RequestContext :param authorization_layer: Controls whether or not we add the legacy glance.authorization layer at the top. :returns: An ImageRepo-like object """""" repo = glance.db.ImageRepo(context, self.db_api) repo = glance.location.ImageRepoProxy( repo, context, self.store_api, self.store_utils) repo = glance.quota.ImageRepoProxy( repo, context, self.db_api, self.store_utils) repo = policy.ImageRepoProxy( repo, context, self.policy) repo = glance.notifier.ImageRepoProxy( repo, context, self.notifier) repo = property_protections.ProtectedImageRepoProxy( repo, context, property_rules) if authorization_layer: repo = authorization.ImageRepoProxy(repo, context) return repo"," def get_repo(self, context): image_repo = glance.db.ImageRepo(context, self.db_api) store_image_repo = glance.location.ImageRepoProxy( image_repo, context, self.store_api, self.store_utils) quota_image_repo = glance.quota.ImageRepoProxy( store_image_repo, context, self.db_api, self.store_utils) policy_image_repo = policy.ImageRepoProxy( quota_image_repo, context, self.policy) notifier_image_repo = glance.notifier.ImageRepoProxy( policy_image_repo, context, self.notifier) pir = property_protections.ProtectedImageRepoProxy( notifier_image_repo, context, property_rules) authorized_image_repo = authorization.ImageRepoProxy( pir, context) else: authorized_image_repo = authorization.ImageRepoProxy( notifier_image_repo, context) return authorized_image_repo",27,18
openstack%2Fironic~master~I5fff32ec5dd1a045116bcf02349650b1f5e3a196,openstack/ironic,master,I5fff32ec5dd1a045116bcf02349650b1f5e3a196,Add lower-constraints job to current development branch,MERGED,2021-07-19 16:15:01.000000000,2021-08-04 09:16:32.000000000,2021-08-04 09:12:23.000000000,"[{'_account_id': 10239}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-19 16:15:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/b21555bd2460dcb0da70cbb50039f7c87d01c1d5', 'message': '[WIP] Test lower-constraints\n\nChange-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196\n'}, {'number': 2, 'created': '2021-07-19 16:15:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/491c6f20b882e227bfe46743b42d48707a85cfb4', 'message': '[WIP] Test lower-constraints\n\nChange-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196\n'}, {'number': 3, 'created': '2021-07-20 08:30:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/55aab7103bb6c586747bd998c8ae402a8fb47377', 'message': '[WIP] Test lower-constraints\n\nChange-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196\n'}, {'number': 4, 'created': '2021-07-20 15:36:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/bc9f265bb007b7478cd8d4a0c9da2a234800da8d', 'message': '[WIP] Test lower-constraints\n\nChange-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196\n'}, {'number': 5, 'created': '2021-07-21 09:25:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/3ff3f41d347bfb9e90e2200899814e011adeafa9', 'message': 'Add lower-constraints job to current development branch\n\nThe lower-constraints test was removed becuase of an issue where pip could not\ncorrectly determine the required packages versions to install, ending in an almost\ninfinite loop that would end up in timneout, failure, and general mayhem.\nRecently the issue has been fixed and, if properly configured, the lower-constraints\ntest can provide good indication of which minimum versions are required to\nsupport the current code.\nThis patch adds the test back to the current development branch.\nThe long term goal is to keep the lower-constraints file in the stable branches, but\nremove the test job to avoid issues during backports.\n\nChange-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196\n'}, {'number': 6, 'created': '2021-07-21 09:26:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/0a883ab18542ff6a846c9d2fa15ef2698cee5470', 'message': 'Add lower-constraints job to current development branch\n\nThe lower-constraints test was removed becuase of an issue where pip\ncould not correctly determine the required packages versions to install,\nending in an almost infinite loop that would end up in timeout, failure,\nand general mayhem.\nRecently the issue has been fixed and, if properly configured, the\nlower-constraints test can provide good indication of which minimum\nversions are required to support the current code.\nThis patch adds the test back to the current development branch.\nThe long term goal is to keep the lower-constraints file in the stable\nbranches, but remove the test job to avoid issues during backports.\n\nChange-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196\n'}, {'number': 7, 'created': '2021-07-30 12:20:40.000000000', 'files': ['lower-constraints.txt', 'zuul.d/project.yaml', 'setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/ironic/commit/e5d35ba65cf1a58efb7893f0733598894752ede5', 'message': 'Add lower-constraints job to current development branch\n\nThe lower-constraints test was removed becuase of an issue where pip\ncould not correctly determine the required packages versions to install,\nending in an almost infinite loop that would end up in timeout, failure,\nand general mayhem.\nRecently the issue has been fixed and, if properly configured, the\nlower-constraints test can provide good indication of which minimum\nversions are required to support the current code.\nThis patch adds the test back to the current development branch.\nThe long term goal is to keep the lower-constraints file in the stable\nbranches, but remove the test job to avoid issues during backports.\n\nChange-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196\n'}]",0,801350,e5d35ba65cf1a58efb7893f0733598894752ede5,35,4,7,23851,,,0,"Add lower-constraints job to current development branch

The lower-constraints test was removed becuase of an issue where pip
could not correctly determine the required packages versions to install,
ending in an almost infinite loop that would end up in timeout, failure,
and general mayhem.
Recently the issue has been fixed and, if properly configured, the
lower-constraints test can provide good indication of which minimum
versions are required to support the current code.
This patch adds the test back to the current development branch.
The long term goal is to keep the lower-constraints file in the stable
branches, but remove the test job to avoid issues during backports.

Change-Id: I5fff32ec5dd1a045116bcf02349650b1f5e3a196
",git fetch https://review.opendev.org/openstack/ironic refs/changes/50/801350/1 && git format-patch -1 --stdout FETCH_HEAD,"['lower-constraints.txt', 'zuul.d/project.yaml', 'tox.ini']",3,b21555bd2460dcb0da70cbb50039f7c87d01c1d5,test-lower-constraints, [testenv:lower-constraints] basepython=python3.8 usedevelop = False deps = -c{toxinidir}/lower-constraints.txt -r{toxinidir}/test-requirements.txt -r{toxinidir}/requirements.txt ,,65,0
openstack%2Fironic~stable%2Fvictoria~I7f004d40c1b8c617f9a456216df091e44d69693f,openstack/ironic,stable/victoria,I7f004d40c1b8c617f9a456216df091e44d69693f,"Use shim-signed on Ubuntu, shim is empty now",MERGED,2021-08-03 13:23:28.000000000,2021-08-04 09:05:47.000000000,2021-08-04 09:04:19.000000000,"[{'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-08-03 13:23:28.000000000', 'files': ['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/87dee0250c43e059db727e76b407a0f67c719f43', 'message': 'Use shim-signed on Ubuntu, shim is empty now\n\nAlso fix the documentation to use the correct paths and versions.\n\nChange-Id: I7f004d40c1b8c617f9a456216df091e44d69693f\n(cherry picked from commit 294046befae669dacd159d9f26bcdd3bc8ff26c9)\n'}]",0,803338,87dee0250c43e059db727e76b407a0f67c719f43,12,2,1,10239,,,0,"Use shim-signed on Ubuntu, shim is empty now

Also fix the documentation to use the correct paths and versions.

Change-Id: I7f004d40c1b8c617f9a456216df091e44d69693f
(cherry picked from commit 294046befae669dacd159d9f26bcdd3bc8ff26c9)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/38/803338/1 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst']",3,87dee0250c43e059db727e76b407a0f67c719f43,, Ubuntu (18.04LTS and later):: Ubuntu (18.04LTS and later):: sudo cp /usr/lib/shim/shimx64.efi.signed /tftpboot/bootx64.efi, Ubuntu (16.04LTS and later):: Ubuntu (16.04LTS and later):: sudo cp /usr/lib/shim/shim.efi.signed /tftpboot/bootx64.efi,10,6
openstack%2Fmonasca-api~stable%2Ftrain~I3356063e4ffb4490ef92acf9a002ae9c316c2584,openstack/monasca-api,stable/train,I3356063e4ffb4490ef92acf9a002ae9c316c2584,Fix testes,MERGED,2021-07-27 20:29:45.000000000,2021-08-04 09:02:00.000000000,2021-08-04 08:58:30.000000000,"[{'_account_id': 22348}, {'_account_id': 28062}]","[{'number': 1, 'created': '2021-07-27 20:29:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/275074a7c8a0f8e3b8b66005d866804f573b8f14', 'message': 'Fix testes\n\n- Cap bandit to 1.6.2. Reference [1]\n\n- replace python with python3 commend in docker build script\n\n[1] https://github.com/openstack/monasca-notification/commit/293306e14dfaa775211bcf7d9b5542cd61fb8bd6\n\nChange-Id: I3356063e4ffb4490ef92acf9a002ae9c316c2584\n'}, {'number': 2, 'created': '2021-07-28 22:50:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/f3caa676f96885c7ff20f7a1cd9fdfaaf296cf31', 'message': 'Fix testes\n\n- Cap bandit to 1.6.2. Reference [1]\n- Replace python with python3 commend in docker build script\n- Workaround for new pip 20.3 behavior [2]\n\n[1] https://github.com/openstack/monasca-notification/commit/293306e14dfaa775211bcf7d9b5542cd61fb8bd6\n[2] https://review.opendev.org/c/openstack/monasca-api/+/784094\n\nChange-Id: I3356063e4ffb4490ef92acf9a002ae9c316c2584\n'}, {'number': 3, 'created': '2021-08-01 21:31:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/37b15a6fae6b89cdfc1e774a584429d603340c6c', 'message': 'Fix testes\n\n- Cap bandit to 1.6.2. Reference [1]\n- Replace python with python3 commend in docker build script\n- Workaround for new pip 20.3 behavior [2]\n- Change monasca-tempest-python2-influxdb to non-voting\n\n[1] https://github.com/openstack/monasca-notification/commit/293306e14dfaa775211bcf7d9b5542cd61fb8bd6\n[2] https://review.opendev.org/c/openstack/monasca-api/+/784094\n\nChange-Id: I3356063e4ffb4490ef92acf9a002ae9c316c2584\n'}, {'number': 4, 'created': '2021-08-02 18:57:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/ce484d917aa0231bdaf2cb8f90c1ebf96414aeff', 'message': 'Fix testes\n\n- Cap bandit to 1.6.2. Reference [1]\n- Replace python with python3 commend in docker build script\n- Workaround for new pip 20.3 behavior [2]\n- Change monasca-tempest to non-voting\n\n[1] https://github.com/openstack/monasca-notification/commit/293306e14dfaa775211bcf7d9b5542cd61fb8bd6\n[2] https://review.opendev.org/c/openstack/monasca-api/+/784094\n\nChange-Id: I3356063e4ffb4490ef92acf9a002ae9c316c2584\n'}, {'number': 5, 'created': '2021-08-03 10:57:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/32b7ffba42f2b845345660594b24a592c5998d8e', 'message': 'Fix testes\n\n- Cap bandit to 1.6.2. Reference [1]\n- Replace python with python3 commend in docker build script\n- Workaround for new pip 20.3 behavior [2]\n- Change monasca-tempest to non-voting\n\n[1] https://github.com/openstack/monasca-notification/commit/293306e14dfaa775211bcf7d9b5542cd61fb8bd6\n[2] https://review.opendev.org/c/openstack/monasca-api/+/784094\n\nChange-Id: I3356063e4ffb4490ef92acf9a002ae9c316c2584\n'}, {'number': 6, 'created': '2021-08-03 13:29:39.000000000', 'files': ['test-requirements.txt', '.zuul.yaml', 'devstack/plugin.sh', 'lower-constraints.txt', 'docker/build_image.sh'], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/c4039e2a3fd90b73195e3737d0a401c80a0b8a71', 'message': 'Fix testes\n\n- Cap bandit to 1.6.2. Reference [1]\n- Replace python with python3 commend in docker build script\n- Workaround for new pip 20.3 behavior [2]\n- Change monasca-tempest to non-voting\n\n[1] https://github.com/openstack/monasca-notification/commit/293306e14dfaa775211bcf7d9b5542cd61fb8bd6\n[2] https://review.opendev.org/c/openstack/monasca-api/+/784094\n\nChange-Id: I3356063e4ffb4490ef92acf9a002ae9c316c2584\n'}]",11,802613,c4039e2a3fd90b73195e3737d0a401c80a0b8a71,17,2,6,26141,,,0,"Fix testes

- Cap bandit to 1.6.2. Reference [1]
- Replace python with python3 commend in docker build script
- Workaround for new pip 20.3 behavior [2]
- Change monasca-tempest to non-voting

[1] https://github.com/openstack/monasca-notification/commit/293306e14dfaa775211bcf7d9b5542cd61fb8bd6
[2] https://review.opendev.org/c/openstack/monasca-api/+/784094

Change-Id: I3356063e4ffb4490ef92acf9a002ae9c316c2584
",git fetch https://review.opendev.org/openstack/monasca-api refs/changes/13/802613/4 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'lower-constraints.txt', 'docker/build_image.sh']",3,275074a7c8a0f8e3b8b66005d866804f573b8f14,,"REAL_PATH=$(python3 -c ""import os,sys; print(os.path.realpath('$0'))"")","REAL_PATH=$(python -c ""import os,sys; print(os.path.realpath('$0'))"")",3,3
openstack%2Fopenstack-tempest-skiplist~master~I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9,openstack/openstack-tempest-skiplist,master,I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9,basic_ops mac_spoof fails upstream,MERGED,2021-07-15 17:43:32.000000000,2021-08-04 08:37:54.000000000,2021-07-15 18:56:24.000000000,"[{'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 20182}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-15 17:43:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/9813a5cb2d727439c8ccebaa8a9420b1323bf9f7', 'message': 'basic_ops mac_spoof fails upstream\n\nRelated-Bug: #1936420\nRelated-Bug: #1753209\nChange-Id: I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9\n'}, {'number': 2, 'created': '2021-07-15 18:04:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/3e0e66a293bdc62ab059bb346d4582dcf054ac71', 'message': 'basic_ops mac_spoof fails upstream\n\nRelated-Bug: #1936420\nRelated-Bug: #1753209\nChange-Id: I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9\n'}, {'number': 3, 'created': '2021-07-15 18:15:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/86294317e901814e129ae087af32f0e876698893', 'message': 'basic_ops mac_spoof fails upstream\n\nRelated-Bug: #1936420\nRelated-Bug: #1753209\nChange-Id: I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9\n'}, {'number': 4, 'created': '2021-07-15 18:24:26.000000000', 'files': ['roles/validate-tempest/vars/tempest_skip.yml'], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/cd284cfada992c5d674d462509df77b3941b5cf9', 'message': 'basic_ops mac_spoof fails upstream\n\nRelated-Bug: #1936420\nRelated-Bug: #1753209\nChange-Id: I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9\n'}]",1,800975,cd284cfada992c5d674d462509df77b3941b5cf9,13,4,4,9592,,,0,"basic_ops mac_spoof fails upstream

Related-Bug: #1936420
Related-Bug: #1753209
Change-Id: I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9
",git fetch https://review.opendev.org/openstack/openstack-tempest-skiplist refs/changes/75/800975/4 && git format-patch -1 --stdout FETCH_HEAD,['roles/validate-tempest/vars/tempest_skip.yml'],1,9813a5cb2d727439c8ccebaa8a9420b1323bf9f7,I69be71a3d4cabc92cc18c7eb24f2c97e0b62f2f9,"- test: 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_port_security_macspoofing_port' deployment: - 'overcloud' releases: - name: 'master' reason: 'timing out in upstream infra, not rdo' lp: 'https://bugs.launchpad.net/tripleo/+bug/1936420' - name: 'victoria' reason: 'timing out in upstream infra, not rdo' lp: 'https://bugs.launchpad.net/tripleo/+bug/1936420' - name: 'wallaby' reason: 'timing out in upstream infra, not rdo' lp: 'https://bugs.launchpad.net/tripleo/+bug/1936420' - name: 'train' reason: 'timing out in upstream infra, not rdo' lp: 'https://bugs.launchpad.net/tripleo/+bug/1936420' - name: 'ussuri' reason: 'timing out in upstream infra, not rdo' installer: tripleo jobs: - tripleo-ci-centos-7-containers-multinode - tripleo-ci-centos-8-containers-multinode",,22,0
openstack%2Fneutron~master~Ia395d2c6164b61a8c2ff56783baa3bc219fb580a,openstack/neutron,master,Ia395d2c6164b61a8c2ff56783baa3bc219fb580a,DNM It's just a test of the tempest patch,ABANDONED,2021-07-23 11:25:38.000000000,2021-08-04 08:15:25.000000000,,"[{'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-23 11:25:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/4b5d54a6833be2b816e5db968070ceea61830525', 'message': ""DNM It's just a test of the tempest patch\n\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/802005\n\nRelated-bug: #1914229\nChange-Id: Ia395d2c6164b61a8c2ff56783baa3bc219fb580a\n""}]",0,802008,4b5d54a6833be2b816e5db968070ceea61830525,35,2,1,11975,,,0,"DNM It's just a test of the tempest patch

Depends-On: https://review.opendev.org/c/openstack/tempest/+/802005

Related-bug: #1914229
Change-Id: Ia395d2c6164b61a8c2ff56783baa3bc219fb580a
",git fetch https://review.opendev.org/openstack/neutron refs/changes/08/802008/1 && git format-patch -1 --stdout FETCH_HEAD,[],0,4b5d54a6833be2b816e5db968070ceea61830525,bug/1914229,,,0,0
openstack%2Fmonasca-notification~stable%2Ftrain~I300710d520eb29aef2cfc3996713c3c5f122008e,openstack/monasca-notification,stable/train,I300710d520eb29aef2cfc3996713c3c5f122008e,Fix build docker script,MERGED,2021-07-27 18:13:13.000000000,2021-08-04 08:08:53.000000000,2021-08-04 08:08:53.000000000,"[{'_account_id': 22348}, {'_account_id': 28062}]","[{'number': 1, 'created': '2021-07-27 18:13:13.000000000', 'files': ['docker/build_image.sh'], 'web_link': 'https://opendev.org/openstack/monasca-notification/commit/5b4632bda260d6242ca9bc5a6877c7227c7c01ea', 'message': 'Fix build docker script\n\nChange-Id: I300710d520eb29aef2cfc3996713c3c5f122008e\n'}]",0,802594,5b4632bda260d6242ca9bc5a6877c7227c7c01ea,6,2,1,26141,,,0,"Fix build docker script

Change-Id: I300710d520eb29aef2cfc3996713c3c5f122008e
",git fetch https://review.opendev.org/openstack/monasca-notification refs/changes/94/802594/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/build_image.sh'],1,5b4632bda260d6242ca9bc5a6877c7227c7c01ea,fix-docker,"REAL_PATH=$(python3 -c ""import os,sys; print(os.path.realpath('$0'))"")","REAL_PATH=$(python -c ""import os,sys; print(os.path.realpath('$0'))"")",1,1
openstack%2Fnetworking-ovn~stable%2Ftrain~I454f3b52376a02f6cc9ca9124083295631bd03d5,openstack/networking-ovn,stable/train,I454f3b52376a02f6cc9ca9124083295631bd03d5,[OVN] Fix ML2/OVN + Neutron DHCP agent use case,MERGED,2021-07-15 09:02:47.000000000,2021-08-04 07:56:05.000000000,2021-07-16 12:20:05.000000000,"[{'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-15 09:02:47.000000000', 'files': ['networking_ovn/ml2/mech_driver.py'], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/22cf897a8c7a383ec0b5dc50a38123f4f28dde43', 'message': ""[OVN] Fix ML2/OVN + Neutron DHCP agent use case\n\nIn an attempt to minimize the number of connections to the OVSDBs the\nML2/OVN driver stopped connecting to the OVN dbs if the Neutron worker\nwas a RpcWorker but, that introduced a regression for those using\nML2/OVN + Neutron DHCP agent (for baremetal provisioning).\n\nBecause the RpcWorker didn't have a connection to the OVN database the\nNeutron DHCP agent wasn't able to create the DHCP port and failed with:\n\n2021-07-13 13:36:18.116 17 ERROR neutron.plugins.ml2.managers if not\nself._sb_ovn.chassis_exists(host):\n2021-07-13 13:36:18.116 17 ERROR neutron.plugins.ml2.managers\nAttributeError: 'NoneType' object has no attribute 'chassis_exists'\n\nThis patch adds the RpcWorker back to the list of workers that should\nconnect to the OVN databases.\n\n(cherry picked from Neutron e5f19a29dcfb70ea08fa39267bc4aecd44bec2eb)\n\nChange-Id: I454f3b52376a02f6cc9ca9124083295631bd03d5\nCloses-Bug: #1929633\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n""}]",0,800896,22cf897a8c7a383ec0b5dc50a38123f4f28dde43,21,3,1,6773,,,0,"[OVN] Fix ML2/OVN + Neutron DHCP agent use case

In an attempt to minimize the number of connections to the OVSDBs the
ML2/OVN driver stopped connecting to the OVN dbs if the Neutron worker
was a RpcWorker but, that introduced a regression for those using
ML2/OVN + Neutron DHCP agent (for baremetal provisioning).

Because the RpcWorker didn't have a connection to the OVN database the
Neutron DHCP agent wasn't able to create the DHCP port and failed with:

2021-07-13 13:36:18.116 17 ERROR neutron.plugins.ml2.managers if not
self._sb_ovn.chassis_exists(host):
2021-07-13 13:36:18.116 17 ERROR neutron.plugins.ml2.managers
AttributeError: 'NoneType' object has no attribute 'chassis_exists'

This patch adds the RpcWorker back to the list of workers that should
connect to the OVN databases.

(cherry picked from Neutron e5f19a29dcfb70ea08fa39267bc4aecd44bec2eb)

Change-Id: I454f3b52376a02f6cc9ca9124083295631bd03d5
Closes-Bug: #1929633
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
",git fetch https://review.opendev.org/openstack/networking-ovn refs/changes/96/800896/1 && git format-patch -1 --stdout FETCH_HEAD,['networking_ovn/ml2/mech_driver.py'],1,22cf897a8c7a383ec0b5dc50a38123f4f28dde43,,"from neutron import service worker.MaintenanceWorker, service.RpcWorker)", worker.MaintenanceWorker),3,1
openstack%2Ftripleo-repos~master~I29ce27114e0675fb5d00614df506675bfbe5bf96,openstack/tripleo-repos,master,I29ce27114e0675fb5d00614df506675bfbe5bf96,Enable ansible-test sanity checks (nv),MERGED,2021-07-12 12:39:18.000000000,2021-08-04 07:22:31.000000000,2021-08-03 17:29:09.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 24162}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-07-12 12:39:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/4eb5adda162bde33f264b95aea0eb07f07445bc1', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 2, 'created': '2021-07-13 11:02:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/f6231716dec5f403a2e40ea9527e653c18b9dcdc', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 3, 'created': '2021-07-13 11:05:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/fa617c9514beee7854066580fc981521a378bda7', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 4, 'created': '2021-07-13 11:19:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/43a14f63e021a5caeb5245a1c412b7e20d29fe9c', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 5, 'created': '2021-07-13 11:48:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/9ceefc6700e61e6de537cab00d518992625df592', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 6, 'created': '2021-07-13 12:14:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/5cc78a50bdcf9e273b74a784b18056ec186c3207', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 7, 'created': '2021-07-13 12:43:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/340d00a5855a4d162e8be50814c71bece3464285', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 8, 'created': '2021-07-13 14:35:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/137a831ffac86676225dc0c138fe4b5a01be68fd', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 9, 'created': '2021-07-13 14:36:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/f47b8b7674175f31f39fa60615c82b708ac43f0c', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 10, 'created': '2021-07-14 09:40:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/02430b46c0db85d6f6e31c82f42c016bf5b59149', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 11, 'created': '2021-07-14 11:19:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/5b3dbc0146ec3621a1daf73156fb562a34adc997', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 12, 'created': '2021-07-14 11:35:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/e71456b162208d0c92cd1ececf1aaf45ffa74e9b', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 13, 'created': '2021-07-14 12:39:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/409d6fd835cfdeeefcff6b1343665b5d3d9d761e', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 14, 'created': '2021-07-14 12:49:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/ed1685dd95e33dc1ef6d7599f029452dfbf44115', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 15, 'created': '2021-07-14 13:21:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/298b0034cafc45bd0093a30b23c3a5f0a6ac9a0c', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 16, 'created': '2021-07-14 13:36:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/26d7bb0d17b0a69f497409c21755bb1e97b6f19e', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 17, 'created': '2021-07-14 14:13:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/d718b192348819a1c326d2effaacad417be1149c', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 18, 'created': '2021-07-14 14:31:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/8b82f834ca8e9febae627a8d51f502f50cc0b15a', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 19, 'created': '2021-07-15 13:06:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/19158ae6ac247d0060c261ec22452c211ddfde75', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 20, 'created': '2021-07-15 13:51:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/8fc002cba1c5935011c15e52c3d02e8825316bf7', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 21, 'created': '2021-07-15 13:58:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/6a9674a9a2018d61383c8f5b6053c713bc885eff', 'message': 'WIP: Make tripleo-repos a collection (ansible-test)\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 22, 'created': '2021-07-26 08:40:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/f0cb8dbf35b625e1e59a3915bbd0dd417900337e', 'message': 'Enable ansible-test sanity checks\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 23, 'created': '2021-07-26 09:21:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/cfcb824ebaf0bd90b1d67e00ed38f20533aa8557', 'message': 'Enable ansible-test sanity checks\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 24, 'created': '2021-07-26 11:47:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/98c21849d1f87d2954a9ddf1b86e001f47cb5699', 'message': 'Enable ansible-test sanity checks\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 25, 'created': '2021-07-26 13:46:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/b018df70c09c294ee13ed4158c56e0cbc4a7f4f2', 'message': 'WIP: Enable ansible-test sanity checks\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 26, 'created': '2021-07-26 14:57:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/4c7cd947868c6b1f0faaf8276ad5d12d30517463', 'message': 'WIP: Enable ansible-test sanity checks\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 27, 'created': '2021-07-28 17:09:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/34b5284173316348e9b4d992e5f90a0683f54d9c', 'message': 'Enable ansible-test sanity checks (nv)\n\nAdds non-voting check jobs for ansible-test sanity and fixing many\nproblems identified by these. We will sort the other problems in\nfollow-up(s) and make the job voting. This approach will ease\nreviewing and prevent creating conflicts with other pending changes.\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 28, 'created': '2021-07-29 06:48:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/41684091ebd88a94f2a7896be3104376ec4e2c1f', 'message': 'Enable ansible-test sanity checks (nv)\n\nAdds non-voting check jobs for ansible-test sanity and fixing many\nproblems identified by these. We will sort the other problems in\nfollow-up(s) and make the job voting. This approach will ease\nreviewing and prevent creating conflicts with other pending changes.\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 29, 'created': '2021-07-30 07:26:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/99021b0e906703de7b5e85a37dc691640d3adc3b', 'message': 'Enable ansible-test sanity checks (nv)\n\nAdds non-voting check jobs for ansible-test sanity and fixing many\nproblems identified by these. We will sort the other problems in\nfollow-up(s) and make the job voting. This approach will ease\nreviewing and prevent creating conflicts with other pending changes.\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}, {'number': 30, 'created': '2021-07-30 08:14:38.000000000', 'files': ['meta/runtime.yml', 'plugins/module_utils/tripleo_repos/get_hash/exceptions.py', 'plugins/module_utils/tripleo_repos/yum_config/exceptions.py', 'tests/sanity/ignore-2.11.txt', 'plugins/modules/yum_config.py', 'plugins/module_utils/tripleo_repos/get_hash/tripleo_hash_info.py', 'plugins/module_utils/tripleo_repos/yum_config/constants.py', 'plugins/module_utils/tripleo_repos/yum_config/yum_config.py', 'tests/sanity/ignore-2.9.txt', 'plugins/module_utils/tripleo_repos/get_hash/constants.py', 'tests/sanity/requirements.txt', 'plugins/module_utils/tripleo_repos/yum_config/dnf_manager.py', 'tests/sanity/ignore-2.10.txt', 'plugins/modules/get_hash.py', 'plugins/module_utils/tripleo_repos/main.py', 'zuul.d/layout.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/1525e5e1fa85aec3304465c187261ad3fe1737d7', 'message': 'Enable ansible-test sanity checks (nv)\n\nAdds non-voting check jobs for ansible-test sanity and fixing many\nproblems identified by these. We will sort the other problems in\nfollow-up(s) and make the job voting. This approach will ease\nreviewing and prevent creating conflicts with other pending changes.\n\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\nChange-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96\n'}]",38,800462,1525e5e1fa85aec3304465c187261ad3fe1737d7,80,7,30,24162,,,0,"Enable ansible-test sanity checks (nv)

Adds non-voting check jobs for ansible-test sanity and fixing many
problems identified by these. We will sort the other problems in
follow-up(s) and make the job voting. This approach will ease
reviewing and prevent creating conflicts with other pending changes.

Story: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559
Change-Id: I29ce27114e0675fb5d00614df506675bfbe5bf96
",git fetch https://review.opendev.org/openstack/tripleo-repos refs/changes/62/800462/15 && git format-patch -1 --stdout FETCH_HEAD,"['galaxy.yml', 'plugins/module_utils/tripleo_get_hash/constants.py', 'plugins/module_utils/tripleo_get_hash/__init__.py', 'plugins/module_utils/tripleo_get_hash/exceptions.py', 'plugins/module_utils/tripleo_get_hash/__main__.py', 'plugins/module_utils/tripleo_get_hash/tripleo_hash_info.py', 'plugins/modules/tripleo_get_hash.py', 'requirements.txt', 'tests/sanity/ignore-2.9.txt', 'tests/sanity/ignore-2.10.txt', 'zuul.d/layout.yaml', 'tox.ini']",12,4eb5adda162bde33f264b95aea0eb07f07445bc1,tripleo.repos,passenv = HOME,,53,3
openstack%2Fopenstack-tempest-skiplist~master~I6f3ac2efc65ca40a4c4556f77843555eb0d44282,openstack/openstack-tempest-skiplist,master,I6f3ac2efc65ca40a4c4556f77843555eb0d44282,Add TestNetworkBasicOps.test_subnet_details to skip list,MERGED,2021-07-19 11:20:04.000000000,2021-08-04 07:12:07.000000000,2021-07-19 12:13:45.000000000,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 20182}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-19 11:20:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/9e6165e146a7e15023dce809ef4624d8e134245e', 'message': 'Add TestNetworkBasicOps.test_subnet_details to skip list\n\nAs the bug fix https://review.opendev.org/c/openstack/tempest/+/794776\nis going to take time, in order to unblock integration line,\nmoving the test to skip list.\n\nRelated-Bug: #1914229\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I6f3ac2efc65ca40a4c4556f77843555eb0d44282\n'}, {'number': 2, 'created': '2021-07-19 11:59:19.000000000', 'files': ['roles/validate-tempest/vars/tempest_skip.yml'], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/70dfe3c0b1237fb659c8f53d802ab9bfe6ad39d4', 'message': 'Add TestNetworkBasicOps.test_subnet_details to skip list\n\nAs the bug fix https://review.opendev.org/c/openstack/tempest/+/794776\nis going to take time, in order to unblock upstream job,\nmoving the test to skip list.\n\nRelated-Bug: #1914229\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I6f3ac2efc65ca40a4c4556f77843555eb0d44282\n'}]",0,801290,70dfe3c0b1237fb659c8f53d802ab9bfe6ad39d4,12,5,2,12393,,,0,"Add TestNetworkBasicOps.test_subnet_details to skip list

As the bug fix https://review.opendev.org/c/openstack/tempest/+/794776
is going to take time, in order to unblock upstream job,
moving the test to skip list.

Related-Bug: #1914229

Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: I6f3ac2efc65ca40a4c4556f77843555eb0d44282
",git fetch https://review.opendev.org/openstack/openstack-tempest-skiplist refs/changes/90/801290/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/validate-tempest/vars/tempest_skip.yml'],1,9e6165e146a7e15023dce809ef4624d8e134245e,lb#1914229, - test: 'tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_subnet_details' deployment: - 'overcloud' releases: - name: master reason: DNS servers retrieval change with systemd-resolved installers: - 'tripleo' lp: https://bugs.launchpad.net/tripleo/+bug/1914229 jobs: - tripleo-ci-centos-8-containers-multinode,,11,0
openstack%2Fmistral~master~Ie3a439f0113423771bee7fb36b353df0ed68892e,openstack/mistral,master,Ie3a439f0113423771bee7fb36b353df0ed68892e,remove unicode from code,NEW,2021-03-04 03:09:06.000000000,2021-08-04 06:59:05.000000000,,"[{'_account_id': 8731}, {'_account_id': 15895}, {'_account_id': 22348}, {'_account_id': 30755}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-03-04 03:09:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/a675360896937e5903aafeb11665e2e88ff70bfe', 'message': ""remove unicode from code\n\nIn Python 3, all strings are represented in Unicode.In Python 2 are\nstored internally as 8-bit ASCII, hence it is required to attach 'u'\nto make it Unicode. It is no longer necessary now.'\n\nChange-Id: Ie3a439f0113423771bee7fb36b353df0ed68892e\n""}, {'number': 2, 'created': '2021-05-13 03:02:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/a1e02ca9b10ddbc78aa3d6d827d4fb8a4ad2bbad', 'message': ""remove unicode from code\n\nIn Python 3, all strings are represented in Unicode.In Python 2 are\nstored internally as 8-bit ASCII, hence it is required to attach 'u'\nto make it Unicode. It is no longer necessary now.'\n\nChange-Id: Ie3a439f0113423771bee7fb36b353df0ed68892e\n""}, {'number': 3, 'created': '2021-07-13 08:22:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/35aeced3464edd2d4e34e4420f15ee7346f23c5a', 'message': ""remove unicode from code\n\nIn Python 3, all strings are represented in Unicode.In Python 2 are\nstored internally as 8-bit ASCII, hence it is required to attach 'u'\nto make it Unicode. It is no longer necessary now.'\n\nChange-Id: Ie3a439f0113423771bee7fb36b353df0ed68892e\n""}, {'number': 4, 'created': '2021-08-04 03:03:56.000000000', 'files': ['mistral/tests/unit/engine/test_run_action.py', 'doc/source/conf.py', 'api-ref/source/conf.py', 'mistral/tests/unit/api/test_auth.py', 'releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/mistral/commit/2f87f884509156d6c6292dbee57c4610eb43672d', 'message': ""remove unicode from code\n\nIn Python 3, all strings are represented in Unicode.In Python 2 are\nstored internally as 8-bit ASCII, hence it is required to attach 'u'\nto make it Unicode. It is no longer necessary now.'\n\nChange-Id: Ie3a439f0113423771bee7fb36b353df0ed68892e\n""}]",0,778607,2f87f884509156d6c6292dbee57c4610eb43672d,31,5,4,32291,,,0,"remove unicode from code

In Python 3, all strings are represented in Unicode.In Python 2 are
stored internally as 8-bit ASCII, hence it is required to attach 'u'
to make it Unicode. It is no longer necessary now.'

Change-Id: Ie3a439f0113423771bee7fb36b353df0ed68892e
",git fetch https://review.opendev.org/openstack/mistral refs/changes/07/778607/4 && git format-patch -1 --stdout FETCH_HEAD,"['mistral/tests/unit/engine/test_run_action.py', 'mistral/db/sqlalchemy/migration/alembic_migrations/versions/012_add_event_triggers_v2_table.py', 'mistral/db/sqlalchemy/migration/alembic_migrations/versions/013_split_execution_table_increase_names.py', 'api-ref/source/conf.py', 'doc/source/conf.py', 'mistral/tests/unit/api/test_auth.py', 'mistral/db/sqlalchemy/migration/alembic_migrations/versions/001_kilo.py', 'releasenotes/source/conf.py']",8,a675360896937e5903aafeb11665e2e88ff70bfe,,"project = 'Mistral Release Notes' copyright = '2015, Mistral Developers' 'Mistral Release Notes Documentation', 'Mistral Developers', 'manual'), ('index', 'mistralreleasenotes', 'Mistral Release Notes Documentation', ['Mistral Developers'], 1) ('index', 'MistralReleaseNotes', 'Mistral Release Notes Documentation', 'Mistral Developers', 'MistralReleaseNotes',","project = u'Mistral Release Notes' copyright = u'2015, Mistral Developers' u'Mistral Release Notes Documentation', u'Mistral Developers', 'manual'), ('index', 'mistralreleasenotes', u'Mistral Release Notes Documentation', [u'Mistral Developers'], 1) ('index', 'MistralReleaseNotes', u'Mistral Release Notes Documentation', u'Mistral Developers', 'MistralReleaseNotes',",24,24
openstack%2Ftripleo-quickstart~master~Idd1ff9624e1e1271aef300a7069c066cbe8abcb0,openstack/tripleo-quickstart,master,Idd1ff9624e1e1271aef300a7069c066cbe8abcb0,Added provision/virt_repo_setup role,ABANDONED,2021-08-02 02:48:25.000000000,2021-08-04 06:43:40.000000000,,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-02 02:48:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/a95c8593f461f822f5e1fb51a7a270e8ae885818', 'message': 'Install tripleo-operator-ansible in overcloud image\n\nIn CentOS CI, minimal featureset is used where we convert\novercloud images as undercloud and there only python-tripleoclient\npackage is getting installed to drive the tripleo deployment.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nswitches the tripleo-operator-ansible deployment from git to rpm\nWhich is now missing from the deployment as it is not installed.\n\nAdding it there will fix the issue.\n\nCloses-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 2, 'created': '2021-08-02 03:07:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/303de47a63fe07fecdd6824a2c12df589f082a6c', 'message': 'Install tripleo-operator-ansible in overcloud image\n\nIn CentOS CI, minimal featureset is used where we convert\novercloud images as undercloud and there only python-tripleoclient\npackage is getting installed to drive the tripleo deployment.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nswitches the tripleo-operator-ansible deployment from git to rpm\nWhich is now missing from the deployment as it is not installed.\n\nAdding it there will fix the issue.\n\nCloses-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 3, 'created': '2021-08-02 08:24:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/ef411ea92517d69fa335419764460dd57f16d63d', 'message': 'Install tripleo-operator-ansible in overcloud image\n\nIn CentOS CI, minimal featureset is used where we convert\novercloud images as undercloud and there only python-tripleoclient\npackage is getting installed to drive the tripleo deployment.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nswitches the tripleo-operator-ansible deployment from git to rpm\nWhich is now missing from the deployment as it is not installed.\n\nWe also need to install tripleo-operator-ansible on the virthost\njust after repo setup so that we can execute the container\nprep related tasks there.\n\nCloses-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 4, 'created': '2021-08-02 09:59:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/a163fe7c5ae3290349379693652ecb8095baaddd', 'message': 'Install tripleo-operator-ansible in overcloud image\n\nIn CentOS CI, minimal featureset is used where we convert\novercloud images as undercloud and there only python-tripleoclient\npackage is getting installed to drive the tripleo deployment.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nswitches the tripleo-operator-ansible deployment from git to rpm\nWhich is now missing from the deployment as it is not installed.\n\nWe also need to install tripleo-operator-ansible on the virthost\njust after repo setup so that we can execute the container\nprep related tasks there.\n\nAdded it under modify_image_install_packages var[1] used in\nmodify-image role will fix the issue.\n\n[1]. https://opendev.org/openstack/tripleo-quickstart-extras/src/branch/master/roles/modify-image/tasks/libguestfs.yml#L32\nCloses-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 5, 'created': '2021-08-02 11:19:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/164ebef9dc905280cfa8166137fac4ea051875e1', 'message': 'Added provision/tqe_deps role\n\nhttps://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nRemove tripleo-operator-ansible from TQE requires and it needs to\nbe installed via rpm.\n\nFor an end user, where deployment is provisioned via tqe/libvirt\nrole there TQE playbooks are failing as tripleo-operator-ansible\ncollection is not found on the virthost.\n\nIn order to install the same, we cannout use release file as those\nare not in play so we are introducing a new role to install\nthese packages.\n\nIt will setup delorean repo when virthost_repo_setup is set\nto false and then install tqe requires packages.\n\nIt fixes the CentOS CI promotion and check jobs also.\n\nClose-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 6, 'created': '2021-08-02 11:47:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/c52810abf1568f700d5d4392a0adf367befda5a9', 'message': 'Added provision/tqe_deps role\n\nhttps://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nRemove tripleo-operator-ansible from TQE requires and it needs to\nbe installed via rpm.\n\nFor an end user, where deployment is provisioned via tqe/libvirt\nrole there TQE playbooks are failing as tripleo-operator-ansible\ncollection is not found on the virthost.\n\nIn order to install the same, we cannout use release file as those\nare not in play so we are introducing a new role to install\nthese packages.\n\nwhen virthost_repo_setup is set to true and then\ninstall tqe requires packages.\n\nIt fixes the CentOS CI promotion and check jobs also.\n\nClose-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 7, 'created': '2021-08-02 12:06:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/2504eb8f014058018ca7a2da4a66b4e4e6eb0b38', 'message': 'Added tasks to install TQE requires on rpm on virthost\n\nhttps://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nRemove tripleo-operator-ansible from TQE requires and it needs to\nbe installed via rpm.\n\nFor an end user, where deployment is provisioned via tqe/libvirt\nrole there TQE playbooks are failing as tripleo-operator-ansible\ncollection is not found on the virthost.\n\nIn order to install the same, we cannout use release file as those\nare not in play so we are introducing a new role to install\nthese packages.\n\nIt changes the default value of virthost_repo_setup\nto true and adds install tqe requires packages tasks\njust after the repo setup on virthost.\n\nIt fixes the CentOS CI promotion and check jobs also.\n\nClose-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 8, 'created': '2021-08-02 12:14:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/0f2488ae29b0c8fe40a096f05036ab547a590284', 'message': 'Added tasks to install TQE requires on rpm on virthost\n\nhttps://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nRemove tripleo-operator-ansible from TQE requires and it needs to\nbe installed via rpm.\n\nFor an end user, where deployment is provisioned via tqe/libvirt\nrole there TQE playbooks are failing as tripleo-operator-ansible\ncollection is not found on the virthost.\n\nIn order to install the same, we cannout use release file as those\nare not in play so we are introducing a new role to install\nthese packages.\n\nIt changes the default value of virthost_repo_setup\nto true and adds install tqe requires packages tasks\njust after the repo setup on virthost.\n\nIt fixes the CentOS CI promotion and check jobs also.\n\nClose-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 9, 'created': '2021-08-03 02:32:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/580f04351f7e7467d9ff9ea1271e4c3ca6a06818', 'message': 'Added provision/virt_repo_setup role\n\nhttps://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nRemove tripleo-operator-ansible from TQE requires and it needs to\nbe installed via rpm.\n\nFor an end user, where deployment is provisioned via tqe/libvirt\nrole there TQE playbooks are failing as tripleo-operator-ansible\ncollection is not found on the virthost.\n\nIn order to install the same, we cannout use release file as those\nare not in play so we are introducing a new role to install\nthese packages.\n\nrepo-setup-virthost.yml playbook was already there which generally\ngot used in CentOS CI check jobs, but in order to install\nTQE deps in all libvirt deployment, it needs to enable by default\nand install the packages.\n\nWhile using this playbook, the vars are kept at multiple places\nleading to failure, so we moving repo setup and package installation\ntask in a single role and enable it by default by setting\nvirthost_repo_setup: true and move these vars as a part of this role.\n\nClose-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 10, 'created': '2021-08-03 05:23:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/6d5e4e0e578292684876b211bfe4391a1b0351d0', 'message': 'Install tripleo-operator-ansible in overcloud image\n\nIn CentOS CI, minimal featureset is used where we convert\novercloud images as undercloud and there only python-tripleoclient\npackage is getting installed to drive the tripleo deployment.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nswitches the tripleo-operator-ansible deployment from git to rpm\nWhich is now missing from the deployment as it is not installed.\n\nAdding it there will fix the issue.\n\nCloses-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 11, 'created': '2021-08-03 09:53:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/4bd2908df008a7d12c2d318bb2478c73429c4a99', 'message': 'Added provision/virt_repo_setup role\n\nhttps://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nRemove tripleo-operator-ansible from TQE requires and it needs to\nbe installed via rpm.\n\nFor an end user, where deployment is provisioned via tqe/libvirt\nrole there TQE playbooks are failing as tripleo-operator-ansible\ncollection is not found on the virthost.\n\nIn order to install the same, we cannout use release file as those\nare not in play so we are introducing a new role to install\nthese packages.\n\nrepo-setup-virthost.yml playbook was already there which generally\ngot used in CentOS CI check jobs, but in order to install\nTQE deps in all libvirt deployment, it needs to enable by default\nand install the packages.\n\nWhile using this playbook, the vars are kept at multiple places\nleading to failure, so we moving repo setup and package installation\ntask in a single role and enable it by default by setting\nvirthost_repo_setup: true and move these vars as a part of this role.\n\nClose-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}, {'number': 12, 'created': '2021-08-03 12:22:47.000000000', 'files': ['playbooks/repo-setup-virthost.yml', 'roles/provision/virt_repo_setup/tasks/main.yml', 'roles/provision/virt_repo_setup/meta/main.yml', 'roles/provision/defaults/main.yml', 'roles/common/defaults/main.yml', 'playbooks/provision.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/3556708cdf4d7bc5c571bedde0e2e16672347d8f', 'message': 'Added provision/virt_repo_setup role\n\nhttps://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nRemove tripleo-operator-ansible from TQE requires and it needs to\nbe installed via rpm.\n\nFor an end user, where deployment is provisioned via tqe/libvirt\nrole there TQE playbooks are failing as tripleo-operator-ansible\ncollection is not found on the virthost.\n\nIn order to install the same, we cannout use release file as those\nare not in play so we are introducing a new role to install\nthese packages.\n\nrepo-setup-virthost.yml playbook was already there which generally\ngot used in CentOS CI check jobs, but in order to install\nTQE deps in all libvirt deployment, it needs to enable by default\nand install the packages.\n\nWhile using this playbook, the vars are kept at multiple places\nleading to failure, so we moving repo setup and package installation\ntask in a single role and enable it by default by setting\nvirthost_repo_setup: true and move these vars as a part of this role.\n\nThe repo needs to be enabled on the localhost also.\n\nClose-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0\n'}]",4,803134,3556708cdf4d7bc5c571bedde0e2e16672347d8f,46,7,12,12393,,,0,"Added provision/virt_repo_setup role

https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701
Remove tripleo-operator-ansible from TQE requires and it needs to
be installed via rpm.

For an end user, where deployment is provisioned via tqe/libvirt
role there TQE playbooks are failing as tripleo-operator-ansible
collection is not found on the virthost.

In order to install the same, we cannout use release file as those
are not in play so we are introducing a new role to install
these packages.

repo-setup-virthost.yml playbook was already there which generally
got used in CentOS CI check jobs, but in order to install
TQE deps in all libvirt deployment, it needs to enable by default
and install the packages.

While using this playbook, the vars are kept at multiple places
leading to failure, so we moving repo setup and package installation
task in a single role and enable it by default by setting
virthost_repo_setup: true and move these vars as a part of this role.

The repo needs to be enabled on the localhost also.

Close-Bug: #1938638

Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: Idd1ff9624e1e1271aef300a7069c066cbe8abcb0
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/34/803134/3 && git format-patch -1 --stdout FETCH_HEAD,['roles/convert-image/defaults/main.yml'],1,a95c8593f461f822f5e1fb51a7a270e8ae885818,remove_uneeded_tq_requirements, - 'tripleo-operator-ansible',,1,0
openstack%2Ftripleo-ansible~master~I55358c881fc779245877733d7dccba80c95ffd19,openstack/tripleo-ansible,master,I55358c881fc779245877733d7dccba80c95ffd19,Ensure we use stream8 images instead of old centos8 ones.,MERGED,2021-04-23 14:49:14.000000000,2021-08-04 05:50:45.000000000,2021-08-04 05:50:45.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24162}]","[{'number': 1, 'created': '2021-04-23 14:49:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c4985372335889c2f6cee452fb712129b4c0ed6b', 'message': 'Switch module to use stream8 images\n\nChange-Id: I55358c881fc779245877733d7dccba80c95ffd19\n'}, {'number': 2, 'created': '2021-07-22 10:36:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/f06235f744294fd12ba631bed62db3611d6a6e9c', 'message': 'Switch module to use stream8 images\n\nChange-Id: I55358c881fc779245877733d7dccba80c95ffd19\n'}, {'number': 3, 'created': '2021-07-30 13:16:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/91aed61d71a2ba9788d6072c6f4a387e3b93d505', 'message': 'Switch module to use stream8 images\n\nChange-Id: I55358c881fc779245877733d7dccba80c95ffd19\n'}, {'number': 4, 'created': '2021-08-02 07:55:13.000000000', 'files': ['tripleo_ansible/roles/tripleo_container_tag/molecule/default/converge.yml', 'tripleo_ansible/roles/tripleo_update_trusted_cas/molecule/default/molecule.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/positive/molecule.yml', 'tripleo_ansible/roles/tripleo_container_image_build/defaults/main.yml', 'tripleo_ansible/roles/tripleo_container_tag/molecule/legacy_vars/converge.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/default/molecule.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/7d937d2a544ee4be381075d2b7c6b1f7ac896ed2', 'message': 'Ensure we use stream8 images instead of old centos8 ones.\n\nChange-Id: I55358c881fc779245877733d7dccba80c95ffd19\n'}]",7,787767,7d937d2a544ee4be381075d2b7c6b1f7ac896ed2,50,9,4,24162,,,0,"Ensure we use stream8 images instead of old centos8 ones.

Change-Id: I55358c881fc779245877733d7dccba80c95ffd19
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/67/787767/3 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_container_tag/molecule/default/converge.yml', 'tripleo_ansible/roles/tripleo_update_trusted_cas/molecule/default/molecule.yml', 'tripleo_ansible/roles/backup_and_restore/molecule/default/prepare.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/positive/molecule.yml', 'tripleo_ansible/roles/tripleo_container_image_build/defaults/main.yml', 'tripleo_ansible/roles/tripleo_container_tag/molecule/legacy_vars/converge.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/default/molecule.yml']",7,c4985372335889c2f6cee452fb712129b4c0ed6b,stream8, - name: stream8 hostname: stream8 image: quay.io/centos/centos:stream8, - name: centos8 hostname: centos8 image: centos:8,16,16
openstack%2Ftripleo-upgrade~stable%2Fussuri~Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,openstack/tripleo-upgrade,stable/ussuri,Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,Run Ceph upgrade only once.,MERGED,2021-08-02 11:23:21.000000000,2021-08-04 03:26:13.000000000,2021-08-04 03:26:13.000000000,"[{'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-08-02 11:23:21.000000000', 'files': ['tasks/fast-forward-upgrade/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/60b43704d7504c707fc4faa15f558c222b737012', 'message': 'Run Ceph upgrade only once.\n\nThe ceph ugprade playbook was being called twice, which did spend extra\ntime for the test.\n\nIt should be enough to upgrade ceph only once.\n\nChange-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80\n(cherry picked from commit 3d53a15819ca30c8cfd5eb850d66960ed6505405)\n'}]",0,803172,60b43704d7504c707fc4faa15f558c222b737012,8,4,1,6816,,,0,"Run Ceph upgrade only once.

The ceph ugprade playbook was being called twice, which did spend extra
time for the test.

It should be enough to upgrade ceph only once.

Change-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80
(cherry picked from commit 3d53a15819ca30c8cfd5eb850d66960ed6505405)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/72/803172/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/fast-forward-upgrade/main.yml'],1,60b43704d7504c707fc4faa15f558c222b737012,, - name: import ceph upgrade tasks import_tasks: ../upgrade/ceph_upgrade_run.yml, - name: run FFU ceph osd nodes upgrade scripts include_tasks: ../upgrade/ceph_upgrade_run.yml - name: import ceph ugrade tasks import_tasks: ../upgrade/ceph_upgrade_run.yml tags: ffu_overcloud_ceph ,2,6
openstack%2Fkolla-ansible~stable%2Fvictoria~Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5,openstack/kolla-ansible,stable/victoria,Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5,watcher: add missing become for copying configs,MERGED,2021-08-03 15:58:03.000000000,2021-08-04 03:04:46.000000000,2021-08-04 03:03:26.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 33826}]","[{'number': 1, 'created': '2021-08-03 15:58:03.000000000', 'files': ['ansible/roles/watcher/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/707f6ab6a1b2a298fafc17bac39e0440fa83b41f', 'message': 'watcher: add missing become for copying configs\n\nSigned-off-by: Seena Fallah <seenafallah@gmail.com>\nChange-Id: Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5\n(cherry picked from commit 948e9ae707862c8d50c22c6c5cf69423c613a2b7)\n'}]",0,803288,707f6ab6a1b2a298fafc17bac39e0440fa83b41f,9,4,1,14826,,,0,"watcher: add missing become for copying configs

Signed-off-by: Seena Fallah <seenafallah@gmail.com>
Change-Id: Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5
(cherry picked from commit 948e9ae707862c8d50c22c6c5cf69423c613a2b7)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/88/803288/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/watcher/tasks/config.yml'],1,707f6ab6a1b2a298fafc17bac39e0440fa83b41f,watcher-config-stable/victoria, become: true become: true become: true,,3,0
openstack%2Fkolla-ansible~stable%2Fwallaby~Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5,openstack/kolla-ansible,stable/wallaby,Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5,watcher: add missing become for copying configs,MERGED,2021-08-03 15:57:50.000000000,2021-08-04 03:04:43.000000000,2021-08-04 03:03:23.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 33826}]","[{'number': 1, 'created': '2021-08-03 15:57:50.000000000', 'files': ['ansible/roles/watcher/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/183d93726afef27c29229a5c09b112f5ccefd8ac', 'message': 'watcher: add missing become for copying configs\n\nSigned-off-by: Seena Fallah <seenafallah@gmail.com>\nChange-Id: Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5\n(cherry picked from commit 948e9ae707862c8d50c22c6c5cf69423c613a2b7)\n'}]",0,803287,183d93726afef27c29229a5c09b112f5ccefd8ac,9,4,1,14826,,,0,"watcher: add missing become for copying configs

Signed-off-by: Seena Fallah <seenafallah@gmail.com>
Change-Id: Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5
(cherry picked from commit 948e9ae707862c8d50c22c6c5cf69423c613a2b7)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/87/803287/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/watcher/tasks/config.yml'],1,183d93726afef27c29229a5c09b112f5ccefd8ac,watcher-config-stable/wallaby, become: true become: true become: true,,3,0
openstack%2Fswift~master~I901acca0c923be0dda1aaf263d5cea20432c8f8b,openstack/swift,master,I901acca0c923be0dda1aaf263d5cea20432c8f8b,WIP: X-If-Delete-At failing probe test,NEW,2021-08-03 23:49:19.000000000,2021-08-04 01:47:13.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-03 23:49:19.000000000', 'files': ['test/probe/common.py', 'test/probe/brain.py', 'test/probe/test_dark_data.py', 'test/probe/test_object_expirer.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/0e8876fb7cf10f3344839e29f0bf6985bd684d7d', 'message': 'WIP: X-If-Delete-At failing probe test\n\nBug: #1182628\nChange-Id: I901acca0c923be0dda1aaf263d5cea20432c8f8b\n'}]",0,803406,0e8876fb7cf10f3344839e29f0bf6985bd684d7d,3,1,1,15343,,,0,"WIP: X-If-Delete-At failing probe test

Bug: #1182628
Change-Id: I901acca0c923be0dda1aaf263d5cea20432c8f8b
",git fetch https://review.opendev.org/openstack/swift refs/changes/06/803406/1 && git format-patch -1 --stdout FETCH_HEAD,"['test/probe/common.py', 'test/probe/brain.py', 'test/probe/test_dark_data.py', 'test/probe/test_object_expirer.py']",4,0e8876fb7cf10f3344839e29f0bf6985bd684d7d,," def test_expirer_storage_policy_split_brain(self): pendings_before = self.gather_async_pendings() pendings_after = self.gather_async_pendings() def test_expirer_object_split_brain_delete_at(self): self.brain = BrainSplitter(self.url, self.token, self.container_name, self.object_name, 'object', self.policy) self.brain.servers.stop(number=self.brain.primary_numbers[0]) self.brain.put_container() self.brain.put_object() self.brain.servers.start(number=self.brain.primary_numbers[0]) # first pass, rsync fails because of the missing part dir. but then # the post-rsync suffix invalidation creates it primary_with_data = self.brain.primary_numbers[1] Manager(['object-replicator']).once(number=primary_with_data) # second pass actually moves data Manager(['object-replicator']).once(number=primary_with_data) # Now we should have four copies, one for each server obj_data = self.gather_object_files_by_ext() self.assertLengthEqual(obj_data['.data'], 4) self.assertLengthEqual(obj_data['.meta'], 0) self.assertLengthEqual(obj_data['.ts'], 0) # Get a mix of X-Delete-At values self.brain.stop_handoff_half() self.brain.post_object({'X-Delete-After': '1'}) self.brain.start_handoff_half() self.brain.stop_primary_half() self.brain.post_object({'X-Delete-After': '3'}) self.brain.start_primary_half() obj_data = self.gather_object_files_by_ext() self.assertLengthEqual(obj_data['.data'], 4) self.assertLengthEqual(obj_data['.meta'], 4) self.assertLengthEqual( {f.rsplit('/', 1)[1] for f in obj_data['.meta']}, 2) self.assertLengthEqual(obj_data['.ts'], 0) Manager(['object-updater']).once() Manager(['container-updater']).once() # TODO: assert that we've got two queue entries # (Currently) we can't *not* have two entries -- there's nothing in # cleanup_ondisk_files to make the newer .meta clean the old .meta's # queue entry time.sleep(1) # Make sure at least one queue entry is active # Regardless of which X-If-Delete-At is being used, at least one # object-server will respond 412 -- so we don't want to commit to the # delete Manager(['object-expirer']).once() obj_data = self.gather_object_files_by_ext() self.assertLengthEqual(obj_data['.data'], 4) # <--- BOOM self.assertLengthEqual(obj_data['.meta'], 4) self.assertLengthEqual( {f.rsplit('/', 1)[1] for f in obj_data['.meta']}, 2) self.assertLengthEqual(obj_data['.ts'], 0) # But after everything settles... Manager(['object-replicator']).once() obj_data = self.gather_object_files_by_ext() self.assertLengthEqual(obj_data['.data'], 3) self.assertLengthEqual(obj_data['.meta'], 3) self.assertLengthEqual( {f.rsplit('/', 1)[1] for f in obj_data['.meta']}, 1) self.assertLengthEqual(obj_data['.ts'], 0) time.sleep(2) # Make sure both queue entries are active # ...everything can get cleaned up Manager(['object-expirer']).once() obj_data = self.gather_object_files_by_ext() self.assertLengthEqual(obj_data['.data'], 0) self.assertLengthEqual(obj_data['.meta'], 0) self.assertLengthEqual(obj_data['.ts'], 3) self.assertLengthEqual( {f.rsplit('/', 1)[1] for f in obj_data['.ts']}, 1) ", def test_expirer_object_split_brain(self): all_obj_nodes = self.get_all_object_nodes() pendings_before = self.gather_async_pendings(all_obj_nodes) pendings_after = self.gather_async_pendings(all_obj_nodes),126,24
openstack%2Fhorizon~master~I77b93a371f653bedbfdc759300ccd374ee1b9c0d,openstack/horizon,master,I77b93a371f653bedbfdc759300ccd374ee1b9c0d,Add angular delete security group action,ABANDONED,2018-01-21 16:51:51.000000000,2021-08-04 01:35:45.000000000,,"[{'_account_id': 1736}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-01-21 16:51:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/93242d58004a8297186f6466c9db80813da7fe80', 'message': ""Add angular delete security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I77b93a371f653bedbfdc759300ccd374ee1b9c0d\nPartial-Implements: blueprint ng-security-groups\n""}, {'number': 2, 'created': '2018-01-21 17:13:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/bc544871d0e51e5c72de53c0bf9bf11f28d2e986', 'message': ""Add angular delete security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I77b93a371f653bedbfdc759300ccd374ee1b9c0d\nPartial-Implements: blueprint ng-security-groups\n""}, {'number': 3, 'created': '2018-01-22 17:32:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/d62baf3b9da5e2dee0059c72eff89ff5cfe2bc22', 'message': ""Add angular delete security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I77b93a371f653bedbfdc759300ccd374ee1b9c0d\nPartial-Implements: blueprint ng-security-groups\n""}, {'number': 4, 'created': '2018-01-22 18:19:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/dd0adccaba506dfc0bc7d7b3782c30fb88bfd44c', 'message': ""Add angular delete security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I77b93a371f653bedbfdc759300ccd374ee1b9c0d\nPartial-Implements: blueprint ng-security-groups\n""}, {'number': 5, 'created': '2018-01-22 18:28:03.000000000', 'files': ['openstack_dashboard/api/rest/network.py', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/delete.service.js', 'openstack_dashboard/test/unit/api/rest/test_network.py', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/delete.service.spec.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/12cb9fc3ac1904cb3ab195d66b97daf0dbd0dd77', 'message': ""Add angular delete security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I77b93a371f653bedbfdc759300ccd374ee1b9c0d\nPartial-Implements: blueprint ng-security-groups\n""}]",0,536146,12cb9fc3ac1904cb3ab195d66b97daf0dbd0dd77,12,3,5,24056,,,0,"Add angular delete security group action

To test, set 'security_groups_panel' to True in settings.py

Change-Id: I77b93a371f653bedbfdc759300ccd374ee1b9c0d
Partial-Implements: blueprint ng-security-groups
",git fetch https://review.opendev.org/openstack/horizon refs/changes/46/536146/5 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/rest/network.py', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/delete.service.js', 'openstack_dashboard/test/unit/api/rest/test_network.py', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/delete.service.spec.js']",9,93242d58004a8297186f6466c9db80813da7fe80,bp/ng-security-groups,"/** * Copyright 2018 EasyStack, Inc. * * Licensed under the Apache License, Version 2.0 (the ""License""); you may * not use this file except in compliance with the License. You may obtain * a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the * License for the specific language governing permissions and limitations * under the License. */ (function() { 'use strict'; describe('horizon.app.core.security_groups.actions.delete.service', function() { var deleteModalService = { open: function () { deferredModal.resolve({ pass: [{context: {id: 'a'}}], fail: [{context: {id: 'b'}}] }); return deferredModal.promise; } }; var securityGroupAPI = { deleteSecurityGroup: function() { return; } }; var service, $scope, deferredModal; /////////////////////// beforeEach(module('horizon.app.core')); beforeEach(module('horizon.app.core.security_groups')); beforeEach(module('horizon.framework')); beforeEach(module('horizon.framework.widgets.modal', function($provide) { $provide.value('horizon.framework.widgets.modal.deleteModalService', deleteModalService); })); beforeEach(module('horizon.app.core.openstack-service-api', function($provide) { $provide.value('horizon.app.core.openstack-service-api.security-group', securityGroupAPI); })); beforeEach(inject(function($injector, _$rootScope_, $q) { $scope = _$rootScope_.$new(); service = $injector.get('horizon.app.core.security_groups.actions.delete.service'); deferredModal = $q.defer(); })); function generateSecurityGroup(securityGroupCount) { var securitygroups = []; var data = { name: 'sg', id: '1' }; for (var index = 0; index < securityGroupCount; index++) { var securitygroup = angular.copy(data); securitygroup.id = index + 1; securitygroup.name = 'sg' + (index + 1); securitygroups.push(securitygroup); } return securitygroups; } describe('perform method', function() { beforeEach(function() { spyOn(deleteModalService, 'open').and.callThrough(); }); //////////// it('should open the delete modal and show correct labels', testSingleLabels); it('should open the delete modal and show correct labels, one object', testSingleObject); it('should open the delete modal and show correct labels', testpluralLabels); it('should open the delete modal with correct entities', testEntities); it('should only delete security groups that are valid', testValids); it('should fail if security group name is default', testName); it('should pass in a function that deletes a securitygroup', testSecurityGroup); //////////// function testSingleObject() { var securitygroups = generateSecurityGroup(1); service.perform(securitygroups[0]); $scope.$apply(); var labels = deleteModalService.open.calls.argsFor(0)[2].labels; expect(deleteModalService.open).toHaveBeenCalled(); angular.forEach(labels, function eachLabel(label) { expect(label.toLowerCase()).toContain('security group'); }); } function testSingleLabels() { var securitygroups = generateSecurityGroup(1); service.perform(securitygroups); $scope.$apply(); var labels = deleteModalService.open.calls.argsFor(0)[2].labels; expect(deleteModalService.open).toHaveBeenCalled(); angular.forEach(labels, function eachLabel(label) { expect(label.toLowerCase()).toContain('security group'); }); } function testpluralLabels() { var securitygroups = generateSecurityGroup(2); service.perform(securitygroups); $scope.$apply(); var labels = deleteModalService.open.calls.argsFor(0)[2].labels; expect(deleteModalService.open).toHaveBeenCalled(); angular.forEach(labels, function eachLabel(label) { expect(label.toLowerCase()).toContain('security groups'); }); } function testEntities() { var securityGroupCount = 3; var securitygroups = generateSecurityGroup(securityGroupCount); service.perform(securitygroups); $scope.$apply(); var entities = deleteModalService.open.calls.argsFor(0)[1]; expect(deleteModalService.open).toHaveBeenCalled(); expect(entities.length).toEqual(securityGroupCount); } function testValids() { var securityGroupCount = 2; var securitygroups = generateSecurityGroup(securityGroupCount); service.perform(securitygroups); $scope.$apply(); var entities = deleteModalService.open.calls.argsFor(0)[1]; expect(deleteModalService.open).toHaveBeenCalled(); expect(entities.length).toBe(securityGroupCount); expect(entities[0].name).toEqual('sg1'); expect(entities[1].name).toEqual('sg2'); } function testName() { var securitygroups = generateSecurityGroup(1); securitygroups[0].name = 'default'; service.perform(securitygroups); $scope.$apply(); expect(deleteModalService.open).not.toHaveBeenCalled(); } function testSecurityGroup() { spyOn(securityGroupAPI, 'deleteSecurityGroup'); var securityGroupCount = 1; var securitygroups = generateSecurityGroup(securityGroupCount); var securitygroup = securitygroups[0]; service.perform(securitygroups); $scope.$apply(); var contextArg = deleteModalService.open.calls.argsFor(0)[2]; var deleteFunction = contextArg.deleteEntity; deleteFunction(securitygroup.id); expect(securityGroupAPI.deleteSecurityGroup).toHaveBeenCalledWith(securitygroup.id, true); } }); // end of delete modal describe('allow method', function() { var resolver = { success: function() {}, error: function() {} }; beforeEach(function() { spyOn(resolver, 'success'); spyOn(resolver, 'error'); }); //////////// it('should check security group name if batch action', testBatch); it('allows delete if security group can be deleted', testValid); it('disallows delete if security group name is default', testName); //////////// function testBatch() { service.allowed(); $scope.$apply(); expect(resolver.success).not.toHaveBeenCalled(); expect(resolver.error).not.toHaveBeenCalled(); } function testValid() { var securitygroup = generateSecurityGroup(1)[0]; service.allowed(securitygroup).then(resolver.success, resolver.error); $scope.$apply(); expect(resolver.success).toHaveBeenCalled(); } function testName() { var securitygroup = generateSecurityGroup(1)[0]; securitygroup.name = 'default'; service.allowed(securitygroup).then(resolver.success, resolver.error); $scope.$apply(); expect(resolver.error).toHaveBeenCalled(); } }); // end of allowed }); // end of delete })(); ",,463,1
openstack%2Fhorizon~master~I97b896e0385607763594ae0139d65eef70239767,openstack/horizon,master,I97b896e0385607763594ae0139d65eef70239767,Add angular edit security group action,ABANDONED,2018-01-22 18:46:05.000000000,2021-08-04 01:35:32.000000000,,"[{'_account_id': 1736}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-01-22 18:46:05.000000000', 'files': ['openstack_dashboard/api/rest/network.py', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/edit.service.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/edit.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/edit.description.html', 'openstack_dashboard/test/unit/api/rest/test_network.py', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/58ae80072daba02a8ab236af58bddfb61fd258a9', 'message': ""Add angular edit security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I97b896e0385607763594ae0139d65eef70239767\nPartial-Implements: blueprint ng-security-groups\n""}]",0,536532,58ae80072daba02a8ab236af58bddfb61fd258a9,7,3,1,24056,,,0,"Add angular edit security group action

To test, set 'security_groups_panel' to True in settings.py

Change-Id: I97b896e0385607763594ae0139d65eef70239767
Partial-Implements: blueprint ng-security-groups
",git fetch https://review.opendev.org/openstack/horizon refs/changes/32/536532/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/rest/network.py', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/edit.service.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/edit.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/edit.description.html', 'openstack_dashboard/test/unit/api/rest/test_network.py', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.js']",9,58ae80072daba02a8ab236af58bddfb61fd258a9,bp/ng-security-groups," getSecurityGroup: getSecurityGroup, query: query, updateSecurityGroup: updateSecurityGroup * @name getSecurityGroup * @description * Get a single security group by ID * * @param {string} id * Specifies the id of the security group to request. * * @returns {Object} The result of the API call */ function getSecurityGroup(id) { return apiService.get('/api/network/securitygroups/' + id + '/') .error(function () { toastService.add('error', gettext('Unable to retrieve the security group.')); }); } /** /** * @name updateSecurityGroup * @description * Update an existing security group. * * @param {object} securitygroup * The security group to update * * @param {string} securitygroup.id * ID of the security group to update. Required. Read Only. * * @param {string} securitygroup.name * Name of the security group. Required. * * @param {string} securitygroup.description * Description of the security group. Optional. * * @returns {Object} The result of the API call */ function updateSecurityGroup(securitygroup) { return apiService.patch( '/api/network/securitygroups/' + securitygroup.id + '/', securitygroup) .error(function () { toastService.add('error', gettext('Unable to update the security group.')); }); } ", query: query,385,2
openstack%2Fhorizon~master~Ia275d0c765d05016e271fb28cc7bc2a51bf8dbea,openstack/horizon,master,Ia275d0c765d05016e271fb28cc7bc2a51bf8dbea,Add angular security groups panel,ABANDONED,2018-01-21 16:51:51.000000000,2021-08-04 01:35:25.000000000,,"[{'_account_id': 1736}, {'_account_id': 22348}, {'_account_id': 24056}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-01-21 16:51:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/770f9f5126cc25160de350d7b1a4035ee273d20a', 'message': ""Add angular security groups panel\n\nThis patch adds an angular security groups table.\n\nTo be added in subsequent patches:\n  - Create Action\n  - Delete Action\n  - Edit Action\n  - Manage security group rules\n    a) List security groups rules\n    b) Create security group rule\n    c) Delete security group rule\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: Ia275d0c765d05016e271fb28cc7bc2a51bf8dbea\nImplements: blueprint ng-security-groups\n""}, {'number': 2, 'created': '2018-01-22 17:32:16.000000000', 'files': ['openstack_dashboard/static/app/core/security_groups/security-groups.module.spec.js', 'openstack_dashboard/dashboards/project/security_groups/urls.py', 'openstack_dashboard/static/app/core/core.module.js', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/security_groups/panel.html', 'doc/source/configuration/settings.rst', 'openstack_dashboard/settings.py', 'openstack_dashboard/static/app/core/security_groups/security-groups.service.js', 'openstack_dashboard/static/app/core/security_groups/security-groups.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/security-groups.module.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/3297a5eeb99b14fa4e2214585f8066f92605e9ca', 'message': ""Add angular security groups panel\n\nThis patch adds an angular security groups table.\n\nTo be added in subsequent patches:\n  - Create Action\n  - Delete Action\n  - Edit Action\n  - Manage security group rules\n    a) List security groups rules\n    b) Create security group rule\n    c) Delete security group rule\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: Ia275d0c765d05016e271fb28cc7bc2a51bf8dbea\nImplements: blueprint ng-security-groups\n""}]",0,536144,3297a5eeb99b14fa4e2214585f8066f92605e9ca,10,4,2,24056,,,0,"Add angular security groups panel

This patch adds an angular security groups table.

To be added in subsequent patches:
  - Create Action
  - Delete Action
  - Edit Action
  - Manage security group rules
    a) List security groups rules
    b) Create security group rule
    c) Delete security group rule

To test, set 'security_groups_panel' to True in settings.py

Change-Id: Ia275d0c765d05016e271fb28cc7bc2a51bf8dbea
Implements: blueprint ng-security-groups
",git fetch https://review.opendev.org/openstack/horizon refs/changes/44/536144/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/static/app/core/security_groups/security-groups.module.spec.js', 'openstack_dashboard/dashboards/project/security_groups/urls.py', 'openstack_dashboard/static/app/core/core.module.js', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/security_groups/panel.html', 'doc/source/configuration/settings.rst', 'openstack_dashboard/settings.py', 'openstack_dashboard/static/app/core/security_groups/security-groups.service.js', 'openstack_dashboard/static/app/core/security_groups/security-groups.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/security-groups.module.js']",10,770f9f5126cc25160de350d7b1a4035ee273d20a,bp/ng-security-groups,"/** * Copyright 2018 EasyStack, Inc. * * Licensed under the Apache License, Version 2.0 (the ""License""); you may * not use this file except in compliance with the License. You may obtain * a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the * License for the specific language governing permissions and limitations * under the License. */ (function() { 'use strict'; /** * @ngdoc overview * @ngname horizon.app.core.security_groups * * @description * Provides all of the services and widgets required * to support and display security groups related content. */ angular .module('horizon.app.core.security_groups', [ 'horizon.framework.conf', 'horizon.app.core' ]) .constant('horizon.app.core.security_groups.resourceType', 'OS::Neutron::SecurityGroup') .run(run) .config(config); run.$inject = [ 'horizon.app.core.security_groups.resourceType', 'horizon.app.core.security_groups.service', 'horizon.framework.conf.resource-type-registry.service' ]; function run(securityGroupResourceType, securityGroupsService, registry) { registry.getResourceType(securityGroupResourceType) .setNames(gettext('Security Group'), gettext('Security Groups')) .setProperties(securityGroupProperties()) .setListFunction(securityGroupsService.getSecurityGroupsPromise) .tableColumns .append({ id: 'name', priority: 1, sortDefault: true }) .append({ id: 'id', priority: 1 }) .append({ id: 'description', priority: 1 }); /** * Filtering - client-side MagicSearch * all facets for security groups table */ registry.getResourceType(securityGroupResourceType).filterFacets .append({ label: gettext('Name'), name: 'name', singleton: true }).append({ label: gettext('Security Group ID'), name: 'id', singleton: true }); } /** * @name securityGroupProperties * @description resource properties for security group module */ function securityGroupProperties() { return { name: gettext('Name'), id: gettext('Security Group ID'), description: {label: gettext('Description'), filters: ['noValue']} }; } config.$inject = [ '$windowProvider', '$routeProvider' ]; /** * @name config * @param {Object} $windowProvider * @param {Object} $routeProvider * @description Routes used by this module. * @returns {undefined} Returns nothing */ function config($windowProvider, $routeProvider) { var path = $windowProvider.$get().STATIC_URL + 'app/core/security_groups/'; $routeProvider.when('/project/security_groups', { templateUrl: path + 'panel.html' }); } })(); ",,319,16
openstack%2Fhorizon~master~I2d23ce19191d98ccd8d6b6b2bf88d3ddf14e58f3,openstack/horizon,master,I2d23ce19191d98ccd8d6b6b2bf88d3ddf14e58f3,Add angular create security group action,ABANDONED,2018-01-21 16:51:51.000000000,2021-08-04 01:35:11.000000000,,"[{'_account_id': 1736}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-01-21 16:51:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/a825846304d5ab84ce7c1b2f1d9856dc6790ff5b', 'message': ""Add angular create security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I2d23ce19191d98ccd8d6b6b2bf88d3ddf14e58f3\nPartial-Implements: blueprint ng-security-groups\n""}, {'number': 2, 'created': '2018-01-21 17:13:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/16b8fd0e973bd27280b1c4112e2f7eb314a44c59', 'message': ""Add angular create security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I2d23ce19191d98ccd8d6b6b2bf88d3ddf14e58f3\nPartial-Implements: blueprint ng-security-groups\n""}, {'number': 3, 'created': '2018-01-22 17:32:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/f1de2be6bd11892e2d40313268a6ac1d0520c0f1', 'message': ""Add angular create security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I2d23ce19191d98ccd8d6b6b2bf88d3ddf14e58f3\nPartial-Implements: blueprint ng-security-groups\n""}, {'number': 4, 'created': '2018-01-22 18:19:37.000000000', 'files': ['openstack_dashboard/api/rest/network.py', 'openstack_dashboard/static/app/core/security_groups/security-group.schema.spec.js', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/actions/create.description.html', 'openstack_dashboard/static/app/core/security_groups/security-group.schema.js', 'openstack_dashboard/test/unit/api/rest/test_network.py', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.spec.js', 'openstack_dashboard/static/app/core/security_groups/security-groups.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/create.service.spec.js', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/create.service.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/55cc646d4d9f8ab16b1dbbdbecc0ee7a62ec2a42', 'message': ""Add angular create security group action\n\nTo test, set 'security_groups_panel' to True in settings.py\n\nChange-Id: I2d23ce19191d98ccd8d6b6b2bf88d3ddf14e58f3\nPartial-Implements: blueprint ng-security-groups\n""}]",0,536145,55cc646d4d9f8ab16b1dbbdbecc0ee7a62ec2a42,11,3,4,24056,,,0,"Add angular create security group action

To test, set 'security_groups_panel' to True in settings.py

Change-Id: I2d23ce19191d98ccd8d6b6b2bf88d3ddf14e58f3
Partial-Implements: blueprint ng-security-groups
",git fetch https://review.opendev.org/openstack/horizon refs/changes/45/536145/4 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/rest/network.py', 'openstack_dashboard/static/app/core/security_groups/security-group.schema.spec.js', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.spec.js', 'openstack_dashboard/static/app/core/security_groups/security-group.schema.js', 'openstack_dashboard/test/unit/api/rest/test_network.py', 'openstack_dashboard/static/app/core/openstack-service-api/security-group.service.js', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.spec.js', 'openstack_dashboard/static/app/core/security_groups/security-groups.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/create.service.spec.js', 'releasenotes/notes/bp-ng-security-groups-c28605e90360f821.yaml', 'openstack_dashboard/static/app/core/security_groups/actions/actions.module.js', 'openstack_dashboard/static/app/core/security_groups/actions/create.service.js']",12,a825846304d5ab84ce7c1b2f1d9856dc6790ff5b,bp/ng-security-groups,"/** * Copyright 2018 EasyStack, Inc. * * Licensed under the Apache License, Version 2.0 (the ""License""); you may * not use this file except in compliance with the License. You may obtain * a copy of the License at * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the * License for the specific language governing permissions and limitations * under the License. */ (function() { 'use strict'; angular .module('horizon.app.core.security_groups') .factory('horizon.app.core.security_groups.actions.create.service', createService); createService.$inject = [ 'horizon.app.core.openstack-service-api.security-group', 'horizon.app.core.security_groups.resourceType', 'horizon.app.core.security_groups.securitygroup-schema', 'horizon.framework.util.actions.action-result.service', 'horizon.framework.widgets.form.ModalFormService', 'horizon.framework.widgets.toast.service', 'horizon.framework.util.q.extensions' ]; /** * @ngDoc factory * @name horizon.app.core.security_groups.actions.create.service * @Description A service to open the security group wizard. */ function createService( securityGroupApi, resourceType, schema, actionResultService, modalFormService, toast, $qExtensions ) { var message = { success: gettext('Security Group %s was successfully created.') }; return { allowed: allowed, perform: perform, submit: submit }; ////////////// function allowed() { return $qExtensions.booleanAsPromise(true); } function perform() { var model = {name: ''}; var createForm = [ 'name', { key: 'description', type: 'textarea' } ]; var config = { title: gettext('Create Security Group'), schema: schema, form: createForm, model: model }; return modalFormService.open(config).then(submit); } function submit(context) { return securityGroupApi.createSecurityGroup(context.model).then(success); } function success(response) { var securitygroup = response.data; toast.add('success', interpolate(message.success, [securitygroup.name])); return actionResultService.getActionResult() .created(resourceType, securitygroup.id) .result; } } })(); ",,446,1
openstack%2Fhorizon~master~If9a96df08f17b5a0cedaf0d146ec1714f73286f5,openstack/horizon,master,If9a96df08f17b5a0cedaf0d146ec1714f73286f5,Disable create and import keypair button when keypair quota exceeded,ABANDONED,2017-08-10 09:25:32.000000000,2021-08-04 01:34:53.000000000,,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 8648}, {'_account_id': 14151}, {'_account_id': 22348}, {'_account_id': 24056}, {'_account_id': 29313}]","[{'number': 1, 'created': '2017-08-10 09:25:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/c78932408d2e5b596379085622e571a00e1f84c2', 'message': 'Disable create and import keypair button when keypair quota exceeded\n\nNow in angular create instance page, we can create or import keypair,\nsometimes if keypair quota exceeded, it will cause the failure of the\nAPI calls, and return ""Quota exceeded, too many key pairs. (HTTP 403)"".\nSo, like the keypairs panel, also add the keypair quota check in\nangular create instance page.\n\nChange-Id: If9a96df08f17b5a0cedaf0d146ec1714f73286f5\nCloses-Bug:#1709765\n'}, {'number': 2, 'created': '2017-08-10 09:56:06.000000000', 'files': ['openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/keypair/keypair.controller.js', 'openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/keypair/keypair.html'], 'web_link': 'https://opendev.org/openstack/horizon/commit/83b95a9ee5008fca2317cd494016d80de83c2b8f', 'message': 'Disable create and import keypair button when keypair quota exceeded\n\nNow in angular create instance page, we can create or import keypair,\nsometimes if keypair quota exceeded, it will cause the failure of the\nAPI calls, and return ""Quota exceeded, too many key pairs. (HTTP 403)"".\nSo, like the keypairs panel, also add the keypair quota check in\nangular create instance page.\n\nChange-Id: If9a96df08f17b5a0cedaf0d146ec1714f73286f5\nCloses-Bug:#1709765\n'}]",4,492445,83b95a9ee5008fca2317cd494016d80de83c2b8f,22,7,2,24056,,,0,"Disable create and import keypair button when keypair quota exceeded

Now in angular create instance page, we can create or import keypair,
sometimes if keypair quota exceeded, it will cause the failure of the
API calls, and return ""Quota exceeded, too many key pairs. (HTTP 403)"".
So, like the keypairs panel, also add the keypair quota check in
angular create instance page.

Change-Id: If9a96df08f17b5a0cedaf0d146ec1714f73286f5
Closes-Bug:#1709765
",git fetch https://review.opendev.org/openstack/horizon refs/changes/45/492445/2 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/keypair/keypair.controller.js', 'openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/keypair/keypair.html']",2,c78932408d2e5b596379085622e571a00e1f84c2,bug/1709765," ng-disabled=""!ctrl.maxKeypairs || (ctrl.maxKeypairs !== -1 && ctrl.tableData.available.length >= ctrl.maxKeypairs)"" <i ng-show=""ctrl.maxKeypairs !== -1 && ctrl.tableData.available.length >= ctrl.maxKeypairs""> <translate>(Quota exceeded)</translate> </i> ng-disabled=""!ctrl.maxKeypairs || (ctrl.maxKeypairs !== -1 && ctrl.tableData.available.length >= ctrl.maxKeypairs)"" <i ng-show=""ctrl.maxKeypairs !== -1 && ctrl.tableData.available.length >= ctrl.maxKeypairs""> <translate>(Quota exceeded)</translate> </i>",,27,0
openstack%2Fhorizon~master~I8e677ac734091a4f5ea86788b7471be1f6bf07d1,openstack/horizon,master,I8e677ac734091a4f5ea86788b7471be1f6bf07d1,Add angular server groups admin panel,ABANDONED,2018-04-28 15:57:50.000000000,2021-08-04 01:34:33.000000000,,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 22348}, {'_account_id': 24056}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-04-28 15:57:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/58c47f15fef02cf4bb9898fe5ecd5e6b2fd37251', 'message': 'Add angular server group admin panel\n\nTODO:\n  1. Add releasenotes for this feature.\n  2. Javascript part code needs to add UT.\n\nChange-Id: I8e677ac734091a4f5ea86788b7471be1f6bf07d1\nImplements: blueprint bp/ng-server-groups\n'}, {'number': 2, 'created': '2018-04-28 16:26:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/4fe58b815fc398194c11dda9bf7f89b0f6d69410', 'message': 'Add angular server groups admin panel\n\nTODO:\n  1. Add releasenotes for this feature.\n  2. Javascript part code needs to add UT.\n\nChange-Id: I8e677ac734091a4f5ea86788b7471be1f6bf07d1\nImplements: blueprint ng-server-groups\n'}, {'number': 3, 'created': '2018-05-05 14:35:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/631c27dd2b7cd04588ef4f9cc065152ac173eeb9', 'message': 'Add angular server groups admin panel\n\nAdd server groups panel under Admin->Compute panel group.\nThe server groups panel contains delete action and its details\npage (the details page contains the basic details of the\nserver group and server group members details)\n\nChange-Id: I8e677ac734091a4f5ea86788b7471be1f6bf07d1\nImplements: blueprint ng-server-groups\n'}, {'number': 4, 'created': '2018-05-05 14:53:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/0bde7441796d04365e49ed4edc7e6936d21b7764', 'message': 'Add angular server groups admin panel\n\nAdd server groups panel under Admin->Compute panel group.\nThe server groups panel contains delete action and its details\npage (the details page contains the basic details of the\nserver group and server group members details)\n\nChange-Id: I8e677ac734091a4f5ea86788b7471be1f6bf07d1\nImplements: blueprint ng-server-groups\n'}, {'number': 5, 'created': '2018-05-11 08:16:14.000000000', 'files': ['openstack_dashboard/static/app/core/server_groups/server-groups.module.js', 'openstack_dashboard/dashboards/admin/server_groups/__init__.py', 'openstack_dashboard/dashboards/project/server_groups/panel.py', 'openstack_dashboard/static/app/core/server_groups/admin-panel.html', 'openstack_dashboard/dashboards/admin/server_groups/panel.py', 'openstack_dashboard/static/app/core/openstack-service-api/nova.service.spec.js', 'releasenotes/notes/bp-ng-server-groups-c60849796a273138.yaml', 'openstack_dashboard/api/rest/nova.py', 'openstack_dashboard/test/settings.py', 'openstack_dashboard/dashboards/admin/server_groups/urls.py', 'openstack_dashboard/static/app/core/openstack-service-api/nova.service.js', 'openstack_dashboard/static/app/core/server_groups/actions/create.action.service.js', 'openstack_dashboard/enabled/_2170_admin_server_groups_panel.py', 'openstack_dashboard/static/app/core/server_groups/details/overview.controller.js', 'openstack_dashboard/static/app/core/server_groups/server-groups.service.js', 'openstack_dashboard/test/unit/api/rest/test_nova.py', 'openstack_dashboard/test/unit/api/test_nova.py', 'openstack_dashboard/api/nova.py', 'openstack_dashboard/static/app/core/server_groups/server-groups.service.spec.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/e16d6956894e21968d8571e9370125cb9b955330', 'message': 'Add angular server groups admin panel\n\nAdd server groups panel under Admin->Compute panel group.\nThe server groups panel contains delete action and its details\npage (the details page contains the basic details of the\nserver group and server group members details)\n\nChange-Id: I8e677ac734091a4f5ea86788b7471be1f6bf07d1\nImplements: blueprint ng-server-groups\n'}]",15,565033,e16d6956894e21968d8571e9370125cb9b955330,19,5,5,24056,,,0,"Add angular server groups admin panel

Add server groups panel under Admin->Compute panel group.
The server groups panel contains delete action and its details
page (the details page contains the basic details of the
server group and server group members details)

Change-Id: I8e677ac734091a4f5ea86788b7471be1f6bf07d1
Implements: blueprint ng-server-groups
",git fetch https://review.opendev.org/openstack/horizon refs/changes/33/565033/2 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/static/app/core/server_groups/server-groups.module.js', 'openstack_dashboard/dashboards/admin/server_groups/__init__.py', 'openstack_dashboard/dashboards/project/server_groups/panel.py', 'openstack_dashboard/static/app/core/server_groups/admin-panel.html', 'openstack_dashboard/dashboards/admin/server_groups/panel.py', 'openstack_dashboard/static/app/core/openstack-service-api/nova.service.spec.js', 'openstack_dashboard/api/rest/nova.py', 'openstack_dashboard/dashboards/admin/server_groups/urls.py', 'openstack_dashboard/static/app/core/openstack-service-api/nova.service.js', 'openstack_dashboard/static/app/core/server_groups/actions/create.action.service.js', 'openstack_dashboard/enabled/_2170_admin_server_groups_panel.py', 'openstack_dashboard/static/app/core/server_groups/details/overview.controller.js', 'openstack_dashboard/static/app/core/server_groups/server-groups.service.js', 'openstack_dashboard/test/unit/api/rest/test_nova.py', 'openstack_dashboard/test/unit/api/test_nova.py', 'openstack_dashboard/api/nova.py']",16,58c47f15fef02cf4bb9898fe5ecd5e6b2fd37251,bp/ng-server-groups,"def server_group_list(request, all_projects=False): microversion = get_microversion(request, ""servergroup_user_info"") return novaclient(request, version=microversion).server_groups.list( all_projects=all_projects)",def server_group_list(request): return novaclient(request).server_groups.list(),241,55
openstack%2Fhorizon~master~I4c88c7f47c305026a5759122fb8e82cdd0c753fb,openstack/horizon,master,I4c88c7f47c305026a5759122fb8e82cdd0c753fb,Hide some actions when the instance is locked for non-admin users,ABANDONED,2017-10-14 14:04:51.000000000,2021-08-04 01:33:54.000000000,,"[{'_account_id': 3}, {'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 22348}, {'_account_id': 23866}, {'_account_id': 24056}, {'_account_id': 29313}]","[{'number': 1, 'created': '2017-10-14 14:04:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/b3d538e5af016f55282d4923fe87e13c5787cdce', 'message': 'Hide some actions when the instance is locked for non-admin users\n\nWhen the instance is locked, the following actions are not allowed for\nnon-admin users.\n\nActions: StartInstance, ConfirmResize, RevertResize, AttachInterface,\nDetachInterface, AttachVolume, DetachVolume, UpdateMetadata,\nTogglePause, ToggleSuspend, ToggleShelve, ResizeLink,\nSoftRebootInstance, RebootInstance, StopInstance, RebuildInstance,\nDeleteInstance.\n\nThis patch fixes the actions of the project-instances, project-volumes\npage, hide the actions when the instance is locked.\n\nChange-Id: I4c88c7f47c305026a5759122fb8e82cdd0c753fb\nCloses-Bug:#1433847\n'}, {'number': 2, 'created': '2017-10-27 13:28:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/7f80e9c31722a3e8e4df0d554852a3dffcccaf22', 'message': 'Hide some actions when the instance is locked for non-admin users\n\nWhen the instance is locked, the following actions are not allowed for\nnon-admin users.\n\nActions: StartInstance, ConfirmResize, RevertResize, AttachInterface,\nDetachInterface, AttachVolume, DetachVolume, UpdateMetadata,\nTogglePause, ToggleSuspend, ToggleShelve, ResizeLink,\nSoftRebootInstance, RebootInstance, StopInstance, RebuildInstance,\nDeleteInstance.\n\nThis patch fixes the actions of the project-instances, project-volumes\npage, hide the actions when the instance is locked.\n\nChange-Id: I4c88c7f47c305026a5759122fb8e82cdd0c753fb\nCloses-Bug:#1433847\nCloses-Bug:#1573566\n'}, {'number': 3, 'created': '2017-12-16 05:01:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/ef33d05385958fc0530c0507475cc699f20973b3', 'message': 'Hide some actions when the instance is locked for non-admin users\n\nWhen the instance is locked, the following actions are not allowed for\nnon-admin users.\n\nActions:\n - StartInstance and StopInstance\n - RebootInstance and SoftRebootInstance\n - ResizeLink and ConfirmResize and RevertResize\n - AttachInterface and DetachInterface\n - AttachVolume and DetachVolume\n - UpdateMetadata\n - TogglePause, ToggleSuspend and ToggleShelve\n - RebuildInstance\n - DeleteInstance\n\nThis patch fixes the actions of the project-instances, project-volumes\npage, hide the actions when the instance is locked.\n\nChange-Id: I4c88c7f47c305026a5759122fb8e82cdd0c753fb\nCloses-Bug:#1433847\nCloses-Bug:#1573566\n'}, {'number': 4, 'created': '2017-12-16 08:48:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/3a37ae2a0ac0a37c03fd581fb6b3c4980cbbda33', 'message': 'Hide some actions when the instance is locked for non-admin users\n\nWhen the instance is locked, the following actions are not allowed for\nnon-admin users.\n\nActions:\n - StartInstance and StopInstance\n - RebootInstance and SoftRebootInstance\n - ResizeLink and ConfirmResize and RevertResize\n - AttachInterface and DetachInterface\n - AttachVolume and DetachVolume\n - UpdateMetadata\n - TogglePause, ToggleSuspend and ToggleShelve\n - RebuildInstance\n - DeleteInstance\n\nThis patch fixes the actions of the project-instances, project-volumes\npage, hide the actions when the instance is locked.\n\nChange-Id: I4c88c7f47c305026a5759122fb8e82cdd0c753fb\nCloses-Bug:#1433847\nCloses-Bug:#1573566\n'}, {'number': 5, 'created': '2018-05-05 15:51:41.000000000', 'files': ['openstack_dashboard/api/cinder.py', 'openstack_dashboard/dashboards/project/volumes/tables.py', 'openstack_dashboard/dashboards/project/instances/tables.py', 'openstack_dashboard/dashboards/project/volumes/forms.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/241feabdff8f5610ba158baa9ce18dbd49b3ed46', 'message': 'Hide some actions when the instance is locked for non-admin users\n\nWhen the instance is locked, the following actions are not allowed for\nnon-admin users.\n\nActions:\n - StartInstance and StopInstance\n - RebootInstance and SoftRebootInstance\n - ResizeLink and ConfirmResize and RevertResize\n - AttachInterface and DetachInterface\n - AttachVolume and DetachVolume\n - UpdateMetadata\n - TogglePause, ToggleSuspend and ToggleShelve\n - RebuildInstance\n - DeleteInstance\n\nThis patch fixes the actions of the project-instances, project-volumes\npage, hide the actions when the instance is locked.\n\nChange-Id: I4c88c7f47c305026a5759122fb8e82cdd0c753fb\nCloses-Bug:#1433847\nCloses-Bug:#1573566\n'}]",8,512019,241feabdff8f5610ba158baa9ce18dbd49b3ed46,27,7,5,24056,,,0,"Hide some actions when the instance is locked for non-admin users

When the instance is locked, the following actions are not allowed for
non-admin users.

Actions:
 - StartInstance and StopInstance
 - RebootInstance and SoftRebootInstance
 - ResizeLink and ConfirmResize and RevertResize
 - AttachInterface and DetachInterface
 - AttachVolume and DetachVolume
 - UpdateMetadata
 - TogglePause, ToggleSuspend and ToggleShelve
 - RebuildInstance
 - DeleteInstance

This patch fixes the actions of the project-instances, project-volumes
page, hide the actions when the instance is locked.

Change-Id: I4c88c7f47c305026a5759122fb8e82cdd0c753fb
Closes-Bug:#1433847
Closes-Bug:#1573566
",git fetch https://review.opendev.org/openstack/horizon refs/changes/19/512019/4 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/cinder.py', 'openstack_dashboard/dashboards/project/volumes/tables.py', 'openstack_dashboard/dashboards/project/instances/tables.py', 'openstack_dashboard/dashboards/project/volumes/forms.py']",4,b3d538e5af016f55282d4923fe87e13c5787cdce,bug/1433847," if (not tables.is_locked_and_not_admin(self.request, instance) and instance.status in tables.VOLUME_ATTACH_READY_STATES and not any(instance.id == att[""server_id""] for att in volume.attachments)):"," if instance.status in tables.VOLUME_ATTACH_READY_STATES and \ not any(instance.id == att[""server_id""] for att in volume.attachments):",73,31
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I474a5da79ebd570aa1fe3e763e8aaedbdbd09879,openstack/tripleo-heat-templates,stable/wallaby,I474a5da79ebd570aa1fe3e763e8aaedbdbd09879,Wire up renamed upgrade periodic template,MERGED,2021-07-27 15:24:10.000000000,2021-08-04 01:27:18.000000000,2021-08-04 01:27:18.000000000,"[{'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-27 15:24:10.000000000', 'files': ['zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/736283a0a5fde13e98e550ad6d791b62c92e471c', 'message': 'Wire up renamed upgrade periodic template\n\nThe template being wired up here is added in depends-on by renaming\nthe existing periodic upgrade templates. See [1] for the context,\nbut the result is we will now only run these jobs once in periodic.\n\n[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274\nDepends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92\n\nChange-Id: I474a5da79ebd570aa1fe3e763e8aaedbdbd09879\n'}]",0,802540,736283a0a5fde13e98e550ad6d791b62c92e471c,19,4,1,8449,,,0,"Wire up renamed upgrade periodic template

The template being wired up here is added in depends-on by renaming
the existing periodic upgrade templates. See [1] for the context,
but the result is we will now only run these jobs once in periodic.

[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274
Depends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92

Change-Id: I474a5da79ebd570aa1fe3e763e8aaedbdbd09879
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/40/802540/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/layout.yaml'],1,736283a0a5fde13e98e550ad6d791b62c92e471c,upstream-periodic-run-once, - tripleo-periodic-upgrades-wallaby-pipeline,,1,0
openstack%2Fpython-mistralclient~master~I47931bdf8bbccb940d4c98c47f16a6eef27c026a,openstack/python-mistralclient,master,I47931bdf8bbccb940d4c98c47f16a6eef27c026a,"Allow enforcing usage of ""raw"" definitions",MERGED,2021-07-15 14:10:41.000000000,2021-08-04 00:33:02.000000000,2021-08-04 00:31:41.000000000,"[{'_account_id': 841}, {'_account_id': 15895}, {'_account_id': 19134}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-15 14:10:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-mistralclient/commit/af4fecb4739ac4565a7e58d805ac23577a7eb725', 'message': 'Allow enforcing usage of ""raw"" definitions\n\nSince the chage 72a6bc1ad1461e20b8ccc7ef41898dd13067c6dc was merged,\nmistralclient tries to determine if the value passed in is a definition\nfile path name or file URI, or the actual definition.\nHowever this behavior causes problem when the client is used in server\nside and results in allowing access to server files or any contents\nin internal servers.\n\nThis change introduces the new enforce_raw_definitions variable to\ndisable that fallback behavior and ensure that client treats input\nas raw contents.\n\nRelated-Bug: #1931558\nChange-Id: I47931bdf8bbccb940d4c98c47f16a6eef27c026a\n'}, {'number': 2, 'created': '2021-07-15 14:22:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-mistralclient/commit/28db247614fec808ab2c75ba74653d4ac1d2bb8d', 'message': 'Allow enforcing usage of ""raw"" definitions\n\nSince the chage 72a6bc1ad1461e20b8ccc7ef41898dd13067c6dc was merged,\nmistralclient tries to determine if the value passed in is a definition\nfile path name or file URI, or the actual definition.\nHowever this behavior causes problem when the client is used in server\nside and results in allowing access to server files or any contents\nin internal servers.\n\nThis change introduces the new enforce_raw_definitions variable to\ndisable that fallback behavior and ensure that client treats input\nas raw contents.\n\nRelated-Bug: #1931558\nChange-Id: I47931bdf8bbccb940d4c98c47f16a6eef27c026a\n'}, {'number': 3, 'created': '2021-07-15 15:19:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-mistralclient/commit/0c5ac3876ac28168643342b91cec5be08f8a2f73', 'message': 'Allow enforcing usage of ""raw"" definitions\n\nSince the chage 72a6bc1ad1461e20b8ccc7ef41898dd13067c6dc was merged,\nmistralclient tries to determine if the value passed in is a definition\nfile path name or file URI, or the actual definition.\nHowever this behavior causes problem when the client is used in server\nside and results in allowing access to server files or any contents\nin internal servers.\n\nThis change introduces the new enforce_raw_definitions variable to\ndisable that fallback behavior and ensure that client treats input\nas raw contents.\n\nRelated-Bug: #1931558\nChange-Id: I47931bdf8bbccb940d4c98c47f16a6eef27c026a\n'}, {'number': 4, 'created': '2021-07-15 15:20:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-mistralclient/commit/506ca1177399c84aa947ac1e873c67ca7048c056', 'message': 'Allow enforcing usage of ""raw"" definitions\n\nSince the chage 72a6bc1ad1461e20b8ccc7ef41898dd13067c6dc was merged,\nmistralclient tries to determine if the value passed in is a definition\nfile path name or file URI, or the actual definition.\nHowever this behavior causes problem when the client is used in server\nside and results in allowing access to server files or any contents\nin internal servers.\n\nThis change introduces the new enforce_raw_definitions variable to\ndisable that fallback behavior and ensure that client treats input\nas raw contents.\n\nRelated-Bug: #1931558\nChange-Id: I47931bdf8bbccb940d4c98c47f16a6eef27c026a\n'}, {'number': 5, 'created': '2021-07-15 16:02:33.000000000', 'files': ['mistralclient/api/v2/actions.py', 'mistralclient/api/v2/workbooks.py', 'mistralclient/api/base.py', 'mistralclient/api/v2/workflows.py', 'mistralclient/api/v2/client.py', 'mistralclient/api/v2/code_sources.py', 'releasenotes/notes/enforce_raw_definitions-94433339a63d15f8.yaml', 'mistralclient/api/v2/environments.py'], 'web_link': 'https://opendev.org/openstack/python-mistralclient/commit/ab54cb9ae576c2b29c7cd9a9628f3908aaa3e0ee', 'message': 'Allow enforcing usage of ""raw"" definitions\n\nSince the chage 72a6bc1ad1461e20b8ccc7ef41898dd13067c6dc was merged,\nmistralclient tries to determine if the value passed in is a definition\nfile path name or file URI, or the actual definition.\nHowever this behavior causes problem when the client is used in server\nside and results in allowing access to server files or any contents\nin internal servers.\n\nThis change introduces the new enforce_raw_definitions variable to\ndisable that fallback behavior and ensure that client treats input\nas raw contents.\n\nRelated-Bug: #1931558\nChange-Id: I47931bdf8bbccb940d4c98c47f16a6eef27c026a\n'}]",6,800950,ab54cb9ae576c2b29c7cd9a9628f3908aaa3e0ee,23,4,5,9816,,,0,"Allow enforcing usage of ""raw"" definitions

Since the chage 72a6bc1ad1461e20b8ccc7ef41898dd13067c6dc was merged,
mistralclient tries to determine if the value passed in is a definition
file path name or file URI, or the actual definition.
However this behavior causes problem when the client is used in server
side and results in allowing access to server files or any contents
in internal servers.

This change introduces the new enforce_raw_definitions variable to
disable that fallback behavior and ensure that client treats input
as raw contents.

Related-Bug: #1931558
Change-Id: I47931bdf8bbccb940d4c98c47f16a6eef27c026a
",git fetch https://review.opendev.org/openstack/python-mistralclient refs/changes/50/800950/1 && git format-patch -1 --stdout FETCH_HEAD,"['mistralclient/api/v2/actions.py', 'mistralclient/api/v2/workbooks.py', 'mistralclient/api/base.py', 'mistralclient/api/v2/workflows.py', 'mistralclient/api/v2/client.py', 'releasenotes/notes/eoforce_raw_definitions-c5e24e712a73d9a0.yaml', 'mistralclient/api/v2/code_sources.py', 'mistralclient/api/v2/environments.py']",8,af4fecb4739ac4565a7e58d805ac23577a7eb725,bug/1931558, kwargs = utils.load_content(self.get_contents_if_file(file)) kwargs = utils.load_content(self.get_contents_if_file(file)), kwargs = utils.load_content(utils.get_contents_if_file(file)) kwargs = utils.load_content(utils.get_contents_if_file(file)),59,42
openstack%2Fdiskimage-builder~master~Ic1434bb2fe7301086cf11ba6bd7f2ee187c5e6c8,openstack/diskimage-builder,master,Ic1434bb2fe7301086cf11ba6bd7f2ee187c5e6c8,Permit specification of extra bootstrap packages,MERGED,2021-07-27 17:47:22.000000000,2021-08-03 23:14:31.000000000,2021-08-03 23:13:04.000000000,"[{'_account_id': 6469}, {'_account_id': 6618}, {'_account_id': 7118}, {'_account_id': 10273}, {'_account_id': 11628}, {'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 32592}]","[{'number': 1, 'created': '2021-07-27 17:47:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/81031626d832a31a940831f386bf003597602c3e', 'message': 'Permit specification of extra bootstrap packages\n\nThis change permits the yum-minimal element to be used in downstream\ncustom distributions, which may have additional packages containing repo\nconfig or GPG keys needed.\n\nThis could also be utilized at a later time to move the\ndistribution-specific logic in this method to each distribution element\nseparately.\n\nChange-Id: Ic1434bb2fe7301086cf11ba6bd7f2ee187c5e6c8\n'}, {'number': 2, 'created': '2021-07-27 20:47:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/c97bfcecff9f51b48d5a76c2783ea6f5cb36536e', 'message': 'Permit specification of extra bootstrap packages\n\nThis change permits the yum-minimal element to be used in downstream\ncustom distributions, which may have additional packages containing repo\nconfig or GPG keys needed.\n\nThis could also be utilized at a later time to move the\ndistribution-specific logic in this method to each distribution element\nseparately.\n\nChange-Id: Ic1434bb2fe7301086cf11ba6bd7f2ee187c5e6c8\n'}, {'number': 3, 'created': '2021-08-02 18:57:32.000000000', 'files': ['diskimage_builder/elements/yum-minimal/root.d/08-yum-chroot', 'releasenotes/notes/specify-bootstrap-packages-via-env-22f5c6982c09f16a.yaml', 'diskimage_builder/elements/yum-minimal/README.rst'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/91da6ab885add99b9ed8ceee3bea195a3fd6b03e', 'message': 'Permit specification of extra bootstrap packages\n\nThis change permits the yum-minimal element to be used in downstream\ncustom distributions, which may have additional packages containing repo\nconfig or GPG keys needed.\n\nThis could also be utilized at a later time to move the\ndistribution-specific logic in this method to each distribution element\nseparately.\n\nChange-Id: Ic1434bb2fe7301086cf11ba6bd7f2ee187c5e6c8\n'}]",0,802592,91da6ab885add99b9ed8ceee3bea195a3fd6b03e,43,9,3,10342,,,0,"Permit specification of extra bootstrap packages

This change permits the yum-minimal element to be used in downstream
custom distributions, which may have additional packages containing repo
config or GPG keys needed.

This could also be utilized at a later time to move the
distribution-specific logic in this method to each distribution element
separately.

Change-Id: Ic1434bb2fe7301086cf11ba6bd7f2ee187c5e6c8
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/92/802592/2 && git format-patch -1 --stdout FETCH_HEAD,['diskimage_builder/elements/yum-minimal/root.d/08-yum-chroot'],1,81031626d832a31a940831f386bf003597602c3e,," packages=""${DIB_YUM_MINIMAL_BOOTSTRAP_PACKAGES} "" packages+=""basesystem filesystem setup """," packages=""basesystem filesystem setup "" ",2,2
openstack%2Fironic~stable%2Fwallaby~I76821c032180a58d0f99d31110fbe0f844c0cb3f,openstack/ironic,stable/wallaby,I76821c032180a58d0f99d31110fbe0f844c0cb3f,Ironic index docs/command check backport,MERGED,2021-05-24 19:55:26.000000000,2021-08-03 22:57:26.000000000,2021-08-03 22:55:02.000000000,"[{'_account_id': 4571}, {'_account_id': 10342}, {'_account_id': 22348}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-05-24 19:55:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/34546a2d267a6b3aaadddf6706971a8483aa2e9d', 'message': ""DNM: Ironic index docs/command check backport\n\nSecure RBAC, along with numerous periodics, and even some common API\naccess patterns heavily access the ironic database and sometimes cause\nqueries across multiple columns to match nodes to return.\n\nNone of this is bad, but what is bad is we didn't have indexes on these\ncolumns.\n\nThis change adds docs, and the schema upgrade to create the column\nindexes, and a release note to provide more visible documentation\nfor operators.\n\nIt must be stressed that this does *not* improve query times\nwhen all records are asked for on a database connection.\n\nAlso adds an upgrade check in to raise a warning for operator\nvisibility.\n\nStory: 2008863\nTask: 42392\nChange-Id: I76821c032180a58d0f99d31110fbe0f844c0cb3f\n(cherry picked from commit 205a8b3037b62cbae7f5385f4d9b9404a702414e)\n""}, {'number': 2, 'created': '2021-06-08 14:50:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/66afafbefb30c10bfd793197e88a579e40a10e59', 'message': 'Ironic index docs/command check backport\n\nSecure RBAC, along with numerous periodics, and even some common API\naccess patterns heavily access the ironic database and sometimes cause\nqueries across multiple columns to match nodes to return.\n\nThis change is largely intended to provide the upgrade check\ncall as well as the documentation in the Wallaby release\nof ironic so operators can locate it and add the indexes prior\nto the upgrade to ironic 18.0.\n\nStory: 2008863\nTask: 42392\nChange-Id: I76821c032180a58d0f99d31110fbe0f844c0cb3f\n(cherry picked from commit 205a8b3037b62cbae7f5385f4d9b9404a702414e)\n'}, {'number': 3, 'created': '2021-07-07 18:23:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8318f11bb5d61fa03bca6514d61710e240827cea', 'message': 'Ironic index docs/command check backport\n\nSecure RBAC, along with numerous periodics, and even some common API\naccess patterns heavily access the ironic database and sometimes cause\nqueries across multiple columns to match nodes to return.\n\nThis change is largely intended to provide the upgrade check\ncall as well as the documentation in the Wallaby release\nof ironic so operators can locate it and add the indexes prior\nto the upgrade to ironic 18.0.\n\nNote: This change includes the content from\nIfa9da65dc8df5bf9a369d6faeab310386dfd944a which includes a fix for\nthe status command and the upgrade script as to properly identify and\nraise visibility, where the original change to the status command\nfailed to include the actual value in the field to cause the\nstandard execution by the upgrade script.\n\nStory: 2008863\nTask: 42392\nChange-Id: I76821c032180a58d0f99d31110fbe0f844c0cb3f\n(cherry picked from commit 205a8b3037b62cbae7f5385f4d9b9404a702414e)\n'}, {'number': 4, 'created': '2021-07-07 21:35:39.000000000', 'files': ['devstack/lib/ironic', 'ironic/cmd/status.py', 'devstack/upgrade/upgrade.sh', 'doc/source/admin/tuning.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/e0d241fa4d593934d228f4b94c750752c2e60d3b', 'message': ""Ironic index docs/command check backport\n\nSecure RBAC, along with numerous periodics, and even some common API\naccess patterns heavily access the ironic database and sometimes cause\nqueries across multiple columns to match nodes to return.\n\nThis change is largely intended to provide the upgrade check\ncall as well as the documentation in the Wallaby release\nof ironic so operators can locate it and add the indexes prior\nto the upgrade to ironic 18.0.\n\nNote: This change includes the content from\nIfa9da65dc8df5bf9a369d6faeab310386dfd944a which includes a fix for\nthe status command and the upgrade script as to properly identify and\nraise visibility, where the original change to the status command\nfailed to include the actual value in the field to cause the\nstandard execution by the upgrade script. Also includes the same\nupgrade check handling for ironic-status command in the stable branch\ndevstack plugin as this change does raise an informational warning\nwhich is non-blocking to ironic's use on this branch to signal\nthat action may be advisable.\n\nStory: 2008863\nTask: 42392\nChange-Id: I76821c032180a58d0f99d31110fbe0f844c0cb3f\n(cherry picked from commit 205a8b3037b62cbae7f5385f4d9b9404a702414e)\n""}]",0,792873,e0d241fa4d593934d228f4b94c750752c2e60d3b,30,4,4,11655,,,0,"Ironic index docs/command check backport

Secure RBAC, along with numerous periodics, and even some common API
access patterns heavily access the ironic database and sometimes cause
queries across multiple columns to match nodes to return.

This change is largely intended to provide the upgrade check
call as well as the documentation in the Wallaby release
of ironic so operators can locate it and add the indexes prior
to the upgrade to ironic 18.0.

Note: This change includes the content from
Ifa9da65dc8df5bf9a369d6faeab310386dfd944a which includes a fix for
the status command and the upgrade script as to properly identify and
raise visibility, where the original change to the status command
failed to include the actual value in the field to cause the
standard execution by the upgrade script. Also includes the same
upgrade check handling for ironic-status command in the stable branch
devstack plugin as this change does raise an informational warning
which is non-blocking to ironic's use on this branch to signal
that action may be advisable.

Story: 2008863
Task: 42392
Change-Id: I76821c032180a58d0f99d31110fbe0f844c0cb3f
(cherry picked from commit 205a8b3037b62cbae7f5385f4d9b9404a702414e)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/73/792873/4 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/cmd/status.py', 'ironic/db/sqlalchemy/alembic/versions/ac00b586ab95_node_indexes.py', 'releasenotes/notes/create_node_indexes-841b679e6cf332fd.yaml', 'doc/source/admin/tuning.rst', 'ironic/db/sqlalchemy/models.py']",5,34546a2d267a6b3aaadddf6706971a8483aa2e9d,story/2008863-stable/wallaby," Index('owner_idx', 'owner'), Index('lessee_idx', 'lessee'), Index('driver_idx', 'driver'), Index('provision_state_idx', 'provision_state'), Index('reservation_idx', 'reservation'), Index('conductor_group_idx', 'conductor_group'), Index('resource_class_idx', 'resource_class'),",,202,0
openstack%2Fcinder-tempest-plugin~master~Id912c99943ad5a7e9826687417e3e5708b7fd9fd,openstack/cinder-tempest-plugin,master,Id912c99943ad5a7e9826687417e3e5708b7fd9fd,DNM:testing,ABANDONED,2021-04-22 17:23:47.000000000,2021-08-03 22:52:54.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-04-22 17:23:47.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/cinder-tempest-plugin/commit/0522f5fcc55b7e412b2a441117bb869082272cb0', 'message': 'DNM:testing\n\nDepends-On: https://review.opendev.org/c/openstack/requirements/+/787621\nChange-Id: Id912c99943ad5a7e9826687417e3e5708b7fd9fd\n'}]",0,787622,0522f5fcc55b7e412b2a441117bb869082272cb0,10,1,1,8556,,,0,"DNM:testing

Depends-On: https://review.opendev.org/c/openstack/requirements/+/787621
Change-Id: Id912c99943ad5a7e9826687417e3e5708b7fd9fd
",git fetch https://review.opendev.org/openstack/cinder-tempest-plugin refs/changes/22/787622/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,0522f5fcc55b7e412b2a441117bb869082272cb0,,#test tempest master installtion,,1,0
openstack%2Fcinder~master~I76b931cf87bfc03bb04914917c32595526f29945,openstack/cinder,master,I76b931cf87bfc03bb04914917c32595526f29945,[SVF]:Fix create volume on drp,ABANDONED,2021-08-03 17:28:30.000000000,2021-08-03 22:33:53.000000000,,[],"[{'number': 1, 'created': '2021-08-03 17:28:30.000000000', 'files': ['releasenotes/notes/bug-1924568-ibm-svf-fix_drp_vol_create_issue-d1b75c4befb0e993.yaml', 'cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/864797d67f9f7c29bfbb6a645b5f1d74e504cae1', 'message': '[SVF]:Fix create volume on drp\n\n[Spectrum Virtualize Family] While creating volumes on\ndata reduction pool, incorrect options were picked.\n\nThis patch fixes the issue by reading the data reduction\npool details correctly during intialization.\nCloses-Bug: #1924568\nChange-Id: I5a2914d77b85e4249774f6e366b93d8b997ea50f\n\nChange-Id: I76b931cf87bfc03bb04914917c32595526f29945\n'}]",0,803386,864797d67f9f7c29bfbb6a645b5f1d74e504cae1,4,0,1,32036,,,0,"[SVF]:Fix create volume on drp

[Spectrum Virtualize Family] While creating volumes on
data reduction pool, incorrect options were picked.

This patch fixes the issue by reading the data reduction
pool details correctly during intialization.
Closes-Bug: #1924568
Change-Id: I5a2914d77b85e4249774f6e366b93d8b997ea50f

Change-Id: I76b931cf87bfc03bb04914917c32595526f29945
",git fetch https://review.opendev.org/openstack/cinder refs/changes/86/803386/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1924568-ibm-svf-fix_drp_vol_create_issue-d1b75c4befb0e993.yaml', 'cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py']",2,864797d67f9f7c29bfbb6a645b5f1d74e504cae1,bug/1924568, is_dr_pool = pool_data.get('data_reduction').lower() == 'yes', if pool_data.get('data_reduction') == 'Yes': is_dr_pool = True elif pool_data.get('data_reduction') == 'No': is_dr_pool = False,7,4
openstack%2Fnova~stable%2Fussuri~Id3e4452883f6a3cf44ff58b39ded82e882e28c23,openstack/nova,stable/ussuri,Id3e4452883f6a3cf44ff58b39ded82e882e28c23,"Move 'check-cherry-picks' test to gate, n-v check",MERGED,2021-06-18 10:26:15.000000000,2021-08-03 22:29:14.000000000,2021-08-03 22:24:11.000000000,"[{'_account_id': 7166}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-18 10:26:15.000000000', 'files': ['.zuul.yaml', 'tox.ini', 'tools/check-cherry-picks.sh'], 'web_link': 'https://opendev.org/openstack/nova/commit/91314f7fbba312d4438fa446804f692d316512a8', 'message': ""Move 'check-cherry-picks' test to gate, n-v check\n\nThis currently runs in the 'check' pipeline, as part of the pep8 job,\nwhich causes otherwise perfectly valid backports to report as failing\nCI. There's no reason a stable core shouldn't be encouraged to review\nthese patches: we simply want to prevent them *merging* before their\nparent(s). Resolve this conflict by moving the check to separate voting\njob in the 'gate' pipeline as well as a non-voting job in the 'check'\npipeline to catch more obvious issues.\n\nNOTE(lyarwood): Conflicts as I1d6a2986fcb0435cfabdd104d202b65329909d2b\nand If6758c83a6bd95aefb7703529cbccd14e3adfee2 are not present on\nstable/ussuri.\n\nConflicts:\n  .zuul.yaml\n\nChange-Id: Id3e4452883f6a3cf44ff58b39ded82e882e28c23\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n(cherry picked from commit 98b01c9a59df4912f5a162c2c52d1f00c84d24c2)\n(cherry picked from commit fef0305abefbf165fecb883f03bce97f525a790a)\n(cherry picked from commit b7677ae08ae151858ecb0e67039e54bb3df89700)\n""}]",0,797050,91314f7fbba312d4438fa446804f692d316512a8,19,4,1,10135,,,0,"Move 'check-cherry-picks' test to gate, n-v check

This currently runs in the 'check' pipeline, as part of the pep8 job,
which causes otherwise perfectly valid backports to report as failing
CI. There's no reason a stable core shouldn't be encouraged to review
these patches: we simply want to prevent them *merging* before their
parent(s). Resolve this conflict by moving the check to separate voting
job in the 'gate' pipeline as well as a non-voting job in the 'check'
pipeline to catch more obvious issues.

NOTE(lyarwood): Conflicts as I1d6a2986fcb0435cfabdd104d202b65329909d2b
and If6758c83a6bd95aefb7703529cbccd14e3adfee2 are not present on
stable/ussuri.

Conflicts:
  .zuul.yaml

Change-Id: Id3e4452883f6a3cf44ff58b39ded82e882e28c23
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
(cherry picked from commit 98b01c9a59df4912f5a162c2c52d1f00c84d24c2)
(cherry picked from commit fef0305abefbf165fecb883f03bce97f525a790a)
(cherry picked from commit b7677ae08ae151858ecb0e67039e54bb3df89700)
",git fetch https://review.opendev.org/openstack/nova refs/changes/50/797050/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'tox.ini', 'tools/check-cherry-picks.sh']",3,91314f7fbba312d4438fa446804f692d316512a8,cherry-pick-in-gate-queue,,# Allow this script to be disabled by a simple env var if [ ${DISABLE_CHERRY_PICK_CHECK:-0} -eq 1 ]; then exit 0 fi ,23,8
openstack%2Fopenstack-helm-infra~master~I1129cf1669a96385d40a8930c7f35ec9b26a48c4,openstack/openstack-helm-infra,master,I1129cf1669a96385d40a8930c7f35ec9b26a48c4,DNM - Testing cinder multinode,ABANDONED,2021-03-02 20:05:59.000000000,2021-08-03 22:07:41.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-03-02 20:05:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b0d4bc8e989ee5d134c72b31ece1de5e23dbe0b2', 'message': 'DNM - Testing cinder multinode\n\nChange-Id: I1129cf1669a96385d40a8930c7f35ec9b26a48c4\n'}, {'number': 2, 'created': '2021-03-05 21:16:59.000000000', 'files': ['zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8149570dcbd7b12070d189073ad9ae63a192462e', 'message': 'DNM - Testing cinder multinode\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/779051\n\nChange-Id: I1129cf1669a96385d40a8930c7f35ec9b26a48c4\n'}]",0,778259,8149570dcbd7b12070d189073ad9ae63a192462e,11,1,2,21420,,,0,"DNM - Testing cinder multinode

Depends-on: https://review.opendev.org/c/openstack/openstack-helm/+/779051

Change-Id: I1129cf1669a96385d40a8930c7f35ec9b26a48c4
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/59/778259/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,b0d4bc8e989ee5d134c72b31ece1de5e23dbe0b2,cinder-multinode, - openstack-helm-multinode-cinder-train-ubuntu_bionic, templates: - publish-openstack-docs-pti - release-notes-jobs-python3 - openstack-helm-infra-bandit - openstack-helm-infra-aio-logging - openstack-helm-infra-aio-monitoring - openstack-helm-infra-openstack-support - openstack-helm-infra-openstack-support-ssl # NOTE(srwilkers): Disabling this job until issues with the kubeadm-aio # based deployments are addressed # - openstack-helm-infra-kubernetes-keystone-auth: # voting: false - openstack-helm-infra-metacontroller # NOTE(gagehugo): Disabling this job until it's fixed # - openstack-helm-infra-aio-podsecuritypolicy: # voting: false,1,16
openstack%2Fcinder~master~I59e1523ef8992a5cda4faec3e6b6f1e4bb6a928d,openstack/cinder,master,I59e1523ef8992a5cda4faec3e6b6f1e4bb6a928d,[SVF]:Fix create volume on drp,ABANDONED,2021-08-03 17:25:39.000000000,2021-08-03 21:45:47.000000000,,[],"[{'number': 1, 'created': '2021-08-03 17:25:39.000000000', 'files': ['releasenotes/notes/bug-1924568-ibm-svf-fix_drp_vol_create_issue-d1b75c4befb0e993.yaml', 'cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/ded2a9f267170b83d208285f898792192148a11e', 'message': '[SVF]:Fix create volume on drp\n\n[Spectrum Virtualize Family] While creating volumes on\ndata reduction pool, incorrect options were picked.\n\nThis patch fixes the issue by reading the data reduction\npool details correctly during intialization.\nCloses-Bug: #1924568\nChange-Id: I5a2914d77b85e4249774f6e366b93d8b997ea50f\n\nChange-Id: I59e1523ef8992a5cda4faec3e6b6f1e4bb6a928d\n'}]",0,803385,ded2a9f267170b83d208285f898792192148a11e,4,0,1,32036,,,0,"[SVF]:Fix create volume on drp

[Spectrum Virtualize Family] While creating volumes on
data reduction pool, incorrect options were picked.

This patch fixes the issue by reading the data reduction
pool details correctly during intialization.
Closes-Bug: #1924568
Change-Id: I5a2914d77b85e4249774f6e366b93d8b997ea50f

Change-Id: I59e1523ef8992a5cda4faec3e6b6f1e4bb6a928d
",git fetch https://review.opendev.org/openstack/cinder refs/changes/85/803385/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1924568-ibm-svf-fix_drp_vol_create_issue-d1b75c4befb0e993.yaml', 'cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py']",2,ded2a9f267170b83d208285f898792192148a11e,bug/1924568, is_dr_pool = pool_data.get('data_reduction').lower() == 'yes', if pool_data.get('data_reduction') == 'Yes': is_dr_pool = True elif pool_data.get('data_reduction') == 'No': is_dr_pool = False,7,4
openstack%2Fironic~stable%2Fwallaby~I7f004d40c1b8c617f9a456216df091e44d69693f,openstack/ironic,stable/wallaby,I7f004d40c1b8c617f9a456216df091e44d69693f,"Use shim-signed on Ubuntu, shim is empty now",MERGED,2021-08-03 13:23:07.000000000,2021-08-03 21:07:47.000000000,2021-08-03 21:05:52.000000000,"[{'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 13:23:07.000000000', 'files': ['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/db9649b6a7e3c9a0650448d2c4f509100c10b5df', 'message': 'Use shim-signed on Ubuntu, shim is empty now\n\nAlso fix the documentation to use the correct paths and versions.\n\nChange-Id: I7f004d40c1b8c617f9a456216df091e44d69693f\n(cherry picked from commit 294046befae669dacd159d9f26bcdd3bc8ff26c9)\n'}]",0,803337,db9649b6a7e3c9a0650448d2c4f509100c10b5df,10,2,1,10239,,,0,"Use shim-signed on Ubuntu, shim is empty now

Also fix the documentation to use the correct paths and versions.

Change-Id: I7f004d40c1b8c617f9a456216df091e44d69693f
(cherry picked from commit 294046befae669dacd159d9f26bcdd3bc8ff26c9)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/37/803337/1 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst']",3,db9649b6a7e3c9a0650448d2c4f509100c10b5df,, Ubuntu (18.04LTS and later):: Ubuntu (18.04LTS and later):: sudo cp /usr/lib/shim/shimx64.efi.signed /tftpboot/bootx64.efi, Ubuntu (16.04LTS and later):: Ubuntu (16.04LTS and later):: sudo cp /usr/lib/shim/shim.efi.signed /tftpboot/bootx64.efi,10,6
openstack%2Fhorizon~master~I9e9f353a61c9a4e0db4171e3b5d92137e6706228,openstack/horizon,master,I9e9f353a61c9a4e0db4171e3b5d92137e6706228,"Modified the percentage calculation of value. If total > 100, value = 100 - used; may cause unpredictable problems.",ABANDONED,2018-12-02 02:22:29.000000000,2021-08-03 20:37:43.000000000,,"[{'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-12-02 02:22:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/0318fe9b6e2e9fa56a0df5cc685dada80e68825e', 'message': 'Modified the percentage calculation of value. If total > 100, value = 100 - used; may cause unpredictable problems.\n\nChange-Id: I9e9f353a61c9a4e0db4171e3b5d92137e6706228\n'}, {'number': 2, 'created': '2018-12-10 10:53:05.000000000', 'files': ['openstack_dashboard/static/js/horizon.quota.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/8e93ab33d43f34707c893c0014e6505dc9e79fb6', 'message': 'Modified the percentage calculation of value. If total > 100, value = 100 - used; may cause unpredictable problems.\n\n\nI think (If total > 100 ,value = 100 - used) is not a good method to calculate\nthe proportion, the mothod I git review is a better one!\n\nChange-Id: I9e9f353a61c9a4e0db4171e3b5d92137e6706228\n'}]",2,621384,8e93ab33d43f34707c893c0014e6505dc9e79fb6,7,2,2,29075,,,0,"Modified the percentage calculation of value. If total > 100, value = 100 - used; may cause unpredictable problems.


I think (If total > 100 ,value = 100 - used) is not a good method to calculate
the proportion, the mothod I git review is a better one!

Change-Id: I9e9f353a61c9a4e0db4171e3b5d92137e6706228
",git fetch https://review.opendev.org/openstack/horizon refs/changes/84/621384/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack_dashboard/static/js/horizon.quota.js'],1,0318fe9b6e2e9fa56a0df5cc685dada80e68825e,, value = Number(value / total * 100).toFixed(2);, value = 100 - used_val;,1,1
openstack%2Fnova~stable%2Fvictoria~Id3e4452883f6a3cf44ff58b39ded82e882e28c23,openstack/nova,stable/victoria,Id3e4452883f6a3cf44ff58b39ded82e882e28c23,"Move 'check-cherry-picks' test to gate, n-v check",MERGED,2021-06-18 09:49:50.000000000,2021-08-03 20:31:49.000000000,2021-08-03 20:03:05.000000000,"[{'_account_id': 7166}, {'_account_id': 7634}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-18 09:49:50.000000000', 'files': ['.zuul.yaml', 'tox.ini', 'tools/check-cherry-picks.sh'], 'web_link': 'https://opendev.org/openstack/nova/commit/b7677ae08ae151858ecb0e67039e54bb3df89700', 'message': ""Move 'check-cherry-picks' test to gate, n-v check\n\nThis currently runs in the 'check' pipeline, as part of the pep8 job,\nwhich causes otherwise perfectly valid backports to report as failing\nCI. There's no reason a stable core shouldn't be encouraged to review\nthese patches: we simply want to prevent them *merging* before their\nparent(s). Resolve this conflict by moving the check to separate voting\njob in the 'gate' pipeline as well as a non-voting job in the 'check'\npipeline to catch more obvious issues.\n\nNOTE(lyarwood): Conflict as I672904e9bfb45a66a82331063c7d49c4bc0439df\nisn't present on stable/victoria.\n\nConflicts:\n  .zuul.yaml\n\nChange-Id: Id3e4452883f6a3cf44ff58b39ded82e882e28c23\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n(cherry picked from commit 98b01c9a59df4912f5a162c2c52d1f00c84d24c2)\n(cherry picked from commit fef0305abefbf165fecb883f03bce97f525a790a)\n""}]",0,797040,b7677ae08ae151858ecb0e67039e54bb3df89700,46,5,1,10135,,,0,"Move 'check-cherry-picks' test to gate, n-v check

This currently runs in the 'check' pipeline, as part of the pep8 job,
which causes otherwise perfectly valid backports to report as failing
CI. There's no reason a stable core shouldn't be encouraged to review
these patches: we simply want to prevent them *merging* before their
parent(s). Resolve this conflict by moving the check to separate voting
job in the 'gate' pipeline as well as a non-voting job in the 'check'
pipeline to catch more obvious issues.

NOTE(lyarwood): Conflict as I672904e9bfb45a66a82331063c7d49c4bc0439df
isn't present on stable/victoria.

Conflicts:
  .zuul.yaml

Change-Id: Id3e4452883f6a3cf44ff58b39ded82e882e28c23
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
(cherry picked from commit 98b01c9a59df4912f5a162c2c52d1f00c84d24c2)
(cherry picked from commit fef0305abefbf165fecb883f03bce97f525a790a)
",git fetch https://review.opendev.org/openstack/nova refs/changes/40/797040/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'tox.ini', 'tools/check-cherry-picks.sh']",3,b7677ae08ae151858ecb0e67039e54bb3df89700,cherry-pick-in-gate-queue,,# Allow this script to be disabled by a simple env var if [ ${DISABLE_CHERRY_PICK_CHECK:-0} -eq 1 ]; then exit 0 fi ,23,8
openstack%2Fhorizon~master~I80bb8c57894d2b354c8f22bd0c173965a05cf37e,openstack/horizon,master,I80bb8c57894d2b354c8f22bd0c173965a05cf37e,Add Math.round to avoid infinite decimal,ABANDONED,2018-11-30 00:59:46.000000000,2021-08-03 20:27:12.000000000,,"[{'_account_id': 841}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-11-30 00:59:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/771ed80482b9cafb14dc2aab97b84fa3aafa6ed4', 'message': 'Add Math.round to avoid infinite decimal\n\nChange-Id: I80bb8c57894d2b354c8f22bd0c173965a05cf37e\n'}, {'number': 2, 'created': '2018-12-10 10:47:44.000000000', 'files': ['openstack_dashboard/static/js/horizon.quota.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/c1516239bef1bb44ca8529376be40affa80bad3f', 'message': 'Add Math.round to avoid infinite decimal\n\n\nwhen the quota_limit can not divisible, the result would be a infinite\ndecimal and it could take up a lot of memory space.\nto avoid this question, it need Math.round, so I git review this bug. \n\nChange-Id: I80bb8c57894d2b354c8f22bd0c173965a05cf37e\n'}]",1,621049,c1516239bef1bb44ca8529376be40affa80bad3f,9,3,2,29075,,,0,"Add Math.round to avoid infinite decimal


when the quota_limit can not divisible, the result would be a infinite
decimal and it could take up a lot of memory space.
to avoid this question, it need Math.round, so I git review this bug. 

Change-Id: I80bb8c57894d2b354c8f22bd0c173965a05cf37e
",git fetch https://review.opendev.org/openstack/horizon refs/changes/49/621049/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack_dashboard/static/js/horizon.quota.js'],1,771ed80482b9cafb14dc2aab97b84fa3aafa6ed4,, var percentage_to_update = Math.round((increment_by / quota_limit) * 100);, var percentage_to_update = ((increment_by / quota_limit) * 100);,1,1
openstack%2Fdiskimage-builder~master~I2fba6935064823ace418b00f9735e52640c933f3,openstack/diskimage-builder,master,I2fba6935064823ace418b00f9735e52640c933f3,Fedora: bump DIB_RELEASE to 34,MERGED,2021-07-03 02:27:28.000000000,2021-08-03 20:25:16.000000000,2021-08-03 20:23:50.000000000,"[{'_account_id': 6469}, {'_account_id': 7118}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-03 02:27:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/da730d6d6bbf942657b74b43f9ebacfbbdae6a2e', 'message': 'Fedora: bump DIB_RELEASE to 34\n\nFedora 34 is the new stable release.\n\nChange-Id: I2fba6935064823ace418b00f9735e52640c933f3\n'}, {'number': 2, 'created': '2021-08-03 16:37:16.000000000', 'files': ['diskimage_builder/elements/fedora/environment.d/10-fedora-distro-name.bash'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/168bb25e69fc0cbb931833eee13464e4337f4913', 'message': 'Fedora: bump DIB_RELEASE to 34\n\nFedora 34 is the new stable release.\n\nChange-Id: I2fba6935064823ace418b00f9735e52640c933f3\n'}]",0,799341,168bb25e69fc0cbb931833eee13464e4337f4913,14,3,2,9268,,,0,"Fedora: bump DIB_RELEASE to 34

Fedora 34 is the new stable release.

Change-Id: I2fba6935064823ace418b00f9735e52640c933f3
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/41/799341/2 && git format-patch -1 --stdout FETCH_HEAD,['diskimage_builder/elements/fedora/environment.d/10-fedora-distro-name.bash'],1,da730d6d6bbf942657b74b43f9ebacfbbdae6a2e,fedora,export DIB_RELEASE=${DIB_RELEASE:-34},export DIB_RELEASE=${DIB_RELEASE:-32},1,1
openstack%2Fironic~master~I7f004d40c1b8c617f9a456216df091e44d69693f,openstack/ironic,master,I7f004d40c1b8c617f9a456216df091e44d69693f,"Use shim-signed on Ubuntu, shim is empty now",MERGED,2021-08-03 11:07:51.000000000,2021-08-03 20:15:07.000000000,2021-08-03 18:54:04.000000000,"[{'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-08-03 11:07:51.000000000', 'files': ['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/294046befae669dacd159d9f26bcdd3bc8ff26c9', 'message': 'Use shim-signed on Ubuntu, shim is empty now\n\nAlso fix the documentation to use the correct paths and versions.\n\nChange-Id: I7f004d40c1b8c617f9a456216df091e44d69693f\n'}]",0,803327,294046befae669dacd159d9f26bcdd3bc8ff26c9,17,3,1,10239,,,0,"Use shim-signed on Ubuntu, shim is empty now

Also fix the documentation to use the correct paths and versions.

Change-Id: I7f004d40c1b8c617f9a456216df091e44d69693f
",git fetch https://review.opendev.org/openstack/ironic refs/changes/27/803327/1 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/lib/ironic', 'bindep.txt', 'doc/source/install/configure-pxe.rst']",3,294046befae669dacd159d9f26bcdd3bc8ff26c9,gate, Ubuntu (18.04LTS and later):: Ubuntu (18.04LTS and later):: sudo cp /usr/lib/shim/shimx64.efi.signed /tftpboot/bootx64.efi, Ubuntu (16.04LTS and later):: Ubuntu (16.04LTS and later):: sudo cp /usr/lib/shim/shim.efi.signed /tftpboot/bootx64.efi,10,6
openstack%2Fdiskimage-builder~master~I2c5edd2e31fce04c7c35fc925e4474be27255dbf,openstack/diskimage-builder,master,I2c5edd2e31fce04c7c35fc925e4474be27255dbf,WIP: Add ubuntu-containerfile element,NEW,2021-08-01 20:24:00.000000000,2021-08-03 20:11:56.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-01 20:24:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/284b64d56893901b5a594eb1403a71de51c173ea', 'message': 'WIP: Add ubuntu-containerfile element\n\nBased on fedora-containerfile.\n\nThis is more or less a shot in the dark at this point.\n\nChange-Id: I2c5edd2e31fce04c7c35fc925e4474be27255dbf\n'}, {'number': 2, 'created': '2021-08-01 22:55:01.000000000', 'files': ['diskimage_builder/elements/ubuntu-container/environment.d/11-ubuntu-kernel.bash', 'diskimage_builder/elements/ubuntu-container/package-installs.yaml', 'diskimage_builder/elements/ubuntu-container/containerfiles/focal', 'diskimage_builder/elements/ubuntu-container/environment.d/12-ubuntu-repo-dists.bash', 'diskimage_builder/elements/ubuntu-container/README.rst', 'diskimage_builder/elements/ubuntu-container/test-elements/build-succeeds/element-deps', '.zuul.d/project.yaml', '.zuul.d/jobs.yaml', 'diskimage_builder/elements/ubuntu-container/element-deps', 'diskimage_builder/elements/ubuntu-container/test-elements/build-succeeds/README.rst'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/f8130d054b7740e3ebc85d5e268c19b76f7b8dfb', 'message': 'WIP: Add ubuntu-containerfile element\n\nBased on fedora-containerfile and ubuntu-minimal.\n\nThis is more or less a shot in the dark at this point.\n\nChange-Id: I2c5edd2e31fce04c7c35fc925e4474be27255dbf\n'}]",0,803123,f8130d054b7740e3ebc85d5e268c19b76f7b8dfb,12,1,2,1,,,0,"WIP: Add ubuntu-containerfile element

Based on fedora-containerfile and ubuntu-minimal.

This is more or less a shot in the dark at this point.

Change-Id: I2c5edd2e31fce04c7c35fc925e4474be27255dbf
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/23/803123/1 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/ubuntu-container/package-installs.yaml', 'diskimage_builder/elements/ubuntu-container/containerfiles/focal', 'diskimage_builder/elements/ubuntu-container/README.rst', 'diskimage_builder/elements/ubuntu-container/test-elements/build-succeeds/element-deps', '.zuul.d/project.yaml', '.zuul.d/jobs.yaml', 'diskimage_builder/elements/ubuntu-container/element-deps', 'diskimage_builder/elements/ubuntu-container/test-elements/build-succeeds/README.rst']",8,284b64d56893901b5a594eb1403a71de51c173ea,,Verify we can build an ubuntu-container image. ,,73,0
openstack%2Fopenstack-ansible-tests~stable%2Ftrain~Ic868bf75e64bc27cbc912c6c0415439a8c9a1057,openstack/openstack-ansible-tests,stable/train,Ic868bf75e64bc27cbc912c6c0415439a8c9a1057,Update Debian stable job,MERGED,2021-08-01 23:44:36.000000000,2021-08-03 20:05:02.000000000,2021-08-03 20:00:38.000000000,"[{'_account_id': 13095}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2021-08-01 23:44:36.000000000', 'files': ['zuul.d/project-templates.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-tests/commit/f184ae93815d84d203503418b1e78d0901e7c18e', 'message': 'Update Debian stable job\n\nThe ""debian-stable"" nodeset was never updated past Stretch; a distro\nwe are now looking to remove.  We are planning to remove this label to\navoid confusion like this (and switching stable distributions on jobs\nunexpectedly).\n\nSince this branch isn\'t supported on > stretch, remove the testing.\n\nCherry-Picked-From: dfc05e6ed11a23d081d7ee7cf36c005aaa0ea1ea\nNeeded-By: https://review.opendev.org/c/opendev/base-jobs/+/802639\nChange-Id: Ic868bf75e64bc27cbc912c6c0415439a8c9a1057\n'}]",0,803127,f184ae93815d84d203503418b1e78d0901e7c18e,8,3,1,7118,,,0,"Update Debian stable job

The ""debian-stable"" nodeset was never updated past Stretch; a distro
we are now looking to remove.  We are planning to remove this label to
avoid confusion like this (and switching stable distributions on jobs
unexpectedly).

Since this branch isn't supported on > stretch, remove the testing.

Cherry-Picked-From: dfc05e6ed11a23d081d7ee7cf36c005aaa0ea1ea
Needed-By: https://review.opendev.org/c/opendev/base-jobs/+/802639
Change-Id: Ic868bf75e64bc27cbc912c6c0415439a8c9a1057
",git fetch https://review.opendev.org/openstack/openstack-ansible-tests refs/changes/27/803127/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project-templates.yaml', 'zuul.d/jobs.yaml']",2,f184ae93815d84d203503418b1e78d0901e7c18e,,"# NOTE(ianw) 2021-07-30 : debian-stretch used to be tested here, but # infra have removed the images as they only support buster/bullseye # now.",- job: name: openstack-ansible-functional-debian-stable parent: openstack-ansible-functional nodeset: debian-stable,3,6
openstack%2Ftripleo-upgrade~stable%2Fvictoria~Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,openstack/tripleo-upgrade,stable/victoria,Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,Run Ceph upgrade only once.,MERGED,2021-08-02 11:23:44.000000000,2021-08-03 19:53:46.000000000,2021-08-03 19:53:46.000000000,"[{'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-08-02 11:23:44.000000000', 'files': ['tasks/fast-forward-upgrade/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/5128834c04c80570e475796cd42533c2d13fc810', 'message': 'Run Ceph upgrade only once.\n\nThe ceph ugprade playbook was being called twice, which did spend extra\ntime for the test.\n\nIt should be enough to upgrade ceph only once.\n\nChange-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80\n(cherry picked from commit 3d53a15819ca30c8cfd5eb850d66960ed6505405)\n'}]",0,803173,5128834c04c80570e475796cd42533c2d13fc810,6,4,1,6816,,,0,"Run Ceph upgrade only once.

The ceph ugprade playbook was being called twice, which did spend extra
time for the test.

It should be enough to upgrade ceph only once.

Change-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80
(cherry picked from commit 3d53a15819ca30c8cfd5eb850d66960ed6505405)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/73/803173/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/fast-forward-upgrade/main.yml'],1,5128834c04c80570e475796cd42533c2d13fc810,, - name: import ceph upgrade tasks import_tasks: ../upgrade/ceph_upgrade_run.yml, - name: run FFU ceph osd nodes upgrade scripts include_tasks: ../upgrade/ceph_upgrade_run.yml - name: import ceph ugrade tasks import_tasks: ../upgrade/ceph_upgrade_run.yml tags: ffu_overcloud_ceph ,2,6
openstack%2Ftripleo-upgrade~master~Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,openstack/tripleo-upgrade,master,Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,Run Ceph upgrade only once.,MERGED,2021-08-02 11:23:06.000000000,2021-08-03 19:53:45.000000000,2021-08-03 19:53:45.000000000,"[{'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-08-02 11:23:06.000000000', 'files': ['tasks/fast-forward-upgrade/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/f5621f65f0a70d59e87b9dee5118794dab0f7d59', 'message': 'Run Ceph upgrade only once.\n\nThe ceph ugprade playbook was being called twice, which did spend extra\ntime for the test.\n\nIt should be enough to upgrade ceph only once.\n\nChange-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80\n(cherry picked from commit 3d53a15819ca30c8cfd5eb850d66960ed6505405)\n'}]",0,803171,f5621f65f0a70d59e87b9dee5118794dab0f7d59,6,4,1,6816,,,0,"Run Ceph upgrade only once.

The ceph ugprade playbook was being called twice, which did spend extra
time for the test.

It should be enough to upgrade ceph only once.

Change-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80
(cherry picked from commit 3d53a15819ca30c8cfd5eb850d66960ed6505405)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/71/803171/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/fast-forward-upgrade/main.yml'],1,f5621f65f0a70d59e87b9dee5118794dab0f7d59,, - name: import ceph upgrade tasks import_tasks: ../upgrade/ceph_upgrade_run.yml, - name: run FFU ceph osd nodes upgrade scripts include_tasks: ../upgrade/ceph_upgrade_run.yml - name: import ceph ugrade tasks import_tasks: ../upgrade/ceph_upgrade_run.yml tags: ffu_overcloud_ceph ,2,6
openstack%2Ftripleo-upgrade~stable%2Fvictoria~I32494fb21d40cd3231e619c748fdfce7ff891f50,openstack/tripleo-upgrade,stable/victoria,I32494fb21d40cd3231e619c748fdfce7ff891f50,Move the upgrade prepare script generation in the build script playbook.,MERGED,2021-08-02 11:34:34.000000000,2021-08-03 19:53:44.000000000,2021-08-03 19:53:44.000000000,"[{'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-08-02 11:34:34.000000000', 'files': ['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/bd556d199011cb25d5270ec146db8f640a99a6eb', 'message': 'Move the upgrade prepare script generation in the build script playbook.\n\nCurrently, the overcloud_upgrade_prepare.sh script was being built in the\novercloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params\nparameter was up to date. However, this parameter is not used anymore in\nthe ffu workflow and the upgrades workflow is not being used by our CI so\nit should be safe to move it back to the create-overcloud-ffu-script.yaml.\n\nChange-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50\n(cherry picked from commit ef5bfc5bdf4dea47b6e3de51a02fdc7ced475aea)\n'}]",0,803174,bd556d199011cb25d5270ec146db8f640a99a6eb,6,4,1,6816,,,0,"Move the upgrade prepare script generation in the build script playbook.

Currently, the overcloud_upgrade_prepare.sh script was being built in the
overcloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params
parameter was up to date. However, this parameter is not used anymore in
the ffu workflow and the upgrades workflow is not being used by our CI so
it should be safe to move it back to the create-overcloud-ffu-script.yaml.

Change-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50
(cherry picked from commit ef5bfc5bdf4dea47b6e3de51a02fdc7ced475aea)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/74/803174/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml']",4,bd556d199011cb25d5270ec146db8f640a99a6eb,,,"- name: add upgrade init script to upgrade prepare params set_fact: upgrade_prepare_extra_params: ""{{ upgrade_prepare_extra_params + [upgrade_init_command_dest] }}"" when: - upgrade_init_command is string - not ffu_overcloud_upgrade|bool # Render it now so it takes all additions in upgrade_prepare_extra_params - name: create overcloud upgrade prepare script vars: old_img: ""{{ working_dir }}/{{ container_registry_file }}"" template: src: ""overcloud_upgrade_prepare.sh.j2"" dest: ""{{ overcloud_upgrade_prepare_script }}"" mode: 0775 force: true",27,17
openstack%2Ftripleo-upgrade~stable%2Fussuri~I32494fb21d40cd3231e619c748fdfce7ff891f50,openstack/tripleo-upgrade,stable/ussuri,I32494fb21d40cd3231e619c748fdfce7ff891f50,Move the upgrade prepare script generation in the build script playbook.,MERGED,2021-08-02 11:34:50.000000000,2021-08-03 19:53:43.000000000,2021-08-03 19:53:43.000000000,"[{'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-08-02 11:34:50.000000000', 'files': ['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/b1feff9caac1a99a28e6ff9a7f7546382836ca71', 'message': 'Move the upgrade prepare script generation in the build script playbook.\n\nCurrently, the overcloud_upgrade_prepare.sh script was being built in the\novercloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params\nparameter was up to date. However, this parameter is not used anymore in\nthe ffu workflow and the upgrades workflow is not being used by our CI so\nit should be safe to move it back to the create-overcloud-ffu-script.yaml.\n\nChange-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50\n(cherry picked from commit ef5bfc5bdf4dea47b6e3de51a02fdc7ced475aea)\n'}]",0,803175,b1feff9caac1a99a28e6ff9a7f7546382836ca71,6,4,1,6816,,,0,"Move the upgrade prepare script generation in the build script playbook.

Currently, the overcloud_upgrade_prepare.sh script was being built in the
overcloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params
parameter was up to date. However, this parameter is not used anymore in
the ffu workflow and the upgrades workflow is not being used by our CI so
it should be safe to move it back to the create-overcloud-ffu-script.yaml.

Change-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50
(cherry picked from commit ef5bfc5bdf4dea47b6e3de51a02fdc7ced475aea)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/75/803175/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml']",4,b1feff9caac1a99a28e6ff9a7f7546382836ca71,,,"- name: add upgrade init script to upgrade prepare params set_fact: upgrade_prepare_extra_params: ""{{ upgrade_prepare_extra_params + [upgrade_init_command_dest] }}"" when: - upgrade_init_command is string - not ffu_overcloud_upgrade|bool # Render it now so it takes all additions in upgrade_prepare_extra_params - name: create overcloud upgrade prepare script vars: old_img: ""{{ working_dir }}/{{ container_registry_file }}"" template: src: ""overcloud_upgrade_prepare.sh.j2"" dest: ""{{ overcloud_upgrade_prepare_script }}"" mode: 0775 force: true",27,17
openstack%2Fhorizon~master~I3e034f37fbdc5e5aca8bd77db71daab36c1f9d65,openstack/horizon,master,I3e034f37fbdc5e5aca8bd77db71daab36c1f9d65,"fixed changeDate function. When startDate on change,it should not be hidden",ABANDONED,2018-11-30 02:55:25.000000000,2021-08-03 19:41:46.000000000,,"[{'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-11-30 02:55:25.000000000', 'files': ['horizon/static/horizon/js/horizon.forms.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/2b06659d93a00f71be4a3923206f1745bab0fc6c', 'message': 'fixed changeDate function. When startDate on change,it should not be hidden\n\nChange-Id: I3e034f37fbdc5e5aca8bd77db71daab36c1f9d65\n'}]",1,621060,2b06659d93a00f71be4a3923206f1745bab0fc6c,5,2,1,29075,,,0,"fixed changeDate function. When startDate on change,it should not be hidden

Change-Id: I3e034f37fbdc5e5aca8bd77db71daab36c1f9d65
",git fetch https://review.opendev.org/openstack/horizon refs/changes/60/621060/1 && git format-patch -1 --stdout FETCH_HEAD,['horizon/static/horizon/js/horizon.forms.js'],1,2b06659d93a00f71be4a3923206f1745bab0fc6c,, endDate.hide(); startDate.hide();, startDate.hide(); endDate.hide();,2,2
openstack%2Fhorizon~master~I21287f4a29c633082460339e3ee942a894db5e9d,openstack/horizon,master,I21287f4a29c633082460339e3ee942a894db5e9d,Add Math.round to calculate,ABANDONED,2018-11-29 00:46:51.000000000,2021-08-03 19:34:42.000000000,,"[{'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-11-29 00:46:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/494d61f9ac63b0b6a0712dd70ec9a1a8c5eff153', 'message': 'Add Math.round to calculate\n\nChange-Id: I21287f4a29c633082460339e3ee942a894db5e9d\n'}, {'number': 2, 'created': '2018-12-01 02:44:40.000000000', 'files': ['horizon/static/horizon/js/horizon.d3barchart.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/572113e5d8f05055508b7baaef67f4c998be66c0', 'message': 'Add Math.round to calculate\n\nInconsistent calculation rules,as follows:\nthe original,if data.average= 0.07, self.max_value = 100\nself.data.percentage_average = ((self.data.average / self.max_value) * 100);\nthe result = 0.07\nthe current \nself.data.percentage_used = Math.round((self.data.used / self.max_value) * 100);\nthe result = 0\nhowever the most of the calculation rules of the system are plus Math.round\n\nChange-Id: I21287f4a29c633082460339e3ee942a894db5e9d\n'}]",2,620757,572113e5d8f05055508b7baaef67f4c998be66c0,7,2,2,27471,,,0,"Add Math.round to calculate

Inconsistent calculation rules,as follows:
the original,if data.average= 0.07, self.max_value = 100
self.data.percentage_average = ((self.data.average / self.max_value) * 100);
the result = 0.07
the current 
self.data.percentage_used = Math.round((self.data.used / self.max_value) * 100);
the result = 0
however the most of the calculation rules of the system are plus Math.round

Change-Id: I21287f4a29c633082460339e3ee942a894db5e9d
",git fetch https://review.opendev.org/openstack/horizon refs/changes/57/620757/2 && git format-patch -1 --stdout FETCH_HEAD,['horizon/static/horizon/js/horizon.d3barchart.js'],1,494d61f9ac63b0b6a0712dd70ec9a1a8c5eff153,, self.data.percentage_average = Math.round((self.data.average / self.max_value) * 100);, self.data.percentage_average = ((self.data.average / self.max_value) * 100);,1,1
openstack%2Fkayobe~master~Ied01d2797420f844134dff8714e77a1ca6c1f7aa,openstack/kayobe,master,Ied01d2797420f844134dff8714e77a1ca6c1f7aa,Update ntp role to match code style,MERGED,2021-08-03 15:48:43.000000000,2021-08-03 19:31:21.000000000,2021-08-03 19:29:34.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 15:48:43.000000000', 'files': ['ansible/roles/ntp/tasks/prepare.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/6ea2287466a43f39e03a801e3f7f205a8618a030', 'message': 'Update ntp role to match code style\n\nChange-Id: Ied01d2797420f844134dff8714e77a1ca6c1f7aa\n'}]",0,803365,6ea2287466a43f39e03a801e3f7f205a8618a030,7,2,1,15197,,,0,"Update ntp role to match code style

Change-Id: Ied01d2797420f844134dff8714e77a1ca6c1f7aa
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/65/803365/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/ntp/tasks/prepare.yml'],1,6ea2287466a43f39e03a801e3f7f205a8618a030,,- name: Populate service facts, - name: Populate service facts.,1,2
openstack%2Frequirements~master~I891f5e1f4393c832f8f9feb6094fb9d8cc5dba35,openstack/requirements,master,I891f5e1f4393c832f8f9feb6094fb9d8cc5dba35,Move tempest to blacklist,MERGED,2021-04-22 17:22:03.000000000,2021-08-03 19:31:14.000000000,2021-08-03 19:30:02.000000000,"[{'_account_id': 8556}, {'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 22873}]","[{'number': 1, 'created': '2021-04-22 17:22:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/86d24536e31cd665f73728c38af86c4cb24b1dd5', 'message': 'WIP: test the tempest master on tempest plugin tests\n\nChange-Id: I891f5e1f4393c832f8f9feb6094fb9d8cc5dba35\n'}, {'number': 2, 'created': '2021-07-26 20:41:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/8fd8fa031eefe6bb8029996086965407bbfbf121', 'message': 'WIP: test the tempest master on tempest plugin tests\n\nChange-Id: I891f5e1f4393c832f8f9feb6094fb9d8cc5dba35\n'}, {'number': 3, 'created': '2021-07-27 17:09:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/83ee356467cb767f452afecebc1e7a71c3c06f8e', 'message': ""Move tempest to blacklist\n\nTempest and its plugins are branchless which means master version\nof these tools are used in testing the master + stable branches\n(except EM stable branch where we pin the Tempest and plugins for testing).\nKeeping Tempest in the u-c file will block testing the master + stable branches\nwith Tempest master. Bug#1916771 for more details.\n\nOnce any stable branch move to 'Extended Maintenance' and we pin the\nolder Tempest to test them then we can move it from here to u-c file.\n\nRelated Bug: #1916771\n\nChange-Id: I891f5e1f4393c832f8f9feb6094fb9d8cc5dba35\n""}, {'number': 4, 'created': '2021-08-03 15:13:54.000000000', 'files': ['blacklist.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/4c3828350c1c257b883f43d34fafb312193c2201', 'message': ""Move tempest to blacklist\n\nTempest and its plugins are branchless which means master version\nof these tools are used in testing the master + stable branches\n(except EM stable branch where we pin the Tempest and plugins for testing).\nKeeping Tempest in the u-c file will block testing the master + stable branches\nwith Tempest master. Bug#1916771 for more details.\n\nOnce any stable branch move to 'Extended Maintenance' and we pin the\nolder Tempest to test them then we can move it from here to u-c file.\n\nRelated Bug: #1916771\n\nChange-Id: I891f5e1f4393c832f8f9feb6094fb9d8cc5dba35\n""}]",0,787621,4c3828350c1c257b883f43d34fafb312193c2201,22,5,4,8556,,,0,"Move tempest to blacklist

Tempest and its plugins are branchless which means master version
of these tools are used in testing the master + stable branches
(except EM stable branch where we pin the Tempest and plugins for testing).
Keeping Tempest in the u-c file will block testing the master + stable branches
with Tempest master. Bug#1916771 for more details.

Once any stable branch move to 'Extended Maintenance' and we pin the
older Tempest to test them then we can move it from here to u-c file.

Related Bug: #1916771

Change-Id: I891f5e1f4393c832f8f9feb6094fb9d8cc5dba35
",git fetch https://review.opendev.org/openstack/requirements refs/changes/21/787621/4 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,86d24536e31cd665f73728c38af86c4cb24b1dd5,bug/1916771,,tempest===27.0.0,0,1
openstack%2Fdevstack-gate~master~I556f97e1dded51a6be4f9f9be64ad7eb64d5aca2,openstack/devstack-gate,master,I556f97e1dded51a6be4f9f9be64ad7eb64d5aca2,Retire django-openstack-auth,MERGED,2021-07-13 17:25:27.000000000,2021-08-03 19:30:00.000000000,2021-08-03 19:30:00.000000000,"[{'_account_id': 4146}, {'_account_id': 8556}, {'_account_id': 13252}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-13 17:25:27.000000000', 'files': ['devstack-vm-gate-wrap.sh'], 'web_link': 'https://opendev.org/openstack/devstack-gate/commit/9e22c31171c12ea63843d3f161d85f98f96f6cdd', 'message': 'Retire django-openstack-auth\n\n``django_openstack_auth`` code was merged into the main horizon\nrepository during the queens release. This repo is already\ndeprecated and now we can retire it. This patch removes all\nreferences of ``django_openstack_auth`` as mentioned in [1].\n\n[1] https://docs.openstack.org/project-team-guide/repository.html#retiring-a-repository\n\nNeeded-By: https://review.opendev.org/c/openstack/project-config/+/800532/\nChange-Id: I556f97e1dded51a6be4f9f9be64ad7eb64d5aca2\n'}]",0,800693,9e22c31171c12ea63843d3f161d85f98f96f6cdd,10,4,1,29313,,,0,"Retire django-openstack-auth

``django_openstack_auth`` code was merged into the main horizon
repository during the queens release. This repo is already
deprecated and now we can retire it. This patch removes all
references of ``django_openstack_auth`` as mentioned in [1].

[1] https://docs.openstack.org/project-team-guide/repository.html#retiring-a-repository

Needed-By: https://review.opendev.org/c/openstack/project-config/+/800532/
Change-Id: I556f97e1dded51a6be4f9f9be64ad7eb64d5aca2
",git fetch https://review.opendev.org/openstack/devstack-gate refs/changes/93/800693/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack-vm-gate-wrap.sh'],1,9e22c31171c12ea63843d3f161d85f98f96f6cdd,retire-django-openstack-auth,"if [[ ""$DEVSTACK_GATE_HORIZON"" -eq ""1"" || ""$DEVSTACK_PROJECT_FROM_GIT"" = ""manila-ui"" ]] ; then","if [[ ""$DEVSTACK_GATE_HORIZON"" -eq ""1"" || ""$DEVSTACK_PROJECT_FROM_GIT"" = ""django_openstack_auth"" || ""$DEVSTACK_PROJECT_FROM_GIT"" = ""manila-ui"" ]] ; then PROJECTS=""openstack/django_openstack_auth $PROJECTS""",1,2
openstack%2Fdevstack-gate~master~Ia62245bbeaf4f1a4b50c07efe14b58b550a9817f,openstack/devstack-gate,master,Ia62245bbeaf4f1a4b50c07efe14b58b550a9817f,Remove neutron-lbaas from PROJECTS list,MERGED,2021-08-03 14:02:23.000000000,2021-08-03 19:29:59.000000000,2021-08-03 19:29:59.000000000,"[{'_account_id': 4146}, {'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 14:02:23.000000000', 'files': ['devstack-vm-gate-wrap.sh'], 'web_link': 'https://opendev.org/openstack/devstack-gate/commit/7caf665cf6660194ce4ddc9487dd652a54eef205', 'message': 'Remove neutron-lbaas from PROJECTS list\n\nneutron-lbaas was retired [1] and old branches that still use\ndevstack-gate started to fail with the following error:\n\nfunctions.sh:setup_workspace:L461: rsync -a \'/home/zuul/src/*/openstack/neutron-lbaas/\' neutron-lbaas\nrsync: change_dir ""/home/zuul/src/*/openstack/neutron-lbaas"" failed: No such file or directory (2)\n\nThis patch removes the neutron-lbaas from the PROJECTS list to fix the\nstable gate jobs that are based on devstack-gate.\n\n[1] I04bf076a051e0bf8333f5dc7c000952048dcb523\n\nChange-Id: Ia62245bbeaf4f1a4b50c07efe14b58b550a9817f\n'}]",0,803346,7caf665cf6660194ce4ddc9487dd652a54eef205,7,3,1,17685,,,0,"Remove neutron-lbaas from PROJECTS list

neutron-lbaas was retired [1] and old branches that still use
devstack-gate started to fail with the following error:

functions.sh:setup_workspace:L461: rsync -a '/home/zuul/src/*/openstack/neutron-lbaas/' neutron-lbaas
rsync: change_dir ""/home/zuul/src/*/openstack/neutron-lbaas"" failed: No such file or directory (2)

This patch removes the neutron-lbaas from the PROJECTS list to fix the
stable gate jobs that are based on devstack-gate.

[1] I04bf076a051e0bf8333f5dc7c000952048dcb523

Change-Id: Ia62245bbeaf4f1a4b50c07efe14b58b550a9817f
",git fetch https://review.opendev.org/openstack/devstack-gate refs/changes/46/803346/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack-vm-gate-wrap.sh'],1,7caf665cf6660194ce4ddc9487dd652a54eef205,stable-gate-fix,,"PROJECTS=""openstack/neutron-lbaas $PROJECTS""",0,1
openstack%2Fnova~master~I84ee8bdb41451c336aee6a673b079f68d0ffbf08,openstack/nova,master,I84ee8bdb41451c336aee6a673b079f68d0ffbf08,Clean up unreal UUID values in tests,NEW,2021-08-02 16:00:23.000000000,2021-08-03 19:25:12.000000000,,"[{'_account_id': 8864}, {'_account_id': 19234}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 16:00:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f381bac8f1031e581a12fe1ef276d3ea94b0fedc', 'message': 'Clean up unreal UUID values in tests\n\nThere are many places in nova tests where UUIDs are set to\nvalues like ""00000000-0000-0000-0000-000000000000"". In some\ncases it may be reasonsble to preserve such definitions. But in\nsome cases it could be better to use UUIDs provided by uuidsentinel.\n\nThis patch focuses on technically correct UUIDs that don\'t look like\nreal UUIDs and could be replaced using uuidsentinel. It also\nreplaces some occasional UUIDs in incorrect format, but doesn\'t\nfocuses on them.\n\nThis patch was created using the following algorythm:\n\n1. Find UUID definition in nova/tests that doesn\'t look real, but\n   technically passes agains UUID regex.\n2. Replace this definition if it is used in single unit test and\n   its change wouldn\'t affect other tests.\n3. Possibly introduce common reference if affected UUID is used\n   by multiple tests which depend on each other.\n4. Skip changing anything if the change has potential negative\n   side efects.\n\nPartial-Bug: #1746747\nChange-Id: I84ee8bdb41451c336aee6a673b079f68d0ffbf08\n'}, {'number': 2, 'created': '2021-08-03 09:19:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2ce327aaaa7225e9aa7253e39af6d73191239ab4', 'message': 'Clean up unreal UUID values in tests\n\nThere are many places in nova tests where UUIDs are set to\nvalues like ""00000000-0000-0000-0000-000000000000"". In some\ncases it may be reasonsble to preserve such definitions. But in\nsome cases it could be better to use UUIDs provided by uuidsentinel.\n\nThis patch focuses on technically correct UUIDs that don\'t look like\nreal UUIDs and could be replaced using uuidsentinel. It also\nreplaces some occasional UUIDs in incorrect format, but doesn\'t\nfocuses on them.\n\nThis patch was created using the following algorythm:\n\n1. Find UUID definition in nova/tests that doesn\'t look real, but\n   technically passes agains UUID regex.\n2. Replace this definition if it is used in single unit test and\n   its change wouldn\'t affect other tests.\n3. Possibly introduce common reference if affected UUID is used\n   by multiple tests which depend on each other.\n4. Skip changing anything if the change has potential negative\n   side efects.\n\nPartial-Bug: #1746747\nChange-Id: I84ee8bdb41451c336aee6a673b079f68d0ffbf08\n'}, {'number': 3, 'created': '2021-08-03 13:20:11.000000000', 'files': ['nova/tests/unit/network/test_network_info.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/unit/compute/test_compute_utils.py', 'nova/tests/unit/compute/test_api.py', 'nova/tests/unit/api/openstack/compute/test_extended_ips.py', 'nova/tests/unit/test_metadata.py', 'nova/tests/unit/virt/ironic/test_driver.py', 'nova/tests/unit/api/openstack/compute/test_snapshots.py', 'nova/tests/unit/scheduler/test_utils.py', 'nova/tests/unit/virt/libvirt/test_vif.py', 'nova/tests/unit/api/openstack/compute/test_servers.py', 'nova/tests/unit/api/openstack/compute/test_extended_ips_mac.py', 'nova/tests/unit/api/openstack/compute/test_security_groups.py', 'nova/tests/unit/db/test_db_api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/090cd1e49cb656735ebc81d9d2a503120ac9bc9e', 'message': 'Clean up unreal UUID values in tests\n\nThere are many places in nova tests where UUIDs are set to\nvalues like ""00000000-0000-0000-0000-000000000000"". In some\ncases it may be reasonsble to preserve such definitions. But in\nsome cases it could be better to use UUIDs provided by uuidsentinel.\n\nThis patch focuses on technically correct UUIDs that don\'t look like\nreal UUIDs and could be replaced using uuidsentinel. It also\nreplaces some occasional UUIDs in incorrect format, but it is just\na side effect.\n\nThis patch was created using the following algorythm:\n\n1. Find UUID definition in nova/tests that doesn\'t look real, but\n   technically passes agains UUID regex.\n2. Replace this definition if it is used in single unit test and\n   its change wouldn\'t affect other tests.\n3. Possibly introduce common reference if affected UUID is used\n   by multiple tests which depend on each other.\n4. Skip changing anything if the change has potential negative\n   side efects or would complicate troubleshooting in the future.\n\nPartial-Bug: #1746747\nChange-Id: I84ee8bdb41451c336aee6a673b079f68d0ffbf08\n'}]",0,803226,090cd1e49cb656735ebc81d9d2a503120ac9bc9e,21,3,3,19234,,,0,"Clean up unreal UUID values in tests

There are many places in nova tests where UUIDs are set to
values like ""00000000-0000-0000-0000-000000000000"". In some
cases it may be reasonsble to preserve such definitions. But in
some cases it could be better to use UUIDs provided by uuidsentinel.

This patch focuses on technically correct UUIDs that don't look like
real UUIDs and could be replaced using uuidsentinel. It also
replaces some occasional UUIDs in incorrect format, but it is just
a side effect.

This patch was created using the following algorythm:

1. Find UUID definition in nova/tests that doesn't look real, but
   technically passes agains UUID regex.
2. Replace this definition if it is used in single unit test and
   its change wouldn't affect other tests.
3. Possibly introduce common reference if affected UUID is used
   by multiple tests which depend on each other.
4. Skip changing anything if the change has potential negative
   side efects or would complicate troubleshooting in the future.

Partial-Bug: #1746747
Change-Id: I84ee8bdb41451c336aee6a673b079f68d0ffbf08
",git fetch https://review.opendev.org/openstack/nova refs/changes/26/803226/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/network/test_network_info.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/unit/compute/test_compute_utils.py', 'nova/tests/unit/compute/test_api.py', 'nova/tests/unit/api/openstack/compute/test_extended_ips.py', 'nova/tests/unit/test_metadata.py', 'nova/tests/unit/virt/ironic/test_driver.py', 'nova/tests/unit/api/openstack/compute/test_snapshots.py', 'nova/tests/unit/scheduler/test_utils.py', 'nova/tests/unit/virt/libvirt/test_vif.py', 'nova/tests/unit/api/openstack/compute/test_attach_interfaces.py', 'nova/tests/unit/api/openstack/compute/test_servers.py', 'nova/tests/unit/api/openstack/compute/test_extended_ips_mac.py', 'nova/tests/unit/api/openstack/compute/test_security_groups.py', 'nova/tests/unit/db/test_db_api.py']",15,f381bac8f1031e581a12fe1ef276d3ea94b0fedc,1746747," FAKE_INSTANCE_REF = uuidsentinel.instance_fake_ref 'instance_uuid': FAKE_INSTANCE_REF, 'instance_uuid': FAKE_INSTANCE_REF, self.context, FAKE_INSTANCE_REF) self.context, FAKE_INSTANCE_REF)"," 'instance_uuid': '00000000-0000-0000-0000-000000000010', 'instance_uuid': '00000000-0000-0000-0000-000000000010', self.context, '00000000-0000-0000-0000-000000000010') self.context, '00000000-0000-0000-0000-000000000010')",184,183
openstack%2Fneutron~master~Id870f746ff8e9741a7c211aebdcf13597d31465b,openstack/neutron,master,Id870f746ff8e9741a7c211aebdcf13597d31465b,Ensure only one worker creates neturon_pg_drop,MERGED,2021-07-07 18:49:25.000000000,2021-08-03 19:06:16.000000000,2021-07-29 17:54:11.000000000,"[{'_account_id': 6773}, {'_account_id': 9845}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-07 18:49:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c834fcbdd84f75c7584712c7f102e41f019d32ab', 'message': ""Ensure only one worker creates neturon_pg_drop\n\nUse an OVSDB lock to ensure that only one worker tries to create\nthe neutron_pg_drop port group. This also waits pre_fork so that if\ngetting the port group fails, neutron exits instead of continuing\non without the port group being created.\n\nIt was previously possible that a server could create the port\ngroup and we wouldn't get the update before trying to create it\nourselves and checking for its existence.\n\nThis also modifies the get_port_group method to use the built-in\nlookup() which searches by name or uuid and can take advantage of\nboth indexing and newly added ovsdbapp wait for sync functionality.\n\nCloses-Bug: #1934930\nChange-Id: Id870f746ff8e9741a7c211aebdcf13597d31465b\n""}, {'number': 2, 'created': '2021-07-27 18:13:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/dd87bc06238e0edeea689b2bff8cc7221180f8d8', 'message': ""Ensure only one worker creates neturon_pg_drop\n\nUse an OVSDB lock to ensure that only one worker tries to create\nthe neutron_pg_drop port group. This also waits pre_fork so that if\ngetting the port group fails, neutron exits instead of continuing\non without the port group being created.\n\nIt was previously possible that a server could create the port\ngroup and we wouldn't get the update before trying to create it\nourselves and checking for its existence.\n\nThis also modifies the get_port_group method to use the built-in\nlookup() which searches by name or uuid and can take advantage of\nboth indexing and newly added ovsdbapp wait for sync functionality.\n\nCloses-Bug: #1934930\nChange-Id: Id870f746ff8e9741a7c211aebdcf13597d31465b\n""}, {'number': 3, 'created': '2021-07-27 19:47:34.000000000', 'files': ['neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/impl_idl_ovn.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/2e6f6c9ec30259d03363479e72e36129b08563b1', 'message': ""Ensure only one worker creates neturon_pg_drop\n\nUse an OVSDB lock to ensure that only one worker tries to create\nthe neutron_pg_drop port group. This also waits pre_fork so that if\ngetting the port group fails, neutron exits instead of continuing\non without the port group being created.\n\nIt was previously possible that a server could create the port\ngroup and we wouldn't get the update before trying to create it\nourselves and checking for its existence.\n\nThis also modifies the get_port_group method to use the built-in\nlookup() which searches by name or uuid and can take advantage of\nboth indexing and newly added ovsdbapp wait for sync functionality.\n\nCloses-Bug: #1934930\nChange-Id: Id870f746ff8e9741a7c211aebdcf13597d31465b\n""}]",7,799900,2e6f6c9ec30259d03363479e72e36129b08563b1,33,4,3,5756,,,0,"Ensure only one worker creates neturon_pg_drop

Use an OVSDB lock to ensure that only one worker tries to create
the neutron_pg_drop port group. This also waits pre_fork so that if
getting the port group fails, neutron exits instead of continuing
on without the port group being created.

It was previously possible that a server could create the port
group and we wouldn't get the update before trying to create it
ourselves and checking for its existence.

This also modifies the get_port_group method to use the built-in
lookup() which searches by name or uuid and can take advantage of
both indexing and newly added ovsdbapp wait for sync functionality.

Closes-Bug: #1934930
Change-Id: Id870f746ff8e9741a7c211aebdcf13597d31465b
",git fetch https://review.opendev.org/openstack/neutron refs/changes/00/799900/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/impl_idl_ovn.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py']",3,c834fcbdd84f75c7584712c7f102e41f019d32ab,bug/1934930," # Only one server should try to create the port group idl.set_lock('pg_drop_creation') # If we don't get the lock, and the port group didn't exist # when we tried to create it, it might still have been # created by another server and we just haven't gotten the # update yet. LOG.info(""Waiting for Port Group %(pg)s to be created"", {'pg': ovn_const.OVN_DROP_PORT_GROUP_NAME}) if not idl.neutron_pg_drop_event.wait(): LOG.error(""Port Group %(pg)s was not created in time"", {'pg': ovn_const.OVN_DROP_PORT_GROUP_NAME}) raise re else: LOG.info(""Porg Group %(pg)s was created by another server"", {'pg': ovn_const.OVN_DROP_PORT_GROUP_NAME})"," if pre_ovn_nb_api.get_port_group( ovn_const.OVN_DROP_PORT_GROUP_NAME): LOG.debug( ""Port Group %(port_group)s already exists, "" ""ignoring RuntimeError %(error)s"", { 'port_group': ovn_const.OVN_DROP_PORT_GROUP_NAME, 'error': re}) else: raise self._wait_for_pg_drop_event() def _wait_for_pg_drop_event(self): """"""Wait for event that occurs when neutron_pg_drop Port Group exists. The method creates a short living connection to the Northbound database. It waits for CREATE event caused by the Port Group. Such event occurs when: 1) The Port Group doesn't exist and is created by other process. 2) The Port Group already exists and event is emitted when DB copy is available to the IDL. """""" idl = ovsdb_monitor.OvnInitPGNbIdl.from_server( ovn_conf.get_ovn_nb_connection(), self.nb_schema_helper, self, pg_only=True) with ovsdb_monitor.short_living_ovsdb_api( impl_idl_ovn.OvsdbNbOvnIdl, idl) as ovn_nb_api: ovn_nb_api.idl.neutron_pg_drop_event.wait() ",24,41
openstack%2Ftripleo-common~master~Ic1ab52640d7d08617a75c294ec6f92778937b376,openstack/tripleo-common,master,Ic1ab52640d7d08617a75c294ec6f92778937b376,[FIPS] Remove paramiko from tripleo-common,ABANDONED,2021-08-03 14:31:59.000000000,2021-08-03 18:49:00.000000000,,"[{'_account_id': 7414}, {'_account_id': 11491}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-03 14:31:59.000000000', 'files': ['requirements.txt', 'tox.ini', 'tripleo_common/utils/passwords.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/8b2884cfea57fbf91e86c689bdae281778b2a338', 'message': '[FIPS] Remove paramiko from tripleo-common\n\nParamiko is no long something we can support as we move toward being a\nFIPS compatible/enabled environment. This change converts our use of\nparamiko to cryptography which is a supported way to generate our\nrequired keys.\n\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\nChange-Id: Ic1ab52640d7d08617a75c294ec6f92778937b376\n'}]",0,803354,8b2884cfea57fbf91e86c689bdae281778b2a338,6,4,1,7353,,,0,"[FIPS] Remove paramiko from tripleo-common

Paramiko is no long something we can support as we move toward being a
FIPS compatible/enabled environment. This change converts our use of
paramiko to cryptography which is a supported way to generate our
required keys.

Signed-off-by: Kevin Carter <kecarter@redhat.com>
Change-Id: Ic1ab52640d7d08617a75c294ec6f92778937b376
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/54/803354/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'tox.ini', 'tripleo_common/utils/passwords.py']",3,8b2884cfea57fbf91e86c689bdae281778b2a338,,"from cryptography.hazmat.primitives import serialization from cryptography.hazmat.primitives.asymmetric import rsa from cryptography.hazmat.backends import default_backend key = rsa.generate_private_key( backend=default_backend(), public_exponent=65537, key_size=bits ) private_key = key.private_bytes( serialization.Encoding.PEM, serialization.PrivateFormat.PKCS8, serialization.NoEncryption() ) public_key = key.public_key().public_bytes( serialization.Encoding.OpenSSH, serialization.PublicFormat.OpenSSH )","import paramiko key = paramiko.RSAKey.generate(bits) keyout = six.StringIO() key.write_private_key(keyout) private_key = keyout.getvalue() public_key = '{} {} {}'.format(key.get_name(), key.get_base64(), comment)",20,8
openstack%2Frequirements~master~Ia0cc7b338d0866e5aaf76604e732f44b9ac2e433,openstack/requirements,master,Ia0cc7b338d0866e5aaf76604e732f44b9ac2e433,update constraint for reno to new release 3.4.0,MERGED,2021-08-02 19:10:20.000000000,2021-08-03 18:42:27.000000000,2021-08-03 18:38:40.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 19:10:20.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/740bea8d4a5a4ad5980117fad341b9d51fa8ce15', 'message': 'update constraint for reno to new release 3.4.0\n\nmeta: version: 3.4.0\nmeta: diff-start: -\nmeta: series: independent\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Előd Illés <elod.illes@est.tech>\nmeta: release:Commit: Előd Illés <elod.illes@est.tech>\nmeta: release:Change-Id: I3b2c07884706e9d7edcc21a82249eff3089cc47d\nmeta: release:Code-Review+1: Matthew Treinish <mtreinish@kortar.org>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>\nmeta: release:Workflow+1: Hervé Beraud <herveberaud.pro@gmail.com>\nChange-Id: Ia0cc7b338d0866e5aaf76604e732f44b9ac2e433\n'}]",0,803250,740bea8d4a5a4ad5980117fad341b9d51fa8ce15,9,3,1,11131,,,0,"update constraint for reno to new release 3.4.0

meta: version: 3.4.0
meta: diff-start: -
meta: series: independent
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Előd Illés <elod.illes@est.tech>
meta: release:Commit: Előd Illés <elod.illes@est.tech>
meta: release:Change-Id: I3b2c07884706e9d7edcc21a82249eff3089cc47d
meta: release:Code-Review+1: Matthew Treinish <mtreinish@kortar.org>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>
meta: release:Workflow+1: Hervé Beraud <herveberaud.pro@gmail.com>
Change-Id: Ia0cc7b338d0866e5aaf76604e732f44b9ac2e433
",git fetch https://review.opendev.org/openstack/requirements refs/changes/50/803250/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,740bea8d4a5a4ad5980117fad341b9d51fa8ce15,new-release,reno===3.4.0,reno===3.3.0,1,1
openstack%2Fkayobe~stable%2Fwallaby~I89556b45073f5d469c00d0724aad295316495e83,openstack/kayobe,stable/wallaby,I89556b45073f5d469c00d0724aad295316495e83,Sync Kolla Ansible feature flags,MERGED,2021-08-03 14:59:24.000000000,2021-08-03 18:36:52.000000000,2021-08-03 18:35:26.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 14:59:24.000000000', 'files': ['etc/kayobe/kolla.yml', 'ansible/roles/kolla-ansible/vars/main.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/27ccf48f1b5160da4be0e8568a9ea32bd9738444', 'message': 'Sync Kolla Ansible feature flags\n\nKolla Ansible removed support for the Cinder ZFSSA backend just after\nthe Wallaby release, to sync with upstream Cinder.\n\nChange-Id: I89556b45073f5d469c00d0724aad295316495e83\n'}]",0,803360,27ccf48f1b5160da4be0e8568a9ea32bd9738444,7,2,1,15197,,,0,"Sync Kolla Ansible feature flags

Kolla Ansible removed support for the Cinder ZFSSA backend just after
the Wallaby release, to sync with upstream Cinder.

Change-Id: I89556b45073f5d469c00d0724aad295316495e83
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/60/803360/1 && git format-patch -1 --stdout FETCH_HEAD,"['etc/kayobe/kolla.yml', 'ansible/roles/kolla-ansible/vars/main.yml']",2,27ccf48f1b5160da4be0e8568a9ea32bd9738444,,, - cinder_backend_zfssa_iscsi,0,2
openstack%2Ftripleo-heat-templates~master~I6fb00e27f8d18ff42f214e5045301c3334d14277,openstack/tripleo-heat-templates,master,I6fb00e27f8d18ff42f214e5045301c3334d14277,Stop using tripleo_container_manage_systemd_order,MERGED,2021-07-22 09:28:13.000000000,2021-08-03 18:36:49.000000000,2021-08-03 18:36:49.000000000,"[{'_account_id': 6469}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-22 09:28:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d2aa6850d74d6242f151fa642736adfb9474eef6', 'message': 'WIP Stop using tripleo_container_manage_systemd_order\n\nChange-Id: I6fb00e27f8d18ff42f214e5045301c3334d14277\n'}, {'number': 2, 'created': '2021-07-27 07:52:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d7787fbaf8c9c9053532dd6b3d6efeaaddd5fb80', 'message': 'WIP Stop using tripleo_container_manage_systemd_order\n\nChange-Id: I6fb00e27f8d18ff42f214e5045301c3334d14277\n'}, {'number': 3, 'created': '2021-08-02 15:59:34.000000000', 'files': ['common/deploy-steps-tasks.yaml', 'deployment/ovn/ovn-dbs-cluster-ansible.yaml', 'deployment/frr/frr-container-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/be04d6fa9a453f9f07d663f2a54d3a8d68d2812f', 'message': 'Stop using tripleo_container_manage_systemd_order\n\nVia Ief0729e51997c3eb1dba679cc40ce7bbf4702bc3 ""Adjust shutdown service\nmanagement"" we dropped support for tripleo_container_manage_systemd_order\nlet\'s just remove its use in THT before we remove all traces of it in\ntripleo-ansible (via Icc93a5f2d05ef79ff81748435d385cb83b469d4b).\n\nChange-Id: I6fb00e27f8d18ff42f214e5045301c3334d14277\n'}]",0,801745,be04d6fa9a453f9f07d663f2a54d3a8d68d2812f,15,5,3,20172,,,0,"Stop using tripleo_container_manage_systemd_order

Via Ief0729e51997c3eb1dba679cc40ce7bbf4702bc3 ""Adjust shutdown service
management"" we dropped support for tripleo_container_manage_systemd_order
let's just remove its use in THT before we remove all traces of it in
tripleo-ansible (via Icc93a5f2d05ef79ff81748435d385cb83b469d4b).

Change-Id: I6fb00e27f8d18ff42f214e5045301c3334d14277
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/45/801745/1 && git format-patch -1 --stdout FETCH_HEAD,"['common/deploy-steps-tasks.yaml', 'deployment/frr/frr-container-ansible.yaml', 'deployment/ovn/ovn-dbs-cluster-ansible.yaml']",3,d2aa6850d74d6242f151fa642736adfb9474eef6,order-cleanup,, tripleo_container_manage_systemd_order: true,0,3
openstack%2Ftripleo-heat-templates~master~Iac0131e16171d0aa43fa5584c2549f77537ac4c8,openstack/tripleo-heat-templates,master,Iac0131e16171d0aa43fa5584c2549f77537ac4c8,Wire up renamed upgrade periodic template,MERGED,2021-07-27 15:19:54.000000000,2021-08-03 18:36:45.000000000,2021-08-03 18:36:45.000000000,"[{'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 31075}]","[{'number': 1, 'created': '2021-07-27 15:19:54.000000000', 'files': ['zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ad28f5da4b2cca52d3003383761c22ed64c7d8e5', 'message': 'Wire up renamed upgrade periodic template\n\nThe template being wired up here is added in depends-on by renaming\nthe existing periodic upgrade templates. See [1] for the context,\nbut the result is we will now only run these jobs once in periodic.\n\n[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274\nDepends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92\n\nChange-Id: Iac0131e16171d0aa43fa5584c2549f77537ac4c8\n'}]",0,802538,ad28f5da4b2cca52d3003383761c22ed64c7d8e5,15,5,1,8449,,,0,"Wire up renamed upgrade periodic template

The template being wired up here is added in depends-on by renaming
the existing periodic upgrade templates. See [1] for the context,
but the result is we will now only run these jobs once in periodic.

[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274
Depends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92

Change-Id: Iac0131e16171d0aa43fa5584c2549f77537ac4c8
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/38/802538/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/layout.yaml'],1,ad28f5da4b2cca52d3003383761c22ed64c7d8e5,upstream-periodic-run-once, - tripleo-periodic-upgrades-master-pipeline,,1,0
openstack%2Ftripleo-heat-templates~stable%2Fussuri~Ie1d3fff23ee49a368dcdb78b9a97ffdf02688077,openstack/tripleo-heat-templates,stable/ussuri,Ie1d3fff23ee49a368dcdb78b9a97ffdf02688077,Wire up renamed upgrade periodic template,MERGED,2021-07-27 15:31:06.000000000,2021-08-03 18:36:41.000000000,2021-08-03 18:36:41.000000000,"[{'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-27 15:31:06.000000000', 'files': ['zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5324b528bbfd22f38be56c541f0a64b9f4b23baa', 'message': 'Wire up renamed upgrade periodic template\n\nThe template being wired up here is added in depends-on by renaming\nthe existing periodic upgrade templates. See [1] for the context,\nbut the result is we will now only run these jobs once in periodic.\n\n[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274\nDepends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92\n\nChange-Id: Ie1d3fff23ee49a368dcdb78b9a97ffdf02688077\n'}]",0,802545,5324b528bbfd22f38be56c541f0a64b9f4b23baa,14,4,1,8449,,,0,"Wire up renamed upgrade periodic template

The template being wired up here is added in depends-on by renaming
the existing periodic upgrade templates. See [1] for the context,
but the result is we will now only run these jobs once in periodic.

[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274
Depends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92

Change-Id: Ie1d3fff23ee49a368dcdb78b9a97ffdf02688077
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/45/802545/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/layout.yaml'],1,5324b528bbfd22f38be56c541f0a64b9f4b23baa,upstream-periodic-run-once, - tripleo-periodic-upgrades-ussuri-pipeline,,1,0
openstack%2Ftripleo-heat-templates~stable%2Fvictoria~Ib7bf3d65ae2eecaae61a09202a01ccf4dbb00445,openstack/tripleo-heat-templates,stable/victoria,Ib7bf3d65ae2eecaae61a09202a01ccf4dbb00445,Wire up renamed upgrade periodic template,MERGED,2021-07-27 15:27:33.000000000,2021-08-03 18:36:39.000000000,2021-08-03 18:36:39.000000000,"[{'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-27 15:27:33.000000000', 'files': ['zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b88f4ddd96e0d7e192fe079dcd34644c49feb683', 'message': 'Wire up renamed upgrade periodic template\n\nThe template being wired up here is added in depends-on by renaming\nthe existing periodic upgrade templates. See [1] for the context,\nbut the result is we will now only run these jobs once in periodic.\n\n[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274\nDepends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92\n\nChange-Id: Ib7bf3d65ae2eecaae61a09202a01ccf4dbb00445\n'}]",0,802544,b88f4ddd96e0d7e192fe079dcd34644c49feb683,14,4,1,8449,,,0,"Wire up renamed upgrade periodic template

The template being wired up here is added in depends-on by renaming
the existing periodic upgrade templates. See [1] for the context,
but the result is we will now only run these jobs once in periodic.

[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274
Depends-On: Iabe367d2e170bec44820a70c0760d8beea49ec92

Change-Id: Ib7bf3d65ae2eecaae61a09202a01ccf4dbb00445
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/44/802544/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/layout.yaml'],1,b88f4ddd96e0d7e192fe079dcd34644c49feb683,upstream-periodic-run-once, - tripleo-periodic-upgrades-victoria-pipeline,,1,0
openstack%2Frequirements~master~I9b6aaa89aeb21b782e74aa1ef99ca1b06ceca101,openstack/requirements,master,I9b6aaa89aeb21b782e74aa1ef99ca1b06ceca101,update constraint for sushy to new release 3.11.0,MERGED,2021-08-03 08:40:27.000000000,2021-08-03 18:29:05.000000000,2021-08-03 18:27:48.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 08:40:27.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/e09c87a00c56fb466365b52d5bd5f443e1567474', 'message': 'update constraint for sushy to new release 3.11.0\n\nmeta: version: 3.11.0\nmeta: diff-start: -\nmeta: series: xena\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: no\nmeta: release:Author: Riccardo Pittau <elfosardo@gmail.com>\nmeta: release:Commit: Riccardo Pittau <elfosardo@gmail.com>\nmeta: release:Change-Id: I1b72115432647e90388248def07928ed8b46d966\nmeta: release:Code-Review+1: Iury Gregory Melo Ferreira <iurygregory@gmail.com>\nmeta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nChange-Id: I9b6aaa89aeb21b782e74aa1ef99ca1b06ceca101\n'}]",0,803319,e09c87a00c56fb466365b52d5bd5f443e1567474,9,3,1,11131,,,0,"update constraint for sushy to new release 3.11.0

meta: version: 3.11.0
meta: diff-start: -
meta: series: xena
meta: release-type: release
meta: pypi: no
meta: first: no
meta: release:Author: Riccardo Pittau <elfosardo@gmail.com>
meta: release:Commit: Riccardo Pittau <elfosardo@gmail.com>
meta: release:Change-Id: I1b72115432647e90388248def07928ed8b46d966
meta: release:Code-Review+1: Iury Gregory Melo Ferreira <iurygregory@gmail.com>
meta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
Change-Id: I9b6aaa89aeb21b782e74aa1ef99ca1b06ceca101
",git fetch https://review.opendev.org/openstack/requirements refs/changes/19/803319/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,e09c87a00c56fb466365b52d5bd5f443e1567474,new-release,sushy===3.11.0,sushy===3.10.0,1,1
openstack%2Fopenstack-helm-infra~master~I10561c0b0b464c3b67d4a738f9f2cb70ef601b3d,openstack/openstack-helm-infra,master,I10561c0b0b464c3b67d4a738f9f2cb70ef601b3d,Add Alertmanager dashboard to Grafana,MERGED,2021-08-02 19:44:05.000000000,2021-08-03 18:27:03.000000000,2021-08-03 18:25:20.000000000,"[{'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 27499}, {'_account_id': 28025}, {'_account_id': 30777}, {'_account_id': 33671}]","[{'number': 1, 'created': '2021-08-02 19:44:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/58a0884fbb8e0b6839d735770ebedf54a675a7fa', 'message': 'Add Alertmanager dashboard to Grafana\n\nThis patch set adds a new Alertmanager dashboard to Grafana.  Note\nthat a new configmap is created for this instead of using the\nsame configmap which includes all the dashboards. Using the same\nconfigmap will eventually run into issue with configmap size limitation.\n\nChange-Id: I10561c0b0b464c3b67d4a738f9f2cb70ef601b3d\n'}, {'number': 2, 'created': '2021-08-02 19:52:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e2cde9fb793d6030892f0a3b30f608c731934ff5', 'message': 'Add Alertmanager dashboard to Grafana\n\nThis patch set adds a new Alertmanager dashboard to Grafana.  Note\nthat a new configmap is created for this instead of using the\nsame configmap which includes all the dashboards. Using the same\nconfigmap will eventually run into issue with configmap size limitation.\n\nChange-Id: I10561c0b0b464c3b67d4a738f9f2cb70ef601b3d\n'}, {'number': 3, 'created': '2021-08-02 20:17:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/22b3ab042844460828186f6a4e2701af3ea95f96', 'message': 'Add Alertmanager dashboard to Grafana\n\nThis patch set adds a new Alertmanager dashboard to Grafana.  Note\nthat a new configmap is created for this instead of using the\nsame configmap which includes all the dashboards. Using the same\nconfigmap will eventually run into issue with configmap size limitation.\n\nChange-Id: I10561c0b0b464c3b67d4a738f9f2cb70ef601b3d\n'}, {'number': 4, 'created': '2021-08-02 23:05:57.000000000', 'files': ['grafana/values.yaml', 'releasenotes/notes/grafana.yaml', 'grafana/Chart.yaml', 'grafana/templates/deployment.yaml', 'grafana/templates/configmap-dashboards-alertmanager.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5a290e1d8367f9dad9e87aadc1904af56afc06a4', 'message': 'Add Alertmanager dashboard to Grafana\n\nThis patch set adds a new Alertmanager dashboard to Grafana.  Note\nthat a new configmap is created for this instead of using the\nsame configmap which includes all the dashboards. Using the same\nconfigmap will eventually run into issue with configmap size limitation.\n\nChange-Id: I10561c0b0b464c3b67d4a738f9f2cb70ef601b3d\n'}]",8,803258,5a290e1d8367f9dad9e87aadc1904af56afc06a4,23,7,4,19391,,,0,"Add Alertmanager dashboard to Grafana

This patch set adds a new Alertmanager dashboard to Grafana.  Note
that a new configmap is created for this instead of using the
same configmap which includes all the dashboards. Using the same
configmap will eventually run into issue with configmap size limitation.

Change-Id: I10561c0b0b464c3b67d4a738f9f2cb70ef601b3d
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/58/803258/3 && git format-patch -1 --stdout FETCH_HEAD,"['grafana/values.yaml', 'grafana/templates/deployment.yaml', 'grafana/templates/configmap-dashboards-alertmanager.yaml']",3,58a0884fbb8e0b6839d735770ebedf54a675a7fa,,"{{/* Licensed under the Apache License, Version 2.0 (the ""License""); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */}} {{- if .Values.manifests.configmap_dashboards_alertmanager }} --- apiVersion: v1 kind: ConfigMap metadata: name: grafana-dashboards-alertmanager data: {{ range $key, $value := .Values.conf.dashboards-alertmanager }} {{$key}}.json: {{ $value | toJson }} {{ end }} {{- end }} ",,36,0
openstack%2Fmasakari-monitors~master~Ibf89716c2d5df04541aa746a0b3c54a897710015,openstack/masakari-monitors,master,Ibf89716c2d5df04541aa746a0b3c54a897710015,[doc] Add masakari monitors usage,MERGED,2021-01-07 09:40:13.000000000,2021-08-03 18:26:55.000000000,2021-08-03 18:25:23.000000000,"[{'_account_id': 1011}, {'_account_id': 8716}, {'_account_id': 22348}, {'_account_id': 26458}, {'_account_id': 30491}, {'_account_id': 32304}]","[{'number': 1, 'created': '2021-01-07 09:40:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/9a69eeee931ce6b63ee425b98a4efcac43728abf', 'message': 'add masakari monitor docs\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}, {'number': 2, 'created': '2021-01-07 10:02:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/011a6e95413423dc31d3d25b79a779814b70897e', 'message': 'add masakari monitors usage\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}, {'number': 3, 'created': '2021-08-02 07:36:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/f9544e7ed23249e3d8e29eed715162ae85706127', 'message': 'add masakari monitors usage\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}, {'number': 4, 'created': '2021-08-02 07:58:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/dcfb0301f2e57f0b90dcbb3e1dfba890b78ac892', 'message': 'add masakari monitors usage\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}, {'number': 5, 'created': '2021-08-03 00:42:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/9f1099ac6c0793fb15a667f076004a3a5e72febf', 'message': 'add masakari monitors usage\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}, {'number': 6, 'created': '2021-08-03 17:50:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/e9383b605d99e6a7ae563101e368cc5bb49d8023', 'message': 'add masakari monitors usage\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}, {'number': 7, 'created': '2021-08-03 17:50:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/f18767238f45a2229099956dc9acc8d1bc9ae0f2', 'message': '[doc] Add masakari monitors usage\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}, {'number': 8, 'created': '2021-08-03 18:08:03.000000000', 'files': ['doc/source/hostmonitor.rst', 'doc/source/usage.rst', 'doc/source/introspectiveinstancemonitor.rst', 'doc/source/processmonitor.rst', 'doc/source/instancemonitor.rst'], 'web_link': 'https://opendev.org/openstack/masakari-monitors/commit/fe85b8debbd39de15e10e1c042f98fd771b3cfde', 'message': '[doc] Add masakari monitors usage\n\nChange-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015\n'}]",12,769692,fe85b8debbd39de15e10e1c042f98fd771b3cfde,29,6,8,24501,,,0,"[doc] Add masakari monitors usage

Change-Id: Ibf89716c2d5df04541aa746a0b3c54a897710015
",git fetch https://review.opendev.org/openstack/masakari-monitors refs/changes/92/769692/8 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/hostmonitor.rst', 'doc/source/index.rst', 'doc/source/introspectiveinstancemonitor.rst', 'doc/source/usage.rst', 'doc/source/processmonitor.rst', 'doc/source/instancemonitor.rst']",6,9a69eeee931ce6b63ee425b98a4efcac43728abf,add-docs,"========================= masakari-instancemonitor ========================= Monitor Overview ------------------ - masakari-instancemonitor, provides Virtual Machine High Availability for OpenStack clouds by automatically detecting VMs domain events via libvirt. If it detects specific libvirt events, it sends notifications to the masakari-api. How does it work? ---------------------------------------- - It runs libvit event loop in a background thread. - Invoking libvirt.virEventRegisterDefaultImpl() will register libvirt's default event loop implementation. - Invoking libvirt.virEventRunDefaultImpl() will perform one iteration of the libvirt default event loop. - Invoking conn.domainEventRegisterAny() will register event callbacks against libvirt connection instances. The callbacks registered will be triggered from the execution context of libvirt.virEventRunDefaultImpl(), which will send notifications to the masakari-api. - It will reconnect to libvirt and reprocess if disconnected. Related configurations ------------------------ This section in masakarimonitors.conf shows you how to configure the monitor. .. code-block:: ini [libvirt] # Override the default libvirt URI. connection_uri = qemu:///system",,251,5
openstack%2Ftripleo-ci~master~Iabe367d2e170bec44820a70c0760d8beea49ec92,openstack/tripleo-ci,master,Iabe367d2e170bec44820a70c0760d8beea49ec92,Rename the upstream upgrades templates so we can run only once,MERGED,2021-07-27 15:19:41.000000000,2021-08-03 18:21:57.000000000,2021-08-03 18:21:57.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 31075}]","[{'number': 1, 'created': '2021-07-27 15:19:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/0f2bba94926edcf295784fb0362a81d076ca17c4', 'message': 'Rename the upstream upgrades templates so we can run only once\n\nCurrently the periodic upgrades templates share the same name\nas the non periodic versions. As discussed in [1] this means those\njobs are running for all the repos unnecessarily. This change\nrenames to add -periodic- into the name. Then we can wire this\nup into only one repo - tripleo-heat-templates see [2].\n\n[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274\n[2] Iac0131e16171d0aa43fa5584c2549f77537ac4c8\n\nChange-Id: Iabe367d2e170bec44820a70c0760d8beea49ec92\n'}, {'number': 2, 'created': '2021-08-02 16:40:30.000000000', 'files': ['zuul.d/periodic.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/fd1a991ebde10cb6c92730e42534d88b2506ffc9', 'message': 'Rename the upstream upgrades templates so we can run only once\n\nCurrently the periodic upgrades templates share the same name\nas the non periodic versions. As discussed in [1] this means those\njobs are running for all the repos unnecessarily. This change\nrenames to add -periodic- into the name. Then we can wire this\nup into only one repo - tripleo-heat-templates see [2].\n\n[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274\n[2] Iac0131e16171d0aa43fa5584c2549f77537ac4c8\n\nChange-Id: Iabe367d2e170bec44820a70c0760d8beea49ec92\n'}]",0,802537,fd1a991ebde10cb6c92730e42534d88b2506ffc9,18,8,2,8449,,,0,"Rename the upstream upgrades templates so we can run only once

Currently the periodic upgrades templates share the same name
as the non periodic versions. As discussed in [1] this means those
jobs are running for all the repos unnecessarily. This change
renames to add -periodic- into the name. Then we can wire this
up into only one repo - tripleo-heat-templates see [2].

[1] https://review.opendev.org/c/openstack/tripleo-ci/+/797865/17#message-ca33adc95782a24a6579df7552af5096a0ac8274
[2] Iac0131e16171d0aa43fa5584c2549f77537ac4c8

Change-Id: Iabe367d2e170bec44820a70c0760d8beea49ec92
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/37/802537/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/periodic.yaml'],1,0f2bba94926edcf295784fb0362a81d076ca17c4,upstream-periodic-run-once, name: tripleo-periodic-upgrades-victoria-pipeline name: tripleo-periodic-upgrades-ussuri-pipeline name: tripleo-periodic-upgrades-master-pipeline name: tripleo-periodic-upgrades-wallaby-pipeline, name: tripleo-upgrades-victoria-pipeline name: tripleo-upgrades-ussuri-pipeline name: tripleo-upgrades-master-pipeline name: tripleo-upgrades-wallaby-pipeline,4,4
openstack%2Ftripleo-quickstart~master~Id7c8404914c73f3b72480ba64c0e60e9dcdf27fb,openstack/tripleo-quickstart,master,Id7c8404914c73f3b72480ba64c0e60e9dcdf27fb,Install tripleo-operator-ansible on cico node,MERGED,2021-08-03 05:39:52.000000000,2021-08-03 18:16:32.000000000,2021-08-03 18:15:05.000000000,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-03 05:39:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/e18eb0471dc6d856ee6af1466b9cd63f03c2ab89', 'message': 'Install tripleo-operator-ansible on cico node\n\nAs in ci.centos jobs, quickstart.sh is getting executed on\ncico slave node where we donot sudo access. The playbook\nexecution is failing as tripleo-operator-ansible roles\nare not getting discovered.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nalready removed the git installation of tripleo-operator-ansible\nand we cannot install it via rpm so the failure is legit.\n\nIn order to fix that, we need to install tripleo-operator-ansible\nfrom git on cico nodes.\n\nSince it is kept under ci-base-requirements.txt used only in\nci.centos jobs so it is not going to affect any other\ndeployments.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Id7c8404914c73f3b72480ba64c0e60e9dcdf27fb\n'}, {'number': 2, 'created': '2021-08-03 08:32:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/cfa62c40a52af4c20e665b06ca3d03e3922e1fcf', 'message': 'Install tripleo-operator-ansible on cico node\n\nAs in ci.centos jobs, quickstart.sh is getting executed on\ncico slave node where we donot sudo access. The playbook\nexecution is failing as tripleo-operator-ansible roles\nare not getting discovered.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nalready removed the git installation of tripleo-operator-ansible\nand we cannot install it via rpm so the failure is legit.\n\nIn order to fix that, we need to install tripleo-operator-ansible\nfrom git on cico nodes.\n\nSince it is kept under ci-base-requirements.txt used only in\nci.centos jobs so it is not going to affect any other\ndeployments.\n\nRelated-Bug: ##1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Id7c8404914c73f3b72480ba64c0e60e9dcdf27fb\n'}, {'number': 3, 'created': '2021-08-03 08:38:47.000000000', 'files': ['ci-scripts/ci-base-requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/444fcff6b17b77778382cd0be5a45f7b85a7b7ca', 'message': 'Install tripleo-operator-ansible on cico node\n\nAs in ci.centos jobs, quickstart.sh is getting executed on\ncico slave node where we donot sudo access. The playbook\nexecution is failing as tripleo-operator-ansible roles\nare not getting discovered.\n\nSince https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701\nalready removed the git installation of tripleo-operator-ansible\nand we cannot install it via rpm so the failure is legit.\n\nIn order to fix that, we need to install tripleo-operator-ansible\nfrom git on cico nodes.\n\nSince it is kept under ci-base-requirements.txt used only in\nci.centos jobs so it is not going to affect any other\ndeployments.\n\nRelated-Bug: #1938638\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Id7c8404914c73f3b72480ba64c0e60e9dcdf27fb\n'}]",3,803307,444fcff6b17b77778382cd0be5a45f7b85a7b7ca,18,7,3,12393,,,0,"Install tripleo-operator-ansible on cico node

As in ci.centos jobs, quickstart.sh is getting executed on
cico slave node where we donot sudo access. The playbook
execution is failing as tripleo-operator-ansible roles
are not getting discovered.

Since https://review.opendev.org/c/openstack/tripleo-quickstart/+/790701
already removed the git installation of tripleo-operator-ansible
and we cannot install it via rpm so the failure is legit.

In order to fix that, we need to install tripleo-operator-ansible
from git on cico nodes.

Since it is kept under ci-base-requirements.txt used only in
ci.centos jobs so it is not going to affect any other
deployments.

Related-Bug: #1938638

Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: Id7c8404914c73f3b72480ba64c0e60e9dcdf27fb
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/07/803307/1 && git format-patch -1 --stdout FETCH_HEAD,['ci-scripts/ci-base-requirements.txt'],1,e18eb0471dc6d856ee6af1466b9cd63f03c2ab89,remove_uneeded_tq_requirements,# As there is no sudo access on ci.centos slave node # So tripleo-operator-ansible needs to be installed on # ci.centos slave node so that quickstart will discover # the tripleo operator collections. git+https://opendev.org/openstack/tripleo-operator-ansible/#egg=tripleo-operator-ansible,,5,0
openstack%2Ftripleo-validations~stable%2Ftrain~If0dc3300fbd8cf245c0477be782110d897344860,openstack/tripleo-validations,stable/train,If0dc3300fbd8cf245c0477be782110d897344860,Fix Inventory Generation without Overcloud deployed,MERGED,2021-07-29 14:45:14.000000000,2021-08-03 18:15:03.000000000,2021-08-03 18:15:03.000000000,"[{'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 14:45:14.000000000', 'files': ['scripts/tripleo-ansible-inventory'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/fb5b7bcd8b6a702d64405fab605297b504cf496e', 'message': 'Fix Inventory Generation without Overcloud deployed\n\nThe utils.list_plan_and_stack function returns None in case of exceptions\nor and empty list if no stacks or no plans have been found in the\nenvironment.\n\nThis patch fixes the conditional to allow the tripleo-ansible-inventory\nscript to generate only the undercloud Inventory when no Overcloud has\nbeen deployed.\n\nRelated-bz: rhbz#1987318\n\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\nChange-Id: If0dc3300fbd8cf245c0477be782110d897344860\n(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)\n(cherry picked from commit 9289704779b9bd520be82db9b01ba8e28c6e1563)\n(cherry picked from commit 8ad642f5385f10035d520b44de6e08d48227448c)\n(cherry picked from commit 1e9ba890302b37f9749ae30ca4ef2cc5950c94e7)\n'}]",0,802888,fb5b7bcd8b6a702d64405fab605297b504cf496e,10,8,1,11491,,,0,"Fix Inventory Generation without Overcloud deployed

The utils.list_plan_and_stack function returns None in case of exceptions
or and empty list if no stacks or no plans have been found in the
environment.

This patch fixes the conditional to allow the tripleo-ansible-inventory
script to generate only the undercloud Inventory when no Overcloud has
been deployed.

Related-bz: rhbz#1987318

Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
Change-Id: If0dc3300fbd8cf245c0477be782110d897344860
(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)
(cherry picked from commit 9289704779b9bd520be82db9b01ba8e28c6e1563)
(cherry picked from commit 8ad642f5385f10035d520b44de6e08d48227448c)
(cherry picked from commit 1e9ba890302b37f9749ae30ca4ef2cc5950c94e7)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/88/802888/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/tripleo-ansible-inventory'],1,fb5b7bcd8b6a702d64405fab605297b504cf496e,rhbz#1887444, if not plans:, if plans is None:,1,1
openstack%2Ftripleo-validations~stable%2Fussuri~If0dc3300fbd8cf245c0477be782110d897344860,openstack/tripleo-validations,stable/ussuri,If0dc3300fbd8cf245c0477be782110d897344860,Fix Inventory Generation without Overcloud deployed,MERGED,2021-07-29 14:44:30.000000000,2021-08-03 18:15:02.000000000,2021-08-03 18:15:02.000000000,"[{'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 14:44:30.000000000', 'files': ['scripts/tripleo-ansible-inventory'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/1e9ba890302b37f9749ae30ca4ef2cc5950c94e7', 'message': 'Fix Inventory Generation without Overcloud deployed\n\nThe utils.list_plan_and_stack function returns None in case of exceptions\nor and empty list if no stacks or no plans have been found in the\nenvironment.\n\nThis patch fixes the conditional to allow the tripleo-ansible-inventory\nscript to generate only the undercloud Inventory when no Overcloud has\nbeen deployed.\n\nRelated-bz: rhbz#1987318\n\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\nChange-Id: If0dc3300fbd8cf245c0477be782110d897344860\n(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)\n(cherry picked from commit 9289704779b9bd520be82db9b01ba8e28c6e1563)\n(cherry picked from commit 8ad642f5385f10035d520b44de6e08d48227448c)\n'}]",0,802887,1e9ba890302b37f9749ae30ca4ef2cc5950c94e7,8,8,1,11491,,,0,"Fix Inventory Generation without Overcloud deployed

The utils.list_plan_and_stack function returns None in case of exceptions
or and empty list if no stacks or no plans have been found in the
environment.

This patch fixes the conditional to allow the tripleo-ansible-inventory
script to generate only the undercloud Inventory when no Overcloud has
been deployed.

Related-bz: rhbz#1987318

Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
Change-Id: If0dc3300fbd8cf245c0477be782110d897344860
(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)
(cherry picked from commit 9289704779b9bd520be82db9b01ba8e28c6e1563)
(cherry picked from commit 8ad642f5385f10035d520b44de6e08d48227448c)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/87/802887/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/tripleo-ansible-inventory'],1,1e9ba890302b37f9749ae30ca4ef2cc5950c94e7,rhbz#1887444, if not plans:, if plans is None:,1,1
openstack%2Ftripleo-validations~stable%2Fvictoria~If0dc3300fbd8cf245c0477be782110d897344860,openstack/tripleo-validations,stable/victoria,If0dc3300fbd8cf245c0477be782110d897344860,Fix Inventory Generation without Overcloud deployed,MERGED,2021-07-29 14:43:21.000000000,2021-08-03 18:15:00.000000000,2021-08-03 18:15:00.000000000,"[{'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 14:43:21.000000000', 'files': ['scripts/tripleo-ansible-inventory'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/8ad642f5385f10035d520b44de6e08d48227448c', 'message': 'Fix Inventory Generation without Overcloud deployed\n\nThe utils.list_plan_and_stack function returns None in case of exceptions\nor and empty list if no stacks or no plans have been found in the\nenvironment.\n\nThis patch fixes the conditional to allow the tripleo-ansible-inventory\nscript to generate only the undercloud Inventory when no Overcloud has\nbeen deployed.\n\nRelated-bz: rhbz#1987318\n\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\nChange-Id: If0dc3300fbd8cf245c0477be782110d897344860\n(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)\n(cherry picked from commit 9289704779b9bd520be82db9b01ba8e28c6e1563)\n'}]",0,802886,8ad642f5385f10035d520b44de6e08d48227448c,9,8,1,11491,,,0,"Fix Inventory Generation without Overcloud deployed

The utils.list_plan_and_stack function returns None in case of exceptions
or and empty list if no stacks or no plans have been found in the
environment.

This patch fixes the conditional to allow the tripleo-ansible-inventory
script to generate only the undercloud Inventory when no Overcloud has
been deployed.

Related-bz: rhbz#1987318

Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
Change-Id: If0dc3300fbd8cf245c0477be782110d897344860
(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)
(cherry picked from commit 9289704779b9bd520be82db9b01ba8e28c6e1563)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/86/802886/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/tripleo-ansible-inventory'],1,8ad642f5385f10035d520b44de6e08d48227448c,rhbz#1887444, if not plans:, if plans is None:,1,1
openstack%2Fkayobe~stable%2Fwallaby~I082e1b807497d17ae40ddf86e1473fbfcdf625e2,openstack/kayobe,stable/wallaby,I082e1b807497d17ae40ddf86e1473fbfcdf625e2,Ubuntu: Set MTU for veth in the network files,MERGED,2021-08-03 12:47:32.000000000,2021-08-03 18:08:35.000000000,2021-08-03 18:07:05.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 33466}]","[{'number': 1, 'created': '2021-08-03 12:47:32.000000000', 'files': ['kayobe/plugins/filter/networkd.py', 'kayobe/tests/unit/plugins/filter/test_networkd.py', 'releasenotes/notes/story-2009072-57e5d079e182e763.yaml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/af6495fa26087fb9cab904636da3ee8df708bb28', 'message': ""Ubuntu: Set MTU for veth in the network files\n\nConfiguring veth pair MTU in the systemd-networkd .netdev files\ndoes not set the correct MTU for the peer and there isn't\nconfiguration option in the [Peer] section to do so [1].\nThis results in an MTU mismatch with peer having the default\n(1500) value.\n\nThis change moves the MTU configuration from the .netdev file\nto the [Link] section of the corresponding veth pair .network files.\nSame approach is already recommended in [1] for the tun and\ntap devices.\n\n[1] https://www.freedesktop.org/software/systemd/man/systemd.netdev.html\n\nStory: 2009072\nTask: 42882\nChange-Id: I082e1b807497d17ae40ddf86e1473fbfcdf625e2\n(cherry picked from commit 5a0206aef1f78d54845593556c13acbde99a7419)\n""}]",0,803283,af6495fa26087fb9cab904636da3ee8df708bb28,8,4,1,15197,,,0,"Ubuntu: Set MTU for veth in the network files

Configuring veth pair MTU in the systemd-networkd .netdev files
does not set the correct MTU for the peer and there isn't
configuration option in the [Peer] section to do so [1].
This results in an MTU mismatch with peer having the default
(1500) value.

This change moves the MTU configuration from the .netdev file
to the [Link] section of the corresponding veth pair .network files.
Same approach is already recommended in [1] for the tun and
tap devices.

[1] https://www.freedesktop.org/software/systemd/man/systemd.netdev.html

Story: 2009072
Task: 42882
Change-Id: I082e1b807497d17ae40ddf86e1473fbfcdf625e2
(cherry picked from commit 5a0206aef1f78d54845593556c13acbde99a7419)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/83/803283/1 && git format-patch -1 --stdout FETCH_HEAD,"['kayobe/plugins/filter/networkd.py', 'kayobe/tests/unit/plugins/filter/test_networkd.py', 'releasenotes/notes/story-2009072-57e5d079e182e763.yaml']",3,af6495fa26087fb9cab904636da3ee8df708bb28,bug/2009072-stable/wallaby,--- fixes: - | Fixes an issue with systemd-networkd MTU mismatch in veth pair on Ubuntu. See `story 2009072 <https://storyboard.openstack.org/#!/story/2009072>`__ for details. ,,73,33
openstack%2Fcinder~stable%2Fwallaby~I44b89dc7dffc5f04c6149935c5d992d1c44a2709,openstack/cinder,stable/wallaby,I44b89dc7dffc5f04c6149935c5d992d1c44a2709,"test commit, will be abandoned after testing",ABANDONED,2021-04-21 02:06:17.000000000,2021-08-03 17:52:56.000000000,,"[{'_account_id': 4523}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-21 02:06:17.000000000', 'files': ['cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/5caf53a1f2bd38201cb75aef251157ff41fa4533', 'message': 'test commit, will be abandoned after testing\n\nChange-Id: I44b89dc7dffc5f04c6149935c5d992d1c44a2709\n'}]",0,787308,5caf53a1f2bd38201cb75aef251157ff41fa4533,45,2,1,32036,,,0,"test commit, will be abandoned after testing

Change-Id: I44b89dc7dffc5f04c6149935c5d992d1c44a2709
",git fetch https://review.opendev.org/openstack/cinder refs/changes/08/787308/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py'],1,5caf53a1f2bd38201cb75aef251157ff41fa4533,Wallaby, LOG.debug('Entered run_consistgrp_snapshots'),,1,0
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,openstack/tripleo-heat-templates,stable/wallaby,I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,Make memcached port parameters globally available,MERGED,2021-07-29 14:12:59.000000000,2021-08-03 17:50:08.000000000,2021-08-03 17:50:08.000000000,"[{'_account_id': 6926}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-29 14:12:59.000000000', 'files': ['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7e93e936b37c50480e8969f118a9a7a78354e940', 'message': 'Make memcached port parameters globally available\n\nThe memcached_port parameter and the memcached_authtoken_port parameter\nare used in each api service. Because memcached and each api services\nare not always collocated, we should use global hieradata to ensure\nthe parameters defined in memcached service resource are propagated to\nall nodes in the deployment.\n\nChange-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc\n(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)\n'}]",0,802884,7e93e936b37c50480e8969f118a9a7a78354e940,15,7,1,14250,,,0,"Make memcached port parameters globally available

The memcached_port parameter and the memcached_authtoken_port parameter
are used in each api service. Because memcached and each api services
are not always collocated, we should use global hieradata to ensure
the parameters defined in memcached service resource are propagated to
all nodes in the deployment.

Change-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc
(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/84/802884/1 && git format-patch -1 --stdout FETCH_HEAD,"['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml']",2,7e93e936b37c50480e8969f118a9a7a78354e940,," global_config_settings: # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. if: - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort}"," # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort} - if:",10,12
openstack%2Ftripleo-heat-templates~master~If071cb8b99698f511d692263f196e1a9f9c78b1e,openstack/tripleo-heat-templates,master,If071cb8b99698f511d692263f196e1a9f9c78b1e,Designate: Clean up deprecated Rabbit* parameters,MERGED,2021-06-08 13:09:42.000000000,2021-08-03 17:50:03.000000000,2021-08-03 17:50:03.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-06-08 13:09:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4981a9d548b9c4d982e21aff9a1e2299fff1b447', 'message': 'Designate: Clean up deprecated Rabbit* parameters\n\nThe Rabbit* parameters in designate templates were deprecated when\nmost Rabbit* parameters were deprecated[1], but somehow was not covered\nwhen removing these parameters.\nThis change removes these leftovers because these parameters have\nbeen ineffective for a while.\n\n[1] 405366fa32583e88c34417e5f46fa574ed8f4e98\n\nChange-Id: If071cb8b99698f511d692263f196e1a9f9c78b1e\n'}, {'number': 2, 'created': '2021-06-26 16:53:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/74f550ce6de6caa5a47cc29e499ed87cac37b02c', 'message': 'Designate: Clean up deprecated Rabbit* parameters\n\nThe Rabbit* parameters in designate templates were deprecated when\nmost Rabbit* parameters were deprecated[1], but somehow was not covered\nwhen removing these parameters.\nThis change removes these leftovers because these parameters have\nbeen ineffective for a while.\n\n[1] 405366fa32583e88c34417e5f46fa574ed8f4e98\n\nChange-Id: If071cb8b99698f511d692263f196e1a9f9c78b1e\n'}, {'number': 3, 'created': '2021-06-26 16:54:12.000000000', 'files': ['deployment/designate/designate-base.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/3da42835210520e71d78b8797b3132009ca36c3c', 'message': 'Designate: Clean up deprecated Rabbit* parameters\n\nThe Rabbit* parameters in designate templates were deprecated when\nthe Rabbit* parameters were deprecated[1] in all template files, but\nthese parameters were not removed by the clean up commit later.\n\nThis change removes these leftovers because these parameters have\nbeen ineffective for a while.\n\n[1] 405366fa32583e88c34417e5f46fa574ed8f4e98\n\nChange-Id: If071cb8b99698f511d692263f196e1a9f9c78b1e\n'}]",0,795321,3da42835210520e71d78b8797b3132009ca36c3c,13,5,3,9816,,,0,"Designate: Clean up deprecated Rabbit* parameters

The Rabbit* parameters in designate templates were deprecated when
the Rabbit* parameters were deprecated[1] in all template files, but
these parameters were not removed by the clean up commit later.

This change removes these leftovers because these parameters have
been ineffective for a while.

[1] 405366fa32583e88c34417e5f46fa574ed8f4e98

Change-Id: If071cb8b99698f511d692263f196e1a9f9c78b1e
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/21/795321/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/experimental/designate/designate-base.yaml'],1,4981a9d548b9c4d982e21aff9a1e2299fff1b447,,," RabbitPassword: description: The password for RabbitMQ type: string hidden: true RabbitUserName: default: guest description: The username for RabbitMQ type: string RabbitClientUseSSL: default: false description: > Rabbit client subscriber parameter to specify an SSL connection to the RabbitMQ host. type: string RabbitClientPort: default: 5672 description: Set rabbit subscriber port, change this if using SSL type: numberparameter_groups: - label: deprecated description: | The following parameters are deprecated and will be removed. They should not be relied on for new deployments. If you have concerns regarding deprecated parameters, please contact the TripleO development team on IRC or the OpenStack mailing list. parameters: - RabbitPassword - RabbitUserName - RabbitClientUseSSL - RabbitClientPort ",0,31
openstack%2Ftripleo-heat-templates~master~I9d471633d5650544f2fd9a2b00bd9aa166c737c3,openstack/tripleo-heat-templates,master,I9d471633d5650544f2fd9a2b00bd9aa166c737c3,Drop archive policy from enable-legacy-telemetry,MERGED,2021-06-16 16:47:10.000000000,2021-08-03 17:31:09.000000000,2021-08-03 17:31:09.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-06-16 16:47:10.000000000', 'files': ['environments/enable-legacy-telemetry.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/10e0652199083de0b607cc2107b81106a8e09813', 'message': 'Drop archive policy from enable-legacy-telemetry\n\nAdding it there will basically enforce using the archive policy\nhigh all over, and will prevent using any other.\n\nChange-Id: I9d471633d5650544f2fd9a2b00bd9aa166c737c3\n'}]",0,796709,10e0652199083de0b607cc2107b81106a8e09813,22,4,1,4264,,,0,"Drop archive policy from enable-legacy-telemetry

Adding it there will basically enforce using the archive policy
high all over, and will prevent using any other.

Change-Id: I9d471633d5650544f2fd9a2b00bd9aa166c737c3
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/09/796709/1 && git format-patch -1 --stdout FETCH_HEAD,['environments/enable-legacy-telemetry.yaml'],1,10e0652199083de0b607cc2107b81106a8e09813,archive_policy, - gnocchi:// PipelinePublishers: - gnocchi://, - gnocchi://?archive_policy=high PipelinePublishers: - gnocchi://?archive_policy=high,2,2
openstack%2Ftripleo-upgrade~stable%2Ftrain~I84f2a7b9aae674d1971b4f64628ca59bf40419ad,openstack/tripleo-upgrade,stable/train,I84f2a7b9aae674d1971b4f64628ca59bf40419ad,Make the gerrit_url of patches configurable,MERGED,2021-08-02 17:07:15.000000000,2021-08-03 17:31:06.000000000,2021-08-03 17:31:06.000000000,"[{'_account_id': 8297}, {'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}, {'_account_id': 33080}]","[{'number': 1, 'created': '2021-08-02 17:07:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/318e72c85ecb65c1f0f33e1791bb1d19aa010fef', 'message': ""Make the gerrit_url of patches configurable\n\nCurrently patches must come from review.openstack.org but it may\nbe useful to also source them from an alternative gerrit.\n\nThis patch adds a new parameter called 'gerrit_url' which is the\nURL to the gerrit where the patch should be sourced from.\n\nChange-Id: I84f2a7b9aae674d1971b4f64628ca59bf40419ad\n""}, {'number': 2, 'created': '2021-08-02 17:09:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/8840d0c29dcb53265e2c2ccb7a461f7d72e287df', 'message': ""Make the gerrit_url of patches configurable\n\nCurrently patches must come from review.openstack.org but it may\nbe useful to also source them from an alternative gerrit.\n\nThis patch adds a new parameter called 'gerrit_url' which is the\nURL to the gerrit where the patch should be sourced from. The\ndefault value is 'https://review.opendev.org' to ensure that it\nmaintains the current behaviour for backwards compatibility.\n\nChange-Id: I84f2a7b9aae674d1971b4f64628ca59bf40419ad\n""}, {'number': 3, 'created': '2021-08-02 19:38:42.000000000', 'files': ['templates/workarounds.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/d93341dc6898ec807119e6fd1d92690b9f47bfa9', 'message': ""Make the gerrit_url of patches configurable\n\nCurrently patches must come from review.openstack.org but it may\nbe useful to also source them from an alternative gerrit.\n\nThis patch adds a new parameter called 'gerrit_url' which is the\nURL to the gerrit where the patch should be sourced from. The\ndefault value is 'https://review.opendev.org' to ensure that it\nmaintains the current behaviour for backwards compatibility.\n\nChange-Id: I84f2a7b9aae674d1971b4f64628ca59bf40419ad\n""}]",0,803237,d93341dc6898ec807119e6fd1d92690b9f47bfa9,12,6,3,6816,,,0,"Make the gerrit_url of patches configurable

Currently patches must come from review.openstack.org but it may
be useful to also source them from an alternative gerrit.

This patch adds a new parameter called 'gerrit_url' which is the
URL to the gerrit where the patch should be sourced from. The
default value is 'https://review.opendev.org' to ensure that it
maintains the current behaviour for backwards compatibility.

Change-Id: I84f2a7b9aae674d1971b4f64628ca59bf40419ad
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/37/803237/3 && git format-patch -1 --stdout FETCH_HEAD,['templates/workarounds.sh.j2'],1,318e72c85ecb65c1f0f33e1791bb1d19aa010fef,," local gerrit_url=$5 curl -4 --retry 5 ${gerrit_url}/changes/${patch_id}/revisions/${patch_revision}/patch?download | \ echo ""Failed to download patch https://review.opendev.org/${patch_id}""{% set _gerrit_url = value.patch_source | default('https://review.openstack.org', True) -%} apply_patch {{ value.basedir }} {{ value.id }} {{ _patch_revision }} {{ _patch_strip }} {{ _gerrit_url }}"," curl -4 --retry 5 https://review.opendev.org/changes/${patch_id}/revisions/${patch_revision}/patch?download | \ echo ""Failed to download patch https://review.opendev.org/#/c/${patch_id}/""apply_patch {{ value.basedir }} {{ value.id }} {{ _patch_revision }} {{ _patch_strip }}",5,3
openstack%2Fnova~master~If663b0cf93a91c95e507208ff3aea3233115ad4e,openstack/nova,master,If663b0cf93a91c95e507208ff3aea3233115ad4e,DNM - Trigger nova-lvm to test I824655387a10ac9b813c1b7b2399e25ed95f7fc3,ABANDONED,2021-08-03 09:11:39.000000000,2021-08-03 17:29:28.000000000,,[],"[{'number': 1, 'created': '2021-08-03 09:11:39.000000000', 'files': ['nova/virt/libvirt/driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/777f3f9fdf8678c64e61fcbabc5ae257756123a7', 'message': 'DNM - Trigger nova-lvm to test I824655387a10ac9b813c1b7b2399e25ed95f7fc3\n\nChange-Id: If663b0cf93a91c95e507208ff3aea3233115ad4e\n'}]",0,803323,777f3f9fdf8678c64e61fcbabc5ae257756123a7,3,0,1,10135,,,0,"DNM - Trigger nova-lvm to test I824655387a10ac9b813c1b7b2399e25ed95f7fc3

Change-Id: If663b0cf93a91c95e507208ff3aea3233115ad4e
",git fetch https://review.opendev.org/openstack/nova refs/changes/23/803323/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/virt/libvirt/driver.py'],1,777f3f9fdf8678c64e61fcbabc5ae257756123a7,,# # Trigger nova-lvm #,,3,1
openstack%2Fcinder~stable%2Fvictoria~Icd7a929e7cbce0c74f6b340f4e09f74a8098d752,openstack/cinder,stable/victoria,Icd7a929e7cbce0c74f6b340f4e09f74a8098d752,NetApp ONTAP: Fix QoS lost after moving volume,MERGED,2021-07-09 13:14:20.000000000,2021-08-03 17:23:46.000000000,2021-08-03 17:19:45.000000000,"[{'_account_id': 7198}, {'_account_id': 9535}, {'_account_id': 22348}, {'_account_id': 30555}]","[{'number': 1, 'created': '2021-07-09 13:14:20.000000000', 'files': ['releasenotes/notes/netapp-migrated-qos-c0c8aae50d010c75.yaml', 'cinder/volume/drivers/netapp/utils.py', 'cinder/tests/unit/volume/drivers/netapp/fakes.py', 'cinder/volume/drivers/netapp/dataontap/nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/test_utils.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/7eff1a4d7fae410c9c7840519b23e3f724b2d026', 'message': 'NetApp ONTAP: Fix QoS lost after moving volume\n\nWhen a Cinder volume is created with a volume-type associated to a QoS\nentity, the driver creates a QoS policy group at the ONTAP back end, and\nassociates it to the entity representing the Cinder volume (either a LUN\nor a file within an NFS share).\n\nOn NetApp NFS, when a migrate operation is issued and it completes, the\nresulting volume ends up without a QoS.  That happens because the file\nis being renamed while the QoS refers to the now non-existent file.\n\nThis patch makes it so that the file is not renamed when finishing a\nmigration and the driver code uses the ``name_id`` attribute instead of\nthe ``id`` one to refer to the right UUID.\n\nConflicts:\n    cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py\n    cinder/volume/drivers/netapp/dataontap/nfs_base.py\nBoth conflicts are caused by the new code added by\nI507083c3e34e5a5cf1db9a3d1f6bef47bd51a9f8\n\nCloses-Bug: #1906291\nChange-Id: Icd7a929e7cbce0c74f6b340f4e09f74a8098d752\n(cherry picked from commit da100e1fca610cefb7e77079ab3170b068e328a2)\n(cherry picked from commit ee49b67414ef990dd4963f3a4a18d8d3784d8626)\n'}]",0,800228,7eff1a4d7fae410c9c7840519b23e3f724b2d026,17,4,1,10459,,,0,"NetApp ONTAP: Fix QoS lost after moving volume

When a Cinder volume is created with a volume-type associated to a QoS
entity, the driver creates a QoS policy group at the ONTAP back end, and
associates it to the entity representing the Cinder volume (either a LUN
or a file within an NFS share).

On NetApp NFS, when a migrate operation is issued and it completes, the
resulting volume ends up without a QoS.  That happens because the file
is being renamed while the QoS refers to the now non-existent file.

This patch makes it so that the file is not renamed when finishing a
migration and the driver code uses the ``name_id`` attribute instead of
the ``id`` one to refer to the right UUID.

Conflicts:
    cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py
    cinder/volume/drivers/netapp/dataontap/nfs_base.py
Both conflicts are caused by the new code added by
I507083c3e34e5a5cf1db9a3d1f6bef47bd51a9f8

Closes-Bug: #1906291
Change-Id: Icd7a929e7cbce0c74f6b340f4e09f74a8098d752
(cherry picked from commit da100e1fca610cefb7e77079ab3170b068e328a2)
(cherry picked from commit ee49b67414ef990dd4963f3a4a18d8d3784d8626)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/28/800228/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/netapp-migrated-qos-c0c8aae50d010c75.yaml', 'cinder/tests/unit/volume/drivers/netapp/fakes.py', 'cinder/volume/drivers/netapp/utils.py', 'cinder/volume/drivers/netapp/dataontap/nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/test_utils.py']",6,7eff1a4d7fae410c9c7840519b23e3f724b2d026,netapp-qos," delattr(fake.VOLUME, '_obj_id') try: result = na_utils.get_qos_policy_group_name(fake.VOLUME) finally: fake.VOLUME._obj_id = fake.VOLUME_ID def test_get_qos_policy_group_name_migrated_volume(self): fake.VOLUME._name_id = 'asdf' try: expected = 'openstack-' + fake.VOLUME.name_id result = na_utils.get_qos_policy_group_name(fake.VOLUME) finally: fake.VOLUME._name_id = None self.assertEqual(expected, result) ", volume = copy.deepcopy(fake.VOLUME) del(volume['id']) result = na_utils.get_qos_policy_group_name(volume),44,13
openstack%2Fcinder~stable%2Fussuri~Icd7a929e7cbce0c74f6b340f4e09f74a8098d752,openstack/cinder,stable/ussuri,Icd7a929e7cbce0c74f6b340f4e09f74a8098d752,NetApp ONTAP: Fix QoS lost after moving volume,MERGED,2021-07-09 13:15:28.000000000,2021-08-03 17:22:25.000000000,2021-08-03 17:19:50.000000000,"[{'_account_id': 7198}, {'_account_id': 9535}, {'_account_id': 22348}, {'_account_id': 30555}]","[{'number': 1, 'created': '2021-07-09 13:15:28.000000000', 'files': ['releasenotes/notes/netapp-migrated-qos-c0c8aae50d010c75.yaml', 'cinder/volume/drivers/netapp/utils.py', 'cinder/tests/unit/volume/drivers/netapp/fakes.py', 'cinder/volume/drivers/netapp/dataontap/nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/test_utils.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/652ab0aff96a6e6e0aa83c49b20fcce2d1c1cde7', 'message': 'NetApp ONTAP: Fix QoS lost after moving volume\n\nWhen a Cinder volume is created with a volume-type associated to a QoS\nentity, the driver creates a QoS policy group at the ONTAP back end, and\nassociates it to the entity representing the Cinder volume (either a LUN\nor a file within an NFS share).\n\nOn NetApp NFS, when a migrate operation is issued and it completes, the\nresulting volume ends up without a QoS.  That happens because the file\nis being renamed while the QoS refers to the now non-existent file.\n\nThis patch makes it so that the file is not renamed when finishing a\nmigration and the driver code uses the ``name_id`` attribute instead of\nthe ``id`` one to refer to the right UUID.\n\nConflicts:\n    cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py\n    cinder/volume/drivers/netapp/dataontap/nfs_base.py\nBoth conflicts are caused by the new code added by\nI507083c3e34e5a5cf1db9a3d1f6bef47bd51a9f8\n\nCloses-Bug: #1906291\nChange-Id: Icd7a929e7cbce0c74f6b340f4e09f74a8098d752\n(cherry picked from commit da100e1fca610cefb7e77079ab3170b068e328a2)\n(cherry picked from commit ee49b67414ef990dd4963f3a4a18d8d3784d8626)\n(cherry picked from commit 7eff1a4d7fae410c9c7840519b23e3f724b2d026)\n'}]",0,800229,652ab0aff96a6e6e0aa83c49b20fcce2d1c1cde7,27,4,1,10459,,,0,"NetApp ONTAP: Fix QoS lost after moving volume

When a Cinder volume is created with a volume-type associated to a QoS
entity, the driver creates a QoS policy group at the ONTAP back end, and
associates it to the entity representing the Cinder volume (either a LUN
or a file within an NFS share).

On NetApp NFS, when a migrate operation is issued and it completes, the
resulting volume ends up without a QoS.  That happens because the file
is being renamed while the QoS refers to the now non-existent file.

This patch makes it so that the file is not renamed when finishing a
migration and the driver code uses the ``name_id`` attribute instead of
the ``id`` one to refer to the right UUID.

Conflicts:
    cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py
    cinder/volume/drivers/netapp/dataontap/nfs_base.py
Both conflicts are caused by the new code added by
I507083c3e34e5a5cf1db9a3d1f6bef47bd51a9f8

Closes-Bug: #1906291
Change-Id: Icd7a929e7cbce0c74f6b340f4e09f74a8098d752
(cherry picked from commit da100e1fca610cefb7e77079ab3170b068e328a2)
(cherry picked from commit ee49b67414ef990dd4963f3a4a18d8d3784d8626)
(cherry picked from commit 7eff1a4d7fae410c9c7840519b23e3f724b2d026)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/29/800229/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/netapp-migrated-qos-c0c8aae50d010c75.yaml', 'cinder/tests/unit/volume/drivers/netapp/fakes.py', 'cinder/volume/drivers/netapp/utils.py', 'cinder/volume/drivers/netapp/dataontap/nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/test_nfs_base.py', 'cinder/tests/unit/volume/drivers/netapp/test_utils.py']",6,652ab0aff96a6e6e0aa83c49b20fcce2d1c1cde7,netapp-qos," delattr(fake.VOLUME, '_obj_id') try: result = na_utils.get_qos_policy_group_name(fake.VOLUME) finally: fake.VOLUME._obj_id = fake.VOLUME_ID def test_get_qos_policy_group_name_migrated_volume(self): fake.VOLUME._name_id = 'asdf' try: expected = 'openstack-' + fake.VOLUME.name_id result = na_utils.get_qos_policy_group_name(fake.VOLUME) finally: fake.VOLUME._name_id = None self.assertEqual(expected, result) ", volume = copy.deepcopy(fake.VOLUME) del(volume['id']) result = na_utils.get_qos_policy_group_name(volume),44,13
openstack%2Fcinder~stable%2Fwallaby~Idc03d997cfedfc2fcc967cca519997d157df115a,openstack/cinder,stable/wallaby,Idc03d997cfedfc2fcc967cca519997d157df115a,Fix instance locality scheduler filter,MERGED,2021-06-27 11:43:38.000000000,2021-08-03 17:22:13.000000000,2021-08-03 17:19:33.000000000,"[{'_account_id': 7198}, {'_account_id': 9542}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2021-06-27 11:43:38.000000000', 'files': ['cinder/compute/nova.py', 'cinder/scheduler/filters/instance_locality_filter.py', 'cinder/tests/unit/scheduler/test_host_filters.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/d2dc171b02f0a87be296726561ffb5da8339b916', 'message': 'Fix instance locality scheduler filter\n\nthe filter tries to use list_extensions API of novaclient,\nhowever it was removed in Ussuri release\nhttps://review.opendev.org/c/openstack/python-novaclient/+/686516\n\nAll the former extensions are long ago rolled into Nova ""core"" code,\nso we may take the ""extension"" this filter depends on as given.\n\nChange-Id: Idc03d997cfedfc2fcc967cca519997d157df115a\n(cherry picked from commit 738f81feebff0568f10c4c058a3173755d08a1e9)\n'}]",0,798099,d2dc171b02f0a87be296726561ffb5da8339b916,18,4,1,23950,,,0,"Fix instance locality scheduler filter

the filter tries to use list_extensions API of novaclient,
however it was removed in Ussuri release
https://review.opendev.org/c/openstack/python-novaclient/+/686516

All the former extensions are long ago rolled into Nova ""core"" code,
so we may take the ""extension"" this filter depends on as given.

Change-Id: Idc03d997cfedfc2fcc967cca519997d157df115a
(cherry picked from commit 738f81feebff0568f10c4c058a3173755d08a1e9)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/99/798099/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/compute/nova.py', 'cinder/scheduler/filters/instance_locality_filter.py', 'cinder/tests/unit/scheduler/test_host_filters.py']",3,d2dc171b02f0a87be296726561ffb5da8339b916,no-nova-api-ext-stable/wallaby, mock_get = mock_novaclient.return_value.servers.get mock_get.side_effect = request_exceptions.Timeout," def test_nova_no_extended_server_attributes(self, _mock_novaclient): _mock_novaclient.return_value = fakes.FakeNovaClient( ext_srv_attr=False) filt_cls = self.class_map['InstanceLocalityFilter']() host = fakes.FakeBackendState('host1', {}) uuid = nova.novaclient().servers.create('host1') filter_properties = {'context': self.context, 'scheduler_hints': {'local_to_instance': uuid}, 'request_spec': {'volume_id': fake.VOLUME_ID}} self.assertRaises(exception.CinderException, filt_cls.backend_passes, host, filter_properties) @mock.patch('cinder.compute.nova.novaclient') mock_show_all = mock_novaclient.return_value.list_extensions.show_all mock_show_all.side_effect = request_exceptions.Timeout",2,43
openstack%2Fcinder~stable%2Fvictoria~I5135a48326f5f7adb0a380b55993660b8b38ce27,openstack/cinder,stable/victoria,I5135a48326f5f7adb0a380b55993660b8b38ce27,[Pure Storage] Ensure multiattach volumes are not disconnected early,MERGED,2021-06-29 15:31:04.000000000,2021-08-03 17:22:06.000000000,2021-08-03 17:19:40.000000000,"[{'_account_id': 5314}, {'_account_id': 5997}, {'_account_id': 7198}, {'_account_id': 12670}, {'_account_id': 22348}, {'_account_id': 30615}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-06-29 15:31:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/176b96898aea27ed64b39d21a295ce393bd375a0', 'message': '[Pure Storage] Ensure multiattach volumes are not disconnected early\n\nChange-Id: I5135a48326f5f7adb0a380b55993660b8b38ce27\nCloses-Bug: #1930748\n(cherry picked from commit 0c5511f84378e99afabb4c61f2c8330294310707)\n(cherry picked from commit ba49980eca359be190d08e81b82ae7d2ed6b7571)\n'}, {'number': 2, 'created': '2021-06-29 20:57:38.000000000', 'files': ['cinder/volume/drivers/pure.py', 'releasenotes/notes/pure_storage_multiattach-f4aee3576757b2ff.yaml', 'cinder/tests/unit/volume/drivers/test_pure.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/1eaf3896929f1abdb09ab2451017f6e08aa3f9b3', 'message': '[Pure Storage] Ensure multiattach volumes are not disconnected early\n\nChange-Id: I5135a48326f5f7adb0a380b55993660b8b38ce27\nCloses-Bug: #1930748\n(cherry picked from commit 0c5511f84378e99afabb4c61f2c8330294310707)\n(cherry picked from commit ba49980eca359be190d08e81b82ae7d2ed6b7571)\nDepends-On: I53ab2c8dae43d5aef7a65d35ad99e55f0acb7431\n'}]",0,798672,1eaf3896929f1abdb09ab2451017f6e08aa3f9b3,32,7,2,13425,,,0,"[Pure Storage] Ensure multiattach volumes are not disconnected early

Change-Id: I5135a48326f5f7adb0a380b55993660b8b38ce27
Closes-Bug: #1930748
(cherry picked from commit 0c5511f84378e99afabb4c61f2c8330294310707)
(cherry picked from commit ba49980eca359be190d08e81b82ae7d2ed6b7571)
Depends-On: I53ab2c8dae43d5aef7a65d35ad99e55f0acb7431
",git fetch https://review.opendev.org/openstack/cinder refs/changes/72/798672/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/drivers/pure.py', 'releasenotes/notes/pure_storage_multiattach-f4aee3576757b2ff.yaml', 'cinder/tests/unit/volume/drivers/test_pure.py']",3,176b96898aea27ed64b39d21a295ce393bd375a0,bug/1930748-stable/wallaby-stable/victoria," vol.volume_attachment = None is_multiattach=False, remove_remote_hosts=False), is_multiattach=False, remove_remote_hosts=False)"," remove_remote_hosts=False), remove_remote_hosts=False)",52,10
openstack%2Fneutron~master~I2f8d974d6644657aea95302d94ca0095d70a7e62,openstack/neutron,master,I2f8d974d6644657aea95302d94ca0095d70a7e62,bw-limit: Pass int parameters to Open vSwitch,MERGED,2021-07-19 14:14:21.000000000,2021-08-03 17:21:59.000000000,2021-08-03 17:19:27.000000000,"[{'_account_id': 8313}, {'_account_id': 9845}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 33145}]","[{'number': 1, 'created': '2021-07-19 14:14:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/4c953374d46f1afa07239ba3cf88ce85269708bd', 'message': 'bw-limit: Pass int parameters to Open vSwitch\n\nMake sure we pass integer values to ovs when configuring bandwidth\nlimit. This was likely working properly with Python2, and we may have\nmissed this when migrating to Python3:\n\nhttps://www.python.org/dev/peps/pep-0238/\n\nChange-Id: I2f8d974d6644657aea95302d94ca0095d70a7e62\nCloses-Bug: #1936839\nCo-Authored-By: Tamás Trásy <tamas.trasy@ericsson.com>\n'}, {'number': 2, 'created': '2021-07-21 12:09:46.000000000', 'files': ['neutron/agent/common/ovs_lib.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/8261b67b6e6248c5cc1a4426544188e5bd9bfa03', 'message': 'bw-limit: Pass int parameters to Open vSwitch\n\nMake sure we pass integer values to ovs when configuring bandwidth\nlimit. This was likely working properly with Python2, and we may have\nmissed this when migrating to Python3:\n\nhttps://www.python.org/dev/peps/pep-0238/\n\nChange-Id: I2f8d974d6644657aea95302d94ca0095d70a7e62\nCloses-Bug: #1936839\nCo-Authored-By: Tamás Trásy <tamas.trasy@ericsson.com>\n'}]",5,801310,8261b67b6e6248c5cc1a4426544188e5bd9bfa03,55,5,2,15554,,,0,"bw-limit: Pass int parameters to Open vSwitch

Make sure we pass integer values to ovs when configuring bandwidth
limit. This was likely working properly with Python2, and we may have
missed this when migrating to Python3:

https://www.python.org/dev/peps/pep-0238/

Change-Id: I2f8d974d6644657aea95302d94ca0095d70a7e62
Closes-Bug: #1936839
Co-Authored-By: Tamás Trásy <tamas.trasy@ericsson.com>
",git fetch https://review.opendev.org/openstack/neutron refs/changes/10/801310/2 && git format-patch -1 --stdout FETCH_HEAD,['neutron/agent/common/ovs_lib.py'],1,4c953374d46f1afa07239ba3cf88ce85269708bd,bug/1936839," 'max-rate': str(int(max_bw_in_bits)) 'max-rate': str(int(max_bw_in_bits)), 'burst': str(int(max_burst_in_bits)), 'cir': str(int(max_bw_in_bits / 8)), 'cbs': str(int(max_burst_in_bits / 8))"," 'max-rate': str(max_bw_in_bits) 'max-rate': str(max_bw_in_bits), 'burst': str(max_burst_in_bits), 'cir': str(max_bw_in_bits / 8), 'cbs': str(max_burst_in_bits / 8)",5,5
openstack%2Fdevstack~master~I062b9a121c79650973c8d8d975e1c723d5798777,openstack/devstack,master,I062b9a121c79650973c8d8d975e1c723d5798777,Updated from generate-devstack-plugins-list,MERGED,2021-07-31 06:13:50.000000000,2021-08-03 17:21:46.000000000,2021-08-03 17:20:05.000000000,"[{'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-31 06:13:50.000000000', 'files': ['doc/source/plugin-registry.rst'], 'web_link': 'https://opendev.org/openstack/devstack/commit/ba68a49598309c5f6c5e4a0ec9d2b13b8229eee0', 'message': 'Updated from generate-devstack-plugins-list\n\nChange-Id: I062b9a121c79650973c8d8d975e1c723d5798777\n'}]",0,803100,ba68a49598309c5f6c5e4a0ec9d2b13b8229eee0,7,2,1,11131,,,0,"Updated from generate-devstack-plugins-list

Change-Id: I062b9a121c79650973c8d8d975e1c723d5798777
",git fetch https://review.opendev.org/openstack/devstack refs/changes/00/803100/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/plugin-registry.rst'],1,ba68a49598309c5f6c5e4a0ec9d2b13b8229eee0,openstack/devstack/plugins,openstack/tap-as-a-service `https://opendev.org/openstack/tap-as-a-service <https://opendev.org/openstack/tap-as-a-service>`__,x/tap-as-a-service `https://opendev.org/x/tap-as-a-service <https://opendev.org/x/tap-as-a-service>`__,1,1
openstack%2Fcharm-neutron-openvswitch~master~Iacce01501cecd1ce732aaff54b00ac70b0b4e488,openstack/charm-neutron-openvswitch,master,Iacce01501cecd1ce732aaff54b00ac70b0b4e488,Fix call to deferrable_svc_restart,MERGED,2021-08-02 10:19:09.000000000,2021-08-03 16:55:01.000000000,2021-08-03 16:55:01.000000000,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 10:19:09.000000000', 'files': ['hooks/charmhelpers/contrib/openstack/policyd.py', 'hooks/charmhelpers/contrib/openstack/amulet/deployment.py', 'hooks/neutron_ovs_utils.py', 'hooks/charmhelpers/contrib/openstack/templates/wsgi-openstack-metadata.conf', 'hooks/charmhelpers/contrib/openstack/amulet/__init__.py', 'hooks/charmhelpers/fetch/__init__.py', 'hooks/charmhelpers/fetch/ubuntu.py', 'unit_tests/test_neutron_ovs_utils.py', 'hooks/charmhelpers/contrib/openstack/utils.py', 'hooks/charmhelpers/osplatform.py', 'hooks/charmhelpers/contrib/openstack/amulet/utils.py', 'hooks/charmhelpers/contrib/openstack/templates/wsgi-openstack-api.conf'], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/c9df1aa91a02a0076370974911ce6c38d657f8e2', 'message': 'Fix call to deferrable_svc_restart\n\nThe name of the argument used to pass a reason to `deferrable_svc_restart`\nis `reason` not `restart_reason` *1\n\nChange includes ch-sync.\n\n*1 https://github.com/juju/charm-helpers/blob/master/charmhelpers/contrib/openstack/deferred_events.py#L297\n\nChange-Id: Iacce01501cecd1ce732aaff54b00ac70b0b4e488\n'}]",0,803168,c9df1aa91a02a0076370974911ce6c38d657f8e2,10,3,1,12549,,,0,"Fix call to deferrable_svc_restart

The name of the argument used to pass a reason to `deferrable_svc_restart`
is `reason` not `restart_reason` *1

Change includes ch-sync.

*1 https://github.com/juju/charm-helpers/blob/master/charmhelpers/contrib/openstack/deferred_events.py#L297

Change-Id: Iacce01501cecd1ce732aaff54b00ac70b0b4e488
",git fetch https://review.opendev.org/openstack/charm-neutron-openvswitch refs/changes/68/803168/1 && git format-patch -1 --stdout FETCH_HEAD,"['hooks/charmhelpers/contrib/openstack/policyd.py', 'hooks/charmhelpers/contrib/openstack/amulet/deployment.py', 'hooks/neutron_ovs_utils.py', 'hooks/charmhelpers/contrib/openstack/templates/wsgi-openstack-metadata.conf', 'hooks/charmhelpers/contrib/openstack/amulet/__init__.py', 'hooks/charmhelpers/fetch/__init__.py', 'hooks/charmhelpers/fetch/ubuntu.py', 'unit_tests/test_neutron_ovs_utils.py', 'hooks/charmhelpers/contrib/openstack/utils.py', 'hooks/charmhelpers/osplatform.py', 'hooks/charmhelpers/contrib/openstack/amulet/utils.py', 'hooks/charmhelpers/contrib/openstack/templates/wsgi-openstack-api.conf']",12,c9df1aa91a02a0076370974911ce6c38d657f8e2,fix-deferrable_svc_restart-call, display-name=%{GROUP} lang=C.UTF-8 locale=C.UTF-8 display-name=%{GROUP} lang=C.UTF-8 locale=C.UTF-8 display-name=%{GROUP} lang=C.UTF-8 locale=C.UTF-8, display-name=%{GROUP} display-name=%{GROUP} display-name=%{GROUP},158,2054
openstack%2Fopenstack-helm-images~master~I33c19d14c0a9ad51c4142cf734d15576aa4cd24a,openstack/openstack-helm-images,master,I33c19d14c0a9ad51c4142cf734d15576aa4cd24a,Update octopus ceph version to 15.2.13 available in repos,MERGED,2021-08-03 14:42:06.000000000,2021-08-03 16:54:57.000000000,2021-08-03 16:53:05.000000000,"[{'_account_id': 8898}, {'_account_id': 22348}, {'_account_id': 28372}, {'_account_id': 32190}]","[{'number': 1, 'created': '2021-08-03 14:42:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/016b00928feb3160e3a66e55c8ceed56c23b4a5a', 'message': 'Update octopus ceph version to the one available in repos\n\nChange-Id: I33c19d14c0a9ad51c4142cf734d15576aa4cd24a\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2021-08-03 14:42:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/b65cca22b19fc4be42cace862487937d0699225f', 'message': 'Update octopus ceph version to the one available in repos\n\nChange-Id: I33c19d14c0a9ad51c4142cf734d15576aa4cd24a\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2021-08-03 14:50:30.000000000', 'files': ['ceph-config-helper/Dockerfile.ubuntu_bionic', 'ceph-rbd-provisioner/Dockerfile.ubuntu_bionic', 'ceph-cephfs-provisioner/Dockerfile.ubuntu_bionic', 'ceph-daemon/Dockerfile.ubuntu_bionic'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/b5c3d4323b8f121b99ceb3556b47a54c2b70681c', 'message': 'Update octopus ceph version to 15.2.13 available in repos\n\nChange-Id: I33c19d14c0a9ad51c4142cf734d15576aa4cd24a\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,803356,b5c3d4323b8f121b99ceb3556b47a54c2b70681c,11,4,3,8863,,,0,"Update octopus ceph version to 15.2.13 available in repos

Change-Id: I33c19d14c0a9ad51c4142cf734d15576aa4cd24a
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/56/803356/1 && git format-patch -1 --stdout FETCH_HEAD,"['ceph-config-helper/Dockerfile.ubuntu_bionic', 'ceph-rbd-provisioner/Dockerfile.ubuntu_bionic', 'ceph-cephfs-provisioner/Dockerfile.ubuntu_bionic', 'ceph-daemon/Dockerfile.ubuntu_bionic']",4,016b00928feb3160e3a66e55c8ceed56c23b4a5a,,# Octopus 15.2.13ARG CEPH_RELEASE_TAG=15.2.13-1bionic,# Octopus 15.2.8ARG CEPH_RELEASE_TAG=15.2.8-1bionic,8,8
openstack%2Ftripleo-repos~master~I7eb4bab3ea129a171dc9ffdbc0cd2d69333376b3,openstack/tripleo-repos,master,I7eb4bab3ea129a171dc9ffdbc0cd2d69333376b3,setup.cfg: Use underscore instead of dash,ABANDONED,2021-07-28 16:08:25.000000000,2021-08-03 16:43:05.000000000,,"[{'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-28 16:08:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/087d4e98d75f207d698f1249999cb8d6357ac36d', 'message': 'Address setuptools deprecation warnings\n\nNewer versions setuptools announce deprecation of dashes in\nsetupc.cfg, pending removal. We switch to recommended options as\npbr already supports them.\n\nChange-Id: I7eb4bab3ea129a171dc9ffdbc0cd2d69333376b3\n'}, {'number': 2, 'created': '2021-07-28 16:12:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/fa76ad410c1d7cd7fed33e7f3b9f75e35391af9e', 'message': 'setup.cfg: Use underscore instead of dash\n\nNewer versions setuptools announce deprecation of dashes in\nsetup.cfg, pending removal. We switch to recommended options as\npbr already supports them.\n\nChange-Id: I7eb4bab3ea129a171dc9ffdbc0cd2d69333376b3\n'}, {'number': 3, 'created': '2021-07-28 16:20:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/7e6cac2a6699035a99ee8d5f2e7d17cc91a799c0', 'message': 'setup.cfg: Use underscore instead of dash\n\nNewer versions setuptools announce deprecation of dashes in\nsetup.cfg, pending removal.\n\nChange-Id: I7eb4bab3ea129a171dc9ffdbc0cd2d69333376b3\n'}, {'number': 4, 'created': '2021-07-28 16:21:33.000000000', 'files': ['requirements.txt', 'setup.py', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/dae558b7744c99b442d88cb5977d3e548712ca47', 'message': 'setup.cfg: Use underscore instead of dash\n\nNewer versions setuptools announce deprecation of dashes in\nsetup.cfg, pending removal.\n\nChange-Id: I7eb4bab3ea129a171dc9ffdbc0cd2d69333376b3\n'}]",0,802750,dae558b7744c99b442d88cb5977d3e548712ca47,11,2,4,24162,,,0,"setup.cfg: Use underscore instead of dash

Newer versions setuptools announce deprecation of dashes in
setup.cfg, pending removal.

Change-Id: I7eb4bab3ea129a171dc9ffdbc0cd2d69333376b3
",git fetch https://review.opendev.org/openstack/tripleo-repos refs/changes/50/802750/4 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,087d4e98d75f207d698f1249999cb8d6357ac36d,setup.cfg,description_file =author_email = openstack-discuss@lists.openstack.org home_page = https://docs.openstack.org/tripleo-docs/latest/,description-file =author-email = openstack-discuss@lists.openstack.org home-page = https://docs.openstack.org/tripleo-docs/latest/,3,3
openstack%2Felection~master~I444885800b26ca84689d550f81bbe349eae3bd30,openstack/election,master,I444885800b26ca84689d550f81bbe349eae3bd30,Automate the 'date' in setup_election_config,MERGED,2021-07-21 17:40:25.000000000,2021-08-03 16:21:14.000000000,2021-08-03 16:18:32.000000000,"[{'_account_id': 2033}, {'_account_id': 14482}, {'_account_id': 15993}, {'_account_id': 22348}, {'_account_id': 32070}]","[{'number': 1, 'created': '2021-07-21 17:40:25.000000000', 'files': ['openstack_election/cmds/setup_election_config.py'], 'web_link': 'https://opendev.org/openstack/election/commit/500d2c1ed0d2e692751ba781cf1352a970cac8f3', 'message': ""Automate the 'date' in setup_election_config\n\nCurrent we need to pass 'date' as mandatory argument\nin setup_election_config CLI and it is sometime confusion\non what date to pass.\n\nThis commit automatically select the end date of release if\ndate is not passed. This will help to generate the correct\nelection dates without worry about release date to pass.\n\nChange-Id: I444885800b26ca84689d550f81bbe349eae3bd30\n""}]",0,801641,500d2c1ed0d2e692751ba781cf1352a970cac8f3,10,5,1,8556,,,0,"Automate the 'date' in setup_election_config

Current we need to pass 'date' as mandatory argument
in setup_election_config CLI and it is sometime confusion
on what date to pass.

This commit automatically select the end date of release if
date is not passed. This will help to generate the correct
election dates without worry about release date to pass.

Change-Id: I444885800b26ca84689d550f81bbe349eae3bd30
",git fetch https://review.opendev.org/openstack/election refs/changes/41/801641/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_election/cmds/setup_election_config.py'],1,500d2c1ed0d2e692751ba781cf1352a970cac8f3,automate-date,"def select_release_end_date(release_schedule): date = None for week in release_schedule.get('cycle', []): if 'x-final' in week.get('x-project', {}): date = datetime.datetime.strptime( week['end'], ""%Y-%m-%d"").replace(tzinfo=pytz.UTC) return date # If date is not passed in command line then, this script will # automatically pick the release end date. parser.add_argument('--date', default=None, type=valid_date, help='Date from release schedule in the form ' 'YYYY-MM-DD') # If date is not passed to this script then autimatically # select the release end date. if (args.date is None): schedule = utils.get_schedule_data(names[idx+1]) args.date = select_release_end_date(schedule) "," # We can't rely on the current schedule being codified in the releases # repo so just get the date from the command line. parser.add_argument('date', type=valid_date, help='in the form YYYY-MM-DD')",21,3
openstack%2Felection~master~Ic79f4903e26785de4c6cb1f5908c5b5839975096,openstack/election,master,Ic79f4903e26785de4c6cb1f5908c5b5839975096,Add TC charter validation in setup_election_config,MERGED,2021-07-21 17:09:33.000000000,2021-08-03 16:19:55.000000000,2021-08-03 16:18:31.000000000,"[{'_account_id': 2033}, {'_account_id': 14482}, {'_account_id': 15993}, {'_account_id': 22348}, {'_account_id': 32070}]","[{'number': 1, 'created': '2021-07-21 17:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/election/commit/10b2ea4cd27cd5fdb7a70bd068376ecd8ee1f039', 'message': 'Add TC charter validation in setup_election_config\n\nsetup_election_config generate the election dates as per\nthe given release date but there is no validation of those\ngenerated dates against TC charter.\n\nThis commit adds TC charter validation in this script which\nwill help to generate the correct dates macthing with what\nTC charter says.\n\nChange-Id: Ic79f4903e26785de4c6cb1f5908c5b5839975096\n'}, {'number': 2, 'created': '2021-07-21 17:40:25.000000000', 'files': ['openstack_election/cmds/setup_election_config.py'], 'web_link': 'https://opendev.org/openstack/election/commit/c4667d15ef7f24a2f5fbbfa6b27343480b372b07', 'message': 'Add TC charter validation in setup_election_config\n\nsetup_election_config generate the election dates as per\nthe given release date but there is no validation of those\ngenerated dates against TC charter.\n\nThis commit adds TC charter validation in this script which\nwill help to generate the correct dates macthing with what\nTC charter says.\n\nChange-Id: Ic79f4903e26785de4c6cb1f5908c5b5839975096\n'}]",0,801640,c4667d15ef7f24a2f5fbbfa6b27343480b372b07,17,5,2,8556,,,0,"Add TC charter validation in setup_election_config

setup_election_config generate the election dates as per
the given release date but there is no validation of those
generated dates against TC charter.

This commit adds TC charter validation in this script which
will help to generate the correct dates macthing with what
TC charter says.

Change-Id: Ic79f4903e26785de4c6cb1f5908c5b5839975096
",git fetch https://review.opendev.org/openstack/election refs/changes/40/801640/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_election/cmds/setup_election_config.py'],1,10b2ea4cd27cd5fdb7a70bd068376ecd8ee1f039,automate-date,"def validate_tc_charter(election_type, release_schedule, selected_start, selected_end): # NOTE (gmann): This function will validate the selected start and # end date by this script against what TC charter says. # As per current charter(2021-07-21): # - PTL election needs to be held(start and end) on or before R-3 week # - TC election needs to be held(start and end) in between of R-6 to R-4 # week. for week in release_schedule.get('cycle', []): if election_type == 'PTL': expected_start_date = datetime.datetime.strptime( str(release_schedule['start-week']), ""%Y-%m-%d"").replace(tzinfo=pytz.UTC) if week.get('name') == 'R-3': expected_end_date = datetime.datetime.strptime( week['end'], ""%Y-%m-%d"").replace(tzinfo=pytz.UTC) break else: if week.get('name') == 'R-6': expected_start_date = datetime.datetime.strptime( week['start'], ""%Y-%m-%d"").replace(tzinfo=pytz.UTC) if week.get('name') == 'R-4': expected_end_date = datetime.datetime.strptime( week['end'], ""%Y-%m-%d"").replace(tzinfo=pytz.UTC) if (selected_start < expected_start_date or selected_end > expected_end_date): print(""Error: generated start and end date as per given dates in\n"" "" parameter is not matching with the TC charter,\n"" "" please select the release date correctly."") exit(1) if event == 'Election': schedule = utils.get_schedule_data(names[idx+1]) validate_tc_charter(args.type, schedule, start, end)",,35,0
openstack%2Fgovernance~master~Idf5427aa0f72aee6a2310f82586d2b2ec4cd88d1,openstack/governance,master,Idf5427aa0f72aee6a2310f82586d2b2ec4cd88d1,Define Yoga release testing runtime,MERGED,2021-07-08 00:22:22.000000000,2021-08-03 16:11:44.000000000,2021-08-03 16:09:58.000000000,"[{'_account_id': 4393}, {'_account_id': 7198}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-08 00:22:22.000000000', 'files': ['reference/runtimes/yoga.rst'], 'web_link': 'https://opendev.org/openstack/governance/commit/3f1353562c501edbf93ffbd1e1735f81b8a624f2', 'message': 'Define Yoga release testing runtime\n\nChange-Id: Idf5427aa0f72aee6a2310f82586d2b2ec4cd88d1\n'}]",4,799927,3f1353562c501edbf93ffbd1e1735f81b8a624f2,16,5,1,8556,,,0,"Define Yoga release testing runtime

Change-Id: Idf5427aa0f72aee6a2310f82586d2b2ec4cd88d1
",git fetch https://review.opendev.org/openstack/governance refs/changes/27/799927/1 && git format-patch -1 --stdout FETCH_HEAD,['reference/runtimes/yoga.rst'],1,3f1353562c501edbf93ffbd1e1735f81b8a624f2,formal-vote,"======================== Tested Runtimes for Yoga ======================== At the start of the Yoga development cycle, the current :ref:`LTS or stable distribution <pti-linux-distros>` versions are: * Ubuntu 20.04 * CentOS 8 Stream Python Runtimes for Yoga ======================== It is the :doc:`policy <../../resolutions/20181024-python-update-process>` that each OpenStack release cycle will target the latest available version of Python; default Python runtimes on the distributions listed above; and versions used in integration tests at the start of the cycle, at least until the point when all projects have migrated to a later version. Based on the criteria above, all Python-based projects must target and test against, at a minimum: * Python 3.6 (default in CentOS 8 Stream) * Python 3.8 (latest available; default in Ubuntu 20.04) More details on Python requirements can be found in :ref:`pti-python`. Node.js Runtime for Yoga ======================== Based on the available versions of Node.js supported in our :ref:`LTS or stable distributions <pti-linux-distros>` all JavaScript testing should target: * Node.js 14 More details on Javascript requirements can be found in :ref:`pti-javascript`. Golang Runtime for Yoga ======================= At this time, there are still frequent releases of Go with a wide variety of distribution packaged versions. Given the current state of Go support and the number of projects within OpenStack using Go, no formal version declaration is being made at this time. More details on Go requirements can be found in :ref:`pti-golang`. ",,46,0
openstack%2Ftripleo-repos~master~I3cf899531237a83c076bbb132b6a198371250438,openstack/tripleo-repos,master,I3cf899531237a83c076bbb132b6a198371250438,Add ansible-test sanity checks job (nv),ABANDONED,2021-08-03 14:17:53.000000000,2021-08-03 16:09:17.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-03 14:17:53.000000000', 'files': ['zuul.d/layout.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/44afaeedbb48b248387ad78094de024f7607e1ca', 'message': 'Add ansible-test sanity checks job (nv)\n\nAdds non-voting check jobs for ansible-test sanity. Fixes will be\ndone in follow-ups as number of errors indicated by sanity check\nis quite big, and this will allow reviewers to understand what\nis addressed by each of them.\n\nChange-Id: I3cf899531237a83c076bbb132b6a198371250438\nStory: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559\n'}]",0,803353,44afaeedbb48b248387ad78094de024f7607e1ca,3,1,1,24162,,,0,"Add ansible-test sanity checks job (nv)

Adds non-voting check jobs for ansible-test sanity. Fixes will be
done in follow-ups as number of errors indicated by sanity check
is quite big, and this will allow reviewers to understand what
is addressed by each of them.

Change-Id: I3cf899531237a83c076bbb132b6a198371250438
Story: https://projects.engineering.redhat.com/browse/TRIPLEOCI-559
",git fetch https://review.opendev.org/openstack/tripleo-repos refs/changes/53/803353/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/layout.yaml', 'tox.ini']",2,44afaeedbb48b248387ad78094de024f7607e1ca,ansible-test,"envlist = py,pep8,packaging,sanity requires = tox-ansible>=1.5.3","envlist = py,pep8,packaging",29,3
openstack%2Fopenstack-helm~master~Ib9ab345e5aee697a41414e927910335dd286072f,openstack/openstack-helm,master,Ib9ab345e5aee697a41414e927910335dd286072f,Nova bootstrap job efficiency,MERGED,2021-08-02 12:58:46.000000000,2021-08-03 16:02:22.000000000,2021-08-03 16:00:00.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 23928}, {'_account_id': 24780}, {'_account_id': 28719}]","[{'number': 1, 'created': '2021-08-02 12:58:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9d087196f3afbb0d2e41ad7c09995b9362a61c7a', 'message': ""Nova bootstrap job efficiency\n\nThis PS attempts to make the Nova bootstrap job a little speedier.\nIt's been noticed that flavor check/creation on initial deployment\nare rather slow, so this backgrounds the creation of each flavor,\nso that the defined flavors can be checked/create in parallel,\nrather than one at a time. Waits for the jobs to finish at the end.\n\nChange-Id: Ib9ab345e5aee697a41414e927910335dd286072f\n""}, {'number': 2, 'created': '2021-08-02 13:00:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/1392a273c63ad9d83530e61eaff80631b6b8e56b', 'message': ""Nova bootstrap job efficiency\n\nThis PS attempts to make the Nova bootstrap job a little speedier.\nIt's been noticed that flavor check/creation on initial deployment\nare rather slow, so this backgrounds the creation of each flavor,\nso that the defined flavors can be checked/create in parallel,\nrather than one at a time. Waits for the jobs to finish at the end.\n\nChange-Id: Ib9ab345e5aee697a41414e927910335dd286072f\n""}, {'number': 3, 'created': '2021-08-02 14:15:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/aa29d15ef839ca8454a1a1ba0cd5fc48b5c65bdd', 'message': ""Nova bootstrap job efficiency\n\nThis PS attempts to make the Nova bootstrap job a little speedier.\nIt's been noticed that flavor check/creation on initial deployment\nare rather slow, so this backgrounds the creation of each flavor,\nso that the defined flavors can be checked/create in parallel,\nrather than one at a time. Waits for the jobs to finish at the end.\n\nChange-Id: Ib9ab345e5aee697a41414e927910335dd286072f\n""}, {'number': 4, 'created': '2021-08-02 14:32:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/1b4612620eb21ba8e1785a2f8fda0a129520e2a7', 'message': ""Nova bootstrap job efficiency\n\nThis PS attempts to make the Nova bootstrap job a little speedier.\nIt's been noticed that flavor check/creation on initial deployment\nare rather slow, so this backgrounds the creation of each flavor,\nso that the defined flavors can be checked/create in parallel,\nrather than one at a time. Waits for the jobs to finish at the end.\n\nChange-Id: Ib9ab345e5aee697a41414e927910335dd286072f\n""}, {'number': 5, 'created': '2021-08-02 19:52:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d819dab7cfe26b4eb1ab38b391c280c992200879', 'message': ""Nova bootstrap job efficiency\n\nThis PS attempts to make the Nova bootstrap job a little speedier.\nIt's been noticed that flavor check/creation on initial deployment\nare rather slow, so this backgrounds the creation of each flavor,\nso that the defined flavors can be checked/create in parallel,\nrather than one at a time. Waits for the jobs to finish at the end.\n\nChange-Id: Ib9ab345e5aee697a41414e927910335dd286072f\n""}, {'number': 6, 'created': '2021-08-03 01:11:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b19ea2f2fd32d9197713d4e0900a384b8d965fac', 'message': ""Nova bootstrap job efficiency\n\nThis PS attempts to make the Nova bootstrap job a little speedier.\nIt's been noticed that flavor check/creation on initial deployment\nare rather slow, so this backgrounds the creation of each flavor,\nso that the defined flavors can be checked/create in parallel,\nrather than one at a time. Waits for the jobs to finish at the end.\n\nChange-Id: Ib9ab345e5aee697a41414e927910335dd286072f\n""}, {'number': 7, 'created': '2021-08-03 01:19:39.000000000', 'files': ['nova/templates/bin/_bootstrap.sh.tpl', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9a8a476d9fb985f774baaf3f734edd021ca66e69', 'message': ""Nova bootstrap job efficiency\n\nThis PS attempts to make the Nova bootstrap job a little speedier.\nIt's been noticed that flavor check/creation on initial deployment\nare rather slow, so this backgrounds the creation of each flavor,\nso that the defined flavors can be checked/create in parallel,\nrather than one at a time. Waits for the jobs to finish at the end.\n\nChange-Id: Ib9ab345e5aee697a41414e927910335dd286072f\n""}]",0,803204,9a8a476d9fb985f774baaf3f734edd021ca66e69,25,8,7,28275,,,0,"Nova bootstrap job efficiency

This PS attempts to make the Nova bootstrap job a little speedier.
It's been noticed that flavor check/creation on initial deployment
are rather slow, so this backgrounds the creation of each flavor,
so that the defined flavors can be checked/create in parallel,
rather than one at a time. Waits for the jobs to finish at the end.

Change-Id: Ib9ab345e5aee697a41414e927910335dd286072f
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/04/803204/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/templates/bin/_bootstrap.sh.tpl'],1,9d087196f3afbb0d2e41ad7c09995b9362a61c7a,,{ openstack flavor show {{ .name }} || \ openstack flavor create {{ .name }} \ --id {{ .id }} \ --ram {{ .ram }} \ --disk {{ .disk }} \ --vcpus {{ .vcpus }} } & wait $(jobs -p),openstack flavor show {{ .name }} || \ openstack flavor create {{ .name }} \ --id {{ .id }} \ --ram {{ .ram }} \ --disk {{ .disk }} \ --vcpus {{ .vcpus }},9,6
openstack%2Fkeystone-specs~master~Ice3ffd025a706a5e3c1c450bbe9813ac8f558a9e,openstack/keystone-specs,master,Ice3ffd025a706a5e3c1c450bbe9813ac8f558a9e,[spec] X-Project-Id Pass-through,MERGED,2021-04-22 21:23:47.000000000,2021-08-03 15:57:18.000000000,2021-08-03 15:55:44.000000000,"[{'_account_id': 4393}, {'_account_id': 5046}, {'_account_id': 7973}, {'_account_id': 9914}, {'_account_id': 11604}, {'_account_id': 14250}, {'_account_id': 16465}, {'_account_id': 16688}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 31661}]","[{'number': 1, 'created': '2021-04-22 21:23:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone-specs/commit/7b73cdd9e7deb5511160905cc14496de44ff73d1', 'message': 'WIP [spec] X-Project-Id Pass-through\n\nChange-Id: Ice3ffd025a706a5e3c1c450bbe9813ac8f558a9e\n'}, {'number': 2, 'created': '2021-06-04 16:45:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone-specs/commit/74bc8de42ccb880c3e1510b2b8803de03d3983f2', 'message': '[spec] X-Project-Id Pass-through\n\nChange-Id: Ice3ffd025a706a5e3c1c450bbe9813ac8f558a9e\n'}, {'number': 3, 'created': '2021-06-04 18:02:31.000000000', 'files': ['doc/source/index.rst', 'specs/keystonemiddleware/xena/secure-rbac-project-id-passthrough.rst'], 'web_link': 'https://opendev.org/openstack/keystone-specs/commit/18760db9fcdf3eb2cccb2b11f8503acb0d003d2b', 'message': '[spec] X-Project-Id Pass-through\n\nChange-Id: Ice3ffd025a706a5e3c1c450bbe9813ac8f558a9e\n'}]",41,787640,18760db9fcdf3eb2cccb2b11f8503acb0d003d2b,30,11,3,7973,,,0,"[spec] X-Project-Id Pass-through

Change-Id: Ice3ffd025a706a5e3c1c450bbe9813ac8f558a9e
",git fetch https://review.opendev.org/openstack/keystone-specs refs/changes/40/787640/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/keystone/wallaby/secure-rbac-project-id-passthrough.rst'],1,7b73cdd9e7deb5511160905cc14496de44ff73d1,,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode ========================================== secure-rbac - X-Project-Id Pass-through ========================================== `bug #1925684 <https://bugs.launchpad.net/keystone/+bug/1925684>`_ As was discussed during the Wallaby PTG [1], implementing secure-rbac policies for system scoped credentials can be challenging for projects where some APIs require a project ID. This spec proposes a change to Keystone middleware to provide a project ID to be used in the context of such APIs. This should enable projects to write and use system scoped policy rules with no code changes in most cases. Problem Description =================== System scoped tokens issued by Keystone do not contain a Project ID. This is problematic for services where their API impementations assume that a UUID will always be available. Attempting to use system scoped tokens with such APIs typically results in errors or unwanted behavior. For example, some Barbican API calls return 5XX internal errors for operations that assume that there is a Project ID in UUID format in the request context. Proposed Change =============== Currently, keystone middleware modifies the request after authentication by adding context headers from the authenticated data. For project scoped tokens, it adds a X-Project-Id header. For system scoped tokens, this header is not added, which results in a `None` value in many cases. For security reasons, the middleware currently removes a number of headers before authentication, including X-Project-Id. This makes sense as we want to prevent a malicious user from trying to inject unauthenticated context data into the request. The proposed solution will change the ""sanitation"" behavior of removing the X-Project-Id every time to allow it to be passed through for requests made with system scoped credentials: * If present, the X-Project-Id header is cached * Provided credentials are authenticated * When the provided credentials are project-scoped the cached value is discarded, and the value from the authenticated data is used * When the provided credentials are system-scoped the cached value is added to request in the X-Project-Id header. Alternatives ------------ Two other alternatives were discussed: * Wrap operations on project-owned resources with explicit role assignments. * Use inherited orle assignments from domains. Refere to the Xena notes [1] for details of their advantages/disadvantages. One key difference between both of these alternatives and this spec is that this spec does not require Keystone to issue a project token to be used by the client. Instead, this spec allows for enforcement of RBAC rules that target system scope and system roles assigned to that user while still providing a Project ID for context. Security Impact --------------- As mentioned, removing X-Project-Id as the middleware currently does is good practice. We should consider any adverse effects of allowing pass-through for project scoped requests. It's also important to be able to audit when system scoped requests are using this pass-through. Notifications Impact -------------------- None Other End User Impact --------------------- Clients will need to be updated to be able to provide a Project-Id in a request when using system scoped tokens. e.g. openstack secret list --os-project-id XXXXX-XXXX-XXXX-XXXX Should add that project ID to the request before sending. Performance Impact ------------------ Caching the incoming value of the Project ID will increase cace storage consumption. Other Deployer Impact --------------------- None Developer Impact ---------------- This should hopefully allow APIs that have built in assumptions about the project ID in the context to work with system scoped requests without any code changes. Implementation ============== Assignee(s) ----------- * Douglas Mendizábal (redrobot) * Lance Bragstad (lbragstad) Work Items ---------- * Implement middlware changes * Implement client changes Dependencies ============ None Documentation Impact ==================== Documentation will need to be updated to specify when Project ID values are allowed to be passed through. References ========== [1] https://etherpad.opendev.org/p/policy-popup-xena-ptg ",,148,0
openstack%2Fgovernance~master~Iafc55044e60d81ae2a460327cab20c3f861184a4,openstack/governance,master,Iafc55044e60d81ae2a460327cab20c3f861184a4,Add tap-as-a-service to Neutron governed projects,MERGED,2021-07-29 07:42:22.000000000,2021-08-03 15:56:02.000000000,2021-08-03 15:54:31.000000000,"[{'_account_id': 7198}, {'_account_id': 8556}, {'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-29 07:42:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/a48a10ae1182b27d6eb5fa4cb5215b8840462342', 'message': 'Add tap-as-a-service to Neutron governed projects\n\ntap-as-a-service and tap-as-a-service-tempest-plugin moved from x/\nnamespace to openstack/ and under Neutron governance.\n\nChange-Id: Iafc55044e60d81ae2a460327cab20c3f861184a4\nDepends-On: https://review.opendev.org/c/openstack/project-config/+/790093\n'}, {'number': 2, 'created': '2021-07-29 09:34:50.000000000', 'files': ['reference/projects.yaml'], 'web_link': 'https://opendev.org/openstack/governance/commit/b8d28176698e376358fc5b9bd6eb23bf70e7fa7c', 'message': 'Add tap-as-a-service to Neutron governed projects\n\ntap-as-a-service and tap-as-a-service-tempest-plugin moved from x/\nnamespace to openstack/ and under Neutron governance.\n\nChange-Id: Iafc55044e60d81ae2a460327cab20c3f861184a4\nDepends-On: https://review.opendev.org/c/openstack/project-config/+/790093\n'}]",2,802833,b8d28176698e376358fc5b9bd6eb23bf70e7fa7c,19,5,2,8313,,,0,"Add tap-as-a-service to Neutron governed projects

tap-as-a-service and tap-as-a-service-tempest-plugin moved from x/
namespace to openstack/ and under Neutron governance.

Change-Id: Iafc55044e60d81ae2a460327cab20c3f861184a4
Depends-On: https://review.opendev.org/c/openstack/project-config/+/790093
",git fetch https://review.opendev.org/openstack/governance refs/changes/33/802833/2 && git format-patch -1 --stdout FETCH_HEAD,['reference/projects.yaml'],1,a48a10ae1182b27d6eb5fa4cb5215b8840462342,project-update, tap-as-a-service: repos: - openstack/tap-as-a-service tap-as-a-service-tempest-plugin: repos: - tap-as-a-service-tempest-plugin,,6,0
openstack%2Fos-brick~master~Id8d96c1eda2beab1aebd8ecc054d8511ccefca3e,openstack/os-brick,master,Id8d96c1eda2beab1aebd8ecc054d8511ccefca3e,encryptors: Remove workaround for bug #1633518,MERGED,2021-05-13 15:47:08.000000000,2021-08-03 15:52:37.000000000,2021-08-03 15:51:00.000000000,"[{'_account_id': 4523}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 20813}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-05-13 15:47:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-brick/commit/9ced8718508c27e05b393d0494a209204771fb00', 'message': 'encryptors: Remove workaround for bug #1633518\n\nThis has been in place since Newton and was targeted for removal in\nRocky. That has long since passed but we can ease things by removing it\nnow.\n\nChange-Id: Id8d96c1eda2beab1aebd8ecc054d8511ccefca3e\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n'}, {'number': 2, 'created': '2021-05-14 11:12:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-brick/commit/8f2eb0ea6c8c100d8527973b81119988c811d75e', 'message': ""encryptors: Remove workaround for bug #1633518\n\nThis has been in place since Newton and was targeted for removal in\nRocky. That has long since passed but we can ease things by removing it\nnow.\n\nDespite what change I7096463c5eba951dd6322ee6965435e877ca0371 said about\nnot removing this workaround from 'CryptsetupEncryptor', we do so anyway\nsince we're going to remove this encryptor shortly.\n\nChange-Id: Id8d96c1eda2beab1aebd8ecc054d8511ccefca3e\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nRelated-bug: #1633518\n""}, {'number': 3, 'created': '2021-06-16 13:45:25.000000000', 'files': ['releasenotes/notes/remove-bug-1633518-workaround-75c2e26843660696.yaml', 'os_brick/tests/encryptors/test_cryptsetup.py', 'os_brick/encryptors/luks.py', 'os_brick/tests/encryptors/test_luks.py', 'os_brick/encryptors/cryptsetup.py'], 'web_link': 'https://opendev.org/openstack/os-brick/commit/4c654d94540dfd0469e703b205d44b92bd2482ad', 'message': ""encryptors: Remove workaround for bug #1633518\n\nThis has been in place since Newton and was targeted for removal in\nRocky. That has long since passed but we can ease things by removing it\nnow.\n\nDespite what change I7096463c5eba951dd6322ee6965435e877ca0371 said about\nnot removing this workaround from 'CryptsetupEncryptor', we do so anyway\nsince we're going to remove this encryptor shortly.\n\nChange-Id: Id8d96c1eda2beab1aebd8ecc054d8511ccefca3e\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nRelated-bug: #1633518\n""}]",4,791270,4c654d94540dfd0469e703b205d44b92bd2482ad,52,5,3,15334,,,0,"encryptors: Remove workaround for bug #1633518

This has been in place since Newton and was targeted for removal in
Rocky. That has long since passed but we can ease things by removing it
now.

Despite what change I7096463c5eba951dd6322ee6965435e877ca0371 said about
not removing this workaround from 'CryptsetupEncryptor', we do so anyway
since we're going to remove this encryptor shortly.

Change-Id: Id8d96c1eda2beab1aebd8ecc054d8511ccefca3e
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Related-bug: #1633518
",git fetch https://review.opendev.org/openstack/os-brick refs/changes/70/791270/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_brick/tests/encryptors/test_cryptsetup.py', 'os_brick/encryptors/luks.py', 'os_brick/tests/encryptors/test_luks.py', 'os_brick/encryptors/cryptsetup.py']",4,9ced8718508c27e05b393d0494a209204771fb00,privsep," self._open_volume(passphrase, **kwargs)"," import array def _get_mangled_passphrase(self, key): """"""Convert the raw key into a list of unsigned int's and then a string """""" # NOTE(lyarwood): This replicates the methods used prior to Newton to # first encode the passphrase as a list of unsigned int's before # decoding back into a string. This method strips any leading 0's # of the resulting hex digit pairs, resulting in a different # passphrase being returned. encoded_key = array.array('B', key).tolist() return ''.join(hex(x).replace('0x', '') for x in encoded_key) try: self._open_volume(passphrase, **kwargs) except processutils.ProcessExecutionError as e: if e.exit_code == 2: # NOTE(lyarwood): Workaround bug#1633518 by attempting to use # a mangled passphrase to open the device.. LOG.info(""Unable to open %s with the current passphrase, "" ""attempting to use a mangled passphrase to open "" ""the volume."", self.dev_path) self._open_volume(self._get_mangled_passphrase(key), **kwargs)",1,175
openstack%2Fmistral~master~I8ecedd341ba45d1919c9073dda8b2fc390306a52,openstack/mistral,master,I8ecedd341ba45d1919c9073dda8b2fc390306a52,Fix unit test failures caused by type mismatch,MERGED,2021-07-19 00:34:29.000000000,2021-08-03 15:45:32.000000000,2021-08-03 15:44:00.000000000,"[{'_account_id': 19134}, {'_account_id': 22348}, {'_account_id': 29124}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-07-19 00:34:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/a1e878b9e280dda675218e67eeb84c65429b2f64', 'message': ""Fix unit test failures caused by type mismatch\n\nCurrently unit tests are failing because of the following type mismatch\ndetected.\n\ntesttools.matchers._impl.MismatchError: '{'k2', 'k1'}' is not an\ninstance of list\n\nThis change fixes that error.\n\nChange-Id: I8ecedd341ba45d1919c9073dda8b2fc390306a52\n""}, {'number': 2, 'created': '2021-07-19 00:39:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/9f74ebc6fa97e08d6f46566f8543429d4927ab5c', 'message': ""Fix unit test failures caused by type mismatch\n\nCurrently unit tests are failing because of the following type mismatch\ndetected.\n\ntesttools.matchers._impl.MismatchError: '{'k2', 'k1'}' is not an\ninstance of list\n\nThis change fixes that error.\n\nChange-Id: I8ecedd341ba45d1919c9073dda8b2fc390306a52\n""}, {'number': 3, 'created': '2021-07-19 02:30:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/b1790cb682fcd982f612c03877d2538565d84078', 'message': ""Fix unit test failures caused by type mismatch\n\nCurrently unit tests are failing because of the following type mismatch\ndetected.\n\ntesttools.matchers._impl.MismatchError: '{'k2', 'k1'}' is not an\ninstance of list\n\nThis change fixes that error.\n\nChange-Id: I8ecedd341ba45d1919c9073dda8b2fc390306a52\n""}, {'number': 4, 'created': '2021-07-19 02:32:37.000000000', 'files': ['mistral/tests/unit/engine/test_dataflow.py'], 'web_link': 'https://opendev.org/openstack/mistral/commit/b2d6de569c7bba96cd3179189ffbcee6b7a28c1f', 'message': ""Fix unit test failures caused by type mismatch\n\nCurrently unit tests are failing because of the following type mismatch\ndetected.\n\ntesttools.matchers._impl.MismatchError: '{'k2', 'k1'}' is not an\ninstance of list\n\nThis change fixes that error.\n\nChange-Id: I8ecedd341ba45d1919c9073dda8b2fc390306a52\n""}]",0,801218,b2d6de569c7bba96cd3179189ffbcee6b7a28c1f,13,4,4,9816,,,0,"Fix unit test failures caused by type mismatch

Currently unit tests are failing because of the following type mismatch
detected.

testtools.matchers._impl.MismatchError: '{'k2', 'k1'}' is not an
instance of list

This change fixes that error.

Change-Id: I8ecedd341ba45d1919c9073dda8b2fc390306a52
",git fetch https://review.opendev.org/openstack/mistral refs/changes/18/801218/3 && git format-patch -1 --stdout FETCH_HEAD,['mistral/tests/unit/engine/test_dataflow.py'],1,a1e878b9e280dda675218e67eeb84c65429b2f64,bug/1936667," self.assertIsInstance(res, set) self.assertIsInstance(res, set)"," self.assertIsInstance(res, list) self.assertIsInstance(res, list)",2,2
openstack%2Freleases~master~I45e0555af221bfe58f9f014e4d30e813610dddf9,openstack/releases,master,I45e0555af221bfe58f9f014e4d30e813610dddf9,[neutron] Propose to switch the release model,ABANDONED,2021-08-02 14:35:45.000000000,2021-08-03 15:43:23.000000000,,"[{'_account_id': 841}, {'_account_id': 6773}, {'_account_id': 11975}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 14:35:45.000000000', 'files': ['deliverables/xena/ovn-octavia-provider.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/07371fe664392fad89b32e7ca9fce164f79a2ad7', 'message': '[neutron] Propose to switch the release model\n\nIntermediary-released deliverables that did release only once during\nthe last cycle, and have not done a release yet are good candidates\nto switch to the cycle-with-rc model, which is much more suitable for\ndeliverables that are only released once per cycle.\n\nThese changes are not mandatory and this patch is a conveniences to\nhighlight this point and open the discussion.\n\nPTLs and release liaisons please decide to:\n- immediately release an intermediary release (and -1 the proposed change)\n- confirm the release model change (+1 the proposed change)\n- stay uncertain for this cycle of how many releases will be made, but\n  acknowledge that they need to do a release before RC1 (-1 the proposed\n  change)\n\nChange-Id: I45e0555af221bfe58f9f014e4d30e813610dddf9\n'}]",0,803219,07371fe664392fad89b32e7ca9fce164f79a2ad7,6,5,1,28522,,,0,"[neutron] Propose to switch the release model

Intermediary-released deliverables that did release only once during
the last cycle, and have not done a release yet are good candidates
to switch to the cycle-with-rc model, which is much more suitable for
deliverables that are only released once per cycle.

These changes are not mandatory and this patch is a conveniences to
highlight this point and open the discussion.

PTLs and release liaisons please decide to:
- immediately release an intermediary release (and -1 the proposed change)
- confirm the release model change (+1 the proposed change)
- stay uncertain for this cycle of how many releases will be made, but
  acknowledge that they need to do a release before RC1 (-1 the proposed
  change)

Change-Id: I45e0555af221bfe58f9f014e4d30e813610dddf9
",git fetch https://review.opendev.org/openstack/releases refs/changes/19/803219/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/ovn-octavia-provider.yaml'],1,07371fe664392fad89b32e7ca9fce164f79a2ad7,not-yet-released,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Felection~master~I07406970f92d9c8917bd26421a394eb48cc39565,openstack/election,master,I07406970f92d9c8917bd26421a394eb48cc39565,Fix doc code for updated Sphinx,MERGED,2021-08-02 10:21:02.000000000,2021-08-03 15:41:58.000000000,2021-08-03 15:40:09.000000000,"[{'_account_id': 8556}, {'_account_id': 11904}, {'_account_id': 15993}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 10:21:02.000000000', 'files': ['doc/source/_exts/events.py'], 'web_link': 'https://opendev.org/openstack/election/commit/d5945b1920b59dc81738e055f4ec8f433807d530', 'message': 'Fix doc code for updated Sphinx\n\nWith Sphinx 4.x, some long deprecated functions have been removed, use\nthe new replacement instead [0].\n\n[0] https://www.sphinx-doc.org/en/master/extdev/deprecated.html\n\nChange-Id: I07406970f92d9c8917bd26421a394eb48cc39565\n'}]",0,803169,d5945b1920b59dc81738e055f4ec8f433807d530,9,4,1,13252,,,0,"Fix doc code for updated Sphinx

With Sphinx 4.x, some long deprecated functions have been removed, use
the new replacement instead [0].

[0] https://www.sphinx-doc.org/en/master/extdev/deprecated.html

Change-Id: I07406970f92d9c8917bd26421a394eb48cc39565
",git fetch https://review.opendev.org/openstack/election refs/changes/69/803169/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/_exts/events.py'],1,d5945b1920b59dc81738e055f4ec8f433807d530,fix-docs-build," app.add_js_file(""event_timer.js"")"," app.add_javascript(""event_timer.js"")",1,1
openstack%2Fmagnum~master~I55042665c25704cd65eb4e4883f8a796bdcdaa7f,openstack/magnum,master,I55042665c25704cd65eb4e4883f8a796bdcdaa7f,Add cloud-provider flag to openstack cloud control manager,MERGED,2021-07-01 11:30:12.000000000,2021-08-03 15:35:29.000000000,2021-08-03 15:33:34.000000000,"[{'_account_id': 6484}, {'_account_id': 13861}, {'_account_id': 20498}, {'_account_id': 22348}, {'_account_id': 28022}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-07-01 11:30:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/f58499a82216fcb94abbcb926464cc0c2a0c6337', 'message': 'Add cloud-provider flag to openstack cloud control manager\n\nRecent OpenStack Cloud Control Manager (occm)\nfails without cloud-provider flag, starting v1.21.0 onwards\n--cloud-provider cannot be empty\nError: --cloud-provider cannot be empty\n\nStory: 2009023\nTask: 42745\nChange-Id: I55042665c25704cd65eb4e4883f8a796bdcdaa7f\n'}, {'number': 2, 'created': '2021-07-12 11:41:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/1e78e7d31f5c90f6e05bce5099dc4f815ed7abc4', 'message': 'Add cloud-provider flag to openstack cloud control manager\n\nRecent OpenStack Cloud Control Manager (occm) fails without\ncloud-provider flag, starting v1.21.0 onwards --cloud-provider cannot be\nempty Error: --cloud-provider cannot be empty\n\nAdditionally, add create role for serviceaccounts/token resource [1].\n\n[1] https://github.com/kubernetes/cloud-provider-openstack/blob/7d844dac9d4bbfd5eee919ce84e1534b5476ee73/manifests/controller-manager/cloud-controller-manager-roles.yaml#L52-L57\n\nStory: 2009023\nTask: 42745\nChange-Id: I55042665c25704cd65eb4e4883f8a796bdcdaa7f\n'}, {'number': 3, 'created': '2021-08-03 13:51:55.000000000', 'files': ['magnum/drivers/common/templates/kubernetes/fragments/kube-apiserver-to-kubelet-role.sh'], 'web_link': 'https://opendev.org/openstack/magnum/commit/12766eaff883b6d7f11cd71d36f69727dc9f8ede', 'message': 'Add cloud-provider flag to openstack cloud control manager\n\nRecent OpenStack Cloud Control Manager (occm) fails without\ncloud-provider flag, starting v1.21.0 onwards --cloud-provider cannot be\nempty Error: --cloud-provider cannot be empty\n\nAdditionally, add create role for serviceaccounts/token resource [1].\n\n[1] https://github.com/kubernetes/cloud-provider-openstack/blob/7d844dac9d4bbfd5eee919ce84e1534b5476ee73/manifests/controller-manager/cloud-controller-manager-roles.yaml#L52-L57\n\nStory: 2009023\nTask: 42745\nChange-Id: I55042665c25704cd65eb4e4883f8a796bdcdaa7f\n'}]",0,799040,12766eaff883b6d7f11cd71d36f69727dc9f8ede,21,6,3,23084,,,0,"Add cloud-provider flag to openstack cloud control manager

Recent OpenStack Cloud Control Manager (occm) fails without
cloud-provider flag, starting v1.21.0 onwards --cloud-provider cannot be
empty Error: --cloud-provider cannot be empty

Additionally, add create role for serviceaccounts/token resource [1].

[1] https://github.com/kubernetes/cloud-provider-openstack/blob/7d844dac9d4bbfd5eee919ce84e1534b5476ee73/manifests/controller-manager/cloud-controller-manager-roles.yaml#L52-L57

Story: 2009023
Task: 42745
Change-Id: I55042665c25704cd65eb4e4883f8a796bdcdaa7f
",git fetch https://review.opendev.org/openstack/magnum refs/changes/40/799040/3 && git format-patch -1 --stdout FETCH_HEAD,['magnum/drivers/common/templates/kubernetes/fragments/kube-apiserver-to-kubelet-role.sh'],1,f58499a82216fcb94abbcb926464cc0c2a0c6337,occm_cloud_provider_flag, - --cloud-provider=openstack,,1,0
openstack%2Ftripleo-ansible~stable%2Fussuri~Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8,openstack/tripleo-ansible,stable/ussuri,Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8,Ensure we catch new openvswitch disruption during upgrade/update.,ABANDONED,2020-10-02 10:14:58.000000000,2021-08-03 15:08:14.000000000,,"[{'_account_id': 6816}, {'_account_id': 8297}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-10-02 10:14:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/19eb274c44714b1472c825cb91333168ae2e3d1d', 'message': 'Ensure we catch new openvswitch disruption during upgrade/update.\n\nOpenvswtich may require special treatment during upgrade in order to\nprevent disruption of the service provided.\n\nIn recents ovs package the disruption was changed:\n\n    preuninstall scriptlet (using /bin/sh):\n\n    if [ $1 -eq 0 ] ; then\n            # Package removal, not upgrade\n            systemctl --no-reload disable --now openvswitch.service &>/dev/null || :\n    fi\n    postuninstall program: /bin/sh\n\n    postuninstall is empty.\n\nWe add this is new profile to the conditional that warrants a special\ntreatment.\n\nChange-Id: Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8\nCloses-Bug: #1897863\n(cherry picked from commit 9d712acb187cb36c45776a69da736e7f685648fb)\n'}, {'number': 2, 'created': '2021-07-08 07:27:39.000000000', 'files': ['tripleo_ansible/ansible_plugins/modules/tripleo_ovs_upgrade.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/6cc3186ebb5b6945524b91783c9dad9952b2fa4d', 'message': 'Ensure we catch new openvswitch disruption during upgrade/update.\n\nOpenvswtich may require special treatment during upgrade in order to\nprevent disruption of the service provided.\n\nIn recents ovs package the disruption was changed:\n\n    preuninstall scriptlet (using /bin/sh):\n\n    if [ $1 -eq 0 ] ; then\n            # Package removal, not upgrade\n            systemctl --no-reload disable --now openvswitch.service &>/dev/null || :\n    fi\n    postuninstall program: /bin/sh\n\n    postuninstall is empty.\n\nWe add this is new profile to the conditional that warrants a special\ntreatment.\n\nChange-Id: Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8\nCloses-Bug: #1897863\n(cherry picked from commit 9d712acb187cb36c45776a69da736e7f685648fb)\n'}]",0,755755,6cc3186ebb5b6945524b91783c9dad9952b2fa4d,12,4,2,6816,,,0,"Ensure we catch new openvswitch disruption during upgrade/update.

Openvswtich may require special treatment during upgrade in order to
prevent disruption of the service provided.

In recents ovs package the disruption was changed:

    preuninstall scriptlet (using /bin/sh):

    if [ $1 -eq 0 ] ; then
            # Package removal, not upgrade
            systemctl --no-reload disable --now openvswitch.service &>/dev/null || :
    fi
    postuninstall program: /bin/sh

    postuninstall is empty.

We add this is new profile to the conditional that warrants a special
treatment.

Change-Id: Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8
Closes-Bug: #1897863
(cherry picked from commit 9d712acb187cb36c45776a69da736e7f685648fb)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/55/755755/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/ansible_plugins/modules/tripleo_ovs_upgrade.py'],1,19eb274c44714b1472c825cb91333168ae2e3d1d,,"def pkg_has_disruption(module): """"""Check if the current ovs pkg include a disruptive action."""""" awk_cmds = [""awk '/postuninstall/,/*/' | grep -q 'systemctl.*try-restart'"", ""awk '/preuninstall/,/*/' | grep -q 'systemctl.*disable'""] rc = 1 for awk in awk_cmds: cmd = ""rpm -q --scripts openvswitch | {}"".format(awk) rc, _, _ = module.run_command(cmd, check_rc=False, use_unsafe_shell=True) if rc == 0: break if not pkg_has_disruption(module):","def pkg_has_restart(module): cmd = """"""rpm -q --scripts openvswitch | \\ awk '/postuninstall/,/*/' | \\ grep -q 'systemctl.*try-restart'"""""" rc, _, _ = module.run_command(cmd, check_rc=False, use_unsafe_shell=True) if not pkg_has_restart(module):",12,7
openstack%2Ftripleo-ansible~stable%2Ftrain~Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8,openstack/tripleo-ansible,stable/train,Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8,Ensure we catch new openvswitch disruption during upgrade/update.,ABANDONED,2020-10-02 10:15:13.000000000,2021-08-03 15:08:03.000000000,,"[{'_account_id': 6816}, {'_account_id': 7353}, {'_account_id': 8297}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-10-02 10:15:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/d9fc974e9d7502d9e0a0cfd00155aee7c8f609e3', 'message': 'Ensure we catch new openvswitch disruption during upgrade/update.\n\nOpenvswtich may require special treatment during upgrade in order to\nprevent disruption of the service provided.\n\nIn recents ovs package the disruption was changed:\n\n    preuninstall scriptlet (using /bin/sh):\n\n    if [ $1 -eq 0 ] ; then\n            # Package removal, not upgrade\n            systemctl --no-reload disable --now openvswitch.service &>/dev/null || :\n    fi\n    postuninstall program: /bin/sh\n\n    postuninstall is empty.\n\nWe add this is new profile to the conditional that warrants a special\ntreatment.\n\nChange-Id: Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8\nCloses-Bug: #1897863\n(cherry picked from commit 9d712acb187cb36c45776a69da736e7f685648fb)\n'}, {'number': 2, 'created': '2021-07-08 07:27:16.000000000', 'files': ['tripleo_ansible/ansible_plugins/modules/tripleo_ovs_upgrade.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/2e6a1de8f9370d638534da3e9b16c283f07e73e2', 'message': 'Ensure we catch new openvswitch disruption during upgrade/update.\n\nOpenvswtich may require special treatment during upgrade in order to\nprevent disruption of the service provided.\n\nIn recents ovs package the disruption was changed:\n\n    preuninstall scriptlet (using /bin/sh):\n\n    if [ $1 -eq 0 ] ; then\n            # Package removal, not upgrade\n            systemctl --no-reload disable --now openvswitch.service &>/dev/null || :\n    fi\n    postuninstall program: /bin/sh\n\n    postuninstall is empty.\n\nWe add this is new profile to the conditional that warrants a special\ntreatment.\n\nChange-Id: Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8\nCloses-Bug: #1897863\n(cherry picked from commit 9d712acb187cb36c45776a69da736e7f685648fb)\n'}]",0,755756,2e6a1de8f9370d638534da3e9b16c283f07e73e2,13,5,2,6816,,,0,"Ensure we catch new openvswitch disruption during upgrade/update.

Openvswtich may require special treatment during upgrade in order to
prevent disruption of the service provided.

In recents ovs package the disruption was changed:

    preuninstall scriptlet (using /bin/sh):

    if [ $1 -eq 0 ] ; then
            # Package removal, not upgrade
            systemctl --no-reload disable --now openvswitch.service &>/dev/null || :
    fi
    postuninstall program: /bin/sh

    postuninstall is empty.

We add this is new profile to the conditional that warrants a special
treatment.

Change-Id: Idc007c16da7b9d15bfbc35fcaed341e1c7aef5f8
Closes-Bug: #1897863
(cherry picked from commit 9d712acb187cb36c45776a69da736e7f685648fb)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/56/755756/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/ansible_plugins/modules/tripleo_ovs_upgrade.py'],1,d9fc974e9d7502d9e0a0cfd00155aee7c8f609e3,,"def pkg_has_disruption(module): """"""Check if the current ovs pkg include a disruptive action."""""" awk_cmds = [""awk '/postuninstall/,/*/' | grep -q 'systemctl.*try-restart'"", ""awk '/preuninstall/,/*/' | grep -q 'systemctl.*disable'""] rc = 1 for awk in awk_cmds: cmd = ""rpm -q --scripts openvswitch | {}"".format(awk) rc, _, _ = module.run_command(cmd, check_rc=False, use_unsafe_shell=True) if rc == 0: break if not pkg_has_disruption(module):","def pkg_has_restart(module): cmd = """"""rpm -q --scripts openvswitch | \\ awk '/postuninstall/,/*/' | \\ grep -q 'systemctl.*try-restart'"""""" rc, _, _ = module.run_command(cmd, check_rc=False, use_unsafe_shell=True) if not pkg_has_restart(module):",12,7
openstack%2Fmagnum~master~Id263cb98abbf5a07b90d7e1e3c60acd223ea39e6,openstack/magnum,master,Id263cb98abbf5a07b90d7e1e3c60acd223ea39e6,[WIP] Fix calico-node privileged issues,NEW,2021-08-03 13:47:37.000000000,2021-08-03 14:35:41.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-03 13:47:37.000000000', 'files': ['magnum/drivers/common/templates/kubernetes/fragments/calico-service.sh', 'magnum/drivers/common/templates/kubernetes/fragments/enable-auto-healing.sh', 'magnum/drivers/k8s_coreos_v1/templates/fragments/enable-kube-proxy-minion.yaml'], 'web_link': 'https://opendev.org/openstack/magnum/commit/fe1d972a04513261a630c22c1e5bbcf763470f93', 'message': '[WIP] Fix calico-node privileged issues\n\nChange-Id: Id263cb98abbf5a07b90d7e1e3c60acd223ea39e6\n'}]",0,803341,fe1d972a04513261a630c22c1e5bbcf763470f93,2,1,1,29298,,,0,"[WIP] Fix calico-node privileged issues

Change-Id: Id263cb98abbf5a07b90d7e1e3c60acd223ea39e6
",git fetch https://review.opendev.org/openstack/magnum refs/changes/41/803341/1 && git format-patch -1 --stdout FETCH_HEAD,"['magnum/drivers/common/templates/kubernetes/fragments/calico-service.sh', 'magnum/drivers/common/templates/kubernetes/fragments/enable-auto-healing.sh', 'magnum/drivers/k8s_coreos_v1/templates/fragments/enable-kube-proxy-minion.yaml']",3,fe1d972a04513261a630c22c1e5bbcf763470f93,, privileged: false, privileged: true,6,6
openstack%2Fcharm-ceph-osd~stable%2F21.04~Ic2f5c854e7d6f2200941e828c1665bce0970f02b,openstack/charm-ceph-osd,stable/21.04,Ic2f5c854e7d6f2200941e828c1665bce0970f02b,Sync release-tools,MERGED,2021-08-02 12:04:07.000000000,2021-08-03 14:32:26.000000000,2021-08-03 14:32:26.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}]","[{'number': 1, 'created': '2021-08-02 12:04:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-osd/commit/9746cd9018e65ce7b6a4b6948aad7209f1c70c3e', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: Ic2f5c854e7d6f2200941e828c1665bce0970f02b\n(cherry picked from commit e5ac333a973c1ce4353f6a5dbaee9aad66bf4561)\n'}, {'number': 2, 'created': '2021-08-02 12:05:42.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-ceph-osd/commit/8e92b0dd7ca78817dad227fdb847dd6cf57ef93b', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: Ic2f5c854e7d6f2200941e828c1665bce0970f02b\n(cherry picked from commit e5ac333a973c1ce4353f6a5dbaee9aad66bf4561)\n'}]",0,803178,8e92b0dd7ca78817dad227fdb847dd6cf57ef93b,13,4,2,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: Ic2f5c854e7d6f2200941e828c1665bce0970f02b
(cherry picked from commit e5ac333a973c1ce4353f6a5dbaee9aad66bf4561)
",git fetch https://review.opendev.org/openstack/charm-ceph-osd refs/changes/78/803178/2 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'tox.ini']",3,9746cd9018e65ce7b6a4b6948aad7209f1c70c3e,fix-tox-pip-resolutionimpossible-stable/21.04,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/requirements.txt -r{toxinidir}/test-requirements.txt,8,9
openstack%2Ftripleo-heat-templates~master~I912d4ae58c627fdea1a70e4f509eb1efb235dd0f,openstack/tripleo-heat-templates,master,I912d4ae58c627fdea1a70e4f509eb1efb235dd0f,Change default for NovaNfsVersion to NFSv4.2,MERGED,2021-07-20 08:52:13.000000000,2021-08-03 14:17:00.000000000,2021-08-03 14:15:32.000000000,"[{'_account_id': 6926}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-07-20 08:52:13.000000000', 'files': ['releasenotes/notes/nova_compute_nfs_default_vers-e61d0bf78794be28.yaml', 'deployment/nova/nova-compute-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8d568bdb6bba23255bd2ca791b269b3916434861', 'message': 'Change default for NovaNfsVersion to NFSv4.2\n\nNFSv4.2 is now there for long time and default in RHEL/CentOS 8. This\nchanges the default for NovaNfsVersion to be v4.2 instead of v4 to\nhave this the new default.\n\nChange-Id: I912d4ae58c627fdea1a70e4f509eb1efb235dd0f\n'}]",0,801428,8d568bdb6bba23255bd2ca791b269b3916434861,12,8,1,17216,,,0,"Change default for NovaNfsVersion to NFSv4.2

NFSv4.2 is now there for long time and default in RHEL/CentOS 8. This
changes the default for NovaNfsVersion to be v4.2 instead of v4 to
have this the new default.

Change-Id: I912d4ae58c627fdea1a70e4f509eb1efb235dd0f
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/28/801428/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/nova_compute_nfs_default_vers-e61d0bf78794be28.yaml', 'deployment/nova/nova-compute-container-puppet.yaml']",2,8d568bdb6bba23255bd2ca791b269b3916434861,nfs_default, default: '4.2', default: '4',7,1
openstack%2Fcinder~master~I9acb94b1620bbb49d462c26af512ab9ac454cb9b,openstack/cinder,master,I9acb94b1620bbb49d462c26af512ab9ac454cb9b,Revert to any snapshot support,ABANDONED,2020-03-24 04:23:15.000000000,2021-08-03 14:06:10.000000000,,"[{'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 12033}, {'_account_id': 12369}, {'_account_id': 15386}, {'_account_id': 15670}, {'_account_id': 18120}, {'_account_id': 18883}, {'_account_id': 21884}, {'_account_id': 22348}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 26537}, {'_account_id': 29705}, {'_account_id': 31303}, {'_account_id': 31751}]","[{'number': 1, 'created': '2020-03-24 04:23:15.000000000', 'files': ['cinder/api/v3/volumes.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/2f55ef899f1a429874f0d1449e1ff716b99c871b', 'message': ""Revert to any snapshot support\n\nImplements blueprint revert-to-any-snapshot\n\nAdd support to revert to any snapshot.\nWhen 'revert_to_latest_snapshot' option is True,\nthe operation is the same as before.\nIf False, perform revert to snapshot even if\na non-latest snapshot_id is entered.\n\nDocImpact\n\nChange-Id: I9acb94b1620bbb49d462c26af512ab9ac454cb9b\n""}]",1,714566,2f55ef899f1a429874f0d1449e1ff716b99c871b,29,18,1,31303,,,0,"Revert to any snapshot support

Implements blueprint revert-to-any-snapshot

Add support to revert to any snapshot.
When 'revert_to_latest_snapshot' option is True,
the operation is the same as before.
If False, perform revert to snapshot even if
a non-latest snapshot_id is entered.

DocImpact

Change-Id: I9acb94b1620bbb49d462c26af512ab9ac454cb9b
",git fetch https://review.opendev.org/openstack/cinder refs/changes/66/714566/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/api/v3/volumes.py'],1,2f55ef899f1a429874f0d1449e1ff716b99c871b,bp/revert-to-any-snapshot,"from oslo_config import cfgrevert_opt = cfg.BoolOpt('revert_to_latest_snapshot', default=True, help='Revert the volume to the most recent snapshot ' 'only. If False, you can revert the volume to ' 'any snapshot, but verify that your volume ' 'driver is working properly.') CONF = cfg.CONF CONF.register_opt(revert_opt) if CONF.revert_to_latest_snapshot: snap = volume.get_latest_snapshot() else: snap = self.volume_api.get_snapshot(context, snapshot_id) if snapshot_id is None: msg = _(""Specified snapshot %(s_id)s is None"") raise exc.HTTPBadRequest(explanation=msg % {'s_id': snapshot_id}) if snapshot_id != snap.id and CONF.revert_to_latest_snapshot: msg = _(""Specified snapshot %(s_id)s is not the latest "" ""one of volume %(v_id)s."") if volume.size != snap.volume_size: 's_id': snap.id}) self.volume_api.revert_to_snapshot(context, volume, snap)"," l_snap = volume.get_latest_snapshot() if snapshot_id is None or snapshot_id != l_snap.id: msg = _(""Specified snapshot %(s_id)s is None or not "" ""the latest one of volume %(v_id)s."") if volume.size != l_snap.volume_size: 's_id': l_snap.id}) self.volume_api.revert_to_snapshot(context, volume, l_snap)",24,7
openstack%2Fcinder~master~I96dedb9ae57de2afa50062521ab5eb5f5debc0e3,openstack/cinder,master,I96dedb9ae57de2afa50062521ab5eb5f5debc0e3,Raise NotImplementedError while driver not implement function attach.,ABANDONED,2020-09-10 03:14:49.000000000,2021-08-03 14:05:02.000000000,,"[{'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12033}, {'_account_id': 12369}, {'_account_id': 15386}, {'_account_id': 15670}, {'_account_id': 19933}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 26537}, {'_account_id': 29705}, {'_account_id': 30638}]","[{'number': 1, 'created': '2020-09-10 03:14:49.000000000', 'files': ['cinder/volume/driver.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/3cfb30a83088047d05d1a34b11dd3726c101b392', 'message': 'Raise NotImplementedError while driver not implement function attach.\n\nThe program will execute the ""pass"" code if the volume driver has not\nimplement function attach_volume and then the false data will appear.\nThrowing a NotImplementedError can be useful.\n\nChange-Id: I96dedb9ae57de2afa50062521ab5eb5f5debc0e3\nCloses-Bug: #1895074\n'}]",0,750865,3cfb30a83088047d05d1a34b11dd3726c101b392,21,16,1,30638,,,0,"Raise NotImplementedError while driver not implement function attach.

The program will execute the ""pass"" code if the volume driver has not
implement function attach_volume and then the false data will appear.
Throwing a NotImplementedError can be useful.

Change-Id: I96dedb9ae57de2afa50062521ab5eb5f5debc0e3
Closes-Bug: #1895074
",git fetch https://review.opendev.org/openstack/cinder refs/changes/65/750865/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/volume/driver.py'],1,3cfb30a83088047d05d1a34b11dd3726c101b392,bug/1895074," msg = _(""The method attach_volume is not implemented."") raise NotImplementedError(msg)", pass,2,1
openstack%2Foslo.utils~master~Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f,openstack/oslo.utils,master,Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f,Modify UUID sentinel to support keystone-like UUIDs,MERGED,2021-07-26 11:45:08.000000000,2021-08-03 14:04:44.000000000,2021-08-03 14:02:49.000000000,"[{'_account_id': 6928}, {'_account_id': 11904}, {'_account_id': 15334}, {'_account_id': 16312}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-07-26 11:45:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.utils/commit/fff41c42a0becaeb6f13912c8634418b419ccf9a', 'message': 'Modify UUID sentinel to support keystone-like UUIDs\n\nKeystone User IDs and Project IDs are used in unit tests, but\n_UUIDSentinels() class doesn\'t generate UUIDs without hyphens.\n\nThis patch makes backward compatible modifications to\n_UUIDSentinels() class and introduces keystoneidsentinel global\nthat could be used in the same way as existing uuidsentinel.\n\nOriginal ""UUID sentinel"" change: I214ff21b461fa1ca4b83476e1d0a763efe986217\n\nRelated-Bug: #1746747\nChange-Id: Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f\n'}, {'number': 2, 'created': '2021-07-29 11:15:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.utils/commit/1b86dcf276339744cc0c68fd71b95c413ca6bf79', 'message': 'Modify UUID sentinel to support keystone-like UUIDs\n\nKeystone User IDs and Project IDs are used in unit tests, but\n_UUIDSentinels() class doesn\'t generate UUIDs without hyphens.\n\nThis patch makes backward compatible modifications to\n_UUIDSentinels() class and introduces keystoneidsentinel global\nthat could be used in the same way as existing uuidsentinel.\n\nOriginal ""UUID sentinel"" change: I214ff21b461fa1ca4b83476e1d0a763efe986217\n\nRelated-Bug: #1746747\nChange-Id: Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f\n'}, {'number': 3, 'created': '2021-07-29 11:36:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.utils/commit/d367cb54ba010ad2a1f5ba4cf7dec68d6bbb8446', 'message': 'Modify UUID sentinel to support keystone-like UUIDs\n\nKeystone User IDs and Project IDs are used in unit tests, but\n_UUIDSentinels() class doesn\'t generate UUIDs without hyphens.\n\nThis patch makes backward compatible modifications to\n_UUIDSentinels() class and introduces keystoneidsentinel global\nthat could be used in the same way as existing uuidsentinel.\n\nOriginal ""UUID sentinel"" change: I214ff21b461fa1ca4b83476e1d0a763efe986217\n\nRelated-Bug: #1746747\nChange-Id: Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f\n'}, {'number': 4, 'created': '2021-08-02 13:21:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.utils/commit/e86ab2b26c0f89acc0b7d263b8fb457de7189a79', 'message': 'Modify UUID sentinel to support keystone-like UUIDs\n\nKeystone User IDs and Project IDs are used in unit tests, but\n_UUIDSentinels() class doesn\'t generate UUIDs without hyphens.\n\nThis patch makes backward compatible modifications to\n_UUIDSentinels() class and introduces keystoneidsentinel global\nthat could be used in the same way as existing uuidsentinel.\n\nOriginal ""UUID sentinel"" change: I214ff21b461fa1ca4b83476e1d0a763efe986217\n\nRelated-Bug: #1746747\nChange-Id: Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f\n'}, {'number': 5, 'created': '2021-08-03 11:14:19.000000000', 'files': ['releasenotes/notes/introduce-keystoneidsentinel-16bf3e7f2ae7e9f3.yaml', 'oslo_utils/fixture.py', 'oslo_utils/tests/test_fixture.py'], 'web_link': 'https://opendev.org/openstack/oslo.utils/commit/2c74bb92e5e9561e2ad1386c2e14fb042d6dc062', 'message': 'Modify UUID sentinel to support keystone-like UUIDs\n\nKeystone User IDs and Project IDs are used in unit tests, but\n_UUIDSentinels() class doesn\'t generate UUIDs without hyphens.\n\nThis patch makes backward compatible modifications to\n_UUIDSentinels() class and introduces keystoneidsentinel global\nthat could be used in the same way as existing uuidsentinel.\n\nOriginal ""UUID sentinel"" change: I214ff21b461fa1ca4b83476e1d0a763efe986217\n\nRelated-Bug: #1746747\nChange-Id: Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f\n'}]",3,802297,2c74bb92e5e9561e2ad1386c2e14fb042d6dc062,21,6,5,19234,,,0,"Modify UUID sentinel to support keystone-like UUIDs

Keystone User IDs and Project IDs are used in unit tests, but
_UUIDSentinels() class doesn't generate UUIDs without hyphens.

This patch makes backward compatible modifications to
_UUIDSentinels() class and introduces keystoneidsentinel global
that could be used in the same way as existing uuidsentinel.

Original ""UUID sentinel"" change: I214ff21b461fa1ca4b83476e1d0a763efe986217

Related-Bug: #1746747
Change-Id: Idb3e893cc03d64ad0522b5e4cedfa30c4f4a2a2f
",git fetch https://review.opendev.org/openstack/oslo.utils refs/changes/97/802297/4 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_utils/fixture.py', 'oslo_utils/tests/test_fixture.py']",2,fff41c42a0becaeb6f13912c8634418b419ccf9a,1746747,"from oslo_utils.fixture import keystoneidsentinel as keystids keystid1 = keystids.foobar keystid2 = keystids.barfoo self.assertNotEqual(keystid1, keystid2) self.assertTrue(uuidutils.is_uuid_like(keystids.foo)) self.assertIsInstance(keystids.foo, str)",,14,3
openstack%2Freleases~master~I92c10ccb39f738e96ee770bf162d5ab209d4431f,openstack/releases,master,I92c10ccb39f738e96ee770bf162d5ab209d4431f,Release horizon for stable/ussuri,MERGED,2021-07-23 16:48:53.000000000,2021-08-03 14:03:06.000000000,2021-08-03 14:03:06.000000000,"[{'_account_id': 11904}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-07-23 16:48:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/e441b9b81337df7f3a5916fa38361d454bdc49c6', 'message': 'Release horizon for stable/ussuri\n\nThis release picks up new commits to horizon since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\n$ git log --oneline --no-merges 18.3.3..7555c16cf\n7555c16cf doc: Update our IRC server to OFTC\n96f403311 On the create instance from, when the image name is empty, show id\n64024e9f5 Save instace_id inside Associate Floating IP workflow\nec5261cce Fix Material theme to work with any combination of pyScss and MDI icons\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I92c10ccb39f738e96ee770bf162d5ab209d4431f\n'}, {'number': 2, 'created': '2021-08-02 17:35:04.000000000', 'files': ['deliverables/ussuri/horizon.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/4a0d413ae0682d78fb4550eeaba4bbd3b40a19c9', 'message': 'Release horizon for stable/ussuri\n\nThis release picks up new commits to horizon since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I92c10ccb39f738e96ee770bf162d5ab209d4431f\n'}]",0,802061,4a0d413ae0682d78fb4550eeaba4bbd3b40a19c9,13,4,2,17685,,,0,"Release horizon for stable/ussuri

This release picks up new commits to horizon since
the last release from stable/ussuri.

This is being proposed as a convenience to help make sure stable
changes are being released. If the team is good with this going out,
please respond with a +1 to let the release team know it is OK to
proceed.

If it is not wanted at this time, or if there are more changes that
would be good to get merged before doing a stable release, please
leave a -1 with a comment with what the team would prefer. We can
then either abandon this patch, or wait for an update with a new
commit hash to use instead.

Signed-off-by: Elod Illes <elod.illes@est.tech>
Change-Id: I92c10ccb39f738e96ee770bf162d5ab209d4431f
",git fetch https://review.opendev.org/openstack/releases refs/changes/61/802061/2 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/ussuri/horizon.yaml'],1,e441b9b81337df7f3a5916fa38361d454bdc49c6,ussuri-stable, - version: 18.3.4 projects: - repo: openstack/horizon hash: 7555c16cf6247c9ecf8f18dd565828f812338357,,4,0
openstack%2Freleases~master~I9860d80ad8752734c50c661be5bb4f6063e1cecb,openstack/releases,master,I9860d80ad8752734c50c661be5bb4f6063e1cecb,Release adjutant-ui for stable/ussuri,MERGED,2021-07-23 15:04:26.000000000,2021-08-03 13:52:16.000000000,2021-08-03 13:52:16.000000000,"[{'_account_id': 10420}, {'_account_id': 11904}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-23 15:04:26.000000000', 'files': ['deliverables/ussuri/adjutant-ui.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/8fd18c4dddc47e281eec0d618bb5c1f4fb4f9088', 'message': 'Release adjutant-ui for stable/ussuri\n\nThis release picks up new commits to adjutant-ui since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\n$ git log --oneline --no-merges 0.5.0..400130e\n400130e Now checks for code 202 when checking for success for other operations.\nf2082dd Now checks for code 202 when checking for success\n8a0d89c Comparison exception causes quota output to fail\n073fbb9 Add .zuul.yaml file\n47874bd Update TOX_CONSTRAINTS_FILE for stable/ussuri\nc26b395 Update .gitreview for stable/ussuri\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I9860d80ad8752734c50c661be5bb4f6063e1cecb\n'}]",0,802033,8fd18c4dddc47e281eec0d618bb5c1f4fb4f9088,9,4,1,17685,,,0,"Release adjutant-ui for stable/ussuri

This release picks up new commits to adjutant-ui since
the last release from stable/ussuri.

This is being proposed as a convenience to help make sure stable
changes are being released. If the team is good with this going out,
please respond with a +1 to let the release team know it is OK to
proceed.

If it is not wanted at this time, or if there are more changes that
would be good to get merged before doing a stable release, please
leave a -1 with a comment with what the team would prefer. We can
then either abandon this patch, or wait for an update with a new
commit hash to use instead.

$ git log --oneline --no-merges 0.5.0..400130e
400130e Now checks for code 202 when checking for success for other operations.
f2082dd Now checks for code 202 when checking for success
8a0d89c Comparison exception causes quota output to fail
073fbb9 Add .zuul.yaml file
47874bd Update TOX_CONSTRAINTS_FILE for stable/ussuri
c26b395 Update .gitreview for stable/ussuri

Signed-off-by: Elod Illes <elod.illes@est.tech>
Change-Id: I9860d80ad8752734c50c661be5bb4f6063e1cecb
",git fetch https://review.opendev.org/openstack/releases refs/changes/33/802033/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/ussuri/adjutant-ui.yaml'],1,8fd18c4dddc47e281eec0d618bb5c1f4fb4f9088,ussuri-stable, - version: 0.5.1 projects: - repo: openstack/adjutant-ui hash: 400130e2c86e29f9c0f38fc709b4e8e3f1593468,,4,0
openstack%2Fcharm-neutron-openvswitch~master~I4aa805273f83b9cd88d96fa0e77b12e829cb2499,openstack/charm-neutron-openvswitch,master,I4aa805273f83b9cd88d96fa0e77b12e829cb2499,Mention deferred service events in README,MERGED,2021-07-09 17:47:45.000000000,2021-08-03 13:33:19.000000000,2021-08-03 13:33:19.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-09 17:47:45.000000000', 'files': ['README.md'], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/e6e8d72f50cc7d034569428eb8776f4d80bf0a36', 'message': 'Mention deferred service events in README\n\nThis is a boilerplate section that will eventually\nbe added to the README for every charm that supports\nthe deferred restart feature.\n\nChange-Id: I4aa805273f83b9cd88d96fa0e77b12e829cb2499\n'}]",0,800286,e6e8d72f50cc7d034569428eb8776f4d80bf0a36,7,3,1,30561,,,0,"Mention deferred service events in README

This is a boilerplate section that will eventually
be added to the README for every charm that supports
the deferred restart feature.

Change-Id: I4aa805273f83b9cd88d96fa0e77b12e829cb2499
",git fetch https://review.opendev.org/openstack/charm-neutron-openvswitch refs/changes/86/800286/1 && git format-patch -1 --stdout FETCH_HEAD,['README.md'],1,e6e8d72f50cc7d034569428eb8776f4d80bf0a36,readme-mention-deferred-service-events," # Deferred service events Operational or maintenance procedures applied to a cloud often lead to the restarting of various OpenStack services and/or the calling of certain charm hooks. Although normal, such events can be undesirable due to the service interruptions they can cause. The deferred service events feature provides the operator the choice of preventing these service restarts and hook calls from occurring, which can then be resolved at a more opportune time. See the [Deferred service events][cdg-deferred-service-events] page in the [OpenStack Charms Deployment Guide][cdg] for an in-depth treatment of this feature. <!-- LINKS --> [cdg]: https://docs.openstack.org/project-deploy-guide/charm-deployment-guide [cdg-deferred-service-events]: https://docs.openstack.org/project-deploy-guide/charm-deployment-guide/latest/deferred-events.html",,20,0
openstack%2Fheat~stable%2Fwallaby~I6a2b5afa13480791971bbd8bba1f43b9f2db8294,openstack/heat,stable/wallaby,I6a2b5afa13480791971bbd8bba1f43b9f2db8294,Use Block Storage API v3 instead of API v2,MERGED,2021-07-28 06:20:14.000000000,2021-08-03 13:27:40.000000000,2021-08-03 13:24:06.000000000,"[{'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-28 06:20:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/f2533ea53904891a4c6bb9dc5f9d92329fc9282d', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nNote:\n- functional tests non-voting is temporally made non-voting until\n  another fix for heat-tempest-plugin[1] is merged.\n- granade tests is made non-voting because it is not pulling change\n  in heat_integrations properly.\n\n[1] https://review.opendev.org/c/openstack/heat-tempest-plugin/+/802150/\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n(cherry picked from commit d62e279e0f1b89fd2ff53bd12a8a52ab6a91b54d)\n'}, {'number': 2, 'created': '2021-08-03 07:30:04.000000000', 'files': ['heat/tests/openstack/cinder/test_volume.py', 'heat_integrationtests/common/test.py', '.zuul.yaml', 'heat/tests/openstack/cinder/test_volume_type.py', 'heat/tests/openstack/cinder/test_volume_utils.py', 'heat_integrationtests/common/clients.py', 'heat/tests/clients/test_cinder_client.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/8fbd4476c00565c38ff341e639cee5cbdf83f0f9', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\nUnused volume_client and network_client in integration test code are\nalso removed by this change.\n\nNote:\ngranade tests is made non-voting temporally until the same issue is\nfixed in stable/victoria.\n\nDepends-on: https://review.opendev.org/802150/\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n(cherry picked from commit 1828df32fa946d49d8449ff1d8a26c05b3990a65)\n'}]",0,802468,8fbd4476c00565c38ff341e639cee5cbdf83f0f9,17,2,2,9816,,,0,"Use Block Storage API v3 instead of API v2

Block Storage API v2 was deprecated during Pike cycle and is being
removed during Xena cycle, and current v3 API should be used instead.
Unused volume_client and network_client in integration test code are
also removed by this change.

Note:
granade tests is made non-voting temporally until the same issue is
fixed in stable/victoria.

Depends-on: https://review.opendev.org/802150/
Change-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294
(cherry picked from commit 1828df32fa946d49d8449ff1d8a26c05b3990a65)
",git fetch https://review.opendev.org/openstack/heat refs/changes/68/802468/2 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/openstack/cinder/test_volume.py', '.zuul.yaml', 'heat/tests/openstack/cinder/test_volume_type.py', 'heat/tests/openstack/cinder/test_volume_utils.py', 'heat_integrationtests/common/clients.py', 'heat/tests/clients/test_cinder_client.py']",6,f2533ea53904891a4c6bb9dc5f9d92329fc9282d,volumev2-removal-stable/wallaby,," def test_cinder_api_v2(self): ctx = utils.dummy_context() self.patchobject(ctx.keystone_session, 'get_endpoint', side_effect=[ks_exceptions.EndpointNotFound, None]) client = ctx.clients.client('cinder') self.assertEqual('2.0', client.version) ",9,17
openstack%2Ftripleo-ci-health-queries~master~I06bb7f0075d6203179a2908057ebba8136df07c7,openstack/tripleo-ci-health-queries,master,I06bb7f0075d6203179a2908057ebba8136df07c7,Add query on ubi8/other container pull error,MERGED,2021-08-02 18:33:50.000000000,2021-08-03 13:20:45.000000000,2021-08-03 13:20:45.000000000,"[{'_account_id': 9976}, {'_account_id': 22348}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-08-02 18:33:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci-health-queries/commit/fa94a197dee020ef491a72b85e1745f485086e46', 'message': 'add query on ubi8/other container pull error\n\nRelated-Bug: #1938718\nChange-Id: I06bb7f0075d6203179a2908057ebba8136df07c7\n'}, {'number': 2, 'created': '2021-08-02 19:17:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci-health-queries/commit/a76ad06ed2d0837603b7cb913644ba318ca8235f', 'message': 'add query on ubi8/other container pull error\n\nRelated-Bug: #1938718\nChange-Id: I06bb7f0075d6203179a2908057ebba8136df07c7\n'}, {'number': 3, 'created': '2021-08-02 19:42:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci-health-queries/commit/5cce9389c4b5be4b4ef28a51da433d02c69c2f10', 'message': 'Add query on ubi8/other container pull error\n\nRelated-Bug: #1938718\nChange-Id: I06bb7f0075d6203179a2908057ebba8136df07c7\n'}, {'number': 4, 'created': '2021-08-02 20:04:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci-health-queries/commit/489a6cceaab4dd67ed4ce9884fb2a09c05639357', 'message': 'Add query on ubi8/other container pull error\n\nRelated-Bug: #1938718\nChange-Id: I06bb7f0075d6203179a2908057ebba8136df07c7\n'}, {'number': 5, 'created': '2021-08-03 12:51:42.000000000', 'files': ['output/sova-pattern-generated.json', 'output/elastic-recheck/1938718.yaml', 'samples/errors-testing.err', 'src/data/queries.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci-health-queries/commit/615e6dc72fcd8e340657acc811f1d5ab275cb364', 'message': 'Add query on ubi8/other container pull error\n\nRelated-Bug: #1938718\nChange-Id: I06bb7f0075d6203179a2908057ebba8136df07c7\n'}]",1,803246,615e6dc72fcd8e340657acc811f1d5ab275cb364,15,3,5,9592,,,0,"Add query on ubi8/other container pull error

Related-Bug: #1938718
Change-Id: I06bb7f0075d6203179a2908057ebba8136df07c7
",git fetch https://review.opendev.org/openstack/tripleo-ci-health-queries refs/changes/46/803246/4 && git format-patch -1 --stdout FETCH_HEAD,"['output/sova-pattern-generated.json', 'samples/errors-testing.err', 'src/data/queries.yml']",3,fa94a197dee020ef491a72b85e1745f485086e46,I06bb7f0075d6203179a2908057ebba8136df07c7, - error_type: infra id: container pull error msg: unable to pull ubi8 or other container pattern: 'error creating build container: Error reading signatures: Get' sova_tag: logstash url: https://bugs.launchpad.net/tripleo/+bug/1938718,,18,0
openstack%2Fcharm-deployment-guide~master~I699fa10cbe9f478bd18522cb40d589d7f43b3282,openstack/charm-deployment-guide,master,I699fa10cbe9f478bd18522cb40d589d7f43b3282,Fix more links,MERGED,2021-07-15 21:29:46.000000000,2021-08-03 13:17:06.000000000,2021-08-03 13:15:18.000000000,"[{'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-15 21:29:46.000000000', 'files': ['deploy-guide/source/install-openstack-bundle.rst', 'deploy-guide/source/install-maas.rst', 'deploy-guide/source/swift.rst'], 'web_link': 'https://opendev.org/openstack/charm-deployment-guide/commit/ef5e691126a7cdf438b88c36918bd3ab4c0cf187', 'message': 'Fix more links\n\nFix more links that are reported as broken by the\nweb team link checker.\n\nChange-Id: I699fa10cbe9f478bd18522cb40d589d7f43b3282\n'}]",0,800996,ef5e691126a7cdf438b88c36918bd3ab4c0cf187,7,2,1,30561,,,0,"Fix more links

Fix more links that are reported as broken by the
web team link checker.

Change-Id: I699fa10cbe9f478bd18522cb40d589d7f43b3282
",git fetch https://review.opendev.org/openstack/charm-deployment-guide refs/changes/96/800996/1 && git format-patch -1 --stdout FETCH_HEAD,"['deploy-guide/source/install-openstack-bundle.rst', 'deploy-guide/source/install-maas.rst', 'deploy-guide/source/swift.rst']",3,ef5e691126a7cdf438b88c36918bd3ab4c0cf187,fix-more-links,.. _Cross model relations: https://juju.is/docs/olm/cross-model-relations,.. _Cross model relations: https://jaas.ai/docs/cross-model-relations,3,3
openstack%2Fcharm-guide~master~I4d6be154d4859eb8e8ea1ba46be7f3f6b19f66c3,openstack/charm-guide,master,I4d6be154d4859eb8e8ea1ba46be7f3f6b19f66c3,Update charm list for Ironic,MERGED,2021-07-09 19:27:20.000000000,2021-08-03 13:15:20.000000000,2021-08-03 13:13:46.000000000,"[{'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-09 19:27:20.000000000', 'files': ['doc/source/openstack-charms.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/7bd6d0267a71e646f3243bbb406821b5ea5a9c1b', 'message': ""Update charm list for Ironic\n\nAs per team consensus, in the charm list, remove the\ncommunity charm 'ironic' (trusty only). Also add charm\n'neutron-api-plugin-ironic' that was missing.\n\nChange-Id: I4d6be154d4859eb8e8ea1ba46be7f3f6b19f66c3\n""}]",0,800305,7bd6d0267a71e646f3243bbb406821b5ea5a9c1b,7,2,1,30561,,,0,"Update charm list for Ironic

As per team consensus, in the charm list, remove the
community charm 'ironic' (trusty only). Also add charm
'neutron-api-plugin-ironic' that was missing.

Change-Id: I4d6be154d4859eb8e8ea1ba46be7f3f6b19f66c3
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/05/800305/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/openstack-charms.rst'],1,7bd6d0267a71e646f3243bbb406821b5ea5a9c1b,update-charm-list-for-ironic,* `neutron-api-plugin-ironic`_.. _neutron-api-plugin-ironic: https://opendev.org/openstack/charm-neutron-api-plugin-ironic,* `ironic`_.. _ironic: https://opendev.org/openstack/charm-ironic,2,2
openstack%2Ftripleo-heat-templates~master~I1a400ed04bf59bac908b0506bf4bbcac457e512d,openstack/tripleo-heat-templates,master,I1a400ed04bf59bac908b0506bf4bbcac457e512d,Default ganesha-internal service endpoint to external network,MERGED,2021-08-01 14:34:41.000000000,2021-08-03 13:15:14.000000000,2021-08-03 13:15:14.000000000,"[{'_account_id': 6796}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-01 14:34:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5025b280107a0d64558e2286c92d8398e4654f8b', 'message': 'Default ganesha-internal service endpoint to external network\n\nCloses-Bug: #1938639\nChange-Id: I1a400ed04bf59bac908b0506bf4bbcac457e512d\n'}, {'number': 2, 'created': '2021-08-01 18:18:12.000000000', 'files': ['overcloud-resource-registry-puppet.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e104c6e623c32f7606eaaa40751c61c35c5780bb', 'message': 'Default ganesha-internal service endpoint to external network\n\nCloses-Bug: #1938639\nChange-Id: I1a400ed04bf59bac908b0506bf4bbcac457e512d\n'}]",0,803118,e104c6e623c32f7606eaaa40751c61c35c5780bb,12,5,2,9003,,,0,"Default ganesha-internal service endpoint to external network

Closes-Bug: #1938639
Change-Id: I1a400ed04bf59bac908b0506bf4bbcac457e512d
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/18/803118/2 && git format-patch -1 --stdout FETCH_HEAD,['overcloud-resource-registry-puppet.j2.yaml'],1,5025b280107a0d64558e2286c92d8398e4654f8b,," # Guest VMs use GaneshaNetwork and connot reach ctlplane network, # so default to external when storage_nfs is not available. GaneshaNetwork: {{ _service_nets.get('storage_nfs', 'external') }}"," GaneshaNetwork: {{ _service_nets.get('storage_nfs', 'ctlplane') }}",3,1
openstack%2Ftripleo-heat-templates~master~I7e168dda4419953abb1002b3180c8f512b59d7f1,openstack/tripleo-heat-templates,master,I7e168dda4419953abb1002b3180c8f512b59d7f1,Keystone: Keep default auth methods in OpenIDC Federation,MERGED,2021-07-12 08:32:12.000000000,2021-08-03 13:15:08.000000000,2021-08-03 13:15:08.000000000,"[{'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 7414}, {'_account_id': 14250}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-12 08:32:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1c8772673a76299d1465100afee7d326cb61ff76', 'message': ""Keystone: Keep default auth methods in OpenIDC Federation\n\nThe enable-federation-openidc.yaml environment file defines enabled\nauth methods but its current contents doesn't include all of\nthe default items like application_credentials.\nThis change ensures that all default methods are still enabled when\nfederation with OpenIDC is used.\n\nChange-Id: I7e168dda4419953abb1002b3180c8f512b59d7f1\n""}, {'number': 2, 'created': '2021-07-12 08:47:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1129652bcc54cee51c0ec9d7afedabf913e47679', 'message': ""Keystone: Keep default auth methods in OpenIDC Federation\n\nThe enable-federation-openidc.yaml environment file defines enabled\nauth methods but its current contents doesn't include all of\nthe default items like application_credentials.\nThis change ensures that all default methods are still enabled when\nfederation with OpenIDC is used.\n\nCloses-Bug: #1935811\nChange-Id: I7e168dda4419953abb1002b3180c8f512b59d7f1\n""}, {'number': 3, 'created': '2021-07-12 14:21:48.000000000', 'files': ['environments/enable-federation-openidc.yaml', 'sample-env-generator/openidc.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/62b17c21b8a8e392b14f48266c48c46f6100e24e', 'message': ""Keystone: Keep default auth methods in OpenIDC Federation\n\nThe enable-federation-openidc.yaml environment file defines enabled\nauth methods but its current contents doesn't include all of\nthe default items like application_credential.\nThis change ensures that all default methods are still enabled when\nfederation with OpenIDC is used.\n\nCloses-Bug: #1935811\nChange-Id: I7e168dda4419953abb1002b3180c8f512b59d7f1\n""}]",2,800439,62b17c21b8a8e392b14f48266c48c46f6100e24e,19,7,3,9816,,,0,"Keystone: Keep default auth methods in OpenIDC Federation

The enable-federation-openidc.yaml environment file defines enabled
auth methods but its current contents doesn't include all of
the default items like application_credential.
This change ensures that all default methods are still enabled when
federation with OpenIDC is used.

Closes-Bug: #1935811
Change-Id: I7e168dda4419953abb1002b3180c8f512b59d7f1
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/39/800439/3 && git format-patch -1 --stdout FETCH_HEAD,"['environments/enable-federation-openidc.yaml', 'sample-env-generator/openidc.yaml']",2,1c8772673a76299d1465100afee7d326cb61ff76,bug/1935811," KeystoneAuthMethods: external,password,token,oauth1,mapped,application_credential,openid"," KeystoneAuthMethods: 'password,token,openid'",2,2
openstack%2Ftripleo-ansible~stable%2Fussuri~If1239369b9c650ab62be58b4ae125cff120fa49a,openstack/tripleo-ansible,stable/ussuri,If1239369b9c650ab62be58b4ae125cff120fa49a,Configure vhost-postcopy-support,MERGED,2021-07-30 12:50:03.000000000,2021-08-03 13:15:03.000000000,2021-08-03 13:15:03.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-07-30 12:50:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/27a1b67aba83ae029a84a518e75240303efea04b', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)\n(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)\n(cherry picked from commit 47b499ac50139610d72c32265a0bc8e7eed75884)\n'}, {'number': 2, 'created': '2021-07-30 12:58:40.000000000', 'files': ['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/bd0fcf363f773ee0852b1421d1066ae065b2b91c', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)\n(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)\n(cherry picked from commit 47b499ac50139610d72c32265a0bc8e7eed75884)\n'}]",0,803016,bd0fcf363f773ee0852b1421d1066ae065b2b91c,12,10,2,27419,,,0,"Configure vhost-postcopy-support

Libvirt PostCopy helps with live-migration. For postcopy to work with
vhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Change-Id: If1239369b9c650ab62be58b4ae125cff120fa49a
(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)
(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)
(cherry picked from commit 47b499ac50139610d72c32265a0bc8e7eed75884)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/16/803016/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml']",2,27a1b67aba83ae029a84a518e75240303efea04b,vhost-postcopy,tripleo_ovs_dpdk_vhost_postcopy_support: false,,40,0
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,openstack/tripleo-heat-templates,stable/ussuri,I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,Make memcached port parameters globally available,MERGED,2021-08-02 13:25:56.000000000,2021-08-03 13:14:56.000000000,2021-08-03 13:14:56.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-02 13:25:56.000000000', 'files': ['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/dc11095b679dbe43df0ccd151bf14754b38418e8', 'message': 'Make memcached port parameters globally available\n\nThe memcached_port parameter and the memcached_authtoken_port parameter\nare used in each api service. Because memcached and each api services\nare not always collocated, we should use global hieradata to ensure\nthe parameters defined in memcached service resource are propagated to\nall nodes in the deployment.\n\nChange-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc\n(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)\n'}]",0,803207,dc11095b679dbe43df0ccd151bf14754b38418e8,12,6,1,14250,,,0,"Make memcached port parameters globally available

The memcached_port parameter and the memcached_authtoken_port parameter
are used in each api service. Because memcached and each api services
are not always collocated, we should use global hieradata to ensure
the parameters defined in memcached service resource are propagated to
all nodes in the deployment.

Change-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc
(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/07/803207/1 && git format-patch -1 --stdout FETCH_HEAD,"['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml']",2,dc11095b679dbe43df0ccd151bf14754b38418e8,," global_config_settings: # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. if: - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort}"," # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. if: - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort} -",10,13
openstack%2Fpuppet-ironic~stable%2Fwallaby~I81e64148b3ad276633b84e436682fc1b78bfdd7f,openstack/puppet-ironic,stable/wallaby,I81e64148b3ad276633b84e436682fc1b78bfdd7f,We shouldn't set pxe/ipxe_enabled in ironic config,MERGED,2021-07-21 01:20:40.000000000,2021-08-03 13:07:55.000000000,2021-08-03 13:07:55.000000000,"[{'_account_id': 9414}, {'_account_id': 9816}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 14985}, {'_account_id': 15519}, {'_account_id': 16137}, {'_account_id': 22348}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-07-21 01:20:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/c3aeb0260cba6687d8c442ede2ce4e775102237e', 'message': ""We shouldn't set pxe/ipxe_enabled in ironic config\n\nThis parameter was removed a while ago [1]\n\n[1] https://review.opendev.org/c/openstack/ironic/+/696810\n\nChange-Id: I81e64148b3ad276633b84e436682fc1b78bfdd7f\n(cherry picked from commit 5daa9edd96eebde8b6866f362006fae46df27f6a)\n""}, {'number': 2, 'created': '2021-07-22 15:46:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/8deb85017730f61fa4fa017f358c385b92b73097', 'message': ""We shouldn't set pxe/ipxe_enabled in ironic config\n\nThis parameter was removed a while ago [1]\n\n[1] https://review.opendev.org/c/openstack/ironic/+/696810\n\nChange-Id: I81e64148b3ad276633b84e436682fc1b78bfdd7f\n(cherry picked from commit 5daa9edd96eebde8b6866f362006fae46df27f6a)\n""}, {'number': 3, 'created': '2021-07-22 15:50:48.000000000', 'files': ['manifests/drivers/pxe.pp', 'spec/classes/ironic_drivers_pxe_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/fc299c77c9035f38168f587173b2d663097b4e2f', 'message': ""We shouldn't set pxe/ipxe_enabled in ironic config\n\nThis parameter was removed a while ago [1]\n\n[1] https://review.opendev.org/c/openstack/ironic/+/696810\n\nChange-Id: I81e64148b3ad276633b84e436682fc1b78bfdd7f\n(cherry picked from commit 5daa9edd96eebde8b6866f362006fae46df27f6a)\n""}]",0,801483,fc299c77c9035f38168f587173b2d663097b4e2f,16,9,3,9816,,,0,"We shouldn't set pxe/ipxe_enabled in ironic config

This parameter was removed a while ago [1]

[1] https://review.opendev.org/c/openstack/ironic/+/696810

Change-Id: I81e64148b3ad276633b84e436682fc1b78bfdd7f
(cherry picked from commit 5daa9edd96eebde8b6866f362006fae46df27f6a)
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/83/801483/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/drivers/pxe.pp', 'spec/classes/ironic_drivers_pxe_spec.rb']",2,c3aeb0260cba6687d8c442ede2ce4e775102237e,ipxe-fix-w, is_expected.to contain_ironic_config('pxe/ipxe_enabled').with_ensure('absent'), is_expected.to contain_ironic_config('pxe/ipxe_enabled').with_value(false) is_expected.to contain_ironic_config('pxe/ipxe_enabled').with_value(true) is_expected.to contain_ironic_config('pxe/ipxe_enabled').with_value(p[:ipxe_enabled]),2,4
openstack%2Freleases~master~I154d0a69500fb17d0cba97fd1baf7b0d78ae0c88,openstack/releases,master,I154d0a69500fb17d0cba97fd1baf7b0d78ae0c88,New ovn-octavia-provider release,MERGED,2021-08-03 08:59:25.000000000,2021-08-03 13:01:28.000000000,2021-08-03 13:01:28.000000000,"[{'_account_id': 841}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-08-03 08:59:25.000000000', 'files': ['deliverables/xena/ovn-octavia-provider.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/4a2fb39e294f176fafac47c713a0d5d834069f10', 'message': ""New ovn-octavia-provider release\n\nIt's feature version bump mostly because of [1]\n\n[1] https://review.opendev.org/c/openstack/ovn-octavia-provider/+/713253\n\nChange-Id: I154d0a69500fb17d0cba97fd1baf7b0d78ae0c88\n""}]",0,803321,4a2fb39e294f176fafac47c713a0d5d834069f10,8,4,1,11975,,,0,"New ovn-octavia-provider release

It's feature version bump mostly because of [1]

[1] https://review.opendev.org/c/openstack/ovn-octavia-provider/+/713253

Change-Id: I154d0a69500fb17d0cba97fd1baf7b0d78ae0c88
",git fetch https://review.opendev.org/openstack/releases refs/changes/21/803321/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/ovn-octavia-provider.yaml'],1,4a2fb39e294f176fafac47c713a0d5d834069f10,ovn-octavia-provider-release,releases: - version: 1.1.0 projects: - repo: openstack/ovn-octavia-provider hash: b25bc5773486bdb6e67d30dede34fbabf81606ec,,5,0
openstack%2Fcharm-nova-cloud-controller~stable%2F21.04~I6e7a1c719921d48745e047af46017a43ff927643,openstack/charm-nova-cloud-controller,stable/21.04,I6e7a1c719921d48745e047af46017a43ff927643,Sync release-tools,MERGED,2021-08-02 12:09:57.000000000,2021-08-03 13:00:02.000000000,2021-08-03 13:00:02.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-08-02 12:09:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/f0c14f1a4743a13e719a481228254a85f184bc2a', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I6e7a1c719921d48745e047af46017a43ff927643\n(cherry picked from commit 27df75e61abf4d8c8415380d13420385537fb9c7)\n'}, {'number': 2, 'created': '2021-08-02 12:11:56.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/0371560125e1c7bd8ef3539e512693fe40367a9e', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I6e7a1c719921d48745e047af46017a43ff927643\n(cherry picked from commit 27df75e61abf4d8c8415380d13420385537fb9c7)\n'}]",0,803180,0371560125e1c7bd8ef3539e512693fe40367a9e,11,5,2,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: I6e7a1c719921d48745e047af46017a43ff927643
(cherry picked from commit 27df75e61abf4d8c8415380d13420385537fb9c7)
",git fetch https://review.opendev.org/openstack/charm-nova-cloud-controller refs/changes/80/803180/2 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'tox.ini']",3,f0c14f1a4743a13e719a481228254a85f184bc2a,fix-tox-pip-resolutionimpossible-stable/21.04,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/requirements.txt -r{toxinidir}/test-requirements.txt,8,9
openstack%2Fcharm-hacluster~stable%2F21.04~Ic42a655ccf68ff5b9af92ee4f31bfa7e98e661f2,openstack/charm-hacluster,stable/21.04,Ic42a655ccf68ff5b9af92ee4f31bfa7e98e661f2,Sync release-tools,MERGED,2021-08-02 11:51:39.000000000,2021-08-03 12:44:49.000000000,2021-08-03 12:44:49.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-08-02 11:51:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/c6262aaf73acfb097e7220bdda9021c3376facb4', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: Ic42a655ccf68ff5b9af92ee4f31bfa7e98e661f2\n(cherry picked from commit f5cf5253773af9a561954f34a38075b7e4bc68d5)\n'}, {'number': 2, 'created': '2021-08-02 11:53:14.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/23c0dfc40daf3cf7c700706fb8f3d5042154d167', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: Ic42a655ccf68ff5b9af92ee4f31bfa7e98e661f2\n(cherry picked from commit f5cf5253773af9a561954f34a38075b7e4bc68d5)\n'}]",0,803177,23c0dfc40daf3cf7c700706fb8f3d5042154d167,11,5,2,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: Ic42a655ccf68ff5b9af92ee4f31bfa7e98e661f2
(cherry picked from commit f5cf5253773af9a561954f34a38075b7e4bc68d5)
",git fetch https://review.opendev.org/openstack/charm-hacluster refs/changes/77/803177/2 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'tox.ini']",3,c6262aaf73acfb097e7220bdda9021c3376facb4,fix-tox-pip-resolutionimpossible-stable/21.04,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/requirements.txt -r{toxinidir}/test-requirements.txt,8,9
openstack%2Fcharm-cinder~stable%2F21.04~I1fae5202c2730af91071092c7a32d70a157bb842,openstack/charm-cinder,stable/21.04,I1fae5202c2730af91071092c7a32d70a157bb842,Sync release-tools,MERGED,2021-08-02 11:47:35.000000000,2021-08-03 12:40:47.000000000,2021-08-03 12:40:47.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-08-02 11:47:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-cinder/commit/f0ea94b682d0f933465ce153983f228e1a901fb7', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I1fae5202c2730af91071092c7a32d70a157bb842\n(cherry picked from commit 24d1ccb2049da0a056889d69479b8e4717a3b32b)\n'}, {'number': 2, 'created': '2021-08-02 11:50:49.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-cinder/commit/be72b2d7dfb6baa6c0413941840bc968791be60a', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I1fae5202c2730af91071092c7a32d70a157bb842\n(cherry picked from commit 24d1ccb2049da0a056889d69479b8e4717a3b32b)\n'}]",0,803176,be72b2d7dfb6baa6c0413941840bc968791be60a,13,5,2,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: I1fae5202c2730af91071092c7a32d70a157bb842
(cherry picked from commit 24d1ccb2049da0a056889d69479b8e4717a3b32b)
",git fetch https://review.opendev.org/openstack/charm-cinder refs/changes/76/803176/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'tox.ini']",3,f0ea94b682d0f933465ce153983f228e1a901fb7,fix-tox-pip-resolutionimpossible-stable/21.04,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/requirements.txt -r{toxinidir}/test-requirements.txt,8,9
openstack%2Fkolla-ansible~stable%2Fussuri~I9da331e007c25c4a760839c566831769a68507a9,openstack/kolla-ansible,stable/ussuri,I9da331e007c25c4a760839c566831769a68507a9,Fix incorrect config of linuxbridge multiple external networks,MERGED,2021-08-03 07:32:18.000000000,2021-08-03 12:35:42.000000000,2021-08-03 12:34:02.000000000,"[{'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-08-03 07:32:18.000000000', 'files': ['releasenotes/notes/linux-bridge-multi-fe8576616fb7d373.yaml', 'ansible/roles/neutron/templates/ml2_conf.ini.j2', 'ansible/roles/neutron/templates/linuxbridge_agent.ini.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f6f2c135284fb6e82a024e84e21100da029754f4', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n(cherry picked from commit 24950b3894039d8f42ebaa6a6696d6a2e3d91b95)\n'}]",0,803275,f6f2c135284fb6e82a024e84e21100da029754f4,9,3,1,30491,,,0,"Fix incorrect config of linuxbridge multiple external networks

multiple external networks are supported by linuxbridge and OVS.
Currently the config template only works for OVS

Closes-Bug: #1863935
Change-Id: I9da331e007c25c4a760839c566831769a68507a9
(cherry picked from commit 24950b3894039d8f42ebaa6a6696d6a2e3d91b95)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/75/803275/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/linux-bridge-multi-fe8576616fb7d373.yaml', 'ansible/roles/neutron/templates/ml2_conf.ini.j2', 'ansible/roles/neutron/templates/linuxbridge_agent.ini.j2']",3,f6f2c135284fb6e82a024e84e21100da029754f4,bug/1863935-stable/wallaby-stable/victoria-stable/ussuri,"{% if inventory_hostname in groups[""network""] or (inventory_hostname in groups[""compute""] and computes_need_external_bridge | bool ) %} physical_interface_mappings = {% for interface in neutron_external_interface.split(',') %}physnet{{ loop.index0 + 1 }}:{{ interface }}{% if not loop.last %},{% endif %}{% endfor %} {% endif %}",physical_interface_mappings = physnet1:{{ neutron_external_interface }},10,2
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~If8958c414c400026c66187261d8fff439aad6388,openstack/tripleo-heat-templates,stable/wallaby,If8958c414c400026c66187261d8fff439aad6388,Enabling vhost-postcopy-support when live_migration_permit_post_copy,MERGED,2021-07-30 12:40:40.000000000,2021-08-03 12:32:00.000000000,2021-08-03 12:32:00.000000000,"[{'_account_id': 7353}, {'_account_id': 11604}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-07-30 12:40:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/35c2394a1a4f58ecf354873ee2a75a84fd527a52', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit eb3a6b0d43952e34b150af8b67a515b603f9f2ca)\n""}, {'number': 2, 'created': '2021-07-30 12:43:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f0cd2c559f681ec8de4974e63f01609f4b598408', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit eb3a6b0d43952e34b150af8b67a515b603f9f2ca)\n""}, {'number': 3, 'created': '2021-07-30 12:44:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/16c3d0e5aa65497a6d34cb0b5cbb79a19ddf6d4b', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/803011\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit eb3a6b0d43952e34b150af8b67a515b603f9f2ca)\n""}, {'number': 4, 'created': '2021-07-30 13:22:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8ef01ce07274911d0937cb3c6438f15247ff91dc', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit 135360cc818261a8edd01384019f57281f244a4f)\n""}, {'number': 5, 'created': '2021-07-30 13:24:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/53d5288de41fa67739c16a1ebb72fb1254890d05', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/803011\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit 135360cc818261a8edd01384019f57281f244a4f)\n""}, {'number': 6, 'created': '2021-08-02 07:41:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b5b6a6eefb3e8378f8bea3364cdaa604da7ebab2', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/803011\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit 135360cc818261a8edd01384019f57281f244a4f)\n""}, {'number': 7, 'created': '2021-08-02 09:48:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d4efb62fe557a0d478e3cfbb29ca585bb13952b2', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/803011\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit 135360cc818261a8edd01384019f57281f244a4f)\n""}, {'number': 8, 'created': '2021-08-02 13:40:15.000000000', 'files': ['deployment/nova/nova-compute-container-puppet.yaml', 'deployment/openvswitch/openvswitch-dpdk-baremetal-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/40dfd3b8d9e97a5bdceccc522e194faaeab44bca', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/803011\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n(cherry picked from commit 135360cc818261a8edd01384019f57281f244a4f)\n""}]",2,803012,40dfd3b8d9e97a5bdceccc522e194faaeab44bca,24,8,8,27419,,,0,"Enabling vhost-postcopy-support when live_migration_permit_post_copy

When we enable live_migration_permit_post_copy in nova-libvirt, we also need
to enable the vhost-postcopy-support config in OVS.

Also, the only reason to not automatically enable
live_migration_permit_post_copy is on realtime hypervisors, so we're removing
the hugepages condition.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Depends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/803011

Change-Id: If8958c414c400026c66187261d8fff439aad6388
(cherry picked from commit 135360cc818261a8edd01384019f57281f244a4f)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/12/803012/8 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/nova/nova-compute-container-puppet.yaml', 'deployment/openvswitch/openvswitch-dpdk-baremetal-ansible.yaml']",2,35c2394a1a4f58ecf354873ee2a75a84fd527a52,vhost-postcopy," NovaLiveMigrationPermitPostCopy: description: > Set to ""True"" to activate the instance on the destination node before migration is complete, and to set an upper bound on the memory that needs to be transferred. default: false type: boolean tags: - role_specific<<<<<<< HEAD (3f9dc5 Merge ""nova-compute: Adding failed_when to nova-compute stop)======= is_realtime: equals: [{get_param: [RoleParameters, TunedProfileName]}, 'realtime-virtual-host'] >>>>>>> CHANGE (eb3a6b Enabling vhost-postcopy-support when live_migration_permit_p) nova_postcopy: NovaLiveMigrationPermitPostCopy NovaLiveMigrationPermitPostCopy: {get_param: NovaLiveMigrationPermitPostCopy} tripleo_ovs_dpdk_vhost_postcopy_support: if: - is_realtime - false - {get_attr: [RoleParametersDpdk, value, nova_postcopy]}",,21,4
openstack%2Ftripleo-heat-templates~stable%2Fvictoria~I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,openstack/tripleo-heat-templates,stable/victoria,I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,Make memcached port parameters globally available,MERGED,2021-08-02 13:25:00.000000000,2021-08-03 12:31:49.000000000,2021-08-03 12:31:49.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-02 13:25:00.000000000', 'files': ['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/fc64a45be0960f04f063667eb3fb540bde5f3e16', 'message': 'Make memcached port parameters globally available\n\nThe memcached_port parameter and the memcached_authtoken_port parameter\nare used in each api service. Because memcached and each api services\nare not always collocated, we should use global hieradata to ensure\nthe parameters defined in memcached service resource are propagated to\nall nodes in the deployment.\n\nChange-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc\n(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)\n'}]",0,803206,fc64a45be0960f04f063667eb3fb540bde5f3e16,12,6,1,14250,,,0,"Make memcached port parameters globally available

The memcached_port parameter and the memcached_authtoken_port parameter
are used in each api service. Because memcached and each api services
are not always collocated, we should use global hieradata to ensure
the parameters defined in memcached service resource are propagated to
all nodes in the deployment.

Change-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc
(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/06/803206/1 && git format-patch -1 --stdout FETCH_HEAD,"['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml']",2,fc64a45be0960f04f063667eb3fb540bde5f3e16,," global_config_settings: # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. if: - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort}"," # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. if: - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort} -",10,13
openstack%2Fosprofiler~master~Ibdbcad7cf5b19442a36ff06b935153960200b96d,openstack/osprofiler,master,Ibdbcad7cf5b19442a36ff06b935153960200b96d,Set manila config opts in devstack,MERGED,2021-02-10 18:13:07.000000000,2021-08-03 12:29:17.000000000,2021-08-03 12:28:00.000000000,"[{'_account_id': 5950}, {'_account_id': 11904}, {'_account_id': 15334}, {'_account_id': 20104}, {'_account_id': 22348}, {'_account_id': 32919}]","[{'number': 1, 'created': '2021-02-10 18:13:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/0323e888a4eb5ce61e2fd7dc8827f1813a7a39b2', 'message': 'Set manila config opts in devstack\n\nWhen enabled, manila conf options need\nto be set as well for the profiler to\nwork on devstack.\n\nDepends-On: I3bce1f04d1cfebfacd78ed135a949a068c78987d\nChange-Id: Ibdbcad7cf5b19442a36ff06b935153960200b96d\n'}, {'number': 2, 'created': '2021-08-02 17:16:25.000000000', 'files': ['devstack/lib/osprofiler'], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/e475de6c67be2e3825e51895a6d1d86b1a576d45', 'message': 'Set manila config opts in devstack\n\nWhen enabled, manila conf options need\nto be set as well for the profiler to\nwork on devstack.\n\nDepends-On: I3bce1f04d1cfebfacd78ed135a949a068c78987d\nChange-Id: Ibdbcad7cf5b19442a36ff06b935153960200b96d\n'}]",0,774919,e475de6c67be2e3825e51895a6d1d86b1a576d45,12,6,2,16643,,,0,"Set manila config opts in devstack

When enabled, manila conf options need
to be set as well for the profiler to
work on devstack.

Depends-On: I3bce1f04d1cfebfacd78ed135a949a068c78987d
Change-Id: Ibdbcad7cf5b19442a36ff06b935153960200b96d
",git fetch https://review.opendev.org/openstack/osprofiler refs/changes/19/774919/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/osprofiler'],1,0323e888a4eb5ce61e2fd7dc8827f1813a7a39b2,bp/manila-os-profiler, $MANILA_CONF,,1,0
openstack%2Ftrove~stable%2Fvictoria~I05a07402388d214dc95071be709191f63af49411,openstack/trove,stable/victoria,I05a07402388d214dc95071be709191f63af49411,Run reset master when setting up mysql replicas,MERGED,2021-08-03 04:28:04.000000000,2021-08-03 11:56:14.000000000,2021-08-03 11:54:56.000000000,"[{'_account_id': 6732}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 04:28:04.000000000', 'files': ['trove/guestagent/datastore/mysql_common/service.py', 'trove/guestagent/strategies/replication/mysql_gtid.py', 'trove/guestagent/utils/mysql.py'], 'web_link': 'https://opendev.org/openstack/trove/commit/c551eac98382fb4802ffc7db73be6f5e66061cbc', 'message': ""Run reset master when setting up mysql replicas\n\n* Only run 'FLUSH PRIVILEGES;' when needed\n* Fix SqlClient contextmanager initialization\n\nStory: 2009091\nTask: 42921\n\nChange-Id: I05a07402388d214dc95071be709191f63af49411\n""}]",0,803305,c551eac98382fb4802ffc7db73be6f5e66061cbc,7,2,1,6732,,,0,"Run reset master when setting up mysql replicas

* Only run 'FLUSH PRIVILEGES;' when needed
* Fix SqlClient contextmanager initialization

Story: 2009091
Task: 42921

Change-Id: I05a07402388d214dc95071be709191f63af49411
",git fetch https://review.opendev.org/openstack/trove refs/changes/05/803305/1 && git format-patch -1 --stdout FETCH_HEAD,"['trove/guestagent/datastore/mysql_common/service.py', 'trove/guestagent/strategies/replication/mysql_gtid.py', 'trove/guestagent/utils/mysql.py']",3,c551eac98382fb4802ffc7db73be6f5e66061cbc,victoria-reset-master-for-replica," def __init__(self, engine, use_flush=False): return self except Exception as err: LOG.error(f'Failed to execute SQL {t}, error: {err}') raise err"," def __init__(self, engine, use_flush=True): return self.conn except Exception: raise",43,25
openstack%2Ftripleo-heat-templates~master~If8958c414c400026c66187261d8fff439aad6388,openstack/tripleo-heat-templates,master,If8958c414c400026c66187261d8fff439aad6388,Enabling vhost-postcopy-support when live_migration_permit_post_copy,MERGED,2021-07-28 16:58:46.000000000,2021-08-03 11:54:02.000000000,2021-08-02 18:18:10.000000000,"[{'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 11604}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20172}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 30073}]","[{'number': 1, 'created': '2021-07-28 16:58:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/28323dfc26bd738c86edd695fcfe55e4790d8e55', 'message': 'DNM Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy, we also need to enable\nthe vhost-postcopy-support config in OVS.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n'}, {'number': 2, 'created': '2021-07-28 17:42:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/944f44c7fb4d2220d76d4d2b0cd94fe22e9db97d', 'message': 'DNM Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy, we also need to enable\nthe vhost-postcopy-support config in OVS.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n'}, {'number': 3, 'created': '2021-07-28 17:43:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8bed6b14d36e5548225533efecfafa8b8d46ec02', 'message': 'DNM Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy, we also need to enable\nthe vhost-postcopy-support config in OVS.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n'}, {'number': 4, 'created': '2021-07-29 01:26:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bcdad21075defc26f505d154bf614920e8961811', 'message': 'DNM Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy, we also need to enable\nthe vhost-postcopy-support config in OVS.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n'}, {'number': 5, 'created': '2021-07-30 04:19:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/2d33b260bdd4221c59113106d9de2841d44f6159', 'message': ""DNM Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n""}, {'number': 6, 'created': '2021-07-30 04:20:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/51f485c20868558c0c2ea976542beb15f6b1c663', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n""}, {'number': 7, 'created': '2021-07-30 12:22:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/eb3a6b0d43952e34b150af8b67a515b603f9f2ca', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n""}, {'number': 8, 'created': '2021-07-30 13:19:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/135360cc818261a8edd01384019f57281f244a4f', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n""}, {'number': 9, 'created': '2021-08-02 07:32:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f0f301d38895f19900ea253f5a50c0811f0cf752', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n""}, {'number': 10, 'created': '2021-08-02 09:37:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/40aa81e6cca06609d50229842dee5c5604798770', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n""}, {'number': 11, 'created': '2021-08-02 09:41:47.000000000', 'files': ['deployment/nova/nova-compute-container-puppet.yaml', 'deployment/openvswitch/openvswitch-dpdk-baremetal-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8e0bd79c6be0526a736f5b7f2ea7a2a4f9828865', 'message': ""Enabling vhost-postcopy-support when live_migration_permit_post_copy\n\nWhen we enable live_migration_permit_post_copy in nova-libvirt, we also need\nto enable the vhost-postcopy-support config in OVS.\n\nAlso, the only reason to not automatically enable\nlive_migration_permit_post_copy is on realtime hypervisors, so we're removing\nthe hugepages condition.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742\n\nChange-Id: If8958c414c400026c66187261d8fff439aad6388\n""}]",17,802760,8e0bd79c6be0526a736f5b7f2ea7a2a4f9828865,55,12,11,27419,,,0,"Enabling vhost-postcopy-support when live_migration_permit_post_copy

When we enable live_migration_permit_post_copy in nova-libvirt, we also need
to enable the vhost-postcopy-support config in OVS.

Also, the only reason to not automatically enable
live_migration_permit_post_copy is on realtime hypervisors, so we're removing
the hugepages condition.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Depends-On: https://review.opendev.org/c/openstack/tripleo-ansible/+/802742

Change-Id: If8958c414c400026c66187261d8fff439aad6388
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/60/802760/6 && git format-patch -1 --stdout FETCH_HEAD,['deployment/openvswitch/openvswitch-dpdk-baremetal-ansible.yaml'],1,28323dfc26bd738c86edd695fcfe55e4790d8e55,vhost-postcopy," NovaReservedHugePages: description: > A list of valid key=value which reflect NUMA node ID, page size (Default unit is KiB) and number of pages to be reserved. Example - NovaReservedHugePages: [""node:0,size:2048,count:64"",""node:1,size:1GB,count:1""] will reserve on NUMA node 0 64 pages of 2MiB and on NUMA node 1 1 page of 1GiB type: comma_delimited_list default: [] tags: - role_specific NovaLiveMigrationPermitPostCopy: description: > Set to ""True"" to activate the instance on the destination node before migration is complete, and to set an upper bound on the memory that needs to be transferred. default: false type: boolean tags: - role_specific OvsDpdkVhostPostCopy: description: | Enable Libvirt's PostCopy support for vhost interfaces in OVS. type: boolean default: false tags: - role_specific conditions: reserved_huge_pages_set: not: and: - equals: [{get_param: [RoleParameters, NovaReservedHugePages]}, """"] - equals: [{get_param: NovaReservedHugePages}, []] live_migration_optimization_set: and: - not: {equals: [{get_param: [RoleParameters, TunedProfileName]}, 'realtime-virtual-host']} - reserved_huge_pages_set permit_post_copy_set: or: - not: {equals: [{get_param: [RoleParameters, NovaLiveMigrationPermitPostCopy]}, '']} - {get_param: NovaLiveMigrationPermitPostCopy} vhost_postcopy_support_set: or: - not: {equals: [{get_param: [RoleParameters, OvsDpdkVhostPostCopy]}, '']} - {get_param: OvsDpdkVhostPostCopy} vhost_postconfig_support: OvsDpdkVhostPostCopy nova_permit_post_copy: NovaLiveMigrationPermitPostCopy OvsDpdkVhostPostCopy: {get_param: OvsDpdkVhostPostCopy} NovaLiveMigrationPermitPostCopy: {get_param: NovaLiveMigrationPermitPostCopy} tripleo_ovs_dpdk_vhost_postconfig_support: if: - vhost_postcopy_support_set - {get_attr: [RoleParametersDpdk, value, vhost_postconfig_support} - if: - and: - live_migration_optimization_set - permit_post_copy_set - true - false",,60,1
openstack%2Fpython-openstackclient~master~I687556cebf22c2450596060d4c5094bd395bf473,openstack/python-openstackclient,master,I687556cebf22c2450596060d4c5094bd395bf473,Add 'bgpvpn' type support to rbac commands,NEW,2021-08-01 21:01:41.000000000,2021-08-03 11:39:12.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-01 21:01:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/9d4cb68880234b8bcf6c34b2236a1731c9c6e4e0', 'message': ""Add 'bgpvpn' type support to rbac commands\n\nDepends-On: https://review.opendev.org/c/openstack/networking-bgpvpn/+/798155\nChange-Id: I687556cebf22c2450596060d4c5094bd395bf473\n""}, {'number': 2, 'created': '2021-08-03 10:31:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/2e1b76a17e2b447d152b8ae3dca8626e3f607a2e', 'message': ""Add 'bgpvpn' type support to rbac commands\n\nDepends-On: https://review.opendev.org/c/openstack/networking-bgpvpn/+/798155\nChange-Id: I687556cebf22c2450596060d4c5094bd395bf473\n""}, {'number': 3, 'created': '2021-08-03 10:44:25.000000000', 'files': ['releasenotes/notes/rbac-add-bgpvpn-6e7dbbc69cf1035b.yaml', 'openstackclient/network/v2/network_rbac.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/f60aaf8886c949236080beea012586341e202650', 'message': ""Add 'bgpvpn' type support to rbac commands\n\nDepends-On: https://review.opendev.org/c/openstack/networking-bgpvpn/+/798155\nChange-Id: I687556cebf22c2450596060d4c5094bd395bf473\n""}]",0,803124,f60aaf8886c949236080beea012586341e202650,6,1,3,27256,,,0,"Add 'bgpvpn' type support to rbac commands

Depends-On: https://review.opendev.org/c/openstack/networking-bgpvpn/+/798155
Change-Id: I687556cebf22c2450596060d4c5094bd395bf473
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/24/803124/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/rbac-add-bgpvpn-6e7dbbc69cf1035b.yaml', 'openstackclient/network/v2/network_rbac.py', 'openstackclient/tests/unit/network/v2/test_network_rbac.py']",3,9d4cb68880234b8bcf6c34b2236a1731c9c6e4e0,rbac-bgpvpn," bgpvpn_object = network_fakes.FakeBGPVPN.create_one_bgpvpn() self.network.find_bgpvpn = mock.Mock( return_value=self.bgpvpn_object) ('address_group', ""ag_object""), ('bgpvpn', ""bgpvpn_object"")"," ('address_group', ""ag_object"")",21,7
openstack%2Fkayobe~master~I082e1b807497d17ae40ddf86e1473fbfcdf625e2,openstack/kayobe,master,I082e1b807497d17ae40ddf86e1473fbfcdf625e2,Ubuntu: Set MTU for veth in the network files,MERGED,2021-07-25 19:59:48.000000000,2021-08-03 11:31:03.000000000,2021-08-03 11:29:40.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-07-25 19:59:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/6fbc6daf917215c88d73336396168f98c4082fda', 'message': ""Ubuntu: Set MTU for veth in the network files\n\nConfiguring veth pair MTU in the systemd-networkd .netdev files\ndoes not set the correct MTU for the peer and there isn't\nconfiguration option in the [Peer] section to do so [1].\nThis results in an MTU mismatch with peer having the default\n(1500) value.\n\nThis change moves the MTU configuration from the .netdev file\nto the [Link] section of the corresponding veth pair .network files.\nSame approach is already recommended in [1] for the tun and\ntap devices.\n\n[1] https://www.freedesktop.org/software/systemd/man/systemd.netdev.html\n\nStory: 2009072\nTask: 42882\nChange-Id: I082e1b807497d17ae40ddf86e1473fbfcdf625e2\n""}, {'number': 2, 'created': '2021-07-30 08:39:58.000000000', 'files': ['kayobe/plugins/filter/networkd.py', 'kayobe/tests/unit/plugins/filter/test_networkd.py', 'releasenotes/notes/story-2009072-57e5d079e182e763.yaml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/5a0206aef1f78d54845593556c13acbde99a7419', 'message': ""Ubuntu: Set MTU for veth in the network files\n\nConfiguring veth pair MTU in the systemd-networkd .netdev files\ndoes not set the correct MTU for the peer and there isn't\nconfiguration option in the [Peer] section to do so [1].\nThis results in an MTU mismatch with peer having the default\n(1500) value.\n\nThis change moves the MTU configuration from the .netdev file\nto the [Link] section of the corresponding veth pair .network files.\nSame approach is already recommended in [1] for the tun and\ntap devices.\n\n[1] https://www.freedesktop.org/software/systemd/man/systemd.netdev.html\n\nStory: 2009072\nTask: 42882\nChange-Id: I082e1b807497d17ae40ddf86e1473fbfcdf625e2\n""}]",0,802218,5a0206aef1f78d54845593556c13acbde99a7419,13,4,2,33466,,,0,"Ubuntu: Set MTU for veth in the network files

Configuring veth pair MTU in the systemd-networkd .netdev files
does not set the correct MTU for the peer and there isn't
configuration option in the [Peer] section to do so [1].
This results in an MTU mismatch with peer having the default
(1500) value.

This change moves the MTU configuration from the .netdev file
to the [Link] section of the corresponding veth pair .network files.
Same approach is already recommended in [1] for the tun and
tap devices.

[1] https://www.freedesktop.org/software/systemd/man/systemd.netdev.html

Story: 2009072
Task: 42882
Change-Id: I082e1b807497d17ae40ddf86e1473fbfcdf625e2
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/18/802218/1 && git format-patch -1 --stdout FETCH_HEAD,"['kayobe/plugins/filter/networkd.py', 'kayobe/tests/unit/plugins/filter/test_networkd.py']",2,6fbc6daf917215c88d73336396168f98c4082fda,bug/2009072," def test_veth_with_mtu(self): self._update_context({""external_net_names"": [""net3""], ""net3_bridge_ports"": [], ""net3_mtu"": 1400}) nets = networkd.networkd_networks(self.context, [""net3""]) expected = { ""50-kayobe-br0"": [ { ""Match"": [ {""Name"": ""br0""} ] }, { ""Link"": [ {""MTUBytes"": 1400}, ] }, ], ""50-kayobe-p-br0-phy"": [ { ""Match"": [ {""Name"": ""p-br0-phy""} ] }, { ""Network"": [ {""Bridge"": ""br0""}, ] }, { ""Link"": [ {""MTUBytes"": 1400}, ] }, ], ""50-kayobe-p-br0-ovs"": [ { ""Match"": [ {""Name"": ""p-br0-ovs""} ] }, { ""Network"": [ {""ConfigureWithoutCarrier"": ""true""}, ] }, { ""Link"": [ {""MTUBytes"": 1400}, ] }, ], } self.assertEqual(expected, nets) "," def test_veth_with_mtu(self): self._update_context({""external_net_names"": [""net3""], ""net3_mtu"": 1400}) devs = networkd.networkd_netdevs(self.context, [""net3""]) expected = { ""50-kayobe-br0"": [ { ""NetDev"": [ {""Name"": ""br0""}, {""Kind"": ""bridge""}, {""MTUBytes"": 1400}, ] }, ], ""50-kayobe-p-br0-phy"": [ { ""NetDev"": [ {""Name"": ""p-br0-phy""}, {""Kind"": ""veth""}, {""MTUBytes"": 1400}, ] }, { ""Peer"": [ {""Name"": ""p-br0-ovs""}, ] }, ] } self.assertEqual(expected, devs) ",67,33
openstack%2Fironic~stable%2Fussuri~I038ca335efa9b5443469ab8c8af12863deea0e38,openstack/ironic,stable/ussuri,I038ca335efa9b5443469ab8c8af12863deea0e38,Fix redfish-virtual-media file permission,MERGED,2021-07-22 15:35:25.000000000,2021-08-03 11:20:56.000000000,2021-08-03 11:19:08.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-22 15:35:25.000000000', 'files': ['ironic/tests/unit/drivers/modules/redfish/test_boot.py', 'ironic/drivers/modules/redfish/boot.py', 'ironic/conf/redfish.py', 'releasenotes/notes/redfish-virtual-media-permission-fix-1909b9cdbbbf9fd1.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/b1c8976d4bed3ab818fa7dd5b16e24a7507333aa', 'message': 'Fix redfish-virtual-media file permission\n\nWhen not using swift with the redfish virtual media boot interface,\nin other words local file storage, the file permissions for the\n/httpboot/redfish folder was incorrect upon initially being created,\nand new file ISOs were being created with permissions based upon the\nconductor process umask value which is OS environment dependent.\n\nChange-Id: I038ca335efa9b5443469ab8c8af12863deea0e38\n(cherry picked from commit af6cd1093d7b4be25a8bfbbdf1fb13226f6bfa7e)\n'}]",0,801871,b1c8976d4bed3ab818fa7dd5b16e24a7507333aa,14,3,1,11655,,,0,"Fix redfish-virtual-media file permission

When not using swift with the redfish virtual media boot interface,
in other words local file storage, the file permissions for the
/httpboot/redfish folder was incorrect upon initially being created,
and new file ISOs were being created with permissions based upon the
conductor process umask value which is OS environment dependent.

Change-Id: I038ca335efa9b5443469ab8c8af12863deea0e38
(cherry picked from commit af6cd1093d7b4be25a8bfbbdf1fb13226f6bfa7e)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/71/801871/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/tests/unit/drivers/modules/redfish/test_boot.py', 'ironic/drivers/modules/redfish/boot.py', 'ironic/conf/redfish.py', 'releasenotes/notes/redfish-virtual-media-permission-fix-1909b9cdbbbf9fd1.yaml']",4,b1c8976d4bed3ab818fa7dd5b16e24a7507333aa,,"--- upgrade: - | Operators may need to check their ``/httpboot/redfish`` folder permissions if using ``redfish-virtual-media``. The conductor was previously creating the folder with incorrect permissions. - | A permission setting has been added for ``redfish-virtual-media`` boot interface, which allows for explicit file permission setting when the driver is being used. The default for the new ``[redfish]file_permission setting is ``0u644``, or 644 if manually changed using ``chmod`` on the command line. Operators MAY need to adjust this if they were running the conductor with a specific ``umask`` to work around the permission setting defect. fixes: - | Fixes the ``redfish-virtual-media`` and related based drivers to utilize an explicit file permission instead of rely upon the ironic-conductor umask, which may be incorrect. This can be tuned with the ``[redfish]file_permission`` setting. - | Fixes an issue where the default folder permission for the ``redfish-virtual-media`` driver where the folder permissions for the ``/httpboot/redfish`` folder was being created with incorrect permissions. ",,45,5
openstack%2Fkolla-ansible~stable%2Fvictoria~I9da331e007c25c4a760839c566831769a68507a9,openstack/kolla-ansible,stable/victoria,I9da331e007c25c4a760839c566831769a68507a9,Fix incorrect config of linuxbridge multiple external networks,MERGED,2021-08-03 07:32:09.000000000,2021-08-03 11:13:16.000000000,2021-08-03 11:11:38.000000000,"[{'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-08-03 07:32:09.000000000', 'files': ['releasenotes/notes/linux-bridge-multi-fe8576616fb7d373.yaml', 'ansible/roles/neutron/templates/ml2_conf.ini.j2', 'ansible/roles/neutron/templates/linuxbridge_agent.ini.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/ec0687dcd596628bed2a980e680acc00e780e097', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n(cherry picked from commit 24950b3894039d8f42ebaa6a6696d6a2e3d91b95)\n'}]",0,803274,ec0687dcd596628bed2a980e680acc00e780e097,9,3,1,30491,,,0,"Fix incorrect config of linuxbridge multiple external networks

multiple external networks are supported by linuxbridge and OVS.
Currently the config template only works for OVS

Closes-Bug: #1863935
Change-Id: I9da331e007c25c4a760839c566831769a68507a9
(cherry picked from commit 24950b3894039d8f42ebaa6a6696d6a2e3d91b95)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/74/803274/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/linux-bridge-multi-fe8576616fb7d373.yaml', 'ansible/roles/neutron/templates/ml2_conf.ini.j2', 'ansible/roles/neutron/templates/linuxbridge_agent.ini.j2']",3,ec0687dcd596628bed2a980e680acc00e780e097,bug/1863935-stable/wallaby-stable/victoria,"{% if inventory_hostname in groups[""network""] or (inventory_hostname in groups[""compute""] and computes_need_external_bridge | bool ) %} physical_interface_mappings = {% for interface in neutron_external_interface.split(',') %}physnet{{ loop.index0 + 1 }}:{{ interface }}{% if not loop.last %},{% endif %}{% endfor %} {% endif %}",physical_interface_mappings = physnet1:{{ neutron_external_interface }},10,2
openstack%2Fkolla-ansible~stable%2Fwallaby~I9da331e007c25c4a760839c566831769a68507a9,openstack/kolla-ansible,stable/wallaby,I9da331e007c25c4a760839c566831769a68507a9,Fix incorrect config of linuxbridge multiple external networks,MERGED,2021-08-03 07:32:01.000000000,2021-08-03 11:10:12.000000000,2021-08-03 11:08:38.000000000,"[{'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-08-03 07:32:01.000000000', 'files': ['releasenotes/notes/linux-bridge-multi-fe8576616fb7d373.yaml', 'ansible/roles/neutron/templates/ml2_conf.ini.j2', 'ansible/roles/neutron/templates/linuxbridge_agent.ini.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f60c51d12b9d9ed22bcd120804b2939fdcbfdb4a', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n(cherry picked from commit 24950b3894039d8f42ebaa6a6696d6a2e3d91b95)\n'}]",0,803273,f60c51d12b9d9ed22bcd120804b2939fdcbfdb4a,9,3,1,30491,,,0,"Fix incorrect config of linuxbridge multiple external networks

multiple external networks are supported by linuxbridge and OVS.
Currently the config template only works for OVS

Closes-Bug: #1863935
Change-Id: I9da331e007c25c4a760839c566831769a68507a9
(cherry picked from commit 24950b3894039d8f42ebaa6a6696d6a2e3d91b95)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/73/803273/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/linux-bridge-multi-fe8576616fb7d373.yaml', 'ansible/roles/neutron/templates/ml2_conf.ini.j2', 'ansible/roles/neutron/templates/linuxbridge_agent.ini.j2']",3,f60c51d12b9d9ed22bcd120804b2939fdcbfdb4a,bug/1863935-stable/wallaby,"{% if inventory_hostname in groups[""network""] or (inventory_hostname in groups[""compute""] and computes_need_external_bridge | bool ) %} physical_interface_mappings = {% for interface in neutron_external_interface.split(',') %}physnet{{ loop.index0 + 1 }}:{{ interface }}{% if not loop.last %},{% endif %}{% endfor %} {% endif %}",physical_interface_mappings = physnet1:{{ neutron_external_interface }},10,2
openstack%2Fkolla-ansible~master~Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323,openstack/kolla-ansible,master,Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323,Trivial fix horizon's healthcheck when SSL turned on,MERGED,2021-06-28 14:48:03.000000000,2021-08-03 11:09:33.000000000,2021-08-03 11:07:43.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-06-28 14:48:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/658899ba0dc0d14604a15b85bc4a08aa8a004dc0', 'message': ""Fix horizon's healthcheck when SSL turned on\n\nThis patch changing horizon's apache template\nand setting https:// schema only if http request\n*is not* sent directly to backend. So every direct\nrequest to haproxy backend will use http:// schema\nand healthcheck start to work also when SSL is turned on.\n\nCloses-Bug: #1933846\nChange-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323\n""}, {'number': 2, 'created': '2021-07-09 09:51:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/d3e3255a0f104ca486ca7843c368d0c1f40ae373', 'message': ""Fix horizon's healthcheck when SSL turned on\n\nThis patch is changing horizon's apache template\nin below ways:\n\n  1. When internal TLS is turned on, nothing is changed\n     and every request will have https:// schema.\n  2. When internal TLS is turned off, Header edit is\n     conditioned and will change schema to https://\n     if HTTP_HOST != api_interface_address, what\n     means that every request sent from haproxy\n     directly to controller IP will have http://\n     and healthcheck will work.\n\nCloses-Bug: #1933846\nChange-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323\n""}, {'number': 3, 'created': '2021-08-02 17:58:39.000000000', 'files': ['ansible/roles/horizon/templates/horizon.conf.j2', 'releasenotes/notes/bug-1933846-122a62e9724b638c.yaml', 'ansible/group_vars/all.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6ac4638cfb83ee4a28b316fc646db9a594d5cc1d', 'message': ""Trivial fix horizon's healthcheck when SSL turned on\n\nThis patch is fixing docker healthcheck for horizon\nby changing value of horizon_listen_port, so\nboth apache's virtualhost and healthcheck will have\nsame correct port always. Also removing useless\napache's redirect as all redirects are done on\nhaproxy side.\n\nCloses-Bug: #1933846\nChange-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323\n""}]",1,798339,6ac4638cfb83ee4a28b316fc646db9a594d5cc1d,17,4,3,27339,,,0,"Trivial fix horizon's healthcheck when SSL turned on

This patch is fixing docker healthcheck for horizon
by changing value of horizon_listen_port, so
both apache's virtualhost and healthcheck will have
same correct port always. Also removing useless
apache's redirect as all redirects are done on
haproxy side.

Closes-Bug: #1933846
Change-Id: Ibb5ad1a5d1bbc74bcb62610d77852d8124c4a323
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/39/798339/3 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/horizon/templates/horizon.conf.j2'],1,658899ba0dc0d14604a15b85bc4a08aa8a004dc0,bug/1933846,"Header edit Location ^http://(.*)$ https://$1 ""expr=%{HTTP_HOST} != '{{ api_interface_address | put_address_in_context('url') }}'""",Header edit Location ^http://(.*)$ https://$1,1,1
openstack%2Ftrove~stable%2Fwallaby~I05a07402388d214dc95071be709191f63af49411,openstack/trove,stable/wallaby,I05a07402388d214dc95071be709191f63af49411,Run reset master when setting up mysql replicas,MERGED,2021-08-03 04:17:46.000000000,2021-08-03 10:55:35.000000000,2021-08-03 10:54:08.000000000,"[{'_account_id': 6732}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-03 04:17:46.000000000', 'files': ['trove/guestagent/datastore/mysql_common/service.py', 'trove/guestagent/strategies/replication/mysql_gtid.py', 'trove/guestagent/utils/mysql.py'], 'web_link': 'https://opendev.org/openstack/trove/commit/f90594889cca3c670370b4def27a7f67d65daf83', 'message': ""Run reset master when setting up mysql replicas\n\n* Only run 'FLUSH PRIVILEGES;' when needed\n* Fix SqlClient contextmanager initialization\n\nStory: 2009091\nTask: 42921\n\nChange-Id: I05a07402388d214dc95071be709191f63af49411\n(cherry picked from commit a12b2be7060f6a98d5ff52a0823b40f012a31449)\n""}]",0,803271,f90594889cca3c670370b4def27a7f67d65daf83,7,2,1,6732,,,0,"Run reset master when setting up mysql replicas

* Only run 'FLUSH PRIVILEGES;' when needed
* Fix SqlClient contextmanager initialization

Story: 2009091
Task: 42921

Change-Id: I05a07402388d214dc95071be709191f63af49411
(cherry picked from commit a12b2be7060f6a98d5ff52a0823b40f012a31449)
",git fetch https://review.opendev.org/openstack/trove refs/changes/71/803271/1 && git format-patch -1 --stdout FETCH_HEAD,"['trove/guestagent/datastore/mysql_common/service.py', 'trove/guestagent/strategies/replication/mysql_gtid.py', 'trove/guestagent/utils/mysql.py']",3,f90594889cca3c670370b4def27a7f67d65daf83,reset-master-for-replica-stable/wallaby," def __init__(self, engine, use_flush=False): return self except Exception as err: LOG.error(f'Failed to execute SQL {t}, error: {err}') raise err"," def __init__(self, engine, use_flush=True): return self.conn except Exception: raise",43,23
openstack%2Fbifrost~master~Ie03dedd62ba2f4d9d897453b58052b7aea596a32,openstack/bifrost,master,Ie03dedd62ba2f4d9d897453b58052b7aea596a32,DNM test the upgrade job,ABANDONED,2021-07-13 15:42:32.000000000,2021-08-03 10:53:29.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-13 15:42:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/ea75faf6bf74bd39a3ec2cc81a8601688dc0b7bb', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 2, 'created': '2021-07-19 13:16:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/9ed548989f16017bfad5842b5157418d9dfc0a86', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 3, 'created': '2021-07-19 17:04:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/78419bb9b196370eb0d5534ceb70dd7c362cfc9f', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 4, 'created': '2021-07-22 12:44:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/0b6452e29e772e8d766b8308a44fc518efc563b1', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 5, 'created': '2021-07-28 16:00:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/088967228d508e5bf3917bd22a98ed4ce32b8851', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 6, 'created': '2021-07-30 11:38:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/149e801a95eac27eda24c0a0fdcb4d034296b991', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 7, 'created': '2021-07-30 13:05:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/4ae4980841f4f01a1f40f073ebca881591862827', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 8, 'created': '2021-07-30 18:38:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/863a835c9bbf42c070e5b4e0efc698526500d5df', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 9, 'created': '2021-08-02 11:45:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/3cd66380564e1c0e1e870b215d932867851f7b57', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 10, 'created': '2021-08-02 11:46:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/16a1f816ad507d9004b2cd08f842b88bc385a91c', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 11, 'created': '2021-08-02 14:48:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/13ab64d839b830cf412afb7306d8e15b1a58b678', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 12, 'created': '2021-08-02 16:19:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/01d361b619293f4a8fb4cfd16f336c311c3e2e56', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 13, 'created': '2021-08-02 16:54:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/e9060b1d1ed5a47391c9b5a6e344d3d62d823d01', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 14, 'created': '2021-08-02 16:58:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/2b228484755d2401676c80951662a6d866715838', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}, {'number': 15, 'created': '2021-08-03 08:14:45.000000000', 'files': ['playbooks/roles/bifrost-ironic-install/templates/ironic.conf.j2', 'scripts/collect-test-info.sh', 'zuul.d/project.yaml', 'zuul.d/bifrost-jobs.yaml', 'playbooks/ci/upgrade.yaml'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/edcabaf48989d54b3382c95f0c581c547f0acd46', 'message': 'DNM test the upgrade job\n\nChange-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32\n'}]",0,800673,edcabaf48989d54b3382c95f0c581c547f0acd46,28,1,15,10239,,,0,"DNM test the upgrade job

Change-Id: Ie03dedd62ba2f4d9d897453b58052b7aea596a32
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/73/800673/10 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'playbooks/ci/upgrade.yaml']",2,ea75faf6bf74bd39a3ec2cc81a8601688dc0b7bb,test, - command: rm -rf /opt/stack/bifrost/lib/python3.8/site-packages/ironic/,,46,45
openstack%2Fironic~stable%2Fussuri~I6e51bb956890a01535c62f8a378756e65d438ac3,openstack/ironic,stable/ussuri,I6e51bb956890a01535c62f8a378756e65d438ac3,Refactor RedfishVirtualMediaBoot,MERGED,2021-07-22 15:35:25.000000000,2021-08-03 10:53:24.000000000,2021-08-03 10:51:06.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-22 15:35:25.000000000', 'files': ['ironic/tests/unit/drivers/modules/redfish/test_boot.py', 'ironic/drivers/modules/redfish/boot.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/f6a77cc14996c05329fbfb25d6b995ac0009f9b5', 'message': ""Refactor RedfishVirtualMediaBoot\n\n- Move staticmethods and classmethods to functions, since\nin py36 we have a bug when ussing unittest.mock [1]\nThe only classmethod we are keeping is `_set_boot_device`\nsince it's used by `DracRedfishVirtualMediaBoot`\n\n[1] https://bugs.python.org/issue23078\n\nChange-Id: I6e51bb956890a01535c62f8a378756e65d438ac3\n(cherry picked from commit 2ffbfb4b4627f05954ce453436982fca1448af9a)\n""}]",0,801870,f6a77cc14996c05329fbfb25d6b995ac0009f9b5,17,3,1,11655,,,0,"Refactor RedfishVirtualMediaBoot

- Move staticmethods and classmethods to functions, since
in py36 we have a bug when ussing unittest.mock [1]
The only classmethod we are keeping is `_set_boot_device`
since it's used by `DracRedfishVirtualMediaBoot`

[1] https://bugs.python.org/issue23078

Change-Id: I6e51bb956890a01535c62f8a378756e65d438ac3
(cherry picked from commit 2ffbfb4b4627f05954ce453436982fca1448af9a)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/70/801870/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/tests/unit/drivers/modules/redfish/test_boot.py', 'ironic/drivers/modules/redfish/boot.py']",2,f6a77cc14996c05329fbfb25d6b995ac0009f9b5,,"IMAGE_SUBDIR = 'redfish' def _parse_driver_info(node): """"""Gets the driver specific Node deployment info. This method validates whether the 'driver_info' property of the supplied node contains the required or optional information properly for this driver to deploy images to the node. :param node: a target node of the deployment :returns: the driver_info values of the node. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. """""" d_info = node.driver_info mode = deploy_utils.rescue_or_deploy_mode(node) params_to_check = KERNEL_RAMDISK_LABELS[mode] deploy_info = {option: d_info.get(option) for option in params_to_check} if not any(deploy_info.values()): # NOTE(dtantsur): avoid situation when e.g. deploy_kernel comes # from driver_info but deploy_ramdisk comes from configuration, # since it's a sign of a potential operator's mistake. deploy_info = {k: getattr(CONF.conductor, k) for k in params_to_check} error_msg = _(""Error validating Redfish virtual media. Some "" ""parameters were missing in node's driver_info"") deploy_utils.check_for_missing_params(deploy_info, error_msg) deploy_info.update( {option: d_info.get(option, getattr(CONF.conductor, option, None)) for option in OPTIONAL_PROPERTIES}) deploy_info.update(redfish_utils.parse_driver_info(node)) return deploy_info def _parse_instance_info(node): """"""Gets the instance specific Node deployment info. This method validates whether the 'instance_info' property of the supplied node contains the required or optional information properly for this driver to deploy images to the node. :param node: a target node of the deployment :returns: the instance_info values of the node. :raises: InvalidParameterValue, if any of the parameters have invalid value. """""" deploy_info = node.instance_info.copy() # NOTE(etingof): this method is currently no-op, here for completeness return deploy_info def _append_filename_param(url, filename): """"""Append 'filename=<file>' parameter to given URL. Some BMCs seem to validate boot image URL requiring the URL to end with something resembling ISO image file name. This function tries to add, hopefully, meaningless 'filename' parameter to URL's query string in hope to make the entire boot image URL looking more convincing to the BMC. However, `url` with fragments might not get cured by this hack. :param url: a URL to work on :param filename: name of the file to append to the URL :returns: original URL with 'filename' parameter appended """""" parsed_url = urlparse.urlparse(url) parsed_qs = urlparse.parse_qsl(parsed_url.query) has_filename = [x for x in parsed_qs if x[0].lower() == 'filename'] if has_filename: return url parsed_qs.append(('filename', filename)) parsed_url = list(parsed_url) parsed_url[4] = urlparse.urlencode(parsed_qs) return urlparse.urlunparse(parsed_url) def _get_floppy_image_name(node): """"""Returns the floppy image name for a given node. :param node: the node for which image name is to be provided. """""" return ""image-%s"" % node.uuid def _get_iso_image_name(node): """"""Returns the boot iso image name for a given node. :param node: the node for which image name is to be provided. """""" return ""boot-%s"" % node.uuid def _insert_vmedia(task, boot_url, boot_device): """"""Insert bootable ISO image into virtual CD or DVD :param task: A task from TaskManager. :param boot_url: URL to a bootable ISO image :param boot_device: sushy boot device e.g. `VIRTUAL_MEDIA_CD`, `VIRTUAL_MEDIA_DVD` or `VIRTUAL_MEDIA_FLOPPY` :raises: InvalidParameterValue, if no suitable virtual CD or DVD is found on the node. """""" system = redfish_utils.get_system(task.node) for manager in system.managers: for v_media in manager.virtual_media.get_members(): if boot_device not in v_media.media_types: continue if v_media.inserted: if v_media.image == boot_url: LOG.debug(""Boot media %(boot_url)s is already "" ""inserted into %(boot_device)s for node "" ""%(node)s"", {'node': task.node.uuid, 'boot_url': boot_url, 'boot_device': boot_device}) return continue v_media.insert_media(boot_url, inserted=True, write_protected=True) LOG.info(""Inserted boot media %(boot_url)s into "" ""%(boot_device)s for node "" ""%(node)s"", {'node': task.node.uuid, 'boot_url': boot_url, 'boot_device': boot_device}) return raise exception.InvalidParameterValue( _('No suitable virtual media device found')) def _eject_vmedia(task, boot_device=None): """"""Eject virtual CDs and DVDs :param task: A task from TaskManager. :param boot_device: sushy boot device e.g. `VIRTUAL_MEDIA_CD`, `VIRTUAL_MEDIA_DVD` or `VIRTUAL_MEDIA_FLOPPY` or `None` to eject everything (default). :raises: InvalidParameterValue, if no suitable virtual CD or DVD is found on the node. """""" system = redfish_utils.get_system(task.node) for manager in system.managers: for v_media in manager.virtual_media.get_members(): if boot_device and boot_device not in v_media.media_types: continue inserted = v_media.inserted if inserted: v_media.eject_media() LOG.info(""Boot media is%(already)s ejected from "" ""%(boot_device)s for node %(node)s"" """", {'node': task.node.uuid, 'already': '' if inserted else ' already', 'boot_device': v_media.name}) def _has_vmedia_device(task, boot_device): """"""Indicate if device exists at any of the managers :param task: A task from TaskManager. :param boot_device: sushy boot device e.g. `VIRTUAL_MEDIA_CD`, `VIRTUAL_MEDIA_DVD` or `VIRTUAL_MEDIA_FLOPPY`. """""" system = redfish_utils.get_system(task.node) for manager in system.managers: for v_media in manager.virtual_media.get_members(): if boot_device in v_media.media_types: return True def _cleanup_iso_image(task): """"""Deletes the ISO if it was created for the instance. :param task: A task from TaskManager. """""" iso_object_name = _get_iso_image_name(task.node) _unpublish_image(iso_object_name) def _unpublish_image(object_name): """"""Withdraw the image previously made downloadable. Depending on ironic settings, removes previously published file from where it has been published - Swift or local HTTP server's document root. :param object_name: name of the published file (optional) """""" if CONF.redfish.use_swift: container = CONF.redfish.swift_container swift_api = swift.SwiftAPI() LOG.debug(""Cleaning up image %(name)s from Swift container "" ""%(container)s"", {'name': object_name, 'container': container}) try: swift_api.delete_object(container, object_name) except exception.SwiftOperationError as exc: LOG.warning(""Failed to clean up image %(image)s. Error: "" ""%(error)s."", {'image': object_name, 'error': exc}) else: published_file = os.path.join( CONF.deploy.http_root, IMAGE_SUBDIR, object_name) ironic_utils.unlink_without_raise(published_file) def _prepare_floppy_image(task, params=None): """"""Prepares the floppy image for passing the parameters. This method prepares a temporary VFAT filesystem image and adds a file into the image which contains parameters to be passed to the ramdisk. Then this method uploads built image to Swift '[redfish]swift_container', setting it to auto expire after '[redfish]swift_object_expiry_timeout' seconds. Finally, a temporary Swift URL is returned addressing Swift object just created. :param task: a TaskManager instance containing the node to act on. :param params: a dictionary containing 'parameter name'->'value' mapping to be passed to deploy or rescue image via floppy image. :raises: ImageCreationFailed, if it failed while creating the floppy image. :raises: SwiftOperationError, if any operation with Swift fails. :returns: image URL for the floppy image. """""" object_name = _get_floppy_image_name(task.node) LOG.debug(""Trying to create floppy image for node "" ""%(node)s"", {'node': task.node.uuid}) with tempfile.NamedTemporaryFile( dir=CONF.tempdir, suffix='.img') as vfat_image_tmpfile_obj: vfat_image_tmpfile = vfat_image_tmpfile_obj.name images.create_vfat_image(vfat_image_tmpfile, parameters=params) image_url = _publish_image(vfat_image_tmpfile, object_name) LOG.debug(""Created floppy image %(name)s in Swift for node %(node)s, "" ""exposed as temporary URL "" ""%(url)s"", {'node': task.node.uuid, 'name': object_name, 'url': image_url}) return image_url def _publish_image(image_file, object_name): """"""Make image file downloadable. Depending on ironic settings, pushes given file into Swift or copies it over to local HTTP server's document root and returns publicly accessible URL leading to the given file. :param image_file: path to file to publish :param object_name: name of the published file :return: a URL to download published file """""" if CONF.redfish.use_swift: container = CONF.redfish.swift_container timeout = CONF.redfish.swift_object_expiry_timeout object_headers = {'X-Delete-After': str(timeout)} swift_api = swift.SwiftAPI() swift_api.create_object(container, object_name, image_file, object_headers=object_headers) image_url = swift_api.get_temp_url(container, object_name, timeout) else: public_dir = os.path.join(CONF.deploy.http_root, IMAGE_SUBDIR) if not os.path.exists(public_dir): os.mkdir(public_dir, 0x755) published_file = os.path.join(public_dir, object_name) try: os.link(image_file, published_file) except OSError as exc: LOG.debug( ""Could not hardlink image file %(image)s to public "" ""location %(public)s (will copy it over): "" ""%(error)s"", {'image': image_file, 'public': published_file, 'error': exc}) shutil.copyfile(image_file, published_file) image_url = os.path.join( CONF.deploy.http_url, IMAGE_SUBDIR, object_name) image_url = _append_filename_param( image_url, os.path.basename(image_file)) return image_url def _cleanup_floppy_image(task): """"""Deletes the floppy image if it was created for the node. :param task: an ironic node object. """""" floppy_object_name = _get_floppy_image_name(task.node) _unpublish_image(floppy_object_name) def _parse_deploy_info(node): """"""Gets the instance and driver specific Node deployment info. This method validates whether the 'instance_info' and 'driver_info' property of the supplied node contains the required information for this driver to deploy images to the node. :param node: a target node of the deployment :returns: a dict with the instance_info and driver_info values. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. """""" deploy_info = {} deploy_info.update(deploy_utils.get_image_instance_info(node)) deploy_info.update(_parse_driver_info(node)) deploy_info.update(_parse_instance_info(node)) return deploy_info def _prepare_iso_image(task, kernel_href, ramdisk_href, bootloader_href=None, configdrive=None, root_uuid=None, params=None): """"""Prepare an ISO to boot the node. Build bootable ISO out of `kernel_href` and `ramdisk_href` (and `bootloader` if it's UEFI boot), then push built image up to Swift and return a temporary URL. :param task: a TaskManager instance containing the node to act on. :param kernel_href: URL or Glance UUID of the kernel to use :param ramdisk_href: URL or Glance UUID of the ramdisk to use :param bootloader_href: URL or Glance UUID of the EFI bootloader image to use when creating UEFI bootbable ISO :param configdrive: URL to or a compressed blob of a ISO9660 or FAT-formatted OpenStack config drive image. This image will be written onto the built ISO image. Optional. :param root_uuid: optional uuid of the root partition. :param params: a dictionary containing 'parameter name'->'value' mapping to be passed to kernel command line. :returns: bootable ISO HTTP URL. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. :raises: ImageCreationFailed, if creating ISO image failed. """""" if not kernel_href or not ramdisk_href: raise exception.InvalidParameterValue(_( ""Unable to find kernel or ramdisk for "" ""building ISO for %(node)s"") % {'node': task.node.uuid}) i_info = task.node.instance_info if deploy_utils.get_boot_option(task.node) == ""ramdisk"": kernel_params = ""root=/dev/ram0 text "" kernel_params += i_info.get(""ramdisk_kernel_arguments"", """") else: kernel_params = i_info.get( 'kernel_append_params', CONF.redfish.kernel_append_params) if params: kernel_params = ' '.join( (kernel_params, ' '.join( '%s=%s' % kv for kv in params.items()))) boot_mode = boot_mode_utils.get_boot_mode_for_deploy(task.node) LOG.debug(""Trying to create %(boot_mode)s ISO image for node %(node)s "" ""with kernel %(kernel_href)s, ramdisk %(ramdisk_href)s, "" ""bootloader %(bootloader_href)s and kernel params %(params)s"" """", {'node': task.node.uuid, 'boot_mode': boot_mode, 'kernel_href': kernel_href, 'ramdisk_href': ramdisk_href, 'bootloader_href': bootloader_href, 'params': kernel_params}) with tempfile.NamedTemporaryFile( dir=CONF.tempdir, suffix='.iso') as boot_fileobj: with tempfile.NamedTemporaryFile( dir=CONF.tempdir, suffix='.img') as cfgdrv_fileobj: configdrive_href = configdrive if configdrive: parsed_url = urlparse.urlparse(configdrive) if not parsed_url.scheme: cfgdrv_blob = base64.decode_as_bytes(configdrive) with open(cfgdrv_fileobj.name, 'wb') as f: f.write(cfgdrv_blob) configdrive_href = urlparse.urlunparse( ('file', '', cfgdrv_fileobj.name, '', '', '')) LOG.info(""Burning configdrive %(url)s to boot ISO image "" ""for node %(node)s"", {'url': configdrive_href, 'node': task.node.uuid}) boot_iso_tmp_file = boot_fileobj.name images.create_boot_iso( task.context, boot_iso_tmp_file, kernel_href, ramdisk_href, esp_image_href=bootloader_href, configdrive_href=configdrive_href, root_uuid=root_uuid, kernel_params=kernel_params, boot_mode=boot_mode) iso_object_name = _get_iso_image_name(task.node) image_url = _publish_image( boot_iso_tmp_file, iso_object_name) LOG.debug(""Created ISO %(name)s in object store for node %(node)s, "" ""exposed as temporary URL "" ""%(url)s"", {'node': task.node.uuid, 'name': iso_object_name, 'url': image_url}) return image_url def _prepare_deploy_iso(task, params, mode): """"""Prepare deploy or rescue ISO image Build bootable ISO out of `[driver_info]/deploy_kernel`/`[driver_info]/deploy_ramdisk` or `[driver_info]/rescue_kernel`/`[driver_info]/rescue_ramdisk` and `[driver_info]/bootloader`, then push built image up to Glance and return temporary Swift URL to the image. :param task: a TaskManager instance containing the node to act on. :param params: a dictionary containing 'parameter name'->'value' mapping to be passed to kernel command line. :param mode: either 'deploy' or 'rescue'. :returns: bootable ISO HTTP URL. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. :raises: ImageCreationFailed, if creating ISO image failed. """""" node = task.node d_info = _parse_driver_info(node) kernel_href = d_info.get('%s_kernel' % mode) ramdisk_href = d_info.get('%s_ramdisk' % mode) bootloader_href = d_info.get('bootloader') return _prepare_iso_image( task, kernel_href, ramdisk_href, bootloader_href, params=params) def _prepare_boot_iso(task, root_uuid=None): """"""Prepare boot ISO image Build bootable ISO out of `[instance_info]/kernel`, `[instance_info]/ramdisk` and `[driver_info]/bootloader` if present. Otherwise, read `kernel_id` and `ramdisk_id` from `[instance_info]/image_source` Glance image metadata. Push produced ISO image up to Glance and return temporary Swift URL to the image. :param task: a TaskManager instance containing the node to act on. :returns: bootable ISO HTTP URL. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. :raises: ImageCreationFailed, if creating ISO image failed. """""" node = task.node d_info = _parse_deploy_info(node) kernel_href = node.instance_info.get('kernel') ramdisk_href = node.instance_info.get('ramdisk') if not kernel_href or not ramdisk_href: image_href = d_info['image_source'] image_properties = ( images.get_image_properties( task.context, image_href, ['kernel_id', 'ramdisk_id'])) if not kernel_href: kernel_href = image_properties.get('kernel_id') if not ramdisk_href: ramdisk_href = image_properties.get('ramdisk_id') if not kernel_href or not ramdisk_href: raise exception.InvalidParameterValue(_( ""Unable to find kernel or ramdisk for "" ""to generate boot ISO for %(node)s"") % {'node': task.node.uuid}) bootloader_href = d_info.get('bootloader') return _prepare_iso_image( task, kernel_href, ramdisk_href, bootloader_href, root_uuid=root_uuid) def _validate_driver_info(self, task): _parse_driver_info(node) def _validate_instance_info(self, task): d_info = _parse_deploy_info(node) d_info = _parse_driver_info(node) if _has_vmedia_device(task, sushy.VIRTUAL_MEDIA_FLOPPY): floppy_ref = _prepare_floppy_image( _eject_vmedia(task, sushy.VIRTUAL_MEDIA_FLOPPY) _insert_vmedia( iso_ref = _prepare_deploy_iso(task, ramdisk_params, mode) _eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) _insert_vmedia(task, iso_ref, sushy.VIRTUAL_MEDIA_CD) d_info = _parse_driver_info(task.node) _eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) _cleanup_iso_image(task) and _has_vmedia_device(task, sushy.VIRTUAL_MEDIA_FLOPPY)): _eject_vmedia(task, sushy.VIRTUAL_MEDIA_FLOPPY) _cleanup_floppy_image(task) self._set_boot_device(task, boot_devices.DISK, persistent=True) self._set_boot_device(task, boot_devices.DISK, persistent=True) iso_ref = _prepare_boot_iso(task, **params) _eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) _insert_vmedia(task, iso_ref, sushy.VIRTUAL_MEDIA_CD) self._set_boot_device(task, boot_devices.CDROM, persistent=True) _eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) _eject_vmedia(task, sushy.VIRTUAL_MEDIA_FLOPPY) _cleanup_iso_image(task)"," IMAGE_SUBDIR = 'redfish' @staticmethod def _parse_driver_info(node): """"""Gets the driver specific Node deployment info. This method validates whether the 'driver_info' property of the supplied node contains the required or optional information properly for this driver to deploy images to the node. :param node: a target node of the deployment :returns: the driver_info values of the node. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. """""" d_info = node.driver_info mode = deploy_utils.rescue_or_deploy_mode(node) params_to_check = KERNEL_RAMDISK_LABELS[mode] deploy_info = {option: d_info.get(option) for option in params_to_check} if not any(deploy_info.values()): # NOTE(dtantsur): avoid situation when e.g. deploy_kernel comes # from driver_info but deploy_ramdisk comes from configuration, # since it's a sign of a potential operator's mistake. deploy_info = {k: getattr(CONF.conductor, k) for k in params_to_check} error_msg = _(""Error validating Redfish virtual media. Some "" ""parameters were missing in node's driver_info"") deploy_utils.check_for_missing_params(deploy_info, error_msg) deploy_info.update( {option: d_info.get(option, getattr(CONF.conductor, option, None)) for option in OPTIONAL_PROPERTIES}) deploy_info.update(redfish_utils.parse_driver_info(node)) return deploy_info @staticmethod def _parse_instance_info(node): """"""Gets the instance specific Node deployment info. This method validates whether the 'instance_info' property of the supplied node contains the required or optional information properly for this driver to deploy images to the node. :param node: a target node of the deployment :returns: the instance_info values of the node. :raises: InvalidParameterValue, if any of the parameters have invalid value. """""" deploy_info = node.instance_info.copy() # NOTE(etingof): this method is currently no-op, here for completeness return deploy_info @classmethod def _parse_deploy_info(cls, node): """"""Gets the instance and driver specific Node deployment info. This method validates whether the 'instance_info' and 'driver_info' property of the supplied node contains the required information for this driver to deploy images to the node. :param node: a target node of the deployment :returns: a dict with the instance_info and driver_info values. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. """""" deploy_info = {} deploy_info.update(deploy_utils.get_image_instance_info(node)) deploy_info.update(cls._parse_driver_info(node)) deploy_info.update(cls._parse_instance_info(node)) return deploy_info @staticmethod def _append_filename_param(url, filename): """"""Append 'filename=<file>' parameter to given URL. Some BMCs seem to validate boot image URL requiring the URL to end with something resembling ISO image file name. This function tries to add, hopefully, meaningless 'filename' parameter to URL's query string in hope to make the entire boot image URL looking more convincing to the BMC. However, `url` with fragments might not get cured by this hack. :param url: a URL to work on :param filename: name of the file to append to the URL :returns: original URL with 'filename' parameter appended """""" parsed_url = urlparse.urlparse(url) parsed_qs = urlparse.parse_qsl(parsed_url.query) has_filename = [x for x in parsed_qs if x[0].lower() == 'filename'] if has_filename: return url parsed_qs.append(('filename', filename)) parsed_url = list(parsed_url) parsed_url[4] = urlparse.urlencode(parsed_qs) return urlparse.urlunparse(parsed_url) @classmethod def _publish_image(cls, image_file, object_name): """"""Make image file downloadable. Depending on ironic settings, pushes given file into Swift or copies it over to local HTTP server's document root and returns publicly accessible URL leading to the given file. :param image_file: path to file to publish :param object_name: name of the published file :return: a URL to download published file """""" if CONF.redfish.use_swift: container = CONF.redfish.swift_container timeout = CONF.redfish.swift_object_expiry_timeout object_headers = {'X-Delete-After': str(timeout)} swift_api = swift.SwiftAPI() swift_api.create_object(container, object_name, image_file, object_headers=object_headers) image_url = swift_api.get_temp_url(container, object_name, timeout) else: public_dir = os.path.join(CONF.deploy.http_root, cls.IMAGE_SUBDIR) if not os.path.exists(public_dir): os.mkdir(public_dir, 0x755) published_file = os.path.join(public_dir, object_name) try: os.link(image_file, published_file) except OSError as exc: LOG.debug( ""Could not hardlink image file %(image)s to public "" ""location %(public)s (will copy it over): "" ""%(error)s"", {'image': image_file, 'public': published_file, 'error': exc}) shutil.copyfile(image_file, published_file) image_url = os.path.join( CONF.deploy.http_url, cls.IMAGE_SUBDIR, object_name) image_url = cls._append_filename_param( image_url, os.path.basename(image_file)) return image_url @classmethod def _unpublish_image(cls, object_name): """"""Withdraw the image previously made downloadable. Depending on ironic settings, removes previously published file from where it has been published - Swift or local HTTP server's document root. :param object_name: name of the published file (optional) """""" if CONF.redfish.use_swift: container = CONF.redfish.swift_container swift_api = swift.SwiftAPI() LOG.debug(""Cleaning up image %(name)s from Swift container "" ""%(container)s"", {'name': object_name, 'container': container}) try: swift_api.delete_object(container, object_name) except exception.SwiftOperationError as exc: LOG.warning(""Failed to clean up image %(image)s. Error: "" ""%(error)s."", {'image': object_name, 'error': exc}) else: published_file = os.path.join( CONF.deploy.http_root, cls.IMAGE_SUBDIR, object_name) ironic_utils.unlink_without_raise(published_file) @staticmethod def _get_floppy_image_name(node): """"""Returns the floppy image name for a given node. :param node: the node for which image name is to be provided. """""" return ""image-%s"" % node.uuid @classmethod def _cleanup_floppy_image(cls, task): """"""Deletes the floppy image if it was created for the node. :param task: an ironic node object. """""" floppy_object_name = cls._get_floppy_image_name(task.node) cls._unpublish_image(floppy_object_name) @classmethod def _prepare_floppy_image(cls, task, params=None): """"""Prepares the floppy image for passing the parameters. This method prepares a temporary VFAT filesystem image and adds a file into the image which contains parameters to be passed to the ramdisk. Then this method uploads built image to Swift '[redfish]swift_container', setting it to auto expire after '[redfish]swift_object_expiry_timeout' seconds. Finally, a temporary Swift URL is returned addressing Swift object just created. :param task: a TaskManager instance containing the node to act on. :param params: a dictionary containing 'parameter name'->'value' mapping to be passed to deploy or rescue image via floppy image. :raises: ImageCreationFailed, if it failed while creating the floppy image. :raises: SwiftOperationError, if any operation with Swift fails. :returns: image URL for the floppy image. """""" object_name = cls._get_floppy_image_name(task.node) LOG.debug(""Trying to create floppy image for node "" ""%(node)s"", {'node': task.node.uuid}) with tempfile.NamedTemporaryFile( dir=CONF.tempdir, suffix='.img') as vfat_image_tmpfile_obj: vfat_image_tmpfile = vfat_image_tmpfile_obj.name images.create_vfat_image(vfat_image_tmpfile, parameters=params) image_url = cls._publish_image(vfat_image_tmpfile, object_name) LOG.debug(""Created floppy image %(name)s in Swift for node %(node)s, "" ""exposed as temporary URL "" ""%(url)s"", {'node': task.node.uuid, 'name': object_name, 'url': image_url}) return image_url @staticmethod def _get_iso_image_name(node): """"""Returns the boot iso image name for a given node. :param node: the node for which image name is to be provided. """""" return ""boot-%s"" % node.uuid @classmethod def _cleanup_iso_image(cls, task): """"""Deletes the ISO if it was created for the instance. :param task: an ironic node object. """""" iso_object_name = cls._get_iso_image_name(task.node) cls._unpublish_image(iso_object_name) @classmethod def _prepare_iso_image(cls, task, kernel_href, ramdisk_href, bootloader_href=None, configdrive=None, root_uuid=None, params=None): """"""Prepare an ISO to boot the node. Build bootable ISO out of `kernel_href` and `ramdisk_href` (and `bootloader` if it's UEFI boot), then push built image up to Swift and return a temporary URL. :param task: a TaskManager instance containing the node to act on. :param kernel_href: URL or Glance UUID of the kernel to use :param ramdisk_href: URL or Glance UUID of the ramdisk to use :param bootloader_href: URL or Glance UUID of the EFI bootloader image to use when creating UEFI bootbable ISO :param configdrive: URL to or a compressed blob of a ISO9660 or FAT-formatted OpenStack config drive image. This image will be written onto the built ISO image. Optional. :param root_uuid: optional uuid of the root partition. :param params: a dictionary containing 'parameter name'->'value' mapping to be passed to kernel command line. :returns: bootable ISO HTTP URL. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. :raises: ImageCreationFailed, if creating ISO image failed. """""" if not kernel_href or not ramdisk_href: raise exception.InvalidParameterValue(_( ""Unable to find kernel or ramdisk for "" ""building ISO for %(node)s"") % {'node': task.node.uuid}) i_info = task.node.instance_info if deploy_utils.get_boot_option(task.node) == ""ramdisk"": kernel_params = ""root=/dev/ram0 text "" kernel_params += i_info.get(""ramdisk_kernel_arguments"", """") else: kernel_params = i_info.get( 'kernel_append_params', CONF.redfish.kernel_append_params) if params: kernel_params = ' '.join( (kernel_params, ' '.join( '%s=%s' % kv for kv in params.items()))) boot_mode = boot_mode_utils.get_boot_mode_for_deploy(task.node) LOG.debug(""Trying to create %(boot_mode)s ISO image for node %(node)s "" ""with kernel %(kernel_href)s, ramdisk %(ramdisk_href)s, "" ""bootloader %(bootloader_href)s and kernel params %(params)s"" """", {'node': task.node.uuid, 'boot_mode': boot_mode, 'kernel_href': kernel_href, 'ramdisk_href': ramdisk_href, 'bootloader_href': bootloader_href, 'params': kernel_params}) with tempfile.NamedTemporaryFile( dir=CONF.tempdir, suffix='.iso') as boot_fileobj: with tempfile.NamedTemporaryFile( dir=CONF.tempdir, suffix='.img') as cfgdrv_fileobj: configdrive_href = configdrive if configdrive: parsed_url = urlparse.urlparse(configdrive) if not parsed_url.scheme: cfgdrv_blob = base64.decode_as_bytes(configdrive) with open(cfgdrv_fileobj.name, 'wb') as f: f.write(cfgdrv_blob) configdrive_href = urlparse.urlunparse( ('file', '', cfgdrv_fileobj.name, '', '', '')) LOG.info(""Burning configdrive %(url)s to boot ISO image "" ""for node %(node)s"", {'url': configdrive_href, 'node': task.node.uuid}) boot_iso_tmp_file = boot_fileobj.name images.create_boot_iso( task.context, boot_iso_tmp_file, kernel_href, ramdisk_href, esp_image_href=bootloader_href, configdrive_href=configdrive_href, root_uuid=root_uuid, kernel_params=kernel_params, boot_mode=boot_mode) iso_object_name = cls._get_iso_image_name(task.node) image_url = cls._publish_image( boot_iso_tmp_file, iso_object_name) LOG.debug(""Created ISO %(name)s in object store for node %(node)s, "" ""exposed as temporary URL "" ""%(url)s"", {'node': task.node.uuid, 'name': iso_object_name, 'url': image_url}) return image_url @classmethod def _prepare_deploy_iso(cls, task, params, mode): """"""Prepare deploy or rescue ISO image Build bootable ISO out of `[driver_info]/deploy_kernel`/`[driver_info]/deploy_ramdisk` or `[driver_info]/rescue_kernel`/`[driver_info]/rescue_ramdisk` and `[driver_info]/bootloader`, then push built image up to Glance and return temporary Swift URL to the image. :param task: a TaskManager instance containing the node to act on. :param params: a dictionary containing 'parameter name'->'value' mapping to be passed to kernel command line. :param mode: either 'deploy' or 'rescue'. :returns: bootable ISO HTTP URL. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. :raises: ImageCreationFailed, if creating ISO image failed. """""" node = task.node d_info = cls._parse_driver_info(node) kernel_href = d_info.get('%s_kernel' % mode) ramdisk_href = d_info.get('%s_ramdisk' % mode) bootloader_href = d_info.get('bootloader') return cls._prepare_iso_image( task, kernel_href, ramdisk_href, bootloader_href, params=params) @classmethod def _prepare_boot_iso(cls, task, root_uuid=None): """"""Prepare boot ISO image Build bootable ISO out of `[instance_info]/kernel`, `[instance_info]/ramdisk` and `[driver_info]/bootloader` if present. Otherwise, read `kernel_id` and `ramdisk_id` from `[instance_info]/image_source` Glance image metadata. Push produced ISO image up to Glance and return temporary Swift URL to the image. :param task: a TaskManager instance containing the node to act on. :returns: bootable ISO HTTP URL. :raises: MissingParameterValue, if any of the required parameters are missing. :raises: InvalidParameterValue, if any of the parameters have invalid value. :raises: ImageCreationFailed, if creating ISO image failed. """""" node = task.node d_info = cls._parse_deploy_info(node) kernel_href = node.instance_info.get('kernel') ramdisk_href = node.instance_info.get('ramdisk') if not kernel_href or not ramdisk_href: image_href = d_info['image_source'] image_properties = ( images.get_image_properties( task.context, image_href, ['kernel_id', 'ramdisk_id'])) if not kernel_href: kernel_href = image_properties.get('kernel_id') if not ramdisk_href: ramdisk_href = image_properties.get('ramdisk_id') if not kernel_href or not ramdisk_href: raise exception.InvalidParameterValue(_( ""Unable to find kernel or ramdisk for "" ""to generate boot ISO for %(node)s"") % {'node': task.node.uuid}) bootloader_href = d_info.get('bootloader') return cls._prepare_iso_image( task, kernel_href, ramdisk_href, bootloader_href, root_uuid=root_uuid) @classmethod def _validate_driver_info(cls, task): cls._parse_driver_info(node) @classmethod def _validate_instance_info(cls, task): d_info = cls._parse_deploy_info(node) d_info = self._parse_driver_info(node) if self._has_vmedia_device(task, sushy.VIRTUAL_MEDIA_FLOPPY): floppy_ref = self._prepare_floppy_image( self._eject_vmedia(task, sushy.VIRTUAL_MEDIA_FLOPPY) self._insert_vmedia( iso_ref = self._prepare_deploy_iso(task, ramdisk_params, mode) self._eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) self._insert_vmedia(task, iso_ref, sushy.VIRTUAL_MEDIA_CD) node = task.node d_info = self._parse_driver_info(node) self._eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) self._cleanup_iso_image(task) and self._has_vmedia_device(task, sushy.VIRTUAL_MEDIA_FLOPPY)): self._eject_vmedia(task, sushy.VIRTUAL_MEDIA_FLOPPY) self._cleanup_floppy_image(task) self._set_boot_device( task, boot_devices.DISK, persistent=True) self._set_boot_device( task, boot_devices.DISK, persistent=True) iso_ref = self._prepare_boot_iso(task, **params) self._eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) self._insert_vmedia(task, iso_ref, sushy.VIRTUAL_MEDIA_CD) self._set_boot_device( task, boot_devices.CDROM, persistent=True) self._eject_vmedia(task, sushy.VIRTUAL_MEDIA_CD) self._eject_vmedia(task, sushy.VIRTUAL_MEDIA_FLOPPY) self._cleanup_iso_image(task) @staticmethod def _insert_vmedia(task, boot_url, boot_device): """"""Insert bootable ISO image into virtual CD or DVD :param task: A task from TaskManager. :param boot_url: URL to a bootable ISO image :param boot_device: sushy boot device e.g. `VIRTUAL_MEDIA_CD`, `VIRTUAL_MEDIA_DVD` or `VIRTUAL_MEDIA_FLOPPY` :raises: InvalidParameterValue, if no suitable virtual CD or DVD is found on the node. """""" system = redfish_utils.get_system(task.node) for manager in system.managers: for v_media in manager.virtual_media.get_members(): if boot_device not in v_media.media_types: continue if v_media.inserted: if v_media.image == boot_url: LOG.debug(""Boot media %(boot_url)s is already "" ""inserted into %(boot_device)s for node "" ""%(node)s"", {'node': task.node.uuid, 'boot_url': boot_url, 'boot_device': boot_device}) return continue v_media.insert_media(boot_url, inserted=True, write_protected=True) LOG.info(""Inserted boot media %(boot_url)s into "" ""%(boot_device)s for node "" ""%(node)s"", {'node': task.node.uuid, 'boot_url': boot_url, 'boot_device': boot_device}) return raise exception.InvalidParameterValue( _('No suitable virtual media device found')) @staticmethod def _eject_vmedia(task, boot_device=None): """"""Eject virtual CDs and DVDs :param task: A task from TaskManager. :param boot_device: sushy boot device e.g. `VIRTUAL_MEDIA_CD`, `VIRTUAL_MEDIA_DVD` or `VIRTUAL_MEDIA_FLOPPY` or `None` to eject everything (default). :raises: InvalidParameterValue, if no suitable virtual CD or DVD is found on the node. """""" system = redfish_utils.get_system(task.node) for manager in system.managers: for v_media in manager.virtual_media.get_members(): if boot_device and boot_device not in v_media.media_types: continue inserted = v_media.inserted if inserted: v_media.eject_media() LOG.info(""Boot media is%(already)s ejected from "" ""%(boot_device)s for node %(node)s"" """", {'node': task.node.uuid, 'already': '' if inserted else ' already', 'boot_device': v_media.name}) @staticmethod def _has_vmedia_device(task, boot_device): """"""Indicate if device exists at any of the managers :param task: A task from TaskManager. :param boot_device: sushy boot device e.g. `VIRTUAL_MEDIA_CD`, `VIRTUAL_MEDIA_DVD` or `VIRTUAL_MEDIA_FLOPPY`. """""" system = redfish_utils.get_system(task.node) for manager in system.managers: for v_media in manager.virtual_media.get_members(): if boot_device in v_media.media_types: return True",683,746
openstack%2Ftripleo-docs~master~I236937d04901fab91c0acd79749896dd8b018deb,openstack/tripleo-docs,master,I236937d04901fab91c0acd79749896dd8b018deb,Add cephadm debug mode section,MERGED,2021-07-23 18:11:13.000000000,2021-08-03 10:52:04.000000000,2021-08-03 10:50:32.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-23 18:11:13.000000000', 'files': ['deploy-guide/source/features/cephadm.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/9c2715ae828b8d1e04f542761b5b5bf869b02397', 'message': 'Add cephadm debug mode section\n\nThis change just adds the cephadm debug mode section: this is\nuseful both for development and troubleshooting purposes; in\naddition, this review shows how exposed tripleo-heat-templates\nparameter can be used to enable it.\n\nChange-Id: I236937d04901fab91c0acd79749896dd8b018deb\n'}]",0,802093,9c2715ae828b8d1e04f542761b5b5bf869b02397,8,4,1,25402,,,0,"Add cephadm debug mode section

This change just adds the cephadm debug mode section: this is
useful both for development and troubleshooting purposes; in
addition, this review shows how exposed tripleo-heat-templates
parameter can be used to enable it.

Change-Id: I236937d04901fab91c0acd79749896dd8b018deb
",git fetch https://review.opendev.org/openstack/tripleo-docs refs/changes/93/802093/1 && git format-patch -1 --stdout FETCH_HEAD,['deploy-guide/source/features/cephadm.rst'],1,9c2715ae828b8d1e04f542761b5b5bf869b02397,cephadm_debug_mode,"Enabling cephadm debug mode --------------------------- TripleO can deploy the Ceph cluster enabling the cephadm backend in debug mode; this is useful for troubleshooting purposes, and can be activated by using a syntax like the following:: parameter_defaults: CephAdmDebug: true After step 2, when the Ceph cluster is up and running, after SSH'ing into one of your controller nodes run:: sudo cephadm shell ceph -W cephadm --watch-debug The command above shows a more verbose cephadm execution, and it's useful to identify potential issues with the deployment of the Ceph cluster. ",,19,0
openstack%2Fpython-tripleoclient~master~I5f5cec5a1622be4983b4d0db392453d1c489fa40,openstack/python-tripleoclient,master,I5f5cec5a1622be4983b4d0db392453d1c489fa40,make net_config_override of undercloud.conf work with yaml,MERGED,2021-05-04 11:55:09.000000000,2021-08-03 10:37:32.000000000,2021-08-03 10:36:04.000000000,"[{'_account_id': 7144}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 24245}]","[{'number': 1, 'created': '2021-05-04 11:55:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/4fbbfbbe5e4786ee0b44a00f7f3016b5a8f8f36c', 'message': 'make net_config_override of undercloud.conf work with yaml\n\nOn setting net_config_override parameter, the undercloud uses\na JSON or YAML format template to configure the networking with\nos-net-config and ignores the network parameters set in\nundercloud.conf. We can this parameter when you want to configure\nbonding or add an option to the interface.\n\nThis patch will allow net_config_override to work a json or\na yaml as an input.\n\nCloses-Bug: #1927090\nChange-Id: I5f5cec5a1622be4983b4d0db392453d1c489fa40\n'}, {'number': 2, 'created': '2021-05-06 04:22:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/3dca2499626de7120c8fc05c8befee58c2198779', 'message': 'make net_config_override of undercloud.conf work with yaml\n\nOn setting net_config_override parameter, the undercloud uses\na JSON or YAML format template to configure the networking\nwith os-net-config and ignores the network parameters set in\nundercloud.conf. We can use this parameter when we want to\nconfigure bonding or add an option to the interface.\n\nThis patch will allow net_config_override to work with a json\nor a yaml as an input.\n\nCloses-Bug: #1927090\nChange-Id: I5f5cec5a1622be4983b4d0db392453d1c489fa40\n'}, {'number': 3, 'created': '2021-07-25 09:24:14.000000000', 'files': ['tripleoclient/config/standalone.py', 'tripleoclient/v1/undercloud_config.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/253bd6e7db425f2340e8b47319cd527a5210333d', 'message': 'make net_config_override of undercloud.conf work with yaml\n\nOn setting net_config_override parameter, the undercloud uses\na JSON or YAML format template to configure the networking\nwith os-net-config and ignores the network parameters set in\nundercloud.conf. We can use this parameter when we want to\nconfigure bonding or add an option to the interface.\n\nThis patch will allow net_config_override to work with a json\nor a yaml as an input.\n\nCloses-Bug: #1927090\nChange-Id: I5f5cec5a1622be4983b4d0db392453d1c489fa40\n'}]",4,789554,253bd6e7db425f2340e8b47319cd527a5210333d,16,5,3,33061,,,0,"make net_config_override of undercloud.conf work with yaml

On setting net_config_override parameter, the undercloud uses
a JSON or YAML format template to configure the networking
with os-net-config and ignores the network parameters set in
undercloud.conf. We can use this parameter when we want to
configure bonding or add an option to the interface.

This patch will allow net_config_override to work with a json
or a yaml as an input.

Closes-Bug: #1927090
Change-Id: I5f5cec5a1622be4983b4d0db392453d1c489fa40
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/54/789554/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/undercloud_config.py'],1,4fbbfbbe5e4786ee0b44a00f7f3016b5a8f8f36c,bug/1927090,"import yaml net_config_json = yaml.safe_load(net_config_str) except ValueError: net_config_json = yaml.safe_load(""{%s}"" % net_config_str)"," net_config_json = json.loads(net_config_str) except ValueError: net_config_json = json.loads(""{%s}"" % net_config_str)",3,2
openstack%2Fkolla~stable%2Fwallaby~I055086ab4af37878e81844f1055bc48d84ae9945,openstack/kolla,stable/wallaby,I055086ab4af37878e81844f1055bc48d84ae9945,Fix missing pacemaker-cli-utils in Debian hacluster images,MERGED,2021-08-02 16:45:46.000000000,2021-08-03 10:31:17.000000000,2021-08-03 10:26:57.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-08-02 16:45:46.000000000', 'files': ['docker/hacluster/hacluster-pacemaker-remote/Dockerfile.j2', 'releasenotes/notes/bug-1934788-b1fd51f443479fb6.yaml', 'docker/hacluster/hacluster-pacemaker/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/ac18704dd53e92b5ce5fb4312b46e06da155e6f8', 'message': 'Fix missing pacemaker-cli-utils in Debian hacluster images\n\nHacluster-pacemaker images need to have pacemaker cli utils\navailable in all distros and they are provided by pacemaker-cli-utils\npackage in Debuntu systems. Due to a different dependency chain\nthis package is not installed in Debian. This package is also\n*recommended* dependency of pacemaker and pacemaker-remote in both\nDebian/Ubuntu systems, but unfortunatelly it is not installed\non Debian via APT by default.\n\nThis patch adding this package to list of package to be installed\non Debian/Ubuntu systems for both hacluster-pacemaker (required)\nand hacluster-pacemaker-remote (to ease with debugging).\n\nCloses-Bug: #1934788\nChange-Id: I055086ab4af37878e81844f1055bc48d84ae9945\n(cherry picked from commit 535c861d99aa0c07ea130d1f30cabb6af3db7ab7)\n'}]",0,803189,ac18704dd53e92b5ce5fb4312b46e06da155e6f8,15,3,1,27339,,,0,"Fix missing pacemaker-cli-utils in Debian hacluster images

Hacluster-pacemaker images need to have pacemaker cli utils
available in all distros and they are provided by pacemaker-cli-utils
package in Debuntu systems. Due to a different dependency chain
this package is not installed in Debian. This package is also
*recommended* dependency of pacemaker and pacemaker-remote in both
Debian/Ubuntu systems, but unfortunatelly it is not installed
on Debian via APT by default.

This patch adding this package to list of package to be installed
on Debian/Ubuntu systems for both hacluster-pacemaker (required)
and hacluster-pacemaker-remote (to ease with debugging).

Closes-Bug: #1934788
Change-Id: I055086ab4af37878e81844f1055bc48d84ae9945
(cherry picked from commit 535c861d99aa0c07ea130d1f30cabb6af3db7ab7)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/89/803189/1 && git format-patch -1 --stdout FETCH_HEAD,"['docker/hacluster/hacluster-pacemaker-remote/Dockerfile.j2', 'releasenotes/notes/bug-1934788-b1fd51f443479fb6.yaml', 'docker/hacluster/hacluster-pacemaker/Dockerfile.j2']",3,ac18704dd53e92b5ce5fb4312b46e06da155e6f8,bug/1934788-stable/wallaby,{% if base_package_type == 'deb' %} {% set hacluster_pacemaker_packages = hacluster_pacemaker_packages + [ 'pacemaker-cli-utils' ] %} {% endif %} ,,17,0
openstack%2Fbifrost~master~Ic8ce68ea7e99bf35eb0fa9dc3d508d101a5241f9,openstack/bifrost,master,Ic8ce68ea7e99bf35eb0fa9dc3d508d101a5241f9,Trivial: fix a warning in bifrost-keystone-client-config,MERGED,2021-08-02 11:51:59.000000000,2021-08-03 10:29:15.000000000,2021-08-03 10:27:46.000000000,"[{'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-08-02 11:51:59.000000000', 'files': ['playbooks/roles/bifrost-keystone-client-config/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/f8c0e0b705cb0c86527a956d20d1a137e4096e82', 'message': 'Trivial: fix a warning in bifrost-keystone-client-config\n\nChange-Id: Ic8ce68ea7e99bf35eb0fa9dc3d508d101a5241f9\n'}]",0,803196,f8c0e0b705cb0c86527a956d20d1a137e4096e82,8,2,1,10239,,,0,"Trivial: fix a warning in bifrost-keystone-client-config

Change-Id: Ic8ce68ea7e99bf35eb0fa9dc3d508d101a5241f9
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/96/803196/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/roles/bifrost-keystone-client-config/tasks/main.yml'],1,f8c0e0b705cb0c86527a956d20d1a137e4096e82,warning, - enable_keystone | default(false) | bool - clouds is undefined - config_username is defined - config_password is defined - config_project_name is defined - config_region_name is defined - config_auth_url is defined," - ""{{ enable_keystone | default(false) | bool }}"" - ""{{ clouds is undefined }}"" - ""{{ config_username is defined }}"" - ""{{ config_password is defined }}"" - ""{{ config_project_name is defined }}"" - ""{{ config_region_name is defined }}"" - ""{{ config_auth_url is defined }}""",7,7
openstack%2Fneutron~master~Ie883044f3bedc09ff19c58ce90ab9fdc09b92e29,openstack/neutron,master,Ie883044f3bedc09ff19c58ce90ab9fdc09b92e29,Update team ownership,MERGED,2021-07-29 14:19:06.000000000,2021-08-03 10:23:35.000000000,2021-08-03 10:21:59.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-07-29 14:19:06.000000000', 'files': ['doc/source/contributor/policies/neutron-teams.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/caa05f9c561fbccaf0ab94ee39a8dc7798b212c5', 'message': 'Update team ownership\n\nAs I will not be maintaining the ovn-octavia-provider, I\nam removing my name from the list. Also, since I have\nnot been as active in L3 recently, update that as well.\n\nChange-Id: Ie883044f3bedc09ff19c58ce90ab9fdc09b92e29\n'}]",2,802895,caa05f9c561fbccaf0ab94ee39a8dc7798b212c5,10,4,1,1131,,,0,"Update team ownership

As I will not be maintaining the ovn-octavia-provider, I
am removing my name from the list. Also, since I have
not been as active in L3 recently, update that as well.

Change-Id: Ie883044f3bedc09ff19c58ce90ab9fdc09b92e29
",git fetch https://review.opendev.org/openstack/neutron refs/changes/95/802895/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/contributor/policies/neutron-teams.rst'],1,caa05f9c561fbccaf0ab94ee39a8dc7798b212c5,remove-me,| L3 | Miguel Lavalle | mlavalle || ovn-octavia-provider | None | N/A |,| L3 | Brian Haley | haleyb | | +---------------------------+----------------------+ | | Miguel Lavalle | mlavalle || ovn-octavia-provider | Brian Haley | haleyb | | +-----------------------------+-------------------+ | | Flavio Fernandes | flaviof |,2,6
openstack%2Fopenstack-ansible-tests~master~I150f3362a3790ad6db4da443f582671e6d909f4b,openstack/openstack-ansible-tests,master,I150f3362a3790ad6db4da443f582671e6d909f4b,setup.cfg: Replace dashes with underscores,MERGED,2021-05-05 09:14:46.000000000,2021-08-03 09:29:38.000000000,2021-08-03 09:28:05.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}]","[{'number': 1, 'created': '2021-05-05 09:14:46.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-tests/commit/86182ebe24419f8ba45c6675ce9d99f4461bc1ff', 'message': ""setup.cfg: Replace dashes with underscores\n\nSetuptools v54.1.0 introduces a warning that the use of dash-separated\noptions in 'setup.cfg' will not be supported in a future version [1].\nGet ahead of the issue by replacing the dashes with underscores. Without\nthis, we see 'UserWarning' messages like the following on new enough\nversions of setuptools:\n\n  UserWarning: Usage of dash-separated 'description-file' will not be\n  supported in future versions. Please use the underscore name\n  'description_file' instead\n\n[1] https://github.com/pypa/setuptools/commit/a2e9ae4cb\n\nChange-Id: I150f3362a3790ad6db4da443f582671e6d909f4b\n""}]",0,789761,86182ebe24419f8ba45c6675ce9d99f4461bc1ff,13,2,1,31825,,,0,"setup.cfg: Replace dashes with underscores

Setuptools v54.1.0 introduces a warning that the use of dash-separated
options in 'setup.cfg' will not be supported in a future version [1].
Get ahead of the issue by replacing the dashes with underscores. Without
this, we see 'UserWarning' messages like the following on new enough
versions of setuptools:

  UserWarning: Usage of dash-separated 'description-file' will not be
  supported in future versions. Please use the underscore name
  'description_file' instead

[1] https://github.com/pypa/setuptools/commit/a2e9ae4cb

Change-Id: I150f3362a3790ad6db4da443f582671e6d909f4b
",git fetch https://review.opendev.org/openstack/openstack-ansible-tests refs/changes/61/789761/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,86182ebe24419f8ba45c6675ce9d99f4461bc1ff,,description_file =author_email = openstack-discuss@lists.openstack.org home_page = https://docs.openstack.org/openstack-ansible-tests/latest/,description-file =author-email = openstack-discuss@lists.openstack.org home-page = https://docs.openstack.org/openstack-ansible-tests/latest/,3,3
openstack%2Fkolla-ansible~master~Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5,openstack/kolla-ansible,master,Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5,watcher: add missing become for copying configs,MERGED,2021-08-02 07:28:55.000000000,2021-08-03 09:25:26.000000000,2021-08-03 09:23:57.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 26285}]","[{'number': 1, 'created': '2021-08-02 07:28:55.000000000', 'files': ['ansible/roles/watcher/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/948e9ae707862c8d50c22c6c5cf69423c613a2b7', 'message': 'watcher: add missing become for copying configs\n\nSigned-off-by: Seena Fallah <seenafallah@gmail.com>\nChange-Id: Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5\n'}]",0,803143,948e9ae707862c8d50c22c6c5cf69423c613a2b7,12,3,1,33826,,,0,"watcher: add missing become for copying configs

Signed-off-by: Seena Fallah <seenafallah@gmail.com>
Change-Id: Iac1e82710df3ea82c17a6dcbf5d1821362aaa4a5
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/43/803143/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/watcher/tasks/config.yml'],1,948e9ae707862c8d50c22c6c5cf69423c613a2b7,watcher-config, become: true become: true become: true,,3,0
openstack%2Ftripleo-heat-templates~stable%2Fvictoria~I65465ea40fb6f6b1d8fecbf1c4363edafaa462d1,openstack/tripleo-heat-templates,stable/victoria,I65465ea40fb6f6b1d8fecbf1c4363edafaa462d1,[virtoria/ussuri/train] Fix is_realtime condition,ABANDONED,2021-08-03 09:16:15.000000000,2021-08-03 09:20:28.000000000,,[],"[{'number': 1, 'created': '2021-08-03 09:16:15.000000000', 'files': ['deployment/nova/nova-compute-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a264642fa096491cb84f07eee2871a5a2e2d60c4', 'message': '[virtoria/ussuri/train] Fix is_realtime condition\n\nis_realtime contition was backported wrong from [1] in nova\ncompute template.\n\n[1] https://review.opendev.org/c/openstack/tripleo-heat-templates/+/803013\n\nChange-Id: I65465ea40fb6f6b1d8fecbf1c4363edafaa462d1\n'}]",0,803324,a264642fa096491cb84f07eee2871a5a2e2d60c4,2,0,1,17216,,,0,"[virtoria/ussuri/train] Fix is_realtime condition

is_realtime contition was backported wrong from [1] in nova
compute template.

[1] https://review.opendev.org/c/openstack/tripleo-heat-templates/+/803013

Change-Id: I65465ea40fb6f6b1d8fecbf1c4363edafaa462d1
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/24/803324/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/nova/nova-compute-container-puppet.yaml'],1,a264642fa096491cb84f07eee2871a5a2e2d60c4,fix_condition_v," equals: [{get_param: [RoleParameters, TunedProfileName]}, 'realtime-virtual-host']"," not: {equals: [{get_param: [RoleParameters, TunedProfileName]}, 'realtime-virtual-host']}",1,1
openstack%2Fpython-tripleoclient~master~Ic0b4f76fd33caa64ff659e9de3b080031b930004,openstack/python-tripleoclient,master,Ic0b4f76fd33caa64ff659e9de3b080031b930004,Tests for tripleo_config,MERGED,2021-06-22 12:00:10.000000000,2021-08-03 08:57:21.000000000,2021-08-03 08:55:49.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 9816}, {'_account_id': 11491}, {'_account_id': 16515}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 24245}, {'_account_id': 27427}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-06-22 12:00:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/42e311cc33b0dd569b84703bed14aa1c70a89d7c', 'message': 'Tests for tripleo_config\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ic0b4f76fd33caa64ff659e9de3b080031b930004\n'}, {'number': 2, 'created': '2021-06-22 12:30:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/637b7df2462150bd3b5dca305ff1131884140642', 'message': 'Tests for tripleo_config\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ic0b4f76fd33caa64ff659e9de3b080031b930004\n'}, {'number': 3, 'created': '2021-07-20 11:31:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/36dc84644d0aa3c3daa5d7a85f8f69912b842332', 'message': 'Tests for tripleo_config\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ic0b4f76fd33caa64ff659e9de3b080031b930004\n'}, {'number': 4, 'created': '2021-07-20 11:41:01.000000000', 'files': ['tripleoclient/tests/v1/test_tripleo_config.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/1016c8c29de43f3db7a17a9639837cf4a18b6cf6', 'message': ""Tests for tripleo_config\n\nTest coverage for the 'tripleoclient.v1.tripleo_config' module.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ic0b4f76fd33caa64ff659e9de3b080031b930004\n""}]",0,797439,1016c8c29de43f3db7a17a9639837cf4a18b6cf6,15,12,4,32926,,,0,"Tests for tripleo_config

Test coverage for the 'tripleoclient.v1.tripleo_config' module.

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: Ic0b4f76fd33caa64ff659e9de3b080031b930004
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/39/797439/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/tests/v1/test_tripleo_config.py'],1,42e311cc33b0dd569b84703bed14aa1c70a89d7c,unittests/tripleoconfig,"# Copyright 2018 Red Hat, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # """"""Tests for the tripleoclient.v1.tripleo_config Tests basic parser behavior, with both default and user supplied values of arguments. Further assertions are placed on results of the parser. """""" try: from unittest import mock except ImportError: import mock from tripleoclient.tests import base from tripleoclient.constants import UNDERCLOUD_OUTPUT_DIR from tripleoclient.v1 import tripleo_config class TestGenerateAnsibleConfig(base.TestCommand): def setUp(self): super(TestGenerateAnsibleConfig, self).setUp() self.config = tripleo_config self.cmd = tripleo_config.GenerateAnsibleConfig(self.app, None) @mock.patch('tripleo_common.utils.ansible.write_default_ansible_cfg') @mock.patch( 'tripleoclient.utils.get_deployment_user', return_value='stack') @mock.patch('tripleoclient.v1.tripleo_config.logging') def test_all_defaults(self, mock_log, mock_deploy_user, mock_ansible): defaults = [ ('deployment_user', 'stack'), ('output_dir', UNDERCLOUD_OUTPUT_DIR)] parsed_args = self.check_parser(self.cmd, [], defaults) self.cmd.take_action(parsed_args) mock_ansible.assert_called_once_with( UNDERCLOUD_OUTPUT_DIR, 'stack', ssh_private_key=None) @mock.patch('tripleo_common.utils.ansible.write_default_ansible_cfg') @mock.patch( 'tripleoclient.utils.get_deployment_user', return_value='notastack') @mock.patch('tripleoclient.v1.tripleo_config.logging') def test_all_defaults_not_matching_deploy_user(self, mock_log, mock_deploy_user, mock_ansible): defaults = [ ('deployment_user', 'stack'), ('output_dir', UNDERCLOUD_OUTPUT_DIR)] parsed_args = self.check_parser(self.cmd, [], defaults) self.cmd.take_action(parsed_args) mock_ansible.assert_called_once_with( UNDERCLOUD_OUTPUT_DIR, 'stack', ssh_private_key=None) @mock.patch('tripleo_common.utils.ansible.write_default_ansible_cfg') @mock.patch( 'tripleoclient.utils.get_deployment_user', return_value='foo') @mock.patch('tripleoclient.v1.tripleo_config.logging') def test_all_alternate(self, mock_log, mock_deploy_user, mock_ansible): defaults = [ ('deployment_user', 'foo'), ('output_dir', '/fizz/buzz')] args = ['--deployment-user', 'foo', '--output-dir', '/fizz/buzz'] parsed_args = self.check_parser(self.cmd, args, defaults) self.cmd.take_action(parsed_args) mock_ansible.assert_called_once_with( '/fizz/buzz', 'foo', ssh_private_key=None) ",,95,0
openstack%2Fpython-tripleoclient~stable%2Fvictoria~Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7,openstack/python-tripleoclient,stable/victoria,Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7,Add --reproduce-command option for tripleo deploy,MERGED,2021-07-25 19:58:50.000000000,2021-08-03 08:57:12.000000000,2021-08-03 08:55:48.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-25 19:58:50.000000000', 'files': ['tripleoclient/v1/tripleo_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/5e0761a033181d31ba6232f58691270b981e1e89', 'message': ""Add --reproduce-command option for tripleo deploy\n\nWhile using tripleo deploy command we need sometimes to save\nreproducer script for issues investigation. Add option to enable\nit '--reprocuce-command'.\n\nChange-Id: Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7\n(cherry picked from commit bdc976e4201a2ada5dde341dbb3e5d5027a7d9a6)\n""}]",0,802200,5e0761a033181d31ba6232f58691270b981e1e89,11,6,1,10969,,,0,"Add --reproduce-command option for tripleo deploy

While using tripleo deploy command we need sometimes to save
reproducer script for issues investigation. Add option to enable
it '--reprocuce-command'.

Change-Id: Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7
(cherry picked from commit bdc976e4201a2ada5dde341dbb3e5d5027a7d9a6)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/00/802200/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/tripleo_deploy.py'],1,5e0761a033181d31ba6232f58691270b981e1e89,repro-stable/victoria," parser.add_argument( '--reproduce-command', action='store_true', default=False, help=_('Create a reproducer command with ansible command' 'line and all environments variables.') ) reproduce_command=parsed_args.reproduce_command,",,8,0
openstack%2Fansible-collections-openstack~master~Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb,openstack/ansible-collections-openstack,master,Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb,Run ansible devel sanity tests on py38,MERGED,2021-07-31 07:02:46.000000000,2021-08-03 08:52:16.000000000,2021-08-03 08:52:16.000000000,"[{'_account_id': 10969}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-31 07:02:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/81997e132966d535b45fbe8d56a0835e76fe32b5', 'message': 'Run asnible devel sanity tests on py38\n\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 2, 'created': '2021-07-31 13:48:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/1a4f80ed4adead4f5e5bdb7d2e19bd56df205311', 'message': 'Run ansible devel sanity tests on py38\n\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 3, 'created': '2021-07-31 13:50:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/c3b2574bd1824de57da78b7e8d2cc55e778cc6a1', 'message': 'Run ansible devel sanity tests on py38\n\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 4, 'created': '2021-07-31 14:18:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/d4073188244a0dd73bd5e6d0591d4b3792fd7c63', 'message': 'Run ansible devel sanity tests on py38\n\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 5, 'created': '2021-08-01 09:23:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/db495f38473ba51db6235cd487473671a8769ef8', 'message': 'Run ansible devel sanity tests on py38\n\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 6, 'created': '2021-08-01 17:35:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/4e09cf0889eec22c6bb24eaa6a536e9a8e0aeb8f', 'message': 'Run ansible devel sanity tests on py38\n\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 7, 'created': '2021-08-02 10:37:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/a3724b0f49efd6cc7621214acd958882dba5074f', 'message': 'Run ansible devel sanity tests on py38\n\nAnd fix some module typos.\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 8, 'created': '2021-08-02 20:45:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/8d5356c864f44dea4530cbdebe88ea1d9671245e', 'message': 'Run ansible devel sanity tests on py38\n\nAnd fix some module typos.\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}, {'number': 9, 'created': '2021-08-02 22:32:56.000000000', 'files': ['tools/run-ansible-sanity.sh', 'plugins/modules/lb_health_monitor.py', '.zuul.yaml', 'plugins/modules/baremetal_node.py', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/0441403c4260934625ab890a491c36c8264dfea9', 'message': 'Run ansible devel sanity tests on py38\n\nAnd fix some module typos.\nDisable voting for octavia jobs till investigation.\nChange-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb\n'}]",0,803102,0441403c4260934625ab890a491c36c8264dfea9,22,2,9,10969,,,0,"Run ansible devel sanity tests on py38

And fix some module typos.
Disable voting for octavia jobs till investigation.
Change-Id: Ie4cb69aa2337b0f951ac194cf456e4515dbc24fb
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/02/803102/8 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,81997e132966d535b45fbe8d56a0835e76fe32b5,py38, nodeset: ubuntu-focal python_version: 3.8 bindep_profile: test py38, nodeset: ubuntu-bionic,3,1
openstack%2Fpython-tripleoclient~stable%2Fussuri~Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7,openstack/python-tripleoclient,stable/ussuri,Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7,Add --reproduce-command option for tripleo deploy,MERGED,2021-07-25 19:59:00.000000000,2021-08-03 08:40:30.000000000,2021-08-03 08:39:02.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-25 19:59:00.000000000', 'files': ['tripleoclient/v1/tripleo_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/f7e4cdaa63e7e5a20d9ab462195e5e8b8d2cce28', 'message': ""Add --reproduce-command option for tripleo deploy\n\nWhile using tripleo deploy command we need sometimes to save\nreproducer script for issues investigation. Add option to enable\nit '--reprocuce-command'.\n\nChange-Id: Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7\n(cherry picked from commit bdc976e4201a2ada5dde341dbb3e5d5027a7d9a6)\n""}]",0,802201,f7e4cdaa63e7e5a20d9ab462195e5e8b8d2cce28,8,6,1,10969,,,0,"Add --reproduce-command option for tripleo deploy

While using tripleo deploy command we need sometimes to save
reproducer script for issues investigation. Add option to enable
it '--reprocuce-command'.

Change-Id: Ie5e694ab3b9e5196aea76da51e4e567ec8970fd7
(cherry picked from commit bdc976e4201a2ada5dde341dbb3e5d5027a7d9a6)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/01/802201/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/tripleo_deploy.py'],1,f7e4cdaa63e7e5a20d9ab462195e5e8b8d2cce28,repro-stable/ussuri," parser.add_argument( '--reproduce-command', action='store_true', default=False, help=_('Create a reproducer command with ansible command' 'line and all environments variables.') ) reproduce_command=parsed_args.reproduce_command,",,8,0
openstack%2Ftripleo-heat-templates~master~I9189e7207f9644ccfbfd712fb9a3bbfeec863730,openstack/tripleo-heat-templates,master,I9189e7207f9644ccfbfd712fb9a3bbfeec863730,Remove unused definition of PythonInterpreter,MERGED,2021-07-06 02:00:54.000000000,2021-08-03 08:35:54.000000000,2021-08-03 08:35:54.000000000,"[{'_account_id': 6926}, {'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-06 02:00:54.000000000', 'files': ['deployment/ipa/ipaservices-baremetal-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/95ddd09c8ce59f51a58a01d3f62fac947666eb08', 'message': 'Remove unused definition of PythonInterpreter\n\nThis parameter is not used in ipaservices-baremetal-ansible.yaml .\n\nChange-Id: I9189e7207f9644ccfbfd712fb9a3bbfeec863730\n'}]",0,799549,95ddd09c8ce59f51a58a01d3f62fac947666eb08,11,5,1,9816,,,0,"Remove unused definition of PythonInterpreter

This parameter is not used in ipaservices-baremetal-ansible.yaml .

Change-Id: I9189e7207f9644ccfbfd712fb9a3bbfeec863730
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/49/799549/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/ipa/ipaservices-baremetal-ansible.yaml'],1,95ddd09c8ce59f51a58a01d3f62fac947666eb08,,," PythonInterpreter: type: string description: The python interpreter to use for python and ansible actions default: ""$(command -v python3 || command -v python)""",0,4
openstack%2Freleases~master~I1b72115432647e90388248def07928ed8b46d966,openstack/releases,master,I1b72115432647e90388248def07928ed8b46d966,Release sushy 3.11.0 for xena,MERGED,2021-08-02 10:10:47.000000000,2021-08-03 08:17:55.000000000,2021-08-03 08:17:55.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-08-02 10:10:47.000000000', 'files': ['deliverables/xena/sushy.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/be8cc7426f47c67363e8b1add694ac477f1080e9', 'message': 'Release sushy 3.11.0 for xena\n\nChange-Id: I1b72115432647e90388248def07928ed8b46d966\n'}]",0,803165,be8cc7426f47c67363e8b1add694ac477f1080e9,13,6,1,23851,,,0,"Release sushy 3.11.0 for xena

Change-Id: I1b72115432647e90388248def07928ed8b46d966
",git fetch https://review.opendev.org/openstack/releases refs/changes/65/803165/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/sushy.yaml'],1,be8cc7426f47c67363e8b1add694ac477f1080e9,sushy-311, - version: 3.11.0 projects: - repo: openstack/sushy hash: b93dcba97bc3494e027e8c328c1a4d5ff8afc65e,,4,0
openstack%2Fovsdbapp~master~I39532cf258d7c68c18b0ae6b5de8e4d8a018e92e,openstack/ovsdbapp,master,I39532cf258d7c68c18b0ae6b5de8e4d8a018e92e,setup.cfg: Replace dashes with underscores,MERGED,2021-05-08 00:34:37.000000000,2021-08-03 08:13:56.000000000,2021-08-03 08:12:32.000000000,"[{'_account_id': 5756}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-05-08 00:34:37.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/ee39ae0cfd7b5c880e2ea93b49272f9f496b6dc1', 'message': ""setup.cfg: Replace dashes with underscores\n\nSetuptools v54.1.0 introduces a warning that the use of dash-separated\noptions in 'setup.cfg' will not be supported in a future version [1].\nGet ahead of the issue by replacing the dashes with underscores. Without\nthis, we see 'UserWarning' messages like the following on new enough\nversions of setuptools:\n\n  UserWarning: Usage of dash-separated 'description-file' will not be\n  supported in future versions. Please use the underscore name\n  'description_file' instead\n\n[1] https://github.com/pypa/setuptools/commit/a2e9ae4cb\n\nChange-Id: I39532cf258d7c68c18b0ae6b5de8e4d8a018e92e\n""}]",0,790311,ee39ae0cfd7b5c880e2ea93b49272f9f496b6dc1,8,3,1,31825,,,0,"setup.cfg: Replace dashes with underscores

Setuptools v54.1.0 introduces a warning that the use of dash-separated
options in 'setup.cfg' will not be supported in a future version [1].
Get ahead of the issue by replacing the dashes with underscores. Without
this, we see 'UserWarning' messages like the following on new enough
versions of setuptools:

  UserWarning: Usage of dash-separated 'description-file' will not be
  supported in future versions. Please use the underscore name
  'description_file' instead

[1] https://github.com/pypa/setuptools/commit/a2e9ae4cb

Change-Id: I39532cf258d7c68c18b0ae6b5de8e4d8a018e92e
",git fetch https://review.opendev.org/openstack/ovsdbapp refs/changes/11/790311/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,ee39ae0cfd7b5c880e2ea93b49272f9f496b6dc1,,description_file =author_email = openstack-discuss@lists.openstack.org home_page = https://pypi.org/project/ovsdbapp/ python_requires = >=3.6,description-file =author-email = openstack-discuss@lists.openstack.org home-page = https://pypi.org/project/ovsdbapp/ python-requires = >=3.6,4,4
openstack%2Fkolla~master~Ie7f26fa016d6fcafc6eee860b827bca868b4c487,openstack/kolla,master,Ie7f26fa016d6fcafc6eee860b827bca868b4c487,Remove patrole from version-check,MERGED,2021-07-29 18:43:30.000000000,2021-08-03 08:08:53.000000000,2021-08-03 08:07:19.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 24072}]","[{'number': 1, 'created': '2021-07-29 18:43:30.000000000', 'files': ['tools/version-check.py'], 'web_link': 'https://opendev.org/openstack/kolla/commit/f8824b60d5c3f4af4cddabcb868021abe2182645', 'message': 'Remove patrole from version-check\n\nPatrole was used by tempest which is now removed.\n\nChange-Id: Ie7f26fa016d6fcafc6eee860b827bca868b4c487\n'}]",0,802926,f8824b60d5c3f4af4cddabcb868021abe2182645,9,4,1,30491,,,0,"Remove patrole from version-check

Patrole was used by tempest which is now removed.

Change-Id: Ie7f26fa016d6fcafc6eee860b827bca868b4c487
",git fetch https://review.opendev.org/openstack/kolla refs/changes/26/802926/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/version-check.py'],1,f8824b60d5c3f4af4cddabcb868021abe2182645,remove-patrole,," 'patrole',",0,1
openstack%2Freleases~master~I4363ab18e2828f618be6a30bfa048e77dfb4f1ce,openstack/releases,master,I4363ab18e2828f618be6a30bfa048e77dfb4f1ce,release new version of vitrage/vitrage-dashboard,MERGED,2021-08-02 15:27:25.000000000,2021-08-03 08:02:54.000000000,2021-08-03 08:02:54.000000000,"[{'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-08-02 15:27:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/89151df7e11e6d0239cea5c7fd26890d10cd4397', 'message': 'release new version of vitrage/vitrage-dashboard\n\nChange-Id: I4363ab18e2828f618be6a30bfa048e77dfb4f1ce\n'}, {'number': 2, 'created': '2021-08-02 15:42:17.000000000', 'files': ['deliverables/xena/vitrage.yaml', 'deliverables/xena/vitrage-dashboard.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e611dbd5d2d52229c81ebcc364ea35b5dd874755', 'message': 'release new version of vitrage/vitrage-dashboard\n\nChange-Id: I4363ab18e2828f618be6a30bfa048e77dfb4f1ce\n'}]",0,803223,e611dbd5d2d52229c81ebcc364ea35b5dd874755,11,3,2,19134,,,0,"release new version of vitrage/vitrage-dashboard

Change-Id: I4363ab18e2828f618be6a30bfa048e77dfb4f1ce
",git fetch https://review.opendev.org/openstack/releases refs/changes/23/803223/2 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/xena/vitrage.yaml', 'deliverables/xena/vitrage-dashboard.yaml']",2,89151df7e11e6d0239cea5c7fd26890d10cd4397,release_vitrage,releases: - version: 3.3.0 projects: - repo: openstack/vitrage-dashboard hash: 556a43ef3193a1fa5ea127c64f98c0d5e9972afa,,10,0
openstack%2Freleases~master~I4513b9e5b03f0a7da9277ff9a2e04c9a7ba75080,openstack/releases,master,I4513b9e5b03f0a7da9277ff9a2e04c9a7ba75080,[vitrage] Propose to switch the release model,ABANDONED,2021-08-02 14:35:45.000000000,2021-08-03 07:51:34.000000000,,"[{'_account_id': 19134}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 14:35:45.000000000', 'files': ['deliverables/xena/vitrage.yaml', 'deliverables/xena/vitrage-dashboard.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/112955c5460c979cb6b778c707bc3e8883de7174', 'message': '[vitrage] Propose to switch the release model\n\nIntermediary-released deliverables that did release only once during\nthe last cycle, and have not done a release yet are good candidates\nto switch to the cycle-with-rc model, which is much more suitable for\ndeliverables that are only released once per cycle.\n\nThese changes are not mandatory and this patch is a conveniences to\nhighlight this point and open the discussion.\n\nPTLs and release liaisons please decide to:\n- immediately release an intermediary release (and -1 the proposed change)\n- confirm the release model change (+1 the proposed change)\n- stay uncertain for this cycle of how many releases will be made, but\n  acknowledge that they need to do a release before RC1 (-1 the proposed\n  change)\n\nChange-Id: I4513b9e5b03f0a7da9277ff9a2e04c9a7ba75080\n'}]",0,803220,112955c5460c979cb6b778c707bc3e8883de7174,4,2,1,28522,,,0,"[vitrage] Propose to switch the release model

Intermediary-released deliverables that did release only once during
the last cycle, and have not done a release yet are good candidates
to switch to the cycle-with-rc model, which is much more suitable for
deliverables that are only released once per cycle.

These changes are not mandatory and this patch is a conveniences to
highlight this point and open the discussion.

PTLs and release liaisons please decide to:
- immediately release an intermediary release (and -1 the proposed change)
- confirm the release model change (+1 the proposed change)
- stay uncertain for this cycle of how many releases will be made, but
  acknowledge that they need to do a release before RC1 (-1 the proposed
  change)

Change-Id: I4513b9e5b03f0a7da9277ff9a2e04c9a7ba75080
",git fetch https://review.opendev.org/openstack/releases refs/changes/20/803220/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/xena/vitrage.yaml', 'deliverables/xena/vitrage-dashboard.yaml']",2,112955c5460c979cb6b778c707bc3e8883de7174,not-yet-released,release-model: cycle-with-rc,release-model: cycle-with-intermediary,2,2
openstack%2Fpuppet-tripleo~stable%2Fussuri~Ie90f690ab80b4880b520f79b9c1ad528efa001eb,openstack/puppet-tripleo,stable/ussuri,Ie90f690ab80b4880b520f79b9c1ad528efa001eb,Neutron: remove support for N1kv driver,MERGED,2021-08-02 12:50:34.000000000,2021-08-03 06:36:20.000000000,2021-08-03 06:36:20.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-02 12:50:34.000000000', 'files': ['manifests/profile/base/horizon.pp', 'manifests/profile/base/neutron/plugins/ml2.pp', 'manifests/profile/base/neutron/n1k.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/d81b8211f4f5cd3c38c1abba3af5815332c621f9', 'message': 'Neutron: remove support for N1kv driver\n\n... because N1kv driver was already removed[1].\n\n[1] https://opendev.org/x/networking-cisco/commit/0730ec9e6b76b3c1e75082e9dd1af55c9faeb34c\n\nChange-Id: Ie90f690ab80b4880b520f79b9c1ad528efa001eb\n(cherry picked from commit 8310c55b08e5d9dbe6d99ca1662113961acf6aef)\n'}]",0,803200,d81b8211f4f5cd3c38c1abba3af5815332c621f9,7,6,1,14250,,,0,"Neutron: remove support for N1kv driver

... because N1kv driver was already removed[1].

[1] https://opendev.org/x/networking-cisco/commit/0730ec9e6b76b3c1e75082e9dd1af55c9faeb34c

Change-Id: Ie90f690ab80b4880b520f79b9c1ad528efa001eb
(cherry picked from commit 8310c55b08e5d9dbe6d99ca1662113961acf6aef)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/00/803200/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/horizon.pp', 'manifests/profile/base/neutron/plugins/ml2.pp', 'manifests/profile/base/neutron/n1k.pp']",3,d81b8211f4f5cd3c38c1abba3af5815332c621f9,,,"# Copyright 2016 Red Hat, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # # == Class: tripleo::profile::base::neutron::n1k # # Neutron N1k Mechanism Driver profile for tripleo # # === Parameters # # [*n1kv_source*] # (Optional) The source location for the N1Kv # Defaults to hiera('n1kv_vem_source', undef) # # [*n1kv_version*] # (Optional) The version of N1Kv to use # Defaults to hiera('n1kv_vem_version', undef) # # [*step*] # (Optional) The current step in deployment. See tripleo-heat-templates # for more details. # Defaults to hiera('step') # class tripleo::profile::base::neutron::n1k ( $n1kv_source = hiera('n1kv_vem_source', undef), $n1kv_version = hiera('n1kv_vem_version', undef), $step = Integer(hiera('step')), ) { include neutron::plugins::ml2::cisco::nexus1000v include tripleo::profile::base::neutron if $step >= 4 { class { 'neutron::agents::n1kv_vem': n1kv_source => $n1kv_source, n1kv_version => $n1kv_version, } class { 'n1k_vsm': n1kv_source => $n1kv_source, n1kv_version => $n1kv_version, pacemaker_control => false, } } } ",1,66
openstack%2Fpuppet-tripleo~stable%2Fvictoria~Ie90f690ab80b4880b520f79b9c1ad528efa001eb,openstack/puppet-tripleo,stable/victoria,Ie90f690ab80b4880b520f79b9c1ad528efa001eb,Neutron: remove support for N1kv driver,MERGED,2021-08-02 12:44:05.000000000,2021-08-03 06:16:48.000000000,2021-08-03 06:16:48.000000000,"[{'_account_id': 6926}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-02 12:44:05.000000000', 'files': ['manifests/profile/base/horizon.pp', 'manifests/profile/base/neutron/plugins/ml2.pp', 'manifests/profile/base/neutron/n1k.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/a9777d238c1721278044c6aa0223d9560f92c40f', 'message': 'Neutron: remove support for N1kv driver\n\n... because N1kv driver was already removed[1].\n\n[1] https://opendev.org/x/networking-cisco/commit/0730ec9e6b76b3c1e75082e9dd1af55c9faeb34c\n\nChange-Id: Ie90f690ab80b4880b520f79b9c1ad528efa001eb\n(cherry picked from commit 8310c55b08e5d9dbe6d99ca1662113961acf6aef)\n'}]",0,803198,a9777d238c1721278044c6aa0223d9560f92c40f,8,7,1,14250,,,0,"Neutron: remove support for N1kv driver

... because N1kv driver was already removed[1].

[1] https://opendev.org/x/networking-cisco/commit/0730ec9e6b76b3c1e75082e9dd1af55c9faeb34c

Change-Id: Ie90f690ab80b4880b520f79b9c1ad528efa001eb
(cherry picked from commit 8310c55b08e5d9dbe6d99ca1662113961acf6aef)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/98/803198/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/horizon.pp', 'manifests/profile/base/neutron/plugins/ml2.pp', 'manifests/profile/base/neutron/n1k.pp']",3,a9777d238c1721278044c6aa0223d9560f92c40f,,,"# Copyright 2016 Red Hat, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # # == Class: tripleo::profile::base::neutron::n1k # # Neutron N1k Mechanism Driver profile for tripleo # # === Parameters # # [*n1kv_source*] # (Optional) The source location for the N1Kv # Defaults to hiera('n1kv_vem_source', undef) # # [*n1kv_version*] # (Optional) The version of N1Kv to use # Defaults to hiera('n1kv_vem_version', undef) # # [*step*] # (Optional) The current step in deployment. See tripleo-heat-templates # for more details. # Defaults to hiera('step') # class tripleo::profile::base::neutron::n1k ( $n1kv_source = hiera('n1kv_vem_source', undef), $n1kv_version = hiera('n1kv_vem_version', undef), $step = Integer(hiera('step')), ) { include neutron::plugins::ml2::cisco::nexus1000v include tripleo::profile::base::neutron if $step >= 4 { class { 'neutron::agents::n1kv_vem': n1kv_source => $n1kv_source, n1kv_version => $n1kv_version, } class { 'n1k_vsm': n1kv_source => $n1kv_source, n1kv_version => $n1kv_version, pacemaker_control => false, } } } ",1,66
openstack%2Fheat~master~I6a2b5afa13480791971bbd8bba1f43b9f2db8294,openstack/heat,master,I6a2b5afa13480791971bbd8bba1f43b9f2db8294,Use Block Storage API v3 instead of API v2,MERGED,2021-07-24 17:15:09.000000000,2021-08-03 05:58:18.000000000,2021-08-03 05:55:07.000000000,"[{'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-24 17:15:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/19ee65a39dea567837a6aed54601dfccb85e7bae', 'message': 'Use volume v3 API instead of v2 API\n\nThe volume v3 API was deprecated during Pike cycle and is being removed\nin Xena cycle.\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}, {'number': 2, 'created': '2021-07-27 02:01:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/cd0246fd9a83ea301fd8b660dd2a3882fb4e9d71', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}, {'number': 3, 'created': '2021-07-27 02:21:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/7367ca14494f25125492bcbf33c88f51b3415a7d', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}, {'number': 4, 'created': '2021-07-27 14:48:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/e67add710ab96ac674b26d6cc455ad71417b67b1', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}, {'number': 5, 'created': '2021-07-27 14:53:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/19f6900afff0a7479d710bf772cd0f9e30a0982c', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nNote:\nThis change makes functional tests non-voting temporally until another\nfix for heat-tempest-plugin[1] is merged.\n\n[1] https://review.opendev.org/c/openstack/heat-tempest-plugin/+/802150/\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}, {'number': 6, 'created': '2021-07-27 16:57:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/d62e279e0f1b89fd2ff53bd12a8a52ab6a91b54d', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nNote:\n- functional tests non-voting is temporally made non-voting until\n  another fix for heat-tempest-plugin[1] is merged.\n- granade tests is made non-voting because it is not pulling change\n  in heat_integrations properly.\n\n[1] https://review.opendev.org/c/openstack/heat-tempest-plugin/+/802150/\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}, {'number': 7, 'created': '2021-08-02 04:33:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/1e96f40695f540514ec3f3215a44ed479de88c72', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\nUnused volume_client and network_client in integration test code are\nalso removed by this change.\n\nNote:\n- functional tests non-voting is temporally made non-voting until\n  another fix for heat-tempest-plugin[1] is merged.\n- granade tests is made non-voting because it is not pulling change\n  in heat_integrations properly.\n\n[1] https://review.opendev.org/c/openstack/heat-tempest-plugin/+/802150/\n\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}, {'number': 8, 'created': '2021-08-02 05:40:25.000000000', 'files': ['heat/tests/openstack/cinder/test_volume.py', 'heat_integrationtests/common/test.py', '.zuul.yaml', 'heat/tests/openstack/cinder/test_volume_type.py', 'heat/tests/openstack/cinder/test_volume_utils.py', 'heat_integrationtests/common/clients.py', 'heat/tests/clients/test_cinder_client.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/1828df32fa946d49d8449ff1d8a26c05b3990a65', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\nUnused volume_client and network_client in integration test code are\nalso removed by this change.\n\nNote:\ngranade tests is made non-voting temporally until the same issue is\nfixed in stable/wallaby.\n\nDepends-on: https://review.opendev.org/802150/\nChange-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294\n'}]",5,802151,1828df32fa946d49d8449ff1d8a26c05b3990a65,42,2,8,9816,,,0,"Use Block Storage API v3 instead of API v2

Block Storage API v2 was deprecated during Pike cycle and is being
removed during Xena cycle, and current v3 API should be used instead.
Unused volume_client and network_client in integration test code are
also removed by this change.

Note:
granade tests is made non-voting temporally until the same issue is
fixed in stable/wallaby.

Depends-on: https://review.opendev.org/802150/
Change-Id: I6a2b5afa13480791971bbd8bba1f43b9f2db8294
",git fetch https://review.opendev.org/openstack/heat refs/changes/51/802151/4 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/openstack/cinder/test_volume.py', 'heat/tests/openstack/cinder/test_volume_type.py', 'heat/tests/openstack/cinder/test_volume_utils.py']",3,19ee65a39dea567837a6aed54601dfccb85e7bae,volumev2-removal,from cinderclient.v3 import client as cinderclient self.cinder_fc.volume_api_version = 3,from cinderclient.v2 import client as cinderclient self.cinder_fc.volume_api_version = 2,6,6
openstack%2Fopenstack-helm-images~master~I90019bcdf15e7e6ef251b343119e3fe99e26b338,openstack/openstack-helm-images,master,I90019bcdf15e7e6ef251b343119e3fe99e26b338,[test],ABANDONED,2021-08-03 03:08:51.000000000,2021-08-03 05:42:32.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-03 03:08:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/c8718566a735bcebcec27c9308044cd1b4c261b2', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2021-08-03 03:12:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/74b4f481922eb18ceb2fe9f4e3f53015d304363b', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2021-08-03 03:20:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/f22becb3e7fda0a6397a759a78221717170a8cba', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 4, 'created': '2021-08-03 03:27:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/6242983dda4ec915d1b707e34642ea89fccb6748', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 5, 'created': '2021-08-03 03:31:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/385530582b8c20a1c7c0cb7855a23665b0b86d9a', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 6, 'created': '2021-08-03 03:36:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/30b432b79eaae8b4885a702ad926d8fa29ffc768', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 7, 'created': '2021-08-03 03:46:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/34d68b0fac33f946d7c8cdcf780d6a58e030e385', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 8, 'created': '2021-08-03 03:54:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/d79a5ace13c583e4874bcc52cda8c1bfa63237bc', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 9, 'created': '2021-08-03 04:12:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/051ad9c607b96f8d123cc6a46aee762b3b44e0b2', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 10, 'created': '2021-08-03 04:25:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/5b53708a7804027e0db180bd85b0f54adcd567ed', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 11, 'created': '2021-08-03 04:32:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/805d86fb2eb094698adca7e6b5bed2b6d8d04c9c', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 12, 'created': '2021-08-03 05:38:43.000000000', 'files': ['zuul.d/base.yaml', 'zuul.d/playbooks/report-periodic.yml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/7c2a562801a3239dacf80f18494bbc24012cf91c', 'message': '[test]\n\nChange-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",1,803303,7c2a562801a3239dacf80f18494bbc24012cf91c,17,1,12,8863,,,0,"[test]

Change-Id: I90019bcdf15e7e6ef251b343119e3fe99e26b338
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/03/803303/12 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/base.yaml', 'zuul.d/playbooks/report-periodic.yml']",2,c8718566a735bcebcec27c9308044cd1b4c261b2,,"- hosts: all tasks: - name: Install jq client apt: package: - jq - mailutils - name: Query zuul periodic pipeline shell: curl -s https://zuul.opendev.org/api/tenant/openstack/buildsets?project=openstack/openstack-helm-images\&pipeline=periodic\&limit=1 | jq -r '.[]' register: buildset - name: Set buildset dict fact set_fact: ""{{ buildset | from_json }}"" - name: Send failure notification when: buildset.result != ""SUCCESS"" shell: echo ""Latest run has {{ buildset.result }} status: https://zuul.openstack.org/buildset/{{ buildset.uuid }}"" | mail -s ""OSH-images periodic pipeline failure report"" anost1986@gmail.com ",,20,0
openstack%2Fheat-tempest-plugin~master~Ic15f4aff72661ae5a50dbb14840ba0277a578173,openstack/heat-tempest-plugin,master,Ic15f4aff72661ae5a50dbb14840ba0277a578173,Use Block Storage API v3 instead of API v2,MERGED,2021-07-24 17:05:29.000000000,2021-08-03 03:05:51.000000000,2021-08-03 03:05:51.000000000,"[{'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-24 17:05:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-tempest-plugin/commit/42da213e0e16eeb93e3be922f244559a1677833c', 'message': 'Use Volume v3 API\n\n... because Volume v2 API was deprecated during Pike cycle and it is\nbeing removed during Xena cycle.\n\nChange-Id: Ic15f4aff72661ae5a50dbb14840ba0277a578173\n'}, {'number': 2, 'created': '2021-07-24 17:14:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-tempest-plugin/commit/ca6fdad1b3a3886fad44eb067efb9857e39af830', 'message': 'Use Volume v3 API\n\n... because Volume v2 API was deprecated during Pike and it is being\nremoved during Xena.\n\nChange-Id: Ic15f4aff72661ae5a50dbb14840ba0277a578173\n'}, {'number': 3, 'created': '2021-07-27 02:02:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-tempest-plugin/commit/7c4acaba7fa21fd94f326dc14b036a01714d8d1b', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: Ic15f4aff72661ae5a50dbb14840ba0277a578173\n'}, {'number': 4, 'created': '2021-07-27 14:53:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-tempest-plugin/commit/ad4745862f7fac79a86c85123ed2242327e8efcb', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nDepends-on: https://review.opendev.org/802151\nChange-Id: Ic15f4aff72661ae5a50dbb14840ba0277a578173\n'}, {'number': 5, 'created': '2021-08-02 05:38:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-tempest-plugin/commit/ad87331bc4ed7753c5380138cd19d75b4662d6c4', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nDepends-on: https://review.opendev.org/802151\nChange-Id: Ic15f4aff72661ae5a50dbb14840ba0277a578173\n'}, {'number': 6, 'created': '2021-08-02 05:38:38.000000000', 'files': ['heat_tempest_plugin/services/clients.py'], 'web_link': 'https://opendev.org/openstack/heat-tempest-plugin/commit/335c11b3e7af0f7518a79beb10415059e2a657a5', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: Ic15f4aff72661ae5a50dbb14840ba0277a578173\n'}]",0,802150,335c11b3e7af0f7518a79beb10415059e2a657a5,22,2,6,9816,,,0,"Use Block Storage API v3 instead of API v2

Block Storage API v2 was deprecated during Pike cycle and is being
removed during Xena cycle, and current v3 API should be used instead.

Change-Id: Ic15f4aff72661ae5a50dbb14840ba0277a578173
",git fetch https://review.opendev.org/openstack/heat-tempest-plugin refs/changes/50/802150/1 && git format-patch -1 --stdout FETCH_HEAD,['heat_tempest_plugin/services/clients.py'],1,42da213e0e16eeb93e3be922f244559a1677833c,volumev2-removal, CINDERCLIENT_VERSION = '3', CINDERCLIENT_VERSION = '2',1,1
openstack%2Fpython-tripleoclient~master~I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b,openstack/python-tripleoclient,master,I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b,Implement protected resource types,MERGED,2021-06-03 13:51:30.000000000,2021-08-03 02:36:20.000000000,2021-08-03 02:35:04.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}, {'_account_id': 28223}, {'_account_id': 30073}]","[{'number': 1, 'created': '2021-06-03 13:51:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/dc8a71d240c8ab797aff9287f4eb10cb1e704796', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 2, 'created': '2021-06-03 13:54:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/123b0fa140c932fc6a57863e27f465f0c2547060', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 3, 'created': '2021-06-04 00:32:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/6b41e3ca23e04b4056c7dc0549b534e644a9c439', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 4, 'created': '2021-06-05 00:10:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/4fd09a280859b6e24471456eb5f5220623f4e4ff', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 5, 'created': '2021-06-07 13:26:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/8a16817bb6fd0fbdfd3b5f919d4c2f53c1a481fa', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 6, 'created': '2021-06-10 19:42:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/db15b87b8c4cd3b3639acaef1c1165fe219f140e', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 7, 'created': '2021-06-11 09:08:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/2b0e8d2651e5c1ecb9cfb9eb8ddc018d369ef122', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 8, 'created': '2021-06-14 09:36:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/ac4591648734f7b024610031a6aa6d9365cf27cc', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 9, 'created': '2021-06-16 13:28:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/acaf1950fc53a4741a3af24498ce9e90563c2b4a', 'message': 'Implement protected params and registry entries\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\n\nIncluding the legacy environment files, such as\nnetwork-isolation.yaml, network-environment.yaml\nwould result in overriding the internally added\nenvironment files.\n\nThis patch implements a check that will detect\nconflicts and raise error if the user tries to\noverride a protected parameter/resource registry\nentry.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n'}, {'number': 10, 'created': '2021-06-18 11:50:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/3c6b90c204fa5cfa33e0c14f9e5b52a76fcbf6dd', 'message': ""Implement protected resource types\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\nIncluding the legacy environment files, such as\n`network-isolation.yaml` would result in overriding\nthe internally defined resource types and a failed\ndeployment.\n\nThis patch implements a check that will detect\nresource type conflicts and raise error if a\nprotected resource type is overriden.\n\nFor users that may still want/need to override the\nresource types, the protection can be disabled by\nsetting: `--disable-protected-resource-types`\n\nNOTE: Parameter's are left unprotected since\n  traditionally THT interfaces always allowed\n  overriding anything and everything.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n""}, {'number': 11, 'created': '2021-06-23 18:55:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/2e499b481e1a11c036a2fd7b47422d588a7bb113', 'message': ""Implement protected resource types\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\nIncluding the legacy environment files, such as\n`network-isolation.yaml` would result in overriding\nthe internally defined resource types and a failed\ndeployment.\n\nThis patch implements a check that will detect\nresource type conflicts and raise error if a\nprotected resource type is overriden.\n\nFor users that may still want/need to override the\nresource types, the protection can be disabled by\nsetting: `--disable-protected-resource-types`\n\nNOTE: Parameter's are left unprotected since\n  traditionally THT interfaces always allowed\n  overriding anything and everything.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n""}, {'number': 12, 'created': '2021-06-24 14:14:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/8ea79008b5ea30ec72a22b7e7ce213fe5d34caba', 'message': ""Implement protected resource types\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\nIncluding the legacy environment files, such as\n`network-isolation.yaml` would result in overriding\nthe internally defined resource types and a failed\ndeployment.\n\nThis patch implements a check that will detect\nresource type conflicts and raise error if a\nprotected resource type is overriden.\n\nFor users that may still want/need to override the\nresource types, the protection can be disabled by\nsetting: `--disable-protected-resource-types`\n\nNOTE: Parameter's are left unprotected since\n  traditionally THT interfaces always allowed\n  overriding anything and everything.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n""}, {'number': 13, 'created': '2021-06-28 20:06:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/b0f802590427f219559492ef4d7e84d97939d10e', 'message': ""Implement protected resource types\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\nIncluding the legacy environment files, such as\n`network-isolation.yaml` would result in overriding\nthe internally defined resource types and a failed\ndeployment.\n\nThis patch implements a check that will detect\nresource type conflicts and raise error if a\nprotected resource type is overriden.\n\nFor users that may still want/need to override the\nresource types, the protection can be disabled by\nsetting: `--disable-protected-resource-types`\n\nNOTE: Parameter's are left unprotected since\n  traditionally THT interfaces always allowed\n  overriding anything and everything.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n""}, {'number': 14, 'created': '2021-06-30 16:27:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/c10954a446043e2faa8a70f1ad3217dc258fbe55', 'message': ""Implement protected resource types\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\nIncluding the legacy environment files, such as\n`network-isolation.yaml` would result in overriding\nthe internally defined resource types and a failed\ndeployment.\n\nThis patch implements a check that will detect\nresource type conflicts and raise error if a\nprotected resource type is overriden.\n\nFor users that may still want/need to override the\nresource types, the protection can be disabled by\nsetting: `--disable-protected-resource-types`\n\nNOTE: Parameter's are left unprotected since\n  traditionally THT interfaces always allowed\n  overriding anything and everything.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n""}, {'number': 15, 'created': '2021-06-30 20:03:49.000000000', 'files': ['tripleoclient/tests/test_utils.py', 'tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/utils.py', 'tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/86522255e3763cbecf93328a94b4d888d9d4928d', 'message': ""Implement protected resource types\n\nWhen using the oc deploy command with the options\n--baremetal-provision, --vip-file and network-v2\nversion networks definition the heat environment\nfiles are added to user environments internally.\nIncluding the legacy environment files, such as\n`network-isolation.yaml` would result in overriding\nthe internally defined resource types and a failed\ndeployment.\n\nThis patch implements a check that will detect\nresource type conflicts and raise error if a\nprotected resource type is overriden.\n\nFor users that may still want/need to override the\nresource types, the protection can be disabled by\nsetting: `--disable-protected-resource-types`\n\nNOTE: Parameter's are left unprotected since\n  traditionally THT interfaces always allowed\n  overriding anything and everything.\n\nAlso refactor the process_multiple_environments\nmethod by splitting part of method to the new\nrewrite_env_path method, so that it can be used\nalso when checking for prohibited overrides.\n\nDepends-On: I8008344f215be6a54e00d7d27b697375b7f88f0f\nChange-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b\n""}]",3,794593,86522255e3763cbecf93328a94b4d888d9d4928d,67,7,15,24245,,,0,"Implement protected resource types

When using the oc deploy command with the options
--baremetal-provision, --vip-file and network-v2
version networks definition the heat environment
files are added to user environments internally.
Including the legacy environment files, such as
`network-isolation.yaml` would result in overriding
the internally defined resource types and a failed
deployment.

This patch implements a check that will detect
resource type conflicts and raise error if a
protected resource type is overriden.

For users that may still want/need to override the
resource types, the protection can be disabled by
setting: `--disable-protected-resource-types`

NOTE: Parameter's are left unprotected since
  traditionally THT interfaces always allowed
  overriding anything and everything.

Also refactor the process_multiple_environments
method by splitting part of method to the new
rewrite_env_path method, so that it can be used
also when checking for prohibited overrides.

Depends-On: I8008344f215be6a54e00d7d27b697375b7f88f0f
Change-Id: I8e0f2762d744b21ec1555faa1e9bbe6e2d00f67b
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/93/794593/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/tests/test_utils.py', 'tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/utils.py', 'tripleoclient/v1/overcloud_deploy.py']",4,dc8a71d240c8ab797aff9287f4eb10cb1e704796,network-data-v2," # A dictionary to store resource registry and parameters that are # internal, and should not be overridden in user provided environments. protected_overrides = {'registry_entries': dict(), 'parameter_entries': dict()} created_env_files = [ os.path.join(new_tht_root, constants.DEFAULT_RESOURCE_REGISTRY)] self._provision_networks(parsed_args, new_tht_root, protected_overrides)) self._provision_virtual_ips(parsed_args, new_tht_root, protected_overrides)) self._provision_baremetal(parsed_args, new_tht_root, protected_overrides)) user_environments = [] if parsed_args.environment_directories: user_environments.extend(utils.load_environment_directories( user_environments.extend(parsed_args.environment_files) # TODO(hjensas): ""--disable-validations"" is marked as DEPRECATED, # but it still used in a couple of places to allow disabling some # checks. if not parsed_args.disable_validations: utils.check_prohibited_overrides(protected_overrides, user_environments) created_env_files.extend(user_environments) def _provision_baremetal(self, parsed_args, tht_root, protected_overrides): utils.extend_protected_overrides(protected_overrides, output_path) def _provision_networks(self, parsed_args, tht_root, protected_overrides): utils.extend_protected_overrides(protected_overrides, output_path) def _provision_virtual_ips(self, parsed_args, tht_root, protected_overrides): utils.extend_protected_overrides(protected_overrides, output_path) "," created_env_files = [] created_env_files.append( os.path.join(new_tht_root, constants.DEFAULT_RESOURCE_REGISTRY)) self._provision_networks(parsed_args, new_tht_root)) self._provision_virtual_ips(parsed_args, new_tht_root)) self._provision_baremetal(parsed_args, new_tht_root)) if parsed_args.environment_directories: created_env_files.extend(utils.load_environment_directories( created_env_files.extend(parsed_args.environment_files) def _provision_baremetal(self, parsed_args, tht_root): def _provision_networks(self, parsed_args, tht_root): def _provision_virtual_ips(self, parsed_args, tht_root):",205,29
openstack%2Ftripleo-ansible~stable%2Fvictoria~Ib6140c8991469c950fd7e1b323c614103394e3f1,openstack/tripleo-ansible,stable/victoria,Ib6140c8991469c950fd7e1b323c614103394e3f1,tripleo-kernel: prevent reboot when TSX flag was added,MERGED,2021-07-30 13:40:05.000000000,2021-08-03 02:35:07.000000000,2021-08-03 02:35:07.000000000,"[{'_account_id': 6816}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 13:40:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c97ce60fd8153553c807bf9873527b854c517f1d', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n""}, {'number': 2, 'created': '2021-07-30 14:05:36.000000000', 'files': ['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/601b607d7ea033c1ac09a68e7f1b109ec52a4b04', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n""}]",1,803020,601b607d7ea033c1ac09a68e7f1b109ec52a4b04,12,12,2,27419,,,0,"tripleo-kernel: prevent reboot when TSX flag was added

During the 16.2 upgrade path, we enforce the inclusion of tsx flag by
operators. If there was already kernelargs present, the node won't get
rebooted, but if it's a new KernelArgs, the node will get rebooted as
per the related bug.

We want to prevent the unexpected reboot of nodes with workload when
the TSX flag was added.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1975240
Change-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1
(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)
(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/20/803020/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'],1,c97ce60fd8153553c807bf9873527b854c517f1d,,"- name: TSX KernelArgs compute node reboot prevention when: - '""nova_libvirt"" in groups' block: - name: Check if node has a nova.conf stat: path: /var/lib/config-data/puppet-generated/nova_libvirt/etc/nova/nova.conf register: nova_conf_check - name: Enabling defer_reboot when TSX was added or appended when: - nova_conf_check.stat.exists - tripleo_kernel_args is regex(""^[\s]*tsx=[^\s]+[\s]*$"") block: - name: Warn operator about workload protection debug: msg: | Automated reboot for this node has been defered because it is already provisionned. Please schedule a manual reboot after this deployment is completed. - name: Setting defer reboot fact set_fact: tripleo_kernel_defer_reboot: true ",,24,0
openstack%2Ftripleo-ansible~stable%2Fvictoria~If1239369b9c650ab62be58b4ae125cff120fa49a,openstack/tripleo-ansible,stable/victoria,If1239369b9c650ab62be58b4ae125cff120fa49a,Configure vhost-postcopy-support,MERGED,2021-07-30 12:45:19.000000000,2021-08-03 02:35:06.000000000,2021-08-03 02:35:06.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 12:45:19.000000000', 'files': ['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/47b499ac50139610d72c32265a0bc8e7eed75884', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)\n(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)\n'}]",0,803014,47b499ac50139610d72c32265a0bc8e7eed75884,10,9,1,27419,,,0,"Configure vhost-postcopy-support

Libvirt PostCopy helps with live-migration. For postcopy to work with
vhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Change-Id: If1239369b9c650ab62be58b4ae125cff120fa49a
(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)
(cherry picked from commit 1d2558c7a9bbbfdbcea13d9cff381e88b34ca111)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/14/803014/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml']",2,47b499ac50139610d72c32265a0bc8e7eed75884,vhost-postcopy,tripleo_ovs_dpdk_vhost_postcopy_support: false,,19,0
openstack%2Ftripleo-ansible~stable%2Ftrain~I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,openstack/tripleo-ansible,stable/train,I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,Allow for cron programming of backups,MERGED,2021-08-02 08:24:52.000000000,2021-08-03 02:31:58.000000000,2021-08-03 02:31:58.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 23181}, {'_account_id': 32728}]","[{'number': 1, 'created': '2021-08-02 08:24:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/e30dfb664dd7f5ba605faded1505c9132c774e53', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 2, 'created': '2021-08-02 08:30:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c7274e5e64f4b02d20fe8e3abceab0746b573cce', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 3, 'created': '2021-08-02 08:35:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/874f45e4c0d517b4f13e7c8b4be8cb6ad9f95053', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nNot a clean backup due to backup_and_restore to backup-and-restore role\nname change.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 4, 'created': '2021-08-02 10:04:10.000000000', 'files': ['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup-and-restore/tasks/setup_cron_overcloud.yml', 'tripleo_ansible/roles/backup-and-restore/defaults/main.yml', 'tripleo_ansible/roles/backup-and-restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/284670489fbb10249fa256a858a476b370ed1b9c', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nNot a clean backup due to backup_and_restore to backup-and-restore role\nname change.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}]",0,803089,284670489fbb10249fa256a858a476b370ed1b9c,15,7,4,32968,,,0,"Allow for cron programming of backups

Normally, backups are not done interactively, but during nights or
weekends. This patch introduces the capacity of introducing in an easy
way cron programming that will execute backups in predictable intervals.

Not a clean backup due to backup_and_restore to backup-and-restore role
name change.

Closes-Bug: #1935675

Change-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa
(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/89/803089/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_overcloud.yml']",5,e30dfb664dd7f5ba605faded1505c9132c774e53,change-803089-3,"--- # Copyright 2021 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # Program cron tasks - name: Program a backup cron task for the overcloud lineinfile: path: /etc/cron.d/overcloud-backup regexp: ""bash -c"" line: ""{{ tripleo_backup_and_restore_cron }} {{ tripleo_backup_and_restore_cron_user }} \ bash -c 'source /home/stack/stackrc && /usr/bin/openstack overcloud backup \ {{ tripleo_backup_and_restore_cron_extra }} > /tmp/overcloud-backup.log'"" create: yes ",,198,0
openstack%2Ftripleo-ansible~stable%2Fvictoria~I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,openstack/tripleo-ansible,stable/victoria,I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,Allow for cron programming of backups,MERGED,2021-07-22 11:02:08.000000000,2021-08-03 02:31:56.000000000,2021-08-03 02:31:56.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 23181}, {'_account_id': 32728}]","[{'number': 1, 'created': '2021-07-22 11:02:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/06e17b8066e10f6ac593024f6693f12bd2954e86', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 2, 'created': '2021-07-23 10:19:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/bee61c6f9f3eb449c9bff3c079dbcf1afa7cb059', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 3, 'created': '2021-08-02 08:29:26.000000000', 'files': ['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_overcloud.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/af49b11cd8f5ea5dc51477490c78155b24bdc194', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}]",6,801733,af49b11cd8f5ea5dc51477490c78155b24bdc194,21,7,3,32968,,,0,"Allow for cron programming of backups

Normally, backups are not done interactively, but during nights or
weekends. This patch introduces the capacity of introducing in an easy
way cron programming that will execute backups in predictable intervals.

Closes-Bug: #1935675

Change-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa
(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/33/801733/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_overcloud.yml']",5,06e17b8066e10f6ac593024f6693f12bd2954e86,change-801733-2,"--- # Copyright 2021 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # Program cron tasks - name: Program a backup cron task for the overcloud lineinfile: path: /etc/cron.d/overcloud-backup regexp: ""bash -c"" line: ""{{ tripleo_backup_and_restore_cron }} {{ tripleo_backup_and_restore_cron_user }} bash -c 'source /home/stack/stackrc && /usr/bin/openstack overcloud backup {{ tripleo_backup_and_restore_cron_extra }} > /tmp/overcloud-backup.log'"" create: yes ",,104,0
openstack%2Ftripleo-ansible~stable%2Fussuri~I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,openstack/tripleo-ansible,stable/ussuri,I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,Allow for cron programming of backups,MERGED,2021-07-22 11:03:12.000000000,2021-08-03 02:31:54.000000000,2021-08-03 02:31:54.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 23181}, {'_account_id': 32728}]","[{'number': 1, 'created': '2021-07-22 11:03:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3b4b7c0dc9bf29f591d8c8129d105a6b1d3c6813', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 2, 'created': '2021-08-02 08:23:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/6cf0ea43ebb7de8aa06a88dc18e295b9b5d8e348', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 3, 'created': '2021-08-02 08:30:07.000000000', 'files': ['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_overcloud.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/625fa2653931a14c4380f64b1d957547fa982603', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}]",5,801734,625fa2653931a14c4380f64b1d957547fa982603,17,7,3,32968,,,0,"Allow for cron programming of backups

Normally, backups are not done interactively, but during nights or
weekends. This patch introduces the capacity of introducing in an easy
way cron programming that will execute backups in predictable intervals.

Closes-Bug: #1935675

Change-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa
(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/34/801734/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_overcloud.yml']",5,3b4b7c0dc9bf29f591d8c8129d105a6b1d3c6813,change-801733-2-stable/ussuri,"--- # Copyright 2021 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # Program cron tasks - name: Program a backup cron task for the overcloud lineinfile: path: /etc/cron.d/overcloud-backup regexp: ""bash -c"" line: ""{{ tripleo_backup_and_restore_cron }} {{ tripleo_backup_and_restore_cron_user }} bash -c 'source /home/stack/stackrc && /usr/bin/openstack overcloud backup {{ tripleo_backup_and_restore_cron_extra }} > /tmp/overcloud-backup.log'"" create: yes ",,110,0
openstack%2Ftripleo-ansible~stable%2Fwallaby~I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,openstack/tripleo-ansible,stable/wallaby,I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa,Allow for cron programming of backups,MERGED,2021-07-22 10:56:16.000000000,2021-08-03 02:31:52.000000000,2021-08-03 02:31:52.000000000,"[{'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-22 10:56:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8d802dd7d4abe43cfa96aea11860ee1a3d32e091', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 2, 'created': '2021-07-22 11:00:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8d61fa166aa727e0b09f838f31ceb7b7cd908db3', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nNot a clean backup due to a small conflict with the variables file.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}, {'number': 3, 'created': '2021-08-02 08:14:08.000000000', 'files': ['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_overcloud.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3335ef972b39bb12be78de8ba372d521749bd636', 'message': 'Allow for cron programming of backups\n\nNormally, backups are not done interactively, but during nights or\nweekends. This patch introduces the capacity of introducing in an easy\nway cron programming that will execute backups in predictable intervals.\n\nNot a clean backup due to a small conflict with the variables file.\n\nCloses-Bug: #1935675\n\nChange-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa\n(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)\n'}]",2,801732,3335ef972b39bb12be78de8ba372d521749bd636,25,4,3,32968,,,0,"Allow for cron programming of backups

Normally, backups are not done interactively, but during nights or
weekends. This patch introduces the capacity of introducing in an easy
way cron programming that will execute backups in predictable intervals.

Not a clean backup due to a small conflict with the variables file.

Closes-Bug: #1935675

Change-Id: I86b3fb2c3d846bcd56859e0d572f1fe4d5e148fa
(cherry picked from commit 482545b07c8a92767b39a94320d445927626be56)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/32/801732/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/playbooks/cli-overcloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_undercloud.yml', 'tripleo_ansible/playbooks/cli-undercloud-backup-cron.yaml', 'tripleo_ansible/roles/backup_and_restore/tasks/setup_cron_overcloud.yml']",5,8d802dd7d4abe43cfa96aea11860ee1a3d32e091,change-801732-2,"--- # Copyright 2021 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # Program cron tasks - name: Program a backup cron task for the overcloud lineinfile: path: /etc/cron.d/overcloud-backup regexp: ""bash -c"" line: ""{{ tripleo_backup_and_restore_cron }} {{ tripleo_backup_and_restore_cron_user }} bash -c 'source /home/stack/stackrc && /usr/bin/openstack overcloud backup {{ tripleo_backup_and_restore_cron_extra }} > /tmp/overcloud-backup.log'"" create: yes ",,107,0
openstack%2Ftripleo-ansible~stable%2Ftrain~Ib6140c8991469c950fd7e1b323c614103394e3f1,openstack/tripleo-ansible,stable/train,Ib6140c8991469c950fd7e1b323c614103394e3f1,tripleo-kernel: prevent reboot when TSX flag was added,MERGED,2021-07-30 13:41:22.000000000,2021-08-03 02:31:50.000000000,2021-08-03 02:31:50.000000000,"[{'_account_id': 6816}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 13:41:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/dae904f255380cf3c7b7249e5480f4e35a105788', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n(cherry picked from commit c97ce60fd8153553c807bf9873527b854c517f1d)\n(cherry picked from commit 080cf00f82392bb9f8b515e88972bdff4621137e)\n""}, {'number': 2, 'created': '2021-07-30 13:42:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/a2c298c8b66d8ea2d942aeb724e470c1ad933a0a', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n(cherry picked from commit c97ce60fd8153553c807bf9873527b854c517f1d)\n(cherry picked from commit 080cf00f82392bb9f8b515e88972bdff4621137e)\n""}, {'number': 3, 'created': '2021-07-30 14:08:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/fd181edb2a0ba216a823dc1d9fc813ed74ab831d', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n(cherry picked from commit 601b607d7ea033c1ac09a68e7f1b109ec52a4b04)\n(cherry picked from commit ee6cf0cb2662645aaa428cf79298ac6ba5454c1d)\n""}, {'number': 4, 'created': '2021-07-30 14:10:27.000000000', 'files': ['tripleo_ansible/roles/tripleo-kernel/tasks/kernelargs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/70d830856e101081c3a77fb93c4a46c8264b1169', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)\n(cherry picked from commit 601b607d7ea033c1ac09a68e7f1b109ec52a4b04)\n(cherry picked from commit ee6cf0cb2662645aaa428cf79298ac6ba5454c1d)\n""}]",1,803022,70d830856e101081c3a77fb93c4a46c8264b1169,16,12,4,27419,,,0,"tripleo-kernel: prevent reboot when TSX flag was added

During the 16.2 upgrade path, we enforce the inclusion of tsx flag by
operators. If there was already kernelargs present, the node won't get
rebooted, but if it's a new KernelArgs, the node will get rebooted as
per the related bug.

We want to prevent the unexpected reboot of nodes with workload when
the TSX flag was added.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1975240
Change-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1
(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)
(cherry picked from commit c647167f9d344b12022bce1677d4ef89930d6830)
(cherry picked from commit 601b607d7ea033c1ac09a68e7f1b109ec52a4b04)
(cherry picked from commit ee6cf0cb2662645aaa428cf79298ac6ba5454c1d)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/22/803022/4 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'],1,dae904f255380cf3c7b7249e5480f4e35a105788,,"<<<<<<< HEAD (7045d9 Merge ""Use serial or parallel execution depending on the kin) ======= --- # Copyright 2019 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. - name: Get the command line args of the node command: cat /proc/cmdline register: cmdline - name: TSX KernelArgs compute node reboot prevention when: - '""nova_libvirt"" in groups' block: - name: Check if node has a nova.conf stat: path: /var/lib/config-data/puppet-generated/nova_libvirt/etc/nova/nova.conf register: nova_conf_check - name: Enabling defer_reboot when TSX was added or appended when: - nova_conf_check.stat.exists - tripleo_kernel_args is regex(""^[\s]*tsx=[^\s]+[\s]*$"") block: - name: Warn operator about workload protection debug: msg: | Automated reboot for this node has been defered because it is already provisionned. Please schedule a manual reboot after this deployment is completed. - name: Setting defer reboot fact set_fact: tripleo_kernel_defer_reboot: true - name: Check if the kernelargs entry is already present in the file replace: regexp: TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS dest: /etc/default/grub replace: '' check_mode: true register: grub_file_entry_check # Kernel Args Configuration - block: # Leapp does not recognise grun entries starting other than GRUB # It results wrong formatting of entries in file /etc/default/grub # In order to fix it for FFU (queens to train), TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS has been renamed # Ensure the fresh deployment is also alinged with the same name - name: Delete older name TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS entries if present lineinfile: dest: /etc/default/grub regexp: 'TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS' state: absent - name: Ensure the kernel args ( {{ tripleo_kernel_args }} ) is present as GRUB_TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS lineinfile: dest: /etc/default/grub regexp: '^GRUB_TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS.*' insertafter: '^GRUB_CMDLINE_LINUX.*' line: 'GRUB_TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS="" {{ tripleo_kernel_args }} ""' - name: Add GRUB_TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS to the GRUB_CMDLINE_LINUX parameter lineinfile: dest: /etc/default/grub line: 'GRUB_CMDLINE_LINUX=""${GRUB_CMDLINE_LINUX:+$GRUB_CMDLINE_LINUX }${GRUB_TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS}""' insertafter: '^GRUB_TRIPLEO_HEAT_TEMPLATE_KERNEL_ARGS.*' - name: Check grub config paths stat: path: ""{{ item }}"" register: grub_stat loop: - /boot/efi/EFI/BOOT - /boot/efi/EFI/redhat - /boot/efi/EFI/centos - /boot/efi/EFI/fedora - name: Generate grub config command: ""grub2-mkconfig -o /boot/grub2/grub.cfg"" - name: Generate EFI grub config command: ""grub2-mkconfig -o {{ item.stat.path }}/grub.cfg"" when: item.stat.exists|bool loop: ""{{ grub_stat.results }}"" - name: Copy grubenv to EFI directory copy: remote_src: true src: /boot/grub2/grubenv dest: ""{{ item.stat.path }}/grubenv"" when: item.stat.exists|bool loop: ""{{ grub_stat.results }}"" - name: Set reboot required fact set_fact: reboot_required: true become: true when: - cmdline.stdout_lines is defined - tripleo_kernel_args|string - tripleo_kernel_args not in cmdline.stdout_lines[0] # Apply DPDK workarounds before reboot - name: Apply DPDK workarounds include_role: name: tripleo_ovs_dpdk tasks_from: workarounds.yml when: reboot_required is defined and reboot_required # Kernel modules loading - name: Load type1 IOMMU driver for VFIO on boot import_role: name: tripleo_module_load vars: modules: - name: vfio_iommu_type1 when: tripleo_kernel_args is search(""iommu"") - name: Reboot block when: - reboot_required is defined and reboot_required - not tripleo_kernel_defer_reboot|bool block: - name: Reboot tasks include_tasks: reboot.yaml when: - grub_file_entry_check is not changed - name: Skipping reboot for deployed node debug: msg: ""Reboot is skipped for kernel arg change, user has to plan the reboot with migration and downtime"" when: - grub_file_entry_check is changed >>>>>>> CHANGE (080cf0 tripleo-kernel: prevent reboot when TSX flag was added) ",,141,0
openstack%2Fopenstack-helm-images~master~I729dafe75cadf3699561380984eb53c670a91cec,openstack/openstack-helm-images,master,I729dafe75cadf3699561380984eb53c670a91cec,Fix periodic pipeline and run Ussuri test deployments,MERGED,2021-08-02 17:39:48.000000000,2021-08-03 02:23:21.000000000,2021-08-03 02:17:44.000000000,"[{'_account_id': 8898}, {'_account_id': 21420}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 17:39:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/a78a965975a414ef53cfdd4c36daf71d1681bede', 'message': 'Fix periodic pipeline and run ussuri test deployments\n\nChange-Id: I729dafe75cadf3699561380984eb53c670a91cec\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2021-08-02 19:07:32.000000000', 'files': ['zuul.d/ospurge.yaml', 'zuul.d/libvirt.yaml', 'zuul.d/base.yaml', 'zuul.d/openstack-loci.yaml', 'zuul.d/minikube-aio.yaml', 'zuul.d/mariadb.yaml', 'zuul.d/openvswitch.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/5d914dedf92d3bcef76431a9fe37cfd84c28c892', 'message': 'Fix periodic pipeline and run Ussuri test deployments\n\nChange-Id: I729dafe75cadf3699561380984eb53c670a91cec\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,803239,5d914dedf92d3bcef76431a9fe37cfd84c28c892,9,3,2,8863,,,0,"Fix periodic pipeline and run Ussuri test deployments

Change-Id: I729dafe75cadf3699561380984eb53c670a91cec
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/39/803239/2 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/ospurge.yaml', 'zuul.d/libvirt.yaml', 'zuul.d/base.yaml', 'zuul.d/openstack-loci.yaml', 'zuul.d/minikube-aio.yaml', 'zuul.d/mariadb.yaml', 'zuul.d/openvswitch.yaml']",7,a78a965975a414ef53cfdd4c36daf71d1681bede,, - name: openstack-helm-images-compute-kit-ussuri-ubuntu_bionic - name: openstack-helm-images-compute-kit-victoria-ubuntu_focal - name: openstack-helm-images-compute-kit-wallaby-ubuntu_focal, - name: openstack-helm-images-compute-kit-stein-ubuntu_bionic,89,8
openstack%2Fopenstack-helm-images~master~Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8,openstack/openstack-helm-images,master,Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8,Added Victoria & Wallaby images,MERGED,2021-04-16 12:30:54.000000000,2021-08-03 02:08:50.000000000,2021-08-03 02:03:19.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 17440}, {'_account_id': 18250}, {'_account_id': 18511}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-04-16 12:30:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/03abbd3600d0de489d8813c9ff031b444cbe7a8c', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 2, 'created': '2021-04-16 12:43:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/f5779f5c2ff621aa28b30c6def8784bcf2dfbab0', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 3, 'created': '2021-04-26 08:53:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/a51ee13a21d654986d5b7e1dff962eeca07636cc', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 4, 'created': '2021-04-26 09:22:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/01519fc44b9c9d793de656a5b0202fa4d010f9d4', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 5, 'created': '2021-04-26 12:03:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/013ce2b7b3ca2f6d00e442147b044d8ba5c22b50', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 6, 'created': '2021-05-14 18:40:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/27eabbb02354eca1045fc3efd822ef52d244f830', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 7, 'created': '2021-05-18 23:21:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/476a6b0d6053d8ff61589a1eaa13301c9fbad80a', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 8, 'created': '2021-06-12 21:49:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/5ab7009ff7a564b188dd562ccc6b491fc00ef84c', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 9, 'created': '2021-07-29 13:46:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/38f2dd8b996ac0ca6ee810f2afa8f4d18d3c89a8', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 10, 'created': '2021-07-29 17:42:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/d1d4e09ef74fb5dd337446c97920b939a5e8f854', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 11, 'created': '2021-07-29 22:28:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/dd3937793c690c604b3ff2957cc2bded77ecd64e', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\n""}, {'number': 12, 'created': '2021-07-30 03:21:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/faec9a8e6a538bc0fb0b8dbdc80ec191d71cbf9b', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nCo-Authored-By: Andrii Ostapenko <andrii.ostapenko@att.com>\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n""}, {'number': 13, 'created': '2021-07-30 03:24:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/e4c57d73734a582790a1fdd7a3af1eada9452b89', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nCo-Authored-By: Andrii Ostapenko <andrii.ostapenko@att.com>\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n""}, {'number': 14, 'created': '2021-07-30 04:13:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/990ad1e29b77885c6bd3d469affc2550080f8cad', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nDepends-On: https://review.opendev.org/802984\nCo-Authored-By: Andrii Ostapenko <andrii.ostapenko@att.com>\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n""}, {'number': 15, 'created': '2021-07-30 04:16:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/e1016dd986d33f0e739c073b242e36f0e405de03', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nDepends-On: https://review.opendev.org/802984\nCo-Authored-By: Andrii Ostapenko <andrii.ostapenko@att.com>\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n""}, {'number': 16, 'created': '2021-07-30 04:26:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/0cbda3d9c457bd821c9c3d0f7af73594d9a0d614', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nDepends-On: https://review.opendev.org/802984\nCo-Authored-By: Andrii Ostapenko <andrii.ostapenko@att.com>\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n""}, {'number': 17, 'created': '2021-07-31 03:13:45.000000000', 'files': ['openstack/loci/build-victoria.sh', 'openstack/loci/build-wallaby.sh', 'zuul.d/base.yaml', 'zuul.d/openstack-loci.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/e1a72a7cfa278f03ba53f70e2ac3b7fc488394dc', 'message': ""Added Victoria & Wallaby images\n\nThis patch adds the new release images but drops anything that's not\nmaintained anymore.\n\nDepends-On: https://review.opendev.org/802920\nDepends-On: https://review.opendev.org/802984\nDepends-On: https://review.opendev.org/803095\nCo-Authored-By: Andrii Ostapenko <andrii.ostapenko@att.com>\nChange-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n""}]",17,786637,e1a72a7cfa278f03ba53f70e2ac3b7fc488394dc,89,9,17,1004,,,0,"Added Victoria & Wallaby images

This patch adds the new release images but drops anything that's not
maintained anymore.

Depends-On: https://review.opendev.org/802920
Depends-On: https://review.opendev.org/802984
Depends-On: https://review.opendev.org/803095
Co-Authored-By: Andrii Ostapenko <andrii.ostapenko@att.com>
Change-Id: Id05cee25dc5f6baee0bd1bdf8dcfb5a2707950b8
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/37/786637/17 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/loci/build-victoria.sh', 'openstack/loci/build-wallaby.sh', 'zuul.d/openstack-loci.yaml']",3,03abbd3600d0de489d8813c9ff031b444cbe7a8c,victoria-wallaby-support," - openstack-helm-images-build-openstack-loci-victoria-ubuntu_bionic - openstack-helm-images-build-openstack-loci-wallaby-ubuntu_bionic - openstack-helm-images-upload-openstack-loci-victoria-ubuntu_bionic - openstack-helm-images-upload-openstack-loci-wallaby-ubuntu_bionic - openstack-helm-images-promote-openstack-loci-victoria-ubuntu_bionic - openstack-helm-images-promote-openstack-loci-wallaby-ubuntu_bionic########### # WALLABY # ########### - job: name: openstack-helm-images-build-openstack-loci-wallaby-ubuntu_focal description: Build LOCI wallaby focal images parent: openstack-helm-images-build-openstack-loci-master vars: &build_wallaby_focal_images currentdate: ""{{ now(utc=True,fmt='%Y%m%d') }}"" branchname: ""stable/wallaby"" shortbranchname: ""wallaby"" distroname: ""ubuntu_focal"" from: ""docker.io/ubuntu:18.04"" python3: ""yes"" wheels_location: ""http://172.17.0.1:8080/wheels.tar.gz"" base_repository: ""base"" ceph_repo: ""deb https://download.ceph.com/debian-octopus/ focal main"" ceph_key: ""https://download.ceph.com/keys/release.asc"" base_docker_image: - <<: *base_image prep_docker_images: - <<: *prep_requirements_project docker_images: - <<: *requirements_project - <<: *keystone_project - <<: *glance_project - <<: *cinder_project - <<: *nova_project - <<: *ironic_project - <<: *neutron_project - <<: *horizon_project - <<: *heat_project - <<: *barbican_project - <<: *placement_project - <<: *monasca_api_project - <<: *watcher_project - <<: *cyborg_project - job: name: openstack-helm-images-upload-openstack-loci-wallaby-ubuntu_focal parent: openstack-helm-images-upload-openstack-loci-master description: Build and upload LOCI wallaby focal images vars: *build_wallaby_focal_images - job: name: openstack-helm-images-promote-openstack-loci-wallaby-ubuntu_focal parent: openstack-helm-images-promote-openstack-loci-master description: Promote previously published LOCI wallaby focal images vars: *build_wallaby_focal_images ############ # VICTORIA # ############ - job: name: openstack-helm-images-build-openstack-loci-victoria-ubuntu_focal description: Build LOCI victoria focal images parent: openstack-helm-images-build-openstack-loci-master vars: &build_victoria_focal_images currentdate: ""{{ now(utc=True,fmt='%Y%m%d') }}"" branchname: ""stable/victoria"" shortbranchname: ""victoria"" distroname: ""ubuntu_focal"" from: ""docker.io/ubuntu:18.04"" python3: ""yes"" wheels_location: ""http://172.17.0.1:8080/wheels.tar.gz"" base_repository: ""base"" ceph_repo: ""deb https://download.ceph.com/debian-octopus/ focal main"" ceph_key: ""https://download.ceph.com/keys/release.asc"" base_docker_image: - <<: *base_image prep_docker_images: - <<: *prep_requirements_project docker_images: - <<: *requirements_project - <<: *keystone_project - <<: *glance_project - <<: *cinder_project - <<: *nova_project - <<: *ironic_project - <<: *neutron_project - <<: *horizon_project - <<: *heat_project - <<: *barbican_project - <<: *placement_project - <<: *monasca_api_project - <<: *watcher_project - <<: *cyborg_project - job: name: openstack-helm-images-upload-openstack-loci-victoria-ubuntu_focal parent: openstack-helm-images-upload-openstack-loci-master description: Build and upload LOCI victoria focal images vars: *build_victoria_focal_images - job: name: openstack-helm-images-promote-openstack-loci-victoria-ubuntu_focal parent: openstack-helm-images-promote-openstack-loci-master description: Promote previously published LOCI victoria focal images vars: *build_victoria_focal_images ", - openstack-helm-images-build-openstack-loci-ocata-ubuntu_xenial - openstack-helm-images-build-openstack-loci-pike-ubuntu_xenial - openstack-helm-images-build-openstack-loci-queens-ubuntu_xenial - openstack-helm-images-build-openstack-loci-rocky-ubuntu_xenial - openstack-helm-images-build-openstack-loci-rocky-ubuntu_bionic - openstack-helm-images-build-openstack-loci-stein-ubuntu_bionic - openstack-helm-images-upload-openstack-loci-ocata-ubuntu_xenial - openstack-helm-images-upload-openstack-loci-pike-ubuntu_xenial - openstack-helm-images-upload-openstack-loci-queens-ubuntu_xenial - openstack-helm-images-upload-openstack-loci-rocky-ubuntu_xenial - openstack-helm-images-upload-openstack-loci-rocky-ubuntu_bionic - openstack-helm-images-upload-openstack-loci-stein-ubuntu_bionic - openstack-helm-images-promote-openstack-loci-ocata-ubuntu_xenial - openstack-helm-images-promote-openstack-loci-pike-ubuntu_xenial - openstack-helm-images-promote-openstack-loci-queens-ubuntu_xenial - openstack-helm-images-promote-openstack-loci-rocky-ubuntu_xenial - openstack-helm-images-promote-openstack-loci-rocky-ubuntu_bionic - openstack-helm-images-promote-openstack-loci-stein-ubuntu_bionic,158,18
openstack%2Fpython-adjutantclient~master~I7747c4ce8d95ce94e0750a3f964f0264fe491fce,openstack/python-adjutantclient,master,I7747c4ce8d95ce94e0750a3f964f0264fe491fce,Migrate from testr to stestr,MERGED,2021-06-25 11:37:32.000000000,2021-08-03 02:05:31.000000000,2021-08-03 02:05:31.000000000,"[{'_account_id': 10420}, {'_account_id': 22348}, {'_account_id': 22873}]","[{'number': 1, 'created': '2021-06-25 11:37:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-adjutantclient/commit/f7050259f1703aaf18b7e2abffe8ce0096d54790', 'message': 'Remove testr\n\n* Remove .testr.conf as there is no tests dir and updating .gitignore\n  and test-requirements.txt sccordingly\n* Use 3.18.0 as the minversion for tox and replace whitelist_externals\n  by allowlist_externals\n\nChange-Id: I7747c4ce8d95ce94e0750a3f964f0264fe491fce\n'}, {'number': 2, 'created': '2021-06-25 12:10:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-adjutantclient/commit/1732506c4c27e40f1e7fadc9797387c962546a12', 'message': 'Migrate from testr to stestr\n\nChange-Id: I7747c4ce8d95ce94e0750a3f964f0264fe491fce\n'}, {'number': 3, 'created': '2021-06-29 17:46:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-adjutantclient/commit/91963094292434a123e269129151d1fd97dfaebf', 'message': 'Migrate from testr to stestr\n\n* Replace .testr.conf by .stestr.conf for migration and update\n  .gitignore and test-requirements.txt file accordingly\n* Use py3 as the default runtime for tox and 3.18.0 as the\n  minversion for tox, replace whitelist_externals\n  by allowlist_externals\n* Add a new job, openstack-cover-jobs, to run the coverage in Zuul\n\nChange-Id: I7747c4ce8d95ce94e0750a3f964f0264fe491fce\n'}, {'number': 4, 'created': '2021-07-01 10:21:43.000000000', 'files': ['.gitignore', 'test-requirements.txt', '.testr.conf', 'tox.ini', '.stestr.conf'], 'web_link': 'https://opendev.org/openstack/python-adjutantclient/commit/20d234bc370056184a0885e6e6f735db056668a2', 'message': 'Migrate from testr to stestr\n\n* Replace .testr.conf by .stestr.conf for migration and update\n  .gitignore and test-requirements.txt file accordingly\n* Use py3 as the default runtime for tox and 3.18.0 as the\n  minversion for tox, replace whitelist_externals\n  by allowlist_externals\n\nChange-Id: I7747c4ce8d95ce94e0750a3f964f0264fe491fce\n'}]",4,798078,20d234bc370056184a0885e6e6f735db056668a2,18,3,4,33379,,,0,"Migrate from testr to stestr

* Replace .testr.conf by .stestr.conf for migration and update
  .gitignore and test-requirements.txt file accordingly
* Use py3 as the default runtime for tox and 3.18.0 as the
  minversion for tox, replace whitelist_externals
  by allowlist_externals

Change-Id: I7747c4ce8d95ce94e0750a3f964f0264fe491fce
",git fetch https://review.opendev.org/openstack/python-adjutantclient refs/changes/78/798078/4 && git format-patch -1 --stdout FETCH_HEAD,"['.gitignore', 'test-requirements.txt', '.testr.conf', 'tox.ini']",4,f7050259f1703aaf18b7e2abffe8ce0096d54790,,minversion = 3.18.0 envlist = py3allowlist_externals = find,minversion = 3.1 envlist = py38whitelist_externals = find,5,12
openstack%2Fopenstack-helm~master~Iee99d2fb5a67be6b638ac5b0139561c2bdd7a339,openstack/openstack-helm,master,Iee99d2fb5a67be6b638ac5b0139561c2bdd7a339,add new glance multi_backend support. The old glance_store.stores and store.default_store was be deprecated and remove form rocky. So this is a update for config file.,ABANDONED,2021-08-03 01:33:01.000000000,2021-08-03 01:59:57.000000000,,[],"[{'number': 1, 'created': '2021-08-03 01:33:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9dc22885a06a11710f4fa69ab00af7e68757d9b5', 'message': 'add new glance multi_backend support.\nThe old glance_store.stores and store.default_store was be deprecated and remove form rocky.\nSo this is a update for config file.\n\nChange-Id: Iee99d2fb5a67be6b638ac5b0139561c2bdd7a339\n'}, {'number': 2, 'created': '2021-08-03 01:54:04.000000000', 'files': ['glance/templates/job-storage-init.yaml', 'glance/templates/deployment-api.yaml', 'glance/templates/configmap-etc.yaml', 'glance/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/024fe21c8c378b7d969a055d4dd10920f885b511', 'message': 'add new glance multi_backend support.\nThe old glance_store.stores and store.default_store was be deprecated and remove form rocky.\nSo this is a update for config file.\n\nChange-Id: Iee99d2fb5a67be6b638ac5b0139561c2bdd7a339\n'}]",0,803298,024fe21c8c378b7d969a055d4dd10920f885b511,6,0,2,33182,,,0,"add new glance multi_backend support.
The old glance_store.stores and store.default_store was be deprecated and remove form rocky.
So this is a update for config file.

Change-Id: Iee99d2fb5a67be6b638ac5b0139561c2bdd7a339
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/98/803298/1 && git format-patch -1 --stdout FETCH_HEAD,"['glance/templates/job-storage-init.yaml', 'glance/templates/deployment-api.yaml', 'glance/templates/configmap-etc.yaml', 'glance/values.yaml']",4,9dc22885a06a11710f4fa69ab00af7e68757d9b5,multi_backends, glance_store: null default_rbd_store: default_swift_store: default_file_store: filesystem_store_datadir: /var/lib/glance/images [{{ .Values.conf.glance.default_swift_store.default_swift_reference }}], glance_store: filesystem_store_datadir: /var/lib/glance/images [{{ .Values.conf.glance.glance_store.default_swift_reference }}],25,22
openstack%2Fneutron~master~I0b2aae3c65259a44d3f7f968f1f79eb0601b2a96,openstack/neutron,master,I0b2aae3c65259a44d3f7f968f1f79eb0601b2a96,Make sure agent state report start before getting networks,ABANDONED,2019-05-05 08:47:33.000000000,2021-08-03 01:42:59.000000000,,"[{'_account_id': 5948}, {'_account_id': 9531}, {'_account_id': 9732}, {'_account_id': 12404}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 19956}, {'_account_id': 22348}, {'_account_id': 26622}]","[{'number': 1, 'created': '2019-05-05 08:47:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e33c77fe293b0e7c384a8ff04258813abc37b3c6', 'message': ""Make sure agent state report start before getting networks\n\nIf we have some networks(with dhcp enabled subnets) created, when\nwe want to create a new network nodes, the dhcp-agent hasn't\nstarted in that node. If we start dhcp-agent, sometimes the network\nresource won't be synced in this nodes, no network related ns and\ndnsmasq process created. The root cause is the function _report_state\nand sync_state are almost executed at the same time, if _report_state\nexecuted first, everything is fine, but if sync_state executed first,\nno network resource will be allocated.\n\nChange-Id: I0b2aae3c65259a44d3f7f968f1f79eb0601b2a96\n""}, {'number': 2, 'created': '2019-05-05 08:57:29.000000000', 'files': ['neutron/agent/dhcp/agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/7da8963c5139d77b5d92faa002d44745297d2e46', 'message': ""Make sure agent state report start before getting networks\n\nIf we have some networks(with dhcp enabled subnets) created, when\nwe want to create a new network nodes, the dhcp-agent hasn't\nstarted in that node. If we start dhcp-agent, sometimes the network\nresource won't be synced in this nodes, no network related ns and\ndnsmasq process created. The root cause is the function _report_state\nand sync_state are almost executed at the same time, if _report_state\nexecuted first, everything is fine, but if sync_state executed first,\nno network resource will be allocated.\n\nCloses-Bug: #1827771\nChange-Id: I0b2aae3c65259a44d3f7f968f1f79eb0601b2a96\n""}]",4,657214,7da8963c5139d77b5d92faa002d44745297d2e46,16,9,2,19956,,,0,"Make sure agent state report start before getting networks

If we have some networks(with dhcp enabled subnets) created, when
we want to create a new network nodes, the dhcp-agent hasn't
started in that node. If we start dhcp-agent, sometimes the network
resource won't be synced in this nodes, no network related ns and
dnsmasq process created. The root cause is the function _report_state
and sync_state are almost executed at the same time, if _report_state
executed first, everything is fine, but if sync_state executed first,
no network resource will be allocated.

Closes-Bug: #1827771
Change-Id: I0b2aae3c65259a44d3f7f968f1f79eb0601b2a96
",git fetch https://review.opendev.org/openstack/neutron refs/changes/14/657214/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/agent/dhcp/agent.py'],1,e33c77fe293b0e7c384a8ff04258813abc37b3c6,bug/1827771, self._report_state(),,1,0
openstack%2Fopenstack-helm~master~Iea4a246e161089ba0367da307df60574f0edcb01,openstack/openstack-helm,master,Iea4a246e161089ba0367da307df60574f0edcb01,fix some bug,ABANDONED,2021-08-03 01:37:29.000000000,2021-08-03 01:38:05.000000000,,[],"[{'number': 1, 'created': '2021-08-03 01:37:29.000000000', 'files': ['glance/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/24e2f955273095f914a5aa8157bd0717e549e586', 'message': 'fix some bug\n\nChange-Id: Iea4a246e161089ba0367da307df60574f0edcb01\n'}]",0,803299,24e2f955273095f914a5aa8157bd0717e549e586,2,0,1,33182,,,0,"fix some bug

Change-Id: Iea4a246e161089ba0367da307df60574f0edcb01
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/99/803299/1 && git format-patch -1 --stdout FETCH_HEAD,['glance/values.yaml'],1,24e2f955273095f914a5aa8157bd0717e549e586,glance_multi_filesystem, glance_store: default_backend:, glance_store: null,2,1
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,openstack/tripleo-heat-templates,stable/train,I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc,Make memcached port parameters globally available,MERGED,2021-08-02 13:26:21.000000000,2021-08-03 01:30:27.000000000,2021-08-03 01:30:27.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-02 13:26:21.000000000', 'files': ['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4bd2555d890aed15af589216b3589b3e1c8b565b', 'message': 'Make memcached port parameters globally available\n\nThe memcached_port parameter and the memcached_authtoken_port parameter\nare used in each api service. Because memcached and each api services\nare not always collocated, we should use global hieradata to ensure\nthe parameters defined in memcached service resource are propagated to\nall nodes in the deployment.\n\nChange-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc\n(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)\n'}]",0,803208,4bd2555d890aed15af589216b3589b3e1c8b565b,7,6,1,14250,,,0,"Make memcached port parameters globally available

The memcached_port parameter and the memcached_authtoken_port parameter
are used in each api service. Because memcached and each api services
are not always collocated, we should use global hieradata to ensure
the parameters defined in memcached service resource are propagated to
all nodes in the deployment.

Change-Id: I54d45bbb26a4a04cb3cf87b9bd8a2290998279fc
(cherry picked from commit a7d2386438d6d4a969ad67a2de58ac6c1ffa075a)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/08/803208/1 && git format-patch -1 --stdout FETCH_HEAD,"['environments/ssl/enable-memcached-tls.yaml', 'deployment/memcached/memcached-container-puppet.yaml']",2,4bd2555d890aed15af589216b3589b3e1c8b565b,," global_config_settings: # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. if: - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort}"," # NOTE: This config is necessary while there are still services # consuming Memcached that do not support TLS. Once all services # do support TLS, this config should be dropped. if: - enable_non_tls_port - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: 11211 - memcached_port: {get_param: MemcachedPort} memcached_authtoken_port: {get_param: MemcachedPort} -",10,13
openstack%2Ftripleo-heat-templates~master~If8f8745958157767ecebf30ec1e0fb7a7eb9bc5f,openstack/tripleo-heat-templates,master,If8f8745958157767ecebf30ec1e0fb7a7eb9bc5f,Tidy up lingering todo's,MERGED,2021-08-02 14:35:39.000000000,2021-08-03 01:30:24.000000000,2021-08-03 01:30:24.000000000,"[{'_account_id': 7353}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-08-02 14:35:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/841797736d861f4d652b7ed8d08a6410bc8d09d4', 'message': ""Tidy up lingering todo's\n\nA couple of lingering todo's here that can\nnow be removed. We don't need to cleanup\nthese directories anymore since we bind-mount\nthe correct directories into the container:\nhttps://bugs.launchpad.net/tripleo/+bug/1868934\n\nRelated: https://bugs.launchpad.net/tripleo/+bug/1868934\nChange-Id: If8f8745958157767ecebf30ec1e0fb7a7eb9bc5f\n""}, {'number': 2, 'created': '2021-08-02 14:54:15.000000000', 'files': ['deployment/ironic/ironic-inspector-container-puppet.yaml', 'deployment/ironic/ironic-conductor-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f684a93aa9b6db9ac3134320fc708524e27ff6c7', 'message': ""Tidy up lingering todo's\n\nA couple of lingering todo's here that can\nnow be removed. We don't need to cleanup\nthese directories anymore since we bind-mount\nthe correct directories into the container:\nhttps://bugs.launchpad.net/tripleo/+bug/1868934\n\nRelated: https://bugs.launchpad.net/tripleo/+bug/1868934\nChange-Id: If8f8745958157767ecebf30ec1e0fb7a7eb9bc5f\n""}]",2,803215,f684a93aa9b6db9ac3134320fc708524e27ff6c7,11,5,2,30073,,,0,"Tidy up lingering todo's

A couple of lingering todo's here that can
now be removed. We don't need to cleanup
these directories anymore since we bind-mount
the correct directories into the container:
https://bugs.launchpad.net/tripleo/+bug/1868934

Related: https://bugs.launchpad.net/tripleo/+bug/1868934
Change-Id: If8f8745958157767ecebf30ec1e0fb7a7eb9bc5f
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/15/803215/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ironic/ironic-inspector-container-puppet.yaml', 'deployment/ironic/ironic-conductor-container-puppet.yaml']",2,841797736d861f4d652b7ed8d08a6410bc8d09d4,clean_up_todos,, # TODO(emilien): remove the cleanup tasks after Ussuri # https://bugs.launchpad.net/tripleo/+bug/1868934 - name: Cleanup unnecessary container config-data block: &ironic_config_data_cleanup - name: Remove /var/lib/config-data/puppet-generated/ironic/var file: path: /var/lib/config-data/puppet-generated/ironic/var state: absent,0,16
openstack%2Fopenstack-helm-infra~master~I46da230abf822e0cc3553561fd779444439c34a7,openstack/openstack-helm-infra,master,I46da230abf822e0cc3553561fd779444439c34a7,namespace-config: Grant access to existing PSP,MERGED,2021-08-01 07:28:04.000000000,2021-08-03 00:46:16.000000000,2021-08-03 00:44:58.000000000,"[{'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 24816}, {'_account_id': 28275}, {'_account_id': 28778}]","[{'number': 1, 'created': '2021-08-01 07:28:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a9d156223a77086fd48d3da62980bb27fd282b5c', 'message': 'namespace-config: Grant access to existing PSP\n\nThis change updates the namespace-config chart to (optionally) create\nRBAC rules allowing service accounts in the namespace \'use\' access to an\nexisting Pod Security Policy in the cluster. The policy is specified as:\n\n    podSecurityPolicy:\n      existingPsp: name-of-existing-psp\n\nThis aligns with the PSP deprecation guidance provided to date [0],\nwhich suggests easing the transition to the ""PSP Replacement Policy"" by\nestablishing the standard PSPs (Restricted, Baseline, and Privileged),\nassigning a cluster-wide default, and binding more-permissive policies\nas needed in certain namespaces.\n\n[0] https://kubernetes.io/blog/2021/04/06/podsecuritypolicy-deprecation-past-present-and-future/\n\nChange-Id: I46da230abf822e0cc3553561fd779444439c34a7\n'}, {'number': 2, 'created': '2021-08-02 01:36:56.000000000', 'files': ['releasenotes/notes/namespace-config.yaml', 'namespace-config/templates/psp-rbac.yaml', 'namespace-config/Chart.yaml', 'namespace-config/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/3c4ebf017209396f85094eaeba7ec7c5fbf46a43', 'message': 'namespace-config: Grant access to existing PSP\n\nThis change updates the namespace-config chart to (optionally) create\nRBAC rules allowing service accounts in the namespace \'use\' access to an\nexisting Pod Security Policy in the cluster. The policy is specified as:\n\n    podSecurityPolicy:\n      existingPsp: name-of-existing-psp\n\nThis aligns with the PSP deprecation guidance provided to date [0],\nwhich suggests easing the transition to the ""PSP Replacement Policy"" by\nestablishing the standard PSPs (Restricted, Baseline, and Privileged),\nassigning a cluster-wide default, and binding more-permissive policies\nas needed in certain namespaces.\n\n[0] https://kubernetes.io/blog/2021/04/06/podsecuritypolicy-deprecation-past-present-and-future/\n\nChange-Id: I46da230abf822e0cc3553561fd779444439c34a7\n'}]",0,803114,3c4ebf017209396f85094eaeba7ec7c5fbf46a43,12,7,2,28719,,,0,"namespace-config: Grant access to existing PSP

This change updates the namespace-config chart to (optionally) create
RBAC rules allowing service accounts in the namespace 'use' access to an
existing Pod Security Policy in the cluster. The policy is specified as:

    podSecurityPolicy:
      existingPsp: name-of-existing-psp

This aligns with the PSP deprecation guidance provided to date [0],
which suggests easing the transition to the ""PSP Replacement Policy"" by
establishing the standard PSPs (Restricted, Baseline, and Privileged),
assigning a cluster-wide default, and binding more-permissive policies
as needed in certain namespaces.

[0] https://kubernetes.io/blog/2021/04/06/podsecuritypolicy-deprecation-past-present-and-future/

Change-Id: I46da230abf822e0cc3553561fd779444439c34a7
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/14/803114/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/namespace-config.yaml', 'namespace-config/Chart.yaml', 'namespace-config/templates/psp-rbac.yaml', 'namespace-config/values.yaml']",4,a9d156223a77086fd48d3da62980bb27fd282b5c,," podSecurityPolicy: # Optionally specify the name of an existing pod security policy. # If specified, a role and rolebinding will be created granting access for # service accounts in this namespace to use existingPsp. existingPsp: """"",,37,1
openstack%2Fopenstack-helm~master~I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2,openstack/openstack-helm,master,I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2,Add support for Victoria and Wallaby,MERGED,2021-07-30 03:18:59.000000000,2021-08-03 00:02:51.000000000,2021-08-02 23:59:30.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 23928}, {'_account_id': 24780}, {'_account_id': 30777}]","[{'number': 1, 'created': '2021-07-30 03:18:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a82236c04a1b6487790f3e9a2ed8cb06a7f65727', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2021-07-30 04:23:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/98033fac20e212f9fb9adf4b95612ea6892e0821', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2021-07-30 14:20:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/7f004798b45572736eb39aa977a4dfee26cf0337', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 4, 'created': '2021-07-30 14:28:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9754d1f191336a05aab61bcaf9ad505dfa346eed', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 5, 'created': '2021-07-30 14:47:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/1429b03053a7e39419db254df975ba5f738bb61a', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 6, 'created': '2021-07-30 17:03:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/db6a48d1c15d96374d7003a6451c1da38b8056ba', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 7, 'created': '2021-07-30 20:10:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b179481b13d99b2e8e0a90eebc0b936e8cff17fb', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 8, 'created': '2021-07-30 20:21:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/4d6bef8e27681a6f4ddf4f85566f35fd464afefc', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 9, 'created': '2021-07-31 03:22:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b8f5df0472eded7f78b34ca798074da42fd70ce4', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 10, 'created': '2021-07-31 03:24:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/63bb5041d35a1638641b3cfb9adc783fb9d8911a', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 11, 'created': '2021-07-31 16:58:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/886552df8edc111a018a7d0bc0ab4390e7a364f3', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 12, 'created': '2021-07-31 20:42:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d0199b17617ef370bfb62c6199556dca27ca9f09', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 13, 'created': '2021-07-31 23:09:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b1def43f6f05f9305230e292fa07649fc478c157', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 14, 'created': '2021-08-01 02:32:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/683f180b8d8b33f65ee066c89f444e3d2675956c', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 15, 'created': '2021-08-01 02:33:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a10434c78411e49bbafc80f4d229cb11e528adba', 'message': 'Add victoria and wallaby compute-kit and cinder jobs\n\nAlso disable compute agent list test for Wallaby since related API\nis removed https://review.opendev.org/c/openstack/nova/+/749309\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 16, 'created': '2021-08-02 15:46:07.000000000', 'files': ['releasenotes/notes/heat.yaml', 'heat/Chart.yaml', 'nova/templates/bin/_db-sync.sh.tpl', 'placement/values_overrides/victoria-ubuntu_focal.yaml', 'horizon/values_overrides/victoria-ubuntu_focal.yaml', 'nova/values_overrides/victoria.yaml', 'horizon/values_overrides/wallaby-ubuntu_focal.yaml', 'horizon/Chart.yaml', 'releasenotes/notes/neutron.yaml', 'zuul.d/jobs-openstack-helm.yaml', 'cinder/values_overrides/wallaby-ubuntu_focal.yaml', 'nova/values_overrides/wallaby.yaml', 'nova/values_overrides/wallaby-ubuntu_focal.yaml', 'barbican/Chart.yaml', 'cinder/Chart.yaml', 'glance/values_overrides/victoria-ubuntu_focal.yaml', 'nova/values_overrides/victoria-ubuntu_focal.yaml', 'neutron/values_overrides/victoria-ubuntu_focal.yaml', 'releasenotes/notes/cinder.yaml', 'releasenotes/notes/nova.yaml', 'keystone/values_overrides/victoria-ubuntu_focal.yaml', 'neutron/values_overrides/wallaby-ubuntu_focal.yaml', 'nova/templates/bin/_bootstrap.sh.tpl', 'releasenotes/notes/glance.yaml', 'heat/values_overrides/wallaby-ubuntu_focal.yaml', 'releasenotes/notes/placement.yaml', 'releasenotes/notes/keystone.yaml', 'barbican/values_overrides/victoria-ubuntu_focal.yaml', 'releasenotes/notes/horizon.yaml', 'neutron/Chart.yaml', 'nova/Chart.yaml', 'releasenotes/notes/barbican.yaml', 'glance/Chart.yaml', 'keystone/values_overrides/wallaby-ubuntu_focal.yaml', 'cinder/values_overrides/victoria-ubuntu_focal.yaml', 'nova/values.yaml', 'placement/Chart.yaml', 'barbican/values_overrides/wallaby-ubuntu_focal.yaml', 'placement/values_overrides/wallaby-ubuntu_focal.yaml', 'glance/values_overrides/wallaby-ubuntu_focal.yaml', 'keystone/Chart.yaml', 'tools/deployment/common/setup-client.sh', 'heat/values_overrides/victoria-ubuntu_focal.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/3ac3caa0138d44aa6031848d5b83802128a169b5', 'message': ""Add support for Victoria and Wallaby\n\nDefines compute kit and cinder jobs for new releases with\ncorresponding values overrides.\n\nDisables compute agent list test for Wallaby since related API\nis removed [0].\n\nSince Wallaby with switch of osc to sdk '--id auto' is no longer\ntreated specially in 'openstack flavor create'. The same behavior\ncan be achieved w/o specifying --id flag for flavor creation [1].\n\nStarting Wallaby 'nova-manage api_db version' returns init version\nfor empty database greater than 0 [2]. _db-sync.sh.tpl logic prior to\nthis commit does not work due to this. We need to either remove\n(done in current commit) or justify and alter previous logic.\n\n[0] https://review.opendev.org/749309\n[1] https://review.opendev.org/750151\n[2] https://opendev.org/openstack/nova/src/branch/stable/wallaby/nova/db/sqlalchemy/migration.py#L32\n\nChange-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n""}]",2,802984,3ac3caa0138d44aa6031848d5b83802128a169b5,47,7,16,8863,,,0,"Add support for Victoria and Wallaby

Defines compute kit and cinder jobs for new releases with
corresponding values overrides.

Disables compute agent list test for Wallaby since related API
is removed [0].

Since Wallaby with switch of osc to sdk '--id auto' is no longer
treated specially in 'openstack flavor create'. The same behavior
can be achieved w/o specifying --id flag for flavor creation [1].

Starting Wallaby 'nova-manage api_db version' returns init version
for empty database greater than 0 [2]. _db-sync.sh.tpl logic prior to
this commit does not work due to this. We need to either remove
(done in current commit) or justify and alter previous logic.

[0] https://review.opendev.org/749309
[1] https://review.opendev.org/750151
[2] https://opendev.org/openstack/nova/src/branch/stable/wallaby/nova/db/sqlalchemy/migration.py#L32

Change-Id: I361431d9aa8c1a06c5d59f479fb161ecd87e2ee2
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/84/802984/1 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/values_overrides/victoria-ubuntu_focal.yaml', 'neutron/values_overrides/wallaby-ubuntu_focal.yaml', 'placement/values_overrides/victoria-ubuntu_focal.yaml', 'horizon/values_overrides/victoria-ubuntu_focal.yaml', 'heat/values_overrides/wallaby-ubuntu_focal.yaml', 'horizon/values_overrides/wallaby-ubuntu_focal.yaml', 'barbican/values_overrides/victoria-ubuntu_focal.yaml', 'zuul.d/jobs-openstack-helm.yaml', 'cinder/values_overrides/wallaby-ubuntu_focal.yaml', 'keystone/values_overrides/wallaby-ubuntu_focal.yaml', 'cinder/values_overrides/victoria-ubuntu_focal.yaml', 'nova/values_overrides/wallaby-ubuntu_focal.yaml', 'glance/values_overrides/victoria-ubuntu_focal.yaml', 'nova/values_overrides/victoria-ubuntu_focal.yaml', 'barbican/values_overrides/wallaby-ubuntu_focal.yaml', 'neutron/values_overrides/victoria-ubuntu_focal.yaml', 'placement/values_overrides/wallaby-ubuntu_focal.yaml', 'glance/values_overrides/wallaby-ubuntu_focal.yaml', 'heat/values_overrides/victoria-ubuntu_focal.yaml']",19,a82236c04a1b6487790f3e9a2ed8cb06a7f65727,victoria-wallaby-support,"--- images: tags: bootstrap: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" db_init: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" db_drop: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" ks_user: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" ks_service: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" ks_endpoints: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" heat_db_sync: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" heat_api: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" heat_cfn: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" heat_cloudwatch: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" heat_engine: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" heat_engine_cleaner: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" heat_purge_deleted: ""docker.io/openstackhelm/heat:victoria-ubuntu_focal"" ... ",,344,0
openstack%2Ftripleo-docs~master~Id6ae287fe221089906264475cde02a62b4acd1e4,openstack/tripleo-docs,master,Id6ae287fe221089906264475cde02a62b4acd1e4,Adding the vDPA deployment guide,MERGED,2021-06-28 03:06:02.000000000,2021-08-02 23:23:45.000000000,2021-08-02 23:22:10.000000000,"[{'_account_id': 7144}, {'_account_id': 11604}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20733}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-28 03:06:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/97ed2767de3dc1b36dcf9cf5385c122cc78ae50c', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 2, 'created': '2021-06-28 12:27:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/484e2d2089e3c381f5a4f660a78155d6b05cba68', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 3, 'created': '2021-06-28 15:24:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/d0272cc87929582056c9cbb71923713823b82d0b', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 4, 'created': '2021-06-28 17:43:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/329f060b7aef09983594fa2d5b408ece75b0f687', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 5, 'created': '2021-06-28 18:04:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/66816eb6ec9572d40691907a5f79f6063bc0283f', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 6, 'created': '2021-06-29 17:50:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/0986fb403e92717ab7199ed08a06ec09890c719a', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 7, 'created': '2021-06-30 02:05:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/52d5d36a8fbd8ed2f175650ddd33153b7c0cda47', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 8, 'created': '2021-06-30 16:11:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/f60ee33837d989256fc127748989500d40bdfc61', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nRelated: https://bugzilla.redhat.com/1956297\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\n\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 9, 'created': '2021-07-07 16:52:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/15842a6f0622b163fa03e9f91cbf370bfde266ca', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nRelated: https://bugzilla.redhat.com/1956297\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\n\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 10, 'created': '2021-07-08 12:27:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/16a78f729bbb8b265b4385992564c332f31bc53c', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nRelated: https://bugzilla.redhat.com/1956297\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\n\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 11, 'created': '2021-07-13 09:12:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/32dfbe1b48b6fa922b818a969e88951d23920896', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nRelated: https://bugzilla.redhat.com/1956297\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\n\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 12, 'created': '2021-07-13 09:29:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/ab2ee7bef2fa06203576463f9b6bca5004682394', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nRelated: https://bugzilla.redhat.com/1956297\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\n\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}, {'number': 13, 'created': '2021-07-13 09:30:39.000000000', 'files': ['deploy-guide/source/features/index.rst', 'deploy-guide/source/features/vdpa_deployment.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/30c381394e13a25f22dc3e85b5e5f17f2c4c74b8', 'message': 'Adding the vDPA deployment guide\n\nAdding a deployment guide for vDPA\n\nRelated: https://bugzilla.redhat.com/1956297\nDepends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/\n\nChange-Id: Id6ae287fe221089906264475cde02a62b4acd1e4\n'}]",70,798237,30c381394e13a25f22dc3e85b5e5f17f2c4c74b8,47,7,13,27419,,,0,"Adding the vDPA deployment guide

Adding a deployment guide for vDPA

Related: https://bugzilla.redhat.com/1956297
Depends-On: https://review.opendev.org/c/openstack/tripleo-heat-templates/+/797529/

Change-Id: Id6ae287fe221089906264475cde02a62b4acd1e4
",git fetch https://review.opendev.org/openstack/tripleo-docs refs/changes/37/798237/1 && git format-patch -1 --stdout FETCH_HEAD,['deploy-guide/source/features/vdpa_deployment.rst'],1,97ed2767de3dc1b36dcf9cf5385c122cc78ae50c,vhost-vdpa,"Deploying with vDPA Support =============================== TripleO can deploy Overcloud nodes with vDPA support. A new role ``ComputeVdpa`` has been added to create a custom ``roles_data.yaml`` with composable vDPA role. vDPA is very similar to SR-IOV and leverages the same Openstack components. It's important to note that vDPA can't function without OVS Hardware Offload. Mellanox is the only NIC vendor currently supported with vDPA. Execute below command to create the ``roles_data.yaml``:: openstack overcloud roles generate -o roles_data.yaml Controller ComputeVdpa Once a roles file is created, the following changes are required: - Deploy Command - Parameters - Network Config Deploy Command ---------------- Deploy command should include the generated roles data file from the above command. Deploy command should also include the SR-IOV environment file to include the neutron-sriov-agent service. All the required parameters are also specified in this environment file. The parameters has to be configured according to the baremetal on which vDPA needs to be enabled. Also, vDPA requires mandatory kernel parameters to be set, like ``intel_iommu=on iommu=pt`` on Intel machines. In order to enable the configuration of kernel parametres to the host, host-config-pre-network environment file has to be added for the deploy command. Adding the following arguments to the ``openstack overcloud deploy`` command will do the trick:: openstack overcloud deploy --templates \ -r roles_data.yaml \ -e /usr/share/openstack-tripleo-heat-templates/environments/services/neutron-sriov.yaml \ -e /usr/share/openstack-tripleo-heat-templates/environments/host-config-and-reboot.yaml \ ... Parameters ---------- Unlike SR-IOV, vDPA devices shouldn't be added to to ``NovaPCIPassthrough`` and ``NeutronPhysicalDevMappings`` The parameter ``KernelArgs`` should be provided in the deployment environment file, with the set of kernel boot parameters to be applied on the ``ComputeSriov`` role where SR-IOV is enabled:: parameter_defaults: ComputeVdpaParameters: KernelArgs: ""default_hugepagesz=1GB hugepagesz=1G hugepages=64 intel_iommu=on iommu=pt"" It's also strongly recommended to to enable ``IsolCpusList`` and Hugepages on the vDPA role. Network Config -------------- vDPA supported network interfaces should be specified in the network config templates as sriov_pf type. It should also be under an OVS bridge with a ``link_mode`` set to ``switchdev`` Example:: - type: ovs_bridge name: br-tenant mtu: 9000 members: - type: sriov_pf name: p7p1 numvfs: 5 mtu: 9000 primary: true promisc: true use_dhcp: false link_mode: switchdev ",,82,0
openstack%2Ftripleo-heat-templates~master~I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f,openstack/tripleo-heat-templates,master,I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f,Use the Ansible role for tripleo-packages.,ABANDONED,2019-08-26 17:10:45.000000000,2021-08-02 23:13:34.000000000,,"[{'_account_id': 3153}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2019-08-26 17:10:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/662c2cf7de0c3a11fd83fece1714684a3446b3af', 'message': 'Use the Ansible role for tripleo-packages.\n\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\n'}, {'number': 2, 'created': '2019-09-04 23:18:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4b4a925bd98301cb14bac7472617a5992f12dc27', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 3, 'created': '2019-09-05 19:28:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d5ec8617918e4485ae60b879ac89c579ffc219e7', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 4, 'created': '2019-09-05 19:30:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7399ef2205e23fa7899f0cf2e0e27b7c54937f03', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 5, 'created': '2019-09-06 02:34:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c2d55a98a30f8ab8fed25fb37322748a41c378d6', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 6, 'created': '2019-09-06 20:29:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e7aa66f4ce841f96f4435884b827dcfb9e003e80', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 7, 'created': '2019-09-09 13:48:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a08e85585649027352c87a6445ab564ecd33fb2d', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 8, 'created': '2019-09-13 15:21:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/99825fb2b1f5b28733d3316690e700d71695d953', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 9, 'created': '2019-09-24 13:15:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4eaaf982707aa235694b12a9cb0dee0fc186577b', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 10, 'created': '2019-10-04 16:54:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f7f3ab74f711d5d61c3a88f9f8e1db3f03b3beee', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}, {'number': 11, 'created': '2020-01-15 20:35:42.000000000', 'files': ['sample-env-generator/standalone.yaml', 'sample-env-generator/undercloud-minion.yaml', 'overcloud-resource-registry-puppet.j2.yaml', 'deployment/tripleo-packages/tripleo-packages-baremetal-ansible.yaml', 'deployment/deprecated/tripleo-packages/tripleo-packages-baremetal-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a8523fffea32892cf8fd804833441c2d26acc7dc', 'message': 'Use the Ansible role for tripleo-packages.\n\nThis change includes the ansible role `tripleo-packages` and deprecates\nthe `tripleo-packages-baremetal-puppet.yaml` template.\n\nStory: 2006031\nTask: 34672\nDepends-On: Ib31212da20620b355f2fc196511f168804a008a4\nChange-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f\nSigned-off-by: ekultails <ekultails@gmail.com>\n'}]",6,678620,a8523fffea32892cf8fd804833441c2d26acc7dc,55,7,11,25877,,,0,"Use the Ansible role for tripleo-packages.

This change includes the ansible role `tripleo-packages` and deprecates
the `tripleo-packages-baremetal-puppet.yaml` template.

Story: 2006031
Task: 34672
Depends-On: Ib31212da20620b355f2fc196511f168804a008a4
Change-Id: I87d6d0a295cfb50b8ef7ff9390019384c6c7a25f
Signed-off-by: ekultails <ekultails@gmail.com>
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/20/678620/2 && git format-patch -1 --stdout FETCH_HEAD,"['sample-env-generator/standalone.yaml', 'sample-env-generator/undercloud-minion.yaml', 'deployment/deprecated/packages/tripleo-packages-baremetal-puppet.yaml', 'overcloud-resource-registry-puppet.j2.yaml', 'deployment/tripleo-packages/tripleo-packages-baremetal-ansible.yaml']",5,662c2cf7de0c3a11fd83fece1714684a3446b3af,THT2TA,"heat_template_version: rocky description: > TripleO Package installation settings parameters: ServiceData: default: {} description: Dictionary packing service data type: json ServiceNetMap: default: {} description: Mapping of service_name -> network name. Typically set via parameter_defaults in the resource registry. This mapping overrides those in ServiceNetMapDefaults. type: json DefaultPasswords: default: {} type: json RoleName: default: '' description: Role name on which the service is applied type: string RoleParameters: default: {} description: Parameters specific to the role type: json EndpointMap: default: {} description: Mapping of service endpoint -> protocol. Typically set via parameter_defaults in the resource registry. type: json EnablePackageInstall: default: 'false' description: Set to true to enable package installation at deploy time type: boolean FastForwardRepoType: default: 'tripleo-repos' type: string constraints: - allowed_values: ['tripleo-repos', 'custom-script'] FastForwardRepoArgs: default: {'tripleo_repos': {'ocata': '-b ocata current', 'pike': '-b pike current', 'queens': '-b queens current'}} type: json FastForwardCustomRepoScriptContent: default: | #!/bin/bash set -e echo ""If you use FastForwardRepoType 'custom-script' you have to provide the upgrade repo script content."" echo ""It will be installed as /root/ffu_upgrade_repo.sh on the node"" echo ""and passed the upstream name (ocata, pike, queens) of the release as first argument"" exit 1 type: string UpgradeLeappEnabled: description: Use Leapp for operating system upgrade type: boolean default: true UpgradeLeappDebug: description: Print debugging output when running Leapp type: boolean default: true UpgradeLeappDevelSkip: description: | Skip Leapp checks by setting env variables when running Leapp in development/testing. For example, LEAPP_DEVEL_SKIP_RHSM=1. type: string default: '' UpgradeLeappRebootTimeout: description: Timeout (seconds) for the OS upgrade phase via Leapp type: number default: 1800 UpgradeInitCommand: type: string description: | Command or script snippet to run on all overcloud nodes to initialize the upgrade process. E.g. a repository switch. default: '' UpgradeInitCommonCommand: type: string description: | Common commands required by the upgrades process. This should not normally be modified by the operator and is set and unset in the major-upgrade-composable-steps.yaml and major-upgrade-converge.yaml environment files. default: '' outputs: role_data: description: Role data for the TripleO package settings value: service_name: tripleo_packages config_settings: tripleo::packages::enable_install: {get_param: EnablePackageInstall} step_config: | include ::tripleo::packages upgrade_tasks: - name: Import TripleO packages role include_role: name: tripleo-packages tasks_from: upgrade.yml vars: tripleo_packages_upgrade_init_command: {get_param: UpgradeInitCommand} tripleo_packages_upgrade_init_common_command: {get_param: UpgradeInitCommonCommand} external_upgrade_tasks: - name: Import TripleO packages role include_role: name: tripleo-packages tasks_from: external_upgrade.yml update_tasks: - name: Import TripleO packages role include_role: name: tripleo-packages tasks_from: update.yml fast_forward_upgrade_tasks: - name: Import TripleO packages role include_role: name: tripleo-packages tasks_from: fast_forward_upgrade.yml vars: tripleo_packages_fast_forward_repo_type: {get_param: FastForwardRepoType} tripleo_packages_fast_forward_repo_args: {get_param: FastForwardRepoArgs} tripleo_packages_fast_forward_custom_repo_script_content: {get param: FastForwardCustomRepoScriptContent} fast_forward_post_upgrade_tasks: - name: Import TripleO packages role include_role: name: tripleo-packages tasks_from: fast_forward_post_upgrade.yml vars: tripleo_packages_fast_forward_repo_type: {get_param: FastForwardRepoType} tripleo_packages_fast_forward_repo_args: {get_param: FastForwardRepoArgs} tripleo_packages_fast_forward_custom_repo_script_content: {get param: FastForwardCustomRepoScriptContent} ",,134,3
openstack%2Fovsdbapp~master~I89c7bea2c95028c515d7cf573e99431676e1dcdd,openstack/ovsdbapp,master,I89c7bea2c95028c515d7cf573e99431676e1dcdd,"Improve ""OvsdbIdl.from_server"" method",MERGED,2021-04-16 09:34:53.000000000,2021-08-02 21:45:15.000000000,2021-08-02 21:43:58.000000000,"[{'_account_id': 5756}, {'_account_id': 8655}, {'_account_id': 11952}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-16 09:34:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/a4094ade8f6be2164c90081abeeacef982ad59d9', 'message': 'Improve ""OvsdbIdl.from_server"" method\n\nAllow other positional and key-worded arguments in the method\nsignature. That will allow to, for example, implement other child\nclasses ""from_server"" method without having an incompatible signature.\n\nThis patch also adds key-worded argument ""helper_tables"". If any,\nthe helper will only register the provided tables instead of registering\nall.\n\nChange-Id: I89c7bea2c95028c515d7cf573e99431676e1dcdd\nCloses-Bug: #1924716\n'}, {'number': 2, 'created': '2021-04-16 10:12:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/35d0772a0028bb8baba4c5955b33e5274725c740', 'message': 'Improve ""OvsdbIdl.from_server"" method\n\nAllow other positional and key-worded arguments in the method\nsignature. That will allow to, for example, implement other child\nclasses ""from_server"" method without having an incompatible signature.\nThe key-worded variables are passed to the class ""idl.Idl""\ninstantiation. Now ""probe_interval"" or ""leader_only"" can be passed to\n""idl.Idl.__init__"" method.\n\nThis patch also adds two new key-worded variables:\n- ""helper_tables"": the helper will only register the provided tables\n  instead of registering all.\n- ""helper"": a ""idl.SchemaHelper"" instance; if passed, the method won\'t\n  create the helper using the schema_name.\n\nChange-Id: I89c7bea2c95028c515d7cf573e99431676e1dcdd\nCloses-Bug: #1924716\n'}, {'number': 3, 'created': '2021-07-27 20:01:11.000000000', 'files': ['ovsdbapp/backend/ovs_idl/connection.py'], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/c8cb43eaa2a87bed1ac66571c3c9baaa0db3d578', 'message': 'Improve ""OvsdbIdl.from_server"" method\n\nAllow other positional and key-worded arguments in the method\nsignature. That will allow to, for example, implement other child\nclasses ""from_server"" method without having an incompatible signature.\nThe key-worded variables are passed to the class ""idl.Idl""\ninstantiation. Now ""probe_interval"" or ""leader_only"" can be passed to\n""idl.Idl.__init__"" method.\n\nThis patch also adds two new key-worded variables:\n- ""helper_tables"": the helper will only register the provided tables\n  instead of registering all.\n- ""helper"": a ""idl.SchemaHelper"" instance; if passed, the method won\'t\n  create the helper using the schema_name.\n\nChange-Id: I89c7bea2c95028c515d7cf573e99431676e1dcdd\nCloses-Bug: #1924716\n'}]",8,786609,c8cb43eaa2a87bed1ac66571c3c9baaa0db3d578,23,4,3,16688,,,0,"Improve ""OvsdbIdl.from_server"" method

Allow other positional and key-worded arguments in the method
signature. That will allow to, for example, implement other child
classes ""from_server"" method without having an incompatible signature.
The key-worded variables are passed to the class ""idl.Idl""
instantiation. Now ""probe_interval"" or ""leader_only"" can be passed to
""idl.Idl.__init__"" method.

This patch also adds two new key-worded variables:
- ""helper_tables"": the helper will only register the provided tables
  instead of registering all.
- ""helper"": a ""idl.SchemaHelper"" instance; if passed, the method won't
  create the helper using the schema_name.

Change-Id: I89c7bea2c95028c515d7cf573e99431676e1dcdd
Closes-Bug: #1924716
",git fetch https://review.opendev.org/openstack/ovsdbapp refs/changes/09/786609/3 && git format-patch -1 --stdout FETCH_HEAD,['ovsdbapp/backend/ovs_idl/connection.py'],1,a4094ade8f6be2164c90081abeeacef982ad59d9,bug/1924716," def from_server(cls, connection_string, schema_name, *args, helper_tables=None, **kwargs): if not helper_tables: helper.register_all() else: for table in helper_tables: helper.register_table(table) return cls(connection_string, helper, **kwargs)"," def from_server(cls, connection_string, schema_name): helper.register_all() return cls(connection_string, helper)",8,3
openstack%2Fmanila~stable%2Fvictoria~I5039b7adf563d926053b423a4cc6e175d3f1e5cf,openstack/manila,stable/victoria,I5039b7adf563d926053b423a4cc6e175d3f1e5cf,fixes  availability zone filter when creating a share from snapshot,MERGED,2021-07-06 04:39:02.000000000,2021-08-02 20:12:58.000000000,2021-08-02 20:11:37.000000000,"[{'_account_id': 9003}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 32531}]","[{'number': 1, 'created': '2021-07-06 04:39:02.000000000', 'files': ['manila/tests/api/v2/test_shares.py', 'manila/api/v1/shares.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/90241eb43fd9fa85ae3383f3e5af640e9911626b', 'message': ""fixes  availability zone filter when creating a share from snapshot\n\nFixes bug #1915706 that was discovered in  Manila UI.\nIssue is invalid input error being raised, even when\navailability_zone provided is the same, as parent share's.\nThe reason is availability_zone is name and source_share_az\nis id in the filter [1]. Now, regardless of availability_zone\nprovided is id or name, it will be always converted to a name.\nAnd if availability_zone is the same as parent share's\noperation will complete successfully.\n\n[1] https://github.com/openstack/manila/blob/2e27c71877fdb601ba90b44c3573d8e50e099042/manila/share/api.py#L200\n\nCloses-Bug: #1915706\nChange-Id: I5039b7adf563d926053b423a4cc6e175d3f1e5cf\n(cherry picked from commit 205f3d828d5f8afc002c32714e7c67db10dbfa53)\n(cherry picked from commit 9c723d0e44f10afeb9a0e80086eb1afd2680b2c6)\n""}]",0,799576,90241eb43fd9fa85ae3383f3e5af640e9911626b,14,4,1,16643,,,0,"fixes  availability zone filter when creating a share from snapshot

Fixes bug #1915706 that was discovered in  Manila UI.
Issue is invalid input error being raised, even when
availability_zone provided is the same, as parent share's.
The reason is availability_zone is name and source_share_az
is id in the filter [1]. Now, regardless of availability_zone
provided is id or name, it will be always converted to a name.
And if availability_zone is the same as parent share's
operation will complete successfully.

[1] https://github.com/openstack/manila/blob/2e27c71877fdb601ba90b44c3573d8e50e099042/manila/share/api.py#L200

Closes-Bug: #1915706
Change-Id: I5039b7adf563d926053b423a4cc6e175d3f1e5cf
(cherry picked from commit 205f3d828d5f8afc002c32714e7c67db10dbfa53)
(cherry picked from commit 9c723d0e44f10afeb9a0e80086eb1afd2680b2c6)
",git fetch https://review.opendev.org/openstack/manila refs/changes/76/799576/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/tests/api/v2/test_shares.py', 'manila/api/v1/shares.py']",2,90241eb43fd9fa85ae3383f3e5af640e9911626b,bug/1915706," availability_zone_db = db.availability_zone_get( context, availability_zone) availability_zone_id = availability_zone_db.id availability_zone = availability_zone_db.name availability_zone = db.availability_zone_get( context, sg_az_id).name 'availability_zone': availability_zone,"," availability_zone_id = db.availability_zone_get( context, availability_zone).id availability_zone_id = sg_az_id 'availability_zone': availability_zone_id,",16,8
openstack%2Fkolla-ansible~master~I9da331e007c25c4a760839c566831769a68507a9,openstack/kolla-ansible,master,I9da331e007c25c4a760839c566831769a68507a9,Fix incorrect config of linuxbridge multiple external networks,MERGED,2021-04-26 13:31:41.000000000,2021-08-02 20:08:29.000000000,2021-08-02 20:07:07.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-04-26 13:31:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/fd07cef88912ea1f73d7a82fd2ceab8b7e2ecbc3', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n'}, {'number': 2, 'created': '2021-07-20 13:52:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/922d9141dddd82640f42a722497ad8b96eed9ea1', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n'}, {'number': 3, 'created': '2021-07-22 08:52:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/2b8e18a308d7393610a9be30c1437655d4f65d9b', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n'}, {'number': 4, 'created': '2021-07-26 14:43:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/9c83040b3517daf5af00fa4a6b374014d7029ed4', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n'}, {'number': 5, 'created': '2021-07-27 09:11:53.000000000', 'files': ['releasenotes/notes/linux-bridge-multi-fe8576616fb7d373.yaml', 'ansible/roles/neutron/templates/ml2_conf.ini.j2', 'ansible/roles/neutron/templates/linuxbridge_agent.ini.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/24950b3894039d8f42ebaa6a6696d6a2e3d91b95', 'message': 'Fix incorrect config of linuxbridge multiple external networks\n\nmultiple external networks are supported by linuxbridge and OVS.\nCurrently the config template only works for OVS\n\nCloses-Bug: #1863935\nChange-Id: I9da331e007c25c4a760839c566831769a68507a9\n'}]",3,787996,24950b3894039d8f42ebaa6a6696d6a2e3d91b95,28,3,5,26285,,,0,"Fix incorrect config of linuxbridge multiple external networks

multiple external networks are supported by linuxbridge and OVS.
Currently the config template only works for OVS

Closes-Bug: #1863935
Change-Id: I9da331e007c25c4a760839c566831769a68507a9
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/96/787996/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/neutron/templates/linuxbridge_agent.ini.j2'],1,fd07cef88912ea1f73d7a82fd2ceab8b7e2ecbc3,bug/1863935,"{% if inventory_hostname in groups[""network""] or (computes_need_external_bridge | bool and inventory_hostname in groups[""compute""] ) %} physical_interface_mappings = {% for bridge in neutron_bridge_name.split(',') %}physnet{{ loop.index0 + 1 }}:{{ bridge }}{% if not loop.last %},{% endif %}{% endfor %} {% endif %}",physical_interface_mappings = physnet1:{{ neutron_external_interface }},3,1
openstack%2Fpuppet-tripleo~master~Id1340c45679d720cdf5ed9b5b15347d73cffc445,openstack/puppet-tripleo,master,Id1340c45679d720cdf5ed9b5b15347d73cffc445,Drop all non bundle implementations,MERGED,2021-06-25 13:18:23.000000000,2021-08-02 20:02:17.000000000,2021-08-02 20:02:17.000000000,"[{'_account_id': 6926}, {'_account_id': 14985}, {'_account_id': 21129}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-06-25 13:18:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/deb6504cda8bb020a09558dfc3c7b9b1b7c661f5', 'message': '[WIP] Drop all non bundle implementations\n\nWe dropped support for non-containerized HA stuff in queens,\nkeeping all these manifests around brings very little and probably\nslows each puppet invocation down a little bit.\n\nChange-Id: Id1340c45679d720cdf5ed9b5b15347d73cffc445\n'}, {'number': 2, 'created': '2021-06-28 14:56:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/6337fd02546dd265aaeda61baff74fa7774c8771', 'message': '[WIP] Drop all non bundle implementations\n\nWe dropped support for non-containerized HA stuff in queens,\nkeeping all these manifests around brings very little and probably\nslows each puppet invocation down a little bit.\n\nDepends-On: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2\n\nChange-Id: Id1340c45679d720cdf5ed9b5b15347d73cffc445\n'}, {'number': 3, 'created': '2021-06-29 06:47:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/e1caf77094321e498209890f0c5e8cae8bf47a3f', 'message': 'Drop all non bundle implementations\n\nWe dropped support for non-containerized HA stuff in queens,\nkeeping all these manifests around brings very little and probably\nslows each puppet invocation down a little bit.\n\nNote: this is only dropping the non-containerized HA manifests, the\ncontainerized HA manifests are being preserved.\n\nThere do not seem be other classes referencing these (besides the\nTHT dep-on):\n$ for i in \'profile::pacemaker::database::(mysql|redis)\' \'profile::pacemaker::cinder::(backup|volume)\' \'profile::pacemaker::haproxy\' \'profile::pacemaker::rabbitmq\'; do\n    grep -ir -P ""^[^#].*$i"" manifests\n  done\n\nmanifests/profile/pacemaker/database/mysql_bundle.pp:class tripleo::profile::pacemaker::database::mysql_bundle (\nmanifests/profile/pacemaker/database/redis_bundle.pp:class tripleo::profile::pacemaker::database::redis_bundle (\nmanifests/profile/pacemaker/cinder/backup_bundle.pp:class tripleo::profile::pacemaker::cinder::backup_bundle (\nmanifests/profile/pacemaker/cinder/volume_bundle.pp:class tripleo::profile::pacemaker::cinder::volume_bundle (\nmanifests/profile/pacemaker/haproxy_bundle.pp:class tripleo::profile::pacemaker::haproxy_bundle (\nmanifests/profile/pacemaker/haproxy_bundle.pp:  $haproxy_docker_image = hiera(\'tripleo::profile::pacemaker::haproxy::haproxy_docker_image\', undef),\nmanifests/profile/pacemaker/rabbitmq_bundle.pp:class tripleo::profile::pacemaker::rabbitmq_bundle (\n\nDepends-On: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2\n\nChange-Id: Id1340c45679d720cdf5ed9b5b15347d73cffc445\n'}, {'number': 4, 'created': '2021-07-21 12:50:00.000000000', 'files': ['manifests/profile/pacemaker/haproxy.pp', 'manifests/profile/pacemaker/rabbitmq.pp', 'manifests/profile/pacemaker/database/redis.pp', 'manifests/profile/pacemaker/cinder/volume.pp', 'manifests/profile/pacemaker/database/mysql.pp', 'manifests/profile/pacemaker/cinder/backup.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/b55ffb5b99e1ccf55b6f3a26b942426601703731', 'message': 'Drop all non bundle implementations\n\nWe dropped support for non-containerized HA stuff in queens,\nkeeping all these manifests around brings very little and probably\nslows each puppet invocation down a little bit.\n\nNote: this is only dropping the non-containerized HA manifests, the\ncontainerized HA manifests are being preserved.\n\nThere do not seem be other classes referencing these (besides the\nTHT dep-on):\n$ for i in \'profile::pacemaker::database::(mysql|redis)\' \'profile::pacemaker::cinder::(backup|volume)\' \'profile::pacemaker::haproxy\' \'profile::pacemaker::rabbitmq\'; do\n    grep -ir -P ""^[^#].*$i"" manifests\n  done\n\nmanifests/profile/pacemaker/database/mysql_bundle.pp:class tripleo::profile::pacemaker::database::mysql_bundle (\nmanifests/profile/pacemaker/database/redis_bundle.pp:class tripleo::profile::pacemaker::database::redis_bundle (\nmanifests/profile/pacemaker/cinder/backup_bundle.pp:class tripleo::profile::pacemaker::cinder::backup_bundle (\nmanifests/profile/pacemaker/cinder/volume_bundle.pp:class tripleo::profile::pacemaker::cinder::volume_bundle (\nmanifests/profile/pacemaker/haproxy_bundle.pp:class tripleo::profile::pacemaker::haproxy_bundle (\nmanifests/profile/pacemaker/haproxy_bundle.pp:  $haproxy_docker_image = hiera(\'tripleo::profile::pacemaker::haproxy::haproxy_docker_image\', undef),\nmanifests/profile/pacemaker/rabbitmq_bundle.pp:class tripleo::profile::pacemaker::rabbitmq_bundle (\n\nDepends-On: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2\n\nChange-Id: Id1340c45679d720cdf5ed9b5b15347d73cffc445\n'}]",2,798085,b55ffb5b99e1ccf55b6f3a26b942426601703731,28,5,4,20172,,,0,"Drop all non bundle implementations

We dropped support for non-containerized HA stuff in queens,
keeping all these manifests around brings very little and probably
slows each puppet invocation down a little bit.

Note: this is only dropping the non-containerized HA manifests, the
containerized HA manifests are being preserved.

There do not seem be other classes referencing these (besides the
THT dep-on):
$ for i in 'profile::pacemaker::database::(mysql|redis)' 'profile::pacemaker::cinder::(backup|volume)' 'profile::pacemaker::haproxy' 'profile::pacemaker::rabbitmq'; do
    grep -ir -P ""^[^#].*$i"" manifests
  done

manifests/profile/pacemaker/database/mysql_bundle.pp:class tripleo::profile::pacemaker::database::mysql_bundle (
manifests/profile/pacemaker/database/redis_bundle.pp:class tripleo::profile::pacemaker::database::redis_bundle (
manifests/profile/pacemaker/cinder/backup_bundle.pp:class tripleo::profile::pacemaker::cinder::backup_bundle (
manifests/profile/pacemaker/cinder/volume_bundle.pp:class tripleo::profile::pacemaker::cinder::volume_bundle (
manifests/profile/pacemaker/haproxy_bundle.pp:class tripleo::profile::pacemaker::haproxy_bundle (
manifests/profile/pacemaker/haproxy_bundle.pp:  $haproxy_docker_image = hiera('tripleo::profile::pacemaker::haproxy::haproxy_docker_image', undef),
manifests/profile/pacemaker/rabbitmq_bundle.pp:class tripleo::profile::pacemaker::rabbitmq_bundle (

Depends-On: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2

Change-Id: Id1340c45679d720cdf5ed9b5b15347d73cffc445
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/85/798085/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/pacemaker/haproxy.pp', 'manifests/profile/pacemaker/database/redis.pp', 'manifests/profile/pacemaker/rabbitmq.pp', 'manifests/profile/pacemaker/cinder/volume.pp', 'manifests/profile/pacemaker/database/mysql.pp', 'manifests/profile/pacemaker/cinder/backup.pp']",6,deb6504cda8bb020a09558dfc3c7b9b1b7c661f5,cleanup,,"# Copyright 2016 Red Hat, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # # == Class: tripleo::profile::pacemaker::cinder::backup # # Cinder Backup Pacemaker HA profile for tripleo # # === Parameters # # [*bootstrap_node*] # (Optional) The hostname of the node responsible for bootstrapping tasks # Defaults to hiera('cinder_backup_short_bootstrap_node_name') # # [*step*] # (Optional) The current step in deployment. See tripleo-heat-templates # for more details. # Defaults to hiera('step') # # [*pcs_tries*] # (Optional) The number of times pcs commands should be retried. # Defaults to hiera('pcs_tries', 20) # class tripleo::profile::pacemaker::cinder::backup ( $bootstrap_node = hiera('cinder_backup_short_bootstrap_node_name'), $step = Integer(hiera('step')), $pcs_tries = hiera('pcs_tries', 20), ) { Service <| tag == 'cinder::backup' |> { hasrestart => true, restart => '/bin/true', start => '/bin/true', stop => '/bin/true', } if $bootstrap_node and $::hostname == downcase($bootstrap_node) { $pacemaker_master = true } else { $pacemaker_master = false } include tripleo::profile::base::cinder::backup if $step >= 2 { pacemaker::property { 'cinder-backup-role-node-property': property => 'cinder-backup-role', value => true, tries => $pcs_tries, node => $::hostname, } } if $step >= 3 and $pacemaker_master and hiera('stack_action') == 'UPDATE' { Cinder_config<||> ~> tripleo::pacemaker::resource_restart_flag { ""${::cinder::params::backup_service}"": } } if $step >= 5 and $pacemaker_master { pacemaker::resource::service { $::cinder::params::backup_service : op_params => 'start timeout=200s stop timeout=200s', tries => $pcs_tries, location_rule => { resource_discovery => 'exclusive', score => 0, expression => ['cinder-backup-role eq true'], } } } } ",0,1144
openstack%2Frequirements~master~I676d8847e40b84aae73af19c7a5a5741c5c1d771,openstack/requirements,master,I676d8847e40b84aae73af19c7a5a5741c5c1d771,Updated from generate-constraints,MERGED,2021-08-02 06:25:10.000000000,2021-08-02 19:52:42.000000000,2021-08-02 19:51:25.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 06:25:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/473ee5e04f693d3e6413f3bd5f31a5b097be1b6f', 'message': 'Updated from generate-constraints\n\nChange-Id: I676d8847e40b84aae73af19c7a5a5741c5c1d771\n'}, {'number': 2, 'created': '2021-08-02 16:25:43.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/206539b2c05a9867a74ea4140060ba0c8ffa1bae', 'message': 'Updated from generate-constraints\n\nChange-Id: I676d8847e40b84aae73af19c7a5a5741c5c1d771\n'}]",0,803141,206539b2c05a9867a74ea4140060ba0c8ffa1bae,12,2,2,11131,,,0,"Updated from generate-constraints

Change-Id: I676d8847e40b84aae73af19c7a5a5741c5c1d771
",git fetch https://review.opendev.org/openstack/requirements refs/changes/41/803141/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,473ee5e04f693d3e6413f3bd5f31a5b097be1b6f,openstack/requirements/constraints/noclob,# generated using: tox -e generatenetworkx===2.5.1;python_version=='3.6' networkx===2.6.2;python_version=='3.8'XStatic-Angular===1.8.2.1scipy===1.7.1;python_version=='3.8'pkg_resources===0.0.0importlib-metadata===4.6.3WSME===0.11.0decorator===4.4.2;python_version=='3.6' decorator===5.0.9;python_version=='3.8'fasteners===0.16.3virtualenv===20.7.0,networkx===2.5.1XStatic-Angular===1.5.8.0scipy===1.7.0;python_version=='3.8'importlib-metadata===4.6.2WSME===0.10.1decorator===4.4.2fasteners===0.14.1virtualenv===20.6.0setuptools===57.4.0,12,9
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I8ab42f5dde132875c169db6e69b7d0db2a2b6cc4,openstack/tripleo-heat-templates,stable/train,I8ab42f5dde132875c169db6e69b7d0db2a2b6cc4,Remove libvirt package from overcloud nodes,MERGED,2021-07-15 10:50:26.000000000,2021-08-02 19:14:04.000000000,2021-08-02 19:14:04.000000000,"[{'_account_id': 6816}, {'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 33080}]","[{'number': 1, 'created': '2021-07-15 10:50:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/80cfd71baa34e30326a826b83099d12c584f3449', 'message': ""Remove libvirt package from overcloud nodes.\n\nNow that nova_libvirt is containerized, there is no need for having libvirt\ninstalled in the overcloud nodes. In fact, this causes issues when updating\nbetween Train releases, shutting down all the VMs as there is a miscomunication\nbetween the container's services and the host ones.\n\nThis patch uses the to_remove mechanism from leapp to remove the libvirt\npackage during the leapp upgrade as the Queens environment will contain\nthe package, and removing it at a previous stage could cause issues.\n\nChange-Id: I8ab42f5dde132875c169db6e69b7d0db2a2b6cc4\nRelated: rhbz#1963164\n""}, {'number': 2, 'created': '2021-07-28 13:25:43.000000000', 'files': ['environments/lifecycle/upgrade-prepare.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/92d7185c92026556b470e3db80989b53c3972daa', 'message': ""Remove libvirt package from overcloud nodes\n\nNow that nova_libvirt is containerized, there is no need\nto have libvirt installed in the overcloud nodes. In fact,\nif it is installed on the overcloud nodes it causes issues\nthe virtual machines on the host to shut down when doing\nan update on the train releases due to a miscomunication\nbetween the container's services and the host ones.\n\nThis patch uses the to_remove mechanism from leapp to remove\nthe libvirt package during the leapp upgrade. This ensures\nthat leapp removes the package during its process. This is\nthe least risky time to remove the package and should help\nsave some time during the leapp process.\n\nRelated: rhbz#1963164\n\nChange-Id: I8ab42f5dde132875c169db6e69b7d0db2a2b6cc4\n""}]",0,800912,92d7185c92026556b470e3db80989b53c3972daa,16,7,2,26343,,,0,"Remove libvirt package from overcloud nodes

Now that nova_libvirt is containerized, there is no need
to have libvirt installed in the overcloud nodes. In fact,
if it is installed on the overcloud nodes it causes issues
the virtual machines on the host to shut down when doing
an update on the train releases due to a miscomunication
between the container's services and the host ones.

This patch uses the to_remove mechanism from leapp to remove
the libvirt package during the leapp upgrade. This ensures
that leapp removes the package during its process. This is
the least risky time to remove the package and should help
save some time during the leapp process.

Related: rhbz#1963164

Change-Id: I8ab42f5dde132875c169db6e69b7d0db2a2b6cc4
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/12/800912/2 && git format-patch -1 --stdout FETCH_HEAD,['environments/lifecycle/upgrade-prepare.yaml'],1,80cfd71baa34e30326a826b83099d12c584f3449,," UpgradeLeappToRemove: ['openvswitch2.11','ovn2.11','libvirt']"," UpgradeLeappToRemove: ['openvswitch2.11','ovn2.11']",1,1
openstack%2Fcharm-ceph-mon~master~I944225ab8932164facf60b845da793c769d30d44,openstack/charm-ceph-mon,master,I944225ab8932164facf60b845da793c769d30d44,Implement the 'list-inconsistent-objs' action,ABANDONED,2021-08-02 17:32:02.000000000,2021-08-02 19:02:40.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 17:32:02.000000000', 'files': ['unit_tests/test_action_list_inconsistent.py', 'actions/list-inconsistent-objs', 'actions/list_inconsistent_objs.py', 'README.md'], 'web_link': 'https://opendev.org/openstack/charm-ceph-mon/commit/db1e95dfb78097309a81ca4d027778afe90fe53c', 'message': ""Implement the 'list-inconsistent-objs' action\n\nPreviously, if we wanted to list the inconsistent objects per PG,\nwe needed to call 'ceph health detail' to get the list of inconsistent\nPGs and then 'rados list-inconsistent-obj $PG' for each PG. This patch\naims to implement a single action that does all that and formats it\nas a pretty JSON.\n\nCloses-Bug: #1931751\nChange-Id: I944225ab8932164facf60b845da793c769d30d44\n""}]",11,803238,db1e95dfb78097309a81ca4d027778afe90fe53c,4,2,1,33717,,,0,"Implement the 'list-inconsistent-objs' action

Previously, if we wanted to list the inconsistent objects per PG,
we needed to call 'ceph health detail' to get the list of inconsistent
PGs and then 'rados list-inconsistent-obj $PG' for each PG. This patch
aims to implement a single action that does all that and formats it
as a pretty JSON.

Closes-Bug: #1931751
Change-Id: I944225ab8932164facf60b845da793c769d30d44
",git fetch https://review.opendev.org/openstack/charm-ceph-mon refs/changes/38/803238/1 && git format-patch -1 --stdout FETCH_HEAD,"['unit_tests/test_action_list_inconsistent.py', 'actions/list-inconsistent-objs', 'actions/list_inconsistent_objs.py', 'README.md']",4,db1e95dfb78097309a81ca4d027778afe90fe53c,bug/1931751,* `list-inconsistent-objs`,,153,0
openstack%2Freleases~master~I3b2c07884706e9d7edcc21a82249eff3089cc47d,openstack/releases,master,I3b2c07884706e9d7edcc21a82249eff3089cc47d,Release Reno 3.4.0,MERGED,2021-08-02 16:08:40.000000000,2021-08-02 18:53:07.000000000,2021-08-02 18:53:07.000000000,"[{'_account_id': 308}, {'_account_id': 5196}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-08-02 16:08:40.000000000', 'files': ['deliverables/_independent/reno.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/30ceb94b10860825affd43fa4183dd86106be951', 'message': 'Release Reno 3.4.0\n\nChange-Id: I3b2c07884706e9d7edcc21a82249eff3089cc47d\n'}]",0,803227,30ceb94b10860825affd43fa4183dd86106be951,9,4,1,17685,,,0,"Release Reno 3.4.0

Change-Id: I3b2c07884706e9d7edcc21a82249eff3089cc47d
",git fetch https://review.opendev.org/openstack/releases refs/changes/27/803227/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/reno.yaml'],1,30ceb94b10860825affd43fa4183dd86106be951,, - version: 3.4.0 projects: - repo: openstack/reno hash: 8a80087d923d3fb34c3db6d2b70e317716cd92e1,,4,0
openstack%2Floci~master~I2b5b1a31165e98ce71380824e8f57af8906701c6,openstack/loci,master,I2b5b1a31165e98ce71380824e8f57af8906701c6,Fix setup_pip.sh and remove xenial based builds,MERGED,2021-07-29 17:03:49.000000000,2021-08-02 18:50:04.000000000,2021-08-02 18:50:04.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 30777}]","[{'number': 1, 'created': '2021-07-29 17:03:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/59ea83b481df349b7cd94d6b8effdd01343c300f', 'message': 'Fix setup_pip.sh\n\nChange-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2021-07-29 18:10:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/e16e6af589163c15ec8bd8123e5c9c3c30e92df7', 'message': 'Fix setup_pip.sh\n\nChange-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2021-07-29 20:27:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/22650222ffbed8b72848f3cd63be293d7273d537', 'message': 'Fix setup_pip.sh and remove xenial based builds\n\nChange-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 4, 'created': '2021-07-29 21:33:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/4f35c49b9599d6b4d1bf0bd7ac08998227e3f640', 'message': 'Fix setup_pip.sh and remove xenial based builds\n\nChange-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 5, 'created': '2021-07-29 22:22:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/d3545a7a8b01de067642e572cd56ffee238a9df4', 'message': 'Fix setup_pip.sh and remove xenial based builds\n\nChange-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 6, 'created': '2021-07-29 23:26:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/0ad067dcb6c92d30300255d447e76d6dda8f93ba', 'message': 'Fix setup_pip.sh and remove xenial based builds\n\nAlso fix monasca bindep.\n\nChange-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 7, 'created': '2021-07-29 23:28:19.000000000', 'files': ['bindep.txt', 'scripts/requirements.sh', 'playbooks/vars.yaml', 'scripts/setup_pip.sh'], 'web_link': 'https://opendev.org/openstack/loci/commit/c19db02c6dec9fba5b450bc36f12b9d5623f699c', 'message': 'Fix setup_pip.sh and remove xenial based builds\n\nAlso fix monasca bindep.\n\nChange-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,802920,c19db02c6dec9fba5b450bc36f12b9d5623f699c,16,6,7,8863,,,0,"Fix setup_pip.sh and remove xenial based builds

Also fix monasca bindep.

Change-Id: I2b5b1a31165e98ce71380824e8f57af8906701c6
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/loci refs/changes/20/802920/7 && git format-patch -1 --stdout FETCH_HEAD,['scripts/setup_pip.sh'],1,59ea83b481df349b7cd94d6b8effdd01343c300f,victoria-wallaby-support,if (( $(${TMP_VIRTUALENV} --version | grep -Po '[0-9]+\.[0-9]+\.[0-9]+' | cut -d. -f1) >= 14 )); thenif (( $(${TMP_VIRTUALENV} --version | grep -Po '[0-9]+\.[0-9]+\.[0-9]+' | cut -d. -f1) >= 20 )); then,if (( $(${TMP_VIRTUALENV} --version | cut -d. -f1) >= 14 )); thenif (( $(${TMP_VIRTUALENV} --version | cut -d. -f1) >= 20 )); then,2,2
openstack%2Fopenstack-helm-infra~master~I70a989aeaac3d763b110cc854e00fa33d5f8861a,openstack/openstack-helm-infra,master,I70a989aeaac3d763b110cc854e00fa33d5f8861a,Use focal libvirt image for victoria and wallaby,MERGED,2021-07-31 03:12:50.000000000,2021-08-02 18:37:52.000000000,2021-08-02 18:36:31.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 30777}]","[{'number': 1, 'created': '2021-07-31 03:12:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1d628b591fcf342235bcf6905e674ab5e96e96eb', 'message': 'Use focal libvirt image for victoria and wallaby\n\nChange-Id: I70a989aeaac3d763b110cc854e00fa33d5f8861a\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2021-07-31 20:54:12.000000000', 'files': ['libvirt/Chart.yaml', 'libvirt/values_overrides/victoria-ubuntu_focal.yaml', 'libvirt/values_overrides/wallaby-ubuntu_focal.yaml', 'releasenotes/notes/libvirt.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/15b43d939e1d09f004ac871a6015543019b548f3', 'message': 'Use focal libvirt image for victoria and wallaby\n\nChange-Id: I70a989aeaac3d763b110cc854e00fa33d5f8861a\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,803095,15b43d939e1d09f004ac871a6015543019b548f3,12,6,2,8863,,,0,"Use focal libvirt image for victoria and wallaby

Change-Id: I70a989aeaac3d763b110cc854e00fa33d5f8861a
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/95/803095/1 && git format-patch -1 --stdout FETCH_HEAD,"['libvirt/values_overrides/victoria-ubuntu_focal.yaml', 'libvirt/values_overrides/wallaby-ubuntu_focal.yaml']",2,1d628b591fcf342235bcf6905e674ab5e96e96eb,victoria-wallaby-support,--- images: tags: libvirt: docker.io/openstackhelm/libvirt:latest-ubuntu_focal ... ,,10,0
openstack%2Fcinder~stable%2Fwallaby~Ia4b1c303a057fe70cf88bdbbebc1d4f62474f011,openstack/cinder,stable/wallaby,Ia4b1c303a057fe70cf88bdbbebc1d4f62474f011,Abort volume creation when encryption spec is invalid,MERGED,2021-07-09 14:37:16.000000000,2021-08-02 17:24:42.000000000,2021-08-02 17:22:50.000000000,"[{'_account_id': 5314}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2021-07-09 14:37:16.000000000', 'files': ['cinder/volume/volume_utils.py', 'cinder/tests/unit/test_volume_utils.py', 'cinder/image/image_utils.py', 'cinder/tests/unit/test_image_utils.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/0297964207251ef0094cf61d97dbcbabd9a706d3', 'message': 'Abort volume creation when encryption spec is invalid\n\nWhen the encryption spec is missing the cipher field,\njust fail the request rather than sending an invalid\nrequest to Castellan and letting the Barbican server\nreject it.\n\nThis happens when an admin had previously created an\ninvalid encryption spec.\n\nSimilarly, check for a malformed cipher field in\nimage_utils decode_cipher, such as ""aes"" instead of\n""aes-xts-plain64"".  An invalid cipher field like this\nwould previously cause a failure during volume creation\nin some volume drivers.\n\nPartial-Bug: #1926630 (1/2)\nChange-Id: Ia4b1c303a057fe70cf88bdbbebc1d4f62474f011\n(cherry picked from commit 0a1cc1a2d42d17ee5fcf3d273d543b598b033318)\n'}]",0,800268,0297964207251ef0094cf61d97dbcbabd9a706d3,17,3,1,4523,,,0,"Abort volume creation when encryption spec is invalid

When the encryption spec is missing the cipher field,
just fail the request rather than sending an invalid
request to Castellan and letting the Barbican server
reject it.

This happens when an admin had previously created an
invalid encryption spec.

Similarly, check for a malformed cipher field in
image_utils decode_cipher, such as ""aes"" instead of
""aes-xts-plain64"".  An invalid cipher field like this
would previously cause a failure during volume creation
in some volume drivers.

Partial-Bug: #1926630 (1/2)
Change-Id: Ia4b1c303a057fe70cf88bdbbebc1d4f62474f011
(cherry picked from commit 0a1cc1a2d42d17ee5fcf3d273d543b598b033318)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/68/800268/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/volume_utils.py', 'cinder/tests/unit/test_volume_utils.py', 'cinder/image/image_utils.py', 'cinder/tests/unit/test_image_utils.py']",4,0297964207251ef0094cf61d97dbcbabd9a706d3,," def test_decode_cipher_invalid(self): self.assertRaises(exception.InvalidVolumeType, image_utils.decode_cipher, 'aes', 256)",,54,7
openstack%2Fopenstack-helm-images~master~I24588c112e2b5ec954f857550bda7d78bdf6d03e,openstack/openstack-helm-images,master,I24588c112e2b5ec954f857550bda7d78bdf6d03e,Add retry around Nagios Request,MERGED,2021-07-27 18:50:48.000000000,2021-08-02 17:13:00.000000000,2021-08-02 17:11:39.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 22348}, {'_account_id': 30582}, {'_account_id': 30777}]","[{'number': 1, 'created': '2021-07-27 18:50:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/515e2c8d7a22e44de84c70606adb058a8bc45735', 'message': 'Add retry around Nagios Request\n\nAdded a retry around the Nagios request commands\n\nChange-Id: I24588c112e2b5ec954f857550bda7d78bdf6d03e\n'}, {'number': 2, 'created': '2021-07-27 19:19:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/24cedfbf34ea8353dc05b0f31de6c9ff1c6ab4b0', 'message': 'Add retry around Nagios Request\n\nAdded a retry around the Nagios request commands\n\nChange-Id: I24588c112e2b5ec954f857550bda7d78bdf6d03e\n'}, {'number': 3, 'created': '2021-07-30 19:02:31.000000000', 'files': ['nagios/plugins/query_prometheus_alerts.py', 'nagios/plugins/check_exporter_health_metric.py', 'nagios/plugins/send_http_post_event.py', 'nagios/plugins/check_rest_get_api.py'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/5522c1856ebb1be97eb3e988482e2d98c5a9092b', 'message': 'Add retry around Nagios Request\n\nAdded a retry around the Nagios request commands. Updated the code\nbased on comments and feedback.\n\nChange-Id: I24588c112e2b5ec954f857550bda7d78bdf6d03e\n'}]",11,802600,5522c1856ebb1be97eb3e988482e2d98c5a9092b,17,5,3,30882,,,0,"Add retry around Nagios Request

Added a retry around the Nagios request commands. Updated the code
based on comments and feedback.

Change-Id: I24588c112e2b5ec954f857550bda7d78bdf6d03e
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/00/802600/1 && git format-patch -1 --stdout FETCH_HEAD,"['nagios/plugins/query_prometheus_alerts.py', 'nagios/plugins/check_exporter_health_metric.py', 'nagios/plugins/send_http_post_event.py', 'nagios/plugins/check_rest_get_api.py']",4,515e2c8d7a22e44de84c70606adb058a8bc45735,," max_retry = 5 replaced = parsed._replace( netloc=""{}:{}@{}"".format(parsed.username, ""???"", parsed.hostname)) retry = 0 while retry < max_retry: try: response = requests.get( include_schema( args.url), proxies=proxies, timeout=timeout_seconds, verify=False) # nosec response_seconds = response.elapsed.total_seconds() response_time = ""[RT={:.4f}]"".format(response_seconds) if response.status_code not in expected_response_codes: print(""CRITICAL: using URL {} expected HTTP status codes {} but got {}. {}"".format( screened_url, expected_response_codes, response.status_code, response_time)) sys.exit(STATE_CRITICAL) if response_seconds >= warning_seconds and response_seconds < critical_seconds: print(""WARNING: using URL {} response seconds {} is more than warning threshold {} seconds. {}"".format( screened_url, response_seconds, warning_seconds, response_time)) sys.exit(STATE_WARNING) if response_seconds >= critical_seconds: print(""CRITICAL: using URL {} response seconds {} is more than critical threshold {} seconds. {}"".format( screened_url, response_seconds, critical_seconds, response_time)) sys.exit(STATE_CRITICAL) print(""OK: URL {} returned response code {}. {}"".format( screened_url, response.status_code, response_time)) sys.exit(STATE_OK) except requests.exceptions.Timeout: if retry < max_retry: retry += 1 print('Retry count {}'.format(retry)) continue else: print(""CRITICAL: Timeout in {} seconds to fetch from URL {}"".format( timeout_seconds, screened_url)) sys.exit(STATE_CRITICAL) except Exception as e: print(""CRITICAL: Failed to fetch from URL {} with reason {}"".format( screened_url, e))"," replaced = parsed._replace(netloc=""{}:{}@{}"".format(parsed.username, ""???"", parsed.hostname)) try: response = requests.get( include_schema( args.url), proxies=proxies, timeout=timeout_seconds, verify=False) # nosec response_seconds = response.elapsed.total_seconds() response_time = ""[RT={:.4f}]"".format(response_seconds) if response.status_code not in expected_response_codes: print(""CRITICAL: using URL {} expected HTTP status codes {} but got {}. {}"".format( screened_url, expected_response_codes, response.status_code, response_time)) if response_seconds >= warning_seconds and response_seconds < critical_seconds: print(""WARNING: using URL {} response seconds {} is more than warning threshold {} seconds. {}"".format( screened_url, response_seconds, warning_seconds, response_time)) sys.exit(STATE_WARNING) if response_seconds >= critical_seconds: print(""CRITICAL: using URL {} response seconds {} is more than critical threshold {} seconds. {}"".format( screened_url, response_seconds, critical_seconds, response_time)) sys.exit(STATE_CRITICAL) print(""OK: URL {} returned response code {}. {}"".format( screened_url, response.status_code, response_time)) except requests.exceptions.Timeout: print(""CRITICAL: Timeout in {} seconds to fetch from URL {}"".format( timeout_seconds, screened_url)) sys.exit(STATE_CRITICAL) except Exception as e: print(""CRITICAL: Failed to fetch from URL {} with reason {}"".format( screened_url, e)) sys.exit(STATE_CRITICAL) sys.exit(STATE_OK) ",210,137
openstack%2Fmagnum~master~I8d8d98ba9e71ccf8d15622c94014666d7b21ac2e,openstack/magnum,master,I8d8d98ba9e71ccf8d15622c94014666d7b21ac2e,Error when running helmV2,NEW,2021-08-02 16:11:55.000000000,2021-08-02 17:03:50.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-02 16:11:55.000000000', 'files': ['magnum/drivers/common/templates/kubernetes/fragments/install-helm-modules.sh'], 'web_link': 'https://opendev.org/openstack/magnum/commit/1ff7b7064346ef5a61827d5107706a62cb174bcd', 'message': 'Error when running helmV2\n\n* Set stable chart during helm init\n* Fix --name non existent when doing helm upgrade\n\nChange-Id: I8d8d98ba9e71ccf8d15622c94014666d7b21ac2e\nSigned-off-by: Diogo Guerra <diogo.filipe.tomas.guerra@cern.ch>\n'}]",0,803228,1ff7b7064346ef5a61827d5107706a62cb174bcd,2,1,1,29425,,,0,"Error when running helmV2

* Set stable chart during helm init
* Fix --name non existent when doing helm upgrade

Change-Id: I8d8d98ba9e71ccf8d15622c94014666d7b21ac2e
Signed-off-by: Diogo Guerra <diogo.filipe.tomas.guerra@cern.ch>
",git fetch https://review.opendev.org/openstack/magnum refs/changes/28/803228/1 && git format-patch -1 --stdout FETCH_HEAD,['magnum/drivers/common/templates/kubernetes/fragments/install-helm-modules.sh'],1,1ff7b7064346ef5a61827d5107706a62cb174bcd,helm-v2-fix," until helm init --stable-repo-url=https://charts.helm.sh/stable --client-only --wait; do helm_install_cmd=""helm upgrade --install magnum . --namespace kube-system --values values.yaml --render-subchart-notes"""," until helm init --client-only --wait; do helm_install_cmd=""helm upgrade --install --name magnum . --namespace kube-system --values values.yaml --render-subchart-notes""",2,2
openstack%2Fkuryr-kubernetes~master~I425e7fe1d220b5f760bd5514c853d3e377190d82,openstack/kuryr-kubernetes,master,I425e7fe1d220b5f760bd5514c853d3e377190d82,Fix multinode gate.,MERGED,2021-07-21 12:55:00.000000000,2021-08-02 16:59:19.000000000,2021-08-02 16:55:52.000000000,"[{'_account_id': 11600}, {'_account_id': 13692}, {'_account_id': 22348}, {'_account_id': 27032}]","[{'number': 1, 'created': '2021-07-21 12:55:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/a34095fa46d10fec222daff9ae239e860f934fc4', 'message': 'Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 2, 'created': '2021-07-22 08:04:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/08dfda62513a981f2ece8f32e04e4130b6cc8037', 'message': 'Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 3, 'created': '2021-07-22 10:07:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/408f71a090b92bb711e89589af6f00e27d2123e1', 'message': 'Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 4, 'created': '2021-07-22 10:14:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/6ed110a324a67a9ad7f55b0defe96164fc3e079c', 'message': 'Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 5, 'created': '2021-07-22 11:19:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/3c3d4564db351f91441de53e466400a7640f0e58', 'message': 'Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 6, 'created': '2021-07-22 13:31:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/d727ea4472f1897a5a6a2251ac3f862a8515ade3', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 7, 'created': '2021-07-22 13:39:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/3efa25431394e0d31fc8bc04de7dcd2a5be782aa', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 8, 'created': '2021-07-22 17:57:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/f008e5fdf59f9ad07c1e22b6fd8358b8e243a709', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 9, 'created': '2021-07-23 03:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/8437a386744012cbfa72313442ed28cc5c401e17', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 10, 'created': '2021-07-23 06:58:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/94bba7e35534770467e092f9f293bff174a508c8', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 11, 'created': '2021-07-23 14:21:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/4941cecdda1de2896f0a4e9bad8eff568a9a284a', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 12, 'created': '2021-07-26 07:42:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/e7435cb5740d8b1a6261a3197f4c7d9dcb87f006', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 13, 'created': '2021-07-26 08:57:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/f3c7fe323272ff0a1ea8ae60c42d4096f315e446', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 14, 'created': '2021-07-26 10:25:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/84536113b1d098482b7fdcf869895ebed884f561', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 15, 'created': '2021-07-28 09:43:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/8e9bcfe73425d5b460d23d483c3ce64bc67b7ff8', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 16, 'created': '2021-07-28 11:08:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/cdb542fffba7331c8f20393bfaa55aeb138eee83', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 17, 'created': '2021-07-29 07:50:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/1e84dbe7d33639120ddf74949a2fd736eae924d8', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 18, 'created': '2021-07-29 12:58:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/eee05e6e51e6413d2a14ae5a2a0c93cb11ee6516', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 19, 'created': '2021-07-29 17:26:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/918a238b9711bbc01193faa0e381d02406bb2550', 'message': '[WIP] Fix multinode gate, separate variations for OVN and OVS.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}, {'number': 20, 'created': '2021-07-30 06:00:23.000000000', 'files': ['.zuul.d/base.yaml', '.zuul.d/project.yaml', 'devstack/plugin.sh', '.zuul.d/multinode.yaml', 'devstack/settings'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/c56e465c7e187bec096902e51c3cad90fad75cbe', 'message': 'Fix multinode gate.\n\nMake separate variations for OVN and OVS networking.\n\nChange-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82\n'}]",1,801618,c56e465c7e187bec096902e51c3cad90fad75cbe,48,4,20,13692,,,0,"Fix multinode gate.

Make separate variations for OVN and OVS networking.

Change-Id: I425e7fe1d220b5f760bd5514c853d3e377190d82
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/18/801618/18 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.d/project.yaml', '.zuul.d/multinode.yaml']",2,a34095fa46d10fec222daff9ae239e860f934fc4,multinode," q-svc: false name: kuryr-kubernetes-tempest-multinode-ovn parent: kuryr-kubernetes-tempest-multinode description: | Kuryr-Kubernetes tempest multinode job using OVN nodeset: openstack-two-node-focal host-vars: controller: devstack_services: ovn-northd: true ovn-controller: true q-ovn-metadata-agent: true q-svc: true q-agt: false q-l3: false q-dhcp: false q-meta: false q-trunk: true q-qos: true ovs-vswitchd: true ovsdb-server: true devstack_localrc: Q_AGENT: ovn ML2_L3_PLUGIN: ovn-router,trunk,qos OVN_DBS_LOG_LEVEL: dbg Q_ML2_PLUGIN_MECHANISM_DRIVERS: ovn,logger Q_ML2_PLUGIN_TYPE_DRIVERS: local,flat,vlan,geneve Q_ML2_TENANT_NETWORK_TYPE: geneve Q_USE_PROVIDERNET_FOR_PUBLIC: true VAR_RUN_PATH: /usr/local/var/run PHYSICAL_NETWORK: public OVN_L3_CREATE_PUBLIC_NETWORK: true OVN_BUILD_FROM_SOURCE: true ENABLE_CHASSIS_AS_GW: true OVN_BRANCH: v20.06.1 KURYR_NEUTRON_DEFAULT_ROUTER: kuryr-router ENABLE_TLS: True KURYR_FORCE_IMAGE_BUILD: true USE_PYTHON3: true zuul_copy_output: '{{ devstack_base_dir }}/data/ovn': 'logs' '{{ devstack_log_dir }}/ovsdb-server-nb.log': 'logs' '{{ devstack_log_dir }}/ovsdb-server-sb.log': 'logs' group-vars: subnode: devstack_services: ovn-northd: true ovn-controller: true q-ovn-metadata-agent: true q-svc: true q-agt: false q-l3: false q-dhcp: false q-meta: false q-trunk: true q-qos: true ovs-vswitchd: true ovsdb-server: true devstack_localrc: Q_AGENT: ovn ML2_L3_PLUGIN: ovn-router,trunk,qos OVN_DBS_LOG_LEVEL: dbg Q_ML2_PLUGIN_MECHANISM_DRIVERS: ovn,logger Q_ML2_PLUGIN_TYPE_DRIVERS: local,flat,vlan,geneve Q_ML2_TENANT_NETWORK_TYPE: geneve Q_USE_PROVIDERNET_FOR_PUBLIC: true VAR_RUN_PATH: /usr/local/var/run PHYSICAL_NETWORK: public OVN_L3_CREATE_PUBLIC_NETWORK: true OVN_BUILD_FROM_SOURCE: true ENABLE_CHASSIS_AS_GW: true OVN_BRANCH: v20.06.1 KURYR_NEUTRON_DEFAULT_ROUTER: kuryr-router ENABLE_TLS: True KURYR_FORCE_IMAGE_BUILD: true USE_PYTHON3: true zuul_copy_output: '{{ devstack_base_dir }}/data/ovn': 'logs' '{{ devstack_log_dir }}/ovsdb-server-nb.log': 'logs' '{{ devstack_log_dir }}/ovsdb-server-sb.log': 'logs' vars: devstack_localrc: KURYR_K8S_API_URL: ""https://${SERVICE_HOST}:${KURYR_K8S_API_PORT}"" KURYR_K8S_MULTI_WORKER_TESTS: True devstack_services: tls-proxy: false kubernetes-worker: false kubernetes-master: true kuryr-daemon: true kuryr-kubernetes: true voting: false - job:",,94,0
openstack%2Fironic~stable%2Fwallaby~I4a169b42d516a7ae2adcee9b69d71723fdefcd95,openstack/ironic,stable/wallaby,I4a169b42d516a7ae2adcee9b69d71723fdefcd95,Suppress policy deprecation and default change warnings,MERGED,2021-07-02 20:55:58.000000000,2021-08-02 16:42:24.000000000,2021-08-02 16:39:44.000000000,"[{'_account_id': 4690}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-07-02 20:55:58.000000000', 'files': ['ironic/tests/unit/policy_fixture.py', 'ironic/common/policy.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/fe7c58aeff25f988c5e7dacc6fbb53add976719b', 'message': 'Suppress policy deprecation and default change warnings\n\nAs part of the policy defaults refresh work, all of the defaults for\npolicies were changed and warnings about it are being emitted\nconstantly in the logs. We can suppress these for now until we are\nenforcing new defaults [1].\n\nThis also suppresses policy deprecation warnings during tests to avoid\nfilling the console with warning messages.\n\nRelated to blueprint policy-defaults-refresh\n\n[1]https://docs.openstack.org/nova/latest/configuration/config.html#oslo_policy.enforce_new_defaults\n\nChange-Id: I4a169b42d516a7ae2adcee9b69d71723fdefcd95\n(cherry picked from commit 67ff5ff2b4ad4a12965142ffb1ff7fb11c07d337)\n'}]",0,799253,fe7c58aeff25f988c5e7dacc6fbb53add976719b,11,5,1,10342,,,0,"Suppress policy deprecation and default change warnings

As part of the policy defaults refresh work, all of the defaults for
policies were changed and warnings about it are being emitted
constantly in the logs. We can suppress these for now until we are
enforcing new defaults [1].

This also suppresses policy deprecation warnings during tests to avoid
filling the console with warning messages.

Related to blueprint policy-defaults-refresh

[1]https://docs.openstack.org/nova/latest/configuration/config.html#oslo_policy.enforce_new_defaults

Change-Id: I4a169b42d516a7ae2adcee9b69d71723fdefcd95
(cherry picked from commit 67ff5ff2b4ad4a12965142ffb1ff7fb11c07d337)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/53/799253/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/tests/unit/policy_fixture.py', 'ironic/common/policy.py']",2,fe7c58aeff25f988c5e7dacc6fbb53add976719b,bp/policy-defaults-refresh-stable/wallaby," # NOTE(melwitt): Explictly disable the warnings for policies # changing their default check_str. During policy-defaults-refresh # work, all the policy defaults have been changed and warning for # each policy started filling the logs limit for various tool. # Once we move to new defaults only world then we can enable these # warning again. _ENFORCER.suppress_default_change_warnings = True",,11,0
openstack%2Ftripleo-heat-templates~master~I60b92234a8b41b1843e702ff238dd8b6e94dd6e2,openstack/tripleo-heat-templates,master,I60b92234a8b41b1843e702ff238dd8b6e94dd6e2,"Only reference _bundle manifests in cinder-{backup,volume}-pacemaker-puppet.yaml",MERGED,2021-06-28 14:55:15.000000000,2021-08-02 16:29:09.000000000,2021-08-02 16:29:09.000000000,"[{'_account_id': 6926}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 21129}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-06-28 14:55:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/822105dc65181f406dfe1d3f70685c3f0a36fe33', 'message': '[WIP] Only reference _bundle manifests\n\nWe would like to remove the non used non-_bundle pacemaker manifests\n\nChange-Id: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2\n'}, {'number': 2, 'created': '2021-06-29 06:25:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/422efe1f0b8b57e3d94af8867aa2e678993987af', 'message': ""Only reference _bundle manifests in cinder-{backup,volume}-pacemaker-puppet.yaml\n\nLet's remove the non used non-_bundle pacemaker manifests.\nWe do not support any HA via non-containerized services at this point in time.\nAnd via Id1340c45679d720cdf5ed9b5b15347d73cffc445 we're actually\nremoving them from puppet-tripleo.\n\nChange-Id: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2\n""}, {'number': 3, 'created': '2021-07-21 12:48:18.000000000', 'files': ['deployment/cinder/cinder-backup-pacemaker-puppet.yaml', 'deployment/cinder/cinder-volume-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/fd893918ce1f6fde80211c3566febf6af3b6020b', 'message': ""Only reference _bundle manifests in cinder-{backup,volume}-pacemaker-puppet.yaml\n\nLet's remove the non used non-_bundle pacemaker manifests.\nWe do not support any HA via non-containerized services at this point in time.\nAnd via Id1340c45679d720cdf5ed9b5b15347d73cffc445 we're actually\nremoving them from puppet-tripleo.\n\nChange-Id: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2\n""}]",0,798341,fd893918ce1f6fde80211c3566febf6af3b6020b,30,6,3,20172,,,0,"Only reference _bundle manifests in cinder-{backup,volume}-pacemaker-puppet.yaml

Let's remove the non used non-_bundle pacemaker manifests.
We do not support any HA via non-containerized services at this point in time.
And via Id1340c45679d720cdf5ed9b5b15347d73cffc445 we're actually
removing them from puppet-tripleo.

Change-Id: I60b92234a8b41b1843e702ff238dd8b6e94dd6e2
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/41/798341/2 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/cinder/cinder-backup-pacemaker-puppet.yaml', 'deployment/cinder/cinder-volume-pacemaker-puppet.yaml']",2,822105dc65181f406dfe1d3f70685c3f0a36fe33,," - - ""include tripleo::profile::pacemaker::cinder::volume_bundle"""," - - ""include tripleo::profile::pacemaker::cinder::volume""",2,2
openstack%2Fansible-collections-openstack~master~I707904f79a1cde8ff23ec4d6166890959f3d0e2b,openstack/ansible-collections-openstack,master,I707904f79a1cde8ff23ec4d6166890959f3d0e2b,Fix linter errors,ABANDONED,2021-07-06 19:59:07.000000000,2021-08-02 16:23:52.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-06 19:59:07.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/a30a5305ae6c3ea7bfb31564ba4f15176ec370f1', 'message': 'Fix linter errors\n\nChange-Id: I707904f79a1cde8ff23ec4d6166890959f3d0e2b\n'}]",0,799714,a30a5305ae6c3ea7bfb31564ba4f15176ec370f1,3,1,1,33675,,,0,"Fix linter errors

Change-Id: I707904f79a1cde8ff23ec4d6166890959f3d0e2b
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/14/799714/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,a30a5305ae6c3ea7bfb31564ba4f15176ec370f1,neutron_rbac_modules,"author: Ashraf Hasson (@ahasson-rh) - Accepts same arguments as OpenStackSDK network proxy C(find_rbac_policy) and C(rbac_policies) functions which are ultimately passed over to C(RBACPolicy) - Can be one of the following object types C(network), C(security_group) or C(qos_policy) type: str type: str - Can be either of the following options C(access_as_shared) | C(access_as_external)"," - This module accepts the same arguments that the OpenStackSDK C(find_rbac_policy) and C(rbac_policies) network proxy functions accept which are ultimately passed over to the C(RBACPolicy) Class. - Can be one of the following object types: C(network), C(security_group) or C(qos_policy) - Can be either of the following options: C(access_as_shared) | C(access_as_external)",11,10
openstack%2Fansible-collections-openstack~master~I16cff429c6d981ae504aefe25d6f510153fbc062,openstack/ansible-collections-openstack,master,I16cff429c6d981ae504aefe25d6f510153fbc062,Format author doc with github id,ABANDONED,2021-07-06 17:54:14.000000000,2021-08-02 16:23:41.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-06 17:54:14.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/a16e7a78df97807966082d3847afe30dce0ae54f', 'message': 'Format author doc with github id\n\nChange-Id: I16cff429c6d981ae504aefe25d6f510153fbc062\n'}]",0,799698,a16e7a78df97807966082d3847afe30dce0ae54f,3,1,1,33675,,,0,"Format author doc with github id

Change-Id: I16cff429c6d981ae504aefe25d6f510153fbc062
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/98/799698/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,a16e7a78df97807966082d3847afe30dce0ae54f,neutron_rbac_modules,"author: Ashraf Hasson (@ahasson-rh) - Can be one of the following object types C(network), C(security_group) or C(qos_policy) type: str type: str - Can be either of the following options C(access_as_shared) | C(access_as_external)"," - Can be one of the following object types: C(network), C(security_group) or C(qos_policy) - Can be either of the following options: C(access_as_shared) | C(access_as_external)",9,8
openstack%2Fansible-collections-openstack~master~I1d6bafb738ce5b628090ea6ce98887a63f8ff70c,openstack/ansible-collections-openstack,master,I1d6bafb738ce5b628090ea6ce98887a63f8ff70c,Fixing author documentation errors,ABANDONED,2021-07-06 16:05:19.000000000,2021-08-02 16:23:30.000000000,,"[{'_account_id': 14369}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-06 16:05:19.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/45c599dbfbaf274c0a2fcb57a79b5267f3636621', 'message': 'Fixing author documentation errors\n\nChange-Id: I1d6bafb738ce5b628090ea6ce98887a63f8ff70c\n'}]",0,799686,45c599dbfbaf274c0a2fcb57a79b5267f3636621,3,2,1,33675,,,0,"Fixing author documentation errors

Change-Id: I1d6bafb738ce5b628090ea6ce98887a63f8ff70c
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/86/799686/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,45c599dbfbaf274c0a2fcb57a79b5267f3636621,neutron_rbac_modules,"author: Ashraf Hasson <ahasson@redhat.com> - Can be one of the following object types C(network), C(security_group) or C(qos_policy) type: str type: str - Can be either of the following options C(access_as_shared) | C(access_as_external)"," - Can be one of the following object types: C(network), C(security_group) or C(qos_policy) - Can be either of the following options: C(access_as_shared) | C(access_as_external)",9,8
openstack%2Fansible-collections-openstack~master~Ic2b84404b0a2d8406c75b9d3efc3985faa6bca27,openstack/ansible-collections-openstack,master,Ic2b84404b0a2d8406c75b9d3efc3985faa6bca27,Fixing documentation errors,ABANDONED,2021-07-01 20:01:37.000000000,2021-08-02 16:23:11.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-01 20:01:37.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/90399d3c1e9a66d0f4952765d03cbe9b4c57c036', 'message': 'Fixing documentation errors\n\nChange-Id: Ic2b84404b0a2d8406c75b9d3efc3985faa6bca27\n'}]",0,799117,90399d3c1e9a66d0f4952765d03cbe9b4c57c036,3,1,1,33675,,,0,"Fixing documentation errors

Change-Id: Ic2b84404b0a2d8406c75b9d3efc3985faa6bca27
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/17/799117/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,90399d3c1e9a66d0f4952765d03cbe9b4c57c036,neutron_rbac_modules,"author: Ashraf Hasson - Can be one of the following object types C(network), C(security_group) or C(qos_policy) type: str type: str - Can be either of the following options C(access_as_shared) | C(access_as_external)"," - Can be one of the following object types: C(network), C(security_group) or C(qos_policy) - Can be either of the following options: C(access_as_shared) | C(access_as_external)",9,8
openstack%2Fansible-collections-openstack~master~Id0fa2e01991ab9afe6d548f206cf1826a8ee8284,openstack/ansible-collections-openstack,master,Id0fa2e01991ab9afe6d548f206cf1826a8ee8284,Chmod neutron_rbac_policy to non-executable bits,ABANDONED,2021-07-01 17:48:56.000000000,2021-08-02 16:22:49.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-01 17:48:56.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/352806e61130d5ff740b31aac2b749c571b982a7', 'message': 'Chmod neutron_rbac_policy to non-executable bits\n\nChange-Id: Id0fa2e01991ab9afe6d548f206cf1826a8ee8284\n'}]",0,799108,352806e61130d5ff740b31aac2b749c571b982a7,3,1,1,33675,,,0,"Chmod neutron_rbac_policy to non-executable bits

Change-Id: Id0fa2e01991ab9afe6d548f206cf1826a8ee8284
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/08/799108/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,352806e61130d5ff740b31aac2b749c571b982a7,neutron_rbac_modules, type: str type: str,,3,0
openstack%2Fansible-collections-openstack~master~Iedaf8f3a0f72d67f98f401332e5832f429bafccb,openstack/ansible-collections-openstack,master,Iedaf8f3a0f72d67f98f401332e5832f429bafccb,Adding omitted doc-missing-type in documentation,ABANDONED,2021-06-28 14:38:48.000000000,2021-08-02 16:22:28.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-06-28 14:38:48.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/3301fcd4c444eb184dfc78970945c2180f059ea7', 'message': 'Adding omitted doc-missing-type in documentation\n\nChange-Id: Iedaf8f3a0f72d67f98f401332e5832f429bafccb\n'}]",0,798312,3301fcd4c444eb184dfc78970945c2180f059ea7,3,1,1,33675,,,0,"Adding omitted doc-missing-type in documentation

Change-Id: Iedaf8f3a0f72d67f98f401332e5832f429bafccb
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/12/798312/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,3301fcd4c444eb184dfc78970945c2180f059ea7,neutron_rbac_modules, type: str type: str,,3,0
openstack%2Fansible-collections-openstack~master~I5abcc7e7a0e487bdb2820fe94e4c22b5b919f00e,openstack/ansible-collections-openstack,master,I5abcc7e7a0e487bdb2820fe94e4c22b5b919f00e,Remove blank lines at end of file,ABANDONED,2021-06-28 12:57:26.000000000,2021-08-02 16:18:46.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-06-28 12:57:26.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/793a5aa967c580463953bf508064e566448c1d0c', 'message': 'Remove blank lines at end of file\n\nChange-Id: I5abcc7e7a0e487bdb2820fe94e4c22b5b919f00e\n'}]",0,798293,793a5aa967c580463953bf508064e566448c1d0c,3,1,1,33675,,,0,"Remove blank lines at end of file

Change-Id: I5abcc7e7a0e487bdb2820fe94e4c22b5b919f00e
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/93/798293/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,793a5aa967c580463953bf508064e566448c1d0c,,,,0,2
openstack%2Fansible-collections-openstack~master~I55a75fb8e87670074c8a28820ae2a1265f23aff7,openstack/ansible-collections-openstack,master,I55a75fb8e87670074c8a28820ae2a1265f23aff7,Fix lint errors,ABANDONED,2021-06-25 21:51:09.000000000,2021-08-02 16:18:24.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-06-25 21:51:09.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/160ec8208e11b980ebc27706cd6858f569346e85', 'message': 'Fix lint errors\n\nChange-Id: I55a75fb8e87670074c8a28820ae2a1265f23aff7\n'}]",8,798166,160ec8208e11b980ebc27706cd6858f569346e85,3,1,1,33675,,,0,"Fix lint errors

Change-Id: I55a75fb8e87670074c8a28820ae2a1265f23aff7
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/66/798166/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,160ec8208e11b980ebc27706cd6858f569346e85,," object_id=dict(), # ID of the object that this RBAC policy affects. object_type=dict(choices=['security_group', 'qos_policy', 'network']), # Type of the object that this RBAC policy affects. target_project_id=dict(), # The ID of the project this RBAC will be enforced. project_id=dict(), # The owner project ID. action=dict(choices=['access_as_external', 'access_as_shared']), # Action for the RBAC policy. try: policy = cloud.network.get_rbac_policy(policy_id) module.exit_json(changed=False, policy=policy) except sdk.exceptions.ResourceNotFound: module.exit_json(changed=False, policy=None) except sdk.exceptions.OpenStackCloudException as ex: module.fail_json(msg='Failed to get RBAC policy: {0}'.format(str(ex)))"," object_id=dict(), # ID of the object that this RBAC policy affects. object_type=dict(choices=['security_group', 'qos_policy', 'network']), # Type of the object that this RBAC policy affects. target_project_id=dict(), # The ID of the project this RBAC will be enforced. project_id=dict(), # The owner project ID. action=dict(choices=['access_as_external', 'access_as_shared']), # Action for the RBAC policy. try: policy = cloud.network.get_rbac_policy(policy_id) module.exit_json(changed=False, policy=policy) except sdk.exceptions.ResourceNotFound: module.exit_json(changed=False, policy=None) except sdk.exceptions.OpenStackCloudException as ex: module.fail_json(msg='Failed to get RBAC policy: {0}'.format(str(ex)))",34,23
openstack%2Fansible-collections-openstack~master~Ice817d82c4151654e8520308726431a3c4f36ddb,openstack/ansible-collections-openstack,master,Ice817d82c4151654e8520308726431a3c4f36ddb,Add Neutron RBAC modules,ABANDONED,2021-06-25 21:18:36.000000000,2021-08-02 16:12:45.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-25 21:18:36.000000000', 'files': ['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/13ae6f6e216e613536f9397b53393a287d874e5e', 'message': 'Add Neutron RBAC modules\n\nChange-Id: Ice817d82c4151654e8520308726431a3c4f36ddb\n'}]",129,798164,13ae6f6e216e613536f9397b53393a287d874e5e,6,2,1,33675,,,0,"Add Neutron RBAC modules

Change-Id: Ice817d82c4151654e8520308726431a3c4f36ddb
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/64/798164/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/neutron_rbac_policy.py', 'plugins/modules/neutron_rbac_policies_info.py']",2,13ae6f6e216e613536f9397b53393a287d874e5e,,"#!/usr/bin/python # Copyright: Ansible Project # GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt) from __future__ import (absolute_import, division, print_function) __metaclass__ = type DOCUMENTATION = r''' --- module: neutron_rbac_policies_info short_description: Fetch Neutron policies. version_added: ""1.0.0"" description: - Get RBAC policies against a network, security group or a QoS Policy for one or more projects. - If a C(policy_id) was not provided, this module will attempt to fetch all available policies. - This module accepts the same arguments that the OpenStackSDK C(find_rbac_policy) and C(rbac_policies) network proxy functions accept which are ultimately passed over to the C(RBACPolicy) Class. - All parameters passed in to this module act as a filter for when no C(policy_id) was provided, otherwise they're ignored. - Returns None if no matching policy was found as opposed to failing. options: policy_id: description: - The RBAC policy ID - If provided, all other filters are ignored type: str object_id: description: - The object ID (the subject of the policy) to which the RBAC rules applies - This would be the ID of a network, security group or a qos policy - Mutually exclusive with the C(object_type) type: str object_type: description: - Can be one of the following object types: C(network), C(security_group) or C(qos_policy) - Mutually exclusive with the C(object_id) choices: ['network', 'security_group', 'qos_policy'] type: str target_project_id: description: - Filters the RBAC rules based on the target project id - Logically AND'ed with other filters - Mutually exclusive with C(project_id) project_id: description: - Filters the RBAC rules based on the project id to which the object belongs to - Logically AND'ed with other filters - Mutually exclusive with C(target_project_id) type: str project: description: - Filters the RBAC rules based on the project name - Logically AND'ed with other filters action: description: - Can be either of the following options: C(access_as_shared) | C(access_as_external) - Logically AND'ed with other filters choices: ['access_as_shared', 'access_as_external'] type: str extends_documentation_fragment: - openstack.cloud.openstack ''' EXAMPLES = r''' # Ensure network RBAC policy exists - name: Create a new network RBAC policy neutron_rbac_policy: object_id: '7422172b-2961-475c-ac68-bd0f2a9960ad' object_type: 'network' target_project_id: 'a12f9ce1de0645e0a0b01c2e679f69ec' project_id: '84b8774d595b41e89f3dfaa1fd76932d' # Update network RBAC policy - name: Update an existing network RBAC policy neutron_rbac_policy: policy_id: 'f625242a-6a73-47ac-8d1f-91440b2c617f' target_project_id: '163c89e065a94e069064e551e15daf0e' # Delete an existing RBAC policy - name: Delete RBAC policy openstack.cloud.openstack.neutron_rbac_policy: policy_id: 'f625242a-6a73-47ac-8d1f-91440b2c617f' state: absent ''' RETURN = r''' ''' import re from ansible.module_utils.basic import AnsibleModule from ansible_collections.openstack.cloud.plugins.module_utils.openstack import openstack_full_argument_spec from ansible_collections.openstack.cloud.plugins.module_utils.openstack import openstack_module_kwargs from ansible_collections.openstack.cloud.plugins.module_utils.openstack import openstack_cloud_from_module def get_rbac_policies(module, sdk, cloud): """""" Creates a new RBAC policy returns: the ""Changed"" state of the RBAC policy """""" if module.check_mode: return True, None object_type = module.params.get('object_type') project_id = module.params.get('project_id') action = module.params.get('action') search_attributes = {} if object_type is not None: search_attributes['object_type'] = object_type if project_id is not None: search_attributes['project_id'] = project_id if action is not None: search_attributes['action'] = action try: policies = [] generator = cloud.network.rbac_policies(**search_attributes) for p in generator: policies.append(p) except sdk.exceptions.OpenStackCloudException as ex: module.fail_json(msg='Failed to get RBAC policies: {0}'.format(str(ex))) return policies def filter_policies_by(policies, key, value): filtered = [] regexp = re.compile(r""location\.project\.([A-Za-z]+)"") if regexp.match(key): attribute = key.split('.')[-1] for p in policies: if p['location']['project'][attribute] == value: filtered.append(p) else: for p in policies: if getattr(p, key) == value: filtered.append(p) return filtered def run_module(): argument_spec = openstack_full_argument_spec( policy_id=dict(), object_id=dict(), # ID of the object that this RBAC policy affects. object_type=dict(choices=['security_group', 'qos_policy', 'network']), # Type of the object that this RBAC policy affects. target_project_id=dict(), # The ID of the project this RBAC will be enforced. project_id=dict(), # The owner project ID. project=dict(), action=dict(choices=['access_as_external', 'access_as_shared']), # Action for the RBAC policy. ) module_kwargs = openstack_module_kwargs() module = AnsibleModule( argument_spec, supports_check_mode=True, **module_kwargs ) policy_id = module.params.get('policy_id') object_id = module.params.get('object_id') object_type = module.params.get('object_type') project_id = module.params.get('project_id') project = module.params.get('project') target_project_id = module.params.get('target_project_id') sdk, cloud = openstack_cloud_from_module(module, min_version=""0.44"") if policy_id is not None: try: policy = cloud.network.get_rbac_policy(policy_id) module.exit_json(changed=False, policy=policy) except sdk.exceptions.ResourceNotFound: module.exit_json(changed=False, policy=None) except sdk.exceptions.OpenStackCloudException as ex: module.fail_json(msg='Failed to get RBAC policy: {0}'.format(str(ex))) else: if object_id is not None and object_type is not None: module.fail_json(msg='object_id and object_type are mutually exclusive, please specify one of the two.') if project_id is not None and target_project_id is not None: module.fail_json(msg='project_id and target_project_id are mutually exclusive, please specify one of the two.') policies = get_rbac_policies(module, sdk, cloud) filtered_policies = policies if project is not None: filtered_policies = filter_policies_by(filtered_policies, 'location.project.name', project) if object_id is not None: filtered_policies = filter_policies_by(filtered_policies, 'object_id', object_id) if target_project_id is not None: filtered_policies = filter_policies_by(filtered_policies, 'target_project_id', target_project_id) module.exit_json(policies=filtered_policies) def main(): run_module() if __name__ == '__main__': main() ",,460,0
openstack%2Frequirements~master~I9f6c0313798421b67e76102d3214157cc2ced64a,openstack/requirements,master,I9f6c0313798421b67e76102d3214157cc2ced64a,update constraint for python-senlinclient to new release 2.3.0,MERGED,2021-08-02 09:46:19.000000000,2021-08-02 16:04:58.000000000,2021-08-02 16:02:40.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 09:46:19.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/12070ce23f5fd37de6d3cce0ce041d1b697784e3', 'message': 'update constraint for python-senlinclient to new release 2.3.0\n\nmeta: version: 2.3.0\nmeta: diff-start: -\nmeta: series: xena\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Stephen Finucane <sfinucan@redhat.com>\nmeta: release:Commit: Stephen Finucane <sfinucan@redhat.com>\nmeta: release:Change-Id: I42b34643b54513274f87567d8500219892955fcd\nmeta: release:Code-Review+1: Erik Olof Gunnar Andersson <eandersson@blizzard.com>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+1: Duc Truong <dtruong@blizzard.com>\nmeta: release:Code-Review+1: 刘雪峰 <liu.xuefeng1@zte.com.cn>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: I9f6c0313798421b67e76102d3214157cc2ced64a\n'}]",0,803162,12070ce23f5fd37de6d3cce0ce041d1b697784e3,9,3,1,11131,,,0,"update constraint for python-senlinclient to new release 2.3.0

meta: version: 2.3.0
meta: diff-start: -
meta: series: xena
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Stephen Finucane <sfinucan@redhat.com>
meta: release:Commit: Stephen Finucane <sfinucan@redhat.com>
meta: release:Change-Id: I42b34643b54513274f87567d8500219892955fcd
meta: release:Code-Review+1: Erik Olof Gunnar Andersson <eandersson@blizzard.com>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+1: Duc Truong <dtruong@blizzard.com>
meta: release:Code-Review+1: 刘雪峰 <liu.xuefeng1@zte.com.cn>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: I9f6c0313798421b67e76102d3214157cc2ced64a
",git fetch https://review.opendev.org/openstack/requirements refs/changes/62/803162/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,12070ce23f5fd37de6d3cce0ce041d1b697784e3,new-release,python-senlinclient===2.3.0,python-senlinclient===2.2.1,1,1
openstack%2Frequirements~master~Id8c6e1754ea7c366860bc57afd75ceeeccedac09,openstack/requirements,master,Id8c6e1754ea7c366860bc57afd75ceeeccedac09,update constraint for neutron-lib to new release 2.13.0,MERGED,2021-08-02 08:59:16.000000000,2021-08-02 16:03:54.000000000,2021-08-02 16:02:37.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 08:59:16.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/2bdcc96270bab6ccb33801037b844c8cee8ce5b2', 'message': 'update constraint for neutron-lib to new release 2.13.0\n\nmeta: version: 2.13.0\nmeta: diff-start: -\nmeta: series: xena\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Akihiro Motoki <amotoki@gmail.com>\nmeta: release:Commit: Akihiro Motoki <amotoki@gmail.com>\nmeta: release:Change-Id: I6627c095ba688ee6dd771c8c035dd8397f7c3898\nmeta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+1: Slawek Kaplonski <skaplons@redhat.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nChange-Id: Id8c6e1754ea7c366860bc57afd75ceeeccedac09\n'}]",0,803157,2bdcc96270bab6ccb33801037b844c8cee8ce5b2,9,3,1,11131,,,0,"update constraint for neutron-lib to new release 2.13.0

meta: version: 2.13.0
meta: diff-start: -
meta: series: xena
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Akihiro Motoki <amotoki@gmail.com>
meta: release:Commit: Akihiro Motoki <amotoki@gmail.com>
meta: release:Change-Id: I6627c095ba688ee6dd771c8c035dd8397f7c3898
meta: release:Code-Review+2: Hervé Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+1: Slawek Kaplonski <skaplons@redhat.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
Change-Id: Id8c6e1754ea7c366860bc57afd75ceeeccedac09
",git fetch https://review.opendev.org/openstack/requirements refs/changes/57/803157/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,2bdcc96270bab6ccb33801037b844c8cee8ce5b2,new-release,neutron-lib===2.13.0,neutron-lib===2.12.0,1,1
openstack%2Ftripleo-upgrade~stable%2Ftrain~I32494fb21d40cd3231e619c748fdfce7ff891f50,openstack/tripleo-upgrade,stable/train,I32494fb21d40cd3231e619c748fdfce7ff891f50,Move the upgrade prepare script generation in the build script playbook.,MERGED,2021-07-09 11:02:22.000000000,2021-08-02 15:59:23.000000000,2021-08-02 15:59:23.000000000,"[{'_account_id': 6816}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-07-09 11:02:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/708970f27e61c728f84486469565ffeaf16c5a2d', 'message': 'Move the upgrade prepare script generation in the build script playbook.\n\nCurrently, the overcloud_upgrade_prepare.sh script was being built in the\novercloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params\nparameter was up to date. However, this parameter is not used anymore in\nthe ffu workflow and the upgrades workflow is not being used by our CI so\nit should be safe to move it back to the create-overcloud-ffu-script.yaml.\n\nChange-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50\n(cherry picked from commit 6b339ca1a2f1cea3d993806b1129c0d25657874f)\n'}, {'number': 2, 'created': '2021-07-09 14:48:28.000000000', 'files': ['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/ed1188c5b84f0ad67fe3649310fb20b15311835f', 'message': 'Move the upgrade prepare script generation in the build script playbook.\n\nCurrently, the overcloud_upgrade_prepare.sh script was being built in the\novercloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params\nparameter was up to date. However, this parameter is not used anymore in\nthe ffu workflow and the upgrades workflow is not being used by our CI so\nit should be safe to move it back to the create-overcloud-ffu-script.yaml.\n\nChange-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50\n(cherry picked from commit 6b339ca1a2f1cea3d993806b1129c0d25657874f)\n'}]",0,800201,ed1188c5b84f0ad67fe3649310fb20b15311835f,8,3,2,26343,,,0,"Move the upgrade prepare script generation in the build script playbook.

Currently, the overcloud_upgrade_prepare.sh script was being built in the
overcloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params
parameter was up to date. However, this parameter is not used anymore in
the ffu workflow and the upgrades workflow is not being used by our CI so
it should be safe to move it back to the create-overcloud-ffu-script.yaml.

Change-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50
(cherry picked from commit 6b339ca1a2f1cea3d993806b1129c0d25657874f)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/01/800201/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml', 'tasks/fast-forward-upgrade/main.yml']",5,708970f27e61c728f84486469565ffeaf16c5a2d,, ffu_overcloud_prepare|bool or,,29,17
openstack%2Ftripleo-ansible~stable%2Ftrain~If80f48c39ea9fcb09a75711932ddb3958a4e8b16,openstack/tripleo-ansible,stable/train,If80f48c39ea9fcb09a75711932ddb3958a4e8b16,Fix tripleo_backup_and_restore_rear_simulate boolean check,MERGED,2021-07-26 15:35:16.000000000,2021-08-02 15:59:21.000000000,2021-08-02 15:59:21.000000000,"[{'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 23181}, {'_account_id': 32728}]","[{'number': 1, 'created': '2021-07-26 15:35:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9dcccc456381273823b02367d461edbacdc040d1', 'message': 'Fix tripleo_backup_and_restore_rear_simulate boolean check\n\nIf |bool is not added to the check,\n""--extra-vars tripleo_backup_and_restore_rear_simulate=false"" is\nconsidered to be True.\n\nCloses-Bug: #1934777\n\nChange-Id: If80f48c39ea9fcb09a75711932ddb3958a4e8b16\n(cherry picked from commit 07658bc8e030d041baf836f95a15a43a0e315176)\n'}, {'number': 2, 'created': '2021-07-26 15:37:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/943e3900a23c7e41286dce6c3fa5de97bf46cc79', 'message': 'Fix tripleo_backup_and_restore_rear_simulate boolean check\n\nIf |bool is not added to the check,\n""--extra-vars tripleo_backup_and_restore_rear_simulate=false"" is\nconsidered to be True.\n\nCloses-Bug: #1934777\n\nNot a clean cherry pick due to renaming backup_and_restore to\nbackup-and-restore.\n\nChange-Id: If80f48c39ea9fcb09a75711932ddb3958a4e8b16\n(cherry picked from commit 07658bc8e030d041baf836f95a15a43a0e315176)\n'}, {'number': 3, 'created': '2021-07-26 15:39:17.000000000', 'files': ['tripleo_ansible/roles/backup-and-restore/backup/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/323b17296a39f0d20f09af576dc38a984c071ba1', 'message': 'Fix tripleo_backup_and_restore_rear_simulate boolean check\n\nIf |bool is not added to the check,\n""--extra-vars tripleo_backup_and_restore_rear_simulate=false"" is\nconsidered to be True.\n\nCloses-Bug: #1934777\n\nNot a clean cherry pick due to renaming backup_and_restore to\nbackup-and-restore.\n\nChange-Id: If80f48c39ea9fcb09a75711932ddb3958a4e8b16\n(cherry picked from commit 07658bc8e030d041baf836f95a15a43a0e315176)\n'}]",0,802343,323b17296a39f0d20f09af576dc38a984c071ba1,27,6,3,32968,,,0,"Fix tripleo_backup_and_restore_rear_simulate boolean check

If |bool is not added to the check,
""--extra-vars tripleo_backup_and_restore_rear_simulate=false"" is
considered to be True.

Closes-Bug: #1934777

Not a clean cherry pick due to renaming backup_and_restore to
backup-and-restore.

Change-Id: If80f48c39ea9fcb09a75711932ddb3958a4e8b16
(cherry picked from commit 07658bc8e030d041baf836f95a15a43a0e315176)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/43/802343/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/backup_and_restore/tasks/run_backup.yml'],1,9dcccc456381273823b02367d461edbacdc040d1,change-802343-1,"<<<<<<< HEAD (4626e4 Merge ""Explicitly set ceph_dashboard_vip when Ceph Dashboard) ======= --- # Copyright 2019 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # ""backup_and_restore"" will search for and load any operating system variable file # found within the ""vars/"" path. If no OS files are found the task will skip. - name: Gather variables for each operating system include_vars: ""{{ item }}"" with_first_found: - skip: true files: - ""{{ ansible_facts['distribution'] | lower }}-{{ ansible_facts['distribution_version'] | lower }}.yml"" - ""{{ ansible_facts['distribution'] | lower }}-{{ ansible_facts['distribution_major_version'] | lower }}.yml"" - ""{{ ansible_facts['os_family'] | lower }}-{{ ansible_facts['distribution_major_version'] | lower }}.yml"" - ""{{ ansible_facts['distribution'] | lower }}.yml"" - ""{{ ansible_facts['os_family'] | lower }}-{{ ansible_facts['distribution_version'].split('.')[0] }}.yml"" - ""{{ ansible_facts['os_family'] | lower }}.yml"" tags: - always - name: Take this node out of pacemaker command: pcs cluster stop --request-timeout={{ tripleo_backup_and_restore_pcs_timeout }} when: - pacemaker_enabled - tripleo_backup_and_restore_enable_snapshots|bool tags: - bar_create_recover_image - name: Create the node backup command: rear {{ (tripleo_backup_and_restore_rear_simulate | bool) | ternary('-s ', '') }}-d -v mkbackup register: tripleo_backup_and_restore_rear_output when: tripleo_backup_and_restore_rear_output is undefined tags: - bar_create_recover_image - name: Display ReaR recovery image creation output debug: var: tripleo_backup_and_restore_rear_output tags: - bar_create_recover_image - name: Clean old backups shell: | set -o pipefail rm -rf /tmp/rear.* || true rm -rf /var/lib/rear/output/* failed_when: false args: warn: false tags: - bar_create_recover_image >>>>>>> CHANGE (7af78b Fix tripleo_backup_and_restore_rear_simulate boolean check) ",,68,0
openstack%2Fcinder~stable%2Fwallaby~I84ff54268550e4e27fa8b2c8d7d02459c4f6d7c4,openstack/cinder,stable/wallaby,I84ff54268550e4e27fa8b2c8d7d02459c4f6d7c4,[Pure Storage] Fix CG cloning crash when very long volume names,MERGED,2021-07-19 19:54:38.000000000,2021-08-02 15:58:55.000000000,2021-08-02 05:25:38.000000000,"[{'_account_id': 7198}, {'_account_id': 12670}, {'_account_id': 22348}, {'_account_id': 27615}, {'_account_id': 30615}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-07-19 19:54:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/56a77de7ffa2d4e00d047c0f2a0b0e7dc70c77db', 'message': '[Pure Storage] Fix CG cloning crash when very long volume names\n\nSpecifically for PowerVC when volumes have VERY long names they\ncurrently truncated to an acceptible length. This truncation\nwas missing for volumes in a consistency group so when cloning\nof the CG occured, the clone command would fail due to an\nincorrect volume name.\n\nChange-Id: I84ff54268550e4e27fa8b2c8d7d02459c4f6d7c4\nCloses-Bug: #1936663\n(cherry picked from commit eb5c8183b6dcd2800acd04d9254b1be11adcba9f)\n'}, {'number': 2, 'created': '2021-07-29 13:03:51.000000000', 'files': ['cinder/volume/drivers/pure.py', 'releasenotes/notes/pure_fix_clone_cg-cfdf7d16b63882f8.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/80f5ad51259ca82654f9f0307f29a25e748077be', 'message': '[Pure Storage] Fix CG cloning crash when very long volume names\n\nSpecifically for PowerVC when volumes have VERY long names they\ncurrently truncated to an acceptable length. This truncation\nwas missing for volumes in a consistency group so when cloning\nof the CG occured, the clone command would fail due to an\nincorrect volume name.\n\nChange-Id: I84ff54268550e4e27fa8b2c8d7d02459c4f6d7c4\nCloses-Bug: #1936663\n(cherry picked from commit eb5c8183b6dcd2800acd04d9254b1be11adcba9f)\n'}]",2,801321,80f5ad51259ca82654f9f0307f29a25e748077be,48,6,2,13425,,,0,"[Pure Storage] Fix CG cloning crash when very long volume names

Specifically for PowerVC when volumes have VERY long names they
currently truncated to an acceptable length. This truncation
was missing for volumes in a consistency group so when cloning
of the CG occured, the clone command would fail due to an
incorrect volume name.

Change-Id: I84ff54268550e4e27fa8b2c8d7d02459c4f6d7c4
Closes-Bug: #1936663
(cherry picked from commit eb5c8183b6dcd2800acd04d9254b1be11adcba9f)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/21/801321/2 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/drivers/pure.py', 'releasenotes/notes/pure_fix_clone_cg-cfdf7d16b63882f8.yaml']",2,56a77de7ffa2d4e00d047c0f2a0b0e7dc70c77db,bug/1936663,--- fixes: - | Pure Storage FlashArray driver `bug #1936663 <https://bugs.launchpad.net/cinder/+bug/1936663>`_: Fixes issue where cloning a consistency group containing volumes with very long names causes a crash - Required for PowerVC support ,,9,2
openstack%2Fopenstack-helm-infra~master~Id079671f03cc5ddbe694f2aa8c9d2480dc573983,openstack/openstack-helm-infra,master,Id079671f03cc5ddbe694f2aa8c9d2480dc573983,Update mon-check with latest monmap outputs,MERGED,2021-07-30 14:37:45.000000000,2021-08-02 15:47:55.000000000,2021-08-02 15:46:38.000000000,"[{'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 28372}, {'_account_id': 28719}]","[{'number': 1, 'created': '2021-07-30 14:37:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0ee45ac82a71333312b566b6ad9ef93da4f4164d', 'message': 'Update mon-check with latest monmap outputs\n\nThis PS updates the mon-check reap-zombies python script to consider\nthe more recent Ceph changes, including the fact that there is now\na v1 and v2 backend.\n\nChange-Id: Id079671f03cc5ddbe694f2aa8c9d2480dc573983\n'}, {'number': 2, 'created': '2021-07-30 14:52:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e256dae32cd4fcf83d51fabc70b3c27f77f1a6af', 'message': ""Update mon-check with latest monmap outputs\n\nThis PS updates the mon-check reap-zombies python script to consider\nthe more recent Ceph changes, including the fact that there is now\na v1 and v2 backend. In addition, it executes the reap-zombies script\nwith the python3 binary, as the basic 'python' binary does not exist\nin the container.\n\nChange-Id: Id079671f03cc5ddbe694f2aa8c9d2480dc573983\n""}, {'number': 3, 'created': '2021-07-30 16:24:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ae56c017361289091103f39fce1a009db84b8a28', 'message': ""Update mon-check with latest monmap outputs\n\nThis PS updates the mon-check reap-zombies python script to consider\nthe more recent Ceph changes, including the fact that there is now\na v1 and v2 backend. In addition, it executes the reap-zombies script\nwith the python3 binary, as the basic 'python' binary does not exist\nin the container.\n\nChange-Id: Id079671f03cc5ddbe694f2aa8c9d2480dc573983\n""}, {'number': 4, 'created': '2021-07-30 16:30:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f566324f6d1d9746def48099a20c480f99d2a2bb', 'message': ""Update mon-check with latest monmap outputs\n\nThis PS updates the mon-check reap-zombies python script to consider\nthe more recent Ceph changes, including the fact that there is now\na v1 and v2 backend. In addition, it executes the reap-zombies script\nwith the python3 binary, as the basic 'python' binary does not exist\nin the container.\n\nChange-Id: Id079671f03cc5ddbe694f2aa8c9d2480dc573983\n""}, {'number': 5, 'created': '2021-08-02 13:16:39.000000000', 'files': ['ceph-mon/templates/bin/moncheck/_start.sh.tpl', 'ceph-mon/templates/bin/moncheck/_reap-zombies.py.tpl', 'ceph-mon/Chart.yaml', 'releasenotes/notes/ceph-mon.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f26d4db14537a746c9216e0b1a2e684ca847e952', 'message': ""Update mon-check with latest monmap outputs\n\nThis PS updates the mon-check reap-zombies python script to consider\nthe more recent Ceph changes, including the fact that there is now\na v1 and v2 backend. In addition, it executes the reap-zombies script\nwith the python3 binary, as the basic 'python' binary does not exist\nin the container.\n\nChange-Id: Id079671f03cc5ddbe694f2aa8c9d2480dc573983\n""}]",1,803044,f26d4db14537a746c9216e0b1a2e684ca847e952,15,4,5,28275,,,0,"Update mon-check with latest monmap outputs

This PS updates the mon-check reap-zombies python script to consider
the more recent Ceph changes, including the fact that there is now
a v1 and v2 backend. In addition, it executes the reap-zombies script
with the python3 binary, as the basic 'python' binary does not exist
in the container.

Change-Id: Id079671f03cc5ddbe694f2aa8c9d2480dc573983
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/44/803044/5 && git format-patch -1 --stdout FETCH_HEAD,['ceph-mon/templates/bin/moncheck/_reap-zombies.py.tpl'],1,0ee45ac82a71333312b566b6ad9ef93da4f4164d,,"MON_REGEX = r""^\d: \[((v\d+:([0-9\.]*):\d+\/\d+,*)+)] mon.([^ ]*)$"" monmap = subprocess.check_output(monmap_command, shell=True).decode('utf-8') # nosec kubemap = subprocess.check_output(kubectl_command, shell=True).decode('utf-8') # nosec","MON_REGEX = r""^\d: ([0-9\.]*):\d+/\d* mon.([^ ]*)$"" monmap = subprocess.check_output(monmap_command, shell=True) # nosec kubemap = subprocess.check_output(kubectl_command, shell=True) # nosec",3,3
openstack%2Fmanila~master~Idcb204a0dcda92f2bd8cbae37d510d5993c739fe,openstack/manila,master,Idcb204a0dcda92f2bd8cbae37d510d5993c739fe,Use tox 3.1.1 fixes,MERGED,2021-07-29 09:17:19.000000000,2021-08-02 15:47:52.000000000,2021-08-02 15:46:21.000000000,"[{'_account_id': 6413}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}]","[{'number': 1, 'created': '2021-07-29 09:17:19.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/manila/commit/c409caae792eb7024b212c52d63eda8b8f383be9', 'message': 'Use tox 3.1.1 fixes\n\nBy 3.1.1, tox had fixed:\n\n- [1] which mishandled the basepython directive.\n- ignoring PYTHONDONTWRITEBYTECODE [2]\n\nRequire this version and remove the workarounds.\n\nSee ML thread [3] for some details\n\n[1] https://github.com/tox-dev/tox/issues/477\n[2] https://github.com/tox-dev/tox/commit/336f4f6bd8b53223f940fc5cfc43b1bbd78d4699\n[3] http://lists.openstack.org/pipermail/openstack-dev/2018-July/thread.html#132075\n\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nChange-Id: Idcb204a0dcda92f2bd8cbae37d510d5993c739fe\n'}]",0,802850,c409caae792eb7024b212c52d63eda8b8f383be9,13,4,1,15334,,,0,"Use tox 3.1.1 fixes

By 3.1.1, tox had fixed:

- [1] which mishandled the basepython directive.
- ignoring PYTHONDONTWRITEBYTECODE [2]

Require this version and remove the workarounds.

See ML thread [3] for some details

[1] https://github.com/tox-dev/tox/issues/477
[2] https://github.com/tox-dev/tox/commit/336f4f6bd8b53223f940fc5cfc43b1bbd78d4699
[3] http://lists.openstack.org/pipermail/openstack-dev/2018-July/thread.html#132075

Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Change-Id: Idcb204a0dcda92f2bd8cbae37d510d5993c739fe
",git fetch https://review.opendev.org/openstack/manila refs/changes/50/802850/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,c409caae792eb7024b212c52d63eda8b8f383be9,trivial,# Automatic envs (pyXX) will only use the python version appropriate to that # env and ignore basepython inherited from [testenv] if we set # ignore_basepython_conflict. ignore_basepython_conflict = trueusedevelop = true setenv = VIRTUAL_ENV={envdir} PYTHONDONTWRITEBYTECODE=1,"setenv = VIRTUAL_ENV={envdir} usedevelop = True allowlist_externals = find find . -type f -name ""*.py[c|o]"" -delete",8,4
openstack%2Fironic-specs~master~I2b2c4921b92469cccaf80435c2c9a4e12e522988,openstack/ironic-specs,master,I2b2c4921b92469cccaf80435c2c9a4e12e522988,Event Subscription Idea,MERGED,2021-04-10 03:45:41.000000000,2021-08-02 15:44:18.000000000,2021-08-02 15:43:00.000000000,"[{'_account_id': 10239}, {'_account_id': 10342}, {'_account_id': 11076}, {'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 27909}]","[{'number': 1, 'created': '2021-04-10 03:45:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/2422789747933962dd8f0c26efd4fad0c51ca6c7', 'message': 'Event Subscription Spec\n\nThis spec describes implementation of the event subscription API\nin ironic.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}, {'number': 2, 'created': '2021-04-10 04:02:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/f910f109419d885015d34786d32cf30c1b147b50', 'message': 'Event Subscription Spec\n\nThis spec describes implementation of the event subscription API\nin ironic.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}, {'number': 3, 'created': '2021-05-18 20:59:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/d5fb6234cd16b41bff3a20730103fc53fae47a12', 'message': 'Event Subscription Spec\n\nThis spec describes implementation of the event subscription API\nin ironic.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}, {'number': 4, 'created': '2021-05-25 20:07:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/181a0807c920875838cd45f26be79cd612514baf', 'message': 'Event Subscription Spec\n\nThis spec describes implementation of the event subscription API\nin ironic.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}, {'number': 5, 'created': '2021-06-28 07:06:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/602d1116c05612812d2c759dac3575721b106eef', 'message': 'Event Subscription Spec\n\nThis spec describes implementation of the event subscription API\nin ironic.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}, {'number': 6, 'created': '2021-07-09 15:47:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/6b7d81156366bf8e60de67bae122fdf72a2e06b7', 'message': 'Event Subscription Spec\n\nThis spec describes implementation of the event subscription API\nin ironic.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}, {'number': 7, 'created': '2021-07-16 10:00:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/f478a51bf1fa347509f846ceecb5b7d6be5a7530', 'message': 'Event Subscription Spec\n\nThis spec describes implementation of the event subscription API\nin ironic.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}, {'number': 8, 'created': '2021-07-21 14:50:36.000000000', 'files': ['specs/backlog/event-subscription.rst'], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/667cd222e89a8c7415497f63b1bbcac652373a91', 'message': 'Event Subscription Idea\n\nThis spec describes an idea we had about how to implement an\nevent subscription API that works for redfish.\n\nStory: 2008366\nTask: 41275\nChange-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988\n'}]",81,785742,667cd222e89a8c7415497f63b1bbcac652373a91,41,7,8,15519,,,0,"Event Subscription Idea

This spec describes an idea we had about how to implement an
event subscription API that works for redfish.

Story: 2008366
Task: 41275
Change-Id: I2b2c4921b92469cccaf80435c2c9a4e12e522988
",git fetch https://review.opendev.org/openstack/ironic-specs refs/changes/42/785742/8 && git format-patch -1 --stdout FETCH_HEAD,"['specs/approved/event-subscriptions.rst', 'specs/not-implemented/event-subscriptions.rst']",2,2422789747933962dd8f0c26efd4fad0c51ca6c7,event_subscription,../approved/event-subscriptions.rst,,297,0
openstack%2Fbifrost~master~Ibcd0e4aac4dc36ae7b90ebf88d6e18f328fb7094,openstack/bifrost,master,Ibcd0e4aac4dc36ae7b90ebf88d6e18f328fb7094,Update the supported Fedora versions,MERGED,2021-08-02 14:56:14.000000000,2021-08-02 15:16:30.000000000,2021-08-02 15:15:06.000000000,"[{'_account_id': 10342}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-08-02 14:56:14.000000000', 'files': ['releasenotes/notes/fedora-bf306bdbbbea47c5.yaml', 'doc/source/install/index.rst'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/8f94488fe85a73c1cb9f22c7e8b90a8401fd2b10', 'message': 'Update the supported Fedora versions\n\nChange-Id: Ibcd0e4aac4dc36ae7b90ebf88d6e18f328fb7094\n'}]",1,803222,8f94488fe85a73c1cb9f22c7e8b90a8401fd2b10,8,3,1,10239,,,0,"Update the supported Fedora versions

Change-Id: Ibcd0e4aac4dc36ae7b90ebf88d6e18f328fb7094
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/22/803222/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fedora-bf306bdbbbea47c5.yaml', 'doc/source/install/index.rst']",2,8f94488fe85a73c1cb9f22c7e8b90a8401fd2b10,fedora,* Fedora 34 (32+ is supported but not recommended),* Fedora 32 (30 is supported but not recommended),14,1
openstack%2Fcinder~master~I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75,openstack/cinder,master,I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75,[SVF] Fixed add volumes to clone group issue,MERGED,2021-04-05 14:50:21.000000000,2021-08-02 14:45:01.000000000,2021-08-02 14:42:59.000000000,"[{'_account_id': 5997}, {'_account_id': 7198}, {'_account_id': 22348}, {'_account_id': 30615}, {'_account_id': 32036}, {'_account_id': 32171}, {'_account_id': 32266}]","[{'number': 1, 'created': '2021-04-05 14:50:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/8251e45a1f60d95a021d5e4b36c01df3d2498f61', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Adding of volume to a group\nwhich was created from group snapshot of another consistency\ngroup fails and group goes into error state.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 2, 'created': '2021-04-06 04:51:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/b723852774aa6558d3d6b593aaf5e4f4dc03299d', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 3, 'created': '2021-04-08 11:18:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/e58472ef458c3735c9b6df017e6a712f515ac4cc', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 4, 'created': '2021-04-09 04:34:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/f3c436d44d9f7503958b719bde5af0588368d881', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 5, 'created': '2021-04-12 13:29:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/c318d96b4bc3b6619c9698e9bd3c56c9b197c932', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 6, 'created': '2021-04-27 07:03:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/b984f35e8718aa3893be22cc362bed99fbc2bf30', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 7, 'created': '2021-04-27 09:59:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/dfc6fdc2447dc8bc6e1e2c0cd7e6117a8d8d62bb', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 8, 'created': '2021-04-28 07:11:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/c6339f3190bc7b9bcc5273ca4027f7904f03a277', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 9, 'created': '2021-04-30 16:28:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/456168cfa9b6532d54b3b8d9372734e5e9f2140a', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 10, 'created': '2021-04-30 16:34:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/0f98aeb090cddbfaab44487abab75ae50159f58e', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 11, 'created': '2021-05-11 13:03:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/35f61753140de051c64dc8b188dfbcff9b40f25b', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 12, 'created': '2021-05-20 15:02:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/6c3988cc60f935fb13e828dc236e2f60f0e91ac3', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 13, 'created': '2021-06-01 09:30:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/e1fa45a3a96ff5b1b6bf17e614e0b825aa794bf6', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}, {'number': 14, 'created': '2021-06-04 12:52:57.000000000', 'files': ['releasenotes/notes/bug-1920912-add_volumes_to_clone_group_fix-1cc9668ea077831e.yaml', 'cinder/tests/unit/volume/drivers/ibm/test_storwize_svc.py', 'cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/9cd128f071e06bec67e234041b171499c91d1387', 'message': '[SVF] Fixed add volumes to clone group issue\n\n[Spectrum Virtualize Family] Addition of volumes to a group\nfails if the group is cloned from a group-snapshot or another group\ndue to absence of rccg in back-end.\nFixed the issue by creating,updating the rccg in the back-end.\n\ncloses bug: #1920912\n\nChange-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75\n'}]",52,784779,9cd128f071e06bec67e234041b171499c91d1387,316,7,14,32425,,,0,"[SVF] Fixed add volumes to clone group issue

[Spectrum Virtualize Family] Addition of volumes to a group
fails if the group is cloned from a group-snapshot or another group
due to absence of rccg in back-end.
Fixed the issue by creating,updating the rccg in the back-end.

closes bug: #1920912

Change-Id: I335d33ca6219d18a9d4bb345c7e21b1e5a1b0f75
",git fetch https://review.opendev.org/openstack/cinder refs/changes/79/784779/12 && git format-patch -1 --stdout FETCH_HEAD,['cinder/volume/drivers/ibm/storwize_svc/storwize_svc_common.py'],1,8251e45a1f60d95a021d5e4b36c01df3d2498f61,add_vol_to_clone_grp," if volume_utils.is_group_a_type( group, ""consistent_group_replication_enabled""): self._validate_replication_enabled() rccg_name = self._get_rccg_name(group) try: tgt_sys = self._aux_backend_helpers.get_system_info() self._helpers.create_rccg(rccg_name, tgt_sys.get('system_name')) model_update.update({'replication_status': fields.ReplicationStatus.ENABLED}) except exception.VolumeBackendAPIException as err: LOG.error(""Failed to create rccg %(rccg)s. "" ""Exception: %(exception)s."", {'rccg': rccg_name, 'exception': err}) model_update = {'status': fields.GroupStatus.ERROR} volume_metadata=vol.get( 'volume_metadata')) self.update_group(context, group, add_volumes=volumes, remove_volumes=[])", volume_metadata= vol.get('volume_metadata')),19,4
openstack%2Fswift~master~I2347a73ff23c5c7d415f23d864fc29147e4a1754,openstack/swift,master,I2347a73ff23c5c7d415f23d864fc29147e4a1754,s3api: Fix (async) multi-delete of MPUs,MERGED,2021-07-30 04:12:37.000000000,2021-08-02 14:44:45.000000000,2021-08-02 14:43:02.000000000,"[{'_account_id': 7847}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 04:12:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/d4bb03458debed3106199c73bf33639c6bab3470', 'message': 's3api: Fix (async) multi-delete of MPUs\n\nChange-Id: I2347a73ff23c5c7d415f23d864fc29147e4a1754\n'}, {'number': 2, 'created': '2021-07-30 18:44:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/c85d7a511a3077e1f75b644923d39c0859dddfae', 'message': 's3api: Fix (async) multi-delete of MPUs\n\nChange-Id: I2347a73ff23c5c7d415f23d864fc29147e4a1754\n'}, {'number': 3, 'created': '2021-07-31 04:08:09.000000000', 'files': ['test/unit/common/middleware/s3api/test_multi_delete.py', 'test/unit/common/middleware/s3api/test_obj.py', 'swift/common/middleware/s3api/controllers/multi_delete.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/61dd2ee44ac242d64ef412626c03e1e38fec34e9', 'message': 's3api: Fix (async) multi-delete of MPUs\n\nChange-Id: I2347a73ff23c5c7d415f23d864fc29147e4a1754\n'}]",6,802987,61dd2ee44ac242d64ef412626c03e1e38fec34e9,16,3,3,15343,,,0,"s3api: Fix (async) multi-delete of MPUs

Change-Id: I2347a73ff23c5c7d415f23d864fc29147e4a1754
",git fetch https://review.opendev.org/openstack/swift refs/changes/87/802987/3 && git format-patch -1 --stdout FETCH_HEAD,"['test/unit/common/middleware/s3api/test_multi_delete.py', 'test/unit/common/middleware/s3api/test_obj.py', 'swift/common/middleware/s3api/controllers/multi_delete.py']",3,d4bb03458debed3106199c73bf33639c6bab3470,," # For synchronous deletes, have to read the response to # actually do the SLO delete if query.get('multipart-manifest') and not query.get('async'):", # Have to read the response to actually do the SLO delete if query.get('multipart-manifest'):,21,9
openstack%2Fhorizon~stable%2Fussuri~I2ed1b6064ddd6f62818d6112e98e5d5a98beae9d,openstack/horizon,stable/ussuri,I2ed1b6064ddd6f62818d6112e98e5d5a98beae9d,Fix community image handling in launch instance form,MERGED,2021-03-08 04:37:28.000000000,2021-08-02 13:58:00.000000000,2021-08-02 13:56:34.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 6914}, {'_account_id': 8648}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-03-08 04:37:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/fb323f6c48b5f2d2bc93c4b251773088f3842acd', 'message': 'Fix community image handling in launch instance form\n\nCommunity images which are not owned by a focused project are not\nincluded in the normal image list API (i.e., without specifying\n""community"" as visibility), so we need an extra call of the image\nlist API specifying ""community"" visibility in a filter.\n\nIt was originally fixed by [1] but was dropped in [2].\nThe main motivation of [2] is to address ""Duplicates in a repeater\nare not allowed"" error in the JavaScript console.\n\nThe approach of [2] was to drop multiple glance API calls, but\nthe right solution would be to check duplicated images included\nin both API calls. This situation with duplicated images happens\nwhen a community image is owned by a focused project. In such case,\nthe community image is included in the responses of both API calls.\n\nThis commit adds a logic to check image IDs already processed.\n\n[1] https://review.opendev.org/c/openstack/horizon/+/614688\n[2] https://review.opendev.org/c/openstack/horizon/+/640762\n\nCloses-Bug: #1914045\nRelated-Bug: #1779250\nRelated-Bug: #1818508\n\nChange-Id: I2ed1b6064ddd6f62818d6112e98e5d5a98beae9d\n(cherry picked from commit c9bb0e95eaa7ae4f0cce21bc0a246a9b0cd2f880)\n'}, {'number': 2, 'created': '2021-03-08 06:24:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/94bd872e6e2dde22b6bc768eafa3c65851f2f372', 'message': 'Fix community image handling in launch instance form\n\nCommunity images which are not owned by a focused project are not\nincluded in the normal image list API (i.e., without specifying\n""community"" as visibility), so we need an extra call of the image\nlist API specifying ""community"" visibility in a filter.\n\nIt was originally fixed by [1] but was dropped in [2].\nThe main motivation of [2] is to address ""Duplicates in a repeater\nare not allowed"" error in the JavaScript console.\n\nThe approach of [2] was to drop multiple glance API calls, but\nthe right solution would be to check duplicated images included\nin both API calls. This situation with duplicated images happens\nwhen a community image is owned by a focused project. In such case,\nthe community image is included in the responses of both API calls.\n\nThis commit adds a logic to check image IDs already processed.\n\n[1] https://review.opendev.org/c/openstack/horizon/+/614688\n[2] https://review.opendev.org/c/openstack/horizon/+/640762\n\nCloses-Bug: #1914045\nRelated-Bug: #1779250\nRelated-Bug: #1818508\n\nChange-Id: I2ed1b6064ddd6f62818d6112e98e5d5a98beae9d\n(cherry picked from commit c9bb0e95eaa7ae4f0cce21bc0a246a9b0cd2f880)\n'}, {'number': 3, 'created': '2021-05-13 05:27:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/5b5d25092b9628e818636042a0366143e20606a5', 'message': 'Fix community image handling in launch instance form\n\nCommunity images which are not owned by a focused project are not\nincluded in the normal image list API (i.e., without specifying\n""community"" as visibility), so we need an extra call of the image\nlist API specifying ""community"" visibility in a filter.\n\nIt was originally fixed by [1] but was dropped in [2].\nThe main motivation of [2] is to address ""Duplicates in a repeater\nare not allowed"" error in the JavaScript console.\n\nThe approach of [2] was to drop multiple glance API calls, but\nthe right solution would be to check duplicated images included\nin both API calls. This situation with duplicated images happens\nwhen a community image is owned by a focused project. In such case,\nthe community image is included in the responses of both API calls.\n\nThis commit adds a logic to check image IDs already processed.\n\n[1] https://review.opendev.org/c/openstack/horizon/+/614688\n[2] https://review.opendev.org/c/openstack/horizon/+/640762\n\nCloses-Bug: #1914045\nRelated-Bug: #1779250\nRelated-Bug: #1818508\n\nChange-Id: I2ed1b6064ddd6f62818d6112e98e5d5a98beae9d\n(cherry picked from commit c9bb0e95eaa7ae4f0cce21bc0a246a9b0cd2f880)\n'}, {'number': 4, 'created': '2021-05-13 05:47:50.000000000', 'files': ['openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/launch-instance-model.service.js', 'openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/launch-instance-model.service.spec.js'], 'web_link': 'https://opendev.org/openstack/horizon/commit/9467071b6d37e523659dcf62335ac7f7d54c4e0f', 'message': 'Fix community image handling in launch instance form\n\nCommunity images which are not owned by a focused project are not\nincluded in the normal image list API (i.e., without specifying\n""community"" as visibility), so we need an extra call of the image\nlist API specifying ""community"" visibility in a filter.\n\nIt was originally fixed by [1] but was dropped in [2].\nThe main motivation of [2] is to address ""Duplicates in a repeater\nare not allowed"" error in the JavaScript console.\n\nThe approach of [2] was to drop multiple glance API calls, but\nthe right solution would be to check duplicated images included\nin both API calls. This situation with duplicated images happens\nwhen a community image is owned by a focused project. In such case,\nthe community image is included in the responses of both API calls.\n\nThis commit adds a logic to check image IDs already processed.\n\n[1] https://review.opendev.org/c/openstack/horizon/+/614688\n[2] https://review.opendev.org/c/openstack/horizon/+/640762\n\nCloses-Bug: #1914045\nRelated-Bug: #1779250\nRelated-Bug: #1818508\n\nChange-Id: I2ed1b6064ddd6f62818d6112e98e5d5a98beae9d\n(cherry picked from commit c9bb0e95eaa7ae4f0cce21bc0a246a9b0cd2f880)\n'}]",0,779013,9467071b6d37e523659dcf62335ac7f7d54c4e0f,16,6,4,29313,,,0,"Fix community image handling in launch instance form

Community images which are not owned by a focused project are not
included in the normal image list API (i.e., without specifying
""community"" as visibility), so we need an extra call of the image
list API specifying ""community"" visibility in a filter.

It was originally fixed by [1] but was dropped in [2].
The main motivation of [2] is to address ""Duplicates in a repeater
are not allowed"" error in the JavaScript console.

The approach of [2] was to drop multiple glance API calls, but
the right solution would be to check duplicated images included
in both API calls. This situation with duplicated images happens
when a community image is owned by a focused project. In such case,
the community image is included in the responses of both API calls.

This commit adds a logic to check image IDs already processed.

[1] https://review.opendev.org/c/openstack/horizon/+/614688
[2] https://review.opendev.org/c/openstack/horizon/+/640762

Closes-Bug: #1914045
Related-Bug: #1779250
Related-Bug: #1818508

Change-Id: I2ed1b6064ddd6f62818d6112e98e5d5a98beae9d
(cherry picked from commit c9bb0e95eaa7ae4f0cce21bc0a246a9b0cd2f880)
",git fetch https://review.opendev.org/openstack/horizon refs/changes/13/779013/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/launch-instance-model.service.js', 'openstack_dashboard/dashboards/project/static/dashboard/project/workflow/launch-instance/launch-instance-model.service.spec.js']",2,fb323f6c48b5f2d2bc93c4b251773088f3842acd,bug/1914045," getImages: function (params) { var images; if (params.visibility === 'community') { images = [ {id: '10', container_format: 'raw', properties: {image_type: 'image'}, visibility: 'community'}, // ID 6 is already returned by the first call (below), so this should be ignored. // To clarify the difference, the content here is different intentionally. {id: '6', container_format: 'raw', properties: {image_type: 'image'}, visibility: 'community'}, ]; } else { images = [ // container_format aki and ari are not considered as bootable {id: '1', container_format: 'aki', properties: {}}, {id: '2', container_format: 'ari', properties: {}}, // The following images are considered as ""image"" sources. {id: '3', container_format: 'ami', properties: {}, name: 'ami_image'}, {id: '4', container_format: 'raw', properties: {}, name: 'raw_image'}, {id: '5', container_format: 'ami', properties: {image_type: 'image'}}, {id: '6', container_format: 'raw', properties: {image_type: 'image'}}, // The following images are considered as ""snapshot"" sources. {id: '7', container_format: 'ami', properties: {block_device_mapping: '[{""source_type"": ""snapshot""}]'}}, {id: '8', container_format: 'raw', properties: {block_device_mapping: '[{""source_type"": ""snapshot""}]'}}, {id: '9', container_format: 'raw', properties: {image_type: 'snapshot'}}, ]; } {id: '3', container_format: 'ami', properties: {}, name: 'ami_image', name_or_id: 'ami_image'}, {id: '4', container_format: 'raw', properties: {}, name: 'raw_image', name_or_id: 'raw_image'}, {id: '5', container_format: 'ami', properties: {image_type: 'image'}, name_or_id: '5'}, {id: '6', container_format: 'raw', properties: {image_type: 'image'}, name_or_id: '6'}, {id: '10', container_format: 'raw', properties: {image_type: 'image'}, name_or_id: '10', visibility: 'community'}, {id: '7', container_format: 'ami', properties: {block_device_mapping: '[{""source_type"": ""snapshot""}]'}}, {id: '8', container_format: 'raw', properties: {block_device_mapping: '[{""source_type"": ""snapshot""}]'}}, {id: '9', container_format: 'raw', properties: {image_type: 'snapshot'}},"," $provide.value('horizon.app.core.openstack-service-api.glance', { getImages: function () { var images = [ {container_format: 'aki', properties: {}}, {container_format: 'ari', properties: {}}, {container_format: 'ami', properties: {}}, {container_format: 'raw', properties: {}}, {container_format: 'ami', properties: {image_type: 'image'}}, {container_format: 'raw', properties: {image_type: 'image'}}, {container_format: 'ami', properties: { block_device_mapping: '[{""source_type"": ""snapshot""}]'}}, {container_format: 'raw', properties: { block_device_mapping: '[{""source_type"": ""snapshot""}]'}} ]; {container_format: 'ami', properties: {}}, {container_format: 'raw', properties: {}}, {container_format: 'ami', properties: {image_type: 'image'}}, {container_format: 'raw', properties: {image_type: 'image'}} { container_format: 'ami', properties: {block_device_mapping: '[{""source_type"": ""snapshot""}]'} }, { container_format: 'raw', properties: {block_device_mapping: '[{""source_type"": ""snapshot""}]'} }",63,33
openstack%2Fbifrost~master~Ib8e55dc9909381740d79fc660e46ecd329b89283,openstack/bifrost,master,Ib8e55dc9909381740d79fc660e46ecd329b89283,Keep sushy-emulator state directory in /var/lib,MERGED,2021-07-28 16:37:09.000000000,2021-08-02 13:25:23.000000000,2021-08-02 13:23:58.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-28 16:37:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/d053f58b6d4b5464b2c405348252d45bd9e0f9a5', 'message': ""Keep sushy-emulator state directory in /var/lib\n\nBy default it's in /tmp, which means that it can be removed on reboot\nor even during normal operation (after some time).\n\nChange-Id: Ib8e55dc9909381740d79fc660e46ecd329b89283\n""}, {'number': 2, 'created': '2021-07-28 16:44:06.000000000', 'files': ['playbooks/roles/bifrost-create-vm-nodes/tasks/prepare_libvirt.yml', 'playbooks/roles/bifrost-create-vm-nodes/templates/redfish-emulator.conf.j2', 'playbooks/roles/bifrost-create-vm-nodes/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/369693328544bf240642e143aab97590f07449c4', 'message': ""Keep sushy-emulator state directory in /var/lib\n\nBy default it's in /tmp, which means that it can be removed on reboot\nor even during normal operation (after some time).\n\nChange-Id: Ib8e55dc9909381740d79fc660e46ecd329b89283\n""}]",0,802754,369693328544bf240642e143aab97590f07449c4,9,3,2,10239,,,0,"Keep sushy-emulator state directory in /var/lib

By default it's in /tmp, which means that it can be removed on reboot
or even during normal operation (after some time).

Change-Id: Ib8e55dc9909381740d79fc660e46ecd329b89283
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/54/802754/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/roles/bifrost-create-vm-nodes/tasks/prepare_libvirt.yml', 'playbooks/roles/bifrost-create-vm-nodes/templates/redfish-emulator.conf.j2', 'playbooks/roles/bifrost-create-vm-nodes/defaults/main.yml']",3,d053f58b6d4b5464b2c405348252d45bd9e0f9a5,sushy-state-dir,redfish_emulator_state_dir: /var/lib/redfish-emulator,,34,1
openstack%2Fhorizon~stable%2Fussuri~Iba4215b2e3a414d1794faa05be31bf69e0e48bec,openstack/horizon,stable/ussuri,Iba4215b2e3a414d1794faa05be31bf69e0e48bec,Change with_data=False for swift_get_container,MERGED,2021-07-19 10:25:18.000000000,2021-08-02 13:13:18.000000000,2021-08-02 13:11:51.000000000,"[{'_account_id': 841}, {'_account_id': 8648}, {'_account_id': 16137}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-07-19 10:25:18.000000000', 'files': ['openstack_dashboard/api/swift.py', 'openstack_dashboard/test/unit/api/test_swift.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/489ba5713d0c29e433eada217a20d45f949502dd', 'message': ""Change with_data=False for swift_get_container\n\nThis function is only used in the Container get\nmethod which retrieves details about a container.\n\nIt's not used for listing data in the container\neven though with_data was True doing a GET instead\nof a HEAD on the container.\n\nThis indirectly also fixes the Ceph bug [1] in the\nSwift API implementation that doesn't expose metadata\ncorrectly for a GET but does for a HEAD.\n\n[1] https://tracker.ceph.com/issues/47861\n\nChange-Id: Iba4215b2e3a414d1794faa05be31bf69e0e48bec\n(cherry picked from commit c87f0e7a90d05f9355bd58165c25561dedae36d5)\n(cherry picked from commit 8232ac0385782e8131b071fa1324001c1c429aaf)\n(cherry picked from commit 0d14e7dd190a906895af74ee0e1cbc8037a3aaad)\n""}]",0,801280,489ba5713d0c29e433eada217a20d45f949502dd,10,5,1,32755,,,0,"Change with_data=False for swift_get_container

This function is only used in the Container get
method which retrieves details about a container.

It's not used for listing data in the container
even though with_data was True doing a GET instead
of a HEAD on the container.

This indirectly also fixes the Ceph bug [1] in the
Swift API implementation that doesn't expose metadata
correctly for a GET but does for a HEAD.

[1] https://tracker.ceph.com/issues/47861

Change-Id: Iba4215b2e3a414d1794faa05be31bf69e0e48bec
(cherry picked from commit c87f0e7a90d05f9355bd58165c25561dedae36d5)
(cherry picked from commit 8232ac0385782e8131b071fa1324001c1c429aaf)
(cherry picked from commit 0d14e7dd190a906895af74ee0e1cbc8037a3aaad)
",git fetch https://review.opendev.org/openstack/horizon refs/changes/80/801280/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/swift.py', 'openstack_dashboard/test/unit/api/test_swift.py']",2,489ba5713d0c29e433eada217a20d45f949502dd,," cont = api.swift.swift_get_container(self.request, container.name, with_data=True)"," cont = api.swift.swift_get_container(self.request, container.name)",3,2
openstack%2Foslo.middleware~master~I3f1df7c28f6be61b6a653beae7b4568ced2fa7a9,openstack/oslo.middleware,master,I3f1df7c28f6be61b6a653beae7b4568ced2fa7a9,healthcheck: Allow overriding backend and disable path(s),NEW,2021-07-12 16:26:19.000000000,2021-08-02 13:10:21.000000000,,"[{'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-12 16:26:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.middleware/commit/712c1a6b222f0e95d97228e5282eaa1c2419a548', 'message': 'healthcheck: Allow overriding backend and disable path(s)\n\nThis change allows overriding the following parameters of healthcheck\nmiddleware, so that each services can define its own defaults.\n\n - backends\n - disable_by_file_path\n - disable_by_file_paths\n\nChange-Id: I3f1df7c28f6be61b6a653beae7b4568ced2fa7a9\n'}, {'number': 2, 'created': '2021-07-12 16:33:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.middleware/commit/8aee37033175503f9612e5ea4435f71593b16849', 'message': 'healthcheck: Allow overriding backend and disable path(s)\n\nThis change allows overriding the following parameters of healthcheck\nmiddleware, so that each services can define its own defaults.\n\n - backends\n - disable_by_file_path\n - disable_by_file_paths\n\nChange-Id: I3f1df7c28f6be61b6a653beae7b4568ced2fa7a9\n'}, {'number': 3, 'created': '2021-07-15 03:02:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.middleware/commit/8633c68d9eee64d8a685f5c0c550dd401a4e5e2d', 'message': 'healthcheck: Allow overriding backend and disable path(s)\n\nThis change allows overriding the following parameters of healthcheck\nmiddleware, so that each services can define its own defaults.\n\n - backends\n - disable_by_file_path\n - disable_by_file_paths\n\nChange-Id: I3f1df7c28f6be61b6a653beae7b4568ced2fa7a9\n'}, {'number': 4, 'created': '2021-08-02 11:52:17.000000000', 'files': ['oslo_middleware/tests/test_healthcheck.py', 'oslo_middleware/healthcheck/__init__.py'], 'web_link': 'https://opendev.org/openstack/oslo.middleware/commit/139650e634a399e442d8fa1bb417cecbd74c6e6c', 'message': 'healthcheck: Allow overriding backend and disable path(s)\n\nThis change allows overriding the following parameters of healthcheck\nmiddleware, so that each services can define its own defaults.\n\n - backends\n - disable_by_file_path\n - disable_by_file_paths\n\nThis mechanism is required by some components like ironic which does\nnot use api-paste.ini to set up api pipelines.\n\nChange-Id: I3f1df7c28f6be61b6a653beae7b4568ced2fa7a9\n'}]",6,800513,139650e634a399e442d8fa1bb417cecbd74c6e6c,10,2,4,9816,,,0,"healthcheck: Allow overriding backend and disable path(s)

This change allows overriding the following parameters of healthcheck
middleware, so that each services can define its own defaults.

 - backends
 - disable_by_file_path
 - disable_by_file_paths

This mechanism is required by some components like ironic which does
not use api-paste.ini to set up api pipelines.

Change-Id: I3f1df7c28f6be61b6a653beae7b4568ced2fa7a9
",git fetch https://review.opendev.org/openstack/oslo.middleware refs/changes/13/800513/4 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_middleware/tests/test_healthcheck.py', 'oslo_middleware/healthcheck/__init__.py']",2,712c1a6b222f0e95d97228e5282eaa1c2419a548,healthcheck-override,"import itertoolsfrom oslo_config import cfgdef set_defaults(**kwargs): """"""Override the default values for configuration options. This method permits a project to override the default healthcheck option values. """""" valid_params = set(['backends', 'disable_by_file_path', 'disable_by_file_paths']) passed_params = set(k for k in kwargs) wrong_params = passed_params - valid_params if wrong_params: raise AttributeError('Parameter(s) [%s] invalid, please only use [%s]' % (wrong_params, valid_params)) # Set global defaults. if 'backends' in passed_params: cfg.set_defaults(opts.HEALTHCHECK_OPTS, backends=kwargs['backends']) if 'disable_by_file_path' in passed_params: cfg.set_defaults( opts.DISABLE_BY_FILE_OPTS, disable_by_file_path=kwargs['disable_by_file_path']) if 'disable_by_file_paths' in passed_params: cfg.set_defaults( opts.DISABLE_BY_FILES_OPTS, disable_by_file_paths=kwargs['disable_by_file_paths']) ",,46,0
openstack%2Fhorizon~stable%2Fussuri~Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb,openstack/horizon,stable/ussuri,Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb,Fix Unable to use multiattach volume as boot for new server,MERGED,2021-07-28 17:32:06.000000000,2021-08-02 12:50:44.000000000,2021-08-02 12:49:13.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 8648}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-07-28 17:32:06.000000000', 'files': ['openstack_dashboard/api/microversions.py', 'openstack_dashboard/test/unit/api/test_nova.py', 'openstack_dashboard/api/nova.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/90a5c57702fc1eeba9734b495fbf35ab61473d03', 'message': 'Fix Unable to use multiattach volume as boot for new server\n\nIf we try to create a new server from a bootable volume that\nsupports multiattach, it will fail to create with an error\nmessage that ``multiattach volumes are only supported starting\nwith compute API version 2.60``. This patch fixes the issue.\n\nCloses-Bug: #1931440\nChange-Id: Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb\n(cherry picked from commit 64fe0abb653950c85d455dedd09ef42856c6b07b)\n'}]",0,802770,90a5c57702fc1eeba9734b495fbf35ab61473d03,9,5,1,6914,,,0,"Fix Unable to use multiattach volume as boot for new server

If we try to create a new server from a bootable volume that
supports multiattach, it will fail to create with an error
message that ``multiattach volumes are only supported starting
with compute API version 2.60``. This patch fixes the issue.

Closes-Bug: #1931440
Change-Id: Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb
(cherry picked from commit 64fe0abb653950c85d455dedd09ef42856c6b07b)
",git fetch https://review.opendev.org/openstack/horizon refs/changes/70/802770/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/microversions.py', 'openstack_dashboard/test/unit/api/test_nova.py', 'openstack_dashboard/api/nova.py']",3,90a5c57702fc1eeba9734b495fbf35ab61473d03,," microversion = get_microversion(request, (""multiattach"", ""instance_description"","," microversion = get_microversion(request, (""instance_description"",",5,4
openstack%2Fpython-glanceclient~master~I3709f6a39535aa45bee70f468f015ac60a1375a8,openstack/python-glanceclient,master,I3709f6a39535aa45bee70f468f015ac60a1375a8,Add member-get command,MERGED,2021-07-29 12:36:53.000000000,2021-08-02 12:41:59.000000000,2021-08-02 12:40:42.000000000,"[{'_account_id': 4393}, {'_account_id': 8122}, {'_account_id': 9303}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2021-07-29 12:36:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-glanceclient/commit/071ed37eea5b2766bca046bfd3306e5fe8d622f7', 'message': 'Add member-get command\n\nChange-Id: I3709f6a39535aa45bee70f468f015ac60a1375a8\n'}, {'number': 2, 'created': '2021-08-02 04:48:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-glanceclient/commit/11e8a68a8fe9a20719db26d772f12c4c67610c42', 'message': 'Add member-get command\n\nThis patch adds the missing member get command.\n\nCloses-Bug: #1938154\n\nChange-Id: I3709f6a39535aa45bee70f468f015ac60a1375a8\n'}, {'number': 3, 'created': '2021-08-02 09:12:04.000000000', 'files': ['glanceclient/tests/unit/v2/test_members.py', 'glanceclient/tests/unit/v2/releasenotes/notes/add-member-get-command-11c15e0a94ecd39a.yaml', 'glanceclient/v2/image_members.py', 'glanceclient/tests/unit/v2/test_shell_v2.py', 'glanceclient/v2/shell.py'], 'web_link': 'https://opendev.org/openstack/python-glanceclient/commit/cb084f5289c5c23bdb9fabb413a81b32acb5a498', 'message': 'Add member-get command\n\nIt is observed that python-glanceclient was missing support for GET /v2/image/{image_id}/member/{member_id} API.\nThis patch adds new command `member-get` to support this missing operation.\n\nCloses-Bug: #1938154\n\nChange-Id: I3709f6a39535aa45bee70f468f015ac60a1375a8\n'}]",10,802890,cb084f5289c5c23bdb9fabb413a81b32acb5a498,17,5,3,33765,,,0,"Add member-get command

It is observed that python-glanceclient was missing support for GET /v2/image/{image_id}/member/{member_id} API.
This patch adds new command `member-get` to support this missing operation.

Closes-Bug: #1938154

Change-Id: I3709f6a39535aa45bee70f468f015ac60a1375a8
",git fetch https://review.opendev.org/openstack/python-glanceclient refs/changes/90/802890/3 && git format-patch -1 --stdout FETCH_HEAD,"['glanceclient/v2/image_members.py', 'glanceclient/v2/shell.py']",2,071ed37eea5b2766bca046bfd3306e5fe8d622f7,," help=_('Image from which to display member.')) @utils.arg('member_id', metavar='<MEMBER_ID>', help=_('Tenant to display.')) def do_member_get(gc, args): """"""Describe an image member"""""" if not (args.image_id and args.member_id): utils.exit('Unable to find member. Specify image_id and member_id') else: member = gc.image_members.get(args.image_id, args.member_id) member = [member] columns = ['Image ID', 'Member ID', 'Status'] utils.print_list(member, columns) @utils.arg('image_id', metavar='<IMAGE_ID>',",,20,1
openstack%2Fcharm-mysql-innodb-cluster~stable%2F21.04~Id2ad80c14e80d94e6d38793ee6d9d9fd393a854a,openstack/charm-mysql-innodb-cluster,stable/21.04,Id2ad80c14e80d94e6d38793ee6d9d9fd393a854a,rebuild - restore proxy env vars for add-apt-repository,MERGED,2021-07-02 17:24:44.000000000,2021-08-02 12:26:09.000000000,2021-08-02 12:26:09.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-02 17:24:44.000000000', 'files': ['rebuild'], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/665f8c298ae41fa3508ecb2a4226b7374121e79f', 'message': 'rebuild - restore proxy env vars for add-apt-repository\n\nChange-Id: Id2ad80c14e80d94e6d38793ee6d9d9fd393a854a\n'}]",0,799298,665f8c298ae41fa3508ecb2a4226b7374121e79f,21,5,1,11805,,,0,"rebuild - restore proxy env vars for add-apt-repository

Change-Id: Id2ad80c14e80d94e6d38793ee6d9d9fd393a854a
",git fetch https://review.opendev.org/openstack/charm-mysql-innodb-cluster refs/changes/98/799298/1 && git format-patch -1 --stdout FETCH_HEAD,['rebuild'],1,665f8c298ae41fa3508ecb2a4226b7374121e79f,batch-update,8ec54ca2-db58-11eb-9451-e73c6b4884bc,2b0b9db3-5e30-41df-803f-6669809eeaa4,1,1
openstack%2Fkolla~master~Ia42c8c630c049b3e28c032799528265879b161fa,openstack/kolla,master,Ia42c8c630c049b3e28c032799528265879b161fa,sync requirements with openstack/requirements,ABANDONED,2021-07-29 08:56:10.000000000,2021-08-02 12:18:01.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 08:56:10.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/kolla/commit/78d95a91a2574af11fc28ddea16520bdbe56f790', 'message': 'sync requirements with openstack/requirements\n\nBumped all versions to current upper-constraints.txt ones.\n\nChange-Id: Ia42c8c630c049b3e28c032799528265879b161fa\n'}]",0,802845,78d95a91a2574af11fc28ddea16520bdbe56f790,10,2,1,24072,,,0,"sync requirements with openstack/requirements

Bumped all versions to current upper-constraints.txt ones.

Change-Id: Ia42c8c630c049b3e28c032799528265879b161fa
",git fetch https://review.opendev.org/openstack/kolla refs/changes/45/802845/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'doc/requirements.txt']",3,78d95a91a2574af11fc28ddea16520bdbe56f790,,"doc8>=0.9.0 # Apache-2.0 openstackdocstheme>=2.3.0 # Apache-2.0 reno>=3.3.0 # Apache-2.0 sphinx>=4.1.1,!=2.1.0 # BSD sphinxcontrib-svg2pdfconverter>=1.1.1 # BSD","doc8>=0.6.0 # Apache-2.0 openstackdocstheme>=2.2.1 # Apache-2.0 reno>=3.1.0 # Apache-2.0 sphinx>=2.0.0,!=2.1.0 # BSD sphinxcontrib-svg2pdfconverter>=0.1.0 # BSD",17,17
openstack%2Ftrove~master~I05a07402388d214dc95071be709191f63af49411,openstack/trove,master,I05a07402388d214dc95071be709191f63af49411,Run reset master when setting up mysql replicas,MERGED,2021-08-01 23:17:49.000000000,2021-08-02 12:11:10.000000000,2021-08-02 12:09:47.000000000,"[{'_account_id': 6732}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-01 23:17:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/29246c76fae0c248763aec9f0f9e6c15336bc766', 'message': ""Run reset master when setting up mysql replicas\n\n* Only run 'FLUSH PRIVILEGES;' when needed\n* Fix SqlClient contextmanager initialization\n\nStory: 2009091\nTask: 42921\n\nChange-Id: I05a07402388d214dc95071be709191f63af49411\n""}, {'number': 2, 'created': '2021-08-02 09:43:07.000000000', 'files': ['trove/guestagent/datastore/mysql_common/service.py', 'trove/guestagent/strategies/replication/mysql_gtid.py', 'trove/guestagent/utils/mysql.py'], 'web_link': 'https://opendev.org/openstack/trove/commit/a12b2be7060f6a98d5ff52a0823b40f012a31449', 'message': ""Run reset master when setting up mysql replicas\n\n* Only run 'FLUSH PRIVILEGES;' when needed\n* Fix SqlClient contextmanager initialization\n\nStory: 2009091\nTask: 42921\n\nChange-Id: I05a07402388d214dc95071be709191f63af49411\n""}]",0,803126,a12b2be7060f6a98d5ff52a0823b40f012a31449,10,2,2,6732,,,0,"Run reset master when setting up mysql replicas

* Only run 'FLUSH PRIVILEGES;' when needed
* Fix SqlClient contextmanager initialization

Story: 2009091
Task: 42921

Change-Id: I05a07402388d214dc95071be709191f63af49411
",git fetch https://review.opendev.org/openstack/trove refs/changes/26/803126/1 && git format-patch -1 --stdout FETCH_HEAD,"['trove/guestagent/datastore/mysql_common/service.py', 'trove/guestagent/strategies/replication/mysql_gtid.py', 'trove/guestagent/utils/mysql.py']",3,29246c76fae0c248763aec9f0f9e6c15336bc766,reset-master-for-replica," def __init__(self, engine, use_flush=False): return self except Exception as err: LOG.error(f'Failed to execute SQL {t}, error: {err}') raise err"," def __init__(self, engine, use_flush=True): return self.conn except Exception: raise",43,23
openstack%2Fkolla~master~I055086ab4af37878e81844f1055bc48d84ae9945,openstack/kolla,master,I055086ab4af37878e81844f1055bc48d84ae9945,Fix missing pacemaker-cli-utils in Debian hacluster images,MERGED,2021-07-07 10:08:48.000000000,2021-08-02 12:10:16.000000000,2021-08-02 12:08:56.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-07 10:08:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/0a13d28c79dcdecb674a46790d643269aa4e89bb', 'message': 'Fix missing pacemaker-cli-utils in debuntu hacluster images\n\nHacluster images need to have pacemaker cli utils available\nin Debian/Ubuntu and they are provided by pacemaker-cli-utils\npackage. This package is also *recommended* dependency of pacemaker\nand pacemaker-remote in both Debian/Ubuntu systems, but\nunfortunatelly it is not installed via APT by default.\n\nThis patch adding this package to list of package to be installed\non Debian/Ubuntu systems.\n\nCloses-Bug: #1934788\nChange-Id: I055086ab4af37878e81844f1055bc48d84ae9945\n'}, {'number': 2, 'created': '2021-07-08 12:26:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/cd461f273c55365190bbece7bcef6aebe1c1dc30', 'message': 'Fix missing pacemaker-cli-utils in debuntu hacluster images\n\nHacluster images need to have pacemaker cli utils available\nin Debian/Ubuntu and they are provided by pacemaker-cli-utils\npackage. This package is also *recommended* dependency of pacemaker\nand pacemaker-remote in both Debian/Ubuntu systems, but\nunfortunatelly it is not installed via APT by default.\n\nThis patch adding this package to list of package to be installed\non Debian/Ubuntu systems.\n\nCloses-Bug: #1934788\nChange-Id: I055086ab4af37878e81844f1055bc48d84ae9945\n'}, {'number': 3, 'created': '2021-07-29 09:39:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/f309c94ca40f1ee4ebcf4eac6534ee05793d55f7', 'message': 'Fix missing pacemaker-cli-utils in Debian hacluster images\n\nHacluster-pacemaker images need to have pacemaker cli utils\navailable in all distros and they are provided by pacemaker-cli-utils\npackage in Debuntu systems. Due to a different dependency chain\nthis package is not installed in Debian. This package is also\n*recommended* dependency of pacemaker and pacemaker-remote in both\nDebian/Ubuntu systems, but unfortunatelly it is not installed\non Debian via APT by default.\n\nThis patch adding this package to list of package to be installed\non Debian/Ubuntu systems for both hacluster-pacemaker (required)\nand hacluster-pacemaker-remote (to ease with debugging).\n\nCloses-Bug: #1934788\nChange-Id: I055086ab4af37878e81844f1055bc48d84ae9945\n'}, {'number': 4, 'created': '2021-07-30 11:08:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/8ddc9cc25c0e181d77b9cfd7551602718244c057', 'message': 'Fix missing pacemaker-cli-utils in Debian hacluster images\n\nHacluster-pacemaker images need to have pacemaker cli utils\navailable in all distros and they are provided by pacemaker-cli-utils\npackage in Debuntu systems. Due to a different dependency chain\nthis package is not installed in Debian. This package is also\n*recommended* dependency of pacemaker and pacemaker-remote in both\nDebian/Ubuntu systems, but unfortunatelly it is not installed\non Debian via APT by default.\n\nThis patch adding this package to list of package to be installed\non Debian/Ubuntu systems for both hacluster-pacemaker (required)\nand hacluster-pacemaker-remote (to ease with debugging).\n\nCloses-Bug: #1934788\nChange-Id: I055086ab4af37878e81844f1055bc48d84ae9945\n'}, {'number': 5, 'created': '2021-07-30 11:17:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/7555c96c61b018b0015fee9f11cd2b8421b22884', 'message': 'Fix missing pacemaker-cli-utils in Debian hacluster images\n\nHacluster-pacemaker images need to have pacemaker cli utils\navailable in all distros and they are provided by pacemaker-cli-utils\npackage in Debuntu systems. Due to a different dependency chain\nthis package is not installed in Debian. This package is also\n*recommended* dependency of pacemaker and pacemaker-remote in both\nDebian/Ubuntu systems, but unfortunatelly it is not installed\non Debian via APT by default.\n\nThis patch adding this package to list of package to be installed\non Debian/Ubuntu systems for both hacluster-pacemaker (required)\nand hacluster-pacemaker-remote (to ease with debugging).\n\nCloses-Bug: #1934788\nChange-Id: I055086ab4af37878e81844f1055bc48d84ae9945\n'}, {'number': 6, 'created': '2021-07-30 11:26:46.000000000', 'files': ['docker/hacluster/hacluster-pacemaker-remote/Dockerfile.j2', 'releasenotes/notes/bug-1934788-b1fd51f443479fb6.yaml', 'docker/hacluster/hacluster-pacemaker/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/535c861d99aa0c07ea130d1f30cabb6af3db7ab7', 'message': 'Fix missing pacemaker-cli-utils in Debian hacluster images\n\nHacluster-pacemaker images need to have pacemaker cli utils\navailable in all distros and they are provided by pacemaker-cli-utils\npackage in Debuntu systems. Due to a different dependency chain\nthis package is not installed in Debian. This package is also\n*recommended* dependency of pacemaker and pacemaker-remote in both\nDebian/Ubuntu systems, but unfortunatelly it is not installed\non Debian via APT by default.\n\nThis patch adding this package to list of package to be installed\non Debian/Ubuntu systems for both hacluster-pacemaker (required)\nand hacluster-pacemaker-remote (to ease with debugging).\n\nCloses-Bug: #1934788\nChange-Id: I055086ab4af37878e81844f1055bc48d84ae9945\n'}]",38,799782,535c861d99aa0c07ea130d1f30cabb6af3db7ab7,36,4,6,27339,,,0,"Fix missing pacemaker-cli-utils in Debian hacluster images

Hacluster-pacemaker images need to have pacemaker cli utils
available in all distros and they are provided by pacemaker-cli-utils
package in Debuntu systems. Due to a different dependency chain
this package is not installed in Debian. This package is also
*recommended* dependency of pacemaker and pacemaker-remote in both
Debian/Ubuntu systems, but unfortunatelly it is not installed
on Debian via APT by default.

This patch adding this package to list of package to be installed
on Debian/Ubuntu systems for both hacluster-pacemaker (required)
and hacluster-pacemaker-remote (to ease with debugging).

Closes-Bug: #1934788
Change-Id: I055086ab4af37878e81844f1055bc48d84ae9945
",git fetch https://review.opendev.org/openstack/kolla refs/changes/82/799782/6 && git format-patch -1 --stdout FETCH_HEAD,"['docker/hacluster/hacluster-pacemaker-remote/Dockerfile.j2', 'releasenotes/notes/bug-1934788-b1fd51f443479fb6.yaml', 'docker/hacluster/hacluster-pacemaker/Dockerfile.j2']",3,0a13d28c79dcdecb674a46790d643269aa4e89bb,bug/1934788,{% if install_type == 'binary' %} {% if base_package_type == 'deb' %} {% set hacluster_pacemaker_packages = hacluster_pacemaker_packages + [ 'pacemaker-cli-utils' ] %} {% endif %} {% endif %},,20,0
openstack%2Ftrove~master~Ic4c1cb4d9ce7595d1e684c26229a5148b5f4befa,openstack/trove,master,Ic4c1cb4d9ce7595d1e684c26229a5148b5f4befa,Replace deprecated import of ABCs from collections,MERGED,2021-07-22 10:37:27.000000000,2021-08-02 12:09:22.000000000,2021-08-02 12:07:55.000000000,"[{'_account_id': 6732}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-22 10:37:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/77123de62182752b9ddcdc437bc5b23aa8e73c37', 'message': 'Replace deprecated import of ABCs from collections\n\nABCs in collections should be imported from collections.abc and direct\nimport from collections is deprecated since Python 3.3.\n\nChange-Id: Ic4c1cb4d9ce7595d1e684c26229a5148b5f4befa\n'}, {'number': 2, 'created': '2021-08-02 07:42:32.000000000', 'files': ['trove/guestagent/common/guestagent_utils.py', 'trove/common/utils.py'], 'web_link': 'https://opendev.org/openstack/trove/commit/0b0c35999b6678b650861fd409239a42b3718f6a', 'message': 'Replace deprecated import of ABCs from collections\n\nABCs in collections should be imported from collections.abc and direct\nimport from collections is deprecated since Python 3.3.\n\nChange-Id: Ic4c1cb4d9ce7595d1e684c26229a5148b5f4befa\n'}]",2,801763,0b0c35999b6678b650861fd409239a42b3718f6a,15,2,2,9816,,,0,"Replace deprecated import of ABCs from collections

ABCs in collections should be imported from collections.abc and direct
import from collections is deprecated since Python 3.3.

Change-Id: Ic4c1cb4d9ce7595d1e684c26229a5148b5f4befa
",git fetch https://review.opendev.org/openstack/trove refs/changes/63/801763/1 && git format-patch -1 --stdout FETCH_HEAD,"['trove/guestagent/common/guestagent_utils.py', 'trove/common/utils.py']",2,77123de62182752b9ddcdc437bc5b23aa8e73c37,collections-abc,"from collections import abc return (isinstance(item, abc.Iterable) and","import collections return (isinstance(item, collections.Iterable) and",5,5
openstack%2Fcharm-mysql-innodb-cluster~stable%2F21.04~I53b992be341ade322b2e98cf3ee3e9dacc0d4dec,openstack/charm-mysql-innodb-cluster,stable/21.04,I53b992be341ade322b2e98cf3ee3e9dacc0d4dec,Sync release-tools,ABANDONED,2021-08-02 12:06:36.000000000,2021-08-02 12:07:03.000000000,,[],"[{'number': 1, 'created': '2021-08-02 12:06:36.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'src/test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/d248a1a74b3d531e83a1b7b2492f9453de5222de', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I53b992be341ade322b2e98cf3ee3e9dacc0d4dec\n(cherry picked from commit 3da70783fb8bbf8c5c99ef217465ce0e7c910ec1)\n'}]",0,803179,d248a1a74b3d531e83a1b7b2492f9453de5222de,2,0,1,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: I53b992be341ade322b2e98cf3ee3e9dacc0d4dec
(cherry picked from commit 3da70783fb8bbf8c5c99ef217465ce0e7c910ec1)
",git fetch https://review.opendev.org/openstack/charm-mysql-innodb-cluster refs/changes/79/803179/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'src/test-requirements.txt', 'tox.ini']",4,d248a1a74b3d531e83a1b7b2492f9453de5222de,fix-tox-pip-resolutionimpossible-stable/21.04,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/test-requirements.txt,10,15
openstack%2Ftripleo-ci~master~I79ee873b86b66a6dc55b28e9c1840705bd201360,openstack/tripleo-ci,master,I79ee873b86b66a6dc55b28e9c1840705bd201360,CI: Trigger standalone job for changes related to Placement,MERGED,2021-07-14 15:52:24.000000000,2021-08-02 11:59:20.000000000,2021-08-02 11:59:20.000000000,"[{'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-14 15:52:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ad8f1895c66f22b30c74e6adf3c1a77efa5859f6', 'message': 'Trigger standalone job for any changes related to Placement\n\nChange-Id: I79ee873b86b66a6dc55b28e9c1840705bd201360\n'}, {'number': 2, 'created': '2021-07-14 15:55:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/104ce93f37bb6a6f9a949a7e37abd0348b40fb94', 'message': 'Trigger standalone job for any changes related to Placement\n\nThis change ensures that the basic standalone job is executed when\nany template or puppet manifest for Placement service is updated.\n\nChange-Id: I79ee873b86b66a6dc55b28e9c1840705bd201360\n'}, {'number': 3, 'created': '2021-07-14 16:06:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/f01129e792f952e29a80b5ea5506a76a3bb26d39', 'message': 'CI: Trigger standalone job for any changes related to Placement\n\nThis change ensures that the basic standalone job is executed when\nany template or puppet manifest for Placement service is updated.\n\nChange-Id: I79ee873b86b66a6dc55b28e9c1840705bd201360\n'}, {'number': 4, 'created': '2021-07-14 16:09:26.000000000', 'files': ['zuul.d/standalone-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/56ca5eb5d99bf182583b3207d91b5890a13128f9', 'message': 'CI: Trigger standalone job for changes related to Placement\n\nThis change ensures that the basic standalone job is executed when\nany template or puppet manifest for Placement service is updated.\n\nChange-Id: I79ee873b86b66a6dc55b28e9c1840705bd201360\n'}]",0,800804,56ca5eb5d99bf182583b3207d91b5890a13128f9,21,4,4,9816,,,0,"CI: Trigger standalone job for changes related to Placement

This change ensures that the basic standalone job is executed when
any template or puppet manifest for Placement service is updated.

Change-Id: I79ee873b86b66a6dc55b28e9c1840705bd201360
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/04/800804/3 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/standalone-jobs.yaml'],1,ad8f1895c66f22b30c74e6adf3c1a77efa5859f6,standalone-trigger, - ^((docker|puppet)/services|deployment)/.*placement.*$ - ^manifests/profile/(base|pacemaker)/placement.*$,,2,0
openstack%2Fhorizon~stable%2Fussuri~I60788061d17a5529440ec1e3d6d5c11f5259d2e8,openstack/horizon,stable/ussuri,I60788061d17a5529440ec1e3d6d5c11f5259d2e8,Fix tooltips and popovers for flavor details on the instance list.,MERGED,2021-06-24 13:21:10.000000000,2021-08-02 11:37:25.000000000,2021-08-02 11:35:59.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 6914}, {'_account_id': 8648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-24 13:21:10.000000000', 'files': ['openstack_dashboard/dashboards/project/instances/templates/instances/_instance_flavor.html'], 'web_link': 'https://opendev.org/openstack/horizon/commit/3e5849fbb94785b24ceb14e653645e1db4d38d40', 'message': ""Fix tooltips and popovers for flavor details on the instance list.\n\nDue to some changes in bootstrap, the popup table for\nflavor details content is empty, on the instance list pages.\nThis patch adds 'sanitize:false' which fix the issue.\nFor more info. please refer[1].\n\n[1] https://github.com/twbs/bootstrap/issues/28290\n\nCloses-Bug: #1886025\n\nChange-Id: I60788061d17a5529440ec1e3d6d5c11f5259d2e8\n(cherry picked from commit 25816bd82433cae6cb9ec14a38c065cd435692ca)\n""}]",0,797916,3e5849fbb94785b24ceb14e653645e1db4d38d40,10,5,1,29313,,,0,"Fix tooltips and popovers for flavor details on the instance list.

Due to some changes in bootstrap, the popup table for
flavor details content is empty, on the instance list pages.
This patch adds 'sanitize:false' which fix the issue.
For more info. please refer[1].

[1] https://github.com/twbs/bootstrap/issues/28290

Closes-Bug: #1886025

Change-Id: I60788061d17a5529440ec1e3d6d5c11f5259d2e8
(cherry picked from commit 25816bd82433cae6cb9ec14a38c065cd435692ca)
",git fetch https://review.opendev.org/openstack/horizon refs/changes/16/797916/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_dashboard/dashboards/project/instances/templates/instances/_instance_flavor.html'],1,3e5849fbb94785b24ceb14e653645e1db4d38d40,bug/1886025-stable/ussuri," $flavor.popover({html:true, sanitize: false, trigger: ""hover""});"," $flavor.popover({html:true, trigger: ""hover""});",1,1
openstack%2Fdesignate~master~Idbfec1adca2024cd5f352017a7c9319dcec65d42,openstack/designate,master,Idbfec1adca2024cd5f352017a7c9319dcec65d42,Fix grenade upgrade API check URL path,MERGED,2021-07-28 23:45:37.000000000,2021-08-02 11:29:59.000000000,2021-08-02 11:28:31.000000000,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 22623}]","[{'number': 1, 'created': '2021-07-28 23:45:37.000000000', 'files': ['devstack/upgrade/upgrade.sh'], 'web_link': 'https://opendev.org/openstack/designate/commit/b0e83084c2b67112cd0dc9d56e233c98e8538d15', 'message': 'Fix grenade upgrade API check URL path\n\nPreviously, the grenade API started check during the upgrade was\nchecking if the root of the web server was functioning. In this job\nthat is testing the horizon endpoint and not the designate API.\nThis patch fixes this to have the check run against the designate\nendpoint under apache. This prevents false failures when horizon\nhas an issue.\n\nChange-Id: Idbfec1adca2024cd5f352017a7c9319dcec65d42\n'}]",0,802815,b0e83084c2b67112cd0dc9d56e233c98e8538d15,8,3,1,11628,,,0,"Fix grenade upgrade API check URL path

Previously, the grenade API started check during the upgrade was
checking if the root of the web server was functioning. In this job
that is testing the horizon endpoint and not the designate API.
This patch fixes this to have the check run against the designate
endpoint under apache. This prevents false failures when horizon
has an issue.

Change-Id: Idbfec1adca2024cd5f352017a7c9319dcec65d42
",git fetch https://review.opendev.org/openstack/designate refs/changes/15/802815/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/upgrade/upgrade.sh'],1,b0e83084c2b67112cd0dc9d56e233c98e8538d15,,"if ! timeout $SERVICE_TIMEOUT sh -c ""while ! wget --no-proxy -q -O- $DESIGNATE_SERVICE_PROTOCOL://$DESIGNATE_SERVICE_HOST:$DESIGNATE_SERVICE_PORT/dns; do sleep 1; done""; then","if ! timeout $SERVICE_TIMEOUT sh -c ""while ! wget --no-proxy -q -O- $DESIGNATE_SERVICE_PROTOCOL://$DESIGNATE_SERVICE_HOST:$DESIGNATE_SERVICE_PORT; do sleep 1; done""; then",1,1
openstack%2Fhorizon~stable%2Fvictoria~Iba4215b2e3a414d1794faa05be31bf69e0e48bec,openstack/horizon,stable/victoria,Iba4215b2e3a414d1794faa05be31bf69e0e48bec,Change with_data=False for swift_get_container,MERGED,2021-07-19 10:24:47.000000000,2021-08-02 11:26:48.000000000,2021-08-02 11:23:55.000000000,"[{'_account_id': 841}, {'_account_id': 8648}, {'_account_id': 16137}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-07-19 10:24:47.000000000', 'files': ['openstack_dashboard/api/swift.py', 'openstack_dashboard/test/unit/api/test_swift.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/0d14e7dd190a906895af74ee0e1cbc8037a3aaad', 'message': ""Change with_data=False for swift_get_container\n\nThis function is only used in the Container get\nmethod which retrieves details about a container.\n\nIt's not used for listing data in the container\neven though with_data was True doing a GET instead\nof a HEAD on the container.\n\nThis indirectly also fixes the Ceph bug [1] in the\nSwift API implementation that doesn't expose metadata\ncorrectly for a GET but does for a HEAD.\n\n[1] https://tracker.ceph.com/issues/47861\n\nChange-Id: Iba4215b2e3a414d1794faa05be31bf69e0e48bec\n(cherry picked from commit c87f0e7a90d05f9355bd58165c25561dedae36d5)\n(cherry picked from commit 8232ac0385782e8131b071fa1324001c1c429aaf)\n""}]",0,801279,0d14e7dd190a906895af74ee0e1cbc8037a3aaad,11,5,1,32755,,,0,"Change with_data=False for swift_get_container

This function is only used in the Container get
method which retrieves details about a container.

It's not used for listing data in the container
even though with_data was True doing a GET instead
of a HEAD on the container.

This indirectly also fixes the Ceph bug [1] in the
Swift API implementation that doesn't expose metadata
correctly for a GET but does for a HEAD.

[1] https://tracker.ceph.com/issues/47861

Change-Id: Iba4215b2e3a414d1794faa05be31bf69e0e48bec
(cherry picked from commit c87f0e7a90d05f9355bd58165c25561dedae36d5)
(cherry picked from commit 8232ac0385782e8131b071fa1324001c1c429aaf)
",git fetch https://review.opendev.org/openstack/horizon refs/changes/79/801279/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/swift.py', 'openstack_dashboard/test/unit/api/test_swift.py']",2,0d14e7dd190a906895af74ee0e1cbc8037a3aaad,," cont = api.swift.swift_get_container(self.request, container.name, with_data=True)"," cont = api.swift.swift_get_container(self.request, container.name)",3,2
openstack%2Fhorizon~stable%2Fvictoria~Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb,openstack/horizon,stable/victoria,Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb,Fix Unable to use multiattach volume as boot for new server,MERGED,2021-07-28 17:31:37.000000000,2021-08-02 11:25:20.000000000,2021-08-02 11:23:52.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 8648}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-07-28 17:31:37.000000000', 'files': ['openstack_dashboard/api/microversions.py', 'openstack_dashboard/test/unit/api/test_nova.py', 'openstack_dashboard/api/nova.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/78ba522c7f21707a1914d690f3b8fe8fecf54118', 'message': 'Fix Unable to use multiattach volume as boot for new server\n\nIf we try to create a new server from a bootable volume that\nsupports multiattach, it will fail to create with an error\nmessage that ``multiattach volumes are only supported starting\nwith compute API version 2.60``. This patch fixes the issue.\n\nCloses-Bug: #1931440\nChange-Id: Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb\n(cherry picked from commit 64fe0abb653950c85d455dedd09ef42856c6b07b)\n'}]",0,802477,78ba522c7f21707a1914d690f3b8fe8fecf54118,9,5,1,6914,,,0,"Fix Unable to use multiattach volume as boot for new server

If we try to create a new server from a bootable volume that
supports multiattach, it will fail to create with an error
message that ``multiattach volumes are only supported starting
with compute API version 2.60``. This patch fixes the issue.

Closes-Bug: #1931440
Change-Id: Ic8330b947b1a733f70c3bdad8b3493f20a2f26fb
(cherry picked from commit 64fe0abb653950c85d455dedd09ef42856c6b07b)
",git fetch https://review.opendev.org/openstack/horizon refs/changes/77/802477/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/api/microversions.py', 'openstack_dashboard/test/unit/api/test_nova.py', 'openstack_dashboard/api/nova.py']",3,78ba522c7f21707a1914d690f3b8fe8fecf54118,," microversion = get_microversion(request, (""multiattach"", ""instance_description"","," microversion = get_microversion(request, (""instance_description"",",5,4
openstack%2Ftrove~master~Ia1e9112ae69e04f8c3e9e9d1b4a0189c743d7448,openstack/trove,master,Ia1e9112ae69e04f8c3e9e9d1b4a0189c743d7448,Show user network ID for getting instance,MERGED,2021-08-02 02:26:07.000000000,2021-08-02 11:23:56.000000000,2021-08-02 11:22:24.000000000,"[{'_account_id': 6732}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 02:26:07.000000000', 'files': ['api-ref/source/parameters.yaml', 'tools/trove-config-generator.conf', 'trove/common/cache.py', 'trove/instance/models.py', 'doc/source/user/set-up-replication.rst', 'devstack/plugin.sh', 'api-ref/source/samples/instance-mgmt-show-response.json', 'trove/common/neutron.py', 'requirements.txt', 'api-ref/source/samples/instance-mgmt-list-response.json', 'api-ref/source/samples/instance-list-detail-response.json', 'doc/source/user/upgrade-datastore.rst', 'releasenotes/notes/xena-show-network.yaml', 'api-ref/source/samples/instance-show-response.json', 'doc/source/user/create-db.rst'], 'web_link': 'https://opendev.org/openstack/trove/commit/5590ecdce036f7a2b11ff440dfd4eb637180abcc', 'message': 'Show user network ID for getting instance\n\nChange-Id: Ia1e9112ae69e04f8c3e9e9d1b4a0189c743d7448\n'}]",0,803132,5590ecdce036f7a2b11ff440dfd4eb637180abcc,7,2,1,6732,,,0,"Show user network ID for getting instance

Change-Id: Ia1e9112ae69e04f8c3e9e9d1b4a0189c743d7448
",git fetch https://review.opendev.org/openstack/trove refs/changes/32/803132/1 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/parameters.yaml', 'tools/trove-config-generator.conf', 'trove/common/cache.py', 'trove/instance/models.py', 'doc/source/user/set-up-replication.rst', 'devstack/plugin.sh', 'api-ref/source/samples/instance-mgmt-show-response.json', 'trove/common/neutron.py', 'requirements.txt', 'api-ref/source/samples/instance-mgmt-list-response.json', 'api-ref/source/samples/instance-list-detail-response.json', 'doc/source/user/upgrade-datastore.rst', 'releasenotes/notes/xena-show-network.yaml', 'api-ref/source/samples/instance-show-response.json', 'doc/source/user/create-db.rst']",15,5590ecdce036f7a2b11ff440dfd4eb637180abcc,show-networkid," +--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+ | addresses | [{'address': '10.0.0.59', 'type': 'private', 'network': '09f6aadc-f92d-41d4-8cad-2eb1876054dd'}, {'address': '172.24.4.242', 'type': 'public'}] | | allowed_cidrs | [] | | created | 2020-12-08T21:00:20 | | datastore | mysql | | datastore_version | 5.7.29 | | datastore_version_number | 5.7.29 | | flavor | 1fb05bb0-4605-48b6-81e6-3d4622e4a330 | | id | ad40cf6c-6532-4a22-a3f3-7364f0f04a0f | | ip | 10.0.0.59, 172.24.4.242 | | name | mysql_instance_1 | | operating_status | HEALTHY | | public | True | | region | RegionOne | | service_status_updated | 2020-12-08T21:05:51 | | status | ACTIVE | | updated | 2020-12-08T21:04:39 | | volume | 5 | | volume_used | 0.2 | +--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+"," +--------------------------+----------------------------------------------------------------------------------------------+ | Field | Value | +--------------------------+----------------------------------------------------------------------------------------------+ | addresses | [{'address': '10.0.0.59', 'type': 'private'}, {'address': '172.24.4.242', 'type': 'public'}] | | allowed_cidrs | [] | | created | 2020-12-08T21:00:20 | | datastore | mysql | | datastore_version | 5.7.29 | | datastore_version_number | 5.7.29 | | flavor | 1fb05bb0-4605-48b6-81e6-3d4622e4a330 | | id | ad40cf6c-6532-4a22-a3f3-7364f0f04a0f | | ip | 10.0.0.59, 172.24.4.242 | | name | mysql_instance_1 | | operating_status | HEALTHY | | public | True | | region | RegionOne | | service_status_updated | 2020-12-08T21:05:51 | | status | ACTIVE | | updated | 2020-12-08T21:04:39 | | volume | 5 | | volume_used | 0.2 | +--------------------------+----------------------------------------------------------------------------------------------+",170,73
openstack%2Fvalidations-libs~master~I53a3232a825cd389cd94bf447796fb076453b92a,openstack/validations-libs,master,I53a3232a825cd389cd94bf447796fb076453b92a,DNM,ABANDONED,2021-07-07 06:41:07.000000000,2021-08-02 11:22:12.000000000,,"[{'_account_id': 11491}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-07 06:41:07.000000000', 'files': ['playbooks/coverchange.yaml', 'validations_libs/cli/history.py'], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/4f9a66b817792a2c971345f9d33dddb7b45b0e27', 'message': 'DNM\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I53a3232a825cd389cd94bf447796fb076453b92a\n'}]",0,799743,4f9a66b817792a2c971345f9d33dddb7b45b0e27,3,2,1,32926,,,0,"DNM

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I53a3232a825cd389cd94bf447796fb076453b92a
",git fetch https://review.opendev.org/openstack/validations-libs refs/changes/43/799743/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/coverchange.yaml', 'validations_libs/cli/history.py']",2,4f9a66b817792a2c971345f9d33dddb7b45b0e27,jobretest," actions = ValidationActions() log_path=parsed_args.validation_log_dir,", actions = ValidationActions(parsed_args.validation_log_dir),4,3
openstack%2Fvalidations-libs~master~If441162cc0e32a8ba9c194b4d518615e52976326,openstack/validations-libs,master,If441162cc0e32a8ba9c194b4d518615e52976326,DNM,ABANDONED,2021-07-26 12:58:27.000000000,2021-08-02 11:21:52.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-26 12:58:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/aaa05fd5c7d8bc599a7bc6824681bc63182beb07', 'message': 'DNM\n\nChange-Id: If441162cc0e32a8ba9c194b4d518615e52976326\n'}, {'number': 2, 'created': '2021-07-26 14:16:43.000000000', 'files': ['doc/source/reference/index.rst'], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/7e6be5be24eb9f722bf8df2847537f46aea57832', 'message': 'DNM\n\nDepends-On: https://review.opendev.org/c/openstack/validations-libs/+/802311\n\nChange-Id: If441162cc0e32a8ba9c194b4d518615e52976326\n'}]",0,802307,7e6be5be24eb9f722bf8df2847537f46aea57832,6,1,2,32926,,,0,"DNM

Depends-On: https://review.opendev.org/c/openstack/validations-libs/+/802311

Change-Id: If441162cc0e32a8ba9c194b4d518615e52976326
",git fetch https://review.opendev.org/openstack/validations-libs refs/changes/07/802307/2 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/reference/index.rst'],1,aaa05fd5c7d8bc599a7bc6824681bc63182beb07,,WOOOOOOOOOOOOOOOOOOOOOOOOW ,,2,0
openstack%2Ftripleo-validations~stable%2Ftrain~If40a95ca555ea0914fab8228ba5ce73285107e9b,openstack/tripleo-validations,stable/train,If40a95ca555ea0914fab8228ba5ce73285107e9b,DNM,ABANDONED,2021-07-28 07:40:38.000000000,2021-08-02 11:21:32.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-28 07:40:38.000000000', 'files': ['tests/prepare-test-host.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/92e644f66daff3ec5079e0db7a8962eb202e0ac7', 'message': 'DNM\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: If40a95ca555ea0914fab8228ba5ce73285107e9b\n'}]",1,802666,92e644f66daff3ec5079e0db7a8962eb202e0ac7,3,1,1,32926,,,0,"DNM

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: If40a95ca555ea0914fab8228ba5ce73285107e9b
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/66/802666/1 && git format-patch -1 --stdout FETCH_HEAD,['tests/prepare-test-host.yml'],1,92e644f66daff3ec5079e0db7a8962eb202e0ac7,train-test,#DNM THIS IS A TEST,,1,1
openstack%2Ftripleo-common~stable%2Fvictoria~Ic23e80465356f0a336621008e0a9d5b0c295d816,openstack/tripleo-common,stable/victoria,Ic23e80465356f0a336621008e0a9d5b0c295d816,Remove ironic-inspector dnsmasq healthcheck,MERGED,2021-07-08 02:03:27.000000000,2021-08-02 11:09:27.000000000,2021-08-02 11:08:08.000000000,"[{'_account_id': 8449}, {'_account_id': 11491}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-08 02:03:27.000000000', 'files': ['healthcheck/ironic-inspector'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e3348fce273c56c58f1cd8ac2def4dbce7b265df', 'message': ""Remove ironic-inspector dnsmasq healthcheck\n\nThis check is broken because healthcheck_port uses the user of the\nprocess, but the /proc files accessed are owned by root. This is\nprobably because dnsmasq starts as root to bind to priviliged port 67,\nthen drops to the dnsmasq user.\n\nThis healthcheck likely doesn't add much value since it is a\nself-contained tool which will be bound to the port if it is running.\n\nSee https://bugzilla.redhat.com/show_bug.cgi?id=1961237\n\nChange-Id: Ic23e80465356f0a336621008e0a9d5b0c295d816\n(cherry picked from commit a3be15743bcb33d6ecd67e24d082aa664d55864b)\n""}]",0,799944,e3348fce273c56c58f1cd8ac2def4dbce7b265df,12,5,1,4571,,,0,"Remove ironic-inspector dnsmasq healthcheck

This check is broken because healthcheck_port uses the user of the
process, but the /proc files accessed are owned by root. This is
probably because dnsmasq starts as root to bind to priviliged port 67,
then drops to the dnsmasq user.

This healthcheck likely doesn't add much value since it is a
self-contained tool which will be bound to the port if it is running.

See https://bugzilla.redhat.com/show_bug.cgi?id=1961237

Change-Id: Ic23e80465356f0a336621008e0a9d5b0c295d816
(cherry picked from commit a3be15743bcb33d6ecd67e24d082aa664d55864b)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/44/799944/1 && git format-patch -1 --stdout FETCH_HEAD,['healthcheck/ironic-inspector'],1,e3348fce273c56c58f1cd8ac2def4dbce7b265df,victoria/dnsmasq-health, exit 0," listen_address=$(get_config_val /etc/ironic-inspector/inspector.conf DEFAULT listen_address 127.0.0.1) # Check DHCPv6 port if using IPv6 if [[ $listen_address =~ "":"" ]]; then port=""547"" else port=""67"" fi echo ""Checking $process port(s) $port."" if ! healthcheck_port $process $port; then echo ""There is no $process process listening on port(s) $port in the container."" exit 1 fi",1,12
openstack%2Ftripleo-ansible~master~Iccf719498845438f4762602e23d5f5962135db29,openstack/tripleo-ansible,master,Iccf719498845438f4762602e23d5f5962135db29,Replace deprecated import of ABCs from collections,MERGED,2021-07-16 16:00:55.000000000,2021-08-02 10:47:51.000000000,2021-08-02 10:46:11.000000000,"[{'_account_id': 6926}, {'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-16 16:00:55.000000000', 'files': ['tripleo_ansible/ansible_plugins/module_utils/network_data_v2.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/e0d9ff53833c4ab2add6566550826d89b28285c3', 'message': 'Replace deprecated import of ABCs from collections\n\nABCs in collections should be imported from collections.abc and direct\nimport from collections is deprecated since Python 3.3.\n\nChange-Id: Iccf719498845438f4762602e23d5f5962135db29\n'}]",4,801090,e0d9ff53833c4ab2add6566550826d89b28285c3,14,5,1,9816,,,0,"Replace deprecated import of ABCs from collections

ABCs in collections should be imported from collections.abc and direct
import from collections is deprecated since Python 3.3.

Change-Id: Iccf719498845438f4762602e23d5f5962135db29
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/90/801090/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/ansible_plugins/module_utils/network_data_v2.py'],1,e0d9ff53833c4ab2add6566550826d89b28285c3,collections-abc,"import collections.abc and isinstance(error.instance, collections.abc.Mapping) if not isinstance(schema, collections.abc.Mapping): if (isinstance(current_schema, collections.abc.Mapping)"," and isinstance(error.instance, collections.Mapping) if not isinstance(schema, collections.Mapping): if (isinstance(current_schema, collections.Mapping)",4,3
openstack%2Ftripleo-ansible~stable%2Fwallaby~If1239369b9c650ab62be58b4ae125cff120fa49a,openstack/tripleo-ansible,stable/wallaby,If1239369b9c650ab62be58b4ae125cff120fa49a,Configure vhost-postcopy-support,MERGED,2021-07-30 12:40:34.000000000,2021-08-02 10:46:09.000000000,2021-08-02 10:46:09.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 12:40:34.000000000', 'files': ['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/1d2558c7a9bbbfdbcea13d9cff381e88b34ca111', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)\n'}]",0,803011,1d2558c7a9bbbfdbcea13d9cff381e88b34ca111,10,9,1,27419,,,0,"Configure vhost-postcopy-support

Libvirt PostCopy helps with live-migration. For postcopy to work with
vhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Change-Id: If1239369b9c650ab62be58b4ae125cff120fa49a
(cherry picked from commit 2dec045cdd05265214ac757f915e7b59458e6e7f)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/11/803011/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml']",2,1d2558c7a9bbbfdbcea13d9cff381e88b34ca111,vhost-postcopy,tripleo_ovs_dpdk_vhost_postcopy_support: false,,19,0
openstack%2Fkolla-ansible~master~Iab43d62eb794593617c59aab28a12293579ec039,openstack/kolla-ansible,master,Iab43d62eb794593617c59aab28a12293579ec039,Send Barbican API logs verbatim,ABANDONED,2021-07-27 13:06:42.000000000,2021-08-02 10:34:19.000000000,,"[{'_account_id': 14826}, {'_account_id': 17669}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-27 13:06:42.000000000', 'files': ['ansible/roles/common/templates/conf/input/08-barbican-api.conf.j2', 'ansible/roles/common/tasks/config.yml', 'ansible/roles/common/templates/conf/input/00-global.conf.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/8efdc9520fc3db39dfd733e875129734f589d92f', 'message': 'Send Barbican API logs verbatim\n\nBarbican API logs are not parsed correctly by the regex in td-agent.conf\nas they appear in the following format:\n\n    {address space usage: 267079680 bytes/254MB} {rss usage: 105426944 bytes/100MB} [pid: 34|app: 0|req: 719513/4648987] 10.0.0.32 () {30 vars in 720 bytes} [Mon Jul 26 03:43:04 2021] GET /v1/secrets/25a4b1a2-cfd3-4918-9339-d42942129fc4/payload => generated 1037 bytes in 14 msecs (HTTP/1.1 200) 4 headers in 166 bytes (1 switches on core 0)\n\nThis PS proposes excluding barbican-api.log from the default source and\nsending the content of the log message onwards verbatim.\n\nChange-Id: Iab43d62eb794593617c59aab28a12293579ec039\n'}]",0,802492,8efdc9520fc3db39dfd733e875129734f589d92f,6,3,1,28022,,,0,"Send Barbican API logs verbatim

Barbican API logs are not parsed correctly by the regex in td-agent.conf
as they appear in the following format:

    {address space usage: 267079680 bytes/254MB} {rss usage: 105426944 bytes/100MB} [pid: 34|app: 0|req: 719513/4648987] 10.0.0.32 () {30 vars in 720 bytes} [Mon Jul 26 03:43:04 2021] GET /v1/secrets/25a4b1a2-cfd3-4918-9339-d42942129fc4/payload => generated 1037 bytes in 14 msecs (HTTP/1.1 200) 4 headers in 166 bytes (1 switches on core 0)

This PS proposes excluding barbican-api.log from the default source and
sending the content of the log message onwards verbatim.

Change-Id: Iab43d62eb794593617c59aab28a12293579ec039
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/92/802492/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/common/templates/conf/input/08-barbican-api.conf.j2', 'ansible/roles/common/tasks/config.yml', 'ansible/roles/common/templates/conf/input/00-global.conf.j2']",3,8efdc9520fc3db39dfd733e875129734f589d92f,," ""/var/log/kolla/barbican/barbican-api.log"",",,11,0
openstack%2Fdesignate~master~I71baf9abb5566908da580d0c104831dea20c9d3c,openstack/designate,master,I71baf9abb5566908da580d0c104831dea20c9d3c,Fix doc building for sphinx 4.x,MERGED,2021-07-27 23:59:29.000000000,2021-08-02 10:28:02.000000000,2021-08-02 10:26:27.000000000,"[{'_account_id': 11628}, {'_account_id': 13252}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-27 23:59:29.000000000', 'files': ['doc/ext/support_matrix.py', 'doc/ext/custom_css.py'], 'web_link': 'https://opendev.org/openstack/designate/commit/beb75cc529771fb6a1859abb3f19ad1ad138bc41', 'message': 'Fix doc building for sphinx 4.x\n\nSphinx 4.x has renamed add_stylesheet to add_css_file and\nadd_javascript to add_js_file.\nThis patch updates the sphinx extensions in designate to use the\nnew methods.\n\nChange-Id: I71baf9abb5566908da580d0c104831dea20c9d3c\n'}]",0,802638,beb75cc529771fb6a1859abb3f19ad1ad138bc41,8,3,1,11628,,,0,"Fix doc building for sphinx 4.x

Sphinx 4.x has renamed add_stylesheet to add_css_file and
add_javascript to add_js_file.
This patch updates the sphinx extensions in designate to use the
new methods.

Change-Id: I71baf9abb5566908da580d0c104831dea20c9d3c
",git fetch https://review.opendev.org/openstack/designate refs/changes/38/802638/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/ext/support_matrix.py', 'doc/ext/custom_css.py']",2,beb75cc529771fb6a1859abb3f19ad1ad138bc41,, app.add_css_file('designate-docs.css'), app.add_stylesheet('designate-docs.css'),3,3
openstack%2Fdesignate~master~I9dd9fe7c69dded4c7a8707bc0d00fff7354af196,openstack/designate,master,I9dd9fe7c69dded4c7a8707bc0d00fff7354af196,Fix doc code for updated Sphinx,ABANDONED,2021-08-02 10:13:23.000000000,2021-08-02 10:16:11.000000000,,[],"[{'number': 1, 'created': '2021-08-02 10:13:23.000000000', 'files': ['doc/ext/support_matrix.py', 'doc/ext/custom_css.py'], 'web_link': 'https://opendev.org/openstack/designate/commit/50545ed131ca9934d25272027227328fb1ec7dd0', 'message': 'Fix doc code for updated Sphinx\n\nWith Sphinx 4.x, some long deprecated functions have been removed, use\nthe new replacements instead.\n\n[0] https://www.sphinx-doc.org/en/master/extdev/deprecated.html\n\nChange-Id: I9dd9fe7c69dded4c7a8707bc0d00fff7354af196\n'}]",0,803167,50545ed131ca9934d25272027227328fb1ec7dd0,2,0,1,13252,,,0,"Fix doc code for updated Sphinx

With Sphinx 4.x, some long deprecated functions have been removed, use
the new replacements instead.

[0] https://www.sphinx-doc.org/en/master/extdev/deprecated.html

Change-Id: I9dd9fe7c69dded4c7a8707bc0d00fff7354af196
",git fetch https://review.opendev.org/openstack/designate refs/changes/67/803167/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/ext/support_matrix.py', 'doc/ext/custom_css.py']",2,50545ed131ca9934d25272027227328fb1ec7dd0,fix-docs-build, app.add_css_file('designate-docs.css'), app.add_stylesheet('designate-docs.css'),3,3
openstack%2Freleases~master~I7f286a6ac21063968643c000498bb54989dd31df,openstack/releases,master,I7f286a6ac21063968643c000498bb54989dd31df,Release tripleo-operator-ansible 0.6.0,MERGED,2021-07-29 21:47:40.000000000,2021-08-02 10:14:21.000000000,2021-08-02 10:14:21.000000000,"[{'_account_id': 308}, {'_account_id': 8449}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 21:47:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/cb2e9b6029f146ea31826a36e7294bdcf49d0970', 'message': 'Release tripleo-operator-ansible 0.6.0\n\nChange-Id: I7f286a6ac21063968643c000498bb54989dd31df\n'}, {'number': 2, 'created': '2021-07-29 21:49:13.000000000', 'files': ['deliverables/_independent/tripleo-operator-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e8735e2e5729833863f54bb82d6242026ce79b7f', 'message': 'Release tripleo-operator-ansible 0.6.0\n\nChange-Id: I7f286a6ac21063968643c000498bb54989dd31df\n'}]",1,802964,e8735e2e5729833863f54bb82d6242026ce79b7f,10,4,2,14985,,,0,"Release tripleo-operator-ansible 0.6.0

Change-Id: I7f286a6ac21063968643c000498bb54989dd31df
",git fetch https://review.opendev.org/openstack/releases refs/changes/64/802964/2 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/tripleo-operator-ansible.yaml'],1,cb2e9b6029f146ea31826a36e7294bdcf49d0970,t-o-a-0.6.0, - version: 0.6.0 projects: - repo: openstack/tripleo-operator-ansible hash: d7be1b9a8c97dbcde44eaf65f38dfd9634bcea26,,5,0
openstack%2Fsushy~master~Ibc6e735f3a2209e9b76e2ac00d7c9347b395c163,openstack/sushy,master,Ibc6e735f3a2209e9b76e2ac00d7c9347b395c163,Add resource root property,MERGED,2021-07-05 14:09:36.000000000,2021-08-02 10:06:24.000000000,2021-08-02 10:03:23.000000000,"[{'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-05 14:09:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/809b65779508f4a254630b26b768a61abae6f681', 'message': 'Add resource root property\n\nPass down to all resources where redfish_version and registries\ncurrently used.\n\nStory: 2009017\nTask: 42737\nChange-Id: Ibc6e735f3a2209e9b76e2ac00d7c9347b395c163\n'}, {'number': 2, 'created': '2021-07-06 12:49:58.000000000', 'files': ['releasenotes/notes/add-sushy-root-to-resources-1f221794557aa5fc.yaml', 'sushy/tests/unit/resources/sessionservice/test_sessionservice.py', 'sushy/tests/unit/resources/compositionservice/test_resourceblock.py', 'sushy/tests/unit/resources/sessionservice/test_session.py', 'sushy/tests/unit/test_main.py', 'sushy/resources/sessionservice/sessionservice.py', 'sushy/tests/unit/resources/system/storage/test_volume.py', 'sushy/resources/updateservice/softwareinventory.py', 'sushy/resources/system/bios.py', 'sushy/tests/unit/resources/updateservice/test_updateservice.py', 'sushy/resources/eventservice/eventservice.py', 'sushy/resources/taskservice/taskservice.py', 'sushy/tests/unit/resources/compositionservice/test_resourcezone.py', 'sushy/resources/system/secure_boot.py', 'sushy/resources/eventservice/eventdestination.py', 'sushy/tests/unit/resources/system/test_simple_storage.py', 'sushy/resources/taskservice/task.py', 'sushy/tests/unit/resources/chassis/test_chassis.py', 'sushy/tests/unit/resources/taskservice/test_taskservice.py', 'sushy/tests/unit/resources/taskservice/test_task.py', 'sushy/resources/sessionservice/session.py', 'sushy/tests/unit/resources/system/test_secure_boot_database.py', 'sushy/resources/system/secure_boot_database.py', 'sushy/resources/manager/manager.py', 'sushy/resources/compositionservice/resourceblock.py', 'sushy/main.py', 'sushy/resources/chassis/chassis.py', 'sushy/tests/unit/resources/fabric/test_fabric.py', 'sushy/tests/unit/resources/system/test_ethernet_interfaces.py', 'sushy/tests/unit/resources/system/test_processor.py', 'sushy/resources/system/storage/storage.py', 'sushy/tests/unit/resources/eventservice/test_evendestination.py', 'sushy/resources/fabric/fabric.py', 'sushy/resources/base.py', 'sushy/resources/oem/base.py', 'sushy/tests/unit/resources/manager/test_manager.py', 'sushy/resources/compositionservice/compositionservice.py', 'sushy/resources/system/system.py', 'sushy/tests/unit/resources/test_base.py', 'sushy/resources/compositionservice/resourcezone.py', 'sushy/tests/unit/resources/system/test_system.py', 'sushy/tests/unit/resources/system/storage/test_storage.py', 'sushy/tests/unit/resources/updateservice/test_softwareinventory.py', 'sushy/resources/system/processor.py', 'sushy/tests/unit/resources/compositionservice/test_compositionservice.py', 'sushy/resources/task_monitor.py', 'sushy/resources/updateservice/updateservice.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/564549764f5f8c79461977805c1093550c5656df', 'message': 'Add resource root property\n\nPass down to all resources where redfish_version and registries\ncurrently used.\n\nStory: 2009017\nTask: 42737\nChange-Id: Ibc6e735f3a2209e9b76e2ac00d7c9347b395c163\n'}]",0,799504,564549764f5f8c79461977805c1093550c5656df,13,3,2,27909,,,0,"Add resource root property

Pass down to all resources where redfish_version and registries
currently used.

Story: 2009017
Task: 42737
Change-Id: Ibc6e735f3a2209e9b76e2ac00d7c9347b395c163
",git fetch https://review.opendev.org/openstack/sushy refs/changes/04/799504/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/add-sushy-root-to-resources-1f221794557aa5fc.yaml', 'sushy/tests/unit/resources/sessionservice/test_sessionservice.py', 'sushy/tests/unit/resources/compositionservice/test_resourceblock.py', 'sushy/tests/unit/resources/sessionservice/test_session.py', 'sushy/tests/unit/test_main.py', 'sushy/resources/sessionservice/sessionservice.py', 'sushy/tests/unit/resources/system/storage/test_volume.py', 'sushy/resources/updateservice/softwareinventory.py', 'sushy/resources/system/bios.py', 'sushy/tests/unit/resources/updateservice/test_updateservice.py', 'sushy/resources/eventservice/eventservice.py', 'sushy/resources/taskservice/taskservice.py', 'sushy/tests/unit/resources/compositionservice/test_resourcezone.py', 'sushy/resources/system/secure_boot.py', 'sushy/resources/eventservice/eventdestination.py', 'sushy/tests/unit/resources/system/test_simple_storage.py', 'sushy/resources/taskservice/task.py', 'sushy/tests/unit/resources/chassis/test_chassis.py', 'sushy/tests/unit/resources/taskservice/test_taskservice.py', 'sushy/tests/unit/resources/taskservice/test_task.py', 'sushy/resources/sessionservice/session.py', 'sushy/tests/unit/resources/system/test_secure_boot_database.py', 'sushy/resources/system/secure_boot_database.py', 'sushy/resources/manager/manager.py', 'sushy/resources/compositionservice/resourceblock.py', 'sushy/main.py', 'sushy/resources/chassis/chassis.py', 'sushy/tests/unit/resources/fabric/test_fabric.py', 'sushy/tests/unit/resources/system/test_ethernet_interfaces.py', 'sushy/tests/unit/resources/system/test_processor.py', 'sushy/resources/system/storage/storage.py', 'sushy/tests/unit/resources/eventservice/test_evendestination.py', 'sushy/resources/fabric/fabric.py', 'sushy/resources/base.py', 'sushy/resources/oem/base.py', 'sushy/tests/unit/resources/manager/test_manager.py', 'sushy/resources/compositionservice/compositionservice.py', 'sushy/resources/system/system.py', 'sushy/tests/unit/resources/test_base.py', 'sushy/resources/compositionservice/resourcezone.py', 'sushy/tests/unit/resources/system/test_system.py', 'sushy/tests/unit/resources/system/storage/test_storage.py', 'sushy/tests/unit/resources/updateservice/test_softwareinventory.py', 'sushy/resources/system/processor.py', 'sushy/tests/unit/resources/compositionservice/test_compositionservice.py', 'sushy/resources/task_monitor.py', 'sushy/resources/updateservice/updateservice.py']",47,809b65779508f4a254630b26b768a61abae6f681,sushy-root," registries=None, root=None): :param root: Sushy root object. Empty for Sushy root itself. connector, identity, redfish_version=redfish_version, registries=registries, root=root) self._conn, rsp, target_uri, redfish_version=self.redfish_version, registries=self.registries) registries=self.registries, root=self.root) registries=self.registries, root=self.root) registries=self.registries, root=self.root)"," registries=None): connector, identity, redfish_version, registries) self._conn, rsp, target_uri, self.redfish_version, self.registries) registries=self.registries) registries=self.registries) registries=self.registries)",377,194
openstack%2Fsushy~master~I975b3a4aa53704906cb13c859b61a254de79933f,openstack/sushy,master,I975b3a4aa53704906cb13c859b61a254de79933f,Removing optional fields from insert_media payload,MERGED,2021-07-28 12:05:52.000000000,2021-08-02 10:05:05.000000000,2021-08-02 10:03:15.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-28 12:05:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/725f8ba0fba09785e39e06ec385e70fdbbf66553', 'message': 'Removing optional fields from insert_media payload\n\nRemoving ""Inserted"" and ""WriteProtected"" from the\nVirtualMedia::insert_media() API call payload when set to default values\nas per Redfish specification (""Inserted"": true, ""WriteProtected"": True).\n\n""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()\nare optional and should have reasonable default values on the BMC side.\nSpecifying them in every insert_media call can cause issues on those BMCs that\ntreat them as read-only and not specifying these attributes at all should\nnot cause issues.\n\nBugzilla reference: https://bugzilla.redhat.com/show_bug.cgi?id=1986238\n\nChange-Id: I975b3a4aa53704906cb13c859b61a254de79933f\n'}, {'number': 2, 'created': '2021-07-28 12:07:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/c2726efb3042c8c5f789436b1620f990b702094b', 'message': 'Removing optional fields from insert_media payload\n\nRemoving ""Inserted"" and ""WriteProtected"" from the\nVirtualMedia::insert_media() API call payload when set to default values\nas per Redfish specification (""Inserted"": true, ""WriteProtected"": True).\n\n""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()\nare optional and should have reasonable default values on the BMC side.\nSpecifying them in every insert_media call can cause issues on those BMCs that\ntreat them as read-only and not specifying these attributes at all should\nnot cause issues.\n\nBugzilla reference: https://bugzilla.redhat.com/show_bug.cgi?id=1986238\n\nChange-Id: I975b3a4aa53704906cb13c859b61a254de79933f\n'}, {'number': 3, 'created': '2021-07-28 12:38:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/4bf499a965e8eb0185b73faa0204ecfb3d765adb', 'message': 'Removing optional fields from insert_media payload\n\nRemoving ""Inserted"" and ""WriteProtected"" from the\nVirtualMedia::insert_media() API call payload when set to default values\nas per Redfish specification (""Inserted"": true, ""WriteProtected"": True).\n\n""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()\nare optional and should have reasonable default values on the BMC side.\nSpecifying them in every insert_media call can cause issues on those BMCs that\ntreat them as read-only and not specifying these attributes at all should\nnot cause issues.\n\nBugzilla reference: https://bugzilla.redhat.com/show_bug.cgi?id=1986238\n\nChange-Id: I975b3a4aa53704906cb13c859b61a254de79933f\n'}, {'number': 4, 'created': '2021-07-29 00:05:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/b7e4f2a62daa4b24794c22ce83adb1319d27bd88', 'message': 'Removing optional fields from insert_media payload\n\nRemoving ""Inserted"" and ""WriteProtected"" from the\nVirtualMedia::insert_media() API call payload when set to default values\nas per Redfish specification\n(https://redfish.dmtf.org/schemas/v1/VirtualMedia.v1_3_0.json):\n{""Inserted"": true, ""WriteProtected"": True}.\n\n""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()\nare optional and should have reasonable default values on the BMC side.\nSpecifying them in every insert_media call can cause issues on those BMCs that\ntreat them as read-only and not specifying these attributes at all should\nnot cause issues. SuperMicro X11/X12 platforms can be such example -\nvMedia will not work on these without this fix.\n\nStory: 2009086\nTask: 42907\nrhbz#1986238\n\nChange-Id: I975b3a4aa53704906cb13c859b61a254de79933f\n'}, {'number': 5, 'created': '2021-07-29 13:30:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/e01119c67b3ee17c921e6c982da18cc659d80421', 'message': 'Removing optional fields from insert_media payload\n\nRemoving ""Inserted"" and ""WriteProtected"" from the\nVirtualMedia::insert_media() API call payload when set to default values\nas per Redfish specification\n(https://redfish.dmtf.org/schemas/v1/VirtualMedia.v1_3_0.json):\n{""Inserted"": true, ""WriteProtected"": True}.\n\n""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()\nare optional and should have reasonable default values on the BMC side.\nSpecifying them in every insert_media call can cause issues on those BMCs that\ntreat them as read-only and not specifying these attributes at all should\nnot cause issues. SuperMicro X11/X12 platforms can be such example -\nvMedia will not work on these without this fix.\n\nStory: 2009086\nTask: 42907\nrhbz#1986238\n\nChange-Id: I975b3a4aa53704906cb13c859b61a254de79933f\n'}, {'number': 6, 'created': '2021-07-30 10:16:46.000000000', 'files': ['releasenotes/notes/fix-insert-media-payload-b5d4c707f81d9603.yaml', 'sushy/resources/manager/virtual_media.py', 'sushy/tests/unit/resources/manager/test_virtual_media.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/11a6de24ef7fc735d8a46fe0c1e336f8e099622f', 'message': 'Removing optional fields from insert_media payload\n\nRemoving ""Inserted"" and ""WriteProtected"" from the\nVirtualMedia::insert_media() API call payload when PATCH method of\nconfiguring virtual media is not used (e.g. InserMedia action) and\nvalues are set to defaults as per Redfish specification\n(https://redfish.dmtf.org/schemas/v1/VirtualMedia.v1_3_0.json):\n{""Inserted"": true, ""WriteProtected"": True}.\n\n""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()\nare optional and should have reasonable default values on the BMC side.\nSpecifying them in every insert_media call can cause issues on those BMCs that\ntreat them as read-only and not specifying these attributes at all should\nnot cause issues. SuperMicro X11/X12 platforms can be such example -\nvMedia will not work on these without this fix.\nKeeping old behaviour in BMCs using PATCH request for configuring\nvirtual media (e.g. Lenovo SD530) as these may need ""Inserted"" attribute\nto attach virtual media correctly.\n\nStory: 2009086\nTask: 42907\nrhbz#1986238\n\nChange-Id: I975b3a4aa53704906cb13c859b61a254de79933f\n'}]",19,802690,11a6de24ef7fc735d8a46fe0c1e336f8e099622f,36,5,6,32177,,,0,"Removing optional fields from insert_media payload

Removing ""Inserted"" and ""WriteProtected"" from the
VirtualMedia::insert_media() API call payload when PATCH method of
configuring virtual media is not used (e.g. InserMedia action) and
values are set to defaults as per Redfish specification
(https://redfish.dmtf.org/schemas/v1/VirtualMedia.v1_3_0.json):
{""Inserted"": true, ""WriteProtected"": True}.

""Inserted"" and ""WriteProtected"" attributes to VirtualMedia::insert_media()
are optional and should have reasonable default values on the BMC side.
Specifying them in every insert_media call can cause issues on those BMCs that
treat them as read-only and not specifying these attributes at all should
not cause issues. SuperMicro X11/X12 platforms can be such example -
vMedia will not work on these without this fix.
Keeping old behaviour in BMCs using PATCH request for configuring
virtual media (e.g. Lenovo SD530) as these may need ""Inserted"" attribute
to attach virtual media correctly.

Story: 2009086
Task: 42907
rhbz#1986238

Change-Id: I975b3a4aa53704906cb13c859b61a254de79933f
",git fetch https://review.opendev.org/openstack/sushy refs/changes/90/802690/4 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix-insert-media-payload-b5d4c707f81d9603.yaml', 'sushy/resources/manager/virtual_media.py']",2,725f8ba0fba09785e39e06ec385e70fdbbf66553,BZ1986238-backport," if inserted and write_protected: payload = {""Image"": image} else: payload = {""Image"": image, ""Inserted"": inserted, ""WriteProtected"": write_protected}"," payload = {""Image"": image, ""Inserted"": inserted, ""WriteProtected"": write_protected}",21,2
openstack%2Freleases~master~I2708a7fb4d38f9f2528010fe9294ac66fa8b12bf,openstack/releases,master,I2708a7fb4d38f9f2528010fe9294ac66fa8b12bf,Release glance for stable/ussuri,MERGED,2021-07-23 16:37:49.000000000,2021-08-02 10:04:09.000000000,2021-08-02 10:04:09.000000000,"[{'_account_id': 308}, {'_account_id': 5202}, {'_account_id': 9303}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-23 16:37:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/82fa23304f0b625393fb4d34e7989796b5febd03', 'message': 'Release glance for stable/ussuri\n\nThis release picks up new commits to glance since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\n$ git log --oneline --no-merges 20.0.1..cc22468d\ncc22468d Drop lower-constraints jobs\n977ce4d7 Fix a failure to parse json file\n3880298a Add a release note about import locking\n5b681da1 Cleanup import status information after busting a lock\n03a11dbb Add ImageLock to base flow checks\n6c8f1e81 Functional test enhancement for lock busting\n7ba0762d Add functional test for task status updating\nbb573185 Handle atomic image properties separately\nbeece27e Move SynchronousAPIBase to a generalized location\n173fdb19 Add FakeData generator test utility\n28773650 Fix metadefs for compute-watchdog\n055e5e79 Implement time-limited import locking\n5998933a Add context.elevated() helper for getting admin privileges\nebeb31e6 Poll for final state on test_copy_image_revert_lifecycle()\n541c0fd6 Fix non-deterministic copy_image_revert_lifecycle test\n2d5e8439 Fix import failure status reporting when all_stores_must_succeed=True\n931d39ec Functional reproducer for bug 1891352\n3da696e0 Update task message during import\n586ca78a Heartbeat the actual work of the task\n825a0ec7 Add image_delete_property_atomic() helper\n56d01f25 Add image_set_property_atomic() helper\n663e027e Flesh out FakeImage for extra_properties\nec46cbca Add tests for _ImportToStore.execute()\nea34be42 Add testing for _CompleteTask in api_image_import\n0895d191 Make test_copy_image_revert_lifecycle handle 409 on import retry\neb08fbae Make import task capable of running as admin on behalf of user\n168fdb7f Add a functional test for non-owned image copying\n3bf1af9b Refactor common auth token code in images test\nbc826947 Add a test to replicate the owner-required behavior of copy-image\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I2708a7fb4d38f9f2528010fe9294ac66fa8b12bf\n'}, {'number': 2, 'created': '2021-08-02 09:09:44.000000000', 'files': ['deliverables/ussuri/glance.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/b8493fc103ec7434a9e7d8bcc59980b65647e7ed', 'message': 'Release glance for stable/ussuri\n\nThis release picks up new commits to glance since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\n$ git log --oneline --no-merges 20.0.1..cc22468d\ncc22468d Drop lower-constraints jobs\n977ce4d7 Fix a failure to parse json file\n3880298a Add a release note about import locking\n5b681da1 Cleanup import status information after busting a lock\n03a11dbb Add ImageLock to base flow checks\n6c8f1e81 Functional test enhancement for lock busting\n7ba0762d Add functional test for task status updating\nbb573185 Handle atomic image properties separately\nbeece27e Move SynchronousAPIBase to a generalized location\n173fdb19 Add FakeData generator test utility\n28773650 Fix metadefs for compute-watchdog\n055e5e79 Implement time-limited import locking\n5998933a Add context.elevated() helper for getting admin privileges\nebeb31e6 Poll for final state on test_copy_image_revert_lifecycle()\n541c0fd6 Fix non-deterministic copy_image_revert_lifecycle test\n2d5e8439 Fix import failure status reporting when all_stores_must_succeed=True\n931d39ec Functional reproducer for bug 1891352\n3da696e0 Update task message during import\n586ca78a Heartbeat the actual work of the task\n825a0ec7 Add image_delete_property_atomic() helper\n56d01f25 Add image_set_property_atomic() helper\n663e027e Flesh out FakeImage for extra_properties\nec46cbca Add tests for _ImportToStore.execute()\nea34be42 Add testing for _CompleteTask in api_image_import\n0895d191 Make test_copy_image_revert_lifecycle handle 409 on import retry\neb08fbae Make import task capable of running as admin on behalf of user\n168fdb7f Add a functional test for non-owned image copying\n3bf1af9b Refactor common auth token code in images test\nbc826947 Add a test to replicate the owner-required behavior of copy-image\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I2708a7fb4d38f9f2528010fe9294ac66fa8b12bf\n'}]",0,802057,b8493fc103ec7434a9e7d8bcc59980b65647e7ed,12,5,2,17685,,,0,"Release glance for stable/ussuri

This release picks up new commits to glance since
the last release from stable/ussuri.

This is being proposed as a convenience to help make sure stable
changes are being released. If the team is good with this going out,
please respond with a +1 to let the release team know it is OK to
proceed.

If it is not wanted at this time, or if there are more changes that
would be good to get merged before doing a stable release, please
leave a -1 with a comment with what the team would prefer. We can
then either abandon this patch, or wait for an update with a new
commit hash to use instead.

$ git log --oneline --no-merges 20.0.1..cc22468d
cc22468d Drop lower-constraints jobs
977ce4d7 Fix a failure to parse json file
3880298a Add a release note about import locking
5b681da1 Cleanup import status information after busting a lock
03a11dbb Add ImageLock to base flow checks
6c8f1e81 Functional test enhancement for lock busting
7ba0762d Add functional test for task status updating
bb573185 Handle atomic image properties separately
beece27e Move SynchronousAPIBase to a generalized location
173fdb19 Add FakeData generator test utility
28773650 Fix metadefs for compute-watchdog
055e5e79 Implement time-limited import locking
5998933a Add context.elevated() helper for getting admin privileges
ebeb31e6 Poll for final state on test_copy_image_revert_lifecycle()
541c0fd6 Fix non-deterministic copy_image_revert_lifecycle test
2d5e8439 Fix import failure status reporting when all_stores_must_succeed=True
931d39ec Functional reproducer for bug 1891352
3da696e0 Update task message during import
586ca78a Heartbeat the actual work of the task
825a0ec7 Add image_delete_property_atomic() helper
56d01f25 Add image_set_property_atomic() helper
663e027e Flesh out FakeImage for extra_properties
ec46cbca Add tests for _ImportToStore.execute()
ea34be42 Add testing for _CompleteTask in api_image_import
0895d191 Make test_copy_image_revert_lifecycle handle 409 on import retry
eb08fbae Make import task capable of running as admin on behalf of user
168fdb7f Add a functional test for non-owned image copying
3bf1af9b Refactor common auth token code in images test
bc826947 Add a test to replicate the owner-required behavior of copy-image

Signed-off-by: Elod Illes <elod.illes@est.tech>
Change-Id: I2708a7fb4d38f9f2528010fe9294ac66fa8b12bf
",git fetch https://review.opendev.org/openstack/releases refs/changes/57/802057/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/ussuri/glance.yaml'],1,82fa23304f0b625393fb4d34e7989796b5febd03,ussuri-stable, - version: 20.1.0 projects: - repo: openstack/glance hash: cc22468d74cc83a24c198cc45a827f0ed14b3227,,4,0
openstack%2Fsushy~master~Ib6cd982cb5def522c1a24b9914f2135ba2aeae71,openstack/sushy,master,Ib6cd982cb5def522c1a24b9914f2135ba2aeae71,Fix OEM required attribute parsing,MERGED,2021-07-09 14:32:47.000000000,2021-08-02 10:03:22.000000000,2021-08-02 10:03:22.000000000,"[{'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-09 14:32:47.000000000', 'files': ['sushy/resources/oem/base.py', 'releasenotes/notes/fix-required-oem-attribute-parsing-205e4186275aa293.yaml', 'sushy/tests/unit/resources/oem/test_fake.py', 'sushy/tests/unit/json_samples/system.json', 'sushy/resources/oem/fake.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/55d949cccc3fd7116e315c9f012323e2ca5e5570', 'message': 'Fix OEM required attribute parsing\n\nDuring initialization vendor id is not known and it does\nnot pick up Oem/Vendor section that triggers missing\nattribute error when at least one field is marked as\nrequired.\n\nFix this by skipping parsing if vendor id is not known.\nAttributes are parsed again after setting parent resource\nwith vendor id.\n\nIt is expected that setting parent resource will always\nbe done from `common.get_resource_extension_by_vendor`\nmethod.\n\nChange-Id: Ib6cd982cb5def522c1a24b9914f2135ba2aeae71\n'}]",0,800267,55d949cccc3fd7116e315c9f012323e2ca5e5570,10,3,1,27909,,,0,"Fix OEM required attribute parsing

During initialization vendor id is not known and it does
not pick up Oem/Vendor section that triggers missing
attribute error when at least one field is marked as
required.

Fix this by skipping parsing if vendor id is not known.
Attributes are parsed again after setting parent resource
with vendor id.

It is expected that setting parent resource will always
be done from `common.get_resource_extension_by_vendor`
method.

Change-Id: Ib6cd982cb5def522c1a24b9914f2135ba2aeae71
",git fetch https://review.opendev.org/openstack/sushy refs/changes/67/800267/1 && git format-patch -1 --stdout FETCH_HEAD,"['sushy/resources/oem/base.py', 'releasenotes/notes/fix-required-oem-attribute-parsing-205e4186275aa293.yaml', 'sushy/tests/unit/resources/oem/test_fake.py', 'sushy/tests/unit/json_samples/system.json', 'sushy/resources/oem/fake.py']",5,55d949cccc3fd7116e315c9f012323e2ca5e5570,oem-parse-attributes," name = base.Field('Name', required=True)",,14,0
openstack%2Fnova~master~I2ae7e9782316e3662e4e51e3f5ba0ef597bf281b,openstack/nova,master,I2ae7e9782316e3662e4e51e3f5ba0ef597bf281b,Fix request path to query a resource provider by uuid,MERGED,2021-07-15 02:28:42.000000000,2021-08-02 09:59:58.000000000,2021-07-30 13:25:51.000000000,"[{'_account_id': 7166}, {'_account_id': 11604}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-15 02:28:42.000000000', 'files': ['nova/cmd/manage.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1d3373dcf0a05d4a2c5b51fc1b74d41ec1bb1175', 'message': 'Fix request path to query a resource provider by uuid\n\nTo query a resource provider by uuid, request path should look like\n /resource_providers?uuid=<uuid>\nistead of\n /resource_providers&uuid=<uuid>\n\nThis change fixes the wrong path so that ""nova-manage placement audit""\ncommand can look up the target resource provider properly.\n\nCloses-Bug: #1936278\nChange-Id: I2ae7e9782316e3662e4e51e3f5ba0ef597bf281b\n'}]",2,800855,1d3373dcf0a05d4a2c5b51fc1b74d41ec1bb1175,61,4,1,9816,,,0,"Fix request path to query a resource provider by uuid

To query a resource provider by uuid, request path should look like
 /resource_providers?uuid=<uuid>
istead of
 /resource_providers&uuid=<uuid>

This change fixes the wrong path so that ""nova-manage placement audit""
command can look up the target resource provider properly.

Closes-Bug: #1936278
Change-Id: I2ae7e9782316e3662e4e51e3f5ba0ef597bf281b
",git fetch https://review.opendev.org/openstack/nova refs/changes/55/800855/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/cmd/manage.py'],1,1d3373dcf0a05d4a2c5b51fc1b74d41ec1bb1175,bug/1936278, url += '?uuid=%s' % kwargs['uuid'], url += '&uuid=%s' % kwargs['uuid'],1,1
openstack%2Fpuppet-tripleo~stable%2Ftrain~Ia273d0dbc668bbae4c6e9cb535bd68783faf0148,openstack/puppet-tripleo,stable/train,Ia273d0dbc668bbae4c6e9cb535bd68783faf0148,Allow to use the upstream rabbitmq-server-ha OCF resource agent,ABANDONED,2021-02-28 21:29:34.000000000,2021-08-02 09:53:32.000000000,,"[{'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-02-28 21:29:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/22d83b9cd17db578466d4459ede4daef1c6febdf', 'message': 'Allow to use the upstream rabbitmq-server-ha OCF resource agent\n\nWe introduce a new hiera key in order to be able to use the upstream\nrabbitmq-server-ha OCF resource [1].\nFor it to work inside bundles we need to have a rabbitmq-server\npackage inside the bundle which includes at least\nhttps://github.com/rabbitmq/rabbitmq-server/pull/2853\nand also we need to be using at least pacemaker-2.0.4-4.el8.\n\nThe rationale for this work is that the current rabbitmq-cluster\nresource agent maintained under the ClusterLabs umbrella is\na cloned resource, which is limited in the number of actions\nit can do in a number of situations (partition, failover, etc).\n\nThe upstream resource agent is a master/slave resource and\nallows for more expressive semantics in general and is preferrable [2].\n\n[1] https://github.com/rabbitmq/rabbitmq-server/blob/master/scripts/rabbitmq-server-ha.ocf\n[2] https://github.com/lemenkov/pmk-rmq.md/blob/master/pmk-rmq.md\n\nChange-Id: Ia273d0dbc668bbae4c6e9cb535bd68783faf0148\n(cherry picked from commit e4f1d45534d02071f97061f9071f6dafc4f2c6a0)\n'}, {'number': 2, 'created': '2021-03-01 14:38:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/4d789ff7fe9812babc332c7e526f321b4cb82a2e', 'message': 'Allow to use the upstream rabbitmq-server-ha OCF resource agent\n\nWe introduce a new hiera key in order to be able to use the upstream\nrabbitmq-server-ha OCF resource [1].\nFor it to work inside bundles we need to have a rabbitmq-server\npackage inside the bundle which includes at least\nhttps://github.com/rabbitmq/rabbitmq-server/pull/2853\nand also we need to be using at least pacemaker-2.0.4-4.el8.\n\nThe rationale for this work is that the current rabbitmq-cluster\nresource agent maintained under the ClusterLabs umbrella is\na cloned resource, which is limited in the number of actions\nit can do in a number of situations (partition, failover, etc).\n\nThe upstream resource agent is a master/slave resource and\nallows for more expressive semantics in general and is preferrable [2].\n\n[1] https://github.com/rabbitmq/rabbitmq-server/blob/master/scripts/rabbitmq-server-ha.ocf\n[2] https://github.com/lemenkov/pmk-rmq.md/blob/master/pmk-rmq.md\n\nChange-Id: Ia273d0dbc668bbae4c6e9cb535bd68783faf0148\n(cherry picked from commit e4f1d45534d02071f97061f9071f6dafc4f2c6a0)\n'}, {'number': 3, 'created': '2021-03-01 21:33:54.000000000', 'files': ['manifests/profile/pacemaker/rabbitmq_bundle.pp', 'releasenotes/notes/upstream-rabbitmq-server-ha-ocf-resource-agent-0db89eb7c55e64ca.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/7fe77368af554ca4d0eec0a9e030c6dd21cbca6c', 'message': 'Allow to use the upstream rabbitmq-server-ha OCF resource agent\n\nWe introduce a new hiera key in order to be able to use the upstream\nrabbitmq-server-ha OCF resource [1].\nFor it to work inside bundles we need to have a rabbitmq-server\npackage inside the bundle which includes at least\nhttps://github.com/rabbitmq/rabbitmq-server/pull/2853\nand also we need to be using at least pacemaker-2.0.4-4.el8.\n\nThe rationale for this work is that the current rabbitmq-cluster\nresource agent maintained under the ClusterLabs umbrella is\na cloned resource, which is limited in the number of actions\nit can do in a number of situations (partition, failover, etc).\n\nThe upstream resource agent is a master/slave resource and\nallows for more expressive semantics in general and is preferrable [2].\n\n[1] https://github.com/rabbitmq/rabbitmq-server/blob/master/scripts/rabbitmq-server-ha.ocf\n[2] https://github.com/lemenkov/pmk-rmq.md/blob/master/pmk-rmq.md\n\nChange-Id: Ia273d0dbc668bbae4c6e9cb535bd68783faf0148\n'}]",0,777893,7fe77368af554ca4d0eec0a9e030c6dd21cbca6c,13,3,3,20172,,,0,"Allow to use the upstream rabbitmq-server-ha OCF resource agent

We introduce a new hiera key in order to be able to use the upstream
rabbitmq-server-ha OCF resource [1].
For it to work inside bundles we need to have a rabbitmq-server
package inside the bundle which includes at least
https://github.com/rabbitmq/rabbitmq-server/pull/2853
and also we need to be using at least pacemaker-2.0.4-4.el8.

The rationale for this work is that the current rabbitmq-cluster
resource agent maintained under the ClusterLabs umbrella is
a cloned resource, which is limited in the number of actions
it can do in a number of situations (partition, failover, etc).

The upstream resource agent is a master/slave resource and
allows for more expressive semantics in general and is preferrable [2].

[1] https://github.com/rabbitmq/rabbitmq-server/blob/master/scripts/rabbitmq-server-ha.ocf
[2] https://github.com/lemenkov/pmk-rmq.md/blob/master/pmk-rmq.md

Change-Id: Ia273d0dbc668bbae4c6e9cb535bd68783faf0148
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/93/777893/3 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/pacemaker/rabbitmq_bundle.pp', 'releasenotes/notes/upstream-rabbitmq-server-ha-ocf-resource-agent-0db89eb7c55e64ca.yaml']",2,22d83b9cd17db578466d4459ede4daef1c6febdf,force-stable/train,--- features: - | Introduces the tripleo::profile::pacemaker::rabbitmq_bundle::use_masterslave_rabbitmqra class parameter to be able to use the resource agent from the rabbitmq upstream repository (as opposed to the resource-agent maintained under the clusterlabs umbrella). ,,73,29
openstack%2Fvalidations-common~master~I820aec71fdd0ac6f551d09da75b2eea08cb0f844,openstack/validations-common,master,I820aec71fdd0ac6f551d09da75b2eea08cb0f844,DNM,ABANDONED,2021-08-02 08:41:06.000000000,2021-08-02 09:49:50.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-02 08:41:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/7f97229730071b0f543e2218d5ce49b68c84fdf8', 'message': 'DNM\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I820aec71fdd0ac6f551d09da75b2eea08cb0f844\n'}, {'number': 2, 'created': '2021-08-02 09:17:16.000000000', 'files': ['.zuul.yaml', 'roles/validations/vars/main.yaml'], 'web_link': 'https://opendev.org/openstack/validations-common/commit/70c889fcd945d5d8e86461c2b3cb53cf79c24dc0', 'message': 'DNM\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I820aec71fdd0ac6f551d09da75b2eea08cb0f844\n'}]",1,803153,70c889fcd945d5d8e86461c2b3cb53cf79c24dc0,5,1,2,32926,,,0,"DNM

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I820aec71fdd0ac6f551d09da75b2eea08cb0f844
",git fetch https://review.opendev.org/openstack/validations-common refs/changes/53/803153/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/validations/vars/main.yaml'],1,7f97229730071b0f543e2218d5ce49b68c84fdf8,test, validation:, compute: network: validation: tripleo:,1,4
openstack%2Fnetworking-baremetal~master~I6d36a1f66d6ffa692000a406d9784588dbf4213a,openstack/networking-baremetal,master,I6d36a1f66d6ffa692000a406d9784588dbf4213a,Increase version of hacking and pycodestyle,MERGED,2021-08-02 08:02:16.000000000,2021-08-02 09:41:30.000000000,2021-08-02 09:40:14.000000000,"[{'_account_id': 10239}, {'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-02 08:02:16.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/networking-baremetal/commit/ae68d692b82d705273ba5e6bd2c4f25c7313a1a8', 'message': 'Increase version of hacking and pycodestyle\n\nChange-Id: I6d36a1f66d6ffa692000a406d9784588dbf4213a\n'}]",0,803148,ae68d692b82d705273ba5e6bd2c4f25c7313a1a8,8,3,1,23851,,,0,"Increase version of hacking and pycodestyle

Change-Id: I6d36a1f66d6ffa692000a406d9784588dbf4213a
",git fetch https://review.opendev.org/openstack/networking-baremetal refs/changes/48/803148/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,ae68d692b82d705273ba5e6bd2c4f25c7313a1a8,increase-hacking-pycodestyle," hacking>=4.1.0,<5.0.0 # Apache-2.0 pycodestyle>=2.0.0,<3.0.0 # MIT"," hacking>=3.1.0,<4.0.0 # Apache-2.0 pycodestyle>=2.0.0,<2.7.0 # MIT",2,2
openstack%2Fpuppet-openstack-integration~master~Ib8a5624752c5af74fc2ea734d1e7197d1bf9aa8d,openstack/puppet-openstack-integration,master,Ib8a5624752c5af74fc2ea734d1e7197d1bf9aa8d,Updated from Puppet OpenStack modules constraints,MERGED,2021-07-28 06:20:51.000000000,2021-08-02 09:36:05.000000000,2021-08-02 09:36:05.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-28 06:20:51.000000000', 'files': ['Puppetfile'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/ffb1348c3efcb4ce5a0061c841c533e91ed14777', 'message': 'Updated from Puppet OpenStack modules constraints\n\nChange-Id: Ib8a5624752c5af74fc2ea734d1e7197d1bf9aa8d\n'}]",0,802659,ffb1348c3efcb4ce5a0061c841c533e91ed14777,8,3,1,11131,,,0,"Updated from Puppet OpenStack modules constraints

Change-Id: Ib8a5624752c5af74fc2ea734d1e7197d1bf9aa8d
",git fetch https://review.opendev.org/openstack/puppet-openstack-integration refs/changes/59/802659/1 && git format-patch -1 --stdout FETCH_HEAD,['Puppetfile'],1,ffb1348c3efcb4ce5a0061c841c533e91ed14777,openstack/puppet/constraints, :ref => 'v12.0.0', :ref => 'v11.1.0',1,1
openstack%2Freleases~master~I356edf876bc59531b59f85311fc71c439b6fae68,openstack/releases,master,I356edf876bc59531b59f85311fc71c439b6fae68,Release networking-hyperv for stable/ussuri,MERGED,2021-07-23 17:58:13.000000000,2021-08-02 09:34:06.000000000,2021-08-02 09:34:06.000000000,"[{'_account_id': 308}, {'_account_id': 8213}, {'_account_id': 8543}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-23 17:58:13.000000000', 'files': ['deliverables/ussuri/networking-hyperv.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/468785212ade3e62ae0c0fb55411caae181e0892', 'message': 'Release networking-hyperv for stable/ussuri\n\nThis release picks up new commits to networking-hyperv since\nthe last release from stable/ussuri.\n\nThis is being proposed as a convenience to help make sure stable\nchanges are being released. If the team is good with this going out,\nplease respond with a +1 to let the release team know it is OK to\nproceed.\n\nIf it is not wanted at this time, or if there are more changes that\nwould be good to get merged before doing a stable release, please\nleave a -1 with a comment with what the team would prefer. We can\nthen either abandon this patch, or wait for an update with a new\ncommit hash to use instead.\n\n$ git log --oneline --no-merges 8.0.0..e5b0ddb\ne5b0ddb Monkey patch original current_thread _active\n\nSigned-off-by: Elod Illes <elod.illes@est.tech>\nChange-Id: I356edf876bc59531b59f85311fc71c439b6fae68\n'}]",0,802090,468785212ade3e62ae0c0fb55411caae181e0892,9,5,1,17685,,,0,"Release networking-hyperv for stable/ussuri

This release picks up new commits to networking-hyperv since
the last release from stable/ussuri.

This is being proposed as a convenience to help make sure stable
changes are being released. If the team is good with this going out,
please respond with a +1 to let the release team know it is OK to
proceed.

If it is not wanted at this time, or if there are more changes that
would be good to get merged before doing a stable release, please
leave a -1 with a comment with what the team would prefer. We can
then either abandon this patch, or wait for an update with a new
commit hash to use instead.

$ git log --oneline --no-merges 8.0.0..e5b0ddb
e5b0ddb Monkey patch original current_thread _active

Signed-off-by: Elod Illes <elod.illes@est.tech>
Change-Id: I356edf876bc59531b59f85311fc71c439b6fae68
",git fetch https://review.opendev.org/openstack/releases refs/changes/90/802090/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/ussuri/networking-hyperv.yaml'],1,468785212ade3e62ae0c0fb55411caae181e0892,ussuri-stable, - version: 8.0.1 projects: - repo: openstack/networking-hyperv hash: e5b0ddbb1a9701c1661047293ec50042a63f7d89,,4,0
openstack%2Freleases~master~Ic442008eb9535c6137f3d395b56bd1004d62dc15,openstack/releases,master,Ic442008eb9535c6137f3d395b56bd1004d62dc15,retire panko and python-pankoclient,MERGED,2021-07-09 13:55:20.000000000,2021-08-02 09:34:03.000000000,2021-08-02 09:34:03.000000000,"[{'_account_id': 308}, {'_account_id': 4264}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-09 13:55:20.000000000', 'files': ['deliverables/xena/panko.yaml', 'deliverables/xena/python-pankoclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/f03ad48160236ac91194eca2dc131f2d998463ae', 'message': 'retire panko and python-pankoclient\n\nChange-Id: Ic442008eb9535c6137f3d395b56bd1004d62dc15\n'}]",3,800258,f03ad48160236ac91194eca2dc131f2d998463ae,16,4,1,28522,,,0,"retire panko and python-pankoclient

Change-Id: Ic442008eb9535c6137f3d395b56bd1004d62dc15
",git fetch https://review.opendev.org/openstack/releases refs/changes/58/800258/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/xena/panko.yaml', 'deliverables/xena/python-pankoclient.yaml']",2,f03ad48160236ac91194eca2dc131f2d998463ae,retire-panko,,--- include-pypi-link: true launchpad: python-pankoclient release-model: cycle-with-intermediary team: Telemetry type: client-library repository-settings: openstack/python-pankoclient: tarball-base: pankoclient ,0,16
openstack%2Fbifrost~master~Ib5902de7fd736bf6697c27a3816d027566f1e826,openstack/bifrost,master,Ib5902de7fd736bf6697c27a3816d027566f1e826,CI: use legacy crypto on Fedora with Cirros,MERGED,2021-07-31 12:07:09.000000000,2021-08-02 09:31:36.000000000,2021-08-02 09:29:04.000000000,"[{'_account_id': 10239}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-31 12:07:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/590313c8392357f8a5c12ccbbef3caed958f16f2', 'message': 'CI: use legacy crypto on Fedora with Cirros\n\nChange-Id: Ib5902de7fd736bf6697c27a3816d027566f1e826\n'}, {'number': 2, 'created': '2021-07-31 15:14:50.000000000', 'files': ['scripts/test-bifrost.sh'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/65bc56e3a275d12f8167aa5ca140c035d15bc121', 'message': 'CI: use legacy crypto on Fedora with Cirros\n\nChange-Id: Ib5902de7fd736bf6697c27a3816d027566f1e826\n'}]",0,803104,65bc56e3a275d12f8167aa5ca140c035d15bc121,11,4,2,10239,,,0,"CI: use legacy crypto on Fedora with Cirros

Change-Id: Ib5902de7fd736bf6697c27a3816d027566f1e826
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/04/803104/2 && git format-patch -1 --stdout FETCH_HEAD,['scripts/test-bifrost.sh'],1,590313c8392357f8a5c12ccbbef3caed958f16f2,fedora,"CURRENT_CRYPTO_POLICY= if [ ${USE_CIRROS} = ""true"" ] && which update-crypto-policies 2>&1 > /dev/null; then # Crypto policies in newer Fedora prevent SSH into Cirros CURRENT_CRYPTO_POLICY=$(sudo update-crypto-policy --show) sudo update-crypto-policies --set LEGACY fi on_exit() { if [ -n ""$CURRENT_CRYPTO_POLICY}"" ]; then sudo update-crypto-policies --set $CURRENT_CRYPTO_POLICY || true fitrap on_exit EXIT",logs_on_exit() {trap logs_on_exit EXIT,12,2
openstack%2Fbifrost~master~Id34867b98b51835a1e07ffc2f7c8d41e02d8452d,openstack/bifrost,master,Id34867b98b51835a1e07ffc2f7c8d41e02d8452d,Drop external tftp service in favor to use dnsmasq's one,MERGED,2021-03-23 14:31:22.000000000,2021-08-02 09:30:24.000000000,2021-08-02 09:29:02.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-03-23 14:31:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/20d55ab3bde4902d355f1de94fcb77af01f480d9', 'message': ""Drop external tftp service in favor to use dnsmasq's one\n\nDnsmasq has own internal TFTP service limited to read-only operations, but\nit's enough for PXE boot.\n\nChange-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d\n""}, {'number': 2, 'created': '2021-03-24 07:11:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/ba834fee3e9449659372262dc232763b281774ef', 'message': ""Drop external tftp service in favor to use dnsmasq's one\n\nDnsmasq has own internal TFTP service limited to read-only operations,\nbut it's enough for PXE boot.\n\nChange-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d\n""}, {'number': 3, 'created': '2021-04-15 13:27:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/7bb78df9306bc4ade9a031c3109d9d52685004f2', 'message': ""Drop external tftp service in favor to use dnsmasq's one\n\nDnsmasq has own internal TFTP service limited to read-only operations,\nbut it's enough for PXE boot.\n\nChange-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d\n""}, {'number': 4, 'created': '2021-06-02 15:19:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/9f71cbef619e1e393235ff4cae521530874a2ebc', 'message': ""Drop external tftp service in favor to use dnsmasq's one\n\nDnsmasq has own internal TFTP service limited to read-only operations,\nbut it's enough for PXE boot.\n\nChange-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d\n""}, {'number': 5, 'created': '2021-07-30 13:21:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/a2d8f81e410da197bc3e5c842d0a1d829d557e42', 'message': ""Drop external tftp service in favor to use dnsmasq's one\n\nDnsmasq has own internal TFTP service limited to read-only operations,\nbut it's enough for PXE boot. Xinetd has been removed from Fedora 34.\n\nCo-Authored-By: Dmitry Tantsur <dtantsur@protonmail.com>\nChange-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d\n""}, {'number': 6, 'created': '2021-07-30 13:42:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/17bb5430f83bc39a8601b3b1ca1e461fc92b433d', 'message': ""Drop external tftp service in favor to use dnsmasq's one\n\nDnsmasq has own internal TFTP service limited to read-only operations,\nbut it's enough for PXE boot. Xinetd has been removed from Fedora 34.\n\nCo-Authored-By: Dmitry Tantsur <dtantsur@protonmail.com>\nChange-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d\n""}, {'number': 7, 'created': '2021-07-30 18:31:54.000000000', 'files': ['playbooks/roles/bifrost-ironic-install/files/tftpboot-map-file', 'playbooks/roles/bifrost-ironic-install/defaults/main.yml', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Debian_family.yml', 'playbooks/roles/bifrost-ironic-install/files/xinetd.tftp', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Suse_family.yml', 'playbooks/roles/bifrost-ironic-install/tasks/create_tftpboot.yml', 'playbooks/roles/bifrost-ironic-install/templates/dnsmasq.conf.j2', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_RedHat_family.yml', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Fedora.yml', 'releasenotes/notes/no-xinetd-199ba2496469142c.yaml', 'playbooks/roles/bifrost-ironic-install/tasks/bootstrap.yml', 'playbooks/roles/bifrost-ironic-install/tasks/start.yml', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Ubuntu.yml'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/ce262837ab0d66922a6fd608fbf24dd808b9cd68', 'message': ""Drop external tftp service in favor to use dnsmasq's one\n\nDnsmasq has own internal TFTP service limited to read-only operations,\nbut it's enough for PXE boot. Xinetd has been removed from Fedora 34.\n\nCo-Authored-By: Dmitry Tantsur <dtantsur@protonmail.com>\nChange-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d\n""}]",4,782531,ce262837ab0d66922a6fd608fbf24dd808b9cd68,33,5,7,30211,,,0,"Drop external tftp service in favor to use dnsmasq's one

Dnsmasq has own internal TFTP service limited to read-only operations,
but it's enough for PXE boot. Xinetd has been removed from Fedora 34.

Co-Authored-By: Dmitry Tantsur <dtantsur@protonmail.com>
Change-Id: Id34867b98b51835a1e07ffc2f7c8d41e02d8452d
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/31/782531/6 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/roles/bifrost-ironic-install/templates/dnsmasq.conf.j2', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_RedHat_family.yml', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Fedora.yml', 'playbooks/roles/bifrost-ironic-install/files/tftpboot-map-file', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Debian_family.yml', 'playbooks/roles/bifrost-ironic-install/files/xinetd.tftp', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Ubuntu.yml', 'playbooks/roles/bifrost-ironic-install/defaults/required_defaults_Suse_family.yml', 'playbooks/roles/bifrost-keystone-install/defaults/required_defaults_RedHat_family.yml', 'playbooks/roles/bifrost-ironic-install/tasks/create_tftpboot.yml']",10,20d55ab3bde4902d355f1de94fcb77af01f480d9,tftp_dnsmasq_internal,,"- name: ""Place tftpd map-file"" copy: src: tftpboot-map-file dest: /tftpboot/map-file owner: ironic group: ironic mode: 0644 - name: ""Disable service {{ tftp_service_name }}"" service: name=""{{ tftp_service_name }}"" state=stopped enabled=no - name: ""Place tftp config file"" copy: src=xinetd.tftp dest=/etc/xinetd.d/tftp ",4,42
openstack%2Freleases~master~I42b34643b54513274f87567d8500219892955fcd,openstack/releases,master,I42b34643b54513274f87567d8500219892955fcd,python-senlinclient 2.3.0,MERGED,2021-07-28 12:24:56.000000000,2021-08-02 09:29:53.000000000,2021-08-02 09:29:53.000000000,"[{'_account_id': 308}, {'_account_id': 7404}, {'_account_id': 9323}, {'_account_id': 11034}, {'_account_id': 15857}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 22998}, {'_account_id': 23401}, {'_account_id': 23517}, {'_account_id': 25395}, {'_account_id': 27224}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-07-28 12:24:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/e8e13a8d0de0d9cadb9aa158b197256a3687188c', 'message': 'python-senlinclient 2.3.0\n\nNew release series so a major version bump is necessary, despite the\nonly change being the uncapping of a dependency.\n\nChange-Id: I42b34643b54513274f87567d8500219892955fcd\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n'}, {'number': 2, 'created': '2021-07-28 13:09:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/80578b0159e25081b2bf3685eaf9fad22432a8f5', 'message': 'python-senlinclient 2.3.0\n\nNew release series so a major version bump is necessary, despite the\nonly change being the uncapping of a dependency.\n\nChange-Id: I42b34643b54513274f87567d8500219892955fcd\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n'}, {'number': 3, 'created': '2021-07-28 13:49:15.000000000', 'files': ['deliverables/xena/python-senlinclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/bfd28a6d86ec542d9c3ebeaef3d9e6455dec284a', 'message': 'python-senlinclient 2.3.0\n\nChange-Id: I42b34643b54513274f87567d8500219892955fcd\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n'}]",2,802692,bfd28a6d86ec542d9c3ebeaef3d9e6455dec284a,23,14,3,15334,,,0,"python-senlinclient 2.3.0

Change-Id: I42b34643b54513274f87567d8500219892955fcd
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/92/802692/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/wallaby/python-senlinclient.yaml'],1,e8e13a8d0de0d9cadb9aa158b197256a3687188c,python-senlinclient, - version: 2.3.0 projects: - repo: openstack/python-senlinclient hash: c52b7cf327738be5d821ea605bed505641246030,,4,0
openstack%2Ftacker~master~If47b8a787bba84b95c29989f8fbdc79a92dcfb86,openstack/tacker,master,If47b8a787bba84b95c29989f8fbdc79a92dcfb86,"when scale vnf , mgmt driver doesn't work",NEW,2018-06-20 01:00:12.000000000,2021-08-02 09:26:59.000000000,,"[{'_account_id': 2874}, {'_account_id': 18955}, {'_account_id': 19316}, {'_account_id': 19644}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}, {'_account_id': 27181}, {'_account_id': 30198}]","[{'number': 1, 'created': '2018-06-20 01:00:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/0a48ecbb26650fb4619d24f6845ce8b8f7953fa8', 'message': ""when scale vnf , mgmt driver doesn't work\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\n""}, {'number': 2, 'created': '2018-06-20 06:15:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/d3a9d8f2ca84cf7d101bfa325aa5349f4ffe2422', 'message': ""when scale vnf , mgmt driver doesn't work\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\n""}, {'number': 3, 'created': '2018-06-20 06:21:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/99683109e4b6dab839c61a7ed49c0bb538c74ec5', 'message': ""when scale vnf , mgmt driver doesn't work\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\n""}, {'number': 4, 'created': '2018-07-27 08:29:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/900ed36c570ed67c305a0c2427a9b8b95e1bd98c', 'message': ""when scale vnf , mgmt driver doesn't work\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\n""}, {'number': 5, 'created': '2019-08-21 06:21:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/68e9eec5b789f27ec3d1fe73af13ef8a6136f5e1', 'message': ""when scale vnf , mgmt driver doesn't work\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\n""}, {'number': 6, 'created': '2019-08-21 09:36:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/b263090c108d17343c2db5ecbbf5fd919e1fe57f', 'message': ""when scale vnf , mgmt driver doesn't work\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\nCo-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>\n""}, {'number': 7, 'created': '2019-08-23 08:05:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/1c5a2709d2d16b9f67071f8fb5d052b7dcb732a2', 'message': ""when scale vnf , mgmt driver doesn't work\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\nCo-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>\n""}, {'number': 8, 'created': '2019-09-06 09:43:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/ffeac05af2c4be7c1265d341480658001b7eab7e', 'message': ""when scale vnf , mgmt driver doesn't work\n\nadd checking scale cooldown window and scaling status.\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\nCo-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>\n""}, {'number': 9, 'created': '2019-09-06 10:13:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/e927eedfb9028c388acde34fa9564bd0df4fd1db', 'message': ""when scale vnf , mgmt driver doesn't work\n\nadd checking scale cooldown window and scaling status.\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\nCo-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>\n""}, {'number': 10, 'created': '2019-09-18 09:18:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/7a518d85378db4a2f11dc585106717c1a6b36f7e', 'message': ""when scale vnf , mgmt driver doesn't work\n\nadd checking scale cooldown window and scaling status.\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\nCo-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>\n""}, {'number': 11, 'created': '2019-09-25 02:45:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/3192038f561bead128716b70f1e20aad9bb1e959', 'message': ""when scale vnf , mgmt driver doesn't work\n\nadd checking scale cooldown window and scaling status.\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\nCo-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>\n""}, {'number': 12, 'created': '2019-09-30 08:05:53.000000000', 'files': ['tacker/vnfm/plugin.py', 'tacker/tests/unit/vnfm/infra_drivers/openstack/test_openstack_driver.py', 'tacker/tests/unit/vnfm/infra_drivers/openstack/fixture_data/fixture_data_utils.py', 'tacker/vnfm/mgmt_drivers/constants.py', 'tacker/vnfm/mgmt_drivers/abstract_driver.py', 'tacker/vnfm/infra_drivers/openstack/openstack.py', 'tacker/tests/unit/vnfm/test_plugin.py', 'tacker/vnfm/infra_drivers/abstract_driver.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/cd21566c0de3562db99d664f4dac6ca276890e26', 'message': ""when scale vnf , mgmt driver doesn't work\n\nadd checking scale cooldown window and scaling status.\n\nChange-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86\nCloses-bug: #1650426\nCloses-bug: #1777556\nCo-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>\n""}]",13,576670,cd21566c0de3562db99d664f4dac6ca276890e26,37,10,12,27181,,,0,"when scale vnf , mgmt driver doesn't work

add checking scale cooldown window and scaling status.

Change-Id: If47b8a787bba84b95c29989f8fbdc79a92dcfb86
Closes-bug: #1650426
Closes-bug: #1777556
Co-Authored-By: Hiroya Nakaya <nakaya.hr@ncos.nec.co.jp>
",git fetch https://review.opendev.org/openstack/tacker refs/changes/70/576670/10 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/vnfm/plugin.py', 'tacker/vnfm/mgmt_drivers/constants.py', 'tacker/vnfm/mgmt_drivers/abstract_driver.py', 'tacker/tests/unit/vnfm/test_plugin.py']",4,0a48ecbb26650fb4619d24f6845ce8b8f7953fa8,bug/1650426, self._device_manager.invoke.assert_called_with(, self._device_manager.invoke.assert_called_once_with(,56,2
openstack%2Fmagnum~master~I751b91feafbf54cbbf1244fa98091444424385c7,openstack/magnum,master,I751b91feafbf54cbbf1244fa98091444424385c7,Replace deprecated import of ABCs from collections,MERGED,2021-07-27 00:03:27.000000000,2021-08-02 09:11:43.000000000,2021-08-02 09:10:02.000000000,"[{'_account_id': 6484}, {'_account_id': 20498}, {'_account_id': 22348}, {'_account_id': 28022}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-07-27 00:03:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/91922f2753ccaff1a5605ef946081499dd324e0e', 'message': 'Replace deprecated import of ABCs from collections\n\nABCs in collections should be imported from collections.abc and direct\nimport from collections is deprecated since Python 3.3.\n\nChange-Id: I751b91feafbf54cbbf1244fa98091444424385c7\n'}, {'number': 2, 'created': '2021-07-27 01:52:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/060a470545570e23fc28119ff3143df658fbddfd', 'message': 'Replace deprecated import of ABCs from collections\n\nABCs in collections should be imported from collections.abc and direct\nimport from collections is deprecated since Python 3.3.\n\nChange-Id: I751b91feafbf54cbbf1244fa98091444424385c7\n'}, {'number': 3, 'created': '2021-07-27 13:40:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/f8a1715ad9fe5c701703d4be19111f93b9c3393c', 'message': 'Replace deprecated import of ABCs from collections\n\nABCs in collections should be imported from collections.abc and direct\nimport from collections is deprecated since Python 3.3.\n\nChange-Id: I751b91feafbf54cbbf1244fa98091444424385c7\n'}, {'number': 4, 'created': '2021-07-27 22:46:58.000000000', 'files': ['magnum/tests/functional/common/utils.py'], 'web_link': 'https://opendev.org/openstack/magnum/commit/1e2c3f3ae0606364e1252cf4a9d031c23396e7e9', 'message': 'Replace deprecated import of ABCs from collections\n\nABCs in collections should be imported from collections.abc and direct\nimport from collections is deprecated since Python 3.3.\n\nChange-Id: I751b91feafbf54cbbf1244fa98091444424385c7\n'}]",2,802409,1e2c3f3ae0606364e1252cf4a9d031c23396e7e9,18,5,4,9816,,,0,"Replace deprecated import of ABCs from collections

ABCs in collections should be imported from collections.abc and direct
import from collections is deprecated since Python 3.3.

Change-Id: I751b91feafbf54cbbf1244fa98091444424385c7
",git fetch https://review.opendev.org/openstack/magnum refs/changes/09/802409/1 && git format-patch -1 --stdout FETCH_HEAD,['magnum/tests/functional/common/utils.py'],1,91922f2753ccaff1a5605ef946081499dd324e0e,collections-abc,"from collections import abc if not isinstance(args, abc.Hashable):","import collections if not isinstance(args, collections.Hashable):",2,2
openstack%2Fmagnum~master~I94bd6a11ff9a6c9d5bdf704ad2268e20eaa99c86,openstack/magnum,master,I94bd6a11ff9a6c9d5bdf704ad2268e20eaa99c86,Manually mount /etc/hosts in kubelet,NEW,2021-08-02 08:18:05.000000000,2021-08-02 09:09:23.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-02 08:18:05.000000000', 'files': ['magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-minion.sh', 'magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-master.sh'], 'web_link': 'https://opendev.org/openstack/magnum/commit/a8e92e91e77e510a6786db9d5b4fbdaffa338323', 'message': 'Manually mount /etc/hosts in kubelet\n\nOn FCOS 34 podman is injecting an extra line into\n/etc/hosts in the kubelet container that the kubelet\nthen passes into hostNetwork pods, which is causing issues.\n\nPodman issue:\nhttps://github.com/containers/podman/issues/10319\n\nAt least one problem caused by this is that hostNetwork\npods get the wrong result when using `hostname --fqdn`\nas they only get ""host"" instead of ""host.example.com"".\n\nThe suggested workaround is to disable podman from\nwriting the hosts file in the container, and to\nmanually mount /etc/hosts from the host filesystem.\n\nChange-Id: I94bd6a11ff9a6c9d5bdf704ad2268e20eaa99c86\n'}]",0,803150,a8e92e91e77e510a6786db9d5b4fbdaffa338323,2,1,1,30262,,,0,"Manually mount /etc/hosts in kubelet

On FCOS 34 podman is injecting an extra line into
/etc/hosts in the kubelet container that the kubelet
then passes into hostNetwork pods, which is causing issues.

Podman issue:
https://github.com/containers/podman/issues/10319

At least one problem caused by this is that hostNetwork
pods get the wrong result when using `hostname --fqdn`
as they only get ""host"" instead of ""host.example.com"".

The suggested workaround is to disable podman from
writing the hosts file in the container, and to
manually mount /etc/hosts from the host filesystem.

Change-Id: I94bd6a11ff9a6c9d5bdf704ad2268e20eaa99c86
",git fetch https://review.opendev.org/openstack/magnum refs/changes/50/803150/1 && git format-patch -1 --stdout FETCH_HEAD,"['magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-minion.sh', 'magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-master.sh']",2,a8e92e91e77e510a6786db9d5b4fbdaffa338323,kubelet-mount-etc-hosts, --no-hosts \\ --volume /etc/hosts:/etc/hosts:ro \\,,4,0
openstack%2Fpython-manilaclient~master~I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72,openstack/python-manilaclient,master,I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72,Fix issue while creating share from snapshot,MERGED,2021-07-22 15:04:15.000000000,2021-08-02 08:36:55.000000000,2021-08-02 08:35:34.000000000,"[{'_account_id': 6413}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 33756}]","[{'number': 1, 'created': '2021-07-22 15:04:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/84ccb03c0748a054a5a23503f12cd58e1cefa19e', 'message': ""Fix issue while creating share from snapshot\n\nFixed the issue that didn't allow users to create share from\nsnapshot when the snapshot name was specified instead of the id.\n\nNow, the manila client will search for snapshots regardless if the\nname of id of the snapshot was specified.\n\nCloses-Bug: #1798229\nChange-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72\n""}, {'number': 2, 'created': '2021-07-23 17:18:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/ed777cb0e040a8d84f85b4e528cd296bf280d31f', 'message': ""Fix issue while creating share from snapshot\n\nFixed the issue that didn't allow users to create share from\nsnapshot when the snapshot name was specified instead of the id.\n\nNow, the manila client will search for snapshots regardless if the\nname of id of the snapshot was specified.\n\nCloses-Bug: #1798229\nChange-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72\n""}, {'number': 3, 'created': '2021-07-23 19:13:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/e134711f0dfc03bc5e2a667aeaa658d711429435', 'message': ""Fix issue while creating share from snapshot\n\nFixed the issue that didn't allow users to create share from\nsnapshot when the snapshot name was specified instead of the id.\n\nNow, the manila client will search for snapshots regardless if the\nname of id of the snapshot was specified.\n\nCloses-Bug: #1798229\nChange-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72\n""}, {'number': 4, 'created': '2021-07-26 14:32:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/1aebfba425f9f39d43eebc8810385dd092dbc664', 'message': ""Fix issue while creating share from snapshot\n\nFixed the issue that didn't allow users to create share from\nsnapshot when the snapshot name was specified instead of the id.\n\nNow, the manila client will search for snapshots regardless if the\nname of id of the snapshot was specified.\n\nCloses-Bug: #1798229\nChange-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72\n""}, {'number': 5, 'created': '2021-07-28 11:38:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/4a574b972067eb83dc57462234c75354a30ace0c', 'message': ""Fix issue while creating share from snapshot\n\nFixed the issue that didn't allow users to create share from\nsnapshot when the snapshot name was specified instead of the id.\n\nNow, the manila client will search for snapshots regardless if the\nname of id of the snapshot was specified.\n\nCloses-Bug: #1798229\nChange-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72\n""}, {'number': 6, 'created': '2021-07-30 19:48:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/308c32b8700466109a9b38da657a38ab6cc4339a', 'message': ""Fix issue while creating share from snapshot\n\nFixed the issue that didn't allow users to create share from\nsnapshot when the snapshot name was specified instead of the id.\n\nNow, the manila client will search for snapshots regardless if the\nname or id of the snapshot was specified.\n\nCloses-Bug: #1798229\nChange-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72\n""}, {'number': 7, 'created': '2021-07-30 20:09:36.000000000', 'files': ['manilaclient/v2/shell.py', 'releasenotes/notes/bug-1798229-fix-create-share-from-snap-using-name-44100b907ea6a040.yaml'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/616f3acf607506b8f3e7fc4a55696c36abdc4e4e', 'message': ""Fix issue while creating share from snapshot\n\nFixed the issue that didn't allow users to create share from\nsnapshot when the snapshot name was specified instead of the id.\n\nNow, the manila client will search for snapshots regardless if the\nname or id of the snapshot was specified.\n\nCloses-Bug: #1798229\nChange-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72\n""}]",6,801866,616f3acf607506b8f3e7fc4a55696c36abdc4e4e,27,5,7,33756,,,0,"Fix issue while creating share from snapshot

Fixed the issue that didn't allow users to create share from
snapshot when the snapshot name was specified instead of the id.

Now, the manila client will search for snapshots regardless if the
name or id of the snapshot was specified.

Closes-Bug: #1798229
Change-Id: I2b29b6d2ba232aa390e7c3708ee589c82e3e7e72
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/66/801866/2 && git format-patch -1 --stdout FETCH_HEAD,"['manilaclient/v2/shell.py', 'releasenotes/notes/bug-1798229-fix-create-share-from-snap-using-name-20ed376532359374.yaml']",2,84ccb03c0748a054a5a23503f12cd58e1cefa19e,bug/1798229,"--- fixes: - | Fixed the issue in which users were unable to create a share from a snapshot, specifing the snapshot's name. For more details, please refer to `launchpad bug 1798229 <https://bugs.launchpad.net/python-manilaclient/+bug/1798229>`_ ",,11,1
openstack%2Freleases~master~I6627c095ba688ee6dd771c8c035dd8397f7c3898,openstack/releases,master,I6627c095ba688ee6dd771c8c035dd8397f7c3898,Release neutron-lib 2.13.0,MERGED,2021-07-30 12:10:37.000000000,2021-08-02 08:36:25.000000000,2021-08-02 08:36:25.000000000,"[{'_account_id': 11975}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-07-30 12:10:37.000000000', 'files': ['deliverables/xena/neutron-lib.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/58ffeda07dce8d78668dde6f10bef5482e33e81a', 'message': 'Release neutron-lib 2.13.0\n\nChange-Id: I6627c095ba688ee6dd771c8c035dd8397f7c3898\n'}]",0,803005,58ffeda07dce8d78668dde6f10bef5482e33e81a,9,4,1,841,,,0,"Release neutron-lib 2.13.0

Change-Id: I6627c095ba688ee6dd771c8c035dd8397f7c3898
",git fetch https://review.opendev.org/openstack/releases refs/changes/05/803005/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/neutron-lib.yaml'],1,58ffeda07dce8d78668dde6f10bef5482e33e81a,neutron-lib-xena, - version: 2.13.0 projects: - repo: openstack/neutron-lib hash: 2b46c1f74cbf076fca1a100a978a3a8a23d0338c,,4,0
openstack%2Frpm-packaging~master~I9c1684bf28625c824adc3056a70a2361c432be6c,openstack/rpm-packaging,master,I9c1684bf28625c824adc3056a70a2361c432be6c,Add pycdlib requirement,MERGED,2021-07-19 10:35:40.000000000,2021-08-02 08:35:27.000000000,2021-08-02 08:35:27.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-19 10:35:40.000000000', 'files': ['openstack/ironic/ironic.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/ae5658e3d87d392f7155b264b33a47902e2e73fc', 'message': 'Add pycdlib requirement\n\nChange-Id: I9c1684bf28625c824adc3056a70a2361c432be6c\n'}]",0,801283,ae5658e3d87d392f7155b264b33a47902e2e73fc,10,5,1,23851,,,0,"Add pycdlib requirement

Change-Id: I9c1684bf28625c824adc3056a70a2361c432be6c
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/83/801283/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/ironic/ironic.spec.j2'],1,ae5658e3d87d392f7155b264b33a47902e2e73fc,add-pycdlib,BuildRequires: {{ py3('pycdlib') }}Requires: {{ py3('pycdlib') }},,2,0
openstack%2Fovsdbapp~stable%2Fvictoria~I8a57c73f20a299b811ee31b55d40a76de9deb1cd,openstack/ovsdbapp,stable/victoria,I8a57c73f20a299b811ee31b55d40a76de9deb1cd,Actually close the connection in Connection.stop(),MERGED,2021-06-11 19:39:37.000000000,2021-08-02 07:57:36.000000000,2021-08-02 07:56:09.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-11 19:39:37.000000000', 'files': ['ovsdbapp/backend/ovs_idl/connection.py'], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/8c3896a5ddd529079429d64d49d07889c5047509', 'message': 'Actually close the connection in Connection.stop()\n\nAlthough we were stopping the connection thread, we never actually\nclose the Idl\'s connection to ovsdb-server. This is especially\nnoticeable in neutron\'s ""short-lived"" connections for ensuring the\ncreation of the pg_drop Port_Group which happen pre-fork and so\nthe sockets are getting cloned after the fork since they are still\nopen.\n\nCloses-Bug: #1929119\nChange-Id: I8a57c73f20a299b811ee31b55d40a76de9deb1cd\n(cherry picked from commit cde7c1f7d4e39d2f02c689037a3d373fb67fd278)\n'}]",0,796073,8c3896a5ddd529079429d64d49d07889c5047509,9,4,1,5756,,,0,"Actually close the connection in Connection.stop()

Although we were stopping the connection thread, we never actually
close the Idl's connection to ovsdb-server. This is especially
noticeable in neutron's ""short-lived"" connections for ensuring the
creation of the pg_drop Port_Group which happen pre-fork and so
the sockets are getting cloned after the fork since they are still
open.

Closes-Bug: #1929119
Change-Id: I8a57c73f20a299b811ee31b55d40a76de9deb1cd
(cherry picked from commit cde7c1f7d4e39d2f02c689037a3d373fb67fd278)
",git fetch https://review.opendev.org/openstack/ovsdbapp refs/changes/73/796073/1 && git format-patch -1 --stdout FETCH_HEAD,['ovsdbapp/backend/ovs_idl/connection.py'],1,8c3896a5ddd529079429d64d49d07889c5047509,bug/1929119-stable/victoria, if not self.idl.has_ever_connected() or self.is_running is False: if self.is_running is False: # stop() was called self.idl.force_reconnect() self.idl.close(), if not self.idl.has_ever_connected():,4,1
openstack%2Fovsdbapp~stable%2Fwallaby~I8a57c73f20a299b811ee31b55d40a76de9deb1cd,openstack/ovsdbapp,stable/wallaby,I8a57c73f20a299b811ee31b55d40a76de9deb1cd,Actually close the connection in Connection.stop(),MERGED,2021-06-11 19:39:13.000000000,2021-08-02 07:57:35.000000000,2021-08-02 07:56:07.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-11 19:39:13.000000000', 'files': ['ovsdbapp/backend/ovs_idl/connection.py'], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/83042517857c0b00aea572fa8d224416692a2213', 'message': 'Actually close the connection in Connection.stop()\n\nAlthough we were stopping the connection thread, we never actually\nclose the Idl\'s connection to ovsdb-server. This is especially\nnoticeable in neutron\'s ""short-lived"" connections for ensuring the\ncreation of the pg_drop Port_Group which happen pre-fork and so\nthe sockets are getting cloned after the fork since they are still\nopen.\n\nCloses-Bug: #1929119\nChange-Id: I8a57c73f20a299b811ee31b55d40a76de9deb1cd\n(cherry picked from commit cde7c1f7d4e39d2f02c689037a3d373fb67fd278)\n'}]",0,795892,83042517857c0b00aea572fa8d224416692a2213,9,4,1,5756,,,0,"Actually close the connection in Connection.stop()

Although we were stopping the connection thread, we never actually
close the Idl's connection to ovsdb-server. This is especially
noticeable in neutron's ""short-lived"" connections for ensuring the
creation of the pg_drop Port_Group which happen pre-fork and so
the sockets are getting cloned after the fork since they are still
open.

Closes-Bug: #1929119
Change-Id: I8a57c73f20a299b811ee31b55d40a76de9deb1cd
(cherry picked from commit cde7c1f7d4e39d2f02c689037a3d373fb67fd278)
",git fetch https://review.opendev.org/openstack/ovsdbapp refs/changes/92/795892/1 && git format-patch -1 --stdout FETCH_HEAD,['ovsdbapp/backend/ovs_idl/connection.py'],1,83042517857c0b00aea572fa8d224416692a2213,bug/1929119-stable/wallaby, if not self.idl.has_ever_connected() or self.is_running is False: if self.is_running is False: # stop() was called self.idl.force_reconnect() self.idl.close(), if not self.idl.has_ever_connected():,4,1
openstack%2Fovsdbapp~stable%2Fussuri~I8a57c73f20a299b811ee31b55d40a76de9deb1cd,openstack/ovsdbapp,stable/ussuri,I8a57c73f20a299b811ee31b55d40a76de9deb1cd,Actually close the connection in Connection.stop(),MERGED,2021-06-11 19:39:55.000000000,2021-08-02 07:57:28.000000000,2021-08-02 07:56:11.000000000,"[{'_account_id': 841}, {'_account_id': 1131}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-11 19:39:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/f127d066dc1f8d16201c848ac5c7a993943001b5', 'message': 'Actually close the connection in Connection.stop()\n\nAlthough we were stopping the connection thread, we never actually\nclose the Idl\'s connection to ovsdb-server. This is especially\nnoticeable in neutron\'s ""short-lived"" connections for ensuring the\ncreation of the pg_drop Port_Group which happen pre-fork and so\nthe sockets are getting cloned after the fork since they are still\nopen.\n\nCloses-Bug: #1929119\nChange-Id: I8a57c73f20a299b811ee31b55d40a76de9deb1cd\n(cherry picked from commit cde7c1f7d4e39d2f02c689037a3d373fb67fd278)\n'}, {'number': 2, 'created': '2021-07-22 15:14:38.000000000', 'files': ['ovsdbapp/backend/ovs_idl/connection.py'], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/7e400f117f5269930fe11caff153a4966dbf614c', 'message': 'Actually close the connection in Connection.stop()\n\nAlthough we were stopping the connection thread, we never actually\nclose the Idl\'s connection to ovsdb-server. This is especially\nnoticeable in neutron\'s ""short-lived"" connections for ensuring the\ncreation of the pg_drop Port_Group which happen pre-fork and so\nthe sockets are getting cloned after the fork since they are still\nopen.\n\nCloses-Bug: #1929119\nChange-Id: I8a57c73f20a299b811ee31b55d40a76de9deb1cd\n(cherry picked from commit cde7c1f7d4e39d2f02c689037a3d373fb67fd278)\n'}]",0,796074,7e400f117f5269930fe11caff153a4966dbf614c,13,6,2,5756,,,0,"Actually close the connection in Connection.stop()

Although we were stopping the connection thread, we never actually
close the Idl's connection to ovsdb-server. This is especially
noticeable in neutron's ""short-lived"" connections for ensuring the
creation of the pg_drop Port_Group which happen pre-fork and so
the sockets are getting cloned after the fork since they are still
open.

Closes-Bug: #1929119
Change-Id: I8a57c73f20a299b811ee31b55d40a76de9deb1cd
(cherry picked from commit cde7c1f7d4e39d2f02c689037a3d373fb67fd278)
",git fetch https://review.opendev.org/openstack/ovsdbapp refs/changes/74/796074/2 && git format-patch -1 --stdout FETCH_HEAD,['ovsdbapp/backend/ovs_idl/connection.py'],1,f127d066dc1f8d16201c848ac5c7a993943001b5,bug/1929119-stable/ussuri, if not self.idl.has_ever_connected() or self.is_running is False: if self.is_running is False: # stop() was called self.idl.force_reconnect() self.idl.close(), if not self.idl.has_ever_connected():,4,1
openstack%2Fpython-mistralclient~master~I8f261854dc159098bbaec3fe84768a0372127a57,openstack/python-mistralclient,master,I8f261854dc159098bbaec3fe84768a0372127a57,Added filtering to the content that can read for wf creation,ABANDONED,2021-07-07 13:54:43.000000000,2021-08-02 07:56:33.000000000,,"[{'_account_id': 841}, {'_account_id': 19134}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-07 13:54:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-mistralclient/commit/081a065b4fb920c51e4d8e3da0b2ae7680602266', 'message': ""Added filtering to the content that can read for wf creation\n\nWe allow for a file to with an uri or the path to a file to be\nread and that path or uri is read by mistralclient.\n\nThere is now filtering so that /etc/ /proc/ or /dev/ files that can\nbe read by the mistralclient user to be added to a workflow for\nexample\n\nThis is mostly problematic for the horizon use of mistralclient.\nFor an usual CLI use there's no priviledge escalation, but on the\ncase of horizon the priviledges used are the one running horizon.\n\nChange-Id: I8f261854dc159098bbaec3fe84768a0372127a57\ncloses-bug: 1931558\n""}, {'number': 2, 'created': '2021-07-07 16:57:03.000000000', 'files': ['mistralclient/tests/unit/v2/test_actions.py', 'mistralclient/utils.py', 'releasenotes/notes/filtering_of_uris-32676f6634bfe04b.yaml'], 'web_link': 'https://opendev.org/openstack/python-mistralclient/commit/0b4bf6edb5cc9296b9d7b53a9e8ced18c9ef1295', 'message': ""Added filtering to the content that can read for wf creation\n\nWe allow for a file to with an uri or the path to a file to be\nread and that path or uri is read by mistralclient.\n\nThere is now filtering so that /etc/ /proc/ or /dev/ files that can\nbe read by the mistralclient user to be added to a workflow for\nexample\n\nThis is mostly problematic for the horizon use of mistralclient.\nFor an usual CLI use there's no priviledge escalation, but on the\ncase of horizon the priviledges used are the one running horizon.\n\nChange-Id: I8f261854dc159098bbaec3fe84768a0372127a57\ncloses-bug: 1931558\n""}]",5,799835,0b4bf6edb5cc9296b9d7b53a9e8ced18c9ef1295,10,3,2,15895,,,0,"Added filtering to the content that can read for wf creation

We allow for a file to with an uri or the path to a file to be
read and that path or uri is read by mistralclient.

There is now filtering so that /etc/ /proc/ or /dev/ files that can
be read by the mistralclient user to be added to a workflow for
example

This is mostly problematic for the horizon use of mistralclient.
For an usual CLI use there's no priviledge escalation, but on the
case of horizon the priviledges used are the one running horizon.

Change-Id: I8f261854dc159098bbaec3fe84768a0372127a57
closes-bug: 1931558
",git fetch https://review.opendev.org/openstack/python-mistralclient refs/changes/35/799835/2 && git format-patch -1 --stdout FETCH_HEAD,"['mistralclient/tests/unit/v2/test_actions.py', 'mistralclient/utils.py', 'releasenotes/notes/filtering_of_uris-32676f6634bfe04b.yaml']",3,081a065b4fb920c51e4d8e3da0b2ae7680602266,bug/1931558,--- security: - | Previously a file could be created with an uri or path and on workflow creation that path or resource would be read and used for the workflow. There's now a filter on what paths are acceptable for that with the removal of /etc/ /proc/ and /dev/ paths ,,44,0
openstack%2Frenderspec~master~I07eb319eb3332b80f05b05dd963c640b29afde55,openstack/renderspec,master,I07eb319eb3332b80f05b05dd963c640b29afde55,Switch to OFTC,MERGED,2021-06-07 08:31:32.000000000,2021-08-02 07:45:08.000000000,2021-08-02 07:43:51.000000000,"[{'_account_id': 8556}, {'_account_id': 13294}, {'_account_id': 22348}, {'_account_id': 26285}]","[{'number': 1, 'created': '2021-06-07 08:31:32.000000000', 'files': ['README.rst'], 'web_link': 'https://opendev.org/openstack/renderspec/commit/48b7cd0dc667205fc62ef1bc5399de81bb599f64', 'message': 'Switch to OFTC\n\nChange-Id: I07eb319eb3332b80f05b05dd963c640b29afde55\n'}]",0,795063,48b7cd0dc667205fc62ef1bc5399de81bb599f64,11,4,1,6593,,,0,"Switch to OFTC

Change-Id: I07eb319eb3332b80f05b05dd963c640b29afde55
",git fetch https://review.opendev.org/openstack/renderspec refs/changes/63/795063/1 && git format-patch -1 --stdout FETCH_HEAD,['README.rst'],1,48b7cd0dc667205fc62ef1bc5399de81bb599f64,oftc, https://webchat.oftc.net/?channels=openstack-rpm-packaging, http://webchat.freenode.net/?channels=openstack-rpm-packaging,1,1
openstack%2Fpymod2pkg~master~I36807a8267fd33be737da084712ac31ce135d49c,openstack/pymod2pkg,master,I36807a8267fd33be737da084712ac31ce135d49c,Moving IRC network reference to OFTC,MERGED,2021-07-08 13:29:32.000000000,2021-08-02 07:44:51.000000000,2021-08-02 07:43:37.000000000,"[{'_account_id': 7102}, {'_account_id': 7198}, {'_account_id': 13294}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 29313}, {'_account_id': 32238}]","[{'number': 1, 'created': '2021-07-08 13:29:32.000000000', 'files': ['README.rst'], 'web_link': 'https://opendev.org/openstack/pymod2pkg/commit/f68c89bc7eeb9f9a05a0e8022e21bb4e9f7d3c4b', 'message': 'Moving IRC network reference to OFTC\n\nChange-Id: I36807a8267fd33be737da084712ac31ce135d49c\n'}]",0,800053,f68c89bc7eeb9f9a05a0e8022e21bb4e9f7d3c4b,13,7,1,8556,,,0,"Moving IRC network reference to OFTC

Change-Id: I36807a8267fd33be737da084712ac31ce135d49c
",git fetch https://review.opendev.org/openstack/pymod2pkg refs/changes/53/800053/1 && git format-patch -1 --stdout FETCH_HEAD,['README.rst'],1,f68c89bc7eeb9f9a05a0e8022e21bb4e9f7d3c4b,oftc, http://webchat.oftc.net/?channels=openstack-rpm-packaging, http://webchat.freenode.net/?channels=openstack-rpm-packaging,1,1
openstack%2Fopenstack-tempest-skiplist~master~I2d75d3c7e33a0f1ec6a1c1578326c3564d490929,openstack/openstack-tempest-skiplist,master,I2d75d3c7e33a0f1ec6a1c1578326c3564d490929,"Revert ""Skipping all tempest.api.object_storage for periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master""",ABANDONED,2021-07-06 10:31:38.000000000,2021-08-02 07:40:23.000000000,,"[{'_account_id': 8367}, {'_account_id': 9592}, {'_account_id': 22348}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-07-06 10:31:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/ce080af1b27341a404e881ffcebe3bbbbb1a59dc', 'message': 'Revert ""Skipping all tempest.api.object_storage for periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master""\n\nThis reverts commit e35e535a249e9f075268c7f03c96b9546aeb979e.\n\nReason for revert: Debugging\n\nChange-Id: I2d75d3c7e33a0f1ec6a1c1578326c3564d490929\n'}, {'number': 2, 'created': '2021-07-06 10:45:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/40a78893416627522609b118ae1e368776ae1a28', 'message': 'Revert ""Skipping all tempest.api.object_storage for periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master""\n\nThis reverts commit e35e535a249e9f075268c7f03c96b9546aeb979e.\n\nReason for revert: Debugging\n\nChange-Id: I2d75d3c7e33a0f1ec6a1c1578326c3564d490929\n'}, {'number': 3, 'created': '2021-07-06 10:46:17.000000000', 'files': ['roles/validate-tempest/vars/tempest_skip.yml'], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/9a1238bb5968ab22a80064cf5df5d8f8e6367638', 'message': 'Revert ""Skipping all tempest.api.object_storage for periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master""\n\nThis reverts commit e35e535a249e9f075268c7f03c96b9546aeb979e.\n\nReason for revert: Debugging\n\nChange-Id: I2d75d3c7e33a0f1ec6a1c1578326c3564d490929\n'}]",0,799582,9a1238bb5968ab22a80064cf5df5d8f8e6367638,6,4,3,12393,,,0,"Revert ""Skipping all tempest.api.object_storage for periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master""

This reverts commit e35e535a249e9f075268c7f03c96b9546aeb979e.

Reason for revert: Debugging

Change-Id: I2d75d3c7e33a0f1ec6a1c1578326c3564d490929
",git fetch https://review.opendev.org/openstack/openstack-tempest-skiplist refs/changes/82/799582/3 && git format-patch -1 --stdout FETCH_HEAD,['roles/validate-tempest/vars/tempest_skip.yml'],1,ce080af1b27341a404e881ffcebe3bbbbb1a59dc,799582,, - test: tempest.api.object_storage deployment: - overcloud releases: - name: master reason: There was a conflict when trying to complete your request lp: https://bugs.launchpad.net/tripleo/+bug/1933639 jobs: - periodic-tripleo-ci-centos-8-ovb-3ctlr_1comp-featureset001-master,0,9
openstack%2Fhorizon~master~Ia33aaf7019d73f96c27e75ee24d80dcbf3e8ceb2,openstack/horizon,master,Ia33aaf7019d73f96c27e75ee24d80dcbf3e8ceb2,Added a condition to check whether value is in present in choices for ThemableSelectWidget.,MERGED,2021-05-19 15:07:14.000000000,2021-08-02 07:28:20.000000000,2021-08-02 07:26:40.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 6914}, {'_account_id': 8648}, {'_account_id': 16137}, {'_account_id': 22348}, {'_account_id': 29313}, {'_account_id': 32834}]","[{'number': 1, 'created': '2021-05-19 15:07:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/4186d5cdad5903b6624bcadf07193d301919df4d', 'message': 'Added a condition to check whether value is in present in choices for ThemableSelectWidget.\n\nSometimes value is populated with uuid of resources but that resource is not present in openstack,\nSo it is good to change initial_value with one of the values from choices.\n\nChange-Id: Ia33aaf7019d73f96c27e75ee24d80dcbf3e8ceb2\n'}, {'number': 2, 'created': '2021-05-19 15:11:21.000000000', 'files': ['horizon/forms/fields.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/cb8ff870904e775f30ae55c47f5ce8bf9027b1ed', 'message': 'Added a condition to check whether value is in present in choices for ThemableSelectWidget.\n\nSometimes value is populated with uuid of resources but that resource is not present in openstack,\nSo it is good to change initial_value with one of the values from choices.\n\nCloses-Bug: #1928953\nChange-Id: Ia33aaf7019d73f96c27e75ee24d80dcbf3e8ceb2\n'}]",0,792187,cb8ff870904e775f30ae55c47f5ce8bf9027b1ed,16,8,2,33128,,,0,"Added a condition to check whether value is in present in choices for ThemableSelectWidget.

Sometimes value is populated with uuid of resources but that resource is not present in openstack,
So it is good to change initial_value with one of the values from choices.

Closes-Bug: #1928953
Change-Id: Ia33aaf7019d73f96c27e75ee24d80dcbf3e8ceb2
",git fetch https://review.opendev.org/openstack/horizon refs/changes/87/792187/2 && git format-patch -1 --stdout FETCH_HEAD,['horizon/forms/fields.py'],1,4186d5cdad5903b6624bcadf07193d301919df4d,initial_value_fix, # Initially assuming value is not present in choices. value_in_choices = False # and setting value in choices to True value_in_choices = True # if value is None or it is not present in choices then set # the first value of choices. if (value is None or not value_in_choices) and new_choices:, if value is None and new_choices:,7,1
openstack%2Fcinder~master~I490e838f70f1e1da8a5ee59951601eebe73b3f49,openstack/cinder,master,I490e838f70f1e1da8a5ee59951601eebe73b3f49,FIX BUG: https://bugs.launchpad.net/cinder/+bug/1567263,NEW,2021-07-28 02:58:04.000000000,2021-08-02 07:20:16.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-28 02:58:04.000000000', 'files': ['cinder/backup/api.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/7da0f143363aaca4dd17ab3b94cfa9f96a0d9721', 'message': 'FIX BUG:\nhttps://bugs.launchpad.net/cinder/+bug/1567263\n\nChange-Id: I490e838f70f1e1da8a5ee59951601eebe73b3f49\n'}]",2,802648,7da0f143363aaca4dd17ab3b94cfa9f96a0d9721,19,1,1,33412,,,0,"FIX BUG:
https://bugs.launchpad.net/cinder/+bug/1567263

Change-Id: I490e838f70f1e1da8a5ee59951601eebe73b3f49
",git fetch https://review.opendev.org/openstack/cinder refs/changes/48/802648/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/backup/api.py'],1,7da0f143363aaca4dd17ab3b94cfa9f96a0d9721,dev-yangyang," encrypted_volume_type = None if backup['encryption_key_id']: volume = self.volume_api.get(context, backup['volume_id']) encrypted_volume_type = volume['volume_type'] volume = self.volume_api.create(context, size, name, description , None, None, encrypted_volume_type)"," volume = self.volume_api.create(context, size, name, description)",6,1
openstack%2Fvalidations-common~master~I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64,openstack/validations-common,master,I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64,Common submodule functions moved into separate file.,ABANDONED,2021-03-17 12:43:43.000000000,2021-08-02 07:07:37.000000000,,"[{'_account_id': 11491}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}]","[{'number': 1, 'created': '2021-03-17 12:43:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/5da11a8e13131a0ad8a99b226e031263a1a39235', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}, {'number': 2, 'created': '2021-03-17 13:26:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/320f37c7d890c1f0b7b18ad41a27499900da8e6c', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}, {'number': 3, 'created': '2021-06-07 10:49:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/6bf7ff36a60a5006750930264747ab999ebb82b7', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}, {'number': 4, 'created': '2021-06-07 11:18:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/7de5baba27bb85402d775ea096d31fcba84f6a38', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}, {'number': 5, 'created': '2021-06-09 06:46:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/ef47f148133403b112b288134b3618c743b849e8', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}, {'number': 6, 'created': '2021-06-09 06:52:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/1b0aaac983d829429bca1fb676a368b0faf70998', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}, {'number': 7, 'created': '2021-06-11 07:16:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/67cd624d83d9acedc750645c0a88789150782dac', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}, {'number': 8, 'created': '2021-06-11 11:00:00.000000000', 'files': ['validations_common/callback_plugins/validation_stdout.py', 'validations_common/callback_plugins/validation_output.py', 'validations_common/tests/callback_plugins/test_validation_output.py', 'validations_common/callback_plugins/http_json.py', 'validations_common/callback_utils.py', 'validations_common/tests/callback_plugins/test_validation_json.py', 'validations_common/callback_plugins/validation_json.py'], 'web_link': 'https://opendev.org/openstack/validations-common/commit/c2abc6b3df7af17f672b2d5489ddfcb8064a8dc5', 'message': 'Common submodule functions moved into separate file.\n\nFunctions used in multiple callbacks were factored out,\nin order to improve readability and minimize redundancy.\n\nAdditional callback helper functions might be moved\nat a later point, or remade as methods of their callbacks.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64\n'}]",4,781089,c2abc6b3df7af17f672b2d5489ddfcb8064a8dc5,21,4,8,32926,,,0,"Common submodule functions moved into separate file.

Functions used in multiple callbacks were factored out,
in order to improve readability and minimize redundancy.

Additional callback helper functions might be moved
at a later point, or remade as methods of their callbacks.

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I92e906f8ced5d0bdffedccaf7c45a7ce01e10c64
",git fetch https://review.opendev.org/openstack/validations-common refs/changes/89/781089/8 && git format-patch -1 --stdout FETCH_HEAD,"['validations_common/callback_plugins/validation_stdout.py', 'validations_common/callback_plugins/validation_output.py', 'validations_common/callback_plugins/callback_utils.py', 'validations_common/callback_plugins/http_json.py', 'validations_common/callback_plugins/validation_json.py']",5,5da11a8e13131a0ad8a99b226e031263a1a39235,callbacks/refactor,from validations_common.callback_plugins import callback_utils self.current_time = callback_utils.current_time() 'start': callback_utils.current_time() 'start': callback_utils.current_time() end_time = callback_utils.current_time() time_elapsed = callback_utils.secondsToStr(time.time() - self.t0),"import datetimedef current_time(): return '%sZ' % datetime.datetime.utcnow().isoformat() def secondsToStr(t): def rediv(ll, b): return list(divmod(ll[0], b)) + ll[1:] return ""%d:%02d:%02d.%03d"" % tuple( reduce(rediv, [[ t * 1000, ], 1000, 60, 60])) self.current_time = current_time() 'start': current_time() 'start': current_time() end_time = current_time() time_elapsed = secondsToStr(time.time() - self.t0)",79,75
openstack%2Fvalidations-common~master~I198f3062fefb5d00fc25adcca9d08d188b1fe45e,openstack/validations-common,master,I198f3062fefb5d00fc25adcca9d08d188b1fe45e,v2_playbook_on_stats refactored unit tests included,ABANDONED,2021-03-12 15:16:09.000000000,2021-08-02 07:07:29.000000000,,"[{'_account_id': 8449}, {'_account_id': 11491}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-03-12 15:16:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/4970b59595cfd062cc6db16edd3307067990133d', 'message': 'v2_playbook_on_stats refactored unit tests included\n\nRefactors v2_playbook_on_stats to more gracefully handle\nIO issues. Factors out writing to the file into separate\nmethod, to simplify maintenance/diagnosis.\n\nProvides new tests for both methods, partial overlap\nwith submitted but unmerged test code is possible.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I198f3062fefb5d00fc25adcca9d08d188b1fe45e\n'}, {'number': 2, 'created': '2021-03-15 10:29:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/b38f5076422318694b22772d1bd66849ff528a81', 'message': 'v2_playbook_on_stats refactored unit tests included\n\nRefactors v2_playbook_on_stats to more gracefully handle\nIO issues. Factors out writing to the file into separate\nmethod, to simplify maintenance/diagnosis.\n\nProvides new tests for both methods, partial overlap\nwith submitted but unmerged test code is possible.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I198f3062fefb5d00fc25adcca9d08d188b1fe45e\n'}, {'number': 3, 'created': '2021-04-20 06:35:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-common/commit/facdb22adc0d2712902ce3956fd3f92814637fff', 'message': 'v2_playbook_on_stats refactored unit tests included\n\nRefactors v2_playbook_on_stats to more gracefully handle\nIO issues. Factors out writing to the file into separate\nmethod, to simplify maintenance/diagnosis.\n\nProvides new tests for both methods, partial overlap\nwith submitted but unmerged test code is possible.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I198f3062fefb5d00fc25adcca9d08d188b1fe45e\n'}, {'number': 4, 'created': '2021-04-20 07:17:55.000000000', 'files': ['validations_common/tests/callback_plugins/test_validation_json.py', 'validations_common/callback_plugins/validation_json.py'], 'web_link': 'https://opendev.org/openstack/validations-common/commit/8a55e6ed1881b8cd0da3bb1d63c12df047ca7ca6', 'message': 'v2_playbook_on_stats refactored unit tests included\n\nRefactors v2_playbook_on_stats to more gracefully handle\nIO issues. Factors out writing to the file into separate\nmethod, to simplify maintenance/diagnosis.\n\nProvides new tests for both methods, partial overlap\nwith submitted but unmerged test code is possible.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I198f3062fefb5d00fc25adcca9d08d188b1fe45e\n'}]",3,780276,8a55e6ed1881b8cd0da3bb1d63c12df047ca7ca6,12,7,4,32926,,,0,"v2_playbook_on_stats refactored unit tests included

Refactors v2_playbook_on_stats to more gracefully handle
IO issues. Factors out writing to the file into separate
method, to simplify maintenance/diagnosis.

Provides new tests for both methods, partial overlap
with submitted but unmerged test code is possible.

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I198f3062fefb5d00fc25adcca9d08d188b1fe45e
",git fetch https://review.opendev.org/openstack/validations-common refs/changes/76/780276/2 && git format-patch -1 --stdout FETCH_HEAD,"['validations_common/callback_plugins/validation_json.py', 'validations_common/tests/callback_plugins/test_validation_json.py']",2,4970b59595cfd062cc6db16edd3307067990133d,jsoncallback/logpathrefactor,"from validations_common.callback_plugins import validation_json @mock.patch( 'validations_common.callback_plugins.validation_json.os.getcwd', return_value='/foo/log') @mock.patch( 'validations_common.callback_plugins.validation_json.CallbackModule._write_validations_log', side_effect=[IOError, None]) def test_v2_playbook_on_stats_IOError(self, mock_write, mock_cwd): """"""Test how v2_playbook_on_stats method of the CallbackModule handles IOError on write. """""" plays = [{'play': {'id': 'foobar'}}] output = { 'plays': plays, 'stats': {'foo': 'host_summary'}, 'validation_output': [] } mock_stats = mock.MagicMock() mock_stats.processed = {'foo': 'bar'} mock_stats.summarize = mock.MagicMock(return_value='host_summary') module = validation_json.CallbackModule() module.env['playbook_name'] = 'fizz' module.results = plays expected_calls = [ mock.call('/var/log/validations', output, 'foobar'), mock.call('/foo/log', output, 'foobar') ] module.v2_playbook_on_stats(mock_stats) mock_write.assert_has_calls(expected_calls) @mock.patch( 'validations_common.callback_plugins.validation_json.os.getcwd', return_value='/foo/log') @mock.patch( 'validations_common.callback_plugins.validation_json.CallbackModule._write_validations_log', return_value=None) def test_v2_playbook_on_stats_no_IOError(self, mock_write, mock_cwd): """"""Test how v2_playbook_on_stats method of the CallbackModule works if it doesn't encounter IOError. """""" plays = [{'play': {'id': 'foobar'}}] output = { 'plays': plays, 'stats': {'foo': 'host_summary'}, 'validation_output': [] } mock_stats = mock.MagicMock() mock_stats.processed = {'foo': 'bar'} mock_stats.summarize = mock.MagicMock(return_value='host_summary') module = validation_json.CallbackModule() module.env['playbook_name'] = 'fizz' module.results = plays module.v2_playbook_on_stats(mock_stats) mock_write.assert_called_once_with('/var/log/validations', output, 'foobar') @mock.patch( 'validations_common.callback_plugins.validation_json.open') def test_write_validations_log_no_IOError(self, mock_open): log_path = '/var/log/validations/foobar_fizzbuzz_9999-1-1.json' plays = [{'play': {'id': 'foobar'}}] output = { 'plays': plays, 'stats': {'foo': 'host_summary'}, 'validation_output': [] } module = validation_json.CallbackModule() module.env['playbook_name'] = 'fizzbuzz' module.current_time = '9999-1-1' module._write_validations_log('/var/log/validations', output, 'foobar') mock_open.assert_called_once_with(log_path, 'w')",,120,14
openstack%2Ftripleo-ansible~stable%2Fwallaby~Ib6140c8991469c950fd7e1b323c614103394e3f1,openstack/tripleo-ansible,stable/wallaby,Ib6140c8991469c950fd7e1b323c614103394e3f1,tripleo-kernel: prevent reboot when TSX flag was added,MERGED,2021-07-30 13:39:48.000000000,2021-08-02 05:46:19.000000000,2021-08-02 05:46:19.000000000,"[{'_account_id': 6816}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8833}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 13:39:48.000000000', 'files': ['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c647167f9d344b12022bce1677d4ef89930d6830', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)\n""}]",0,803019,c647167f9d344b12022bce1677d4ef89930d6830,8,11,1,27419,,,0,"tripleo-kernel: prevent reboot when TSX flag was added

During the 16.2 upgrade path, we enforce the inclusion of tsx flag by
operators. If there was already kernelargs present, the node won't get
rebooted, but if it's a new KernelArgs, the node will get rebooted as
per the related bug.

We want to prevent the unexpected reboot of nodes with workload when
the TSX flag was added.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1975240
Change-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1
(cherry picked from commit a15e92511049e21c8bc76bf2fffa5bf6adb3b183)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/19/803019/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'],1,c647167f9d344b12022bce1677d4ef89930d6830,,"- name: TSX KernelArgs compute node reboot prevention when: - '""nova_libvirt"" in groups' block: - name: Check if node has a nova.conf stat: path: /var/lib/config-data/puppet-generated/nova_libvirt/etc/nova/nova.conf register: nova_conf_check - name: Enabling defer_reboot when TSX was added or appended when: - nova_conf_check.stat.exists - tripleo_kernel_args is regex(""^[\s]*tsx=[^\s]+[\s]*$"") block: - name: Warn operator about workload protection debug: msg: | Automated reboot for this node has been defered because it is already provisionned. Please schedule a manual reboot after this deployment is completed. - name: Setting defer reboot fact set_fact: tripleo_kernel_defer_reboot: true ",,24,0
openstack%2Fglance~stable%2Fussuri~Ib80e9cfb58680f9e8ead5993dc206f4da882dd09,openstack/glance,stable/ussuri,Ib80e9cfb58680f9e8ead5993dc206f4da882dd09,Add housekeeping module and staging cleaner,MERGED,2021-04-09 02:07:39.000000000,2021-08-02 05:46:03.000000000,2021-08-02 05:44:46.000000000,"[{'_account_id': 4393}, {'_account_id': 9303}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-09 02:07:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/dbe7c30381ee064436ac0ba7d6368db0e6352dca', 'message': 'Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 2, 'created': '2021-07-26 00:16:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/ff780791214bb76125e59f2f65c47f0096d9075d', 'message': 'Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 3, 'created': '2021-07-26 13:53:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/5e4bdfdce57711f8cff42b3de5aec694caea98cf', 'message': 'Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 4, 'created': '2021-07-26 13:54:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/7b0f0c1fb02b0a342aa381820447de6d3f1838e9', 'message': 'Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 5, 'created': '2021-07-26 14:11:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/0ed8336397f66907c3390a91fa4323859ea6c62d', 'message': 'Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 6, 'created': '2021-07-30 08:52:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/96eba1f80e51b9d8c215bccf2fd6a49841c40f70', 'message': 'DNM - Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 7, 'created': '2021-07-30 09:00:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/bb278acdda7770d5f6bf5aec90d5fee8b8babda6', 'message': 'DNM - Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 8, 'created': '2021-07-30 09:06:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/377cc574fcd1f49621c408576b9266a24624b259', 'message': 'DNM - Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 9, 'created': '2021-07-30 09:07:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/30a38f49092e4b747b1720f95b3e65b92dc870f1', 'message': 'DNM - Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}, {'number': 10, 'created': '2021-07-30 09:15:11.000000000', 'files': ['glance/common/wsgi.py', 'glance/housekeeping.py', 'glance/tests/functional/test_wsgi.py', 'glance/common/wsgi_app.py', 'glance/tests/unit/test_housekeeping.py'], 'web_link': 'https://opendev.org/openstack/glance/commit/e87d3fbbe5e0bd404337a0e82b496edc30370e63', 'message': 'Add housekeeping module and staging cleaner\n\nAs noted in previous discussions, glance should clean its staging\ndirectory on startup. This is important for scenarios where we\nstarted an import operation, but failed in the middle. If, when we\nrecover, the image has already been deleted from the database, then\nwe will never remove the (potentially very large) residue from disk\nin our staging directory.\n\nThis is currently a problem with web-download, but will also occur\nwith glance-direct once we have the non-shared distributed import\nfunctionality merged.\n\nConflicts:\n\tglance/tests/unit/common/test_wsgi_app.py: Does not exist\n\nCloses-Bug: #1913625\nChange-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09\n(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)\n(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)\n'}]",4,785552,e87d3fbbe5e0bd404337a0e82b496edc30370e63,36,3,10,8122,,,0,"Add housekeeping module and staging cleaner

As noted in previous discussions, glance should clean its staging
directory on startup. This is important for scenarios where we
started an import operation, but failed in the middle. If, when we
recover, the image has already been deleted from the database, then
we will never remove the (potentially very large) residue from disk
in our staging directory.

This is currently a problem with web-download, but will also occur
with glance-direct once we have the non-shared distributed import
functionality merged.

Conflicts:
	glance/tests/unit/common/test_wsgi_app.py: Does not exist

Closes-Bug: #1913625
Change-Id: Ib80e9cfb58680f9e8ead5993dc206f4da882dd09
(cherry picked from commit 232177e68c547a815c31a2f30b6d1f95cdb3098d)
(cherry picked from commit 94679941368d37520975e0a1dc81d27424167191)
",git fetch https://review.opendev.org/openstack/glance refs/changes/52/785552/1 && git format-patch -1 --stdout FETCH_HEAD,"['glance/common/wsgi.py', 'glance/housekeeping.py', 'glance/tests/functional/test_wsgi.py', 'glance/common/wsgi_app.py', 'glance/tests/unit/test_housekeeping.py']",5,dbe7c30381ee064436ac0ba7d6368db0e6352dca,ussuri/bug/1913625,"# Copyright 2021 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import os from unittest import mock import glance_store from oslo_config import cfg from oslo_utils.fixture import uuidsentinel as uuids from glance.common import exception from glance import context from glance import housekeeping import glance.tests.unit.utils as unit_test_utils import glance.tests.utils as test_utils CONF = cfg.CONF class TestStagingStoreHousekeeping(test_utils.BaseTestCase): def _store_dir(self, store): return os.path.join(self.test_dir, store) def setUp(self): super(TestStagingStoreHousekeeping, self).setUp() self.config(enabled_backends={'store1': 'file'}) glance_store.register_store_opts( CONF, reserved_stores={'os_glance_staging_store': 'file'}) self.config(default_backend='store1', group='glance_store') self.config(filesystem_store_datadir=self._store_dir('store1'), group='store1') self.config(filesystem_store_datadir=self._store_dir('staging'), group='os_glance_staging_store') glance_store.create_multi_stores( CONF, reserved_stores={'os_glance_staging_store': 'file'}) self.db = unit_test_utils.FakeDB(initialize=False) self.cleaner = housekeeping.StagingStoreCleaner(self.db) self.context = context.get_admin_context() def test_get_staging_path(self): expected = os.path.join(self.test_dir, 'staging') self.assertEqual(expected, housekeeping.staging_store_path()) def test_get_staging_path_single_store(self): self.config(enabled_backends={}) expected = '/tmp/staging/' self.assertEqual(expected, housekeeping.staging_store_path()) @mock.patch('glance.common.store_utils.get_dir_separator') def test_assert_staging_scheme(self, mock_get_dir_separator): # NOTE(danms): This cannot happen now, but since we need to be # opinionated about the fact that the URL is a file path, better # to check for it, in case it changes in the future. mock_get_dir_separator.return_value = ('/', 'http://foo') self.assertRaises(exception.GlanceException, lambda: housekeeping.staging_store_path()) def test_assert_staging_scheme_on_init(self): # NOTE(danms): Make this a single-store scenario, which will cover # our assertion about node_staging_uri while we test for the # assert-on-init behavior. self.config(enabled_backends={}, node_staging_uri='http://good.luck') self.assertRaises(exception.GlanceException, housekeeping.staging_store_path) def test_get_image_id(self): self.assertEqual(uuids.some_random_uuid, self.cleaner.get_image_id(uuids.some_random_uuid)) self.assertEqual(uuids.some_random_uuid, self.cleaner.get_image_id( '%s.qcow2' % uuids.some_random_uuid)) self.assertEqual(uuids.some_random_uuid, self.cleaner.get_image_id( '%s.uc' % uuids.some_random_uuid)) self.assertEqual(uuids.some_random_uuid, self.cleaner.get_image_id( '%s.blah' % uuids.some_random_uuid)) self.assertIsNone(self.cleaner.get_image_id('foo')) self.assertIsNone(self.cleaner.get_image_id('foo.bar')) def test_is_valid_image(self): image = self.db.image_create(self.context, {'status': 'queued'}) self.assertTrue(self.cleaner.is_valid_image(image['id'])) self.assertFalse(self.cleaner.is_valid_image('foo')) def test_is_valid_image_deleted(self): image = self.db.image_create(self.context, {'status': 'queued'}) self.db.image_destroy(self.context, image['id']) self.assertFalse(self.cleaner.is_valid_image(image['id'])) @mock.patch('os.remove') def test_delete_file(self, mock_remove): self.assertTrue(self.cleaner.delete_file('foo')) os.remove.assert_called_once_with('foo') @mock.patch('os.remove') @mock.patch.object(housekeeping, 'LOG') def test_delete_file_not_found(self, mock_LOG, mock_remove): os.remove.side_effect = FileNotFoundError('foo is gone') # We should ignore a file-not-found error self.assertTrue(self.cleaner.delete_file('foo')) os.remove.assert_called_once_with('foo') mock_LOG.error.assert_not_called() @mock.patch('os.remove') @mock.patch.object(housekeeping, 'LOG') def test_delete_file_failed(self, mock_LOG, mock_remove): # Any other error should report failure and log os.remove.side_effect = Exception('insufficient plutonium') self.assertFalse(self.cleaner.delete_file('foo')) os.remove.assert_called_once_with('foo') mock_LOG.error.assert_called_once_with( 'Failed to delete stale staging path %(path)r: %(err)s', {'path': 'foo', 'err': 'insufficient plutonium'}) @mock.patch('os.listdir') @mock.patch('os.remove') @mock.patch.object(housekeeping, 'LOG') def test_clean_orphaned_staging_residue_empty(self, mock_LOG, mock_remove, mock_listdir): mock_listdir.return_value = [] self.cleaner.clean_orphaned_staging_residue() mock_listdir.assert_called_once_with(housekeeping.staging_store_path()) mock_remove.assert_not_called() mock_LOG.assert_not_called() @mock.patch('os.remove') @mock.patch('os.listdir') @mock.patch.object(housekeeping, 'LOG') def test_clean_orphaned_staging_residue(self, mock_LOG, mock_listdir, mock_remove): staging = housekeeping.staging_store_path() image = self.db.image_create(self.context, {'status': 'queued'}) mock_listdir.return_value = ['notanimageid', image['id'], uuids.stale, uuids.midconvert, '%s.qcow2' % uuids.midconvert] self.cleaner.clean_orphaned_staging_residue() # NOTE(danms): We should have deleted the stale image file expected_stale = os.path.join(staging, uuids.stale) # NOTE(danms): We should have deleted the mid-convert base image and # the target file expected_mc = os.path.join(staging, uuids.midconvert) expected_mc_target = os.path.join(staging, '%s.qcow2' % uuids.midconvert) mock_remove.assert_has_calls([ mock.call(expected_stale), mock.call(expected_mc), mock.call(expected_mc_target), ]) # NOTE(danms): We should have cleaned the one (which we os.remove()'d) # above, and ignore the invalid and active ones. No errors this time. mock_LOG.debug.assert_has_calls([ mock.call('Found %i files in staging directory for potential ' 'cleanup', 5), mock.call('Staging directory contains unexpected non-image file ' '%r; ignoring', 'notanimageid'), mock.call('Stale staging residue found for image %(uuid)s: ' '%(file)r; deleting now.', {'uuid': uuids.stale, 'file': expected_stale}), mock.call('Stale staging residue found for image %(uuid)s: ' '%(file)r; deleting now.', {'uuid': uuids.midconvert, 'file': expected_mc}), mock.call('Stale staging residue found for image %(uuid)s: ' '%(file)r; deleting now.', {'uuid': uuids.midconvert, 'file': expected_mc_target}), mock.call('Cleaned %(cleaned)i stale staging files, ' '%(ignored)i ignored (%(error)i errors)', {'cleaned': 3, 'ignored': 2, 'error': 0}), ]) @mock.patch('os.listdir') @mock.patch('os.remove') @mock.patch.object(housekeeping, 'LOG') def test_clean_orphaned_staging_residue_handles_errors(self, mock_LOG, mock_remove, mock_listdir): staging = housekeeping.staging_store_path() mock_listdir.return_value = [uuids.gone, uuids.error] mock_remove.side_effect = [FileNotFoundError('gone'), PermissionError('not yours')] self.cleaner.clean_orphaned_staging_residue() # NOTE(danms): We should only have logged an error for the # permission failure mock_LOG.error.assert_called_once_with( 'Failed to delete stale staging path %(path)r: %(err)s', {'path': os.path.join(staging, uuids.error), 'err': 'not yours'}) # NOTE(danms): We should report the permission failure as an error, # but not the already-gone or invalid ones. mock_LOG.debug.assert_has_calls([ mock.call('Found %i files in staging directory for potential ' 'cleanup', 2), mock.call('Stale staging residue found for image %(uuid)s: ' '%(file)r; deleting now.', {'uuid': uuids.gone, 'file': os.path.join(staging, uuids.gone)}), mock.call('Stale staging residue found for image %(uuid)s: ' '%(file)r; deleting now.', {'uuid': uuids.error, 'file': os.path.join(staging, uuids.error)}), mock.call('Cleaned %(cleaned)i stale staging files, ' '%(ignored)i ignored (%(error)i errors)', {'cleaned': 1, 'ignored': 0, 'error': 1}), ]) ",,511,1
openstack%2Ftripleo-ansible~master~If1239369b9c650ab62be58b4ae125cff120fa49a,openstack/tripleo-ansible,master,If1239369b9c650ab62be58b4ae125cff120fa49a,Configure vhost-postcopy-support,MERGED,2021-07-28 15:24:34.000000000,2021-08-02 05:43:28.000000000,2021-08-02 05:43:28.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-07-28 15:24:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/dfd91d7e7660a2984e8ee2f839965bf1c40c8726', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n'}, {'number': 2, 'created': '2021-07-30 04:20:36.000000000', 'files': ['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/2dec045cdd05265214ac757f915e7b59458e6e7f', 'message': 'Configure vhost-postcopy-support\n\nLibvirt PostCopy helps with live-migration. For postcopy to work with\nvhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: If1239369b9c650ab62be58b4ae125cff120fa49a\n'}]",1,802742,2dec045cdd05265214ac757f915e7b59458e6e7f,25,11,2,27419,,,0,"Configure vhost-postcopy-support

Libvirt PostCopy helps with live-migration. For postcopy to work with
vhost interface, we need to configure ovs with other_config:vhost-postcopy-support=true

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Change-Id: If1239369b9c650ab62be58b4ae125cff120fa49a
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/42/802742/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml']",2,dfd91d7e7660a2984e8ee2f839965bf1c40c8726,vhost-postcopy,tripleo_ovs_dpdk_vhost_postcopy_support: false,,10,0
openstack%2Fheat~master~I24b4988e45d433e46b52cbc9fdaddb9039fdff01,openstack/heat,master,I24b4988e45d433e46b52cbc9fdaddb9039fdff01,Make functional/grenade tests voting again,ABANDONED,2021-07-27 14:55:29.000000000,2021-08-02 05:40:57.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-27 14:55:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/50bbdcc3ee23fc2b151dfe4094964d85b2290527', 'message': 'Make functional tests voting again\n\n... because now heat and heat-tempest-plugin are both fixed.\n\nDepends-on: https://review.opendev.org/802150\nChange-Id: I24b4988e45d433e46b52cbc9fdaddb9039fdff01\n'}, {'number': 2, 'created': '2021-07-27 16:57:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/4c590d7cb4bd52bb9836a7fb5a1fd858016e204a', 'message': 'Make functional/grenade tests voting again\n\n... because now heat and heat-tempest-plugin are both fixed.\n\nDepends-on: https://review.opendev.org/802150\nChange-Id: I24b4988e45d433e46b52cbc9fdaddb9039fdff01\n'}, {'number': 3, 'created': '2021-08-02 04:34:01.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/heat/commit/dae0da98d4247e9e017706bb44ae5d6fc67886ee', 'message': 'Make functional/grenade tests voting again\n\n... because now heat and heat-tempest-plugin are both fixed.\n\nDepends-on: https://review.opendev.org/802150\nChange-Id: I24b4988e45d433e46b52cbc9fdaddb9039fdff01\n'}]",0,802534,dae0da98d4247e9e017706bb44ae5d6fc67886ee,10,1,3,9816,,,0,"Make functional/grenade tests voting again

... because now heat and heat-tempest-plugin are both fixed.

Depends-on: https://review.opendev.org/802150
Change-Id: I24b4988e45d433e46b52cbc9fdaddb9039fdff01
",git fetch https://review.opendev.org/openstack/heat refs/changes/34/802534/3 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,50bbdcc3ee23fc2b151dfe4094964d85b2290527,volumev2-removal,, voting: false,0,1
openstack%2Fsenlin~master~I08eecb2c45d2cb1f730e6b9d8bb549306b3a2f89,openstack/senlin,master,I08eecb2c45d2cb1f730e6b9d8bb549306b3a2f89,senlin.policy.loadbalance module fix key error,MERGED,2021-07-02 22:20:57.000000000,2021-08-02 05:21:40.000000000,2021-08-02 05:20:19.000000000,"[{'_account_id': 10342}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 22998}]","[{'number': 1, 'created': '2021-07-02 22:20:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/senlin/commit/842a1c8c5e69d5399f9023f75a086e96573ae63f', 'message': 'senlin.policy.loadbalance module fix key error\n\nthe pool can be created without setting the var below\nsession_persistence[type|cookie_name]\n\nCloses-Bug: 1934543\n\nChange-Id: I08eecb2c45d2cb1f730e6b9d8bb549306b3a2f89\n'}, {'number': 2, 'created': '2021-07-02 22:25:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/senlin/commit/6f35298fc7eb30f6c59e1e69f72c1e81c21a1b92', 'message': 'senlin.policy.loadbalance module fix key error\n\nthe pool can be created without setting the var below\nsession_persistence[type|cookie_name]\n\nCloses-Bug: 1934543\n\nChange-Id: I08eecb2c45d2cb1f730e6b9d8bb549306b3a2f89\n'}, {'number': 3, 'created': '2021-07-02 22:31:05.000000000', 'files': ['senlin/drivers/os/octavia_v2.py', 'senlin/tests/unit/drivers/test_lbaas.py'], 'web_link': 'https://opendev.org/openstack/senlin/commit/cd33c1256fc2b07ac537caca19ca1e25a3feb025', 'message': 'senlin.policy.loadbalance module fix key error\n\nthe pool can be created without setting the var below\nsession_persistence[type|cookie_name]\n\nCloses-Bug: 1934543\n\nChange-Id: I08eecb2c45d2cb1f730e6b9d8bb549306b3a2f89\n'}]",0,799335,cd33c1256fc2b07ac537caca19ca1e25a3feb025,11,4,3,31039,,,0,"senlin.policy.loadbalance module fix key error

the pool can be created without setting the var below
session_persistence[type|cookie_name]

Closes-Bug: 1934543

Change-Id: I08eecb2c45d2cb1f730e6b9d8bb549306b3a2f89
",git fetch https://review.opendev.org/openstack/senlin refs/changes/35/799335/1 && git format-patch -1 --stdout FETCH_HEAD,"['senlin/drivers/os/octavia_v2.py', 'senlin/tests/unit/drivers/test_lbaas.py']",2,842a1c8c5e69d5399f9023f75a086e96573ae63f,bug-1934543,"import copy def test_lb_create_succeeded_session_persistence_none(self): lb_obj = mock.Mock() listener_obj = mock.Mock() pool_obj = mock.Mock() hm_obj = mock.Mock() lb_obj.id = 'LB_ID' lb_obj.vip_address = '192.168.1.100' listener_obj.id = 'LISTENER_ID' pool_obj.id = 'POOL_ID' subnet_obj = mock.Mock() subnet_obj.name = 'subnet' subnet_obj.id = 'SUBNET_ID' subnet_obj.network_id = 'NETWORK_ID' hm_obj.id = 'HEALTHMONITOR_ID' cluster_name = 'test_cluster' self.oc.loadbalancer_create.return_value = lb_obj self.oc.listener_create.return_value = listener_obj self.oc.pool_create.return_value = pool_obj self.oc.healthmonitor_create.return_value = hm_obj self.nc.subnet_get.return_value = subnet_obj self.lb_driver._wait_for_lb_ready = mock.Mock() self.lb_driver._wait_for_lb_ready.return_value = True temp_pool = copy.deepcopy(self.pool) temp_pool['session_persistence'] = {} status, res = self.lb_driver.lb_create(self.vip, temp_pool, cluster_name, self.hm, self.availability_zone, self.flavor_id) self.assertTrue(status) lb_name = 'senlin-lb-%s' % cluster_name self.oc.loadbalancer_create.assert_called_once_with( 'SUBNET_ID', None, self.vip['address'], self.vip['admin_state_up'], name=lb_name, availability_zone=self.availability_zone, flavor_id=self.flavor_id) self.assertEqual('LB_ID', res['loadbalancer']) self.assertEqual('192.168.1.100', res['vip_address']) listener_name = 'senlin-listener-%s' % cluster_name self.oc.listener_create.assert_called_once_with( 'LB_ID', self.vip['protocol'], self.vip['protocol_port'], self.vip['connection_limit'], self.vip['admin_state_up'], name=listener_name) self.assertEqual('LISTENER_ID', res['listener']) pool_name = 'senlin-pool-%s' % cluster_name self.oc.pool_create.assert_called_once_with( self.pool['lb_method'], 'LISTENER_ID', self.pool['protocol'], self.pool['session_persistence'], self.pool['admin_state_up'], name=pool_name) self.assertEqual('POOL_ID', res['pool']) self.oc.healthmonitor_create.assert_called_once_with( self.hm['type'], self.hm['delay'], self.hm['timeout'], self.hm['max_retries'], 'POOL_ID', self.hm['admin_state_up'], self.hm['http_method'], self.hm['url_path'], self.hm['expected_codes']) self.assertEqual('HEALTHMONITOR_ID', res['healthmonitor']) self.lb_driver._wait_for_lb_ready.assert_called_with('LB_ID') calls = [mock.call('LB_ID') for i in range(1, 5)] self.lb_driver._wait_for_lb_ready.assert_has_calls( calls, any_order=False)",,64,2
openstack%2Fheat~master~I7d466e26c414893059b17b37b953ffe43dbc7481,openstack/heat,master,I7d466e26c414893059b17b37b953ffe43dbc7481,WIP: Drop unused volume/network client,ABANDONED,2021-08-02 02:47:20.000000000,2021-08-02 04:33:20.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-02 02:47:20.000000000', 'files': ['heat_integrationtests/common/test.py', 'heat_integrationtests/common/clients.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/e3f531738fe0f1dc85b991b1046eb438e69f87b3', 'message': 'WIP: Drop unused volume/network client\n\nChange-Id: I7d466e26c414893059b17b37b953ffe43dbc7481\n'}]",0,803133,e3f531738fe0f1dc85b991b1046eb438e69f87b3,4,1,1,9816,,,0,"WIP: Drop unused volume/network client

Change-Id: I7d466e26c414893059b17b37b953ffe43dbc7481
",git fetch https://review.opendev.org/openstack/heat refs/changes/33/803133/1 && git format-patch -1 --stdout FETCH_HEAD,"['heat_integrationtests/common/test.py', 'heat_integrationtests/common/clients.py']",2,e3f531738fe0f1dc85b991b1046eb438e69f87b3,volumev2-removal,,"from cinderclient import client as cinder_clientfrom neutronclient.v2_0 import client as neutron_client CINDERCLIENT_VERSION = '3' self.network_client = self._get_network_client() self.volume_client = self._get_volume_client() def _get_network_client(self): return neutron_client.Client( session=self.identity_client.session, service_type='network', region_name=self.conf.region, endpoint_type='publicURL') def _get_volume_client(self): return cinder_client.Client( self.CINDERCLIENT_VERSION, session=self.identity_client.session, endpoint_type='publicURL', region_name=self.conf.region, http_log_debug=True) ",0,31
openstack%2Ftrove~master~Iac35c8a580b0e15c397cb5e78bb228fea9730f06,openstack/trove,master,Iac35c8a580b0e15c397cb5e78bb228fea9730f06,Use Block Storage API v3 instead of API v2,MERGED,2021-07-27 11:13:24.000000000,2021-08-02 03:35:47.000000000,2021-08-02 03:33:06.000000000,"[{'_account_id': 6732}, {'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-27 11:13:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/3e6c4c45973e0cfaba329bcf4cc26f4bdf76d443', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: Iac35c8a580b0e15c397cb5e78bb228fea9730f06\nRef: https://review.opendev.org/c/openstack/requirements/+/801759\n'}, {'number': 2, 'created': '2021-07-27 13:28:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/c2a48048005cadd86483bb6e32b46bd4f2d5621c', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: Iac35c8a580b0e15c397cb5e78bb228fea9730f06\nRef: https://review.opendev.org/c/openstack/requirements/+/801759\n'}, {'number': 3, 'created': '2021-08-01 21:04:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/5bba60704547202b1e3d535f732aa345ffe92c8c', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: Iac35c8a580b0e15c397cb5e78bb228fea9730f06\nRef: https://review.opendev.org/c/openstack/requirements/+/801759\n'}, {'number': 4, 'created': '2021-08-02 00:22:39.000000000', 'files': ['trove/common/clients.py', '.zuul.yaml', 'trove/tests/unittests/taskmanager/test_models.py'], 'web_link': 'https://opendev.org/openstack/trove/commit/036948c516672e55c4a2c932c74bcdec80319108', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: Iac35c8a580b0e15c397cb5e78bb228fea9730f06\nRef: https://review.opendev.org/c/openstack/requirements/+/801759\n'}]",0,802479,036948c516672e55c4a2c932c74bcdec80319108,36,3,4,6732,,,0,"Use Block Storage API v3 instead of API v2

Block Storage API v2 was deprecated during Pike cycle and is being
removed during Xena cycle, and current v3 API should be used instead.

Change-Id: Iac35c8a580b0e15c397cb5e78bb228fea9730f06
Ref: https://review.opendev.org/c/openstack/requirements/+/801759
",git fetch https://review.opendev.org/openstack/trove refs/changes/79/802479/3 && git format-patch -1 --stdout FETCH_HEAD,['trove/common/clients.py'],1,3e6c4c45973e0cfaba329bcf4cc26f4bdf76d443,cinder-v3,from cinderclient.v3 import client as CinderClient,from cinderclient.v2 import client as CinderClient,1,1
openstack%2Ftacker~master~Idf85d5a0b2d04f786a6771c89cf67c3d1d7ef107,openstack/tacker,master,Idf85d5a0b2d04f786a6771c89cf67c3d1d7ef107,[DNM] Define new 'tacker-functional-devstack-ipv6-only' job,NEW,2021-08-01 10:45:52.000000000,2021-08-02 03:21:03.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-08-01 10:45:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/30ac80d829549ce1998a5dde21db9cb90e68f11b', 'message': ""[DNM] Define new 'tacker-functional-devstack-ipv6-only' job\n\nChange-Id: Idf85d5a0b2d04f786a6771c89cf67c3d1d7ef107\n""}, {'number': 2, 'created': '2021-08-01 17:20:59.000000000', 'files': ['devstack/lib/tacker', 'playbooks/devstack-ipv6/run.yaml', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/tacker/commit/2c38298a5163d640ba0cc4e328759c8c7052393a', 'message': ""[DNM] Define new 'tacker-functional-devstack-ipv6-only' job\n\nChange-Id: Idf85d5a0b2d04f786a6771c89cf67c3d1d7ef107\n""}]",0,803115,2c38298a5163d640ba0cc4e328759c8c7052393a,6,1,2,25701,,,0,"[DNM] Define new 'tacker-functional-devstack-ipv6-only' job

Change-Id: Idf85d5a0b2d04f786a6771c89cf67c3d1d7ef107
",git fetch https://review.opendev.org/openstack/tacker refs/changes/15/803115/2 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/lib/tacker', 'playbooks/devstack-ipv6/run.yaml', '.zuul.yaml']",3,30ac80d829549ce1998a5dde21db9cb90e68f11b,ipv6-only-deployment-and-testing," - zuul: opendev.org/openstack/devstack- job: name: tacker-functional-devstack-ipv6-only parent: tacker-functional-devstack-multinode-legacy description: | Tacker job for devstack-based functional tests with IPv6 env. nodeset: openstack-single-node-focal run: playbooks/devstack-ipv6/run.yaml vars: devstack_localrc: SERVICE_IP_VERSION: 6 SERVICE_HOST: """" USE_PYTHON3: True - tacker-functional-devstack-ipv6-only", - zuul: openstack-infra/devstack,34,2
openstack%2Fmagnum~master~Ib66b754f4a0854a0d62d62047a69b04a24434634,openstack/magnum,master,Ib66b754f4a0854a0d62d62047a69b04a24434634,Use Block Storage API v3 instead of API v2,MERGED,2021-07-27 01:51:25.000000000,2021-08-02 02:05:50.000000000,2021-08-02 02:02:58.000000000,"[{'_account_id': 6484}, {'_account_id': 8064}, {'_account_id': 20498}, {'_account_id': 22348}, {'_account_id': 28022}]","[{'number': 1, 'created': '2021-07-27 01:51:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/27f3f8f245fecf5c7a13707bb9a7b685cec5ce37', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nChange-Id: Ib66b754f4a0854a0d62d62047a69b04a24434634\n'}, {'number': 2, 'created': '2021-07-27 12:21:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/98526e4299dd8d834b2f7f9dca57a4e35ddb89bc', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nAdditional Zuul config allows CI to pass which can be reverted later.\n\nChange-Id: Ib66b754f4a0854a0d62d62047a69b04a24434634\n'}, {'number': 3, 'created': '2021-07-27 20:42:54.000000000', 'files': ['magnum/common/clients.py', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/magnum/commit/67acf2c5e95c46acbfd64aad20de6d26fdc66801', 'message': 'Use Block Storage API v3 instead of API v2\n\nBlock Storage API v2 was deprecated during Pike cycle and is being\nremoved during Xena cycle, and current v3 API should be used instead.\n\nAdditional Zuul config for Devstack allows CI to pass which can be\nreverted later [1].\n\n[1] https://bugs.launchpad.net/glance/+bug/1938151\n\nChange-Id: Ib66b754f4a0854a0d62d62047a69b04a24434634\n'}]",1,802413,67acf2c5e95c46acbfd64aad20de6d26fdc66801,21,5,3,9816,,,0,"Use Block Storage API v3 instead of API v2

Block Storage API v2 was deprecated during Pike cycle and is being
removed during Xena cycle, and current v3 API should be used instead.

Additional Zuul config for Devstack allows CI to pass which can be
reverted later [1].

[1] https://bugs.launchpad.net/glance/+bug/1938151

Change-Id: Ib66b754f4a0854a0d62d62047a69b04a24434634
",git fetch https://review.opendev.org/openstack/magnum refs/changes/13/802413/1 && git format-patch -1 --stdout FETCH_HEAD,['magnum/common/clients.py'],1,27f3f8f245fecf5c7a13707bb9a7b685cec5ce37,volumev2-removal,from cinderclient.v3 import client as cinder_client,from cinderclient.v2 import client as cinder_client,1,1
openstack%2Fneutron-tempest-plugin~master~Ib5bf31ebef037049627d0de296a66cca6730e306,openstack/neutron-tempest-plugin,master,Ib5bf31ebef037049627d0de296a66cca6730e306,Enable tls-proxy in jobs where it was disabled,MERGED,2021-06-11 06:49:31.000000000,2021-08-01 23:54:51.000000000,2021-08-01 23:54:51.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-11 06:49:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/1affd8c50c031f4260607394193f49893757cb1f', 'message': 'Enable tls-proxy in jobs where it was disabled\n\nChange-Id: Ib5bf31ebef037049627d0de296a66cca6730e306\n'}, {'number': 2, 'created': '2021-06-14 12:50:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/511433a6454a8444b6725aab4419aed56c7132f6', 'message': 'Enable tls-proxy in jobs where it was disabled\n\nChange-Id: Ib5bf31ebef037049627d0de296a66cca6730e306\n'}, {'number': 3, 'created': '2021-06-16 08:12:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/9d2072b8b38428f69ad587794ac1a7534044d77a', 'message': 'Enable tls-proxy in jobs where it was disabled\n\nChange-Id: Ib5bf31ebef037049627d0de296a66cca6730e306\n'}, {'number': 4, 'created': '2021-07-20 13:22:21.000000000', 'files': ['zuul.d/master_jobs.yaml'], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/579b6dfa417f6abc183532aa48965be1f1e87a39', 'message': 'Enable tls-proxy in jobs where it was disabled\n\nChange-Id: Ib5bf31ebef037049627d0de296a66cca6730e306\n'}]",0,795929,579b6dfa417f6abc183532aa48965be1f1e87a39,57,5,4,11975,,,0,"Enable tls-proxy in jobs where it was disabled

Change-Id: Ib5bf31ebef037049627d0de296a66cca6730e306
",git fetch https://review.opendev.org/openstack/neutron-tempest-plugin refs/changes/29/795929/4 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/master_jobs.yaml'],1,1affd8c50c031f4260607394193f49893757cb1f,bug/1928466, tls-proxy: true tls-proxy: true, tls-proxy: false tls-proxy: false,2,2
openstack%2Ftacker~master~I9b8c8ab02e8ddf9d50716f1ee32c60da9c603a52,openstack/tacker,master,I9b8c8ab02e8ddf9d50716f1ee32c60da9c603a52,Update releasenotes from Xena cycle,MERGED,2021-07-29 14:56:08.000000000,2021-08-01 17:54:33.000000000,2021-08-01 17:52:13.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 31857}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-07-29 14:56:08.000000000', 'files': ['releasenotes/notes/bug-1924214-unexpected-heal-e59f6dcf0f03bc6a.yaml', 'releasenotes/notes/bug-1923425-add-endpoint-info-77c3f975d0f876c9.yaml', 'releasenotes/notes/bug-1923478-wrong-opocc-notif-523c33da2d9a0e04.yaml', 'releasenotes/notes/bug-1930571-missing-vnf-config-props-c3bc122d70041da1.yaml', 'releasenotes/notes/drop-sqlalchemy-filters-7ba7a03a309654bc.yaml', 'releasenotes/notes/bug-1923360-link-vnflcm-486fbbffb2636b50.yaml', 'releasenotes/notes/bug-1923540-unzipped-permission-4f34dce4a73a9342.yaml', 'releasenotes/notes/ovs-to-ovn-2f14dcaaa7b186b5.yaml', 'releasenotes/notes/bug-1923528-too-many-workers-919ad36e0c0ea9b0.yaml'], 'web_link': 'https://opendev.org/openstack/tacker/commit/9a9c8dbf4e898a091033bd775300278f5f164c9c', 'message': 'Update releasenotes from Xena cycle\n\nListing updates from begining of Xena cycle should be included in\nreleasenotes.\n\n* Dropping sqlalchemy-filters while updating SQLAlchemy [1].\n\n* Update default network driver to OVN in [2] and [3].\n\n* Bug fixes of features, totally seven as referred in git log.\n\n[1] https://review.opendev.org/c/openstack/tacker/+/796160\n[2] https://review.opendev.org/c/openstack/tacker/+/794014\n[3] https://review.opendev.org/c/openstack/tacker/+/792872\n\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\nChange-Id: I9b8c8ab02e8ddf9d50716f1ee32c60da9c603a52\n'}]",0,802899,9a9c8dbf4e898a091033bd775300278f5f164c9c,9,6,1,25701,,,0,"Update releasenotes from Xena cycle

Listing updates from begining of Xena cycle should be included in
releasenotes.

* Dropping sqlalchemy-filters while updating SQLAlchemy [1].

* Update default network driver to OVN in [2] and [3].

* Bug fixes of features, totally seven as referred in git log.

[1] https://review.opendev.org/c/openstack/tacker/+/796160
[2] https://review.opendev.org/c/openstack/tacker/+/794014
[3] https://review.opendev.org/c/openstack/tacker/+/792872

Signed-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>
Change-Id: I9b8c8ab02e8ddf9d50716f1ee32c60da9c603a52
",git fetch https://review.opendev.org/openstack/tacker refs/changes/99/802899/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1924214-unexpected-heal-e59f6dcf0f03bc6a.yaml', 'releasenotes/notes/bug-1923425-add-endpoint-info-77c3f975d0f876c9.yaml', 'releasenotes/notes/bug-1923478-wrong-opocc-notif-523c33da2d9a0e04.yaml', 'releasenotes/notes/bug-1930571-missing-vnf-config-props-c3bc122d70041da1.yaml', 'releasenotes/notes/drop-sqlalchemy-filters-7ba7a03a309654bc.yaml', 'releasenotes/notes/bug-1923360-link-vnflcm-486fbbffb2636b50.yaml', 'releasenotes/notes/bug-1923540-unzipped-permission-4f34dce4a73a9342.yaml', 'releasenotes/notes/ovs-to-ovn-2f14dcaaa7b186b5.yaml', 'releasenotes/notes/bug-1923528-too-many-workers-919ad36e0c0ea9b0.yaml']",9,9a9c8dbf4e898a091033bd775300278f5f164c9c,relnotes-bulk-update,"--- fixes: - | Fixes `bug 1923528`_, drop ``WorkerService`` class which spawns child service proceses with given number ``api_worker`` as a config value. Without this fix, it results in that the worker processes, the number of them is ``api_worker``, spawn each child processes unintendedly. ``api_worker`` is designed just for the number of workers, and not for their children. .. _bug 1923528 : https://bugs.launchpad.net/tacker/+bug/1923528 ",,67,0
openstack%2Ftacker~master~Id01fe417acf4da4e5360dfba3bc2cc96df2b6889,openstack/tacker,master,Id01fe417acf4da4e5360dfba3bc2cc96df2b6889,Drop block storage v2 API,MERGED,2021-07-27 07:01:39.000000000,2021-08-01 17:53:30.000000000,2021-08-01 17:52:11.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 31857}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-07-27 07:01:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/337386d29568b03464cb2f11264b70364bbe5696', 'message': '[WIP] Drop block storage API v2\n\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\nChange-Id: Id01fe417acf4da4e5360dfba3bc2cc96df2b6889\n'}, {'number': 2, 'created': '2021-07-27 14:07:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/dc84225563074e637628ddae51c924a935cc6bc3', 'message': '[WIP] Drop block storage API v2\n\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\nChange-Id: Id01fe417acf4da4e5360dfba3bc2cc96df2b6889\n'}, {'number': 3, 'created': '2021-07-27 14:15:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/b0545df5d0141418f6a36567ce1716147347037e', 'message': ""[WIP] Drop block storage v2 API\n\nThis change is to update python-cinderclient to 8.0.0 because cinder\ndropped v2 API and doesn't support its client for the API. It also\nupdate depending packages as below.\n\n* python-cinderclient 8.0.0 depends on pbr>=5.5.0\n\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\nChange-Id: Id01fe417acf4da4e5360dfba3bc2cc96df2b6889\n""}, {'number': 4, 'created': '2021-07-28 01:55:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/17fb9c2676abae27200caa2d36270b65f1f24541', 'message': ""[WIP] Drop block storage v2 API\n\nThis change is to update python-cinderclient to 8.0.0 because cinder\ndropped v2 API and doesn't support its client for the API. It also\nupdate depending packages as below.\n\n* python-cinderclient 8.0.0 depends on pbr>=5.5.0\n* python-cinderclient 8.0.0 depends on oslo.utils>=4.8.0\n\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\nChange-Id: Id01fe417acf4da4e5360dfba3bc2cc96df2b6889\n""}, {'number': 5, 'created': '2021-07-28 05:51:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/8cf55a49563a5915308cc9a2dc5ac8fb226b3474', 'message': ""[WIP] Drop block storage v2 API\n\nThis change is to update python-cinderclient to 8.0.0 because cinder\ndropped v2 API and doesn't support its client for the API. It also\nupdate depending packages as below.\n\n* python-cinderclient 8.0.0 depends on pbr>=5.5.0\n* python-cinderclient 8.0.0 depends on oslo.utils>=4.8.0\n* python-cinderclient 8.0.0 depends on stevedore>=3.3.0\n* python-cinderclient 8.0.0 depends on requests>=2.25.1\n* python-cinderclient 8.0.0 depends on keystoneauth1>=4.3.1\n\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\nChange-Id: Id01fe417acf4da4e5360dfba3bc2cc96df2b6889\n""}, {'number': 6, 'created': '2021-07-28 16:05:12.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'lower-constraints.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/tacker/commit/385c4b441e81db60e421af09d6c69ba04b60a2f0', 'message': ""Drop block storage v2 API\n\nThis change is to update python-cinderclient to 8.0.0 because cinder\ndropped v2 API and doesn't support its client for the API. It also\nupdates depending packages as below.\n\n* python-cinderclient 8.0.0 depends on pbr>=5.5.0\n* python-cinderclient 8.0.0 depends on oslo.utils>=4.8.0\n* python-cinderclient 8.0.0 depends on stevedore>=3.3.0\n* python-cinderclient 8.0.0 depends on requests>=2.25.1\n* python-cinderclient 8.0.0 depends on keystoneauth1>=4.3.1\n\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\nChange-Id: Id01fe417acf4da4e5360dfba3bc2cc96df2b6889\n""}]",0,802429,385c4b441e81db60e421af09d6c69ba04b60a2f0,20,6,6,25701,,,0,"Drop block storage v2 API

This change is to update python-cinderclient to 8.0.0 because cinder
dropped v2 API and doesn't support its client for the API. It also
updates depending packages as below.

* python-cinderclient 8.0.0 depends on pbr>=5.5.0
* python-cinderclient 8.0.0 depends on oslo.utils>=4.8.0
* python-cinderclient 8.0.0 depends on stevedore>=3.3.0
* python-cinderclient 8.0.0 depends on requests>=2.25.1
* python-cinderclient 8.0.0 depends on keystoneauth1>=4.3.1

Signed-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>
Change-Id: Id01fe417acf4da4e5360dfba3bc2cc96df2b6889
",git fetch https://review.opendev.org/openstack/tacker refs/changes/29/802429/4 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'lower-constraints.txt', 'upper-constraints.txt']",3,337386d29568b03464cb2f11264b70364bbe5696,drop-cinder-v2,python-cinderclient===8.0.0,python-cinderclient===7.3.0,3,3
openstack%2Ftripleo-ansible~master~I5bcb62a740fa3b913ac9a4c8db57798b4b72ff8a,openstack/tripleo-ansible,master,I5bcb62a740fa3b913ac9a4c8db57798b4b72ff8a,DNM check ansible 2.11 with tripleo-ansible,ABANDONED,2021-07-28 09:26:34.000000000,2021-08-01 17:45:06.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-28 09:26:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/611229e124c94326aea298f54003eb0b7f9061df', 'message': 'DNM check ansible 2.11 with tripleo-ansible\n\nChange-Id: I5bcb62a740fa3b913ac9a4c8db57798b4b72ff8a\n'}, {'number': 2, 'created': '2021-07-28 10:04:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/bb36b87b9a30430617a4a3f3184a339eaed4f9e5', 'message': 'DNM check ansible 2.11 with tripleo-ansible\n\nChange-Id: I5bcb62a740fa3b913ac9a4c8db57798b4b72ff8a\n'}, {'number': 3, 'created': '2021-07-28 13:25:07.000000000', 'files': ['ansible-requirements.txt', 'ansible-test-env.rc', 'tox.ini', 'molecule-requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/11898dbf82e72b7b838e1f8ba20feb3f0bf94ba1', 'message': 'DNM check ansible 2.11 with tripleo-ansible\n\nChange-Id: I5bcb62a740fa3b913ac9a4c8db57798b4b72ff8a\n'}]",0,802673,11898dbf82e72b7b838e1f8ba20feb3f0bf94ba1,6,1,3,10969,,,0,"DNM check ansible 2.11 with tripleo-ansible

Change-Id: I5bcb62a740fa3b913ac9a4c8db57798b4b72ff8a
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/73/802673/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible-requirements.txt', 'molecule-requirements.txt']",2,611229e124c94326aea298f54003eb0b7f9061df,,"ansible>2.11.0,<2.12.0","ansible>=2.8,!=2.8.9,!=2.9.12,<2.10.0",2,2
openstack%2Ftripleo-heat-templates~master~Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f,openstack/tripleo-heat-templates,master,Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f,Add /run/frr volume mount,MERGED,2021-06-09 10:21:12.000000000,2021-08-01 16:14:10.000000000,2021-08-01 16:14:10.000000000,"[{'_account_id': 6469}, {'_account_id': 20172}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-06-09 10:21:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/dd469db3e1d14cbd8c62a411e60128db40423006', 'message': 'WIP: volume mount FRR socket directory\n\nChange-Id: Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f\n'}, {'number': 2, 'created': '2021-06-09 13:08:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e3a0228186da9c65dab49f34ce13601f5cd0f25a', 'message': 'Add /run/frr volume mount\n\nHaving /var/frr mounted between the host and the FRR container enables\nthe host as well as adjacent containers (e.g. OVN BGP agent) to control\nFRR with the vtysh CLI through the vty socket.\n\n  $ vtysh --vty_socket /run/frr\n\nChange-Id: Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f\n'}, {'number': 3, 'created': '2021-06-21 13:17:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f2d26edff3595c3119e1abfd022d106465b84960', 'message': 'Add /run/frr volume mount\n\nHaving /var/frr mounted between the host and the FRR container enables\nthe host as well as adjacent containers (e.g. OVN BGP agent) to control\nFRR with the vtysh CLI through the vty socket.\n\n  $ vtysh --vty_socket /run/frr\n\nChange-Id: Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f\n'}, {'number': 4, 'created': '2021-06-22 07:34:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ae03f4c116457367c6b6dbd4c4c09fd6dfec74e6', 'message': 'Add /run/frr volume mount\n\nHaving /var/frr mounted between the host and the FRR container enables\nthe host as well as adjacent containers (e.g. OVN BGP agent) to control\nFRR with the vtysh CLI through the vty socket.\n\n  $ vtysh --vty_socket /run/frr\n\nChange-Id: Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f\n'}, {'number': 5, 'created': '2021-08-01 08:02:56.000000000', 'files': ['deployment/frr/frr-container-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/dadb112a50795a21c3fc2df1c8872c4eab3ad6ea', 'message': 'Add /run/frr volume mount\n\nHaving /var/frr mounted between the host and the FRR container enables\nthe host as well as adjacent containers (e.g. OVN BGP agent) to control\nFRR with the vtysh CLI through the vty socket.\n\n  $ vtysh --vty_socket /run/frr\n\nChange-Id: Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f\n'}]",0,795510,dadb112a50795a21c3fc2df1c8872c4eab3ad6ea,21,5,5,6469,,,0,"Add /run/frr volume mount

Having /var/frr mounted between the host and the FRR container enables
the host as well as adjacent containers (e.g. OVN BGP agent) to control
FRR with the vtysh CLI through the vty socket.

  $ vtysh --vty_socket /run/frr

Change-Id: Ib9ca7e1f56cf4fe6d63807cd4e5e58ee91501a5f
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/10/795510/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/frr/frr-container-ansible.yaml'],1,dd469db3e1d14cbd8c62a411e60128db40423006,ovn_bgp_agent," - path: /var/run/frr owner: frr:frrvty recurse: true - /run/frr:/var/run/frr:shared,z - { 'path': /run/frr, 'setype': container_file_t, 'mode': '0770' }",,5,0
openstack%2Ftacker~master~I87168235d56affe2217bb505a1a9c631f40854e2,openstack/tacker,master,I87168235d56affe2217bb505a1a9c631f40854e2,Fix MgmtDriver can not be called when scale CNF,MERGED,2021-07-08 02:14:19.000000000,2021-08-01 16:07:19.000000000,2021-08-01 16:06:01.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 31857}, {'_account_id': 32102}, {'_account_id': 33292}]","[{'number': 1, 'created': '2021-07-08 02:14:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f14956c4f24c173f62cbb91ed3ba17566f4f477c', 'message': 'Fix MgmtDriver can not be called when scale CNF\n\nMgmtDriver can be called only when the type of scale is VNF.\nTherefore, a judgment condition is added, when the type of\nscale is CNF, MgmtDriver can also be called.\n\nCloses-Bug: #1933924\nChange-Id: I87168235d56affe2217bb505a1a9c631f40854e2\n'}, {'number': 2, 'created': '2021-07-13 02:03:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/154547d418f8ad2e01594b796c74aecbd812f5d3', 'message': 'Fix MgmtDriver can not be called when scale CNF\n\nMgmtDriver can be called only when the type of scale is VNF.\nTherefore, a judgment condition is added, when the type of\nscale is CNF, MgmtDriver can also be called.\n\nCloses-Bug: #1933924\nChange-Id: I87168235d56affe2217bb505a1a9c631f40854e2\n'}, {'number': 3, 'created': '2021-07-14 01:33:07.000000000', 'files': ['tacker/tests/unit/vnflcm/test_vnflcm_driver.py', 'tacker/vnflcm/vnflcm_driver.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/f4774e86ce844a36667873aacaf1fdde438072b7', 'message': 'Fix MgmtDriver can not be called when scale CNF\n\nMgmtDriver can be called only when the type of scale is VNF.\nTherefore, a judgment condition is added, when the type of\nscale is CNF, MgmtDriver can also be called.\n\nCloses-Bug: #1933924\nChange-Id: I87168235d56affe2217bb505a1a9c631f40854e2\n'}]",0,799947,f4774e86ce844a36667873aacaf1fdde438072b7,16,7,3,33492,,,0,"Fix MgmtDriver can not be called when scale CNF

MgmtDriver can be called only when the type of scale is VNF.
Therefore, a judgment condition is added, when the type of
scale is CNF, MgmtDriver can also be called.

Closes-Bug: #1933924
Change-Id: I87168235d56affe2217bb505a1a9c631f40854e2
",git fetch https://review.opendev.org/openstack/tacker refs/changes/47/799947/2 && git format-patch -1 --stdout FETCH_HEAD,['tacker/vnflcm/vnflcm_driver.py'],1,f14956c4f24c173f62cbb91ed3ba17566f4f477c,bug/1933924, if len(scale_id_list) != 0 or \ vim_connection_info.vim_type == 'kubernetes': if len(id_list) != 0 or \ vim_connection_info.vim_type == 'kubernetes':, if len(scale_id_list) != 0: if len(id_list) != 0:,4,2
openstack%2Ftacker~master~Ic5f08ca924d14a382baeb77470aa3430e317315f,openstack/tacker,master,Ic5f08ca924d14a382baeb77470aa3430e317315f,Fix required attributes when error happened,MERGED,2021-06-07 01:09:12.000000000,2021-08-01 16:03:31.000000000,2021-08-01 16:02:15.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 31857}, {'_account_id': 32102}, {'_account_id': 33292}, {'_account_id': 33455}]","[{'number': 1, 'created': '2021-06-07 01:09:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/84914b40870bb4ac7ec9cd2c1513ee86af35b94c', 'message': 'Implement required attributes of ProblemDetails\n\nThis patch implements spec as follows:\nThe attributes of ""status"" and ""detail"" should be included\nin the ProblemDetails by the spec definition\nwhich named NFV-SOL 013v2.6.1 .\n\nstatus Integer:\n        The HTTP status code for this occurrence of the problem.\ndetail String:\n        A human-readable explanation\n        specific to this occurrence of the problem.\n\nIt implements a new Internet media type\nwhich is ""application/problem+json""\nby adding the attribute of ""Content-Type: application/problem+json""\nat the header of HTTP.\n\nIt defines the http code which is unsupported in NFV-SOL 013v2.6.1.\n    406: ""Not Acceptable""\n    414: ""URI Too Long""\n    422: ""Unprocessable Entity""\n    504: ""Gateway Timeout""\n\nCloses-Bug: #1930647\nChange-Id: Ic5f08ca924d14a382baeb77470aa3430e317315f\n'}, {'number': 2, 'created': '2021-06-07 01:12:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/2c3799edbd414029e997c27715dea2198da3cb54', 'message': 'Fix required attributes when error happened\n\nAccroding to the NFV-SOL 013v2.6.1 Section 6, modify the API\'s\nresponse body format when error happened.\n\nAdd title, status and detail attributes and delete problem type,\ncode and message attributes in the response body when error happened.\nAnd also change the ""Content-Type"" from ""application/json"" to\n""application/problem+json"".\n\nCloses-Bug: #1930647\nChange-Id: Ic5f08ca924d14a382baeb77470aa3430e317315f\n'}, {'number': 3, 'created': '2021-06-10 05:22:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/e959849ca4fcd43b187c0e600070a454c54e1c0f', 'message': 'Fix required attributes when error happened\n\nAccroding to the NFV-SOL 013v2.6.1 Section 6, modify the API\'s\nresponse body format when error happened.\n\nAdd title, status and detail attributes and delete problem type,\ncode and message attributes in the response body when error happened.\nAnd also change the ""Content-Type"" from ""application/json"" to\n""application/problem+json"".\n\nCloses-Bug: #1930647\nChange-Id: Ic5f08ca924d14a382baeb77470aa3430e317315f\n'}, {'number': 4, 'created': '2021-07-13 02:02:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/52ea7f3469061179df0e14af530e212d9bd0e167', 'message': 'Fix required attributes when error happened\n\nAccroding to the NFV-SOL 013v2.6.1 Section 6, modify the API\'s\nresponse body format when error happened.\n\nAdd title, status and detail attributes and delete problem type,\ncode and message attributes in the response body when error happened.\nAnd also change the ""Content-Type"" from ""application/json"" to\n""application/problem+json"".\n\nCloses-Bug: #1930647\nChange-Id: Ic5f08ca924d14a382baeb77470aa3430e317315f\n'}, {'number': 5, 'created': '2021-07-30 07:15:49.000000000', 'files': ['tacker/tests/unit/vnflcm/test_controller.py', 'tacker/wsgi.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/646554075e86e309e7c93a8d5d0120e18db9fca3', 'message': 'Fix required attributes when error happened\n\nAccroding to the NFV-SOL 013v2.6.1 Section 6, modify the API\'s\nresponse body format when error happened.\n\nAdd title, status and detail attributes and delete problem type,\ncode and message attributes in the response body when error happened.\nAnd also change the ""Content-Type"" from ""application/json"" to\n""application/problem+json"".\n\nCloses-Bug: #1930647\nChange-Id: Ic5f08ca924d14a382baeb77470aa3430e317315f\n'}]",8,795008,646554075e86e309e7c93a8d5d0120e18db9fca3,33,8,5,33492,,,0,"Fix required attributes when error happened

Accroding to the NFV-SOL 013v2.6.1 Section 6, modify the API's
response body format when error happened.

Add title, status and detail attributes and delete problem type,
code and message attributes in the response body when error happened.
And also change the ""Content-Type"" from ""application/json"" to
""application/problem+json"".

Closes-Bug: #1930647
Change-Id: Ic5f08ca924d14a382baeb77470aa3430e317315f
",git fetch https://review.opendev.org/openstack/tacker refs/changes/08/795008/5 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/tests/unit/vnflcm/test_controller.py', 'tacker/wsgi.py']",2,84914b40870bb4ac7ec9cd2c1513ee86af35b94c,bug/1930647," 400: ""Bad Request"", 401: ""Unauthorized"", 403: ""Forbidden"", 404: ""Not Found"", 405: ""Method Not Allowed"", 406: ""Not Acceptable"", 409: ""Conflict"", 413: ""Payload Too Large"", 414: ""URI Too Long"", 415: ""Unsupported Media Type"", 422: ""Unprocessable Entity"", 429: ""Too Many Requests"", 500: ""Internal Server Error"", 501: ""Not Implemented"", 503: ""Service Unavailable"", 504: ""Gateway Timeout""} fault_name = self._fault_names.get(code) fault_data = {} if fault_name is not None: fault_data['title'] = fault_name fault_data['status'] = code fault_data['detail'] = explanation fault_data['retryAfter'] = retry self.wrapped_exc.content_type = 'application/problem+json'"," 400: ""badRequest"", 401: ""unauthorized"", 403: ""forbidden"", 404: ""itemNotFound"", 405: ""badMethod"", 409: ""conflictingRequest"", 413: ""overLimit"", 415: ""badMediaType"", 429: ""overLimit"", 501: ""notImplemented"", 503: ""serviceUnavailable""} fault_name = self._fault_names.get(code, ""tackerFault"") fault_data = { fault_name: { 'code': code, 'message': explanation}} fault_data[fault_name]['retryAfter'] = retry self.wrapped_exc.content_type = 'application/json'",50,42
openstack%2Ftacker~master~I3de1a532e33ae25638a452db4b9e18626de8df42,openstack/tacker,master,I3de1a532e33ae25638a452db4b9e18626de8df42,Fix Healing so image is updated after Healing,MERGED,2021-04-28 07:52:28.000000000,2021-08-01 15:49:06.000000000,2021-08-01 15:47:53.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 31072}, {'_account_id': 32826}, {'_account_id': 33558}]","[{'number': 1, 'created': '2021-04-28 07:52:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/bb84c451afe7935a6558c0651a5d122c4fbedae7', 'message': 'Fix Healing so image is updated after Healing\n\nThis patch will fix the issue about about Healing not being\nable to update to the new image.\n\nCloses-Bug: #1924215\nChange-Id: I3de1a532e33ae25638a452db4b9e18626de8df42\n'}, {'number': 2, 'created': '2021-05-06 04:36:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/b08805ec94b8c8a5df64129ac2b3bcc48dcbbd8a', 'message': 'Fix Healing so image is updated after Healing\n\nThis patch will fix the issue about about Healing not being\nable to update to the new image.\n\nCloses-Bug: #1924215\nChange-Id: I3de1a532e33ae25638a452db4b9e18626de8df42\n'}, {'number': 3, 'created': '2021-06-23 06:13:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/1c2c8d48e3d06eb6bab5a76a0b00a5203d9fb7e7', 'message': 'Fix Healing so image is updated after Healing\n\nThis patch will fix the issue about Healing not being\nable to update to the new image.\n\nCloses-Bug: #1924215\nChange-Id: I3de1a532e33ae25638a452db4b9e18626de8df42\n'}, {'number': 4, 'created': '2021-07-07 05:10:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/d1e90311d7170e37499ba48daecd7bba480d5c46', 'message': 'Fix Healing so image is updated after Healing\n\nThis patch will fix the issue about Healing not being\nable to update to the new image.\n\nCloses-Bug: #1924215\nChange-Id: I3de1a532e33ae25638a452db4b9e18626de8df42\n'}, {'number': 5, 'created': '2021-07-29 13:59:33.000000000', 'files': ['tacker/vnflcm/utils.py', 'tacker/tests/unit/conductor/test_conductor_server.py', 'tacker/tests/functional/sol/vnflcm/base.py', 'tacker/tests/unit/vnfm/infra_drivers/openstack/test_openstack_driver.py', 'tacker/tests/functional/sol_separated_nfvo/vnflcm/test_vnf_instance_with_user_data_nfvo_separate.py', 'tacker/vnfm/infra_drivers/openstack/openstack.py', 'tacker/tests/functional/sol/vnflcm/test_vnf_instance_with_user_data.py', 'tacker/conductor/conductor_server.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/33cb3ba5753c7487f6e8ef7e7d30359a5df2f30d', 'message': 'Fix Healing so image is updated after Healing\n\nThis patch will fix the issue about Healing not being\nable to update to the new image.\n\nCloses-Bug: #1924215\nChange-Id: I3de1a532e33ae25638a452db4b9e18626de8df42\n'}]",4,788419,33cb3ba5753c7487f6e8ef7e7d30359a5df2f30d,29,6,5,32219,,,0,"Fix Healing so image is updated after Healing

This patch will fix the issue about Healing not being
able to update to the new image.

Closes-Bug: #1924215
Change-Id: I3de1a532e33ae25638a452db4b9e18626de8df42
",git fetch https://review.opendev.org/openstack/tacker refs/changes/19/788419/2 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/vnflcm/utils.py', 'tacker/tests/unit/conductor/test_conductor_server.py', 'tacker/tests/unit/vnfm/infra_drivers/openstack/test_openstack_driver.py', 'tacker/tests/functional/sol_separated_nfvo/vnflcm/test_vnf_instance_with_user_data_nfvo_separate.py', 'tacker/vnfm/infra_drivers/openstack/openstack.py', 'tacker/conductor/conductor_server.py', 'tacker/vnflcm/vnflcm_driver.py']",7,bb84c451afe7935a6558c0651a5d122c4fbedae7,comment_fix," heal_vnf_request=heal_vnf_request, vnf_dict=vnf)", heal_vnf_request=heal_vnf_request),204,18
openstack%2Ftacker~master~I3ddf9e5ec68c0e84ccc9df4fea9ee274562a3e88,openstack/tacker,master,I3ddf9e5ec68c0e84ccc9df4fea9ee274562a3e88,Add LCM op figures to User Guide,MERGED,2021-07-12 01:26:30.000000000,2021-08-01 15:39:10.000000000,2021-08-01 15:37:51.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 31730}, {'_account_id': 31857}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-07-12 01:26:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/779a2b3d7cd6f309579f884b672a84a2f612cb09', 'message': ""Add LCM op figures to User Guide\n\nThe current document doesn't have an overview of VNF LCM operations,\ne.g., Deployment, Scaling and Healing.  For example, the VNF scaling\ncreates/changes VMs with OpenStack Heat API and users have to confirm\nresults of an operation with `openstack stack` command, but the\nrelationship between OpenStack Tacker and OpenStack Heat is not\nexplicitly described.\n\nFor ease of understanding, added diagrams and brief explanation of the\nLCM operations listed below.\n\n- ETSI NFV-SOL VNF Deployment as VM with TOSCA\n- ETSI NFV-SOL VNF Deployment as VM with LCM operation user data\n- ETSI NFV-SOL CNF (Containerized VNF) Deployment\n- ETSI NFV-SOL VNF Healing\n- ETSI NFV-SOL VNF Scaling\n- ETSI NFV-SOL CNF Healing\n- ETSI NFV-SOL CNF Scaling\n\nChange-Id: I3ddf9e5ec68c0e84ccc9df4fea9ee274562a3e88\n""}, {'number': 2, 'created': '2021-07-26 00:54:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/156ddcaff09ecb3f4c153f4c3347d69b0b837325', 'message': ""Add LCM op figures to User Guide\n\nThe current document doesn't have an overview of VNF LCM operations,\ne.g., Deployment, Scaling and Healing.  For example, the VNF scaling\ncreates/changes VMs with OpenStack Heat API and users have to confirm\nresults of an operation with `openstack stack` command, but the\nrelationship between OpenStack Tacker and OpenStack Heat is not\nexplicitly described.\n\nFor ease of understanding, added diagrams and brief explanation of the\nLCM operations listed below.\n\n- ETSI NFV-SOL VNF Deployment as VM with TOSCA\n- ETSI NFV-SOL VNF Deployment as VM with LCM operation user data\n- ETSI NFV-SOL CNF (Containerized VNF) Deployment\n- ETSI NFV-SOL VNF Healing\n- ETSI NFV-SOL VNF Scaling\n- ETSI NFV-SOL CNF Healing\n- ETSI NFV-SOL CNF Scaling\n\nChange-Id: I3ddf9e5ec68c0e84ccc9df4fea9ee274562a3e88\n""}, {'number': 3, 'created': '2021-07-28 06:57:46.000000000', 'files': ['doc/source/_images/etsi_vnf_scaling.pu', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_user_data.pu', 'doc/source/_images/etsi_containerized_vnf_usage_guide.png', 'doc/source/_images/etsi_vnf_scaling.png', 'doc/source/user/etsi_vnf_deployment_as_vm_with_tosca.rst', 'doc/source/_images/etsi_cnf_healing.pu', 'doc/source/_images/etsi_containerized_vnf_usage_guide.pu', 'doc/source/user/etsi_cnf_scaling.rst', 'doc/source/user/etsi_containerized_vnf_usage_guide.rst', 'doc/source/_images/etsi_vnf_healing.pu', 'doc/source/user/etsi_vnf_scaling.rst', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_tosca.png', 'doc/source/_images/etsi_cnf_healing.png', 'doc/source/user/etsi_vnf_deployment_as_vm_with_user_data.rst', 'doc/source/user/etsi_cnf_healing.rst', 'doc/source/_images/etsi_vnf_healing.png', 'doc/source/_images/etsi_cnf_scaling.png', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_user_data.png', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_tosca.pu', 'doc/source/user/etsi_vnf_healing.rst', 'doc/source/_images/etsi_cnf_scaling.pu'], 'web_link': 'https://opendev.org/openstack/tacker/commit/05bce7441efd2bec7b458f2b90faea15b75937da', 'message': ""Add LCM op figures to User Guide\n\nThe current document doesn't have an overview of VNF LCM operations,\ne.g., Deployment, Scaling and Healing.  For example, the VNF scaling\ncreates/changes VMs with OpenStack Heat API and users have to confirm\nresults of an operation with `openstack stack` command, but the\nrelationship between OpenStack Tacker and OpenStack Heat is not\nexplicitly described.\n\nFor ease of understanding, added diagrams and brief explanation of the\nLCM operations listed below.\n\n- ETSI NFV-SOL VNF Deployment as VM with TOSCA\n- ETSI NFV-SOL VNF Deployment as VM with LCM operation user data\n- ETSI NFV-SOL CNF (Containerized VNF) Deployment\n- ETSI NFV-SOL VNF Healing\n- ETSI NFV-SOL VNF Scaling\n- ETSI NFV-SOL CNF Healing\n- ETSI NFV-SOL CNF Scaling\n\nChange-Id: I3ddf9e5ec68c0e84ccc9df4fea9ee274562a3e88\n""}]",2,800359,05bce7441efd2bec7b458f2b90faea15b75937da,20,7,3,33455,,,0,"Add LCM op figures to User Guide

The current document doesn't have an overview of VNF LCM operations,
e.g., Deployment, Scaling and Healing.  For example, the VNF scaling
creates/changes VMs with OpenStack Heat API and users have to confirm
results of an operation with `openstack stack` command, but the
relationship between OpenStack Tacker and OpenStack Heat is not
explicitly described.

For ease of understanding, added diagrams and brief explanation of the
LCM operations listed below.

- ETSI NFV-SOL VNF Deployment as VM with TOSCA
- ETSI NFV-SOL VNF Deployment as VM with LCM operation user data
- ETSI NFV-SOL CNF (Containerized VNF) Deployment
- ETSI NFV-SOL VNF Healing
- ETSI NFV-SOL VNF Scaling
- ETSI NFV-SOL CNF Healing
- ETSI NFV-SOL CNF Scaling

Change-Id: I3ddf9e5ec68c0e84ccc9df4fea9ee274562a3e88
",git fetch https://review.opendev.org/openstack/tacker refs/changes/59/800359/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/_images/etsi_vnf_scaling.pu', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_user_data.pu', 'doc/source/_images/etsi_containerized_vnf_usage_guide.png', 'doc/source/_images/etsi_vnf_scaling.png', 'doc/source/user/etsi_vnf_deployment_as_vm_with_tosca.rst', 'doc/source/_images/etsi_cnf_healing.pu', 'doc/source/_images/etsi_containerized_vnf_usage_guide.pu', 'doc/source/user/etsi_cnf_scaling.rst', 'doc/source/user/etsi_containerized_vnf_usage_guide.rst', 'doc/source/_images/etsi_vnf_healing.pu', 'doc/source/user/etsi_vnf_scaling.rst', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_tosca.png', 'doc/source/_images/etsi_cnf_healing.png', 'doc/source/user/etsi_vnf_deployment_as_vm_with_user_data.rst', 'doc/source/user/etsi_cnf_healing.rst', 'doc/source/_images/etsi_vnf_healing.png', 'doc/source/_images/etsi_cnf_scaling.png', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_user_data.png', 'doc/source/_images/etsi_vnf_deployment_as_vm_with_tosca.pu', 'doc/source/user/etsi_vnf_healing.rst', 'doc/source/_images/etsi_cnf_scaling.pu']",21,779a2b3d7cd6f309579f884b672a84a2f612cb09,revise-doc,"@startuml component ""tacker-client"" as client frame ""tacker"" { component ""tacker-server"" { component ""server"" as serv } component ""tacker-conductor"" { component ""conductor"" as cond component ""Kubernetes\ninfra-driver"" as infra } } node ""Kubernetes\nCluster\n(Master)"" as k8s_m cloud ""Hardware Resources"" as hw { node ""Kubernetes\nCluster\n(Worker)"" as k8s_w { node ""Pod"" as ins1 node ""Pod"" as ins2 } } '# Relationships client -right-> serv: 1. Request scale VNF serv --> cond cond --> infra infra -right-> k8s_m: 2. Call Kubernetes\n API k8s_m -right-> ins1: 3. Change the\n number of\n Pods ins1 -[hidden]right-> ins2 @enduml ",,447,0
openstack%2Ftacker~master~I19fe424d8d6d9b01248daa2782dc69f26f1b0fe6,openstack/tacker,master,I19fe424d8d6d9b01248daa2782dc69f26f1b0fe6,Update hyperlinks of ETSI NFV types definitions,MERGED,2021-06-02 01:59:16.000000000,2021-08-01 15:18:54.000000000,2021-08-01 15:17:36.000000000,"[{'_account_id': 16237}, {'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 31857}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-06-02 01:59:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f16d88cc60fd8b5b52767d10667e883631155af2', 'message': ""Update hyperlinks of ETSI NFV types definition files\n\nThe hyperlinks in 'VNF Descriptor (VNFD) based on ETSI NFV-SOL001' point to the latest types definition files that are not supported by the latest tacker.\nChange the hyperlinks to point the latest of the types definition files that are supported by the latest tacker.\n\nSigned-off-by: Hiromu Asahina <hiromu.asahina.az@hco.ntt.co.jp>\nChange-Id: I19fe424d8d6d9b01248daa2782dc69f26f1b0fe6\n""}, {'number': 2, 'created': '2021-06-02 05:51:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/a329091c11984029ead92624591d19e6d67da9e0', 'message': ""Update hyperlinks of ETSI NFV types definition files\n\nThe hyperlinks in the current 'VNF Descriptor (VNFD) based on ETSI NFV-SOL001' document point to the ETSI NFV SOL types definitions files version 3.3.1 where tosca_definitions_version is tosca_simple_yaml_1_3.\nHowever, the current tacker doesn't support ver 3.x of ETSI NFV SOL and tosca_simple_yaml_1_3.\n\nChange the hyperlinks to point to the ETSI NFV SOL types definitions files version 2.6.1 where tosca_definitions_version is tosca_simple_yaml_1_2, i.e., the latest of the types definitions that are supported by the current tacker.\n\nSigned-off-by: Hiromu Asahina <hiromu.asahina.az@hco.ntt.co.jp>\nChange-Id: I19fe424d8d6d9b01248daa2782dc69f26f1b0fe6\n""}, {'number': 3, 'created': '2021-06-02 06:34:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/d1a480ef27d2f590ca061ddfb6bd9eb93a83b366', 'message': ""Update hyperlinks of ETSI NFV types definitions\n\nThe hyperlinks in the current 'VNF Descriptor (VNFD) based on ETSI\nNFV-SOL001' document point to the ETSI NFV SOL types definitions files\nversion 3.3.1 where tosca_definitions_version is tosca_simple_yaml_1_3.\nHowever, the current tacker doesn't support ver 3.x of ETSI NFV SOL and\ntosca_simple_yaml_1_3.\n\nChange the hyperlinks to point to the ETSI NFV SOL types definitions\nfiles version 2.6.1 where tosca_definitions_version is\ntosca_simple_yaml_1_2, i.e., the latest of the types definitions that\nare supported by the current tacker.\n\nSigned-off-by: Hiromu Asahina <hiromu.asahina.az@hco.ntt.co.jp>\nChange-Id: I19fe424d8d6d9b01248daa2782dc69f26f1b0fe6\n""}, {'number': 4, 'created': '2021-06-02 06:36:43.000000000', 'files': ['doc/source/user/vnfd-sol001.rst'], 'web_link': 'https://opendev.org/openstack/tacker/commit/982af3a34cd04af7a289ea6a862d64c35d1b8249', 'message': ""Update hyperlinks of ETSI NFV types definitions\n\nThe hyperlinks in the current 'VNF Descriptor (VNFD) based on ETSI\nNFV-SOL001' document point to the ETSI NFV SOL types definitions files\nversion 3.3.1 where tosca_definitions_version is tosca_simple_yaml_1_3.\nHowever, the current tacker doesn't support ver 3.x of ETSI NFV SOL and\ntosca_simple_yaml_1_3.\n\nChange the hyperlinks to point to the ETSI NFV SOL types definitions\nfiles version 2.6.1 where tosca_definitions_version is\ntosca_simple_yaml_1_2, i.e., the latest of the types definitions that\nare supported by the current tacker.\n\nSigned-off-by: Hiromu Asahina <hiromu.asahina.az@hco.ntt.co.jp>\nChange-Id: I19fe424d8d6d9b01248daa2782dc69f26f1b0fe6\n""}]",2,794078,982af3a34cd04af7a289ea6a862d64c35d1b8249,25,7,4,33455,,,0,"Update hyperlinks of ETSI NFV types definitions

The hyperlinks in the current 'VNF Descriptor (VNFD) based on ETSI
NFV-SOL001' document point to the ETSI NFV SOL types definitions files
version 3.3.1 where tosca_definitions_version is tosca_simple_yaml_1_3.
However, the current tacker doesn't support ver 3.x of ETSI NFV SOL and
tosca_simple_yaml_1_3.

Change the hyperlinks to point to the ETSI NFV SOL types definitions
files version 2.6.1 where tosca_definitions_version is
tosca_simple_yaml_1_2, i.e., the latest of the types definitions that
are supported by the current tacker.

Signed-off-by: Hiromu Asahina <hiromu.asahina.az@hco.ntt.co.jp>
Change-Id: I19fe424d8d6d9b01248daa2782dc69f26f1b0fe6
",git fetch https://review.opendev.org/openstack/tacker refs/changes/78/794078/3 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/user/vnfd-sol001.rst'],1,f16d88cc60fd8b5b52767d10667e883631155af2,docs,.. _etsi_nfv_sol001_common_types.yaml : https://forge.etsi.org/rep/nfv/SOL001/raw/v2.6.1/etsi_nfv_sol001_common_types.yaml .. _etsi_nfv_sol001_vnfd_types.yaml : https://forge.etsi.org/rep/nfv/SOL001/raw/v2.6.1/etsi_nfv_sol001_vnfd_types.yaml,.. _etsi_nfv_sol001_common_types.yaml : https://forge.etsi.org/rep/nfv/SOL001/raw/master/etsi_nfv_sol001_common_types.yaml .. _etsi_nfv_sol001_vnfd_types.yaml : https://forge.etsi.org/rep/nfv/SOL001/raw/master/etsi_nfv_sol001_vnfd_types.yaml,2,2
openstack%2Ftacker~master~Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b,openstack/tacker,master,Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b,Fix Patch Individual VNF instance,MERGED,2021-06-07 04:39:25.000000000,2021-08-01 15:05:48.000000000,2021-08-01 15:04:23.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 31857}, {'_account_id': 32102}, {'_account_id': 33292}, {'_account_id': 33455}]","[{'number': 1, 'created': '2021-06-07 04:39:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/dd292cdff8684b92ed70c8e910b42298d0c3ed6e', 'message': 'Fix Patch Individual VNF instance\n\nIn the condition when the vnf instance hasn\'t been instantiated,\nan error occurs when Patching Individual VNF instance.\n\n1. Fix the exception caused by the NULL value of vnf\'s\nupdated_at field.\n2. Fix the exception happened when one of its attributes is not\nexisted in method to_dict in Class VnfInfoModifications.\n3. Fix the problem that vnfInstanceName and vnfInstanceDescription\nare not displayed in notification when vnfdId is included in the\nfields which need modified.\n4. In the API reference, modify the method of modifying an\n""Individual VNF instance"" resource from POST to PATCH.\n\nCloses-Bug: #1915100\nChange-Id: Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b\n'}, {'number': 2, 'created': '2021-06-28 04:58:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/e346986ae26727734eafd2d162798cd05603bfb1', 'message': 'Fix Patch Individual VNF instance\n\nIn the condition when the vnf instance hasn\'t been instantiated,\nan error occurs when Patching Individual VNF instance.\n\n1. Fix the exception caused by the NULL value of vnf\'s\nupdated_at field.\n2. Fix the exception happened when one of its attributes is not\nexisted in method to_dict in Class VnfInfoModifications.\n3. Fix the problem that vnfInstanceName and vnfInstanceDescription\nare not displayed in notification when vnfdId is included in the\nfields which need modified.\n4. In the API reference, modify the method of modifying an\n""Individual VNF instance"" resource from POST to PATCH.\n\nCloses-Bug: #1915100\nChange-Id: Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b\n'}, {'number': 3, 'created': '2021-07-06 03:01:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/79ba4f3b3556ceaaf996debbf57117aafcf21845', 'message': 'Fix Patch Individual VNF instance\n\nIn the condition when the vnf instance hasn\'t been instantiated,\nan error occurs when Patching Individual VNF instance.\n\n1. Fix the exception caused by the NULL value of vnf\'s\nupdated_at field.\n2. Fix the exception happened when one of its attributes is not\nexisted in method to_dict in Class VnfInfoModifications.\n3. Fix the problem that vnfInstanceName and vnfInstanceDescription\nare not displayed in notification when vnfdId is included in the\nfields which need modified.\n4. In the API reference, modify the method of modifying an\n""Individual VNF instance"" resource from POST to PATCH.\n\nCloses-Bug: #1915100\nChange-Id: Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b\n'}, {'number': 4, 'created': '2021-07-12 02:35:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/d58d4df4c2638bd0c7fb3112d58db98f3f0ba426', 'message': 'Fix Patch Individual VNF instance\n\nIn the condition when the vnf instance hasn\'t been instantiated,\nan error occurs when Patching Individual VNF instance.\n\n1. Fix the exception caused by the NULL value of vnf\'s\nupdated_at field.\n2. Fix the exception happened when one of its attributes is not\nexisted in method to_dict in Class VnfInfoModifications.\n3. Fix the problem that vnfInstanceName and vnfInstanceDescription\nare not displayed in notification when vnfdId is included in the\nfields which need modified.\n4. In the API reference, modify the method of modifying an\n""Individual VNF instance"" resource from POST to PATCH.\n\nCloses-Bug: #1915100\nChange-Id: Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b\n'}, {'number': 5, 'created': '2021-07-13 02:04:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/fa67cbcc8ba9baa01729d87f07c7a5c54d6765cc', 'message': 'Fix Patch Individual VNF instance\n\nIn the condition when the vnf instance hasn\'t been instantiated,\nan error occurs when Patching Individual VNF instance.\n\n1. Fix the exception caused by the NULL value of vnf\'s\nupdated_at field.\n2. Fix the exception happened when one of its attributes is not\nexisted in method to_dict in Class VnfInfoModifications.\n3. Fix the problem that vnfInstanceName and vnfInstanceDescription\nare not displayed in notification when vnfdId is included in the\nfields which need modified.\n4. In the API reference, modify the method of modifying an\n""Individual VNF instance"" resource from POST to PATCH.\n\nCloses-Bug: #1915100\nChange-Id: Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b\n'}, {'number': 6, 'created': '2021-07-15 02:30:41.000000000', 'files': ['api-ref/source/v1/vnflcm.inc', 'tacker/tests/unit/conductor/test_conductor_server.py', 'tacker/tests/unit/vnflcm/fakes.py', 'tacker/api/vnflcm/v1/controller.py', 'tacker/objects/vnf_lcm_op_occs.py', 'tacker/conductor/conductor_server.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/a9cb38545262b9b793b81e7f409dc73fae072430', 'message': 'Fix Patch Individual VNF instance\n\nIn the condition when the vnf instance hasn\'t been instantiated,\nan error occurs when Patching Individual VNF instance.\n\n1. Fix the exception caused by the NULL value of vnf\'s\nupdated_at field.\n2. Fix the exception happened when one of its attributes is not\nexisted in method to_dict in Class VnfInfoModifications.\n3. Fix the problem that vnfInstanceName and vnfInstanceDescription\nare not displayed in notification when vnfdId is included in the\nfields which need modified.\n4. In the API reference, modify the method of modifying an\n""Individual VNF instance"" resource from POST to PATCH.\n\nCloses-Bug: #1915100\nChange-Id: Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b\n'}]",23,795021,a9cb38545262b9b793b81e7f409dc73fae072430,37,8,6,33492,,,0,"Fix Patch Individual VNF instance

In the condition when the vnf instance hasn't been instantiated,
an error occurs when Patching Individual VNF instance.

1. Fix the exception caused by the NULL value of vnf's
updated_at field.
2. Fix the exception happened when one of its attributes is not
existed in method to_dict in Class VnfInfoModifications.
3. Fix the problem that vnfInstanceName and vnfInstanceDescription
are not displayed in notification when vnfdId is included in the
fields which need modified.
4. In the API reference, modify the method of modifying an
""Individual VNF instance"" resource from POST to PATCH.

Closes-Bug: #1915100
Change-Id: Iddb5bb540b817d4fd24e2c7c12f885bd39f8662b
",git fetch https://review.opendev.org/openstack/tacker refs/changes/21/795021/1 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/v1/vnflcm.inc', 'tacker/tests/unit/conductor/test_conductor_server.py', 'tacker/tests/unit/vnflcm/fakes.py', 'tacker/api/vnflcm/v1/controller.py', 'tacker/objects/vnf_lcm_op_occs.py', 'tacker/conductor/conductor_server.py']",6,dd292cdff8684b92ed70c8e910b42298d0c3ed6e,bug/1915100, lcm_op_obj.operation_params = vnf_lcm_opoccs.get('operationParams') if body_data.get('vnf_instance_name'): if body_data.get('vnf_instance_description'):, lcm_op_obj.operationParams = vnf_lcm_opoccs.get('operationParams'),14,25
openstack%2Ftacker-specs~master~I19d63d48c47eacd24552eaa47d63abc3ce6a22bd,openstack/tacker-specs,master,I19d63d48c47eacd24552eaa47d63abc3ce6a22bd,Support CIR for k8s cluster with MgmtDriver,MERGED,2021-04-16 06:56:43.000000000,2021-08-01 14:55:19.000000000,2021-08-01 14:54:10.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}, {'_account_id': 31821}, {'_account_id': 31857}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-04-16 06:56:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker-specs/commit/bad70178a676ca7225c05846363ef86d30e0c914', 'message': 'Support CIR for k8s cluster with MgmtDriver\n\nThe Tacker Wallaby release supports spec ""Support deploying Kubernetes\ncluster with MgmtDriver"".\nDeployed Kubernetes cluster supports only Images registered in\nthe Docker public registry but doesn\'t support Images in Docker\nprivate registry.\nThis specification adds functionality to enable the use of Docker\nprivate registry images in a Kubernetes Cluster environment.\nThis specification assumes spec ""Support deploying Kubernetes cluster\nwith MgmtDriver"".\n\nImplements: blueprint cir-k8s-cluster\nChange-Id: I19d63d48c47eacd24552eaa47d63abc3ce6a22bd\n'}, {'number': 2, 'created': '2021-07-19 08:31:25.000000000', 'files': ['specs/xena/cir-k8s-cluster.rst'], 'web_link': 'https://opendev.org/openstack/tacker-specs/commit/d3848c733908e5faef912d8a26e6b7d8d4b59789', 'message': 'Support CIR for k8s cluster with MgmtDriver\n\nThe Tacker Wallaby release supports spec ""Support deploying Kubernetes\ncluster with MgmtDriver"".\nDeployed Kubernetes cluster supports only Images registered in\nthe Docker public registry but doesn\'t support Images in Docker\nprivate registry.\nThis specification adds functionality to enable the use of Docker\nprivate registry images in a Kubernetes Cluster environment.\nThis specification assumes spec ""Support deploying Kubernetes cluster\nwith MgmtDriver"".\n\nImplements: blueprint cir-k8s-cluster\nChange-Id: I19d63d48c47eacd24552eaa47d63abc3ce6a22bd\n'}]",2,786579,d3848c733908e5faef912d8a26e6b7d8d4b59789,18,8,2,33292,,,0,"Support CIR for k8s cluster with MgmtDriver

The Tacker Wallaby release supports spec ""Support deploying Kubernetes
cluster with MgmtDriver"".
Deployed Kubernetes cluster supports only Images registered in
the Docker public registry but doesn't support Images in Docker
private registry.
This specification adds functionality to enable the use of Docker
private registry images in a Kubernetes Cluster environment.
This specification assumes spec ""Support deploying Kubernetes cluster
with MgmtDriver"".

Implements: blueprint cir-k8s-cluster
Change-Id: I19d63d48c47eacd24552eaa47d63abc3ce6a22bd
",git fetch https://review.opendev.org/openstack/tacker-specs refs/changes/79/786579/2 && git format-patch -1 --stdout FETCH_HEAD,['specs/xena/cir-k8s-cluster.rst'],1,bad70178a676ca7225c05846363ef86d30e0c914,change-786579-1,"====================================================================== Support Docker private registry for Kubernetes cluster with MgmtDriver ====================================================================== https://blueprints.launchpad.net/tacker/+spec/cir-k8s-cluster Problem description =================== The Tacker Wallaby release supports spec ""Support deploying Kubernetes cluster with MgmtDriver"" [#SPEC-K8S-CLUSTER]_. Deployed Kubernetes cluster supports only Images registered in the Docker public registry but doesn't support Images in Docker private registry. This specification adds functionality to enable the use of Docker private registry images in a Kubernetes Cluster environment. This specification assumes spec ""Support deploying Kubernetes cluster with MgmtDriver"" [#SPEC-K8S-CLUSTER]_. Proposed change =============== The following operations are supported: #. Deploy Docker private registry VNF for Kubernetes cluster before deploying Kubernetes cluster VNF. #. Deploy Kubernetes cluster VNF that can support both the Docker private registry created above and any others created outside of Tacker. The LCM operations for Docker private registry VNF requires the following changes: + Instantiate operation with MgmtDriver to install Docker private registry. + Heal operation with MgmtDriver to re-install Docker private registry. .. note:: + Scale operation is not supported. + Terminate operation is supported. And there is no change. The LCM operations for Kubernetes cluster VNF requires the following changes: + Instantiate operation for Kubernetes cluster with MgmtDriver [#SPEC-K8S-CLUSTER]_. Changes: MgmtDriver configures connections to Docker private registries on newly created all Master/Worker VMs. + Scale-out operation for Kubernetes cluster Worker-nodes with MgmtDriver [#SPEC-K8S-SCALE]_. Changes: MgmtDriver configures connections to Docker private registries on newly created Worker VMs. + Heal operation for the entire Kubernetes cluster with MgmtDriver [#SPEC-K8S-HEAL]_. Changes: MgmtDriver configures connections to Docker private registries on the created all Master/Worker VMs. + Heal operation for a single node (Master/Worker) in Kubernetes cluster with MgmtDriver [#SPEC-K8S-HEAL]_. Changes: MgmtDriver configures connections to Docker private registries on the created Master/Worker VM. Deploy Docker private registry VNF for Kubernetes cluster --------------------------------------------------------- Deploy the Docker private registry for Kubernetes cluster as a VNF. The diagram below shows creating VM and set up Docker private registry: :: +--------------+ +---------+ | Docker Image | | VNFD | | (Optional) | | | +------------+-+ +-+-------+ | | v v +---------------+ +----------+ | Instantiation | | | | Request with | | CSAR | | Additional | | | | Params | +----+-----+ +-+-------------+ | | 1. Instantiate VNF | | +-----+----------+-------------+ | v v VNFM | | +-------------------+ | | | Tacker-server | | | +-------+-----------+ | | | | | v | +--------------------------+ 4. Run Private | +------------------------+ | | | registry | | | | | +--------------------+ | container | | +--------------+ | | | | Docker container |<-+-----------------+--+----+ | | | | | (Private registry) | | | | | MgmtDriver | | | | +--------------------+ | 3. Docker | | | | | | | +--------------------+ | Installation | | | | | | | | Docker |<-+-----------------+--+----+ | | | | +--------------------+ | | | +--------------+ | | | | | | +--------------+ | | | | 2. Create VM | | | OpenStack | | | | |<----------------+--+----+ Infra Driver | | | | | | | +--------------+ | | | VM | | | | | +--------------------------+ | | Tacker-conductor | | +--------------------------+ | +------------------------+ | | Hardware Resources | | | +--------------------------+ +------------------------------+ VNFD for Docker private registry VNF ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ One VDU and one or more CPs, and the interface definitions of ``instantiate_end`` and ``heal_end`` are required in VNFD as the following sample: .. code-block:: yaml node_templates: VNF: ... interfaces: Vnflcm: ... instantiate_end: implementation: mgmt-drivers-private-registry heal_end: implementation: mgmt-drivers-private-registry artifacts: mgmt-drivers-private-registry: description: Management driver for Docker private registry type: tosca.artifacts.Implementation.Python file: Scripts/private_registry_mgmt.py PrivateRegistryVDU: type: tosca.nodes.nfv.Vdu.Compute ... CP1: type: tosca.nodes.nfv.VduCp ... requirements: - virtual_binding: PrivateRegistryVDU ... Request parameters for Instantiate Docker private registry VNF operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ User gives ``InstantiateVnfRequest`` data type defined in ETSI NFV-SOL003 v2.6.1 [#NFV-SOL003]_ as request parameters. It is basically the same parameters as described in the spec ""REST API for VNF based on ETSI NFV-SOL specification"" [#SPEC-SOL-REST-API]_. User can use the following ``additionalParams``: +-------------------------------------+-------------+-------------------------------------------------------------+ | Attribute name | Cardinality | Parameter description | +=====================================+=============+=============================================================+ | private_registry_installation_param | 1 | Configuration for private registry installation. | +-------------------------------------+-------------+-------------------------------------------------------------+ | >ssh_cp_name | 1 | CP name that MgmtDriver uses when SSH/SFTP access to | | | | the Private registry VM. | +-------------------------------------+-------------+-------------------------------------------------------------+ | >ssh_username | 1 | User name that MgmtDriver uses when SSH/SFTP access to | | | | the Private registry VM. | +-------------------------------------+-------------+-------------------------------------------------------------+ | >ssh_password | 1 | User password that MgmtDriver uses when SSH/SFTP access to | | | | the Private registry VM. | +-------------------------------------+-------------+-------------------------------------------------------------+ | >image_path | 0..1 | Optional. Path of the Docker image file in the VNF Package | | | | for the Private registry container to run on Docker. | | | | If this attribute is omitted, the image for the Private | | | | registry container is pulled from the Docker public | | | | registry. | | | | If the Private registry VM is unable to connect to | | | | the Docker public registry, put the file created using | | | | ""docker save"" command into the VNF Package and specify | | | | the path of the file in this attribute. | +-------------------------------------+-------------+-------------------------------------------------------------+ | >port_no | 0..1 | Optional. The default value is 5000. | | | | TCP port number that provides the Private registry service. | +-------------------------------------+-------------+-------------------------------------------------------------+ The following is a sample of body provided in the Instantiate VNF request `POST /vnflcm/v1/vnf_instances/{vnfInstanceId}/instantiate`: .. code-block:: json { ""flavourId"": ""simple"", ""extVirtualLinks"": [ { ""id"": ""net0"", ""resourceId"": ""f0c82461-36b5-4d86-8322-b0bc19cda65f"", ""extCps"": [ { ""cpdId"": ""CP1"", ""cpConfig"": [ { ""cpProtocolData"": [ { ""layerProtocol"": ""IP_OVER_ETHERNET"" } ] } ] } ] } ], ""additionalParams"": { ""private_registry_installation_param"": { ""ssh_cp_name"": ""CP1"", ""ssh_username"": ""ubuntu"", ""ssh_password"": ""ubuntu"", ""image_path"": ""Files/images/private_registry.tar"" } }, ""vimConnectionInfo"": [ { ""id"": ""8a3adb69-0784-43c7-833e-aab0b6ab4470"", ""vimId"": ""8d8373fe-6977-49ff-83ac-7756572ed186"", ""vimType"": ""openstack"" } ] } Sequence for Instantiate Docker private registry VNF operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ .. seqdiag:: seqdiag { node_width = 80; edge_length = 100; ""Client"" ""Tacker-server"" ""Tacker-conductor"" ""VnfLcmDriver"" ""OpenStackInfraDriver"" ""Heat"" ""MgmtDriver"" ""VnfInstance(Tacker DB)"" ""RemoteCommandExecutor"" ""SFTPClient"" Client -> ""Tacker-server"" [label = ""POST /vnf_instances/{vnfInstanceId}/instantiate""]; Client <-- ""Tacker-server"" [label = ""Response 202 Accepted""]; ""Tacker-server"" -> ""Tacker-conductor"" [label = ""trigger asynchronous task""]; ""Tacker-conductor"" -> ""VnfLcmDriver"" [label = ""execute VnfLcmDriver""]; ""VnfLcmDriver"" -> ""OpenStackInfraDriver"" [label = ""execute OpenStackInfraDriver""]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""create stack""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = ""return stack id""]; ""VnfLcmDriver"" <-- ""OpenStackInfraDriver"" [label = ""return instance_id""]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""instantiate_end""]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get stack id""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""Heat"" [label = ""get SSH/SFTP IP address using stack id""]; ""MgmtDriver"" <-- ""Heat"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""install Docker on the VM""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""SFTPClient"" [label = ""transfer a Docker image file to the VM if specified by request parameter""]; ""MgmtDriver"" <-- ""SFTPClient"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""run Private registry container on Docker""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""Tacker-conductor"" <-- ""VnfLcmDriver"" [label = """"]; } The procedure consists of the following steps as illustrated in above sequence: #. Client sends a POST Instantiate VNF request. #. It is basically the same sequence as described in the ""2) Flow of Instantiation of a VNF instance"" chapter of spec ""REST API for VNF based on ETSI NFV-SOL specification"" [#SPEC-SOL-REST-API]_, except for the MgmtDriver. #. The following processes are performed in ``instantiate_end``. #. MgmtDriver gets IP address of Private registry VM from Heat. #. MgmtDriver installs Docker on Private registry VM. #. MgmtDriver transfers a Docker image file to Private registry VM if specified by request parameter ""image_path"". #. MgmtDriver uses a Docker image to run Private registry container on Docker. MgmtDriver uses a command like the following to start the Private registry container: .. code-block:: sudo docker run -d -p 5000:5000 -v /home/ubuntu/registry:/var/lib/registry --restart=always --name private_registry registry:latest .. note:: The Docker image name for the Private registry container is ``registry``. If the request parameter ""image_path"" is specified, ""docker load"" command is used to load the ``registry`` image from the transferred image file. If the request parameter ""image_path"" is omitted, ""docker pull"" command is used to pull the ``registry`` image from the Docker public registry. .. note:: The above sample command assumes that the OS of the Private registry VM is Ubuntu 20.04. Heal operation for Docker private registry VNF with MgmtDriver -------------------------------------------------------------- The diagram below shows the Heal VNF operation for Docker private registry VNF: :: +--------------+ | Heal Request | +-+------------+ | 1. Heal VNF | +-----+------------------------+ | v VNFM | | +-------------------+ | | | Tacker-server | | | +-------+-----------+ | | | | +--------------------------+ | v | | | 5. Run Private | +------------------------+ | | | registry | | | | | +--------------------+ | container | | +--------------+ | | | | Docker container |<-+------------------+--+----+ | | | | | (Private registry) | | | | | MgmtDriver | | | | +--------------------+ | 4. Docker | | | | | | | +--------------------+ | Installation | | | | | | | | Docker |<-+------------------+--+----+ | | | | +--------------------+ | | | +--------------+ | | | | 3. Create new VM | | +--------------+ | | | VM |<-----------------+--+----+ OpenStack | | | +--------------------------+ | | | Infra Driver | | | 2. Delete +--+--+----+ | | | +--------------------------+ failed VM | | | +--------------+ | | | VM |<--------------+ | | | | +--------------------------+ | | Tacker-conductor | | +--------------------------+ | +------------------------+ | | Hardware Resources | | | +--------------------------+ +------------------------------+ VNFD for Heal operation ^^^^^^^^^^^^^^^^^^^^^^^ Same as ""VNFD for Docker private registry VNF"" chapter. Request parameters for Heal Docker private registry VNF operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Same parameters as described in the spec ""REST API for VNF based on ETSI NFV-SOL specification"" [#SPEC-SOL-REST-API]_. Sequence for Heal Docker private registry VNF operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ .. seqdiag:: seqdiag { node_width = 80; edge_length = 100; ""Client"" ""Tacker-server"" ""Tacker-conductor"" ""VnfLcmDriver"" ""OpenStackInfraDriver"" ""Heat"" ""MgmtDriver"" ""VnfInstance(Tacker DB)"" ""RemoteCommandExecutor"" ""SFTPClient"" Client -> ""Tacker-server"" [label = ""POST /vnf_instances/{vnfInstanceId}/heal""]; Client <-- ""Tacker-server"" [label = ""Response 202 Accepted""]; ""Tacker-server"" -> ""Tacker-conductor"" [label = ""trigger asynchronous task""]; ""Tacker-conductor"" -> ""VnfLcmDriver"" [label = ""execute VnfLcmDriver""]; ""VnfLcmDriver"" -> ""OpenStackInfraDriver"" [label = ""execute OpenStackInfraDriver""]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""resource mark unhealthy""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""update stack""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""VnfLcmDriver"" <-- ""OpenStackInfraDriver"" [label = """"]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""heal_end""]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get stack id""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""Heat"" [label = ""get SSH/SFTP IP address using stack id""]; ""MgmtDriver"" <-- ""Heat"" [label = """"]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get additionalParams of Instantiate VNF request""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""install Docker on the VM""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""SFTPClient"" [label = ""transfer a Docker image file to the VM if specified by Instantiate VNF request parameter""]; ""MgmtDriver"" <-- ""SFTPClient"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""run Private registry container on Docker""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""Tacker-conductor"" <-- ""VnfLcmDriver"" [label = """"]; } The procedure consists of the following steps as illustrated in above sequence: #. Client sends a POST Heal VNF request. #. It is basically the same sequence as described in the ""3) Flow of Heal of a VNF instance"" chapter of spec ""REST API for VNF based on ETSI NFV-SOL specification"" [#SPEC-SOL-REST-API]_, except for the MgmtDriver. #. The following processes are performed in ``heal_end``. #. MgmtDriver gets IP address of the new Private registry VM from Heat. #. MgmtDriver gets ``additionalParams`` of Instantiate VNF request from VnfInstance(Tacker DB). #. MgmtDriver installs Docker on the new Private registry VM. #. MgmtDriver transfers a Docker image file to the new Private registry VM if specified by Instantiate VNF request parameter ""image_path"". #. MgmtDriver uses a Docker image to run the Private registry container on Docker. Deploy Kubernetes cluster VNF that can connect to Docker private registries --------------------------------------------------------------------------- Add the function to connect to Docker private registries based on spec ""Support deployment Kubernetes cluster with MgmtDriver"" [#SPEC-K8S-CLUSTER]_. The diagram below shows creating Kubernetes cluster and configure connections to Docker private registries: :: +---------+ +---------+ | Cluster | | | | Install | | VNFD | | Script | | | +----------------+ +-------+-+ +-+-------+ | CA certificate +--+ | | +----------------+ | v v +---------------+ | +----------+ +---------------+ | LCM operation | +--->| | | Instantiation | | UserData +------>| CSAR | | Request with | +---------------+ | | | Additional | +------------+ +--->| | | Params | | Heat | | +----+-----+ +-+-------------+ | Template +--+ | | 1. Instantiate VNF | (Base HOT) | | | +------------+ +-----+----------+-------------+ | v v VNFM | | +------------------+ | | | Tacker-server | | | +-------+----------+ | 3. Kubernetes Cluster | | | Installation | v | 4. Configure connections | +------------------------+ | to Docker private registries | | +--------------+ | | +-------------+--------------------+--+----+ MgmtDriver | | | | | | | +--------------+ | | +-------+-------------+--------+ | | | | | | | | | | | | | +----+-----+ +----+-----+ | | | | | | | v | | v | | | | +--------------+ | | | | +------+ | | +------+ | | | | | OpenStack | | | | | |Worker| | | |Master| |<-+-----------+--+----+ Infra Driver | | | | | +------+ | | +------+ | | 2. Create | | +--------------+ | | | | VM | | VM | | VMs | | | | | +----------+ +----------+ | | | | | +------------------------------+ | | Tacker-conductor | | +------------------------------+ | +------------------------+ | | Hardware Resources | | | +------------------------------+ +------------------------------+ VNFD for Kubernetes cluster VNF ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ No change from user guide ""How to use Mgmt Driver for deploying Kubernetes Cluster"" [#USER-GUIDE-K8S-CLUSTER]_. Request parameters with Docker private registries ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Add the following attributes to ``additionalParams`` described in the user guide ""How to use Mgmt Driver for deploying Kubernetes Cluster"" [#USER-GUIDE-K8S-CLUSTER]_. +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | Attribute name | Cardinality | Parameter description | +===================================+=============+=====================================================================================+ | k8s_cluster_installation_param | 1 | Configuration for Kubernetes cluster installation. | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | >private_registry_connection_info | 0..N | Optional. Configuring to connect to Docker private | | | | registries. | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | >>connection_type | 1 | | Type of connection. Set one of the following values. | | | | | 0 : HTTP, 1 : HTTPS | | | | | Set to 0 if connecting to the deployed Docker private registry VNF | | | | or a Docker private registry outside of Tacker over HTTP. | | | | | Set to 1 if connecting to a Docker private registry outside of Tacker over HTTPS. | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | >>server | 1 | Server name of the Docker private registry to connect to. | | | | For example, ""192.168.0.10:5000"" | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | >>username | 0..1 | Optional. Username to log in to the Docker private registry. | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | >>password | 0..1 | Optional. Password to log in to the Docker private registry. | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | >>certificate_path | 0..1 | Optional. The path of the CA certificate file to use for | | | | HTTPS connection. | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ | >>hosts_string | 0..1 | Optional. String to add to /etc/hosts. | | | | The base Kubernetes cluster environment does not have a | | | | DNS server and must be added to /etc/hosts. | | | | The value consists of ""<IP address> <FQDN>"". | | | | For example, ""192.168.0.20 registry.example.com"" | +-----------------------------------+-------------+-------------------------------------------------------------------------------------+ The following is a sample of body provided in the Instantiate VNF request `POST /vnflcm/v1/vnf_instances/{vnfInstanceId}/instantiate`: .. code-block:: json { ""flavourId"": ""simple"", ""additionalParams"": { ""k8s_cluster_installation_param"": { ""script_path"": ""Scripts/install_k8s_cluster.sh"", ""vim_name"": ""kubernetes_vim"", ""master_node"": { ""aspect_id"": ""master_instance"", ""ssh_cp_name"": ""masterNode_CP1"", ""nic_cp_name"": ""masterNode_CP1"", ""username"": ""ubuntu"", ""password"": ""ubuntu"", ""pod_cidr"": ""192.168.3.0/24"", ""cluster_cidr"": ""10.199.187.0/24"", ""cluster_cp_name"": ""masterNode_CP1"" }, ""worker_node"": { ""aspect_id"": ""worker_instance"", ""ssh_cp_name"": ""workerNode_CP2"", ""nic_cp_name"": ""workerNode_CP2"", ""username"": ""ubuntu"", ""password"": ""ubuntu"" }, ""proxy"": { ""http_proxy"": ""http://user1:password1@host1:port1"", ""https_proxy"": ""https://user2:password2@host2:port2"", ""no_proxy"": ""192.168.246.0/24,10.0.0.1,registry.example.com"", ""k8s_node_cidr"": ""192.168.0.0/24"" }, ""private_registry_connection_info"": [ { ""connection_type"": ""0"", ""server"": ""192.168.0.10:5000"" }, { ""connection_type"": ""1"", ""server"": ""registry.example.com"", ""username"": ""user01"", ""password"": ""user01"", ""certificate_path"": ""Files/registries/ca.crt"", ""hosts_string"": ""192.168.0.20 registry.example.com"" } ] }, ""lcm-operation-user-data"": ""./UserData/k8s_cluster_user_data.py"", ""lcm-operation-user-data-class"": ""KubernetesClusterUserData"" }, ""extVirtualLinks"": [ { ""id"": ""net0_master"", ""resourceId"": ""f0c82461-36b5-4d86-8322-b0bc19cda65f"", ""extCps"": [ { ""cpdId"": ""masterNode_CP1"", ""cpConfig"": [ { ""cpProtocolData"": [ { ""layerProtocol"": ""IP_OVER_ETHERNET"" } ] } ] } ] }, { ""id"": ""net0_worker"", ""resourceId"": ""f0c82461-36b5-4d86-8322-b0bc19cda65f"", ""extCps"": [ { ""cpdId"": ""workerNode_CP2"", ""cpConfig"": [ { ""cpProtocolData"": [ { ""layerProtocol"": ""IP_OVER_ETHERNET"" } ] } ] } ] } ], ""vimConnectionInfo"": [ { ""id"": ""8a3adb69-0784-43c7-833e-aab0b6ab4470"", ""vimId"": ""8d8373fe-6977-49ff-83ac-7756572ed186"", ""vimType"": ""openstack"" } ] } Sequence for Instantiate Kubernetes cluster VNF with Docker private registries ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ .. seqdiag:: seqdiag { node_width = 80; edge_length = 100; ""Client"" ""Tacker-server"" ""Tacker-conductor"" ""VnfLcmDriver"" ""OpenStackInfraDriver"" ""Heat"" ""MgmtDriver"" ""VnfInstance(Tacker DB)"" ""RemoteCommandExecutor"" ""SFTPClient"" ""NfvoPlugin"" Client -> ""Tacker-server"" [label = ""POST /vnf_instances/{vnfInstanceId}/instantiate""]; Client <-- ""Tacker-server"" [label = ""Response 202 Accepted""]; ""Tacker-server"" -> ""Tacker-conductor"" [label = ""trigger asynchronous task""]; ""Tacker-conductor"" -> ""VnfLcmDriver"" [label = ""execute VnfLcmDriver""]; ""VnfLcmDriver"" -> ""OpenStackInfraDriver"" [label = ""execute OpenStackInfraDriver""]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""create stack""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = ""return stack id""]; ""VnfLcmDriver"" <-- ""OpenStackInfraDriver"" [label = ""return instance_id""]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""instantiate_end""]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get stack id""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""Heat"" [label = ""get SSH/SFTP IP addresses and Kubernetes addresses using stack id""]; ""MgmtDriver"" <-- ""Heat"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""install Kubernetes and create cluster on new Master/Worker VMs""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""get identification token from Kubernetes cluster""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""SFTPClient"" [label = ""transfer CA certificate files to all Master/Worker VMs if specified by request parameter""]; ""MgmtDriver"" <-- ""SFTPClient"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""configure connections to the Docker private registries on all Master/Worker VMs""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""NfvoPlugin"" [label = ""register Kubernetes VIM to tacker""]; ""MgmtDriver"" <-- ""NfvoPlugin"" [label = """"] ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""append Kubernetes cluster VIM info to VimConnectionInfo""] ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"] ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""Tacker-conductor"" <-- ""VnfLcmDriver"" [label = """"]; } The procedure consists of the following steps as illustrated in above sequence. #. Client sends a POST Instantiate VNF request. #. It is basically the same sequence as described in spec ""Support deployment Kubernetes cluster with MgmtDriver"" [#SPEC-K8S-CLUSTER]_, except for following additional processes. #. The following processes are added to ``instantiate_end``. #. MgmtDriver transfers CA certificate files to all Master/Worker VMs if specified by request parameter. #. MgmtDriver configure connections to the Docker private registries on all Master/Worker VMs. Scale-out operation for Kubernetes cluster Worker-nodes with MgmtDriver ----------------------------------------------------------------------- Add the function to connect to Docker private registries based on spec ""Support scaling Kubernetes Worker-nodes with Mgmtdriver"" [#SPEC-K8S-SCALE]_. The diagram below shows Scale-out VNF operation: :: +---------------+ | Scale Request | +--+------------+ | 1. Scale VNF | (Scale-out) +----------------+------------+ | v VNFM | | +------------------+ | | | Tacker-server | | | +-------+----------+ | 3. Kubernetes Cluster | | | Installation | v | 4. Configure connections | +-----------------------+ | to Docker private registries | | +-------------+ | | +----------------------+--+----+ MgmtDriver | | | | | | +-------------+ | | +---------------------+--------+ | | | | | | | | | | | | +----------+ +----+-----+ | | | | | | | | | v | | 2. Add | | +-------------+ | | | | +------+ | | +------+ | | new VM | | | OpenStack | | | | | |Master| | | |Worker| |<-+-------------+--+----+ InfraDriver | | | | | +------+ | | +------+ | | | | +-------------+ | | | | VM | | VM | | | | | | | +----------+ +----------+ | | | | | | +----------+ | | | | | | | +------+ | | | | | | | | |Worker| | | | | | | | | +------+ | | | | | | | | VM | | | | | | | +----------+ | | | | | +------------------------------+ | | Tacker-conductor | | +------------------------------+ | +-----------------------+ | | Hardware Resources | | | +------------------------------+ +-----------------------------+ VNFD for Scaling operation ^^^^^^^^^^^^^^^^^^^^^^^^^^ No change from spec ""Support scaling Kubernetes Worker-nodes with Mgmtdriver"" [#SPEC-K8S-SCALE]_. Request parameters for Scaling operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ No change from spec ""Support scaling Kubernetes Worker-nodes with Mgmtdriver"" [#SPEC-K8S-SCALE]_. Sequence for Scale-out operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ .. seqdiag:: seqdiag { node_width = 80; edge_length = 100; ""Client"" ""Tacker-server"" ""Tacker-conductor"" ""VnfLcmDriver"" ""OpenStackInfraDriver"" ""Heat"" ""MgmtDriver"" ""VnfInstance(Tacker DB)"" ""RemoteCommandExecutor"" ""SFTPClient"" Client -> ""Tacker-server"" [label = ""POST /vnf_instances/{vnfInstanceId}/scale""]; Client <-- ""Tacker-server"" [label = ""Response 202 Accepted""]; ""Tacker-server"" -> ""Tacker-conductor"" [label = ""trigger asynchronous task""]; ""Tacker-conductor"" -> ""VnfLcmDriver"" [label = ""execute VnfLcmDriver""]; ""VnfLcmDriver"" -> ""OpenStackInfraDriver"" [label = ""execute OpenStackInfraDriver""]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""resource signal""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""update stack""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""VnfLcmDriver"" <-- ""OpenStackInfraDriver"" [label = """"]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""scale_end""]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get stack id""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""Heat"" [label = ""get the new VM info created by scale out operation""]; ""MgmtDriver"" <-- ""Heat"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""install Kubernetes and join cluster on the new Worker VM""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get private_registry_connection_info of Instantiate VNF request""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""SFTPClient"" [label = ""transfer CA certificate files to the new Worker VM if specified by Instantiate VNF request parameter""]; ""MgmtDriver"" <-- ""SFTPClient"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""configure connections to Docker private registries on the new Worker VM""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""Tacker-conductor"" <-- ""VnfLcmDriver"" [label = """"]; } The procedure consists of the following steps as illustrated in above sequence. #. Client sends a POST Scale VNF request. #. It is basically the same sequence as described in spec ""Support scaling Kubernetes Worker-nodes with Mgmtdriver"" [#SPEC-K8S-SCALE]_, except for following additional processes. #. The following processes are added to ``scale_end``. #. MgmtDriver gets ``private_registry_connection_info`` of Instantiate VNF request from VnfInstance(Tacker DB). #. MgmtDriver transfers CA certificate files to the new Worker VM if specified by Instantiate VNF request parameter. #. MgmtDriver configure connections to Docker private registries on the new Worker VM. Heal operation for the entire Kubernetes cluster with MgmtDriver ---------------------------------------------------------------- Add the function to connect to Docker private registries based on spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_. The diagram below shows Heal VNF (entire Kubernetes cluster) operation: :: +--------------+ | Heal Request | +-+------------+ | 1. Heal VNF | +----------------+------------+ | v VNFM | | +-------------------+ | | | Tacker-server | | | +---------+---------+ | 5. Kubernetes Cluster | | | Installation | v | 6. Configure connections | +-----------------------+ | to Docker private registries | | +-------------+ | | +-------------+---------------------+--+----+ MgmtDriver | | | | | | | +-------------+ | | | | | | 2. Delete old | | | | | | Kubernetes cluster | | | | | | information | | | | | | 7. Register new | | +-------+-------------+--------+ | | Kubernetes cluster | | | | | | | | information | | | +----+-----+ +----+-----+ | | | | | | | v | | v | | 4. Create | | +-------------+ | | | | +------+ | | +------+ | | new VMs | | | OpenStack | | | | | |Master| | | |Worker| | |<-----------+--+----+ InfraDriver | | | | | +------+ | | +------+ | | | | +---+---------+ | | | | VM | | VM | | | | | | | | +----------+ +----------+ | | | | | | | Kubernetes cluster(new) | | | | | | +------------------------------+ | | | | | +------------------------------+ | | | | | | +----------+ +----------+ | 3. Delete | | | | | | | +------+ | | +------+ | | failed VMs | | | | | | | |Master| | | |Worker| | |<-----------+--+--------+ | | | | +------+ | | +------+ | | | | | | | | VM | | VM | | | | | | | +----------+ +----------+ | | | | | | Kubernetes cluster(old) | | | | | +------------------------------+ | | Tacker-conductor | | +------------------------------+ | +-----------------------+ | | Hardware Resources | | | +------------------------------+ +-----------------------------+ VNFD for Healing operation ^^^^^^^^^^^^^^^^^^^^^^^^^^ No change from spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_. Request parameters for Healing operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ No change from spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_. Sequence for Healing (entire Kubernetes cluster) operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ .. seqdiag:: seqdiag { node_width = 80; edge_length = 100; ""Client"" ""Tacker-server"" ""Tacker-conductor"" ""VnfLcmDriver"" ""OpenStackInfraDriver"" ""Heat"" ""MgmtDriver"" ""VnfInstance(Tacker DB)"" ""RemoteCommandExecutor"" ""SFTPClient"" ""NfvoPlugin"" Client -> ""Tacker-server"" [label = ""POST /vnf_instances/{vnfInstanceId}/heal""]; Client <-- ""Tacker-server"" [label = ""Response 202 Accepted""]; ""Tacker-server"" -> ""Tacker-conductor"" [label = ""trigger asynchronous task""]; ""Tacker-conductor"" -> ""VnfLcmDriver"" [label = ""execute VnfLcmDriver""]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""heal_start""]; ""MgmtDriver"" -> ""NfvoPlugin"" [label = ""delete the failed VIM information""]; ""MgmtDriver"" <-- ""NfvoPlugin"" [label = """"]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""Clear the old Kubernetes cluster information stored in the vim_connection_info of the VNF Instance""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""VnfLcmDriver"" -> ""OpenStackInfraDriver"" [label = ""execute OpenStackInfraDriver""]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""delete stack""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""create stack""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""VnfLcmDriver"" <-- ""OpenStackInfraDriver"" [label = """"]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""heal_end""]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get stack id""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""Heat"" [label = ""get SSH/SFTP IP addresses and Kubernetes addresses using stack id""]; ""MgmtDriver"" <-- ""Heat"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""install Kubernetes and create cluster on new Master/Worker VMs""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""get identification token from Kubernetes cluster""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get private_registry_connection_info of Instantiate VNF request""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""SFTPClient"" [label = ""transfer CA certificate files to all Master/Worker VMs if specified by Instantiate VNF request parameter""]; ""MgmtDriver"" <-- ""SFTPClient"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""configure connections to Docker private registries on all Master/Worker VMs""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""NfvoPlugin"" [label = ""register Kubernetes VIM to tacker""]; ""MgmtDriver"" <-- ""NfvoPlugin"" [label = """"] ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""append Kubernetes cluster VIM info to VimConnectionInfo""] ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"] ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""Tacker-conductor"" <-- ""VnfLcmDriver"" [label = """"]; } The procedure consists of the following steps as illustrated in above sequence. #. Client sends a POST Heal VNF request. #. It is basically the same sequence as described in spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_, except for following additional processes. #. The following processes are added to ``heal_end``. #. MgmtDriver gets ``private_registry_connection_info`` of Instantiate VNF request from VnfInstance(Tacker DB). #. MgmtDriver transfers CA certificate files to all new Master/Worker VMs if specified by Instantiate VNF request parameter. #. MgmtDriver configure connections to Docker private registries on all new Master/Worker VMs. Heal operation for a single node (Master/Worker) in Kubernetes cluster with MgmtDriver -------------------------------------------------------------------------------------- Add the function to connect to Docker private registries based on spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_. The diagram below shows Heal VNF (single node) operation: :: +--------------+ | Heal Request | +-+------------+ | 1. Heal VNF | +----------------+------------+ | v VNFM | | +-------------------+ | | | Tacker-server | | | +---------+---------+ | 5. Kubernetes Cluster | | | Installation | v | 6. Configure connections | +-----------------------+ | to Docker private registries | | +-------------+ | | +------------------------+--+----+ MgmtDriver | | | | | | +------------++ | | | | | 2. Evacuating | | | | | | Pods(Worker) | | | +------------+------------+ | | and removing | | | | | | | | failed node | | | | | | | | from cluster | | | | | | | | (Master/Worker) | | | | +---------+---------+ | | | | | | | | v | | 4. Create | | +-------------+ | | | | | +---------------+ | | new VM | | | OpenStack | | | | | | | Master/Worker | |<-+-----------+--+-+ InfraDriver | | | | | | +---------------+ | | | | +------+------+ | | | | | VM | | | | | | | | | +-------------------+ | | | | | | | | +-------------------+ | 3. Delete | | | | | | | | +---------------+ | | failed VM | | | | | | | | | Master/Worker | |<-+-----------+--+--------+ | | | | | +---------------+ | | | | | | | | | VM |<-+-----------+--+-----------------+ | | | +-------------------+ | | | | | +-------------------------+ | | Tacker-conductor | | +-------------------------+ | +-----------------------+ | | Hardware Resources | | | +-------------------------+ +-----------------------------+ VNFD for Healing operation ^^^^^^^^^^^^^^^^^^^^^^^^^^ No change from spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_. Request parameters for Healing operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ No change from spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_. Sequence for Healing (single node) operation ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ .. seqdiag:: seqdiag { node_width = 80; edge_length = 100; ""Client"" ""Tacker-server"" ""Tacker-conductor"" ""VnfLcmDriver"" ""OpenStackInfraDriver"" ""Heat"" ""MgmtDriver"" ""VnfInstance(Tacker DB)"" ""RemoteCommandExecutor"" ""SFTPClient"" Client -> ""Tacker-server"" [label = ""POST /vnf_instances/{vnfInstanceId}/heal""]; Client <-- ""Tacker-server"" [label = ""Response 202 Accepted""]; ""Tacker-server"" -> ""Tacker-conductor"" [label = ""trigger asynchronous task""]; ""Tacker-conductor"" -> ""VnfLcmDriver"" [label = ""execute VnfLcmDriver""]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""heal_start""]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get the vim connection info""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""MgmtDriver"" [label = ""get the vm info to be deleted by the request data""]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""(Worker only)evacuating the pod running on the failed VM to another worker node""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""remove the failed node from cluster""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""(Master only)remove the failed node from HA proxy""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""VnfLcmDriver"" -> ""OpenStackInfraDriver"" [label = ""execute OpenStackInfraDriver""]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""resource mark unhealthy""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""OpenStackInfraDriver"" -> ""Heat"" [label = ""update stack""]; ""OpenStackInfraDriver"" <-- ""Heat"" [label = """"]; ""VnfLcmDriver"" <-- ""OpenStackInfraDriver"" [label = """"]; ""VnfLcmDriver"" -> ""MgmtDriver"" [label = ""heal_end""]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get stack id""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""Heat"" [label = ""get the new VM info created by Heal operation""]; ""MgmtDriver"" <-- ""Heat"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""install Kubernetes and join cluster on the new VM""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""(Master only)Changes HA proxy configuration""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""MgmtDriver"" -> ""VnfInstance(Tacker DB)"" [label = ""get private_registry_connection_info of Instantiate VNF request""]; ""MgmtDriver"" <-- ""VnfInstance(Tacker DB)"" [label = """"]; ""MgmtDriver"" -> ""SFTPClient"" [label = ""transfer CA certificate files to the new VM if specified by Instantiate VNF request parameter""]; ""MgmtDriver"" <-- ""SFTPClient"" [label = """"]; ""MgmtDriver"" -> ""RemoteCommandExecutor"" [label = ""configure connections to Docker private registries on the new VM""]; ""MgmtDriver"" <-- ""RemoteCommandExecutor"" [label = """"]; ""VnfLcmDriver"" <-- ""MgmtDriver"" [label = """"]; ""Tacker-conductor"" <-- ""VnfLcmDriver"" [label = """"]; } The procedure consists of the following steps as illustrated in above sequence. #. Client sends a POST Heal VNF request. #. It is basically the same sequence as described in spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_, except for following additional processes. #. The following processes are added to ``heal_end``. #. MgmtDriver gets ``private_registry_connection_info`` of Instantiate VNF request from VnfInstance(Tacker DB). #. MgmtDriver transfers CA certificate files to the new Master/Worker VM if specified by Instantiate VNF request parameter. #. MgmtDriver configure connections to Docker private registries on the new Master/Worker VM. Alternatives ------------ None Data model impact ----------------- None REST API impact --------------- None Security impact --------------- None Notifications impact -------------------- None Other end user impact --------------------- None Performance Impact ------------------ None Other deployer impact --------------------- None Developer impact ---------------- None Implementation ============== Assignee(s) ----------- Primary assignee: Masaki Ueno <masaki.ueno.up@hco.ntt.co.jp> Other contributors: Yoshito Ito <yoshito.itou.dr@hco.ntt.co.jp> Yoshiyuki Katada <katada.yoshiyuk@fujitsu.com> Ayumu Ueha <ueha.ayumu@fujitsu.com> Liang Lu <lu.liang@fujitsu.com> Work Items ---------- + Provide the following sample scripts executed by MgmtDriver: + For Docker private registry VNF: Install the Docker private registry in ``instantiate_end`` and ``heal_end``. + For Kubernetes cluster VNF: Add processes to connect to Docker private registries based on the Wallaby released Kubernetes cluster script. + Add new unit and functional tests. Dependencies ============ LCM operations for the Kubernetes cluster depend on the following specifications: + Instantiate operation for the Kubernetes cluster Depends on spec ""Support deploying Kubernetes cluster with MgmtDriver"" [#SPEC-K8S-CLUSTER]_. + Scale operation for the Kubernetes cluster Depends on spec ""Support scaling Kubernetes Worker-nodes with Mgmtdriver"" [#SPEC-K8S-SCALE]_. + Heal operation for the Kubernetes cluster Depends on spec ""Support Healing Kubernetes Master/Worker-nodes with Mgmtdriver"" [#SPEC-K8S-HEAL]_. Testing ======= Unit and functional tests will be added to cover cases required in the spec. Documentation Impact ==================== Complete user guide will be added to explain how to deploy Docker private registry VNF and how to connect to Docker private registry from Kubernetes cluster. References ========== .. [#SPEC-K8S-CLUSTER] https://specs.openstack.org/openstack/tacker-specs/specs/wallaby/mgmt-driver-for-k8s-cluster.html .. [#SPEC-K8S-SCALE] https://specs.openstack.org/openstack/tacker-specs/specs/wallaby/mgmt-driver-for-k8s-scale.html .. [#SPEC-K8S-HEAL] https://specs.openstack.org/openstack/tacker-specs/specs/wallaby/mgmt-driver-for-k8s-heal.html .. [#NFV-SOL003] https://www.etsi.org/deliver/etsi_gs/NFV-SOL/001_099/003/02.06.01_60/gs_NFV-SOL003v020601p.pdf .. [#SPEC-SOL-REST-API] https://specs.openstack.org/openstack/tacker-specs/specs/ussuri/etsi-nfv-sol-rest-api-for-VNF-deployment.html .. [#USER-GUIDE-K8S-CLUSTER] https://docs.openstack.org/tacker/latest/user/mgmt_driver_deploy_k8s_usage_guide.html ",,1430,0
openstack%2Ftacker-specs~master~Id958807922edce723e23b003b577dbf06f73be38,openstack/tacker-specs,master,Id958807922edce723e23b003b577dbf06f73be38,Support NFV SOL_v3 getting LCM information,MERGED,2021-07-12 01:07:26.000000000,2021-08-01 14:49:59.000000000,2021-08-01 14:48:45.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-07-12 01:07:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker-specs/commit/33b00c0c39d8d482c12a7ca2a74ad7d5084e9b01', 'message': 'Support NFV SOL_v3 getting LCM information\n\nThis specification supports a new version of\nVNF lifecycle management APIs complying with ETSI NFV SOL v3.\nIt adds a new version of APIs involved in\ngetting LCM information.\n\nImplements:\nhttps://blueprints.launchpad.net/tacker/+spec/support-nfv-solv3-query-vnf-instances\nImplements:\nhttps://blueprints.launchpad.net/tacker/+spec/support-nfv-solv3-query-operation-occurrences\nImplemetes:\nhttps://blueprints.launchpad.net/tacker/+spec/support-nfv-solv3-subscriptions\n\nChange-Id: Id958807922edce723e23b003b577dbf06f73be38\n'}, {'number': 2, 'created': '2021-07-19 05:39:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker-specs/commit/6f5f549b033ba97d074399bf2bebf9cca0bd26a2', 'message': 'Support NFV SOL_v3 getting LCM information\n\nThis specification supports a new version of\nVNF lifecycle management APIs complying with ETSI NFV SOL v3.\nIt adds a new version of APIs involved in\ngetting LCM information.\n\nImplements:\nblueprint support-nfv-solv3-query-vnf-instances\nImplements:\nblueprint support-nfv-solv3-query-operation-occurrences\nImplemetes:\nblueprint support-nfv-solv3-subscriptions\n\nChange-Id: Id958807922edce723e23b003b577dbf06f73be38\n'}, {'number': 3, 'created': '2021-07-19 05:40:49.000000000', 'files': ['specs/xena/support-nfv-solv3-get-information.rst'], 'web_link': 'https://opendev.org/openstack/tacker-specs/commit/17fd88fd47b9767f31e5c397a52d7aa0489a1a28', 'message': 'Support NFV SOL_v3 getting LCM information\n\nThis specification supports a new version of\nVNF lifecycle management APIs complying with ETSI NFV SOL v3.\nIt adds a new version of APIs involved in\ngetting LCM information.\n\nImplements:\nblueprint support-nfv-solv3-query-vnf-instances\nImplements:\nblueprint support-nfv-solv3-query-operation-occurrences\nImplemetes:\nblueprint support-nfv-solv3-subscriptions\n\nChange-Id: Id958807922edce723e23b003b577dbf06f73be38\n'}]",18,800356,17fd88fd47b9767f31e5c397a52d7aa0489a1a28,16,6,3,32581,,,0,"Support NFV SOL_v3 getting LCM information

This specification supports a new version of
VNF lifecycle management APIs complying with ETSI NFV SOL v3.
It adds a new version of APIs involved in
getting LCM information.

Implements:
blueprint support-nfv-solv3-query-vnf-instances
Implements:
blueprint support-nfv-solv3-query-operation-occurrences
Implemetes:
blueprint support-nfv-solv3-subscriptions

Change-Id: Id958807922edce723e23b003b577dbf06f73be38
",git fetch https://review.opendev.org/openstack/tacker-specs refs/changes/56/800356/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/xena/support-nfv-solv3-get-information.rst'],1,33b00c0c39d8d482c12a7ca2a74ad7d5084e9b01,bp/support-nfv-solv3-query-vnf-instances,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode ================================================= Support NFV SOL_v3 getting LCM information ================================================= Blueprints: - https://blueprints.launchpad.net/tacker/+spec/support-nfv-solv3-query-vnf-instances - https://blueprints.launchpad.net/tacker/+spec/support-nfv-solv3-query-operation-occurrences - https://blueprints.launchpad.net/tacker/+spec/support-nfv-solv3-subscriptions This specification supports a new version of VNF lifecycle management APIs complying with ETSI NFV SOL v3. It adds a new version of APIs involved in getting LCM information. Problem description =================== ETSI specifications within the NFV Architecture Framework [#etsi_nfv]_ describe the main aspects of NFV development and usage based on the industry needs, feedback from SDN/NFV vendors and telecom operators. These specifications include the REST API and data model architecture which is used by NFV users and developers in related products. Support of key ETSI NFV specifications will significantly reduce efforts for Tacker integration into Telecom production networks and also will simplify further development and support of future standards. In Wallaby release, VNF lifecycle management operations defined in ETSI NFV SOL002 v2.6.1 [#NFV-SOL002_261]_ and SOL003 v2.6.1 [#NFV-SOL003_261]_ are supported. However, NFV continues to develop new specifications, it should comply with multiple versions of ETSI NFV SOL specification. Tacker will support VNF lifecycle management operations defined in ETSI NFV SOL002 v3.3.1 [#NFV-SOL002_331]_ and SOL003 v3.3.1 [#NFV-SOL003_331]_. Proposed change =============== Since the VNF lifecycle management interface version specified in ETSI NFV SOL v3 is ""2.0.0"", the API major version included in the URI shall be set to ""v2"". Supporting v2 APIs involves changing the data type of some attributes and adding or removing attributes. To avoid impact on the existing implementation, APIs corresponding to ""v2"" should be implemented as a process independent of that of ""v1"". This interface supports the following APIs involved in getting information of lifecycle management operation. * List VNF Instances (GET /vnf_instances) * Show VNF Instances (GET /vnf_instances/{vnfInstanceId}) * List VNF occurence (GET /vnf_lcm_op_occs) * Show VNF occurrence (GET /vnf_lcm_op_occs/{vnfLcmOpOccId}) * Create Subscriptions (POST /subscriptions) * List Subscriptions (GET /subscriptions) * Show Subscriptions (GET /subscriptions/{subscriptionId}) * Delete Subscriptions (DELETE /subscriptions/{subscriptionId}) * Notification endpoint (POST) * Test Notification endpoint (GET) As shown in the below, there is no difference between flow of v1 API and that of v2 API. 1) Flow of the Query VNF operation ---------------------------------------------- * List VNF Instances (GET /vnf_instances) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = ""GET /vnflcm/v2/vnf_instances""]; Client <-- ""tacker-server"" [label = ""Response 200 OK (VnfInstance[])""]; } The procedure consists of the following steps as illustrated in the above sequence: Precondition: The resource representing the VNF instance has been created. #. If the Client intends to query all VNF instances, it sends a GET request to the ""VNF instances"" resource with the API major version included in the URI is ""v2"". #. The VNFM returns a ""200 OK"" response including zero or more data structures of type ""VnfInstance"" in the payload body. * Show VNF (GET /vnf_instances/{vnfInstanceId}) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = ""GET /vnflcm/v2/vnf_instances/vnf_instanceId""]; Client <-- ""tacker-server"" [label = ""Response 200 OK (VnfInstance)""]; } The procedure consists of the following steps as illustrated in the above sequence: Precondition: The resource representing the VNF instance has been created. #. If the Client intends to read information about a particular VNF instance, it sends a GET request to the ""Individual VNF instance"" resource, addressed by the appropriate VNF instance identifier in its resource URI with the API major version included in the URI is ""v2"". #. The VNFM returns a ""200 OK"" response including one data structure of type ""VnfInstance"" in the payload body. 2) Flow of the Get Operation Status operation ---------------------------------------------- * List VNF occurence (GET /vnf_lcm_op_occs) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = "" GET /vnflcm/v2/vnf_lcm_op_occs""]; ""tacker-server"" -> ""tacker-server"" [label = ""request validation""]; Client <-- ""tacker-server"" [label = "" Response 200 OK""]; } The procedure consists of the following steps as illustrated in the above sequence: #. The Client sends a GET request to the ""VNF LCM operation occurrences"" resource with the API major version included in the URI is ""v2"" and can use attribute-based filtering expression that follows clause 5.2 of ETSI GS NFV SOL013 [#NFV-SOL013_341]_. #. The VNFM returns a ""200 OK"" response that includes zero or more data structures of type ""VnfLcmOpOcc"" in the payload body. * Show VNF occurrence (GET /vnf_lcm_op_occs/{vnfLcmOpOccId}) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = "" GET /vnflcm/v2/vnf_lcm_op_occs/{vnfLcmOpOccId}""]; Client <-- ""tacker-server"" [label = "" Response 200 OK""]; } The procedure consists of the following steps as illustrated in the above sequence: #. The Client sends a GET request to the ""Individual VNF LCM operation occurrence"" resource with the API major version included in the URI is ""v2"", addressed by the appropriate VNF LCM operation occurrence identifier in its resource URI. #. The VNFM returns a ""200 OK"" response to the Client, and includes one data structure of type ""VnfLcmOpOcc"" in the payload body. 3) Flow of managing subscriptions ---------------------------------------- * Create Subscriptions (POST /subscriptions) * Test Notification endpoint (GET) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = "" POST /vnflcm/v2/subscriptions""]; ""tacker-server"" -> Client [label = "" GET {callback URI}""]; ""tacker-server"" <-- Client [label = "" Response 204 No Content""]; ""tacker-server"" -> ""tacker-server"" [label = "" generate subscription_id (uuid)""]; Client <-- ""tacker-server"" [label = "" Response 201 Created""]; } The procedure consists of the following steps as illustrated in the above sequence: #. The Client sends a POST request to the ""subscriptions"" resource with the API major version included in the URI is ""v2"". #. The VNFM sends Notification to test the notification endpoint obtained from Create Subscription request. #. The Client returns a ""204 No Content"" response to indicate success. #. The VNFM returns a ""201 Created"" response. * List Subscriptions (GET /subscriptions) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = "" GET /vnflcm/v2/subscriptions""]; ""tacker-server"" -> ""tacker-server"" [label = ""request validation""]; Client <-- ""tacker-server"" [label = "" Response 200 OK""]; } The procedure consists of the following steps as illustrated in the above sequence: #. The Client sends a GET request to the ""subscriptions"" resource with the API major version included in the URI is ""v2"". #. The VNFM returns a ""200 OK"" response that contains zero or more representations of all existing subscriptions that were created by the Client. * Show Subscriptions (GET /subscriptions/{subscriptionId}) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = "" GET /vnflcm/v2/subscriptions/{subscriptionId}""]; Client <-- ""tacker-server"" [label = "" Response 200 OK""]; } The procedure consists of the following steps as illustrated in the above sequence: #. The Client sends a GET request to the ""subscriptions"" resource with the API major version included in the URI is ""v2"", addressed by the appropriate VNF LCM operation occurrence identifier in its resource URI. #. The VNFM returns a ""200 OK"" response that contains a representation of that individual subscription. * Delete Subscriptions (DELETE /subscriptions/{subscriptionId}) .. seqdiag:: seqdiag { Client -> ""tacker-server"" [label = "" DELETE /vnflcm/v2/subscriptions/{subscriptionId}""]; Client <-- ""tacker-server"" [label = "" Response 204 No Content""]; } The procedure consists of the following steps as illustrated in the above sequence: #. The Client sends a DELETE request to the ""subscriptions"" resource with the API major version included in the URI is ""v2"", addressed by the appropriate VNF LCM operation occurrence identifier in its resource URI. #. The VNFM returns a ""204 No Content"" response if the subscription is successfully terminated. 4) Flow of sending notifications ---------------------------------------------- * Notification endpoint (POST) * Precondition: Requesting Node has subscribed previously to notifications related to VNF lifecycle management. * When the LCM request is accepted, the operation status is sent to the consumer which registers subscription via ""Subscription API"". This will be sent for the number of registrations. * The following operation states can be notified: STARTING/PROCESSING/COMPLETED/ROLLINGBACK/ROLLEDBACK/FAILED_TEMP * STARTING state is sent from Tacker Server, and other Operation_state notifications are sent from Tacker-Conductor. * Modify VNF does not send STARTING state. * Clients which recieved notification infomation sends ""204 No Content"" to Tacker. Data model impact ----------------- In this SPEC with ETSI NFV SOL002 v3.3.1 [#NFV-SOL002_331]_ and SOL003 v3.3.1 [#NFV-SOL003_331]_, all defined attributes should be supported in API validation. Also, all data models in the response should be implemented in the Database to enable flexible change of logic in VNF lifecycle management. From the above point of view, there are two motivations to change Database tables. The first one is from supporting new attributes in v2 API. According to the SOL v3, new attributes were added from v2 API. However, the data model does not need to be changed because all new attributes are described in the current JSON data type. The second one is from supporting all attributes defined in SOL documents. In v1 API, limited attributes are supported in API validation and stored in the Database. Database tables need to be changed to store additional supported attributes. Below shows the Database tables for v2 API. As reference information, the difference with v1 API is also shown. .. note:: Since Tacker manages a separate database for each major version, the design or the change of them does not affect each other. * VnfInstance .. list-table:: :header-rows: 1 :widths: 2 ,2 ,2, 4 * - v1 API (vnf_instances) - v2 API (VnfInstanceV2) - Changes from v1 API - Data type * - id - id - Data type changed - varchar(36) NOT NULL -> varchar(255) NOT NULL * - vnf_instance_name - vnfInstanceName - Renamed - <no_changed> * - vnf_instance_description - vnfInstanceDescription - Renamed and Data type changed - varchar(1024) DEFAULT NULL -> text DEFAULT NULL * - vnfd_id - vnfdId - Renamed and Data type changed - varchar(36) NOT NULL -> varchar(255) NOT NULL * - vnf_provider - vnfProvider - Renamed - <no_changed> * - vnf_product_name - vnfProductName - Renamed - <no_changed> * - vnf_software_version - vnfSoftwareVersion - Renamed - <no_changed> * - vnfd_version - vnfdVersion - Renamed - <no_changed> * - - vnfConfigurableProperties - Added - json DEFAULT NULL * - vim_connection_info - vimConnectionInfo - Renamed - <no_changed> * - instantiation_state - instantiationState - Data type changed - varchar(255) NOT NULL -> enum('NOT_INSTANTIATED','INSTANTIATED') NOT NULL * - - instantiatedVnfInfo - | Added | `instantiatedVnfInfo` field corresponding to `vnf_instantiated_info` in v1 API is merged in `VnfInstanceV2` table and json data is stored directly. - json DEFAULT NULL * - vnf_metadata - metadata - Renamed - <no_changed> * - - extensions - Added - json DEFAULT NULL * - task_state - - Deleted - * - tenant_id - - Deleted - * - vnf_pkg_id - - Deleted - * - created_at - - Deleted - * - updated_at - - Deleted - * - deleted_at - - Deleted - * - deleted - - Deleted - * VnfLcmOpOcc .. list-table:: :header-rows: 1 :widths: 2 ,2 ,2, 4 * - v1 API (vnf_lcm_op_occs) - v2 API (VnfLcmOpOccV2) - Changes from v1 API - Data type * - id - id - Data type changed - varchar(36) NOT NULL -> varchar(255) NOT NULL * - operation_state - operationState - Renamed and Data type changed - varchar(16) DEFAULT NULL -> enum('STARTING','PROCESSING','COMPLETED','FAILED_TEMP','FAILED','ROLLING_BACK','ROLLED_BACK') NOT NULL * - state_entered_time - stateEnteredTime - Renamed - <no_changed> * - start_time - startTime - Renamed - <no_changed> * - vnf_instance_id - vnfInstanceId - Renamed and Data type changed - varchar(36) NOT NULL -> varchar(255) NOT NULL * - grant_id - grantId - Data type changed - varchar(36) NOT NULL -> varchar(255) NOT NULL * - operation - operation - Data type changed - varchar(16) DEFAULT NULL -> enum('INSTANTIATE','SCALE','SCALE_TO_LEVEL','CHANGE_FLAVOUR','TERMINATE','HEAL','OPERATE','CHANGE_EXT_CONN','MODIFY_INFO','CREATE_SNAPSHOT','REVERT_TO_SNAPSHOT','CHANGE_VNFPKG') NOT NULL * - is_automatic_invocation - isAutomaticInvocation - Renamed - <no_changed> * - operation_params - operationParams - Renamed - <no_changed> * - is_cancel_pending - isCancelPending - Renamed - <no_changed> * - - cancelMode - Added - enum('GRACEFUL','FORCEFUL') DEFAULT NULL * - error - error - <no_changed> - <no_changed> * - resource_changes - resourceChanges - Renamed - <no_changed> * - changed_info - changedInfo - Renamed - <no_changed> * - changed_ext_connectivity - changedExtConnectivity - Renamed - <no_changed> * - - modificationsTriggeredByVnfPkgChange - | Added | New field defined SOL003 v3.3.1 [#NFV-SOL003_331]_ ""F.2.1 FEAT02: VNF Software modification"". - json DEFAULT NULL * - - vnfSnapshotInfoId - | Added | New field defined SOL003 v3.3.1 [#NFV-SOL003_331]_ ""F.2.4 FEAT15: VNF snapshotting"". - varchar(255) DEFAULT NULL * - error_point - - Deleted - * - created_at - - Deleted - * - updated_at - - Deleted - * - deleted_at - - Deleted - * - deleted - - Deleted - * LccnSubscription .. list-table:: :header-rows: 1 :widths: 2 ,2 ,2, 4 * - v1 API (vnf_lcm_subscriptions) - v2 API (LccnSubscriptionV2) - Changes from v1 API - Data type * - id - id - Data type changed - varchar(36) NOT NULL -> varchar(255) NOT NULL * - - filter - | Added | In v2 API data model, `filter` field merged `LccnSubscriptionV2` table. | The `filter` field means `vnf_lcm_filters` table in v1 API. - json DEFAULT NULL * - callback_uri - callbackUri - Renamed - <no_changed> * - - verbosity - | Added | New field defined SOL003 v3.3.1 [#NFV-SOL003_331]_ ""F.2.5.3 Verbosity of VNF LCM operation occurrence notifications"". - enum('FULL','SHORT') NOT NULL, * - subscription_authentication - authentication - Renamed - <no_changed> * - created_at - - Deleted - * - updated_at - - Deleted - * - deleted_at - - Deleted - * - deleted - - Deleted - REST API impact --------------- In this SPEC with ETSI NFV SOL002 v3.3.1 [#NFV-SOL002_331]_ and SOL003 v3.3.1 [#NFV-SOL003_331]_, all defined attributes should be supported in API validation. Also, all data models in the response should be implemented in the Database to enable flexible change of logic in VNF lifecycle management. The ""_link"" attribute is the only exception because not all operations in VNF lifecycle management interface are implemented. Some links to not implemented operations should be filtered. * | **Name**: List VNF instances | **Description**: Query VNF instance resource | **Method type**: GET | **URL for the resource**: /vnflcm/v2/vnf_instances | **URI query parameters supported by the GET method**: .. list-table:: :header-rows: 1 * - URI query parameter - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) * - filter - 0..1 - Yes - Yes * - all_fields - 0..1 - Yes - No * - fields - 0..1 - Yes - No * - exclude_fields - 0..1 - Yes - No * - exclude_default - 0..1 - Yes - No * - nextpage_opaque_marker - 0..1 - Yes - No | **Response**: .. list-table:: :header-rows: 1 :widths: 2 ,2 ,2 ,2 * - Data type - Cardinality - Response Codes - Description * - VnfInstance - 0..N - Success: 200 - Information about zero or more VNF instances has been queried successfully. * - ProblemDetails - 1 - Error: 400 - Invalid attribute-based filtering expression. * - ProblemDetails - 1 - Error: 400 - Invalid attribute selector. * - ProblemDetails - 1 - Error: 400 - Response too big. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. .. list-table:: :header-rows: 1 :widths: 2 ,2 ,2 ,2 ,2 ,2 * - Attribute name - Data type - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) - Description * - id - Identifier - 1 - Yes - Yes - * - vnfInstanceName - String - 0..1 - Yes - Yes - * - vnfInstanceDescription - String - 0..1 - Yes - Yes - * - vnfdId - Identifier - 1 - Yes - Yes - * - vnfProvider - String - 1 - Yes - Yes - * - vnfProductName - String - 1 - Yes - Yes - * - vnfSoftwareVersion - Version - 1 - Yes - Yes - * - vnfdVersion - Version - 1 - Yes - Yes - * - vnfConfigurableProperties - KeyValuePairs - 0..1 - Yes - No - * - vimConnectionInfo - map(VimConnectionInfo) - 0..N - Yes - Yes - In API v2, the Data type is changed from VimConnectionInfo to map(VimConnectionInfo). * - instantiationState - Enum - 1 - Yes - Yes - * - instantiatedVnfInfo - Structure (inlined) - 0..1 - Yes - Yes - * - >flavourId - IdentifierInVnfd - 1 - Yes - Yes - * - >vnfState - VnfOperationalStateType - 1 - Yes - Yes - * - >scaleStatus - ScaleInfo - 0..N - Yes - Yes - * - >maxScaleLevels - ScaleInfo - 0..N - Yes - - - New attribute in API v2. * - >extCpInfo - VnfExtCpInfo - 1..N - Yes - Yes - * - >extVirtualLinkInfo - ExtVirtualLinkInfo - 0..N - Yes - Yes - * - >extManagedVirtualLinkInfo - ExtManagedVirtualLinkInfo - 0..N - Yes - Yes - * - >monitoringParameters - MonitoringParameter - 0..N - Yes - No - * - >localizationLanguage - String - 0..1 - Yes - No - * - >vnfcResourceInfo - VnfcResourceInfo - 0..N - Yes - Yes - * - >vnfVirtualLinkResourceInfo - VnfVirtualLinkResourceInfo - 0..N - Yes - Yes - * - >virtualStorageResourceInfo - VirtualStorageResourceInfo - 0..N - Yes - Yes - * - >vnfcInfo - VnfcInfo - 0..N - Yes - Yes - * - metadata - KeyValuePairs - 0..1 - Yes - Yes - * - extensions - KeyValuePairs - 0..1 - Yes - No - * - \_links - Structure (inlined) - 1 - Yes - Yes - * - >self - Link - 1 - Yes - Yes - * - >indicators - Link - 0..1 - No - No - * - >instantiate - Link - 0..1 - Yes - Yes - * - >terminate - Link - 0..1 - Yes - Yes - * - >scale - Link - 0..1 - Yes - Yes - * - >scaleToLevel - Link - 0..1 - No - No - * - >changeFlavour - Link - 0..1 - No - No - * - >heal - Link - 0..1 - Yes - Yes - * - >operate - Link - 0..1 - No - No - * - >changeExtConn - Link - 0..1 - Yes - Yes - * - >createSnapshot - Link - 0..1 - No - - - New attribute in API v2. * - >revertToSnapshot - Link - 0..1 - No - - - New attribute in API v2. * | **Name**: Show VNF instances | **Description**: Query individual VNF instance resource | **Method type**: GET | **URL for the resource**: /vnflcm/v2/vnf_instances/{vnfInstanceId} | **Resource URI variables for this resource**: .. list-table:: :header-rows: 1 :widths: 2 ,2 * - Name - Description * - vnfInstanceId - Identifier of the vnfInstance. | **Response**: .. list-table:: :header-rows: 1 :widths: 2 ,2 ,2 ,2 * - Data type - Cardinality - Response Codes - Description * - VnfInstance - 1 - Success: 200 - Information about an individual VNF instance has been read successfully. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. This API returns the data type of ""VndInstance"" in the payload body. Supported attributes of ""VnfInstance"" are the same as those of List VNF instances. * | **Name**: List VNF LCM operation occurrence | **Description**: Request VNF lifecycle management operation occurrence | **Method type**: GET | **URL for the resource**: /vnflcm/v2/vnf_lcm_op_occs | **URI query parameters supported by the GET method**: .. list-table:: :header-rows: 1 * - URI query parameter - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) * - filter - 0..1 - Yes - Yes * - all_fields - 0..1 - Yes - Yes * - fields - 0..1 - Yes - Yes * - exclude_fields - 0..1 - Yes - Yes * - exclude_default - 0..1 - Yes - Yes * - nextpage_opaque_marker - 0..1 - Yes - No | **Response**: .. list-table:: :widths: 12 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - VnfLcmOpOcc - 0..N - Success: 200 - Status information for zero or more VNF lifecycle management operation occurrences has been queried successfully. * - ProblemDetails - 1 - Error: 400 - Invalid attribute-based filtering expression. * - ProblemDetails - 1 - Error: 400 - Invalid attribute selector. * - ProblemDetails - 1 - Error: 400 - Response too big. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. .. list-table:: :header-rows: 1 * - Attribute name - Data type - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) - Description * - id - Identifier - 1 - Yes - Yes - * - operationState - LcmOperationStateType - 1 - Yes - Yes - * - stateEnteredTime - DateTime - 1 - Yes - Yes - * - startTime - DateTime - 1 - Yes - Yes - * - vnfInstanceId - Identifier - 1 - Yes - Yes - * - grantId - Identifier - 0..1 - Yes - Yes - * - operation - LcmOperationType - 1 - Yes - Yes - * - isAutomaticInvocation - Boolean - 1 - Yes - Yes - * - operationParams - Object - 0..1 - Yes - Yes - * - isCancelPending - Boolean - 1 - Yes - Yes - * - cancelMode - CancelModeType - 0..1 - Yes - No - * - error - ProblemDetails - 0..1 - Yes - Yes - * - resourceChanges - Structure (inlined) - 0..1 - Yes - Yes - * - >affectedVnfcs - AffectedVnfc - 0..N - Yes - Yes - * - >affectedVirtualLinks - AffectedVirtualLink - 0..N - Yes - Yes - * - >affectedExtLinkPorts - AffectedExtLinkPort - 0..N - Yes - - - New attribute in API v2. * - >affectedVirtualStorages - AffectedVirtualStorage - 0..N - Yes - Yes - * - changedInfo - VnfInfoModifications - 0..1 - Yes - Yes - * - changedExtConnectivity - ExtVirtualLinkInfo - 0..N - Yes - Yes - * - modificationsTriggeredByVnfPkgChange - ModificationsTriggeredByVnfPkgChange - 0..1 - Yes - - - New attribute in API v2. * - vnfSnapshotInfoId - Identifier - 0..1 - Yes - - - New attribute in API v2. * - _links - Structure (inlined) - 1 - Yes - Yes - * - >self - Link - 1 - Yes - Yes - * - >vnfInstance - Link - 1 - Yes - Yes - * - >grant - Link - 0..1 - Yes - Yes - * - >cancel - Link - 0..1 - No - No - * - >retry - Link - 0..1 - Yes - Yes - * - >rollback - Link - 0..1 - Yes - Yes - * - >fail - Link - 0..1 - Yes - Yes - * - >vnfSnapshot - Link - 0..1 - No - No - * | **Name**: Show LCM operation occurrence | **Description**: Request VNF lifecycle management operation occurrence | **Method type**: GET | **URL for the resource**: /vnflcm/v2/vnf_lcm_op_occs/{vnfLcmOpOccId} | **Resource URI variables for this resource**: .. list-table:: :header-rows: 1 :widths: 2 ,2 * - Name - Description * - vnfLcmOpOccId - Identifier of a VNF lifecycle management operation occurrence. | **Response**: .. list-table:: :widths: 12 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - VnfLcmOpOcc - 1 - Success: 200 - Status information about a VNF lifecycle management operation occurrence. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. This API returns the data type of ""VnfLcmOpOcc"" in the payload body. Supported attributes of ""VnfLcmOpOcc"" are the same as those of List Lcm operation occurrence. * | **Name**: Create Subscriptions | **Description**: Subscribe to notifications related to VNF lifecycle management | **Method type**: POST | **URL for the resource**: /vnflcm/v2/subscriptions | **Request**: .. list-table:: :header-rows: 1 :widths: 2 ,2 ,2 * - Data type - Cardinality - Description * - LccnSubscriptionRequest - 1 - Parameters for the Subscription. .. list-table:: :header-rows: 1 * - Attribute name - Data type - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) - Description * - filter - LifecycleChangeNotificationFilter - 0..1 - Yes - Yes - * - callbackUri - Uri - 1 - Yes - Yes - * - authentication - SubscriptionAuthentication - 0..1 - Yes - Yes - * - verbosity - LcmOpOccNotificationVerbosityType - 0..1 - Yes - - - New attribute in API v2. | **Response**: .. list-table:: :widths: 10 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - LccnSubscription - 1 - Success: 201 - The subscription has been created successfully. * - ProblemDetails - 1 - Error: 422 - The content type of the payload body is supported and the payload body of a request contains syntactically correct data but the data cannot be processed. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. .. note:: Tacker allows creating an ""Individual subscription"" resource if another ""Individual subscription"" resource with the same filter and callback URI already exists (in which case it shall return the ""201 Created"" response code). .. list-table:: :header-rows: 1 * - Attribute name - Data type - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) - Description * - id - Identifier - 1 - Yes - Yes - * - filter - LifecycleChangeNotificationFilter - 0..1 - Yes - Yes - * - callbackUri - Uri - 1 - Yes - Yes - * - verbosity - LcmOpOccNotificationVerbosityType - 0..1 - Yes - - - New attribute in API v2. * - _links - Structure (inlined) - 1 - Yes - Yes - * - >self - Link - 1 - Yes - Yes - * | **Name**: List Subscriptions | **Description**: Request to list all existing subscriptions | **Method type**: GET | **URL for the resource**: /vnflcm/v2/subscriptions | **URI query parameters supported by the GET method**: .. list-table:: :header-rows: 1 * - URI query parameter - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) * - filter - 0..1 - Yes - Yes * - nextpage_opaque_marker - 0..1 - Yes - Yes | **Response**: .. list-table:: :widths: 10 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - LccnSubscription - 0..N - Success: 200 - The list of subscriptions has been queried successfully. * - ProblemDetails - 1 - Error: 400 - Invalid attribute-based filtering expression. * - ProblemDetails - 1 - Error: 400 - Response too big. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. This API returns the data type of ""LccnSubscription"" in the payload body. Supported attributes of ""LccnSubscription"" are the same as those of Create Subscriptions. * | **Name**: Query Subscriptions | **Description**: Request to show individual subscription resource by its id | **Method type**: GET | **URL for the resource**: /vnflcm/v2/subscriptions/{subscriptionId} | **Resource URI variables for this resource**: .. list-table:: :header-rows: 1 :widths: 2 ,2 * - Name - Description * - subscriptionId - Identifier of the subscriptions. | **Response**: .. list-table:: :widths: 10 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - LccnSubscription - 1 - Success: 200 - The operation has completed successfully. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. This API returns the data type of ""LccnSubscription"" in the payload body. Supported attributes of ""LccnSubscription"" are the same as those of Create Subscriptions. * | **Name**: Delete Subscriptions | **Description**: Request to delete individual subscription resource by its id | **Method type**: DELETE | **URL for the resource**: /vnflcm/v2/subscriptions/{subscriptionId} | **Resource URI variables for this resource**: .. list-table:: :header-rows: 1 :widths: 2 ,2 * - Name - Description * - subscriptionId - Identifier of the subscriptions. | **Response**: .. list-table:: :widths: 10 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - n/a - - Success: 204 - The individual subscription resource has been deleted successfully. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. * | **Name**: Notification endpoint | **Description**: Send notifications related to VNF lifecycle changes .. note:: This API is called from Tacker to the Client. | **Method type**: POST | **URL for the resource**: The resource URI is provided by the Client when creating the subscription. | **Request**: .. list-table:: :widths: 20 10 50 :header-rows: 1 * - Data type - Cardinality - Description * - VnfLcmOperationOccurrenceNotification - 1 - A notification about lifecycle changes triggered by a VNF LCM operation occurrence. * - VnfIdentifierCreationNotification - 1 - A notification about the creation of a VNF identifier and the related individual VNF instance resource. * - VnfIdentifierDeletionNotification - 1 - A notification about the deletion of a VNF identifier and the related individual VNF instance resource. * VnfLcmOperationOccurrenceNotification .. list-table:: :header-rows: 1 * - Attribute name - Data type - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) - Description * - id - Identifier - 1 - Yes - Yes - * - notificationType - String - 1 - Yes - Yes - * - subscriptionId - Identifier - 1 - Yes - Yes - * - timeStamp - DateTime - 1 - Yes - Yes - * - notificationStatus - Enum - 1 - Yes - Yes - * - operationState - LcmOperationStateType - 1 - Yes - Yes - * - vnfInstanceId - Identifier - 1 - Yes - Yes - * - operation - LcmOperationType - 1 - Yes - Yes - * - isAutomaticInvocation - Boolean - 1 - Yes - Yes - * - verbosity - LcmOpOccNotificationVerbosityType - 0..1 - Yes - - - New attribute in API v2. * - vnfLcmOpOccId - Identifier - 1 - Yes - Yes - * - affectedVnfcs - AffectedVnfc - 0..N - Yes - Yes - * - affectedVirtualLinks - AffectedVirtualLink - 0..N - Yes - Yes - * - affectedExtLinkPorts - AffectedExtLinkPort - 0..N - Yes - - - New attribute in API v2. * - affectedVirtualStorages - AffectedVirtualStorage - 0..N - Yes - Yes - * - changedInfo - VnfInfoModifications - 0..1 - Yes - Yes - * - changedExtConnectivity - ExtVirtualLinkInfo - 0..N - Yes - Yes - * - modificationsTriggeredByVnfPkgChange - ModificationsTriggeredByVnfPkgChange - 0..1 - Yes - - - New attribute in API v2. * - error - ProblemDetails - 0..1 - Yes - Yes - * - _links - LccnLinks - 1 - Yes - Yes - * VnfIdentifierCreationNotification .. list-table:: :header-rows: 1 * - Attribute name - Data type - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) - Description * - id - Identifier - 1 - Yes - Yes - * - notificationType - String - 1 - Yes - Yes - * - subscriptionId - Identifier - 1 - Yes - Yes - * - timeStamp - DateTime - 1 - Yes - Yes - * - vnfInstanceId - Identifier - 1 - Yes - Yes - * - _links - LccnLinks - 1 - Yes - Yes - * VnfIdentifierDeletionNotification .. list-table:: :header-rows: 1 * - Attribute name - Data type - Cardinality - Supported in API v2 (Xena) - Supported in API v1 (Wallaby) - Description * - id - Identifier - 1 - Yes - Yes - * - notificationType - String - 1 - Yes - Yes - * - subscriptionId - Identifier - 1 - Yes - Yes - * - timeStamp - DateTime - 1 - Yes - Yes - * - vnfInstanceId - Identifier - 1 - Yes - Yes - * - _links - LccnLinks - 1 - Yes - Yes - | **Response**: .. list-table:: :widths: 12 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - n/a - - Success: 204 - The notification has been delivered successfully. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. * | **Name**: Test Notification endpoint | **Description**: The method allows the server to test the notification endpoint that is provided by the Client. .. note:: This API is called from Tacker to the Client. | **Method type**: GET | **URL for the resource**: The resource URI is provided by the Client when creating the subscription. | **Response**: .. list-table:: :widths: 12 10 18 50 :header-rows: 1 * - Data type - Cardinality - Response Codes - Description * - n/a - - Success: 204 - The notification endpoint has been tested successfully. * - ProblemDetails - See clause 6.4 of [#NFV-SOL013_341]_ - Error: 4xx, 5xx - Any common error response code as defined in clause 6.4 of ETSI GS NFV-SOL 013 [#NFV-SOL013_341]_ may be returned. .. note:: If this API returns an error response, the Subscriptions API that triggers it will return a 400 error response. Security impact --------------- None Notifications impact -------------------- None Other end user impact --------------------- CLI options may be changed to switch between v1 API and v2 API. Performance Impact ------------------ None Other deployer impact --------------------- None Developer impact ---------------- * `python-tackerclient` needs to support a new attribute to set API version. Implementation ============== Assignee(s) ----------- Hirofumi Noguchi <hirofumi.noguchi.rs@hco.ntt.co.jp> Work Items ---------- * Add new version API endpoints to Tacker-server. * Add new unit and functional tests. * Update the Tacker's API documentation. Dependencies ============ None Testing ======== Unit and functional test cases will be added for VNF lifecycle management of VNF instances. Documentation Impact ==================== Complete user guide will be added to explain how to invoke VNF lifecycle management of VNF instances with examples. References ========== .. [#etsi_nfv] https://www.etsi.org/technologies-clusters/technologies/NFV .. [#NFV-SOL002_261] https://www.etsi.org/deliver/etsi_gs/NFV-SOL/001_099/002/02.06.01_60/gs_nfv-sol002v020601p.pdf (Chapter 5: VNF Lifecycle Management interface) .. [#NFV-SOL003_261] https://www.etsi.org/deliver/etsi_gs/NFV-SOL/001_099/003/02.06.01_60/gs_nfv-sol003v020601p.pdf (Chapter 5: VNF Lifecycle Management interface) .. [#NFV-SOL002_331] https://www.etsi.org/deliver/etsi_gs/NFV-SOL/001_099/002/03.03.01_60/gs_nfv-sol002v030301p.pdf (Chapter 5: VNF Lifecycle Management interface) .. [#NFV-SOL003_331] https://www.etsi.org/deliver/etsi_gs/NFV-SOL/001_099/003/03.03.01_60/gs_nfv-sol003v030301p.pdf (Chapter 5: VNF Lifecycle Management interface) .. [#NFV-SOL013_341] https://www.etsi.org/deliver/etsi_gs/NFV-SOL/001_099/013/03.04.01_60/gs_nfv-sol013v030401p.pdf ",,1851,0
openstack%2Ftripleo-ansible~master~I3a5ab01c6cdd17a00edd333b8519f4c35dffcb2a,openstack/tripleo-ansible,master,I3a5ab01c6cdd17a00edd333b8519f4c35dffcb2a,Add BGP EVPN support to tripleo_frr,MERGED,2021-06-29 09:48:21.000000000,2021-08-01 12:39:23.000000000,2021-08-01 12:39:23.000000000,"[{'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-06-29 09:48:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/601c0806b1dcb944a439c482f65bb993cc83c97d', 'message': ""Add BGP EVPN support to tripleo_frr\n\nConfigure FRR to enable L2VPN EVPN address family. A few variables are\navailable for advanced configuration:\n\n- tripleo_frr_bgp_l2vpn: enable/disable L2VPN EVPN address family\n- tripleo_frr_bgp_l2vpn_ebgp_multihop: allows sessions with eBGP\n  neighbors to establish when they are multiple hops away.\n- tripleo_frr_bgp_l2vpn_uplink_activate: enable/disable the 'uplink'\n  peer group in the L2VPN EVPN address family.\n- tripleo_frr_bgp_l2vpn_uplink_activate: enable/disable address family\n  for the 'uplink' neighbor peer group.\n- tripleo_frr_bgp_l2vpn_peers: list of EVPN neighbor peers.\n- tripleo_frr_bgp_l2vpn_peers_scope: internal, external or AS number.\n\nChange-Id: I3a5ab01c6cdd17a00edd333b8519f4c35dffcb2a\n""}, {'number': 2, 'created': '2021-06-29 10:47:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/0d93eb2cc27abff442f873eafb35e025a492e2b4', 'message': ""Add BGP EVPN support to tripleo_frr\n\nConfigure FRR to enable L2VPN EVPN address family. A few variables are\navailable for advanced configuration:\n\n- tripleo_frr_bgp_l2vpn: enable/disable L2VPN EVPN address family\n- tripleo_frr_bgp_l2vpn_ebgp_multihop: allows sessions with eBGP\n  neighbors to establish when they are multiple hops away.\n- tripleo_frr_bgp_l2vpn_uplink_activate: enable/disable the 'uplink'\n  peer group in the L2VPN EVPN address family.\n- tripleo_frr_bgp_l2vpn_peers: list of EVPN neighbor peers.\n- tripleo_frr_bgp_l2vpn_peers_scope: internal, external or AS number.\n\nChange-Id: I3a5ab01c6cdd17a00edd333b8519f4c35dffcb2a\n""}, {'number': 3, 'created': '2021-06-30 14:18:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3aecdb51dad4d46ad7c35231f03ca4b4132f666c', 'message': ""Add BGP EVPN support to tripleo_frr\n\nConfigure FRR to enable L2VPN EVPN address family. A few variables are\navailable for advanced configuration:\n\n- tripleo_frr_bgp_l2vpn: enable/disable L2VPN EVPN address family\n- tripleo_frr_bgp_l2vpn_ebgp_multihop: allows sessions with eBGP\n  neighbors to establish when they are multiple hops away.\n- tripleo_frr_bgp_l2vpn_uplink_activate: enable/disable the 'uplink'\n  peer group in the L2VPN EVPN address family.\n- tripleo_frr_bgp_l2vpn_peers: list of EVPN neighbor peers.\n- tripleo_frr_bgp_l2vpn_peers_scope: internal, external or AS number.\n\nChange-Id: I3a5ab01c6cdd17a00edd333b8519f4c35dffcb2a\n""}, {'number': 4, 'created': '2021-08-01 06:16:58.000000000', 'files': ['tripleo_ansible/roles/tripleo_frr/defaults/main.yml', 'tripleo_ansible/roles/tripleo_frr/templates/frr.conf.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/12663ff02296260e9e781341727b058c8aea7486', 'message': ""Add BGP EVPN support to tripleo_frr\n\nConfigure FRR to enable L2VPN EVPN address family. A few variables are\navailable for advanced configuration:\n\n- tripleo_frr_bgp_l2vpn: enable/disable L2VPN EVPN address family\n- tripleo_frr_bgp_l2vpn_ebgp_multihop: allows sessions with eBGP\n  neighbors to establish when they are multiple hops away.\n- tripleo_frr_bgp_l2vpn_uplink_activate: enable/disable the 'uplink'\n  peer group in the L2VPN EVPN address family.\n- tripleo_frr_bgp_l2vpn_peers: list of EVPN neighbor peers.\n- tripleo_frr_bgp_l2vpn_peers_scope: internal, external or AS number.\n\nChange-Id: I3a5ab01c6cdd17a00edd333b8519f4c35dffcb2a\n""}]",0,798626,12663ff02296260e9e781341727b058c8aea7486,19,6,4,6469,,,0,"Add BGP EVPN support to tripleo_frr

Configure FRR to enable L2VPN EVPN address family. A few variables are
available for advanced configuration:

- tripleo_frr_bgp_l2vpn: enable/disable L2VPN EVPN address family
- tripleo_frr_bgp_l2vpn_ebgp_multihop: allows sessions with eBGP
  neighbors to establish when they are multiple hops away.
- tripleo_frr_bgp_l2vpn_uplink_activate: enable/disable the 'uplink'
  peer group in the L2VPN EVPN address family.
- tripleo_frr_bgp_l2vpn_peers: list of EVPN neighbor peers.
- tripleo_frr_bgp_l2vpn_peers_scope: internal, external or AS number.

Change-Id: I3a5ab01c6cdd17a00edd333b8519f4c35dffcb2a
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/26/798626/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_frr/defaults/main.yml', 'tripleo_ansible/roles/tripleo_frr/templates/frr.conf.j2']",2,601c0806b1dcb944a439c482f65bb993cc83c97d,bgpsupport, no bgp ebgp-requires-policy{% if tripleo_frr_bgp_l2vpn|bool and tripleo_frr_bgp_l2vpn_peers|length %} neighbor evpn-peer peer-group neighbor evpn-peer remote-as {{ tripleo_frr_bgp_l2vpn_peers_scope }} {% if tripleo_frr_bgp_l2vpn_ebgp_multihop | int > 0 %} neighbor evpn-uplink ebgp-multihop {{ tripleo_frr_bgp_l2vpn_ebgp_multihop }} {% endif %} {% endif %}{% if tripleo_frr_bgp_l2vpn %} address-family l2vpn evpn {% if tripleo_frr_bgp_uplink_activate|bool %} neighbor uplink activate {% endif %} {% if tripleo_frr_bgp_l2vpn_peers|length %} neighbor evpn-peer activate {% endif %} advertise-all-vni exit-address-family {% endif %} ,,25,0
openstack%2Fkuryr-kubernetes~master~Idc4b724c6fbfe3eba660da521eea761667d04ac1,openstack/kuryr-kubernetes,master,Idc4b724c6fbfe3eba660da521eea761667d04ac1,Add the Service Creation Flow Diagram,MERGED,2021-06-25 09:36:44.000000000,2021-08-01 12:23:45.000000000,2021-08-01 12:22:22.000000000,"[{'_account_id': 11600}, {'_account_id': 13692}, {'_account_id': 22348}, {'_account_id': 23567}, {'_account_id': 27032}]","[{'number': 1, 'created': '2021-06-25 09:36:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/88f8b0457c63f9b68f2632da4c28cfa26e3e3c5c', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 2, 'created': '2021-06-25 12:04:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/705ea3500fd51fa4de47cbea155118011a5d98bd', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 3, 'created': '2021-06-25 13:50:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/5dcec26dc32c0b1f039745df2ed1d928eaeeed62', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 4, 'created': '2021-06-26 11:39:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/7de0143e3473ef4ebaa7235f02d73aee776b6fbd', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 5, 'created': '2021-06-30 19:44:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/1d4f0e726e154536abc65a38376cfce4708c7f2b', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 6, 'created': '2021-07-01 07:43:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/c00d191c525e344f077f340d078f13af4ae34882', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 7, 'created': '2021-07-23 04:55:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/512d6d80e0b4a9e757cac2153b29c258519be5c8', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 8, 'created': '2021-07-23 06:30:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/5e34e404ff86c1f9b63072c70bb739f8c582263d', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 9, 'created': '2021-07-23 07:59:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/7cab0fe87111b02cbec529365097d0ebadd41429', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 10, 'created': '2021-07-23 08:14:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/76faed8efa3a9453527accf5cb97f10da35835e2', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 11, 'created': '2021-07-23 08:20:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/89355401aab5502a3e73c41769515216ddd5141a', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 12, 'created': '2021-07-23 09:00:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/1b3b93880e338aec6d9b89ad21836253d734091b', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 13, 'created': '2021-07-26 13:17:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/4e9beffece4917c10087ddb76c3d0be41fd64bee', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 14, 'created': '2021-07-27 11:31:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/755ca8ad9273dfb2741f7de5434c9c03c949fe9c', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 15, 'created': '2021-07-29 12:30:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/02b88f1e4e1408186506381dec83ec33404e730d', 'message': 'Added the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 16, 'created': '2021-07-29 16:53:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/95b0ed2f626d1ff532272e5d9a18400fbbde695f', 'message': 'Add the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 17, 'created': '2021-07-30 08:04:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/a239dffdba2cfa97d2885fc3a5e61bde3dae8576', 'message': 'Add the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}, {'number': 18, 'created': '2021-07-30 08:44:58.000000000', 'files': ['doc/images/service_creation_diagram.png', 'doc/images/service_creation_diagram.svg', 'doc/source/devref/service_support.rst'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/9afa2ed3706a3772f7e50c078c817bf2d412490f', 'message': 'Add the Service Creation Flow Diagram\n\nChange-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1\n'}]",10,798064,9afa2ed3706a3772f7e50c078c817bf2d412490f,62,5,18,33240,,,0,"Add the Service Creation Flow Diagram

Change-Id: Idc4b724c6fbfe3eba660da521eea761667d04ac1
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/64/798064/6 && git format-patch -1 --stdout FETCH_HEAD,"['doc/images/service_creation_flow.png', 'doc/source/devref/service_support.rst']",2,88f8b0457c63f9b68f2632da4c28cfa26e3e3c5c,recon,created by the ServiceHandler with the endpoints subsets. Please see below the the service creation flow diagram: .. image:: ../../images/service_creation_flow.png :alt: Service creation flow :align: center :width: 100% ,created by the ServiceHandler with the endpoints subsets.,9,1
openstack%2Ftacker~master~If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3,openstack/tacker,master,If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3,[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job,NEW,2019-08-16 12:08:59.000000000,2021-08-01 12:20:12.000000000,,"[{'_account_id': 8556}, {'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 32102}]","[{'number': 1, 'created': '2019-08-16 12:08:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f24b7c40a8ee9d84d44bb8cfc07eb6673a6089ad', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 2, 'created': '2019-08-16 12:15:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/ec316068fdf83a0f8c0485bdf5079448e39f0729', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 3, 'created': '2019-08-16 12:21:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/5e6aec7650a0c54f1fc355f8506977df7646b257', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 4, 'created': '2019-08-16 12:34:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/170c61cd5cc1f5be609244e105dfd9deec8fba62', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 5, 'created': '2019-08-18 13:49:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/699fc0eb55b813cc08cd93943858310280d3d5c8', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 6, 'created': '2019-08-18 14:23:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/91ac359f5c02f709e98bcc5f69445afe36e2c994', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 7, 'created': '2019-08-18 14:40:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/390be81560f390a994494e5e90f4a72d33d7b7eb', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 8, 'created': '2019-08-18 16:46:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/c1550a032ac1b8fb78b84728173789bd54097491', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 9, 'created': '2019-08-18 16:51:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/054111c4925a101663fd2f52896dd0d14ed01d91', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 10, 'created': '2019-08-18 16:53:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/6d78008b7d75cd93e2a3fc1c2298b8d54cdfdd76', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 11, 'created': '2019-08-18 17:00:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/98fa3fcb42af6b4699a38eaed104ccf8f62cacdf', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 12, 'created': '2019-08-18 17:01:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/a17e7b36987cca533963497a81f243d875852348', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 13, 'created': '2019-08-18 17:03:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/77fb44d460c86be9c66d9e68c144cc37df8c9abf', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 14, 'created': '2019-09-05 10:02:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/5ccfdc53384dd15feadd0e98db1287d1b1707c38', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' which will\ndeploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'tacker-functional-devstack-multinode-ipv6-only' will run the tests.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 15, 'created': '2019-09-05 10:04:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/437dde26174e379d3edcc9c3afa71ac50f620dd1', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 16, 'created': '2019-09-10 11:31:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f96637cc42f9dabf6c937a4ef3a27f3e9b77f83f', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 17, 'created': '2019-09-10 11:48:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f2a703cf5771dc51c400976050a51143eee1d09b', 'message': ""[train][goal] Define new 'tacker-functional-devstack-multinode-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-multinode-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 18, 'created': '2019-09-10 14:58:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/57a21160206f1472665c778ff0f55e4a6e45ecab', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 19, 'created': '2019-09-10 20:33:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/9feb770efcb7779c4ddcdf36a8585b29692f6ee4', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 20, 'created': '2019-09-20 20:07:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/e375461bf77b7ba08fefb3abee6742bb83aa4aaf', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On: https://review.opendev.org/#/c/682361/\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 21, 'created': '2019-09-20 20:32:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/b0eb39f15d43f635c8ca83de11f912725b67bf79', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On: https://review.opendev.org/#/c/682361/\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 22, 'created': '2021-06-09 22:18:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/6797a49d828a068fe01be65fb107ceda25e5b6ab', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On: https://review.opendev.org/#/c/682361/\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 23, 'created': '2021-06-09 22:39:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/aff8669c98736bdac402b3bf914d234c9f8c6ab0', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On:\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 24, 'created': '2021-06-10 23:11:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/d125de25b8c9cefde9668a5648f3ff8c25a04b04', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On:\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 25, 'created': '2021-06-11 22:17:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/9f02988601e96a51c25b536e18dc51e4eaa4b52c', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On:\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 26, 'created': '2021-06-15 21:37:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/dce7089d3700e22b216ef93b46836cbe17277986', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On:\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 27, 'created': '2021-06-16 18:46:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/cc367dccb18fe9b3c3871e3fb953f195886e4364', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On:\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 28, 'created': '2021-07-22 04:34:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/e1361806b84576fd1b7ac4e2a76208d1515f5090', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On:\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}, {'number': 29, 'created': '2021-08-01 10:22:42.000000000', 'files': ['devstack/lib/tacker', 'playbooks/devstack-ipv6/run.yaml', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/tacker/commit/b15172955fb8e29f32301265db6efe93a01d0472', 'message': ""[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nDevstack, Tempest has defined the base job 'devstack-ipv6' and\n'devstack-tempest-ipv6' which will deploy services on IPv6.\n\nThis commit adds the new job 'tacker-functional-devstack-ipv6-only'\nrun on gate and set the required IPv6 setting'.\n\nDepends-On:\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3\nStory: #2005477\nTask: #35933\n""}]",1,676918,b15172955fb8e29f32301265db6efe93a01d0472,65,5,29,8556,,,0,"[train][goal] Define new 'tacker-functional-devstack-ipv6-only' job

As part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],
Devstack, Tempest has defined the base job 'devstack-ipv6' and
'devstack-tempest-ipv6' which will deploy services on IPv6.

This commit adds the new job 'tacker-functional-devstack-ipv6-only'
run on gate and set the required IPv6 setting'.

Depends-On:

[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html

Change-Id: If2d90b0a2ad365c11a09abdeefa3b0a5f127acf3
Story: #2005477
Task: #35933
",git fetch https://review.opendev.org/openstack/tacker refs/changes/18/676918/17 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/devstack-ipv6/run.yaml', '.zuul.yaml']",2,f24b7c40a8ee9d84d44bb8cfc07eb6673a6089ad,ipv6-only-deployment-and-testing,- job: name: tacker-functional-devstack-multinode-ipv6-only parent: devstack description: | Tacker multinodes job for devstack-based functional tests with IPv6 env. nodeset: openstack-2-nodes pre-run: playbooks/devstack/pre.yaml run: playbooks/devstack-ipv6/run.yaml post-run: playbooks/devstack/post.yaml roles: - zuul: openstack-infra/devstack timeout: 9000 required-projects: <<: *base_required_projects - openstack/tempest vars: *base_vars - tacker-functional-devstack-multinode-ipv6-only check: jobs: - tacker-functional-devstack-multinode-ipv6-only,,29,0
openstack%2Fmanila-tempest-plugin~master~I3077c9a5d96de1fefeb1a3a87d7055bdf30da797,openstack/manila-tempest-plugin,master,I3077c9a5d96de1fefeb1a3a87d7055bdf30da797,Remove unused microversions,ABANDONED,2021-06-30 08:15:39.000000000,2021-08-01 07:47:45.000000000,,"[{'_account_id': 6413}, {'_account_id': 9003}, {'_account_id': 16643}, {'_account_id': 19262}, {'_account_id': 22348}, {'_account_id': 30025}]","[{'number': 1, 'created': '2021-06-30 08:15:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/6137800a910266ac9778a7bc9f11d2d082716367', 'message': 'Remove unused microversions\n\n1.0 and 2.9 microversions tests are always skipped,\nsince there is a skip condition than skips microversion\nless that 2.13.\n\nChange-Id: I3077c9a5d96de1fefeb1a3a87d7055bdf30da797\n'}, {'number': 2, 'created': '2021-06-30 11:43:39.000000000', 'files': ['manila_tempest_tests/tests/api/test_rules.py'], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/e8096fb386eb8c9ce6a2a203dfe6b5ad439475a5', 'message': 'Remove unused microversions\n\n1.0 and 2.9 microversions tests are always skipped,\nsince there is a skip condition than skips microversion\nless that 2.13.\n\nChange-Id: I3077c9a5d96de1fefeb1a3a87d7055bdf30da797\n'}]",0,798803,e8096fb386eb8c9ce6a2a203dfe6b5ad439475a5,14,6,2,19262,,,0,"Remove unused microversions

1.0 and 2.9 microversions tests are always skipped,
since there is a skip condition than skips microversion
less that 2.13.

Change-Id: I3077c9a5d96de1fefeb1a3a87d7055bdf30da797
",git fetch https://review.opendev.org/openstack/manila-tempest-plugin refs/changes/03/798803/2 && git format-patch -1 --stdout FETCH_HEAD,['manila_tempest_tests/tests/api/test_rules.py'],1,6137800a910266ac9778a7bc9f11d2d082716367,microversion," @ddt.data(*utils.deduplicate(['2.27', '2.28', LATEST_MICROVERSION])) rule = self.shares_v2_client.create_access_rule( share[""id""], self.access_type, self.access_to, version=version) if utils.is_microversion_eq(version, '2.9'): self.shares_v2_client.delete_share(share['id'], version=version) self.shares_v2_client.wait_for_resource_deletion( share_id=share['id'], version=version) if utils.is_microversion_lt(version, '2.45'):"," @ddt.data(*utils.deduplicate(['1.0', '2.9', '2.27', '2.28', LATEST_MICROVERSION])) if utils.is_microversion_eq(version, '1.0'): rule = self.shares_client.create_access_rule( share[""id""], self.access_type, self.access_to) else: rule = self.shares_v2_client.create_access_rule( share[""id""], self.access_type, self.access_to, version=version) if utils.is_microversion_eq(version, '1.0'): waiters.wait_for_resource_status( self.shares_client, self.share[""id""], ""active"", resource_name=""access_rule"", rule_id=rule[""id""]) elif utils.is_microversion_eq(version, '2.9'): if utils.is_microversion_eq(version, '1.0'): self.shares_client.delete_share(share['id']) self.shares_client.wait_for_resource_deletion(share_id=share['id']) else: self.shares_v2_client.delete_share(share['id'], version=version) self.shares_v2_client.wait_for_resource_deletion( share_id=share['id'], version=version) if utils.is_microversion_eq(version, '1.0'): self.assertRaises(lib_exc.NotFound, self.shares_client.list_access_rules, share['id']) elif utils.is_microversion_lt(version, '2.45'):",9,26
openstack%2Frequirements~master~Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52,openstack/requirements,master,Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52,Updated from generate-constraints,MERGED,2021-07-27 06:27:29.000000000,2021-08-01 03:23:41.000000000,2021-08-01 03:22:28.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-27 06:27:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/ea796b5e9c47a421e1d265d0572176b41ddad515', 'message': 'Updated from generate-constraints\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n'}, {'number': 2, 'created': '2021-07-28 06:30:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/127a9e9c7fd5e6b12f804583136104edd933ce37', 'message': 'Updated from generate-constraints\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n'}, {'number': 3, 'created': '2021-07-28 16:01:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/72aa48cb9fb861c668a3f97be29ce8254a641c7f', 'message': 'Updated from generate-constraints\n\nHeld back:\n- fasteners===0.16.3\n- XStatic-Angular===1.8.2.1\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n'}, {'number': 4, 'created': '2021-07-28 18:05:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/cf072cc64109ee0a034e50e46d8e06de91ca666b', 'message': 'Updated from generate-constraints\n\nHeld back:\n- fasteners===0.16.3\n- XStatic-Angular===1.8.2.1\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n'}, {'number': 5, 'created': '2021-07-28 19:24:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/b1fed693ca6e412174223bbd922fd0a532d30b63', 'message': ""Updated from generate-constraints\n\nHeld back:\n- fasteners===0.16.3\n- XStatic-Angular===1.8.2.1\n- networkx===2.6.2;python_version=='3.8'\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n""}, {'number': 6, 'created': '2021-07-31 17:48:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/0e42eec8d4dea369c9febb9a69ecda7009b8de5a', 'message': ""Updated from generate-constraints\n\nHeld back:\n- fasteners===0.16.3\n- XStatic-Angular===1.8.2.1\n- networkx===2.6.2;python_version=='3.8'\n\nRemoved:\nthe comment, because comments are invalid in the constraints file\n- pkg_resources===0.0.0\n\nAdded:\n(readded)\n- setuptools===57.4.0\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n""}, {'number': 7, 'created': '2021-07-31 19:39:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/50d968f9ed0484a4ab0f791ed99ea950f9c4ca13', 'message': ""Updated from generate-constraints\n\nHeld back:\n- fasteners===0.16.3\n- XStatic-Angular===1.8.2.1\n- networkx===2.6.2;python_version=='3.8'\n- decorator===5.0.9;python_version=='3.8'\n\nRemoved:\nthe comment, because comments are invalid in the constraints file\n- pkg_resources===0.0.0\n\nAdded:\n(readded)\n- setuptools===57.4.0\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n""}, {'number': 8, 'created': '2021-08-01 00:16:19.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/a1b017619a4912f7d5d337460f91f842b8dcf5a2', 'message': ""Updated from generate-constraints\n\nHeld back:\n- fasteners===0.16.3\n- XStatic-Angular===1.8.2.1\n- networkx===2.6.2;python_version=='3.8'\n- decorator===5.0.9;python_version=='3.8'\n- WSME===0.11.0\n\nRemoved:\nthe comment, because comments are invalid in the constraints file\n- pkg_resources===0.0.0\n\nAdded:\n(readded)\n- setuptools===57.4.0\n\nChange-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52\n""}]",0,802427,a1b017619a4912f7d5d337460f91f842b8dcf5a2,38,3,8,11131,,,0,"Updated from generate-constraints

Held back:
- fasteners===0.16.3
- XStatic-Angular===1.8.2.1
- networkx===2.6.2;python_version=='3.8'
- decorator===5.0.9;python_version=='3.8'
- WSME===0.11.0

Removed:
the comment, because comments are invalid in the constraints file
- pkg_resources===0.0.0

Added:
(readded)
- setuptools===57.4.0

Change-Id: Ia0a4f0712a601f00300ba4e1cb6ea93cce1d2c52
",git fetch https://review.opendev.org/openstack/requirements refs/changes/27/802427/4 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,ea796b5e9c47a421e1d265d0572176b41ddad515,openstack/requirements/constraints/noclob,# generated using: tox -e generatechardet===4.0.0moto===2.2.0networkx===2.5.1;python_version=='3.6' networkx===2.6.2;python_version=='3.8'XStatic-Angular===1.8.2.1pkg_resources===0.0.0google-api-python-client===2.14.1platformdirs===2.1.0boto3===1.18.7typepy===1.2.0Sphinx===4.1.2botocore===1.21.7mbstrdecoder===1.0.1decorator===4.4.2;python_version=='3.6' decorator===5.0.9;python_version=='3.8' DateTimeRange===1.2.0fasteners===0.16.3,moto===2.1.0networkx===2.5.1XStatic-Angular===1.5.8.0google-api-python-client===2.14.0platformdirs===2.0.2boto3===1.18.6Sphinx===4.1.1botocore===1.21.6datetimerange===1.1.0 # MITdecorator===4.4.2fasteners===0.14.1setuptools===57.4.0,18,12
openstack%2Ftripleo-ansible~master~Ib67107271e727e361a870c66072e7f439b5e29fc,openstack/tripleo-ansible,master,Ib67107271e727e361a870c66072e7f439b5e29fc,Fix BGP IPv4 unicast disablement,MERGED,2021-06-29 09:48:21.000000000,2021-07-31 23:11:33.000000000,2021-07-31 23:11:33.000000000,"[{'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-06-29 09:48:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/b65855d5cde6a168452a676376eece222c5ba24e', 'message': 'Fix BGP IPv4 unicast disablement\n\nBy default in FRR, only the IPv4 unicast address family is announced to\nall neighbors. Using the ‘no bgp default ipv4-unicast’ configuration\noverrides this default so that all address families need to be enabled\nexplicitly whereas prior to this patch IPv4 unicast was always enabled\nregardless of the value of Ansible variable tripleo_frr_bgp_ipv4.\n\nChange-Id: Ib67107271e727e361a870c66072e7f439b5e29fc\n'}, {'number': 2, 'created': '2021-07-31 09:53:34.000000000', 'files': ['tripleo_ansible/roles/tripleo_frr/templates/frr.conf.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/723c2caa550c6c67bf2cd54d43531aa3823cf0e3', 'message': 'Fix BGP IPv4 unicast disablement\n\nBy default in FRR, only the IPv4 unicast address family is announced to\nall neighbors. Using the ‘no bgp default ipv4-unicast’ configuration\noverrides this default so that all address families need to be enabled\nexplicitly whereas prior to this patch IPv4 unicast was always enabled\nregardless of the value of Ansible variable tripleo_frr_bgp_ipv4.\n\nChange-Id: Ib67107271e727e361a870c66072e7f439b5e29fc\n'}]",0,798625,723c2caa550c6c67bf2cd54d43531aa3823cf0e3,28,5,2,6469,,,0,"Fix BGP IPv4 unicast disablement

By default in FRR, only the IPv4 unicast address family is announced to
all neighbors. Using the ‘no bgp default ipv4-unicast’ configuration
overrides this default so that all address families need to be enabled
explicitly whereas prior to this patch IPv4 unicast was always enabled
regardless of the value of Ansible variable tripleo_frr_bgp_ipv4.

Change-Id: Ib67107271e727e361a870c66072e7f439b5e29fc
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/25/798625/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_frr/templates/frr.conf.j2'],1,b65855d5cde6a168452a676376eece222c5ba24e,bgpsupport, no bgp default ipv4-unicast neighbor uplink activate,,2,0
openstack%2Frequirements~master~I213a130e57b61ac5f0d1afab7ca42fef6e754a34,openstack/requirements,master,I213a130e57b61ac5f0d1afab7ca42fef6e754a34,Updated from generate-constraints,ABANDONED,2021-07-29 06:26:53.000000000,2021-07-31 17:48:47.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-29 06:26:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/2551b10feff9f79930adfe19830b627ef428b0ca', 'message': 'Updated from generate-constraints\n\nChange-Id: I213a130e57b61ac5f0d1afab7ca42fef6e754a34\n'}, {'number': 2, 'created': '2021-07-30 06:29:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/55ca32d5341821c721348cf531f3e771d40b7156', 'message': 'Updated from generate-constraints\n\nChange-Id: I213a130e57b61ac5f0d1afab7ca42fef6e754a34\n'}, {'number': 3, 'created': '2021-07-31 06:34:57.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/7701e2d53691b11eab9547299a84a3382c7811ac', 'message': 'Updated from generate-constraints\n\nChange-Id: I213a130e57b61ac5f0d1afab7ca42fef6e754a34\n'}]",0,802828,7701e2d53691b11eab9547299a84a3382c7811ac,10,1,3,11131,,,0,"Updated from generate-constraints

Change-Id: I213a130e57b61ac5f0d1afab7ca42fef6e754a34
",git fetch https://review.opendev.org/openstack/requirements refs/changes/28/802828/3 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,2551b10feff9f79930adfe19830b627ef428b0ca,openstack/requirements/constraints,# generated using: tox -e generatechardet===4.0.0moto===2.2.0networkx===2.5.1;python_version=='3.6' networkx===2.6.2;python_version=='3.8'XStatic-Angular===1.8.2.1google-api-core===1.31.1zeroconf===0.33.2google-auth===1.34.0pkg_resources===0.0.0google-api-python-client===2.15.0platformdirs===2.1.0boto3===1.18.9 jeepney===0.7.1typepy===1.2.0Sphinx===4.1.2WSME===0.11.0botocore===1.21.9python-json-logger===2.0.2mbstrdecoder===1.0.1importlib-resources===5.2.1decorator===4.4.2;python_version=='3.6' decorator===5.0.9;python_version=='3.8' DateTimeRange===1.2.0fasteners===0.16.3python-linstor===1.9.0,moto===2.1.0networkx===2.5.1XStatic-Angular===1.5.8.0google-api-core===1.31.0zeroconf===0.33.1google-auth===1.33.1google-api-python-client===2.14.0platformdirs===2.0.2boto3===1.18.6 jeepney===0.7.0Sphinx===4.1.1WSME===0.10.1botocore===1.21.6python-json-logger===2.0.1datetimerange===1.1.0 # MITimportlib-resources===5.2.0decorator===4.4.2fasteners===0.14.1python-linstor===1.8.0setuptools===57.4.0,26,20
openstack%2Fswift~master~I2f0c82981e4323e5e210119f917b4645670b44d3,openstack/swift,master,I2f0c82981e4323e5e210119f917b4645670b44d3,func tests: plumb tolerate_missing through to listing_empty,MERGED,2021-07-29 16:31:46.000000000,2021-07-31 17:26:09.000000000,2021-07-31 17:24:39.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 16:31:46.000000000', 'files': ['test/functional/swift_test_client.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/2a806296ff6dd8c7d16b29b79ec8e7efef44ef3b', 'message': ""func tests: plumb tolerate_missing through to listing_empty\n\nWe started tolerating deleted containers still showing up in account\nlistings recently, but we've still seen the occassional gate failure.\n\nChange-Id: I2f0c82981e4323e5e210119f917b4645670b44d3\nRelated-Change: I9217ba49d65cc29496b1532644bbef6b736074b8\n""}]",0,802914,2a806296ff6dd8c7d16b29b79ec8e7efef44ef3b,9,2,1,15343,,,0,"func tests: plumb tolerate_missing through to listing_empty

We started tolerating deleted containers still showing up in account
listings recently, but we've still seen the occassional gate failure.

Change-Id: I2f0c82981e4323e5e210119f917b4645670b44d3
Related-Change: I9217ba49d65cc29496b1532644bbef6b736074b8
",git fetch https://review.opendev.org/openstack/swift refs/changes/14/802914/1 && git format-patch -1 --stdout FETCH_HEAD,['test/functional/swift_test_client.py'],1,2a806296ff6dd8c7d16b29b79ec8e7efef44ef3b,," partialed_files = functools.partial( self.files, tolerate_missing=tolerate_missing) for f in listing_items(partialed_files): return listing_empty(partialed_files)"," for f in listing_items(functools.partial( self.files, tolerate_missing=tolerate_missing)): return listing_empty(self.files)",5,3
openstack%2Ftripleo-validations~stable%2Ftrain~I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,openstack/tripleo-validations,stable/train,I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,NVF OvS DPDK instance emulatorpin validation fix,MERGED,2021-07-30 04:51:44.000000000,2021-07-31 13:01:04.000000000,2021-07-31 13:01:04.000000000,"[{'_account_id': 7353}, {'_account_id': 11491}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-30 04:51:44.000000000', 'files': ['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/9e8a3287703a01bec85d30597bce311973bd5760', 'message': 'NVF OvS DPDK instance emulatorpin validation fix\n\nThis change is to fix the emulatorpin cpus validation of NFV\nOvS DPDK instance.\n\nChange-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a\n(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)\n'}]",0,802939,9e8a3287703a01bec85d30597bce311973bd5760,8,6,1,22865,,,0,"NVF OvS DPDK instance emulatorpin validation fix

This change is to fix the emulatorpin cpus validation of NFV
OvS DPDK instance.

Change-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a
(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/39/802939/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'],1,9e8a3287703a01bec85d30597bce311973bd5760,emulatorpin-validation-issue-stable/wallaby-stable/victoria-stable/ussuri-stable/train," when: ""{{ emulatorpin.emulatorpin.cpuset in vcpus_list | list }}"""," when: ""{{ not emulatorpin.emulatorpin.cpuset in vcpus_list | list }}""",1,1
openstack%2Ftripleo-ansible~master~Ib6140c8991469c950fd7e1b323c614103394e3f1,openstack/tripleo-ansible,master,Ib6140c8991469c950fd7e1b323c614103394e3f1,tripleo-kernel: prevent reboot when TSX flag was added,MERGED,2021-07-20 15:51:42.000000000,2021-07-31 11:33:05.000000000,2021-07-31 11:33:05.000000000,"[{'_account_id': 6816}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8833}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 18575}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-20 15:51:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/7badd7993adc70692d58bb012326736262e02b53', 'message': ""tripleo-kernel: Workload protection\n\nProvisioned computes should never, ever be rebooted since they can run\nimportant workload.\n\nNormally, tripleo-kernel is executed before nova.conf is created on new\nscale in nodes. There are some situations where it will run after\nnova.conf, for example if the kernelargs changes. In which case, we\ndon't want to reboot a compute node with possible workload.\n\nValidating the presence of nova.conf is probably the fastest and easiest\ncheck we can do.\n\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n""}, {'number': 2, 'created': '2021-07-22 15:18:18.000000000', 'files': ['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/a15e92511049e21c8bc76bf2fffa5bf6adb3b183', 'message': ""tripleo-kernel: prevent reboot when TSX flag was added\n\nDuring the 16.2 upgrade path, we enforce the inclusion of tsx flag by\noperators. If there was already kernelargs present, the node won't get\nrebooted, but if it's a new KernelArgs, the node will get rebooted as\nper the related bug.\n\nWe want to prevent the unexpected reboot of nodes with workload when\nthe TSX flag was added.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1975240\nChange-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1\n""}]",0,801509,a15e92511049e21c8bc76bf2fffa5bf6adb3b183,27,11,2,27419,,,0,"tripleo-kernel: prevent reboot when TSX flag was added

During the 16.2 upgrade path, we enforce the inclusion of tsx flag by
operators. If there was already kernelargs present, the node won't get
rebooted, but if it's a new KernelArgs, the node will get rebooted as
per the related bug.

We want to prevent the unexpected reboot of nodes with workload when
the TSX flag was added.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1975240
Change-Id: Ib6140c8991469c950fd7e1b323c614103394e3f1
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/09/801509/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_kernel/tasks/kernelargs.yml'],1,7badd7993adc70692d58bb012326736262e02b53,,"- name: Workload protection validation when: - '""nova_libvirt"" in groups' block: - name: Check if node has a nova.conf stat: path: /var/lib/config-data/puppet-generated/nova_libvirt/etc/nova/nova.conf register: nova_conf_check - name: Enabling defer_reboot when: nova_conf_check.stat.exists block: - name: Prevent operator about workload protection debug: msg: | Automated reboot for this node has been defered because it is already provisionned. Please schedule a manual reboot after this deployment is completed. - name: Setting defer reboot fact set_fact: tripleo_kernel_defer_reboot: true ",,22,0
openstack%2Ftripleo-validations~stable%2Fussuri~I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,openstack/tripleo-validations,stable/ussuri,I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,NVF OvS DPDK instance emulatorpin validation fix,MERGED,2021-07-30 04:51:25.000000000,2021-07-31 11:33:00.000000000,2021-07-31 11:33:00.000000000,"[{'_account_id': 7353}, {'_account_id': 11491}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-30 04:51:25.000000000', 'files': ['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/5342297325dc61995da5f11f86dcd6b8a666d508', 'message': 'NVF OvS DPDK instance emulatorpin validation fix\n\nThis change is to fix the emulatorpin cpus validation of NFV\nOvS DPDK instance.\n\nChange-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a\n(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)\n'}]",0,802938,5342297325dc61995da5f11f86dcd6b8a666d508,10,6,1,22865,,,0,"NVF OvS DPDK instance emulatorpin validation fix

This change is to fix the emulatorpin cpus validation of NFV
OvS DPDK instance.

Change-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a
(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/38/802938/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'],1,5342297325dc61995da5f11f86dcd6b8a666d508,emulatorpin-validation-issue-stable/wallaby-stable/victoria-stable/ussuri," when: ""{{ emulatorpin.emulatorpin.cpuset in vcpus_list | list }}"""," when: ""{{ not emulatorpin.emulatorpin.cpuset in vcpus_list | list }}""",1,1
openstack%2Fopenstack-ansible-tests~stable%2Fstein~Ic868bf75e64bc27cbc912c6c0415439a8c9a1057,openstack/openstack-ansible-tests,stable/stein,Ic868bf75e64bc27cbc912c6c0415439a8c9a1057,Update Debian stable job,MERGED,2021-07-29 00:51:00.000000000,2021-07-31 10:53:44.000000000,2021-07-31 10:51:05.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2021-07-29 00:51:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-tests/commit/41c5b672eaf45fc68b55c54e1c1b22df64750845', 'message': 'Update Debian stable job\n\nThe ""debian-stable"" nodeset was never updated past Stretch; a distro\nwe are now looking to remove.  We are planning to remove this label to\navoid confusion like this (and switching stable distributions on jobs\nunexpectedly).\n\nMove this job to the current stable, buster.\n\nNeeded-By: https://review.opendev.org/c/opendev/base-jobs/+/802639\nChange-Id: Ic868bf75e64bc27cbc912c6c0415439a8c9a1057\n'}, {'number': 2, 'created': '2021-07-29 22:01:32.000000000', 'files': ['zuul.d/project-templates.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-tests/commit/dfc05e6ed11a23d081d7ee7cf36c005aaa0ea1ea', 'message': 'Update Debian stable job\n\nThe ""debian-stable"" nodeset was never updated past Stretch; a distro\nwe are now looking to remove.  We are planning to remove this label to\navoid confusion like this (and switching stable distributions on jobs\nunexpectedly).\n\nSince this branch isn\'t supported on > stretch, remove the testing.\n\nNeeded-By: https://review.opendev.org/c/opendev/base-jobs/+/802639\nChange-Id: Ic868bf75e64bc27cbc912c6c0415439a8c9a1057\n'}]",0,802816,dfc05e6ed11a23d081d7ee7cf36c005aaa0ea1ea,13,3,2,7118,,,0,"Update Debian stable job

The ""debian-stable"" nodeset was never updated past Stretch; a distro
we are now looking to remove.  We are planning to remove this label to
avoid confusion like this (and switching stable distributions on jobs
unexpectedly).

Since this branch isn't supported on > stretch, remove the testing.

Needed-By: https://review.opendev.org/c/opendev/base-jobs/+/802639
Change-Id: Ic868bf75e64bc27cbc912c6c0415439a8c9a1057
",git fetch https://review.opendev.org/openstack/openstack-ansible-tests refs/changes/16/802816/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project-templates.yaml', 'zuul.d/jobs.yaml']",2,41c5b672eaf45fc68b55c54e1c1b22df64750845,, name: openstack-ansible-functional-debian-buster nodeset: debian-buster, name: openstack-ansible-functional-debian-stable nodeset: debian-stable,4,4
openstack%2Fpuppet-pacemaker~master~I08c072acf5d41197f139ae66f1ee05ebccf11542,openstack/puppet-pacemaker,master,I08c072acf5d41197f139ae66f1ee05ebccf11542,Increase the scaleup/startup tries,MERGED,2021-07-27 06:53:09.000000000,2021-07-31 08:28:40.000000000,2021-07-31 08:28:40.000000000,"[{'_account_id': 6926}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-27 06:53:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-pacemaker/commit/3cf12ce28e24200f44fc6383df417539fc62212c', 'message': ""Increase the scaleup/startup tries\n\nCurrently we're using 10 tries + 20 seconds sleep. This has been\nobserved as insufficient in a number of environments.\nLet's bump up the defaults to something that will cover most situations.\n\nSeen also in rhbz#1978696\n\nChange-Id: I08c072acf5d41197f139ae66f1ee05ebccf11542\nCloses-Bug: #1938129\n""}, {'number': 2, 'created': '2021-07-30 12:57:47.000000000', 'files': ['manifests/corosync.pp'], 'web_link': 'https://opendev.org/openstack/puppet-pacemaker/commit/d513c631da7ad95644f27bd8f6909d9944fac3a3', 'message': ""Increase the scaleup/startup tries\n\nCurrently we're using 10 tries + 20 seconds sleep. This has been\nobserved as insufficient in a number of environments.\nLet's bump up the defaults to something that will cover most situations.\n\nSeen also in rhbz#1978696\n\nChange-Id: I08c072acf5d41197f139ae66f1ee05ebccf11542\nCloses-Bug: #1938129\n""}]",0,802428,d513c631da7ad95644f27bd8f6909d9944fac3a3,12,4,2,20172,,,0,"Increase the scaleup/startup tries

Currently we're using 10 tries + 20 seconds sleep. This has been
observed as insufficient in a number of environments.
Let's bump up the defaults to something that will cover most situations.

Seen also in rhbz#1978696

Change-Id: I08c072acf5d41197f139ae66f1ee05ebccf11542
Closes-Bug: #1938129
",git fetch https://review.opendev.org/openstack/puppet-pacemaker refs/changes/28/802428/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/corosync.pp'],1,3cf12ce28e24200f44fc6383df417539fc62212c,fix-ci,"# Defaults to 50 $cluster_start_tries = '50',","# Defaults to 10 $cluster_start_tries = '10',",2,2
openstack%2Fansible-collections-openstack~master~Ida493c4316b682c3c2664bbe48c8dffc72f6ac8c,openstack/ansible-collections-openstack,master,Ida493c4316b682c3c2664bbe48c8dffc72f6ac8c,Reenable ansible 2.11 linters job,MERGED,2021-07-30 16:06:45.000000000,2021-07-31 07:44:12.000000000,2021-07-31 07:44:12.000000000,"[{'_account_id': 10969}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 16:06:45.000000000', 'files': ['galaxy.yml', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/41608888877ca6ad433102933294d5631ca4193b', 'message': 'Reenable ansible 2.11 linters job\n\nAfter PR fix[1] was merged, reenable 2.11 job.\n\n[1] https://github.com/ansible/ansible/pull/75358\nChange-Id: Ida493c4316b682c3c2664bbe48c8dffc72f6ac8c\n'}]",0,803057,41608888877ca6ad433102933294d5631ca4193b,8,2,1,10969,,,0,"Reenable ansible 2.11 linters job

After PR fix[1] was merged, reenable 2.11 job.

[1] https://github.com/ansible/ansible/pull/75358
Change-Id: Ida493c4316b682c3c2664bbe48c8dffc72f6ac8c
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/57/803057/1 && git format-patch -1 --stdout FETCH_HEAD,"['galaxy.yml', '.zuul.yaml']",2,41608888877ca6ad433102933294d5631ca4193b,211, voting: true - openstack-tox-linters-ansible-2.11 - ansible-collections-openstack-functional-devstack-queens-ansible-2.11, voting: false # - openstack-tox-linters-ansible-2.11 # - ansible-collections-openstack-functional-devstack-queens-ansible-2.11,4,4
openstack%2Ftripleo-validations~stable%2Fussuri~Id047fe378cf512b985c9d7478a991f11b280102b,openstack/tripleo-validations,stable/ussuri,Id047fe378cf512b985c9d7478a991f11b280102b,Introducing the oslo_config_validator role,MERGED,2021-07-05 14:40:44.000000000,2021-07-31 05:08:19.000000000,2021-07-31 05:03:23.000000000,"[{'_account_id': 11491}, {'_account_id': 22348}, {'_account_id': 27427}]","[{'number': 1, 'created': '2021-07-05 14:40:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/d258ab54601a2e110ab57553a338d63b25fcc5d4', 'message': ""Introducing the oslo_config_validator role\n\nThis role is intended to leverage the `oslo-config-validator` on each one\nof the configuration files found on a deployment. The goal is to quickly\ncatch erroneous configurations.\n\nWhen called manually, it will also be possible to generate a report\nreturning all the differences between the current configuration and the\ndefault configuration\n\nOne last thing, it will also validate the values of some specific\nsettings, based on the invalid_settings dict in the configuration.\nBecause of that, we moved some checks in nova_event_callback to the\noslo_config_validator role.\n\nNOTE(dvd): Removing backup-and-restore group from this branch as it's\nnot available prior to Wallaby.\n\nDepends-On: https://review.opendev.org/c/openstack/oslo.config/+/794815\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1940815\nResolves: rhbz#1940815\nChange-Id: Id047fe378cf512b985c9d7478a991f11b280102b\n(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)\n(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)\n""}, {'number': 2, 'created': '2021-07-06 10:30:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/e19b90230afe6fd1beae6bf00989aef14ae867ed', 'message': ""Introducing the oslo_config_validator role\n\nThis role is intended to leverage the `oslo-config-validator` on each one\nof the configuration files found on a deployment. The goal is to quickly\ncatch erroneous configurations.\n\nWhen called manually, it will also be possible to generate a report\nreturning all the differences between the current configuration and the\ndefault configuration\n\nOne last thing, it will also validate the values of some specific\nsettings, based on the invalid_settings dict in the configuration.\nBecause of that, we moved some checks in nova_event_callback to the\noslo_config_validator role.\n\nNOTE(dvd): Removing backup-and-restore group from this branch as it's\nnot available prior to Wallaby.\n\nDepends-On: https://review.opendev.org/c/openstack/oslo.config/+/794815\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1940815\nResolves: rhbz#1940815\nChange-Id: Id047fe378cf512b985c9d7478a991f11b280102b\n(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)\n(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)\n""}, {'number': 3, 'created': '2021-07-08 22:42:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/3ce98d552c76045a6c002f7668aeca1239a1a2c4', 'message': ""Introducing the oslo_config_validator role\n\nThis role is intended to leverage the `oslo-config-validator` on each one\nof the configuration files found on a deployment. The goal is to quickly\ncatch erroneous configurations.\n\nWhen called manually, it will also be possible to generate a report\nreturning all the differences between the current configuration and the\ndefault configuration\n\nOne last thing, it will also validate the values of some specific\nsettings, based on the invalid_settings dict in the configuration.\nBecause of that, we moved some checks in nova_event_callback to the\noslo_config_validator role.\n\nNOTE(dvd): Removing backup-and-restore group from this branch as it's\nnot available prior to Wallaby.\n\nDepends-On: https://review.opendev.org/c/openstack/oslo.config/+/794815\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1940815\nResolves: rhbz#1940815\nChange-Id: Id047fe378cf512b985c9d7478a991f11b280102b\n(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)\n(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)\n""}, {'number': 4, 'created': '2021-07-09 14:20:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/943eadb04e2d957b098d527ba951403c209d7404', 'message': ""Introducing the oslo_config_validator role\n\nThis role is intended to leverage the `oslo-config-validator` on each one\nof the configuration files found on a deployment. The goal is to quickly\ncatch erroneous configurations.\n\nWhen called manually, it will also be possible to generate a report\nreturning all the differences between the current configuration and the\ndefault configuration\n\nOne last thing, it will also validate the values of some specific\nsettings, based on the invalid_settings dict in the configuration.\nBecause of that, we moved some checks in nova_event_callback to the\noslo_config_validator role.\n\nNOTE(dvd): Removing backup-and-restore group from this branch as it's\nnot available prior to Wallaby.\n\nDepends-On: https://review.opendev.org/c/openstack/oslo.config/+/794815\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1940815\nResolves: rhbz#1940815\nChange-Id: Id047fe378cf512b985c9d7478a991f11b280102b\n(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)\n(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)\n""}, {'number': 5, 'created': '2021-07-09 18:45:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/d6a7024660d65537f1bd6cbbb155c403e99e1d49', 'message': ""Introducing the oslo_config_validator role\n\nThis role is intended to leverage the `oslo-config-validator` on each one\nof the configuration files found on a deployment. The goal is to quickly\ncatch erroneous configurations.\n\nWhen called manually, it will also be possible to generate a report\nreturning all the differences between the current configuration and the\ndefault configuration\n\nOne last thing, it will also validate the values of some specific\nsettings, based on the invalid_settings dict in the configuration.\nBecause of that, we moved some checks in nova_event_callback to the\noslo_config_validator role.\n\nNOTE(dvd): Removing backup-and-restore group from this branch as it's\nnot available prior to Wallaby.\n\nDepends-On: https://review.opendev.org/c/openstack/oslo.config/+/794815\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1940815\nResolves: rhbz#1940815\nChange-Id: Id047fe378cf512b985c9d7478a991f11b280102b\n(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)\n(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)\n""}, {'number': 6, 'created': '2021-07-11 02:33:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/2f28d8464ee0d0917b61b71fd459f40431b520c5', 'message': ""Introducing the oslo_config_validator role\n\nThis role is intended to leverage the `oslo-config-validator` on each one\nof the configuration files found on a deployment. The goal is to quickly\ncatch erroneous configurations.\n\nWhen called manually, it will also be possible to generate a report\nreturning all the differences between the current configuration and the\ndefault configuration\n\nOne last thing, it will also validate the values of some specific\nsettings, based on the invalid_settings dict in the configuration.\nBecause of that, we moved some checks in nova_event_callback to the\noslo_config_validator role.\n\nNOTE(dvd): Removing backup-and-restore group from this branch as it's\nnot available prior to Wallaby.\n\nDepends-On: https://review.opendev.org/c/openstack/oslo.config/+/794815\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1940815\nResolves: rhbz#1940815\nChange-Id: Id047fe378cf512b985c9d7478a991f11b280102b\n(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)\n(cherry picked from commit fab6429d98dbef835efc422b471a0cd795edfdb9)\n(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)\n""}, {'number': 7, 'created': '2021-07-11 02:35:26.000000000', 'files': ['roles/oslo_config_validator/resources/playbooks/converge.yml', 'roles/oslo_config_validator/tasks/container_run.yml', 'playbooks/oslo-config-validator.yaml', 'roles/oslo_config_validator/defaults/main.yml', 'roles/oslo_config_validator/resources/playbooks/prepare.yml', 'roles/oslo_config_validator/tasks/report_generation.yml', 'roles/oslo_config_validator/resources/library/podman_container.py', 'roles/oslo_config_validator/tasks/validate_config.yml', 'roles/oslo_config_validator/molecule/mocked_failure/molecule.yml', 'roles/oslo_config_validator/tasks/opt_data_format.yml', 'zuul.d/molecule.yaml', 'roles/oslo_config_validator/vars/main.yml', 'roles/oslo_config_validator/molecule/default/molecule.yml', 'doc/source/roles/role-oslo_config_validator.rst', 'roles/oslo_config_validator/tasks/build_validation_config.yml', 'roles/oslo_config_validator/resources/library/podman_container_info.py', 'roles/oslo_config_validator/tasks/validation_command.yml', 'roles/oslo_config_validator/tasks/invalidate_config.yml', 'roles/oslo_config_validator/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/92c55031e6f17e3a149da4816fbf5cefd5185d44', 'message': ""Introducing the oslo_config_validator role\n\nThis role is intended to leverage the `oslo-config-validator` on each one\nof the configuration files found on a deployment. The goal is to quickly\ncatch erroneous configurations.\n\nWhen called manually, it will also be possible to generate a report\nreturning all the differences between the current configuration and the\ndefault configuration\n\nOne last thing, it will also validate the values of some specific\nsettings, based on the invalid_settings dict in the configuration.\nBecause of that, we moved some checks in nova_event_callback to the\noslo_config_validator role.\n\nNOTE(dvd): Removing backup-and-restore group from this branch as it's\nnot available prior to Wallaby.\n\nDepends-On: https://review.opendev.org/c/openstack/oslo.config/+/794816\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1940815\nResolves: rhbz#1940815\nChange-Id: Id047fe378cf512b985c9d7478a991f11b280102b\n(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)\n(cherry picked from commit fab6429d98dbef835efc422b471a0cd795edfdb9)\n(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)\n""}]",0,799482,92c55031e6f17e3a149da4816fbf5cefd5185d44,29,3,7,27419,,,0,"Introducing the oslo_config_validator role

This role is intended to leverage the `oslo-config-validator` on each one
of the configuration files found on a deployment. The goal is to quickly
catch erroneous configurations.

When called manually, it will also be possible to generate a report
returning all the differences between the current configuration and the
default configuration

One last thing, it will also validate the values of some specific
settings, based on the invalid_settings dict in the configuration.
Because of that, we moved some checks in nova_event_callback to the
oslo_config_validator role.

NOTE(dvd): Removing backup-and-restore group from this branch as it's
not available prior to Wallaby.

Depends-On: https://review.opendev.org/c/openstack/oslo.config/+/794816
Related: https://bugzilla.redhat.com/show_bug.cgi?id=1940815
Resolves: rhbz#1940815
Change-Id: Id047fe378cf512b985c9d7478a991f11b280102b
(cherry picked from commit 4aaca32f19af6426a6f1eb6ea896e8d10458928d)
(cherry picked from commit fab6429d98dbef835efc422b471a0cd795edfdb9)
(cherry picked from commit 727625fe95077158843f4a274693b6343d1f1e01)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/82/799482/5 && git format-patch -1 --stdout FETCH_HEAD,"['roles/oslo_config_validator/resources/playbooks/converge.yml', 'roles/oslo_config_validator/tasks/container_run.yml', 'playbooks/oslo-config-validator.yaml', 'roles/oslo_config_validator/defaults/main.yml', 'roles/oslo_config_validator/resources/playbooks/prepare.yml', 'roles/oslo_config_validator/tasks/report_generation.yml', 'roles/oslo_config_validator/resources/library/podman_container.py', 'roles/oslo_config_validator/tasks/validate_config.yml', 'roles/oslo_config_validator/molecule/mocked_failure/molecule.yml', 'roles/oslo_config_validator/tasks/opt_data_format.yml', 'zuul.d/molecule.yaml', 'roles/oslo_config_validator/vars/main.yml', 'roles/oslo_config_validator/molecule/default/molecule.yml', 'doc/source/roles/role-oslo_config_validator.rst', 'roles/oslo_config_validator/tasks/build_validation_config.yml', 'roles/oslo_config_validator/resources/library/podman_container_info.py', 'roles/oslo_config_validator/tasks/validation_command.yml', 'roles/oslo_config_validator/tasks/invalidate_config.yml', 'roles/oslo_config_validator/tasks/main.yml']",19,d258ab54601a2e110ab57553a338d63b25fcc5d4,automated_config_validation,"--- # Copyright 2021 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # tasks - name: Include the config builder tasks include_tasks: build_validation_config.yml - name: Validate configuration when: - 'oslo_config_validator_validation | bool or oslo_config_validator_report | bool' include_tasks: validate_config.yml - name: Invalidate configuration when: - oslo_config_validator_invalid_settings | bool include_tasks: invalidate_config.yml - name: Config validation reporting when: - oslo_config_validator_report | bool include_tasks: report_generation.yml - name: Config validation assertions block: - name: Verifying setting validation assert: that: - not service.output | count fail_msg: | Config file {{ service.config_file }} for {{ service.service }} has returned validation errors: {% for msg in service.output %} {{ msg }} {% endfor %} loop: ""{{ validation_output }}"" loop_control: loop_var: service label: ""{{ service.config_file }}/{{ service.service }}"" register: validation_errors ignore_errors: true - name: Asserted failure when: ""'failed' in validation_errors or (invalid_settings is defined and invalid_settings | count)"" fail: msg: | Configuration validation failed for at least one service: {% if validation_errors.results | count %}{% for service in validation_errors.results %}{% if service.failed %}{{ service.msg }}{% endif %}{% endfor %}{% endif %}{% if invalid_settings is defined and invalid_settings | count %}{% for message in invalid_settings %}{{ message }} {% endfor %}{% endif %} ",,2450,0
openstack%2Ftripleo-heat-templates~master~I9b7edee92a3aeadd093ff997d23d085d73a04960,openstack/tripleo-heat-templates,master,I9b7edee92a3aeadd093ff997d23d085d73a04960,Fix support for json-rpc in ironic,MERGED,2021-07-29 04:12:15.000000000,2021-07-31 05:03:26.000000000,2021-07-31 05:03:26.000000000,"[{'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-29 04:12:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/75de4c9560d8ebd0a8e9a0d77e835fac65b5654a', 'message': 'WIP Fix support for json-rpc in ironic\n\nThis fixes support for IronicRpcTransport and enables json-rpc\nfor undercloud ironic.\n\nChange-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960\n'}, {'number': 2, 'created': '2021-07-29 05:52:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e307ec1d7839c2d167f5ace96a2dd70a3530196a', 'message': 'WIP Fix support for json-rpc in ironic\n\nThis fixes support for IronicRpcTransport and enables json-rpc\nfor undercloud ironic.\n\nChange-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960\n'}, {'number': 3, 'created': '2021-07-29 07:43:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/2f50412a844f8c0773bdfcbb46aa2284f43e2a82', 'message': 'WIP Fix support for json-rpc in ironic\n\nThis fixes support for IronicRpcTransport and enables json-rpc\nfor undercloud ironic.\n\nChange-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960\n'}, {'number': 4, 'created': '2021-07-29 10:35:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e39ed2b147ce9f4f2f56fa680c9e4081b7f00d12', 'message': 'Fix support for json-rpc in ironic\n\nThis fixes support for IronicRpcTransport and enables json-rpc\nfor undercloud ironic.\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/802858\nChange-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960\n'}, {'number': 5, 'created': '2021-07-29 12:17:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b26169e7a9fdf5aa600cd5f5908d0b05a1e8e78b', 'message': 'Fix support for json-rpc in ironic\n\nThis fixes support for IronicRpcTransport and enables json-rpc\nfor undercloud ironic.\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/802858\nChange-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960\n'}, {'number': 6, 'created': '2021-07-30 04:07:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4a8ba9e0e3b75ca775db2ac45584df27348c5487', 'message': 'Fix support for json-rpc in ironic\n\nThis fixes support for IronicRpcTransport and enables json-rpc\nfor undercloud ironic.\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/802858\nChange-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960\n'}, {'number': 7, 'created': '2021-07-30 12:47:35.000000000', 'files': ['environments/undercloud.yaml', 'environments/ssl/tls-endpoints-public-ip.yaml', 'deployment/ironic/ironic-conductor-container-puppet.yaml', 'environments/undercloud/undercloud-minion.yaml', 'deployment/ironic/ironic-api-container-puppet.yaml', 'environments/enable-designate.yaml', 'environments/ssl/tls-endpoints-public-dns.yaml', 'environments/standalone/standalone-tripleo.yaml', 'sample-env-generator/undercloud-minion.yaml', 'environments/ssl/tls-everywhere-endpoints-dns.yaml', 'deployment/ironic/ironic-base-puppet.yaml', 'environments/standalone/standalone-overcloud.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bd20c595897707b2428abce67a2a7b0cb0cfb543', 'message': 'Fix support for json-rpc in ironic\n\nThis fixes support for IronicRpcTransport and enables json-rpc\nfor undercloud ironic.\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/802858\nChange-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960\n'}]",13,802823,bd20c595897707b2428abce67a2a7b0cb0cfb543,40,7,7,8833,,,0,"Fix support for json-rpc in ironic

This fixes support for IronicRpcTransport and enables json-rpc
for undercloud ironic.

Depends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/802858
Change-Id: I9b7edee92a3aeadd093ff997d23d085d73a04960
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/23/802823/2 && git format-patch -1 --stdout FETCH_HEAD,"['environments/undercloud.yaml', 'deployment/ironic/ironic-conductor-container-puppet.yaml', 'deployment/ironic/ironic-api-container-puppet.yaml', 'deployment/ironic/ironic-base-puppet.yaml']",4,75de4c9560d8ebd0a8e9a0d77e835fac65b5654a,json_rpc," default: 'oslo' - allowed_values: [ 'oslo', 'json-rpc']"," default: '' - allowed_values: [ '', 'oslo', 'json-rpc']",71,3
openstack%2Fvalidations-libs~master~I947f0bcc2d4a6152de41b1592dc51a3757f0a8af,openstack/validations-libs,master,I947f0bcc2d4a6152de41b1592dc51a3757f0a8af,Triggering the 'tripleo-ci-centos-8-undercloud-containers',MERGED,2021-07-16 11:22:53.000000000,2021-07-31 05:03:24.000000000,2021-07-31 05:03:24.000000000,"[{'_account_id': 11491}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-07-16 11:22:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/5a4d0c446991ea2f52bb243bed51541c5f555ee3', 'message': ""DNM Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 2, 'created': '2021-07-16 12:39:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/9f8338a3a69135226ce068d89f4e1dd59c03f740', 'message': ""DNM Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nDepends-On: https://review.opendev.org/c/openstack/python-tripleoclient/+/801019\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 3, 'created': '2021-07-19 06:20:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/9448d4b7a44389fb8a7b897dbcce28720d849cfa', 'message': ""DNM Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 4, 'created': '2021-07-26 12:47:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/304a0533a52bee0f6bbbe0f15bfc2e5d73bf7659', 'message': ""DNM Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 5, 'created': '2021-07-27 13:48:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/2705381b89a1142c5917fff3a64ac7043025e48e', 'message': ""DNM Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 6, 'created': '2021-07-29 15:08:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/d7f10f7c9dfd905b274badc3e0cc67bd504ea7fd', 'message': ""Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 7, 'created': '2021-07-29 15:08:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/428ae7768867263334db7a8f96897809c5a07540', 'message': ""Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 8, 'created': '2021-07-30 06:52:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/dd565fb7ce5ec6021faa0ecb6d1dcf4501a35016', 'message': ""Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nThis job initiates checks defined in the 'tripleoclient.undercloud_preflight'\nmodule, which use the 'validations_libs.validation_actions.ValidationActions' class.\n\nAny issues, arising in the integration of the aformentioned modules,\nshould be detected during the job run.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}, {'number': 9, 'created': '2021-07-30 11:41:12.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/07e484a8616a4f51e998f0e8ae865e0781d0b20b', 'message': ""Triggering the 'tripleo-ci-centos-8-undercloud-containers'\n\nThis job initiates checks defined in the 'tripleoclient.undercloud_preflight'\nmodule, which use the 'validations_libs.validation_actions.ValidationActions' class.\n\nAny issues, arising in the integration of the aformentioned modules,\nshould be detected during the job run.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af\n""}]",2,801049,07e484a8616a4f51e998f0e8ae865e0781d0b20b,30,5,9,32926,,,0,"Triggering the 'tripleo-ci-centos-8-undercloud-containers'

This job initiates checks defined in the 'tripleoclient.undercloud_preflight'
module, which use the 'validations_libs.validation_actions.ValidationActions' class.

Any issues, arising in the integration of the aformentioned modules,
should be detected during the job run.

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I947f0bcc2d4a6152de41b1592dc51a3757f0a8af
",git fetch https://review.opendev.org/openstack/validations-libs refs/changes/49/801049/9 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,5a4d0c446991ea2f52bb243bed51541c5f555ee3,ci, - tripleo-ci-centos-8-undercloud-containers: &undercloud_containers_job_params dependencies: - openstack-tox-linters - openstack-tox-cover - validations-libs-functional - tripleo-ci-centos-8-undercloud-containers: *undercloud_containers_job_params,,6,0
openstack%2Ftripleo-validations~stable%2Fussuri~I8eead4d1a4ceac3d053af69e302c5b757c45cdaa,openstack/tripleo-validations,stable/ussuri,I8eead4d1a4ceac3d053af69e302c5b757c45cdaa,[ussuri-train-only] Use more recent version of ansible-lint,MERGED,2021-07-08 22:42:08.000000000,2021-07-31 05:03:21.000000000,2021-07-31 05:03:21.000000000,"[{'_account_id': 11491}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-08 22:42:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/726a6f4595be03b9198354c0a2d4c2447a7b1a54', 'message': 'Use more recent version of ansible-lint\n\nwe need fix[1] to bypass RepresenterError when using to_yaml filter.\n\n[1] https://github.com/ansible/ansible-lint/pull/518\n\nChange-Id: I8eead4d1a4ceac3d053af69e302c5b757c45cdaa\n'}, {'number': 2, 'created': '2021-07-09 14:18:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/82b305263e1bddbb6bff0046880c950d29cb217d', 'message': 'Use more recent version of ansible-lint\n\nwe need fix[1] to bypass RepresenterError when using to_yaml filter.\n\n[1] https://github.com/ansible/ansible-lint/pull/518\n\nChange-Id: I8eead4d1a4ceac3d053af69e302c5b757c45cdaa\n'}, {'number': 3, 'created': '2021-07-09 18:45:24.000000000', 'files': ['.ansible-lint_rules/ValidationHasMetadataRule.py', '.pre-commit-config.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/d88808d0636f435cfc98c9638ecd57613fd19aae', 'message': '[ussuri-train-only] Use more recent version of ansible-lint\n\nwe need fix[1] to bypass RepresenterError when using to_yaml filter.\n\n[1] https://github.com/ansible/ansible-lint/pull/518\n\nChange-Id: I8eead4d1a4ceac3d053af69e302c5b757c45cdaa\n'}]",0,800122,d88808d0636f435cfc98c9638ecd57613fd19aae,17,5,3,27419,,,0,"[ussuri-train-only] Use more recent version of ansible-lint

we need fix[1] to bypass RepresenterError when using to_yaml filter.

[1] https://github.com/ansible/ansible-lint/pull/518

Change-Id: I8eead4d1a4ceac3d053af69e302c5b757c45cdaa
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/22/800122/3 && git format-patch -1 --stdout FETCH_HEAD,"['.ansible-lint_rules/ValidationHasMetadataRule.py', '.pre-commit-config.yaml']",2,726a6f4595be03b9198354c0a2d4c2447a7b1a54,, rev: v4.3.1, rev: v4.2.0,2,3
openstack%2Ftripleo-validations~stable%2Fussuri~Iac63dc6f161a0e885110a246b68001522a6f62e3,openstack/tripleo-validations,stable/ussuri,Iac63dc6f161a0e885110a246b68001522a6f62e3,Add zuul.d/molecule.yaml file back in the yamllint ignore list,MERGED,2021-07-06 10:30:55.000000000,2021-07-31 05:03:20.000000000,2021-07-31 05:03:20.000000000,"[{'_account_id': 22348}, {'_account_id': 27419}, {'_account_id': 27427}]","[{'number': 1, 'created': '2021-07-06 10:30:55.000000000', 'files': ['zuul.d/molecule.yaml', '.yamllint'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/0ca6ed0c38e6f65fc7b6f8974369fac407c257fe', 'message': 'Add zuul.d/molecule.yaml file back in the yamllint ignore list\n\nThe validation_init role auto generates the molecule.yaml file when\nadding a new role. But, due to [1][2], the to_nice_yaml filter is not\ncorrectly indenting lists and will break the indentation every time a\nnew validation will be created.\n\nThis patch adds this file to the yamllint ignore list and provides a new\nmolecule.yaml sorted by job names as the validation_init role will\ngenerate in a follow up patch.\n\nMoreover, this patch enables the oslo_config_validator molecule job in\nthe check/gate as it was not added in the initial patch[3].\n\n[1] https://github.com/ansible/ansible/issues/48865\n[2] https://github.com/yaml/pyyaml/issues/234\n[3] https://review.opendev.org/c/openstack/tripleo-validations/+/789698\n\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\nChange-Id: Iac63dc6f161a0e885110a246b68001522a6f62e3\n(cherry picked from commit 41dcda85921b4a79a46eaccbe28f0fffd516e3cf)\n(cherry picked from commit f798c56ba56c1fbda7f7c517044155d80e913ec2)\n(cherry picked from commit 04c08718e6cb5a1a6fe646277c2ba5f0b308d21d)\n'}]",0,799626,0ca6ed0c38e6f65fc7b6f8974369fac407c257fe,7,3,1,11491,,,0,"Add zuul.d/molecule.yaml file back in the yamllint ignore list

The validation_init role auto generates the molecule.yaml file when
adding a new role. But, due to [1][2], the to_nice_yaml filter is not
correctly indenting lists and will break the indentation every time a
new validation will be created.

This patch adds this file to the yamllint ignore list and provides a new
molecule.yaml sorted by job names as the validation_init role will
generate in a follow up patch.

Moreover, this patch enables the oslo_config_validator molecule job in
the check/gate as it was not added in the initial patch[3].

[1] https://github.com/ansible/ansible/issues/48865
[2] https://github.com/yaml/pyyaml/issues/234
[3] https://review.opendev.org/c/openstack/tripleo-validations/+/789698

Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
Change-Id: Iac63dc6f161a0e885110a246b68001522a6f62e3
(cherry picked from commit 41dcda85921b4a79a46eaccbe28f0fffd516e3cf)
(cherry picked from commit f798c56ba56c1fbda7f7c517044155d80e913ec2)
(cherry picked from commit 04c08718e6cb5a1a6fe646277c2ba5f0b308d21d)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/26/799626/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/molecule.yaml', '.yamllint']",2,0ca6ed0c38e6f65fc7b6f8974369fac407c257fe,, zuul.d/molecule.yaml,,454,451
openstack%2Ftripleo-validations~stable%2Fvictoria~I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,openstack/tripleo-validations,stable/victoria,I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,NVF OvS DPDK instance emulatorpin validation fix,MERGED,2021-07-30 04:51:12.000000000,2021-07-31 05:03:18.000000000,2021-07-31 05:03:18.000000000,"[{'_account_id': 7353}, {'_account_id': 11491}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-30 04:51:12.000000000', 'files': ['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/69ba3d7c2d94b7ebf284b7e88d4fd97740dcd077', 'message': 'NVF OvS DPDK instance emulatorpin validation fix\n\nThis change is to fix the emulatorpin cpus validation of NFV\nOvS DPDK instance.\n\nChange-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a\n(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)\n'}]",0,802937,69ba3d7c2d94b7ebf284b7e88d4fd97740dcd077,6,6,1,22865,,,0,"NVF OvS DPDK instance emulatorpin validation fix

This change is to fix the emulatorpin cpus validation of NFV
OvS DPDK instance.

Change-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a
(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/37/802937/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'],1,69ba3d7c2d94b7ebf284b7e88d4fd97740dcd077,emulatorpin-validation-issue-stable/wallaby-stable/victoria," when: ""{{ emulatorpin.emulatorpin.cpuset in vcpus_list | list }}"""," when: ""{{ not emulatorpin.emulatorpin.cpuset in vcpus_list | list }}""",1,1
openstack%2Ftripleo-validations~stable%2Fwallaby~I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,openstack/tripleo-validations,stable/wallaby,I4e1bd9ca270bc7503beb0a0074e4e2aff887119a,NVF OvS DPDK instance emulatorpin validation fix,MERGED,2021-07-30 04:50:54.000000000,2021-07-31 05:03:17.000000000,2021-07-31 05:03:17.000000000,"[{'_account_id': 7353}, {'_account_id': 11491}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-30 04:50:54.000000000', 'files': ['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/d82aa0d36a67d7a940f344537f63b03f6ac354c3', 'message': 'NVF OvS DPDK instance emulatorpin validation fix\n\nThis change is to fix the emulatorpin cpus validation of NFV\nOvS DPDK instance.\n\nChange-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a\n(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)\n'}]",0,802936,d82aa0d36a67d7a940f344537f63b03f6ac354c3,6,6,1,22865,,,0,"NVF OvS DPDK instance emulatorpin validation fix

This change is to fix the emulatorpin cpus validation of NFV
OvS DPDK instance.

Change-Id: I4e1bd9ca270bc7503beb0a0074e4e2aff887119a
(cherry picked from commit 7136337b091e7e9a2a6facee658a8bbac8cd68df)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/36/802936/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml'],1,d82aa0d36a67d7a940f344537f63b03f6ac354c3,emulatorpin-validation-issue-stable/wallaby," when: ""{{ emulatorpin.emulatorpin.cpuset in vcpus_list | list }}"""," when: ""{{ not emulatorpin.emulatorpin.cpuset in vcpus_list | list }}""",1,1
openstack%2Ftripleo-validations~stable%2Ftrain~I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b,openstack/tripleo-validations,stable/train,I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b,oslo_config_validator: Setting container network to none,MERGED,2021-07-29 01:45:35.000000000,2021-07-31 05:03:16.000000000,2021-07-31 05:03:16.000000000,"[{'_account_id': 11090}, {'_account_id': 11491}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 27427}]","[{'number': 1, 'created': '2021-07-29 01:45:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/8a5e0a5055ae1f0d81a0ad321d799fbc02a0037e', 'message': 'oslo_config_validator: Setting container network to none\n\nWhen spinning a container, podman_container defaults network to bridge\nas opposed to docker_container that defaults to none.\n\nThis causes ""Missing CNI default network"" errors and doesn\'t run the\noslo-config-validator command as expected.\n\nChange-Id: I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b\n(cherry picked from commit 9311c11823c4b9dbc29a3957bf760da6fb25c53a)\n(cherry picked from commit bc692be30d7aefde4c11ad74a6c897243df5f8d2)\n(cherry picked from commit 16c6893280200a2317c15678b05535e74d5e90e9)\n(cherry picked from commit 5f949e3da0fd0ae09671c4665ff77c39fce9b88b)\n'}, {'number': 2, 'created': '2021-07-29 01:47:31.000000000', 'files': ['roles/oslo_config_validator/tasks/container_run.yml', 'roles/oslo_config_validator/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/4640b2286d87da40eb576065844d29d95503c1a7', 'message': 'oslo_config_validator: Setting container network to none\n\nWhen spinning a container, podman_container defaults network to bridge\nas opposed to docker_container that defaults to none.\n\nThis causes ""Missing CNI default network"" errors and doesn\'t run the\noslo-config-validator command as expected.\n\nChange-Id: I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b\n(cherry picked from commit 9311c11823c4b9dbc29a3957bf760da6fb25c53a)\n(cherry picked from commit bc692be30d7aefde4c11ad74a6c897243df5f8d2)\n(cherry picked from commit 16c6893280200a2317c15678b05535e74d5e90e9)\n(cherry picked from commit 5f949e3da0fd0ae09671c4665ff77c39fce9b88b)\n'}]",0,802779,4640b2286d87da40eb576065844d29d95503c1a7,8,5,2,27419,,,0,"oslo_config_validator: Setting container network to none

When spinning a container, podman_container defaults network to bridge
as opposed to docker_container that defaults to none.

This causes ""Missing CNI default network"" errors and doesn't run the
oslo-config-validator command as expected.

Change-Id: I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b
(cherry picked from commit 9311c11823c4b9dbc29a3957bf760da6fb25c53a)
(cherry picked from commit bc692be30d7aefde4c11ad74a6c897243df5f8d2)
(cherry picked from commit 16c6893280200a2317c15678b05535e74d5e90e9)
(cherry picked from commit 5f949e3da0fd0ae09671c4665ff77c39fce9b88b)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/79/802779/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/oslo_config_validator/tasks/container_run.yml', 'roles/oslo_config_validator/defaults/main.yml']",2,8a5e0a5055ae1f0d81a0ad321d799fbc02a0037e,," - 'INFO:oslo_utils.netutils:Could not determine default network interface, using .*'",,19,0
openstack%2Ftripleo-validations~stable%2Fvictoria~I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b,openstack/tripleo-validations,stable/victoria,I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b,oslo_config_validator: Setting container network to none,MERGED,2021-07-29 01:29:03.000000000,2021-07-31 05:03:14.000000000,2021-07-31 05:03:14.000000000,"[{'_account_id': 11090}, {'_account_id': 11491}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 27427}]","[{'number': 1, 'created': '2021-07-29 01:29:03.000000000', 'files': ['roles/oslo_config_validator/tasks/container_run.yml', 'roles/oslo_config_validator/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/16c6893280200a2317c15678b05535e74d5e90e9', 'message': 'oslo_config_validator: Setting container network to none\n\nWhen spinning a container, podman_container defaults network to bridge\nas opposed to docker_container that defaults to none.\n\nThis causes ""Missing CNI default network"" errors and doesn\'t run the\noslo-config-validator command as expected.\n\nChange-Id: I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b\n(cherry picked from commit 9311c11823c4b9dbc29a3957bf760da6fb25c53a)\n(cherry picked from commit bc692be30d7aefde4c11ad74a6c897243df5f8d2)\n'}]",0,802777,16c6893280200a2317c15678b05535e74d5e90e9,6,5,1,27419,,,0,"oslo_config_validator: Setting container network to none

When spinning a container, podman_container defaults network to bridge
as opposed to docker_container that defaults to none.

This causes ""Missing CNI default network"" errors and doesn't run the
oslo-config-validator command as expected.

Change-Id: I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b
(cherry picked from commit 9311c11823c4b9dbc29a3957bf760da6fb25c53a)
(cherry picked from commit bc692be30d7aefde4c11ad74a6c897243df5f8d2)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/77/802777/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/oslo_config_validator/tasks/container_run.yml', 'roles/oslo_config_validator/defaults/main.yml']",2,16c6893280200a2317c15678b05535e74d5e90e9,," - 'INFO:oslo_utils.netutils:Could not determine default network interface, using .*'",,2,0
openstack%2Ftripleo-validations~stable%2Fwallaby~I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b,openstack/tripleo-validations,stable/wallaby,I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b,oslo_config_validator: Setting container network to none,MERGED,2021-07-29 01:28:52.000000000,2021-07-31 05:03:13.000000000,2021-07-31 05:03:13.000000000,"[{'_account_id': 11090}, {'_account_id': 11491}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 27427}]","[{'number': 1, 'created': '2021-07-29 01:28:52.000000000', 'files': ['roles/oslo_config_validator/tasks/container_run.yml', 'roles/oslo_config_validator/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/bc692be30d7aefde4c11ad74a6c897243df5f8d2', 'message': 'oslo_config_validator: Setting container network to none\n\nWhen spinning a container, podman_container defaults network to bridge\nas opposed to docker_container that defaults to none.\n\nThis causes ""Missing CNI default network"" errors and doesn\'t run the\noslo-config-validator command as expected.\n\nChange-Id: I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b\n(cherry picked from commit 9311c11823c4b9dbc29a3957bf760da6fb25c53a)\n'}]",0,802776,bc692be30d7aefde4c11ad74a6c897243df5f8d2,6,5,1,27419,,,0,"oslo_config_validator: Setting container network to none

When spinning a container, podman_container defaults network to bridge
as opposed to docker_container that defaults to none.

This causes ""Missing CNI default network"" errors and doesn't run the
oslo-config-validator command as expected.

Change-Id: I4faeab61421a9dbd6e5e2ea92c7e64ab1467453b
(cherry picked from commit 9311c11823c4b9dbc29a3957bf760da6fb25c53a)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/76/802776/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/oslo_config_validator/tasks/container_run.yml', 'roles/oslo_config_validator/defaults/main.yml']",2,bc692be30d7aefde4c11ad74a6c897243df5f8d2,," - 'INFO:oslo_utils.netutils:Could not determine default network interface, using .*'",,2,0
openstack%2Ftripleo-upgrade~stable%2Ftrain~Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,openstack/tripleo-upgrade,stable/train,Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80,Run Ceph upgrade only once.,MERGED,2021-07-30 14:59:36.000000000,2021-07-31 05:03:12.000000000,2021-07-31 05:03:12.000000000,"[{'_account_id': 6816}, {'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 14:59:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/91003a7cdb734c56097c3bcd1f6b503d2604ae23', 'message': 'Run Ceph upgrade only once.\n\nThe ceph ugprade playbook was being called twice, which did spend extra\ntime for the test.\n\nIt should be enough to upgrade ceph only once.\n\nChange-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80\n'}, {'number': 2, 'created': '2021-07-30 15:14:07.000000000', 'files': ['tasks/fast-forward-upgrade/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/3d53a15819ca30c8cfd5eb850d66960ed6505405', 'message': 'Run Ceph upgrade only once.\n\nThe ceph ugprade playbook was being called twice, which did spend extra\ntime for the test.\n\nIt should be enough to upgrade ceph only once.\n\nChange-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80\n'}]",0,803049,3d53a15819ca30c8cfd5eb850d66960ed6505405,8,4,2,26343,,,0,"Run Ceph upgrade only once.

The ceph ugprade playbook was being called twice, which did spend extra
time for the test.

It should be enough to upgrade ceph only once.

Change-Id: Ifc9a6695f2c79c6bdae12f0899a56d5cbda90e80
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/49/803049/2 && git format-patch -1 --stdout FETCH_HEAD,['tasks/fast-forward-upgrade/main.yml'],1,91003a7cdb734c56097c3bcd1f6b503d2604ae23,,, - name: run FFU ceph osd nodes upgrade scripts include_tasks: ../upgrade/ceph_upgrade_run.yml tags: ffu_overcloud_ceph ,0,4
openstack%2Ftripleo-ci~master~I5855de77b700124be0d0332ebe6a3f80524c521e,openstack/tripleo-ci,master,I5855de77b700124be0d0332ebe6a3f80524c521e,Stop running minion for Wallaby+,MERGED,2021-07-30 14:33:31.000000000,2021-07-31 05:03:10.000000000,2021-07-31 05:03:10.000000000,"[{'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 9976}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 14:33:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/15eaeee9b716ed12f27a66aa2e779272c90c1778', 'message': 'Stop running minion for Wallaby+\n\nWith the switch to ephemeral heat for the overcloud, the minion is no\nlonger viable. This change updates the branches to only run T->V where\nthe minion should work and was supported.\n\nChange-Id: I5855de77b700124be0d0332ebe6a3f80524c521e\n'}, {'number': 2, 'created': '2021-07-30 14:34:01.000000000', 'files': ['zuul.d/multinode-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d52d282afe2548f58b05bca936dbbd17f37c3cf9', 'message': 'Stop running minion for Wallaby+\n\nWith the switch to ephemeral heat for the overcloud, the minion is no\nlonger viable. This change updates the branches to only run T->V where\nthe minion should work and was supported.\n\nRelated-Bug: #1938539\nChange-Id: I5855de77b700124be0d0332ebe6a3f80524c521e\n'}]",0,803043,d52d282afe2548f58b05bca936dbbd17f37c3cf9,10,6,2,14985,,,0,"Stop running minion for Wallaby+

With the switch to ephemeral heat for the overcloud, the minion is no
longer viable. This change updates the branches to only run T->V where
the minion should work and was supported.

Related-Bug: #1938539
Change-Id: I5855de77b700124be0d0332ebe6a3f80524c521e
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/43/803043/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/multinode-jobs.yaml'],1,15eaeee9b716ed12f27a66aa2e779272c90c1778,drop-minion, branches: ^(stable/(train|ussuri|victoria)).*$, branches: ^(?!stable/(newton|ocata|pike|queens|stein)).*$,1,1
openstack%2Fneutron~master~I39ab562bb3cd8d3f606cc609feb0009c83033a0c,openstack/neutron,master,I39ab562bb3cd8d3f606cc609feb0009c83033a0c,Re-factor delete_network() in base plugin,ABANDONED,2017-12-06 18:15:25.000000000,2021-07-31 02:39:43.000000000,,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 9845}, {'_account_id': 10385}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 22348}]","[{'number': 1, 'created': '2017-12-06 18:15:25.000000000', 'files': ['neutron/db/db_base_plugin_v2.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/0a9b8f7681e471959d6d97704aa2bd28e626dc2b', 'message': 'Re-factor delete_network() in base plugin\n\nSince the notification code only passes the network_id, we\ncan move the load of the network until after the\nPRECOMMIT_DELETE notifier has fired.  This allows us to\nremove the session expire and re-load of the network.\n\nChange-Id: I39ab562bb3cd8d3f606cc609feb0009c83033a0c\nDepends-on: Ib12986c25eda25970445169310c7c0334d6da49c\n'}]",4,526137,0a9b8f7681e471959d6d97704aa2bd28e626dc2b,17,7,1,1131,,,0,"Re-factor delete_network() in base plugin

Since the notification code only passes the network_id, we
can move the load of the network until after the
PRECOMMIT_DELETE notifier has fired.  This allows us to
remove the session expire and re-load of the network.

Change-Id: I39ab562bb3cd8d3f606cc609feb0009c83033a0c
Depends-on: Ib12986c25eda25970445169310c7c0334d6da49c
",git fetch https://review.opendev.org/openstack/neutron refs/changes/37/526137/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/db/db_base_plugin_v2.py'],1,0a9b8f7681e471959d6d97704aa2bd28e626dc2b,delete-network-refactor," network = self._make_network_dict(network_db, context=context)"," network_db = self._get_network(context, id) network = self._make_network_dict(network_db, context=context) # We expire network_db here because precommit deletion # might have left the relationship stale, for example, # if we deleted a segment. context.session.expire(network_db)",1,6
openstack%2Fcharm-specs~master~I315ffbdb2a1a0ab993fca1c0f39f758b214a36ce,openstack/charm-specs,master,I315ffbdb2a1a0ab993fca1c0f39f758b214a36ce,Add compute-nodes-az-sync spec,MERGED,2021-02-03 16:37:32.000000000,2021-07-31 02:36:16.000000000,2021-07-31 02:35:05.000000000,"[{'_account_id': 935}, {'_account_id': 8992}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-02-03 16:37:32.000000000', 'files': ['specs/wallaby/approved/compute-nodes-az-sync.rst'], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/a6f8b11c24f1f914db46ed5ff93069a06698dd94', 'message': 'Add compute-nodes-az-sync spec\n\nIt proposes an automatic way to sync the Juju availability zones\nwith the OpenStack availability zones.\n\nChange-Id: I315ffbdb2a1a0ab993fca1c0f39f758b214a36ce\n'}]",0,773943,a6f8b11c24f1f914db46ed5ff93069a06698dd94,12,3,1,13178,,,0,"Add compute-nodes-az-sync spec

It proposes an automatic way to sync the Juju availability zones
with the OpenStack availability zones.

Change-Id: I315ffbdb2a1a0ab993fca1c0f39f758b214a36ce
",git fetch https://review.opendev.org/openstack/charm-specs refs/changes/43/773943/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/wallaby/approved/compute-nodes-az-sync.rst'],1,a6f8b11c24f1f914db46ed5ff93069a06698dd94,compute-nodes-az-sync,".. Copyright 2021 Canonical Ltd. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode .. This template should be in ReSTructured text. Please do not delete any of the sections in this template. If you have nothing to say for a whole section, just write: ""None"". For help with syntax, see http://sphinx-doc.org/rest.html To test out your formatting, see http://www.tele3.cz/jbar/rest/rest.html ==================================================== OpenStack Compute Nodes Juju Availability Zones Sync ==================================================== For some providers, Juju may set the environment variable ``JUJU_AVAILABILITY_ZONE`` with information about the availability zone of the machine deployed. OpenStack has the concept of availability zones too, and it would be useful for Juju operators to have the option of automatically sync the Juju availability zones with the OpenStack availability zones. Problem Description =================== At the moment, a Juju operator needs to manually sync the nova-compute Juju machines' availability zones (AZs), with the OpenStack AZs. Proposed Change =============== A new Juju action to the nova-cloud-controller charm will be implemented to automatically sync the Juju AZs with the OpenStack AZs. The availability zone for each Juju unit is exposed to the nova-cloud-controller charm through the cloud-compute relation. Alternatives ------------ None Implementation ============== Assignee(s) ----------- Primary assignee: ionutbalutoiu Gerrit Topic ------------ Use Gerrit topic ""compute-nodes-az-sync"" for all patches related to this spec. .. code-block:: bash git-review -t compute-nodes-az-sync Work Items ---------- - nova-compute - Set a new relation variable called ``availability_zone`` in the ``cloud-compute`` relation (used to relate to the ``nova-cloud-controller`` application). This variable will take the value of the automatic Juju variable ``JUJU_AVAILABILITY_ZONE``, if this is set by the underlying provider. - nova-cloud-controller - Implement a new Juju action called ``sync-compute-availability-zones`` used to sync the Juju availability zones, set by the remote units in the ``cloud-compute`` relation, with the OpenStack availability zones. Repositories ------------ - openstack/charm-nova-compute - openstack/charm-nova-cloud-controller Documentation ------------- The new Juju action needs to be documented in the appropriate docs that reference the nova-cloud-controller actions. This is the only user-facing change. Security -------- None Testing ------- Code written or changed will be covered by unit tests. Dependencies ============ The ``nova-cloud-controller`` charm does not install the Nova client Python library. This is needed for the new Juju action, so it is added to the charm Python dependencies. ",,110,0
openstack%2Foctavia-tempest-plugin~master~Ie448a258b8171dd2695eb8ef9e7bbf968d9542be,openstack/octavia-tempest-plugin,master,Ie448a258b8171dd2695eb8ef9e7bbf968d9542be,Add to test_server.go an http query option for response codes,NEW,2020-12-06 17:49:04.000000000,2021-07-31 02:32:30.000000000,,"[{'_account_id': 6469}, {'_account_id': 22348}, {'_account_id': 28609}, {'_account_id': 29244}, {'_account_id': 29681}]","[{'number': 1, 'created': '2020-12-06 17:49:04.000000000', 'files': ['octavia_tempest_plugin/contrib/test_server/test_server.go'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/2425cdf401435cd0067fcd978a7d0e1f615d6c5d', 'message': 'Add to test_server.go an http query option for response codes\n\nUsage example:\n\n$ wget http://localhost:9090/response?code=911 --server-response\n  HTTP/1.1 911 status code 911\n\n$ wget http://localhost:9090/response?code=BAD-INPUT --server-response\n  HTTP/1.1 422 Unprocessable Entity\n\n$ wget http://localhost:9090/response --server-response\n  HTTP/1.1 404 Not Found\n\nSigned-off-by: Noam Manos <nmanos@redhat.com>\nChange-Id: Ie448a258b8171dd2695eb8ef9e7bbf968d9542be\n'}]",0,765686,2425cdf401435cd0067fcd978a7d0e1f615d6c5d,6,5,1,27821,,,0,"Add to test_server.go an http query option for response codes

Usage example:

$ wget http://localhost:9090/response?code=911 --server-response
  HTTP/1.1 911 status code 911

$ wget http://localhost:9090/response?code=BAD-INPUT --server-response
  HTTP/1.1 422 Unprocessable Entity

$ wget http://localhost:9090/response --server-response
  HTTP/1.1 404 Not Found

Signed-off-by: Noam Manos <nmanos@redhat.com>
Change-Id: Ie448a258b8171dd2695eb8ef9e7bbf968d9542be
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/86/765686/1 && git format-patch -1 --stdout FETCH_HEAD,['octavia_tempest_plugin/contrib/test_server/test_server.go'],1,2425cdf401435cd0067fcd978a7d0e1f615d6c5d,," ""strconv""var sessResponse http.Responsefunc responseHandler(w http.ResponseWriter, r *http.Request) { scoreboard.open() defer scoreboard.close() keys, values := r.URL.Query()[""code""] if values && len(keys[0]) > 0 { statusCode, err := strconv.Atoi(keys[0]) if err != nil { sessResponse.StatusCode = 422 } else { sessResponse.StatusCode = statusCode } } else { sessResponse.StatusCode = 404 } w.WriteHeader(sessResponse.StatusCode) io.WriteString(w, resp) } http.HandleFunc(""/response"", responseHandler) mux.Handle(""/response"", httpsWrapper(responseHandler))",,24,0
openstack%2Foctavia-tempest-plugin~master~I2eff691478cea7372f7b71e1412e65a7a2d6f2c4,openstack/octavia-tempest-plugin,master,I2eff691478cea7372f7b71e1412e65a7a2d6f2c4,Switch default system under test to CentOS 8 Stream,NEW,2020-08-19 16:51:48.000000000,2021-07-31 02:32:18.000000000,,"[{'_account_id': 6469}, {'_account_id': 22348}, {'_account_id': 29244}]","[{'number': 1, 'created': '2020-08-19 16:51:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/b20cab8c4b0daa28bd84a291a31675c782154d86', 'message': 'Switch default SUT to CentOS 8\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 2, 'created': '2020-08-19 16:54:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/95b7df82feeed646d3c1dd0b29ac2fbec777bf00', 'message': 'Switch default SUT to CentOS 8\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 3, 'created': '2020-08-19 17:23:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/712eb38d54a16994c8fe0d4de12d6eacbeed1ae2', 'message': 'Switch default system under test to CentOS 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 4, 'created': '2020-08-20 12:55:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/5166aaeece071aab3d5396e23e8c2e43098284f9', 'message': 'Switch default system under test to CentOS 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nDepends-On: https://review.opendev.org/#/c/747155/\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 5, 'created': '2020-08-21 13:44:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/9fd11908b961b9ada56990ab1eae93e900ba1483', 'message': 'Switch default system under test to CentOS 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS 8.\nFuture stable branches (stable/victoria onwards) will also test on\nCentOS 8. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 6, 'created': '2020-08-21 15:46:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/da29cbcb9367daeb6fc2790ef4c1b32d4b97bf54', 'message': 'Switch default system under test to CentOS 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS 8.\nFuture stable branches (stable/victoria onwards) will also test on\nCentOS 8. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 7, 'created': '2020-09-14 07:11:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/31b6942dcb46a184b58416d350776aa431483fa3', 'message': 'Switch default system under test to CentOS 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS 8.\nFuture stable branches (stable/victoria onwards) will also test on\nCentOS 8. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 8, 'created': '2021-02-02 09:08:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/7b230587d60cdbc2fc33891fe1b5a9b2958ce457', 'message': 'Switch default system under test to CentOS Stream 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS Stream\n8. Future stable branches (stable/wallaby onwards) will also test on\nCentOS Stream 8. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/773614\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 9, 'created': '2021-02-02 09:16:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/2baa8207bfb843cd4f1c3dc6342dc02902d07610', 'message': 'Switch default system under test to CentOS Stream 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS Stream\n8. Future stable branches (stable/wallaby onwards) will also test on\nCentOS Stream 8. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/773614\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 10, 'created': '2021-02-02 09:31:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/dea1a546e06eb46c0dd06c49e632628e4ec6aa80', 'message': 'Switch default system under test to CentOS Stream 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS Stream\n8. Future stable branches (stable/wallaby onwards) will also test on\nCentOS Stream 8. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/773614\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 11, 'created': '2021-02-02 09:35:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/1698a7244449377b7581e2b750072655e16f015f', 'message': 'Switch default system under test to CentOS Stream 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS Stream\n8. Future stable branches (stable/wallaby onwards) will also test on\nCentOS Stream 8. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/773614\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 12, 'created': '2021-02-16 10:55:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/41efdca18ff2ae085bc3ca9fae91ee65fe47d8c0', 'message': ""Switch default system under test to CentOS 8\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 is one of three LTS or stable distributions for Victoria [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS 8.\nFuture stable branches (stable/wallaby onwards) will also test on CentOS\n8. Existing stable branches will be left untouched.\n\nWIP: centos linux -> centos stream as soon as it's fixed in DIB\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/775802\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n""}, {'number': 13, 'created': '2021-06-21 13:01:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/52423d098a3e856f9139098ac7a10f22b95f3c48', 'message': 'Switch default system under test to CentOS 8 Stream\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 Stream is one of two LTS or stable distributions for Xena [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS 8\nStream.\nFuture stable branches (stable/xena onwards) will also test on CentOS\n8 Stream. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/xena.html\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}, {'number': 14, 'created': '2021-06-21 14:09:22.000000000', 'files': ['zuul.d/projects.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/daa1761e126fcd10f60f9d1a63c8de1bb21181b2', 'message': 'Switch default system under test to CentOS 8 Stream\n\nIt is important for projects to do their main CI/CD primarily on the\nmost common environment used by operators.\n\nThe majority of the current participating Octavia community seem to be\nrunning Octavia workloads on CentOS/RHEL operating systems based on\nmultiple conversations held on IRC and community events. Also according\nto the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud\ndeployments run mainly on these operating systems.\n\nCentOS 8 Stream is one of two LTS or stable distributions for Xena [2].\nThis qualifies it to be a candidate to be the main distribution in our\nCI jobs.\n\nThis patch changes the default nodeset for master jobs to CentOS 8\nStream.\nFuture stable branches (stable/xena onwards) will also test on CentOS\n8 Stream. Existing stable branches will be left untouched.\n\n[1] https://www.openstack.org/analytics\n[2] https://governance.openstack.org/tc/reference/runtimes/xena.html\n\nChange-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4\n'}]",6,746996,daa1761e126fcd10f60f9d1a63c8de1bb21181b2,48,3,14,6469,,,0,"Switch default system under test to CentOS 8 Stream

It is important for projects to do their main CI/CD primarily on the
most common environment used by operators.

The majority of the current participating Octavia community seem to be
running Octavia workloads on CentOS/RHEL operating systems based on
multiple conversations held on IRC and community events. Also according
to the OpenStack User Survey 2019 [1], a combined 55% of OpenStack cloud
deployments run mainly on these operating systems.

CentOS 8 Stream is one of two LTS or stable distributions for Xena [2].
This qualifies it to be a candidate to be the main distribution in our
CI jobs.

This patch changes the default nodeset for master jobs to CentOS 8
Stream.
Future stable branches (stable/xena onwards) will also test on CentOS
8 Stream. Existing stable branches will be left untouched.

[1] https://www.openstack.org/analytics
[2] https://governance.openstack.org/tc/reference/runtimes/xena.html

Change-Id: I2eff691478cea7372f7b71e1412e65a7a2d6f2c4
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/96/746996/12 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/projects.yaml', 'zuul.d/jobs.yaml']",2,b20cab8c4b0daa28bd84a291a31675c782154d86,centos-gating, label: nested-virt-centos-8 label: nested-virt-centos-8 nodeset: devstack-single-node-centos-8 nodeset: octavia-single-node-centos-8 OCTAVIA_AMP_BASE_OS: centos OCTAVIA_AMP_DISTRIBUTION_RELEASE_ID: 8 OCTAVIA_AMP_IMAGE_SIZE: 3 nodeset: octavia-single-node-centos-8, label: nested-virt-ubuntu-bionic label: nested-virt-ubuntu-bionic nodeset: octavia-single-node-ubuntu-bionic nodeset: octavia-single-node-ubuntu-bionic,10,6
openstack%2Foctavia~master~I34bfa4ee7e1483419f9a0777acce7697d14a27fa,openstack/octavia,master,I34bfa4ee7e1483419f9a0777acce7697d14a27fa,Fix listener delete with missing certificates,NEW,2021-01-03 02:27:38.000000000,2021-07-31 02:31:49.000000000,,"[{'_account_id': 7249}, {'_account_id': 22348}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-01-03 02:27:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/3595e1fdef093f784ce368f6d87b367b0803ee84', 'message': 'Fix listener update with missing certificates\n\nWhen certificates were deleted in barbican, the listener using the\nmissing certificates cannot be deleted due to the processing certs\nexceptions. But any way, we should still be able to delete the\nlistener.\n\nChange-Id: I34bfa4ee7e1483419f9a0777acce7697d14a27fa\n'}, {'number': 2, 'created': '2021-01-03 02:31:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/6f290b7e10b657b209719b3598c8ff6597ed60b8', 'message': 'Fix listener delete with missing certificates\n\nWhen certificates were deleted in barbican, the listener using the\nmissing certificates cannot be deleted due to the processing certs\nexceptions. But any way, we should still be able to delete the\nlistener.\n\nChange-Id: I34bfa4ee7e1483419f9a0777acce7697d14a27fa\n'}, {'number': 3, 'created': '2021-01-05 01:35:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/988ad63c2e76c0d42e7f07dbf7daa1d6418c9677', 'message': 'Fix listener delete with missing certificates\n\nWhen certificates were deleted in barbican, the listener using the\nmissing certificates cannot be deleted due to the processing certs\nexceptions. But any way, we should still be able to delete the\nlistener.\n\nChange-Id: I34bfa4ee7e1483419f9a0777acce7697d14a27fa\nStory: 2008357\nTask: 41262\n'}, {'number': 4, 'created': '2021-01-06 03:05:11.000000000', 'files': ['octavia/amphorae/drivers/haproxy/rest_api_driver.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/a9068f8cc4362e92c8f7bc925546497fc2d418fa', 'message': 'Fix listener delete with missing certificates\n\nWhen certificates were deleted in barbican, the listener using the\nmissing certificates cannot be deleted due to the processing certs\nexceptions. But any way, we should still be able to delete the\nlistener.\n\nChange-Id: I34bfa4ee7e1483419f9a0777acce7697d14a27fa\nStory: 2008483\nTask: 41529\n'}]",4,768909,a9068f8cc4362e92c8f7bc925546497fc2d418fa,15,3,4,29870,,,0,"Fix listener delete with missing certificates

When certificates were deleted in barbican, the listener using the
missing certificates cannot be deleted due to the processing certs
exceptions. But any way, we should still be able to delete the
listener.

Change-Id: I34bfa4ee7e1483419f9a0777acce7697d14a27fa
Story: 2008483
Task: 41529
",git fetch https://review.opendev.org/openstack/octavia refs/changes/09/768909/1 && git format-patch -1 --stdout FETCH_HEAD,['octavia/amphorae/drivers/haproxy/rest_api_driver.py'],1,3595e1fdef093f784ce368f6d87b367b0803ee84,del_tls_listener," try: certs = self._process_tls_certificates(listener) if certs['tls_cert']: certs_to_delete.add(certs['tls_cert'].id) for sni_cert in certs['sni_certs']: certs_to_delete.add(sni_cert.id) except Exception as e: LOG.warning('Unable to retrieve certificate(s) due to %s', str(e))", certs = self._process_tls_certificates(listener) if certs['tls_cert']: certs_to_delete.add(certs['tls_cert'].id) for sni_cert in certs['sni_certs']: certs_to_delete.add(sni_cert.id),9,5
openstack%2Fdevstack~master~Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49,openstack/devstack,master,Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49,Start more services in parallel,NEW,2021-02-04 00:56:13.000000000,2021-07-31 02:31:24.000000000,,"[{'_account_id': 6773}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-02-04 00:56:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/e4e30641b9b67ecaf859629b5e5ab28d245eb07f', 'message': 'Start more services in parallel\n\nThis starts nova api, ovn, placement in the background while we\nstart and configure neutron in the main thread.\n\nChange-Id: Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49\n'}, {'number': 2, 'created': '2021-02-04 16:56:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/6aefd10ab648991a08c649630124c510d3465a68', 'message': 'Start more services in parallel\n\nThis starts nova api, ovn, placement in the background while we\nstart and configure neutron in the main thread.\n\nChange-Id: Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49\n'}, {'number': 3, 'created': '2021-02-09 19:02:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/455120fbe611c78941ffc845b8a5eb200c012061', 'message': 'Start more services in parallel\n\nThis starts nova api, ovn, placement in the background while we\nstart and configure neutron in the main thread.\n\nChange-Id: Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49\n'}, {'number': 4, 'created': '2021-02-09 20:51:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/0792b8f41fab939f2f68b086a2f5104b30e895d8', 'message': 'Start more services in parallel\n\nThis starts nova api, ovn, placement in the background while we\nstart and configure neutron in the main thread.\n\nChange-Id: Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49\n'}, {'number': 5, 'created': '2021-02-09 23:57:17.000000000', 'files': ['stack.sh'], 'web_link': 'https://opendev.org/openstack/devstack/commit/22a48edb2d946f1469e2dc3030cbb4026359d870', 'message': 'Start more services in parallel\n\nThis starts nova api, ovn, placement in the background while we\nstart and configure neutron in the main thread.\n\nChange-Id: Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49\n'}]",4,774022,22a48edb2d946f1469e2dc3030cbb4026359d870,13,2,5,4393,,,0,"Start more services in parallel

This starts nova api, ovn, placement in the background while we
start and configure neutron in the main thread.

Change-Id: Ib6bbe6943abc13bcb6730bc3248b98f3d351fd49
",git fetch https://review.opendev.org/openstack/devstack refs/changes/22/774022/3 && git format-patch -1 --stdout FETCH_HEAD,['stack.sh'],1,e4e30641b9b67ecaf859629b5e5ab28d245eb07f,async," async_runfunc start_nova_api async_runfunc start_ovn_services fi # Start placement before any of the service that are likely to want # to use it to manage resource providers. if is_service_enabled placement; then echo_summary ""Starting Placement"" async_runfunc start_placementasync_wait start_nova_api async_wait start_ovn_services start_placement"," start_nova_api start_ovn_services# Start placement before any of the service that are likely to want # to use it to manage resource providers. if is_service_enabled placement; then echo_summary ""Starting Placement"" start_placement fi ",12,9
openstack%2Fosc-placement~master~I62f5a620e6639c29d4a8ed99f7e42b72f7af1a74,openstack/osc-placement,master,I62f5a620e6639c29d4a8ed99f7e42b72f7af1a74,Mark microversion 1.37 supported,MERGED,2021-03-31 08:03:06.000000000,2021-07-31 01:21:55.000000000,2021-07-31 01:20:41.000000000,"[{'_account_id': 4690}, {'_account_id': 7634}, {'_account_id': 10135}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-03-31 08:03:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/osc-placement/commit/838ff8da76adaa23a279844f1b0082966a8a4045', 'message': 'Mark microversion 1.37 support\n\nMicroversion 1.37 adds support for re-parenting and un-parenting RPs.\nThe client supports these operations with the new microversion out of\nthe box. So this patch just marks the microversion as supported.\n\nStory: 2008764\nTask: 42132\nChange-Id: I62f5a620e6639c29d4a8ed99f7e42b72f7af1a74\n'}, {'number': 2, 'created': '2021-03-31 08:03:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/osc-placement/commit/13d1aa4031cdebcbc40c896a7c065ff541ce60d7', 'message': 'Mark microversion 1.37 supported\n\nMicroversion 1.37 adds support for re-parenting and un-parenting RPs.\nThe client supports these operations with the new microversion out of\nthe box. So this patch just marks the microversion as supported.\n\nStory: 2008764\nTask: 42132\nChange-Id: I62f5a620e6639c29d4a8ed99f7e42b72f7af1a74\n'}, {'number': 3, 'created': '2021-04-15 07:49:09.000000000', 'files': ['osc_placement/version.py'], 'web_link': 'https://opendev.org/openstack/osc-placement/commit/8b3ed3c663e8b36ec6698b2b8990cba2be27052c', 'message': 'Mark microversion 1.37 supported\n\nMicroversion 1.37 adds support for re-parenting and un-parenting RPs.\nThe client supports these operations with the new microversion out of\nthe box. So this patch just marks the microversion as supported.\n\nStory: 2008764\nTask: 42132\nDepends-On: https://review.opendev.org/c/openstack/placement/+/784020\nChange-Id: I62f5a620e6639c29d4a8ed99f7e42b72f7af1a74\n'}]",2,784023,8b3ed3c663e8b36ec6698b2b8990cba2be27052c,16,5,3,9708,,,0,"Mark microversion 1.37 supported

Microversion 1.37 adds support for re-parenting and un-parenting RPs.
The client supports these operations with the new microversion out of
the box. So this patch just marks the microversion as supported.

Story: 2008764
Task: 42132
Depends-On: https://review.opendev.org/c/openstack/placement/+/784020
Change-Id: I62f5a620e6639c29d4a8ed99f7e42b72f7af1a74
",git fetch https://review.opendev.org/openstack/osc-placement refs/changes/23/784023/1 && git format-patch -1 --stdout FETCH_HEAD,['osc_placement/version.py'],1,838ff8da76adaa23a279844f1b0082966a8a4045,support-re-parenting-providers," '1.37', # unused",,1,0
openstack%2Fcharm-nova-cloud-controller~master~I5a6bd1fa06d06dfd3e49182cc72ad83025429b13,openstack/charm-nova-cloud-controller,master,I5a6bd1fa06d06dfd3e49182cc72ad83025429b13,Expose *_allocation_ratio config,MERGED,2021-05-24 04:17:52.000000000,2021-07-30 23:12:00.000000000,2021-07-30 23:12:00.000000000,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-05-24 04:17:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/63f930cd8477cee946308f9eb4164c88ab4ea2ae', 'message': 'Expose *_allocation_ratio config\n\nThis commit exposes allocation ratio configuration via the cloud-compute\nrelation for backwards compatiable behaviour of the charms when\nconfiguration of allocation ratios is delegated to nova-compute.\n\nRelated-Bug: #1677223\nChange-Id: I5a6bd1fa06d06dfd3e49182cc72ad83025429b13\n'}, {'number': 2, 'created': '2021-06-30 10:31:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/9e0fcf527c22b8a086a958fc356e509d496a737a', 'message': 'Expose *_allocation_ratio config\n\nThis commit exposes allocation ratio configuration via the cloud-compute\nrelation for backwards compatiable behaviour of the charms when\nconfiguration of allocation ratios is delegated to nova-compute.\n\nRelated-Bug: #1677223\nChange-Id: I5a6bd1fa06d06dfd3e49182cc72ad83025429b13\n'}, {'number': 3, 'created': '2021-07-16 01:15:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/770d831a24a61a81be49c0f86deaf90ecfff9f1d', 'message': 'Expose *_allocation_ratio config\n\nThis commit exposes allocation ratio configuration via the cloud-compute\nrelation for backwards compatiable behaviour of the charms when\nconfiguration of allocation ratios is delegated to nova-compute.\n\nCloses-Bug: #1677223\nChange-Id: I5a6bd1fa06d06dfd3e49182cc72ad83025429b13\n'}, {'number': 4, 'created': '2021-07-29 11:44:15.000000000', 'files': ['hooks/nova_cc_context.py'], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/eeac5fca9665d7d6ddf00db51a62a1272b2d5ea6', 'message': 'Expose *_allocation_ratio config\n\nThis commit exposes allocation ratio configuration via the cloud-compute\nrelation for backwards compatiable behaviour of the charms when\nconfiguration of allocation ratios is delegated to nova-compute.\n\nCloses-Bug: #1677223\nChange-Id: I5a6bd1fa06d06dfd3e49182cc72ad83025429b13\n'}]",1,792752,eeac5fca9665d7d6ddf00db51a62a1272b2d5ea6,25,3,4,26032,,,0,"Expose *_allocation_ratio config

This commit exposes allocation ratio configuration via the cloud-compute
relation for backwards compatiable behaviour of the charms when
configuration of allocation ratios is delegated to nova-compute.

Closes-Bug: #1677223
Change-Id: I5a6bd1fa06d06dfd3e49182cc72ad83025429b13
",git fetch https://review.opendev.org/openstack/charm-nova-cloud-controller refs/changes/52/792752/4 && git format-patch -1 --stdout FETCH_HEAD,['hooks/nova_cc_context.py'],1,63f930cd8477cee946308f9eb4164c88ab4ea2ae,bug/1677223," for rid in hookenv.relation_ids('cloud-compute'): rdata = { 'disk_allocation_ratio': ctxt['disk_allocation_ratio'], 'cpu_allocation_ratio': ctxt['cpu_allocation_ratio'], 'ram_allocation_ratio': ctxt['ram_allocation_ratio'], } hookenv.relation_set(relation_settings=rdata, relation_id=rid) ",,9,0
openstack%2Fopenstack-helm-infra~master~I98102bd9c72264c7e364b50e0683e4777b42b0e7,openstack/openstack-helm-infra,master,I98102bd9c72264c7e364b50e0683e4777b42b0e7,Revoke all privileges for PUBLIC role in postgres dbs,MERGED,2021-07-29 18:36:05.000000000,2021-07-30 22:54:21.000000000,2021-07-30 22:53:04.000000000,"[{'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22214}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 28235}, {'_account_id': 28275}, {'_account_id': 28719}, {'_account_id': 29298}, {'_account_id': 29585}]","[{'number': 1, 'created': '2021-07-29 18:36:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7b58b9d93f0b1ffa4672ea1a570a876df3279fd6', 'message': 'Revoke connect from PUBLIC on postgres dbs\n\nChange-Id: I98102bd9c72264c7e364b50e0683e4777b42b0e7\n'}, {'number': 2, 'created': '2021-07-29 18:44:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/98a538431069936a0c6dadec2800bd0cf4c9f0ca', 'message': 'Revoke connect on PUBLIC role in postgres dbs\n\nChange-Id: I98102bd9c72264c7e364b50e0683e4777b42b0e7\n'}, {'number': 3, 'created': '2021-07-30 17:21:26.000000000', 'files': ['helm-toolkit/templates/scripts/_db-pg-init.sh.tpl', 'helm-toolkit/Chart.yaml', 'releasenotes/notes/helm-toolkit.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/bc754e088e5e32e7a1559d5e1bab5ff23ac8ae2a', 'message': 'Revoke all privileges for PUBLIC role in postgres dbs\n\nChange-Id: I98102bd9c72264c7e364b50e0683e4777b42b0e7\n'}]",1,802925,bc754e088e5e32e7a1559d5e1bab5ff23ac8ae2a,20,10,3,33592,,,0,"Revoke all privileges for PUBLIC role in postgres dbs

Change-Id: I98102bd9c72264c7e364b50e0683e4777b42b0e7
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/25/802925/1 && git format-patch -1 --stdout FETCH_HEAD,['helm-toolkit/templates/scripts/_db-pg-init.sh.tpl'],1,7b58b9d93f0b1ffa4672ea1a570a876df3279fd6,," #revoke connections from PUBLIC pgsql_superuser_cmd ""REVOKE CONNECT ON DATABASE $USER_DB_NAME FROM PUBLIC;""",,3,0
openstack%2Fopenstack-helm-infra~master~I0d6633efae7452fee4ce98d3e7088a55123f0a78,openstack/openstack-helm-infra,master,I0d6633efae7452fee4ce98d3e7088a55123f0a78,Limit Ceph OSD Container Security Contexts,MERGED,2021-07-29 20:23:04.000000000,2021-07-30 22:45:27.000000000,2021-07-30 22:44:18.000000000,"[{'_account_id': 18250}, {'_account_id': 22214}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 32190}]","[{'number': 1, 'created': '2021-07-29 20:23:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4a07848abba46d3d78da498f3a10048d76a0b5d3', 'message': ""Limit Ceph OSD Container Security Contexts\n\nWherever possible, the ceph-osd containers need to run with the\nleast amount of privilege required. In some cases there are\nprivileges granted but are not needed. This patchset modifies\nthose container's security contexts to reduce them to only what\nis needed.\n\nChange-Id: I0d6633efae7452fee4ce98d3e7088a55123f0a78\n""}, {'number': 2, 'created': '2021-07-29 20:24:52.000000000', 'files': ['ceph-osd/values.yaml', 'ceph-osd/Chart.yaml', 'releasenotes/notes/ceph-osd.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b55143dec25d31efa2d3630c10c7512cc9591153', 'message': ""Limit Ceph OSD Container Security Contexts\n\nWherever possible, the ceph-osd containers need to run with the\nleast amount of privilege required. In some cases there are\nprivileges granted but are not needed. This patchset modifies\nthose container's security contexts to reduce them to only what\nis needed.\n\nChange-Id: I0d6633efae7452fee4ce98d3e7088a55123f0a78\n""}]",0,802959,b55143dec25d31efa2d3630c10c7512cc9591153,11,5,2,22636,,,0,"Limit Ceph OSD Container Security Contexts

Wherever possible, the ceph-osd containers need to run with the
least amount of privilege required. In some cases there are
privileges granted but are not needed. This patchset modifies
those container's security contexts to reduce them to only what
is needed.

Change-Id: I0d6633efae7452fee4ce98d3e7088a55123f0a78
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/59/802959/2 && git format-patch -1 --stdout FETCH_HEAD,['ceph-osd/values.yaml'],1,4a07848abba46d3d78da498f3a10048d76a0b5d3,, allowPrivilegeEscalation: false allowPrivilegeEscalation: false runAsUser: 65534 allowPrivilegeEscalation: false, runAsUser: 0,4,1
openstack%2Fopenstack-helm-infra~master~I74bd31df4af5cacc26834e645b0816bf285e8428,openstack/openstack-helm-infra,master,I74bd31df4af5cacc26834e645b0816bf285e8428,Limit Ceph Provisioner Container Security Contexts,MERGED,2021-07-28 14:53:37.000000000,2021-07-30 22:38:31.000000000,2021-07-30 22:37:16.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 24780}, {'_account_id': 32190}]","[{'number': 1, 'created': '2021-07-28 14:53:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4d531fba2d5f3d6886afe4883178fd649def1b03', 'message': ""Limit Ceph Provisioner Container Security Contexts\n\nWherever possible, the ceph-provisioner containers need to run\nwith the least amount of privilege required. In some cases root\nprivileges are granted but are not needed. This patchset modifies\nthose container's security contexts to reduce them to only what\nis needed.\n\nChange-Id: I74bd31df4af5cacc26834e645b0816bf285e8428\n""}, {'number': 2, 'created': '2021-07-28 14:55:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/2170a5281b8cbd2a0141b22f4be4cb99b8157bc5', 'message': ""Limit Ceph Provisioner Container Security Contexts\n\nWherever possible, the ceph-provisioner containers need to run\nwith the least amount of privilege required. In some cases root\nprivileges are granted but are not needed. This patchset modifies\nthose container's security contexts to reduce them to only what\nis needed.\n\nChange-Id: I74bd31df4af5cacc26834e645b0816bf285e8428\n""}, {'number': 3, 'created': '2021-07-29 14:54:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b20b93b87f5368470e4357ea121a061d86302b0f', 'message': ""Limit Ceph Provisioner Container Security Contexts\n\nWherever possible, the ceph-provisioner containers need to run\nwith the least amount of privilege required. In some cases root\nprivileges are granted but are not needed. This patchset modifies\nthose container's security contexts to reduce them to only what\nis needed.\n\nChange-Id: I74bd31df4af5cacc26834e645b0816bf285e8428\n""}, {'number': 4, 'created': '2021-07-29 18:36:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9ec794475024539f3bc3d7d1b7a970a9cee345b4', 'message': ""Limit Ceph Provisioner Container Security Contexts\n\nWherever possible, the ceph-provisioner containers need to run\nwith the least amount of privilege required. In some cases root\nprivileges are granted but are not needed. This patchset modifies\nthose container's security contexts to reduce them to only what\nis needed.\n\nChange-Id: I74bd31df4af5cacc26834e645b0816bf285e8428\n""}, {'number': 5, 'created': '2021-07-29 20:25:42.000000000', 'files': ['releasenotes/notes/ceph-provisioners.yaml', 'ceph-provisioners/values.yaml', 'ceph-provisioners/Chart.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6e794561ac6fd0b484e6af85ab4e6b3bb8e237f1', 'message': ""Limit Ceph Provisioner Container Security Contexts\n\nWherever possible, the ceph-provisioner containers need to run\nwith the least amount of privilege required. In some cases there\nare privileges granted but are not needed. This patchset modifies\nthose container's security contexts to reduce them to only what\nis needed.\n\nChange-Id: I74bd31df4af5cacc26834e645b0816bf285e8428\n""}]",0,802734,6e794561ac6fd0b484e6af85ab4e6b3bb8e237f1,19,6,5,22636,,,0,"Limit Ceph Provisioner Container Security Contexts

Wherever possible, the ceph-provisioner containers need to run
with the least amount of privilege required. In some cases there
are privileges granted but are not needed. This patchset modifies
those container's security contexts to reduce them to only what
is needed.

Change-Id: I74bd31df4af5cacc26834e645b0816bf285e8428
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/34/802734/3 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ceph-provisioners.yaml', 'ceph-provisioners/values.yaml', 'ceph-provisioners/Chart.yaml']",3,4d531fba2d5f3d6886afe4883178fd649def1b03,,version: 0.1.9,version: 0.1.8,6,3
openstack%2Fopenstack-tempest-skiplist~master~I94f02dd2b154a9ee5a2a798a6b7c7a138766e4bf,openstack/openstack-tempest-skiplist,master,I94f02dd2b154a9ee5a2a798a6b7c7a138766e4bf,Skip octavia_tempest_plugin.tests.scenario.v2,ABANDONED,2021-07-22 19:33:01.000000000,2021-07-30 21:40:48.000000000,,"[{'_account_id': 11628}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-22 19:33:01.000000000', 'files': ['roles/validate-tempest/vars/tempest_skip.yml'], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/1c651a0b5d7de5fff9b43f5a035bf027471b4a9c', 'message': 'Skip octavia_tempest_plugin.tests.scenario.v2\n\nThese tests are failing on rhos-17 in the\nnetwork component line and the integration line.\n\nChange-Id: I94f02dd2b154a9ee5a2a798a6b7c7a138766e4bf\nRelated-Bug: BZ1985079\n'}]",0,801922,1c651a0b5d7de5fff9b43f5a035bf027471b4a9c,5,2,1,9976,,,0,"Skip octavia_tempest_plugin.tests.scenario.v2

These tests are failing on rhos-17 in the
network component line and the integration line.

Change-Id: I94f02dd2b154a9ee5a2a798a6b7c7a138766e4bf
Related-Bug: BZ1985079
",git fetch https://review.opendev.org/openstack/openstack-tempest-skiplist refs/changes/22/801922/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/validate-tempest/vars/tempest_skip.yml'],1,1c651a0b5d7de5fff9b43f5a035bf027471b4a9c,BZ1985079, - test: 'octavia_tempest_plugin.tests.scenario.v2' deployment: - 'overcloud' releases: - name: wallaby reason: Current status of show_loadbalancer PENDING_CREATE installers: - 'osp' bz: https://bugzilla.redhat.com/show_bug.cgi?id=1985079 jobs: - periodic-tripleo-ci-rhel-8-scenario010-standalone-network-rhos-17 - periodic-tripleo-ci-rhel-8-scenario010-standalone-rhos-17,,12,0
openstack%2Fpuppet-pacemaker~master~Ic8a8e127004220bb8b6735b6cf8b4b52c03fa825,openstack/puppet-pacemaker,master,Ic8a8e127004220bb8b6735b6cf8b4b52c03fa825,Fix spec tests using the deprecated pacemaker_restart_resource? function,MERGED,2021-07-30 12:52:40.000000000,2021-07-30 21:02:13.000000000,2021-07-30 21:02:13.000000000,"[{'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 12:52:40.000000000', 'files': ['spec/unit/puppet/provider/pcmk_common_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-pacemaker/commit/531283ecea579bf0576bd515770d9cf6513e48c7', 'message': 'Fix spec tests using the deprecated pacemaker_restart_resource? function\n\nCurrently we get the following error:\n\n  1) pcmk_common functions pcmk_restart_resource? stonith resource\n     Failure/Error: expect(pcmk_restart_resource?(\'stonith-fence_ipmilan-stonith-fence-1\', ""cib-resource.xml"")).to eq true\n\n       expected: true\n            got: false\n\n       (compared using ==)\n\n       Diff:\n       @@ -1 +1 @@\n       -true\n       +false\n\n     # ./spec/unit/puppet/provider/pcmk_common_spec.rb:41:in `block (2 levels) in <top (required)>\'\n\nReason for this is that there are two functions to detect a change in a\npcmk resource:\n- pacemaker_restart_resource? -> which parses crm_simulate and was\n  necessary due to https://bugzilla.redhat.com/show_bug.cgi?id=1561617\n  (Fixed in pacemaker-1.1.18-12)\n- pacemaker_restart_resource_ng? -> which is the preferred one and uses\n  crm_diff xml output.\n\nThe problem in CI is that crm_simulate output slightly changed and so\none test is failing. Since it makes no sense to call\npacemaker_restart_resource? with a working crm_diff (i.e. any pacemaker\n> 1.1.18-12), we just make sure we do not run these tests on a working\ncrm_diff.\n\nWe plan to remove pacemaker_restart_resource? fully now that newton (and\nel7) is unsupported, so this change is a minimal non-invasive fix for\nthe time being.\n\nCloses-Bug: #1921118\n\nChange-Id: Ic8a8e127004220bb8b6735b6cf8b4b52c03fa825\n'}]",0,803007,531283ecea579bf0576bd515770d9cf6513e48c7,7,3,1,20172,,,0,"Fix spec tests using the deprecated pacemaker_restart_resource? function

Currently we get the following error:

  1) pcmk_common functions pcmk_restart_resource? stonith resource
     Failure/Error: expect(pcmk_restart_resource?('stonith-fence_ipmilan-stonith-fence-1', ""cib-resource.xml"")).to eq true

       expected: true
            got: false

       (compared using ==)

       Diff:
       @@ -1 +1 @@
       -true
       +false

     # ./spec/unit/puppet/provider/pcmk_common_spec.rb:41:in `block (2 levels) in <top (required)>'

Reason for this is that there are two functions to detect a change in a
pcmk resource:
- pacemaker_restart_resource? -> which parses crm_simulate and was
  necessary due to https://bugzilla.redhat.com/show_bug.cgi?id=1561617
  (Fixed in pacemaker-1.1.18-12)
- pacemaker_restart_resource_ng? -> which is the preferred one and uses
  crm_diff xml output.

The problem in CI is that crm_simulate output slightly changed and so
one test is failing. Since it makes no sense to call
pacemaker_restart_resource? with a working crm_diff (i.e. any pacemaker
> 1.1.18-12), we just make sure we do not run these tests on a working
crm_diff.

We plan to remove pacemaker_restart_resource? fully now that newton (and
el7) is unsupported, so this change is a minimal non-invasive fix for
the time being.

Closes-Bug: #1921118

Change-Id: Ic8a8e127004220bb8b6735b6cf8b4b52c03fa825
",git fetch https://review.opendev.org/openstack/puppet-pacemaker refs/changes/07/803007/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/unit/puppet/provider/pcmk_common_spec.rb'],1,531283ecea579bf0576bd515770d9cf6513e48c7,fix-ci," context 'when crm_diff is not buggy', if: is_crm_diff_buggy?() == true do it ""pcmk_restart_resource? noop"" do expect(pcmk_restart_resource?('foo', ""cib-noop.xml"")).to eq false expect(pcmk_restart_resource?('ip-172.16.11.97', ""cib-noop.xml"")).to eq false expect(pcmk_restart_resource?('stonith-fence_ipmilan-stonith-fence-1', ""cib-noop.xml"")).to eq false end context 'when crm_diff is not buggy', if: is_crm_diff_buggy?() == true do it ""pcmk_restart_resource? vip resource"" do expect(pcmk_restart_resource?('foo', ""cib-resource.xml"")).to eq false expect(pcmk_restart_resource?('ip-172.16.11.97', ""cib-resource.xml"")).to eq true end it ""pcmk_restart_resource? stonith resource"" do expect(pcmk_restart_resource?('foo', ""cib-resource.xml"")).to eq false expect(pcmk_restart_resource?('stonith-fence_ipmilan-stonith-fence-1', ""cib-resource.xml"")).to eq true end"," it ""pcmk_restart_resource? noop"" do expect(pcmk_restart_resource?('foo', ""cib-noop.xml"")).to eq false expect(pcmk_restart_resource?('ip-172.16.11.97', ""cib-noop.xml"")).to eq false expect(pcmk_restart_resource?('stonith-fence_ipmilan-stonith-fence-1', ""cib-noop.xml"")).to eq false it ""pcmk_restart_resource? vip resource"" do expect(pcmk_restart_resource?('foo', ""cib-resource.xml"")).to eq false expect(pcmk_restart_resource?('ip-172.16.11.97', ""cib-resource.xml"")).to eq true end it ""pcmk_restart_resource? stonith resource"" do expect(pcmk_restart_resource?('foo', ""cib-resource.xml"")).to eq false expect(pcmk_restart_resource?('stonith-fence_ipmilan-stonith-fence-1', ""cib-resource.xml"")).to eq true",15,11
openstack%2Ftripleo-upgrade~master~I32494fb21d40cd3231e619c748fdfce7ff891f50,openstack/tripleo-upgrade,master,I32494fb21d40cd3231e619c748fdfce7ff891f50,Move the upgrade prepare script generation in the build script playbook.,MERGED,2021-07-09 11:01:19.000000000,2021-07-30 21:02:10.000000000,2021-07-30 21:02:10.000000000,"[{'_account_id': 6816}, {'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 26343}, {'_account_id': 33080}]","[{'number': 1, 'created': '2021-07-09 11:01:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/6b339ca1a2f1cea3d993806b1129c0d25657874f', 'message': 'Move the upgrade prepare script generation in the build script playbook.\n\nCurrently, the overcloud_upgrade_prepare.sh script was being built in the\novercloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params\nparameter was up to date. However, this parameter is not used anymore in\nthe ffu workflow and the upgrades workflow is not being used by our CI so\nit should be safe to move it back to the create-overcloud-ffu-script.yaml.\n\nChange-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50\n'}, {'number': 2, 'created': '2021-07-09 14:48:56.000000000', 'files': ['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/ef5bfc5bdf4dea47b6e3de51a02fdc7ced475aea', 'message': 'Move the upgrade prepare script generation in the build script playbook.\n\nCurrently, the overcloud_upgrade_prepare.sh script was being built in the\novercloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params\nparameter was up to date. However, this parameter is not used anymore in\nthe ffu workflow and the upgrades workflow is not being used by our CI so\nit should be safe to move it back to the create-overcloud-ffu-script.yaml.\n\nChange-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50\n'}]",0,800200,ef5bfc5bdf4dea47b6e3de51a02fdc7ced475aea,17,6,2,26343,,,0,"Move the upgrade prepare script generation in the build script playbook.

Currently, the overcloud_upgrade_prepare.sh script was being built in the
overcloud_upgrade_prepare.yaml playbook to make sure the upgrade_prepare_extra_params
parameter was up to date. However, this parameter is not used anymore in
the ffu workflow and the upgrades workflow is not being used by our CI so
it should be safe to move it back to the create-overcloud-ffu-script.yaml.

Change-Id: I32494fb21d40cd3231e619c748fdfce7ff891f50
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/00/800200/2 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/fast-forward-upgrade/create-overcloud-ffu-scripts.yaml', 'tasks/upgrade/create-overcloud-upgrade-scripts.yaml', 'tasks/upgrade/main.yml', 'tasks/upgrade/overcloud_upgrade_prepare.yml', 'tasks/fast-forward-upgrade/main.yml']",5,6b339ca1a2f1cea3d993806b1129c0d25657874f,, ffu_overcloud_prepare|bool or,,29,17
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I9c3a38b828404b559ca4858e1d4e1297aa668301,openstack/tripleo-heat-templates,stable/wallaby,I9c3a38b828404b559ca4858e1d4e1297aa668301,Add CephAdmDebug parameter,MERGED,2021-07-30 07:03:59.000000000,2021-07-30 21:02:08.000000000,2021-07-30 21:02:08.000000000,"[{'_account_id': 6796}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 07:03:59.000000000', 'files': ['deployment/cephadm/ceph-base.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f85b09bf2dfe2abb3650a9b98d5824b25f27cbb9', 'message': 'Add CephAdmDebug parameter\n\nThis change adds the cephadm debug parameter to allow operators to\nset the debug related config-key and see a more verbose output.\n\nDepends-On: Ic2e54e537b50cb92b1650e78f1af61703e877763\nChange-Id: I9c3a38b828404b559ca4858e1d4e1297aa668301\n(cherry picked from commit cf0b6a161c7425a149b453705b33f9f79fd08e87)\n'}]",0,802941,f85b09bf2dfe2abb3650a9b98d5824b25f27cbb9,11,8,1,25402,,,0,"Add CephAdmDebug parameter

This change adds the cephadm debug parameter to allow operators to
set the debug related config-key and see a more verbose output.

Depends-On: Ic2e54e537b50cb92b1650e78f1af61703e877763
Change-Id: I9c3a38b828404b559ca4858e1d4e1297aa668301
(cherry picked from commit cf0b6a161c7425a149b453705b33f9f79fd08e87)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/41/802941/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/cephadm/ceph-base.yaml'],1,f85b09bf2dfe2abb3650a9b98d5824b25f27cbb9,cephadm_debug_mode," CephAdmDebug: type: boolean default: false description: | If this parameter is true, then cephadm sets the debug related mgr config-key and produces a more verbose output. tripleo_cephadm_debug: {get_param: CephAdmDebug}",,7,0
openstack%2Fnova~master~I74e090e699bf1163b2038b2dc430d01e1625b01c,openstack/nova,master,I74e090e699bf1163b2038b2dc430d01e1625b01c,WIP: nova-audit: Use cliff instead of homegrown argparse bleh,NEW,2021-07-30 16:54:49.000000000,2021-07-30 20:48:14.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-30 16:54:49.000000000', 'files': ['nova/tests/functional/test_nova_audit.py', 'requirements.txt', 'nova/cmd/audit.py', 'nova/tests/unit/cmd/fakes.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/nova/commit/2c625123ce0038db6a222fd61c31455a43fc821e', 'message': ""WIP: nova-audit: Use cliff instead of homegrown argparse bleh\n\nThere are a couple of advantages to this approach, chief among them\nbeing the free docs and alignment with things like openstackclient.\ncliff is added to requirements.txt, although it's really been a\ndependency for many years now, albeit implicitly.\n\nWIP because some of the PlacementHealAllocationsTestCase tests are\nfailing due to the following error:\n\n  NotImplementedError: Cannot load 'database_connection' in the base\n  class\n\nCaused by:\n\n  with context.target_cell(ctxt, cell) as cctxt:\n\nNot sure what's changed here and why this wasn't happening before.\nMissing configuration? I also need to finish converting the functional\ntests.\n\nChange-Id: I74e090e699bf1163b2038b2dc430d01e1625b01c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",0,803059,2c625123ce0038db6a222fd61c31455a43fc821e,5,1,1,15334,,,0,"WIP: nova-audit: Use cliff instead of homegrown argparse bleh

There are a couple of advantages to this approach, chief among them
being the free docs and alignment with things like openstackclient.
cliff is added to requirements.txt, although it's really been a
dependency for many years now, albeit implicitly.

WIP because some of the PlacementHealAllocationsTestCase tests are
failing due to the following error:

  NotImplementedError: Cannot load 'database_connection' in the base
  class

Caused by:

  with context.target_cell(ctxt, cell) as cctxt:

Not sure what's changed here and why this wasn't happening before.
Missing configuration? I also need to finish converting the functional
tests.

Change-Id: I74e090e699bf1163b2038b2dc430d01e1625b01c
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/59/803059/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_nova_audit.py', 'requirements.txt', 'nova/cmd/audit.py', 'nova/tests/unit/cmd/fakes.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'setup.cfg']",7,2c625123ce0038db6a222fd61c31455a43fc821e,bp/nova-audit,nova.commands.audit = database archive_deleted_rows = nova.cmd.audit:DatabaseArchiveDeletedRows database purge = nova.cmd.audit:DatabasePurge cells discover_hosts = nova.cmd.audit:CellsDiscoverHosts cells map_instances = nova.cmd.audit:CellsMapInstances placement heal_allocations = nova.cmd.audit:PlacementHealAllocations placement sync_aggregates = nova.cmd.audit:PlacementSyncAggregates,,1311,517
openstack%2Fsahara~master~I4ba83f1007dd11801b8e32c6d7566769e005480b,openstack/sahara,master,I4ba83f1007dd11801b8e32c6d7566769e005480b,Preinstall requirements for docs build,MERGED,2021-07-30 18:05:16.000000000,2021-07-30 20:34:40.000000000,2021-07-30 20:33:09.000000000,"[{'_account_id': 10459}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 18:05:16.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/sahara/commit/e0136189fc147deb7c4b92ed93eabb3cdcb9b7bb', 'message': 'Preinstall requirements for docs build\n\nSphinx installs the package with its dependencies, but it does not use\nthe constraints. This can lead to errors if a dependency introduces any\nbackward incompatible changes. To avoid this the dependencies needs to\nbe installed prior to sphinx run by tox with the correct constraints.\n\nChange-Id: I4ba83f1007dd11801b8e32c6d7566769e005480b\n'}]",0,803061,e0136189fc147deb7c4b92ed93eabb3cdcb9b7bb,7,2,1,17685,,,0,"Preinstall requirements for docs build

Sphinx installs the package with its dependencies, but it does not use
the constraints. This can lead to errors if a dependency introduces any
backward incompatible changes. To avoid this the dependencies needs to
be installed prior to sphinx run by tox with the correct constraints.

Change-Id: I4ba83f1007dd11801b8e32c6d7566769e005480b
",git fetch https://review.opendev.org/openstack/sahara refs/changes/61/803061/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,e0136189fc147deb7c4b92ed93eabb3cdcb9b7bb,fix-docs-reqs, -r{toxinidir}/requirements.txt,,1,0
openstack%2Fnova~master~Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231,openstack/nova,master,Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231,Move nova-manage db purge to nova-audit,NEW,2020-02-20 02:33:46.000000000,2021-07-30 20:14:16.000000000,,"[{'_account_id': 4690}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-02-20 02:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/aed92e6b99a977f78404acd7d4c776a60bb378e9', 'message': ""Move nova-manage db purge to nova-audit\n\nThis deprecates the 'nova-manage db purge' command and moves it to the\n'nova-audit database purge' command. Associated tests are also moved.\n\nAdditional commands will be deprecated and moved in separate patches to\nhelp make review easier.\n\nPart of blueprint nova-audit\n\nChange-Id: Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231\n""}, {'number': 2, 'created': '2020-04-01 16:01:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0b4631f7b19f44f1e301057fb862a8907c2ed813', 'message': ""Move nova-manage db purge to nova-audit\n\nThis deprecates the 'nova-manage db purge' command and moves it to the\n'nova-audit database purge' command. Associated tests are also moved.\n\nAdditional commands will be deprecated and moved in separate patches to\nhelp make review easier.\n\nPart of blueprint nova-audit\n\nChange-Id: Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231\n""}, {'number': 3, 'created': '2020-04-02 22:29:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c283d515b141a39926ca23d356ea60908695cb21', 'message': ""Move nova-manage db purge to nova-audit\n\nThis deprecates the 'nova-manage db purge' command and moves it to the\n'nova-audit database purge' command. Associated tests are also moved.\n\nAdditional commands will be deprecated and moved in separate patches to\nhelp make review easier.\n\nPart of blueprint nova-audit\n\nChange-Id: Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231\n""}, {'number': 4, 'created': '2020-04-17 01:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/018797b235681dc005f2bfcb04b5ee7fecb38179', 'message': ""Move nova-manage db purge to nova-audit\n\nThis deprecates the 'nova-manage db purge' command and moves it to the\n'nova-audit database purge' command. Associated tests are also moved.\n\nAdditional commands will be deprecated and moved in separate patches to\nhelp make review easier.\n\nPart of blueprint nova-audit\n\nChange-Id: Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231\n""}, {'number': 5, 'created': '2021-07-30 16:54:49.000000000', 'files': ['nova/cmd/audit.py', 'doc/source/cli/nova-status.rst', 'doc/source/conf.py', 'nova/cmd/manage.py', 'doc/source/cli/nova-audit.rst', 'releasenotes/notes/add-nova-audit-command-7368b893ccc79bce.yaml', 'nova/hacking/checks.py', 'nova/tests/unit/cmd/test_manage.py', 'doc/source/cli/nova-manage.rst', 'doc/source/cli/nova-policy.rst', 'doc/source/cli/index.rst', 'nova/tests/unit/cmd/test_audit.py', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/nova/commit/6ecc10ff674af0783e5b4ee5ad4dd6768f400bca', 'message': ""Move nova-manage db purge to nova-audit\n\nThis deprecates the 'nova-manage db purge' command and moves it to the\n'nova-audit database purge' command. Associated tests are also moved and\ndocumentation is copied across from the existing nova-manage docs.\n\nAdditional commands will be deprecated and moved in separate patches to\nhelp make review easier.\n\nPart of blueprint nova-audit\n\nChange-Id: Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231\n""}]",3,708783,6ecc10ff674af0783e5b4ee5ad4dd6768f400bca,44,12,5,4690,,,0,"Move nova-manage db purge to nova-audit

This deprecates the 'nova-manage db purge' command and moves it to the
'nova-audit database purge' command. Associated tests are also moved and
documentation is copied across from the existing nova-manage docs.

Additional commands will be deprecated and moved in separate patches to
help make review easier.

Part of blueprint nova-audit

Change-Id: Idcd5f9b3ec67cb3c68d744b7f3a1b796f0829231
",git fetch https://review.opendev.org/openstack/nova refs/changes/83/708783/5 && git format-patch -1 --stdout FETCH_HEAD,"['nova/cmd/audit.py', 'nova/hacking/checks.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'setup.cfg']",6,aed92e6b99a977f78404acd7d4c776a60bb378e9,bp/nova-audit, nova-audit = nova.cmd.audit:main,,261,114
openstack%2Fplacement~master~I569043dd9f1c964faf7d4fcbb901a93f9569bf3d,openstack/placement,master,I569043dd9f1c964faf7d4fcbb901a93f9569bf3d,placement-status: check only consumers in allocation table,MERGED,2020-11-17 10:41:08.000000000,2021-07-30 19:50:08.000000000,2021-07-30 19:48:50.000000000,"[{'_account_id': 4690}, {'_account_id': 15334}, {'_account_id': 21813}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-11-17 10:41:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/b36e6e63779fc6de9a02ff91119f4fa77c174b63', 'message': ""placement-status: check only consumers in allocation table\n\nInitially, _check_incomplete_consumers was intended to find the case\nwhen consumers are mentioned in allocation but do not exist in the\nconsumer table. Due to a bug it's possible to have rows in the\nconsumer table those are not in the allocation table. The second case\nit seems was not expected and it can be tricky to automate a cleanup\nwith zero touch upgrade.\n\nThis patch modifies the check such way it counts only consumers\npresented in the allocation table.\n\nrelated-bug: #1780799\nChange-Id: I569043dd9f1c964faf7d4fcbb901a93f9569bf3d\n""}, {'number': 2, 'created': '2020-11-18 11:15:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/da8b06b68f37bbe169d2ba40d79c990a1da50cac', 'message': ""placement-status: check only consumers in allocation table\n\nInitially, _check_incomplete_consumers was intended to find the case\nwhen consumers are mentioned in allocation but do not exist in the\nconsumer table. Due to a bug it's possible to have rows in the\nconsumer table those are not in the allocation table. The second case\nit seems was not expected and it can be tricky to automate a cleanup\nwith zero touch upgrade.\n\nThis patch modifies the check such way it counts only consumers\npresented in the allocation table.\n\nrelated-bug: #1780799\nChange-Id: I569043dd9f1c964faf7d4fcbb901a93f9569bf3d\n""}, {'number': 3, 'created': '2021-07-30 17:04:33.000000000', 'files': ['placement/tests/functional/db/test_consumer.py', 'placement/cmd/status.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/3253e2efc05836b0b5cefafbf2b2656e9e1a50c7', 'message': ""placement-status: check only consumers in allocation table\n\nInitially, _check_incomplete_consumers was intended to find the case\nwhen consumers are mentioned in allocation but do not exist in the\nconsumer table. Due to a bug it's possible to have rows in the\nconsumer table those are not in the allocation table. The second case\nit seems was not expected and it can be tricky to automate a cleanup\nwith zero touch upgrade.\n\nThis patch modifies the check such way it counts only consumers\npresented in the allocation table.\n\nRelated-bug: #1780799\nChange-Id: I569043dd9f1c964faf7d4fcbb901a93f9569bf3d\n""}]",7,762987,3253e2efc05836b0b5cefafbf2b2656e9e1a50c7,19,4,3,21813,,,0,"placement-status: check only consumers in allocation table

Initially, _check_incomplete_consumers was intended to find the case
when consumers are mentioned in allocation but do not exist in the
consumer table. Due to a bug it's possible to have rows in the
consumer table those are not in the allocation table. The second case
it seems was not expected and it can be tricky to automate a cleanup
with zero touch upgrade.

This patch modifies the check such way it counts only consumers
presented in the allocation table.

Related-bug: #1780799
Change-Id: I569043dd9f1c964faf7d4fcbb901a93f9569bf3d
",git fetch https://review.opendev.org/openstack/placement refs/changes/87/762987/1 && git format-patch -1 --stdout FETCH_HEAD,['placement/cmd/status.py'],1,b36e6e63779fc6de9a02ff91119f4fa77c174b63,," allocation = models.Allocation.__table__ consumer = models.Consumer.__table__ return ctxt.session.execute( sa.select([sa.func.count( sa.distinct(allocation.c.consumer_id))]) .select_from( allocation.outerjoin( consumer, allocation.c.consumer_id == consumer.c.uuid)) .where(consumer.c.id.is_(None))).fetchone()[0]", # Count the total number of consumers. num_consumers = ctxt.session.query(models.Consumer).count() # Count the total number of unique consumers in the allocations table. num_alloc_consumers = ctxt.session.query(models.Allocation).group_by( models.Allocation.consumer_id).count() return num_alloc_consumers - num_consumers,10,6
openstack%2Fnova~master~I9227827e2ad00e09ae2a95b74fbd60feb486ae67,openstack/nova,master,I9227827e2ad00e09ae2a95b74fbd60feb486ae67,Move nova-manage db archive_deleted_rows to nova-audit,NEW,2020-02-20 02:33:46.000000000,2021-07-30 19:46:29.000000000,,"[{'_account_id': 4690}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-02-20 02:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a5b0ada5db2c52bdf30f9f3ce4c8337d9427bec0', 'message': ""Move nova-manage db archive_deleted_rows to nova-audit\n\nThis deprecates the 'nova-manage db archive_deleted_rows' command\nand moves it to the 'nova-audit database archive_deleted_rows' command.\n\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I9227827e2ad00e09ae2a95b74fbd60feb486ae67\n""}, {'number': 2, 'created': '2020-04-01 16:01:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/54ae29c4bd913bceb85d9ad482589f4e1f905f13', 'message': ""Move nova-manage db archive_deleted_rows to nova-audit\n\nThis deprecates the 'nova-manage db archive_deleted_rows' command\nand moves it to the 'nova-audit database archive_deleted_rows' command.\n\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I9227827e2ad00e09ae2a95b74fbd60feb486ae67\n""}, {'number': 3, 'created': '2020-04-02 22:29:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8adc9e4e92948dd9b5dab5e2220eb8d16f1a07f1', 'message': ""Move nova-manage db archive_deleted_rows to nova-audit\n\nThis deprecates the 'nova-manage db archive_deleted_rows' command\nand moves it to the 'nova-audit database archive_deleted_rows' command.\n\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I9227827e2ad00e09ae2a95b74fbd60feb486ae67\n""}, {'number': 4, 'created': '2020-04-17 01:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6061b091d45ad7405059b2582caa61462170df1d', 'message': ""Move nova-manage db archive_deleted_rows to nova-audit\n\nThis deprecates the 'nova-manage db archive_deleted_rows' command\nand moves it to the 'nova-audit database archive_deleted_rows' command.\n\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I9227827e2ad00e09ae2a95b74fbd60feb486ae67\n""}, {'number': 5, 'created': '2021-07-30 16:54:49.000000000', 'files': ['nova/tests/functional/test_nova_audit.py', 'nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'releasenotes/notes/add-nova-audit-command-7368b893ccc79bce.yaml', 'nova/tests/unit/cmd/test_manage.py', 'doc/source/cli/nova-manage.rst', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'doc/source/cli/nova-audit.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/bedd8f6fb806e971c994cd97d855db89a3ec5da1', 'message': ""Move nova-manage db archive_deleted_rows to nova-audit\n\nThis deprecates the 'nova-manage db archive_deleted_rows' command\nand moves it to the 'nova-audit database archive_deleted_rows' command.\n\nAssociated unit and functional tests are also moved, as are docs.\n\nPart of blueprint nova-audit\n\nChange-Id: I9227827e2ad00e09ae2a95b74fbd60feb486ae67\n""}]",5,708784,bedd8f6fb806e971c994cd97d855db89a3ec5da1,45,12,5,4690,,,0,"Move nova-manage db archive_deleted_rows to nova-audit

This deprecates the 'nova-manage db archive_deleted_rows' command
and moves it to the 'nova-audit database archive_deleted_rows' command.

Associated unit and functional tests are also moved, as are docs.

Part of blueprint nova-audit

Change-Id: I9227827e2ad00e09ae2a95b74fbd60feb486ae67
",git fetch https://review.opendev.org/openstack/nova refs/changes/84/708784/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_nova_audit.py', 'nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py']",6,a5b0ada5db2c52bdf30f9f3ce4c8337d9427bec0,bp/nova-audit,"from oslo_utils import uuidutilsfrom nova import context from nova.db import api as db def test_archive_deleted_rows_negative(self): self.assertEqual(2, self.commands.archive_deleted_rows(-1)) def test_archive_deleted_rows_large_number(self): large_number = '1' * 100 self.assertEqual(2, self.commands.archive_deleted_rows(large_number)) @mock.patch('nova.cmd.audit.DatabaseCommands.purge') @mock.patch.object(db, 'archive_deleted_rows', # Each call to archive in each cell returns # total_rows_archived=15, so passing max_rows=30 will # only iterate the first two cells. return_value=(dict(instances=10, consoles=5), list(), 15)) def _test_archive_deleted_rows_all_cells(self, mock_db_archive, mock_purge, purge=False): cell_dbs = nova_fixtures.CellDatabases() cell_dbs.add_cell_database('fake:///db1') cell_dbs.add_cell_database('fake:///db2') cell_dbs.add_cell_database('fake:///db3') self.useFixture(cell_dbs) ctxt = context.RequestContext() cell_mapping1 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db1', transport_url='fake:///mq1', name='cell1') cell_mapping1.create() cell_mapping2 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db2', transport_url='fake:///mq2', name='cell2') cell_mapping2.create() cell_mapping3 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db3', transport_url='fake:///mq3', name='cell3') cell_mapping3.create() # Archive with max_rows=30, so we test the case that when we are out of # limit, we don't go to the remaining cell. result = self.commands.archive_deleted_rows(30, verbose=True, all_cells=True, purge=purge) mock_db_archive.assert_has_calls([ # Called with max_rows=30 but only 15 were archived. mock.call(test.MatchType(context.RequestContext), 30, before=None), # So the total from the last call was 15 and the new max_rows=15 # for the next call in the second cell. mock.call(test.MatchType(context.RequestContext), 15, before=None) ]) output = self.output.getvalue() expected = '''\ +-----------------+-------------------------+ | Table | Number of Rows Archived | +-----------------+-------------------------+ | cell1.consoles | 5 | | cell1.instances | 10 | | cell2.consoles | 5 | | cell2.instances | 10 | +-----------------+-------------------------+ ''' if purge: expected += 'Rows were archived, running purge...\n' mock_purge.assert_called_once_with(purge_all=True, verbose=True, all_cells=True) else: mock_purge.assert_not_called() self.assertEqual(expected, output) self.assertEqual(1, result) def test_archive_deleted_rows_all_cells(self): self._test_archive_deleted_rows_all_cells() def test_archive_deleted_rows_all_cells_purge(self): self._test_archive_deleted_rows_all_cells(purge=True) @mock.patch.object(db, 'archive_deleted_rows') def test_archive_deleted_rows_all_cells_until_complete(self, mock_db_archive): # First two calls to archive in each cell return total_rows_archived=15 # and the last call returns 0 (nothing left to archive). fake_return = (dict(instances=10, consoles=5), list(), 15) mock_db_archive.side_effect = [fake_return, (dict(), list(), 0), fake_return, (dict(), list(), 0), (dict(), list(), 0)] cell_dbs = nova_fixtures.CellDatabases() cell_dbs.add_cell_database('fake:///db1') cell_dbs.add_cell_database('fake:///db2') cell_dbs.add_cell_database('fake:///db3') self.useFixture(cell_dbs) ctxt = context.RequestContext() cell_mapping1 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db1', transport_url='fake:///mq1', name='cell1') cell_mapping1.create() cell_mapping2 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db2', transport_url='fake:///mq2', name='cell2') cell_mapping2.create() cell_mapping3 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db3', transport_url='fake:///mq3', name='cell3') cell_mapping3.create() # Archive with max_rows=30, so we test that subsequent max_rows are not # reduced when until_complete=True. There is no max total limit. result = self.commands.archive_deleted_rows(30, verbose=True, all_cells=True, until_complete=True) mock_db_archive.assert_has_calls([ # Called with max_rows=30 but only 15 were archived. mock.call(test.MatchType(context.RequestContext), 30, before=None), # Called with max_rows=30 but 0 were archived (nothing left to # archive in this cell) mock.call(test.MatchType(context.RequestContext), 30, before=None), # So the total from the last call was 0 and the new max_rows=30 # because until_complete=True. mock.call(test.MatchType(context.RequestContext), 30, before=None), # Called with max_rows=30 but 0 were archived (nothing left to # archive in this cell) mock.call(test.MatchType(context.RequestContext), 30, before=None), # Called one final time with max_rows=30 mock.call(test.MatchType(context.RequestContext), 30, before=None) ]) output = self.output.getvalue() expected = '''\ Archiving.....complete +-----------------+-------------------------+ | Table | Number of Rows Archived | +-----------------+-------------------------+ | cell1.consoles | 5 | | cell1.instances | 10 | | cell2.consoles | 5 | | cell2.instances | 10 | +-----------------+-------------------------+ ''' self.assertEqual(expected, output) self.assertEqual(1, result) @mock.patch.object(db, 'archive_deleted_rows', return_value=( dict(instances=10, consoles=5), list(), 15)) def _test_archive_deleted_rows(self, mock_db_archive, verbose=False): result = self.commands.archive_deleted_rows(20, verbose=verbose) mock_db_archive.assert_called_once_with( test.MatchType(context.RequestContext), 20, before=None) output = self.output.getvalue() if verbose: expected = '''\ +-----------+-------------------------+ | Table | Number of Rows Archived | +-----------+-------------------------+ | consoles | 5 | | instances | 10 | +-----------+-------------------------+ ''' self.assertEqual(expected, output) else: self.assertEqual(0, len(output)) self.assertEqual(1, result) def test_archive_deleted_rows(self): # Tests that we don't show any table output (not verbose). self._test_archive_deleted_rows() def test_archive_deleted_rows_verbose(self): # Tests that we get table output. self._test_archive_deleted_rows(verbose=True) @mock.patch.object(db, 'archive_deleted_rows') @mock.patch.object(objects.CellMappingList, 'get_all') def test_archive_deleted_rows_until_complete(self, mock_get_all, mock_db_archive, verbose=False): mock_db_archive.side_effect = [ ({'instances': 10, 'instance_extra': 5}, list(), 15), ({'instances': 5, 'instance_faults': 1}, list(), 6), ({}, list(), 0)] result = self.commands.archive_deleted_rows(20, verbose=verbose, until_complete=True) self.assertEqual(1, result) if verbose: expected = """"""\ Archiving.....complete +-----------------+-------------------------+ | Table | Number of Rows Archived | +-----------------+-------------------------+ | instance_extra | 5 | | instance_faults | 1 | | instances | 15 | +-----------------+-------------------------+ """""" else: expected = '' self.assertEqual(expected, self.output.getvalue()) mock_db_archive.assert_has_calls([ mock.call(test.MatchType(context.RequestContext), 20, before=None), mock.call(test.MatchType(context.RequestContext), 20, before=None), mock.call(test.MatchType(context.RequestContext), 20, before=None), ]) def test_archive_deleted_rows_until_complete_quiet(self): self.test_archive_deleted_rows_until_complete(verbose=False) @mock.patch('nova.db.sqlalchemy.api.purge_shadow_tables') @mock.patch.object(db, 'archive_deleted_rows') @mock.patch.object(objects.CellMappingList, 'get_all') def test_archive_deleted_rows_until_stopped(self, mock_get_all, mock_db_archive, mock_db_purge, verbose=True): mock_db_archive.side_effect = [ ({'instances': 10, 'instance_extra': 5}, list(), 15), ({'instances': 5, 'instance_faults': 1}, list(), 6), KeyboardInterrupt] result = self.commands.archive_deleted_rows(20, verbose=verbose, until_complete=True, purge=True) self.assertEqual(1, result) if verbose: expected = """"""\ Archiving.....stopped +-----------------+-------------------------+ | Table | Number of Rows Archived | +-----------------+-------------------------+ | instance_extra | 5 | | instance_faults | 1 | | instances | 15 | +-----------------+-------------------------+ Rows were archived, running purge... """""" else: expected = '' self.assertEqual(expected, self.output.getvalue()) mock_db_archive.assert_has_calls([ mock.call(test.MatchType(context.RequestContext), 20, before=None), mock.call(test.MatchType(context.RequestContext), 20, before=None), mock.call(test.MatchType(context.RequestContext), 20, before=None), ]) mock_db_purge.assert_called_once_with(mock.ANY, None, status_fn=mock.ANY) @mock.patch.object(db, 'archive_deleted_rows') def test_archive_deleted_rows_until_stopped_cells(self, mock_db_archive, verbose=True): # Test when archive with all_cells=True and until_complete=True, # when hit KeyboardInterrupt, it will directly return and not # process remaining cells. mock_db_archive.side_effect = [ ({'instances': 10, 'instance_extra': 5}, list(), 15), KeyboardInterrupt] cell_dbs = nova_fixtures.CellDatabases() cell_dbs.add_cell_database('fake:///db1') cell_dbs.add_cell_database('fake:///db2') cell_dbs.add_cell_database('fake:///db3') self.useFixture(cell_dbs) ctxt = context.RequestContext() cell_mapping1 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db1', transport_url='fake:///mq1', name='cell1') cell_mapping1.create() cell_mapping2 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db2', transport_url='fake:///mq2', name='cell2') cell_mapping2.create() cell_mapping3 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db3', transport_url='fake:///mq3', name='cell3') cell_mapping3.create() result = self.commands.archive_deleted_rows(20, verbose=verbose, until_complete=True, all_cells=True) self.assertEqual(1, result) if verbose: expected = '''\ Archiving....stopped +----------------------+-------------------------+ | Table | Number of Rows Archived | +----------------------+-------------------------+ | cell1.instance_extra | 5 | | cell1.instances | 10 | +----------------------+-------------------------+ ''' else: expected = '' self.assertEqual(expected, self.output.getvalue()) mock_db_archive.assert_has_calls([ mock.call(test.MatchType(context.RequestContext), 20, before=None), mock.call(test.MatchType(context.RequestContext), 20, before=None) ]) def test_archive_deleted_rows_until_stopped_quiet(self): self.test_archive_deleted_rows_until_stopped(verbose=False) @mock.patch.object(db, 'archive_deleted_rows') @mock.patch.object(objects.CellMappingList, 'get_all') def test_archive_deleted_rows_before(self, mock_get_all, mock_db_archive): mock_db_archive.side_effect = [ ({'instances': 10, 'instance_extra': 5}, list(), 15), ({'instances': 5, 'instance_faults': 1}, list(), 6), KeyboardInterrupt] result = self.commands.archive_deleted_rows(20, before='2017-01-13') mock_db_archive.assert_called_once_with( test.MatchType(context.RequestContext), 20, before=datetime.datetime(2017, 1, 13)) self.assertEqual(1, result) @mock.patch.object(db, 'archive_deleted_rows', return_value=({}, [], 0)) @mock.patch.object(objects.CellMappingList, 'get_all') def test_archive_deleted_rows_verbose_no_results(self, mock_get_all, mock_db_archive): result = self.commands.archive_deleted_rows(20, verbose=True, purge=True) mock_db_archive.assert_called_once_with( test.MatchType(context.RequestContext), 20, before=None) output = self.output.getvalue() # If nothing was archived, there should be no purge messages self.assertIn('Nothing was archived.', output) self.assertEqual(0, result) @mock.patch.object(db, 'archive_deleted_rows') @mock.patch.object(objects.RequestSpec, 'destroy_bulk') @mock.patch.object(objects.InstanceGroup, 'destroy_members_bulk') def test_archive_deleted_rows_and_api_db_records( self, mock_members_destroy, mock_reqspec_destroy, mock_db_archive, verbose=True): self.useFixture(nova_fixtures.Database()) self.useFixture(nova_fixtures.Database(database='api')) ctxt = context.RequestContext('fake-user', 'fake_project') cell_uuid = uuidutils.generate_uuid() cell_mapping = objects.CellMapping(context=ctxt, uuid=cell_uuid, database_connection='fake:///db', transport_url='fake:///mq', name='cell1') cell_mapping.create() uuids = [] for i in range(2): uuid = uuidutils.generate_uuid() uuids.append(uuid) objects.Instance(ctxt, project_id=ctxt.project_id, uuid=uuid)\ .create() objects.InstanceMapping(ctxt, project_id=ctxt.project_id, cell_mapping=cell_mapping, instance_uuid=uuid)\ .create() mock_db_archive.return_value = ( dict(instances=2, consoles=5), uuids, 7) mock_reqspec_destroy.return_value = 2 mock_members_destroy.return_value = 0 result = self.commands.archive_deleted_rows(20, verbose=verbose, all_cells=True) self.assertEqual(1, result) mock_db_archive.assert_has_calls([ mock.call(test.MatchType(context.RequestContext), 20, before=None) ]) self.assertEqual(1, mock_reqspec_destroy.call_count) mock_members_destroy.assert_called_once() output = self.output.getvalue() if verbose: expected = '''\ +------------------------------+-------------------------+ | Table | Number of Rows Archived | +------------------------------+-------------------------+ | API_DB.instance_group_member | 0 | | API_DB.instance_mappings | 2 | | API_DB.request_specs | 2 | | cell1.consoles | 5 | | cell1.instances | 2 | +------------------------------+-------------------------+ ''' self.assertEqual(expected, output) else: self.assertEqual(0, len(output)) @mock.patch.object(objects.CellMappingList, 'get_all', side_effect=db_exc.CantStartEngineError) def test_archive_deleted_rows_without_api_connection_configured(self, mock_get_all): result = self.commands.archive_deleted_rows(20, verbose=True) mock_get_all.assert_called_once() output = self.output.getvalue() expected = '''\ Failed to connect to API DB so aborting this archival attempt. \ Please check your config file to make sure that [api_database]/connection \ is set and run this command again. ''' self.assertEqual(expected, output) self.assertEqual(3, result) ",,833,769
openstack%2Fnova~master~I1704a16616e46b412a61c34ccec56f64dbf1eedc,openstack/nova,master,I1704a16616e46b412a61c34ccec56f64dbf1eedc,Move nova-manage placement heal_allocations to nova-audit,NEW,2020-02-20 02:33:46.000000000,2021-07-30 19:43:41.000000000,,"[{'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-02-20 02:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8c814d539fa62777d282de438e56969377c2e30d', 'message': ""Move nova-manage placement heal_allocations to nova-audit\n\nThis deprecates the 'nova-manage placement heal_allocations' command\nand moves it to the 'nova-audit placement heal_allocations' command.\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I1704a16616e46b412a61c34ccec56f64dbf1eedc\n""}, {'number': 2, 'created': '2020-04-01 16:01:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/084ba6deaef2f9a001909ae9984037ace4810687', 'message': ""Move nova-manage placement heal_allocations to nova-audit\n\nThis deprecates the 'nova-manage placement heal_allocations' command\nand moves it to the 'nova-audit placement heal_allocations' command.\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I1704a16616e46b412a61c34ccec56f64dbf1eedc\n""}, {'number': 3, 'created': '2020-04-02 01:36:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ed426804322f635e439019bbf499716bda6949dd', 'message': ""Move nova-manage placement heal_allocations to nova-audit\n\nThis deprecates the 'nova-manage placement heal_allocations' command\nand moves it to the 'nova-audit placement heal_allocations' command.\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I1704a16616e46b412a61c34ccec56f64dbf1eedc\n""}, {'number': 4, 'created': '2020-04-02 22:29:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/27094d031ce12de9e7836c44ad0551430eb094dc', 'message': ""Move nova-manage placement heal_allocations to nova-audit\n\nThis deprecates the 'nova-manage placement heal_allocations' command\nand moves it to the 'nova-audit placement heal_allocations' command.\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I1704a16616e46b412a61c34ccec56f64dbf1eedc\n""}, {'number': 5, 'created': '2020-04-17 01:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a359c291d1414eb79785082276f7744325f46b7c', 'message': ""Move nova-manage placement heal_allocations to nova-audit\n\nThis deprecates the 'nova-manage placement heal_allocations' command\nand moves it to the 'nova-audit placement heal_allocations' command.\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I1704a16616e46b412a61c34ccec56f64dbf1eedc\n""}, {'number': 6, 'created': '2021-07-30 16:54:49.000000000', 'files': ['nova/tests/functional/test_nova_audit.py', 'nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'releasenotes/notes/add-nova-audit-command-7368b893ccc79bce.yaml', 'nova/tests/unit/cmd/test_manage.py', 'doc/source/cli/nova-manage.rst', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'doc/source/cli/nova-audit.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/af6f0eb583ea2103fb3d25eef7f92b578910948b', 'message': ""Move nova-manage placement heal_allocations to nova-audit\n\nThis deprecates the 'nova-manage placement heal_allocations' command\nand moves it to the 'nova-audit placement heal_allocations' command.\nAssociated unit and functional tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I1704a16616e46b412a61c34ccec56f64dbf1eedc\n""}]",15,708788,af6f0eb583ea2103fb3d25eef7f92b578910948b,41,11,6,4690,,,0,"Move nova-manage placement heal_allocations to nova-audit

This deprecates the 'nova-manage placement heal_allocations' command
and moves it to the 'nova-audit placement heal_allocations' command.
Associated unit and functional tests are also moved.

Part of blueprint nova-audit

Change-Id: I1704a16616e46b412a61c34ccec56f64dbf1eedc
",git fetch https://review.opendev.org/openstack/nova refs/changes/88/708788/3 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_nova_audit.py', 'nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py']",6,8c814d539fa62777d282de438e56969377c2e30d,bp/nova-audit,"import ddtfrom oslo_serialization import jsonutilsfrom nova.tests.unit import fake_requests@ddt.ddt @ddt.data(-1, 0, ""one"") def test_heal_allocations_invalid_max_count(self, max_count): self.assertEqual(127, self.cli.heal_allocations(max_count=max_count)) @mock.patch('nova.objects.CellMappingList.get_all', return_value=objects.CellMappingList()) def test_heal_allocations_no_cells(self, mock_get_all_cells): self.assertEqual(4, self.cli.heal_allocations(verbose=True)) self.assertIn('No cells to process', self.output.getvalue()) @mock.patch('nova.objects.CellMappingList.get_all', return_value=objects.CellMappingList(objects=[ objects.CellMapping(name='cell1', uuid=uuidsentinel.cell1)])) @mock.patch('nova.objects.InstanceList.get_by_filters', return_value=objects.InstanceList()) def test_heal_allocations_no_instances( self, mock_get_instances, mock_get_all_cells): self.assertEqual(4, self.cli.heal_allocations(verbose=True)) self.assertIn('Processed 0 instances.', self.output.getvalue()) @mock.patch('nova.objects.CellMappingList.get_all', return_value=objects.CellMappingList(objects=[ objects.CellMapping(name='cell1', uuid=uuidsentinel.cell1)])) @mock.patch('nova.objects.InstanceList.get_by_filters', return_value=objects.InstanceList(objects=[ objects.Instance( uuid=uuidsentinel.instance, host='fake', node='fake', task_state=None)])) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'get_allocs_for_consumer', return_value={}) @mock.patch('nova.objects.ComputeNode.get_by_host_and_nodename', side_effect=exception.ComputeHostNotFound(host='fake')) def test_heal_allocations_compute_host_not_found( self, mock_get_compute_node, mock_get_allocs, mock_get_instances, mock_get_all_cells): self.assertEqual(2, self.cli.heal_allocations()) self.assertIn('Compute host fake could not be found.', self.output.getvalue()) @mock.patch('nova.objects.CellMappingList.get_all', return_value=objects.CellMappingList(objects=[ objects.CellMapping(name='cell1', uuid=uuidsentinel.cell1)])) @mock.patch('nova.objects.InstanceList.get_by_filters', return_value=objects.InstanceList(objects=[ objects.Instance( uuid=uuidsentinel.instance, host='fake', node='fake', task_state=None, flavor=objects.Flavor(), project_id='fake-project', user_id='fake-user')])) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'get_allocs_for_consumer', return_value={}) @mock.patch('nova.objects.ComputeNode.get_by_host_and_nodename', return_value=objects.ComputeNode(uuid=uuidsentinel.node)) @mock.patch('nova.scheduler.utils.resources_from_flavor', return_value={'VCPU': 1}) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.put', return_value=fake_requests.FakeResponse( 500, content=jsonutils.dumps({""errors"": [{""code"": """"}]}))) def test_heal_allocations_put_allocations_fails( self, mock_put_allocations, mock_res_from_flavor, mock_get_compute_node, mock_get_allocs, mock_get_instances, mock_get_all_cells): self.assertEqual(3, self.cli.heal_allocations()) self.assertIn('Failed to update allocations for consumer', self.output.getvalue()) instance = mock_get_instances.return_value[0] mock_res_from_flavor.assert_called_once_with( instance, instance.flavor) expected_payload = { 'allocations': { uuidsentinel.node: { 'resources': {'VCPU': 1} } }, 'user_id': 'fake-user', 'project_id': 'fake-project', 'consumer_generation': None } mock_put_allocations.assert_called_once_with( '/allocations/%s' % instance.uuid, expected_payload, global_request_id=mock.ANY, version='1.28') @mock.patch('nova.objects.CellMappingList.get_all', new=mock.Mock(return_value=objects.CellMappingList(objects=[ objects.CellMapping(name='cell1', uuid=uuidsentinel.cell1)]))) @mock.patch('nova.objects.InstanceList.get_by_filters', new=mock.Mock(return_value=objects.InstanceList(objects=[ objects.Instance( uuid=uuidsentinel.instance, host='fake', node='fake', task_state=None, flavor=objects.Flavor(), project_id='fake-project', user_id='fake-user')]))) def test_heal_allocations_get_allocs_placement_fails(self): self.assertEqual(3, self.cli.heal_allocations()) output = self.output.getvalue() self.assertIn('Allocation retrieval failed', output) # Having not mocked get_allocs_for_consumer, we get MissingAuthPlugin. self.assertIn('An auth plugin is required', output) @mock.patch('nova.objects.CellMappingList.get_all', new=mock.Mock(return_value=objects.CellMappingList(objects=[ objects.CellMapping(name='cell1', uuid=uuidsentinel.cell1)]))) @mock.patch('nova.objects.InstanceList.get_by_filters', side_effect=[ objects.InstanceList(objects=[objects.Instance( uuid=uuidsentinel.instance, host='fake', node='fake', task_state=None, flavor=objects.Flavor(), project_id='fake-project', user_id='fake-user')]), objects.InstanceList(objects=[])]) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'get_allocs_for_consumer', new=mock.Mock( side_effect=exception.ConsumerAllocationRetrievalFailed( consumer_uuid='CONSUMER', error='ERROR'))) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.put', new_callable=mock.NonCallableMagicMock) def test_heal_allocations_get_allocs_retrieval_fails(self, mock_put, mock_getinst): self.assertEqual(3, self.cli.heal_allocations()) @mock.patch('nova.objects.CellMappingList.get_all', return_value=objects.CellMappingList(objects=[ objects.CellMapping(name='cell1', uuid=uuidsentinel.cell1)])) @mock.patch('nova.objects.InstanceList.get_by_filters', # Called twice, first returns 1 instance, second returns [] side_effect=( objects.InstanceList(objects=[ objects.Instance( uuid=uuidsentinel.instance, host='fake', node='fake', task_state=None, project_id='fake-project', user_id='fake-user')]), objects.InstanceList())) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'get_allocs_for_consumer') @mock.patch('nova.objects.ComputeNode.get_by_host_and_nodename', new_callable=mock.NonCallableMock) # assert not called @mock.patch('nova.scheduler.client.report.SchedulerReportClient.put', return_value=fake_requests.FakeResponse(204)) def test_heal_allocations( self, mock_put, mock_get_compute_node, mock_get_allocs, mock_get_instances, mock_get_all_cells): """"""Tests the scenario that there are allocations created using placement API microversion < 1.8 where project/user weren't provided. The allocations will be re-put with the instance project_id/user_id values. Note that GET /allocations/{consumer_id} since commit f44965010 will create the missing consumer record using the config option sentinels for project and user, so we won't get null back for the consumer project/user. """""" mock_get_allocs.return_value = { ""allocations"": { ""92637880-2d79-43c6-afab-d860886c6391"": { ""generation"": 2, ""resources"": { ""DISK_GB"": 50, ""MEMORY_MB"": 512, ""VCPU"": 2 } } }, ""project_id"": uuidsentinel.project_id, ""user_id"": uuidsentinel.user_id, ""consumer_generation"": 12, } self.assertEqual(0, self.cli.heal_allocations(verbose=True)) self.assertIn('Processed 1 instances.', self.output.getvalue()) mock_get_allocs.assert_called_once_with( test.MatchType(context.RequestContext), uuidsentinel.instance) expected_put_data = mock_get_allocs.return_value expected_put_data['project_id'] = 'fake-project' expected_put_data['user_id'] = 'fake-user' mock_put.assert_called_once_with( '/allocations/%s' % uuidsentinel.instance, expected_put_data, global_request_id=mock.ANY, version='1.28') @mock.patch('nova.objects.CellMappingList.get_all', return_value=objects.CellMappingList(objects=[ objects.CellMapping(name='cell1', uuid=uuidsentinel.cell1)])) @mock.patch('nova.objects.InstanceList.get_by_filters', return_value=objects.InstanceList(objects=[ objects.Instance( uuid=uuidsentinel.instance, host='fake', node='fake', task_state=None, project_id='fake-project', user_id='fake-user')])) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'get_allocs_for_consumer') @mock.patch('nova.scheduler.client.report.SchedulerReportClient.put', return_value=fake_requests.FakeResponse( 409, content=jsonutils.dumps( {""errors"": [ {""code"": ""placement.concurrent_update"", ""detail"": ""consumer generation conflict""}]}))) def test_heal_allocations_put_fails( self, mock_put, mock_get_allocs, mock_get_instances, mock_get_all_cells): """"""Tests the scenario that there are allocations created using placement API microversion < 1.8 where project/user weren't provided and there was no consumer. The allocations will be re-put with the instance project_id/user_id values but that fails with a 409 so a return code of 3 is expected from the command. """""" mock_get_allocs.return_value = { ""allocations"": { ""92637880-2d79-43c6-afab-d860886c6391"": { ""generation"": 2, ""resources"": { ""DISK_GB"": 50, ""MEMORY_MB"": 512, ""VCPU"": 2 } } }, ""project_id"": uuidsentinel.project_id, ""user_id"": uuidsentinel.user_id } self.assertEqual(3, self.cli.heal_allocations(verbose=True)) self.assertIn( 'consumer generation conflict', self.output.getvalue()) mock_get_allocs.assert_called_once_with( test.MatchType(context.RequestContext), uuidsentinel.instance) expected_put_data = mock_get_allocs.return_value expected_put_data['project_id'] = 'fake-project' expected_put_data['user_id'] = 'fake-user' mock_put.assert_called_once_with( '/allocations/%s' % uuidsentinel.instance, expected_put_data, global_request_id=mock.ANY, version='1.28') def test_has_request_but_no_allocation(self): # False because there is a full resource_request and allocation set. self.assertFalse( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.healed, 'resource_request': { 'resources': { 'NET_BW_EGR_KILOBIT_PER_SEC': 1000, }, 'required': [ 'CUSTOM_VNIC_TYPE_NORMAL' ] }, 'binding:profile': {'allocation': uuidsentinel.rp1} })) # True because there is a full resource_request but no allocation set. self.assertTrue( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.needs_healing, 'resource_request': { 'resources': { 'NET_BW_EGR_KILOBIT_PER_SEC': 1000, }, 'required': [ 'CUSTOM_VNIC_TYPE_NORMAL' ] }, 'binding:profile': {} })) # True because there is a full resource_request but no allocation set. self.assertTrue( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.needs_healing_null_profile, 'resource_request': { 'resources': { 'NET_BW_EGR_KILOBIT_PER_SEC': 1000, }, 'required': [ 'CUSTOM_VNIC_TYPE_NORMAL' ] }, 'binding:profile': None, })) # False because there are no resources in the resource_request. self.assertFalse( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.empty_resources, 'resource_request': { 'resources': {}, 'required': [ 'CUSTOM_VNIC_TYPE_NORMAL' ] }, 'binding:profile': {} })) # False because there are no resources in the resource_request. self.assertFalse( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.missing_resources, 'resource_request': { 'required': [ 'CUSTOM_VNIC_TYPE_NORMAL' ] }, 'binding:profile': {} })) # False because there are no required traits in the resource_request. self.assertFalse( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.empty_required, 'resource_request': { 'resources': { 'NET_BW_EGR_KILOBIT_PER_SEC': 1000, }, 'required': [] }, 'binding:profile': {} })) # False because there are no required traits in the resource_request. self.assertFalse( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.missing_required, 'resource_request': { 'resources': { 'NET_BW_EGR_KILOBIT_PER_SEC': 1000, }, }, 'binding:profile': {} })) # False because there are no resources or required traits in the # resource_request. self.assertFalse( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.empty_resource_request, 'resource_request': {}, 'binding:profile': {} })) # False because there is no resource_request. self.assertFalse( self.cli._has_request_but_no_allocation( { 'id': uuidsentinel.missing_resource_request, 'binding:profile': {} })) def test_update_ports_only_updates_binding_profile(self): """"""Simple test to make sure that only the port's binding:profile is updated based on the provided port dict's binding:profile and not just the binding:profile allocation key or other fields on the port. """""" neutron = mock.Mock() output = mock.Mock() binding_profile = { 'allocation': uuidsentinel.rp_uuid, 'foo': 'bar' } ports_to_update = [{ 'id': uuidsentinel.port_id, 'binding:profile': binding_profile, 'bar': 'baz' }] self.cli._update_ports(neutron, ports_to_update, output) expected_update_body = { 'port': { 'binding:profile': binding_profile } } neutron.update_port.assert_called_once_with( uuidsentinel.port_id, body=expected_update_body) ",,2090,2052
openstack%2Fnova~master~I4967e80bb5a9399beafa5611997ba343d74d9094,openstack/nova,master,I4967e80bb5a9399beafa5611997ba343d74d9094,Move nova-manage placement sync_aggregates to nova-audit,NEW,2020-02-20 02:33:46.000000000,2021-07-30 19:42:35.000000000,,"[{'_account_id': 4690}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-02-20 02:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/04a1e8f64c30f967c03982eaa6861df62b0a478d', 'message': ""Move nova-manage placement sync_aggregates to nova-audit\n\nThis deprecates the 'nova-manage placement sync_aggregates' command\nand moves it to the 'nova-audit placement sync_aggregates' command.\nAssociated tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I4967e80bb5a9399beafa5611997ba343d74d9094\n""}, {'number': 2, 'created': '2020-04-01 16:01:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/af06cf96c8a13dbda5e581994bfc99a4db291a3e', 'message': ""Move nova-manage placement sync_aggregates to nova-audit\n\nThis deprecates the 'nova-manage placement sync_aggregates' command\nand moves it to the 'nova-audit placement sync_aggregates' command.\nAssociated tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I4967e80bb5a9399beafa5611997ba343d74d9094\n""}, {'number': 3, 'created': '2020-04-02 22:29:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/71a9f3cc4c3c1dbf0fd984bbecf6818ad70177db', 'message': ""Move nova-manage placement sync_aggregates to nova-audit\n\nThis deprecates the 'nova-manage placement sync_aggregates' command\nand moves it to the 'nova-audit placement sync_aggregates' command.\nAssociated tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I4967e80bb5a9399beafa5611997ba343d74d9094\n""}, {'number': 4, 'created': '2020-04-17 01:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/bcd18118716b28f8ef473e514ad8dca3dd45a604', 'message': ""Move nova-manage placement sync_aggregates to nova-audit\n\nThis deprecates the 'nova-manage placement sync_aggregates' command\nand moves it to the 'nova-audit placement sync_aggregates' command.\nAssociated tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I4967e80bb5a9399beafa5611997ba343d74d9094\n""}, {'number': 5, 'created': '2021-07-30 16:54:49.000000000', 'files': ['nova/tests/functional/test_nova_audit.py', 'nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'releasenotes/notes/add-nova-audit-command-7368b893ccc79bce.yaml', 'nova/tests/unit/cmd/test_manage.py', 'doc/source/cli/nova-manage.rst', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'doc/source/cli/nova-audit.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/5325184f7fea69ec76b6996677e6d8e391cc36c0', 'message': ""Move nova-manage placement sync_aggregates to nova-audit\n\nThis deprecates the 'nova-manage placement sync_aggregates' command\nand moves it to the 'nova-audit placement sync_aggregates' command.\nAssociated tests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: I4967e80bb5a9399beafa5611997ba343d74d9094\n""}]",0,708787,5325184f7fea69ec76b6996677e6d8e391cc36c0,44,12,5,4690,,,0,"Move nova-manage placement sync_aggregates to nova-audit

This deprecates the 'nova-manage placement sync_aggregates' command
and moves it to the 'nova-audit placement sync_aggregates' command.
Associated tests are also moved.

Part of blueprint nova-audit

Change-Id: I4967e80bb5a9399beafa5611997ba343d74d9094
",git fetch https://review.opendev.org/openstack/nova refs/changes/87/708787/4 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_nova_audit.py', 'nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py']",6,04a1e8f64c30f967c03982eaa6861df62b0a478d,bp/nova-audit," class PlacementCommandsTestCase(test.NoDBTestCase): """"""Unit tests for the nova-audit placement commands. Tests in this class should be simple and can rely on mock, so they are usually restricted to negative or side-effect type tests. For more involved functional scenarios, use nova.tests.functional.test_nova_audit. """""" def setUp(self): super(PlacementCommandsTestCase, self).setUp() self.output = StringIO() self.useFixture(fixtures.MonkeyPatch('sys.stdout', self.output)) self.cli = audit.PlacementCommands() self.useFixture(fixtures.MockPatch('nova.network.neutron.get_client')) @mock.patch('nova.compute.api.AggregateAPI.get_aggregate_list', return_value=objects.AggregateList(objects=[ objects.Aggregate(name='foo', hosts=['host1'])])) @mock.patch('nova.objects.HostMapping.get_by_host', side_effect=exception.HostMappingNotFound(name='host1')) def test_sync_aggregates_host_mapping_not_found( self, mock_get_host_mapping, mock_get_aggs): """"""Tests that we handle HostMappingNotFound."""""" result = self.cli.sync_aggregates(verbose=True) self.assertEqual(4, result) self.assertIn('The following hosts were found in nova host aggregates ' 'but no host mappings were found in the nova API DB. ' 'Run ""nova-audit cells discover_hosts"" and then ' 'retry. Missing: host1', self.output.getvalue()) @mock.patch('nova.compute.api.AggregateAPI.get_aggregate_list', return_value=objects.AggregateList(objects=[ objects.Aggregate(name='foo', hosts=['host1'])])) @mock.patch('nova.objects.HostMapping.get_by_host', return_value=objects.HostMapping( host='host1', cell_mapping=objects.CellMapping())) @mock.patch('nova.objects.ComputeNodeList.get_all_by_host', return_value=objects.ComputeNodeList(objects=[ objects.ComputeNode(hypervisor_hostname='node1'), objects.ComputeNode(hypervisor_hostname='node2')])) @mock.patch('nova.context.target_cell') def test_sync_aggregates_too_many_computes_for_host( self, mock_target_cell, mock_get_nodes, mock_get_host_mapping, mock_get_aggs): """"""Tests the scenario that a host in an aggregate has more than one compute node so the command does not know which compute node uuid to use for the placement resource provider aggregate and fails. """""" mock_target_cell.return_value.__enter__.return_value = ( mock.sentinel.cell_context) result = self.cli.sync_aggregates(verbose=True) self.assertEqual(1, result) self.assertIn('Unexpected number of compute node records ' '(2) found for host host1. There should ' 'only be a one-to-one mapping.', self.output.getvalue()) mock_get_nodes.assert_called_once_with( mock.sentinel.cell_context, 'host1') @mock.patch('nova.compute.api.AggregateAPI.get_aggregate_list', return_value=objects.AggregateList(objects=[ objects.Aggregate(name='foo', hosts=['host1'])])) @mock.patch('nova.objects.HostMapping.get_by_host', return_value=objects.HostMapping( host='host1', cell_mapping=objects.CellMapping())) @mock.patch('nova.objects.ComputeNodeList.get_all_by_host', side_effect=exception.ComputeHostNotFound(host='host1')) @mock.patch('nova.context.target_cell') def test_sync_aggregates_compute_not_found( self, mock_target_cell, mock_get_nodes, mock_get_host_mapping, mock_get_aggs): """"""Tests the scenario that no compute node record is found for a given host in an aggregate. """""" mock_target_cell.return_value.__enter__.return_value = ( mock.sentinel.cell_context) result = self.cli.sync_aggregates(verbose=True) self.assertEqual(5, result) self.assertIn('Unable to find matching compute_nodes record entries ' 'in the cell database for the following hosts; does the ' 'nova-compute service on each host need to be ' 'restarted? Missing: host1', self.output.getvalue()) mock_get_nodes.assert_called_once_with( mock.sentinel.cell_context, 'host1') @mock.patch('nova.compute.api.AggregateAPI.get_aggregate_list', new=mock.Mock(return_value=objects.AggregateList(objects=[ objects.Aggregate(name='foo', hosts=['host1'], uuid=uuidsentinel.aggregate)]))) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'aggregate_add_host') def test_sync_aggregates_get_provider_aggs_placement_server_error( self, mock_agg_add): """"""Tests the scenario that placement returns an unexpected server error when getting aggregates for a given resource provider. """""" mock_agg_add.side_effect = ( exception.ResourceProviderAggregateRetrievalFailed( uuid=uuidsentinel.rp_uuid)) with mock.patch.object(self.cli, '_get_rp_uuid_for_host', return_value=uuidsentinel.rp_uuid): result = self.cli.sync_aggregates(verbose=True) self.assertEqual(2, result) self.assertIn('Failed to get aggregates for resource provider with ' 'UUID %s' % uuidsentinel.rp_uuid, self.output.getvalue()) @mock.patch('nova.compute.api.AggregateAPI.get_aggregate_list', new=mock.Mock(return_value=objects.AggregateList(objects=[ objects.Aggregate(name='foo', hosts=['host1'], uuid=uuidsentinel.aggregate)]))) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'aggregate_add_host') def test_sync_aggregates_put_aggregates_fails_provider_not_found( self, mock_agg_add): """"""Tests the scenario that we are trying to add a provider to an aggregate in placement but the PUT /resource_providers/{rp_uuid}/aggregates call fails with a 404 because the provider is not found. """""" mock_agg_add.side_effect = exception.ResourceProviderNotFound( name_or_uuid=uuidsentinel.rp_uuid) with mock.patch.object(self.cli, '_get_rp_uuid_for_host', return_value=uuidsentinel.rp_uuid): result = self.cli.sync_aggregates(verbose=True) self.assertEqual(6, result) self.assertIn('Unable to find matching resource provider record in ' 'placement with uuid for the following hosts: ' '(host1=%s)' % uuidsentinel.rp_uuid, self.output.getvalue()) mock_agg_add.assert_called_once_with( mock.ANY, uuidsentinel.aggregate, rp_uuid=uuidsentinel.rp_uuid) @mock.patch('nova.compute.api.AggregateAPI.get_aggregate_list', new=mock.Mock(return_value=objects.AggregateList(objects=[ objects.Aggregate(name='foo', hosts=['host1'], uuid=uuidsentinel.aggregate)]))) @mock.patch('nova.scheduler.client.report.SchedulerReportClient.' 'aggregate_add_host') def test_sync_aggregates_put_aggregates_fails_generation_conflict( self, mock_agg_add): """"""Tests the scenario that we are trying to add a provider to an aggregate in placement but the PUT /resource_providers/{rp_uuid}/aggregates call fails with a 409 generation conflict (even after retries). """""" mock_agg_add.side_effect = exception.ResourceProviderUpdateConflict( uuid=uuidsentinel.rp_uuid, generation=1, error=""Conflict!"") with mock.patch.object(self.cli, '_get_rp_uuid_for_host', return_value=uuidsentinel.rp_uuid): result = self.cli.sync_aggregates(verbose=True) self.assertEqual(3, result) self.assertIn(""Failed updating provider aggregates for "" ""host (host1), provider (%s) and aggregate "" ""(%s)."" % (uuidsentinel.rp_uuid, uuidsentinel.aggregate), self.output.getvalue()) self.assertIn(""Conflict!"", self.output.getvalue())",,436,369
openstack%2Fnova~master~If03d8682fec05c1fbdacd9a82568b31aabb5fe8d,openstack/nova,master,If03d8682fec05c1fbdacd9a82568b31aabb5fe8d,Move nova-manage cell_v2 map_instances to nova-audit,NEW,2020-02-20 02:33:46.000000000,2021-07-30 19:42:18.000000000,,"[{'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-02-20 02:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/bda29c3e21ba5d7ba2659d967addee5899939d9e', 'message': ""Move nova-manage cell_v2 map_instances to nova-audit\n\nThis deprecates the 'nova-manage cell_v2 map_instances' command and\nmoves it to the 'nova-audit cells map_instances' command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: If03d8682fec05c1fbdacd9a82568b31aabb5fe8d\n""}, {'number': 2, 'created': '2020-04-01 16:01:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1da291e741a381bbfa9f68f8ff73840159e3a686', 'message': ""Move nova-manage cell_v2 map_instances to nova-audit\n\nThis deprecates the 'nova-manage cell_v2 map_instances' command and\nmoves it to the 'nova-audit cells map_instances' command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: If03d8682fec05c1fbdacd9a82568b31aabb5fe8d\n""}, {'number': 3, 'created': '2020-04-02 22:29:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/167f61208c10c435bc659313aa7fe34e915d4898', 'message': ""Move nova-manage cell_v2 map_instances to nova-audit\n\nThis deprecates the 'nova-manage cell_v2 map_instances' command and\nmoves it to the 'nova-audit cells map_instances' command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: If03d8682fec05c1fbdacd9a82568b31aabb5fe8d\n""}, {'number': 4, 'created': '2020-04-17 01:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/29fb9d7793c7d08acf43a4b8590df41f10705651', 'message': ""Move nova-manage cell_v2 map_instances to nova-audit\n\nThis deprecates the 'nova-manage cell_v2 map_instances' command and\nmoves it to the 'nova-audit cells map_instances' command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: If03d8682fec05c1fbdacd9a82568b31aabb5fe8d\n""}, {'number': 5, 'created': '2021-07-30 16:54:49.000000000', 'files': ['nova/cmd/audit.py', 'releasenotes/notes/add-nova-audit-command-7368b893ccc79bce.yaml', 'nova/tests/unit/cmd/test_manage.py', 'doc/source/cli/nova-manage.rst', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'doc/source/cli/nova-audit.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/68cfb8a7728f5e193dcd5c736228ffeda98b50bf', 'message': ""Move nova-manage cell_v2 map_instances to nova-audit\n\nThis deprecates the 'nova-manage cell_v2 map_instances' command and\nmoves it to the 'nova-audit cells map_instances' command. Associated\ntests and docs are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: If03d8682fec05c1fbdacd9a82568b31aabb5fe8d\n""}]",0,708786,68cfb8a7728f5e193dcd5c736228ffeda98b50bf,42,11,5,4690,,,0,"Move nova-manage cell_v2 map_instances to nova-audit

This deprecates the 'nova-manage cell_v2 map_instances' command and
moves it to the 'nova-audit cells map_instances' command. Associated
tests and docs are also moved.

Part of blueprint nova-audit

Change-Id: If03d8682fec05c1fbdacd9a82568b31aabb5fe8d
",git fetch https://review.opendev.org/openstack/nova refs/changes/86/708786/4 && git format-patch -1 --stdout FETCH_HEAD,"['nova/cmd/audit.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py']",4,bda29c3e21ba5d7ba2659d967addee5899939d9e,bp/nova-audit,"import warnings @mock.patch.object(context, 'target_cell') def test_map_instances(self, mock_target_cell): ctxt = context.RequestContext('fake-user', 'fake_project') cell_uuid = uuidutils.generate_uuid() cell_mapping = objects.CellMapping( ctxt, uuid=cell_uuid, name='fake', transport_url='fake://', database_connection='fake://') cell_mapping.create() mock_target_cell.return_value.__enter__.return_value = ctxt instance_uuids = [] for i in range(3): uuid = uuidutils.generate_uuid() instance_uuids.append(uuid) objects.Instance(ctxt, project_id=ctxt.project_id, user_id=ctxt.user_id, uuid=uuid).create() self.commands.map_instances(cell_uuid) for uuid in instance_uuids: inst_mapping = objects.InstanceMapping.get_by_instance_uuid(ctxt, uuid) self.assertEqual(ctxt.project_id, inst_mapping.project_id) # Verify that map_instances populates user_id. self.assertEqual(ctxt.user_id, inst_mapping.user_id) self.assertEqual(cell_mapping.uuid, inst_mapping.cell_mapping.uuid) mock_target_cell.assert_called_once_with( test.MatchType(context.RequestContext), test.MatchObjPrims(cell_mapping)) @mock.patch.object(context, 'target_cell') def test_map_instances_duplicates(self, mock_target_cell): ctxt = context.RequestContext('fake-user', 'fake_project') cell_uuid = uuidutils.generate_uuid() cell_mapping = objects.CellMapping( ctxt, uuid=cell_uuid, name='fake', transport_url='fake://', database_connection='fake://') cell_mapping.create() mock_target_cell.return_value.__enter__.return_value = ctxt instance_uuids = [] for i in range(3): uuid = uuidutils.generate_uuid() instance_uuids.append(uuid) objects.Instance(ctxt, project_id=ctxt.project_id, user_id=ctxt.user_id, uuid=uuid).create() objects.InstanceMapping(ctxt, project_id=ctxt.project_id, user_id=ctxt.user_id, instance_uuid=instance_uuids[0], cell_mapping=cell_mapping).create() self.commands.map_instances(cell_uuid) for uuid in instance_uuids: inst_mapping = objects.InstanceMapping.get_by_instance_uuid(ctxt, uuid) self.assertEqual(ctxt.project_id, inst_mapping.project_id) mappings = objects.InstanceMappingList.get_by_project_id(ctxt, ctxt.project_id) self.assertEqual(3, len(mappings)) mock_target_cell.assert_called_once_with( test.MatchType(context.RequestContext), test.MatchObjPrims(cell_mapping)) @mock.patch.object(context, 'target_cell') def test_map_instances_two_batches(self, mock_target_cell): ctxt = context.RequestContext('fake-user', 'fake_project') cell_uuid = uuidutils.generate_uuid() cell_mapping = objects.CellMapping( ctxt, uuid=cell_uuid, name='fake', transport_url='fake://', database_connection='fake://') cell_mapping.create() mock_target_cell.return_value.__enter__.return_value = ctxt instance_uuids = [] # Batch size is 50 in map_instances for i in range(60): uuid = uuidutils.generate_uuid() instance_uuids.append(uuid) objects.Instance(ctxt, project_id=ctxt.project_id, user_id=ctxt.user_id, uuid=uuid).create() ret = self.commands.map_instances(cell_uuid) self.assertEqual(0, ret) for uuid in instance_uuids: inst_mapping = objects.InstanceMapping.get_by_instance_uuid(ctxt, uuid) self.assertEqual(ctxt.project_id, inst_mapping.project_id) self.assertEqual(2, mock_target_cell.call_count) mock_target_cell.assert_called_with( test.MatchType(context.RequestContext), test.MatchObjPrims(cell_mapping)) @mock.patch.object(context, 'target_cell') def test_map_instances_max_count(self, mock_target_cell): # NOTE(gibi): map_instances command uses non canonical UUID # serialization for the marker instance mapping. The db schema is not # violated so we suppress the warning here. warnings.filterwarnings('ignore', message="".*invalid UUID.*"") ctxt = context.RequestContext('fake-user', 'fake_project') cell_uuid = uuidutils.generate_uuid() cell_mapping = objects.CellMapping( ctxt, uuid=cell_uuid, name='fake', transport_url='fake://', database_connection='fake://') cell_mapping.create() mock_target_cell.return_value.__enter__.return_value = ctxt instance_uuids = [] for i in range(6): uuid = uuidutils.generate_uuid() instance_uuids.append(uuid) objects.Instance(ctxt, project_id=ctxt.project_id, user_id=ctxt.user_id, uuid=uuid).create() ret = self.commands.map_instances(cell_uuid, max_count=3) self.assertEqual(1, ret) for uuid in instance_uuids[:3]: # First three are mapped inst_mapping = objects.InstanceMapping.get_by_instance_uuid(ctxt, uuid) self.assertEqual(ctxt.project_id, inst_mapping.project_id) for uuid in instance_uuids[3:]: # Last three are not self.assertRaises(exception.InstanceMappingNotFound, objects.InstanceMapping.get_by_instance_uuid, ctxt, uuid) mock_target_cell.assert_called_once_with( test.MatchType(context.RequestContext), test.MatchObjPrims(cell_mapping)) @mock.patch.object(context, 'target_cell') def test_map_instances_marker_deleted(self, mock_target_cell): # NOTE(gibi): map_instances command uses non canonical UUID # serialization for the marker instance mapping. The db schema is not # violated so we suppress the warning here. warnings.filterwarnings('ignore', message="".*invalid UUID.*"") ctxt = context.RequestContext('fake-user', 'fake_project') cell_uuid = uuidutils.generate_uuid() cell_mapping = objects.CellMapping( ctxt, uuid=cell_uuid, name='fake', transport_url='fake://', database_connection='fake://') cell_mapping.create() mock_target_cell.return_value.__enter__.return_value = ctxt instance_uuids = [] for i in range(6): uuid = uuidutils.generate_uuid() instance_uuids.append(uuid) objects.Instance(ctxt, project_id=ctxt.project_id, user_id=ctxt.user_id, uuid=uuid).create() ret = self.commands.map_instances(cell_uuid, max_count=3) self.assertEqual(1, ret) # Instances are mapped in the order created so we know the marker is # based off the third instance. marker = instance_uuids[2].replace('-', ' ') marker_mapping = objects.InstanceMapping.get_by_instance_uuid(ctxt, marker) marker_mapping.destroy() ret = self.commands.map_instances(cell_uuid) self.assertEqual(0, ret) for uuid in instance_uuids: inst_mapping = objects.InstanceMapping.get_by_instance_uuid(ctxt, uuid) self.assertEqual(ctxt.project_id, inst_mapping.project_id) self.assertEqual(2, mock_target_cell.call_count) mock_target_cell.assert_called_with( test.MatchType(context.RequestContext), test.MatchObjPrims(cell_mapping)) @mock.patch.object(context, 'target_cell') def test_map_instances_marker_reset(self, mock_target_cell): # NOTE(gibi): map_instances command uses non canonical UUID # serialization for the marker instance mapping. The db schema is not # violated so we suppress the warning here. warnings.filterwarnings('ignore', message="".*invalid UUID.*"") ctxt = context.RequestContext('fake-user', 'fake_project') cell_uuid = uuidutils.generate_uuid() cell_mapping = objects.CellMapping( ctxt, uuid=cell_uuid, name='fake', transport_url='fake://', database_connection='fake://') cell_mapping.create() mock_target_cell.return_value.__enter__.return_value = ctxt instance_uuids = [] for i in range(5): uuid = uuidutils.generate_uuid() instance_uuids.append(uuid) objects.Instance(ctxt, project_id=ctxt.project_id, user_id=ctxt.user_id, uuid=uuid).create() # Maps first three instances. ret = self.commands.map_instances(cell_uuid, max_count=3) self.assertEqual(1, ret) # Verifying that the marker is now based on third instance # i.e the position of the marker. inst_mappings = objects.InstanceMappingList.get_by_project_id(ctxt, 'INSTANCE_MIGRATION_MARKER') marker = inst_mappings[0].instance_uuid.replace(' ', '-') self.assertEqual(instance_uuids[2], marker) # Now calling reset with map_instances max_count=2 would reset # the marker as expected and start map_instances from the beginning. # This implies we end up finding the marker based on second instance. ret = self.commands.map_instances(cell_uuid, max_count=2, reset_marker=True) self.assertEqual(1, ret) inst_mappings = objects.InstanceMappingList.get_by_project_id(ctxt, 'INSTANCE_MIGRATION_MARKER') marker = inst_mappings[0].instance_uuid.replace(' ', '-') self.assertEqual(instance_uuids[1], marker) # Maps 4th instance using the marker (3rd is already mapped). ret = self.commands.map_instances(cell_uuid, max_count=2) self.assertEqual(1, ret) # Verifying that the marker is now based on fourth instance # i.e the position of the marker. inst_mappings = objects.InstanceMappingList.get_by_project_id(ctxt, 'INSTANCE_MIGRATION_MARKER') marker = inst_mappings[0].instance_uuid.replace(' ', '-') self.assertEqual(instance_uuids[3], marker) # Maps first four instances (all four duplicate entries which # are already present from previous calls) ret = self.commands.map_instances(cell_uuid, max_count=4, reset_marker=True) self.assertEqual(1, ret) # Verifying that the marker is still based on fourth instance # i.e the position of the marker. inst_mappings = objects.InstanceMappingList.get_by_project_id(ctxt, 'INSTANCE_MIGRATION_MARKER') marker = inst_mappings[0].instance_uuid.replace(' ', '-') self.assertEqual(instance_uuids[3], marker) # Maps the 5th instance. ret = self.commands.map_instances(cell_uuid) self.assertEqual(0, ret) def test_map_instances_validate_cell_uuid(self): # create a random cell_uuid which is invalid cell_uuid = uuidutils.generate_uuid() # check that it raises an exception self.assertRaises(exception.CellMappingNotFound, self.commands.map_instances, cell_uuid)",,377,341
openstack%2Fnova~master~Id09fadce7c36c70f4e5384c3fccc1879f8454187,openstack/nova,master,Id09fadce7c36c70f4e5384c3fccc1879f8454187,Move nova-manage cell_v2 discover_hosts to nova-manage,NEW,2020-02-20 02:33:46.000000000,2021-07-30 19:20:35.000000000,,"[{'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-02-20 02:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a14b111d76bee2486001d19afd344f742806b0c5', 'message': 'Move nova-manage cell_v2 discover_hosts to nova-audit\n\nThis deprecates the \'nova-manage cell_v2 discover_hosts\' command and\nmoves it to the \'nova-audit cells discover_hosts"" command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: Id09fadce7c36c70f4e5384c3fccc1879f8454187\n'}, {'number': 2, 'created': '2020-04-01 16:01:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/bf5ac67b2436a686b04952c401b9780bec30714b', 'message': 'Move nova-manage cell_v2 discover_hosts to nova-manage\n\nThis deprecates the \'nova-manage cell_v2 discover_hosts\' command and\nmoves it to the \'nova-audit cells discover_hosts"" command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: Id09fadce7c36c70f4e5384c3fccc1879f8454187\n'}, {'number': 3, 'created': '2020-04-02 22:29:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3fd2094e5d7854d3a2a5b944c7c5a3152acacd53', 'message': 'Move nova-manage cell_v2 discover_hosts to nova-manage\n\nThis deprecates the \'nova-manage cell_v2 discover_hosts\' command and\nmoves it to the \'nova-audit cells discover_hosts"" command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: Id09fadce7c36c70f4e5384c3fccc1879f8454187\n'}, {'number': 4, 'created': '2020-04-17 01:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/91a3678e602e026bbaace39dca878074b2c4e7b8', 'message': 'Move nova-manage cell_v2 discover_hosts to nova-manage\n\nThis deprecates the \'nova-manage cell_v2 discover_hosts\' command and\nmoves it to the \'nova-audit cells discover_hosts"" command. Associated\ntests are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: Id09fadce7c36c70f4e5384c3fccc1879f8454187\n'}, {'number': 5, 'created': '2021-07-30 16:54:49.000000000', 'files': ['nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'releasenotes/notes/add-nova-audit-command-7368b893ccc79bce.yaml', 'nova/tests/unit/cmd/test_manage.py', 'doc/source/cli/nova-manage.rst', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py', 'doc/source/cli/nova-audit.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/14d6a7b49ead8eca62c099dfa82b4007e175c609', 'message': 'Move nova-manage cell_v2 discover_hosts to nova-manage\n\nThis deprecates the \'nova-manage cell_v2 discover_hosts\' command and\nmoves it to the \'nova-audit cells discover_hosts"" command. Associated\ntests and docs are also moved.\n\nPart of blueprint nova-audit\n\nChange-Id: Id09fadce7c36c70f4e5384c3fccc1879f8454187\n'}]",0,708785,14d6a7b49ead8eca62c099dfa82b4007e175c609,42,11,5,4690,,,0,"Move nova-manage cell_v2 discover_hosts to nova-manage

This deprecates the 'nova-manage cell_v2 discover_hosts' command and
moves it to the 'nova-audit cells discover_hosts"" command. Associated
tests and docs are also moved.

Part of blueprint nova-audit

Change-Id: Id09fadce7c36c70f4e5384c3fccc1879f8454187
",git fetch https://review.opendev.org/openstack/nova refs/changes/85/708785/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_nova_manage.py', 'nova/cmd/audit.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/cmd/manage.py', 'nova/tests/unit/cmd/test_audit.py']",5,a14b111d76bee2486001d19afd344f742806b0c5,bp/nova-audit,"from nova import exception class CellsCommandsTestCase(test.NoDBTestCase): USES_DB_SELF = True def setUp(self): super(CellsCommandsTestCase, self).setUp() self.useFixture(nova_fixtures.Database()) self.useFixture(nova_fixtures.Database(database='api')) self.output = StringIO() self.useFixture(fixtures.MonkeyPatch('sys.stdout', self.output)) self.commands = audit.CellsCommands() def _return_compute_nodes(self, ctxt, num=1): nodes = [] for i in range(num): nodes.append(objects.ComputeNode(ctxt, uuid=uuidutils.generate_uuid(), host='host%s' % i, vcpus=1, memory_mb=1, local_gb=1, vcpus_used=0, memory_mb_used=0, local_gb_used=0, hypervisor_type='', hypervisor_version=1, cpu_info='')) return nodes @mock.patch.object(context, 'target_cell') @mock.patch.object(objects.CellMappingList, 'get_all') def test_discover_hosts_single_cell(self, mock_cell_mapping_get_all, mock_target_cell): ctxt = context.RequestContext() compute_nodes = self._return_compute_nodes(ctxt) for compute_node in compute_nodes: compute_node.create() cell_mapping = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db', transport_url='fake:///mq') cell_mapping.create() mock_target_cell.return_value.__enter__.return_value = ctxt self.commands.discover_hosts(cell_uuid=cell_mapping.uuid) # Check that the host mappings were created for i, compute_node in enumerate(compute_nodes): host_mapping = objects.HostMapping.get_by_host(ctxt, compute_node.host) self.assertEqual('host%s' % i, host_mapping.host) mock_target_cell.assert_called_once_with( test.MatchType(context.RequestContext), test.MatchObjPrims(cell_mapping)) mock_cell_mapping_get_all.assert_not_called() @mock.patch.object(context, 'target_cell') @mock.patch.object(objects.CellMappingList, 'get_all') def test_discover_hosts_single_cell_no_new_hosts( self, mock_cell_mapping_get_all, mock_target_cell): ctxt = context.RequestContext() # Create some compute nodes and matching host mappings cell_mapping = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db', transport_url='fake:///mq') cell_mapping.create() compute_nodes = self._return_compute_nodes(ctxt) for compute_node in compute_nodes: compute_node.create() host_mapping = objects.HostMapping(context=ctxt, host=compute_node.host, cell_mapping=cell_mapping) host_mapping.create() with mock.patch('nova.objects.HostMapping.create') as mock_create: self.commands.discover_hosts(cell_uuid=cell_mapping.uuid) mock_create.assert_not_called() mock_target_cell.assert_called_once_with( test.MatchType(context.RequestContext), test.MatchObjPrims(cell_mapping)) mock_cell_mapping_get_all.assert_not_called() @mock.patch.object(objects.CellMapping, 'get_by_uuid') def test_discover_hosts_multiple_cells(self, mock_cell_mapping_get_by_uuid): # Create in-memory databases for cell1 and cell2 to let target_cell # run for real. We want one compute node in cell1's db and the other # compute node in cell2's db. cell_dbs = nova_fixtures.CellDatabases() cell_dbs.add_cell_database('fake:///db1') cell_dbs.add_cell_database('fake:///db2') self.useFixture(cell_dbs) ctxt = context.RequestContext() cell_mapping0 = objects.CellMapping( context=ctxt, uuid=objects.CellMapping.CELL0_UUID, database_connection='fake:///db0', transport_url='none:///') cell_mapping0.create() cell_mapping1 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db1', transport_url='fake:///mq1') cell_mapping1.create() cell_mapping2 = objects.CellMapping(context=ctxt, uuid=uuidutils.generate_uuid(), database_connection='fake:///db2', transport_url='fake:///mq2') cell_mapping2.create() compute_nodes = self._return_compute_nodes(ctxt, num=2) # Create the first compute node in cell1's db with context.target_cell(ctxt, cell_mapping1) as cctxt: compute_nodes[0]._context = cctxt compute_nodes[0].create() # Create the first compute node in cell2's db with context.target_cell(ctxt, cell_mapping2) as cctxt: compute_nodes[1]._context = cctxt compute_nodes[1].create() self.commands.discover_hosts(verbose=True) output = self.output.getvalue().strip() self.assertNotEqual('', output) # Check that the host mappings were created for i, compute_node in enumerate(compute_nodes): host_mapping = objects.HostMapping.get_by_host(ctxt, compute_node.host) self.assertEqual('host%s' % i, host_mapping.host) mock_cell_mapping_get_by_uuid.assert_not_called() @mock.patch('nova.objects.host_mapping.discover_hosts') def test_discover_hosts_strict(self, mock_discover_hosts): # Check for exit code 0 if unmapped hosts found mock_discover_hosts.return_value = ['fake'] self.assertEqual(self.commands.discover_hosts(strict=True), 0) # Check for exit code 1 if no unmapped hosts are found mock_discover_hosts.return_value = [] self.assertEqual(self.commands.discover_hosts(strict=True), 1) # Check the return when strict=False self.assertIsNone(self.commands.discover_hosts()) @mock.patch('nova.objects.host_mapping.discover_hosts') def test_discover_hosts_by_service(self, mock_discover_hosts): mock_discover_hosts.return_value = ['fake'] ret = self.commands.discover_hosts(by_service=True, strict=True) self.assertEqual(0, ret) mock_discover_hosts.assert_called_once_with(mock.ANY, None, mock.ANY, True) @mock.patch('nova.objects.host_mapping.discover_hosts') def test_discover_hosts_mapping_exists(self, mock_discover_hosts): mock_discover_hosts.side_effect = exception.HostMappingExists( name='fake') ret = self.commands.discover_hosts() output = self.output.getvalue().strip() self.assertEqual(2, ret) expected = (""ERROR: Duplicate host mapping was encountered. This "" ""command should be run once after all compute hosts "" ""have been deployed and should not be run in parallel. "" ""When run in parallel, the commands will collide with "" ""each other trying to map the same hosts in the database "" ""at the same time. Error: Host 'fake' mapping already "" ""exists"") self.assertEqual(expected, output)",,250,193
openstack%2Ftempest~master~I093ae5c11f88cc29e91285ff674788de53645b4e,openstack/tempest,master,I093ae5c11f88cc29e91285ff674788de53645b4e,Wait couple of seconds for dns servers to be set in the guest,MERGED,2021-07-23 11:22:19.000000000,2021-07-30 19:07:24.000000000,2021-07-30 19:05:30.000000000,"[{'_account_id': 8556}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 22873}]","[{'number': 1, 'created': '2021-07-23 11:22:19.000000000', 'files': ['tempest/common/utils/linux/remote_client.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/126fe656a976b3f46a755e83ea9950f72815a87e', 'message': 'Wait couple of seconds for dns servers to be set in the guest\n\nIn test\ntempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_subnet_details\nthere is renewal of the DHCP lease made to configure dns nameservers.\nAnd sometimes this test is failing due to missing nameservers in the\n/etc/resolv.conf file in the guest VM.\nAfter analyzing logs from such failed jobs I think that the reason of\nthat may be race between getting dns nameservers from guest VM by test\nand actually configuring it inside the guest vm.\nSo this patch proposes to add wait (5 seconds by default) for non empty\nlist of the dns nameservers returned from the guest VM. That should\navoid such failures of that test.\n\nCloses-bug: #1914229\nChange-Id: I093ae5c11f88cc29e91285ff674788de53645b4e\n'}]",0,802005,126fe656a976b3f46a755e83ea9950f72815a87e,9,4,1,11975,,,0,"Wait couple of seconds for dns servers to be set in the guest

In test
tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_subnet_details
there is renewal of the DHCP lease made to configure dns nameservers.
And sometimes this test is failing due to missing nameservers in the
/etc/resolv.conf file in the guest VM.
After analyzing logs from such failed jobs I think that the reason of
that may be race between getting dns nameservers from guest VM by test
and actually configuring it inside the guest vm.
So this patch proposes to add wait (5 seconds by default) for non empty
list of the dns nameservers returned from the guest VM. That should
avoid such failures of that test.

Closes-bug: #1914229
Change-Id: I093ae5c11f88cc29e91285ff674788de53645b4e
",git fetch https://review.opendev.org/openstack/tempest refs/changes/05/802005/1 && git format-patch -1 --stdout FETCH_HEAD,['tempest/common/utils/linux/remote_client.py'],1,126fe656a976b3f46a755e83ea9950f72815a87e,bug/1914229," def _get_dns_servers(self): def get_dns_servers(self, timeout=5): start_time = int(time.time()) dns_servers = [] while True: dns_servers = self._get_dns_servers() if dns_servers: break LOG.debug(""DNS Servers list empty."") if int(time.time()) - start_time >= timeout: LOG.debug(""DNS Servers list empty after %s."", timeout) break return dns_servers ", def get_dns_servers(self):,14,1
openstack%2Fplacement~master~I17aed41eb05f6ae5a83f97058931b2fb003bfad6,openstack/placement,master,I17aed41eb05f6ae5a83f97058931b2fb003bfad6,Remove unused test helper,MERGED,2020-11-24 10:44:05.000000000,2021-07-30 19:07:05.000000000,2021-07-30 19:05:34.000000000,"[{'_account_id': 4690}, {'_account_id': 7634}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-11-24 10:44:05.000000000', 'files': ['placement/tests/functional/db/test_consumer.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/8c01d33666750fc55e25778f6e5b2eb58e107752', 'message': 'Remove unused test helper\n\nDeleting CreateIncompleteConsumersTestCase._check_incomplete_consumers.\nIt was not fully cleaned up by I5a29685d1e22c66e4d09f04198c011e71340a5d0.\n\nChange-Id: I17aed41eb05f6ae5a83f97058931b2fb003bfad6\n'}]",0,763958,8c01d33666750fc55e25778f6e5b2eb58e107752,9,4,1,21813,,,0,"Remove unused test helper

Deleting CreateIncompleteConsumersTestCase._check_incomplete_consumers.
It was not fully cleaned up by I5a29685d1e22c66e4d09f04198c011e71340a5d0.

Change-Id: I17aed41eb05f6ae5a83f97058931b2fb003bfad6
",git fetch https://review.opendev.org/openstack/placement refs/changes/58/763958/1 && git format-patch -1 --stdout FETCH_HEAD,['placement/tests/functional/db/test_consumer.py'],1,8c01d33666750fc55e25778f6e5b2eb58e107752,remove-test-helper,," @db_api.placement_context_manager.reader def _check_incomplete_consumers(self, ctx): config = ctx.config incomplete_project_id = config.placement.incomplete_consumer_project_id # Verify we have a record in projects for the missing sentinel sel = PROJECT_TBL.select( PROJECT_TBL.c.external_id == incomplete_project_id) rec = ctx.session.execute(sel).first() self.assertEqual(incomplete_project_id, rec['external_id']) incomplete_proj_id = rec['id'] # Verify we have a record in users for the missing sentinel incomplete_user_id = config.placement.incomplete_consumer_user_id sel = user_obj.USER_TBL.select( USER_TBL.c.external_id == incomplete_user_id) rec = ctx.session.execute(sel).first() self.assertEqual(incomplete_user_id, rec['external_id']) incomplete_user_id = rec['id'] # Verify there are records in the consumers table for our old # allocation records created in the pre-migration setup and that the # projects and users referenced in those consumer records point to the # incomplete project/user sel = CONSUMER_TBL.select(CONSUMER_TBL.c.uuid == uuids.c1_missing) missing_c1 = ctx.session.execute(sel).first() self.assertEqual(incomplete_proj_id, missing_c1['project_id']) self.assertEqual(incomplete_user_id, missing_c1['user_id']) sel = CONSUMER_TBL.select(CONSUMER_TBL.c.uuid == uuids.c2_missing) missing_c2 = ctx.session.execute(sel).first() self.assertEqual(incomplete_proj_id, missing_c2['project_id']) self.assertEqual(incomplete_user_id, missing_c2['user_id']) # Ensure there are no more allocations with incomplete consumers res = _get_allocs_with_no_consumer_relationship(ctx) self.assertEqual(0, len(res)) ",0,37
openstack%2Fmanila-specs~master~I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395,openstack/manila-specs,master,I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395,Add Share Affinity/Anti-Affinity Scheduler Filters,MERGED,2021-02-11 16:00:43.000000000,2021-07-30 18:41:56.000000000,2021-07-30 18:40:20.000000000,"[{'_account_id': 6413}, {'_account_id': 7102}, {'_account_id': 9003}, {'_account_id': 14567}, {'_account_id': 16643}, {'_account_id': 20104}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}, {'_account_id': 30407}, {'_account_id': 32919}]","[{'number': 1, 'created': '2021-02-11 16:00:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/b851ab6899b11d518089aa9f9a54a3d28cf2f41a', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 2, 'created': '2021-04-23 05:49:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/2089778cfa420890de0c37c1b0beb030628d1f91', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 3, 'created': '2021-07-07 16:08:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/2bcd4535e2903b967e0365052fcde10b08ef4da7', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 4, 'created': '2021-07-07 16:11:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/5e1bc0a3d0f0f5cbbf8682dfb2aceaa6dd7e1e46', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 5, 'created': '2021-07-07 16:23:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/472b9b0d5c663276cec445d1327ee145983b75df', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 6, 'created': '2021-07-08 13:14:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/97a30c2988f5699cd9914b83f99b825e225ca781', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 7, 'created': '2021-07-09 08:12:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/e4bc679f93e395612e868197d5cb892b90da8dc3', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 8, 'created': '2021-07-13 08:45:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/a47683657884e71ec11b8cd76834ee4e4abe74c6', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 9, 'created': '2021-07-13 09:24:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/c2a4a4c49c782094d1300d45c450a4e63b2a9999', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 10, 'created': '2021-07-14 18:16:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/ad6eddb3a1e4efde45b7536e3b9484dfd6860734', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}, {'number': 11, 'created': '2021-07-27 12:54:28.000000000', 'files': ['specs/xena/affinity-antiaffinity-filter.rst'], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/816a17b924bbcacd3bb052f42c80bbfb22ca9a2f', 'message': 'Add Share Affinity/Anti-Affinity Scheduler Filters\n\nChange-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395\n'}]",46,775198,816a17b924bbcacd3bb052f42c80bbfb22ca9a2f,66,11,11,18816,,,0,"Add Share Affinity/Anti-Affinity Scheduler Filters

Change-Id: I66f4dbdc7b6f9d18b8bb4b6fffdea4f5b0849395
",git fetch https://review.opendev.org/openstack/manila-specs refs/changes/98/775198/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/wallaby/affinity-antiaffinity-filter.rst'],1,b851ab6899b11d518089aa9f9a54a3d28cf2f41a,bp/affinity-antiaffinity-filter,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode =========================================== Affinity and anti-affinity scheduler filter =========================================== https://blueprints.launchpad.net/manila/+spec/affinity-antiaffinity-filter Copy of cinder feature https://blueprints.launchpad.net/cinder/+spec/affinity-antiaffinity-filter To add scheduler filter to manila that allows scheduler to make placement decision based on affinity relationship between existing shares and new share (the one being scheduled). The affinity relationship here means the location of shares ('host' of share). Problem description =================== Manila has done a good job hiding the details of storage back ends from end users by using share types. However there are use cases where users who build their application on top of shares would like to be able to 'choose' where a share be created on. How can manila provide such capability without hurting the simplicity we have been keeping? Affinity/anti-affinity is one of the flexibility we can provide without exposing details to back ends. The term affinity/anti-affinity here is to describe the relationship between two sets of shares in terms of location. To limit the scope, we describe one share has affinity with the other one only when they reside in the same share back end; on the contrary, 'anti-affinity' relation between two sets of shares simply implies they are on different manila back ends (hosts). This affinity/anti-affinity filter filters manila back end based on hint specified by end user. The hint expresses the affinity or anti-affinity relation between new shares and existing share(s). This allows end users to provide hints like 'please put this share to a place that is different from where share-XYZ resides in'. Use Cases ========= DB team builds MySQL master onto one share, they'd prefer to put new shares for slave DBs to different back ends from where the master DB resides in, for the sake of high availability. Proposed change =============== Add two new filters to Manila - AffinityFilter and AntiAffinityFilter. These two filters will look at the scheduler hint provided by end users and filter back ends by checking the 'host' of old and new shares see if a back end meets the requirement (being on the same back end as existing share or not being on the same back end(s) as existing share(s)). Alternatives ------------ There had been one proposal to allow admin user to directly specify the back end for new shares. It doesn't really provide similar functionality as affinity filter because it was admin only and it itself has a few drawbacks (security concern, for example). Data model impact ----------------- None REST API impact --------------- Parameter 'scheduler_hints' added to share create. Security impact --------------- Although this change involves using or parsing user-provided - scheduler hints. This doesn't put Manila in any more danger as it is now. Notifications impact -------------------- None Other end user impact --------------------- None Performance Impact ------------------ New filters would query DB once per request, it only adds slightly latency to the system and the latency has nothing to do with the size of the system. Other deployer impact --------------------- None Developer impact ---------------- None Implementation ============== Assignee(s) ----------- Primary assignee: Chuan Miao (chuan137 on IRC) Work Items ---------- 1. Filter implementation 2. Add scheduler hints parameter Dependencies ============ None Testing ======= Test against AffinityFilter: * Create one share A; * Create another share B with uuid of A and 'affinity_shares' as hint; * Checks if B is created on same back end as A; Test against AntiAffinityFilter: * Create one share A; * Create another share C with uuid of A and 'anti_affinity_shares' as hint; * Checks if C is created on different back end as A; Documentation Impact ==================== Need to document the usage of new filters. References ========== Nova has been offering similar feature called SameHostFilter and DifferentHostFilter since *Diablo*. https://github.com/openstack/nova/blob/master/nova/scheduler/filters/affinity_filter.py manila has been offering similar feature called AffinityFilter and AntiAffinityFilter since *Juno*. https://specs.openstack.org/openstack/cinder-specs/specs/juno/affinity-antiaffinity-filter.html ",,164,0
openstack%2Fnova~master~Ic0f2c326ebce8d7c89b0debf5225cbe471daca03,openstack/nova,master,Ic0f2c326ebce8d7c89b0debf5225cbe471daca03,db: Use module-level imports for sqlalchemy (for real),MERGED,2021-06-15 15:56:10.000000000,2021-07-30 18:19:13.000000000,2021-07-30 17:57:47.000000000,"[{'_account_id': 9708}, {'_account_id': 10135}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-15 15:56:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1c7e06321ea3a5336688b2e09770dcb807365609', 'message': 'db: Use module-level imports for sqlalchemy (for real)\n\nChange If90d9295b231166a28c2cc350d324691821a696b kicked off this effort\nbut only change the migrations. This change completes the job.\n\nChange-Id: Ic0f2c326ebce8d7c89b0debf5225cbe471daca03\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 2, 'created': '2021-06-16 09:12:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ab241ebb6ae60f89e2f556026f35f73d65776bb2', 'message': 'db: Use module-level imports for sqlalchemy (for real)\n\nChange If90d9295b231166a28c2cc350d324691821a696b kicked off this effort\nbut only change the migrations. This change completes the job.\n\nChange-Id: Ic0f2c326ebce8d7c89b0debf5225cbe471daca03\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 3, 'created': '2021-07-05 16:25:44.000000000', 'files': ['nova/tests/functional/db/test_archive.py', 'nova/cmd/status.py', 'nova/objects/instance_mapping.py', 'nova/db/sqlalchemy/api_models.py', 'nova/db/sqlalchemy/api.py', 'nova/objects/host_mapping.py', 'nova/db/sqlalchemy/models.py', 'nova/objects/compute_node.py', 'nova/objects/cell_mapping.py', 'nova/objects/instance_group.py', 'nova/objects/flavor.py', 'nova/objects/instance.py', 'nova/quota.py', 'nova/objects/aggregate.py', 'nova/tests/unit/db/test_db_api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/43de2421b37e5e91418819f728c56bc56fa8d7ed', 'message': 'db: Use module-level imports for sqlalchemy (for real)\n\nChange If90d9295b231166a28c2cc350d324691821a696b kicked off this effort\nbut only change the migrations. This change completes the job.\n\nChange-Id: Ic0f2c326ebce8d7c89b0debf5225cbe471daca03\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",0,796519,43de2421b37e5e91418819f728c56bc56fa8d7ed,79,3,3,15334,,,0,"db: Use module-level imports for sqlalchemy (for real)

Change If90d9295b231166a28c2cc350d324691821a696b kicked off this effort
but only change the migrations. This change completes the job.

Change-Id: Ic0f2c326ebce8d7c89b0debf5225cbe471daca03
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/19/796519/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/db/sqlalchemy/models.py', 'nova/tests/functional/db/test_archive.py', 'nova/cmd/status.py', 'nova/objects/compute_node.py', 'nova/objects/flavor.py', 'nova/objects/instance.py', 'nova/db/sqlalchemy/api_models.py', 'nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py']",9,1c7e06321ea3a5336688b2e09770dcb807365609,bp/remove-sqlalchemy-migrate,"from sqlalchemy import exc as sa_exc from sqlalchemy import orm from sqlalchemy import schemafrom sqlalchemy.sql import expression joined = orm.joinedload(elements.pop(0)) query = query.filter(sql.or_( model.project_id == context.project_id, model.project_id == sql.null() )) return [sql.or_(*[field == value for value in self.values])] filter(sql.or_( models.ComputeNode.service_id == service_id, models.ComputeNode.host == service['host'])).\ soft_delete(synchronize_session=False) filter(models.Service.forced_down == sql.false()).\ select = select.order_by(expression.asc(""id"")) services_tbl.c.disabled == sql.false(), filter_by(instance_uuid=instance_uuid).\ order_by(expression.asc(""created_at""), expression.asc(""id"")).\ all() options(orm.joinedload('info_cache')) query = query.options(orm.undefer(column)) query = query.options(orm.subqueryload(column)) else: query = query.options(orm.joinedload(column)) query = query.options(orm.noload(col)) query = query.options(orm.joinedload(column)) query_prefix = query_prefix.options(orm.undefer(column)) else: query_prefix = query_prefix.options(orm.joinedload(column)) delete = sql.or_( not_soft_deleted = sql.or_( models.Instance.vm_state == sql.null() ) tag_alias = orm.aliased(models.Tag) tag_alias = orm.aliased(models.Tag) tag_alias = orm.aliased(models.Tag) query_prefix = query_prefix.filter( models.Instance.hidden == sql.true()) query_prefix = query_prefix.filter(sql.or_( models.Instance.hidden == sql.false(), models.Instance.hidden == sql.null())) query = query.order_by(expression.desc(getattr(model, skey))) else: query = query.order_by(expression.asc(getattr(model, skey))) if isinstance(model_attr.type, sa.Boolean): model_attr = expression.cast(model_attr, sa.Integer) criteria.append(sql.and_(*crit_attrs)) query = query.filter(sql.or_(*criteria)) query = query.options(orm.undefer(column)) else: query = query.options(orm.joinedload(column)) query = query.filter(sql.or_( models.Instance.terminated_at == sql.null(), models.Instance.terminated_at > begin)) query = query.options(orm.undefer(column)) else: query = query.options(orm.joinedload(column)) query = query.options(orm.undefer(column)) query = query.options(orm.joinedload(column)) filter(sql.or_( sql.and_( models.Migration.source_compute == host, models.Migration.source_node == node), sql.and_( models.Migration.dest_compute == host, models.Migration.dest_node == node))).\ query = query.filter(sql.or_( models.Migration.source_compute == host, models.Migration.dest_compute == host)) query = query.filter(sql.or_( models.Migration.source_node == node, models.Migration.dest_node == node)) filter(sql.or_( sql.and_( models.Migration.source_compute == host, models.Migration.source_node == node), sql.and_( models.Migration.dest_compute == host, models.Migration.dest_node == node))).\ read_deleted='yes').\ filter_by(start_period=ts_values['start_period']).\ filter_by(uuid=uuid).\ filter_by(mac=mac).\ order_by(expression.asc(models.BandwidthUsage.id)).first() filter(sql.or_( models.VolumeUsage.tot_last_refreshed == sql.null(), models.VolumeUsage.tot_last_refreshed > begin, models.VolumeUsage.curr_last_refreshed == sql.null(), models.VolumeUsage.curr_last_refreshed > begin, )).all() query = query.filter( models.InstanceFault.instance_uuid.in_(instance_uuids) ).order_by(expression.desc(""id"")) filter_by(instance_uuid=instance_uuid).\ filter_by(request_id=request_id).\ order_by(expression.desc(""created_at""), expression.desc(""id"")).\ first() result = model_query(context, models.InstanceAction).\ filter_by(instance_uuid=instance_uuid).\ order_by(expression.desc(""created_at""), expression.desc(""id"")).\ first() filter_by(action_id=action_id).\ order_by(expression.desc(""created_at""), expression.desc(""id"")).\ all() fk_shadow_table = schema.Table( fk_shadow_tablename, metadata, autoload=True) except sa_exc.NoSuchTableError: shadow_table = schema.Table(shadow_tablename, metadata, autoload=True) except sa_exc.NoSuchTableError: meta = sa.MetaData(get_engine(use_slave=True, context=context)) metadata = sa.MetaData()","from sqlalchemy import and_ from sqlalchemy import Boolean from sqlalchemy.exc import NoSuchTableError from sqlalchemy import Integer from sqlalchemy import MetaData from sqlalchemy import or_ from sqlalchemy.orm import aliased from sqlalchemy.orm import joinedload from sqlalchemy.orm import noload from sqlalchemy.orm import subqueryload from sqlalchemy.orm import undefer from sqlalchemy.schema import Tablefrom sqlalchemy.sql.expression import asc from sqlalchemy.sql.expression import cast from sqlalchemy.sql.expression import desc from sqlalchemy.sql import falsefrom sqlalchemy.sql import null from sqlalchemy.sql import true joined = joinedload(elements.pop(0)) query = query.\ filter(or_(model.project_id == context.project_id, model.project_id == null())) return [or_(*[field == value for value in self.values])] filter(or_(models.ComputeNode.service_id == service_id, models.ComputeNode.host == service['host'])).\ soft_delete(synchronize_session=False) filter(models.Service.forced_down == false()).\ select = select.order_by(asc(""id"")) services_tbl.c.disabled == false(), filter_by(instance_uuid=instance_uuid).\ order_by(asc(""created_at""), asc(""id"")).\ all() options(joinedload('info_cache')) query = query.options(undefer(column)) query = query.options(subqueryload(column)) else: query = query.options(joinedload(column)) query = query.options(noload(col)) query = query.options(joinedload(column)) query_prefix = query_prefix.options(undefer(column)) else: query_prefix = query_prefix.options(joinedload(column)) delete = or_( not_soft_deleted = or_( models.Instance.vm_state == null() ) tag_alias = aliased(models.Tag) tag_alias = aliased(models.Tag) tag_alias = aliased(models.Tag) query_prefix = query_prefix.filter(models.Instance.hidden == true()) query_prefix = query_prefix.filter(or_( models.Instance.hidden == false(), models.Instance.hidden == null())) query = query.order_by(desc(getattr(model, skey))) else: query = query.order_by(asc(getattr(model, skey))) if isinstance(model_attr.type, Boolean): model_attr = cast(model_attr, Integer) criteria.append(and_(*crit_attrs)) query = query.filter(or_(*criteria)) query = query.options(undefer(column)) else: query = query.options(joinedload(column)) query = query.filter(or_(models.Instance.terminated_at == null(), models.Instance.terminated_at > begin)) query = query.options(undefer(column)) else: query = query.options(joinedload(column)) query = query.options(undefer(column)) query = query.options(joinedload(column)) filter(or_(and_(models.Migration.source_compute == host, models.Migration.source_node == node), and_(models.Migration.dest_compute == host, models.Migration.dest_node == node))).\ query = query.filter(or_(models.Migration.source_compute == host, models.Migration.dest_compute == host)) query = query.filter(or_(models.Migration.source_node == node, models.Migration.dest_node == node)) filter(or_(and_(models.Migration.source_compute == host, models.Migration.source_node == node), and_(models.Migration.dest_compute == host, models.Migration.dest_node == node))).\ read_deleted='yes').\ filter_by(start_period=ts_values['start_period']).\ filter_by(uuid=uuid).\ filter_by(mac=mac).\ order_by(asc(models.BandwidthUsage.id)).first() filter(or_(models.VolumeUsage.tot_last_refreshed == null(), models.VolumeUsage.tot_last_refreshed > begin, models.VolumeUsage.curr_last_refreshed == null(), models.VolumeUsage.curr_last_refreshed > begin, )).all() query = query.filter(models.InstanceFault.instance_uuid.in_( instance_uuids)).order_by(desc(""id"")) filter_by(instance_uuid=instance_uuid).\ filter_by(request_id=request_id).\ order_by(desc(""created_at""), desc(""id"")).\ first() result = (model_query(context, models.InstanceAction). filter_by(instance_uuid=instance_uuid). order_by(desc(""created_at""), desc(""id"")). first()) filter_by(action_id=action_id).\ order_by(desc(""created_at""), desc(""id"")).\ all() fk_shadow_table = Table(fk_shadow_tablename, metadata, autoload=True) except NoSuchTableError: shadow_table = Table(shadow_tablename, metadata, autoload=True) except NoSuchTableError: meta = MetaData(get_engine(use_slave=True, context=context)) metadata = MetaData()",972,949
openstack%2Fnova~master~I5fd6c6f74b7de2b422359cbe72defb07252e6b1e,openstack/nova,master,I5fd6c6f74b7de2b422359cbe72defb07252e6b1e,db: Move db.sqalchemy.migration to db.migration,MERGED,2021-07-05 16:25:44.000000000,2021-07-30 18:00:42.000000000,2021-07-30 17:57:54.000000000,"[{'_account_id': 9708}, {'_account_id': 10135}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-05 16:25:44.000000000', 'files': ['nova/tests/unit/db/test_migrations.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/db/sqlalchemy/migration.py', 'nova/db/migration.py', 'nova/tests/unit/db/test_migration.py', 'nova/tests/functional/db/api/test_migrations.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4bbea58cbb0f24f5be52738d8361c37d286506eb', 'message': ""db: Move db.sqalchemy.migration to db.migration\n\nAt this point is nova's lifecycle, we're not going to change our ORM,\nmaking the layer of indirection that is 'nova.db.sqlalchemy' is a\nuseless one. Start removing it with the 'migration' module.\n\nChange-Id: I5fd6c6f74b7de2b422359cbe72defb07252e6b1e\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",0,799518,4bbea58cbb0f24f5be52738d8361c37d286506eb,32,3,1,15334,,,0,"db: Move db.sqalchemy.migration to db.migration

At this point is nova's lifecycle, we're not going to change our ORM,
making the layer of indirection that is 'nova.db.sqlalchemy' is a
useless one. Start removing it with the 'migration' module.

Change-Id: I5fd6c6f74b7de2b422359cbe72defb07252e6b1e
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/18/799518/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/db/test_migrations.py', 'nova/tests/unit/cmd/test_manage.py', 'nova/db/sqlalchemy/migration.py', 'nova/db/migration.py', 'nova/tests/unit/db/test_migration.py', 'nova/tests/functional/db/api/test_migrations.py']",6,4bbea58cbb0f24f5be52738d8361c37d286506eb,bp/remove-sqlalchemy-migrate," with mock.patch.object(migration, 'get_engine', return_value=engine): migration.db_sync(database='api') return migration.versioning_api","from nova.db.sqlalchemy import migration as sa_migration with mock.patch.object(sa_migration, 'get_engine', return_value=engine): sa_migration.db_sync(database='api') return sa_migration.versioning_api",135,177
openstack%2Ftripleo-ansible~master~I8ba81b6384e9534894e27771f5147f26e39ea4a3,openstack/tripleo-ansible,master,I8ba81b6384e9534894e27771f5147f26e39ea4a3,WIP - Managed ceph when is installed with cephadm,ABANDONED,2021-06-08 13:04:22.000000000,2021-07-30 17:35:27.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 32968}]","[{'number': 1, 'created': '2021-06-08 13:04:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/6e9f031e220410a6674286d423a00fc75c7b48a7', 'message': 'WIP - Managed ceph when is installed with cephadm\n\nChange-Id: I8ba81b6384e9534894e27771f5147f26e39ea4a3\n'}, {'number': 2, 'created': '2021-06-11 07:24:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/e3fee576c62c722315c128046abbd72c4609f9ad', 'message': 'WIP - Managed ceph when is installed with cephadm\n\nChange-Id: I8ba81b6384e9534894e27771f5147f26e39ea4a3\n'}, {'number': 3, 'created': '2021-07-23 13:13:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/13c7acdce1662a5ae28d8193ebc44b44ea352152', 'message': 'WIP - Managed ceph when is installed with cephadm\n\nChange-Id: I8ba81b6384e9534894e27771f5147f26e39ea4a3\n'}, {'number': 4, 'created': '2021-07-26 10:09:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/532ad3e3ef45decf086b4c638b1ab61f6230f25d', 'message': 'WIP - Managed ceph when is installed with cephadm\n\nChange-Id: I8ba81b6384e9534894e27771f5147f26e39ea4a3\n'}, {'number': 5, 'created': '2021-07-26 14:21:52.000000000', 'files': ['tripleo_ansible/roles/backup_and_restore/tasks/main.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_maintenance.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_start.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_unmaintenance.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_authentication.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_stop.yml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_rgw_stop.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_mon_stop.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/faaf6c1cfeb66395642f82fc4c31223adb752801', 'message': 'WIP - Managed ceph when is installed with cephadm\n\nChange-Id: I8ba81b6384e9534894e27771f5147f26e39ea4a3\n'}]",11,795318,faaf6c1cfeb66395642f82fc4c31223adb752801,20,3,5,22954,,,0,"WIP - Managed ceph when is installed with cephadm

Change-Id: I8ba81b6384e9534894e27771f5147f26e39ea4a3
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/18/795318/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/backup_and_restore/tasks/ceph_mgr_stop.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_nfs_stop.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/cephadm_stop.yml', 'tripleo_ansible/roles/backup_and_restore/defaults/main.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_rgw_stop.yml', 'tripleo_ansible/roles/backup_and_restore/tasks/ceph_mon_stop.yml']",6,6e9f031e220410a6674286d423a00fc75c7b48a7,bnr_cephadm, when: tripleo_backup_and_restore_ceph_ansible|bool,,56,1
openstack%2Fkayobe~stable%2Fussuri~Iddb699aa98ddee8446d532ce4bd23ba9174fb38e,openstack/kayobe,stable/ussuri,Iddb699aa98ddee8446d532ce4bd23ba9174fb38e,Remove stale DIB_DISABLE_KERNEL_CLEANUP references,MERGED,2021-07-29 08:54:04.000000000,2021-07-30 17:12:36.000000000,2021-07-30 17:11:02.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 08:54:04.000000000', 'files': ['doc/source/configuration/bifrost.rst', 'etc/kayobe/bifrost.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c67473e3caf45319d810cfde5784bcc5cf42a89b', 'message': 'Remove stale DIB_DISABLE_KERNEL_CLEANUP references\n\nDocumentation about DIB_DISABLE_KERNEL_CLEANUP was left in place after\nthe variable was removed in Ie25e88bb96f186399ae69837e93185127628ce86.\n\nBackport: wallaby, victoria, ussuri\n\nChange-Id: Iddb699aa98ddee8446d532ce4bd23ba9174fb38e\n(cherry picked from commit d4bbdada8209d3e1872c2beca9aee6fe62850ece)\n'}]",0,802844,c67473e3caf45319d810cfde5784bcc5cf42a89b,9,3,1,15197,,,0,"Remove stale DIB_DISABLE_KERNEL_CLEANUP references

Documentation about DIB_DISABLE_KERNEL_CLEANUP was left in place after
the variable was removed in Ie25e88bb96f186399ae69837e93185127628ce86.

Backport: wallaby, victoria, ussuri

Change-Id: Iddb699aa98ddee8446d532ce4bd23ba9174fb38e
(cherry picked from commit d4bbdada8209d3e1872c2beca9aee6fe62850ece)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/44/802844/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/configuration/bifrost.rst', 'etc/kayobe/bifrost.yml']",2,c67473e3caf45319d810cfde5784bcc5cf42a89b,dib-disable-kernel-cleanup-stable/ussuri,"# ""ConfigDrive""}.","# ""ConfigDrive"", ""DIB_DISABLE_KERNEL_CLEANUP"": 1}.",2,3
openstack%2Fkayobe~stable%2Fvictoria~Iddb699aa98ddee8446d532ce4bd23ba9174fb38e,openstack/kayobe,stable/victoria,Iddb699aa98ddee8446d532ce4bd23ba9174fb38e,Remove stale DIB_DISABLE_KERNEL_CLEANUP references,MERGED,2021-07-29 08:53:04.000000000,2021-07-30 17:11:34.000000000,2021-07-30 17:10:09.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 08:53:04.000000000', 'files': ['etc/kayobe/bifrost.yml', 'doc/source/configuration/reference/bifrost.rst'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/aacb270935bccd39dd6b1ad749771b8841bbf4b2', 'message': 'Remove stale DIB_DISABLE_KERNEL_CLEANUP references\n\nDocumentation about DIB_DISABLE_KERNEL_CLEANUP was left in place after\nthe variable was removed in Ie25e88bb96f186399ae69837e93185127628ce86.\n\nBackport: wallaby, victoria, ussuri\n\nChange-Id: Iddb699aa98ddee8446d532ce4bd23ba9174fb38e\n(cherry picked from commit d4bbdada8209d3e1872c2beca9aee6fe62850ece)\n'}]",0,802787,aacb270935bccd39dd6b1ad749771b8841bbf4b2,8,3,1,15197,,,0,"Remove stale DIB_DISABLE_KERNEL_CLEANUP references

Documentation about DIB_DISABLE_KERNEL_CLEANUP was left in place after
the variable was removed in Ie25e88bb96f186399ae69837e93185127628ce86.

Backport: wallaby, victoria, ussuri

Change-Id: Iddb699aa98ddee8446d532ce4bd23ba9174fb38e
(cherry picked from commit d4bbdada8209d3e1872c2beca9aee6fe62850ece)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/87/802787/1 && git format-patch -1 --stdout FETCH_HEAD,"['etc/kayobe/bifrost.yml', 'doc/source/configuration/reference/bifrost.rst']",2,aacb270935bccd39dd6b1ad749771b8841bbf4b2,dib-disable-kernel-cleanup-stable/victoria," ``{""DIB_CLOUD_INIT_DATASOURCES"": ""ConfigDrive""}``."," ``{""DIB_CLOUD_INIT_DATASOURCES"": ""ConfigDrive"", ""DIB_DISABLE_KERNEL_CLEANUP"": 1}``.",2,3
openstack%2Fkayobe~stable%2Fwallaby~Iddb699aa98ddee8446d532ce4bd23ba9174fb38e,openstack/kayobe,stable/wallaby,Iddb699aa98ddee8446d532ce4bd23ba9174fb38e,Remove stale DIB_DISABLE_KERNEL_CLEANUP references,MERGED,2021-07-29 08:52:51.000000000,2021-07-30 17:11:25.000000000,2021-07-30 17:10:07.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 08:52:51.000000000', 'files': ['etc/kayobe/bifrost.yml', 'doc/source/configuration/reference/bifrost.rst'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/69d2b648f7c0b23adcaecdff1ecbb201a994d8e7', 'message': 'Remove stale DIB_DISABLE_KERNEL_CLEANUP references\n\nDocumentation about DIB_DISABLE_KERNEL_CLEANUP was left in place after\nthe variable was removed in Ie25e88bb96f186399ae69837e93185127628ce86.\n\nBackport: wallaby, victoria, ussuri\n\nChange-Id: Iddb699aa98ddee8446d532ce4bd23ba9174fb38e\n(cherry picked from commit d4bbdada8209d3e1872c2beca9aee6fe62850ece)\n'}]",0,802786,69d2b648f7c0b23adcaecdff1ecbb201a994d8e7,10,3,1,15197,,,0,"Remove stale DIB_DISABLE_KERNEL_CLEANUP references

Documentation about DIB_DISABLE_KERNEL_CLEANUP was left in place after
the variable was removed in Ie25e88bb96f186399ae69837e93185127628ce86.

Backport: wallaby, victoria, ussuri

Change-Id: Iddb699aa98ddee8446d532ce4bd23ba9174fb38e
(cherry picked from commit d4bbdada8209d3e1872c2beca9aee6fe62850ece)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/86/802786/1 && git format-patch -1 --stdout FETCH_HEAD,"['etc/kayobe/bifrost.yml', 'doc/source/configuration/reference/bifrost.rst']",2,69d2b648f7c0b23adcaecdff1ecbb201a994d8e7,dib-disable-kernel-cleanup-stable/wallaby," ``{""DIB_CLOUD_INIT_DATASOURCES"": ""ConfigDrive""}``."," ``{""DIB_CLOUD_INIT_DATASOURCES"": ""ConfigDrive"", ""DIB_DISABLE_KERNEL_CLEANUP"": 1}``.",2,3
openstack%2Fkayobe~stable%2Fwallaby~I424c1e3e6c488913d316e6b792d429599ea4de7c,openstack/kayobe,stable/wallaby,I424c1e3e6c488913d316e6b792d429599ea4de7c,Use stream8 images with molecule,MERGED,2021-07-29 08:55:28.000000000,2021-07-30 16:44:40.000000000,2021-07-30 16:42:45.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 24162}]","[{'number': 1, 'created': '2021-07-29 08:55:28.000000000', 'files': ['ansible/roles/kolla-openstack/molecule/default/molecule.yml', 'ansible/roles/kolla-openstack/molecule/enable-everything/molecule.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/9ca07b851ac9ca5d43a353a572e4cc553999ce98', 'message': 'Use stream8 images with molecule\n\nChange-Id: I424c1e3e6c488913d316e6b792d429599ea4de7c\n(cherry picked from commit cf60ba0d49b54abdbace9f878d85fc77cec315f7)\n'}]",0,802788,9ca07b851ac9ca5d43a353a572e4cc553999ce98,11,4,1,15197,,,0,"Use stream8 images with molecule

Change-Id: I424c1e3e6c488913d316e6b792d429599ea4de7c
(cherry picked from commit cf60ba0d49b54abdbace9f878d85fc77cec315f7)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/88/802788/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/kolla-openstack/molecule/default/molecule.yml', 'ansible/roles/kolla-openstack/molecule/enable-everything/molecule.yml']",2,9ca07b851ac9ca5d43a353a572e4cc553999ce98,, - name: centos-stream8 image: quay.io/centos/centos:stream8, - name: centos-8 image: centos:8,4,4
openstack%2Fdevstack~stable%2Fvictoria~I39ccefbd06f46adf5077f8d8001f37d3b190f040,openstack/devstack,stable/victoria,I39ccefbd06f46adf5077f8d8001f37d3b190f040,fix is_fedora for centos 8 stream,NEW,2021-07-30 14:16:17.000000000,2021-07-30 16:27:49.000000000,,"[{'_account_id': 8556}, {'_account_id': 11604}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 14:16:17.000000000', 'files': ['functions-common'], 'web_link': 'https://opendev.org/openstack/devstack/commit/7c013b7085f27192a04ca6c961ec117191c8c7bd', 'message': 'fix is_fedora for centos 8 stream\n\nWhen deploying on the centos 8 stream variant\nthe output of ""lsb_release -i -s"" is\nCentOSStream instead of CentOS\n\nThis breaks the is_fedora function in devstack\npreventing package installation and removal.\n\nChange-Id: I39ccefbd06f46adf5077f8d8001f37d3b190f040\n(cherry picked from commit e7c017bd8998d9cc8c4712efe992239c73f340d1)\n'}]",0,803023,7c013b7085f27192a04ca6c961ec117191c8c7bd,3,3,1,16312,,,0,"fix is_fedora for centos 8 stream

When deploying on the centos 8 stream variant
the output of ""lsb_release -i -s"" is
CentOSStream instead of CentOS

This breaks the is_fedora function in devstack
preventing package installation and removal.

Change-Id: I39ccefbd06f46adf5077f8d8001f37d3b190f040
(cherry picked from commit e7c017bd8998d9cc8c4712efe992239c73f340d1)
",git fetch https://review.opendev.org/openstack/devstack refs/changes/23/803023/1 && git format-patch -1 --stdout FETCH_HEAD,['functions-common'],1,7c013b7085f27192a04ca6c961ec117191c8c7bd,centos8-stream-stable/victoria," [ ""$os_VENDOR"" = ""CentOS"" ] || [ ""$os_VENDOR"" = ""CentOSStream"" ] || \ [ ""$os_VENDOR"" = ""OracleServer"" ] || [ ""$os_VENDOR"" = ""Virtuozzo"" ]"," [ ""$os_VENDOR"" = ""CentOS"" ] || [ ""$os_VENDOR"" = ""OracleServer"" ] || \ [ ""$os_VENDOR"" = ""Virtuozzo"" ]",2,2
openstack%2Fproject-config~master~Iaa6fc7b0a9dca20ea77637a3890c603837ac7014,openstack/project-config,master,Iaa6fc7b0a9dca20ea77637a3890c603837ac7014,Rename x/tap-as-a-service to openstack/tap-as-a-service,MERGED,2021-05-06 16:09:38.000000000,2021-07-30 16:12:38.000000000,2021-07-30 15:18:06.000000000,"[{'_account_id': 841}, {'_account_id': 4146}, {'_account_id': 5263}, {'_account_id': 6547}, {'_account_id': 11975}, {'_account_id': 15554}, {'_account_id': 22348}, {'_account_id': 33118}]","[{'number': 1, 'created': '2021-05-06 16:09:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/aff7524870213c5be4f11a1cfa587b5506d202f2', 'message': ""Rename x/tap-as-a-service to openstack/tap-as-a-service\n\nNeutron team accepted to include tap-as-a-service as a stadium project\non last PTG (see [0] ~l212), for this tap-as-a-service (taas) must be\nunder openstac/ namespace.\n\nThe renaming includes only x/tap-as-a-service.\n* x/tap-as-a-service-tempest-plugin: the tests should be merged to\nneutron-tempest-plugin.\n* x/tap-as-a-service-dashboard: unmaintained, and Neutron doesn't govern\nHorizon plugins\n\n[0] https://etherpad.opendev.org/p/neutron-xena-ptg\n\nChange-Id: Iaa6fc7b0a9dca20ea77637a3890c603837ac7014\n""}, {'number': 2, 'created': '2021-05-11 08:43:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/363c701856b865231ac0517c0fa790497ad31da6', 'message': ""Rename x/tap-as-a-service to openstack/tap-as-a-service\n\nNeutron team accepted to include tap-as-a-service as a stadium project\non last PTG (see [0] ~l212), for this tap-as-a-service (taas) must be\nunder openstac/ namespace.\n\nThe renaming includes only x/tap-as-a-service.\n* x/tap-as-a-service-tempest-plugin: the tests should be merged to\nneutron-tempest-plugin.\n* x/tap-as-a-service-dashboard: unmaintained, and Neutron doesn't govern\nHorizon plugins\n\n[0] https://etherpad.opendev.org/p/neutron-xena-ptg\n\nChange-Id: Iaa6fc7b0a9dca20ea77637a3890c603837ac7014\n""}, {'number': 3, 'created': '2021-06-10 11:41:33.000000000', 'files': ['gerrit/acls/openstack/tap-as-a-service.config', 'gerritbot/channels.yaml', 'zuul.d/projects.yaml', 'zuul/main.yaml', 'gerrit/projects.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/feaae221964c8e4174e10f03ee3941aa69055fc3', 'message': ""Rename x/tap-as-a-service to openstack/tap-as-a-service\n\nNeutron team accepted to include tap-as-a-service as a stadium project\non last PTG (see [0] ~l212), for this tap-as-a-service (taas) must be\nunder openstack/ namespace.\n\nThe renaming includes only x/tap-as-a-service.\n* x/tap-as-a-service-tempest-plugin: the tests should be merged to\nneutron-tempest-plugin.\n* x/tap-as-a-service-dashboard: unmaintained, and Neutron doesn't govern\nHorizon plugins\n\n[0] https://etherpad.opendev.org/p/neutron-xena-ptg\n\nChange-Id: Iaa6fc7b0a9dca20ea77637a3890c603837ac7014\n""}]",15,790093,feaae221964c8e4174e10f03ee3941aa69055fc3,29,8,3,8313,,,0,"Rename x/tap-as-a-service to openstack/tap-as-a-service

Neutron team accepted to include tap-as-a-service as a stadium project
on last PTG (see [0] ~l212), for this tap-as-a-service (taas) must be
under openstack/ namespace.

The renaming includes only x/tap-as-a-service.
* x/tap-as-a-service-tempest-plugin: the tests should be merged to
neutron-tempest-plugin.
* x/tap-as-a-service-dashboard: unmaintained, and Neutron doesn't govern
Horizon plugins

[0] https://etherpad.opendev.org/p/neutron-xena-ptg

Change-Id: Iaa6fc7b0a9dca20ea77637a3890c603837ac7014
",git fetch https://review.opendev.org/openstack/project-config refs/changes/93/790093/1 && git format-patch -1 --stdout FETCH_HEAD,"['gerrit/acls/openstack/tap-as-a-service.config', 'gerritbot/channels.yaml', 'gerrit/projects.yaml', 'zuul.d/projects.yaml', 'zuul/main.yaml']",5,aff7524870213c5be4f11a1cfa587b5506d202f2,project-rename-taas, - openstack/tap-as-a-service, - x/tap-as-a-service,10,9
openstack%2Fcharm-neutron-openvswitch~stable%2F21.04~I4fe9e57f22d92b635fbdff6ded059d2002363c82,openstack/charm-neutron-openvswitch,stable/21.04,I4fe9e57f22d92b635fbdff6ded059d2002363c82,c-h sync - restore proxy env vars for add-apt-repository,MERGED,2021-07-02 17:04:07.000000000,2021-07-30 16:12:34.000000000,2021-07-30 16:12:34.000000000,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-02 17:04:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/46094c128f2257bc01c4155aa148919494089044', 'message': 'c-h sync - restore proxy env vars for add-apt-repository\n\nChange-Id: I4fe9e57f22d92b635fbdff6ded059d2002363c82\n'}, {'number': 2, 'created': '2021-07-30 09:28:39.000000000', 'files': ['hooks/charmhelpers/contrib/openstack/deferred_events.py', 'hooks/charmhelpers/contrib/openstack/utils.py', 'hooks/charmhelpers/fetch/ubuntu.py'], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/bdda4ae40874d3619afb7d5f0a51248c46595667', 'message': 'c-h sync - restore proxy env vars for add-apt-repository\n\nChange-Id: I4fe9e57f22d92b635fbdff6ded059d2002363c82\n'}]",0,799266,bdda4ae40874d3619afb7d5f0a51248c46595667,28,4,2,11805,,,0,"c-h sync - restore proxy env vars for add-apt-repository

Change-Id: I4fe9e57f22d92b635fbdff6ded059d2002363c82
",git fetch https://review.opendev.org/openstack/charm-neutron-openvswitch refs/changes/66/799266/1 && git format-patch -1 --stdout FETCH_HEAD,"['hooks/charmhelpers/contrib/openstack/deferred_events.py', 'hooks/charmhelpers/contrib/openstack/utils.py', 'hooks/charmhelpers/fetch/ubuntu.py']",3,46094c128f2257bc01c4155aa148919494089044,batch-update," if '{series}' in spec: series = get_distrib_codename() _run_with_retries(['add-apt-repository', '--yes', spec], cmd_env=env_proxy_settings(['https', 'http']))"," series = get_distrib_codename() if '{series}' in spec: # software-properties package for bionic properly reacts to proxy settings # set via apt.conf (see lp:1433761), however this is not the case for LTS # and non-LTS releases before bionic. if series in ('trusty', 'xenial'): _run_with_retries(['add-apt-repository', '--yes', spec], cmd_env=env_proxy_settings(['https', 'http'])) else: _run_with_retries(['add-apt-repository', '--yes', spec])",18,13
openstack%2Fglance~stable%2Fussuri~Ia5a01089fe0eeb8fe0a1ec5a7cd0557835a46f9e,openstack/glance,stable/ussuri,Ia5a01089fe0eeb8fe0a1ec5a7cd0557835a46f9e,Make test-setup.sh compatible with mysql8,MERGED,2021-07-30 14:08:53.000000000,2021-07-30 14:48:02.000000000,2021-07-30 14:46:28.000000000,"[{'_account_id': 9303}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 14:08:53.000000000', 'files': ['tools/test-setup.sh'], 'web_link': 'https://opendev.org/openstack/glance/commit/9d98f2f177d753e2514e6b48d2ec417a4a259a30', 'message': ""Make test-setup.sh compatible with mysql8\n\nStarting from mysql version 8 it's not possible to create a user\nimplictly when using GRANT.\n\nThis patch makes the behavior compatible with that.\n\nChange-Id: Ia5a01089fe0eeb8fe0a1ec5a7cd0557835a46f9e\nCo-written-by: Riccardo Pittau <elfosardo@gmail.com>\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n(cherry picked from commit b220030070adbea0bd253dfa390218d30b047154)\n""}]",0,803040,9d98f2f177d753e2514e6b48d2ec417a4a259a30,8,3,1,8122,,,0,"Make test-setup.sh compatible with mysql8

Starting from mysql version 8 it's not possible to create a user
implictly when using GRANT.

This patch makes the behavior compatible with that.

Change-Id: Ia5a01089fe0eeb8fe0a1ec5a7cd0557835a46f9e
Co-written-by: Riccardo Pittau <elfosardo@gmail.com>
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
(cherry picked from commit b220030070adbea0bd253dfa390218d30b047154)
",git fetch https://review.opendev.org/openstack/glance refs/changes/40/803040/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/test-setup.sh'],1,9d98f2f177d753e2514e6b48d2ec417a4a259a30,bug/1885825," CREATE USER '$DB_USER'@'%' IDENTIFIED BY '$DB_PW'; GRANT ALL PRIVILEGES ON *.* TO '$DB_USER'@'%' WITH GRANT OPTION;"""," GRANT ALL PRIVILEGES ON *.* TO '$DB_USER'@'%' identified by '$DB_PW' WITH GRANT OPTION;""",2,2
openstack%2Fpython-tripleoclient~stable%2Fwallaby~I8bab41ee9af9729cd63ed7132928cfbc1770887a,openstack/python-tripleoclient,stable/wallaby,I8bab41ee9af9729cd63ed7132928cfbc1770887a,Remove cyclic import between export and utils,MERGED,2021-07-25 18:46:07.000000000,2021-07-30 14:46:10.000000000,2021-07-30 14:43:03.000000000,"[{'_account_id': 8449}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2021-07-25 18:46:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/6e0f749a68cafb467a8c01f1915441f4fe174b81', 'message': 'Remove cyclic import between export and utils\n\nBecause export imports utils and utils imports export\nthere is a cyclic import so pylint objects PEP8 R0401.\n\novercloud_deploy and overcloud_export need the function\nexport_overcloud which depends on export. The function\nexport_overcloud was added to utils for that import but\nthis created the cyclic import. To work around this,\nredefine the export_overcloud function in export and\nhave overcloud_deploy and overcloud_export import it\nfrom export, not utils. Then remove the utils import\nof export.\n\nChange-Id: I8bab41ee9af9729cd63ed7132928cfbc1770887a\n(cherry picked from commit 3f6f67c106cbb48292a7bf6c07a3e7c7141936b5)\n'}, {'number': 2, 'created': '2021-07-29 13:52:57.000000000', 'files': ['tripleoclient/v1/overcloud_export.py', 'tripleoclient/utils.py', 'tripleoclient/tests/fixture_data/deployment.py', 'tripleoclient/export.py', 'tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/9f3b27e389f903ec3008fd048189a97e2aba7689', 'message': 'Remove cyclic import between export and utils\n\nBecause export imports utils and utils imports export\nthere is a cyclic import so pylint objects PEP8 R0401.\n\novercloud_deploy and overcloud_export need the function\nexport_overcloud which depends on export. The function\nexport_overcloud was added to utils for that import but\nthis created the cyclic import. To work around this,\nredefine the export_overcloud function in export and\nhave overcloud_deploy and overcloud_export import it\nfrom export, not utils. Then remove the utils import\nof export.\n\nChange-Id: I8bab41ee9af9729cd63ed7132928cfbc1770887a\n(cherry picked from commit 3f6f67c106cbb48292a7bf6c07a3e7c7141936b5)\n'}]",0,802196,9f3b27e389f903ec3008fd048189a97e2aba7689,16,4,2,18002,,,0,"Remove cyclic import between export and utils

Because export imports utils and utils imports export
there is a cyclic import so pylint objects PEP8 R0401.

overcloud_deploy and overcloud_export need the function
export_overcloud which depends on export. The function
export_overcloud was added to utils for that import but
this created the cyclic import. To work around this,
redefine the export_overcloud function in export and
have overcloud_deploy and overcloud_export import it
from export, not utils. Then remove the utils import
of export.

Change-Id: I8bab41ee9af9729cd63ed7132928cfbc1770887a
(cherry picked from commit 3f6f67c106cbb48292a7bf6c07a3e7c7141936b5)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/96/802196/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/v1/overcloud_export.py', 'tripleoclient/utils.py', 'tripleoclient/tests/fixture_data/deployment.py', 'tripleoclient/export.py', 'tripleoclient/v1/overcloud_deploy.py']",5,6e0f749a68cafb467a8c01f1915441f4fe174b81,wallaby_utils_export_cyclic_import,from tripleoclient import export data = export.export_overcloud(, data = utils.export_overcloud(,17,17
openstack%2Ftripleo-ci~master~I77e0d4a8f7ad430c26abe08ccdcdbfbb82901070,openstack/tripleo-ci,master,I77e0d4a8f7ad430c26abe08ccdcdbfbb82901070,Fix typo in job definition yaml,MERGED,2021-07-14 16:07:37.000000000,2021-07-30 14:43:01.000000000,2021-07-30 14:43:01.000000000,"[{'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-14 16:07:37.000000000', 'files': ['zuul.d/standalone-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/03f09fa15626d35a586e6dd12d82bc21909a9881', 'message': 'Fix typo in job definition yaml\n\nTrivial-Fix\n\nChange-Id: I77e0d4a8f7ad430c26abe08ccdcdbfbb82901070\n'}]",0,800808,03f09fa15626d35a586e6dd12d82bc21909a9881,8,4,1,9816,,,0,"Fix typo in job definition yaml

Trivial-Fix

Change-Id: I77e0d4a8f7ad430c26abe08ccdcdbfbb82901070
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/08/800808/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/standalone-jobs.yaml'],1,03f09fa15626d35a586e6dd12d82bc21909a9881,, - ^environments/services/octavia.*.yaml, - ^environments\services/octavia.*.yaml,1,1
openstack%2Fglance~master~I52e9fbe5ef0e7c3021076d84e9b3df89012c45b9,openstack/glance,master,I52e9fbe5ef0e7c3021076d84e9b3df89012c45b9,PoC Move member policy checks to API layer,ABANDONED,2021-07-27 13:32:55.000000000,2021-07-30 14:40:43.000000000,,"[{'_account_id': 5046}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-27 13:32:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/b18170d7da8baa30bc1a9f047094d2c994a21ded', 'message': 'PoC Move member policy checks to API layer\n\nThis change enforce member policy checks in API layer and disables\nread-only checks at auth layer and disables policy layer as well.\n\nToDo:\n1. Need to make this patch dependent on image policy refactoring (get_image)\n2. Carefully verify read only checks at auth layer vs secure RBAC policy\n3. Provide additional test coverage\n\nPartially implements: blueprint policy-refactor\nChange-Id: I52e9fbe5ef0e7c3021076d84e9b3df89012c45b9\n'}, {'number': 2, 'created': '2021-07-28 07:10:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/1465e126ef1e9cc24b63ee92cb301feb5bd7053d', 'message': 'PoC Move member policy checks to API layer\n\nThis change enforce member policy checks in API layer and disables\nread-only checks at auth layer and disables policy layer as well.\n\nToDo:\n1. Need to make this patch dependent on image policy refactoring (get_image)\n2. Carefully verify read only checks at auth layer vs secure RBAC policy\n3. Provide additional test coverage\n\nPartially implements: blueprint policy-refactor\nChange-Id: I52e9fbe5ef0e7c3021076d84e9b3df89012c45b9\n'}, {'number': 3, 'created': '2021-07-28 17:47:36.000000000', 'files': ['glance/tests/unit/v2/test_image_members_resource.py', 'glance/policies/image.py', 'glance/api/v2/image_members.py', 'glance/api/v2/policy.py', 'glance/policies/base.py'], 'web_link': 'https://opendev.org/openstack/glance/commit/11bda84da77b3e0a7272c431f2ab4f385cdf61d1', 'message': 'PoC Move member policy checks to API layer\n\nThis change enforce member policy checks in API layer and disables\nread-only checks at auth layer and disables policy layer as well.\n\nToDo:\n1. Need to make this patch dependent on image policy refactoring (get_image)\n2. Carefully verify read only checks at auth layer vs secure RBAC policy\n3. Provide additional test coverage\n\nPartially implements: blueprint policy-refactor\nChange-Id: I52e9fbe5ef0e7c3021076d84e9b3df89012c45b9\n'}]",0,802526,11bda84da77b3e0a7272c431f2ab4f385cdf61d1,8,2,3,9303,,,0,"PoC Move member policy checks to API layer

This change enforce member policy checks in API layer and disables
read-only checks at auth layer and disables policy layer as well.

ToDo:
1. Need to make this patch dependent on image policy refactoring (get_image)
2. Carefully verify read only checks at auth layer vs secure RBAC policy
3. Provide additional test coverage

Partially implements: blueprint policy-refactor
Change-Id: I52e9fbe5ef0e7c3021076d84e9b3df89012c45b9
",git fetch https://review.opendev.org/openstack/glance refs/changes/26/802526/1 && git format-patch -1 --stdout FETCH_HEAD,"['glance/tests/unit/v2/test_image_members_resource.py', 'glance/policies/image.py', 'glance/api/v2/image_members.py', 'glance/api/v2/policy.py', 'glance/policies/base.py']",5,b18170d7da8baa30bc1a9f047094d2c994a21ded,policy-refactor,"# Only private images should be allowed to have members SHARED_VISIBILITY_CHECK = '""shared"":%(visibility)s' SHARED_VISIBILITY_AND_ADMIN_OR_PROJECT_MEMBER = ( f'({ADMIN_OR_PROJECT_MEMBER}) and {SHARED_VISIBILITY_CHECK}' ) SHARED_VISIBILITY_AND_ADMIN_OR_PROJECT_READER = ( f'({ADMIN_OR_PROJECT_READER}) and {SHARED_VISIBILITY_CHECK}' )",,195,15
openstack%2Fnetworking-bgpvpn~master~If55f0eb08c34e95ba5bc1865f7b6c107a86cd5af,openstack/networking-bgpvpn,master,If55f0eb08c34e95ba5bc1865f7b6c107a86cd5af,Use payloads for PORT events,MERGED,2021-07-29 16:47:00.000000000,2021-07-30 14:38:54.000000000,2021-07-30 14:37:34.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 32667}]","[{'number': 1, 'created': '2021-07-29 16:47:00.000000000', 'files': ['networking_bgpvpn/tests/unit/services/bagpipe/test_bagpipe.py', 'networking_bgpvpn/neutron/services/service_drivers/bagpipe/bagpipe.py'], 'web_link': 'https://opendev.org/openstack/networking-bgpvpn/commit/64cf49e5fae72c195acc9a572c89c7005601f877', 'message': 'Use payloads for PORT events\n\nThis patch switches the code over to the payload style of callbacks [1]\nfor PORT events for those that are not using them yet.\n\nThis patch is necessary since [2].\n\n[1]https://docs.openstack.org/neutron-lib/latest/contributor/callbacks.html\n[2]https://review.opendev.org/c/openstack/neutron/+/800604\n\nCloses-Bug: #1938461\nChange-Id: If55f0eb08c34e95ba5bc1865f7b6c107a86cd5af\n'}]",0,802916,64cf49e5fae72c195acc9a572c89c7005601f877,9,5,1,16688,,,0,"Use payloads for PORT events

This patch switches the code over to the payload style of callbacks [1]
for PORT events for those that are not using them yet.

This patch is necessary since [2].

[1]https://docs.openstack.org/neutron-lib/latest/contributor/callbacks.html
[2]https://review.opendev.org/c/openstack/neutron/+/800604

Closes-Bug: #1938461
Change-Id: If55f0eb08c34e95ba5bc1865f7b6c107a86cd5af
",git fetch https://review.opendev.org/openstack/networking-bgpvpn refs/changes/16/802916/1 && git format-patch -1 --stdout FETCH_HEAD,"['networking_bgpvpn/tests/unit/services/bagpipe/test_bagpipe.py', 'networking_bgpvpn/neutron/services/service_drivers/bagpipe/bagpipe.py']",2,64cf49e5fae72c195acc9a572c89c7005601f877,bug/1938461," def registry_port_updated(self, resource, event, trigger, payload): try: context = payload.context port = payload.latest_state original_port = payload.states[0] payload.metadata, e) def registry_port_deleted(self, resource, event, trigger, payload): try: context = payload.context port = payload.latest_state payload.metadata, e)"," def registry_port_updated(self, resource, event, trigger, **kwargs): try: context = kwargs['context'] port = kwargs['port'] original_port = kwargs['original_port'] kwargs, e) def registry_port_deleted(self, resource, event, trigger, **kwargs): try: context = kwargs['context'] port = kwargs['port'] kwargs, e)",25,22
openstack%2Fpuppet-tripleo~master~Icd8b4f07f1286b1c40c438f0dea3e32d5a6b010f,openstack/puppet-tripleo,master,Icd8b4f07f1286b1c40c438f0dea3e32d5a6b010f,"Revert ""Configure json_rpc/authtoken sections for ironic""",ABANDONED,2021-07-30 10:54:17.000000000,2021-07-30 14:36:42.000000000,,"[{'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 8833}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-30 10:54:17.000000000', 'files': ['manifests/profile/base/ironic/conductor.pp', 'manifests/profile/base/ironic.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/18951d782560534dc9e8fc71924bc35570503563', 'message': 'Revert ""Configure json_rpc/authtoken sections for ironic""\n\nThis reverts commit 8a847689261e4c97026e2bdeb8ed533260a581f0.\n\nReason for revert: https://bugs.launchpad.net/tripleo/+bug/1938539\n\nChange-Id: Icd8b4f07f1286b1c40c438f0dea3e32d5a6b010f\n'}]",0,802947,18951d782560534dc9e8fc71924bc35570503563,9,7,1,8449,,,0,"Revert ""Configure json_rpc/authtoken sections for ironic""

This reverts commit 8a847689261e4c97026e2bdeb8ed533260a581f0.

Reason for revert: https://bugs.launchpad.net/tripleo/+bug/1938539

Change-Id: Icd8b4f07f1286b1c40c438f0dea3e32d5a6b010f
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/47/802947/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/ironic/conductor.pp', 'manifests/profile/base/ironic.pp']",2,18951d782560534dc9e8fc71924bc35570503563,json_rpc,, include ironic::json_rpc,0,2
openstack%2Fironic-inspector~master~I24b08612c4ffc6aca60ca08f3ff5cc769c7c041d,openstack/ironic-inspector,master,I24b08612c4ffc6aca60ca08f3ff5cc769c7c041d,Do not reset FSM when ironic ports cant be queried,MERGED,2021-05-13 14:35:30.000000000,2021-07-30 14:29:31.000000000,2021-07-30 14:28:11.000000000,"[{'_account_id': 11655}, {'_account_id': 12356}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-05-13 14:35:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/e7dcfe71d0dad8ccedfde7389305b09adbc7bd4a', 'message': 'Do not reset FSM when ironic ports cant be queried\n\nIt can cause problems, as if a single sync fails, FSM state will be\nreset and not put back to initialized state until inspector restart.\n\nChange-Id: I24b08612c4ffc6aca60ca08f3ff5cc769c7c041d\n'}, {'number': 2, 'created': '2021-06-14 14:03:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/a44a5394f448d0f610dba48304eb0d4c1b5d6067', 'message': 'Do not reset FSM when ironic ports cant be queried\n\nIt can cause problems, as if a single sync fails, FSM state will be\nreset and not put back to initialized state until inspector restart.\n\nChange-Id: I24b08612c4ffc6aca60ca08f3ff5cc769c7c041d\nStory: #2008971\nTask: #42611\n'}, {'number': 3, 'created': '2021-06-14 14:15:06.000000000', 'files': ['ironic_inspector/test/unit/test_dnsmasq_pxe_filter.py', 'releasenotes/notes/pxe-filter-driver-stuck-ea5844cf3eafa61f.yaml', 'ironic_inspector/test/unit/test_iptables.py', 'ironic_inspector/pxe_filter/dnsmasq.py', 'ironic_inspector/pxe_filter/iptables.py'], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/c3b316677cc30eb8df906b4af9800a31a2bfe046', 'message': 'Do not reset FSM when ironic ports cant be queried\n\nIt can cause problems, as if a single sync fails, FSM state will be\nreset and not put back to initialized state until inspector restart.\n\nChange-Id: I24b08612c4ffc6aca60ca08f3ff5cc769c7c041d\nStory: #2008971\nTask: #42611\n'}]",0,791251,c3b316677cc30eb8df906b4af9800a31a2bfe046,20,5,3,9542,,,0,"Do not reset FSM when ironic ports cant be queried

It can cause problems, as if a single sync fails, FSM state will be
reset and not put back to initialized state until inspector restart.

Change-Id: I24b08612c4ffc6aca60ca08f3ff5cc769c7c041d
Story: #2008971
Task: #42611
",git fetch https://review.opendev.org/openstack/ironic-inspector refs/changes/51/791251/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_inspector/test/unit/test_dnsmasq_pxe_filter.py', 'ironic_inspector/test/unit/test_iptables.py', 'ironic_inspector/pxe_filter/dnsmasq.py', 'ironic_inspector/pxe_filter/iptables.py']",4,e7dcfe71d0dad8ccedfde7389305b09adbc7bd4a,pxe-sync-noironic,"from openstack import exceptions as os_exc try: if CONF.pxe_filter.deny_unknown_macs: to_allow = pxe_filter.get_active_macs(ironic) to_deny = None else: to_deny = pxe_filter.get_inactive_macs(ironic) to_allow = None except os_exc.SDKException: LOG.exception( ""Could not list ironic ports, iptables PXE filter can not "" ""be synced"") return", if CONF.pxe_filter.deny_unknown_macs: to_allow = pxe_filter.get_active_macs(ironic) to_deny = None else: to_deny = pxe_filter.get_inactive_macs(ironic) to_allow = None,55,10
openstack%2Fironic~stable%2Fwallaby~Ic017cc0f3aebd4858a1a6e3326e5cf0fc0888d24,openstack/ironic,stable/wallaby,Ic017cc0f3aebd4858a1a6e3326e5cf0fc0888d24,Fix regression in ramdisk deploy kernel parameters,MERGED,2021-07-28 07:29:01.000000000,2021-07-30 14:23:53.000000000,2021-07-30 14:22:21.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-28 07:29:01.000000000', 'files': ['ironic/tests/unit/drivers/modules/test_image_utils.py', 'ironic/drivers/modules/image_utils.py', 'releasenotes/notes/custom-params-cleaning-f938549964ff6df0.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/5b801be7a456e31c5111971a3ecc2ad140b19ea5', 'message': 'Fix regression in ramdisk deploy kernel parameters\n\nAfter commit d7a5b3469cfb5c16e122451e9cd8594d7a7671a1 the custom kernel\nparameters are not used in cleaning/inspection. This patch fixes it.\n\nConflicts:\n\tironic/drivers/modules/image_utils.py\n\tironic/tests/unit/drivers/modules/test_image_utils.py\n\nChange-Id: Ic017cc0f3aebd4858a1a6e3326e5cf0fc0888d24\n(cherry picked from commit 171474d69a8b21cac578a38b5153b3f563285e62)\n'}]",0,802664,5b801be7a456e31c5111971a3ecc2ad140b19ea5,25,3,1,10239,,,0,"Fix regression in ramdisk deploy kernel parameters

After commit d7a5b3469cfb5c16e122451e9cd8594d7a7671a1 the custom kernel
parameters are not used in cleaning/inspection. This patch fixes it.

Conflicts:
	ironic/drivers/modules/image_utils.py
	ironic/tests/unit/drivers/modules/test_image_utils.py

Change-Id: Ic017cc0f3aebd4858a1a6e3326e5cf0fc0888d24
(cherry picked from commit 171474d69a8b21cac578a38b5153b3f563285e62)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/64/802664/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/tests/unit/drivers/modules/test_image_utils.py', 'ironic/drivers/modules/image_utils.py', 'releasenotes/notes/custom-params-cleaning-f938549964ff6df0.yaml']",3,5b801be7a456e31c5111971a3ecc2ad140b19ea5,,--- fixes: - | Fixes a regression in the ``ramdisk`` deploy where custom kernel parameters were not used during inspection and cleaning. ,,90,2
openstack%2Fkolla~stable%2Fwallaby~I822d640a251e6ed9f71c76a922513e23e4218418,openstack/kolla,stable/wallaby,I822d640a251e6ed9f71c76a922513e23e4218418,Add missing default policy files for debian-binary-horizon,MERGED,2021-07-30 09:59:37.000000000,2021-07-30 13:40:15.000000000,2021-07-30 13:38:53.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 27339}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-30 09:59:37.000000000', 'files': ['docker/horizon/Dockerfile.j2', 'releasenotes/notes/bug-1933759-c03e50c243850a49.yaml'], 'web_link': 'https://opendev.org/openstack/kolla/commit/b927e6a41fde204af2f8507dcb1f91005a2c6424', 'message': 'Add missing default policy files for debian-binary-horizon\n\nThe debian-binary-horizon image is missing the default policies files\nwhich should be in /etc/openstack-dashboard/default_policies. By copying\neverything from /etc/openstack-dashboard/policy\ninto /etc/openstack-dashboard, we get the default policy files, as well\nas commented out policy files (e.g. cinder_policy.yaml) and the\nnova_policy.d directory containing api-extensions.yaml.\n\nChange was merged for ubuntu in [1] but unfortunatelly\nnot for debian, this trivial patch fixes it also\nfor debian.\n\n[1] https://review.opendev.org/c/openstack/kolla/+/794589\n\nCloses-Bug: #1933759\nChange-Id: I822d640a251e6ed9f71c76a922513e23e4218418\n(cherry picked from commit 01d02be25ed043b4541db3ebfc102d013cdc578a)\n'}]",0,802946,b927e6a41fde204af2f8507dcb1f91005a2c6424,9,4,1,14826,,,0,"Add missing default policy files for debian-binary-horizon

The debian-binary-horizon image is missing the default policies files
which should be in /etc/openstack-dashboard/default_policies. By copying
everything from /etc/openstack-dashboard/policy
into /etc/openstack-dashboard, we get the default policy files, as well
as commented out policy files (e.g. cinder_policy.yaml) and the
nova_policy.d directory containing api-extensions.yaml.

Change was merged for ubuntu in [1] but unfortunatelly
not for debian, this trivial patch fixes it also
for debian.

[1] https://review.opendev.org/c/openstack/kolla/+/794589

Closes-Bug: #1933759
Change-Id: I822d640a251e6ed9f71c76a922513e23e4218418
(cherry picked from commit 01d02be25ed043b4541db3ebfc102d013cdc578a)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/46/802946/1 && git format-patch -1 --stdout FETCH_HEAD,"['docker/horizon/Dockerfile.j2', 'releasenotes/notes/bug-1933759-c03e50c243850a49.yaml']",2,b927e6a41fde204af2f8507dcb1f91005a2c6424,change-798212-3-stable/wallaby,--- fixes: - | Fix missing default policy files for debian-binary-horizon. `LP#1933759 <https://launchpad.net/bugs/1933759>`__ ,,6,1
openstack%2Fcharm-ceph-fs~stable%2F21.04~I65f8943b200bcca88220f4f54b13f14109497ea1,openstack/charm-ceph-fs,stable/21.04,I65f8943b200bcca88220f4f54b13f14109497ea1,rebuild - restore proxy env vars for add-apt-repository,MERGED,2021-07-02 17:12:11.000000000,2021-07-30 13:29:59.000000000,2021-07-30 13:29:59.000000000,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-02 17:12:11.000000000', 'files': ['rebuild'], 'web_link': 'https://opendev.org/openstack/charm-ceph-fs/commit/f24b9375d5c46be7914b74776b1fec5bd2c4e530', 'message': 'rebuild - restore proxy env vars for add-apt-repository\n\nChange-Id: I65f8943b200bcca88220f4f54b13f14109497ea1\n'}]",0,799277,f24b9375d5c46be7914b74776b1fec5bd2c4e530,11,4,1,11805,,,0,"rebuild - restore proxy env vars for add-apt-repository

Change-Id: I65f8943b200bcca88220f4f54b13f14109497ea1
",git fetch https://review.opendev.org/openstack/charm-ceph-fs refs/changes/77/799277/1 && git format-patch -1 --stdout FETCH_HEAD,['rebuild'],1,f24b9375d5c46be7914b74776b1fec5bd2c4e530,batch-update,8e80d5a4-db58-11eb-82ab-db621d51dc2c,be82de82-64d9-11eb-94b9-ff8b2804e655,1,1
openstack%2Ftripleo-ci~master~Ic41af5bd953152712d6cf92b265b7a480dba118b,openstack/tripleo-ci,master,Ic41af5bd953152712d6cf92b265b7a480dba118b,Moving IRC network reference to OFTC,MERGED,2021-07-17 06:57:46.000000000,2021-07-30 13:29:06.000000000,2021-07-30 13:29:06.000000000,"[{'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-17 06:57:46.000000000', 'files': ['playbooks/deprecated/pre.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/e4c60d9bc328057e642c6394f745fec30511dcf9', 'message': 'Moving IRC network reference to OFTC\n\nChange-Id: Ic41af5bd953152712d6cf92b265b7a480dba118b\n'}]",0,801177,e4c60d9bc328057e642c6394f745fec30511dcf9,8,4,1,30615,,,0,"Moving IRC network reference to OFTC

Change-Id: Ic41af5bd953152712d6cf92b265b7a480dba118b
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/77/801177/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/deprecated/pre.yaml'],1,e4c60d9bc328057e642c6394f745fec30511dcf9,, Refer to #tripleo irc channel on OFTC for more info., Refer to #tripleo irc channel on Freenode for more info.,1,1
openstack%2Fkolla~master~I1ad2cea4b920e22e743b147a1b5ad703af0ff6f6,openstack/kolla,master,I1ad2cea4b920e22e743b147a1b5ad703af0ff6f6,Fix crmadmin not working on masakari Debuntu images,ABANDONED,2021-07-07 10:43:53.000000000,2021-07-30 13:09:26.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-07 10:43:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/12fb589354ac2cf799b764098973b295e5290c8f', 'message': 'Fix crmadmin not working on masakari Debuntu images\n\nAs Masaari-hostmonitor is accessing /dev/shm/*, it\nreally needs to have same permissions as hacluster-pacemaker\ncontainer has (where crmadmin is working normally).\n\nProblem is that permissions are different in above mentioned\ncontainers in Debian/Ubuntu systems, and is caused by\nDebian/Ubuntu way of creating users and groups - they are not\nspecifying uuids and gids as centos does (uuid/gid: 189).\n\nMoreover above mentioned are built from different base images,\nhacluster-pacemaker (base), masakari-hostmonitor (openstack-base).\nSo, there is no guarantee to have same uuids,gids in final images.\n\nThis patch is creating user/group right before package installation\nand setting uuid/gid 189 as centos does.\n\nCloses-Bug: #1934753\n\nChange-Id: I1ad2cea4b920e22e743b147a1b5ad703af0ff6f6\n'}, {'number': 2, 'created': '2021-07-08 11:23:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/0c244061ab47aeb199b2f6948a3714401753b67e', 'message': 'Fix crmadmin not working on masakari Debuntu images\n\nAs Masakari-hostmonitor is accessing /dev/shm/*, it\nreally needs to have same permissions as hacluster-pacemaker\ncontainer has (where crmadmin is working normally).\n\nProblem is that permissions are different in above mentioned\ncontainers in Debian/Ubuntu systems, and is caused by\nDebian/Ubuntu way of creating users and groups - they are not\nspecifying uuids and gids as centos does (uuid/gid: 189).\n\nMoreover above mentioned are built from different base images,\nhacluster-pacemaker (base), masakari-hostmonitor (openstack-base).\nSo, there is no guarantee to have same uuids,gids in final images.\n\nThis patch is creating user/group right before package installation\nand setting uuid/gid 189 as centos does.\n\nCloses-Bug: #1934753\n\nChange-Id: I1ad2cea4b920e22e743b147a1b5ad703af0ff6f6\n'}, {'number': 3, 'created': '2021-07-08 12:26:00.000000000', 'files': ['docker/hacluster/hacluster-base/Dockerfile.j2', 'releasenotes/notes/bug-1934753-89becab36f5340b2.yaml', 'docker/masakari/masakari-base/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/62d2915220f19457d54b97cb61fec0e9568355f4', 'message': 'Fix crmadmin not working on masakari Debuntu images\n\nAs Masakari-hostmonitor is accessing /dev/shm/*, it\nreally needs to have same permissions as hacluster-pacemaker\ncontainer has (where crmadmin is working normally).\n\nProblem is that permissions are different in above mentioned\ncontainers in Debian/Ubuntu systems, and is caused by\nDebian/Ubuntu way of creating users and groups - they are not\nspecifying uuids and gids as centos does (uuid/gid: 189).\n\nMoreover above mentioned are built from different base images,\nhacluster-pacemaker (base), masakari-hostmonitor (openstack-base).\nSo, there is no guarantee to have same uuids,gids in final images.\n\nThis patch is creating user/group right before package installation\nand setting uuid/gid 189 as centos does.\n\nCloses-Bug: #1934753\n\nChange-Id: I1ad2cea4b920e22e743b147a1b5ad703af0ff6f6\n'}]",9,799787,62d2915220f19457d54b97cb61fec0e9568355f4,20,3,3,27339,,,0,"Fix crmadmin not working on masakari Debuntu images

As Masakari-hostmonitor is accessing /dev/shm/*, it
really needs to have same permissions as hacluster-pacemaker
container has (where crmadmin is working normally).

Problem is that permissions are different in above mentioned
containers in Debian/Ubuntu systems, and is caused by
Debian/Ubuntu way of creating users and groups - they are not
specifying uuids and gids as centos does (uuid/gid: 189).

Moreover above mentioned are built from different base images,
hacluster-pacemaker (base), masakari-hostmonitor (openstack-base).
So, there is no guarantee to have same uuids,gids in final images.

This patch is creating user/group right before package installation
and setting uuid/gid 189 as centos does.

Closes-Bug: #1934753

Change-Id: I1ad2cea4b920e22e743b147a1b5ad703af0ff6f6
",git fetch https://review.opendev.org/openstack/kolla refs/changes/87/799787/1 && git format-patch -1 --stdout FETCH_HEAD,"['docker/hacluster/hacluster-base/Dockerfile.j2', 'releasenotes/notes/bug-1934753-89becab36f5340b2.yaml', 'docker/masakari/masakari-base/Dockerfile.j2']",3,12fb589354ac2cf799b764098973b295e5290c8f,change-799782-1,"RUN groupadd --system haclient --gid 189 \ && useradd --system --gid 189 --uid 189 \ --shell {% if install_type == 'binary' %}{% if base_package_type == 'deb' %}/usr/sbin/nologin{% else %}/sbin/nologin{% endif %}{% endif %} \ --comment ""Cluster user"" \ --home {% if install_type == 'binary' %}{% if base_package_type == 'deb' %}/var/lib/pacemaker{% else %}/home/hacluster{% endif %}{% endif %} hacluster ",,18,0
openstack%2Fkolla~stable%2Fussuri~I41066427169381e2bc57c70f7003bf4d83d9cde7,openstack/kolla,stable/ussuri,I41066427169381e2bc57c70f7003bf4d83d9cde7,masakari: Add crm_mon to masakarimonitors sudoers,MERGED,2021-07-30 09:15:13.000000000,2021-07-30 12:27:46.000000000,2021-07-30 12:26:24.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-30 09:15:13.000000000', 'files': ['docker/masakari/masakari-monitors/masakari_monitors_sudoers'], 'web_link': 'https://opendev.org/openstack/kolla/commit/e0fa1aa51ee3d50f4b9e577a1fe6a726e7fcebdb', 'message': 'masakari: Add crm_mon to masakarimonitors sudoers\n\nThis is necessary for the host monitor to query pacemaker\n\nChange-Id: I41066427169381e2bc57c70f7003bf4d83d9cde7\nPartially-Implements: blueprint masakari-hostmonitor\n(cherry picked from commit c20a60e01243f8cffd581b07823a09c6b8e09c17)\n'}]",0,802945,e0fa1aa51ee3d50f4b9e577a1fe6a726e7fcebdb,9,3,1,14826,,,0,"masakari: Add crm_mon to masakarimonitors sudoers

This is necessary for the host monitor to query pacemaker

Change-Id: I41066427169381e2bc57c70f7003bf4d83d9cde7
Partially-Implements: blueprint masakari-hostmonitor
(cherry picked from commit c20a60e01243f8cffd581b07823a09c6b8e09c17)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/45/802945/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/masakari/masakari-monitors/masakari_monitors_sudoers'],1,e0fa1aa51ee3d50f4b9e577a1fe6a726e7fcebdb,bp/masakari-hostmonitor-stable/ussuri,masakari ALL=(root) NOPASSWD: /usr/sbin/crm_mon -X,,1,0
openstack%2Fkolla-ansible~stable%2Fwallaby~I18f3d8f2e10a2996b2ebf92733a1770bef548bda,openstack/kolla-ansible,stable/wallaby,I18f3d8f2e10a2996b2ebf92733a1770bef548bda,Add missing elasticsearch cloudkitty storage and prometheus collector backend support.,ABANDONED,2021-07-29 13:34:32.000000000,2021-07-30 12:15:13.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-29 13:34:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/61181b6b51c4cfd14da16ba5a0e1aff1116d6dcb', 'message': 'Add missing elasticsearch cloudkitty storage\nand prometheus collector backend support.\n\n* Fix various remaining typos.\n* Fix trailing character on reno.\n* Enable Elasticsearch when selected as cloudkitty backend.\n* Add a check for ES index creation when ES required.\n* Add a release note\n* Fix release note line length issue.\n\nChange-Id: I18f3d8f2e10a2996b2ebf92733a1770bef548bda\nCloses-bug: #1895945\n(cherry picked from commit 9e72c0cb4e2206cc72104648e507237977258d54)\n'}, {'number': 2, 'created': '2021-07-29 13:35:27.000000000', 'files': ['releasenotes/notes/add_elasticsearch_and_prometheus_support_on_cloudkitty-774e13e363e15a4b.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/35539be5802940fde41dcf615da67cb3d70e0e40', 'message': 'Add missing elasticsearch cloudkitty storage\nand prometheus collector backend support.\n\n* Fix various remaining typos.\n* Fix trailing character on reno.\n* Enable Elasticsearch when selected as cloudkitty backend.\n* Add a check for ES index creation when ES required.\n* Add a release note\n* Fix release note line length issue.\n\nChange-Id: I18f3d8f2e10a2996b2ebf92733a1770bef548bda\nCloses-bug: #1895945\n(cherry picked from commit 9e72c0cb4e2206cc72104648e507237977258d54)\n'}]",0,802881,35539be5802940fde41dcf615da67cb3d70e0e40,6,1,2,32398,,,0,"Add missing elasticsearch cloudkitty storage
and prometheus collector backend support.

* Fix various remaining typos.
* Fix trailing character on reno.
* Enable Elasticsearch when selected as cloudkitty backend.
* Add a check for ES index creation when ES required.
* Add a release note
* Fix release note line length issue.

Change-Id: I18f3d8f2e10a2996b2ebf92733a1770bef548bda
Closes-bug: #1895945
(cherry picked from commit 9e72c0cb4e2206cc72104648e507237977258d54)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/81/802881/2 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/notes/add_elasticsearch_and_prometheus_support_on_cloudkitty-774e13e363e15a4b.yaml'],1,61181b6b51c4cfd14da16ba5a0e1aff1116d6dcb,,"<<<<<<< HEAD (8ff5c6 Merge ""Use ansible_facts to reference facts"" into stable/wal)======= Adds support for elasticsearch storage backend with cloudkitty: That feature let you store cloudkitty rating documents directly within your elasticsearch cluster. If you already have an elasticsearch cluster running for logging it create a new cloudkitty specific index. That let you use kibana, grafana or any other interface to browse your rating data and create appropriate dashboard or build an appropriate billing service over it. Adds support for prometheus as a fetcher/collector for cloudkitty: That feature let you use prometheus metrics as your source of rating. Using prometheus let you rate pretty much any openstack object directly from the kolla provided exporters (Openstack_exporter) or your own customs exporters. >>>>>>> CHANGE (9e72c0 Add missing elasticsearch cloudkitty storage and prometheus )",,17,0
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I6eaea6768d99e3b7667d86e5d65994bebb44190e,openstack/tripleo-heat-templates,stable/train,I6eaea6768d99e3b7667d86e5d65994bebb44190e,[train-only] Don't auto-enable post-copy in DPDK deployment,ABANDONED,2021-07-28 17:10:02.000000000,2021-07-30 12:12:20.000000000,,"[{'_account_id': 11604}, {'_account_id': 17216}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-28 17:10:02.000000000', 'files': ['deployment/nova/nova-compute-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c0d81427462c9cfe46c68599ab56ba2a74574afb', 'message': ""[train-only] Don't auto-enable post-copy in DPDK deployment\n\nPostCopy is conflicting with DPDK deployment unless ovs has been\nconfigured to have the vhost interfaces supporting postcopy.\n\nThere's currently work on master branch to enable this [1] automatically\nif required, but in the mean time, we need to disable this on the train\nbranch.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: I6eaea6768d99e3b7667d86e5d65994bebb44190e\n""}]",0,802764,c0d81427462c9cfe46c68599ab56ba2a74574afb,7,6,1,27419,,,0,"[train-only] Don't auto-enable post-copy in DPDK deployment

PostCopy is conflicting with DPDK deployment unless ovs has been
configured to have the vhost interfaces supporting postcopy.

There's currently work on master branch to enable this [1] automatically
if required, but in the mean time, we need to disable this on the train
branch.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Change-Id: I6eaea6768d99e3b7667d86e5d65994bebb44190e
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/64/802764/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/nova/nova-compute-container-puppet.yaml'],1,c0d81427462c9cfe46c68599ab56ba2a74574afb,, - and: - live_migration_optimization_set - ovs_dpdk_socket_memory_not_set, - live_migration_optimization_set,3,1
openstack%2Fopenstack-zuul-jobs~master~Idf249934bf7ab39bac0b87d350513837db26a18f,openstack/openstack-zuul-jobs,master,Idf249934bf7ab39bac0b87d350513837db26a18f,Add template for lower-constraints on master branch only,MERGED,2021-07-26 16:20:24.000000000,2021-07-30 12:07:48.000000000,2021-07-30 12:04:58.000000000,"[{'_account_id': 4146}, {'_account_id': 5263}, {'_account_id': 6547}, {'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-26 16:20:24.000000000', 'files': ['zuul.d/project-templates.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-zuul-jobs/commit/d666010ef8f8f31cb28028aaa6cbb490d7e0198a', 'message': 'Add template for lower-constraints on master branch only\n\nChange-Id: Idf249934bf7ab39bac0b87d350513837db26a18f\n'}]",0,802335,d666010ef8f8f31cb28028aaa6cbb490d7e0198a,8,5,1,23851,,,0,"Add template for lower-constraints on master branch only

Change-Id: Idf249934bf7ab39bac0b87d350513837db26a18f
",git fetch https://review.opendev.org/openstack/openstack-zuul-jobs refs/changes/35/802335/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project-templates.yaml'],1,d666010ef8f8f31cb28028aaa6cbb490d7e0198a,add-lcmasteronly-template, name: openstack-lower-constraints-master-branch-jobs description: | Runs openstack-tox-lower-constraints in both the check and gate pipelines but only on the master branch. check: jobs: - openstack-tox-lower-constraints: branches: master gate: jobs: - openstack-tox-lower-constraints: branches: master - project-template:,,14,0
openstack%2Fkolla~master~I89578f0d7710cb38db12bf862584f13b49af20ef,openstack/kolla,master,I89578f0d7710cb38db12bf862584f13b49af20ef,test-requirements: remove not needed entries,MERGED,2021-07-28 18:28:42.000000000,2021-07-30 11:34:53.000000000,2021-07-30 11:33:32.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 26285}, {'_account_id': 30491}, {'_account_id': 30523}]","[{'number': 1, 'created': '2021-07-28 18:28:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/83c8e37fdc9a3940fa79c3bdc9c019e815c806a1', 'message': '[DNM] remove not needed requirements\n\nLocally all tox tests passed without those requirements.\n\nChange-Id: I89578f0d7710cb38db12bf862584f13b49af20ef\n'}, {'number': 2, 'created': '2021-07-29 08:16:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/5e69c63318aab4e0a70b411860553dc2e7bab743', 'message': 'test-requirements: remove not needed entries\n\nLocally all tox tests passed without those requirements.\n\nChange-Id: I89578f0d7710cb38db12bf862584f13b49af20ef\n'}, {'number': 3, 'created': '2021-07-29 09:54:13.000000000', 'files': ['tests/test_keystone.py', 'test-requirements.txt', 'tests/clients.py'], 'web_link': 'https://opendev.org/openstack/kolla/commit/796a8ec291035dc2fe7747b59d4d485fbe9fd693', 'message': 'test-requirements: remove not needed entries\n\nLocally all tox tests passed without those requirements.\n\nAlso removed keystoneclient test. We are building images not clients.\n\nChange-Id: I89578f0d7710cb38db12bf862584f13b49af20ef\n'}]",4,802769,796a8ec291035dc2fe7747b59d4d485fbe9fd693,19,6,3,24072,,,0,"test-requirements: remove not needed entries

Locally all tox tests passed without those requirements.

Also removed keystoneclient test. We are building images not clients.

Change-Id: I89578f0d7710cb38db12bf862584f13b49af20ef
",git fetch https://review.opendev.org/openstack/kolla refs/changes/69/802769/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,83c8e37fdc9a3940fa79c3bdc9c019e815c806a1,,python-keystoneclient>=4.2.0,"beautifulsoup4>=4.6.0 # MITextras>=1.0.0 # MIT graphviz!=0.5.0,>=0.4 # MIT Licenseoslo.log>=3.36.0 # Apache-2.0PrettyTable>=0.7.1 # BSD PyYAML>=3.10 # MIT python-barbicanclient>=4.0.0 # Apache-2.0 python-heatclient>=1.10.0 # Apache-2.0 python-neutronclient>=6.3.0 # Apache-2.0 python-openstackclient>=3.12.0 # Apache-2.0 python-swiftclient>=3.2.0 # Apache-2.0 pytz>=2013.6 # MIT",1,12
openstack%2Fkolla-ansible~stable%2Fussuri~I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac,openstack/kolla-ansible,stable/ussuri,I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac,cyborg: add missing become for api-paste.ini,MERGED,2021-07-29 16:12:14.000000000,2021-07-30 11:25:31.000000000,2021-07-30 11:24:11.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-29 16:12:14.000000000', 'files': ['ansible/roles/cyborg/tasks/config.yml', 'releasenotes/notes/cyborg-become-8453d941af536e91.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/80c0cee82116d1e7841e8ba2c3bd4d18706ba05d', 'message': 'cyborg: add missing become for api-paste.ini\n\nCo-Authored-By: Boris Lukashev\n\nChange-Id: I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac\nCloses-Bug: #1937911\n(cherry picked from commit 5cb080247b7cbc2fdf7053e75c5173e5b9f0a6b7)\n'}]",0,802933,80c0cee82116d1e7841e8ba2c3bd4d18706ba05d,9,3,1,30491,,,0,"cyborg: add missing become for api-paste.ini

Co-Authored-By: Boris Lukashev

Change-Id: I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac
Closes-Bug: #1937911
(cherry picked from commit 5cb080247b7cbc2fdf7053e75c5173e5b9f0a6b7)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/33/802933/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/cyborg/tasks/config.yml', 'releasenotes/notes/cyborg-become-8453d941af536e91.yaml']",2,80c0cee82116d1e7841e8ba2c3bd4d18706ba05d,,--- fixes: - | Fixes an issue with Cyborg deployment. `LP#1937911 <https://bugs.launchpad.net/kolla-ansible/+bug/1937911>`__ ,,6,0
openstack%2Fkolla-ansible~stable%2Fvictoria~I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac,openstack/kolla-ansible,stable/victoria,I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac,cyborg: add missing become for api-paste.ini,MERGED,2021-07-29 16:11:53.000000000,2021-07-30 11:25:29.000000000,2021-07-30 11:24:09.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-29 16:11:53.000000000', 'files': ['ansible/roles/cyborg/tasks/config.yml', 'releasenotes/notes/cyborg-become-8453d941af536e91.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3fdb97b94db7aa529163f0a5233b2d4bfcbb2ffa', 'message': 'cyborg: add missing become for api-paste.ini\n\nCo-Authored-By: Boris Lukashev\n\nChange-Id: I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac\nCloses-Bug: #1937911\n(cherry picked from commit 5cb080247b7cbc2fdf7053e75c5173e5b9f0a6b7)\n'}]",0,802932,3fdb97b94db7aa529163f0a5233b2d4bfcbb2ffa,9,3,1,30491,,,0,"cyborg: add missing become for api-paste.ini

Co-Authored-By: Boris Lukashev

Change-Id: I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac
Closes-Bug: #1937911
(cherry picked from commit 5cb080247b7cbc2fdf7053e75c5173e5b9f0a6b7)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/32/802932/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/cyborg/tasks/config.yml', 'releasenotes/notes/cyborg-become-8453d941af536e91.yaml']",2,3fdb97b94db7aa529163f0a5233b2d4bfcbb2ffa,,--- fixes: - | Fixes an issue with Cyborg deployment. `LP#1937911 <https://bugs.launchpad.net/kolla-ansible/+bug/1937911>`__ ,,6,0
openstack%2Fkolla-ansible~stable%2Fwallaby~I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac,openstack/kolla-ansible,stable/wallaby,I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac,cyborg: add missing become for api-paste.ini,MERGED,2021-07-29 16:11:37.000000000,2021-07-30 11:10:40.000000000,2021-07-30 11:09:25.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-29 16:11:37.000000000', 'files': ['ansible/roles/cyborg/tasks/config.yml', 'releasenotes/notes/cyborg-become-8453d941af536e91.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/53271045dbdd40ae9436ab45b01b837471679e9f', 'message': 'cyborg: add missing become for api-paste.ini\n\nCo-Authored-By: Boris Lukashev\n\nChange-Id: I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac\nCloses-Bug: #1937911\n(cherry picked from commit 5cb080247b7cbc2fdf7053e75c5173e5b9f0a6b7)\n'}]",0,802931,53271045dbdd40ae9436ab45b01b837471679e9f,9,3,1,30491,,,0,"cyborg: add missing become for api-paste.ini

Co-Authored-By: Boris Lukashev

Change-Id: I52eaf823ae84e01a09a6dcfcbffd7221ff8abfac
Closes-Bug: #1937911
(cherry picked from commit 5cb080247b7cbc2fdf7053e75c5173e5b9f0a6b7)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/31/802931/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/cyborg/tasks/config.yml', 'releasenotes/notes/cyborg-become-8453d941af536e91.yaml']",2,53271045dbdd40ae9436ab45b01b837471679e9f,,--- fixes: - | Fixes an issue with Cyborg deployment. `LP#1937911 <https://bugs.launchpad.net/kolla-ansible/+bug/1937911>`__ ,,6,0
openstack%2Fpuppet-tripleo~master~I9fc0f27a781e6374ad52575533c099fbc23382fd,openstack/puppet-tripleo,master,I9fc0f27a781e6374ad52575533c099fbc23382fd,Configure json_rpc/authtoken sections for ironic,MERGED,2021-07-29 10:32:40.000000000,2021-07-30 10:54:17.000000000,2021-07-29 20:25:25.000000000,"[{'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-29 10:32:40.000000000', 'files': ['manifests/profile/base/ironic/conductor.pp', 'manifests/profile/base/ironic.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/8a847689261e4c97026e2bdeb8ed533260a581f0', 'message': 'Configure json_rpc/authtoken sections for ironic\n\nConfigure json_rpc section for both ironic-api and ironic-conductor.\nJSON RPC service uses keystonemiddleware to authenticate with\nkeystone. Configure the keystone_authtoken section for\nironic-conductor as well.\n\nChange-Id: I9fc0f27a781e6374ad52575533c099fbc23382fd\n'}]",0,802858,8a847689261e4c97026e2bdeb8ed533260a581f0,11,5,1,8833,,,0,"Configure json_rpc/authtoken sections for ironic

Configure json_rpc section for both ironic-api and ironic-conductor.
JSON RPC service uses keystonemiddleware to authenticate with
keystone. Configure the keystone_authtoken section for
ironic-conductor as well.

Change-Id: I9fc0f27a781e6374ad52575533c099fbc23382fd
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/58/802858/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/ironic/conductor.pp', 'manifests/profile/base/ironic.pp']",2,8a847689261e4c97026e2bdeb8ed533260a581f0,json_rpc, include ironic::json_rpc,,2,0
openstack%2Fos-brick~stable%2Ftrain~I86eb31535d990291945de5d9846b1a03157ec2cf,openstack/os-brick,stable/train,I86eb31535d990291945de5d9846b1a03157ec2cf,New fix for rbd connector to work with ceph octopus,MERGED,2021-06-02 10:21:27.000000000,2021-07-30 10:54:15.000000000,2021-07-30 10:52:59.000000000,"[{'_account_id': 1736}, {'_account_id': 4523}, {'_account_id': 5314}, {'_account_id': 5997}, {'_account_id': 7198}, {'_account_id': 9542}, {'_account_id': 9816}, {'_account_id': 11904}, {'_account_id': 20813}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-02 10:21:27.000000000', 'files': ['os_brick/tests/initiator/connectors/test_rbd.py', 'os_brick/initiator/connectors/rbd.py', 'releasenotes/notes/bug-1865754-ceph-octopus-compatibility-0aa9b8bc1b028301.yaml'], 'web_link': 'https://opendev.org/openstack/os-brick/commit/57409c28b52ee2bff90679b4c93059bf5b5ba2b6', 'message': ""New fix for rbd connector to work with ceph octopus\n\nFound while testing cinder-backup with ceph on Ubuntu Focal, which\ninstalls ceph Octopus.  Octopus apparently enforces the requirement\nthat the config file contain a '[global]' section for general\nrequirements.  The '[global]' section goes back at least to ceph\nHammer [0], so we will simply add it to the temporary ceph config\nfile that os-brick generates in the RBDConnector class.\n\n[0] https://docs.ceph.com/docs/hammer/rados/configuration/mon-config-ref/\n\nCo-authored-by: Alex Kavanagh <alex@ajkavanagh.co.uk>\nCo-authored-by: Ivan Kolodyazhny <e0ne@e0ne.info>\n\nChange-Id: I86eb31535d990291945de5d9846b1a03157ec2cf\nCloses-bug: #1865754\n(cherry picked from commit c6ad4d864c6088b6686919dd0229c926bce7073a)\n(cherry picked from commit 474583b4f8469f7957d6ffbf62829b516189aeae)\n(cherry picked from commit 91c73a433a2b3675e661f1fe007b58c2bfaff757)\n""}]",2,794198,57409c28b52ee2bff90679b4c93059bf5b5ba2b6,21,11,1,32755,,,0,"New fix for rbd connector to work with ceph octopus

Found while testing cinder-backup with ceph on Ubuntu Focal, which
installs ceph Octopus.  Octopus apparently enforces the requirement
that the config file contain a '[global]' section for general
requirements.  The '[global]' section goes back at least to ceph
Hammer [0], so we will simply add it to the temporary ceph config
file that os-brick generates in the RBDConnector class.

[0] https://docs.ceph.com/docs/hammer/rados/configuration/mon-config-ref/

Co-authored-by: Alex Kavanagh <alex@ajkavanagh.co.uk>
Co-authored-by: Ivan Kolodyazhny <e0ne@e0ne.info>

Change-Id: I86eb31535d990291945de5d9846b1a03157ec2cf
Closes-bug: #1865754
(cherry picked from commit c6ad4d864c6088b6686919dd0229c926bce7073a)
(cherry picked from commit 474583b4f8469f7957d6ffbf62829b516189aeae)
(cherry picked from commit 91c73a433a2b3675e661f1fe007b58c2bfaff757)
",git fetch https://review.opendev.org/openstack/os-brick refs/changes/98/794198/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_brick/tests/initiator/connectors/test_rbd.py', 'os_brick/initiator/connectors/rbd.py', 'releasenotes/notes/bug-1865754-ceph-octopus-compatibility-0aa9b8bc1b028301.yaml']",3,57409c28b52ee2bff90679b4c93059bf5b5ba2b6,rbd_octopus_train,"--- fixes: - | `Bug #1865754 <https://bugs.launchpad.net/cinder/+bug/1865754>`_: the ``RBDConnector`` class generates a temporary configuration file to connect to Ceph. Previously, os-brick did not include a ``[global]`` section to contain the options it sets, but with the Octopus release (15.2.0+), Ceph has begun enforcing the presence of this section marker, which dates back at least to the Hammer release of Ceph. With this release, os-brick includes the ``[global]`` section in the generated configuration file, which should be backward-compatible at least to Ceph Hammer. ",,22,1
openstack%2Fcinder~master~Id5a655d3b10bd38682b25f31273ec9bcda5cc38b,openstack/cinder,master,Id5a655d3b10bd38682b25f31273ec9bcda5cc38b,Fix backup deleted but data not deleted,NEW,2021-07-27 09:08:14.000000000,2021-07-30 10:49:28.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-27 09:08:14.000000000', 'files': ['cinder/backup/chunkeddriver.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/1679bd8e5201958fcc78f63c90ec7f0cc93899ef', 'message': 'Fix backup deleted but data not deleted\n\nUse the admin user and project to delete the backup under other\nprojects. The request is processed successfully. The backup is\nmarked as deleted in the database, but the object data that constitutes\nthe backup is not deleted.\n\nCloses-Bug: #1933443\nChange-Id: Id5a655d3b10bd38682b25f31273ec9bcda5cc38b\n'}]",0,802440,1679bd8e5201958fcc78f63c90ec7f0cc93899ef,24,1,1,32537,,,0,"Fix backup deleted but data not deleted

Use the admin user and project to delete the backup under other
projects. The request is processed successfully. The backup is
marked as deleted in the database, but the object data that constitutes
the backup is not deleted.

Closes-Bug: #1933443
Change-Id: Id5a655d3b10bd38682b25f31273ec9bcda5cc38b
",git fetch https://review.opendev.org/openstack/cinder refs/changes/40/802440/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/backup/chunkeddriver.py'],1,1679bd8e5201958fcc78f63c90ec7f0cc93899ef,bug/1933443," except Exception as e: LOG.warning('Error while listing objects, stop deleting' ' with empty list.') raise e"," except Exception: LOG.warning('Error while listing objects, continuing' ' with delete.')",4,3
openstack%2Ftripleo-quickstart~master~I5895d482f62e88ac8fd3a2443691ace1d1c86dfb,openstack/tripleo-quickstart,master,I5895d482f62e88ac8fd3a2443691ace1d1c86dfb,Remove tripleo-operator-ansible from TQE requires,MERGED,2021-05-11 14:04:25.000000000,2021-07-30 10:11:30.000000000,2021-07-30 10:10:11.000000000,"[{'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 10969}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-05-11 14:04:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/cc39c9e46dd376f79a447ea4a8cf911e2edcff26', 'message': '[DNM] remove tripleo operator\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 2, 'created': '2021-05-11 14:08:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/5adc5a30fd2e10e60ddee6edc023ed1764e2c376', 'message': '[DNM] remove tripleo operator\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 3, 'created': '2021-05-11 16:16:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/9f29c7c83501411b9da465380bcdef8928262c40', 'message': '[DNM] remove tripleo operator\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 4, 'created': '2021-05-12 09:06:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/65c93ddd1c4ee6bb9a554875e3f60ee97a3bf1dc', 'message': '[DNM] remove tripleo operator\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 5, 'created': '2021-05-13 12:13:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/77c2011434993adc2b980d1e5dc413703031baf4', 'message': 'Remove tripleo-operator-ansible from TQE requires\n\ntripleo-operator-ansible will be installed from rpm from\nstein onwards.\n\nWe no longer needs to install it from git, so removing it\nfrom TQE requires.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 6, 'created': '2021-06-18 13:11:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/6040f1ee2f38e62ea6c039c039d5369f6016acbe', 'message': 'Remove tripleo-operator-ansible from TQE requires\n\ntripleo-operator-ansible will be installed from rpm from\nstein onwards.\n\nWe no longer needs to install it from git, so removing it\nfrom TQE requires.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 7, 'created': '2021-06-30 07:01:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/4e45a9e4f09fa7ac3fb943c31088f97d1b30160a', 'message': 'Remove tripleo-operator-ansible from TQE requires\n\ntripleo-operator-ansible will be installed from rpm from\nstein onwards.\n\nWe no longer needs to install it from git, so removing it\nfrom TQE requires.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 8, 'created': '2021-07-05 11:37:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/21a6fce4e778a677d34ceb6998c36df5d56c7afd', 'message': 'Remove tripleo-operator-ansible from TQE requires\n\ntripleo-operator-ansible will be installed from rpm from\nstein onwards.\n\nWe no longer needs to install it from git, so removing it\nfrom TQE requires.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 9, 'created': '2021-07-13 10:03:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/06a5e5cb8cc95d3e17b1183744f498a89e4c91bd', 'message': 'Remove tripleo-operator-ansible from TQE requires\n\ntripleo-operator-ansible will be installed from rpm from\nstein onwards.\n\nWe no longer needs to install it from git, so removing it\nfrom TQE requires.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 10, 'created': '2021-07-26 10:08:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/d483643e4ed5c6c5db14f753f4cac6ed0f06fe68', 'message': 'Remove tripleo-operator-ansible from TQE requires\n\ntripleo-operator-ansible will be installed from rpm from\nstein onwards.\n\nWe no longer needs to install it from git, so removing it\nfrom TQE requires.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}, {'number': 11, 'created': '2021-07-29 06:17:04.000000000', 'files': ['config/release/centosci/wallaby-current-tripleo.yml', 'config/release/tripleo-ci/CentOS-7/stein.yml', 'config/release/tripleo-ci/CentOS-7/train.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-master.yml', 'config/release/trunk/train.yml', 'config/release/centosci/train-current-tripleo.yml', 'config/release/centosci/victoria-current-tripleo.yml', 'config/release/tripleo-ci/CentOS-8/cloudsig/wallaby.yml', 'config/release/trunk/wallaby.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-ussuri.yml', 'config/release/centosci/ussuri-current-tripleo.yml', 'config/release/tripleo-ci/CentOS-7/promotion-testing-hash-stein.yml', 'config/release/tripleo-ci/CentOS-7/cloudsig/train.yml', 'config/release/trunk/stein.yml', 'config/release/trunk/ussuri.yml', 'config/release/tripleo-ci/CentOS-8/master.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-wallaby.yml', 'config/release/tripleo-ci/CentOS-8/victoria.yml', 'config/release/tripleo-ci/CentOS-8/ussuri.yml', 'config/release/trunk/master.yml', 'config/release/tripleo-ci/CentOS-8/cloudsig/victoria.yml', 'config/release/tripleo-ci/CentOS-8/cloudsig/ussuri.yml', 'quickstart-extras-requirements.txt', 'config/release/tripleo-ci/CentOS-8/train.yml', 'config/release/trunk/victoria.yml', 'config/release/centosci/stein-current-tripleo.yml', 'config/release/tripleo-ci/CentOS-7/cloudsig/stein.yml', 'config/release/centosci/master-current-tripleo.yml', 'config/release/tripleo-ci/CentOS-7/promotion-testing-hash-train.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-victoria.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-train.yml', 'config/release/tripleo-ci/CentOS-8/wallaby.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/ea6e1c21728c1b7f4a3ecd68b3fafe5afc7295c3', 'message': 'Remove tripleo-operator-ansible from TQE requires\n\ntripleo-operator-ansible will be installed from rpm from\nstein onwards.\n\nWe no longer needs to install it from git, so removing it\nfrom TQE requires.\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb\n'}]",2,790701,ea6e1c21728c1b7f4a3ecd68b3fafe5afc7295c3,58,7,11,12393,,,0,"Remove tripleo-operator-ansible from TQE requires

tripleo-operator-ansible will be installed from rpm from
stein onwards.

We no longer needs to install it from git, so removing it
from TQE requires.

Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: I5895d482f62e88ac8fd3a2443691ace1d1c86dfb
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/01/790701/1 && git format-patch -1 --stdout FETCH_HEAD,['quickstart-extras-requirements.txt'],1,cc39c9e46dd376f79a447ea4a8cf911e2edcff26,remove_uneeded_tq_requirements,,git+https://opendev.org/openstack/tripleo-operator-ansible/#egg=tripleo-operator-ansible,0,1
openstack%2Ftripleo-quickstart~master~I9984d9aee43fafaaa0036551e23fe125988312ce,openstack/tripleo-quickstart,master,I9984d9aee43fafaaa0036551e23fe125988312ce,[DNM] Test tripleo-ci release files in ci.centos gate job,ABANDONED,2021-07-27 14:37:21.000000000,2021-07-30 10:05:45.000000000,,[{'_account_id': 23181}],"[{'number': 1, 'created': '2021-07-27 14:37:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/831c080ccac446c1dce1cb57290d89d54f7a9229', 'message': '[DNM] Test tripleo-ci release files in ci.centos gate job\n\nTo have same artifacts as other check jobs and to get\nrid of additional release files.\n\nChange-Id: I9984d9aee43fafaaa0036551e23fe125988312ce\n'}, {'number': 2, 'created': '2021-07-28 04:55:43.000000000', 'files': ['zuul.d/layout.yaml', 'config/release/tripleo-ci/CentOS-8/master.yml', 'ci-scripts/full-deploy.sh'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/5e2cdc265ba48fbdb8e8d7a433c0a5542bb9c8d2', 'message': '[DNM] Test tripleo-ci release files in ci.centos gate job\n\nTo have same artifacts as other check jobs and to get\nrid of additional release files.\n\nChange-Id: I9984d9aee43fafaaa0036551e23fe125988312ce\n'}]",0,802533,5e2cdc265ba48fbdb8e8d7a433c0a5542bb9c8d2,5,1,2,13861,,,0,"[DNM] Test tripleo-ci release files in ci.centos gate job

To have same artifacts as other check jobs and to get
rid of additional release files.

Change-Id: I9984d9aee43fafaaa0036551e23fe125988312ce
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/33/802533/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/layout.yaml', 'ci-scripts/full-deploy.sh']",2,831c080ccac446c1dce1cb57290d89d54f7a9229,dnm,RELEASE=master-tripleo-ci unset CI_ENV,RELEASE=${1:-master-tripleo-ci},3,29
openstack%2Fnova~master~I03eec634b25582ec9643cacf3e5868c101176983,openstack/nova,master,I03eec634b25582ec9643cacf3e5868c101176983,Reproducer unit test for bug 1860312,MERGED,2021-07-28 12:57:52.000000000,2021-07-30 10:05:23.000000000,2021-07-30 10:03:55.000000000,"[{'_account_id': 7166}, {'_account_id': 11604}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-28 12:57:52.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_services.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/32257a2a6d159406577c885a9d7e366cbf0c72b9', 'message': ""Reproducer unit test for bug 1860312\n\nConsider the following situation:\n\n- Using the Ironic virt driver\n- Replacing (so removing and re-adding) all baremetal nodes\n  associated with a single nova-compute service\n\nThe update resources periodic will have destroyed the compute node\nrecords because they're no longer being reported by the virt driver.\nIf we then attempt to manually delete the compute service record, the\ndatbase layer will raise an exception, as there are no longer any\ncompute node records for the host. This exception gets bubbled up as\nan error 500 in the API. This patch adds a unit test to demonstrate\nthis.\n\nRelated bug: 1860312\nChange-Id: I03eec634b25582ec9643cacf3e5868c101176983\n""}]",2,802697,32257a2a6d159406577c885a9d7e366cbf0c72b9,15,4,1,8864,,,0,"Reproducer unit test for bug 1860312

Consider the following situation:

- Using the Ironic virt driver
- Replacing (so removing and re-adding) all baremetal nodes
  associated with a single nova-compute service

The update resources periodic will have destroyed the compute node
records because they're no longer being reported by the virt driver.
If we then attempt to manually delete the compute service record, the
datbase layer will raise an exception, as there are no longer any
compute node records for the host. This exception gets bubbled up as
an error 500 in the API. This patch adds a unit test to demonstrate
this.

Related bug: 1860312
Change-Id: I03eec634b25582ec9643cacf3e5868c101176983
",git fetch https://review.opendev.org/openstack/nova refs/changes/97/802697/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/api/openstack/compute/test_services.py'],1,32257a2a6d159406577c885a9d7e366cbf0c72b9,bug/1860312," @mock.patch( 'nova.objects.ComputeNodeList.get_all_by_host', side_effect=exception.ComputeHostNotFound(host='fake-compute-host')) def test_services_delete_compute_host_not_found( self, mock_get_all_by_host): compute = objects.Service(self.ctxt, **{'host': 'fake-compute-host', 'binary': 'nova-compute', 'topic': 'compute', 'report_count': 0}) compute.create() # FIXME(artom) Until bug 1860312 is fixed, the ComputeHostNotFound # error will get bubbled up to the API as an error 500. self.assertRaises( webob.exc.HTTPInternalServerError, self.controller.delete, self.req, compute.id) mock_get_all_by_host.assert_called_with( self.req.environ['nova.context'], 'fake-compute-host') ",,19,0
openstack%2Fcyborg~master~I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d,openstack/cyborg,master,I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d,Delete trait from placement,MERGED,2021-05-12 10:17:06.000000000,2021-07-30 09:59:46.000000000,2021-07-30 09:58:31.000000000,"[{'_account_id': 22348}, {'_account_id': 25738}, {'_account_id': 26458}, {'_account_id': 28748}]","[{'number': 1, 'created': '2021-05-12 10:17:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/873216a0d74c414169ec8ff2a420bdb7ab51c6fc', 'message': 'Delete trait for placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 2, 'created': '2021-05-26 07:26:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/48098c614984a03dc361d1e99af514f720b5198e', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 3, 'created': '2021-05-27 09:09:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/00b196203d52a39fc3842fa6420f3fb0ecc588de', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 4, 'created': '2021-05-31 08:21:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/867d1a316df2ffd9d8fb9f1aa0dc6793779642f4', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 5, 'created': '2021-06-01 06:07:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/e46208fd2ca3c2bc1d4c04bb415ee715ae68d5e8', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 6, 'created': '2021-06-21 00:51:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/2bd6ee236265a8200dde8fb03182014ed7d06c5f', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 7, 'created': '2021-07-09 08:05:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/64a3e14ccdb9981ee6e79ea6e09b599fb3d0aeae', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 8, 'created': '2021-07-09 09:06:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/e864139db2f6a0e4dc4dc5fe21f01d227cc0c30c', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 9, 'created': '2021-07-23 02:06:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/15f7cbc52c4afd301441c92cbfde46227db84d01', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}, {'number': 10, 'created': '2021-07-23 08:12:28.000000000', 'files': ['cyborg/conductor/manager.py', 'releasenotes/notes/bug-1928174-delete_trait_from_placement-266caf73cf289759.yaml', 'cyborg/tests/unit/objects/test_fpga_ext_arq.py', 'cyborg/common/placement_client.py', 'cyborg/objects/extarq/fpga_ext_arq.py'], 'web_link': 'https://opendev.org/openstack/cyborg/commit/05f88530a3c3c6d75e4b67eb01df08ec94955036', 'message': 'Delete trait from placement\n\nIf no rp uses the old device trait, we need clean it, else placement\nwill raise 409 exception.\n\nCloses-Bug: #1928174\n\nChange-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d\n'}]",16,790937,05f88530a3c3c6d75e4b67eb01df08ec94955036,37,4,10,31412,,,0,"Delete trait from placement

If no rp uses the old device trait, we need clean it, else placement
will raise 409 exception.

Closes-Bug: #1928174

Change-Id: I0b1a6ba0b8a9934afe243d53bc0eb7f78e97de1d
",git fetch https://review.opendev.org/openstack/cyborg refs/changes/37/790937/2 && git format-patch -1 --stdout FETCH_HEAD,"['cyborg/conductor/manager.py', 'cyborg/common/placement_client.py']",2,873216a0d74c414169ec8ff2a420bdb7ab51c6fc,bug/1928174," def delet_trait(self, context, name): """"""Delete trait by name."""""" version = '1.6' resp = self.delete( ""/traits/%s"" % name, version=version, global_request_id=context.global_id) if not resp: msg = (""Failed to delete trait record with placement "" ""API for trait %(trait_name)s. Got "" ""%(status_code)d: %(err_text)s."") args = { 'trait_name': name, 'status_code': resp.status_code, 'err_text': resp.text, } LOG.error(msg, args) elif resp.status_code == 204: LOG.info(""Successfully delete trait %(trait_name)."", { ""trait_name"", name})",,22,0
openstack%2Ftripleo-validations~stable%2Fwallaby~If0dc3300fbd8cf245c0477be782110d897344860,openstack/tripleo-validations,stable/wallaby,If0dc3300fbd8cf245c0477be782110d897344860,Fix Inventory Generation without Overcloud deployed,MERGED,2021-07-29 14:42:47.000000000,2021-07-30 09:29:46.000000000,2021-07-30 09:29:46.000000000,"[{'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 14:42:47.000000000', 'files': ['scripts/tripleo-ansible-inventory'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/9289704779b9bd520be82db9b01ba8e28c6e1563', 'message': 'Fix Inventory Generation without Overcloud deployed\n\nThe utils.list_plan_and_stack function returns None in case of exceptions\nor and empty list if no stacks or no plans have been found in the\nenvironment.\n\nThis patch fixes the conditional to allow the tripleo-ansible-inventory\nscript to generate only the undercloud Inventory when no Overcloud has\nbeen deployed.\n\nRelated-bz: rhbz#1987318\n\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\nChange-Id: If0dc3300fbd8cf245c0477be782110d897344860\n(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)\n'}]",0,802885,9289704779b9bd520be82db9b01ba8e28c6e1563,9,7,1,11491,,,0,"Fix Inventory Generation without Overcloud deployed

The utils.list_plan_and_stack function returns None in case of exceptions
or and empty list if no stacks or no plans have been found in the
environment.

This patch fixes the conditional to allow the tripleo-ansible-inventory
script to generate only the undercloud Inventory when no Overcloud has
been deployed.

Related-bz: rhbz#1987318

Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
Change-Id: If0dc3300fbd8cf245c0477be782110d897344860
(cherry picked from commit 5a8cfac7f98f15a2964ea7fcabb3d68a4355385e)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/85/802885/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/tripleo-ansible-inventory'],1,9289704779b9bd520be82db9b01ba8e28c6e1563,rhbz#1887444, if not plans:, if plans is None:,1,1
openstack%2Fswift~master~If559772b929f61a340c170569461312ff98cf751,openstack/swift,master,If559772b929f61a340c170569461312ff98cf751,wip: Cluster assisted Storage Policy Migration,NEW,2015-04-14 22:33:12.000000000,2021-07-30 09:09:36.000000000,,"[{'_account_id': 330}, {'_account_id': 7233}, {'_account_id': 8859}, {'_account_id': 13052}, {'_account_id': 22348}]","[{'number': 1, 'created': '2015-04-14 22:33:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/1221ae502e0cb6e5d151be1097ed893b3101ce32', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 2, 'created': '2021-07-14 06:28:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/e6116ce0d30047eaa81209127305f558e969a316', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 3, 'created': '2021-07-19 07:00:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/b15f6301bbf1d1f40024a228b1a77b2aa7a1d521', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 4, 'created': '2021-07-21 07:08:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/b9c916cd6dd14926010cb19c685458ba06c48aab', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 5, 'created': '2021-07-23 03:09:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/8810b34cfd3f481e74e0af9a2c45e8ecb943db7d', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 6, 'created': '2021-07-23 05:00:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/661defd6060d9778cf6046eca886792d70db677a', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 7, 'created': '2021-07-23 07:36:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/f3a37f6ab8fa67b9234cee187c4f104b773e558b', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 8, 'created': '2021-07-26 08:33:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/a05e2e0484b319e2d612209576b8223100c43848', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 9, 'created': '2021-07-27 04:42:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/4cb462366abc395e5f8c058074994b934e15c3aa', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 10, 'created': '2021-07-27 06:56:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/fc29a288170286c612d1999db892f36b4ae18820', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 11, 'created': '2021-07-28 00:04:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/0f3ea5eb3f294ca95dda601ad48cea906398892b', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 12, 'created': '2021-07-29 05:59:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/821d81a717c850e2d5faa4c101cbe5a12bf659bf', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 13, 'created': '2021-07-30 04:56:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/20b530ce98944ddae2b0f309066ad3de1b6b4950', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}, {'number': 14, 'created': '2021-07-30 07:26:55.000000000', 'files': ['swift/container/server.py', 'swift/cli/container_migrate.py', 'test/unit/cli/test_container_migrate.py', 'test/unit/container/test_server.py', 'setup.cfg', 'swift/common/internal_client.py', 'swift/proxy/controllers/base.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/59d8cb0768ffbf75cac2886549f9d4041434a41b', 'message': ""wip: Cluster assisted Storage Policy Migration\n\nBasically - just let the reconciler do it.  I'm interesting in how the\nreconciler scales - migration of an existing full container is a little\neasier to get at than forcing a split brain.\n\nIt might be useful even in a raw state under controlled and monitored\nsituations - but to be more generally applicable there's probably a\nnumber of different concerns.\n\nBut this particular POC was just cause I wanted to hack on something\nsorta fun - I got board around the time I realized I hadn't written any\nunittests - but I'll throw it up and let it expire or maybe pick it back\nup later or talk about the idea in Vancouver.\n\nChange-Id: If559772b929f61a340c170569461312ff98cf751\n""}]",9,173580,59d8cb0768ffbf75cac2886549f9d4041434a41b,45,5,14,1179,,,0,"wip: Cluster assisted Storage Policy Migration

Basically - just let the reconciler do it.  I'm interesting in how the
reconciler scales - migration of an existing full container is a little
easier to get at than forcing a split brain.

It might be useful even in a raw state under controlled and monitored
situations - but to be more generally applicable there's probably a
number of different concerns.

But this particular POC was just cause I wanted to hack on something
sorta fun - I got board around the time I realized I hadn't written any
unittests - but I'll throw it up and let it expire or maybe pick it back
up later or talk about the idea in Vancouver.

Change-Id: If559772b929f61a340c170569461312ff98cf751
",git fetch https://review.opendev.org/openstack/swift refs/changes/80/173580/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/container/server.py', 'setup.cfg', 'swift/container/backend.py', 'bin/swift-container-migrate', 'swift/common/internal_client.py', 'swift/proxy/controllers/base.py']",6,1221ae502e0cb6e5d151be1097ed893b3101ce32,container-migrate," is_sys_or_user_meta(st, k) or k.lower().startswith('x-backend-'))"," is_sys_or_user_meta(st, k))",157,6
openstack%2Fcharm-octavia~master~Id8cced3f4db2b1476bbb803dc75ba2dd5bd99390,openstack/charm-octavia,master,Id8cced3f4db2b1476bbb803dc75ba2dd5bd99390,Sync release-tools,MERGED,2021-07-22 12:59:14.000000000,2021-07-30 09:08:37.000000000,2021-07-30 09:08:37.000000000,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-22 12:59:14.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'src/test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/58d203465b6aa0316c81225d1745fbde8643dd53', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: Id8cced3f4db2b1476bbb803dc75ba2dd5bd99390\n'}]",0,801830,58d203465b6aa0316c81225d1745fbde8643dd53,11,4,1,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: Id8cced3f4db2b1476bbb803dc75ba2dd5bd99390
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/30/801830/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'src/test-requirements.txt', 'tox.ini']",4,58d203465b6aa0316c81225d1745fbde8643dd53,fix-tox-pip-resolutionimpossible,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/test-requirements.txt,10,15
openstack%2Fkolla-ansible~stable%2Fwallaby~Ib5496d6bc2ddfe1fedacc4f9c859ac56fc69726e,openstack/kolla-ansible,stable/wallaby,Ib5496d6bc2ddfe1fedacc4f9c859ac56fc69726e,"Revert ""cephadm: Set auth_allow_insecure_global_id_reclaim to true""",MERGED,2021-07-29 15:45:46.000000000,2021-07-30 08:47:46.000000000,2021-07-30 08:46:22.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-07-29 15:45:46.000000000', 'files': ['roles/cephadm/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/197ffbd8c0e8e47dfe490ed46fe3c2f77e8e5987', 'message': 'Revert ""cephadm: Set auth_allow_insecure_global_id_reclaim to true""\n\nThis reverts commit a967b9dd66fad5b055b071794a4b059feed9fe90.\n\nReason for revert: Check if it\'s still the case.\n\nChange-Id: Ib5496d6bc2ddfe1fedacc4f9c859ac56fc69726e\n(cherry picked from commit 682cff7bc888ddf99fcbfd66204646c4194fc1a3)\n'}]",0,802889,197ffbd8c0e8e47dfe490ed46fe3c2f77e8e5987,9,4,1,30491,,,0,"Revert ""cephadm: Set auth_allow_insecure_global_id_reclaim to true""

This reverts commit a967b9dd66fad5b055b071794a4b059feed9fe90.

Reason for revert: Check if it's still the case.

Change-Id: Ib5496d6bc2ddfe1fedacc4f9c859ac56fc69726e
(cherry picked from commit 682cff7bc888ddf99fcbfd66204646c4194fc1a3)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/89/802889/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/cephadm/tasks/main.yml'],1,197ffbd8c0e8e47dfe490ed46fe3c2f77e8e5987,,,"# NOTE(mnasiadka): Ubuntu uses pre 15.2.11 Octopus client code and suffers from # https://docs.ceph.com/en/latest/security/CVE-2021-20288/ - name: Set auth_allow_insecure_global_id_reclaim to True command: cmd: > cephadm shell -- ceph config set mon auth_allow_insecure_global_id_reclaim true become: true when: ansible_distribution == ""Ubuntu"" ",0,11
openstack%2Fcinder~stable%2Fwallaby~I62fcef3169dcb9f4363a5344af4b2711edfef632,openstack/cinder,stable/wallaby,I62fcef3169dcb9f4363a5344af4b2711edfef632,NFS: Update connection info on online snap create,MERGED,2021-07-23 15:09:33.000000000,2021-07-30 08:33:50.000000000,2021-07-30 08:32:18.000000000,"[{'_account_id': 4523}, {'_account_id': 9535}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2021-07-23 15:09:33.000000000', 'files': ['releasenotes/notes/nfs-online-snapshot-c05e6c8113bbded6.yaml', 'cinder/tests/unit/volume/drivers/test_remotefs.py', 'cinder/volume/drivers/remotefs.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/d4960fd597aad8502cad46b38cdb50c6b88f7c63', 'message': ""NFS: Update connection info on online snap create\n\nThe NFS snapshot creation for an attached volume requires interaction\nbetween Nova and Cinder, and a new qcow2 file is used after the\nattachment completes.\n\nThis means that the connection properties stored in the Attachment is no\nlonger valid, as it is pointing to the old qcow2 file, so if Nova tries\nto use that attachment it will start writing on the old qcow2 file.\n\nA flow showing this issue is:\n\n- Attach NFS volume\n- Create snapshot\n- Hard reboot\n\nAfter that the VM will start using the base image, breaking the qcow2\nchain.\n\nIf we delete the snapshot in the meantime, then the VM will fail to\nreboot.\n\nThis patch fixes this inconsistency by updating the connection info\nfield inside the remotefs driver.\n\nWe usually prefer that drivers don't to touch the DB, directly or\nindirectly (using OVOs), but in this case we are using OVOs methods\ninstead of the usual model update on the volume manager because there\nare cases in the driver where a snapshot is created (cloning via\nsnapshot) and we have to update the attachment without the manager, as\nit is unaware that a temporary snapshot is being created.\n\nBesides that main reason there are other less critical reasons to do the\nattachment update in the driver:\n\n- Smaller code change\n- Easier to backport\n- Limit change impact on other areas (better for backport)\n- The snapshot_create model update code in the manager does not support\n  updating attachments.\n- There are cases in the cinder volume manager where the model update\n  values returned by snapshot_create are not being applied.\n\nSnapshot deletion belonging to in-use volumes are not affected by this\nissue because we only do block commit when the snapshot file we are\ndeleting is not the active file.  In _delete_snapshot_online:\n\n        if utils.paths_normcase_equal(info['active_file'],\n                                      info['snapshot_file']):\n\nCloses-Bug: #1860913\nChange-Id: I62fcef3169dcb9f4363a5344af4b2711edfef632\n(cherry picked from commit 25eb0a7d76922e3a1a289d26c36b96a91c4059db)\n""}]",0,802036,d4960fd597aad8502cad46b38cdb50c6b88f7c63,20,4,1,10459,,,0,"NFS: Update connection info on online snap create

The NFS snapshot creation for an attached volume requires interaction
between Nova and Cinder, and a new qcow2 file is used after the
attachment completes.

This means that the connection properties stored in the Attachment is no
longer valid, as it is pointing to the old qcow2 file, so if Nova tries
to use that attachment it will start writing on the old qcow2 file.

A flow showing this issue is:

- Attach NFS volume
- Create snapshot
- Hard reboot

After that the VM will start using the base image, breaking the qcow2
chain.

If we delete the snapshot in the meantime, then the VM will fail to
reboot.

This patch fixes this inconsistency by updating the connection info
field inside the remotefs driver.

We usually prefer that drivers don't to touch the DB, directly or
indirectly (using OVOs), but in this case we are using OVOs methods
instead of the usual model update on the volume manager because there
are cases in the driver where a snapshot is created (cloning via
snapshot) and we have to update the attachment without the manager, as
it is unaware that a temporary snapshot is being created.

Besides that main reason there are other less critical reasons to do the
attachment update in the driver:

- Smaller code change
- Easier to backport
- Limit change impact on other areas (better for backport)
- The snapshot_create model update code in the manager does not support
  updating attachments.
- There are cases in the cinder volume manager where the model update
  values returned by snapshot_create are not being applied.

Snapshot deletion belonging to in-use volumes are not affected by this
issue because we only do block commit when the snapshot file we are
deleting is not the active file.  In _delete_snapshot_online:

        if utils.paths_normcase_equal(info['active_file'],
                                      info['snapshot_file']):

Closes-Bug: #1860913
Change-Id: I62fcef3169dcb9f4363a5344af4b2711edfef632
(cherry picked from commit 25eb0a7d76922e3a1a289d26c36b96a91c4059db)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/36/802036/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/nfs-online-snapshot-c05e6c8113bbded6.yaml', 'cinder/tests/unit/volume/drivers/test_remotefs.py', 'cinder/volume/drivers/remotefs.py']",3,d4960fd597aad8502cad46b38cdb50c6b88f7c63,nfs-fix-online-snapshot, active = os.path.basename(new_snap_path) # Update reference in the only attachment (no multi-attach support) attachment = snapshot.volume.volume_attachment[0] attachment.connection_info['name'] = active # Let OVO know it has been updated attachment.connection_info = attachment.connection_info attachment.save() snap_info['active'] = active snap_info[snapshot.id] = active, snap_info['active'] = os.path.basename(new_snap_path) snap_info[snapshot.id] = os.path.basename(new_snap_path),33,3
openstack%2Fceilometer~master~I7e271ca36216d10ce23942c06ae2f3575c00fdee,openstack/ceilometer,master,I7e271ca36216d10ce23942c06ae2f3575c00fdee,Gnocchi: replace deprecated [storage] coordination_url,MERGED,2021-07-06 12:35:27.000000000,2021-07-30 08:16:49.000000000,2021-07-30 08:15:08.000000000,"[{'_account_id': 4264}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-06 12:35:27.000000000', 'files': ['devstack/plugin.sh'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/2af5b376a29775b026d6a3c2100469f79ce2a745', 'message': 'Gnocchi: replace deprecated [storage] coordination_url\n\n[storage] coordination_url was deprecated since Gnocchi 4.1.0 and\nreplaced by [DEFAULT] coordination_url[1].\n\n[1] https://github.com/gnocchixyz/gnocchi/commit/70b9ca427\n\nChange-Id: I7e271ca36216d10ce23942c06ae2f3575c00fdee\n'}]",0,799660,2af5b376a29775b026d6a3c2100469f79ce2a745,8,3,1,9816,,,0,"Gnocchi: replace deprecated [storage] coordination_url

[storage] coordination_url was deprecated since Gnocchi 4.1.0 and
replaced by [DEFAULT] coordination_url[1].

[1] https://github.com/gnocchixyz/gnocchi/commit/70b9ca427

Change-Id: I7e271ca36216d10ce23942c06ae2f3575c00fdee
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/60/799660/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/plugin.sh'],1,2af5b376a29775b026d6a3c2100469f79ce2a745,gnocchi-opt," iniset $GNOCCHI_CONF coordination_url ""$GNOCCHI_COORDINATOR_URL"""," iniset $GNOCCHI_CONF storage coordination_url ""$GNOCCHI_COORDINATOR_URL""",1,1
openstack%2Fcharm-neutron-openvswitch~stable%2F21.04~I39024855c3e42ee135b6ad5e7618a770219b6994,openstack/charm-neutron-openvswitch,stable/21.04,I39024855c3e42ee135b6ad5e7618a770219b6994,Sync release-tools,MERGED,2021-07-29 09:12:59.000000000,2021-07-30 07:57:10.000000000,2021-07-30 07:57:10.000000000,"[{'_account_id': 13686}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-29 09:12:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/9628ee40d03de4c53a46f9e0750ce2f514f36247', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I39024855c3e42ee135b6ad5e7618a770219b6994\n(cherry picked from commit 7e97910ed48354c54b7d560789f23978f7b16da7)\n'}, {'number': 2, 'created': '2021-07-29 09:16:51.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/09af6c4b0bb5e05ec2309751e43ac20165ec8081', 'message': 'Sync release-tools\n\nIn order to fix ResolutionImpossible on tox invocation.\n\nhttps://github.com/openstack-charmers/release-tools/issues/151\nhttps://github.com/openstack-charmers/release-tools/pull/152\n\nChange-Id: I39024855c3e42ee135b6ad5e7618a770219b6994\n(cherry picked from commit 7e97910ed48354c54b7d560789f23978f7b16da7)\n'}]",0,802789,09af6c4b0bb5e05ec2309751e43ac20165ec8081,18,5,2,31289,,,0,"Sync release-tools

In order to fix ResolutionImpossible on tox invocation.

https://github.com/openstack-charmers/release-tools/issues/151
https://github.com/openstack-charmers/release-tools/pull/152

Change-Id: I39024855c3e42ee135b6ad5e7618a770219b6994
(cherry picked from commit 7e97910ed48354c54b7d560789f23978f7b16da7)
",git fetch https://review.opendev.org/openstack/charm-neutron-openvswitch refs/changes/89/802789/2 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt', 'tox.ini']",3,9628ee40d03de4c53a46f9e0750ce2f514f36247,fix-tox-pip-resolutionimpossible-stable/21.04,deps = flake8==3.9.2 charm-tools==2.8.3,deps = -r{toxinidir}/requirements.txt -r{toxinidir}/test-requirements.txt,8,9
openstack%2Fcinder~master~I6f9c7781ac0f08de67c1423bf8a55dbc5f4e0451,openstack/cinder,master,I6f9c7781ac0f08de67c1423bf8a55dbc5f4e0451,WIP: Add user messages for volume group,NEW,2021-07-07 12:25:47.000000000,2021-07-30 06:29:19.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-07 12:25:47.000000000', 'files': ['cinder/volume/manager.py', 'cinder/message/message_field.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/bdb7f1630497976e6a5f70447540abb5a91018d5', 'message': 'WIP: Add user messages for volume group\n\nChange-Id: I6f9c7781ac0f08de67c1423bf8a55dbc5f4e0451\n'}]",0,799799,bdb7f1630497976e6a5f70447540abb5a91018d5,31,1,1,27615,,,0,"WIP: Add user messages for volume group

Change-Id: I6f9c7781ac0f08de67c1423bf8a55dbc5f4e0451
",git fetch https://review.opendev.org/openstack/cinder refs/changes/99/799799/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/manager.py', 'cinder/message/message_field.py']",2,bdb7f1630497976e6a5f70447540abb5a91018d5,cinder-user-messages," VOLUME_GROUP = 'VOLUME_GROUP' GROUP_CREATE = ('020', _('create group')) GROUP_CREATE_FROM_SRC = ('021', _('create group from source')) GROUP_DELETE = ('022', _('delete group')) GROUP_UPDATE = ('023', _('update group')) GROUP_CREATE, GROUP_CREATE_FROM_SRC, GROUP_DELETE, GROUP_UPDATE, GROUP_CREATE_ERROR = ('037', _(""Failed to create volume group."")) GROUP_SRC_NOT_FOUND_ERROR = ( '038', _(""Source Group or Group snapshot not found."")) GROUP_SRC_INVALID_STATE = ( '039', _(""Group snapshot or Volumes in source group is/are in invalid "" ""state."")) VOLUME_FROM_SNAP_ERROR = ( '040', _(""Driver failed to create volume from snapshot."")) CLONE_VOLUME_ERROR = ('041', _(""Driver failed to clone volume."")) GROUP_VOLS_ATTACHED = ('042', _(""Volume(s) in group is/are attached."")) GROUP_DELETE_ERROR = ('043', _(""Failed to delete volume group."")) GROUP_UPDATE_ERROR = ('044', _(""Failed to update volume group."")) GROUP_CREATE_ERROR, GROUP_SRC_NOT_FOUND_ERROR, GROUP_SRC_INVALID_STATE, VOLUME_FROM_SNAP_ERROR, CLONE_VOLUME_ERROR, GROUP_VOLS_ATTACHED, GROUP_DELETE_ERROR, GROUP_UPDATE_ERROR,",,99,8
openstack%2Fcinder~master~Iac7791c0df089b7d9411f9e09f585a68c3674877,openstack/cinder,master,Iac7791c0df089b7d9411f9e09f585a68c3674877,WIP: Add user message for migrate multiattach volume,NEW,2021-07-12 07:50:23.000000000,2021-07-30 06:29:06.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-12 07:50:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/9d75421ac30c4721dd13933773b44d81adf36a44', 'message': 'WIP: Add user message for migrate multiattach volume\n\nChange-Id: Iac7791c0df089b7d9411f9e09f585a68c3674877\n'}, {'number': 2, 'created': '2021-07-13 08:01:23.000000000', 'files': ['cinder/volume/manager.py', 'cinder/message/message_field.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/38009d8044927b2c5f66206d5a47013187737909', 'message': 'WIP: Add user message for migrate multiattach volume\n\nChange-Id: Iac7791c0df089b7d9411f9e09f585a68c3674877\n'}]",2,800430,38009d8044927b2c5f66206d5a47013187737909,38,1,2,27615,,,0,"WIP: Add user message for migrate multiattach volume

Change-Id: Iac7791c0df089b7d9411f9e09f585a68c3674877
",git fetch https://review.opendev.org/openstack/cinder refs/changes/30/800430/2 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/manager.py', 'cinder/message/message_field.py']",2,9d75421ac30c4721dd13933773b44d81adf36a44,cinder-user-messages," VOL_MULTIATTACH_MIGRATE_ERROR = ( '037', _(""Retype/migration of multiattach volumes is not possible."")) VOL_MULTIATTACH_MIGRATE_ERROR,",,12,0
openstack%2Fpython-tripleoclient~master~Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4,openstack/python-tripleoclient,master,Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4,Fix --stack-only to download ansible playbooks,MERGED,2021-06-29 19:20:38.000000000,2021-07-30 04:46:48.000000000,2021-07-30 04:45:27.000000000,"[{'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30073}]","[{'number': 1, 'created': '2021-06-29 19:20:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/76921ddb906f1d7013890195b9fce2fd65ad4ba4', 'message': 'Fix --stack-only to download ansible playbooks\n\nIn previously versions, if you wanted to manually run the playbooks you\ncould use --stack-only to generate them and have them created for you.\nThis appears to be broken as the condition is now based on --setup-only\nwhich attempts to restore a previously existing stack. This moves the\ndownload config playbooks back to also being dependent on --stack-only\nor --no-config-download\n\nChange-Id: Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4\nCloses-Bug: #1934009\n'}, {'number': 2, 'created': '2021-07-29 21:51:20.000000000', 'files': ['tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/0adc5bb9dff517cbe298d97d5bcee698b2a2e77c', 'message': 'Fix --stack-only to download ansible playbooks\n\nIn previously versions, if you wanted to manually run the playbooks you\ncould use --stack-only to generate them and have them created for you.\nThis appears to be broken as the condition is now based on --setup-only\nwhich attempts to restore a previously existing stack. This moves the\ndownload config playbooks back to also being dependent on --stack-only\nor --no-config-download\n\nChange-Id: Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4\nCloses-Bug: #1934009\n'}]",0,798740,0adc5bb9dff517cbe298d97d5bcee698b2a2e77c,23,7,2,14985,,,0,"Fix --stack-only to download ansible playbooks

In previously versions, if you wanted to manually run the playbooks you
could use --stack-only to generate them and have them created for you.
This appears to be broken as the condition is now based on --setup-only
which attempts to restore a previously existing stack. This moves the
download config playbooks back to also being dependent on --stack-only
or --no-config-download

Change-Id: Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4
Closes-Bug: #1934009
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/40/798740/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/overcloud_deploy.py'],1,76921ddb906f1d7013890195b9fce2fd65ad4ba4,bug/1934009," elif not parsed_args.config_download or parsed_args.setup_only: # Download config config_dir = parsed_args.config_dir or config_download_dir config_type = parsed_args.config_type preserve_config_dir = parsed_args.preserve_config_dir extra_vars = { 'plan': stack.stack_name, 'config_dir': config_dir, 'preserve_config': preserve_config_dir } if parsed_args.config_type: extra_vars['config_type'] = config_type with utils.TempDirs() as tmp: utils.run_ansible_playbook( playbook='cli-config-download-export.yaml', inventory='localhost,', workdir=tmp, playbook_dir=constants.ANSIBLE_TRIPLEO_PLAYBOOKS, verbosity=utils.playbook_verbosity(self=self), extra_vars=extra_vars )"," else: # Download config config_dir = parsed_args.config_dir or config_download_dir config_type = parsed_args.config_type preserve_config_dir = parsed_args.preserve_config_dir extra_vars = { 'plan': stack.stack_name, 'config_dir': config_dir, 'preserve_config': preserve_config_dir } if parsed_args.config_type: extra_vars['config_type'] = config_type with utils.TempDirs() as tmp: utils.run_ansible_playbook( playbook='cli-config-download-export.yaml', inventory='localhost,', workdir=tmp, playbook_dir=constants.ANSIBLE_TRIPLEO_PLAYBOOKS, verbosity=utils.playbook_verbosity(self=self), extra_vars=extra_vars )",22,22
openstack%2Ftripleo-heat-templates~master~I0849ed1ab4ac8aea24af12726127a8c68c2bd180,openstack/tripleo-heat-templates,master,I0849ed1ab4ac8aea24af12726127a8c68c2bd180,Partial revert of LM Optimization,ABANDONED,2021-07-27 20:38:11.000000000,2021-07-30 04:21:25.000000000,,"[{'_account_id': 11604}, {'_account_id': 17216}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-07-27 20:38:11.000000000', 'files': ['deployment/nova/nova-compute-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/3534d1aaaf2fcacd26c3cf59e40704d9ce539971', 'message': 'Partial revert of LM Optimization\n\nIn I1133c210f35181d44f8ba56f09b52f00589e035c we tried to automatically\nenable come live-migration tweaks in certain conditions. We ended up\nbreaking live-migration in some rare cases. The last case was that\npost-copy is not compatible with pinned instances as per related BZ.\n\nRelated: https://bugzilla.redhat.com/show_bug.cgi?id=1986567\nChange-Id: I0849ed1ab4ac8aea24af12726127a8c68c2bd180\n'}]",1,802614,3534d1aaaf2fcacd26c3cf59e40704d9ce539971,8,6,1,27419,,,0,"Partial revert of LM Optimization

In I1133c210f35181d44f8ba56f09b52f00589e035c we tried to automatically
enable come live-migration tweaks in certain conditions. We ended up
breaking live-migration in some rare cases. The last case was that
post-copy is not compatible with pinned instances as per related BZ.

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1986567
Change-Id: I0849ed1ab4ac8aea24af12726127a8c68c2bd180
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/14/802614/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/nova/nova-compute-container-puppet.yaml'],1,3534d1aaaf2fcacd26c3cf59e40704d9ce539971,vhost-postcopy, nova::migration::libvirt::live_migration_permit_post_copy: NovaLiveMigrationPermitPostCopy nova::migration::libvirt::live_migration_permit_auto_converge: NovaLiveMigrationPermitAutoConverge," live_migration_optimization_set: and: - not: {equals: [{get_param: [RoleParameters, TunedProfileName]}, 'realtime-virtual-host']} - reserved_huge_pages_set permit_post_copy_set: or: - not: {equals: [{get_param: [RoleParameters, NovaLiveMigrationPermitPostCopy]}, '']} - {get_param: NovaLiveMigrationPermitPostCopy} permit_auto_converge_set: or: - not: {equals: [{get_param: [RoleParameters, NovaLiveMigrationPermitAutoConverge]}, '']} - {get_param: NovaLiveMigrationPermitAutoConverge} nova_permit_post_copy: NovaLiveMigrationPermitPostCopy nova_permit_auto_converge: NovaLiveMigrationPermitAutoConverge nova::migration::libvirt::live_migration_permit_post_copy: if: - permit_post_copy_set - {get_attr: [RoleParametersValue, value, nova_permit_post_copy]} - if: - live_migration_optimization_set - true - false nova::migration::libvirt::live_migration_permit_auto_converge: if: - permit_auto_converge_set - {get_attr: [RoleParametersValue, value, nova_permit_auto_converge]} - if: - live_migration_optimization_set - true - false",2,30
openstack%2Fproject-config~master~I4f8d0e0a1aee55c0b4c92bb11690045018f63bf0,openstack/project-config,master,I4f8d0e0a1aee55c0b4c92bb11690045018f63bf0,Stop launch fedora-32 nodes nodepool,MERGED,2021-06-09 18:30:23.000000000,2021-07-30 04:00:53.000000000,2021-07-30 03:28:44.000000000,"[{'_account_id': 7118}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-09 18:30:23.000000000', 'files': ['nodepool/nl01.opendev.org.yaml', 'nodepool/nl04.opendev.org.yaml', 'nodepool/nl02.opendev.org.yaml', 'nodepool/nl03.opendev.org.yaml', 'grafana/create-nodepool-dib.sh', 'grafana/nodepool-dib.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/725135a002175f0d57b54dd2dbfb822d53d6134c', 'message': 'Stop launch fedora-32 nodes nodepool\n\nA followup change will remove the diskimage configuration for fedora-32.\nThe current fedora releases are 33 and 34 so we should clean up 32.\n\nDepends-On: https://review.opendev.org/c/zuul/zuul-jobs/+/795636\nDepends-On: https://review.opendev.org/c/zuul/zuul-operator/+/795638\nDepends-On: https://review.opendev.org/c/opendev/base-jobs/+/795639\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/795642\nDepends-On: https://review.opendev.org/c/x/tobiko/+/795641\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/795640\nChange-Id: I4f8d0e0a1aee55c0b4c92bb11690045018f63bf0\n'}]",0,795643,725135a002175f0d57b54dd2dbfb822d53d6134c,12,2,1,1004,,,0,"Stop launch fedora-32 nodes nodepool

A followup change will remove the diskimage configuration for fedora-32.
The current fedora releases are 33 and 34 so we should clean up 32.

Depends-On: https://review.opendev.org/c/zuul/zuul-jobs/+/795636
Depends-On: https://review.opendev.org/c/zuul/zuul-operator/+/795638
Depends-On: https://review.opendev.org/c/opendev/base-jobs/+/795639
Depends-On: https://review.opendev.org/c/zuul/nodepool/+/795642
Depends-On: https://review.opendev.org/c/x/tobiko/+/795641
Depends-On: https://review.opendev.org/c/openstack/devstack/+/795640
Change-Id: I4f8d0e0a1aee55c0b4c92bb11690045018f63bf0
",git fetch https://review.opendev.org/openstack/project-config refs/changes/43/795643/1 && git format-patch -1 --stdout FETCH_HEAD,"['nodepool/nl01.opendev.org.yaml', 'nodepool/nl04.opendev.org.yaml', 'nodepool/nl02.opendev.org.yaml', 'nodepool/nl03.opendev.org.yaml', 'grafana/create-nodepool-dib.sh', 'grafana/nodepool-dib.yaml']",6,725135a002175f0d57b54dd2dbfb822d53d6134c,,,"# AUTOGENERATED : Fedora 32 - title: Fedora 32 showTitle: true height: 200px panels: - title: Build status colorBackground: true type: singlestat valueName: current valueMaps: - value: 0 text: ""OK"" - value: 1 text: ""FAILED"" thresholds: 0.1,0.9 span: 2 targets: - target: ""stats.gauges.nodepool.dib_image_build.fedora-32.status.rc"" valueFontSize: ""50%"" - title: Last build type: singlestat span: 2 format: dateTimeFromNow targets: - target: ""stats.gauges.nodepool.dib_image_build.fedora-32.status.last_build"" valueFontSize: ""50%"" - title: Image size type: graph span: 3 yaxes: - format: decbytes min: 0 - format: decbytes min: 0 targets: - target: aliasByNode(stats.gauges.nodepool.dib_image_build.fedora-32.*.size, 5) refId: A - title: Build duration type: graph span: 3 yaxes: - format: ms min: 0 - format: ms min: 0 targets: - target: alias(keepLastValue(stats.timers.nodepool.dib_image_build.fedora-32.status.duration.mean, 'None'), ""Time"") refId: A",0,95
openstack%2Ftripleo-validations~stable%2Ftrain~I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,openstack/tripleo-validations,stable/train,I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,NFV OvS DPDK zero packet loss validations,MERGED,2021-07-29 13:04:17.000000000,2021-07-30 03:41:16.000000000,2021-07-30 03:40:06.000000000,"[{'_account_id': 7353}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 13:04:17.000000000', 'files': ['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/0b711e96ff2710d4e4f65d6a48c7005a9da80d35', 'message': 'NFV OvS DPDK zero packet loss validations\n\nThis changes to add the validations for NFV OvS DPDK zero packet loss\nrules.\n\nChange-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0\n(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)\n'}]",0,802878,0b711e96ff2710d4e4f65d6a48c7005a9da80d35,9,5,1,22865,,,0,"NFV OvS DPDK zero packet loss validations

This changes to add the validations for NFV OvS DPDK zero packet loss
rules.

Change-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0
(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/78/802878/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py']",22,0b711e96ff2710d4e4f65d6a48c7005a9da80d35,nfv_zero_packet_loss-stable/wallaby-stable/victoria-stable/ussuri-stable/train,"# Copyright 2016 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from unittest.mock import MagicMock from unittest.mock import patch import library.check_other_processes_pmd_usage as validation from tripleo_validations.tests import base class TestOtherProcessesPmdusageCheck(base.TestCase): def setUp(self): super(TestOtherProcessesPmdusageCheck, self).setUp() self.module = MagicMock() @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_no_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 4-7\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[], pmd_interrupts=False) @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_current_processes(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = """" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [None, [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine current processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_pmd_processes(self, mock_number_list): mock_number_list.return_value = [] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = """" self.module.run_command.side_effect = [[0, current_processes, """"], None] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine PMD threads processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[""pmd threads: 2,3 used in process: 21""], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[""pmd threads: 2,3 used in process: 21""], pmd_interrupts=True) def test_check_current_process_pmd_usage(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_exclude_value(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11,^8"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_invalid_range(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,-"" result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.module.fail_json.assert_called_with( msg=""Invalid number in input param 'range_list': invalid literal for int() with base 10: ''"") ",,1645,0
openstack%2Ftripleo-validations~stable%2Fussuri~I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,openstack/tripleo-validations,stable/ussuri,I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,NFV OvS DPDK zero packet loss validations,MERGED,2021-07-29 13:04:00.000000000,2021-07-30 03:20:47.000000000,2021-07-30 03:19:27.000000000,"[{'_account_id': 7353}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 13:04:00.000000000', 'files': ['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/3a1228fc52e2ee3b8b3dd5d30a4dfc7986a7f3b7', 'message': 'NFV OvS DPDK zero packet loss validations\n\nThis changes to add the validations for NFV OvS DPDK zero packet loss\nrules.\n\nChange-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0\n(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)\n'}]",0,802877,3a1228fc52e2ee3b8b3dd5d30a4dfc7986a7f3b7,7,5,1,22865,,,0,"NFV OvS DPDK zero packet loss validations

This changes to add the validations for NFV OvS DPDK zero packet loss
rules.

Change-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0
(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/77/802877/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py']",22,3a1228fc52e2ee3b8b3dd5d30a4dfc7986a7f3b7,nfv_zero_packet_loss-stable/wallaby-stable/victoria-stable/ussuri,"# Copyright 2016 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from unittest.mock import MagicMock from unittest.mock import patch import library.check_other_processes_pmd_usage as validation from tripleo_validations.tests import base class TestOtherProcessesPmdusageCheck(base.TestCase): def setUp(self): super(TestOtherProcessesPmdusageCheck, self).setUp() self.module = MagicMock() @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_no_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 4-7\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[], pmd_interrupts=False) @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_current_processes(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = """" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [None, [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine current processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_pmd_processes(self, mock_number_list): mock_number_list.return_value = [] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = """" self.module.run_command.side_effect = [[0, current_processes, """"], None] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine PMD threads processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[""pmd threads: 2,3 used in process: 21""], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[""pmd threads: 2,3 used in process: 21""], pmd_interrupts=True) def test_check_current_process_pmd_usage(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_exclude_value(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11,^8"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_invalid_range(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,-"" result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.module.fail_json.assert_called_with( msg=""Invalid number in input param 'range_list': invalid literal for int() with base 10: ''"") ",,1645,0
openstack%2Ftripleo-validations~stable%2Fvictoria~I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,openstack/tripleo-validations,stable/victoria,I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,NFV OvS DPDK zero packet loss validations,MERGED,2021-07-29 13:03:42.000000000,2021-07-30 03:20:45.000000000,2021-07-30 03:19:28.000000000,"[{'_account_id': 7353}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 13:03:42.000000000', 'files': ['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/133ee0d5f1595d07d43eabc25fa3b16cd93f1985', 'message': 'NFV OvS DPDK zero packet loss validations\n\nThis changes to add the validations for NFV OvS DPDK zero packet loss\nrules.\n\nChange-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0\n(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)\n'}]",0,802876,133ee0d5f1595d07d43eabc25fa3b16cd93f1985,7,5,1,22865,,,0,"NFV OvS DPDK zero packet loss validations

This changes to add the validations for NFV OvS DPDK zero packet loss
rules.

Change-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0
(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/76/802876/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py']",22,133ee0d5f1595d07d43eabc25fa3b16cd93f1985,nfv_zero_packet_loss-stable/wallaby-stable/victoria,"# Copyright 2016 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from unittest.mock import MagicMock from unittest.mock import patch import library.check_other_processes_pmd_usage as validation from tripleo_validations.tests import base class TestOtherProcessesPmdusageCheck(base.TestCase): def setUp(self): super(TestOtherProcessesPmdusageCheck, self).setUp() self.module = MagicMock() @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_no_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 4-7\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[], pmd_interrupts=False) @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_current_processes(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = """" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [None, [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine current processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_pmd_processes(self, mock_number_list): mock_number_list.return_value = [] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = """" self.module.run_command.side_effect = [[0, current_processes, """"], None] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine PMD threads processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[""pmd threads: 2,3 used in process: 21""], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[""pmd threads: 2,3 used in process: 21""], pmd_interrupts=True) def test_check_current_process_pmd_usage(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_exclude_value(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11,^8"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_invalid_range(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,-"" result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.module.fail_json.assert_called_with( msg=""Invalid number in input param 'range_list': invalid literal for int() with base 10: ''"") ",,1645,0
openstack%2Ftripleo-validations~master~If0dc3300fbd8cf245c0477be782110d897344860,openstack/tripleo-validations,master,If0dc3300fbd8cf245c0477be782110d897344860,Fix Inventory Generation without Overcloud deployed,MERGED,2021-07-29 13:51:40.000000000,2021-07-30 03:11:51.000000000,2021-07-30 03:11:51.000000000,"[{'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 13:51:40.000000000', 'files': ['scripts/tripleo-ansible-inventory'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/5a8cfac7f98f15a2964ea7fcabb3d68a4355385e', 'message': 'Fix Inventory Generation without Overcloud deployed\n\nThe utils.list_plan_and_stack function returns None in case of exceptions\nor and empty list if no stacks or no plans have been found in the\nenvironment.\n\nThis patch fixes the conditional to allow the tripleo-ansible-inventory\nscript to generate only the undercloud Inventory when no Overcloud has\nbeen deployed.\n\nRelated-bz: rhbz#1987318\n\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\nChange-Id: If0dc3300fbd8cf245c0477be782110d897344860\n'}]",0,802892,5a8cfac7f98f15a2964ea7fcabb3d68a4355385e,10,8,1,11491,,,0,"Fix Inventory Generation without Overcloud deployed

The utils.list_plan_and_stack function returns None in case of exceptions
or and empty list if no stacks or no plans have been found in the
environment.

This patch fixes the conditional to allow the tripleo-ansible-inventory
script to generate only the undercloud Inventory when no Overcloud has
been deployed.

Related-bz: rhbz#1987318

Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
Change-Id: If0dc3300fbd8cf245c0477be782110d897344860
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/92/802892/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/tripleo-ansible-inventory'],1,5a8cfac7f98f15a2964ea7fcabb3d68a4355385e,rhbz#1887444, if not plans:, if plans is None:,1,1
openstack%2Fnova~master~Ia831053f88bbb5c8a4dab4daff9d75fd156e88ff,openstack/nova,master,Ia831053f88bbb5c8a4dab4daff9d75fd156e88ff,Moved all calls from _ENFORCER.authorize to a separate _authorize method,NEW,2020-08-31 15:39:56.000000000,2021-07-30 01:36:21.000000000,,"[{'_account_id': 4690}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14595}, {'_account_id': 15751}, {'_account_id': 18044}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-08-31 15:39:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2e361ff0ad907d9e84532fda371bb8a935134bcf', 'message': 'Moved all calls from _ENFORCER.authorize to a separate _authorize method\n\nCreated a new helper method and named it _authorize to use it to call\n_ENFORCER.authorize.\nThis _authorize method catchs the FileNotFoundError and tries to\nreinitiate the request.\n\nChange-Id: Ia831053f88bbb5c8a4dab4daff9d75fd156e88ff\nCloses-Bug: #1856119\n'}, {'number': 2, 'created': '2021-07-29 15:46:55.000000000', 'files': ['nova/tests/unit/test_policy.py', 'nova/policy.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ec274c3ec18fa792ed098a829a76338895e2ba7e', 'message': 'Moved all calls from _ENFORCER.authorize to a separate _authorize method\n\nCreated a new helper method and named it _authorize to use it to call\n_ENFORCER.authorize.\nThis _authorize method catchs the FileNotFoundError and tries to\nreinitiate the request.\n\nChange-Id: Ia831053f88bbb5c8a4dab4daff9d75fd156e88ff\nCloses-Bug: #1856119\n'}]",0,749080,ec274c3ec18fa792ed098a829a76338895e2ba7e,13,7,2,30910,,,0,"Moved all calls from _ENFORCER.authorize to a separate _authorize method

Created a new helper method and named it _authorize to use it to call
_ENFORCER.authorize.
This _authorize method catchs the FileNotFoundError and tries to
reinitiate the request.

Change-Id: Ia831053f88bbb5c8a4dab4daff9d75fd156e88ff
Closes-Bug: #1856119
",git fetch https://review.opendev.org/openstack/nova refs/changes/80/749080/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/test_policy.py', 'nova/policy.py']",2,2e361ff0ad907d9e84532fda371bb8a935134bcf,bug/1856119," result = _authorize(action, target, context, do_raise=do_raise, exc=exc, action=action)def _authorize(*args, **kwargs): """"""Catches the FileNotFoundError and tries to reinitiate the request. """""" try: result = _ENFORCER.authorize(*args, **kwargs) except FileNotFoundError: LOG.info('Policy.json File was not Found ') reset() init() result = _ENFORCER.authorize(*args, **kwargs) return result return _authorize('context_is_admin', target, context)"," result = _ENFORCER.authorize(action, target, context, do_raise=do_raise, exc=exc, action=action) return _ENFORCER.authorize('context_is_admin', target, context)",40,3
openstack%2Ftripleo-validations~stable%2Fwallaby~I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,openstack/tripleo-validations,stable/wallaby,I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0,NFV OvS DPDK zero packet loss validations,MERGED,2021-07-29 13:03:19.000000000,2021-07-30 01:17:50.000000000,2021-07-30 01:16:32.000000000,"[{'_account_id': 7353}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-07-29 13:03:19.000000000', 'files': ['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/974e674e685d31fcc6cdfb690767c5f379505118', 'message': 'NFV OvS DPDK zero packet loss validations\n\nThis changes to add the validations for NFV OvS DPDK zero packet loss\nrules.\n\nChange-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0\n(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)\n'}]",0,802875,974e674e685d31fcc6cdfb690767c5f379505118,8,5,1,22865,,,0,"NFV OvS DPDK zero packet loss validations

This changes to add the validations for NFV OvS DPDK zero packet loss
rules.

Change-Id: I70e60b8039eb99af26c8e39e30c7cdfd93f5a3c0
(cherry picked from commit 46d9b751fd41eadd446159ebe6962c49ada22f7f)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/75/802875/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/modules/modules-get_dpdk_nics_numa_info.rst', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_pci_address.yml', 'doc/source/modules/modules-check_cpus_aligned_with_dpdk_nics.rst', 'doc/source/roles/role-check_nfv_ovsdpdk_zero_packet_loss.rst', 'library/check_cpus_aligned_with_dpdk_nics.py', 'library/check_other_processes_pmd_usage.py', 'library/pmd_threads_siblings_check.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_dpdk_port_bandwidth.yml', 'tripleo_validations/tests/library/test_check_cpus_aligned_with_dpdk_nics.py', 'library/convert_range_to_numbers_list.py', 'tripleo_validations/tests/library/test_pmd_threads_siblings_check.py', 'doc/source/modules/modules-check_other_processes_pmd_usage.rst', 'library/get_dpdk_nics_numa_info.py', 'tripleo_validations/tests/library/test_convert_range_to_numbers_list.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/check_nfv_instances.yml', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/main.yml', 'doc/source/modules/modules-convert_range_to_numbers_list.rst', 'playbooks/nfv-ovsdpdk-zero-packet-loss-check.yaml', 'doc/source/modules/modules-pmd_threads_siblings_check.rst', 'tripleo_validations/tests/library/test_get_dpdk_nics_numa_info.py', 'roles/check_nfv_ovsdpdk_zero_packet_loss/tasks/validate_instance.yml', 'tripleo_validations/tests/library/test_check_other_processes_pmd_usage.py']",22,974e674e685d31fcc6cdfb690767c5f379505118,nfv_zero_packet_loss-stable/wallaby,"# Copyright 2016 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from unittest.mock import MagicMock from unittest.mock import patch import library.check_other_processes_pmd_usage as validation from tripleo_validations.tests import base class TestOtherProcessesPmdusageCheck(base.TestCase): def setUp(self): super(TestOtherProcessesPmdusageCheck, self).setUp() self.module = MagicMock() @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_no_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 4-7\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[], pmd_interrupts=False) @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_current_processes(self, mock_number_list): mock_number_list.side_effect = [[], []] pmd_cpus = [""2"", ""3""] current_processes = """" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [None, [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine current processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_with_no_pmd_processes(self, mock_number_list): mock_number_list.return_value = [] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = """" self.module.run_command.side_effect = [[0, current_processes, """"], None] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.fail_json.assert_called_with( msg=""Unable to determine PMD threads processes"") @patch('library.check_other_processes_pmd_usage.' 'check_current_process_pmd_usage') def test_validate_other_processes_pmd_usage(self, mock_number_list): mock_number_list.side_effect = [[""pmd threads: 2,3 used in process: 21""], []] pmd_cpus = [""2"", ""3""] current_processes = ""21's 2-5\n22's 4-9\n24's 4-5"" pmd_processes = ""22's 4-9"" self.module.run_command.side_effect = [[0, current_processes, """"], [0, pmd_processes, """"]] exclude_processes_pid = [""24""] validation.check_other_processes_pmd_usage(self.module, pmd_cpus, exclude_processes_pid) self.module.exit_json.assert_called_with( messages=[""pmd threads: 2,3 used in process: 21""], pmd_interrupts=True) def test_check_current_process_pmd_usage(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_exclude_value(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,8-11,^8"" expected_value = [""pmd threads: 2,3 used in process: 21""] result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.assertEqual(result, expected_value) def test_check_current_process_pmd_usage_with_invalid_range(self): pmd_cpus = [""2"", ""3""] process_id = ""21"" range_list = ""2-5,-"" result = validation.check_current_process_pmd_usage(self.module, pmd_cpus, process_id, range_list) self.module.fail_json.assert_called_with( msg=""Invalid number in input param 'range_list': invalid literal for int() with base 10: ''"") ",,1645,0
openstack%2Fcinder~master~I1f1830d8a7c0349861e9a74f92c9b9e04360a03b,openstack/cinder,master,I1f1830d8a7c0349861e9a74f92c9b9e04360a03b,Fix extra_capabilities,ABANDONED,2021-07-29 20:01:08.000000000,2021-07-30 01:12:12.000000000,,[],"[{'number': 1, 'created': '2021-07-29 20:01:08.000000000', 'files': ['cinder/volume/manager.py', 'cinder/tests/unit/volume/test_capabilities.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/0c8fe9269ea06051a0343994704ceeb8f0f7ef94', 'message': ""Fix extra_capabilities\n\nThis patch ensures that when pools are being reported that\nthe volume driver's configured extra_capabilities are inserted\ninto each pool reported by the driver.  Without this the\nCapabilitiesFilter never sees the extra_capabilities.\nThis is also backwards compatible where drivers don't report pools,\nthe extra_capabilities are inserted correctly.\n\nCloses-Bug: #1937086\n\nChange-Id: I1f1830d8a7c0349861e9a74f92c9b9e04360a03b\n""}]",0,802956,0c8fe9269ea06051a0343994704ceeb8f0f7ef94,3,0,1,5997,,,0,"Fix extra_capabilities

This patch ensures that when pools are being reported that
the volume driver's configured extra_capabilities are inserted
into each pool reported by the driver.  Without this the
CapabilitiesFilter never sees the extra_capabilities.
This is also backwards compatible where drivers don't report pools,
the extra_capabilities are inserted correctly.

Closes-Bug: #1937086

Change-Id: I1f1830d8a7c0349861e9a74f92c9b9e04360a03b
",git fetch https://review.opendev.org/openstack/cinder refs/changes/56/802956/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/manager.py', 'cinder/tests/unit/volume/test_capabilities.py']",2,0c8fe9269ea06051a0343994704ceeb8f0f7ef94,bug/1937086, volume_stats['pools'][0]['key1']) volume_stats['pools'][0]['key2']), volume_stats['key1']) volume_stats['key2']),7,3
openstack%2Ftrove-dashboard~master~I81e00c25c7569fb6b114e2f66b71552f2d093c0b,openstack/trove-dashboard,master,I81e00c25c7569fb6b114e2f66b71552f2d093c0b,Fix the configuration issue,MERGED,2021-07-29 06:50:38.000000000,2021-07-30 00:49:08.000000000,2021-07-30 00:49:08.000000000,"[{'_account_id': 6732}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 06:50:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove-dashboard/commit/46f850c1aea323cc8bbff727a8b2f19c89ff442a', 'message': ""Fix the configuration issue\n\n* Remove ApplyChanges and DiscardChanges actions\n* Don't use cache when getting configuration\n* Config parameter is added and removed one by one. There is no API\n  to add or delete a specific parameter.\n\nStory: 2009084\nTask: 42901\n\nChange-Id: I81e00c25c7569fb6b114e2f66b71552f2d093c0b\n""}, {'number': 2, 'created': '2021-07-29 08:17:34.000000000', 'files': ['trove_dashboard/content/database_configurations/forms.py', 'trove_dashboard/content/database_configurations/templates/database_configurations/detail_param.html', 'trove_dashboard/content/database_configurations/config_param_manager.py', 'trove_dashboard/content/database_configurations/tests.py', 'trove_dashboard/content/database_configurations/tables.py'], 'web_link': 'https://opendev.org/openstack/trove-dashboard/commit/4225bafca20d67a14c41f996440fb413943b452e', 'message': ""Fix the configuration issue\n\n* Remove ApplyChanges and DiscardChanges actions\n* Don't use cache when getting configuration\n* Config parameter is added and removed one by one. There is no API\n  to add or delete a specific parameter.\n\nStory: 2009084\nTask: 42901\n\nChange-Id: I81e00c25c7569fb6b114e2f66b71552f2d093c0b\n""}]",0,802830,4225bafca20d67a14c41f996440fb413943b452e,12,2,2,6732,,,0,"Fix the configuration issue

* Remove ApplyChanges and DiscardChanges actions
* Don't use cache when getting configuration
* Config parameter is added and removed one by one. There is no API
  to add or delete a specific parameter.

Story: 2009084
Task: 42901

Change-Id: I81e00c25c7569fb6b114e2f66b71552f2d093c0b
",git fetch https://review.opendev.org/openstack/trove-dashboard refs/changes/30/802830/1 && git format-patch -1 --stdout FETCH_HEAD,"['trove_dashboard/content/database_configurations/forms.py', 'trove_dashboard/content/database_configurations/templates/database_configurations/detail_param.html', 'trove_dashboard/content/database_configurations/config_param_manager.py', 'trove_dashboard/content/database_configurations/tables.py']",4,46f850c1aea323cc8bbff727a8b2f19c89ff442a,fix-config,"from oslo_serialization import jsonutils def delete(self, request, names): if type(names) is not list: names = [names] configuration = api.trove.configuration_get(request, configuration_id) cur_values = dict.copy(configuration.values) for name in names: if name in cur_values: cur_values.pop(name) api.trove.configuration_update( request, configuration_id, jsonutils.dumps(cur_values)) table_actions = [AddParameter, DeleteParameter]"," def delete(self, request, obj_ids): (config_param_manager .get(request, configuration_id) .delete_param(obj_ids)) table_actions = [ApplyChanges, DiscardChanges, AddParameter, DeleteParameter]",31,15
openstack%2Fneutron~master~I22541d75e66fcbbae03d8493f2689e7d20d8a4b4,openstack/neutron,master,I22541d75e66fcbbae03d8493f2689e7d20d8a4b4,Modify `in_port` and `dl_vlan` fields of packets coming from remote `qr-*` ports,ABANDONED,2019-06-04 11:16:07.000000000,2021-07-30 00:42:23.000000000,,"[{'_account_id': 4187}, {'_account_id': 7016}, {'_account_id': 9531}, {'_account_id': 9732}, {'_account_id': 9845}, {'_account_id': 16376}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 28329}]","[{'number': 1, 'created': '2019-06-04 11:16:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/11f1c9f5dfaaea5662307e7b280dbc0401588b4a', 'message': ""Convert hardware vlan to local vlan when packets from remote dvr router\n\nCurrently, when the network type is vlan the packets' vlan don't convert\nto local vlan if the packets from remote dvr router. It will be OK if the\n`firewall_driver` is `iptables`, But, if the `firewall_driver` is\n`openvswitch`, these packets can't be resubmit to BASE_INGRESS(table 81).\n\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n""}, {'number': 2, 'created': '2019-06-04 11:31:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/699a8c971132b39338255c9986789363ef4c0ca0', 'message': ""Convert hardware vlan to local vlan when packets from remote dvr router\n\nCurrently, when the network type is vlan, the packets' vlan don't convert\nto local vlan if these packets from remote dvr router. It will be OK if the\n`firewall_driver` is `iptables`, But, if the `firewall_driver` is\n`openvswitch`, these packets can't be resubmit to BASE_INGRESS table(table 81),\nbecause of the `dl_vlan` don't match correct flows in TRANSIENT_TABLE(table 60).\n\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n""}, {'number': 3, 'created': '2019-06-04 12:08:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0d2d30c6786eb1fa6666e838bb148c03ec213f35', 'message': ""Convert hardware vlan to local vlan when packets from remote dvr router\n\nCurrently, when the network type is vlan, the packets' vlan don't convert\nto local vlan if these packets from remote dvr router. It will be OK if the\n`firewall_driver` is `iptables`, But, if the `firewall_driver` is\n`openvswitch`, these packets can't be resubmit to BASE_INGRESS table(table 81),\nbecause of the `dl_vlan` don't match correct flows in TRANSIENT_TABLE(table 60).\n\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n""}, {'number': 4, 'created': '2019-06-04 16:28:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/41e390215242308d42b12e071bce912fd2dd1337', 'message': ""Convert hardware vlan to local vlan when packets from remote dvr router\n\nCurrently, when the network type is vlan, the packets' vlan don't convert\nto local vlan if these packets from remote dvr router. It will be OK if the\n`firewall_driver` is `iptables`, But, if the `firewall_driver` is\n`openvswitch`, these packets can't be resubmit to BASE_INGRESS table(table 81),\nbecause of the `dl_vlan` don't match correct flows in TRANSIENT_TABLE(table 60).\n\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n""}, {'number': 5, 'created': '2019-06-10 09:38:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3b6931296241dfd7a2706dc23b75c2c4cf65fbe4', 'message': 'Improve flow tables about DVR in br-int\n\nCurrently, the flow tables only modify src MAC of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action. So, we must add some extra\nflows to solve it.\nFor example:\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand:\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `src MAC` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them wich `NORMAL` action. So that, we can simplify some flows\nand fix some bugs.\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 6, 'created': '2019-06-11 03:00:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/5c01b944f3802b47ac7d920460c6ab12ca555771', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug/1831706). So, we must add some extra flows to solve it.\nFor example (These flows will be deleted in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them wich `NORMAL` action. So that, we can simplify some flows\nand fix some bugs(bug/1831534).\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 7, 'created': '2019-06-11 11:09:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8b45d7752327e63b67aaa3315e03b5e20cd992c9', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug/1831706). So, we must add some extra flows to solve it.\nFor example (These flows will be deleted in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them wich `NORMAL` action. So that, we can simplify some flows\nand fix some bugs(bug/1831534).\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 8, 'created': '2019-06-14 07:16:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/403db6b3743634624b18c8dce2d546b1d76e7d91', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug/1831706). So, in order to avoid `NORMAL` action we need below flows(I\nthink we can simplify them).\nFor example:\n(These flows will be removed in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1\n  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2\n  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1\n  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them with `NORMAL` action. So that, we can simplify some flows\nand fix some bugs(bug/1831534).\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 9, 'created': '2019-06-14 11:21:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/128d44354bd4ca2f9e5efc976f3d6cfa455d5936', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug/1831706). So, in order to avoid `NORMAL` action we need below flows(I\nthink we can simplify them).\nFor example:\n(These flows will be removed in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1\n  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2\n  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1\n  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them with `NORMAL` action. So that, we can simplify some flows\nand fix some bugs(bug/1831534).\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 10, 'created': '2019-06-15 07:55:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/98080137746d181d9eb5ef3dc363125a49564d93', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug/1831706). So, in order to avoid `NORMAL` action we need below flows(I\nthink we can simplify them).\nFor example:\n(These flows will be removed in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1\n  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2\n  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1\n  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them with `NORMAL` action. So that, we can simplify some flows\nand fix some bugs(bug/1831534).\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 11, 'created': '2019-06-16 07:11:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/2911e4e336a68478d28e78c6038dce93232f6ec5', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug/1831706). So, in order to avoid `NORMAL` action we need below flows(I\nthink we can simplify them).\nFor example:\n(These flows will be removed in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1\n  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2\n  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1\n  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them with `NORMAL` action. So that, we can simplify some flows\nand fix some bugs(bug/1831534).\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 12, 'created': '2019-06-17 11:23:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1de1d77845cf87d600beac708bdd9af6fa2600c5', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug/1831706). So, in order to avoid `NORMAL` action we need below flows(I\nthink we can simplify them).\nFor example:\n(These flows will be removed in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1\n  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2\n  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1\n  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets,\nand strip VLAN tag of these packets, by these processes these packets\nwill fully similar with packets that from local qr-*, we can securely\nprocessed them with `NORMAL` action. So that, we can simplify some flows\nand fix some bugs(bug/1831534).\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 13, 'created': '2019-06-18 11:50:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/eaf62e90dbfb30cccd97809b95facfb7feea23c3', 'message': 'Modify `in_port` and `dl_vlan` fields of packets which from remote `qr-*` ports\n\nThis patch aim to make the packets which from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of patckets which\nfrom remote qr-* port, this way will result in these packets mustn\'t\nbe processed by ovs flow `NORMAL` action(The reason is explained in\nbug 1831706). So, in order to avoid `NORMAL` action we need below flows(I\nthink we can simplify them).\nFor example:\n(These flows will be removed in this patch.):\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand (These flows will be improved in patch[1]):\n  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1\n  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2\n  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1\n  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of these packets, and\nstrip VLAN tag of these packets. Through these modifications, we can\nmake the packets coming from the remote qr-* port and the packets coming\nfrom local qr-* port fully similar. This will make we can process them\nwith `NORMAL` action securely.\n\nOther more things, this patch fixed the bug 1831534 and resolved the\nbreaking issue of DVR east/west traffic in patch[1]. Further on, I want\nto simplify some flows about openvswitch firewall driver[2], the patch[2]\ndepends on patch[1]\n\n[1] https://review.opendev.org/#/c/639009/\n[2] https://review.opendev.org/#/c/665647/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}, {'number': 14, 'created': '2019-06-19 11:46:45.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/functional/agent/test_ovs_flows.py', 'neutron/plugins/ml2/drivers/openvswitch/agent/ovs_dvr_neutron_agent.py', 'neutron/agent/rpc.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/openflow/native/ovs_bridge_test_base.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/openflow/native/test_br_int.py', 'neutron/plugins/ml2/drivers/openvswitch/agent/openflow/native/br_int.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/9b570c39ffb74d7796d31f905d42a9e5ba221c02', 'message': 'Modify `in_port` and `dl_vlan` fields of packets coming from remote `qr-*` ports\n\nThis patch aims to make the packets coming in from remote `qr-*` ports\ncan be processed by `NORMAL` action.\n\nCurrently, the flow tables only modify `dl_src` field of packets\nwhich come from remote qr-* port, as a result of this, these packets\nmustn\'t be processed by ovs flow `NORMAL` action(The reason is\nexplained in bug 1831706). So, in order to avoid `NORMAL` action we\nneed the flows below(I think we can simplify them).\nFor example:\n  (These flows will be removed in this patch, they result in bug 1831534.)\n  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""\n  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""\nand:\n  (These flows will be improved in patch[1]):\n  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1\n  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2\n  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1\n  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1\n  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2\n\nThis patch modifies both `dl_src` and `in_port` of packets which come\nfrom remote qr-* port, and strip VLAN tag of these packets. Through\nthese modifications, we can make the packets coming from the remote\nqr-* port and the packets coming from local qr-* port fully similar.\nThis change will make sure that we can process them with `NORMAL` action\nsecurely. So, base on this patch the breaking issue of DVR east/west\ntraffic in patch[1] will be resolved.\n\n[1] https://review.opendev.org/#/c/639009/\n\nCloses-Bug: #1831706\nCloses-Bug: #1831534\nChange-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4\n'}]",39,663008,9b570c39ffb74d7796d31f905d42a9e5ba221c02,90,10,14,28329,,,0,"Modify `in_port` and `dl_vlan` fields of packets coming from remote `qr-*` ports

This patch aims to make the packets coming in from remote `qr-*` ports
can be processed by `NORMAL` action.

Currently, the flow tables only modify `dl_src` field of packets
which come from remote qr-* port, as a result of this, these packets
mustn't be processed by ovs flow `NORMAL` action(The reason is
explained in bug 1831706). So, in order to avoid `NORMAL` action we
need the flows below(I think we can simplify them).
For example:
  (These flows will be removed in this patch, they result in bug 1831534.)
  table=60, priority=4,dl_vlan=288,dl_dst=fa:16:3e:2d:d7:85 actions=strip_vlan,output:""tap0500d7e2-87""
  table=60, priority=4,dl_vlan=203,dl_dst=fa:16:3e:8f:88:bc actions=strip_vlan,output:""tap2610c99a-52""
and:
  (These flows will be improved in patch[1]):
  table=81, priority=100,arp,reg5=0x1 actions=strip_vlan,output:1
  table=81, priority=100,arp,reg5=0x2 actions=strip_vlan,output:2
  table=81, priority=100,icmp6,reg5=0x1,icmp_type=130 actions=strip_vlan,output:1
  table=81, priority=100,icmp6,reg5=0x2,icmp_type=130 actions=strip_vlan,output:2
  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x1 actions=strip_vlan,output:1
  table=82, priority=50,ct_state=+est-rel+rpl,ct_zone=644,ct_mark=0,reg5=0x2 actions=strip_vlan,output:2

This patch modifies both `dl_src` and `in_port` of packets which come
from remote qr-* port, and strip VLAN tag of these packets. Through
these modifications, we can make the packets coming from the remote
qr-* port and the packets coming from local qr-* port fully similar.
This change will make sure that we can process them with `NORMAL` action
securely. So, base on this patch the breaking issue of DVR east/west
traffic in patch[1] will be resolved.

[1] https://review.opendev.org/#/c/639009/

Closes-Bug: #1831706
Closes-Bug: #1831534
Change-Id: I22541d75e66fcbbae03d8493f2689e7d20d8a4b4
",git fetch https://review.opendev.org/openstack/neutron refs/changes/08/663008/9 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_dvr_neutron_agent.py', 'neutron/plugins/ml2/drivers/openvswitch/agent/openflow/native/br_int.py']",2,11f1c9f5dfaaea5662307e7b280dbc0401588b4a,bug/1831706," ofpp.OFPActionSetField(vlan_vid=vlan_tag | ofp.OFPVID_PRESENT),",,1,6
openstack%2Fosc-lib~master~I639066169913072b992c0e1073f9398d6ac8cdd2,openstack/osc-lib,master,I639066169913072b992c0e1073f9398d6ac8cdd2,Correct the tox option for skipping sdist generation,MERGED,2021-06-17 17:04:47.000000000,2021-07-30 00:17:09.000000000,2021-07-30 00:15:54.000000000,"[{'_account_id': 5263}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-17 17:04:47.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/osc-lib/commit/e3f58c1f99695d73e34dad69df9f5fc4f39da551', 'message': 'Correct the tox option for skipping sdist generation\n\nThe tox option to skip source distribution building is skipsdist,\nbut this seems to be often misspelled skipdist instead, which gets\nsilently ignored and so does not take effect. Correct it\neverywhere, in hopes that new projects will finally stop copying\nthis mistake around.\n\nSee https://tox.readthedocs.io/en/latest/config.html#conf-skipsdist\nand https://github.com/tox-dev/tox/issues/1388 for details.\n\nChange-Id: I639066169913072b992c0e1073f9398d6ac8cdd2\n'}]",0,796910,e3f58c1f99695d73e34dad69df9f5fc4f39da551,7,2,1,5263,,,0,"Correct the tox option for skipping sdist generation

The tox option to skip source distribution building is skipsdist,
but this seems to be often misspelled skipdist instead, which gets
silently ignored and so does not take effect. Correct it
everywhere, in hopes that new projects will finally stop copying
this mistake around.

See https://tox.readthedocs.io/en/latest/config.html#conf-skipsdist
and https://github.com/tox-dev/tox/issues/1388 for details.

Change-Id: I639066169913072b992c0e1073f9398d6ac8cdd2
",git fetch https://review.opendev.org/openstack/osc-lib refs/changes/10/796910/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,e3f58c1f99695d73e34dad69df9f5fc4f39da551,tox-skipsdist,skipsdist = True,skipdist = True,1,1
openstack%2Fironic~stable%2Fussuri~I03fdb48e47c9557c207a20ee876eccf3f3459d9f,openstack/ironic,stable/ussuri,I03fdb48e47c9557c207a20ee876eccf3f3459d9f,Refactor iDRAC OEM extension manager calls,MERGED,2021-06-09 11:59:07.000000000,2021-07-30 00:16:12.000000000,2021-07-30 00:14:12.000000000,"[{'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-06-09 11:59:07.000000000', 'files': ['ironic/tests/unit/drivers/modules/drac/test_utils.py', 'ironic/drivers/modules/drac/boot.py', 'ironic/tests/unit/drivers/modules/drac/test_boot.py', 'ironic/drivers/modules/drac/utils.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/de714f4cce1c7cadc6d123934bc468e7da00b379', 'message': 'Refactor iDRAC OEM extension manager calls\n\n- Re-usable helper created to avoid duplication.\n- Although there is only one manager for system in known iDRAC systems\nstill iterate through collection for future changes.\n- Restructured exception raising and error logging for better feedback.\n- Removed some unit tests to avoid duplication that is covered by\nmethod specific unit tests\n\n(cherry picked from commit 39cd751a9063ae04e1649ccbca5496c3754d706e)\n\nConflicts:\n\tironic/tests/unit/drivers/modules/drac/test_boot.py\n\nChange-Id: I03fdb48e47c9557c207a20ee876eccf3f3459d9f\n'}]",0,795524,de714f4cce1c7cadc6d123934bc468e7da00b379,17,4,1,27909,,,0,"Refactor iDRAC OEM extension manager calls

- Re-usable helper created to avoid duplication.
- Although there is only one manager for system in known iDRAC systems
still iterate through collection for future changes.
- Restructured exception raising and error logging for better feedback.
- Removed some unit tests to avoid duplication that is covered by
method specific unit tests

(cherry picked from commit 39cd751a9063ae04e1649ccbca5496c3754d706e)

Conflicts:
	ironic/tests/unit/drivers/modules/drac/test_boot.py

Change-Id: I03fdb48e47c9557c207a20ee876eccf3f3459d9f
",git fetch https://review.opendev.org/openstack/ironic refs/changes/24/795524/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/tests/unit/drivers/modules/drac/test_utils.py', 'ironic/drivers/modules/drac/boot.py', 'ironic/tests/unit/drivers/modules/drac/test_boot.py', 'ironic/drivers/modules/drac/utils.py']",4,de714f4cce1c7cadc6d123934bc468e7da00b379,,"# Copyright (c) 2021 Dell Inc. or its subsidiaries. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from oslo_log import log from oslo_utils import importutils from ironic.common import exception from ironic.drivers.modules.redfish import utils as redfish_utils LOG = log.getLogger(__name__) sushy = importutils.try_import('sushy') def execute_oem_manager_method( task, process_name, lambda_oem_func, pass_manager=False): """"""Loads OEM manager and executes passed method on it. Known iDRAC Redfish systems has only one manager, but as Redfish schema allows a list this method iterates through all values in case this changes in future. If there are several managers, this will try starting from the first in the list until the first success. :param task: a TaskManager instance. :param process_name: user friendly name of method to be executed. Used in exception and log messages. :param lambda_oem_func: method to execute as lambda function with input parameter OEM extension manager. Example: lambda m: m.reset_idrac() For older versions also support second input parameter Redfish manager itself when pass_manager set to True. :param pass_manager: whether to pass manager itself to executed OEM extension method. This is for backward compability, new functions must not pass manager, but acquire it internally. Will be removed in future. :returns: Returned value of lambda_oem_func :raises: RedfishError if can't execute OEM function either because there are no managers to the system, failed to load OEM extension or execution of the OEM method failed itself. """""" system = redfish_utils.get_system(task.node) if not system.managers: raise exception.RedfishError( ""System %(system)s has no managers"" % {'system': system.uuid if system.uuid else system.identity}) oem_error_msgs = [] for manager in system.managers: # This call makes Sushy go fishing in the ocean of Sushy # OEM extensions installed on the system. If it finds one # for 'Dell' which implements the 'Manager' resource # extension, it uses it to create an object which # instantiates itself from the OEM JSON. The object is # returned here. # # If the extension could not be found for one manager, it # will not be found for any others until it is installed, so # abruptly exit the for loop. The vendor and resource name, # 'Dell' and 'Manager', respectively, used to search for the # extension are invariant in the loop. try: manager_oem = manager.get_oem_extension('Dell') except sushy.exceptions.OEMExtensionNotFoundError as e: error_msg = (_(""Search for Sushy OEM extension Python package "" ""'sushy-oem-idrac' failed for node %(node)s. "" ""Ensure it is installed. Error: %(error)s"") % {'node': task.node.uuid, 'error': e}) LOG.error(error_msg) raise exception.RedfishError(error=error_msg) try: if pass_manager: result = lambda_oem_func(manager_oem, manager) else: result = lambda_oem_func(manager_oem) LOG.info(""Completed: %(process_name)s with system %(system)s "" ""manager %(manager)s for node %(node)s"", {'process_name': process_name, 'system': system.uuid if system.uuid else system.identity, 'manager': manager.uuid if manager.uuid else manager.identity, 'node': task.node.uuid}) return result except sushy.exceptions.SushyError as e: error_msg = (_(""Manager %(manager)s: %(error)s"" % {'manager': manager.uuid if manager.uuid else manager.identity, 'error': e})) LOG.debug(""Failed: %(process_name)s with system %(system)s "" ""for node %(node)s. Will try next manager, if "" ""available. Error: %(error)s"", {'process_name': process_name, 'system': system.uuid if system.uuid else system.identity, 'node': task.node.uuid, 'error': error_msg}) oem_error_msgs.append(error_msg) else: error_msg = (_('In system %(system)s for node %(node)s all managers ' 'failed: %(process_name)s. Errors: %(oem_error_msgs)s' % {'system': system.uuid if system.uuid else system.identity, 'node': task.node.uuid, 'process_name': process_name, 'oem_error_msgs': oem_error_msgs if oem_error_msgs else 'unknown'})) LOG.error(error_msg) raise exception.RedfishError(error=error_msg) ",,242,145
openstack%2Fdevstack~master~I10d868aca20d1a10d3e7fcfeb78f6fda4c896ee8,openstack/devstack,master,I10d868aca20d1a10d3e7fcfeb78f6fda4c896ee8,Switch fedora-latest to use fedora-34,MERGED,2021-06-09 18:20:15.000000000,2021-07-29 23:52:50.000000000,2021-07-29 23:49:31.000000000,"[{'_account_id': 4146}, {'_account_id': 7118}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-06-09 18:20:15.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/devstack/commit/20d6a21e8a1daed9eee0a8413217b2f8e4e863dd', 'message': 'Switch fedora-latest to use fedora-34\n\nFedora 32 is now EOL, we should test against the newly released\nversion of Fedora which is 34.\n\nDepends-On: https://review.opendev.org/c/openstack/project-config/+/795604\nChange-Id: I10d868aca20d1a10d3e7fcfeb78f6fda4c896ee8\n'}]",0,795640,20d6a21e8a1daed9eee0a8413217b2f8e4e863dd,21,4,1,1004,,,0,"Switch fedora-latest to use fedora-34

Fedora 32 is now EOL, we should test against the newly released
version of Fedora which is 34.

Depends-On: https://review.opendev.org/c/openstack/project-config/+/795604
Change-Id: I10d868aca20d1a10d3e7fcfeb78f6fda4c896ee8
",git fetch https://review.opendev.org/openstack/devstack refs/changes/40/795640/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,20d6a21e8a1daed9eee0a8413217b2f8e4e863dd,, label: fedora-34, label: fedora-32,1,1
openstack%2Fcharm-designate~master~I5e7c1e462dcf9ea30b5dbdd41bbcf0407199fc8e,openstack/charm-designate,master,I5e7c1e462dcf9ea30b5dbdd41bbcf0407199fc8e,Add Infoblox support,NEW,2020-11-10 15:06:37.000000000,2021-07-29 22:29:21.000000000,,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-11-10 15:06:37.000000000', 'files': ['src/config.yaml', 'src/templates/rocky/pools.yaml', 'unit_tests/test_designate_handlers.py', 'src/lib/charm/openstack/designate.py', 'src/templates/mitaka/pools.yaml', 'src/reactive/designate_handlers.py'], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/39eb6bb964f62495b24b5505213e555ea0e05426', 'message': 'Add Infoblox support\n\nCloses-Bug: 1711633\n\n- Add infoblox-options config option\n- Add DNAT rule routing incoming dns traffic to designate-mdns as\n  required by infoblox\n\nChange-Id: I5e7c1e462dcf9ea30b5dbdd41bbcf0407199fc8e\n'}]",2,762157,39eb6bb964f62495b24b5505213e555ea0e05426,4,3,1,31255,,,0,"Add Infoblox support

Closes-Bug: 1711633

- Add infoblox-options config option
- Add DNAT rule routing incoming dns traffic to designate-mdns as
  required by infoblox

Change-Id: I5e7c1e462dcf9ea30b5dbdd41bbcf0407199fc8e
",git fetch https://review.opendev.org/openstack/charm-designate refs/changes/57/762157/1 && git format-patch -1 --stdout FETCH_HEAD,"['src/config.yaml', 'src/templates/rocky/pools.yaml', 'src/lib/charm/openstack/designate.py', 'unit_tests/test_designate_handlers.py', 'src/reactive/designate_handlers.py', 'src/templates/mitaka/pools.yaml']",6,39eb6bb964f62495b24b5505213e555ea0e05426,infoblox,"{% if options.infoblox_pool_config %} {% for slave in options.infoblox_pool_config %} - host: {{ slave.address }} port: 53 {% endfor %} {% endif %}{% if options.infoblox_pool_config %} {% for slave in options.infoblox_pool_config %} - type: infoblox masters: {% for rndc_master_ip in cluster.internal_addresses %} - host: {{ rndc_master_ip }} port: 53 {% endfor %} options: host: {{ options.infoblox_opts[""host""] }} port: {{ options.infoblox_opts[""port""] or 53 }} http_pool_maxsize: {{ options.infoblox_opts[""http_pool_maxsize""] or 100 }} http_pool_connections: {{ options.infoblox_opts[""http_pool_connections""] or 100 }} wapi_url: {{ options.infoblox_opts[""wapi_url""] }} sslverify: {{ options.infoblox_opts[""sslverify""] or ""true"" }} username: {{ options.infoblox_opts[""username""] }} password: {{ options.infoblox_opts[""password""] }} multi_tenant: {{ options.infoblox_opts[""multi_tenant""] or ""false"" }} dns_view: {{ options.infoblox_opts[""dns_view""] or ""default"" }} network_view: {{ options.infoblox_opts[""network_view""] or ""default"" }} ns_group: {{ options.infoblox_opts[""ns_group""] }} {% endfor %} {% endif %}{% elif options.infoblox_pool_config %} also_notifies: - host: {{ options.infoblox_opts[""host""] }} port: {{ options.infoblox_opts[""port""] or 53 }}# Workaround for https://bugs.launchpad.net/designate/+bug/1758013",# Workaround for https://bugs.launchpad.net/designate/+bug/1758013,203,11
openstack%2Foctavia~master~I8020ed9299b4dd39f943ce4768bcea44ef64c0e6,openstack/octavia,master,I8020ed9299b4dd39f943ce4768bcea44ef64c0e6,Replace md5 with oslo version,NEW,2020-10-30 13:24:43.000000000,2021-07-29 22:24:47.000000000,,"[{'_account_id': 22348}, {'_account_id': 29157}]","[{'number': 1, 'created': '2020-10-30 13:24:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/239c6ab0e9ccbed3f48371f389eda11fb90893ba', 'message': 'Replace md5 with oslo version\n\nmd5 is not an approved algorithm in FIPS mode, and trying to\ninstantiate a hashlib.md5() will fail when the system is running in\nFIPS mode.\n\nmd5 is allowed when in a non-security context.  There is a plan to\nadd a keyword parameter (usedforsecurity) to hashlib.md5() to annotate\nwhether or not the instance is being used in a security context.\n\nIn the case where it is not, the instantiation of md5 will be allowed.\nSee https://bugs.python.org/issue9216 for more details.\n\nSome downstream python versions already support this parameter.  To\nsupport these versions, a new encapsulation of md5() has been added to\noslo_utils.  See https://review.opendev.org/#/c/750031/\n\nThis patch is to replace the instances of hashlib.md5() with this new\nencapsulation, adding an annotation indicating whether the usage is\na security context or not.\n\nDepends-On: https://review.opendev.org/#/c/760160\nChange-Id: I8020ed9299b4dd39f943ce4768bcea44ef64c0e6\n'}, {'number': 2, 'created': '2020-10-30 13:28:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/ef1d0e694722bd299ef5be94787adfb887ff6eee', 'message': 'Replace md5 with oslo version\n\nmd5 is not an approved algorithm in FIPS mode, and trying to\ninstantiate a hashlib.md5() will fail when the system is running in\nFIPS mode.\n\nmd5 is allowed when in a non-security context.  There is a plan to\nadd a keyword parameter (usedforsecurity) to hashlib.md5() to annotate\nwhether or not the instance is being used in a security context.\n\nIn the case where it is not, the instantiation of md5 will be allowed.\nSee https://bugs.python.org/issue9216 for more details.\n\nSome downstream python versions already support this parameter.  To\nsupport these versions, a new encapsulation of md5() has been added to\noslo_utils.  See https://review.opendev.org/#/c/750031/\n\nThis patch is to replace the instances of hashlib.md5() with this new\nencapsulation, adding an annotation indicating whether the usage is\na security context or not.\n\nDepends-On: https://review.opendev.org/#/c/760160\nChange-Id: I8020ed9299b4dd39f943ce4768bcea44ef64c0e6\n'}, {'number': 3, 'created': '2020-10-30 16:45:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/04587d0f4176be7788078b2ca5c55d95aaa81d46', 'message': 'Replace md5 with oslo version\n\nmd5 is not an approved algorithm in FIPS mode, and trying to\ninstantiate a hashlib.md5() will fail when the system is running in\nFIPS mode.\n\nmd5 is allowed when in a non-security context.  There is a plan to\nadd a keyword parameter (usedforsecurity) to hashlib.md5() to annotate\nwhether or not the instance is being used in a security context.\n\nIn the case where it is not, the instantiation of md5 will be allowed.\nSee https://bugs.python.org/issue9216 for more details.\n\nSome downstream python versions already support this parameter.  To\nsupport these versions, a new encapsulation of md5() has been added to\noslo_utils.  See https://review.opendev.org/#/c/750031/\n\nThis patch is to replace the instances of hashlib.md5() with this new\nencapsulation, adding an annotation indicating whether the usage is\na security context or not.\n\nDepends-On: https://review.opendev.org/#/c/760160\nChange-Id: I8020ed9299b4dd39f943ce4768bcea44ef64c0e6\n'}, {'number': 4, 'created': '2020-10-31 09:07:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/0f920aa1fe524cc03d3ea5bdcb01c4e6ab399d23', 'message': 'Replace md5 with oslo version\n\nmd5 is not an approved algorithm in FIPS mode, and trying to\ninstantiate a hashlib.md5() will fail when the system is running in\nFIPS mode.\n\nmd5 is allowed when in a non-security context.  There is a plan to\nadd a keyword parameter (usedforsecurity) to hashlib.md5() to annotate\nwhether or not the instance is being used in a security context.\n\nIn the case where it is not, the instantiation of md5 will be allowed.\nSee https://bugs.python.org/issue9216 for more details.\n\nSome downstream python versions already support this parameter.  To\nsupport these versions, a new encapsulation of md5() has been added to\noslo_utils.  See https://review.opendev.org/#/c/750031/\n\nThis patch is to replace the instances of hashlib.md5() with this new\nencapsulation, adding an annotation indicating whether the usage is\na security context or not.\n\nDepends-On: https://review.opendev.org/#/c/760160\nChange-Id: I8020ed9299b4dd39f943ce4768bcea44ef64c0e6\n'}, {'number': 5, 'created': '2020-10-31 09:10:46.000000000', 'files': ['octavia/amphorae/backends/agent/api_server/loadbalancer.py', 'requirements.txt', 'octavia/tests/unit/amphorae/drivers/haproxy/test_rest_api_driver_0_5.py', 'lower-constraints.txt', 'octavia/amphorae/drivers/haproxy/rest_api_driver.py', 'octavia/tests/functional/amphorae/backend/agent/api_server/test_server.py', 'octavia/tests/unit/amphorae/drivers/haproxy/test_rest_api_driver_1_0.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/8addd38724d33b91855fe17e971c4d9b679fd1dd', 'message': 'Replace md5 with oslo version\n\nmd5 is not an approved algorithm in FIPS mode, and trying to\ninstantiate a hashlib.md5() will fail when the system is running in\nFIPS mode.\n\nmd5 is allowed when in a non-security context.  There is a plan to\nadd a keyword parameter (usedforsecurity) to hashlib.md5() to annotate\nwhether or not the instance is being used in a security context.\n\nIn the case where it is not, the instantiation of md5 will be allowed.\nSee https://bugs.python.org/issue9216 for more details.\n\nSome downstream python versions already support this parameter.  To\nsupport these versions, a new encapsulation of md5() has been added to\noslo_utils.  See https://review.opendev.org/#/c/750031/\n\nThis patch is to replace the instances of hashlib.md5() with this new\nencapsulation, adding an annotation indicating whether the usage is\na security context or not.\n\nDepends-On: https://review.opendev.org/#/c/760160\nChange-Id: I8020ed9299b4dd39f943ce4768bcea44ef64c0e6\n'}]",7,760552,8addd38724d33b91855fe17e971c4d9b679fd1dd,11,2,5,29157,,,0,"Replace md5 with oslo version

md5 is not an approved algorithm in FIPS mode, and trying to
instantiate a hashlib.md5() will fail when the system is running in
FIPS mode.

md5 is allowed when in a non-security context.  There is a plan to
add a keyword parameter (usedforsecurity) to hashlib.md5() to annotate
whether or not the instance is being used in a security context.

In the case where it is not, the instantiation of md5 will be allowed.
See https://bugs.python.org/issue9216 for more details.

Some downstream python versions already support this parameter.  To
support these versions, a new encapsulation of md5() has been added to
oslo_utils.  See https://review.opendev.org/#/c/750031/

This patch is to replace the instances of hashlib.md5() with this new
encapsulation, adding an annotation indicating whether the usage is
a security context or not.

Depends-On: https://review.opendev.org/#/c/760160
Change-Id: I8020ed9299b4dd39f943ce4768bcea44ef64c0e6
",git fetch https://review.opendev.org/openstack/octavia refs/changes/52/760552/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia/amphorae/backends/agent/api_server/loadbalancer.py', 'requirements.txt', 'octavia/tests/unit/amphorae/drivers/haproxy/test_rest_api_driver_0_5.py', 'lower-constraints.txt', 'octavia/amphorae/drivers/haproxy/rest_api_driver.py', 'octavia/tests/functional/amphorae/backend/agent/api_server/test_server.py', 'octavia/tests/unit/amphorae/drivers/haproxy/test_rest_api_driver_1_0.py']",7,239c6ab0e9ccbed3f48371f389eda11fb90893ba,,"from oslo_utils.secretutils import md5 ref_md5 = md5(fake_secret, usedforsecurity=False).hexdigest() ref_md5 = md5(fake_pem, usedforsecurity=False).hexdigest()", ref_md5 = hashlib.md5(fake_secret).hexdigest() # nosec ref_md5 = hashlib.md5(fake_pem).hexdigest() # nosec,21,17
openstack%2Foctavia-tempest-plugin~master~I0b235fbcb12f2a7a0d7457101bf7ed0b9804a4b3,openstack/octavia-tempest-plugin,master,I0b235fbcb12f2a7a0d7457101bf7ed0b9804a4b3,Clean up port member selection code,NEW,2020-10-23 07:19:39.000000000,2021-07-29 22:24:30.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-10-23 07:19:39.000000000', 'files': ['octavia_tempest_plugin/tests/scenario/v2/test_member.py', 'octavia_tempest_plugin/tests/api/v2/test_member.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/bf291bc837bf95b3a78a8cff062517d3c54923a4', 'message': 'Clean up port member selection code\n\nUse MemberPort singleton to get a unique port number\n\nChange-Id: I0b235fbcb12f2a7a0d7457101bf7ed0b9804a4b3\n'}]",0,759358,bf291bc837bf95b3a78a8cff062517d3c54923a4,3,1,1,29244,,,0,"Clean up port member selection code

Use MemberPort singleton to get a unique port number

Change-Id: I0b235fbcb12f2a7a0d7457101bf7ed0b9804a4b3
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/58/759358/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia_tempest_plugin/tests/scenario/v2/test_member.py', 'octavia_tempest_plugin/tests/api/v2/test_member.py']",2,bf291bc837bf95b3a78a8cff062517d3c54923a4,," const.PROTOCOL_PORT: cls.member_port.increment(),"," cls.current_listener_port = 8000 const.PROTOCOL_PORT: cls.current_listener_port, cls.current_listener_port += 1",2,6
openstack%2Foctavia-tempest-plugin~master~I2fd55d0328e567e03a43a1bc8581e47a76f4cd07,openstack/octavia-tempest-plugin,master,I2fd55d0328e567e03a43a1bc8581e47a76f4cd07,Add traffic_requests configuration option,NEW,2020-09-25 13:15:45.000000000,2021-07-29 22:24:11.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-09-25 13:15:45.000000000', 'files': ['octavia_tempest_plugin/tests/scenario/v2/test_ipv6_traffic_ops.py', 'octavia_tempest_plugin/tests/scenario/v2/test_traffic_ops.py', 'octavia_tempest_plugin/config.py', 'octavia_tempest_plugin/tests/validators.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/9984e55a147a08ca5b796cd8d7885c9feb2fddf0', 'message': 'Add traffic_requests configuration option\n\nThe test coverage matrix has recently exploded from a few dozens of\ntests to hundreds. Many of the tests send up to 20 traffic requests to\nmembers and load balancers to check consistency of responses. The number\nof requests is not tunable (harcoded), and now with hundreds of tests\ntakes CI jobs a very long time to run the full test suite.\n\nThis patch adds a new configuration option to allow tunning the number\nof traffic requests to members and load balancer VIPs. The default\nnumber is 4.\n\nChange-Id: I2fd55d0328e567e03a43a1bc8581e47a76f4cd07\n'}]",0,754386,9984e55a147a08ca5b796cd8d7885c9feb2fddf0,3,1,1,6469,,,0,"Add traffic_requests configuration option

The test coverage matrix has recently exploded from a few dozens of
tests to hundreds. Many of the tests send up to 20 traffic requests to
members and load balancers to check consistency of responses. The number
of requests is not tunable (harcoded), and now with hundreds of tests
takes CI jobs a very long time to run the full test suite.

This patch adds a new configuration option to allow tunning the number
of traffic requests to members and load balancer VIPs. The default
number is 4.

Change-Id: I2fd55d0328e567e03a43a1bc8581e47a76f4cd07
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/86/754386/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia_tempest_plugin/tests/scenario/v2/test_ipv6_traffic_ops.py', 'octavia_tempest_plugin/tests/scenario/v2/test_traffic_ops.py', 'octavia_tempest_plugin/config.py', 'octavia_tempest_plugin/tests/validators.py']",4,9984e55a147a08ca5b796cd8d7885c9feb2fddf0,," HTTPS_verify=True, protocol_port=80, persistent=True, repeat=CONF.load_balancer.traffic_requests, client_cert_path=None, CA_certs_path=None, request_interval=2, request_timeout=10, source_port=None, delay=None): def assertConsistentResponse(self, response, url, method='GET', repeat=CONF.load_balancer.traffic_requests,"," HTTPS_verify=True, protocol_port=80, persistent=True, repeat=20, client_cert_path=None, CA_certs_path=None, request_interval=2, request_timeout=10, source_port=None, delay=None): def assertConsistentResponse(self, response, url, method='GET', repeat=10,",11,6
openstack%2Fpython-octaviaclient~master~Id51f4998a30d02f94dc3754025f4fe91d7344acf,openstack/python-octaviaclient,master,Id51f4998a30d02f94dc3754025f4fe91d7344acf,add --all argument to stats show command,NEW,2020-03-04 16:32:52.000000000,2021-07-29 22:23:50.000000000,,"[{'_account_id': 136}, {'_account_id': 6469}, {'_account_id': 7160}, {'_account_id': 9995}, {'_account_id': 10068}, {'_account_id': 10273}, {'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 31016}, {'_account_id': 31414}]","[{'number': 1, 'created': '2020-03-04 16:32:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-octaviaclient/commit/0aa89d4d5e660b364b61a9f3dd64ad13889bd205', 'message': 'add --all argument to stats show command\n\nChange-Id: Id51f4998a30d02f94dc3754025f4fe91d7344acf\nStory: 38936\nSigned-off-by: Hamza Zafar <hamza.zafar@cern.ch>\n'}, {'number': 2, 'created': '2020-03-04 16:37:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-octaviaclient/commit/f33667a2be15b7701b664ee3bfa1f2797d9240eb', 'message': 'add --all argument to stats show command\n\nChange-Id: Id51f4998a30d02f94dc3754025f4fe91d7344acf\nStory: 2007372\nSigned-off-by: Hamza Zafar <hamza.zafar@cern.ch>\n'}, {'number': 3, 'created': '2020-03-04 19:06:22.000000000', 'files': ['octaviaclient/osc/v2/load_balancer.py', 'octaviaclient/tests/unit/osc/v2/test_load_balancer.py'], 'web_link': 'https://opendev.org/openstack/python-octaviaclient/commit/426467ccd2fe39b9de88d2bc53dde34b4ee257d6', 'message': 'add --all argument to stats show command\n\nChange-Id: Id51f4998a30d02f94dc3754025f4fe91d7344acf\nStory: 2007372\nSigned-off-by: Hamza Zafar <hamza.zafar@cern.ch>\n'}]",0,711270,426467ccd2fe39b9de88d2bc53dde34b4ee257d6,14,10,3,31414,,,0,"add --all argument to stats show command

Change-Id: Id51f4998a30d02f94dc3754025f4fe91d7344acf
Story: 2007372
Signed-off-by: Hamza Zafar <hamza.zafar@cern.ch>
",git fetch https://review.opendev.org/openstack/python-octaviaclient refs/changes/70/711270/1 && git format-patch -1 --stdout FETCH_HEAD,"['octaviaclient/osc/v2/load_balancer.py', 'octaviaclient/tests/unit/osc/v2/test_load_balancer.py']",2,0aa89d4d5e660b364b61a9f3dd64ad13889bd205,add_ALL_argument_to_stats_show_command," self.default_rows = copy.deepcopy(constants.LOAD_BALANCER_STATS_ROWS) self.additional_rows = ('session_limit', 'session_rate_limit') self.rows = self.default_rows + self.additional_rows stats = {stat:0 for stat in self.rows} self.api_mock.load_balancer_stats_show.return_value = { 'stats': stats} rows, data = self.cmd.take_action(parsed_args) self.assertEqual(sorted(self.default_rows), sorted(tuple(rows))) def test_load_balancer_stats_all_show(self): arglist = [self._lb.id, '--all'] verifylist = [ ('loadbalancer', self._lb.id), ('all', True), ] parsed_args = self.check_parser(self.cmd, arglist, verifylist) rows, data = self.cmd.take_action(parsed_args) self.assertEqual(sorted(self.rows), sorted(tuple(rows)))", lb_stats_info = {'stats': {'bytes_in': '0'}} self.api_mock.load_balancer_stats_show.return_value = { 'stats': lb_stats_info['stats']} self.cmd.take_action(parsed_args),30,3
openstack%2Fneutron~master~If08909dfbb841ad941e6aaea0990e9e98354e3d9,openstack/neutron,master,If08909dfbb841ad941e6aaea0990e9e98354e3d9,[OVN] Remove DNS dependency on original port dict,NEW,2020-02-29 10:49:11.000000000,2021-07-29 22:23:12.000000000,,"[{'_account_id': 5756}, {'_account_id': 6773}, {'_account_id': 8655}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 26622}, {'_account_id': 29157}, {'_account_id': 29874}]","[{'number': 1, 'created': '2020-02-29 10:49:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/999a11d7196d8832264e117873766dcafeed5e09', 'message': ""[OVN] Remove DNS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current DNS dependency\non it needs to be resolved first. The 'dns_domain' is stored in the\n'external_ids' of the logical switch. The 'dns_name' and 'dns_assignment'\nare stored in the 'external_ids' of the logical switch port.\n\nChange-Id: If08909dfbb841ad941e6aaea0990e9e98354e3d9\nCloses-Bug: #1863987\n""}, {'number': 2, 'created': '2020-03-17 08:16:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1f1ceeb9c38be9cb9ceb8d4065af3e12680315a5', 'message': ""[OVN] Remove DNS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current DNS dependency\non it needs to be resolved first. The 'dns_domain' is stored in the\n'external_ids' of the logical switch. The 'dns_name' and 'dns_assignment'\nare stored in the 'external_ids' of the logical switch port.\n\nChange-Id: If08909dfbb841ad941e6aaea0990e9e98354e3d9\nPartial-Bug: #1863987\n""}, {'number': 3, 'created': '2020-03-17 11:57:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6a3ebbfb80387b4afc307b739b7dc73dd02f7de8', 'message': ""[OVN] Remove DNS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current DNS dependency\non it needs to be resolved first. The 'dns_domain' is stored in the\n'external_ids' of the logical switch. The 'dns_name' and 'dns_assignment'\nare stored in the 'external_ids' of the logical switch port.\n\nChange-Id: If08909dfbb841ad941e6aaea0990e9e98354e3d9\nPartial-Bug: #1863987\n""}, {'number': 4, 'created': '2020-03-19 01:47:59.000000000', 'files': ['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/fake_resources.py', 'neutron/common/ovn/constants.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/da9b0ef6f8600b3ad336d751b91e36c10bc10a4c', 'message': ""[OVN] Remove DNS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current DNS dependency\non it needs to be resolved first. The 'dns_domain' is stored in the\n'external_ids' of the logical switch. The 'dns_name' and 'dns_assignment'\nare stored in the 'external_ids' of the logical switch port.\n\nChange-Id: If08909dfbb841ad941e6aaea0990e9e98354e3d9\nPartial-Bug: #1863987\n""}]",4,710554,da9b0ef6f8600b3ad336d751b91e36c10bc10a4c,21,12,4,29157,,,0,"[OVN] Remove DNS dependency on original port dict

The 'port_object' needs to be removed, so the current DNS dependency
on it needs to be resolved first. The 'dns_domain' is stored in the
'external_ids' of the logical switch. The 'dns_name' and 'dns_assignment'
are stored in the 'external_ids' of the logical switch port.

Change-Id: If08909dfbb841ad941e6aaea0990e9e98354e3d9
Partial-Bug: #1863987
",git fetch https://review.opendev.org/openstack/neutron refs/changes/54/710554/4 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/fake_resources.py', 'neutron/common/ovn/constants.py']",3,999a11d7196d8832264e117873766dcafeed5e09,bug/1863987,OVN_DNS_DOMAIN_EXT_ID_KEY = 'neutron:dns_domain' OVN_DNS_NAME_EXT_ID_KEY = 'neutron:dns_name' OVN_DNS_ASSIGNMENT_EXT_ID_KEY = 'neutron:dns_assignment',,58,15
openstack%2Foctavia~master~I38300ce34cd1838c21a1bb8b620929bcc6711db9,openstack/octavia,master,I38300ce34cd1838c21a1bb8b620929bcc6711db9,Share the LB security group with the LB owner,NEW,2020-04-27 22:17:35.000000000,2021-07-29 22:22:57.000000000,,"[{'_account_id': 10273}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-04-27 22:17:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/ec36718de5c072b3c14530887a846ac6231953ba', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 2, 'created': '2020-04-27 23:31:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/e517c7690cdba896696305dd468af7ff7c456e71', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 3, 'created': '2020-05-04 14:38:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/014dcc623f1724ab71cb60aca65f611d217d8f1c', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\nSee: https://review.opendev.org/#/c/724207/\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 4, 'created': '2020-05-14 03:17:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/fae9f806c21f4faf3b6f5211adf470982398a6ad', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\nSee: https://review.opendev.org/#/c/724207/\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 5, 'created': '2020-05-14 05:12:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/bcf83f8e596228a9e47a06e0172de5300467aecc', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\nSee: https://review.opendev.org/#/c/724207/\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 6, 'created': '2020-05-14 22:31:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/53906623d757f91f25b00e08c88c22ad95094f9b', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\nSee: https://review.opendev.org/#/c/724207/\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 7, 'created': '2020-05-15 05:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/9339608da06a65ec3a940bf644b31c0447514d15', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\nSee: https://review.opendev.org/#/c/724207/\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 8, 'created': '2020-05-15 23:53:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/9cb6df48c2092f6fdee73eb730ad64a17f6c5b3d', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\nSee: https://review.opendev.org/#/c/724207/\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}, {'number': 9, 'created': '2020-05-16 02:24:58.000000000', 'files': ['octavia/common/utils.py', 'octavia/tests/unit/network/drivers/neutron/test_base.py', 'octavia/tests/unit/controller/worker/v2/tasks/test_network_tasks.py', 'releasenotes/notes/share-lb-security-group-with-owner-d2eb289a86dee3b3.yaml', 'octavia/controller/worker/v1/flows/load_balancer_flows.py', 'octavia/controller/worker/v1/flows/member_flows.py', 'octavia/controller/worker/v2/flows/member_flows.py', 'octavia/amphorae/drivers/haproxy/rest_api_driver.py', 'octavia/controller/worker/v2/flows/load_balancer_flows.py', 'octavia/tests/unit/network/drivers/test_network_noop_driver.py', 'octavia/tests/unit/network/drivers/neutron/test_allowed_address_pairs.py', 'octavia/common/constants.py', 'octavia/network/drivers/neutron/base.py', 'octavia/tests/unit/controller/worker/v1/tasks/test_network_tasks.py', 'octavia/network/base.py', 'octavia/controller/worker/v2/tasks/network_tasks.py', 'octavia/network/drivers/noop_driver/driver.py', 'octavia/controller/worker/v1/tasks/network_tasks.py', 'octavia/network/drivers/neutron/allowed_address_pairs.py', 'octavia/controller/worker/v2/flows/amphora_flows.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/6ffcb3f3e5ed71ac04d447b2ed3e9d552831e899', 'message': 'Share the LB security group with the LB owner\n\nThis will allow the owner of the LB to add that LB\'s security group to\ntheir members\' security groups as a trusted remote group. This closes\nthe security hole that exists presently, where members must trust the\nfull range of IPs in the member\'s subnet (which is bad for provider\nnetworks).\n\nCurrently WIP because Neutron only supports the ""access_as_shared""\naction for SG sharing, which grants read AND write access to the SG.\nI will be proposing ""access_as_readonly"" as a second action for SGs.\nSee: https://review.opendev.org/#/c/724207/\n\nChange-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9\n'}]",4,723735,6ffcb3f3e5ed71ac04d447b2ed3e9d552831e899,19,2,9,10273,,,0,"Share the LB security group with the LB owner

This will allow the owner of the LB to add that LB's security group to
their members' security groups as a trusted remote group. This closes
the security hole that exists presently, where members must trust the
full range of IPs in the member's subnet (which is bad for provider
networks).

Currently WIP because Neutron only supports the ""access_as_shared""
action for SG sharing, which grants read AND write access to the SG.
I will be proposing ""access_as_readonly"" as a second action for SGs.
See: https://review.opendev.org/#/c/724207/

Change-Id: I38300ce34cd1838c21a1bb8b620929bcc6711db9
",git fetch https://review.opendev.org/openstack/octavia refs/changes/35/723735/9 && git format-patch -1 --stdout FETCH_HEAD,"['octavia/tests/unit/network/drivers/neutron/test_base.py', 'releasenotes/notes/share-lb-security-group-with-owner-d2eb289a86dee3b3.yaml', 'octavia/network/drivers/neutron/base.py', 'octavia/network/drivers/neutron/allowed_address_pairs.py']",4,ec36718de5c072b3c14530887a846ac6231953ba,failover-refactor," # Share the LB security group with the tenant so they can use it # as a remote SG trust on their members. self._share_security_group(sec_grp.get('id'), load_balancer.project_id)",,62,0
openstack%2Foctavia-tempest-plugin~master~I3bae22943a74978de72e6fdfff40ad80e46ab4f1,openstack/octavia-tempest-plugin,master,I3bae22943a74978de72e6fdfff40ad80e46ab4f1,Remove old api_v1_enabled cruft from job defs,NEW,2020-03-19 13:35:34.000000000,2021-07-29 22:22:47.000000000,,"[{'_account_id': 10273}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-03-19 13:35:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/bebda648c7a948620e32d709b2c6aacac6b6864e', 'message': 'Remove old api_v1_enabled cruft from job defs\n\nAPIv1 no longer exists, this option is simply outdated and misleading.\n\nChange-Id: I3bae22943a74978de72e6fdfff40ad80e46ab4f1\n'}, {'number': 2, 'created': '2020-03-19 13:56:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/695a33bd727d1ce6dce50c02bf42ef65b5894eba', 'message': 'Remove old api_v1_enabled cruft from job defs\n\nAPIv1 no longer exists, this option is simply outdated and misleading.\nMove this config to specific stable jobs, so when they are removed,\nthese references will go along with them.\n\nChange-Id: I3bae22943a74978de72e6fdfff40ad80e46ab4f1\n'}, {'number': 3, 'created': '2020-04-13 08:56:17.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/2a0e7c8fd0eeb7a2580cc87f065d6d997354a467', 'message': 'Remove old api_v1_enabled cruft from job defs\n\nAPIv1 no longer exists, this option is simply outdated and misleading.\nMove this config to specific stable jobs, so when they are removed,\nthese references will go along with them.\n\nChange-Id: I3bae22943a74978de72e6fdfff40ad80e46ab4f1\n'}]",0,713879,2a0e7c8fd0eeb7a2580cc87f065d6d997354a467,7,2,3,10273,,,0,"Remove old api_v1_enabled cruft from job defs

APIv1 no longer exists, this option is simply outdated and misleading.
Move this config to specific stable jobs, so when they are removed,
these references will go along with them.

Change-Id: I3bae22943a74978de72e6fdfff40ad80e46ab4f1
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/79/713879/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,bebda648c7a948620e32d709b2c6aacac6b6864e,,, api_settings: api_v1_enabled: False api_settings: api_v1_enabled: False api_settings: api_v1_enabled: False api_settings: api_v1_enabled: False api_settings: api_v1_enabled: False api_settings: api_v1_enabled: False api_settings: api_v1_enabled: False,0,14
openstack%2Fneutron~master~I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec,openstack/neutron,master,I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec,Add George framework and tests,NEW,2019-12-02 16:51:55.000000000,2021-07-29 22:21:40.000000000,,"[{'_account_id': 8313}, {'_account_id': 8655}, {'_account_id': 9845}, {'_account_id': 11952}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 15752}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 26622}, {'_account_id': 29963}]","[{'number': 1, 'created': '2019-12-02 16:51:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0ecbdcf1ad185d4ade6737f9b40083fc1c8dff3d', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 2, 'created': '2019-12-02 16:53:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3e704ada9cc47568d404ba8b07e638d464e9dfb5', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 3, 'created': '2019-12-02 16:55:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/28ba86b9f4d1d7a0c16aaf7007237fb76534d504', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 4, 'created': '2019-12-02 16:58:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/933633d79761e3a03e8754997a0eafb7c26136b1', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 5, 'created': '2019-12-02 17:00:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/513038b8a85f2006383141b9c36e7f3099ba3111', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 6, 'created': '2019-12-03 07:41:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/86ea57e11f0a72d3e3d8c6dba178473b279482af', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 7, 'created': '2019-12-03 17:32:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ffbf98558c0eff910d839cb7ea658357037af6dc', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 8, 'created': '2019-12-04 14:45:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6aa1d2c8762ec151970e68feab7d94a7a8ce96bf', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 9, 'created': '2019-12-06 10:31:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8584d3572f096f8b0ac572517328b561464c05b4', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 10, 'created': '2020-01-28 04:35:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1aa1e515433fec49240a99e721e6365b83ebbe9c', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 11, 'created': '2020-01-28 10:30:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e4f080a01c664ae091b8680c28b78bc89856d89c', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 12, 'created': '2020-01-28 15:00:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8603f2cb723fe8ecdf72fdd1a3edcbeac66caa74', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 13, 'created': '2020-02-03 17:42:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f6cfeb8cc4981f94ec478d48dc7e3cd8dbb7de16', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 14, 'created': '2020-02-14 15:20:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8fd6ed5af6e1c37d122936faa290a92c630270b4', 'message': 'WIP: Add George framework and tests\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 15, 'created': '2020-02-14 15:26:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/9b902f705a45b817e8341309f47c24476e59d449', 'message': 'WIP: Add George framework and tests\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n'}, {'number': 16, 'created': '2020-06-30 09:24:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a183facfd80a1c0d62a96b5bed53deb1cfe05489', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 17, 'created': '2020-06-30 09:25:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/7048704974a959cb1554b95b8b32962444f8e988', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 18, 'created': '2020-06-30 10:03:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/44f0ed5ccb9c21dc46cae73e6a2ee368de9fbc9a', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 19, 'created': '2020-07-03 12:26:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/746ab3a77522d8a7bd1c1d686592950753d4e8d7', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 20, 'created': '2020-07-03 16:07:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/af5c5782a2b5132b33512f53a023dec268a95ca3', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 21, 'created': '2020-07-29 10:12:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6a3733993bd946aa4965f6c1930b568c8fb15fc9', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 22, 'created': '2020-07-30 08:23:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3a284680a8106f8dfe7bda2d4d39ba6314e3bbef', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 23, 'created': '2020-08-10 09:11:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/62a5efa214e7bfef7862d44ac0c8c7afa5914c1c', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 24, 'created': '2020-09-07 14:31:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/535b84f03298af1fff123827dba9018ca03238d2', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 25, 'created': '2020-09-07 15:33:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/100fb503c8ab916f477fa35ebc9a827e8014874d', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 26, 'created': '2020-09-08 15:49:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/7f385cff273a77326f2465500d81b8fa26afad8d', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 27, 'created': '2020-09-09 09:18:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/37706a7be3911384820b804205caa58099691500', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\nSigned-off-by: Jakub Libosvar <libosvar@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 28, 'created': '2020-09-09 09:20:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/7699a11081f5d62de3d1bba2d5aa5f45ad41aa00', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\nSigned-off-by: Jakub Libosvar <libosvar@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}, {'number': 29, 'created': '2020-09-09 10:49:48.000000000', 'files': ['neutron/tests/george/resources/__init__.py', 'neutron/tests/george/resources/network.py', 'neutron/tests/george/base.py', 'neutron/tests/george/resources/fixtures.py', 'neutron/tests/george/test_connectivity.py', 'neutron/tests/george/__init__.py', 'zuul.d/base.yaml', 'neutron/tests/contrib/george/containers/neutron-server-ovn/start_services.sh', 'playbooks/george/post_run.yaml', 'neutron/tests/george/resources/machine.py', 'neutron/tests/contrib/george/containers/neutron-server-ovn/neutron-server-ovn.Dockerfile', 'neutron/tests/contrib/george/containers/neutron-ovn-controller/start_services.sh', 'neutron/tests/contrib/george/build_container_images.sh', 'neutron/tests/contrib/george/containers/neutron-ovn-controller/neutron-ovn-controller.Dockerfile', 'zuul.d/project.yaml', 'playbooks/george/configure_george_tests.yaml', 'neutron/tests/george/resources/environment.py', 'playbooks/george/run_george_run.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/neutron/commit/edf1b98646d5b63d90d113dcb078f879681934eb', 'message': ""Add George framework and tests\n\nThis patch adds the main parts of the George framework. There is a still\nlot of work ahead that will come in other patches. The main parts are:\n\n - Documentation\n - more tests that will ensure George can run in parallel\n - use fullstack tests in George\n\nAt this point, the job is added to the Experimental queue, even though\nI'm confident the framework is stable, I don't see a value in running it\nin the check queue yet, until we cover more scenarios.\n\nRelated-bug: #1863113\n\nCo-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>\nSigned-off-by: Jakub Libosvar <libosvar@redhat.com>\n\nChange-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec\n""}]",65,696926,edf1b98646d5b63d90d113dcb078f879681934eb,181,12,29,8655,,,0,"Add George framework and tests

This patch adds the main parts of the George framework. There is a still
lot of work ahead that will come in other patches. The main parts are:

 - Documentation
 - more tests that will ensure George can run in parallel
 - use fullstack tests in George

At this point, the job is added to the Experimental queue, even though
I'm confident the framework is stable, I don't see a value in running it
in the check queue yet, until we cover more scenarios.

Related-bug: #1863113

Co-Authored-By: Rodolfo Alonso Hernandez <ralonsoh@redhat.com>
Signed-off-by: Jakub Libosvar <libosvar@redhat.com>

Change-Id: I2b06dfc7ec586d25aa3ad2cd4be45dc32f44b5ec
",git fetch https://review.opendev.org/openstack/neutron refs/changes/26/696926/28 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/george/resources/__init__.py', 'neutron/tests/george/resources/network.py', 'neutron/tests/george/base.py', 'neutron/tests/george/resources/fixtures.py', 'neutron/tests/george/test_connectivity.py', 'neutron/tests/george/__init__.py', '.zuul.yaml', 'neutron/tests/contrib/george/containers/neutron-server-ovn/start_services.sh', 'playbooks/george/post_run.yaml', 'neutron/tests/george/resources/machine.py', 'neutron/tests/contrib/george/containers/neutron-server-ovn/neutron-server-ovn.Dockerfile', 'neutron/tests/contrib/george/containers/neutron-ovn-controller/start_services.sh', 'neutron/tests/contrib/george/build_container_images.sh', 'neutron/tests/contrib/george/containers/neutron-ovn-controller/neutron-ovn-controller.Dockerfile', 'playbooks/george/configure_george_tests.yaml', 'neutron/tests/george/resources/environment.py', 'playbooks/george/run_george_run.yaml', 'tox.ini']",18,0ecbdcf1ad185d4ade6737f9b40083fc1c8dff3d,george,[testenv:george] setenv = {[testenv]setenv} OS_VENV={envdir} OS_TEST_PATH=./neutron/tests/george OS_TEST_TIMEOUT=600 ,,1014,68
openstack%2Foctavia~master~I9348cfc8e87351d94c225f07533b7676dcbe50e3,openstack/octavia,master,I9348cfc8e87351d94c225f07533b7676dcbe50e3,Also handle network deltas when deleting members,NEW,2020-06-08 03:03:52.000000000,2021-07-29 22:21:01.000000000,,"[{'_account_id': 6469}, {'_account_id': 10273}, {'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 28329}, {'_account_id': 31525}]","[{'number': 1, 'created': '2020-06-08 03:03:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/7b84f0ede4ebb18928956db277812f5d0b42988b', 'message': 'Handle network deltas when delete member\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 2, 'created': '2020-06-08 12:04:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/fdb499f080ba2a9abd345c3fbabeb8b6d638dba4', 'message': 'Handle network deltas when delete member\n\nThe patch does the below two things:\n1.\xa0When removing members, the nic of amphora ns\n   associated with member will be deleted.\xa0\n2. the naming method of the nic in amphora ns\n   will be changed to avoid name conflicts\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 3, 'created': '2020-06-13 01:54:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/ccdc038766b2cfd04c91e00eb17c5202e9164696', 'message': 'Handle network deltas when delete member\n\nThe patch does the below two things:\n1.\xa0When removing members, the nic of amphora ns\n   associated with member will be deleted.\xa0\n2. the naming method of the nic in amphora ns\n   will be changed to avoid name conflicts\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 4, 'created': '2020-09-09 14:40:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/3a22744f8cc69d1a0156d8aca8966ea21916b466', 'message': 'Handle network deltas when delete member\n\nThe patch does the below two things:\n1.\xa0When removing members, the nic of amphora ns\n   associated with member will be deleted.\xa0\n2. the naming method of the nic in amphora ns\n   will be changed to avoid name conflicts\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 5, 'created': '2020-09-27 08:55:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/ea74ab2369e912df10642bd004f6c356c2a979f9', 'message': 'Handle network deltas when delete member\n\nThe patch does the below two things:\n1.\xa0When removing members, the nic of amphora ns\n   associated with member will be deleted.\xa0\n2. the naming method of the nic in amphora ns\n   will be changed to avoid name conflicts\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 6, 'created': '2020-09-27 09:25:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/00e0a1c90312794dbd79667aaecc5647da08f188', 'message': 'Also handle network deltas when deleting members\n\nthe original code only handles network when add members,\nthis may result in some issues as I described in the below story.\nthis patch adds codes to support remove its network interfaces\nin the amphora namespace while deleting members\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 7, 'created': '2020-09-27 09:31:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/c8541b3e12b96a470adccaec5450e2169e553ebf', 'message': 'Also handle network deltas when deleting members\n\nthe original code only handles network when add members,\nthis may result in some issues as I described in the below story.\nthis patch adds codes to support remove its network interfaces\nin the amphora namespace while deleting members\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 8, 'created': '2020-11-03 00:59:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/8ba2561e77c443c23b0af1d2d95a01863d47a400', 'message': 'Also handle network deltas when deleting members\n\nthe original code only handles network when add members,\nthis may result in some issues as I described in the below story.\nthis patch adds codes to support remove its network interfaces\nin the amphora namespace while deleting members\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}, {'number': 9, 'created': '2021-01-17 08:06:07.000000000', 'files': ['octavia/controller/worker/v1/flows/member_flows.py', 'octavia/controller/worker/v2/flows/member_flows.py', 'octavia/tests/unit/controller/worker/v2/flows/test_member_flows.py', 'octavia/tests/unit/controller/worker/v1/flows/test_member_flows.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/87322714a399f335a04797cd70cd8c3336dfa3d1', 'message': 'Also handle network deltas when deleting members\n\nthe original code only handles network when add members,\nthis may result in some issues as I described in the below story.\nthis patch adds codes to support remove its network interfaces\nin the amphora namespace while deleting members\n\nChange-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3\nStory: #2007762\n'}]",0,734002,87322714a399f335a04797cd70cd8c3336dfa3d1,25,6,9,31525,,,0,"Also handle network deltas when deleting members

the original code only handles network when add members,
this may result in some issues as I described in the below story.
this patch adds codes to support remove its network interfaces
in the amphora namespace while deleting members

Change-Id: I9348cfc8e87351d94c225f07533b7676dcbe50e3
Story: #2007762
",git fetch https://review.opendev.org/openstack/octavia refs/changes/02/734002/9 && git format-patch -1 --stdout FETCH_HEAD,"['octavia/amphorae/backends/agent/api_server/plug.py', 'octavia/controller/worker/v1/flows/member_flows.py', 'octavia/controller/worker/v2/flows/member_flows.py', 'octavia/tests/unit/controller/worker/v1/flows/test_member_flows.py', 'octavia/tests/unit/controller/worker/v2/flows/test_member_flows.py', 'octavia/tests/functional/amphorae/backend/agent/api_server/test_server.py']",6,7b84f0ede4ebb18928956db277812f5d0b42988b,story/2007762," netns_handle.get_links.return_value = [ {'attrs': [('IFLA_IFNAME', 'eth{0}'.format(index))]} for index in range(2, test_int_num)] MEMBERS_INTERFACE = 'eth2' consts.AMPHORA_NAMESPACE, MEMBERS_INTERFACE) MEMBERS_INTERFACE)) 'auto ' + MEMBERS_INTERFACE + '\niface ' + MEMBERS_INTERFACE + ' inet static\n' + ' dev ' + MEMBERS_INTERFACE + '\n' ' dev ' + MEMBERS_INTERFACE + '\n' ' dev ' + MEMBERS_INTERFACE + '\n' ' dev ' + MEMBERS_INTERFACE + '\n' + MEMBERS_INTERFACE + ' -j MASQUERADE' + '\n' + '-o ' + MEMBERS_INTERFACE + ' -j MASQUERADE' + '\n') int=MEMBERS_INTERFACE, 'ifup', MEMBERS_INTERFACE], stderr=-2)"," netns_handle.get_links.return_value = [0] * test_int_num consts.AMPHORA_NAMESPACE, consts.NETNS_PRIMARY_INTERFACE) consts.NETNS_PRIMARY_INTERFACE)) 'auto ' + consts.NETNS_PRIMARY_INTERFACE + '\niface ' + consts.NETNS_PRIMARY_INTERFACE + ' inet static\n' + ' dev ' + consts.NETNS_PRIMARY_INTERFACE + '\n' ' dev ' + consts.NETNS_PRIMARY_INTERFACE + '\n' ' dev ' + consts.NETNS_PRIMARY_INTERFACE + '\n' ' dev ' + consts.NETNS_PRIMARY_INTERFACE + '\n' + consts.NETNS_PRIMARY_INTERFACE + ' -j MASQUERADE' + '\n' + '-o ' + consts.NETNS_PRIMARY_INTERFACE + ' -j MASQUERADE' + '\n') int=consts.NETNS_PRIMARY_INTERFACE, 'ifup', consts.NETNS_PRIMARY_INTERFACE], stderr=-2)",36,21
openstack%2Foctavia~master~Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2,openstack/octavia,master,Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2,Add support for building arm64 images,NEW,2021-01-15 14:03:59.000000000,2021-07-29 22:20:51.000000000,,"[{'_account_id': 3185}, {'_account_id': 22348}, {'_account_id': 24072}]","[{'number': 1, 'created': '2021-01-15 14:03:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/bd724c165852f8ad9b122694b7d5d08a25c436f2', 'message': 'Add support for building arm64 images\n\nDiskimage-builder does not support armhf architecture for building\nCentOS images, as it cannot download the base image because the\nbase image URL is constructed using the architecture value.\n\nChange-Id: Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2\n'}, {'number': 2, 'created': '2021-01-15 14:05:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/a113dc95482b829decf0cc1e0b01a3b53ffb1ffb', 'message': 'Add support for building CentOS arm64 images\n\nDiskimage-builder does not support armhf architecture for building\nCentOS images, as it cannot download the base image because the\nbase image URL is constructed using the architecture value mapping to\naarch64 and the existent armhf is not mapped to aarch64.\n\nChange-Id: Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2\n'}, {'number': 3, 'created': '2021-01-15 14:14:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/c757fa0447d2f20f190dbbf60fc91c057106bb5c', 'message': 'Add support for building CentOS arm64 images\n\nDiskimage-builder does not support armhf architecture for building\nCentOS images, as it cannot download the base image because the\nbase image URL is constructed using the architecture value mapping to\naarch64 and the existent armhf is not mapped to aarch64.\n\nChange-Id: Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2\n'}, {'number': 4, 'created': '2021-02-18 12:47:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/f4469494d22697e9854f2ed358c9a1392672b3bb', 'message': 'Add support for building arm64 images\n\nAdded option for the architecture (-a) flag so that ARM64 images\ncan be built.\n\nChange-Id: Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2\n'}, {'number': 5, 'created': '2021-02-18 12:48:45.000000000', 'files': ['diskimage-create/README.rst', 'diskimage-create/diskimage-create.sh'], 'web_link': 'https://opendev.org/openstack/octavia/commit/e8b9d9601503b8c4d89541cd4c2ac3919b09fe08', 'message': 'Add support for building arm64 images\n\nAdded option `arm64` for the architecture (-a) flag so that ARM64\nimages can be built.\n\nChange-Id: Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2\n'}]",0,770937,e8b9d9601503b8c4d89541cd4c2ac3919b09fe08,17,3,5,9649,,,0,"Add support for building arm64 images

Added option `arm64` for the architecture (-a) flag so that ARM64
images can be built.

Change-Id: Ie2c1bacc920d4d8639d1ceb7251ab5af1ecd26f2
",git fetch https://review.opendev.org/openstack/octavia refs/changes/37/770937/3 && git format-patch -1 --stdout FETCH_HEAD,['diskimage-create/diskimage-create.sh'],1,bd724c165852f8ad9b122694b7d5d08a25c436f2,," echo "" [-a i386 | **amd64** | armhf | arm64 | ppc64le]"" [ ""$AMP_ARCH"" != ""armhf"" ] && \ [ ""$AMP_ARCH"" != ""arm64"" ]; then"," echo "" [-a i386 | **amd64** | armhf | ppc64le]"" [ ""$AMP_ARCH"" != ""armhf"" ]; then",3,2
openstack%2Foctavia-tempest-plugin~master~I35cc36ab7f01c1f5a99d8cd8a94c41cecea3b7b7,openstack/octavia-tempest-plugin,master,I35cc36ab7f01c1f5a99d8cd8a94c41cecea3b7b7,Remove legacy CI jobs,NEW,2020-10-19 08:55:55.000000000,2021-07-29 22:19:43.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-10-19 08:55:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/74f7a656e6727a4e9c0e188690b85751b9e4f0cf', 'message': 'Remove legacy CI jobs\n\nThese CI jobs were used in stable/queens and stable/rocky branches.\nSince Octavia Queens and Rocky are EOL, we can remove them.\n\nChange-Id: I35cc36ab7f01c1f5a99d8cd8a94c41cecea3b7b7\n'}, {'number': 2, 'created': '2021-03-25 09:22:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/954e09e801ac844eed8dda173ebb05e4c8d09df0', 'message': 'Remove legacy CI jobs\n\nThese CI jobs were used in stable/queens and stable/rocky branches.\nSince Octavia Queens and Rocky are EOL, we can remove them.\n\nChange-Id: I35cc36ab7f01c1f5a99d8cd8a94c41cecea3b7b7\n'}, {'number': 3, 'created': '2021-04-07 16:18:32.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/2629fbf73df444a37752c9a37dbca714446e38fb', 'message': 'Remove legacy CI jobs\n\nThese CI jobs were used in stable/queens and stable/rocky branches.\nSince Octavia Queens and Rocky are EOL, we can remove them.\n\nChange-Id: I35cc36ab7f01c1f5a99d8cd8a94c41cecea3b7b7\n'}]",1,758725,2629fbf73df444a37752c9a37dbca714446e38fb,9,1,3,6469,,,0,"Remove legacy CI jobs

These CI jobs were used in stable/queens and stable/rocky branches.
Since Octavia Queens and Rocky are EOL, we can remove them.

Change-Id: I35cc36ab7f01c1f5a99d8cd8a94c41cecea3b7b7
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/25/758725/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,74f7a656e6727a4e9c0e188690b85751b9e4f0cf,,, name: octavia-v2-dsvm-scenario-ubuntu-xenial parent: octavia-v2-dsvm-scenario nodeset: openstack-single-node-xenial vars: devstack_localrc: OCTAVIA_AMP_BASE_OS: ubuntu OCTAVIA_AMP_DISTRIBUTION_RELEASE_ID: xenial USE_PYTHON3: false TEMPEST_BRANCH: 23.0.0 - job: name: octavia-v2-dsvm-tls-barbican-stable-rocky parent: octavia-v2-dsvm-tls-barbican nodeset: openstack-single-node-xenial override-checkout: stable/rocky - job: name: octavia-v2-dsvm-tls-barbican-stable-queens parent: octavia-v2-dsvm-tls-barbican nodeset: openstack-single-node-xenial override-checkout: stable/queens - job: name: octavia-v2-dsvm-py2-spare-pool parent: octavia-v2-dsvm-spare-pool vars: devstack_localrc: USE_PYTHON3: False required-projects: - name: openstack/diskimage-builder override-checkout: 2.30.0 - job: name: octavia-v2-dsvm-noop-py35-api parent: octavia-v2-dsvm-noop-api - job: name: octavia-v2-dsvm-py35-scenario parent: octavia-v2-dsvm-scenario - job: name: octavia-v2-dsvm-scenario-centos-7 parent: octavia-v2-dsvm-py2-scenario-centos-7 nodeset: octavia-single-node-centos-7 - job:,0,46
openstack%2Fansible-collections-openstack~master~Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2,openstack/ansible-collections-openstack,master,Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2,Add mandatory requires_ansible version to metadata,MERGED,2021-07-29 10:32:55.000000000,2021-07-29 22:18:05.000000000,2021-07-29 22:18:05.000000000,"[{'_account_id': 10239}, {'_account_id': 10969}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-29 10:32:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/c05dda6558919a51b7c0c3a9b021be3b8e287e17', 'message': 'Add mandatory requires_ansible version to metadata\n\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n'}, {'number': 2, 'created': '2021-07-29 11:52:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/6bbe2efaae18834207ccd592d320292aff2e27b9', 'message': 'Add mandatory requires_ansible version to metadata\n\nAdd packaging to requirements to allow this version check.\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n'}, {'number': 3, 'created': '2021-07-29 12:33:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/970a558db05c8987a88760ee6639803b46a11be7', 'message': 'Add mandatory requires_ansible version to metadata\n\nAdd packaging to requirements to allow this version check.\nChange ansible-test to --docker because of ansible-test bug[1]\n\n[1] https://github.com/ansible/ansible/issues/75353\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n'}, {'number': 4, 'created': '2021-07-29 12:49:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/e6796874e4d9be830421be37c998e788f555fb11', 'message': 'Add mandatory requires_ansible version to metadata\n\nAdd packaging to requirements to allow this version check.\nChange ansible-test to --docker because of ansible-test bug[1]\n\n[1] https://github.com/ansible/ansible/issues/75353\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n'}, {'number': 5, 'created': '2021-07-29 13:25:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/df98165848a3ed3e233701e2baca51d0d28fe847', 'message': 'Add mandatory requires_ansible version to metadata\n\nAdd packaging to requirements to allow this version check.\nChange ansible-test to --docker because of ansible-test bug[1]\n\n[1] https://github.com/ansible/ansible/issues/75353\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n'}, {'number': 6, 'created': '2021-07-29 13:45:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/60c62d9d6374afab8c817e67026143c44e76557c', 'message': 'Add mandatory requires_ansible version to metadata\n\nAdd packaging to requirements to allow this version check.\nChange ansible-test to --docker because of ansible-test bug[1]\n\n[1] https://github.com/ansible/ansible/issues/75353\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n'}, {'number': 7, 'created': '2021-07-29 13:54:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/6c05fef4013951ed7d13ce9a92d4a48dbdf7ce46', 'message': 'Add mandatory requires_ansible version to metadata\n\nAdd packaging to requirements to allow this version check.\nChange ansible-test to --docker because of ansible-test bug[1]\n\n[1] https://github.com/ansible/ansible/issues/75353\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n'}, {'number': 8, 'created': '2021-07-29 14:05:19.000000000', 'files': ['meta/runtime.yml', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/07374a1f0d2dcaa46368a2abc08061ccc8295582', 'message': ""Add mandatory requires_ansible version to metadata\n\nDisable ansible-test since it's broken in 2.11[1]\n\n[1] https://github.com/ansible/ansible/issues/75353\nChange-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2\n""}]",0,802859,07374a1f0d2dcaa46368a2abc08061ccc8295582,22,3,8,10969,,,0,"Add mandatory requires_ansible version to metadata

Disable ansible-test since it's broken in 2.11[1]

[1] https://github.com/ansible/ansible/issues/75353
Change-Id: Idd2f99ddfe507b5b02de206c1f8c75692d6a84a2
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/59/802859/5 && git format-patch -1 --stdout FETCH_HEAD,['meta/runtime.yml'],1,c05dda6558919a51b7c0c3a9b021be3b8e287e17,newv,"requires_ansible: "">=2.8""",,1,0
openstack%2Foctavia~master~Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9,openstack/octavia,master,Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9,Add Octavia performance guide and 2vcpu flavor,NEW,2021-04-20 19:40:59.000000000,2021-07-29 22:17:53.000000000,,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 29244}]","[{'number': 1, 'created': '2021-04-20 19:40:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/ea8e7dd45ac8936d0cf620b4815596be9dc4537d', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 2, 'created': '2021-04-21 21:01:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/af995fecfe4187e662f8251106e10cfe39036bb1', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 3, 'created': '2021-04-21 22:03:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/3f92c4808ea348ec13c8aaed8370393dfb41b7e2', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 4, 'created': '2021-04-22 19:46:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/f927a150b88df87e08962ce49627f46b3756aae9', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 5, 'created': '2021-04-22 19:50:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/2f857696baa7b9d90430a4913a0981bc3f09a1a4', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 6, 'created': '2021-04-22 21:33:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/6d60f05f3447ab591394542c3f548a02beaad0e1', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 7, 'created': '2021-04-22 21:33:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/8c11dfbd74bc9038f37a567af9b73bef03afefb0', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 8, 'created': '2021-04-23 00:06:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/9253da1af7239c83a0b028b08338a34b09874fe4', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 9, 'created': '2021-04-23 00:52:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/09dcf12427669c357c00e13c2319157394deeb24', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 10, 'created': '2021-04-23 20:24:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/b7d451e41c8b33403025e1b3a230b994dea2fb14', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}, {'number': 11, 'created': '2021-04-23 21:42:23.000000000', 'files': ['doc/source/admin/performance-tuning.rst', 'doc/source/admin/index.rst', 'devstack/plugin.sh', 'zuul.d/projects.yaml', 'devstack/settings'], 'web_link': 'https://opendev.org/openstack/octavia/commit/4614672f255ca57097c5b109d72bbeae0ce42d76', 'message': 'Add Octavia performance guide and 2vcpu flavor\n\nThis patch adds a performance tuning guide to the Octavia\nAdministrative documentation and adds an Octavia flavor for two\nvCPU amphora as an example.\n\nDepends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449\nChange-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9\n'}]",10,787286,4614672f255ca57097c5b109d72bbeae0ce42d76,25,3,11,11628,,,0,"Add Octavia performance guide and 2vcpu flavor

This patch adds a performance tuning guide to the Octavia
Administrative documentation and adds an Octavia flavor for two
vCPU amphora as an example.

Depends-On: https://review.opendev.org/c/openstack/octavia-tempest-plugin/+/787449
Change-Id: Ia51f97fc5c0e67072a50ea5ee57673112e8a39a9
",git fetch https://review.opendev.org/openstack/octavia refs/changes/86/787286/9 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/performance-tuning.rst', 'doc/source/admin/index.rst', 'devstack/plugin.sh', 'devstack/settings']",4,ea8e7dd45ac8936d0cf620b4815596be9dc4537d,," # Two vCPU testing (Add a two vCPU image/flavor) OCTAVIA_AMP_TWO_VCPU=${OCTAVIA_AMP_TWO_VCPU=:-""False""}",,79,0
openstack%2Foctavia~master~Ib062c53ce2438485f3252bd6e1cf7db197b8a4cd,openstack/octavia,master,Ib062c53ce2438485f3252bd6e1cf7db197b8a4cd,fix(common): normalize url before render haproxy config,NEW,2021-06-21 15:07:33.000000000,2021-07-29 22:15:27.000000000,,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 29244}]","[{'number': 1, 'created': '2021-06-21 15:07:33.000000000', 'files': ['octavia/common/jinja/haproxy/combined_listeners/jinja_cfg.py', 'octavia/common/jinja/haproxy/split_listeners/jinja_cfg.py', 'octavia/common/validate.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/bf44f093cc4e77af07bc8536ecd6e57a13801588', 'message': 'fix(common): normalize url before render haproxy config\n\nFix Remote Code Execution in HAProxy Amphora Agent that based on\nconfig injection throughout url_path attribute in HealthMonitor or\nredirect_url / redirect_prefix attributes in L7Policy.\n\nTask: 42656\nStory: 2008994\n\nChange-Id: Ib062c53ce2438485f3252bd6e1cf7db197b8a4cd\nSigned-off-by: Mikhail Ushanov <gm.mephisto@gmail.com>\n'}]",1,797322,bf44f093cc4e77af07bc8536ecd6e57a13801588,5,3,1,25290,,,0,"fix(common): normalize url before render haproxy config

Fix Remote Code Execution in HAProxy Amphora Agent that based on
config injection throughout url_path attribute in HealthMonitor or
redirect_url / redirect_prefix attributes in L7Policy.

Task: 42656
Story: 2008994

Change-Id: Ib062c53ce2438485f3252bd6e1cf7db197b8a4cd
Signed-off-by: Mikhail Ushanov <gm.mephisto@gmail.com>
",git fetch https://review.opendev.org/openstack/octavia refs/changes/22/797322/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia/common/jinja/haproxy/combined_listeners/jinja_cfg.py', 'octavia/common/jinja/haproxy/split_listeners/jinja_cfg.py', 'octavia/common/validate.py']",3,bf44f093cc4e77af07bc8536ecd6e57a13801588,fix-encode-url-path," if not rfc3986.is_valid_uri(url_path, require_path=True): raise exceptions.InvalidURLPath(url_path=url_path) ",,31,6
openstack%2Foctavia~master~Ie29137f2a22467f110725b790debfd2a6448ebc8,openstack/octavia,master,Ie29137f2a22467f110725b790debfd2a6448ebc8,"Alternative Distributor for L3 Active-Active, N+1 Amphora Setup",NEW,2020-04-28 10:45:04.000000000,2021-07-29 22:15:15.000000000,,"[{'_account_id': 6469}, {'_account_id': 6732}, {'_account_id': 7249}, {'_account_id': 10068}, {'_account_id': 10273}, {'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 27488}, {'_account_id': 28329}, {'_account_id': 29244}, {'_account_id': 30454}, {'_account_id': 30636}, {'_account_id': 31814}, {'_account_id': 31843}]","[{'number': 1, 'created': '2020-04-28 10:45:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/bcd8f7d800bc046bb70e0cf94df4d03f9cd52dab', 'message': 'Altinative Distributor for L3 Active-Active,\nN+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 2, 'created': '2020-04-29 09:30:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/04a4dd2a8c12cfde06c3a9e5afd647eaf4db5bc4', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 3, 'created': '2020-04-29 10:11:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/97cf308ae36ffae372047cee396139b4eeb2f94e', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 4, 'created': '2020-04-29 10:42:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/1203689124980ec127826165b30e3a47a4f46dbb', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 5, 'created': '2020-07-15 12:03:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/01c17877783594e49494b41e4d36700bc84e9286', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 6, 'created': '2020-07-29 07:03:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/1a2c9c289ed2cdec0a5884bb5fde36731bd07134', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 7, 'created': '2020-10-28 11:46:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/1c81cf49576487b3b276bf5f8baa89574ed227f6', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 8, 'created': '2020-11-04 08:38:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/6fae2f9e8f25435436b821fdcc957a19df1c7cb1', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nPatch for this spec: https://review.opendev.org/#/c/746688/\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 9, 'created': '2020-11-13 09:08:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/a3779eb7ea7a77487889076a17e6884af66e4d58', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nImplementation: https://review.opendev.org/#/c/746688/\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 10, 'created': '2020-11-17 07:34:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/d4d9d1d4ed423dd5944fcfc855e710eff780a6d3', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nImplementation: https://review.opendev.org/#/c/746688/\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}, {'number': 11, 'created': '2020-11-18 02:50:18.000000000', 'files': ['specs/version1.1/alternative-active-active-l3-distributor.rst'], 'web_link': 'https://opendev.org/openstack/octavia/commit/e68b1594b3c88835b18e085db36f43cbfe28b368', 'message': 'Alternative Distributor for L3 Active-Active, N+1 Amphora Setup\n\nOctavia need to support active-active feature. The community has\npreviously had a scheme for implementing active-active feature using L3\ndistributors. This solution uses the BGP/ECMP approach. We would like\nto provide an alternative solution that utilizes the L3 network to\nimplement this feature.\nThis solution is architecturally simple, however, it requires Neutron\nsupport.\n\nImplementation: https://review.opendev.org/#/c/746688/\n\nChange-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8\nStory: 2007602\nTask: 39585\n'}]",84,723864,e68b1594b3c88835b18e085db36f43cbfe28b368,45,14,11,31843,,,0,"Alternative Distributor for L3 Active-Active, N+1 Amphora Setup

Octavia need to support active-active feature. The community has
previously had a scheme for implementing active-active feature using L3
distributors. This solution uses the BGP/ECMP approach. We would like
to provide an alternative solution that utilizes the L3 network to
implement this feature.
This solution is architecturally simple, however, it requires Neutron
support.

Implementation: https://review.opendev.org/#/c/746688/

Change-Id: Ie29137f2a22467f110725b790debfd2a6448ebc8
Story: 2007602
Task: 39585
",git fetch https://review.opendev.org/openstack/octavia refs/changes/64/723864/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/version1.1/alternative-active-active-l3-distributor.rst'],1,bcd8f7d800bc046bb70e0cf94df4d03f9cd52dab,starfish,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode =============================================================== Alternative Distributor for L3 Active-Active, N+1 Amphora Setup =============================================================== .. attention:: Please review the active-active topology blueprint first ( :doc:`../version0.9/active-active-topology` ) https://storyboard.openstack.org/#!/story/2007602 Problem description =================== This blueprint describes in detail another way to implement an active-active topology in L3 networks. This proposal takes advantage of ECMP multi-path routing in qrouter namespace to implement Active-Active feature, so qrouter can distribute traffic to multiple Amphorae in an Amphora cluster. This spec inherits high level architecture of previous community topology, it is still a highly available, scalable active-active load-balance architecture, it also uses ACM to manage the cluster, it can support both intranet and extranet traffic, avoid single point of failure and implement high availability and distributed load balance simultaneously. .. _P2: **Note:** Items marked with [`P2`_] refer to lower priority features to be designed / implemented only after initial release. Proposed Change =============== * The client, Amphora instance, and backend pool all locate in the same L2 network (tenant backend network/VPC), Amphorae can communicate with backend real servers with higher performance. * The interface on the virtual router (i.e. qrouter) in the tenant VPC needs to enable ARP proxy and responds ARP request in the same subnet (need to extend Neutron to implement). * The tenant's VPC needs to add equal-cost routes to the virtual router. Prefix of the equal-cost routing entry is VIP, its next hop is the backend network IP address of each Amphora (need to extend Neutron to implement). * Neutron needs to be extended to support configuring the virtual router (will submit a separate spec in the Neutron project). * The qrouter itself cannot sense the availability of the path to Amphra, so Amphora cluster manager needs to do dynamic connectivity detection. ECMP route entry must be deleted once the path is unreachable. This can be done with the current Health Manager module in conjunction with ACM. * Amphora can send a heartbeat to the Health Manager module does not mean that Amphora is available on tenant's back-end network. In order to dynamically detect the path abailability between the virtual router and Amphora, and detect whether Amphora is available on back-end network, Amphora Agent needs to be modified. Timed ICMP detection is required between Amphoras. * Amphora needs to configure VIP on loopback interface and turn off the ARP response, this VIP comes from the backend tenant network. * [`P2`_] Use DR (Direct Routing) to provide more efficient load balancing because Amphorae and backend servers are in the same L2 network (need to extend Neutron to implement). * [`P2`_] Support Floating IPs (FIPs). In order to support FIPs the existing Neutron *floatingips* API would need to be extended. This will be described in more detail in a separate spec in the Neutron project. Architecture ------------ High-level Topology Description ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ :: +------------------------------------+ | DVR MODE | | +-------------+ +-------------+ | Tenant Backend | |Qrouter/GW(1)| |Qrouter/GW(2)| | Network | +-------------+ +-------------+ | + Internet+--------> +--------> | +-------------+ +-------------+ | ECMP | | |Qrouter/GW(3)| |Qrouter/GW(4)| | | | +-------------+ +-------------+ | | Managemen +------------------------------------+ | Network | + +------------+ | | | Amphora(1) | | +----------+ | +-----+--+---------+----+ | | Tenant | | +----+ NS | NS +----+ <---------+Service(1)| | |MGMT|Default | Amphora |Back| | +----------+ <-------------+ IP | | +----------+ | IP +---------> | +----+--------+-+ VIP +-+--+-+ | | |(Loopback)| | | +----------+ | +----------+ | | | Tenant | | | ICMP <---------+Service(2)| | | DECTECT | +----------+ | +------------+ | | | | Amphora(2) | | | | +-----+--+---------+----+ v | +----------+ | +----+ NS | NS +--+-+ | | Tenant | | |MGMT|Default | Amphora |Back| <---------+Service(3)| <-------------+ IP | | +----------+ | IP +---------> +----------+ | +----+--------+-+ VIP +-+--+-+ | | |(Loopback)| | | | +----------+ | | | +-------------+ | | ● ● ● | |Octavia Lbaas| | | <------+ Controller | ● ● ● | ICMP | | +--+-------+--+ | DECTECT | +----------+ | | ACM | | | | Tenant | | +-------+ +------------+ | <---------+Service(M)| | | Amphora(K) | | | +----------+ | +-----+--+---------+----+ v | | +----+ NS | NS +--+-+ | | |MGMT|Default | Amphora |Back| | <-------------+ IP | | +----------+ | IP +---------> | +----+--------+-+ VIP +-+----+ | + |(Loopback)| + +----------+ Amphora Cluster 1..K Back+end Pool 1..M * An example of high-level data-flow: - The intranet client requests mac address of the VIP and accesses the service based on this mac address. The extranet client accesses the tenant service via floating IP (IPv4 or IPv6). - When the intranet client requests mac address of the VIP, the qrouter will use gateway MAC address to respond, the client's datagram will be transmitted to the qrouter first. The extranet client accesses the VIP through floating IP, and the client's datagram is also transmitted to the qrouter. Then datagrams are processed and sent to the gateway of the back-end tenant network. - The qrouter gateway queries equal-cost routing entries prefixed with VIP and selects a unique Back IP as next hop based on 5 tuple hash, then forwards the client's packets to the Amphora corresponding to Back IP. - Amphora accepts connections from clients, receives traffic, then distributes it to the back-end server pool. - Traffic from the back-end server pool goes to the gateway through Amphora. (it will directly go to the gateway in DR mode). * The whole process implements two levels load balancing, i.e. load balancing between multiple Amphorae and load balancing between the backend real servers. * In Neutron's DVR mode, qrouters are distributed across compute nodes, and the Amphora instances are anti-affinity, so client traffic is also distributed between qrouters. In this way, we can avoid the single point of failure of qrouter and Amphora. * To ensure its availability in the back-end tenant network, timed ICMP detection is required between Amphoras. For example: - Amphora(1) needs to regularly send ICMP packets to probe Amphora(2) that is ""adjacent"" to it. - If the probe fails, it continues to probe the next Amphora(3) in the cluster, and so on. - Amphora(1) keeps performing probe until it succeeds and then does not continue to probe. - Only if all probes fail, this Amphora(1) proves itself unavailable. Amphora(1) then stops sending heartbeat to Health Manager, waiting to be processed and recovered. - Other Amphora perfrom the same operation as above. - An Agent on Amphora only needs to guarantee its own availability. Due to Amphora instances are anti-affinity, this approach is good for detecting Amphora's connectivity throughout the VPC. Distributor(Qrouter) Lifecycle ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ :: +------------------------------------------------+ | Initialize && Register AMP in Distributor | +------------------------------------------------+ | | | +---------------+ +---------------+ | | |1 | |4 | | | |Qrouter enable | | Qrouter config| | | |proxy response | | equal-cost | | | | | | routing | | | +-------+-------+ +-------+-------+ | | | ^ | | | | | | | | | | | | | | | | | | v | | | +-------+-------+ +-------+-------+ | | |2 | |3 | | | | Amphora | | Amphora | | | | (boot) +----------->+ plug VIP into | | | | | | lo interface | | | +---------------+ +---------------+ | | | +------------------------------------------------+ +------------------------------------------------+ | Roll back && Unregister AMP in Distributor | +------------------------------------------------+ | | | +---------------+ +---------------+ | | |5 | |8 | | | |Qrouter delete | |Qrouter disable| | | | equal-cost | |proxy response | | | | routing | | | | | +-------+-------+ +-------+-------+ | | | ^ | | | | | | | | | | | | | | | | | | v | | | +-------+-------+ +-------+-------+ | | |6 | |7 | | | | Amphora | | Amphora | | | | unplug VIP +----------->+roll back load | | | | | |balancer config| | | +---------------+ +---------------+ | | | +------------------------------------------------+ 1. Enable ARP proxy on the qrouter to respond ARP request from the client. 2. Create and boot Amphora. Assign port from back-end tenant network (VPC) to Amphora and attach the interface to Amphora. IP on the interface is the Back IP which acts as the next hop for the equal-cost route on the qrouter. 3. Amphora adds VIP into the loopback interface and disables the ARP response. 4. Add equal-cost route to the qrouter. Equal-cost route entry uses VIP as prefix, its next hop is Back IP of each Amphora. 5. Remove equal-cost route from the qrouter. 6. Delete VIP on Amphora. 7. Roll back the configuration of the load balancer on the Amphora and detach the back-end network interface. 8. The qrouter disables ARP proxy (completely shuts down active-active load balancing service) Alternatives ------------ https://github.com/openstack/octavia/blob/master/specs/version1.1/active-active-l3-distributor.rst#id1 Data model impact ----------------- * vip table: - new value: distributor\_id\ ``(String(36), nullable=True)`` The ID of the distributor responsible for distributing traffic. * Distributor table (*new*): - *id* ``(sa.String(36) , nullable=False)`` primary key. The ID of a distributor. - *distributor\_type* ``(String(36) , nullable=False)`` The type of distributor: ``L3_ECMP。`` - *status* ``(String(36) , nullable=True)`` The status of distributor. - *router_id* ``(sa.String(36) , nullable=False)`` ID of qrouter corresponding to the distributor. 1:1 relationship to router. * amphora\_registration table(\ *new*) - lb\_id ``(sa.String(36) , nullable=False)`` N:1 relationship to loadbalancer. - distributor\_id ``(sa.String(36) , nullable=False)`` N:1 relationship to distributor - amphora\_id ``(sa.String(36) , nullable=False)`` 1:1 relationship to an amphora. - position ``(sa.Integer, nullable=True)`` The order in which Amphora is registered on the Distributor. REST API impact --------------- * Distributor API -- Since qrouter is used as a distributor, this API actually operates qrouter via network plugin. 1. ``enable proxy response`` This call will enable the qrouter to respond ARP requests in the same subnet. 2. ``disable proxy response`` This call will disable the qrouter to respond ARP requests in the same subnet. 3. ``register amphora`` This call will configure equal-cost routing on the qrouter. - amphora\_id Amphora for running load balancing services. - vip\_ip The ip address of VIP - nexthop\_ip Amphora's IP on back-end networks 4. ``unregister amphora`` This call will unregister Amphora on the qrouter and remove the equal-cost route. * Extended Amphora API 1. ``plug vip on loopback``\ ： This call will add the VIP to loopback interface of the Amphora. - vip\_ip The ip address of VIP 2. ``unplug vip on loopback`` This call will delete the VIP from loopback interface of the Amphora. - vip\_ip The ip address of VIP Security impact --------------- Notifications impact -------------------- Other end user impact --------------------- Performance Impact ------------------ Other deployer impact --------------------- Developer impact ---------------- Implementation ============== Assignee(s) ----------- Work Items ---------- Dependencies ============ Testing ======= * Unit tests with tox. * Function tests with tox. Documentation Impact ==================== The API-Ref documentation will need to be updated for load balancer create/update/delete. References ========== * `Active-Active Topology <https://blueprints.launchpad.net/octavia/+spec/active-active-topology/>`__ * `L3 Active-Active Distributor <https://blueprints.launchpad.net/octavia/+spec/l3-active-active>`__",,401,0
openstack%2Foctavia-tempest-plugin~master~Ia2f62ce38d96b72f2b9d81b555708564fdf90550,openstack/octavia-tempest-plugin,master,Ia2f62ce38d96b72f2b9d81b555708564fdf90550,Updating _test_pool_CRUD to enable testing of updates to the load balancer algorithm:,NEW,2021-01-11 17:36:58.000000000,2021-07-29 22:14:59.000000000,,"[{'_account_id': 13995}, {'_account_id': 18894}, {'_account_id': 22348}, {'_account_id': 28609}, {'_account_id': 29244}, {'_account_id': 29681}, {'_account_id': 31664}]","[{'number': 1, 'created': '2021-01-11 17:36:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/4c0f9b094c7a973dbad8651f3d208ed51390ac6d', 'message': 'Updating _test_pool_CRUD:\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 2, 'created': '2021-01-12 16:55:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/4abcc2387efa107f9f0bca4cc51141402c98b7cb', 'message': 'Updating _test_pool_CRUD:\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 3, 'created': '2021-01-12 17:35:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/20a104a3004052835985b99f1004fa3a24826ce3', 'message': 'Updating _test_pool_CRUD:\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 4, 'created': '2021-01-13 08:11:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/d76c0fd9df1ebc50b125bd5e51c5c78175017d87', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the \nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 5, 'created': '2021-01-13 11:13:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/c227ccda845616d78bb0d5fe563ec65621b9ebf4', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the \nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 6, 'created': '2021-01-13 13:47:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/e921aa1dda072dc4501b3661767e0abaf7ab1d65', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the \nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 7, 'created': '2021-01-17 07:25:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/37b110856f5745e04852a9ddbfb7de61a8b50380', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the \nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 8, 'created': '2021-01-18 09:03:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/24b41d23244d4023f76c64e99ff9ee752ce0316b', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the \nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 9, 'created': '2021-01-19 13:27:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/0b40141e24a41415b4190a85750bb8a1bcc46f7b', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the \nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 10, 'created': '2021-01-24 10:39:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/ba35f1503c6318ed6d97f991d3305d03e48c2098', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 11, 'created': '2021-01-25 14:25:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/61f85614c9d55e7f432ae4710f5217c0e0913665', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\ncommented out the restriction in line 553 that algorithm\ncannot change\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 12, 'created': '2021-01-26 10:08:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/bee52195030332d7e6c98b49c18d19ddb22674bb', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\ncommented out the restriction in line 553 that algorithm\ncannot change\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 13, 'created': '2021-01-26 14:23:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/0505c610e7a91f53e7266a563e6fda6d16ffae99', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n* commented out the restriction in line 553 that algorithm\n  cannot change\n* got rid of various ""noise"" characters that somehow got\n  inserted\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 14, 'created': '2021-01-27 14:31:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/28ac45771327af5c12a93a8ced489b4a4c9b3cc0', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n* commented out the restriction in line 553 that algorithm\n  cannot change\n* got rid of various ""noise"" characters that somehow got\n  inserted\n* cancelled checks that wouldn\'t allow algorithm change\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 15, 'created': '2021-03-10 09:51:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/5c84a85e8fafe0ce4d926bd0f0a2e8b081704ad0', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n* commented out the restriction in line 553 that algorithm\n  cannot change\n* got rid of various ""noise"" characters that somehow got\n  inserted\n* cancelled checks that wouldn\'t allow algorithm change\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 16, 'created': '2021-04-07 09:10:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/6fc01c9b5b82e35a185186fec9264bf135e69394', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n* commented out the restriction in line 553 that algorithm\n  cannot change\n* got rid of various ""noise"" characters that somehow got\n  inserted\n* cancelled checks that wouldn\'t allow algorithm change\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 17, 'created': '2021-05-02 09:05:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/3ceae99ba91cdf15335f3b7d53e6cc3263939702', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n* commented out the restriction in line 553 that algorithm\n  cannot change\n* got rid of various ""noise"" characters that somehow got\n  inserted\n* cancelled checks that wouldn\'t allow algorithm change\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 18, 'created': '2021-05-05 13:55:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/96986ce4e9fb145e04b142e0f4fc390e6cd9688d', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\nwith Arkady\'s fixes\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n* commented out the restriction in line 553 that algorithm\n  cannot change\n* got rid of various ""noise"" characters that somehow got\n  inserted\n* cancelled checks that wouldn\'t allow algorithm change\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 19, 'created': '2021-05-05 16:02:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/640564de526b5f4a4080175f453e4f869c5ec6a7', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\n\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 20, 'created': '2021-05-06 08:20:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/b88bce2375610e7d427a159510c4b27a464d839c', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\n\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 21, 'created': '2021-05-09 12:35:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/97e8adb790f520f152b302a2ff8acb74036a9b92', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\n\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}, {'number': 22, 'created': '2021-06-29 10:19:38.000000000', 'files': ['octavia_tempest_plugin/tests/scenario/v2/test_pool.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/bb50e84f3d5070ccdfb1630320fcf5cadd9b960d', 'message': 'Updating _test_pool_CRUD to enable testing of updates to the\nload balancer algorithm:\n\nAdded a new parameter ""next_algorithm"" that defaults to None.\nIf next_algorithm is not None then the update of the pool\nwill also update the pool\'s loadbalancing algorithm.\nPrevious tests without this parameter ARE NOT AFFECTED.\n\nNew Test:\ntest_UDP_SIP_to_LC_pool_with_listener_CRUD\ntests the result of updating the pool\'s\nloadbalancing algorithm\nfix-now\n\nChange-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550\n'}]",115,770163,bb50e84f3d5070ccdfb1630320fcf5cadd9b960d,90,7,22,32137,,,0,"Updating _test_pool_CRUD to enable testing of updates to the
load balancer algorithm:

Added a new parameter ""next_algorithm"" that defaults to None.
If next_algorithm is not None then the update of the pool
will also update the pool's loadbalancing algorithm.
Previous tests without this parameter ARE NOT AFFECTED.

New Test:
test_UDP_SIP_to_LC_pool_with_listener_CRUD
tests the result of updating the pool's
loadbalancing algorithm
fix-now

Change-Id: Ia2f62ce38d96b72f2b9d81b555708564fdf90550
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/63/770163/22 && git format-patch -1 --stdout FETCH_HEAD,['octavia_tempest_plugin/tests/scenario/v2/test_pool.py'],1,4c0f9b094c7a973dbad8651f3d208ed51390ac6d,change-770163-21," @decorators.idempotent_id('1868a57c-a124-4011-bc7d-9e05b5b45104') def test_UDP_SIP_to_LC_pool_with_listener_CRUD(self): """""" Provides automated coverage for RHELOSP-63931 """""" self._test_pool_CRUD(listener_protocol=const.UDP, pool_protocol=const.UDP, protocol_port=54, algorithm=const.LB_ALGORITHM_SOURCE_IP_PORT, next_algorithm=const.LB_ALGORITHM_LEAST_CONNECTIONS) algorithm, session_persistence=None, next_algorithm=None): # set next_algorithm to algorithm if it wasn't defined next_algorithm = next_algorithm or algorithm if (next_algorithm == const.LB_ALGORITHM_SOURCE_IP_PORT and not self.mem_listener_client.is_version_supported( self.api_version, '2.13')): raise testtools.TestCase.skipException( 'Skipping this test as next load balancing algorithm ' 'SOURCE_IP_PORT requires API version 2.13 or newer.') const.LB_ALGORITHM: next_algorithm,"," algorithm, session_persistence=None):",24,1
openstack%2Fironic~master~I5da43dc244c1a4fa828a00c02e3aa5b5f1b71e14,openstack/ironic,master,I5da43dc244c1a4fa828a00c02e3aa5b5f1b71e14,Defer checking image size until instance info is built,MERGED,2021-07-05 05:04:33.000000000,2021-07-29 22:05:16.000000000,2021-07-06 13:06:50.000000000,"[{'_account_id': 4571}, {'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-07-05 05:04:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/4ee4379086859bf72967b1ab08e89db6bc89bcfa', 'message': ""WIP Don't validate instance_info until image values built\n\nChange-Id: I5da43dc244c1a4fa828a00c02e3aa5b5f1b71e14\n""}, {'number': 2, 'created': '2021-07-06 02:58:39.000000000', 'files': ['ironic/drivers/modules/agent.py', 'ironic/tests/unit/drivers/modules/test_agent.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/ad3ce797cfbd0093fcb1bafb8aaa38c39f08926a', 'message': ""Defer checking image size until instance info is built\n\nThe image size check is skipped if the image is raw and will be\nstreamed directly to disk. However metalsmith does not expose\ninstance_info so it is not possible to set image_disk_format=raw.\n\nimage_disk_format is detected and set during\nbuild_instance_info_for_deploy but this is run *after* the call to\ncheck_image_size. This results in large raw whole-disk images always\nfailing check_image_size when deployed by metalsmith (or any time\nimage_disk_format isn't explicitly set).\n\nThis change avoids that by moving the check_image_size call out of\nvalidate to after the call to build_instance_info_for_deploy.\n\nBlueprint: whole-disk-default\nChange-Id: I5da43dc244c1a4fa828a00c02e3aa5b5f1b71e14\n""}]",0,799431,ad3ce797cfbd0093fcb1bafb8aaa38c39f08926a,15,4,2,4571,,,0,"Defer checking image size until instance info is built

The image size check is skipped if the image is raw and will be
streamed directly to disk. However metalsmith does not expose
instance_info so it is not possible to set image_disk_format=raw.

image_disk_format is detected and set during
build_instance_info_for_deploy but this is run *after* the call to
check_image_size. This results in large raw whole-disk images always
failing check_image_size when deployed by metalsmith (or any time
image_disk_format isn't explicitly set).

This change avoids that by moving the check_image_size call out of
validate to after the call to build_instance_info_for_deploy.

Blueprint: whole-disk-default
Change-Id: I5da43dc244c1a4fa828a00c02e3aa5b5f1b71e14
",git fetch https://review.opendev.org/openstack/ironic refs/changes/31/799431/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/drivers/modules/agent.py', 'ironic/tests/unit/drivers/modules/test_agent.py']",2,4ee4379086859bf72967b1ab08e89db6bc89bcfa,image_info_validate," task.driver.deploy._validate, task) task.driver.deploy._validate, task) task.driver.deploy._validate, task)"," task.driver.deploy.validate, task) task.driver.deploy.validate, task) task.driver.deploy.validate, task)",16,6
openstack%2Fironic-python-agent-builder~master~I2e05038992937da7653b65f86305a3514bec6b3d,openstack/ironic-python-agent-builder,master,I2e05038992937da7653b65f86305a3514bec6b3d,DNM/WIP - Add FIPS job,NEW,2021-06-23 19:24:35.000000000,2021-07-29 21:27:47.000000000,,"[{'_account_id': 4571}, {'_account_id': 7973}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-23 19:24:35.000000000', 'files': ['playbooks/enable-fips.yaml', 'zuul.d/ironic-python-agent-builder-jobs.yaml', 'zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/7511f5e6bbbc0f77a4e6b51f5da1a9819e2f4db6', 'message': 'DNM/WIP - Add FIPS job\n\nThis change adds a job to confirm that nothing is broken when FIPS\nmode is enabled.  To speed up testing, the other check jobs have\nbeen temporarily removed.\n\nChange-Id: I2e05038992937da7653b65f86305a3514bec6b3d\n'}]",0,797743,7511f5e6bbbc0f77a4e6b51f5da1a9819e2f4db6,2,4,1,9914,,,0,"DNM/WIP - Add FIPS job

This change adds a job to confirm that nothing is broken when FIPS
mode is enabled.  To speed up testing, the other check jobs have
been temporarily removed.

Change-Id: I2e05038992937da7653b65f86305a3514bec6b3d
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/43/797743/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/enable-fips.yaml', 'zuul.d/ironic-python-agent-builder-jobs.yaml', 'zuul.d/project.yaml']",3,7511f5e6bbbc0f77a4e6b51f5da1a9819e2f4db6,add_fips_job, - ironic-standalone-ipa-src-fips, templates: - publish-openstack-docs-pti - check-requirements - release-notes-jobs-python3 - openstack-tox-pep8 - ironic-standalone-ipa-src - ipa-tempest-bios-ipmi-direct-tinyipa-src - ironic-python-agent-check-image-tinyipa - ironic-python-agent-check-image-dib-centos8 - ironic-python-agent-check-image-dib-centos8-extra - ironic-python-agent-check-image-dib-centos7 - ironic-python-agent-check-image-dib-debian - ironic-python-agent-check-image-dib-debian-extra # Non-voting jobs - ironic-python-agent-check-image-dib-centos7-python3: voting: false - ironic-python-agent-check-image-dib-fedora: voting: false - ironic-python-agent-check-image-dib-ubuntu: voting: false - ironic-python-agent-check-image-dib-opensuse: voting: false - ipa-tempest-bios-ipmi-direct-src: voting: false - ipa-tempest-ironic-inspector-src: voting: false - tripleo-buildimage-ironic-python-agent-centos-8: voting: false - ironic-python-agent-test-image-tinyipa-ussuri: voting: false,12,30
openstack%2Fopenstack-ansible-os_neutron~master~Ie0d42a83653c0e60d27c3c626179defdc4906357,openstack/openstack-ansible-os_neutron,master,Ie0d42a83653c0e60d27c3c626179defdc4906357,Adding https option for calico metadata service,ABANDONED,2021-07-29 03:13:08.000000000,2021-07-29 21:14:45.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-29 03:13:08.000000000', 'files': ['templates/felix.cfg.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_neutron/commit/08d5ac631cbf2bd1f0d2fc74dfaa021455bc36a1', 'message': 'Adding https option for calico metadata service\n\nChange-Id: Ie0d42a83653c0e60d27c3c626179defdc4906357\n'}]",0,802819,08d5ac631cbf2bd1f0d2fc74dfaa021455bc36a1,3,1,1,28752,,,0,"Adding https option for calico metadata service

Change-Id: Ie0d42a83653c0e60d27c3c626179defdc4906357
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_neutron refs/changes/19/802819/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/felix.cfg.j2'],1,08d5ac631cbf2bd1f0d2fc74dfaa021455bc36a1,osa/calico,MetadataAddr = https://{{ internal_lb_vip_address }}LogSeverityScreen = Fatal ,MetadataAddr = {{ internal_lb_vip_address }}LogSeverityScreen = Fatal,2,2
openstack%2Foctavia-tempest-plugin~master~I7615f03dc363e73a045b5a913020ad045eaa8b70,openstack/octavia-tempest-plugin,master,I7615f03dc363e73a045b5a913020ad045eaa8b70,Add member API tests that do not pass subnet ID,ABANDONED,2020-08-27 18:15:46.000000000,2021-07-29 21:04:03.000000000,,"[{'_account_id': 1131}, {'_account_id': 11628}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-08-27 18:15:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/e6d59770ab63126121d6f036f3f2e5c97a096493', 'message': 'Add member API tests that do not pass subnet ID\n\nSince the subnet ID is an optional argument for member\noperations, create a new sub-class MemberAPITestNoSubnetID\nthat omits it from all the member API calls.\n\nChange-Id: I7615f03dc363e73a045b5a913020ad045eaa8b70\n'}, {'number': 2, 'created': '2020-09-04 18:45:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/8af9c42edf0654fa8fe251e5731734285597de44', 'message': 'Add member API tests that do not pass subnet ID\n\nSince the subnet ID is an optional argument for member\noperations, create a new sub-class MemberAPITestNoSubnetID\nthat omits it from all the member API calls.\n\nChange-Id: I7615f03dc363e73a045b5a913020ad045eaa8b70\n'}, {'number': 3, 'created': '2020-09-04 19:19:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/acc3b96c60724d7cf9d4d08c2109a0bb2ce68117', 'message': 'Add member API tests that do not pass subnet ID\n\nSince the subnet ID is an optional argument for member\noperations, create tests that omit it from all the member\nAPI calls.\n\nChange-Id: I7615f03dc363e73a045b5a913020ad045eaa8b70\n'}, {'number': 4, 'created': '2020-10-06 16:21:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/0bd481e6c0fed45dd6edf2a96bab7a89c4f4aa25', 'message': 'Add member API tests that do not pass subnet ID\n\nSince the subnet ID is an optional argument for member\noperations, create a new sub-class MemberAPITestNoSubnetID\nthat omits it from all the member API calls.\n\nChange-Id: I7615f03dc363e73a045b5a913020ad045eaa8b70\n'}, {'number': 5, 'created': '2021-06-23 19:19:03.000000000', 'files': ['octavia_tempest_plugin/tests/api/v2/test_member.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/10883fca4c60bcf01d2d6464939204bc572a786d', 'message': 'Add member API tests that do not pass subnet ID\n\nSince the subnet ID is an optional argument for member\noperations, create a new sub-class MemberAPITestNoSubnetID\nthat omits it from all the member API calls.\n\nChange-Id: I7615f03dc363e73a045b5a913020ad045eaa8b70\n'}]",2,748502,10883fca4c60bcf01d2d6464939204bc572a786d,21,3,5,1131,,,0,"Add member API tests that do not pass subnet ID

Since the subnet ID is an optional argument for member
operations, create a new sub-class MemberAPITestNoSubnetID
that omits it from all the member API calls.

Change-Id: I7615f03dc363e73a045b5a913020ad045eaa8b70
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/02/748502/4 && git format-patch -1 --stdout FETCH_HEAD,['octavia_tempest_plugin/tests/api/v2/test_member.py'],1,e6d59770ab63126121d6f036f3f2e5c97a096493,pass-subnetid," pass_subnet_id = True if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: if self.lb_member_vip_subnet and self.pass_subnet_id: class MemberAPITestNoSubnetID(MemberAPITest): """"""Test the member object API, not passing the optional subnet ID."""""" pass_subnet_id = False", if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet: if self.lb_member_vip_subnet:,18,10
openstack%2Foctavia-tempest-plugin~master~I1d9311e0b4e07920002b2f4e25812a3c536029a2,openstack/octavia-tempest-plugin,master,I1d9311e0b4e07920002b2f4e25812a3c536029a2,Always pass subnet ID to member_create(),ABANDONED,2020-07-23 19:32:35.000000000,2021-07-29 21:03:51.000000000,,"[{'_account_id': 1131}, {'_account_id': 11628}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-23 19:32:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/0ce8d2d45f5b8f99052b323fc4c7460575538e61', 'message': ""Always pass subnet ID to member_create()\n\nThere are two test scenarios that are not passing a subnet ID\nto member_create() - test_member_delete() and test_member_list().\nThe OVN provider driver requires the subnet ID, so change them\nto pass it since it is present, and since all the other tests\nin the class already do.\n\nFixed a test member name as well to match it's arguments.\n\nChange-Id: I1d9311e0b4e07920002b2f4e25812a3c536029a2\nStory: 2007954\nTask: 40433\n""}, {'number': 2, 'created': '2020-07-23 19:32:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/0425e402c3af23fec2f8da19e6db374e88effb01', 'message': ""Always pass subnet ID to member_create()\n\nThere are two test scenarios that are not passing a subnet ID\nto member_create() - test_member_delete() and test_member_list().\nThe OVN provider driver requires the subnet ID, so change them\nto pass it since it is present, and since all the other tests\nin the class already do.\n\nFixed a test member name as well to match it's arguments.\n\nChange-Id: I1d9311e0b4e07920002b2f4e25812a3c536029a2\nStory: 2007954\nTask: 40433\n""}, {'number': 3, 'created': '2020-08-20 19:13:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/b94550e3a58618a1eb129d2832840ae35e1427b6', 'message': ""Always pass subnet ID to member_create()\n\nThere are two test scenarios that are not passing a subnet ID\nto member_create() - test_member_delete() and test_member_list().\nThe OVN provider driver requires the subnet ID, so change them\nto pass it since it is present, and since all the other tests\nin the class already do.\n\nFixed a test member name as well to match it's arguments.\n\nChange-Id: I1d9311e0b4e07920002b2f4e25812a3c536029a2\nStory: 2007954\nTask: 40433\n""}, {'number': 4, 'created': '2020-08-27 18:15:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/e551af210421f46298268e648706dacbe362539f', 'message': ""Always pass subnet ID to member_create()\n\nThere are two test scenarios that are not passing a subnet ID\nto member_create() - test_member_delete() and test_member_list().\nThe OVN provider driver requires the subnet ID, so change them\nto pass it since it is present, and since all the other tests\nin the class already do.\n\nFixed a test member name as well to match it's arguments.\n\nA follow-on patch will run all these tests without any subnet ID\nsince it is an optional argument.\n\nChange-Id: I1d9311e0b4e07920002b2f4e25812a3c536029a2\nStory: 2007954\nTask: 40433\n""}, {'number': 5, 'created': '2020-10-06 16:17:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/9d5a6eee1973f18a8e7c3b921ebb9a4e0e522fa6', 'message': ""Always pass subnet ID to member_create()\n\nThere are two test scenarios that are not passing a subnet ID\nto member_create() - test_member_delete() and test_member_list().\nThe OVN provider driver requires the subnet ID, so change them\nto pass it since it is present, and since all the other tests\nin the class already do.\n\nFixed a test member name as well to match it's arguments.\n\nA follow-on patch will run all these tests without any subnet ID\nsince it is an optional argument.\n\nChange-Id: I1d9311e0b4e07920002b2f4e25812a3c536029a2\nStory: 2007954\nTask: 40433\n""}, {'number': 6, 'created': '2021-06-23 19:18:26.000000000', 'files': ['octavia_tempest_plugin/tests/api/v2/test_member.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/41ac74762cd09b89687c62666305fef898b803a4', 'message': ""Always pass subnet ID to member_create()\n\nThere are two test scenarios that are not passing a subnet ID\nto member_create() - test_member_delete() and test_member_list().\nThe OVN provider driver requires the subnet ID, so change them\nto pass it since it is present, and since all the other tests\nin the class already do.\n\nFixed a test member name as well to match it's arguments.\n\nA follow-on patch will run all these tests without any subnet ID\nsince it is an optional argument.\n\nChange-Id: I1d9311e0b4e07920002b2f4e25812a3c536029a2\nStory: 2007954\nTask: 40433\n""}]",0,742728,41ac74762cd09b89687c62666305fef898b803a4,19,3,6,1131,,,0,"Always pass subnet ID to member_create()

There are two test scenarios that are not passing a subnet ID
to member_create() - test_member_delete() and test_member_list().
The OVN provider driver requires the subnet ID, so change them
to pass it since it is present, and since all the other tests
in the class already do.

Fixed a test member name as well to match it's arguments.

A follow-on patch will run all these tests without any subnet ID
since it is an optional argument.

Change-Id: I1d9311e0b4e07920002b2f4e25812a3c536029a2
Story: 2007954
Task: 40433
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/28/742728/3 && git format-patch -1 --stdout FETCH_HEAD,['octavia_tempest_plugin/tests/api/v2/test_member.py'],1,0ce8d2d45f5b8f99052b323fc4c7460575538e61,pass-subnetid," member1_name = data_utils.rand_name(""lb_member_member1-list"") if self.lb_member_vip_subnet: member1_kwargs[const.SUBNET_ID] = self.lb_member_vip_subnet[ const.ID] member2_name = data_utils.rand_name(""lb_member_member2-list"") if self.lb_member_vip_subnet: member2_kwargs[const.SUBNET_ID] = self.lb_member_vip_subnet[ const.ID] if self.lb_member_vip_subnet: member3_kwargs[const.SUBNET_ID] = self.lb_member_vip_subnet[ const.ID] if self.lb_member_vip_subnet: member_kwargs[const.SUBNET_ID] = self.lb_member_vip_subnet[ const.ID] "," member1_name = data_utils.rand_name(""lb_member_member2-list"") member2_name = data_utils.rand_name(""lb_member_member1-list"")",22,2
