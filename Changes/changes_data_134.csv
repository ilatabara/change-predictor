id,project,branch,change_id,subject,status,created,updated,submitted,reviewers,revisions,total_comment_count,number,current_revision,discussion_messages_count,reviewers_count,revisions_count,owner_account_id,owner_name,owner_username,is_owner_bot,commit_message,git_command,changed_files,files_count,commit_id,topic,added_lines,deleted_lines,insertions,deletions
openstack%2Fmanila~stable%2Ftrain~I42d76c7a085e3ded04b45f89469b4b66d6a426ce,openstack/manila,stable/train,I42d76c7a085e3ded04b45f89469b4b66d6a426ce,Add missing oslo.service options,MERGED,2021-10-26 22:19:46.000000000,2021-11-03 16:22:55.000000000,2021-11-03 16:19:47.000000000,"[{'_account_id': 9816}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}, {'_account_id': 30407}]","[{'number': 1, 'created': '2021-10-26 22:19:46.000000000', 'files': ['etc/oslo-config-generator/manila.conf'], 'web_link': 'https://opendev.org/openstack/manila/commit/176914ad455769bb265cd2a85b8251a26e06a79d', 'message': 'Add missing oslo.service options\n\nCloses-Bug: #1940734\nChange-Id: I42d76c7a085e3ded04b45f89469b4b66d6a426ce\n(cherry picked from commit c1eaf108f8bdec5d34bcd8d59a843d3c3bfa1880)\n(cherry picked from commit 92b8330f99fe4a5109165bd63a41b2b41a58e949)\n(cherry picked from commit 857d01d2ec6dbaab3e2ec68ddec8c69fca544eb5)\n(cherry picked from commit 5f7198a0b4f884b39099564ec62161015e69dc17)\n'}]",3,815561,176914ad455769bb265cd2a85b8251a26e06a79d,11,5,1,16643,,,0,"Add missing oslo.service options

Closes-Bug: #1940734
Change-Id: I42d76c7a085e3ded04b45f89469b4b66d6a426ce
(cherry picked from commit c1eaf108f8bdec5d34bcd8d59a843d3c3bfa1880)
(cherry picked from commit 92b8330f99fe4a5109165bd63a41b2b41a58e949)
(cherry picked from commit 857d01d2ec6dbaab3e2ec68ddec8c69fca544eb5)
(cherry picked from commit 5f7198a0b4f884b39099564ec62161015e69dc17)
",git fetch https://review.opendev.org/openstack/manila refs/changes/61/815561/1 && git format-patch -1 --stdout FETCH_HEAD,['etc/oslo-config-generator/manila.conf'],1,176914ad455769bb265cd2a85b8251a26e06a79d,bug/1940733,namespace = oslo.service.periodic_task namespace = oslo.service.servicenamespace = oslo.service.wsgi,,3,0
openstack%2Fpuppet-cinder~master~I4b1d749a5f5b95711ded14bb9a887de2360f0f74,openstack/puppet-cinder,master,I4b1d749a5f5b95711ded14bb9a887de2360f0f74,Prepare to update default of <service>::wsgi::apache::ssl,MERGED,2021-11-03 02:42:06.000000000,2021-11-03 16:17:30.000000000,2021-11-03 16:15:50.000000000,"[{'_account_id': 14985}, {'_account_id': 21129}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-03 02:42:06.000000000', 'files': ['manifests/wsgi/apache.pp', 'releasenotes/notes/prepare-to-change-apache-ssl-9b553e3246b4658f.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-cinder/commit/f222f3d7c27878dacf15defa40e950558a1a02ef', 'message': ""Prepare to update default of <service>::wsgi::apache::ssl\n\nCurrently the <service>::wsgi::apache::ssl parameters have inconsistent\ndefault values. Some parameters default to true while the other default\nto false.\n\nBased on the following points, false is considered to be the more\nreasonable default.\n - Usage of SSL is optional and is not always required\n - There are other methods(like load-balancer) to implement SSL\n   termination\n - Enabling SSL doesn't work with the default values currently\n   defined, and requires additional parameters like ssl_cert.\n - false is the default value defined in the base implementation in\n   puppet-openstacklib.\n\nThis change is the preparation to change the default value, and\nintroduces a warning message to make users aware of the future change.\n\nChange-Id: I4b1d749a5f5b95711ded14bb9a887de2360f0f74\n""}]",1,816426,f222f3d7c27878dacf15defa40e950558a1a02ef,9,3,1,9816,,,0,"Prepare to update default of <service>::wsgi::apache::ssl

Currently the <service>::wsgi::apache::ssl parameters have inconsistent
default values. Some parameters default to true while the other default
to false.

Based on the following points, false is considered to be the more
reasonable default.
 - Usage of SSL is optional and is not always required
 - There are other methods(like load-balancer) to implement SSL
   termination
 - Enabling SSL doesn't work with the default values currently
   defined, and requires additional parameters like ssl_cert.
 - false is the default value defined in the base implementation in
   puppet-openstacklib.

This change is the preparation to change the default value, and
introduces a warning message to make users aware of the future change.

Change-Id: I4b1d749a5f5b95711ded14bb9a887de2360f0f74
",git fetch https://review.opendev.org/openstack/puppet-cinder refs/changes/26/816426/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/wsgi/apache.pp', 'releasenotes/notes/prepare-to-change-apache-ssl-9b553e3246b4658f.yaml']",2,f222f3d7c27878dacf15defa40e950558a1a02ef,apache-ssl,--- upgrade: - | Default value of the ``cinder::wsgi::apache::ssl`` parameter will be changed from ``true`` to ``false`` in a future release. Make sure the parameter is set to the desired value. ,,14,3
openstack%2Ftripleo-quickstart-extras~master~I4286e1d0867fc972517f8e27665f43777c2da52a,openstack/tripleo-quickstart-extras,master,I4286e1d0867fc972517f8e27665f43777c2da52a,Set DockerInsecureRegistryAddress consistantly,MERGED,2021-11-01 06:36:34.000000000,2021-11-03 15:45:56.000000000,2021-11-03 15:45:56.000000000,"[{'_account_id': 6926}, {'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}]","[{'number': 1, 'created': '2021-11-01 06:36:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/9f19ad88baa00f056356e9f61257b12a73c3ac42', 'message': 'Set DockerInsecureRegistryAddress consistantly\n\nSet DockerInsecureRegistryAddress consistantly\nacross standalone deploy/upgrade and undercloud\ndeploy roles.\n\nFollow up of [1].\n\n[1] https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/814699\n\nChange-Id: I4286e1d0867fc972517f8e27665f43777c2da52a\n'}, {'number': 2, 'created': '2021-11-02 08:53:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/95db6d689aede70ee581328273ced88be972be9a', 'message': ""Set DockerInsecureRegistryAddress consistantly\n\nSet DockerInsecureRegistryAddress consistantly\nacross standalone deploy/upgrade and undercloud\ndeploy roles.\n\nAlso use local_docker_registry_host in place of standalone_ip\nas that's common for both undercloud and standalone deploys.\n\n\nFollow up of [1].\n\n[1] https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/814699\n\nChange-Id: I4286e1d0867fc972517f8e27665f43777c2da52a\n""}, {'number': 3, 'created': '2021-11-02 11:41:50.000000000', 'files': ['roles/undercloud-deploy/templates/containers-prepare-parameter.yaml.j2', 'roles/standalone-upgrade/templates/standalone_config.yaml.j2', 'roles/standalone/templates/standalone_config.yaml.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/40451a3f30d883fc70bd7f45348ff75a3af64288', 'message': ""Set DockerInsecureRegistryAddress consistantly\n\nSet DockerInsecureRegistryAddress consistantly\nacross standalone deploy/upgrade and undercloud\ndeploy roles.\n\nAlso include following changes:-\n- Use local_docker_registry_host in place of standalone_ip\nas that's common for both undercloud and standalone deploys.\n- Use quay.io instead of docker.io as a default registry due\nto rate limits with docker.io.\n\nFollow up of [1].\n\n[1] https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/814699\n\nChange-Id: I4286e1d0867fc972517f8e27665f43777c2da52a\n""}]",8,816123,40451a3f30d883fc70bd7f45348ff75a3af64288,29,7,3,13861,,,0,"Set DockerInsecureRegistryAddress consistantly

Set DockerInsecureRegistryAddress consistantly
across standalone deploy/upgrade and undercloud
deploy roles.

Also include following changes:-
- Use local_docker_registry_host in place of standalone_ip
as that's common for both undercloud and standalone deploys.
- Use quay.io instead of docker.io as a default registry due
to rate limits with docker.io.

Follow up of [1].

[1] https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/814699

Change-Id: I4286e1d0867fc972517f8e27665f43777c2da52a
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/23/816123/3 && git format-patch -1 --stdout FETCH_HEAD,"['roles/undercloud-deploy/templates/containers-prepare-parameter.yaml.j2', 'roles/standalone-upgrade/templates/standalone_config.yaml.j2', 'roles/standalone/templates/standalone_config.yaml.j2']",3,9f19ad88baa00f056356e9f61257b12a73c3ac42,, DockerInsecureRegistryAddress: - {{ local_docker_registry_host }}:8787 {% if build_container_images|default(false)|bool %}{% else %} - docker.io,{% if job.consumer_job|default(false)|bool or (standalone_container_prep_updates is defined and standalone_container_prep_updates) %} DockerInsecureRegistryAddress: - {{ standalone_ip }}:8787 {% if build_container_images|default(false)|bool or job.consumer_job|default(false)|bool %}{% endif %},11,6
openstack%2Fpuppet-neutron~master~I721f652ba3029f4cbfe0bf84ec06185d6b2640cd,openstack/puppet-neutron,master,I721f652ba3029f4cbfe0bf84ec06185d6b2640cd,ovn: Deprecate the ovn_remote_probe_interval parameter,MERGED,2021-06-16 12:47:23.000000000,2021-11-03 15:26:43.000000000,2021-11-03 15:24:29.000000000,"[{'_account_id': 11082}, {'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-16 12:47:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/d32468ac495891e3b83fc65687ada8ab014e9635', 'message': 'ovn: Deprecate the ovn_remote_probe_interval parameter\n\nThis parameter was added by c6b3800f7dd4e977f3234b5482d79d0959712855\nbut actually the corresponding parameter has never been implemented in\nneutron or networking-ovn.\n\nChange-Id: I721f652ba3029f4cbfe0bf84ec06185d6b2640cd\n'}, {'number': 2, 'created': '2021-11-02 13:48:18.000000000', 'files': ['releasenotes/notes/deprecate-ovn_remote_probe_interval-269bdab63be84041.yaml', 'spec/classes/neutron_agents_ovn_metadata_spec.rb', 'manifests/agents/ovn_metadata.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/ce2357d422dfe5c24861caaa6219eae27642c1e4', 'message': 'ovn: Deprecate the ovn_remote_probe_interval parameter\n\nThis parameter was added by c6b3800f7dd4e977f3234b5482d79d0959712855\nbut actually the corresponding parameter has never been implemented in\nneutron or networking-ovn.\n\nChange-Id: I721f652ba3029f4cbfe0bf84ec06185d6b2640cd\n'}]",2,796648,ce2357d422dfe5c24861caaa6219eae27642c1e4,14,4,2,9816,,,0,"ovn: Deprecate the ovn_remote_probe_interval parameter

This parameter was added by c6b3800f7dd4e977f3234b5482d79d0959712855
but actually the corresponding parameter has never been implemented in
neutron or networking-ovn.

Change-Id: I721f652ba3029f4cbfe0bf84ec06185d6b2640cd
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/48/796648/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/deprecate-ovn_remote_probe_interval-269bdab63be84041.yaml', 'manifests/agents/ovn_metadata.pp', 'spec/classes/neutron_agents_ovn_metadata_spec.rb']",3,d32468ac495891e3b83fc65687ada8ab014e9635,ovn,, should contain_ovn_metadata_agent_config('ovn/ovn_remote_probe_interval').with(:value => '<SERVICE DEFAULT>'),18,4
openstack%2Fbarbican~stable%2Ftrain~Ide37d64dff10d421817bf90b8e2e58bf6ac4f592,openstack/barbican,stable/train,Ide37d64dff10d421817bf90b8e2e58bf6ac4f592,Fix secret metadata access rules,MERGED,2021-11-02 20:31:37.000000000,2021-11-03 15:02:55.000000000,2021-11-03 15:01:03.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 20:31:37.000000000', 'files': ['barbican/api/controllers/secretmeta.py', 'barbican/api/controllers/secrets.py', 'barbican/api/controllers/__init__.py', 'barbican/common/policies/base.py', 'barbican/common/policies/secretmeta.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/3acf50a823bd61090d2c102a0cfa509651a8956a', 'message': 'Fix secret metadata access rules\n\nThis patch fixes the legacy policy rules for accessing secret metadata\nby checking that the user making the request is authenticated for the\nproject that owns the secret.\n\nStory: 2009253\nTask: 43456\n\nChange-Id: Ide37d64dff10d421817bf90b8e2e58bf6ac4f592\n(cherry picked from commit 7d270bacbe29a90a10f1855abc3b50dac0f08022)\n(cherry picked from commit 750a79b4f5fbb94b1a1d0f329a0c8a51566b2cae)\n(cherry picked from commit 64a4242454a65df17abc10e13861463a2de71813)\n(cherry picked from commit 86d7d6411075a15cdea742acfa9f6d0ca42c044c)\n(cherry picked from commit 32702400655675d30ebe53b2151da77532d56bb1)\n'}]",0,816338,3acf50a823bd61090d2c102a0cfa509651a8956a,7,2,1,7973,,,0,"Fix secret metadata access rules

This patch fixes the legacy policy rules for accessing secret metadata
by checking that the user making the request is authenticated for the
project that owns the secret.

Story: 2009253
Task: 43456

Change-Id: Ide37d64dff10d421817bf90b8e2e58bf6ac4f592
(cherry picked from commit 7d270bacbe29a90a10f1855abc3b50dac0f08022)
(cherry picked from commit 750a79b4f5fbb94b1a1d0f329a0c8a51566b2cae)
(cherry picked from commit 64a4242454a65df17abc10e13861463a2de71813)
(cherry picked from commit 86d7d6411075a15cdea742acfa9f6d0ca42c044c)
(cherry picked from commit 32702400655675d30ebe53b2151da77532d56bb1)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/38/816338/1 && git format-patch -1 --stdout FETCH_HEAD,"['barbican/api/controllers/secretmeta.py', 'barbican/api/controllers/secrets.py', 'barbican/api/controllers/__init__.py', 'barbican/common/policies/base.py', 'barbican/common/policies/secretmeta.py']",5,3acf50a823bd61090d2c102a0cfa509651a8956a,story/2009247-stable/wallaby-stable/victoria-stable/ussuri-stable/train," check_str='rule:secret_non_private_read or ' + 'rule:secret_project_creator or ' + 'rule:secret_project_admin or rule:secret_acl_read', check_str='rule:secret_project_admin or ' + 'rule:secret_project_creator or ' + '(rule:secret_project_creator_role and ' + 'rule:secret_non_private_read)', check_str='rule:secret_project_admin or ' + 'rule:secret_project_creator or ' + '(rule:secret_project_creator_role and ' + 'rule:secret_non_private_read)', check_str='rule:secret_project_admin or ' + 'rule:secret_project_creator or ' + '(rule:secret_project_creator_role and ' + 'rule:secret_non_private_read)',"," check_str='rule:all_but_audit', check_str='rule:admin_or_creator', check_str='rule:admin_or_creator', check_str='rule:admin_or_creator',",30,13
openstack%2Fansible-role-pki~master~I22359f986cb419ff92c96223dc20f79536da353c,openstack/ansible-role-pki,master,I22359f986cb419ff92c96223dc20f79536da353c,Force regen of cert when requested,ABANDONED,2021-11-03 14:30:56.000000000,2021-11-03 15:00:32.000000000,,[{'_account_id': 28619}],"[{'number': 1, 'created': '2021-11-03 14:30:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/0f550ad14bfaa90b9981df050b4844757bff36aa', 'message': 'Force regen of cert when requested\n\nFixes issue when pki_regen_cert=true the role will regenerate the\nCSR, but not sign the cert or regenerate the chain.\n\nChange-Id: I22359f986cb419ff92c96223dc20f79536da353c\n'}, {'number': 2, 'created': '2021-11-03 14:39:03.000000000', 'files': ['vars/main.yml', 'tasks/standalone/create_cert.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/730a91e353e15aae2cca576e085e050c333167ec', 'message': 'Force regen of cert when requested\n\nFixes issue when pki_regen_cert=true the role will regenerate the\nCSR, but not sign the cert or regenerate the chain.\n\nFor reference there is no need to regen the chain if the\nintermediate has changed, as if the intermediate  has changed\nthe cert will need to be regenerated anyway to be singed by the\nnew intermediate.\n\nChange-Id: I22359f986cb419ff92c96223dc20f79536da353c\n'}]",2,816520,730a91e353e15aae2cca576e085e050c333167ec,5,1,2,31749,,,0,"Force regen of cert when requested

Fixes issue when pki_regen_cert=true the role will regenerate the
CSR, but not sign the cert or regenerate the chain.

For reference there is no need to regen the chain if the
intermediate has changed, as if the intermediate  has changed
the cert will need to be regenerated anyway to be singed by the
new intermediate.

Change-Id: I22359f986cb419ff92c96223dc20f79536da353c
",git fetch https://review.opendev.org/openstack/ansible-role-pki refs/changes/20/816520/2 && git format-patch -1 --stdout FETCH_HEAD,"['vars/main.yml', 'tasks/standalone/create_cert.yml']",2,0f550ad14bfaa90b9981df050b4844757bff36aa,cert-changed, force: true when: cert_crt is changed," creates: ""{{ _cert_chain_file }}""",3,2
openstack%2Fopenstack-ansible-ceph_client~master~Id41f9eef3408b75dc1b58a94442910b0394be062,openstack/openstack-ansible-ceph_client,master,Id41f9eef3408b75dc1b58a94442910b0394be062,Ensure role not fail when mon_host is not part of ceph_extra_confs,MERGED,2021-10-19 14:08:48.000000000,2021-11-03 14:39:40.000000000,2021-11-03 14:36:51.000000000,"[{'_account_id': 13095}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2021-10-19 14:08:48.000000000', 'files': ['tasks/ceph_auth_extra_compute.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-ceph_client/commit/ae7cdd2a974512c356f97ecdee8e03d6d57759ca', 'message': 'Ensure role not fail when mon_host is not part of ceph_extra_confs\n\nCurrently we do not check if mon_host is defined and part of\nceph_extra_confs while attempting to remove files created by previous\nsteps. This causes failure since keys are not defined and are not required\n\nChange-Id: Id41f9eef3408b75dc1b58a94442910b0394be062\nCloses-Bug: #1939454\n'}]",0,814586,ae7cdd2a974512c356f97ecdee8e03d6d57759ca,9,4,1,28619,,,0,"Ensure role not fail when mon_host is not part of ceph_extra_confs

Currently we do not check if mon_host is defined and part of
ceph_extra_confs while attempting to remove files created by previous
steps. This causes failure since keys are not defined and are not required

Change-Id: Id41f9eef3408b75dc1b58a94442910b0394be062
Closes-Bug: #1939454
",git fetch https://review.opendev.org/openstack/openstack-ansible-ceph_client refs/changes/86/814586/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/ceph_auth_extra_compute.yml'],1,ae7cdd2a974512c356f97ecdee8e03d6d57759ca,bug/1939454, when: - item.mon_host is defined - item.client_name is defined when: - item.mon_host is defined - item.client_name is defined when: - item.mon_host is defined - item.client_name is defined,,9,0
openstack%2Ftripleo-image-elements~master~Ifd45de35a548f728360ab9cb364077976344c4e0,openstack/tripleo-image-elements,master,Ifd45de35a548f728360ab9cb364077976344c4e0,Add Victoria release info,ABANDONED,2021-01-03 01:45:33.000000000,2021-11-03 14:35:01.000000000,,"[{'_account_id': 7144}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-01-03 01:45:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-image-elements/commit/bd0b8ac0816f30888edcf5b96b6ac28a7b44b728', 'message': 'Add Victoria release info\n\nAdd the lack of release information for Victoria, this patch added it.\n\nChange-Id: Ifd45de35a548f728360ab9cb364077976344c4e0\n'}, {'number': 2, 'created': '2021-01-05 16:13:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-image-elements/commit/5e14ea681f6406a411ff6a8a35eab60be0b01dab', 'message': 'Add Victoria release info\n\nAdd the lack of release information for Victoria, this patch added it.\n\nChange-Id: Ifd45de35a548f728360ab9cb364077976344c4e0\n'}, {'number': 3, 'created': '2021-01-06 16:32:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-image-elements/commit/c0f0f62e62571581c6b18074505d6c411b145dfa', 'message': 'Add Victoria release info\n\nAdd the lack of release information for Victoria, this patch added it.\n\nChange-Id: Ifd45de35a548f728360ab9cb364077976344c4e0\n'}, {'number': 4, 'created': '2021-03-12 23:02:18.000000000', 'files': ['releasenotes/source/victoria.rst', 'releasenotes/source/index.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-image-elements/commit/f768fbc0dbd61a3a4985ba2914f20f3815657e59', 'message': 'Add Victoria release info\n\nAdd the lack of release information for Victoria, this patch added it.\n\nChange-Id: Ifd45de35a548f728360ab9cb364077976344c4e0\n'}]",0,768899,f768fbc0dbd61a3a4985ba2914f20f3815657e59,10,2,4,30384,,,0,"Add Victoria release info

Add the lack of release information for Victoria, this patch added it.

Change-Id: Ifd45de35a548f728360ab9cb364077976344c4e0
",git fetch https://review.opendev.org/openstack/tripleo-image-elements refs/changes/99/768899/4 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/source/victoria.rst', 'releasenotes/source/index.rst']",2,bd0b8ac0816f30888edcf5b96b6ac28a7b44b728,, victoria,,7,0
openstack%2Fpuppet-tacker~master~Ie398735b69c08fe35322e4255d2fcbc6b95ccb07,openstack/puppet-tacker,master,Ie398735b69c08fe35322e4255d2fcbc6b95ccb07,Bump puppetlabs-inifile,MERGED,2021-11-02 04:10:50.000000000,2021-11-03 14:32:11.000000000,2021-11-03 14:32:11.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:10:50.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-tacker/commit/197a7783fb85f2a1bbd514fad801f5515a3b48dc', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Ie398735b69c08fe35322e4255d2fcbc6b95ccb07\n'}]",0,816288,197a7783fb85f2a1bbd514fad801f5515a3b48dc,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Ie398735b69c08fe35322e4255d2fcbc6b95ccb07
",git fetch https://review.opendev.org/openstack/puppet-tacker refs/changes/88/816288/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,197a7783fb85f2a1bbd514fad801f5515a3b48dc,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fironic-python-agent~master~I5a9c694ebe626c54f219d4870eab0a592777518d,openstack/ironic-python-agent,master,I5a9c694ebe626c54f219d4870eab0a592777518d,Stop requiring mocking of utils.execute if ironic-lib execute is mocked,MERGED,2021-10-27 12:26:11.000000000,2021-11-03 14:22:48.000000000,2021-11-03 14:19:52.000000000,"[{'_account_id': 11292}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-10-27 12:26:11.000000000', 'files': ['ironic_python_agent/tests/unit/test_base.py', 'ironic_python_agent/tests/unit/base.py'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/b360214cf222dd91fda214dac419789e16a79bfe', 'message': ""Stop requiring mocking of utils.execute if ironic-lib execute is mocked\n\nBased on unit tests, this was done intentionally, but I don't see\nreasons for that. It makes refactoring much harder, because sometimes\nyou need to mock both execute functions and test them separately.\n\nIn the end, utils.execute should be removed.\n\nChange-Id: I5a9c694ebe626c54f219d4870eab0a592777518d\n""}]",1,815629,b360214cf222dd91fda214dac419789e16a79bfe,8,3,1,10239,,,0,"Stop requiring mocking of utils.execute if ironic-lib execute is mocked

Based on unit tests, this was done intentionally, but I don't see
reasons for that. It makes refactoring much harder, because sometimes
you need to mock both execute functions and test them separately.

In the end, utils.execute should be removed.

Change-Id: I5a9c694ebe626c54f219d4870eab0a592777518d
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/29/815629/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/tests/unit/test_base.py', 'ironic_python_agent/tests/unit/base.py']",2,b360214cf222dd91fda214dac419789e16a79bfe,ipa-execute, # ironic_python_agent.utils.execute is an alias of ironic_lib one,"from ironic_python_agent import utils self.patch(utils, 'execute', do_not_call)",1,17
openstack%2Ftripleo-ansible~master~I93cded61ffb862e99fd8043dbf0def3d16079692,openstack/tripleo-ansible,master,I93cded61ffb862e99fd8043dbf0def3d16079692,Add ping test for all networks gateway IPs,MERGED,2021-10-28 21:08:33.000000000,2021-11-03 14:08:07.000000000,2021-11-03 14:08:07.000000000,"[{'_account_id': 6926}, {'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 21:08:33.000000000', 'files': ['tripleo_ansible/roles/tripleo_nodes_validation/defaults/main.yml', 'tripleo_ansible/roles/tripleo_nodes_validation/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/70a37f4ec8b61c784aed051322aa0dfc84ebdfee', 'message': ""Add ping test for all networks gateway IPs\n\nAdd ping test for gateway IPs on all networks, to ensure\nall gateways are reachable.\n\nThe releated Bugzilla reports an issue where some network\nfabrics fail when using the current node ping test, which\npings the first node in each role. The fabric simply does\nnot forward traffic before the gateway has been pinged.\n\nOne can argue that the fabric in question is broken. However,\nwith the current implementation the first node in each role\nactually ping tests only against it's own address? So adding\nthe test to ping the gateway addresses improves the validation\nin general.\n\nRelated RHBZ#1875962\n\nChange-Id: I93cded61ffb862e99fd8043dbf0def3d16079692\n""}]",6,815908,70a37f4ec8b61c784aed051322aa0dfc84ebdfee,16,5,1,24245,,,0,"Add ping test for all networks gateway IPs

Add ping test for gateway IPs on all networks, to ensure
all gateways are reachable.

The releated Bugzilla reports an issue where some network
fabrics fail when using the current node ping test, which
pings the first node in each role. The fabric simply does
not forward traffic before the gateway has been pinged.

One can argue that the fabric in question is broken. However,
with the current implementation the first node in each role
actually ping tests only against it's own address? So adding
the test to ping the gateway addresses improves the validation
in general.

Related RHBZ#1875962

Change-Id: I93cded61ffb862e99fd8043dbf0def3d16079692
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/08/815908/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_nodes_validation/defaults/main.yml', 'tripleo_ansible/roles/tripleo_nodes_validation/tasks/main.yml']",2,70a37f4ec8b61c784aed051322aa0dfc84ebdfee,RHBZ1875962,"# Ping test the gateway IPs before nodes, see RHBZ#1875962 - name: Check all networks Gateway availability command: ""{{ (':' in gateway_ip) | ternary('ping6', 'ping') }} -w 10 -c 1 {{ gateway_ip }}"" retries: 10 delay: 60 loop_control: loop_var: gateway_ip loop: ""{{ tripleo_nodes_validation_ping_test_gateway_ips }}"" changed_when: false when: - tripleo_nodes_validation_validate_gateway_icmp|bool - tripleo_nodes_validation_ping_test_gateway_ips | length > 0 ",,14,0
openstack%2Fcharm-nova-cloud-controller~master~Ibecca8b2ce12e06695d6771e6761766c8609637c,openstack/charm-nova-cloud-controller,master,Ibecca8b2ce12e06695d6771e6761766c8609637c,Control dns timeout on short name lookup,NEW,2020-05-19 12:24:56.000000000,2021-11-03 13:33:55.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-19 12:24:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/1388a96e99a84cf7bde0ac61d226a6f7f52a41ce', 'message': 'Remove dns lookup for short name.\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 2, 'created': '2020-05-19 15:38:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/6ddb565fa67c1bac7fedca2f9a745f9f0bcfac97', 'message': 'Remove dns lookup for short name.\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 3, 'created': '2020-05-19 15:45:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/bfebdfa99afa11c7b2464a1fc37890dcb07a5f7f', 'message': 'Remove dns lookup for short name.\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 4, 'created': '2020-05-19 15:47:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/0edb7fa3d7545dfdead97e35524f70c6b10100cc', 'message': 'Control dns timeout on short name lookup\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 5, 'created': '2020-05-19 15:58:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/76ae8a51588592ddb9fdc9dcda0fe85e11058b3c', 'message': 'Control dns timeout on short name lookup\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 6, 'created': '2020-05-19 16:22:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/1ee404ba8468aa35dfeecc7893465f9a87153677', 'message': 'Control dns timeout on short name lookup\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 7, 'created': '2020-05-20 06:12:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/333a19379a906cd26e9999c323a938db060186cd', 'message': 'Control dns timeout on short name lookup\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 8, 'created': '2020-05-20 06:32:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/dd84a0fc2f36a5ece661b75ac4133739f0e56861', 'message': 'Control dns timeout on short name lookup\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}, {'number': 9, 'created': '2021-11-03 12:12:54.000000000', 'files': ['hooks/nova_cc_utils.py'], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/71fe0540a9c8f03d2313ea233e5a3cadf8ad13ab', 'message': 'Control dns timeout on short name lookup\n\nChange-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c\nCloses-bug: #1879492\nSigned-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>\n'}]",4,729232,71fe0540a9c8f03d2313ea233e5a3cadf8ad13ab,27,3,9,25817,,,0,"Control dns timeout on short name lookup

Change-Id: Ibecca8b2ce12e06695d6771e6761766c8609637c
Closes-bug: #1879492
Signed-off-by: José Pekkarinen <jose.pekkarinen@canonical.com>
",git fetch https://review.opendev.org/openstack/charm-nova-cloud-controller refs/changes/32/729232/8 && git format-patch -1 --stdout FETCH_HEAD,['hooks/nova_cc_utils.py'],1,1388a96e99a84cf7bde0ac61d226a6f7f52a41ce,bug/1879492,, short = hn.split('.')[0] if ch_ip.ns_query(short): hosts.add(short.lower()),0,3
openstack%2Fpuppet-placement~stable%2Fwallaby~If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,openstack/puppet-placement,stable/wallaby,If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,Tag the httpd service only when it is used,MERGED,2021-11-02 00:08:59.000000000,2021-11-03 13:26:03.000000000,2021-11-03 13:26:03.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:08:59.000000000', 'files': ['manifests/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-placement/commit/568b61b585f710a778e34a83a3c6a21b17c77b55', 'message': 'Tag the httpd service only when it is used\n\nCurrently the placement-service tag is always added to the httpd\nservice, but it should not if an independent service is used to run\nplacement-api.\n\nChange-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456\n(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)\n(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)\n'}]",2,816232,568b61b585f710a778e34a83a3c6a21b17c77b55,13,3,1,9816,,,0,"Tag the httpd service only when it is used

Currently the placement-service tag is always added to the httpd
service, but it should not if an independent service is used to run
placement-api.

Change-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456
(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)
(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)
",git fetch https://review.opendev.org/openstack/puppet-placement refs/changes/32/816232/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/api.pp'],1,568b61b585f710a778e34a83a3c6a21b17c77b55,, Service <| title == 'httpd' |> { tag +> 'placement-service' }, Service <| title == 'httpd' |> { tag +> 'placement-service' },1,2
openstack%2Fmagnum~stable%2Ftrain~Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,openstack/magnum,stable/train,Ie3c8dff0bad6db483b54086afed0402ef24b0b4b,Don't use OpenDev infra mirror for F29 images,MERGED,2021-11-02 21:34:56.000000000,2021-11-03 13:23:51.000000000,2021-11-03 13:21:41.000000000,"[{'_account_id': 22348}, {'_account_id': 28022}]","[{'number': 1, 'created': '2021-11-02 21:34:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/8e7ace96e0518510057dacc6d61389a77e1d116c', 'message': ""Don't use OpenDev infra mirror for F29 images\n\nOpenDev infra is going to remove these images from the mirrors.\nDirectly reference the upstream images.\n\nCherry-Picked-From: cea527a6435b2dff5ee5a06815da242914103f96\nChange-Id: Ie3c8dff0bad6db483b54086afed0402ef24b0b4b\n""}, {'number': 2, 'created': '2021-11-02 22:00:47.000000000', 'files': ['magnum/tests/contrib/gate_hook.sh'], 'web_link': 'https://opendev.org/openstack/magnum/commit/1052eefd6c209378485b9f1a10cb75c90366e9f0', 'message': ""Don't use OpenDev infra mirror for F29 images\n\nOpenDev infra is going to remove these images from the mirrors.\nDirectly reference the upstream images.\n\nCherry-Picked-From: cea527a6435b2dff5ee5a06815da242914103f96\nChange-Id: Ie3c8dff0bad6db483b54086afed0402ef24b0b4b\n""}]",0,816408,1052eefd6c209378485b9f1a10cb75c90366e9f0,8,2,2,7118,,,0,"Don't use OpenDev infra mirror for F29 images

OpenDev infra is going to remove these images from the mirrors.
Directly reference the upstream images.

Cherry-Picked-From: cea527a6435b2dff5ee5a06815da242914103f96
Change-Id: Ie3c8dff0bad6db483b54086afed0402ef24b0b4b
",git fetch https://review.opendev.org/openstack/magnum refs/changes/08/816408/2 && git format-patch -1 --stdout FETCH_HEAD,['magnum/tests/contrib/gate_hook.sh'],1,8e7ace96e0518510057dacc6d61389a77e1d116c,," export DEVSTACK_LOCAL_CONFIG+=$'\n'""MAGNUM_GUEST_IMAGE_URL='https://dl.fedoraproject.org/pub/alt/atomic/stable/Fedora-29-updates-20190820.0/AtomicHost/x86_64/images/Fedora-AtomicHost-29-20190820.0.x86_64.qcow2'""","NODEPOOL_ATOMIC_MIRROR=${NODEPOOL_FEDORA_MIRROR:-https://download.fedoraproject.org/pub/alt} export DEVSTACK_LOCAL_CONFIG+=$'\n'""MAGNUM_GUEST_IMAGE_URL='${NODEPOOL_ATOMIC_MIRROR}/atomic/stable/Fedora-29-updates-20190820.0/AtomicHost/x86_64/images/Fedora-AtomicHost-29-20190820.0.x86_64.qcow2'""",1,3
openstack%2Fneutron~stable%2Fxena~Ib1e3b78597ebdde1aa9d2b242e2005a05a7db89f,openstack/neutron,stable/xena,Ib1e3b78597ebdde1aa9d2b242e2005a05a7db89f,[OVN Migration] Remove trunk's subports from the nodes,MERGED,2021-10-26 10:31:28.000000000,2021-11-03 13:08:46.000000000,2021-11-03 13:06:44.000000000,"[{'_account_id': 8313}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 10:31:28.000000000', 'files': ['tools/ovn_migration/tripleo_environment/playbooks/roles/migration/tasks/cleanup-dataplane.yml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/e91b0d07e3db9200914e2070fb056725494d924f', 'message': ""[OVN Migration] Remove trunk's subports from the nodes\n\nAfter migration from ML2/OVS to ML2/OVN trunk subports which were created\nby the neutron-ovs-agent to connect br-int with trunk bridges (tbr-)\naren't needed anymore and should be deleted.\n\nCloses-Bug: #1946479\nChange-Id: Ib1e3b78597ebdde1aa9d2b242e2005a05a7db89f\n(cherry picked from commit bf6831e0d2ad33ff751f06d568abe6cedff4d717)\n""}]",1,815432,e91b0d07e3db9200914e2070fb056725494d924f,10,3,1,11975,,,0,"[OVN Migration] Remove trunk's subports from the nodes

After migration from ML2/OVS to ML2/OVN trunk subports which were created
by the neutron-ovs-agent to connect br-int with trunk bridges (tbr-)
aren't needed anymore and should be deleted.

Closes-Bug: #1946479
Change-Id: Ib1e3b78597ebdde1aa9d2b242e2005a05a7db89f
(cherry picked from commit bf6831e0d2ad33ff751f06d568abe6cedff4d717)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/32/815432/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/ovn_migration/tripleo_environment/playbooks/roles/migration/tasks/cleanup-dataplane.yml'],1,e91b0d07e3db9200914e2070fb056725494d924f,bug/1946479-stable/xena,- name: Cleanup neutron trunk subports shell: | ovs-vsctl list interface | awk '/name[ ]*: sp[it]-/ { print $3 }' | xargs -n1 ovs-vsctl del-port,,3,0
openstack%2Fansible-hardening~master~I56851f56aa85108a4898ef99c48ac77c898ccb69,openstack/ansible-hardening,master,I56851f56aa85108a4898ef99c48ac77c898ccb69,Explicitly create clamav socket directory,MERGED,2021-10-20 12:27:28.000000000,2021-11-03 13:01:11.000000000,2021-11-03 12:57:39.000000000,"[{'_account_id': 13095}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2021-10-20 12:27:28.000000000', 'files': ['vars/redhat-8.yml', 'vars/redhat-7.yml', 'tasks/rhel7stig/misc.yml'], 'web_link': 'https://opendev.org/openstack/ansible-hardening/commit/9d6a927d8c18891cb7caa67e05635a26fd171695', 'message': ""Explicitly create clamav socket directory\n\nWhile most our supported distributions does create LocalSocket on their\nown, it's not always the case and shouldn't be trusted that much.\n\nChange-Id: I56851f56aa85108a4898ef99c48ac77c898ccb69\nCloses-Bug: #1944564\n""}]",0,814748,9d6a927d8c18891cb7caa67e05635a26fd171695,9,4,1,28619,,,0,"Explicitly create clamav socket directory

While most our supported distributions does create LocalSocket on their
own, it's not always the case and shouldn't be trusted that much.

Change-Id: I56851f56aa85108a4898ef99c48ac77c898ccb69
Closes-Bug: #1944564
",git fetch https://review.opendev.org/openstack/ansible-hardening refs/changes/48/814748/1 && git format-patch -1 --stdout FETCH_HEAD,"['vars/redhat-8.yml', 'vars/redhat-7.yml', 'tasks/rhel7stig/misc.yml']",3,9d6a927d8c18891cb7caa67e05635a26fd171695,bug/1944564," line: ""LocalSocket {{ clamav_service_details['socket_path'] }}""- name: Ensure ClamAV socket directory exists file: path: ""{{ clamav_service_details['socket_path'] | dirname }}"" user: ""{{ clamav_service_details['user'] }}"" group: ""{{ clamav_service_details['group'] }}"" mode: ""{{ clamav_service_details['mode'] }}"" when: - clamav_install_check.stat.exists - security_enable_virus_scanner | bool - ansible_facts['os_family'] | lower == 'redhat' notify: - restart clamav tags: - misc - V-72213 ", line: 'LocalSocket \2',31,1
openstack%2Fmetalsmith~master~I9a50f796b0b2ce762e1054a6b5e900ccd53bf796,openstack/metalsmith,master,I9a50f796b0b2ce762e1054a6b5e900ccd53bf796,Update pep8 test requirements,MERGED,2021-10-19 09:44:00.000000000,2021-11-03 12:58:30.000000000,2021-11-03 12:55:52.000000000,"[{'_account_id': 4571}, {'_account_id': 10239}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-19 09:44:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/metalsmith/commit/494483b8a5da44d519be1daa796ab8511213c2aa', 'message': 'Update pep8 test requirements\n\nChange-Id: I9a50f796b0b2ce762e1054a6b5e900ccd53bf796\n'}, {'number': 2, 'created': '2021-10-28 12:53:54.000000000', 'files': ['doc/source/_exts/ansible-autodoc.py', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/metalsmith/commit/5e5e421ddd2b9a2f040af03696d78b642ac1034d', 'message': 'Update pep8 test requirements\n\nChange-Id: I9a50f796b0b2ce762e1054a6b5e900ccd53bf796\n'}]",1,814543,5e5e421ddd2b9a2f040af03696d78b642ac1034d,17,3,2,23851,,,0,"Update pep8 test requirements

Change-Id: I9a50f796b0b2ce762e1054a6b5e900ccd53bf796
",git fetch https://review.opendev.org/openstack/metalsmith refs/changes/43/814543/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,494483b8a5da44d519be1daa796ab8511213c2aa,upgrade-test-deps," doc8>=0.8.1 # Apache-2.0 hacking>=4.1.0,<5.0.0 # Apache-2.0 pycodestyle>=2.0.0,<3.0.0 # MIT"," doc8>=0.6.0 # Apache-2.0 hacking>=3.1.0,<4.0.0 # Apache-2.0 pycodestyle>=2.0.0,<2.7.0 # MIT",3,3
openstack%2Fpuppet-designate~master~I2fc87d6a4a166779e34210a377c99b313a0f1b97,openstack/puppet-designate,master,I2fc87d6a4a166779e34210a377c99b313a0f1b97,Add Designate API WSGI support,MERGED,2021-11-01 17:53:10.000000000,2021-11-03 12:58:26.000000000,2021-11-03 12:56:27.000000000,"[{'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 17:53:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/9dce4746716f5166806573fb1680aeb33a556738', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 2, 'created': '2021-11-02 05:30:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/71d3129613230cd1c3f4ab5b2d8e639bb3eeb2f1', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 3, 'created': '2021-11-02 05:52:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/c35c2f3186c102b7fe3204f355f5a2fcd5a5950d', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 4, 'created': '2021-11-02 07:12:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/da8ebf26d2a5bdfc770bebacfd82537b419b996b', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 5, 'created': '2021-11-02 07:31:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/f7e556d3ac80b2ca13e5c7f8e20691b4b460cda6', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 6, 'created': '2021-11-02 07:59:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/c90bce12dab7df3b4170331932ee64c316ff6f6d', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 7, 'created': '2021-11-02 08:14:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/9b807da7d2b5648756ec61dcd982ec6222b5a7d6', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 8, 'created': '2021-11-02 08:38:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/845e032f7f7d9fd822ef5397acfb5ac2ab9738b5', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 9, 'created': '2021-11-02 13:35:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/0582931e0f8f240e42a9ad63703161fbedd1b3b1', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}, {'number': 10, 'created': '2021-11-02 13:57:50.000000000', 'files': ['manifests/wsgi/apache.pp', 'releasenotes/notes/designate-api-wsgi-b7a408ecc00f3001.yaml', 'manifests/api.pp', 'manifests/params.pp', 'spec/classes/designate_api_spec.rb', 'spec/classes/designate_wsgi_apache_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/1288b062e8f0ac88eea9eb6e83ba6cffd119c982', 'message': 'Add Designate API WSGI support\n\nAdd support for running the Designate API under WSGI with Apache.\n\nChange-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97\n'}]",18,816200,1288b062e8f0ac88eea9eb6e83ba6cffd119c982,30,4,10,6681,,,0,"Add Designate API WSGI support

Add support for running the Designate API under WSGI with Apache.

Change-Id: I2fc87d6a4a166779e34210a377c99b313a0f1b97
",git fetch https://review.opendev.org/openstack/puppet-designate refs/changes/00/816200/8 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/wsgi/apache.pp', 'releasenotes/notes/designate-api-wsgi-b7a408ecc00f3001.yaml', 'manifests/api.pp', 'manifests/params.pp', 'spec/classes/designate_api_spec.rb']",5,9dce4746716f5166806573fb1680aeb33a556738,designate-wsgi," shared_examples 'designate-api wsgi' do let :pre_condition do ""class { 'designate': } include ::designate::db class { '::designate::keystone::authtoken': password => 'password', } include ::apache "" let :params do { :service_name => 'httpd', } end context 'with required params' do it { should contain_package('designate-api').with( :ensure => 'present', :name => platform_params[:api_package_name], :tag => ['openstack', 'designate-package'], )} it { should contain_service('designate-api').with( :ensure => 'stopped', :name => platform_params[:api_service_name], :enable => false, :tag => ['designate-api', 'designate-db-sync-service'] )} end end it_behaves_like 'designate-api wsgi'",,249,24
openstack%2Ftripleo-quickstart~master~I0b670246ec6fe77632855c05c9d705be6359d820,openstack/tripleo-quickstart,master,I0b670246ec6fe77632855c05c9d705be6359d820,Install tripleo.operator collections,MERGED,2021-08-20 13:43:26.000000000,2021-11-03 12:48:08.000000000,2021-11-03 12:46:01.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 27427}, {'_account_id': 29775}, {'_account_id': 32114}]","[{'number': 1, 'created': '2021-08-20 13:43:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/2a126049328ab72266a71fad2249cd6f19dc2c2a', 'message': 'Install tripleo.operator collections\n\nInstalling the undercloud is falling due to the lack of the\ntripleo.operator collection. This patch installs the\ntripleo.operator when the dependencies are installed.\n\nCloses-Bug: #1940652\nChange-Id: I0b670246ec6fe77632855c05c9d705be6359d820\n'}, {'number': 2, 'created': '2021-08-20 15:17:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/588666e2f62039dc240b42cf459a55fcca748645', 'message': 'Install tripleo.operator collections\n\nInstalling the undercloud is falling due to the lack of the\ntripleo.operator collection. This patch installs the\ntripleo.operator when the dependencies are installed.\n\nCloses-Bug: #1940652\nChange-Id: I0b670246ec6fe77632855c05c9d705be6359d820\n'}, {'number': 3, 'created': '2021-09-20 15:30:48.000000000', 'files': ['quickstart-extras-requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/70f9a6bd6da7fbb6839d09c74775c59b6d347608', 'message': 'Install tripleo.operator collections\n\nInstalling the undercloud is falling due to the lack of the\ntripleo.operator collection. This patch installs the\ntripleo.operator when the dependencies are installed.\n\nCloses-Bug: #1940652\nChange-Id: I0b670246ec6fe77632855c05c9d705be6359d820\n'}]",10,805384,70f9a6bd6da7fbb6839d09c74775c59b6d347608,61,11,3,22954,,,0,"Install tripleo.operator collections

Installing the undercloud is falling due to the lack of the
tripleo.operator collection. This patch installs the
tripleo.operator when the dependencies are installed.

Closes-Bug: #1940652
Change-Id: I0b670246ec6fe77632855c05c9d705be6359d820
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/84/805384/1 && git format-patch -1 --stdout FETCH_HEAD,['install-deps.sh'],1,2a126049328ab72266a71fad2249cd6f19dc2c2a,bug/1940652, ansible-galaxy collection install tripleo.operator,,1,0
openstack%2Foslo.messaging~stable%2Ftrain~I46d20ae85ddb5c76119ce90bf06aeb4584bd7607,openstack/oslo.messaging,stable/train,I46d20ae85ddb5c76119ce90bf06aeb4584bd7607,[trivial] fix typos (missing a white space),MERGED,2021-07-15 11:33:00.000000000,2021-11-03 12:47:16.000000000,2021-11-03 12:45:26.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-15 11:33:00.000000000', 'files': ['oslo_messaging/_drivers/impl_rabbit.py'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/4627f14ff8313c9793757984f535824a6e069d12', 'message': '[trivial] fix typos (missing a white space)\n\nBad rendering in docs [1][2].\n\n[1] https://docs.openstack.org/oslo.messaging/train/configuration/opts.html#oslo_messaging_rabbit.heartbeat_in_pthread\n[2] https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/configuration_reference/barbican#annotations:295aeb97-f9bd-40bb-8ab5-753b8bd76fab\n\nChange-Id: I46d20ae85ddb5c76119ce90bf06aeb4584bd7607\n'}]",0,800917,4627f14ff8313c9793757984f535824a6e069d12,7,2,1,28522,,,0,"[trivial] fix typos (missing a white space)

Bad rendering in docs [1][2].

[1] https://docs.openstack.org/oslo.messaging/train/configuration/opts.html#oslo_messaging_rabbit.heartbeat_in_pthread
[2] https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.1/html/configuration_reference/barbican#annotations:295aeb97-f9bd-40bb-8ab5-753b8bd76fab

Change-Id: I46d20ae85ddb5c76119ce90bf06aeb4584bd7607
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/17/800917/1 && git format-patch -1 --stdout FETCH_HEAD,['oslo_messaging/_drivers/impl_rabbit.py'],1,4627f14ff8313c9793757984f535824a6e069d12,missing-whitespace," help=""EXPERIMENTAL: Run the health check heartbeat thread "" ""through a native python thread. By default if this "" ""option isn't provided the health check heartbeat will "" ""inherit the execution model from the parent process. "" ""By example if the parent process have monkey patched "" ""the stdlib by using eventlet/greenlet then the "" ""heartbeat will be run through a green thread.""),"," help=""EXPERIMENTAL: Run the health check heartbeat thread"" ""through a native python thread. By default if this"" ""option isn't provided the health check heartbeat will"" ""inherit the execution model from the parent process. By"" ""example if the parent process have monkey patched the"" ""stdlib by using eventlet/greenlet then the heartbeat"" ""will be run through a green thread.""),",7,7
openstack%2Fneutron~stable%2Fwallaby~I200acfcaaae7f056ea9a563fead9ff2de8464971,openstack/neutron,stable/wallaby,I200acfcaaae7f056ea9a563fead9ff2de8464971,[DVR] Fix update of the MTU in the SNAT namespace,MERGED,2021-10-07 09:21:50.000000000,2021-11-03 12:45:41.000000000,2021-11-03 12:43:36.000000000,"[{'_account_id': 8313}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-07 09:21:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/82a8aacbd9acd2056a1721d98d3ac97bdfc721f7', 'message': '[DVR] Fix update of the MTU in the SNAT namespace\n\nWhen network\'s MTU is changed, Neutron sends notification about it\nto the L3 agents. In case of DVR (and DVR HA) MTU is then changed in\nthe qrouter- namespace but should be also changed on snat interfaces\nin the snat namespace. And that part was missing.\n\nThis patch adds special implementation of the internal_network_updated()\nmethod in the DvrEdgeRouter class so it can configure MTU also for\nin the snat namespace.\n\nThis patch also removed passing attributes ""interface_name"",\n""ip_cidrs"" and ""mtu"" to the internal_network_updated() method and adds\n""port"" dict to be passed there. It is consistent with what is already\ndone in e.g. internal_network_added() method and ""port"" dict is actually\nnecessary to configure properly snat internal interface in the snat\nnamespace.\n\nThis patch adds also functional test of update network mtu for all types\nof routers as there was no such test at all.\n\nThere is additional issue with DVR-HA which isn\'t fixed with that patch\nand for which follow up will be proposed. Because of that this patch is\nmarked as partial fix for the related bug.\n\nConflicts:\n    neutron/tests/functional/agent/l3/test_dvr_router.py\n\nRelated-Bug: #1933273\nChange-Id: I200acfcaaae7f056ea9a563fead9ff2de8464971\n(cherry picked from commit b5dd6efdca0aa6e7405a55d66c7042a49ec72214)\n'}, {'number': 2, 'created': '2021-10-13 12:34:36.000000000', 'files': ['neutron/tests/functional/agent/l3/test_legacy_router.py', 'neutron/agent/l3/ha_router.py', 'neutron/tests/functional/agent/l3/test_dvr_router.py', 'neutron/agent/l3/router_info.py', 'neutron/tests/functional/agent/l3/test_ha_router.py', 'neutron/agent/l3/dvr_edge_router.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/67c9a305df31b9abc55c364e669e6b4cefb83a72', 'message': '[DVR] Fix update of the MTU in the SNAT namespace\n\nWhen network\'s MTU is changed, Neutron sends notification about it\nto the L3 agents. In case of DVR (and DVR HA) MTU is then changed in\nthe qrouter- namespace but should be also changed on snat interfaces\nin the snat namespace. And that part was missing.\n\nThis patch adds special implementation of the internal_network_updated()\nmethod in the DvrEdgeRouter class so it can configure MTU also for\nin the snat namespace.\n\nThis patch also removed passing attributes ""interface_name"",\n""ip_cidrs"" and ""mtu"" to the internal_network_updated() method and adds\n""port"" dict to be passed there. It is consistent with what is already\ndone in e.g. internal_network_added() method and ""port"" dict is actually\nnecessary to configure properly snat internal interface in the snat\nnamespace.\n\nThis patch adds also functional test of update network mtu for all types\nof routers as there was no such test at all.\n\nThere is additional issue with DVR-HA which isn\'t fixed with that patch\nand for which follow up will be proposed. Because of that this patch is\nmarked as partial fix for the related bug.\n\nConflicts:\n    neutron/tests/functional/agent/l3/test_dvr_router.py\n\nRelated-Bug: #1933273\nChange-Id: I200acfcaaae7f056ea9a563fead9ff2de8464971\n(cherry picked from commit b5dd6efdca0aa6e7405a55d66c7042a49ec72214)\n'}]",1,812939,67c9a305df31b9abc55c364e669e6b4cefb83a72,13,3,2,11975,,,0,"[DVR] Fix update of the MTU in the SNAT namespace

When network's MTU is changed, Neutron sends notification about it
to the L3 agents. In case of DVR (and DVR HA) MTU is then changed in
the qrouter- namespace but should be also changed on snat interfaces
in the snat namespace. And that part was missing.

This patch adds special implementation of the internal_network_updated()
method in the DvrEdgeRouter class so it can configure MTU also for
in the snat namespace.

This patch also removed passing attributes ""interface_name"",
""ip_cidrs"" and ""mtu"" to the internal_network_updated() method and adds
""port"" dict to be passed there. It is consistent with what is already
done in e.g. internal_network_added() method and ""port"" dict is actually
necessary to configure properly snat internal interface in the snat
namespace.

This patch adds also functional test of update network mtu for all types
of routers as there was no such test at all.

There is additional issue with DVR-HA which isn't fixed with that patch
and for which follow up will be proposed. Because of that this patch is
marked as partial fix for the related bug.

Conflicts:
    neutron/tests/functional/agent/l3/test_dvr_router.py

Related-Bug: #1933273
Change-Id: I200acfcaaae7f056ea9a563fead9ff2de8464971
(cherry picked from commit b5dd6efdca0aa6e7405a55d66c7042a49ec72214)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/39/812939/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/functional/agent/l3/test_legacy_router.py', 'neutron/agent/l3/ha_router.py', 'neutron/tests/functional/agent/l3/test_dvr_router.py', 'neutron/agent/l3/router_info.py', 'neutron/tests/functional/agent/l3/test_ha_router.py', 'neutron/agent/l3/dvr_edge_router.py']",6,82a8aacbd9acd2056a1721d98d3ac97bdfc721f7,bug/1933273-stable/wallaby," def internal_network_updated(self, port): super(DvrEdgeRouter, self).internal_network_updated(port) if not port: return if not self._is_this_snat_host(): return sn_port = self.get_snat_port_for_internal_port(port) if not sn_port: return ns_name = dvr_snat_ns.SnatNamespace.get_snat_ns_name(self.router['id']) interface_name = self._get_snat_int_device_name(sn_port['id']) self.driver.set_mtu(interface_name, port['mtu'], namespace=ns_name, prefix=lib_constants.SNAT_INT_DEV_PREFIX) ",,161,8
openstack%2Ftripleo-repos~master~I8bdd11c45f30a70e2fe3349f7eecb89f4751931f,openstack/tripleo-repos,master,I8bdd11c45f30a70e2fe3349f7eecb89f4751931f,Moving common functions to tripleo_repos.utils,MERGED,2021-10-29 19:10:46.000000000,2021-11-03 12:40:43.000000000,2021-11-03 12:40:43.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-10-29 19:10:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/1173346563a5e678cf97ea025da47fbc1a28e103', 'message': 'Moving common functions to tripleo_repos.utils\n\nThis patch moves common functions like http_get and\nlogging to tripleo_repos.utils so they can be used by\nany module.\n\nChange-Id: I8bdd11c45f30a70e2fe3349f7eecb89f4751931f\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}, {'number': 2, 'created': '2021-11-01 17:44:51.000000000', 'files': ['plugins/module_utils/tripleo_repos/get_hash/tripleo_hash_info.py', 'plugins/module_utils/tripleo_repos/yum_config/yum_config.py', 'plugins/module_utils/tripleo_repos/yum_config/__main__.py', 'tests/sanity/ignore.txt', 'plugins/module_utils/tripleo_repos/get_hash/__main__.py', 'plugins/module_utils/tripleo_repos/utils.py'], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/da713cb3593018485e5d784e2b5523c416ab3845', 'message': 'Moving common functions to tripleo_repos.utils\n\nThis patch moves common functions like http_get and\nlogging to tripleo_repos.utils so they can be used by\nany module.\n\nChange-Id: I8bdd11c45f30a70e2fe3349f7eecb89f4751931f\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}]",10,815991,da713cb3593018485e5d784e2b5523c416ab3845,14,6,2,30002,,,0,"Moving common functions to tripleo_repos.utils

This patch moves common functions like http_get and
logging to tripleo_repos.utils so they can be used by
any module.

Change-Id: I8bdd11c45f30a70e2fe3349f7eecb89f4751931f
Signed-off-by: Douglas Viroel <dviroel@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-repos refs/changes/91/815991/2 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/module_utils/tripleo_repos/get_hash/tripleo_hash_info.py', 'plugins/module_utils/tripleo_repos/yum_config/yum_config.py', 'plugins/module_utils/tripleo_repos/yum_config/__main__.py', 'plugins/module_utils/tripleo_repos/get_hash/__main__.py', 'plugins/module_utils/tripleo_repos/utils.py']",5,1173346563a5e678cf97ea025da47fbc1a28e103,yum_cfg_from_url,"# Copyright 2021 Red Hat, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # from __future__ import (absolute_import, division, print_function) import logging import sys # portable http_get that uses either ansible recommended way or python native # urllib. Also deals with python2 vs python3 for centos7 train jobs. py_version = sys.version_info.major if py_version < 3: import urllib2 def http_get(url): try: response = urllib2.urlopen(url) return ( response.read().decode('utf-8'), int(response.code)) except Exception as e: return (str(e), -1) else: try: from ansible.module_utils.urls import open_url def http_get(url): try: response = open_url(url, method='GET') return (response.read(), response.status) except Exception as e: return (str(e), -1) except ImportError: from urllib.request import urlopen def http_get(url): try: response = urlopen(url) return ( response.read().decode('utf-8'), int(response.status)) except Exception as e: return (str(e), -1) def load_logging(level=logging.INFO): """"""Load and set logging level. Default is set to logging.INFO level."""""" logger = logging.getLogger() # Only add logger once to avoid duplicated streams in tests if not logger.handlers: stdout_handlers = [ _handler for _handler in logger.handlers if ( hasattr(_handler, 'stream') and 'stdout' in _handler.stream.name ) ] if stdout_handlers == []: formatter = logging.Formatter( ( ""%(asctime)s - tripleo-get-hash - %(levelname)s - "" ""%(message)s"" ) ) handler = logging.StreamHandler(sys.stdout) handler.setFormatter(formatter) logger.addHandler(handler) logger.setLevel(level) ",,90,99
openstack%2Fdevstack~master~I7ab12141c558186e397c174c248a613d1810011b,openstack/devstack,master,I7ab12141c558186e397c174c248a613d1810011b,Make creation of keystone admin endpoint optional,MERGED,2021-02-24 09:11:43.000000000,2021-11-03 12:34:45.000000000,2021-11-03 12:30:10.000000000,"[{'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-02-24 09:11:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/01ef9891790a21f69b59583dc451adbb9a8d2b3d', 'message': ""Make creation of keystone admin endpoint optional\n\nThe keystone admin endpoint technically isn't different any longer from\nthe other keystone endpoints in v3 of the API. However, some\napplications like heat are still relying on it to exist.\n\nSo we make the creation of the admin endpoint during bootstrap optional\nhere, with the intention to change the default to False once all jobs\nthat still need this are modified to explicitly require it.\n\nChange-Id: I7ab12141c558186e397c174c248a613d1810011b\n""}, {'number': 2, 'created': '2021-10-17 17:40:31.000000000', 'files': ['lib/keystone'], 'web_link': 'https://opendev.org/openstack/devstack/commit/eb37657d8e34e1d0f8ee639c3953a752ba615d8d', 'message': ""Make creation of keystone admin endpoint optional\n\nThe keystone admin endpoint technically isn't different any longer from\nthe other keystone endpoints in v3 of the API. However, some\napplications like heat are still relying on it to exist.\n\nSo we make the creation of the admin endpoint during bootstrap optional\nhere, with the intention to change the default to False once all jobs\nthat still need this are modified to explicitly require it.\n\nChange-Id: I7ab12141c558186e397c174c248a613d1810011b\n""}]",4,777339,eb37657d8e34e1d0f8ee639c3953a752ba615d8d,12,3,2,13252,,,0,"Make creation of keystone admin endpoint optional

The keystone admin endpoint technically isn't different any longer from
the other keystone endpoints in v3 of the API. However, some
applications like heat are still relying on it to exist.

So we make the creation of the admin endpoint during bootstrap optional
here, with the intention to change the default to False once all jobs
that still need this are modified to explicitly require it.

Change-Id: I7ab12141c558186e397c174c248a613d1810011b
",git fetch https://review.opendev.org/openstack/devstack refs/changes/39/777339/2 && git format-patch -1 --stdout FETCH_HEAD,['lib/keystone'],1,01ef9891790a21f69b59583dc451adbb9a8d2b3d,remove-keystone-admin-endpoint,"# Whether to create a keystone admin endpoint for legacy applications KEYSTONE_ADMIN_ENDPOINT=$(trueorfalse True KEYSTONE_ADMIN_ENDPOINT) if [ ""$KEYSTONE_ADMIN_ENDPOINT"" == ""True"" ]; then openstack endpoint create --region ""$REGION_NAME"" \ --os-username admin \ --os-user-domain-id default \ --os-password ""$ADMIN_PASSWORD"" \ --os-project-name admin \ --os-project-domain-id default \ keystone admin ""$KEYSTONE_SERVICE_URI"" fi"," --bootstrap-admin-url ""$KEYSTONE_SERVICE_URI"" \",12,1
openstack%2Fdevstack~master~I549f3cadc27d137e014241cdd47e90267859c848,openstack/devstack,master,I549f3cadc27d137e014241cdd47e90267859c848,Stop creating a keystone admin site,MERGED,2020-06-14 16:17:53.000000000,2021-11-03 12:32:32.000000000,2021-11-03 12:30:07.000000000,"[{'_account_id': 13252}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-06-14 16:17:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/5d5f670fdd83aa273b6dcc7a710a0b3332498de8', 'message': 'Stop creating a keystone admin endpoint\n\nKeystone no longer has any special functionality hidden behind the admin\nendpoint. So stop creating it in order to ensure that consumers default\nto using the public endpoint instead.\n\nDepends-On: https://review.opendev.org/662734\nChange-Id: I549f3cadc27d137e014241cdd47e90267859c848\n'}, {'number': 2, 'created': '2020-06-14 16:35:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/fc39ca718682b38233a3265c9de4029e2f7016d3', 'message': 'Stop creating a keystone admin endpoint\n\nKeystone no longer has any special functionality hidden behind the admin\nendpoint. So stop creating it in order to ensure that consumers default\nto using the public endpoint instead.\n\nDepends-On: https://review.opendev.org/662734\nChange-Id: I549f3cadc27d137e014241cdd47e90267859c848\n'}, {'number': 3, 'created': '2020-06-18 07:11:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/a0bc5193cc9a0b826133137605d47301b6ae3547', 'message': 'Stop creating a keystone admin endpoint\n\nKeystone no longer has any special functionality hidden behind the admin\nendpoint. So stop creating it in order to ensure that consumers default\nto using the public endpoint instead.\n\nDepends-On: https://review.opendev.org/662734\nChange-Id: I549f3cadc27d137e014241cdd47e90267859c848\n'}, {'number': 4, 'created': '2021-02-24 09:11:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/c6a24b68e1f0555c73f3c7f1234293672a2e2d5c', 'message': 'Stop creating a keystone admin site\n\nKeystone no longer has any special functionality hidden behind the admin\nsite. KEYSTONE_AUTH_URI which used to point to the admin site has long\nago been changed to be a copy of KEYSTONE_SERVICE_URI, which points to\nthe public site.\n\nDrop all KEYSTONE_AUTH_* variables except KEYSTONE_AUTH_URI which may\nstill be in use in some plugins.\n\nThis also allows to finally drop the fixup_keystone() function.\n\nChange-Id: I549f3cadc27d137e014241cdd47e90267859c848\n'}, {'number': 5, 'created': '2021-10-17 17:24:56.000000000', 'files': ['lib/keystone', 'lib/swift', 'doc/source/configuration.rst', 'tools/fixup_stuff.sh', 'files/apache-keystone.template', 'stack.sh'], 'web_link': 'https://opendev.org/openstack/devstack/commit/c2491bac9d3b3f0446e67b4ea960cb88da9aec0e', 'message': 'Stop creating a keystone admin site\n\nKeystone no longer has any special functionality hidden behind the admin\nsite. KEYSTONE_AUTH_URI which used to point to the admin site has long\nago been changed to be a copy of KEYSTONE_SERVICE_URI, which points to\nthe public site.\n\nDrop all KEYSTONE_AUTH_* variables except KEYSTONE_AUTH_URI which may\nstill be in use in some plugins.\n\nThis also allows to finally drop the fixup_keystone() function.\n\nChange-Id: I549f3cadc27d137e014241cdd47e90267859c848\n'}]",10,735472,c2491bac9d3b3f0446e67b4ea960cb88da9aec0e,28,5,5,13252,,,0,"Stop creating a keystone admin site

Keystone no longer has any special functionality hidden behind the admin
site. KEYSTONE_AUTH_URI which used to point to the admin site has long
ago been changed to be a copy of KEYSTONE_SERVICE_URI, which points to
the public site.

Drop all KEYSTONE_AUTH_* variables except KEYSTONE_AUTH_URI which may
still be in use in some plugins.

This also allows to finally drop the fixup_keystone() function.

Change-Id: I549f3cadc27d137e014241cdd47e90267859c848
",git fetch https://review.opendev.org/openstack/devstack refs/changes/72/735472/5 && git format-patch -1 --stdout FETCH_HEAD,"['lib/keystone', 'files/apache-keystone.template']",2,5d5f670fdd83aa273b6dcc7a710a0b3332498de8,remove-keystone-admin-endpoint,, Alias /identity_admin %KEYSTONE_BIN%/keystone-wsgi-admin <Location /identity_admin> SetHandler wsgi-script Options +ExecCGI WSGIProcessGroup keystone-admin WSGIApplicationGroup %{GLOBAL} WSGIPassAuthorization On </Location>,0,12
openstack%2Fpuppet-placement~stable%2Fussuri~If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,openstack/puppet-placement,stable/ussuri,If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,Tag the httpd service only when it is used,MERGED,2021-11-02 00:09:42.000000000,2021-11-03 12:29:30.000000000,2021-11-03 12:29:30.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:09:42.000000000', 'files': ['manifests/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-placement/commit/9e4cf669ba037df9fb8e04b11c40bd560381882e', 'message': 'Tag the httpd service only when it is used\n\nCurrently the placement-service tag is always added to the httpd\nservice, but it should not if an independent service is used to run\nplacement-api.\n\nChange-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456\n(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)\n(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)\n(cherry picked from commit 568b61b585f710a778e34a83a3c6a21b17c77b55)\n(cherry picked from commit 314bbbcc72320fc71fd6092e720d8b7a3ae819f8)\n'}]",2,816234,9e4cf669ba037df9fb8e04b11c40bd560381882e,11,3,1,9816,,,0,"Tag the httpd service only when it is used

Currently the placement-service tag is always added to the httpd
service, but it should not if an independent service is used to run
placement-api.

Change-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456
(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)
(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)
(cherry picked from commit 568b61b585f710a778e34a83a3c6a21b17c77b55)
(cherry picked from commit 314bbbcc72320fc71fd6092e720d8b7a3ae819f8)
",git fetch https://review.opendev.org/openstack/puppet-placement refs/changes/34/816234/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/api.pp'],1,9e4cf669ba037df9fb8e04b11c40bd560381882e,, Service <| title == 'httpd' |> { tag +> 'placement-service' }, Service <| title == 'httpd' |> { tag +> 'placement-service' },1,2
openstack%2Fdiskimage-builder~master~I2a9a8648158e1e4b1a071e20266fb8d125da67ac,openstack/diskimage-builder,master,I2a9a8648158e1e4b1a071e20266fb8d125da67ac,fedora-container: update to Fedora 35,MERGED,2021-10-27 00:13:32.000000000,2021-11-03 12:05:40.000000000,2021-11-03 11:58:57.000000000,"[{'_account_id': 4146}, {'_account_id': 4571}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 00:13:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/d65958011405f16fd675ac25b5ecb2ad475d0bdf', 'message': '[dnm] debug fail for f34\n\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 2, 'created': '2021-10-27 00:44:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/c40ad18b7dcde9518bfe9fabce28b8a21a6c2963', 'message': '[dnm] debug fail for f34\n\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 3, 'created': '2021-10-27 21:07:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/2550e01ba89bb6b4eb0e432a2d0b3352eba9f21b', 'message': '[dnm] trying fedora 35\n\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 4, 'created': '2021-10-27 21:22:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/df190fa76d28b38829c274987cd162cdd83d1957', 'message': '[dnm] trying fedora 35\n\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/815753\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 5, 'created': '2021-10-28 01:03:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/590a7fade2c7b5db990442af27b766311aeed2c3', 'message': '[dnm] trying fedora 35\n\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/815766\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 6, 'created': '2021-10-28 02:02:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/7cf208f88b4410e1ef4bb0737877f5b2489bec03', 'message': '[dnm] trying fedora 35\n\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/815766\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 7, 'created': '2021-10-28 05:48:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/a6014142a7d7970b6cd931b59b2c56f3485aafbb', 'message': 'fedora-container: update to Fedora 35\n\nSupport Fedora 35 in this element, and update the default\n\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/815766\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 8, 'created': '2021-10-29 03:34:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/80e51f69c8da33a53a4a7cdf138ea1fbb5b8cb92', 'message': 'fedora-container: update to Fedora 35\n\nSupport Fedora 35 in this element, and update the default\n\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/815766\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}, {'number': 9, 'created': '2021-11-02 19:27:24.000000000', 'files': ['diskimage_builder/elements/fedora-container/containerfiles/35', '.zuul.d/project.yaml', '.zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/f75fed076e8f829997b92e7650bd5a224d669780', 'message': 'fedora-container: update to Fedora 35\n\nSupport Fedora 35 in this element, and update the default\n\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/815766\nChange-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac\n'}]",10,815574,f75fed076e8f829997b92e7650bd5a224d669780,53,3,9,7118,,,0,"fedora-container: update to Fedora 35

Support Fedora 35 in this element, and update the default

Depends-On: https://review.opendev.org/c/zuul/nodepool/+/815766
Change-Id: I2a9a8648158e1e4b1a071e20266fb8d125da67ac
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/74/815574/6 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.d/project.yaml', 'playbooks/dib-nodepool/collect-openstack-logs.yaml']",2,d65958011405f16fd675ac25b5ecb2ad475d0bdf,fedora-35, - name: Debug fail fail: msg: debug fail,,4,36
openstack%2Fopenstacksdk~feature%2Fr1~Ie1482dcffc534893c5d922910afe1c9b40c54fbb,openstack/openstacksdk,feature/r1,Ie1482dcffc534893c5d922910afe1c9b40c54fbb,compute: Add support for microversion 2.89,MERGED,2021-11-02 17:41:39.000000000,2021-11-03 11:58:59.000000000,2021-11-03 11:55:36.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-11-02 17:41:39.000000000', 'files': ['releasenotes/notes/compute-microversion-2-89-8c5187cc3bf6bd02.yaml', 'openstack/compute/v2/volume_attachment.py', 'openstack/tests/unit/compute/v2/test_volume_attachment.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/ef587c9a021331f6407320b606a741719c90fafa', 'message': 'compute: Add support for microversion 2.89\n\nThe volume attachments API now returns the attachment ID and internal\nBDM ID in responses.\n\nChange-Id: Ie1482dcffc534893c5d922910afe1c9b40c54fbb\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",0,816382,ef587c9a021331f6407320b606a741719c90fafa,7,2,1,15334,,,0,"compute: Add support for microversion 2.89

The volume attachments API now returns the attachment ID and internal
BDM ID in responses.

Change-Id: Ie1482dcffc534893c5d922910afe1c9b40c54fbb
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/82/816382/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/compute-microversion-2-89-8c5187cc3bf6bd02.yaml', 'openstack/compute/v2/volume_attachment.py', 'openstack/tests/unit/compute/v2/test_volume_attachment.py']",3,ef587c9a021331f6407320b606a741719c90fafa,compute-gaps," 'attachment_id': '979ce4f8-033a-409d-85e6-6b5c0f6a6302', 'delete_on_termination': False, 'device': '/dev/sdc', 'serverId': '7696780b-3f53-4688-ab25-019bfcbbd806', 'tag': 'foo', 'volumeId': 'a07f71dc-8151-4e7d-a0cc-cd24a3f11113', 'bdm_uuid': 'c088db45-92b8-49e8-81e2-a1b77a144b3b', self.assertEqual(EXAMPLE['attachment_id'], sot.attachment_id) self.assertEqual(EXAMPLE['attachment_id'], sot.id) self.assertEqual( EXAMPLE['delete_on_termination'], sot.delete_on_termination, ) # FIXME(stephenfin): This conflicts since there is a server ID in the # URI *and* in the body. We need a field that handles both or we need # to use different names. # self.assertEqual(EXAMPLE['serverId'], sot.server_id) self.assertEqual(EXAMPLE['volumeId'], sot.volume_id) self.assertEqual(EXAMPLE['bdm_uuid'], sot.bdm_id)"," 'device': '1', 'id': '2', 'volume_id': '3', 'tag': '4', 'delete_on_termination': 'true', self.assertEqual(EXAMPLE['id'], sot.id) self.assertEqual(EXAMPLE['volume_id'], sot.volume_id) self.assertEqual(EXAMPLE['delete_on_termination'], sot.delete_on_termination)",37,14
openstack%2Fopenstacksdk~feature%2Fr1~Ideeca99a89c920a09cfc3799bbcc7e24046a5c43,openstack/openstacksdk,feature/r1,Ideeca99a89c920a09cfc3799bbcc7e24046a5c43,compute: Add support for server migrations API,MERGED,2021-10-22 09:06:27.000000000,2021-11-03 11:56:42.000000000,2021-11-03 11:51:30.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-22 09:06:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/f2c679aaf4e5f7fe2ecc419aca34974b9f30b40c', 'message': ""compute: Add support for server migrations API\n\nThere are two migrations APIs in nova: the migrations API\n('/os-migrations') and the *server* migrations API\n('/servers/{id}/migrations'). The former is responsible for listing all\nmigrations in a deployment, while the latter only lists those for a\ngiven server. In this change, we're adding support for the latter.\n\nChange-Id: Ideeca99a89c920a09cfc3799bbcc7e24046a5c43\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2021-10-27 10:32:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/900f4ffd95276348f0e50fbc33170c77132af7b7', 'message': ""compute: Add support for server migrations API\n\nThere are two migrations APIs in nova: the migrations API\n('/os-migrations') and the *server* migrations API\n('/servers/{id}/migrations'). The former is responsible for listing all\nmigrations in a deployment, while the latter only lists those for a\ngiven server. In this change, we're adding support for the latter.\n\nChange-Id: Ideeca99a89c920a09cfc3799bbcc7e24046a5c43\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 3, 'created': '2021-11-02 17:41:39.000000000', 'files': ['releasenotes/notes/add-server-migrations-6e31183196f14deb.yaml', 'openstack/tests/unit/compute/v2/test_proxy.py', 'doc/source/user/resources/compute/v2/server_migration.rst', 'openstack/tests/unit/compute/v2/test_server_migration.py', 'openstack/compute/v2/server_migration.py', 'doc/source/user/proxies/compute.rst', 'doc/source/user/resources/compute/index.rst', 'openstack/compute/v2/_proxy.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/6d1321f5ddad18629d9b02cc77c54d76c465da08', 'message': ""compute: Add support for server migrations API\n\nThere are two migrations APIs in nova: the migrations API\n('/os-migrations') and the *server* migrations API\n('/servers/{id}/migrations'). The former is responsible for listing all\nmigrations in a deployment, while the latter only lists those for a\ngiven server. In this change, we're adding support for the latter.\n\nChange-Id: Ideeca99a89c920a09cfc3799bbcc7e24046a5c43\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",14,815099,6d1321f5ddad18629d9b02cc77c54d76c465da08,17,2,3,15334,,,0,"compute: Add support for server migrations API

There are two migrations APIs in nova: the migrations API
('/os-migrations') and the *server* migrations API
('/servers/{id}/migrations'). The former is responsible for listing all
migrations in a deployment, while the latter only lists those for a
given server. In this change, we're adding support for the latter.

Change-Id: Ideeca99a89c920a09cfc3799bbcc7e24046a5c43
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/99/815099/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/add-server-migrations-6e31183196f14deb.yaml', 'openstack/compute/v2/server_migration.py', 'openstack/tests/unit/compute/v2/test_server_migration.py', 'openstack/compute/v2/_proxy.py']",4,f2c679aaf4e5f7fe2ecc419aca34974b9f30b40c,compute-gaps,"from openstack.compute.v2 import server_migration as _server_migration def delete_server_migration( self, server_migration, server, ignore_missing=True, ): """"""Delete a server migration :param server_migration: The value can be either the ID of a server migration or a :class:`~openstack.compute.v2.server_migration.ServerMigration` instance. :param server: This parameter need to be specified when ServerMigration ID is given as value. It can be either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance that the migration belongs to. :param bool ignore_missing: When set to ``False`` :class:`~openstack.exceptions.ResourceNotFound` will be raised when the volume attachment does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent volume attachment. :returns: ``None`` """""" server_id = self._get_uri_attribute( server_migration, server, ""server_id"", ) server_migration = resource.Resource._get_id(server_migration) self._delete( _server_migration.ServerMigration, migration_id=server_migration, server_id=server_id, ignore_missing=ignore_missing, ) def get_server_migration( self, server_migration, server, ignore_missing=True, ): """"""Get a single volume attachment :param server_migration: The value can be the ID of a server migration or a :class:`~openstack.compute.v2.server_migration.ServerMigration` instance. :param server: This parameter need to be specified when ServerMigration ID is given as value. It can be either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance that the migration belongs to. :param bool ignore_missing: When set to ``False`` :class:`~openstack.exceptions.ResourceNotFound` will be raised when the server migration does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent server migration. :returns: One :class:`~openstack.compute.v2.server_migration.ServerMigration` :raises: :class:`~openstack.exceptions.ResourceNotFound` when no resource can be found. """""" server_id = self._get_uri_attribute( server_migration, server, ""server_id"", ) server_migration = resource.Resource._get_id(server_migration) return self._get( _server_migration.ServerMigration, server_id=server_id, migration_id=server_migration, ignore_missing=ignore_missing, ) def server_migrations(self, server): """"""Return a generator of migrations for a server. :param server: The server can be either the ID of a server or a :class:`~openstack.compute.v2.server.Server`. :returns: A generator of VolumeAttachment objects :rtype: :class:`~openstack.compute.v2.server_migration.ServerMigration` """""" server_id = resource.Resource._get_id(server) return self._list( _server_migration.ServerMigration, server_id=server_id, ) ",,285,0
openstack%2Fopenstacksdk~feature%2Fr1~I681a5738c3ed359c2b3b26620c7fd3a51da3e302,openstack/openstacksdk,feature/r1,I681a5738c3ed359c2b3b26620c7fd3a51da3e302,compute: Add support for migrations API,MERGED,2021-10-22 09:06:27.000000000,2021-11-03 11:55:34.000000000,2021-11-03 11:55:34.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-22 09:06:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/c24077aeebfd8f274418decaf031b5c2a2b14fa6', 'message': ""compute: Add support for migrations API\n\nChange Ideeca99a89c920a09cfc3799bbcc7e24046a5c43 added support for the\nserver migrations API ('/servers/{id}/migrations'), which allowed\ninteraction with individual server migration records. This change adds\nsupport for the migrations API ('/os-migrations'), which allows users to\nlist all migrations.\n\nChange-Id: I681a5738c3ed359c2b3b26620c7fd3a51da3e302\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2021-10-27 10:32:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/21629724ac53458845f3a57114007e7f83bcfd19', 'message': ""compute: Add support for migrations API\n\nChange Ideeca99a89c920a09cfc3799bbcc7e24046a5c43 added support for the\nserver migrations API ('/servers/{id}/migrations'), which allowed\ninteraction with individual server migration records. This change adds\nsupport for the migrations API ('/os-migrations'), which allows users to\nlist all migrations.\n\nChange-Id: I681a5738c3ed359c2b3b26620c7fd3a51da3e302\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 3, 'created': '2021-11-02 17:41:39.000000000', 'files': ['doc/source/user/resources/compute/v2/migration.rst', 'openstack/tests/unit/compute/v2/test_migration.py', 'openstack/tests/unit/compute/v2/test_proxy.py', 'releasenotes/notes/add-migrations-946adf16674d4b2a.yaml', 'doc/source/user/proxies/compute.rst', 'openstack/compute/v2/migration.py', 'doc/source/user/resources/compute/index.rst', 'openstack/compute/v2/_proxy.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/770a3c3ed8f3a922847842d8cf30779b99218575', 'message': ""compute: Add support for migrations API\n\nChange Ideeca99a89c920a09cfc3799bbcc7e24046a5c43 added support for the\nserver migrations API ('/servers/{id}/migrations'), which allowed\ninteraction with individual server migration records. This change adds\nsupport for the migrations API ('/os-migrations'), which allows users to\nlist all migrations.\n\nChange-Id: I681a5738c3ed359c2b3b26620c7fd3a51da3e302\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",8,815100,770a3c3ed8f3a922847842d8cf30779b99218575,15,2,3,15334,,,0,"compute: Add support for migrations API

Change Ideeca99a89c920a09cfc3799bbcc7e24046a5c43 added support for the
server migrations API ('/servers/{id}/migrations'), which allowed
interaction with individual server migration records. This change adds
support for the migrations API ('/os-migrations'), which allows users to
list all migrations.

Change-Id: I681a5738c3ed359c2b3b26620c7fd3a51da3e302
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/00/815100/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/tests/unit/compute/v2/test_migration.py', 'releasenotes/notes/add-server-migrations-6e31183196f14deb.yaml', 'openstack/compute/v2/migration.py']",3,c24077aeebfd8f274418decaf031b5c2a2b14fa6,compute-gaps,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from openstack import exceptions from openstack import resource from openstack import utils class Migration(resource.Resource): resources_key = 'migrations' base_path = '/os-migrations' # capabilities allow_list = True _query_mapping = resource.QueryParameters( 'host', 'status', 'migration_type', 'source_compute', 'user_id', 'project_id', changes_since='changes-since', changes_before='changes-before', server_id='instance_uuid', ) #: The UUID of the migration (since microversion 2.59) uuid = resource.Body('uuid', alternate_id=True) #: The UUID of the server server_id = resource.Body('instance_uuid') #: The ID of the user that initiated the server migration (since #: microversion 2.80) user_id = resource.Body('user_id') #: The ID of the project that initiated the server migration (since #: microversion 2.80) project_id = resource.Body('project_id') #: The date and time when the resource was created. created_at = resource.Body('created_at') #: The date and time when the resource was last updated. updated_at = resource.Body('updated_at') #: The current status of the migration. status = resource.Body('status') #: The source compute of the migration. source_compute = resource.Body('source_compute') #: The source node of the migration. source_node = resource.Body('source_node') #: The target host of the migration. dest_host = resource.Body('dest_host') #: The target compute of the migration. dest_compute = resource.Body('dest_compute') #: The target node of the migration. dest_node = resource.Body('dest_node') #: The type of the migration. One of 'migration', 'resize', #: 'live-migration' or 'evacuation' migration_type = resource.Body('migration_type') #: The ID of the old flavor. This value corresponds to the ID of the flavor #: in the database. old_flavor_id = resource.Body('old_instance_type_id') #: The ID of the old flavor. This value corresponds to the ID of the flavor #: in the database. This will be the same as new_flavor_id except for #: resize operations. new_flavor_id = resource.Body('new_instance_type_id') ",,158,0
openstack%2Fopenstacksdk~feature%2Fr1~I6912ece1558d0b726cac0c6eeead9bc9fc85712f,openstack/openstacksdk,feature/r1,I6912ece1558d0b726cac0c6eeead9bc9fc85712f,compute: Regroup proxy methods,MERGED,2021-10-22 09:06:27.000000000,2021-11-03 11:54:37.000000000,2021-11-03 11:51:28.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-22 09:06:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/5cf42171c97f2e93712bc4205db8812dc8a76ced', 'message': 'compute: Regroup proxy methods\n\nAt some point in the past, we grouped proxy methods by their resource\ntype. We seem to have stopped doing this recently. Fix that. Note that\nthere are no functional changes here, just code movement.\n\nChange-Id: I6912ece1558d0b726cac0c6eeead9bc9fc85712f\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 2, 'created': '2021-10-27 10:32:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/896098a19a545479602a180fc437c368bfb579cf', 'message': 'compute: Regroup proxy methods\n\nAt some point in the past, we grouped proxy methods by their resource\ntype. We seem to have stopped doing this recently. Fix that. Note that\nthere are no functional changes here, just code movement.\n\nChange-Id: I6912ece1558d0b726cac0c6eeead9bc9fc85712f\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 3, 'created': '2021-11-02 17:41:39.000000000', 'files': ['openstack/compute/v2/_proxy.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/6c96faa7d12cedc4383eee0427ed8d2c5d6f67db', 'message': 'compute: Regroup proxy methods\n\nAt some point in the past, we grouped proxy methods by their resource\ntype. We seem to have stopped doing this recently. Fix that. Note that\nthere are no functional changes here, just code movement.\n\nChange-Id: I6912ece1558d0b726cac0c6eeead9bc9fc85712f\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",8,815098,6c96faa7d12cedc4383eee0427ed8d2c5d6f67db,19,2,3,15334,,,0,"compute: Regroup proxy methods

At some point in the past, we grouped proxy methods by their resource
type. We seem to have stopped doing this recently. Fix that. Note that
there are no functional changes here, just code movement.

Change-Id: I6912ece1558d0b726cac0c6eeead9bc9fc85712f
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/98/815098/3 && git format-patch -1 --stdout FETCH_HEAD,['openstack/compute/v2/_proxy.py'],1,5cf42171c97f2e93712bc4205db8812dc8a76ced,compute-gaps," def wait_for_server(self, server, status='ACTIVE', failures=None, interval=2, wait=120): """"""Wait for a server to be in a particular status. :param server: The :class:`~openstack.compute.v2.server.Server` to wait on to reach the specified status. :type server: :class:`~openstack.compute.v2.server.Server`: :param status: Desired status. :type status: str :param failures: Statuses that would be interpreted as failures. :type failures: :py:class:`list` :param interval: Number of seconds to wait before to consecutive checks. Default to 2. :type interval: int :param wait: Maximum number of seconds to wait before the change. Default to 120. :type wait: int :returns: The resource is returned on success. :raises: :class:`~openstack.exceptions.ResourceTimeout` if transition to the desired status failed to occur in specified seconds. :raises: :class:`~openstack.exceptions.ResourceFailure` if the resource has transited to one of the failure statuses. :raises: :class:`~AttributeError` if the resource does not have a ``status`` attribute. """""" failures = ['ERROR'] if failures is None else failures return resource.wait_for_status( self, server, status, failures, interval, wait, ) def wait_for_delete(self, res, interval=2, wait=120): """"""Wait for a resource to be deleted. :param res: The resource to wait on to be deleted. :type resource: A :class:`~openstack.resource.Resource` object. :param interval: Number of seconds to wait before to consecutive checks. Default to 2. :param wait: Maximum number of seconds to wait before the change. Default to 120. :returns: The resource is returned on success. :raises: :class:`~openstack.exceptions.ResourceTimeout` if transition to delete failed to occur in the specified seconds. """""" return resource.wait_for_delete(self, res, interval, wait) # ========== Extensions ========== # ========== Keypairs ========== # ========== Limits ========== # ========== Servers ========== # ========== Server security groups ========== def fetch_server_security_groups(self, server): """"""Fetch security groups with details for a server. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :returns: updated :class:`~openstack.compute.v2.server.Server` instance """""" server = self._get_resource(_server.Server, server) return server.fetch_security_groups(self) def add_security_group_to_server(self, server, security_group): """"""Add a security group to a server :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param security_group: Either the ID, Name of a security group or a :class:`~openstack.network.v2.security_group.SecurityGroup` instance. :returns: None """""" server = self._get_resource(_server.Server, server) security_group = self._get_resource(_sg.SecurityGroup, security_group) server.add_security_group(self, security_group.name) def remove_security_group_from_server(self, server, security_group): """"""Remove a security group from a server :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param security_group: Either the ID of a security group or a :class:`~openstack.network.v2.security_group.SecurityGroup` instance. :returns: None """""" server = self._get_resource(_server.Server, server) security_group = self._get_resource(_sg.SecurityGroup, security_group) server.remove_security_group(self, security_group.name) # ========== Server IPs ========== def add_fixed_ip_to_server(self, server, network_id): """"""Adds a fixed IP address to a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param network_id: The ID of the network from which a fixed IP address is about to be allocated. :returns: None """""" server = self._get_resource(_server.Server, server) server.add_fixed_ip(self, network_id) def remove_fixed_ip_from_server(self, server, address): """"""Removes a fixed IP address from a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param address: The fixed IP address to be disassociated from the server. :returns: None """""" server = self._get_resource(_server.Server, server) server.remove_fixed_ip(self, address) def add_floating_ip_to_server(self, server, address, fixed_address=None): """"""Adds a floating IP address to a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param address: The floating IP address to be added to the server. :param fixed_address: The fixed IP address to be associated with the floating IP address. Used when the server is connected to multiple networks. :returns: None """""" server = self._get_resource(_server.Server, server) server.add_floating_ip(self, address, fixed_address=fixed_address) def remove_floating_ip_from_server(self, server, address): """"""Removes a floating IP address from a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param address: The floating IP address to be disassociated from the server. :returns: None """""" server = self._get_resource(_server.Server, server) server.remove_floating_ip(self, address) # ========== Server Interfaces ========== # ========== Server Metadata ========== # ========== Server Groups ========== # ========== Volume Attachments ========== # ========== Server Migrations ========== :class:`~openstack.compute.v2.server.Server` instance. self, server, host=None, force=False, block_migration=None, ): :param server: Either the ID of a server or a :param str host: The host to which to migrate the server. If the Nova service is too old, the host parameter implies force=True which causes the Nova scheduler to be bypassed. On such clouds, a ``ValueError`` will be thrown if ``host`` is given without ``force``. :param bool force: Force a live-migration by not verifying the provided destination host by the scheduler. This is unsafe and not recommended. :param block_migration: Perform a block live migration to the destination host by the scheduler. Can be 'auto', True or False. Some clouds are too old to support 'auto', in which case a ValueError will be thrown. If omitted, the value will be 'auto' on clouds that support it, and False on clouds that do not. block_migration=block_migration, ) # ========== Server diagnostics ========== # ========== Server consoles ========== def get_server_console_output(self, server, length=None): """"""Return the console output for a server. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param length: Optional number of line to fetch from the end of console log. All lines will be returned if this is not specified. :returns: The console output as a dict. Control characters will be escaped to create a valid JSON string. """""" server = self._get_resource(_server.Server, server) return server.get_console_output(self, length=length) "," def fetch_server_security_groups(self, server): """"""Fetch security groups with details for a server. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :returns: updated :class:`~openstack.compute.v2.server.Server` instance """""" server = self._get_resource(_server.Server, server) return server.fetch_security_groups(self) def add_security_group_to_server(self, server, security_group): """"""Add a security group to a server :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param security_group: Either the ID, Name of a security group or a :class:`~openstack.network.v2.security_group.SecurityGroup` instance. :returns: None """""" server = self._get_resource(_server.Server, server) security_group = self._get_resource(_sg.SecurityGroup, security_group) server.add_security_group(self, security_group.name) def remove_security_group_from_server(self, server, security_group): """"""Remove a security group from a server :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param security_group: Either the ID of a security group or a :class:`~openstack.network.v2.security_group.SecurityGroup` instance. :returns: None """""" server = self._get_resource(_server.Server, server) security_group = self._get_resource(_sg.SecurityGroup, security_group) server.remove_security_group(self, security_group.name) def add_fixed_ip_to_server(self, server, network_id): """"""Adds a fixed IP address to a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param network_id: The ID of the network from which a fixed IP address is about to be allocated. :returns: None """""" server = self._get_resource(_server.Server, server) server.add_fixed_ip(self, network_id) def remove_fixed_ip_from_server(self, server, address): """"""Removes a fixed IP address from a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param address: The fixed IP address to be disassociated from the server. :returns: None """""" server = self._get_resource(_server.Server, server) server.remove_fixed_ip(self, address) def add_floating_ip_to_server(self, server, address, fixed_address=None): """"""Adds a floating IP address to a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param address: The floating IP address to be added to the server. :param fixed_address: The fixed IP address to be associated with the floating IP address. Used when the server is connected to multiple networks. :returns: None """""" server = self._get_resource(_server.Server, server) server.add_floating_ip(self, address, fixed_address=fixed_address) def remove_floating_ip_from_server(self, server, address): """"""Removes a floating IP address from a server instance. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param address: The floating IP address to be disassociated from the server. :returns: None """""" server = self._get_resource(_server.Server, server) server.remove_floating_ip(self, address) def get_server_console_output(self, server, length=None): """"""Return the console output for a server. :param server: Either the ID of a server or a :class:`~openstack.compute.v2.server.Server` instance. :param length: Optional number of line to fetch from the end of console log. All lines will be returned if this is not specified. :returns: The console output as a dict. Control characters will be escaped to create a valid JSON string. """""" server = self._get_resource(_server.Server, server) return server.get_console_output(self, length=length) def wait_for_server(self, server, status='ACTIVE', failures=None, interval=2, wait=120): """"""Wait for a server to be in a particular status. :param server: The :class:`~openstack.compute.v2.server.Server` to wait on to reach the specified status. :type server: :class:`~openstack.compute.v2.server.Server`: :param status: Desired status. :param failures: Statuses that would be interpreted as failures. :type failures: :py:class:`list` :param int interval: Number of seconds to wait before to consecutive checks. Default to 2. :param int wait: Maximum number of seconds to wait before the change. Default to 120. :returns: The resource is returned on success. :raises: :class:`~openstack.exceptions.ResourceTimeout` if transition to the desired status failed to occur in specified seconds. :raises: :class:`~openstack.exceptions.ResourceFailure` if the resource has transited to one of the failure statuses. :raises: :class:`~AttributeError` if the resource does not have a ``status`` attribute. """""" failures = ['ERROR'] if failures is None else failures return resource.wait_for_status( self, server, status, failures, interval, wait) :class:`~openstack.compute.v2.server.Server` instance. self, server, host=None, force=False, block_migration=None): :param server: Either the ID of a server or a :param str host: The host to which to migrate the server. If the Nova service is too old, the host parameter implies force=True which causes the Nova scheduler to be bypassed. On such clouds, a ``ValueError`` will be thrown if ``host`` is given without ``force``. :param bool force: Force a live-migration by not verifying the provided destination host by the scheduler. This is unsafe and not recommended. :param block_migration: Perform a block live migration to the destination host by the scheduler. Can be 'auto', True or False. Some clouds are too old to support 'auto', in which case a ValueError will be thrown. If omitted, the value will be 'auto' on clouds that support it, and False on clouds that do not. block_migration=block_migration) def wait_for_delete(self, res, interval=2, wait=120): """"""Wait for a resource to be deleted. :param res: The resource to wait on to be deleted. :type resource: A :class:`~openstack.resource.Resource` object. :param interval: Number of seconds to wait before to consecutive checks. Default to 2. :param wait: Maximum number of seconds to wait before the change. Default to 120. :returns: The resource is returned on success. :raises: :class:`~openstack.exceptions.ResourceTimeout` if transition to delete failed to occur in the specified seconds. """""" return resource.wait_for_delete(self, res, interval, wait)",195,168
openstack%2Fcharm-nova-cloud-controller~master~I245d83922090c313966e8677fd9367f60b778231,openstack/charm-nova-cloud-controller,master,I245d83922090c313966e8677fd9367f60b778231,Update requirements files for py35 compatability,MERGED,2021-11-01 21:29:59.000000000,2021-11-03 11:52:43.000000000,2021-11-03 11:52:43.000000000,"[{'_account_id': 10366}, {'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 21:29:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/fb0423c1eddeedff88dba65365112d5c8f672a24', 'message': 'Fix py35 job\n\nAdding and pinning cffi\n\nChange-Id: I245d83922090c313966e8677fd9367f60b778231\n'}, {'number': 2, 'created': '2021-11-02 11:23:12.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-nova-cloud-controller/commit/997f1e5f93b01d42380a70d07045c6116ae511e0', 'message': 'Update requirements files for py35 compatability\n\nChange-Id: I245d83922090c313966e8677fd9367f60b778231\n'}]",2,816213,997f1e5f93b01d42380a70d07045c6116ae511e0,12,5,2,14567,,,0,"Update requirements files for py35 compatability

Change-Id: I245d83922090c313966e8677fd9367f60b778231
",git fetch https://review.opendev.org/openstack/charm-nova-cloud-controller refs/changes/13/816213/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt']",2,fb0423c1eddeedff88dba65365112d5c8f672a24,,"pyparsing<3.0.0 # cffi needs it, so pin here. cffi==1.14.6; python_version < '3.6' # cffi 1.15.0 drops support for py35. ",,5,0
openstack%2Fsahara-specs~master~I782877e2e4daccbc8678fdfe62f7183e23dff0ff,openstack/sahara-specs,master,I782877e2e4daccbc8678fdfe62f7183e23dff0ff,setup.cfg: Replace dashes with underscores,MERGED,2021-10-25 08:20:29.000000000,2021-11-03 11:16:16.000000000,2021-11-03 11:14:15.000000000,"[{'_account_id': 10459}, {'_account_id': 22348}, {'_account_id': 30077}, {'_account_id': 33353}]","[{'number': 1, 'created': '2021-10-25 08:20:29.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/sahara-specs/commit/244a47938b6175edbc8df5bc26691b08100c0872', 'message': ""setup.cfg: Replace dashes with underscores\n\nSetuptools v54.1.0 introduces a warning that the use of dash-separated\noptions in 'setup.cfg' will not be supported in a future version [1].\nGet ahead of the issue by replacing the dashes with underscores. Without\nthis, we see 'UserWarning' messages like the following on new enough\nversions of setuptools:\n\n  UserWarning: Usage of dash-separated 'description-file' will not be\n  supported in future versions. Please use the underscore name\n  'description_file' instead\n\n[1] https://github.com/pypa/setuptools/commit/a2e9ae4cb\n\nChange-Id: I782877e2e4daccbc8678fdfe62f7183e23dff0ff\n""}]",0,815229,244a47938b6175edbc8df5bc26691b08100c0872,8,4,1,31412,,,0,"setup.cfg: Replace dashes with underscores

Setuptools v54.1.0 introduces a warning that the use of dash-separated
options in 'setup.cfg' will not be supported in a future version [1].
Get ahead of the issue by replacing the dashes with underscores. Without
this, we see 'UserWarning' messages like the following on new enough
versions of setuptools:

  UserWarning: Usage of dash-separated 'description-file' will not be
  supported in future versions. Please use the underscore name
  'description_file' instead

[1] https://github.com/pypa/setuptools/commit/a2e9ae4cb

Change-Id: I782877e2e4daccbc8678fdfe62f7183e23dff0ff
",git fetch https://review.opendev.org/openstack/sahara-specs refs/changes/29/815229/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,244a47938b6175edbc8df5bc26691b08100c0872,,description_file =author_email = openstack-discuss@lists.openstack.org home_page = https://specs.openstack.org/openstack/sahara-specs/,description-file =author-email = openstack-discuss@lists.openstack.org home-page = https://specs.openstack.org/openstack/sahara-specs/,3,3
openstack%2Ftripleo-common~master~I19763bc2efc2fbf78ec88b9018ba27fe8d85b874,openstack/tripleo-common,master,I19763bc2efc2fbf78ec88b9018ba27fe8d85b874,Trivial: fix conditional whitespace,MERGED,2021-11-02 21:03:29.000000000,2021-11-03 11:06:50.000000000,2021-11-03 10:45:06.000000000,"[{'_account_id': 8449}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-11-02 21:03:29.000000000', 'files': ['scripts/tripleo-mount-image'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/96a715e68f453a8c204220c519c7eed8fce31056', 'message': 'Trivial: fix conditional whitespace\n\nThis may be causing an issue on older versions of bash\n\nBlueprint: whole-disk-default\nChange-Id: I19763bc2efc2fbf78ec88b9018ba27fe8d85b874\n'}]",2,816403,96a715e68f453a8c204220c519c7eed8fce31056,11,5,1,4571,,,0,"Trivial: fix conditional whitespace

This may be causing an issue on older versions of bash

Blueprint: whole-disk-default
Change-Id: I19763bc2efc2fbf78ec88b9018ba27fe8d85b874
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/03/816403/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/tripleo-mount-image'],1,96a715e68f453a8c204220c519c7eed8fce31056,bp/whole-disk-default," if [ -z ""${MOUNT_DIR}"" ] || [ -z ""${IMAGE_FILE}"" ]; then"," if [ -z ""${MOUNT_DIR}"" ] || [ -z ""${IMAGE_FILE}""]; then",1,1
openstack%2Fcyborg-specs~master~If414265f79714b7899a018595864dd635995347c,openstack/cyborg-specs,master,If414265f79714b7899a018595864dd635995347c,Update device profile groups format,MERGED,2021-10-27 08:51:09.000000000,2021-11-03 10:47:05.000000000,2021-11-03 10:45:23.000000000,"[{'_account_id': 22348}, {'_account_id': 23950}, {'_account_id': 25738}, {'_account_id': 26458}, {'_account_id': 28748}]","[{'number': 1, 'created': '2021-10-27 08:51:09.000000000', 'files': ['specs/train/implemented/device-profiles.rst'], 'web_link': 'https://opendev.org/openstack/cyborg-specs/commit/f982e044e46515c5695da891adb4c86bcb169215', 'message': 'Update device profile groups format\n\nChange-Id: If414265f79714b7899a018595864dd635995347c\n'}]",2,815607,f982e044e46515c5695da891adb4c86bcb169215,9,5,1,31412,,,0,"Update device profile groups format

Change-Id: If414265f79714b7899a018595864dd635995347c
",git fetch https://review.opendev.org/openstack/cyborg-specs refs/changes/07/815607/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/train/implemented/device-profiles.rst'],1,f982e044e46515c5695da891adb4c86bcb169215,," { 'resources:CUSTOM_ACCELERATOR_FPGA':'1', 'trait:CUSTOM_FPGA_INTEL_ARRIA10':'required', 'accel:function_id':'3AFB' { 'resources:CUSTOM_ACCELERATOR_GPU':'2', 'trait:CUSTOM_GPU_MODEL_NAME':'required', 'accel:video_ram':'2GB'``'accel:<key>':'<value>'``. Both the key and the value are strings, which may``'accel:preferred:resource_name':'amount'``. The valid keys in this release are listed in Section `Valid accel keys`_.form ``'accel:<key>':'<value>``, as noted earlier. The valid key-value pairs in this release are as noted below:"," { 'resources:CUSTOM_ACCELERATOR_FPGA=1', 'trait:CUSTOM_FPGA_INTEL_ARRIA10=required', 'accel:function_id=3AFB' { 'resources:CUSTOM_ACCELERATOR_GPU=2', 'trait:CUSTOM_GPU_MODEL_NAME=required', 'accel:video_ram=2GB'``accel:<key>=<value>``. Both the key and the value are strings, which may``accel:preferred:resource_name=amount``. The valid keys in this release are listed in Section `Valid accel keys`_.form ``accel:<key>=<value>``, as noted earlier. The valid key-value pairs in this release are as noted below:",11,11
openstack%2Fpython-cyborgclient~master~I88e481866217b3672f42aa390d3606810c4db513,openstack/python-cyborgclient,master,I88e481866217b3672f42aa390d3606810c4db513,Show description attr when list and get device profile,MERGED,2021-09-15 02:25:44.000000000,2021-11-03 10:43:37.000000000,2021-11-03 10:42:15.000000000,"[{'_account_id': 22348}, {'_account_id': 23950}, {'_account_id': 25738}, {'_account_id': 26458}, {'_account_id': 28748}]","[{'number': 1, 'created': '2021-09-15 02:25:44.000000000', 'files': ['cyborgclient/tests/unit/osc/v2/test_device_profile.py', 'cyborgclient/tests/unit/osc/v2/fakes.py', 'cyborgclient/osc/v2/device_profile.py'], 'web_link': 'https://opendev.org/openstack/python-cyborgclient/commit/aaaa674625a56f5284454d83df84232efa37312a', 'message': 'Show description attr when list and get device profile\n\nShow description attr and modify UT.\n\nChange-Id: I88e481866217b3672f42aa390d3606810c4db513\n'}]",6,809093,aaaa674625a56f5284454d83df84232efa37312a,16,5,1,31412,,,0,"Show description attr when list and get device profile

Show description attr and modify UT.

Change-Id: I88e481866217b3672f42aa390d3606810c4db513
",git fetch https://review.opendev.org/openstack/python-cyborgclient refs/changes/93/809093/1 && git format-patch -1 --stdout FETCH_HEAD,"['cyborgclient/tests/unit/osc/v2/test_device_profile.py', 'cyborgclient/tests/unit/osc/v2/fakes.py', 'cyborgclient/osc/v2/device_profile.py']",3,aaaa674625a56f5284454d83df84232efa37312a,," ""groups"", ""description"" ""groups"", ""description"" ""description"" ""description"" ""description"","," ""groups"" ""groups""",15,2
openstack%2Ffreezer~master~I85674c664821aa2370d4f0d6d09657374dfdda7e,openstack/freezer,master,I85674c664821aa2370d4f0d6d09657374dfdda7e,Add python3.9 in tox,MERGED,2021-11-02 22:54:02.000000000,2021-11-03 10:30:04.000000000,2021-11-03 10:28:26.000000000,"[{'_account_id': 21069}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 22:54:02.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/freezer/commit/8003eea9d181a74256fc4cb7542bb26211616469', 'message': 'Add python3.9 in tox\n\nAdd python3.9  CI  job.\n\nChange-Id: I85674c664821aa2370d4f0d6d09657374dfdda7e\n'}]",0,816417,8003eea9d181a74256fc4cb7542bb26211616469,8,2,1,21069,,,0,"Add python3.9 in tox

Add python3.9  CI  job.

Change-Id: I85674c664821aa2370d4f0d6d09657374dfdda7e
",git fetch https://review.opendev.org/openstack/freezer refs/changes/17/816417/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,8003eea9d181a74256fc4cb7542bb26211616469,,[testenv:py39] basepython = python3.9 ,,3,0
openstack%2Ffreezer-dr~master~I78ada3e17b436d7f17d47683f81e8ffa952b0a00,openstack/freezer-dr,master,I78ada3e17b436d7f17d47683f81e8ffa952b0a00,update python37 to python38,MERGED,2021-11-03 09:14:06.000000000,2021-11-03 10:28:46.000000000,2021-11-03 10:27:01.000000000,"[{'_account_id': 21069}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-03 09:14:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/freezer-dr/commit/e827c5726c196502f206d8928c4cd6ccbf59f09b', 'message': 'update python37 to python38\n\nChange-Id: I78ada3e17b436d7f17d47683f81e8ffa952b0a00\n'}, {'number': 2, 'created': '2021-11-03 09:34:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/freezer-dr/commit/a44326c5f0841f861eb90227e5abdbe2adc9f22c', 'message': 'update python37 to python38\n\nChange-Id: I78ada3e17b436d7f17d47683f81e8ffa952b0a00\n'}, {'number': 3, 'created': '2021-11-03 09:36:33.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/freezer-dr/commit/6a10ce17553ae5b64579693b13a2d4b01d81e629', 'message': 'update python37 to python38\n\n\nUpdate python37 to python38\n\nChange-Id: I78ada3e17b436d7f17d47683f81e8ffa952b0a00\n'}]",0,816345,6a10ce17553ae5b64579693b13a2d4b01d81e629,11,2,3,21069,,,0,"update python37 to python38


Update python37 to python38

Change-Id: I78ada3e17b436d7f17d47683f81e8ffa952b0a00
",git fetch https://review.opendev.org/openstack/freezer-dr refs/changes/45/816345/2 && git format-patch -1 --stdout FETCH_HEAD,[],0,e827c5726c196502f206d8928c4cd6ccbf59f09b,,,,0,0
openstack%2Fcharm-ceph-dashboard~master~I23bf3b5e35ab7f4e37bfc011b7314fee02cb9d08,openstack/charm-ceph-dashboard,master,I23bf3b5e35ab7f4e37bfc011b7314fee02cb9d08,Add openstack-lb to bundles,NEW,2021-10-21 09:21:09.000000000,2021-11-03 10:27:13.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-21 09:21:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/57271b9edeee1866cda85242710f9c50363a54d7', 'message': 'Add openstack-lb to bundles\n\nChange-Id: I23bf3b5e35ab7f4e37bfc011b7314fee02cb9d08\n'}, {'number': 2, 'created': '2021-11-03 10:16:00.000000000', 'files': ['tests/bundles/overlays/hirsute.yaml.j2', 'tests/bundles/overlays/focal.yaml.j2', 'tests/bundles/focal.yaml', 'tests/bundles/hirsute.yaml'], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/60928664dc544d8bc25fbe483092779901436828', 'message': 'Add openstack-lb to bundles\n\nChange-Id: I23bf3b5e35ab7f4e37bfc011b7314fee02cb9d08\n'}]",0,814877,60928664dc544d8bc25fbe483092779901436828,5,2,2,12549,,,0,"Add openstack-lb to bundles

Change-Id: I23bf3b5e35ab7f4e37bfc011b7314fee02cb9d08
",git fetch https://review.opendev.org/openstack/charm-ceph-dashboard refs/changes/77/814877/2 && git format-patch -1 --stdout FETCH_HEAD,"['tests/bundles/overlays/focal.yaml.j2', 'tests/bundles/overlays/hirsute.yaml.j2', 'tests/bundles/focal.yaml', 'tests/bundles/hirsute.yaml']",4,57271b9edeee1866cda85242710f9c50363a54d7,add-lb-to-bundles, openstack-loadbalancer: charm: cs:~openstack-charmers-next/openstack-loadbalancer num_units: 3 hacluster: charm: cs:~openstack-charmers-next/hacluster options: cluster_count: 3 - - 'openstack-loadbalancer:loadbalancer' - 'ceph-dashboard:loadbalancer' - - 'openstack-loadbalancer:ha' - 'hacluster:ha',,29,0
openstack%2Fneutron~master~Idfa763df8c60d8ae46cd6351d1b6dc7d950b4c67,openstack/neutron,master,Idfa763df8c60d8ae46cd6351d1b6dc7d950b4c67,Don't setup bridge controller if it is already set,MERGED,2021-10-25 09:03:19.000000000,2021-11-03 10:26:06.000000000,2021-11-03 10:23:38.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 9845}, {'_account_id': 11604}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-25 09:03:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/2414e1b6d2ce63885fd2b1155af89e030a2f90fb', 'message': ""Don't setup bridge controller if it is already set\n\nSetting new controller for bridge every time when neutron-ovs-agent\nis restarted or is doing full-sync may cause some short data plane\nconnectivity loss and is not needed if same controller is already\nconfigured for the bridge.\nWith this patch neutron-ovs-agent will first check if controller is\nconfigured for the bridge and if it's the same as what should be\nconfigured, it will skip setting it up.\nSetting of the protocols, connectivity mode and inactivity probe is\nalways performed as this don't cause connectivity issues and is cheap\nso we can always ensure that those parameters are configured properly.\n\nCloses-Bug: #1948642\nChange-Id: Idfa763df8c60d8ae46cd6351d1b6dc7d950b4c67\n""}, {'number': 2, 'created': '2021-10-25 10:16:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6e309145b2043cb5af28c48481924769f02fa654', 'message': ""Don't setup bridge controller if it is already set\n\nSetting new controller for bridge every time when neutron-ovs-agent\nis restarted or is doing full-sync may cause some short data plane\nconnectivity loss and is not needed if same controller is already\nconfigured for the bridge.\nWith this patch neutron-ovs-agent will first check if controller is\nconfigured for the bridge and if it's the same as what should be\nconfigured, it will skip setting it up.\n\nWith this patch also protocols added to the bridge will be first checked\nif they aren't already there and only missing ones will be added if\nnecessary.\n\nSetting of the connectivity mode and inactivity probe is\nalways performed as this don't cause connectivity issues and is cheap\nso we can always ensure that those parameters are configured properly.\n\nCloses-Bug: #1948642\nChange-Id: Idfa763df8c60d8ae46cd6351d1b6dc7d950b4c67\n""}, {'number': 3, 'created': '2021-10-27 07:13:30.000000000', 'files': ['neutron/agent/common/ovs_lib.py', 'neutron/plugins/ml2/drivers/openvswitch/agent/openflow/native/ovs_bridge.py', 'neutron/tests/unit/agent/common/test_ovs_lib.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/openflow/native/ovs_bridge_test_base.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/11d166be683d36ba51e3f85ddea45cb0a1fcf8db', 'message': ""Don't setup bridge controller if it is already set\n\nSetting new controller for bridge every time when neutron-ovs-agent\nis restarted or is doing full-sync may cause some short data plane\nconnectivity loss and is not needed if same controller is already\nconfigured for the bridge.\nWith this patch neutron-ovs-agent will first check if controller is\nconfigured for the bridge and if it's the same as what should be\nconfigured, it will skip setting it up.\n\nWith this patch also protocols added to the bridge will be first checked\nif they aren't already there and only missing ones will be added if\nnecessary.\n\nSetting of the connectivity mode and inactivity probe is\nalways performed as this don't cause connectivity issues and is cheap\nso we can always ensure that those parameters are configured properly.\n\nCloses-Bug: #1948642\nChange-Id: Idfa763df8c60d8ae46cd6351d1b6dc7d950b4c67\n""}]",15,815255,11d166be683d36ba51e3f85ddea45cb0a1fcf8db,85,6,3,11975,,,0,"Don't setup bridge controller if it is already set

Setting new controller for bridge every time when neutron-ovs-agent
is restarted or is doing full-sync may cause some short data plane
connectivity loss and is not needed if same controller is already
configured for the bridge.
With this patch neutron-ovs-agent will first check if controller is
configured for the bridge and if it's the same as what should be
configured, it will skip setting it up.

With this patch also protocols added to the bridge will be first checked
if they aren't already there and only missing ones will be added if
necessary.

Setting of the connectivity mode and inactivity probe is
always performed as this don't cause connectivity issues and is cheap
so we can always ensure that those parameters are configured properly.

Closes-Bug: #1948642
Change-Id: Idfa763df8c60d8ae46cd6351d1b6dc7d950b4c67
",git fetch https://review.opendev.org/openstack/neutron refs/changes/55/815255/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/openflow/native/ovs_bridge.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/openflow/native/ovs_bridge_test_base.py']",2,2414e1b6d2ce63885fd2b1155af89e030a2f90fb,bug/1948642," def _test_setup_controllers(self, existing_controllers): cfg.OVS.of_listen_address = ""127.0.0.1"" cfg.OVS.of_listen_port = ""6633"" m_get_controller = mock.patch.object(self.br, 'get_controller') with m_set_ccm as set_ccm, \ m_add_protocols as add_protocols, \ m_set_controller as set_controller, \ m_get_controller as get_controller, \ m_set_probe: get_controller.return_value = existing_controllers self.br.setup_controllers(cfg) if existing_controllers: set_controller.assert_not_called() else: set_controller.assert_called_once_with([""tcp:127.0.0.1:6633""]) set_ccm.assert_called_once_with(""out-of-band"") add_protocols.assert_called_once_with( constants.OPENFLOW10, constants.OPENFLOW13) def test_setup_controllers(self): self._test_setup_controllers(existing_controllers=[]) def test_setup_controllers_when_already_exists(self): self._test_setup_controllers( existing_controllers=[""tcp:127.0.0.1:6633""])"," def test__setup_controllers__out_of_band(self): cfg.OVS.of_listen_address = """" cfg.OVS.of_listen_port = """" with m_set_ccm as set_ccm: with m_add_protocols as add_protocols: with m_set_controller, m_set_probe: self.br.setup_controllers(cfg) set_ccm.assert_called_once_with(""out-of-band"") add_protocols.assert_called_once_with( constants.OPENFLOW10, constants.OPENFLOW13)",33,12
openstack%2Fcinder~master~I32ff74ea301021f217fd30eaeec4cede3ec27ab1,openstack/cinder,master,I32ff74ea301021f217fd30eaeec4cede3ec27ab1,Support Cinder FC driver for TOYOU NetStor,ABANDONED,2021-07-30 10:04:20.000000000,2021-11-03 10:23:52.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-30 10:04:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/177bef4bb8fbf4ab1d49e873b0c4e16964918b82', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 2, 'created': '2021-08-02 09:16:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/c72688e08ccf95ced175af7d31464e8187892090', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 3, 'created': '2021-08-03 01:33:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/47113e7cd31d8dc1c8216c6ba1f0b67ca06052ae', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 4, 'created': '2021-08-05 03:40:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/fe03bcc8bb6b5e333f6233ec7c0f98c97e178738', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 5, 'created': '2021-08-05 08:27:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/4d83b49d97ddfcc2f10e429c7b3498373f5a8040', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 6, 'created': '2021-08-09 07:23:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/682248a7fb6f1ef21dcc83d4873844e8a22b00d2', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 7, 'created': '2021-08-10 11:25:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/94bdd2faf86bba9625d1724d236b7f2b9ba326aa', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 8, 'created': '2021-08-11 07:24:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/401403e0470476b0ae984cc447f91196629be83e', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 9, 'created': '2021-08-11 10:02:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/2febb1e0fde5c8f60244814d1039de4e9538d026', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 10, 'created': '2021-08-18 12:51:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/bac3005abe04061f76192fd378c6b10ece7aec03', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n - Thin Provisioning\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}, {'number': 11, 'created': '2021-08-18 13:26:48.000000000', 'files': ['doc/source/reference/support-matrix.ini', 'cinder/volume/drivers/toyou/acs5000/acs5000_common.py', 'releasenotes/notes/toyou-netstor-storage-acs5000-fc-driver-f0d7428924bfeda1.yaml', 'doc/source/configuration/block-storage/drivers/toyou-acs5000-driver.rst', 'cinder/volume/drivers/toyou/acs5000/acs5000_iscsi.py', 'cinder/volume/drivers/toyou/acs5000/acs5000_fc.py', 'doc/source/configuration/block-storage/drivers/toyou-netstor-driver.rst', 'cinder/tests/unit/volume/drivers/toyou/test_acs5000.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/a0ab8f5732c903b4c59ccf3afc538cf3037f889f', 'message': 'Support Cinder FC driver for TOYOU NetStor\n\n* Supported Protocol\n - iSCSI\n - FC\n\n* Supported Feature\n - Volume Attach/Detach(FC)\n - Extend Attached Volume\n - Volume Manage/Unmanage\n - Revert to Snapshot\n - Multi-attach\n - Thin Provisioning\n\nThirdPartySystems: TOYOU ACS5000 CI\nChange-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1\n'}]",5,803000,a0ab8f5732c903b4c59ccf3afc538cf3037f889f,218,1,11,32833,,,0,"Support Cinder FC driver for TOYOU NetStor

* Supported Protocol
 - iSCSI
 - FC

* Supported Feature
 - Volume Attach/Detach(FC)
 - Extend Attached Volume
 - Volume Manage/Unmanage
 - Revert to Snapshot
 - Multi-attach
 - Thin Provisioning

ThirdPartySystems: TOYOU ACS5000 CI
Change-Id: I32ff74ea301021f217fd30eaeec4cede3ec27ab1
",git fetch https://review.opendev.org/openstack/cinder refs/changes/00/803000/4 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/drivers/toyou/acs5000/acs5000_common.py', 'cinder/volume/drivers/toyou/acs5000/acs5000_iscsi.py', 'cinder/volume/drivers/toyou/acs5000/acs5000_fc.py']",3,177bef4bb8fbf4ab1d49e873b0c4e16964918b82,bp/toyou-netstor-driver,"# Copyright 2021 toyou Corp. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. """""" acs5000 FC driver """""" from oslo_log import log as logging from cinder import exception from cinder.i18n import _ from cinder import interface from cinder import utils from cinder.volume.drivers.toyou.acs5000 import acs5000_common from cinder.zonemanager import utils as zone_utils LOG = logging.getLogger(__name__) @interface.volumedriver class Acs5000FCDriver(acs5000_common.Acs5000CommonDriver): """"""TOYOU ACS5000 storage FC volume driver. .. code-block:: none Version history: 1.0.0 - Initial driver """""" VENDOR = 'TOYOU' VERSION = '1.0.0' PROTOCOL = 'FC' # ThirdPartySystems wiki page CI_WIKI_NAME = 'TOYOU_ACS5000_CI' def __init__(self, *args, **kwargs): super(Acs5000FCDriver, self).__init__(*args, **kwargs) self.protocol = self.PROTOCOL @staticmethod def get_driver_options(): return acs5000_common.Acs5000CommonDriver.get_driver_options() def _get_connected_wwpns(self): fc_ports = self._cmd.ls_fc() connected_wwpns = [] for port in fc_ports: if 'wwpn' in port: connected_wwpns.append(port['wwpn']) elif 'WWPN' in port: connected_wwpns.append(port['WWPN']) return connected_wwpns def validate_connector(self, connector): """"""Check connector for at least one enabled FC protocol."""""" if 'wwpns' not in connector: LOG.error('The connector does not ' 'contain the required information.') raise exception.InvalidConnectorException( missing='wwpns') @utils.synchronized('acs5000A-host', external=True) def initialize_connection(self, volume, connector): LOG.debug('enter: initialize_connection: volume ' '%(vol)s with connector %(conn)s', {'vol': volume.id, 'conn': connector}) volume_name = self._convert_name(volume.name) ret = self._cmd.create_lun_map(volume_name, self.protocol, connector['wwpns']) if ret['key'] == 0: if 'lun' in ret['arr']: lun_id = int(ret['arr']['lun']) else: msg = (_('_create_fc_lun: Lun id did not find ' 'when volume %s create lun map.') % volume['id']) raise exception.VolumeBackendAPIException(data=msg) target_wwpns = self._get_connected_wwpns() if len(target_wwpns) == 0: self.terminate_connection(volume, connector) msg = (_('_create_fc_lun: Did not find ' 'available fc wwpns when volume %s ' 'create lun map.') % volume['id']) raise exception.VolumeBackendAPIException(data=msg) initiator_target = {} for initiator_wwpn in connector['wwpns']: initiator_target[str(initiator_wwpn)] = target_wwpns properties = {'driver_volume_type': 'fibre_channel', 'data': {'target_wwn': target_wwpns, 'target_discovered': False, 'target_lun': lun_id, 'volume_id': volume['id']}} properties['data']['initiator_target_map'] = initiator_target if ""zvm_fcp"" in connector: properties['data']['zvm_fcp'] = connector['zvm_fcp'] elif ret['key'] == 303: raise exception.VolumeNotFound(volume_id=volume_name) else: msg = (_('failed to map the volume %(vol)s to ' 'connector %(conn)s.') % {'vol': volume['id'], 'conn': connector}) raise exception.VolumeBackendAPIException(data=msg) zone_utils.add_fc_zone(properties) LOG.debug('leave: initialize_connection: volume ' '%(vol)s with connector %(conn)s', {'vol': volume.id, 'conn': connector}) return properties @utils.synchronized('acs5000A-host', external=True) def terminate_connection(self, volume, connector, **kwargs): LOG.debug('enter: terminate_connection: volume ' '%(vol)s with connector %(conn)s', {'vol': volume.id, 'conn': connector}) volume_name = self._convert_name(volume.name) properties = {'driver_volume_type': 'fibre_channel', 'data': {}} target_wwpns = self._get_connected_wwpns() if len(target_wwpns) == 0: msg = (_('_delete_fc_lun: Did not find ' 'available fc wwpns when volume %s ' 'delete lun map.') % volume['id']) raise exception.VolumeBackendAPIException(data=msg) initiator_target = {} for initiator_wwpn in connector['wwpns']: initiator_target[str(initiator_wwpn)] = target_wwpns properties['data']['initiator_target_map'] = initiator_target self._cmd.delete_lun_map(volume_name, self.protocol, connector['wwpns']) zone_utils.remove_fc_zone(properties) LOG.debug('enter: terminate_connection: volume ' '%(vol)s with connector %(conn)s', {'vol': volume.id, 'conn': connector}) return properties ",,387,128
openstack%2Fironic-python-agent~master~Ib61a7100a059e79a8b0901fd8f46b9bc41d657dc,openstack/ironic-python-agent,master,Ib61a7100a059e79a8b0901fd8f46b9bc41d657dc,Delete EFI boot entry duplicate labels first,MERGED,2021-10-28 18:56:06.000000000,2021-11-03 10:21:08.000000000,2021-11-03 10:19:19.000000000,"[{'_account_id': 4571}, {'_account_id': 10239}, {'_account_id': 15519}, {'_account_id': 21909}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-10-28 18:56:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/46adbb402846415123a9e3de9030e9fe6d55a5e4', 'message': 'Delete EFI boot entry duplicate labels first\n\nSome firmware seems to take an objection with EFI nvram\nentries being deleted after one is added, resulting in the\nentire entry table being reset to the last known good state.\n\nThis is problematic, as ultimately deployments can time out\nif we previously booted with Networking, and the machine, while\ncommanded to do other wise, reboots back to networking regardless.\n\nWe will now delete entries first, before proceeding.\n\nAdditionally, for general use, this pattern may serve the\ncommunity better by avoiding cases where we would have\npreviously just relied upon efibootmgr[0] to warn us of duplicate\nentries.\n\n[0]: https://github.com/rhboot/efibootmgr/blob/103aa22ece98f09fe3ea2a0c83988f0ee2d0e5a8/src/efibootmgr.c#L228\n\nChange-Id: Ib61a7100a059e79a8b0901fd8f46b9bc41d657dc\nStory: 2009649\nTask: 43808\n'}, {'number': 2, 'created': '2021-11-01 13:59:39.000000000', 'files': ['ironic_python_agent/tests/unit/extensions/test_image.py', 'ironic_python_agent/extensions/image.py', 'releasenotes/notes/de-duplicate-by-label-baa090c5b1bff992.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/67eddfa7e3fedbb530045f5b43a2c89db832fa2a', 'message': 'Delete EFI boot entry duplicate labels first\n\nSome firmware seems to take an objection with EFI nvram\nentries being deleted after one is added, resulting in the\nentire entry table being reset to the last known good state.\n\nThis is problematic, as ultimately deployments can time out\nif we previously booted with Networking, and the machine, while\ncommanded to do other wise, reboots back to networking regardless.\n\nWe will now delete entries first, before proceeding.\n\nAdditionally, for general use, this pattern may serve the\ncommunity better by avoiding cases where we would have\npreviously just relied upon efibootmgr[0] to warn us of duplicate\nentries.\n\n[0]: https://github.com/rhboot/efibootmgr/blob/103aa22ece98f09fe3ea2a0c83988f0ee2d0e5a8/src/efibootmgr.c#L228\n\nChange-Id: Ib61a7100a059e79a8b0901fd8f46b9bc41d657dc\nStory: 2009649\nTask: 43808\n'}]",6,815899,67eddfa7e3fedbb530045f5b43a2c89db832fa2a,14,6,2,11655,,,0,"Delete EFI boot entry duplicate labels first

Some firmware seems to take an objection with EFI nvram
entries being deleted after one is added, resulting in the
entire entry table being reset to the last known good state.

This is problematic, as ultimately deployments can time out
if we previously booted with Networking, and the machine, while
commanded to do other wise, reboots back to networking regardless.

We will now delete entries first, before proceeding.

Additionally, for general use, this pattern may serve the
community better by avoiding cases where we would have
previously just relied upon efibootmgr[0] to warn us of duplicate
entries.

[0]: https://github.com/rhboot/efibootmgr/blob/103aa22ece98f09fe3ea2a0c83988f0ee2d0e5a8/src/efibootmgr.c#L228

Change-Id: Ib61a7100a059e79a8b0901fd8f46b9bc41d657dc
Story: 2009649
Task: 43808
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/99/815899/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/tests/unit/extensions/test_image.py', 'ironic_python_agent/extensions/image.py', 'releasenotes/notes/de-duplicate-by-label-baa090c5b1bff992.yaml']",3,46adbb402846415123a9e3de9030e9fe6d55a5e4,,"--- fixes: - | Fixes cases where duplicates may not not be cought in the UEFI firmware NVRAM boot entry table by explicitly looking for, and deleting for matching labels in advance of creating the EFI boot loader entry. ",,51,24
openstack%2Fcharm-deployment-guide~master~If462faad3f21dd6ae9730e0ccc28b4cb8d8a8b71,openstack/charm-deployment-guide,master,If462faad3f21dd6ae9730e0ccc28b4cb8d8a8b71,Add OVN principle charms to the charm/OpenStack upgrade order,MERGED,2021-10-20 08:15:38.000000000,2021-11-03 10:20:25.000000000,2021-11-03 10:18:49.000000000,"[{'_account_id': 13686}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 30561}]","[{'number': 1, 'created': '2021-10-20 08:15:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-deployment-guide/commit/7a69f35fa0080e9557ddf844c3a01f77a8e255a3', 'message': ""Add ovn-central to the charm/OpenStack upgrade order\n\nThis is also the way we'll be validating it with our\nautomated tests:\nhttps://github.com/openstack-charmers/zaza-openstack-tests/pull/655\n\nChange-Id: If462faad3f21dd6ae9730e0ccc28b4cb8d8a8b71\n""}, {'number': 2, 'created': '2021-11-02 10:06:49.000000000', 'files': ['deploy-guide/source/upgrade-openstack.rst', 'deploy-guide/source/upgrade-charms.rst'], 'web_link': 'https://opendev.org/openstack/charm-deployment-guide/commit/24e0966313da4a7aaf81715fe3ce6f2479c5e9e3', 'message': ""Add OVN principle charms to the charm/OpenStack upgrade order\n\nThis is also the way we'll be validating upgrade with\nour automated tests:\nhttps://github.com/openstack-charmers/zaza-openstack-tests/pull/655\n\nChange-Id: If462faad3f21dd6ae9730e0ccc28b4cb8d8a8b71\n""}]",6,814725,24e0966313da4a7aaf81715fe3ce6f2479c5e9e3,12,4,2,31289,,,0,"Add OVN principle charms to the charm/OpenStack upgrade order

This is also the way we'll be validating upgrade with
our automated tests:
https://github.com/openstack-charmers/zaza-openstack-tests/pull/655

Change-Id: If462faad3f21dd6ae9730e0ccc28b4cb8d8a8b71
",git fetch https://review.opendev.org/openstack/charm-deployment-guide refs/changes/25/814725/1 && git format-patch -1 --stdout FETCH_HEAD,"['deploy-guide/source/upgrade-openstack.rst', 'deploy-guide/source/upgrade-charms.rst']",2,7a69f35fa0080e9557ddf844c3a01f77a8e255a3,upgrade-order-ovn, - `neutron-gateway`_ or `ovn-central`_, - `neutron-gateway`_,2,2
openstack%2Fcharm-ceph-dashboard~master~I319a85eb3dc4c995b959a085c56dad563e793c37,openstack/charm-ceph-dashboard,master,I319a85eb3dc4c995b959a085c56dad563e793c37,Add support for bionic,MERGED,2021-10-27 15:09:38.000000000,2021-11-03 10:11:28.000000000,2021-11-03 10:11:28.000000000,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-10-27 15:09:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/710356b4471fbf5124adf245b35063d121be2d7c', 'message': 'Add support for bionic\n\nChange-Id: I319a85eb3dc4c995b959a085c56dad563e793c37\n'}, {'number': 2, 'created': '2021-10-27 16:21:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/af209ccbb6c2aae842b328346267b22c2def0795', 'message': 'Add support for bionic\n\nChange-Id: I319a85eb3dc4c995b959a085c56dad563e793c37\n'}, {'number': 3, 'created': '2021-10-27 20:04:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/3ae870e8f86e09151a2cf736a313145359aa99f4', 'message': 'Add support for bionic\n\nChange-Id: I319a85eb3dc4c995b959a085c56dad563e793c37\n'}, {'number': 4, 'created': '2021-10-27 20:20:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/c0aadb30aeb9f91e1a40009406dcef3e8f1b967f', 'message': 'Add support for bionic\n\nChange-Id: I319a85eb3dc4c995b959a085c56dad563e793c37\n'}, {'number': 5, 'created': '2021-10-28 06:56:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/e7153cba70c79048158c7ac90ebfe03f60cbe823', 'message': 'Add support for bionic\n\nChange-Id: I319a85eb3dc4c995b959a085c56dad563e793c37\n'}, {'number': 6, 'created': '2021-10-28 09:57:09.000000000', 'files': ['tests/bundles/bionic-octopus.yaml', 'tests/bundles/overlays/bionic-octopus.yaml.j2', 'tests/tests.yaml', 'osci.yaml', 'requirements.txt', 'metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/f85eafc6524313521338b8473475b1d50371998d', 'message': 'Add support for bionic\n\nChange-Id: I319a85eb3dc4c995b959a085c56dad563e793c37\n'}]",11,815692,f85eafc6524313521338b8473475b1d50371998d,37,4,6,12549,,,0,"Add support for bionic

Change-Id: I319a85eb3dc4c995b959a085c56dad563e793c37
",git fetch https://review.opendev.org/openstack/charm-ceph-dashboard refs/changes/92/815692/1 && git format-patch -1 --stdout FETCH_HEAD,"['tests/tests.yaml', 'requirements.txt', 'tests/bundles/bionic-ussuri.yaml', 'tests/bundles/overlays/bionic-ussuri.yaml.j2', 'metadata.yaml']",5,710356b4471fbf5124adf245b35063d121be2d7c,bionic-support,- bionic,,109,1
openstack%2Fnova~stable%2Frocky~I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf,openstack/nova,stable/rocky,I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf,[stable-only] Pin virtualenv and setuptools,ABANDONED,2021-11-03 07:56:48.000000000,2021-11-03 10:11:20.000000000,,"[{'_account_id': 9708}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-03 07:56:48.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/nova/commit/46783ec8c1b40a68e6215d713f87d50a48587531', 'message': ""[stable-only] Pin virtualenv and setuptools\n\nSetuptools 58.0 (bundled in virtualenv 20.8) breaks the installation of\ndecorator 3.4.0. So this patch pins virtualenv to avoid the break.\n\nAs the used 'require' feature was introduced in tox in version 3.2 [1],\nthe required minversion has to be bumped, too.\n\n[1] https://tox.readthedocs.io/en/latest/config.html#conf-requires\n\nConflicts:\n    tox.ini\n\nNOTE(elod.illes): The conflict is because change\nIff442451c7a95caa7b9d22c76c341150175a34d1 is not in Rocky.\n\nChange-Id: I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf\n(cherry picked from commit b27f8e9adfcf2db3c83722c42e055ba5065ad06e)\n(cherry picked from commit f1be212a86262f128e73f7201b7b3e51334f1ab4)\n(cherry picked from commit 85cda94e672a9ca0f512589d543a5a6659d285ad)\n""}]",0,816436,46783ec8c1b40a68e6215d713f87d50a48587531,3,2,1,17685,,,0,"[stable-only] Pin virtualenv and setuptools

Setuptools 58.0 (bundled in virtualenv 20.8) breaks the installation of
decorator 3.4.0. So this patch pins virtualenv to avoid the break.

As the used 'require' feature was introduced in tox in version 3.2 [1],
the required minversion has to be bumped, too.

[1] https://tox.readthedocs.io/en/latest/config.html#conf-requires

Conflicts:
    tox.ini

NOTE(elod.illes): The conflict is because change
Iff442451c7a95caa7b9d22c76c341150175a34d1 is not in Rocky.

Change-Id: I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf
(cherry picked from commit b27f8e9adfcf2db3c83722c42e055ba5065ad06e)
(cherry picked from commit f1be212a86262f128e73f7201b7b3e51334f1ab4)
(cherry picked from commit 85cda94e672a9ca0f512589d543a5a6659d285ad)
",git fetch https://review.opendev.org/openstack/nova refs/changes/36/816436/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,46783ec8c1b40a68e6215d713f87d50a48587531,use_2to3,minversion = 3.2.0# Pin the virtualenv and therefore the setuptools version used for the env # creation. This results in a new tox being installed in .tox/.tox virtualenv # and the tox on the host will delegate all the calls to the tox in that env. requires = virtualenv<20.8,minversion = 2.1,5,1
openstack%2Fdevstack-plugin-container~master~Ica4277b06740f8dca3ff5be77432cf6ab2f3cdeb,openstack/devstack-plugin-container,master,Ica4277b06740f8dca3ff5be77432cf6ab2f3cdeb,Provide right path to the runc binary for Ubuntu and CRI-O installation.,MERGED,2021-10-27 14:03:13.000000000,2021-11-03 10:09:04.000000000,2021-11-03 10:09:04.000000000,"[{'_account_id': 11536}, {'_account_id': 11600}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 14:03:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-container/commit/b23a15c5d79558a19b89f7c933cd537aa60a1122', 'message': 'Provide right path to the runc binary for Ubuntu and CRI-O installation.\n\nChange-Id: Ica4277b06740f8dca3ff5be77432cf6ab2f3cdeb\n'}, {'number': 2, 'created': '2021-10-28 07:02:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-container/commit/4a2fb49e83d687fa8e98db7e73aef450c6490ed8', 'message': 'Provide right path to the runc binary for Ubuntu and CRI-O installation.\n\nChange-Id: Ica4277b06740f8dca3ff5be77432cf6ab2f3cdeb\n'}, {'number': 3, 'created': '2021-11-02 10:25:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-container/commit/1e7ac8cb75f16f8c9fd13ed40fcdcf9e026a7d0e', 'message': 'Provide right path to the runc binary for Ubuntu and CRI-O installation.\n\nChange-Id: Ica4277b06740f8dca3ff5be77432cf6ab2f3cdeb\n'}, {'number': 4, 'created': '2021-11-02 16:10:04.000000000', 'files': ['devstack/lib/crio', 'devstack/settings'], 'web_link': 'https://opendev.org/openstack/devstack-plugin-container/commit/bd98565f992639c3fa9808bffca8f2e921d2e8c5', 'message': 'Provide right path to the runc binary for Ubuntu and CRI-O installation.\n\nThere are also two new configuration option introduced:\n\n- CNI_PLUGIN_DIR\n- CNI_CONF_DIR\n\nwhich, if defined, are used to configure crio paths for plugins and\nnetworks config.\n\nChange-Id: Ica4277b06740f8dca3ff5be77432cf6ab2f3cdeb\n'}]",7,815669,bd98565f992639c3fa9808bffca8f2e921d2e8c5,19,3,4,13692,,,0,"Provide right path to the runc binary for Ubuntu and CRI-O installation.

There are also two new configuration option introduced:

- CNI_PLUGIN_DIR
- CNI_CONF_DIR

which, if defined, are used to configure crio paths for plugins and
networks config.

Change-Id: Ica4277b06740f8dca3ff5be77432cf6ab2f3cdeb
",git fetch https://review.opendev.org/openstack/devstack-plugin-container refs/changes/69/815669/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/crio'],1,b23a15c5d79558a19b89f7c933cd537aa60a1122,crio," # CRI-O from kubic repo have placed runc in different place, not even # in path, just to not conflict with runc package from official repo. # We need to change it. iniset -sudo ${crio_conf} crio.runtime.runtimes.runc runtime_path \ \""/usr/lib/cri-o-runc/sbin/runc\""",,5,0
openstack%2Fpuppet-openstack-guide~master~I62cfebd9d1d5c660da13553578b8449cfafd91be,openstack/puppet-openstack-guide,master,I62cfebd9d1d5c660da13553578b8449cfafd91be,Remove reference to puppet-pacemaker,MERGED,2021-11-01 15:32:50.000000000,2021-11-03 10:08:47.000000000,2021-11-03 10:07:15.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 15:32:50.000000000', 'files': ['doc/source/install/releases.rst'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-guide/commit/17d757e3d6f28a84cd3ee7561cd1c9ffa9156b0e', 'message': 'Remove reference to puppet-pacemaker\n\n... because puppet-pacemaker is maintained by TripleO community instead\nof Puppet OpenStack community.\n\nChange-Id: I62cfebd9d1d5c660da13553578b8449cfafd91be\n'}]",1,816185,17d757e3d6f28a84cd3ee7561cd1c9ffa9156b0e,10,3,1,9816,,,0,"Remove reference to puppet-pacemaker

... because puppet-pacemaker is maintained by TripleO community instead
of Puppet OpenStack community.

Change-Id: I62cfebd9d1d5c660da13553578b8449cfafd91be
",git fetch https://review.opendev.org/openstack/puppet-openstack-guide refs/changes/85/816185/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/install/releases.rst'],1,17d757e3d6f28a84cd3ee7561cd1c9ffa9156b0e,,,.. note:: puppet-pacemaker should also be done seperately because it is an independent release,0,2
openstack%2Fironic~bugfix%2F18.0~If298a98b0807e69a3194e48e42d897e8c8414e7e,openstack/ironic,bugfix/18.0,If298a98b0807e69a3194e48e42d897e8c8414e7e,Improve agent_client logging,ABANDONED,2021-06-08 08:30:00.000000000,2021-11-03 10:04:50.000000000,,"[{'_account_id': 4571}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-08 08:30:00.000000000', 'files': ['ironic/drivers/modules/agent_client.py', 'ironic/common/utils.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/e078fc99b03325b19b643f6824dbbbcc54c1972e', 'message': 'Improve agent_client logging\n\n* Avoid logging large keys, such as system_logs\n* Log request params when sending a request\n* Sanitizing requests and responses before logging\n\nChange-Id: If298a98b0807e69a3194e48e42d897e8c8414e7e\n(cherry picked from commit 96aae720ad17231da5144b1c43eee97865f2d52d)\n'}]",3,795151,e078fc99b03325b19b643f6824dbbbcc54c1972e,16,4,1,23851,,,0,"Improve agent_client logging

* Avoid logging large keys, such as system_logs
* Log request params when sending a request
* Sanitizing requests and responses before logging

Change-Id: If298a98b0807e69a3194e48e42d897e8c8414e7e
(cherry picked from commit 96aae720ad17231da5144b1c43eee97865f2d52d)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/51/795151/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/drivers/modules/agent_client.py', 'ironic/common/utils.py']",2,e078fc99b03325b19b643f6824dbbbcc54c1972e,logging-bugfix/18.0,"from collections import abc _LARGE_KEYS = frozenset(['system_logs']) def remove_large_keys(var): """"""Remove specific keys from the var, recursing into dicts and lists."""""" if isinstance(var, abc.Mapping): return {key: (remove_large_keys(value) if key not in _LARGE_KEYS else '<...>') for key, value in var.items()} elif isinstance(var, abc.Sequence) and not isinstance(var, str): return var.__class__(map(remove_large_keys, var)) else: return var",,33,4
openstack%2Ftripleo-heat-templates~stable%2Ftrain~Ic045cdf0544fffeed51871d5b970fd29707fcd95,openstack/tripleo-heat-templates,stable/train,Ic045cdf0544fffeed51871d5b970fd29707fcd95,Added support for Neutron loggings service plugin configuration,MERGED,2021-10-12 10:26:07.000000000,2021-11-03 09:43:27.000000000,2021-11-03 09:36:13.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-12 10:26:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e94d4c85a501814f54be1eda07b991f2300986a4', 'message': 'Added support for Neutron loggings service plugin configuration\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-neutron/+/813605\n\nConflicts:\n    deployment/neutron/neutron-l3-container-puppet.yaml\n    deployment/neutron/neutron-ovs-agent-container-puppet.yaml\n    deployment/neutron/neutron-plugin-ml2-ovn.yaml\n\nRelated: rhbz#1990357\nChange-Id: Ic045cdf0544fffeed51871d5b970fd29707fcd95\n(cherry picked from commit c9f0a5af0148f6a83b67422dabdaf786676c3756)\n'}, {'number': 2, 'created': '2021-10-25 20:12:14.000000000', 'files': ['deployment/neutron/neutron-l3-container-puppet.yaml', 'releasenotes/notes/neutron-logging-plugin-support-added-b2e1292d49e087c3.yaml', 'deployment/neutron/neutron-ovs-agent-container-puppet.yaml', 'deployment/neutron/neutron-plugin-ml2-ovn.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/0da2a8a842c0b6b1727dca666e96772bdfc94917', 'message': 'Added support for Neutron loggings service plugin configuration\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-neutron/+/813602\n\nConflicts:\n    deployment/neutron/neutron-l3-container-puppet.yaml\n    deployment/neutron/neutron-ovs-agent-container-puppet.yaml\n    deployment/neutron/neutron-plugin-ml2-ovn.yaml\n\nRelated: rhbz#1990357\nChange-Id: Ic045cdf0544fffeed51871d5b970fd29707fcd95\n(cherry picked from commit c9f0a5af0148f6a83b67422dabdaf786676c3756)\n'}]",1,813584,0da2a8a842c0b6b1727dca666e96772bdfc94917,19,4,2,11975,,,0,"Added support for Neutron loggings service plugin configuration

Depends-On: https://review.opendev.org/c/openstack/puppet-neutron/+/813602

Conflicts:
    deployment/neutron/neutron-l3-container-puppet.yaml
    deployment/neutron/neutron-ovs-agent-container-puppet.yaml
    deployment/neutron/neutron-plugin-ml2-ovn.yaml

Related: rhbz#1990357
Change-Id: Ic045cdf0544fffeed51871d5b970fd29707fcd95
(cherry picked from commit c9f0a5af0148f6a83b67422dabdaf786676c3756)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/84/813584/2 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/neutron/neutron-l3-container-puppet.yaml', 'releasenotes/notes/neutron-logging-plugin-support-added-b2e1292d49e087c3.yaml', 'deployment/neutron/neutron-ovs-agent-container-puppet.yaml', 'deployment/neutron/neutron-plugin-ml2-ovn.yaml']",4,e94d4c85a501814f54be1eda07b991f2300986a4,log-extension-stable/victoria-stable/ussuri-stable/train," NeutronOVNLoggingRateLimit: default: 100 description: | Maximum number of packets logging per second type: number NeutronOVNLoggingBurstLimit: default: 25 description: | Maximum number of packets per rate_limit type: number NeutronOVNLoggingLocalOutputLogBase: default: '' description: | Output logfile path on agent side, default syslog file type: string network_log_local_output_log_base_set: not: {equals : [{get_param: NeutronOVNLoggingLocalOutputLogBase}, '']} - neutron::agents::ml2::ovn::network_log_rate_limit: {get_param: NeutronOVNLoggingRateLimit} - neutron::agents::ml2::ovn::network_log_burst_limit: {get_param: NeutronOVNLoggingBurstLimit} - if: - network_log_local_output_log_base_set - neutron::agents::ml2::ovn::network_log_local_output_log_base: {get_param: NeutronOVNLoggingLocalOutputLogBase}",,82,1
openstack%2Ftripleo-common~stable%2Fvictoria~I161f8389f7426cd575dc32d44a76de3097ac76e9,openstack/tripleo-common,stable/victoria,I161f8389f7426cd575dc32d44a76de3097ac76e9,Remove unused DEFAULT_DEPLOY_*_NAME,MERGED,2021-10-18 23:25:07.000000000,2021-11-03 09:43:15.000000000,2021-11-03 09:36:01.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-18 23:25:07.000000000', 'files': ['tripleo_common/constants.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/5b8851531267b640ddfa7fe89c3e34052f3a121e', 'message': 'Remove unused DEFAULT_DEPLOY_*_NAME\n\n... because these constants are no longer used since validations\ndependent on these parameters was split out to a separate validation\nrepository[1].\n\n[1] 05a84782c4e8400035040312a2c988053e31eb8f\n\nChange-Id: I161f8389f7426cd575dc32d44a76de3097ac76e9\n(cherry picked from commit 6d0049245eabe579ef63b9dd198eccb69e18ea77)\n(cherry picked from commit 774be153e8b9529399693a664809d87889e27081)\n'}]",2,814502,5b8851531267b640ddfa7fe89c3e34052f3a121e,17,4,1,9816,,,0,"Remove unused DEFAULT_DEPLOY_*_NAME

... because these constants are no longer used since validations
dependent on these parameters was split out to a separate validation
repository[1].

[1] 05a84782c4e8400035040312a2c988053e31eb8f

Change-Id: I161f8389f7426cd575dc32d44a76de3097ac76e9
(cherry picked from commit 6d0049245eabe579ef63b9dd198eccb69e18ea77)
(cherry picked from commit 774be153e8b9529399693a664809d87889e27081)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/02/814502/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/constants.py'],1,5b8851531267b640ddfa7fe89c3e34052f3a121e,constants-cleanup-v,,DEFAULT_DEPLOY_KERNEL_NAME = 'bm-deploy-kernel' DEFAULT_DEPLOY_RAMDISK_NAME = 'bm-deploy-ramdisk' ,0,4
openstack%2Fnova~master~I978b4e44cf7f522a70cc5ca76e6d6f1a985d5469,openstack/nova,master,I978b4e44cf7f522a70cc5ca76e6d6f1a985d5469,db: De-duplicate list of removed table columns,MERGED,2021-10-18 19:26:28.000000000,2021-11-03 09:42:18.000000000,2021-11-03 09:36:48.000000000,"[{'_account_id': 4690}, {'_account_id': 7634}, {'_account_id': 9708}, {'_account_id': 22348}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-18 19:26:28.000000000', 'files': ['nova/tests/unit/db/api/test_migrations.py', 'nova/tests/unit/db/main/test_migrations.py', 'nova/db/api/models.py', 'nova/db/api/migrations/env.py', 'nova/db/main/migrations/env.py', 'nova/db/main/models.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a4d7f70740b1c707a71ea50f9996c02bf434cf74', 'message': ""db: De-duplicate list of removed table columns\n\nWe have a policy of removing fields from SQLAlchemy models at least one\ncycle before we remove the underlying database columns. This can result\nin a discrepancy between the state that our newfangled database\nmigration tool, alembic, sees and what's actually in the database. We\nwere ignoring these removed fields (and one foreign key constraint) in\ntwo different locations for both databases: as part of the alembic\nconfiguration and as part of the tests we have to ensure our migrations\nare in sync with our models (note: the tests actually use the alembic\nmechanism to detect the changes [1]). De-duplicate these.\n\n[1] https://github.com/sqlalchemy/alembic/issues/724#issuecomment-672081357\n\nChange-Id: I978b4e44cf7f522a70cc5ca76e6d6f1a985d5469\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",4,814489,a4d7f70740b1c707a71ea50f9996c02bf434cf74,33,5,1,15334,,,0,"db: De-duplicate list of removed table columns

We have a policy of removing fields from SQLAlchemy models at least one
cycle before we remove the underlying database columns. This can result
in a discrepancy between the state that our newfangled database
migration tool, alembic, sees and what's actually in the database. We
were ignoring these removed fields (and one foreign key constraint) in
two different locations for both databases: as part of the alembic
configuration and as part of the tests we have to ensure our migrations
are in sync with our models (note: the tests actually use the alembic
mechanism to detect the changes [1]). De-duplicate these.

[1] https://github.com/sqlalchemy/alembic/issues/724#issuecomment-672081357

Change-Id: I978b4e44cf7f522a70cc5ca76e6d6f1a985d5469
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/89/814489/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/db/api/test_migrations.py', 'nova/tests/unit/db/main/test_migrations.py', 'nova/db/api/models.py', 'nova/db/api/migrations/env.py', 'nova/db/main/migrations/env.py', 'nova/db/main/models.py']",6,a4d7f70740b1c707a71ea50f9996c02bf434cf74,bp/remove-sqlalchemy-migrate,"# NOTE(stephenfin): This is a list of fields that have been removed from # various SQLAlchemy models but which still exist in the underlying tables. Our # upgrade policy dictates that we remove fields from models at least one cycle # before we remove the column from the underlying table. Not doing so would # prevent us from applying the new database schema before rolling out any of # the new code since the old code could attempt to access data in the removed # columns. Alembic identifies this temporary mismatch between the models and # underlying tables and attempts to resolve it. Tell it instead to ignore these # until we're ready to remove them ourselves. REMOVED_COLUMNS = { ('instances', 'internal_id'), ('instance_extra', 'vpmems'), } # NOTE(stephenfin): A list of foreign key constraints that were removed when # the column they were covering was removed. REMOVED_FKEYS = [] # NOTE(stephenfin): A list of entire models that have been removed. REMOVED_TABLES = [] ",,131,98
openstack%2Fpython-tripleoclient~stable%2Fwallaby~I51110d4c71966a95e023f28a3d62b6c3030e1ee3,openstack/python-tripleoclient,stable/wallaby,I51110d4c71966a95e023f28a3d62b6c3030e1ee3,Only use undercloud.conf ipxe_enabled for inspection,MERGED,2021-10-05 21:23:56.000000000,2021-11-03 09:42:07.000000000,2021-11-03 09:36:36.000000000,"[{'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 24245}]","[{'number': 1, 'created': '2021-10-05 21:23:56.000000000', 'files': ['tripleoclient/config/undercloud.py', 'tripleoclient/v1/undercloud_config.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/d62bdace7691603d908acdc463648ec7f10d4071', 'message': 'Only use undercloud.conf ipxe_enabled for inspection\n\nSetting ironic ipxe_enabled was removed in Ussuri, replaced with\na per-node boot interface.\n\nThis change stops setting IronicIPXEEnabled and clarifies that\nipxe_enabled is only used for inspection.\n\nChange-Id: I51110d4c71966a95e023f28a3d62b6c3030e1ee3\n'}]",1,812615,d62bdace7691603d908acdc463648ec7f10d4071,8,4,1,4571,,,0,"Only use undercloud.conf ipxe_enabled for inspection

Setting ironic ipxe_enabled was removed in Ussuri, replaced with
a per-node boot interface.

This change stops setting IronicIPXEEnabled and clarifies that
ipxe_enabled is only used for inspection.

Change-Id: I51110d4c71966a95e023f28a3d62b6c3030e1ee3
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/15/812615/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/config/undercloud.py', 'tripleoclient/v1/undercloud_config.py']",2,d62bdace7691603d908acdc463648ec7f10d4071,wallaby/no-ipxe-enabled,"MULTI_PARAMETER_MAPPING = {} 'ipxe_enabled': 'IronicInspectorIPXEEnabled',","MULTI_PARAMETER_MAPPING = { 'ipxe_enabled': ['IronicIPXEEnabled', 'IronicInspectorIPXEEnabled'] }",3,5
openstack%2Ftripleo-heat-templates~master~Ie07cb10e1c6b81cff29177fb724feffc69a5dc68,openstack/tripleo-heat-templates,master,Ie07cb10e1c6b81cff29177fb724feffc69a5dc68,Add auth type for snmpd readonly user,MERGED,2021-10-07 21:29:16.000000000,2021-11-03 09:41:56.000000000,2021-11-03 09:36:21.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-07 21:29:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8525ef9fffffc72ead138d3cc493c35fb27be149', 'message': ""Add auth type for snmpd readonly user\n\nBy default, the auth type for the snmpd user is MD5.  This fails on\na FIPS enabled system, resulting in snmpd not starting correctly.\nThis change provides an option to specify the auth type to something\nthat is supported ('SHA')\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/813087\nChange-Id: Ie07cb10e1c6b81cff29177fb724feffc69a5dc68\n""}, {'number': 2, 'created': '2021-10-22 17:23:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7c16bc89e076da8f3e1b53e5d222e88457310c94', 'message': ""Add auth type for snmpd readonly user\n\nBy default, the auth type for the snmpd user is MD5.  This fails on\na FIPS enabled system, resulting in snmpd not starting correctly.\nThis change provides an option to specify the auth type to something\nthat is supported ('SHA')\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/813087\nChange-Id: Ie07cb10e1c6b81cff29177fb724feffc69a5dc68\n""}, {'number': 3, 'created': '2021-10-25 22:03:21.000000000', 'files': ['releasenotes/notes/add-authtype-for-snmp-readonly-user-c90c9e5a12c92893.yaml', 'deployment/snmp/snmp-baremetal-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e2f6aec3e5b66fca05125b2e4a6ffd5ce392a566', 'message': ""Add auth type for snmpd readonly user\n\nBy default, the auth type for the snmpd user is MD5.  This fails on\na FIPS enabled system, resulting in snmpd not starting correctly.\nThis change provides an option to specify the auth type to something\nthat is supported ('SHA')\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/813087\nChange-Id: Ie07cb10e1c6b81cff29177fb724feffc69a5dc68\n""}]",2,813089,e2f6aec3e5b66fca05125b2e4a6ffd5ce392a566,25,7,3,9914,,,0,"Add auth type for snmpd readonly user

By default, the auth type for the snmpd user is MD5.  This fails on
a FIPS enabled system, resulting in snmpd not starting correctly.
This change provides an option to specify the auth type to something
that is supported ('SHA')

Depends-On: https://review.opendev.org/c/openstack/puppet-tripleo/+/813087
Change-Id: Ie07cb10e1c6b81cff29177fb724feffc69a5dc68
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/89/813089/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/snmp/snmp-baremetal-puppet.yaml'],1,8525ef9fffffc72ead138d3cc493c35fb27be149,add_fips_job, SnmpdReadonlyUserAuthType: default: MD5 description: The user auth type for SNMPd with readonly rights running on all Overcloud nodes type: string tripleo::profile::base::snmp::snmpd_auth_type: {get_param: SnmpdReadonlyUserAuthType},,5,0
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I9729beac4c4e84d2619c4c629cd26eba8a26b87d,openstack/tripleo-heat-templates,stable/train,I9729beac4c4e84d2619c4c629cd26eba8a26b87d,Add parameter IronicPowerStateChangeTimeout,MERGED,2021-10-28 08:35:06.000000000,2021-11-03 09:41:55.000000000,2021-11-03 09:36:07.000000000,"[{'_account_id': 4571}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 08:35:06.000000000', 'files': ['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/667915a76d2540eab6f59e68e66ef7ebfa481c06', 'message': 'Add parameter IronicPowerStateChangeTimeout\n\nA heat parameter ``IronicPowerStateChangeTimeout`` has been added\nwhich sets the number of seconds to wait for power operations to\ncomplete, i.e., so that a baremetal node is in the desired power\nstate. If timed out, the power operation is considered a failure. The\ndefault is 60 seconds, which is the same as the current Ironic\ndefault.\n\nThis could be backported to stable/train, where the ironic default of\n30s is causing failures in CI jobs.\n\nRelated-Bug: #1947403\nChange-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d\n(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)\n'}]",2,815801,667915a76d2540eab6f59e68e66ef7ebfa481c06,15,5,1,24245,,,0,"Add parameter IronicPowerStateChangeTimeout

A heat parameter ``IronicPowerStateChangeTimeout`` has been added
which sets the number of seconds to wait for power operations to
complete, i.e., so that a baremetal node is in the desired power
state. If timed out, the power operation is considered a failure. The
default is 60 seconds, which is the same as the current Ironic
default.

This could be backported to stable/train, where the ironic default of
30s is causing failures in CI jobs.

Related-Bug: #1947403
Change-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d
(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/01/815801/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml']",2,667915a76d2540eab6f59e68e66ef7ebfa481c06,bug/1947403-stable/train,"--- features: - | A heat parameter ``IronicPowerStateChangeTimeout`` has been added which sets the number of seconds to wait for power operations to complete, i.e., so that a baremetal node is in the desired power state. If timed out, the power operation is considered a failure. The default is 60 seconds, which is the same as the current Ironic default. ",,16,1
openstack%2Ftripleo-common~stable%2Fvictoria~Ieffdb1d7b8d8696b033eaed87fc75de921889226,openstack/tripleo-common,stable/victoria,Ieffdb1d7b8d8696b033eaed87fc75de921889226,Remove unused DEPLOYMENT_STATUS_FILE,MERGED,2021-10-18 23:25:07.000000000,2021-11-03 09:41:54.000000000,2021-11-03 09:35:58.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-18 23:25:07.000000000', 'files': ['tripleo_common/constants.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/58b77da3e00fc94e49ae50d9f4ddc6602a692640', 'message': 'Remove unused DEPLOYMENT_STATUS_FILE\n\nThis constants has been unused since [1] was merged during Rocky cycle.\n\n[1] eec131ee5e7c3070bfef441d143202bf9255b2e2\n\nConflicts:\n\ttripleo_common/constants.py\n\nChange-Id: Ieffdb1d7b8d8696b033eaed87fc75de921889226\n(cherry picked from commit 95bddb343c407309e36ac4c5743cfdae63355dbb)\n(cherry picked from commit 1825c64c348ee947cc9d0a80dd492452e4e67ed5)\n'}]",1,814500,58b77da3e00fc94e49ae50d9f4ddc6602a692640,15,4,1,9816,,,0,"Remove unused DEPLOYMENT_STATUS_FILE

This constants has been unused since [1] was merged during Rocky cycle.

[1] eec131ee5e7c3070bfef441d143202bf9255b2e2

Conflicts:
	tripleo_common/constants.py

Change-Id: Ieffdb1d7b8d8696b033eaed87fc75de921889226
(cherry picked from commit 95bddb343c407309e36ac4c5743cfdae63355dbb)
(cherry picked from commit 1825c64c348ee947cc9d0a80dd492452e4e67ed5)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/00/814500/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/constants.py'],1,58b77da3e00fc94e49ae50d9f4ddc6602a692640,constants-cleanup-v,,DEPLOYMENT_STATUS_FILE = 'deployment_status.yaml' ,0,2
openstack%2Fnova~master~I51c3a53286a0eced4bf57ad4fc13ac5f3616f7eb,openstack/nova,master,I51c3a53286a0eced4bf57ad4fc13ac5f3616f7eb,db: Enable auto-generation of API DB migrations,MERGED,2021-10-01 14:34:34.000000000,2021-11-03 09:36:57.000000000,2021-11-03 09:34:58.000000000,"[{'_account_id': 4690}, {'_account_id': 7634}, {'_account_id': 9708}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-01 14:34:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/51f6fa761f05edb25659792249300e79f4eda210', 'message': 'db: Enable auto-generation of API DB migrations\n\nChange I18846a5c7557db45bb63b97c7e8be5c4367e4547 enabled auto-generation\nof migrations for the main database. Let\'s now extend this to the API\ndatabase using the same formula. While we\'re here, we also enable\n""batch"" migrations for SQLite [1] by default, which allow us to work\naround SQLite\'s inability to support the ALTER statement for all but a\nlimited set of cases. As noted in the documentation [2], this will have\nno impact on other backends where ""we\'d see the usual \'ALTER\' statements\ndone as though there were no batch directive"".\n\n[1] https://stackoverflow.com/a/31140916/613428\n[2] https://alembic.sqlalchemy.org/en/latest/batch.html\n\nChange-Id: I51c3a53286a0eced4bf57ad4fc13ac5f3616f7eb\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 2, 'created': '2021-10-18 19:26:28.000000000', 'files': ['.gitignore', 'nova/db/api/migrations/env.py', 'nova/db/main/migrations/env.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/60b977b76dc113183043840acf98b215441e186d', 'message': 'db: Enable auto-generation of API DB migrations\n\nChange I18846a5c7557db45bb63b97c7e8be5c4367e4547 enabled auto-generation\nof migrations for the main database. Let\'s now extend this to the API\ndatabase using the same formula. While we\'re here, we also enable\n""batch"" migrations for SQLite [1] by default, which allow us to work\naround SQLite\'s inability to support the ALTER statement for all but a\nlimited set of cases. As noted in the documentation [2], this will have\nno impact on other backends where ""we\'d see the usual \'ALTER\' statements\ndone as though there were no batch directive"".\n\n[1] https://stackoverflow.com/a/31140916/613428\n[2] https://alembic.sqlalchemy.org/en/latest/batch.html\n\nChange-Id: I51c3a53286a0eced4bf57ad4fc13ac5f3616f7eb\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",9,812144,60b977b76dc113183043840acf98b215441e186d,54,4,2,15334,,,0,"db: Enable auto-generation of API DB migrations

Change I18846a5c7557db45bb63b97c7e8be5c4367e4547 enabled auto-generation
of migrations for the main database. Let's now extend this to the API
database using the same formula. While we're here, we also enable
""batch"" migrations for SQLite [1] by default, which allow us to work
around SQLite's inability to support the ALTER statement for all but a
limited set of cases. As noted in the documentation [2], this will have
no impact on other backends where ""we'd see the usual 'ALTER' statements
done as though there were no batch directive"".

[1] https://stackoverflow.com/a/31140916/613428
[2] https://alembic.sqlalchemy.org/en/latest/batch.html

Change-Id: I51c3a53286a0eced4bf57ad4fc13ac5f3616f7eb
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/44/812144/2 && git format-patch -1 --stdout FETCH_HEAD,"['.gitignore', 'nova/db/api/migrations/env.py', 'nova/db/main/migrations/env.py']",3,51f6fa761f05edb25659792249300e79f4eda210,bp/remove-sqlalchemy-migrate," render_as_batch=True, render_as_batch=True,",,47,4
openstack%2Ftripleo-ansible~stable%2Fwallaby~I8ffb19862e8574885ac609f5285e35e0e05ab1c8,openstack/tripleo-ansible,stable/wallaby,I8ffb19862e8574885ac609f5285e35e0e05ab1c8,Remove deny list check from cli-enable-ssh-admin.yaml,MERGED,2021-10-28 17:19:47.000000000,2021-11-03 09:36:32.000000000,2021-11-03 09:36:32.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 17:19:47.000000000', 'files': ['tripleo_ansible/playbooks/cli-enable-ssh-admin.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c206ed605c3479c9e2a7fc55ab98f126844e3971', 'message': 'Remove deny list check from cli-enable-ssh-admin.yaml\n\nThe check for denied hosts in cli-enable-ssh-admin.yaml is removed\nbecause it is redundant. The hosts are already removed before the\nplaybook is called by tripleoclient.utils.get_overcloud_hosts.\n\nSigned-off-by: James Slagle <jslagle@redhat.com>\nChange-Id: I8ffb19862e8574885ac609f5285e35e0e05ab1c8\n(cherry picked from commit f0191174a801986dc4535e759eddca194a8846f0)\n'}]",0,815890,c206ed605c3479c9e2a7fc55ab98f126844e3971,9,3,1,7144,,,0,"Remove deny list check from cli-enable-ssh-admin.yaml

The check for denied hosts in cli-enable-ssh-admin.yaml is removed
because it is redundant. The hosts are already removed before the
playbook is called by tripleoclient.utils.get_overcloud_hosts.

Signed-off-by: James Slagle <jslagle@redhat.com>
Change-Id: I8ffb19862e8574885ac609f5285e35e0e05ab1c8
(cherry picked from commit f0191174a801986dc4535e759eddca194a8846f0)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/90/815890/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/playbooks/cli-enable-ssh-admin.yaml'],1,c206ed605c3479c9e2a7fc55ab98f126844e3971,, loop: '{{ set_ssh_servers }}'," BlacklistedIpAddresses: [] - name: Cloud name block when: - tripleo_cloud_name is defined block: - name: Run blacklist IP check shell: >- openstack stack output show {{ tripleo_cloud_name }} BlacklistedIpAddresses -f yaml register: blacklist_cmd changed_when: false async: 1000 poll: 0 - name: Block on async blacklist check async_status: jid: ""{{ blacklist_cmd.ansible_job_id }}"" register: blacklist_cmd_job_result until: blacklist_cmd_job_result.finished retries: 30 - name: Set BlacklistedIpAddresses fact set_fact: BlacklistedIpAddresses: ""{{ (blacklist_cmd_job_result.stdout | from_yaml)['output_value'] }}"" loop: '{{ set_ssh_servers | difference(((BlacklistedIpAddresses | length) < 1) | ternary([], BlacklistedIpAddresses)) }}'",1,25
openstack%2Ftripleo-heat-templates~master~Ice5d00a8fab57a8533df287fc0ab98c84eb2cc2d,openstack/tripleo-heat-templates,master,Ice5d00a8fab57a8533df287fc0ab98c84eb2cc2d,Enable enable_proxy_headers_parsing in Designate API,MERGED,2021-07-14 02:17:05.000000000,2021-11-03 09:36:28.000000000,2021-11-03 09:36:28.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-14 02:17:05.000000000', 'files': ['deployment/designate/designate-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ccacb548e2213a154db8e81a673225bfa98e3438', 'message': 'Enable enable_proxy_headers_parsing in Designate API\n\n... so that Designate API can detect the actual endpoint and client\nip.\n\nDepends-on: https://review.opendev.org/800740\nChange-Id: Ice5d00a8fab57a8533df287fc0ab98c84eb2cc2d\n'}]",0,800741,ccacb548e2213a154db8e81a673225bfa98e3438,14,4,1,9816,,,0,"Enable enable_proxy_headers_parsing in Designate API

... so that Designate API can detect the actual endpoint and client
ip.

Depends-on: https://review.opendev.org/800740
Change-Id: Ice5d00a8fab57a8533df287fc0ab98c84eb2cc2d
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/41/800741/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/designate/designate-api-container-puppet.yaml'],1,ccacb548e2213a154db8e81a673225bfa98e3438,designate-proxy-headers," - designate::api::enable_proxy_headers_parsing: true designate::keystone::authtoken::www_authenticate_uri: {get_param: [EndpointMap, KeystoneInternal, uri] }"," - designate::keystone::authtoken::www_authenticate_uri: {get_param: [EndpointMap, KeystoneInternal, uri] }",2,1
openstack%2Ftripleo-ci~master~Idb3f3d03cb1d39c259df7858357175dae58ecbdd,openstack/tripleo-ci,master,Idb3f3d03cb1d39c259df7858357175dae58ecbdd,Fix nested virt node pool for scenario010-standalone job,MERGED,2021-07-08 06:05:21.000000000,2021-11-03 09:36:25.000000000,2021-11-03 09:36:25.000000000,"[{'_account_id': 9816}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13995}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29244}, {'_account_id': 30750}]","[{'number': 1, 'created': '2021-07-08 06:05:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ba4c42b9618864fb4830febce99e329b6bd76101', 'message': 'WIP Testing nested virt for scenario010-standalone job\n\nChange-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd\n'}, {'number': 2, 'created': '2021-07-08 11:33:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/a382d47a1ca170d988434ca9a0ea7977240fc5be', 'message': 'WIP Testing nested virt for scenario010-standalone job\n\nChange-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd\n'}, {'number': 3, 'created': '2021-07-08 19:42:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/f4890190d9769d55043817489ff1e3852e7e1d8f', 'message': 'WIP Testing nested virt for scenario010-standalone job\n\nChange-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd\n'}, {'number': 4, 'created': '2021-08-08 17:05:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ea8e96fc0c9a5ef64248b4bbb2498148791fb261', 'message': 'WIP Testing nested virt for scenario010-standalone job\n\nChange-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd\n'}, {'number': 5, 'created': '2021-09-02 13:52:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d44a14c666d20eb3355b89b8dd2f771f0912208d', 'message': 'WIP Testing nested virt for scenario010-standalone job\n\nChange-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd\n'}, {'number': 6, 'created': '2021-10-31 20:42:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/5bec0c3c14f3586d43cf96ec1f068a2860829562', 'message': 'WIP Testing nested virt for scenario010-standalone job\n\nChange-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd\n'}, {'number': 7, 'created': '2021-11-02 12:37:40.000000000', 'files': ['zuul.d/base.yaml', 'zuul.d/nodesets.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/679ea0c8c3f3682b6fed902414fb264d69d7ec6c', 'message': 'Fix nested virt node pool for scenario010-standalone job\n\nscenario010 jobs run better in nested virt environment, use centos 8\nnested virt pool for those jobs.\n\nChange-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd\n'}]",5,799958,679ea0c8c3f3682b6fed902414fb264d69d7ec6c,40,8,7,29244,,,0,"Fix nested virt node pool for scenario010-standalone job

scenario010 jobs run better in nested virt environment, use centos 8
nested virt pool for those jobs.

Change-Id: Idb3f3d03cb1d39c259df7858357175dae58ecbdd
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/58/799958/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/standalone-jobs.yaml', 'zuul.d/nodesets.yaml']",2,ba4c42b9618864fb4830febce99e329b6bd76101,, name: single-nested-centos-8-stream-node nodes: - name: primary label: nested-virt-centos-8-stream groups: - name: switch nodes: - primary - name: peers nodes: [] - nodeset:,,13,0
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I9d471633d5650544f2fd9a2b00bd9aa166c737c3,openstack/tripleo-heat-templates,stable/ussuri,I9d471633d5650544f2fd9a2b00bd9aa166c737c3,Drop archive policy from enable-legacy-telemetry,MERGED,2021-10-10 12:41:18.000000000,2021-11-03 09:36:17.000000000,2021-11-03 09:36:17.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-10 12:41:18.000000000', 'files': ['environments/enable-legacy-telemetry.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f365caa0d6abe144679aa5f9b36317823c10147b', 'message': 'Drop archive policy from enable-legacy-telemetry\n\nAdding it there will basically enforce using the archive policy\nhigh all over, and will prevent using any other.\n\nChange-Id: I9d471633d5650544f2fd9a2b00bd9aa166c737c3\n(cherry picked from commit 10e0652199083de0b607cc2107b81106a8e09813)\n(cherry picked from commit d5726a13263d655f0a678d247661dfd35f38e86c)\n(cherry picked from commit 83441c397b7070f2b8ea01404a43972fd8a3ca81)\n'}]",2,813106,f365caa0d6abe144679aa5f9b36317823c10147b,19,4,1,4264,,,0,"Drop archive policy from enable-legacy-telemetry

Adding it there will basically enforce using the archive policy
high all over, and will prevent using any other.

Change-Id: I9d471633d5650544f2fd9a2b00bd9aa166c737c3
(cherry picked from commit 10e0652199083de0b607cc2107b81106a8e09813)
(cherry picked from commit d5726a13263d655f0a678d247661dfd35f38e86c)
(cherry picked from commit 83441c397b7070f2b8ea01404a43972fd8a3ca81)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/06/813106/1 && git format-patch -1 --stdout FETCH_HEAD,['environments/enable-legacy-telemetry.yaml'],1,f365caa0d6abe144679aa5f9b36317823c10147b,archive_policy_telemetry, - gnocchi:// PipelinePublishers: - gnocchi://, - gnocchi://?archive_policy=high PipelinePublishers: - gnocchi://?archive_policy=high,2,2
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I7fa8e9931f27dbe3352b06c830441eac5bc3733e,openstack/tripleo-heat-templates,stable/wallaby,I7fa8e9931f27dbe3352b06c830441eac5bc3733e,Use ServiceNetMap to filter PublicNetwork in haproxy-tls,MERGED,2021-10-28 08:37:01.000000000,2021-11-03 09:36:10.000000000,2021-11-03 09:36:10.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-28 08:37:01.000000000', 'files': ['deployment/haproxy/haproxy-internal-tls-certmonger.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d81762b77278e8c9d10a47aef24029eba4d6c38c', 'message': 'Use ServiceNetMap to filter PublicNetwork in haproxy-tls\n\nReplace the filtering using the hard-coded ""external""\nnetwork name with a yaql filter using the PublicNetwork in\nServiceNetMap instead.\n\nThis should allow fully custom network name/name_lower to be\nused as long as service_net_map_replace is also used or the\nServiceNetMap is provided with appropriate overrides.\n\nAlso removes jinj2 filtering on \'tenant\' network, this network\ndoes not have a VIP by default so it is alreayd filtered by the\n\'and network.vip\' in the jinj2 for loop. In the case \'tenant\'\nnetwork does have VIP it would make sense to create a certificate\nfor it as well.\n\nRelated-Bug: #1946239\nChange-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e\n(cherry picked from commit 273b41a5da0267926072b9fd4e14c60db8180052)\n'}]",0,815802,d81762b77278e8c9d10a47aef24029eba4d6c38c,11,4,1,24245,,,0,"Use ServiceNetMap to filter PublicNetwork in haproxy-tls

Replace the filtering using the hard-coded ""external""
network name with a yaql filter using the PublicNetwork in
ServiceNetMap instead.

This should allow fully custom network name/name_lower to be
used as long as service_net_map_replace is also used or the
ServiceNetMap is provided with appropriate overrides.

Also removes jinj2 filtering on 'tenant' network, this network
does not have a VIP by default so it is alreayd filtered by the
'and network.vip' in the jinj2 for loop. In the case 'tenant'
network does have VIP it would make sense to create a certificate
for it as well.

Related-Bug: #1946239
Change-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e
(cherry picked from commit 273b41a5da0267926072b9fd4e14c60db8180052)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/02/815802/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/haproxy/haproxy-internal-tls-certmonger.j2.yaml'],1,d81762b77278e8c9d10a47aef24029eba4d6c38c,bug/1946239-stable/wallaby," # NOTE(jaosorior|hjensas) Get unique network names to create # certificates for those. # * The 'ctlplane' network is always included. # * The tenant network is skipped in jinja2 filter since it # does not have a VIP. We don't need a certificate for the # tenant nework. # * The ""external"" (PublicNetwork) network will be handled in # another template, it is skipped by a yaql filter on the # PublicNetwork defined in ServiceNetMap. yaql: expression: let(public_network => $.data.public_network) -> $.data.networks.where($ != $public_network or $ = 'ctlplane') data: public_network: {get_param: [ServiceNetMap, PublicNetwork]} networks: - ctlplane - {{network.name_lower}}"," # NOTE(jaosorior) Get unique network names to create # certificates for those. We skip the tenant network since # we don't need a certificate for that, and the external # network will be handled in another template. - ctlplane {%- if network.name_lower != 'external' and network.name_lower != 'tenant' %} - {{network.name_lower}} {%- endif %}",16,8
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~If521662eb4c47ada45cf0a9edd0a58db8a1d038d,openstack/tripleo-heat-templates,stable/wallaby,If521662eb4c47ada45cf0a9edd0a58db8a1d038d,Set stop grace periods for designate services,MERGED,2021-11-01 16:54:23.000000000,2021-11-03 09:36:04.000000000,2021-11-03 09:36:04.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-11-01 16:54:23.000000000', 'files': ['deployment/designate/designate-producer-container-puppet.yaml', 'deployment/designate/designate-worker-container-puppet.yaml', 'deployment/designate/designate-mdns-container-puppet.yaml', 'deployment/designate/designate-bind-container.yaml', 'deployment/designate/designate-sink-container-puppet.yaml', 'deployment/designate/designate-central-container-puppet.yaml', 'deployment/designate/designate-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a9db2a18fd9404754f6da6e6701f03a631e49278', 'message': 'Set stop grace periods for designate services\n\nMany of the designate services perform background syncrhonization\ntasks and can lag a bit on shutdown, especially on heavily loaded or\nlarge scale systems. Increasing the stop grace periods reduces the\nlikelihood that the system might get into a non-consistent state or a\nstate where a great deal of reconciling needs to occur on restart.\n\nChange-Id: If521662eb4c47ada45cf0a9edd0a58db8a1d038d\n(cherry picked from commit e5ba54102bee4a56d89722907db608adab34eade)\n'}]",0,816195,a9db2a18fd9404754f6da6e6701f03a631e49278,11,4,1,6681,,,0,"Set stop grace periods for designate services

Many of the designate services perform background syncrhonization
tasks and can lag a bit on shutdown, especially on heavily loaded or
large scale systems. Increasing the stop grace periods reduces the
likelihood that the system might get into a non-consistent state or a
state where a great deal of reconciling needs to occur on restart.

Change-Id: If521662eb4c47ada45cf0a9edd0a58db8a1d038d
(cherry picked from commit e5ba54102bee4a56d89722907db608adab34eade)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/95/816195/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/designate/designate-producer-container-puppet.yaml', 'deployment/designate/designate-worker-container-puppet.yaml', 'deployment/designate/designate-mdns-container-puppet.yaml', 'deployment/designate/designate-bind-container.yaml', 'deployment/designate/designate-sink-container-puppet.yaml', 'deployment/designate/designate-central-container-puppet.yaml', 'deployment/designate/designate-api-container-puppet.yaml']",7,a9db2a18fd9404754f6da6e6701f03a631e49278,designate-grace-period, stop_grace_period: 300,,7,0
openstack%2Ftripleo-common~stable%2Fvictoria~Ib668fbc877139a530d9f491494f8aae027bedace,openstack/tripleo-common,stable/victoria,Ib668fbc877139a530d9f491494f8aae027bedace,Remove unused TRIPLEO_NETWORK_CONFIG_RESOURCE,MERGED,2021-10-18 23:25:07.000000000,2021-11-03 09:35:59.000000000,2021-11-03 09:35:59.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-18 23:25:07.000000000', 'files': ['tripleo_common/constants.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/aab7a6ac63ba689d55ef2667e6378471d9359062', 'message': 'Remove unused TRIPLEO_NETWORK_CONFIG_RESOURCE\n\nThis constant was added during Train[1] but has never been used\nactually.\n\n[1] 85b7a4eea5c9a36f5a4d2bc4bef5836e2338ab8d\n\nChange-Id: Ib668fbc877139a530d9f491494f8aae027bedace\n(cherry picked from commit 20a20ef9e5a0f7d8aeb442538b65b0a6971ec934)\n(cherry picked from commit a07e59e1aaa86ad55d4cc9cfbcff94da3f4132a6)\n'}]",1,814501,aab7a6ac63ba689d55ef2667e6378471d9359062,14,4,1,9816,,,0,"Remove unused TRIPLEO_NETWORK_CONFIG_RESOURCE

This constant was added during Train[1] but has never been used
actually.

[1] 85b7a4eea5c9a36f5a4d2bc4bef5836e2338ab8d

Change-Id: Ib668fbc877139a530d9f491494f8aae027bedace
(cherry picked from commit 20a20ef9e5a0f7d8aeb442538b65b0a6971ec934)
(cherry picked from commit a07e59e1aaa86ad55d4cc9cfbcff94da3f4132a6)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/01/814501/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/constants.py'],1,aab7a6ac63ba689d55ef2667e6378471d9359062,constants-cleanup-v,,# Resource name for network config resources when using config download TRIPLEO_NETWORK_CONFIG_RESOURCE = 'NetworkConfig' ,0,3
openstack%2Fcharm-ironic-conductor~master~I63c3cec8e2712b2bb94437446569a917456d5536,openstack/charm-ironic-conductor,master,I63c3cec8e2712b2bb94437446569a917456d5536,Add xena bundles,MERGED,2021-09-27 09:53:02.000000000,2021-11-03 09:26:52.000000000,2021-11-03 09:26:52.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-09-27 09:53:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ironic-conductor/commit/555f2d74b6230f60bf3713d51e96e43f57b87a29', 'message': 'Add xena bundles\n\n- add non-voting focal-xena bundle\n- add non-voting impish-xena bundle\n- rebuild to pick up charm-helpers changes\n- update tox/pip.sh to ensure setuptools<50.0.0\n\nChange-Id: I63c3cec8e2712b2bb94437446569a917456d5536\n'}, {'number': 2, 'created': '2021-09-27 09:54:03.000000000', 'files': ['rebuild', 'src/tests/bundles/overlays/focal-xena.yaml', 'osci.yaml', 'src/tests/bundles/impish-xena.yaml', 'src/tests/bundles/overlays/impish-xena.yaml', 'src/tox.ini', 'pip.sh', 'src/tests/bundles/focal-xena.yaml', 'src/tests/tests.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-ironic-conductor/commit/fb9baec357b5c0f45f4d03574e5406660a110393', 'message': 'Add xena bundles\n\n- add non-voting focal-xena bundle\n- add non-voting impish-xena bundle\n- rebuild to pick up charm-helpers changes\n- update tox/pip.sh to ensure setuptools<50.0.0\n\nChange-Id: I63c3cec8e2712b2bb94437446569a917456d5536\n'}]",1,811100,fb9baec357b5c0f45f4d03574e5406660a110393,8,3,2,20870,,,0,"Add xena bundles

- add non-voting focal-xena bundle
- add non-voting impish-xena bundle
- rebuild to pick up charm-helpers changes
- update tox/pip.sh to ensure setuptools<50.0.0

Change-Id: I63c3cec8e2712b2bb94437446569a917456d5536
",git fetch https://review.opendev.org/openstack/charm-ironic-conductor refs/changes/00/811100/1 && git format-patch -1 --stdout FETCH_HEAD,"['rebuild', 'src/tests/bundles/overlays/focal-xena.yaml', 'src/tests/bundles/impish-xena.yaml', 'src/tests/bundles/overlays/impish-xena.yaml', 'src/tox.ini', 'pip.sh', 'src/tests/bundles/focal-xena.yaml', 'src/tests/tests.yaml', 'tox.ini']",9,555f2d74b6230f60bf3713d51e96e43f57b87a29,xena-bundles,"# NOTES: # * We avoid the new dependency resolver by pinning pip < 20.3, see # https://github.com/pypa/pip/issues/9187 # * Pinning dependencies requires tox >= 3.2.0, see # https://tox.readthedocs.io/en/latest/config.html#conf-requires # * It is also necessary to pin virtualenv as a newer virtualenv would still # lead to fetching the latest pip in the func* tox targets, see # https://stackoverflow.com/a/38133283 requires = pip < 20.3 virtualenv < 20.0 setuptools<50.0.0 # NOTE: https://wiki.canonical.com/engineering/OpenStack/InstallLatestToxOnOsci minversion = 3.18.0 {toxinidir}/pip.sh install {opts} {packages}", pip install {opts} {packages},598,6
openstack%2Ftripleo-common~stable%2Fvictoria~I3b6afbc51c69a4c51e464ddc830b2e055ca4f0c3,openstack/tripleo-common,stable/victoria,I3b6afbc51c69a4c51e464ddc830b2e055ca4f0c3,Remove unused constants for TripleO UI,MERGED,2021-10-18 23:25:07.000000000,2021-11-03 09:25:14.000000000,2021-11-03 09:23:46.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-18 23:25:07.000000000', 'files': ['tripleo_common/constants.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e732eb1d25c18c974e55666b2fc494be930a8545', 'message': 'Remove unused constants for TripleO UI\n\n... because these constants are no longer used since TripleO UI was\nremoved during Rocky[1].\n\n[1] 5566697549bfd6bbd55691ff4f290079f8085084\n\nChange-Id: I3b6afbc51c69a4c51e464ddc830b2e055ca4f0c3\n(cherry picked from commit 2ebe8f0b7967f6c6055d226996563c7c3c0b5776)\n(cherry picked from commit fc6ec2fa28737f07b5a6ca233af44225c5751043)\n'}]",1,814499,e732eb1d25c18c974e55666b2fc494be930a8545,15,4,1,9816,,,0,"Remove unused constants for TripleO UI

... because these constants are no longer used since TripleO UI was
removed during Rocky[1].

[1] 5566697549bfd6bbd55691ff4f290079f8085084

Change-Id: I3b6afbc51c69a4c51e464ddc830b2e055ca4f0c3
(cherry picked from commit 2ebe8f0b7967f6c6055d226996563c7c3c0b5776)
(cherry picked from commit fc6ec2fa28737f07b5a6ca233af44225c5751043)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/99/814499/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/constants.py'],1,e732eb1d25c18c974e55666b2fc494be930a8545,constants-cleanup-v,,TRIPLEO_UI_LOG_FILE_SIZE = 1e7 # 10MB TRIPLEO_UI_LOG_FILENAME = 'tripleo-ui.logs' ,0,3
openstack%2Fcharm-vault~master~Icef90623558bc583a0af3357613485368a794a76,openstack/charm-vault,master,Icef90623558bc583a0af3357613485368a794a76,Improve root CA handling for action 'disable-pki',ABANDONED,2021-10-29 19:55:46.000000000,2021-11-03 08:51:24.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-10-29 19:55:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/24354b100b7ee880eb99f48467c3fdaf985e41f6', 'message': 'bug fix lp:1948989\n  - clear root CA certificate when pki is disabled\n  - block vault if certificate relationship exit but root CA is missing\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}, {'number': 2, 'created': '2021-10-29 19:59:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/f8fe770cb38efff5745b5c64544dcbb24e5664ee', 'message': 'bug fix lp:1948989\n  - clear root CA certificate when pki is disabled\n  - block vault if certificate relationship exit but root CA is missing\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}, {'number': 3, 'created': '2021-11-02 15:22:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/baf60c639e546e9e53d60ebceafd89d076987a51', 'message': 'Bug fix lp:1948989\n  - Clear root CA certificate stored in vault/leader when pki is disabled\n  - Set status to block if vault has certificate relationship but root CA not exists\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}, {'number': 4, 'created': '2021-11-02 15:23:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/96fca398f6bd99f9548be361c75efd04b99474b0', 'message': 'Bug fix lp:1948989\n  - Clear root CA certificate stored in vault/leader when pki is disabled\n  - Set status to block if vault has certificate relationship but root CA not exists\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}, {'number': 5, 'created': '2021-11-02 16:03:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/e14cc90b94e183122cb6e182e6c1111fc3a3388c', 'message': 'Closes-Bug: #1948989\n\nModify action.py to clear root CA certificte stored in vault/leader\nwhen action disable-pki is called\n\nAmend _assess_status function in vault_handler.py to set vault/leader\nstatus to ""Block, Missing CA cert"" if vault has certificate relationship\nwith other apps but root CA does not exist\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}, {'number': 6, 'created': '2021-11-02 18:07:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/5b5aba74628e28a6bbe66ac3f11a4791db1c81af', 'message': 'Improve root CA handling for action \'disable-pki\'\n\nClear old root CA stored in vault/leader when action \'disable-pki\'\nis called\n\nSet leader status to ""Block, Missing CA cert"" if certificate\nrelationship exist but root CA not configured\n\nRelated-Bug: #1948989,  #1940451\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}, {'number': 7, 'created': '2021-11-02 18:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/355b3af7d45f280a160645a68e5a7a0e2e6ef494', 'message': 'Improve root CA handling for action \'disable-pki\'\n\nClear old root CA stored in vault/leader when action \'disable-pki\'\nis called\n\nSet leader status to ""Block, Missing CA cert"" if certificate\nrelationship exist but root CA not configured\n\nRelated-Bug: #1948989,  #1940451\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}, {'number': 8, 'created': '2021-11-02 18:18:18.000000000', 'files': ['unit_tests/test_reactive_vault_handlers.py', 'src/actions/actions.py', 'src/reactive/vault_handlers.py'], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/a4b0f84d58f0a783876a0cb7f8384ef33e44f79f', 'message': 'Improve root CA handling for action \'disable-pki\'\n\nClear old root CA stored in vault/leader when action \'disable-pki\'\nis called (#1948989)\n\nSet leader status to ""Block, Missing CA cert"" if certificate\nrelationship exist but root CA not configured (#1940451)\n\nAlso add unit test for \'missing-CA\' status\n\nChange-Id: Icef90623558bc583a0af3357613485368a794a76\n'}]",9,815992,a4b0f84d58f0a783876a0cb7f8384ef33e44f79f,18,3,8,34059,,,0,"Improve root CA handling for action 'disable-pki'

Clear old root CA stored in vault/leader when action 'disable-pki'
is called (#1948989)

Set leader status to ""Block, Missing CA cert"" if certificate
relationship exist but root CA not configured (#1940451)

Also add unit test for 'missing-CA' status

Change-Id: Icef90623558bc583a0af3357613485368a794a76
",git fetch https://review.opendev.org/openstack/charm-vault refs/changes/92/815992/7 && git format-patch -1 --stdout FETCH_HEAD,"['src/actions/actions.py', 'src/reactive/vault_handlers.py']",2,24354b100b7ee880eb99f48467c3fdaf985e41f6,bug-fix-1948989," has_certs_relation = is_flag_set('certificates.available') if has_certs_relation and not has_ca: status_set('blocked', 'Missing CA cert') return ",,9,1
openstack%2Fsenlin~master~Ib704682da7f095cf9134aaf4453fdcfe0443302d,openstack/senlin,master,Ib704682da7f095cf9134aaf4453fdcfe0443302d,Add Python3 yoga unit tests,MERGED,2021-09-16 10:42:36.000000000,2021-11-03 08:45:45.000000000,2021-11-03 08:40:30.000000000,"[{'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 22998}]","[{'number': 1, 'created': '2021-09-16 10:42:36.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/senlin/commit/4a5e99d9416c4f922c7ed9a1b4463355ea9b1890', 'message': 'Add Python3 yoga unit tests\n\nThis is an automatically generated patch to ensure unit testing\nis in place for all the of the tested runtimes for yoga.\n\nSee also the PTI in governance [1].\n\n[1]: https://governance.openstack.org/tc/reference/project-testing-interface.html\n\nChange-Id: Ib704682da7f095cf9134aaf4453fdcfe0443302d\n'}]",0,809391,4a5e99d9416c4f922c7ed9a1b4463355ea9b1890,8,3,1,22816,,,0,"Add Python3 yoga unit tests

This is an automatically generated patch to ensure unit testing
is in place for all the of the tested runtimes for yoga.

See also the PTI in governance [1].

[1]: https://governance.openstack.org/tc/reference/project-testing-interface.html

Change-Id: Ib704682da7f095cf9134aaf4453fdcfe0443302d
",git fetch https://review.opendev.org/openstack/senlin refs/changes/91/809391/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,4a5e99d9416c4f922c7ed9a1b4463355ea9b1890,add-yoga-python-jobtemplates, - openstack-python3-yoga-jobs, - openstack-python3-xena-jobs,1,1
openstack%2Fcinder~stable%2Fvictoria~Ie925e1886c508d840cd68caa7ebd031f3a89822d,openstack/cinder,stable/victoria,Ie925e1886c508d840cd68caa7ebd031f3a89822d,Update rbd warning message,ABANDONED,2021-11-03 02:49:18.000000000,2021-11-03 08:16:41.000000000,,[{'_account_id': 34095}],"[{'number': 1, 'created': '2021-11-03 02:49:18.000000000', 'files': ['cinder/volume/drivers/rbd.py', 'cinder/tests/unit/volume/drivers/test_rbd.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/e235d869c8da795ae5140e2c47019c793c0542ea', 'message': 'Update rbd warning message\n\nReplace --pool with --dest-pool\n\nCloses-bug: 1934823\nChange-Id: Ie925e1886c508d840cd68caa7ebd031f3a89822d\n(cherry picked from commit b7e294599047188a04f91dda53537b262d2b3f8d)\n'}]",0,816343,e235d869c8da795ae5140e2c47019c793c0542ea,3,1,1,30858,,,0,"Update rbd warning message

Replace --pool with --dest-pool

Closes-bug: 1934823
Change-Id: Ie925e1886c508d840cd68caa7ebd031f3a89822d
(cherry picked from commit b7e294599047188a04f91dda53537b262d2b3f8d)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/43/816343/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/drivers/rbd.py', 'cinder/tests/unit/volume/drivers/test_rbd.py']",2,e235d869c8da795ae5140e2c47019c793c0542ea,bug/1934823-stable/xena-stable/victoria," 'rbd', 'import', '--dest-pool', 'rbd', '--order', 22,"," 'rbd', 'import', '--pool', 'rbd', '--order', 22,",2,2
openstack%2Fsenlin~master~Iad49b18d00d9291fd3cbd4f74fa2494a2799ef5c,openstack/senlin,master,Iad49b18d00d9291fd3cbd4f74fa2494a2799ef5c,Update master for stable/xena,MERGED,2021-09-16 10:42:34.000000000,2021-11-03 08:09:26.000000000,2021-11-03 08:07:47.000000000,"[{'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 22998}]","[{'number': 1, 'created': '2021-09-16 10:42:34.000000000', 'files': ['releasenotes/source/xena.rst', 'releasenotes/source/index.rst'], 'web_link': 'https://opendev.org/openstack/senlin/commit/9ab03ce93d7828ea33024bc6f6725d24b965cad4', 'message': 'Update master for stable/xena\n\nAdd file to the reno documentation build to show release notes for\nstable/xena.\n\nUse pbr instruction to increment the minor version number\nautomatically so that master versions are higher than the versions on\nstable/xena.\n\nSem-Ver: feature\nChange-Id: Iad49b18d00d9291fd3cbd4f74fa2494a2799ef5c\n'}]",0,809390,9ab03ce93d7828ea33024bc6f6725d24b965cad4,8,3,1,22816,,,0,"Update master for stable/xena

Add file to the reno documentation build to show release notes for
stable/xena.

Use pbr instruction to increment the minor version number
automatically so that master versions are higher than the versions on
stable/xena.

Sem-Ver: feature
Change-Id: Iad49b18d00d9291fd3cbd4f74fa2494a2799ef5c
",git fetch https://review.opendev.org/openstack/senlin refs/changes/90/809390/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/source/xena.rst', 'releasenotes/source/index.rst']",2,9ab03ce93d7828ea33024bc6f6725d24b965cad4,reno-xena, xena,,7,0
openstack%2Fpython-tripleoclient~stable%2Fwallaby~If7e8e25aba35ec8a00b2190abee2c6a8784b291e,openstack/python-tripleoclient,stable/wallaby,If7e8e25aba35ec8a00b2190abee2c6a8784b291e,Replace deprecated params in prepare,MERGED,2021-11-02 05:13:06.000000000,2021-11-03 06:17:55.000000000,2021-11-03 06:16:30.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 05:13:06.000000000', 'files': ['tripleoclient/v1/overcloud_update.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/fd18a8ea2a3940092c6004964432a32577f39e4f', 'message': 'Replace deprecated params in prepare\n\nUpdate prepare should only run the stack update\nand Download the playbooks required to run the\nupdate. The config_download arg was deprecated\nby:\nhttps://review.opendev.org/c/openstack/python-tripleoclient/+/803610\n\nAs such, we need to use stack_only = True to\nensure the update prepare is only running the\nstack update, and not the entire deployment.\n\nChange-Id: If7e8e25aba35ec8a00b2190abee2c6a8784b291e\n(cherry picked from commit 61744a6c48a185f6caffed9b667a7e926ba09b29)\n'}]",0,816298,fd18a8ea2a3940092c6004964432a32577f39e4f,11,3,1,30073,,,0,"Replace deprecated params in prepare

Update prepare should only run the stack update
and Download the playbooks required to run the
update. The config_download arg was deprecated
by:
https://review.opendev.org/c/openstack/python-tripleoclient/+/803610

As such, we need to use stack_only = True to
ensure the update prepare is only running the
stack update, and not the entire deployment.

Change-Id: If7e8e25aba35ec8a00b2190abee2c6a8784b291e
(cherry picked from commit 61744a6c48a185f6caffed9b667a7e926ba09b29)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/98/816298/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/overcloud_update.py'],1,fd18a8ea2a3940092c6004964432a32577f39e4f,, parsed_args.stack_only = True, parsed_args.config_download = False,1,1
openstack%2Ftripleo-docs~master~Ie31f38f4c99534b1d425713509757e792869c329,openstack/tripleo-docs,master,Ie31f38f4c99534b1d425713509757e792869c329,"Partial revert ""Document ``--skip-nodes-and-networks``""",MERGED,2021-10-08 07:56:56.000000000,2021-11-03 05:54:58.000000000,2021-11-03 05:53:29.000000000,"[{'_account_id': 8833}, {'_account_id': 18002}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-08 07:56:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/93d82f4a9a7523555330d58db884fd2b14215146', 'message': 'Revert ""Document ``--skip-nodes-and-networks``""\n\nDepends-On: Idaab1f28c4d645279eff0c01b24435bf8571299b\nThis reverts commit 2bae5e3aaad9b7967a56b07a0aa778c5f582156a.\n\nChange-Id: Ie31f38f4c99534b1d425713509757e792869c329\n'}, {'number': 2, 'created': '2021-10-08 08:01:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/480ceb0249d611e20c1ba8c03efae83cd13e0b42', 'message': 'Partial revert ""Document ``--skip-nodes-and-networks``""\n\nThe --skip-nodes-and-networks option will be removed.\nInstead the existing --baremtal-deployment option is used to\nprovide the capability to enable/disable ""all-in-one"" network+\nnode provisioning with overcloud deploy command.\n\nThis patch removes --skip-nodes-and-networks from docs.\n\nThis partially reverts commit 2bae5e3aaad9b7967a56b07a0aa778c5f582156a.\nDepends-On: Idaab1f28c4d645279eff0c01b24435bf8571299b\nChange-Id: Ie31f38f4c99534b1d425713509757e792869c329\n'}, {'number': 3, 'created': '2021-10-25 10:27:45.000000000', 'files': ['deploy-guide/source/features/network_isolation.rst', 'deploy-guide/source/deployment/network_v2.rst', 'deploy-guide/source/features/custom_networks.rst', 'deploy-guide/source/provisioning/baremetal_provision.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/ceb2fbf61901f2246b2f0f8ac2a0dfaf782d028b', 'message': 'Partial revert ""Document ``--skip-nodes-and-networks``""\n\nThe --skip-nodes-and-networks option will be removed.\nInstead the existing --baremtal-deployment option is used to\nprovide the capability to enable/disable ""all-in-one"" network+\nnode provisioning with overcloud deploy command.\n\nThis patch removes --skip-nodes-and-networks from docs.\n\nThis partially reverts commit 2bae5e3aaad9b7967a56b07a0aa778c5f582156a.\nDepends-On: Idaab1f28c4d645279eff0c01b24435bf8571299b\n\nChange-Id: Ie31f38f4c99534b1d425713509757e792869c329\n'}]",4,813141,ceb2fbf61901f2246b2f0f8ac2a0dfaf782d028b,14,3,3,24245,,,0,"Partial revert ""Document ``--skip-nodes-and-networks``""

The --skip-nodes-and-networks option will be removed.
Instead the existing --baremtal-deployment option is used to
provide the capability to enable/disable ""all-in-one"" network+
node provisioning with overcloud deploy command.

This patch removes --skip-nodes-and-networks from docs.

This partially reverts commit 2bae5e3aaad9b7967a56b07a0aa778c5f582156a.
Depends-On: Idaab1f28c4d645279eff0c01b24435bf8571299b

Change-Id: Ie31f38f4c99534b1d425713509757e792869c329
",git fetch https://review.opendev.org/openstack/tripleo-docs refs/changes/41/813141/3 && git format-patch -1 --stdout FETCH_HEAD,"['deploy-guide/source/features/network_isolation.rst', 'deploy-guide/source/deployment/network_v2.rst', 'deploy-guide/source/features/custom_networks.rst', 'deploy-guide/source/provisioning/baremetal_provision.rst']",4,93d82f4a9a7523555330d58db884fd2b14215146,network-data-v2,, --skip-nodes-and-networks \,3,32
openstack%2Fnova~stable%2Fwallaby~I455d91b17e17c9525112067e765b368150729262,openstack/nova,stable/wallaby,I455d91b17e17c9525112067e765b368150729262,Add missing __init__.py in nova/db/api,ABANDONED,2021-09-30 08:16:35.000000000,2021-11-03 02:46:39.000000000,,"[{'_account_id': 6476}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 08:16:35.000000000', 'files': ['nova/db/api/__init__.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e8bd82add3a66f1c486bd838a2446f348c60de12', 'message': 'Add missing __init__.py in nova/db/api\n\nChange-Id: I455d91b17e17c9525112067e765b368150729262\nCloses-Bug: #1944111\n(cherry picked from commit b689beeb92085d2231fe18e4fd47159d8049efba)\n'}]",1,811786,e8bd82add3a66f1c486bd838a2446f348c60de12,7,3,1,30858,,,0,"Add missing __init__.py in nova/db/api

Change-Id: I455d91b17e17c9525112067e765b368150729262
Closes-Bug: #1944111
(cherry picked from commit b689beeb92085d2231fe18e4fd47159d8049efba)
",git fetch https://review.opendev.org/openstack/nova refs/changes/86/811786/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/db/api/__init__.py'],1,e8bd82add3a66f1c486bd838a2446f348c60de12,,,,0,0
openstack%2Ftripleo-quickstart-extras~master~Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8,openstack/tripleo-quickstart-extras,master,Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8,Override inventory var value if the job defines it's own,MERGED,2021-10-20 15:44:13.000000000,2021-11-02 23:52:23.000000000,2021-11-02 23:52:23.000000000,"[{'_account_id': 9976}, {'_account_id': 11491}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 15895}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 27427}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-20 15:44:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/52c5670a30ce62769f82a4008ef5986f95b7aed9', 'message': 'DNM Include validation.yml playbook in multinode.yml playbook\n\nChanges tags of the validation.yml playbook to:\n - undercloud-deploy\n - overcloud-deploy\n\nChanges name of the play to be more descriptive.\n\nOverride inventory for the multinode job.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8\n'}, {'number': 2, 'created': '2021-10-21 06:04:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e0b3ead5b1834b2d1b8d35ca28a729a9e0dba7a3', 'message': 'DNM Override inventory for the multinode job.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8\n'}, {'number': 3, 'created': '2021-10-21 10:45:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/d7db0643351939f3d4588b2dab835e2a38a5848d', 'message': ""Override inventory var value if the job defines it's own\n\nThe default value of the variable 'inventory' of the validations.yml\nplaybook remains the same. However, if the zuul job defines alternative\ninventory for the VF to use, it will be used instead.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8\n""}, {'number': 4, 'created': '2021-10-21 12:57:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/8c8a034d30f4c864a83b68e8a49546116eb2853e', 'message': ""Override inventory var value if the job defines it's own\n\nThe default value of the variable 'inventory' of the validations.yml\nplaybook remains the same. However, if the zuul job defines alternative\ninventory for the VF to use, it will be used instead.\n\nWithout exposing the variable to the job, the inventory path is hard set\nand can not be adjusted to match exact location of the inventory.\nThis poses problem for validation execution.\nAs VF relies on inventory information to match validations to hosts.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8\n""}, {'number': 5, 'created': '2021-10-25 06:11:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/53c1c5229797899365e15e5c8109299e7d6c5774', 'message': ""Override inventory var value if the job defines it's own\n\nThe default value of the variable 'inventory' of the validations.yml\nplaybook remains the same. However, if the zuul job defines alternative\ninventory for the VF to use, it will be used instead.\n\nWithout exposing the variable to the job, the inventory path is hard set\nand can not be adjusted to match exact location of the inventory.\nThis poses problem for validation execution.\nAs VF relies on inventory information to match validations to hosts.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8\n""}, {'number': 6, 'created': '2021-10-26 06:07:52.000000000', 'files': ['playbooks/validations.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/38dc6f32c91f94a05ca66842c640274201be404d', 'message': ""Override inventory var value if the job defines it's own\n\nThe default value of the variable 'inventory' of the validations.yml\nplaybook remains the same. However, if the zuul job defines alternative\ninventory for the VF to use, it will be used instead.\n\nWithout exposing the variable to the job, the inventory path is hard set\nand can not be adjusted to match exact location of the inventory.\nThis poses problem for validation execution.\nAs VF relies on inventory information to match validations to hosts.\n\nAlso removes conditional for older releases.\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8\n""}]",15,814801,38dc6f32c91f94a05ca66842c640274201be404d,46,10,6,32926,,,0,"Override inventory var value if the job defines it's own

The default value of the variable 'inventory' of the validations.yml
playbook remains the same. However, if the zuul job defines alternative
inventory for the VF to use, it will be used instead.

Without exposing the variable to the job, the inventory path is hard set
and can not be adjusted to match exact location of the inventory.
This poses problem for validation execution.
As VF relies on inventory information to match validations to hosts.

Also removes conditional for older releases.

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: Ia15063cabc65e2ae685e2f9dcaec9d25b05b4db8
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/01/814801/2 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/validations.yml', 'playbooks/multinode.yml']",2,52c5670a30ce62769f82a4008ef5986f95b7aed9,," - import_playbook: validations.yml vars: inventory: ""tripleo-deploy/undercloud/tripleo-ansible-inventory.yaml"" ",,8,3
openstack%2Fpuppet-swift~master~I42c552f588fd77de51bed4a0295295cfe64442fa,openstack/puppet-swift,master,I42c552f588fd77de51bed4a0295295cfe64442fa,Bump puppetlabs-inifile,MERGED,2021-11-02 04:10:27.000000000,2021-11-02 23:26:56.000000000,2021-11-02 23:26:56.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:10:27.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-swift/commit/2042fd8b885dd5d539b1d37e7eb159a7c2386265', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I42c552f588fd77de51bed4a0295295cfe64442fa\n'}]",0,816287,2042fd8b885dd5d539b1d37e7eb159a7c2386265,8,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I42c552f588fd77de51bed4a0295295cfe64442fa
",git fetch https://review.opendev.org/openstack/puppet-swift refs/changes/87/816287/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,2042fd8b885dd5d539b1d37e7eb159a7c2386265,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-swift~stable%2Ftrain~I987a37cb0606b6c217f906fbae17a765e40f4580,openstack/puppet-swift,stable/train,I987a37cb0606b6c217f906fbae17a765e40f4580,Fix missing argument of builder_file_path,MERGED,2021-11-02 00:45:43.000000000,2021-11-02 23:26:54.000000000,2021-11-02 23:26:54.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:45:43.000000000', 'files': ['lib/puppet/provider/swift_ring_builder.rb'], 'web_link': 'https://opendev.org/openstack/puppet-swift/commit/1c1cb38c701bcdec161ebbe66d5913f99359598b', 'message': 'Fix missing argument of builder_file_path\n\nThe change 63688a14e57282ae97072b406c81d0da2f61965c introduced support\nof storage policies and since the change was merged builder_file_path\ntakes one argument which is policy_index .\n\nThis change fixes the function call without argument to avoid failure\ncaused by missing argument.\n\nCloses-Bug: #1949334\nChange-Id: I987a37cb0606b6c217f906fbae17a765e40f4580\n(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)\n(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)\n(cherry picked from commit a8dc75e18323d8d1bf6e527fae3c5d056719c508)\n(cherry picked from commit 131ac86b488021c27d597f4a1e8682684dfacb2f)\n(cherry picked from commit edfaa3546a941467dcee9a0f268e1a90656b4526)\n'}]",0,816241,1c1cb38c701bcdec161ebbe66d5913f99359598b,10,3,1,9816,,,0,"Fix missing argument of builder_file_path

The change 63688a14e57282ae97072b406c81d0da2f61965c introduced support
of storage policies and since the change was merged builder_file_path
takes one argument which is policy_index .

This change fixes the function call without argument to avoid failure
caused by missing argument.

Closes-Bug: #1949334
Change-Id: I987a37cb0606b6c217f906fbae17a765e40f4580
(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)
(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)
(cherry picked from commit a8dc75e18323d8d1bf6e527fae3c5d056719c508)
(cherry picked from commit 131ac86b488021c27d597f4a1e8682684dfacb2f)
(cherry picked from commit edfaa3546a941467dcee9a0f268e1a90656b4526)
",git fetch https://review.opendev.org/openstack/puppet-swift refs/changes/41/816241/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/puppet/provider/swift_ring_builder.rb'],1,1c1cb38c701bcdec161ebbe66d5913f99359598b,bug/1949334-stable/train," builder_file_path(policy_index), builder_file_path(policy_index),"," builder_file_path, builder_file_path,",2,2
openstack%2Fpuppet-swift~stable%2Fussuri~I987a37cb0606b6c217f906fbae17a765e40f4580,openstack/puppet-swift,stable/ussuri,I987a37cb0606b6c217f906fbae17a765e40f4580,Fix missing argument of builder_file_path,MERGED,2021-11-02 00:45:15.000000000,2021-11-02 23:26:53.000000000,2021-11-02 23:26:53.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:45:15.000000000', 'files': ['lib/puppet/provider/swift_ring_builder.rb'], 'web_link': 'https://opendev.org/openstack/puppet-swift/commit/edfaa3546a941467dcee9a0f268e1a90656b4526', 'message': 'Fix missing argument of builder_file_path\n\nThe change 63688a14e57282ae97072b406c81d0da2f61965c introduced support\nof storage policies and since the change was merged builder_file_path\ntakes one argument which is policy_index .\n\nThis change fixes the function call without argument to avoid failure\ncaused by missing argument.\n\nCloses-Bug: #1949334\nChange-Id: I987a37cb0606b6c217f906fbae17a765e40f4580\n(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)\n(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)\n(cherry picked from commit a8dc75e18323d8d1bf6e527fae3c5d056719c508)\n(cherry picked from commit 131ac86b488021c27d597f4a1e8682684dfacb2f)\n'}]",0,816240,edfaa3546a941467dcee9a0f268e1a90656b4526,10,3,1,9816,,,0,"Fix missing argument of builder_file_path

The change 63688a14e57282ae97072b406c81d0da2f61965c introduced support
of storage policies and since the change was merged builder_file_path
takes one argument which is policy_index .

This change fixes the function call without argument to avoid failure
caused by missing argument.

Closes-Bug: #1949334
Change-Id: I987a37cb0606b6c217f906fbae17a765e40f4580
(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)
(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)
(cherry picked from commit a8dc75e18323d8d1bf6e527fae3c5d056719c508)
(cherry picked from commit 131ac86b488021c27d597f4a1e8682684dfacb2f)
",git fetch https://review.opendev.org/openstack/puppet-swift refs/changes/40/816240/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/puppet/provider/swift_ring_builder.rb'],1,edfaa3546a941467dcee9a0f268e1a90656b4526,bug/1949334-stable/ussuri," builder_file_path(policy_index), builder_file_path(policy_index),"," builder_file_path, builder_file_path,",2,2
openstack%2Fpuppet-swift~stable%2Fvictoria~I987a37cb0606b6c217f906fbae17a765e40f4580,openstack/puppet-swift,stable/victoria,I987a37cb0606b6c217f906fbae17a765e40f4580,Fix missing argument of builder_file_path,MERGED,2021-11-02 00:44:41.000000000,2021-11-02 23:22:24.000000000,2021-11-02 23:22:24.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:44:41.000000000', 'files': ['lib/puppet/provider/swift_ring_builder.rb'], 'web_link': 'https://opendev.org/openstack/puppet-swift/commit/131ac86b488021c27d597f4a1e8682684dfacb2f', 'message': 'Fix missing argument of builder_file_path\n\nThe change 63688a14e57282ae97072b406c81d0da2f61965c introduced support\nof storage policies and since the change was merged builder_file_path\ntakes one argument which is policy_index .\n\nThis change fixes the function call without argument to avoid failure\ncaused by missing argument.\n\nCloses-Bug: #1949334\nChange-Id: I987a37cb0606b6c217f906fbae17a765e40f4580\n(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)\n(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)\n(cherry picked from commit a8dc75e18323d8d1bf6e527fae3c5d056719c508)\n'}]",0,816239,131ac86b488021c27d597f4a1e8682684dfacb2f,10,3,1,9816,,,0,"Fix missing argument of builder_file_path

The change 63688a14e57282ae97072b406c81d0da2f61965c introduced support
of storage policies and since the change was merged builder_file_path
takes one argument which is policy_index .

This change fixes the function call without argument to avoid failure
caused by missing argument.

Closes-Bug: #1949334
Change-Id: I987a37cb0606b6c217f906fbae17a765e40f4580
(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)
(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)
(cherry picked from commit a8dc75e18323d8d1bf6e527fae3c5d056719c508)
",git fetch https://review.opendev.org/openstack/puppet-swift refs/changes/39/816239/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/puppet/provider/swift_ring_builder.rb'],1,131ac86b488021c27d597f4a1e8682684dfacb2f,bug/1949334-stable/victoria," builder_file_path(policy_index), builder_file_path(policy_index),"," builder_file_path, builder_file_path,",2,2
openstack%2Fpuppet-placement~stable%2Ftrain~If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,openstack/puppet-placement,stable/train,If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,Tag the httpd service only when it is used,MERGED,2021-11-02 00:10:00.000000000,2021-11-02 23:13:43.000000000,2021-11-02 23:13:43.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:10:00.000000000', 'files': ['manifests/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-placement/commit/65f9bf4ad6092cda28f4544d0de8710ce06ee8f8', 'message': 'Tag the httpd service only when it is used\n\nCurrently the placement-service tag is always added to the httpd\nservice, but it should not if an independent service is used to run\nplacement-api.\n\nChange-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456\n(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)\n(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)\n(cherry picked from commit 568b61b585f710a778e34a83a3c6a21b17c77b55)\n(cherry picked from commit 314bbbcc72320fc71fd6092e720d8b7a3ae819f8)\n(cherry picked from commit 9e4cf669ba037df9fb8e04b11c40bd560381882e)\n'}]",0,816235,65f9bf4ad6092cda28f4544d0de8710ce06ee8f8,7,3,1,9816,,,0,"Tag the httpd service only when it is used

Currently the placement-service tag is always added to the httpd
service, but it should not if an independent service is used to run
placement-api.

Change-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456
(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)
(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)
(cherry picked from commit 568b61b585f710a778e34a83a3c6a21b17c77b55)
(cherry picked from commit 314bbbcc72320fc71fd6092e720d8b7a3ae819f8)
(cherry picked from commit 9e4cf669ba037df9fb8e04b11c40bd560381882e)
",git fetch https://review.opendev.org/openstack/puppet-placement refs/changes/35/816235/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/api.pp'],1,65f9bf4ad6092cda28f4544d0de8710ce06ee8f8,, Service <| title == 'httpd' |> { tag +> 'placement-service' }, Service <| title == 'httpd' |> { tag +> 'placement-service' },1,2
openstack%2Fpuppet-placement~master~Id524d05cbbfe585c02d47c7b424e0ee5c3a32d41,openstack/puppet-placement,master,Id524d05cbbfe585c02d47c7b424e0ee5c3a32d41,Bump puppetlabs-inifile,MERGED,2021-11-02 04:09:01.000000000,2021-11-02 23:13:41.000000000,2021-11-02 23:13:41.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:09:01.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-placement/commit/5ac9658266401930761d1c30ea4527bb63ee2f03', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Id524d05cbbfe585c02d47c7b424e0ee5c3a32d41\n'}]",0,816283,5ac9658266401930761d1c30ea4527bb63ee2f03,8,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Id524d05cbbfe585c02d47c7b424e0ee5c3a32d41
",git fetch https://review.opendev.org/openstack/puppet-placement refs/changes/83/816283/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,5ac9658266401930761d1c30ea4527bb63ee2f03,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-placement~stable%2Fvictoria~If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,openstack/puppet-placement,stable/victoria,If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,Tag the httpd service only when it is used,MERGED,2021-11-02 00:09:22.000000000,2021-11-02 23:13:40.000000000,2021-11-02 23:13:40.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:09:22.000000000', 'files': ['manifests/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-placement/commit/314bbbcc72320fc71fd6092e720d8b7a3ae819f8', 'message': 'Tag the httpd service only when it is used\n\nCurrently the placement-service tag is always added to the httpd\nservice, but it should not if an independent service is used to run\nplacement-api.\n\nChange-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456\n(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)\n(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)\n(cherry picked from commit 568b61b585f710a778e34a83a3c6a21b17c77b55)\n'}]",0,816233,314bbbcc72320fc71fd6092e720d8b7a3ae819f8,8,3,1,9816,,,0,"Tag the httpd service only when it is used

Currently the placement-service tag is always added to the httpd
service, but it should not if an independent service is used to run
placement-api.

Change-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456
(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)
(cherry picked from commit 14ee3c820b89597dd95d3abd2c335ac7a4075d03)
(cherry picked from commit 568b61b585f710a778e34a83a3c6a21b17c77b55)
",git fetch https://review.opendev.org/openstack/puppet-placement refs/changes/33/816233/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/api.pp'],1,314bbbcc72320fc71fd6092e720d8b7a3ae819f8,, Service <| title == 'httpd' |> { tag +> 'placement-service' }, Service <| title == 'httpd' |> { tag +> 'placement-service' },1,2
openstack%2Ffreezer-dr~master~I70afa3917e28b57f7ea8d992a7910c09bec7b4d5,openstack/freezer-dr,master,I70afa3917e28b57f7ea8d992a7910c09bec7b4d5,Fix pylint error,MERGED,2021-11-02 12:38:17.000000000,2021-11-02 22:57:43.000000000,2021-11-02 22:55:54.000000000,"[{'_account_id': 21069}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 12:38:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/freezer-dr/commit/eb753e94283c2a8de4f8cd51a3e27f41222942ce', 'message': 'Update setup.cfg\n\nUpdate Programming Language from Python3.7 to Python3.8\n\nChange-Id: I70afa3917e28b57f7ea8d992a7910c09bec7b4d5\n'}, {'number': 2, 'created': '2021-11-02 14:32:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/freezer-dr/commit/f400db34e0dcae248afbbe37be9f2135503dae33', 'message': ""Fix pylint error\n\nFix error\nE1120: No value for argument 'Loader' in function call (no-value-for-parameter)\n\nChange-Id: I70afa3917e28b57f7ea8d992a7910c09bec7b4d5\n""}, {'number': 3, 'created': '2021-11-02 22:32:10.000000000', 'files': ['.pylintrc'], 'web_link': 'https://opendev.org/openstack/freezer-dr/commit/44ccb487f3e975e9396ef864267979a2d7be3909', 'message': ""Fix pylint error\n\nFix error\nE1120: No value for argument 'Loader' in function call (no-value-for-parameter)\n\nChange-Id: I70afa3917e28b57f7ea8d992a7910c09bec7b4d5\n""}]",0,816352,44ccb487f3e975e9396ef864267979a2d7be3909,11,2,3,21069,,,0,"Fix pylint error

Fix error
E1120: No value for argument 'Loader' in function call (no-value-for-parameter)

Change-Id: I70afa3917e28b57f7ea8d992a7910c09bec7b4d5
",git fetch https://review.opendev.org/openstack/freezer-dr refs/changes/52/816352/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,eb753e94283c2a8de4f8cd51a3e27f41222942ce,, Programming Language :: Python :: 3.8, Programming Language :: Python :: 3.7,1,1
openstack%2Fneutron-lib~master~I0a0f37b671b7c8d41677f44808e10be767904c51,openstack/neutron-lib,master,I0a0f37b671b7c8d41677f44808e10be767904c51,Move QosPlacementAllocationUpdateConflict to neutron-lib,MERGED,2021-11-02 08:34:23.000000000,2021-11-02 22:37:07.000000000,2021-11-02 22:35:31.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 08:34:23.000000000', 'files': ['neutron_lib/exceptions/qos.py'], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/63869951ea5fddbb7dc60115c79c45c7b9786941', 'message': 'Move QosPlacementAllocationUpdateConflict to neutron-lib\n\nAddresses TODO comment from [1].\n\n[1] https://opendev.org/openstack/neutron/src/branch/master/neutron/exceptions/qos.py#L20\n\nRelated-Bug: #1922237\nSee-Also: https://review.opendev.org/785236\nChange-Id: I0a0f37b671b7c8d41677f44808e10be767904c51\n'}]",0,816306,63869951ea5fddbb7dc60115c79c45c7b9786941,8,4,1,33652,,,0,"Move QosPlacementAllocationUpdateConflict to neutron-lib

Addresses TODO comment from [1].

[1] https://opendev.org/openstack/neutron/src/branch/master/neutron/exceptions/qos.py#L20

Related-Bug: #1922237
See-Also: https://review.opendev.org/785236
Change-Id: I0a0f37b671b7c8d41677f44808e10be767904c51
",git fetch https://review.opendev.org/openstack/neutron-lib refs/changes/06/816306/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron_lib/exceptions/qos.py'],1,63869951ea5fddbb7dc60115c79c45c7b9786941,bp/qos-minimum-guaranteed-packet-rate," class QosPlacementAllocationUpdateConflict(e.Conflict): message = _(""Updating placement allocation with %(alloc_diff)s for "" ""consumer %(consumer)s failed. The requested resources would "" ""exceed the capacity available."")",,6,0
openstack%2Fnova~stable%2Fstein~I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf,openstack/nova,stable/stein,I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf,[stable-only] Pin virtualenv and setuptools,MERGED,2021-10-11 15:35:14.000000000,2021-11-02 22:34:25.000000000,2021-11-02 22:31:53.000000000,"[{'_account_id': 4393}, {'_account_id': 7166}, {'_account_id': 9708}, {'_account_id': 22348}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-10-11 15:35:14.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/nova/commit/85cda94e672a9ca0f512589d543a5a6659d285ad', 'message': ""[stable-only] Pin virtualenv and setuptools\n\nSetuptools 58.0 (bundled in virtualenv 20.8) breaks the installation of\ndecorator 3.4.0. So this patch pins virtualenv to avoid the break.\n\nAs the used 'require' feature was introduced in tox in version 3.2 [1],\nthe required minversion has to be bumped, too.\n\n[1] https://tox.readthedocs.io/en/latest/config.html#conf-requires\n\nConflicts:\n    tox.ini\n\nNOTE(elod.illes): The conflict is because change\nI331c42a1a79b8a79d9afd04edb136c8c31dc483c is not in Stein.\n\nChange-Id: I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf\n(cherry picked from commit b27f8e9adfcf2db3c83722c42e055ba5065ad06e)\n(cherry picked from commit f1be212a86262f128e73f7201b7b3e51334f1ab4)\n""}]",1,813451,85cda94e672a9ca0f512589d543a5a6659d285ad,11,5,1,17685,,,0,"[stable-only] Pin virtualenv and setuptools

Setuptools 58.0 (bundled in virtualenv 20.8) breaks the installation of
decorator 3.4.0. So this patch pins virtualenv to avoid the break.

As the used 'require' feature was introduced in tox in version 3.2 [1],
the required minversion has to be bumped, too.

[1] https://tox.readthedocs.io/en/latest/config.html#conf-requires

Conflicts:
    tox.ini

NOTE(elod.illes): The conflict is because change
I331c42a1a79b8a79d9afd04edb136c8c31dc483c is not in Stein.

Change-Id: I26b2a14e0b91c0ab77299c3e4fbed5f7916fe8cf
(cherry picked from commit b27f8e9adfcf2db3c83722c42e055ba5065ad06e)
(cherry picked from commit f1be212a86262f128e73f7201b7b3e51334f1ab4)
",git fetch https://review.opendev.org/openstack/nova refs/changes/51/813451/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,85cda94e672a9ca0f512589d543a5a6659d285ad,use_2to3,minversion = 3.2.0# Pin the virtualenv and therefore the setuptools version used for the env # creation. This results in a new tox being installed in .tox/.tox virtualenv # and the tox on the host will delegate all the calls to the tox in that env. requires = virtualenv<20.8,minversion = 3.1.1,5,1
openstack%2Fneutron-tempest-plugin~master~Ic685d1b174660cc58b8a29178e98f838d8b496e1,openstack/neutron-tempest-plugin,master,Ic685d1b174660cc58b8a29178e98f838d8b496e1,Add a config option for BGP speaker scheduling,MERGED,2021-10-25 12:49:05.000000000,2021-11-02 22:31:49.000000000,2021-11-02 22:31:49.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-25 12:49:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/e7c1f5f8c2e47ca16e08e640e01d0415a70612ec', 'message': 'DNM: Test n-d-r with static scheduler\n\nSigned-off-by: Dr. Jens Harbott <harbott@osism.tech>\nChange-Id: Ic685d1b174660cc58b8a29178e98f838d8b496e1\n'}, {'number': 2, 'created': '2021-10-25 13:52:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/395a026ed845591eb71725666affc75b92f8ad88', 'message': 'DNM: Test n-d-r with static scheduler\n\nSigned-off-by: Dr. Jens Harbott <harbott@osism.tech>\nChange-Id: Ic685d1b174660cc58b8a29178e98f838d8b496e1\n'}, {'number': 3, 'created': '2021-10-25 17:37:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/74c994f08a0e37396e8b2d712a485efd0e776f97', 'message': 'Add a config option for BGP speaker scheduling\n\nDepending on the Scheduler being used in neutron-dynamic-routing, it may\nbe necessary to explicitly schedule a speaker to an agent when it is\nbeing created. Add an option that allows to request this behavior.\n\nNeeded-By: https://review.opendev.org/c/openstack/neutron-dynamic-routing/+/815265\nSigned-off-by: Dr. Jens Harbott <harbott@osism.tech>\nChange-Id: Ic685d1b174660cc58b8a29178e98f838d8b496e1\n'}, {'number': 4, 'created': '2021-10-26 08:39:34.000000000', 'files': ['neutron_tempest_plugin/neutron_dynamic_routing/scenario/base.py', 'neutron_tempest_plugin/config.py'], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/cca5dc8425bed382833abc7fc94fcc9836f10e39', 'message': 'Add a config option for BGP speaker scheduling\n\nDepending on the Scheduler being used in neutron-dynamic-routing, it may\nbe necessary to explicitly schedule a speaker to an agent when it is\nbeing created. Add an option that allows to request this behavior.\n\nNeeded-By: https://review.opendev.org/c/openstack/neutron-dynamic-routing/+/815265\nSigned-off-by: Dr. Jens Harbott <harbott@osism.tech>\nChange-Id: Ic685d1b174660cc58b8a29178e98f838d8b496e1\n'}]",3,815294,cca5dc8425bed382833abc7fc94fcc9836f10e39,17,4,4,13252,,,0,"Add a config option for BGP speaker scheduling

Depending on the Scheduler being used in neutron-dynamic-routing, it may
be necessary to explicitly schedule a speaker to an agent when it is
being created. Add an option that allows to request this behavior.

Needed-By: https://review.opendev.org/c/openstack/neutron-dynamic-routing/+/815265
Signed-off-by: Dr. Jens Harbott <harbott@osism.tech>
Change-Id: Ic685d1b174660cc58b8a29178e98f838d8b496e1
",git fetch https://review.opendev.org/openstack/neutron-tempest-plugin refs/changes/94/815294/4 && git format-patch -1 --stdout FETCH_HEAD,['neutron_tempest_plugin/neutron_dynamic_routing/scenario/base.py'],1,e7c1f5f8c2e47ca16e08e640e01d0415a70612ec,test-ndr-static," self.add_bgp_speaker_to_dragent(self, self.get_dragent_id(), bgp_speaker_id)",,2,0
openstack%2Fpuppet-keystone~master~I1855b83ceb377e8c97c351a0434e2ab994fb0bdc,openstack/puppet-keystone,master,I1855b83ceb377e8c97c351a0434e2ab994fb0bdc,OIDC: Add support for setting OIDCResponseMode,MERGED,2021-10-28 11:35:38.000000000,2021-11-02 22:04:55.000000000,2021-11-02 22:03:03.000000000,"[{'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 11:35:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/0da32a070932d13d3c4d686c97111a42111d20f6', 'message': 'OIDC: Add support for setting OIDCResponseMode\n\nDefault response modes fragment or query are using URL encoding which limits\nmaximum token size. Response mode form_post does not have limits for token size.\n\nThis change allows to define response mode.\n\nSigned-off-by: Oskari Lemmela <oskari@lemmela.net>\nChange-Id: I1855b83ceb377e8c97c351a0434e2ab994fb0bdc\n'}, {'number': 2, 'created': '2021-11-01 18:30:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/11bc18d65a0b7f0f8a293d7cca8205b7dc3cdcc4', 'message': 'OIDC: Add support for setting OIDCResponseMode\n\nDefault response modes fragment or query are using URL encoding which limits\nmaximum token size. Response mode form_post does not have limits for token size.\n\nThis change allows to define response mode.\n\nSigned-off-by: Oskari Lemmela <oskari@lemmela.net>\nChange-Id: I1855b83ceb377e8c97c351a0434e2ab994fb0bdc\n'}, {'number': 3, 'created': '2021-11-02 05:04:44.000000000', 'files': ['manifests/federation/openidc.pp', 'releasenotes/notes/openidc_response_mode-f5a2ddf95bd4b752.yaml', 'spec/classes/keystone_federation_openidc_spec.rb', 'templates/openidc.conf.erb'], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/94fbafd684b04d28a601419cfe10d1e1fbe8b0b1', 'message': 'OIDC: Add support for setting OIDCResponseMode\n\nDefault response modes fragment or query are using URL encoding which\nlimits maximum token size. Response mode form_post does not have limits\nfor token size.\n\nThis change allows to define response mode.\n\nSigned-off-by: Oskari Lemmela <oskari@lemmela.net>\nChange-Id: I1855b83ceb377e8c97c351a0434e2ab994fb0bdc\n'}]",9,815826,94fbafd684b04d28a601419cfe10d1e1fbe8b0b1,21,3,3,34200,,,0,"OIDC: Add support for setting OIDCResponseMode

Default response modes fragment or query are using URL encoding which
limits maximum token size. Response mode form_post does not have limits
for token size.

This change allows to define response mode.

Signed-off-by: Oskari Lemmela <oskari@lemmela.net>
Change-Id: I1855b83ceb377e8c97c351a0434e2ab994fb0bdc
",git fetch https://review.opendev.org/openstack/puppet-keystone refs/changes/26/815826/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/federation/openidc.pp', 'templates/openidc.conf.erb']",2,0da32a070932d13d3c4d686c97111a42111d20f6,oidcresponsemode,"<%- if scope['::keystone::federation::openidc::openidc_response_mode'] != nil -%> OIDCResponseMode ""<%= scope['::keystone::federation::openidc::openidc_response_mode'] %>"" <%- end -%>",,9,0
openstack%2Fpuppet-swift~stable%2Fwallaby~I987a37cb0606b6c217f906fbae17a765e40f4580,openstack/puppet-swift,stable/wallaby,I987a37cb0606b6c217f906fbae17a765e40f4580,Fix missing argument of builder_file_path,MERGED,2021-11-02 00:44:08.000000000,2021-11-02 21:58:22.000000000,2021-11-02 21:58:22.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:44:08.000000000', 'files': ['lib/puppet/provider/swift_ring_builder.rb'], 'web_link': 'https://opendev.org/openstack/puppet-swift/commit/a8dc75e18323d8d1bf6e527fae3c5d056719c508', 'message': 'Fix missing argument of builder_file_path\n\nThe change 63688a14e57282ae97072b406c81d0da2f61965c introduced support\nof storage policies and since the change was merged builder_file_path\ntakes one argument which is policy_index .\n\nThis change fixes the function call without argument to avoid failure\ncaused by missing argument.\n\nCloses-Bug: #1949334\nChange-Id: I987a37cb0606b6c217f906fbae17a765e40f4580\n(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)\n(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)\n'}]",0,816238,a8dc75e18323d8d1bf6e527fae3c5d056719c508,10,3,1,9816,,,0,"Fix missing argument of builder_file_path

The change 63688a14e57282ae97072b406c81d0da2f61965c introduced support
of storage policies and since the change was merged builder_file_path
takes one argument which is policy_index .

This change fixes the function call without argument to avoid failure
caused by missing argument.

Closes-Bug: #1949334
Change-Id: I987a37cb0606b6c217f906fbae17a765e40f4580
(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)
(cherry picked from commit e7d560738d5e02d32e63a0411211ddbb8afdcd9c)
",git fetch https://review.opendev.org/openstack/puppet-swift refs/changes/38/816238/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/puppet/provider/swift_ring_builder.rb'],1,a8dc75e18323d8d1bf6e527fae3c5d056719c508,bug/1949334-stable/wallaby," builder_file_path(policy_index), builder_file_path(policy_index),"," builder_file_path, builder_file_path,",2,2
openstack%2Fpuppet-openstack-integration~stable%2Fxena~I7de0394eec856fc6d242f7b4872694324fdd12b7,openstack/puppet-openstack-integration,stable/xena,I7de0394eec856fc6d242f7b4872694324fdd12b7,Ubuntu: Use debian-<release> ceph repo,MERGED,2021-10-31 11:52:22.000000000,2021-11-02 21:53:25.000000000,2021-11-02 21:53:25.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-31 11:52:22.000000000', 'files': ['configure_facts.sh'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/18eaa39b467de7460d781d88260f178f2756efa0', 'message': 'Ubuntu: Use debian-<release> ceph repo\n\nAccording to the Ceph documentation[1] we should use the debian-* repo\nfor ubuntu and the ceph-deb-* repo no longer exists.\n\n[1] https://docs.ceph.com/en/latest/install/get-packages/#ceph-release-packages\n\nChange-Id: I7de0394eec856fc6d242f7b4872694324fdd12b7\n(cherry picked from commit 13044d9f9e8fe0385ba68a458a301cc82188f08b)\n'}]",0,815889,18eaa39b467de7460d781d88260f178f2756efa0,8,3,1,9816,,,0,"Ubuntu: Use debian-<release> ceph repo

According to the Ceph documentation[1] we should use the debian-* repo
for ubuntu and the ceph-deb-* repo no longer exists.

[1] https://docs.ceph.com/en/latest/install/get-packages/#ceph-release-packages

Change-Id: I7de0394eec856fc6d242f7b4872694324fdd12b7
(cherry picked from commit 13044d9f9e8fe0385ba68a458a301cc82188f08b)
",git fetch https://review.opendev.org/openstack/puppet-openstack-integration refs/changes/89/815889/1 && git format-patch -1 --stdout FETCH_HEAD,['configure_facts.sh'],1,18eaa39b467de7460d781d88260f178f2756efa0,ubuntu-ceph-repos-stable/xena," CEPH_MIRROR_HOST=""http://download.ceph.com/debian-${CEPH_VERSION}"""," if [ ""$CEPH_VERSION"" == ""mimic"" ] || [ ""CEPH_VERSION"" == ""luminous"" ] ; then CEPH_MIRROR_HOST=""http://download.ceph.com/debian-${CEPH_VERSION}"" else CEPH_MIRROR_HOST=""${CENTOS_MIRROR_HOST}/ceph-deb-${CEPH_VERSION}"" fi",1,5
openstack%2Fpuppet-horizon~stable%2Ftrain~I189fbb0a76ba63e16f6c3b6ad9db6f9e0355617f,openstack/puppet-horizon,stable/train,I189fbb0a76ba63e16f6c3b6ad9db6f9e0355617f,Fix how disallow_iframe_embed is defined,MERGED,2021-11-02 00:11:12.000000000,2021-11-02 21:50:18.000000000,2021-11-02 21:48:33.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:11:12.000000000', 'files': ['templates/local_settings.py.erb', 'releasenotes/notes/bug-1942722-3cc45ac696688336.yaml', 'spec/classes/horizon_init_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/1c58af61c771c23bedbe8204f33eae752f64cfbf', 'message': ""Fix how disallow_iframe_embed is defined\n\nThe disallow_iframe_embed option doesn't belong to HORIZON_CONFIG but\nshould be described as a variable in local_settings.\n\nCloses-Bug: #1942722\nChange-Id: I189fbb0a76ba63e16f6c3b6ad9db6f9e0355617f\n(cherry picked from commit 7153d5cdfac9288bca22caedb064ea5aa903c2eb)\n(cherry picked from commit 7135e8d99d6e11522006291c224e88a87a4e942b)\n(cherry picked from commit 03d3469f718c00bf4bc50eb126298597e8a6f2b5)\n(cherry picked from commit c65b7a89c6a2080f75524b79422d5d5c957b28a6)\n""}]",0,816236,1c58af61c771c23bedbe8204f33eae752f64cfbf,11,3,1,9816,,,0,"Fix how disallow_iframe_embed is defined

The disallow_iframe_embed option doesn't belong to HORIZON_CONFIG but
should be described as a variable in local_settings.

Closes-Bug: #1942722
Change-Id: I189fbb0a76ba63e16f6c3b6ad9db6f9e0355617f
(cherry picked from commit 7153d5cdfac9288bca22caedb064ea5aa903c2eb)
(cherry picked from commit 7135e8d99d6e11522006291c224e88a87a4e942b)
(cherry picked from commit 03d3469f718c00bf4bc50eb126298597e8a6f2b5)
(cherry picked from commit c65b7a89c6a2080f75524b79422d5d5c957b28a6)
",git fetch https://review.opendev.org/openstack/puppet-horizon refs/changes/36/816236/1 && git format-patch -1 --stdout FETCH_HEAD,"['templates/local_settings.py.erb', 'releasenotes/notes/bug-1942722-3cc45ac696688336.yaml', 'spec/classes/horizon_init_spec.rb']",3,1c58af61c771c23bedbe8204f33eae752f64cfbf,bug/1942722," 'DISALLOW_IFRAME_EMBED = True', context 'with disallow iframe embed disabled' do :disallow_iframe_embed => false 'DISALLOW_IFRAME_EMBED = False',"," context 'with disallow iframe embed enabled' do :disallow_iframe_embed => true 'HORIZON_CONFIG[""disallow_iframe_embed""] = True',",9,6
openstack%2Fpuppet-swift~stable%2Fxena~I987a37cb0606b6c217f906fbae17a765e40f4580,openstack/puppet-swift,stable/xena,I987a37cb0606b6c217f906fbae17a765e40f4580,Fix missing argument of builder_file_path,MERGED,2021-11-02 00:43:45.000000000,2021-11-02 21:45:24.000000000,2021-11-02 21:45:24.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:43:45.000000000', 'files': ['lib/puppet/provider/swift_ring_builder.rb'], 'web_link': 'https://opendev.org/openstack/puppet-swift/commit/e7d560738d5e02d32e63a0411211ddbb8afdcd9c', 'message': 'Fix missing argument of builder_file_path\n\nThe change 63688a14e57282ae97072b406c81d0da2f61965c introduced support\nof storage policies and since the change was merged builder_file_path\ntakes one argument which is policy_index .\n\nThis change fixes the function call without argument to avoid failure\ncaused by missing argument.\n\nCloses-Bug: #1949334\nChange-Id: I987a37cb0606b6c217f906fbae17a765e40f4580\n(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)\n'}]",0,816237,e7d560738d5e02d32e63a0411211ddbb8afdcd9c,8,3,1,9816,,,0,"Fix missing argument of builder_file_path

The change 63688a14e57282ae97072b406c81d0da2f61965c introduced support
of storage policies and since the change was merged builder_file_path
takes one argument which is policy_index .

This change fixes the function call without argument to avoid failure
caused by missing argument.

Closes-Bug: #1949334
Change-Id: I987a37cb0606b6c217f906fbae17a765e40f4580
(cherry picked from commit 350778570c04db749a61106f173419b25fd7494f)
",git fetch https://review.opendev.org/openstack/puppet-swift refs/changes/37/816237/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/puppet/provider/swift_ring_builder.rb'],1,e7d560738d5e02d32e63a0411211ddbb8afdcd9c,bug/1949334-stable/xena," builder_file_path(policy_index), builder_file_path(policy_index),"," builder_file_path, builder_file_path,",2,2
openstack%2Fpuppet-placement~stable%2Fxena~If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,openstack/puppet-placement,stable/xena,If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,Tag the httpd service only when it is used,MERGED,2021-11-02 00:08:40.000000000,2021-11-02 21:42:33.000000000,2021-11-02 21:42:33.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:08:40.000000000', 'files': ['manifests/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-placement/commit/14ee3c820b89597dd95d3abd2c335ac7a4075d03', 'message': 'Tag the httpd service only when it is used\n\nCurrently the placement-service tag is always added to the httpd\nservice, but it should not if an independent service is used to run\nplacement-api.\n\nChange-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456\n(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)\n'}]",0,816231,14ee3c820b89597dd95d3abd2c335ac7a4075d03,8,3,1,9816,,,0,"Tag the httpd service only when it is used

Currently the placement-service tag is always added to the httpd
service, but it should not if an independent service is used to run
placement-api.

Change-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456
(cherry picked from commit 8475c1afed91ded3e393c1e2f41daf8c98b95bde)
",git fetch https://review.opendev.org/openstack/puppet-placement refs/changes/31/816231/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/api.pp'],1,14ee3c820b89597dd95d3abd2c335ac7a4075d03,, Service <| title == 'httpd' |> { tag +> 'placement-service' }, Service <| title == 'httpd' |> { tag +> 'placement-service' },1,2
openstack%2Freleases~master~Iee51c3625c286707d6d7096865b02db15c4b5e91,openstack/releases,master,Iee51c3625c286707d6d7096865b02db15c4b5e91,Release tripleo-operator-ansible 0.7.1,MERGED,2021-11-01 09:13:47.000000000,2021-11-02 21:33:33.000000000,2021-11-02 21:33:33.000000000,"[{'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 11904}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 09:13:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/ddacad1ff457f48d0962485135d3883ef0dbc14b', 'message': 'Release tripleo-operator-ansible 0.7.1\n\nChange-Id: Iee51c3625c286707d6d7096865b02db15c4b5e91\n'}, {'number': 2, 'created': '2021-11-01 13:22:41.000000000', 'files': ['deliverables/_independent/tripleo-operator-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/b78346c06689ecfe14c200dd3196bfbfd158a067', 'message': 'Release tripleo-operator-ansible 0.7.1\n\nChange-Id: Iee51c3625c286707d6d7096865b02db15c4b5e91\n'}]",4,816153,b78346c06689ecfe14c200dd3196bfbfd158a067,12,5,2,10969,,,0,"Release tripleo-operator-ansible 0.7.1

Change-Id: Iee51c3625c286707d6d7096865b02db15c4b5e91
",git fetch https://review.opendev.org/openstack/releases refs/changes/53/816153/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/tripleo-operator-ansible.yaml'],1,ddacad1ff457f48d0962485135d3883ef0dbc14b,, - version: 0.7.1 projects: - repo: openstack/tripleo-operator-ansible hash: 504216653d509ec7170640eff45c786085520e76 ,,5,0
openstack%2Fpuppet-aodh~master~Ib0272c1525a6974894a6101c40b50a7deb7cbea7,openstack/puppet-aodh,master,Ib0272c1525a6974894a6101c40b50a7deb7cbea7,Prepare to update default of <service>::wsgi::apache::ssl,MERGED,2021-11-02 11:56:56.000000000,2021-11-02 21:33:08.000000000,2021-11-02 21:31:26.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 11:56:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-aodh/commit/b68639e690c456e09ddbaceac6a81fe2f8e8623d', 'message': ""Prepare to update default of <service>::wsgi::apache::ssl\n\nCurrently the <service>::wsgi::apache::ssl parameters have inconsistent\ndefault values. Some parameters default to true while the other default\nto false.\n\nBased on the following points, false is considered to be the more\nreasonable default.\n - Usage of SSL is optional and is not always required\n - There are other methods(like Load Balancer) to implemente SSL\n   termination\n - Enabling SSL doesn't work with the default values currently\n   defined, and requires additional parameters like ssl_cert.\n - false is the default value defined in the base implementation in\n   puppet-openstacklib.\n\nThis change is the preparation to change the default value, and\nintroduces a warning message to make users aware of the future change.\n\nChange-Id: Ib0272c1525a6974894a6101c40b50a7deb7cbea7\n""}, {'number': 2, 'created': '2021-11-02 11:57:59.000000000', 'files': ['manifests/wsgi/apache.pp', 'releasenotes/notes/prepare-to-change-apache-ssl-7777c0a358f69279.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-aodh/commit/c475277bce1ea562ebd3c4ced7e748ae91b97847', 'message': ""Prepare to update default of <service>::wsgi::apache::ssl\n\nCurrently the <service>::wsgi::apache::ssl parameters have inconsistent\ndefault values. Some parameters default to true while the other default\nto false.\n\nBased on the following points, false is considered to be the more\nreasonable default.\n - Usage of SSL is optional and is not always required\n - There are other methods(like load-balancer) to implement SSL\n   termination\n - Enabling SSL doesn't work with the default values currently\n   defined, and requires additional parameters like ssl_cert.\n - false is the default value defined in the base implementation in\n   puppet-openstacklib.\n\nThis change is the preparation to change the default value, and\nintroduces a warning message to make users aware of the future change.\n\nChange-Id: Ib0272c1525a6974894a6101c40b50a7deb7cbea7\n""}]",0,816326,c475277bce1ea562ebd3c4ced7e748ae91b97847,10,3,2,9816,,,0,"Prepare to update default of <service>::wsgi::apache::ssl

Currently the <service>::wsgi::apache::ssl parameters have inconsistent
default values. Some parameters default to true while the other default
to false.

Based on the following points, false is considered to be the more
reasonable default.
 - Usage of SSL is optional and is not always required
 - There are other methods(like load-balancer) to implement SSL
   termination
 - Enabling SSL doesn't work with the default values currently
   defined, and requires additional parameters like ssl_cert.
 - false is the default value defined in the base implementation in
   puppet-openstacklib.

This change is the preparation to change the default value, and
introduces a warning message to make users aware of the future change.

Change-Id: Ib0272c1525a6974894a6101c40b50a7deb7cbea7
",git fetch https://review.opendev.org/openstack/puppet-aodh refs/changes/26/816326/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/wsgi/apache.pp', 'releasenotes/notes/prepare-to-change-apache-ssl-7777c0a358f69279.yaml']",2,b68639e690c456e09ddbaceac6a81fe2f8e8623d,apache-ssl,--- upgrade: - | Default value of the ``aodh::wsgi::apache::ssl`` parameter will be changed from ``true`` to ``false`` in a future release. Make sure the parameter is set to the desired value. ,,14,3
openstack%2Fcharm-aodh~master~I7c39331f8897a82915aa5c7b597b1e2209af5cab,openstack/charm-aodh,master,I7c39331f8897a82915aa5c7b597b1e2209af5cab,Add yoga bundles and release-tool syncs,ABANDONED,2021-10-29 21:02:22.000000000,2021-11-02 21:13:01.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-29 21:02:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-aodh/commit/e23ce0fb04ecd653f914cfbccff8ae2bca4de6fc', 'message': 'Add yoga bundles and release-tool syncs\n\n* charm-helpers sync for classic charms\n* pin pyparsing for aodhclient\n* pin cffi for py35\n* add non-voting focal-yoga bundle\n* add non-voting jammy-yoga bundle\n* add series metadata for jammy\n\nChange-Id: I7c39331f8897a82915aa5c7b597b1e2209af5cab\n'}, {'number': 2, 'created': '2021-10-29 21:17:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-aodh/commit/08f8e6752aee254e90b4e2998c94b7848937a463', 'message': 'Add yoga bundles and release-tool syncs\n\n* charm-helpers sync for classic charms\n* pin pyparsing for aodhclient\n* pin cffi for py35\n* add non-voting focal-yoga bundle\n* add non-voting jammy-yoga bundle\n* add series metadata for jammy\n\nChange-Id: I7c39331f8897a82915aa5c7b597b1e2209af5cab\n'}, {'number': 3, 'created': '2021-11-01 13:51:25.000000000', 'files': ['src/tests/bundles/focal-yoga.yaml', 'osci.yaml', 'requirements.txt', 'src/tests/bundles/jammy-yoga.yaml', 'test-requirements.txt', 'src/metadata.yaml', 'src/tests/tests.yaml'], 'web_link': 'https://opendev.org/openstack/charm-aodh/commit/da31a28082a3528ee2d84f34d1addbfbe341a87d', 'message': 'Add yoga bundles and release-tool syncs\n\n* charm-helpers sync for classic charms\n* pin pyparsing for aodhclient\n* pin cffi for py35\n* add non-voting focal-yoga bundle\n* add non-voting jammy-yoga bundle\n* add series metadata for jammy\n\nChange-Id: I7c39331f8897a82915aa5c7b597b1e2209af5cab\n'}]",0,815996,da31a28082a3528ee2d84f34d1addbfbe341a87d,10,2,3,11805,,,0,"Add yoga bundles and release-tool syncs

* charm-helpers sync for classic charms
* pin pyparsing for aodhclient
* pin cffi for py35
* add non-voting focal-yoga bundle
* add non-voting jammy-yoga bundle
* add series metadata for jammy

Change-Id: I7c39331f8897a82915aa5c7b597b1e2209af5cab
",git fetch https://review.opendev.org/openstack/charm-aodh refs/changes/96/815996/1 && git format-patch -1 --stdout FETCH_HEAD,"['src/tests/bundles/focal-yoga.yaml', 'osci.yaml', 'requirements.txt', 'src/tests/bundles/jammy-yoga.yaml', 'test-requirements.txt', 'src/metadata.yaml', 'src/tests/tests.yaml']",7,e23ce0fb04ecd653f914cfbccff8ae2bca4de6fc,batch-update, - focal-yoga - jammy-yoga - jammy-yoga,,355,0
openstack%2Fbarbican~stable%2Fussuri~Ide37d64dff10d421817bf90b8e2e58bf6ac4f592,openstack/barbican,stable/ussuri,Ide37d64dff10d421817bf90b8e2e58bf6ac4f592,Fix secret metadata access rules,MERGED,2021-11-02 16:22:40.000000000,2021-11-02 20:29:04.000000000,2021-11-02 20:26:59.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 16:22:40.000000000', 'files': ['barbican/api/controllers/secretmeta.py', 'barbican/api/controllers/secrets.py', 'barbican/api/controllers/__init__.py', 'barbican/common/policies/base.py', 'barbican/common/policies/secretmeta.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/32702400655675d30ebe53b2151da77532d56bb1', 'message': 'Fix secret metadata access rules\n\nThis patch fixes the legacy policy rules for accessing secret metadata\nby checking that the user making the request is authenticated for the\nproject that owns the secret.\n\nStory: 2009253\nTask: 43455\n\nChange-Id: Ide37d64dff10d421817bf90b8e2e58bf6ac4f592\n(cherry picked from commit 7d270bacbe29a90a10f1855abc3b50dac0f08022)\n(cherry picked from commit 750a79b4f5fbb94b1a1d0f329a0c8a51566b2cae)\n(cherry picked from commit 64a4242454a65df17abc10e13861463a2de71813)\n(cherry picked from commit 86d7d6411075a15cdea742acfa9f6d0ca42c044c)\n'}]",0,816337,32702400655675d30ebe53b2151da77532d56bb1,7,2,1,7973,,,0,"Fix secret metadata access rules

This patch fixes the legacy policy rules for accessing secret metadata
by checking that the user making the request is authenticated for the
project that owns the secret.

Story: 2009253
Task: 43455

Change-Id: Ide37d64dff10d421817bf90b8e2e58bf6ac4f592
(cherry picked from commit 7d270bacbe29a90a10f1855abc3b50dac0f08022)
(cherry picked from commit 750a79b4f5fbb94b1a1d0f329a0c8a51566b2cae)
(cherry picked from commit 64a4242454a65df17abc10e13861463a2de71813)
(cherry picked from commit 86d7d6411075a15cdea742acfa9f6d0ca42c044c)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/37/816337/1 && git format-patch -1 --stdout FETCH_HEAD,"['barbican/api/controllers/secretmeta.py', 'barbican/api/controllers/secrets.py', 'barbican/api/controllers/__init__.py', 'barbican/common/policies/base.py', 'barbican/common/policies/secretmeta.py']",5,32702400655675d30ebe53b2151da77532d56bb1,story/2009247-stable/wallaby-stable/victoria-stable/ussuri," check_str='rule:secret_non_private_read or ' + 'rule:secret_project_creator or ' + 'rule:secret_project_admin or rule:secret_acl_read', check_str='rule:secret_project_admin or ' + 'rule:secret_project_creator or ' + '(rule:secret_project_creator_role and ' + 'rule:secret_non_private_read)', check_str='rule:secret_project_admin or ' + 'rule:secret_project_creator or ' + '(rule:secret_project_creator_role and ' + 'rule:secret_non_private_read)', check_str='rule:secret_project_admin or ' + 'rule:secret_project_creator or ' + '(rule:secret_project_creator_role and ' + 'rule:secret_non_private_read)',"," check_str='rule:all_but_audit', check_str='rule:admin_or_creator', check_str='rule:admin_or_creator', check_str='rule:admin_or_creator',",30,13
openstack%2Fcharm-vault~master~Ie15e885959ad96a064fb14614269d3d19a489005,openstack/charm-vault,master,Ie15e885959ad96a064fb14614269d3d19a489005,Improve root CA handling for action 'disable-pki',ABANDONED,2021-11-02 18:36:11.000000000,2021-11-02 19:30:00.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 18:36:11.000000000', 'files': ['src/actions/actions.py'], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/d445f976aed3d4175503ac94ed351678857db60f', 'message': ""Improve root CA handling for action 'disable-pki'\n\nClear old root CA stored in vault/leader when action 'disable-pki'\nis called\n\nCloses-Bug: #1948989\nChange-Id: Ie15e885959ad96a064fb14614269d3d19a489005\n""}]",1,816392,d445f976aed3d4175503ac94ed351678857db60f,4,2,1,34059,,,0,"Improve root CA handling for action 'disable-pki'

Clear old root CA stored in vault/leader when action 'disable-pki'
is called

Closes-Bug: #1948989
Change-Id: Ie15e885959ad96a064fb14614269d3d19a489005
",git fetch https://review.opendev.org/openstack/charm-vault refs/changes/92/816392/1 && git format-patch -1 --stdout FETCH_HEAD,['src/actions/actions.py'],1,d445f976aed3d4175503ac94ed351678857db60f,bug/1948989, hookenv.leader_set({'root-ca': None}),,1,1
openstack%2Fcharm-octavia~master~I590b4b87a428fd383eb69869bbf641c44007abe1,openstack/charm-octavia,master,I590b4b87a428fd383eb69869bbf641c44007abe1,Do not merge: Testing proposed pocket for LP: #1917475,ABANDONED,2021-10-26 19:20:22.000000000,2021-11-02 19:27:44.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 19:20:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/2ce5f01435087688b558a3ab94e9f15c8f6dd89a', 'message': 'Do not merge: Testing proposed pocket for LP: #1917475\n\nChange-Id: I590b4b87a428fd383eb69869bbf641c44007abe1\n'}, {'number': 2, 'created': '2021-10-26 20:05:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/5f58b8c5ec938e275df94204f2830646ae8cbc25', 'message': 'Do not merge: Testing proposed pocket for LP: #1917475\n\nChange-Id: I590b4b87a428fd383eb69869bbf641c44007abe1\n'}, {'number': 3, 'created': '2021-10-27 13:17:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/c212f2aabee0c7652d862c4f9aab18d96e1367e9', 'message': 'Do not merge: Testing proposed pocket for LP: #1917475\n\nChange-Id: I590b4b87a428fd383eb69869bbf641c44007abe1\n'}, {'number': 4, 'created': '2021-10-29 12:21:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/8be2d097b491c98e66ff0f8cbd78b648eb894fed', 'message': 'Do not merge: Testing proposed pocket for LP: #1917475\n\nChange-Id: I590b4b87a428fd383eb69869bbf641c44007abe1\n'}, {'number': 5, 'created': '2021-10-29 14:52:41.000000000', 'files': ['osci.yaml', 'requirements.txt', 'src/tests/bundles/focal-wallaby-ha.yaml', 'src/tests/bundles/hirsute-wallaby-ha-ovn.yaml', 'src/tests/bundles/hirsute-wallaby-ha.yaml', '.zuul.yaml', 'src/tests/bundles/focal-wallaby-ha-ovn.yaml'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/4290069f25136032378c870a6d52e02cbf58eacb', 'message': 'Do not merge: Testing proposed pocket for LP: #1917475\n\nChange-Id: I590b4b87a428fd383eb69869bbf641c44007abe1\n'}]",14,815543,4290069f25136032378c870a6d52e02cbf58eacb,40,2,5,11805,,,0,"Do not merge: Testing proposed pocket for LP: #1917475

Change-Id: I590b4b87a428fd383eb69869bbf641c44007abe1
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/43/815543/4 && git format-patch -1 --stdout FETCH_HEAD,"['src/tests/bundles/focal-wallaby-ha.yaml', 'src/tests/bundles/hirsute-wallaby-ha-ovn.yaml', 'src/tests/bundles/hirsute-wallaby-ha.yaml', 'src/tests/bundles/focal-wallaby-ha-ovn.yaml']",4,2ce5f01435087688b558a3ab94e9f15c8f6dd89a,bug/1917475, openstack-origin: &openstack-origin cloud:focal-wallaby/proposed, openstack-origin: &openstack-origin cloud:focal-wallaby,4,4
openstack%2Fneutron-lib~master~I1a708cf2935cb10a09c9088abc94bab1a2248157,openstack/neutron-lib,master,I1a708cf2935cb10a09c9088abc94bab1a2248157,Add qos-pps-minimum-rule-alias api-def and api-ref,MERGED,2021-10-22 13:06:04.000000000,2021-11-02 18:55:47.000000000,2021-11-02 18:47:46.000000000,"[{'_account_id': 8313}, {'_account_id': 9708}, {'_account_id': 15554}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-22 13:06:04.000000000', 'files': ['api-ref/source/v2/qos.inc', 'neutron_lib/tests/unit/api/definitions/test_qos_pps_minimum_rule_alias.py', 'neutron_lib/api/definitions/qos_pps_minimum_rule_alias.py', 'neutron_lib/api/definitions/__init__.py', 'releasenotes/notes/qos-pps-minimum-rule-alias-2d0e711bde2aa1e8.yaml', 'neutron_lib/api/definitions/base.py'], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/44de25534daf244ea1d7eb8ef372e1ce3bd687a1', 'message': 'Add qos-pps-minimum-rule-alias api-def and api-ref\n\nIntroduce a new API extension definition to enable GET, PUT\nand DELETE operations on QoS minimum packet rate rule without\nspecifying policy ID.\n\nPartial-Bug: #1922237\nSee-Also: https://review.opendev.org/78523\nChange-Id: I1a708cf2935cb10a09c9088abc94bab1a2248157\n'}]",3,815116,44de25534daf244ea1d7eb8ef372e1ce3bd687a1,9,5,1,33652,,,0,"Add qos-pps-minimum-rule-alias api-def and api-ref

Introduce a new API extension definition to enable GET, PUT
and DELETE operations on QoS minimum packet rate rule without
specifying policy ID.

Partial-Bug: #1922237
See-Also: https://review.opendev.org/78523
Change-Id: I1a708cf2935cb10a09c9088abc94bab1a2248157
",git fetch https://review.opendev.org/openstack/neutron-lib refs/changes/16/815116/1 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/v2/qos.inc', 'neutron_lib/tests/unit/api/definitions/test_qos_pps_minimum_rule_alias.py', 'neutron_lib/api/definitions/qos_pps_minimum_rule_alias.py', 'neutron_lib/api/definitions/__init__.py', 'releasenotes/notes/qos-pps-minimum-rule-alias-2d0e711bde2aa1e8.yaml', 'neutron_lib/api/definitions/base.py']",6,44de25534daf244ea1d7eb8ef372e1ce3bd687a1,bp/qos-minimum-guaranteed-packet-rate," 'qos-pps-minimum', 'qos-pps-minimum-rule-alias',",,132,0
openstack%2Fpuppet-cloudkitty~master~Ida34189343e2202b557e71c214bfe5c01c6759fa,openstack/puppet-cloudkitty,master,Ida34189343e2202b557e71c214bfe5c01c6759fa,Add support for [cors] options,MERGED,2021-11-02 00:51:58.000000000,2021-11-02 18:54:09.000000000,2021-11-02 18:47:49.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 00:51:58.000000000', 'files': ['spec/classes/cloudkitty_cors_spec.rb', 'releasenotes/notes/cors-bb25eb873886e529.yaml', 'manifests/cors.pp'], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/c409f6e2695d64d1e2050ee5150b312ed6df594e', 'message': 'Add support for [cors] options\n\nThis change introduces the new cloudkitty::cors class, which manages\nparameters of the cors middleware from oslo.middleware.\n\nChange-Id: Ida34189343e2202b557e71c214bfe5c01c6759fa\n'}]",0,816255,c409f6e2695d64d1e2050ee5150b312ed6df594e,8,3,1,9816,,,0,"Add support for [cors] options

This change introduces the new cloudkitty::cors class, which manages
parameters of the cors middleware from oslo.middleware.

Change-Id: Ida34189343e2202b557e71c214bfe5c01c6759fa
",git fetch https://review.opendev.org/openstack/puppet-cloudkitty refs/changes/55/816255/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/cloudkitty_cors_spec.rb', 'releasenotes/notes/cors-bb25eb873886e529.yaml', 'manifests/cors.pp']",3,c409f6e2695d64d1e2050ee5150b312ed6df594e,cors,"# == Class: cloudkitty::cors # # Configure the cloudkitty cors # # === Parameters # # [*allowed_origin*] # (Optional) Indicate whether this resource may be shared with the domain # received in the requests ""origin"" header. # (string value) # Defaults to $::os_service_default. # # [*allow_credentials*] # (Optional) Indicate that the actual request can include user credentials. # (boolean value) # Defaults to $::os_service_default. # # [*expose_headers*] # (Optional) Indicate which headers are safe to expose to the API. # (list value) # Defaults to $::os_service_default. # # [*max_age*] # (Optional) Maximum cache age of CORS preflight requests. # (integer value) # Defaults to $::os_service_default. # # [*allow_methods*] # (Optional) Indicate which methods can be used during the actual request. # (list value) # Defaults to $::os_service_default. # # [*allow_headers*] # (Optional) Indicate which header field names may be used during the actual # request. # (list value) # Defaults to $::os_service_default. # class cloudkitty::cors ( $allowed_origin = $::os_service_default, $allow_credentials = $::os_service_default, $expose_headers = $::os_service_default, $max_age = $::os_service_default, $allow_methods = $::os_service_default, $allow_headers = $::os_service_default, ) { include cloudkitty::deps oslo::cors { 'cloudkitty_config': allowed_origin => $allowed_origin, allow_credentials => $allow_credentials, expose_headers => $expose_headers, max_age => $max_age, allow_methods => $allow_methods, allow_headers => $allow_headers, } } ",,115,0
openstack%2Fkuryr-tempest-plugin~master~I64d8596f8d0504eeb898d40be7a11aa6635bca17,openstack/kuryr-tempest-plugin,master,I64d8596f8d0504eeb898d40be7a11aa6635bca17,Ensure lb is ACTIVE before connectivity check,MERGED,2021-10-31 12:59:32.000000000,2021-11-02 18:51:52.000000000,2021-11-02 18:39:23.000000000,"[{'_account_id': 4727}, {'_account_id': 11600}, {'_account_id': 13692}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-31 12:59:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/bb21dcddb5c04285fadf1bf40fc7a854c52a447e', 'message': 'Ensure lb members are configured upon reconciliation\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 2, 'created': '2021-10-31 19:33:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/2981530f76e221f57d4f88a7245eb974bc334754', 'message': 'Ensure lb members are configured upon reconciliation\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 3, 'created': '2021-10-31 22:56:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/004703aad279e21d7bbe0c4c281a1e1f8cc1daa2', 'message': 'Ensure lb members are configured upon reconciliation\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 4, 'created': '2021-11-01 09:58:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/f9be793b37fa6274ded5da430dcc4f61328be115', 'message': 'Ensure lb members are configured upon reconciliation\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 5, 'created': '2021-11-01 13:15:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/8960c70a10ea9d6ef8bf531e74cf02c995fdc817', 'message': 'Ensure lb members are configured upon reconciliation\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 6, 'created': '2021-11-01 17:37:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/b3d14049732d95a7df3cfef86a5eb6e9e2315caf', 'message': 'Ensure lb members are configured upon reconciliation\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 7, 'created': '2021-11-01 17:51:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/50b4bf8febd5150c107f9462e84e2359122da881', 'message': 'Ensure lb members are configured upon reconciliation\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 8, 'created': '2021-11-01 19:53:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/6b2ffd09ec6452a9fa55dc347b84abbaa5d51065', 'message': 'Ensure lb is ACTIVE before connectivity check\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members. Also, it checks if the load balancer is\nACTIVE before checking connectivity.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 9, 'created': '2021-11-01 22:35:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/2be1c5e72ef4a4a344944df5b3917405490e8821', 'message': 'Ensure lb is ACTIVE before connectivity check\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members. Also, it checks if the load balancer is\nACTIVE before checking connectivity.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 10, 'created': '2021-11-02 08:25:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/2c351062d07282bf7e606f531282b009d5701c5d', 'message': 'Ensure lb is ACTIVE before connectivity check\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members. Also, it checks if the load balancer is\nACTIVE before checking connectivity.\n\nDepends-On: https://review.opendev.org/c/openstack/kuryr-kubernetes/+/816305\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}, {'number': 11, 'created': '2021-11-02 11:46:43.000000000', 'files': ['kuryr_tempest_plugin/tests/scenario/test_service.py', '.zuul.yaml', 'kuryr_tempest_plugin/tests/scenario/base.py'], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/89b66e60085ebd7c3492952a3940d88b7c3fb9b7', 'message': 'Ensure lb is ACTIVE before connectivity check\n\nWhen the load balancer reconciliation is triggered\nbesides checking if the current lb ID is different\nfrom the previous lb, the lb members should also be\nconfigured. This commit enforces the existence of the\nlb members. Also, it checks if the load balancer is\nACTIVE before checking connectivity.\n\nNote, that it also removes the tempests gates to avoid\na circular dependency.\n\nChange-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17\n'}]",4,816099,89b66e60085ebd7c3492952a3940d88b7c3fb9b7,33,4,11,27032,,,0,"Ensure lb is ACTIVE before connectivity check

When the load balancer reconciliation is triggered
besides checking if the current lb ID is different
from the previous lb, the lb members should also be
configured. This commit enforces the existence of the
lb members. Also, it checks if the load balancer is
ACTIVE before checking connectivity.

Note, that it also removes the tempests gates to avoid
a circular dependency.

Change-Id: I64d8596f8d0504eeb898d40be7a11aa6635bca17
",git fetch https://review.opendev.org/openstack/kuryr-tempest-plugin refs/changes/99/816099/6 && git format-patch -1 --stdout FETCH_HEAD,"['kuryr_tempest_plugin/tests/scenario/test_service.py', 'kuryr_tempest_plugin/tests/scenario/base.py']",2,bb21dcddb5c04285fadf1bf40fc7a854c52a447e,enforce-members-configured," klb_crd_id = self.get_klb_crd_id(service_name, namespace) LOG.info(""Load balancer %s detail"", klb_crd_id) self.lbaas.get_loadbalancer_status(klb_crd_id) def get_klb_crd_id(self, service_name, svc_namespace='default'): service_name, svc_namespace).get('status', {}).get("," def get_klb_crd_id(self, service_name): service_name, 'default').get('status', {}).get(",16,11
openstack%2Fpuppet-vitrage~master~I136b09b89c70d4c7570723367df97ad9ac80b0a0,openstack/puppet-vitrage,master,I136b09b89c70d4c7570723367df97ad9ac80b0a0,Bump puppetlabs-inifile,MERGED,2021-11-02 04:11:50.000000000,2021-11-02 18:47:55.000000000,2021-11-02 18:47:55.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:11:50.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-vitrage/commit/1ac832328e4f25b51967686734f535d8edb65de4', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I136b09b89c70d4c7570723367df97ad9ac80b0a0\n'}]",0,816291,1ac832328e4f25b51967686734f535d8edb65de4,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I136b09b89c70d4c7570723367df97ad9ac80b0a0
",git fetch https://review.opendev.org/openstack/puppet-vitrage refs/changes/91/816291/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,1ac832328e4f25b51967686734f535d8edb65de4,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-cloudkitty~master~I506153a0bed031a27d06796e6169538272030985,openstack/puppet-cloudkitty,master,I506153a0bed031a27d06796e6169538272030985,Bump puppetlabs-inifile,MERGED,2021-11-02 04:01:04.000000000,2021-11-02 18:47:52.000000000,2021-11-02 18:47:52.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:01:04.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/e06a28f08aa3b94ab91e3239690b427d8708a5cb', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I506153a0bed031a27d06796e6169538272030985\n'}]",0,816267,e06a28f08aa3b94ab91e3239690b427d8708a5cb,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I506153a0bed031a27d06796e6169538272030985
",git fetch https://review.opendev.org/openstack/puppet-cloudkitty refs/changes/67/816267/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,e06a28f08aa3b94ab91e3239690b427d8708a5cb,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-zaqar~master~I5a1eadde2449f176fac8035de346afe53c39e1e4,openstack/puppet-zaqar,master,I5a1eadde2449f176fac8035de346afe53c39e1e4,Bump puppetlabs-inifile,MERGED,2021-11-02 04:12:37.000000000,2021-11-02 18:45:41.000000000,2021-11-02 18:45:41.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:12:37.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-zaqar/commit/3e18f4b9098178ad235b7991511b4b5fe7d48d79', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I5a1eadde2449f176fac8035de346afe53c39e1e4\n'}]",0,816293,3e18f4b9098178ad235b7991511b4b5fe7d48d79,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I5a1eadde2449f176fac8035de346afe53c39e1e4
",git fetch https://review.opendev.org/openstack/puppet-zaqar refs/changes/93/816293/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,3e18f4b9098178ad235b7991511b4b5fe7d48d79,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-watcher~master~Icf549361f955c20769f737da48eab288e3dbd9a9,openstack/puppet-watcher,master,Icf549361f955c20769f737da48eab288e3dbd9a9,Bump puppetlabs-inifile,MERGED,2021-11-02 04:12:15.000000000,2021-11-02 18:45:39.000000000,2021-11-02 18:45:39.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:12:15.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-watcher/commit/ada3f823d1ca867be7f682b611bba80b5cf7fe9e', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Icf549361f955c20769f737da48eab288e3dbd9a9\n'}]",0,816292,ada3f823d1ca867be7f682b611bba80b5cf7fe9e,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Icf549361f955c20769f737da48eab288e3dbd9a9
",git fetch https://review.opendev.org/openstack/puppet-watcher refs/changes/92/816292/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,ada3f823d1ca867be7f682b611bba80b5cf7fe9e,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-sahara~master~I25cf0c0ef78baed5b7dd658afbc2037391750bb8,openstack/puppet-sahara,master,I25cf0c0ef78baed5b7dd658afbc2037391750bb8,Bump puppetlabs-inifile,MERGED,2021-11-02 04:09:47.000000000,2021-11-02 18:45:36.000000000,2021-11-02 18:45:36.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:09:47.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-sahara/commit/85e85562e84a62ead0eafe1298aee728ed7e4fb6', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I25cf0c0ef78baed5b7dd658afbc2037391750bb8\n'}]",0,816285,85e85562e84a62ead0eafe1298aee728ed7e4fb6,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I25cf0c0ef78baed5b7dd658afbc2037391750bb8
",git fetch https://review.opendev.org/openstack/puppet-sahara refs/changes/85/816285/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,85e85562e84a62ead0eafe1298aee728ed7e4fb6,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-trove~master~I4211f4eb704dbc6b9b058fc423ec034cd5ef989c,openstack/puppet-trove,master,I4211f4eb704dbc6b9b058fc423ec034cd5ef989c,Bump puppetlabs-inifile,MERGED,2021-11-02 04:11:29.000000000,2021-11-02 18:40:34.000000000,2021-11-02 18:40:34.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:11:29.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-trove/commit/a60d2fff19e48fd10b69a8722d88ebd318de66eb', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I4211f4eb704dbc6b9b058fc423ec034cd5ef989c\n'}]",0,816290,a60d2fff19e48fd10b69a8722d88ebd318de66eb,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I4211f4eb704dbc6b9b058fc423ec034cd5ef989c
",git fetch https://review.opendev.org/openstack/puppet-trove refs/changes/90/816290/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,a60d2fff19e48fd10b69a8722d88ebd318de66eb,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-tempest~master~Id4de4267551ce847298acbb2f57726c0fdbe9d9f,openstack/puppet-tempest,master,Id4de4267551ce847298acbb2f57726c0fdbe9d9f,Bump puppetlabs-inifile,MERGED,2021-11-02 04:11:11.000000000,2021-11-02 18:40:32.000000000,2021-11-02 18:40:32.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:11:11.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-tempest/commit/24000aafcbe9b281c38badc7391e210233da37cc', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Id4de4267551ce847298acbb2f57726c0fdbe9d9f\n'}]",0,816289,24000aafcbe9b281c38badc7391e210233da37cc,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Id4de4267551ce847298acbb2f57726c0fdbe9d9f
",git fetch https://review.opendev.org/openstack/puppet-tempest refs/changes/89/816289/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,24000aafcbe9b281c38badc7391e210233da37cc,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-senlin~master~I4b57b016c4965bdfa1b8c6f6105c13462b99c632,openstack/puppet-senlin,master,I4b57b016c4965bdfa1b8c6f6105c13462b99c632,Bump puppetlabs-inifile,MERGED,2021-11-02 04:10:09.000000000,2021-11-02 18:40:27.000000000,2021-11-02 18:40:27.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:10:09.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-senlin/commit/4097a0baffa21e7e9694d6ab8c863c4c9ebc8055', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I4b57b016c4965bdfa1b8c6f6105c13462b99c632\n'}]",0,816286,4097a0baffa21e7e9694d6ab8c863c4c9ebc8055,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I4b57b016c4965bdfa1b8c6f6105c13462b99c632
",git fetch https://review.opendev.org/openstack/puppet-senlin refs/changes/86/816286/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,4097a0baffa21e7e9694d6ab8c863c4c9ebc8055,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-rally~master~Ia2c73223db0506d09b5a1d180f19a481aecd08cf,openstack/puppet-rally,master,Ia2c73223db0506d09b5a1d180f19a481aecd08cf,Bump puppetlabs-inifile,MERGED,2021-11-02 04:09:27.000000000,2021-11-02 18:40:25.000000000,2021-11-02 18:40:25.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:09:27.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-rally/commit/7c7bb865b7e0e4d8e06a660fc657bbd668ca846b', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Ia2c73223db0506d09b5a1d180f19a481aecd08cf\n'}]",0,816284,7c7bb865b7e0e4d8e06a660fc657bbd668ca846b,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Ia2c73223db0506d09b5a1d180f19a481aecd08cf
",git fetch https://review.opendev.org/openstack/puppet-rally refs/changes/84/816284/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,7c7bb865b7e0e4d8e06a660fc657bbd668ca846b,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-openstacklib~master~I0e8664f9e9b0eaedaf6405e920f65cf496388e3e,openstack/puppet-openstacklib,master,I0e8664f9e9b0eaedaf6405e920f65cf496388e3e,Bump puppetlabs-inifile,MERGED,2021-11-02 04:07:55.000000000,2021-11-02 18:33:55.000000000,2021-11-02 18:33:55.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:07:55.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/3d397fc10c57c1332f0ff0433dc98ebbce7b6305', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I0e8664f9e9b0eaedaf6405e920f65cf496388e3e\n'}]",0,816282,3d397fc10c57c1332f0ff0433dc98ebbce7b6305,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I0e8664f9e9b0eaedaf6405e920f65cf496388e3e
",git fetch https://review.opendev.org/openstack/puppet-openstacklib refs/changes/82/816282/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,3d397fc10c57c1332f0ff0433dc98ebbce7b6305,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-murano~master~If9ce2182cc198fbd753227b09cf3ac798b102d8f,openstack/puppet-murano,master,If9ce2182cc198fbd753227b09cf3ac798b102d8f,Bump puppetlabs-inifile,MERGED,2021-11-02 04:06:16.000000000,2021-11-02 18:33:52.000000000,2021-11-02 18:33:52.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:06:16.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-murano/commit/5e85bc045a2e94c6808de1492c2cca661941806e', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: If9ce2182cc198fbd753227b09cf3ac798b102d8f\n'}]",0,816278,5e85bc045a2e94c6808de1492c2cca661941806e,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: If9ce2182cc198fbd753227b09cf3ac798b102d8f
",git fetch https://review.opendev.org/openstack/puppet-murano refs/changes/78/816278/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,5e85bc045a2e94c6808de1492c2cca661941806e,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-mistral~master~Ic177bab0c030e5867757f8134c1377eea2117c9d,openstack/puppet-mistral,master,Ic177bab0c030e5867757f8134c1377eea2117c9d,Bump puppetlabs-inifile,MERGED,2021-11-02 04:05:35.000000000,2021-11-02 18:33:50.000000000,2021-11-02 18:33:50.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:05:35.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-mistral/commit/ad5ad271d2b7e39588f9c9cbfa00886abdca1070', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Ic177bab0c030e5867757f8134c1377eea2117c9d\n'}]",0,816277,ad5ad271d2b7e39588f9c9cbfa00886abdca1070,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Ic177bab0c030e5867757f8134c1377eea2117c9d
",git fetch https://review.opendev.org/openstack/puppet-mistral refs/changes/77/816277/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,ad5ad271d2b7e39588f9c9cbfa00886abdca1070,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-manila~master~I8705fc18ec25dea0184cd6451b81359cd1256d57,openstack/puppet-manila,master,I8705fc18ec25dea0184cd6451b81359cd1256d57,Bump puppetlabs-inifile,MERGED,2021-11-02 04:04:57.000000000,2021-11-02 18:33:47.000000000,2021-11-02 18:33:47.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:04:57.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-manila/commit/8a83a33ffd802e0a86395cd143effb4c50a2a106', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I8705fc18ec25dea0184cd6451b81359cd1256d57\n'}]",0,816276,8a83a33ffd802e0a86395cd143effb4c50a2a106,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I8705fc18ec25dea0184cd6451b81359cd1256d57
",git fetch https://review.opendev.org/openstack/puppet-manila refs/changes/76/816276/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,8a83a33ffd802e0a86395cd143effb4c50a2a106,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Ftripleo-common~stable%2Ftrain~I647212442c378aabbd1887a0b499c19bbc74b5f7,openstack/tripleo-common,stable/train,I647212442c378aabbd1887a0b499c19bbc74b5f7,Update container build to better reign in threads,ABANDONED,2020-09-16 21:28:22.000000000,2021-11-02 18:33:20.000000000,,"[{'_account_id': 3153}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-09-16 21:28:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/2ce03224e5231f050e074807416a5b92ad5a57e7', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n""}, {'number': 2, 'created': '2020-09-16 21:30:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/6a5091761ab15b5b96eaf739d3f905aa22926b2f', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n""}, {'number': 3, 'created': '2020-09-25 12:16:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/6073a6022500b2eb35f9b13bb666ba888309db31', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n""}, {'number': 4, 'created': '2020-09-29 21:53:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/dbf77da00dd637b46948dff490f1e933729aa2a5', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n""}, {'number': 5, 'created': '2020-10-01 14:05:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/2549cfc258143bac327a91c30b1af35fe7267a45', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n""}, {'number': 6, 'created': '2020-10-07 12:24:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/423e3e236c418362310bf4295e22d95cfaf81fa0', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n""}, {'number': 7, 'created': '2020-10-27 20:06:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/3e59db8dcf8a5e59f065df23e7f427e3a15adbb2', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n(cherry picked from commit 10e5e6cc2a31b288564dd227b4681c4fc2fb8530)\n""}, {'number': 8, 'created': '2020-10-27 20:16:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/402e6e1a91b78b8a338f0811b9cb1c6de2549025', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n(cherry picked from commit 10e5e6cc2a31b288564dd227b4681c4fc2fb8530)\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 9, 'created': '2020-12-07 13:55:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/409de488ac850e96acfd24db27a45e59575c756d', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n(cherry picked from commit 10e5e6cc2a31b288564dd227b4681c4fc2fb8530)\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 10, 'created': '2021-07-29 14:44:10.000000000', 'files': ['tripleo_common/image/builder/buildah.py', 'tripleo_common/tests/image/builder/test_buildah.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/5edf9eb0ddb7f40d89f848de0d2801ac6889a803', 'message': ""Update container build to better reign in threads\n\nThis restructures the buildah build process to ensure we're\nmanaging our thread pool correctly and not spawing more\nthreads than needed or expected. By updating the thread\nprocess we'll ensure we're building each container only\nonce and that we're maintaining build order.\n\nTests have been added to ensure the new methods are called,\nand that the data processing is consistent.\n\nCloses-Bug: #1894856\nChange-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)\n(cherry picked from commit 10e5e6cc2a31b288564dd227b4681c4fc2fb8530)\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}]",4,752324,5edf9eb0ddb7f40d89f848de0d2801ac6889a803,67,6,10,3153,,,0,"Update container build to better reign in threads

This restructures the buildah build process to ensure we're
managing our thread pool correctly and not spawing more
threads than needed or expected. By updating the thread
process we'll ensure we're building each container only
once and that we're maintaining build order.

Tests have been added to ensure the new methods are called,
and that the data processing is consistent.

Closes-Bug: #1894856
Change-Id: I647212442c378aabbd1887a0b499c19bbc74b5f7
Signed-off-by: Kevin Carter <kecarter@redhat.com>
(cherry picked from commit 16ff908a2d8638a200bb0d40e043de411d52d2f0)
(cherry picked from commit 10e5e6cc2a31b288564dd227b4681c4fc2fb8530)
Signed-off-by: Kevin Carter <kecarter@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/24/752324/10 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_common/image/builder/buildah.py', 'tripleo_common/tests/image/builder/test_buildah.py']",2,2ce03224e5231f050e074807416a5b92ad5a57e7,thread/train,"PREPROCESSED_CONTAINER_DEPS = [ { ""image0"": [ ""image1"", { ""image2"": [ { ""image3"": [ ""image4"", ""image5"" ] }, ""image8"", { ""image6"": [ ""image7"" ] }, ""image9"" ] }, { ""image10"": [ ""image11"", ""image12"" ] }, ""image13"", ""image14"" ] } ] def test_dep_processing(self): containers = list() self.assertEqual( bb(WORK_DIR, DEPS)._generate_deps( deps=PREPROCESSED_CONTAINER_DEPS, containers=containers ), [ [ 'image0' ], [ 'image1', 'image13', 'image14', 'image2', 'image10' ], [ 'image8', 'image9', 'image3', 'image6' ], [ 'image4', 'image5' ], [ 'image7' ], [ 'image11', 'image12' ] ] ) @mock.patch( 'tripleo_common.image.builder.buildah.BuildahBuilder._multi_build', autospec=True ) def test_build_all_multi_build(self, mock_multi_build): bb(WORK_DIR, DEPS).build_all(deps=BUILD_ALL_LIST_CONTAINERS) self.assertTrue(mock_multi_build.called)",,220,60
openstack%2Fpuppet-octavia~master~I69d1ec63e826d7096024528b71ffa641f8ccea41,openstack/puppet-octavia,master,I69d1ec63e826d7096024528b71ffa641f8ccea41,Bump puppetlabs-inifile,MERGED,2021-11-02 04:07:25.000000000,2021-11-02 18:32:03.000000000,2021-11-02 18:32:03.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:07:25.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-octavia/commit/612142e30ef1568dd5c75970a5636c2a4872a8db', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I69d1ec63e826d7096024528b71ffa641f8ccea41\n'}]",0,816281,612142e30ef1568dd5c75970a5636c2a4872a8db,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I69d1ec63e826d7096024528b71ffa641f8ccea41
",git fetch https://review.opendev.org/openstack/puppet-octavia refs/changes/81/816281/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,612142e30ef1568dd5c75970a5636c2a4872a8db,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-nova~master~I628ea6272ec411e59d6ca0df56d6258d4bc91aa9,openstack/puppet-nova,master,I628ea6272ec411e59d6ca0df56d6258d4bc91aa9,Bump puppetlabs-inifile,MERGED,2021-11-02 04:07:04.000000000,2021-11-02 18:32:00.000000000,2021-11-02 18:32:00.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:07:04.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-nova/commit/6871350b47eb92441728a365ef224106640afece', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I628ea6272ec411e59d6ca0df56d6258d4bc91aa9\n'}]",0,816280,6871350b47eb92441728a365ef224106640afece,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I628ea6272ec411e59d6ca0df56d6258d4bc91aa9
",git fetch https://review.opendev.org/openstack/puppet-nova refs/changes/80/816280/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,6871350b47eb92441728a365ef224106640afece,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-magnum~master~I1cc90db1f4fb77290072217bc257b65332d622cc,openstack/puppet-magnum,master,I1cc90db1f4fb77290072217bc257b65332d622cc,Bump puppetlabs-inifile,MERGED,2021-11-02 04:04:30.000000000,2021-11-02 18:31:57.000000000,2021-11-02 18:31:57.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:04:30.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-magnum/commit/1faacc8c68ed85e2eba3dbddcc673d9413762908', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I1cc90db1f4fb77290072217bc257b65332d622cc\n'}]",0,816275,1faacc8c68ed85e2eba3dbddcc673d9413762908,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I1cc90db1f4fb77290072217bc257b65332d622cc
",git fetch https://review.opendev.org/openstack/puppet-magnum refs/changes/75/816275/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,1faacc8c68ed85e2eba3dbddcc673d9413762908,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-ceilometer~master~I03c3f2a90aecad04c2430bb25ddddd6b81e70b4d,openstack/puppet-ceilometer,master,I03c3f2a90aecad04c2430bb25ddddd6b81e70b4d,Bump puppetlabs-inifile,MERGED,2021-11-02 03:59:23.000000000,2021-11-02 18:31:54.000000000,2021-11-02 18:31:54.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 03:59:23.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-ceilometer/commit/d481b0cec1211529ff70044b728d576c97f71a25', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I03c3f2a90aecad04c2430bb25ddddd6b81e70b4d\n'}]",0,816265,d481b0cec1211529ff70044b728d576c97f71a25,9,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I03c3f2a90aecad04c2430bb25ddddd6b81e70b4d
",git fetch https://review.opendev.org/openstack/puppet-ceilometer refs/changes/65/816265/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,d481b0cec1211529ff70044b728d576c97f71a25,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-gnocchi~master~Ieb597ba1ea860aca4591ee5f2586ab8cebe968e9,openstack/puppet-gnocchi,master,Ieb597ba1ea860aca4591ee5f2586ab8cebe968e9,Bump puppetlabs-inifile,MERGED,2021-11-02 04:02:45.000000000,2021-11-02 18:30:18.000000000,2021-11-02 18:30:18.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:02:45.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-gnocchi/commit/908b8b64564e6a66bbc80e406f1261471d58ac44', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Ieb597ba1ea860aca4591ee5f2586ab8cebe968e9\n'}]",0,816271,908b8b64564e6a66bbc80e406f1261471d58ac44,8,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Ieb597ba1ea860aca4591ee5f2586ab8cebe968e9
",git fetch https://review.opendev.org/openstack/puppet-gnocchi refs/changes/71/816271/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,908b8b64564e6a66bbc80e406f1261471d58ac44,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-barbican~master~I6ca9efbfcf07c72cc8611acdcda8f090e3b7729e,openstack/puppet-barbican,master,I6ca9efbfcf07c72cc8611acdcda8f090e3b7729e,Bump puppetlabs-inifile,MERGED,2021-11-02 03:59:00.000000000,2021-11-02 18:30:15.000000000,2021-11-02 18:30:15.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 03:59:00.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-barbican/commit/044c41507deb790cc453261950f957103398f067', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I6ca9efbfcf07c72cc8611acdcda8f090e3b7729e\n'}]",0,816264,044c41507deb790cc453261950f957103398f067,9,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I6ca9efbfcf07c72cc8611acdcda8f090e3b7729e
",git fetch https://review.opendev.org/openstack/puppet-barbican refs/changes/64/816264/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,044c41507deb790cc453261950f957103398f067,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-neutron~master~I4f372fc42b186ae6384fb3a13e796410d19f3241,openstack/puppet-neutron,master,I4f372fc42b186ae6384fb3a13e796410d19f3241,Bump puppetlabs-inifile,MERGED,2021-11-02 04:06:36.000000000,2021-11-02 18:29:07.000000000,2021-11-02 18:29:07.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:06:36.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/9d3e6a7390b1fdc5a32a0efcec036b065f8b6904', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I4f372fc42b186ae6384fb3a13e796410d19f3241\n'}]",0,816279,9d3e6a7390b1fdc5a32a0efcec036b065f8b6904,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I4f372fc42b186ae6384fb3a13e796410d19f3241
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/79/816279/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,9d3e6a7390b1fdc5a32a0efcec036b065f8b6904,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-keystone~master~If2124d9a60f8e4e401ecc06094f3bae2b8446ff6,openstack/puppet-keystone,master,If2124d9a60f8e4e401ecc06094f3bae2b8446ff6,Bump puppetlabs-inifile,MERGED,2021-11-02 04:04:09.000000000,2021-11-02 18:29:04.000000000,2021-11-02 18:29:04.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:04:09.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/c831be8c4ec625c1750b194e6bed933a0e1524f6', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: If2124d9a60f8e4e401ecc06094f3bae2b8446ff6\n'}]",0,816274,c831be8c4ec625c1750b194e6bed933a0e1524f6,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: If2124d9a60f8e4e401ecc06094f3bae2b8446ff6
",git fetch https://review.opendev.org/openstack/puppet-keystone refs/changes/74/816274/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,c831be8c4ec625c1750b194e6bed933a0e1524f6,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-ironic~master~Ic0c820e08b77b9067406425b9e98ee7e16d88cbd,openstack/puppet-ironic,master,Ic0c820e08b77b9067406425b9e98ee7e16d88cbd,Bump puppetlabs-inifile,MERGED,2021-11-02 04:03:41.000000000,2021-11-02 18:29:01.000000000,2021-11-02 18:29:01.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:03:41.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/97c75c540f75ec524fbf00c9b0bc0b7c62228b4a', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Ic0c820e08b77b9067406425b9e98ee7e16d88cbd\n'}]",0,816273,97c75c540f75ec524fbf00c9b0bc0b7c62228b4a,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Ic0c820e08b77b9067406425b9e98ee7e16d88cbd
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/73/816273/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,97c75c540f75ec524fbf00c9b0bc0b7c62228b4a,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-heat~master~Idf1a5bcea57b81851a766e82d3a2301ffcff4ae9,openstack/puppet-heat,master,Idf1a5bcea57b81851a766e82d3a2301ffcff4ae9,Bump puppetlabs-inifile,MERGED,2021-11-02 04:03:06.000000000,2021-11-02 18:27:00.000000000,2021-11-02 18:27:00.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:03:06.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-heat/commit/06fae4a81294be3432a6132bfe71066b1e897735', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Idf1a5bcea57b81851a766e82d3a2301ffcff4ae9\n'}]",0,816272,06fae4a81294be3432a6132bfe71066b1e897735,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Idf1a5bcea57b81851a766e82d3a2301ffcff4ae9
",git fetch https://review.opendev.org/openstack/puppet-heat refs/changes/72/816272/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,06fae4a81294be3432a6132bfe71066b1e897735,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-cinder~master~Ib5f591700358d7dc9a1cf63e73b2aeff547b5c65,openstack/puppet-cinder,master,Ib5f591700358d7dc9a1cf63e73b2aeff547b5c65,Bump puppetlabs-inifile,MERGED,2021-11-02 04:00:34.000000000,2021-11-02 18:25:38.000000000,2021-11-02 18:25:38.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:00:34.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-cinder/commit/a13b9b0e7f49299506614dadea865cf44514eace', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Ib5f591700358d7dc9a1cf63e73b2aeff547b5c65\n'}]",0,816266,a13b9b0e7f49299506614dadea865cf44514eace,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Ib5f591700358d7dc9a1cf63e73b2aeff547b5c65
",git fetch https://review.opendev.org/openstack/puppet-cinder refs/changes/66/816266/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,a13b9b0e7f49299506614dadea865cf44514eace,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-glance~master~I38ec555dec8493d4afc9e17dc9d7599ee8a35ffe,openstack/puppet-glance,master,I38ec555dec8493d4afc9e17dc9d7599ee8a35ffe,Bump puppetlabs-inifile,MERGED,2021-11-02 04:02:22.000000000,2021-11-02 18:25:35.000000000,2021-11-02 18:25:35.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:02:22.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-glance/commit/ede045fe6bb80df4452b2804a016f6077c213dcc', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I38ec555dec8493d4afc9e17dc9d7599ee8a35ffe\n'}]",0,816270,ede045fe6bb80df4452b2804a016f6077c213dcc,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I38ec555dec8493d4afc9e17dc9d7599ee8a35ffe
",git fetch https://review.opendev.org/openstack/puppet-glance refs/changes/70/816270/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,ede045fe6bb80df4452b2804a016f6077c213dcc,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-ec2api~master~Id4ecd8f8b4a5338ed9d0e35076ff70b94550728b,openstack/puppet-ec2api,master,Id4ecd8f8b4a5338ed9d0e35076ff70b94550728b,Bump puppetlabs-inifile,MERGED,2021-11-02 04:01:52.000000000,2021-11-02 18:24:42.000000000,2021-11-02 18:24:42.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:01:52.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-ec2api/commit/036b6094fa94391549f7b1b5404b6212d17d1e99', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Id4ecd8f8b4a5338ed9d0e35076ff70b94550728b\n'}]",0,816269,036b6094fa94391549f7b1b5404b6212d17d1e99,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Id4ecd8f8b4a5338ed9d0e35076ff70b94550728b
",git fetch https://review.opendev.org/openstack/puppet-ec2api refs/changes/69/816269/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,036b6094fa94391549f7b1b5404b6212d17d1e99,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-designate~master~I7957bde39981ea86059defb59a7a4005195dbf39,openstack/puppet-designate,master,I7957bde39981ea86059defb59a7a4005195dbf39,Bump puppetlabs-inifile,MERGED,2021-11-02 04:01:30.000000000,2021-11-02 18:24:40.000000000,2021-11-02 18:24:40.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 04:01:30.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/57d23ba24dbb72f9aaa0db74b2a4c93e9594b396', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I7957bde39981ea86059defb59a7a4005195dbf39\n'}]",0,816268,57d23ba24dbb72f9aaa0db74b2a4c93e9594b396,7,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I7957bde39981ea86059defb59a7a4005195dbf39
",git fetch https://review.opendev.org/openstack/puppet-designate refs/changes/68/816268/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,57d23ba24dbb72f9aaa0db74b2a4c93e9594b396,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-aodh~master~Icf66d24b819acea70e167067b7f6b82375841eb2,openstack/puppet-aodh,master,Icf66d24b819acea70e167067b7f6b82375841eb2,Bump puppetlabs-inifile,MERGED,2021-11-02 03:58:30.000000000,2021-11-02 18:22:02.000000000,2021-11-02 18:22:02.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 03:58:30.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-aodh/commit/4ccba173f954f5f7ca6b68ac2f693d0f3b40adf3', 'message': 'Bump puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Icf66d24b819acea70e167067b7f6b82375841eb2\n'}]",0,816263,4ccba173f954f5f7ca6b68ac2f693d0f3b40adf3,9,3,1,9816,,,0,"Bump puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Icf66d24b819acea70e167067b7f6b82375841eb2
",git fetch https://review.opendev.org/openstack/puppet-aodh refs/changes/63/816263/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,4ccba173f954f5f7ca6b68ac2f693d0f3b40adf3,puppetlabs-inifile," ""version_requirement"": "">=2.0.0 <6.0.0"""," ""version_requirement"": "">=2.0.0 <3.0.0""",1,1
openstack%2Fpuppet-glance~stable%2Fwallaby~I1402f72fa58f617ccb1e92caa774ca15a6133c58,openstack/puppet-glance,stable/wallaby,I1402f72fa58f617ccb1e92caa774ca15a6133c58,Swift backend: Use Keystone v3 API by default,MERGED,2021-11-02 13:00:39.000000000,2021-11-02 18:19:05.000000000,2021-11-02 18:13:17.000000000,"[{'_account_id': 16137}, {'_account_id': 21129}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 13:00:39.000000000', 'files': ['releasenotes/notes/bug-1947816-75538e8fd13e59c6.yaml', 'manifests/backend/swift.pp', 'spec/defines/glance_backend_multistore_swift_spec.rb', 'spec/classes/glance_backend_swift_spec.rb', 'manifests/backend/multistore/swift.pp'], 'web_link': 'https://opendev.org/openstack/puppet-glance/commit/994a38cc577d2d32a6d172cecb7e605e0c212a5f', 'message': 'Swift backend: Use Keystone v3 API by default\n\n... because v2 API was removed a long ago and is no longer available.\n\nCloses-Bug: #1947816\nChange-Id: I1402f72fa58f617ccb1e92caa774ca15a6133c58\n(cherry picked from commit 8a70cf5dea0f64ce03a7a3cbc6f4a90552c4b08a)\n(cherry picked from commit 628d73128918bee6a767d80e7b75da08680d26b7)\n'}]",0,816333,994a38cc577d2d32a6d172cecb7e605e0c212a5f,8,3,1,9816,,,0,"Swift backend: Use Keystone v3 API by default

... because v2 API was removed a long ago and is no longer available.

Closes-Bug: #1947816
Change-Id: I1402f72fa58f617ccb1e92caa774ca15a6133c58
(cherry picked from commit 8a70cf5dea0f64ce03a7a3cbc6f4a90552c4b08a)
(cherry picked from commit 628d73128918bee6a767d80e7b75da08680d26b7)
",git fetch https://review.opendev.org/openstack/puppet-glance refs/changes/33/816333/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1947816-75538e8fd13e59c6.yaml', 'manifests/backend/swift.pp', 'spec/defines/glance_backend_multistore_swift_spec.rb', 'spec/classes/glance_backend_swift_spec.rb', 'manifests/backend/multistore/swift.pp']",5,994a38cc577d2d32a6d172cecb7e605e0c212a5f,bug/1947816-stable/wallaby,"# Optional. Default: '3' $swift_store_auth_version = '3',","# Optional. Default: '2' $swift_store_auth_version = '2',",12,6
openstack%2Fpython-keystoneclient~master~I67b8981b211c5d15154c919ea6f4f75639863437,openstack/python-keystoneclient,master,I67b8981b211c5d15154c919ea6f4f75639863437,Drop lower-constrait job,MERGED,2021-04-05 07:16:15.000000000,2021-11-02 18:17:16.000000000,2021-11-02 18:06:15.000000000,"[{'_account_id': 5046}, {'_account_id': 8648}, {'_account_id': 16465}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-04-05 07:16:15.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/python-keystoneclient/commit/0c4e2940ff709d47dd1ea7ffe34b70d451c67434', 'message': ""Drop lower-constrait job\n\nLower-constraints is not required and has been dropped from Keystone\nbecause of an issue with the new dependency resolver in pip[1].\nThe job is currently broken so let's disable it to unblock gate first.\n\n[1] d6610594d1b766a8ee3ac65182b951f2a3d431f7\n\nChange-Id: I67b8981b211c5d15154c919ea6f4f75639863437\n""}]",1,784744,0c4e2940ff709d47dd1ea7ffe34b70d451c67434,10,5,1,9816,,,0,"Drop lower-constrait job

Lower-constraints is not required and has been dropped from Keystone
because of an issue with the new dependency resolver in pip[1].
The job is currently broken so let's disable it to unblock gate first.

[1] d6610594d1b766a8ee3ac65182b951f2a3d431f7

Change-Id: I67b8981b211c5d15154c919ea6f4f75639863437
",git fetch https://review.opendev.org/openstack/python-keystoneclient refs/changes/44/784744/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,0c4e2940ff709d47dd1ea7ffe34b70d451c67434,drop-lc,, - openstack-lower-constraints-jobs,0,1
openstack%2Fkolla~master~Id24458cd655aeace0e745c512aa7890b3edda51c,openstack/kolla,master,Id24458cd655aeace0e745c512aa7890b3edda51c,gnocchi: do not install cradox,MERGED,2021-11-01 13:29:43.000000000,2021-11-02 18:16:27.000000000,2021-11-02 18:05:11.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-11-01 13:29:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/556f304268cb7f576a261c8ddfd9c7d0a20a78fd', 'message': 'gnocchi: do not install cradox\n\nProject description says:\n\n/!DON’T USE IT, but use upstream python-rados, except you really can’t /!\n\nAlso installing it created errors which are silently ignored.\n\nChange-Id: Id24458cd655aeace0e745c512aa7890b3edda51c\n'}, {'number': 2, 'created': '2021-11-02 11:04:50.000000000', 'files': ['docker/gnocchi/gnocchi-base/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/1b41f2e682f15dd5f3eb0fb09d61c35f18607bb8', 'message': 'gnocchi: do not install cradox\n\nProject description says:\n\n/!DON’T USE IT, but use upstream python-rados, except you really can’t /!\n\nAlso installing it created errors which are silently ignored.\n\nChange-Id: Id24458cd655aeace0e745c512aa7890b3edda51c\n'}]",5,816170,1b41f2e682f15dd5f3eb0fb09d61c35f18607bb8,17,3,2,24072,,,0,"gnocchi: do not install cradox

Project description says:

/!DON’T USE IT, but use upstream python-rados, except you really can’t /!

Also installing it created errors which are silently ignored.

Change-Id: Id24458cd655aeace0e745c512aa7890b3edda51c
",git fetch https://review.opendev.org/openstack/kolla refs/changes/70/816170/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/gnocchi/gnocchi-base/Dockerfile.j2'],1,556f304268cb7f576a261c8ddfd9c7d0a20a78fd,some-debian-cleanups, {% endif %},"{{ macros.install_packages(gnocchi_base_packages | customizable(""packages"")) }} {% set gnocchi_base_pip_packages = [ 'cradox' ] %}RUN {{ macros.install_pip(gnocchi_base_pip_packages | customizable(""pip_packages""), constraints=false) }} {% endif %}",1,7
openstack%2Fdevstack~master~Ie6d807c46b88b16b316aa166870a6a13f2bb346d,openstack/devstack,master,Ie6d807c46b88b16b316aa166870a6a13f2bb346d,Create clouds.yaml early enough,MERGED,2021-10-15 13:07:37.000000000,2021-11-02 18:05:20.000000000,2021-11-02 17:54:37.000000000,"[{'_account_id': 5046}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-15 13:07:37.000000000', 'files': ['stack.sh'], 'web_link': 'https://opendev.org/openstack/devstack/commit/84901f563ef6b5d93a00a89f9cdb41a0380d493e', 'message': 'Create clouds.yaml early enough\n\nWhen using glance limits, the create_glance_accounts call needs access\nto the devstack-system-admin cloud definition, so we need to create\nthe clouds.yaml file before that step.\n\nChange-Id: Ie6d807c46b88b16b316aa166870a6a13f2bb346d\nSigned-off-by: Dr. Jens Harbott <harbott@osism.tech>\n'}]",1,814142,84901f563ef6b5d93a00a89f9cdb41a0380d493e,9,4,1,13252,,,0,"Create clouds.yaml early enough

When using glance limits, the create_glance_accounts call needs access
to the devstack-system-admin cloud definition, so we need to create
the clouds.yaml file before that step.

Change-Id: Ie6d807c46b88b16b316aa166870a6a13f2bb346d
Signed-off-by: Dr. Jens Harbott <harbott@osism.tech>
",git fetch https://review.opendev.org/openstack/devstack refs/changes/42/814142/1 && git format-patch -1 --stdout FETCH_HEAD,['stack.sh'],1,84901f563ef6b5d93a00a89f9cdb41a0380d493e,fix-account-creation,# Write a clouds.yaml file write_clouds_yaml ,# Write a clouds.yaml file write_clouds_yaml ,3,3
openstack%2Fos-ken~master~I0e5902c4b13ab11f45f44bb9d9d9540d9630c9bb,openstack/os-ken,master,I0e5902c4b13ab11f45f44bb9d9d9540d9630c9bb,Msgpack version upgrade to 1.0.0,MERGED,2021-10-28 08:02:08.000000000,2021-11-02 17:55:36.000000000,2021-11-02 17:50:16.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 08:02:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-ken/commit/f5dcdc9942091dbadb159c1230e46f361bd2a534', 'message': 'Msgpack version upgrade to 1.0.0\n\n* Encoding parameter is removed. UTF-8 is used always. [0]\n* strict_map_key is changed to False to keep the older behaviour.\n  Default is changed to True in 1.0.0\n\nSigned-off-by: Manu B <manu.b@est.tech>\n\n[0]: https://github.com/msgpack/msgpack-python#major-breaking-changes-in-msgpack-10\n\nChange-Id: I0e5902c4b13ab11f45f44bb9d9d9540d9630c9bb\n'}, {'number': 2, 'created': '2021-10-28 09:41:31.000000000', 'files': ['os_ken/services/protocols/bgp/net_ctrl.py', 'requirements.txt', 'os_ken/lib/rpc.py', 'tools/pip-requires', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/os-ken/commit/4468605ff6d82716d421d4a8d587e861f7afdbb0', 'message': 'Msgpack version upgrade to 1.0.0\n\n* Encoding parameter is removed. UTF-8 is used always. [0]\n* strict_map_key is changed to False to keep the older behaviour.\n  Default is changed to True in 1.0.0\n\nSigned-off-by: Manu B <manu.b@est.tech>\n\n[0]: https://github.com/msgpack/msgpack-python#major-breaking-changes-in-msgpack-10\n\nChange-Id: I0e5902c4b13ab11f45f44bb9d9d9540d9630c9bb\n'}]",0,815784,4468605ff6d82716d421d4a8d587e861f7afdbb0,12,4,2,33273,,,0,"Msgpack version upgrade to 1.0.0

* Encoding parameter is removed. UTF-8 is used always. [0]
* strict_map_key is changed to False to keep the older behaviour.
  Default is changed to True in 1.0.0

Signed-off-by: Manu B <manu.b@est.tech>

[0]: https://github.com/msgpack/msgpack-python#major-breaking-changes-in-msgpack-10

Change-Id: I0e5902c4b13ab11f45f44bb9d9d9540d9630c9bb
",git fetch https://review.opendev.org/openstack/os-ken refs/changes/84/815784/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_ken/services/protocols/bgp/net_ctrl.py', 'requirements.txt', 'os_ken/lib/rpc.py', 'lower-constraints.txt']",4,f5dcdc9942091dbadb159c1230e46f361bd2a534,,msgpack==1.0.0,msgpack==0.5.0,6,6
openstack%2Fironic~master~I817c5cb0469af2cea8d6afd34d16909433716f43,openstack/ironic,master,I817c5cb0469af2cea8d6afd34d16909433716f43,Document commands to leave WAIT states,MERGED,2021-11-02 15:15:04.000000000,2021-11-02 17:52:57.000000000,2021-11-02 17:45:17.000000000,"[{'_account_id': 11292}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-11-02 15:15:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/31389ca1fc57b5b29ad10f7769eec9e6a7e567d9', 'message': 'Document commands to leave WAIT states\n\nChange-Id: I817c5cb0469af2cea8d6afd34d16909433716f43\n'}, {'number': 2, 'created': '2021-11-02 15:52:32.000000000', 'files': ['doc/source/admin/troubleshooting.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/4bb7e537386811189b9f519b2f51588d5caef94c', 'message': 'Document commands to leave WAIT states\n\nChange-Id: I817c5cb0469af2cea8d6afd34d16909433716f43\n'}]",1,816365,4bb7e537386811189b9f519b2f51588d5caef94c,10,3,2,10239,,,0,"Document commands to leave WAIT states

Change-Id: I817c5cb0469af2cea8d6afd34d16909433716f43
",git fetch https://review.opendev.org/openstack/ironic refs/changes/65/816365/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/troubleshooting.rst'],1,31389ca1fc57b5b29ad10f7769eec9e6a7e567d9,abort-command,"Stopping the operation ---------------------- Cleaning, inspection and rescuing can be stopped using the ``abort`` command. It will move the node to the corresponding failure state (``clean failed``, ``inspect failed`` or ``rescue failed``):: baremetal node abort <node> Deploying can be aborted by starting an undeploy (normally resulting in cleaning):: baremetal node undeploy <node> See :doc:`/user/states` for more details. ",,16,0
openstack%2Fopenstack-helm~master~I72275f3cf59ca8c1677922ca3b6f2e10b5578ab0,openstack/openstack-helm,master,I72275f3cf59ca8c1677922ca3b6f2e10b5578ab0,Fix nova-bootstrap job labels,MERGED,2021-11-02 06:03:46.000000000,2021-11-02 17:48:29.000000000,2021-11-02 17:41:27.000000000,"[{'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}]","[{'number': 1, 'created': '2021-11-02 06:03:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/0185a23676cd73a4b81c3829d6909ee2c5959fb2', 'message': 'Fix nova-bootstrap job labels\n\nSimilar to earlier changes [0] [1], this change ensures that the labels\nfor the nova-boostrap job are consistently applied under .metadata and\n.spec.template.metadata.\n\nUnfortunately, there was a conflict in the ""application"" label that was\nunresolvable in a backwards-compatible way.\n\n    metadata:\n      labels:\n        application: nova-bootstrap\n    spec:\n      template:\n        metadata:\n          labels:\n            application: nova\n            ...\n\nThe standard helm-toolkit labels are now applied in both places, and the\napplication: nova-bootstrap label is removed.\n\n0: https://review.opendev.org/c/openstack/openstack-helm/+/812233\n1: https://review.opendev.org/c/openstack/openstack-helm/+/813300\n\nChange-Id: I72275f3cf59ca8c1677922ca3b6f2e10b5578ab0\n'}, {'number': 2, 'created': '2021-11-02 14:38:19.000000000', 'files': ['nova/templates/job-bootstrap.yaml', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/46692e21d98c93b4ffed543f2e0ee84ab5912f74', 'message': 'Fix nova-bootstrap job labels\n\nSimilar to earlier changes [0] [1], this change ensures that the labels\nfor the nova-boostrap job are consistently applied under .metadata and\n.spec.template.metadata.\n\nUnfortunately, there was a conflict in the ""application"" label that was\nunresolvable in a backwards-compatible way.\n\n    metadata:\n      labels:\n        application: nova-bootstrap\n    spec:\n      template:\n        metadata:\n          labels:\n            application: nova\n            ...\n\nThe standard helm-toolkit labels are now applied in both places, and the\napplication: nova-bootstrap label is removed.\n\n0: https://review.opendev.org/c/openstack/openstack-helm/+/812233\n1: https://review.opendev.org/c/openstack/openstack-helm/+/813300\n\nChange-Id: I72275f3cf59ca8c1677922ca3b6f2e10b5578ab0\nDepends-On: I0c892be5aba7ccd6e3c378e4e45a79d2df03c06a\n'}]",0,816301,46692e21d98c93b4ffed543f2e0ee84ab5912f74,10,4,2,28719,,,0,"Fix nova-bootstrap job labels

Similar to earlier changes [0] [1], this change ensures that the labels
for the nova-boostrap job are consistently applied under .metadata and
.spec.template.metadata.

Unfortunately, there was a conflict in the ""application"" label that was
unresolvable in a backwards-compatible way.

    metadata:
      labels:
        application: nova-bootstrap
    spec:
      template:
        metadata:
          labels:
            application: nova
            ...

The standard helm-toolkit labels are now applied in both places, and the
application: nova-bootstrap label is removed.

0: https://review.opendev.org/c/openstack/openstack-helm/+/812233
1: https://review.opendev.org/c/openstack/openstack-helm/+/813300

Change-Id: I72275f3cf59ca8c1677922ca3b6f2e10b5578ab0
Depends-On: I0c892be5aba7ccd6e3c378e4e45a79d2df03c06a
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/01/816301/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/templates/job-bootstrap.yaml', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml']",3,0185a23676cd73a4b81c3829d6909ee2c5959fb2,,version: 0.2.24,version: 0.2.23,3,2
openstack%2Frequirements~master~I89595e0f9fd042dbcb49aa5731dd2e8b073f3c70,openstack/requirements,master,I89595e0f9fd042dbcb49aa5731dd2e8b073f3c70,update constraint for oslo.concurrency to new release 4.5.0,MERGED,2021-10-21 10:02:26.000000000,2021-11-02 16:58:04.000000000,2021-11-02 16:52:07.000000000,"[{'_account_id': 11604}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-21 10:02:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/d06bc5119b79a91a2c224f27a9d97ebec9a38d8a', 'message': 'update constraint for oslo.concurrency to new release 4.5.0\n\nmeta: version: 4.5.0\nmeta: diff-start: -\nmeta: series: independent\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: I32efe9f03829a1f07b4fdd997f36528749090f83\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: I89595e0f9fd042dbcb49aa5731dd2e8b073f3c70\n'}, {'number': 2, 'created': '2021-10-29 07:41:23.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/376e04b2ea0fcfbda3cc4d7f1e92de52ef542845', 'message': 'update constraint for oslo.concurrency to new release 4.5.0\n\nmeta: version: 4.5.0\nmeta: diff-start: -\nmeta: series: independent\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: I32efe9f03829a1f07b4fdd997f36528749090f83\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n\nDepends-On: https://review.opendev.org/c/openstack/nova/+/815940\n\nChange-Id: I89595e0f9fd042dbcb49aa5731dd2e8b073f3c70\n'}]",2,814889,376e04b2ea0fcfbda3cc4d7f1e92de52ef542845,30,3,2,11131,,,0,"update constraint for oslo.concurrency to new release 4.5.0

meta: version: 4.5.0
meta: diff-start: -
meta: series: independent
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Hervé Beraud <hberaud@redhat.com>
meta: release:Commit: Hervé Beraud <hberaud@redhat.com>
meta: release:Change-Id: I32efe9f03829a1f07b4fdd997f36528749090f83
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>

Depends-On: https://review.opendev.org/c/openstack/nova/+/815940

Change-Id: I89595e0f9fd042dbcb49aa5731dd2e8b073f3c70
",git fetch https://review.opendev.org/openstack/requirements refs/changes/89/814889/2 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,d06bc5119b79a91a2c224f27a9d97ebec9a38d8a,new-release,oslo.concurrency===4.5.0,oslo.concurrency===4.4.1,1,1
openstack%2Fpuppet-cloudkitty~master~I5e103786b6c179e68bc54fa2b4b26bbdd2127e55,openstack/puppet-cloudkitty,master,I5e103786b6c179e68bc54fa2b4b26bbdd2127e55,Allow more flexible definition of fetcher_keystone parameters,MERGED,2021-10-31 08:59:23.000000000,2021-11-02 16:33:11.000000000,2021-11-02 16:21:19.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-31 08:59:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/ba71af202f6b6a3488a1de7ff56d389368086f9b', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}, {'number': 2, 'created': '2021-10-31 11:37:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/c1dc2809698385c2c5ab2ceb84a8a2dde2b91fe5', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}, {'number': 3, 'created': '2021-10-31 23:20:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/7aa6f2afb0a1edc9c412c78e7718d2c74eac0f39', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}, {'number': 4, 'created': '2021-10-31 23:44:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/c3be40b91b0efae4a22f02c5d8d412f29da5b625', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}, {'number': 5, 'created': '2021-11-01 02:15:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/22949456b383e9e5bce0a9b63bc0bf1e931daf82', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}, {'number': 6, 'created': '2021-11-01 03:10:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/e5fd1380bfa8b5e9e7599444e7a4c61b17d8bb12', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}, {'number': 7, 'created': '2021-11-01 04:15:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/66579fb6f1ca5bfdadf79c5ccbb87768b14341de', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}, {'number': 8, 'created': '2021-11-01 15:23:00.000000000', 'files': ['releasenotes/notes/fetcher_keystone-4ed116e2b11a1a0e.yaml', 'manifests/init.pp', 'manifests/fetcher/keystone.pp', 'spec/classes/cloudkitty_fetcher_keystone_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/4e6806f54fbb11d11ec07cd04bae3943cf066ecd', 'message': 'Allow more flexible definition of fetcher_keystone parameters\n\nThis change allows using different credentials for authtoken middleware\nand keystone fetcher. This is useful when credentials for different\nscopes are needed for these two modules.\n\nChange-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55\n'}]",2,816097,4e6806f54fbb11d11ec07cd04bae3943cf066ecd,26,3,8,9816,,,0,"Allow more flexible definition of fetcher_keystone parameters

This change allows using different credentials for authtoken middleware
and keystone fetcher. This is useful when credentials for different
scopes are needed for these two modules.

Change-Id: I5e103786b6c179e68bc54fa2b4b26bbdd2127e55
",git fetch https://review.opendev.org/openstack/puppet-cloudkitty refs/changes/97/816097/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fetcher_keystone-4ed116e2b11a1a0e.yaml', 'manifests/init.pp', 'manifests/fetcher/keystone.pp', 'spec/classes/cloudkitty_fetcher_keystone_spec.rb']",4,ba71af202f6b6a3488a1de7ff56d389368086f9b,fetcher_keystone,"require 'spec_helper' describe 'cloudkitty::fetcher::keystone' do shared_examples_for 'cloudkitty::fetcher::keystone' do context 'with defaults' do let :params do {} end it 'configures the fetcher_keystone parameters' do is_expected.to contain_cloudkitty_config('fetcher_keystone/auth_section').with_value('keystone_authtoken') is_expected.to contain_cloudkitty_config('fetcher_keystone/username').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('fetcher_keystone/password').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('fetcher_keystone/project_name').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('fetcher_keystone/user_domain_name').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('fetcher_keystone/project_domaiN_name').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('fetcher_keystone/auth_url').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('fetcher_keystone/keystone_version').with_value('<SERVICE DEFAULT>') end end context 'with parameters set' do let :params do { :auth_section => '<SERVICE DEFAULT>', :username => 'cloudkitty', :password => 'cloudkitty_password', :project_name => 'service', :user_domain_name => 'Default', :project_domain_name => 'Default', :auth_url => 'http://127.0.0.1:5000/' :keystone_version => 3, } end it 'configures the fetcher_keystone parameters' do is_expected.to contain_cloudkitty_config('fetcher_keystone/auth_section').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('fetcher_keystone/username').with_value('cloudkitty') is_expected.to contain_cloudkitty_config('fetcher_keystone/password').with_value('cloudkitty_password') is_expected.to contain_cloudkitty_config('fetcher_keystone/project_name').with_value('service') is_expected.to contain_cloudkitty_config('fetcher_keystone/user_domain_name').with_value('Default') is_expected.to contain_cloudkitty_config('fetcher_keystone/project_domaiN_name').with_value('Default') is_expected.to contain_cloudkitty_config('fetcher_keystone/auth_url').with_vlue('http://127.0.0.1:5000') is_expected.to contain_cloudkitty_config('fetcher_keystone/keystone_version').with_value(3) end end end on_supported_os({ :supported_os => OSDefaults.get_supported_os }).each do |os,facts| context ""on #{os}"" do let (:facts) do facts.merge!(OSDefaults.get_facts()) end context 'with default parameters' do it_behaves_like 'cloudkitty::fetcher::keystone' end end end end ",,172,15
openstack%2Ffreezer-api~master~Ibf2a60ac110a95e4cccdc73d9edb7522d6c7b43b,openstack/freezer-api,master,Ibf2a60ac110a95e4cccdc73d9edb7522d6c7b43b,Remove unuseful func,MERGED,2021-11-02 12:28:54.000000000,2021-11-02 16:04:45.000000000,2021-11-02 15:56:41.000000000,"[{'_account_id': 21069}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 12:28:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/freezer-api/commit/7b81ceac71be3893582c8397ec19679389d755ea', 'message': 'Remove unuseful func\n\nChange-Id: Ibf2a60ac110a95e4cccdc73d9edb7522d6c7b43b\n'}, {'number': 2, 'created': '2021-11-02 13:52:20.000000000', 'files': ['freezer_api/cmd/api.py', 'freezer_api/tests/unit/sqlalchemy/test_migrations.py'], 'web_link': 'https://opendev.org/openstack/freezer-api/commit/8e672881663fffc523a52b388b98c71f66dd5f4b', 'message': 'Remove unuseful func\n\nRemove unuseful func and fix unit test error.\n\nChange-Id: Ibf2a60ac110a95e4cccdc73d9edb7522d6c7b43b\n'}]",0,816351,8e672881663fffc523a52b388b98c71f66dd5f4b,10,2,2,21069,,,0,"Remove unuseful func

Remove unuseful func and fix unit test error.

Change-Id: Ibf2a60ac110a95e4cccdc73d9edb7522d6c7b43b
",git fetch https://review.opendev.org/openstack/freezer-api refs/changes/51/816351/1 && git format-patch -1 --stdout FETCH_HEAD,['freezer_api/cmd/api.py'],1,7b81ceac71be3893582c8397ec19679389d755ea,,"# def build_app_v0(): # """"""Instantiate the root freezer-api app # Old versions of falcon (< 0.2.0) don't have a named 'middleware' argument. # This was introduced in version 0.2.0b1, so before that we need to instead # provide ""before"" hooks (request processing) and ""after"" hooks (response # processing). # :return: falcon WSGI app # """""" # # injecting FreezerContext & hooks # before_hooks = utils.before_hooks() + [ # middleware.RequireJSON().as_before_hook()] # after_hooks = [middleware.JSONTranslator().as_after_hook()] # # The signature of falcon.API() differs between versions, suppress pylint: # # pylint: disable=unexpected-keyword-arg # app = falcon.API(before=before_hooks, after=after_hooks) # app = configure_app(app) # return app","def build_app_v0(): """"""Instantiate the root freezer-api app Old versions of falcon (< 0.2.0) don't have a named 'middleware' argument. This was introduced in version 0.2.0b1, so before that we need to instead provide ""before"" hooks (request processing) and ""after"" hooks (response processing). :return: falcon WSGI app """""" # injecting FreezerContext & hooks before_hooks = utils.before_hooks() + [ middleware.RequireJSON().as_before_hook()] after_hooks = [middleware.JSONTranslator().as_after_hook()] # The signature of falcon.API() differs between versions, suppress pylint: # pylint: disable=unexpected-keyword-arg app = falcon.API(before=before_hooks, after=after_hooks) app = configure_app(app) return app",17,17
openstack%2Fpython-keystoneclient~master~Id2722a1b275be88af6d0337684f1eb012b7f4ce1,openstack/python-keystoneclient,master,Id2722a1b275be88af6d0337684f1eb012b7f4ce1,Fix doc error to unblock the gate,MERGED,2021-10-13 12:33:27.000000000,2021-11-02 15:33:19.000000000,2021-11-02 15:01:03.000000000,"[{'_account_id': 5046}, {'_account_id': 6547}, {'_account_id': 9816}, {'_account_id': 16465}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 29313}, {'_account_id': 30384}]","[{'number': 1, 'created': '2021-10-13 12:33:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-keystoneclient/commit/72903771754e2adc436a0a6e0b18726a8178cb49', 'message': 'Fix doc error to unblock the gate\n\n/home/zuul/src/opendev.org/openstack/python-keystoneclient/.tox/docs/lib/python3.8/site-packages/keystoneauth1/fixture/discovery.py:docstring of keystoneauth1.fixture.discovery.DiscoveryList:1:duplicate object description of keystoneauth1.fixture.discovery.DiscoveryList, other instance in api/keystoneclient.fixture, use :noindex: for one of them\n\nChange-Id: Id2722a1b275be88af6d0337684f1eb012b7f4ce1\n'}, {'number': 2, 'created': '2021-10-14 11:38:55.000000000', 'files': ['doc/source/conf.py'], 'web_link': 'https://opendev.org/openstack/python-keystoneclient/commit/f6569e22fc9a69bc2126fbc009121e88f17c0411', 'message': 'Fix doc error to unblock the gate\n\n/home/zuul/src/opendev.org/openstack/python-keystoneclient/.tox/docs/lib/python3.8/site-packages/keystoneauth1/fixture/discovery.py:docstring of keystoneauth1.fixture.discovery.DiscoveryList:1:duplicate object description of keystoneauth1.fixture.discovery.DiscoveryList, other instance in api/keystoneclient.fixture, use :noindex: for one of them\n\nChange-Id: Id2722a1b275be88af6d0337684f1eb012b7f4ce1\n'}]",5,813810,f6569e22fc9a69bc2126fbc009121e88f17c0411,16,8,2,8648,,,0,"Fix doc error to unblock the gate

/home/zuul/src/opendev.org/openstack/python-keystoneclient/.tox/docs/lib/python3.8/site-packages/keystoneauth1/fixture/discovery.py:docstring of keystoneauth1.fixture.discovery.DiscoveryList:1:duplicate object description of keystoneauth1.fixture.discovery.DiscoveryList, other instance in api/keystoneclient.fixture, use :noindex: for one of them

Change-Id: Id2722a1b275be88af6d0337684f1eb012b7f4ce1
",git fetch https://review.opendev.org/openstack/python-keystoneclient refs/changes/10/813810/2 && git format-patch -1 --stdout FETCH_HEAD,['keystoneclient/fixture/discovery.py'],1,72903771754e2adc436a0a6e0b18726a8178cb49,docs-error, :noindex:,,2,0
openstack%2Fopenstack-helm-infra~master~I0c892be5aba7ccd6e3c378e4e45a79d2df03c06a,openstack/openstack-helm-infra,master,I0c892be5aba7ccd6e3c378e4e45a79d2df03c06a,"Revert ""Set Security Context to ks-user job""",MERGED,2021-11-01 22:34:10.000000000,2021-11-02 15:00:47.000000000,2021-11-02 14:59:09.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 24780}, {'_account_id': 28719}, {'_account_id': 29982}, {'_account_id': 30690}]","[{'number': 1, 'created': '2021-11-01 22:34:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/537527e31aa99af1831dfbc3f5b5a4473e8cee46', 'message': 'Revert ""Set Security Context to ks-user job""\n\nThis reverts commit 5407b547bbb08397e41cceec4cf88d7ae9cbf9fc.\n\nReason for revert: This outputs duplicate securityContext entries,\nbreaking the yamllinter in osh. This needs a slight rework.\n\nChange-Id: I0c892be5aba7ccd6e3c378e4e45a79d2df03c06a\n'}, {'number': 2, 'created': '2021-11-01 22:35:05.000000000', 'files': ['helm-toolkit/Chart.yaml', 'releasenotes/notes/helm-toolkit.yaml', 'helm-toolkit/templates/manifests/_job-ks-user.yaml.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/55e7706f7e8760603efe0409c3458ef52a8ed0cb', 'message': 'Revert ""Set Security Context to ks-user job""\n\nThis reverts commit 5407b547bbb08397e41cceec4cf88d7ae9cbf9fc.\n\nReason for revert: This outputs duplicate securityContext entries,\nbreaking the yamllinter in osh. This needs a slight rework.\n\nChange-Id: I0c892be5aba7ccd6e3c378e4e45a79d2df03c06a\n'}]",6,816230,55e7706f7e8760603efe0409c3458ef52a8ed0cb,14,8,2,21420,,,0,"Revert ""Set Security Context to ks-user job""

This reverts commit 5407b547bbb08397e41cceec4cf88d7ae9cbf9fc.

Reason for revert: This outputs duplicate securityContext entries,
breaking the yamllinter in osh. This needs a slight rework.

Change-Id: I0c892be5aba7ccd6e3c378e4e45a79d2df03c06a
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/30/816230/1 && git format-patch -1 --stdout FETCH_HEAD,"['helm-toolkit/Chart.yaml', 'releasenotes/notes/helm-toolkit.yaml', 'helm-toolkit/templates/manifests/_job-ks-user.yaml.tpl']",3,537527e31aa99af1831dfbc3f5b5a4473e8cee46,,,"{{- if hasKey $envAll.Values ""pod"" -}} {{- if hasKey $envAll.Values.pod ""security_context"" -}} {{- range $service, $value := $envAll.Values.pod.security_context }} {{- if (($value).pod) }} {{ dict ""envAll"" $envAll ""application"" $service | include ""helm-toolkit.snippets.kubernetes_pod_security_context"" | indent 6 }} {{- end }} {{- end }} {{- end }} {{- end }}",1,11
openstack%2Fironic-python-agent-builder~master~I7384beb16d3810ddede51e6e2660bb826bd47415,openstack/ironic-python-agent-builder,master,I7384beb16d3810ddede51e6e2660bb826bd47415,Associate pip version to python version in DIB based images,MERGED,2021-10-29 08:50:26.000000000,2021-11-02 14:45:53.000000000,2021-11-02 14:44:28.000000000,"[{'_account_id': 10239}, {'_account_id': 11292}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-29 08:50:26.000000000', 'files': ['dib/ironic-python-agent-ramdisk/install.d/ironic-python-agent-ramdisk-source-install/60-ironic-python-agent-ramdisk-install'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/de007a80af302888c98bbc36902c62aea915ed37', 'message': 'Associate pip version to python version in DIB based images\n\nUse current latest version of pip for Python 3.x\n\nFor Python 2.x use the last pip version to support it [1].\n\n[1] https://pypi.org/project/pip/20.3.4/\n\nChange-Id: I7384beb16d3810ddede51e6e2660bb826bd47415\n'}]",1,815944,de007a80af302888c98bbc36902c62aea915ed37,9,3,1,23851,,,0,"Associate pip version to python version in DIB based images

Use current latest version of pip for Python 3.x

For Python 2.x use the last pip version to support it [1].

[1] https://pypi.org/project/pip/20.3.4/

Change-Id: I7384beb16d3810ddede51e6e2660bb826bd47415
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/44/815944/1 && git format-patch -1 --stdout FETCH_HEAD,['dib/ironic-python-agent-ramdisk/install.d/ironic-python-agent-ramdisk-source-install/60-ironic-python-agent-ramdisk-install'],1,de007a80af302888c98bbc36902c62aea915ed37,pip-version-update," REQUIRED_PIP_STR=""21.3.1"" REQUIRED_PIP_TUPLE=""(21, 3, 1)"" # NOTE(rpittau) pip 20.3.4 is the last version to support Python 2.x REQUIRED_PIP_STR=""20.3.4"" REQUIRED_PIP_TUPLE=""(20, 3, 4)""","# 19.1.1 is required for cryptography. REQUIRED_PIP_STR=""19.1.1"" REQUIRED_PIP_TUPLE=""(19, 1, 1)""",5,3
openstack%2Fpython-freezerclient~master~I7551e1a07a414dc0e37c75793db2f8014e996e93,openstack/python-freezerclient,master,I7551e1a07a414dc0e37c75793db2f8014e996e93,Update .zuul.yaml,MERGED,2021-11-02 13:09:02.000000000,2021-11-02 14:37:01.000000000,2021-11-02 14:31:58.000000000,"[{'_account_id': 21069}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 13:09:02.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/python-freezerclient/commit/c05175cd851f78124d5270d49e8cd236d09eac4a', 'message': 'Update .zuul.yaml\n\nAdd ""openstack-python3-xena-jobs"" CI job.\n\nChange-Id: I7551e1a07a414dc0e37c75793db2f8014e996e93\n'}]",0,816355,c05175cd851f78124d5270d49e8cd236d09eac4a,7,2,1,21069,,,0,"Update .zuul.yaml

Add ""openstack-python3-xena-jobs"" CI job.

Change-Id: I7551e1a07a414dc0e37c75793db2f8014e996e93
",git fetch https://review.opendev.org/openstack/python-freezerclient refs/changes/55/816355/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,c05175cd851f78124d5270d49e8cd236d09eac4a,, - openstack-python3-xena-jobs, - openstack-python3-wallaby-jobs,1,1
openstack%2Fbarbican~stable%2Ftrain~I821b4f5998be5b40327311039979f5e00ea9cefc,openstack/barbican,stable/train,I821b4f5998be5b40327311039979f5e00ea9cefc,Fix policy for adding a secret to a container,MERGED,2021-11-01 21:35:38.000000000,2021-11-02 14:35:20.000000000,2021-11-02 14:30:34.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 21:35:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican/commit/414e8d32e724f255fdfb965d706c1776c6cbdbee', 'message': 'Fix policy for adding a secret to a container\n\nThis patch fixes the policies for adding and removing secrets from a\nsecret container.\n\nStory: 2009297\nTask: 43727\nChange-Id: I821b4f5998be5b40327311039979f5e00ea9cefc\n(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)\n(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)\n(cherry picked from commit 7cf500a98239e861f877539827f3be57c920b95c)\n(cherry picked from commit 54e342fa7cf15cb77b2bc4b330c5b8fa41678881)\n'}, {'number': 2, 'created': '2021-11-01 22:25:00.000000000', 'files': ['barbican/common/policies/base.py', 'barbican/common/policies/containers.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/ecfef01555b299e3b58392208d1630ed84ca6717', 'message': 'Fix policy for adding a secret to a container\n\nThis patch fixes the policies for adding and removing secrets from a\nsecret container.\n\nStory: 2009297\nTask: 43727\nChange-Id: I821b4f5998be5b40327311039979f5e00ea9cefc\n(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)\n(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)\n(cherry picked from commit 7cf500a98239e861f877539827f3be57c920b95c)\n(cherry picked from commit 54e342fa7cf15cb77b2bc4b330c5b8fa41678881)\n'}]",0,816136,ecfef01555b299e3b58392208d1630ed84ca6717,9,2,2,7973,,,0,"Fix policy for adding a secret to a container

This patch fixes the policies for adding and removing secrets from a
secret container.

Story: 2009297
Task: 43727
Change-Id: I821b4f5998be5b40327311039979f5e00ea9cefc
(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)
(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)
(cherry picked from commit 7cf500a98239e861f877539827f3be57c920b95c)
(cherry picked from commit 54e342fa7cf15cb77b2bc4b330c5b8fa41678881)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/36/816136/1 && git format-patch -1 --stdout FETCH_HEAD,"['barbican/common/policies/base.py', 'barbican/common/policies/containers.py']",2,414e8d32e724f255fdfb965d706c1776c6cbdbee,story/2009247-stable/wallaby-stable/victoria-stable/ussuri-stable/train," check_str='rule:container_project_admin or ' + 'rule:container_project_creator or ' + 'rule:container_project_creator_role and ' + 'rule:container_non_private_read', check_str='rule:container_project_admin or ' + 'rule:container_project_creator or ' + 'rule:container_project_creator_role and ' + 'rule:container_non_private_read',"," check_str='rule:admin', check_str='rule:admin',",11,2
openstack%2Fbarbican~stable%2Ftrain~I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1,openstack/barbican,stable/train,I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1,Fix POST /v1/secret/{secret-id}/metadata response,MERGED,2021-11-01 20:40:10.000000000,2021-11-02 14:32:00.000000000,2021-11-02 14:30:26.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 20:40:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican/commit/01ddefac4c42dc7efd45bf57db134342a9672ec8', 'message': 'Fix POST /v1/secret/{secret-id}/metadata response\n\nThis patch fixes the response to POST requests in the metadata API so it\nactually matches the documentation. [1]\n\nStory: 2009247\nTask: 43672\n\n[1]\nhttps://docs.openstack.org/barbican/latest/api/reference/secret_metadata.html#post-v1-secrets-uuid-metadata\n\nChange-Id: I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1\n(cherry picked from commit 49f3b2f0d1bc37f5a151d22c584f473e8fddae25)\n(cherry picked from commit 07ef50c18784f0585c0b3cad44bb590c44549f51)\n'}, {'number': 2, 'created': '2021-11-01 20:40:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican/commit/74c3418adcf2594f2499b01b589c19c78208e76e', 'message': 'Fix POST /v1/secret/{secret-id}/metadata response\n\nThis patch fixes the response to POST requests in the metadata API so it\nactually matches the documentation. [1]\n\nStory: 2009247\nTask: 43673\n\n[1]\nhttps://docs.openstack.org/barbican/latest/api/reference/secret_metadata.html#post-v1-secrets-uuid-metadata\n\nChange-Id: I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1\n(cherry picked from commit 49f3b2f0d1bc37f5a151d22c584f473e8fddae25)\n(cherry picked from commit 07ef50c18784f0585c0b3cad44bb590c44549f51)\n'}, {'number': 3, 'created': '2021-11-01 22:24:13.000000000', 'files': ['barbican/tests/api/controllers/test_secretmeta.py', 'releasenotes/notes/fix-story-2009247-18faf4f2b570dfc0.yaml', 'barbican/api/controllers/secretmeta.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/42feeeaea98bae5534533e3f402730b035a01f1b', 'message': 'Fix POST /v1/secret/{secret-id}/metadata response\n\nThis patch fixes the response to POST requests in the metadata API so it\nactually matches the documentation. [1]\n\nStory: 2009247\nTask: 43673\n\n[1]\nhttps://docs.openstack.org/barbican/latest/api/reference/secret_metadata.html#post-v1-secrets-uuid-metadata\n\nChange-Id: I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1\n(cherry picked from commit 8bd16953ebb11c38c02151687967ee93c88067d7)\n(cherry picked from commit 61aa13e970dbabcf6caeb32ce5bf81ae5b5d4563)\n(cherry picked from commit 49f3b2f0d1bc37f5a151d22c584f473e8fddae25)\n(cherry picked from commit 841973caca39c2c488049b2c32b24a0e62df8bf8)\n(cherry picked from commit 07ef50c18784f0585c0b3cad44bb590c44549f51)\n'}]",0,816135,42feeeaea98bae5534533e3f402730b035a01f1b,12,2,3,7973,,,0,"Fix POST /v1/secret/{secret-id}/metadata response

This patch fixes the response to POST requests in the metadata API so it
actually matches the documentation. [1]

Story: 2009247
Task: 43673

[1]
https://docs.openstack.org/barbican/latest/api/reference/secret_metadata.html#post-v1-secrets-uuid-metadata

Change-Id: I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1
(cherry picked from commit 8bd16953ebb11c38c02151687967ee93c88067d7)
(cherry picked from commit 61aa13e970dbabcf6caeb32ce5bf81ae5b5d4563)
(cherry picked from commit 49f3b2f0d1bc37f5a151d22c584f473e8fddae25)
(cherry picked from commit 841973caca39c2c488049b2c32b24a0e62df8bf8)
(cherry picked from commit 07ef50c18784f0585c0b3cad44bb590c44549f51)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/35/816135/1 && git format-patch -1 --stdout FETCH_HEAD,"['barbican/tests/api/controllers/test_secretmeta.py', 'releasenotes/notes/fix-story-2009247-18faf4f2b570dfc0.yaml', 'barbican/api/controllers/secretmeta.py']",3,01ddefac4c42dc7efd45bf57db134342a9672ec8,story/2009247," pecan.response.headers['Location'] = url + '/' + key return {'key': key, 'value': value}"," return {'metadata_ref': url + ""/%s {key: %s, value:%s}"" % (key, key, value)}",31,3
openstack%2Fneutron-specs~master~I4ebac838df82a64a5a6f2c773d69050ade5668ce,openstack/neutron-specs,master,I4ebac838df82a64a5a6f2c773d69050ade5668ce,Neutron VLAN networks with QinQ enabled,MERGED,2021-06-29 15:48:07.000000000,2021-11-02 14:30:22.000000000,2021-11-02 14:28:51.000000000,"[{'_account_id': 841}, {'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 6854}, {'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-29 15:48:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-specs/commit/673a8a8a86aa63f7ae2c1f41ffd81358df0c7fd9', 'message': 'Neutron VLAN networks with QinQ enabled\n\nRelated-Bug: #1915151\nChange-Id: I4ebac838df82a64a5a6f2c773d69050ade5668ce\n'}, {'number': 2, 'created': '2021-08-06 12:13:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-specs/commit/2fb3e6920102d1b1a6771f12742cedb0d46db129', 'message': 'Neutron VLAN networks with QinQ enabled\n\nRelated-Bug: #1915151\nChange-Id: I4ebac838df82a64a5a6f2c773d69050ade5668ce\n'}, {'number': 3, 'created': '2021-09-23 13:13:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-specs/commit/c1cc1966ead5aa506d780e9af921ba298d385fcf', 'message': 'Neutron VLAN networks with QinQ enabled\n\nRelated-Bug: #1915151\nChange-Id: I4ebac838df82a64a5a6f2c773d69050ade5668ce\n'}, {'number': 4, 'created': '2021-10-07 09:42:41.000000000', 'files': ['specs/yoga/qinq_networks.rst'], 'web_link': 'https://opendev.org/openstack/neutron-specs/commit/40f6c1663d045fbb23dcb64f4fc0227f6f063dd4', 'message': 'Neutron VLAN networks with QinQ enabled\n\nRelated-Bug: #1915151\nChange-Id: I4ebac838df82a64a5a6f2c773d69050ade5668ce\n'}]",16,798704,40f6c1663d045fbb23dcb64f4fc0227f6f063dd4,22,9,4,11975,,,0,"Neutron VLAN networks with QinQ enabled

Related-Bug: #1915151
Change-Id: I4ebac838df82a64a5a6f2c773d69050ade5668ce
",git fetch https://review.opendev.org/openstack/neutron-specs refs/changes/04/798704/4 && git format-patch -1 --stdout FETCH_HEAD,['specs/xena/qinq_networks.rst'],1,673a8a8a86aa63f7ae2c1f41ffd81358df0c7fd9,bug/1915151,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode ======================================= Neutron VLAN networks with QinQ support ======================================= Launchpad Bug: https://bugs.launchpad.net/neutron/+bug/1915151 Neutron supports networks with vlan transparency but in case where it is used with VLAN networks, there is no way to use it as QinQ which is different ethertype (e.g. 0x8a88) than regular vlan ethertype (0x8100). Problem Description =================== Networks with enabled vlan transparency can be of any type available in Neutron (vxlan, vlan, flat, etc.). In most cases it is fine when packets send from the node in such case have ethertype 0x8100 (802.1q). But in such case as we have 2 vlans already (S-Tag and C-Tag) there are some use cases where it should be send as QinQ which is slightly different standard and have different ethertype (0x8a88) [1]_. Proposed Change =============== Add new API extension to extend ``network`` resource in Neutron with ``qinq`` attribute. This new attribute would be valid only for ``vlan`` networks and in case of that networks would work similary to what current ``VLAN transparency`` extension [2]_. The difference between vlan transparency and new qinq extensions would be in the ethertype configured for packets in such network send from the node. In case of ``qinq=True`` S-Tag and C-Tag will work in same way like it is now for the networks with enabled vlan transparency. C-Tag is configured directly in the instance by user and S-Tag is configured and controlled by Neutron. Server side changes ------------------- A new API extension of Neutron will be added with new attribute for the ``network`` resource. This new attribute will be called ``qinq``: :: RESOURCE_ATTRIBUTE_MAP = { network.COLLECTION_NAME: { ""qinq"": { 'allow_post': True, 'allow_put': False, 'convert_to': converters.convert_to_boolean, 'default': constants.ATTR_NOT_SPECIFIED, 'is_visible': True, 'is_filter': True } } } .. note:: Attribute ``qinq`` will have effect only for ``vlan`` networks. .. note:: Attributes ``vlan_transparent`` and ``qinq`` would be mutually exclusive. Only one of them can be set to ``True``. Agent side changes ------------------ Currently ``linuxbridge`` and ``ovn`` backends supports VLAN transparency and QinQ will be supported by the same 2 backends. In case of both of them correct ethertype will need to be set on the nodes so correct ethertype will be set for the packets. DB Impact --------- Extend the ``networks`` table with boolean column ``qinq``. REST API Impact --------------- None. Client Impact ------------- Relevant changes in osc and openstacksdk to add support for new network's attribute. It should be something like: :: openstack network create --qinq True Testing ------- * Unit tests. * Fullstack test. * Tempest tests in neutron-tempest-plugin. Assignee(s) ----------- * Slawek Kaplonski <skaplons@redhat.com> References ========== .. [1] https://en.wikipedia.org/wiki/IEEE_802.1ad .. [2] https://docs.openstack.org/api-ref/network/v2/#vlan-transparency-extension ",,111,0
openstack%2Ftripleo-ansible~master~I665913e32745907b7b41f73301e2aaf421722a40,openstack/tripleo-ansible,master,I665913e32745907b7b41f73301e2aaf421722a40,bnr Prepare undercloud nfs ironic,MERGED,2021-10-08 06:56:02.000000000,2021-11-02 14:02:37.000000000,2021-11-02 14:02:37.000000000,"[{'_account_id': 14985}, {'_account_id': 20775}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 32968}]","[{'number': 1, 'created': '2021-10-08 06:56:02.000000000', 'files': ['tripleo_ansible/playbooks/cli-undercloud-prepare-ironic.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c936b13c64b91e153a3f3f43d1c746e6e80488a4', 'message': 'bnr Prepare undercloud nfs ironic\n\nAnsible playbook to configure the nfs service on the undercloud.\nExport the directory needed and create the subdirectories\non the exported file.\n\nChange-Id: I665913e32745907b7b41f73301e2aaf421722a40\n'}]",0,813130,c936b13c64b91e153a3f3f43d1c746e6e80488a4,8,5,1,22954,,,0,"bnr Prepare undercloud nfs ironic

Ansible playbook to configure the nfs service on the undercloud.
Export the directory needed and create the subdirectories
on the exported file.

Change-Id: I665913e32745907b7b41f73301e2aaf421722a40
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/30/813130/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/playbooks/cli-undercloud-prepare-ironic.yaml'],1,c936b13c64b91e153a3f3f43d1c746e6e80488a4,bnr_undercloud_pxe,"--- # Copyright 2021 Red Hat, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. - name: TripleO PXE installation and configuration. hosts: Undercloud remote_user: ""{{ tripleo_target_user | default(lookup('env', 'USER')) }}"" become: true vars: tripleo_backup_and_restore_shared_storage_folder: ""{{ tripleo_backup_and_restore_ironic_images_path }}"" tripleo_backup_and_restore_shared_storage_subfolders: [""pxelinux.cfg""] roles: - role: backup_and_restore ",,24,0
openstack%2Fopenstack-ansible~master~Idd894ba467a3d56cd80bdfcc5b48510a614349c2,openstack/openstack-ansible,master,Idd894ba467a3d56cd80bdfcc5b48510a614349c2,Switch services to track stable/xena,MERGED,2021-10-27 07:07:57.000000000,2021-11-02 14:02:05.000000000,2021-11-02 14:00:18.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 31542}]","[{'number': 1, 'created': '2021-10-27 07:07:57.000000000', 'files': ['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'playbooks/defaults/repo_packages/openstack_testing.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/e62392648e4f17b8bbd100e65607ef7e2313591e', 'message': 'Switch services to track stable/xena\n\nIn order to prevent failures caused by changes on master we switch\nservices to stable/xena\n\nChange-Id: Idd894ba467a3d56cd80bdfcc5b48510a614349c2\n'}]",1,815597,e62392648e4f17b8bbd100e65607ef7e2313591e,10,3,1,28619,,,0,"Switch services to track stable/xena

In order to prevent failures caused by changes on master we switch
services to stable/xena

Change-Id: Idd894ba467a3d56cd80bdfcc5b48510a614349c2
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/97/815597/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'playbooks/defaults/repo_packages/openstack_testing.yml']",4,e62392648e4f17b8bbd100e65607ef7e2313591e,,tempest_git_install_branch: d458bf329739ae7b7652d329e6415ad6ba54e490 # HEAD as of 27.10.2021,tempest_git_install_branch: 669900f622ce46c62260910d2cf9fa1d32216191 # HEAD as of 29.09.2021,111,111
openstack%2Fcharm-openstack-dashboard~master~I1e3b6fd2e3623a7b3abfbc672f2d7d8bc873331c,openstack/charm-openstack-dashboard,master,I1e3b6fd2e3623a7b3abfbc672f2d7d8bc873331c,Cherry-pick test-requirements.txt from stable/21.10 for cffi,ABANDONED,2021-10-17 02:48:57.000000000,2021-11-02 13:52:31.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-17 02:48:57.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/7ed84ff5d704e0e1fd35198d25fdfed345efced4', 'message': 'Cherry-pick test-requirements.txt from stable/21.10 for cffi\n\nChange-Id: I1e3b6fd2e3623a7b3abfbc672f2d7d8bc873331c\n'}]",3,814282,7ed84ff5d704e0e1fd35198d25fdfed345efced4,8,2,1,8108,,,0,"Cherry-pick test-requirements.txt from stable/21.10 for cffi

Change-Id: I1e3b6fd2e3623a7b3abfbc672f2d7d8bc873331c
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/82/814282/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,7ed84ff5d704e0e1fd35198d25fdfed345efced4,,cffi==1.14.6; python_version < '3.6' # cffi 1.15.0 drops support for py35.,,1,0
openstack%2Ftripleo-ansible~master~I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525,openstack/tripleo-ansible,master,I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525,bnr Use replace instead of lineinfile and grouped similar tasks in a loop,MERGED,2021-09-30 12:21:51.000000000,2021-11-02 13:47:14.000000000,2021-11-02 13:47:14.000000000,"[{'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 20775}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 32968}]","[{'number': 1, 'created': '2021-09-30 12:21:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/cf3529acb9fdb167b751686a6da2eb4b477689b0', 'message': 'bnr Use replace instead of lineinfile\n\nThe lininfile module is adding the line whether exits.\nUsing the replace module only changes the line when it\nexits.\n\nAdding OUTPUT_PREFIX_PXE to replace in case of\nusing the ironic integration.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}, {'number': 2, 'created': '2021-10-05 12:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/35cb4210deb0291393c9fd5ade057fe8b9388815', 'message': 'bnr Use replace instead of lineinfile\n\nThe lininfile module is adding the line whether exits.\nUsing the replace module only changes the line when it\nexits.\n\nAdding OUTPUT_PREFIX_PXE to replace in case of\nusing the ironic integration.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}, {'number': 3, 'created': '2021-10-05 13:16:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9d696ba461731146a39699c997ab1e61f5c308bf', 'message': 'bnr Use replace instead of lineinfile\n\nThe lininfile module is adding the line whether exits.\nUsing the replace module only changes the line when it\nexits.\n\nAdding OUTPUT_PREFIX_PXE to replace in case of\nusing the ironic integration.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}, {'number': 4, 'created': '2021-10-05 13:24:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/2cdffe5a10ed869fb3d6720a08718446619a4d74', 'message': 'bnr Use replace instead of lineinfile\n\nThe lininfile module is adding the line whether exits.\nUsing the replace module only changes the line when it\nexits.\n\nAdding OUTPUT_PREFIX_PXE to replace in case of\nusing the ironic integration.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}, {'number': 5, 'created': '2021-10-06 07:28:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/cd389b40f7e85ed2681f491c8544734bb870017b', 'message': 'bnr Grouped tasks in a loop and added OUTPUT_PREFIX_PXE\n\nCurrently when the backup is executed and there the history is kept,\nthere was two tasks that modify the configuration adding ""timestamp""\nto the name of the files.\n\nThis patch grouped these two tasks in one with a loop and also added\nthe argument OUTPUT_PREFIX_PXE to be configured in case of integration\nwith ironic.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}, {'number': 6, 'created': '2021-10-06 07:31:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/e28d19df9c6a0a640b52602261c8b65cc2e399d6', 'message': 'bnr Grouped tasks in a loop and added OUTPUT_PREFIX_PXE\n\nCurrently when the backup is executed and the history is kept,\nthere was two tasks that modify the configuration adding ""timestamp""\nto the name of the files of a couple of variables.\n\nThis patch grouped these two tasks in one with a loop and also added\nthe variable OUTPUT_PREFIX_PXE to be configured in case of integration\nwith ironic.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}, {'number': 7, 'created': '2021-10-07 07:55:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/28b0f56d2047b4c4ec7c981686edd349ce63bd3e', 'message': 'bnr Grouped tasks in a loop and added OUTPUT_PREFIX_PXE\n\nCurrently when the backup is executed and the history is kept,\nthere was two tasks that modify the configuration adding ""timestamp""\nto the name of the files of a couple of variables.\n\nThis patch grouped these two tasks in one with a loop and also added\nthe variable OUTPUT_PREFIX_PXE to be configured in case of integration\nwith ironic.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}, {'number': 8, 'created': '2021-10-07 14:20:42.000000000', 'files': ['tripleo_ansible/roles/backup_and_restore/tasks/run_backup.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c665c379bf0d13b4f555d4fbe8dba50a975995b1', 'message': 'bnr Use replace instead of lineinfile and grouped similar tasks in a loop\n\nCurrently when the backup is executed and the history is kept,\nthere was two tasks that modify the configuration adding ""timestamp""\nto the name of the files of a couple of variables.\n\nThe modification of the configuration was done by lineinfile, but it\nadded the line whether exits or not. That\'s why the use of the replace\nmodule instead of lineinfile.\n\nThis patch grouped these two tasks in one with a loop and also added\nthe variable OUTPUT_PREFIX_PXE to be configured in case of integration\nwith ironic.\n\nChange-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525\n'}]",7,811953,c665c379bf0d13b4f555d4fbe8dba50a975995b1,31,6,8,22954,,,0,"bnr Use replace instead of lineinfile and grouped similar tasks in a loop

Currently when the backup is executed and the history is kept,
there was two tasks that modify the configuration adding ""timestamp""
to the name of the files of a couple of variables.

The modification of the configuration was done by lineinfile, but it
added the line whether exits or not. That's why the use of the replace
module instead of lineinfile.

This patch grouped these two tasks in one with a loop and also added
the variable OUTPUT_PREFIX_PXE to be configured in case of integration
with ironic.

Change-Id: I0260c8b5d1a6ccbddf1029ee9a3af35cb77fd525
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/53/811953/3 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/backup_and_restore/tasks/run_backup.yml'],1,cf3529acb9fdb167b751686a6da2eb4b477689b0,bnr_history,"- name: Modify {{ items }} on /etc/rear/local.conf replace: regexp: ""^{{ item }}.*"" replace: ""{{ item }}=$HOSTNAME-{{ bar_timestamp.stdout }}"" with_items: - ISO_PREFIX - BACKUP_PROG_ARCHIVE - OUTPUT_PREFIX_PXE","- name: Modify ISO_PREFIX on /etc/rear/local.conf lineinfile: regexp: ""^ISO_PREFIX.*"" line: ISO_PREFIX=$HOSTNAME-{{ bar_timestamp.stdout }} when: - tripleo_backup_and_restore_historical tags: - bar_create_recover_image - name: Modify BACKUP_PROG_ARCHIVE on /etc/rear/local.conf lineinfile: path: /etc/rear/local.conf regexp: ""^BACKUP_PROG_ARCHIVE.*"" line: BACKUP_PROG_ARCHIVE=$HOSTNAME-{{ bar_timestamp.stdout }} when: - tripleo_backup_and_restore_historical",8,16
openstack%2Fpuppet-neutron~master~I0ebf284f55ee4141d5999d9680c7ce65fd65621a,openstack/puppet-neutron,master,I0ebf284f55ee4141d5999d9680c7ce65fd65621a,WIP: Test deprecated parameters in unit tests,ABANDONED,2021-07-23 06:07:35.000000000,2021-11-02 13:46:50.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-23 06:07:35.000000000', 'files': ['spec/classes/neutron_agents_ml2_networking_baremetal_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/0288320b8f5f2cb9e68c3f6ec56076de4944149f', 'message': 'WIP: Test deprecated parameters in unit tests\n\nChange-Id: I0ebf284f55ee4141d5999d9680c7ce65fd65621a\n'}]",0,801934,0288320b8f5f2cb9e68c3f6ec56076de4944149f,3,1,1,9816,,,0,"WIP: Test deprecated parameters in unit tests

Change-Id: I0ebf284f55ee4141d5999d9680c7ce65fd65621a
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/34/801934/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/classes/neutron_agents_ml2_networking_baremetal_spec.rb'],1,0288320b8f5f2cb9e68c3f6ec56076de4944149f,bug/1937333," context 'with deprecated parameters' do before :each do params.merge!( :auth_strategy => 'keystone', :ironic_url => 'http://127.0.0.1:9696' :retry_interval => 10, :max_retries => 5, ) end it 'should use overriden values' do should contain_neutron_config('ironic/auth_strategy').with_ensure('absent') should contain_neutron_config('ironic/endpoint_override').with_value('http://127.0.0.1:9696') should contain_neutron_config('ironic/retry_interval').with_value(10) should contain_neutron_config('ironic/max_retries').with_value(5) end end ",,17,0
openstack%2Fpuppet-neutron~master~I404ea0c6c300a5cde07b949a03ca83060b6ae9b3,openstack/puppet-neutron,master,I404ea0c6c300a5cde07b949a03ca83060b6ae9b3,WIP: Checking new puppetlabs-inifile,ABANDONED,2021-11-01 06:35:36.000000000,2021-11-02 13:28:05.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-01 06:35:36.000000000', 'files': ['spec/classes/neutron_server_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/0dce720c7457567b2ac6196ba63fa6f00c5b91c8', 'message': 'WIP: Checking new puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I404ea0c6c300a5cde07b949a03ca83060b6ae9b3\n'}]",0,816122,0dce720c7457567b2ac6196ba63fa6f00c5b91c8,3,1,1,9816,,,0,"WIP: Checking new puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I404ea0c6c300a5cde07b949a03ca83060b6ae9b3
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/22/816122/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/classes/neutron_server_spec.rb'],1,0dce720c7457567b2ac6196ba63fa6f00c5b91c8,,,,1,0
openstack%2Fansible-role-pki~master~I9b1322e243cb854e947fab5d04e4c1c9d2e08255,openstack/ansible-role-pki,master,I9b1322e243cb854e947fab5d04e4c1c9d2e08255,Slurp all server certs not just first one,MERGED,2021-10-28 14:00:58.000000000,2021-11-02 12:56:34.000000000,2021-11-02 12:55:12.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2021-10-28 14:00:58.000000000', 'files': ['tasks/main_certs.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/36b374509ede24fc521e4ec75e2adfd32e3772fd', 'message': 'Slurp all server certs not just first one\n\nWhen role run against multiple hosts with each with different\nserver certs the role would just collect the server cert for the\nfirst host.\n\nThis issue is not seen if the role is run serially as is the case\neverywhere it is used currently, but is an issue when used with\nnova for example or for rabbitmq with more than 3 nodes as serial\nset to 20%.\n\nChange-Id: I9b1322e243cb854e947fab5d04e4c1c9d2e08255\n'}]",1,815849,36b374509ede24fc521e4ec75e2adfd32e3772fd,8,3,1,31749,,,0,"Slurp all server certs not just first one

When role run against multiple hosts with each with different
server certs the role would just collect the server cert for the
first host.

This issue is not seen if the role is run serially as is the case
everywhere it is used currently, but is an issue when used with
nova for example or for rabbitmq with more than 3 nodes as serial
set to 20%.

Change-Id: I9b1322e243cb854e947fab5d04e4c1c9d2e08255
",git fetch https://review.opendev.org/openstack/ansible-role-pki refs/changes/49/815849/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main_certs.yml'],1,36b374509ede24fc521e4ec75e2adfd32e3772fd,cert-install,, run_once: true,0,1
openstack%2Fnova~master~I829e7466cec3f768ad13dcf793315fb029126a2e,openstack/nova,master,I829e7466cec3f768ad13dcf793315fb029126a2e,"Revert ""Temp disable nova-manage placement heal_allocation testing""",MERGED,2021-11-02 07:05:52.000000000,2021-11-02 12:49:22.000000000,2021-11-02 12:42:48.000000000,"[{'_account_id': 10135}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 07:05:52.000000000', 'files': ['gate/post_test_hook.sh'], 'web_link': 'https://opendev.org/openstack/nova/commit/5725297e129d3e1b5664b1bac27752d3e58ad267', 'message': 'Revert ""Temp disable nova-manage placement heal_allocation testing""\n\nThis reverts commit 45e71fb9ceaf7fd89e63379aa65a8971b053a8b1.\n\nReason for revert: https://review.opendev.org/c/openstack/nova/+/802060 is landed now, so the heal allocation tests should work again\n\nChange-Id: I829e7466cec3f768ad13dcf793315fb029126a2e\n'}]",3,816242,5725297e129d3e1b5664b1bac27752d3e58ad267,18,3,1,9708,,,0,"Revert ""Temp disable nova-manage placement heal_allocation testing""

This reverts commit 45e71fb9ceaf7fd89e63379aa65a8971b053a8b1.

Reason for revert: https://review.opendev.org/c/openstack/nova/+/802060 is landed now, so the heal allocation tests should work again

Change-Id: I829e7466cec3f768ad13dcf793315fb029126a2e
",git fetch https://review.opendev.org/openstack/nova refs/changes/42/816242/1 && git format-patch -1 --stdout FETCH_HEAD,['gate/post_test_hook.sh'],1,5725297e129d3e1b5664b1bac27752d3e58ad267,,"echo ""Verifying online_data_migrations idempotence"" # We will re-use the server created earlier for this test. (A server needs to # be present during the run of online_data_migrations and archiving). # Run the online data migrations before archiving. $MANAGE db online_data_migrations # We need to archive the deleted marker instance used by the # fill_virtual_interface_list online data migration in order to trigger # creation of a new deleted marker instance. set +e archive_deleted_rows set -e # Verify whether online data migrations run after archiving will succeed. # See for more details: https://bugs.launchpad.net/nova/+bug/1824435 $MANAGE db online_data_migrations","echo ""Verifying online_data_migrations idempotence"" # We will re-use the server created earlier for this test. (A server needs to # be present during the run of online_data_migrations and archiving). # Run the online data migrations before archiving. $MANAGE db online_data_migrations # We need to archive the deleted marker instance used by the # fill_virtual_interface_list online data migration in order to trigger # creation of a new deleted marker instance. set +e archive_deleted_rows set -e # Verify whether online data migrations run after archiving will succeed. # See for more details: https://bugs.launchpad.net/nova/+bug/1824435 $MANAGE db online_data_migrations # temporary disable nova-manage placement heal_allocations testing until # https://review.opendev.org/c/openstack/nova/+/802060 lands exit 0 ",17,23
openstack%2Fopenstacksdk~feature%2Fr1~I2bdcf4eb573209242aebe5688f73158f6405913a,openstack/openstacksdk,feature/r1,I2bdcf4eb573209242aebe5688f73158f6405913a,Clustering - reindentation of the docstrings,MERGED,2021-10-29 12:31:07.000000000,2021-11-02 12:49:15.000000000,2021-11-02 12:42:34.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-29 12:31:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/7c46c54f2497e1ce559d470909934c6fb7c13140', 'message': 'Clustering - reindentation of the docstrings\n\nChange-Id: I2bdcf4eb573209242aebe5688f73158f6405913a\n'}, {'number': 2, 'created': '2021-10-29 14:29:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/11006180f13553c3e0261f8990f9efce24a37ae9', 'message': 'Clustering - reindentation of the docstrings\n\nChange-Id: I2bdcf4eb573209242aebe5688f73158f6405913a\n'}, {'number': 3, 'created': '2021-10-29 16:53:38.000000000', 'files': ['openstack/clustering/v1/_proxy.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/e574e4dd3b2a81ec9cb778a48dd3ad3dd98a89d6', 'message': 'Clustering - reindentation of the docstrings\n\nChange-Id: I2bdcf4eb573209242aebe5688f73158f6405913a\n'}]",4,815957,e574e4dd3b2a81ec9cb778a48dd3ad3dd98a89d6,11,2,3,33945,,,0,"Clustering - reindentation of the docstrings

Change-Id: I2bdcf4eb573209242aebe5688f73158f6405913a
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/57/815957/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack/clustering/v1/_proxy.py'],1,7c46c54f2497e1ce559d470909934c6fb7c13140,," :class:`~openstack.clustering.v1.profile_type.ProfileType` object of :class:`~openstack.clustering.v1.profile_type.ProfileType`. object. :class:`~openstack.clustering.v1.policy_type.PolicyType` :class:`~openstack.clustering.v1.policy_type.PolicyType`. object. :class:`~openstack.clustering.v1.profile.Profile`, it is comprised of the properties on the Profile class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. profile. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. from all projects will be returned. :class:`~openstack.clustering.v1.profile.ProfileValidate`, it is comprised of the properties on the Profile class. :class:`~openstack.clustering.v1.cluster.Cluster`, it is comprised of the properties on the Cluster class. will be forced immediately. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. from all projects will be returned. deleted nodes to be destroyed right away. recover action. operation. :class:`~openstack.clustering.v1.node.Node`, it is comprised of the properties on the ``Node`` class. will be forced immediately. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the specified node does not exist. when set to ""True"", None will be returned when attempting to find a nonexistent policy or None. which the resulted node(s) is a member. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. returned from the query. parameter to make an initial limited request and use the ID of the last-seen node from the response as the marker parameter value in a subsequent limited request. from all projects will be returned. action. version to be used for node adoption. For example, ``os.nova.sever-1.0``. OpenStack resource to be adopted as a Senlin node. this parameter will have the node named automatically. of the target resource should be created if possible. Default is False. to be associated with the adopted node. to override attributes derived from the target resource. operation. :class:`~openstack.clustering.v1.policy.Policy`, it is comprised of the properties on the ``Policy`` class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the specified policy does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent policy. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. all projects will be returned. :class:`~openstack.clustering.v1.policy.PolicyValidate`, it is comprised of the properties on the Policy class. enabled on the cluster. :class:`~openstack.clustering.v1.receiver.Receiver`, it is comprised of the properties on the Receiver class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the specified receiver does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent receiver. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. returned. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. value can be ``cluster``, ``node``, ``policy`` etc. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. projects should be returned. This option is subject to access control checking. The resource must have a ``status`` attribute. checks. Default to 2. Default to 120. to the desired status failed to occur in specified seconds. has transited to one of the failure statuses. ``status`` attribute. checks. Default to 2. Default to 120. to delete failed to occur in the specified seconds. :class:`~openstack.clustering.v1.service.Service` object of :class:`~openstack.clustering.v1.profile_type.ProfileType`. object."," :class:`~openstack.clustering.v1.profile_type.ProfileType` object of :class:`~openstack.clustering.v1.profile_type.ProfileType`. object. :class:`~openstack.clustering.v1.policy_type.PolicyType` :class:`~openstack.clustering.v1.policy_type.PolicyType`. object. :class:`~openstack.clustering.v1.profile.Profile`, it is comprised of the properties on the Profile class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. profile. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. from all projects will be returned. :class:`~openstack.clustering.v1.profile.ProfileValidate`, it is comprised of the properties on the Profile class. :class:`~openstack.clustering.v1.cluster.Cluster`, it is comprised of the properties on the Cluster class. will be forced immediately. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. from all projects will be returned. deleted nodes to be destroyed right away. recover action. operation. :class:`~openstack.clustering.v1.node.Node`, it is comprised of the properties on the ``Node`` class. will be forced immediately. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the specified node does not exist. when set to ""True"", None will be returned when attempting to find a nonexistent policy or None. which the resulted node(s) is a member. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. returned from the query. parameter to make an initial limited request and use the ID of the last-seen node from the response as the marker parameter value in a subsequent limited request. from all projects will be returned. action. version to be used for node adoption. For example, ``os.nova.sever-1.0``. OpenStack resource to be adopted as a Senlin node. this parameter will have the node named automatically. of the target resource should be created if possible. Default is False. to be associated with the adopted node. to override attributes derived from the target resource. operation. :class:`~openstack.clustering.v1.policy.Policy`, it is comprised of the properties on the ``Policy`` class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the specified policy does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent policy. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. all projects will be returned. :class:`~openstack.clustering.v1.policy.PolicyValidate`, it is comprised of the properties on the Policy class. enabled on the cluster. :class:`~openstack.clustering.v1.receiver.Receiver`, it is comprised of the properties on the Receiver class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the specified receiver does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent receiver. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. returned. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. value can be ``cluster``, ``node``, ``policy`` etc. key can optionally be attached with a sorting direction modifier which can be ``asc`` or ``desc``. query. Returns a number of items up to the specified limit value. parameter to make an initial limited request and use the ID of the last-seen item from the response as the marker parameter value in a subsequent limited request. projects should be returned. This option is subject to access control checking. The resource must have a ``status`` attribute. checks. Default to 2. Default to 120. to the desired status failed to occur in specified seconds. has transited to one of the failure statuses. ``status`` attribute. checks. Default to 2. Default to 120. to delete failed to occur in the specified seconds. :class:`~openstack.clustering.v1.service.Service` object of :class:`~openstack.clustering.v1.profile_type.ProfileType`. object.",122,122
openstack%2Fcinder~stable%2Fxena~Iff99c837a06e90513a660ad8b25279c81e858697,openstack/cinder,stable/xena,Iff99c837a06e90513a660ad8b25279c81e858697,PowerMax Docs - Xena release notes,MERGED,2021-10-14 11:31:06.000000000,2021-11-02 12:48:24.000000000,2021-11-02 12:42:55.000000000,"[{'_account_id': 5314}, {'_account_id': 13425}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-14 11:31:06.000000000', 'files': ['doc/source/configuration/block-storage/drivers/dell-emc-powermax-driver.rst'], 'web_link': 'https://opendev.org/openstack/cinder/commit/febc0a003965906115e318a38fd7d8fc1da38786', 'message': 'PowerMax Docs - Xena release notes\n\nUnisphere for PowerMax version change and deprecation\nnotice for the VMAX Hybrid and HyperMax OS (5977)\n\nChange-Id: Iff99c837a06e90513a660ad8b25279c81e858697\n(cherry picked from commit f1431ff6d08b91ea583d0508f70ae8a5d3539280)\n'}]",2,813986,febc0a003965906115e318a38fd7d8fc1da38786,18,3,1,12670,,,0,"PowerMax Docs - Xena release notes

Unisphere for PowerMax version change and deprecation
notice for the VMAX Hybrid and HyperMax OS (5977)

Change-Id: Iff99c837a06e90513a660ad8b25279c81e858697
(cherry picked from commit f1431ff6d08b91ea583d0508f70ae8a5d3539280)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/86/813986/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/configuration/block-storage/drivers/dell-emc-powermax-driver.rst'],1,febc0a003965906115e318a38fd7d8fc1da38786,,".. _VMAX-Hybrid: .. note:: DEPRECATION NOTICE: The VMAX Hybrid series will not be supported from the ``Z`` release of OpenStack. Also, any All Flash array running HyperMaxOS 5977 will no longer be supported from the ``Z`` release onwards. 8000, VMAX All Flash 250F, 450F, 850F and 950F and VMAX-Hybrid_.The Dell EMC PowerMax Cinder driver supports the VMAX-Hybrid_ series, VMAX All-Flash series and the PowerMax arrays. The array operating system software, Solutions Enabler 9.2.2 series, and Unisphere for PowerMax 9.2.2 series are required to run Dell EMC PowerMax(login is required). See the `Dell EMC Solutions Enabler 9.2.2 Installation | Xena | 9.2.2 | 5978.711 | +-----------+------------------------+-------------+ the ``Z`` release of OpenStack. Some functionality will not be available in older versions of the OS. If in any doubt, please contact your local PowerMax representative.There are five Dell EMC Software Suites sold with the VMAX-Hybrid_ arrays:PowerMax, VMAX All Flash and VMAX-Hybrid_ PowerMax and VMAX-Hybrid_ support ``Diamond``, ``Platinum``, ``Gold``, ``Silver``, ``Bronze``, ``Optimized``, and ``None`` service levels. VMAX All Flash running HyperMax OS (5977) supports ``Diamond`` and ``None``. VMAX-Hybrid_ and All Flash support ``DSS_REP``, ``DSS``, ``OLTP_REP``, ``OLTP``, and ``None`` workloads, the latter up until ucode 5977. Please refer to Stein PowerMax online documentation if you wish to use ``workload``. There is no support for workloads in PowerMax OS (5978) or greater. These will be silently ignored if set for VMAX All-Flash arrays which have been upgraded to PowerMax OS (5988). If extra spec ``storagetype:disablecompression`` is set on a VMAX-Hybrid_, it is ignored because compression is not an available feature on a VMAX-Hybrid_.- The ``allow_extend`` is only applicable on VMAX-Hybrid_ arrays or All Flash arrays with HyperMax OS. If included elsewhere, it is ignored. * ``allow_extend`` Only applicable to VMAX-Hybrid_ arrays or All Flash arrays running HyperMax OS (5977). It is a flag for allowing the extension of replicated volumes. To extend a volume in an SRDF relationship, this relationship must first be broken, the R1 device extended, and a new device pair established. If not explicitly set, this flag defaults to ``False``. VMAX-Hybrid_ arrays or All Flash arrays with HyperMax OS). VMAX-Hybrid_, the target array is an All Flash, and an All Flash incompatible service level like Bronze is configured), no service level will be applied. applicable to VMAX-Hybrid_ arrays or All Flash array with HyperMax OS."," 8000, VMAX All Flash 250F, 450F, 850F and 950F and VMAX Hybrid. Please note there will be extended support of the VMAX Hybrid series until further notice.The Dell EMC PowerMax Cinder driver supports the VMAX-3 hybrid series, VMAX All-Flash series and the PowerMax arrays. The array operating system software, Solutions Enabler 9.2.1 series, and Unisphere for PowerMax 9.2.1 series are required to run Dell EMC PowerMax(login is required). See the `Dell EMC Solutions Enabler 9.2.1 Installation further notice. Some functionality will not be available in older versions of the OS. If in any doubt, please contact your local PowerMax representative.There are five Dell EMC Software Suites sold with the VMAX Hybrid arrays:PowerMax, VMAX All Flash and Hybrid PowerMax and Hybrid support ``Diamond``, ``Platinum``, ``Gold``, ``Silver``, ``Bronze``, ``Optimized``, and ``None`` service levels. VMAX All Flash running HyperMax OS (5977) supports ``Diamond`` and ``None``. Hybrid and All Flash support ``DSS_REP``, ``DSS``, ``OLTP_REP``, ``OLTP``, and ``None`` workloads, the latter up until ucode 5977. Please refer to Stein PowerMax online documentation if you wish to use ``workload``. There is no support for workloads in PowerMax OS (5978) or greater. These will be silently ignored if set for VMAX All-Flash arrays which have been upgraded to PowerMax OS (5988). If extra spec ``storagetype:disablecompression`` is set on a Hybrid, it is ignored because compression is not an available feature on a VMAX3 Hybrid.- The ``allow_extend`` is only applicable on Hybrid arrays or All Flash arrays with HyperMax OS. If included elsewhere, it is ignored. * ``allow_extend`` Only applicable to Hybrid arrays or All Flash arrays running HyperMax OS (5977). It is a flag for allowing the extension of replicated volumes. To extend a volume in an SRDF relationship, this relationship must first be broken, the R1 device extended, and a new device pair established. If not explicitly set, this flag defaults to ``False``. Hybrid arrays or All Flash arrays with HyperMax OS). Hybrid, the target array is an All Flash, and an All Flash incompatible service level like Bronze is configured), no service level will be applied. applicable to Hybrid arrays or All Flash array with HyperMax OS.",49,37
openstack%2Fnova~master~Icecb75d9a374b29f2cf70d3aa155dc6c92bf715f,openstack/nova,master,Icecb75d9a374b29f2cf70d3aa155dc6c92bf715f,Fix unit test for oslo.concurrency 4.5,MERGED,2021-10-29 07:40:52.000000000,2021-11-02 12:48:00.000000000,2021-11-02 12:42:18.000000000,"[{'_account_id': 4690}, {'_account_id': 7166}, {'_account_id': 11604}, {'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-29 07:40:52.000000000', 'files': ['nova/tests/unit/compute/test_compute.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/be9b022bfc2c8b98d751b1f9a68ce55dd6ccf8b6', 'message': 'Fix unit test for oslo.concurrency 4.5\n\nThe signature of the lock() function gained a new kwargs in\noslo.concurrency 4.5 which makes some nova unit test failing. This patch\nchanges the mocking the unit test to mock in a higher level in the\nlocking infra to avoid depending on the exact signature.\n\nThis will enable\nhttps://review.opendev.org/c/openstack/requirements/+/814889/ to land.\n\nChange-Id: Icecb75d9a374b29f2cf70d3aa155dc6c92bf715f\n'}]",5,815940,be9b022bfc2c8b98d751b1f9a68ce55dd6ccf8b6,16,6,1,9708,,,0,"Fix unit test for oslo.concurrency 4.5

The signature of the lock() function gained a new kwargs in
oslo.concurrency 4.5 which makes some nova unit test failing. This patch
changes the mocking the unit test to mock in a higher level in the
locking infra to avoid depending on the exact signature.

This will enable
https://review.opendev.org/c/openstack/requirements/+/814889/ to land.

Change-Id: Icecb75d9a374b29f2cf70d3aa155dc6c92bf715f
",git fetch https://review.opendev.org/openstack/nova refs/changes/40/815940/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/compute/test_compute.py'],1,be9b022bfc2c8b98d751b1f9a68ce55dd6ccf8b6,oslo.concurrency-4.5," mock.patch( 'nova.utils.synchronized', side_effect=lambda lockname: lambda f: f), mock_lock.assert_called_once_with(lock_name) mock.patch( 'nova.utils.synchronized', side_effect=lambda lockname: lambda f: f), mock_lock.assert_called_once_with(lock_name) mock.patch( 'nova.utils.synchronized', side_effect=lambda lockname: lambda f: f), mock_lock.assert_called_once_with(lock_name)"," mock.patch('oslo_concurrency.lockutils.lock'), mock_lock.assert_called_once_with(lock_name, mock.ANY, mock.ANY, mock.ANY, delay=mock.ANY, do_log=mock.ANY, fair=mock.ANY, semaphores=mock.ANY) mock.patch('oslo_concurrency.lockutils.lock'), mock_lock.assert_called_once_with(lock_name, mock.ANY, mock.ANY, mock.ANY, delay=mock.ANY, do_log=mock.ANY, fair=mock.ANY, semaphores=mock.ANY) mock.patch('oslo_concurrency.lockutils.lock'), mock_lock.assert_called_once_with(lock_name, mock.ANY, mock.ANY, mock.ANY, delay=mock.ANY, do_log=mock.ANY, fair=mock.ANY, semaphores=mock.ANY)",12,12
openstack%2Fopenstacksdk~feature%2Fr1~Id425b9a57033c89b8a8466a32ab202cdf7556cb2,openstack/openstacksdk,feature/r1,Id425b9a57033c89b8a8466a32ab202cdf7556cb2,exception: Correct argument,MERGED,2021-10-27 18:28:49.000000000,2021-11-02 12:47:50.000000000,2021-11-02 12:42:23.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-27 18:28:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/1d0c6da8259e256f644534ad17d6f05491574226', 'message': ""exception: Correct argument\n\nThere were multiple calls to subclasses of 'SDKException' that were\nproviding a 'msg' kwarg. This doesn't exist. Instead, the parameter is\ncalled 'message'. 'msg' matches with e.g. the exceptions from unittest\nso update everything to use that.\n\nChange-Id: Id425b9a57033c89b8a8466a32ab202cdf7556cb2\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2021-10-28 11:42:05.000000000', 'files': ['openstack/accelerator/v2/deployable.py', 'openstack/resource.py', 'openstack/block_storage/v2/backup.py', 'openstack/block_storage/v3/backup.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/58270810eeaafc86d744a8f6964b78cc22208d7d', 'message': ""exception: Correct argument\n\nThere were multiple calls to subclasses of 'SDKException' that were\nproviding a 'msg' kwarg. This doesn't exist. Instead, the parameter is\ncalled 'message'. Correct this by using positional args instead.\n\nChange-Id: Id425b9a57033c89b8a8466a32ab202cdf7556cb2\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",3,815725,58270810eeaafc86d744a8f6964b78cc22208d7d,13,2,2,15334,,,0,"exception: Correct argument

There were multiple calls to subclasses of 'SDKException' that were
providing a 'msg' kwarg. This doesn't exist. Instead, the parameter is
called 'message'. Correct this by using positional args instead.

Change-Id: Id425b9a57033c89b8a8466a32ab202cdf7556cb2
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/25/815725/2 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/exceptions.py', 'openstack/resource.py', 'openstack/network/v2/firewall_policy.py', 'openstack/tests/unit/orchestration/v1/test_stack.py', 'openstack/tests/unit/test_exceptions.py', 'openstack/tests/unit/config/test_from_conf.py', 'openstack/tests/unit/test_proxy.py']",7,1d0c6da8259e256f644534ad17d6f05491574226,trivial," msg=""test"", http_status=404) msg=""test"", http_status=404) msg=""test"", http_status=500) msg=""test"", http_status=404)"," message=""test"", http_status=404) message=""test"", http_status=404) message=""test"", http_status=500) message=""test"", http_status=404)",71,68
openstack%2Fnova~master~Icb35e20179572fb713a397b4605312cf3294b41b,openstack/nova,master,Icb35e20179572fb713a397b4605312cf3294b41b,Query ports with admin client to get resource_request,MERGED,2021-09-28 11:00:38.000000000,2021-11-02 12:42:39.000000000,2021-11-02 12:42:39.000000000,"[{'_account_id': 4690}, {'_account_id': 7166}, {'_account_id': 10135}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-28 11:00:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/360a287c89135ab248271e173187644b53a3fedb', 'message': 'Query ports with admin client to get resource_request\n\nThe port.resource_request field is admin only. Nova depends on the\nvalue of this field to do a proper scheduling and resource allocation\nand deallocation for ports with resource request as well as to update\nthe port.binding:profile.allocation field with the resource providers\nthe requested resources are fulfilled from. However in some cases nova\ndoes not use a neutron admin client / elevated context to read the\nport. In this case neutron returns None for the port.resource_request\nfield and nova thinks that the port has no resource request.\n\nThis patch fixes all three places where previous testing showed that\ncontext elevation was missing.\n\nChange-Id: Icb35e20179572fb713a397b4605312cf3294b41b\nCloses-Bug: #1945310\n'}, {'number': 2, 'created': '2021-09-28 12:13:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9798cfb9a803e97c6af71aeef3d923199437fe21', 'message': 'Query ports with admin client to get resource_request\n\nThe port.resource_request field is admin only. Nova depends on the\nvalue of this field to do a proper scheduling and resource allocation\nand deallocation for ports with resource request as well as to update\nthe port.binding:profile.allocation field with the resource providers\nthe requested resources are fulfilled from. However in some cases nova\ndoes not use a neutron admin client / elevated context to read the\nport. In this case neutron returns None for the port.resource_request\nfield and nova thinks that the port has no resource request.\n\nThis patch fixes all three places where previous testing showed that\ncontext elevation was missing.\n\nChange-Id: Icb35e20179572fb713a397b4605312cf3294b41b\nCloses-Bug: #1945310\n'}, {'number': 3, 'created': '2021-10-20 09:41:10.000000000', 'files': ['nova/tests/unit/network/test_neutron.py', 'nova/network/neutron.py', 'nova/compute/api.py', 'nova/tests/functional/test_servers_resource_request.py', 'nova/tests/unit/compute/test_api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/49b481ec98087351ce1366d3afb9f4a79cd16ae3', 'message': 'Query ports with admin client to get resource_request\n\nThe port.resource_request field is admin only. Nova depends on the\nvalue of this field to do a proper scheduling and resource allocation\nand deallocation for ports with resource request as well as to update\nthe port.binding:profile.allocation field with the resource providers\nthe requested resources are fulfilled from. However in some cases nova\ndoes not use a neutron admin client / elevated context to read the\nport. In this case neutron returns None for the port.resource_request\nfield and nova thinks that the port has no resource request.\n\nThis patch fixes all three places where previous testing showed that\ncontext elevation was missing.\n\nChange-Id: Icb35e20179572fb713a397b4605312cf3294b41b\nCloses-Bug: #1945310\n'}]",7,811396,49b481ec98087351ce1366d3afb9f4a79cd16ae3,29,4,3,9708,,,0,"Query ports with admin client to get resource_request

The port.resource_request field is admin only. Nova depends on the
value of this field to do a proper scheduling and resource allocation
and deallocation for ports with resource request as well as to update
the port.binding:profile.allocation field with the resource providers
the requested resources are fulfilled from. However in some cases nova
does not use a neutron admin client / elevated context to read the
port. In this case neutron returns None for the port.resource_request
field and nova thinks that the port has no resource request.

This patch fixes all three places where previous testing showed that
context elevation was missing.

Change-Id: Icb35e20179572fb713a397b4605312cf3294b41b
Closes-Bug: #1945310
",git fetch https://review.opendev.org/openstack/nova refs/changes/96/811396/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/network/neutron.py', 'nova/compute/api.py', 'nova/tests/functional/test_servers_resource_request.py']",3,360a287c89135ab248271e173187644b53a3fedb,bug/1945310,,"import unittest # this is bug 1945310 @unittest.expectedFailure def test_interface_attach_with_resource_request_old_compute(self): super().test_interface_attach_with_resource_request_old_compute() # this is bug 1945310 @unittest.expectedFailure def test_interface_detach_with_port_with_bandwidth_request(self): super().test_interface_detach_with_port_with_bandwidth_request() # this is bug 1945310 @unittest.expectedFailure def test_interface_detach_with_port_with_bandwidth_request(self): super().test_interface_detach_with_port_with_bandwidth_request() # this is bug 1945310 @unittest.expectedFailure def test_live_migrate_with_qos_port(self, host=None): super().test_live_migrate_with_qos_port() # this is bug 1945310 @unittest.expectedFailure def test_live_migrate_with_qos_port_with_target_host(self): super( ).test_live_migrate_with_qos_port_with_target_host() # this is bug 1945310 @unittest.expectedFailure def test_live_migrate_with_qos_port_reschedule_success(self): super( ).test_live_migrate_with_qos_port_reschedule_success() # this is bug 1945310 @unittest.expectedFailure def test_live_migrate_with_qos_port(self, host=None): super().test_live_migrate_with_qos_port() # this is bug 1945310 @unittest.expectedFailure def test_live_migrate_with_qos_port_with_target_host(self): super( ).test_live_migrate_with_qos_port_with_target_host() # this is bug 1945310 @unittest.expectedFailure def test_live_migrate_with_qos_port_reschedule_success(self): super( ).test_live_migrate_with_qos_port_reschedule_success() # this is bug 1945310 @unittest.expectedFailure def test_interface_attach(self, mock_get_service): super().test_interface_attach()",11,58
openstack%2Fopenstacksdk~feature%2Fr1~I1e4a95c757e1017d1bb2674e5f5f4d3ea10a058b,openstack/openstacksdk,feature/r1,I1e4a95c757e1017d1bb2674e5f5f4d3ea10a058b,Network - reindentation of the docstrings,MERGED,2021-10-28 14:38:54.000000000,2021-11-02 12:42:32.000000000,2021-11-02 12:42:32.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-28 14:38:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/52abcb9f3fd8ab0b6ccfe07d4819af721bef4130', 'message': 'Network - reindentation of the docstrings\n\nChange-Id: I1e4a95c757e1017d1bb2674e5f5f4d3ea10a058b\n'}, {'number': 2, 'created': '2021-10-29 05:57:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/1398f15dfd1303c5a35625813c81806079b0604b', 'message': 'Network - reindentation of the docstrings\n\nChange-Id: I1e4a95c757e1017d1bb2674e5f5f4d3ea10a058b\n'}, {'number': 3, 'created': '2021-10-29 05:58:52.000000000', 'files': ['openstack/network/v2/_proxy.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/0fc28b39a8f9b2151f3d3fef13b95cbf029c68d3', 'message': 'Network - reindentation of the docstrings\n\nChange-Id: I1e4a95c757e1017d1bb2674e5f5f4d3ea10a058b\n'}]",2,815852,0fc28b39a8f9b2151f3d3fef13b95cbf029c68d3,9,2,3,33945,,,0,"Network - reindentation of the docstrings

Change-Id: I1e4a95c757e1017d1bb2674e5f5f4d3ea10a058b
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/52/815852/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack/network/v2/_proxy.py'],1,52abcb9f3fd8ab0b6ccfe07d4819af721bef4130,," :class:`~openstack.exceptions.ResourceNotFound` will be raised when the address group does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent address group. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None when no resource can be found. the resources being returned. represented by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the address scope does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent address scope. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None when no resource can be found. the resources being returned. represented by ``value``. resources being returned. running on. :class:`~openstack.network.v2.agent.Agent` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the agent does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent agent. :class:`~openstack.network.v2.agent.Agent` instance. when no resource can be found. :class:`~openstack.network.v2.agent.Agent` instance. by ``value``. :class:`~openstack.network.v2.network_agent.Agent` to limit the resources being returned. :class:`~openstack.network.v2.network_agent.Agent` :class:`~openstack.network.v2.network_agent.Agent` :class:`~openstack.network.v2.network.Network` resources returned. The value is the ID or name of a project auto_allocated_topology.AutoAllocatedTopology` :class:`~openstack.exceptions.ResourceNotFound` will be raised when the topology does not exist. When set to ``True``, no exception will be raised when attempting to delete nonexistant topology The value is the ID or name of a project auto_allocated_topology.ValidateTopology` returned resources. Valid parameters include: :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None the resources being returned. Currently no parameter is supported. a :class:`~openstack.network.v2.flavor.Flavor`, comprised of the properties on the Flavor class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the flavor does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent flavor. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. when no resource can be found. by ``value``. the resources being returned. Valid parameters include: or a :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. request to perform compare-and-swap update. or None :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. when no resource can be found. the resources being returned. Valid parameters are: floating IP address. a floating IP. associated. associated with. or ``DOWN``. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. request to perform compare-and-swap update. by ``value``. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. when no resource can be found. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. the resources being returned. Valid parameters are: :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the health monitor does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent health monitor. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. HealthMonitor` or None :class:`~openstack.network.v2.health_monitor.HealthMonitor` instance. :class:`~openstack.network.v2.health_monitor.HealthMonitor` when no resource can be found. the resources being returned. Valid parameters are: monitor. monitor. associated with. wait for a connection to be established before it times out. check, which can be ``PING``, ``TCP``, ``HTTP`` or ``HTTPS``. :class:`~openstack.network.v2.health_monitor. HealthMonitor` instance. represented by ``value``. None. represented by ``ikepolicy``. a :class:`~openstack.network.v2.listener.Listener`, comprised of the properties on the Listener class. :class:`~openstack.network.v2.listener.Listener` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the listner does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent listener. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.listener.Listener` instance. when no resource can be found. the resources being returned. Valid parameters are: permitted for the load-balancer. secret. :class:`~openstack.network.v2.listener.Listener` instance. represented by ``listener``. :class:`~openstack.network.v2.load_balancer.LoadBalancer` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the load balancer does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent load balancer. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.load_balancer.LoadBalancer` instance. when no resource can be found. the resources being returned. :class:`~openstack.network.v2.load_balancer.LoadBalancer` instance. represented by ``load_balancer``. The value can be either the ID of a metering label or a :class:`~openstack.network.v2.metering_label.MeteringLabel` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the metering label does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent metering label. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. MeteringLabel` or None :class:`~openstack.network.v2.metering_label.MeteringLabel` instance. :class:`~openstack.network.v2.metering_label.MeteringLabel` when no resource can be found. the resources being returned. Valid parameters are: shared. associated with. :class:`~openstack.network.v2.metering_label. MeteringLabel` instance. represented by ``metering_label``. MeteringLabelRule` :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. MeteringLabelRule` or None when no resource can be found. the resources being returned. Valid parameters are: applied. associated with. associated with. this metering label rule. MeteringLabelRule` Either the id of a metering label rule or a :class:`~openstack.network.v2.metering_label_rule. MeteringLabelRule` instance. represented by ``metering_label_rule``. MeteringLabelRule` a :class:`~openstack.network.v2.network.Network`, comprised of the properties on the Network class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the network does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent network. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. when no resource can be found. the network. the network. ID for GENEVE/GRE/VXLAN networks :class:`~openstack.network.v2.network.Network`. request to perform compare-and-swap update. by ``network``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. NetworkIPAvailability` or None NetworkIPAvailability` when no resource can be found. availability. network IP availability. NetworkIPAvailability` :class:`~openstack.network.v2. network_segment_range.NetworkSegmentRange`, comprised of the properties on the NetworkSegmentRange class. .NetworkSegmentRange` network segment range or a :class:`~openstack.network.v2.network_segment_range. NetworkSegmentRange` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the network segment range does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent network segment range. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. .NetworkSegmentRange` or None segment range or a :class:`~openstack.network.v2. network_segment_range.NetworkSegmentRange` instance. NetworkSegmentRange` when no resource can be found. configuration file. projects segment range segment ranges ranges ranges used by which tenant network segment range NetworkSegmentRange` or a :class:`~openstack.network.v2._network_segment_range. NetworkSegmentRange` instance. represented by ``value``. NetworkSegmentRange` a :class:`~openstack.network.v2.pool.Pool`, comprised of the properties on the Pool class. :class:`~openstack.network.v2.pool.Pool` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the pool does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent pool. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.pool.Pool` instance. when no resource can be found. the resources being returned. Valid parameters are: of ``round-robin``, ``least-connections`` and so on. with. ``TCP``, ``HTTP`` or ``HTTPS``. service. located. :class:`~openstack.network.v2.pool.Pool` instance. by ``pool``. :class:`~openstack.network.v2.pool.Pool` instance that the member will be created in. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the pool member does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent pool member. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.pool_member.PoolMember` instance. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. when no resource can be found. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. the resources being returned. Valid parameters are: member. associated with. portion of traffic that this member should receive from the pool. :class:`~openstack.network.v2.pool_member.PoolMember` instance. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. represented by ``pool_member``. a :class:`~openstack.network.v2.port.Port`, comprised of the properties on the Port class. create a :class:`~openstack.network.v2.port.Port`, comprised of the properties on the Port class. :class:`~openstack.network.v2.port.Port` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the port does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent port. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.port.Port` instance. when no resource can be found. :class:`~openstack.network.v2.port.Port` instance. request to perform compare-and-swap update. by ``port``. a :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule`, comprised of the properties on the QoSBandwidthLimitRule class. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSBandwidthLimitRule` rule or a :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent bandwidth limit rule. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. QoSBandwidthLimitRule` or None a :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSBandwidthLimitRule` when no resource can be found. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. the resources being returned. QoSBandwidthLimitRule` :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. represented by ``value``. QoSBandwidthLimitRule` a :class:`~openstack.network.v2. qos_dscp_marking_rule.QoSDSCPMarkingRule`, comprised of the properties on the QosDscpMarkingRule class. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSDSCPMarkingRule` rule or a :class:`~openstack.network.v2. qos_dscp_marking_rule.QoSDSCPMarkingRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent minimum bandwidth rule. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. QoSDSCPMarkingRule` or None a :class:`~openstack.network.v2.qos_dscp_marking_rule. QoSDSCPMarkingRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSDSCPMarkingRule` when no resource can be found. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. the resources being returned. QoSDSCPMarkingRule` :class:`~openstack.network.v2.qos_dscp_marking_rule. QoSDSCPMarkingRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. represented by ``value``. QoSDSCPMarkingRule` a :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule`, comprised of the properties on the QoSMinimumBandwidthRule class. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSMinimumBandwidthRule` rule or a :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent minimum bandwidth rule. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. QoSMinimumBandwidthRule` or None a :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSMinimumBandwidthRule` when no resource can be found. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. the resources being returned. QoSMinimumBandwidthRule` :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. represented by ``value``. QoSMinimumBandwidthRule` a :class:`~openstack.network.v2.qos_policy. QoSPolicy`, comprised of the properties on the QoSPolicy class. :class:`~openstack.network.v2.qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the QoS policy does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent QoS policy. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. None :class:`~openstack.network.v2.qos_policy.QoSPolicy` instance. when no resource can be found. the resources being returned. Valid parameters are: :class:`~openstack.network.v2.qos_policy.QoSPolicy` instance. by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. or None rule type or a :class:`~openstack.network.v2. qos_rule_type.QoSRuleType` instance. when no resource can be found. resources returned. Valid parameters include: :class:`~openstack.network.v2.quota.Quota` instance. The ID of a quota is the same as the project ID for the quota. :class:`~openstack.exceptions.ResourceNotFound` will be raised when quota does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent quota. :class:`~openstack.network.v2.quota.Quota` instance. The ID of a quota is the same as the project ID for the quota. be returned. when no resource can be found. :class:`~openstack.network.v2.quota.QuotaDefault` instance. The ID of a default quota is the same as the project ID for the default quota. when no resource can be found. the resources being returned. Currently no query parameter is supported. :class:`~openstack.network.v2.quota.Quota` instance. The ID of a quota is the same as the project ID for the quota. by ``quota``. underlying methods. such as query filters. the resources being returned. Available parameters include: affects represented by ``rbac_policy``. a :class:`~openstack.network.v2.router.Router`, comprised of the properties on the Router class. :class:`~openstack.network.v2.router.Router` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the router does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent router. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.router.Router` instance. when no resource can be found. the resources being returned. Valid parameters are: with. :class:`~openstack.network.v2.router.Router` instance. request to perform compare-and-swap update. by ``router``. :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` the resources returned :class:`~openstack.network.v2.network_agent.Agent` the resources returned :class:`~openstack.network.v2.agent.Agent` instance :class:`~openstack.network.v2.agent.Agent` instance :class:`~openstack.exceptions.ResourceNotFound` will be raised when the firewall group does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent firewall group. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. FirewallGroup` or None :class:`~openstack.network.v2.firewall_group.FirewallGroup` instance. :class:`~openstack.network.v2.firewall_group.FirewallGroup` when no resource can be found. the resources being returned. Valid parameters are: across all projects. ACTIVE, INACTIVE, ERROR, PENDING_UPDATE, or PENDING_DELETE. firewall group. associated with. represented by ``firewall_group``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the firewall policy does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent firewall policy. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. FirewallPolicy` or None or a :class:`~openstack.network.v2.firewall_policy.FirewallPolicy` instance. :class:`~openstack.network.v2.firewall_policy.FirewallPolicy` when no resource can be found. the resources being returned. Valid parameters are: associated with the firewall policy. across all projects. represented by ``firewall_policy``. rule after. It will be worked only when insert_before is none. rule before. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the firewall rule does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent firewall rule. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. FirewallRule` or None :class:`~openstack.network.v2.firewall_rule.FirewallRule` instance. :class:`~openstack.network.v2.firewall_rule.FirewallRule` when no resource can be found. the resources being returned. Valid parameters are: matches the firewall rule. or CIDR for the firewall rule. the firewall rule. across all projects. for the firewall rule. rule. associated with. represented by ``firewall_rule``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the security group does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent security group. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. SecurityGroup` or None :class:`~openstack.network.v2.security_group.SecurityGroup` instance. :class:`~openstack.network.v2.security_group.SecurityGroup` when no resource can be found. the resources being returned. Valid parameters are: associated with. request to perform compare-and-swap update. represented by ``security_group``. create a :class:`~openstack.network.v2.\ security_group_rule.SecurityGroupRule`, comprised of the properties on the SecurityGroupRule class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the security group rule does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent security group rule. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. SecurityGroupRule` or None when no resource can be found. in CIDR must match the ingress or egress rule. is associated with. SecurityGroupRule` a :class:`~openstack.network.v2.segment.Segment`, comprised of the properties on the Segment class. :class:`~openstack.network.v2.segment.Segment` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the segment does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent segment. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.segment.Segment` instance. when no resource can be found. :class:`~openstack.network.v2.segment.Segment` instance. by ``value``. the resources being returned. a :class:`~openstack.network.v2.service_profile .ServiceProfile`, comprised of the properties on the ServiceProfile class. profile or a :class:`~openstack.network.v2.service_profile .ServiceProfile` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the service profile does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent service profile. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. .ServiceProfile` or None .ServiceProfile` when no resource can be found. resources returned. Available parameters inclue: :class:`~openstack.network.v2.service_profile .ServiceProfile` instance. represented by ``value``. a :class:`~openstack.network.v2.subnet.Subnet`, comprised of the properties on the Subnet class. :class:`~openstack.network.v2.subnet.Subnet` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the subnet does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent subnet. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.subnet.Subnet` instance. when no resource can be found. CIDR. :class:`~openstack.network.v2.subnet.Subnet` instance. request to perform compare-and-swap update. by ``subnet``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the subnet pool does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent subnet pool. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None when no resource can be found. represented by ``subnet_pool``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.network.v2.trunk.Trunk` when no resource can be found. the resources being returned. represented by ``trunk``. :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the vpn service does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent vpn service. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.vpn_service.VPNService` instance. :class:`~openstack.network.v2.vpn_service.VPNService` when no resource can be found. the resources being returned. represented by ``vpn_service``. or a :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. or a :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. forwarding or a :class:`~openstack.network.v2. port_forwarding.PortForwarding`instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. PortForwarding` or None port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. or a :class:`~openstack.network.v2. port_forwarding.PortForwarding` instance. PortForwarding` when no resource can be found. port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. the resources being returned. PortForwarding` port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. or a :class:`~openstack.network.v2. port_forwarding.PortForwarding`instance. forwarding represented by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. """"""Determine whether Floating IP should be deleted :param Resource obj: Floating IP object :param dict identified_resources: Optional dictionary with resources identified by other services for deletion. :param dict filters: dictionary with parameters"," :class:`~openstack.exceptions.ResourceNotFound` will be raised when the address group does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent address group. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None when no resource can be found. the resources being returned. represented by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the address scope does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent address scope. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None when no resource can be found. the resources being returned. represented by ``value``. resources being returned. running on. :class:`~openstack.network.v2.agent.Agent` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the agent does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent agent. :class:`~openstack.network.v2.agent.Agent` instance. when no resource can be found. :class:`~openstack.network.v2.agent.Agent` instance. by ``value``. :class:`~openstack.network.v2.network_agent.Agent` to limit the resources being returned. :class:`~openstack.network.v2.network_agent.Agent` :class:`~openstack.network.v2.network_agent.Agent` :class:`~openstack.network.v2.network.Network` resources returned. The value is the ID or name of a project auto_allocated_topology.AutoAllocatedTopology` :class:`~openstack.exceptions.ResourceNotFound` will be raised when the topology does not exist. When set to ``True``, no exception will be raised when attempting to delete nonexistant topology The value is the ID or name of a project auto_allocated_topology.ValidateTopology` returned resources. Valid parameters include: :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None the resources being returned. Currently no parameter is supported. a :class:`~openstack.network.v2.flavor.Flavor`, comprised of the properties on the Flavor class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the flavor does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent flavor. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. when no resource can be found. by ``value``. the resources being returned. Valid parameters include: or a :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. request to perform compare-and-swap update. or None :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. when no resource can be found. the resources being returned. Valid parameters are: floating IP address. a floating IP. associated. associated with. or ``DOWN``. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. request to perform compare-and-swap update. by ``value``. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. when no resource can be found. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. the resources being returned. Valid parameters are: :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the health monitor does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent health monitor. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. HealthMonitor` or None :class:`~openstack.network.v2.health_monitor.HealthMonitor` instance. :class:`~openstack.network.v2.health_monitor.HealthMonitor` when no resource can be found. the resources being returned. Valid parameters are: monitor. monitor. associated with. wait for a connection to be established before it times out. check, which can be ``PING``, ``TCP``, ``HTTP`` or ``HTTPS``. :class:`~openstack.network.v2.health_monitor. HealthMonitor` instance. represented by ``value``. None. represented by ``ikepolicy``. a :class:`~openstack.network.v2.listener.Listener`, comprised of the properties on the Listener class. :class:`~openstack.network.v2.listener.Listener` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the listner does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent listener. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.listener.Listener` instance. when no resource can be found. the resources being returned. Valid parameters are: permitted for the load-balancer. secret. :class:`~openstack.network.v2.listener.Listener` instance. represented by ``listener``. :class:`~openstack.network.v2.load_balancer.LoadBalancer` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the load balancer does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent load balancer. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.load_balancer.LoadBalancer` instance. when no resource can be found. the resources being returned. :class:`~openstack.network.v2.load_balancer.LoadBalancer` instance. represented by ``load_balancer``. The value can be either the ID of a metering label or a :class:`~openstack.network.v2.metering_label.MeteringLabel` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the metering label does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent metering label. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. MeteringLabel` or None :class:`~openstack.network.v2.metering_label.MeteringLabel` instance. :class:`~openstack.network.v2.metering_label.MeteringLabel` when no resource can be found. the resources being returned. Valid parameters are: shared. associated with. :class:`~openstack.network.v2.metering_label. MeteringLabel` instance. represented by ``metering_label``. MeteringLabelRule` :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. MeteringLabelRule` or None when no resource can be found. the resources being returned. Valid parameters are: applied. associated with. associated with. this metering label rule. MeteringLabelRule` Either the id of a metering label rule or a :class:`~openstack.network.v2.metering_label_rule. MeteringLabelRule` instance. represented by ``metering_label_rule``. MeteringLabelRule` a :class:`~openstack.network.v2.network.Network`, comprised of the properties on the Network class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the network does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent network. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. when no resource can be found. the network. the network. ID for GENEVE/GRE/VXLAN networks :class:`~openstack.network.v2.network.Network`. request to perform compare-and-swap update. by ``network``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. NetworkIPAvailability` or None NetworkIPAvailability` when no resource can be found. availability. network IP availability. NetworkIPAvailability` :class:`~openstack.network.v2. network_segment_range.NetworkSegmentRange`, comprised of the properties on the NetworkSegmentRange class. .NetworkSegmentRange` network segment range or a :class:`~openstack.network.v2.network_segment_range. NetworkSegmentRange` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the network segment range does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent network segment range. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. .NetworkSegmentRange` or None segment range or a :class:`~openstack.network.v2. network_segment_range.NetworkSegmentRange` instance. NetworkSegmentRange` when no resource can be found. configuration file. projects segment range segment ranges ranges ranges used by which tenant network segment range NetworkSegmentRange` or a :class:`~openstack.network.v2._network_segment_range. NetworkSegmentRange` instance. represented by ``value``. NetworkSegmentRange` a :class:`~openstack.network.v2.pool.Pool`, comprised of the properties on the Pool class. :class:`~openstack.network.v2.pool.Pool` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the pool does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent pool. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.pool.Pool` instance. when no resource can be found. the resources being returned. Valid parameters are: of ``round-robin``, ``least-connections`` and so on. with. ``TCP``, ``HTTP`` or ``HTTPS``. service. located. :class:`~openstack.network.v2.pool.Pool` instance. by ``pool``. :class:`~openstack.network.v2.pool.Pool` instance that the member will be created in. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the pool member does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent pool member. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.pool_member.PoolMember` instance. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. when no resource can be found. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. the resources being returned. Valid parameters are: member. associated with. portion of traffic that this member should receive from the pool. :class:`~openstack.network.v2.pool_member.PoolMember` instance. :class:`~openstack.network.v2.pool.Pool` instance that the member belongs to. represented by ``pool_member``. a :class:`~openstack.network.v2.port.Port`, comprised of the properties on the Port class. create a :class:`~openstack.network.v2.port.Port`, comprised of the properties on the Port class. :class:`~openstack.network.v2.port.Port` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the port does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent port. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.port.Port` instance. when no resource can be found. :class:`~openstack.network.v2.port.Port` instance. request to perform compare-and-swap update. by ``port``. a :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule`, comprised of the properties on the QoSBandwidthLimitRule class. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSBandwidthLimitRule` rule or a :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent bandwidth limit rule. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. QoSBandwidthLimitRule` or None a :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSBandwidthLimitRule` when no resource can be found. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. the resources being returned. QoSBandwidthLimitRule` :class:`~openstack.network.v2. qos_bandwidth_limit_rule.QoSBandwidthLimitRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. represented by ``value``. QoSBandwidthLimitRule` a :class:`~openstack.network.v2. qos_dscp_marking_rule.QoSDSCPMarkingRule`, comprised of the properties on the QosDscpMarkingRule class. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSDSCPMarkingRule` rule or a :class:`~openstack.network.v2. qos_dscp_marking_rule.QoSDSCPMarkingRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent minimum bandwidth rule. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. QoSDSCPMarkingRule` or None a :class:`~openstack.network.v2.qos_dscp_marking_rule. QoSDSCPMarkingRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSDSCPMarkingRule` when no resource can be found. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. the resources being returned. QoSDSCPMarkingRule` :class:`~openstack.network.v2.qos_dscp_marking_rule. QoSDSCPMarkingRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. represented by ``value``. QoSDSCPMarkingRule` a :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule`, comprised of the properties on the QoSMinimumBandwidthRule class. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSMinimumBandwidthRule` rule or a :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent minimum bandwidth rule. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. QoSMinimumBandwidthRule` or None a :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. QoSMinimumBandwidthRule` when no resource can be found. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. the resources being returned. QoSMinimumBandwidthRule` :class:`~openstack.network.v2. qos_minimum_bandwidth_rule.QoSMinimumBandwidthRule` instance. rule belongs or a :class:`~openstack.network.v2. qos_policy.QoSPolicy` instance. represented by ``value``. QoSMinimumBandwidthRule` a :class:`~openstack.network.v2.qos_policy. QoSPolicy`, comprised of the properties on the QoSPolicy class. :class:`~openstack.network.v2.qos_policy.QoSPolicy` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the QoS policy does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent QoS policy. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. None :class:`~openstack.network.v2.qos_policy.QoSPolicy` instance. when no resource can be found. the resources being returned. Valid parameters are: :class:`~openstack.network.v2.qos_policy.QoSPolicy` instance. by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. or None rule type or a :class:`~openstack.network.v2. qos_rule_type.QoSRuleType` instance. when no resource can be found. resources returned. Valid parameters include: :class:`~openstack.network.v2.quota.Quota` instance. The ID of a quota is the same as the project ID for the quota. :class:`~openstack.exceptions.ResourceNotFound` will be raised when quota does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent quota. :class:`~openstack.network.v2.quota.Quota` instance. The ID of a quota is the same as the project ID for the quota. be returned. when no resource can be found. :class:`~openstack.network.v2.quota.QuotaDefault` instance. The ID of a default quota is the same as the project ID for the default quota. when no resource can be found. the resources being returned. Currently no query parameter is supported. :class:`~openstack.network.v2.quota.Quota` instance. The ID of a quota is the same as the project ID for the quota. by ``quota``. underlying methods. such as query filters. the resources being returned. Available parameters include: affects represented by ``rbac_policy``. a :class:`~openstack.network.v2.router.Router`, comprised of the properties on the Router class. :class:`~openstack.network.v2.router.Router` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the router does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent router. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.router.Router` instance. when no resource can be found. the resources being returned. Valid parameters are: with. :class:`~openstack.network.v2.router.Router` instance. request to perform compare-and-swap update. by ``router``. :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` :class:`~openstack.network.v2.router.Router` the resources returned :class:`~openstack.network.v2.network_agent.Agent` the resources returned :class:`~openstack.network.v2.agent.Agent` instance :class:`~openstack.network.v2.agent.Agent` instance :class:`~openstack.exceptions.ResourceNotFound` will be raised when the firewall group does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent firewall group. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. FirewallGroup` or None :class:`~openstack.network.v2.firewall_group.FirewallGroup` instance. :class:`~openstack.network.v2.firewall_group.FirewallGroup` when no resource can be found. the resources being returned. Valid parameters are: across all projects. ACTIVE, INACTIVE, ERROR, PENDING_UPDATE, or PENDING_DELETE. firewall group. associated with. represented by ``firewall_group``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the firewall policy does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent firewall policy. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. FirewallPolicy` or None or a :class:`~openstack.network.v2.firewall_policy.FirewallPolicy` instance. :class:`~openstack.network.v2.firewall_policy.FirewallPolicy` when no resource can be found. the resources being returned. Valid parameters are: associated with the firewall policy. across all projects. represented by ``firewall_policy``. rule after. It will be worked only when insert_before is none. rule before. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the firewall rule does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent firewall rule. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. FirewallRule` or None :class:`~openstack.network.v2.firewall_rule.FirewallRule` instance. :class:`~openstack.network.v2.firewall_rule.FirewallRule` when no resource can be found. the resources being returned. Valid parameters are: matches the firewall rule. or CIDR for the firewall rule. the firewall rule. across all projects. for the firewall rule. rule. associated with. represented by ``firewall_rule``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the security group does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent security group. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. SecurityGroup` or None :class:`~openstack.network.v2.security_group.SecurityGroup` instance. :class:`~openstack.network.v2.security_group.SecurityGroup` when no resource can be found. the resources being returned. Valid parameters are: associated with. request to perform compare-and-swap update. represented by ``security_group``. create a :class:`~openstack.network.v2.\ security_group_rule.SecurityGroupRule`, comprised of the properties on the SecurityGroupRule class. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the security group rule does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent security group rule. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. SecurityGroupRule` or None when no resource can be found. in CIDR must match the ingress or egress rule. is associated with. SecurityGroupRule` a :class:`~openstack.network.v2.segment.Segment`, comprised of the properties on the Segment class. :class:`~openstack.network.v2.segment.Segment` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the segment does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent segment. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.segment.Segment` instance. when no resource can be found. :class:`~openstack.network.v2.segment.Segment` instance. by ``value``. the resources being returned. a :class:`~openstack.network.v2.service_profile .ServiceProfile`, comprised of the properties on the ServiceProfile class. profile or a :class:`~openstack.network.v2.service_profile .ServiceProfile` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the service profile does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent service profile. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. .ServiceProfile` or None .ServiceProfile` when no resource can be found. resources returned. Available parameters inclue: :class:`~openstack.network.v2.service_profile .ServiceProfile` instance. represented by ``value``. a :class:`~openstack.network.v2.subnet.Subnet`, comprised of the properties on the Subnet class. :class:`~openstack.network.v2.subnet.Subnet` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the subnet does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent subnet. request to perform compare-and-swap update. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. :class:`~openstack.network.v2.subnet.Subnet` instance. when no resource can be found. CIDR. :class:`~openstack.network.v2.subnet.Subnet` instance. request to perform compare-and-swap update. by ``subnet``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the subnet pool does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent subnet pool. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None when no resource can be found. represented by ``subnet_pool``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.network.v2.trunk.Trunk` when no resource can be found. the resources being returned. represented by ``trunk``. :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.network.v2.trunk.Trunk` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the vpn service does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent vpn service. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. or None :class:`~openstack.network.v2.vpn_service.VPNService` instance. :class:`~openstack.network.v2.vpn_service.VPNService` when no resource can be found. the resources being returned. represented by ``vpn_service``. or a :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. or a :class:`~openstack.network.v2.floating_ip.FloatingIP` instance. forwarding or a :class:`~openstack.network.v2. port_forwarding.PortForwarding`instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the resource does not exist. When set to ``True``, None will be returned when attempting to find a nonexistent resource. underlying methods. such as query filters. PortForwarding` or None port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. or a :class:`~openstack.network.v2. port_forwarding.PortForwarding` instance. PortForwarding` when no resource can be found. port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. the resources being returned. PortForwarding` port forwarding belongs or a :class:`~openstack. network.v2.floating_ip.FloatingIP` instance. or a :class:`~openstack.network.v2. port_forwarding.PortForwarding`instance. forwarding represented by ``value``. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the floating ip does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent ip. """"""Determine whether Floating IP should be deleted :param Resource obj: Floating IP object :param dict identified_resources: Optional dictionary with resources identified by other services for deletion. :param dict filters: dictionary with parameters",839,839
openstack%2Fopenstacksdk~feature%2Fr1~I45f14d355098d100c92eaaf134b68cf7c006473c,openstack/openstacksdk,feature/r1,I45f14d355098d100c92eaaf134b68cf7c006473c,Block storage - reindentation of the docstrings,MERGED,2021-10-26 13:33:58.000000000,2021-11-02 12:42:31.000000000,2021-11-02 12:42:31.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-26 13:33:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/af2ecc3587f1bb6cd47dfbd753db48177c0d248e', 'message': 'Reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 2, 'created': '2021-10-26 13:56:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/0dd37eefa633de0e7585ea615d2d878b83d8cfd8', 'message': 'Reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 3, 'created': '2021-10-26 13:57:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/bfef2d49726fee51d590af5d339751a055a0a9d5', 'message': 'Reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 4, 'created': '2021-10-26 14:04:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/696ad991a145da6c3c4ef7c3851e4116af26ebb5', 'message': 'Service title - reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 5, 'created': '2021-10-26 14:14:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/cab24e67b10b60a5bb21777d9a81de8e5a257b52', 'message': 'Service title - reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 6, 'created': '2021-10-26 14:17:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/bea3444204468021bfac339faa20045f73ea4ddf', 'message': 'Service title - reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 7, 'created': '2021-10-27 07:14:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/7586ab6dc71622a3aba70411519357aaf0c5c887', 'message': 'Block storage - reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 8, 'created': '2021-10-27 07:44:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/6bf11fff32fa34b3e4ed1c8389ebd80317a17a28', 'message': 'Block storage - reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 9, 'created': '2021-10-27 07:45:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/f08763c4c513bd40c82872f90f52c0b828e78117', 'message': 'Block storage - reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}, {'number': 10, 'created': '2021-10-27 07:46:47.000000000', 'files': ['openstack/block_storage/v3/_proxy.py', 'openstack/block_storage/v2/_proxy.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/894b5450469de600c4a7c7c313c9766de6765fb6', 'message': 'Block storage - reindentation of the docstrings\n\nChange-Id: I45f14d355098d100c92eaaf134b68cf7c006473c\n'}]",3,815503,894b5450469de600c4a7c7c313c9766de6765fb6,23,2,10,33945,,,0,"Block storage - reindentation of the docstrings

Change-Id: I45f14d355098d100c92eaaf134b68cf7c006473c
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/03/815503/4 && git format-patch -1 --stdout FETCH_HEAD,['openstack/block_storage/v2/_proxy.py'],1,af2ecc3587f1bb6cd47dfbd753db48177c0d248e,," :class:`~openstack.block_storage.v2.snapshot.Snapshot` instance. when no resource can be found. :class:`~openstack.block_storage.v2.snapshot.Snapshot` objects will be returned. The default, ``True``, will cause :class:`~openstack.block_storage.v2.snapshot.SnapshotDetail` objects to be returned. filter on ""available"" for example. :rtype: :class:`~openstack.block_storage.v2.snapshot.Snapshot` :class:`~openstack.block_storage.v2.snapshot.Snapshot` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the snapshot does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent snapshot. :class:`~openstack.block_storage.v2.type.Type` instance. when no resource can be found. a :class:`~openstack.block_storage.v2.type.Type`, comprised of the properties on the Type class. :rtype: :class:`~openstack.block_storage.v2.type.Type` :class:`~openstack.block_storage.v2.type.Type` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the type does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent type. when no resource can be found. on ""available"" for example. :rtype: :class:`~openstack.block_storage.v2.volume.Volume` volume = self._get_resource(_volume.Volume, volume) volume.unmanage(self) def migrate_volume( self, volume, host=None, force_host_copy=False, lock_volume=False ):"," :class:`~openstack.block_storage.v2.snapshot.Snapshot` instance. when no resource can be found. :class:`~openstack.block_storage.v2.snapshot.Snapshot` objects will be returned. The default, ``True``, will cause :class:`~openstack.block_storage.v2.snapshot.SnapshotDetail` objects to be returned. filter on ""available"" for example. :rtype: :class:`~openstack.block_storage.v2.snapshot.Snapshot` :class:`~openstack.block_storage.v2.snapshot.Snapshot` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the snapshot does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent snapshot. :class:`~openstack.block_storage.v2.type.Type` instance. when no resource can be found. a :class:`~openstack.block_storage.v2.type.Type`, comprised of the properties on the Type class. :rtype: :class:`~openstack.block_storage.v2.type.Type` :class:`~openstack.block_storage.v2.type.Type` instance. :class:`~openstack.exceptions.ResourceNotFound` will be raised when the type does not exist. When set to ``True``, no exception will be set when attempting to delete a nonexistent type. when no resource can be found. on ""available"" for example. :rtype: :class:`~openstack.block_storage.v2.volume.Volume` volume = self._get_resource(_volume.Volume, volume) volume.unmanage(self) def migrate_volume( self, volume, host=None, force_host_copy=False, lock_volume=False ):",34,34
openstack%2Fopenstacksdk~feature%2Fr1~Ia91c332b0c89135fe92b8cb620431cfc9ea9b68d,openstack/openstacksdk,feature/r1,Ia91c332b0c89135fe92b8cb620431cfc9ea9b68d,DNS - reindentation of the docstrings,MERGED,2021-11-02 09:07:08.000000000,2021-11-02 12:42:28.000000000,2021-11-02 12:42:28.000000000,"[{'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-11-02 09:07:08.000000000', 'files': ['openstack/dns/v2/_proxy.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/bf267b0e1c5364c369b57f2a372349cfa0cff18b', 'message': 'DNS - reindentation of the docstrings\n\nChange-Id: Ia91c332b0c89135fe92b8cb620431cfc9ea9b68d\n'}]",0,816308,bf267b0e1c5364c369b57f2a372349cfa0cff18b,7,3,1,33945,,,0,"DNS - reindentation of the docstrings

Change-Id: Ia91c332b0c89135fe92b8cb620431cfc9ea9b68d
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/08/816308/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/dns/v2/_proxy.py'],1,bf267b0e1c5364c369b57f2a372349cfa0cff18b,," or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. If it is not given all recordsets for all zones of the tenant would be retrieved or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.recordset.Recordset` instance. or a :class:`~openstack.dns.v2.recordset.Recordset` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone_import.ZoneImport` instance. or a :class:`~openstack.dns.v2.zone_import.ZoneImport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.floating_ip.FloatingIP` instance. The ID is in format ""region_name:floatingip_id"" or a :class:`~openstack.dns.v2.zone_transfer.ZoneTransferRequest` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_transfer.ZoneTransferRequest` instance. or a :class:`~openstack.dns.v2.zone_transfer.ZoneTransferAccept` instance."," or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. If it is not given all recordsets for all zones of the tenant would be retrieved or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.recordset.Recordset` instance. or a :class:`~openstack.dns.v2.recordset.Recordset` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone.Zone` instance. or a :class:`~openstack.dns.v2.zone_import.ZoneImport` instance. or a :class:`~openstack.dns.v2.zone_import.ZoneImport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.floating_ip.FloatingIP` instance. The ID is in format ""region_name:floatingip_id"" or a :class:`~openstack.dns.v2.zone_transfer.ZoneTransferRequest` instance. or a :class:`~openstack.dns.v2.zone_export.ZoneExport` instance. or a :class:`~openstack.dns.v2.zone_transfer.ZoneTransferRequest` instance. or a :class:`~openstack.dns.v2.zone_transfer.ZoneTransferAccept` instance.",28,28
openstack%2Fopenstacksdk~feature%2Fr1~Ic60c751ab8842f3029ffa4390a6253c68b47883d,openstack/openstacksdk,feature/r1,Ic60c751ab8842f3029ffa4390a6253c68b47883d,trivial: Typo fixes,MERGED,2021-10-27 18:28:49.000000000,2021-11-02 12:42:27.000000000,2021-11-02 12:42:27.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-27 18:28:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/1cae3fb6127b34d17e3dbf6a740cb42fde492adf', 'message': 'trivial: Typo fixes\n\nChange-Id: Ic60c751ab8842f3029ffa4390a6253c68b47883d\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 2, 'created': '2021-10-28 11:42:05.000000000', 'files': ['openstack/utils.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/b47652cfdcee27a6bc41ad25a10123b9f4b33015', 'message': 'trivial: Typo fixes\n\nChange-Id: Ic60c751ab8842f3029ffa4390a6253c68b47883d\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",1,815727,b47652cfdcee27a6bc41ad25a10123b9f4b33015,10,2,2,15334,,,0,"trivial: Typo fixes

Change-Id: Ic60c751ab8842f3029ffa4390a6253c68b47883d
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/27/815727/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack/utils.py'],1,1cae3fb6127b34d17e3dbf6a740cb42fde492adf,trivial," :param required: Minimum version that is required for an action. otherwise the ``session``'s default. Returns ``None`` if both :raises: :class:`~openstack.exceptions.SDKException` if requested microversion is not supported. """"""Determine the maximum microversion supported by both client and server."," :param required: Version that is required for an action. the ``session``'s default otherwise. Returns ``None`` of both """"""Determinte the maximum microversion supported by both client and server.",5,3
openstack%2Fopenstacksdk~feature%2Fr1~I8c4ea02ddb522549711c4b31bc9ee8672f55ec60,openstack/openstacksdk,feature/r1,I8c4ea02ddb522549711c4b31bc9ee8672f55ec60,Remove '__unicode__' helper,MERGED,2021-10-27 18:28:49.000000000,2021-11-02 12:42:25.000000000,2021-11-02 12:42:25.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-27 18:28:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/6fa2b65490abab135720dfa25e545fba936108ec', 'message': ""Remove '__unicode__' helper\n\nThis is a hangover from Python 2. It's no longer needed in Python 3-only\nland.\n\nChange-Id: I8c4ea02ddb522549711c4b31bc9ee8672f55ec60\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2021-10-28 11:42:05.000000000', 'files': ['openstack/exceptions.py', 'openstack/tests/unit/test_exceptions.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/86c85103bf8770e5aa5ad7abdd31fa73bc9e52f1', 'message': ""Remove '__unicode__' helper\n\nThis is a hangover from Python 2. It's no longer needed in Python 3-only\nland.\n\nChange-Id: I8c4ea02ddb522549711c4b31bc9ee8672f55ec60\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",2,815726,86c85103bf8770e5aa5ad7abdd31fa73bc9e52f1,13,2,2,15334,,,0,"Remove '__unicode__' helper

This is a hangover from Python 2. It's no longer needed in Python 3-only
land.

Change-Id: I8c4ea02ddb522549711c4b31bc9ee8672f55ec60
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/26/815726/2 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/exceptions.py', 'openstack/tests/unit/test_exceptions.py']",2,6fa2b65490abab135720dfa25e545fba936108ec,trivial,," def test_unicode_message(self): unicode_message = u""Event: No item found for does_not_exist©"" http_exception = exceptions.HttpException(msg=unicode_message) try: http_exception.__unicode__() except Exception: self.fail(""HttpException unicode message error"") ",1,12
openstack%2Fneutron-tempest-plugin~master~I898c9a674963f850d9a6bd1fa29cb884288b8b70,openstack/neutron-tempest-plugin,master,I898c9a674963f850d9a6bd1fa29cb884288b8b70,[stable/stein] Regroup tests exclusion list and add new failing ones,MERGED,2021-10-26 09:48:04.000000000,2021-11-02 12:42:14.000000000,2021-11-02 12:42:14.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 09:48:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/1499ee15ae54c6d9ad22a52b6023146ef6025d1c', 'message': ""[stable/stein] Regroup tests exclusion list and add new failing one\n\nThis is a follow-up to pinned version for this branch [0], I saw some\nother tests failing multiple rechecks in stein backports (including\ntests already filtered out for rocky). As this is an EM branch, let's\nregroup these tests in a single list for easier maintenance and add\nfailing test_connectivity_min_max_mtu\n\n[0] I724da80bc440cd5d5b947d0c0a08cbead95628e9\n\nChange-Id: I898c9a674963f850d9a6bd1fa29cb884288b8b70\n""}, {'number': 2, 'created': '2021-10-26 12:15:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/5b9ed3fe3da71926d51e94928862631cb2617b35', 'message': ""[stable/stein] Regroup tests exclusion list and add new failing one\n\nThis is a follow-up to pinned version for this branch [0], I saw some\nother tests failing multiple rechecks in stein backports (including\ntests already filtered out for rocky). As this is an EM branch, let's\nregroup these tests in a single list for easier maintenance and add\nfailing test_connectivity_min_max_mtu\n\n[0] I724da80bc440cd5d5b947d0c0a08cbead95628e9\n\nChange-Id: I898c9a674963f850d9a6bd1fa29cb884288b8b70\n""}, {'number': 3, 'created': '2021-10-26 19:47:08.000000000', 'files': ['zuul.d/stein_jobs.yaml'], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/dcfa754d93b4b47660585c42bda243967c032d65', 'message': ""[stable/stein] Regroup tests exclusion list and add new failing ones\n\nThis is a follow-up to pinned version for this branch [0], I saw some\nother tests failing multiple rechecks in stein backports (including\ntests already filtered out for rocky). As this is an EM branch, let's\nregroup these tests in a single list for easier maintenance and add\nfailing tests:\n* test_mtu.NetworkWritableMtuTest.test_connectivity_min_max_mtu\n* test_trunk.TrunkTest.test_parent_port_connectivity_after_trunk_deleted_lb\n\n[0] I724da80bc440cd5d5b947d0c0a08cbead95628e9\n\nChange-Id: I898c9a674963f850d9a6bd1fa29cb884288b8b70\n""}]",3,815458,dcfa754d93b4b47660585c42bda243967c032d65,14,3,3,21798,,,0,"[stable/stein] Regroup tests exclusion list and add new failing ones

This is a follow-up to pinned version for this branch [0], I saw some
other tests failing multiple rechecks in stein backports (including
tests already filtered out for rocky). As this is an EM branch, let's
regroup these tests in a single list for easier maintenance and add
failing tests:
* test_mtu.NetworkWritableMtuTest.test_connectivity_min_max_mtu
* test_trunk.TrunkTest.test_parent_port_connectivity_after_trunk_deleted_lb

[0] I724da80bc440cd5d5b947d0c0a08cbead95628e9

Change-Id: I898c9a674963f850d9a6bd1fa29cb884288b8b70
",git fetch https://review.opendev.org/openstack/neutron-tempest-plugin refs/changes/58/815458/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/stein_jobs.yaml'],1,1499ee15ae54c6d9ad22a52b6023146ef6025d1c,bug/1946748," # NOTE(bcafarel): filtering out unstable tests or tests with known # issues in the used pinned version for this EM branch tempest_black_regex: &stein_tempest_exclude ""\ (^neutron_tempest_plugin.scenario.test_mtu.NetworkWritableMtuTest.test_connectivity_min_max_mtu) |\ (^neutron_tempest_plugin.scenario.test_port_forwardings.PortForwardingTestJSON.test_port_forwarding_to_2_servers) |\ (^neutron_tempest_plugin.scenario.test_trunk.TrunkTest.test_subport_connectivity)|\ (^neutron_tempest_plugin.scenario.test_vlan_transparency.VlanTransparencyTest)"" tempest_black_regex: *stein_tempest_exclude tempest_black_regex: *stein_tempest_exclude tempest_black_regex: *stein_tempest_exclude"," # NOTE(bcafarel): remove port forwarding test as pinned version # used in this EM branch is unstable tempest_black_regex: ""(^neutron_tempest_plugin.scenario.test_port_forwardings.PortForwardingTestJSON.test_port_forwarding_to_2_servers)"" # NOTE(bcafarel): remove port forwarding test as pinned version # used in this EM branch is unstable tempest_black_regex: ""(^neutron_tempest_plugin.scenario.test_port_forwardings.PortForwardingTestJSON.test_port_forwarding_to_2_servers)"" # TODO(slaweq): remove trunks subport_connectivity test from blacklist # when bug https://bugs.launchpad.net/neutron/+bug/1838760 will be fixed # NOTE(bcafarel): remove port forwarding test as pinned version # used in this EM branch is unstable tempest_black_regex: ""\ (^neutron_tempest_plugin.scenario.test_trunk.TrunkTest.test_subport_connectivity)|\ (^neutron_tempest_plugin.scenario.test_port_forwardings.PortForwardingTestJSON.test_port_forwarding_to_2_servers)"" # TODO(eolivare): remove VLAN Transparency tests from blacklist # when bug https://bugs.launchpad.net/neutron/+bug/1907548 will be fixed tempest_black_regex: ""(^neutron_tempest_plugin.scenario.test_vlan_transparency.VlanTransparencyTest)""",10,16
openstack%2Fkolla~master~Id578cbc49c9a432414e5c758e0c853e59f79b039,openstack/kolla,master,Id578cbc49c9a432414e5c758e0c853e59f79b039,neutron-openvswitch-agent: openvswitch is already installed,MERGED,2021-11-01 14:16:58.000000000,2021-11-02 12:36:35.000000000,2021-11-02 12:33:53.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-11-01 14:16:58.000000000', 'files': ['docker/neutron/neutron-openvswitch-agent/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/eff681063adc62faef55cde0ffa6df8de1a04055', 'message': 'neutron-openvswitch-agent: openvswitch is already installed\n\nWe install openvswitch package in neutron-base image already so there is\nno need of repeating it.\n\nChange-Id: Id578cbc49c9a432414e5c758e0c853e59f79b039\n'}]",0,816175,eff681063adc62faef55cde0ffa6df8de1a04055,14,4,1,24072,,,0,"neutron-openvswitch-agent: openvswitch is already installed

We install openvswitch package in neutron-base image already so there is
no need of repeating it.

Change-Id: Id578cbc49c9a432414e5c758e0c853e59f79b039
",git fetch https://review.opendev.org/openstack/kolla refs/changes/75/816175/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/neutron/neutron-openvswitch-agent/Dockerfile.j2'],1,eff681063adc62faef55cde0ffa6df8de1a04055,some-debian-cleanups, 'openstack-neutron-openvswitch' 'neutron-openvswitch-agent'," 'openstack-neutron-openvswitch', 'openvswitch' 'neutron-openvswitch-agent', 'openvswitch-switch'",2,4
openstack%2Fkolla~master~I90abeca62e2de264539b711d8bea22ec17ff03c8,openstack/kolla,master,I90abeca62e2de264539b711d8bea22ec17ff03c8,Debian: enable OVN images for AArch64,MERGED,2021-10-29 09:11:05.000000000,2021-11-02 12:35:22.000000000,2021-11-02 12:33:50.000000000,"[{'_account_id': 13252}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-29 09:11:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/e400ccd73972747508273db9091fc4e167e92c1a', 'message': 'Debian: enable OVN images for AArch64\n\nThomas Goirand uploaded OVN packages into official bullseye-backports\nrepository. They are available for both x86-64 and aarch64 so we can\nenable them now.\n\nChange-Id: I90abeca62e2de264539b711d8bea22ec17ff03c8\n'}, {'number': 2, 'created': '2021-11-02 09:22:56.000000000', 'files': ['kolla/image/build.py', 'doc/source/matrix_aarch64.csv'], 'web_link': 'https://opendev.org/openstack/kolla/commit/0decadc19df99323dd53c10f245818dd351eb7ee', 'message': 'Debian: enable OVN images for AArch64\n\nThomas Goirand uploaded OVN packages into official bullseye-backports\nrepository. They are available for both x86-64 and aarch64 so we can\nenable them now.\n\nChange-Id: I90abeca62e2de264539b711d8bea22ec17ff03c8\n'}]",3,815946,0decadc19df99323dd53c10f245818dd351eb7ee,21,5,2,24072,,,0,"Debian: enable OVN images for AArch64

Thomas Goirand uploaded OVN packages into official bullseye-backports
repository. They are available for both x86-64 and aarch64 so we can
enable them now.

Change-Id: I90abeca62e2de264539b711d8bea22ec17ff03c8
",git fetch https://review.opendev.org/openstack/kolla refs/changes/46/815946/2 && git format-patch -1 --stdout FETCH_HEAD,['kolla/image/build.py'],1,e400ccd73972747508273db9091fc4e167e92c1a,some-debian-cleanups,," 'debian+aarch64': { ""ovn-base"", # no binary package }, ",0,4
openstack%2Fopenstack-ansible~stable%2Fstein~I5f1c8ab20d003d3a3be037a40ad9e7a3f41c556f,openstack/openstack-ansible,stable/stein,I5f1c8ab20d003d3a3be037a40ad9e7a3f41c556f,Remove tempest plugins CI overrides,MERGED,2021-10-19 11:35:12.000000000,2021-11-02 12:33:36.000000000,2021-11-02 12:31:27.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}, {'_account_id': 31542}]","[{'number': 1, 'created': '2021-10-19 11:35:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/08447865cc08969bd564e0fd85cad09092d88f03', 'message': 'Remove tempest plugins CI overrides\n\nChange-Id: I5f1c8ab20d003d3a3be037a40ad9e7a3f41c556f\n'}, {'number': 2, 'created': '2021-10-20 08:04:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/26fa0d1d7f29e32b2af9ff94adff4d1201a14bd4', 'message': 'Remove tempest plugins CI overrides\n\nChange-Id: I5f1c8ab20d003d3a3be037a40ad9e7a3f41c556f\n'}, {'number': 3, 'created': '2021-10-20 11:21:53.000000000', 'files': ['tests/roles/bootstrap-host/templates/user_variables_manila.yml.j2', 'tests/roles/bootstrap-host/templates/user_variables_congress.yml.j2', 'tests/roles/bootstrap-host/templates/user_variables_barbican.yml.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/6fc391dec87d74c2fe6b5eec646711f066e4899a', 'message': 'Remove tempest plugins CI overrides\n\nChange-Id: I5f1c8ab20d003d3a3be037a40ad9e7a3f41c556f\n'}]",1,814558,6fc391dec87d74c2fe6b5eec646711f066e4899a,14,3,3,28619,,,0,"Remove tempest plugins CI overrides

Change-Id: I5f1c8ab20d003d3a3be037a40ad9e7a3f41c556f
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/58/814558/3 && git format-patch -1 --stdout FETCH_HEAD,"['tests/roles/bootstrap-host/templates/user_variables_manila.yml.j2', 'tests/roles/bootstrap-host/templates/user_variables_congress.yml.j2', 'tests/roles/bootstrap-host/templates/user_variables_barbican.yml.j2']",3,08447865cc08969bd564e0fd85cad09092d88f03,,,tempest_plugins: - name: barbican-tempest-plugin repo: https://opendev.org/openstack/barbican-tempest-plugin branch: master ,1,16
openstack%2Fneutron~master~Ib4d86e604b003b2b4cb99fe34ca3908b41705fe5,openstack/neutron,master,Ib4d86e604b003b2b4cb99fe34ca3908b41705fe5,[OVN] Remove FIP dependency on original FIP dict,ABANDONED,2020-03-18 07:48:31.000000000,2021-11-02 12:31:54.000000000,,"[{'_account_id': 5756}, {'_account_id': 6773}, {'_account_id': 8655}, {'_account_id': 9732}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 26622}, {'_account_id': 29157}]","[{'number': 1, 'created': '2020-03-18 07:48:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8ef83f050ebd2b50a18aaa8476c455db2e77fa10', 'message': ""[OVN] Remove FIP dependency on original FIP dict\n\nThe 'floatingip_id' has been stored in the 'external_ids' of the\nNAT table. When updating or deleting a floatingip, the original\nfloatingip can be obtained from 'ovn_fip', so the 'fip_object'\ncan be removed.\n\nChange-Id: Ib4d86e604b003b2b4cb99fe34ca3908b41705fe5\nCloses-Bug: #1867869\n""}, {'number': 2, 'created': '2020-03-18 12:39:20.000000000', 'files': ['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/services/ovn_l3/plugin.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/cbe6689d90f2c5a8d3187dd5a99e77a19f2194cc', 'message': ""[OVN] Remove FIP dependency on original FIP dict\n\nThe 'floatingip_id' has been stored in the 'external_ids' of the\nNAT table. When updating or deleting a floatingip, the original\nfloatingip can be obtained from 'ovn_fip', so the 'fip_object'\ncan be removed.\n\nChange-Id: Ib4d86e604b003b2b4cb99fe34ca3908b41705fe5\nCloses-Bug: #1867869\n""}]",2,713585,cbe6689d90f2c5a8d3187dd5a99e77a19f2194cc,29,12,2,29157,,,0,"[OVN] Remove FIP dependency on original FIP dict

The 'floatingip_id' has been stored in the 'external_ids' of the
NAT table. When updating or deleting a floatingip, the original
floatingip can be obtained from 'ovn_fip', so the 'fip_object'
can be removed.

Change-Id: Ib4d86e604b003b2b4cb99fe34ca3908b41705fe5
Closes-Bug: #1867869
",git fetch https://review.opendev.org/openstack/neutron refs/changes/85/713585/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/services/ovn_l3/plugin.py']",2,8ef83f050ebd2b50a18aaa8476c455db2e77fa10,bug/1867869," self._ovn_client.delete_floatingip(context, id) self._ovn_client.update_floatingip(context, fip)"," # TODO(lucasagomes): Passing ``original_fip`` object as a # parameter to the OVNClient's delete_floatingip() method is done # for backward-compatible reasons. Remove it in the Rocky release # of OpenStack. original_fip = self.get_floatingip(context, id) self._ovn_client.delete_floatingip(context, id, fip_object=original_fip) # TODO(lucasagomes): Passing ``original_fip`` object as a # parameter to the OVNClient's update_floatingip() method is done # for backward-compatible reasons. Remove it in the Rocky release # of OpenStack. original_fip = self.get_floatingip(context, id) self._ovn_client.update_floatingip(context, fip, fip_object=original_fip)",6,42
openstack%2Fneutron~master~I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b,openstack/neutron,master,I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b,[OVN] Remove QoS dependency on original port dict,ABANDONED,2020-02-20 06:27:27.000000000,2021-11-02 12:29:59.000000000,,"[{'_account_id': 6773}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 24791}, {'_account_id': 26622}, {'_account_id': 29157}, {'_account_id': 29874}]","[{'number': 1, 'created': '2020-02-20 06:27:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e364beed9b7ebdb62022196eac933d42073a0881', 'message': ""[OVN] Remove QoS dependency on port_object\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 2, 'created': '2020-02-20 10:24:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/339642eed6c0537216be50e138fa5ca4e2d79b41', 'message': ""[OVN] Remove QoS dependency on port_object\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 3, 'created': '2020-02-20 14:06:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/4175d6407a231b2e16bf9aa7513c00e9c837af11', 'message': ""[OVN] Remove QoS dependency on port_object\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 4, 'created': '2020-02-21 05:56:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/31cc5ac3d50e5d80dbcea42951177e78e2b6af41', 'message': ""[OVN] Remove QoS dependency on port_object\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 5, 'created': '2020-02-21 08:53:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/eb47515ca75902c88911f682a12b81772a944319', 'message': ""[OVN] Remove QoS dependency on port_object\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 6, 'created': '2020-02-23 05:49:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/123085f0098f5143a527a8fb7b87a869719cd1d4', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 7, 'created': '2020-02-23 15:30:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c12005d48d81906ea79ebc768209e18060d7b2cc', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 8, 'created': '2020-02-27 03:02:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0b4ee0b101aa4c0cf6e66040c508949f7bd71d4e', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 9, 'created': '2020-02-29 12:25:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a85498751404ca68d688bdef060e884fef277796', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nPartial-Bug: #1863987\n""}, {'number': 10, 'created': '2020-03-02 13:57:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/34be799e509e44cd0d6d9a34f4346a05381c05b0', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nCloses-Bug: #1863987\n""}, {'number': 11, 'created': '2020-03-02 14:35:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d66bea0a39b728276e33a25746919942b36e4a35', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nPartial-Bug: #1863987\n""}, {'number': 12, 'created': '2020-03-12 15:38:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3484e2fce1b08ce6f59bf11ce2f8bba34124fe63', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nPartial-Bug: #1863987\n""}, {'number': 13, 'created': '2020-03-19 03:19:26.000000000', 'files': ['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/tests/unit/services/qos/drivers/ovn/test_driver.py', 'neutron/services/qos/drivers/ovn/driver.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovn_client.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/c806d7cfe80a8aa550564394abfcbfcd9d8db38d', 'message': ""[OVN] Remove QoS dependency on original port dict\n\nThe 'port_object' needs to be removed, so the current QoS dependency\non it needs to be resolved first. The 'qos_policy_id' is stored in the\n'external_ids' of the logical switch port, like the network QoS policy.\n\nChange-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b\nPartial-Bug: #1863987\n""}]",34,708806,c806d7cfe80a8aa550564394abfcbfcd9d8db38d,112,11,13,29157,,,0,"[OVN] Remove QoS dependency on original port dict

The 'port_object' needs to be removed, so the current QoS dependency
on it needs to be resolved first. The 'qos_policy_id' is stored in the
'external_ids' of the logical switch port, like the network QoS policy.

Change-Id: I1ab34c07407a595c8b1f39b5d43d9c7dc674b40b
Partial-Bug: #1863987
",git fetch https://review.opendev.org/openstack/neutron refs/changes/06/708806/3 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/services/qos/drivers/ovn/test_driver.py', 'neutron/services/qos/drivers/ovn/driver.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovn_client.py']",5,e364beed9b7ebdb62022196eac933d42073a0881,bug/1863987,"# # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # import mock from neutron_lib import constants from oslo_utils import uuidutils from ovsdbapp.backend.ovs_idl import transaction from ovsdbapp.schema.ovn_northbound import impl_idl from neutron.common.ovn import utils as ovn_utils from neutron.plugins.ml2.drivers.ovn.mech_driver.ovsdb import impl_idl_ovn from neutron.plugins.ml2.drivers.ovn.mech_driver.ovsdb import ovn_client from neutron.tests import base from neutron.tests.unit import fake_resources as fakes class TestOVNClient(base.BaseTestCase): def setUp(self): super(TestOVNClient, self).setUp() with mock.patch.object(impl_idl_ovn, 'get_connection', return_value=mock.Mock()): impl_idl_ovn.OvsdbNbOvnIdl.ovsdb_connection = None impl_idl_ovn.OvsdbSbOvnIdl.ovsdb_connection = None self.nb_ovn_idl = impl_idl_ovn.OvsdbNbOvnIdl(mock.Mock()) self.sb_ovn_idl = impl_idl_ovn.OvsdbSbOvnIdl(mock.Mock()) self.ovsdb_connection = None self.timeout = 1 self.transaction = transaction.Transaction(self.nb_ovn_idl, self.ovsdb_connection, self.timeout) self.ovn_client = ovn_client.OVNClient(self.nb_ovn_idl, self.sb_ovn_idl) def _add_txns_to_sync_port_qos(self, qos_options_new, qos_options_old, ovn_net_qos_policy): port = fakes.FakePort.create_one_port() lswitch_name = ovn_utils.ovn_name(port['id']) with mock.patch.object(self.ovn_client, '_create_qos_rules', return_value={}) as create_qos_rules: self.ovn_client.add_txns_to_sync_port_qos(self.transaction, port['id'], lswitch_name, qos_options_new, qos_options_old, ovn_net_qos_policy) if qos_options_new: create_qos_rules.assert_called_with(qos_options_new, port['id'], lswitch_name) self.assertEqual(2, create_qos_rules.call_count) elif qos_options_old: create_qos_rules.assert_called_once_with(qos_options_old, port['id'], lswitch_name, if_delete=True) elif ovn_net_qos_policy: create_qos_rules.assert_not_called() @mock.patch.object(impl_idl.OvnNbApiIdlImpl, 'qos_add', mock.Mock()) @mock.patch.object(impl_idl.OvnNbApiIdlImpl, 'qos_del', mock.Mock()) @mock.patch.object(transaction.Transaction, 'add', mock.Mock()) def test_add_txns_to_sync_port_qos_with_qos_options_new(self): qos_options_new = {'qos_max_rate': '1000', 'qos_burst': '100', 'direction': u'egress'} qos_options_old = {'qos_max_rate': '100', 'qos_burst': '10', 'direction': u'egress'} ovn_net_qos_policy = uuidutils.generate_uuid() self._add_txns_to_sync_port_qos(qos_options_new, qos_options_old, ovn_net_qos_policy) @mock.patch.object(impl_idl.OvnNbApiIdlImpl, 'qos_add', mock.Mock()) @mock.patch.object(impl_idl.OvnNbApiIdlImpl, 'qos_del', mock.Mock()) @mock.patch.object(transaction.Transaction, 'add', mock.Mock()) def test_add_txns_to_sync_port_qos_with_qos_options_old(self): qos_options_new = None qos_options_old = {'qos_max_rate': '100', 'qos_burst': '10', 'direction': u'egress'} ovn_net_qos_policy = uuidutils.generate_uuid() self._add_txns_to_sync_port_qos(qos_options_new, qos_options_old, ovn_net_qos_policy) @mock.patch.object(impl_idl.OvnNbApiIdlImpl, 'qos_add', mock.Mock()) @mock.patch.object(impl_idl.OvnNbApiIdlImpl, 'qos_del', mock.Mock()) @mock.patch.object(transaction.Transaction, 'add', mock.Mock()) def test_add_txns_to_sync_port_qos_with_ovn_net_qos_policy(self): qos_options_new = None qos_options_old = None ovn_net_qos_policy = uuidutils.generate_uuid() self._add_txns_to_sync_port_qos(qos_options_new, qos_options_old, ovn_net_qos_policy) def test__is_qos_updated_for_no_qos_port(self): port = fakes.FakePort.create_one_port() result = self.ovn_client._is_qos_updated_for_port(port) self.assertFalse(False, result) def test__is_qos_updated_for_network_port(self): port = fakes.FakePort.create_one_port() port['device_owner'] = constants.DEVICE_OWNER_DHCP result = self.ovn_client._is_qos_updated_for_port(port) self.assertFalse(False, result) ",,208,74
openstack%2Fneutron~master~Ib4562f433d048f9be338ba856b905537606990ec,openstack/neutron,master,Ib4562f433d048f9be338ba856b905537606990ec,[OVN] Fix bug when updating a QoS policy for a port,ABANDONED,2020-02-12 10:26:55.000000000,2021-11-02 12:29:10.000000000,,"[{'_account_id': 4694}, {'_account_id': 6773}, {'_account_id': 9732}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 15554}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 24791}, {'_account_id': 26622}, {'_account_id': 29157}, {'_account_id': 29874}]","[{'number': 1, 'created': '2020-02-12 10:26:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/afe77ddab111d2162b4e66b9a78607403467d001', 'message': ""Fix bug when updating a QoS policy for a port\n\nIf a port does not have a QoS policy, updating it will cause\na KeyError because 'qos_options' has no 'direction' key. This\npatch adds judgment to the 'qos_options_old'.\n\nChange-Id: Ib4562f433d048f9be338ba856b905537606990ec\nCloses-Bug: #1862893\n""}, {'number': 2, 'created': '2020-02-12 10:35:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f9001456d8570de8aa248bc8a6406c9f93451a9d', 'message': ""[OVN] Fix bug when updating a QoS policy for a port\n\nIf a port does not have a QoS policy, updating it will cause\na KeyError because 'qos_options' has no 'direction' key. This\npatch adds judgment to the 'qos_options_old'.\n\nChange-Id: Ib4562f433d048f9be338ba856b905537606990ec\nCloses-Bug: #1862893\n""}, {'number': 3, 'created': '2020-02-12 17:15:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/881a9240597eb833b79ad3244e473f08348e4b02', 'message': ""[OVN] Fix bug when updating a QoS policy for a port\n\nIf a port does not have a QoS policy, updating it will cause\na KeyError because 'qos_options' has no 'direction' key. This\npatch adds judgment to the 'qos_options_old'.\n\nChange-Id: Ib4562f433d048f9be338ba856b905537606990ec\nCloses-Bug: #1862893\n""}, {'number': 4, 'created': '2020-02-16 06:22:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d0e7b8865617d748dca485422a53fac3eb09b63c', 'message': ""[OVN] Fix bug when updating a QoS policy for a port\n\nIf a port does not have a QoS policy, updating it will cause\na KeyError because 'qos_options' has no 'direction' key. In\naddition, since 'qos_max_rate' and 'qos_burst' are optional,\nif only one of them is specified, this will also cause a KeyError.\n\nChange-Id: Ib4562f433d048f9be338ba856b905537606990ec\nCloses-Bug: #1862893\n""}, {'number': 5, 'created': '2020-02-17 10:09:23.000000000', 'files': ['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovn_client.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/dd96935a4c75854b692b190f23f02c6729b1dc44', 'message': ""[OVN] Fix bug when updating a QoS policy for a port\n\nIf a port does not have a QoS policy, updating it will cause\na KeyError because 'qos_options' has no 'direction' key. since\n'qos_max_rate' and 'qos_burst' are optional, if only one of them\nis specified, this will also cause a KeyError. In addition, the\nsame qos policy does not need to be updated.\n\nChange-Id: Ib4562f433d048f9be338ba856b905537606990ec\nCloses-Bug: #1862893\n""}]",13,707352,dd96935a4c75854b692b190f23f02c6729b1dc44,46,14,5,29157,,,0,"[OVN] Fix bug when updating a QoS policy for a port

If a port does not have a QoS policy, updating it will cause
a KeyError because 'qos_options' has no 'direction' key. since
'qos_max_rate' and 'qos_burst' are optional, if only one of them
is specified, this will also cause a KeyError. In addition, the
same qos policy does not need to be updated.

Change-Id: Ib4562f433d048f9be338ba856b905537606990ec
Closes-Bug: #1862893
",git fetch https://review.opendev.org/openstack/neutron refs/changes/52/707352/5 && git format-patch -1 --stdout FETCH_HEAD,['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py'],1,afe77ddab111d2162b4e66b9a78607403467d001,bug/1862893," if qos_options_old: qos_rule_column_old = self._create_qos_rules(qos_options_old, port, lswitch_name, if_delete=True) # Delete old QoS rule first txn.add(self._nb_idl.qos_del(**qos_rule_column_old))"," qos_rule_column_old = self._create_qos_rules(qos_options_old, port, lswitch_name, if_delete=True) # Delete old QoS rule first txn.add(self._nb_idl.qos_del(**qos_rule_column_old))",7,6
openstack%2Fneutron~master~Ied53227e044a594d55514137e6a9d2aaa8b3d924,openstack/neutron,master,Ied53227e044a594d55514137e6a9d2aaa8b3d924,[OVN] Use the new method to set lrp options,ABANDONED,2020-12-02 16:21:37.000000000,2021-11-02 12:24:35.000000000,,"[{'_account_id': 1131}, {'_account_id': 6773}, {'_account_id': 8655}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}]","[{'number': 1, 'created': '2020-12-02 16:21:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6c9be7e494571f4c00b4d12732661c0d450ca168', 'message': '[OVN] Use the new method to set lrp options\n\nThe current ovsdbapp version already contains `lrp_set_options`\nmethod, which can be used instead of `update_lrouter_port` method.\nDepends-On: https://review.opendev.org/671765\n\nChange-Id: Ied53227e044a594d55514137e6a9d2aaa8b3d924\n'}, {'number': 2, 'created': '2020-12-03 01:50:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f67c43170fc9b23dc7f3cba7a429cf6ca63decab', 'message': '[OVN] Use the new method to set lrp options\n\nThe current ovsdbapp version already contains `lrp_set_options`\nmethod, which can be used instead of `update_lrouter_port` method.\n\nChange-Id: Ied53227e044a594d55514137e6a9d2aaa8b3d924\n'}, {'number': 3, 'created': '2020-12-03 08:27:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/91a5ff53351ccf1cf3d9e98bee49eba974e46b95', 'message': '[OVN] Use the new method to set lrp options\n\nThe current ovsdbapp version already contains `lrp_set_options`\nmethod, which can be used instead of `update_lrouter_port` method.\n\nChange-Id: Ied53227e044a594d55514137e6a9d2aaa8b3d924\n'}, {'number': 4, 'created': '2020-12-04 01:14:14.000000000', 'files': ['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/fake_resources.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/a7c53a3d63eddc222971b515f68cd39635834f88', 'message': '[OVN] Use the new method to set lrp options\n\nThe current ovsdbapp version already contains `lrp_set_options`\nmethod, which can be used instead of `update_lrouter_port` method.\n\nChange-Id: Ied53227e044a594d55514137e6a9d2aaa8b3d924\n'}]",6,765171,a7c53a3d63eddc222971b515f68cd39635834f88,26,7,4,29157,,,0,"[OVN] Use the new method to set lrp options

The current ovsdbapp version already contains `lrp_set_options`
method, which can be used instead of `update_lrouter_port` method.

Change-Id: Ied53227e044a594d55514137e6a9d2aaa8b3d924
",git fetch https://review.opendev.org/openstack/neutron refs/changes/71/765171/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py'],1,6c9be7e494571f4c00b4d12732661c0d450ca168,," commands.append(self._nb_idl.lrp_set_options( lrp_name, options))"," # TODO(lucasagomes): Use lrp_set_options() once # https://review.opendev.org/671765 is merged and a new version # of ovsdbapp is released commands.append(self._nb_idl.update_lrouter_port( name=lrp_name, if_exists=True, options=options))",2,5
openstack%2Fneutron~master~I1c03c31613f981e4fa4e0f5af47844b66c15158a,openstack/neutron,master,I1c03c31613f981e4fa4e0f5af47844b66c15158a,[OVN] Fix concurrency issue in create/update subnet,NEW,2020-08-06 07:44:46.000000000,2021-11-02 12:23:48.000000000,,"[{'_account_id': 6773}, {'_account_id': 9732}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 13686}, {'_account_id': 15752}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 26622}]","[{'number': 1, 'created': '2020-08-06 07:44:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/579c4655efd5b0c454ee28aa36eab7cf16bbf7c1', 'message': '[OVN] Fix concurrency issue in create/update subnet\n\nThere is a inherent lock contention when updating the\nfixed_ips of the metadata port as it requires a lock on\nall the involved subnets.\n\nGracefully handle the SubnetInUse exception in create/update\nsubnet functions and add the update_metadata_port to the\nmetadata port maintenance job.\n\nCloses-Bug: #1890432\nChange-Id: I1c03c31613f981e4fa4e0f5af47844b66c15158a\n'}, {'number': 2, 'created': '2020-08-07 11:11:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/b111600c2f990b551df85e5ce14a17411b5ff6b2', 'message': '[OVN] Fix concurrency issue in create/update subnet\n\nThere is a inherent lock contention when updating the\nfixed_ips of the metadata port as it requires a lock on\nall the involved subnets.\n\nGracefully handle the SubnetInUse exception in create/update\nsubnet functions and add the update_metadata_port to the\nmetadata port maintenance job.\n\nCloses-Bug: #1890432\nChange-Id: I1c03c31613f981e4fa4e0f5af47844b66c15158a\n'}, {'number': 3, 'created': '2020-08-24 07:00:46.000000000', 'files': ['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/71015d2321124fadede0dbe310b4b232c9659519', 'message': '[OVN] Fix concurrency issue in create/update subnet\n\nThere is a inherent lock contention when updating the\nfixed_ips of the metadata port as it requires a lock on\nall the involved subnets.\n\nGracefully handle the SubnetInUse exception in create/update\nsubnet functions and add the update_metadata_port to the\nmetadata port maintenance job.\n\nCloses-Bug: #1890432\nChange-Id: I1c03c31613f981e4fa4e0f5af47844b66c15158a\n'}]",8,745082,71015d2321124fadede0dbe310b4b232c9659519,35,9,3,13686,,,0,"[OVN] Fix concurrency issue in create/update subnet

There is a inherent lock contention when updating the
fixed_ips of the metadata port as it requires a lock on
all the involved subnets.

Gracefully handle the SubnetInUse exception in create/update
subnet functions and add the update_metadata_port to the
metadata port maintenance job.

Closes-Bug: #1890432
Change-Id: I1c03c31613f981e4fa4e0f5af47844b66c15158a
",git fetch https://review.opendev.org/openstack/neutron refs/changes/82/745082/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py']",2,579c4655efd5b0c454ee28aa36eab7cf16bbf7c1,bug/1890432," # Subnet create/update operations will in some situations defer # the update of fixed_ips on metadata_port to this maintenance job. # # There is a inherent lock contention when updating the # fixed_ips of the metadata port as it requires a lock on # all the involved subnets. LP: #1890432 self._ovn_client.update_metadata_port(admin_context, n)",,31,2
openstack%2Ftripleo-ci~master~I76057481a53bc1541ff4abe80ccf5f8361317c4e,openstack/tripleo-ci,master,I76057481a53bc1541ff4abe80ccf5f8361317c4e,Set ironic power state timeout to 180 in ovb jobs,MERGED,2021-10-26 17:59:50.000000000,2021-11-02 12:08:21.000000000,2021-11-02 12:08:21.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-10-26 17:59:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/a7198d1ddd9a7d6a6adf6db2471a2edfda08bd6d', 'message': '[DNM] Increase ironic power state timeout to 60 in ovb jobs\n\nChange-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}, {'number': 2, 'created': '2021-10-26 23:57:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/c330c7495c082f0988b15044a5b59675a6fd4a1d', 'message': 'Set ironic power state timeout to 60 in ovb jobs\n\nThis patch sets undercloud_ironic_power_state_change_timeout to\n60 for all ovb jobs. See LP #1947403 for more info.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/815540\nChange-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}, {'number': 3, 'created': '2021-10-29 11:20:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/1982d2d82bc9f8bc8828488fed30136973ea9f62', 'message': 'Set ironic power state timeout to 180 in ovb jobs\n\nThis patch sets undercloud_ironic_power_state_change_timeout to\n180 for all ovb jobs. See LP #1947403 for more info.\n\nRelated-Bug: #1947403\nDepends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/815540\nChange-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}, {'number': 4, 'created': '2021-10-29 11:23:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d9a40b842d732376a2391d83b944cdede2d2eff8', 'message': 'Set ironic power state timeout to 180 in ovb jobs\n\nThis patch sets undercloud_ironic_power_state_change_timeout to\n180 for all ovb jobs. See LP #1947403 for more info.\n\nRelated-Bug: #1947403\nDepends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/815540\nChange-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}, {'number': 5, 'created': '2021-11-01 13:53:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/0ca5fd98d2f7f53a4d201f830e25cf51bad782ce', 'message': 'Set ironic power state timeout to 180 in ovb jobs\n\nThis patch sets undercloud_ironic_power_state_change_timeout to\n180 for all ovb jobs. See LP #1947403 for more info.\n\nRelated-Bug: #1947403\nDepends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/815540\nChange-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}, {'number': 6, 'created': '2021-11-01 17:24:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/c4ff623eb8d3b2c441ed9051732db60d5416bc6b', 'message': 'Set ironic power state timeout to 180 in ovb jobs\n\nThis patch sets undercloud_ironic_power_state_change_timeout to\n180 for all ovb jobs. See LP #1947403 for more info.\n\nRelated-Bug: #1947403\nDepends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/815540\nChange-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}, {'number': 7, 'created': '2021-11-01 21:10:19.000000000', 'files': ['toci-quickstart/config/testenv/ovb.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/f0dec96d5f0898fcc1e6c93a5d11d5706c48d79a', 'message': 'Set ironic power state timeout to 180 in ovb jobs\n\nThis patch sets undercloud_ironic_power_state_change_timeout to\n180 for all ovb jobs. See LP #1947403 for more info.\n\nRelated-Bug: #1947403\nDepends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/815540\nChange-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n'}]",11,815537,f0dec96d5f0898fcc1e6c93a5d11d5706c48d79a,35,5,7,30002,,,0,"Set ironic power state timeout to 180 in ovb jobs

This patch sets undercloud_ironic_power_state_change_timeout to
180 for all ovb jobs. See LP #1947403 for more info.

Related-Bug: #1947403
Depends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/815540
Change-Id: I76057481a53bc1541ff4abe80ccf5f8361317c4e
Signed-off-by: Douglas Viroel <dviroel@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/37/815537/3 && git format-patch -1 --stdout FETCH_HEAD,"['toci-quickstart/config/testenv/ovb.yml', 'test-environments/ovb-test-env.yml']",2,a7198d1ddd9a7d6a6adf6db2471a2edfda08bd6d,ironic_power_state_timeout,--- # TODO(dviroel): move to tht/ci/environments parameter_defaults: UndercloudExtraConfig: ironic::conductor::power_state_change_timeout: 60 ,,6,0
openstack%2Ftripleo-quickstart-extras~master~I35ef92472c58679c58b7b99764634c04c4cae13d,openstack/tripleo-quickstart-extras,master,I35ef92472c58679c58b7b99764634c04c4cae13d,Add 'power_state_change_timeout' to undercloud-setup,MERGED,2021-10-26 18:47:44.000000000,2021-11-02 12:08:18.000000000,2021-11-02 12:08:18.000000000,"[{'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-10-26 18:47:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/2314d0ada572c50a471dbea716354f000b39e2d8', 'message': ""[DNM] Add 'power_state_change_timeout' to undercloud-setup\n\nThis patch adds a new configuration option to set\n'power_state_change_timeout' during undercloud-setup.\n\nChange-Id: I35ef92472c58679c58b7b99764634c04c4cae13d\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n""}, {'number': 2, 'created': '2021-10-26 23:57:06.000000000', 'files': ['roles/undercloud-deploy/templates/hieradata-overrides-t-h-t-undercloud.yaml.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/202c6967b38877777a15511c06c496a67865839c', 'message': ""Add 'power_state_change_timeout' to undercloud-setup\n\nThis patch adds a new ironic configuration option to set\n'power_state_change_timeout' during undercloud-setup.\n\nChange-Id: I35ef92472c58679c58b7b99764634c04c4cae13d\nSigned-off-by: Douglas Viroel <dviroel@redhat.com>\n""}]",2,815540,202c6967b38877777a15511c06c496a67865839c,20,5,2,30002,,,0,"Add 'power_state_change_timeout' to undercloud-setup

This patch adds a new ironic configuration option to set
'power_state_change_timeout' during undercloud-setup.

Change-Id: I35ef92472c58679c58b7b99764634c04c4cae13d
Signed-off-by: Douglas Viroel <dviroel@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/40/815540/2 && git format-patch -1 --stdout FETCH_HEAD,['roles/undercloud-deploy/templates/hieradata-overrides-t-h-t-undercloud.yaml.j2'],1,2314d0ada572c50a471dbea716354f000b39e2d8,set_ironic_power_state_timeout, #{% if undercloud_ironic_power_state_change_timeout is defined -%} #ironic::conductor::power_state_change_timeout: {{undercloud_ironic_power_state_change_timeout}} #{%- endif %} # NOTE(dviroel): testing timeout set to 60 ironic::conductor::power_state_change_timeout: 60 ,,6,0
openstack%2Fopenstack-ansible-os_tempest~stable%2Fstein~I3806b897d11e0ed922b7a8aa7f3194435eee73d9,openstack/openstack-ansible-os_tempest,stable/stein,I3806b897d11e0ed922b7a8aa7f3194435eee73d9,Fix tempest plugin versions,MERGED,2021-10-19 09:23:38.000000000,2021-11-02 11:55:18.000000000,2021-11-02 11:53:36.000000000,"[{'_account_id': 16011}, {'_account_id': 22348}, {'_account_id': 28619}]","[{'number': 1, 'created': '2021-10-19 09:23:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/34ffcb6d3a0e6811d3a88bb523f899b19d3bbd25', 'message': 'Fix tempest plugin versions\n\nChange-Id: I3806b897d11e0ed922b7a8aa7f3194435eee73d9\n'}, {'number': 2, 'created': '2021-10-19 10:24:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/48eea0c2125ccee6aabc7ac29002fa78797b1014', 'message': 'Fix tempest plugin versions\n\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/814506\nChange-Id: I3806b897d11e0ed922b7a8aa7f3194435eee73d9\n'}, {'number': 3, 'created': '2021-10-19 12:36:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/f352551185073c1122a2172bfd2cab4aecc54eab', 'message': 'Fix tempest plugin versions\n\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/814506\nChange-Id: I3806b897d11e0ed922b7a8aa7f3194435eee73d9\n'}, {'number': 4, 'created': '2021-10-20 11:26:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/18cf6fff41fe1644590ffdbf0cabe758cf319064', 'message': 'Fix tempest plugin versions\n\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/814560\nChange-Id: I3806b897d11e0ed922b7a8aa7f3194435eee73d9\n'}, {'number': 5, 'created': '2021-10-21 16:17:57.000000000', 'files': ['vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/25c5961e75fdc693c45d5c6aaf4503a5016d5080', 'message': 'Fix tempest plugin versions\n\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/814560\nChange-Id: I3806b897d11e0ed922b7a8aa7f3194435eee73d9\n'}]",1,814535,25c5961e75fdc693c45d5c6aaf4503a5016d5080,17,3,5,28619,,,0,"Fix tempest plugin versions

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/814560
Change-Id: I3806b897d11e0ed922b7a8aa7f3194435eee73d9
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_tempest refs/changes/35/814535/2 && git format-patch -1 --stdout FETCH_HEAD,['vars/main.yml'],1,34ffcb6d3a0e6811d3a88bb523f899b19d3bbd25,, branch: 1.2.0 branch: 0.10.0 branch: 1.2.0 branch: 0.12.0, branch: master branch: master branch: master branch: master,4,4
openstack%2Fironic~stable%2Fwallaby~I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae,openstack/ironic,stable/wallaby,I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae,Fix various issues in the anaconda deploy interface,MERGED,2021-10-28 16:16:42.000000000,2021-11-02 11:54:18.000000000,2021-11-02 11:52:03.000000000,"[{'_account_id': 4571}, {'_account_id': 11076}, {'_account_id': 12640}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 16:16:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/645c249deaefa2c90c52e530ead19865eb18ac0e', 'message': ""Fix various issues in the anaconda deploy interface\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nFix a bug where the deploy() method of anaconda deploy\ninterface where it did not return states.DEPLOYWAIT instead\nit returned 'None' which caused the instance to go straight to\n'active' instead of 'wait call-back'.\n\nFix issues in the default kickstart template where heartbeat was\nmissing 'callback_url' parameter and the HTTP method should be\n'POST' not 'PUT'.\n\nFix issues with automated cleaning when anaconda deploy interface\nis used.\n\nAnaconda deploy interface could not deploy tarballs as\nthe disk image sent to the anaconda interface via liveimg --url\nkickstart command does not include any file extension. When\nno file extension is present the kickstart command liveimg --url\nassumes the disk is a mountable partiton image. We fix this\nproblem by enabling the user to specify file extensions using\na glance image property named 'disk_file_extension' on the OS\nimage.\n\nCo-Authored-By: Ruby Loo <opensrloo@gmail.com>\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n""}, {'number': 2, 'created': '2021-10-29 14:39:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/54d6fbf14089af02f6dd8c906325189fe2ce2379', 'message': ""Fix various issues in the anaconda deploy interface\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nFix a bug where the deploy() method of anaconda deploy\ninterface where it did not return states.DEPLOYWAIT instead\nit returned 'None' which caused the instance to go straight to\n'active' instead of 'wait call-back'.\n\nFix issues in the default kickstart template where heartbeat was\nmissing 'callback_url' parameter and the HTTP method should be\n'POST' not 'PUT'.\n\nFix issues with automated cleaning when anaconda deploy interface\nis used.\n\nAnaconda deploy interface could not deploy tarballs as\nthe disk image sent to the anaconda interface via liveimg --url\nkickstart command does not include any file extension. When\nno file extension is present the kickstart command liveimg --url\nassumes the disk is a mountable partiton image. We fix this\nproblem by enabling the user to specify file extensions using\na glance image property named 'disk_file_extension' on the OS\nimage.\n\nCo-Authored-By: Ruby Loo <opensrloo@gmail.com>\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n(cherry picked from commit df99dea001772c1c6691150060d3ebbf496e5d25)\n""}, {'number': 3, 'created': '2021-10-29 15:33:54.000000000', 'files': ['ironic/drivers/modules/pxe_base.py', 'doc/source/admin/anaconda-deploy-interface.rst', 'ironic/drivers/modules/deploy_utils.py', 'ironic/drivers/modules/pxe.py', 'ironic/tests/unit/drivers/modules/test_pxe.py', 'ironic/drivers/modules/ks.cfg.template', 'ironic/common/pxe_utils.py', 'releasenotes/notes/fix-anaconda-deploy-interface-bfa2cfca22b04680.yaml', 'ironic/tests/unit/common/test_pxe_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/95475bfb4ff06ded19695eae8b4cd7d4c5ee1dd4', 'message': ""Fix various issues in the anaconda deploy interface\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nFix a bug where the deploy() method of anaconda deploy\ninterface where it did not return states.DEPLOYWAIT instead\nit returned 'None' which caused the instance to go straight to\n'active' instead of 'wait call-back'.\n\nFix issues in the default kickstart template where heartbeat was\nmissing 'callback_url' parameter and the HTTP method should be\n'POST' not 'PUT'.\n\nFix issues with automated cleaning when anaconda deploy interface\nis used.\n\nAnaconda deploy interface could not deploy tarballs as\nthe disk image sent to the anaconda interface via liveimg --url\nkickstart command does not include any file extension. When\nno file extension is present the kickstart command liveimg --url\nassumes the disk is a mountable partiton image. We fix this\nproblem by enabling the user to specify file extensions using\na glance image property named 'disk_file_extension' on the OS\nimage.\n\nConflicts:\n    ironic/drivers/modules/deploy_utils.py\n    ironic/tests/unit/drivers/modules/test_deploy_utils.py\n    ironic/tests/unit/drivers/modules/test_pxe.py\n\nNOTE(rloo): The conflicts are due to changes in master that\nrefactored the code (among other changes,\nI4fc63be4e3cd4656d0ca7e893d4f3a98c07a8b4c) so that validation\nof stage2_id is in deploy_utils.py. In wallaby, that validation\nis done in pxe_base.py\n\nCo-Authored-By: Ruby Loo <opensrloo@gmail.com>\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n(cherry picked from commit df99dea001772c1c6691150060d3ebbf496e5d25)\n""}]",57,815870,95475bfb4ff06ded19695eae8b4cd7d4c5ee1dd4,24,4,3,6618,,,0,"Fix various issues in the anaconda deploy interface

The kickstart template expects a dictionary with 'ks_options'
as the key. Instead build_kickstart_config_options function
returns a dict with keys 'liveimg_url', 'agent_token' and
'heartbeat_url'.

This change fixes this problem by returning a dictionary of
dict with 'ks_options' as key and the dictionary with
keys 'liveimg_url', 'agent_token' and heartbeat_url' as
value.

Fix a bug where the deploy() method of anaconda deploy
interface where it did not return states.DEPLOYWAIT instead
it returned 'None' which caused the instance to go straight to
'active' instead of 'wait call-back'.

Fix issues in the default kickstart template where heartbeat was
missing 'callback_url' parameter and the HTTP method should be
'POST' not 'PUT'.

Fix issues with automated cleaning when anaconda deploy interface
is used.

Anaconda deploy interface could not deploy tarballs as
the disk image sent to the anaconda interface via liveimg --url
kickstart command does not include any file extension. When
no file extension is present the kickstart command liveimg --url
assumes the disk is a mountable partiton image. We fix this
problem by enabling the user to specify file extensions using
a glance image property named 'disk_file_extension' on the OS
image.

Conflicts:
    ironic/drivers/modules/deploy_utils.py
    ironic/tests/unit/drivers/modules/test_deploy_utils.py
    ironic/tests/unit/drivers/modules/test_pxe.py

NOTE(rloo): The conflicts are due to changes in master that
refactored the code (among other changes,
I4fc63be4e3cd4656d0ca7e893d4f3a98c07a8b4c) so that validation
of stage2_id is in deploy_utils.py. In wallaby, that validation
is done in pxe_base.py

Co-Authored-By: Ruby Loo <opensrloo@gmail.com>
Change-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae
(cherry picked from commit df99dea001772c1c6691150060d3ebbf496e5d25)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/70/815870/3 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/anaconda-deploy-interface.rst', 'ironic/drivers/modules/deploy_utils.py', 'ironic/drivers/modules/pxe.py', 'ironic/tests/unit/drivers/modules/test_pxe.py', 'ironic/drivers/modules/ks.cfg.template', 'ironic/common/pxe_utils.py', 'releasenotes/notes/fix-anaconda-deploy-interface-bfa2cfca22b04680.yaml', 'ironic/tests/unit/drivers/modules/test_deploy_utils.py', 'ironic/tests/unit/common/test_pxe_utils.py']",9,645c249deaefa2c90c52e530ead19865eb18ac0e,anaconda-deploy-driver-stable/wallaby," params = pxe_utils.build_kickstart_config_options(task) self.assertTrue(params['ks_options'].pop('agent_token')) self.assertEqual(expected, params['ks_options']) params = {'liveimg_url': 'http://fake', 'agent_token': 'faketoken', 'heartbeat_url': 'http://fake_hb'} ks_options_mock.return_value = {'ks_options': params} render_mock.assert_called_with( image_info['ks_template'][1], {'ks_options': params} )"," ks_options = pxe_utils.build_kickstart_config_options(task) self.assertTrue(ks_options.pop('agent_token')) self.assertEqual(expected, ks_options) ks_options = {'liveimg_url': 'http://fake', 'agent_token': 'faketoken', 'heartbeat_url': 'http://fake_hb'} ks_options_mock.return_value = ks_options render_mock.assert_called_with(image_info['ks_template'][1], ks_options)",191,23
openstack%2Fos-ken~master~I6c1ca6bb847581050faccb52570bfdfb2d26b448,openstack/os-ken,master,I6c1ca6bb847581050faccb52570bfdfb2d26b448,Choose the highest TLS version,MERGED,2021-10-13 14:01:17.000000000,2021-11-02 11:51:28.000000000,2021-11-02 11:49:43.000000000,"[{'_account_id': 8313}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-13 14:01:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-ken/commit/c9b46ac5b5b859e645449eb65411ab564738119c', 'message': 'Choose the highest TLS version\n\nPlease note that this is a stop-gap measure.  Also add a basic SSL\nserver test.\n\nCo-authored-by: alex <atoptsoglou@suse.com>\nSigned-off-by: IWAMOTO Toshihiro <iwamoto@valinux.co.jp>\nSigned-off-by: FUJITA Tomonori <fujita.tomonori@gmail.com>\n\nBackport from https://github.com/faucetsdn/ryu/commit/01a09a0e\n\nStory: #2009283\nTask: #43614\nChange-Id: I6c1ca6bb847581050faccb52570bfdfb2d26b448\n'}, {'number': 2, 'created': '2021-10-26 14:42:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-ken/commit/5794b4f4c1d8f28a58b99658e7bd37ab1f81413f', 'message': 'Choose the highest TLS version\n\nPlease note that this is a stop-gap measure.  Also add a basic SSL\nserver test.\n\nCo-authored-by: alex <atoptsoglou@suse.com>\nSigned-off-by: IWAMOTO Toshihiro <iwamoto@valinux.co.jp>\nSigned-off-by: FUJITA Tomonori <fujita.tomonori@gmail.com>\n\nBackport from https://github.com/faucetsdn/ryu/commit/01a09a0e\n\nStory: #2009283\nTask: #43614\nChange-Id: I6c1ca6bb847581050faccb52570bfdfb2d26b448\n'}, {'number': 3, 'created': '2021-10-27 09:26:29.000000000', 'files': ['os_ken/tests/unit/controller/test_controller.py', 'os_ken/controller/controller.py', 'os_ken/tests/unit/controller/cert.crt', 'os_ken/tests/unit/controller/cert.key', 'os_ken/lib/hub.py'], 'web_link': 'https://opendev.org/openstack/os-ken/commit/8d98fb201175bfe740d4ddaed88d0264b47702d8', 'message': 'Choose the highest TLS version\n\nPlease note that this is a stop-gap measure.  Also add a basic SSL\nserver test.\n\nCo-authored-by: alex <atoptsoglou@suse.com>\nSigned-off-by: IWAMOTO Toshihiro <iwamoto@valinux.co.jp>\nSigned-off-by: FUJITA Tomonori <fujita.tomonori@gmail.com>\n\nBackport from https://github.com/faucetsdn/ryu/commit/01a09a0e\n\nStory: #2009283\nTask: #43614\nChange-Id: I6c1ca6bb847581050faccb52570bfdfb2d26b448\n'}]",4,813830,8d98fb201175bfe740d4ddaed88d0264b47702d8,16,3,3,11975,,,0,"Choose the highest TLS version

Please note that this is a stop-gap measure.  Also add a basic SSL
server test.

Co-authored-by: alex <atoptsoglou@suse.com>
Signed-off-by: IWAMOTO Toshihiro <iwamoto@valinux.co.jp>
Signed-off-by: FUJITA Tomonori <fujita.tomonori@gmail.com>

Backport from https://github.com/faucetsdn/ryu/commit/01a09a0e

Story: #2009283
Task: #43614
Change-Id: I6c1ca6bb847581050faccb52570bfdfb2d26b448
",git fetch https://review.opendev.org/openstack/os-ken refs/changes/30/813830/3 && git format-patch -1 --stdout FETCH_HEAD,"['os_ken/tests/unit/controller/test_controller.py', 'os_ken/controller/controller.py', 'os_ken/tests/unit/controller/test_controller.py.orig', 'os_ken/tests/unit/controller/cert.crt', 'os_ken/tests/unit/controller/cert.key', 'os_ken/lib/hub.py']",6,c9b46ac5b5b859e645449eb65411ab564738119c,task/43614," import sys if 'ssl_ctx' in ssl_args: ctx = ssl_args.pop('ssl_ctx') ctx.load_cert_chain(ssl_args.pop('certfile'), ssl_args.pop('keyfile')) if 'cert_reqs' in ssl_args: ctx.verify_mode = ssl_args.pop('cert_reqs') if 'ca_certs' in ssl_args: ctx.load_verify_locations(ssl_args.pop('ca_certs')) handle(ctx.wrap_socket(sock, **ssl_args), addr) else: handle(ssl.wrap_socket(sock, **ssl_args), addr)"," handle(ssl.wrap_socket(sock, **ssl_args), addr)",307,5
openstack%2Ftripleo-common~stable%2Fwallaby~Ifb46702abe32d79ea097f02a684a2940887c0e23,openstack/tripleo-common,stable/wallaby,Ifb46702abe32d79ea097f02a684a2940887c0e23,Add apache to the designate api container,MERGED,2021-11-01 16:58:43.000000000,2021-11-02 11:42:27.000000000,2021-11-02 11:41:01.000000000,"[{'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-11-01 16:58:43.000000000', 'files': ['container-images/tcib/base/os/designate-base/designate-api/designate-api.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/b997e0efe852cf7f7179b539f629f24194b45c52', 'message': 'Add apache to the designate api container\n\nThe designate API should run behind apache.\n\nChange-Id: Ifb46702abe32d79ea097f02a684a2940887c0e23\n(cherry picked from commit 2984f46468e86aea42e1f05c631f42f45b454723)\n'}]",0,816196,b997e0efe852cf7f7179b539f629f24194b45c52,9,4,1,6681,,,0,"Add apache to the designate api container

The designate API should run behind apache.

Change-Id: Ifb46702abe32d79ea097f02a684a2940887c0e23
(cherry picked from commit 2984f46468e86aea42e1f05c631f42f45b454723)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/96/816196/1 && git format-patch -1 --stdout FETCH_HEAD,['container-images/tcib/base/os/designate-base/designate-api/designate-api.yaml'],1,b997e0efe852cf7f7179b539f629f24194b45c52,designate-apache, - httpd - mod_ssl - python3-mod_wsgi,,3,0
openstack%2Fproject-config~master~I45cefd204ba7f547dc2ad2811dca633a19e360f0,openstack/project-config,master,I45cefd204ba7f547dc2ad2811dca633a19e360f0,kolla-cli: end gating for retirement,MERGED,2021-10-19 13:27:41.000000000,2021-11-02 11:03:46.000000000,2021-11-02 11:03:46.000000000,"[{'_account_id': 6547}, {'_account_id': 8556}, {'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-19 13:27:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/f9e3bd7efb04f040d3da0ee69a447cd0207281e3', 'message': 'kolla-cli: end gating for retirement\n\nkolla-cli was deprecated in Ussuri\n\nhttp://lists.openstack.org/pipermail/openstack-discuss/2020-May/014983.html\n\nChange-Id: I45cefd204ba7f547dc2ad2811dca633a19e360f0\n'}, {'number': 2, 'created': '2021-10-19 15:05:56.000000000', 'files': ['zuul.d/projects.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/35a19817ca173084d5ef38b00611522eedaae280', 'message': 'kolla-cli: end gating for retirement\n\nkolla-cli was deprecated in Ussuri\n\nhttp://lists.openstack.org/pipermail/openstack-discuss/2020-May/014983.html\n\nChange-Id: I45cefd204ba7f547dc2ad2811dca633a19e360f0\n'}]",8,814580,35a19817ca173084d5ef38b00611522eedaae280,18,7,2,14826,,,0,"kolla-cli: end gating for retirement

kolla-cli was deprecated in Ussuri

http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014983.html

Change-Id: I45cefd204ba7f547dc2ad2811dca633a19e360f0
",git fetch https://review.opendev.org/openstack/project-config refs/changes/80/814580/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/projects.yaml'],1,f9e3bd7efb04f040d3da0ee69a447cd0207281e3,, - noop-jobs, - official-openstack-repo-jobs - publish-to-pypi-stable-only check: jobs: - noop: branches: master gate: jobs: - noop: branches: master,1,10
openstack%2Fnova~master~If252d4cb6be85b9681ea22125394edd92f13c0e7,openstack/nova,master,If252d4cb6be85b9681ea22125394edd92f13c0e7,DNM: trigger nova-next,ABANDONED,2021-11-01 07:59:51.000000000,2021-11-02 10:52:21.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-01 07:59:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/33baf81eb71934bdae174b8130b5153129a3a3ea', 'message': 'DNM: trigger nova-next\n\nChange-Id: If252d4cb6be85b9681ea22125394edd92f13c0e7\n'}]",0,816127,33baf81eb71934bdae174b8130b5153129a3a3ea,7,1,1,9708,,,0,"DNM: trigger nova-next

Change-Id: If252d4cb6be85b9681ea22125394edd92f13c0e7
",git fetch https://review.opendev.org/openstack/nova refs/changes/27/816127/1 && git format-patch -1 --stdout FETCH_HEAD,[],0,33baf81eb71934bdae174b8130b5153129a3a3ea,,,,0,0
openstack%2Fcharm-octavia~stable%2F21.04~I1bafd9eecb83aefb425bc5286f23d47c0885ac8e,openstack/charm-octavia,stable/21.04,I1bafd9eecb83aefb425bc5286f23d47c0885ac8e,Enable OVN L4 provider from Victoria onward,ABANDONED,2021-07-19 11:28:00.000000000,2021-11-02 10:14:02.000000000,,"[{'_account_id': 13686}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-19 11:28:00.000000000', 'files': ['src/lib/charm/openstack/octavia.py', 'src/tests/bundles/bionic-rocky-ha.yaml', 'src/tests/bundles/bionic-ussuri-ha-ovn.yaml', 'osci.yaml', 'src/tests/bundles/focal-ussuri-ha.yaml', 'src/tests/bundles/focal-ussuri-ha-ovn.yaml', 'unit_tests/test_lib_charm_openstack_octavia.py', 'src/tests/bundles/bionic-rocky-lxd.yaml', 'src/tests/bundles/bionic-stein-ha.yaml', 'src/tests/tests.yaml', 'src/tests/bundles/bionic-train-ha-ovn.yaml', 'src/tests/bundles/focal-victoria-ha-ovn.yaml', 'src/tests/bundles/bionic-ussuri-ha.yaml', 'src/tests/bundles/groovy-victoria-ha.yaml', 'src/tests/bundles/bionic-train-ha.yaml', 'src/tests/bundles/focal-victoria-ha.yaml', 'src/templates/ussuri/octavia.conf', 'src/tests/bundles/groovy-victoria-ha-ovn.yaml'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/aa3f44a936dad286dd103582cda253c87a92c800', 'message': 'Enable OVN L4 provider from Victoria onward\n\nThe driver is unreliable at Ussuri.\n\nAlso ensure we restart the ovn-driver-agent when configuration is\nwritten to disk.\n\nEnsure Port Security is enabled as this is a requirement for\nreliable operation of the Amphora driver also exercised by the\nfunctional tests.\n\nEnable focal/groovy-victoria gates and re-enable Ussuri OVS gate.\n\nCloses-Bug: #1927960\nCloses-Bug: #1927962\nRelated-Bug: #1927959\nChange-Id: I1bafd9eecb83aefb425bc5286f23d47c0885ac8e\n(cherry picked from commit d5b9859741829adc403b8078999bbc9998ec6611)\n'}]",0,801253,aa3f44a936dad286dd103582cda253c87a92c800,21,3,1,31289,,,0,"Enable OVN L4 provider from Victoria onward

The driver is unreliable at Ussuri.

Also ensure we restart the ovn-driver-agent when configuration is
written to disk.

Ensure Port Security is enabled as this is a requirement for
reliable operation of the Amphora driver also exercised by the
functional tests.

Enable focal/groovy-victoria gates and re-enable Ussuri OVS gate.

Closes-Bug: #1927960
Closes-Bug: #1927962
Related-Bug: #1927959
Change-Id: I1bafd9eecb83aefb425bc5286f23d47c0885ac8e
(cherry picked from commit d5b9859741829adc403b8078999bbc9998ec6611)
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/53/801253/1 && git format-patch -1 --stdout FETCH_HEAD,"['src/lib/charm/openstack/octavia.py', 'src/tests/bundles/bionic-rocky-ha.yaml', 'src/tests/bundles/bionic-ussuri-ha-ovn.yaml', 'osci.yaml', 'src/tests/bundles/focal-ussuri-ha.yaml', 'src/tests/bundles/focal-ussuri-ha-ovn.yaml', 'unit_tests/test_lib_charm_openstack_octavia.py', 'src/tests/bundles/bionic-rocky-lxd.yaml', 'src/tests/bundles/bionic-stein-ha.yaml', 'src/tests/tests.yaml', 'src/tests/bundles/bionic-train-ha-ovn.yaml', 'src/tests/bundles/focal-victoria-ha-ovn.yaml', 'src/tests/bundles/bionic-ussuri-ha.yaml', 'src/tests/bundles/groovy-victoria-ha.yaml', 'src/tests/bundles/bionic-train-ha.yaml', 'src/tests/bundles/focal-victoria-ha.yaml', 'src/templates/ussuri/octavia.conf', 'src/tests/bundles/groovy-victoria-ha-ovn.yaml']",18,aa3f44a936dad286dd103582cda253c87a92c800,charm-octavia-stable/21.04, enable-ml2-port-security: True # LP: #1928179 # retrofit-series: groovy retrofit-series: focal, retrofit-series: groovy,107,186
openstack%2Fcharm-octavia~stable%2F21.04~I72fd1cc3db8db39e58d0765895e692ff27ce98e6,openstack/charm-octavia,stable/21.04,I72fd1cc3db8db39e58d0765895e692ff27ce98e6,Lock to latest layer-basic commit,ABANDONED,2021-07-15 13:54:36.000000000,2021-11-02 10:13:33.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-15 13:54:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/82bfb433976fd35613c771bb10038b6449653953', 'message': 'Lock to latest layer-basic commit\n\nThis picks up wheelhouse fixes for hirsute and xenial.\n\nCloses-Bug: #1934934\nChange-Id: I72fd1cc3db8db39e58d0765895e692ff27ce98e6\n'}, {'number': 2, 'created': '2021-07-19 14:39:28.000000000', 'files': ['src/build.lock'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/5055097a5b7823350c443584a56374f8d984baaa', 'message': 'Lock to latest layer-basic commit\n\nThis picks up wheelhouse fixes for hirsute and xenial.\n\nCloses-Bug: #1934934\nDepends-On: https://review.opendev.org/c/openstack/charm-octavia/+/801253\nChange-Id: I72fd1cc3db8db39e58d0765895e692ff27ce98e6\n'}]",0,800948,5055097a5b7823350c443584a56374f8d984baaa,8,2,2,11805,,,0,"Lock to latest layer-basic commit

This picks up wheelhouse fixes for hirsute and xenial.

Closes-Bug: #1934934
Depends-On: https://review.opendev.org/c/openstack/charm-octavia/+/801253
Change-Id: I72fd1cc3db8db39e58d0765895e692ff27ce98e6
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/48/800948/1 && git format-patch -1 --stdout FETCH_HEAD,['src/build.lock'],1,82bfb433976fd35613c771bb10038b6449653953,bug/1934934," ""branch"": ""a3ff62c32c993d80417f6e093e3ef95e42f62083"",} "," ""branch"": ""623e69c7b432456fd4364f6e1835424fd6b5425e"",}",2,2
openstack%2Fcharm-octavia-dashboard~stable%2F21.04~I98c479d3ce14cab6d86c06d4bd77ada2fb6e8a55,openstack/charm-octavia-dashboard,stable/21.04,I98c479d3ce14cab6d86c06d4bd77ada2fb6e8a55,rebuild - restore proxy env vars for add-apt-repository,ABANDONED,2021-07-02 17:25:39.000000000,2021-11-02 10:12:39.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-02 17:25:39.000000000', 'files': ['rebuild'], 'web_link': 'https://opendev.org/openstack/charm-octavia-dashboard/commit/e8aeb74b0b18a2284b7bf0b2537fde352d46ad3d', 'message': 'rebuild - restore proxy env vars for add-apt-repository\n\nChange-Id: I98c479d3ce14cab6d86c06d4bd77ada2fb6e8a55\n'}]",0,799306,e8aeb74b0b18a2284b7bf0b2537fde352d46ad3d,15,4,1,11805,,,0,"rebuild - restore proxy env vars for add-apt-repository

Change-Id: I98c479d3ce14cab6d86c06d4bd77ada2fb6e8a55
",git fetch https://review.opendev.org/openstack/charm-octavia-dashboard refs/changes/06/799306/1 && git format-patch -1 --stdout FETCH_HEAD,['rebuild'],1,e8aeb74b0b18a2284b7bf0b2537fde352d46ad3d,batch-update,8ee0e9d0-db58-11eb-bc23-fbedb9fa1921,831f5ed4-5745-11eb-a796-6b95b5de6576,1,1
openstack%2Fcharm-panko~master~I5dade59d668435c4e9078539a92f551a64241afe,openstack/charm-panko,master,I5dade59d668435c4e9078539a92f551a64241afe,NOT MAINTAINED ANYMORE,MERGED,2021-10-12 15:55:10.000000000,2021-11-02 09:46:27.000000000,2021-11-02 09:46:27.000000000,"[{'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-10-12 15:55:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-panko/commit/751b74c8e8fa691a170342e9c4142bd7a37cf7a6', 'message': 'NOT MAINTAINED ANYMORE\n\nChange-Id: I5dade59d668435c4e9078539a92f551a64241afe\n'}, {'number': 2, 'created': '2021-10-13 07:48:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-panko/commit/dbf9174e0ed5dcab52f65131630f91de87596776', 'message': 'NOT MAINTAINED ANYMORE\n\nChange-Id: I5dade59d668435c4e9078539a92f551a64241afe\n'}, {'number': 3, 'created': '2021-10-13 08:00:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-panko/commit/32ae56304fe0fb38e8660b3205e45926f1196960', 'message': 'NOT MAINTAINED ANYMORE\n\nAlso synced release-tools to fix the gate.\n\nChange-Id: I5dade59d668435c4e9078539a92f551a64241afe\n'}, {'number': 4, 'created': '2021-10-28 08:21:29.000000000', 'files': ['src/README.md', 'requirements.txt', 'test-requirements.txt', 'src/tox.ini', 'pip.sh', '.zuul.yaml', 'src/test-requirements.txt', 'tox.ini', 'README.md'], 'web_link': 'https://opendev.org/openstack/charm-panko/commit/291e0b9c72a14a51a6a833df3183a971c0a95c96', 'message': 'NOT MAINTAINED ANYMORE\n\nAlso synced release-tools to fix the gate, including\nhttps://github.com/openstack-charmers/release-tools/pull/168\n\nChange-Id: I5dade59d668435c4e9078539a92f551a64241afe\n'}]",7,813667,291e0b9c72a14a51a6a833df3183a971c0a95c96,23,3,4,31289,,,0,"NOT MAINTAINED ANYMORE

Also synced release-tools to fix the gate, including
https://github.com/openstack-charmers/release-tools/pull/168

Change-Id: I5dade59d668435c4e9078539a92f551a64241afe
",git fetch https://review.opendev.org/openstack/charm-panko refs/changes/67/813667/3 && git format-patch -1 --stdout FETCH_HEAD,"['src/README.md', 'README.md']",2,751b74c8e8fa691a170342e9c4142bd7a37cf7a6,not-maintained,> **WARNING**: DO NOT USE OR CONTRIBUTE. This charm is not maintained anymore > because the [upstream project](https://opendev.org/openstack/panko) isn't > either. ,,7,2
openstack%2Fcharm-hacluster~master~Ic6bdb71bdb367de28ffddcae5797ba556971ab25,openstack/charm-hacluster,master,Ic6bdb71bdb367de28ffddcae5797ba556971ab25,Fix py35 job,MERGED,2021-11-01 17:13:13.000000000,2021-11-02 09:45:26.000000000,2021-11-02 09:45:26.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-11-01 17:13:13.000000000', 'files': ['requirements.txt', 'test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/8fcf7624d981ab6d63e3ef293e1d59b4d05fc6af', 'message': 'Fix py35 job\n\nAdding and pinning cffi\n\nChange-Id: Ic6bdb71bdb367de28ffddcae5797ba556971ab25\n'}]",2,816197,8fcf7624d981ab6d63e3ef293e1d59b4d05fc6af,8,3,1,14567,,,0,"Fix py35 job

Adding and pinning cffi

Change-Id: Ic6bdb71bdb367de28ffddcae5797ba556971ab25
",git fetch https://review.opendev.org/openstack/charm-hacluster refs/changes/97/816197/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'test-requirements.txt']",2,8fcf7624d981ab6d63e3ef293e1d59b4d05fc6af,,"pyparsing<3.0.0 # but cffi needs it, so pin here. cffi==1.14.6; python_version < '3.6' # cffi 1.15.0 drops support for py35.",,3,0
openstack%2Fskyline-console~master~I14f14a54586c584f7e6138cfc7aad9721cdfaf7f,openstack/skyline-console,master,I14f14a54586c584f7e6138cfc7aad9721cdfaf7f,fix: Fixed the platform entrance not switching when switching projects,MERGED,2021-11-01 08:07:01.000000000,2021-11-02 09:01:21.000000000,2021-11-02 09:01:21.000000000,"[{'_account_id': 22348}, {'_account_id': 27809}, {'_account_id': 30434}]","[{'number': 1, 'created': '2021-11-01 08:07:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/skyline-console/commit/ba299f36c4f0f250ffe189113426b315542a0737', 'message': 'fix: Fixed the platform entrance not switching when switching projects\n\nFix the above issue by mobox observer\n\nChange-Id: I14f14a54586c584f7e6138cfc7aad9721cdfaf7f\n'}, {'number': 2, 'created': '2021-11-02 05:44:04.000000000', 'files': ['src/pages/storage/containers/Volume/actions/Bootable.jsx', 'src/components/Layout/GlobalHeader/RightContent.jsx'], 'web_link': 'https://opendev.org/openstack/skyline-console/commit/6dc359f4a21ece572b54d8bf4c3fed4ead724dfb', 'message': 'fix: Fixed the platform entrance not switching when switching projects\n\nFix the above issue by mobox observer\n\nChange-Id: I14f14a54586c584f7e6138cfc7aad9721cdfaf7f\n'}]",0,816129,6dc359f4a21ece572b54d8bf4c3fed4ead724dfb,11,3,2,33689,,,0,"fix: Fixed the platform entrance not switching when switching projects

Fix the above issue by mobox observer

Change-Id: I14f14a54586c584f7e6138cfc7aad9721cdfaf7f
",git fetch https://review.opendev.org/openstack/skyline-console refs/changes/29/816129/2 && git format-patch -1 --stdout FETCH_HEAD,['src/components/Layout/GlobalHeader/RightContent.jsx'],1,ba299f36c4f0f250ffe189113426b315542a0737,open-112380,"import { inject, observer } from 'mobx-react';@inject('rootStore') @observer",,3,0
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I9729beac4c4e84d2619c4c629cd26eba8a26b87d,openstack/tripleo-heat-templates,stable/ussuri,I9729beac4c4e84d2619c4c629cd26eba8a26b87d,Add parameter IronicPowerStateChangeTimeout,MERGED,2021-10-28 08:34:57.000000000,2021-11-02 07:41:48.000000000,2021-11-02 07:40:22.000000000,"[{'_account_id': 4571}, {'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 08:34:57.000000000', 'files': ['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5bb52590f0aea189967e7434dd0413a885981eb2', 'message': 'Add parameter IronicPowerStateChangeTimeout\n\nA heat parameter ``IronicPowerStateChangeTimeout`` has been added\nwhich sets the number of seconds to wait for power operations to\ncomplete, i.e., so that a baremetal node is in the desired power\nstate. If timed out, the power operation is considered a failure. The\ndefault is 60 seconds, which is the same as the current Ironic\ndefault.\n\nThis could be backported to stable/train, where the ironic default of\n30s is causing failures in CI jobs.\n\nRelated-Bug: #1947403\nChange-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d\n(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)\n'}]",1,815800,5bb52590f0aea189967e7434dd0413a885981eb2,13,4,1,24245,,,0,"Add parameter IronicPowerStateChangeTimeout

A heat parameter ``IronicPowerStateChangeTimeout`` has been added
which sets the number of seconds to wait for power operations to
complete, i.e., so that a baremetal node is in the desired power
state. If timed out, the power operation is considered a failure. The
default is 60 seconds, which is the same as the current Ironic
default.

This could be backported to stable/train, where the ironic default of
30s is causing failures in CI jobs.

Related-Bug: #1947403
Change-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d
(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/00/815800/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml']",2,5bb52590f0aea189967e7434dd0413a885981eb2,bug/1947403-stable/ussuri,"--- features: - | A heat parameter ``IronicPowerStateChangeTimeout`` has been added which sets the number of seconds to wait for power operations to complete, i.e., so that a baremetal node is in the desired power state. If timed out, the power operation is considered a failure. The default is 60 seconds, which is the same as the current Ironic default. ",,16,1
openstack%2Fos-net-config~stable%2Ftrain~I1ab4ed3d7caca81b77c28b573e953af2cbaf6824,openstack/os-net-config,stable/train,I1ab4ed3d7caca81b77c28b573e953af2cbaf6824,Fix upper constraints,MERGED,2021-10-27 14:19:01.000000000,2021-11-02 07:41:46.000000000,2021-11-02 07:40:24.000000000,"[{'_account_id': 7144}, {'_account_id': 18575}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 14:19:01.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/os-net-config/commit/eb830e639c2433032032579b24d4bc6c4b30b05c', 'message': 'Fix upper constraints\n\nIt is incorrectly pulling in master which is leading to a pyflakes\nproblem.\n\nChange-Id: I1ab4ed3d7caca81b77c28b573e953af2cbaf6824\n'}]",0,815674,eb830e639c2433032032579b24d4bc6c4b30b05c,9,3,1,14985,,,0,"Fix upper constraints

It is incorrectly pulling in master which is leading to a pyflakes
problem.

Change-Id: I1ab4ed3d7caca81b77c28b573e953af2cbaf6824
",git fetch https://review.opendev.org/openstack/os-net-config refs/changes/74/815674/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,eb830e639c2433032032579b24d4bc6c4b30b05c,fix-constraints, -c{env:UPPER_CONSTRAINTS_FILE: https://releases.openstack.org/constraints/upper/train}, -c{env:UPPER_CONSTRAINTS_FILE: https://releases.openstack.org/constraints/upper/master},1,1
openstack%2Fnova~master~Ic28ef83f5193e6c1fbac1577ef58fe0d9e45694d,openstack/nova,master,Ic28ef83f5193e6c1fbac1577ef58fe0d9e45694d,Temp disable nova-manage placement heal_allocation testing,MERGED,2021-11-01 09:56:52.000000000,2021-11-02 07:05:52.000000000,2021-11-01 16:49:03.000000000,"[{'_account_id': 10135}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 09:56:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3b780970558629ab2db38fb9abe433332e537f27', 'message': 'Temp disable nova-manage placement heal_allocation testing\n\nSince I99a49b107b1872ddf83d1d8497a26a8d728feb07 the nova-next job fails\ndue to I missed a dependency between that neutron patch and\nhttps://review.opendev.org/c/openstack/nova/+/802060 . So this patch\ndisable testing until the nova adaptation lands.\n\nChange-Id: Ic28ef83f5193e6c1fbac1577ef58fe0d9e45694d\n'}, {'number': 2, 'created': '2021-11-01 11:26:56.000000000', 'files': ['gate/post_test_hook.sh'], 'web_link': 'https://opendev.org/openstack/nova/commit/45e71fb9ceaf7fd89e63379aa65a8971b053a8b1', 'message': 'Temp disable nova-manage placement heal_allocation testing\n\nSince I99a49b107b1872ddf83d1d8497a26a8d728feb07 the nova-next job fails\ndue to I missed a dependency between that neutron patch and\nhttps://review.opendev.org/c/openstack/nova/+/802060 . So this patch\ndisable testing until the nova adaptation lands.\n\nChange-Id: Ic28ef83f5193e6c1fbac1577ef58fe0d9e45694d\n'}]",4,816156,45e71fb9ceaf7fd89e63379aa65a8971b053a8b1,19,3,2,9708,,,0,"Temp disable nova-manage placement heal_allocation testing

Since I99a49b107b1872ddf83d1d8497a26a8d728feb07 the nova-next job fails
due to I missed a dependency between that neutron patch and
https://review.opendev.org/c/openstack/nova/+/802060 . So this patch
disable testing until the nova adaptation lands.

Change-Id: Ic28ef83f5193e6c1fbac1577ef58fe0d9e45694d
",git fetch https://review.opendev.org/openstack/nova refs/changes/56/816156/1 && git format-patch -1 --stdout FETCH_HEAD,['gate/post_test_hook.sh'],1,3b780970558629ab2db38fb9abe433332e537f27,,"echo ""Verifying online_data_migrations idempotence"" # We will re-use the server created earlier for this test. (A server needs to # be present during the run of online_data_migrations and archiving). # Run the online data migrations before archiving. $MANAGE db online_data_migrations # We need to archive the deleted marker instance used by the # fill_virtual_interface_list online data migration in order to trigger # creation of a new deleted marker instance. set +e archive_deleted_rows set -e # Verify whether online data migrations run after archiving will succeed. # See for more details: https://bugs.launchpad.net/nova/+bug/1824435 $MANAGE db online_data_migrations # temporary disable nova-manage placement heal_allocations testing until # https://review.opendev.org/c/openstack/nova/+/802060 lands return 0 ","echo ""Verifying online_data_migrations idempotence"" # We will re-use the server created earlier for this test. (A server needs to # be present during the run of online_data_migrations and archiving). # Run the online data migrations before archiving. $MANAGE db online_data_migrations # We need to archive the deleted marker instance used by the # fill_virtual_interface_list online data migration in order to trigger # creation of a new deleted marker instance. set +e archive_deleted_rows set -e # Verify whether online data migrations run after archiving will succeed. # See for more details: https://bugs.launchpad.net/nova/+bug/1824435 $MANAGE db online_data_migrations",23,17
openstack%2Frequirements~master~Ie50dcbdf8f35d96173e314e01dab7c6dadc24196,openstack/requirements,master,Ie50dcbdf8f35d96173e314e01dab7c6dadc24196,Updated from generate-constraints,MERGED,2021-11-02 02:30:45.000000000,2021-11-02 05:32:49.000000000,2021-11-02 05:31:29.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-02 02:30:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/550fc4c1b3e4a9d49aaf9694740dca0f7cee5941', 'message': 'Updated from generate-constraints\n\nChange-Id: Ie50dcbdf8f35d96173e314e01dab7c6dadc24196\n'}, {'number': 2, 'created': '2021-11-02 02:49:18.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/3b370bb6e8c56c2fccbac61785323b3d5c90ee36', 'message': 'Updated from generate-constraints\n\nChange-Id: Ie50dcbdf8f35d96173e314e01dab7c6dadc24196\nSigned-off-by: Matthew Thode <mthode@mthode.org>\n'}]",0,816261,3b370bb6e8c56c2fccbac61785323b3d5c90ee36,10,2,2,11131,,,0,"Updated from generate-constraints

Change-Id: Ie50dcbdf8f35d96173e314e01dab7c6dadc24196
Signed-off-by: Matthew Thode <mthode@mthode.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/61/816261/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,550fc4c1b3e4a9d49aaf9694740dca0f7cee5941,openstack/requirements/constraints/noclob,oslo.concurrency===4.5.0XStatic-Angular===1.8.2.1prettytable===2.3.0google-auth===2.3.3pkg_resources===0.0.0libvirt-python===7.9.0boto3===1.19.8botocore===1.22.8Django===3.2.9oslo.policy===3.10.0fasteners===0.16.3virtualenv===20.10.0,oslo.concurrency===4.4.1XStatic-Angular===1.5.8.0prettytable===2.2.1google-auth===2.3.2libvirt-python===7.8.0boto3===1.19.7botocore===1.22.7Django===2.2.24oslo.policy===3.9.0fasteners===0.14.1virtualenv===20.9.0setuptools===58.3.0,12,12
openstack%2Fpuppet-keystone~master~Idcef0958d6e68f94ce1690503456dbb1e86feac2,openstack/puppet-keystone,master,Idcef0958d6e68f94ce1690503456dbb1e86feac2,Fix unit test failure with recent puppetlabs-inifile,MERGED,2021-11-01 06:13:45.000000000,2021-11-02 03:44:10.000000000,2021-11-02 03:44:10.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 06:13:45.000000000', 'files': ['spec/unit/provider/keystone_domain_config/openstack_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/37f61f10e41213f9d54d0bb883785261c4acaf4c', 'message': 'Fix unit test failure with recent puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Idcef0958d6e68f94ce1690503456dbb1e86feac2\n'}]",1,816121,37f61f10e41213f9d54d0bb883785261c4acaf4c,11,3,1,9816,,,0,"Fix unit test failure with recent puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Idcef0958d6e68f94ce1690503456dbb1e86feac2
",git fetch https://review.opendev.org/openstack/puppet-keystone refs/changes/21/816121/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/unit/provider/keystone_domain_config/openstack_spec.rb'],1,37f61f10e41213f9d54d0bb883785261c4acaf4c,puppetlabs-inifile, .to eq('[dude] .to eq('[dude] .to eq('[duck], .to eq(' [dude] .to eq(' [dude] .to eq(' [duck],3,6
openstack%2Fneutron~master~Id5afad7af74d69f8b4159163d23807a1cf032733,openstack/neutron,master,Id5afad7af74d69f8b4159163d23807a1cf032733,[DVR] Set arp entries only for IPs from the correct subnet,MERGED,2021-07-23 15:09:44.000000000,2021-11-02 03:27:17.000000000,2021-11-02 03:24:50.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 9531}, {'_account_id': 9845}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-23 15:09:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/238ca17ae2797bfaea6a098ec7edd9a4e6a9dc03', 'message': ""[DVR] Set arp entries only for IPs from the correct subnet\n\nWhen dvr router is processing internal ports it is checking all\nports connected to the subnet and adding permanent arp entries for\nall fixed IPs and allowed address pairs from those ports in the qrouter\nnamespace.\nBut port can have fixed IPs from different subnets, e.g. from IPv4 and\nIPv6 subnet and until now Neutron wasn't checking subnet_id of the\nfixed_ip address nor ip version of the allowed address pair's IP\naddress. That resulted in adding arp entries for all IPs through all\ninterfaces, e.g. IPv4 address was added as it's reachable through\ninterface connected to the IPv6 subnet.\n\nThis patch adds checking of the subnet_id for fixed_ips and ip version\nfor the allowed address pairs configured on the port to avoid that\nproblem.\n\nCloses-Bug: #1936980\nChange-Id: Id5afad7af74d69f8b4159163d23807a1cf032733\n""}, {'number': 2, 'created': '2021-09-16 07:55:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/501579fdd06c5839664a719d5b33aff65f262b14', 'message': ""[DVR] Set arp entries only for IPs from the correct subnet\n\nWhen dvr router is processing internal ports it is checking all\nports connected to the subnet and adding permanent arp entries for\nall fixed IPs and allowed address pairs from those ports in the qrouter\nnamespace.\nBut port can have fixed IPs from different subnets, e.g. from IPv4 and\nIPv6 subnet and until now Neutron wasn't checking subnet_id of the\nfixed_ip address nor ip version of the allowed address pair's IP\naddress. That resulted in adding arp entries for all IPs through all\ninterfaces, e.g. IPv4 address was added as it's reachable through\ninterface connected to the IPv6 subnet.\n\nThis patch adds checking of the subnet_id for fixed_ips and ip version\nfor the allowed address pairs configured on the port to avoid that\nproblem.\n\nCloses-Bug: #1936980\nChange-Id: Id5afad7af74d69f8b4159163d23807a1cf032733\n""}, {'number': 3, 'created': '2021-09-21 06:16:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/930c28cbe0dfe1cbfb4200b3118f54c54f124a98', 'message': ""[DVR] Set arp entries only for IPs from the correct subnet\n\nWhen dvr router is processing internal ports it is checking all\nports connected to the subnet and adding permanent arp entries for\nall fixed IPs and allowed address pairs from those ports in the qrouter\nnamespace.\nBut port can have fixed IPs from different subnets, e.g. from IPv4 and\nIPv6 subnet and until now Neutron wasn't checking subnet_id of the\nfixed_ip address nor ip version of the allowed address pair's IP\naddress. That resulted in adding arp entries for all IPs through all\ninterfaces, e.g. IPv4 address was added as it's reachable through\ninterface connected to the IPv6 subnet.\n\nThis patch adds checking of the subnet_id for fixed_ips and ip version\nfor the allowed address pairs configured on the port to avoid that\nproblem.\n\nCloses-Bug: #1936980\nChange-Id: Id5afad7af74d69f8b4159163d23807a1cf032733\n""}, {'number': 4, 'created': '2021-09-24 09:51:30.000000000', 'files': ['neutron/tests/functional/agent/l3/test_dvr_router.py', 'neutron/agent/l3/dvr_local_router.py', 'neutron/tests/unit/agent/l3/test_agent.py', 'neutron/agent/l3/dvr_edge_ha_router.py', 'neutron/tests/unit/agent/l3/test_dvr_local_router.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/771fdc0b0716cbbbe41db3835def3eb9b423c66a', 'message': ""[DVR] Set arp entries only for IPs from the correct subnet\n\nWhen dvr router is processing internal ports it is checking all\nports connected to the subnet and adding permanent arp entries for\nall fixed IPs and allowed address pairs from those ports in the qrouter\nnamespace.\nBut port can have fixed IPs from different subnets, e.g. from IPv4 and\nIPv6 subnet and until now Neutron wasn't checking subnet_id of the\nfixed_ip address nor ip version of the allowed address pair's IP\naddress. That resulted in adding arp entries for all IPs through all\ninterfaces, e.g. IPv4 address was added as it's reachable through\ninterface connected to the IPv6 subnet.\n\nThis patch adds checking of the subnet_id for fixed_ips and ip version\nfor the allowed address pairs configured on the port to avoid that\nproblem.\n\nCloses-Bug: #1936980\nChange-Id: Id5afad7af74d69f8b4159163d23807a1cf032733\n""}]",8,802037,771fdc0b0716cbbbe41db3835def3eb9b423c66a,147,6,4,11975,,,0,"[DVR] Set arp entries only for IPs from the correct subnet

When dvr router is processing internal ports it is checking all
ports connected to the subnet and adding permanent arp entries for
all fixed IPs and allowed address pairs from those ports in the qrouter
namespace.
But port can have fixed IPs from different subnets, e.g. from IPv4 and
IPv6 subnet and until now Neutron wasn't checking subnet_id of the
fixed_ip address nor ip version of the allowed address pair's IP
address. That resulted in adding arp entries for all IPs through all
interfaces, e.g. IPv4 address was added as it's reachable through
interface connected to the IPv6 subnet.

This patch adds checking of the subnet_id for fixed_ips and ip version
for the allowed address pairs configured on the port to avoid that
problem.

Closes-Bug: #1936980
Change-Id: Id5afad7af74d69f8b4159163d23807a1cf032733
",git fetch https://review.opendev.org/openstack/neutron refs/changes/37/802037/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/functional/agent/l3/test_dvr_router.py', 'neutron/agent/l3/dvr_local_router.py', 'neutron/tests/unit/agent/l3/test_agent.py', 'neutron/agent/l3/dvr_edge_ha_router.py', 'neutron/tests/unit/agent/l3/test_dvr_local_router.py']",5,238ca17ae2797bfaea6a098ec7edd9a4e6a9dc03,bug/1936980," subnet = { 'id': subnet_id, 'cidr': '1.2.3.0/24' } 'fixed_ips': [ {'subnet_id': subnet_id, 'ip_address': '1.2.3.10'}, {'subnet_id': _uuid(), 'ip_address': '2001:db8::1'} ] }] ri._set_subnet_arp_info(subnet) ri._set_subnet_arp_info(subnet)"," 'fixed_ips': [{'subnet_id': subnet_id, 'ip_address': '1.2.3.10'}]}] ri._set_subnet_arp_info(subnet_id) ri._set_subnet_arp_info(subnet_id)",44,26
openstack%2Fpuppet-openstack-integration~master~Id8b61fc283d0bc299f5d3899a200701777223613,openstack/puppet-openstack-integration,master,Id8b61fc283d0bc299f5d3899a200701777223613,Unpin puppetlabs-inifile,MERGED,2021-11-01 05:01:29.000000000,2021-11-02 02:27:31.000000000,2021-11-02 02:27:31.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 05:01:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/1bec7bf6b51218819789d9e022662e5cfb434b5f', 'message': 'WIP: Unpin puppetlabs-inifile\n\nChange-Id: Id8b61fc283d0bc299f5d3899a200701777223613\n'}, {'number': 2, 'created': '2021-11-01 06:13:13.000000000', 'files': ['Puppetfile', 'external_modules.txt'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/ac7ad1d81001a67f83bc9addf0d883d6ad212a2e', 'message': 'Unpin puppetlabs-inifile\n\n... instead of pinning it to the very old version.\n\nChange-Id: Id8b61fc283d0bc299f5d3899a200701777223613\n'}]",1,816117,ac7ad1d81001a67f83bc9addf0d883d6ad212a2e,13,3,2,9816,,,0,"Unpin puppetlabs-inifile

... instead of pinning it to the very old version.

Change-Id: Id8b61fc283d0bc299f5d3899a200701777223613
",git fetch https://review.opendev.org/openstack/puppet-openstack-integration refs/changes/17/816117/1 && git format-patch -1 --stdout FETCH_HEAD,"['Puppetfile', 'external_modules.txt']",2,1bec7bf6b51218819789d9e022662e5cfb434b5f,puppetlabs-inifile,puppetlabs/puppetlabs-inifile,"puppetlabs/puppetlabs-inifile,2.2.0",2,2
openstack%2Fopenstack-helm-infra~master~I4887959d4fdb99c56d42a973aa219968b3316158,openstack/openstack-helm-infra,master,I4887959d4fdb99c56d42a973aa219968b3316158,WIP - Lint osh charts alongside osh-infra,ABANDONED,2021-11-01 21:49:05.000000000,2021-11-01 23:29:08.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-01 21:49:05.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/893521bba0530477feabfbe0c5460e8c7b52e088', 'message': 'WIP - Lint osh charts alongside osh-infra\n\nChange-Id: I4887959d4fdb99c56d42a973aa219968b3316158\n'}]",0,816214,893521bba0530477feabfbe0c5460e8c7b52e088,3,1,1,21420,,,0,"WIP - Lint osh charts alongside osh-infra

Change-Id: I4887959d4fdb99c56d42a973aa219968b3316158
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/14/816214/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,893521bba0530477feabfbe0c5460e8c7b52e088,, - openstack/openstack-helm,,1,0
openstack%2Fopenstack-helm-infra~master~I11036789de45c0f8f66b51e15f2cc253e6cb230c,openstack/openstack-helm-infra,master,I11036789de45c0f8f66b51e15f2cc253e6cb230c,[ceph-osd] Update log-runner container for MAC,MERGED,2021-10-26 18:51:08.000000000,2021-11-01 23:26:17.000000000,2021-11-01 23:24:50.000000000,"[{'_account_id': 8898}, {'_account_id': 21420}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 18:51:08.000000000', 'files': ['ceph-osd/templates/daemonset-osd.yaml', 'ceph-osd/Chart.yaml', 'ceph-osd/values_overrides/apparmor.yaml', 'releasenotes/notes/ceph-osd.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/cc793f21443b2676e14c7c22377170e2e6926306', 'message': '[ceph-osd] Update log-runner container for MAC\n\nThe log-runner previously was not included in the mandatory access\ncontrol (MAC) annotation for the OSD pods, which means it could not\nhave any AppArmor profile applied to it. This patchset adds that\ncapability for that container.\n\nChange-Id: I11036789de45c0f8f66b51e15f2cc253e6cb230c\n'}]",2,815541,cc793f21443b2676e14c7c22377170e2e6926306,14,3,1,22636,,,0,"[ceph-osd] Update log-runner container for MAC

The log-runner previously was not included in the mandatory access
control (MAC) annotation for the OSD pods, which means it could not
have any AppArmor profile applied to it. This patchset adds that
capability for that container.

Change-Id: I11036789de45c0f8f66b51e15f2cc253e6cb230c
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/41/815541/1 && git format-patch -1 --stdout FETCH_HEAD,"['ceph-osd/templates/daemonset-osd.yaml', 'ceph-osd/Chart.yaml', 'ceph-osd/values_overrides/apparmor.yaml', 'releasenotes/notes/ceph-osd.yaml']",4,cc793f21443b2676e14c7c22377170e2e6926306,, - 0.1.33 Update log-runner container for MAC,,4,2
openstack%2Fnova~master~Ib0ec1522c279d78c5dbe07fc7d64d517bda5f584,openstack/nova,master,Ib0ec1522c279d78c5dbe07fc7d64d517bda5f584,Check if the InstanceNUMACell.pcpuset attribute exist prior to relying on it. This change enables support for the VM instances with pinned CPUs (hw:cpu_policy=dedicated) that were created before upgrading the OpenStack Nova to Victoria release.,NEW,2021-10-29 00:06:24.000000000,2021-11-01 23:25:20.000000000,,"[{'_account_id': 8864}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-29 00:06:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/11188f3658200850c5e2e30a31a3f244ad7770fa', 'message': 'Check if the InstanceNUMACell.pcpuset attribute exist\nprior to relying on it. This change enables support for\nthe VM instances with with pinned CPUs (hw:cpu_policy=dedicated)\nthat were created before upgrading the OpenStack Nova to\nVictoria release.\n\nCloses-Bug: 1944947\nChange-Id: Ib0ec1522c279d78c5dbe07fc7d64d517bda5f584\n'}, {'number': 2, 'created': '2021-11-01 08:56:35.000000000', 'files': ['nova/objects/instance_numa.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3c2a32b5eec3727fc44f19f3895b1ea99c74c4e6', 'message': 'Check if the InstanceNUMACell.pcpuset attribute exist\nprior to relying on it. This change enables support for\nthe VM instances with pinned CPUs (hw:cpu_policy=dedicated)\nthat were created before upgrading the OpenStack Nova to\nVictoria release.\n\nCloses-Bug: 1944947\nChange-Id: Ib0ec1522c279d78c5dbe07fc7d64d517bda5f584\n'}]",2,815923,3c2a32b5eec3727fc44f19f3895b1ea99c74c4e6,28,2,2,21382,,,0,"Check if the InstanceNUMACell.pcpuset attribute exist
prior to relying on it. This change enables support for
the VM instances with pinned CPUs (hw:cpu_policy=dedicated)
that were created before upgrading the OpenStack Nova to
Victoria release.

Closes-Bug: 1944947
Change-Id: Ib0ec1522c279d78c5dbe07fc7d64d517bda5f584
",git fetch https://review.opendev.org/openstack/nova refs/changes/23/815923/2 && git format-patch -1 --stdout FETCH_HEAD,['nova/objects/instance_numa.py'],1,11188f3658200850c5e2e30a31a3f244ad7770fa,bug/1944947, pcpuset = None try: pcpuset = self.pcpuset except NotImplementedError: pass if pcpuset: return pcpuset else: return self.cpuset, return self.cpuset | self.pcpuset,9,1
openstack%2Fnova~master~I58869d2a5a4ed988fc786a6f1824be441dd48484,openstack/nova,master,I58869d2a5a4ed988fc786a6f1824be441dd48484,[nova-manage]support extended resource request,MERGED,2021-07-23 16:48:03.000000000,2021-11-01 23:00:50.000000000,2021-11-01 22:58:03.000000000,"[{'_account_id': 4690}, {'_account_id': 9708}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-23 16:48:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/af60792b47a25f6d72e3d981e770e71e78823fbe', 'message': 'WIP support extended res req in heal port allocation\n\nTODO:\n* fix the TODOs inline\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 2, 'created': '2021-07-23 17:32:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a355650977a919bdc500429e4e2dd6b6300d1d27', 'message': 'WIP support extended res req in heal port allocation\n\nTODO:\n* fix the TODOs inline\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 3, 'created': '2021-08-03 12:12:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ad81eebf6c65054f950e3e28dabaaaca44d57051', 'message': 'WIP support extended res req in heal port allocation\n\nTODO:\n* fix the TODOs inline\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 4, 'created': '2021-08-03 14:49:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/63fd00716abffd2a45f618aced9462e4fc287282', 'message': 'WIP support extended res req in heal port allocation\n\nTODO:\n* fix the TODOs inline\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 5, 'created': '2021-08-03 17:56:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3eff1b661b9a3b93a869f84881cb18d0bbbf5479', 'message': 'WIP support extended res req in heal port allocation\n\nTODO:\n* fix the TODOs inline\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 6, 'created': '2021-08-04 16:54:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2191f86ed91b070e1092cdfdd86879c1e3de1cd2', 'message': 'WIP support extended res req in heal port allocation\n\nTODO:\n* fix the TODOs inline\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 7, 'created': '2021-08-06 12:58:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/336d76cedc86e17d4c2fcecec1fc3448ad9c7d74', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nTODO:\n* add test with ports having more than one request groups\n* docs\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 8, 'created': '2021-08-16 17:46:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f94064df183e0102b193a7fb573dfff540680e57', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nTODO:\n* add test with ports having more than one request groups\n* docs\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 9, 'created': '2021-08-16 19:30:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d114961a6dd2ea719c1b76e71992ec873b0bc014', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nTODO:\n* add test with ports having more than one request groups\n* docs\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 10, 'created': '2021-08-18 15:36:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c70b624a83ca4a84c120bb3bf3533c72644f2114', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 11, 'created': '2021-08-21 12:59:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f9a8449b932963530aad553147f90c9dd9b9ceb9', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 12, 'created': '2021-08-22 10:31:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/431be3d4fb9667b33dbb8424b97eacfffa90fea3', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 13, 'created': '2021-08-27 16:18:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/23619f887ab48948b6031d1319e58cd5db0736dc', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 14, 'created': '2021-08-31 14:13:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/18eb0210ffa2a476ac8f884c06450b2ce23ee7c4', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 15, 'created': '2021-09-01 08:31:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4c33f0782dd06554fcd02d42bfb9706ffd8ac0a5', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 16, 'created': '2021-09-01 13:56:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2dd9a3af38a553026ba9d20617ac9cdcfbadfb3b', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 17, 'created': '2021-10-20 09:48:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/722c026f4f6461892bfc48a5e4c2c1345ee12bd2', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 18, 'created': '2021-10-29 10:20:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f8dc8b630c28b4df56a8267c1b7c4b8b3848eaed', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}, {'number': 19, 'created': '2021-11-01 08:22:20.000000000', 'files': ['nova/tests/functional/test_nova_manage.py', 'nova/exception.py', 'nova/tests/unit/cmd/test_manage.py', 'doc/source/cli/nova-manage.rst', 'nova/cmd/manage.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/90ed7e574d06a241297b859354237350cc6eb82a', 'message': '[nova-manage]support extended resource request\n\nThe nova-manage placement heal_allocations CLI is capable of healing\nmissing placement allocations due to port resource requests. To support\nthe new extended port resource request this code needs to be adapted\ntoo.\n\nWhen the heal_allocation command got the port resource request\nsupport in train, the only way to figure out the missing allocations was\nto dig into the placement RP tree directly. Since then nova gained\nsupport for interface attach with such ports and to support that\nplacement gained support for in_tree filtering in allocation candidate\nqueries. So now the healing logic can be generalized to following:\n\nFor a given instance\n1) Find the ports that has resource request but no allocation key in the\n   binding profile. These are the ports we need to heal\n2) Gather the RequestGroups from the these ports and run an\n   allocation_candidates query restricted to the current compute of the\n   instance with in_tree filtering.\n3) Extend the existing instance allocation with a returned allocation\n   candidate and update the instance allocation in placement.\n4) Update the binding profile of these ports in neutron\n\nThe main change compared to the existing implementation is in step 2)\nthe rest mostly the same.\n\nNote that support for old resource request format is kept alongside of\nthe new resource request format until Neutron makes the new format\nmandatory.\n\nblueprint: qos-minimum-guaranteed-packet-rate\n\nChange-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484\n'}]",24,802060,90ed7e574d06a241297b859354237350cc6eb82a,131,4,19,9708,,,0,"[nova-manage]support extended resource request

The nova-manage placement heal_allocations CLI is capable of healing
missing placement allocations due to port resource requests. To support
the new extended port resource request this code needs to be adapted
too.

When the heal_allocation command got the port resource request
support in train, the only way to figure out the missing allocations was
to dig into the placement RP tree directly. Since then nova gained
support for interface attach with such ports and to support that
placement gained support for in_tree filtering in allocation candidate
queries. So now the healing logic can be generalized to following:

For a given instance
1) Find the ports that has resource request but no allocation key in the
   binding profile. These are the ports we need to heal
2) Gather the RequestGroups from the these ports and run an
   allocation_candidates query restricted to the current compute of the
   instance with in_tree filtering.
3) Extend the existing instance allocation with a returned allocation
   candidate and update the instance allocation in placement.
4) Update the binding profile of these ports in neutron

The main change compared to the existing implementation is in step 2)
the rest mostly the same.

Note that support for old resource request format is kept alongside of
the new resource request format until Neutron makes the new format
mandatory.

blueprint: qos-minimum-guaranteed-packet-rate

Change-Id: I58869d2a5a4ed988fc786a6f1824be441dd48484
",git fetch https://review.opendev.org/openstack/nova refs/changes/60/802060/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/cmd/manage.py'],1,af60792b47a25f6d72e3d981e770e71e78823fbe,bp/qos-minimum-guaranteed-packet-rate, # TODO(gibi): this needs to be adapted to the new resource_request # format # TODO(gibi): this needs to be adapted to the new resource_request # format # TODO(gibi): this needs to be adapted to the new # resource_request format # TODO(gibi): this needs to be adapted to the new # resource_request format,,8,0
openstack%2Fopenstack-helm-infra~master~I24544015816d57d86c1e69f44b90b6b0271e76a4,openstack/openstack-helm-infra,master,I24544015816d57d86c1e69f44b90b6b0271e76a4,Set Security Context to ks-user job,MERGED,2021-10-28 16:27:03.000000000,2021-11-01 22:34:10.000000000,2021-11-01 17:40:57.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 30690}]","[{'number': 1, 'created': '2021-10-28 16:27:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ae1f4071d2a66acc6c88320314a108a3491a9912', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}, {'number': 2, 'created': '2021-10-28 22:15:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/35291d10f0dd56de92d75259a9858e2a4d35cdf4', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}, {'number': 3, 'created': '2021-10-29 17:21:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/eb0f9fa02a5aae669d732692c4b101b611dd72f5', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}, {'number': 4, 'created': '2021-10-29 17:51:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e4f24ddddbd2f00fdff98682efe01c99434eab05', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}, {'number': 5, 'created': '2021-10-29 19:02:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/124da90a7039baefd2c7b4c9b82790097bae5e75', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}, {'number': 6, 'created': '2021-10-29 21:16:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ab133528fbfb6cf3ff5050cee6cc712d835cf91b', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}, {'number': 7, 'created': '2021-10-29 22:22:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/41e311b37afbe7896d6f3acdb26182082d350355', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}, {'number': 8, 'created': '2021-11-01 01:59:33.000000000', 'files': ['helm-toolkit/Chart.yaml', 'releasenotes/notes/helm-toolkit.yaml', 'helm-toolkit/templates/manifests/_job-ks-user.yaml.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5407b547bbb08397e41cceec4cf88d7ae9cbf9fc', 'message': 'Set Security Context to ks-user job\n\nWe need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.\n\nChange-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4\n'}]",13,815865,5407b547bbb08397e41cceec4cf88d7ae9cbf9fc,40,6,8,29982,,,0,"Set Security Context to ks-user job

We need flexibility to add securityContext to ks-user job , so that it can be executed without elevated privileges.

Change-Id: I24544015816d57d86c1e69f44b90b6b0271e76a4
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/65/815865/6 && git format-patch -1 --stdout FETCH_HEAD,"['helm-toolkit/Chart.yaml', 'releasenotes/notes/helm-toolkit.yaml', 'helm-toolkit/templates/manifests/_job-ks-user.yaml.tpl']",3,ae1f4071d2a66acc6c88320314a108a3491a9912,,"{{- if hasKey $envAll.Values ""pod"" -}} {{- if hasKey $envAll.Values.pod ""security_context"" -}} {{- range $service, $value := $envAll.Values.pod.security_context }} {{- if (($value).pod) }} {{ dict ""envAll"" $envAll ""application"" $service | include ""helm-toolkit.snippets.kubernetes_pod_security_context"" | indent 6 }} {{- end }} {{- end }} {{- end }} {{- end }}",,11,1
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I9729beac4c4e84d2619c4c629cd26eba8a26b87d,openstack/tripleo-heat-templates,stable/wallaby,I9729beac4c4e84d2619c4c629cd26eba8a26b87d,Add parameter IronicPowerStateChangeTimeout,MERGED,2021-10-28 08:34:31.000000000,2021-11-01 21:59:08.000000000,2021-11-01 21:57:48.000000000,"[{'_account_id': 4571}, {'_account_id': 8833}, {'_account_id': 9816}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 08:34:31.000000000', 'files': ['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bb6ca08e494d5829630f1656be3f9be85e3f1324', 'message': 'Add parameter IronicPowerStateChangeTimeout\n\nA heat parameter ``IronicPowerStateChangeTimeout`` has been added\nwhich sets the number of seconds to wait for power operations to\ncomplete, i.e., so that a baremetal node is in the desired power\nstate. If timed out, the power operation is considered a failure. The\ndefault is 60 seconds, which is the same as the current Ironic\ndefault.\n\nThis could be backported to stable/train, where the ironic default of\n30s is causing failures in CI jobs.\n\nRelated-Bug: #1947403\nChange-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d\n(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)\n'}]",1,815798,bb6ca08e494d5829630f1656be3f9be85e3f1324,14,5,1,24245,,,0,"Add parameter IronicPowerStateChangeTimeout

A heat parameter ``IronicPowerStateChangeTimeout`` has been added
which sets the number of seconds to wait for power operations to
complete, i.e., so that a baremetal node is in the desired power
state. If timed out, the power operation is considered a failure. The
default is 60 seconds, which is the same as the current Ironic
default.

This could be backported to stable/train, where the ironic default of
30s is causing failures in CI jobs.

Related-Bug: #1947403
Change-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d
(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/98/815798/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml']",2,bb6ca08e494d5829630f1656be3f9be85e3f1324,bug/1947403-stable/wallaby,"--- features: - | A heat parameter ``IronicPowerStateChangeTimeout`` has been added which sets the number of seconds to wait for power operations to complete, i.e., so that a baremetal node is in the desired power state. If timed out, the power operation is considered a failure. The default is 60 seconds, which is the same as the current Ironic default. ",,16,1
openstack%2Fcharm-ceph-dashboard~master~I2665ec0f7a7b2b7059899a5a937728c892593daf,openstack/charm-ceph-dashboard,master,I2665ec0f7a7b2b7059899a5a937728c892593daf,Fix exception when chain is missing,MERGED,2021-10-26 13:05:47.000000000,2021-11-01 21:57:25.000000000,2021-11-01 21:57:25.000000000,"[{'_account_id': 8992}, {'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 13:05:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/92b8cf0ac68d1dd6908cd582dae71533bce2ecd1', 'message': 'Fix exception when chain is missing\n\nHandle the situation where a chain file has not been passed along\nthe certificates relation.\n\nCo-Authored-By: Billy Olsen <billy.olsen@canonical.com>\nCloses-Bug: #1948809\nChange-Id: I2665ec0f7a7b2b7059899a5a937728c892593daf\n'}, {'number': 2, 'created': '2021-10-27 15:08:42.000000000', 'files': ['src/charm.py'], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/0824bfdb5b9f315398547adfc866176d12697d4d', 'message': 'Fix exception when chain is missing\n\nHandle the situation where a chain file has not been passed along\nthe certificates relation.\n\nCo-Authored-By: Billy Olsen <billy.olsen@canonical.com>\nCloses-Bug: #1948809\nChange-Id: I2665ec0f7a7b2b7059899a5a937728c892593daf\n'}]",1,815496,0824bfdb5b9f315398547adfc866176d12697d4d,11,4,2,12549,,,0,"Fix exception when chain is missing

Handle the situation where a chain file has not been passed along
the certificates relation.

Co-Authored-By: Billy Olsen <billy.olsen@canonical.com>
Closes-Bug: #1948809
Change-Id: I2665ec0f7a7b2b7059899a5a937728c892593daf
",git fetch https://review.opendev.org/openstack/charm-ceph-dashboard refs/changes/96/815496/2 && git format-patch -1 --stdout FETCH_HEAD,['src/charm.py'],1,92b8cf0ac68d1dd6908cd582dae71533bce2ecd1,bug/1948809," try: root_ca_chain = self.ca_client.root_ca_chain.public_bytes( encoding=serialization.Encoding.PEM ) except ca_client.CAClientError: # A root ca chain is not always available. If configured to just # use vault with self-signed certificates, you will not get a ca # chain. Instead, you will get a CAClientError being raised. For # now, use a bytes() object for the root_ca_chain as it shouldn't # cause problems and if a ca_cert_chain comes later, then it will # get updated. root_ca_chain = bytes() root_ca_chain)", self.ca_client.root_ca_chain.public_bytes( encoding=serialization.Encoding.PEM)),13,2
openstack%2Frequirements~master~I3eeab01ccb758cf4eeebcb5da8bf0aea1ff77a88,openstack/requirements,master,I3eeab01ccb758cf4eeebcb5da8bf0aea1ff77a88,Do not fix certifi version,MERGED,2021-10-25 11:18:00.000000000,2021-11-01 21:56:08.000000000,2021-11-01 21:54:46.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-25 11:18:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/5c77dcb770da8798536785b7006fd28da76cd9f9', 'message': ""Do not fix certifi version\n\nIt's not safe to constraint certifi since we need to use latest\nCA certificates anytime and not force deployments to use outdated CA\nfiles.\n\nThis is inspured with latest Let's Encrypt Root CA rotation, since older\ndeployments can't reach even opendev because of outdated certifi.\n\nChange-Id: I3eeab01ccb758cf4eeebcb5da8bf0aea1ff77a88\n""}, {'number': 2, 'created': '2021-10-26 09:50:47.000000000', 'files': ['blacklist.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/a420f293d6d917bf0ec5f8d885ecbdea5b5ca5b5', 'message': ""Do not fix certifi version\n\nIt's not safe to constraint certifi since we need to use latest\nCA certificates anytime and not force deployments to use outdated CA\nfiles.\n\nThis is inspured with latest Let's Encrypt Root CA rotation, since older\ndeployments can't reach even opendev because of outdated certifi.\n\nChange-Id: I3eeab01ccb758cf4eeebcb5da8bf0aea1ff77a88\n""}]",1,815281,a420f293d6d917bf0ec5f8d885ecbdea5b5ca5b5,15,2,2,28619,,,0,"Do not fix certifi version

It's not safe to constraint certifi since we need to use latest
CA certificates anytime and not force deployments to use outdated CA
files.

This is inspured with latest Let's Encrypt Root CA rotation, since older
deployments can't reach even opendev because of outdated certifi.

Change-Id: I3eeab01ccb758cf4eeebcb5da8bf0aea1ff77a88
",git fetch https://review.opendev.org/openstack/requirements refs/changes/81/815281/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,5c77dcb770da8798536785b7006fd28da76cd9f9,,,certifi===2021.10.8,0,1
openstack%2Fpython-tripleoclient~stable%2Fvictoria~I404391c0c755681831c33ec7bc752b5d7878ed85,openstack/python-tripleoclient,stable/victoria,I404391c0c755681831c33ec7bc752b5d7878ed85,Use real tmpdir for ansible runner tests,MERGED,2021-10-08 14:03:57.000000000,2021-11-01 21:45:38.000000000,2021-11-01 21:44:17.000000000,"[{'_account_id': 10969}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-08 14:03:57.000000000', 'files': ['tripleoclient/tests/test_utils.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/b2c40c3e9e26ec6bb26cca8713e8368caf07b424', 'message': 'Use real tmpdir for ansible runner tests\n\nAdditionally mock os.chmod in case the file does not exist.\n\nChange-Id: I404391c0c755681831c33ec7bc752b5d7878ed85\nCloses-Bug: #1945660\n(cherry picked from commit d5457bfb4ea02e92160f4356b515303c1a861f9c)\n'}]",1,813102,b2c40c3e9e26ec6bb26cca8713e8368caf07b424,13,3,1,14985,,,0,"Use real tmpdir for ansible runner tests

Additionally mock os.chmod in case the file does not exist.

Change-Id: I404391c0c755681831c33ec7bc752b5d7878ed85
Closes-Bug: #1945660
(cherry picked from commit d5457bfb4ea02e92160f4356b515303c1a861f9c)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/02/813102/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/tests/test_utils.py'],1,b2c40c3e9e26ec6bb26cca8713e8368caf07b424,bug/1945660-stable/victoria," utils.constants.DEFAULT_WORK_DIR mock_exists.assert_called_with(os.path.join( utils.constants.DEFAULT_WORK_DIR, 'non-existing.yaml')) @mock.patch('tempfile.mkstemp', return_value=('foo', os.path.join( utils.constants.DEFAULT_WORK_DIR, 'fooBar.cfg'))) utils.constants.DEFAULT_WORK_DIR @mock.patch('tempfile.mkstemp', return_value=('foo', os.path.join( utils.constants.DEFAULT_WORK_DIR, 'fooBar.cfg'))) workdir=utils.constants.DEFAULT_WORK_DIR workdir=utils.constants.DEFAULT_WORK_DIR @mock.patch('tempfile.mkstemp', return_value=('foo', os.path.join( utils.constants.DEFAULT_WORK_DIR, 'fooBar.cfg'))) workdir=utils.constants.DEFAULT_WORK_DIR, @mock.patch('tempfile.mkstemp', return_value=('foo', os.path.join( utils.constants.DEFAULT_WORK_DIR, 'fooBar.cfg'))) workdir=utils.constants.DEFAULT_WORK_DIR, @mock.patch('tempfile.mkstemp', return_value=('foo', os.path.join( utils.constants.DEFAULT_WORK_DIR, 'fooBar.cfg'))) workdir=utils.constants.DEFAULT_WORK_DIR, workdir=utils.constants.DEFAULT_WORK_DIR, self.assertIn(mock.call(os.path.join(utils.constants.DEFAULT_WORK_DIR, 'env/settings'), 'w'), @mock.patch('os.chmod') def test_run_with_extravar_file(self, mock_exists, mock_mkdir, mock_open, mock_chmod): workdir=utils.constants.DEFAULT_WORK_DIR, mock.call(os.path.join(utils.constants.DEFAULT_WORK_DIR, 'env/extravars'), 'w'),"," '/tmp' mock_exists.assert_called_with('/tmp/non-existing.yaml') @mock.patch('tempfile.mkstemp', return_value=('foo', '/tmp/fooBar.cfg')) '/tmp' @mock.patch('tempfile.mkstemp', return_value=('foo', '/tmp/fooBar.cfg')) workdir='/tmp' workdir='/tmp' @mock.patch('tempfile.mkstemp', return_value=('foo', '/tmp/fooBar.cfg')) workdir='/tmp', @mock.patch('tempfile.mkstemp', return_value=('foo', '/tmp/fooBar.cfg')) workdir='/tmp', @mock.patch('tempfile.mkstemp', return_value=('foo', '/tmp/fooBar.cfg')) workdir='/tmp', workdir='/tmp', self.assertIn(mock.call('/tmp/env/settings', 'w'), def test_run_with_extravar_file(self, mock_exists, mock_mkdir, mock_open): workdir='/tmp', mock.call('/tmp/env/extravars', 'w'),",28,18
openstack%2Ftripleo-upgrade~master~Ia47112330d42b3bfd46863e1f593db75b4dfe5b8,openstack/tripleo-upgrade,master,Ia47112330d42b3bfd46863e1f593db75b4dfe5b8,Update master for stable/wallaby,MERGED,2021-10-13 13:38:22.000000000,2021-11-01 21:44:21.000000000,2021-11-01 21:44:21.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-13 13:38:22.000000000', 'files': ['releasenotes/source/wallaby.rst', 'releasenotes/source/index.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/33905d9c6464bfc3a32565d4a489f745da0714e9', 'message': 'Update master for stable/wallaby\n\nAdd file to the reno documentation build to show release notes for\nstable/wallaby.\n\nUse pbr instruction to increment the minor version number\nautomatically so that master versions are higher than the versions on\nstable/wallaby.\n\nSem-Ver: feature\nChange-Id: Ia47112330d42b3bfd46863e1f593db75b4dfe5b8\n'}]",0,813823,33905d9c6464bfc3a32565d4a489f745da0714e9,7,3,1,22816,,,0,"Update master for stable/wallaby

Add file to the reno documentation build to show release notes for
stable/wallaby.

Use pbr instruction to increment the minor version number
automatically so that master versions are higher than the versions on
stable/wallaby.

Sem-Ver: feature
Change-Id: Ia47112330d42b3bfd46863e1f593db75b4dfe5b8
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/23/813823/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/source/wallaby.rst', 'releasenotes/source/index.rst']",2,33905d9c6464bfc3a32565d4a489f745da0714e9,reno-wallaby, wallaby,,7,0
openstack%2Ftripleo-ci~master~If17c78e2a7aa63da60a5995287ed2786bcb9842b,openstack/tripleo-ci,master,If17c78e2a7aa63da60a5995287ed2786bcb9842b,Added CentOS-8/train specific containers.,MERGED,2021-11-01 09:56:21.000000000,2021-11-01 21:44:19.000000000,2021-11-01 21:44:19.000000000,"[{'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30002}, {'_account_id': 31075}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-11-01 09:56:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/fae5d3b937dbd6983b698c672904bea29ff32ece', 'message': 'Added CentOS-7/train specific containers.\n\nThis missing containers causing promotion\nfailures.\n\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\nChange-Id: If17c78e2a7aa63da60a5995287ed2786bcb9842b\n'}, {'number': 2, 'created': '2021-11-01 10:00:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/279c438f8166eaa17d25562a6e880f4bdadbb0cc', 'message': 'Added CentOS-8/train specific containers.\n\nThis missing containers causing promotion\nfailures.\n\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\nChange-Id: If17c78e2a7aa63da60a5995287ed2786bcb9842b\n'}, {'number': 3, 'created': '2021-11-01 13:49:23.000000000', 'files': ['roles/build-containers/vars/main.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/49589335b2df0318a08b8649869bf7c039b92312', 'message': 'Added CentOS-8/train specific containers.\n\nThis missing containers causing promotion\nfailures.\n\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\nChange-Id: If17c78e2a7aa63da60a5995287ed2786bcb9842b\n'}]",6,816155,49589335b2df0318a08b8649869bf7c039b92312,20,8,3,30750,,,0,"Added CentOS-8/train specific containers.

This missing containers causing promotion
failures.

Signed-off-by: Amol Kahat <amolkahat@gmail.com>
Change-Id: If17c78e2a7aa63da60a5995287ed2786bcb9842b
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/55/816155/3 && git format-patch -1 --stdout FETCH_HEAD,['roles/build-containers/vars/main.yaml'],1,fae5d3b937dbd6983b698c672904bea29ff32ece,cleanup-excludelist, - fluentd,,1,0
openstack%2Fpython-tripleoclient~master~If7e8e25aba35ec8a00b2190abee2c6a8784b291e,openstack/python-tripleoclient,master,If7e8e25aba35ec8a00b2190abee2c6a8784b291e,Replace deprecated params in prepare,MERGED,2021-10-29 12:03:36.000000000,2021-11-01 20:40:05.000000000,2021-11-01 20:38:41.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-29 12:03:36.000000000', 'files': ['tripleoclient/v1/overcloud_update.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/61744a6c48a185f6caffed9b667a7e926ba09b29', 'message': 'Replace deprecated params in prepare\n\nUpdate prepare should only run the stack update\nand Download the playbooks required to run the\nupdate. The config_download arg was deprecated\nby:\nhttps://review.opendev.org/c/openstack/python-tripleoclient/+/803610\n\nAs such, we need to use stack_only = True to\nensure the update prepare is only running the\nstack update, and not the entire deployment.\n\nChange-Id: If7e8e25aba35ec8a00b2190abee2c6a8784b291e\n'}]",1,815955,61744a6c48a185f6caffed9b667a7e926ba09b29,10,3,1,30073,,,0,"Replace deprecated params in prepare

Update prepare should only run the stack update
and Download the playbooks required to run the
update. The config_download arg was deprecated
by:
https://review.opendev.org/c/openstack/python-tripleoclient/+/803610

As such, we need to use stack_only = True to
ensure the update prepare is only running the
stack update, and not the entire deployment.

Change-Id: If7e8e25aba35ec8a00b2190abee2c6a8784b291e
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/55/815955/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/overcloud_update.py'],1,61744a6c48a185f6caffed9b667a7e926ba09b29,fix_update_prepare, parsed_args.stack_only = True, parsed_args.config_download = False,1,1
openstack%2Fcharm-ceph-dashboard~stable%2F21.10~I48539cac90252bdcb86d057026a0ae8acb122f6b,openstack/charm-ceph-dashboard,stable/21.10,I48539cac90252bdcb86d057026a0ae8acb122f6b,Update README deployment instructions,MERGED,2021-10-27 10:55:08.000000000,2021-11-01 20:27:16.000000000,2021-11-01 20:27:16.000000000,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 30561}]","[{'number': 1, 'created': '2021-10-27 10:55:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/c8bd601bbd0a6742b3d2ae4431de80f21ef89fa8', 'message': 'Update README deployment instructions\n\nThe stable charm is currently in tech-preview and so is not promulgated\nto the cs:ceph-dashboard.  During the next cycle the charms will move to\ncharmhub (with a different system), so this change is not being done to\nmaster first.  Thus for this stable set, the deployment instructions\nneed to call out cs:~openstack-charmers/ceph-dashboard.\n\nChange-Id: I48539cac90252bdcb86d057026a0ae8acb122f6b\n'}, {'number': 2, 'created': '2021-10-27 10:56:22.000000000', 'files': ['README.md'], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/c937f01a83fd9adfb0b966271d9cd053ef435b3e', 'message': 'Update README deployment instructions\n\nThe stable charm is currently in tech-preview and so is not promulgated\nto the cs:ceph-dashboard.  During the next cycle the charms will move to\ncharmhub (with a different system), so this change is not being done to\nmaster first.  Thus for this stable set, the deployment instructions\nneed to call out cs:~openstack-charmers/ceph-dashboard.\n\nChange-Id: I48539cac90252bdcb86d057026a0ae8acb122f6b\nCloses-Bug: #19448703\n'}]",2,815623,c937f01a83fd9adfb0b966271d9cd053ef435b3e,13,4,2,20870,,,0,"Update README deployment instructions

The stable charm is currently in tech-preview and so is not promulgated
to the cs:ceph-dashboard.  During the next cycle the charms will move to
charmhub (with a different system), so this change is not being done to
master first.  Thus for this stable set, the deployment instructions
need to call out cs:~openstack-charmers/ceph-dashboard.

Change-Id: I48539cac90252bdcb86d057026a0ae8acb122f6b
Closes-Bug: #19448703
",git fetch https://review.opendev.org/openstack/charm-ceph-dashboard refs/changes/23/815623/1 && git format-patch -1 --stdout FETCH_HEAD,['README.md'],1,c8bd601bbd0a6742b3d2ae4431de80f21ef89fa8,bug/19448703, juju deploy cs:~openstack-charmers/ceph-dashboard, juju deploy ceph-dashboard,1,1
openstack%2Fvalidations-libs~master~I8fb16e3456696187d4a9d3820740a7639a96e315,openstack/validations-libs,master,I8fb16e3456696187d4a9d3820740a7639a96e315,Add new CLI sub command to create community validations,MERGED,2021-10-20 21:51:54.000000000,2021-11-01 20:22:16.000000000,2021-11-01 20:20:28.000000000,"[{'_account_id': 15895}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 28223}, {'_account_id': 32926}]","[{'number': 1, 'created': '2021-10-20 21:51:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/7db1cc9c17ddcf4b7b59a42f877b560b61431204', 'message': '[WIP] Add new CLI sub command to create community validations\n\nTo be written...\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 2, 'created': '2021-10-20 21:55:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/c56e8084d325cde47533d2a67770eff8651c9fa4', 'message': '[WIP] Add new CLI sub command to create community validations\n\nTo be written...\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 3, 'created': '2021-10-21 14:10:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/a678708bf30b8bfef12f294b490589ed3fb7019d', 'message': '[WIP] Add new CLI sub command to create community validations\n\nTo be written...\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 4, 'created': '2021-10-25 08:02:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/8b99c10514bf256f37806bc6242511429fc61ba7', 'message': '[WIP] Add new CLI sub command to create community validations\n\nTo be written...\n\nNeed more unittests.\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 5, 'created': '2021-10-25 08:04:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/f8039fed322d9fb18712843e19c7ffb4c4527aa3', 'message': '[WIP] Add new CLI sub command to create community validations\n\nTo be written...\n\nNeed more unittests.\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 6, 'created': '2021-10-26 07:55:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/4a22396469d0b3be74abda39a91d8e7be5eb85af', 'message': '[WIP] Add new CLI sub command to create community validations\n\nTo be written...\n\nNeed more unittests.\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 7, 'created': '2021-10-27 13:35:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/2b2a4a245a2fed4ff28fc51f85313d3bc87b4086', 'message': 'Add new CLI sub command to create community validations\n\nPresently, the operator(s) can only execute the official and supported\nvalidations coming from tripleo-validations and validations-common.\nCommunity validations enable a sysadmin to create and execute\nvalidations unique to their environment.\n\nThis patch introduces the new Command Line Interface sub command to\ncreate a new community validation skeleton. First, this latter will\ncheck if there is an existing role or a playbook either in the community\nvalidations catalog or the official validations catalog.  And it will\ncreate an Ansible role (with ansible-galaxy[1]) and a playbook in the\n~/community-validations directory.\n\nBy default, the community validations feature is enabled but may be\ndisabled by setting [DEFAULT].enable_community_validations to ``False``\nin the validation configuration file.\n\nExample:\n\n[stack@localhost]$ validation init my-new-validation\nValidation config file found: /etc/validation.cfg\nNew role created successfully in /home/stack/community-validations/roles/my_new_validation\nNew playbook created successfully in /home/stack/community-validations/playbooks/my-new-validation.yaml\n\n[1] - https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 8, 'created': '2021-10-28 18:28:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/56e18385313e348e4f3285ca93e479c502b4d44a', 'message': 'Add new CLI sub command to create community validations\n\nPresently, the operator(s) can only execute the official and supported\nvalidations coming from tripleo-validations and validations-common.\nCommunity validations enable a sysadmin to create and execute\nvalidations unique to their environment.\n\nThis patch introduces the new Command Line Interface sub command to\ncreate a new community validation skeleton. First, this latter will\ncheck if there is an existing role or a playbook either in the community\nvalidations catalog or the official validations catalog.  And it will\ncreate an Ansible role (with ansible-galaxy[1]) and a playbook in the\n~/community-validations directory.\n\nBy default, the community validations feature is enabled but may be\ndisabled by setting [DEFAULT].enable_community_validations to ``False``\nin the validation configuration file.\n\nExample:\n\n[stack@localhost]$ validation init my-new-validation\nValidation config file found: /etc/validation.cfg\nNew role created successfully in /home/stack/community-validations/roles/my_new_validation\nNew playbook created successfully in /home/stack/community-validations/playbooks/my-new-validation.yaml\n\nFor a full demo of this new CLI sub command, please take a look at this\nasciinema[2].\n\n[1] - https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html\n[2] - https://asciinema.org/a/445105\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 9, 'created': '2021-10-29 04:44:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/dd6da3dff5fe960e7038256b68fec73516c792f0', 'message': 'Add new CLI sub command to create community validations\n\nPresently, the operator(s) can only execute the official and supported\nvalidations coming from tripleo-validations and validations-common.\nCommunity validations enable a sysadmin to create and execute\nvalidations unique to their environment.\n\nThis patch introduces the new Command Line Interface sub command to\ncreate a new community validation skeleton. First, this latter will\ncheck if there is an existing role or a playbook either in the community\nvalidations catalog or the official validations catalog.  And it will\ncreate an Ansible role (with ansible-galaxy[1]) and a playbook in the\n~/community-validations directory.\n\nBy default, the community validations feature is enabled but may be\ndisabled by setting [DEFAULT].enable_community_validations to ``False``\nin the validation configuration file.\n\nExample:\n\n[stack@localhost]$ validation init my-new-validation\nValidation config file found: /etc/validation.cfg\nNew role created successfully in /home/stack/community-validations/roles/my_new_validation\nNew playbook created successfully in /home/stack/community-validations/playbooks/my-new-validation.yaml\n\nFor a full demo of this new CLI sub command, please take a look at this\nasciinema[2].\n\n[1] - https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html\n[2] - https://asciinema.org/a/445105\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}, {'number': 10, 'created': '2021-10-29 13:40:52.000000000', 'files': ['validations_libs/community/__init__.py', 'validations_libs/tests/community/__init__.py', 'README.rst', 'validations_libs/community/init_validation.py', 'validations_libs/tests/community/test_init_validation.py', 'validation.cfg', 'validations_libs/cli/community.py', 'validations_libs/tests/test_utils.py', 'validations_libs/constants.py', 'validations_libs/tests/cli/test_community.py', 'validations_libs/tests/fakes.py', 'setup.cfg', 'validations_libs/utils.py'], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/1bbf282356dec6a3c32a195d96b7d9924c53e0d1', 'message': 'Add new CLI sub command to create community validations\n\nPresently, the operator(s) can only execute the official and supported\nvalidations coming from tripleo-validations and validations-common.\nCommunity validations enable a sysadmin to create and execute\nvalidations unique to their environment.\n\nThis patch introduces the new Command Line Interface sub command to\ncreate a new community validation skeleton. First, this latter will\ncheck if there is an existing role or a playbook either in the community\nvalidations catalog or the official validations catalog.  And it will\ncreate an Ansible role (with ansible-galaxy[1]) and a playbook in the\n~/community-validations directory.\n\nBy default, the community validations feature is enabled but may be\ndisabled by setting [DEFAULT].enable_community_validations to ``False``\nin the validation configuration file.\n\nExample:\n\n[stack@localhost]$ validation init my-new-validation\nValidation config file found: /etc/validation.cfg\nNew role created successfully in /home/stack/community-validations/roles/my_new_validation\nNew playbook created successfully in /home/stack/community-validations/playbooks/my-new-validation.yaml\n\nFor a full demo of this new CLI sub command, please take a look at this\nasciinema[2].\n\n[1] - https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html\n[2] - https://asciinema.org/a/445105\n\nChange-Id: I8fb16e3456696187d4a9d3820740a7639a96e315\nSigned-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>\n'}]",30,814829,1bbf282356dec6a3c32a195d96b7d9924c53e0d1,39,6,10,11491,,,0,"Add new CLI sub command to create community validations

Presently, the operator(s) can only execute the official and supported
validations coming from tripleo-validations and validations-common.
Community validations enable a sysadmin to create and execute
validations unique to their environment.

This patch introduces the new Command Line Interface sub command to
create a new community validation skeleton. First, this latter will
check if there is an existing role or a playbook either in the community
validations catalog or the official validations catalog.  And it will
create an Ansible role (with ansible-galaxy[1]) and a playbook in the
~/community-validations directory.

By default, the community validations feature is enabled but may be
disabled by setting [DEFAULT].enable_community_validations to ``False``
in the validation configuration file.

Example:

[stack@localhost]$ validation init my-new-validation
Validation config file found: /etc/validation.cfg
New role created successfully in /home/stack/community-validations/roles/my_new_validation
New playbook created successfully in /home/stack/community-validations/playbooks/my-new-validation.yaml

For a full demo of this new CLI sub command, please take a look at this
asciinema[2].

[1] - https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html
[2] - https://asciinema.org/a/445105

Change-Id: I8fb16e3456696187d4a9d3820740a7639a96e315
Signed-off-by: Gael Chamoulaud (Strider) <gchamoul@redhat.com>
",git fetch https://review.opendev.org/openstack/validations-libs refs/changes/29/814829/10 && git format-patch -1 --stdout FETCH_HEAD,"['validations_libs/community/__init__.py', 'validations_libs/tests/community/test_validation.py', 'validations_libs/tests/community/__init__.py', 'README.rst', 'validation.cfg', 'validations_libs/community/validation.py', 'validations_libs/cli/community.py', 'validations_libs/tests/test_utils.py', 'validations_libs/constants.py', 'validations_libs/tests/cli/test_community.py', 'validations_libs/tests/fakes.py', 'setup.cfg', 'validations_libs/utils.py']",13,7db1cc9c17ddcf4b7b59a42f877b560b61431204,community_validations,"import subprocess def run_command_and_log(log, cmd, cwd=None, env=None, retcode_only=True): """"""Run command and log output :param log: Logger instance for logging :type log: `Logger` :param cmd: Command to run in list form :type cmd: ``List`` :param cwd: Current working directory for execution :type cmd: ``String`` :param env: Modified environment for command run :type env: ``List`` :param retcode_only: Returns only retcode instead or proc object :type retcdode_only: ``Boolean`` """""" proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, shell=False, cwd=cwd, env=env) if retcode_only: while True: try: line = proc.stdout.readline() except StopIteration: break if line != b'': if isinstance(line, bytes): line = line.decode('utf-8') log.debug(line.rstrip()) else: break proc.stdout.close() return proc.wait() return proc",import sys,854,1
openstack%2Ftripleo-quickstart~master~Ibe6340017e8c8e1b5e90f783726bc364171a8ff9,openstack/tripleo-quickstart,master,Ibe6340017e8c8e1b5e90f783726bc364171a8ff9,Centos 9 master release file,MERGED,2021-10-29 10:10:55.000000000,2021-11-01 19:50:06.000000000,2021-11-01 19:48:15.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 16312}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-29 10:10:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/2d51f1e9377e77d07ddf86ca1529a0aa1ac04468', 'message': 'Centos 9 master release file\n\nWith this patch, We are adding Centos 9 release file for master\nbranch. Periodic release file was added in [1]\n\nAlso, Add the bool transformation on the whole_disk_images conditional.\n- On ansible the string ""false"" is true. The variable needs to be\ntransform to bool to ensure that the ""false"" is false and not true.\nSame was done for C8 release files in [2] but was missed in c9.\n\n[1] https://review.opendev.org/c/openstack/tripleo-quickstart/+/806910\n[2] https://review.opendev.org/c/openstack/tripleo-quickstart/+/814893\n\nChange-Id: Ibe6340017e8c8e1b5e90f783726bc364171a8ff9\n'}, {'number': 2, 'created': '2021-10-29 12:16:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/c03e745c3d84378266a7c9fb3d9036082b2e79ae', 'message': 'Centos 9 master release file\n\nWith this patch, We are adding Centos 9 release file for master\nbranch. Periodic release file was added in [1]\n\nAlso, Add the bool transformation on the whole_disk_images conditional.\n- On ansible the string ""false"" is true. The variable needs to be\ntransform to bool to ensure that the ""false"" is false and not true.\nSame was done for C8 release files in [2] but was missed in c9.\n\n[1] https://review.opendev.org/c/openstack/tripleo-quickstart/+/806910\n[2] https://review.opendev.org/c/openstack/tripleo-quickstart/+/814893\n\nChange-Id: Ibe6340017e8c8e1b5e90f783726bc364171a8ff9\n'}, {'number': 3, 'created': '2021-11-01 10:32:44.000000000', 'files': ['config/release/tripleo-ci/CentOS-9/promotion-testing-hash-master.yml', 'config/release/tripleo-ci/CentOS-9/master.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/391c75af315d9d6fd3fed0ffc9b5b249e1dba4e4', 'message': 'Centos 9 master release file\n\nWith this patch, We are adding Centos 9 release file for master\nbranch. Periodic release file was added in [1]\n\nAlso, Add the bool transformation on the whole_disk_images conditional.\n- On ansible the string ""false"" is true. The variable needs to be\ntransform to bool to ensure that the ""false"" is false and not true.\nSame was done for C8 release files in [2] but was missed in c9.\n\n[1] https://review.opendev.org/c/openstack/tripleo-quickstart/+/806910\n[2] https://review.opendev.org/c/openstack/tripleo-quickstart/+/814893\n\nChange-Id: Ibe6340017e8c8e1b5e90f783726bc364171a8ff9\n'}]",10,815950,391c75af315d9d6fd3fed0ffc9b5b249e1dba4e4,27,7,3,29775,,,0,"Centos 9 master release file

With this patch, We are adding Centos 9 release file for master
branch. Periodic release file was added in [1]

Also, Add the bool transformation on the whole_disk_images conditional.
- On ansible the string ""false"" is true. The variable needs to be
transform to bool to ensure that the ""false"" is false and not true.
Same was done for C8 release files in [2] but was missed in c9.

[1] https://review.opendev.org/c/openstack/tripleo-quickstart/+/806910
[2] https://review.opendev.org/c/openstack/tripleo-quickstart/+/814893

Change-Id: Ibe6340017e8c8e1b5e90f783726bc364171a8ff9
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/50/815950/1 && git format-patch -1 --stdout FETCH_HEAD,"['config/release/tripleo-ci/CentOS-9/master.yml', 'config/release/tripleo-ci/CentOS-9/promotion-testing-hash-master.yml']",2,2d51f1e9377e77d07ddf86ca1529a0aa1ac04468,cs9, {% if whole_disk_images|bool -%} {% if whole_disk_images|bool -%}# TODO: Add ceph and opstools repos once available , {% if whole_disk_images -%} {% if whole_disk_images -%},214,2
openstack%2Ftripleo-ansible~master~I8876e0f6af39b82637eeabaa145efb3681b5940b,openstack/tripleo-ansible,master,I8876e0f6af39b82637eeabaa145efb3681b5940b,Rename testinfra to pytest-testinfra,MERGED,2021-10-13 06:46:53.000000000,2021-11-01 19:49:52.000000000,2021-11-01 19:47:56.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-13 06:46:53.000000000', 'files': ['molecule-requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/bfddaf0e63c7bc2831c1ebf21e5645885f202343', 'message': 'Rename testinfra to pytest-testinfra\n\nThe testinfra package was renamed to pytest-testinfra, and so, is\ncausing failures in the molecule job.\n\nChange-Id: I8876e0f6af39b82637eeabaa145efb3681b5940b\n'}]",5,813747,bfddaf0e63c7bc2831c1ebf21e5645885f202343,17,5,1,8367,,,0,"Rename testinfra to pytest-testinfra

The testinfra package was renamed to pytest-testinfra, and so, is
causing failures in the molecule job.

Change-Id: I8876e0f6af39b82637eeabaa145efb3681b5940b
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/47/813747/1 && git format-patch -1 --stdout FETCH_HEAD,['molecule-requirements.txt'],1,bfddaf0e63c7bc2831c1ebf21e5645885f202343,pytest-infra,pytest-testinfra,testinfra,1,1
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I76a87473b2f21576570a55d0a5ef19f642521336,openstack/tripleo-heat-templates,stable/wallaby,I76a87473b2f21576570a55d0a5ef19f642521336,Don't use service_net_map_replace in krb-svc-principals,MERGED,2021-10-28 04:42:36.000000000,2021-11-01 19:48:21.000000000,2021-11-01 19:48:21.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}]","[{'number': 1, 'created': '2021-10-28 04:42:36.000000000', 'files': ['extraconfig/nova_metadata/krb-service-principals/role.role.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a45cc6fb532c1d6c49b3bf53b17e2d2fa45bd7a2', 'message': ""Don't use service_net_map_replace in krb-svc-principals\n\nUsing the service_net_map replace in role_networks and\nas networks keys causes the actual custom networks to\nbe filtered. I.e the service principals are not created.\n\nNot using service_net_map fixes the problem.\n\nThis reverts commit f708ab7a827cc0db211b4709447f77126087347e.\nThis partial reverts commit 578bcb2ffad32c6a39d68b5dc360504e95972ffa.\n\nReleted-Bug: #1946239\nCloses-Bug: #1886915\nChange-Id: I76a87473b2f21576570a55d0a5ef19f642521336\n(cherry picked from commit f6eddad78c5ae3aec266428ce768d65320785348)\n""}]",1,815649,a45cc6fb532c1d6c49b3bf53b17e2d2fa45bd7a2,11,4,1,28223,,,0,"Don't use service_net_map_replace in krb-svc-principals

Using the service_net_map replace in role_networks and
as networks keys causes the actual custom networks to
be filtered. I.e the service principals are not created.

Not using service_net_map fixes the problem.

This reverts commit f708ab7a827cc0db211b4709447f77126087347e.
This partial reverts commit 578bcb2ffad32c6a39d68b5dc360504e95972ffa.

Releted-Bug: #1946239
Closes-Bug: #1886915
Change-Id: I76a87473b2f21576570a55d0a5ef19f642521336
(cherry picked from commit f6eddad78c5ae3aec266428ce768d65320785348)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/49/815649/1 && git format-patch -1 --stdout FETCH_HEAD,['extraconfig/nova_metadata/krb-service-principals/role.role.j2.yaml'],1,a45cc6fb532c1d6c49b3bf53b17e2d2fa45bd7a2,bug/1946239-stable/wallaby,, {%- if network.service_net_map_replace is defined %} - {{network.service_net_map_replace}} {%- else %} {%- endif %} {%- if network.service_net_map_replace is defined %} {{network.service_net_map_replace}}: {get_param: CloudName} {%- else %} {%- endif %} {%- if network.service_net_map_replace is defined %} {{network.service_net_map_replace}}: {get_param: CloudNameInternal} {%- else %} {%- endif %} {%- if network.service_net_map_replace is defined %} {{network.service_net_map_replace}}: {get_param: CloudNameStorageManagement} {%- else %} {%- endif %} {%- if network.service_net_map_replace is defined %} {{network.service_net_map_replace}}: {get_param: CloudName{{network.name}}} {%- else %} {%- endif %},0,20
openstack%2Ftripleo-ansible~stable%2Fwallaby~Ibdf87463d4a86dd225a1f1b89326407628facb65,openstack/tripleo-ansible,stable/wallaby,Ibdf87463d4a86dd225a1f1b89326407628facb65,Reload dbus config should work for both c8 and c9,MERGED,2021-10-29 20:02:33.000000000,2021-11-01 19:48:13.000000000,2021-11-01 19:48:13.000000000,"[{'_account_id': 14985}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-29 20:02:33.000000000', 'files': ['tripleo_ansible/roles/tripleo_cephadm/tasks/ganesha/start_nfs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/d4e7df03387e276547821b41d9a366892fb2bd49', 'message': 'Reload dbus config should work for both c8 and c9\n\nc9 ship dbus-broker by default instead of dbus-daemon.\nThis means we should make sure the command is valid for\nboth the use cases.\n\nRelated-Bug: #1949033\nChange-Id: Ibdf87463d4a86dd225a1f1b89326407628facb65\n(cherry picked from commit b151cd7b139768a17daa22cf48afdd5e9fbf8481)\n'}]",1,815887,d4e7df03387e276547821b41d9a366892fb2bd49,11,4,1,25402,,,0,"Reload dbus config should work for both c8 and c9

c9 ship dbus-broker by default instead of dbus-daemon.
This means we should make sure the command is valid for
both the use cases.

Related-Bug: #1949033
Change-Id: Ibdf87463d4a86dd225a1f1b89326407628facb65
(cherry picked from commit b151cd7b139768a17daa22cf48afdd5e9fbf8481)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/87/815887/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_cephadm/tasks/ganesha/start_nfs.yaml'],1,d4e7df03387e276547821b41d9a366892fb2bd49,cs9-stable/wallaby," command: ""killall -r -SIGHUP dbus-*"""," command: ""killall -SIGHUP dbus-daemon""",1,1
openstack%2Ftripleo-quickstart-extras~master~I42bcff7e1f1c17c24800343712ddcb8785892b64,openstack/tripleo-quickstart-extras,master,I42bcff7e1f1c17c24800343712ddcb8785892b64,Use network-v2 workflow for Controlplane VIP,MERGED,2021-08-30 11:04:12.000000000,2021-11-01 19:48:01.000000000,2021-11-01 19:48:01.000000000,"[{'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 20182}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}, {'_account_id': 29775}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-08-30 11:04:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/68196f25c72cf8cb2f59964fbaf6345b84201daa', 'message': 'Use network-v2 workflow for Controlplane VIP\n\ntripleo-ci-centos-8-containers-multinode on change\nhttps://review.opendev.org/798642 fails with:\n  Conflict detected for resource_registry entry:\n    OS::TripleO::Network::Ports::ControlPlaneVipPort.\n\nThe network-v2 workflow will create the ctlplane VIP\nprior to the heat stack and automatically include the\nrequired overrides. So there is no reason to manually\noverride the resource in the job.\n\nDepends-On: I2d14d9e587fce28ea0897bb235c9dedc8f68fa12\nChange-Id: I42bcff7e1f1c17c24800343712ddcb8785892b64\n'}, {'number': 2, 'created': '2021-08-30 11:09:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/11e090c0e61c5bfca69fbb2e674ff197f74182df', 'message': 'Use network-v2 workflow for Controlplane VIP\n\ntripleo-ci-centos-8-containers-multinode on change\nhttps://review.opendev.org/798642 fails with:\n  Conflict detected for resource_registry entry:\n    OS::TripleO::Network::Ports::ControlPlaneVipPort.\n\nThe network-v2 workflow will create the ctlplane VIP\nprior to the heat stack and automatically include the\nrequired overrides. So there is no reason to manually\noverride the resource in the job.\n\nDepends-On: I53ba631dc80428c6f1fe71c2bbfb0b5a36dd8f01\nChange-Id: I42bcff7e1f1c17c24800343712ddcb8785892b64\n'}, {'number': 3, 'created': '2021-09-06 14:00:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/375e8390ef45c3f467b53a6b40d55d1a68085d0e', 'message': 'Use network-v2 workflow for Controlplane VIP\n\ntripleo-ci-centos-8-containers-multinode on change\nhttps://review.opendev.org/798642 fails with:\n  Conflict detected for resource_registry entry:\n    OS::TripleO::Network::Ports::ControlPlaneVipPort.\n\nThe network-v2 workflow will create the ctlplane VIP\nprior to the heat stack and automatically include the\nrequired overrides. So there is no reason to manually\noverride the resource in the job.\n\nDepends-On: I2d14d9e587fce28ea0897bb235c9dedc8f68fa12\nChange-Id: I42bcff7e1f1c17c24800343712ddcb8785892b64\n'}, {'number': 4, 'created': '2021-09-07 11:22:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/36fc7dca5126643c38155bda7257dae8773f98f9', 'message': 'Use network-v2 workflow for Controlplane VIP\n\ntripleo-ci-centos-8-containers-multinode on change\nhttps://review.opendev.org/798642 fails with:\n  Conflict detected for resource_registry entry:\n    OS::TripleO::Network::Ports::ControlPlaneVipPort.\n\nThe network-v2 workflow will create the ctlplane VIP\nprior to the heat stack and automatically include the\nrequired overrides. So there is no reason to manually\noverride the resource in the job.\n\nDepends-On: I2d14d9e587fce28ea0897bb235c9dedc8f68fa12\nChange-Id: I42bcff7e1f1c17c24800343712ddcb8785892b64\n'}, {'number': 5, 'created': '2021-09-23 09:46:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/a4b63e8f29047dcd5a6dd387f8f66de1dd12bc77', 'message': 'Use network-v2 workflow for Controlplane VIP\n\ntripleo-ci-centos-8-containers-multinode on change\nhttps://review.opendev.org/798642 fails with:\n  Conflict detected for resource_registry entry:\n    OS::TripleO::Network::Ports::ControlPlaneVipPort.\n\nThe network-v2 workflow will create the ctlplane VIP\nprior to the heat stack and automatically include the\nrequired overrides. So there is no reason to manually\noverride the resource in the job.\n\nDepends-On: I2d14d9e587fce28ea0897bb235c9dedc8f68fa12\nChange-Id: I42bcff7e1f1c17c24800343712ddcb8785892b64\n'}, {'number': 6, 'created': '2021-10-27 12:26:36.000000000', 'files': ['roles/overcloud-deploy/templates/config-download.yaml.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/5c39f7b16c198ee8c95c4ed9c4a1c715ad5aa801', 'message': 'Use network-v2 workflow for Controlplane VIP\n\ntripleo-ci-centos-8-containers-multinode on change\nhttps://review.opendev.org/798642 fails with:\n  Conflict detected for resource_registry entry:\n    OS::TripleO::Network::Ports::ControlPlaneVipPort.\n\nThe network-v2 workflow will create the ctlplane VIP\nprior to the heat stack and automatically include the\nrequired overrides. So there is no reason to manually\noverride the resource in the job.\n\nDepends-On: I2d14d9e587fce28ea0897bb235c9dedc8f68fa12\nDepends-On: Ife4b15a784c70fe031af98f3aa135737232d56a6\nChange-Id: I42bcff7e1f1c17c24800343712ddcb8785892b64\n'}]",8,806562,5c39f7b16c198ee8c95c4ed9c4a1c715ad5aa801,87,9,6,24245,,,0,"Use network-v2 workflow for Controlplane VIP

tripleo-ci-centos-8-containers-multinode on change
https://review.opendev.org/798642 fails with:
  Conflict detected for resource_registry entry:
    OS::TripleO::Network::Ports::ControlPlaneVipPort.

The network-v2 workflow will create the ctlplane VIP
prior to the heat stack and automatically include the
required overrides. So there is no reason to manually
override the resource in the job.

Depends-On: I2d14d9e587fce28ea0897bb235c9dedc8f68fa12
Depends-On: Ife4b15a784c70fe031af98f3aa135737232d56a6
Change-Id: I42bcff7e1f1c17c24800343712ddcb8785892b64
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/62/806562/2 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-deploy/templates/config-download.yaml.j2'],1,68196f25c72cf8cb2f59964fbaf6345b84201daa,network-data-v2,,"{% if release not in ['train', 'ussuri', 'victoria'] %} # Starting with wallaby with ephemeral Heat, we want to override the default # mapping for ControlPlaneVipPort so that Neutron is not used. OS::TripleO::Network::Ports::ControlPlaneVipPort: /usr/share/openstack-tripleo-heat-templates/deployed-server/deployed-neutron-port.yaml {% endif %} control_virtual_ip: fixed_ips: - ip_address: 192.168.24.100 subnets: - cidr: 192.168.24.0/24 network: tags: - 192.168.24.0/24",0,13
openstack%2Ftripleo-ci~master~I273243ced8b83aecec9da775e7f7a3c3865b4fc3,openstack/tripleo-ci,master,I273243ced8b83aecec9da775e7f7a3c3865b4fc3,Ensure upgrade job read the proper hash,MERGED,2021-10-12 13:21:12.000000000,2021-11-01 19:47:58.000000000,2021-11-01 19:47:58.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30002}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-10-12 13:21:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/a82ccca82b018d7e0b6ad2777dffd10caf8e200f', 'message': 'DNM - Testing upgrade jobs\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 2, 'created': '2021-10-12 14:16:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ddc61954e8904ef285c0d4ee5c37285e7ee469ca', 'message': 'DNM - Testing upgrade jobs\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 3, 'created': '2021-10-13 11:44:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/abe01a2e5b37ace10f8bbf60e785a1b9959a4f8c', 'message': 'DNM - Testing upgrade jobs\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 4, 'created': '2021-10-13 14:39:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ba7ad9a5f445086b2156513550ffb878446d1880', 'message': 'DNM - Testing upgrade jobs\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 5, 'created': '2021-10-13 19:16:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/3b14b62b3ac4ec760ee269f345a8af7259530455', 'message': 'DNM - Testing upgrade jobs\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 6, 'created': '2021-10-21 18:57:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/a3849e55be649dd40404531372aa3d8dc387a789', 'message': 'DNM - Testing upgrade jobs\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 7, 'created': '2021-10-21 18:59:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/e52296a0de2002e233c532adcf5758ebec750edc', 'message': 'Ensure upgrade job read the proper hash\n\nFrom time to time, due a promotion happening between the time\nthat the content provider job executes, and the upgrade job\nthe upgrade job fails because it can not find the hash in the\ncontent provider. This is because the upgrade job, instead of\nrely on the zuul job variable passed by the content provider,\nit reads in execution time, the current-tripleo hash from\nrdo registry. This patch ensure that if there is a zuul variable\npassed by content provider, it will use that hash, instead of\nread it from rdo registry.\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 8, 'created': '2021-10-27 08:14:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/5eaf471dc491d1aef5c8d4c4929c66320c51f17f', 'message': 'Ensure upgrade job read the proper hash\n\nFrom time to time, due a promotion happening between the time\nthat the content provider job executes, and the upgrade job\nthe upgrade job fails because it can not find the hash in the\ncontent provider. This is because the upgrade job, instead of\nrely on the zuul job variable passed by the content provider,\nit reads in execution time, the current-tripleo hash from\nrdo registry. This patch ensure that if there is a zuul variable\npassed by content provider, it will use that hash, instead of\nread it from rdo registry.\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 9, 'created': '2021-10-27 11:09:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/a04e64b3f214bbb039e9f44544e1822f35b6340e', 'message': 'Ensure upgrade job read the proper hash\n\nFrom time to time, due a promotion happening between the time\nthat the content provider job executes, and the upgrade job\nthe upgrade job fails because it can not find the hash in the\ncontent provider. This is because the upgrade job, instead of\nrely on the zuul job variable passed by the content provider,\nit reads in execution time, the current-tripleo hash from\nrdo registry. This patch ensure that if there is a zuul variable\npassed by content provider, it will use that hash, instead of\nread it from rdo registry.\n\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}, {'number': 10, 'created': '2021-10-29 11:42:26.000000000', 'files': ['roles/run-test/templates/toci_gate_test.sh.j2', 'scripts/emit_releases_file/emit_releases_file.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/0b0aa53a9bc3298ca593ac43afe873e8b3c5dfe9', 'message': 'Ensure upgrade job read the proper hash\n\nFrom time to time, due a promotion happening between the time\nthat the content provider job executes, and the upgrade job\nthe upgrade job fails because it can not find the hash in the\ncontent provider. This is because the upgrade job, instead of\nrely on the zuul job variable passed by the content provider,\nit reads in execution time, the current-tripleo hash from\nrdo registry. This patch ensure that if there is a zuul variable\npassed by content provider, it will use that hash, instead of\nread it from rdo registry.\n\nRelated-Bug: #1946659\nChange-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3\n'}]",13,813629,0b0aa53a9bc3298ca593ac43afe873e8b3c5dfe9,41,7,10,8367,,,0,"Ensure upgrade job read the proper hash

From time to time, due a promotion happening between the time
that the content provider job executes, and the upgrade job
the upgrade job fails because it can not find the hash in the
content provider. This is because the upgrade job, instead of
rely on the zuul job variable passed by the content provider,
it reads in execution time, the current-tripleo hash from
rdo registry. This patch ensure that if there is a zuul variable
passed by content provider, it will use that hash, instead of
read it from rdo registry.

Related-Bug: #1946659
Change-Id: I273243ced8b83aecec9da775e7f7a3c3865b4fc3
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/29/813629/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/run-test/templates/toci_gate_test.sh.j2', 'scripts/emit_releases_file/emit_releases_file.py']",2,a82ccca82b018d7e0b6ad2777dffd10caf8e200f,fix-upgrade-update-jobs," forced_current_hash=None if(forced_current_hash): current_hash = forced_current_hash else: current_hash = get_dlrn_hash( stable_release, CURRENT_HASH_NAME, distro_name, distro_version ) parser.add_argument( '--current-hash', help='Force an specific hash instead of current-tripleo', ) args.current_hash"," current_hash = get_dlrn_hash( stable_release, CURRENT_HASH_NAME, distro_name, distro_version )",16,3
openstack%2Ftripleo-heat-templates~master~I4ab2d20df22bdc9b140019f90d1370ef17f09294,openstack/tripleo-heat-templates,master,I4ab2d20df22bdc9b140019f90d1370ef17f09294,Fix set_fact on the CephMgrAnsibleVars,MERGED,2021-10-28 07:35:53.000000000,2021-11-01 19:47:52.000000000,2021-11-01 19:47:52.000000000,"[{'_account_id': 6796}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}, {'_account_id': 30002}, {'_account_id': 30750}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-10-28 07:35:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/76924f2a3036bafb1dfeb6c067790878d61348a4', 'message': ""Fix set_fact on the CephMgrAnsibleVars\n\nThe purpose of this patch is react on the issue generated by [1],\nwhere an empty dict sect_fact is not allowed for ansible >= 2.11.\nFor this reason, we're going to always set those variables and\ndefer to the ansible layer the evaluation of the DashboardEnabled\ncondition.\n\n[1] https://github.com/ansible/ansible/pull/73684\n\nChange-Id: I4ab2d20df22bdc9b140019f90d1370ef17f09294\n""}, {'number': 2, 'created': '2021-10-28 07:41:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4d9e27103d10ec0c23300151bc2f7737db752629', 'message': ""Fix set_fact on the CephMgrAnsibleVars\n\nThe purpose of this patch is react on the issue generated by [1],\nwhere an empty dict sect_fact is not allowed for ansible >= 2.11.\nFor this reason, we're going to always set those variables and\ndefer to the ansible layer the evaluation of the DashboardEnabled\ncondition.\n\n[1] https://github.com/ansible/ansible/pull/73684\n\nCloses-Bug: #1949033\nChange-Id: I4ab2d20df22bdc9b140019f90d1370ef17f09294\n""}, {'number': 3, 'created': '2021-10-29 07:54:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d820843a253facbfb6c6cd8e8a1d31c00cdf4843', 'message': ""Fix set_fact on the CephMgrAnsibleVars\n\nThe purpose of this patch is react on the issue generated by [1],\nwhere an empty dict sect_fact is not allowed for ansible >= 2.11.\nFor this reason, we're going to always set those variables and\ndefer to the ansible layer the evaluation of the DashboardEnabled\ncondition.\n\n[1] https://github.com/ansible/ansible/pull/73684\n\nCloses-Bug: #1949033\nChange-Id: I4ab2d20df22bdc9b140019f90d1370ef17f09294\n""}, {'number': 4, 'created': '2021-10-29 11:26:44.000000000', 'files': ['deployment/cephadm/ceph-mgr.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b3863568ad75a3845389677b08a0d756e3c6e0b5', 'message': ""Fix set_fact on the CephMgrAnsibleVars\n\nThe purpose of this patch is react on the issue generated by [1],\nwhere an empty dict sect_fact is not allowed for ansible >= 2.11.\nFor this reason, we're going to always set those variables and\ndefer to the ansible layer the evaluation of the DashboardEnabled\ncondition.\n\n[1] https://github.com/ansible/ansible/pull/73684\n\nCloses-Bug: #1949033\nChange-Id: I4ab2d20df22bdc9b140019f90d1370ef17f09294\n""}]",12,815782,b3863568ad75a3845389677b08a0d756e3c6e0b5,43,12,4,25402,,,0,"Fix set_fact on the CephMgrAnsibleVars

The purpose of this patch is react on the issue generated by [1],
where an empty dict sect_fact is not allowed for ansible >= 2.11.
For this reason, we're going to always set those variables and
defer to the ansible layer the evaluation of the DashboardEnabled
condition.

[1] https://github.com/ansible/ansible/pull/73684

Closes-Bug: #1949033
Change-Id: I4ab2d20df22bdc9b140019f90d1370ef17f09294
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/82/815782/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/cephadm/ceph-mgr.yaml'],1,76924f2a3036bafb1dfeb6c067790878d61348a4,cs9," - internal_tls_enabled - map_merge: - {get_attr: [CephMgrAnsibleVars, value, vars]} - tripleo_cephadm_dashboard_crt: /etc/pki/tls/certs/ceph_dashboard.crt - tripleo_cephadm_dashboard_key: /etc/pki/tls/private/ceph_dashboard.key - tripleo_cephadm_dashboard_grafana_api_no_ssl_verify: true - {get_attr: [CephMgrAnsibleVars, value, vars]}"," - {get_param: CephEnableDashboard} - if: - internal_tls_enabled - map_merge: - {get_attr: [CephMgrAnsibleVars, value, vars]} - tripleo_cephadm_dashboard_crt: /etc/pki/tls/certs/ceph_dashboard.crt - tripleo_cephadm_dashboard_key: /etc/pki/tls/private/ceph_dashboard.key - tripleo_cephadm_dashboard_grafana_api_no_ssl_verify: true - {get_attr: [CephMgrAnsibleVars, value, vars]}",7,9
openstack%2Fpuppet-neutron~master~Idfd6879e36a0a16d0d07f4296f99cbba0ad953d9,openstack/puppet-neutron,master,Idfd6879e36a0a16d0d07f4296f99cbba0ad953d9,Accept an array value for valid_interfaces,MERGED,2021-11-01 10:47:04.000000000,2021-11-01 18:29:03.000000000,2021-11-01 18:29:03.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 10:47:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/ebfa468729a5c3e19948c03de3fc0c266a9aaf9f', 'message': 'Accept array value for [neutron] valid_interfaces\n\nThe [neutron] valid_interfaces parameter is defined as a ListOpt\nwhich accepts a comma-separated string which represents a list.\n\nThis change allows passing array value in addition to string value\nso that the list can be defined more flexibly.\n\nChange-Id: Idfd6879e36a0a16d0d07f4296f99cbba0ad953d9\n'}, {'number': 2, 'created': '2021-11-01 10:47:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/895b62eee4530ee20620f5a0da7b1a70c62637a8', 'message': 'Accept array value for [ironic] valid_interfaces\n\nThe [ironic] valid_interfaces parameter is defined as a ListOpt which\naccepts a comma-separated string which represents a list.\n\nThis change allows passing array value in addition to string value\nso that the list can be defined more flexibly.\n\nChange-Id: Idfd6879e36a0a16d0d07f4296f99cbba0ad953d9\n'}, {'number': 3, 'created': '2021-11-01 10:51:47.000000000', 'files': ['spec/classes/neutron_server_notifications_ironic_spec.rb', 'manifests/server/notifications/ironic.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/bf562b889d450c4b3b1168b0ba4370fdd08eb26a', 'message': 'Accept an array value for valid_interfaces\n\nThe valid_interfaces parameter is defined as a ListOpt and accepts\na string value which represents a list.\nThis change allows passing an array value in addition to a string value\nso that the list can be defined more flexibly.\n\nChange-Id: Idfd6879e36a0a16d0d07f4296f99cbba0ad953d9\n'}]",0,816160,bf562b889d450c4b3b1168b0ba4370fdd08eb26a,10,3,3,9816,,,0,"Accept an array value for valid_interfaces

The valid_interfaces parameter is defined as a ListOpt and accepts
a string value which represents a list.
This change allows passing an array value in addition to a string value
so that the list can be defined more flexibly.

Change-Id: Idfd6879e36a0a16d0d07f4296f99cbba0ad953d9
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/60/816160/2 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_server_notifications_ironic_spec.rb', 'manifests/server/notifications/ironic.pp']",2,ebfa468729a5c3e19948c03de3fc0c266a9aaf9f,valid_interfaces," 'ironic/valid_interfaces': value => join(any2array($valid_interfaces), ',');", 'ironic/valid_interfaces': value => $valid_interfaces;,14,3
openstack%2Fpuppet-glance~stable%2Fvictoria~Iac580df4de14ffdb19436417b2830a834efd087d,openstack/puppet-glance,stable/victoria,Iac580df4de14ffdb19436417b2830a834efd087d,Swift backend: the key parameter should be secret,MERGED,2021-10-28 23:02:29.000000000,2021-11-01 18:26:46.000000000,2021-11-01 18:26:46.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 21129}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 23:02:29.000000000', 'files': ['spec/defines/glance_backend_multistore_swift_spec.rb', 'manifests/backend/multistore/swift.pp'], 'web_link': 'https://opendev.org/openstack/puppet-glance/commit/f6b75d9c2a1e000d7ba575db33aeabd0e3319848', 'message': ""Swift backend: the key parameter should be secret\n\nThe key parameter of swift backend is used to define a credentail to\naccess Swift so should be hidden in logs.\n\nIn Glance the user parameter(swift_store_user) is also defined as\na secret parameter. However it defines user name or id and user name\nor id is not currently treated as secret in puppet, so this change\ndoesn't cover the user parameter.\n\nChange-Id: Iac580df4de14ffdb19436417b2830a834efd087d\n(cherry picked from commit 4a481929887d88f019467d11fb7c19d8d9311e3e)\n(cherry picked from commit 048e9b458ba0283865fd8dd0dab05a4919a8c371)\n(cherry picked from commit 572f60e47fcca241c2829eaeacd799abf873317b)\n""}]",0,815882,f6b75d9c2a1e000d7ba575db33aeabd0e3319848,8,4,1,9816,,,0,"Swift backend: the key parameter should be secret

The key parameter of swift backend is used to define a credentail to
access Swift so should be hidden in logs.

In Glance the user parameter(swift_store_user) is also defined as
a secret parameter. However it defines user name or id and user name
or id is not currently treated as secret in puppet, so this change
doesn't cover the user parameter.

Change-Id: Iac580df4de14ffdb19436417b2830a834efd087d
(cherry picked from commit 4a481929887d88f019467d11fb7c19d8d9311e3e)
(cherry picked from commit 048e9b458ba0283865fd8dd0dab05a4919a8c371)
(cherry picked from commit 572f60e47fcca241c2829eaeacd799abf873317b)
",git fetch https://review.opendev.org/openstack/puppet-glance refs/changes/82/815882/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/defines/glance_backend_multistore_swift_spec.rb', 'manifests/backend/multistore/swift.pp']",2,f6b75d9c2a1e000d7ba575db33aeabd0e3319848,," ""${default_swift_reference}/key"": value => $swift_store_key, secret => true;"," ""${default_swift_reference}/key"": value => $swift_store_key;",3,3
openstack%2Fironic~master~I21f6058fe29b1495dbde63ec09a1227568dc3f08,openstack/ironic,master,I21f6058fe29b1495dbde63ec09a1227568dc3f08,"There is no aim, we do deploy/manage baremetal.",MERGED,2021-10-15 22:53:51.000000000,2021-11-01 18:17:12.000000000,2021-11-01 18:15:08.000000000,"[{'_account_id': 4571}, {'_account_id': 10239}, {'_account_id': 11076}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-15 22:53:51.000000000', 'files': ['ironic/api/controllers/root.py', 'api-ref/source/samples/api-root-response.json'], 'web_link': 'https://opendev.org/openstack/ironic/commit/8e8c1b087ba510e58a8fab8d9ede5227c29bc2ee', 'message': 'There is no aim, we do deploy/manage baremetal.\n\nFix the root description header, since the Ironic project is\nvery far past the days of when we were aiming to provision baremetal.\n\nChange-Id: I21f6058fe29b1495dbde63ec09a1227568dc3f08\n'}]",7,814239,8e8c1b087ba510e58a8fab8d9ede5227c29bc2ee,34,4,1,11655,,,0,"There is no aim, we do deploy/manage baremetal.

Fix the root description header, since the Ironic project is
very far past the days of when we were aiming to provision baremetal.

Change-Id: I21f6058fe29b1495dbde63ec09a1227568dc3f08
",git fetch https://review.opendev.org/openstack/ironic refs/changes/39/814239/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/api/controllers/root.py', 'api-ref/source/samples/api-root-response.json']",2,8e8c1b087ba510e58a8fab8d9ede5227c29bc2ee,," ""description"": ""Ironic is an OpenStack project which enables the provision and management of baremetal machines."","," ""description"": ""Ironic is an OpenStack project which aims to provision baremetal machines."",",3,3
openstack%2Fpuppet-ironic~master~Ic3e99ed7934c869f6fe41d08edab4cc332ed40c5,openstack/puppet-ironic,master,Ic3e99ed7934c869f6fe41d08edab4cc332ed40c5,Add support for [pxe] loader_file_paths and dir/file_permission,MERGED,2021-10-30 00:33:08.000000000,2021-11-01 18:02:14.000000000,2021-11-01 17:59:39.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-30 00:33:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/33ed35b1559fbc6fae8de9accfd179b40a93df67', 'message': 'Add support for [pxe] loader_file_paths and dir/file_permission\n\nDepends-on: https://review.opendev.org/806815\nChange-Id: Ic3e99ed7934c869f6fe41d08edab4cc332ed40c5\n'}, {'number': 2, 'created': '2021-10-30 02:54:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/6ef38e8adac4f03d0b811a9173dfbc6638388c15', 'message': 'Add support for [pxe] loader_file_paths and dir/file_permission\n\nDepends-on: https://review.opendev.org/806815\nChange-Id: Ic3e99ed7934c869f6fe41d08edab4cc332ed40c5\n'}, {'number': 3, 'created': '2021-10-30 02:58:53.000000000', 'files': ['releasenotes/notes/bootloader-copy-for-network-boot-bdefc6991f189f0c.yaml', 'manifests/drivers/pxe.pp', 'spec/classes/ironic_drivers_pxe_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/75e3171ed3b890041bc61b010dad27157ae7647e', 'message': 'Add support for [pxe] loader_file_paths and dir/file_permission\n\nDepends-on: https://review.opendev.org/806815\nChange-Id: Ic3e99ed7934c869f6fe41d08edab4cc332ed40c5\n'}]",0,816078,75e3171ed3b890041bc61b010dad27157ae7647e,11,3,3,9816,,,0,"Add support for [pxe] loader_file_paths and dir/file_permission

Depends-on: https://review.opendev.org/806815
Change-Id: Ic3e99ed7934c869f6fe41d08edab4cc332ed40c5
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/78/816078/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bootloader-copy-for-network-boot-bdefc6991f189f0c.yaml', 'manifests/drivers/pxe.pp', 'spec/classes/ironic_drivers_pxe_spec.rb']",3,33ed35b1559fbc6fae8de9accfd179b40a93df67,loader_file_paths," is_expected.to contain_ironic_config('pxe/dir_permission').with_ensure('<SERVICE DEFAULT>') is_expected.to contain_ironic_config('pxe/file_permission').with_ensure('<SERVICE DEFAULT>') is_expected.to contain_ironic_config('pxe/loader_file_paths').with_ensure('<SERVICE DEFAULT>') :dir_permission => '0o755', :file_permission => '0o644', :loader_file_paths => ['ipxe.efi:/usr/share/ipxe/ipxe-snponly-x86_64.efi', 'undionly.kpxe:/usr/share/ipxe/undionly.kpxe'], is_expected.to contain_ironic_config('pxe/dir_permission').with_ensure('0o755') is_expected.to contain_ironic_config('pxe/file_permission').with_ensure('0o644') is_expected.to contain_ironic_config('pxe/loader_file_paths') .with_value('ipxe.efi:/usr/share/ipxe/ipxe-snponly-x86_64.efi,undionly.kpxe:/usr/share/ipxe/undionly.kpxe')",,42,0
openstack%2Fpuppet-ironic~master~I969e7e9d07c097d8c48015a2c4e116ce1d1daac2,openstack/puppet-ironic,master,I969e7e9d07c097d8c48015a2c4e116ce1d1daac2,Add support for [DEFAULT] image_download_concurrency,MERGED,2021-10-30 01:24:35.000000000,2021-11-01 18:01:03.000000000,2021-11-01 17:59:35.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-30 01:24:35.000000000', 'files': ['manifests/conductor.pp', 'spec/classes/ironic_conductor_spec.rb', 'releasenotes/notes/image_download_concurrency-6dddf8f3f0d84479.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/e83eb3126065e1f722feecdb080c75aa3e84fac6', 'message': 'Add support for [DEFAULT] image_download_concurrency\n\nChange-Id: I969e7e9d07c097d8c48015a2c4e116ce1d1daac2\n'}]",1,816080,e83eb3126065e1f722feecdb080c75aa3e84fac6,10,3,1,9816,,,0,"Add support for [DEFAULT] image_download_concurrency

Change-Id: I969e7e9d07c097d8c48015a2c4e116ce1d1daac2
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/80/816080/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/conductor.pp', 'spec/classes/ironic_conductor_spec.rb', 'releasenotes/notes/image_download_concurrency-6dddf8f3f0d84479.yaml']",3,e83eb3126065e1f722feecdb080c75aa3e84fac6,,--- features: - | The new ``image_download_concurrency`` parameter has been added to the ``ironic::conductor`` class. ,,15,0
openstack%2Fwhitebox-tempest-plugin~master~Id9a32f1439ee8b646f35988675f352e789deaf12,openstack/whitebox-tempest-plugin,master,Id9a32f1439ee8b646f35988675f352e789deaf12,Mixed Dedicated and Shared cpu instances,MERGED,2021-08-23 21:47:18.000000000,2021-11-01 17:53:27.000000000,2021-11-01 17:53:27.000000000,"[{'_account_id': 8864}, {'_account_id': 10135}, {'_account_id': 11604}, {'_account_id': 22348}, {'_account_id': 27478}, {'_account_id': 30788}]","[{'number': 1, 'created': '2021-08-23 21:47:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/ccdcf384e86a429f0ee838ec8c98dc678bafa085', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nDepends-On: 805455\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 2, 'created': '2021-08-24 13:18:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/7bf06fbce7c8677f8036e07044c4c9f56769803e', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nDepends-on: https://review.opendev.org/c/openstack/whitebox-tempest-plugin/+/805455/\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 3, 'created': '2021-08-30 21:17:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/b4e688a41e4d14e441ea3fdf9eed722a0e1ce080', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 4, 'created': '2021-08-31 13:47:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/c545e2fff8e74b5def3e0761b46cccee41bcd930', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 5, 'created': '2021-08-31 15:37:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/b4868f005273917d897a7dc748894e4274a2c36f', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 6, 'created': '2021-08-31 17:29:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/36abd58218687d40a22f2bc10a480b1685edd119', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 7, 'created': '2021-08-31 19:32:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/51bfe8b0b291d7615b09e8e7f616599dc5944711', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 8, 'created': '2021-09-01 13:28:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/c94067335fba829098e182455897fc2f59a82a04', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 9, 'created': '2021-09-01 14:28:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/00debe9e5257b9f66ba52e61c91a854fc7a7ce8d', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\nNew test method deploys an instance using a flavor with a mixed\ndedicated policy. Currently deploys with a mask that excludes core id\n0 of the guest instance from mapping its cores to dedicated PCPUs from\n  the host.\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 10, 'created': '2021-09-01 18:11:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/c900a7d6c551e922a332279b7cbf942e12d94738', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\nNew test method deploys an instance using a flavor with a mixed\ndedicated policy. Currently deploys with a mask that excludes core id\n0 of the guest instance from mapping its cores to dedicated PCPUs from\n  the host.\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 11, 'created': '2021-09-01 21:02:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/70f1c388d16a4d9f3804ee1f1c9f1d6512380491', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\nNew test method deploys an instance using a flavor with a mixed\ndedicated policy. Currently deploys with a mask that excludes core id\n0 of the guest instance from mapping its cores to dedicated PCPUs from\n  the host.\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 12, 'created': '2021-10-26 21:01:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/e0aa7930f1fea32d5901b94c7d04b6063b20df0f', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\nNew test method deploys an instance using a flavor with a mixed\ndedicated policy. Currently deploys with a mask that excludes core id\n0 of the guest instance from mapping its cores to dedicated PCPUs from\n  the host.\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}, {'number': 13, 'created': '2021-10-29 16:57:59.000000000', 'files': ['whitebox_tempest_plugin/services/clients.py', '.zuul.yaml', 'whitebox_tempest_plugin/api/compute/numa_helper.py', 'whitebox_tempest_plugin/api/compute/test_cpu_pinning.py'], 'web_link': 'https://opendev.org/openstack/whitebox-tempest-plugin/commit/0276f52886397a6557b5cb8d8477b313e14291de', 'message': 'Mixed Dedicated and Shared cpu instances\n\nTests deploying an instance mapped to shared PCPUs and dedicated PCPUs\non the host [1]\n\nNew test method deploys an instance using a flavor with a mixed\ndedicated policy. Currently deploys with a mask that excludes core id\n0 of the guest instance from mapping its cores to dedicated PCPUs from\n  the host.\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html\n\nChange-Id: Id9a32f1439ee8b646f35988675f352e789deaf12\n'}]",15,805731,0276f52886397a6557b5cb8d8477b313e14291de,40,6,13,31033,,,0,"Mixed Dedicated and Shared cpu instances

Tests deploying an instance mapped to shared PCPUs and dedicated PCPUs
on the host [1]

New test method deploys an instance using a flavor with a mixed
dedicated policy. Currently deploys with a mask that excludes core id
0 of the guest instance from mapping its cores to dedicated PCPUs from
  the host.

[1] https://specs.openstack.org/openstack/nova-specs/specs/victoria/implemented/use-pcpu-vcpu-in-one-instance.html

Change-Id: Id9a32f1439ee8b646f35988675f352e789deaf12
",git fetch https://review.opendev.org/openstack/whitebox-tempest-plugin refs/changes/31/805731/13 && git format-patch -1 --stdout FETCH_HEAD,"['whitebox_tempest_plugin/services/clients.py', 'whitebox_tempest_plugin/api/compute/test_cpu_pinning.py']",2,ccdcf384e86a429f0ee838ec8c98dc678bafa085,rm_nsm_colloc_mig," class SharedPinnedAndUnpinned(BasePinningTest): vcpus = 2 dedicated_cpu_policy = {'hw:cpu_policy': 'mixed', 'hw:cpu_dedicated_mask': '^0'} def _get_cpu_set_by_core(self, server_id, instance_cpu_id): """"""Search the xml vcpu element of the provided server for its cpuset. Convert cpuset found into a set of integers. """""" xml_cpu_search = ""./cputune/vcpupin[@vcpu='%s']"" % instance_cpu_id root = self.get_server_xml(server_id) cpus = root.find(xml_cpu_search) cpuset = cpus.attrib.get('cpuset') return whitebox_utils.parse_cpu_spec(cpuset) def test_shared_pinned_and_unpinned_guest(self): flavor = self.create_flavor(vcpus=self.vcpus, extra_specs=self.dedicated_cpu_policy) server = self.create_test_server(flavor=flavor['id']) host = self.get_host_for_server(server['id']) host_sm = clients.NovaServiceManager(host, 'nova-compute', self.os_admin.services_client) host_dedicated_cpus = host_sm.get_cpu_dedicated_set() host_shared_cpus = host_sm.get_cpu_shared_set() guest_shared_cpus = self._get_cpu_set_by_core(server['id'], 0) guest_dedicated_cpus = self._get_cpu_set_by_core(server['id'], 1) self.assertTrue(guest_dedicated_cpus.issubset(host_dedicated_cpus), 'Pinned Host CPU\'s %s of server %s is ' 'not a subset of %s' % (guest_dedicated_cpus, server['id'], host_dedicated_cpus)) self.assertItemsEqual(guest_shared_cpus, host_shared_cpus, 'Shared CPU Set %s of shared server %s is ' 'not equal to shared set of host %s' % (guest_shared_cpus, server['id'], host_shared_cpus))",,50,0
openstack%2Fheat~master~I3f132d4889723f7b4a3a416779ac5ee7663249b8,openstack/heat,master,I3f132d4889723f7b4a3a416779ac5ee7663249b8,Fix timeout calc of nested resource groups,MERGED,2021-09-20 18:59:41.000000000,2021-11-01 17:42:23.000000000,2021-11-01 17:40:47.000000000,"[{'_account_id': 4257}, {'_account_id': 12404}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-20 18:59:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/7a98cc32d8a86d2b0fae8b3a48cd7ddc5ce7bdd7', 'message': 'Fix timeout calc of nested resource groups\n\nThe timeout calculation of nested resource groups are using seconds but\nthen it passing the value in seconds to the stack resource that is\nexpected it in minutes. This leads to a rapidly increasing timeout value\nin each nesting levels.\n\nThis patch converts the seconds to minutes before passing it forward.\n\nStory: 2009237\nTask: 43372\nChange-Id: I3f132d4889723f7b4a3a416779ac5ee7663249b8\n'}, {'number': 2, 'created': '2021-09-21 11:03:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/1f7e35e93b85395c48a4bfd981e3ee90898137e3', 'message': 'Fix timeout calc of nested resource groups\n\nThe timeout calculation of nested resource groups are using seconds but\nthen it passing the value in seconds to the stack resource that is\nexpected it in minutes. This leads to a rapidly increasing timeout value\nin each nesting levels.\n\nThis patch converts the seconds to minutes before passing it forward.\n\nStory: 2009237\nTask: 43372\nChange-Id: I3f132d4889723f7b4a3a416779ac5ee7663249b8\n'}, {'number': 3, 'created': '2021-09-21 12:21:39.000000000', 'files': ['heat/engine/resources/openstack/heat/resource_group.py', 'heat_integrationtests/functional/test_resource_group.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/ef731bca05ea683c30448a2db397ae631c121d95', 'message': 'Fix timeout calc of nested resource groups\n\nThe timeout calculation of nested resource groups are using seconds but\nthen it passing the value in seconds to the stack resource that is\nexpected it in minutes. This leads to a rapidly increasing timeout value\nin each nesting levels.\n\nThis patch converts the seconds to minutes before passing it forward.\n\nStory: 2009237\nTask: 43372\nChange-Id: I3f132d4889723f7b4a3a416779ac5ee7663249b8\n'}]",3,810113,ef731bca05ea683c30448a2db397ae631c121d95,19,3,3,9708,,,0,"Fix timeout calc of nested resource groups

The timeout calculation of nested resource groups are using seconds but
then it passing the value in seconds to the stack resource that is
expected it in minutes. This leads to a rapidly increasing timeout value
in each nesting levels.

This patch converts the seconds to minutes before passing it forward.

Story: 2009237
Task: 43372
Change-Id: I3f132d4889723f7b4a3a416779ac5ee7663249b8
",git fetch https://review.opendev.org/openstack/heat refs/changes/13/810113/3 && git format-patch -1 --stdout FETCH_HEAD,"['heat/engine/resources/openstack/heat/resource_group.py', 'heat_integrationtests/functional/test_resource_group.py']",2,7a98cc32d8a86d2b0fae8b3a48cd7ddc5ce7bdd7,story/2009237," self.assertEqual({9, 8}, timeouts)"," # FIXME(gibi): This is bug story/2009237 as the timeout calculation of # nested resource groups are broken. It is using seconds for the # calculation but then pass that to functions expecting timeouts in # minutes leading to increasing timeout value with each nesting level. self.assertEqual({35939, 599}, timeouts) # After the bug is fixed we expect timeouts less than the overall # timeout requested for the whole stack. # self.assertEqual({9, 8}, timeouts)",6,9
openstack%2Fpuppet-horizon~master~I712ddbb6f1a30bb0149b33c6e1dd2da9c5c8dfba,openstack/puppet-horizon,master,I712ddbb6f1a30bb0149b33c6e1dd2da9c5c8dfba,Add support for API_RESULT_PAGE_SIZE,MERGED,2021-11-01 04:42:01.000000000,2021-11-01 17:27:40.000000000,2021-11-01 17:26:04.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 04:42:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/2998aac97aa948aaa8dea7de7de2b8529067f164', 'message': 'Add support for API_RESULT_PAGE_SIZE\n\nChange-Id: I712ddbb6f1a30bb0149b33c6e1dd2da9c5c8dfba\n'}, {'number': 2, 'created': '2021-11-01 05:11:51.000000000', 'files': ['templates/local_settings.py.erb', 'releasenotes/notes/api_result_page_size-9efaaf9a23cd0454.yaml', 'manifests/init.pp', 'spec/classes/horizon_init_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/3d30815dfa8cd2e620302af79d1d2342603b95b9', 'message': 'Add support for API_RESULT_PAGE_SIZE\n\nChange-Id: I712ddbb6f1a30bb0149b33c6e1dd2da9c5c8dfba\n'}]",1,816114,3d30815dfa8cd2e620302af79d1d2342603b95b9,11,3,2,9816,,,0,"Add support for API_RESULT_PAGE_SIZE

Change-Id: I712ddbb6f1a30bb0149b33c6e1dd2da9c5c8dfba
",git fetch https://review.opendev.org/openstack/puppet-horizon refs/changes/14/816114/2 && git format-patch -1 --stdout FETCH_HEAD,"['templates/local_settings.py.erb', 'releasenotes/notes/api_result_page_size-9efaaf9a23cd0454.yaml', 'manifests/init.pp', 'spec/classes/horizon_init_spec.rb']",4,2998aac97aa948aaa8dea7de7de2b8529067f164,api_result_page_size," 'API_RESULT_PAGE_SIZE = 20', :api_result_limit => 2000, :api_result_page_size => 40, 'API_RESULT_LIMIT = 2000', 'API_RESULT_PAGE_SIZE = 40',"," :api_result_limit => 4682, 'API_RESULT_LIMIT = 4682',",18,5
openstack%2Fopenstack-helm-infra~master~Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c,openstack/openstack-helm-infra,master,Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c,[ceph-client] Consolidate mon_host discovery,MERGED,2021-10-21 20:32:45.000000000,2021-11-01 17:18:32.000000000,2021-11-01 17:17:05.000000000,"[{'_account_id': 8898}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 28372}, {'_account_id': 29974}, {'_account_id': 32190}]","[{'number': 1, 'created': '2021-10-21 20:32:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/440645d1d69c4aa814fc6bb7ddd2c93fadf4e53d', 'message': '[ceph-client] Fix ceph.conf update job\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels. It also has a race with the ceph-rbd-pool\njob, which tries to mount ceph.conf from the same configmap as it is\nbeing modified. The ceph-rbd-pool job sometimes fails with the pod in\nStartError state.\n\nThis change adds a dependency to the ceph-rbd-pool job on the ceph.conf\nmodification job, which is renamed to just ""ceph-ns-client-ceph-config""\n(rather than having the name dynamically generated).\n\nThe ceph-ns-client-ceph-config job is also updated with the missing\nlabels, and Roles and RoleBindings for the job\'s service account are\nconsolidated.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 2, 'created': '2021-10-22 22:56:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/2d14b25274840bb5b1fa2198f97876ed45bb01ab', 'message': '[ceph-client] Fix ceph.conf update job\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels. It also has a race with the ceph-rbd-pool\njob, which tries to mount ceph.conf from the same configmap as it is\nbeing modified. The ceph-rbd-pool job sometimes fails with the pod in\nStartError state.\n\nThis change adds a dependency to the ceph-rbd-pool job on the ceph.conf\nmodification job, which is renamed to just ""ceph-ns-client-ceph-config""\n(rather than having the name dynamically generated).\n\nThe ceph-ns-client-ceph-config job is also updated with the missing\nlabels, and Roles and RoleBindings for the job\'s service account are\nconsolidated.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 3, 'created': '2021-10-25 16:03:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/c135df6a19f7f4d46a3e34e50c749b700f4b930a', 'message': '[ceph-client] Fix ceph.conf update job\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels. It also has a race with several other jobs\nand pods that mount ceph.conf from the same configmap while it is being\nmodified. Depending on the restartPolicy, pods (such as the one created\nfor the ceph-rbd-pool job) will linger in StartError state.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* makes it a post-install/update hook (to avoid the race)\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 4, 'created': '2021-10-25 16:10:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a9dfe80c43ac7bb065b1a1ab092abc974641054b', 'message': '[ceph-client] Fix ceph.conf update job\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels. It also has a race with several other jobs\nand pods that mount ceph.conf from the same configmap while it is being\nmodified. Depending on the restartPolicy, pods (such as the one created\nfor the ceph-rbd-pool job) will linger in StartError state.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* makes it a post-install/update hook (to avoid the race)\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 5, 'created': '2021-10-25 16:53:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/df2ad8fb94f5dfeca71826e6a69a70ee54b87562', 'message': '[ceph-client] Fix ceph.conf update job\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels. It also has a race with several other jobs\nand pods that mount ceph.conf from the same configmap while it is being\nmodified. Depending on the restartPolicy, pods (such as the one created\nfor the ceph-rbd-pool job) will linger in StartError state.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* makes it a post-install/update hook (to avoid the race)\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 6, 'created': '2021-10-25 18:21:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a4703315e819c730d80b312c2314ff6ae71bab51', 'message': '[ceph-client] Fix ceph.conf update job\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels. It also has a race with several other jobs\nand pods that mount ceph.conf from the same configmap while it is being\nmodified. Depending on the restartPolicy, pods (such as the one created\nfor the ceph-rbd-pool job) will linger in StartError state.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* makes it a post-install/update hook (to avoid the race)\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 7, 'created': '2021-10-25 18:51:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5c124702f7462d6ecc74560844d0de32b0a16e5c', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) will linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 8, 'created': '2021-10-25 19:47:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5d9dc62cd59db7bd95dcc1824ebfd024cdc67c21', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) will linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 9, 'created': '2021-10-25 20:28:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/084244cf36d82736effe64341ad9b36be2a49c43', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) will linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 10, 'created': '2021-10-25 21:23:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/53718f4c99cdf071c4ea42ce392520c6427f8022', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 11, 'created': '2021-10-26 01:35:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a5e9a0ee2936437b0e6622717de275d8f07b5885', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 12, 'created': '2021-10-26 02:03:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a1f195a62deb2d92f3e4db1f950783d5d848cb96', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 13, 'created': '2021-10-26 19:29:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ea88536c7f49aeca20e6b824f853c5151e1f024e', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 14, 'created': '2021-10-26 19:30:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1fdd235aa12cdcccd60fc0f36052976a5a925847', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 15, 'created': '2021-10-28 16:54:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/732df8ac86bbe00e3e8188470e9133933657e11b', 'message': '[ceph-client] Fix ceph.conf update job labels\n\nThe job that updates ceph.conf inside the ceph-client-etc configmap [0]\nis missing .metdata.labels.\n\nThis change updates the ceph.conf update job as follows:\n* adds the missing labels\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 16, 'created': '2021-10-29 02:45:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/c7948964b5af4493299573aebef521c96b863e13', 'message': '[ceph-client] Consolidate mon_host discovery\n\nThis change updates the ceph.conf update job as follows:\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}, {'number': 17, 'created': '2021-10-29 02:48:29.000000000', 'files': ['ceph-client/templates/bin/pool/_init.sh.tpl', 'ceph-client/Chart.yaml', 'ceph-client/templates/bin/_namespace-client-ceph-config-manager.sh.tpl', 'ceph-client/templates/bin/mgr/_start.sh.tpl', 'releasenotes/notes/ceph-client.yaml', 'ceph-client/templates/bin/utils/_checkDNS_start.sh.tpl', 'ceph-client/templates/job-ns-client-ceph-config.yaml', 'ceph-client/templates/snippets/_mon_host_from_k8s_ep.sh.tpl', 'ceph-client/templates/job-rbd-pool.yaml', 'ceph-client/templates/bin/mds/_start.sh.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/428cda6e33fea7e742d45589d687af84403b9b40', 'message': '[ceph-client] Consolidate mon_host discovery\n\nThis change updates the ceph.conf update job as follows:\n* renames it to ""ceph-ns-client-ceph-config""\n* consolidates some Roles and RoleBindings\n\nThis change also moves the logic of figuring out the mon_host addresses\nfrom the kubernetes endpoint object to a snippet, which is used by the\nvarious bash scripts that need it.\n\nIn particular, this logic is added to the rbd-pool job, so that it does\nnot depend on the ceph-ns-client-ceph-config job.\n\nNote that the ceph.conf update job has a race with several other jobs\nand pods that mount ceph.conf from the ceph-client-etc configmap while\nit is being modified. Depending on the restartPolicy, pods (such as the\none created for the ceph-rbd-pool job) may linger in StartError state.\nThis is not addressed here.\n\nChange-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c\n'}]",6,815066,428cda6e33fea7e742d45589d687af84403b9b40,47,7,17,28719,,,0,"[ceph-client] Consolidate mon_host discovery

This change updates the ceph.conf update job as follows:
* renames it to ""ceph-ns-client-ceph-config""
* consolidates some Roles and RoleBindings

This change also moves the logic of figuring out the mon_host addresses
from the kubernetes endpoint object to a snippet, which is used by the
various bash scripts that need it.

In particular, this logic is added to the rbd-pool job, so that it does
not depend on the ceph-ns-client-ceph-config job.

Note that the ceph.conf update job has a race with several other jobs
and pods that mount ceph.conf from the ceph-client-etc configmap while
it is being modified. Depending on the restartPolicy, pods (such as the
one created for the ceph-rbd-pool job) may linger in StartError state.
This is not addressed here.

Change-Id: Id4fdbfa9cdfb448eb7bc6b71ac4c67010f34fc2c
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/66/815066/17 && git format-patch -1 --stdout FETCH_HEAD,"['ceph-client/Chart.yaml', 'releasenotes/notes/ceph-client.yaml', 'ceph-client/templates/job-ns-client-ceph-config.yaml', 'ceph-client/templates/job-rbd-pool.yaml']",4,440645d1d69c4aa814fc6bb7ddd2c93fadf4e53d,,"{{/* Add a dependency on the job that updates ceph.conf inside the ceph-client-etc configmap */}} {{- if .Values.manifests.job_ns_client_ceph_config -}} {{- $_ := set $envAll.Values.dependencies.static.rbd_pool ""jobs"" (list ""ceph-ns-client-ceph-config"") -}} {{- end -}} ",,12,27
openstack%2Fheat~master~I8e85434a5fb9cc6d0ef3240c8ae6085f5124174b,openstack/heat,master,I8e85434a5fb9cc6d0ef3240c8ae6085f5124174b,Reproduce bug story/2009237,MERGED,2021-09-20 18:59:41.000000000,2021-11-01 17:15:25.000000000,2021-11-01 17:13:30.000000000,"[{'_account_id': 4257}, {'_account_id': 4571}, {'_account_id': 12404}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-20 18:59:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/5a28a50613af78f3733720b7a70d1d36817b3b96', 'message': 'Reproduce bug story/2009237\n\nAdd a functional test that reproduces the bug that nested resource group\ntimeout value is increasing rapidly with every nesting level.\n\nStory: 2009237\nTask: 43373\nChange-Id: I8e85434a5fb9cc6d0ef3240c8ae6085f5124174b\n'}, {'number': 2, 'created': '2021-09-21 12:21:39.000000000', 'files': ['heat_integrationtests/functional/test_resource_group.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/863d645d7ef223a2534423e623fbc1c420c8557f', 'message': 'Reproduce bug story/2009237\n\nAdd a functional test that reproduces the bug that nested resource group\ntimeout value is increasing rapidly with every nesting level.\n\nStory: 2009237\nTask: 43373\nChange-Id: I8e85434a5fb9cc6d0ef3240c8ae6085f5124174b\n'}]",4,810112,863d645d7ef223a2534423e623fbc1c420c8557f,24,4,2,9708,,,0,"Reproduce bug story/2009237

Add a functional test that reproduces the bug that nested resource group
timeout value is increasing rapidly with every nesting level.

Story: 2009237
Task: 43373
Change-Id: I8e85434a5fb9cc6d0ef3240c8ae6085f5124174b
",git fetch https://review.opendev.org/openstack/heat refs/changes/12/810112/1 && git format-patch -1 --stdout FETCH_HEAD,['heat_integrationtests/functional/test_resource_group.py'],1,5a28a50613af78f3733720b7a70d1d36817b3b96,story/2009237," def test_create_nested_groups_with_timeout(self): parent_template = ''' heat_template_version: rocky resources: parent_group: type: OS::Heat::ResourceGroup update_policy: batch_create: { max_batch_size: 1, pause_time: 1 } properties: count: 2 resource_def: type: child.yaml ''' child_template = ''' heat_template_version: rocky resources: child_group: type: OS::Heat::ResourceGroup update_policy: batch_create: { max_batch_size: 1, pause_time: 1 } properties: count: 2 resource_def: type: value.yaml ''' value_template = ''' heat_template_version: rocky resources: value: type: OS::Heat::Value properties: type: string value: 'test' ''' files = { 'child.yaml': child_template, 'value.yaml': value_template, } stack_identifier = self.stack_create( template=parent_template, files=files, timeout=10, # in minutes ) resources = self.client.resources.list( stack_identifier, nested_depth=2, with_detail=True) timeouts = set() for res in resources: if res.resource_type == ""OS::Heat::ResourceGroup"": nested_stack = self.client.stacks.get(res.physical_resource_id) timeouts.add(nested_stack.timeout_mins) # FIXME(gibi): This is bug story/2009237 as the timeout calculation of # nested resource groups are broken. It is using seconds for the # calculation but then pass that to functions expecting timeouts in # minutes leading to increasing timeout value with each nesting level. self.assertEqual({35939, 599}, timeouts) # After the bug is fixed we expect timeouts less than the overall # timeout requested for the whole stack. # we have different timeouts due to different amount of pause time # accumulated from the nested stacks but it all less than the overall # requested timeout of 10 minutes # self.assertEqual({9, 8}, timeouts) ",,65,0
openstack%2Fpuppet-horizon~master~I90b19a4111e4496eb0e022fd8c7b9bba34b4d097,openstack/puppet-horizon,master,I90b19a4111e4496eb0e022fd8c7b9bba34b4d097,Add more tunables for heat-dashboard,MERGED,2021-11-01 04:33:18.000000000,2021-11-01 17:11:34.000000000,2021-11-01 17:09:54.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 04:33:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/c2294e02f51f993565bc79b0fb4158638ea0fc3b', 'message': 'Add more tunables for heat-dashboard\n\nChange-Id: I90b19a4111e4496eb0e022fd8c7b9bba34b4d097\n'}, {'number': 2, 'created': '2021-11-01 04:42:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/a527481a2dfa425bf2887f4c0ff41217c6e9b6a7', 'message': 'Add more tunables for heat-dashboard\n\nChange-Id: I90b19a4111e4496eb0e022fd8c7b9bba34b4d097\n'}, {'number': 3, 'created': '2021-11-01 05:13:50.000000000', 'files': ['releasenotes/notes/heat_template_generator-bc485a59c5e63b62.yaml', 'manifests/dashboards/heat.pp', 'templates/_1699_orchestration_settings.py.erb', 'spec/classes/horizon_dashboards_heat_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/ad87d13355c334be62a81a5d9b8eaec7e03e514c', 'message': 'Add more tunables for heat-dashboard\n\nChange-Id: I90b19a4111e4496eb0e022fd8c7b9bba34b4d097\n'}]",1,816112,ad87d13355c334be62a81a5d9b8eaec7e03e514c,12,3,3,9816,,,0,"Add more tunables for heat-dashboard

Change-Id: I90b19a4111e4496eb0e022fd8c7b9bba34b4d097
",git fetch https://review.opendev.org/openstack/puppet-horizon refs/changes/12/816112/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/heat_template_generator-bc485a59c5e63b62.yaml', 'manifests/dashboards/heat.pp', 'templates/_1699_orchestration_settings.py.erb', 'spec/classes/horizon_dashboards_heat_spec.rb']",4,c2294e02f51f993565bc79b0fb4158638ea0fc3b,," let(:pre_condition) do <<-eos class { 'horizon': secret_key => 'elj1IWiLoWHgcyYxFVLj7cM5rGOOxWl0', } end context 'with default parameters' do verify_concat_fragment_contents(catalogue, '_1699_orchestration_settings.py', [ ""HEAT_TEMPLATE_GENERATOR_API_TIMEOUT = 60"" ]) verify_concat_fragment_contents(catalogue, '_1699_orchestration_settings.py', [ ""HEAT_TEMPLATE_GENERATOR_API_PARALLEL = 2"" ]) it 'generates _1699_orchestration_settings.py' do end end context 'with template_generator parameters set' do before do params.merge!({ :template_generator_api_timeout => 120, :template_generator_api_parallel => 4, }) end it 'generates _1699_orchestration_settings.py' do verify_concat_fragment_contents(catalogue, '_1699_orchestration_settings.py', [ ""HEAT_TEMPLATE_GENERATOR_API_TIMEOUT = 120"" ]) verify_concat_fragment_contents(catalogue, '_1699_orchestration_settings.py', [ ""HEAT_TEMPLATE_GENERATOR_API_PARALLEL = 4"" ]) end"," context 'with default parameters' do let(:pre_condition) do <<-eos class { 'horizon': secret_key => 'elj1IWiLoWHgcyYxFVLj7cM5rGOOxWl0', } end let(:pre_condition) do <<-eos class { 'horizon': secret_key => 'elj1IWiLoWHgcyYxFVLj7cM5rGOOxWl0', } eos end it { }",54,22
openstack%2Fpuppet-placement~master~If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,openstack/puppet-placement,master,If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456,Tag the httpd service only when it is used,MERGED,2021-11-01 08:33:13.000000000,2021-11-01 17:11:12.000000000,2021-11-01 17:11:12.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 08:33:13.000000000', 'files': ['manifests/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-placement/commit/8475c1afed91ded3e393c1e2f41daf8c98b95bde', 'message': 'Tag the httpd service only when it is used\n\nCurrently the placement-service tag is always added to the httpd\nservice, but it should not if an independent service is used to run\nplacement-api.\n\nChange-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456\n'}]",1,816152,8475c1afed91ded3e393c1e2f41daf8c98b95bde,8,3,1,9816,,,0,"Tag the httpd service only when it is used

Currently the placement-service tag is always added to the httpd
service, but it should not if an independent service is used to run
placement-api.

Change-Id: If39b4cabadc2d7d5c33ef7ac2b56d6adfdcdf456
",git fetch https://review.opendev.org/openstack/puppet-placement refs/changes/52/816152/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/api.pp'],1,8475c1afed91ded3e393c1e2f41daf8c98b95bde,, Service <| title == 'httpd' |> { tag +> 'placement-service' }, Service <| title == 'httpd' |> { tag +> 'placement-service' },1,2
openstack%2Fpuppet-ironic~master~I95f48c60e181e21bc56270d5840d2450b5ec5c76,openstack/puppet-ironic,master,I95f48c60e181e21bc56270d5840d2450b5ec5c76,inspector: Add support for [DEFAULT] api_max_limit,MERGED,2021-10-30 01:41:43.000000000,2021-11-01 17:10:27.000000000,2021-11-01 17:09:08.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-30 01:41:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/1413efa70b6698ab7e77ff8c58a5bbad998e439f', 'message': 'inspector: Add support for [DEFAULT] api_max_limit\n\nChange-Id: I95f48c60e181e21bc56270d5840d2450b5ec5c76\n'}, {'number': 2, 'created': '2021-10-30 01:43:09.000000000', 'files': ['spec/classes/ironic_inspector_spec.rb', 'manifests/inspector.pp', 'releasenotes/notes/inspector-api_max_limit-f44c88a10276fcf6.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/fd7102cfba13514d07780ac52629e0a202fdff07', 'message': 'inspector: Add support for [DEFAULT] api_max_limit\n\nChange-Id: I95f48c60e181e21bc56270d5840d2450b5ec5c76\n'}]",0,816082,fd7102cfba13514d07780ac52629e0a202fdff07,11,3,2,9816,,,0,"inspector: Add support for [DEFAULT] api_max_limit

Change-Id: I95f48c60e181e21bc56270d5840d2450b5ec5c76
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/82/816082/2 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/ironic_inspector_spec.rb', 'manifests/inspector.pp', 'releasenotes/notes/inspector-api_max_limit-f44c88a10276fcf6.yaml']",3,1413efa70b6698ab7e77ff8c58a5bbad998e439f,api_max_limit,--- features: - | The new ``ironic::inspector::api_max_limit`` parameter has been added. ,,15,1
openstack%2Fpuppet-horizon~master~Ibaf9df6e8f504d52265d13ffb61b61282ff61094,openstack/puppet-horizon,master,Ibaf9df6e8f504d52265d13ffb61b61282ff61094,Remove invalid character from comment line,MERGED,2021-11-01 04:35:36.000000000,2021-11-01 17:09:57.000000000,2021-11-01 17:09:57.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 04:35:36.000000000', 'files': ['templates/local_settings.py.erb'], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/860eefd33de31585654efd0c09b24dea39d37961', 'message': 'Remove invalid character from comment line\n\nChange-Id: Ibaf9df6e8f504d52265d13ffb61b61282ff61094\n'}]",0,816113,860eefd33de31585654efd0c09b24dea39d37961,7,3,1,9816,,,0,"Remove invalid character from comment line

Change-Id: Ibaf9df6e8f504d52265d13ffb61b61282ff61094
",git fetch https://review.opendev.org/openstack/puppet-horizon refs/changes/13/816113/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/local_settings.py.erb'],1,860eefd33de31585654efd0c09b24dea39d37961,,#API_RESULT_PAGE_SIZE = 20,#API_RESULT_PAGE_SIZE = 20$,1,1
openstack%2Fpuppet-horizon~stable%2Fwallaby~Ibda1f705984426c3eeb6846e6df6ad2c6ccc5e7f,openstack/puppet-horizon,stable/wallaby,Ibda1f705984426c3eeb6846e6df6ad2c6ccc5e7f,Wallaby and older: Use 'UNSET' to remove heat dashboard parameters,MERGED,2021-11-01 01:22:03.000000000,2021-11-01 17:09:55.000000000,2021-11-01 17:09:55.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 01:22:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/a427e86ced56646eebd246f0fa3711fa0925a12a', 'message': ""Stable-only: Use 'UNSET' to remove heat dashboard parameters\n\nThe change 655e0df25e40b401d2daa5d673a416215ccd17b7 introduced\nthe logic to remove the enable_user_pass parameter from the root\nlocal_settings using 'undef' but it turned out we can't set any\nparameter to 'undef' using hieradata because setting undef results in\nusing the default, which is 'true'.\n\nThis introduces usage of 'UNSET', which can be defined using hieradata\nmechanism.\n\nChange-Id: Ibda1f705984426c3eeb6846e6df6ad2c6ccc5e7f\n""}, {'number': 2, 'created': '2021-11-01 01:22:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/90eb27e1f7ff0a104032be7c0199e1fa0f076d62', 'message': ""Wallaby and older: Use 'UNSET' to remove heat dashboard parameters\n\nThe change 655e0df25e40b401d2daa5d673a416215ccd17b7 introduced\nthe logic to remove the enable_user_pass parameter from the root\nlocal_settings using 'undef' but it turned out we can't set any\nparameter to 'undef' using hieradata because setting undef results in\nusing the default, which is 'true'.\n\nThis introduces usage of 'UNSET', which can be defined using hieradata\nmechanism.\n\nChange-Id: Ibda1f705984426c3eeb6846e6df6ad2c6ccc5e7f\n""}, {'number': 3, 'created': '2021-11-01 01:24:13.000000000', 'files': ['templates/local_settings.py.erb', 'manifests/dashboards/heat.pp', 'manifests/init.pp'], 'web_link': 'https://opendev.org/openstack/puppet-horizon/commit/8437bc4f341e8ec584c32bc50a1d9301b39ed1f1', 'message': ""Wallaby and older: Use 'UNSET' to remove heat dashboard parameters\n\nThe change 655e0df25e40b401d2daa5d673a416215ccd17b7 introduced\nthe logic to remove the enable_user_pass parameter from the root\nlocal_settings using 'undef' but it turned out we can't set any\nparameter to 'undef' using hieradata because setting undef results in\nusing the default, which is 'true'.\n\nThis introduces usage of 'UNSET', which can be defined using hieradata\nmechanism.\n\nChange-Id: Ibda1f705984426c3eeb6846e6df6ad2c6ccc5e7f\n""}]",0,816108,8437bc4f341e8ec584c32bc50a1d9301b39ed1f1,10,3,3,9816,,,0,"Wallaby and older: Use 'UNSET' to remove heat dashboard parameters

The change 655e0df25e40b401d2daa5d673a416215ccd17b7 introduced
the logic to remove the enable_user_pass parameter from the root
local_settings using 'undef' but it turned out we can't set any
parameter to 'undef' using hieradata because setting undef results in
using the default, which is 'true'.

This introduces usage of 'UNSET', which can be defined using hieradata
mechanism.

Change-Id: Ibda1f705984426c3eeb6846e6df6ad2c6ccc5e7f
",git fetch https://review.opendev.org/openstack/puppet-horizon refs/changes/08/816108/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/dashboards/heat.pp', 'templates/local_settings.py.erb']",2,a427e86ced56646eebd246f0fa3711fa0925a12a,puppet-horizon-dashboards,<%- if ! (@enable_user_pass.nil? or @enable_user_pass == 'UNSET') -%>,<%- if ! (@enable_user_pass.nil?) -%>,5,3
openstack%2Fpuppet-keystone~master~I852f242f83c6409e15abbf5e46eaefad1d14b0b8,openstack/puppet-keystone,master,I852f242f83c6409e15abbf5e46eaefad1d14b0b8,Accept an array for service_token_roles,MERGED,2021-11-01 10:58:00.000000000,2021-11-01 17:02:28.000000000,2021-11-01 17:02:28.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 10:58:00.000000000', 'files': ['manifests/resource/authtoken.pp', 'spec/defines/keystone_resource_authtoken_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/e88af3efa85dfdb3db86853f653423ff99ee769f', 'message': 'Accept an array for service_token_roles\n\n... because the parameter is defined as a ListOpt which represents\na list value.\n\nChange-Id: I852f242f83c6409e15abbf5e46eaefad1d14b0b8\n'}]",0,816162,e88af3efa85dfdb3db86853f653423ff99ee769f,7,3,1,9816,,,0,"Accept an array for service_token_roles

... because the parameter is defined as a ListOpt which represents
a list value.

Change-Id: I852f242f83c6409e15abbf5e46eaefad1d14b0b8
",git fetch https://review.opendev.org/openstack/puppet-keystone refs/changes/62/816162/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/resource/authtoken.pp', 'spec/defines/keystone_resource_authtoken_spec.rb']",2,e88af3efa85dfdb3db86853f653423ff99ee769f,roles-array," context 'when service_token_roles is an array' do before do params.merge!({ :service_token_roles => ['service', 'alt_service'] }) it { is_expected.to contain_keystone_config('service_token_roles').with_value('service,alt_service') } end end",,10,1
openstack%2Fpuppet-swift~master~I987a37cb0606b6c217f906fbae17a765e40f4580,openstack/puppet-swift,master,I987a37cb0606b6c217f906fbae17a765e40f4580,Fix missing argument of builder_file_path,MERGED,2021-11-01 07:45:20.000000000,2021-11-01 17:00:34.000000000,2021-11-01 17:00:34.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 07:45:20.000000000', 'files': ['lib/puppet/provider/swift_ring_builder.rb'], 'web_link': 'https://opendev.org/openstack/puppet-swift/commit/350778570c04db749a61106f173419b25fd7494f', 'message': 'Fix missing argument of builder_file_path\n\nThe change 63688a14e57282ae97072b406c81d0da2f61965c introduced support\nof storage policies and since the change was merged builder_file_path\ntakes one argument which is policy_index .\n\nThis change fixes the function call without argument to avoid failure\ncaused by missing argument.\n\nCloses-Bug: #1949334\nChange-Id: I987a37cb0606b6c217f906fbae17a765e40f4580\n'}]",0,816126,350778570c04db749a61106f173419b25fd7494f,7,3,1,9816,,,0,"Fix missing argument of builder_file_path

The change 63688a14e57282ae97072b406c81d0da2f61965c introduced support
of storage policies and since the change was merged builder_file_path
takes one argument which is policy_index .

This change fixes the function call without argument to avoid failure
caused by missing argument.

Closes-Bug: #1949334
Change-Id: I987a37cb0606b6c217f906fbae17a765e40f4580
",git fetch https://review.opendev.org/openstack/puppet-swift refs/changes/26/816126/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/puppet/provider/swift_ring_builder.rb'],1,350778570c04db749a61106f173419b25fd7494f,bug/1949334," builder_file_path(policy_index), builder_file_path(policy_index),"," builder_file_path, builder_file_path,",2,2
openstack%2Fpuppet-ironic~master~I892278b76a0369d632f228ee80b45074dc81d4f0,openstack/puppet-ironic,master,I892278b76a0369d632f228ee80b45074dc81d4f0,Add support for [DEFAULT] my_ipv6,MERGED,2021-10-30 01:28:35.000000000,2021-11-01 16:59:44.000000000,2021-11-01 16:58:24.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-30 01:28:35.000000000', 'files': ['spec/classes/ironic_init_spec.rb', 'releasenotes/notes/my_ipv6-286fc6e1650fd54e.yaml', 'manifests/init.pp'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/ab8f8baa4a690feec8c7cc8f53eca03f7225c874', 'message': 'Add support for [DEFAULT] my_ipv6\n\nChange-Id: I892278b76a0369d632f228ee80b45074dc81d4f0\n'}]",0,816081,ab8f8baa4a690feec8c7cc8f53eca03f7225c874,8,3,1,9816,,,0,"Add support for [DEFAULT] my_ipv6

Change-Id: I892278b76a0369d632f228ee80b45074dc81d4f0
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/81/816081/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/ironic_init_spec.rb', 'releasenotes/notes/my_ipv6-286fc6e1650fd54e.yaml', 'manifests/init.pp']",3,ab8f8baa4a690feec8c7cc8f53eca03f7225c874,my_ipv6,"# [*my_ipv6*] # (optional) IP address of this host using IPv6. # Defaults to $::os_service_default. # $my_ipv6 = $::os_service_default, 'DEFAULT/my_ipv6': value => $my_ipv6;",,11,0
openstack%2Fpuppet-zaqar~master~Idb0eaff24e84121e0c78daf659d5b9f861491faa,openstack/puppet-zaqar,master,Idb0eaff24e84121e0c78daf659d5b9f861491faa,Avoid conflicting management of zaqar.conf,MERGED,2021-11-01 00:55:05.000000000,2021-11-01 16:57:55.000000000,2021-11-01 16:57:55.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 00:55:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-zaqar/commit/c4949ebdfbf01013289145260dcb861e1cf78434', 'message': ""Avoid conflicting management of zaqar.conf\n\nThe zaqar::server_instance resource type allows setting up multiple\ninstances of zaqar-server by creating /etc/zaqar/{name}.conf .\nCurrently there is no validation about the name and if it can be set to\n'zaqar' which results in conflicting management of zaqar.conf .\n\nThis change introduces a simple validation logic to make sure that\nthe resource type uses a config file different from the base\nzaqar.conf .\n\nChange-Id: Idb0eaff24e84121e0c78daf659d5b9f861491faa\n""}, {'number': 2, 'created': '2021-11-01 00:59:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-zaqar/commit/4c9984dd03402a26beaa1fea9cfc73e85c6fcb65', 'message': ""Avoid conflicting management of zaqar.conf\n\nThe zaqar::server_instance resource type allows setting up multiple\ninstances of zaqar-server by creating /etc/zaqar/{name}.conf .\nCurrently there is no validation about the name and if it can be set to\n'zaqar' which results in conflicting management of zaqar.conf .\n\nThis change introduces a simple validation logic to make sure that\nthe resource type uses a config file different from the base\nzaqar.conf .\n\nChange-Id: Idb0eaff24e84121e0c78daf659d5b9f861491faa\n""}, {'number': 3, 'created': '2021-11-01 03:04:40.000000000', 'files': ['spec/defines/zaqar_server_instance_spec.rb', 'manifests/server_instance.pp'], 'web_link': 'https://opendev.org/openstack/puppet-zaqar/commit/0e7c4f0efe3a767eb5446cdb58bd4e941cfe6d15', 'message': ""Avoid conflicting management of zaqar.conf\n\nThe zaqar::server_instance resource type allows setting up multiple\ninstances of zaqar-server by creating /etc/zaqar/{name}.conf .\nCurrently there is no validation about the name and if it can be set to\n'zaqar' which results in conflicting management of zaqar.conf .\n\nThis change introduces a simple validation logic to make sure that\nthe resource type uses a config file different from the base\nzaqar.conf .\n\nChange-Id: Idb0eaff24e84121e0c78daf659d5b9f861491faa\n""}]",0,816106,0e7c4f0efe3a767eb5446cdb58bd4e941cfe6d15,10,3,3,9816,,,0,"Avoid conflicting management of zaqar.conf

The zaqar::server_instance resource type allows setting up multiple
instances of zaqar-server by creating /etc/zaqar/{name}.conf .
Currently there is no validation about the name and if it can be set to
'zaqar' which results in conflicting management of zaqar.conf .

This change introduces a simple validation logic to make sure that
the resource type uses a config file different from the base
zaqar.conf .

Change-Id: Idb0eaff24e84121e0c78daf659d5b9f861491faa
",git fetch https://review.opendev.org/openstack/puppet-zaqar refs/changes/06/816106/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/server_instance.pp'],1,c4949ebdfbf01013289145260dcb861e1cf78434,server_instance-name, if $name == 'zaqar' { fail('The name should not be \'zaqar\'. Please use a different name') } ,,4,0
openstack%2Fpuppet-nova~master~Id9bf2ee0d7d6f153a1142c14f1ae9f6aad6441cc,openstack/puppet-nova,master,Id9bf2ee0d7d6f153a1142c14f1ae9f6aad6441cc,Accept an array value for valid_interfaces,MERGED,2021-11-01 10:38:36.000000000,2021-11-01 16:56:29.000000000,2021-11-01 16:56:29.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 10:38:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-nova/commit/fc44ab87c175670fbccb53d4bcb7f5ac17df2a33', 'message': 'Accept array value for [placement] valid_interfaces\n\nThe [placement] valid_interfaces parameter is defined as a ListOpt\nwhich accepts a comma-separated string which represents a list.\n\nThis change allows passing array value in addition to string value\nso that the list can be defined more flexibly.\n\nChange-Id: Id9bf2ee0d7d6f153a1142c14f1ae9f6aad6441cc\n'}, {'number': 2, 'created': '2021-11-01 10:51:24.000000000', 'files': ['spec/classes/nova_network_neutron_spec.rb', 'manifests/placement.pp', 'spec/classes/nova_placement_spec.rb', 'manifests/network/neutron.pp'], 'web_link': 'https://opendev.org/openstack/puppet-nova/commit/ef1c8081950460e952f609741f65de14253b7025', 'message': 'Accept an array value for valid_interfaces\n\nThe valid_interfaces parameter is defined as a ListOpt and accepts\na string value which represents a list.\nThis change allows passing an array value in addition to a string value\nso that the list can be defined more flexibly.\n\nChange-Id: Id9bf2ee0d7d6f153a1142c14f1ae9f6aad6441cc\n'}]",0,816159,ef1c8081950460e952f609741f65de14253b7025,12,3,2,9816,,,0,"Accept an array value for valid_interfaces

The valid_interfaces parameter is defined as a ListOpt and accepts
a string value which represents a list.
This change allows passing an array value in addition to a string value
so that the list can be defined more flexibly.

Change-Id: Id9bf2ee0d7d6f153a1142c14f1ae9f6aad6441cc
",git fetch https://review.opendev.org/openstack/puppet-nova refs/changes/59/816159/2 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/placement.pp', 'spec/classes/nova_placement_spec.rb']",2,fc44ab87c175670fbccb53d4bcb7f5ac17df2a33,valid_interfaces," :valid_interfaces => 'internal,public', context 'when valid_interfaces is an array' do before do params.merge!( :valid_interfaces => ['internal', 'public'] ) end it 'configures the valid_interfaces parameter with a commma-separated string' do is_expected.to contain_nova_config('placement/valid_interfaces').with_value('internal,public') end end"," :valid_interfaces => 'internal',",14,2
openstack%2Fopenstack-helm~master~If4f30252b5d839cfe517ee57cbef96e7775e7ec5,openstack/openstack-helm,master,If4f30252b5d839cfe517ee57cbef96e7775e7ec5,Update default image references,MERGED,2021-10-22 22:24:23.000000000,2021-11-01 16:55:09.000000000,2021-11-01 16:48:36.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 22348}, {'_account_id': 30449}]","[{'number': 1, 'created': '2021-10-22 22:24:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/3898f0d2cc32d38aeb4dba47de38de94b7bb15cf', 'message': 'Update default image references\n\nThis change updates the image references in the keystone chart\nto the latest supported releases of both openstack and ubuntu.\n\nChange-Id: If4f30252b5d839cfe517ee57cbef96e7775e7ec5\n'}, {'number': 2, 'created': '2021-10-23 05:37:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/93467a3203d2dd97600a8a0892e72385805b77de', 'message': 'Update default image references\n\nThis change updates the image references in the keystone chart\nto the latest supported releases of both openstack and ubuntu.\n\nChange-Id: If4f30252b5d839cfe517ee57cbef96e7775e7ec5\n'}, {'number': 3, 'created': '2021-10-28 18:14:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/fb7965cc0fec842ef2e83b494a4f21e5c1b35340', 'message': 'Update default image references\n\nThis change updates the image references in the keystone chart\nto the latest supported releases of both openstack and ubuntu.\n\nChange-Id: If4f30252b5d839cfe517ee57cbef96e7775e7ec5\n'}, {'number': 4, 'created': '2021-10-28 18:15:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b113c3fca4821237e5760bcce83eea9153354cd2', 'message': 'Update default image references\n\nThis change updates the image references in the keystone chart\nto the latest supported releases of both openstack and ubuntu.\n\nChange-Id: If4f30252b5d839cfe517ee57cbef96e7775e7ec5\n'}, {'number': 5, 'created': '2021-10-28 18:15:38.000000000', 'files': ['releasenotes/notes/keystone.yaml', 'keystone/values.yaml', 'keystone/Chart.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9a89037615a1816643a26a50f41c634ea67550c1', 'message': 'Update default image references\n\nThis change updates the image references in the keystone chart\nto the latest supported releases of both openstack and ubuntu.\n\nChange-Id: If4f30252b5d839cfe517ee57cbef96e7775e7ec5\n'}]",1,815161,9a89037615a1816643a26a50f41c634ea67550c1,18,4,5,21420,,,0,"Update default image references

This change updates the image references in the keystone chart
to the latest supported releases of both openstack and ubuntu.

Change-Id: If4f30252b5d839cfe517ee57cbef96e7775e7ec5
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/61/815161/4 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/keystone.yaml', 'keystone/values.yaml', 'keystone/Chart.yaml']",3,3898f0d2cc32d38aeb4dba47de38de94b7bb15cf,keystone-update,version: 0.2.16,version: 0.2.15,14,13
openstack%2Fopenstack-helm-infra~master~I164d0aa03f420cf263832e31c30807e9fccd8495,openstack/openstack-helm-infra,master,I164d0aa03f420cf263832e31c30807e9fccd8495,Add gate script to deploy kubernetes using kubeadm.,MERGED,2021-10-18 16:20:15.000000000,2021-11-01 16:54:17.000000000,2021-11-01 16:45:23.000000000,"[{'_account_id': 8898}, {'_account_id': 21420}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-18 16:20:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5d05530b3bb6d04599a28480874f5570f2b45a88', 'message': 'Add gate script to deploy kubernetes using kubeadm.\n\nChange-Id: I164d0aa03f420cf263832e31c30807e9fccd8495\n'}, {'number': 2, 'created': '2021-10-29 01:05:29.000000000', 'files': ['tools/gate/deploy-k8s-kubeadm.sh', 'zuul.d/project.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6c044362d9dde4a0bb540fb9e4af6bc280036955', 'message': 'Add gate script to deploy kubernetes using kubeadm.\n\nChange-Id: I164d0aa03f420cf263832e31c30807e9fccd8495\n'}]",1,814445,6c044362d9dde4a0bb540fb9e4af6bc280036955,12,3,2,24780,,,0,"Add gate script to deploy kubernetes using kubeadm.

Change-Id: I164d0aa03f420cf263832e31c30807e9fccd8495
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/45/814445/2 && git format-patch -1 --stdout FETCH_HEAD,"['tools/gate/deploy-k8s-kubeadm.sh', 'zuul.d/project.yaml', 'zuul.d/jobs.yaml']",3,5d05530b3bb6d04599a28480874f5570f2b45a88,, name: openstack-helm-infra-deploy-kubeadm parent: openstack-helm-infra-functional timeout: 7200 roles: - zuul: zuul/zuul-jobs pre-run: playbooks/osh-infra-upgrade-host.yaml post-run: playbooks/osh-infra-collect-logs.yaml nodeset: openstack-helm-single-node vars: osh_params: openstack_release: train container_distro_name: ubuntu container_distro_version: bionic gate_scripts_relative_path: ../openstack-helm-infra gate_scripts: - ./tools/deployment/common/000-install-packages.sh - ./tools/gate/deploy-k8s-kubeadm.sh - job:,,248,0
openstack%2Fopenstack-helm~master~If741db5997a27ed06584b9af2d50485d8de34a2b,openstack/openstack-helm,master,If741db5997a27ed06584b9af2d50485d8de34a2b,Move check jobs to use helm3,MERGED,2021-09-30 21:40:23.000000000,2021-11-01 16:53:55.000000000,2021-11-01 16:48:33.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 22348}, {'_account_id': 30449}, {'_account_id': 33519}]","[{'number': 1, 'created': '2021-09-30 21:40:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b841ec108f0a12413289526c4f27bf917bce2e14', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 2, 'created': '2021-09-30 22:12:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/365d535b355faf1313a6be2041bf73d7a87183e1', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812040\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 3, 'created': '2021-09-30 22:16:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f08abb5e84e6ac355b48e19c7e8707577e50044a', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 4, 'created': '2021-09-30 22:53:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/8b041b29bbc5a833521fb43690da55dfcde959d7', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 5, 'created': '2021-10-01 00:17:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/3cae8c9ba64cf8f7e0404d55f65d2dbdd917f294', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812091\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 6, 'created': '2021-10-01 17:50:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/ac6a48bd36da2172b9a509d0c40040c1834f5778', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812091\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 7, 'created': '2021-10-01 18:14:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a6e982fa90d57b111eaa11c2e71e1d3375fd5cbf', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812091\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 8, 'created': '2021-10-03 00:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/56dba165abe55561d632a52bc5e798310da5b1cd', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812091\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 9, 'created': '2021-10-05 20:21:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b6762178b16933f84b1a1f05ad1277c4fd967754', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812091\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 10, 'created': '2021-10-06 23:50:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/0d67ff028ca3beb4372ad6e03b641ecccbcab83f', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 11, 'created': '2021-10-07 14:47:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f4f11903e5662e97b2791ff08737a85b7a82ec7e', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 12, 'created': '2021-10-08 15:42:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/079d907f62daf7daf00c8f2b4109c2ade89bda21', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 13, 'created': '2021-10-08 16:39:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/274cb097d1a4479c55e794f0b61fc46033e16098', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 14, 'created': '2021-10-08 17:40:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a52ba6ee8af6a65ea14e6e10e2f0c25eba0a65b6', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 15, 'created': '2021-10-08 18:49:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d277be6405895277434922a86f5082399c0a347b', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 16, 'created': '2021-10-08 19:30:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b662b5bf27265493a4242238eba98109acb1ae78', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 17, 'created': '2021-10-08 20:47:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a0876ba58787a45b0784b2537d7ff6bfa583cbeb', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 18, 'created': '2021-10-10 23:51:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/38476bc985a0f82e82146fc484e361b6c124d9b3', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 19, 'created': '2021-10-10 23:52:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/98081cd04e1890287a516e2aca8d8f35d9e873d2', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/807944\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/813315\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/813313\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 20, 'created': '2021-10-14 01:26:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9365f43af111d8c47fa9ebbf95d335de756e028f', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 21, 'created': '2021-10-14 01:26:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/dedc2331fc9c0dae7a72b00c6164837a32327369', 'message': 'WIP - Move compute-kit jobs to use helm3\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 22, 'created': '2021-10-19 23:04:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/403f313369ab15e9c5eec4f20f197e2765d273ad', 'message': 'WIP - Move check jobs to use helm3\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 23, 'created': '2021-10-20 00:25:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/ee322c93683e163b5fdcfd60e191b61beeff6280', 'message': 'WIP - Move check jobs to use helm3\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 24, 'created': '2021-10-20 14:37:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/c707c65f25b0608902a0c7eaeb0d75f08b259108', 'message': 'WIP - Move check jobs to use helm3\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 25, 'created': '2021-10-20 16:15:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9b7612cfc31693cedc9ff71f08b49a827c761a8b', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 26, 'created': '2021-10-22 18:50:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/26823ecb2bc2896da9c18f57caded7c0317ed365', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 27, 'created': '2021-10-22 19:48:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a6cad29bbf0afbf5f65d656a4b6e697d7ebeae44', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 28, 'created': '2021-10-22 21:58:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/e95090c96f57a173722c9342c1ed2e46e371c4d7', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 29, 'created': '2021-10-25 20:40:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/6926f90cebf144d571581ea40c246568873e5a63', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 30, 'created': '2021-10-25 20:45:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/3b33c99539ed765ffcfdffb2fb8a73abb6eaca52', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 31, 'created': '2021-10-25 20:46:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/e0efb2dce755b4696711d5a3392461f96b2cdc41', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 32, 'created': '2021-10-25 20:46:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f2037e8a918f8f0c8960c42e803ddeb1d1ee1ef4', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 33, 'created': '2021-10-25 20:46:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/0c06b7ba157041204c92529697f97b4407bef3d1', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 34, 'created': '2021-10-25 22:00:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/6c7c8c84b5a3285880099d13a7e04123e2da8184', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 35, 'created': '2021-10-25 22:38:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/98d2013d7acb9b736373b78947b97633921711a1', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815159\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 36, 'created': '2021-10-28 23:28:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/c01c19c4fa9a13c90df6c65c9358fd63bddd345b', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815918\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 37, 'created': '2021-10-28 23:28:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/16c1de99278d766dd03741ad3151029339ac14d5', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm/+/815918\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}, {'number': 38, 'created': '2021-10-29 19:41:25.000000000', 'files': ['tools/deployment/component/glance/glance.sh', 'tools/gate/deploy-k8s.sh', 'tools/deployment/component/horizon/horizon.sh', 'zuul.d/jobs-openstack-helm.yaml', 'tools/deployment/component/cinder/cinder.sh', 'tools/deployment/common/run-helm-tests.sh', 'tools/scripts/tls/cert-manager.sh'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/7034968d967ceae1dc46f5ad09238b6d720641c3', 'message': 'Move check jobs to use helm3\n\nThis change migrates the check jobs in OSH to use the\nnew helm v3 script when deploying kubernetes via\nminikube.\n\nThis is one step in the move to helm v3. Future changes\nwill migrate the other jobs.\n\nChange-Id: If741db5997a27ed06584b9af2d50485d8de34a2b\n'}]",2,812031,7034968d967ceae1dc46f5ad09238b6d720641c3,103,5,38,21420,,,0,"Move check jobs to use helm3

This change migrates the check jobs in OSH to use the
new helm v3 script when deploying kubernetes via
minikube.

This is one step in the move to helm v3. Future changes
will migrate the other jobs.

Change-Id: If741db5997a27ed06584b9af2d50485d8de34a2b
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/31/812031/11 && git format-patch -1 --stdout FETCH_HEAD,"['tools/deployment/component/compute-kit/openvswitch.sh', 'tools/deployment/component/glance/glance.sh', 'tools/gate/deploy-k8s.sh', 'tools/deployment/component/common/memcached.sh', 'tools/deployment/component/compute-kit/libvirt.sh', 'tools/deployment/component/common/mariadb.sh', 'tools/deployment/component/common/rabbitmq.sh', 'tools/deployment/component/common/ingress.sh', 'zuul.d/jobs-openstack-helm.yaml', 'tools/deployment/component/nfs-provisioner/nfs-provisioner.sh']",10,b841ec108f0a12413289526c4f27bf917bce2e14,helm3,, #NOTE: Display info helm status nfs-provisioner,23,34
openstack%2Fpuppet-designate~master~I528fdfe72f4c094695128186d43675480c163c8a,openstack/puppet-designate,master,I528fdfe72f4c094695128186d43675480c163c8a,Allow customizing separator for api-paste.ini,MERGED,2021-11-01 13:05:06.000000000,2021-11-01 16:53:15.000000000,2021-11-01 16:48:30.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 13:05:06.000000000', 'files': ['releasenotes/notes/api_paste_ini-separator-37a236e86008d645.yaml', 'lib/puppet/type/designate_api_paste_ini.rb'], 'web_link': 'https://opendev.org/openstack/puppet-designate/commit/2e4b2c046bf3b9c5a4306e03f547ec14d025c579', 'message': 'Allow customizing separator for api-paste.ini\n\nThe api-paste.ini accepts not only ""="" but also "":"" and some services\nlike Barbican have been using "":"" for their default api-paste.ini\nfiles.\n\n[composite:main]\nuse = egg:Paste#urlmap\n/: barbican_version\n/v1: barbican-api-keystone\n\nThis change allows users to use "":"" so that they can update the ini\nfiles with keeping it consistent with the default fules\n\nDepends-on: https://review.opendev.org/813614\nChange-Id: I528fdfe72f4c094695128186d43675480c163c8a\n'}]",0,816169,2e4b2c046bf3b9c5a4306e03f547ec14d025c579,8,3,1,9816,,,0,"Allow customizing separator for api-paste.ini

The api-paste.ini accepts not only ""="" but also "":"" and some services
like Barbican have been using "":"" for their default api-paste.ini
files.

[composite:main]
use = egg:Paste#urlmap
/: barbican_version
/v1: barbican-api-keystone

This change allows users to use "":"" so that they can update the ini
files with keeping it consistent with the default fules

Depends-on: https://review.opendev.org/813614
Change-Id: I528fdfe72f4c094695128186d43675480c163c8a
",git fetch https://review.opendev.org/openstack/puppet-designate refs/changes/69/816169/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/api_paste_ini-separator-37a236e86008d645.yaml', 'lib/puppet/type/designate_api_paste_ini.rb']",2,2e4b2c046bf3b9c5a4306e03f547ec14d025c579,paste-ini-sep, newparam(:key_val_separator) do desc 'The separator string to use between each setting name and value.' defaultto('=') end ,,10,0
openstack%2Fopenstack-helm-infra~master~Ic8eb628e21c49957bdcd10a8d69d850ec921b6d6,openstack/openstack-helm-infra,master,Ic8eb628e21c49957bdcd10a8d69d850ec921b6d6,Remove fedora and centos jobs,MERGED,2021-10-28 23:58:57.000000000,2021-11-01 16:52:57.000000000,2021-11-01 16:45:21.000000000,"[{'_account_id': 8898}, {'_account_id': 22348}, {'_account_id': 33519}]","[{'number': 1, 'created': '2021-10-28 23:58:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9850bd39df367688ff41ce91bf1638fbccf09f24', 'message': 'Remove fedora and centos jobs\n\nThe fedora and centos jobs have not been used or maintained for\nquite some time. This change removes them and the related notes.\n\nAlso removed an outdate note about disabling all the experimental\nand periodic jobs.\n\nChange-Id: Ic8eb628e21c49957bdcd10a8d69d850ec921b6d6\n'}, {'number': 2, 'created': '2021-11-01 00:48:27.000000000', 'files': ['zuul.d/project.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/57c452154ef234555ace0b431ca1cb5f5ba607cc', 'message': 'Remove fedora and centos jobs\n\nThe fedora and centos jobs have not been used or maintained for\nquite some time. This change removes them and the related notes.\n\nAlso removed an outdate note about disabling all the experimental\nand periodic jobs.\n\nChange-Id: Ic8eb628e21c49957bdcd10a8d69d850ec921b6d6\n'}]",0,815922,57c452154ef234555ace0b431ca1cb5f5ba607cc,11,3,2,21420,,,0,"Remove fedora and centos jobs

The fedora and centos jobs have not been used or maintained for
quite some time. This change removes them and the related notes.

Also removed an outdate note about disabling all the experimental
and periodic jobs.

Change-Id: Ic8eb628e21c49957bdcd10a8d69d850ec921b6d6
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/22/815922/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'zuul.d/jobs.yaml']",2,9850bd39df367688ff41ce91bf1638fbccf09f24,job-cleanup,, name: openstack-helm-infra-centos parent: openstack-helm-infra nodeset: openstack-helm-centos - job: name: openstack-helm-infra-fedora parent: openstack-helm-infra nodeset: openstack-helm-fedora - job: name: openstack-helm-infra-five-centos parent: openstack-helm-infra nodeset: openstack-helm-five-node-centos - job: name: openstack-helm-infra-five-fedora parent: openstack-helm-infra nodeset: openstack-helm-five-node-fedora - job:,0,26
openstack%2Fpython-ironicclient~master~I425546c6cb911f1eb0946d58826507116b01e36b,openstack/python-ironicclient,master,I425546c6cb911f1eb0946d58826507116b01e36b,Fix references to ironicclient classes and methods,MERGED,2018-10-04 10:05:32.000000000,2021-11-01 16:30:35.000000000,2021-11-01 16:29:01.000000000,"[{'_account_id': 6618}, {'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 24828}]","[{'number': 1, 'created': '2018-10-04 10:05:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironicclient/commit/957617bcc51bfb138f0802e7408cd15591756097', 'message': 'Fix reference to the ClientException base class\n\nThis patch also fixes a few other broken links.\n\nChange-Id: I425546c6cb911f1eb0946d58826507116b01e36b\n'}, {'number': 2, 'created': '2021-10-18 13:39:44.000000000', 'files': ['doc/source/api_v1.rst'], 'web_link': 'https://opendev.org/openstack/python-ironicclient/commit/e76c43b86ddc7dbef10a109cee9dcab67afc2fc6', 'message': 'Fix references to ironicclient classes and methods\n\nAll links to classes and methods in this page were returning 404s. Use\n:py:class: and :py:meth: to generate correct links instead.\n\nChange-Id: I425546c6cb911f1eb0946d58826507116b01e36b\n'}]",3,607878,e76c43b86ddc7dbef10a109cee9dcab67afc2fc6,12,4,2,15197,,,0,"Fix references to ironicclient classes and methods

All links to classes and methods in this page were returning 404s. Use
:py:class: and :py:meth: to generate correct links instead.

Change-Id: I425546c6cb911f1eb0946d58826507116b01e36b
",git fetch https://review.opendev.org/openstack/python-ironicclient refs/changes/78/607878/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/api_v1.rst'],1,957617bcc51bfb138f0802e7408cd15591756097,docfix,"When the `Client`_ needs to propagate an exception, it will usually raise an instance subclassed from `ironicclient.common.apiclient.exceptions.ClientException`_... _ironicclient.v1.node: reference/api/ironicclient.v1.node.html#ironicclient.v1.node.Node .. _ironicclient.v1.client.Client: reference/api/ironicclient.v1.client.html#ironicclient.v1.client.Client .. _Client: reference/api/ironicclient.v1.client.html#ironicclient.v1.client.Client .. _ironicclient.client.get_client(): reference/api/ironicclient.client.html#ironicclient.client.get_client .. _ironicclient.common.apiclient.exceptions.ClientException: reference/api/ironicclient.common.apiclient.exceptions.html#ironicclient.common.apiclient.exceptions.ClientException","When the `Client`_ needs to propagate an exception, it will usually raise an instance subclassed from `ironicclient.exc.BaseException`_ or `ironicclient.exc.ClientException`_... _ironicclient.v1.node: api/ironicclient.v1.node.html#ironicclient.v1.node.Node .. _ironicclient.v1.client.Client: api/ironicclient.v1.client.html#ironicclient.v1.client.Client .. _Client: api/ironicclient.v1.client.html#ironicclient.v1.client.Client .. _ironicclient.client.get_client(): api/ironicclient.client.html#ironicclient.client.get_client .. _ironicclient.exc.BaseException: api/ironicclient.exc.html#ironicclient.exc.BaseException .. _ironicclient.exc.ClientException: api/ironicclient.exc.html#ironicclient.exc.ClientException",8,9
openstack%2Fpuppet-vswitch~master~Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3,openstack/puppet-vswitch,master,Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3,Do not use service resource to restart openvswitch service,MERGED,2021-10-14 08:29:30.000000000,2021-11-01 16:28:17.000000000,2021-11-01 16:28:17.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-10-14 08:29:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-vswitch/commit/c7ad1d8becb1da5f1c9c83cadef15d7495aa91e9', 'message': 'Do not use service resource to restart openvswitch service\n\nChange-Id: Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3\n'}, {'number': 2, 'created': '2021-10-14 08:31:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-vswitch/commit/13de192f306ba36bc21a225b164728dd79dfb24a', 'message': 'Do not use service resource to restart openvswitch service\n\nChange-Id: Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3\n'}, {'number': 3, 'created': '2021-10-14 15:04:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-vswitch/commit/62b1e043ed5a931ef367d16f1ae83efb6f3bad4b', 'message': 'Do not use service resource to restart openvswitch service\n\nChange-Id: Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3\n'}, {'number': 4, 'created': '2021-10-15 14:40:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-vswitch/commit/e8e82e8eb27da7cb68aeff0f914fab0174ce4a24', 'message': 'Do not use service resource to restart openvswitch service\n\nChange-Id: Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3\n'}, {'number': 5, 'created': '2021-10-17 23:37:29.000000000', 'files': ['lib/puppet/type/vs_config.rb', 'spec/classes/vswitch_dpdk_spec.rb', 'manifests/ovs.pp', 'spec/classes/vswitch_ovs_spec.rb', 'manifests/dpdk.pp'], 'web_link': 'https://opendev.org/openstack/puppet-vswitch/commit/1fe71cf5e359c8f83f11b2673620be822423bf47', 'message': 'Do not use service resource to restart openvswitch service\n\nCloses-Bug: #1946985\nChange-Id: Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3\n'}]",14,813964,1fe71cf5e359c8f83f11b2673620be822423bf47,28,4,5,9816,,,0,"Do not use service resource to restart openvswitch service

Closes-Bug: #1946985
Change-Id: Idac29b0ea6794a52ae9146da8105ebbaf65ee9a3
",git fetch https://review.opendev.org/openstack/puppet-vswitch refs/changes/64/813964/2 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/ovs.pp', 'manifests/dpdk.pp']",2,c7ad1d8becb1da5f1c9c83cadef15d7495aa91e9,bug/1946985," value => ""${vlan_limit}"", notify => Exec['restart openvswitch'], wait => true, } # Service['openvswitch'] can't be used directly to avoid circular # dependency. exec { 'restart openvswitch': path => ['/sbin', '/usr/sbin', '/bin', '/usr/bin'], command => 'systemctl -q restart openvswitch.service', refreshonly => true,"," value => 'true', wait => true,",20,4
openstack%2Fpuppet-gnocchi~master~I9d0900b90fa0f5bb6636a9f722c2e1f5d336ad98,openstack/puppet-gnocchi,master,I9d0900b90fa0f5bb6636a9f722c2e1f5d336ad98,Clean up the deprecated manage_cradox parameter,MERGED,2021-10-30 00:44:39.000000000,2021-11-01 16:20:47.000000000,2021-11-01 16:18:06.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-30 00:44:39.000000000', 'files': ['releasenotes/notes/remove-manage-cradox-72d292874c5fb286.yaml', 'manifests/storage/ceph.pp'], 'web_link': 'https://opendev.org/openstack/puppet-gnocchi/commit/424c229d4fc050bd750d39d3e57ca8b365299eb8', 'message': 'Clean up the deprecated manage_cradox parameter\n\n... because it was deprecated during the Xena cycle[1].\n\n[1] 3591bd8acc1ac49feb2f0fa33a45a09e94e08407\n\nChange-Id: I9d0900b90fa0f5bb6636a9f722c2e1f5d336ad98\n'}]",0,816079,424c229d4fc050bd750d39d3e57ca8b365299eb8,8,3,1,9816,,,0,"Clean up the deprecated manage_cradox parameter

... because it was deprecated during the Xena cycle[1].

[1] 3591bd8acc1ac49feb2f0fa33a45a09e94e08407

Change-Id: I9d0900b90fa0f5bb6636a9f722c2e1f5d336ad98
",git fetch https://review.opendev.org/openstack/puppet-gnocchi refs/changes/79/816079/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/remove-manage-cradox-72d292874c5fb286.yaml', 'manifests/storage/ceph.pp']",2,424c229d4fc050bd750d39d3e57ca8b365299eb8,,,"# == DEPRECATED PARAMS # # [*manage_cradox*] # (optional) Ensure state of the cradox package. # As of ceph jewel the python-rados package should be used. Option # must be set to false for Ubuntu as there is no cradox package for # Ubuntu. # Defaults to undef. # ## DEPRECATED PARAMS $manage_cradox = undef, if $manage_cradox != undef { warning('gnocchi::storage::ceph::manage_cradox parameter is deprecated and has no effect') } ",4,15
openstack%2Fpuppet-gnocchi~master~I7f52310b4f66813b30313d55a2d71ab3cf54493e,openstack/puppet-gnocchi,master,I7f52310b4f66813b30313d55a2d71ab3cf54493e,Deprecate support for [api] middlewares,MERGED,2021-11-01 11:19:24.000000000,2021-11-01 16:19:29.000000000,2021-11-01 16:18:04.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 11:19:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-gnocchi/commit/08e8215acbcedb0d84392356c0747bd60614f8a6', 'message': 'Deprecate support for [api] middleware\n\n... because the parameter was deprecated in gnocchi 1.3.0[1] and was\nremoved in gnocchi 2.0.0[2].\n\n[1] https://github.com/gnocchixyz/gnocchi/commit/7000300646f742216f63e09c0c105f2c737cc659\n[2] https://github.com/gnocchixyz/gnocchi/commit/7e56cd671282c34f5f8c0efc215e2f1c77fe38a2\n\nChange-Id: I7f52310b4f66813b30313d55a2d71ab3cf54493e\n'}, {'number': 2, 'created': '2021-11-01 11:25:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-gnocchi/commit/f24712d05056fed7609d5efd80a07347833879d5', 'message': 'Deprecate support for [api] middlewares\n\n... because the parameter was deprecated in gnocchi 1.3.0[1] and was\nremoved in gnocchi 2.0.0[2].\n\n[1] https://github.com/gnocchixyz/gnocchi/commit/7000300646f742216f63e09c0c105f2c737cc659\n[2] https://github.com/gnocchixyz/gnocchi/commit/7e56cd671282c34f5f8c0efc215e2f1c77fe38a2\n\nChange-Id: I7f52310b4f66813b30313d55a2d71ab3cf54493e\n'}, {'number': 3, 'created': '2021-11-01 12:47:54.000000000', 'files': ['manifests/api.pp', 'spec/classes/gnocchi_api_spec.rb', 'releasenotes/notes/deprecate-api-middlewares-20287ca86b384799.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-gnocchi/commit/be05efdc44c488e36491c9653f4188364e9c0f4e', 'message': 'Deprecate support for [api] middlewares\n\n... because the parameter was deprecated in gnocchi 1.3.0[1] and was\nremoved in gnocchi 2.0.0[2].\n\n[1] https://github.com/gnocchixyz/gnocchi/commit/7000300646f742216f63e09c0c105f2c737cc659\n[2] https://github.com/gnocchixyz/gnocchi/commit/7e56cd671282c34f5f8c0efc215e2f1c77fe38a2\n\nChange-Id: I7f52310b4f66813b30313d55a2d71ab3cf54493e\n'}]",0,816163,be05efdc44c488e36491c9653f4188364e9c0f4e,11,3,3,9816,,,0,"Deprecate support for [api] middlewares

... because the parameter was deprecated in gnocchi 1.3.0[1] and was
removed in gnocchi 2.0.0[2].

[1] https://github.com/gnocchixyz/gnocchi/commit/7000300646f742216f63e09c0c105f2c737cc659
[2] https://github.com/gnocchixyz/gnocchi/commit/7e56cd671282c34f5f8c0efc215e2f1c77fe38a2

Change-Id: I7f52310b4f66813b30313d55a2d71ab3cf54493e
",git fetch https://review.opendev.org/openstack/puppet-gnocchi refs/changes/63/816163/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/api.pp', 'spec/classes/gnocchi_api_spec.rb', 'releasenotes/notes/deprecate-api-middlewares-20287ca86b384799.yaml']",3,08e8215acbcedb0d84392356c0747bd60614f8a6,api-cleanup,--- deprecations: - | The ``gnocchi::api::middlewares`` parameter has been deprecated and will be removed in a future release. The parmaeter has no effect now. ,,19,6
openstack%2Fopenstack-helm-images~master~I28d42b85a31b4fe9bea09a3ac137c11071227453,openstack/openstack-helm-images,master,I28d42b85a31b4fe9bea09a3ac137c11071227453,Change ceph version to 15.2.15 available in repo,MERGED,2021-10-31 16:56:31.000000000,2021-11-01 16:15:53.000000000,2021-11-01 16:14:17.000000000,"[{'_account_id': 8898}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 28372}]","[{'number': 1, 'created': '2021-10-31 16:56:31.000000000', 'files': ['ceph-config-helper/Dockerfile.ubuntu_bionic', 'ceph-rbd-provisioner/Dockerfile.ubuntu_bionic', 'ceph-cephfs-provisioner/Dockerfile.ubuntu_bionic', 'ceph-daemon/Dockerfile.ubuntu_bionic'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/ec3e7bde894a86c7615770271818a13cd278b3e4', 'message': 'Change ceph version to 15.2.15 available in repo\n\nChange-Id: I28d42b85a31b4fe9bea09a3ac137c11071227453\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,816102,ec3e7bde894a86c7615770271818a13cd278b3e4,8,4,1,8863,,,0,"Change ceph version to 15.2.15 available in repo

Change-Id: I28d42b85a31b4fe9bea09a3ac137c11071227453
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/02/816102/1 && git format-patch -1 --stdout FETCH_HEAD,"['ceph-config-helper/Dockerfile.ubuntu_bionic', 'ceph-rbd-provisioner/Dockerfile.ubuntu_bionic', 'ceph-cephfs-provisioner/Dockerfile.ubuntu_bionic', 'ceph-daemon/Dockerfile.ubuntu_bionic']",4,ec3e7bde894a86c7615770271818a13cd278b3e4,,# Octopus 15.2.15ARG CEPH_RELEASE_TAG=15.2.15-1bionic,# Octopus 15.2.8ARG CEPH_RELEASE_TAG=15.2.8-1.0~bionic,8,8
openstack%2Fpuppet-manila~stable%2Fwallaby~Ie7af8408fe8cec9349593fd9b4cb5bc7deb565cd,openstack/puppet-manila,stable/wallaby,Ie7af8408fe8cec9349593fd9b4cb5bc7deb565cd,Add ability to configure backend availability zones,MERGED,2021-10-28 15:59:08.000000000,2021-11-01 16:13:16.000000000,2021-11-01 16:11:45.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 21129}, {'_account_id': 22348}, {'_account_id': 29632}]","[{'number': 1, 'created': '2021-10-28 15:59:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-manila/commit/d1f4d26268f5bd4980d7eff4dae6ed3c61fd012b', 'message': 'Add ability to configure backend availability zones\n\nAdd new ""backend_availability_zone"" parameter to every share\nbackend. The parameters are optional, and when set they override the\nDEFAULT/storage_availability_zone for the corresponding backend.\n\nConflicts:\n\tmanifests/backend/dellemc_isilon.pp\n\tmanifests/backend/dellemc_vmax.pp\n\tmanifests/backend/dellemc_vnx.pp\n\tmanifests/backend/flashblade.pp\n\tmanifests/backend/lvm.pp\n\tspec/defines/manila_backend_dellemc_isilon_spec.rb\n\tspec/defines/manila_backend_dellemc_vmax_spec.rb\n\tspec/defines/manila_backend_dellemc_vnx_spec.rb\n\tspec/defines/manila_backend_flashblade_spec.rb\n\tspec/defines/manila_backend_lvm_spec.rb\n\nChange-Id: Ie7af8408fe8cec9349593fd9b4cb5bc7deb565cd\n(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)\n'}, {'number': 2, 'created': '2021-10-29 04:49:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-manila/commit/f708f91636243d5476cadd076320e0c24292a6fd', 'message': 'Add ability to configure backend availability zones\n\nAdd new ""backend_availability_zone"" parameter to every share\nbackend. The parameters are optional, and when set they override the\nDEFAULT/storage_availability_zone for the corresponding backend.\n\nChange-Id: Ie7af8408fe8cec9349593fd9b4cb5bc7deb565cd\n(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)\nConflicts:\n\tmanifests/backend/dellemc_isilon.pp\n\tmanifests/backend/dellemc_vmax.pp\n\tmanifests/backend/dellemc_vnx.pp\n\tmanifests/backend/flashblade.pp\n\tmanifests/backend/lvm.pp\n\tspec/defines/manila_backend_dellemc_isilon_spec.rb\n\tspec/defines/manila_backend_dellemc_vmax_spec.rb\n\tspec/defines/manila_backend_dellemc_vnx_spec.rb\n\tspec/defines/manila_backend_flashblade_spec.rb\n\tspec/defines/manila_backend_lvm_spec.rb\n'}, {'number': 3, 'created': '2021-10-29 04:58:53.000000000', 'files': ['releasenotes/notes/add-share-backend-availability-zone-parameters-1bcf6b1066dc82cf.yaml', 'manifests/backend/generic.pp', 'spec/defines/manila_backend_dellemc_vnx_spec.rb', 'manifests/backend/hitachi_hnas.pp', 'spec/defines/manila_backend_glusterfs_spec.rb', 'manifests/backend/dellemc_vnx.pp', 'manifests/backend/cephfs.pp', 'spec/defines/manila_backend_cephfs_spec.rb', 'spec/defines/manila_backend_glusternfs_spec.rb', 'manifests/backend/glusterfs.pp', 'spec/defines/manila_backend_netapp_spec.rb', 'manifests/backend/netapp.pp', 'spec/defines/manila_backend_dellemc_isilon_spec.rb', 'manifests/backend/dellemc_unity.pp', 'spec/defines/manila_backend_generic_spec.rb', 'spec/defines/manila_backend_dellemc_unity_spec.rb', 'manifests/backend/dellemc_isilon.pp', 'manifests/backend/glusternfs.pp', 'spec/defines/manila_backend_glusternative_spec.rb', 'manifests/backend/dellemc_vmax.pp', 'spec/defines/manila_backend_hitachi_hnas_spec.rb', 'manifests/backend/glusternative.pp', 'spec/defines/manila_backend_dellemc_vmax_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-manila/commit/6d311078f7e0b575fe5226fd07dfeee56baebd8a', 'message': 'Add ability to configure backend availability zones\n\nAdd new ""backend_availability_zone"" parameter to every share\nbackend. The parameters are optional, and when set they override the\nDEFAULT/storage_availability_zone for the corresponding backend.\n\n(to wallaby)\nConflicts:\n\tmanifests/backend/dellemc_isilon.pp\n\tmanifests/backend/dellemc_vmax.pp\n\tmanifests/backend/dellemc_vnx.pp\n\tmanifests/backend/flashblade.pp\n\tmanifests/backend/lvm.pp\n\tspec/defines/manila_backend_dellemc_isilon_spec.rb\n\tspec/defines/manila_backend_dellemc_vmax_spec.rb\n\tspec/defines/manila_backend_dellemc_vnx_spec.rb\n\tspec/defines/manila_backend_flashblade_spec.rb\n\tspec/defines/manila_backend_lvm_spec.rb\n\nResolved conflicts mainly caused by the following three changes during\nXena cycle.\n - support for flashBlade driver\n    727562e5573c6988302628ce6adfcad9f9b7c436\n - support for lvm driver\n    2995df77adafd54df018a818fc567e027b28dcd1\n - deprecation of driver_handles_share_servers\n    4c365c9064845e73a1da0f868ebba5a00c6a5c7a\n\nChange-Id: Ie7af8408fe8cec9349593fd9b4cb5bc7deb565cd\n(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)\n'}]",5,815862,6d311078f7e0b575fe5226fd07dfeee56baebd8a,16,5,3,9816,,,0,"Add ability to configure backend availability zones

Add new ""backend_availability_zone"" parameter to every share
backend. The parameters are optional, and when set they override the
DEFAULT/storage_availability_zone for the corresponding backend.

(to wallaby)
Conflicts:
	manifests/backend/dellemc_isilon.pp
	manifests/backend/dellemc_vmax.pp
	manifests/backend/dellemc_vnx.pp
	manifests/backend/flashblade.pp
	manifests/backend/lvm.pp
	spec/defines/manila_backend_dellemc_isilon_spec.rb
	spec/defines/manila_backend_dellemc_vmax_spec.rb
	spec/defines/manila_backend_dellemc_vnx_spec.rb
	spec/defines/manila_backend_flashblade_spec.rb
	spec/defines/manila_backend_lvm_spec.rb

Resolved conflicts mainly caused by the following three changes during
Xena cycle.
 - support for flashBlade driver
    727562e5573c6988302628ce6adfcad9f9b7c436
 - support for lvm driver
    2995df77adafd54df018a818fc567e027b28dcd1
 - deprecation of driver_handles_share_servers
    4c365c9064845e73a1da0f868ebba5a00c6a5c7a

Change-Id: Ie7af8408fe8cec9349593fd9b4cb5bc7deb565cd
(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)
",git fetch https://review.opendev.org/openstack/puppet-manila refs/changes/62/815862/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/add-share-backend-availability-zone-parameters-1bcf6b1066dc82cf.yaml', 'manifests/backend/generic.pp', 'spec/defines/manila_backend_dellemc_vnx_spec.rb', 'manifests/backend/hitachi_hnas.pp', 'spec/defines/manila_backend_glusterfs_spec.rb', 'manifests/backend/dellemc_vnx.pp', 'manifests/backend/cephfs.pp', 'spec/defines/manila_backend_cephfs_spec.rb', 'spec/defines/manila_backend_glusternfs_spec.rb', 'manifests/backend/glusterfs.pp', 'spec/defines/manila_backend_netapp_spec.rb', 'manifests/backend/netapp.pp', 'spec/defines/manila_backend_dellemc_isilon_spec.rb', 'manifests/backend/dellemc_unity.pp', 'spec/defines/manila_backend_generic_spec.rb', 'spec/defines/manila_backend_dellemc_unity_spec.rb', 'manifests/backend/dellemc_isilon.pp', 'manifests/backend/glusternfs.pp', 'spec/defines/manila_backend_glusternative_spec.rb', 'manifests/backend/dellemc_vmax.pp', 'spec/defines/manila_backend_hitachi_hnas_spec.rb', 'manifests/backend/glusternative.pp', 'spec/defines/manila_backend_dellemc_vmax_spec.rb']",23,d1f4d26268f5bd4980d7eff4dae6ed3c61fd012b,," :vmax_server_container => '<SERVICE DEFAULT>', :vmax_share_data_pools => '<SERVICE DEFAULT>', :vmax_ethernet_ports => '<SERVICE DEFAULT>', :backend_availability_zone => '<SERVICE DEFAULT>',"," :vmax_server_container => '<SERVICE DEFAULT>', :vmax_share_data_pools => '<SERVICE DEFAULT>', :vmax_ethernet_ports => '<SERVICE DEFAULT>',",124,12
openstack%2Ftripleo-heat-templates~stable%2Fvictoria~I9729beac4c4e84d2619c4c629cd26eba8a26b87d,openstack/tripleo-heat-templates,stable/victoria,I9729beac4c4e84d2619c4c629cd26eba8a26b87d,Add parameter IronicPowerStateChangeTimeout,MERGED,2021-10-28 08:34:44.000000000,2021-11-01 16:09:43.000000000,2021-11-01 16:08:14.000000000,"[{'_account_id': 4571}, {'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 08:34:44.000000000', 'files': ['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8ee7df3a3d9452914da86d99aefcfcd1fed56e85', 'message': 'Add parameter IronicPowerStateChangeTimeout\n\nA heat parameter ``IronicPowerStateChangeTimeout`` has been added\nwhich sets the number of seconds to wait for power operations to\ncomplete, i.e., so that a baremetal node is in the desired power\nstate. If timed out, the power operation is considered a failure. The\ndefault is 60 seconds, which is the same as the current Ironic\ndefault.\n\nThis could be backported to stable/train, where the ironic default of\n30s is causing failures in CI jobs.\n\nRelated-Bug: #1947403\nChange-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d\n(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)\n'}]",0,815799,8ee7df3a3d9452914da86d99aefcfcd1fed56e85,8,4,1,24245,,,0,"Add parameter IronicPowerStateChangeTimeout

A heat parameter ``IronicPowerStateChangeTimeout`` has been added
which sets the number of seconds to wait for power operations to
complete, i.e., so that a baremetal node is in the desired power
state. If timed out, the power operation is considered a failure. The
default is 60 seconds, which is the same as the current Ironic
default.

This could be backported to stable/train, where the ironic default of
30s is causing failures in CI jobs.

Related-Bug: #1947403
Change-Id: I9729beac4c4e84d2619c4c629cd26eba8a26b87d
(cherry picked from commit 65151adc182fbe28afc1348a1a2fb664255d5ee1)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/99/815799/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ironic/ironic-conductor-container-puppet.yaml', 'releasenotes/notes/power_state-457f12af30b9e341.yaml']",2,8ee7df3a3d9452914da86d99aefcfcd1fed56e85,bug/1947403-stable/victoria,"--- features: - | A heat parameter ``IronicPowerStateChangeTimeout`` has been added which sets the number of seconds to wait for power operations to complete, i.e., so that a baremetal node is in the desired power state. If timed out, the power operation is considered a failure. The default is 60 seconds, which is the same as the current Ironic default. ",,16,1
openstack%2Fpuppet-openstack-guide~master~I08e540a658b9bc488fabd2dc493767ffa1b39c66,openstack/puppet-openstack-guide,master,I08e540a658b9bc488fabd2dc493767ffa1b39c66,Update release information,MERGED,2021-11-01 12:15:21.000000000,2021-11-01 15:31:08.000000000,2021-11-01 15:28:53.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 12:15:21.000000000', 'files': ['doc/source/install/releases.rst'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-guide/commit/8823c65a8a7696269670f7fa0a0387b3af2164fe', 'message': 'Update release information\n\nChange-Id: I08e540a658b9bc488fabd2dc493767ffa1b39c66\n'}]",0,816166,8823c65a8a7696269670f7fa0a0387b3af2164fe,8,3,1,9816,,,0,"Update release information

Change-Id: I08e540a658b9bc488fabd2dc493767ffa1b39c66
",git fetch https://review.opendev.org/openstack/puppet-openstack-guide refs/changes/66/816166/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/install/releases.rst'],1,8823c65a8a7696269670f7fa0a0387b3af2164fe,,| 10.z.y | Ocata | no - EOL (2017-02-26) || 11.z.y | Pike | no - EOL (2017-08-30) || 18.z.y | Wallaby | yes | +----------------------------+------------------------------+------------------------+ | 19.z.y | Xena | yes | +----------------------------+------------------------------+------------------------+ | 20.z.y | Yoga | yes (current master) || puppet-aodh_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-aodh/>`__ || puppet-barbican_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-barbican/>`__ || puppet-ceilometer_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-ceilometer/>`__ || puppet-cinder_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-cinder/>`__ || puppet-cloudkitty_ | `8.4.0 <http://docs.openstack.org/releasenotes/puppet-cloudkitty/>`__ || puppet-designate_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-designate/>`__ || puppet-ec2api_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-ec2api/>`__ || puppet-glance_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-glance/>`__ || puppet-gnocchi_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-gnocchi/>`__ || puppet-heat_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-heat/>`__ || puppet-horizon_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-horizon/>`__ || puppet-ironic_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-ironic/>`__ || puppet-keystone_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-keystone/>`__ || puppet-magnum_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-magnum/>`__ || puppet-manila_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-manila/>`__ || puppet-mistral_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-mistral/>`__ || puppet-murano_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-murano/>`__ || puppet-neutron_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-neutron/>`__ || puppet-nova_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-nova/>`__ || puppet-octavia_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-octavia/>`__ || puppet-openstack_extras_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-openstack_extras/>`__ || puppet-openstack_spec_helper_ | None || puppet-openstacklib_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-openstacklib/>`__ || puppet-oslo_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-oslo/>`__ || puppet-ovn_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-ova/>`__ || puppet-placement_ | `6.4.0 <http://docs.openstack.org/releasenotes/puppet-placement/>`__ || puppet-qdr_ | `8.4.0 <http://docs.openstack.org/releasenotes/puppet-qdr/>`__ || puppet-rally_ | `7.4.0 <http://docs.openstack.org/releasenotes/puppet-rally/>`__ || puppet-sahara_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-sahara/>`__ || puppet-senlin_ | `6.4.0 <http://docs.openstack.org/releasenotes/puppet-senlin/>`__ || puppet-tacker_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-tacker/>`__ || puppet-tempest_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-tempest/>`__ || puppet-trove_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-trove/>`__ || puppet-vitrage_ | `9.4.0 <http://docs.openstack.org/releasenotes/puppet-vitrage/>`__ || puppet-vswitch_ | `15.4.0 <http://docs.openstack.org/releasenotes/puppet-vswitch/>`__ || puppet-watcher_ | `19.4.0 <http://docs.openstack.org/releasnotes/puppet-watcher/>`__ || puppet-zaqar_ | `19.4.0 <http://docs.openstack.org/releasenotes/puppet-zaqar/>`__ |,| 10.z.y | Ocata | yes - EOL (2017-02-26) || 11.z.y | Pike | yes - EOL (2017-08-30) || 18.z.y | Wallaby | yes (current master) || puppet-aodh_ | `17.5.0 <http://docs.openstack.org/releasenotes/puppet-aodh/>`__ || puppet-barbican_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-barbican/>`__ || puppet-ceilometer_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-ceilometer/>`__ || puppet-cinder_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-cinder/>`__ || puppet-cloudkitty_ | `6.5.0 <http://docs.openstack.org/releasenotes/puppet-cloudkitty/>`__ || puppet-designate_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-designate/>`__ || puppet-ec2api_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-ec2api/>`__ || puppet-glance_ | `17.5.0 <http://docs.openstack.org/releasenotes/puppet-glance/>`__ || puppet-gnocchi_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-gnocchi/>`__ || puppet-heat_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-heat/>`__ || puppet-horizon_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-horizon/>`__ || puppet-ironic_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-ironic/>`__ || puppet-keystone_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-keystone/>`__ || puppet-magnum_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-magnum/>`__ || puppet-manila_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-manila/>`__ || puppet-mistral_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-mistral/>`__ || puppet-murano_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-murano/>`__ || puppet-neutron_ | `17.5.0 <http://docs.openstack.org/releasenotes/puppet-neutron/>`__ || puppet-nova_ | `17.5.0 <http://docs.openstack.org/releasenotes/puppet-nova/>`__ || puppet-octavia_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-octavia/>`__ || puppet-openstack_extras_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-openstack_extras/>`__ || puppet-openstack_spec_helper_ | `17.0.0 <http://docs.openstack.org/releasenotes/puppet-openstack_spec_helper/>`__|| puppet-openstacklib_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-openstacklib/>`__ || puppet-oslo_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-oslo/>`__ || puppet-ovn_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-ova/>`__ || puppet-placement_ | `4.4.0 <http://docs.openstack.org/releasenotes/puppet-placement/>`__ || puppet-qdr_ | `6.4.0 <http://docs.openstack.org/releasenotes/puppet-qdr/>`__ || puppet-rally_ | `5.4.0 <http://docs.openstack.org/releasenotes/puppet-rally/>`__ || puppet-sahara_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-sahara/>`__ || puppet-senlin_ | `4.4.0 <http://docs.openstack.org/releasenotes/puppet-senlin/>`__ || puppet-tacker_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-tacker/>`__ || puppet-tempest_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-tempest/>`__ || puppet-trove_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-trove/>`__ || puppet-vitrage_ | `7.4.0 <http://docs.openstack.org/releasenotes/puppet-vitrage/>`__ || puppet-vswitch_ | `13.4.0 <http://docs.openstack.org/releasenotes/puppet-vswitch/>`__ || puppet-watcher_ | `17.4.0 <http://docs.openstack.org/releasnotes/puppet-watcher/>`__ || puppet-zaqar_ | `17.4.0 <http://docs.openstack.org/releasenotes/puppet-zaqar/>`__ |,44,40
openstack%2Fheat~master~If0bc726d8681fff2b45a3b353ae627c86eb298d2,openstack/heat,master,If0bc726d8681fff2b45a3b353ae627c86eb298d2,Catch all create stack project exceptions,MERGED,2021-10-22 08:53:33.000000000,2021-11-01 15:28:07.000000000,2021-11-01 15:24:58.000000000,"[{'_account_id': 4257}, {'_account_id': 8833}, {'_account_id': 12404}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-22 08:53:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/c6cc7add20110b2d130d0ef5f9a1156c5ce9c844', 'message': 'Catch all create stack project exceptions\n\nIf there is underlying issues in Keystone that\ncauses the create stack project to fail the exception\nis never caught causing the stack to never enter a failed\nstate with any feedback. See [1] for example.\n\nThis changes so that we catch all exceptions and set the\nstack to a failed state. We do not want to return the\ncomplete exception since it can contain information about\nthe deployments underlying issue so we instead log the\nexception.\n\n[1] https://paste.opendev.org/show/810161/\n\nChange-Id: If0bc726d8681fff2b45a3b353ae627c86eb298d2\n'}, {'number': 2, 'created': '2021-11-01 04:26:13.000000000', 'files': ['heat/engine/service.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/b6a2c223166b54fc3b3c7530a21fcc2006246472', 'message': 'Catch all create stack project exceptions\n\nIf there is underlying issues in Keystone that\ncauses the create stack project to fail the exception\nis never caught causing the stack to never enter a failed\nstate with any feedback. See [1] for example.\n\nThis changes so that we catch all exceptions and set the\nstack to a failed state. We do not want to return the\ncomplete exception since it can contain information about\nthe deployments underlying issue so we instead log the\nexception.\n\n[1] https://paste.opendev.org/show/810161/\n\nChange-Id: If0bc726d8681fff2b45a3b353ae627c86eb298d2\n'}]",3,815097,b6a2c223166b54fc3b3c7530a21fcc2006246472,21,4,2,16137,,,0,"Catch all create stack project exceptions

If there is underlying issues in Keystone that
causes the create stack project to fail the exception
is never caught causing the stack to never enter a failed
state with any feedback. See [1] for example.

This changes so that we catch all exceptions and set the
stack to a failed state. We do not want to return the
complete exception since it can contain information about
the deployments underlying issue so we instead log the
exception.

[1] https://paste.opendev.org/show/810161/

Change-Id: If0bc726d8681fff2b45a3b353ae627c86eb298d2
",git fetch https://review.opendev.org/openstack/heat refs/changes/97/815097/1 && git format-patch -1 --stdout FETCH_HEAD,['heat/engine/service.py'],1,c6cc7add20110b2d130d0ef5f9a1156c5ce9c844,," except Exception: LOG.exception('Failed to create stack user project') stack.state_set(stack.action, stack.FAILED, 'Failed to create stack user project')",,4,0
openstack%2Fbarbican~stable%2Fussuri~I821b4f5998be5b40327311039979f5e00ea9cefc,openstack/barbican,stable/ussuri,I821b4f5998be5b40327311039979f5e00ea9cefc,Fix policy for adding a secret to a container,MERGED,2021-10-29 05:33:45.000000000,2021-11-01 15:08:58.000000000,2021-11-01 15:07:37.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-29 05:33:45.000000000', 'files': ['barbican/common/policies/base.py', 'barbican/common/policies/containers.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/54e342fa7cf15cb77b2bc4b330c5b8fa41678881', 'message': 'Fix policy for adding a secret to a container\n\nThis patch fixes the policies for adding and removing secrets from a\nsecret container.\n\nStory: 2009297\nTask: 43725\nChange-Id: I821b4f5998be5b40327311039979f5e00ea9cefc\n(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)\n(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)\n(cherry picked from commit 7cf500a98239e861f877539827f3be57c920b95c)\n'}]",0,815885,54e342fa7cf15cb77b2bc4b330c5b8fa41678881,7,2,1,7973,,,0,"Fix policy for adding a secret to a container

This patch fixes the policies for adding and removing secrets from a
secret container.

Story: 2009297
Task: 43725
Change-Id: I821b4f5998be5b40327311039979f5e00ea9cefc
(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)
(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)
(cherry picked from commit 7cf500a98239e861f877539827f3be57c920b95c)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/85/815885/1 && git format-patch -1 --stdout FETCH_HEAD,"['barbican/common/policies/base.py', 'barbican/common/policies/containers.py']",2,54e342fa7cf15cb77b2bc4b330c5b8fa41678881,story/2009247-stable/wallaby-stable/victoria-stable/ussuri," check_str='rule:container_project_admin or ' + 'rule:container_project_creator or ' + 'rule:container_project_creator_role and ' + 'rule:container_non_private_read', check_str='rule:container_project_admin or ' + 'rule:container_project_creator or ' + 'rule:container_project_creator_role and ' + 'rule:container_non_private_read',"," check_str='rule:admin', check_str='rule:admin',",11,2
openstack%2Ftripleo-heat-templates~stable%2Ftrain~Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,openstack/tripleo-heat-templates,stable/train,Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,Remove mariadb-server packages from the host,MERGED,2021-10-20 14:01:56.000000000,2021-11-01 14:34:34.000000000,2021-11-01 14:34:34.000000000,"[{'_account_id': 6816}, {'_account_id': 8297}, {'_account_id': 8449}, {'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 26343}]","[{'number': 1, 'created': '2021-10-20 14:01:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/cfb6118b62c8479384fe5ffd5bcfbf7d6bc14569', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses: #1946742\n""}, {'number': 2, 'created': '2021-10-21 14:52:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7df7165742ee0fcdce63b8dc82e6e1c3fdb70157', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n""}, {'number': 3, 'created': '2021-10-28 06:20:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/94540543f34c737d70d40ea87def3dcd11273260', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\n(cherry picked from commit: dae97cbcd8615c39ff11398f3850e35cce478e4b)\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n""}, {'number': 4, 'created': '2021-10-29 14:37:35.000000000', 'files': ['deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8c91e229b1a846b70029ed746e362482026bfc23', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)\n""}]",12,814786,8c91e229b1a846b70029ed746e362482026bfc23,31,10,4,20778,,,0,"Remove mariadb-server packages from the host

During updates/upgrades, installing mariadb-server on the
host may impact the behaviour of containerized mysql.

During a FFU if mariadb-server is upgraded, it may happen
that the rpm scriptlets fail to start mariadb server and
leave a crash log behind (tc.log). This prevents the
regular online upgrade from happening.

During an upgrade, mariadb-server used to be force-upgraded
in the mysql service for historical reasons. It's not
necessary since mysql is containerized and can trigger
the same crash as explained above.

During a minor update, the same reasoning can apply if
RHEL channel ships a new mariadb-server rpm as scriptlets
will probably leave a crash behind as well.

Make sure mariadb-server is never installed, while
keeping mariadb CLI if already present on the host, to
avoid operational impacts.

Change-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b
Closes-Bug: #1946742
(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/86/814786/3 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml']",2,cfb6118b62c8479384fe5ffd5bcfbf7d6bc14569,mariadb-rpm-host-stable/train, mariadb-server*,,6,6
openstack%2Fheat~master~Icf8ae805e53d80cf7be46465326983d2e24ef23a,openstack/heat,master,Icf8ae805e53d80cf7be46465326983d2e24ef23a,Use yaml.safe_load() in lbaas tests,MERGED,2021-11-01 04:13:50.000000000,2021-11-01 14:06:42.000000000,2021-11-01 14:04:40.000000000,"[{'_account_id': 4257}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-11-01 04:13:50.000000000', 'files': ['heat/tests/openstack/octavia/test_l7policy.py', 'heat/tests/openstack/neutron/lbaas/test_listener.py', 'heat/tests/openstack/neutron/lbaas/test_l7rule.py', 'heat/tests/openstack/neutron/lbaas/test_pool.py', 'heat/tests/openstack/neutron/lbaas/test_l7policy.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/83774a1c8f7155c854da3e58eda00bab0ba7b968', 'message': 'Use yaml.safe_load() in lbaas tests\n\nload() function requires a loader parameter with\nPyYAML 6.0.\n\nChange-Id: Icf8ae805e53d80cf7be46465326983d2e24ef23a\n'}]",0,816110,83774a1c8f7155c854da3e58eda00bab0ba7b968,8,2,1,8833,,,0,"Use yaml.safe_load() in lbaas tests

load() function requires a loader parameter with
PyYAML 6.0.

Change-Id: Icf8ae805e53d80cf7be46465326983d2e24ef23a
",git fetch https://review.opendev.org/openstack/heat refs/changes/10/816110/1 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/openstack/octavia/test_l7policy.py', 'heat/tests/openstack/neutron/lbaas/test_listener.py', 'heat/tests/openstack/neutron/lbaas/test_l7rule.py', 'heat/tests/openstack/neutron/lbaas/test_l7policy.py', 'heat/tests/openstack/neutron/lbaas/test_pool.py']",5,83774a1c8f7155c854da3e58eda00bab0ba7b968,, tmpl = yaml.safe_load(inline_templates.POOL_TEMPLATE) tmpl = yaml.safe_load(inline_templates.POOL_TEMPLATE) tmpl = yaml.safe_load(inline_templates.POOL_TEMPLATE), tmpl = yaml.load(inline_templates.POOL_TEMPLATE) tmpl = yaml.load(inline_templates.POOL_TEMPLATE) tmpl = yaml.load(inline_templates.POOL_TEMPLATE),14,14
openstack%2Fcharm-octavia-diskimage-retrofit~master~Ie38aa9b4fee22d076f5dd248be01949a5f18d029,openstack/charm-octavia-diskimage-retrofit,master,Ie38aa9b4fee22d076f5dd248be01949a5f18d029,Add impish to metadata.yaml,MERGED,2021-06-03 09:23:16.000000000,2021-11-01 13:57:01.000000000,2021-11-01 13:57:01.000000000,"[{'_account_id': 20634}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-03 09:23:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia-diskimage-retrofit/commit/7d76e7f04f949b2b5519997c565f1ca0c05cc02f', 'message': 'Add impish to metadata.yaml\n\nChange-Id: Ie38aa9b4fee22d076f5dd248be01949a5f18d029\n'}, {'number': 2, 'created': '2021-06-18 12:01:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia-diskimage-retrofit/commit/35edf4a6230d018d75c8a137e39414389dcce687', 'message': 'Add impish to metadata.yaml\n\nChange-Id: Ie38aa9b4fee22d076f5dd248be01949a5f18d029\n'}, {'number': 3, 'created': '2021-10-27 12:30:32.000000000', 'files': ['src/metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-octavia-diskimage-retrofit/commit/50b77e561115b470a3f8b01001d048d8329fa1e3', 'message': 'Add impish to metadata.yaml\n\nChange-Id: Ie38aa9b4fee22d076f5dd248be01949a5f18d029\n'}]",1,794534,50b77e561115b470a3f8b01001d048d8329fa1e3,20,3,3,31289,,,0,"Add impish to metadata.yaml

Change-Id: Ie38aa9b4fee22d076f5dd248be01949a5f18d029
",git fetch https://review.opendev.org/openstack/charm-octavia-diskimage-retrofit refs/changes/34/794534/1 && git format-patch -1 --stdout FETCH_HEAD,['src/metadata.yaml'],1,7d76e7f04f949b2b5519997c565f1ca0c05cc02f,charm-metadata-impish,- impish,,1,0
openstack%2Ftripleo-heat-templates~stable%2Fussuri~Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,openstack/tripleo-heat-templates,stable/ussuri,Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,Remove mariadb-server packages from the host,MERGED,2021-10-28 06:19:51.000000000,2021-11-01 13:49:28.000000000,2021-11-01 13:49:28.000000000,"[{'_account_id': 11166}, {'_account_id': 14985}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 06:19:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/dae97cbcd8615c39ff11398f3850e35cce478e4b', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\n(cherry picked from commit: 20cd28e4f7f3590e6b1692c5b2efc2bf2e589223)\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n""}, {'number': 2, 'created': '2021-10-29 14:35:56.000000000', 'files': ['deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ae93eba463f77ee50d6530658beee9fa09d4093b', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)\n""}]",2,815794,ae93eba463f77ee50d6530658beee9fa09d4093b,14,5,2,26343,,,0,"Remove mariadb-server packages from the host

During updates/upgrades, installing mariadb-server on the
host may impact the behaviour of containerized mysql.

During a FFU if mariadb-server is upgraded, it may happen
that the rpm scriptlets fail to start mariadb server and
leave a crash log behind (tc.log). This prevents the
regular online upgrade from happening.

During an upgrade, mariadb-server used to be force-upgraded
in the mysql service for historical reasons. It's not
necessary since mysql is containerized and can trigger
the same crash as explained above.

During a minor update, the same reasoning can apply if
RHEL channel ships a new mariadb-server rpm as scriptlets
will probably leave a crash behind as well.

Make sure mariadb-server is never installed, while
keeping mariadb CLI if already present on the host, to
avoid operational impacts.

Change-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b
Closes-Bug: #1946742
(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/94/815794/2 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml']",2,dae97cbcd8615c39ff11398f3850e35cce478e4b,, yum -y remove *el7ost* \ mariadb-server* -- \, yum -y remove *el7ost* -- \,7,7
openstack%2Ftripleo-quickstart-extras~master~If6f0c21581039a2318a5b019175852f5c5263f62,openstack/tripleo-quickstart-extras,master,If6f0c21581039a2318a5b019175852f5c5263f62,Allow to build containers before undercloud-install,MERGED,2021-10-20 04:39:01.000000000,2021-11-01 13:24:23.000000000,2021-10-26 15:14:07.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 16312}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}]","[{'number': 1, 'created': '2021-10-20 04:39:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/35709bf2a3c6bed6e048751afd9b23043a6c30ae', 'message': 'Allow to build containers in container-prep role\n\nIf build_container_images is true build containers\nelse do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 2, 'created': '2021-10-20 04:47:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e84cf21ca1cc239dc5aca093ddebd0e2b09193c0', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 3, 'created': '2021-10-20 05:40:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/9ed33217c9473af463c588c17e0a2ee17514444b', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 4, 'created': '2021-10-20 06:19:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/75bc1b487efa5b3865da011641ec09ea9eeef5ad', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 5, 'created': '2021-10-20 07:40:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/81a55299bdf881e2c68afc5c7ee2e984c7b70a2f', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 6, 'created': '2021-10-20 09:25:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/eda0da4f43ece879814baf0580638e20691cbaf3', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 7, 'created': '2021-10-20 09:27:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/f3643c3a843fedf2e3945086f4bfab4321e6beff', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 8, 'created': '2021-10-20 11:27:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/d7934eb5334825d50b2f805dbe48af53037e6cbf', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 9, 'created': '2021-10-20 12:58:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/f26779fca12e12c4e9d05d5f5937e4ed8fdf5a2a', 'message': 'Allow to build containers in undercloud-setup role\n\nIf build_container_images is true build containers\npost repo-setup else do container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}, {'number': 10, 'created': '2021-10-20 15:41:53.000000000', 'files': ['roles/undercloud-deploy/templates/containers-prepare-parameter.yaml.j2', 'roles/container-prep/tasks/main.yml', 'roles/undercloud-deploy/tasks/main.yml', 'roles/undercloud-deploy/templates/undercloud.conf.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/68af35edf1c8885ebd9a0d836e61509276cad5ee', 'message': 'Allow to build containers before undercloud-install\n\nIf build_container_images is true build containers\nand use these build containers instead of downloading\ncontainers and running container updates.\n\nChange-Id: If6f0c21581039a2318a5b019175852f5c5263f62\n'}]",12,814699,68af35edf1c8885ebd9a0d836e61509276cad5ee,52,7,10,13861,,,0,"Allow to build containers before undercloud-install

If build_container_images is true build containers
and use these build containers instead of downloading
containers and running container updates.

Change-Id: If6f0c21581039a2318a5b019175852f5c5263f62
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/99/814699/8 && git format-patch -1 --stdout FETCH_HEAD,['roles/container-prep/tasks/main.yml'],1,35709bf2a3c6bed6e048751afd9b23043a6c30ae,,"- name: Build and push containers into a local registry when: - build_container_images|default(false)|bool include_role: name: container-build vars: container_registry_namespace: ""{{ docker_registry_namespace }}"" container_tag: ""{{ container_build_id }}"" - not build_container_images|default(false)|bool",,10,0
openstack%2Fkolla~master~I78da7eb2b6b5eae2b04fd95b24615bd4a572a1d6,openstack/kolla,master,I78da7eb2b6b5eae2b04fd95b24615bd4a572a1d6,neutron: Use update-alternatives --display instead of --query,MERGED,2021-10-28 07:20:20.000000000,2021-11-01 12:50:50.000000000,2021-11-01 12:49:23.000000000,"[{'_account_id': 13252}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-28 07:20:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/4ae57106e694c4482dd0df41dcee41747a714242', 'message': 'neutron: Use update-alternatives --display instead of --query\n\n--query is not supported before update-alternatives 1.15\nand CentOS uses 1.13\n\nCloses-Bug: #1936947\nChange-Id: I78da7eb2b6b5eae2b04fd95b24615bd4a572a1d6\n'}, {'number': 2, 'created': '2021-10-29 09:59:51.000000000', 'files': ['releasenotes/notes/bug-1936947-8beac926823cdf8f.yaml', 'docker/neutron/neutron-base/extend_start.sh'], 'web_link': 'https://opendev.org/openstack/kolla/commit/2d1bbe72579f9209e151133352d4d6761f764f33', 'message': 'neutron: Use update-alternatives --display instead of --query\n\n--query is not supported before update-alternatives 1.15\nand CentOS uses 1.13\n\nCloses-Bug: #1936947\nChange-Id: I78da7eb2b6b5eae2b04fd95b24615bd4a572a1d6\n'}]",2,815781,2d1bbe72579f9209e151133352d4d6761f764f33,14,4,2,22629,,,0,"neutron: Use update-alternatives --display instead of --query

--query is not supported before update-alternatives 1.15
and CentOS uses 1.13

Closes-Bug: #1936947
Change-Id: I78da7eb2b6b5eae2b04fd95b24615bd4a572a1d6
",git fetch https://review.opendev.org/openstack/kolla refs/changes/81/815781/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1936947-8beac926823cdf8f.yaml', 'docker/neutron/neutron-base/extend_start.sh']",2,4ae57106e694c4482dd0df41dcee41747a714242,,"# CentOS has update-alternatives 1.13, so use --display (not --query) if $UPDATE_ALTERNATIVES --display iptables; then",if $UPDATE_ALTERNATIVES --query iptables; then,7,1
openstack%2Fskyline-console~master~Id03ab6b5b400bf90e61d52de8825b2e915ec8d36,openstack/skyline-console,master,Id03ab6b5b400bf90e61d52de8825b2e915ec8d36,fix: Fix edit subnet allocation pools,MERGED,2021-10-29 07:40:00.000000000,2021-11-01 12:44:40.000000000,2021-11-01 12:44:40.000000000,"[{'_account_id': 22348}, {'_account_id': 30434}]","[{'number': 1, 'created': '2021-10-29 07:40:00.000000000', 'files': ['src/pages/network/containers/Network/Detail/subnetActions/EditSubnet.jsx'], 'web_link': 'https://opendev.org/openstack/skyline-console/commit/3020d4c88aab62cc097673689edac4663afb0f73', 'message': 'fix: Fix edit subnet allocation pools\n\nfix remove allocation pools when edit subnet\n\nChange-Id: Id03ab6b5b400bf90e61d52de8825b2e915ec8d36\n'}]",11,815939,3020d4c88aab62cc097673689edac4663afb0f73,29,2,1,33636,,,0,"fix: Fix edit subnet allocation pools

fix remove allocation pools when edit subnet

Change-Id: Id03ab6b5b400bf90e61d52de8825b2e915ec8d36
",git fetch https://review.opendev.org/openstack/skyline-console refs/changes/39/815939/1 && git format-patch -1 --stdout FETCH_HEAD,['src/pages/network/containers/Network/Detail/subnetActions/EditSubnet.jsx'],1,3020d4c88aab62cc097673689edac4663afb0f73,, const allocationPools = getAllocationPools(allocation_pools);, const allocationPools = getAllocationPools( allocation_pools || this.defaultValue.allocation_pools );,1,3
openstack%2Ftripleo-quickstart~master~Ife4b15a784c70fe031af98f3aa135737232d56a6,openstack/tripleo-quickstart,master,Ife4b15a784c70fe031af98f3aa135737232d56a6,Enable '--baremetal-deployment' fs010/fs030/fs037,MERGED,2021-10-27 12:26:27.000000000,2021-11-01 11:47:00.000000000,2021-11-01 11:45:35.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}]","[{'number': 1, 'created': '2021-10-27 12:26:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/cdb11beb8c0a26e56eacf6d26946335e6c8f7a19', 'message': ""Enable '--baremetal-deployment' for fs010\n\nRelated change: https://review.opendev.org/806562\nWould need '--baremetal-deployment' to make overcloud\ndeploy provision the ControlPlane VIP.\n\nChange-Id: Ife4b15a784c70fe031af98f3aa135737232d56a6\n""}, {'number': 2, 'created': '2021-10-27 21:48:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/e80684b3593f2db33338cc8aa2eca7929a30a1df', 'message': ""Enable '--baremetal-deployment' for fs010\n\nRelated change: https://review.opendev.org/806562\nWould need '--baremetal-deployment' to make overcloud\ndeploy provision the ControlPlane VIP.\n\nChange-Id: Ife4b15a784c70fe031af98f3aa135737232d56a6\n""}, {'number': 3, 'created': '2021-10-28 08:28:05.000000000', 'files': ['config/general_config/featureset010.yml', 'config/general_config/featureset037.yml', 'config/general_config/featureset030.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/19e67505311d0264ef5f2b34752ae28231f87869', 'message': ""Enable '--baremetal-deployment' fs010/fs030/fs037\n\nRelated change: https://review.opendev.org/806562\nWould need '--baremetal-deployment' to make overcloud\ndeploy provision the ControlPlane VIP.\n\nChange-Id: Ife4b15a784c70fe031af98f3aa135737232d56a6\n""}]",10,815650,19e67505311d0264ef5f2b34752ae28231f87869,29,7,3,24245,,,0,"Enable '--baremetal-deployment' fs010/fs030/fs037

Related change: https://review.opendev.org/806562
Would need '--baremetal-deployment' to make overcloud
deploy provision the ControlPlane VIP.

Change-Id: Ife4b15a784c70fe031af98f3aa135737232d56a6
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/50/815650/2 && git format-patch -1 --stdout FETCH_HEAD,['config/general_config/featureset010.yml'],1,cdb11beb8c0a26e56eacf6d26946335e6c8f7a19,network-data-v2, --baremetal-deployment,,1,0
openstack%2Fpuppet-openstacklib~master~I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289,openstack/puppet-openstacklib,master,I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289,WIP: Implement type validation,NEW,2021-11-01 03:03:13.000000000,2021-11-01 11:33:49.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-01 03:03:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/6404423629381bd6345184a02e659e8c673dcc8e', 'message': 'WIP: Implement type validation\n\nChange-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289\n'}, {'number': 2, 'created': '2021-11-01 04:49:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/829e91952aa5d0651e7f5f41899aefbb1a2d542f', 'message': 'WIP: Implement type validation\n\nChange-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289\n'}, {'number': 3, 'created': '2021-11-01 05:15:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/0e9fc01da9004c7c02abc09d3288de447c7ff167', 'message': 'WIP: Implement type validation\n\nChange-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289\n'}, {'number': 4, 'created': '2021-11-01 05:16:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/a8a0baffe7fab0d2945710765b1c72d0280e0e02', 'message': 'WIP: Implement type validation\n\nChange-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289\n'}, {'number': 5, 'created': '2021-11-01 08:02:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/a681b0c9da639ccd56e07c5b3b040580c543b916', 'message': 'WIP: Implement type validation\n\nChange-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289\n'}, {'number': 6, 'created': '2021-11-01 09:47:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/14faa8956e7096e3e291918a66a77d443a28aa7c', 'message': 'WIP: Implement type validation\n\nChange-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289\n'}, {'number': 7, 'created': '2021-11-01 09:56:03.000000000', 'files': ['manifests/policyrcd.pp', 'manifests/openstackclient.pp', 'manifests/db/postgresql.pp', 'types/default.pp', 'manifests/db/mysql.pp', 'manifests/policy/base.pp', 'manifests/service_validation.pp', 'manifests/policy/default.pp', 'types/mysql_host.pp', 'types/float.pp', 'manifests/iscsid.pp', 'types/array.pp', 'manifests/db/mysql/host_access.pp', 'manifests/messaging/rabbitmq.pp', 'types/integer.pp', 'types/boolean.pp', 'manifests/policy.pp', 'types/string.pp'], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/6b19a4601c2043993260b8c70760539a46461e93', 'message': 'WIP: Implement type validation\n\nChange-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289\n'}]",0,816109,6b19a4601c2043993260b8c70760539a46461e93,11,1,7,9816,,,0,"WIP: Implement type validation

Change-Id: I0ef6b0aaa8607b1dbf3c289d8631b9b85c6d6289
",git fetch https://review.opendev.org/openstack/puppet-openstacklib refs/changes/09/816109/7 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/policyrcd.pp', 'manifests/openstackclient.pp', 'manifests/db/postgresql.pp', 'types/default.pp', 'manifests/db/mysql.pp', 'manifests/policy/base.pp', 'manifests/service_validation.pp', 'manifests/policy/default.pp', 'types/float.pp', 'manifests/iscsid.pp', 'types/array.pp', 'manifests/db/mysql/host_access.pp', 'manifests/messaging/rabbitmq.pp', 'types/integer.pp', 'types/boolean.pp', 'manifests/policy.pp', 'types/string.pp']",17,6404423629381bd6345184a02e659e8c673dcc8e,type-check,"type Openstacklib::String = Variant[ String, Openstacklib::Default ] ",,110,86
openstack%2Fneutron~master~Ie14399f11295e385f7dbbaeecbcb26309a5170a5,openstack/neutron,master,Ie14399f11295e385f7dbbaeecbcb26309a5170a5,Add Python3 yoga unit tests,MERGED,2021-09-15 17:39:21.000000000,2021-11-01 11:17:13.000000000,2021-11-01 11:13:05.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-15 17:39:21.000000000', 'files': ['zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/632ffa992fff72b0533f6d3d2517be3afa188c29', 'message': 'Add Python3 yoga unit tests\n\nThis is an automatically generated patch to ensure unit testing\nis in place for all the of the tested runtimes for yoga.\n\nSee also the PTI in governance [1].\n\n[1]: https://governance.openstack.org/tc/reference/project-testing-interface.html\n\nChange-Id: Ie14399f11295e385f7dbbaeecbcb26309a5170a5\n'}]",12,809268,632ffa992fff72b0533f6d3d2517be3afa188c29,79,3,1,22816,,,0,"Add Python3 yoga unit tests

This is an automatically generated patch to ensure unit testing
is in place for all the of the tested runtimes for yoga.

See also the PTI in governance [1].

[1]: https://governance.openstack.org/tc/reference/project-testing-interface.html

Change-Id: Ie14399f11295e385f7dbbaeecbcb26309a5170a5
",git fetch https://review.opendev.org/openstack/neutron refs/changes/68/809268/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,632ffa992fff72b0533f6d3d2517be3afa188c29,add-yoga-python-jobtemplates, - openstack-python3-yoga-jobs - openstack-python3-yoga-jobs-arm64 - openstack-tox-py36: # from openstack-python3-yoga-jobs template - openstack-tox-py38: # from openstack-python3-yoga-jobs template - openstack-tox-py36: # from openstack-python3-yoga-jobs template, - openstack-python3-xena-jobs - openstack-python3-xena-jobs-arm64 - openstack-tox-py36: # from openstack-python3-xena-jobs template - openstack-tox-py38: # from openstack-python3-xena-jobs template - openstack-tox-py36: # from openstack-python3-xena-jobs template,5,5
openstack%2Ftripleo-ci~master~I755a4fe887478e275896a91d9aabadd1c04ade19,openstack/tripleo-ci,master,I755a4fe887478e275896a91d9aabadd1c04ade19,Edit underlying review to test comments,ABANDONED,2021-10-06 20:45:44.000000000,2021-11-01 11:12:06.000000000,,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-06 20:45:44.000000000', 'files': ['roles/tripleo-repos/tasks/main.yml', 'playbooks/tripleo-buildcontainers/pre9.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/76c66df5dbfce0606f74d59bbd2a00bfd220eac3', 'message': 'Edit underlying review to test comments\n\nTesting suggestions for improvements made\nin the comments.\n\nChange-Id: I755a4fe887478e275896a91d9aabadd1c04ade19\n'}]",2,812747,76c66df5dbfce0606f74d59bbd2a00bfd220eac3,6,3,1,9976,,,0,"Edit underlying review to test comments

Testing suggestions for improvements made
in the comments.

Change-Id: I755a4fe887478e275896a91d9aabadd1c04ade19
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/47/812747/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/tripleo-repos/tasks/main.yml', 'playbooks/tripleo-buildcontainers/pre9.yaml']",2,76c66df5dbfce0606f74d59bbd2a00bfd220eac3,c9-comments,,- name: Add missing /etc/pki/rpm-gpg dir become: true file: path: /etc/pki/rpm-gpg state: directory ,1,7
openstack%2Fkolla-ansible~master~Id3ddf31c2ce417ff92f7207c09a5e2306c14f0bd,openstack/kolla-ansible,master,Id3ddf31c2ce417ff92f7207c09a5e2306c14f0bd,"Make it possible to disable logstash_format, and write directly to elasticsearch alias",NEW,2021-05-27 14:24:19.000000000,2021-11-01 11:08:04.000000000,,"[{'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 32657}]","[{'number': 1, 'created': '2021-05-27 14:24:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/da91f889e150a086cce14bea8286dc65b39e6a1b', 'message': 'Make it possible to disable logstash_format, and write directly to elasticsearch alias\n\nChange-Id: Id3ddf31c2ce417ff92f7207c09a5e2306c14f0bd\n'}, {'number': 2, 'created': '2021-05-27 14:28:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3963a2439b7d7f1fb350862ccbc500a902b64c21', 'message': 'Make it possible in fluentd config to disable logstash_format, and write directly to elasticsearch alias to use ILM and rollover indices\n\nChange-Id: Id3ddf31c2ce417ff92f7207c09a5e2306c14f0bd\n'}, {'number': 3, 'created': '2021-05-27 14:47:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/eb0aeaa1342e00c519703330598bb41640ff6fa6', 'message': 'Make it possible to disable logstash_format, and write directly to elasticsearch alias\n\nChange-Id: Id3ddf31c2ce417ff92f7207c09a5e2306c14f0bd\n'}, {'number': 4, 'created': '2021-06-08 20:58:16.000000000', 'files': ['ansible/roles/common/templates/conf/output/01-es.conf.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/33367b80ca6d3fa069e4659aa4c5318cfb77de1c', 'message': 'Make it possible to disable logstash_format, and write directly to elasticsearch alias\n\nChange-Id: Id3ddf31c2ce417ff92f7207c09a5e2306c14f0bd\n'}]",2,793415,33367b80ca6d3fa069e4659aa4c5318cfb77de1c,9,3,4,33524,,,0,"Make it possible to disable logstash_format, and write directly to elasticsearch alias

Change-Id: Id3ddf31c2ce417ff92f7207c09a5e2306c14f0bd
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/15/793415/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/common/templates/conf/output/01-es.conf.j2'],1,da91f889e150a086cce14bea8286dc65b39e6a1b,,{% if fluentd_elasticsearch_logstash_format is defined %} logstash_format {{ fluentd_elasticsearch_logstash_format }} {% else %}{% endif %} {% if fluentd_elasticsearch_index_name is defined %} index_name {{ fluentd_elasticsearch_index_name }} {% else %}{% endif %}</match>,</match> ,9,1
openstack%2Fkolla~master~Iee451db823a15b40f9e893c1febfd910c336ddec,openstack/kolla,master,Iee451db823a15b40f9e893c1febfd910c336ddec,cinder-volume: Install binary python libs only in binary,MERGED,2021-09-20 13:43:23.000000000,2021-11-01 10:42:42.000000000,2021-11-01 10:41:21.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-09-20 13:43:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/0538c35027a443f1de3835190e584408863b3b8b', 'message': 'cinder-volume: Install source cinderlib in source\n\nCurrently we install binary cinderlib package in source\ncinder-volume container images.\n\nChange-Id: Iee451db823a15b40f9e893c1febfd910c336ddec\n'}, {'number': 2, 'created': '2021-10-01 08:38:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/581570620a9894a2575747861e927adadebeba64', 'message': 'cinder-volume: Install source cinderlib in source\n\nCurrently we install binary cinderlib package in source\ncinder-volume container images.\n\nChange-Id: Iee451db823a15b40f9e893c1febfd910c336ddec\n'}, {'number': 3, 'created': '2021-10-05 08:51:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/23a498a2f85d3082eedeb76c0080d30ced1bc470', 'message': 'cinder-volume: Install binary libraries only in binary\n\nChange-Id: Iee451db823a15b40f9e893c1febfd910c336ddec\n'}, {'number': 4, 'created': '2021-10-05 09:07:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/1e0f8c67e80d1f6e0a4d1255159e23aaaab4d365', 'message': 'cinder-volume: Install binary python libs only in binary\n\nChange-Id: Iee451db823a15b40f9e893c1febfd910c336ddec\n'}, {'number': 5, 'created': '2021-10-05 09:19:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/eb2d4ccac636543aaa28c7cbbe7de9bcca968ac2', 'message': 'cinder-volume: Install binary python libs only in binary\n\nChange-Id: Iee451db823a15b40f9e893c1febfd910c336ddec\n'}, {'number': 6, 'created': '2021-10-28 06:12:23.000000000', 'files': ['docker/cinder/cinder-volume/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/3d55f995a9945bf5e12050f6ba55edcfc17bc158', 'message': 'cinder-volume: Install binary python libs only in binary\n\nChange-Id: Iee451db823a15b40f9e893c1febfd910c336ddec\n'}]",14,810016,3d55f995a9945bf5e12050f6ba55edcfc17bc158,31,4,6,22629,,,0,"cinder-volume: Install binary python libs only in binary

Change-Id: Iee451db823a15b40f9e893c1febfd910c336ddec
",git fetch https://review.opendev.org/openstack/kolla refs/changes/16/810016/4 && git format-patch -1 --stdout FETCH_HEAD,"['docker/cinder/cinder-volume/Dockerfile.j2', 'kolla/common/config.py']",2,0538c35027a443f1de3835190e584408863b3b8b,," 'cinder-volume': { 'type': 'url', 'location': ('$tarballs_base/openstack/cinderlib/' 'cinderlib-${openstack_branch}.tar.gz')},",,19,2
openstack%2Fkolla-ansible~master~Ied83865eb33aceaf738c21363f02bcccbcd05738,openstack/kolla-ansible,master,Ied83865eb33aceaf738c21363f02bcccbcd05738,Fix wrong opts in cyborg.conf,MERGED,2021-10-27 14:13:36.000000000,2021-11-01 10:36:54.000000000,2021-11-01 10:35:30.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 27339}, {'_account_id': 30491}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-27 14:13:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/5904ea058c05e6221cff10c9e7d3d6c6ce358dc2', 'message': 'Fix wrong opts in cyborg.config\n\nTrivial Fix\n\nCloses-Bug: #1941704\nChange-Id: Ied83865eb33aceaf738c21363f02bcccbcd05738\n'}, {'number': 2, 'created': '2021-10-27 15:04:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7a8ac6a382d80c8504669354fd8e3e9a20adbbff', 'message': 'Fix wrong opts in cyborg.conf\n\nAdd an empty line between memcache_servers and www_authenticate_uri\n\nCloses-Bug: #1941704\nChange-Id: Ied83865eb33aceaf738c21363f02bcccbcd05738\n'}, {'number': 3, 'created': '2021-10-28 09:59:57.000000000', 'files': ['ansible/roles/cyborg/templates/cyborg.conf.j2', 'releasenotes/notes/bug-1941704-d31774f4dd56374f.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/172c29cb11b40f8b8405cd3eac0f4bc8ee76d15e', 'message': 'Fix wrong opts in cyborg.conf\n\nAdd an empty line between memcache_servers and www_authenticate_uri\n\nCloses-Bug: #1941704\nChange-Id: Ied83865eb33aceaf738c21363f02bcccbcd05738\n'}]",13,815672,172c29cb11b40f8b8405cd3eac0f4bc8ee76d15e,19,5,3,26285,,,0,"Fix wrong opts in cyborg.conf

Add an empty line between memcache_servers and www_authenticate_uri

Closes-Bug: #1941704
Change-Id: Ied83865eb33aceaf738c21363f02bcccbcd05738
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/72/815672/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/cyborg/templates/cyborg.conf.j2'],1,5904ea058c05e6221cff10c9e7d3d6c6ce358dc2,bug/1941704,,,1,0
openstack%2Fansible-collections-openstack~master~If7cbce107ce99de79749359e257933e4247e3634,openstack/ansible-collections-openstack,master,If7cbce107ce99de79749359e257933e4247e3634,Flavor properties are not deleted on changes and id will stay,MERGED,2021-09-29 15:14:14.000000000,2021-11-01 09:57:08.000000000,2021-11-01 09:57:08.000000000,"[{'_account_id': 10969}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-29 15:14:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/05db734277b73591ec8fcc8aaf1648ea8827f830', 'message': 'Flavor properties are not deleted on changes and id will stay\n\nStory: 2009260\nChange-Id: If7cbce107ce99de79749359e257933e4247e3634\n'}, {'number': 2, 'created': '2021-09-29 15:40:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/8a5af1fef9031f4c275dd9819efb3b7010db3e62', 'message': 'Flavor properties are not deleted on changes and id will stay\n\nStory: 2009260\nChange-Id: If7cbce107ce99de79749359e257933e4247e3634\n'}, {'number': 3, 'created': '2021-10-07 05:14:58.000000000', 'files': ['plugins/modules/compute_flavor.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/21b70f6b9b04b2684d155abd302943f5c8d3ed45', 'message': 'Flavor properties are not deleted on changes and id will stay\n\nFixing a bug on compute_falvor that causes that extra_specs\nare deleted and the id is changing when a property of the\nfalvor is changed.\n\n\nChanging the id will cause that a server which is using the falvor is\nafterwards not assigned to the falvor anymore.\n\n\nStory: 2009260\nChange-Id: If7cbce107ce99de79749359e257933e4247e3634\n'}]",6,811739,21b70f6b9b04b2684d155abd302943f5c8d3ed45,14,2,3,33872,,,0,"Flavor properties are not deleted on changes and id will stay

Fixing a bug on compute_falvor that causes that extra_specs
are deleted and the id is changing when a property of the
falvor is changed.


Changing the id will cause that a server which is using the falvor is
afterwards not assigned to the falvor anymore.


Story: 2009260
Change-Id: If7cbce107ce99de79749359e257933e4247e3634
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/39/811739/2 && git format-patch -1 --stdout FETCH_HEAD,['plugins/modules/compute_flavor.py'],1,05db734277b73591ec8fcc8aaf1648ea8827f830,flavor_story_2009260," flavorid = self.params['flavorid'] old_extra_specs = {} if flavorid == 'auto': flavorid=flavor['id'] flavorid=flavorid,"," flavorid=self.params['flavorid'],",5,2
openstack%2Fnova~stable%2Ftrain~I95f68be76330ff09e5eabb5ef8dd9a18f5547866,openstack/nova,stable/train,I95f68be76330ff09e5eabb5ef8dd9a18f5547866,address open redirect with 3 forward slashes,MERGED,2021-08-30 18:03:56.000000000,2021-11-01 09:52:24.000000000,2021-11-01 09:50:50.000000000,"[{'_account_id': 4690}, {'_account_id': 7166}, {'_account_id': 7634}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 27340}]","[{'number': 1, 'created': '2021-08-30 18:03:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/54ca8b326c80baef3ee2c86b8c36c7f7a9376eed', 'message': 'address open redirect with 3 forward slashes\n\nIe36401c782f023d1d5f2623732619105dc2cfa24 was intended\nto address OSSA-2021-002 (CVE-2021-3654) however after its\nrelease it was discovered that the fix only worked\nfor urls with 2 leading slashes or more then 4.\n\nThis change adresses the missing edgecase for 3 leading slashes\nand also maintian support for rejecting 2+.\n\nChange-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866\nco-authored-by: Matteo Pozza\nCloses-Bug: #1927677\n(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)\n(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)\n(cherry picked from commit 3d369c1febf5e4c4a26a037f5eedecf1651bfa78)\n(cherry picked from commit 8695aa504c3b875a219f1dff1d69b65d73623c84)\n'}, {'number': 2, 'created': '2021-09-16 16:34:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ef4d92fa598ef49f41133d8e0229c85c097d8095', 'message': 'address open redirect with 3 forward slashes\n\nIe36401c782f023d1d5f2623732619105dc2cfa24 was intended\nto address OSSA-2021-002 (CVE-2021-3654) however after its\nrelease it was discovered that the fix only worked\nfor urls with 2 leading slashes or more then 4.\n\nThis change adresses the missing edgecase for 3 leading slashes\nand also maintian support for rejecting 2+.\n\nConflicts:\n  nova/console/websocketproxy.py\n  nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict and difference in websocketproxy.py from\nthe cherry picked change: HTTPStatus.BAD_REQUEST => 400 is due to the\nfact that HTTPStatus does not exist in Python 2.7. The conflict in\ntest_websocketproxy.py is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train.\n\nChange-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866\nco-authored-by: Matteo Pozza\nCloses-Bug: #1927677\n(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)\n(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)\n(cherry picked from commit 9588cdbfd4649ea53d60303f2d10c5d62a070a07)\n(cherry picked from commit 0997043f459ac616b594363b5b253bd0ae6ed9eb)\n'}, {'number': 3, 'created': '2021-09-29 01:48:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/be7ec5ab4823f8d765745215b3dd1a517b19ad83', 'message': 'address open redirect with 3 forward slashes\n\nIe36401c782f023d1d5f2623732619105dc2cfa24 was intended\nto address OSSA-2021-002 (CVE-2021-3654) however after its\nrelease it was discovered that the fix only worked\nfor urls with 2 leading slashes or more then 4.\n\nThis change adresses the missing edgecase for 3 leading slashes\nand also maintian support for rejecting 2+.\n\nConflicts:\n  nova/console/websocketproxy.py\n  nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict and difference in websocketproxy.py from\nthe cherry picked change: HTTPStatus.BAD_REQUEST => 400 is due to the\nfact that HTTPStatus does not exist in Python 2.7. The conflict in\ntest_websocketproxy.py is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train. The difference\nin test_websocketproxy.py from the cherry picked change is due to a\ndifference in internal implementation [1] in Python < 3.6. See change\nI546d376869a992601b443fb95acf1034da2a8f36 for reference.\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866\nco-authored-by: Matteo Pozza\nCloses-Bug: #1927677\n(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)\n(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)\n(cherry picked from commit 9588cdbfd4649ea53d60303f2d10c5d62a070a07)\n(cherry picked from commit 0997043f459ac616b594363b5b253bd0ae6ed9eb)\n'}, {'number': 4, 'created': '2021-09-29 15:14:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ef6daf94ebc4690fbf00c122b091d08ea6c36c32', 'message': 'address open redirect with 3 forward slashes\n\nIe36401c782f023d1d5f2623732619105dc2cfa24 was intended\nto address OSSA-2021-002 (CVE-2021-3654) however after its\nrelease it was discovered that the fix only worked\nfor urls with 2 leading slashes or more then 4.\n\nThis change adresses the missing edgecase for 3 leading slashes\nand also maintian support for rejecting 2+.\n\nConflicts:\n  nova/console/websocketproxy.py\n  nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict and difference in websocketproxy.py from\nthe cherry picked change: HTTPStatus.BAD_REQUEST => 400 is due to the\nfact that HTTPStatus does not exist in Python 2.7. The conflict in\ntest_websocketproxy.py is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train. The difference\nin test_websocketproxy.py from the cherry picked change is due to a\ndifference in internal implementation [1] in Python < 3.6. See change\nI546d376869a992601b443fb95acf1034da2a8f36 for reference.\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866\nco-authored-by: Matteo Pozza\nCloses-Bug: #1927677\n(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)\n(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)\n(cherry picked from commit 9588cdbfd4649ea53d60303f2d10c5d62a070a07)\n(cherry picked from commit 0997043f459ac616b594363b5b253bd0ae6ed9eb)\n'}, {'number': 5, 'created': '2021-09-29 19:15:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/652424feaf81cd0bbb2a98e2df38354ce8c12ccb', 'message': 'address open redirect with 3 forward slashes\n\nIe36401c782f023d1d5f2623732619105dc2cfa24 was intended\nto address OSSA-2021-002 (CVE-2021-3654) however after its\nrelease it was discovered that the fix only worked\nfor urls with 2 leading slashes or more then 4.\n\nThis change adresses the missing edgecase for 3 leading slashes\nand also maintian support for rejecting 2+.\n\nConflicts:\n  nova/console/websocketproxy.py\n  nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict and difference in websocketproxy.py from\nthe cherry picked change: HTTPStatus.BAD_REQUEST => 400 is due to the\nfact that HTTPStatus does not exist in Python 2.7. The conflict in\ntest_websocketproxy.py is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train. The difference\nin test_websocketproxy.py from the cherry picked change is due to a\ndifference in internal implementation [1] in Python < 3.6. See change\nI546d376869a992601b443fb95acf1034da2a8f36 for reference.\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866\nco-authored-by: Matteo Pozza\nCloses-Bug: #1927677\n(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)\n(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)\n(cherry picked from commit 9588cdbfd4649ea53d60303f2d10c5d62a070a07)\n(cherry picked from commit 0997043f459ac616b594363b5b253bd0ae6ed9eb)\n'}, {'number': 6, 'created': '2021-10-08 09:38:47.000000000', 'files': ['nova/console/websocketproxy.py', 'nova/tests/unit/console/test_websocketproxy.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/8906552cfc2525a44251d4cf313ece61e57251eb', 'message': 'address open redirect with 3 forward slashes\n\nIe36401c782f023d1d5f2623732619105dc2cfa24 was intended\nto address OSSA-2021-002 (CVE-2021-3654) however after its\nrelease it was discovered that the fix only worked\nfor urls with 2 leading slashes or more then 4.\n\nThis change adresses the missing edgecase for 3 leading slashes\nand also maintian support for rejecting 2+.\n\nConflicts:\n  nova/console/websocketproxy.py\n  nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict and difference in websocketproxy.py from\nthe cherry picked change: HTTPStatus.BAD_REQUEST => 400 is due to the\nfact that HTTPStatus does not exist in Python 2.7. The conflict in\ntest_websocketproxy.py is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train. The difference\nin test_websocketproxy.py from the cherry picked change is due to a\ndifference in internal implementation [1] in Python < 3.6. See change\nI546d376869a992601b443fb95acf1034da2a8f36 for reference.\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866\nco-authored-by: Matteo Pozza\nCloses-Bug: #1927677\n(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)\n(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)\n(cherry picked from commit 9588cdbfd4649ea53d60303f2d10c5d62a070a07)\n(cherry picked from commit 0997043f459ac616b594363b5b253bd0ae6ed9eb)\n'}]",28,806629,8906552cfc2525a44251d4cf313ece61e57251eb,90,6,6,11604,,,0,"address open redirect with 3 forward slashes

Ie36401c782f023d1d5f2623732619105dc2cfa24 was intended
to address OSSA-2021-002 (CVE-2021-3654) however after its
release it was discovered that the fix only worked
for urls with 2 leading slashes or more then 4.

This change adresses the missing edgecase for 3 leading slashes
and also maintian support for rejecting 2+.

Conflicts:
  nova/console/websocketproxy.py
  nova/tests/unit/console/test_websocketproxy.py

NOTE(melwitt): The conflict and difference in websocketproxy.py from
the cherry picked change: HTTPStatus.BAD_REQUEST => 400 is due to the
fact that HTTPStatus does not exist in Python 2.7. The conflict in
test_websocketproxy.py is because change
I23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols
to be configurable for console proxies) is not in Train. The difference
in test_websocketproxy.py from the cherry picked change is due to a
difference in internal implementation [1] in Python < 3.6. See change
I546d376869a992601b443fb95acf1034da2a8f36 for reference.

[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286

Change-Id: I95f68be76330ff09e5eabb5ef8dd9a18f5547866
co-authored-by: Matteo Pozza
Closes-Bug: #1927677
(cherry picked from commit 6fbd0b758dcac71323f3be179b1a9d1c17a4acc5)
(cherry picked from commit 47dad4836a26292e9d34e516e1525ecf00be127c)
(cherry picked from commit 9588cdbfd4649ea53d60303f2d10c5d62a070a07)
(cherry picked from commit 0997043f459ac616b594363b5b253bd0ae6ed9eb)
",git fetch https://review.opendev.org/openstack/nova refs/changes/29/806629/5 && git format-patch -1 --stdout FETCH_HEAD,"['nova/console/websocketproxy.py', 'nova/tests/unit/console/test_websocketproxy.py']",2,54ca8b326c80baef3ee2c86b8c36c7f7a9376eed,bug/1927677," def test_reject_open_redirect(self): # This will test the behavior when an attempt is made to cause an open # redirect. It should be rejected. mock_req = mock.MagicMock() mock_req.makefile().readline.side_effect = [ b'GET //example.com/%2F.. HTTP/1.1\r\n', b'' ] # Collect the response data to verify at the end. The # SimpleHTTPRequestHandler writes the response data by calling the # request socket sendall() method. self.data = b'' def fake_sendall(data): self.data += data mock_req.sendall.side_effect = fake_sendall client_addr = ('8.8.8.8', 54321) mock_server = mock.MagicMock() # This specifies that the server will be able to handle requests other # than only websockets. mock_server.only_upgrade = False # Constructing a handler will process the mock_req request passed in. websocketproxy.NovaProxyRequestHandler( mock_req, client_addr, mock_server) # Verify no redirect happens and instead a 400 Bad Request is returned. self.data = self.data.decode() self.assertIn('Error code: 400', self.data) self.assertIn('Message: URI must not start with //', self.data) def test_reject_open_redirect_3_slashes(self): # This will test the behavior when an attempt is made to cause an open # redirect. It should be rejected. mock_req = mock.MagicMock() mock_req.makefile().readline.side_effect = [ b'GET ///example.com/%2F.. HTTP/1.1\r\n', b'' ] # Collect the response data to verify at the end. The # SimpleHTTPRequestHandler writes the response data by calling the # request socket sendall() method. self.data = b'' def fake_sendall(data): self.data += data mock_req.sendall.side_effect = fake_sendall client_addr = ('8.8.8.8', 54321) mock_server = mock.MagicMock() # This specifies that the server will be able to handle requests other # than only websockets. mock_server.only_upgrade = False # Constructing a handler will process the mock_req request passed in. websocketproxy.NovaProxyRequestHandler( mock_req, client_addr, mock_server) # Verify no redirect happens and instead a 400 Bad Request is returned. self.data = self.data.decode() self.assertIn('Error code: 400', self.data) self.assertIn('Message: URI must not start with //', self.data)",,83,0
openstack%2Fzaqar~master~Ibfb9170e451deebc651758ad8c2db3a1fe58ae1b,openstack/zaqar,master,Ibfb9170e451deebc651758ad8c2db3a1fe58ae1b,[Part9] Remove six,MERGED,2020-10-14 10:52:03.000000000,2021-11-01 09:45:06.000000000,2021-11-01 09:43:44.000000000,"[{'_account_id': 8846}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-10-14 10:52:03.000000000', 'files': ['zaqar/transport/wsgi/v2_0/topic_purge.py', 'zaqar/transport/wsgi/v2_0/urls.py', 'zaqar/transport/wsgi/v2_0/topic.py', 'zaqar/transport/wsgi/v2_0/topic_stats.py'], 'web_link': 'https://opendev.org/openstack/zaqar/commit/23d2e7838ab0cfb526830bd77628eeda2e278d3a', 'message': ""[Part9] Remove six\n\nWe don't need this in a Python 3-only world.\nRemove six in follows:\n\nChange-Id: Ibfb9170e451deebc651758ad8c2db3a1fe58ae1b\n""}]",1,758086,23d2e7838ab0cfb526830bd77628eeda2e278d3a,13,2,1,17130,,,0,"[Part9] Remove six

We don't need this in a Python 3-only world.
Remove six in follows:

Change-Id: Ibfb9170e451deebc651758ad8c2db3a1fe58ae1b
",git fetch https://review.opendev.org/openstack/zaqar refs/changes/86/758086/1 && git format-patch -1 --stdout FETCH_HEAD,"['zaqar/transport/wsgi/v2_0/topic_purge.py', 'zaqar/transport/wsgi/v2_0/urls.py', 'zaqar/transport/wsgi/v2_0/topic.py', 'zaqar/transport/wsgi/v2_0/topic_stats.py']",4,23d2e7838ab0cfb526830bd77628eeda2e278d3a,, raise wsgi_errors.HTTPNotFound(str(ex)),import six raise wsgi_errors.HTTPNotFound(six.text_type(ex)),12,16
openstack%2Fheat-dashboard~master~I8ba825855acdbceee63cd7fb3702160a903597ed,openstack/heat-dashboard,master,I8ba825855acdbceee63cd7fb3702160a903597ed,Clean up extra spaces,ABANDONED,2021-09-15 14:11:31.000000000,2021-11-01 09:29:52.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-09-15 14:11:31.000000000', 'files': ['heat_dashboard/static/dashboard/project/heat_dashboard/template_generator/js/libs/angular-notify.js'], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/ef2d93c4e2185f9c7870becf6cbb20b95482811b', 'message': 'Clean up extra spaces\n\nAlthough these errors are not important, they affect the code specification.\n\nChange-Id: I8ba825855acdbceee63cd7fb3702160a903597ed\n'}]",0,809197,ef2d93c4e2185f9c7870becf6cbb20b95482811b,6,1,1,30449,,,0,"Clean up extra spaces

Although these errors are not important, they affect the code specification.

Change-Id: I8ba825855acdbceee63cd7fb3702160a903597ed
",git fetch https://review.opendev.org/openstack/heat-dashboard refs/changes/97/809197/1 && git format-patch -1 --stdout FETCH_HEAD,['heat_dashboard/static/dashboard/project/heat_dashboard/template_generator/js/libs/angular-notify.js'],1,ef2d93c4e2185f9c7870becf6cbb20b95482811b,, if (e.propertyName === 'opacity' || e.currentTarget.style.opacity === 0 || , if (e.propertyName === 'opacity' || e.currentTarget.style.opacity === 0 || ,2,2
openstack%2Fopenstack-helm~master~I4e124df21371aa7119184b339c08e2939d21f7b7,openstack/openstack-helm,master,I4e124df21371aa7119184b339c08e2939d21f7b7,Enable extra panels intelligently,ABANDONED,2021-08-17 15:18:02.000000000,2021-11-01 09:10:34.000000000,,"[{'_account_id': 1004}, {'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 18256}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 30449}]","[{'number': 1, 'created': '2021-08-17 15:18:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d0ca1ec7c20fa7aa5cf3ac675eec594e989525e7', 'message': 'Enable extra panels intelligently\n\nBased on the endpoint list, we can detect what panels we need to\nenable.\nIn this patchset, the extra panel list is generated in the init\ncontainer and it is consumed in horizon.sh to enable them.\n\nFinally, we can remove extra_panels from the value.\n\nChange-Id: I4e124df21371aa7119184b339c08e2939d21f7b7\n'}, {'number': 2, 'created': '2021-08-17 15:52:32.000000000', 'files': ['horizon/templates/deployment.yaml', 'horizon/templates/configmap-bin.yaml', 'horizon/Chart.yaml', 'horizon/templates/bin/_panels-detect.sh.tpl', 'releasenotes/notes/horizon.yaml', 'horizon/templates/bin/_horizon.sh.tpl', 'horizon/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/cdc73c590ddf7fc33f2dd387a849f394098dd1f2', 'message': 'Enable extra panels intelligently\n\nBased on the endpoint list, we can detect what panels we need to\nenable.\nIn this patchset, the extra panel list is generated in the init\ncontainer and it is consumed in horizon.sh to enable them.\n\nFinally, we can remove extra_panels from the value.\n\nChange-Id: I4e124df21371aa7119184b339c08e2939d21f7b7\n'}]",1,804886,cdc73c590ddf7fc33f2dd387a849f394098dd1f2,5,7,2,31746,,,0,"Enable extra panels intelligently

Based on the endpoint list, we can detect what panels we need to
enable.
In this patchset, the extra panel list is generated in the init
container and it is consumed in horizon.sh to enable them.

Finally, we can remove extra_panels from the value.

Change-Id: I4e124df21371aa7119184b339c08e2939d21f7b7
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/86/804886/1 && git format-patch -1 --stdout FETCH_HEAD,"['horizon/templates/deployment.yaml', 'horizon/templates/configmap-bin.yaml', 'horizon/Chart.yaml', 'releasenotes/notes/horizon.yaml', 'horizon/templates/bin/_horizon.sh.tpl', 'horizon/templates/bin/_panels-detect.tpl', 'horizon/values.yaml']",7,d0ca1ec7c20fa7aa5cf3ac675eec594e989525e7,, panels_detect: docker.io/openstackhelm/heat:stein-ubuntu_bionic," # list of panels to enable for horizon # this requires that the panels are already installed in the horizon image, if they are not # nothing will be added # the name of the panel should be the name of the dir where the panel is installed # for example heat_dashboard, cloudkittydashboard or neutron_taas_dashboard extra_panels: - heat_dashboard - neutron_taas_dashboard",73,26
openstack%2Fnova~master~Ib3ca69cad9129316198c18bedb459fe476333cd5,openstack/nova,master,Ib3ca69cad9129316198c18bedb459fe476333cd5,DNM: Test nova-manage placement heal_allocations with new Neutron,ABANDONED,2021-10-29 10:47:33.000000000,2021-11-01 08:23:12.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-29 10:47:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/daf43ee14fc7ea10c0ba1bb4df614d6260d14632', 'message': 'DNM: Test nova-manage placement heal_allocations with new Neutron\n\nDepends-On: https://review.opendev.org/c/openstack/neutron/+/805637\nChange-Id: Ib3ca69cad9129316198c18bedb459fe476333cd5\n'}]",0,815952,daf43ee14fc7ea10c0ba1bb4df614d6260d14632,8,1,1,9708,,,0,"DNM: Test nova-manage placement heal_allocations with new Neutron

Depends-On: https://review.opendev.org/c/openstack/neutron/+/805637
Change-Id: Ib3ca69cad9129316198c18bedb459fe476333cd5
",git fetch https://review.opendev.org/openstack/nova refs/changes/52/815952/1 && git format-patch -1 --stdout FETCH_HEAD,[],0,daf43ee14fc7ea10c0ba1bb4df614d6260d14632,bp/qos-minimum-guaranteed-packet-rate,,,0,0
openstack%2Fskyline-console~master~I3b5e742a75fa5a48634a01d74f2610480e4ada1d,openstack/skyline-console,master,I3b5e742a75fa5a48634a01d74f2610480e4ada1d,feat: Add volume bootable action,MERGED,2021-10-29 08:53:00.000000000,2021-11-01 08:07:40.000000000,2021-11-01 08:07:40.000000000,"[{'_account_id': 22348}, {'_account_id': 30434}]","[{'number': 1, 'created': '2021-10-29 08:53:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/skyline-console/commit/bb4ec792de728875b1451f7e46a4824272926d91', 'message': 'feat: Add volume bootable action\n\nadd volume bootable action\n\nChange-Id: I3b5e742a75fa5a48634a01d74f2610480e4ada1d\n'}, {'number': 2, 'created': '2021-10-29 09:29:42.000000000', 'files': ['src/locales/en.json', 'src/pages/storage/containers/Volume/actions/index.jsx', 'src/locales/zh.json', 'src/stores/cinder/volume.js', 'src/pages/storage/containers/Volume/actions/Bootable.jsx'], 'web_link': 'https://opendev.org/openstack/skyline-console/commit/80c257255c5b70f3faf205c0c6aad2a4a0228bf0', 'message': 'feat: Add volume bootable action\n\nadd volume bootable action\n\nChange-Id: I3b5e742a75fa5a48634a01d74f2610480e4ada1d\n'}]",12,815945,80c257255c5b70f3faf205c0c6aad2a4a0228bf0,30,2,2,33636,,,0,"feat: Add volume bootable action

add volume bootable action

Change-Id: I3b5e742a75fa5a48634a01d74f2610480e4ada1d
",git fetch https://review.opendev.org/openstack/skyline-console refs/changes/45/815945/2 && git format-patch -1 --stdout FETCH_HEAD,"['src/locales/en.json', 'src/pages/storage/containers/Volume/actions/index.jsx', 'src/locales/zh.json', 'src/pages/storage/containers/Volume/actions/Bootable.jsx', 'src/stores/cinder/volume.js', 'config/webpack.dev.js']",6,bb4ec792de728875b1451f7e46a4824272926d91,," target: 'https://172.20.150.186:8080',"," target: 'http://localhost',",72,1
openstack%2Frequirements~master~I932b98de387b65b372f60219837c8771ac9df033,openstack/requirements,master,I932b98de387b65b372f60219837c8771ac9df033,Updated from generate-constraints,MERGED,2021-10-30 03:01:27.000000000,2021-11-01 07:36:45.000000000,2021-11-01 07:35:33.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-30 03:01:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/69ef7e2d8060b74378d38bed553fe8e9a8681cb0', 'message': 'Updated from generate-constraints\n\nChange-Id: I932b98de387b65b372f60219837c8771ac9df033\n'}, {'number': 2, 'created': '2021-11-01 02:32:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/c8cf2856f4a444a29a5c7cd18d45b5dfe90a73f0', 'message': 'Updated from generate-constraints\n\nChange-Id: I932b98de387b65b372f60219837c8771ac9df033\n'}, {'number': 3, 'created': '2021-11-01 02:37:46.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/5b6de06e690b3985a7f73e9251f4c5450e56b8e9', 'message': 'Updated from generate-constraints\n\nChange-Id: I932b98de387b65b372f60219837c8771ac9df033\nSigned-off-by: Matthew Thode <mthode@mthode.org>\n'}]",0,816085,5b6de06e690b3985a7f73e9251f4c5450e56b8e9,16,2,3,11131,,,0,"Updated from generate-constraints

Change-Id: I932b98de387b65b372f60219837c8771ac9df033
Signed-off-by: Matthew Thode <mthode@mthode.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/85/816085/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,69ef7e2d8060b74378d38bed553fe8e9a8681cb0,openstack/requirements/constraints/noclob,os-api-ref===2.3.0oslo.concurrency===4.5.0XStatic-Angular===1.8.2.1google-api-core===2.2.1oslo.messaging===12.11.0prometheus-client===0.12.0pkg_resources===0.0.0tzlocal===4.1boto3===1.19.7packaging===21.2protobuf===3.19.1botocore===1.22.7Django===3.2.8types-cryptography===3.3.8dulwich===0.20.26wrapt===1.13.3oslo.policy===3.10.0fasteners===0.16.3filelock===3.3.2,os-api-ref===2.2.0oslo.concurrency===4.4.1XStatic-Angular===1.5.8.0google-api-core===2.2.0oslo.messaging===12.10.0prometheus-client===0.11.0tzlocal===4.0.2boto3===1.19.5packaging===21.0protobuf===3.19.0botocore===1.22.5Django===2.2.24types-cryptography===3.3.7dulwich===0.20.25wrapt===1.13.2oslo.policy===3.9.0fasteners===0.14.1filelock===3.3.1setuptools===58.3.0,19,19
openstack%2Fpuppet-keystone~master~I66090f71123302e6a93d263d24753f27e4ab1372,openstack/puppet-keystone,master,I66090f71123302e6a93d263d24753f27e4ab1372,WIP: Checking new puppetlabs-inifile,ABANDONED,2021-11-01 05:35:53.000000000,2021-11-01 06:35:39.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-01 05:35:53.000000000', 'files': ['spec/classes/keystone_cors_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/b7dab62c9391e1f5b3cc20f67bc15f7be54bbc5a', 'message': 'WIP: Checking new puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: I66090f71123302e6a93d263d24753f27e4ab1372\n'}]",0,816120,b7dab62c9391e1f5b3cc20f67bc15f7be54bbc5a,3,1,1,9816,,,0,"WIP: Checking new puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: I66090f71123302e6a93d263d24753f27e4ab1372
",git fetch https://review.opendev.org/openstack/puppet-keystone refs/changes/20/816120/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/classes/keystone_cors_spec.rb'],1,b7dab62c9391e1f5b3cc20f67bc15f7be54bbc5a,,,,0,1
openstack%2Fpuppet-nova~master~Ia0fdc62ef6c5d244292589afd0f9c8f7fdec1d83,openstack/puppet-nova,master,Ia0fdc62ef6c5d244292589afd0f9c8f7fdec1d83,WIP: Checking new puppetlabs-inifile,ABANDONED,2021-11-01 05:08:10.000000000,2021-11-01 06:35:36.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-01 05:08:10.000000000', 'files': ['spec/classes/nova_api_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-nova/commit/d8468ceaca97ab6fcafc775c5246f9fe0879a3fd', 'message': 'WIP: Checking new puppetlabs-inifile\n\nDepends-on: https://review.opendev.org/816117\nChange-Id: Ia0fdc62ef6c5d244292589afd0f9c8f7fdec1d83\n'}]",0,816118,d8468ceaca97ab6fcafc775c5246f9fe0879a3fd,3,1,1,9816,,,0,"WIP: Checking new puppetlabs-inifile

Depends-on: https://review.opendev.org/816117
Change-Id: Ia0fdc62ef6c5d244292589afd0f9c8f7fdec1d83
",git fetch https://review.opendev.org/openstack/puppet-nova refs/changes/18/816118/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/classes/nova_api_spec.rb'],1,d8468ceaca97ab6fcafc775c5246f9fe0879a3fd,,,,1,0
openstack%2Fmistral-lib~master~I1b2296337bf153bfa55cb3ef7a64cae74475d921,openstack/mistral-lib,master,I1b2296337bf153bfa55cb3ef7a64cae74475d921,Update contributor documentation,ABANDONED,2021-06-09 02:25:50.000000000,2021-11-01 06:12:24.000000000,,"[{'_account_id': 19134}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-09 02:25:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral-lib/commit/30969d2f1952209364cc977b8b73fa756548da5b', 'message': 'Update contributor documentation\n\nChange-Id: I1b2296337bf153bfa55cb3ef7a64cae74475d921\n'}, {'number': 2, 'created': '2021-10-29 09:28:50.000000000', 'files': ['CONTRIBUTING.rst'], 'web_link': 'https://opendev.org/openstack/mistral-lib/commit/0069029c4cab87799f10cea4cf28925f613ade01', 'message': 'Update contributor documentation\n\nChange-Id: I1b2296337bf153bfa55cb3ef7a64cae74475d921\n'}]",0,795439,0069029c4cab87799f10cea4cf28925f613ade01,6,2,2,31412,,,0,"Update contributor documentation

Change-Id: I1b2296337bf153bfa55cb3ef7a64cae74475d921
",git fetch https://review.opendev.org/openstack/mistral-lib refs/changes/39/795439/1 && git format-patch -1 --stdout FETCH_HEAD,['CONTRIBUTING.rst'],1,30969d2f1952209364cc977b8b73fa756548da5b,,"The source repository for this project can be found at: https://opendev.org/openstack/mistral-lib Pull requests submitted through GitHub are not monitored. To start contributing to OpenStack, follow the steps in the contribution guide to set up and use Gerrit: https://docs.openstack.org/contributors/code-and-documentation/quick-start.html Bugs should be filed on Launchpad: For more specific information about contributing to this repository, see the Mistral contributor guide: https://docs.openstack.org/mistral/latest/contributor/contributing.html","If you would like to contribute to the development of OpenStack, you must follow the steps in this page: https://docs.openstack.org/infra/manual/developers.html If you already have a good understanding of how the system works and your OpenStack accounts are set up, you can skip to the development workflow section of this documentation to learn how changes to OpenStack should be submitted for review via the Gerrit tool: https://docs.openstack.org/infra/manual/developers.html#development-workflow Pull requests submitted through GitHub will be ignored. Bugs should be filed on Launchpad, not GitHub:",12,10
openstack%2Fneutron~master~I03878a2e650d5f0d0167e0f7daa351b12bae8725,openstack/neutron,master,I03878a2e650d5f0d0167e0f7daa351b12bae8725,[OVS] Workaround when OpenFlow controller restarts,MERGED,2021-10-26 09:55:31.000000000,2021-11-01 04:46:02.000000000,2021-11-01 04:44:04.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 09:55:31.000000000', 'files': ['neutron/agent/common/ovs_lib.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/0194856da19f0ce96b613968ab415821037f18d0', 'message': '[OVS] Workaround when OpenFlow controller restarts\n\nWhen a new OF controller is added or when new OF protocols are added to\na bridge, the OF controller is restarted. When that happens, the os-ken\n``OfctlService`` instance removes the OF controller datapath and waits\nfor an update event that will add a new one. During this time no OF\ncontrollers (datapaths) will be registered and any request will be\nrejected with a ``InvalidDatapath`` exception.\n\nThis patch is a temporary workaround that prevents any command from\nbeing executed just after those two described operations, providing\ntime to OVS to send the OF updates.\n\nRelated-Bug: #1948642\nChange-Id: I03878a2e650d5f0d0167e0f7daa351b12bae8725\n'}]",10,815459,0194856da19f0ce96b613968ab415821037f18d0,181,5,1,16688,,,0,"[OVS] Workaround when OpenFlow controller restarts

When a new OF controller is added or when new OF protocols are added to
a bridge, the OF controller is restarted. When that happens, the os-ken
``OfctlService`` instance removes the OF controller datapath and waits
for an update event that will add a new one. During this time no OF
controllers (datapaths) will be registered and any request will be
rejected with a ``InvalidDatapath`` exception.

This patch is a temporary workaround that prevents any command from
being executed just after those two described operations, providing
time to OVS to send the OF updates.

Related-Bug: #1948642
Change-Id: I03878a2e650d5f0d0167e0f7daa351b12bae8725
",git fetch https://review.opendev.org/openstack/neutron refs/changes/59/815459/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/agent/common/ovs_lib.py'],1,0194856da19f0ce96b613968ab415821037f18d0,bug/1948642," # TODO(ralonsoh): this is a workaround for LP#1948642. When a new # controller is added, os-ken ``OfctlService`` needs to receive the # update event and register this new datapath. time.sleep(1) # TODO(ralonsoh): this is a workaround for LP#1948642. When the OF # protocols are changed, the OF controller is restarted. This sleep # will provide time to os-ken ``OfctlService`` to receive the update # events of the restarted controllers and set them as enabled. time.sleep(1)",,9,0
openstack%2Fopenstack-helm-infra~master~Iec07becad7f4fc91e84339e69d90815c695cbedf,openstack/openstack-helm-infra,master,Iec07becad7f4fc91e84339e69d90815c695cbedf,Disable keySize value override,ABANDONED,2021-10-26 01:50:21.000000000,2021-11-01 00:48:16.000000000,,"[{'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 30449}]","[{'number': 1, 'created': '2021-10-26 01:50:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/40663fd24bbd2cc31b5418fe26c0257e0f28cd7d', 'message': 'WIP - Fix ca-issuer keySize field change\n\nChange-Id: Iec07becad7f4fc91e84339e69d90815c695cbedf\n'}, {'number': 2, 'created': '2021-10-26 01:52:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/bcb4892c8499fcd84fef604841e78260ed8efa73', 'message': 'WIP - Fix ca-issuer keySize field change\n\nChange-Id: Iec07becad7f4fc91e84339e69d90815c695cbedf\n'}, {'number': 3, 'created': '2021-10-28 23:31:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/abaf4d17b18ed9d501e9bb3d451d49e13ab0ad48', 'message': 'WIP - Fix ca-issuer keySize field change\n\nChange-Id: Iec07becad7f4fc91e84339e69d90815c695cbedf\n'}, {'number': 4, 'created': '2021-10-28 23:31:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/39d1d57064bb62a8b06f43617c8efd1d21ccb1f3', 'message': 'WIP - Fix ca-issuer keySize field change\n\nChange-Id: Iec07becad7f4fc91e84339e69d90815c695cbedf\n'}, {'number': 5, 'created': '2021-10-29 00:55:27.000000000', 'files': ['helm-toolkit/templates/manifests/_certificates.tpl', 'helm-toolkit/Chart.yaml', 'releasenotes/notes/helm-toolkit.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6e625fcc841210cc50ff32b4ac8e688294676b11', 'message': 'Disable keySize value override\n\nWith the move for cert-manager to v1 API, the keySize value\nwas changed to size and moved under a privateKey object.\n\nThis breaks when built with with helm v3 when the ""keySize""\nvalue is not specified. This change disables the keySize\ndefaulf override while the issue gets fixed since most\nof the charts in the repo do not override this value.\n\nChange-Id: Iec07becad7f4fc91e84339e69d90815c695cbedf\n'}]",2,815399,6e625fcc841210cc50ff32b4ac8e688294676b11,19,4,5,21420,,,0,"Disable keySize value override

With the move for cert-manager to v1 API, the keySize value
was changed to size and moved under a privateKey object.

This breaks when built with with helm v3 when the ""keySize""
value is not specified. This change disables the keySize
defaulf override while the issue gets fixed since most
of the charts in the repo do not override this value.

Change-Id: Iec07becad7f4fc91e84339e69d90815c695cbedf
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/99/815399/3 && git format-patch -1 --stdout FETCH_HEAD,['helm-toolkit/templates/manifests/_certificates.tpl'],1,40663fd24bbd2cc31b5418fe26c0257e0f28cd7d,tls,"{{- $_ := ( dict ""privateKey"" ( printf ""%d"" 4096 | atoi ) ) | set (index $envAll.Values.endpoints $service ""host_fqdn_override"" ""default"" ""tls"") ""keySize"" -}}{{/* Default duration to 3 months. Note the min is 720h. This can be overridden. */}}","{{- $_ := ( printf ""%d"" 4096 | atoi ) | set (index $envAll.Values.endpoints $service ""host_fqdn_override"" ""default"" ""tls"") ""keySize"" -}}{{/* Default keySize to 3 months. Note the min is 720h. This can be overridden. */}}",2,2
openstack%2Fneutron~master~I99a49b107b1872ddf83d1d8497a26a8d728feb07,openstack/neutron,master,I99a49b107b1872ddf83d1d8497a26a8d728feb07,Add port-resource-request-groups extension,MERGED,2021-08-23 13:06:31.000000000,2021-10-31 22:11:32.000000000,2021-10-31 22:09:55.000000000,"[{'_account_id': 8313}, {'_account_id': 9708}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 15554}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-23 13:06:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c27dd93a7f1f6ba36044ce9996cea720ac56a1c1', 'message': ""Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nThis extension is enabled by default, but can be optionally disabled\nwith 'port_resource_request_groups_disabled' configuration option.\n\nAbility to disable this extension was necessary to support upgrade\nscenario where the Neutron is already upgraded to Xena but Nova is\nstill on Wallaby version. As the old Nova cannot support the new\nresource_request format, Neutron had to make this new API extension\noptional.\n\nPartial-Bug: #1922237\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n""}, {'number': 2, 'created': '2021-08-25 14:49:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1a870313be74b0dff483c7283d6d941576683f5a', 'message': ""Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nThis extension is enabled by default, but can be optionally disabled\nwith 'port_resource_request_groups_disabled' configuration option.\n\nAbility to disable this extension was necessary to support upgrade\nscenario where the Neutron is already upgraded to Xena but Nova is\nstill on Wallaby version. As the old Nova cannot support the new\nresource_request format, Neutron had to make this new API extension\noptional.\n\nPartial-Bug: #1922237\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n""}, {'number': 3, 'created': '2021-08-31 09:59:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/78cc27c0b1dc20e540faf7b59e1fe6fdcc2d1917', 'message': ""Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nThis extension is enabled by default, but can be optionally disabled\nwith 'port_resource_request_groups_disabled' configuration option.\n\nAbility to disable this extension was necessary to support upgrade\nscenario where the Neutron is already upgraded to Xena but Nova is\nstill on Wallaby version. As the old Nova cannot support the new\nresource_request format, Neutron had to make this new API extension\noptional.\n\nPartial-Bug: #1922237\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n""}, {'number': 4, 'created': '2021-08-31 14:39:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/02b60624e82b08a7707238358962518463c05baa', 'message': ""Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nThis extension is enabled by default, but can be optionally disabled\nwith 'port_resource_request_groups_disabled' configuration option.\n\nAbility to disable this extension was necessary to support upgrade\nscenario where the Neutron is already upgraded to Xena but Nova is\nstill on Wallaby version. As the old Nova cannot support the new\nresource_request format, Neutron had to make this new API extension\noptional.\n\nPartial-Bug: #1922237\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n""}, {'number': 5, 'created': '2021-09-01 08:47:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f4da40095899c9afa7bb4ef849ae5dba49abfc03', 'message': ""Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nThis extension is enabled by default, but can be optionally disabled\nwith 'port_resource_request_groups_disabled' configuration option.\n\nAbility to disable this extension was necessary to support upgrade\nscenario where the Neutron is already upgraded to Xena but Nova is\nstill on Wallaby version. As the old Nova cannot support the new\nresource_request format, Neutron had to make this new API extension\noptional.\n\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/nova/+/805046\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n""}, {'number': 6, 'created': '2021-09-16 14:01:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/5391977a0adfbddc7008bd77a068960cc40bc7c8', 'message': 'Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nCloses-Bug: #1943724\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/nova/+/805046\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n'}, {'number': 7, 'created': '2021-09-17 13:48:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e5e7e1b683fa149bdaacca223d518c49345b4e34', 'message': 'Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nCloses-Bug: #1943724\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/809168/\nDepends-On: https://review.opendev.org/c/openstack/nova/+/805046\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n'}, {'number': 8, 'created': '2021-09-22 06:58:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a7a65596aaa36cc8e402f6ba413ed1a56a88e38b', 'message': 'Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nCloses-Bug: #1943724\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/809168/\nDepends-On: https://review.opendev.org/c/openstack/nova/+/805046\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n'}, {'number': 9, 'created': '2021-09-28 12:43:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/33a0d9ee5bace9765d7fbdd70f695c5e80ba9248', 'message': 'Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nCloses-Bug: #1943724\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/809168/\nDepends-On: https://review.opendev.org/c/openstack/nova/+/805046\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n'}, {'number': 10, 'created': '2021-09-29 10:30:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/9ec5e5849ec3fdf9498d67f119557be9aa7be3c2', 'message': 'Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nCloses-Bug: #1943724\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/809168/\nDepends-On: https://review.opendev.org/c/openstack/nova/+/805046\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n'}, {'number': 11, 'created': '2021-10-11 13:30:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3e905d1cdc48e7b3648c1dd5e8bd9c31b16abbfb', 'message': 'Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nCloses-Bug: #1943724\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/809168/\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n'}, {'number': 12, 'created': '2021-10-22 13:59:09.000000000', 'files': ['neutron/tests/unit/plugins/ml2/drivers/openvswitch/mech_driver/test_mech_openvswitch.py', 'neutron/services/qos/qos_plugin.py', 'neutron/tests/unit/plugins/ml2/test_managers.py', 'neutron/exceptions/qos.py', 'neutron/plugins/ml2/managers.py', 'neutron/extensions/port_resource_request_groups.py', 'neutron/plugins/ml2/drivers/mech_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/mech_sriov/mech_driver/test_mech_sriov_nic_switch.py', 'releasenotes/notes/port-resource-request-groups-516820eed2fc659b.yaml', 'neutron/tests/unit/services/qos/test_qos_plugin.py', 'neutron/exceptions/__init__.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/8db15cb2f3dec37441103df15ff28c7e72de682c', 'message': 'Add port-resource-request-groups extension\n\nport-resource-request-groups extension provides support for the\nnew format of resource_request. The new format allows to request\nmultiple groups of resources and traits from the same RP subtree.\n\nCloses-Bug: #1943724\nPartial-Bug: #1922237\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/809168/\nSee-Also: https://review.opendev.org/785236\nChange-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07\n'}]",18,805637,8db15cb2f3dec37441103df15ff28c7e72de682c,197,7,12,33652,,,0,"Add port-resource-request-groups extension

port-resource-request-groups extension provides support for the
new format of resource_request. The new format allows to request
multiple groups of resources and traits from the same RP subtree.

Closes-Bug: #1943724
Partial-Bug: #1922237
Depends-On: https://review.opendev.org/c/openstack/tempest/+/809168/
See-Also: https://review.opendev.org/785236
Change-Id: I99a49b107b1872ddf83d1d8497a26a8d728feb07
",git fetch https://review.opendev.org/openstack/neutron refs/changes/37/805637/6 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/services/qos/qos_plugin.py', 'neutron/extensions/port_resource_request_groups.py', 'neutron/conf/common.py', 'neutron/tests/unit/services/qos/test_qos_plugin.py']",4,c27dd93a7f1f6ba36044ce9996cea720ac56a1c1,bp/qos-minimum-guaranteed-packet-rate," def _create_and_extend_port(self, min_bw_rules, min_pps_rules=None, physical_network='public', has_qos_policy=True, has_net_qos_policy=False, request_groups_supported=True, request_groups_uuids=None): min_pps_rules = min_pps_rules if min_pps_rules else [] return_value=min_bw_rules), \ mock.patch( 'neutron.objects.qos.rule.QosMinimumPacketRateRule.' 'get_objects', return_value=min_pps_rules), \ mock.patch( 'neutron_lib.api.extensions.is_extension_supported', return_value=request_groups_supported), \ mock.patch( 'uuid.uuid5', return_value='fake_uuid', side_effect=request_groups_uuids): def _create_and_extend_ports(self, min_bw_rules, min_pps_rules=None, physical_network='public', request_groups_supported=True, request_groups_uuids=None): network_id = uuidutils.generate_uuid() ports_res = [ { ""resource_request"": { ""port_id"": uuidutils.generate_uuid(), ""qos_id"": self.policy.id, ""network_id"": network_id, ""vnic_type"": ""normal"", } }, { ""resource_request"": { ""port_id"": uuidutils.generate_uuid(), ""qos_id"": self.policy.id, ""network_id"": network_id, ""vnic_type"": ""normal"", } }, ] segment_mock = mock.MagicMock(network_id=network_id, physical_network=physical_network) min_pps_rules = min_pps_rules if min_pps_rules else [] with mock.patch('neutron.objects.network.NetworkSegment.get_objects', return_value=[segment_mock]), \ mock.patch( 'neutron.objects.qos.rule.QosMinimumBandwidthRule.' 'get_objects', return_value=min_bw_rules), \ mock.patch( 'neutron.objects.qos.rule.QosMinimumPacketRateRule.' 'get_objects', return_value=min_pps_rules), \ mock.patch( 'neutron_lib.api.extensions.is_extension_supported', return_value=request_groups_supported), \ mock.patch( 'uuid.uuid5', return_value='fake_uuid', side_effect=request_groups_uuids): return qos_plugin.QoSPlugin._extend_port_resource_request_bulk( ports_res, None) def test__extend_port_resource_request_min_bw_rule_legacy(self): port = self._create_and_extend_port( [self.min_bw_rule], request_groups_supported=False) def test__extend_port_resource_request_min_pps_rule_legacy(self): port = self._create_and_extend_port( [], [self.min_pps_rule], request_groups_supported=False) self.assertEqual( ['CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['required'] ) self.assertEqual( {orc.NET_PACKET_RATE_KILOPACKET_PER_SEC: 10}, port['resource_request']['resources'], ) def test__extend_port_resource_request_mixed_min_bw_rules_legacy(self): [self.min_bw_rule, min_bw_rule_ingress], request_groups_supported=False) def test__extend_port_resource_request_mixed_min_pps_rules_legacy(self): self.min_pps_rule.direction = lib_constants.EGRESS_DIRECTION min_pps_rule_ingress_data = { 'id': uuidutils.generate_uuid(), 'min_kpps': 20, 'direction': lib_constants.INGRESS_DIRECTION} min_pps_rule_ingress = rule_object.QosMinimumPacketRateRule( self.ctxt, **min_pps_rule_ingress_data) port = self._create_and_extend_port( [], [self.min_pps_rule, min_pps_rule_ingress], request_groups_supported=False) self.assertEqual( ['CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['required'] ) self.assertEqual( { orc.NET_PACKET_RATE_EGR_KILOPACKET_PER_SEC: 10, orc.NET_PACKET_RATE_IGR_KILOPACKET_PER_SEC: 20 }, port['resource_request']['resources'], ) def test__extend_port_resource_request_min_bw_and_pps_rule_legacy(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION self.assertRaises( NotImplementedError, self._create_and_extend_port, [self.min_bw_rule], [self.min_pps_rule], request_groups_supported=False) def test__extend_port_resource_request_non_min_bw_or_min_pps_rule_legacy( self): port = self._create_and_extend_port( [], [], request_groups_supported=False) def test__extend_port_resource_request_min_bw_non_provider_net_legacy( self): physical_network=None, request_groups_supported=False) def test__extend_port_resource_request_mix_rules_non_provider_net_legacy( self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION self.min_pps_rule.direction = lib_constants.INGRESS_DIRECTION port = self._create_and_extend_port([self.min_bw_rule], [self.min_pps_rule], physical_network=None, request_groups_supported=False) self.assertEqual( ['CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['required'] ) self.assertEqual( {orc.NET_PACKET_RATE_IGR_KILOPACKET_PER_SEC: 10}, port['resource_request']['resources'], ) def test__extend_port_resource_request_no_qos_policy_legacy(self): has_qos_policy=False, request_groups_supported=False) def test__extend_port_resource_request_min_bw_inherited_policy_legacy( self): has_net_qos_policy=True, request_groups_supported=False) def test__extend_port_resource_request_min_bw_rule(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION port = self._create_and_extend_port([self.min_bw_rule]) self.assertEqual( 1, len(port['resource_request']['request_groups']) ) self.assertEqual( 'fake_uuid', port['resource_request']['request_groups'][0]['id'] ) self.assertEqual( ['CUSTOM_PHYSNET_PUBLIC', 'CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['request_groups'][0]['required'] ) self.assertEqual( {orc.NET_BW_EGR_KILOBIT_PER_SEC: 10}, port['resource_request']['request_groups'][0]['resources'], ) self.assertEqual( ['fake_uuid'], port['resource_request']['same_subtree'], ) def test__extend_port_resource_request_min_pps_rule(self): port = self._create_and_extend_port([], [self.min_pps_rule]) self.assertEqual( 1, len(port['resource_request']['request_groups']) ) self.assertEqual( 'fake_uuid', port['resource_request']['request_groups'][0]['id'] ) self.assertEqual( ['CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['request_groups'][0]['required'] ) self.assertEqual( {orc.NET_PACKET_RATE_KILOPACKET_PER_SEC: 10}, port['resource_request']['request_groups'][0]['resources'], ) self.assertEqual( ['fake_uuid'], port['resource_request']['same_subtree'], ) def test__extend_port_resource_request_min_bw_and_pps_rule(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION self.min_pps_rule.direction = lib_constants.EGRESS_DIRECTION request_groups_uuids = ['fake_uuid0', 'fake_uuid1'] min_bw_rule_ingress_data = { 'id': uuidutils.generate_uuid(), 'min_kbps': 20, 'direction': lib_constants.INGRESS_DIRECTION} min_pps_rule_ingress_data = { 'id': uuidutils.generate_uuid(), 'min_kpps': 20, 'direction': lib_constants.INGRESS_DIRECTION} min_bw_rule_ingress = rule_object.QosMinimumBandwidthRule( self.ctxt, **min_bw_rule_ingress_data) min_pps_rule_ingress = rule_object.QosMinimumPacketRateRule( self.ctxt, **min_pps_rule_ingress_data) port = self._create_and_extend_port( [self.min_bw_rule, min_bw_rule_ingress], [self.min_pps_rule, min_pps_rule_ingress], request_groups_uuids=request_groups_uuids) self.assertEqual( 2, len(port['resource_request']['request_groups']) ) self.assertIn( { 'id': 'fake_uuid0', 'required': ['CUSTOM_PHYSNET_PUBLIC', 'CUSTOM_VNIC_TYPE_NORMAL'], 'resources': { orc.NET_BW_EGR_KILOBIT_PER_SEC: 10, orc.NET_BW_IGR_KILOBIT_PER_SEC: 20}, }, port['resource_request']['request_groups'] ) self.assertIn( { 'id': 'fake_uuid1', 'required': ['CUSTOM_VNIC_TYPE_NORMAL'], 'resources': { orc.NET_PACKET_RATE_EGR_KILOPACKET_PER_SEC: 10, orc.NET_PACKET_RATE_IGR_KILOPACKET_PER_SEC: 20, }, }, port['resource_request']['request_groups'] ) self.assertEqual( ['fake_uuid0', 'fake_uuid1'], port['resource_request']['same_subtree'], ) def test__extend_port_resource_request_non_min_bw_or_min_pps_rule(self): port = self._create_and_extend_port([], []) self.assertIsNone(port.get('resource_request')) def test__extend_port_resource_request_min_bw_non_provider_net(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION port = self._create_and_extend_port([self.min_bw_rule], physical_network=None) self.assertIsNone(port.get('resource_request')) def test__extend_port_resource_request_mix_rules_non_provider_net(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION port = self._create_and_extend_port([self.min_bw_rule], [self.min_pps_rule], physical_network=None) self.assertEqual( 1, len(port['resource_request']['request_groups']) ) self.assertEqual( 'fake_uuid', port['resource_request']['request_groups'][0]['id'] ) self.assertEqual( ['CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['request_groups'][0]['required'] ) self.assertEqual( {orc.NET_PACKET_RATE_KILOPACKET_PER_SEC: 10}, port['resource_request']['request_groups'][0]['resources'], ) self.assertEqual( ['fake_uuid'], port['resource_request']['same_subtree'], ) def test__extend_port_resource_request_bulk_min_bw_rule_legacy(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION ports = self._create_and_extend_ports( [self.min_bw_rule], request_groups_supported=False) for port in ports: self.assertEqual( ['CUSTOM_PHYSNET_PUBLIC', 'CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['required'] ) self.assertEqual( {orc.NET_BW_EGR_KILOBIT_PER_SEC: 10}, port['resource_request']['resources'], ) def test__extend_port_resource_request_bulk_min_pps_rule_legacy(self): ports = self._create_and_extend_ports( [], [self.min_pps_rule], request_groups_supported=False) for port in ports: self.assertEqual( ['CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['required'] ) self.assertEqual( {orc.NET_PACKET_RATE_KILOPACKET_PER_SEC: 10}, port['resource_request']['resources'], ) def test__extend_port_resource_request_bulk_min_bw_and_pps_rule_legacy( self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION self.assertRaises( NotImplementedError, self._create_and_extend_ports, [self.min_bw_rule], [self.min_pps_rule], request_groups_supported=False) def test__extend_port_resource_request_bulk_min_bw_rule(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION ports = self._create_and_extend_ports([self.min_bw_rule]) for port in ports: self.assertEqual( 1, len(port['resource_request']['request_groups']) ) self.assertEqual( 'fake_uuid', port['resource_request']['request_groups'][0]['id'] ) self.assertEqual( ['CUSTOM_PHYSNET_PUBLIC', 'CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['request_groups'][0]['required'] ) self.assertEqual( {orc.NET_BW_EGR_KILOBIT_PER_SEC: 10}, port['resource_request']['request_groups'][0]['resources'], ) self.assertEqual( ['fake_uuid'], port['resource_request']['same_subtree'], ) def test__extend_port_resource_request_bulk_min_pps_rule(self): ports = self._create_and_extend_ports([], [self.min_pps_rule]) for port in ports: self.assertEqual( 1, len(port['resource_request']['request_groups']) ) self.assertEqual( 'fake_uuid', port['resource_request']['request_groups'][0]['id'] ) self.assertEqual( ['CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['request_groups'][0]['required'] ) self.assertEqual( {orc.NET_PACKET_RATE_KILOPACKET_PER_SEC: 10}, port['resource_request']['request_groups'][0]['resources'], ) self.assertEqual( ['fake_uuid'], port['resource_request']['same_subtree'], ) def test__extend_port_resource_request_bulk_min_bw_and_pps_rule(self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION self.min_pps_rule.direction = lib_constants.EGRESS_DIRECTION request_groups_uuids = ['fake_uuid0', 'fake_uuid1'] * 2 min_bw_rule_ingress_data = { 'id': uuidutils.generate_uuid(), 'min_kbps': 20, 'direction': lib_constants.INGRESS_DIRECTION} min_pps_rule_ingress_data = { 'id': uuidutils.generate_uuid(), 'min_kpps': 20, 'direction': lib_constants.INGRESS_DIRECTION} min_bw_rule_ingress = rule_object.QosMinimumBandwidthRule( self.ctxt, **min_bw_rule_ingress_data) min_pps_rule_ingress = rule_object.QosMinimumPacketRateRule( self.ctxt, **min_pps_rule_ingress_data) ports = self._create_and_extend_ports( [self.min_bw_rule, min_bw_rule_ingress], [self.min_pps_rule, min_pps_rule_ingress], request_groups_uuids=request_groups_uuids) for port in ports: self.assertEqual( 2, len(port['resource_request']['request_groups']) ) self.assertIn( { 'id': 'fake_uuid0', 'required': ['CUSTOM_PHYSNET_PUBLIC', 'CUSTOM_VNIC_TYPE_NORMAL'], 'resources': { orc.NET_BW_EGR_KILOBIT_PER_SEC: 10, orc.NET_BW_IGR_KILOBIT_PER_SEC: 20}, }, port['resource_request']['request_groups'] ) self.assertIn( { 'id': 'fake_uuid1', 'required': ['CUSTOM_VNIC_TYPE_NORMAL'], 'resources': { orc.NET_PACKET_RATE_EGR_KILOPACKET_PER_SEC: 10, orc.NET_PACKET_RATE_IGR_KILOPACKET_PER_SEC: 20, }, }, port['resource_request']['request_groups'] ) self.assertEqual( ['fake_uuid0', 'fake_uuid1'], port['resource_request']['same_subtree'], ) def test__extend_port_resource_request_no_qos_policy(self): port = self._create_and_extend_port([], physical_network='public', has_qos_policy=False) self.assertIsNone(port.get('resource_request')) def test__extend_port_resource_request_min_bw_inherited_policy( self): self.min_bw_rule.direction = lib_constants.EGRESS_DIRECTION self.min_bw_rule.qos_policy_id = self.policy.id port = self._create_and_extend_port([self.min_bw_rule], has_net_qos_policy=True) self.assertEqual( 1, len(port['resource_request']['request_groups']) ) self.assertEqual( 'fake_uuid', port['resource_request']['request_groups'][0]['id'] ) self.assertEqual( ['CUSTOM_PHYSNET_PUBLIC', 'CUSTOM_VNIC_TYPE_NORMAL'], port['resource_request']['request_groups'][0]['required'] ) self.assertEqual( {orc.NET_BW_EGR_KILOBIT_PER_SEC: 10}, port['resource_request']['request_groups'][0]['resources'], ) self.assertEqual( ['fake_uuid'], port['resource_request']['same_subtree'], ) "," def _create_and_extend_port(self, bw_rules, physical_network='public', has_qos_policy=True, has_net_qos_policy=False): return_value=bw_rules): def test__extend_port_resource_request_min_bw_rule(self): port = self._create_and_extend_port([self.min_bw_rule]) def test__extend_port_resource_request_mixed_rules(self): [self.min_bw_rule, min_bw_rule_ingress]) def test__extend_port_resource_request_non_min_bw_rule(self): port = self._create_and_extend_port([]) def test__extend_port_resource_request_non_provider_net(self): physical_network=None) def test__extend_port_resource_request_no_qos_policy(self): has_qos_policy=False) def test__extend_port_resource_request_inherited_policy(self): has_net_qos_policy=True)",660,44
openstack%2Ftripleo-common~master~Iaae78353e1d9c7c645d96bcb4b58a3b65422d379,openstack/tripleo-common,master,Iaae78353e1d9c7c645d96bcb4b58a3b65422d379,DNM test OVB with tc patch,ABANDONED,2021-10-27 15:16:55.000000000,2021-10-31 10:11:18.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 15:16:55.000000000', 'files': ['tripleo_common/utils/roles.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/cd93b9f1174641345e5bb2947ed3fc2a04641682', 'message': 'DNM test OVB with tc patch\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/806284/\nChange-Id: Iaae78353e1d9c7c645d96bcb4b58a3b65422d379\n'}]",0,815695,cd93b9f1174641345e5bb2947ed3fc2a04641682,4,2,1,10969,,,0,"DNM test OVB with tc patch

Depends-On: https://review.opendev.org/c/openstack/tripleo-quickstart-extras/+/806284/
Change-Id: Iaae78353e1d9c7c645d96bcb4b58a3b65422d379
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/95/815695/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/utils/roles.py'],1,cd93b9f1174641345e5bb2947ed3fc2a04641682,testng,# test,,1,0
openstack%2Fpython-freezerclient~master~I6ea692497141fe9c2199ab07ba653cc7b0d55087,openstack/python-freezerclient,master,I6ea692497141fe9c2199ab07ba653cc7b0d55087,update  type hint for Client,MERGED,2021-10-31 00:24:53.000000000,2021-10-31 09:02:18.000000000,2021-10-31 09:00:36.000000000,"[{'_account_id': 21069}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-31 00:24:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-freezerclient/commit/28ad70b7ceaa0b8215965b4fbbc59f464f31f6ec', 'message': 'update  type hint for Client\n\nChange-Id: I6ea692497141fe9c2199ab07ba653cc7b0d55087\n'}, {'number': 2, 'created': '2021-10-31 04:43:54.000000000', 'files': ['freezerclient/client.py'], 'web_link': 'https://opendev.org/openstack/python-freezerclient/commit/35f701fbd4a81932ae59de7b758525983c9ceef3', 'message': 'update  type hint for Client\n\nChange-Id: I6ea692497141fe9c2199ab07ba653cc7b0d55087\n'}]",1,816096,35f701fbd4a81932ae59de7b758525983c9ceef3,9,2,2,21069,,,0,"update  type hint for Client

Change-Id: I6ea692497141fe9c2199ab07ba653cc7b0d55087
",git fetch https://review.opendev.org/openstack/python-freezerclient refs/changes/96/816096/2 && git format-patch -1 --stdout FETCH_HEAD,['freezerclient/client.py'],1,28ad70b7ceaa0b8215965b4fbbc59f464f31f6ec,, **kwargs) -> str:, **kwargs) -> Any:,1,1
openstack%2Ftempest~master~Ib0e4b3864aa42455fa52ce098961e11a2ec8d4cb,openstack/tempest,master,Ib0e4b3864aa42455fa52ce098961e11a2ec8d4cb,Adding Bandwidth Limit QoS rule client to Manager,MERGED,2021-10-25 09:55:10.000000000,2021-10-31 07:42:47.000000000,2021-10-31 07:41:17.000000000,"[{'_account_id': 5803}, {'_account_id': 8556}, {'_account_id': 11075}, {'_account_id': 11975}, {'_account_id': 18894}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 28609}]","[{'number': 1, 'created': '2021-10-25 09:55:10.000000000', 'files': ['tempest/lib/services/network/__init__.py', 'tempest/clients.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/92ca258fadf2310b3ecf84ec6ed194aee1f626ed', 'message': 'Adding Bandwidth Limit QoS rule client to Manager\n\n- Bandwidth Limit Quality of Service rule was added\nrecently (test_qos_limit_bandwidth_rules_client.py).\n- There were some places that the references to the\nnewly added QosLimitBandwidthRulesClient was missing.\n\nSo the following changes were done:\n- Added QosLimitBandwidthRulesClient reference that was\nmissing in clients.py.\n- Imported QosLimitBandwidthRulesClient from the newly added\ntempest.lib.services.network.qos_limit_bandwidth_rules_client\nto __init.py.\n- Added QosLimitBandwidthRulesClient reference that was\nmissing from __init__.py.\n\nChange-Id: Ib0e4b3864aa42455fa52ce098961e11a2ec8d4cb\n'}]",3,815266,92ca258fadf2310b3ecf84ec6ed194aee1f626ed,14,8,1,29681,,,0,"Adding Bandwidth Limit QoS rule client to Manager

- Bandwidth Limit Quality of Service rule was added
recently (test_qos_limit_bandwidth_rules_client.py).
- There were some places that the references to the
newly added QosLimitBandwidthRulesClient was missing.

So the following changes were done:
- Added QosLimitBandwidthRulesClient reference that was
missing in clients.py.
- Imported QosLimitBandwidthRulesClient from the newly added
tempest.lib.services.network.qos_limit_bandwidth_rules_client
to __init.py.
- Added QosLimitBandwidthRulesClient reference that was
missing from __init__.py.

Change-Id: Ib0e4b3864aa42455fa52ce098961e11a2ec8d4cb
",git fetch https://review.opendev.org/openstack/tempest refs/changes/66/815266/1 && git format-patch -1 --stdout FETCH_HEAD,"['tempest/lib/services/network/__init__.py', 'tempest/clients.py']",2,92ca258fadf2310b3ecf84ec6ed194aee1f626ed,add_bw_limit_to_manager, self.qos_limit_bw_client = self.network.QosLimitBandwidthRulesClient(),,6,2
openstack%2Frequirements~master~Id3643f69742ace121026a3794c6f4bb88d6c59c4,openstack/requirements,master,Id3643f69742ace121026a3794c6f4bb88d6c59c4,update constraint for os-api-ref to new release 2.3.0,MERGED,2021-10-28 10:55:21.000000000,2021-10-31 05:40:39.000000000,2021-10-31 05:39:02.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-28 10:55:21.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/c085cf142f4af68cc31c587a6f2c903bfb3470e2', 'message': 'update constraint for os-api-ref to new release 2.3.0\n\nmeta: version: 2.3.0\nmeta: diff-start: -\nmeta: series: independent\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: no\nmeta: release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: Ib6f9b4096ae6cdb1cbd9f495c19e19da0e855aec\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: Id3643f69742ace121026a3794c6f4bb88d6c59c4\n'}]",0,815822,c085cf142f4af68cc31c587a6f2c903bfb3470e2,30,3,1,11131,,,0,"update constraint for os-api-ref to new release 2.3.0

meta: version: 2.3.0
meta: diff-start: -
meta: series: independent
meta: release-type: release
meta: pypi: no
meta: first: no
meta: release:Author: Hervé Beraud <hberaud@redhat.com>
meta: release:Commit: Hervé Beraud <hberaud@redhat.com>
meta: release:Change-Id: Ib6f9b4096ae6cdb1cbd9f495c19e19da0e855aec
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: Id3643f69742ace121026a3794c6f4bb88d6c59c4
",git fetch https://review.opendev.org/openstack/requirements refs/changes/22/815822/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,c085cf142f4af68cc31c587a6f2c903bfb3470e2,new-release,os-api-ref===2.3.0,os-api-ref===2.2.0,1,1
openstack%2Frequirements~master~I66cb42d3f0b7bed8bb332ee5e679291e61e136c6,openstack/requirements,master,I66cb42d3f0b7bed8bb332ee5e679291e61e136c6,update constraint for oslo.messaging to new release 12.11.0,MERGED,2021-10-28 10:54:55.000000000,2021-10-31 05:10:29.000000000,2021-10-31 05:08:48.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-28 10:54:55.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/0964f5c66c048d22005617821fce9495895c9eed', 'message': 'update constraint for oslo.messaging to new release 12.11.0\n\nmeta: version: 12.11.0\nmeta: diff-start: -\nmeta: series: yoga\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: I3639006a3c87a6c2fb67f146ef8288b785dd8b6f\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: I66cb42d3f0b7bed8bb332ee5e679291e61e136c6\n'}]",0,815821,0964f5c66c048d22005617821fce9495895c9eed,37,3,1,11131,,,0,"update constraint for oslo.messaging to new release 12.11.0

meta: version: 12.11.0
meta: diff-start: -
meta: series: yoga
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Hervé Beraud <hberaud@redhat.com>
meta: release:Commit: Hervé Beraud <hberaud@redhat.com>
meta: release:Change-Id: I3639006a3c87a6c2fb67f146ef8288b785dd8b6f
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: I66cb42d3f0b7bed8bb332ee5e679291e61e136c6
",git fetch https://review.opendev.org/openstack/requirements refs/changes/21/815821/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,0964f5c66c048d22005617821fce9495895c9eed,new-release,oslo.messaging===12.11.0,oslo.messaging===12.10.0,1,1
openstack%2Fdesignate-tempest-plugin~master~I6e924d5ba9b411b427e9eed358a90e9ece56156d,openstack/designate-tempest-plugin,master,I6e924d5ba9b411b427e9eed358a90e9ece56156d,New test cases for blacklist test suite,MERGED,2021-06-29 16:46:37.000000000,2021-10-31 00:14:55.000000000,2021-10-31 00:13:35.000000000,"[{'_account_id': 7616}, {'_account_id': 11628}, {'_account_id': 13252}, {'_account_id': 15025}, {'_account_id': 18894}, {'_account_id': 19298}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 29681}]","[{'number': 1, 'created': '2021-06-29 16:46:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/d6b1b10f0d074dd934dd00112cf8eb3b1126f510', 'message': 'New test cases for blacklist test suite\n\n1) test_create_blacklist_as_primary_fails\n   Primary user is not allowed to create blacklist.\n2) test_create_zone_fails_if_matches_blacklist_regex\n   Zone is failed to be created if its name matches existing blacklist regex.\n3) test_create_zone_fails_if_matches_blacklist_name\n   Zone is failed to be created if its name is in blacklist.\n\nChange-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d\n'}, {'number': 2, 'created': '2021-06-30 09:29:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/f0b2ded213e7afecab0fb1c87a7caf549391fe77', 'message': 'New test cases for blacklist test suite\n\n1) test_create_blacklist_as_primary_fails\n   Primary user is not allowed to create blacklist.\n2) test_primary_fails_to_create_zone_matches_blacklist_regex\n   Zone is failed to be created if its name matches existing\n   blacklist regex.\n3) test_primary_fails_to_create_zone_matches_blacklist_name\n   Zone is failed to be created if its name is in blacklist.\n4) test_admin_creates_zone_matches_blacklist_name_or_regex\n   Users with the Admin role bypass the deny list check.\n\nChange-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d\n'}, {'number': 3, 'created': '2021-07-01 08:56:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/0d467623aa56c677e6f49f4d3cf404af11115632', 'message': 'New test cases for blacklist test suite\n\n1) test_create_blacklist_as_primary_fails\n   Primary user is not allowed to create blacklist.\n2) test_primary_fails_to_create_zone_matches_blacklist_regex\n   Zone is failed to be created if its name matches existing\n   blacklist regex.\n3) test_primary_fails_to_create_zone_matches_blacklist_name\n   Zone is failed to be created if its name is in blacklist.\n4) test_admin_creates_zone_matches_blacklist_name_or_regex\n   Users with the Admin role bypass the deny list check.\n5) test_create_blacklist_invalid_pattern\n   Create blacklist using invalid patterns.\n6) test_create_blacklist_huge_size_description\n   Create blacklist using huge size description string.\n\nChange-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d\n'}, {'number': 4, 'created': '2021-07-06 09:25:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/551e4d19e97ed18be00fde5a3356dff30544ccc8', 'message': 'New test cases for blacklist test suite\n\n1) test_create_blacklist_as_primary_fails\n   Primary user is not allowed to create blacklist.\n2) test_primary_fails_to_create_zone_matches_blacklist_regex\n   Zone is failed to be created if its name matches existing\n   blacklist regex.\n3) test_primary_fails_to_create_zone_matches_blacklist_name\n   Zone is failed to be created if its name is in blacklist.\n4) test_admin_creates_zone_matches_blacklist_name_or_regex\n   Users with the Admin role bypass the deny list check.\n5) test_create_blacklist_invalid_pattern\n   Create blacklist using invalid patterns.\n6) test_create_blacklist_huge_size_description\n   Create blacklist using huge size description string.\n\nChange-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d\n'}, {'number': 5, 'created': '2021-07-06 10:41:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/03be5ec2fe4c389a32d9a688226369d1fdfddc36', 'message': 'New test cases for blacklist test suite\n\n1) test_create_blacklist_as_primary_fails\n   Primary user is not allowed to create blacklist.\n2) test_primary_fails_to_create_zone_matches_blacklist_regex\n   Zone is failed to be created if its name matches existing\n   blacklist regex.\n3) test_primary_fails_to_create_zone_matches_blacklist_name\n   Zone is failed to be created if its name is in blacklist.\n4) test_admin_creates_zone_matches_blacklist_name_or_regex\n   Users with the Admin role bypass the deny list check.\n5) test_create_blacklist_invalid_pattern\n   Create blacklist using invalid patterns.\n6) test_create_blacklist_huge_size_description\n   Create blacklist using huge size description string.\n\nChange-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d\n'}, {'number': 6, 'created': '2021-10-19 10:05:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/85dce8e4c34a03e664491401beb4ba3b40a55128', 'message': 'New test cases for blacklist test suite\n\n1) test_create_blacklist_as_primary_fails\n   Primary user is not allowed to create blacklist.\n2) test_primary_fails_to_create_zone_matches_blacklist_regex\n   Zone is failed to be created if its name matches existing\n   blacklist regex.\n3) test_primary_fails_to_create_zone_matches_blacklist_name\n   Zone is failed to be created if its name is in blacklist.\n4) test_admin_creates_zone_matches_blacklist_name_or_regex\n   Users with the Admin role bypass the deny list check.\n5) test_create_blacklist_invalid_pattern\n   Create blacklist using invalid patterns.\n6) test_create_blacklist_huge_size_description\n   Create blacklist using huge size description string.\n\nChange-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d\n'}, {'number': 7, 'created': '2021-10-25 11:31:32.000000000', 'files': ['designate_tempest_plugin/tests/api/v2/test_blacklists.py', 'designate_tempest_plugin/tests/scenario/v2/test_blacklists.py', 'designate_tempest_plugin/services/dns/v2/json/blacklists_client.py'], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/f0afa236668b9315ed6e05bf11a4efc278727d76', 'message': 'New test cases for blacklist test suite\n\n1) test_create_blacklist_as_primary_fails\n   Primary user is not allowed to create blacklist.\n2) test_primary_fails_to_create_zone_matches_blacklist_regex\n   Zone is failed to be created if its name matches existing\n   blacklist regex.\n3) test_primary_fails_to_create_zone_matches_blacklist_name\n   Zone is failed to be created if its name is in blacklist.\n4) test_admin_creates_zone_matches_blacklist_name_or_regex\n   Users with the Admin role bypass the deny list check.\n5) test_create_blacklist_invalid_pattern\n   Create blacklist using invalid patterns.\n6) test_create_blacklist_huge_size_description\n   Create blacklist using huge size description string.\n\nChange-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d\n'}]",19,798715,f0afa236668b9315ed6e05bf11a4efc278727d76,48,9,7,28609,,,0,"New test cases for blacklist test suite

1) test_create_blacklist_as_primary_fails
   Primary user is not allowed to create blacklist.
2) test_primary_fails_to_create_zone_matches_blacklist_regex
   Zone is failed to be created if its name matches existing
   blacklist regex.
3) test_primary_fails_to_create_zone_matches_blacklist_name
   Zone is failed to be created if its name is in blacklist.
4) test_admin_creates_zone_matches_blacklist_name_or_regex
   Users with the Admin role bypass the deny list check.
5) test_create_blacklist_invalid_pattern
   Create blacklist using invalid patterns.
6) test_create_blacklist_huge_size_description
   Create blacklist using huge size description string.

Change-Id: I6e924d5ba9b411b427e9eed358a90e9ece56156d
",git fetch https://review.opendev.org/openstack/designate-tempest-plugin refs/changes/15/798715/5 && git format-patch -1 --stdout FETCH_HEAD,['designate_tempest_plugin/tests/api/v2/test_blacklists.py'],1,d6b1b10f0d074dd934dd00112cf8eb3b1126f510,blacklist_new_tests," credentials = [""admin"", ""primary""] cls.primary_client = cls.os_primary.blacklists_client @decorators.idempotent_id('fe9de464-d8d1-11eb-bcdc-74e5f9e2a801') def test_create_blacklist_as_primary_fails(self): LOG.info('As Primary user, try to create a blacklist') self.assertRaises( lib_exc.Forbidden, self.primary_client.create_blacklist) class BlacklistsWithZonesAdminTest(BaseBlacklistsTest): credentials = [""admin""] @classmethod def setup_credentials(cls): # Do not create network resources for these test. cls.set_network_resources() super(BlacklistsWithZonesAdminTest, cls).setup_credentials() @classmethod def setup_clients(cls): super(BlacklistsWithZonesAdminTest, cls).setup_clients() cls.admin_blacklist_client = cls.os_admin.blacklists_client cls.admin_zone_client = cls.os_admin.zones_client @decorators.idempotent_id('22b1ee72-d8d2-11eb-bcdc-74e5f9e2a801') def test_create_zone_fails_if_matches_blacklist_regex(self): LOG.info('Create a blacklist') blacklist = { 'pattern': '^a', 'description': 'All zone names starts with ""a"" ' 'character are blocked'} body = self.admin_blacklist_client.create_blacklist(**blacklist)[1] self.addCleanup( self.admin_blacklist_client.delete_blacklist, body['id']) LOG.info('Try to create a zone started with ""a"" character') # self.admin_zone_client.create_zone( # name='a'+dns_data_utils.rand_zone_name()) self.assertRaisesDns( lib_exc.BadRequest, 'invalid_zone_name', 400, self.admin_zone_client.create_zone, name='a' + dns_data_utils.rand_zone_name()) @decorators.idempotent_id('6956f20c-d8d5-11eb-bcdc-74e5f9e2a801') def test_create_zone_fails_if_matches_blacklist_name(self): LOG.info('Create a blacklist') zone_name = dns_data_utils.rand_zone_name() blacklist = { 'pattern': zone_name, 'description': 'Zone named:{} '.format(zone_name)} body = self.admin_blacklist_client.create_blacklist(**blacklist)[1] self.addCleanup( self.admin_blacklist_client.delete_blacklist, body['id']) LOG.info('Try to create a zone named:{}'.format(zone_name)) # self.admin_zone_client.create_zone(name=zone_name) self.assertRaisesDns( lib_exc.BadRequest, 'invalid_zone_name', 400, self.admin_zone_client.create_zone, name=zone_name)"," credentials = [""admin""]",65,1
openstack%2Frequirements~master~I6919548e4f313b76c849ebf15d5e50a8015cff8c,openstack/requirements,master,I6919548e4f313b76c849ebf15d5e50a8015cff8c,Updated from generate-constraints,MERGED,2021-10-29 02:49:42.000000000,2021-10-31 00:13:03.000000000,2021-10-31 00:11:41.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-29 02:49:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/905b4a652042f5cee61e66ea4ed806dc37ce5b0c', 'message': 'Updated from generate-constraints\n\nChange-Id: I6919548e4f313b76c849ebf15d5e50a8015cff8c\n'}, {'number': 2, 'created': '2021-10-29 15:21:54.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/43922cbcbe8ca82fe67335c2918955e20ed8a266', 'message': 'Updated from generate-constraints\n\nChange-Id: I6919548e4f313b76c849ebf15d5e50a8015cff8c\nSigned-off-by: Matthew Thode <mthode@mthode.org>\n'}]",0,815930,43922cbcbe8ca82fe67335c2918955e20ed8a266,39,2,2,11131,,,0,"Updated from generate-constraints

Change-Id: I6919548e4f313b76c849ebf15d5e50a8015cff8c
Signed-off-by: Matthew Thode <mthode@mthode.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/30/815930/2 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,905b4a652042f5cee61e66ea4ed806dc37ce5b0c,openstack/requirements/constraints/noclob,os-api-ref===2.3.0oslo.concurrency===4.5.0XStatic-Angular===1.8.2.1google-api-core===2.2.1oslo.messaging===12.11.0pkg_resources===0.0.0boto3===1.19.6protobuf===3.19.1botocore===1.22.6Django===3.2.8types-cryptography===3.3.8dulwich===0.20.26oslo.policy===3.10.0fasteners===0.16.3,os-api-ref===2.2.0oslo.concurrency===4.4.1XStatic-Angular===1.5.8.0google-api-core===2.2.0oslo.messaging===12.10.0boto3===1.19.5protobuf===3.19.0botocore===1.22.5Django===2.2.24types-cryptography===3.3.7dulwich===0.20.25oslo.policy===3.9.0fasteners===0.14.1setuptools===58.3.0,14,14
openstack%2Fironic~stable%2Fxena~I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae,openstack/ironic,stable/xena,I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae,Fix various issues in the anaconda deploy interface,MERGED,2021-10-28 16:16:06.000000000,2021-10-30 08:53:52.000000000,2021-10-30 08:52:06.000000000,"[{'_account_id': 6618}, {'_account_id': 12640}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-28 16:16:06.000000000', 'files': ['doc/source/admin/anaconda-deploy-interface.rst', 'ironic/drivers/modules/deploy_utils.py', 'ironic/drivers/modules/pxe.py', 'ironic/tests/unit/drivers/modules/test_pxe.py', 'ironic/drivers/modules/ks.cfg.template', 'ironic/common/pxe_utils.py', 'releasenotes/notes/fix-anaconda-deploy-interface-bfa2cfca22b04680.yaml', 'ironic/tests/unit/drivers/modules/test_deploy_utils.py', 'ironic/tests/unit/common/test_pxe_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/c9297ce7842172b0e6684698fc27af01bd544273', 'message': ""Fix various issues in the anaconda deploy interface\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nFix a bug where the deploy() method of anaconda deploy\ninterface where it did not return states.DEPLOYWAIT instead\nit returned 'None' which caused the instance to go straight to\n'active' instead of 'wait call-back'.\n\nFix issues in the default kickstart template where heartbeat was\nmissing 'callback_url' parameter and the HTTP method should be\n'POST' not 'PUT'.\n\nFix issues with automated cleaning when anaconda deploy interface\nis used.\n\nAnaconda deploy interface could not deploy tarballs as\nthe disk image sent to the anaconda interface via liveimg --url\nkickstart command does not include any file extension. When\nno file extension is present the kickstart command liveimg --url\nassumes the disk is a mountable partiton image. We fix this\nproblem by enabling the user to specify file extensions using\na glance image property named 'disk_file_extension' on the OS\nimage.\n\nCo-Authored-By: Ruby Loo <opensrloo@gmail.com>\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n""}]",4,815808,c9297ce7842172b0e6684698fc27af01bd544273,36,5,1,6618,,,0,"Fix various issues in the anaconda deploy interface

The kickstart template expects a dictionary with 'ks_options'
as the key. Instead build_kickstart_config_options function
returns a dict with keys 'liveimg_url', 'agent_token' and
'heartbeat_url'.

This change fixes this problem by returning a dictionary of
dict with 'ks_options' as key and the dictionary with
keys 'liveimg_url', 'agent_token' and heartbeat_url' as
value.

Fix a bug where the deploy() method of anaconda deploy
interface where it did not return states.DEPLOYWAIT instead
it returned 'None' which caused the instance to go straight to
'active' instead of 'wait call-back'.

Fix issues in the default kickstart template where heartbeat was
missing 'callback_url' parameter and the HTTP method should be
'POST' not 'PUT'.

Fix issues with automated cleaning when anaconda deploy interface
is used.

Anaconda deploy interface could not deploy tarballs as
the disk image sent to the anaconda interface via liveimg --url
kickstart command does not include any file extension. When
no file extension is present the kickstart command liveimg --url
assumes the disk is a mountable partiton image. We fix this
problem by enabling the user to specify file extensions using
a glance image property named 'disk_file_extension' on the OS
image.

Co-Authored-By: Ruby Loo <opensrloo@gmail.com>
Change-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae
",git fetch https://review.opendev.org/openstack/ironic refs/changes/08/815808/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/anaconda-deploy-interface.rst', 'ironic/drivers/modules/deploy_utils.py', 'ironic/drivers/modules/pxe.py', 'ironic/tests/unit/drivers/modules/test_pxe.py', 'ironic/drivers/modules/ks.cfg.template', 'ironic/common/pxe_utils.py', 'releasenotes/notes/fix-anaconda-deploy-interface-bfa2cfca22b04680.yaml', 'ironic/tests/unit/drivers/modules/test_deploy_utils.py', 'ironic/tests/unit/common/test_pxe_utils.py']",9,c9297ce7842172b0e6684698fc27af01bd544273,anaconda-deploy-driver-stable/xena," params = pxe_utils.build_kickstart_config_options(task) self.assertTrue(params['ks_options'].pop('agent_token')) self.assertEqual(expected, params['ks_options']) params = {'liveimg_url': 'http://fake', 'agent_token': 'faketoken', 'heartbeat_url': 'http://fake_hb'} ks_options_mock.return_value = {'ks_options': params} render_mock.assert_called_with( image_info['ks_template'][1], {'ks_options': params} )"," ks_options = pxe_utils.build_kickstart_config_options(task) self.assertTrue(ks_options.pop('agent_token')) self.assertEqual(expected, ks_options) ks_options = {'liveimg_url': 'http://fake', 'agent_token': 'faketoken', 'heartbeat_url': 'http://fake_hb'} ks_options_mock.return_value = ks_options render_mock.assert_called_with(image_info['ks_template'][1], ks_options)",112,33
openstack%2Fdesignate-tempest-plugin~master~I217cbabfd6b0330472b43eb5bd1e57020a19d12f,openstack/designate-tempest-plugin,master,I217cbabfd6b0330472b43eb5bd1e57020a19d12f,"Adding a new test: ""test_create_zone_validate_recordsets_created""",MERGED,2021-08-04 15:04:38.000000000,2021-10-30 08:37:24.000000000,2021-10-30 08:35:37.000000000,"[{'_account_id': 11628}, {'_account_id': 13252}, {'_account_id': 15025}, {'_account_id': 18894}, {'_account_id': 19298}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 29681}, {'_account_id': 31664}]","[{'number': 1, 'created': '2021-08-04 15:04:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/d00069b8951a2ec51cce327be379e4a227d57103', 'message': 'Adding a new test: ""test_create_zone_validate_recordsets_created""\n\nRecordsets types: SOA and NS should be automatically created for a zone.\nThis test validates that it\'s actually happens.\n\nChange-Id: I217cbabfd6b0330472b43eb5bd1e57020a19d12f\n'}, {'number': 2, 'created': '2021-08-08 14:53:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/40bdc2eec8887394047d5445a9fb2cff440ed404', 'message': 'Adding a new test: ""test_create_zones_validate_recordsets_created""\n\nRecordsets types: SOA and NS should be automatically created for a zone.\nThis test validates that it\'s actually happens for both:\nPrimary and Secondary zone types.\n\nChange-Id: I217cbabfd6b0330472b43eb5bd1e57020a19d12f\n'}, {'number': 3, 'created': '2021-08-18 12:49:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/e663f0cc21fd88913368cb145056b521902765ed', 'message': 'Adding a new test: ""test_create_zone_validate_recordsets_created""\n\nRecordsets types: SOA and NS should be automatically created for a zone.\nTest validates this functionality for a Primary type zone.\n\nChange-Id: I217cbabfd6b0330472b43eb5bd1e57020a19d12f\n'}, {'number': 4, 'created': '2021-10-18 19:38:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/1b177bd74447864e56a05c24c48aacf2eec0c1b9', 'message': 'Adding a new test: ""test_create_zone_validate_recordsets_created""\n\nRecordsets types: SOA and NS should be automatically created for a zone.\nTest validates this functionality for a Primary type zone.\n\nChange-Id: I217cbabfd6b0330472b43eb5bd1e57020a19d12f\n'}, {'number': 5, 'created': '2021-10-25 14:56:43.000000000', 'files': ['designate_tempest_plugin/tests/api/v2/test_zones.py'], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/c4059164a99f2dfd29f528d19d01ca1882a10bfe', 'message': 'Adding a new test: ""test_create_zone_validate_recordsets_created""\n\nRecordsets types: SOA and NS should be automatically created for a zone.\nTest validates this functionality for a Primary type zone.\n\nChange-Id: I217cbabfd6b0330472b43eb5bd1e57020a19d12f\n'}]",8,803490,c4059164a99f2dfd29f528d19d01ca1882a10bfe,28,9,5,28609,,,0,"Adding a new test: ""test_create_zone_validate_recordsets_created""

Recordsets types: SOA and NS should be automatically created for a zone.
Test validates this functionality for a Primary type zone.

Change-Id: I217cbabfd6b0330472b43eb5bd1e57020a19d12f
",git fetch https://review.opendev.org/openstack/designate-tempest-plugin refs/changes/90/803490/5 && git format-patch -1 --stdout FETCH_HEAD,['designate_tempest_plugin/tests/api/v2/test_zones.py'],1,d00069b8951a2ec51cce327be379e4a227d57103,change-803490," cls.recordset_client = cls.os_primary.recordset_client @decorators.idempotent_id('ec150c22-f52e-11eb-b09b-74e5f9e2a801') def test_create_zone_validate_recordsets_created(self): # Create a PRIMARY zone and wait till it's Active LOG.info('Create a PRIMARY zone') zone = self.client.create_zone()[1] self.addCleanup(self.wait_zone_delete, self.client, zone['id']) LOG.info('Ensure we respond with CREATE+PENDING') self.assertEqual('CREATE', zone['action']) self.assertEqual('PENDING', zone['status']) LOG.info('Wait till the zone is Active') waiters.wait_for_zone_status(self.client, zone['id'], 'ACTIVE') LOG.info('Ensure that SOA and NS recordsets types has been created.') recordsets = self.recordset_client.list_recordset( zone['id'])[1]['recordsets'] types = [rec['type'] for rec in recordsets] expected_types = ['SOA', 'NS'] for exp_type in expected_types: self.assertIn( exp_type, types, 'Failed, expected recordset type:{} was' ' not created'.format(exp_type)) ",,26,0
openstack%2Fpuppet-tripleo~stable%2Fwallaby~Id9c1bfcc88f60f61877fe34b1ee01677d3bcc1b0,openstack/puppet-tripleo,stable/wallaby,Id9c1bfcc88f60f61877fe34b1ee01677d3bcc1b0,Enable support for Libvirt modular daemons,MERGED,2021-10-14 12:48:28.000000000,2021-10-30 07:47:57.000000000,2021-10-30 07:46:28.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-10-14 12:48:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/3d1a2b320c47261982de457e302670697b1e7b34', 'message': 'Enable support for Libvirt modular daemons\n\nThis change enables support for modular libvirt\ndaemon configurations.\n\nAlso deprecating modular_libvirt param so that modular-libvirt\nis default configuration and once we remove non-modular libvirt\nconfiguration in next release, this param can be removed.\n\nDepends-On: https://review.opendev.org//814000\nCo-Authored-By: Bogdan Dobrelya <bdobreli@redhat.com>\nCo-Authored-By: Martin Schuppert <mschuppert@redhat.com>\nChange-Id: Id9c1bfcc88f60f61877fe34b1ee01677d3bcc1b0\n(cherry picked from commit bbdad5c27e41691dc2a9272af6f451b10e58f8fb)\n'}, {'number': 2, 'created': '2021-10-24 09:29:08.000000000', 'files': ['manifests/profile/base/nova/libvirt.pp', 'spec/classes/tripleo_profile_base_nova_libvirt_spec.rb', 'releasenotes/notes/modular-libvirt-c19ccf0f0118c88c.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/9edca8fd9a5730c6cec3f07c4abe53f110d51a36', 'message': 'Enable support for Libvirt modular daemons\n\nThis change enables support for modular libvirt\ndaemon configurations.\n\nAlso deprecating modular_libvirt param so that modular-libvirt\nis default configuration and once we remove non-modular libvirt\nconfiguration in next release, this param can be removed.\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-nova/+/814000\nDepends-On: https://review.opendev.org/c/openstack/puppet-nova/+/815113\nCo-Authored-By: Bogdan Dobrelya <bdobreli@redhat.com>\nCo-Authored-By: Martin Schuppert <mschuppert@redhat.com>\nChange-Id: Id9c1bfcc88f60f61877fe34b1ee01677d3bcc1b0\n(cherry picked from commit bbdad5c27e41691dc2a9272af6f451b10e58f8fb)\n'}]",4,814001,9edca8fd9a5730c6cec3f07c4abe53f110d51a36,25,9,2,20733,,,0,"Enable support for Libvirt modular daemons

This change enables support for modular libvirt
daemon configurations.

Also deprecating modular_libvirt param so that modular-libvirt
is default configuration and once we remove non-modular libvirt
configuration in next release, this param can be removed.

Depends-On: https://review.opendev.org/c/openstack/puppet-nova/+/814000
Depends-On: https://review.opendev.org/c/openstack/puppet-nova/+/815113
Co-Authored-By: Bogdan Dobrelya <bdobreli@redhat.com>
Co-Authored-By: Martin Schuppert <mschuppert@redhat.com>
Change-Id: Id9c1bfcc88f60f61877fe34b1ee01677d3bcc1b0
(cherry picked from commit bbdad5c27e41691dc2a9272af6f451b10e58f8fb)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/01/814001/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/nova/libvirt.pp', 'spec/classes/tripleo_profile_base_nova_libvirt_spec.rb', 'releasenotes/notes/modular-libvirt-c19ccf0f0118c88c.yaml']",3,3d1a2b320c47261982de457e302670697b1e7b34,,"--- features: - | This change adds functionality to enable modular libvirt daemons support. Also all the daemons runs in separate containers, so the configuration is done for all the daemon containers. Here is the list of daemons added in this change. - virtnodedevd - virtproxyd - virtqemud - virtsecretd - virtstoraged More information regarding modular libvirt daemons is available here. `Libvirt Daemons <https://libvirt.org/daemons.html>` _. ",,164,36
openstack%2Fswift~master~Icb3ac99dd81b5ecb09db63117f8dd86cfe7ebde8,openstack/swift,master,Icb3ac99dd81b5ecb09db63117f8dd86cfe7ebde8,Plumb marker/end_marker down to the DB query,ABANDONED,2018-05-23 21:51:01.000000000,2021-10-30 06:30:10.000000000,,"[{'_account_id': 7847}, {'_account_id': 22348}]","[{'number': 1, 'created': '2018-05-23 21:51:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/7ad357e0226a7557372365f25e2b317a8283ff8a', 'message': 'Plumb marker/end_marker down to the DB query\n\nChange-Id: Icb3ac99dd81b5ecb09db63117f8dd86cfe7ebde8\n'}, {'number': 2, 'created': '2018-05-24 17:23:01.000000000', 'files': ['test/unit/container/test_backend.py', 'swift/container/backend.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/5936528d49d9d25769a01ead4abc169479e159bd', 'message': 'Plumb marker/end_marker down to the DB query\n\nChange-Id: Icb3ac99dd81b5ecb09db63117f8dd86cfe7ebde8\n'}]",4,570264,5936528d49d9d25769a01ead4abc169479e159bd,6,2,2,15343,,,0,"Plumb marker/end_marker down to the DB query

Change-Id: Icb3ac99dd81b5ecb09db63117f8dd86cfe7ebde8
",git fetch https://review.opendev.org/openstack/swift refs/changes/64/570264/1 && git format-patch -1 --stdout FETCH_HEAD,"['test/unit/container/test_backend.py', 'swift/container/backend.py']",2,7ad357e0226a7557372365f25e2b317a8283ff8a,569847," def _get_shard_range_rows(self, connection=None, marker=None, end_marker=None, includes=None, :param marker: restricts the returned list to shard ranges whose namespace includes or is greater than the marker value. :param end_marker: restricts the returned list to shard ranges whose namespace includes or is less than the end_marker value. if marker: conditions.append(""(upper = '' OR upper > ?)"") params.append(marker) if end_marker: conditions.append('lower < ?') params.append(end_marker) marker=marker, end_marker=end_marker, includes=includes, include_deleted=include_deleted,"," def _get_shard_range_rows(self, connection=None, includes=None, def shard_range_filter(sr): end = start = True if end_marker: end = end_marker > sr.lower if marker: start = marker < sr.upper return start and end includes=includes, include_deleted=include_deleted, if marker or end_marker: shard_ranges = list(filter(shard_range_filter, shard_ranges))",18,13
openstack%2Ftripleo-quickstart-extras~master~I2a840646c19ef8896ac1319d165fd93fd4197525,openstack/tripleo-quickstart-extras,master,I2a840646c19ef8896ac1319d165fd93fd4197525,"Revert ""Use tripleo-mount-image for modify-image""",MERGED,2021-10-28 18:18:16.000000000,2021-10-30 06:02:11.000000000,2021-10-30 06:02:11.000000000,"[{'_account_id': 4571}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}, {'_account_id': 29775}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-10-28 18:18:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/544bc2e6055ec4a8ef8741b588865dfa866c53f3', 'message': 'Revert ""Use tripleo-mount-image for modify-image""\n\nThis reverts commit 1ce3c2b63edd6f035e8a1ec6872eb178a8d3c676.\n\nReason for revert: https://bugs.launchpad.net/tripleo/+bug/1949107\n\nChange-Id: I2a840646c19ef8896ac1319d165fd93fd4197525\n'}, {'number': 2, 'created': '2021-10-28 18:18:45.000000000', 'files': ['roles/modify-image/tasks/manual.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/a7a05c4371bf894a58b63622a7995e6e4ee31098', 'message': 'Revert ""Use tripleo-mount-image for modify-image""\n\nThis reverts commit 1ce3c2b63edd6f035e8a1ec6872eb178a8d3c676.\n\nReason for revert: https://bugs.launchpad.net/tripleo/+bug/1949107\n\nChange-Id: I2a840646c19ef8896ac1319d165fd93fd4197525\n'}]",5,815881,a7a05c4371bf894a58b63622a7995e6e4ee31098,42,8,2,9976,,,0,"Revert ""Use tripleo-mount-image for modify-image""

This reverts commit 1ce3c2b63edd6f035e8a1ec6872eb178a8d3c676.

Reason for revert: https://bugs.launchpad.net/tripleo/+bug/1949107

Change-Id: I2a840646c19ef8896ac1319d165fd93fd4197525
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/81/815881/2 && git format-patch -1 --stdout FETCH_HEAD,['roles/modify-image/tasks/manual.yml'],1,544bc2e6055ec4a8ef8741b588865dfa866c53f3,bp/whole-disk-default," set -e modprobe nbd IMAGE_FILE={{ image_to_modify_raw }} MOUNT_DIR={{ mount_tempdir }} NBD_DEVICE=/dev/nbd0 mount_volume () { if [ -b ""$1"" ]; then if [ ! -d $2 ]; then mkdir $2 fi mount $1 $2 fi } set -x qemu-nbd --format raw --connect $NBD_DEVICE $IMAGE_FILE # search for the vg volume group, this is automatic in some environments vgscan # refresh for when this script is called with different values of $NBD_DEVICE vgchange --refresh # activate new logical volumes, this is automatic in some environments vgchange -ay if [ -b ""${NBD_DEVICE}p3"" ]; then # 3 partitions in the image, so assume the first 2 are boot partitions if [ -b ""/dev/mapper/vg-lv_root"" ]; then # a whole-disk overcloud with lvm volumes # for example, overcloud-hardened-uefi-full.qcow2 mount /dev/mapper/vg-lv_root $MOUNT_DIR mount_volume /dev/mapper/vg-lv_var $MOUNT_DIR/var mount_volume /dev/mapper/vg-lv_log $MOUNT_DIR/var/log mount_volume /dev/mapper/vg-lv_audit $MOUNT_DIR/var/log/audit mount_volume /dev/mapper/vg-lv_home $MOUNT_DIR/home mount_volume /dev/mapper/vg-lv_tmp $MOUNT_DIR/tmp mount_volume /dev/mapper/vg-lv_srv $MOUNT_DIR/srv else # a whole-disk overcloud with a single root partition # for example, overcloud-hardened-full.qcow2 mount ${NBD_DEVICE}p3 $MOUNT_DIR fi # a partition image # for example, overcloud-full.qcow2 if [ -b ""${NBD_DEVICE}p1"" ]; then mount ${NBD_DEVICE}p1 $MOUNT_DIR else mount ${NBD_DEVICE} $MOUNT_DIR fi MOUNT_DIR={{ mount_tempdir }} NBD_DEVICE=/dev/nbd0 unmount_volume () { if mountpoint ""$1""; then umount $1 fi } remove_device () { if [ -b ""/dev/mapper/$1"" ]; then dmsetup remove $1 fi } if mountpoint ""$MOUNT_DIR""; then unmount_volume $MOUNT_DIR/var/log/audit unmount_volume $MOUNT_DIR/var/log unmount_volume $MOUNT_DIR/var unmount_volume $MOUNT_DIR/home unmount_volume $MOUNT_DIR/tmp unmount_volume $MOUNT_DIR/srv umount $MOUNT_DIR qemu-nbd --disconnect $NBD_DEVICE vgchange --refresh vg || true remove_device vg-lv_root remove_device vg-lv_var remove_device vg-lv_log remove_device vg-lv_audit remove_device vg-lv_home remove_device vg-lv_tmp remove_device vg-lv_srv "," set -ex if type tripleo-mount-image >/dev/null; then tripleo-mount-image -a {{ image_to_modify_raw }} -m {{ mount_tempdir }} # stable branches do not have tripleo-mount-image, and only use # partition images modprobe nbd qemu-nbd --format raw --connect /dev/nbd0 {{ image_to_modify_raw }} mount /dev/nbd0 {{ mount_tempdir }} if type tripleo-unmount-image >/dev/null; then tripleo-unmount-image -m {{ mount_tempdir }} else umount {{ mount_tempdir }} qemu-nbd --disconnect /dev/nbd0",87,13
openstack%2Ftripleo-ansible~master~I108f8b48be09c56c3c74d81780ca1c035a611962,openstack/tripleo-ansible,master,I108f8b48be09c56c3c74d81780ca1c035a611962,Fix docs requirements,MERGED,2021-10-29 15:57:05.000000000,2021-10-30 05:55:41.000000000,2021-10-30 05:53:49.000000000,"[{'_account_id': 7353}, {'_account_id': 9976}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-10-29 15:57:05.000000000', 'files': ['doc/requirements.txt', 'molecule-requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/546017544ee5048820d80c60380d804eedeeedb5', 'message': ""Fix docs requirements\n\nIt was linked to molecule requirements because we were lazy. We don't\nneed to install molecule when generating docs.\n\nChange-Id: I108f8b48be09c56c3c74d81780ca1c035a611962\nCloses-Bug: #1949211\n""}]",2,815980,546017544ee5048820d80c60380d804eedeeedb5,10,5,1,14985,,,0,"Fix docs requirements

It was linked to molecule requirements because we were lazy. We don't
need to install molecule when generating docs.

Change-Id: I108f8b48be09c56c3c74d81780ca1c035a611962
Closes-Bug: #1949211
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/80/815980/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/requirements.txt', 'molecule-requirements.txt']",2,546017544ee5048820d80c60380d804eedeeedb5,bug/1949211,,"# this is required for the docs build jobssphinx>=2.0.0,!=2.1.0 # BSD openstackdocstheme>=2.2.1 # Apache-2.0 reno>=3.1.0 # Apache-2.0 doc8>=0.8.1 # Apache-2.0 bashate>=0.6.0 # Apache-2.0 metalsmith>=1.4.0 # Apache-2.0 jsonschema # MIT",10,8
openstack%2Ftripleo-quickstart-extras~master~I4de262fc049b74482ff7220a11ec864133f1cb75,openstack/tripleo-quickstart-extras,master,I4de262fc049b74482ff7220a11ec864133f1cb75,Create overcloud_baremetal_deploy.yaml file properly,MERGED,2021-06-22 13:43:11.000000000,2021-10-30 05:53:47.000000000,2021-10-30 05:53:47.000000000,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 23181}, {'_account_id': 24245}]","[{'number': 1, 'created': '2021-06-22 13:43:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/6a056c86b14c79f28e55b60301080a6d5f994d1a', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 2, 'created': '2021-07-26 15:05:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/25d9fcf3913a40669ddc370e766da1fc25d4cced', 'message': ':Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 3, 'created': '2021-07-27 12:14:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/f159dfc9c68dfa1f0b4f7144e7697831180ad444', 'message': ':Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 4, 'created': '2021-07-28 10:20:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/48bfe8f30ae576f7c0360a34d3fc128ec2b28180', 'message': 'WIP Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 5, 'created': '2021-08-30 08:12:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/80088c877008cf44bab0ec19eb7d8356763bf3a2', 'message': 'WIP Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 6, 'created': '2021-08-31 07:01:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/9020ca79cefbc70ea980bd9135e1114bfce94445', 'message': 'WIP Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 7, 'created': '2021-08-31 13:08:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/70104687b5137b5105ecbbbdddf0392b5c5f362e', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 8, 'created': '2021-09-02 09:53:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/af2a9a4fb4abf9ea5bf8b38cbae2089a0ee3e009', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 9, 'created': '2021-10-11 07:39:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/902ea219f6867a54da9215d067f514723fbc7568', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 10, 'created': '2021-10-19 15:12:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/47cb3714a86e4190d2ca3a9cc6f3b79a03f15469', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 11, 'created': '2021-10-26 11:53:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/39acc9e448cdbe3375f7d651fd33105fcb3d6b6f', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 12, 'created': '2021-10-28 10:02:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/a964d217d3dc4418f10a3b71b72ac86e153d60ae', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nCloses-Bug: #1949070\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}, {'number': 13, 'created': '2021-10-28 17:49:09.000000000', 'files': ['roles/overcloud-deploy/tasks/create-scripts.yml', 'roles/overcloud-deploy/templates/overcloud_baremetal_deploy.yaml.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/d8622a2e5271e7832de03f87f30555efe82370f4', 'message': 'Create overcloud_baremetal_deploy.yaml file properly\n\nCurrently the overcloud_baremetal_deploy does not match the\nVMs with the flavor/role properly. The way that\ncurrently creates the file may deploy the compute on\na ceph or a controller vm.\n\nThis way the vms will be used for the role that\nthey were created\n\nCloses-Bug: #1949070\nChange-Id: I4de262fc049b74482ff7220a11ec864133f1cb75\n'}]",14,797452,d8622a2e5271e7832de03f87f30555efe82370f4,97,9,13,22954,,,0,"Create overcloud_baremetal_deploy.yaml file properly

Currently the overcloud_baremetal_deploy does not match the
VMs with the flavor/role properly. The way that
currently creates the file may deploy the compute on
a ceph or a controller vm.

This way the vms will be used for the role that
they were created

Closes-Bug: #1949070
Change-Id: I4de262fc049b74482ff7220a11ec864133f1cb75
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/52/797452/8 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-deploy/templates/overcloud_baremetal_deploy.yaml.j2'],1,6a056c86b14c79f28e55b60301080a6d5f994d1a,, instances: {% for instance in range (role_count): %} - hostname: {{stack_name}}-{{role|lower}}-{{instance}} {% if role == 'Controller' %} name: control-{{instance}} {% elif role == 'Compute' %} name: compute-{{instance}} {% elif role == 'CephStorage' %} name: ceph-{{instance}} {% endif %} {% endfor %},,11,0
openstack%2Fliberasurecode~master~I95c805558510459b05df6220b9e3a46407258446,openstack/liberasurecode,master,I95c805558510459b05df6220b9e3a46407258446,Add FIPS jobs,MERGED,2021-06-23 22:52:05.000000000,2021-10-30 05:30:12.000000000,2021-10-30 05:30:12.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-23 22:52:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/liberasurecode/commit/1172283c08d97a922c78a740ddc02c29366f2a64', 'message': 'Add FIPS jobs\n\nChange-Id: I95c805558510459b05df6220b9e3a46407258446\n'}, {'number': 2, 'created': '2021-10-26 22:19:53.000000000', 'files': ['playbooks/enable-fips.yaml', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/liberasurecode/commit/83765a37ec4f4ae9e9db2be67fc65cc8870062ea', 'message': 'Add FIPS jobs\n\nChange-Id: I95c805558510459b05df6220b9e3a46407258446\n'}]",2,797789,83765a37ec4f4ae9e9db2be67fc65cc8870062ea,13,2,2,15343,,,0,"Add FIPS jobs

Change-Id: I95c805558510459b05df6220b9e3a46407258446
",git fetch https://review.opendev.org/openstack/liberasurecode refs/changes/89/797789/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,1172283c08d97a922c78a740ddc02c29366f2a64,fips, name: liberasurecode-unittests-centos-8-fips parent: liberasurecode-unittests-centos-8 pre-run: playbooks/enable-fips.yaml description: | Build and run test and valgrind-test for liberasurecode. This job runs on a FIPS-enabled CentOS-8 system. - job: - liberasurecode-unittests-centos-8-fips - liberasurecode-unittests-centos-8-fips,,10,0
openstack%2Fswift~feature%2Flosf~Ifa8c473045be4be5925b5f84e4b1f6359cead1f8,openstack/swift,feature/losf,Ifa8c473045be4be5925b5f84e4b1f6359cead1f8,Support RPC over plain HTTP (vs gRPC),ABANDONED,2019-03-08 13:17:35.000000000,2021-10-30 05:19:45.000000000,,"[{'_account_id': 22348}, {'_account_id': 25251}]","[{'number': 1, 'created': '2019-03-08 13:17:35.000000000', 'files': ['go/swift-rpc-losf/rpc.go', 'swift/obj/vfile.py', 'go/swift-rpc-losf/main.go', 'go/swift-rpc-losf/rpc_http.go', 'swift/obj/rpc_http.py', 'go/swift-rpc-losf/status/status.go', 'go/swift-rpc-losf/codes/codes.go'], 'web_link': 'https://opendev.org/openstack/swift/commit/0b9dd77c00ce21b13189ecab60fa57bcf82d132c', 'message': 'Support RPC over plain HTTP (vs gRPC)\n\nInitial support for plain HTTP communication between object server and\nindex server.\ngRPC support is not removed in this patch.\n\nThis is meant as a POC to get advice and for testing (It does pass\nfunctests)\n\nCommunication still happens over a UNIX domain socket, and protobuf is\nstill used to exchange data between the object server and the index\nserver.\n\nThe changes are:\n- Add a separate HTTP server to the golang index server, listening on a\nUNIX socket. The existing gRPC server is still there.\n\n- The existing interface of the python rpc module is preserved. The only\nchange in the caller code is ""import rpc_http as rpc"" vs ""import\nrpc_grpc as rpc"".\n\nNotes:\n- RPC Exceptions are not exactly similar to existing exceptions and will\ncause problems in vfile.py. This is an easy fix but I wanted to send\nthis out for advice before continuing.\n\n- The python code could be made much shorter with a few changes to the\nindex server, but I don\'t want to mix those changes\n\n- Performance is lower than gRPC. In a slowish test VM, a no-op RPC\ncall takes 0.8ms vs 0.3ms. I don\'t think it matters as real calls take\nlonger than that. (profiling shows much more python code being\ncalled while gRPC is mostly C). If it\'s a problem we could always\nreplace httplib with a faster module (pycurl?), it\'s just plain HTTP.\n\n- gRPC streaming calls have not been written. These were used only\noutside the object server (for example in the FUSE mount tool).\n\nChange-Id: Ifa8c473045be4be5925b5f84e4b1f6359cead1f8\n'}]",3,642013,0b9dd77c00ce21b13189ecab60fa57bcf82d132c,5,2,1,25251,,,0,"Support RPC over plain HTTP (vs gRPC)

Initial support for plain HTTP communication between object server and
index server.
gRPC support is not removed in this patch.

This is meant as a POC to get advice and for testing (It does pass
functests)

Communication still happens over a UNIX domain socket, and protobuf is
still used to exchange data between the object server and the index
server.

The changes are:
- Add a separate HTTP server to the golang index server, listening on a
UNIX socket. The existing gRPC server is still there.

- The existing interface of the python rpc module is preserved. The only
change in the caller code is ""import rpc_http as rpc"" vs ""import
rpc_grpc as rpc"".

Notes:
- RPC Exceptions are not exactly similar to existing exceptions and will
cause problems in vfile.py. This is an easy fix but I wanted to send
this out for advice before continuing.

- The python code could be made much shorter with a few changes to the
index server, but I don't want to mix those changes

- Performance is lower than gRPC. In a slowish test VM, a no-op RPC
call takes 0.8ms vs 0.3ms. I don't think it matters as real calls take
longer than that. (profiling shows much more python code being
called while gRPC is mostly C). If it's a problem we could always
replace httplib with a faster module (pycurl?), it's just plain HTTP.

- gRPC streaming calls have not been written. These were used only
outside the object server (for example in the FUSE mount tool).

Change-Id: Ifa8c473045be4be5925b5f84e4b1f6359cead1f8
",git fetch https://review.opendev.org/openstack/swift refs/changes/13/642013/1 && git format-patch -1 --stdout FETCH_HEAD,"['go/swift-rpc-losf/rpc.go', 'swift/obj/vfile.py', 'go/swift-rpc-losf/main.go', 'go/swift-rpc-losf/rpc_http.go', 'go/swift-rpc-losf/status/status.go', 'swift/obj/rpc_http.py', 'go/swift-rpc-losf/codes/codes.go']",7,0b9dd77c00ce21b13189ecab60fa57bcf82d132c,,package codes type RpcErrorCode int const ( Ok RpcErrorCode = 200 Cancelled RpcErrorCode = 299 InvalidArgument RpcErrorCode = 400 NotFound RpcErrorCode = 404 AlreadyExists RpcErrorCode = 409 PermissionDenied RpcErrorCode = 403 FailedPrecondition RpcErrorCode = 412 Unimplemented RpcErrorCode = 501 Internal RpcErrorCode = 500 Unavailable RpcErrorCode = 503 ) ,,1891,1
openstack%2Fswift~feature%2Flosf~If1ed66efff54d0765341c8a836b9d2e73d5a3f3e,openstack/swift,feature/losf,If1ed66efff54d0765341c8a836b9d2e73d5a3f3e,WIP: add swift-rpc-losf into setup.cfg,ABANDONED,2019-04-09 06:01:06.000000000,2021-10-30 05:19:39.000000000,,"[{'_account_id': 4608}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-04-09 06:01:06.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/swift/commit/c7a68899cbc756d5311ab5828db6f12c5a03c7de', 'message': ""WIP: add swift-rpc-losf into setup.cfg\n\nFor binary installation, it might be easier than hand installation\nand config in swift-rpc-losf. WIP because the binary won't exist\nunless make the golang code so the installation failed until\nusers find they need the build.\n\nPerhaps, hooking the setup.py, then, make the go code at first might\nbe a resolution the problem tho. It still requires more work.\n\nChange-Id: If1ed66efff54d0765341c8a836b9d2e73d5a3f3e\n""}]",1,651102,c7a68899cbc756d5311ab5828db6f12c5a03c7de,5,3,1,4608,,,0,"WIP: add swift-rpc-losf into setup.cfg

For binary installation, it might be easier than hand installation
and config in swift-rpc-losf. WIP because the binary won't exist
unless make the golang code so the installation failed until
users find they need the build.

Perhaps, hooking the setup.py, then, make the go code at first might
be a resolution the problem tho. It still requires more work.

Change-Id: If1ed66efff54d0765341c8a836b9d2e73d5a3f3e
",git fetch https://review.opendev.org/openstack/swift refs/changes/02/651102/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,c7a68899cbc756d5311ab5828db6f12c5a03c7de,, bin/swift-rpc-losf,,1,0
openstack%2Fswift~feature%2Flosf~I6b8f266b807c1ca338b4223ed2e2a1f5ae8e6954,openstack/swift,feature/losf,I6b8f266b807c1ca338b4223ed2e2a1f5ae8e6954,Show original error in RPC calls,ABANDONED,2019-05-03 20:52:02.000000000,2021-10-30 05:19:34.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-05-03 20:52:02.000000000', 'files': ['go/swift-rpc-losf/rpc.go'], 'web_link': 'https://opendev.org/openstack/swift/commit/944a16586c4ca8a9d7afda1f32b28541354a4d2e', 'message': 'Show original error in RPC calls\n\nAnnotate the error with context information, but don\'t mask it.\nThe alternative would be to use a ""wrapping"" error pkg, such as\ngithub.com/pkg/errors that stack errors. Not willing to add that\ndependency for now.\n\nChange-Id: I6b8f266b807c1ca338b4223ed2e2a1f5ae8e6954\n'}]",0,657043,944a16586c4ca8a9d7afda1f32b28541354a4d2e,3,1,1,25251,,,0,"Show original error in RPC calls

Annotate the error with context information, but don't mask it.
The alternative would be to use a ""wrapping"" error pkg, such as
github.com/pkg/errors that stack errors. Not willing to add that
dependency for now.

Change-Id: I6b8f266b807c1ca338b4223ed2e2a1f5ae8e6954
",git fetch https://review.opendev.org/openstack/swift refs/changes/43/657043/1 && git format-patch -1 --stdout FETCH_HEAD,['go/swift-rpc-losf/rpc.go'],1,944a16586c4ca8a9d7afda1f32b28541354a4d2e,alecuyer/rpc_error_codes," reqlog.Errorf(""unable to check for existing volume key: %v"", err) reqlog.Errorf(""failed to Put new volume entry: %v"", err) reqlog.Errorf(""unable to check for volume key: %v"", err) reqlog.Errorf(""failed to Delete volume entry: %v"", err) reqlog.Errorf(""unable to retrieve volume key: %v"", err) reqlog.Errorf(""failed to decode Volume value: %v"", err) reqlog.Errorf(""failed to Put updated volume entry: %v"", err) reqlog.Errorf(""Failed to get volume key %d in KV: %v"", key, err) reqlog.Errorf(""Failed to decode Volume value: %v"", err) reqlog.Errorf(""failed to decode volume key: %v"", err) reqlog.Errorf(""failed to decode volume value: %v"", err) reqlog.Errorf(""failed to decode volume key: %v"", err) reqlog.Errorf(""failed to decode object value: %v"", err) reqlog.Errorf(""failed to decode object value: %v"", err) reqlog.Errorf(""unable to check for existing volume key: %v"", err) reqlog.Errorf(""unable to encode object key: %v"", err) reqlog.Errorf(""unable to check for existing object: %v"", err) reqlog.Errorf(""failed to Put new volume value and new object entry: %v"", err) reqlog.Errorf(""unable to encode object key: %v"", err) reqlog.Errorf(""unable to retrieve object: %v"", err) reqlog.Errorf(""failed to Delete key: %v"", err) reqlog.Errorf(""unable to encode object key: %v"", err) reqlog.Errorf(""unable to encode new object key: %v"", err) reqlog.Errorf(""unable to retrieve object: %v"", err) reqlog.Errorf(""failed to commit WriteBatch for rename: %v"", err) reqlog.Errorf(""unable to encode object key: %v"", err) reqlog.Errorf(""unable to retrieve object: %v"", err) reqlog.Errorf(""failed to decode object value: %v"", err) reqlog.Errorf(""unable to encode object prefix: %v"", err) reqlog.Errorf(""failed to Put new quarantined object entry: %v"", err) reqlog.Errorf(""failed to delete key: %v"", err) reqlog.Errorf(""unable to encode object key: %v"", err) reqlog.Errorf(""unable to retrieve object: %v"", err) reqlog.Errorf(""failed to quarantine object: %v"", err) reqlog.Errorf(""unable to encode object key: %v"", err) reqlog.Errorf(""unable to retrieve object: %v"", err) reqlog.Errorf(""failed to unquarantine object: %v"", err) reqlog.Errorf(""unable to encode object prefix: %v"", err) reqlog.Errorf(""failed to decode object value: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object value: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to send streamed response: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""failed to decode quarantined object key: %v"", err) reqlog.Errorf(""failed to send streamed respone in ListQuarantinedOhashes: %v"", err) reqlog.Errorf(""unable to encode object prefix: %v"", err) reqlog.Errorf(""failed to decode object value: %v"", err) reqlog.Errorf(""failed to decode object key: %v"", err) reqlog.Errorf(""unable to retrieve volume key: %v"", err) reqlog.WithFields(logrus.Fields{""value"": value}).Errorf(""failed to decode volume value: %v"", err)"," reqlog.Error(""unable to check for existing volume key"") reqlog.Error(""failed to Put new volume entry"") reqlog.Error(""unable to check for volume key"") reqlog.Error(""failed to Delete volume entry"") reqlog.Error(""unable to retrieve volume key"") reqlog.Error(""failed to decode Volume value"") reqlog.Error(""failed to Put updated volume entry"") reqlog.Errorf(""Failed to get volume key in KV: %s"", err) reqlog.Error(""Failed to decode Volume value"") reqlog.Error(""failed to decode volume key"") reqlog.Error(""failed to decode volume value"") reqlog.Error(""failed to decode volume key"") reqlog.Error(""failed to decode object value"") reqlog.Error(""failed to decode object value"") reqlog.Error(""unable to check for existing volume key"") reqlog.Error(""unable to encode object key"") reqlog.Error(""unable to check for existing object"") reqlog.Error(""failed to Put new volume value and new object entry"") reqlog.Error(""unable to encode object key"") reqlog.Error(""unable to retrieve object"") reqlog.Error(""failed to Delete key"") reqlog.Error(""unable to encode object key"") reqlog.Error(""unable to encode new object key"") reqlog.Error(""unable to retrieve object"") reqlog.Error(""failed to commit WriteBatch for rename"") reqlog.Error(""unable to encode object key"") reqlog.Error(""unable to retrieve object"") reqlog.Error(""failed to decode object value"") reqlog.Error(""unable to encode object prefix"") reqlog.Error(""failed to Put new quarantined object entry"") reqlog.Error(""failed to delete key"") reqlog.Error(""unable to encode object key"") reqlog.Error(""unable to retrieve object"") reqlog.Error(""failed to quarantine object"") reqlog.Error(""unable to encode object key"") reqlog.Error(""unable to retrieve object"") reqlog.Error(""failed to unquarantine object"") reqlog.Error(""unable to encode object prefix"") reqlog.Error(""failed to decode object value"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode object value"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to send streamed response"") reqlog.WithFields(logrus.Fields{""key"": it.Key()}).Debug(""Raw first KV key"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode object key"") reqlog.Debug(""ListPartitions done"") reqlog.Error(""failed to decode object key"") reqlog.Debug(""Sending an entry"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode object key"") reqlog.Error(""failed to decode quarantined object key"") reqlog.Error(""failed to send streamed respone in ListQuarantinedOhashes"") reqlog.Error(""unable to encode object prefix"") reqlog.Error(""failed to decode object value"") reqlog.Error(""failed to decode object key"") reqlog.Error(""unable to retrieve volume key"") reqlog.WithFields(logrus.Fields{""value"": value}).Error(""failed to decode volume value"")",59,62
openstack%2Fswift~feature%2Flosf~I5c3b2ca0c97afcb9e322459c7e150abce0a08877,openstack/swift,feature/losf,I5c3b2ca0c97afcb9e322459c7e150abce0a08877,Add GetVolumeStats RPC call,ABANDONED,2019-05-03 20:51:38.000000000,2021-10-30 05:19:28.000000000,,"[{'_account_id': 1179}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-05-03 20:51:38.000000000', 'files': ['go/swift-rpc-losf/proto/fmgr.pb.go', 'go/swift-rpc-losf/rpc.go', 'swift/obj/rpc_grpc.py', 'swift/obj/fmgr_pb2.py', 'swift/obj/fmgr_pb2_grpc.py', 'swift/obj/fmgr.proto'], 'web_link': 'https://opendev.org/openstack/swift/commit/a40676ac76e0c292e9528436f0ff5e088a90aa97', 'message': 'Add GetVolumeStats RPC call\n\nThe GetVolumeStats RPC call returns the count of objects and quarantined\nobjects in a volume.\n\nThis will be used (at least) to remove empty volumes\n\nWhile there, add missing debug log of the GetKvState function\n\nChange-Id: I5c3b2ca0c97afcb9e322459c7e150abce0a08877\n'}]",3,657042,a40676ac76e0c292e9528436f0ff5e088a90aa97,4,2,1,25251,,,0,"Add GetVolumeStats RPC call

The GetVolumeStats RPC call returns the count of objects and quarantined
objects in a volume.

This will be used (at least) to remove empty volumes

While there, add missing debug log of the GetKvState function

Change-Id: I5c3b2ca0c97afcb9e322459c7e150abce0a08877
",git fetch https://review.opendev.org/openstack/swift refs/changes/42/657042/1 && git format-patch -1 --stdout FETCH_HEAD,"['go/swift-rpc-losf/proto/fmgr.pb.go', 'go/swift-rpc-losf/rpc.go', 'swift/obj/rpc_grpc.py', 'swift/obj/fmgr_pb2.py', 'swift/obj/fmgr_pb2_grpc.py', 'swift/obj/fmgr.proto']",6,a40676ac76e0c292e9528436f0ff5e088a90aa97,alecuyer/get_volume_stats," // List Volumes (will scan the volumes) // Get stats for all volumes. It is costly, but not expected to be called often. // This will go through the whole DB (objects, quarantined, volumes) // Because the state of volumes may change during the call, before acting on the result, the caller // should check that the volume mtime has not changed during the call. // Note: specifying one volume wouldn't make the call less costly, the objects are not indexed by volume rpc GetVolumeStats (Empty) returns (VolumeStats) {} message VolumeStat { uint64 object_count = 1; uint64 quarantined_count = 2; } message VolumeStats { map<uint32, VolumeStat> volume = 1; } ", // List Volumes,608,180
openstack%2Fswift~feature%2Flosf~I07dab935675bd047d65f245f7b9796a2c04fb534,openstack/swift,feature/losf,I07dab935675bd047d65f245f7b9796a2c04fb534,"In _get_vfile(), handle the case when a referenced object has been punched",ABANDONED,2019-05-15 09:27:57.000000000,2021-10-30 05:19:16.000000000,,"[{'_account_id': 22348}, {'_account_id': 25251}]","[{'number': 1, 'created': '2019-05-15 09:27:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/287b7a362264423a991814399396031c69803a7a', 'message': 'In _get_vfile(), handle the case when a referenced object has been punched\n\nAfter a crash or power failure, we may still have an entry for an object\nin the index server, that had just been punched from the volume prior to\nthe crash.\n\nWhen that happens, do not raise an error, remove the entry from the\nindex server. This is already done in a couple of other places, but was\nmissing here.\n\nChange-Id: I07dab935675bd047d65f245f7b9796a2c04fb534\n'}, {'number': 2, 'created': '2019-10-16 13:06:17.000000000', 'files': ['swift/obj/vfile.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/27402d75a0d5bcc57dc2c874a534888293d99095', 'message': 'In _get_vfile(), handle the case when a referenced object has been punched\n\nAfter a crash or power failure, we may still have an entry for an object\nin the index server, that had just been punched from the volume prior to\nthe crash.\n\nWhen that happens, do not raise an error, remove the entry from the\nindex server. This is already done in a couple of other places, but was\nmissing here.\n\nChange-Id: I07dab935675bd047d65f245f7b9796a2c04fb534\n'}]",1,659254,27402d75a0d5bcc57dc2c874a534888293d99095,7,2,2,25251,,,0,"In _get_vfile(), handle the case when a referenced object has been punched

After a crash or power failure, we may still have an entry for an object
in the index server, that had just been punched from the volume prior to
the crash.

When that happens, do not raise an error, remove the entry from the
index server. This is already done in a couple of other places, but was
missing here.

Change-Id: I07dab935675bd047d65f245f7b9796a2c04fb534
",git fetch https://review.opendev.org/openstack/swift refs/changes/54/659254/1 && git format-patch -1 --stdout FETCH_HEAD,['swift/obj/vfile.py'],1,287b7a362264423a991814399396031c69803a7a,alecuyer/alreadyPunched," # until we journal the deletes, after a crash we may have an entry # for an object that has been ""punched"" from the volume. # if we find a hole instead of the header, remove entry from # kv and return. fp.seek(obj.offset) data = fp.read(512) if all(c == '\x00' for c in data): # unregister the object here rpc.unregister_object(socket_path, name) msg = ""Zeroed header found for {} at offset {} in volume\ {}"".format(name, obj.offset, volume_filepath) increment(logger, 'vfile.already_punched') raise VFileException(msg)",,14,1
openstack%2Fswift~feature%2Flosf~Ic69cbbbe8f59ef9f85e8ffa939f443b5085a0daa,openstack/swift,feature/losf,Ic69cbbbe8f59ef9f85e8ffa939f443b5085a0daa,New key format for objects in the index-server,ABANDONED,2020-04-27 16:39:13.000000000,2021-10-30 05:19:09.000000000,,"[{'_account_id': 22348}, {'_account_id': 25251}]","[{'number': 1, 'created': '2020-04-27 16:39:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/c8534f701da4ee8a98a9cd5a72a00a01d664213d', 'message': 'New key format for objects in the index-server\n\nThe new format sorts keys in the same order as they would be in the\nregular diskfile directory tree. It makes listdir() faster, especially\nat the suffix level. It also simplifies the code.\n\nThe space cost is minimal, leveldb being good at deduplicating common\nkey prefixes. However, it means we now store the partition of an object,\nand will have to support the relinker.\n\nDifferences:\n  - old key: ohash + filename\n  - new key: partition + suffix + ohash + filename\n\nthe partition is a uint32, bigendian encoded, to preserve ordering\nthe suffix is stored as ascii\nthe ohash is 16 bytes hex\nthe filename is stored as is\n\nTODO:\n  - the volume check tool\n  - the quarantine listing\n  - list objects by volume\n  - some unit tests, both for golang and python\n\nChange-Id: Ic69cbbbe8f59ef9f85e8ffa939f443b5085a0daa\n'}, {'number': 2, 'created': '2020-05-26 17:58:50.000000000', 'files': ['bin/swift-losf-volume-check', 'go/swift-rpc-losf/proto/fmgr.pb.go', 'go/swift-rpc-losf/rpc_test.go', 'swift/obj/kvfile.py', 'swift/obj/fmgr_pb2.py', 'swift/obj/rpc_http.py', 'bin/swift-mount-losf', 'go/swift-rpc-losf/encoding.go', 'swift/obj/fmgr.proto', 'go/swift-rpc-losf/encoding_test.go', 'go/swift-rpc-losf/swift.go', 'go/swift-rpc-losf/rpc.go', 'go/swift-rpc-losf/swift_test.go', 'swift/obj/vfile.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/260001323e7393ce0ec47a029acc5bc19d856df4', 'message': 'New key format for objects in the index-server\n\nThe new format sorts keys in the same order as they would be in the\nregular diskfile directory tree. It makes listdir() faster, especially\nat the suffix level. It also simplifies the code.\n\nThe space cost is minimal, leveldb being good at deduplicating common\nkey prefixes. However, it means we now store the partition of an object,\nand will have to support the relinker.\n\nDifferences:\n  - old key: ohash + filename\n  - new key: partition + suffix + ohash + filename\n\nthe partition is a uint32, bigendian encoded, to preserve ordering\nthe suffix is stored as ascii\nthe ohash is 16 bytes hex\nthe filename is stored as is\n\nTODO:\n  - the volume check tool\n  - the quarantine listing\n  - list objects by volume\n  - some unit tests, both for golang and python\n\nChange-Id: Ic69cbbbe8f59ef9f85e8ffa939f443b5085a0daa\n'}]",5,723609,260001323e7393ce0ec47a029acc5bc19d856df4,6,2,2,25251,,,0,"New key format for objects in the index-server

The new format sorts keys in the same order as they would be in the
regular diskfile directory tree. It makes listdir() faster, especially
at the suffix level. It also simplifies the code.

The space cost is minimal, leveldb being good at deduplicating common
key prefixes. However, it means we now store the partition of an object,
and will have to support the relinker.

Differences:
  - old key: ohash + filename
  - new key: partition + suffix + ohash + filename

the partition is a uint32, bigendian encoded, to preserve ordering
the suffix is stored as ascii
the ohash is 16 bytes hex
the filename is stored as is

TODO:
  - the volume check tool
  - the quarantine listing
  - list objects by volume
  - some unit tests, both for golang and python

Change-Id: Ic69cbbbe8f59ef9f85e8ffa939f443b5085a0daa
",git fetch https://review.opendev.org/openstack/swift refs/changes/09/723609/1 && git format-patch -1 --stdout FETCH_HEAD,"['bin/swift-losf-volume-check', 'go/swift-rpc-losf/proto/fmgr.pb.go', 'go/swift-rpc-losf/rpc_test.go', 'swift/obj/fmgr_pb2.py', 'swift/obj/rpc_http.py', 'bin/swift-mount-losf', 'go/swift-rpc-losf/encoding.go', 'swift/obj/fmgr.proto', 'go/swift-rpc-losf/encoding_test.go', 'go/swift-rpc-losf/swift.go', 'go/swift-rpc-losf/rpc.go', 'go/swift-rpc-losf/swift_test.go', 'swift/obj/vfile.py']",13,c8534f701da4ee8a98a9cd5a72a00a01d664213d,feature/losf_new_kv_obj_format," return cls._get_vfile(full_name, si.partition, si.volume_dir, si.socket_path, logger) return cls._get_vfile(full_name, 0, si.volume_dir, si.socket_path, logger, is_quarantined=True) def _get_vfile(cls, name, partition, volume_dir, socket_path, logger, obj = rpc.get_object(socket_path, name, partition, rpc.unregister_object(socket_path, name, partition) rpc.rename_object(socket_path, name, header_fullname, partition) self.partition, self.offset, object_end) ret = type_to_func[si.type](si)def _list_ohash(si): :param partition: return rpc.list_prefix(si.socket_path, si.ohash, si.partition) def _list_suffix(si): si.suffix) def _list_partition(si): return rpc.list_partition(si.socket_path, int(si.partition)) def _list_partitions(si): return rpc.list_partitions(si.socket_path) def set_header_state(socket_path, name, partition, quarantine): obj = rpc.get_object(socket_path, name, partition, is_quarantined=not quarantine, rpc.unregister_object(socket_path, name, si.partition) set_header_state(sif.socket_path, full_name, sif.partition, quarantine=True) rpc.quarantine_object(si.socket_path, full_name, si.partition) rpc.unregister_object(socket_path, name, si.partition) obj = rpc.get_object(si.socket_path, full_name, si.partition) vf_reader = VFileReader._get_vfile(full_name, si.partition, si.volume_dir, rpc.rename_object(si.socket_path, full_name, new_full_name, si.partition)"," return cls._get_vfile(full_name, si.volume_dir, si.socket_path, logger) return cls._get_vfile(full_name, si.volume_dir, si.socket_path, logger, is_quarantined=True) def _get_vfile(cls, name, volume_dir, socket_path, logger, obj = rpc.get_object(socket_path, name, rpc.unregister_object(socket_path, name) rpc.rename_object(socket_path, name, header_fullname) self.offset, object_end) # get part power from the ring (needed as we generate ""directories"" based # on it. if not POLICIES[si.policy_idx].object_ring: POLICIES[si.policy_idx].load_ring('/etc/swift') part_power = 32 - POLICIES[si.policy_idx].object_ring._part_shift ret = type_to_func[si.type](si, part_power)def _list_ohash(si, part_power): :param part_power: return rpc.list_prefix(si.socket_path, si.ohash) def _list_suffix(si, part_power): :param part_power: si.suffix, part_power) def _list_partition(si, part_power): :param part_power: return rpc.list_partition(si.socket_path, int(si.partition), part_power) def _list_partitions(si, part_power): :param part_power: return rpc.list_partitions(si.socket_path, part_power) def set_header_state(socket_path, name, quarantine): obj = rpc.get_object(socket_path, name, is_quarantined=not quarantine, rpc.unregister_object(socket_path, name) set_header_state(sif.socket_path, full_name, quarantine=True) rpc.quarantine_object(si.socket_path, full_name) rpc.unregister_object(socket_path, name) obj = rpc.get_object(si.socket_path, full_name) vf_reader = VFileReader._get_vfile(full_name, si.volume_dir, rpc.rename_object(si.socket_path, full_name, new_full_name)",712,932
openstack%2Fswift~stable%2Fpike~I1ec2b7ac18c37f675d1071b5a08c2966cd612bad,openstack/swift,stable/pike,I1ec2b7ac18c37f675d1071b5a08c2966cd612bad,doc: Fix missing configure object storage with the S3 API in swift/pike,ABANDONED,2019-07-26 08:52:50.000000000,2021-10-30 05:18:35.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-07-26 08:52:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/bbb5f0b6e5b574f701fd2343110af697e7296e81', 'message': 'doc: Fix missing configure object storage with the S3 API in swift/pike\n\nAdd ""Configure Object Storage with the S3 API"" in\nOpenStack Swift Administrator Guide doc for pike version.\n\nChange-Id: I1ec2b7ac18c37f675d1071b5a08c2966cd612bad\nCloses-Bug: #1837857\n'}, {'number': 2, 'created': '2019-07-26 08:55:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/94158f4c4766df59df044a0fdd213a95a6d58b36', 'message': 'doc: Fix missing configure object storage with the S3 API in swift/pike\n\nAdd ""Configure Object Storage with the S3 API"" in\nOpenStack Swift Administrator Guide doc for pike version.\n\nChange-Id: I1ec2b7ac18c37f675d1071b5a08c2966cd612bad\nCloses-Bug: #1837857\n'}, {'number': 3, 'created': '2019-09-05 03:39:40.000000000', 'files': ['doc/source/admin/index.rst', 'doc/source/admin/objectstorage-s3-api.rst'], 'web_link': 'https://opendev.org/openstack/swift/commit/8b4b6dd41d45e9cfba7111d3fc0085c69c8d62a9', 'message': 'doc: Fix missing configure object storage with the S3 API in swift/pike\n\nAdd ""Configure Object Storage with the S3 API"" in OpenStack \nSwift Administrator Guide doc for pike version.\n\nChange-Id: I1ec2b7ac18c37f675d1071b5a08c2966cd612bad\nCloses-Bug: #1837857\n'}]",0,672919,8b4b6dd41d45e9cfba7111d3fc0085c69c8d62a9,6,1,3,29062,,,0,"doc: Fix missing configure object storage with the S3 API in swift/pike

Add ""Configure Object Storage with the S3 API"" in OpenStack 
Swift Administrator Guide doc for pike version.

Change-Id: I1ec2b7ac18c37f675d1071b5a08c2966cd612bad
Closes-Bug: #1837857
",git fetch https://review.opendev.org/openstack/swift refs/changes/19/672919/2 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/index.rst', 'doc/source/admin/objectstorage-s3-api.rst']",2,bbb5f0b6e5b574f701fd2343110af697e7296e81,bug/1837857,"======================================== Configure Object Storage with the S3 API ======================================== The Swift3 middleware emulates the S3 REST API on top of Object Storage. The following operations are currently supported: - GET Service - DELETE Bucket - GET Bucket (List Objects) - PUT Bucket - DELETE Object - GET Object - HEAD Object - PUT Object - PUT Object (Copy) To use this middleware, first download the latest version from its repository to your proxy servers. .. code-block:: console # git clone https://github.com/openstack/swift3.git Then, install it using standard python mechanisms, such as: .. code-block:: console # python setup.py install Alternatively, if you have configured the Ubuntu Cloud Archive, you may use: .. code-block:: console # apt-get install swift-plugin-s3 To add this middleware to your configuration, add the swift3 middleware in front of the swauth middleware, and before any other middleware that looks at Object Storage requests (like rate limiting). Ensure that your ``proxy-server.conf`` file contains swift3, s3token in the pipeline and the ``[filter:swift3]`` , ``[filter:s3token]`` section, as shown below: .. code-block:: ini [pipeline:main] pipeline = catch_errors healthcheck cache authtoken swift3 s3token keystoneuath proxy-server [filter:swift3] use = egg:swift3#swift3 [filter:s3token] use = egg:swift3#s3token auth_uri = http://controller/identity auth_version = 3 Next, configure the tool that you use to connect to the S3 API. To use S3curl, needs to install libdigest-hmac-perl package: .. code-block:: console # apt-get install libdigest-hmac-perl And then, you must add your host IP information by adding your host IP to the ``@endpoints`` array (line 30 in ``s3curl.pl``): .. code-block:: perl my @endpoints = ( '1.2.3.4'); To set up your client, ensure you are using the ec2 credentials, which can be downloaded from the API Endpoints tab of the dashboard. .. code-block:: console # openstack ec2 credentials create +------------+---------------------------------------------------+ | Field | Value | +------------+---------------------------------------------------+ | access | c2e30f2cd5204b69a39b3f1130ca8f61 | | links | {u'self': u'http://controller/identity/v3/......'}| | project_id | 407731a6c2d0425c86d1e7f12a900488 | | secret | baab242d192a4cd6b68696863e07ed59 | | trust_id | None | | user_id | 00f0ee06afe74f81b410f3fe03d34fbc | +------------+---------------------------------------------------+ Finally, create ``~/.s3curl`` file in your home directory. This file will contain your ec2 credentials like below: .. code-block:: console %awsSecretAccessKeys = ( # personal account personal => { id => 'c2e30f2cd5204b69a39b3f1130ca8f61', key => 'baab242d192a4cd6b68696863e07ed59', }, ); And modify ``~/.s3curl`` file permission for owner can read and write the file. .. code-block:: console # chmod 0600 ~/.s3curl Now you can send commands to the endpoint, such as: .. code-block:: console # ./s3curl.pl --id=personal http://1.2.3.4:8080 Verify after send commands result will shown below: .. code-block:: xml <?xml version='1.0' encoding='UTF-8'?> <ListAllMyBucketsResult xmlns=""http://s3.amazonaws.com/doc/2006-03-01/""> <Owner> <ID>admin:admin</ID> <DisplayName>admin:admin</DisplayName> </Owner> <Buckets> <Bucket> <Name>test-bucket1</Name> <CreationDate>2009-02-03T16:45:09.000Z</CreationDate> </Bucket> </Buckets> </ListAllMyBucketsResult> Here is an example client setup using the Python boto library on a locally installed all-in-one Object Storage installation. The host should also point to the Object Storage node's hostname. It also will have to use the old-style calling format, and not the hostname-based container format. Here is an example client setup using the Python boto library on a locally installed all-in-one Object Storage installation. .. code-block:: python #!/usr/bin/env python # -*- coding: utf-8 -*- # filename: tests3.py import boto import boto.s3.connection access_key = ""c2e30f2cd5204b69a39b3f1130ca8f61"" secret_key = ""baab242d192a4cd6b68696863e07ed59"" host = ""10.0.2.15"" conn = boto.connect_s3(aws_access_key_id=access_key, \ aws_secret_access_key=secret_key, \ host=""1.2.3.4"", port=8080, is_secure=False, \ calling_format=boto.s3.connection.OrdinaryCallingFormat()) for bucket in conn.get_all_buckets(): print ""BucketName = "",bucket.name Verify after send commands result will shown below: .. code-block:: console # python tests3.py BucketName = test-bucket1 ",,175,0
openstack%2Fswift~feature%2Fdeep~I207c30b61132ca24517f031c7c28ddd31f1d700b,openstack/swift,feature/deep,I207c30b61132ca24517f031c7c28ddd31f1d700b,WIP probe test objects in multiple policies,ABANDONED,2018-04-24 13:03:25.000000000,2021-10-30 05:16:02.000000000,,"[{'_account_id': 7847}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2018-04-24 13:03:25.000000000', 'files': ['test/probe/test_sharder.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/478a31d3166a44233e73ba6aa55c7093222c6fa7', 'message': 'WIP probe test objects in multiple policies\n\nChange-Id: I207c30b61132ca24517f031c7c28ddd31f1d700b\n'}]",1,563940,478a31d3166a44233e73ba6aa55c7093222c6fa7,7,3,1,7847,,,0,"WIP probe test objects in multiple policies

Change-Id: I207c30b61132ca24517f031c7c28ddd31f1d700b
",git fetch https://review.opendev.org/openstack/swift refs/changes/40/563940/1 && git format-patch -1 --stdout FETCH_HEAD,['test/probe/test_sharder.py'],1,478a31d3166a44233e73ba6aa55c7093222c6fa7,p-sharding-multiple-policies," def put_objects(self, obj_names, container_name=None): container_name = container_name or self.container_name for obj in obj_names: client.put_object(self.url, self.token, container_name, obj) def assert_container_listing(self, expected_listing, container_name=None): container_name = container_name or self.container_name def test_sharding_moves_objects_in_multiple_policies(self): all_obj_names = ['obj%03d' % x for x in range(self.max_shard_size)] container_name = 'c_test' part, nodes = self.brain.ring.get_nodes(self.account, container_name) node_numbers = [n['id'] + 1 for n in nodes] # put objects in first policy for number in node_numbers[2:]: self.brain.servers.stop(number=number) policy_1 = next(self.brain.policies) headers = {'X-Storage-Policy': policy_1.name} client.put_container(self.brain.url, self.brain.token, container_name, headers=headers) self.put_objects(all_obj_names, container_name=container_name) for number in node_numbers[2:]: self.brain.servers.start(number=number) return # put objects in second policy for number in node_numbers[:2]: self.brain.servers.stop(number=number) policy_2 = next(self.brain.policies) self.assertNotEqual(int(policy_1), int(policy_2)) # sanity check headers = {'X-Storage-Policy': policy_2.name} client.put_container(self.brain.url, self.brain.token, container_name, headers=headers) self.put_objects(['policy_1'], container_name=container_name) for number in node_numbers[:2]: self.brain.servers.start(number=number) # Shard the container client.post_container(self.url, self.admin_token, container_name, headers={'X-Container-Sharding': 'on'}) for n in node_numbers: self.sharders.once( number=n, additional_args='--partitions=%s' % part) # sanity checks for node in nodes: headers, shard_ranges = direct_client.direct_get_container( node, part, self.account, container_name, headers={'X-Backend-Record-Type': 'shard'}) self.assertLengthEqual(shard_ranges, 2) self.assertIn('X-Backend-Sharding-State', headers) self.assertEqual('sharded', headers['X-Backend-Sharding-State']) self.assert_container_listing(all_obj_names, container_name=container_name)"," def put_objects(self, obj_names): for obj in obj_names: client.put_object(self.url, self.token, self.container_name, obj) def assert_container_listing(self, expected_listing):",52,3
openstack%2Fswift~feature%2Fdeep~I4ffa72d557d96ab80830ec9f0f1e255989c70cb1,openstack/swift,feature/deep,I4ffa72d557d96ab80830ec9f0f1e255989c70cb1,WIP: historic scanner election code,ABANDONED,2017-09-20 09:20:50.000000000,2021-10-30 05:15:33.000000000,,"[{'_account_id': 7847}, {'_account_id': 13052}]","[{'number': 1, 'created': '2017-09-20 09:20:50.000000000', 'files': ['swift/container/sharder.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/34b89205a44a5d1a832ad1c4a76038841f2bc105', 'message': 'WIP: historic scanner election code\n\nStash of the scanner node election code that was\nreplaced with simple node 0 choice in commit\nbebd75fc\n\nChange-Id: I4ffa72d557d96ab80830ec9f0f1e255989c70cb1\nRelated-Change: I13657edcf66e0233e5714c42253d7585cc5755a2\n'}]",0,505563,34b89205a44a5d1a832ad1c4a76038841f2bc105,7,2,1,7847,,,0,"WIP: historic scanner election code

Stash of the scanner node election code that was
replaced with simple node 0 choice in commit
bebd75fc

Change-Id: I4ffa72d557d96ab80830ec9f0f1e255989c70cb1
Related-Change: I13657edcf66e0233e5714c42253d7585cc5755a2
",git fetch https://review.opendev.org/openstack/swift refs/changes/63/505563/1 && git format-patch -1 --stdout FETCH_HEAD,['swift/container/sharder.py'],1,34b89205a44a5d1a832ad1c4a76038841f2bc105,503938," # sharding. So find out if this is suppose to be the scanning # node, if defined scan_idx = self.get_metadata_item( broker, 'X-Container-Sysmeta-Shard-Scanner') if scan_idx is None and not scan_complete: try: scan_idx = self._find_scanner_node(broker) except Exception: # todo log and continue self.stats['containers_failed'] += 1 continue if scan_idx is not None and int(scan_idx) == self.node_idx \ and not scan_complete: def _find_scanner_node(self, broker): self.logger.info('Started searching for best node to be shard point ' 'scanner for %s/%s', broker.account, broker.container) obj_count = [broker.get_info()['object_count']] scanner_id = [self._get_node_index()] scanner_ids = {} def on_success(resp, node_idx): if not resp or not is_success(resp.status): return False found_scan_id = resp.getheader('X-Container-Sysmeta-Shard-Scanner') found_obj_count = int(resp.getheader('X-Container-Object-Count')) if found_scan_id: if scanner_ids.get(found_scan_id): scanner_ids[found_scan_id] += 1 else: scanner_ids[found_scan_id] = 1 if found_obj_count > obj_count[0]: obj_count[0] = found_obj_count scanner_id[0] = node_idx return True if not self._get_quorum(broker, success=on_success): self.logger.info('Failed to reach quorum on a shard scanner for ' '%s/%s', broker.account, broker.container) return # We have a quorum of responses but if there is already a node out # there with a scan_id set, then this means that there was a quorum # previously, and most probably this node failed the POSTing of the # metadata OR the POSTing of the metadata failed to get quorum. # In either case, we'll just use it, as replication should have/will # move the scan_id around anyway. And a scanner will always ask for # quorum before adding an item to shard_ranges, so all should be good. if scanner_ids: if len(scanner_ids) > 1: # find the most occurring or if a tie wait for replication to # choose the best max_id = max(scanner_ids.items(), key=lambda x: x[1]) # We need to make sure there isn't a tie, if there is we want # to bail and let replication decide max_ids = filter(lambda x: x == max_id[1], scanner_ids) if len(max_ids) > 1: self.logger.warn(""Cannot find a scanner node, too many "" ""potential scanners nodes (%s). "" ""Leaving for replication to "" ""determine."", "","".join([str(i) for i, c in max_ids])) return scanner_id[0] = max_id[0] else: scanner_id[0] = scanner_ids.keys()[0] # Found a node to be the scanner headers = {'X-Container-Sysmeta-Shard-Scanner': scanner_id[0]} timestamp = Timestamp(time.time()).internal broker.update_metadata({ 'X-Container-Sysmeta-Shard-Scanner': (scanner_id[0], timestamp)}) if not self._get_quorum(broker, op='POST', headers=headers): self.logger.info('Failed to set node %d as the shard scanner ' 'for %s/%s on remote servers', scanner_id, broker.account, broker.container) return self.logger.info('Best shard scanner for %s/%s is node %d', broker.account, broker.container, scanner_id[0]) self.logger.increment('scanner_searches') # return scanner_id[0] return self.get_metadata_item(broker, 'X-Container-Sysmeta-Shard-Scanner') # make sure this node is still the scanner (a split brain might have # happened and now someone else is). def on_success(resp, node_idx): if not resp or not is_success(resp.status): return False found_scan_id = resp.getheader('X-Container-Sysmeta-Shard-Scanner') if found_scan_id: if found_scan_id != str(self.node_idx): return False else: return False return True if not self._get_quorum(broker, success=on_success): self.logger.info('Failed to reach quorum node %d may not be the ' 'scanner for %s/%s anymore. Aborting scan.', self.node_idx, broker.account, broker.container) return"," # sharding. # TODO: bring back leader election (maybe?) if self.node_idx == 0 and not scan_complete: # TODO: if we bring back leader election, this is about the spot where # we should confirm we're still the scanner",115,5
openstack%2Fswift~feature%2Fdeep~Ie3e20834107c3e8effb3ef7a3dd150c45db4b410,openstack/swift,feature/deep,Ie3e20834107c3e8effb3ef7a3dd150c45db4b410,WIP probe test and fixes for shrinking,ABANDONED,2017-10-10 13:05:57.000000000,2021-10-30 05:15:27.000000000,,"[{'_account_id': 7847}, {'_account_id': 13052}]","[{'number': 1, 'created': '2017-10-10 13:05:57.000000000', 'files': ['swift/common/utils.py', 'test/probe/test_sharder.py', 'swift/container/sharder.py', 'swift/container/backend.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/2968d15543b8cf641755720e9c52ddfd1a520cba', 'message': 'WIP probe test and fixes for shrinking\n\nCleans up a few bugs in the shrink phases code but\nprobe test is a mess and fails\n\nChange-Id: Ie3e20834107c3e8effb3ef7a3dd150c45db4b410\n'}]",0,510872,2968d15543b8cf641755720e9c52ddfd1a520cba,7,2,1,7847,,,0,"WIP probe test and fixes for shrinking

Cleans up a few bugs in the shrink phases code but
probe test is a mess and fails

Change-Id: Ie3e20834107c3e8effb3ef7a3dd150c45db4b410
",git fetch https://review.opendev.org/openstack/swift refs/changes/72/510872/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/common/utils.py', 'test/probe/test_sharder.py', 'swift/container/sharder.py', 'swift/container/backend.py']",4,2968d15543b8cf641755720e9c52ddfd1a520cba,p-sharding-probe-shrinking, if created_at is None or created_at == '': # value will be '' if it has been deleted # TODO: maybe we should just try/except init'ing the ShardRange if not path:, if created_at is None: if path is None:,151,30
openstack%2Fswift~feature%2Fdeep~I6cb6fbe0d68e968e788725c762a2ac034e5060e5,openstack/swift,feature/deep,I6cb6fbe0d68e968e788725c762a2ac034e5060e5,WIP Store root container in shard ranges table,ABANDONED,2018-03-21 21:56:06.000000000,2021-10-30 05:15:22.000000000,,"[{'_account_id': 7847}, {'_account_id': 22348}]","[{'number': 1, 'created': '2018-03-21 21:56:06.000000000', 'files': ['swift/common/utils.py', 'test/unit/container/test_sharder.py', 'test/probe/test_sharder.py', 'test/unit/container/test_server.py', 'test/unit/container/test_backend.py', 'swift/container/sharder.py', 'swift/container/backend.py', 'test/unit/common/test_utils.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/9710a28c7ca2bff0910a75bc968a3faf7b3bdbf8', 'message': ""WIP Store root container in shard ranges table\n\nSince epoch is now in the shard ranges table it makes sense to put the\nroot container there too. It is stored under the name 'parent' because\nthat is a more general description. We currently 're-parent' shards of\na shard to the shard's parent, hence use of 'root' terminology, but in\nfuture we might not always do that and shards might have parents that\nare not the root.\n\nWith this patch, all steady state metadata required for managing\nsharding is encapsulated in shard ranges. Sysmeta is only used for\ntransient metadata such as the cleave cursor.\n\nChange-Id: I6cb6fbe0d68e968e788725c762a2ac034e5060e5\n""}]",0,555072,9710a28c7ca2bff0910a75bc968a3faf7b3bdbf8,4,2,1,7847,,,0,"WIP Store root container in shard ranges table

Since epoch is now in the shard ranges table it makes sense to put the
root container there too. It is stored under the name 'parent' because
that is a more general description. We currently 're-parent' shards of
a shard to the shard's parent, hence use of 'root' terminology, but in
future we might not always do that and shards might have parents that
are not the root.

With this patch, all steady state metadata required for managing
sharding is encapsulated in shard ranges. Sysmeta is only used for
transient metadata such as the cleave cursor.

Change-Id: I6cb6fbe0d68e968e788725c762a2ac034e5060e5
",git fetch https://review.opendev.org/openstack/swift refs/changes/72/555072/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/common/utils.py', 'test/unit/container/test_sharder.py', 'test/probe/test_sharder.py', 'test/unit/container/test_server.py', 'swift/container/sharder.py', 'test/unit/container/test_backend.py', 'swift/container/backend.py', 'test/unit/common/test_utils.py']",8,9710a28c7ca2bff0910a75bc968a3faf7b3bdbf8,p-sharding-root-in-shard-range," state=0, state_timestamp=None, epoch=None, parent=None) epoch=None, parent=None) epoch=ts_4, parent='a/c') 'epoch': ts_4, 'parent': 'a/c'}) state=1, state_timestamp=ts_3, epoch=ts_4, parent='a/c') 'state': 1, 'state_timestamp': ts_3.internal, 'epoch': ts_4, 'parent': 'a/c'}"," state=0, state_timestamp=None, epoch=None) epoch=None) epoch=ts_4) 'epoch': ts_4}) state=1, state_timestamp=ts_3, epoch=ts_4) 'state': 1, 'state_timestamp': ts_3.internal, 'epoch': ts_4}",71,70
openstack%2Fswift~feature%2Fdeep~I67159e5ae6a114298cfd61dec692e5a0235df10e,openstack/swift,feature/deep,I67159e5ae6a114298cfd61dec692e5a0235df10e,Make get_objects more sharder-specific,ABANDONED,2018-04-28 00:15:11.000000000,2021-10-30 05:15:10.000000000,,"[{'_account_id': 1179}, {'_account_id': 7847}, {'_account_id': 22348}]","[{'number': 1, 'created': '2018-04-28 00:15:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/0232e1b86f46eec96c28fe6309267649718902cd', 'message': ""Make get_objects more sharder-specific\n\nIt was only getting used by the sharder, so let's optimize for that.\nRemove a bunch of args that weren't being used, and use the index even\nthough we're grabbing both deleted and live rows. As part of that,\nchange the contract so we return an iterator over *all* rows in the\nrange, and punt to yield_objects to break it back up into pages.\n\nYeah, that last bit sounds kinda weird, but it lets us have at most\n2 * CONTAINER_LISTING_LIMIT rows in our head without needing to fetch a\nbunch of rows again.\n\nChange-Id: I67159e5ae6a114298cfd61dec692e5a0235df10e\n""}, {'number': 2, 'created': '2018-04-30 16:24:47.000000000', 'files': ['test/unit/container/test_backend.py', 'swift/container/sharder.py', 'swift/container/backend.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/fdd992339dc821279a787900145360580d943d76', 'message': ""Make get_objects more sharder-specific\n\nIt was only getting used by the sharder, so let's optimize for that.\nRemove a bunch of args that weren't being used, and use the index even\nthough we're grabbing both deleted and live rows. As part of that,\nchange the contract so we return an iterator over *all* rows in the\nrange, and punt to yield_objects to break it back up into pages.\n\nYeah, that last bit sounds kinda weird, but it lets us have at most\n2 * CONTAINER_LISTING_LIMIT rows in our head without needing to fetch a\nbunch of rows again.\n\nChange-Id: I67159e5ae6a114298cfd61dec692e5a0235df10e\n""}]",0,564954,fdd992339dc821279a787900145360580d943d76,7,3,2,15343,,,0,"Make get_objects more sharder-specific

It was only getting used by the sharder, so let's optimize for that.
Remove a bunch of args that weren't being used, and use the index even
though we're grabbing both deleted and live rows. As part of that,
change the contract so we return an iterator over *all* rows in the
range, and punt to yield_objects to break it back up into pages.

Yeah, that last bit sounds kinda weird, but it lets us have at most
2 * CONTAINER_LISTING_LIMIT rows in our head without needing to fetch a
bunch of rows again.

Change-Id: I67159e5ae6a114298cfd61dec692e5a0235df10e
",git fetch https://review.opendev.org/openstack/swift refs/changes/54/564954/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/container/sharder.py', 'test/unit/container/test_backend.py', 'swift/container/backend.py']",3,0232e1b86f46eec96c28fe6309267649718902cd,p-sharding-multiple-policies,"import heapq import operator parse_db_filename, make_db_file_path, reiterate def get_objects(self, marker='', end_marker='', since_row=None): Return a iterator of all object records within a range of names. :return: a iterator of dicts, each describing an object. def build_query(marker, end_marker, include_deleted, include_storage_policy): keys = ['name', 'created_at', 'size', 'content_type', 'etag'] if self.get_db_version(conn) < 1: keys.append('+deleted') if include_deleted: conditions = ['+deleted = 0'] else: conditions = ['+deleted = 1'] else: keys.append('deleted') if include_deleted: conditions = ['deleted = 0'] else: conditions = ['deleted = 1'] if include_storage_policy: keys.append('storage_policy_index') query_args = [] if marker: conditions.append('name > ?') query_args.append(marker) if end_marker: conditions.append('name < ?') query_args.append(end_marker) if since_row: conditions.append('ROWID > ?') query_args.append(since_row) query = 'SELECT %s FROM object WHERE %s ORDER BY name LIMIT ?' % ( ', '.join(keys), ' AND '.join(conditions)) return query, query_args + [CONTAINER_LISTING_LIMIT] def paged_iter(conn, marker, end_marker, include_deleted, include_storage_policy): found_a_row = True while found_a_row: found_a_row = False curs = conn.execute(*build_query( marker, end_marker, include_deleted, include_storage_policy)) curs.row_factory = None for row in curs: yield row marker = row[0] # name -- this is important for heapq.merge found_a_row = True def get_merged(conn, include_storage_policy): deleted_curs = paged_iter(conn, marker, end_marker, True, include_storage_policy) live_curs = paged_iter(conn, marker, end_marker, False, include_storage_policy) for row in heapq.merge(deleted_curs, live_curs): record = self._record_to_dict(row) record.setdefault('storage_policy_index', 0) yield record with self.get() as conn: try: return reiterate(get_merged(conn, include_storage_policy=True)) except sqlite3.OperationalError as err: if 'no such column: storage_policy_index' not in str(err): raise return reiterate(get_merged(conn, include_storage_policy=False))"," parse_db_filename, make_db_file_path def get_objects(self, limit=None, marker='', end_marker='', storage_policy_index=0, reverse=False, include_deleted=False, since_row=None, all_policies=False): Return a list of objects. :param limit: maximum number of entries to get :param storage_policy_index: storage policy index for query :param reverse: reverse the result order. :param include_deleted: include items that have the delete marker set :param all_policies: if True, include objects for all storage policies ignoring any value given for ``storage_policy_index`` :return: a list of dicts, each describing an object. def transform_record(record, policy_index): result = self._record_to_dict(record) result.setdefault('storage_policy_index', policy_index) return result limit = CONTAINER_LISTING_LIMIT if limit is None else limit return self.list_objects_iter( limit, marker, end_marker, prefix=None, delimiter=None, path=None, storage_policy_index=storage_policy_index, reverse=reverse, include_deleted=include_deleted, transform_func=transform_record, since_row=since_row, all_policies=all_policies )",84,63
openstack%2Fswift~feature%2Fdeep~I34559e1c30e152636ca9e76ad77c8a673fa6f1be,openstack/swift,feature/deep,I34559e1c30e152636ca9e76ad77c8a673fa6f1be,Store root/parent container in shard ranges table,ABANDONED,2018-04-19 14:04:52.000000000,2021-10-30 05:14:21.000000000,,"[{'_account_id': 1179}, {'_account_id': 7847}, {'_account_id': 22348}]","[{'number': 1, 'created': '2018-04-19 14:04:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/aaed5400d3d8d96ec72fd984b05f94408f4c914d', 'message': ""Store root/parent container in shard ranges table\n\nBefore the root container path was stored as sysmeta which is\nvulnerable to being deleted if a shard container is deleted (and\nconsequently we're careful to not delete shard containers until a\nreclaim age has passed since they became sharded). Now each container\nhas a parent shard range in its shard ranges table, the name of which\nis the root path.\n\nTo enable this, a new ShardRange attribute named 'ref' is introduced\nthat is persisted in the shard ranges table. The 'ref' attribute is\ncurrently only used to distinguish a parent shard range from any other\nshard range, by setting its value to 'parent'.\n\nIf missing, a broker's parent shard range is derived from its own\nshard range. This may occur in a root container, the parent shard\nrange name should be equal to the own shard range name.\n\nAlthough the new 'ref' attribute and db column are currently only used\nfor the purpose of identifying the parent shard range, in future the\n'ref' attribute may be used to distinguish a version of the shard\nrange on each replica of the same container. For example, ref might be\nset to the db id, which would never be equal to 'parent'.\n\nChange-Id: I34559e1c30e152636ca9e76ad77c8a673fa6f1be\n""}, {'number': 2, 'created': '2018-04-23 17:01:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/ed3146da95576c8f3ef2c3d3c975077823b61b88', 'message': ""Store root/parent container in shard ranges table\n\nBefore the root container path was stored as sysmeta which is\nvulnerable to being deleted if a shard container is deleted (and\nconsequently we're careful to not delete shard containers until a\nreclaim age has passed since they became sharded). Now each container\nhas a parent shard range in its shard ranges table, the name of which\nis the root path.\n\nTo enable this, a new ShardRange attribute named 'ref' is introduced\nthat is persisted in the shard ranges table. The 'ref' attribute is\ncurrently only used to distinguish a parent shard range from any other\nshard range, by setting its value to 'parent'.\n\nIf missing, a broker's parent shard range is derived from its own\nshard range. This may occur in a root container, the parent shard\nrange name should be equal to the own shard range name.\n\nAlthough the new 'ref' attribute and db column are currently only used\nfor the purpose of identifying the parent shard range, in future the\n'ref' attribute may be used to distinguish a version of the shard\nrange on each replica of the same container. For example, ref might be\nset to the db id, which would never be equal to 'parent'.\n\nChange-Id: I34559e1c30e152636ca9e76ad77c8a673fa6f1be\n""}, {'number': 3, 'created': '2018-04-24 15:02:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/8c8e4adaaebb53472ceeef75a46213e1ecea859f', 'message': ""Store root/parent container in shard ranges table\n\nBefore the root container path was stored as sysmeta which is\nvulnerable to being deleted if a shard container is deleted (and\nconsequently we're careful to not delete shard containers until a\nreclaim age has passed since they became sharded). Now each container\nhas a parent shard range in its shard ranges table, the name of which\nis the root path.\n\nTo enable this, a new ShardRange attribute named 'ref' is introduced\nthat is persisted in the shard ranges table. The 'ref' attribute is\ncurrently only used to distinguish a parent shard range from any other\nshard range, by setting its value to 'parent'.\n\nIf missing, a broker's parent shard range is derived from its own\nshard range. This may occur in a root container, the parent shard\nrange name should be equal to the own shard range name.\n\nAlthough the new 'ref' attribute and db column are currently only used\nfor the purpose of identifying the parent shard range, in future the\n'ref' attribute may be used to distinguish a version of the shard\nrange on each replica of the same container. For example, ref might be\nset to the db id, which would never be equal to 'parent'.\n\nChange-Id: I34559e1c30e152636ca9e76ad77c8a673fa6f1be\n""}, {'number': 4, 'created': '2018-04-24 22:32:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/33a93663b38593aedb81dd8576ea737548552344', 'message': ""Store root/parent container in shard ranges table\n\nBefore the root container path was stored as sysmeta which is\nvulnerable to being deleted if a shard container is deleted (and\nconsequently we're careful to not delete shard containers until a\nreclaim age has passed since they became sharded). Now each container\nhas a parent shard range in its shard ranges table, the name of which\nis the root path.\n\nTo enable this, a new ShardRange attribute named 'ref' is introduced\nthat is persisted in the shard ranges table. The 'ref' attribute is\ncurrently only used to distinguish a parent shard range from any other\nshard range, by setting its value to 'parent'.\n\nIf missing, a broker's parent shard range is derived from its own\nshard range. This may occur in a root container, the parent shard\nrange name should be equal to the own shard range name.\n\nAlthough the new 'ref' attribute and db column are currently only used\nfor the purpose of identifying the parent shard range, in future the\n'ref' attribute may be used to distinguish a version of the shard\nrange on each replica of the same container. For example, ref might be\nset to the db id, which would never be equal to 'parent'.\n\nChange-Id: I34559e1c30e152636ca9e76ad77c8a673fa6f1be\n""}, {'number': 5, 'created': '2018-04-25 11:47:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/517ed48a28f3a01df353ebc977eefe58363386b6', 'message': ""Store root/parent container in shard ranges table\n\nBefore the root container path was stored as sysmeta which is\nvulnerable to being deleted if a shard container is deleted (and\nconsequently we're careful to not delete shard containers until a\nreclaim age has passed since they became sharded). Now each container\nhas a parent shard range in its shard ranges table, the name of which\nis the root path.\n\nTo enable this, a new ShardRange attribute named 'ref' is introduced\nthat is persisted in the shard ranges table. The 'ref' attribute is\ncurrently only used to distinguish a parent shard range from any other\nshard range, by setting its value to 'parent'.\n\nIf missing, a broker's parent shard range is derived from its own\nshard range. This may occur in a root container, the parent shard\nrange name should be equal to the own shard range name.\n\nAlthough the new 'ref' attribute and db column are currently only used\nfor the purpose of identifying the parent shard range, in future the\n'ref' attribute may be used to distinguish a version of the shard\nrange on each replica of the same container. For example, ref might be\nset to the db id, which would never be equal to 'parent'.\n\nChange-Id: I34559e1c30e152636ca9e76ad77c8a673fa6f1be\n""}, {'number': 6, 'created': '2018-04-27 10:25:21.000000000', 'files': ['swift/common/utils.py', 'test/unit/common/test_db_replicator.py', 'test/unit/container/test_sharder.py', 'swift/common/db_replicator.py', 'test/probe/test_sharder.py', 'test/unit/container/test_backend.py', 'swift/container/sharder.py', 'swift/container/backend.py', 'test/unit/common/test_utils.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/18bf58759ef415cc44cb998e400b9e1ee720c8c5', 'message': ""Store root/parent container in shard ranges table\n\nBefore the root container path was stored as sysmeta which is\nvulnerable to being deleted if a shard container is deleted (and\nconsequently we're careful to not delete shard containers until a\nreclaim age has passed since they became sharded). Now each container\nhas a parent shard range in its shard ranges table, the name of which\nis the root path.\n\nTo enable this, a new ShardRange attribute named 'ref' is introduced\nthat is persisted in the shard ranges table. The 'ref' attribute is\ncurrently only used to distinguish a parent shard range from any other\nshard range, by setting its value to 'parent'.\n\nIf missing, a broker's parent shard range is derived from its own\nshard range. This may occur in a root container, the parent shard\nrange name should be equal to the own shard range name.\n\nAlthough the new 'ref' attribute and db column are currently only used\nfor the purpose of identifying the parent shard range, in future the\n'ref' attribute may be used to distinguish a version of the shard\nrange on each replica of the same container. For example, ref might be\nset to the db id, which would never be equal to 'parent'.\n\nChange-Id: I34559e1c30e152636ca9e76ad77c8a673fa6f1be\n""}]",1,562603,18bf58759ef415cc44cb998e400b9e1ee720c8c5,17,3,6,7847,,,0,"Store root/parent container in shard ranges table

Before the root container path was stored as sysmeta which is
vulnerable to being deleted if a shard container is deleted (and
consequently we're careful to not delete shard containers until a
reclaim age has passed since they became sharded). Now each container
has a parent shard range in its shard ranges table, the name of which
is the root path.

To enable this, a new ShardRange attribute named 'ref' is introduced
that is persisted in the shard ranges table. The 'ref' attribute is
currently only used to distinguish a parent shard range from any other
shard range, by setting its value to 'parent'.

If missing, a broker's parent shard range is derived from its own
shard range. This may occur in a root container, the parent shard
range name should be equal to the own shard range name.

Although the new 'ref' attribute and db column are currently only used
for the purpose of identifying the parent shard range, in future the
'ref' attribute may be used to distinguish a version of the shard
range on each replica of the same container. For example, ref might be
set to the db id, which would never be equal to 'parent'.

Change-Id: I34559e1c30e152636ca9e76ad77c8a673fa6f1be
",git fetch https://review.opendev.org/openstack/swift refs/changes/03/562603/3 && git format-patch -1 --stdout FETCH_HEAD,"['swift/common/utils.py', 'test/unit/container/test_sharder.py', 'test/probe/test_sharder.py', 'swift/container/sharder.py', 'test/unit/container/test_backend.py', 'swift/container/backend.py', 'test/unit/common/test_utils.py']",7,aaed5400d3d8d96ec72fd984b05f94408f4c914d,p-sharding-parent-range," sr = utils.ShardRange(**params) self.assertDictEqual(dict(sr), expected) meta_timestamp=None, deleted=0, state=0, state_timestamp=None, epoch=None) epoch=None, ref='') epoch=ts_4, ref='abc') 'epoch': ts_4, 'ref': 'abc'}) state=1, state_timestamp=ts_3, epoch=ts_4, ref='abc') 'state': 1, 'state_timestamp': ts_3.internal, 'epoch': ts_4, 'ref': 'abc'}"," pr = utils.ShardRange(**params) self.assertDictEqual(dict(pr), expected) meta_timestamp=None, deleted=0, state=0, state_timestamp=None, epoch=None) epoch=None) epoch=ts_4) 'epoch': ts_4}) state=1, state_timestamp=ts_3, epoch=ts_4) 'state': 1, 'state_timestamp': ts_3.internal, 'epoch': ts_4}",455,151
openstack%2Fdesignate-tempest-plugin~master~I47e8371e55f07afe0dbea95f804f3833f42fa1ef,openstack/designate-tempest-plugin,master,I47e8371e55f07afe0dbea95f804f3833f42fa1ef,New test cases for quota tests suite,MERGED,2021-07-01 12:59:04.000000000,2021-10-30 04:33:39.000000000,2021-10-30 04:31:11.000000000,"[{'_account_id': 6994}, {'_account_id': 11628}, {'_account_id': 13252}, {'_account_id': 15025}, {'_account_id': 18894}, {'_account_id': 19298}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 29681}]","[{'number': 1, 'created': '2021-07-01 12:59:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/b765d279c3be490c6b32c3791a1d7a052d2be511', 'message': 'New test cases for quota tests suite\n\n1) set_quota_for_a_project\n   As Admin set ""quotas"" for Primary tenant\n\nChange-Id: I47e8371e55f07afe0dbea95f804f3833f42fa1ef\n'}, {'number': 2, 'created': '2021-07-04 20:30:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/f1487ce1f4e30ea857ce676d4aba90db26c6619e', 'message': 'New test cases for quota tests suite\n\n1) test_admin_sets_quota_for_a_project\n   Admin client sets quotas for a primary project\n2) test_primary_fails_to_set_quota\n   Primary user fails to set quotas with: ""403 Forbidden""\n3) test_admin_sets_invalid_quota_values\n   Admin user tries to set quotas that with invalid\n   values. Expected: ""400 BadRequest""\n4) test_alt_reaches_zones_quota\n   Alt user tries to create a zones up untill\n   ""413 RateLimitExceeded"" is raised\n\nChange-Id: I47e8371e55f07afe0dbea95f804f3833f42fa1ef\n'}, {'number': 3, 'created': '2021-10-19 10:14:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/aac8337785b14196ca511170b0ee658ab3271473', 'message': 'New test cases for quota tests suite\n\n1) test_admin_sets_quota_for_a_project\n   Admin client sets quotas for a primary project\n2) test_primary_fails_to_set_quota\n   Primary user fails to set quotas with: ""403 Forbidden""\n3) test_admin_sets_invalid_quota_values\n   Admin user tries to set quotas that with invalid\n   values. Expected: ""400 BadRequest""\n4) test_alt_reaches_zones_quota\n   Alt user tries to create a zones up untill\n   ""413 RateLimitExceeded"" is raised\n\nChange-Id: I47e8371e55f07afe0dbea95f804f3833f42fa1ef\n'}, {'number': 4, 'created': '2021-10-25 13:53:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/ce22e48b5484aebe198df8fff906a69058be28ed', 'message': 'New test cases for quota tests suite\n\n1) test_admin_sets_quota_for_a_project\n   Admin client sets quotas for a primary project\n2) test_primary_fails_to_set_quota\n   Primary user fails to set quotas with: ""403 Forbidden""\n3) test_admin_sets_invalid_quota_values\n   Admin user tries to set quotas that with invalid\n   values. Expected: ""400 BadRequest""\n4) test_alt_reaches_zones_quota\n   Alt user tries to create a zones up untill\n   ""413 RateLimitExceeded"" is raised\n\nChange-Id: I47e8371e55f07afe0dbea95f804f3833f42fa1ef\n'}, {'number': 5, 'created': '2021-10-26 11:46:14.000000000', 'files': ['designate_tempest_plugin/tests/api/v2/test_quotas.py', 'designate_tempest_plugin/tests/scenario/v2/test_quotas.py', 'designate_tempest_plugin/services/dns/v2/json/quotas_client.py'], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/a8a8eaf69417437c56e889950dde8ca2429eae1c', 'message': 'New test cases for quota tests suite\n\n1) test_admin_sets_quota_for_a_project\n   Admin client sets quotas for a primary project\n2) test_primary_fails_to_set_quota\n   Primary user fails to set quotas with: ""403 Forbidden""\n3) test_admin_sets_invalid_quota_values\n   Admin user tries to set quotas that with invalid\n   values. Expected: ""400 BadRequest""\n4) test_alt_reaches_zones_quota\n   Alt user tries to create a zones up untill\n   ""413 RateLimitExceeded"" is raised\n\nChange-Id: I47e8371e55f07afe0dbea95f804f3833f42fa1ef\n'}]",6,799079,a8a8eaf69417437c56e889950dde8ca2429eae1c,20,9,5,28609,,,0,"New test cases for quota tests suite

1) test_admin_sets_quota_for_a_project
   Admin client sets quotas for a primary project
2) test_primary_fails_to_set_quota
   Primary user fails to set quotas with: ""403 Forbidden""
3) test_admin_sets_invalid_quota_values
   Admin user tries to set quotas that with invalid
   values. Expected: ""400 BadRequest""
4) test_alt_reaches_zones_quota
   Alt user tries to create a zones up untill
   ""413 RateLimitExceeded"" is raised

Change-Id: I47e8371e55f07afe0dbea95f804f3833f42fa1ef
",git fetch https://review.opendev.org/openstack/designate-tempest-plugin refs/changes/79/799079/3 && git format-patch -1 --stdout FETCH_HEAD,"['designate_tempest_plugin/tests/api/v2/test_quotas.py', 'designate_tempest_plugin/services/dns/v2/json/quotas_client.py']",2,b765d279c3be490c6b32c3791a1d7a052d2be511,new_quota_tests," @base.handle_errors def set_quotas(self, project_id, quotas, params=None, headers=None): """"""Set a specific quota to given project ID :param project_id: Set the quotas of this project id. :param quotas: Dictionary of quotas to set (POST payload) :param params: A Python dict that represents the query paramaters to include in the request URI. :param headers (dict): The headers to use for the request. :return: Serialized quota as a dictionary. """""" resp, body = self._create_request( ""quotas/{}"".format(project_id), data=quotas, params=params, headers=headers) self.expected_success(200, resp.status) return resp, body",,31,0
openstack%2Fdesignate-tempest-plugin~master~I840b98135017cc7fdee77f51223e0bfe2ae1ae74,openstack/designate-tempest-plugin,master,I840b98135017cc7fdee77f51223e0bfe2ae1ae74,Adding negative test for a Primary user,MERGED,2021-07-06 10:37:46.000000000,2021-10-30 04:32:36.000000000,2021-10-30 04:31:10.000000000,"[{'_account_id': 6994}, {'_account_id': 11628}, {'_account_id': 13252}, {'_account_id': 15025}, {'_account_id': 18894}, {'_account_id': 19298}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 29681}, {'_account_id': 31664}]","[{'number': 1, 'created': '2021-07-06 10:37:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/9cf3649d5c924a158a8c9b1fffa16b825b8253f3', 'message': 'Adding negative test for a Primary user\n\n1) test_primary_is_forbidden_to_list_service_statuses\n   Make sure that Primary user fails to activate\n   ""List Services Status"" API with 403 Forbidden.\n\nChange-Id: I840b98135017cc7fdee77f51223e0bfe2ae1ae74\n'}, {'number': 2, 'created': '2021-10-19 08:01:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/999fb2768f75c011aaef9e42934e85f49c5820cf', 'message': 'Adding negative test for a Primary user\n\n1) test_primary_is_forbidden_to_list_service_statuses\n   Make sure that Primary user fails to activate\n   ""List Services Status"" API with 403 Forbidden.\n\nChange-Id: I840b98135017cc7fdee77f51223e0bfe2ae1ae74\n'}, {'number': 3, 'created': '2021-10-25 14:46:30.000000000', 'files': ['designate_tempest_plugin/tests/api/v2/test_service_statuses.py'], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/dcd00fa106abb4bb0159b51341002123a3801cbe', 'message': 'Adding negative test for a Primary user\n\n1) test_primary_is_forbidden_to_list_service_statuses\n   Make sure that Primary user fails to activate\n   ""List Services Status"" API with 403 Forbidden.\n\nChange-Id: I840b98135017cc7fdee77f51223e0bfe2ae1ae74\n'}]",4,799628,dcd00fa106abb4bb0159b51341002123a3801cbe,14,10,3,28609,,,0,"Adding negative test for a Primary user

1) test_primary_is_forbidden_to_list_service_statuses
   Make sure that Primary user fails to activate
   ""List Services Status"" API with 403 Forbidden.

Change-Id: I840b98135017cc7fdee77f51223e0bfe2ae1ae74
",git fetch https://review.opendev.org/openstack/designate-tempest-plugin refs/changes/28/799628/3 && git format-patch -1 --stdout FETCH_HEAD,['designate_tempest_plugin/tests/api/v2/test_service_statuses.py'],1,9cf3649d5c924a158a8c9b1fffa16b825b8253f3,new_tests_for_list_all_services,"from tempest.lib import exceptions as lib_exc credentials = ['primary', 'admin', 'alt'] cls.primary_client = cls.os_primary.service_client cls.alt_client = cls.os_alt.service_client def test_admin_list_service_statuses(self): @decorators.idempotent_id('d4753f76-de43-11eb-91d1-74e5f9e2a801') def test_primary_is_forbidden_to_list_service_statuses(self): LOG.info('Try to ""list service statuses"" as Primary user') self.assertRaises( lib_exc.Forbidden, self.primary_client.list_statuses) headers = [{'x-auth-all-projects': True}, {'x-auth-sudo-project-id': self.alt_client.project_id}] for header in headers: LOG.info('Try to ""list service statuses"" using {} ' 'HTTP header'.format(header)) self.assertRaises( lib_exc.Forbidden, self.primary_client.list_statuses, headers=header)"," credentials = ['primary', 'admin'] cls.client = cls.os_primary.service_client def test_list_service_statuses(self):",22,3
openstack%2Ftripleo-heat-templates~stable%2Fvictoria~Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,openstack/tripleo-heat-templates,stable/victoria,Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,Remove mariadb-server packages from the host,MERGED,2021-10-28 06:18:27.000000000,2021-10-30 02:34:55.000000000,2021-10-30 02:34:55.000000000,"[{'_account_id': 14985}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 06:18:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/20cd28e4f7f3590e6b1692c5b2efc2bf2e589223', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\n(cherry picked from commit: b8a2ccc7ee4061a8b479b66ed293103c17e31c44)\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n""}, {'number': 2, 'created': '2021-10-29 14:34:50.000000000', 'files': ['deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1a20780ae062d1ac6e992623917dc5eac8cf65c7', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)\n""}]",1,815793,1a20780ae062d1ac6e992623917dc5eac8cf65c7,11,4,2,26343,,,0,"Remove mariadb-server packages from the host

During updates/upgrades, installing mariadb-server on the
host may impact the behaviour of containerized mysql.

During a FFU if mariadb-server is upgraded, it may happen
that the rpm scriptlets fail to start mariadb server and
leave a crash log behind (tc.log). This prevents the
regular online upgrade from happening.

During an upgrade, mariadb-server used to be force-upgraded
in the mysql service for historical reasons. It's not
necessary since mysql is containerized and can trigger
the same crash as explained above.

During a minor update, the same reasoning can apply if
RHEL channel ships a new mariadb-server rpm as scriptlets
will probably leave a crash behind as well.

Make sure mariadb-server is never installed, while
keeping mariadb CLI if already present on the host, to
avoid operational impacts.

Change-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b
Closes-Bug: #1946742
(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/93/815793/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml']",2,20cd28e4f7f3590e6b1692c5b2efc2bf2e589223,, yum -y remove *el7ost* \ mariadb-server* -- \, yum -y remove *el7ost* -- \,7,7
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,openstack/tripleo-heat-templates,stable/wallaby,Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,Remove mariadb-server packages from the host,MERGED,2021-10-28 06:17:46.000000000,2021-10-30 02:34:51.000000000,2021-10-30 02:34:51.000000000,"[{'_account_id': 14985}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 06:17:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b8a2ccc7ee4061a8b479b66ed293103c17e31c44', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\n(cherry picked from commit: d33865cded7766eb8d35ce56d5eb206c2dda1ad9)\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n""}, {'number': 2, 'created': '2021-10-29 14:31:33.000000000', 'files': ['deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4bf7f940b13f95ee331b638b8070a03d4d9c014d', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)\n""}]",2,815792,4bf7f940b13f95ee331b638b8070a03d4d9c014d,12,4,2,26343,,,0,"Remove mariadb-server packages from the host

During updates/upgrades, installing mariadb-server on the
host may impact the behaviour of containerized mysql.

During a FFU if mariadb-server is upgraded, it may happen
that the rpm scriptlets fail to start mariadb server and
leave a crash log behind (tc.log). This prevents the
regular online upgrade from happening.

During an upgrade, mariadb-server used to be force-upgraded
in the mysql service for historical reasons. It's not
necessary since mysql is containerized and can trigger
the same crash as explained above.

During a minor update, the same reasoning can apply if
RHEL channel ships a new mariadb-server rpm as scriptlets
will probably leave a crash behind as well.

Make sure mariadb-server is never installed, while
keeping mariadb CLI if already present on the host, to
avoid operational impacts.

Change-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b
Closes-Bug: #1946742
(cherry picked from commit d33865cded7766eb8d35ce56d5eb206c2dda1ad9)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/92/815792/2 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml']",2,b8a2ccc7ee4061a8b479b66ed293103c17e31c44,, yum -y remove *el7ost* \ mariadb-server* -- \, yum -y remove *el7ost* -- \,7,7
openstack%2Fpuppet-neutron~stable%2Fvictoria~I87dba40544a76991f5fa16705ab1af00f75e5dc9,openstack/puppet-neutron,stable/victoria,I87dba40544a76991f5fa16705ab1af00f75e5dc9,Support arbitrary configurations for ovs agent and sriov agent,MERGED,2021-10-28 05:46:07.000000000,2021-10-30 02:29:22.000000000,2021-10-30 02:12:17.000000000,"[{'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 05:46:07.000000000', 'files': ['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/98e2fc0b911908b1ba9339104d844175e8201769', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n'}]",5,815790,98e2fc0b911908b1ba9339104d844175e8201769,21,3,1,13861,,,0,"Support arbitrary configurations for ovs agent and sriov agent

This patch introduces new parameters to the neutron::config class,
to allow us to add arbitary configurations into openvswitch_agent.ini
and sriov_agent.ini .

Change-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9
(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/90/815790/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp']",3,98e2fc0b911908b1ba9339104d844175e8201769,agent_config-stable/victoria,"# [*ovs_agent_config*] # (optional) Manage configuration of openvswitch_agent.ini # # [*sriov_agent_config*] # (optional) Manage configuration of sriov_agent.ini # $ovs_agent_config = {}, $sriov_agent_config = {}, validate_legacy(Hash, 'validate_hash', $ovs_agent_config) validate_legacy(Hash, 'validate_hash', $sriov_agent_config) create_resources('neutron_agent_ovs', $ovs_agent_config) create_resources('neutron_sriov_agent_config', $sriov_agent_config)",,36,1
openstack%2Ftripleo-heat-templates~master~Ib7a173643880b573c3f30b3d990c7c617231a14c,openstack/tripleo-heat-templates,master,Ib7a173643880b573c3f30b3d990c7c617231a14c,Honor the ExternalSwiftUserTenant parameter,MERGED,2020-10-27 04:57:31.000000000,2021-10-30 00:27:42.000000000,2021-10-30 00:27:42.000000000,"[{'_account_id': 6968}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-10-27 04:57:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7c0ae2f013c850caf28682f668eee29bfb5056bb', 'message': 'Honor the ExternalSwiftUserTenant parameter\n\nThe ExternalSwiftUserTenant parameter is supposed to determin the\nkeystone project to which the swift user belong, however in fact\nthe parameter is not honored.\n\nThis patch ensures that the parmaeter value is used as a project name\nwhen TripleO creates keystone resources.\n\nChange-Id: Ib7a173643880b573c3f30b3d990c7c617231a14c\nClose-Bug: #1901652\n'}, {'number': 2, 'created': '2020-10-29 14:44:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bd01d45286685e4440cede070549c999c662e9c3', 'message': 'Honor the ExternalSwiftUserTenant parameter\n\nThe ExternalSwiftUserTenant parameter is supposed to determin the\nkeystone project to which the swift user belong, however in fact\nthe parameter is not honored.\n\nThis patch ensures that the parmaeter value is used as a project name\nwhen TripleO creates keystone resources.\n\nChange-Id: Ib7a173643880b573c3f30b3d990c7c617231a14c\nClose-Bug: #1901652\n'}, {'number': 3, 'created': '2021-02-01 12:14:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ae1ae7120c5a23a24789c0df14642d39c54f95af', 'message': 'Honor the ExternalSwiftUserTenant parameter\n\nThe ExternalSwiftUserTenant parameter is supposed to determin the\nkeystone project to which the swift user belong, however in fact\nthe parameter is not honored.\n\nThis patch ensures that the parmaeter value is used as a project name\nwhen TripleO creates keystone resources.\n\nChange-Id: Ib7a173643880b573c3f30b3d990c7c617231a14c\nClose-Bug: #1901652\n'}, {'number': 4, 'created': '2021-02-01 23:03:38.000000000', 'files': ['deployment/swift/external-swift-proxy-baremetal-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e618ad8d3443b3f773de52f655300ac04144b449', 'message': 'Honor the ExternalSwiftUserTenant parameter\n\nThe ExternalSwiftUserTenant parameter is supposed to determin the\nkeystone project to which the swift user belong, however in fact\nthe parameter is not honored.\n\nThis patch ensures that the parmaeter value is used as a project name\nwhen TripleO creates keystone resources.\n\nChange-Id: Ib7a173643880b573c3f30b3d990c7c617231a14c\nCloses-Bug: #1901652\n'}]",4,759808,e618ad8d3443b3f773de52f655300ac04144b449,25,7,4,9816,,,0,"Honor the ExternalSwiftUserTenant parameter

The ExternalSwiftUserTenant parameter is supposed to determin the
keystone project to which the swift user belong, however in fact
the parameter is not honored.

This patch ensures that the parmaeter value is used as a project name
when TripleO creates keystone resources.

Change-Id: Ib7a173643880b573c3f30b3d990c7c617231a14c
Closes-Bug: #1901652
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/08/759808/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/swift/external-swift-proxy-baremetal-puppet.yaml'],1,7c0ae2f013c850caf28682f668eee29bfb5056bb,bug/1901652, project: {get_param: ExternalSwiftUserTenant},,1,0
openstack%2Ftripleo-quickstart-extras~master~I7db33e008750d357603a06fa82d5488852b59566,openstack/tripleo-quickstart-extras,master,I7db33e008750d357603a06fa82d5488852b59566,Fixed minor typo in the task name,MERGED,2021-10-27 13:28:03.000000000,2021-10-30 00:27:37.000000000,2021-10-30 00:27:37.000000000,"[{'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 13:28:03.000000000', 'files': ['roles/overcloud-deploy/tasks/create-scripts.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e3d13b710f5873e7fe7597a65a8b3c35576122da', 'message': 'Fixed minor typo in the task name\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I7db33e008750d357603a06fa82d5488852b59566\n'}]",3,815665,e3d13b710f5873e7fe7597a65a8b3c35576122da,24,4,1,32926,,,0,"Fixed minor typo in the task name

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I7db33e008750d357603a06fa82d5488852b59566
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/65/815665/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-deploy/tasks/create-scripts.yml'],1,e3d13b710f5873e7fe7597a65a8b3c35576122da,typocorrection,- name: Create config-download environment,- name: Create config-downlad environment,1,1
openstack%2Fdesignate-tempest-plugin~master~I829011ef0c13f0fd942c75dce826e550ff9b313d,openstack/designate-tempest-plugin,master,I829011ef0c13f0fd942c75dce826e550ff9b313d,List enabled Designate API versions,MERGED,2021-08-01 13:37:06.000000000,2021-10-30 00:15:36.000000000,2021-10-30 00:14:15.000000000,"[{'_account_id': 11628}, {'_account_id': 13252}, {'_account_id': 15025}, {'_account_id': 18894}, {'_account_id': 19298}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 29681}, {'_account_id': 31664}]","[{'number': 1, 'created': '2021-08-01 13:37:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/5fc33fe6e45dc58bfad624c159a7ae86d90f53af', 'message': ""List enabled Designate API versions\n\nTest is using Admin and Primary tenants to list enabled Designate\nAPI versions and PASS when the received version/s list is in:\n[['v1'], ['v2'], ['v1', 'v2']]\n\nChange-Id: I829011ef0c13f0fd942c75dce826e550ff9b313d\n""}, {'number': 2, 'created': '2021-10-08 15:42:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/e5cae730eb8b9e99805dd95e66b7982351719b52', 'message': ""List enabled Designate API versions\n\nTest is using Admin and Primary tenants to list enabled Designate\nAPI versions and PASS when the received version/s list is in:\n[['v1'], ['v2'], ['v1', 'v2']]\n\nChange-Id: I829011ef0c13f0fd942c75dce826e550ff9b313d\n""}, {'number': 3, 'created': '2021-10-18 09:19:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/44221b39ef249357738b4cfcdb67939646e60230', 'message': ""List enabled Designate API versions\n\nTest is using Admin and Primary tenants to list enabled Designate\nAPI versions and PASS when the received version/s list is in:\n[['v1'], ['v2'], ['v1', 'v2']]\n\nChange-Id: I829011ef0c13f0fd942c75dce826e550ff9b313d\n""}, {'number': 4, 'created': '2021-10-18 09:20:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/1262939212ea80b2b6001a1648685e1d851bffc4', 'message': ""List enabled Designate API versions\n\nTest is using Admin and Primary tenants to list enabled Designate\nAPI versions and PASS when the received version/s list is in:\n[['v1'], ['v2'], ['v1', 'v2']]\n\nChange-Id: I829011ef0c13f0fd942c75dce826e550ff9b313d\n""}, {'number': 5, 'created': '2021-10-28 15:55:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/b7e6d44db93aee86d7e91b384f720657d5745c3d', 'message': ""List enabled Designate API versions\n\nTest uses: Admin, Primary and Not Authorized users, to list\nall enabled API versions.\nTest is PASS if the received version/s list is in:\n[['v1'], ['v2'], ['v1', 'v2']]\n\nChange-Id: I829011ef0c13f0fd942c75dce826e550ff9b313d\n""}, {'number': 6, 'created': '2021-10-28 18:19:49.000000000', 'files': ['designate_tempest_plugin/services/dns/v2/__init__.py', 'designate_tempest_plugin/tests/api/v2/test_enabled_api_version.py', 'designate_tempest_plugin/services/dns/v2/json/api_version_client.py'], 'web_link': 'https://opendev.org/openstack/designate-tempest-plugin/commit/919aa2834289c23ed406d119489a08649adec3f3', 'message': ""List enabled Designate API versions\n\nTest uses: Admin, Primary and Not Authorized users, to list\nall enabled API versions.\nTest is PASS if the received version/s list is in:\n[['v1'], ['v2'], ['v1', 'v2']]\n\nChange-Id: I829011ef0c13f0fd942c75dce826e550ff9b313d\n""}]",12,803116,919aa2834289c23ed406d119489a08649adec3f3,32,9,6,28609,,,0,"List enabled Designate API versions

Test uses: Admin, Primary and Not Authorized users, to list
all enabled API versions.
Test is PASS if the received version/s list is in:
[['v1'], ['v2'], ['v1', 'v2']]

Change-Id: I829011ef0c13f0fd942c75dce826e550ff9b313d
",git fetch https://review.opendev.org/openstack/designate-tempest-plugin refs/changes/16/803116/2 && git format-patch -1 --stdout FETCH_HEAD,"['designate_tempest_plugin/clients.py', 'designate_tempest_plugin/tests/api/v2/test_enabled_api_version.py', 'designate_tempest_plugin/services/dns/v2/json/api_version_client.py']",3,5fc33fe6e45dc58bfad624c159a7ae86d90f53af,check_version,"# Copyright 2021 Red Hat. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from designate_tempest_plugin.services.dns.v2.json import base class ApiVersionClient(base.DnsClientV2Base): @base.handle_errors def list_enabled_api_versions(self): """"""Show all enabled API versions :return: Dictionary containing version details """""" resp, body = self.get('/') self.expected_success(self.LIST_STATUS_CODES, resp.status) return resp, self.deserialize(resp, body) ",,86,0
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I90932c2445eda2cd0d6e661b561ce86a87dcdec2,openstack/tripleo-heat-templates,stable/train,I90932c2445eda2cd0d6e661b561ce86a87dcdec2,Add OVNAvailabilityZone to improve UX,MERGED,2021-10-20 12:15:30.000000000,2021-10-29 22:27:36.000000000,2021-10-29 22:25:50.000000000,"[{'_account_id': 6681}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-20 12:15:30.000000000', 'files': ['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4b53f0fab903d1811bc44370f30f8676edfc341e', 'message': 'Add OVNAvailabilityZone to improve UX\n\nCurrently to set az for ovn, user need to set\nOVNCMSOptions with value:\n""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",\nwhich is not very good ux.\nAdding new param OVNAvailabilityZone will improve ux\nand improve configuration redabilities\n\nCloses-Bug: #1923585\nChange-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2\n(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)\n'}]",0,814751,4b53f0fab903d1811bc44370f30f8676edfc341e,10,4,1,11082,,,0,"Add OVNAvailabilityZone to improve UX

Currently to set az for ovn, user need to set
OVNCMSOptions with value:
""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",
which is not very good ux.
Adding new param OVNAvailabilityZone will improve ux
and improve configuration redabilities

Closes-Bug: #1923585
Change-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2
(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/51/814751/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml']",2,4b53f0fab903d1811bc44370f30f8676edfc341e,change-801723-stable/ussuri-stable/train,--- features: - | Added new heat role specific param OVNAvailabilityZone to set availability-zones for ovn. This param replace seting availability-zones throught OVNCMSOptions,,23,1
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I90932c2445eda2cd0d6e661b561ce86a87dcdec2,openstack/tripleo-heat-templates,stable/ussuri,I90932c2445eda2cd0d6e661b561ce86a87dcdec2,Add OVNAvailabilityZone to improve UX,MERGED,2021-10-20 12:14:56.000000000,2021-10-29 22:27:30.000000000,2021-10-29 22:25:47.000000000,"[{'_account_id': 6681}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-20 12:14:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ac2021ca72e434d41c1c193ea619dd9a5a8202a7', 'message': 'Add OVNAvailabilityZone to improve UX\n\nCurrently to set az for ovn, user need to set\nOVNCMSOptions with value:\n""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",\nwhich is not very good ux.\nAdding new param OVNAvailabilityZone will improve ux\nand improve configuration redabilities\n\nCloses-Bug: #1923585\nChange-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2\n(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)\n'}, {'number': 2, 'created': '2021-10-27 13:54:49.000000000', 'files': ['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/491105df1e91c101656480873e1e5ebfaf44ee02', 'message': 'Add OVNAvailabilityZone to improve UX\n\nCurrently to set az for ovn, user need to set\nOVNCMSOptions with value:\n""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",\nwhich is not very good ux.\nAdding new param OVNAvailabilityZone will improve ux\nand improve configuration redabilities\n\nCloses-Bug: #1923585\nChange-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2\n(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)\n'}]",0,814750,491105df1e91c101656480873e1e5ebfaf44ee02,11,4,2,11082,,,0,"Add OVNAvailabilityZone to improve UX

Currently to set az for ovn, user need to set
OVNCMSOptions with value:
""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",
which is not very good ux.
Adding new param OVNAvailabilityZone will improve ux
and improve configuration redabilities

Closes-Bug: #1923585
Change-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2
(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/50/814750/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml']",2,ac2021ca72e434d41c1c193ea619dd9a5a8202a7,change-801723-stable/ussuri,--- features: - | Added new heat role specific param OVNAvailabilityZone to set availability-zones for ovn. This param replace seting availability-zones throught OVNCMSOptions,,23,1
openstack%2Ftripleo-heat-templates~stable%2Fvictoria~I90932c2445eda2cd0d6e661b561ce86a87dcdec2,openstack/tripleo-heat-templates,stable/victoria,I90932c2445eda2cd0d6e661b561ce86a87dcdec2,Add OVNAvailabilityZone to improve UX,MERGED,2021-07-22 09:00:17.000000000,2021-10-29 22:07:11.000000000,2021-10-29 22:05:46.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-07-22 09:00:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/82772ab8961489e4c4adf01bf879aeb1bf0f00b3', 'message': 'Add OVNAvailabilityZone to improve UX\n\nCurrently to set az for ovn, user need to set\nOVNCMSOptions with value:\n""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",\nwhich is not very good ux.\nAdding new param OVNAvailabilityZone will improve ux\nand improve configuration redabilities\n\nCloses-Bug: #1923585\nChange-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2\n(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)\n'}, {'number': 2, 'created': '2021-10-20 12:13:24.000000000', 'files': ['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c8daec6976376694aaf04adac052e414ae76d043', 'message': 'Add OVNAvailabilityZone to improve UX\n\nCurrently to set az for ovn, user need to set\nOVNCMSOptions with value:\n""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",\nwhich is not very good ux.\nAdding new param OVNAvailabilityZone will improve ux\nand improve configuration redabilities\n\nCloses-Bug: #1923585\nChange-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2\n(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)\n'}]",3,801723,c8daec6976376694aaf04adac052e414ae76d043,15,3,2,11082,,,0,"Add OVNAvailabilityZone to improve UX

Currently to set az for ovn, user need to set
OVNCMSOptions with value:
""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",
which is not very good ux.
Adding new param OVNAvailabilityZone will improve ux
and improve configuration redabilities

Closes-Bug: #1923585
Change-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2
(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/23/801723/2 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml']",2,82772ab8961489e4c4adf01bf879aeb1bf0f00b3,change-801723,--- features: - | Added new heat role specific param OVNAvailabilityZone to set availability-zones for ovn. This param replace seting availability-zones throught OVNCMSOptions,,31,0
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I90932c2445eda2cd0d6e661b561ce86a87dcdec2,openstack/tripleo-heat-templates,stable/wallaby,I90932c2445eda2cd0d6e661b561ce86a87dcdec2,Add OVNAvailabilityZone to improve UX,MERGED,2021-10-28 07:59:08.000000000,2021-10-29 22:07:08.000000000,2021-10-29 22:05:43.000000000,"[{'_account_id': 6681}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-28 07:59:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/fddebc5c3278b57cda378c2aa43da2760fb51b4a', 'message': 'Add OVNAvailabilityZone to improve UX\n\nCurrently to set az for ovn, user need to set\nOVNCMSOptions with value:\n""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",\nwhich is not very good ux.\nAdding new param OVNAvailabilityZone will improve ux\nand improve configuration redabilities\n\nCloses-Bug: #1923585\nChange-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2\n(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)\n'}, {'number': 2, 'created': '2021-10-28 14:16:43.000000000', 'files': ['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/74c85e7662bab9f9177e36e29b31e7987bbdcbd7', 'message': 'Add OVNAvailabilityZone to improve UX\n\nCurrently to set az for ovn, user need to set\nOVNCMSOptions with value:\n""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",\nwhich is not very good ux.\nAdding new param OVNAvailabilityZone will improve ux\nand improve configuration redabilities\n\nCloses-Bug: #1923585\nChange-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2\n(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)\n'}]",0,815795,74c85e7662bab9f9177e36e29b31e7987bbdcbd7,12,4,2,11082,,,0,"Add OVNAvailabilityZone to improve UX

Currently to set az for ovn, user need to set
OVNCMSOptions with value:
""enable-chassis-as-gw,availability-zones=az-0:az-1:az-2"",
which is not very good ux.
Adding new param OVNAvailabilityZone will improve ux
and improve configuration redabilities

Closes-Bug: #1923585
Change-Id: I90932c2445eda2cd0d6e661b561ce86a87dcdec2
(cherry picked from commit 1ddef85c91b8fb981689c34177a67b6b9a42797b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/95/815795/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ovn/ovn-controller-container-puppet.yaml', 'releasenotes/notes/OVNAvailabilityZone-bc3d44a7e11d83e5.yaml']",2,fddebc5c3278b57cda378c2aa43da2760fb51b4a,change-815795,--- features: - | Added new heat role specific param OVNAvailabilityZone to set availability-zones for ovn. This param replace seting availability-zones throught OVNCMSOptions,,27,1
openstack%2Fopenstack-helm~master~Ia25ac1f85974fc8c8ac8cf3ffedff746a92f2cf5,openstack/openstack-helm,master,Ia25ac1f85974fc8c8ac8cf3ffedff746a92f2cf5,Make TLS job nonvoting,MERGED,2021-10-28 23:26:42.000000000,2021-10-29 21:05:56.000000000,2021-10-29 21:00:47.000000000,"[{'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 30449}]","[{'number': 1, 'created': '2021-10-28 23:26:42.000000000', 'files': ['zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/bdd1e7ebe91e139e724b3aa73f873de50097e349', 'message': 'Make TLS job nonvoting\n\nThe move to helm v3 breaks the rendering for the ca-issuer chart.\nWhile that gets fixed, we can temporary make the job non-voting\nin order to unblock the migration to helm v3.\n\nChange-Id: Ia25ac1f85974fc8c8ac8cf3ffedff746a92f2cf5\n'}]",1,815918,bdd1e7ebe91e139e724b3aa73f873de50097e349,14,4,1,21420,,,0,"Make TLS job nonvoting

The move to helm v3 breaks the rendering for the ca-issuer chart.
While that gets fixed, we can temporary make the job non-voting
in order to unblock the migration to helm v3.

Change-Id: Ia25ac1f85974fc8c8ac8cf3ffedff746a92f2cf5
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/18/815918/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,bdd1e7ebe91e139e724b3aa73f873de50097e349,tls-job, - openstack-helm-tls: voting: false, - openstack-helm-tls,2,1
openstack%2Frequirements~stable%2Fwallaby~Ic4675b4ec9cca91be3cee049f05626d7dc1b9563,openstack/requirements,stable/wallaby,Ic4675b4ec9cca91be3cee049f05626d7dc1b9563,update constraint for tripleo-common to new release 15.4.0,MERGED,2021-10-29 15:47:47.000000000,2021-10-29 19:34:39.000000000,2021-10-29 19:34:39.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-29 15:47:47.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/4403e220af56f9f46352aef6010541e943ad5750', 'message': 'update constraint for tripleo-common to new release 15.4.0\n\nmeta: version: 15.4.0\nmeta: diff-start: -\nmeta: series: wallaby\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: no\nmeta: release:Author: Steve Baker <sbaker@redhat.com>\nmeta: release:Commit: Steve Baker <sbaker@redhat.com>\nmeta: release:Change-Id: Idafac1bd6c2c5d5d5a16fea0adea818f94ff2f54\nmeta: release:Code-Review+1: chandan kumar <chkumar@redhat.com>\nmeta: release:Code-Review+1: Hervé Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+1: Ronelle Landy <rlandy@redhat.com>\nmeta: release:Code-Review+1: Marios Andreou <marios@redhat.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+1: James Slagle <jslagle@redhat.com>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: Ic4675b4ec9cca91be3cee049f05626d7dc1b9563\n'}]",0,815978,4403e220af56f9f46352aef6010541e943ad5750,8,3,1,11131,,,0,"update constraint for tripleo-common to new release 15.4.0

meta: version: 15.4.0
meta: diff-start: -
meta: series: wallaby
meta: release-type: release
meta: pypi: no
meta: first: no
meta: release:Author: Steve Baker <sbaker@redhat.com>
meta: release:Commit: Steve Baker <sbaker@redhat.com>
meta: release:Change-Id: Idafac1bd6c2c5d5d5a16fea0adea818f94ff2f54
meta: release:Code-Review+1: chandan kumar <chkumar@redhat.com>
meta: release:Code-Review+1: Hervé Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+1: Ronelle Landy <rlandy@redhat.com>
meta: release:Code-Review+1: Marios Andreou <marios@redhat.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+1: James Slagle <jslagle@redhat.com>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: Ic4675b4ec9cca91be3cee049f05626d7dc1b9563
",git fetch https://review.opendev.org/openstack/requirements refs/changes/78/815978/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,4403e220af56f9f46352aef6010541e943ad5750,new-release,tripleo-common===15.4.0,tripleo-common===15.3.0,1,1
openstack%2Frequirements~stable%2Fvictoria~I83e35561cbbda39187efdc0dc48b14bae1a83297,openstack/requirements,stable/victoria,I83e35561cbbda39187efdc0dc48b14bae1a83297,update constraint for oslo.context to new release 3.1.2,MERGED,2021-10-29 15:44:59.000000000,2021-10-29 19:34:37.000000000,2021-10-29 19:34:37.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-29 15:44:59.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/533601b020d5ef571d85f51af84362625c39a100', 'message': 'update constraint for oslo.context to new release 3.1.2\n\nmeta: version: 3.1.2\nmeta: diff-start: -\nmeta: series: victoria\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: Idd6f14e733aae3e2bf2efd61e274824110997217\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: I83e35561cbbda39187efdc0dc48b14bae1a83297\n'}]",0,815976,533601b020d5ef571d85f51af84362625c39a100,8,3,1,11131,,,0,"update constraint for oslo.context to new release 3.1.2

meta: version: 3.1.2
meta: diff-start: -
meta: series: victoria
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Hervé Beraud <hberaud@redhat.com>
meta: release:Commit: Hervé Beraud <hberaud@redhat.com>
meta: release:Change-Id: Idd6f14e733aae3e2bf2efd61e274824110997217
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: I83e35561cbbda39187efdc0dc48b14bae1a83297
",git fetch https://review.opendev.org/openstack/requirements refs/changes/76/815976/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,533601b020d5ef571d85f51af84362625c39a100,new-release,oslo.context===3.1.2,oslo.context===3.1.1,1,1
openstack%2Ftripleo-ansible~master~Ibdf87463d4a86dd225a1f1b89326407628facb65,openstack/tripleo-ansible,master,Ibdf87463d4a86dd225a1f1b89326407628facb65,Reload dbus config should work for both c8 and c9,MERGED,2021-10-29 09:37:53.000000000,2021-10-29 18:02:04.000000000,2021-10-29 18:02:04.000000000,"[{'_account_id': 6796}, {'_account_id': 6926}, {'_account_id': 9003}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}, {'_account_id': 30002}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-10-29 09:37:53.000000000', 'files': ['tripleo_ansible/roles/tripleo_cephadm/tasks/ganesha/start_nfs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/b151cd7b139768a17daa22cf48afdd5e9fbf8481', 'message': 'Reload dbus config should work for both c8 and c9\n\nc9 ship dbus-broker by default instead of dbus-daemon.\nThis means we should make sure the command is valid for\nboth the use cases.\n\nRelated-Bug: #1949033\nChange-Id: Ibdf87463d4a86dd225a1f1b89326407628facb65\n'}]",9,815948,b151cd7b139768a17daa22cf48afdd5e9fbf8481,20,11,1,25402,,,0,"Reload dbus config should work for both c8 and c9

c9 ship dbus-broker by default instead of dbus-daemon.
This means we should make sure the command is valid for
both the use cases.

Related-Bug: #1949033
Change-Id: Ibdf87463d4a86dd225a1f1b89326407628facb65
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/48/815948/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_cephadm/tasks/ganesha/start_nfs.yaml'],1,b151cd7b139768a17daa22cf48afdd5e9fbf8481,cs9," command: ""killall -r -SIGHUP dbus-*"""," command: ""killall -SIGHUP dbus-daemon""",1,1
openstack%2Ftripleo-ansible~master~If11f21c05a795108d76a3d210e2ebf11d7114c50,openstack/tripleo-ansible,master,If11f21c05a795108d76a3d210e2ebf11d7114c50,Make template ovn_chassis_mac_map backwards-compatible,MERGED,2021-10-13 10:15:35.000000000,2021-10-29 17:51:18.000000000,2021-10-29 17:51:18.000000000,"[{'_account_id': 6681}, {'_account_id': 6926}, {'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 24245}]","[{'number': 1, 'created': '2021-10-13 10:15:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/b2bdfea001153749a5c1b9b7a045be8de8334788', 'message': 'Make template ovn_chassis_mac_map backwards-compatible\n\nChange-Id: If11f21c05a795108d76a3d210e2ebf11d7114c50\n'}, {'number': 2, 'created': '2021-10-20 11:51:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/779a46ff90921506d4bbd91511a3545fc2e9fb54', 'message': 'Make template ovn_chassis_mac_map backwards-compatible\n\nChange-Id: If11f21c05a795108d76a3d210e2ebf11d7114c50\n'}, {'number': 3, 'created': '2021-10-20 13:40:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8c6004c31785f6fe1b9234e37d3af50ad2d6678a', 'message': 'Make template ovn_chassis_mac_map backwards-compatible\n\nChange-Id: If11f21c05a795108d76a3d210e2ebf11d7114c50\n'}, {'number': 4, 'created': '2021-10-27 13:55:52.000000000', 'files': ['tripleo_ansible/roles/tripleo_hieradata/templates/ovn_chassis_mac_map.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/528888a664d0792b182a890aee5ed9bce6871208', 'message': 'Make template ovn_chassis_mac_map backwards-compatible\n\nChange-Id: If11f21c05a795108d76a3d210e2ebf11d7114c50\n'}]",1,813793,528888a664d0792b182a890aee5ed9bce6871208,29,8,4,11082,,,0,"Make template ovn_chassis_mac_map backwards-compatible

Change-Id: If11f21c05a795108d76a3d210e2ebf11d7114c50
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/93/813793/4 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_hieradata/templates/ovn_chassis_mac_map.j2'],1,b2bdfea001153749a5c1b9b7a045be8de8334788,,"% set ovn_chassis_mac_map_data = {} %} {% set _ = ovn_chassis_mac_map_data.__setitem__('ovn_chassis_mac_map', hostvars[inventory_hostname].get('ovn_chassis_mac_map', {})) %} {{ ovn_chassis_mac_map_data | to_nice_json }} {% endif %}",{{ hostvars[inventory_hostname]['ovn_chassis_mac_map'] | default({}) | to_nice_json }} {% endif %} ,4,2
openstack%2Ftripleo-ci~master~I95d05548de0cc7e138ddfd3ae4472476c2607726,openstack/tripleo-ci,master,I95d05548de0cc7e138ddfd3ae4472476c2607726,Removing collectd from c9 exclude list,MERGED,2021-10-28 05:36:44.000000000,2021-10-29 17:51:15.000000000,2021-10-29 17:51:15.000000000,"[{'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}, {'_account_id': 32458}]","[{'number': 1, 'created': '2021-10-28 05:36:44.000000000', 'files': ['roles/build-containers/vars/main.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/311abada2a508b007a5297800f62e27237b37a40', 'message': 'Removing collectd from c9 exclude list\n\nRemoving collectd from c9 exclude list\nas it is required by ac001 job\n\nChange-Id: I95d05548de0cc7e138ddfd3ae4472476c2607726\n'}]",4,815773,311abada2a508b007a5297800f62e27237b37a40,11,6,1,32458,,,0,"Removing collectd from c9 exclude list

Removing collectd from c9 exclude list
as it is required by ac001 job

Change-Id: I95d05548de0cc7e138ddfd3ae4472476c2607726
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/73/815773/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/build-containers/vars/main.yaml'],1,311abada2a508b007a5297800f62e27237b37a40,,, - collectd,0,1
openstack%2Fkolla~master~I2bb89a30a88c8b889c5af2fc609e236ed966f7ba,openstack/kolla,master,I2bb89a30a88c8b889c5af2fc609e236ed966f7ba,base: drop commented repositories,MERGED,2021-10-28 10:58:07.000000000,2021-10-29 17:30:01.000000000,2021-10-29 17:27:49.000000000,"[{'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-28 10:58:07.000000000', 'files': ['docker/base/sources.list.ubuntu.aarch64', 'docker/base/sources.list.ubuntu'], 'web_link': 'https://opendev.org/openstack/kolla/commit/6738372ae6594884ced9123529e596263d25677a', 'message': 'base: drop commented repositories\n\nWe moved additional Debian/Ubuntu repositories into\nkolla/template/repos.yaml quite a while ago. It is time to\ndrop commented out copies from APT sources.list file as no one keeps\nthem in sync.\n\nChange-Id: I2bb89a30a88c8b889c5af2fc609e236ed966f7ba\n'}]",1,815824,6738372ae6594884ced9123529e596263d25677a,11,2,1,24072,,,0,"base: drop commented repositories

We moved additional Debian/Ubuntu repositories into
kolla/template/repos.yaml quite a while ago. It is time to
drop commented out copies from APT sources.list file as no one keeps
them in sync.

Change-Id: I2bb89a30a88c8b889c5af2fc609e236ed966f7ba
",git fetch https://review.opendev.org/openstack/kolla refs/changes/24/815824/1 && git format-patch -1 --stdout FETCH_HEAD,"['docker/base/sources.list.ubuntu.aarch64', 'docker/base/sources.list.ubuntu']",2,6738372ae6594884ced9123529e596263d25677a,,# NOTE(hrw): extra repositories are added into image when they are needed as# are defined in kolla/template/repos.yaml file.,"# NOTE(hrw): repositories below are added into image when they are needed as# are defined in kolla/repos.yaml file. # # Here they stay in case someone needs them. # Elasticsearch, Logstash & Kibana repo #deb https://artifacts.elastic.co/packages/5.x/apt stable main # InfluxDB repo #deb https://repos.influxdata.com/ubuntu focal stable # Grafana repo #deb https://packages.grafana.com/oss/deb stable main # Fluentd repo #deb http://packages.treasuredata.com/4/ubuntu/focal/ focal contrib # Qdrouterd repo #deb http://ppa.launchpad.net/qpid/released/ubuntu/ focal main # rabbitmq repo #deb https://packagecloud.io/rabbitmq/rabbitmq-server/ubuntu/ focal main # erlang repo #deb http://ppa.launchpad.net/rabbitmq/rabbitmq-erlang/ubuntu focal main # MariaDB repo #deb http://downloads.mariadb.com/MariaDB/mariadb-10.3/repo/ubuntu focal main",4,44
openstack%2Ftripleo-docs~master~I78920c1eecf4d2dd9d48d6b6f1d8c54339ba0ffb,openstack/tripleo-docs,master,I78920c1eecf4d2dd9d48d6b6f1d8c54339ba0ffb,Update DCN docs for export data with ephemeral heat,MERGED,2021-07-06 17:48:34.000000000,2021-10-29 16:52:12.000000000,2021-10-29 16:48:47.000000000,"[{'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 15993}, {'_account_id': 18002}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-06 17:48:34.000000000', 'files': ['deploy-guide/source/features/distributed_compute_node.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/d57906301373721a089174a95918ca1ed0f71e49', 'message': 'Update DCN docs for export data with ephemeral heat\n\nChange-Id: I78920c1eecf4d2dd9d48d6b6f1d8c54339ba0ffb\nSigned-off-by: James Slagle <jslagle@redhat.com>\n'}]",1,799697,d57906301373721a089174a95918ca1ed0f71e49,14,5,1,7144,,,0,"Update DCN docs for export data with ephemeral heat

Change-Id: I78920c1eecf4d2dd9d48d6b6f1d8c54339ba0ffb
Signed-off-by: James Slagle <jslagle@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-docs refs/changes/97/799697/1 && git format-patch -1 --stdout FETCH_HEAD,['deploy-guide/source/features/distributed_compute_node.rst'],1,d57906301373721a089174a95918ca1ed0f71e49,,"Beginning in Wallaby with :ref:`ephemeral_heat`, the export file is created automatically under the default working directory which defaults to ``$HOME/overcloud-deploy/<stack>``. The working directory can also be set with the ``--working-dir`` cli argument to the ``openstack overcloud deploy`` command. The export file will be automatically created as ``$HOME/overcloud-deploy/<stack>/<stack>-export.yaml``. .. admonition:: Victoria and prior releases In Victoria and prior releases, the export file must be created by running the export command. Extract the needed data from the control plane stack: .. code-block:: bash # Pass --help to see a full list of options openstack overcloud export \ --stack control-plane \ --output-file control-plane-export.yaml The generated ``control-plane-export.yaml`` contains sensitive security data such as passwords and TLS certificates that are used in the overcloud deployment. Some passwords in the file may be removed if they are not needed by DCN. For example, the passwords for RabbitMQ, MySQL, Keystone, Nova and Neutron should be sufficient to launch an instance. When the export common is run, the Ceph passwords are excluded so that DCN deployments which include Ceph do not reuse the same Ceph password and instead new ones are generated per DCN deployment.Exported configuration from the ``control-plane`` stack _______________________________________________________ As documented in export_dcn_, the export file is created automatically by the ``openstack overcloud deploy`` command. .. admonition:: Victoria and prior releases For Victoria and prior releases, the following command must be run to export the configuration data from the ``control-plane`` stack:: openstack overcloud export \ --stack control-plane \ --output-file control-plane-export.yaml -e /home/centos/overcloud-deploy/control-plane/control-plane-export.yamlThe ``control-plane-export.yaml`` file was generated by the ``openstack overcloud deploy`` command when deploying the ``control-plane`` stack or from the command from example_export_dcn_ (Victoria or prior releases). -e /home/centos/overcloud-deploy/control-plane/control-plane-export.yamlThe ``control-plane-export.yaml`` file was generated by the ``openstack overcloud deploy`` command when deploying the ``control-plane`` stack or from the command from example_export_dcn_ (Victoria or prior releases)... admonition:: Victoria and prior releases Once the central stack is updated, re-run the export command from :ref:`export_dcn` to recreate the required input file for each separate DCN stack. .. note:: When re-running the export command, save the generated file in a new directory so that the previous version is not overwritten. In the event that a separate DCN stack needs a stack update operation performed prior to the minor update procedure, the previous version of the exported file should be used.","Extract the needed data from the control plane stack: .. code-block:: bash # Pass --help to see a full list of options openstack overcloud export \ --stack control-plane \ --output-file control-plane-export.yaml The ``control-plane-export.yaml`` generated in the previous command contains sensitive security data such as passwords and TLS certificates that are used in the overcloud deployment. Some passwords in the file may be removed if they are not needed by DCN. For example, the passwords for RabbitMQ, MySQL, Keystone, Nova and Neutron should be sufficient to launch an instance. When the export common is run, the Ceph passwords are excluded so that DCN deployments which include Ceph do not reuse the same Ceph password and instead new ones are generated per DCN deployment.Export configuration from the ``control-plane`` stack _____________________________________________________ As documented in export_dcn_, the following command is run to save needed configuration data from the ``control-plane`` stack:: openstack overcloud export \ --stack control-plane \ --output-file control-plane-export.yaml -e /home/centos/control-plane-export.yamlThe ``control-plane-export.yaml`` file was generated from the command from example_export_dcn_. -e /home/centos/control-plane-export.yamlThe ``control-plane-export.yaml`` file was generated from the command from example_export_dcn_, and is the same file that was used with the ``central`` stack.Once the central stack is updated, re-run the export command from :ref:`export_dcn` to recreate the required input file for each separate DCN stack. .. note:: When re-running the export command, save the generated file in a new directory so that the previous version is not overwritten. In the event that a separate DCN stack needs a stack update operation performed prior to the minor update procedure, the previous version of the exported file should be used.",59,37
openstack%2Ftripleo-docs~master~Ic9c464a88e725ff8bd24dce9f830733948f8cedd,openstack/tripleo-docs,master,Ic9c464a88e725ff8bd24dce9f830733948f8cedd,Update DCN docs for networkv2,MERGED,2021-07-06 15:22:01.000000000,2021-10-29 16:50:45.000000000,2021-10-29 16:48:45.000000000,"[{'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 18002}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-06 15:22:01.000000000', 'files': ['deploy-guide/source/features/distributed_compute_node.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/f947945709bb55a58579e397585d68a3fc1d309d', 'message': 'Update DCN docs for networkv2\n\nChange-Id: Ic9c464a88e725ff8bd24dce9f830733948f8cedd\n'}]",0,799681,f947945709bb55a58579e397585d68a3fc1d309d,8,4,1,7144,,,0,"Update DCN docs for networkv2

Change-Id: Ic9c464a88e725ff8bd24dce9f830733948f8cedd
",git fetch https://review.opendev.org/openstack/tripleo-docs refs/changes/81/799681/1 && git format-patch -1 --stdout FETCH_HEAD,['deploy-guide/source/features/distributed_compute_node.rst'],1,f947945709bb55a58579e397585d68a3fc1d309d,,"Network resource configuration ______________________________ Beginning in Wallaby, the Network V2 model is used to provision and manage the network related resources (networks, subnets, and ports). Specifying a parameter value for ``ManageNetworks`` or using the external resource UUID's is deprecated in Wallaby. The network resources can either be provisioned and managed with the separate ``openstack overcloud network`` command or as part of the ``openstack overcloud deploy`` command using the cli args (``--networks-file``, ``--vip-file``, ``--baremetal-deployment``). See :ref:`network_v2` for the full details on managing the network resources. With Network v2, the Heat stack no longer manages any of the network resources. As such with using DCN with multi-stack, it is no longer necessary to first update the central stack to provision new network resources when deploying a new site. Instead, it is all handled as part of the network provisioning commands or the overcloud deploy command. The same files used with the cli args (``--networks-file``, ``--vip-file``, ``--baremetal-deployment``), should be the same files used across all stacks in a DCN deployment. .. admonition:: Victoria and prior releases When deploying separate stacks it may be necessary to reuse networks, subnets, and VIP resources between stacks if desired. Only a single Heat stack can own a resource and be responsible for its creation and deletion, however the resources can be reused in other stacks. **ManageNetworks** The ``ManageNetworks`` parameter can be set to ``false`` so that the same ``network_data.yaml`` file can be used across all the stacks. When ``ManageNetworks`` is set to false, ports will be created for the nodes in the separate stacks on the existing networks that were already created in the ``control-plane`` stack. When ``ManageNetworks`` is used, it's a global option for the whole stack and applies to all of the network, subnet, and segment resources. To use ``ManageNetworks``, create an environment file which sets the parameter value to ``false``:: parameter_defaults: ManageNetworks: false When using ``ManageNetworks``, all network resources (except for ports) are managed in the central stack. When the central stack is deployed, ``ManageNetworks`` should be left unset (or set to True). When a child stack is deployed, it is then set to false so that the child stack does not attempt to manage the already existing network resources. Additionally, when adding new network resources, such as entire new leaves when deploying spine/leaf, the central stack must first be updated with the new ``network_data.yaml`` that contains the new leaf definitions. Even though the central stack is not directly using the new network resources, it still is responsible for creating and managing them. Once the new network resources are made available in the central stack, a child stack (such as a new edge site) could be deployed using the new networks. **External UUID's** If more fine grained control over which networks should be reused from the ``control-plane`` stack is needed, then various ``external_resource_*`` fields can be added to ``network_data.yaml``. When these fields are present on network, subnet, segment, or vip resources, Heat will mark the resources in the separate stack as being externally managed, and it won't try to any create, update, or delete operations on those resources. ``ManageNetworks`` should not be set when when the ``external_resource_*`` fields are used. The external resource fields that can be used in ``network_data.yaml`` are as follows:: external_resource_network_id: Existing Network UUID external_resource_subnet_id: Existing Subnet UUID external_resource_segment_id: Existing Segment UUID external_resource_vip_id: Existing VIP UUID These fields can be set on each network definition in the `network_data.yaml`` file used for the deployment of the separate stack. Not all networks need to be reused or shared across stacks. The `external_resource_*` fields can be set for only the networks that are meant to be shared, while the other networks can be newly created and managed. For example, to reuse the ``internal_api`` network from the control plane stack in a separate stack, run the following commands to show the UUIDs for the related network resources: .. code-block:: bash openstack network show internal_api -c id -f value openstack subnet show internal_api_subnet -c id -f value openstack port show internal_api_virtual_ip -c id -f value Save the values shown in the output of the above commands and add them to the network definition for the ``internal_api`` network in the ``network_data.yaml`` file for the separate stack. An example network definition would look like: .. code-block:: bash - name: InternalApi external_resource_network_id: 93861871-7814-4dbc-9e6c-7f51496b43af external_resource_subnet_id: c85c8670-51c1-4b17-a580-1cfb4344de27 external_resource_vip_id: 8bb9d96f-72bf-4964-a05c-5d3fed203eb7 name_lower: internal_api vip: true ip_subnet: '172.16.2.0/24' allocation_pools: [{'start': '172.16.2.4', 'end': '172.16.2.250'}] ipv6_subnet: 'fd00:fd00:fd00:2000::/64' ipv6_allocation_pools: [{'start': 'fd00:fd00:fd00:2000::10', 'end': 'fd00:fd00:fd00:2000:ffff:ffff:ffff:fffe'}] mtu: 1400 .. note:: When *not* sharing networks between stacks, each network defined in ``network_data.yaml`` must have a unique name across all deployed stacks. This requirement is necessary since regardless of the stack, all networks are created in the same tenant in Neutron on the undercloud. For example, the network name ``internal_api`` can't be reused between stacks, unless the intent is to share the network between the stacks. The network would need to be given a different ``name`` and ``name_lower`` property such as ``InternalApiCompute0`` and ``internal_api_compute_0``. If separate storage and storage management networks are used with multiple Ceph clusters and Glance servers per site, then a routed storage network should be shared between sites for image transfer. The storage management network, which Ceph uses to keep OSDs balanced, does not need to be shared between sites. --networks-file network_data_v2.yaml \ --vip-file vip_data.yaml \ --baremetal-deployment baremetal_deployment.yaml \``network_data_v2.yaml``, ``vip_data.yaml``, and ``baremetal_deployment.yaml`` contain the definitions to manage the network resources. See :ref:`network_v2` for creating these files.The ``central`` stack is deployed with the following command:: --networks-file network_data_v2.yaml \ --vip-file vip_data.yaml \ --baremetal-deployment baremetal_deployment.yaml \``network_data_v2.yaml``, ``vip_data.yaml``, and ``baremetal_deployment.yaml`` are the same files used with the ``control-plane`` stack. --networks-file network_data_v2.yaml \ --vip-file vip_data.yaml \ --baremetal-deployment baremetal_deployment.yaml \``network_data_v2.yaml``, ``vip_data.yaml``, and ``baremetal_deployment.yaml`` are the same files used with the ``control-plane`` stack. However, the files will need to be modified if the ``edge-0`` or ``edge-1`` stacks require addditional provisioning of network resources for new subnets. Update the files as needed and continue to use the same files for all ``overcloud deploy`` commands across all stacks. ","Reusing networks from the overcloud ___________________________________ When deploying separate stacks it may be necessary to reuse networks, subnets, and VIP resources between stacks if desired. Only a single Heat stack can own a resource and be responsible for its creation and deletion, however the resources can be reused in other stacks. ManageNetworks ############## The ``ManageNetworks`` parameter can be set to ``false`` so that the same ``network_data.yaml`` file can be used across all the stacks. When ``ManageNetworks`` is set to false, ports will be created for the nodes in the separate stacks on the existing networks that were already created in the ``control-plane`` stack. When ``ManageNetworks`` is used, it's a global option for the whole stack and applies to all of the network, subnet, and segment resources. To use ``ManageNetworks``, create an environment file which sets the parameter value to ``false``:: parameter_defaults: ManageNetworks: false When using ``ManageNetworks``, all network resources (except for ports) are managed in the central stack. When the central stack is deployed, ``ManageNetworks`` should be left unset (or set to True). When a child stack is deployed, it is then set to false so that the child stack does not attempt to manage the already existing network resources. Additionally, when adding new network resources, such as entire new leaves when deploying spine/leaf, the central stack must first be updated with the new ``network_data.yaml`` that contains the new leaf definitions. Even though the central stack is not directly using the new network resources, it still is responsible for creating and managing them. Once the new network resources are made available in the central stack, a child stack (such as a new edge site) could be deployed using the new networks. External UUID's ############### If more fine grained control over which networks should be reused from the ``control-plane`` stack is needed, then various ``external_resource_*`` fields can be added to ``network_data.yaml``. When these fields are present on network, subnet, segment, or vip resources, Heat will mark the resources in the separate stack as being externally managed, and it won't try to any create, update, or delete operations on those resources. ``ManageNetworks`` should not be set when when the ``external_resource_*`` fields are used. The external resource fields that can be used in ``network_data.yaml`` are as follows:: external_resource_network_id: Existing Network UUID external_resource_subnet_id: Existing Subnet UUID external_resource_segment_id: Existing Segment UUID external_resource_vip_id: Existing VIP UUID These fields can be set on each network definition in the `network_data.yaml`` file used for the deployment of the separate stack. Not all networks need to be reused or shared across stacks. The `external_resource_*` fields can be set for only the networks that are meant to be shared, while the other networks can be newly created and managed. For example, to reuse the ``internal_api`` network from the control plane stack in a separate stack, run the following commands to show the UUIDs for the related network resources: .. code-block:: bash openstack network show internal_api -c id -f value openstack subnet show internal_api_subnet -c id -f value openstack port show internal_api_virtual_ip -c id -f value Save the values shown in the output of the above commands and add them to the network definition for the ``internal_api`` network in the ``network_data.yaml`` file for the separate stack. An example network definition would look like: .. code-block:: bash - name: InternalApi external_resource_network_id: 93861871-7814-4dbc-9e6c-7f51496b43af external_resource_subnet_id: c85c8670-51c1-4b17-a580-1cfb4344de27 external_resource_vip_id: 8bb9d96f-72bf-4964-a05c-5d3fed203eb7 name_lower: internal_api vip: true ip_subnet: '172.16.2.0/24' allocation_pools: [{'start': '172.16.2.4', 'end': '172.16.2.250'}] ipv6_subnet: 'fd00:fd00:fd00:2000::/64' ipv6_allocation_pools: [{'start': 'fd00:fd00:fd00:2000::10', 'end': 'fd00:fd00:fd00:2000:ffff:ffff:ffff:fffe'}] mtu: 1400 .. note:: When *not* sharing networks between stacks, each network defined in ``network_data.yaml`` must have a unique name across all deployed stacks. This requirement is necessary since regardless of the stack, all networks are created in the same tenant in Neutron on the undercloud. For example, the network name ``internal_api`` can't be reused between stacks, unless the intent is to share the network between the stacks. The network would need to be given a different ``name`` and ``name_lower`` property such as ``InternalApiCompute0`` and ``internal_api_compute_0``. If separate storage and storage management networks are used with multiple Ceph clusters and Glance servers per site, then a routed storage network should be shared between sites for image transfer. The storage management network, which Ceph uses to keep OSDs balanced, does not need to be shared between sites. -n network_data.yaml \``network_data.yaml`` contains the default contents from the templates directory.Before the deployment command is run, a new ``networks_data.yaml`` file needs to be created and updated with the UUIDs of the existing network resources that are reused from the ``control-plane`` stack in the ``central`` stack as documented in reuse_networks_dcn_. The following commands are used to show the UUIDs:: (undercloud) [centos@scale ~]$ openstack network list +--------------------------------------+--------------+--------------------------------------+ | ID | Name | Subnets | +--------------------------------------+--------------+--------------------------------------+ | 0fcb505b-81c8-483e-93f6-0da574e4acd5 | tenant | e6544a7f-ec00-4b33-b7b0-a02e1c0f503a | | 40ed54c0-1c85-4bcb-b244-0764f83d2ca8 | management | 9ca595f9-aa92-415a-9e13-0ed8b9f78e68 | | 447fd403-e977-436d-ba21-7d1ac258dd81 | internal_api | 3449c5f3-ebb0-4e77-b671-eb6ea209a10e | | 47a73786-4066-49ac-9e6a-49fb5d1f964a | storage_mgmt | eb78ae43-c575-4fdd-8c3f-405f4bdd0ca5 | | bf1fbe99-08f9-4f12-9af5-57a4f396b894 | ctlplane | 5d366b80-a360-4b3d-be5f-c5dbd13fd7eb | | cf19bf6e-1ed5-428b-9aab-727d43e88f3a | external | 6fc8578c-8028-450a-b83e-bf92cfda61bc | | ef89c994-5b8d-4a5d-aa53-ef02452665d0 | storage | d6c975db-8943-4261-abf1-f7d2b482d88c | +--------------------------------------+--------------+--------------------------------------+ (undercloud) [centos@scale ~]$ openstack subnet list +--------------------------------------+---------------------+--------------------------------------+----------------+ | ID | Name | Network | Subnet | +--------------------------------------+---------------------+--------------------------------------+----------------+ | 3449c5f3-ebb0-4e77-b671-eb6ea209a10e | internal_api_subnet | 447fd403-e977-436d-ba21-7d1ac258dd81 | 172.16.2.0/24 | | 5d366b80-a360-4b3d-be5f-c5dbd13fd7eb | ctlplane-subnet | bf1fbe99-08f9-4f12-9af5-57a4f396b894 | 192.168.0.0/24 | | 6fc8578c-8028-450a-b83e-bf92cfda61bc | external_subnet | cf19bf6e-1ed5-428b-9aab-727d43e88f3a | 10.0.0.0/24 | | 9ca595f9-aa92-415a-9e13-0ed8b9f78e68 | management_subnet | 40ed54c0-1c85-4bcb-b244-0764f83d2ca8 | 10.0.1.0/24 | | d6c975db-8943-4261-abf1-f7d2b482d88c | storage_subnet | ef89c994-5b8d-4a5d-aa53-ef02452665d0 | 172.16.1.0/24 | | e6544a7f-ec00-4b33-b7b0-a02e1c0f503a | tenant_subnet | 0fcb505b-81c8-483e-93f6-0da574e4acd5 | 172.16.0.0/24 | | eb78ae43-c575-4fdd-8c3f-405f4bdd0ca5 | storage_mgmt_subnet | 47a73786-4066-49ac-9e6a-49fb5d1f964a | 172.16.3.0/24 | +--------------------------------------+---------------------+--------------------------------------+----------------+ (undercloud) [centos@scale ~]$ openstack port list +--------------------------------------+-------------------------+-------------------+-----------------------------------------------------------------------------+--------+ | ID | Name | MAC Address | Fixed IP Addresses | Status | +--------------------------------------+-------------------------+-------------------+-----------------------------------------------------------------------------+--------+ | 06603164-6fc0-4ca9-b480-5b73736dec01 | openstack-0_Storage | fa:16:3e:8c:5e:8a | ip_address='172.16.1.200', subnet_id='d6c975db-8943-4261-abf1-f7d2b482d88c' | DOWN | | 3b2244e4-0bf2-4675-a88f-3c149a5ab634 | openstack-0_External | fa:16:3e:67:49:95 | ip_address='10.0.0.137', subnet_id='6fc8578c-8028-450a-b83e-bf92cfda61bc' | DOWN | | 7ed9ac55-fec0-4320-9ba6-d95bb5207680 | openstack-0_InternalApi | fa:16:3e:df:46:7e | ip_address='172.16.2.36', subnet_id='3449c5f3-ebb0-4e77-b671-eb6ea209a10e' | DOWN | | 824081da-9205-4ed9-9a94-047dccceb8ff | storage_mgmt_virtual_ip | fa:16:3e:f9:ff:5a | ip_address='172.16.3.222', subnet_id='eb78ae43-c575-4fdd-8c3f-405f4bdd0ca5' | DOWN | | 894b834f-b911-42eb-a4b8-08e3b0084825 | public_virtual_ip | fa:16:3e:d9:d2:f6 | ip_address='10.0.0.136', subnet_id='6fc8578c-8028-450a-b83e-bf92cfda61bc' | DOWN | | 9daa4ac1-c7f0-4e25-a6d1-1f00e2f0ee72 | openstack-0_Tenant | fa:16:3e:eb:b4:f7 | ip_address='172.16.0.107', subnet_id='e6544a7f-ec00-4b33-b7b0-a02e1c0f503a' | DOWN | | b140c67e-3755-4068-9c61-0349cee5695a | openstack-0_StorageMgmt | fa:16:3e:bc:9e:d7 | ip_address='172.16.3.49', subnet_id='eb78ae43-c575-4fdd-8c3f-405f4bdd0ca5' | DOWN | | b9299348-d761-410a-b81d-4d78b2d985a9 | internal_api_virtual_ip | fa:16:3e:9f:fb:fa | ip_address='172.16.2.244', subnet_id='3449c5f3-ebb0-4e77-b671-eb6ea209a10e' | DOWN | | cdf8edac-55b0-4321-98fd-0201ec554c33 | storage_virtual_ip | fa:16:3e:35:a6:55 | ip_address='172.16.1.147', subnet_id='d6c975db-8943-4261-abf1-f7d2b482d88c' | DOWN | | d2d6a257-b43d-4a1c-ab13-cd91aa05d6fe | | fa:16:3e:a3:a5:b1 | ip_address='192.168.0.5', subnet_id='5d366b80-a360-4b3d-be5f-c5dbd13fd7eb' | ACTIVE | +--------------------------------------+-------------------------+-------------------+-----------------------------------------------------------------------------+--------+ A copy of the default ``networks_data.yaml`` file is created:: cp /home/centos/tripleo-heat-templates/networks_data.yaml site_networks_data.yaml ``site_networks_data.yaml`` is updated the external resource ids for each network resource are added. For example, the ``InternalApi`` network definition looks like:: - name: InternalApi external_resource_id: 447fd403-e977-436d-ba21-7d1ac258dd81 external_resource_subnet_id: 3449c5f3-ebb0-4e77-b671-eb6ea209a10e external_resource_vip_id: b9299348-d761-410a-b81d-4d78b2d985a9 name_lower: internal_api vip: true ip_subnet: '172.16.2.0/24' allocation_pools: [{'start': '172.16.2.4', 'end': '172.16.2.250'}] ipv6_subnet: 'fd00:fd00:fd00:2000::/64' ipv6_allocation_pools: [{'start': 'fd00:fd00:fd00:2000::10', 'end': 'fd00:fd00:fd00:2000:ffff:ffff:ffff:fffe'}] mtu: 1400 The ``central`` stack is then deployed with the following command::",137,161
openstack%2Fkuryr-kubernetes~master~I1fee7c06e3ad521866fe102c8fc85412ab61c75a,openstack/kuryr-kubernetes,master,I1fee7c06e3ad521866fe102c8fc85412ab61c75a,DNM: Use OVN from packages,ABANDONED,2021-10-14 19:26:50.000000000,2021-10-29 16:08:01.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-14 19:26:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/ab410dd9ee399f5582f58461247dadca2b279355', 'message': 'DNM: Use OVN from packages\n\nChange-Id: I1fee7c06e3ad521866fe102c8fc85412ab61c75a\n'}, {'number': 2, 'created': '2021-10-29 11:55:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/8044c02de071fd53c974c8d70e0a330ed30dfd5b', 'message': 'DNM: Use OVN from packages\n\nChange-Id: I1fee7c06e3ad521866fe102c8fc85412ab61c75a\n'}, {'number': 3, 'created': '2021-10-29 11:57:02.000000000', 'files': ['.zuul.d/base.yaml', '.zuul.d/k8s-np-e2e.yaml', '.zuul.d/tempest-multinode-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/c408bba685eca71649af9e9ded29df3a8da76179', 'message': 'DNM: Use OVN from packages\n\nChange-Id: I1fee7c06e3ad521866fe102c8fc85412ab61c75a\n'}]",1,814054,c408bba685eca71649af9e9ded29df3a8da76179,7,1,3,27032,,,0,"DNM: Use OVN from packages

Change-Id: I1fee7c06e3ad521866fe102c8fc85412ab61c75a
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/54/814054/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.d/base.yaml', '.zuul.d/k8s-np-e2e.yaml', '.zuul.d/tempest-multinode-jobs.yaml']",3,ab410dd9ee399f5582f58461247dadca2b279355,use-ovn-from-package,, OVN_BRANCH: v20.06.2 OVN_BUILD_FROM_SOURCE: true,0,6
openstack%2Fopenstack-helm-infra~master~I3a8f1878df4af5da52d3b88ca35ba0b97deb4c35,openstack/openstack-helm-infra,master,I3a8f1878df4af5da52d3b88ca35ba0b97deb4c35,"[ceph-client] Fix ceph.conf update job labels, rendering",MERGED,2021-10-29 02:45:08.000000000,2021-10-29 16:02:22.000000000,2021-10-29 16:00:34.000000000,"[{'_account_id': 18250}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 24780}, {'_account_id': 28275}, {'_account_id': 28372}]","[{'number': 1, 'created': '2021-10-29 02:45:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9441c73242f02285af6f06855e62b3b74e3e7980', 'message': '[ceph-client] Fix ceph.conf update job labels, rendering\n\nThis change fixes two issues with the recently introduced [0] job that\nupdates ""ceph.conf"" inside ceph-client-etc configmap with a discovered\nmon_host value:\n\n1. adds missing metadata.labels to the job\n\n2. allows the job to be disabled\n   (fixes rendering when manifests.job_ns_client_ceph_config = false)\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: I3a8f1878df4af5da52d3b88ca35ba0b97deb4c35\n'}, {'number': 2, 'created': '2021-10-29 02:48:29.000000000', 'files': ['ceph-client/Chart.yaml', 'releasenotes/notes/ceph-client.yaml', 'ceph-client/templates/job-ns-client-ceph-config.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1ccc3eb0db01a75cb3a90eaf84ff0d37d1ebbe29', 'message': '[ceph-client] Fix ceph.conf update job labels, rendering\n\nThis change fixes two issues with the recently introduced [0] job that\nupdates ""ceph.conf"" inside ceph-client-etc configmap with a discovered\nmon_host value:\n\n1. adds missing metadata.labels to the job\n\n2. allows the job to be disabled\n   (fixes rendering when manifests.job_ns_client_ceph_config = false)\n\n0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159\n\nChange-Id: I3a8f1878df4af5da52d3b88ca35ba0b97deb4c35\n'}]",2,815929,1ccc3eb0db01a75cb3a90eaf84ff0d37d1ebbe29,11,7,2,28719,,,0,"[ceph-client] Fix ceph.conf update job labels, rendering

This change fixes two issues with the recently introduced [0] job that
updates ""ceph.conf"" inside ceph-client-etc configmap with a discovered
mon_host value:

1. adds missing metadata.labels to the job

2. allows the job to be disabled
   (fixes rendering when manifests.job_ns_client_ceph_config = false)

0: https://review.opendev.org/c/openstack/openstack-helm-infra/+/812159

Change-Id: I3a8f1878df4af5da52d3b88ca35ba0b97deb4c35
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/29/815929/2 && git format-patch -1 --stdout FETCH_HEAD,"['ceph-client/Chart.yaml', 'releasenotes/notes/ceph-client.yaml', 'ceph-client/templates/job-ns-client-ceph-config.yaml']",3,9441c73242f02285af6f06855e62b3b74e3e7980,,,---...,2,3
openstack%2Fnova~stable%2Fxena~Icb7e3379248fe00f9a94f9860181b5de44902379,openstack/nova,stable/xena,Icb7e3379248fe00f9a94f9860181b5de44902379,Reproduce bug 1944759,MERGED,2021-09-24 13:50:56.000000000,2021-10-29 16:02:17.000000000,2021-10-29 16:00:16.000000000,"[{'_account_id': 7166}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-24 13:50:56.000000000', 'files': ['nova/tests/functional/libvirt/test_numa_servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e6c6880465824f1e327a54143f32bb5a5816ff6c', 'message': 'Reproduce bug 1944759\n\nAdd functional tests to reproduce the race between resize_instance()\nand update_available_resources().\n\nRelated-Bug: #1944759\n\nChange-Id: Icb7e3379248fe00f9a94f9860181b5de44902379\n(cherry picked from commit 3e4e4489b7a6e9cdefcc6ff02ed99a0a70420fca)\n'}]",1,810910,e6c6880465824f1e327a54143f32bb5a5816ff6c,9,3,1,9708,,,0,"Reproduce bug 1944759

Add functional tests to reproduce the race between resize_instance()
and update_available_resources().

Related-Bug: #1944759

Change-Id: Icb7e3379248fe00f9a94f9860181b5de44902379
(cherry picked from commit 3e4e4489b7a6e9cdefcc6ff02ed99a0a70420fca)
",git fetch https://review.opendev.org/openstack/nova refs/changes/10/810910/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/libvirt/test_numa_servers.py'],1,e6c6880465824f1e327a54143f32bb5a5816ff6c,bug/1944759," def _assert_pinned_cpus(self, hostname, expected_number_of_pinned): numa_topology = objects.NUMATopology.obj_from_db_obj( objects.ComputeNode.get_by_nodename( self.ctxt, hostname, ).numa_topology, ) self.assertEqual( expected_number_of_pinned, len(numa_topology.cells[0].pinned_cpus)) def _create_server_and_resize_bug_1944759(self): self.flags( cpu_dedicated_set='0-3', cpu_shared_set='4-7', group='compute') self.flags(vcpu_pin_set=None) # start services self.start_compute(hostname='test_compute0') self.start_compute(hostname='test_compute1') flavor_a_id = self._create_flavor( vcpu=2, extra_spec={'hw:cpu_policy': 'dedicated'}) server = self._create_server(flavor_id=flavor_a_id) src_host = server['OS-EXT-SRV-ATTR:host'] self._assert_pinned_cpus(src_host, 2) # we don't really care what the new flavor is, so long as the old # flavor is using pinning. We use a similar flavor for simplicity. flavor_b_id = self._create_flavor( vcpu=2, extra_spec={'hw:cpu_policy': 'dedicated'}) orig_rpc_finish_resize = nova.compute.rpcapi.ComputeAPI.finish_resize # Simulate that the finish_resize call overlaps with an # update_available_resource periodic job def inject_periodic_to_finish_resize(*args, **kwargs): self._run_periodics() return orig_rpc_finish_resize(*args, **kwargs) self.stub_out( 'nova.compute.rpcapi.ComputeAPI.finish_resize', inject_periodic_to_finish_resize, ) # TODO(stephenfin): The mock of 'migrate_disk_and_power_off' should # probably be less...dumb with mock.patch( 'nova.virt.libvirt.driver.LibvirtDriver' '.migrate_disk_and_power_off', return_value='{}', ): post = {'resize': {'flavorRef': flavor_b_id}} self.api.post_server_action(server['id'], post) server = self._wait_for_state_change(server, 'VERIFY_RESIZE') dst_host = server['OS-EXT-SRV-ATTR:host'] # This is a resource accounting bug, we should have 2 cpus pinned on # both computes. The source should have it due to the outbound # migration and the destination due to the instance running there self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 2) return server, src_host, dst_host def test_resize_confirm_bug_1944759(self): server, src_host, dst_host = ( self._create_server_and_resize_bug_1944759()) # Now confirm the resize post = {'confirmResize': None} # FIXME(gibi): This is bug 1944759 where during resize, on the source # node the resize_instance() call at the point of calling finish_resize # overlaps with a update_available_resources() periodic job. This # causes that the periodic job will not track the migration nor the # instance and therefore freeing the resource allocation. Then when # later the resize is confirmed the confirm_resize on the source # compute also wants to free up the resources, the pinned CPUs, and it # fails as they are already freed. exc = self.assertRaises( client.OpenStackApiException, self.api.post_server_action, server['id'], post ) self.assertEqual(500, exc.response.status_code) self.assertIn('CPUUnpinningInvalid', str(exc)) # confirm failed above but the resource allocation reflects that the # VM is running on the dest node self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 2) self._run_periodics() # and such allocation situation is stable so as a recovery the VM # can be reset-state to ACTIVE without problem. self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 2) def test_resize_revert_bug_1944759(self): server, src_host, dst_host = ( self._create_server_and_resize_bug_1944759()) # Now revert the resize post = {'revertResize': None} # reverts actually succeeds (not like confirm) but the resource # allocation is still flaky self.api.post_server_action(server['id'], post) self._wait_for_state_change(server, 'ACTIVE') # This is a resource accounting bug. After the revert the source host # should have 2 cpus pinned due to the instance. self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 0) # running the periodic job will fix the resource accounting self._run_periodics() # this is now correct self._assert_pinned_cpus(src_host, 2) self._assert_pinned_cpus(dst_host, 0) ",,121,0
openstack%2Fkolla~master~I28fa085fd19dbf177985f2ce385a066e65dacc79,openstack/kolla,master,I28fa085fd19dbf177985f2ce385a066e65dacc79,base: do not overwrite APT sources.list,ABANDONED,2021-04-19 17:19:27.000000000,2021-10-29 15:55:24.000000000,,"[{'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-04-19 17:19:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/4095ae3cba142a5de388b16057145993cb40ca6b', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 2, 'created': '2021-04-26 18:03:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/7df7a4d9c3aedfe22d4116a21186f92e5bd2bbd6', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 3, 'created': '2021-05-03 18:14:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/dcd445b378762f0530947ac93ef3e7f97238d3a9', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 4, 'created': '2021-05-04 06:15:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/9efc77ed10a833e4e818b87839ea58d7625334d1', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 5, 'created': '2021-05-05 16:53:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/4d4cfa74d87dce128240d5658b4abcc7b1f0b5c5', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 6, 'created': '2021-05-05 18:23:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/90f2f532bd78caaf42fd8ea9de97f539fa6ba661', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 7, 'created': '2021-05-06 06:09:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/1e116904bc4b81266299f33a8d0bb0acc96f027a', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 8, 'created': '2021-05-06 08:05:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/0277fb6963c4a843bcb9b00bda65f8c80125a82f', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 9, 'created': '2021-05-06 08:22:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/bfc731ad29c114e0bd4cd5fd4b247f82cd812472', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 10, 'created': '2021-05-06 08:29:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/f9ecb424fc53cbab5b278edc95323257c2a9a4b1', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 11, 'created': '2021-05-06 12:05:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/7554edb37b649bca0d7e4f2e074a924ff80fcb76', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 12, 'created': '2021-05-17 07:00:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/c5d1a435a030f966fc755d69e1e9f015dc406e8e', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 13, 'created': '2021-05-17 12:39:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/d97bffba4de8cba123a9826ac7f51d9a46bbd715', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 14, 'created': '2021-05-17 16:31:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/dc5f99bca7d6574e3198bec420cc3270cbe4317b', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}, {'number': 15, 'created': '2021-08-04 14:49:06.000000000', 'files': ['docker/base/Dockerfile.j2', 'tests/templates/template_overrides.j2', 'docker/base/sources.list.ubuntu.aarch64', 'docker/base/sources.list.debian', 'docker/base/sources.list.ubuntu'], 'web_link': 'https://opendev.org/openstack/kolla/commit/6d407ba9a74f51294faee549b3118d43d180d326', 'message': ""base: do not overwrite APT sources.list\n\nWe handle external repositories via repos.yaml file so our sources.list\nfiles are basically same as ones in base container images.\n\nOnce we start requiring packages from bullseye-backports repo we can\nmove to 'debian:bullseye-backports' container image as a base.\n\nBoth distros have their OpenStack repositories enabled in official way:\n- Debian by 'extrepo'\n- Ubuntu by 'add-apt-repository'\n\nChange-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79\n""}]",12,786938,6d407ba9a74f51294faee549b3118d43d180d326,51,3,15,24072,,,0,"base: do not overwrite APT sources.list

We handle external repositories via repos.yaml file so our sources.list
files are basically same as ones in base container images.

Once we start requiring packages from bullseye-backports repo we can
move to 'debian:bullseye-backports' container image as a base.

Both distros have their OpenStack repositories enabled in official way:
- Debian by 'extrepo'
- Ubuntu by 'add-apt-repository'

Change-Id: I28fa085fd19dbf177985f2ce385a066e65dacc79
",git fetch https://review.opendev.org/openstack/kolla refs/changes/38/786938/2 && git format-patch -1 --stdout FETCH_HEAD,"['docker/base/Dockerfile.j2', 'docker/base/sources.list.debian', 'docker/base/sources.list.ubuntu.aarch64', 'docker/base/sources.list.ubuntu.ppc64le', 'docker/base/sources.list.ubuntu']",5,4095ae3cba142a5de388b16057145993cb40ca6b,prepare-for-kolla-wallaby-release,,"# For non-x86 architectures we use sources.list.ubuntu.<arch> # Default repos deb mirror://mirrors.ubuntu.com/mirrors.txt focal main universe deb mirror://mirrors.ubuntu.com/mirrors.txt focal-updates main universe deb mirror://mirrors.ubuntu.com/mirrors.txt focal-security main universe # Backports have a lower priority and must be explicitly installed to be used deb http://archive.ubuntu.com/ubuntu/ focal-backports main universe # We need to add the repo for the updated packages they provide. The main ones # are qemu, libvirt, and openvswitch. deb http://ubuntu-cloud.archive.canonical.com/ubuntu focal-updates/victoria main # NOTE(hrw): repositories below are added into image when they are needed as # separate files in /etc/apt/sources.list.d/ directory. For that purpose they # are defined in kolla/repos.yaml file. # # Here they stay in case someone needs them. # Elasticsearch, Logstash & Kibana repo #deb https://artifacts.elastic.co/packages/5.x/apt stable main # InfluxDB repo #deb https://repos.influxdata.com/ubuntu focal stable # Grafana repo #deb https://packages.grafana.com/oss/deb stable main # Fluentd repo #deb http://packages.treasuredata.com/3/ubuntu/focal/ focal contrib # Qdrouterd repo #deb http://ppa.launchpad.net/qpid/released/ubuntu/ focal main # rabbitmq repo #deb https://dl.bintray.com/rabbitmq/debian/ focal main # erlang repo #deb https://dl.bintray.com/rabbitmq-erlang/debian/ focal erlang # erlang repo - aarch64 only #deb https://obs.linaro.org/repos/home:/marcin.juszkiewicz/ubuntu-focal ./ # MariaDB repo #deb http://downloads.mariadb.com/MariaDB/mariadb-10.3/repo/ubuntu focal main ",9,117
openstack%2Freleases~master~Idd6f14e733aae3e2bf2efd61e274824110997217,openstack/releases,master,Idd6f14e733aae3e2bf2efd61e274824110997217,[victoria] release oslo.context 3.1.2,MERGED,2021-10-29 06:43:20.000000000,2021-10-29 15:28:51.000000000,2021-10-29 15:28:51.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-29 06:43:20.000000000', 'files': ['deliverables/victoria/oslo.context.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/17775171e4dd472967717f63debfff77f8935cac', 'message': '[victoria] release oslo.context 3.1.2\n\nChange-Id: Idd6f14e733aae3e2bf2efd61e274824110997217\n'}]",1,815937,17775171e4dd472967717f63debfff77f8935cac,8,3,1,28522,,,0,"[victoria] release oslo.context 3.1.2

Change-Id: Idd6f14e733aae3e2bf2efd61e274824110997217
",git fetch https://review.opendev.org/openstack/releases refs/changes/37/815937/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/victoria/oslo.context.yaml'],1,17775171e4dd472967717f63debfff77f8935cac,oslo-victoria, - version: 3.1.2 projects: - repo: openstack/oslo.context hash: eff2f2f57248f17189d088901f39dc4ab7b0afe3,,4,0
openstack%2Freleases~master~Idafac1bd6c2c5d5d5a16fea0adea818f94ff2f54,openstack/releases,master,Idafac1bd6c2c5d5d5a16fea0adea818f94ff2f54,Release tripleo-common-15.4.0,MERGED,2021-10-20 21:07:50.000000000,2021-10-29 15:25:07.000000000,2021-10-29 15:25:07.000000000,"[{'_account_id': 308}, {'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-20 21:07:50.000000000', 'files': ['deliverables/wallaby/tripleo-common.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/597eadcff152f81f95af90d2456f39ff75f69134', 'message': 'Release tripleo-common-15.4.0\n\nThis release is required to package newly added utility scripts\n\nChange-Id: Idafac1bd6c2c5d5d5a16fea0adea818f94ff2f54\n'}]",6,814827,597eadcff152f81f95af90d2456f39ff75f69134,17,8,1,4571,,,0,"Release tripleo-common-15.4.0

This release is required to package newly added utility scripts

Change-Id: Idafac1bd6c2c5d5d5a16fea0adea818f94ff2f54
",git fetch https://review.opendev.org/openstack/releases refs/changes/27/814827/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/wallaby/tripleo-common.yaml'],1,597eadcff152f81f95af90d2456f39ff75f69134,wallaby-tripleo-common, - version: 15.4.0 projects: - repo: openstack/tripleo-common hash: c5d4284e7c44a6ec55ab58a0ab8a9d3c1acebef6,,4,0
openstack%2Fnova~master~I6d79fc80b85d398fe0168677318c9c34285189ae,openstack/nova,master,I6d79fc80b85d398fe0168677318c9c34285189ae,[goal] Prepare for job migration to Ubuntu Focal (20.04),MERGED,2020-06-26 00:49:13.000000000,2021-10-29 14:56:19.000000000,2020-08-25 16:11:46.000000000,"[{'_account_id': 8556}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 28182}, {'_account_id': 28522}, {'_account_id': 29963}, {'_account_id': 32071}]","[{'number': 1, 'created': '2020-06-26 00:49:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/92710b911286aeac82b8b4320e8742dece26e7b9', 'message': 'DNM: testing nova gate on ubuntu focal\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\nStory: #2007865\nTask: #40200\n'}, {'number': 2, 'created': '2020-07-01 01:05:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/60d4950db235913ee84caec2ff7e8ef771602e66', 'message': 'DNM: testing nova gate on ubuntu focal\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\nStory: #2007865\nTask: #40200\n'}, {'number': 3, 'created': '2020-07-01 01:49:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4a6c1ea7157b694e0237cb13463fbe3a0df7abf0', 'message': 'DNM: testing nova gate on ubuntu focal\n\nThis tests:\n- integration jobs\n- unit tests jobs\n- functional tests jobs\n- docs jobs\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\nStory: #2007865\nTask: #40200\n'}, {'number': 4, 'created': '2020-07-01 02:22:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/60d468f44833b119dbfbc6471b3d7d95b1cdcf18', 'message': 'DNM: testing nova gate on ubuntu focal\n\nThis tests:\n- integration jobs\n- unit tests jobs\n- functional tests jobs\n- docs jobs\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\nStory: #2007865\nTask: #40200\n'}, {'number': 5, 'created': '2020-07-01 02:28:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/915cd878044d6df29d727fb9cfb862e1ed920cdf', 'message': 'DNM: testing nova gate on ubuntu focal\n\nThis tests:\n- integration jobs\n- unit tests jobs\n- functional tests jobs\n- docs jobs\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\nStory: #2007865\nTask: #40200\n'}, {'number': 6, 'created': '2020-07-05 01:51:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6a6a557bcefe5c641f66479d8c72a7bc51d8d36e', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the Markupsafe to 1.1.1 as min version to avoid\n\'Cannot import name ""Feature"" from ""setuptools""\' error.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 7, 'created': '2020-07-08 17:01:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/832fe57163f927e6092e1ffc657de4a2e3d89379', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the Markupsafe to 1.1.1 as min version to avoid\n\'Cannot import name ""Feature"" from ""setuptools""\' error.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 8, 'created': '2020-07-09 15:22:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6b7460bfd98537520a8c3610e7398c1ce05f9d22', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the Markupsafe to 1.1.1 as min version to avoid\n\'Cannot import name ""Feature"" from ""setuptools""\' error.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 9, 'created': '2020-07-10 22:34:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b85a1ee9f420b957ce68a76cdc543028050e1d94', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.h>\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 10, 'created': '2020-07-11 00:21:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/5600bb2eace714dfd006002f384366cdf54144b3', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.h>\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 11, 'created': '2020-07-31 22:58:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/38396f1e0a784237d6dc3ac03e047956a362dcbd', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.h>\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 12, 'created': '2020-08-04 19:54:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6bdb7fe1d3b899956ea15abeb994ad78197466f7', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.h>\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 13, 'created': '2020-08-07 17:43:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/e22aedee85ae132f9a8319b8a0a2aba3d1240505', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.h>\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 14, 'created': '2020-08-14 17:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/012642eb9389a7b9350f0f5a2a431fcd71a0617c', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nDepends-On: https://review.opendev.org/#/c/746327/\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.h>\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 15, 'created': '2020-08-16 16:24:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2437836edf68990c9dc92d16c719fd27d7ca4f5f', 'message': '[goal] Migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886298\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.h>\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 16, 'created': '2020-08-17 15:00:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/66052443175aa4a642bb2f22fa2652a13d1266a7', 'message': '[goal] Prepare for job migration to Ubuntu Focal (20.04)\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}, {'number': 17, 'created': '2020-08-18 11:28:32.000000000', 'files': ['requirements.txt', 'test-requirements.txt', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/nova/commit/e905400ca077933563972b6ea73177c22408a8fe', 'message': '[goal] Prepare for job migration to Ubuntu Focal (20.04)\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nBump the lower constraints for required deps which added python3.8 support\nin their later version.\n\nStory: #2007865\nTask: #40200\n\nCloses-Bug: #1886298\n\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I6d79fc80b85d398fe0168677318c9c34285189ae\n'}]",5,738126,e905400ca077933563972b6ea73177c22408a8fe,206,16,17,8556,,,0,"[goal] Prepare for job migration to Ubuntu Focal (20.04)

As per victoria cycle testing runtime and community goal[1]
we need to migrate upstream CI/CD to Ubuntu Focal(20.04).

Bump the lower constraints for required deps which added python3.8 support
in their later version.

Story: #2007865
Task: #40200

Closes-Bug: #1886298

[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html

Change-Id: I6d79fc80b85d398fe0168677318c9c34285189ae
",git fetch https://review.opendev.org/openstack/nova refs/changes/26/738126/16 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,92710b911286aeac82b8b4320e8742dece26e7b9,migrate-to-focal,# for job naming conventions.,# for job naming conventions.,1,1
openstack%2Fsushy~master~Iea051961a183cfb7cb2307726b2c8bdeeb566da7,openstack/sushy,master,Iea051961a183cfb7cb2307726b2c8bdeeb566da7,Migrate Protocol constants to enums,MERGED,2021-10-26 11:41:37.000000000,2021-10-29 14:27:39.000000000,2021-10-29 14:25:34.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-10-26 11:41:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/9fb48fc13277b3e2a6756355d3fef2e0b48ae962', 'message': 'Migrate Protocol constants to enums\n\nFor UpdateService a new enum was created instead of partially reusing\nthe Protocol enum since these are not related in the standard.\n\nChange-Id: Iea051961a183cfb7cb2307726b2c8bdeeb566da7\n'}, {'number': 2, 'created': '2021-10-27 09:10:50.000000000', 'files': ['sushy/tests/unit/resources/system/storage/test_drive.py', 'sushy/resources/constants.py', 'sushy/tests/unit/resources/fabric/test_fabric.py', 'sushy/resources/system/storage/storage.py', 'sushy/resources/fabric/fabric.py', 'sushy/tests/unit/resources/updateservice/test_updateservice.py', 'sushy/resources/updateservice/mappings.py', 'sushy/resources/system/storage/drive.py', 'sushy/resources/mappings.py', 'sushy/resources/updateservice/constants.py', 'sushy/tests/unit/resources/system/storage/test_storage.py', 'sushy/tests/unit/resources/fabric/test_endpoint.py', 'sushy/resources/fabric/endpoint.py', 'sushy/resources/updateservice/updateservice.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/95be2b1f1858f800f4234557b8d280621e4f2357', 'message': 'Migrate Protocol constants to enums\n\nFor UpdateService a new enum was created instead of partially reusing\nthe Protocol enum since these are not related in the standard.\n\nChange-Id: Iea051961a183cfb7cb2307726b2c8bdeeb566da7\n'}]",0,815475,95be2b1f1858f800f4234557b8d280621e4f2357,14,3,2,10239,,,0,"Migrate Protocol constants to enums

For UpdateService a new enum was created instead of partially reusing
the Protocol enum since these are not related in the standard.

Change-Id: Iea051961a183cfb7cb2307726b2c8bdeeb566da7
",git fetch https://review.opendev.org/openstack/sushy refs/changes/75/815475/2 && git format-patch -1 --stdout FETCH_HEAD,"['sushy/tests/unit/resources/system/storage/test_drive.py', 'sushy/resources/constants.py', 'sushy/tests/unit/resources/fabric/test_fabric.py', 'sushy/resources/system/storage/storage.py', 'sushy/resources/fabric/fabric.py', 'sushy/tests/unit/resources/updateservice/test_updateservice.py', 'sushy/resources/updateservice/mappings.py', 'sushy/resources/system/storage/drive.py', 'sushy/resources/mappings.py', 'sushy/resources/updateservice/constants.py', 'sushy/tests/unit/resources/system/storage/test_storage.py', 'sushy/tests/unit/resources/fabric/test_endpoint.py', 'sushy/resources/fabric/endpoint.py', 'sushy/resources/updateservice/updateservice.py']",14,9fb48fc13277b3e2a6756355d3fef2e0b48ae962,enum-proto," return {x.value for x in up_cons.UpdateTransferProtocolType} return set(up_cons.UpdateTransferProtocolType) transfer_protocol = up_cons.UpdateTransferProtocolType( transfer_protocol).value ', '.join(x.value for x in up_cons.UpdateTransferProtocolType))","from sushy.resources.updateservice import mappings as up_maps return set(up_maps.TRANSFER_PROTOCOL_TYPE_VALUE_MAP) return set(up_maps.TRANSFER_PROTOCOL_TYPE_VALUE_MAP_REV) transfer_protocol = up_maps.TRANSFER_PROTOCOL_TYPE_VALUE_MAP_REV[ transfer_protocol] ', '.join(up_maps.TRANSFER_PROTOCOL_TYPE_VALUE_MAP_REV))",219,145
openstack%2Fproject-config~master~I45e4b34c0f29cdf8515e26d75d4c77cfdd9b04c4,openstack/project-config,master,I45e4b34c0f29cdf8515e26d75d4c77cfdd9b04c4,Add zuul job templates to openstack/ci-log-processing project,MERGED,2021-10-21 15:56:20.000000000,2021-10-29 14:21:36.000000000,2021-10-29 14:21:36.000000000,"[{'_account_id': 4146}, {'_account_id': 5263}, {'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-21 15:56:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/fa5bf8695ca57dd1bfb13e1f5739084dd4d289d4', 'message': 'Add project openstack/ci-log-processing\n\nThis commit will create new project: openstack/ci-log-processing\n\nChange-Id: I45e4b34c0f29cdf8515e26d75d4c77cfdd9b04c4\n'}, {'number': 2, 'created': '2021-10-25 09:32:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/1c468c883730b91f2927ff5f68045c62e4abc515', 'message': 'Setup configuration for project openstack/ci-log-processing\n\nThis commit is configuring project openstack/ci-log-processing with\nadditional services like zuul, gerritbot etc.\n\nChange-Id: I45e4b34c0f29cdf8515e26d75d4c77cfdd9b04c4\n'}, {'number': 3, 'created': '2021-10-27 07:37:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/d96979a3dfde60e9117de2af5cd0477dcf5fca3a', 'message': 'Setup zuul jobs for openstack/ci-log-processing project\n\nThe ci-log-processing project should be mostly\npython code with documentation, so on the beginning\nbasic tox jobs will be defined.\n\nChange-Id: I45e4b34c0f29cdf8515e26d75d4c77cfdd9b04c4\n'}, {'number': 4, 'created': '2021-10-29 13:01:26.000000000', 'files': ['zuul.d/projects.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/7e0c7a26e7b8b0b9f7dbbe210525bfa4793b380b', 'message': 'Add zuul job templates to openstack/ci-log-processing project\n\nThis commit sets official-openstack-repo-jobs for\nopenstack/ci-log-processing project, that gives us possibility to\nmirroring repo to Github service.\nAlso added publish-to-pypi template, so the zuul log\nscrapper tool will be available in pypi repository.\n\nChange-Id: I45e4b34c0f29cdf8515e26d75d4c77cfdd9b04c4\n'}]",6,815024,7e0c7a26e7b8b0b9f7dbbe210525bfa4793b380b,19,4,4,20676,,,0,"Add zuul job templates to openstack/ci-log-processing project

This commit sets official-openstack-repo-jobs for
openstack/ci-log-processing project, that gives us possibility to
mirroring repo to Github service.
Also added publish-to-pypi template, so the zuul log
scrapper tool will be available in pypi repository.

Change-Id: I45e4b34c0f29cdf8515e26d75d4c77cfdd9b04c4
",git fetch https://review.opendev.org/openstack/project-config refs/changes/24/815024/4 && git format-patch -1 --stdout FETCH_HEAD,"['gerritbot/channels.yaml', 'gerrit/projects.yaml', 'zuul.d/projects.yaml', 'zuul/main.yaml', 'gerrit/acls/openstack/ci-log-processing.config']",5,fa5bf8695ca57dd1bfb13e1f5739084dd4d289d4,,"[access ""refs/heads/*""] abandon = group ci-log-processing label-Code-Review = -2..+2 group ci-log-processing label-Workflow = -1..+1 group ci-log-processing [access ""refs/tags/*""] pushSignedTag = group ci-log-processing-release [receive] requireChangeId = true requireContributorAgreement = true [submit] mergeContent = true ",,31,0
openstack%2Ftripleo-heat-templates~master~Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,openstack/tripleo-heat-templates,master,Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b,Remove mariadb-server packages from the host,MERGED,2021-10-28 06:14:27.000000000,2021-10-29 13:56:45.000000000,2021-10-29 13:56:45.000000000,"[{'_account_id': 6816}, {'_account_id': 6926}, {'_account_id': 8297}, {'_account_id': 8449}, {'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 14985}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-28 06:14:27.000000000', 'files': ['deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d33865cded7766eb8d35ce56d5eb206c2dda1ad9', 'message': ""Remove mariadb-server packages from the host\n\nDuring updates/upgrades, installing mariadb-server on the\nhost may impact the behaviour of containerized mysql.\n\nDuring a FFU if mariadb-server is upgraded, it may happen\nthat the rpm scriptlets fail to start mariadb server and\nleave a crash log behind (tc.log). This prevents the\nregular online upgrade from happening.\n\nDuring an upgrade, mariadb-server used to be force-upgraded\nin the mysql service for historical reasons. It's not\nnecessary since mysql is containerized and can trigger\nthe same crash as explained above.\n\nDuring a minor update, the same reasoning can apply if\nRHEL channel ships a new mariadb-server rpm as scriptlets\nwill probably leave a crash behind as well.\n\nMake sure mariadb-server is never installed, while\nkeeping mariadb CLI if already present on the host, to\navoid operational impacts.\n\nChange-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b\nCloses-Bug: #1946742\n""}]",7,815775,d33865cded7766eb8d35ce56d5eb206c2dda1ad9,19,11,1,26343,,,0,"Remove mariadb-server packages from the host

During updates/upgrades, installing mariadb-server on the
host may impact the behaviour of containerized mysql.

During a FFU if mariadb-server is upgraded, it may happen
that the rpm scriptlets fail to start mariadb server and
leave a crash log behind (tc.log). This prevents the
regular online upgrade from happening.

During an upgrade, mariadb-server used to be force-upgraded
in the mysql service for historical reasons. It's not
necessary since mysql is containerized and can trigger
the same crash as explained above.

During a minor update, the same reasoning can apply if
RHEL channel ships a new mariadb-server rpm as scriptlets
will probably leave a crash behind as well.

Make sure mariadb-server is never installed, while
keeping mariadb CLI if already present on the host, to
avoid operational impacts.

Change-Id: Ib669bb4a5fcbb493d6d5edb5999bd1d87418558b
Closes-Bug: #1946742
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/75/815775/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml']",2,d33865cded7766eb8d35ce56d5eb206c2dda1ad9,, yum -y remove *el7ost* \ mariadb-server* -- \, yum -y remove *el7ost* -- \,7,7
openstack%2Fopenstack-ansible-os_heat~master~Id788a2287c3c062322dfbe5210b5f69380f3d55e,openstack/openstack-ansible-os_heat,master,Id788a2287c3c062322dfbe5210b5f69380f3d55e,Do not install ceilometerclient,MERGED,2021-10-26 10:40:44.000000000,2021-10-29 13:47:24.000000000,2021-10-29 13:45:31.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 31542}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-26 10:40:44.000000000', 'files': ['defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_heat/commit/8921f9d36ddce6eea61f6097ae93e82e58e9ebae', 'message': 'Do not install ceilometerclient\n\nceilometerclient has been deprecated and should not be installed anymore\n\nRelated-Bug: #1948683\nChange-Id: Id788a2287c3c062322dfbe5210b5f69380f3d55e\n'}]",3,815468,8921f9d36ddce6eea61f6097ae93e82e58e9ebae,17,4,1,28619,,,0,"Do not install ceilometerclient

ceilometerclient has been deprecated and should not be installed anymore

Related-Bug: #1948683
Change-Id: Id788a2287c3c062322dfbe5210b5f69380f3d55e
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_heat refs/changes/68/815468/1 && git format-patch -1 --stdout FETCH_HEAD,['defaults/main.yml'],1,8921f9d36ddce6eea61f6097ae93e82e58e9ebae,bug/1948683,, - python-ceilometerclient,0,1
openstack%2Fironic~stable%2Fwallaby~Ieeb427321c971fc6f59cb4a41d9630c687f5534f,openstack/ironic,stable/wallaby,Ieeb427321c971fc6f59cb4a41d9630c687f5534f,Minor updates to anaconda doc,MERGED,2021-10-28 16:29:37.000000000,2021-10-29 13:40:58.000000000,2021-10-29 13:39:21.000000000,"[{'_account_id': 6618}, {'_account_id': 12640}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-28 16:29:37.000000000', 'files': ['doc/source/admin/anaconda-deploy-interface.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/6fe0d4e3a6a91d2a3437480200de6bb57d0ccec6', 'message': 'Minor updates to anaconda doc\n\nSome minor grammatical clean ups, clarifications in the\nanaconda deploy interface documentation.\n\nChange-Id: Ieeb427321c971fc6f59cb4a41d9630c687f5534f\n(cherry picked from commit c46ae1af42a971f0179d67a90410223fdb1f04de)\n'}]",0,815873,6fe0d4e3a6a91d2a3437480200de6bb57d0ccec6,10,5,1,6618,,,0,"Minor updates to anaconda doc

Some minor grammatical clean ups, clarifications in the
anaconda deploy interface documentation.

Change-Id: Ieeb427321c971fc6f59cb4a41d9630c687f5534f
(cherry picked from commit c46ae1af42a971f0179d67a90410223fdb1f04de)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/73/815873/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/anaconda-deploy-interface.rst'],1,6fe0d4e3a6a91d2a3437480200de6bb57d0ccec6,rloo_anaconda-bugfix/18.1-stable/wallaby,"Ironic supports deploying an OS with the `anaconda`_ installer. This anaconda deploy interface works with ``pxe`` and ``ipxe`` boot interfaces.The anaconda deploy interface is not enabled by default. To enable this, add ``anaconda`` to the value of the ``enabled_deploy_interfaces`` configuration option in ironic.conf. For example:This change takes effect after all the ironic conductors have beenWhen creating an ironic node, specify ``anaconda`` as the deploy interface. For example: You can also set the anaconda deploy interface via ``--deploy-interface`` on an existing node: baremetal node set <node> --deploy-interface anacondaWhile anaconda allows installing individual RPMs, the default kickstart file expects an OS tarball to be used as the OS image. This ``baremetal.yum`` file contains all the yum/dnf commands that need to be run in order to generate the OS tarball. These commands install packages and package groups that need to be in the image:An OS tarball can be created using following set of commands, along with the above ``baremetal.yum`` file:Anaconda is a two-stage installer -- stage 1 consists of the kernel and ramdisk and stage 2 lives in a squashfs file. All these components can be``/images/pxeboot/initrd.img`` respectively in the ISO. The stage 2 squashfsThe OS tarball must be configured with the following properties in glance, in order to be used with the anaconda deploy driver: * ``kernel_id`` * ``ramdisk_id`` * ``stage2_id`` This is an example of adding the anaconda-related images and the OS tarball to glance:Creating a bare metal server ----------------------------with the OS image via the ``ks_template`` property in glance, operators can also set the kickstart template in the ironic node's ``instance_info`` field. The kickstart template set in ``instance_info`` takes precedence over the one specified via the OS image in glance. If no kickstart template is specified (via the node's ``instance_info`` or ``ks_template`` glance image property),The default kickstart template is specified via the configuration option ``[anaconda]default_ks_template``. It is set to this `ks.cfg.template`_ but can be modified to be some other template. This is an example of how to set the kickstart template for a specific ironic node: openstack baremetal node set <node> \ .. _`anaconda`: https://fedoraproject.org/wiki/Anaconda .. _`ks.cfg.template`: https://opendev.org/openstack/ironic/src/branch/master/ironic/drivers/modules/ks.cfg.template","Ironic supports deploying OS with anaconda installer in addition to IPA. This deploy interface supports ``pxe``, ``ipxe`` boot interfaces.The anaconda deploy interface is not enabled by default. To enable this, use the ``enabled_deploy_interfaces`` configuration option in ironic.confThis change will not be effective until all Ironic conductors have beenYou can also set ``--deploy-interface`` on an existing node: baremetal node set <NODE> --deploy-interface anacondaWhile anaconda allows installing individual RPMs the default kickstart file expects a OS tarball to be used as the OS image. A baremetal.yum file that lists all yum/dnf commands that need to be run to generate the OS tarball. The commands normally install packages and package' groups that need to be in the imageAn OS tarball can be created using following set of commands using above baremetal.yum fileAnaconda is a two stage installer - The stage1 consists of the kernel and ramdisk and the stage2 lives in a squashfs file. All these components can be``/images/pxeboot/initrd.img`` respectively in the ISO. The stage2 squashfsThe OS tarball must be configured with following properties in glance to be used with anaconda deploy driver 1. ``kernel_id`` 2. ``ramdisk_id`` 3. ``stage2_id``Creating a baremetal server ---------------------------to the OS Image as ``ks_template`` property in glance, operators can also set the kickstart template in instance_info. The kickstart template set in instance_info takes precedence over the one set in the glance image. If kickstart template is not found in instance_info or the glance image property openstack baremetal node set $NODE_UUID \",48,29
openstack%2Fironic~bugfix%2F18.1~Ieeb427321c971fc6f59cb4a41d9630c687f5534f,openstack/ironic,bugfix/18.1,Ieeb427321c971fc6f59cb4a41d9630c687f5534f,Minor updates to anaconda doc,MERGED,2021-10-28 16:29:08.000000000,2021-10-29 13:39:05.000000000,2021-10-29 13:36:46.000000000,"[{'_account_id': 6618}, {'_account_id': 12640}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-28 16:29:08.000000000', 'files': ['doc/source/admin/anaconda-deploy-interface.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/7e8556470e553ed267b289f40acbbb18d9f8d928', 'message': 'Minor updates to anaconda doc\n\nSome minor grammatical clean ups, clarifications in the\nanaconda deploy interface documentation.\n\nChange-Id: Ieeb427321c971fc6f59cb4a41d9630c687f5534f\n(cherry picked from commit c46ae1af42a971f0179d67a90410223fdb1f04de)\n'}]",0,815872,7e8556470e553ed267b289f40acbbb18d9f8d928,10,5,1,6618,,,0,"Minor updates to anaconda doc

Some minor grammatical clean ups, clarifications in the
anaconda deploy interface documentation.

Change-Id: Ieeb427321c971fc6f59cb4a41d9630c687f5534f
(cherry picked from commit c46ae1af42a971f0179d67a90410223fdb1f04de)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/72/815872/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/anaconda-deploy-interface.rst'],1,7e8556470e553ed267b289f40acbbb18d9f8d928,rloo_anaconda-bugfix/18.1,"Ironic supports deploying an OS with the `anaconda`_ installer. This anaconda deploy interface works with ``pxe`` and ``ipxe`` boot interfaces.The anaconda deploy interface is not enabled by default. To enable this, add ``anaconda`` to the value of the ``enabled_deploy_interfaces`` configuration option in ironic.conf. For example:This change takes effect after all the ironic conductors have beenWhen creating an ironic node, specify ``anaconda`` as the deploy interface. For example: You can also set the anaconda deploy interface via ``--deploy-interface`` on an existing node: baremetal node set <node> --deploy-interface anacondaWhile anaconda allows installing individual RPMs, the default kickstart file expects an OS tarball to be used as the OS image. This ``baremetal.yum`` file contains all the yum/dnf commands that need to be run in order to generate the OS tarball. These commands install packages and package groups that need to be in the image:An OS tarball can be created using following set of commands, along with the above ``baremetal.yum`` file:Anaconda is a two-stage installer -- stage 1 consists of the kernel and ramdisk and stage 2 lives in a squashfs file. All these components can be``/images/pxeboot/initrd.img`` respectively in the ISO. The stage 2 squashfsThe OS tarball must be configured with the following properties in glance, in order to be used with the anaconda deploy driver: * ``kernel_id`` * ``ramdisk_id`` * ``stage2_id`` This is an example of adding the anaconda-related images and the OS tarball to glance:Creating a bare metal server ----------------------------with the OS image via the ``ks_template`` property in glance, operators can also set the kickstart template in the ironic node's ``instance_info`` field. The kickstart template set in ``instance_info`` takes precedence over the one specified via the OS image in glance. If no kickstart template is specified (via the node's ``instance_info`` or ``ks_template`` glance image property),The default kickstart template is specified via the configuration option ``[anaconda]default_ks_template``. It is set to this `ks.cfg.template`_ but can be modified to be some other template. This is an example of how to set the kickstart template for a specific ironic node: openstack baremetal node set <node> \ .. _`anaconda`: https://fedoraproject.org/wiki/Anaconda .. _`ks.cfg.template`: https://opendev.org/openstack/ironic/src/branch/master/ironic/drivers/modules/ks.cfg.template","Ironic supports deploying OS with anaconda installer in addition to IPA. This deploy interface supports ``pxe``, ``ipxe`` boot interfaces.The anaconda deploy interface is not enabled by default. To enable this, use the ``enabled_deploy_interfaces`` configuration option in ironic.confThis change will not be effective until all Ironic conductors have beenYou can also set ``--deploy-interface`` on an existing node: baremetal node set <NODE> --deploy-interface anacondaWhile anaconda allows installing individual RPMs the default kickstart file expects a OS tarball to be used as the OS image. A baremetal.yum file that lists all yum/dnf commands that need to be run to generate the OS tarball. The commands normally install packages and package' groups that need to be in the imageAn OS tarball can be created using following set of commands using above baremetal.yum fileAnaconda is a two stage installer - The stage1 consists of the kernel and ramdisk and the stage2 lives in a squashfs file. All these components can be``/images/pxeboot/initrd.img`` respectively in the ISO. The stage2 squashfsThe OS tarball must be configured with following properties in glance to be used with anaconda deploy driver 1. ``kernel_id`` 2. ``ramdisk_id`` 3. ``stage2_id``Creating a baremetal server ---------------------------to the OS Image as ``ks_template`` property in glance, operators can also set the kickstart template in instance_info. The kickstart template set in instance_info takes precedence over the one set in the glance image. If kickstart template is not found in instance_info or the glance image property openstack baremetal node set $NODE_UUID \",48,29
openstack%2Fkayobe~stable%2Fussuri~I7049eae6518f818f9e180dfdb6f515d527644808,openstack/kayobe,stable/ussuri,I7049eae6518f818f9e180dfdb6f515d527644808,Prevent Bifrost from using firewalld,ABANDONED,2021-10-29 10:09:36.000000000,2021-10-29 13:24:45.000000000,,"[{'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 23084}, {'_account_id': 34076}]","[{'number': 1, 'created': '2021-10-29 10:09:36.000000000', 'files': ['etc/kayobe/bifrost.yml', 'ansible/roles/kolla-bifrost/templates/bifrost.yml.j2', 'releasenotes/notes/bifrost-use-firewalld-90b69e2ac6eead67.yaml', 'ansible/group_vars/all/bifrost'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c6c4e6996b4077e8162aa0cb5dd6d89af97bb696', 'message': 'Prevent Bifrost from using firewalld\n\nThis is to avoid conflicting with iptables rules configured on the seed\nhost by Kayobe.\n\nA new variable kolla_bifrost_use_firewalld is introduced to configure\nwhether Bifrost uses firewalld.\n\nChange-Id: I7049eae6518f818f9e180dfdb6f515d527644808\nStory: 2009252\nTask: 43442\n'}]",1,815949,c6c4e6996b4077e8162aa0cb5dd6d89af97bb696,5,4,1,22629,,,0,"Prevent Bifrost from using firewalld

This is to avoid conflicting with iptables rules configured on the seed
host by Kayobe.

A new variable kolla_bifrost_use_firewalld is introduced to configure
whether Bifrost uses firewalld.

Change-Id: I7049eae6518f818f9e180dfdb6f515d527644808
Story: 2009252
Task: 43442
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/49/815949/1 && git format-patch -1 --stdout FETCH_HEAD,"['etc/kayobe/bifrost.yml', 'ansible/roles/kolla-bifrost/templates/bifrost.yml.j2', 'releasenotes/notes/bifrost-use-firewalld-90b69e2ac6eead67.yaml', 'ansible/group_vars/all/bifrost']",4,c6c4e6996b4077e8162aa0cb5dd6d89af97bb696,,# Whether Bifrost uses firewalld. Default value is false to avoid conflicting # with iptables rules configured on the seed host by Kayobe. kolla_bifrost_use_firewalld: False ,,27,0
openstack%2Fos-net-config~stable%2Fussuri~Ic6738de42b9aa0346f48060c143c5f779b67867e,openstack/os-net-config,stable/ussuri,Ic6738de42b9aa0346f48060c143c5f779b67867e,Update sriov config service to handle nic partitioned PF,MERGED,2021-10-05 10:21:59.000000000,2021-10-29 13:08:55.000000000,2021-10-29 13:07:13.000000000,"[{'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 18904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-05 10:21:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-net-config/commit/e8d3d7ffcd951d33afc9f7d8fb5b92e5f0129d0e', 'message': 'Update sriov config service to handle nic partitioned PF\n\nCreate VFs using udev rules are required for attaching\nand removing PF from a VM. On a reboot, when udev rules\ntrigger VF creation script and when a VF is attached to\nvfio-pci driver, some of the VFs on that PF are not\ninitialized properly, resulting in VF not found issue.\nThough it looks like driver issue, this patch avoids\nthis scenarios by removing the nic-paritioned VF from\nthe udev rule, as when one of the VF is attached to host,\nthe PF cannot be used by the VM.\n\nChange-Id: Ic6738de42b9aa0346f48060c143c5f779b67867e\n(cherry picked from commit fcf3d9cd126f30ecfe166aa5271a2f212a51a5a6)\n'}, {'number': 2, 'created': '2021-10-06 07:32:01.000000000', 'files': ['os_net_config/tests/test_sriov_config.py', 'os_net_config/utils.py', 'os_net_config/tests/test_utils.py', 'os_net_config/sriov_config.py'], 'web_link': 'https://opendev.org/openstack/os-net-config/commit/894fba1d5ff127ed44d73aee3aabbe58f5534e57', 'message': 'Update sriov config service to handle nic partitioned PF\n\nCreate VFs using udev rules are required for attaching\nand removing PF from a VM. On a reboot, when udev rules\ntrigger VF creation script and when a VF is attached to\nvfio-pci driver, some of the VFs on that PF are not\ninitialized properly, resulting in VF not found issue.\nThough it looks like driver issue, this patch avoids\nthis scenarios by removing the nic-paritioned VF from\nthe udev rule, as when one of the VF is attached to host,\nthe PF cannot be used by the VM.\n\nThe function setUp_pf_stubs() was added in the vdpa patch:\n    https://review.opendev.org/c/openstack/os-net-config/+/798926/\nSince there is a dependency on this API for the tests of this patch,\nit has been added here\n\nChange-Id: Ic6738de42b9aa0346f48060c143c5f779b67867e\n(cherry picked from commit fcf3d9cd126f30ecfe166aa5271a2f212a51a5a6)\n'}]",1,812475,894fba1d5ff127ed44d73aee3aabbe58f5534e57,14,4,2,33688,,,0,"Update sriov config service to handle nic partitioned PF

Create VFs using udev rules are required for attaching
and removing PF from a VM. On a reboot, when udev rules
trigger VF creation script and when a VF is attached to
vfio-pci driver, some of the VFs on that PF are not
initialized properly, resulting in VF not found issue.
Though it looks like driver issue, this patch avoids
this scenarios by removing the nic-paritioned VF from
the udev rule, as when one of the VF is attached to host,
the PF cannot be used by the VM.

The function setUp_pf_stubs() was added in the vdpa patch:
    https://review.opendev.org/c/openstack/os-net-config/+/798926/
Since there is a dependency on this API for the tests of this patch,
it has been added here

Change-Id: Ic6738de42b9aa0346f48060c143c5f779b67867e
(cherry picked from commit fcf3d9cd126f30ecfe166aa5271a2f212a51a5a6)
",git fetch https://review.opendev.org/openstack/os-net-config refs/changes/75/812475/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_net_config/tests/test_sriov_config.py', 'os_net_config/utils.py', 'os_net_config/tests/test_utils.py', 'os_net_config/sriov_config.py']",4,e8d3d7ffcd951d33afc9f7d8fb5b92e5f0129d0e,sriov_patches_ussuri,"def is_partitioned_pf(dev_name: str) -> bool: """"""Check if any nic-partition(VF) is already used Given a PF device, returns True if any VFs of this device are in-use. """""" sriov_map = _get_sriov_map() for config in sriov_map: devtype = config.get('device_type', None) if devtype == 'vf': name = config.get('device', {}).get('name') vf_name = config.get('name') if dev_name == name: logger.warning(""%s has VF(%s) used by host"" % (name, vf_name)) return True return False if not is_partitioned_pf(item['name']): add_udev_rule_for_legacy_sriov_pf(item['name'], item['numvfs']) "," add_udev_rule_for_legacy_sriov_pf(item['name'], item['numvfs'])",230,2
openstack%2Ftripleo-quickstart-extras~master~I9a08cde7a7e613ae4a37f3a0e0021f84f5db509b,openstack/tripleo-quickstart-extras,master,I9a08cde7a7e613ae4a37f3a0e0021f84f5db509b,"Revert ""In modify-image don't convert qcow2<->raw""",MERGED,2021-10-28 17:59:51.000000000,2021-10-29 13:07:10.000000000,2021-10-29 13:07:10.000000000,"[{'_account_id': 4571}, {'_account_id': 9976}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}, {'_account_id': 29775}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-10-28 17:59:51.000000000', 'files': ['roles/modify-image/tasks/manual.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/df4cd4c55b74d7189ea02aceeaf6e88eab143d71', 'message': 'Revert ""In modify-image don\'t convert qcow2<->raw""\n\nThis reverts commit 1526ef8e529112b273d9aed5b97e140f84ccba2d.\n\nReason for revert: https://bugs.launchpad.net/tripleo/+bug/1949107\n\nChange-Id: I9a08cde7a7e613ae4a37f3a0e0021f84f5db509b\n'}]",2,815880,df4cd4c55b74d7189ea02aceeaf6e88eab143d71,24,8,1,30002,,,0,"Revert ""In modify-image don't convert qcow2<->raw""

This reverts commit 1526ef8e529112b273d9aed5b97e140f84ccba2d.

Reason for revert: https://bugs.launchpad.net/tripleo/+bug/1949107

Change-Id: I9a08cde7a7e613ae4a37f3a0e0021f84f5db509b
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/80/815880/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/modify-image/tasks/manual.yml'],1,df4cd4c55b74d7189ea02aceeaf6e88eab143d71,bp/whole-disk-default," image_to_modify_raw: ""{{ image_to_modify_abs_path.stdout|replace('qcow2', 'raw') }}"" - name: Convert image shell: > set -eo pipefail; qemu-img convert -f qcow2 -O raw {{ image_to_modify_qcow }} {{ image_to_modify_raw }}; rm -rf ""{{ image_to_modify_qcow }}""; tripleo-mount-image -a {{ image_to_modify_raw }} -m {{ mount_tempdir }} qemu-nbd --format raw --connect /dev/nbd0 {{ image_to_modify_raw }} qemu-img convert -c -f raw -O qcow2 {{ image_to_modify_raw }} {{ image_to_modify_qcow }} rm -rf ""{{ image_to_modify_raw }}""", tripleo-mount-image -a {{ image_to_modify_qcow }} -m {{ mount_tempdir }} qemu-nbd --format raw --connect /dev/nbd0 {{ image_to_modify_qcow }},11,2
openstack%2Fneutron~master~Ia0a15e0a86e7b64a52db357c3cea6d701a12e066,openstack/neutron,master,Ia0a15e0a86e7b64a52db357c3cea6d701a12e066,Networking guide: Add Guaranteed Minimum Packet Rate,ABANDONED,2021-10-29 12:45:56.000000000,2021-10-29 12:49:33.000000000,,[],"[{'number': 1, 'created': '2021-10-29 12:45:56.000000000', 'files': ['doc/source/admin/config.rst', 'doc/source/admin/config-qos-min-pps.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/69d462caed7d36248f8958da3586bb068c8bbfba', 'message': 'Networking guide: Add Guaranteed Minimum Packet Rate\n\nAdd Neutron doc for the Guaranteed Minimum Packet Rate feature.\n\nCo-Authored-By: Balazs Gibizer <balazs.gibizer@est.tech>\nCo-Authored-By: Bence Romsics <bence.romsics@est.tech>\n\nPartial-Bug: #1922237\nSee-Also: https://review.opendev.org/785236\nChange-Id: I8bbd503488ae0997c0e5f33e0ef7709841c310b5\n\nChange-Id: Ia0a15e0a86e7b64a52db357c3cea6d701a12e066\n'}]",0,815959,69d462caed7d36248f8958da3586bb068c8bbfba,2,0,1,33652,,,0,"Networking guide: Add Guaranteed Minimum Packet Rate

Add Neutron doc for the Guaranteed Minimum Packet Rate feature.

Co-Authored-By: Balazs Gibizer <balazs.gibizer@est.tech>
Co-Authored-By: Bence Romsics <bence.romsics@est.tech>

Partial-Bug: #1922237
See-Also: https://review.opendev.org/785236
Change-Id: I8bbd503488ae0997c0e5f33e0ef7709841c310b5

Change-Id: Ia0a15e0a86e7b64a52db357c3cea6d701a12e066
",git fetch https://review.opendev.org/openstack/neutron refs/changes/59/815959/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/config.rst', 'doc/source/admin/config-qos-min-pps.rst']",2,69d462caed7d36248f8958da3586bb068c8bbfba,bp/qos-minimum-guaranteed-packet-rate,"Quality of Service (QoS): Guaranteed Minimum Packet Rate ======================================================== Similarly to how bandwidth can be a limiting factor of a network interface, packet processing capacity tend to be a limiting factor of the soft switching solutions like OVS. At the same time certain applications are dependent on not just guaranteed bandwidth, but also on guaranteed packet rate to function properly. OpenStack already supports bandwidth guarantees via the minimum bandwidth QoS policy rules, which is described in detail in :doc:`Quality of Service (QoS): Guaranteed Minimum Bandwidth <config-qos-min-bw>`. It's recommended to read Guaranteed Minimum Bandwidth guide first, but it's not strictly required. Just like :doc:`Quality of Service (QoS): Guaranteed Minimum Bandwidth <config-qos-min-bw>` guide, this chapter does not aim to replace Nova or Placement documentation in any way, but gives a brief overview of the feature and explains how it can be configured. In a similar way to guaranteed bandwidth, we can distinguish two levels of enforcement for guaranteeing packet processing capacity constraint: * placement: Avoiding over-subscription when placing (scheduling) VMs and their ports. * data plane: Enforcing the guarantee on the soft switch .. note:: At the time of writing this guide, only placement enforcement is supported. For detailed list of supported enforcement types and backends, please refer to :doc:`QoS configuration chapter of the Networking Guide <config-qos>`. The solution needs to differentiate between two different deployment scenarios: 1) The packet processing functionality is implemented on the compute host CPUs and therefore packets processed from both ingress and egress directions are handled by the same set of CPU cores. This is the case in the non-hardware-offloaded OVS deployments. In this scenario OVS represents a single packet processing resource pool, which is represented with a single resource class called ``NET_PACKET_RATE_KILOPACKET_PER_SEC``. 2) The packet processing functionality is implemented in a specialized hardware where the incoming and outgoing packets are handled by independent hardware resources. This is the case for hardware-offloaded OVS. In this scenario a single OVS has two independent resource pools one for the incoming packets and one for the outgoing packets. Therefore these needs to be represented with two different resource classes ``NET_PACKET_RATE_EGR_KILOPACKET_PER_SEC`` and ``NET_PACKET_RATE_IGR_KILOPACKET_PER_SEC``. Limitations ----------- Since Guaranteed Minimum Packet Rate and Guaranteed Minimum Bandwidth features have a lot in common, they also share certain limitations. * A pre-created port with a ``minimum-packet-rate`` rule must be passed when booting a server (``openstack server create``). Passing a network with a minimum-packet-rate rule at boot is not supported because of technical reasons (in this case the port is created too late for Neutron to affect scheduling). * Changing the guarantee of a QoS policy (adding/deleting a ``minimum_packet_rate`` rule, or changing the ``min_kpps`` field of a ``minimum_packet_rate`` rule) is only possible while the policy is not in effect. That is ports of the QoS policy are not yet bound by Nova. Requests to change guarantees of in-use policies are rejected. * Changing the QoS policy of the port with new ``minimum_packet_rate`` rules changes placement ``allocations`` from Yoga release. If the VM was booted with port without QoS policy and ``minimum_packet_rate`` rules the port update succeeds but placement allocations will not change. The same is true if the port had no allocation record in Placement before QoS policy update. But if the VM was booted with a port with QoS policy and ``minimum_packet_rate`` rules the update is possible and the allocations are changed in placement as well. .. note:: As it is possible to update a port to remove the QoS policy, updating it back to have QoS policy with ``minimum_packet_rate`` rule will not result in ``placement allocation`` record. In this case only dataplane enforcement will happen. .. note:: Updating the ``minimum_packet_rate`` rule of a QoS policy that is attached to a port which is bound to a VM is still not possible. * When QoS is used with a trunk, Placement enforcement is applied only to the trunk's parent port. Subports are not going to have Placement allocation. As a workaround, parent port QoS policy should take into account subports needs and request enough minimum packet rate resources to accommodate every port in the trunk. Placement pre-requisites ------------------------ Placement must support `microversion 1.36 <https://docs.openstack.org/placement/latest/placement-api-microversion-history.html#support-same-subtree-queryparam-on-get-allocation-candidates>`_. This was first released in Train. Nova pre-requisites ------------------- Nova must support top of `microversion 2.72 <https://docs.openstack.org/nova/latest/reference/api-microversion-history.html#maximum-in-stein>`_, additionally the Nova Xena release is needed to support the new ``port-resource-request-groups`` Neutron API extension. Not all Nova virt drivers are supported, please refer to the `Virt Driver Support section of the Nova Admin Guide <https://docs.openstack.org/nova/latest/admin/port_with_resource_request.html#virt-driver-support>`_. Neutron pre-requisites ---------------------- Neutron must support the following API extensions: * ``qos-pps-minimum`` * ``port-resource-request-groups`` These were all first released in Yoga. Neutron DB sanitization ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ The ``resource_request`` field of the Neutron port is used to express the resource needs of the port. The information in this field is calculated from the QoS policy rules attached to the port. Initially, only the minimum bandwidth rule was used as a source of requested resources. The format of ``resource_request`` looked like this: .. code-block:: console { ""required"": [<CUSTOM_PHYSNET_ traits>, <CUSTOM_VNIC_TYPE traits>], ""resources"": { <NET_BW_[E|I]GR_KILOBIT_PER_SEC resource class name>: <requested bandwidth amount from the QoS policy> } }, This structure allowed to describe only one group of resources and traits, which was sufficient at the time. However, with the introduction of QoS minimum packet rate rule, ports can now have multiple sources of requested resources and traits. Because of that, the format of ``resource_request`` field was incapable of expressing such request and it had to be changed. To solve this issue, ``port-resource-request-groups`` extension was added in Neutron Yoga release. It provides support for the new format of ``resource_request`` field, that allows to request multiple groups of resources and traits from the same RP subtree. The new format looks like this: .. code-block:: console { ""request_groups"": [ { ""id"": <min-pps-group-uuid> ""required"": [<CUSTOM_VNIC_TYPE traits>], ""resources"": { NET_PACKET_RATE_[E|I]GR_KILOPACKET_PER_SEC: <amount requested via the QoS policy> } }, { ""id"": <min-bw-group-uuid> ""required"": [<CUSTOM_PHYSNET_ traits>, <CUSTOM_VNIC_TYPE traits>], ""resources"": { <NET_BW_[E|I]GR_KILOBIT_PER_SEC resource class name>: <requested bandwidth amount from the QoS policy> } } ], ""same_subtree"": [ <min-pps-group-uuid>, <min-bw-group-uuid> ] } The main drawback about the new structure of ``resource_request`` field is lack of backwards compatibility. This can cause issues if ``ml2_port_bindings`` table in Neutron DB contains port bindings that were created before the introduction of ``port-resource-request-groups`` extension. Because ``port-resource-request-groups`` extension is enabled by default in Yoga release, it's necessary to perform DB sanitization before upgrading Neutron to Yoga. DB sanitization will ensure that every row of ``ml2_port_bindings`` table uses the new format. Upgrade check can be run before DB sanitization, to see if there are any rows in the DB that require sanitization. .. code-block:: console $ neutron-status upgrade check # If 'Port Binding profile sanity check' fails, DB sanitization is needed $ neutron-sanitize-port-binding-profile-allocation --config-file /etc/neutron/neutron.conf Supported drivers and agents ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ In release Yoga the following agent-based ML2 mechanism drivers are supported: * Open vSwitch (``openvswitch``) vnic_types: ``normal``, ``direct`` neutron-server config ~~~~~~~~~~~~~~~~~~~~~ QoS minimum packet rate rule requires exactly the same configuration in the ``neutron-server`` as QoS minimum bandwidth rule. Please refer to ``neutron-server config`` section of :doc:`Quality of Service (QoS): Guaranteed Minimum Bandwidth guide <config-qos-min-bw>` for more details. neutron-openvswitch-agent config ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Set the agent configuration as the authentic source of the resources available. Depending on OVS deployment type, packet processing capacity can be configured with: * :oslo.config:option:`ovs.resource_provider_packet_processing_without_direction` Format for this option is ``<hypervisor>:<packet_rate>``. This option should be used for non-hardware-offloaded OVS deployments. * :oslo.config:option:`ovs.resource_provider_packet_processing_with_direction` Format for this option is ``<hypervisor>:<egress_packet_rate>:<ingress_packet_rate>``. You may set only one direction and omit the other. This option should be used for hardware-offloaded OVS deployments. Regardless if direction-less or direction-oriented packet processing mode is used, configuration is always applied to the whole OVS instance. .. note:: ``egress`` / ``ingress`` is meant from the VM point of view. That is ``egress`` = cloud server upload, ``ingress`` = download. Egress and ingress available packet rate values are in ``kilo packet/sec (kpps)``. Direction-less and direction-oriented modes are mutually exclusive options. Only one can be used at a time. The hypervisor name is optional, and needs to be set only in the rare case cases. For more information, please refer to Neutron agent documentation. If desired, resource provider inventory fields can be tweaked on a per-agent basis by setting :oslo.config:option:`ovs.resource_provider_packet_processing_inventory_defaults`. Valid values are all the `optional parameters of the update resource provider inventory call <https://docs.openstack.org/api-ref/placement/?expanded=update-resource-provider-inventory-detail#update-resource-provider-inventory>`_. ``/etc/neutron/plugins/ml2/ovs_agent.ini`` (on compute and network nodes): .. code-block:: ini [ovs] resource_provider_packet_processing_with_direction = :10000000:10000000,... #resource_provider_packet_processing_inventory_defaults = step_size:1000,... Propagation of resource information ----------------------------------- Propagation of resource information is explained in detail in :doc:`Quality of Service (QoS): Guaranteed Minimum Bandwidth guide <config-qos-min-bw>`. Sample usage ------------ Network and QoS policies (together with their rules) are usually pre-created by a cloud admin: .. code-block:: console # as admin $ openstack network create net0 $ openstack subnet create subnet0 \ --network net0 \ --subnet-range 10.0.4.0/24 $ openstack network qos policy create policy0 $ openstack network qos rule create policy0 \ --type minimum-packet-rate \ --min-kpps 1000000 \ --egress $ openstack network qos rule create policy0 \ --type minimum-packet-rate \ --min-kpps 1000000 \ --ingress Then a normal user can use the pre-created policy to create ports and boot servers with those ports: .. code-block:: console # as an unprivileged user # an ordinary soft-switched port: ``--vnic-type normal`` is the default $ openstack port create port-normal-qos \ --network net0 \ --qos-policy policy0 $ openstack server create server0 \ --os-compute-api-version 2.72 \ --flavor cirros256 \ --image cirros-0.5.2-x86_64-disk \ --port port-normal-qos On Healing of Allocations ------------------------- Since Placement carries a global view of a cloud deployment's resources (what is available, what is used) it may in some conditions get out of sync with reality. One important case stems from OpenStack not having distributed transactions to allocate resources provided by multiple OpenStack components (here Nova and Neutron). There are known race conditions in which Placement's view may get out of sync with reality. The design knowingly minimizes the race condition windows, but there are known problems: * If a QoS policy is modified after Nova read a port's ``resource_request`` but before the port is bound its state before the modification will be applied. * If a bound port with a resource allocation is deleted. The port's allocation is leaked. `<https://bugs.launchpad.net/nova/+bug/1820588>`_ .. note:: Deleting a bound port has no known use case. Please consider detaching the interface first by ``openstack server remove port`` instead. Incorrect allocations may be fixed by: * Moving the server, which will delete the wrong allocation and create the correct allocation. Moving servers fixes local overallocations. * With `placement heal_allocations <https://docs.openstack.org/nova/latest/cli/nova-manage.html#placement-heal-allocations>`_ tool. * Manually, by using `openstack resource provider allocation set <https://docs.openstack.org/osc-placement/latest/cli/index.html#resource-provider-allocation-set>`_ /`delete <https://docs.openstack.org/osc-placement/latest/cli/index.html#resource-provider-allocation-delete>`_. Debugging --------- * Is Nova running at least Xena release and Neutron at least the Yoga release? * Are ``qos-pps-minimum`` and ``port-resource-request-groups`` extensions available? .. code-block:: console $ openstack extension show qos-pps-minimum $ openstack extension show port-resource-request-groups * Is the ``placement`` service plugin enabled in neutron-server? * Is ``resource_provider_packet_processing_with_direction`` or ``resource_provider_packet_processing_without_direction`` configured for the relevant neutron agent? * Was the agent restarted since changing the configuration file? * Is ``resource_provider_packet_processing_with_direction`` or ``resource_provider_packet_processing_without_direction`` reaching neutron-server? .. code-block:: console # as admin $ openstack network agent show ... -c configuration -f json Please find an example in section `Propagation of resource information`_. * Did neutron-server successfully sync to Placement? .. code-block:: console # as admin $ openstack network agent show ... | grep resources_synced Please find an example in section `Propagation of resource information`_. * Is the resource provider tree correct? Is the root a compute host? One level below the agents? .. code-block:: console $ openstack --os-placement-api-version 1.17 resource provider list +--------------------------------------+------------------------------------------+------------+--------------------------------------+--------------------------------------+ | uuid | name | generation | root_provider_uuid | parent_provider_uuid | +--------------------------------------+------------------------------------------+------------+--------------------------------------+--------------------------------------+ | 3b36d91e-bf60-460f-b1f8-3322dee5cdfd | devstack0 | 2 | 3b36d91e-bf60-460f-b1f8-3322dee5cdfd | None | | 89ca1421-5117-5348-acab-6d0e2054239c | devstack0:Open vSwitch agent | 0 | 3b36d91e-bf60-460f-b1f8-3322dee5cdfd | 3b36d91e-bf60-460f-b1f8-3322dee5cdfd | +--------------------------------------+------------------------------------------+------------+--------------------------------------+--------------------------------------+ * Does Placement have the expected traits? .. code-block:: console # as admin $ openstack --os-placement-api-version 1.17 trait list | awk '/CUSTOM_/ { print $2 }' | sort CUSTOM_VNIC_TYPE_NORMAL CUSTOM_VNIC_TYPE_SMART_NIC CUSTOM_VNIC_TYPE_VDPA * Do the OVS agent resource provider have the proper trait associations and inventories? .. code-block:: console # as admin $ openstack --os-placement-api-version 1.17 resource provider trait list <RP-UUID> $ openstack --os-placement-api-version 1.17 resource provider inventory list <RP-UUID> * Does the QoS policy have a ``minimum-packet-rate`` rule? * Does the port have the proper policy? * Does the port have a ``resource_request``? .. code-block:: console # as admin $ openstack port show port-normal-qos | grep resource_request * Was the server booted with a port (as opposed to a network)? * Did nova allocate resources for the server in Placement? .. code-block:: console # as admin $ openstack --os-placement-api-version 1.17 resource provider allocation show <SERVER-UUID> * Does the allocation have a part on the expected OVS agent resource provider? .. code-block:: console # as admin $ openstack --os-placement-api-version 1.17 resource provider show --allocations <RP-UUID> * Did placement manage to produce an allocation candidate list to nova during scheduling? * Did nova manage to schedule the server? * Did nova tell neutron which OVS agent resource provider was allocated to satisfy the packet rate request? .. code-block:: console # as admin $ openstack port show port-normal-qos | grep binding.profile.*allocation * Did neutron manage to bind the port? Links ----- * Nova documentation on using a port with ``resource_request`` * `API Guide <https://docs.openstack.org/api-guide/compute/port_with_resource_request.html>`_ * `Admin Guide <https://docs.openstack.org/nova/latest/admin/port_with_resource_request.html>`_ * Neutron spec: QoS minimum guaranteed packet rate * `on specs.openstack.org <https://specs.openstack.org/openstack/neutron-specs/specs/xena/qos-minimum-guaranteed-packet-rate.html>`__ * `on review.opendev.org <https://review.opendev.org/785236>`__ * Nova spec: QoS minimum guaranteed packet rate * `on specs.openstack.org <https://specs.openstack.org/openstack/nova-specs/specs/xena/approved/qos-minimum-guaranteed-packet-rate.html>`__ * `on review.opendev.org <https://review.opendev.org/785014>`__ * Relevant OpenStack Networking API references * https://docs.openstack.org/api-ref/network/v2/#agent-resources-synced-extension * https://docs.openstack.org/api-ref/network/v2/#port-resource-request * https://docs.openstack.org/api-ref/network/v2/#port-resource-request-groups * https://docs.openstack.org/api-ref/network/v2/#qos-minimum-packet-rate-rules * Microversion histories * `Compute 2.72 <https://docs.openstack.org/nova/latest/reference/api-microversion-history.html#maximum-in-stein>`_ * `Placement 1.36 <https://docs.openstack.org/placement/latest/placement-api-microversion-history.html#support-same-subtree-queryparam-on-get-allocation-candidates>`_ * Implementation * `on review.opendev.org <https://review.opendev.org/#/q/topic:bp/qos-minimum-guaranteed-packet-rate"">`_ * Known Bugs * `Bandwidth resource is leaked <https://bugs.launchpad.net/nova/+bug/1820588>`_ this issue also affects packet rate resources. ",,519,0
openstack%2Fsushy~master~I863fad54a9703c88aa92993ad0d48d18c50e492a,openstack/sushy,master,I863fad54a9703c88aa92993ad0d48d18c50e492a,Migrate common constants to enums,MERGED,2021-10-22 10:28:50.000000000,2021-10-29 12:35:21.000000000,2021-10-29 12:33:53.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 27909}]","[{'number': 1, 'created': '2021-10-22 10:28:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/290707c2d3fcb72dfca7086d21671ca73eaf8d9b', 'message': '[WIP] Migrate common constants to enums\n\nChange-Id: I863fad54a9703c88aa92993ad0d48d18c50e492a\n'}, {'number': 2, 'created': '2021-10-22 13:18:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/e343283a302c07324a25a2f5f87b91eff8d64c3e', 'message': '[WIP] Migrate common constants to enums\n\nChange-Id: I863fad54a9703c88aa92993ad0d48d18c50e492a\n'}, {'number': 3, 'created': '2021-10-25 12:56:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/98e0f9bf596e501d589773c325bac03677c4fa05', 'message': '[WIP] Migrate common constants to enums\n\nThe new enums are generated by a new script that reads the DMTF\ndefinitions and produced Python code in stdout. Missing items\nand docstrings are added because of that.\n\nChange-Id: I863fad54a9703c88aa92993ad0d48d18c50e492a\n'}, {'number': 4, 'created': '2021-10-26 11:04:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/800d9105833230ab8bb1be18ade66d724f8172d1', 'message': 'Migrate common constants to enums\n\nThe new enums are generated by a new script that reads the DMTF\ndefinitions and produced Python code in stdout. Missing items\nand docstrings are added because of that.\n\nThe change migrates everything from sushy.resources.constants except for\nProtocolType, which has to be untangled from other protocol-related\nenums.\n\nThis change also misses a release note. The intention is to create one\nfinal release note before the next release.\n\nChange-Id: I863fad54a9703c88aa92993ad0d48d18c50e492a\n'}, {'number': 5, 'created': '2021-10-27 09:10:22.000000000', 'files': ['sushy/tests/unit/resources/test_settings.py', 'sushy/tests/unit/resources/compositionservice/test_resourceblock.py', 'sushy/tests/unit/resources/system/test_bios.py', 'sushy/resources/constants.py', 'sushy/tests/unit/resources/system/storage/test_volume.py', 'sushy/resources/system/bios.py', 'sushy/tests/unit/resources/updateservice/test_updateservice.py', 'sushy/tests/unit/resources/registry/test_message_registry.py', 'sushy/tests/unit/resources/compositionservice/test_resourcezone.py', 'sushy/__init__.py', 'sushy/tests/unit/resources/system/test_simple_storage.py', 'sushy/resources/taskservice/task.py', 'sushy/tests/unit/resources/chassis/test_chassis.py', 'sushy/tests/unit/resources/chassis/test_thermal.py', 'sushy/resources/chassis/power/power.py', 'sushy/tests/unit/resources/taskservice/test_taskservice.py', 'doc/source/reference/usage.rst', 'sushy/resources/settings.py', 'sushy/tests/unit/resources/taskservice/test_task.py', 'sushy/tests/unit/resources/chassis/test_power.py', 'sushy/resources/common.py', 'sushy/resources/system/storage/volume.py', 'sushy/tests/unit/resources/system/storage/test_drive.py', 'sushy/resources/taskservice/mappings.py', 'sushy/resources/chassis/chassis.py', 'sushy/tests/unit/resources/eventservice/test_eventservice.py', 'sushy/tests/unit/resources/fabric/test_fabric.py', 'sushy/tests/unit/resources/system/test_ethernet_interfaces.py', 'sushy/tests/unit/resources/system/test_processor.py', 'sushy/resources/chassis/thermal/thermal.py', 'sushy/resources/system/ethernet_interface.py', 'sushy/resources/base.py', 'sushy/resources/registry/message_registry.py', 'sushy/resources/system/constants.py', 'sushy/resources/system/storage/drive.py', 'sushy/resources/taskservice/constants.py', 'sushy/resources/mappings.py', 'sushy/resources/system/system.py', 'sushy/tests/unit/resources/system/test_system.py', 'sushy/resources/system/simple_storage.py', 'sushy/tests/unit/resources/system/storage/test_storage.py', 'sushy/tests/unit/resources/updateservice/test_softwareinventory.py', 'sushy/tests/unit/resources/compositionservice/test_compositionservice.py', 'sushy/resources/manager/constants.py', 'sushy/resources/registry/constants.py', 'sushy/resources/system/mappings.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/559e3ed4c4741def8b8adfce1201aae0759943b9', 'message': 'Migrate common constants to enums\n\nThe new enums are generated by a new script that reads the DMTF\ndefinitions and produced Python code in stdout. Missing items\nand docstrings are added because of that.\n\nThe change migrates everything from sushy.resources.constants except for\nProtocolType, which has to be untangled from other protocol-related\nenums.\n\nThis change also misses a release note. The intention is to create one\nfinal release note before the next release.\n\nChange-Id: I863fad54a9703c88aa92993ad0d48d18c50e492a\n'}]",2,815107,559e3ed4c4741def8b8adfce1201aae0759943b9,30,4,5,10239,,,0,"Migrate common constants to enums

The new enums are generated by a new script that reads the DMTF
definitions and produced Python code in stdout. Missing items
and docstrings are added because of that.

The change migrates everything from sushy.resources.constants except for
ProtocolType, which has to be untangled from other protocol-related
enums.

This change also misses a release note. The intention is to create one
final release note before the next release.

Change-Id: I863fad54a9703c88aa92993ad0d48d18c50e492a
",git fetch https://review.opendev.org/openstack/sushy refs/changes/07/815107/4 && git format-patch -1 --stdout FETCH_HEAD,"['sushy/tests/unit/resources/chassis/test_power.py', 'sushy/resources/common.py', 'sushy/resources/mappings.py', 'sushy/resources/constants.py', 'sushy/resources/taskservice/task.py', 'sushy/tests/unit/resources/eventservice/test_eventservice.py', 'sushy/tests/unit/resources/system/storage/test_storage.py', 'sushy/tests/unit/resources/chassis/test_thermal.py']",8,290707c2d3fcb72dfca7086d21671ca73eaf8d9b,enum-common,"from sushy.resources import constants as res_cons self.assertEqual(res_cons.State.ENABLED, self.thermal.fans[0].status.state) self.assertEqual(res_cons.Health.OK, self.thermal.fans[0].status.health) self.assertEqual(res_cons.State.ENABLED, self.thermal.temperatures[0].status.state) self.assertEqual(res_cons.Health.OK, self.thermal.temperatures[0].status.health) {'health': res_cons.Health.OK, 'health_rollup': None, 'state': res_cons.State.ENABLED}, 'status': {'health': res_cons.Health.OK, 'health_rollup': None, 'state': res_cons.State.ENABLED},"," self.assertEqual('enabled', self.thermal.fans[0].status.state) self.assertEqual('ok', self.thermal.fans[0].status.health) self.assertEqual('enabled', self.thermal.temperatures[0].status.state) self.assertEqual('ok', self.thermal.temperatures[0].status.health) {'health': 'ok', 'health_rollup': None, 'state': 'enabled'}, 'status': {'health': 'ok', 'health_rollup': None, 'state': 'enabled'},",91,65
openstack%2Fpuppet-manila~stable%2Fwallaby~I62eb4815320c36a37be6f8b10d35f236417a103f,openstack/puppet-manila,stable/wallaby,I62eb4815320c36a37be6f8b10d35f236417a103f,Add ability to configure backend availability zones,ABANDONED,2021-10-27 20:10:04.000000000,2021-10-29 12:18:24.000000000,,"[{'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 20:10:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-manila/commit/014810356d40f3fd76a2c6d979f54501ae37e6ae', 'message': 'Add ability to configure backend availability zones\n\nAdd new ""backend_availability_zone"" parameter to every share\nbackend. The parameters are optional, and when set they override the\nDEFAULT/storage_availability_zone for the corresponding backend.\n\n(cherry picked from commit Ie7af8408fe8cec9349593fd9b4cb5bc7deb565cd)\nChange-Id: I62eb4815320c36a37be6f8b10d35f236417a103f\n'}, {'number': 2, 'created': '2021-10-28 15:34:22.000000000', 'files': ['releasenotes/notes/add-share-backend-availability-zone-parameters-1bcf6b1066dc82cf.yaml', 'manifests/backend/generic.pp', 'spec/defines/manila_backend_dellemc_vnx_spec.rb', 'manifests/backend/hitachi_hnas.pp', 'spec/defines/manila_backend_glusterfs_spec.rb', 'manifests/backend/dellemc_vnx.pp', 'manifests/backend/cephfs.pp', 'spec/defines/manila_backend_cephfs_spec.rb', 'spec/defines/manila_backend_glusternfs_spec.rb', 'manifests/backend/glusterfs.pp', 'spec/defines/manila_backend_netapp_spec.rb', 'manifests/backend/netapp.pp', 'spec/defines/manila_backend_dellemc_isilon_spec.rb', 'manifests/backend/dellemc_unity.pp', 'spec/defines/manila_backend_generic_spec.rb', 'spec/defines/manila_backend_dellemc_unity_spec.rb', 'manifests/backend/dellemc_isilon.pp', 'manifests/backend/glusternfs.pp', 'spec/defines/manila_backend_glusternative_spec.rb', 'manifests/backend/dellemc_vmax.pp', 'spec/defines/manila_backend_hitachi_hnas_spec.rb', 'manifests/backend/glusternative.pp', 'spec/defines/manila_backend_dellemc_vmax_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-manila/commit/54758e526f224f7429dd81db3c56651a6a80154c', 'message': 'Add ability to configure backend availability zones\n\nAdd new ""backend_availability_zone"" parameter to every share\nbackend. The parameters are optional, and when set they override the\nDEFAULT/storage_availability_zone for the corresponding backend.\n\nThe changes were adapted to solve conflitant modifications in few\nfiles.\n\n(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)\n\nChange-Id: I62eb4815320c36a37be6f8b10d35f236417a103f\n'}]",15,815743,54758e526f224f7429dd81db3c56651a6a80154c,12,2,2,29632,,,0,"Add ability to configure backend availability zones

Add new ""backend_availability_zone"" parameter to every share
backend. The parameters are optional, and when set they override the
DEFAULT/storage_availability_zone for the corresponding backend.

The changes were adapted to solve conflitant modifications in few
files.

(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)

Change-Id: I62eb4815320c36a37be6f8b10d35f236417a103f
",git fetch https://review.opendev.org/openstack/puppet-manila refs/changes/43/815743/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/add-share-backend-availability-zone-parameters-1bcf6b1066dc82cf.yaml', 'manifests/backend/generic.pp', 'spec/defines/manila_backend_dellemc_vnx_spec.rb', 'manifests/backend/hitachi_hnas.pp', 'spec/defines/manila_backend_glusterfs_spec.rb', 'manifests/backend/dellemc_vnx.pp', 'manifests/backend/cephfs.pp', 'spec/defines/manila_backend_cephfs_spec.rb', 'spec/defines/manila_backend_glusternfs_spec.rb', 'manifests/backend/glusterfs.pp', 'spec/defines/manila_backend_netapp_spec.rb', 'manifests/backend/netapp.pp', 'spec/defines/manila_backend_dellemc_isilon_spec.rb', 'manifests/backend/dellemc_unity.pp', 'spec/defines/manila_backend_generic_spec.rb', 'spec/defines/manila_backend_dellemc_unity_spec.rb', 'manifests/backend/dellemc_isilon.pp', 'manifests/backend/glusternfs.pp', 'spec/defines/manila_backend_glusternative_spec.rb', 'manifests/backend/dellemc_vmax.pp', 'spec/defines/manila_backend_hitachi_hnas_spec.rb', 'manifests/backend/glusternative.pp', 'spec/defines/manila_backend_dellemc_vmax_spec.rb']",23,014810356d40f3fd76a2c6d979f54501ae37e6ae,," :vmax_server_container => '<SERVICE DEFAULT>', :vmax_share_data_pools => '<SERVICE DEFAULT>', :vmax_ethernet_ports => '<SERVICE DEFAULT>', :backend_availability_zone => '<SERVICE DEFAULT>',"," :vmax_server_container => '<SERVICE DEFAULT>', :vmax_share_data_pools => '<SERVICE DEFAULT>', :vmax_ethernet_ports => '<SERVICE DEFAULT>',",122,10
openstack%2Ftripleo-quickstart~master~I304a4af62c8effd95cca5859113b4a04d25db943,openstack/tripleo-quickstart,master,I304a4af62c8effd95cca5859113b4a04d25db943,[EL9]Install dbus-daemon on the host,ABANDONED,2021-10-28 16:01:02.000000000,2021-10-29 12:07:34.000000000,,"[{'_account_id': 6796}, {'_account_id': 13861}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2021-10-28 16:01:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/b2da1ee8e6aa887e17212b3ccd55c853b502965e', 'message': '[EL9]Install dbus-daemon on the host\n\ndbus-daemon is used by manila container as it is mounted in\nthe ceph-nfs container [1]\nhttps://github.com/openstack/tripleo-ansible/blob/master/tripleo_ansible/roles/tripleo_cephadm/templates/ceph-nfs.service.j2#L27.\n\nand it needs to be installed on the host so that it can work.\n\nRelated-Bug: #1949033\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: I304a4af62c8effd95cca5859113b4a04d25db943\n'}, {'number': 2, 'created': '2021-10-29 07:38:56.000000000', 'files': ['config/release/tripleo-ci/CentOS-9/promotion-testing-hash-master.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/13b8a607888ca7ba54344e5104c191d9ac2710a3', 'message': '[EL9]Install dbus-daemon on the host\n\ndbus-daemon is used by manila container as it is mounted in\nthe ceph-nfs container [1]\nhttps://github.com/openstack/tripleo-ansible/blob/master/tripleo_ansible/roles/tripleo_cephadm/templates/ceph-nfs.service.j2#L27.\n\nand it needs to be installed on the host so that it can work.\n\nRelated-Bug: #1949033\n\nChange-Id: I304a4af62c8effd95cca5859113b4a04d25db943\n'}]",11,815863,13b8a607888ca7ba54344e5104c191d9ac2710a3,20,6,2,12393,,,0,"[EL9]Install dbus-daemon on the host

dbus-daemon is used by manila container as it is mounted in
the ceph-nfs container [1]
https://github.com/openstack/tripleo-ansible/blob/master/tripleo_ansible/roles/tripleo_cephadm/templates/ceph-nfs.service.j2#L27.

and it needs to be installed on the host so that it can work.

Related-Bug: #1949033

Change-Id: I304a4af62c8effd95cca5859113b4a04d25db943
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/63/815863/2 && git format-patch -1 --stdout FETCH_HEAD,['config/release/tripleo-ci/CentOS-9/promotion-testing-hash-master.yml'],1,b2da1ee8e6aa887e17212b3ccd55c853b502965e,cs9, # TODO(chandan): in order to fix https://bugs.launchpad.net/tripleo/+bug/1949033 # Need dbus-daemon for standalone scenario004 on the host to interact with # Manila sudo dnf -y install dbus-daemon;,,4,0
openstack%2Fpuppet-openstack-integration~stable%2Frocky~I8f6853152a83fd0c867ea2b78b62d6ec3f179e16,openstack/puppet-openstack-integration,stable/rocky,I8f6853152a83fd0c867ea2b78b62d6ec3f179e16,Install setuptools and pip in Ubuntu,ABANDONED,2021-02-02 14:48:06.000000000,2021-10-29 12:06:14.000000000,,"[{'_account_id': 9816}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-02-02 14:48:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/c6634f487d28d8220ceae3ebe39facc7361ae66d', 'message': 'Install setuptools in Ubuntu\n\n... to avoid the following erorr when setting up tempest in integration\njobs.\n\n+ sudo -E python setup.py install\nTraceback (most recent call last):\n  File ""setup.py"", line 16, in <module>\n    import setuptools\nImportError: No module named setuptools\n\nChange-Id: I8f6853152a83fd0c867ea2b78b62d6ec3f179e16\n'}, {'number': 2, 'created': '2021-02-02 16:19:32.000000000', 'files': ['run_tests.sh'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/2081e063d4764404db5d38a78008421ce276b3c1', 'message': 'Install setuptools and pip in Ubuntu\n\nThese two packages are required to install tempest-horizon but no\nlonger included in the base CI image.\n\nChange-Id: I8f6853152a83fd0c867ea2b78b62d6ec3f179e16\n'}]",0,773700,2081e063d4764404db5d38a78008421ce276b3c1,7,3,2,9816,,,0,"Install setuptools and pip in Ubuntu

These two packages are required to install tempest-horizon but no
longer included in the base CI image.

Change-Id: I8f6853152a83fd0c867ea2b78b62d6ec3f179e16
",git fetch https://review.opendev.org/openstack/puppet-openstack-integration refs/changes/00/773700/1 && git format-patch -1 --stdout FETCH_HEAD,['run_tests.sh'],1,c6634f487d28d8220ceae3ebe39facc7361ae66d,setuptools, $SUDO apt-get install -y python-setuptools,,1,0
openstack%2Fpuppet-neutron~stable%2Frocky~I87dba40544a76991f5fa16705ab1af00f75e5dc9,openstack/puppet-neutron,stable/rocky,I87dba40544a76991f5fa16705ab1af00f75e5dc9,Support arbitrary configurations for ovs agent and sriov agent,ABANDONED,2021-10-28 08:20:57.000000000,2021-10-29 12:05:26.000000000,,"[{'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 08:20:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/3ade34be088b02c1ce21e506bd79ce30fad84011', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n(cherry picked from commit 67ed6018e11e57f48e7eaabbb7ef6fa21b634ea5)\n'}, {'number': 2, 'created': '2021-10-28 08:38:08.000000000', 'files': ['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/d0adf7836a26b502302434d1c2a9d4ad2386270e', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)\n(cherry picked from commit 817d45342ad21148efdc365fd3e998e1e0bbab7c)\n(cherry picked from commit 9b9945773150520f1370c6dfbd7cd8b67a9f35ac)\n'}]",2,815786,d0adf7836a26b502302434d1c2a9d4ad2386270e,7,2,2,13861,,,0,"Support arbitrary configurations for ovs agent and sriov agent

This patch introduces new parameters to the neutron::config class,
to allow us to add arbitary configurations into openvswitch_agent.ini
and sriov_agent.ini .

Conflicts:
    manifests/config.pp
    spec/classes/neutron_config_spec.rb

Change-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9
(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)
(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)
(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)
(cherry picked from commit 817d45342ad21148efdc365fd3e998e1e0bbab7c)
(cherry picked from commit 9b9945773150520f1370c6dfbd7cd8b67a9f35ac)
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/86/815786/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp']",3,3ade34be088b02c1ce21e506bd79ce30fad84011,,"# [*ovs_agent_config*] # (optional) Manage configuration of openvswitch_agent.ini # # [*sriov_agent_config*] # (optional) Manage configuration of sriov_agent.ini # $ovs_agent_config = {}, $sriov_agent_config = {}, validate_hash($ovs_agent_config) validate_hash($sriov_agent_config) create_resources('neutron_agent_ovs', $ovs_agent_config) create_resources('neutron_sriov_agent_config', $sriov_agent_config)",,36,1
openstack%2Fpuppet-neutron~stable%2Fqueens~I87dba40544a76991f5fa16705ab1af00f75e5dc9,openstack/puppet-neutron,stable/queens,I87dba40544a76991f5fa16705ab1af00f75e5dc9,Support arbitrary configurations for ovs agent and sriov agent,ABANDONED,2021-10-28 08:23:33.000000000,2021-10-29 12:05:22.000000000,,"[{'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 08:23:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/257df45799576bf8bdfd7dde36f4889a8629cb01', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n(cherry picked from commit 67ed6018e11e57f48e7eaabbb7ef6fa21b634ea5)\n'}, {'number': 2, 'created': '2021-10-28 08:38:35.000000000', 'files': ['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/c77ee331567749f596031a3f755dd18f244fb313', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)\n(cherry picked from commit 817d45342ad21148efdc365fd3e998e1e0bbab7c)\n(cherry picked from commit 9b9945773150520f1370c6dfbd7cd8b67a9f35ac)\n(cherry picked from commit d0adf7836a26b502302434d1c2a9d4ad2386270e)\n'}]",0,815797,c77ee331567749f596031a3f755dd18f244fb313,4,2,2,13861,,,0,"Support arbitrary configurations for ovs agent and sriov agent

This patch introduces new parameters to the neutron::config class,
to allow us to add arbitary configurations into openvswitch_agent.ini
and sriov_agent.ini .

Conflicts:
    manifests/config.pp
    spec/classes/neutron_config_spec.rb

Change-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9
(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)
(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)
(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)
(cherry picked from commit 817d45342ad21148efdc365fd3e998e1e0bbab7c)
(cherry picked from commit 9b9945773150520f1370c6dfbd7cd8b67a9f35ac)
(cherry picked from commit d0adf7836a26b502302434d1c2a9d4ad2386270e)
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/97/815797/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp']",3,257df45799576bf8bdfd7dde36f4889a8629cb01,,"# [*ovs_agent_config*] # (optional) Manage configuration of openvswitch_agent.ini # # [*sriov_agent_config*] # (optional) Manage configuration of sriov_agent.ini # $ovs_agent_config = {}, $sriov_agent_config = {}, validate_hash($ovs_agent_config) validate_hash($sriov_agent_config) create_resources('neutron_agent_ovs', $ovs_agent_config) create_resources('neutron_sriov_agent_config', $sriov_agent_config)",,36,1
openstack%2Fpuppet-neutron~stable%2Fstein~I87dba40544a76991f5fa16705ab1af00f75e5dc9,openstack/puppet-neutron,stable/stein,I87dba40544a76991f5fa16705ab1af00f75e5dc9,Support arbitrary configurations for ovs agent and sriov agent,ABANDONED,2021-10-28 08:13:22.000000000,2021-10-29 12:05:14.000000000,,"[{'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 08:13:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/67ed6018e11e57f48e7eaabbb7ef6fa21b634ea5', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n'}, {'number': 2, 'created': '2021-10-28 08:35:51.000000000', 'files': ['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/9b9945773150520f1370c6dfbd7cd8b67a9f35ac', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)\n(cherry picked from commit 817d45342ad21148efdc365fd3e998e1e0bbab7c)\n'}]",0,815796,9b9945773150520f1370c6dfbd7cd8b67a9f35ac,4,2,2,13861,,,0,"Support arbitrary configurations for ovs agent and sriov agent

This patch introduces new parameters to the neutron::config class,
to allow us to add arbitary configurations into openvswitch_agent.ini
and sriov_agent.ini .

Conflicts:
    manifests/config.pp
    spec/classes/neutron_config_spec.rb

Change-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9
(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)
(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)
(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)
(cherry picked from commit 817d45342ad21148efdc365fd3e998e1e0bbab7c)
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/96/815796/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp']",3,67ed6018e11e57f48e7eaabbb7ef6fa21b634ea5,,"# [*ovs_agent_config*] # (optional) Manage configuration of openvswitch_agent.ini # # [*sriov_agent_config*] # (optional) Manage configuration of sriov_agent.ini # $ovs_agent_config = {}, $sriov_agent_config = {}, validate_legacy(Hash, 'validate_hash', $ovs_agent_config) validate_legacy(Hash, 'validate_hash', $sriov_agent_config) create_resources('neutron_agent_ovs', $ovs_agent_config) create_resources('neutron_sriov_agent_config', $sriov_agent_config)",,36,1
openstack%2Fkolla-ansible~stable%2Fwallaby~I584c588c20781e6c6567429811aecf97967baea3,openstack/kolla-ansible,stable/wallaby,I584c588c20781e6c6567429811aecf97967baea3,Use Docker healthchecks for nova-spicehtml5proxy service,MERGED,2021-08-29 10:17:04.000000000,2021-10-29 11:52:25.000000000,2021-10-29 11:48:56.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-08-29 10:17:04.000000000', 'files': ['ansible/roles/nova-cell/defaults/main.yml', 'releasenotes/notes/implement-docker-healthchecks-for-nova-spicehtml5proxy-a9cf93c15c0a8966.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7755ef65d15eecd90b18d05a887ac768b1857ae9', 'message': 'Use Docker healthchecks for nova-spicehtml5proxy service\n\nThis change enables the use of Docker healthchecks for\nnova-spicehtml5proxy service.\n\nImplements: blueprint container-health-check\nChange-Id: I584c588c20781e6c6567429811aecf97967baea3\n(cherry picked from commit 2b599bdb83dd849927eccbb934db5badd7954af0)\n'}]",0,806389,7755ef65d15eecd90b18d05a887ac768b1857ae9,12,3,1,27339,,,0,"Use Docker healthchecks for nova-spicehtml5proxy service

This change enables the use of Docker healthchecks for
nova-spicehtml5proxy service.

Implements: blueprint container-health-check
Change-Id: I584c588c20781e6c6567429811aecf97967baea3
(cherry picked from commit 2b599bdb83dd849927eccbb934db5badd7954af0)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/89/806389/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/nova-cell/defaults/main.yml', 'releasenotes/notes/implement-docker-healthchecks-for-nova-spicehtml5proxy-a9cf93c15c0a8966.yaml']",2,7755ef65d15eecd90b18d05a887ac768b1857ae9,nova-spicehtml5proxy-healthcheck-stable/wallaby,--- features: - | Implements container healthchecks for nova-spicehtml5proxy service. See `blueprint <https://blueprints.launchpad.net/kolla-ansible/+spec/container-health-check>`__ ,,20,0
openstack%2Fkolla-ansible~stable%2Fussuri~I8bb398e299aa68147004723a18d3a1ec459011e5,openstack/kolla-ansible,stable/ussuri,I8bb398e299aa68147004723a18d3a1ec459011e5,Do not set net.ipv4.ip_forward sysctl,MERGED,2021-10-11 12:07:20.000000000,2021-10-29 11:52:11.000000000,2021-10-29 11:48:49.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30523}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-11 12:07:20.000000000', 'files': ['releasenotes/notes/bug-1945453-c410cc090cb85feb.yaml', 'ansible/roles/neutron/tasks/config-host.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/efb580ef8adb7b8025c504a4686087c5194dc480', 'message': 'Do not set net.ipv4.ip_forward sysctl\n\nTo prevent a security issue.\nMore details in the reno.\n\nChange-Id: I8bb398e299aa68147004723a18d3a1ec459011e5\nCloses-Bug: #1945453\n(cherry picked from commit 1bfed045cf13488d0e42b7bf1edcbcd119417fc1)\n'}]",0,813336,efb580ef8adb7b8025c504a4686087c5194dc480,10,4,1,30491,,,0,"Do not set net.ipv4.ip_forward sysctl

To prevent a security issue.
More details in the reno.

Change-Id: I8bb398e299aa68147004723a18d3a1ec459011e5
Closes-Bug: #1945453
(cherry picked from commit 1bfed045cf13488d0e42b7bf1edcbcd119417fc1)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/36/813336/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1945453-c410cc090cb85feb.yaml', 'ansible/roles/neutron/tasks/config-host.yml']",2,efb580ef8adb7b8025c504a4686087c5194dc480,bug/1945453-stable/wallaby-stable/victoria-stable/ussuri,," - { name: ""net.ipv4.ip_forward"", value: 1}",16,1
openstack%2Fkolla-ansible~stable%2Fvictoria~I8bb398e299aa68147004723a18d3a1ec459011e5,openstack/kolla-ansible,stable/victoria,I8bb398e299aa68147004723a18d3a1ec459011e5,Do not set net.ipv4.ip_forward sysctl,MERGED,2021-10-11 12:07:11.000000000,2021-10-29 11:52:06.000000000,2021-10-29 11:48:52.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30523}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-11 12:07:11.000000000', 'files': ['releasenotes/notes/bug-1945453-c410cc090cb85feb.yaml', 'ansible/roles/neutron/tasks/config-host.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/fa3c7251456afa142f7223319a0b8cb936b5ca18', 'message': 'Do not set net.ipv4.ip_forward sysctl\n\nTo prevent a security issue.\nMore details in the reno.\n\nChange-Id: I8bb398e299aa68147004723a18d3a1ec459011e5\nCloses-Bug: #1945453\n(cherry picked from commit 1bfed045cf13488d0e42b7bf1edcbcd119417fc1)\n'}]",0,813335,fa3c7251456afa142f7223319a0b8cb936b5ca18,10,4,1,30491,,,0,"Do not set net.ipv4.ip_forward sysctl

To prevent a security issue.
More details in the reno.

Change-Id: I8bb398e299aa68147004723a18d3a1ec459011e5
Closes-Bug: #1945453
(cherry picked from commit 1bfed045cf13488d0e42b7bf1edcbcd119417fc1)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/35/813335/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1945453-c410cc090cb85feb.yaml', 'ansible/roles/neutron/tasks/config-host.yml']",2,fa3c7251456afa142f7223319a0b8cb936b5ca18,bug/1945453-stable/wallaby-stable/victoria,," - { name: ""net.ipv4.ip_forward"", value: 1}",16,1
openstack%2Fkolla-ansible~stable%2Fwallaby~Idd525fda7ff94f70794f4c582cd74470c7f40fae,openstack/kolla-ansible,stable/wallaby,Idd525fda7ff94f70794f4c582cd74470c7f40fae,Do not enable mariadb-clustercheck when not needed,MERGED,2021-10-05 10:10:17.000000000,2021-10-29 11:51:11.000000000,2021-10-29 11:48:46.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-05 10:10:17.000000000', 'files': ['releasenotes/notes/bug-1944114-fa2a266c014c64a9.yaml', 'ansible/roles/mariadb/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b08c32e407b3eba16f34e0ae1bf4a35f9fd3966e', 'message': 'Do not enable mariadb-clustercheck when not needed\n\nCloses-Bug: #1944114\nChange-Id: Idd525fda7ff94f70794f4c582cd74470c7f40fae\n(cherry picked from commit 2cf9ae2cf5680046c6e3396bbf8e24ef29c6a1f9)\n'}]",0,812438,b08c32e407b3eba16f34e0ae1bf4a35f9fd3966e,10,4,1,30491,,,0,"Do not enable mariadb-clustercheck when not needed

Closes-Bug: #1944114
Change-Id: Idd525fda7ff94f70794f4c582cd74470c7f40fae
(cherry picked from commit 2cf9ae2cf5680046c6e3396bbf8e24ef29c6a1f9)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/38/812438/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1944114-fa2a266c014c64a9.yaml', 'ansible/roles/mariadb/defaults/main.yml']",2,b08c32e407b3eba16f34e0ae1bf4a35f9fd3966e,bug/1944114-stable/wallaby,"enable_mariadb_clustercheck: ""{{ enable_haproxy }}""","enable_mariadb_clustercheck: ""yes""",6,1
openstack%2Fkolla-ansible~stable%2Fvictoria~I252ffaf73dd2a649387ddacc73286b49f36dfdf2,openstack/kolla-ansible,stable/victoria,I252ffaf73dd2a649387ddacc73286b49f36dfdf2,Fix broken deploy of placement service,MERGED,2021-10-28 16:46:44.000000000,2021-10-29 11:50:50.000000000,2021-10-29 11:48:38.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23871}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-28 16:46:44.000000000', 'files': ['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/0050062c8225c8be2b9177171e570731ec2bf9d5', 'message': ""Fix broken deploy of placement service\n\nCorrect typo in role's playbook in order to be able to deploy\nthe service with customized policy file.\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\nCloses-Bug: #1948835\n(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)\n""}]",0,815877,0050062c8225c8be2b9177171e570731ec2bf9d5,10,4,1,30491,,,0,"Fix broken deploy of placement service

Correct typo in role's playbook in order to be able to deploy
the service with customized policy file.

Change-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2
Closes-Bug: #1948835
(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/77/815877/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml']",2,0050062c8225c8be2b9177171e570731ec2bf9d5,," dest: ""{{ node_config_directory }}/{{ item.key }}/{{ placement_policy_file }}"""," dest: ""{{ placement_config_directory }}/{{ item.key }}/{{ placement_policy_file }}""",7,1
openstack%2Fkolla-ansible~stable%2Fussuri~Idd525fda7ff94f70794f4c582cd74470c7f40fae,openstack/kolla-ansible,stable/ussuri,Idd525fda7ff94f70794f4c582cd74470c7f40fae,Do not enable mariadb-clustercheck when not needed,MERGED,2021-10-05 10:27:44.000000000,2021-10-29 11:50:46.000000000,2021-10-29 11:48:41.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-05 10:27:44.000000000', 'files': ['releasenotes/notes/bug-1944114-fa2a266c014c64a9.yaml', 'ansible/roles/mariadb/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7a55c46ee0648d6e12c0b579fa655968768999b9', 'message': 'Do not enable mariadb-clustercheck when not needed\n\nCloses-Bug: #1944114\nChange-Id: Idd525fda7ff94f70794f4c582cd74470c7f40fae\n(cherry picked from commit 2cf9ae2cf5680046c6e3396bbf8e24ef29c6a1f9)\n'}]",0,812440,7a55c46ee0648d6e12c0b579fa655968768999b9,10,4,1,30491,,,0,"Do not enable mariadb-clustercheck when not needed

Closes-Bug: #1944114
Change-Id: Idd525fda7ff94f70794f4c582cd74470c7f40fae
(cherry picked from commit 2cf9ae2cf5680046c6e3396bbf8e24ef29c6a1f9)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/40/812440/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1944114-fa2a266c014c64a9.yaml', 'ansible/roles/mariadb/defaults/main.yml']",2,7a55c46ee0648d6e12c0b579fa655968768999b9,bug/1944114-stable/wallaby-stable/victoria-stable/ussuri,"enable_mariadb_clustercheck: ""{{ enable_haproxy }}""","enable_mariadb_clustercheck: ""yes""",6,1
openstack%2Fkolla-ansible~stable%2Fwallaby~I8bb398e299aa68147004723a18d3a1ec459011e5,openstack/kolla-ansible,stable/wallaby,I8bb398e299aa68147004723a18d3a1ec459011e5,Do not set net.ipv4.ip_forward sysctl,MERGED,2021-10-11 12:07:03.000000000,2021-10-29 11:48:54.000000000,2021-10-29 11:48:54.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 27339}, {'_account_id': 30523}]","[{'number': 1, 'created': '2021-10-11 12:07:03.000000000', 'files': ['releasenotes/notes/bug-1945453-c410cc090cb85feb.yaml', 'ansible/roles/neutron/tasks/config-host.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/9c4887ae6508c3a2e9d738efa3a16ff6e4b8203d', 'message': 'Do not set net.ipv4.ip_forward sysctl\n\nTo prevent a security issue.\nMore details in the reno.\n\nChange-Id: I8bb398e299aa68147004723a18d3a1ec459011e5\nCloses-Bug: #1945453\n(cherry picked from commit 1bfed045cf13488d0e42b7bf1edcbcd119417fc1)\n'}]",2,813334,9c4887ae6508c3a2e9d738efa3a16ff6e4b8203d,11,4,1,30491,,,0,"Do not set net.ipv4.ip_forward sysctl

To prevent a security issue.
More details in the reno.

Change-Id: I8bb398e299aa68147004723a18d3a1ec459011e5
Closes-Bug: #1945453
(cherry picked from commit 1bfed045cf13488d0e42b7bf1edcbcd119417fc1)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/34/813334/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1945453-c410cc090cb85feb.yaml', 'ansible/roles/neutron/tasks/config-host.yml']",2,9c4887ae6508c3a2e9d738efa3a16ff6e4b8203d,bug/1945453-stable/wallaby,," - { name: ""net.ipv4.ip_forward"", value: 1}",16,1
openstack%2Fkolla-ansible~stable%2Fvictoria~Idd525fda7ff94f70794f4c582cd74470c7f40fae,openstack/kolla-ansible,stable/victoria,Idd525fda7ff94f70794f4c582cd74470c7f40fae,Do not enable mariadb-clustercheck when not needed,MERGED,2021-10-05 10:12:16.000000000,2021-10-29 11:48:44.000000000,2021-10-29 11:48:44.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 32029}]","[{'number': 1, 'created': '2021-10-05 10:12:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/4d26f10429605d5f5c7ca59e46db8d36cfed8257', 'message': 'Do not enable mariadb-clustercheck when not needed\n\nCloses-Bug: #1944114\nChange-Id: Idd525fda7ff94f70794f4c582cd74470c7f40fae\n(cherry picked from commit 2cf9ae2cf5680046c6e3396bbf8e24ef29c6a1f9)\n'}, {'number': 2, 'created': '2021-10-05 10:12:42.000000000', 'files': ['releasenotes/notes/bug-1944114-fa2a266c014c64a9.yaml', 'ansible/roles/mariadb/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/4eaeb63988f443493c1ec564bc4e84d08dd1c3e3', 'message': 'Do not enable mariadb-clustercheck when not needed\n\nCloses-Bug: #1944114\nChange-Id: Idd525fda7ff94f70794f4c582cd74470c7f40fae\n(cherry picked from commit 2cf9ae2cf5680046c6e3396bbf8e24ef29c6a1f9)\n'}]",0,812439,4eaeb63988f443493c1ec564bc4e84d08dd1c3e3,11,4,2,30491,,,0,"Do not enable mariadb-clustercheck when not needed

Closes-Bug: #1944114
Change-Id: Idd525fda7ff94f70794f4c582cd74470c7f40fae
(cherry picked from commit 2cf9ae2cf5680046c6e3396bbf8e24ef29c6a1f9)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/39/812439/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1944114-fa2a266c014c64a9.yaml', 'ansible/roles/mariadb/defaults/main.yml']",2,4d26f10429605d5f5c7ca59e46db8d36cfed8257,bug/1944114-stable/wallaby-stable/victoria,"<<<<<<< HEAD (6bfa6d Do not become root when searching for custom prometheus aler)======= enable_mariadb_clustercheck: ""{{ enable_haproxy }}"" #################### # Sharding #################### mariadb_shard_id: ""{{ mariadb_default_database_shard_id }}"" mariadb_shard_name: ""shard_{{ mariadb_shard_id }}"" mariadb_shard_group: ""mariadb_{{ mariadb_shard_name }}"" mariadb_shard_database_user: ""{% if mariadb_loadbalancer == 'haproxy' %}{{ database_user }}{% else %}root_{{ mariadb_shard_name }}{% endif %}"" >>>>>>> CHANGE (b08c32 Do not enable mariadb-clustercheck when not needed)",,17,0
openstack%2Fopenstack-ansible-os_octavia~master~I07587193a0f1f84f1842b64b88a827aa3927cfe6,openstack/openstack-ansible-os_octavia,master,I07587193a0f1f84f1842b64b88a827aa3927cfe6,Do not log private key,MERGED,2021-10-18 14:17:51.000000000,2021-10-29 11:44:36.000000000,2021-10-29 11:43:00.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}, {'_account_id': 31542}]","[{'number': 1, 'created': '2021-10-18 14:17:51.000000000', 'files': ['tasks/octavia_certs_distribute.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_octavia/commit/94e59adeeb2aba467e8fb5edbcf1a71bfe12af17', 'message': 'Do not log private key\n\nChange-Id: I07587193a0f1f84f1842b64b88a827aa3927cfe6\n'}]",0,814430,94e59adeeb2aba467e8fb5edbcf1a71bfe12af17,8,3,1,31749,,,0,"Do not log private key

Change-Id: I07587193a0f1f84f1842b64b88a827aa3927cfe6
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_octavia refs/changes/30/814430/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/octavia_certs_distribute.yml'],1,94e59adeeb2aba467e8fb5edbcf1a71bfe12af17,certs-no-log, no_log: true,,1,0
openstack%2Fswift~master~I2ffacdbd70c72e091825164da24cc87ea67721d7,openstack/swift,master,I2ffacdbd70c72e091825164da24cc87ea67721d7,proxy: Remove a bunch of logging translations,MERGED,2020-09-03 18:22:43.000000000,2021-10-29 11:41:19.000000000,2021-10-29 11:39:41.000000000,"[{'_account_id': 1179}, {'_account_id': 7847}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-09-03 18:22:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/779e679e148cc9f0bfa95884b7d6fa96bb19ae84', 'message': 'Remove a bunch of logging translations\n\nChange-Id: I2ffacdbd70c72e091825164da24cc87ea67721d7\nPartial-Bug: #1674543\n'}, {'number': 2, 'created': '2020-09-04 00:32:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/13940e9383db07e92af38d24259387b6c91a57a9', 'message': 'Remove a bunch of logging translations\n\nChange-Id: I2ffacdbd70c72e091825164da24cc87ea67721d7\nPartial-Bug: #1674543\n'}, {'number': 3, 'created': '2020-09-08 21:53:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/9f0723ba6f7a0ad7b3076795901b071c88d222cc', 'message': 'proxy: Remove a bunch of logging translations\n\nChange-Id: I2ffacdbd70c72e091825164da24cc87ea67721d7\nPartial-Bug: #1674543\n'}, {'number': 4, 'created': '2021-10-22 15:28:05.000000000', 'files': ['swift/proxy/controllers/account.py', 'swift/proxy/controllers/obj.py', 'swift/proxy/server.py', 'swift/proxy/controllers/container.py', 'swift/proxy/controllers/base.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/f1c411c5299e77a595b57f36927485fc6f702411', 'message': 'proxy: Remove a bunch of logging translations\n\nChange-Id: I2ffacdbd70c72e091825164da24cc87ea67721d7\nPartial-Bug: #1674543\n'}]",2,749810,f1c411c5299e77a595b57f36927485fc6f702411,21,4,4,15343,,,0,"proxy: Remove a bunch of logging translations

Change-Id: I2ffacdbd70c72e091825164da24cc87ea67721d7
Partial-Bug: #1674543
",git fetch https://review.opendev.org/openstack/swift refs/changes/10/749810/4 && git format-patch -1 --stdout FETCH_HEAD,['swift/proxy/controllers/obj.py'],1,779e679e148cc9f0bfa95884b7d6fa96bb19ae84,logging-translations," putter.node, 'Object', 'Trying to get %(status_type)s status of PUT to %(path)s' % 'ERROR Insufficient Storage') 'ERROR %(status)d %(body)s From Object Server ' 're: %(path)s' % 'Object PUT returning 412, %(statuses)r', 'Object PUT returning 202 for 409: ' '%(req_timestamp)s <= %(timestamps)r', self.app.error_limit(node, 'ERROR Insufficient Storage') node, 'ERROR %(status)d Expect: 100-continue ' 'From Object Server' % { node, 'Object', 'Expect: 100-continue on %s' % msg = msg or ('Object PUT returning 503, %(conns)s/%(nodes)s ' 'required connections') req, 'Object', node_iter, partition, msg='Object PUT exceptions during send, ' '%(conns)s/%(nodes)s required connections') 'Client disconnected without sending enough data') msg='Object PUT exceptions after last send, ' '%(conns)s/%(nodes)s required connections') 'ERROR Client read timeout (%ss)', err.seconds) 'Client disconnected without sending last chunk') 'ERROR Exception causing client disconnect') 'ERROR Exception transferring data to object servers %s', 'Object servers returned %s mismatched etags', len(etags)) 'Object PUT', etag=etag) self.send_exception_handler(self.node, 'Object', 'Trying to write to %s' self.node, 'Trying to read object during ' 'GET (retrying)') self.node, 'Trying to read object during ' 'GET (retrying)') self.app.exception_occurred(self.node, 'Object', 'Trying to read during GET') 'Client did not read from proxy within %ss' % 'Trying to %(method)s %(path)s' % self.app.error_limit(node, 'ERROR Insufficient Storage') node, 'ERROR %(status)d %(body)s ' 'From Object Server' % req, 'Object', node_iter, partition, ""Problem with fragment response: %s"", err) msg='Object PUT exceptions during send, ' '%(conns)s/%(nodes)s required connections') 'Client disconnected without sending enough data') 'Not enough object servers ack\'ed (got %d)', 'Object PUT', 'ERROR Client read timeout (%ss)', err.seconds) 'Client disconnected without sending last chunk') 'ERROR Exception causing client disconnect') 'ERROR Exception transferring data to object servers %s', 'Object PUT', etag=etag,"," putter.node, _('Object'), _('Trying to get %(status_type)s status of PUT to %(path)s') % _('ERROR Insufficient Storage')) _('ERROR %(status)d %(body)s From Object Server ' 're: %(path)s') % _('Object PUT returning 412, %(statuses)r'), _('Object PUT returning 202 for 409: ' '%(req_timestamp)s <= %(timestamps)r'), self.app.error_limit(node, _('ERROR Insufficient Storage')) node, _('ERROR %(status)d Expect: 100-continue ' 'From Object Server') % { node, _('Object'), _('Expect: 100-continue on %s') % msg = msg or _('Object PUT returning 503, %(conns)s/%(nodes)s ' 'required connections') req, _('Object'), node_iter, partition, msg=_('Object PUT exceptions during send, ' '%(conns)s/%(nodes)s required connections')) _('Client disconnected without sending enough data')) msg=_('Object PUT exceptions after last send, ' '%(conns)s/%(nodes)s required connections')) _('ERROR Client read timeout (%ss)'), err.seconds) _('Client disconnected without sending last chunk')) _('ERROR Exception causing client disconnect')) _('ERROR Exception transferring data to object servers %s'), _('Object servers returned %s mismatched etags'), len(etags)) _('Object PUT'), etag=etag) self.send_exception_handler(self.node, _('Object'), _('Trying to write to %s') self.node, _('Trying to read object during ' 'GET (retrying)')) self.node, _('Trying to read object during ' 'GET (retrying)')) self.app.exception_occurred(self.node, _('Object'), _('Trying to read during GET')) _('Client did not read from proxy within %ss') % _('Trying to %(method)s %(path)s') % self.app.error_limit(node, _('ERROR Insufficient Storage')) node, _('ERROR %(status)d %(body)s ' 'From Object Server') % req, _('Object'), node_iter, partition, _(""Problem with fragment response: %s""), err) msg=_('Object PUT exceptions during send, ' '%(conns)s/%(nodes)s required connections')) _('Client disconnected without sending enough data')) _('Not enough object servers ack\'ed (got %d)'), _('Object PUT'), _('ERROR Client read timeout (%ss)'), err.seconds) _('Client disconnected without sending last chunk')) _('ERROR Exception causing client disconnect')) _('ERROR Exception transferring data to object servers %s'), _('Object PUT'), etag=etag,",52,52
openstack%2Fos-net-config~stable%2Ftrain~Ie67cd8bed19cdd76c98e2e7bde74de5e9526abb5,openstack/os-net-config,stable/train,Ie67cd8bed19cdd76c98e2e7bde74de5e9526abb5,Update sriov config service to handle nic partitioned PF,ABANDONED,2021-10-29 11:39:19.000000000,2021-10-29 11:41:02.000000000,,[],"[{'number': 1, 'created': '2021-10-29 11:39:19.000000000', 'files': ['os_net_config/tests/test_sriov_config.py', 'os_net_config/utils.py', 'os_net_config/tests/test_utils.py', 'tox.ini', 'os_net_config/sriov_config.py'], 'web_link': 'https://opendev.org/openstack/os-net-config/commit/86c9164b3270a855f47a60cae62a35c4cd3a9dbf', 'message': 'Update sriov config service to handle nic partitioned PF\n\nCreate VFs using udev rules are required for attaching\nand removing PF from a VM. On a reboot, when udev rules\ntrigger VF creation script and when a VF is attached to\nvfio-pci driver, some of the VFs on that PF are not\ninitialized properly, resulting in VF not found issue.\nThough it looks like driver issue, this patch avoids\nthis scenarios by removing the nic-paritioned VF from\nthe udev rule, as when one of the VF is attached to host,\nthe PF cannot be used by the VM.\n\nThe function setUp_pf_stubs() was added in the vdpa patch:\n    https://review.opendev.org/c/openstack/os-net-config/+/798926/\nSince there is a dependency on this API for the tests of this patch,\nit has been added here\n\nRemoving fstring changes as train needs to support py27\nChange-Id: Ic6738de42b9aa0346f48060c143c5f779b67867e\n\nChange-Id: Ie67cd8bed19cdd76c98e2e7bde74de5e9526abb5\n'}]",0,815954,86c9164b3270a855f47a60cae62a35c4cd3a9dbf,2,0,1,33688,,,0,"Update sriov config service to handle nic partitioned PF

Create VFs using udev rules are required for attaching
and removing PF from a VM. On a reboot, when udev rules
trigger VF creation script and when a VF is attached to
vfio-pci driver, some of the VFs on that PF are not
initialized properly, resulting in VF not found issue.
Though it looks like driver issue, this patch avoids
this scenarios by removing the nic-paritioned VF from
the udev rule, as when one of the VF is attached to host,
the PF cannot be used by the VM.

The function setUp_pf_stubs() was added in the vdpa patch:
    https://review.opendev.org/c/openstack/os-net-config/+/798926/
Since there is a dependency on this API for the tests of this patch,
it has been added here

Removing fstring changes as train needs to support py27
Change-Id: Ic6738de42b9aa0346f48060c143c5f779b67867e

Change-Id: Ie67cd8bed19cdd76c98e2e7bde74de5e9526abb5
",git fetch https://review.opendev.org/openstack/os-net-config refs/changes/54/815954/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_net_config/tests/test_sriov_config.py', 'os_net_config/utils.py', 'os_net_config/tests/test_utils.py', 'tox.ini', 'os_net_config/sriov_config.py']",5,86c9164b3270a855f47a60cae62a35c4cd3a9dbf,sriov_patches_train," logger.info(""Received udev event %s for %s"" % (event[""action""], event[""device""])) logger.error(""Error reading file: %s"" % filename) path = ""device/%s"" % path if path else ""device"" logger.info(""VF: %s created for PF: %s"" % (vf_name, pf_name)) logger.warning(""Unable to parse event %s"" % event[""device""]) else: logger.warning(""%s is not a directory"" % pf_path) except Queue.Empty: logger.info(""Timeout in the creation of VFs for PF %s"" % pf_name) logger.info(""Required VFs are created for PF %s"" % pf_name) logger.debug(""Getting numvfs for interface %s"" % ifname) msg = (""Unable to read numvfs for %s: %d"" % (ifname, exc)) logger.debug(""Interface %s has %d configured"" % (ifname, curr_numvfs)) logger.debug(""Interface %s has %d configured, setting to %d"" % (ifname, curr_numvfs, numvfs)) if not isinstance(numvfs, int): msg = (""Unable to configure pf: %s with numvfs: %s"" ""numvfs must be an integer"" % (ifname, numvfs)) logger.warning(""Numvfs already configured to %d for %s"" % (curr_numvfs, ifname)) msg = (""Unable to configure pf: %s with numvfs: %d\n%s"" % (ifname, numvfs, exc)) msg = (""Unable to configure pf: %s with numvfs: %d\n"" ""sriov_numvfs file is not set to the targeted number of vfs"" % (ifname, numvfs))def is_partitioned_pf(dev_name): """"""Check if any nic-partition(VF) is already used Given a PF device, returns True if any VFs of this device are in-use. """""" sriov_map = _get_sriov_map() for config in sriov_map: devtype = config.get('device_type', None) if devtype == 'vf': name = config.get('device', {}).get('name') vf_name = config.get('name') if dev_name == name: logger.warning(""%s has VF(%s) used by host"" % (name, vf_name)) return True return False if not is_partitioned_pf(item['name']): add_udev_rule_for_legacy_sriov_pf(item['name'], item['numvfs']) logger.info(""%s: Mellanox card"" % item['name']) vf_pci_path = ""/sys/bus/pci/devices/%s/driver"" % vf_pci if os.path.exists(vf_pci_path): logger.info(""Unbinding %s"" % vf_pci) logger.info(""%s: Adding udev rules"" % item['name']) uplink_rep_phys_switch_id_path = ""/sys/class/net/%s/phys_switch_id"" \ % pf_name logger.info(""Uplink representor %s ready"" % pf_name) raise RuntimeError(""Timeout while waiting for uplink representor %s"" % pf_name) logger.info(""adding udev rules for sriov %s"" % pf_name) 'KERNELS==""%s"", NAME=""%s""' % (pf_pci, pf_name) logger.info(""adding udev rules for legacy sriov %s: %d"" % (pf_name, numvfs)) udev_line = 'KERNEL==""%s"", '\ 'RUN+=""/bin/os-net-config-sriov -n %%k:%d""' \ % (pf_name, numvfs) pattern = 'KERNEL==""%s"", RUN+=""/bin/os-net-config-sriov -n' % pf_name logger.info(""adding udev rules for vf representators %s"" % pf_name) logger.error(""Failed to get function number for %s \n"" ""its' vf-represent"" % pf_name) logger.info(""adding udev rules to unmanage vf representators"") logger.debug(""adding udev rule to %s: %s"" % (udev_file, udev_data)) data = ""# This file is autogenerated by os-net-config\n%s\n""\ % udev_data logger.error(""Failed to reload udev rules: %s"" % exc) logger.error(""Failed to trigger udev rules: %s"" % exc) 'pci/%s' % pf_pci, 'inline-mode', 'transport') except processutils.ProcessExecutionError as exc: logger.error(""Failed to set inline-mode to transport for %s: %s"" % (pf_pci, exc)) 'pci/%s' % pf_pci, 'mode', 'switchdev') except processutils.ProcessExecutionError as exc: logger.error(""Failed to set mode to switchdev for %s: %s"" % (pf_pci, exc)) logger.info(""Device pci/%s set to switchdev mode."" % pf_pci) logger.info(""Enabled \""hw-tc-offload\"" for PF %s."" % pf_name) except processutils.ProcessExecutionError as exc: logger.error(""Failed to enable hw-tc-offload on %s: %s"" % (pf_name, exc)) 'pci/%s' % pf_pci, 'name', 'flow_steering_mode', logger.info(""Device pci/%s is set to smfs steering mode."" % pf_pci) except processutils.ProcessExecutionError as exc: logger.warning(""Could not set pci/%s to smfs steering mode: %s"" % (pf_pci, exc)) logger.info(""Bringing up PF: %s"" % pf_device['name']) (pf_file + '/uevent'))) logger.info(""Running /sbin/ifdown %s"" % device) logger.error(""Failed to ifdown %s"" % device) logger.info(""Running /sbin/ifup %s"" % device) logger.error(""Failed to ifup %s"" % device) logger.info(""Configuring settings for PF: %s VF :%d VF name : %s"" % (pf_name, vfid, item['name'])) logging.error(""Invalid arguments for --numvfs %s"" % opts.numvfs)"," logger.info( f""Received udev event {event['action']} for {event['device']}"" ) logger.error(f""Error reading file: {filename}"") path = f""device/{path}"" if path else ""device"" logger.info( f""VF: {vf_name} created for PF: {pf_name}"" ) logger.warning(f""Unable to parse event {event['device']}"") else: logger.warning(f""{pf_path} is not a directory"") except Queue.Empty: logger.info(f""Timeout in the creation of VFs for PF {pf_name}"") logger.info(f""Required VFs are created for PF {pf_name}"") logger.debug(f""Getting numvfs for interface {ifname}"") msg = f""Unable to read numvfs for {ifname}: {exc}"" logger.debug(f""Interface {ifname} has {curr_numvfs} configured"") logger.debug(f""Interface {ifname} has {curr_numvfs} configured, setting "" f""to {numvfs}"") if not isinstance(numvfs, int): msg = (f""Unable to configure pf: {ifname} with numvfs: {numvfs}\n"" f""numvfs must be an integer"") logger.warning(f""Numvfs already configured to {curr_numvfs} for "" f""{ifname}"") msg = (f""Unable to configure pf: {ifname} with numvfs: {numvfs}\n"" f""{exc}"") msg = (f""Unable to configure pf: {ifname} with numvfs: {numvfs}\n"" ""sriov_numvfs file is not set to the targeted number of "" ""vfs"") add_udev_rule_for_legacy_sriov_pf(item['name'], item['numvfs']) logger.info(f""{item['name']}: Mellanox card"") vf_pci_path = f""/sys/bus/pci/devices/{vf_pci}/driver"" if os.path.exists(vf_pci_path): logger.info(f""Unbinding {vf_pci}"") logger.info(f""{item['name']}: Adding udev rules"") uplink_rep_phys_switch_id_path = f""/sys/class/net/{pf_name}/phys_switch_id"" logger.info(f""Uplink representor {pf_name} ready"") raise RuntimeError(f""Timeout while waiting for uplink representor "" f""{pf_name}."") logger.info(f""adding udev rules for sriov {pf_name}"") f'KERNELS==""{pf_pci}"", NAME=""{pf_name}""' logger.info(f""adding udev rules for legacy sriov {pf_name}: {numvfs}"") udev_line = f'KERNEL==""{pf_name}"", '\ f'RUN+=""/bin/os-net-config-sriov -n %k:{numvfs}""' pattern = f'KERNEL==""{pf_name}"", RUN+=""/bin/os-net-config-sriov -n' logger.info(f""adding udev rules for vf representators {pf_name}"") logger.error(f""Failed to get function number for {pf_name} \n"" ""its' vf-represent"") logger.info(f""adding udev rules to unmanage vf representators"") logger.debug(f""adding udev rule to {udev_file}: {udev_data}"") data = ""# This file is autogenerated by os-net-config\n""\ f""{udev_data}\n"" logger.error(f""Failed to reload udev rules: {exc}"") logger.error(f""Failed to trigger udev rules: {exc}"") f'pci/{pf_pci}', 'inline-mode', 'transport') except processutils.ProcessExecutionError as exc: logger.error(f""Failed to set inline-mode to transport for "" f""{pf_pci}: {exc}"") f'pci/{pf_pci}', 'mode', 'switchdev') except processutils.ProcessExecutionError as exc: logger.error(f""Failed to set mode to switchdev for {pf_pci}: {exc}"") logger.info(f""Device pci/{pf_pci} set to switchdev mode."") logger.info(f""Enabled \""hw-tc-offload\"" for PF {pf_name}."") except processutils.ProcessExecutionError as exc: logger.error(f""Failed to enable hw-tc-offload on {pf_name}: {exc}"") f'pci/{pf_pci}', 'name', 'flow_steering_mode', logger.info(f""Device pci/{pf_pci} is set to smfs steering mode."") except processutils.ProcessExecutionError as exc: logger.warning(f""Could not set pci/{pf_pci} to smfs steering mode: "" f""{exc}"") logger.info(f""Bringing up PF: {pf_device['name']}"") f""{pf_file}/uevent"")) logger.info(f""Running /sbin/ifdown {device}"") logger.error(f""Failed to ifdown {device}"") logger.info(f""Running /sbin/ifup {device}"") logger.error(f""Failed to ifup {device}"") logger.info(f""Configuring settings for PF: {pf_name} VF: {vfid} "" f""VF name: {item['name']}"") logging.error(f""Invalid arguments for --numvfs {opts.numvfs}"")",304,73
openstack%2Fkolla-ansible~stable%2Fussuri~I252ffaf73dd2a649387ddacc73286b49f36dfdf2,openstack/kolla-ansible,stable/ussuri,I252ffaf73dd2a649387ddacc73286b49f36dfdf2,Fix broken deploy of placement service,MERGED,2021-10-28 16:46:53.000000000,2021-10-29 11:36:16.000000000,2021-10-29 11:32:55.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23871}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-28 16:46:53.000000000', 'files': ['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/5253da3c09c0ff97b24c501177467e72b00c6bb8', 'message': ""Fix broken deploy of placement service\n\nCorrect typo in role's playbook in order to be able to deploy\nthe service with customized policy file.\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\nCloses-Bug: #1948835\n(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)\n""}]",0,815878,5253da3c09c0ff97b24c501177467e72b00c6bb8,10,4,1,30491,,,0,"Fix broken deploy of placement service

Correct typo in role's playbook in order to be able to deploy
the service with customized policy file.

Change-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2
Closes-Bug: #1948835
(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/78/815878/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml']",2,5253da3c09c0ff97b24c501177467e72b00c6bb8,," dest: ""{{ node_config_directory }}/{{ item.key }}/{{ placement_policy_file }}"""," dest: ""{{ placement_config_directory }}/{{ item.key }}/{{ placement_policy_file }}""",7,1
openstack%2Fkolla-ansible~stable%2Fwallaby~I252ffaf73dd2a649387ddacc73286b49f36dfdf2,openstack/kolla-ansible,stable/wallaby,I252ffaf73dd2a649387ddacc73286b49f36dfdf2,Fix broken deploy of placement service,MERGED,2021-10-28 16:46:37.000000000,2021-10-29 11:35:26.000000000,2021-10-29 11:32:53.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23871}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-28 16:46:37.000000000', 'files': ['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/cea9a84cfffb39a0e61b1a8791869b4a5127b3a0', 'message': ""Fix broken deploy of placement service\n\nCorrect typo in role's playbook in order to be able to deploy\nthe service with customized policy file.\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\nCloses-Bug: #1948835\n(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)\n""}]",0,815876,cea9a84cfffb39a0e61b1a8791869b4a5127b3a0,10,4,1,30491,,,0,"Fix broken deploy of placement service

Correct typo in role's playbook in order to be able to deploy
the service with customized policy file.

Change-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2
Closes-Bug: #1948835
(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/76/815876/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml']",2,cea9a84cfffb39a0e61b1a8791869b4a5127b3a0,," dest: ""{{ node_config_directory }}/{{ item.key }}/{{ placement_policy_file }}"""," dest: ""{{ placement_config_directory }}/{{ item.key }}/{{ placement_policy_file }}""",7,1
openstack%2Fkolla-ansible~stable%2Fxena~I252ffaf73dd2a649387ddacc73286b49f36dfdf2,openstack/kolla-ansible,stable/xena,I252ffaf73dd2a649387ddacc73286b49f36dfdf2,Fix broken deploy of placement service,MERGED,2021-10-28 16:46:27.000000000,2021-10-29 11:35:04.000000000,2021-10-29 11:32:51.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23871}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-28 16:46:27.000000000', 'files': ['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3aa42733afb0b72a34644643ac1892772472da6e', 'message': ""Fix broken deploy of placement service\n\nCorrect typo in role's playbook in order to be able to deploy\nthe service with customized policy file.\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\nCloses-Bug: #1948835\n(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)\n""}]",0,815875,3aa42733afb0b72a34644643ac1892772472da6e,10,4,1,30491,,,0,"Fix broken deploy of placement service

Correct typo in role's playbook in order to be able to deploy
the service with customized policy file.

Change-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2
Closes-Bug: #1948835
(cherry picked from commit 0202def4a699dc5e15890988fe96d37d9d80db19)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/75/815875/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml']",2,3aa42733afb0b72a34644643ac1892772472da6e,," dest: ""{{ node_config_directory }}/{{ item.key }}/{{ placement_policy_file }}"""," dest: ""{{ placement_config_directory }}/{{ item.key }}/{{ placement_policy_file }}""",7,1
openstack%2Fskyline-console~master~I857c1932685a0b555b95b5a29fc6a65e937e00dc,openstack/skyline-console,master,I857c1932685a0b555b95b5a29fc6a65e937e00dc,fix: Fix volume tag judgement logic,MERGED,2021-10-29 07:53:19.000000000,2021-10-29 11:29:49.000000000,2021-10-29 11:29:49.000000000,"[{'_account_id': 22348}, {'_account_id': 30434}]","[{'number': 1, 'created': '2021-10-29 07:53:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/skyline-console/commit/eb3e0065a7532c00a537a869bdfe574100ee820c', 'message': 'fix: Fix volume tag judgement logic\n\nfix volume tag judgement logic\n\nChange-Id: I857c1932685a0b555b95b5a29fc6a65e937e00dc\n'}, {'number': 2, 'created': '2021-10-29 07:54:45.000000000', 'files': ['src/resources/volume.jsx'], 'web_link': 'https://opendev.org/openstack/skyline-console/commit/bd6a10f7c6b3dfd85b2c5a1acd20be18d741e642', 'message': 'fix: Fix volume tag judgement logic\n\nfix volume tag judgement logic\n\nChange-Id: I857c1932685a0b555b95b5a29fc6a65e937e00dc\n'}]",0,815941,bd6a10f7c6b3dfd85b2c5a1acd20be18d741e642,7,2,2,33636,,,0,"fix: Fix volume tag judgement logic

fix volume tag judgement logic

Change-Id: I857c1932685a0b555b95b5a29fc6a65e937e00dc
",git fetch https://review.opendev.org/openstack/skyline-console refs/changes/41/815941/2 && git format-patch -1 --stdout FETCH_HEAD,['src/resources/volume.jsx'],1,eb3e0065a7532c00a537a869bdfe574100ee820c,, (item.attachments[0].device === '/dev/vda' || item.attachments[0].device === '/dev/sda'), item.attachments[0].device === '/dev/vda',2,1
openstack%2Fironic~master~Ic8790e80beada87bd46f189c0d33023c997c47a4,openstack/ironic,master,Ic8790e80beada87bd46f189c0d33023c997c47a4,Add nvme as interface_type for 'agent' raid interface,NEW,2021-10-22 11:56:55.000000000,2021-10-29 11:29:36.000000000,,"[{'_account_id': 11076}, {'_account_id': 22348}, {'_account_id': 27909}]","[{'number': 1, 'created': '2021-10-22 11:56:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/94307e30dc12e9a11e3005eae991c5be76002b18', 'message': 'Add nvme as interface_type for RAID input\n\nThis fix adds ""nvme"" as the allowed ""interface_type"" in\nRAID input.\n\nStory: 2009318\nTask: 43733\n\nChange-Id: Ic8790e80beada87bd46f189c0d33023c997c47a4\n'}, {'number': 2, 'created': '2021-10-25 13:41:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/af3de3676fb64338d84acdd1ecefb1bb66f8f27e', 'message': 'Add nvme as interface_type for RAID input\n\nThis fix adds ""nvme"" as the allowed ""interface_type"" in\nRAID input.\n\nStory: 2009318\nTask: 43733\n\nChange-Id: Ic8790e80beada87bd46f189c0d33023c997c47a4\n'}, {'number': 3, 'created': '2021-10-25 17:23:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/7e3f5bc1021b6be521b94d01d59c152e72ccd1ca', 'message': 'Add nvme as interface_type for RAID input\n\nThis fix adds ""nvme"" as the allowed ""interface_type"" in\nRAID input.\n\nStory: 2009318\nTask: 43733\n\nChange-Id: Ic8790e80beada87bd46f189c0d33023c997c47a4\n'}, {'number': 4, 'created': '2021-10-26 06:18:14.000000000', 'files': ['ironic/common/raid.py', 'ironic/drivers/raid_config_schema.json'], 'web_link': 'https://opendev.org/openstack/ironic/commit/9f715a2f30ca9687278b7d1c768db66a6fb9c6ab', 'message': 'Add nvme as interface_type for \'agent\' raid interface\n\nThis fix adds ""nvme"" as the allowed ""interface_type"" in\nRAID input for \'agent\' as the raid interface.\n\nStory: 2009318\nTask: 43733\n\nChange-Id: Ic8790e80beada87bd46f189c0d33023c997c47a4\n'}]",9,815110,9f715a2f30ca9687278b7d1c768db66a6fb9c6ab,38,3,4,11297,,,0,"Add nvme as interface_type for 'agent' raid interface

This fix adds ""nvme"" as the allowed ""interface_type"" in
RAID input for 'agent' as the raid interface.

Story: 2009318
Task: 43733

Change-Id: Ic8790e80beada87bd46f189c0d33023c997c47a4
",git fetch https://review.opendev.org/openstack/ironic refs/changes/10/815110/4 && git format-patch -1 --stdout FETCH_HEAD,['ironic/drivers/raid_config_schema.json'],1,94307e30dc12e9a11e3005eae991c5be76002b18,nvme," ""enum"": [ ""sata"", ""scsi"", ""sas"", ""nvme"" ],"," ""enum"": [ ""sata"", ""scsi"", ""sas"" ],",1,1
openstack%2Fsushy~master~Ic950a35bb9fc603e5c4b943ac19dba982bdf7212,openstack/sushy,master,Ic950a35bb9fc603e5c4b943ac19dba982bdf7212,Prepare the ground to use enums instead of strings,MERGED,2021-10-22 09:45:09.000000000,2021-10-29 11:09:33.000000000,2021-10-29 11:07:28.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 27909}]","[{'number': 1, 'created': '2021-10-22 09:45:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/8aa047b3e38024aecbd8e3bffdc9b476d3c11eac', 'message': 'Prepare the ground to use enums instead of strings\n\nChange-Id: Ic950a35bb9fc603e5c4b943ac19dba982bdf7212\n'}, {'number': 2, 'created': '2021-10-25 14:18:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/2c23b65a7dce0ce2241c909425a025128efb2d7c', 'message': 'Prepare the ground to use enums instead of strings\n\nMakes MappedField understand enum classes instead of a dictionary.\n\nAlso adds a script to generate enum definitions from DMTF definitions,\nas well as creating compatibility constants.\n\nChange-Id: Ic950a35bb9fc603e5c4b943ac19dba982bdf7212\n'}, {'number': 3, 'created': '2021-10-25 14:27:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/70c28b18c97e444266ef5d9fdc6a743f6bf74ede', 'message': 'Prepare the ground to use enums instead of strings\n\nMakes MappedField understand enum classes instead of a dictionary.\n\nAlso adds a script to generate enum definitions from DMTF definitions,\nas well as creating compatibility constants.\n\nChange-Id: Ic950a35bb9fc603e5c4b943ac19dba982bdf7212\n'}, {'number': 4, 'created': '2021-10-25 15:04:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/sushy/commit/88c01ffdae462199af7ab3193f57677fcdc711ac', 'message': 'Prepare the ground to use enums instead of strings\n\nMakes MappedField understand enum classes instead of a dictionary.\n\nAlso adds a script to generate enum definitions from DMTF definitions,\nas well as creating compatibility constants.\n\nChange-Id: Ic950a35bb9fc603e5c4b943ac19dba982bdf7212\n'}, {'number': 5, 'created': '2021-10-27 09:08:40.000000000', 'files': ['sushy/tests/unit/resources/test_base.py', 'sushy/resources/base.py', 'tools/generate-enum.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/4b99f93a1183647ca1813da619722f3b8aa67d9b', 'message': 'Prepare the ground to use enums instead of strings\n\nMakes MappedField understand enum classes instead of a dictionary.\n\nAlso adds a script to generate enum definitions from DMTF definitions,\nas well as creating compatibility constants.\n\nChange-Id: Ic950a35bb9fc603e5c4b943ac19dba982bdf7212\n'}]",3,815103,4b99f93a1183647ca1813da619722f3b8aa67d9b,26,4,5,10239,,,0,"Prepare the ground to use enums instead of strings

Makes MappedField understand enum classes instead of a dictionary.

Also adds a script to generate enum definitions from DMTF definitions,
as well as creating compatibility constants.

Change-Id: Ic950a35bb9fc603e5c4b943ac19dba982bdf7212
",git fetch https://review.opendev.org/openstack/sushy refs/changes/03/815103/5 && git format-patch -1 --stdout FETCH_HEAD,"['sushy/tests/unit/resources/test_base.py', 'sushy/resources/base.py']",2,8aa047b3e38024aecbd8e3bffdc9b476d3c11eac,enum,"import enum :param mapping: a mapping to take values from, a dictionary or an enumeration. if isinstance(mapping, type) and issubclass(mapping, enum.Enum): def adapter(value): try: return mapping(value) except ValueError: return None elif isinstance(mapping, collections.abc.Mapping): adapter = mapping.get else: raise TypeError(""The mapping argument must be a mapping or "" ""an enumeration"") field, required=required, default=default, adapter=adapter)"," :param mapping: a mapping to take values from. if not isinstance(mapping, collections.abc.Mapping): raise TypeError(""The mapping argument must be a mapping"") field, required=required, default=default, adapter=mapping.get)",32,6
openstack%2Fswift~master~I73474fcda5361275c5ff5dadec50a03264c8b79a,openstack/swift,master,I73474fcda5361275c5ff5dadec50a03264c8b79a,"T#725 line ""search"" change to ""remove"" id:1571312",ABANDONED,2016-04-17 13:47:11.000000000,2021-10-29 10:42:06.000000000,,"[{'_account_id': 3}, {'_account_id': 6968}, {'_account_id': 10068}, {'_account_id': 13052}]","[{'number': 1, 'created': '2016-04-17 13:47:11.000000000', 'files': ['bug-1571312/ringbuilder.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/a3a8a7b5228a3ee3f62c123d0e613b4b40e764ee', 'message': 'T#725 line ""search"" change to ""remove"" id:1571312\n\nChange-Id: I73474fcda5361275c5ff5dadec50a03264c8b79a\n'}]",0,306833,a3a8a7b5228a3ee3f62c123d0e613b4b40e764ee,7,4,1,21389,,,0,"T#725 line ""search"" change to ""remove"" id:1571312

Change-Id: I73474fcda5361275c5ff5dadec50a03264c8b79a
",git fetch https://review.opendev.org/openstack/swift refs/changes/33/306833/1 && git format-patch -1 --stdout FETCH_HEAD,['bug-1571312/ringbuilder.py'],1,a3a8a7b5228a3ee3f62c123d0e613b4b40e764ee,,"# Copyright (c) 2010-2012 OpenStack Foundation # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or # implied. # See the License for the specific language governing permissions and # limitations under the License. from __future__ import print_function import logging from errno import EEXIST from itertools import islice from operator import itemgetter from os import mkdir from os.path import basename, abspath, dirname, exists, join as pathjoin from sys import argv as sys_argv, exit, stderr, stdout from textwrap import wrap from time import time from datetime import timedelta import optparse import math from six.moves import zip as izip from six.moves import input from swift.common import exceptions from swift.common.ring import RingBuilder, Ring, RingData from swift.common.ring.builder import MAX_BALANCE from swift.common.ring.utils import validate_args, \ validate_and_normalize_ip, build_dev_from_opts, \ parse_builder_ring_filename_args, parse_search_value, \ parse_search_values_from_opts, parse_change_values_from_opts, \ dispersion_report, parse_add_value from swift.common.utils import lock_parent_directory MAJOR_VERSION = 1 MINOR_VERSION = 3 EXIT_SUCCESS = 0 EXIT_WARNING = 1 EXIT_ERROR = 2 global argv, backup_dir, builder, builder_file, ring_file argv = backup_dir = builder = builder_file = ring_file = None def format_device(dev): """""" Format a device for display. """""" copy_dev = dev.copy() for key in ('ip', 'replication_ip'): if ':' in copy_dev[key]: copy_dev[key] = '[' + copy_dev[key] + ']' return ('d%(id)sr%(region)sz%(zone)s-%(ip)s:%(port)sR' '%(replication_ip)s:%(replication_port)s/%(device)s_' '""%(meta)s""' % copy_dev) def _parse_search_values(argvish): new_cmd_format, opts, args = validate_args(argvish) # We'll either parse the all-in-one-string format or the # --options format, # but not both. If both are specified, raise an error. try: search_values = {} if len(args) > 0: if new_cmd_format or len(args) != 1: print(Commands.search.__doc__.strip()) exit(EXIT_ERROR) search_values = parse_search_value(args[0]) else: search_values = parse_search_values_from_opts(opts) return search_values except ValueError as e: print(e) exit(EXIT_ERROR) def _find_parts(devs): devs = [d['id'] for d in devs] if not devs or not builder._replica2part2dev: return None partition_count = {} for replica in builder._replica2part2dev: for partition, device in enumerate(replica): if device in devs: if partition not in partition_count: partition_count[partition] = 0 partition_count[partition] += 1 # Sort by number of found replicas to keep the output format sorted_partition_count = sorted( partition_count.items(), key=itemgetter(1), reverse=True) return sorted_partition_count def _parse_list_parts_values(argvish): new_cmd_format, opts, args = validate_args(argvish) # We'll either parse the all-in-one-string format or the # --options format, # but not both. If both are specified, raise an error. try: devs = [] if len(args) > 0: if new_cmd_format: print(Commands.list_parts.__doc__.strip()) exit(EXIT_ERROR) for arg in args: devs.extend( builder.search_devs(parse_search_value(arg)) or []) else: devs.extend(builder.search_devs( parse_search_values_from_opts(opts)) or []) return devs except ValueError as e: print(e) exit(EXIT_ERROR) def _parse_add_values(argvish): """""" Parse devices to add as specified on the command line. Will exit on error and spew warnings. :returns: array of device dicts """""" new_cmd_format, opts, args = validate_args(argvish) # We'll either parse the all-in-one-string format or the # --options format, # but not both. If both are specified, raise an error. parsed_devs = [] if len(args) > 0: if new_cmd_format or len(args) % 2 != 0: print(Commands.add.__doc__.strip()) exit(EXIT_ERROR) devs_and_weights = izip(islice(args, 0, len(args), 2), islice(args, 1, len(args), 2)) for devstr, weightstr in devs_and_weights: dev_dict = parse_add_value(devstr) if dev_dict['region'] is None: stderr.write('WARNING: No region specified for %s. ' 'Defaulting to region 1.\n' % devstr) dev_dict['region'] = 1 if dev_dict['replication_ip'] is None: dev_dict['replication_ip'] = dev_dict['ip'] if dev_dict['replication_port'] is None: dev_dict['replication_port'] = dev_dict['port'] weight = float(weightstr) if weight < 0: raise ValueError('Invalid weight value: %s' % devstr) dev_dict['weight'] = weight parsed_devs.append(dev_dict) else: parsed_devs.append(build_dev_from_opts(opts)) return parsed_devs def _set_weight_values(devs, weight): if not devs: print('Search value matched 0 devices.\n' 'The on-disk ring builder is unchanged.') exit(EXIT_ERROR) if len(devs) > 1: print('Matched more than one device:') for dev in devs: print(' %s' % format_device(dev)) if input('Are you sure you want to update the weight for ' 'these %s devices? (y/N) ' % len(devs)) != 'y': print('Aborting device modifications') exit(EXIT_ERROR) for dev in devs: builder.set_dev_weight(dev['id'], weight) print('%s weight set to %s' % (format_device(dev), dev['weight'])) def _parse_set_weight_values(argvish): new_cmd_format, opts, args = validate_args(argvish) # We'll either parse the all-in-one-string format or the # --options format, # but not both. If both are specified, raise an error. try: devs = [] if not new_cmd_format: if len(args) % 2 != 0: print(Commands.set_weight.__doc__.strip()) exit(EXIT_ERROR) devs_and_weights = izip(islice(argvish, 0, len(argvish), 2), islice(argvish, 1, len(argvish), 2)) for devstr, weightstr in devs_and_weights: devs.extend(builder.search_devs( parse_search_value(devstr)) or []) weight = float(weightstr) _set_weight_values(devs, weight) else: if len(args) != 1: print(Commands.set_weight.__doc__.strip()) exit(EXIT_ERROR) devs.extend(builder.search_devs( parse_search_values_from_opts(opts)) or []) weight = float(args[0]) _set_weight_values(devs, weight) except ValueError as e: print(e) exit(EXIT_ERROR) def _set_info_values(devs, change): if not devs: print(""Search value matched 0 devices.\n"" ""The on-disk ring builder is unchanged."") exit(EXIT_ERROR) if len(devs) > 1: print('Matched more than one device:') for dev in devs: print(' %s' % format_device(dev)) if input('Are you sure you want to update the info for ' 'these %s devices? (y/N) ' % len(devs)) != 'y': print('Aborting device modifications') exit(EXIT_ERROR) for dev in devs: orig_dev_string = format_device(dev) test_dev = dict(dev) for key in change: test_dev[key] = change[key] for check_dev in builder.devs: if not check_dev or check_dev['id'] == test_dev['id']: continue if check_dev['ip'] == test_dev['ip'] and \ check_dev['port'] == test_dev['port'] and \ check_dev['device'] == test_dev['device']: print('Device %d already uses %s:%d/%s.' % (check_dev['id'], check_dev['ip'], check_dev['port'], check_dev['device'])) exit(EXIT_ERROR) for key in change: dev[key] = change[key] print('Device %s is now %s' % (orig_dev_string, format_device(dev))) def _parse_set_info_values(argvish): new_cmd_format, opts, args = validate_args(argvish) # We'll either parse the all-in-one-string format or the # --options format, # but not both. If both are specified, raise an error. if not new_cmd_format: if len(args) % 2 != 0: print(Commands.search.__doc__.strip()) exit(EXIT_ERROR) searches_and_changes = izip(islice(argvish, 0, len(argvish), 2), islice(argvish, 1, len(argvish), 2)) for search_value, change_value in searches_and_changes: devs = builder.search_devs(parse_search_value(search_value)) change = {} ip = '' if change_value and change_value[0].isdigit(): i = 1 while (i < len(change_value) and change_value[i] in '0123456789.'): i += 1 ip = change_value[:i] change_value = change_value[i:] elif change_value and change_value.startswith('['): i = 1 while i < len(change_value) and change_value[i] != ']': i += 1 i += 1 ip = change_value[:i].lstrip('[').rstrip(']') change_value = change_value[i:] if ip: change['ip'] = validate_and_normalize_ip(ip) if change_value.startswith(':'): i = 1 while i < len(change_value) and change_value[i].isdigit(): i += 1 change['port'] = int(change_value[1:i]) change_value = change_value[i:] if change_value.startswith('R'): change_value = change_value[1:] replication_ip = '' if change_value and change_value[0].isdigit(): i = 1 while (i < len(change_value) and change_value[i] in '0123456789.'): i += 1 replication_ip = change_value[:i] change_value = change_value[i:] elif change_value and change_value.startswith('['): i = 1 while i < len(change_value) and change_value[i] != ']': i += 1 i += 1 replication_ip = \ change_value[:i].lstrip('[').rstrip(']') change_value = change_value[i:] if replication_ip: change['replication_ip'] = \ validate_and_normalize_ip(replication_ip) if change_value.startswith(':'): i = 1 while i < len(change_value) and change_value[i].isdigit(): i += 1 change['replication_port'] = int(change_value[1:i]) change_value = change_value[i:] if change_value.startswith('/'): i = 1 while i < len(change_value) and change_value[i] != '_': i += 1 change['device'] = change_value[1:i] change_value = change_value[i:] if change_value.startswith('_'): change['meta'] = change_value[1:] change_value = '' if change_value or not change: raise ValueError('Invalid set info change value: %s' % repr(argvish[1])) _set_info_values(devs, change) else: devs = builder.search_devs(parse_search_values_from_opts(opts)) change = parse_change_values_from_opts(opts) _set_info_values(devs, change) def _parse_remove_values(argvish): new_cmd_format, opts, args = validate_args(argvish) # We'll either parse the all-in-one-string format or the # --options format, # but not both. If both are specified, raise an error. try: devs = [] if len(args) > 0: if new_cmd_format: print(Commands.remove.__doc__.strip()) exit(EXIT_ERROR) for arg in args: devs.extend(builder.search_devs( parse_search_value(arg)) or []) else: devs.extend(builder.search_devs( parse_search_values_from_opts(opts))) return devs except ValueError as e: print(e) exit(EXIT_ERROR) class Commands(object): @staticmethod def unknown(): print('Unknown command: %s' % argv[2]) exit(EXIT_ERROR) @staticmethod def create(): """""" swift-ring-builder <builder_file> create <part_power> <replicas> <min_part_hours> Creates <builder_file> with 2^<part_power> partitions and <replicas>. <min_part_hours> is number of hours to restrict moving a partition more than once. """""" if len(argv) < 6: print(Commands.create.__doc__.strip()) exit(EXIT_ERROR) builder = RingBuilder(int(argv[3]), float(argv[4]), int(argv[5])) backup_dir = pathjoin(dirname(builder_file), 'backups') try: mkdir(backup_dir) except OSError as err: if err.errno != EEXIST: raise builder.save(pathjoin(backup_dir, '%d.' % time() + basename(builder_file))) builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def default(): """""" swift-ring-builder <builder_file> Shows information about the ring and the devices within. Flags: DEL - marked for removal and will be removed next rebalance. """""" print('%s, build version %d' % (builder_file, builder.version)) regions = 0 zones = 0 balance = 0 dev_count = 0 if builder.devs: regions = len(set(d['region'] for d in builder.devs if d is not None)) zones = len(set((d['region'], d['zone']) for d in builder.devs if d is not None)) dev_count = len([dev for dev in builder.devs if dev is not None]) balance = builder.get_balance() dispersion_trailer = '' if builder.dispersion is None else ( ', %.02f dispersion' % (builder.dispersion)) print('%d partitions, %.6f replicas, %d regions, %d zones, ' '%d devices, %.02f balance%s' % ( builder.parts, builder.replicas, regions, zones, dev_count, balance, dispersion_trailer)) print('The minimum number of hours before a partition can be ' 'reassigned is %s (%s remaining)' % ( builder.min_part_hours, timedelta(seconds=builder.min_part_seconds_left))) print('The overload factor is %0.2f%% (%.6f)' % ( builder.overload * 100, builder.overload)) # compare ring file against builder file if not exists(ring_file): print('Ring file %s not found, ' 'probably it hasn\'t been written yet' % ring_file) else: builder_dict = builder.get_ring().to_dict() try: ring_dict = RingData.load(ring_file).to_dict() except Exception as exc: print('Ring file %s is invalid: %r' % (ring_file, exc)) else: if builder_dict == ring_dict: print('Ring file %s is up-to-date' % ring_file) else: print('Ring file %s is obsolete' % ring_file) if builder.devs: balance_per_dev = builder._build_balance_per_dev() print('Devices: id region zone ip address port ' 'replication ip replication port name ' 'weight partitions balance flags meta') for dev in builder._iter_devs(): flags = 'DEL' if dev in builder._remove_devs else '' print(' %5d %7d %5d %15s %5d %15s %17d %9s %6.02f ' '%10s %7.02f %5s %s' % (dev['id'], dev['region'], dev['zone'], dev['ip'], dev['port'], dev['replication_ip'], dev['replication_port'], dev['device'], dev['weight'], dev['parts'], balance_per_dev[dev['id']], flags, dev['meta'])) exit(EXIT_SUCCESS) @staticmethod def search(): """""" swift-ring-builder <builder_file> search <search-value> or swift-ring-builder <builder_file> remove --region <region> --zone <zone> --ip <ip or hostname> --port <port> --replication-ip <r_ip or r_hostname> --replication-port <r_port> --device <device_name> --meta <meta> --weight <weight> Where <r_ip>, <r_hostname> and <r_port> are replication ip, hostname and port. Any of the options are optional in both cases. Shows information about matching devices. """""" if len(argv) < 4: print(Commands.search.__doc__.strip()) print() print(parse_search_value.__doc__.strip()) exit(EXIT_ERROR) devs = builder.search_devs(_parse_search_values(argv[3:])) if not devs: print('No matching devices found') exit(EXIT_ERROR) print('Devices: id region zone ip address port ' 'replication ip replication port name weight partitions ' 'balance meta') weighted_parts = builder.parts * builder.replicas / \ sum(d['weight'] for d in builder.devs if d is not None) for dev in devs: if not dev['weight']: if dev['parts']: balance = MAX_BALANCE else: balance = 0 else: balance = 100.0 * dev['parts'] / \ (dev['weight'] * weighted_parts) - 100.0 print(' %5d %7d %5d %15s %5d %15s %17d %9s %6.02f %10s ' '%7.02f %s' % (dev['id'], dev['region'], dev['zone'], dev['ip'], dev['port'], dev['replication_ip'], dev['replication_port'], dev['device'], dev['weight'], dev['parts'], balance, dev['meta'])) exit(EXIT_SUCCESS) @staticmethod def list_parts(): """""" swift-ring-builder <builder_file> list_parts <search-value> [<search-value>] .. or swift-ring-builder <builder_file> list_parts --region <region> --zone <zone> --ip <ip or hostname> --port <port> --replication-ip <r_ip or r_hostname> --replication-port <r_port> --device <device_name> --meta <meta> --weight <weight> Where <r_ip>, <r_hostname> and <r_port> are replication ip, hostname and port. Any of the options are optional in both cases. Returns a 2 column list of all the partitions that are assigned to any of the devices matching the search values given. The first column is the assigned partition number and the second column is the number of device matches for that partition. The list is ordered from most number of matches to least. If there are a lot of devices to match against, this command could take a while to run. """""" if len(argv) < 4: print(Commands.list_parts.__doc__.strip()) print() print(parse_search_value.__doc__.strip()) exit(EXIT_ERROR) if not builder._replica2part2dev: print('Specified builder file \""%s\"" is not rebalanced yet. ' 'Please rebalance first.' % builder_file) exit(EXIT_ERROR) devs = _parse_list_parts_values(argv[3:]) if not devs: print('No matching devices found') exit(EXIT_ERROR) sorted_partition_count = _find_parts(devs) if not sorted_partition_count: print('No matching devices found') exit(EXIT_ERROR) print('Partition Matches') for partition, count in sorted_partition_count: print('%9d %7d' % (partition, count)) exit(EXIT_SUCCESS) @staticmethod def add(): """""" swift-ring-builder <builder_file> add [r<region>]z<zone>-<ip>:<port>[R<r_ip>:<r_port>]/<device_name>_<meta> <weight> [[r<region>]z<zone>-<ip>:<port>[R<r_ip>:<r_port>]/<device_name>_<meta> <weight>] ... Where <r_ip> and <r_port> are replication ip and port. or swift-ring-builder <builder_file> add --region <region> --zone <zone> --ip <ip or hostname> --port <port> [--replication-ip <r_ip or r_hostname>] [--replication-port <r_port>] --device <device_name> --weight <weight> [--meta <meta>] Adds devices to the ring with the given information. No partitions will be assigned to the new device until after running 'rebalance'. This is so you can make multiple device changes and rebalance them all just once. """""" if len(argv) < 5: print(Commands.add.__doc__.strip()) exit(EXIT_ERROR) try: for new_dev in _parse_add_values(argv[3:]): for dev in builder.devs: if dev is None: continue if dev['ip'] == new_dev['ip'] and \ dev['port'] == new_dev['port'] and \ dev['device'] == new_dev['device']: print('Device %d already uses %s:%d/%s.' % (dev['id'], dev['ip'], dev['port'], dev['device'])) print(""The on-disk ring builder is unchanged.\n"") exit(EXIT_ERROR) dev_id = builder.add_dev(new_dev) print('Device %s with %s weight got id %s' % (format_device(new_dev), new_dev['weight'], dev_id)) except ValueError as err: print(err) print('The on-disk ring builder is unchanged.') exit(EXIT_ERROR) builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def set_weight(): """""" swift-ring-builder <builder_file> set_weight <search-value> <weight> [<search-value> <weight] ... or swift-ring-builder <builder_file> set_weight --region <region> --zone <zone> --ip <ip or hostname> --port <port> --replication-ip <r_ip or r_hostname> --replication-port <r_port> --device <device_name> --meta <meta> --weight <weight> Where <r_ip>, <r_hostname> and <r_port> are replication ip, hostname and port. Any of the options are optional in both cases. Resets the devices' weights. No partitions will be reassigned to or from the device until after running 'rebalance'. This is so you can make multiple device changes and rebalance them all just once. """""" # if len(argv) < 5 or len(argv) % 2 != 1: if len(argv) < 5: print(Commands.set_weight.__doc__.strip()) print() print(parse_search_value.__doc__.strip()) exit(EXIT_ERROR) _parse_set_weight_values(argv[3:]) builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def set_info(): """""" swift-ring-builder <builder_file> set_info <search-value> <ip>:<port>[R<r_ip>:<r_port>]/<device_name>_<meta> [<search-value> <ip>:<port>[R<r_ip>:<r_port>]/<device_name>_<meta>] ... or swift-ring-builder <builder_file> set_info --ip <ip or hostname> --port <port> --replication-ip <r_ip or r_hostname> --replication-port <r_port> --device <device_name> --meta <meta> --change-ip <ip or hostname> --change-port <port> --change-replication-ip <r_ip or r_hostname> --change-replication-port <r_port> --change-device <device_name> --change-meta <meta> Where <r_ip>, <r_hostname> and <r_port> are replication ip, hostname and port. Any of the options are optional in both cases. For each search-value, resets the matched device's information. This information isn't used to assign partitions, so you can use 'write_ring' afterward to rewrite the current ring with the newer device information. Any of the parts are optional in the final <ip>:<port>/<device_name>_<meta> parameter; just give what you want to change. For instance set_info d74 _""snet: 5.6.7.8"" would just update the meta data for device id 74. """""" if len(argv) < 5: print(Commands.set_info.__doc__.strip()) print() print(parse_search_value.__doc__.strip()) exit(EXIT_ERROR) try: _parse_set_info_values(argv[3:]) except ValueError as err: print(err) exit(EXIT_ERROR) builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def remove(): """""" swift-ring-builder <builder_file> remove <search-value> [search-value ...] or swift-ring-builder <builder_file> search --region <region> --zone <zone> --ip <ip or hostname> --port <port> --replication-ip <r_ip or r_hostname> --replication-port <r_port> --device <device_name> --meta <meta> --weight <weight> Where <r_ip>, <r_hostname> and <r_port> are replication ip, hostname and port. Any of the options are optional in both cases. Removes the device(s) from the ring. This should normally just be used for a device that has failed. For a device you wish to decommission, it's best to set its weight to 0, wait for it to drain all its data, then use this remove command. This will not take effect until after running 'rebalance'. This is so you can make multiple device changes and rebalance them all just once. """""" if len(argv) < 4: print(Commands.remove.__doc__.strip()) print() print(parse_search_value.__doc__.strip()) exit(EXIT_ERROR) devs = _parse_remove_values(argv[3:]) if not devs: print('Search value matched 0 devices.\n' 'The on-disk ring builder is unchanged.') exit(EXIT_ERROR) if len(devs) > 1: print('Matched more than one device:') for dev in devs: print(' %s' % format_device(dev)) if input('Are you sure you want to remove these %s ' 'devices? (y/N) ' % len(devs)) != 'y': print('Aborting device removals') exit(EXIT_ERROR) for dev in devs: try: builder.remove_dev(dev['id']) except exceptions.RingBuilderError as e: print('-' * 79) print( 'An error occurred while removing device with id %d\n' 'This usually means that you attempted to remove\n' 'the last device in a ring. If this is the case,\n' 'consider creating a new ring instead.\n' 'The on-disk ring builder is unchanged.\n' 'Original exception message: %s' % (dev['id'], e)) print('-' * 79) exit(EXIT_ERROR) print('%s marked for removal and will ' 'be removed next rebalance.' % format_device(dev)) builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def rebalance(): """""" swift-ring-builder <builder_file> rebalance [options] Attempts to rebalance the ring by reassigning partitions that haven't been recently reassigned. """""" usage = Commands.rebalance.__doc__.strip() parser = optparse.OptionParser(usage) parser.add_option('-f', '--force', action='store_true', help='Force a rebalanced ring to save even ' 'if < 1% of parts changed') parser.add_option('-s', '--seed', help=""seed to use for rebalance"") parser.add_option('-d', '--debug', action='store_true', help=""print debug information"") options, args = parser.parse_args(argv) def get_seed(index): if options.seed: return options.seed try: return args[index] except IndexError: pass if options.debug: logger = logging.getLogger(""swift.ring.builder"") logger.disabled = False logger.setLevel(logging.DEBUG) handler = logging.StreamHandler(stdout) formatter = logging.Formatter(""%(levelname)s: %(message)s"") handler.setFormatter(formatter) logger.addHandler(handler) if builder.min_part_seconds_left > 0 and not options.force: print('No partitions could be reassigned.') print('The time between rebalances must be at least ' 'min_part_hours: %s hours (%s remaining)' % ( builder.min_part_hours, timedelta(seconds=builder.min_part_seconds_left))) exit(EXIT_WARNING) devs_changed = builder.devs_changed try: last_balance = builder.get_balance() parts, balance, removed_devs = builder.rebalance(seed=get_seed(3)) except exceptions.RingBuilderError as e: print('-' * 79) print(""An error has occurred during ring validation. Common\n"" ""causes of failure are rings that are empty or do not\n"" ""have enough devices to accommodate the replica count.\n"" ""Original exception message:\n %s"" % (e,)) print('-' * 79) exit(EXIT_ERROR) if not (parts or options.force or removed_devs): print('No partitions could be reassigned.') print('There is no need to do so at this time') exit(EXIT_WARNING) # If we set device's weight to zero, currently balance will be set # special value(MAX_BALANCE) until zero weighted device return all # its partitions. So we cannot check balance has changed. # Thus we need to check balance or last_balance is special value. if not options.force and \ not devs_changed and abs(last_balance - balance) < 1 and \ not (last_balance == MAX_BALANCE and balance == MAX_BALANCE): print('Cowardly refusing to save rebalance as it did not change ' 'at least 1%.') exit(EXIT_WARNING) try: builder.validate() except exceptions.RingValidationError as e: print('-' * 79) print(""An error has occurred during ring validation. Common\n"" ""causes of failure are rings that are empty or do not\n"" ""have enough devices to accommodate the replica count.\n"" ""Original exception message:\n %s"" % (e,)) print('-' * 79) exit(EXIT_ERROR) print('Reassigned %d (%.02f%%) partitions. ' 'Balance is now %.02f. ' 'Dispersion is now %.02f' % ( parts, 100.0 * parts / builder.parts, balance, builder.dispersion)) status = EXIT_SUCCESS if builder.dispersion > 0: print('-' * 79) print( 'NOTE: Dispersion of %.06f indicates some parts are not\n' ' optimally dispersed.\n\n' ' You may want to adjust some device weights, increase\n' ' the overload or review the dispersion report.' % builder.dispersion) status = EXIT_WARNING print('-' * 79) elif balance > 5 and balance / 100.0 > builder.overload: print('-' * 79) print('NOTE: Balance of %.02f indicates you should push this ' % balance) print(' ring, wait at least %d hours, and rebalance/repush.' % builder.min_part_hours) print('-' * 79) status = EXIT_WARNING ts = time() builder.get_ring().save( pathjoin(backup_dir, '%d.' % ts + basename(ring_file))) builder.save(pathjoin(backup_dir, '%d.' % ts + basename(builder_file))) builder.get_ring().save(ring_file) builder.save(builder_file) exit(status) @staticmethod def dispersion(): """""" swift-ring-builder <builder_file> dispersion <search_filter> [options] Output report on dispersion. --verbose option will display dispersion graph broken down by tier You can filter which tiers are evaluated to drill down using a regex in the optional search_filter arguemnt. i.e. swift-ring-builder <builder_file> dispersion ""r\d+z\d+$"" -v ... would only display rows for the zone tiers swift-ring-builder <builder_file> dispersion "".*\-[^/]*$"" -v ... would only display rows for the server tiers The reports columns are: Tier : the name of the tier parts : the total number of partitions with assignment in the tier % : the percentage of parts in the tier with replicas over assigned max : maximum replicas a part should have assigned at the tier 0 - N : the number of parts with that many replicas assigned e.g. Tier: parts % max 0 1 2 3 r1z1 1022 79.45 1 2 210 784 28 r1z1 has 1022 total parts assigned, 79% of them have more than the recommend max replica count of 1 assigned. Only 2 parts in the ring are *not* assigned in this tier (0 replica count), 210 parts have the recommend replica count of 1, 784 have 2 replicas, and 28 sadly have all three replicas in this tier. """""" status = EXIT_SUCCESS if not builder._replica2part2dev: print('Specified builder file \""%s\"" is not rebalanced yet. ' 'Please rebalance first.' % builder_file) exit(EXIT_ERROR) usage = Commands.dispersion.__doc__.strip() parser = optparse.OptionParser(usage) parser.add_option('-v', '--verbose', action='store_true', help='Display dispersion report for tiers') options, args = parser.parse_args(argv) if args[3:]: search_filter = args[3] else: search_filter = None report = dispersion_report(builder, search_filter=search_filter, verbose=options.verbose) print('Dispersion is %.06f, Balance is %.06f, Overload is %0.2f%%' % ( builder.dispersion, builder.get_balance(), builder.overload * 100)) print('Required overload is %.6f%%' % ( builder.get_required_overload() * 100)) if report['worst_tier']: status = EXIT_WARNING print('Worst tier is %.06f (%s)' % (report['max_dispersion'], report['worst_tier'])) if report['graph']: replica_range = range(int(math.ceil(builder.replicas + 1))) part_count_width = '%%%ds' % max(len(str(builder.parts)), 5) replica_counts_tmpl = ' '.join(part_count_width for i in replica_range) tiers = (tier for tier, _junk in report['graph']) tier_width = max(max(map(len, tiers)), 30) header_line = ('%-' + str(tier_width) + 's ' + part_count_width + ' %6s %6s ' + replica_counts_tmpl) % tuple( ['Tier', 'Parts', '%', 'Max'] + replica_range) underline = '-' * len(header_line) print(underline) print(header_line) print(underline) for tier_name, dispersion in report['graph']: replica_counts_repr = replica_counts_tmpl % tuple( dispersion['replicas']) template = ''.join([ '%-', str(tier_width), 's ', part_count_width, ' %6.02f %6d %s', ]) args = ( tier_name, dispersion['placed_parts'], dispersion['dispersion'], dispersion['max_replicas'], replica_counts_repr, ) print(template % args) exit(status) @staticmethod def validate(): """""" swift-ring-builder <builder_file> validate Just runs the validation routines on the ring. """""" builder.validate() exit(EXIT_SUCCESS) @staticmethod def write_ring(): """""" swift-ring-builder <builder_file> write_ring Just rewrites the distributable ring file. This is done automatically after a successful rebalance, so really this is only useful after one or more 'set_info' calls when no rebalance is needed but you want to send out the new device information. """""" ring_data = builder.get_ring() if not ring_data._replica2part2dev_id: if ring_data.devs: print('Warning: Writing a ring with no partition ' 'assignments but with devices; did you forget to run ' '""rebalance""?') else: print('Warning: Writing an empty ring') ring_data.save( pathjoin(backup_dir, '%d.' % time() + basename(ring_file))) ring_data.save(ring_file) exit(EXIT_SUCCESS) @staticmethod def write_builder(): """""" swift-ring-builder <ring_file> write_builder [min_part_hours] Recreate a builder from a ring file (lossy) if you lost your builder backups. (Protip: don't lose your builder backups). [min_part_hours] is one of those numbers lost to the builder, you can change it with set_min_part_hours. """""" if exists(builder_file): print('Cowardly refusing to overwrite existing ' 'Ring Builder file: %s' % builder_file) exit(EXIT_ERROR) if len(argv) > 3: min_part_hours = int(argv[3]) else: stderr.write(""WARNING: default min_part_hours may not match "" ""the value in the lost builder.\n"") min_part_hours = 24 ring = Ring(ring_file) for dev in ring.devs: if dev is None: continue dev.update({ 'parts': 0, 'parts_wanted': 0, }) builder_dict = { 'part_power': 32 - ring._part_shift, 'replicas': float(ring.replica_count), 'min_part_hours': min_part_hours, 'parts': ring.partition_count, 'devs': ring.devs, 'devs_changed': False, 'version': 0, '_replica2part2dev': ring._replica2part2dev_id, '_last_part_moves_epoch': None, '_last_part_moves': None, '_last_part_gather_start': 0, '_remove_devs': [], } builder = RingBuilder.from_dict(builder_dict) for parts in builder._replica2part2dev: for dev_id in parts: builder.devs[dev_id]['parts'] += 1 builder.save(builder_file) @staticmethod def pretend_min_part_hours_passed(): """""" swift-ring-builder <builder_file> pretend_min_part_hours_passed Resets the clock on the last time a rebalance happened, thus circumventing the min_part_hours check. ***************************** USE THIS WITH EXTREME CAUTION ***************************** If you run this command and deploy rebalanced rings before a replication pass completes, you may introduce unavailability in your cluster. This has an end-user impact. """""" builder.pretend_min_part_hours_passed() builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def set_min_part_hours(): """""" swift-ring-builder <builder_file> set_min_part_hours <hours> Changes the <min_part_hours> to the given <hours>. This should be set to however long a full replication/update cycle takes. We're working on a way to determine this more easily than scanning logs. """""" if len(argv) < 4: print(Commands.set_min_part_hours.__doc__.strip()) exit(EXIT_ERROR) builder.change_min_part_hours(int(argv[3])) print('The minimum number of hours before a partition can be ' 'reassigned is now set to %s' % argv[3]) builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def set_replicas(): """""" swift-ring-builder <builder_file> set_replicas <replicas> Changes the replica count to the given <replicas>. <replicas> may be a floating-point value, in which case some partitions will have floor(<replicas>) replicas and some will have ceiling(<replicas>) in the correct proportions. A rebalance is needed to make the change take effect. """""" if len(argv) < 4: print(Commands.set_replicas.__doc__.strip()) exit(EXIT_ERROR) new_replicas = argv[3] try: new_replicas = float(new_replicas) except ValueError: print(Commands.set_replicas.__doc__.strip()) print(""\""%s\"" is not a valid number."" % new_replicas) exit(EXIT_ERROR) if new_replicas < 1: print(""Replica count must be at least 1."") exit(EXIT_ERROR) builder.set_replicas(new_replicas) print('The replica count is now %.6f.' % builder.replicas) print('The change will take effect after the next rebalance.') builder.save(builder_file) exit(EXIT_SUCCESS) @staticmethod def set_overload(): """""" swift-ring-builder <builder_file> set_overload <overload>[%] Changes the overload factor to the given <overload>. A rebalance is needed to make the change take effect. """""" if len(argv) < 4: print(Commands.set_overload.__doc__.strip()) exit(EXIT_ERROR) new_overload = argv[3] if new_overload.endswith('%'): percent = True new_overload = new_overload.rstrip('%') else: percent = False try: new_overload = float(new_overload) except ValueError: print(Commands.set_overload.__doc__.strip()) print(""%r is not a valid number."" % new_overload) exit(EXIT_ERROR) if percent: new_overload *= 0.01 if new_overload < 0: print(""Overload must be non-negative."") exit(EXIT_ERROR) if new_overload > 1 and not percent: print(""!?! Warning overload is greater than 100% !?!"") status = EXIT_WARNING else: status = EXIT_SUCCESS builder.set_overload(new_overload) print('The overload factor is now %0.2f%% (%.6f)' % ( builder.overload * 100, builder.overload)) print('The change will take effect after the next rebalance.') builder.save(builder_file) exit(status) def main(arguments=None): global argv, backup_dir, builder, builder_file, ring_file if arguments is not None: argv = arguments else: argv = sys_argv if len(argv) < 2: print(""swift-ring-builder %(MAJOR_VERSION)s.%(MINOR_VERSION)s\n"" % globals()) print(Commands.default.__doc__.strip()) print() cmds = [c for c in dir(Commands) if getattr(Commands, c).__doc__ and not c.startswith('_') and c != 'default'] cmds.sort() for cmd in cmds: print(getattr(Commands, cmd).__doc__.strip()) print() print(parse_search_value.__doc__.strip()) print() for line in wrap(' '.join(cmds), 79, initial_indent='Quick list: ', subsequent_indent=' '): print(line) print('Exit codes: 0 = operation successful\n' ' 1 = operation completed with warnings\n' ' 2 = error') exit(EXIT_SUCCESS) builder_file, ring_file = parse_builder_ring_filename_args(argv) if builder_file != argv[1]: print('Note: using %s instead of %s as builder file' % ( builder_file, argv[1])) try: builder = RingBuilder.load(builder_file) except exceptions.UnPicklingError as e: print(e) exit(EXIT_ERROR) except (exceptions.FileNotFoundError, exceptions.PermissionError) as e: if len(argv) < 3 or argv[2] not in('create', 'write_builder'): print(e) exit(EXIT_ERROR) except Exception as e: print('Problem occurred while reading builder file: %s. %s' % (builder_file, e)) exit(EXIT_ERROR) backup_dir = pathjoin(dirname(builder_file), 'backups') try: mkdir(backup_dir) except OSError as err: if err.errno != EEXIST: raise if len(argv) == 2: command = ""default"" else: command = argv[2] if argv[0].endswith('-safe'): try: with lock_parent_directory(abspath(builder_file), 15): getattr(Commands, command, Commands.unknown)() except exceptions.LockTimeout: print(""Ring/builder dir currently locked."") exit(2) else: getattr(Commands, command, Commands.unknown)() ",,1251,0
openstack%2Fswift~master~I7d8a5d9618d57b56faa5578e159e081bf4621789,openstack/swift,master,I7d8a5d9618d57b56faa5578e159e081bf4621789,WIP swift-manage-shard-ranges: add shard population analysis,ABANDONED,2021-05-14 14:01:17.000000000,2021-10-29 10:37:38.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-05-14 14:01:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/52dd88c262f7697981746db071eb1607677d1c9e', 'message': 'WIP swift-manage-shard-ranges: add shard population analysis\n\nTODO: needs tests\n\nChange-Id: I7d8a5d9618d57b56faa5578e159e081bf4621789\n'}, {'number': 2, 'created': '2021-05-14 15:23:34.000000000', 'files': ['swift/cli/manage_shard_ranges.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/c52e28f97183afdb6f8696e1cfb07b91bac8cee5', 'message': 'WIP swift-manage-shard-ranges: add shard population analysis\n\nTODO: needs tests\n\nChange-Id: I7d8a5d9618d57b56faa5578e159e081bf4621789\n'}]",3,791488,c52e28f97183afdb6f8696e1cfb07b91bac8cee5,6,1,2,7847,,,0,"WIP swift-manage-shard-ranges: add shard population analysis

TODO: needs tests

Change-Id: I7d8a5d9618d57b56faa5578e159e081bf4621789
",git fetch https://review.opendev.org/openstack/swift refs/changes/88/791488/1 && git format-patch -1 --stdout FETCH_HEAD,['swift/cli/manage_shard_ranges.py'],1,52dd88c262f7697981746db071eb1607677d1c9e,p-smsr-analyze-populations,"import bisectdef analyze_shard_populations(shard_ranges, num_buckets=40): object_counts = sorted([sr.object_count for sr in shard_ranges]) max_count = object_counts[-1] bucket_span = max_count / num_buckets nice_span = 1 while bucket_span > 10 * nice_span: nice_span *= 10 bucket_span = nice_span while bucket_span * num_buckets < max_count: bucket_span += nice_span buckets = {} bucket_end = bucket_span bucket_count = 0 for count in object_counts: if count <= bucket_end: bucket_count += 1 else: buckets[bucket_end] = bucket_count bucket_end += bucket_span bucket_count = 0 return buckets def print_shard_populations(buckets): max_bucket_count = max(buckets.values()) bucket_start = 0 print('\nShard range population distribution:') print(' obj count num shards') for bucket_end in sorted(buckets): num_shards = buckets[bucket_end] bar_length = 50 * num_shards // max_bucket_count print('%8d - %8d %4d %s' % (bucket_start, bucket_end, num_shards, '-' * bar_length)) bucket_start = bucket_end if not args.analyze_includes or 'overlaps' in args.analyze_includes: try: find_repair_solution(shard_ranges, whole_sr, args) except ManageShardRangesException: return EXIT_ERROR if 'populations' in args.analyze_includes: print_shard_populations(analyze_shard_populations(shard_ranges)) analyze_parser.add_argument( '--include', '-i', dest='analyze_includes', action='append', choices=['overlaps', 'populations'], default=[], help='Select which analytics to include.')"," try: find_repair_solution(shard_ranges, whole_sr, args) except ManageShardRangesException: return EXIT_ERROR",49,4
openstack%2Ftripleo-common~master~I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5,openstack/tripleo-common,master,I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5,Delete overcloud-hardened-full image definitions,MERGED,2021-08-24 01:49:50.000000000,2021-10-29 10:27:30.000000000,2021-10-29 10:21:15.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-24 01:49:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/f34a3f7180aa751535138536c1b3dc512672b6c7', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nDepends-On: https://review.rdoproject.org/r/c/rdo-jobs/+/35067\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ci/+/805745\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}, {'number': 2, 'created': '2021-08-26 03:45:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/4b7d20f69ff577231c6356f0d10a1adfbb722726', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nDepends-On: https://review.rdoproject.org/r/c/rdo-jobs/+/35067\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ci/+/805745\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}, {'number': 3, 'created': '2021-08-29 22:55:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ca3458f4765a032059809b186e60da93df037df1', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nDepends-On: https://review.rdoproject.org/r/c/rdo-jobs/+/35067\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ci/+/805745\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}, {'number': 4, 'created': '2021-09-06 22:52:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ca747de4b9509a1c2bd6d1d808d45c062f961fbd', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nDepends-On: https://review.rdoproject.org/r/c/rdo-jobs/+/35067\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ci/+/805745\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}, {'number': 5, 'created': '2021-09-16 23:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/66b2918b1f088490ea66b9181aa342e726941f83', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nDepends-On: https://review.rdoproject.org/r/c/rdo-jobs/+/35067\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ci/+/805745\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}, {'number': 6, 'created': '2021-09-20 21:56:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/4d1b6d019f87dfcbb8570ddef03527e48f37cc93', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nDepends-On: https://review.rdoproject.org/r/c/rdo-jobs/+/35067\nDepends-On: https://review.opendev.org/c/openstack/tripleo-ci/+/805745\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}, {'number': 7, 'created': '2021-10-14 19:40:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e4b5e7dd2b01ac28734e2a336ff49459f7e691d4', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}, {'number': 8, 'created': '2021-10-26 09:16:35.000000000', 'files': ['image-yaml/overcloud-hardened-images-uefi-python3-rt-kernel.yaml', 'image-yaml/overcloud-hardened-images-python3.yaml', 'zuul.d/layout.yaml', 'image-yaml/overcloud-hardened-images-rhel8.yaml', 'image-yaml/overcloud-hardened-images-centos8.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/25f97d8e3a303815924cb3b7789dc43811944181', 'message': ""Delete overcloud-hardened-full image definitions\n\nThe rt-kernel image has been converted to an\novercloud-hardened-uefi-full version. All others are deleted as\nthey're already replaced by the overcloud-hardened-uefi-full image.\n\nBlueprint: whole-disk-default\nChange-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5\n""}]",3,805748,25f97d8e3a303815924cb3b7789dc43811944181,41,7,8,4571,,,0,"Delete overcloud-hardened-full image definitions

The rt-kernel image has been converted to an
overcloud-hardened-uefi-full version. All others are deleted as
they're already replaced by the overcloud-hardened-uefi-full image.

Blueprint: whole-disk-default
Change-Id: I5dfcf4dfa66be57ee3a6f94e1a094dcd527ffac5
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/48/805748/8 && git format-patch -1 --stdout FETCH_HEAD,"['image-yaml/overcloud-hardened-images-uefi-python3-rt-kernel.yaml', 'image-yaml/overcloud-hardened-images-python3.yaml', 'zuul.d/layout.yaml', 'image-yaml/overcloud-hardened-images-rhel8.yaml', 'image-yaml/overcloud-hardened-images-centos8.yaml']",5,f34a3f7180aa751535138536c1b3dc512672b6c7,bp/whole-disk-default,,disk_images: - imagename: overcloud-hardened-full type: qcow2 distro: centos environment: DIB_RELEASE: '8' elements: - selinux-permissive - interface-names ,6,70
openstack%2Fkolla-ansible~stable%2Ftrain~I44d5c62eae6778f2fb2a8a12adc9561b994b1302,openstack/kolla-ansible,stable/train,I44d5c62eae6778f2fb2a8a12adc9561b994b1302,Use hostPID for ceph-mgr deployment,ABANDONED,2020-11-18 08:16:10.000000000,2021-10-29 10:18:57.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23266}, {'_account_id': 26285}, {'_account_id': 30523}, {'_account_id': 32067}]","[{'number': 1, 'created': '2020-11-18 08:16:10.000000000', 'files': ['ansible/roles/ceph/tasks/start_mgrs.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/0e0cd7f8545a3ae1294fa7a196ebccc1bb80207a', 'message': 'Use hostPID for ceph-mgr deployment\n\nThis change is to address a memory leak in the ceph-mgr deployment.\n\nrefer https://review.opendev.org/#/c/744236/\n\nChange-Id: I44d5c62eae6778f2fb2a8a12adc9561b994b1302\n'}]",0,763134,0e0cd7f8545a3ae1294fa7a196ebccc1bb80207a,11,7,1,23266,,,0,"Use hostPID for ceph-mgr deployment

This change is to address a memory leak in the ceph-mgr deployment.

refer https://review.opendev.org/#/c/744236/

Change-Id: I44d5c62eae6778f2fb2a8a12adc9561b994b1302
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/34/763134/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/ceph/tasks/start_mgrs.yml'],1,0e0cd7f8545a3ae1294fa7a196ebccc1bb80207a,," pid_mode: ""host""",,1,0
openstack%2Fkolla-ansible~stable%2Frocky~I44d5c62eae6778f2fb2a8a12adc9561b994b1302,openstack/kolla-ansible,stable/rocky,I44d5c62eae6778f2fb2a8a12adc9561b994b1302,Use hostPID for ceph-mgr deployment,ABANDONED,2020-11-18 08:24:36.000000000,2021-10-29 10:17:07.000000000,,"[{'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2020-11-18 08:24:36.000000000', 'files': ['ansible/roles/ceph/tasks/start_mgrs.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/a6f42383c433d0839fdfc4e3ea4a11b07b24d154', 'message': 'Use hostPID for ceph-mgr deployment\n\nThis change is to address a memory leak in the ceph-mgr deployment.\n\nrefer https://review.opendev.org/#/c/744236/\n\nChange-Id: I44d5c62eae6778f2fb2a8a12adc9561b994b1302\n(cherry picked from commit 0e0cd7f8545a3ae1294fa7a196ebccc1bb80207a)\n'}]",0,763135,a6f42383c433d0839fdfc4e3ea4a11b07b24d154,5,2,1,23266,,,0,"Use hostPID for ceph-mgr deployment

This change is to address a memory leak in the ceph-mgr deployment.

refer https://review.opendev.org/#/c/744236/

Change-Id: I44d5c62eae6778f2fb2a8a12adc9561b994b1302
(cherry picked from commit 0e0cd7f8545a3ae1294fa7a196ebccc1bb80207a)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/35/763135/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/ceph/tasks/start_mgrs.yml'],1,a6f42383c433d0839fdfc4e3ea4a11b07b24d154,," pid_mode: ""host""",,1,0
openstack%2Fkolla~master~I33b644b2cf83638731da1f6da661f323f1fc8e18,openstack/kolla,master,I33b644b2cf83638731da1f6da661f323f1fc8e18,CI: Add missed Debian upgrade jobs,MERGED,2021-10-27 19:30:47.000000000,2021-10-29 10:06:50.000000000,2021-10-29 10:01:51.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-10-27 19:30:47.000000000', 'files': ['.zuul.d/debian.yaml'], 'web_link': 'https://opendev.org/openstack/kolla/commit/8b54afbaab1f4152938a8b4f39ecb51114cea39e', 'message': 'CI: Add missed Debian upgrade jobs\n\nSimply missed in [1].\n\n[1] https://review.opendev.org/c/openstack/kolla/+/815657\n\nChange-Id: I33b644b2cf83638731da1f6da661f323f1fc8e18\n'}]",0,815737,8b54afbaab1f4152938a8b4f39ecb51114cea39e,9,3,1,30491,,,0,"CI: Add missed Debian upgrade jobs

Simply missed in [1].

[1] https://review.opendev.org/c/openstack/kolla/+/815657

Change-Id: I33b644b2cf83638731da1f6da661f323f1fc8e18
",git fetch https://review.opendev.org/openstack/kolla refs/changes/37/815737/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.d/debian.yaml'],1,8b54afbaab1f4152938a8b4f39ecb51114cea39e,make-debian-voting, - kolla-ansible-debian-source-upgrade - kolla-ansible-debian-source-upgrade,,2,0
openstack%2Fdiskimage-builder~master~Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6,openstack/diskimage-builder,master,Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6,Add support for CentOS Stream 9 in DIB,MERGED,2021-09-28 10:44:14.000000000,2021-10-29 10:00:25.000000000,2021-10-29 09:55:30.000000000,"[{'_account_id': 4146}, {'_account_id': 4571}, {'_account_id': 7118}, {'_account_id': 8449}, {'_account_id': 12393}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-28 10:44:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/6a8791853b7d934287f574fd97b92e2f244cbacf', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds.\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 2, 'created': '2021-09-28 12:13:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/24db5a7059c415c4e3df340076e13e7bd421df50', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds.\n\nCurrently testing element centos-minimal.\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 3, 'created': '2021-09-28 16:28:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/2b046c5fb0d08f86f883215e25959793f2fa3a80', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds:\n\n- Repos are configured using production composes provided by CentOS infra team\n  until they are properly populated in official mirrors.\n- A repository `Stream-missing-rdo` is being added which contains some packages\n  which are missing in production composes but should land before being pushed to\n  mirrors. This is the case for redhat-lsb-core, i.e.\n\nThis patch is beint tested together with [2] to apply followint list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://composes.stream.centos.org/production/latest-CentOS-Stream/\n[2] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 4, 'created': '2021-10-11 16:12:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/680e16434eac065cd3748774937e224dca011159', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds:\n\n- Repos are configured using production composes provided by CentOS infra team\n  until they are properly populated in official mirrors.\n- A repository `Stream-missing-rdo` is being added which contains some packages\n  which are missing in production composes but should land before being pushed to\n  mirrors. This is the case for redhat-lsb-core, i.e.\n\nThis patch is beint tested together with [2] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://composes.stream.centos.org/production/latest-CentOS-Stream/\n[2] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 5, 'created': '2021-10-12 15:25:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/c8d2ab21610f14e69efbb3665551b190a7a7ac04', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds:\n\n- Repos are configured using production composes provided by CentOS infra team\n  until they are properly populated in official mirrors.\n- A repository `Stream-missing-rdo` is being added which contains some packages\n  which are missing in production composes but should land before being pushed to\n  mirrors. This is the case for redhat-lsb-core, i.e.\n\nAlso enable centos-minimal/8-stream-build-succeeds tests.\n\nThis patch is beint tested together with [2] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://composes.stream.centos.org/production/latest-CentOS-Stream/\n[2] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 6, 'created': '2021-10-13 09:22:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/8630d2473927eeb5950a67d7e218c940db089088', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds:\n\n- Repos are configured using production composes provided by CentOS infra team\n  until they are properly populated in official mirrors.\n- A repository `Stream-missing-rdo` is being added which contains some packages\n  which are missing in production composes but should land before being pushed to\n  mirrors. This is the case for redhat-lsb-core, i.e.\n\nAlso enable centos-minimal/8-stream-build-succeeds tests.\n\nThis patch is beint tested together with [2] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://composes.stream.centos.org/production/latest-CentOS-Stream/\n[2] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 7, 'created': '2021-10-14 07:58:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/ac718db1a0c2449c16ac1073f6cc31166838d9a6', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds:\n\n- Repos are configured using production composes provided by CentOS infra team\n  until they are properly populated in official mirrors.\n- A repository `Stream-missing-rdo` is being added which contains some packages\n  which are missing in production composes but should land before being pushed to\n  mirrors. This is the case for redhat-lsb-core, i.e.\n- Build c9-stream image on c8-stream image as bionic/focal images\nhave too old rpm package version which cannot process signed c9 rpms.\n\nAlso enable centos-minimal/8-stream-build-succeeds tests.\n\nThis patch is beint tested together with [2] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://composes.stream.centos.org/production/latest-CentOS-Stream/\n[2] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 8, 'created': '2021-10-19 16:01:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/4a57858f7082ae5661ed8c8302eb00e93b72a3ec', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds:\n- Build c9-stream image on c8-stream image as bionic/focal images\nhave too old rpm package version which cannot process signed c9 rpms.\n\nAlso enable centos-minimal/8-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 9, 'created': '2021-10-19 16:13:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/1ee98db85e534b51c23cfa76b63e71ece1eed69e', 'message': '[WIP] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and preview composes are being\npublished in [1] although some packages are still known to be missed in\nthe repos.\n\nThis patch is for preparation for CS9, including some needed patches and\napplying some workarounds:\n- Build c9-stream image on c8-stream image as bionic/focal images\nhave too old rpm package version which cannot process signed c9 rpms.\n\nAlso enable centos-minimal/8-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 10, 'created': '2021-10-20 08:07:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/67ced67ec46e52f38e0bf4a838f5e80b57e1324e', 'message': 'Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 11, 'created': '2021-10-20 08:12:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/51c8b420477f18e3174653b437d9d4abca0f9065', 'message': 'Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 12, 'created': '2021-10-20 09:05:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/83f0f98eaa04e2f3ed103ed3025f514bb36d49de', 'message': '[wip] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 13, 'created': '2021-10-20 09:07:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/801c93e92a57d4c972a943e21d8bae2db9639cda', 'message': '[wip] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 14, 'created': '2021-10-20 09:09:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/1888eb28db74ff5ddb71311cd5f1a32d3ea31743', 'message': '[wip] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 15, 'created': '2021-10-20 09:33:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/60f72d907b132458240dda02c295ee2f88ba3e78', 'message': '[wip] Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 16, 'created': '2021-10-20 10:35:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/bd89d29d08646d28bf48d218a7ee8843fae38e3d', 'message': 'Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 17, 'created': '2021-10-20 15:02:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/5699b5c3c67a9e730e3b2da22772f88ae7300bd2', 'message': 'Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 18, 'created': '2021-10-25 07:40:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/d215b90dc70777d883ad62bd66eb9309e71b69b6', 'message': 'Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 19, 'created': '2021-10-27 07:18:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/465355fa3855e9896bbd58be7bbf1dd64b9da29e', 'message': 'Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}, {'number': 20, 'created': '2021-10-27 11:42:16.000000000', 'files': ['diskimage_builder/elements/yum-minimal/pkg-map', 'diskimage_builder/elements/yum-minimal/root.d/08-yum-chroot', 'contrib/setup-gate-mirrors.sh', 'tests/install_test_deps.sh', 'diskimage_builder/elements/centos-minimal/test-elements/9-stream-build-succeeds/README.rst', 'diskimage_builder/elements/centos-minimal/yum.repos.d/8-stream/appstream.repo', 'diskimage_builder/elements/centos-minimal/yum.repos.d/8-stream/base.repo', 'roles/dib-functests/tasks/main.yaml', '.zuul.d/jobs.yaml', 'roles/dib-setup-gate-mirrors/templates/centos-minimal/9-stream/appstream.repo.j2', 'diskimage_builder/elements/bootloader/finalise.d/50-bootloader', 'roles/dib-setup-gate-mirrors/tasks/main.yaml', 'diskimage_builder/elements/centos-minimal/test-elements/9-stream-build-succeeds/element-deps', '.zuul.d/project.yaml', 'roles/dib-setup-gate-mirrors/templates/centos-minimal/9-stream/base.repo.j2', 'diskimage_builder/elements/centos-minimal/yum.repos.d/9-stream/appstream.repo', 'diskimage_builder/elements/centos-minimal/yum.repos.d/9-stream/base.repo', 'diskimage_builder/elements/centos-minimal/test-elements/9-stream-build-succeeds/environment.d/09-set-distro.bash', 'diskimage_builder/elements/yum-minimal/package-installs.yaml'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/cdff9045c08e825a9367a353ba43df05b3f84bc0', 'message': 'Add support for CentOS Stream 9 in DIB\n\nCentOS Stream 9 is close to be released, and official mirrors are\nalready poplated. This patch is adding support to centos-minimal in CS9.\n\nAlso enable centos-minimal/[8,9]-stream-build-succeeds tests.\n\nThis patch is being tested together with [1] to apply following list of elements:\n\n vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs\n\n[1] https://review.opendev.org/c/openstack/project-config/+/811442\n\nChange-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6\n'}]",33,811392,cdff9045c08e825a9367a353ba43df05b3f84bc0,93,6,20,16312,,,0,"Add support for CentOS Stream 9 in DIB

CentOS Stream 9 is close to be released, and official mirrors are
already poplated. This patch is adding support to centos-minimal in CS9.

Also enable centos-minimal/[8,9]-stream-build-succeeds tests.

This patch is being tested together with [1] to apply following list of elements:

 vm centos-minimal simple-init growroot nodepool-base openstack-repos infra-package-needs

[1] https://review.opendev.org/c/openstack/project-config/+/811442

Change-Id: Iecf7f7e4c992bb23437b6461cdd04cdca96aafa6
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/92/811392/1 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/bootloader/finalise.d/50-bootloader', 'diskimage_builder/elements/centos-minimal/yum.repos.d/9-stream/crb.repo', 'diskimage_builder/elements/centos-minimal/yum.repos.d/9-stream/appstream.repo', 'diskimage_builder/elements/centos-minimal/yum.repos.d/9-stream/base.repo', 'diskimage_builder/elements/redhat-common/pkg-map', 'diskimage_builder/elements/centos-minimal/yum.repos.d/9-stream/ha.repo']",6,6a8791853b7d934287f574fd97b92e2f244cbacf,change-811392-1,[Stream-HA] name=CentOS-Stream - HA baseurl=https://composes.stream.centos.org/production/latest-CentOS-Stream/compose/HighAvailability/$basearch/os/ gpgcheck=0 ,,26,8
openstack%2Fpuppet-tripleo~stable%2Fvictoria~Ic6ac8d21d12389e70cd382018290324d3ae948ce,openstack/puppet-tripleo,stable/victoria,Ic6ac8d21d12389e70cd382018290324d3ae948ce,Make sure resource_op_defaults are set before bundles,MERGED,2021-10-25 21:17:20.000000000,2021-10-29 08:44:50.000000000,2021-10-29 08:44:50.000000000,"[{'_account_id': 20172}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-25 21:17:20.000000000', 'files': ['manifests/profile/base/pacemaker.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/f472e5f795e72bd9de32d302e531e7ea7b309240', 'message': ""Make sure resource_op_defaults are set before bundles\n\nSee LP#1948032. We set a higher default resource op time out because\npodman often times out within the default 20s. We need to guarantee\nthat this timeout is set *before* we create any bundles otherwise\nit might be too late and we'd fail a deployment like described in the\nLP.\n\nChange-Id: Ic6ac8d21d12389e70cd382018290324d3ae948ce\nCloses-Bug: #1948032\n(cherry picked from commit e4e9be76dc3f6f1a1ee3f79e05d5167eddc34563)\n(cherry picked from commit fbdc1403bf5dd7e91b4c93a631346cd8cde5b43f)\n""}]",4,815361,f472e5f795e72bd9de32d302e531e7ea7b309240,22,4,1,20172,,,0,"Make sure resource_op_defaults are set before bundles

See LP#1948032. We set a higher default resource op time out because
podman often times out within the default 20s. We need to guarantee
that this timeout is set *before* we create any bundles otherwise
it might be too late and we'd fail a deployment like described in the
LP.

Change-Id: Ic6ac8d21d12389e70cd382018290324d3ae948ce
Closes-Bug: #1948032
(cherry picked from commit e4e9be76dc3f6f1a1ee3f79e05d5167eddc34563)
(cherry picked from commit fbdc1403bf5dd7e91b4c93a631346cd8cde5b43f)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/61/815361/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/profile/base/pacemaker.pp'],1,f472e5f795e72bd9de32d302e531e7ea7b309240,," # See LP#1948032. We want to ensure that we set the default resource time out # before we create any bundles. Because the default timeout affects how long # we wait for podman, and on a starved system the default of 20s might bite us # too early on Pcmk_resource_default<||> -> Pcmk_bundle<||>",,5,0
openstack%2Fpuppet-tripleo~stable%2Fussuri~Icf8b6ae0a94edd4bd3dd36ff3bd006112a63c075,openstack/puppet-tripleo,stable/ussuri,Icf8b6ae0a94edd4bd3dd36ff3bd006112a63c075,Run TripleO jobs on CentOS8 instead of CentOS7,MERGED,2021-09-17 10:21:57.000000000,2021-10-29 08:44:48.000000000,2021-10-29 08:44:48.000000000,"[{'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-09-17 10:21:57.000000000', 'files': ['zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/cfc5ae312da77fbe59b2b76c5e2ff1ade8a41033', 'message': 'Run TripleO jobs on CentOS8 instead of CentOS7\n\nAs we are cleaning up the c7 jobs and obselete featuresets [1].\nThis change replaces usage of CentOS7 in TripleO jobs by CentOS8.\n\n[1]: https://review.opendev.org/q/topic:%22cleanup_featuresets%22+(status:open%20OR%20status:merged)\n\nChange-Id: Icf8b6ae0a94edd4bd3dd36ff3bd006112a63c075\n'}]",1,809627,cfc5ae312da77fbe59b2b76c5e2ff1ade8a41033,10,4,1,20182,,,0,"Run TripleO jobs on CentOS8 instead of CentOS7

As we are cleaning up the c7 jobs and obselete featuresets [1].
This change replaces usage of CentOS7 in TripleO jobs by CentOS8.

[1]: https://review.opendev.org/q/topic:%22cleanup_featuresets%22+(status:open%20OR%20status:merged)

Change-Id: Icf8b6ae0a94edd4bd3dd36ff3bd006112a63c075
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/27/809627/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/layout.yaml'],1,cfc5ae312da77fbe59b2b76c5e2ff1ade8a41033,c7-to-c8, - tripleo-ci-centos-8-scenario007-multinode-oooq-container:, - tripleo-ci-centos-7-scenario007-multinode-oooq-container:,1,1
openstack%2Fnova~stable%2Ftrain~Ia53ff43e6964963cdf295604ba0fb7171389606e,openstack/nova,stable/train,Ia53ff43e6964963cdf295604ba0fb7171389606e,Invalidate provider tree when compute node disappears,NEW,2021-09-30 01:58:04.000000000,2021-10-29 08:44:32.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d2a0961e220f83b63ab0584adff1b413fb5c07e9', 'message': 'Invalidate provider tree when compute node disappears\n\nThere is a race condition in nova-compute with the ironic virt driver\nas nodes get rebalanced. It can lead to compute nodes being removed in\nthe DB and not repopulated. Ultimately this prevents these nodes from\nbeing scheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a\nhost which thinks it is an orphan, then the resource provider for that\nnode might also be deleted. The compute host that owns the node might\nnot recreate the resource provider if it exists in the provider tree\ncache.\n\nThis change fixes the issue by clearing resource providers from the\nprovider tree cache for which a compute node entry does not exist. Then,\nwhen the available resource for the node is updated, the resource\nproviders are not found in the cache and get recreated in placement.\n\nChange-Id: Ia53ff43e6964963cdf295604ba0fb7171389606e\nRelated-Bug: #1853009\nRelated-Bug: #1841481\n(cherry picked from commit 2bb4527228c8e6fa4a1fa6cfbe80e8790e4e0789)\n(cherry picked from commit 0fc104eeea065579f7fa9b52794d5151baefc84c)\n(cherry picked from commit 456bcc784340a5674d25fbe6e707c36c583b504f)\n(cherry picked from commit 8fa5b881c9b8fb78ceca7ae02d808f1fe64d72e4)\n'}, {'number': 2, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/compute/test_resource_tracker.py', 'nova/scheduler/client/report.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/accb4fe445eaede719ad70502647365738c4d362', 'message': 'Invalidate provider tree when compute node disappears\n\nThere is a race condition in nova-compute with the ironic virt driver\nas nodes get rebalanced. It can lead to compute nodes being removed in\nthe DB and not repopulated. Ultimately this prevents these nodes from\nbeing scheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a\nhost which thinks it is an orphan, then the resource provider for that\nnode might also be deleted. The compute host that owns the node might\nnot recreate the resource provider if it exists in the provider tree\ncache.\n\nThis change fixes the issue by clearing resource providers from the\nprovider tree cache for which a compute node entry does not exist. Then,\nwhen the available resource for the node is updated, the resource\nproviders are not found in the cache and get recreated in placement.\n\nChange-Id: Ia53ff43e6964963cdf295604ba0fb7171389606e\nRelated-Bug: #1853009\nRelated-Bug: #1841481\n(cherry picked from commit 2bb4527228c8e6fa4a1fa6cfbe80e8790e4e0789)\n(cherry picked from commit 0fc104eeea065579f7fa9b52794d5151baefc84c)\n(cherry picked from commit 456bcc784340a5674d25fbe6e707c36c583b504f)\n(cherry picked from commit 8fa5b881c9b8fb78ceca7ae02d808f1fe64d72e4)\n'}]",2,811823,accb4fe445eaede719ad70502647365738c4d362,11,2,2,4690,,,0,"Invalidate provider tree when compute node disappears

There is a race condition in nova-compute with the ironic virt driver
as nodes get rebalanced. It can lead to compute nodes being removed in
the DB and not repopulated. Ultimately this prevents these nodes from
being scheduled to.

The issue being addressed here is that if a compute node is deleted by a
host which thinks it is an orphan, then the resource provider for that
node might also be deleted. The compute host that owns the node might
not recreate the resource provider if it exists in the provider tree
cache.

This change fixes the issue by clearing resource providers from the
provider tree cache for which a compute node entry does not exist. Then,
when the available resource for the node is updated, the resource
providers are not found in the cache and get recreated in placement.

Change-Id: Ia53ff43e6964963cdf295604ba0fb7171389606e
Related-Bug: #1853009
Related-Bug: #1841481
(cherry picked from commit 2bb4527228c8e6fa4a1fa6cfbe80e8790e4e0789)
(cherry picked from commit 0fc104eeea065579f7fa9b52794d5151baefc84c)
(cherry picked from commit 456bcc784340a5674d25fbe6e707c36c583b504f)
(cherry picked from commit 8fa5b881c9b8fb78ceca7ae02d808f1fe64d72e4)
",git fetch https://review.opendev.org/openstack/nova refs/changes/23/811823/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_resource_tracker.py', 'nova/scheduler/client/report.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",4,d2a0961e220f83b63ab0584adff1b413fb5c07e9,bug/1853009," # FIXME(mgoddard): Resource provider not recreated here, due to # https://bugs.launchpad.net/nova/+bug/1853159. self.assertFalse(host_b.manager.rt.reportclient._provider_tree.exists( # The resource provider has now been created. self.assertEqual(1, len(rps), rps) self.assertEqual(self.nodename, rps[0]['name'])"," # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. # There is still no RP. self.assertEqual(0, len(rps), rps) # But the RP it exists in the provider tree. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename))",25,20
openstack%2Fcyborg-specs~master~Ida74041552060714de9a085ae99a6ef55a052778,openstack/cyborg-specs,master,Ida74041552060714de9a085ae99a6ef55a052778,Bump hacking min version to 3.0.1,MERGED,2020-10-14 09:24:12.000000000,2021-10-29 08:40:35.000000000,2021-10-29 08:39:09.000000000,"[{'_account_id': 22348}, {'_account_id': 31412}, {'_account_id': 32231}, {'_account_id': 32291}]","[{'number': 1, 'created': '2020-10-14 09:24:12.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/cyborg-specs/commit/3b8a78c2e2412b65dc210c5f34b3542ccab48a28', 'message': 'Bump hacking min version to 3.0.1\n\nhacking 3.0.1 fix the pinning of flake8 to avoid bringing in a new\nversion with new checks.\n\nbumping the min version for hacking so that any older hacking versions\nwhich auto adopt the new checks are not used.\n\nChange-Id: Ida74041552060714de9a085ae99a6ef55a052778\n'}]",0,758046,3b8a78c2e2412b65dc210c5f34b3542ccab48a28,9,4,1,32238,,,0,"Bump hacking min version to 3.0.1

hacking 3.0.1 fix the pinning of flake8 to avoid bringing in a new
version with new checks.

bumping the min version for hacking so that any older hacking versions
which auto adopt the new checks are not used.

Change-Id: Ida74041552060714de9a085ae99a6ef55a052778
",git fetch https://review.opendev.org/openstack/cyborg-specs refs/changes/46/758046/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,3b8a78c2e2412b65dc210c5f34b3542ccab48a28,,"hacking>=3.0.1,<3.1 # Apache-2.0","hacking>=3.0,<3.1 # Apache-2.0",1,1
openstack%2Fnova~master~Icc47d5ff64bc2cc04ab960d4ceeec9db9b3a4877,openstack/nova,master,Icc47d5ff64bc2cc04ab960d4ceeec9db9b3a4877,Log error msg when delete resource provider failed,ABANDONED,2021-10-26 13:12:39.000000000,2021-10-29 08:32:22.000000000,,"[{'_account_id': 9708}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 13:12:39.000000000', 'files': ['nova/tests/unit/scheduler/client/test_report.py', 'nova/scheduler/client/report.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/336b2b63b2488b95143fcd048b3fd26645ab98ec', 'message': 'Log error msg when delete resource provider failed\n\nChange-Id: Icc47d5ff64bc2cc04ab960d4ceeec9db9b3a4877\n'}]",6,815498,336b2b63b2488b95143fcd048b3fd26645ab98ec,12,2,1,31412,,,0,"Log error msg when delete resource provider failed

Change-Id: Icc47d5ff64bc2cc04ab960d4ceeec9db9b3a4877
",git fetch https://review.opendev.org/openstack/nova refs/changes/98/815498/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/scheduler/client/test_report.py', 'nova/scheduler/client/report.py']",2,336b2b63b2488b95143fcd048b3fd26645ab98ec,," exception.ResourceProviderDeletionFailed) as e: LOG.error(""Failed to delete resource provider: %s"", str(e))", exception.ResourceProviderDeletionFailed): # TODO(efried): Raise these. Right now this is being # left a no-op for backward compatibility. pass,3,5
openstack%2Fnova~stable%2Ftrain~I39241223b447fcc671161c370dbf16e1773b684a,openstack/nova,stable/train,I39241223b447fcc671161c370dbf16e1773b684a,Clear rebalanced compute nodes from resource tracker,NEW,2021-09-30 01:58:04.000000000,2021-10-29 07:08:52.000000000,,"[{'_account_id': 4690}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4c5791175c9416644d995a09f30fb1f1c3e5ad5a', 'message': 'Clear rebalanced compute nodes from resource tracker\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a host\nwhich thinks it is an orphan, then the compute host that actually owns the node\nmight not recreate it if the node is already in its resource tracker cache.\n\nThis change fixes the issue by clearing nodes from the resource tracker cache\nfor which a compute node entry does not exist. Then, when the available\nresource for the node is updated, the compute node object is not found in the\ncache and gets recreated.\n\nConflicts:\n    nova/compute/resource_tracker.py\n    nova/tests/unit/compute/test_compute_mgr.py\n    nova/tests/unit/compute/test_resource_tracker.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * Ica180165184b319651d22fe77e076af036228860 (Set instance host and\n    drop migration under lock)\n  * Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (Use fair locks in\n    resource tracker)\n  * I739025dacbcaa0f7adbe612c064f979bf6390880 (Ensures that\n    COMPUTE_RESOURCE_SEMAPHORE usage is fair)\n  * I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n    _delete_provider)\n\nChange-Id: I39241223b447fcc671161c370dbf16e1773b684a\nPartial-Bug: #1853009\n(cherry picked from commit 32676a9f45807ea8770dc7bdff1e859673af1b61)\n(cherry picked from commit f950cedf17cc4c3ce9d094dbfde5e4cf013260f7)\n(cherry picked from commit 32887f82c9bd430f285ff4418811dffdd88e398f)\n(cherry picked from commit 4b5d0804749685c8afe182b716b7536045432a7e)\n'}, {'number': 2, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/53d0851d01097912b1b4c785a124a7320f3c4c3d', 'message': 'Clear rebalanced compute nodes from resource tracker\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a host\nwhich thinks it is an orphan, then the compute host that actually owns the node\nmight not recreate it if the node is already in its resource tracker cache.\n\nThis change fixes the issue by clearing nodes from the resource tracker cache\nfor which a compute node entry does not exist. Then, when the available\nresource for the node is updated, the compute node object is not found in the\ncache and gets recreated.\n\nConflicts:\n    nova/compute/resource_tracker.py\n    nova/tests/unit/compute/test_compute_mgr.py\n    nova/tests/unit/compute/test_resource_tracker.py\n\nNOTE(melwitt): The conflicts and difference from the cherry picked\nchange are because the following changes are not in Train:\n\n  * Ica180165184b319651d22fe77e076af036228860 (Set instance host and\n    drop migration under lock)\n  * Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (Use fair locks in\n    resource tracker)\n  * I739025dacbcaa0f7adbe612c064f979bf6390880 (Ensures that\n    COMPUTE_RESOURCE_SEMAPHORE usage is fair)\n  * I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n    _delete_provider)\n\nChange-Id: I39241223b447fcc671161c370dbf16e1773b684a\nPartial-Bug: #1853009\n(cherry picked from commit 32676a9f45807ea8770dc7bdff1e859673af1b61)\n(cherry picked from commit f950cedf17cc4c3ce9d094dbfde5e4cf013260f7)\n(cherry picked from commit 32887f82c9bd430f285ff4418811dffdd88e398f)\n(cherry picked from commit 4b5d0804749685c8afe182b716b7536045432a7e)\n'}]",4,811822,53d0851d01097912b1b4c785a124a7320f3c4c3d,11,3,2,4690,,,0,"Clear rebalanced compute nodes from resource tracker

There is a race condition in nova-compute with the ironic virt driver as
nodes get rebalanced. It can lead to compute nodes being removed in the
DB and not repopulated. Ultimately this prevents these nodes from being
scheduled to.

The issue being addressed here is that if a compute node is deleted by a host
which thinks it is an orphan, then the compute host that actually owns the node
might not recreate it if the node is already in its resource tracker cache.

This change fixes the issue by clearing nodes from the resource tracker cache
for which a compute node entry does not exist. Then, when the available
resource for the node is updated, the compute node object is not found in the
cache and gets recreated.

Conflicts:
    nova/compute/resource_tracker.py
    nova/tests/unit/compute/test_compute_mgr.py
    nova/tests/unit/compute/test_resource_tracker.py

NOTE(melwitt): The conflicts and difference from the cherry picked
change are because the following changes are not in Train:

  * Ica180165184b319651d22fe77e076af036228860 (Set instance host and
    drop migration under lock)
  * Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (Use fair locks in
    resource tracker)
  * I739025dacbcaa0f7adbe612c064f979bf6390880 (Ensures that
    COMPUTE_RESOURCE_SEMAPHORE usage is fair)
  * I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from
    _delete_provider)

Change-Id: I39241223b447fcc671161c370dbf16e1773b684a
Partial-Bug: #1853009
(cherry picked from commit 32676a9f45807ea8770dc7bdff1e859673af1b61)
(cherry picked from commit f950cedf17cc4c3ce9d094dbfde5e4cf013260f7)
(cherry picked from commit 32887f82c9bd430f285ff4418811dffdd88e398f)
(cherry picked from commit 4b5d0804749685c8afe182b716b7536045432a7e)
",git fetch https://review.opendev.org/openstack/nova refs/changes/22/811822/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",5,4c5791175c9416644d995a09f30fb1f1c3e5ad5a,bug/1853009," # Verify that the node was recreated. self._assert_hypervisor_api(self.nodename, 'host_b') # But due to https://bugs.launchpad.net/nova/+bug/1853159 the compute # node is not cached in the RT. self.assertNotIn(self.nodename, host_b.manager.rt.compute_nodes) # host_b[1]: Should add compute node to RT cache and recreate resource # provider. # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. host_b.manager.update_available_resource(self.ctxt) # Verify that the node still exists. self._assert_hypervisor_api(self.nodename, 'host_b') # And it is now in the RT cache. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes) # There is still no RP. rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # But the RP it exists in the provider tree. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename)) "," cn_host_b_node = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_b', 'host_b', ) self.assertIn( 'Deleting orphan compute node %s hypervisor host ' 'is host_b, nodes are' % cn_host_b_node.id, self.stdlog.logger.output) # FIXME(mgoddard): Compute node not recreated here, because it is # already in RT.compute_nodes. See # https://bugs.launchpad.net/nova/+bug/1853009. # Verify that the node was not recreated. hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) # But the compute node exists in the RT. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes)",66,18
openstack%2Fnova~stable%2Ftrain~I260c1fded79a85d4899e94df4d9036a1ee437f02,openstack/nova,stable/train,I260c1fded79a85d4899e94df4d9036a1ee437f02,Prevent deletion of a compute node belonging to another host,NEW,2021-09-30 01:58:04.000000000,2021-10-29 07:07:53.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/491bc64dff7a1c1f74d957daa7323085c729f915', 'message': 'Prevent deletion of a compute node belonging to another host\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe main race condition involved is in update_available_resources in\nthe compute manager. When the list of compute nodes is queried, there is\na compute node belonging to the host that it does not expect to be\nmanaging, i.e. it is an orphan. Between that time and deleting the\norphan, the real owner of the compute node takes ownership of it ( in\nthe resource tracker). However, the node is still deleted as the first\nhost is unaware of the ownership change.\n\nThis change prevents this from occurring by filtering on the host when\ndeleting a compute node. If another compute host has taken ownership of\na node, it will have updated the host field and this will prevent\ndeletion from occurring. The first host sees this has happened via the\nComputeHostNotFound exception, and avoids deleting its resource\nprovider.\n\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nConflicts:\n    nova/compute/manager.py\n\nNOTE(melwitt): The conflict is because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nCloses-Bug: #1853009\nRelated-Bug: #1841481\n\nChange-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02\n(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)\n(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)\n(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)\n(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)\n'}, {'number': 2, 'created': '2021-09-30 04:25:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a42f3ac4d3de8289f08debd731979c053a8d8e53', 'message': ""Prevent deletion of a compute node belonging to another host\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe main race condition involved is in update_available_resources in\nthe compute manager. When the list of compute nodes is queried, there is\na compute node belonging to the host that it does not expect to be\nmanaging, i.e. it is an orphan. Between that time and deleting the\norphan, the real owner of the compute node takes ownership of it ( in\nthe resource tracker). However, the node is still deleted as the first\nhost is unaware of the ownership change.\n\nThis change prevents this from occurring by filtering on the host when\ndeleting a compute node. If another compute host has taken ownership of\na node, it will have updated the host field and this will prevent\ndeletion from occurring. The first host sees this has happened via the\nComputeHostNotFound exception, and avoids deleting its resource\nprovider.\n\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nConflicts:\n    nova/compute/manager.py\n\nNOTE(melwitt): The conflict is because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nNOTE(melwitt): Difference from the cherry picked change: the 'uuid'\nattribute needed to be added to the Mock spec in\nnova/tests/unit/compute/test_compute_mgr.py because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nCloses-Bug: #1853009\nRelated-Bug: #1841481\n\nChange-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02\n(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)\n(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)\n(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)\n(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)\n""}, {'number': 3, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/objects/test_compute_node.py', 'nova/objects/compute_node.py', 'releasenotes/notes/bug-1853009-99414e14d1491b5f.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py', 'nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e159304647a66800dff9aa9d84af983505aa856b', 'message': ""Prevent deletion of a compute node belonging to another host\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe main race condition involved is in update_available_resources in\nthe compute manager. When the list of compute nodes is queried, there is\na compute node belonging to the host that it does not expect to be\nmanaging, i.e. it is an orphan. Between that time and deleting the\norphan, the real owner of the compute node takes ownership of it ( in\nthe resource tracker). However, the node is still deleted as the first\nhost is unaware of the ownership change.\n\nThis change prevents this from occurring by filtering on the host when\ndeleting a compute node. If another compute host has taken ownership of\na node, it will have updated the host field and this will prevent\ndeletion from occurring. The first host sees this has happened via the\nComputeHostNotFound exception, and avoids deleting its resource\nprovider.\n\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nConflicts:\n    nova/compute/manager.py\n\nNOTE(melwitt): The conflict is because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nNOTE(melwitt): Difference from the cherry picked change: the 'uuid'\nattribute needed to be added to the Mock spec in\nnova/tests/unit/compute/test_compute_mgr.py because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nCloses-Bug: #1853009\nRelated-Bug: #1841481\n\nChange-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02\n(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)\n(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)\n(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)\n(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)\n""}]",2,811824,e159304647a66800dff9aa9d84af983505aa856b,13,2,3,4690,,,0,"Prevent deletion of a compute node belonging to another host

There is a race condition in nova-compute with the ironic virt driver as
nodes get rebalanced. It can lead to compute nodes being removed in the
DB and not repopulated. Ultimately this prevents these nodes from being
scheduled to.

The main race condition involved is in update_available_resources in
the compute manager. When the list of compute nodes is queried, there is
a compute node belonging to the host that it does not expect to be
managing, i.e. it is an orphan. Between that time and deleting the
orphan, the real owner of the compute node takes ownership of it ( in
the resource tracker). However, the node is still deleted as the first
host is unaware of the ownership change.

This change prevents this from occurring by filtering on the host when
deleting a compute node. If another compute host has taken ownership of
a node, it will have updated the host field and this will prevent
deletion from occurring. The first host sees this has happened via the
ComputeHostNotFound exception, and avoids deleting its resource
provider.

Co-Authored-By: melanie witt <melwittt@gmail.com>

Conflicts:
    nova/compute/manager.py

NOTE(melwitt): The conflict is because change
I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from
_delete_provider) is not in Train.

NOTE(melwitt): Difference from the cherry picked change: the 'uuid'
attribute needed to be added to the Mock spec in
nova/tests/unit/compute/test_compute_mgr.py because change
I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from
_delete_provider) is not in Train.

Closes-Bug: #1853009
Related-Bug: #1841481

Change-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02
(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)
(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)
(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)
(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)
",git fetch https://review.opendev.org/openstack/nova refs/changes/24/811824/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/objects/compute_node.py', 'nova/tests/unit/objects/test_compute_node.py', 'releasenotes/notes/bug-1853009-99414e14d1491b5f.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py', 'nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",9,491bc64dff7a1c1f74d957daa7323085c729f915,bug/1853009," # Verify that the node was almost deleted, but was saved by the host # check self.assertIn( 'Ignoring failure to delete orphan compute node %s on ' 'hypervisor host fake-node' % cn.id, self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, 'host_b') self.assertEqual(1, len(rps), rps) self.assertEqual(self.nodename, rps[0]['name']) # Simulate deletion of an orphan by host_a. It shouldn't happen # anymore, but let's assume it already did. cn = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_b', self.nodename) cn.destroy() host_a.manager.rt.remove_node(cn.hypervisor_hostname) host_a.manager.reportclient.delete_resource_provider( self.ctxt, cn, cascade=True)"," # FIXME(mgoddard): Ideally host_a would not delete a node that does not # belong to it. See https://bugs.launchpad.net/nova/+bug/1853009. # Verify that the node was deleted. hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) self.assertEqual(0, len(rps), rps)",123,23
openstack%2Fnova~stable%2Ftrain~Iae119ea8776bc7f2e5dbe2e502a743217beded73,openstack/nova,stable/train,Iae119ea8776bc7f2e5dbe2e502a743217beded73,Fix inactive session error in compute node creation,NEW,2021-09-30 01:58:04.000000000,2021-10-29 05:16:04.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ff3081b9e2ec3bf563a97688806f436025f56ed8', 'message': ""Fix inactive session error in compute node creation\n\nIn the fix for bug 1839560 [1][2], soft-deleted compute nodes may be\nrestored, to ensure we can reuse ironic node UUIDs as compute node\nUUIDs. While this seems to largely work, it results in some nasty errors\nbeing generated [3]:\n\n    InvalidRequestError This session is in 'inactive' state, due to the\n    SQL transaction being rolled back; no further SQL can be emitted\n    within this transaction.\n\nThis happens because compute_node_create is decorated with\npick_context_manager_writer, which begins a transaction. While\n_compute_node_get_and_update_deleted claims that calling a second\npick_context_manager_writer decorated function will begin a new\nsubtransaction, this does not appear to be the case.\n\nThis change removes pick_context_manager_writer from the\ncompute_node_create function, and adds a new _compute_node_create\nfunction which ensures the transaction is finished if\n_compute_node_get_and_update_deleted is called.\n\nThe new unit test added here fails without this change.\n\nThis change marks the removal of the final FIXME from the functional\ntest added in [4].\n\n[1] https://bugs.launchpad.net/nova/+bug/1839560\n[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411\n[3] http://paste.openstack.org/show/786350/\n[4] https://review.opendev.org/#/c/695012/\n\nChange-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73\nCloses-Bug: #1853159\nRelated-Bug: #1853009\n(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)\n(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)\n(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)\n(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)\n""}, {'number': 2, 'created': '2021-09-30 04:25:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/10a3f74540895d1dcdc3553a86caebae0c12b15f', 'message': ""Fix inactive session error in compute node creation\n\nIn the fix for bug 1839560 [1][2], soft-deleted compute nodes may be\nrestored, to ensure we can reuse ironic node UUIDs as compute node\nUUIDs. While this seems to largely work, it results in some nasty errors\nbeing generated [3]:\n\n    InvalidRequestError This session is in 'inactive' state, due to the\n    SQL transaction being rolled back; no further SQL can be emitted\n    within this transaction.\n\nThis happens because compute_node_create is decorated with\npick_context_manager_writer, which begins a transaction. While\n_compute_node_get_and_update_deleted claims that calling a second\npick_context_manager_writer decorated function will begin a new\nsubtransaction, this does not appear to be the case.\n\nThis change removes pick_context_manager_writer from the\ncompute_node_create function, and adds a new _compute_node_create\nfunction which ensures the transaction is finished if\n_compute_node_get_and_update_deleted is called.\n\nThe new unit test added here fails without this change.\n\nThis change marks the removal of the final FIXME from the functional\ntest added in [4].\n\n[1] https://bugs.launchpad.net/nova/+bug/1839560\n[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411\n[3] http://paste.openstack.org/show/786350/\n[4] https://review.opendev.org/#/c/695012/\n\nChange-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73\nCloses-Bug: #1853159\nRelated-Bug: #1853009\n(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)\n(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)\n(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)\n(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)\n""}, {'number': 3, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4482f5b1e8d48adf3479ea4192f2998302318fee', 'message': ""Fix inactive session error in compute node creation\n\nIn the fix for bug 1839560 [1][2], soft-deleted compute nodes may be\nrestored, to ensure we can reuse ironic node UUIDs as compute node\nUUIDs. While this seems to largely work, it results in some nasty errors\nbeing generated [3]:\n\n    InvalidRequestError This session is in 'inactive' state, due to the\n    SQL transaction being rolled back; no further SQL can be emitted\n    within this transaction.\n\nThis happens because compute_node_create is decorated with\npick_context_manager_writer, which begins a transaction. While\n_compute_node_get_and_update_deleted claims that calling a second\npick_context_manager_writer decorated function will begin a new\nsubtransaction, this does not appear to be the case.\n\nThis change removes pick_context_manager_writer from the\ncompute_node_create function, and adds a new _compute_node_create\nfunction which ensures the transaction is finished if\n_compute_node_get_and_update_deleted is called.\n\nThe new unit test added here fails without this change.\n\nThis change marks the removal of the final FIXME from the functional\ntest added in [4].\n\n[1] https://bugs.launchpad.net/nova/+bug/1839560\n[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411\n[3] http://paste.openstack.org/show/786350/\n[4] https://review.opendev.org/#/c/695012/\n\nChange-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73\nCloses-Bug: #1853159\nRelated-Bug: #1853009\n(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)\n(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)\n(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)\n(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)\n""}]",1,811825,4482f5b1e8d48adf3479ea4192f2998302318fee,14,2,3,4690,,,0,"Fix inactive session error in compute node creation

In the fix for bug 1839560 [1][2], soft-deleted compute nodes may be
restored, to ensure we can reuse ironic node UUIDs as compute node
UUIDs. While this seems to largely work, it results in some nasty errors
being generated [3]:

    InvalidRequestError This session is in 'inactive' state, due to the
    SQL transaction being rolled back; no further SQL can be emitted
    within this transaction.

This happens because compute_node_create is decorated with
pick_context_manager_writer, which begins a transaction. While
_compute_node_get_and_update_deleted claims that calling a second
pick_context_manager_writer decorated function will begin a new
subtransaction, this does not appear to be the case.

This change removes pick_context_manager_writer from the
compute_node_create function, and adds a new _compute_node_create
function which ensures the transaction is finished if
_compute_node_get_and_update_deleted is called.

The new unit test added here fails without this change.

This change marks the removal of the final FIXME from the functional
test added in [4].

[1] https://bugs.launchpad.net/nova/+bug/1839560
[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411
[3] http://paste.openstack.org/show/786350/
[4] https://review.opendev.org/#/c/695012/

Change-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73
Closes-Bug: #1853159
Related-Bug: #1853009
(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)
(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)
(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)
(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)
",git fetch https://review.opendev.org/openstack/nova refs/changes/25/811825/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",3,ff3081b9e2ec3bf563a97688806f436025f56ed8,bug/1853009,," # FIXME(mgoddard): This shows a traceback with SQL rollback due to # soft-deleted node. The create seems to succeed but breaks the RT # update for this node. See # https://bugs.launchpad.net/nova/+bug/1853159. # FIXME(mgoddard): Resource provider not recreated here, due to # https://bugs.launchpad.net/nova/+bug/1853159. # But due to https://bugs.launchpad.net/nova/+bug/1853159 the compute # node is not cached in the RT. self.assertNotIn(self.nodename, host_b.manager.rt.compute_nodes) # There is no RP. rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # But the RP exists in the provider tree. self.assertFalse(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename)) # host_b[1]: Should add compute node to RT cache and recreate resource # provider. host_b.manager.update_available_resource(self.ctxt) # Verify that the node still exists. self._assert_hypervisor_api(self.nodename, 'host_b') # And it is now in the RT cache. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes) # This fails due to the lack of a resource provider. self.assertIn( 'Skipping removal of allocations for deleted instances', self.stdlog.logger.output)",31,35
openstack%2Fpython-tripleoclient~stable%2Fwallaby~I30903cfea1ee595c84ef021f5c3be7716c0726d9,openstack/python-tripleoclient,stable/wallaby,I30903cfea1ee595c84ef021f5c3be7716c0726d9,Add additional saved stack outputs,MERGED,2021-10-27 18:00:23.000000000,2021-10-29 04:57:00.000000000,2021-10-29 04:55:30.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 18:00:23.000000000', 'files': ['tripleoclient/constants.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/e2f3acd13169bbd717c2007469f156a736dc8204', 'message': 'Add additional saved stack outputs\n\nSave more stack outputs in the working directory.\n\nChange-Id: I30903cfea1ee595c84ef021f5c3be7716c0726d9\nSigned-off-by: James Slagle <jslagle@redhat.com>\n(cherry picked from commit 8ff88f4dc1896956877c9a3c86689cebf9c374b2)\n'}]",3,815720,e2f3acd13169bbd717c2007469f156a736dc8204,16,2,1,7144,,,0,"Add additional saved stack outputs

Save more stack outputs in the working directory.

Change-Id: I30903cfea1ee595c84ef021f5c3be7716c0726d9
Signed-off-by: James Slagle <jslagle@redhat.com>
(cherry picked from commit 8ff88f4dc1896956877c9a3c86689cebf9c374b2)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/20/815720/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/constants.py'],1,e2f3acd13169bbd717c2007469f156a736dc8204,," 'BlacklistedIpAddresses', 'RoleNetHostnameMap', 'KeystoneURL', 'EndpointMap', 'VipMap', 'EnabledServices']", 'BlacklistedIpAddresses'],6,1
openstack%2Fopenstack-helm~master~I3ceffc18a622c9c085f5f807b33a23913afa7cd1,openstack/openstack-helm,master,I3ceffc18a622c9c085f5f807b33a23913afa7cd1,DNM - Testing TLS job,ABANDONED,2021-10-29 00:57:16.000000000,2021-10-29 04:13:08.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-29 00:57:16.000000000', 'files': ['zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/2f810df848b73adab8b50a5b2441f72d0550c945', 'message': 'DNM - Testing TLS job\n\nDepends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/815399\nChange-Id: I3ceffc18a622c9c085f5f807b33a23913afa7cd1\n'}]",1,815924,2f810df848b73adab8b50a5b2441f72d0550c945,5,1,1,21420,,,0,"DNM - Testing TLS job

Depends-on: https://review.opendev.org/c/openstack/openstack-helm-infra/+/815399
Change-Id: I3ceffc18a622c9c085f5f807b33a23913afa7cd1
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/24/815924/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,2f810df848b73adab8b50a5b2441f72d0550c945,tls-job, - openstack-helm-tls, templates: - publish-openstack-docs-pti - release-notes-jobs-python3 - openstack-helm-lint - openstack-helm-bandit - openstack-helm-cinder-train-ubuntu_bionic - openstack-helm-cinder-ussuri-ubuntu_bionic - openstack-helm-cinder-victoria-ubuntu_focal - openstack-helm-cinder-wallaby-ubuntu_focal - openstack-helm-compute-kit-train-ubuntu_bionic - openstack-helm-compute-kit-ussuri-ubuntu_bionic - openstack-helm-compute-kit-victoria-ubuntu_focal - openstack-helm-compute-kit-wallaby-ubuntu_focal - openstack-helm-horizon-train-ubuntu_bionic,1,14
openstack%2Fbarbican~stable%2Fvictoria~I821b4f5998be5b40327311039979f5e00ea9cefc,openstack/barbican,stable/victoria,I821b4f5998be5b40327311039979f5e00ea9cefc,Fix policy for adding a secret to a container,MERGED,2021-10-25 19:38:59.000000000,2021-10-29 03:17:40.000000000,2021-10-29 03:14:31.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-25 19:38:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican/commit/5d516f9f804fd7a26f1934dc46d3969d4428f264', 'message': 'Fix policy for adding a secret to a container\n\nThis patch fixes the policies for adding and removing secrets from a\nsecret container.\n\nStory: 2009297\nTask: 43725\nChange-Id: I821b4f5998be5b40327311039979f5e00ea9cefc\n(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)\n(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)\n'}, {'number': 2, 'created': '2021-10-27 18:04:15.000000000', 'files': ['barbican/common/policies/base.py', 'barbican/common/policies/containers.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/7cf500a98239e861f877539827f3be57c920b95c', 'message': 'Fix policy for adding a secret to a container\n\nThis patch fixes the policies for adding and removing secrets from a\nsecret container.\n\nStory: 2009297\nTask: 43725\nChange-Id: I821b4f5998be5b40327311039979f5e00ea9cefc\n(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)\n(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)\n'}]",5,815374,7cf500a98239e861f877539827f3be57c920b95c,20,2,2,7973,,,0,"Fix policy for adding a secret to a container

This patch fixes the policies for adding and removing secrets from a
secret container.

Story: 2009297
Task: 43725
Change-Id: I821b4f5998be5b40327311039979f5e00ea9cefc
(cherry picked from commit 6c841b23afa8ed6fa4cd01ba1a6bebfb60f06ae5)
(cherry picked from commit a8226fcf33f16078d92949af23bdf41a7593bb64)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/74/815374/2 && git format-patch -1 --stdout FETCH_HEAD,"['barbican/common/policies/base.py', 'barbican/common/policies/containers.py']",2,5d516f9f804fd7a26f1934dc46d3969d4428f264,story/2009247-stable/wallaby-stable/victoria," check_str='rule:container_project_admin or ' + 'rule:container_project_creator or ' + 'rule:container_project_creator_role and ' + 'rule:container_non_private_read', check_str='rule:container_project_admin or ' + 'rule:container_project_creator or ' + 'rule:container_project_creator_role and ' + 'rule:container_non_private_read',"," check_str='rule:admin', check_str='rule:admin',",11,2
openstack%2Fpuppet-openstack-integration~stable%2Fxena~I6cc1421feac6047ef7f18a22278273cb3469011a,openstack/puppet-openstack-integration,stable/xena,I6cc1421feac6047ef7f18a22278273cb3469011a,Switch to RDO Xena,MERGED,2021-10-28 01:09:52.000000000,2021-10-29 02:29:27.000000000,2021-10-29 02:29:27.000000000,"[{'_account_id': 14985}, {'_account_id': 16312}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 01:09:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/901c14cfd56a550f17037e802c2d579241d5fde5', 'message': 'Switch to RDO Xena\n\nChange-Id: I6cc1421feac6047ef7f18a22278273cb3469011a\n'}, {'number': 2, 'created': '2021-10-28 01:10:50.000000000', 'files': ['manifests/repos.pp', 'configure_facts.sh'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/e282a85e676a3c78a61e6140dcc149ce9db11659', 'message': 'Switch to RDO Xena\n\nChange-Id: I6cc1421feac6047ef7f18a22278273cb3469011a\n'}]",2,815767,e282a85e676a3c78a61e6140dcc149ce9db11659,16,3,2,9816,,,0,"Switch to RDO Xena

Change-Id: I6cc1421feac6047ef7f18a22278273cb3469011a
",git fetch https://review.opendev.org/openstack/puppet-openstack-integration refs/changes/67/815767/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/repos.pp', 'configure_facts.sh']",2,901c14cfd56a550f17037e802c2d579241d5fde5,,"export DLRN_BASE=${DLRN_BASE:-${OS_NAME_VERS}-xena/current-passed-ci} export DLRN_DEPS_BASE=${DLRN_DEPS_BASE:-${OS_NAME_VERS}-xena/deps/latest/} export DLRN_BASE_URL=${DLRN_BASE_URL:-${OS_NAME_VERS}-xena/puppet-passed-ci/delorean.repo} export DLRN_DEPS_URL=${DLRN_DEPS_URL:-${OS_NAME_VERS}-xena/delorean-deps.repo}curl -o /tmp/delorean.repo ""${NODEPOOL_RDO_PROXY}/centos8-xena/puppet-passed-ci/delorean.repo""curl -o /tmp/delorean-deps.repo ""${NODEPOOL_RDO_PROXY}/centos8-xena/delorean-deps.repo""","export DLRN_BASE=${DLRN_BASE:-${OS_NAME_VERS}-master/puppet-passed-ci} export DLRN_DEPS_BASE=${DLRN_DEPS_BASE:-${OS_NAME_VERS}-master/deps/latest/} export DLRN_BASE_URL=${DLRN_BASE_URL:-${OS_NAME_VERS}-master/puppet-passed-ci/delorean.repo} export DLRN_DEPS_URL=${DLRN_DEPS_URL:-${OS_NAME_VERS}-master/delorean-deps.repo}curl -o /tmp/delorean.repo ""${NODEPOOL_RDO_PROXY}/centos8-master/puppet-passed-ci/delorean.repo""curl -o /tmp/delorean-deps.repo ""${NODEPOOL_RDO_PROXY}/centos8-master/delorean-deps.repo""",8,8
openstack%2Fpuppet-neutron~stable%2Ftrain~I87dba40544a76991f5fa16705ab1af00f75e5dc9,openstack/puppet-neutron,stable/train,I87dba40544a76991f5fa16705ab1af00f75e5dc9,Support arbitrary configurations for ovs agent and sriov agent,MERGED,2021-10-28 06:08:42.000000000,2021-10-29 01:16:17.000000000,2021-10-29 01:14:36.000000000,"[{'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 06:08:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/a548040bd27c7116b812c1a307133eaa9b2dfcf7', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n'}, {'number': 2, 'created': '2021-10-28 08:34:52.000000000', 'files': ['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/817d45342ad21148efdc365fd3e998e1e0bbab7c', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)\n'}]",1,815791,817d45342ad21148efdc365fd3e998e1e0bbab7c,11,3,2,13861,,,0,"Support arbitrary configurations for ovs agent and sriov agent

This patch introduces new parameters to the neutron::config class,
to allow us to add arbitary configurations into openvswitch_agent.ini
and sriov_agent.ini .

Conflicts:
    manifests/config.pp
    spec/classes/neutron_config_spec.rb

Change-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9
(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)
(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)
(cherry picked from commit dc15af35cfadbaa025346e250f8975e6e0be491f)
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/91/815791/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp']",3,a548040bd27c7116b812c1a307133eaa9b2dfcf7,,"# [*ovs_agent_config*] # (optional) Manage configuration of openvswitch_agent.ini # # [*sriov_agent_config*] # (optional) Manage configuration of sriov_agent.ini # $ovs_agent_config = {}, $sriov_agent_config = {}, validate_legacy(Hash, 'validate_hash', $ovs_agent_config) validate_legacy(Hash, 'validate_hash', $sriov_agent_config) create_resources('neutron_agent_ovs', $ovs_agent_config) create_resources('neutron_sriov_agent_config', $sriov_agent_config)",,36,1
openstack%2Ftripleo-ansible~stable%2Ftrain~Id0c841723da00096e379133429a685bffaf407d3,openstack/tripleo-ansible,stable/train,Id0c841723da00096e379133429a685bffaf407d3,bnr fix the exportation of the ceph authentication,MERGED,2021-10-18 22:04:56.000000000,2021-10-29 01:11:28.000000000,2021-10-29 01:11:28.000000000,"[{'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-18 22:04:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/dfdf8e30585ea72fb78951dba0d829defef2ba47', 'message': 'bnr fix the exportation of the ceph authentication\n\nThe file ceph authetication is not being generated due to an\nundefined variable.\n\nThis patch inserts the tasks that saves the content of\nthe file in to the block, so the variables are defined.\n\nChange-Id: Id0c841723da00096e379133429a685bffaf407d3\n(cherry picked from commit 442c0bc3ac0133b8ef82da2d86d33734692fb49a)\n'}, {'number': 2, 'created': '2021-10-18 22:11:13.000000000', 'files': ['tripleo_ansible/roles/backup-and-restore/tasks/ceph_authentication.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9409eb922d7b6a5221fe69c5bd07143acbdbbf3b', 'message': 'bnr fix the exportation of the ceph authentication\n\nThe file ceph authetication is not being generated due to an\nundefined variable.\n\nThis patch inserts the tasks that saves the content of\nthe file in to the block, so the variables are defined.\n\nChange-Id: Id0c841723da00096e379133429a685bffaf407d3\n(cherry picked from commit 442c0bc3ac0133b8ef82da2d86d33734692fb49a)\n'}]",6,814464,9409eb922d7b6a5221fe69c5bd07143acbdbbf3b,22,5,2,22954,,,0,"bnr fix the exportation of the ceph authentication

The file ceph authetication is not being generated due to an
undefined variable.

This patch inserts the tasks that saves the content of
the file in to the block, so the variables are defined.

Change-Id: Id0c841723da00096e379133429a685bffaf407d3
(cherry picked from commit 442c0bc3ac0133b8ef82da2d86d33734692fb49a)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/64/814464/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/backup_and_restore/tasks/ceph_authentication.yml'],1,dfdf8e30585ea72fb78951dba0d829defef2ba47,bnr_bz2011044-stable/wallaby-stable/victoria-stable/ussuri-stable/train,"<<<<<<< HEAD (71b142 Merge ""Allow LVM filter to work when either allowlist or den) ======= --- # Copyright 2019 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # ""backup_and_restore"" will search for and load any operating system variable file # found within the ""vars/"" path. If no OS files are found the task will skip. - name: Gather variables for each operating system include_vars: ""{{ item }}"" with_first_found: - skip: true files: - ""{{ ansible_facts['distribution'] | lower }}-{{ ansible_facts['distribution_version'] | lower }}.yml"" - ""{{ ansible_facts['distribution'] | lower }}-{{ ansible_facts['distribution_major_version'] | lower }}.yml"" - ""{{ ansible_facts['os_family'] | lower }}-{{ ansible_facts['distribution_major_version'] | lower }}.yml"" - ""{{ ansible_facts['distribution'] | lower }}.yml"" - ""{{ ansible_facts['os_family'] | lower }}-{{ ansible_facts['distribution_version'].split('.')[0] }}.yml"" - ""{{ ansible_facts['os_family'] | lower }}.yml"" tags: - always - name: Stat cephadm file stat: path: ""{{ tripleo_backup_and_restore_cephadm_path }}"" register: stat_cephadm become: true ignore_errors: true tags: - bar_create_recover_image - name: List Ceph daemon instances on this host shell: ""{{ tripleo_backup_and_restore_cephadm_path }} ls --no-detail"" register: cephadm_ls become: true when: stat_cephadm.stat.exists tags: - bar_create_recover_image - name: Ceph installed with ceph ansible when: - cephadm_ls.stdout is not defined or cephadm_ls.stdout == ""[]"" tags: bar_create_recover_image block: - name: Ensure cephmon container is running command: ""{{ tripleo_container_cli }} unpause ceph-mon-{{ inventory_hostname }}"" failed_when: false - name: Export ceph authentication shell: | set -o pipefail {{ tripleo_container_cli }} exec ceph-mon-{{ inventory_hostname }} bash -c ""ceph auth export"" register: bar_ceph_authentication_content - name: Save ceph authentication at {{ tripleo_backup_and_restore_ceph_auth_file }} copy: dest: ""{{ tripleo_backup_and_restore_ceph_auth_file }}"" content: | {{ bar_ceph_authentication_content.stdout }} - name: Ceph installed with cephadm when: - cephadm_ls.stdout is defined - cephadm_ls.stdout != '[]' tags: bar_create_recover_image block: - name: Export ceph authentication command: cephadm shell -- ceph auth export register: bar_ceph_authentication_content - name: Save ceph authentication at {{ tripleo_backup_and_restore_ceph_auth_file }} copy: dest: ""{{ tripleo_backup_and_restore_ceph_auth_file }}"" content: | {{ bar_ceph_authentication_content.stdout }} >>>>>>> CHANGE (daac3a bnr fix the exportation of the ceph authentication) ",,90,0
openstack%2Fpuppet-neutron~stable%2Fussuri~I87dba40544a76991f5fa16705ab1af00f75e5dc9,openstack/puppet-neutron,stable/ussuri,I87dba40544a76991f5fa16705ab1af00f75e5dc9,Support arbitrary configurations for ovs agent and sriov agent,MERGED,2021-10-28 06:06:30.000000000,2021-10-29 01:03:58.000000000,2021-10-29 01:02:34.000000000,"[{'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 06:06:30.000000000', 'files': ['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/dc15af35cfadbaa025346e250f8975e6e0be491f', 'message': 'Support arbitrary configurations for ovs agent and sriov agent\n\nThis patch introduces new parameters to the neutron::config class,\nto allow us to add arbitary configurations into openvswitch_agent.ini\nand sriov_agent.ini .\n\nConflicts:\n    manifests/config.pp\n    spec/classes/neutron_config_spec.rb\n\nChange-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9\n(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)\n(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)\n'}]",0,815774,dc15af35cfadbaa025346e250f8975e6e0be491f,8,3,1,13861,,,0,"Support arbitrary configurations for ovs agent and sriov agent

This patch introduces new parameters to the neutron::config class,
to allow us to add arbitary configurations into openvswitch_agent.ini
and sriov_agent.ini .

Conflicts:
    manifests/config.pp
    spec/classes/neutron_config_spec.rb

Change-Id: I87dba40544a76991f5fa16705ab1af00f75e5dc9
(cherry picked from commit 34eef40377f32d44838ea1a3d7471f07c0fe6528)
(cherry picked from commit 98e2fc0b911908b1ba9339104d844175e8201769)
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/74/815774/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_config_spec.rb', 'releasenotes/notes/agent-arbitrary-configs-8036223e87f32c2a.yaml', 'manifests/config.pp']",3,dc15af35cfadbaa025346e250f8975e6e0be491f,,"# [*ovs_agent_config*] # (optional) Manage configuration of openvswitch_agent.ini # # [*sriov_agent_config*] # (optional) Manage configuration of sriov_agent.ini # $ovs_agent_config = {}, $sriov_agent_config = {}, validate_legacy(Hash, 'validate_hash', $ovs_agent_config) validate_legacy(Hash, 'validate_hash', $sriov_agent_config) create_resources('neutron_agent_ovs', $ovs_agent_config) create_resources('neutron_sriov_agent_config', $sriov_agent_config)",,36,1
openstack%2Foslo.context~stable%2Fvictoria~Ica23d5c4183a692de3cb65a7ad72b19f47988ca6,openstack/oslo.context,stable/victoria,Ica23d5c4183a692de3cb65a7ad72b19f47988ca6,Fix context from_dict() for system_scope,MERGED,2021-10-04 21:04:33.000000000,2021-10-29 00:45:40.000000000,2021-10-29 00:44:06.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-04 21:04:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.context/commit/46b6133db344443b569ec533db168edf60a6d16d', 'message': 'Fix context from_dict() for system_scope\n\nA previous patch[1] added ""system_scope"" to the context for to_dict()\nbut the from_dict() method was not updated. This caused the\nsystem_scope to always be None.\nThis patch corrects that by adding ""system_scope"" to the list of\nvalues that may need to be extracted from the context dict.\n\n[1] https://review.opendev.org/c/openstack/oslo.context/+/530509\n\nChange-Id: Ica23d5c4183a692de3cb65a7ad72b19f47988ca6\n(cherry picked from commit 8290621b058081754db55c2584c00b8b166369aa)\n'}, {'number': 2, 'created': '2021-10-20 15:44:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.context/commit/48191bbf60425c7e7c3b20d517b1cd007074961b', 'message': 'Fix context from_dict() for system_scope\n\nA previous patch[1] added ""system_scope"" to the context for to_dict()\nbut the from_dict() method was not updated. This caused the\nsystem_scope to always be None.\nThis patch corrects that by adding ""system_scope"" to the list of\nvalues that may need to be extracted from the context dict.\n\n[1] https://review.opendev.org/c/openstack/oslo.context/+/530509\n\nChange-Id: Ica23d5c4183a692de3cb65a7ad72b19f47988ca6\n(cherry picked from commit 8290621b058081754db55c2584c00b8b166369aa)\n(cherry picked from commit 7187c672d41fc54a0368b766c0fa7a59677964d8)\n(cherry picked from commit b124eb7df2617be56a23819f670bd6e054f87ce7)\n'}, {'number': 3, 'created': '2021-10-25 13:41:02.000000000', 'files': ['oslo_context/tests/test_context.py', 'oslo_context/context.py', 'releasenotes/notes/Fix-system-scope-from_dict-29615af90723ba4d.yaml'], 'web_link': 'https://opendev.org/openstack/oslo.context/commit/eff2f2f57248f17189d088901f39dc4ab7b0afe3', 'message': 'Fix context from_dict() for system_scope\n\nA previous patch[1] added ""system_scope"" to the context for to_dict()\nbut the from_dict() method was not updated. This caused the\nsystem_scope to always be None.\nThis patch corrects that by adding ""system_scope"" to the list of\nvalues that may need to be extracted from the context dict.\n\n[1] https://review.opendev.org/c/openstack/oslo.context/+/530509\n\nChange-Id: Ica23d5c4183a692de3cb65a7ad72b19f47988ca6\n(cherry picked from commit 8290621b058081754db55c2584c00b8b166369aa)\n(cherry picked from commit 7187c672d41fc54a0368b766c0fa7a59677964d8)\n(cherry picked from commit b124eb7df2617be56a23819f670bd6e054f87ce7)\n'}]",3,812387,eff2f2f57248f17189d088901f39dc4ab7b0afe3,18,3,3,11628,,,0,"Fix context from_dict() for system_scope

A previous patch[1] added ""system_scope"" to the context for to_dict()
but the from_dict() method was not updated. This caused the
system_scope to always be None.
This patch corrects that by adding ""system_scope"" to the list of
values that may need to be extracted from the context dict.

[1] https://review.opendev.org/c/openstack/oslo.context/+/530509

Change-Id: Ica23d5c4183a692de3cb65a7ad72b19f47988ca6
(cherry picked from commit 8290621b058081754db55c2584c00b8b166369aa)
(cherry picked from commit 7187c672d41fc54a0368b766c0fa7a59677964d8)
(cherry picked from commit b124eb7df2617be56a23819f670bd6e054f87ce7)
",git fetch https://review.opendev.org/openstack/oslo.context refs/changes/87/812387/2 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_context/tests/test_context.py', 'oslo_context/context.py', 'releasenotes/notes/Fix-system-scope-from_dict-29615af90723ba4d.yaml']",3,46b6133db344443b569ec533db168edf60a6d16d,secure-rbac-stable/xena-stable/wallaby-stable/victoria,--- fixes: - | Fixes context from_dict() to properly handle system_scope. ,,8,1
openstack%2Fnova~stable%2Ftrain~Ice4071722de54e8d20bb8c3795be22f1995940cd,openstack/nova,stable/train,Ice4071722de54e8d20bb8c3795be22f1995940cd,Add functional regression test for bug 1853009,NEW,2021-09-30 01:58:04.000000000,2021-10-29 00:03:32.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/bb91677cf7006fc5310bad826dad2570873b6d70', 'message': 'Add functional regression test for bug 1853009\n\nBug 1853009 describes a race condition involving multiple nova-compute\nservices with ironic. As the compute services start up, the hash ring\nrebalances, and the compute services have an inconsistent view of which\nis responsible for a compute node.\n\nThe sequence of actions here is adapted from a real world log [1], where\nmultiple nova-compute services were started simultaneously. In some\ncases mocks are used to simulate race conditions.\n\nThere are three main issues with the behaviour:\n\n* host2 deletes the orphan node compute node after host1 has taken\n  ownership of it.\n\n* host1 assumes that another compute service will not delete its nodes.\n  Once a node is in rt.compute_nodes, it is not removed again unless the\n  node is orphaned. This prevents host1 from recreating the compute\n  node.\n\n* host1 assumes that another compute service will not delete its\n  resource providers. Once an RP is in the provider tree, it is not\n  removed.\n\nThis functional test documents the current behaviour, with the idea that\nit can be updated as this behaviour is fixed.\n\n[1] http://paste.openstack.org/show/786272/\n\nCo-Authored-By: Matt Riedemann <mriedem.os@gmail.com>\n\nChange-Id: Ice4071722de54e8d20bb8c3795be22f1995940cd\nRelated-Bug: #1853009\nRelated-Bug: #1853159\n(cherry picked from commit 59d9871e8a0672538f8ffc43ae99b3d1c4b08909)\n(cherry picked from commit c260e75d012cc4fae596d5de185afad6fb24068c)\n(cherry picked from commit 34d5bca6bc612f41ac3fc33447cd2ba83bf446ba)\n(cherry picked from commit f57c4965eef8e25656635897f46dccfe23c3fa5c)\n'}]",2,811821,bb91677cf7006fc5310bad826dad2570873b6d70,6,2,1,4690,,,0,"Add functional regression test for bug 1853009

Bug 1853009 describes a race condition involving multiple nova-compute
services with ironic. As the compute services start up, the hash ring
rebalances, and the compute services have an inconsistent view of which
is responsible for a compute node.

The sequence of actions here is adapted from a real world log [1], where
multiple nova-compute services were started simultaneously. In some
cases mocks are used to simulate race conditions.

There are three main issues with the behaviour:

* host2 deletes the orphan node compute node after host1 has taken
  ownership of it.

* host1 assumes that another compute service will not delete its nodes.
  Once a node is in rt.compute_nodes, it is not removed again unless the
  node is orphaned. This prevents host1 from recreating the compute
  node.

* host1 assumes that another compute service will not delete its
  resource providers. Once an RP is in the provider tree, it is not
  removed.

This functional test documents the current behaviour, with the idea that
it can be updated as this behaviour is fixed.

[1] http://paste.openstack.org/show/786272/

Co-Authored-By: Matt Riedemann <mriedem.os@gmail.com>

Change-Id: Ice4071722de54e8d20bb8c3795be22f1995940cd
Related-Bug: #1853009
Related-Bug: #1853159
(cherry picked from commit 59d9871e8a0672538f8ffc43ae99b3d1c4b08909)
(cherry picked from commit c260e75d012cc4fae596d5de185afad6fb24068c)
(cherry picked from commit 34d5bca6bc612f41ac3fc33447cd2ba83bf446ba)
(cherry picked from commit f57c4965eef8e25656635897f46dccfe23c3fa5c)
",git fetch https://review.opendev.org/openstack/nova refs/changes/21/811821/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1853009.py'],1,bb91677cf7006fc5310bad826dad2570873b6d70,bug/1853009,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import mock from nova import context from nova import objects from nova.tests.functional import integrated_helpers class NodeRebalanceDeletedComputeNodeRaceTestCase( integrated_helpers.ProviderUsageBaseTestCase, ): """"""Regression test for bug 1853009 observed in Rocky & later. When an ironic node re-balances from one host to another, there can be a race where the old host deletes the orphan compute node after the new host has taken ownership of it which results in the new host failing to create the compute node and resource provider because the ResourceTracker does not detect a change. """""" # Make sure we're using the fake driver that has predictable uuids # for each node. compute_driver = 'fake.PredictableNodeUUIDDriver' def _assert_hypervisor_api(self, nodename, expected_host): # We should have one compute node shown by the API. hypervisors = self.api.api_get( '/os-hypervisors/detail' ).body['hypervisors'] self.assertEqual(1, len(hypervisors), hypervisors) hypervisor = hypervisors[0] self.assertEqual(nodename, hypervisor['hypervisor_hostname']) self.assertEqual(expected_host, hypervisor['service']['host']) def _start_compute(self, host): host = self.start_service('compute', host) # Ironic compute driver has rebalances_nodes = True. host.manager.driver.rebalances_nodes = True return host def setUp(self): super(NodeRebalanceDeletedComputeNodeRaceTestCase, self).setUp() self.nodename = 'fake-node' self.ctxt = context.get_admin_context() def test_node_rebalance_deleted_compute_node_race(self): # Simulate a service running and then stopping. host_a runs, creates # fake-node, then is stopped. The fake-node compute node is destroyed. # This leaves a soft-deleted node in the DB. host_a = self._start_compute('host_a') host_a.manager.driver._set_nodes([self.nodename]) host_a.manager.update_available_resource(self.ctxt) host_a.stop() cn = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_a', self.nodename, ) cn.destroy() self.assertEqual(0, len(objects.ComputeNodeList.get_all(self.ctxt))) # Now we create a new compute service to manage our node. host_b = self._start_compute('host_b') host_b.manager.driver._set_nodes([self.nodename]) # When start_service runs, it will create a host_b ComputeNode. We want # to delete that and inject our fake node into the driver which will # be re-balanced to another host later. First assert this actually # exists. self._assert_hypervisor_api('host_b', expected_host='host_b') # Now run the update_available_resource periodic to register fake-node # and have it managed by host_b. This will also detect the ""host_b"" # node as orphaned and delete it along with its resource provider. cn_host_b_node = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_b', 'host_b', ) # host_b[1]: Finds no compute record in RT. Tries to create one # (_init_compute_node). # FIXME(mgoddard): This shows a traceback with SQL rollback due to # soft-deleted node. The create seems to succeed but breaks the RT # update for this node. See # https://bugs.launchpad.net/nova/+bug/1853159. host_b.manager.update_available_resource(self.ctxt) self.assertIn( 'Deleting orphan compute node %s hypervisor host ' 'is host_b, nodes are' % cn_host_b_node.id, self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, expected_host='host_b') # There should only be one resource provider (fake-node). original_rps = self._get_all_providers() self.assertEqual(1, len(original_rps), original_rps) self.assertEqual(self.nodename, original_rps[0]['name']) # Simulate a re-balance by restarting host_a and make it manage # fake-node. At this point both host_b and host_a think they own # fake-node. host_a = self._start_compute('host_a') host_a.manager.driver._set_nodes([self.nodename]) # host_a[1]: Finds no compute record in RT, 'moves' existing node from # host_b host_a.manager.update_available_resource(self.ctxt) # Assert that fake-node was re-balanced from host_b to host_a. self.assertIn( 'ComputeNode fake-node moving from host_b to host_a', self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, expected_host='host_a') # host_a[2]: Begins periodic update, queries compute nodes for this # host, finds the fake-node. cn = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_a', self.nodename, ) # host_b[2]: Finds no compute record in RT, 'moves' existing node from # host_a host_b.manager.update_available_resource(self.ctxt) # Assert that fake-node was re-balanced from host_a to host_b. self.assertIn( 'ComputeNode fake-node moving from host_a to host_b', self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, expected_host='host_b') # Complete rebalance, as host_a realises it does not own fake-node. host_a.manager.driver._set_nodes([]) # host_a[2]: Deletes orphan compute node. # Mock out the compute node query to simulate a race condition where # the list includes an orphan compute node that is newly owned by # host_b by the time host_a attempts to delete it. # FIXME(mgoddard): Ideally host_a would not delete a node that does not # belong to it. See https://bugs.launchpad.net/nova/+bug/1853009. with mock.patch( 'nova.compute.manager.ComputeManager._get_compute_nodes_in_db' ) as mock_get: mock_get.return_value = [cn] host_a.manager.update_available_resource(self.ctxt) # Verify that the node was deleted. self.assertIn( 'Deleting orphan compute node %s hypervisor host ' 'is fake-node, nodes are' % cn.id, self.stdlog.logger.output) hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # host_b[3]: Should recreate compute node and resource provider. # FIXME(mgoddard): Compute node not recreated here, because it is # already in RT.compute_nodes. See # https://bugs.launchpad.net/nova/+bug/1853009. # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. host_b.manager.update_available_resource(self.ctxt) # Verify that the node was not recreated. hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) # But the compute node exists in the RT. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes) # There is no RP. rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # But the RP exists in the provider tree. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename)) # This fails due to the lack of a resource provider. self.assertIn( 'Skipping removal of allocations for deleted instances', self.stdlog.logger.output) ",,190,0
openstack%2Fcinder~master~Ia11abfe5f12aedd364fcd5ecd979733178c7dbd1,openstack/cinder,master,Ia11abfe5f12aedd364fcd5ecd979733178c7dbd1,[Pure Storage] Add missing DB values when performing create CG from CG snap,MERGED,2021-10-01 18:47:00.000000000,2021-10-29 00:03:01.000000000,2021-10-29 00:01:16.000000000,"[{'_account_id': 4523}, {'_account_id': 7198}, {'_account_id': 9535}, {'_account_id': 20813}, {'_account_id': 22348}, {'_account_id': 33431}, {'_account_id': 33648}]","[{'number': 1, 'created': '2021-10-01 18:47:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/7c67dbbd7b967f99cd9eae197261cdd5bb4992a0', 'message': '[Pure Storage] Add missing DB values when performing create CG from\nCG snap\n\nReturn the correct metadata from new volumes created after cloning\na consistency group from a snapshot.\nPreviously nothing was returned which causes issue with PowerVC.\n\nChange-Id: Ia11abfe5f12aedd364fcd5ecd979733178c7dbd1\nCloses-Bug: #1945824\n'}, {'number': 2, 'created': '2021-10-01 18:58:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/df1d0673399af2f411d228f215e474a308798f61', 'message': '[Pure Storage] Add missing DB values when performing create CG from\nCG snap\n\nReturn the correct metadata from new volumes created after cloning\na consistency group from a snapshot.\nPreviously nothing was returned which causes issue with PowerVC.\n\nChange-Id: Ia11abfe5f12aedd364fcd5ecd979733178c7dbd1\nCloses-Bug: #1945824\n'}, {'number': 3, 'created': '2021-10-01 19:53:35.000000000', 'files': ['cinder/volume/drivers/pure.py', 'cinder/tests/unit/volume/drivers/test_pure.py', 'releasenotes/notes/bug_1945824-7f8f238e274ddebd.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/35c07883772d30a383f19b6f03ee0b81e9f537f0', 'message': '[Pure Storage] Add missing DB values when performing create CG from\nCG snap\n\nReturn the correct metadata from new volumes created after cloning\na consistency group from a snapshot.\nPreviously nothing was returned which causes issue with PowerVC.\n\nChange-Id: Ia11abfe5f12aedd364fcd5ecd979733178c7dbd1\nCloses-Bug: #1945824\n'}]",4,812210,35c07883772d30a383f19b6f03ee0b81e9f537f0,50,7,3,13425,,,0,"[Pure Storage] Add missing DB values when performing create CG from
CG snap

Return the correct metadata from new volumes created after cloning
a consistency group from a snapshot.
Previously nothing was returned which causes issue with PowerVC.

Change-Id: Ia11abfe5f12aedd364fcd5ecd979733178c7dbd1
Closes-Bug: #1945824
",git fetch https://review.opendev.org/openstack/cinder refs/changes/10/812210/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/drivers/pure.py', 'cinder/tests/unit/volume/drivers/test_pure.py', 'releasenotes/notes/bug_1945824-7f8f238e274ddebd.yaml']",3,7c67dbbd7b967f99cd9eae197261cdd5bb4992a0,bug/1945824,--- fixes: - | `Bug #1945824 <https://bugs.launchpad.net/cinder/+bug/1945824>`_: Fixed missing DB values when creating new consistency group from CG snapshot. ,,18,8
openstack%2Fpython-openstackclient~master~If476fb1614a64320ed071bbda35e941bf3290a2e,openstack/python-openstackclient,master,If476fb1614a64320ed071bbda35e941bf3290a2e,Switch server backup to sdk.,MERGED,2021-10-18 01:30:18.000000000,2021-10-28 23:47:10.000000000,2021-10-27 16:52:23.000000000,"[{'_account_id': 15334}, {'_account_id': 16708}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2021-10-18 01:30:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/d930cdfd945420fa178322d4fd4f55cddaaf6893', 'message': 'Switch server backup to sdk.\nUnit tests are modified and can pass.\nIt seems that there is no functional test perticularly for server backup.\nModule compute.v2.fakes.FakeServer is modified so that other 172 tests related to server fail.\nThis code change is hence more like a practice, and may need to wait till all commands related to server are completed.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 2, 'created': '2021-10-18 16:04:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/a2ce6bc0c4d99c0ada5e0b37d810da5c0fb569c8', 'message': 'Switch server backup to sdk.\n\nUnit tests are modified and can pass.\nIt seems that there is no functional test perticularly for server backup.\nModule compute.v2.fakes.FakeServer is modified so that other 172 tests related to server fail.\nThis code change is hence more like a practice, and may need to wait till all commands related to server are completed.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 3, 'created': '2021-10-19 17:15:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/db8088b32d3ba4a6d567029edc030e12ec148da3', 'message': 'Switch server backup to sdk.\n\n----------------first commit----------------------------------------\nUnit tests are modified and can pass.\nIt seems that there is no functional test perticularly for server backup.\nModule compute.v2.fakes.FakeServer is modified so that other 172 tests related to server fail.\nThis code change is hence more like a practice, and may need to wait till all commands related to server are completed.\n\n----------------second commit----------------------------------------\ncreate_sdk_servers() and create_one_sdk_server() are added temporarily for testing switched commands about server.\nUnswitched commands are using the unmodified ones.\ntox -e py38 passed locally\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 4, 'created': '2021-10-19 18:33:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/445a7e81b77138f346cf98a458a4c8acf8e1b2e6', 'message': 'Switch server backup to sdk. Add temporary helper methods in fakes.py for server commands.\n\n----------------first commit----------------------------------------\nUnit tests are modified and can pass.\nIt seems that there is no functional test perticularly for server backup.\nModule compute.v2.fakes.FakeServer is modified so that other 172 tests related to server fail.\nThis code change is hence more like a practice, and may need to wait till all commands related to server are completed.\n\n----------------second commit---------------------------------------\ncreate_sdk_servers() and create_one_sdk_server() are added temporarily for testing switched commands about server.\nUnswitched commands are using the unmodified ones.\ntox -e py38 passed locally\n\n----------------third commit----------------------------------------\nfix python style problem\ntox passed locally\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 5, 'created': '2021-10-21 13:43:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/65dd41abeb5d5215011502bc61845a797ee6ba37', 'message': 'Switch server backup to sdk.\n\n  Switch this command from novaclient to SDK. As this is the first server-related\n  command that we are migrating, we need to extend our test fakes to support fake\n  Server resources. The extended fakes will replace the old ones once all server\n  -related commands are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 6, 'created': '2021-10-21 13:43:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/c610dc6e8cd9d9d754b5b57e5d9d2014a6c9c4c5', 'message': 'Switch server backup to sdk.\n\n  Switch this command from novaclient to SDK. As this is the first server-related\n  command that we are migrating, we need to extend our test fakes to support fake\n  Server resources. The extended fakes will replace the old ones once all server-related commands are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 7, 'created': '2021-10-21 14:01:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/68ff960d3c2430c84f282f8d8ecc9715d43ed147', 'message': 'Switch server backup to sdk.\n\n  Switch this command from novaclient to SDK. As this is the first server-telated\n  command that we are migrating, we need to extend our test fakes to support fake\n  Server resources. The extended fakes will replace the old ones once all command\n  -s related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 8, 'created': '2021-10-23 12:39:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/2f41ee28a7882c739faf0ba3bb709869d0860e16', 'message': 'Switch server backup to sdk.\n\n  Switch this command from novaclient to SDK. As this is the first server-telated\n  command that we are migrating, we need to extend our test fakes to support fake\n  Server resources. The extended fakes will replace the old ones once all commands\n  related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 9, 'created': '2021-10-23 12:45:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/08cf9acc31cf2a150b10ca917b87df6bce478c80', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 10, 'created': '2021-10-25 15:02:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/66be7b815b2f0b153d02f741ffcd17fc9be37517', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 11, 'created': '2021-10-25 16:00:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/5ff792e9cd9899b0bf10d81fb87b98894847e8fc', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 12, 'created': '2021-10-25 16:45:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/941496b7d88f31aaab0ff854ac45eb0ce7ccb7d0', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 13, 'created': '2021-10-25 18:54:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/0c399b8ec09aef2452210c76ecefde1545450824', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 14, 'created': '2021-10-25 20:41:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/daf5f72a73e40d2580493498595d4084bd5d1c9a', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 15, 'created': '2021-10-25 22:34:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/40007a48e0639ecad58ab4c226e81071de417191', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 16, 'created': '2021-10-25 23:40:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/2f7b80b28d0a4e4416aa63a750c93340c082274b', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 17, 'created': '2021-10-26 14:48:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/4b5849e2c44a088bba7330147eb20df2d5711af3', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}, {'number': 18, 'created': '2021-10-27 09:11:28.000000000', 'files': ['openstackclient/compute/v2/server_backup.py', 'releasenotes/notes/migrate-server-backup-to-sdk-0f170baf38e98b40.yaml', 'openstackclient/tests/unit/compute/v2/test_server_backup.py', 'openstackclient/tests/unit/compute/v2/fakes.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/57aad01886fe9d98210496a92d517aa067c049a1', 'message': 'Switch server backup to sdk.\n\nSwitch this command from novaclient to SDK. As this is the first command\nrelated to server that we are migrating, we need to extend our test\nfakes to support fake Server resources. The extended fakes will replace\nthe old ones once all commands related to server are switched.\n\nChange-Id: If476fb1614a64320ed071bbda35e941bf3290a2e\n'}]",62,814332,57aad01886fe9d98210496a92d517aa067c049a1,55,4,18,34041,,,0,"Switch server backup to sdk.

Switch this command from novaclient to SDK. As this is the first command
related to server that we are migrating, we need to extend our test
fakes to support fake Server resources. The extended fakes will replace
the old ones once all commands related to server are switched.

Change-Id: If476fb1614a64320ed071bbda35e941bf3290a2e
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/32/814332/9 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/compute/v2/server_backup.py', 'openstackclient/tests/unit/compute/v2/test_server_backup.py', 'openstackclient/tests/unit/compute/v2/fakes.py']",3,d930cdfd945420fa178322d4fd4f55cddaaf6893,nova-migration-NU2021fall-cloud,"from openstack.compute.v2 import server """""" """""" return server.Server(**server_info)",,26,16
openstack%2Fnova~stable%2Ftrain~Ie36401c782f023d1d5f2623732619105dc2cfa24,openstack/nova,stable/train,Ie36401c782f023d1d5f2623732619105dc2cfa24,Reject open redirection in the console proxy,MERGED,2021-05-17 17:14:42.000000000,2021-10-28 23:43:47.000000000,2021-10-28 23:41:50.000000000,"[{'_account_id': 4690}, {'_account_id': 7166}, {'_account_id': 7634}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-05-17 17:14:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/851c4edce753242d93f1974b862e3d2111cb71bb', 'message': 'Reject open redirection in the console proxy\n\nOur console proxies (novnc, serial, spice) run in a websockify server\nwhose request handler inherits from the python standard\nSimpleHTTPRequestHandler. There is a known issue [1] in the\nSimpleHTTPRequestHandler which allows open redirects by way of URLs\nin the following format:\n\n  http://vncproxy.my.domain.com//example.com/%2F..\n\nwhich if visited, will redirect a user to example.com.\n\nWe can intercept a request and reject requests that pass a redirection\nURL beginning with ""//"" by implementing the\nSimpleHTTPRequestHandler.send_head() method containing the\nvulnerability to reject such requests with a 400 Bad Request.\n\nThis code is copied from a patch suggested in one of the issue comments\n[2].\n\nCloses-Bug: #1927677\n\n[1] https://bugs.python.org/issue32084\n[2] https://bugs.python.org/issue32084#msg306545\n\nConflicts:\n    nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train.\n\nChange-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24\n(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)\n(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)\n(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)\n(cherry picked from commit 1a8dd4e2e107f0ec19bd3b6646618af4f9bdf25b)\n'}, {'number': 2, 'created': '2021-07-29 22:01:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6b612c794a4a842d7ac2044c23ad15c035434170', 'message': 'Reject open redirection in the console proxy\n\nOur console proxies (novnc, serial, spice) run in a websockify server\nwhose request handler inherits from the python standard\nSimpleHTTPRequestHandler. There is a known issue [1] in the\nSimpleHTTPRequestHandler which allows open redirects by way of URLs\nin the following format:\n\n  http://vncproxy.my.domain.com//example.com/%2F..\n\nwhich if visited, will redirect a user to example.com.\n\nWe can intercept a request and reject requests that pass a redirection\nURL beginning with ""//"" by implementing the\nSimpleHTTPRequestHandler.send_head() method containing the\nvulnerability to reject such requests with a 400 Bad Request.\n\nThis code is copied from a patch suggested in one of the issue comments\n[2].\n\nCloses-Bug: #1927677\n\n[1] https://bugs.python.org/issue32084\n[2] https://bugs.python.org/issue32084#msg306545\n\nConflicts:\n    nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train.\n\nChange-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24\n(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)\n(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)\n(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)\n(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)\n'}, {'number': 3, 'created': '2021-07-31 01:16:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/5cb4d618ca67e622bbae24c768f9bdf408570986', 'message': 'Reject open redirection in the console proxy\n\nNOTE(melwitt): This is the combination of two commits, the bug fix and\na followup change to the unit test to enable it also run on\nPython < 3.6.\n\nOur console proxies (novnc, serial, spice) run in a websockify server\nwhose request handler inherits from the python standard\nSimpleHTTPRequestHandler. There is a known issue [1] in the\nSimpleHTTPRequestHandler which allows open redirects by way of URLs\nin the following format:\n\n  http://vncproxy.my.domain.com//example.com/%2F..\n\nwhich if visited, will redirect a user to example.com.\n\nWe can intercept a request and reject requests that pass a redirection\nURL beginning with ""//"" by implementing the\nSimpleHTTPRequestHandler.send_head() method containing the\nvulnerability to reject such requests with a 400 Bad Request.\n\nThis code is copied from a patch suggested in one of the issue comments\n[2].\n\nCloses-Bug: #1927677\n\n[1] https://bugs.python.org/issue32084\n[2] https://bugs.python.org/issue32084#msg306545\n\nConflicts:\n    nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train.\n\nNOTE(melwitt): The difference from the cherry picked change:\nHTTPStatus.BAD_REQUEST => 400 is due to the fact that HTTPStatus does\nnot exist in Python 2.7.\n\nReduce mocking in test_reject_open_redirect for compat\n\nThis is a followup for change Ie36401c782f023d1d5f2623732619105dc2cfa24\nto reduce mocking in the unit test coverage for it.\n\nWhile backporting the bug fix, it was found to be incompatible with\nearlier versions of Python < 3.6 due to a difference in internal\nimplementation [1].\n\nThis reduces the mocking in the unit test to be more agnostic to the\ninternals of the StreamRequestHandler (ancestor of\nSimpleHTTPRequestHandler) and work across Python versions >= 2.7.\n\nRelated-Bug: #1927677\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I546d376869a992601b443fb95acf1034da2a8f36\n(cherry picked from commit 214cabe6848a1fdb4f5941d994c6cc11107fc4af)\n(cherry picked from commit 9c2f29783734cb5f9cb05a08d328c10e1d16c4f1)\n(cherry picked from commit 94e265f3ca615aa18de0081a76975019997b8709)\n(cherry picked from commit d43b88a33407b1253e7bce70f720a44f7688141f)\n\nChange-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24\n(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)\n(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)\n(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)\n(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)\n'}, {'number': 4, 'created': '2021-09-29 15:14:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/75629e19e85fdf57fc02195254ed1fe5e4697997', 'message': 'Reject open redirection in the console proxy\n\nNOTE(melwitt): This is the combination of two commits, the bug fix and\na followup change to the unit test to enable it also run on\nPython < 3.6.\n\nOur console proxies (novnc, serial, spice) run in a websockify server\nwhose request handler inherits from the python standard\nSimpleHTTPRequestHandler. There is a known issue [1] in the\nSimpleHTTPRequestHandler which allows open redirects by way of URLs\nin the following format:\n\n  http://vncproxy.my.domain.com//example.com/%2F..\n\nwhich if visited, will redirect a user to example.com.\n\nWe can intercept a request and reject requests that pass a redirection\nURL beginning with ""//"" by implementing the\nSimpleHTTPRequestHandler.send_head() method containing the\nvulnerability to reject such requests with a 400 Bad Request.\n\nThis code is copied from a patch suggested in one of the issue comments\n[2].\n\nCloses-Bug: #1927677\n\n[1] https://bugs.python.org/issue32084\n[2] https://bugs.python.org/issue32084#msg306545\n\nConflicts:\n    nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train.\n\nNOTE(melwitt): The difference from the cherry picked change:\nHTTPStatus.BAD_REQUEST => 400 is due to the fact that HTTPStatus does\nnot exist in Python 2.7.\n\nReduce mocking in test_reject_open_redirect for compat\n\nThis is a followup for change Ie36401c782f023d1d5f2623732619105dc2cfa24\nto reduce mocking in the unit test coverage for it.\n\nWhile backporting the bug fix, it was found to be incompatible with\nearlier versions of Python < 3.6 due to a difference in internal\nimplementation [1].\n\nThis reduces the mocking in the unit test to be more agnostic to the\ninternals of the StreamRequestHandler (ancestor of\nSimpleHTTPRequestHandler) and work across Python versions >= 2.7.\n\nRelated-Bug: #1927677\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I546d376869a992601b443fb95acf1034da2a8f36\n(cherry picked from commit 214cabe6848a1fdb4f5941d994c6cc11107fc4af)\n(cherry picked from commit 9c2f29783734cb5f9cb05a08d328c10e1d16c4f1)\n(cherry picked from commit 94e265f3ca615aa18de0081a76975019997b8709)\n(cherry picked from commit d43b88a33407b1253e7bce70f720a44f7688141f)\n\nChange-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24\n(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)\n(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)\n(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)\n(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)\n'}, {'number': 5, 'created': '2021-09-29 19:15:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/78a34f34d0605a4af6ceb814ddc812525b7b53d6', 'message': 'Reject open redirection in the console proxy\n\nNOTE(melwitt): This is the combination of two commits, the bug fix and\na followup change to the unit test to enable it also run on\nPython < 3.6.\n\nOur console proxies (novnc, serial, spice) run in a websockify server\nwhose request handler inherits from the python standard\nSimpleHTTPRequestHandler. There is a known issue [1] in the\nSimpleHTTPRequestHandler which allows open redirects by way of URLs\nin the following format:\n\n  http://vncproxy.my.domain.com//example.com/%2F..\n\nwhich if visited, will redirect a user to example.com.\n\nWe can intercept a request and reject requests that pass a redirection\nURL beginning with ""//"" by implementing the\nSimpleHTTPRequestHandler.send_head() method containing the\nvulnerability to reject such requests with a 400 Bad Request.\n\nThis code is copied from a patch suggested in one of the issue comments\n[2].\n\nCloses-Bug: #1927677\n\n[1] https://bugs.python.org/issue32084\n[2] https://bugs.python.org/issue32084#msg306545\n\nConflicts:\n    nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train.\n\nNOTE(melwitt): The difference from the cherry picked change:\nHTTPStatus.BAD_REQUEST => 400 is due to the fact that HTTPStatus does\nnot exist in Python 2.7.\n\nReduce mocking in test_reject_open_redirect for compat\n\nThis is a followup for change Ie36401c782f023d1d5f2623732619105dc2cfa24\nto reduce mocking in the unit test coverage for it.\n\nWhile backporting the bug fix, it was found to be incompatible with\nearlier versions of Python < 3.6 due to a difference in internal\nimplementation [1].\n\nThis reduces the mocking in the unit test to be more agnostic to the\ninternals of the StreamRequestHandler (ancestor of\nSimpleHTTPRequestHandler) and work across Python versions >= 2.7.\n\nRelated-Bug: #1927677\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I546d376869a992601b443fb95acf1034da2a8f36\n(cherry picked from commit 214cabe6848a1fdb4f5941d994c6cc11107fc4af)\n(cherry picked from commit 9c2f29783734cb5f9cb05a08d328c10e1d16c4f1)\n(cherry picked from commit 94e265f3ca615aa18de0081a76975019997b8709)\n(cherry picked from commit d43b88a33407b1253e7bce70f720a44f7688141f)\n\nChange-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24\n(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)\n(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)\n(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)\n(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)\n'}, {'number': 6, 'created': '2021-10-08 09:38:09.000000000', 'files': ['releasenotes/notes/console-proxy-reject-open-redirect-4ac0a7895acca7eb.yaml', 'nova/console/websocketproxy.py', 'nova/tests/unit/console/test_websocketproxy.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/04d48527b62a35d912f93bc75613a6cca606df66', 'message': 'Reject open redirection in the console proxy\n\nNOTE(melwitt): This is the combination of two commits, the bug fix and\na followup change to the unit test to enable it also run on\nPython < 3.6.\n\nOur console proxies (novnc, serial, spice) run in a websockify server\nwhose request handler inherits from the python standard\nSimpleHTTPRequestHandler. There is a known issue [1] in the\nSimpleHTTPRequestHandler which allows open redirects by way of URLs\nin the following format:\n\n  http://vncproxy.my.domain.com//example.com/%2F..\n\nwhich if visited, will redirect a user to example.com.\n\nWe can intercept a request and reject requests that pass a redirection\nURL beginning with ""//"" by implementing the\nSimpleHTTPRequestHandler.send_head() method containing the\nvulnerability to reject such requests with a 400 Bad Request.\n\nThis code is copied from a patch suggested in one of the issue comments\n[2].\n\nCloses-Bug: #1927677\n\n[1] https://bugs.python.org/issue32084\n[2] https://bugs.python.org/issue32084#msg306545\n\nConflicts:\n    nova/tests/unit/console/test_websocketproxy.py\n\nNOTE(melwitt): The conflict is because change\nI23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols\nto be configurable for console proxies) is not in Train.\n\nNOTE(melwitt): The difference from the cherry picked change:\nHTTPStatus.BAD_REQUEST => 400 is due to the fact that HTTPStatus does\nnot exist in Python 2.7.\n\nReduce mocking in test_reject_open_redirect for compat\n\nThis is a followup for change Ie36401c782f023d1d5f2623732619105dc2cfa24\nto reduce mocking in the unit test coverage for it.\n\nWhile backporting the bug fix, it was found to be incompatible with\nearlier versions of Python < 3.6 due to a difference in internal\nimplementation [1].\n\nThis reduces the mocking in the unit test to be more agnostic to the\ninternals of the StreamRequestHandler (ancestor of\nSimpleHTTPRequestHandler) and work across Python versions >= 2.7.\n\nRelated-Bug: #1927677\n\n[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286\n\nChange-Id: I546d376869a992601b443fb95acf1034da2a8f36\n(cherry picked from commit 214cabe6848a1fdb4f5941d994c6cc11107fc4af)\n(cherry picked from commit 9c2f29783734cb5f9cb05a08d328c10e1d16c4f1)\n(cherry picked from commit 94e265f3ca615aa18de0081a76975019997b8709)\n(cherry picked from commit d43b88a33407b1253e7bce70f720a44f7688141f)\n\nChange-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24\n(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)\n(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)\n(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)\n(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)\n'}]",6,791807,04d48527b62a35d912f93bc75613a6cca606df66,64,6,6,4690,,,0,"Reject open redirection in the console proxy

NOTE(melwitt): This is the combination of two commits, the bug fix and
a followup change to the unit test to enable it also run on
Python < 3.6.

Our console proxies (novnc, serial, spice) run in a websockify server
whose request handler inherits from the python standard
SimpleHTTPRequestHandler. There is a known issue [1] in the
SimpleHTTPRequestHandler which allows open redirects by way of URLs
in the following format:

  http://vncproxy.my.domain.com//example.com/%2F..

which if visited, will redirect a user to example.com.

We can intercept a request and reject requests that pass a redirection
URL beginning with ""//"" by implementing the
SimpleHTTPRequestHandler.send_head() method containing the
vulnerability to reject such requests with a 400 Bad Request.

This code is copied from a patch suggested in one of the issue comments
[2].

Closes-Bug: #1927677

[1] https://bugs.python.org/issue32084
[2] https://bugs.python.org/issue32084#msg306545

Conflicts:
    nova/tests/unit/console/test_websocketproxy.py

NOTE(melwitt): The conflict is because change
I23ac1cc79482d0fabb359486a4b934463854cae5 (Allow TLS ciphers/protocols
to be configurable for console proxies) is not in Train.

NOTE(melwitt): The difference from the cherry picked change:
HTTPStatus.BAD_REQUEST => 400 is due to the fact that HTTPStatus does
not exist in Python 2.7.

Reduce mocking in test_reject_open_redirect for compat

This is a followup for change Ie36401c782f023d1d5f2623732619105dc2cfa24
to reduce mocking in the unit test coverage for it.

While backporting the bug fix, it was found to be incompatible with
earlier versions of Python < 3.6 due to a difference in internal
implementation [1].

This reduces the mocking in the unit test to be more agnostic to the
internals of the StreamRequestHandler (ancestor of
SimpleHTTPRequestHandler) and work across Python versions >= 2.7.

Related-Bug: #1927677

[1] https://github.com/python/cpython/commit/34eeed42901666fce099947f93dfdfc05411f286

Change-Id: I546d376869a992601b443fb95acf1034da2a8f36
(cherry picked from commit 214cabe6848a1fdb4f5941d994c6cc11107fc4af)
(cherry picked from commit 9c2f29783734cb5f9cb05a08d328c10e1d16c4f1)
(cherry picked from commit 94e265f3ca615aa18de0081a76975019997b8709)
(cherry picked from commit d43b88a33407b1253e7bce70f720a44f7688141f)

Change-Id: Ie36401c782f023d1d5f2623732619105dc2cfa24
(cherry picked from commit 781612b33282ed298f742c85dab58a075c8b793e)
(cherry picked from commit 470925614223c8dd9b1233f54f5a96c02b2d4f70)
(cherry picked from commit 6b70350bdcf59a9712f88b6435ba2c6500133e5b)
(cherry picked from commit 719e651e6be277950632e0c2cf5cc9a018344e7b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/07/791807/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/console-proxy-reject-open-redirect-4ac0a7895acca7eb.yaml', 'nova/console/websocketproxy.py', 'nova/tests/unit/console/test_websocketproxy.py']",3,851c4edce753242d93f1974b862e3d2111cb71bb,bug/1927677," def test_reject_open_redirect(self): # This will test the behavior when an attempt is made to cause an open # redirect. It should be rejected. mock_req = mock.MagicMock() mock_req.makefile().readline.side_effect = [ b'GET //example.com/%2F.. HTTP/1.1\r\n', b'' ] # Collect the response data to verify at the end. The # SimpleHTTPRequestHandler writes the response data by calling the # request socket sendall() method. self.data = b'' def fake_sendall(data): self.data += data mock_req.sendall.side_effect = fake_sendall client_addr = ('8.8.8.8', 54321) mock_server = mock.MagicMock() # This specifies that the server will be able to handle requests other # than only websockets. mock_server.only_upgrade = False # Constructing a handler will process the mock_req request passed in. websocketproxy.NovaProxyRequestHandler( mock_req, client_addr, mock_server) # Verify no redirect happens and instead a 400 Bad Request is returned. self.data = self.data.decode() self.assertIn('Error code: 400', self.data) self.assertIn('Message: URI must not start with //', self.data) ",,76,0
openstack%2Fproject-config~master~I26b1a7d0dde12be7c493d44d754b9ea8f72e6e66,openstack/project-config,master,I26b1a7d0dde12be7c493d44d754b9ea8f72e6e66,dstat graph: update to version with fixes,MERGED,2021-10-28 22:39:38.000000000,2021-10-28 23:42:10.000000000,2021-10-28 23:07:44.000000000,"[{'_account_id': 1}, {'_account_id': 4146}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 22:39:38.000000000', 'files': ['nodepool/elements/cache-devstack/source-repository-dstat_graph'], 'web_link': 'https://opendev.org/openstack/project-config/commit/30fd4b45491c4d0aa054be66dd8763a7ca89c1ec', 'message': ""dstat graph: update to version with fixes\n\nThis updates the on-disk cache version to the same as the default\nversion in zuul-jobs from I0d5e1b567c364a9e6c7aa0b95de17abffaef0434\n\nNote we have a pull request open on this original project to\nincorporate these changes, but the project has been dormat for a long\ntime.  If we don't have a response in the medium-term future, we can\nbring this project into opendev.org git and maintain our enhancments\nthere.\n\nChange-Id: I26b1a7d0dde12be7c493d44d754b9ea8f72e6e66\n""}]",0,815915,30fd4b45491c4d0aa054be66dd8763a7ca89c1ec,8,3,1,7118,,,0,"dstat graph: update to version with fixes

This updates the on-disk cache version to the same as the default
version in zuul-jobs from I0d5e1b567c364a9e6c7aa0b95de17abffaef0434

Note we have a pull request open on this original project to
incorporate these changes, but the project has been dormat for a long
time.  If we don't have a response in the medium-term future, we can
bring this project into opendev.org git and maintain our enhancments
there.

Change-Id: I26b1a7d0dde12be7c493d44d754b9ea8f72e6e66
",git fetch https://review.opendev.org/openstack/project-config refs/changes/15/815915/1 && git format-patch -1 --stdout FETCH_HEAD,['nodepool/elements/cache-devstack/source-repository-dstat_graph'],1,30fd4b45491c4d0aa054be66dd8763a7ca89c1ec,dstat-update,dstat_graph git /opt/cache/dstat_graph/ https://github.com/ianw/dstat_graph bootstrap5,dstat_graph git /opt/cache/dstat_graph/ https://github.com/Dabz/dstat_graph,1,1
openstack%2Fcinder~master~I4c96856870eb53171c3e71e84ac8463649484c7c,openstack/cinder,master,I4c96856870eb53171c3e71e84ac8463649484c7c,Tests: Improve RBD trash unit tests,MERGED,2021-09-15 14:29:08.000000000,2021-10-28 23:10:49.000000000,2021-10-28 23:08:07.000000000,"[{'_account_id': 9535}, {'_account_id': 20813}, {'_account_id': 22348}, {'_account_id': 33431}]","[{'number': 1, 'created': '2021-09-15 14:29:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/743c15febb2f46bb41f37d779511df86816dc41c', 'message': 'Tests: Improve RBD trash unit tests\n\nFollow-up to I5dbbcca to improve test coverage.\n\nChange-Id: I4c96856870eb53171c3e71e84ac8463649484c7c\n'}, {'number': 2, 'created': '2021-09-23 12:34:51.000000000', 'files': ['cinder/tests/unit/volume/drivers/test_rbd.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/01d1b3e3a1e3121deaf8560f2aab461cf32f7c4b', 'message': 'Tests: Improve RBD trash unit tests\n\nFollow-up to I5dbbcca to improve test coverage.\n\nChange-Id: I4c96856870eb53171c3e71e84ac8463649484c7c\n'}]",0,809201,01d1b3e3a1e3121deaf8560f2aab461cf32f7c4b,42,4,2,4523,,,0,"Tests: Improve RBD trash unit tests

Follow-up to I5dbbcca to improve test coverage.

Change-Id: I4c96856870eb53171c3e71e84ac8463649484c7c
",git fetch https://review.opendev.org/openstack/cinder refs/changes/01/809201/2 && git format-patch -1 --stdout FETCH_HEAD,['cinder/tests/unit/volume/drivers/test_rbd.py'],1,743c15febb2f46bb41f37d779511df86816dc41c,, self.driver.rbd.RBD.return_value.trash_move.assert_not_called() self.driver.rbd.RBD.return_value.remove.assert_not_called(),,2,0
openstack%2Fcinder~stable%2Fqueens~I7875d365bb73dd80ecbe30c4801599b6f781cc39,openstack/cinder,stable/queens,I7875d365bb73dd80ecbe30c4801599b6f781cc39,Correct group:reset_group_snapshot_status policy,MERGED,2021-10-27 22:46:05.000000000,2021-10-28 23:10:13.000000000,2021-10-28 23:08:04.000000000,"[{'_account_id': 7198}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 22:46:05.000000000', 'files': ['releasenotes/notes/bug-1908315-020fea3e244d49bb.yaml', 'cinder/policies/group_snapshot_actions.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/8b222bdd1df4c0bcfe46f42a5dfb229424dbb9f9', 'message': 'Correct group:reset_group_snapshot_status policy\n\nThe default value for the group:reset_group_snapshot_status policy, which governs the Block Storage API call ""Reset group snapshot status""[0], was changed to admin-or-owner during refactoring for the\npolicy-in-code initiative in Queens [1].  Consensus at the Wallaby\nR-18 mid-cycle was that this change was a mistake that should be\ncorrected [2].\n\n[0] https://docs.openstack.org/api-ref/block-storage/v3/#reset-group-snapshot-status\n[1] https://review.opendev.org/c/openstack/cinder/+/507812\n[2] https://wiki.openstack.org/wiki/CinderWallabyMidCycleSummary#consistent_and_secure_policies\n\nChange-Id: I7875d365bb73dd80ecbe30c4801599b6f781cc39\nCloses-bug: #1908315\n(cherry picked from commit 1631742f43a2d1f60cf5ccee26dced1d542f2bf6)\n(cherry picked from commit 1941ecc6d4013ecfdf7e2d37fd87ffaa04d8a38d)\n(cherry picked from commit 6c399a8b0d8e945911cf4408b0d6cb2d3d15bd3a)\n(cherry picked from commit f6d256cf1fdc6d4d98b33cf511efa8cf2e71f2f4)\n(cherry picked from commit 83b4c1144c4c3dda7fac887fd6bd5ea285cac7ea)\n(cherry picked from commit cdcf7b5f8b3c850555942f422b8ad1f43e21fe7b)\n'}]",1,815646,8b222bdd1df4c0bcfe46f42a5dfb229424dbb9f9,15,2,1,5314,,,0,"Correct group:reset_group_snapshot_status policy

The default value for the group:reset_group_snapshot_status policy, which governs the Block Storage API call ""Reset group snapshot status""[0], was changed to admin-or-owner during refactoring for the
policy-in-code initiative in Queens [1].  Consensus at the Wallaby
R-18 mid-cycle was that this change was a mistake that should be
corrected [2].

[0] https://docs.openstack.org/api-ref/block-storage/v3/#reset-group-snapshot-status
[1] https://review.opendev.org/c/openstack/cinder/+/507812
[2] https://wiki.openstack.org/wiki/CinderWallabyMidCycleSummary#consistent_and_secure_policies

Change-Id: I7875d365bb73dd80ecbe30c4801599b6f781cc39
Closes-bug: #1908315
(cherry picked from commit 1631742f43a2d1f60cf5ccee26dced1d542f2bf6)
(cherry picked from commit 1941ecc6d4013ecfdf7e2d37fd87ffaa04d8a38d)
(cherry picked from commit 6c399a8b0d8e945911cf4408b0d6cb2d3d15bd3a)
(cherry picked from commit f6d256cf1fdc6d4d98b33cf511efa8cf2e71f2f4)
(cherry picked from commit 83b4c1144c4c3dda7fac887fd6bd5ea285cac7ea)
(cherry picked from commit cdcf7b5f8b3c850555942f422b8ad1f43e21fe7b)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/46/815646/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1908315-020fea3e244d49bb.yaml', 'cinder/policies/group_snapshot_actions.py']",2,8b222bdd1df4c0bcfe46f42a5dfb229424dbb9f9,bug/1908315-stable/victoria-stable/ussuri-stable/train-stable/stein-stable/rocky-stable/queens," check_str=base.RULE_ADMIN_API,"," check_str=base.RULE_ADMIN_OR_OWNER,",39,1
openstack%2Fneutron~stable%2Fvictoria~Icb92327a06486e168ce064532d819347e6031cc1,openstack/neutron,stable/victoria,Icb92327a06486e168ce064532d819347e6031cc1,Delete log entries when SG or port is deleted,MERGED,2021-10-25 13:27:36.000000000,2021-10-28 22:34:35.000000000,2021-10-28 22:32:19.000000000,"[{'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-25 13:27:36.000000000', 'files': ['neutron/tests/unit/services/logapi/test_logging_plugin.py', 'neutron/services/logapi/common/sg_callback.py', 'neutron/services/logapi/common/db_api.py', 'neutron/tests/unit/services/logapi/common/test_db_api.py', 'neutron/services/logapi/logging_plugin.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/7790cecfc8c324780f8e5031bc59cb3d1a3c5f7c', 'message': 'Delete log entries when SG or port is deleted\n\nNOTE: this patch is an ammend of [1].\n\nWhen a SG or a port is deleted, the related log entry should be\ntoo. A log entry has the following fields:\n- log.resource_id = SG ID\n- log.target_id = port ID\n\n[1] was deleting all log entries, related or not with the SG ID\ndeleted. This is because ""get_logs_bound_sg"" returned all log entries,\nincluding those ones without any ""resource_id"" or ""target_id"".\n\nNow this method can return only the log entries related to a port or\na SG, excluding those ones without those two parameters populated.\n\nCloses-Bug: #1939558\n\n[1]https://review.opendev.org/c/openstack/neutron/+/804237\n\nChange-Id: Icb92327a06486e168ce064532d819347e6031cc1\n(cherry picked from commit 41f78c678bcc164cd77ed7302bacf086d24ab28c)\n(cherry picked from commit 2c4ab468ae53533db236809afaf0dd5f593db4dc)\n(cherry picked from commit d5fd9f035ac38dde75e5cf89a062387d4d5512fc)\n'}]",0,815299,7790cecfc8c324780f8e5031bc59cb3d1a3c5f7c,23,3,1,11975,,,0,"Delete log entries when SG or port is deleted

NOTE: this patch is an ammend of [1].

When a SG or a port is deleted, the related log entry should be
too. A log entry has the following fields:
- log.resource_id = SG ID
- log.target_id = port ID

[1] was deleting all log entries, related or not with the SG ID
deleted. This is because ""get_logs_bound_sg"" returned all log entries,
including those ones without any ""resource_id"" or ""target_id"".

Now this method can return only the log entries related to a port or
a SG, excluding those ones without those two parameters populated.

Closes-Bug: #1939558

[1]https://review.opendev.org/c/openstack/neutron/+/804237

Change-Id: Icb92327a06486e168ce064532d819347e6031cc1
(cherry picked from commit 41f78c678bcc164cd77ed7302bacf086d24ab28c)
(cherry picked from commit 2c4ab468ae53533db236809afaf0dd5f593db4dc)
(cherry picked from commit d5fd9f035ac38dde75e5cf89a062387d4d5512fc)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/99/815299/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/services/logapi/test_logging_plugin.py', 'neutron/services/logapi/common/sg_callback.py', 'neutron/services/logapi/common/db_api.py', 'neutron/tests/unit/services/logapi/common/test_db_api.py', 'neutron/services/logapi/logging_plugin.py']",5,7790cecfc8c324780f8e5031bc59cb3d1a3c5f7c,bug/1939558-stable/wallaby-stable/victoria,"@registry.has_registry_receivers def _clean_logs(self, context, sg_id=None, port_id=None): with db_api.CONTEXT_WRITER.using(context): sg_logs = log_db_api.get_logs_bound_sg( context, sg_id=sg_id, port_id=port_id, exclusive=True) @registry.receives(resources.SECURITY_GROUP, [events.AFTER_DELETE]) def _clean_logs_by_resource_id(self, resource, event, trigger, payload): # log.resource_id == SG self._clean_logs(payload.context.elevated(), sg_id=payload.resource_id) @registry.receives(resources.PORT, [events.AFTER_DELETE]) def _clean_logs_by_target_id(self, resource, event, trigger, payload): # log.target_id == port self._clean_logs(payload.context.elevated(), port_id=payload.resource_id) "," registry.subscribe( self._clean_security_group_logs, resources.SECURITY_GROUP, events.AFTER_DELETE) def _clean_security_group_logs(self, resource, event, trigger, payload): context = payload.context.elevated() sg_id = payload.resource_id with db_api.CONTEXT_WRITER.using(context): sg_logs = log_db_api.get_logs_bound_sg(context, sg_id)",90,75
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b,openstack/tripleo-heat-templates,stable/train,I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b,[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage,MERGED,2021-10-05 16:14:54.000000000,2021-10-28 22:27:31.000000000,2021-10-28 22:27:31.000000000,"[{'_account_id': 6413}, {'_account_id': 6796}, {'_account_id': 9003}, {'_account_id': 10459}, {'_account_id': 16643}, {'_account_id': 17823}, {'_account_id': 18002}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2021-10-05 16:14:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c33acbce4c5ff86f079a87662d1202f20be4ed48', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 2, 'created': '2021-10-05 16:16:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ba816031bd99c70c804a5cfb1e5f88c2d8bb2fb2', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 3, 'created': '2021-10-06 08:05:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d109f393718beb922ab688228f70eaab7418d207', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 4, 'created': '2021-10-07 16:56:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/fa8eecd33c8decf011e3a427289963b05743f748', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 5, 'created': '2021-10-07 16:58:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f060eaa287ef6eaabac1c0b4ba420f3a4e2ecfd9', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 6, 'created': '2021-10-08 12:24:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c9b0cb92bbea4304dc3f9fe6417e36a532c01517', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 7, 'created': '2021-10-08 14:08:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bea489ccb5461b7c59af6fafe3b51555d64a9d99', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 8, 'created': '2021-10-08 14:10:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/876c2a99c92112262fac4f363d1c8eeb5260981f', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 9, 'created': '2021-10-10 19:47:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bc227dc4b5a9c6555fce9a107ea219da49299898', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 10, 'created': '2021-10-25 17:08:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f0ba5873a6c613d31df41143023600fa68fae374', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}, {'number': 11, 'created': '2021-10-26 10:27:02.000000000', 'files': ['deployment/ceph-ansible/ceph-nfs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d29e0bfc0f68e31f47b2bada2a6ba5cb80a74bf3', 'message': '[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage\n\nThis is an attempt to restart the ceph-nfs resource after\nceph-ansible upgrades the ceph-cluster.\n\nChange-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b\n'}]",20,812526,d29e0bfc0f68e31f47b2bada2a6ba5cb80a74bf3,56,11,11,25402,,,0,"[TRAIN-ONLY] Restart ceph-nfs after the Ceph Upgrade stage

This is an attempt to restart the ceph-nfs resource after
ceph-ansible upgrades the ceph-cluster.

Change-Id: I53cb5a4c8063c5438751c2a67efbafdc6a7bc22b
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/26/812526/2 && git format-patch -1 --stdout FETCH_HEAD,['deployment/ceph-ansible/ceph-nfs.yaml'],1,c33acbce4c5ff86f079a87662d1202f20be4ed48,812526," external_upgrade_tasks: list_concat: - {get_attr: [CephBase, role_data, external_upgrade_tasks]} - - name: Restart ceph-nfs shell: pcs resource restart ceph-nfs tripleo_delegate_to: ""{{ ceph_nfs_short_bootstrap_node_name }}"" when: step|int == 3"," external_upgrade_tasks: {get_attr: [CephBase, role_data, external_upgrade_tasks]}",7,1
openstack%2Ftempest~master~I7c5ecfe1015dba4ad0b70bbdcacc079503c50e65,openstack/tempest,master,I7c5ecfe1015dba4ad0b70bbdcacc079503c50e65,Prepare MinBwAllocationPlacementTest for new neutron API ext,MERGED,2021-09-15 10:13:49.000000000,2021-10-28 21:54:48.000000000,2021-10-28 21:53:03.000000000,"[{'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 33652}]","[{'number': 1, 'created': '2021-09-15 10:13:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/80b18c69f25190ff558ff5954a903c04aa9a67c3', 'message': 'Prepare MinBwAllocationPlacementTest for new neutron API ext\n\nThe port-resource-request-groups neutron API extension proposed in\nI99a49b107b1872ddf83d1d8497a26a8d728feb07 changes the format of the\nport.binding:profile.allocation value. The existing tests are depending\non the format so they are adapted now to accept both format.\n\nblueprint: qos-minimum-guaranteed-packet-rate\nChange-Id: I7c5ecfe1015dba4ad0b70bbdcacc079503c50e65\n'}, {'number': 2, 'created': '2021-09-21 16:26:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/6be75cba57e0d2f2c170489f0eb8b1dd09bde529', 'message': 'Prepare MinBwAllocationPlacementTest for new neutron API ext\n\nThe port-resource-request-groups neutron API extension proposed in\nI99a49b107b1872ddf83d1d8497a26a8d728feb07 changes the format of the\nport.binding:profile.allocation value. The existing tests are depending\non the format so they are adapted now to accept both format.\n\nblueprint: qos-minimum-guaranteed-packet-rate\nChange-Id: I7c5ecfe1015dba4ad0b70bbdcacc079503c50e65\n'}, {'number': 3, 'created': '2021-10-19 10:57:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/8013cf659083592ea0254e399d434ea40f141860', 'message': 'Prepare MinBwAllocationPlacementTest for new neutron API ext\n\nThe port-resource-request-groups neutron API extension proposed in\nI99a49b107b1872ddf83d1d8497a26a8d728feb07 changes the format of the\nport.binding:profile.allocation value. The existing tests are depending\non the format so they are adapted now to accept both format.\n\nblueprint: qos-minimum-guaranteed-packet-rate\nChange-Id: I7c5ecfe1015dba4ad0b70bbdcacc079503c50e65\n'}, {'number': 4, 'created': '2021-10-27 16:32:37.000000000', 'files': ['tempest/scenario/test_minbw_allocation_placement.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/20514ef504ce71e252601006c919cf40b1e5d8b5', 'message': 'Prepare MinBwAllocationPlacementTest for new neutron API ext\n\nThe port-resource-request-groups neutron API extension proposed in\nI99a49b107b1872ddf83d1d8497a26a8d728feb07 changes the format of the\nport.binding:profile.allocation value. The existing tests are depending\non the format so they are adapted now to accept both format.\n\nblueprint: qos-minimum-guaranteed-packet-rate\nChange-Id: I7c5ecfe1015dba4ad0b70bbdcacc079503c50e65\n'}]",17,809168,20514ef504ce71e252601006c919cf40b1e5d8b5,30,5,4,9708,,,0,"Prepare MinBwAllocationPlacementTest for new neutron API ext

The port-resource-request-groups neutron API extension proposed in
I99a49b107b1872ddf83d1d8497a26a8d728feb07 changes the format of the
port.binding:profile.allocation value. The existing tests are depending
on the format so they are adapted now to accept both format.

blueprint: qos-minimum-guaranteed-packet-rate
Change-Id: I7c5ecfe1015dba4ad0b70bbdcacc079503c50e65
",git fetch https://review.opendev.org/openstack/tempest refs/changes/68/809168/1 && git format-patch -1 --stdout FETCH_HEAD,['tempest/scenario/test_minbw_allocation_placement.py'],1,80b18c69f25190ff558ff5954a903c04aa9a67c3,bp/qos-minimum-guaranteed-packet-rate," allocation_rp = None port_binding_alloc = port['port']['binding:profile'][ 'allocation'] # NOTE(gibi): the format of the allocation key depends on the # existence of port-resource-request-groups API extension. # TODO(gibi): drop the else branch once tempest does not need # to support Xena release any more. if isinstance(port_binding_alloc, dict): self.assertEqual( {allocation_rp}, set(port_binding_alloc.values())) else: self.assertEqual(allocation_rp, port_binding_alloc)"," self.assertEqual( allocation_rp, port['port']['binding:profile']['allocation'])",13,3
openstack%2Foslo.context~stable%2Fvictoria~If2a9cf05f382ae28846b95e5bb29669ee57f9bcd,openstack/oslo.context,stable/victoria,If2a9cf05f382ae28846b95e5bb29669ee57f9bcd,Dropping lower constraints testing,MERGED,2021-10-25 13:41:02.000000000,2021-10-28 21:25:55.000000000,2021-10-28 21:20:20.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-25 13:41:02.000000000', 'files': ['.zuul.yaml', 'lower-constraints.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/oslo.context/commit/5835e5d8e4d82b8200c1d00cd65ac72c4f646899', 'message': ""Dropping lower constraints testing\n\nThis is the combination of 2 commits (3542beac, 2af794b59f) cherry-picked\nfrom wallaby to drop the lower-constraints.\n\nThe first commit drop the lower constraints testing.\n\n(cherry picked from commit 3542beac2307333340a7a92af442f669502d52be)\n\nThe second one remove lower-constraints remnants\n\nThese were missed in change: If2a9cf05f382ae28846b95e5bb29669ee57f9bcd\n\n(cherry picked from commit 2af794b59f2645bfe16681ac03e4d44e1c5d3cc6)\n\nNOTE(hberaud): Conflicts are related to zuul's job names that differ\nfrom wallaby to victoria.\n\nChange-Id: If2a9cf05f382ae28846b95e5bb29669ee57f9bcd\n""}]",2,815304,5835e5d8e4d82b8200c1d00cd65ac72c4f646899,12,3,1,28522,,,0,"Dropping lower constraints testing

This is the combination of 2 commits (3542beac, 2af794b59f) cherry-picked
from wallaby to drop the lower-constraints.

The first commit drop the lower constraints testing.

(cherry picked from commit 3542beac2307333340a7a92af442f669502d52be)

The second one remove lower-constraints remnants

These were missed in change: If2a9cf05f382ae28846b95e5bb29669ee57f9bcd

(cherry picked from commit 2af794b59f2645bfe16681ac03e4d44e1c5d3cc6)

NOTE(hberaud): Conflicts are related to zuul's job names that differ
from wallaby to victoria.

Change-Id: If2a9cf05f382ae28846b95e5bb29669ee57f9bcd
",git fetch https://review.opendev.org/openstack/oslo.context refs/changes/04/815304/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'lower-constraints.txt', 'tox.ini']",3,5835e5d8e4d82b8200c1d00cd65ac72c4f646899,secure-rbac-stable/xena-stable/wallaby-stable/victoria,,[testenv:lower-constraints] deps = -c{toxinidir}/lower-constraints.txt -r{toxinidir}/test-requirements.txt -r{toxinidir}/requirements.txt,0,36
openstack%2Fpuppet-openstack-integration~master~I7de0394eec856fc6d242f7b4872694324fdd12b7,openstack/puppet-openstack-integration,master,I7de0394eec856fc6d242f7b4872694324fdd12b7,Ubuntu: Use debian-<release> ceph repo,MERGED,2021-10-27 13:18:49.000000000,2021-10-28 21:04:46.000000000,2021-10-28 21:04:46.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 13:18:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/7cc88ed42a459b396412e53adb1e0334688fcef0', 'message': 'Use debian-<release> repo for Ubuntu\n\nAccording to the Ceph documentation[1] we should use the debian-* repo\nfor ubuntu and the ceph-deb-* repo no longer exists.\n\n[1] https://docs.ceph.com/en/latest/install/get-packages/#ceph-release-packages\n\nChange-Id: I7de0394eec856fc6d242f7b4872694324fdd12b7\n'}, {'number': 2, 'created': '2021-10-27 13:22:36.000000000', 'files': ['configure_facts.sh'], 'web_link': 'https://opendev.org/openstack/puppet-openstack-integration/commit/13044d9f9e8fe0385ba68a458a301cc82188f08b', 'message': 'Ubuntu: Use debian-<release> ceph repo\n\nAccording to the Ceph documentation[1] we should use the debian-* repo\nfor ubuntu and the ceph-deb-* repo no longer exists.\n\n[1] https://docs.ceph.com/en/latest/install/get-packages/#ceph-release-packages\n\nChange-Id: I7de0394eec856fc6d242f7b4872694324fdd12b7\n'}]",0,815662,13044d9f9e8fe0385ba68a458a301cc82188f08b,8,3,2,9816,,,0,"Ubuntu: Use debian-<release> ceph repo

According to the Ceph documentation[1] we should use the debian-* repo
for ubuntu and the ceph-deb-* repo no longer exists.

[1] https://docs.ceph.com/en/latest/install/get-packages/#ceph-release-packages

Change-Id: I7de0394eec856fc6d242f7b4872694324fdd12b7
",git fetch https://review.opendev.org/openstack/puppet-openstack-integration refs/changes/62/815662/1 && git format-patch -1 --stdout FETCH_HEAD,['configure_facts.sh'],1,7cc88ed42a459b396412e53adb1e0334688fcef0,ubuntu-ceph-repos," CEPH_MIRROR_HOST=""http://download.ceph.com/debian-${CEPH_VERSION}"""," if [ ""$CEPH_VERSION"" == ""mimic"" ] || [ ""CEPH_VERSION"" == ""luminous"" ] ; then CEPH_MIRROR_HOST=""http://download.ceph.com/debian-${CEPH_VERSION}"" else CEPH_MIRROR_HOST=""${CENTOS_MIRROR_HOST}/ceph-deb-${CEPH_VERSION}"" fi",1,5
openstack%2Fneutron~master~I261cc01de43c8e8004ae03c5dcbc2afd78feecab,openstack/neutron,master,I261cc01de43c8e8004ae03c5dcbc2afd78feecab,Networking guide: Add trunk limitation to min bandwidth,MERGED,2021-10-27 09:05:23.000000000,2021-10-28 19:45:11.000000000,2021-10-28 19:43:06.000000000,"[{'_account_id': 8313}, {'_account_id': 9708}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 09:05:23.000000000', 'files': ['doc/source/admin/config-qos-min-bw.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/507a61efba83ba9e11145fd1d8bfc17d80f14557', 'message': 'Networking guide: Add trunk limitation to min bandwidth\n\nChange-Id: I261cc01de43c8e8004ae03c5dcbc2afd78feecab\n'}]",1,815609,507a61efba83ba9e11145fd1d8bfc17d80f14557,9,5,1,33652,,,0,"Networking guide: Add trunk limitation to min bandwidth

Change-Id: I261cc01de43c8e8004ae03c5dcbc2afd78feecab
",git fetch https://review.opendev.org/openstack/neutron refs/changes/09/815609/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/config-qos-min-bw.rst'],1,507a61efba83ba9e11145fd1d8bfc17d80f14557,,"* When QoS is used with a trunk, Placement enforcement is applied only to the trunk's parent port. Subports are not going to have Placement allocation. As a workaround, parent port's QoS policy should take into account subports needs and request enough minimum bandwidth resources to accommodate every port in the trunk. ",,6,0
openstack%2Fneutron~stable%2Fvictoria~Ifd686d7ff452abd1226fbbc97f499e05102e4596,openstack/neutron,stable/victoria,Ifd686d7ff452abd1226fbbc97f499e05102e4596,Fix OVN migration workload creation order,MERGED,2021-10-27 10:46:55.000000000,2021-10-28 19:45:04.000000000,2021-10-28 19:43:02.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 19118}, {'_account_id': 22348}, {'_account_id': 29350}]","[{'number': 1, 'created': '2021-10-27 10:46:55.000000000', 'files': ['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'], 'web_link': 'https://opendev.org/openstack/neutron/commit/5f5f2e073a20cee0b9db22cdd82e580d5c265f14', 'message': 'Fix OVN migration workload creation order\n\nCurrently workload VMs start before subnet is connected to router.\nWhen DVR is enabled this causes sometimes that one of the VMs is not\nable to get metadata.\n\nCloses bug: #1947547\n\nChange-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596\n(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)\n'}]",0,815619,5f5f2e073a20cee0b9db22cdd82e580d5c265f14,11,5,1,6773,,,0,"Fix OVN migration workload creation order

Currently workload VMs start before subnet is connected to router.
When DVR is enabled this causes sometimes that one of the VMs is not
able to get metadata.

Closes bug: #1947547

Change-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596
(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/19/815619/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'],1,5f5f2e073a20cee0b9db22cdd82e580d5c265f14,,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,6,6
openstack%2Fneutron~stable%2Fxena~Ifd686d7ff452abd1226fbbc97f499e05102e4596,openstack/neutron,stable/xena,Ifd686d7ff452abd1226fbbc97f499e05102e4596,Fix OVN migration workload creation order,MERGED,2021-10-27 10:47:22.000000000,2021-10-28 19:32:15.000000000,2021-10-28 19:29:54.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 19118}, {'_account_id': 22348}, {'_account_id': 29350}]","[{'number': 1, 'created': '2021-10-27 10:47:22.000000000', 'files': ['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'], 'web_link': 'https://opendev.org/openstack/neutron/commit/d86a3cdfe77a4e7ca64b57f59000cf0145c7a01a', 'message': 'Fix OVN migration workload creation order\n\nCurrently workload VMs start before subnet is connected to router.\nWhen DVR is enabled this causes sometimes that one of the VMs is not\nable to get metadata.\n\nCloses bug: #1947547\n\nChange-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596\n(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)\n'}]",0,815621,d86a3cdfe77a4e7ca64b57f59000cf0145c7a01a,12,5,1,6773,,,0,"Fix OVN migration workload creation order

Currently workload VMs start before subnet is connected to router.
When DVR is enabled this causes sometimes that one of the VMs is not
able to get metadata.

Closes bug: #1947547

Change-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596
(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/21/815621/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'],1,d86a3cdfe77a4e7ca64b57f59000cf0145c7a01a,,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,6,6
openstack%2Fneutron~stable%2Fwallaby~Ifd686d7ff452abd1226fbbc97f499e05102e4596,openstack/neutron,stable/wallaby,Ifd686d7ff452abd1226fbbc97f499e05102e4596,Fix OVN migration workload creation order,MERGED,2021-10-27 10:47:09.000000000,2021-10-28 19:31:58.000000000,2021-10-28 19:30:03.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 19118}, {'_account_id': 22348}, {'_account_id': 29350}]","[{'number': 1, 'created': '2021-10-27 10:47:09.000000000', 'files': ['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'], 'web_link': 'https://opendev.org/openstack/neutron/commit/fbf8cb9347af99803c3ca6019ef21e88b2ad21bc', 'message': 'Fix OVN migration workload creation order\n\nCurrently workload VMs start before subnet is connected to router.\nWhen DVR is enabled this causes sometimes that one of the VMs is not\nable to get metadata.\n\nCloses bug: #1947547\n\nChange-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596\n(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)\n'}]",0,815620,fbf8cb9347af99803c3ca6019ef21e88b2ad21bc,12,5,1,6773,,,0,"Fix OVN migration workload creation order

Currently workload VMs start before subnet is connected to router.
When DVR is enabled this causes sometimes that one of the VMs is not
able to get metadata.

Closes bug: #1947547

Change-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596
(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/20/815620/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'],1,fbf8cb9347af99803c3ca6019ef21e88b2ad21bc,,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,6,6
openstack%2Frequirements~stable%2Fxena~I9cc705f02f6ca464431915e6bc44d02a63c8e207,openstack/requirements,stable/xena,I9cc705f02f6ca464431915e6bc44d02a63c8e207,update constraint for oslo.policy to new release 3.8.3,MERGED,2021-10-28 10:54:27.000000000,2021-10-28 19:29:51.000000000,2021-10-28 19:29:51.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-28 10:54:27.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/670bc6873ce85fcceb38adf1d37e329177c8494e', 'message': 'update constraint for oslo.policy to new release 3.8.3\n\nmeta: version: 3.8.3\nmeta: diff-start: -\nmeta: series: xena\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: Ib028b353b5a7aee48c2556418c49b9e8062bc6dd\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: I9cc705f02f6ca464431915e6bc44d02a63c8e207\n'}]",0,815819,670bc6873ce85fcceb38adf1d37e329177c8494e,8,3,1,11131,,,0,"update constraint for oslo.policy to new release 3.8.3

meta: version: 3.8.3
meta: diff-start: -
meta: series: xena
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Hervé Beraud <hberaud@redhat.com>
meta: release:Commit: Hervé Beraud <hberaud@redhat.com>
meta: release:Change-Id: Ib028b353b5a7aee48c2556418c49b9e8062bc6dd
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: I9cc705f02f6ca464431915e6bc44d02a63c8e207
",git fetch https://review.opendev.org/openstack/requirements refs/changes/19/815819/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,670bc6873ce85fcceb38adf1d37e329177c8494e,new-release,oslo.policy===3.8.3,oslo.policy===3.8.2,1,1
openstack%2Fpython-tripleoclient~stable%2Fwallaby~I3cc61bfee94227045909a4b0ccf84a8d595b2cea,openstack/python-tripleoclient,stable/wallaby,I3cc61bfee94227045909a4b0ccf84a8d595b2cea,Save needed stack outputs in working_dir,MERGED,2021-10-27 18:00:23.000000000,2021-10-28 19:20:21.000000000,2021-10-28 19:17:12.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 18:00:23.000000000', 'files': ['releasenotes/notes/save-stack-outputs-61c2ad9528ae2529.yaml', 'tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/constants.py', 'tripleoclient/workflows/deployment.py', 'tripleoclient/utils.py', 'tripleoclient/v1/overcloud_upgrade.py', 'tripleoclient/tests/workflows/test_deployment.py', 'tripleoclient/v1/overcloud_external_update.py', 'tripleoclient/v1/overcloud_deploy.py', 'tripleoclient/v1/overcloud_external_upgrade.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/6da69f44c79c1207791db1f6921ff18d467fd81d', 'message': 'Save needed stack outputs in working_dir\n\nWith ephemeral-heat, we need to save the needed stack outputs in the\nworking_dir so that the values can be used when needed if the stack is\nno longer around.\n\nWith the outputs saved, the stack object no longer needs to be passed to\nworkflows.deployment.config_download and\nworkflows.deployment.get_hosts_and_enable_ssh_admin, only the stack name\nand output values are needed.\n\nSigned-off-by: James Slagle <jslagle@redhat.com>\nChange-Id: I3cc61bfee94227045909a4b0ccf84a8d595b2cea\n(cherry picked from commit 276a6def101f48a436e6908318b01b0c1537e2a3)\n'}]",0,815719,6da69f44c79c1207791db1f6921ff18d467fd81d,9,3,1,7144,,,0,"Save needed stack outputs in working_dir

With ephemeral-heat, we need to save the needed stack outputs in the
working_dir so that the values can be used when needed if the stack is
no longer around.

With the outputs saved, the stack object no longer needs to be passed to
workflows.deployment.config_download and
workflows.deployment.get_hosts_and_enable_ssh_admin, only the stack name
and output values are needed.

Signed-off-by: James Slagle <jslagle@redhat.com>
Change-Id: I3cc61bfee94227045909a4b0ccf84a8d595b2cea
(cherry picked from commit 276a6def101f48a436e6908318b01b0c1537e2a3)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/19/815719/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/save-stack-outputs-61c2ad9528ae2529.yaml', 'tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/constants.py', 'tripleoclient/workflows/deployment.py', 'tripleoclient/utils.py', 'tripleoclient/v1/overcloud_upgrade.py', 'tripleoclient/tests/workflows/test_deployment.py', 'tripleoclient/v1/overcloud_external_update.py', 'tripleoclient/v1/overcloud_deploy.py', 'tripleoclient/v1/overcloud_external_upgrade.py']",10,6da69f44c79c1207791db1f6921ff18d467fd81d,," stack_name=parsed_args.stack,"," stack=oooutils.get_stack( self.app.client_manager.orchestration, parsed_args.stack ),",87,59
openstack%2Fpython-tripleoclient~stable%2Fwallaby~Id4880be3a0d936e67bfc77ed28145eb1b9de162e,openstack/python-tripleoclient,stable/wallaby,Id4880be3a0d936e67bfc77ed28145eb1b9de162e,Update playbooks to use consistent working dir,MERGED,2021-10-27 18:00:23.000000000,2021-10-28 19:18:55.000000000,2021-10-28 19:17:08.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 18:00:23.000000000', 'files': ['tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/workflows/deployment.py', 'tripleoclient/v1/overcloud_upgrade.py', 'tripleoclient/tests/v1/overcloud_upgrade/test_overcloud_upgrade.py', 'tripleoclient/tests/workflows/test_deployment.py', 'tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/bcbe3c1fee5d3f012726b99fb44df676f4f1a7ae', 'message': 'Update playbooks to use consistent working dir\n\nUpdates the cli-enable-ssh-admin.yaml and cli-grant-local-access.yaml\nansible playbook executions to use the consistent working directory\ninstead of a temporary directory. Adds reproduce_command=True to the\ncalls to utils.run_ansible_playbook so that the workflows can be re-run\nout of the deployment for reproducability.\n\nChange-Id: Id4880be3a0d936e67bfc77ed28145eb1b9de162e\nSigned-off-by: James Slagle <jslagle@redhat.com>\n(cherry picked from commit b7b934b6ea1314e8999427f828edccebba00d3d3)\n'}]",1,815717,bcbe3c1fee5d3f012726b99fb44df676f4f1a7ae,12,3,1,7144,,,0,"Update playbooks to use consistent working dir

Updates the cli-enable-ssh-admin.yaml and cli-grant-local-access.yaml
ansible playbook executions to use the consistent working directory
instead of a temporary directory. Adds reproduce_command=True to the
calls to utils.run_ansible_playbook so that the workflows can be re-run
out of the deployment for reproducability.

Change-Id: Id4880be3a0d936e67bfc77ed28145eb1b9de162e
Signed-off-by: James Slagle <jslagle@redhat.com>
(cherry picked from commit b7b934b6ea1314e8999427f828edccebba00d3d3)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/17/815717/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/workflows/deployment.py', 'tripleoclient/v1/overcloud_upgrade.py', 'tripleoclient/tests/v1/overcloud_upgrade/test_overcloud_upgrade.py', 'tripleoclient/tests/workflows/test_deployment.py', 'tripleoclient/v1/overcloud_deploy.py']",6,bcbe3c1fee5d3f012726b99fb44df676f4f1a7ae,," self.working_dir,",,50,35
openstack%2Fpython-tripleoclient~stable%2Fwallaby~Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4,openstack/python-tripleoclient,stable/wallaby,Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4,Fix --stack-only to download ansible playbooks,MERGED,2021-10-27 18:00:23.000000000,2021-10-28 19:17:10.000000000,2021-10-28 19:17:10.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 18:00:23.000000000', 'files': ['tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/e5b308eecac26cecea119f403557844964303593', 'message': 'Fix --stack-only to download ansible playbooks\n\nIn previously versions, if you wanted to manually run the playbooks you\ncould use --stack-only to generate them and have them created for you.\nThis appears to be broken as the condition is now based on --setup-only\nwhich attempts to restore a previously existing stack. This moves the\ndownload config playbooks back to also being dependent on --stack-only\nor --no-config-download\n\nChange-Id: Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4\nCloses-Bug: #1934009\n(cherry picked from commit 0adc5bb9dff517cbe298d97d5bcee698b2a2e77c)\n'}]",0,815718,e5b308eecac26cecea119f403557844964303593,9,4,1,7144,,,0,"Fix --stack-only to download ansible playbooks

In previously versions, if you wanted to manually run the playbooks you
could use --stack-only to generate them and have them created for you.
This appears to be broken as the condition is now based on --setup-only
which attempts to restore a previously existing stack. This moves the
download config playbooks back to also being dependent on --stack-only
or --no-config-download

Change-Id: Ie810f9fbaabfff98595a3aaaf1878a348b17dfb4
Closes-Bug: #1934009
(cherry picked from commit 0adc5bb9dff517cbe298d97d5bcee698b2a2e77c)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/18/815718/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/overcloud_deploy.py'],1,e5b308eecac26cecea119f403557844964303593,," elif not parsed_args.config_download or parsed_args.setup_only: # Download config config_dir = parsed_args.config_dir or config_download_dir config_type = parsed_args.config_type preserve_config_dir = parsed_args.preserve_config_dir extra_vars = { 'plan': stack.stack_name, 'config_dir': config_dir, 'preserve_config': preserve_config_dir } if parsed_args.config_type: extra_vars['config_type'] = config_type with utils.TempDirs() as tmp: utils.run_ansible_playbook( playbook='cli-config-download-export.yaml', inventory='localhost,', workdir=tmp, playbook_dir=constants.ANSIBLE_TRIPLEO_PLAYBOOKS, verbosity=utils.playbook_verbosity(self=self), extra_vars=extra_vars )"," else: # Download config config_dir = parsed_args.config_dir or config_download_dir config_type = parsed_args.config_type preserve_config_dir = parsed_args.preserve_config_dir extra_vars = { 'plan': stack.stack_name, 'config_dir': config_dir, 'preserve_config': preserve_config_dir } if parsed_args.config_type: extra_vars['config_type'] = config_type with utils.TempDirs() as tmp: utils.run_ansible_playbook( playbook='cli-config-download-export.yaml', inventory='localhost,', workdir=tmp, playbook_dir=constants.ANSIBLE_TRIPLEO_PLAYBOOKS, verbosity=utils.playbook_verbosity(self=self), extra_vars=extra_vars )",22,22
openstack%2Fbarbican~stable%2Ftrain~I6879f566117db5ec0099ddad35ba649a3c674bd1,openstack/barbican,stable/train,I6879f566117db5ec0099ddad35ba649a3c674bd1,Fix RBAC and ACL access for managing secret containers,MERGED,2021-10-28 16:36:20.000000000,2021-10-28 18:35:32.000000000,2021-10-28 18:33:40.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 16:36:20.000000000', 'files': ['barbican/api/controllers/containers.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/f22739f1bc6eb16934598f04e21442d153049774', 'message': 'Fix RBAC and ACL access for managing secret containers\n\nThis patch adds the missing access control data to enforce access\ncontrol for adding/removing secrets in containers.\n\nChange-Id: I6879f566117db5ec0099ddad35ba649a3c674bd1\n(cherry picked from commit 922c68badaf5cc4b43862ab261119b68cdc68a37)\n(cherry picked from commit c8d3c580143282935de36e4a5a1708ee9242f7be)\n(cherry picked from commit ef281473652f2d8f2da1c9ebced34b2e723cff5b)\n(cherry picked from commit c39bb67a746a5c35d138c04114c991c1e7fd7918)\n'}]",0,815874,f22739f1bc6eb16934598f04e21442d153049774,7,2,1,7973,,,0,"Fix RBAC and ACL access for managing secret containers

This patch adds the missing access control data to enforce access
control for adding/removing secrets in containers.

Change-Id: I6879f566117db5ec0099ddad35ba649a3c674bd1
(cherry picked from commit 922c68badaf5cc4b43862ab261119b68cdc68a37)
(cherry picked from commit c8d3c580143282935de36e4a5a1708ee9242f7be)
(cherry picked from commit ef281473652f2d8f2da1c9ebced34b2e723cff5b)
(cherry picked from commit c39bb67a746a5c35d138c04114c991c1e7fd7918)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/74/815874/1 && git format-patch -1 --stdout FETCH_HEAD,['barbican/api/controllers/containers.py'],1,f22739f1bc6eb16934598f04e21442d153049774,secure-rbac-stable/victoria-stable/ussuri-stable/train," def get_acl_tuple(self, req, **kwargs): acl = self.get_acl_dict_for_user(req, self.container.container_acls) acl['project_id'] = self.container.project.external_id acl['creator_id'] = self.container.creator_id return ('container', acl) ",,6,0
openstack%2Fproject-config~master~I53bbbfbb8b891586fb921373c49ce593b7735910,openstack/project-config,master,I53bbbfbb8b891586fb921373c49ce593b7735910,Disable OVH BHS1 due to a sad mirror node,ABANDONED,2021-10-28 18:24:50.000000000,2021-10-28 18:33:21.000000000,,[{'_account_id': 5263}],"[{'number': 1, 'created': '2021-10-28 18:24:50.000000000', 'files': ['nodepool/nl04.opendev.org.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/67a396e6173caf7d8acb9d2c1edda2c3c916e2ea', 'message': ""Disable OVH BHS1 due to a sad mirror node\n\nThe mirror in this cloud region has filled up its apache disk cache and\nisn't pruning it quickly enough. This leads to segfaults and a sad\napache. The sad apache causes requests from our test jobs to fail which\nfails the tests.\n\nLet's disable it for now and get the mirror into a happier state then we\ncan reenable things.\n\nChange-Id: I53bbbfbb8b891586fb921373c49ce593b7735910\n""}]",0,815896,67a396e6173caf7d8acb9d2c1edda2c3c916e2ea,3,1,1,4146,,,0,"Disable OVH BHS1 due to a sad mirror node

The mirror in this cloud region has filled up its apache disk cache and
isn't pruning it quickly enough. This leads to segfaults and a sad
apache. The sad apache causes requests from our test jobs to fail which
fails the tests.

Let's disable it for now and get the mirror into a happier state then we
can reenable things.

Change-Id: I53bbbfbb8b891586fb921373c49ce593b7735910
",git fetch https://review.opendev.org/openstack/project-config refs/changes/96/815896/1 && git format-patch -1 --stdout FETCH_HEAD,['nodepool/nl04.opendev.org.yaml'],1,67a396e6173caf7d8acb9d2c1edda2c3c916e2ea,disable-ovh-bhs1, max-servers: 0, max-servers: 120,1,1
openstack%2Ftripleo-quickstart-extras~master~I04c0a589ed32149ef94557ea7ab36d217f8b8d11,openstack/tripleo-quickstart-extras,master,I04c0a589ed32149ef94557ea7ab36d217f8b8d11,Use tripleo-mount-image for modify-image,MERGED,2021-08-26 22:52:16.000000000,2021-10-28 18:18:16.000000000,2021-10-28 05:47:16.000000000,"[{'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}, {'_account_id': 29775}]","[{'number': 1, 'created': '2021-08-26 22:52:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/bc210b0d7db086938ab047192f28bd6d8abfee22', 'message': 'Use tripleo-mount-image for modify-image\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/806067\nDepends-On: https://review.rdoproject.org/r/c/openstack/tripleo-common-distgit/+/35134\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 2, 'created': '2021-08-29 20:42:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/3735343f618da673be67b124a992d70d16cb8bd4', 'message': 'Use tripleo-mount-image for modify-image\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/806067\nDepends-On: https://review.rdoproject.org/r/c/openstack/tripleo-common-distgit/+/35134\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 3, 'created': '2021-08-30 02:40:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/000c82a60b98ac8489c4a9e93b8fce7db9bdf3fa', 'message': 'Use tripleo-mount-image for modify-image\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/806067\nDepends-On: https://review.rdoproject.org/r/c/openstack/tripleo-common-distgit/+/35134\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 4, 'created': '2021-08-30 21:38:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/3f1d698d07f9cb719da8ab43c4755b8cb7747a73', 'message': 'Use tripleo-mount-image for modify-image\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/806067\nDepends-On: https://review.rdoproject.org/r/c/openstack/tripleo-common-distgit/+/35134\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 5, 'created': '2021-08-31 03:51:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/9c36b0f030a7dd055e1feab385dd5594fa3f5140', 'message': 'Use tripleo-mount-image for modify-image\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/806067\nDepends-On: https://review.rdoproject.org/r/c/openstack/tripleo-common-distgit/+/35134\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 6, 'created': '2021-09-10 02:01:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/7c747d5bd0726b804e78b4fbed7c55b7d560895a', 'message': 'Use tripleo-mount-image for modify-image\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/806067\nDepends-On: https://review.rdoproject.org/r/c/openstack/tripleo-common-distgit/+/35134\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 7, 'created': '2021-09-13 21:12:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e59799ac82ceb60a79e5ddec93c379b93b44e906', 'message': 'WIP Use tripleo-mount-image for modify-image\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/806067\nDepends-On: https://review.rdoproject.org/r/c/openstack/tripleo-common-distgit/+/35134\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 8, 'created': '2021-09-16 22:42:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e120e42853c29501e241b968b356261dc7c3d8c4', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 9, 'created': '2021-09-16 23:25:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/037c9c87f551639b061c31676c5146d0611d8590', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 10, 'created': '2021-09-19 22:45:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/91d23e6889b7608b0591d86fb3bf25ef19a400ea', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 11, 'created': '2021-09-20 21:04:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/df1ba995b84e662221ce125c069826f817a51cad', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 12, 'created': '2021-09-21 00:55:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/ff099fcf2bcf740e34606038217bc67422363d09', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 13, 'created': '2021-09-22 02:46:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/8c7c3b2e4b207e928db933ea45ebdf6f1e0a673e', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 14, 'created': '2021-09-22 22:46:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e483a411809a404b8a0d678d8241547e5d9adc5d', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 15, 'created': '2021-10-05 01:32:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/8db96ccc9c698a73a87fe458cec33a922a1d0e31', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 16, 'created': '2021-10-05 05:10:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/1cf6bfc111a47e931bdbb35b9c7e1fb714977677', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 17, 'created': '2021-10-05 05:18:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e5a470cf9f0a5c45ae36bf726e1b44b086498051', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}, {'number': 18, 'created': '2021-10-06 20:29:55.000000000', 'files': ['roles/modify-image/tasks/manual.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/1ce3c2b63edd6f035e8a1ec6872eb178a8d3c676', 'message': 'Use tripleo-mount-image for modify-image\n\ntripleo-mount-image will only be backported as far as Wallaby, so a\nminimal qemu-nbd fallback is included which assumes a simple partition\nimage.\n\nDepends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486\nChange-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11\nBlueprint: whole-disk-default\n'}]",5,806284,1ce3c2b63edd6f035e8a1ec6872eb178a8d3c676,119,7,18,4571,,,0,"Use tripleo-mount-image for modify-image

tripleo-mount-image will only be backported as far as Wallaby, so a
minimal qemu-nbd fallback is included which assumes a simple partition
image.

Depends-On: https://review.opendev.org/c/openstack/tripleo-common/+/809486
Change-Id: I04c0a589ed32149ef94557ea7ab36d217f8b8d11
Blueprint: whole-disk-default
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/84/806284/14 && git format-patch -1 --stdout FETCH_HEAD,['roles/modify-image/tasks/manual.yml'],1,bc210b0d7db086938ab047192f28bd6d8abfee22,bp/whole-disk-default," shell: > set -ex; tripleo-mount-image -a {{ image_to_modify_raw }} -m {{ mount_tempdir }}; register: mount_result - name: Debug image mount debug: msg: stdout: ""{{ mount_result.stdout }}"" stderr: ""{{ mount_result.stderr }}"" umount {{ mount_tempdir }}/dev/; shell: > chroot {{ mount_tempdir }} setfiles /etc/selinux/targeted/contexts/files/file_contexts / ; tripleo-unmount-image -m {{ mount_tempdir }}; qemu-img convert -c -f raw -O qcow2 {{ image_to_modify_raw }} {{ image_to_modify_qcow }}; rm -rf ""{{ image_to_modify_raw }}""; rm -rf ""{{ mount_tempdir }}""; chown -R {{ undercloud_user }}: /home/{{ undercloud_user }}/;"," shell: | set -e IMAGE_FILE={{ image_to_modify_raw }} MOUNT_DIR={{ mount_tempdir }} NBD_DEVICE=/dev/nbd0 mount_volume () { if [ -b ""$1"" ]; then if [ ! -d $2 ]; then mkdir $2 fi mount $1 $2 fi } set -x qemu-nbd --connect $NBD_DEVICE $IMAGE_FILE # search for the vg volume group, this is automatic in some environments vgscan # refresh for when this script is called with different values of $NBD_DEVICE vgchange --refresh # activate new logical volumes, this is automatic in some environments vgchange -ay if [ -b ""${NBD_DEVICE}p3"" ]; then # 3 partitions in the image, so assume the first 2 are boot partitions if [ -b ""/dev/mapper/vg-lv_root"" ]; then # a whole-disk overcloud with lvm volumes # for example, overcloud-hardened-uefi-full.qcow2 mount /dev/mapper/vg-lv_root $MOUNT_DIR mount_volume /dev/mapper/vg-lv_var $MOUNT_DIR/var mount_volume /dev/mapper/vg-lv_log $MOUNT_DIR/var/log mount_volume /dev/mapper/vg-lv_audit $MOUNT_DIR/var/log/audit mount_volume /dev/mapper/vg-lv_home $MOUNT_DIR/home mount_volume /dev/mapper/vg-lv_tmp $MOUNT_DIR/tmp mount_volume /dev/mapper/vg-lv_srv $MOUNT_DIR/srv else # a whole-disk overcloud with a single root partition # for example, overcloud-hardened-full.qcow2 mount ${NBD_DEVICE}p3 $MOUNT_DIR fi else # a partition image # for example, overcloud-full.qcow2 if [ -b ""${NBD_DEVICE}p1"" ]; then mount ${NBD_DEVICE}p1 $MOUNT_DIR else mount ${NBD_DEVICE} $MOUNT_DIR fi fi shell: | chroot {{ mount_tempdir }} setfiles /etc/selinux/targeted/contexts/files/file_contexts / MOUNT_DIR={{ mount_tempdir }} NBD_DEVICE=/dev/nbd0 unmount_volume () { if mountpoint ""$1""; then umount $1 fi } remove_device () { if [ -b ""/dev/mapper/$1"" ]; then dmsetup remove $1 fi } if mountpoint ""$MOUNT_DIR""; then unmount_volume $MOUNT_DIR/var/log/audit unmount_volume $MOUNT_DIR/var/log unmount_volume $MOUNT_DIR/var unmount_volume $MOUNT_DIR/home unmount_volume $MOUNT_DIR/tmp unmount_volume $MOUNT_DIR/srv umount $MOUNT_DIR fi qemu-nbd --disconnect $NBD_DEVICE vgchange --refresh vg || true remove_device vg-lv_root remove_device vg-lv_var remove_device vg-lv_log remove_device vg-lv_audit remove_device vg-lv_home remove_device vg-lv_tmp remove_device vg-lv_srv qemu-img convert -c -f raw -O qcow2 {{ image_to_modify_raw }} {{ image_to_modify_qcow }} rm -rf ""{{ image_to_modify_raw }}"" rm -rf ""{{ mount_tempdir }}"" chown -R {{ undercloud_user }}: /home/{{ undercloud_user }}/",18,96
openstack%2Ftripleo-quickstart-extras~master~I2f4e9c8d0b474b839bcff5b7cf9027f695eef047,openstack/tripleo-quickstart-extras,master,I2f4e9c8d0b474b839bcff5b7cf9027f695eef047,In modify-image don't convert qcow2<->raw,MERGED,2021-09-16 23:25:00.000000000,2021-10-28 17:59:51.000000000,2021-10-28 15:47:43.000000000,"[{'_account_id': 9976}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}, {'_account_id': 29775}]","[{'number': 1, 'created': '2021-09-16 23:25:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/dd0b6bd56cac44a56065a26d12c37bceed541ff7', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 2, 'created': '2021-09-19 22:45:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/7b33f77adb74f8e3d96889c3668c0192617d1a66', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 3, 'created': '2021-09-20 21:04:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e92260169cd629e38615671f7a5126f6d1b61e7a', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 4, 'created': '2021-09-21 00:55:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/a8b8327e76c586662323c9a059474e338a89a44e', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 5, 'created': '2021-09-22 02:46:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/d9800db441a886f6c3057773d82d672fbe315387', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 6, 'created': '2021-09-22 22:46:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/680f6fa37b058b6647345ba3176ca8c384238d27', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 7, 'created': '2021-10-05 01:32:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/4ec1a43c3399c55b65b6f17534378b8ab69dd164', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 8, 'created': '2021-10-05 05:10:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/018884a315746ff1a9f6f1a8643c7c059b6beb7b', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 9, 'created': '2021-10-05 05:18:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/b5e22f93b059140d2d9c7771d6111484f6e11ff5', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}, {'number': 10, 'created': '2021-10-06 20:29:55.000000000', 'files': ['roles/modify-image/tasks/manual.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/1526ef8e529112b273d9aed5b97e140f84ccba2d', 'message': ""In modify-image don't convert qcow2<->raw\n\nWith qemu-nbd it is not necessary to mount the raw image. Leaving it\nas qcow2 will save around 45 seconds.\n\nChange-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047\n""}]",9,809487,1526ef8e529112b273d9aed5b97e140f84ccba2d,72,6,10,4571,,,0,"In modify-image don't convert qcow2<->raw

With qemu-nbd it is not necessary to mount the raw image. Leaving it
as qcow2 will save around 45 seconds.

Change-Id: I2f4e9c8d0b474b839bcff5b7cf9027f695eef047
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/87/809487/9 && git format-patch -1 --stdout FETCH_HEAD,['roles/modify-image/tasks/manual.yml'],1,dd0b6bd56cac44a56065a26d12c37bceed541ff7,bp/whole-disk-default, tripleo-mount-image -a {{ image_to_modify_qcow }} -m {{ mount_tempdir }} qemu-nbd --format raw --connect /dev/nbd0 {{ image_to_modify_qcow }}," image_to_modify_raw: ""{{ image_to_modify_abs_path.stdout|replace('qcow2', 'raw') }}"" - name: Convert image shell: > set -eo pipefail; qemu-img convert -f qcow2 -O raw {{ image_to_modify_qcow }} {{ image_to_modify_raw }}; rm -rf ""{{ image_to_modify_qcow }}""; tripleo-mount-image -a {{ image_to_modify_raw }} -m {{ mount_tempdir }} qemu-nbd --format raw --connect /dev/nbd0 {{ image_to_modify_raw }} qemu-img convert -c -f raw -O qcow2 {{ image_to_modify_raw }} {{ image_to_modify_qcow }} rm -rf ""{{ image_to_modify_raw }}""",2,11
openstack%2Fos-brick~stable%2Fussuri~I60ee7421f7b792e8324286908a9fdd8fb53e433e,openstack/os-brick,stable/ussuri,I60ee7421f7b792e8324286908a9fdd8fb53e433e,multipath/iscsi: iSCSI connections are not reinitiated after reboot,MERGED,2021-10-28 04:01:33.000000000,2021-10-28 17:45:48.000000000,2021-10-28 17:43:40.000000000,"[{'_account_id': 5314}, {'_account_id': 9535}, {'_account_id': 18236}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 04:01:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-brick/commit/4e424500dede23621e108f59d008ffb35e6849c4', 'message': 'multipath/iscsi: iSCSI connections are not reinitiated after reboot\n\nAfter compute host reboot, in an iSCSI/multipath environment, some\nof the connections to the iSCSI portal are not reinitiated and missing\niSCSI devices are observed. This patchset introduced retries for this\nparticular scenario.\n\nCloses-Bug: #1944474\nChange-Id: I60ee7421f7b792e8324286908a9fdd8fb53e433e\n(cherry picked from commit 8832c5389964973084cd0f80a2d8f7f24255ea3f)\n(cherry picked from commit 4d116483aff6efa425cd1b7b00e87f6385a9a725)\n(cherry picked from commit 779d1e48c79a7e47dd49ef8acaeeb61e99c253f0)\n(cherry picked from commit 7c7650b4de9fa319c8c42423502ccd55a510a417)\n'}, {'number': 2, 'created': '2021-10-28 04:15:21.000000000', 'files': ['os_brick/tests/initiator/connectors/test_iscsi.py', 'os_brick/initiator/connectors/iscsi.py', 'releasenotes/notes/bug-1944474-55c5ebb3a37801aa.yaml'], 'web_link': 'https://opendev.org/openstack/os-brick/commit/d0eea8a6eb5a620d405dc819eb2285a9e242f4a3', 'message': 'multipath/iscsi: iSCSI connections are not reinitiated after reboot\n\nAfter compute host reboot, in an iSCSI/multipath environment, some\nof the connections to the iSCSI portal are not reinitiated and missing\niSCSI devices are observed. This patchset introduced retries for this\nparticular scenario.\n\nCloses-Bug: #1944474\nChange-Id: I60ee7421f7b792e8324286908a9fdd8fb53e433e\n(cherry picked from commit 8832c5389964973084cd0f80a2d8f7f24255ea3f)\n(cherry picked from commit 4d116483aff6efa425cd1b7b00e87f6385a9a725)\n(cherry picked from commit 779d1e48c79a7e47dd49ef8acaeeb61e99c253f0)\n(cherry picked from commit 7c7650b4de9fa319c8c42423502ccd55a510a417)\n'}]",1,815648,d0eea8a6eb5a620d405dc819eb2285a9e242f4a3,14,4,2,13425,,,0,"multipath/iscsi: iSCSI connections are not reinitiated after reboot

After compute host reboot, in an iSCSI/multipath environment, some
of the connections to the iSCSI portal are not reinitiated and missing
iSCSI devices are observed. This patchset introduced retries for this
particular scenario.

Closes-Bug: #1944474
Change-Id: I60ee7421f7b792e8324286908a9fdd8fb53e433e
(cherry picked from commit 8832c5389964973084cd0f80a2d8f7f24255ea3f)
(cherry picked from commit 4d116483aff6efa425cd1b7b00e87f6385a9a725)
(cherry picked from commit 779d1e48c79a7e47dd49ef8acaeeb61e99c253f0)
(cherry picked from commit 7c7650b4de9fa319c8c42423502ccd55a510a417)
",git fetch https://review.opendev.org/openstack/os-brick refs/changes/48/815648/2 && git format-patch -1 --stdout FETCH_HEAD,"['os_brick/tests/initiator/connectors/test_iscsi.py', 'os_brick/initiator/connectors/iscsi.py', 'releasenotes/notes/bug-1944474-55c5ebb3a37801aa.yaml']",3,4e424500dede23621e108f59d008ffb35e6849c4,bug/1944474-stable/xena-stable/wallaby-stable/victoria-stable/ussuri,--- fixes: - | `Bug #1944474 <https://bugs.launchpad.net/os-brick/+bug/1944474>`_: Fixed missing retries to reinitiate iSCSI connections with high concurrency of connections and with multipath enabled. ,,59,3
openstack%2Fkayobe~stable%2Fxena~I758aff1d3ef714f1c8ef82d29dd2217734a9aae6,openstack/kayobe,stable/xena,I758aff1d3ef714f1c8ef82d29dd2217734a9aae6,infra VMs: use wait_for rather than wait_for_connection,MERGED,2021-10-28 13:20:38.000000000,2021-10-28 17:42:01.000000000,2021-10-28 17:37:56.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 13:20:38.000000000', 'files': ['ansible/infra-vm-provision.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/3a071757b2c2f3587903ebddfe5a52a8e8faf7a6', 'message': 'infra VMs: use wait_for rather than wait_for_connection\n\nwait_for_connection requires a python interpreter to be available, which\nmay not be the case in some images (CentOS Stream cloud images, cirros\netc.). Instead, use wait_for to wait for the SSH port to open, then rely\non the bootstrapping process to install an interpreter. This is the same\nmethod used for the seed VM.\n\nThis change also syncs the SSH wait timeout for infra VMs which the one\nused for seed VM provisioning (360 seconds).\n\nChange-Id: I758aff1d3ef714f1c8ef82d29dd2217734a9aae6\n(cherry picked from commit b87d89aae39cceedd4f70b447cddf5ada615bd36)\n'}]",0,815841,3a071757b2c2f3587903ebddfe5a52a8e8faf7a6,8,3,1,15197,,,0,"infra VMs: use wait_for rather than wait_for_connection

wait_for_connection requires a python interpreter to be available, which
may not be the case in some images (CentOS Stream cloud images, cirros
etc.). Instead, use wait_for to wait for the SSH port to open, then rely
on the bootstrapping process to install an interpreter. This is the same
method used for the seed VM.

This change also syncs the SSH wait timeout for infra VMs which the one
used for seed VM provisioning (360 seconds).

Change-Id: I758aff1d3ef714f1c8ef82d29dd2217734a9aae6
(cherry picked from commit b87d89aae39cceedd4f70b447cddf5ada615bd36)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/41/815841/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/infra-vm-provision.yml'],1,3a071757b2c2f3587903ebddfe5a52a8e8faf7a6,," - name: Wait for SSH access to the infra VM wait_for: host: ""{{ hostvars[inventory_hostname].ansible_host }}"" port: 22 state: started timeout: 360 delegate_to: localhost"," - name: Wait for a connection to VM with bootstrap user wait_for_connection: timeout: 600 vars: # NOTE(wszumski): ansible_host_key_checking variable doesn't seem to # work, But it would be nice not to fail if the host_key changes. # We check the hostkey during host configure. # https://github.com/ansible/ansible/blob/1c34492413dec09711c430745034db0c108227a9/lib/ansible/plugins/connection/ssh.py#L49 # https://github.com/ansible/ansible/issues/49254 ansible_ssh_extra_args: '{{ infra_vm_wait_connection_ssh_extra_args }}' ansible_user: ""{{ bootstrap_user }}"" ansible_python_interpreter: /usr/bin/python3",7,12
openstack%2Fkayobe~stable%2Fxena~Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335,openstack/kayobe,stable/xena,Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335,Fix --check argument for overcloud host configure,MERGED,2021-10-28 13:20:07.000000000,2021-10-28 17:40:41.000000000,2021-10-28 17:37:28.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 13:20:07.000000000', 'files': ['ansible/roles/disable-glean/tasks/main.yml', 'releasenotes/notes/fix-check-mode-c0f8e1fcb09f730b.yaml', 'ansible/kayobe-ansible-user.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b207c1a3421e6e449250d59094485d21adc08488', 'message': ""Fix --check argument for overcloud host configure\n\nWhen running 'kayobe overcloud host configure', there are some tasks\nthat we need to run even in check mode, to ensure that subsequent tasks\ncan execute. These tasks should not change the target systems.\n\nChange-Id: Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335\nStory: 2004798\nTask: 28951\n(cherry picked from commit 533e9ca912e882578b4a413ab96399f80b4da0fb)\n""}]",0,815840,b207c1a3421e6e449250d59094485d21adc08488,8,3,1,15197,,,0,"Fix --check argument for overcloud host configure

When running 'kayobe overcloud host configure', there are some tasks
that we need to run even in check mode, to ensure that subsequent tasks
can execute. These tasks should not change the target systems.

Change-Id: Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335
Story: 2004798
Task: 28951
(cherry picked from commit 533e9ca912e882578b4a413ab96399f80b4da0fb)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/40/815840/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/disable-glean/tasks/main.yml', 'releasenotes/notes/fix-check-mode-c0f8e1fcb09f730b.yaml', 'ansible/kayobe-ansible-user.yml']",3,b207c1a3421e6e449250d59094485d21adc08488,, check_mode: no,,8,0
openstack%2Ftripleo-docs~master~I7abf5efb5b41613ac6da0f489c53c06f22100a97,openstack/tripleo-docs,master,I7abf5efb5b41613ac6da0f489c53c06f22100a97,Update release docs,MERGED,2021-10-20 15:58:06.000000000,2021-10-28 17:29:36.000000000,2021-10-28 17:26:56.000000000,"[{'_account_id': 7144}, {'_account_id': 8449}, {'_account_id': 13861}, {'_account_id': 16312}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-20 15:58:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/9bd6771a310d7591e3b00f961d1933ea6acf536a', 'message': 'Update release docs\n\nUpdate the docs to include our switch to independent and include details\non what is necessary to create a release for RDO intermediate versions.\n\nChange-Id: I7abf5efb5b41613ac6da0f489c53c06f22100a97\n'}, {'number': 2, 'created': '2021-10-20 16:08:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/2dd21fcea099bcc7e18573e4a351b5886ae3ff52', 'message': 'Update release docs\n\nUpdate the docs to include our switch to independent and include details\non what is necessary to create a release for RDO intermediate versions.\n\nChange-Id: I7abf5efb5b41613ac6da0f489c53c06f22100a97\n'}, {'number': 3, 'created': '2021-10-20 16:08:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/6c5ea964eddbeead5657b062ccf5e46a0f2c881f', 'message': 'Update release docs\n\nUpdate the docs to include our switch to independent and include details\non what is necessary to create a release for RDO intermediate versions.\n\nChange-Id: I7abf5efb5b41613ac6da0f489c53c06f22100a97\n'}, {'number': 4, 'created': '2021-10-20 16:21:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/7e1b91aaff3774f9b0827fcd06a334337778401f', 'message': 'Update release docs\n\nUpdate the docs to include our switch to independent and include details\non what is necessary to create a release for RDO intermediate versions.\n\nChange-Id: I7abf5efb5b41613ac6da0f489c53c06f22100a97\n'}, {'number': 5, 'created': '2021-10-21 16:27:06.000000000', 'files': ['doc/source/developer/release.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/c3fbdc45eb13d9107083cf7419e3cb720c57268f', 'message': 'Update release docs\n\nUpdate the docs to include our switch to independent and include details\non what is necessary to create a release for RDO intermediate versions.\n\nChange-Id: I7abf5efb5b41613ac6da0f489c53c06f22100a97\n'}]",6,814802,c3fbdc45eb13d9107083cf7419e3cb720c57268f,19,5,5,14985,,,0,"Update release docs

Update the docs to include our switch to independent and include details
on what is necessary to create a release for RDO intermediate versions.

Change-Id: I7abf5efb5b41613ac6da0f489c53c06f22100a97
",git fetch https://review.opendev.org/openstack/tripleo-docs refs/changes/02/814802/5 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/developer/release.rst'],1,9bd6771a310d7591e3b00f961d1933ea6acf536a,rdo-release,"Most of TripleO projects follows the independent_ release model. We will be creating stable branches based on our long term supported releases going forward. The details can be found on the releases repository_. .. _repository: https://opendev.org/openstack/releases/src/branch/master/deliverables/_independent .. _independent: https://releases.openstack.org/reference/release_models.html#independentOnce this is done, you can submit a patch in openstack/releases and per project to modify the YAML. The openstack/releases project provides tooling to update these files. See the new-release_ comand. You can also update the yaml files manually as necessary. release-type: python-pypi repository-settings: openstack/tripleo-heat-templates: {} releases: - version: 15.0.0 projects: - repo: openstack/tripleo-heat-templates hash: 1ffbc6cf70c8f79cb3a1e251c9b1e366843ab97c - version: 15.1.0 projects: - repo: openstack/tripleo-heat-templates hash: ec8955c26a15f3c9e659b7ae08223c544820af03 - version: 16.0.0 projects: - repo: openstack/tripleo-heat-template hash: <MY NEW HASH> .. _new-release: https://releases.openstack.org/reference/using.html#using-new-release-command release-type: python-pypi repository-settings: openstack/tripleo-heat-templates: {} branches: - name: stable/xena location: 16.0.0 releases: - version: 15.0.0 hash: 1ffbc6cf70c8f79cb3a1e251c9b1e366843ab97c - version: 15.1.0 hash: ec8955c26a15f3c9e659b7ae08223c544820af03 - version: 16.0.0 projects: - repo: openstack/tripleo-heat-template hash: <MY NEW HASH> Releases for RDO ================ Due to TripleO's switch_ to the independent model, the TripleO project needs to cut tags at the end of cycles that will not be supported in the long term. These tags are used by the RDO release process to include some TripleO rpms are published. The process to create the intermediate release would be as follows. .. _switch: https://specs.openstack.org/openstack/tripleo-specs/specs/xena/tripleo-independent-release.html #. Update required metadata --------------------------- Some projects like puppet-tripleo and puppet-pacemaker require the metadata be updated in the repository prior to cutting a tag. If the metadata is not updated, the tagging patch to openstack/releases will fail CI. For puppet-tripleo_ and puppet-pacemaker_, update the version information to represent the next tag version (e.g. 16.1.0). .. _puppet-tripleo: https://review.opendev.org/c/openstack/puppet-tripleo/+/813847 .. _puppet-pacemaker: https://review.opendev.org/c/openstack/puppet-pacemaker/+/813854 #. Get latest promoted content ------------------------------ After the previous version tags are available in the latest promoted content, fetch the version information from RDO which contains the git repository hashes. An example where this could be found is:: https://trunk.rdoproject.org/centos8-master/current-tripleo/versions.csv. .. Note:: You will needed to adjust the centos8 to centos9 as necessary. #. Prepare version tags ----------------------- Based on the versions.csv data, an openstack/releases patch needs to be created to tag the release with the provided hashes. You can determine which TripleO projects are needed by finding the projects taged with ""team: tripleo_"". `An example review`_. Please be aware of changes between versions and create the appropriate version number as necessary (e.g. major, feature, or bugfix). .. _tripleo: https://opendev.org/openstack/releases/src/commit/fcdb1f5b556e99f25f248d38f16ad812489c9be0/deliverables/_independent/tripleo-heat-templates.yaml .. _An example review: https://review.opendev.org/c/openstack/releases/+/813852 .. Note:: If this is a long term release, this patch should include a stable branch. #. Notify RDO team of tags -------------------------- Once the release has been created, make sure the RDO team not has been notified of the new tags. They will update the RDO release items to ensure that the given openstack release will contained the pinned content.","Most of TripleO projects follows the cycle-trailing_ release model. The details can be found on the releases repository_. .. _repository: https://opendev.org/openstack/releases/src/branch/master/deliverables .. _cycle-trailing: https://releases.openstack.org/reference/release_models.html#cycle-trailing The first step is to update ReNo_ configuration file for some projects: tripleo-image-elements, tripleo-puppet-elements, tripleo-heat-templates and puppet-tripleo. .. _ReNo: https://docs.openstack.org/reno Edit releasenotes/source/conf.py file and change this line:: # The full version, including alpha/beta/rc tags. release = 'X.Y.Z' # The short X.Y.Z version. version = 'X.Y.Z' .. Note:: TripleO UI requires some specific changes to be released too, see https://review.opendev.org/#/c/460664/ for an example. Once this is done, you can submit a patch in openstack/releases and per project create or modify the YAML. release-model: cycle-trailing releases: - projects: - hash: e6d1aaac5745f2b32d30f3e41ba8c0a50f5b51d7 repo: openstack/tripleo-heat-templates version: 7.0.0.0b1 send-announcements-to: openstack-announce@lists.openstack.org release-notes: https://docs.openstack.org/releasenotes/tripleo-heat-templates/ocata.html release-model: cycle-trailing send-announcements-to: openstack-announce@lists.openstack.org branches: - name: stable/ocata location: 6.0.0.0rc1 releases: - version: 6.0.0.0b1 hash: 521779edd4dbeb65e0c62c48567dd478b3fab5a5 - version: 6.0.0.0b2 hash: 1e88f875239b30de24552450b623e6892941fa1e - version: 6.0.0.0rc1 projects: - repo: openstack/tripleo-heat-templates hash: 5340f64c03902b7a76212a579bcc895d56008df3 - version: 6.0.0.0rc2 projects: - repo: openstack/tripleo-heat-templates hash: 5f278ebc5cd3426d58c8a05c0f58309681efa055 - version: 6.0.0 diff-start: 5.0.0.0rc2 projects: - repo: openstack/tripleo-heat-templates hash: 5f278ebc5cd3426d58c8a05c0f58309681efa055 ",99,52
openstack%2Ftripleo-common~stable%2Fussuri~Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18,openstack/tripleo-common,stable/ussuri,Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18,Lower ansible poll interval time,ABANDONED,2021-10-27 20:39:24.000000000,2021-10-28 17:21:03.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 20:39:24.000000000', 'files': ['tripleo_common/actions/ansible.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/b18eb435f4f993fe38f4efb857315faec8e5e295', 'message': ""Lower ansible poll interval time\n\nCurrently we set poll interval in ansible to 0.05 which means it'll wait\n50ms.  The default is 0.001 which at scale is too cpu intensive.  That\nbeing said, waiting 50ms for each task across all hosts increases\noverall execution time. Let's lower it to 0.01 as a middle ground\nbetween the current 0.05 and the 0.001 default.\n\nChange-Id: Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18\n(cherry picked from commit d449a9ea07507728f5a1e1b17d5bbbb4f375ff86)\n""}]",0,815644,b18eb435f4f993fe38f4efb857315faec8e5e295,4,2,1,14985,,,0,"Lower ansible poll interval time

Currently we set poll interval in ansible to 0.05 which means it'll wait
50ms.  The default is 0.001 which at scale is too cpu intensive.  That
being said, waiting 50ms for each task across all hosts increases
overall execution time. Let's lower it to 0.01 as a middle ground
between the current 0.05 and the 0.001 default.

Change-Id: Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18
(cherry picked from commit d449a9ea07507728f5a1e1b17d5bbbb4f375ff86)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/44/815644/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/actions/ansible.py'],1,b18eb435f4f993fe38f4efb857315faec8e5e295,improve-responsiveness-stable/ussuri," config.set('defaults', 'internal_poll_interval', '0.01')"," config.set('defaults', 'internal_poll_interval', '0.05')",1,1
openstack%2Ftripleo-common~stable%2Ftrain~Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18,openstack/tripleo-common,stable/train,Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18,Lower ansible poll interval time,ABANDONED,2021-10-27 20:39:36.000000000,2021-10-28 17:20:52.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 20:39:36.000000000', 'files': ['tripleo_common/actions/ansible.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/18ad6b20e60d87da49b2994f1dd961aa1916eb2a', 'message': ""Lower ansible poll interval time\n\nCurrently we set poll interval in ansible to 0.05 which means it'll wait\n50ms.  The default is 0.001 which at scale is too cpu intensive.  That\nbeing said, waiting 50ms for each task across all hosts increases\noverall execution time. Let's lower it to 0.01 as a middle ground\nbetween the current 0.05 and the 0.001 default.\n\nChange-Id: Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18\n(cherry picked from commit d449a9ea07507728f5a1e1b17d5bbbb4f375ff86)\n""}]",0,815645,18ad6b20e60d87da49b2994f1dd961aa1916eb2a,4,2,1,14985,,,0,"Lower ansible poll interval time

Currently we set poll interval in ansible to 0.05 which means it'll wait
50ms.  The default is 0.001 which at scale is too cpu intensive.  That
being said, waiting 50ms for each task across all hosts increases
overall execution time. Let's lower it to 0.01 as a middle ground
between the current 0.05 and the 0.001 default.

Change-Id: Ie4268fcc8c1a8031eaf7c33e9c137c198017ee18
(cherry picked from commit d449a9ea07507728f5a1e1b17d5bbbb4f375ff86)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/45/815645/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/actions/ansible.py'],1,18ad6b20e60d87da49b2994f1dd961aa1916eb2a,improve-responsiveness-stable/train," config.set('defaults', 'internal_poll_interval', '0.01')"," config.set('defaults', 'internal_poll_interval', '0.05')",1,1
openstack%2Ftripleo-ansible~master~Icfbc9cf80fba385eb58e93a0d078c2adcb5a6802,openstack/tripleo-ansible,master,Icfbc9cf80fba385eb58e93a0d078c2adcb5a6802,"Revert ""Wrap stopping podman -t with systemd timeouts""",ABANDONED,2021-10-18 18:26:38.000000000,2021-10-28 17:19:07.000000000,,"[{'_account_id': 6926}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 17823}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 26343}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-18 18:26:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/d65e7772d5d4211379255c1b128c47ae43c8e947', 'message': 'Revert ""Wrap stopping podman -t with systemd timeouts""\n\nThis reverts commit badd5a3c10f0af9e1c69a9b88064e743a36d4f53.\n\nReason for revert: possible impact \nhttps://bugs.launchpad.net/tripleo/+bug/1947548?\n\nChange-Id: Icfbc9cf80fba385eb58e93a0d078c2adcb5a6802\n'}, {'number': 2, 'created': '2021-10-18 18:29:19.000000000', 'files': ['tripleo_ansible/roles/tripleo_container_manage/templates/systemd-service.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/46489f32adc25b6d2656ae3af76128e531d1f312', 'message': 'Revert ""Wrap stopping podman -t with systemd timeouts""\n\nThis reverts commit badd5a3c10f0af9e1c69a9b88064e743a36d4f53.\n\nReason for revert: possible impact \nhttps://bugs.launchpad.net/tripleo/+bug/1947548?\n\nChange-Id: Icfbc9cf80fba385eb58e93a0d078c2adcb5a6802\n'}]",2,814457,46489f32adc25b6d2656ae3af76128e531d1f312,9,15,2,9976,,,0,"Revert ""Wrap stopping podman -t with systemd timeouts""

This reverts commit badd5a3c10f0af9e1c69a9b88064e743a36d4f53.

Reason for revert: possible impact 
https://bugs.launchpad.net/tripleo/+bug/1947548?

Change-Id: Icfbc9cf80fba385eb58e93a0d078c2adcb5a6802
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/57/814457/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_container_manage/templates/systemd-service.j2'],1,d65e7772d5d4211379255c1b128c47ae43c8e947,1945791,"ExecStop=/usr/bin/podman stop -t {{ lookup('dict', container_data_unit).value.stop_grace_period | default(10) | int }} {{ lookup('dict', container_data_unit).key }} ExecStopPost=/usr/bin/podman stop -t {{ lookup('dict', container_data_unit).value.stop_grace_period | default(10) | int }} {{ lookup('dict', container_data_unit).key }}KillMode=none","ExecStop=/usr/bin/podman stop -t {{ lookup('dict', container_data_unit).value.stop_grace_period | default(42) | int }} {{ lookup('dict', container_data_unit).key }} ExecStopPost=/usr/bin/podman stop -t {{ lookup('dict', container_data_unit).value.stop_grace_period | default(42) | int }} {{ lookup('dict', container_data_unit).key }}TimeoutStopSec={{ 2*lookup('dict', container_data_unit).value.stop_grace_period | default(42) | int }}",3,3
openstack%2Fkolla-ansible~master~I252ffaf73dd2a649387ddacc73286b49f36dfdf2,openstack/kolla-ansible,master,I252ffaf73dd2a649387ddacc73286b49f36dfdf2,Fix broken deploy of placement service,MERGED,2021-10-26 16:18:48.000000000,2021-10-28 16:47:39.000000000,2021-10-28 11:12:47.000000000,"[{'_account_id': 14200}, {'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 16198}, {'_account_id': 22348}, {'_account_id': 30491}, {'_account_id': 30568}, {'_account_id': 33855}]","[{'number': 1, 'created': '2021-10-26 16:18:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/4b8069b7c40ea8c44ce9e735a9a1a3471ebd6095', 'message': 'Placement/tasks/config: fix typo\nCloses-Bug: #1948835\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\n'}, {'number': 2, 'created': '2021-10-26 16:38:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/8491976d02d49c33452ac7d6453054babe9fbb7d', 'message': 'Placement/tasks/config: fix typo\n\nCloses-Bug: #1948835\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\n'}, {'number': 3, 'created': '2021-10-26 21:45:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/05a0e1e9191d75d4af3f6ce3de8635a45f3fa309', 'message': ""Fix broken deploy of placement service\n\nCloses-Bug: #1948835\n\nCorrect typo in role's playbook in order to be able to deploy the service\nwith customized policy file.\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\n""}, {'number': 4, 'created': '2021-10-26 21:49:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/9c370986a0609a757c5cd8a121d2473206738b29', 'message': ""Fix broken deploy of placement service\n\nCloses-Bug: #1948835\n\nCorrect typo in role's playbook in order to be able to deploy the service with customized policy file.\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\n""}, {'number': 5, 'created': '2021-10-27 13:08:04.000000000', 'files': ['releasenotes/notes/bug-1948835-51b15ddbef04d307.yaml', 'ansible/roles/placement/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/0202def4a699dc5e15890988fe96d37d9d80db19', 'message': ""Fix broken deploy of placement service\n\nCorrect typo in role's playbook in order to be able to deploy\nthe service with customized policy file.\n\nChange-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2\nCloses-Bug: #1948835\n""}]",12,815524,0202def4a699dc5e15890988fe96d37d9d80db19,35,8,5,23871,,,0,"Fix broken deploy of placement service

Correct typo in role's playbook in order to be able to deploy
the service with customized policy file.

Change-Id: I252ffaf73dd2a649387ddacc73286b49f36dfdf2
Closes-Bug: #1948835
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/24/815524/4 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/placement/tasks/config.yml'],1,4b8069b7c40ea8c44ce9e735a9a1a3471ebd6095,," dest: ""{{ node_config_directory }}/{{ item.key }}/{{ placement_policy_file }}"""," dest: ""{{ placement_config_directory }}/{{ item.key }}/{{ placement_policy_file }}""",1,1
openstack%2Fironic~master~I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae,openstack/ironic,master,I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae,Fix various issues in the anaconda deploy interface,MERGED,2021-10-15 00:30:43.000000000,2021-10-28 16:38:46.000000000,2021-10-28 16:35:55.000000000,"[{'_account_id': 6618}, {'_account_id': 10239}, {'_account_id': 11076}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 32291}]","[{'number': 1, 'created': '2021-10-15 00:30:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/562fe16e89d530ff5c64f330130568cd2fddb1d6', 'message': ""Fix format of kickstart options\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n""}, {'number': 2, 'created': '2021-10-21 17:50:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/626e622a5910f49539ca0c888b00320402232b7f', 'message': ""Fix format of kickstart options\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n""}, {'number': 3, 'created': '2021-10-26 08:22:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8fbeb3f87aa561dac40c4a25f8721d89fb487664', 'message': ""Fix various issues in the anaconda deploy interface\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nFix a bug where the deploy() method of anaconda deploy\ninterface where it did not return states.DEPLOYWAIT instead\nit returned 'None' which caused the instance to go straight to\n'active' instead of 'wait call-back'.\n\nFix issues in the default kickstart template where heartbeat was\nmissing 'callback_url' parameter and the HTTP method should be\n'POST' not 'PUT'.\n\nAnaconda deploy interface could not deploy tarballs as\nthe disk image sent to the anaconda interface via liveimg --url\nkickstart command does not include any file extension. When\nno file extension is present the kickstart command liveimg --url\nassumes the disk is a mountable partiton image. We fix this\nproblem by enabling the user to specify file extensions using\na glance image property named 'disk_file_extension' on the OS\nimage.\n\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n""}, {'number': 4, 'created': '2021-10-26 23:49:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/0c5fd154320c33a698113821eb7ad3a85af9968e', 'message': ""Fix various issues in the anaconda deploy interface\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nFix a bug where the deploy() method of anaconda deploy\ninterface where it did not return states.DEPLOYWAIT instead\nit returned 'None' which caused the instance to go straight to\n'active' instead of 'wait call-back'.\n\nFix issues in the default kickstart template where heartbeat was\nmissing 'callback_url' parameter and the HTTP method should be\n'POST' not 'PUT'.\n\nFix issues with automated cleaning when anaconda deploy interface\nis used.\n\nAnaconda deploy interface could not deploy tarballs as\nthe disk image sent to the anaconda interface via liveimg --url\nkickstart command does not include any file extension. When\nno file extension is present the kickstart command liveimg --url\nassumes the disk is a mountable partiton image. We fix this\nproblem by enabling the user to specify file extensions using\na glance image property named 'disk_file_extension' on the OS\nimage.\n\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n""}, {'number': 5, 'created': '2021-10-27 17:42:40.000000000', 'files': ['doc/source/admin/anaconda-deploy-interface.rst', 'ironic/drivers/modules/deploy_utils.py', 'ironic/drivers/modules/pxe.py', 'ironic/tests/unit/drivers/modules/test_pxe.py', 'ironic/drivers/modules/ks.cfg.template', 'ironic/common/pxe_utils.py', 'releasenotes/notes/fix-anaconda-deploy-interface-bfa2cfca22b04680.yaml', 'ironic/tests/unit/drivers/modules/test_deploy_utils.py', 'ironic/tests/unit/common/test_pxe_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/df99dea001772c1c6691150060d3ebbf496e5d25', 'message': ""Fix various issues in the anaconda deploy interface\n\nThe kickstart template expects a dictionary with 'ks_options'\nas the key. Instead build_kickstart_config_options function\nreturns a dict with keys 'liveimg_url', 'agent_token' and\n'heartbeat_url'.\n\nThis change fixes this problem by returning a dictionary of\ndict with 'ks_options' as key and the dictionary with\nkeys 'liveimg_url', 'agent_token' and heartbeat_url' as\nvalue.\n\nFix a bug where the deploy() method of anaconda deploy\ninterface where it did not return states.DEPLOYWAIT instead\nit returned 'None' which caused the instance to go straight to\n'active' instead of 'wait call-back'.\n\nFix issues in the default kickstart template where heartbeat was\nmissing 'callback_url' parameter and the HTTP method should be\n'POST' not 'PUT'.\n\nFix issues with automated cleaning when anaconda deploy interface\nis used.\n\nAnaconda deploy interface could not deploy tarballs as\nthe disk image sent to the anaconda interface via liveimg --url\nkickstart command does not include any file extension. When\nno file extension is present the kickstart command liveimg --url\nassumes the disk is a mountable partiton image. We fix this\nproblem by enabling the user to specify file extensions using\na glance image property named 'disk_file_extension' on the OS\nimage.\n\nCo-Authored-By: Ruby Loo <opensrloo@gmail.com>\nChange-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae\n""}]",47,814087,df99dea001772c1c6691150060d3ebbf496e5d25,75,6,5,12640,,,0,"Fix various issues in the anaconda deploy interface

The kickstart template expects a dictionary with 'ks_options'
as the key. Instead build_kickstart_config_options function
returns a dict with keys 'liveimg_url', 'agent_token' and
'heartbeat_url'.

This change fixes this problem by returning a dictionary of
dict with 'ks_options' as key and the dictionary with
keys 'liveimg_url', 'agent_token' and heartbeat_url' as
value.

Fix a bug where the deploy() method of anaconda deploy
interface where it did not return states.DEPLOYWAIT instead
it returned 'None' which caused the instance to go straight to
'active' instead of 'wait call-back'.

Fix issues in the default kickstart template where heartbeat was
missing 'callback_url' parameter and the HTTP method should be
'POST' not 'PUT'.

Fix issues with automated cleaning when anaconda deploy interface
is used.

Anaconda deploy interface could not deploy tarballs as
the disk image sent to the anaconda interface via liveimg --url
kickstart command does not include any file extension. When
no file extension is present the kickstart command liveimg --url
assumes the disk is a mountable partiton image. We fix this
problem by enabling the user to specify file extensions using
a glance image property named 'disk_file_extension' on the OS
image.

Co-Authored-By: Ruby Loo <opensrloo@gmail.com>
Change-Id: I556f8c9efbc5ab0941513c3ecaa2aa3ca7f346ae
",git fetch https://review.opendev.org/openstack/ironic refs/changes/87/814087/4 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/common/pxe_utils.py', 'ironic/tests/unit/common/test_pxe_utils.py']",2,562fe16e89d530ff5c64f330130568cd2fddb1d6,anaconda-deploy-driver," params = pxe_utils.build_kickstart_config_options(task) self.assertTrue(params['ks_options'].pop('agent_token')) self.assertEqual(expected, params['ks_options']) params = {'liveimg_url': 'http://fake', 'agent_token': 'faketoken', 'heartbeat_url': 'http://fake_hb'} ks_options_mock.return_value = {'ks_options': params} render_mock.assert_called_with( image_info['ks_template'][1], {'ks_options': params} )"," ks_options = pxe_utils.build_kickstart_config_options(task) self.assertTrue(ks_options.pop('agent_token')) self.assertEqual(expected, ks_options) ks_options = {'liveimg_url': 'http://fake', 'agent_token': 'faketoken', 'heartbeat_url': 'http://fake_hb'} ks_options_mock.return_value = ks_options render_mock.assert_called_with(image_info['ks_template'][1], ks_options)",14,13
openstack%2Fbarbican~stable%2Fussuri~I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1,openstack/barbican,stable/ussuri,I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1,Fix POST /v1/secret/{secret-id}/metadata response,MERGED,2021-10-27 17:01:59.000000000,2021-10-28 16:04:09.000000000,2021-10-28 16:01:19.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-27 17:01:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican/commit/c7010f701d150451f3360cb758b89672801b3f38', 'message': 'Fix POST /v1/secret/{secret-id}/metadata response\n\nThis patch fixes the response to POST requests in the metadata API so it\nactually matches the documentation. [1]\n\nStory: 2009247\nTask: 43671\n\n[1]\nhttps://docs.openstack.org/barbican/latest/api/reference/secret_metadata.html#post-v1-secrets-uuid-metadata\n\nChange-Id: I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1\n(cherry picked from commit 49f3b2f0d1bc37f5a151d22c584f473e8fddae25)\n'}, {'number': 2, 'created': '2021-10-27 17:02:30.000000000', 'files': ['barbican/tests/api/controllers/test_secretmeta.py', 'releasenotes/notes/fix-story-2009247-18faf4f2b570dfc0.yaml', 'barbican/api/controllers/secretmeta.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/07ef50c18784f0585c0b3cad44bb590c44549f51', 'message': 'Fix POST /v1/secret/{secret-id}/metadata response\n\nThis patch fixes the response to POST requests in the metadata API so it\nactually matches the documentation. [1]\n\nStory: 2009247\nTask: 43672\n\n[1]\nhttps://docs.openstack.org/barbican/latest/api/reference/secret_metadata.html#post-v1-secrets-uuid-metadata\n\nChange-Id: I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1\n(cherry picked from commit 49f3b2f0d1bc37f5a151d22c584f473e8fddae25)\n'}]",0,815639,07ef50c18784f0585c0b3cad44bb590c44549f51,8,2,2,7973,,,0,"Fix POST /v1/secret/{secret-id}/metadata response

This patch fixes the response to POST requests in the metadata API so it
actually matches the documentation. [1]

Story: 2009247
Task: 43672

[1]
https://docs.openstack.org/barbican/latest/api/reference/secret_metadata.html#post-v1-secrets-uuid-metadata

Change-Id: I5505a8c56ed7274519cac8ad1e6d7adf5086c8d1
(cherry picked from commit 49f3b2f0d1bc37f5a151d22c584f473e8fddae25)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/39/815639/1 && git format-patch -1 --stdout FETCH_HEAD,"['barbican/tests/api/controllers/test_secretmeta.py', 'releasenotes/notes/fix-story-2009247-18faf4f2b570dfc0.yaml', 'barbican/api/controllers/secretmeta.py']",3,c7010f701d150451f3360cb758b89672801b3f38,story/2009247-stable/wallaby-stable/victoria-stable/ussuri," pecan.response.headers['Location'] = url + '/' + key return {'key': key, 'value': value}"," return {'metadata_ref': url + ""/%s {key: %s, value:%s}"" % (key, key, value)}",31,3
openstack%2Fgovernance~master~Iab8dace9ec45491e4159c60432317eb661b6a765,openstack/governance,master,Iab8dace9ec45491e4159c60432317eb661b6a765,Add openstack/ci-log-processing project into TaCT,MERGED,2021-10-25 14:34:18.000000000,2021-10-28 16:04:01.000000000,2021-10-28 15:57:28.000000000,"[{'_account_id': 4146}, {'_account_id': 5263}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2021-10-25 14:34:18.000000000', 'files': ['reference/sigs-repos.yaml'], 'web_link': 'https://opendev.org/openstack/governance/commit/90d80c5729f79084d8ff54094e2ce965cce908aa', 'message': 'Add openstack/ci-log-processing project into TaCT\n\nWith this commit, project openstack/ci-log-processing will be added\ninto Testing and Collaboration Tools SIG.\n\nChange-Id: Iab8dace9ec45491e4159c60432317eb661b6a765\n'}]",5,815318,90d80c5729f79084d8ff54094e2ce965cce908aa,14,5,1,20676,,,0,"Add openstack/ci-log-processing project into TaCT

With this commit, project openstack/ci-log-processing will be added
into Testing and Collaboration Tools SIG.

Change-Id: Iab8dace9ec45491e4159c60432317eb661b6a765
",git fetch https://review.opendev.org/openstack/governance refs/changes/18/815318/1 && git format-patch -1 --stdout FETCH_HEAD,['reference/sigs-repos.yaml'],1,90d80c5729f79084d8ff54094e2ce965cce908aa,project-update, - repo: openstack/ci-log-processing,,1,0
openstack%2Fneutron~master~I8a95e80ca74edc8f8f394cefc749c4065a8e0575,openstack/neutron,master,I8a95e80ca74edc8f8f394cefc749c4065a8e0575,Set RPC timeout in PluginReportStateAPI to report_interval,MERGED,2021-10-25 13:59:28.000000000,2021-10-28 16:03:11.000000000,2021-10-28 15:56:26.000000000,"[{'_account_id': 5948}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 16137}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-25 13:59:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/9d9e3e06dcda6a525e32ec50b15877516082120b', 'message': ""Add configurable RPC timeout to PluginReportStateAPI\n\nThis change introduces a change on the client side class\nPluginReportStateAPI by introducing a parameter that\ncan override the timeout for the RPC call that otherwise\ndefaults to rpc_response_timeout.\n\nIt's done by introducing a agent specific configuration\noption report_rpc_response_timeout that default to 0\nand thus it still defaults to rpc_response_timeout.\n\nSee more details on why this is need in the referenced\nbug #1948676\n\nChange-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575\nCloses-Bug: #1948676\n""}, {'number': 2, 'created': '2021-10-25 14:00:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/01ccec6a43e67200d68ec9be8d91b4e6ea537886', 'message': ""Add configurable RPC timeout to PluginReportStateAPI\n\nThis change introduces a change on the client side class\nPluginReportStateAPI by introducing a parameter that\ncan override the timeout for the RPC call that otherwise\ndefaults to rpc_response_timeout.\n\nIt's done by introducing a agent specific configuration\noption report_rpc_response_timeout that default to 0\nand thus it still defaults to rpc_response_timeout.\n\nSee more details on why this is need in the referenced\nbug #1948676\n\nChange-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575\nCloses-Bug: #1948676\n""}, {'number': 3, 'created': '2021-10-25 15:31:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0cc9c8adca69193f03532716a425505eb0d15b23', 'message': 'Set RPC timeout in PluginReportStateAPI to report_interval\n\nSee more details on why this is need in the referenced\nbug #1948676\n\nChange-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575\nCloses-Bug: #1948676\n'}, {'number': 4, 'created': '2021-10-25 19:12:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/81e3ad9ede36aa12f01ce25a3b33a9bcb5207b35', 'message': 'Set RPC timeout in PluginReportStateAPI to report_interval\n\nSee more details on why this is need in the referenced\nbug #1948676\n\nChange-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575\nCloses-Bug: #1948676\n'}, {'number': 5, 'created': '2021-10-26 07:14:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d28a5d0ace667961c49ce8f0641d76e47abcdfb5', 'message': 'Set RPC timeout in PluginReportStateAPI to report_interval\n\nSee more details on why this is need in the referenced\nbug #1948676\n\nChange-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575\nCloses-Bug: #1948676\n'}, {'number': 6, 'created': '2021-10-27 07:30:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/37b22a40a239c3a189fab0ab16d684288bc0a2ef', 'message': 'Set RPC timeout in PluginReportStateAPI to report_interval\n\nSee more details on why this is need in the referenced\nbug #1948676\n\nChange-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575\nCloses-Bug: #1948676\n'}, {'number': 7, 'created': '2021-10-27 11:28:57.000000000', 'files': ['neutron/tests/unit/agent/test_rpc.py', 'releasenotes/notes/set-report_state-rpc-timeout-to-report_interval-1265a70b0728e08c.yaml', 'neutron/agent/rpc.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/7d552848c272b4fbfdafdc552e54cefd25b6d46a', 'message': 'Set RPC timeout in PluginReportStateAPI to report_interval\n\nSee more details on why this is need in the referenced\nbug #1948676\n\nChange-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575\nCloses-Bug: #1948676\n'}]",27,815310,7d552848c272b4fbfdafdc552e54cefd25b6d46a,64,6,7,16137,,,0,"Set RPC timeout in PluginReportStateAPI to report_interval

See more details on why this is need in the referenced
bug #1948676

Change-Id: I8a95e80ca74edc8f8f394cefc749c4065a8e0575
Closes-Bug: #1948676
",git fetch https://review.opendev.org/openstack/neutron refs/changes/10/815310/2 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/agent/test_rpc.py', 'neutron/conf/agent/common.py', 'neutron/services/metering/agents/metering_agent.py', 'neutron/plugins/ml2/drivers/agent/_common_agent.py', 'neutron/agent/rpc.py', 'neutron/agent/dhcp/agent.py', 'neutron/agent/l3/agent.py', 'neutron/agent/metadata/agent.py', 'neutron/plugins/ml2/drivers/mech_sriov/agent/sriov_nic_agent.py', 'doc/source/admin/.config-bgp-dynamic-routing.rst.swp', 'releasenotes/notes/add-report-rpc-response-timeout-d051b95663ff9d2b.yaml']",12,9d9e3e06dcda6a525e32ec50b15877516082120b,,--- features: - | New configuration option ``report_rpc_response_timeout`` in the ``[agent]`` section for all agents can be used to configure the RPC timeout for state reporting calls to the server. If not configured it still uses the default from the ``rpc_response_timeout`` option. ,,44,10
openstack%2Fbarbican~stable%2Fussuri~I6879f566117db5ec0099ddad35ba649a3c674bd1,openstack/barbican,stable/ussuri,I6879f566117db5ec0099ddad35ba649a3c674bd1,Fix RBAC and ACL access for managing secret containers,MERGED,2021-10-28 13:39:29.000000000,2021-10-28 15:50:17.000000000,2021-10-28 15:47:48.000000000,"[{'_account_id': 7973}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 13:39:29.000000000', 'files': ['barbican/api/controllers/containers.py'], 'web_link': 'https://opendev.org/openstack/barbican/commit/c39bb67a746a5c35d138c04114c991c1e7fd7918', 'message': 'Fix RBAC and ACL access for managing secret containers\n\nThis patch adds the missing access control data to enforce access\ncontrol for adding/removing secrets in containers.\n\nChange-Id: I6879f566117db5ec0099ddad35ba649a3c674bd1\n(cherry picked from commit 922c68badaf5cc4b43862ab261119b68cdc68a37)\n(cherry picked from commit c8d3c580143282935de36e4a5a1708ee9242f7be)\n(cherry picked from commit ef281473652f2d8f2da1c9ebced34b2e723cff5b)\n'}]",0,815804,c39bb67a746a5c35d138c04114c991c1e7fd7918,7,2,1,7973,,,0,"Fix RBAC and ACL access for managing secret containers

This patch adds the missing access control data to enforce access
control for adding/removing secrets in containers.

Change-Id: I6879f566117db5ec0099ddad35ba649a3c674bd1
(cherry picked from commit 922c68badaf5cc4b43862ab261119b68cdc68a37)
(cherry picked from commit c8d3c580143282935de36e4a5a1708ee9242f7be)
(cherry picked from commit ef281473652f2d8f2da1c9ebced34b2e723cff5b)
",git fetch https://review.opendev.org/openstack/barbican refs/changes/04/815804/1 && git format-patch -1 --stdout FETCH_HEAD,['barbican/api/controllers/containers.py'],1,c39bb67a746a5c35d138c04114c991c1e7fd7918,secure-rbac-stable/victoria-stable/ussuri," def get_acl_tuple(self, req, **kwargs): acl = self.get_acl_dict_for_user(req, self.container.container_acls) acl['project_id'] = self.container.project.external_id acl['creator_id'] = self.container.creator_id return ('container', acl) ",,6,0
openstack%2Ftripleo-heat-templates~master~I7872f3ef926cdfd59ff19c9744052f3cc0157a1e,openstack/tripleo-heat-templates,master,I7872f3ef926cdfd59ff19c9744052f3cc0157a1e,Do not error out when a network is ipv6 only,MERGED,2021-10-26 16:16:16.000000000,2021-10-28 15:43:44.000000000,2021-10-28 15:43:44.000000000,"[{'_account_id': 8833}, {'_account_id': 11090}, {'_account_id': 22348}, {'_account_id': 22865}, {'_account_id': 23181}, {'_account_id': 24245}]","[{'number': 1, 'created': '2021-10-26 16:16:16.000000000', 'files': ['network/network.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/48ed6294c8b487d9503a2a865aae5cb00a4483d7', 'message': 'Do not error out when a network is ipv6 only\n\nCurrently with the following network definition in network-data:\n\n- name: InternalApi\n  name_lower: internal_api\n  mtu: 1500\n  vip: true\n  ipv6: true\n  subnets:\n    internal_api_subnet:\n      ipv6_subnet: fd00:fd00:fd00:1000::/64\n      ipv6_allocation_pools:\n        - start: fd00:fd00:fd00:1000::50\n            end: fd00:fd00:fd00:1000::90\n\nWe fail as follows:\n Error rendering template /home/stack/overcloud-deploy/overcloud/tripleo-heat-templates/network/internal_api.yaml : \'dict object\' has no attribute \'ip_subnet\'\n Traceback (most recent call last):\n   File ""/usr/share/openstack-tripleo-heat-templates/tools/process-templates.py"", line 97, in _j2_render_to_file\n     r_template = template.render(**j2_data)\n   File ""/usr/lib/python3.9/site-packages/jinja2/environment.py"", line 1304, in render\n     self.environment.handle_exception()\n   File ""/usr/lib/python3.9/site-packages/jinja2/environment.py"", line 925, in handle_exception\n     raise rewrite_traceback_stack(source=source)\n   File ""<template>"", line 1, in top-level template code\n   File ""/home/stack/overcloud-deploy/overcloud/tripleo-heat-templates/network/network.j2"", line 98, in top-level template code\n     {%-     if "":"" in network.subnets[subnet][\'ip_subnet\'] or network.ipv6|default(false) or ipv6_override %}\n\nWe need to put the """"""if "":"" in network.subnets[subnet][\'ip_subnet\']""""""\ncheck after the ipv6 test. After applying this patch I was able to\ncorrectly deploy the overcloud.\n\nCloses-Bug: #1948834\nChange-Id: I7872f3ef926cdfd59ff19c9744052f3cc0157a1e\n'}]",9,815523,48ed6294c8b487d9503a2a865aae5cb00a4483d7,13,6,1,20172,,,0,"Do not error out when a network is ipv6 only

Currently with the following network definition in network-data:

- name: InternalApi
  name_lower: internal_api
  mtu: 1500
  vip: true
  ipv6: true
  subnets:
    internal_api_subnet:
      ipv6_subnet: fd00:fd00:fd00:1000::/64
      ipv6_allocation_pools:
        - start: fd00:fd00:fd00:1000::50
            end: fd00:fd00:fd00:1000::90

We fail as follows:
 Error rendering template /home/stack/overcloud-deploy/overcloud/tripleo-heat-templates/network/internal_api.yaml : 'dict object' has no attribute 'ip_subnet'
 Traceback (most recent call last):
   File ""/usr/share/openstack-tripleo-heat-templates/tools/process-templates.py"", line 97, in _j2_render_to_file
     r_template = template.render(**j2_data)
   File ""/usr/lib/python3.9/site-packages/jinja2/environment.py"", line 1304, in render
     self.environment.handle_exception()
   File ""/usr/lib/python3.9/site-packages/jinja2/environment.py"", line 925, in handle_exception
     raise rewrite_traceback_stack(source=source)
   File ""<template>"", line 1, in top-level template code
   File ""/home/stack/overcloud-deploy/overcloud/tripleo-heat-templates/network/network.j2"", line 98, in top-level template code
     {%-     if "":"" in network.subnets[subnet]['ip_subnet'] or network.ipv6|default(false) or ipv6_override %}

We need to put the """"""if "":"" in network.subnets[subnet]['ip_subnet']""""""
check after the ipv6 test. After applying this patch I was able to
correctly deploy the overcloud.

Closes-Bug: #1948834
Change-Id: I7872f3ef926cdfd59ff19c9744052f3cc0157a1e
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/23/815523/1 && git format-patch -1 --stdout FETCH_HEAD,['network/network.j2'],1,48ed6294c8b487d9503a2a865aae5cb00a4483d7,fix-ipv6,"{%- if network.ipv6|default(false) or ipv6_override or "":"" in network.subnets[subnet]['ip_subnet'] %}{%- if network.ipv6|default(false) or ipv6_override or "":"" in network.subnets[subnet]['ip_subnet'] %}{%- if network.ipv6|default(false) or ipv6_override or "":"" in network.ip_subnet|default("""") %}{%- if network.ipv6|default(false) or ipv6_override or "":"" in network.ip_subnet|default("""") %}","{%- if "":"" in network.subnets[subnet]['ip_subnet'] or network.ipv6|default(false) or ipv6_override %}{%- if "":"" in network.subnets[subnet]['ip_subnet'] or network.ipv6|default(false) or ipv6_override %}{%- if "":"" in network.ip_subnet|default("""") or network.ipv6|default(false) or ipv6_override %}{%- if "":"" in network.ip_subnet|default("""") or network.ipv6|default(false) or ipv6_override %}",4,4
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I580cddf94a8da20081700c46526b21a8beb38210,openstack/tripleo-heat-templates,stable/train,I580cddf94a8da20081700c46526b21a8beb38210,[victoria/ussuri/train] Tune minion defaults,MERGED,2021-10-27 05:45:19.000000000,2021-10-28 15:43:41.000000000,2021-10-28 15:43:41.000000000,"[{'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 05:45:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6e9d1ce7384abb3a1e5e07ed77fedce9a184fc79', 'message': ""[victoria/ussuri/train] Tune minion defaults\n\nUndercloud Minion should be configured with the same default tuning as\nUndercloud[1] for heat & ironic.\n\nWe have dropped minion environment files for wallaby+, Updating minion\nsetting for t/u/v.\n\nAlso, add minion job in zuul layout, As this isn't covered by the\nzuul project templates. In tripleo-ansible repo also minion job is\nalso explicility mentioned[2]\n\n[1] https://github.com/openstack/tripleo-heat-templates/blob/stable/victoria/environments/undercloud.yaml#L96-L137\n[2] https://github.com/openstack/tripleo-ansible/blob/stable/victoria/zuul.d/layout.yaml#L25-L45\n\nRelated-Bug: #1947510\nChange-Id: I580cddf94a8da20081700c46526b21a8beb38210\n(cherry picked from commit 72e0b6b78c3ccadb6d460666afd74dd371d8fc7a)\n""}, {'number': 2, 'created': '2021-10-27 05:47:52.000000000', 'files': ['sample-env-generator/undercloud-minion.yaml', 'environments/undercloud/undercloud-minion.yaml', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f80701c67fd7eb032743a4b52d72a74f55a4c3c9', 'message': ""[victoria/ussuri/train] Tune minion defaults\n\nUndercloud Minion should be configured with the same default tuning as\nUndercloud[1] for heat & ironic.\n\nWe have dropped minion environment files for wallaby+, Updating minion\nsetting for t/u/v.\n\nAlso, add minion job in zuul layout, As this isn't covered by the\nzuul project templates. In tripleo-ansible repo also minion job is\nalso explicility mentioned[2]\n\n[1] https://github.com/openstack/tripleo-heat-templates/blob/stable/victoria/environments/undercloud.yaml#L96-L137\n[2] https://github.com/openstack/tripleo-ansible/blob/stable/victoria/zuul.d/layout.yaml#L25-L45\n\nRelated-Bug: #1947510\nChange-Id: I580cddf94a8da20081700c46526b21a8beb38210\n(cherry picked from commit 72e0b6b78c3ccadb6d460666afd74dd371d8fc7a)\n""}]",0,815447,f80701c67fd7eb032743a4b52d72a74f55a4c3c9,13,4,2,29775,,,0,"[victoria/ussuri/train] Tune minion defaults

Undercloud Minion should be configured with the same default tuning as
Undercloud[1] for heat & ironic.

We have dropped minion environment files for wallaby+, Updating minion
setting for t/u/v.

Also, add minion job in zuul layout, As this isn't covered by the
zuul project templates. In tripleo-ansible repo also minion job is
also explicility mentioned[2]

[1] https://github.com/openstack/tripleo-heat-templates/blob/stable/victoria/environments/undercloud.yaml#L96-L137
[2] https://github.com/openstack/tripleo-ansible/blob/stable/victoria/zuul.d/layout.yaml#L25-L45

Related-Bug: #1947510
Change-Id: I580cddf94a8da20081700c46526b21a8beb38210
(cherry picked from commit 72e0b6b78c3ccadb6d460666afd74dd371d8fc7a)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/47/815447/2 && git format-patch -1 --stdout FETCH_HEAD,"['sample-env-generator/undercloud-minion.yaml', 'environments/undercloud/undercloud-minion.yaml', 'zuul.d/layout.yaml']",3,6e9d1ce7384abb3a1e5e07ed77fedce9a184fc79,bug/1947510,"<<<<<<< HEAD (c919e4 Merge ""[FFWD][train-only] Ensure we get ovn_controller cert )======= - openstack-tox-tht - tripleo-ci-centos-8-containers-undercloud-minion: &undercloud_minion vars: consumer_job: true remove_tags: - build dependencies: - tripleo-ci-centos-8-content-provider files: - ^sample-env-generator/undercloud-minion.yaml - ^environments/undercloud/undercloud-minion.yaml - ^deployment/undercloud/minion-rabbitmq-puppet.yaml >>>>>>> CHANGE (06fa3e [victoria/ussuri/train] Tune minion defaults)<<<<<<< HEAD (c919e4 Merge ""[FFWD][train-only] Ensure we get ovn_controller cert ) ======= - tripleo-ci-centos-8-containers-undercloud-minion: *undercloud_minion - job: name: openstack-tox-tht parent: openstack-tox description: Runs syntax tht tests. Uses tox with the ``tht`` environment. success-url: ""reports.html"" failure-url: ""reports.html"" voting: true vars: tox_envlist: tht bindep_profile: test tht test_setup_skip: true >>>>>>> CHANGE (06fa3e [victoria/ussuri/train] Tune minion defaults)",,79,0
openstack%2Fpuppet-manila~stable%2Fwallaby~I99c3a2215e7bac1013be5df52ef270fa947cbccc,openstack/puppet-manila,stable/wallaby,I99c3a2215e7bac1013be5df52ef270fa947cbccc,Add ability to configure backend availability zones,ABANDONED,2021-10-28 15:32:08.000000000,2021-10-28 15:32:31.000000000,,[],"[{'number': 1, 'created': '2021-10-28 15:32:08.000000000', 'files': ['releasenotes/notes/add-share-backend-availability-zone-parameters-1bcf6b1066dc82cf.yaml', 'manifests/backend/generic.pp', 'spec/defines/manila_backend_dellemc_vnx_spec.rb', 'manifests/backend/hitachi_hnas.pp', 'spec/defines/manila_backend_glusterfs_spec.rb', 'manifests/backend/dellemc_vnx.pp', 'manifests/backend/cephfs.pp', 'spec/defines/manila_backend_cephfs_spec.rb', 'spec/defines/manila_backend_glusternfs_spec.rb', 'manifests/backend/glusterfs.pp', 'spec/defines/manila_backend_netapp_spec.rb', 'manifests/backend/netapp.pp', 'spec/defines/manila_backend_dellemc_isilon_spec.rb', 'manifests/backend/dellemc_unity.pp', 'spec/defines/manila_backend_generic_spec.rb', 'spec/defines/manila_backend_dellemc_unity_spec.rb', 'manifests/backend/dellemc_isilon.pp', 'manifests/backend/glusternfs.pp', 'spec/defines/manila_backend_glusternative_spec.rb', 'manifests/backend/dellemc_vmax.pp', 'spec/defines/manila_backend_hitachi_hnas_spec.rb', 'manifests/backend/glusternative.pp', 'spec/defines/manila_backend_dellemc_vmax_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-manila/commit/eb3427b72ba11d8594b2de39472218d851c196cc', 'message': 'Add ability to configure backend availability zones\n\nAdd new ""backend_availability_zone"" parameter to every share\nbackend. The parameters are optional, and when set they override the\nDEFAULT/storage_availability_zone for the corresponding backend.\n\nThe changes were adapted to solve conflitant modifications in few\nfiles.\n\nChange-Id: I62eb4815320c36a37be6f8b10d35f236417a103f\n\n(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)\nChange-Id: I99c3a2215e7bac1013be5df52ef270fa947cbccc\n'}]",0,815858,eb3427b72ba11d8594b2de39472218d851c196cc,2,0,1,29632,,,0,"Add ability to configure backend availability zones

Add new ""backend_availability_zone"" parameter to every share
backend. The parameters are optional, and when set they override the
DEFAULT/storage_availability_zone for the corresponding backend.

The changes were adapted to solve conflitant modifications in few
files.

Change-Id: I62eb4815320c36a37be6f8b10d35f236417a103f

(cherry picked from commit a0610b687eb4eefc5b9b6203d75fdaa2ad2b23b1)
Change-Id: I99c3a2215e7bac1013be5df52ef270fa947cbccc
",git fetch https://review.opendev.org/openstack/puppet-manila refs/changes/58/815858/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/add-share-backend-availability-zone-parameters-1bcf6b1066dc82cf.yaml', 'manifests/backend/generic.pp', 'spec/defines/manila_backend_dellemc_vnx_spec.rb', 'manifests/backend/hitachi_hnas.pp', 'spec/defines/manila_backend_glusterfs_spec.rb', 'manifests/backend/dellemc_vnx.pp', 'manifests/backend/cephfs.pp', 'spec/defines/manila_backend_cephfs_spec.rb', 'spec/defines/manila_backend_glusternfs_spec.rb', 'manifests/backend/glusterfs.pp', 'spec/defines/manila_backend_netapp_spec.rb', 'manifests/backend/netapp.pp', 'spec/defines/manila_backend_dellemc_isilon_spec.rb', 'manifests/backend/dellemc_unity.pp', 'spec/defines/manila_backend_generic_spec.rb', 'spec/defines/manila_backend_dellemc_unity_spec.rb', 'manifests/backend/dellemc_isilon.pp', 'manifests/backend/glusternfs.pp', 'spec/defines/manila_backend_glusternative_spec.rb', 'manifests/backend/dellemc_vmax.pp', 'spec/defines/manila_backend_hitachi_hnas_spec.rb', 'manifests/backend/glusternative.pp', 'spec/defines/manila_backend_dellemc_vmax_spec.rb']",23,eb3427b72ba11d8594b2de39472218d851c196cc,," :vmax_server_container => '<SERVICE DEFAULT>', :vmax_share_data_pools => '<SERVICE DEFAULT>', :vmax_ethernet_ports => '<SERVICE DEFAULT>', :backend_availability_zone => '<SERVICE DEFAULT>',"," :vmax_server_container => '<SERVICE DEFAULT>', :vmax_share_data_pools => '<SERVICE DEFAULT>', :vmax_ethernet_ports => '<SERVICE DEFAULT>',",122,10
openstack%2Fkayobe~master~Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335,openstack/kayobe,master,Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335,Fix --check argument for overcloud host configure,MERGED,2021-07-08 10:14:03.000000000,2021-10-28 15:30:17.000000000,2021-10-28 15:27:04.000000000,"[{'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-07-08 10:14:03.000000000', 'files': ['ansible/roles/disable-glean/tasks/main.yml', 'releasenotes/notes/fix-check-mode-c0f8e1fcb09f730b.yaml', 'ansible/kayobe-ansible-user.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/533e9ca912e882578b4a413ab96399f80b4da0fb', 'message': ""Fix --check argument for overcloud host configure\n\nWhen running 'kayobe overcloud host configure', there are some tasks\nthat we need to run even in check mode, to ensure that subsequent tasks\ncan execute. These tasks should not change the target systems.\n\nChange-Id: Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335\nStory: 2004798\nTask: 28951\n""}]",0,800006,533e9ca912e882578b4a413ab96399f80b4da0fb,10,3,1,14826,,,0,"Fix --check argument for overcloud host configure

When running 'kayobe overcloud host configure', there are some tasks
that we need to run even in check mode, to ensure that subsequent tasks
can execute. These tasks should not change the target systems.

Change-Id: Id912ccd7c4bf2a4ccff8d16f2a9aa6ed2127a335
Story: 2004798
Task: 28951
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/06/800006/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/disable-glean/tasks/main.yml', 'releasenotes/notes/fix-check-mode-c0f8e1fcb09f730b.yaml', 'ansible/kayobe-ansible-user.yml']",3,533e9ca912e882578b4a413ab96399f80b4da0fb,, check_mode: no,,8,0
openstack%2Fkayobe~master~I758aff1d3ef714f1c8ef82d29dd2217734a9aae6,openstack/kayobe,master,I758aff1d3ef714f1c8ef82d29dd2217734a9aae6,infra VMs: use wait_for rather than wait_for_connection,MERGED,2021-10-08 15:52:29.000000000,2021-10-28 15:28:54.000000000,2021-10-28 15:27:02.000000000,"[{'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-10-08 15:52:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/32a9773ed01143a6ac3f8106bc9f9e46cde0ca94', 'message': 'DNM: infra VMs: use wait_for\n\nChange-Id: I758aff1d3ef714f1c8ef82d29dd2217734a9aae6\n'}, {'number': 2, 'created': '2021-10-25 16:33:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/34768139ff2c7c174ede30331d8c255186d318ec', 'message': 'infra VMs: use wait_for rather than wait_for_connection\n\nwait_for_connection requires a python interpreter to be available, which\nmay not be the case in some images (CentOS Stream cloud images, cirros\netc.). Instead, use wait_for to wait for the SSH port to open, then rely\non the bootstrapping process to install an interpreter. This is the same\nmethod used for the seed VM.\n\nChange-Id: I758aff1d3ef714f1c8ef82d29dd2217734a9aae6\n'}, {'number': 3, 'created': '2021-10-28 08:53:33.000000000', 'files': ['ansible/infra-vm-provision.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b87d89aae39cceedd4f70b447cddf5ada615bd36', 'message': 'infra VMs: use wait_for rather than wait_for_connection\n\nwait_for_connection requires a python interpreter to be available, which\nmay not be the case in some images (CentOS Stream cloud images, cirros\netc.). Instead, use wait_for to wait for the SSH port to open, then rely\non the bootstrapping process to install an interpreter. This is the same\nmethod used for the seed VM.\n\nThis change also syncs the SSH wait timeout for infra VMs which the one\nused for seed VM provisioning (360 seconds).\n\nChange-Id: I758aff1d3ef714f1c8ef82d29dd2217734a9aae6\n'}]",5,813212,b87d89aae39cceedd4f70b447cddf5ada615bd36,17,3,3,14826,,,0,"infra VMs: use wait_for rather than wait_for_connection

wait_for_connection requires a python interpreter to be available, which
may not be the case in some images (CentOS Stream cloud images, cirros
etc.). Instead, use wait_for to wait for the SSH port to open, then rely
on the bootstrapping process to install an interpreter. This is the same
method used for the seed VM.

This change also syncs the SSH wait timeout for infra VMs which the one
used for seed VM provisioning (360 seconds).

Change-Id: I758aff1d3ef714f1c8ef82d29dd2217734a9aae6
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/12/813212/3 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/infra-vm-provision.yml', 'zuul.d/project.yaml']",2,32a9773ed01143a6ac3f8106bc9f9e46cde0ca94,,,--- - project: templates: - openstack-cover-jobs - openstack-python3-xena-jobs - publish-openstack-docs-pti - release-notes-jobs-python3 check: jobs: - kayobe-tox-ansible-syntax - kayobe-tox-ansible - kayobe-tox-molecule - kayobe-overcloud-centos8s - kayobe-overcloud-ubuntu-focal - kayobe-overcloud-tls-centos8s - kayobe-overcloud-host-configure-centos8s - kayobe-overcloud-host-configure-ubuntu-focal - kayobe-overcloud-upgrade-centos8s - kayobe-overcloud-upgrade-ubuntu-focal - kayobe-seed-centos8s - kayobe-seed-ubuntu-focal - kayobe-seed-upgrade-centos8s - kayobe-seed-upgrade-ubuntu-focal - kayobe-seed-vm-centos8s - kayobe-seed-vm-ubuntu-focal gate: queue: kayobe jobs: - kayobe-tox-ansible-syntax - kayobe-tox-ansible - kayobe-tox-molecule - kayobe-overcloud-centos8s - kayobe-overcloud-ubuntu-focal - kayobe-overcloud-tls-centos8s - kayobe-overcloud-host-configure-centos8s - kayobe-overcloud-host-configure-ubuntu-focal - kayobe-overcloud-upgrade-centos8s - kayobe-seed-centos8s - kayobe-seed-ubuntu-focal - kayobe-seed-upgrade-centos8s - kayobe-seed-vm-centos8s - kayobe-seed-vm-ubuntu-focal ,6,54
openstack%2Fopenstack-ansible-os_nova~stable%2Fwallaby~Iddbe8764bb6d3cd3eaee122b2d5ddc02fa3f7662,openstack/openstack-ansible-os_nova,stable/wallaby,Iddbe8764bb6d3cd3eaee122b2d5ddc02fa3f7662,Enable TLS for live migrations,ABANDONED,2021-10-28 12:50:45.000000000,2021-10-28 15:14:39.000000000,,[],"[{'number': 1, 'created': '2021-10-28 12:50:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_nova/commit/6764b90fdc0f372a9b5fe67c54e74baac723b5f6', 'message': ""[WIP] Enable TLS for live migrations\n\nInstead of using SSH to live migrate VM's use TLS as this is more\nsecure and SSH migrations are deprecated.\nhttps://docs.openstack.org/nova/xena/admin/secure-live-migration-with-qemu-native-tls.html\n\nDepends-On: https://review.opendev.org/c/openstack/ansible-role-pki/+/815007\n\nChange-Id: Iddbe8764bb6d3cd3eaee122b2d5ddc02fa3f7662\n""}, {'number': 2, 'created': '2021-10-28 14:02:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_nova/commit/efe4be44921927591cc8e559fcada71d2bb7e35b', 'message': ""[WIP] Enable TLS for live migrations\n\nInstead of using SSH to live migrate VM's use TLS as this is more\nsecure and SSH migrations are deprecated.\nhttps://docs.openstack.org/nova/xena/admin/secure-live-migration-with-qemu-native-tls.html\n\nDepends-On: https://review.opendev.org/c/openstack/ansible-role-pki/+/815007\nDepends-On: https://review.opendev.org/c/openstack/ansible-role-pki/+/815849\n\nChange-Id: Iddbe8764bb6d3cd3eaee122b2d5ddc02fa3f7662\n""}, {'number': 3, 'created': '2021-10-28 15:06:04.000000000', 'files': ['tasks/main.yml', 'tasks/nova_compute.yml', 'templates/nova.conf.j2', 'templates/qemu.conf.j2', 'handlers/main.yml', 'defaults/main.yml', 'releasenotes/notes/tls-migration-3ed93cc04dab5eee.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_nova/commit/02b9565de69e8bc6d966cedebab781bdeb0d4544', 'message': ""Enable TLS for live migrations\n\nInstead of using SSH to live migrate VM's use TLS as this is more\nsecure and SSH migrations are deprecated.\nhttps://docs.openstack.org/nova/xena/admin/secure-live-migration-with-qemu-native-tls.html\n\nDepends-On: https://review.opendev.org/c/openstack/ansible-role-pki/+/815007\nDepends-On: https://review.opendev.org/c/openstack/ansible-role-pki/+/815849\n\nChange-Id: Iddbe8764bb6d3cd3eaee122b2d5ddc02fa3f7662\n""}]",0,815835,02b9565de69e8bc6d966cedebab781bdeb0d4544,4,0,3,31749,,,0,"Enable TLS for live migrations

Instead of using SSH to live migrate VM's use TLS as this is more
secure and SSH migrations are deprecated.
https://docs.openstack.org/nova/xena/admin/secure-live-migration-with-qemu-native-tls.html

Depends-On: https://review.opendev.org/c/openstack/ansible-role-pki/+/815007
Depends-On: https://review.opendev.org/c/openstack/ansible-role-pki/+/815849

Change-Id: Iddbe8764bb6d3cd3eaee122b2d5ddc02fa3f7662
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_nova refs/changes/35/815835/2 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/nova_compute.yml', 'templates/nova.conf.j2', 'templates/qemu.conf.j2', 'handlers/main.yml', 'defaults/main.yml', 'releasenotes/notes/tls-migration-3ed93cc04dab5eee.yaml']",7,6764b90fdc0f372a9b5fe67c54e74baac723b5f6,bbc-wallaby-23.1.1,"--- features: - | Nova now defaults to to using the ""QEMU-native TLS"" feature for live migrations, rather than the deprecated SSH method. A pre-existing PKI (Public Key Infrastructure) setup is required. QEMU-native TLS requires all compute hosts to accept TCP connections on port 16514 and port range 49152 to 49261. More information can be found here: https://docs.openstack.org/nova/latest/admin/secure-live-migration-with-qemu-native-tls.html ",,148,30
openstack%2Fopenstack-ansible-os_tempest~master~Id1e43e2a0362bdb4fa11080f8babda546eafe773,openstack/openstack-ansible-os_tempest,master,Id1e43e2a0362bdb4fa11080f8babda546eafe773,Do not install ceilometerclient,MERGED,2021-10-26 10:53:12.000000000,2021-10-28 15:01:43.000000000,2021-10-28 14:59:14.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 31542}]","[{'number': 1, 'created': '2021-10-26 10:53:12.000000000', 'files': ['defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/b86ad14b4b61dbf949867bd85f6ebff72a583ab0', 'message': 'Do not install ceilometerclient\n\nceilometerclient has been deprecated and should not be installed anymore\n\nChange-Id: Id1e43e2a0362bdb4fa11080f8babda546eafe773\nRelated-Bug: #1948683\n'}]",2,815470,b86ad14b4b61dbf949867bd85f6ebff72a583ab0,14,3,1,28619,,,0,"Do not install ceilometerclient

ceilometerclient has been deprecated and should not be installed anymore

Change-Id: Id1e43e2a0362bdb4fa11080f8babda546eafe773
Related-Bug: #1948683
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_tempest refs/changes/70/815470/1 && git format-patch -1 --stdout FETCH_HEAD,['defaults/main.yml'],1,b86ad14b4b61dbf949867bd85f6ebff72a583ab0,bug/1948683,, - python-ceilometerclient,0,1
openstack%2Fkolla-ansible~master~Iefa8f78142c502ac9e8ebdbb95c94b2b05f99e5b,openstack/kolla-ansible,master,Iefa8f78142c502ac9e8ebdbb95c94b2b05f99e5b,Fix missing Ansible version in the error message,MERGED,2021-10-27 19:17:21.000000000,2021-10-28 15:01:30.000000000,2021-10-28 14:53:37.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 29880}]","[{'number': 1, 'created': '2021-10-27 19:17:21.000000000', 'files': ['releasenotes/notes/bug-1948979-aaf2a93cc016ffb1.yaml', 'tools/kolla-ansible'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/cd13bde880811f35b7ce1627bc4261f3bf201979', 'message': 'Fix missing Ansible version in the error message\n\nChange-Id: Iefa8f78142c502ac9e8ebdbb95c94b2b05f99e5b\nCloses-Bug: #1948979\n'}]",2,815735,cd13bde880811f35b7ce1627bc4261f3bf201979,13,4,1,30491,,,0,"Fix missing Ansible version in the error message

Change-Id: Iefa8f78142c502ac9e8ebdbb95c94b2b05f99e5b
Closes-Bug: #1948979
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/35/815735/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1948979-aaf2a93cc016ffb1.yaml', 'tools/kolla-ansible']",2,cd13bde880811f35b7ce1627bc4261f3bf201979,bug/1948979," echo ""ERROR: Ansible version should be between $ANSIBLE_VERSION_MIN and $ANSIBLE_VERSION_MAX. Current version is $ansible_full_version which is not supported."""," echo ""ERROR: Ansible version should be between $ANSIBLE_VERSION_MIN and $ANSIBLE_VERSION_MAX. Current version is $ANSIBLE_VERSION_HOST which is not supported.""",6,1
openstack%2Fnova~master~I30fd6563292520865545a10ae9af32c765b314da,openstack/nova,master,I30fd6563292520865545a10ae9af32c765b314da,Check Nova project changes with Tobiko scenario test cases,MERGED,2021-09-01 07:26:38.000000000,2021-10-28 15:00:36.000000000,2021-10-28 14:49:10.000000000,"[{'_account_id': 7166}, {'_account_id': 7634}, {'_account_id': 9708}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-01 07:26:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a8268857c8fae59bb2f4865748a81fc937c2059a', 'message': '[WIP] Check Nova project changes with tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 2, 'created': '2021-09-02 12:27:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/88711cf415998a126991563851081e07ec805809', 'message': '[WIP] Check Nova project changes with tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 3, 'created': '2021-09-02 12:31:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/aaaafa3dcf9b1109bce5a9fe6dcb6e3cfc06ee67', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 4, 'created': '2021-09-02 22:21:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1291fdd040f140c22b0a2e50c35de642fad37cef', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 5, 'created': '2021-09-08 08:09:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ec80ecb1223cec515dad3c0e9e967eb7e5e6a8df', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 6, 'created': '2021-09-13 13:09:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7e39901b7bc828c9b8cc8c824b4616d609825fdb', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 7, 'created': '2021-09-26 12:05:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/67f10ebf5ef12f1ea8a320880f0ce3a3dedd46fb', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 8, 'created': '2021-09-29 01:52:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b6ca01a9d7e9165ac84229a70543d611d5bff9f3', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 9, 'created': '2021-10-13 13:04:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/402af29b16bc0c3256c4ae866c462819399e920c', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}, {'number': 10, 'created': '2021-10-28 07:58:12.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/171138146a648d22474b7021ac730e26f03455f8', 'message': 'Check Nova project changes with Tobiko scenario test cases\n\nChange-Id: I30fd6563292520865545a10ae9af32c765b314da\n'}]",4,806853,171138146a648d22474b7021ac730e26f03455f8,70,5,10,27329,,,0,"Check Nova project changes with Tobiko scenario test cases

Change-Id: I30fd6563292520865545a10ae9af32c765b314da
",git fetch https://review.opendev.org/openstack/nova refs/changes/53/806853/10 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,a8268857c8fae59bb2f4865748a81fc937c2059a,, - devstack-tobiko-minimal: voting: false,,2,0
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I580cddf94a8da20081700c46526b21a8beb38210,openstack/tripleo-heat-templates,stable/ussuri,I580cddf94a8da20081700c46526b21a8beb38210,[victoria/ussuri/train] Tune minion defaults,MERGED,2021-10-26 08:28:39.000000000,2021-10-28 14:53:33.000000000,2021-10-28 14:53:33.000000000,"[{'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-26 08:28:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/082a9c704abefd56ccd7ab15f36dd61bf20862a0', 'message': ""[victoria/ussuri/train] Tune minion defaults\n\nUndercloud Minion should be configured with the same default tuning as\nUndercloud[1] for heat & ironic.\n\nWe have dropped minion environment files for wallaby+, Updating minion\nsetting for t/u/v.\n\nAlso, add minion job in zuul layout, As this isn't covered by the\nzuul project templates. In tripleo-ansible repo also minion job is\nalso explicility mentioned[2]\n\n[1] https://github.com/openstack/tripleo-heat-templates/blob/stable/victoria/environments/undercloud.yaml#L96-L137\n[2] https://github.com/openstack/tripleo-ansible/blob/stable/victoria/zuul.d/layout.yaml#L25-L45\n\nRelated-Bug: #1947510\nChange-Id: I580cddf94a8da20081700c46526b21a8beb38210\n(cherry picked from commit 72e0b6b78c3ccadb6d460666afd74dd371d8fc7a)\n""}, {'number': 2, 'created': '2021-10-27 05:01:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d55659fd690d4af23b7641835b9d4320b1949181', 'message': ""[victoria/ussuri/train] Tune minion defaults\n\nUndercloud Minion should be configured with the same default tuning as\nUndercloud[1] for heat & ironic.\n\nWe have dropped minion environment files for wallaby+, Updating minion\nsetting for t/u/v.\n\nAlso, add minion job in zuul layout, As this isn't covered by the\nzuul project templates. In tripleo-ansible repo also minion job is\nalso explicility mentioned[2]\n\n[1] https://github.com/openstack/tripleo-heat-templates/blob/stable/victoria/environments/undercloud.yaml#L96-L137\n[2] https://github.com/openstack/tripleo-ansible/blob/stable/victoria/zuul.d/layout.yaml#L25-L45\n\nRelated-Bug: #1947510\nChange-Id: I580cddf94a8da20081700c46526b21a8beb38210\n(cherry picked from commit 72e0b6b78c3ccadb6d460666afd74dd371d8fc7a)\n""}, {'number': 3, 'created': '2021-10-27 05:26:04.000000000', 'files': ['sample-env-generator/undercloud-minion.yaml', 'environments/undercloud/undercloud-minion.yaml', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/06fa3edaeb7c001739af7af4b6e07b526bcbfa58', 'message': ""[victoria/ussuri/train] Tune minion defaults\n\nUndercloud Minion should be configured with the same default tuning as\nUndercloud[1] for heat & ironic.\n\nWe have dropped minion environment files for wallaby+, Updating minion\nsetting for t/u/v.\n\nAlso, add minion job in zuul layout, As this isn't covered by the\nzuul project templates. In tripleo-ansible repo also minion job is\nalso explicility mentioned[2]\n\n[1] https://github.com/openstack/tripleo-heat-templates/blob/stable/victoria/environments/undercloud.yaml#L96-L137\n[2] https://github.com/openstack/tripleo-ansible/blob/stable/victoria/zuul.d/layout.yaml#L25-L45\n\nRelated-Bug: #1947510\nChange-Id: I580cddf94a8da20081700c46526b21a8beb38210\n(cherry picked from commit 72e0b6b78c3ccadb6d460666afd74dd371d8fc7a)\n""}]",2,815431,06fa3edaeb7c001739af7af4b6e07b526bcbfa58,15,4,3,29775,,,0,"[victoria/ussuri/train] Tune minion defaults

Undercloud Minion should be configured with the same default tuning as
Undercloud[1] for heat & ironic.

We have dropped minion environment files for wallaby+, Updating minion
setting for t/u/v.

Also, add minion job in zuul layout, As this isn't covered by the
zuul project templates. In tripleo-ansible repo also minion job is
also explicility mentioned[2]

[1] https://github.com/openstack/tripleo-heat-templates/blob/stable/victoria/environments/undercloud.yaml#L96-L137
[2] https://github.com/openstack/tripleo-ansible/blob/stable/victoria/zuul.d/layout.yaml#L25-L45

Related-Bug: #1947510
Change-Id: I580cddf94a8da20081700c46526b21a8beb38210
(cherry picked from commit 72e0b6b78c3ccadb6d460666afd74dd371d8fc7a)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/31/815431/3 && git format-patch -1 --stdout FETCH_HEAD,"['sample-env-generator/undercloud-minion.yaml', 'environments/undercloud/undercloud-minion.yaml', 'zuul.d/layout.yaml']",3,082a9c704abefd56ccd7ab15f36dd61bf20862a0,bug/1947510, - tripleo-ci-centos-8-containers-undercloud-minion: &undercloud_minion vars: consumer_job: true remove_tags: - build dependencies: - tripleo-ci-centos-8-content-provider files: - ^sample-env-generator/undercloud-minion.yaml - ^environments/undercloud/undercloud-minion.yaml - ^deployment/undercloud/minion-rabbitmq-puppet.yaml<<<<<<< HEAD (e616f7 Use consistent naming for MysqlInnodbBufferPoolSize) ======= - openstack-tox-tht - tripleo-ci-centos-8-containers-undercloud-minion: *undercloud_minion >>>>>>> CHANGE (72e0b6 [victoria/ussuri/train] Tune minion defaults),,69,0
openstack%2Fpuppet-cloudkitty~master~I8b1f78ef65d410b79334b76c2b7297afb6270c1a,openstack/puppet-cloudkitty,master,I8b1f78ef65d410b79334b76c2b7297afb6270c1a,Do not test authtoken parameters directly,ABANDONED,2021-10-04 12:07:21.000000000,2021-10-28 14:28:08.000000000,,"[{'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-04 12:07:21.000000000', 'files': ['spec/classes/cloudkitty_keystone_authtoken_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/39c04a717d731bf56bcb3a6d7a95137cf1cd4dbb', 'message': 'Do not test authtoken parameters directly\n\nThe authtoken parameters are not managed directly but managed by\nthe keystone::resource::authtoken class. Thus we should avoid testing\nparameters directly otherwise any change in the resource type can\ncause test failures.\n\nChange-Id: I8b1f78ef65d410b79334b76c2b7297afb6270c1a\n'}]",0,812343,39c04a717d731bf56bcb3a6d7a95137cf1cd4dbb,4,2,1,9816,,,0,"Do not test authtoken parameters directly

The authtoken parameters are not managed directly but managed by
the keystone::resource::authtoken class. Thus we should avoid testing
parameters directly otherwise any change in the resource type can
cause test failures.

Change-Id: I8b1f78ef65d410b79334b76c2b7297afb6270c1a
",git fetch https://review.opendev.org/openstack/puppet-cloudkitty refs/changes/43/812343/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/classes/cloudkitty_keystone_authtoken_spec.rb'],1,39c04a717d731bf56bcb3a6d7a95137cf1cd4dbb,authtoken-ut," { :password => 'cloudkitty_password', } shared_examples 'cloudkitty::keystone::authtoken' do is_expected.to contain_keystone__resource__authtoken('cloudkitty_config').with( :username => 'cloudkitty', :password => 'cloudkitty_password', :auth_url => 'http://localhost:5000', :project_name => 'services', :user_domain_name => 'Default', :project_domain_name => 'Default', :insecure => '<SERVICE DEFAULT>', :auth_section => '<SERVICE DEFAULT>', :auth_type => 'password', :www_authenticate_uri => 'http://localhost:5000', :auth_version => '<SERVICE DEFAULT>', :cache => '<SERVICE DEFAULT>', :cafile => '<SERVICE DEFAULT>', :certfile => '<SERVICE DEFAULT>', :delay_auth_decision => '<SERVICE DEFAULT>', :enforce_token_bind => '<SERVICE DEFAULT>', :http_connect_timeout => '<SERVICE DEFAULT>', :http_request_max_retries => '<SERVICE DEFAULT>', :include_service_catalog => '<SERVICE DEFAULT>', :keyfile => '<SERVICE DEFAULT>', :memcache_pool_conn_get_timeout => '<SERVICE DEFAULT>', :memcache_pool_dead_retry => '<SERVICE DEFAULT>', :memcache_pool_maxsize => '<SERVICE DEFAULT>', :memcache_pool_socket_timeout => '<SERVICE DEFAULT>', :memcache_pool_unused_timeout => '<SERVICE DEFAULT>', :memcache_secret_key => '<SERVICE DEFAULT>', :memcache_security_strategy => '<SERVICE DEFAULT>', :memcache_use_advanced_pool => '<SERVICE DEFAULT>', :memcached_servers => '<SERVICE DEFAULT>', :manage_memcache_package => false, :region_name => '<SERVICE DEFAULT>', :token_cache_time => '<SERVICE DEFAULT>', :service_token_roles => '<SERVICE DEFAULT>', :service_token_roles_required => '<SERVICE DEFAULT>', :service_type => '<SERVICE DEFAULT>', :interface => '<SERVICE DEFAULT>', ) :auth_url => 'http://127.0.0.1:5000', is_expected.to contain_keystone__resource__authtoken('cloudkitty_config').with( :www_authenticate_uri => 'https://10.0.0.1:9999/', :username => 'myuser', :password => 'mypasswd', :auth_url => 'http://127.0.0.1:5000', :project_name => 'service_project', :user_domain_name => 'domainX', :project_domain_name => 'domainX', :insecure => false, :auth_section => 'new_section', :auth_type => 'password', :auth_version => 'v3', :cache => 'somevalue', :cafile => '/opt/stack/data/cafile.pem', :certfile => 'certfile.crt', :delay_auth_decision => false, :enforce_token_bind => 'permissive', :http_connect_timeout => '300', :http_request_max_retries => '3', :include_service_catalog => true, :keyfile => 'keyfile', :memcache_pool_conn_get_timeout => '9', :memcache_pool_dead_retry => '302', :memcache_pool_maxsize => '11', :memcache_pool_socket_timeout => '2', :memcache_pool_unused_timeout => '61', :memcache_secret_key => 'secret_key', :memcache_security_strategy => 'ENCRYPT', :memcache_use_advanced_pool => true, :memcached_servers => ['memcached01:11211','memcached02:11211'], :manage_memcache_package => true, :region_name => 'region2', :token_cache_time => '301', :service_token_roles => ['service'], :service_token_roles_required => false, :service_type => 'identity', :interface => 'internal', ) end end context 'when overriding parameters via params hash' do before do params.merge!({ :username => 'myuser', :params => { 'username' => 'myotheruser' }, }) it 'configure keystone_authtoken' do is_expected.to contain_keystone__resource__authtoken('cloudkitty_config').with( :username => 'myotheruser', ) it_configures 'cloudkitty::keystone::authtoken'"," { :password => 'secrete', } shared_examples 'cloudkitty authtoken' do is_expected.to contain_cloudkitty_config('keystone_authtoken/username').with_value('cloudkitty') is_expected.to contain_cloudkitty_config('keystone_authtoken/password').with_value('secrete') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_url').with_value('http://localhost:5000') is_expected.to contain_cloudkitty_config('keystone_authtoken/project_name').with_value('services') is_expected.to contain_cloudkitty_config('keystone_authtoken/user_domain_name').with_value('Default') is_expected.to contain_cloudkitty_config('keystone_authtoken/project_domain_name').with_value('Default') is_expected.to contain_cloudkitty_config('keystone_authtoken/insecure').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_section').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_type').with_value('password') is_expected.to contain_cloudkitty_config('keystone_authtoken/www_authenticate_uri').with_value('http://localhost:5000') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_version').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/cache').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/cafile').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/certfile').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/delay_auth_decision').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/enforce_token_bind').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/http_connect_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/http_request_max_retries').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/include_service_catalog').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/keyfile').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_conn_get_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_dead_retry').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_maxsize').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_socket_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_unused_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_secret_key').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_security_strategy').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_use_advanced_pool').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcached_servers').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/region_name').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/token_cache_time').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles_required').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/service_type').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/interface').with_value('<SERVICE DEFAULT>') :auth_url => 'https://127.0.0.1:5000', is_expected.to contain_cloudkitty_config('keystone_authtoken/www_authenticate_uri').with_value('https://10.0.0.1:9999/') is_expected.to contain_cloudkitty_config('keystone_authtoken/username').with_value(params[:username]) is_expected.to contain_cloudkitty_config('keystone_authtoken/password').with_value(params[:password]).with_secret(true) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_url').with_value(params[:auth_url]) is_expected.to contain_cloudkitty_config('keystone_authtoken/project_name').with_value(params[:project_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/user_domain_name').with_value(params[:user_domain_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/project_domain_name').with_value(params[:project_domain_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/insecure').with_value(params[:insecure]) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_section').with_value(params[:auth_section]) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_type').with_value(params[:auth_type]) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_version').with_value(params[:auth_version]) is_expected.to contain_cloudkitty_config('keystone_authtoken/cache').with_value(params[:cache]) is_expected.to contain_cloudkitty_config('keystone_authtoken/cafile').with_value(params[:cafile]) is_expected.to contain_cloudkitty_config('keystone_authtoken/certfile').with_value(params[:certfile]) is_expected.to contain_cloudkitty_config('keystone_authtoken/delay_auth_decision').with_value(params[:delay_auth_decision]) is_expected.to contain_cloudkitty_config('keystone_authtoken/enforce_token_bind').with_value(params[:enforce_token_bind]) is_expected.to contain_cloudkitty_config('keystone_authtoken/http_connect_timeout').with_value(params[:http_connect_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/http_request_max_retries').with_value(params[:http_request_max_retries]) is_expected.to contain_cloudkitty_config('keystone_authtoken/include_service_catalog').with_value(params[:include_service_catalog]) is_expected.to contain_cloudkitty_config('keystone_authtoken/keyfile').with_value(params[:keyfile]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_conn_get_timeout').with_value(params[:memcache_pool_conn_get_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_dead_retry').with_value(params[:memcache_pool_dead_retry]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_maxsize').with_value(params[:memcache_pool_maxsize]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_socket_timeout').with_value(params[:memcache_pool_socket_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_unused_timeout').with_value(params[:memcache_pool_unused_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_secret_key').with_value(params[:memcache_secret_key]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_security_strategy').with_value(params[:memcache_security_strategy]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_use_advanced_pool').with_value(params[:memcache_use_advanced_pool]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcached_servers').with_value('memcached01:11211,memcached02:11211') is_expected.to contain_cloudkitty_config('keystone_authtoken/region_name').with_value(params[:region_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/token_cache_time').with_value(params[:token_cache_time]) is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles').with_value(params[:service_token_roles]) is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles_required').with_value(params[:service_token_roles_required]) is_expected.to contain_cloudkitty_config('keystone_authtoken/service_type').with_value(params[:service_type]) is_expected.to contain_cloudkitty_config('keystone_authtoken/interface').with_value(params[:interface]) it 'installs python memcache package' do is_expected.to contain_package('python-memcache') it_configures 'cloudkitty authtoken'",93,76
openstack%2Fpuppet-cloudkitty~master~I8f04817792637b9f29fce079ba39ff984efc28b8,openstack/puppet-cloudkitty,master,I8f04817792637b9f29fce079ba39ff984efc28b8,Do not test authtoken parameters directly,ABANDONED,2021-08-26 12:24:50.000000000,2021-10-28 14:28:00.000000000,,"[{'_account_id': 9816}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-26 12:24:50.000000000', 'files': ['spec/classes/cloudkitty_keystone_authtoken_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-cloudkitty/commit/2b12acf061ae22ba2ca8d583c7e4b9de1613a482', 'message': 'Do not test authtoken parameters directly\n\nThe authtoken parameters are not managed directly but managed by\nthe keystone::resource::authtoken class. Thus we should avoid testing\nparameters directly otherwise any change in the resource type can\ncause test failures.\n\nChange-Id: I8f04817792637b9f29fce079ba39ff984efc28b8\n'}]",0,806164,2b12acf061ae22ba2ca8d583c7e4b9de1613a482,4,2,1,9816,,,0,"Do not test authtoken parameters directly

The authtoken parameters are not managed directly but managed by
the keystone::resource::authtoken class. Thus we should avoid testing
parameters directly otherwise any change in the resource type can
cause test failures.

Change-Id: I8f04817792637b9f29fce079ba39ff984efc28b8
",git fetch https://review.opendev.org/openstack/puppet-cloudkitty refs/changes/64/806164/1 && git format-patch -1 --stdout FETCH_HEAD,['spec/classes/cloudkitty_keystone_authtoken_spec.rb'],1,2b12acf061ae22ba2ca8d583c7e4b9de1613a482,authtoken-ut," { :password => 'cloudkitty_password', } shared_examples 'cloudkitty::keystone::authtoken' do contain_keystone__resources__authtoken('cloudkitty_config').with( :username => 'cloudkitty', :password => 'cloudkitty_password', :auth_url => 'http://localhost:5000', :project_name => 'services', :user_domain_name => 'Default', :project_domain_name => 'Default', :insecure => '<SERVICE DEFAULT>', :auth_section => '<SERVICE DEFAULT>', :auth_type => 'password', :www_authenticate_uri => 'http://localhost:5000', :auth_version => '<SERVICE DEFAULT>', :cache => '<SERVICE DEFAULT>', :cafile => '<SERVICE DEFAULT>', :certfile => '<SERVICE DEFAULT>', :delay_auth_decision => '<SERVICE DEFAULT>', :enforce_token_bind => '<SERVICE DEFAULT>', :http_connect_timeout => '<SERVICE DEFAULT>', :http_request_max_retries => '<SERVICE DEFAULT>', :include_service_catalog => '<SERVICE DEFAULT>', :keyfile => '<SERVICE DEFAULT>', :memcache_pool_conn_get_timeout => '<SERVICE DEFAULT>', :memcache_pool_dead_retry => '<SERVICE DEFAULT>', :memcache_pool_maxsize => '<SERVICE DEFAULT>', :memcache_pool_socket_timeout => '<SERVICE DEFAULT>', :memcache_pool_unused_timeout => '<SERVICE DEFAULT>', :memcache_secret_key => '<SERVICE DEFAULT>', :memcache_security_strategy => '<SERVICE DEFAULT>', :memcache_use_advanced_pool => '<SERVICE DEFAULT>', :memcached_servers => '<SERVICE DEFAULT>', :manage_memcache_package => false, :region_name => '<SERVICE DEFAULT>', :token_cache_time => '<SERVICE DEFAULT>', :service_token_roles => '<SERVICE DEFAULT>', :service_token_roles_required => '<SERVICE DEFAULT>', :service_type => '<SERVICE DEFAULT>', :interface => '<SERVICE DEFAULT>', ) :www_authenticate_uri => 'https://10.0.0.1:9999/', :username => 'myuser', :password => 'mypasswd', :auth_url => 'http://127.0.0.1:5000', :project_name => 'service_project', :user_domain_name => 'domainX', :project_domain_name => 'domainX', :insecure => false, :auth_section => 'new_section', :auth_type => 'password', :auth_version => 'v3', :cache => 'somevalue', :cafile => '/opt/stack/data/cafile.pem', :certfile => 'certfile.crt', :delay_auth_decision => false, :enforce_token_bind => 'permissive', :http_connect_timeout => '300', :http_request_max_retries => '3', :include_service_catalog => true, :keyfile => 'keyfile', :memcache_pool_conn_get_timeout => '9', :memcache_pool_dead_retry => '302', :memcache_pool_maxsize => '11', :memcache_pool_socket_timeout => '2', :memcache_pool_unused_timeout => '61', :memcache_secret_key => 'secret_key', :memcache_security_strategy => 'ENCRYPT', :memcache_use_advanced_pool => true, :memcached_servers => ['memcached01:11211','memcached02:11211'], :manage_memcache_package => true, :region_name => 'region2', :token_cache_time => '301', :service_token_roles => ['service'], :service_token_roles_required => false, :service_type => 'identity', :interface => 'internal', contain_keystone__resources__authtoken('cloudkitty_config').with( :www_authenticate_uri => 'https://10.0.0.1:9999/', :username => 'myuser', :password => 'mypasswd', :auth_url => 'http://127.0.0.1:5000', :project_name => 'service_project', :user_domain_name => 'domainX', :project_domain_name => 'domainX', :insecure => false, :auth_section => 'new_section', :auth_type => 'password', :auth_version => 'v3', :cache => 'somevalue', :cafile => '/opt/stack/data/cafile.pem', :certfile => 'certfile.crt', :delay_auth_decision => false, :enforce_token_bind => 'permissive', :http_connect_timeout => '300', :http_request_max_retries => '3', :include_service_catalog => true, :keyfile => 'keyfile', :memcache_pool_conn_get_timeout => '9', :memcache_pool_dead_retry => '302', :memcache_pool_maxsize => '11', :memcache_pool_socket_timeout => '2', :memcache_pool_unused_timeout => '61', :memcache_secret_key => 'secret_key', :memcache_security_strategy => 'ENCRYPT', :memcache_use_advanced_pool => true, :memcached_servers => ['memcached01:11211','memcached02:11211'], :manage_memcache_package => true, :region_name => 'region2', :token_cache_time => '301', :service_token_roles => ['service'], :service_token_roles_required => false, :service_type => 'identity', :interface => 'internal', ) end end context 'when overriding parameters via params hash' do before do params.merge!({ :username => 'myuser', :params => { 'username' => 'myotheruser' }, }) it 'configure keystone_authtoken' do contain_keystone__resources__authtoken('cloudkitty_config').with( :username => 'myotheruser', ) it_configures 'cloudkitty::keystone::authtoken'"," { :password => 'secrete', } shared_examples 'cloudkitty authtoken' do is_expected.to contain_cloudkitty_config('keystone_authtoken/username').with_value('cloudkitty') is_expected.to contain_cloudkitty_config('keystone_authtoken/password').with_value('secrete') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_url').with_value('http://localhost:5000') is_expected.to contain_cloudkitty_config('keystone_authtoken/project_name').with_value('services') is_expected.to contain_cloudkitty_config('keystone_authtoken/user_domain_name').with_value('Default') is_expected.to contain_cloudkitty_config('keystone_authtoken/project_domain_name').with_value('Default') is_expected.to contain_cloudkitty_config('keystone_authtoken/insecure').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_section').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_type').with_value('password') is_expected.to contain_cloudkitty_config('keystone_authtoken/www_authenticate_uri').with_value('http://localhost:5000') is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_version').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/cache').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/cafile').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/certfile').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/delay_auth_decision').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/enforce_token_bind').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/http_connect_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/http_request_max_retries').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/include_service_catalog').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/keyfile').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_conn_get_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_dead_retry').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_maxsize').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_socket_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_unused_timeout').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_secret_key').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_security_strategy').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_use_advanced_pool').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/memcached_servers').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/region_name').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/token_cache_time').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles_required').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/service_type').with_value('<SERVICE DEFAULT>') is_expected.to contain_cloudkitty_config('keystone_authtoken/interface').with_value('<SERVICE DEFAULT>') :www_authenticate_uri => 'https://10.0.0.1:9999/', :username => 'myuser', :password => 'mypasswd', :auth_url => 'https://127.0.0.1:5000', :project_name => 'service_project', :user_domain_name => 'domainX', :project_domain_name => 'domainX', :insecure => false, :auth_section => 'new_section', :auth_type => 'password', :auth_version => 'v3', :cache => 'somevalue', :cafile => '/opt/stack/data/cafile.pem', :certfile => 'certfile.crt', :delay_auth_decision => false, :enforce_token_bind => 'permissive', :http_connect_timeout => '300', :http_request_max_retries => '3', :include_service_catalog => true, :keyfile => 'keyfile', :memcache_pool_conn_get_timeout => '9', :memcache_pool_dead_retry => '302', :memcache_pool_maxsize => '11', :memcache_pool_socket_timeout => '2', :memcache_pool_unused_timeout => '61', :memcache_secret_key => 'secret_key', :memcache_security_strategy => 'ENCRYPT', :memcache_use_advanced_pool => true, :memcached_servers => ['memcached01:11211','memcached02:11211'], :manage_memcache_package => true, :region_name => 'region2', :token_cache_time => '301', :service_token_roles => ['service'], :service_token_roles_required => false, :service_type => 'identity', :interface => 'internal', is_expected.to contain_cloudkitty_config('keystone_authtoken/www_authenticate_uri').with_value('https://10.0.0.1:9999/') is_expected.to contain_cloudkitty_config('keystone_authtoken/username').with_value(params[:username]) is_expected.to contain_cloudkitty_config('keystone_authtoken/password').with_value(params[:password]).with_secret(true) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_url').with_value(params[:auth_url]) is_expected.to contain_cloudkitty_config('keystone_authtoken/project_name').with_value(params[:project_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/user_domain_name').with_value(params[:user_domain_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/project_domain_name').with_value(params[:project_domain_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/insecure').with_value(params[:insecure]) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_section').with_value(params[:auth_section]) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_type').with_value(params[:auth_type]) is_expected.to contain_cloudkitty_config('keystone_authtoken/auth_version').with_value(params[:auth_version]) is_expected.to contain_cloudkitty_config('keystone_authtoken/cache').with_value(params[:cache]) is_expected.to contain_cloudkitty_config('keystone_authtoken/cafile').with_value(params[:cafile]) is_expected.to contain_cloudkitty_config('keystone_authtoken/certfile').with_value(params[:certfile]) is_expected.to contain_cloudkitty_config('keystone_authtoken/delay_auth_decision').with_value(params[:delay_auth_decision]) is_expected.to contain_cloudkitty_config('keystone_authtoken/enforce_token_bind').with_value(params[:enforce_token_bind]) is_expected.to contain_cloudkitty_config('keystone_authtoken/http_connect_timeout').with_value(params[:http_connect_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/http_request_max_retries').with_value(params[:http_request_max_retries]) is_expected.to contain_cloudkitty_config('keystone_authtoken/include_service_catalog').with_value(params[:include_service_catalog]) is_expected.to contain_cloudkitty_config('keystone_authtoken/keyfile').with_value(params[:keyfile]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_conn_get_timeout').with_value(params[:memcache_pool_conn_get_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_dead_retry').with_value(params[:memcache_pool_dead_retry]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_maxsize').with_value(params[:memcache_pool_maxsize]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_socket_timeout').with_value(params[:memcache_pool_socket_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_pool_unused_timeout').with_value(params[:memcache_pool_unused_timeout]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_secret_key').with_value(params[:memcache_secret_key]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_security_strategy').with_value(params[:memcache_security_strategy]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcache_use_advanced_pool').with_value(params[:memcache_use_advanced_pool]) is_expected.to contain_cloudkitty_config('keystone_authtoken/memcached_servers').with_value('memcached01:11211,memcached02:11211') is_expected.to contain_cloudkitty_config('keystone_authtoken/region_name').with_value(params[:region_name]) is_expected.to contain_cloudkitty_config('keystone_authtoken/token_cache_time').with_value(params[:token_cache_time]) is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles').with_value(params[:service_token_roles]) is_expected.to contain_cloudkitty_config('keystone_authtoken/service_token_roles_required').with_value(params[:service_token_roles_required]) is_expected.to contain_cloudkitty_config('keystone_authtoken/service_type').with_value(params[:service_type]) is_expected.to contain_cloudkitty_config('keystone_authtoken/interface').with_value(params[:interface]) it 'installs python memcache package' do is_expected.to contain_package('python-memcache') it_configures 'cloudkitty authtoken'",128,111
openstack%2Fopenstack-ansible~stable%2Fwallaby~I17a0a30127739c1d540000e8e817aae4e3c2686b,openstack/openstack-ansible,stable/wallaby,I17a0a30127739c1d540000e8e817aae4e3c2686b,Bump OpenStack-Ansible Wallaby,MERGED,2021-10-25 16:17:02.000000000,2021-10-28 14:27:21.000000000,2021-10-28 14:24:38.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 31542}]","[{'number': 1, 'created': '2021-10-25 16:17:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/b681fc40bdb911302f56605583720e03a203713d', 'message': 'Bump OpenStack-Ansible Wallaby\n\nChange-Id: I17a0a30127739c1d540000e8e817aae4e3c2686b\n'}, {'number': 2, 'created': '2021-10-26 09:54:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/a8999983bb0b94bc0a1007700f2bb7f495b6a5ff', 'message': 'Bump OpenStack-Ansible Wallaby\n\nChange-Id: I17a0a30127739c1d540000e8e817aae4e3c2686b\n'}, {'number': 3, 'created': '2021-10-26 11:30:45.000000000', 'files': ['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'ansible-role-requirements.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/1a03031f0e2266b9735a93bcf77bc603883dbdd8', 'message': 'Bump OpenStack-Ansible Wallaby\n\nCloses-Bug: #1948683\nChange-Id: I17a0a30127739c1d540000e8e817aae4e3c2686b\n'}]",0,815333,1a03031f0e2266b9735a93bcf77bc603883dbdd8,11,3,3,28619,,,0,"Bump OpenStack-Ansible Wallaby

Closes-Bug: #1948683
Change-Id: I17a0a30127739c1d540000e8e817aae4e3c2686b
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/33/815333/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'ansible-role-requirements.yml']",4,b681fc40bdb911302f56605583720e03a203713d,bump_osa, version: ca842d800b9d07d992b0457eb7596a58e610536e version: 00441b7108752683b0984c3ee427fb1d6c78c357 version: 78fcf28f2c7be772d16740e8154c21a78a19e775 version: bd399b80e9de12452f1bee620bc60a69c142bf40 version: 57c54e5268d9c09ab31b1357558cdcaa68116015 version: 904e55d56f82f36e3e9e9fbc5b3bd932a1151f7b version: 4271670a839ccd72f2a5b52e01feefa4d9ab383e shallow_since: '2021-10-20', version: 1180c38dc300d251e39b0717d6283c5a100ecbe4 version: d49c53dcf0c9e4b86ca3ff9ecb4ec7fa67f3b58c version: b5fe49d98601f62055365645df47ef1bae30ee74 version: 42f33d8cae55c7e6c361564010e0651703bc3ac5 version: b1fe667432e3076dd1075a670829550f22480030 version: 9e5a7d7fc8b72ad4aa73280a7638b0554cf20d5c version: c8841cdf4182b51edb7bcec1396e0ade472346af shallow_since: '2021-09-08',67,67
openstack%2Fpuppet-nova~stable%2Fwallaby~I21357822ae6113e484e94c6e6ab03976f40604eb,openstack/puppet-nova,stable/wallaby,I21357822ae6113e484e94c6e6ab03976f40604eb,Centralize arbitrary configurations for libvirt daemons,MERGED,2021-10-22 12:37:28.000000000,2021-10-28 14:16:29.000000000,2021-10-28 14:14:21.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 17216}, {'_account_id': 22348}, {'_account_id': 27419}]","[{'number': 1, 'created': '2021-10-22 12:37:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-nova/commit/c6691e0f6d37297632adace486ad8013317b1051', 'message': 'Centralize arbitrary configurations for libvirt daemons\n\nThis is a prep work to add support for separate libvirt daemons and\nmerge libvirt::config class and libvirtd::virtlogd::config class, so\nthat we can put arbitary configurations to the single config class\nlater.\n\nAlso change [1] which has unit tests for nova::compute::libvirt::config\nmanifests, is also squashed into this change.\n[1] I0c217a9a2e0641971d234cbb472567cecf9444e7\n\nChange-Id: I21357822ae6113e484e94c6e6ab03976f40604eb\n'}, {'number': 2, 'created': '2021-10-24 09:33:01.000000000', 'files': ['spec/classes/nova_compute_libvirt_config_spec.rb', 'manifests/compute/libvirt/config.pp', 'releasenotes/notes/virtlogd_config-1bcf0201932c2cb2.yaml', 'manifests/compute/libvirt/virtlogd/config.pp'], 'web_link': 'https://opendev.org/openstack/puppet-nova/commit/34e26a0e3fc6c101b6b95ad0eda4605854cee020', 'message': 'Centralize arbitrary configurations for libvirt daemons\n\nThis is a prep work to add support for separate libvirt daemons and\nmerge libvirt::config class and libvirtd::virtlogd::config class, so\nthat we can put arbitary configurations to the single config class\nlater.\n\nAlso change [1] which has unit tests for nova::compute::libvirt::config\nmanifests, is also squashed into this change.\n[1] I0c217a9a2e0641971d234cbb472567cecf9444e7\n\nChange-Id: I21357822ae6113e484e94c6e6ab03976f40604eb\n(cherry picked from commit d2aaab3683019a40bb8495f71c530657e198447b)\n'}]",2,815113,34e26a0e3fc6c101b6b95ad0eda4605854cee020,14,9,2,20733,,,0,"Centralize arbitrary configurations for libvirt daemons

This is a prep work to add support for separate libvirt daemons and
merge libvirt::config class and libvirtd::virtlogd::config class, so
that we can put arbitary configurations to the single config class
later.

Also change [1] which has unit tests for nova::compute::libvirt::config
manifests, is also squashed into this change.
[1] I0c217a9a2e0641971d234cbb472567cecf9444e7

Change-Id: I21357822ae6113e484e94c6e6ab03976f40604eb
(cherry picked from commit d2aaab3683019a40bb8495f71c530657e198447b)
",git fetch https://review.opendev.org/openstack/puppet-nova refs/changes/13/815113/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/nova_compute_libvirt_config_spec.rb', 'manifests/compute/libvirt/config.pp', 'releasenotes/notes/virtlogd_config-1bcf0201932c2cb2.yaml', 'manifests/compute/libvirt/virtlogd/config.pp']",4,c6691e0f6d37297632adace486ad8013317b1051,,# DEPRECATED !# (optional) Allow configuration of arbitrary virtlogd configurations. warning('The nova::compute::libvirt::virtlogd::config class has been deprecated. \ Use the nova::compute::libvirt::config::virtlogd_config parameter.') ,# (optional) Allow configuration of arbitrary libvirtd configurations.,65,1
openstack%2Fproject-config~master~I42ec24b97cd659604e39fc588a38a62284d50aed,openstack/project-config,master,I42ec24b97cd659604e39fc588a38a62284d50aed,Add siss under x namespace,MERGED,2021-10-21 10:04:22.000000000,2021-10-28 13:54:10.000000000,2021-10-28 13:32:51.000000000,"[{'_account_id': 5263}, {'_account_id': 13252}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-21 10:04:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/36c422d6b7f637be498eda5b654321edc73be741', 'message': 'Add siss under x namespace\n\nSimple IaaS/SDS Stack is a wrapper around multiple OpenStack, OpenDev, and\nother open source projects to deploy and mantain a simplified Software Defined\nDataCenter stack.\n\nSigned-off-by: Ettore Simone <ettore.simone@gmail.com>\nChange-Id: I42ec24b97cd659604e39fc588a38a62284d50aed\n'}, {'number': 2, 'created': '2021-10-21 10:13:07.000000000', 'files': ['gerrit/acls/x/siss.config', 'zuul/main.yaml', 'gerrit/projects.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/00d5188c060c59e33c79e7cc47f3c877b5ccd6f0', 'message': 'Add siss under x namespace\n\nSimple IaaS/SDS Stack is a wrapper around multiple OpenStack, OpenDev,\nand other open source projects to deploy and mantain a simplified\nSoftware Defined DataCenter stack.\n\nSigned-off-by: Ettore Simone <ettore.simone@gmail.com>\nChange-Id: I42ec24b97cd659604e39fc588a38a62284d50aed\n'}]",1,814890,00d5188c060c59e33c79e7cc47f3c877b5ccd6f0,11,3,2,12188,,,0,"Add siss under x namespace

Simple IaaS/SDS Stack is a wrapper around multiple OpenStack, OpenDev,
and other open source projects to deploy and mantain a simplified
Software Defined DataCenter stack.

Signed-off-by: Ettore Simone <ettore.simone@gmail.com>
Change-Id: I42ec24b97cd659604e39fc588a38a62284d50aed
",git fetch https://review.opendev.org/openstack/project-config refs/changes/90/814890/1 && git format-patch -1 --stdout FETCH_HEAD,"['gerrit/acls/x/siss.config', 'gerrit/projects.yaml', 'zuul/main.yaml']",3,36c422d6b7f637be498eda5b654321edc73be741,new-project, - x/siss,,18,0
openstack%2Fpuppet-tempest~master~Ibf247abff387d8844f6ed1ce39d85edae0fe770f,openstack/puppet-tempest,master,Ibf247abff387d8844f6ed1ce39d85edae0fe770f,Add support for [auth] admin_system,MERGED,2021-10-19 16:33:48.000000000,2021-10-28 13:38:53.000000000,2021-10-28 13:36:43.000000000,"[{'_account_id': 9414}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-19 16:33:48.000000000', 'files': ['manifests/init.pp', 'releasenotes/notes/admin_system-6845c3b434b96b0a.yaml', 'spec/classes/tempest_init_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tempest/commit/489f2198a3693766dc32e88b03e9ea0828a6f758', 'message': 'Add support for [auth] admin_system\n\n... which is required to run tests with SRBAC enforced.\n\nChange-Id: Ibf247abff387d8844f6ed1ce39d85edae0fe770f\n'}]",1,814609,489f2198a3693766dc32e88b03e9ea0828a6f758,12,3,1,9816,,,0,"Add support for [auth] admin_system

... which is required to run tests with SRBAC enforced.

Change-Id: Ibf247abff387d8844f6ed1ce39d85edae0fe770f
",git fetch https://review.opendev.org/openstack/puppet-tempest refs/changes/09/814609/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/init.pp', 'releasenotes/notes/admin_system-6845c3b434b96b0a.yaml', 'spec/classes/tempest_init_spec.rb']",3,489f2198a3693766dc32e88b03e9ea0828a6f758,system-scope-creds, is_expected.to contain_tempest_config('auth/admin_system').with(:value => '<SERVICE DEFAULT>'),,9,0
openstack%2Ftripleo-ci-health-queries~master~Ie25b0569a557f200a752241dd268f8321f9bdeca,openstack/tripleo-ci-health-queries,master,Ie25b0569a557f200a752241dd268f8321f9bdeca,New query for c9 sc001,MERGED,2021-10-28 10:56:27.000000000,2021-10-28 13:29:19.000000000,2021-10-28 12:12:09.000000000,"[{'_account_id': 9976}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-28 10:56:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci-health-queries/commit/24345ae983d5a7345b45340010aec30e0b16adf0', 'message': 'New query for c9 sc001\n\nNew query for c9 sc001 - No key/value pairs provided, at least one is required for this action to succeed\n\nChange-Id: Ie25b0569a557f200a752241dd268f8321f9bdeca\n'}, {'number': 2, 'created': '2021-10-28 11:19:40.000000000', 'files': ['output/sova-pattern-generated.json', 'output/elastic-recheck/1949033.yaml', 'src/data/queries.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci-health-queries/commit/37f39f7c4a0c28e46c7dcedf4109310f29a30218', 'message': 'New query for c9 sc001\n\nNew query for c9 sc001 - No key/value pairs provided, at least one is required for this action to succeed\n\nChange-Id: Ie25b0569a557f200a752241dd268f8321f9bdeca\n'}]",2,815823,37f39f7c4a0c28e46c7dcedf4109310f29a30218,10,2,2,32458,,,0,"New query for c9 sc001

New query for c9 sc001 - No key/value pairs provided, at least one is required for this action to succeed

Change-Id: Ie25b0569a557f200a752241dd268f8321f9bdeca
",git fetch https://review.opendev.org/openstack/tripleo-ci-health-queries refs/changes/23/815823/1 && git format-patch -1 --stdout FETCH_HEAD,"['output/sova-pattern-generated.json', 'output/elastic-recheck/1949033.yaml', 'src/data/queries.yml']",3,24345ae983d5a7345b45340010aec30e0b16adf0,," - error_type: code id: no keypair msg: ""No key/value pairs provided"" logstash: 'message:""No key/value pairs provided"" AND build_name:""periodic-tripleo-ci-centos-9-scenario004-standalone-master""' regex: - ""No key/value pairs provided, at least one is required for this action to succeed"" sova_tag: console url: https://bugs.launchpad.net/tripleo/+bug/1949033",,25,0
openstack%2Fpuppet-tempest~master~I9824290beaa4bd88d1a78e72e26ea66c25db4693,openstack/puppet-tempest,master,I9824290beaa4bd88d1a78e72e26ea66c25db4693,Support more *_domain_name options,MERGED,2021-10-19 16:27:37.000000000,2021-10-28 13:17:17.000000000,2021-10-28 13:15:09.000000000,"[{'_account_id': 9414}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-19 16:27:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tempest/commit/f1e53486ebd84e90520b05d11a42955622267c63', 'message': 'Support more *_domain_name options\n\nChange-Id: I9824290beaa4bd88d1a78e72e26ea66c25db4693\n'}, {'number': 2, 'created': '2021-10-19 16:30:58.000000000', 'files': ['manifests/init.pp', 'releasenotes/notes/more-domain-opts-18bc20a84df84324.yaml', 'spec/classes/tempest_init_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tempest/commit/c18ef504cec69b8d1fb71d6a6f1932b8b0f9afe1', 'message': 'Support more *_domain_name options\n\nChange-Id: I9824290beaa4bd88d1a78e72e26ea66c25db4693\n'}]",1,814608,c18ef504cec69b8d1fb71d6a6f1932b8b0f9afe1,13,3,2,9816,,,0,"Support more *_domain_name options

Change-Id: I9824290beaa4bd88d1a78e72e26ea66c25db4693
",git fetch https://review.opendev.org/openstack/puppet-tempest refs/changes/08/814608/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/admin-more-domain-params-ab272b53be19b5bd.yaml', 'manifests/init.pp', 'spec/classes/tempest_init_spec.rb']",3,f1e53486ebd84e90520b05d11a42955622267c63,, is_expected.to contain_tempest_config('auth/admin_project_domain_name').with(:value => '<SERVICE DEFAULT>') is_expected.to contain_tempest_config('auth/admin_user_domain_name').with(:value => '<SERVICE DEFAULT>'),,17,0
openstack%2Fpuppet-tempest~master~I854b2a532a73ac31bda1f0f195be2c76f88a61f3,openstack/puppet-tempest,master,I854b2a532a73ac31bda1f0f195be2c76f88a61f3,Do not override default of [auth] admin_domain_name,MERGED,2021-10-19 16:23:00.000000000,2021-10-28 13:07:16.000000000,2021-10-28 13:07:16.000000000,"[{'_account_id': 9414}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-19 16:23:00.000000000', 'files': ['manifests/init.pp', 'spec/classes/tempest_init_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tempest/commit/9a09e7c2c8bc11f0410e29f3386641cf6a745049', 'message': ""Do not override default of [auth] admin_domain_name\n\nCurrently the [auth] admin_domain_name parmaeter defaults to ''\n(an empty value) unless the admin_domain_name parameter is defined.\nHowever tempest defines its own service default(which is 'Default') and\noverriding the default in puppet layer adds undesired requirement to\nset the parameter.\n\nThis change removes that override in puppet-tempest and let users\nrely on the service default.\n\nChange-Id: I854b2a532a73ac31bda1f0f195be2c76f88a61f3\n""}]",1,814607,9a09e7c2c8bc11f0410e29f3386641cf6a745049,11,3,1,9816,,,0,"Do not override default of [auth] admin_domain_name

Currently the [auth] admin_domain_name parmaeter defaults to ''
(an empty value) unless the admin_domain_name parameter is defined.
However tempest defines its own service default(which is 'Default') and
overriding the default in puppet layer adds undesired requirement to
set the parameter.

This change removes that override in puppet-tempest and let users
rely on the service default.

Change-Id: I854b2a532a73ac31bda1f0f195be2c76f88a61f3
",git fetch https://review.opendev.org/openstack/puppet-tempest refs/changes/07/814607/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/init.pp', 'spec/classes/tempest_init_spec.rb']",2,9a09e7c2c8bc11f0410e29f3386641cf6a745049,, is_expected.to contain_tempest_config('auth/admin_domain_name').with(:value => '<SERVICE DEFAULT>'), is_expected.to contain_tempest_config('auth/admin_domain_name').with(:value => nil),3,3
openstack%2Fansible-role-pki~master~I1cc9f1938082a1dfe4b9ac55fd776b0ce7915efd,openstack/ansible-role-pki,master,I1cc9f1938082a1dfe4b9ac55fd776b0ce7915efd,Add support for setting extended key usage,MERGED,2021-10-21 14:05:37.000000000,2021-10-28 12:28:54.000000000,2021-10-28 12:27:08.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2021-10-21 14:05:37.000000000', 'files': ['tasks/standalone/create_ca.yml', 'tasks/main_ca_install.yml', 'defaults/main.yml', 'tasks/standalone/install_ca.yml', 'tasks/standalone/create_cert.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/3c9afb94cfbe4fe0c7ec89575b12b75836376dbc', 'message': 'Add support for setting extended key usage\n\nThis will be useful when you need to create a client certificate\nfor use with TLS live migration in NOva for example.\nAlso includes some linting fixes.\n\nChange-Id: I1cc9f1938082a1dfe4b9ac55fd776b0ce7915efd\n'}]",0,815007,3c9afb94cfbe4fe0c7ec89575b12b75836376dbc,8,3,1,31749,,,0,"Add support for setting extended key usage

This will be useful when you need to create a client certificate
for use with TLS live migration in NOva for example.
Also includes some linting fixes.

Change-Id: I1cc9f1938082a1dfe4b9ac55fd776b0ce7915efd
",git fetch https://review.opendev.org/openstack/ansible-role-pki refs/changes/07/815007/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/standalone/create_ca.yml', 'tasks/main_ca_install.yml', 'defaults/main.yml', 'tasks/standalone/install_ca.yml', 'tasks/standalone/create_cert.yml']",5,3c9afb94cfbe4fe0c7ec89575b12b75836376dbc,tls-migration," extended_key_usage: ""{{ cert.extended_key_usage | default(omit) }}"" creates: ""{{ _cert_chain_file }}"" "," creates: ""{{ _cert_chain_file }}""",5,5
openstack%2Fironic-python-agent~stable%2Fxena~I84f8021f731186d82e44ac3d4ef2d12df13f830a,openstack/ironic-python-agent,stable/xena,I84f8021f731186d82e44ac3d4ef2d12df13f830a,Respect global parameters when downloading a configdrive,MERGED,2021-10-27 08:51:38.000000000,2021-10-28 12:08:09.000000000,2021-10-28 12:05:56.000000000,"[{'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-10-27 08:51:38.000000000', 'files': ['releasenotes/notes/configdrive-ssl-02b069948dfef814.yaml', 'ironic_python_agent/tests/unit/test_partition_utils.py', 'ironic_python_agent/partition_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/442fc43830d9b2e87595d861e0c0c78a80e5f05c', 'message': 'Respect global parameters when downloading a configdrive\n\n* Use the same TLS parameters as everything else\n* Respect image_download_connection_timeout\n* Do not ignore HTTP errors\n\nChange-Id: I84f8021f731186d82e44ac3d4ef2d12df13f830a\n(cherry picked from commit 8a66978666ca207d8abf203d7dbde6bc69f6433d)\n'}]",1,815448,442fc43830d9b2e87595d861e0c0c78a80e5f05c,9,2,1,10239,,,0,"Respect global parameters when downloading a configdrive

* Use the same TLS parameters as everything else
* Respect image_download_connection_timeout
* Do not ignore HTTP errors

Change-Id: I84f8021f731186d82e44ac3d4ef2d12df13f830a
(cherry picked from commit 8a66978666ca207d8abf203d7dbde6bc69f6433d)
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/48/815448/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/tests/unit/test_partition_utils.py', 'releasenotes/notes/configdrive-ssl-02b069948dfef814.yaml', 'ironic_python_agent/partition_utils.py']",3,442fc43830d9b2e87595d861e0c0c78a80e5f05c,configdrive-ssl-stable/xena,"from oslo_config import cfgfrom ironic_python_agent import utils as ipa_utils CONF = cfg.CONF verify, cert = ipa_utils.get_ssl_client_options(CONF) timeout = CONF.image_download_connection_timeout # TODO(dtantsur): support proxy parameters from instance_info try: resp = requests.get(configdrive, verify=verify, cert=cert, timeout=timeout) if resp.status_code >= 400: raise exception.InstanceDeployFailure( ""Can't download the configdrive content for node %(node)s "" ""from '%(url)s'. Got status code %(code)s, response "" ""body %(body)s"" % {'node': node_uuid, 'url': configdrive, 'code': resp.status_code, 'body': resp.text}) data = resp.content", try: data = requests.get(configdrive).content,90,7
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I1c904d2f09e4679e50713d344abdff4fd830132a,openstack/tripleo-heat-templates,stable/wallaby,I1c904d2f09e4679e50713d344abdff4fd830132a,Remove network_virtual_ips hard-coded name filter,MERGED,2021-10-23 19:48:12.000000000,2021-10-28 11:56:49.000000000,2021-10-28 11:56:49.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-23 19:48:12.000000000', 'files': ['common/deploy-steps.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/570b4718622af5592ca4b1a5bace31ea80b22769', 'message': 'Remove network_virtual_ips hard-coded name filter\n\nRemove the filtering of network_virtual_ips based on\nthe hard-coded network names. The depends-on does similar\nfiltering by using the service_net_map instead.\n\nThis should allow better support for custom network names,\ncustom ServiceNetMap and use of service_net_map_replace in\nnetwork data.\n\nRelated-Bug: #1946239\nDepends-On: I9c5d681c266db1e5048a1be6557c20abd5a07f7b\nChange-Id: I1c904d2f09e4679e50713d344abdff4fd830132a\n(cherry picked from commit 9e30f281fba7f108ad1eff37b721d2b1ac9a2cc9)\n'}]",0,814946,570b4718622af5592ca4b1a5bace31ea80b22769,10,4,1,24245,,,0,"Remove network_virtual_ips hard-coded name filter

Remove the filtering of network_virtual_ips based on
the hard-coded network names. The depends-on does similar
filtering by using the service_net_map instead.

This should allow better support for custom network names,
custom ServiceNetMap and use of service_net_map_replace in
network data.

Related-Bug: #1946239
Depends-On: I9c5d681c266db1e5048a1be6557c20abd5a07f7b
Change-Id: I1c904d2f09e4679e50713d344abdff4fd830132a
(cherry picked from commit 9e30f281fba7f108ad1eff37b721d2b1ac9a2cc9)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/46/814946/1 && git format-patch -1 --stdout FETCH_HEAD,['common/deploy-steps.j2'],1,570b4718622af5592ca4b1a5bace31ea80b22769,bug/1946239,,"# External virtual ip is currently being handled separately as public_virtual_ip. # Likewise, optional StorageNFS virtual ip is handled separately as ganesha_vip. {%- if network.name != 'External' and network.name != 'StorageNFS' %}{%- endif %}",0,4
openstack%2Fkuryr-kubernetes~stable%2Fwallaby~Ia0a9ae82c46a43a64c916194a272f0a85618fa34,openstack/kuryr-kubernetes,stable/wallaby,Ia0a9ae82c46a43a64c916194a272f0a85618fa34,Remove ep_slices from klb on endpoint delete event,MERGED,2021-10-25 09:09:53.000000000,2021-10-28 11:54:57.000000000,2021-10-28 11:52:30.000000000,"[{'_account_id': 11600}, {'_account_id': 13692}, {'_account_id': 19521}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-25 09:09:53.000000000', 'files': ['kuryr_kubernetes/controller/handlers/lbaas.py', 'kuryr_kubernetes/tests/unit/controller/handlers/test_lbaas.py', 'kuryr_kubernetes/utils.py', 'kuryr_kubernetes/tests/unit/test_utils.py'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/0dbb151a24c39401318bbdc01c5b42db8770a32c', 'message': 'Remove ep_slices from klb on endpoint delete event\n\nCloses-Bug: 1939512\n\nChange-Id: Ia0a9ae82c46a43a64c916194a272f0a85618fa34\n(cherry picked from commit 164095b0e71bdb3712494e060ad880b9560c87aa)\n'}]",3,815233,0dbb151a24c39401318bbdc01c5b42db8770a32c,16,4,1,27032,,,0,"Remove ep_slices from klb on endpoint delete event

Closes-Bug: 1939512

Change-Id: Ia0a9ae82c46a43a64c916194a272f0a85618fa34
(cherry picked from commit 164095b0e71bdb3712494e060ad880b9560c87aa)
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/33/815233/1 && git format-patch -1 --stdout FETCH_HEAD,"['kuryr_kubernetes/controller/handlers/lbaas.py', 'kuryr_kubernetes/tests/unit/controller/handlers/test_lbaas.py', 'kuryr_kubernetes/utils.py', 'kuryr_kubernetes/tests/unit/test_utils.py']",4,0dbb151a24c39401318bbdc01c5b42db8770a32c,remove-klb-ep_slices-on-ep-removal-stable/wallaby," def test_get_klb_crd_path(self): res = {'apiVersion': 'v1', 'kind': 'Endpoints', 'metadata': {'name': 'my-service', 'namespace': 'default'}} self.assertEqual(utils.get_klb_crd_path(res), '/apis/openstack.org/v1/namespaces/default/' 'kuryrloadbalancers/my-service') ",,143,0
openstack%2Fpuppet-keystone~master~I995af560b286f576af1371020ae867025e9da460,openstack/puppet-keystone,master,I995af560b286f576af1371020ae867025e9da460,DNM: Debugging unit test failures,ABANDONED,2021-10-28 02:48:33.000000000,2021-10-28 11:52:33.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-28 02:48:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/8467b73f3a1e55ab9b6c7dbedd83033781bf6cf6', 'message': 'DNM: Debugging unit test failures\n\nChange-Id: I995af560b286f576af1371020ae867025e9da460\n'}, {'number': 2, 'created': '2021-10-28 04:10:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/af5a8a895b32e6027686946af9f2f13241a6a3e1', 'message': 'DNM: Debugging unit test failures\n\nChange-Id: I995af560b286f576af1371020ae867025e9da460\n'}, {'number': 3, 'created': '2021-10-28 10:43:22.000000000', 'files': ['spec/unit/provider/keystone_user/openstack_spec.rb', 'spec/unit/provider/keystone_endpoint/openstack_spec.rb', 'spec/unit/provider/keystone_service/openstack_spec.rb', 'spec/unit/provider/keystone_identity_provider/openstack_spec.rb', 'spec/unit/provider/keystone_tenant/openstack_spec.rb', 'spec/unit/provider/keystone_role/openstack_spec.rb', 'spec/unit/provider/keystone_user_role/openstack_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-keystone/commit/066742b4bd13f72d820284d11ed0efa732868fab', 'message': 'DNM: Debugging unit test failures\n\nChange-Id: I995af560b286f576af1371020ae867025e9da460\n'}]",0,815770,066742b4bd13f72d820284d11ed0efa732868fab,7,1,3,9816,,,0,"DNM: Debugging unit test failures

Change-Id: I995af560b286f576af1371020ae867025e9da460
",git fetch https://review.opendev.org/openstack/puppet-keystone refs/changes/70/815770/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/unit/provider/keystone_endpoint/openstack_spec.rb', 'spec/unit/provider/keystone_user/openstack_spec.rb', 'spec/unit/provider/keystone_identity_provider/openstack_spec.rb', 'spec/unit/provider/keystone_service/openstack_spec.rb', 'spec/unit/provider/keystone_tenant/openstack_spec.rb', 'spec/unit/provider/keystone_role/openstack_spec.rb', 'spec/unit/provider/keystone_user_role/openstack_spec.rb']",7,8467b73f3a1e55ab9b6c7dbedd83033781bf6cf6,system-scope-creds,,"require 'puppet' require 'spec_helper' require 'puppet/provider/keystone_user_role/openstack' setup_provider_tests describe Puppet::Type.type(:keystone_user_role).provider(:openstack) do let(:set_env) do ENV['OS_USERNAME'] = 'test' ENV['OS_PASSWORD'] = 'abc123' ENV['OS_SYSTEM_SCOPE'] = 'all' ENV['OS_AUTH_URL'] = 'http://127.0.0.1:5000' end before(:each) { set_env } after(:each) { described_class.reset } describe 'when managing a user\'s role' do let(:resource_attrs) do { :title => 'user1::domain1@project1::domain1', :ensure => 'present', :roles => %w(role1 role2) } end let(:resource) do Puppet::Type::Keystone_user_role.new(resource_attrs) end let(:provider) do described_class.new(resource) end describe '#create' do before(:each) do described_class.expects(:openstack) .with('role assignment', 'list', '--quiet', '--format', 'csv', ['--names', '--project', 'project1_id', '--user', 'user1_id']) .returns('""ID"",""Name"",""Project"",""User"" ""role1_id"",""role1"",""project1"",""user1"" ""role2_id"",""role2"",""project1"",""user1"" ') described_class.expects(:openstack) .with('role', 'add', ['role1', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('role', 'add', ['role2', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('project', 'show', '--format', 'shell', ['project1', '--domain', 'domain1']) .returns('name=""project1"" id=""project1_id"" ') described_class.expects(:openstack) .with('user', 'show', '--format', 'shell', ['user1', '--domain', 'domain1']) .returns('name=""user1"" id=""user1_id"" ') end include_examples 'create the correct resource', [ { 'expected_results' => {} }, { 'all in the title' => { :title => 'user1::domain1@project1::domain1', :ensure => 'present', :roles => %w(role1 role2) } }, { 'user complete and project in the params' => { :title => 'user1::domain1@project1', :ensure => 'present', :project_domain => 'domain1', :roles => %w(role1 role2) } }, { 'user and project in the params' => { :title => 'user1@project1', :ensure => 'present', :project_domain => 'domain1', :user_domain => 'domain1', :roles => %w(role1 role2) } }, { 'project complet and user in the params' => { :title => 'user1@project1::domain1', :ensure => 'present', :user_domain => 'domain1', :roles => %w(role1 role2) } } ] end describe '#destroy' do it 'removes all the roles from a user' do provider.instance_variable_get('@property_hash')[:roles] = ['role1', 'role2'] described_class.expects(:openstack) .with('role', 'remove', ['role1', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('role', 'remove', ['role2', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('project', 'show', '--format', 'shell', ['project1', '--domain', 'domain1']) .returns('name=""project1"" id=""project1_id"" ') described_class.expects(:openstack) .with('user', 'show', '--format', 'shell', ['user1', '--domain', 'domain1']) .returns('name=""user1"" id=""user1_id"" ') described_class.expects(:openstack) .with('role assignment', 'list', '--quiet', '--format', 'csv', ['--names', '--project', 'project1_id', '--user', 'user1_id']) .returns('""ID"",""Name"",""Project"",""User"" ') provider.destroy expect(provider.exists?).to be_falsey end end describe '#exists' do subject(:response) do described_class.expects(:openstack) .with('role assignment', 'list', '--quiet', '--format', 'csv', ['--names', '--project', 'project1_id', '--user', 'user1_id']) .returns('""ID"",""Name"",""Project"",""User"" ""role1_id"",""role1"",""project1"",""user1"" ""role2_id"",""role2"",""project1"",""user1"" ') described_class.expects(:openstack) .with('project', 'show', '--format', 'shell', ['project1', '--domain', 'domain1']) .returns('name=""project1"" id=""project1_id"" ') described_class.expects(:openstack) .with('user', 'show', '--format', 'shell', ['user1', '--domain', 'domain1']) .returns('name=""user1"" id=""user1_id"" ') provider.exists? end it { is_expected.to be_truthy } end describe '#roles=' do let(:resource_attrs) do { :title => 'user_one@project_one', :ensure => 'present', :roles => %w(one two) } end it 'applies new roles' do provider.expects(:roles).returns(%w(role_one role_two)) described_class.expects(:openstack) .with('role', 'remove', ['role_one', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('role', 'remove', ['role_two', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('role', 'add', ['one', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('role', 'add', ['two', '--project', 'project1_id', '--user', 'user1_id']) described_class.expects(:openstack) .with('project', 'show', '--format', 'shell', ['project_one', '--domain', 'Default']) .returns('name=""project_one"" id=""project1_id"" ') described_class.expects(:openstack) .with('user', 'show', '--format', 'shell', ['user_one', '--domain', 'Default']) .returns('name=""role_one"" id=""user1_id"" ') provider.roles = %w(one two) end end context 'different name, identical resource' do let(:resources) do [ Puppet::Type.type(:keystone_user_role) .new(:title => 'user::domain_user@project::domain_project', :ensure => :present), Puppet::Type.type(:keystone_user_role) .new(:title => 'user@project', :user_domain => 'domain_user', :project_domain => 'domain_project', :ensure => :present) ] end include_examples 'detect duplicate resource' end end end ",0,1764
openstack%2Fkayobe~stable%2Fwallaby~I478d6304c3f8d207bc7062a0909147a169003027,openstack/kayobe,stable/wallaby,I478d6304c3f8d207bc7062a0909147a169003027,CI: enable DNF tests on CentOS Stream 8,MERGED,2021-10-20 15:14:08.000000000,2021-10-28 11:51:15.000000000,2021-10-28 11:48:51.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-20 15:14:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/4fbbc75b79a9eea9db85d867be883524cf884948', 'message': 'CI: enable DNF tests on CentOS Stream 8\n\nThese were inadvertently skipped following the move to CentOS Stream,\ndue to matching the distro name on CentOS Linux.\n\nBackport to Victoria.\n\nChange-Id: I478d6304c3f8d207bc7062a0909147a169003027\n(cherry picked from commit 6a69a4f4db9f66978d9b593b0f510b1046fa969b)\n'}, {'number': 2, 'created': '2021-10-21 20:53:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b505aab3234190376a8737dd842b5ce06bd322ec', 'message': 'CI: enable DNF tests on CentOS Stream 8\n\nThese were inadvertently skipped following the move to CentOS Stream,\ndue to matching the distro name on CentOS Linux.\n\nBackport to Victoria.\n\nChange-Id: I478d6304c3f8d207bc7062a0909147a169003027\n(cherry picked from commit 6a69a4f4db9f66978d9b593b0f510b1046fa969b)\n'}, {'number': 3, 'created': '2021-10-22 07:56:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/5d64e0c1d7b12c05de28c6e292c2c4e76861cc72', 'message': 'CI: enable DNF tests on CentOS Stream 8\n\nThese were inadvertently skipped following the move to CentOS Stream,\ndue to matching the distro name on CentOS Linux.\n\nBackport to Victoria.\n\nChange-Id: I478d6304c3f8d207bc7062a0909147a169003027\n(cherry picked from commit 6a69a4f4db9f66978d9b593b0f510b1046fa969b)\n'}, {'number': 4, 'created': '2021-10-27 09:45:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b1174b85cbc984e45826aff5213a46a4c2adbc10', 'message': 'CI: enable DNF tests on CentOS Stream 8\n\nThese were inadvertently skipped following the move to CentOS Stream,\ndue to matching the distro name on CentOS Linux.\n\nBackport to Victoria.\n\nChange-Id: I478d6304c3f8d207bc7062a0909147a169003027\n(cherry picked from commit 6a69a4f4db9f66978d9b593b0f510b1046fa969b)\n'}, {'number': 5, 'created': '2021-10-28 08:07:35.000000000', 'files': ['playbooks/kayobe-overcloud-host-configure-base/tests/test_overcloud_host_configure.py'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/fb86cd16dba16bb09f335c0025c19e24572570f9', 'message': 'CI: enable DNF tests on CentOS Stream 8\n\nThese were inadvertently skipped following the move to CentOS Stream,\ndue to matching the distro name on CentOS Linux.\n\nBackport to Victoria.\n\nChange-Id: I478d6304c3f8d207bc7062a0909147a169003027\n(cherry picked from commit 6a69a4f4db9f66978d9b593b0f510b1046fa969b)\n'}]",2,814752,fb86cd16dba16bb09f335c0025c19e24572570f9,26,3,5,15197,,,0,"CI: enable DNF tests on CentOS Stream 8

These were inadvertently skipped following the move to CentOS Stream,
due to matching the distro name on CentOS Linux.

Backport to Victoria.

Change-Id: I478d6304c3f8d207bc7062a0909147a169003027
(cherry picked from commit 6a69a4f4db9f66978d9b593b0f510b1046fa969b)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/52/814752/4 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/kayobe-overcloud-host-configure-base/tests/test_overcloud_host_configure.py'],1,4fbbc75b79a9eea9db85d867be883524cf884948,, return info[0].startswith('CentOS') and info[1].startswith('8'), return info[0] == 'CentOS Linux' and info[1].startswith('8'),1,1
openstack%2Ftripleo-ansible~stable%2Fwallaby~I9c5d681c266db1e5048a1be6557c20abd5a07f7b,openstack/tripleo-ansible,stable/wallaby,I9c5d681c266db1e5048a1be6557c20abd5a07f7b,Filter network_virtual_ips using service_net_map,MERGED,2021-10-23 19:36:55.000000000,2021-10-28 11:17:53.000000000,2021-10-28 11:17:53.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-23 19:36:55.000000000', 'files': ['tripleo_ansible/roles/tripleo_hieradata/templates/vip_data.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/24ce46ad53d8ee77de225383ef2eb6b67608fcda', 'message': 'Filter network_virtual_ips using service_net_map\n\nInstead of filtering on hard-coded network names in\nTHT/common/deploy-steps.j2:415 filter on the service_net_map\nin tripleo_hieradata.\n\nThis allows us to remove the conditions based on hard-coded\nnetwork names in: THT/common/deploy-steps.j2:415\n\nRelated-Bug: #1946239\nChange-Id: I9c5d681c266db1e5048a1be6557c20abd5a07f7b\n(cherry picked from commit 362a54363f6b6b9beb923588ffbb94f3fa140e6f)\n'}]",0,815204,24ce46ad53d8ee77de225383ef2eb6b67608fcda,8,4,1,24245,,,0,"Filter network_virtual_ips using service_net_map

Instead of filtering on hard-coded network names in
THT/common/deploy-steps.j2:415 filter on the service_net_map
in tripleo_hieradata.

This allows us to remove the conditions based on hard-coded
network names in: THT/common/deploy-steps.j2:415

Related-Bug: #1946239
Change-Id: I9c5d681c266db1e5048a1be6557c20abd5a07f7b
(cherry picked from commit 362a54363f6b6b9beb923588ffbb94f3fa140e6f)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/04/815204/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_hieradata/templates/vip_data.j2'],1,24ce46ad53d8ee77de225383ef2eb6b67608fcda,bug/1946239,"{# Exclude networks in network_virtual_ips based on service_net_map #} {# External virtual ip is currently being handled separately as public_virtual_ip. #} {# Likewise, optional StorageNFS virtual ip is handled separately as ganesha_vip. #} {% set _network_virtual_ips = {} %} {% for key, value in network_virtual_ips.items() %} {% if key not in [service_net_map['public_network'], service_net_map['ganesha_network']] %} {% set _ = _network_virtual_ips.update({key: value}) %} {% endif %} {% endfor %}{% set _ = vip_data.__setitem__('network_virtual_ips', _network_virtual_ips) %}","{% set _ = vip_data.__setitem__('network_virtual_ips', network_virtual_ips) %}",11,1
openstack%2Ftripleo-ansible~stable%2Fwallaby~Iaba927739f82253809b1f0a1c96b9ac98a005ed6,openstack/tripleo-ansible,stable/wallaby,Iaba927739f82253809b1f0a1c96b9ac98a005ed6,Use service_net_map for internal_api_vip,MERGED,2021-10-23 19:36:55.000000000,2021-10-28 11:17:51.000000000,2021-10-28 11:17:51.000000000,"[{'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-23 19:36:55.000000000', 'files': ['tripleo_ansible/roles/tripleo_hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo_hieradata/templates/vip_data.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9845747aca3db89a69eea5e3ee2488bb225f8eca', 'message': ""Use service_net_map for internal_api_vip\n\nUse the internal_api_network entry in service_net_map for\ninternal_api_virtual_ip instead of conditions on hard-coded\nnetwork name 'InternalApi'.\n\nAlso clean up indentation for public_virtual_ip.\n\nRelated-Bug: #1946239\nDepends-On: I1dcd9da59487bfa0842c5f131a0e9a9d9d0c676d\nChange-Id: Iaba927739f82253809b1f0a1c96b9ac98a005ed6\n(cherry picked from commit abbfc7f2aa119caff021944a78bd7b6fd6c97152)\n""}]",0,815203,9845747aca3db89a69eea5e3ee2488bb225f8eca,8,4,1,24245,,,0,"Use service_net_map for internal_api_vip

Use the internal_api_network entry in service_net_map for
internal_api_virtual_ip instead of conditions on hard-coded
network name 'InternalApi'.

Also clean up indentation for public_virtual_ip.

Related-Bug: #1946239
Depends-On: I1dcd9da59487bfa0842c5f131a0e9a9d9d0c676d
Change-Id: Iaba927739f82253809b1f0a1c96b9ac98a005ed6
(cherry picked from commit abbfc7f2aa119caff021944a78bd7b6fd6c97152)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/03/815203/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo_hieradata/templates/vip_data.j2']",2,9845747aca3db89a69eea5e3ee2488bb225f8eca,bug/1946239,"{% set _ = vip_data.__setitem__('public_virtual_ip', (net_vip_map[service_net_map['public_network']])) %}{% set _ = vip_data.__setitem__('internal_api_virtual_ip', (net_vip_map[service_net_map['internal_api_network']])) %}","{% set _ = vip_data.__setitem__('public_virtual_ip', (net_vip_map[service_net_map['public_network']])) %} {% if 'InternalApi' in enabled_networks %}{% set _ = vip_data.__setitem__('internal_api_virtual_ip', (net_vip_map[networks['InternalApi']['name_lower']])) %} {% endif %}",3,4
openstack%2Fneutron~stable%2Fussuri~Ifd686d7ff452abd1226fbbc97f499e05102e4596,openstack/neutron,stable/ussuri,Ifd686d7ff452abd1226fbbc97f499e05102e4596,Fix OVN migration workload creation order,MERGED,2021-10-27 10:46:33.000000000,2021-10-28 11:17:01.000000000,2021-10-28 11:11:39.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 19118}, {'_account_id': 22348}, {'_account_id': 29350}]","[{'number': 1, 'created': '2021-10-27 10:46:33.000000000', 'files': ['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'], 'web_link': 'https://opendev.org/openstack/neutron/commit/a805f175aef2fb190c2c2362c360a81458e7094c', 'message': 'Fix OVN migration workload creation order\n\nCurrently workload VMs start before subnet is connected to router.\nWhen DVR is enabled this causes sometimes that one of the VMs is not\nable to get metadata.\n\nCloses bug: #1947547\n\nChange-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596\n(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)\n'}]",0,815618,a805f175aef2fb190c2c2362c360a81458e7094c,11,5,1,6773,,,0,"Fix OVN migration workload creation order

Currently workload VMs start before subnet is connected to router.
When DVR is enabled this causes sometimes that one of the VMs is not
able to get metadata.

Closes bug: #1947547

Change-Id: Ifd686d7ff452abd1226fbbc97f499e05102e4596
(cherry picked from commit d49ce1652d31fb884285ed30e39ec10ef40c864d)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/18/815618/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/ovn_migration/tripleo_environment/playbooks/roles/resources/create/templates/create-resources.sh.j2'],1,a805f175aef2fb190c2c2362c360a81458e7094c,,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,openstack port create --network ovn-migration-net-{{ resource_suffix }} --security-group ovn-migration-sg-{{ resource_suffix }} ovn-migration-server-port-{{ resource_suffix }} openstack server create --flavor ovn-migration-{{ resource_suffix }} --image $image_name \ --key-name ovn-migration-{{ resource_suffix }} \ --nic port-id=ovn-migration-server-port-{{ resource_suffix }} ovn-migration-server-{{ resource_suffix }} ,6,6
openstack%2Fneutron~stable%2Fussuri~Id84bf17953527c415d611bfc198038fb6f811de3,openstack/neutron,stable/ussuri,Id84bf17953527c415d611bfc198038fb6f811de3,[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint,MERGED,2021-10-21 09:08:48.000000000,2021-10-28 11:14:21.000000000,2021-10-28 11:11:36.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}]","[{'number': 1, 'created': '2021-10-21 09:08:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d60319dd85fbc9892b14ed9bdba939e1786cfd5b', 'message': ""[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint\n\nThe MAC_Binding table in the SB database may grow indefinitely (due\nto a lack of an aging mechanism of its entries) and eventually\nlead to OOM killers for neutron-server which maintains an in-memory\ncopy of the database.\n\nIn order to stop monitoring this table, this patch is invoking\nthe ovsdb-client tool to remove the entries associated to\nFloating IPs that have just been detached. The execution of this\ntool is really fast as it will just invoke a JSON-RPC transact command\nwhich doesn't require downloading the database contents.\n\nIn a scale test, the memory consumption of neutron-server dropped\nfrom 75GB to 7GB with this patch.\n\nCloses-Bug: #1946318\n\nConflicts:\n  neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py\n  neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py\n  neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py\n\nSigned-off-by: Daniel Alvarez Sanchez <dalvarez@redhat.com>\nChange-Id: Id84bf17953527c415d611bfc198038fb6f811de3\n(cherry picked from commit f6c35527698119ee6f73a6a3613c9beebb563840)\n""}, {'number': 2, 'created': '2021-10-26 12:32:55.000000000', 'files': ['neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/b767825d1329dbb7fcff264d6047d2513d02db4e', 'message': ""[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint\n\nThe MAC_Binding table in the SB database may grow indefinitely (due\nto a lack of an aging mechanism of its entries) and eventually\nlead to OOM killers for neutron-server which maintains an in-memory\ncopy of the database.\n\nIn order to stop monitoring this table, this patch is invoking\nthe ovsdb-client tool to remove the entries associated to\nFloating IPs that have just been detached. The execution of this\ntool is really fast as it will just invoke a JSON-RPC transact command\nwhich doesn't require downloading the database contents.\n\nIn a scale test, the memory consumption of neutron-server dropped\nfrom 75GB to 7GB with this patch.\n\nCloses-Bug: #1946318\n\nConflicts:\n  neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py\n  neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py\n  neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py\n\nNote: The functional test has been changed for this stable branch\nbecause the update_tables() method from ovsdbapp is not availabie for\nthis version of Neutron. So I changed the functional test to add the\nMAC_Binding entry via ovsdb-client instead of using ovsdbapp to do so.\n\nSigned-off-by: Daniel Alvarez Sanchez <dalvarez@redhat.com>\nChange-Id: Id84bf17953527c415d611bfc198038fb6f811de3\n(cherry picked from commit f6c35527698119ee6f73a6a3613c9beebb563840)\n""}]",3,814869,b767825d1329dbb7fcff264d6047d2513d02db4e,21,4,2,6773,,,0,"[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint

The MAC_Binding table in the SB database may grow indefinitely (due
to a lack of an aging mechanism of its entries) and eventually
lead to OOM killers for neutron-server which maintains an in-memory
copy of the database.

In order to stop monitoring this table, this patch is invoking
the ovsdb-client tool to remove the entries associated to
Floating IPs that have just been detached. The execution of this
tool is really fast as it will just invoke a JSON-RPC transact command
which doesn't require downloading the database contents.

In a scale test, the memory consumption of neutron-server dropped
from 75GB to 7GB with this patch.

Closes-Bug: #1946318

Conflicts:
  neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py
  neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py
  neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py

Note: The functional test has been changed for this stable branch
because the update_tables() method from ovsdbapp is not availabie for
this version of Neutron. So I changed the functional test to add the
MAC_Binding entry via ovsdb-client instead of using ovsdbapp to do so.

Signed-off-by: Daniel Alvarez Sanchez <dalvarez@redhat.com>
Change-Id: Id84bf17953527c415d611bfc198038fb6f811de3
(cherry picked from commit f6c35527698119ee6f73a6a3613c9beebb563840)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/69/814869/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py']",4,d60319dd85fbc9892b14ed9bdba939e1786cfd5b,,"from oslo_concurrency import processutils cmd = ['ovsdb-client', 'transact', ovn_conf.get_ovn_sb_connection()] if ovn_conf.get_ovn_sb_private_key(): cmd += ['-p', ovn_conf.get_ovn_sb_private_key(), '-c', ovn_conf.get_ovn_sb_certificate(), '-C', ovn_conf.get_ovn_sb_ca_cert()] cmd += ['[""OVN_Southbound"", {""op"": ""delete"", ""table"": ""MAC_Binding"", ' '""where"": [[""ip"", ""=="", ""%s""]]}]' % external_ip] return processutils.execute(*cmd, log_errors=processutils.LOG_FINAL_ERROR)"," mac_binds = self._sb_ovn.db_find_rows( 'MAC_Binding', ('ip', '=', external_ip)).execute() or [] for entry in mac_binds: self._sb_ovn.db_destroy('MAC_Binding', entry.uuid).execute()",63,23
openstack%2Fneutron~stable%2Fvictoria~Id84bf17953527c415d611bfc198038fb6f811de3,openstack/neutron,stable/victoria,Id84bf17953527c415d611bfc198038fb6f811de3,[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint,MERGED,2021-10-21 09:09:05.000000000,2021-10-28 11:01:03.000000000,2021-10-28 10:58:05.000000000,"[{'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}]","[{'number': 1, 'created': '2021-10-21 09:09:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/447b44fda80f53380cd52a8134c504f978dd9f10', 'message': ""[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint\n\nThe MAC_Binding table in the SB database may grow indefinitely (due\nto a lack of an aging mechanism of its entries) and eventually\nlead to OOM killers for neutron-server which maintains an in-memory\ncopy of the database.\n\nIn order to stop monitoring this table, this patch is invoking\nthe ovsdb-client tool to remove the entries associated to\nFloating IPs that have just been detached. The execution of this\ntool is really fast as it will just invoke a JSON-RPC transact command\nwhich doesn't require downloading the database contents.\n\nIn a scale test, the memory consumption of neutron-server dropped\nfrom 75GB to 7GB with this patch.\n\nCloses-Bug: #1946318\n\nConflicts:\n  neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py\n  neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py\n  neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py\n\nSigned-off-by: Daniel Alvarez Sanchez <dalvarez@redhat.com>\nChange-Id: Id84bf17953527c415d611bfc198038fb6f811de3\n(cherry picked from commit f6c35527698119ee6f73a6a3613c9beebb563840)\n""}, {'number': 2, 'created': '2021-10-26 11:03:18.000000000', 'files': ['neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/3ac446155225ac98d2253fdb82ff38fd7fa340a1', 'message': ""[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint\n\nThe MAC_Binding table in the SB database may grow indefinitely (due\nto a lack of an aging mechanism of its entries) and eventually\nlead to OOM killers for neutron-server which maintains an in-memory\ncopy of the database.\n\nIn order to stop monitoring this table, this patch is invoking\nthe ovsdb-client tool to remove the entries associated to\nFloating IPs that have just been detached. The execution of this\ntool is really fast as it will just invoke a JSON-RPC transact command\nwhich doesn't require downloading the database contents.\n\nIn a scale test, the memory consumption of neutron-server dropped\nfrom 75GB to 7GB with this patch.\n\nCloses-Bug: #1946318\n\nConflicts:\n  neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py\n  neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py\n  neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py\n\nNote: The functional test has been changed for this stable branch\nbecause the update_tables() method from ovsdbapp is not availabie for\nthis version of Neutron. So I changed the functional test to add the\nMAC_Binding entry via ovsdb-client instead of using ovsdbapp to do so.\n\nSigned-off-by: Daniel Alvarez Sanchez <dalvarez@redhat.com>\nChange-Id: Id84bf17953527c415d611bfc198038fb6f811de3\n(cherry picked from commit f6c35527698119ee6f73a6a3613c9beebb563840)\n""}]",0,814870,3ac446155225ac98d2253fdb82ff38fd7fa340a1,12,4,2,6773,,,0,"[ovn] Stop monitoring the SB MAC_Binding table to reduce mem footprint

The MAC_Binding table in the SB database may grow indefinitely (due
to a lack of an aging mechanism of its entries) and eventually
lead to OOM killers for neutron-server which maintains an in-memory
copy of the database.

In order to stop monitoring this table, this patch is invoking
the ovsdb-client tool to remove the entries associated to
Floating IPs that have just been detached. The execution of this
tool is really fast as it will just invoke a JSON-RPC transact command
which doesn't require downloading the database contents.

In a scale test, the memory consumption of neutron-server dropped
from 75GB to 7GB with this patch.

Closes-Bug: #1946318

Conflicts:
  neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py
  neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py
  neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py

Note: The functional test has been changed for this stable branch
because the update_tables() method from ovsdbapp is not availabie for
this version of Neutron. So I changed the functional test to add the
MAC_Binding entry via ovsdb-client instead of using ovsdbapp to do so.

Signed-off-by: Daniel Alvarez Sanchez <dalvarez@redhat.com>
Change-Id: Id84bf17953527c415d611bfc198038fb6f811de3
(cherry picked from commit f6c35527698119ee6f73a6a3613c9beebb563840)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/70/814870/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/mech_driver.py']",4,447b44fda80f53380cd52a8134c504f978dd9f10,,"from oslo_concurrency import processutils cmd = ['ovsdb-client', 'transact', ovn_conf.get_ovn_sb_connection()] if ovn_conf.get_ovn_sb_private_key(): cmd += ['-p', ovn_conf.get_ovn_sb_private_key(), '-c', ovn_conf.get_ovn_sb_certificate(), '-C', ovn_conf.get_ovn_sb_ca_cert()] cmd += ['[""OVN_Southbound"", {""op"": ""delete"", ""table"": ""MAC_Binding"", ' '""where"": [[""ip"", ""=="", ""%s""]]}]' % external_ip] return processutils.execute(*cmd, log_errors=processutils.LOG_FINAL_ERROR)"," mac_binds = self._sb_ovn.db_find_rows( 'MAC_Binding', ('ip', '=', external_ip)).execute() or [] for entry in mac_binds: self._sb_ovn.db_destroy('MAC_Binding', entry.uuid).execute()",63,23
openstack%2Ftripleo-ansible~stable%2Fwallaby~I145d6c0ddd3cbbfed92113db56e22299ab7c9b08,openstack/tripleo-ansible,stable/wallaby,I145d6c0ddd3cbbfed92113db56e22299ab7c9b08,Use service_net_map for ceph_dashboard_vip,MERGED,2021-10-23 19:36:55.000000000,2021-10-28 10:59:19.000000000,2021-10-28 10:59:19.000000000,"[{'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-23 19:36:55.000000000', 'files': ['tripleo_ansible/roles/tripleo_hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo_hieradata/templates/vip_data.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/01b38c26c2d49baf9ec654815bd884ef3e524d5c', 'message': ""Use service_net_map for ceph_dashboard_vip\n\nInstead of if conditionals on hard-coded network names, use the\nServiceNetMap. CephDashboardNetwork defaults to storage_dashboard\nwith a fallback to 'ctlplane' in the ServiceNetMap.\n\nThis will allow custom network names to be used, via overriding\nCephDashboardNetwork in ServiceNetMap or via service_net_map_replace\nin network data.\n\nRelated-Bug: #1946239\nDepends-On: I9a62b2cf24b2dd020de74e18af8c7bc0535d12d9\nChange-Id: I145d6c0ddd3cbbfed92113db56e22299ab7c9b08\n(cherry picked from commit 3af34f0c68383ff733039f075fe7728baf0f888f)\n""}]",0,815202,01b38c26c2d49baf9ec654815bd884ef3e524d5c,8,4,1,24245,,,0,"Use service_net_map for ceph_dashboard_vip

Instead of if conditionals on hard-coded network names, use the
ServiceNetMap. CephDashboardNetwork defaults to storage_dashboard
with a fallback to 'ctlplane' in the ServiceNetMap.

This will allow custom network names to be used, via overriding
CephDashboardNetwork in ServiceNetMap or via service_net_map_replace
in network data.

Related-Bug: #1946239
Depends-On: I9a62b2cf24b2dd020de74e18af8c7bc0535d12d9
Change-Id: I145d6c0ddd3cbbfed92113db56e22299ab7c9b08
(cherry picked from commit 3af34f0c68383ff733039f075fe7728baf0f888f)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/02/815202/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo_hieradata/templates/vip_data.j2']",2,01b38c26c2d49baf9ec654815bd884ef3e524d5c,bug/1946239,"{% set _ = vip_data.__setitem__('ceph_dashboard_vip', (net_vip_map[service_net_map['ceph_dashboard_network']])) %}","{# when ceph monitoring stack is enabled the frontend vip is explicitly set according to CephDashboardNetwork #} {% if 'ceph_grafana' in enabled_services %} {% set _ = vip_data.__setitem__('ceph_dashboard_vip', (net_vip_map[service_net_map['ceph_dashboard_network']])) %} {% endif %}{% for network in enabled_networks %} {% if network == 'StorageDashboard' %} {% set _ = vip_data.__setitem__('ceph_dashboard_vip', (net_vip_map[networks['StorageDashboard']['name_lower']])) %} {% endif %} {% endfor %}",2,9
openstack%2Ftripleo-heat-templates~stable%2Fwallaby~I9a62b2cf24b2dd020de74e18af8c7bc0535d12d9,openstack/tripleo-heat-templates,stable/wallaby,I9a62b2cf24b2dd020de74e18af8c7bc0535d12d9,Default CephDashboardNetwork to storage_dashboard,MERGED,2021-10-23 19:29:30.000000000,2021-10-28 10:45:37.000000000,2021-10-28 10:45:37.000000000,"[{'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-23 19:29:30.000000000', 'files': ['network/service_net_map.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5d4785bd61f5ff8b9edde370aa251dbddd7a2d63', 'message': ""Default CephDashboardNetwork to storage_dashboard\n\nThe default CephDashboardNetwork in ServiceNetMap was\n'ctlplane'. Change this to default to storage_dashboard\nwith a fallback to 'ctlplane'.\n\nThis will allow us to remove the hard-coded conditionals\non 'StorageDashboard' network name in tripleo_hiera_data.\n\nConflicts:\n  overcloud-resource-registry-puppet.j2.yaml\n\nRelated-Bug: #1946239\nChange-Id: I9a62b2cf24b2dd020de74e18af8c7bc0535d12d9\n(cherry picked from commit 28161b58682ac6d4e86b49ccf01395e40ffd613b)\n""}]",1,815197,5d4785bd61f5ff8b9edde370aa251dbddd7a2d63,9,4,1,24245,,,0,"Default CephDashboardNetwork to storage_dashboard

The default CephDashboardNetwork in ServiceNetMap was
'ctlplane'. Change this to default to storage_dashboard
with a fallback to 'ctlplane'.

This will allow us to remove the hard-coded conditionals
on 'StorageDashboard' network name in tripleo_hiera_data.

Conflicts:
  overcloud-resource-registry-puppet.j2.yaml

Related-Bug: #1946239
Change-Id: I9a62b2cf24b2dd020de74e18af8c7bc0535d12d9
(cherry picked from commit 28161b58682ac6d4e86b49ccf01395e40ffd613b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/97/815197/1 && git format-patch -1 --stdout FETCH_HEAD,['network/service_net_map.j2.yaml'],1,5d4785bd61f5ff8b9edde370aa251dbddd7a2d63,bug/1946239," CephDashboardNetwork: {{ _service_nets.get('storage_dashboard', 'ctlplane') }}", CephDashboardNetwork: ctlplane,1,1
openstack%2Ftripleo-ansible~stable%2Fussuri~Id0c841723da00096e379133429a685bffaf407d3,openstack/tripleo-ansible,stable/ussuri,Id0c841723da00096e379133429a685bffaf407d3,bnr fix the exportation of the ceph authentication,MERGED,2021-10-18 22:04:14.000000000,2021-10-28 10:45:34.000000000,2021-10-28 10:45:34.000000000,"[{'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-18 22:04:14.000000000', 'files': ['tripleo_ansible/roles/backup_and_restore/tasks/ceph_authentication.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/daac3a736fe9cf2ae450906c602112135de09922', 'message': 'bnr fix the exportation of the ceph authentication\n\nThe file ceph authetication is not being generated due to an\nundefined variable.\n\nThis patch inserts the tasks that saves the content of\nthe file in to the block, so the variables are defined.\n\nChange-Id: Id0c841723da00096e379133429a685bffaf407d3\n(cherry picked from commit 442c0bc3ac0133b8ef82da2d86d33734692fb49a)\n'}]",0,814463,daac3a736fe9cf2ae450906c602112135de09922,7,4,1,22954,,,0,"bnr fix the exportation of the ceph authentication

The file ceph authetication is not being generated due to an
undefined variable.

This patch inserts the tasks that saves the content of
the file in to the block, so the variables are defined.

Change-Id: Id0c841723da00096e379133429a685bffaf407d3
(cherry picked from commit 442c0bc3ac0133b8ef82da2d86d33734692fb49a)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/63/814463/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/backup_and_restore/tasks/ceph_authentication.yml'],1,daac3a736fe9cf2ae450906c602112135de09922,bnr_bz2011044-stable/wallaby-stable/victoria-stable/ussuri," - name: Save ceph authentication at {{ tripleo_backup_and_restore_ceph_auth_file }} copy: dest: ""{{ tripleo_backup_and_restore_ceph_auth_file }}"" content: | {{ bar_ceph_authentication_content.stdout }} - name: Save ceph authentication at {{ tripleo_backup_and_restore_ceph_auth_file }} copy: dest: ""{{ tripleo_backup_and_restore_ceph_auth_file }}"" content: | {{ bar_ceph_authentication_content.stdout }}","- name: Save ceph authentication at {{ tripleo_backup_and_restore_ceph_auth_file }} copy: dest: ""{{ tripleo_backup_and_restore_ceph_auth_file }}"" content: | {{ bar_ceph_authentication_content.stdout }}",11,5
openstack%2Fironic-python-agent~stable%2Fxena~Ib920b6f8da2c2c9d72dbb8bbd8915bde767bddd2,openstack/ironic-python-agent,stable/xena,Ib920b6f8da2c2c9d72dbb8bbd8915bde767bddd2,Fix error messages in burnin code,MERGED,2021-10-27 10:42:31.000000000,2021-10-28 10:42:28.000000000,2021-10-28 10:40:19.000000000,"[{'_account_id': 11292}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-10-27 10:42:31.000000000', 'files': ['ironic_python_agent/burnin.py'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/f9ed56ea854f012dd37f10f6551c8effb40d6abc', 'message': 'Fix error messages in burnin code\n\nChange-Id: Ib920b6f8da2c2c9d72dbb8bbd8915bde767bddd2\n(cherry picked from commit 9a8c6a831aa1189a28e90537a03547af8c353eb3)\n'}]",1,815630,f9ed56ea854f012dd37f10f6551c8effb40d6abc,8,3,1,10239,,,0,"Fix error messages in burnin code

Change-Id: Ib920b6f8da2c2c9d72dbb8bbd8915bde767bddd2
(cherry picked from commit 9a8c6a831aa1189a28e90537a03547af8c353eb3)
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/30/815630/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic_python_agent/burnin.py'],1,f9ed56ea854f012dd37f10f6551c8effb40d6abc,error_msg-stable/xena," error_msg = ""stress-ng (cpu) failed with error %s"" % e error_msg = ""stress-ng (vm) failed with error %s"" % e error_msg = ""fio (disk) failed with error %s"" % e error_msg = ""fio (network) failed with error %s"" % e error_msg = ""fio (network) found an unknown role: %s"" % role"," error_msg = (""stress-ng (cpu) failed with error %(err)s"", {'err': e}) error_msg = (""stress-ng (vm) failed with error %(err)s"", {'err': e}) error_msg = (""fio (disk) failed with error %(err)s"", {'err': e}) error_msg = (""fio (network) failed with error %(err)s"", {'err': e}) error_msg = (""fio (network) found an unknown role: %s"", role)",5,9
openstack%2Fcharm-mysql-innodb-cluster~stable%2F21.04~I16e43c37e1af02fb0e23a9c460d70bf5e1dd0fb1,openstack/charm-mysql-innodb-cluster,stable/21.04,I16e43c37e1af02fb0e23a9c460d70bf5e1dd0fb1,clustering: tweak allowlist generation,ABANDONED,2021-07-08 05:11:07.000000000,2021-10-28 10:41:25.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-08 05:11:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/d1ff0cd7212eeb394a44827364996c1ed38769e6', 'message': 'clustering: tweak allowlist generation\n\nInstead of trying to resolve the network CIDR from the local unit\nfor all units in the cluster just use the actual IP addresses of\nthe cluster unit when generating the IP allowlist for cluster\nconnectivity.\n\nAlso add the network CIDR for the local units cluster address\nwhich is the only one that will be guaranteed to be resolvable.\n\nFor deployments where all units are on the same Layer 2 network\naddition of units with complete automatically - in Layer 3\nrouted network topologies new units will be blocked until the\nupdate-unit-acls action is executed which is a service\ndisruption operation.\n\nCloses-Bug: 1926460\nChange-Id: I16e43c37e1af02fb0e23a9c460d70bf5e1dd0fb1\n(cherry picked from commit 737179482c2bfb209a7d322793b4ac925181b639)\n'}, {'number': 2, 'created': '2021-07-08 05:30:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/f71bf634558697a5d5ccf1b881726ae50eb7c662', 'message': 'clustering: tweak allowlist generation\n\nInstead of trying to resolve the network CIDR from the local unit\nfor all units in the cluster just use the actual IP addresses of\nthe cluster unit when generating the IP allowlist for cluster\nconnectivity.\n\nAlso add the network CIDR for the local units cluster address\nwhich is the only one that will be guaranteed to be resolvable.\n\nFor deployments where all units are on the same Layer 2 network\naddition of units with complete automatically - in Layer 3\nrouted network topologies new units will be blocked until the\nupdate-unit-acls action is executed which is a service\ndisruption operation.\n\nCloses-Bug: 1926460\nChange-Id: I16e43c37e1af02fb0e23a9c460d70bf5e1dd0fb1\n(cherry picked from commit 737179482c2bfb209a7d322793b4ac925181b639)\n'}, {'number': 3, 'created': '2021-09-03 12:49:25.000000000', 'files': ['unit_tests/test_lib_charm_openstack_mysql_innodb_cluster.py', 'src/lib/charm/openstack/mysql_innodb_cluster.py'], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/a63356a71bc464853ba62c51aef1feaae19c1d3e', 'message': 'clustering: tweak allowlist generation\n\nInstead of trying to resolve the network CIDR from the local unit\nfor all units in the cluster just use the actual IP addresses of\nthe cluster unit when generating the IP allowlist for cluster\nconnectivity.\n\nAlso add the network CIDR for the local units cluster address\nwhich is the only one that will be guaranteed to be resolvable.\n\nFor deployments where all units are on the same Layer 2 network\naddition of units with complete automatically - in Layer 3\nrouted network topologies new units will be blocked until the\nupdate-unit-acls action is executed which is a service\ndisruption operation.\n\nCloses-Bug: 1926460\nChange-Id: I16e43c37e1af02fb0e23a9c460d70bf5e1dd0fb1\n(cherry picked from commit 737179482c2bfb209a7d322793b4ac925181b639)\n'}]",0,799955,a63356a71bc464853ba62c51aef1feaae19c1d3e,11,2,3,935,,,0,"clustering: tweak allowlist generation

Instead of trying to resolve the network CIDR from the local unit
for all units in the cluster just use the actual IP addresses of
the cluster unit when generating the IP allowlist for cluster
connectivity.

Also add the network CIDR for the local units cluster address
which is the only one that will be guaranteed to be resolvable.

For deployments where all units are on the same Layer 2 network
addition of units with complete automatically - in Layer 3
routed network topologies new units will be blocked until the
update-unit-acls action is executed which is a service
disruption operation.

Closes-Bug: 1926460
Change-Id: I16e43c37e1af02fb0e23a9c460d70bf5e1dd0fb1
(cherry picked from commit 737179482c2bfb209a7d322793b4ac925181b639)
",git fetch https://review.opendev.org/openstack/charm-mysql-innodb-cluster refs/changes/55/799955/1 && git format-patch -1 --stdout FETCH_HEAD,"['unit_tests/test_lib_charm_openstack_mysql_innodb_cluster.py', 'src/lib/charm/openstack/mysql_innodb_cluster.py']",2,d1ff0cd7212eeb394a44827364996c1ed38769e6,stable/bug/1926460," def get_cluster_addresses(self): """"""Return a sorted list of addresses covering all units. :returns: List of addresses ips.append(ch_net_ip.resolve_network_cidr(self.cluster_address)) return sorted(ips) "","".join(self.get_cluster_addresses()))"," def get_cluster_subnets(self): """"""Return a list of subnets covering all units. :returns: List of subnets return list(set([ch_net_ip.resolve_network_cidr(ip) for ip in ips])) "","".join(sorted(self.get_cluster_subnets())))",12,10
openstack%2Fcharm-mysql-innodb-cluster~stable%2F21.04~I851fee541f85a69e346017d3ec1c12be06efdfd1,openstack/charm-mysql-innodb-cluster,stable/21.04,I851fee541f85a69e346017d3ec1c12be06efdfd1,Stop using AUTOMATIC node whitelist,ABANDONED,2021-07-08 05:11:07.000000000,2021-10-28 10:41:08.000000000,,"[{'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 30561}, {'_account_id': 31289}]","[{'number': 1, 'created': '2021-07-08 05:11:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/831c28cc03dfa18aaa965b55a4c5141a9670d0bf', 'message': 'Stop using AUTOMATIC node whitelist\n\nWhen the group_replication_ip_allowlist *1 is set to the default\nvalue of AUTOMATIC clusters can only be formed on RFC1918 private\nnetworks. This change changes the behavious so that\ngroup_replication_ip_allowlist will now be set to a list of CIDRs\nthat cover the units that form the cluster.\n\nIf a unit is added after the cluster is formed then a new action\nis provided to force the charm to update group_replication_ip_allowlist\non all nodes. This is not done automatically as replication needs\nto be stopped to update it.\n\n*1 https://dev.mysql.com/doc/refman/8.0/en/group-replication-options.html#sysvar_group_replication_ip_allowlist\n\nChange-Id: I851fee541f85a69e346017d3ec1c12be06efdfd1\n(cherry picked from commit 43bd5831109ee892b43ce80a85a4eb067111006d)\n'}, {'number': 2, 'created': '2021-07-08 05:30:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/daef4a227f8d24db680ffd8f008ad30ea7f96e63', 'message': 'Stop using AUTOMATIC node whitelist\n\nWhen the group_replication_ip_allowlist *1 is set to the default\nvalue of AUTOMATIC clusters can only be formed on RFC1918 private\nnetworks. This change changes the behavious so that\ngroup_replication_ip_allowlist will now be set to a list of CIDRs\nthat cover the units that form the cluster.\n\nIf a unit is added after the cluster is formed then a new action\nis provided to force the charm to update group_replication_ip_allowlist\non all nodes. This is not done automatically as replication needs\nto be stopped to update it.\n\n*1 https://dev.mysql.com/doc/refman/8.0/en/group-replication-options.html#sysvar_group_replication_ip_allowlist\n\nChange-Id: I851fee541f85a69e346017d3ec1c12be06efdfd1\n(cherry picked from commit 43bd5831109ee892b43ce80a85a4eb067111006d)\n'}, {'number': 3, 'created': '2021-09-03 12:44:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/e416eff7c18392772cef0b8fc774ec791da36e49', 'message': 'Stop using AUTOMATIC node whitelist\n\nWhen the group_replication_ip_allowlist *1 is set to the default\nvalue of AUTOMATIC clusters can only be formed on RFC1918 private\nnetworks. This change changes the behavious so that\ngroup_replication_ip_allowlist will now be set to a list of CIDRs\nthat cover the units that form the cluster.\n\nIf a unit is added after the cluster is formed then a new action\nis provided to force the charm to update group_replication_ip_allowlist\non all nodes. This is not done automatically as replication needs\nto be stopped to update it.\n\n*1 https://dev.mysql.com/doc/refman/8.0/en/group-replication-options.html#sysvar_group_replication_ip_allowlist\n\nChange-Id: I851fee541f85a69e346017d3ec1c12be06efdfd1\n(cherry picked from commit 43bd5831109ee892b43ce80a85a4eb067111006d)\n'}, {'number': 4, 'created': '2021-09-03 12:49:25.000000000', 'files': ['src/README.md', 'src/actions.yaml', 'unit_tests/test_lib_charm_openstack_mysql_innodb_cluster.py', 'src/actions/update-unit-acls', 'src/lib/charm/openstack/mysql_innodb_cluster.py', 'unit_tests/test_mysql_innodb_cluster_handlers.py', 'src/actions/actions.py', 'src/reactive/mysql_innodb_cluster_handlers.py'], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/962a1b6ec4f7d1d302148a4faa1b65699e966e15', 'message': 'Stop using AUTOMATIC node whitelist\n\nWhen the group_replication_ip_allowlist *1 is set to the default\nvalue of AUTOMATIC clusters can only be formed on RFC1918 private\nnetworks. This change changes the behavious so that\ngroup_replication_ip_allowlist will now be set to a list of CIDRs\nthat cover the units that form the cluster.\n\nIf a unit is added after the cluster is formed then a new action\nis provided to force the charm to update group_replication_ip_allowlist\non all nodes. This is not done automatically as replication needs\nto be stopped to update it.\n\n*1 https://dev.mysql.com/doc/refman/8.0/en/group-replication-options.html#sysvar_group_replication_ip_allowlist\n\nChange-Id: I851fee541f85a69e346017d3ec1c12be06efdfd1\n(cherry picked from commit 43bd5831109ee892b43ce80a85a4eb067111006d)\n'}]",7,799954,962a1b6ec4f7d1d302148a4faa1b65699e966e15,14,5,4,935,,,0,"Stop using AUTOMATIC node whitelist

When the group_replication_ip_allowlist *1 is set to the default
value of AUTOMATIC clusters can only be formed on RFC1918 private
networks. This change changes the behavious so that
group_replication_ip_allowlist will now be set to a list of CIDRs
that cover the units that form the cluster.

If a unit is added after the cluster is formed then a new action
is provided to force the charm to update group_replication_ip_allowlist
on all nodes. This is not done automatically as replication needs
to be stopped to update it.

*1 https://dev.mysql.com/doc/refman/8.0/en/group-replication-options.html#sysvar_group_replication_ip_allowlist

Change-Id: I851fee541f85a69e346017d3ec1c12be06efdfd1
(cherry picked from commit 43bd5831109ee892b43ce80a85a4eb067111006d)
",git fetch https://review.opendev.org/openstack/charm-mysql-innodb-cluster refs/changes/54/799954/3 && git format-patch -1 --stdout FETCH_HEAD,"['src/README.md', 'src/actions.yaml', 'unit_tests/test_lib_charm_openstack_mysql_innodb_cluster.py', 'src/actions/update-unit-acls', 'src/lib/charm/openstack/mysql_innodb_cluster.py', 'unit_tests/test_mysql_innodb_cluster_handlers.py', 'src/actions/actions.py', 'src/reactive/mysql_innodb_cluster_handlers.py']",8,831c28cc03dfa18aaa965b55a4c5141a9670d0bf,stable/bug/1926460,"@reactive.when('cluster.available') def check_quorum(): """"""Check that all units have sent their cluster address. When the cluster is created an ip allow list is set. This cannot be updated while replication is running. To avoid the need to update it after cluster creation wait for all cluster addresses to be present. NOTE: The update-unit-acls action can be run if a unit on a new subnet is added to an existing cluster. """""" with charm.provide_charm_instance() as instance: if instance.reached_quorum(): ch_core.hookenv.log(""Reached quorum"", ""DEBUG"") reactive.set_flag('local.cluster.quorum-reached') else: ch_core.hookenv.log(""Quorum not reached"", ""DEBUG"") @reactive.when('local.cluster.quorum-reached')",,423,11
openstack%2Frequirements~master~Ifce3a7d8a46cf6ba198b8a759dd29dec9f1b54a7,openstack/requirements,master,Ifce3a7d8a46cf6ba198b8a759dd29dec9f1b54a7,Updated from generate-constraints,MERGED,2021-10-28 02:51:31.000000000,2021-10-28 10:33:08.000000000,2021-10-28 10:30:30.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-28 02:51:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/e0093a750ac96cd18009a7714f306c131a84841b', 'message': 'Updated from generate-constraints\n\nChange-Id: Ifce3a7d8a46cf6ba198b8a759dd29dec9f1b54a7\n'}, {'number': 2, 'created': '2021-10-28 02:56:08.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/a00c13667813d419ac3b5e62ef3573b018461ea9', 'message': 'Updated from generate-constraints\n\nChange-Id: Ifce3a7d8a46cf6ba198b8a759dd29dec9f1b54a7\nSigned-off-by: Matthew Thode <mthode@mthode.org>\n'}]",1,815771,a00c13667813d419ac3b5e62ef3573b018461ea9,13,3,2,11131,,,0,"Updated from generate-constraints

Change-Id: Ifce3a7d8a46cf6ba198b8a759dd29dec9f1b54a7
Signed-off-by: Matthew Thode <mthode@mthode.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/71/815771/2 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,e0093a750ac96cd18009a7714f306c131a84841b,openstack/requirements/constraints/noclob,oslo.concurrency===4.5.0XStatic-Angular===1.8.2.1pkg_resources===0.0.0boto3===1.19.5asgiref===3.4.1botocore===1.22.5Django===3.2.8fasteners===0.16.3,oslo.concurrency===4.4.1XStatic-Angular===1.5.8.0boto3===1.19.4botocore===1.22.4Django===2.2.24fasteners===0.14.1setuptools===58.3.0,8,7
openstack%2Freleases~master~Ib6f9b4096ae6cdb1cbd9f495c19e19da0e855aec,openstack/releases,master,Ib6f9b4096ae6cdb1cbd9f495c19e19da0e855aec,Release os-api-ref 2.3.0,MERGED,2021-10-26 13:21:40.000000000,2021-10-28 10:32:41.000000000,2021-10-28 10:32:41.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 13:21:40.000000000', 'files': ['deliverables/_independent/os-api-ref.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/ebc051b06073351e8fc91b5efb66e92542ba5207', 'message': 'Release os-api-ref 2.3.0\n\nReleasing a minor version because runtime requirements have been\ndropped.\n\nChange-Id: Ib6f9b4096ae6cdb1cbd9f495c19e19da0e855aec\n'}]",1,815500,ebc051b06073351e8fc91b5efb66e92542ba5207,8,3,1,28522,,,0,"Release os-api-ref 2.3.0

Releasing a minor version because runtime requirements have been
dropped.

Change-Id: Ib6f9b4096ae6cdb1cbd9f495c19e19da0e855aec
",git fetch https://review.opendev.org/openstack/releases refs/changes/00/815500/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/os-api-ref.yaml'],1,ebc051b06073351e8fc91b5efb66e92542ba5207,oslo-independent, - version: 2.3.0 projects: - repo: openstack/os-api-ref hash: 3d4f056ca3fa870000391f02cea2120392ddfbfd,,4,0
openstack%2Freleases~master~Ib028b353b5a7aee48c2556418c49b9e8062bc6dd,openstack/releases,master,Ib028b353b5a7aee48c2556418c49b9e8062bc6dd,[xena] Release oslo.policy 3.8.3,MERGED,2021-10-26 13:30:16.000000000,2021-10-28 10:32:39.000000000,2021-10-28 10:32:39.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 13:30:16.000000000', 'files': ['deliverables/xena/oslo.policy.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/f060626b004bce2a3e25c774976c9e5df8f7968b', 'message': '[xena] Release oslo.policy 3.8.3\n\nChange-Id: Ib028b353b5a7aee48c2556418c49b9e8062bc6dd\n'}]",1,815502,f060626b004bce2a3e25c774976c9e5df8f7968b,8,3,1,28522,,,0,"[xena] Release oslo.policy 3.8.3

Change-Id: Ib028b353b5a7aee48c2556418c49b9e8062bc6dd
",git fetch https://review.opendev.org/openstack/releases refs/changes/02/815502/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/oslo.policy.yaml'],1,f060626b004bce2a3e25c774976c9e5df8f7968b,oslo-xena, - version: 3.8.3 projects: - repo: openstack/oslo.policy hash: ff2a39fc619baafa956bee74a2574f5438d40767,,4,0
openstack%2Freleases~master~I3639006a3c87a6c2fb67f146ef8288b785dd8b6f,openstack/releases,master,I3639006a3c87a6c2fb67f146ef8288b785dd8b6f,[yoga] Release oslo deliverables,MERGED,2021-10-26 13:25:42.000000000,2021-10-28 10:32:37.000000000,2021-10-28 10:32:37.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-26 13:25:42.000000000', 'files': ['deliverables/yoga/oslo.messaging.yaml', 'deliverables/yoga/oslo.policy.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/670fd8ba4204a5bf66a4c066775df95507bfc822', 'message': '[yoga] Release oslo deliverables\n\nChange-Id: I3639006a3c87a6c2fb67f146ef8288b785dd8b6f\n'}]",1,815501,670fd8ba4204a5bf66a4c066775df95507bfc822,8,3,1,28522,,,0,"[yoga] Release oslo deliverables

Change-Id: I3639006a3c87a6c2fb67f146ef8288b785dd8b6f
",git fetch https://review.opendev.org/openstack/releases refs/changes/01/815501/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/yoga/oslo.messaging.yaml', 'deliverables/yoga/oslo.policy.yaml']",2,670fd8ba4204a5bf66a4c066775df95507bfc822,oslo-yoga, - version: 3.10.0 projects: - repo: openstack/oslo.policy hash: 4ecbcf280ad008f17ab4a72bc56a9793c32f7dc7,,8,0
openstack%2Fcharm-ceph-dashboard~master~I355a86be6ba5ff9afd0411208d05d2e484bfdb25,openstack/charm-ceph-dashboard,master,I355a86be6ba5ff9afd0411208d05d2e484bfdb25,Disable MOTD plugin usage (for now),ABANDONED,2021-09-30 14:11:28.000000000,2021-10-28 10:30:41.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 14:11:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/30b44c5c920d9ec0eb680c6355005e1a4e2db8fc', 'message': 'Disable MOTD plugin usage (for now)\n\nSomehow this was released for Octopus prior to being released\nas part of Pacific so checking for an Octopus point release\nas the minimum version is not sufficient.\n\nChange-Id: I355a86be6ba5ff9afd0411208d05d2e484bfdb25\n'}, {'number': 2, 'created': '2021-09-30 15:35:13.000000000', 'files': ['src/charm.py', 'unit_tests/test_ceph_dashboard_charm.py'], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/4f0e840e166c48f6f7e24fb1343ba448d09cdb7e', 'message': 'Disable MOTD plugin usage (for now)\n\nSomehow this was released for Octopus prior to being released\nas part of Pacific so checking for an Octopus point release\nas the minimum version is not sufficient.\n\nChange-Id: I355a86be6ba5ff9afd0411208d05d2e484bfdb25\n'}]",0,811976,4f0e840e166c48f6f7e24fb1343ba448d09cdb7e,13,2,2,935,,,0,"Disable MOTD plugin usage (for now)

Somehow this was released for Octopus prior to being released
as part of Pacific so checking for an Octopus point release
as the minimum version is not sufficient.

Change-Id: I355a86be6ba5ff9afd0411208d05d2e484bfdb25
",git fetch https://review.opendev.org/openstack/charm-ceph-dashboard refs/changes/76/811976/2 && git format-patch -1 --stdout FETCH_HEAD,['src/charm.py'],1,30b44c5c920d9ec0eb680c6355005e1a4e2db8fc,disable-motd,," MOTDOption( 'motd', 'motd', min_version='15.2.14')",0,4
openstack%2Ftacker~master~I502ec468f4c5db317170f321d95fe8074faa41b5,openstack/tacker,master,I502ec468f4c5db317170f321d95fe8074faa41b5,[DNM] Add rollback FT for error point 6,NEW,2021-10-27 10:03:02.000000000,2021-10-28 10:15:02.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-27 10:03:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/d368ff22cb22f7dd31484380be8b605515158504', 'message': '[DNM] Add rollback FT for error point 6\n\nThis patch adds a rollback functional test of  scale-out in case the Mgmt Driver fails.\n\nChange-Id: I502ec468f4c5db317170f321d95fe8074faa41b5\n'}, {'number': 2, 'created': '2021-10-28 04:10:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/17e8415ba8c935c16ce57c8b2fb4afdc40aa4e3f', 'message': '[DNM] Add rollback FT for error point 6\n\nThis patch adds a rollback functional test of  scale-out in case the Mgmt Driver fails.\n\nChange-Id: I502ec468f4c5db317170f321d95fe8074faa41b5\n'}, {'number': 3, 'created': '2021-10-28 07:31:26.000000000', 'files': ['tacker/tests/etc/samples/etsi/nfv/functional5/Definitions/helloworld3_df_simple.yaml', 'playbooks/devstack/pre.yaml', 'tacker/vnfm/mgmt_drivers/fail_mgmt.py', 'tacker/tests/etc/samples/etsi/nfv/functional5/Scripts/fail_mgmt.py', 'tacker/tests/etc/samples/etsi/nfv/functional5/TOSCA-Metadata/TOSCA.meta', '.zuul.yaml', 'setup.cfg', 'tacker/tests/functional/sol/vnflcm/test_vnf_instance_with_user_data.py', 'roles/setup-tacker-conf/tasks/main.yaml'], 'web_link': 'https://opendev.org/openstack/tacker/commit/77d421a29ddd4111d402b51bfec3e40bcfe47327', 'message': '[DNM] Add rollback FT for error point 6\n\nThis patch adds a rollback functional test of  scale-out in case the Mgmt Driver fails.\n\nChange-Id: I502ec468f4c5db317170f321d95fe8074faa41b5\n'}]",7,815612,77d421a29ddd4111d402b51bfec3e40bcfe47327,6,1,3,31730,,,0,"[DNM] Add rollback FT for error point 6

This patch adds a rollback functional test of  scale-out in case the Mgmt Driver fails.

Change-Id: I502ec468f4c5db317170f321d95fe8074faa41b5
",git fetch https://review.opendev.org/openstack/tacker refs/changes/12/815612/1 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/tests/etc/samples/etsi/nfv/functional5/Definitions/helloworld3_df_simple.yaml', 'playbooks/devstack/pre.yaml', 'tacker/vnfm/mgmt_drivers/fail_mgmt.py', 'tacker/tests/etc/samples/etsi/nfv/functional5/Scripts/fail_mgmt.py', 'tacker/tests/etc/samples/etsi/nfv/functional5/TOSCA-Metadata/TOSCA.meta', '.zuul.yaml', 'setup.cfg', 'tacker/tests/functional/sol/vnflcm/test_vnf_instance_with_user_data.py', 'roles/setup-tacker-conf/tasks/main.yaml']",9,d368ff22cb22f7dd31484380be8b605515158504,add_test_ep6,"- block: - name: Check tacker.conf exists stat: path: ""/etc/tacker/tacker.conf"" register: p - name: Replace tacker.conf replace: path: ""/etc/tacker/tacker.conf"" regexp: ""#vnflcm_mgmt_driver = vnflcm_noop"" replace: ""vnflcm_mgmt_driver = vnflcm_noop,mgmt-drivers-fail"" when: - p.stat.exists - name: Restart tacker conductor service service: name: devstack@tacker-conductor.service state: restarted become: yes when: - inventory_hostname == 'controller-tacker' - kuryr_k8s_api_url is defined ",,440,9
openstack%2Fkayobe~stable%2Fxena~Ic337c6fe61343f1ba15f977f13e88c3bd9d5ec18,openstack/kayobe,stable/xena,Ic337c6fe61343f1ba15f977f13e88c3bd9d5ec18,Fix link syntax in release note,MERGED,2021-10-27 09:43:46.000000000,2021-10-28 09:50:54.000000000,2021-10-28 09:46:41.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-10-27 09:43:46.000000000', 'files': ['releasenotes/notes/add-support-for-custom-seed-vms-a938ffdbedcd7b14.yaml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/698d79e47dff8e9ff6f3af41b20bbff00f98f80d', 'message': 'Fix link syntax in release note\n\nChange-Id: Ic337c6fe61343f1ba15f977f13e88c3bd9d5ec18\n(cherry picked from commit 80c13e75deb4bff94c5bfe2fd79bb9beecb71873)\n'}]",0,815449,698d79e47dff8e9ff6f3af41b20bbff00f98f80d,7,3,1,15197,,,0,"Fix link syntax in release note

Change-Id: Ic337c6fe61343f1ba15f977f13e88c3bd9d5ec18
(cherry picked from commit 80c13e75deb4bff94c5bfe2fd79bb9beecb71873)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/49/815449/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/notes/add-support-for-custom-seed-vms-a938ffdbedcd7b14.yaml'],1,698d79e47dff8e9ff6f3af41b20bbff00f98f80d,, <https://storyboard.openstack.org/#!/story/2008741>`__ for details., <https://storyboard.openstack.org/#!/story/2008741>` for details.,1,1
openstack%2Fkayobe~stable%2Fxena~Iade0d74cdb398365a567dbdc4b23de2416f3726d,openstack/kayobe,stable/xena,Iade0d74cdb398365a567dbdc4b23de2416f3726d,Drop become in stackhpc.libvirt-vm for seed vm provision,MERGED,2021-10-27 19:10:26.000000000,2021-10-28 09:49:22.000000000,2021-10-28 09:46:26.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-10-27 19:10:26.000000000', 'files': ['releasenotes/notes/story-2009277-84c381a562244fab.yaml', 'ansible/roles/infra-vms/tasks/deploy.yml', 'ansible/seed-vm-provision.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/25e0ac304fc7f54b66712fb624a4ab7d0ca3c744', 'message': 'Drop become in stackhpc.libvirt-vm for seed vm provision\n\nPrior to this change, the seed VM was provisioned using the\nstackhpc.livirt-vm role with become=true. This resulted in the cached\nimage being owned by root. The infra VM provisioning uses\nstackhpc.libvirt-vm without become=true. If an infra VM uses the same\nimage as the seed, this can lead to permission denied errors when\ndownloading a new image of the same name.\n\nThis change adds a workaround to fix up the ownership of the cached\nimage during infra VM provisioning to avoid this issue.\n\nThis change also drops become=true from stackhpc.libvirt-vm during seed\nVM provisioning, and adds the same workaround there.\n\nStory: 2009277\nTask: 43534\n\nChange-Id: Iade0d74cdb398365a567dbdc4b23de2416f3726d\n(cherry picked from commit 50e04bb06fe27c0d0e39adda7b8ac4dddc428581)\n'}]",0,815642,25e0ac304fc7f54b66712fb624a4ab7d0ca3c744,8,3,1,15197,,,0,"Drop become in stackhpc.libvirt-vm for seed vm provision

Prior to this change, the seed VM was provisioned using the
stackhpc.livirt-vm role with become=true. This resulted in the cached
image being owned by root. The infra VM provisioning uses
stackhpc.libvirt-vm without become=true. If an infra VM uses the same
image as the seed, this can lead to permission denied errors when
downloading a new image of the same name.

This change adds a workaround to fix up the ownership of the cached
image during infra VM provisioning to avoid this issue.

This change also drops become=true from stackhpc.libvirt-vm during seed
VM provisioning, and adds the same workaround there.

Story: 2009277
Task: 43534

Change-Id: Iade0d74cdb398365a567dbdc4b23de2416f3726d
(cherry picked from commit 50e04bb06fe27c0d0e39adda7b8ac4dddc428581)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/42/815642/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/story-2009277-84c381a562244fab.yaml', 'ansible/roles/infra-vms/tasks/deploy.yml', 'ansible/seed-vm-provision.yml']",3,25e0ac304fc7f54b66712fb624a4ab7d0ca3c744,," # NOTE(mgoddard): Prior to the Xena release, the seed VM was provisioned # using the stackhpc.livirt-vm role with become=true. This resulted in the # cached image being owned by root. Since Xena, we execute the role without # become=true. Correct the image ownership to avoid a permission denied # error when downloading a new image of the same name. - name: Stat image files stat: path: ""{{ image_cache_path }}/{{ item.image | basename }}"" with_items: ""{{ hostvars[seed_host].seed_vm_volumes | selectattr('image', 'defined') }}"" register: image_stat_result - name: Fix image ownership file: path: ""{{ image_cache_path }}/{{ item.item.image | basename }}"" owner: ""{{ ansible_facts.user_uid }}"" group: ""{{ ansible_facts.user_gid }}"" with_items: ""{{ image_stat_result.results }}"" when: item.stat.exists become: true ", become: True,46,1
openstack%2Fkayobe~stable%2Fxena~I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9,openstack/kayobe,stable/xena,I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9,CI: Disable heat in upgrade jobs to save disk space,MERGED,2021-10-27 16:13:18.000000000,2021-10-28 09:46:40.000000000,2021-10-28 09:46:40.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-10-27 16:13:18.000000000', 'files': ['playbooks/kayobe-overcloud-upgrade-base/overrides.yml.j2'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/577cd0c8fd7ca815ae61f412856689e1697da5d0', 'message': 'CI: Disable heat in upgrade jobs to save disk space\n\nWe see frequent failures of upgrade jobs on stable branches due to lack\nof disk space. Disable heat in an attempt to free up extra space, since\nwe do not need it for our testing.\n\nChange-Id: I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9\n(cherry picked from commit 06a51ceaec37652df8573e48886a9203ec6e9c31)\n'}]",0,815636,577cd0c8fd7ca815ae61f412856689e1697da5d0,7,3,1,15197,,,0,"CI: Disable heat in upgrade jobs to save disk space

We see frequent failures of upgrade jobs on stable branches due to lack
of disk space. Disable heat in an attempt to free up extra space, since
we do not need it for our testing.

Change-Id: I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9
(cherry picked from commit 06a51ceaec37652df8573e48886a9203ec6e9c31)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/36/815636/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/kayobe-overcloud-upgrade-base/overrides.yml.j2'],1,577cd0c8fd7ca815ae61f412856689e1697da5d0,ci-disable-heat-stable/xena, # Disable heat to save disk space. kolla_enable_heat: false,,3,0
openstack%2Fkolla~stable%2Fwallaby~Id488635110c6158dd23466250c9d57c4f0bc03ff,openstack/kolla,stable/wallaby,Id488635110c6158dd23466250c9d57c4f0bc03ff,cinder-volume/ubuntu: add lsscsi and nvme,MERGED,2021-10-26 14:25:00.000000000,2021-10-28 09:31:07.000000000,2021-10-28 09:29:23.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30523}]","[{'number': 1, 'created': '2021-10-26 14:25:00.000000000', 'files': ['docker/cinder/cinder-volume/Dockerfile.j2', 'releasenotes/notes/bug-1942038-f1d96ae352f73bd1.yaml'], 'web_link': 'https://opendev.org/openstack/kolla/commit/6448d3d21e13f1c70ceb20acb89583c58d594e52', 'message': 'cinder-volume/ubuntu: add lsscsi and nvme\n\nCloses-Bug: #1942038\nChange-Id: Id488635110c6158dd23466250c9d57c4f0bc03ff\n(cherry picked from commit dfb65af8845b184c533fab451fd609b2f7de8859)\n'}]",1,815441,6448d3d21e13f1c70ceb20acb89583c58d594e52,14,4,1,30491,,,0,"cinder-volume/ubuntu: add lsscsi and nvme

Closes-Bug: #1942038
Change-Id: Id488635110c6158dd23466250c9d57c4f0bc03ff
(cherry picked from commit dfb65af8845b184c533fab451fd609b2f7de8859)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/41/815441/1 && git format-patch -1 --stdout FETCH_HEAD,"['docker/cinder/cinder-volume/Dockerfile.j2', 'releasenotes/notes/bug-1942038-f1d96ae352f73bd1.yaml']",2,6448d3d21e13f1c70ceb20acb89583c58d594e52,,--- fixes: - | Fixes an issue with cinder-volume missing ``lsscsi`` and ``nvme`` commands on Debian and Ubuntu. `LP#1942038 <https://launchpad.net/bugs/1942038>`__ ,,8,0
openstack%2Fcyborg~master~I850a7e29880a9744b18523281756bab2de1d5492,openstack/cyborg,master,I850a7e29880a9744b18523281756bab2de1d5492,Doc Improvment:Add doc about cyborg-nova interaction,MERGED,2021-06-03 09:58:05.000000000,2021-10-28 09:12:47.000000000,2021-10-28 09:10:09.000000000,"[{'_account_id': 22348}, {'_account_id': 25738}, {'_account_id': 26458}, {'_account_id': 30077}, {'_account_id': 31412}]","[{'number': 1, 'created': '2021-06-03 09:58:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/7f9f77c1a0de53bc33d48bc8698c48ec35e8c62e', 'message': 'Docs:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 2, 'created': '2021-06-03 10:51:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/3cc2783e127328fb2cb01cfb531db6e13541e039', 'message': 'Docs:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 3, 'created': '2021-06-03 11:01:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/3f687e88a5e5166ee1b10b3065328f2e17b9f5c0', 'message': 'Docs:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 4, 'created': '2021-06-10 01:32:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/7ef2ef82a8e22bdaa3ea2a427c5972688e05e40e', 'message': 'Docs:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 5, 'created': '2021-06-10 02:49:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/f706c06f27e87c1420ef6128a13bce0811d1452a', 'message': 'Docs:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 6, 'created': '2021-06-10 03:10:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/86808d108102119145890d3215e0107516fff050', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 7, 'created': '2021-06-10 05:36:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/5e14a52ad65ea7df495aed257aa8f2f7aeee991e', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 8, 'created': '2021-06-30 01:45:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/d4899275ae3df1bad5b45b783d972d97b0a5ac4c', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 9, 'created': '2021-07-19 02:12:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/29765bf3f4898a3fe2e510e402b5d6990f0c49aa', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 10, 'created': '2021-08-17 01:55:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/d8bb9aa92fc0c2e3af5dbdb41e89508b5eeed9ad', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 11, 'created': '2021-10-26 02:25:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/e9e96c077e98a093f220ba2124aa0c86104b2e52', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 12, 'created': '2021-10-26 06:03:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/087e8ed231ff15f1f4afc9f2a0fc9f7e95345321', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 13, 'created': '2021-10-26 06:21:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/a35d7383f8e30cbe7c7fdd700b55c5d06a5e6e94', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 14, 'created': '2021-10-26 06:42:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/e0fe2b1fab5eef26a41af4ab63f648b943c0ecf7', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}, {'number': 15, 'created': '2021-10-26 08:22:57.000000000', 'files': ['doc/source/admin/index.rst', 'doc/source/index.rst', 'doc/source/figures/cyborg-nova-interaction-workflow.svg', 'doc/source/figures/cyborg-nova-interaction.png'], 'web_link': 'https://opendev.org/openstack/cyborg/commit/ade1972fc37c2d6ba9a80c4a86749f4af4c05d48', 'message': 'Doc Improvment:Add doc about cyborg-nova interaction\n\nChange-Id: I850a7e29880a9744b18523281756bab2de1d5492\nCloses-Bug: #1930404\n'}]",49,794549,ade1972fc37c2d6ba9a80c4a86749f4af4c05d48,45,5,15,30395,,,0,"Doc Improvment:Add doc about cyborg-nova interaction

Change-Id: I850a7e29880a9744b18523281756bab2de1d5492
Closes-Bug: #1930404
",git fetch https://review.opendev.org/openstack/cyborg refs/changes/49/794549/12 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/index.rst', 'doc/source/index.rst', 'doc/source/figures/cyborg-nova-interaction.png']",3,7f9f77c1a0de53bc33d48bc8698c48ec35e8c62e,cyborg-nova-interaction-doc,,,31,1
openstack%2Freleases~master~I53f11a249b5e09c84d65644ee609553a9b6e6353,openstack/releases,master,I53f11a249b5e09c84d65644ee609553a9b6e6353,List the Yoga cycle signing key as current,MERGED,2021-10-26 19:56:23.000000000,2021-10-28 09:08:25.000000000,2021-10-28 09:08:25.000000000,"[{'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-10-26 19:56:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/3d1b8bba34ba004d67b8011f6c51d5759f1b3ddf', 'message': 'List the Yoga cycle signing key as current\n\nThis sets the end date for the Xena key, adds the Yoga key starting\ntoday and links to an export of the corresponding public key. It\nalso drops references to the now defunct SKS keyserver network and\nour old rotation process which was tied to it. Instead the key has\nbeen created following the new process described by change\nI7008706aae06b6e4a16db2dd85a8c7f91530cd50.\n\nDepends-On: https://review.opendev.org/815548\nChange-Id: I53f11a249b5e09c84d65644ee609553a9b6e6353\n'}, {'number': 2, 'created': '2021-10-26 20:09:22.000000000', 'files': ['doc/source/index.rst', 'doc/source/static/0x01527a34f0d0080f8a5db8d6eb6c5df21b4b6363.txt'], 'web_link': 'https://opendev.org/openstack/releases/commit/17a919886900843b4641461e9cca4bc5b8c7073d', 'message': 'List the Yoga cycle signing key as current\n\nThis sets the end date for the Xena key, adds the Yoga key starting\ntoday and links to an export of the corresponding public key. It\nalso drops references to the now defunct SKS keyserver network and\nour old rotation process which was tied to it. Instead the key has\nbeen created following the new process described by change\nI7008706aae06b6e4a16db2dd85a8c7f91530cd50.\n\nDepends-On: https://review.opendev.org/815548\nChange-Id: I53f11a249b5e09c84d65644ee609553a9b6e6353\n'}]",3,815550,17a919886900843b4641461e9cca4bc5b8c7073d,10,3,2,5263,,,0,"List the Yoga cycle signing key as current

This sets the end date for the Xena key, adds the Yoga key starting
today and links to an export of the corresponding public key. It
also drops references to the now defunct SKS keyserver network and
our old rotation process which was tied to it. Instead the key has
been created following the new process described by change
I7008706aae06b6e4a16db2dd85a8c7f91530cd50.

Depends-On: https://review.opendev.org/815548
Change-Id: I53f11a249b5e09c84d65644ee609553a9b6e6353
",git fetch https://review.opendev.org/openstack/releases refs/changes/50/815550/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/index.rst', 'doc/source/static/0x01527a34f0d0080f8a5db8d6eb6c5df21b4b6363.txt']",2,3d1b8bba34ba004d67b8011f6c51d5759f1b3ddf,artifact-signing,pub ed25519/0xEB6C5DF21B4B6363 2021-10-26 [SC] [expires: 2022-07-23] Key fingerprint = 0152 7A34 F0D0 080F 8A5D B8D6 EB6C 5DF2 1B4B 6363 uid [ultimate] OpenStack Infra (Yoga Cycle) <infra-root@openstack.org> sig 3 0xEB6C5DF21B4B6363 2021-10-26 OpenStack Infra (Yoga Cycle) <infra-root@openstack.org> sig 0x7C5A3BC787DC7035 2021-10-26 OpenStack Infra (Xena Cycle) <infra-root@openstack.org> sub cv25519/0xA7F890E391EEBA5F 2021-10-26 [E] [expires: 2022-07-23] sig 0xEB6C5DF21B4B6363 2021-10-26 OpenStack Infra (Yoga Cycle) <infra-root@openstack.org> sub ed25519/0x63643A8728715809 2021-10-26 [S] sig 0xEB6C5DF21B4B6363 2021-10-26 OpenStack Infra (Yoga Cycle) <infra-root@openstack.org> -----BEGIN PGP PUBLIC KEY BLOCK----- mDMEYXhH3RYJKwYBBAHaRw8BAQdAwe/8IOOw398daZG5qHvPZEAA45E9o0SR+5V4 aBvXl+G0N09wZW5TdGFjayBJbmZyYSAoWW9nYSBDeWNsZSkgPGluZnJhLXJvb3RA b3BlbnN0YWNrLm9yZz6IlgQTFggAPhYhBAFSejTw0AgPil241utsXfIbS2NjBQJh eEfdAhsDBQkBY/UABQsJCAcCBhUKCQgLAgQWAgMBAh4BAheAAAoJEOtsXfIbS2Nj fOUA/2AJN5lQHjopAIKzUpDVOGoFrMHhdTVKO5y/YYcnKlDWAQDmeOhSfVGNfdtZ NAhUIcDTHUySLknsqsV1SSHjUVShD4h1BBAWCAAdFiEETCn/DkN/M1H9gr30fFo7 x4fccDUFAmF4SfgACgkQfFo7x4fccDX8zwD/dEKaIisvyjjzmTgg93FJDMyrTWe/ DRe9Ht+HyqT5BRoA/AhauUQad/poCMzw94L8xYWNRdObexx6kU3xEIZGegAOuDgE YXhH3RIKKwYBBAGXVQEFAQEHQMfybZCpBHbBOSeG5MLsmU9G0xNDRm496PzjPCRA pkpaAwEIB4h+BBgWCAAmFiEEAVJ6NPDQCA+KXbjW62xd8htLY2MFAmF4R90CGwwF CQFj9QAACgkQ62xd8htLY2N2DgEAvo1i5LdHxwIrCkElSTKj/hLyh4/oorZZnZCe wTIcsMoBAIw/JloDYLXiporuKCmCKvjJu8rXx4hfhmTdzGPTVsYMuDMEYXhIeRYJ KwYBBAHaRw8BAQdANzis/yGLMWEVCcGLwgizkxAGc2jzLtFFCO8AEvFWFwiI7wQY FggAIBYhBAFSejTw0AgPil241utsXfIbS2NjBQJheEh5AhsCAIEJEOtsXfIbS2Nj diAEGRYIAB0WIQQZdOU0SAwSEkzcK7NjZDqHKHFYCQUCYXhIeQAKCRBjZDqHKHFY Cc/2APwOMUnssjVRZYp0LPe682/tI3AS5ilCAxlR3TlslVZE/AEAjnAIen3SRKMn 8TWmlB53HjVwHTLcgcx7WVZANt9Qvw7zbQEA5jHzv8Y9JKhnKtA/AnsjqaF/Ot2F CJ3PsqyUIlU7k8EA/0WTosgYKmAqtyRsk673I1JohzCyYgiI+YbwQ/CbsM0K =6UEt -----END PGP PUBLIC KEY BLOCK----- ,,52,34
openstack%2Ftripleo-heat-templates~master~I7739050393840b63c4c40f4eeddb288e73b6b903,openstack/tripleo-heat-templates,master,I7739050393840b63c4c40f4eeddb288e73b6b903,Do not force streams when SkipRhelEnforcement.,ABANDONED,2021-10-26 13:36:30.000000000,2021-10-28 09:00:41.000000000,,"[{'_account_id': 8297}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 26343}, {'_account_id': 32432}, {'_account_id': 33080}]","[{'number': 1, 'created': '2021-10-26 13:36:30.000000000', 'files': ['deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml', 'deployment/undercloud/undercloud-upgrade.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b3125b194b1a53f1b44e1d84fa40ecaf7c7503f3', 'message': ""Do not force streams when SkipRhelEnforcement.\n\nIn the case a customer has their own repositories and do not require\nto ensure the right RHEL version is set in subscription-manager\n(passing SkipRhelEnforcement: true) we shouldn't enforce the setting up\nof the streams, as the content is ensured by the user.\n\nChange-Id: I7739050393840b63c4c40f4eeddb288e73b6b903\nResolves: rhbz#2008421\n""}]",2,815504,b3125b194b1a53f1b44e1d84fa40ecaf7c7503f3,6,6,1,26343,,,0,"Do not force streams when SkipRhelEnforcement.

In the case a customer has their own repositories and do not require
to ensure the right RHEL version is set in subscription-manager
(passing SkipRhelEnforcement: true) we shouldn't enforce the setting up
of the streams, as the content is ensured by the user.

Change-Id: I7739050393840b63c4c40f4eeddb288e73b6b903
Resolves: rhbz#2008421
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/04/815504/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/tripleo-packages/tripleo-packages-baremetal-puppet.yaml', 'deployment/undercloud/undercloud-upgrade.yaml']",2,b3125b194b1a53f1b44e1d84fa40ecaf7c7503f3,, - not (skip_rhel_enforcement | bool),,2,0
openstack%2Fnova-specs~master~I6004797ffe64e5eb7da9e20dde38162805e3756e,openstack/nova-specs,master,I6004797ffe64e5eb7da9e20dde38162805e3756e,support ironic instance change host while it's host not up,ABANDONED,2021-07-30 07:04:52.000000000,2021-10-28 08:51:35.000000000,,"[{'_account_id': 9708}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-30 07:04:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/440ab5f261feea37b6cbc4265e9e4fbc98a2c9ab', 'message': ""support ironic instance change host while it's host not up\n\nCompute service for IronicDriver had been supported multiple host from\nNewton release, but an ironic instance can't be managed by nova if\nits hypervisor is brought down. Even more serious, an IronicDriver\ncompute usually has a number of ironic hypervisor, while a compute\nservice goes down, many hypervisor go down. Fortunately, The ironic\nhypervisor does not actually create and run instances, so we just need to\nre-select a host for ironic instance host that has an up compute\nservice, and change it then we can manage the instance again.\n\nImplements: https://blueprints.launchpad.net/nova/+spec/ironic-instance-change-host\nChange-Id: I6004797ffe64e5eb7da9e20dde38162805e3756e\n""}, {'number': 2, 'created': '2021-07-30 07:08:30.000000000', 'files': ['specs/victoria/approved/ironic-instance-change-host.rst'], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/f3aef72e58338dafa3582381330a9a69f1c788fb', 'message': ""support ironic instance change host while it's host not up\n\nCompute service for IronicDriver had been supported multiple host from\nNewton release, but an ironic instance can't be managed by nova if\nits hypervisor is brought down. Even more serious, an IronicDriver\ncompute usually has a number of ironic hypervisor, while a compute\nservice goes down, many hypervisor go down. Fortunately, The ironic\nhypervisor does not actually create and run instances, so we just need to\nre-select a host for ironic instance host that has an up compute\nservice, and change it then we can manage the instance again.\n\nImplements: [blueprint ironic-instance-change-host](https://blueprints.launchpad.net/nova/+spec/ironic-instance-change-host)\nChange-Id: I6004797ffe64e5eb7da9e20dde38162805e3756e\n""}]",2,802991,f3aef72e58338dafa3582381330a9a69f1c788fb,7,2,2,32281,,,0,"support ironic instance change host while it's host not up

Compute service for IronicDriver had been supported multiple host from
Newton release, but an ironic instance can't be managed by nova if
its hypervisor is brought down. Even more serious, an IronicDriver
compute usually has a number of ironic hypervisor, while a compute
service goes down, many hypervisor go down. Fortunately, The ironic
hypervisor does not actually create and run instances, so we just need to
re-select a host for ironic instance host that has an up compute
service, and change it then we can manage the instance again.

Implements: [blueprint ironic-instance-change-host](https://blueprints.launchpad.net/nova/+spec/ironic-instance-change-host)
Change-Id: I6004797ffe64e5eb7da9e20dde38162805e3756e
",git fetch https://review.opendev.org/openstack/nova-specs refs/changes/91/802991/2 && git format-patch -1 --stdout FETCH_HEAD,['specs/victoria/approved/ironic-instance-change-host.rst'],1,440ab5f261feea37b6cbc4265e9e4fbc98a2c9ab,bp/ironic-instance-change-host,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode =========================================================== support ironic instance change host while it's host not up =========================================================== https://blueprints.launchpad.net/nova/+spec/ironic-instance-change-host Compute service for IronicDriver had been supported multiple host from Newton release, but an ironic instance can't be managed by nova if its hypervisor is brought down. Even more serious, an IronicDriver compute usually has a number of ironic hypervisor, while a compute service goes down, many hypervisor go down. Fortunately, The ironic hypervisor does not actually create and run instances, so we just need to re-select a host for ironic instance host that has an up compute service, and change it then we can manage the instance again. Problem description =================== In a production environment, many problems can give rise to computes service error or down. The most common ones are: network interruption, message queue service exception, host crash or power failure. Once the compute service of IronicDriver is down, all of ironic hypervisor enrolled on this host go down, then nova can't manage these ironic instances. It is should note that a baremetal node in available provisioning state can be managed because the service could choose another compute service for its hypervisor from IronicDriver compute service hash ring, but case of the baremetal node has an instance is not be dealt. Use Cases --------- This is a great help to operator improve high availability of ironic instance, so that the vendor of controller can manage and watch the ironic instance continuously. Of course, the cluster has more than one nova-compute service for Ironic is the first request, and these service should be distributed among different hosts. Proposed change =============== We'll add a logic in ``nova.driver.IronicDriver`` to deal with that an ironic instance. The existing of processing logic of IronicDriver is: the method ``get_available_nodes()`` returns these nodes from the compute service which are: * any node without an instance and mapped to this compute service on hash ring; * any node with an instance managed by this compute service; The problem is those node with instance is ignored their compute service was brought down, we fix this problem using follow method: Change host of ironic instance without an up state service. First we check whether each bare metal node has an instance, if so which is it; Second we get the service managing the instance and check its state is up or down, we can call the service original_service. If the service is up, we do nothing; else, the service is down, we get a new service from hash ring and set host of the instance to the service's, we call the new one new_service. So, the logic of ``get_available_nodes()`` in IronicDriver becomes: * return any node without an instance and mapped to this compute service on hash ring; * return any node with an instance managed by this compute service; * any node with an instance but couldn't managed are update a new host, but not return; The next, the new_service will find it has a compute node no in nova db compute_nodes table; the resource_tracker will update the hypervisor while running ``update_available_resource()`` method. That finished, the hypervisor had been changed to the new computes service, the instance can be managed again by nova. It must be note that during the host of instance changed and hypervisor's unchanged the nova-compute service will raise an error from ``nova.compute.manager`` and warning info from ``nova.compute.resource_tracker``: ``No compute node record for host <host of new_service>.`` These can be fixed while next time periodic task start. Alternatives ------------ We didn't have a better idea. Another workable way is set all of compute services with a same hostname, aggregate all compute services as one. It maybe work while the cluster has a few of nodes, but the request maybe still be sent to a service that is already down. Data model impact ----------------- None. REST API impact --------------- None. Security impact --------------- None. Notifications impact -------------------- None. Other end user impact --------------------- None. Performance Impact ------------------ Each service will check each ironic instance, so the load of periodic task will increase. Other deployer impact --------------------- None. Developer impact ---------------- None, though Ironic driver developers should be aware of the situation. Upgrade impact -------------- None Implementation ============== Assignee(s) ----------- Primary assignee: Simon Li(no-bug) Feature Liaison --------------- Liaison Needed Work Items ---------- * check and update the host of ironic instance with down service in IronicDriver. Dependencies ============ None Testing ======= This code will run in the default devstack configuration. Documentation Impact ==================== Maybe an ops guide update when we're pretty sure this is stable. References ========== History ======= .. list-table:: Revisions :header-rows: 1 * - Release Name - Description * - Victoria - Wait to be approved. ",,200,0
openstack%2Ftripleo-ci~master~I5d552b1582f25f5b98868326e51f85563809e9d2,openstack/tripleo-ci,master,I5d552b1582f25f5b98868326e51f85563809e9d2,"Cleanup Exclude list - c8 victoria, c8/c7 train, stein, queens",MERGED,2021-10-26 09:36:45.000000000,2021-10-28 08:40:06.000000000,2021-10-28 08:40:06.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 20182}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}, {'_account_id': 31075}]","[{'number': 1, 'created': '2021-10-26 09:36:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ce6e6c56cd7b7799913714555b9bc4e20a7ba364', 'message': 'Cleanup Exclude list - c8 victoria, c8/c7 train\n\nRemoving containers which are no longer used\nStory: #TRIPLEOCI-693\n\nChange-Id: I5d552b1582f25f5b98868326e51f85563809e9d2\n'}, {'number': 2, 'created': '2021-10-26 10:00:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ed2fc24954af822ff8c51d63bf5c91ad728c880f', 'message': 'Cleanup Exclude list - c8 victoria, c8/c7 train, stein, queens\n\nRemoving containers which are no longer used\nStory: #TRIPLEOCI-693\n\nChange-Id: I5d552b1582f25f5b98868326e51f85563809e9d2\n'}, {'number': 3, 'created': '2021-10-27 07:55:02.000000000', 'files': ['roles/build-containers/vars/main.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/e72c69cd74fc1da7ca1ab150d96ee1ebd5013312', 'message': 'Cleanup Exclude list - c8 victoria, c8/c7 train, stein, queens\n\nRemoving containers which are no longer used and defined in tripleo-common/container-images/tripleo_containers.yaml [1][2]\n\n[1] https://opendev.org/openstack/tripleo-common/src/branch/stable/victoria/container-images/tripleo_containers.yaml\n[2] https://opendev.org/openstack/tripleo-common/src/branch/stable/train/container-images/tripleo_containers.yaml\n\nStory: #TRIPLEOCI-693\n\nChange-Id: I5d552b1582f25f5b98868326e51f85563809e9d2\n'}]",9,815456,e72c69cd74fc1da7ca1ab150d96ee1ebd5013312,20,9,3,32458,,,0,"Cleanup Exclude list - c8 victoria, c8/c7 train, stein, queens

Removing containers which are no longer used and defined in tripleo-common/container-images/tripleo_containers.yaml [1][2]

[1] https://opendev.org/openstack/tripleo-common/src/branch/stable/victoria/container-images/tripleo_containers.yaml
[2] https://opendev.org/openstack/tripleo-common/src/branch/stable/train/container-images/tripleo_containers.yaml

Story: #TRIPLEOCI-693

Change-Id: I5d552b1582f25f5b98868326e51f85563809e9d2
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/56/815456/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/build-containers/vars/main.yaml'],1,ce6e6c56cd7b7799913714555b9bc4e20a7ba364,cleanup-excludelist, - neutron-mlnx-agent ussuri: centos8: *exclude_containers train: centos7: &exclude_containers_train centos8: *exclude_containers_train, - fluentd - skydive-agent - skydive-analyzer - sensu-base - influxdb ussuri: centos8: *exclude_containers train: centos7: *exclude_containers centos8: *exclude_containers,6,10
openstack%2Ftempest~master~Ibcd6be807add81da3941369b9975a80141a1c8e1,openstack/tempest,master,Ibcd6be807add81da3941369b9975a80141a1c8e1,"Use ""resolvectl dns"" to retrieve the DNS nameservers",ABANDONED,2021-06-04 10:48:08.000000000,2021-10-28 08:27:28.000000000,,"[{'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 29088}]","[{'number': 1, 'created': '2021-06-04 10:48:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/f33d4570f111a692be1bdf00ea8ffa1e5324cc99', 'message': 'Use ""resolvectl dns"" to retrieve the DNS nameservers\n\nIf ""resolvectl"" [1] is present in the VM image (not in Cirros but in\nother advance images), the test retrieves the DNS nameservers from\nthe output of this command.\n\nOutput example:\n  root@ubuntu:~# resolvectl dns\n  Global: 3.3.4.4 3.3.3.3\n  Link 2 (ens3): 10.20.0.2 10.20.0.3\n\nThe DNS nameservers configured by the DHCP server should be in the\n""Global"" section.\n\n[1]https://man7.org/linux/man-pages/man1/resolvectl.1.html\n\nCloses-Bug: #1929523\nRelated-Bug: #1914229\nChange-Id: Ibcd6be807add81da3941369b9975a80141a1c8e1\n'}, {'number': 2, 'created': '2021-06-22 15:57:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/e853529d3001b11e2d60a5bdf412b93f20b98ceb', 'message': 'Use ""resolvectl dns"" to retrieve the DNS nameservers\n\nIf ""resolvectl"" [1] is present in the VM image (not in Cirros but in\nother advance images), the test retrieves the DNS nameservers from\nthe output of this command.\n\nOutput example:\n  root@ubuntu:~# resolvectl dns\n  Global: 3.3.4.4 3.3.3.3\n  Link 2 (ens3): 10.20.0.2 10.20.0.3\n  Link 3 (enp0s31f6):\n\nThe nameservers will be located under ""Global"" or in the corresponding\ninterface depending on the resolvectl configuration.\n\nThe new implemented method, ""_resolvectl_dns"", will create a set of\nnameservers per interface (on those ones with a non empty list).\nThe method will return a list of sets; e.g.:\n  [{""3.3.4.4"", ""3.3.3.3""}, {""10.20.0.2"", ""10.20.0.3""}]\n\nThe test case check this list of sets of nameservers with the expected\nset. If the expected set of nameservers match with any of them, the\nassertion is validated.\n\n[1]https://man7.org/linux/man-pages/man1/resolvectl.1.html\n\nCloses-Bug: #1929523\nRelated-Bug: #1914229\nChange-Id: Ibcd6be807add81da3941369b9975a80141a1c8e1\n'}, {'number': 3, 'created': '2021-06-23 11:31:30.000000000', 'files': ['tempest/common/utils/linux/remote_client.py', 'tempest/scenario/test_network_basic_ops.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/94632236496a6d435b5960a561ad13ae0a838b92', 'message': 'Use ""resolvectl dns"" to retrieve the DNS nameservers\n\nIf ""resolvectl"" [1] is present in the VM image (not in Cirros but in\nother advance images), the test retrieves the DNS nameservers from\nthe output of this command.\n\nOutput example:\n  root@ubuntu:~# resolvectl dns\n  Global: 3.3.4.4 3.3.3.3\n  Link 2 (ens3): 10.20.0.2 10.20.0.3\n  Link 3 (enp0s31f6):\n\nThe nameservers will be located under ""Global"" or in the corresponding\ninterface depending on the resolvectl configuration.\n\nThe new implemented method, ""_resolvectl_dns"", will create a set of\nnameservers per interface (on those ones with a non empty list).\nThe method will return a list of sets; e.g.:\n  [{""3.3.4.4"", ""3.3.3.3""}, {""10.20.0.2"", ""10.20.0.3""}]\n\nThe test case check this list of sets of nameservers with the expected\nset. If the expected set of nameservers match with any of them, the\nassertion is validated.\n\n[1]https://man7.org/linux/man-pages/man1/resolvectl.1.html\n\nCloses-Bug: #1929523\nRelated-Bug: #1914229\nChange-Id: Ibcd6be807add81da3941369b9975a80141a1c8e1\n'}]",4,794776,94632236496a6d435b5960a561ad13ae0a838b92,14,3,3,16688,,,0,"Use ""resolvectl dns"" to retrieve the DNS nameservers

If ""resolvectl"" [1] is present in the VM image (not in Cirros but in
other advance images), the test retrieves the DNS nameservers from
the output of this command.

Output example:
  root@ubuntu:~# resolvectl dns
  Global: 3.3.4.4 3.3.3.3
  Link 2 (ens3): 10.20.0.2 10.20.0.3
  Link 3 (enp0s31f6):

The nameservers will be located under ""Global"" or in the corresponding
interface depending on the resolvectl configuration.

The new implemented method, ""_resolvectl_dns"", will create a set of
nameservers per interface (on those ones with a non empty list).
The method will return a list of sets; e.g.:
  [{""3.3.4.4"", ""3.3.3.3""}, {""10.20.0.2"", ""10.20.0.3""}]

The test case check this list of sets of nameservers with the expected
set. If the expected set of nameservers match with any of them, the
assertion is validated.

[1]https://man7.org/linux/man-pages/man1/resolvectl.1.html

Closes-Bug: #1929523
Related-Bug: #1914229
Change-Id: Ibcd6be807add81da3941369b9975a80141a1c8e1
",git fetch https://review.opendev.org/openstack/tempest refs/changes/76/794776/3 && git format-patch -1 --stdout FETCH_HEAD,['tempest/common/utils/linux/remote_client.py'],1,f33d4570f111a692be1bdf00ea8ffa1e5324cc99,bug/1929523,class CommandNotFound(tempest.lib.exceptions.TempestException): pass def _cat_resolvconf(self): return [l[1] for l in entries if len(l) and l[0] == 'nameserver'] def _resolvectl_dns(self): # Output expected: Global: 3.3.3.4 3.3.3.3 cmd = 'resolvectl dns | grep Global' output = self.exec_command(cmd).strip().split('\n') return output[0].split()[1:] if output else [] def get_dns_servers(self): try: return self._resolvectl_dns() except tempest.lib.exceptions.SSHExecCommandFailed: return self._cat_resolvconf(), def get_dns_servers(self): dns_servers = [l[1] for l in entries if len(l) and l[0] == 'nameserver'] return dns_servers,18,4
openstack%2Fkayobe~stable%2Fwallaby~I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9,openstack/kayobe,stable/wallaby,I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9,CI: Disable heat in upgrade jobs to save disk space,MERGED,2021-10-21 14:08:12.000000000,2021-10-28 08:00:49.000000000,2021-10-28 07:58:33.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-10-21 14:08:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/41c399a94340e9f74d5a9bc65ef57eee8c504367', 'message': 'Disable heat in upgrade jobs to save disk space\n\nWe see frequent failures of upgrade jobs on stable branches due to lack\nof disk space. Disable heat in an attempt to free up extra space, since\nwe do not need it for our testing.\n\nChange-Id: I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9\n'}, {'number': 2, 'created': '2021-10-21 14:09:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/a452bb79384e08ca37c36460856c5ad2a951c3d0', 'message': 'Disable heat in upgrade jobs to save disk space\n\nWe see frequent failures of upgrade jobs on stable branches due to lack\nof disk space. Disable heat in an attempt to free up extra space, since\nwe do not need it for our testing.\n\nChange-Id: I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9\n(cherry picked from commit e1664fd18d0596344dbf7c8095c74133a91d6df1)\n'}, {'number': 3, 'created': '2021-10-22 07:55:32.000000000', 'files': ['playbooks/kayobe-overcloud-upgrade-base/overrides.yml.j2'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/277121552300907ac6eb1308d1b4a64b48b4a2d5', 'message': 'CI: Disable heat in upgrade jobs to save disk space\n\nWe see frequent failures of upgrade jobs on stable branches due to lack\nof disk space. Disable heat in an attempt to free up extra space, since\nwe do not need it for our testing.\n\nChange-Id: I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9\n(cherry picked from commit 06a51ceaec37652df8573e48886a9203ec6e9c31)\n'}]",2,814932,277121552300907ac6eb1308d1b4a64b48b4a2d5,14,3,3,15197,,,0,"CI: Disable heat in upgrade jobs to save disk space

We see frequent failures of upgrade jobs on stable branches due to lack
of disk space. Disable heat in an attempt to free up extra space, since
we do not need it for our testing.

Change-Id: I20c99ca9dd6e78b041e4662c9b1b54eac904e3c9
(cherry picked from commit 06a51ceaec37652df8573e48886a9203ec6e9c31)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/32/814932/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/kayobe-overcloud-upgrade-base/overrides.yml.j2'],1,41c399a94340e9f74d5a9bc65ef57eee8c504367,ci-disable-heat-stable/wallaby, # Disable heat to save disk space. kolla_enable_heat: false,,3,0
openstack%2Fheat-dashboard~master~I013c0dd3fb090c41288dfb5643d386c88bec0b1c,openstack/heat-dashboard,master,I013c0dd3fb090c41288dfb5643d386c88bec0b1c,Imported Translations from Zanata,MERGED,2021-06-08 06:42:13.000000000,2021-10-28 07:57:19.000000000,2021-10-28 07:54:48.000000000,"[{'_account_id': 9542}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2021-06-08 06:42:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/66a6922bed393c298b7d5a515a1473387df6fc68', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}, {'number': 2, 'created': '2021-07-22 06:46:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/dd73ac8d05dddf997006d2753f481f034d52fa91', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}, {'number': 3, 'created': '2021-09-07 06:48:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/b63d5c493244163110442c00ecf687163af1fd43', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}, {'number': 4, 'created': '2021-09-17 06:58:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/f320ab222ed5a7eeaa56dc15ff4623159b4c390f', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}, {'number': 5, 'created': '2021-09-18 06:53:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/f8d2dd6693a5c091a9f3cd4702895f6bc03e3679', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}, {'number': 6, 'created': '2021-09-22 06:51:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/cc0ed7e25790d4c00c2d5d5d971be0e2e7771d16', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}, {'number': 7, 'created': '2021-10-23 03:01:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/f89868b27d183d6636f9e803052f0a1ec00e17a9', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}, {'number': 8, 'created': '2021-10-28 03:04:51.000000000', 'files': ['heat_dashboard/locale/es/LC_MESSAGES/django.po', 'heat_dashboard/locale/zh_Hant/LC_MESSAGES/django.po', 'releasenotes/source/locale/ru/LC_MESSAGES/releasenotes.po', 'heat_dashboard/locale/ru/LC_MESSAGES/django.po'], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/458e9b05191d2ab08749967f7d958f5c08597bc7', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c\n'}]",0,795223,458e9b05191d2ab08749967f7d958f5c08597bc7,25,3,8,11131,,,0,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I013c0dd3fb090c41288dfb5643d386c88bec0b1c
",git fetch https://review.opendev.org/openstack/heat-dashboard refs/changes/23/795223/5 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/source/locale/cs/LC_MESSAGES/releasenotes.po', 'heat_dashboard/locale/es/LC_MESSAGES/django.po', 'heat_dashboard/locale/zh_Hant/LC_MESSAGES/django.po', 'releasenotes/source/locale/es/LC_MESSAGES/releasenotes.po', 'releasenotes/source/locale/fr/LC_MESSAGES/releasenotes.po']",5,66a6922bed393c298b7d5a515a1473387df6fc68,zanata/translations,,"# Gaelle <pattedeph@gmail.com>, 2017. #zanata # Loic Nicolle <loic.nicolle@orange.com>, 2017. #zanata msgid """" msgstr """" ""Project-Id-Version: heat-dashboard\n"" ""Report-Msgid-Bugs-To: \n"" ""POT-Creation-Date: 2020-04-27 17:03+0000\n"" ""MIME-Version: 1.0\n"" ""Content-Type: text/plain; charset=UTF-8\n"" ""Content-Transfer-Encoding: 8bit\n"" ""PO-Revision-Date: 2017-11-14 07:50+0000\n"" ""Last-Translator: Gaelle <pattedeph@gmail.com>\n"" ""Language-Team: French\n"" ""Language: fr\n"" ""X-Generator: Zanata 4.3.3\n"" ""Plural-Forms: nplurals=2; plural=(n > 1)\n"" msgid ""Current Series Release Notes"" msgstr ""Notes sur la Release Actuelle"" msgid ""New Features"" msgstr ""Nouvelles fonctionnalités"" ",9,530
openstack%2Ftripleo-heat-templates~master~I7fa8e9931f27dbe3352b06c830441eac5bc3733e,openstack/tripleo-heat-templates,master,I7fa8e9931f27dbe3352b06c830441eac5bc3733e,Use ServiceNetMap to filter PublicNetwork in haproxy-tls,MERGED,2021-10-27 07:18:55.000000000,2021-10-28 07:54:57.000000000,2021-10-28 07:54:57.000000000,"[{'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24245}, {'_account_id': 28223}]","[{'number': 1, 'created': '2021-10-27 07:18:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ac310bbc431900d509cdd15da068140ff44161ce', 'message': 'Use ServiceNetMap to filter PublicNetwork in haproxy-tls\n\nReplace the filtering using the hard-coded ""external""\nnetwork name with a yaql filter using the PublicNetwork in\nServiceNetMap instead.\n\nThis should allow fully custom network name/name_lower to be\nused as long as service_net_map_replace is also used or the\nServiceNetMap is provided with appropriate overrides.\n\nAlso removes jinj2 filtering on \'tenant\' network, this network\ndoes not have a VIP by default so it is alreayd filtered by the\n\'and network.vip\' in the jinj2 for loop. In the case \'tenant\'\nnetwork does have VIP it would make sense to create a certificate\nfor it as well.\n\nRelated-Bug: #1946239\nChange-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e\n'}, {'number': 2, 'created': '2021-10-27 07:20:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/dac1a6c9e05d865c2951d8de70eb691ff2c0e5e6', 'message': 'Use ServiceNetMap to filter PublicNetwork in haproxy-tls\n\nReplace the filtering using the hard-coded ""external""\nnetwork name with a yaql filter using the PublicNetwork in\nServiceNetMap instead.\n\nThis should allow fully custom network name/name_lower to be\nused as long as service_net_map_replace is also used or the\nServiceNetMap is provided with appropriate overrides.\n\nAlso removes jinj2 filtering on \'tenant\' network, this network\ndoes not have a VIP by default so it is alreayd filtered by the\n\'and network.vip\' in the jinj2 for loop. In the case \'tenant\'\nnetwork does have VIP it would make sense to create a certificate\nfor it as well.\n\nRelated-Bug: #1946239\nChange-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e\n'}, {'number': 3, 'created': '2021-10-27 07:22:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/9fa0441705992dbccee1c5c97a1acac8d98a0be1', 'message': 'Use ServiceNetMap to filter PublicNetwork in haproxy-tls\n\nReplace the filtering using the hard-coded ""external""\nnetwork name with a yaql filter using the PublicNetwork in\nServiceNetMap instead.\n\nThis should allow fully custom network name/name_lower to be\nused as long as service_net_map_replace is also used or the\nServiceNetMap is provided with appropriate overrides.\n\nAlso removes jinj2 filtering on \'tenant\' network, this network\ndoes not have a VIP by default so it is alreayd filtered by the\n\'and network.vip\' in the jinj2 for loop. In the case \'tenant\'\nnetwork does have VIP it would make sense to create a certificate\nfor it as well.\n\nRelated-Bug: #1946239\nChange-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e\n'}, {'number': 4, 'created': '2021-10-27 10:01:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b0c4b73eb32d39572e442c265e75a7d98cc8d5d2', 'message': 'Use ServiceNetMap to filter PublicNetwork in haproxy-tls\n\nReplace the filtering using the hard-coded ""external""\nnetwork name with a yaql filter using the PublicNetwork in\nServiceNetMap instead.\n\nThis should allow fully custom network name/name_lower to be\nused as long as service_net_map_replace is also used or the\nServiceNetMap is provided with appropriate overrides.\n\nAlso removes jinj2 filtering on \'tenant\' network, this network\ndoes not have a VIP by default so it is alreayd filtered by the\n\'and network.vip\' in the jinj2 for loop. In the case \'tenant\'\nnetwork does have VIP it would make sense to create a certificate\nfor it as well.\n\nRelated-Bug: #1946239\nChange-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e\n'}, {'number': 5, 'created': '2021-10-27 10:32:25.000000000', 'files': ['deployment/haproxy/haproxy-internal-tls-certmonger.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/273b41a5da0267926072b9fd4e14c60db8180052', 'message': 'Use ServiceNetMap to filter PublicNetwork in haproxy-tls\n\nReplace the filtering using the hard-coded ""external""\nnetwork name with a yaql filter using the PublicNetwork in\nServiceNetMap instead.\n\nThis should allow fully custom network name/name_lower to be\nused as long as service_net_map_replace is also used or the\nServiceNetMap is provided with appropriate overrides.\n\nAlso removes jinj2 filtering on \'tenant\' network, this network\ndoes not have a VIP by default so it is alreayd filtered by the\n\'and network.vip\' in the jinj2 for loop. In the case \'tenant\'\nnetwork does have VIP it would make sense to create a certificate\nfor it as well.\n\nRelated-Bug: #1946239\nChange-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e\n'}]",9,815599,273b41a5da0267926072b9fd4e14c60db8180052,24,5,5,24245,,,0,"Use ServiceNetMap to filter PublicNetwork in haproxy-tls

Replace the filtering using the hard-coded ""external""
network name with a yaql filter using the PublicNetwork in
ServiceNetMap instead.

This should allow fully custom network name/name_lower to be
used as long as service_net_map_replace is also used or the
ServiceNetMap is provided with appropriate overrides.

Also removes jinj2 filtering on 'tenant' network, this network
does not have a VIP by default so it is alreayd filtered by the
'and network.vip' in the jinj2 for loop. In the case 'tenant'
network does have VIP it would make sense to create a certificate
for it as well.

Related-Bug: #1946239
Change-Id: I7fa8e9931f27dbe3352b06c830441eac5bc3733e
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/99/815599/5 && git format-patch -1 --stdout FETCH_HEAD,['deployment/haproxy/haproxy-internal-tls-certmonger.j2.yaml'],1,ac310bbc431900d509cdd15da068140ff44161ce,bug/1946239," # NOTE(jaosorior|hjensas) Get unique network names to create # certificates for those. # * The 'ctlplane' network is always included. # * The tenant network is skipped in jinj2 filter since it # does not have a VIP. We don't need a certificate for the # tenant nework. # * The ""external"" (PublicNetwork) network will be handled in # another template, it is skipped by a yaql filter on the # PublicNetwork defined in ServiceNetMap. yaql: expression: let(public_network => $.data.public_network) -> ['ctlplane'].concat($.networks.where($ != $public_network)) data: public_network: {get_param: [ServiceNetMap, PublicNetwork]} networks: - {{network.name_lower}}"," # NOTE(jaosorior) Get unique network names to create # certificates for those. We skip the tenant network since # we don't need a certificate for that, and the external # network will be handled in another template. - ctlplane {%- if network.name_lower != 'external' and network.name_lower != 'tenant' %} - {{network.name_lower}} {%- endif %}",15,8
openstack%2Fneutron~stable%2Fstein~I5db537709feabf57793a0ecb5e19497c65cece90,openstack/neutron,stable/stein,I5db537709feabf57793a0ecb5e19497c65cece90,[DNM] Test neutron-tempest-plugin fix,ABANDONED,2021-10-13 14:32:30.000000000,2021-10-28 07:42:23.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-13 14:32:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/09ab2e9e10c4868809088e7ed2f4e720a33e54a5', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nFor bug/1946748\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/813840\n'}, {'number': 2, 'created': '2021-10-14 15:10:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8cb4928c26239e0a2980ce8205fad07402e1a408', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nFor bug/1946748\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/813840\nDepends-On: https://review.opendev.org/813958\n'}, {'number': 3, 'created': '2021-10-26 09:49:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/efef70816020db88c9e24e7cb82716a20cd24b2b', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nFor bug/1946748\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815458\n'}, {'number': 4, 'created': '2021-10-26 09:55:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/370097d1408180207dacfbb80055aed2f7df3f16', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nNow checking for extra tests to filter out in Depends-On patch\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815458\n'}, {'number': 5, 'created': '2021-10-26 09:56:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8086b123dd105b8ccd927f8ab6ca3e47b4a25c81', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nNow checking for extra tests to filter out in Depends-On patch\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815458\n'}, {'number': 6, 'created': '2021-10-26 10:00:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/4e5ea4d19b57e70dad19743f5c04fcd19286afad', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nNow checking for extra tests to filter out in Depends-On patch\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815458\n'}, {'number': 7, 'created': '2021-10-26 10:04:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/2bbdb7ea86f3c07114df9faa8d0348a4f03fd677', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nNow checking for extra tests to filter out in Depends-On patch\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815458\n'}, {'number': 8, 'created': '2021-10-26 19:47:15.000000000', 'files': ['neutron/api/rpc/handlers/metadata_rpc.py', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/a8b971d1e21397c8139c840ca04c3fd35c2a4d0e', 'message': '[DNM] Test neutron-tempest-plugin fix\n\nNow checking for extra tests to filter out in Depends-On patch\n\nChange-Id: I5db537709feabf57793a0ecb5e19497c65cece90\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815458\nDepends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815518\n'}]",11,813841,a8b971d1e21397c8139c840ca04c3fd35c2a4d0e,57,1,8,21798,,,0,"[DNM] Test neutron-tempest-plugin fix

Now checking for extra tests to filter out in Depends-On patch

Change-Id: I5db537709feabf57793a0ecb5e19497c65cece90
Depends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815458
Depends-On: https://review.opendev.org/c/openstack/neutron-tempest-plugin/+/815518
",git fetch https://review.opendev.org/openstack/neutron refs/changes/41/813841/8 && git format-patch -1 --stdout FETCH_HEAD,['neutron/api/rpc/handlers/metadata_rpc.py'],1,09ab2e9e10c4868809088e7ed2f4e720a33e54a5,, # Dummy change,,1,0
openstack%2Fkuryr-tempest-plugin~master~I8c7a8b2dcfe4b93224b708f64dcda365f9ab8580,openstack/kuryr-tempest-plugin,master,I8c7a8b2dcfe4b93224b708f64dcda365f9ab8580,DNM: Testing Amphora issues,ABANDONED,2021-10-27 14:55:11.000000000,2021-10-28 07:37:31.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-27 14:55:11.000000000', 'files': ['kuryr_tempest_plugin/tests/scenario/base.py'], 'web_link': 'https://opendev.org/openstack/kuryr-tempest-plugin/commit/d971c7730250b93be317896b644b268f4c1743b5', 'message': 'DNM: Testing Amphora issues\n\nChange-Id: I8c7a8b2dcfe4b93224b708f64dcda365f9ab8580\n'}]",2,815688,d971c7730250b93be317896b644b268f4c1743b5,3,1,1,11600,,,0,"DNM: Testing Amphora issues

Change-Id: I8c7a8b2dcfe4b93224b708f64dcda365f9ab8580
",git fetch https://review.opendev.org/openstack/kuryr-tempest-plugin refs/changes/88/815688/1 && git format-patch -1 --stdout FETCH_HEAD,['kuryr_tempest_plugin/tests/scenario/base.py'],1,d971c7730250b93be317896b644b268f4c1743b5,check-sctp," time.sleep(120) time.sleep(120) cmd = ""python3 sctp_client.py {} {}"".format(server_ip, server_port)"," cmd = ""python3 sctp_client.py {} {}"".format( server_ip, server_port)",3,2
openstack%2Ftripleo-quickstart~master~I0ce36741b8e1b76f9210068485982cfe645f552f,openstack/tripleo-quickstart,master,I0ce36741b8e1b76f9210068485982cfe645f552f,WIP: Test the abscense of tripleo.operator,ABANDONED,2021-08-24 10:42:03.000000000,2021-10-28 07:28:59.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-08-24 10:42:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/98dc53aca9ad6eec91f34cc24490d9a97c6642ef', 'message': 'WIP: Test the abscense of tripleo.operator\n\nChange-Id: I0ce36741b8e1b76f9210068485982cfe645f552f\n'}, {'number': 2, 'created': '2021-09-23 10:26:03.000000000', 'files': ['config/general_config/featureset052.yml', 'ci-scripts/ci-base-requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/3fc9ab21bfce91919f81e84943548df159973c5e', 'message': 'WIP: Test the abscense of tripleo.operator\n\nChange-Id: I0ce36741b8e1b76f9210068485982cfe645f552f\nDepends-On: I0b670246ec6fe77632855c05c9d705be6359d820\n'}]",0,805805,3fc9ab21bfce91919f81e84943548df159973c5e,21,2,2,22954,,,0,"WIP: Test the abscense of tripleo.operator

Change-Id: I0ce36741b8e1b76f9210068485982cfe645f552f
Depends-On: I0b670246ec6fe77632855c05c9d705be6359d820
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/05/805805/2 && git format-patch -1 --stdout FETCH_HEAD,['ci-scripts/ci-base-requirements.txt'],1,98dc53aca9ad6eec91f34cc24490d9a97c6642ef,,,# As there is no sudo access on ci.centos slave node # So tripleo-operator-ansible needs to be installed on # ci.centos slave node so that quickstart will discover # the tripleo operator collections. git+https://opendev.org/openstack/tripleo-operator-ansible/#egg=tripleo-operator-ansible,0,5
openstack%2Fkolla-ansible~master~I1ff06162569c46c51847b4c31933861549787c65,openstack/kolla-ansible,master,I1ff06162569c46c51847b4c31933861549787c65,[mariadb] Drop some old workaround,MERGED,2021-09-26 13:48:39.000000000,2021-10-28 07:22:17.000000000,2021-10-28 07:20:24.000000000,"[{'_account_id': 19779}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 27339}, {'_account_id': 30491}, {'_account_id': 32029}, {'_account_id': 32657}, {'_account_id': 34017}]","[{'number': 1, 'created': '2021-09-26 13:48:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/33f245840b0f4c8ff7a625b551035b4992b3a77d', 'message': '[mariadb] Drop workarounds\n\nBoth are already addressed in the MariaDB version we will be\ntargetting.\n\nMoreover, innodb_lock_schedule_algorithm setting is removed in\nMariaDB 10.6.\n\nChange-Id: I1ff06162569c46c51847b4c31933861549787c65\n'}, {'number': 2, 'created': '2021-09-27 18:39:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6d72bf494008dade74c3246580d819ff828babf1', 'message': '[mariadb] Drop workarounds\n\nBoth are already addressed in the MariaDB version we will be\ntargetting.\n\nMoreover, innodb_lock_schedule_algorithm setting is removed in\nMariaDB 10.6.\n\nChange-Id: I1ff06162569c46c51847b4c31933861549787c65\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/811014\n'}, {'number': 3, 'created': '2021-09-27 18:39:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/e886a1ef12cf9eba56400ea19368196267a36fb4', 'message': '[mariadb] Drop workarounds\n\nBoth are already addressed in the MariaDB version we will be\ntargetting.\n\nMoreover, innodb_lock_schedule_algorithm setting is removed in\nMariaDB 10.6.\n\nChange-Id: I1ff06162569c46c51847b4c31933861549787c65\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/811014\n'}, {'number': 4, 'created': '2021-09-28 12:59:27.000000000', 'files': ['ansible/roles/mariadb/templates/galera.cnf.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/27dd69a7f6ba34d1fb078256fe597572ff8d1330', 'message': '[mariadb] Drop some old workaround\n\ninnodb_lock_schedule_algorithm setting is removed in MariaDB 10.6.\n\nChange-Id: I1ff06162569c46c51847b4c31933861549787c65\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/811014\n'}]",0,811035,27dd69a7f6ba34d1fb078256fe597572ff8d1330,32,8,4,30491,,,0,"[mariadb] Drop some old workaround

innodb_lock_schedule_algorithm setting is removed in MariaDB 10.6.

Change-Id: I1ff06162569c46c51847b4c31933861549787c65
Depends-On: https://review.opendev.org/c/openstack/kolla/+/811014
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/35/811035/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/mariadb/templates/galera.cnf.j2'],1,33f245840b0f4c8ff7a625b551035b4992b3a77d,mariadb-all-upstream-10.5,,"# The default value for innodb_lock_schedule_algorithm is VATS, but this does # not work with galera. Set FCFS explicitly to avoid a warning. # https://mariadb.com/kb/en/library/innodb-system-variables/#innodb_lock_schedule_algorithm. innodb_lock_schedule_algorithm = FCFS [sst] {% if sst_method == 'mariabackup' and api_address_family == 'ipv6' %} # NOTE(yoctozepto): for IPv6 we need to tweak sockopt for socat (mariabackup sst backend) # see: https://mariadb.com/kb/en/library/xtrabackup-v2-sst-method/#performing-ssts-with-ipv6-addresses # and: https://jira.mariadb.org/browse/MDEV-18797 # this can be removed when MDEV-18797 is resolved sockopt="",pf=ip6"" {% endif %}",0,14
openstack%2Fcharm-cinder-purestorage~master~I8f240bd8f9f00484d0b2c51b52090e05dfa51f73,openstack/charm-cinder-purestorage,master,I8f240bd8f9f00484d0b2c51b52090e05dfa51f73,Install multipath packages when option is set,NEW,2021-09-08 06:39:58.000000000,2021-10-28 06:57:08.000000000,,"[{'_account_id': 8992}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 30615}, {'_account_id': 33711}, {'_account_id': 33758}, {'_account_id': 33815}]","[{'number': 1, 'created': '2021-09-08 06:39:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-cinder-purestorage/commit/10b2c7f1fa8fa999ebb20b81759a63653c11d127', 'message': 'Install multipath packages when option is set\n\nMultipath packages are not automatically installed during the charm\ninstallation phase, even when use-multipath is set to true in the juju\nconfiguration.\n\nThis fix simply extends the packages attribute to add the multipath\npackages whenever the use-multipath option is set to true.\n\nCloses-Bug: #1938661\nChange-Id: I8f240bd8f9f00484d0b2c51b52090e05dfa51f73\n'}, {'number': 2, 'created': '2021-10-28 05:40:59.000000000', 'files': ['src/lib/charm/openstack/cinder_purestorage.py', 'src/reactive/cinder_purestorage_handlers.py'], 'web_link': 'https://opendev.org/openstack/charm-cinder-purestorage/commit/fbfb898faa812ba99f369a9710fcffb82e27f64e', 'message': 'Install multipath packages when option is set\n\nMultipath packages are not automatically installed during the charm\ninstallation phase, even when use-multipath is set to true in the juju\nconfiguration.\n\nThis fix simply extends the packages attribute to add the multipath\npackages whenever the use-multipath option is set to true.\n\nCloses-Bug: #1938661\nChange-Id: I8f240bd8f9f00484d0b2c51b52090e05dfa51f73\n'}]",3,807825,fbfb898faa812ba99f369a9710fcffb82e27f64e,15,7,2,33544,,,0,"Install multipath packages when option is set

Multipath packages are not automatically installed during the charm
installation phase, even when use-multipath is set to true in the juju
configuration.

This fix simply extends the packages attribute to add the multipath
packages whenever the use-multipath option is set to true.

Closes-Bug: #1938661
Change-Id: I8f240bd8f9f00484d0b2c51b52090e05dfa51f73
",git fetch https://review.opendev.org/openstack/charm-cinder-purestorage refs/changes/25/807825/2 && git format-patch -1 --stdout FETCH_HEAD,['src/lib/charm/openstack/cinder_purestorage.py'],1,10b2c7f1fa8fa999ebb20b81759a63653c11d127,bug/1938661,"MULTIPATH_PACKAGES = [ 'multipath-tools', 'sysfsutils', ] def install(self): if self.config.get('use-multipath'): self.packages.extend(MULTIPATH_PACKAGES) super().install() ",,10,0
openstack%2Fdiskimage-builder~master~Ica5c71c2926968d438ac1d0b0f16981cadf0bab1,openstack/diskimage-builder,master,Ica5c71c2926968d438ac1d0b0f16981cadf0bab1,dracut-regenerate: drop Python 2 packages,MERGED,2021-10-26 05:09:10.000000000,2021-10-28 05:57:19.000000000,2021-10-28 05:55:36.000000000,"[{'_account_id': 4146}, {'_account_id': 7118}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2021-10-26 05:09:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/728e15245fbc7d913bab2a91fdb3ed7db4fe4eac', 'message': ""dracut-regenerate: drop Python 2 packages\n\nWe don't support any Python 2 guest systems, drop the Python 2 bits\nfrom package-installs.\n\nChange-Id: Ica5c71c2926968d438ac1d0b0f16981cadf0bab1\n""}, {'number': 2, 'created': '2021-10-27 00:13:32.000000000', 'files': ['diskimage_builder/elements/dracut-regenerate/pkg-map', 'diskimage_builder/elements/dracut-regenerate/package-installs.yaml'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/57b7d2bcebd4d2dfd75c85a0f021c46e2b8afff1', 'message': ""dracut-regenerate: drop Python 2 packages\n\nWe don't support any Python 2 guest systems, drop the Python 2 bits\nfrom package-installs.\n\nChange-Id: Ica5c71c2926968d438ac1d0b0f16981cadf0bab1\n""}]",6,815409,57b7d2bcebd4d2dfd75c85a0f021c46e2b8afff1,23,4,2,7118,,,0,"dracut-regenerate: drop Python 2 packages

We don't support any Python 2 guest systems, drop the Python 2 bits
from package-installs.

Change-Id: Ica5c71c2926968d438ac1d0b0f16981cadf0bab1
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/09/815409/1 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/dracut-regenerate/pkg-map', 'diskimage_builder/elements/dracut-regenerate/package-installs.yaml']",2,728e15245fbc7d913bab2a91fdb3ed7db4fe4eac,fedora-dracut,,PyYAML: phase: pre-install.d dib_python_version: 2 installtype: package dib_python_version: 3,0,10
openstack%2Ftripleo-ansible~stable%2Fwallaby~Id6f89dfa7075e59f17fe847e3d14024aaa287933,openstack/tripleo-ansible,stable/wallaby,Id6f89dfa7075e59f17fe847e3d14024aaa287933,Add back testing for tripleo-ansible modules.,MERGED,2021-10-21 13:29:01.000000000,2021-10-28 05:32:47.000000000,2021-10-28 05:28:19.000000000,"[{'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 10969}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-10-21 13:29:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3c1cb9ad3946da2b2d784412e7a033f454370524', 'message': 'Add back testing for tripleo-ansible modules.\n\n[0] enabled the execution of molecule tests to cover the tripleo-ansible\nadded modules. However, the job was removed due to the movement to\ncollections.\n\nAs currently, none of the molecule tests under ansible_plugins/tests are\nbeing triggered by the CI any changes into the corresponding modules\nmight break their functionality and pass unnoticed.\n\nThis patch enables back the tripleo-ansible-centos-8-molecule-tripleo-modules\ntest which will get triggered when some of the corresponding modules\nget modified.\n\n[0]: https://github.com/openstack/tripleo-ansible/commit/2d420827378d43d79def26fb254cd33b7a6e89b5\nChange-Id: Id6f89dfa7075e59f17fe847e3d14024aaa287933\n(cherry picked from commit dd2fc8a73b89f3fb796e89ed0dbd6fc3a33a1eb0)\n'}, {'number': 2, 'created': '2021-10-27 15:33:48.000000000', 'files': ['zuul.d/molecule.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/50faa88c7c3860d68203050e7da1212595035cbf', 'message': 'Add back testing for tripleo-ansible modules.\n\n[0] enabled the execution of molecule tests to cover the tripleo-ansible\nadded modules. However, the job was removed due to the movement to\ncollections.\n\nAs currently, none of the molecule tests under ansible_plugins/tests are\nbeing triggered by the CI any changes into the corresponding modules\nmight break their functionality and pass unnoticed.\n\nThis patch enables back the tripleo-ansible-centos-8-molecule-tripleo-modules\ntest which will get triggered when some of the corresponding modules\nget modified.\n\n[0]: https://github.com/openstack/tripleo-ansible/commit/2d420827378d43d79def26fb254cd33b7a6e89b5\nChange-Id: Id6f89dfa7075e59f17fe847e3d14024aaa287933\n(cherry picked from commit dd2fc8a73b89f3fb796e89ed0dbd6fc3a33a1eb0)\n'}]",2,814931,50faa88c7c3860d68203050e7da1212595035cbf,16,6,2,26343,,,0,"Add back testing for tripleo-ansible modules.

[0] enabled the execution of molecule tests to cover the tripleo-ansible
added modules. However, the job was removed due to the movement to
collections.

As currently, none of the molecule tests under ansible_plugins/tests are
being triggered by the CI any changes into the corresponding modules
might break their functionality and pass unnoticed.

This patch enables back the tripleo-ansible-centos-8-molecule-tripleo-modules
test which will get triggered when some of the corresponding modules
get modified.

[0]: https://github.com/openstack/tripleo-ansible/commit/2d420827378d43d79def26fb254cd33b7a6e89b5
Change-Id: Id6f89dfa7075e59f17fe847e3d14024aaa287933
(cherry picked from commit dd2fc8a73b89f3fb796e89ed0dbd6fc3a33a1eb0)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/31/814931/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/molecule.yaml', 'tox.ini']",2,3c1cb9ad3946da2b2d784412e7a033f454370524,," [testenv:modules] deps= {[testenv:linters]deps} commands = bash -c ""cd {toxinidir}/tripleo_ansible/ansible_plugins/tests; molecule test --all;"" {[testenv:linters]commands}",,19,0
openstack%2Fdiskimage-builder~master~I701ae853a12d1d34176ebf437f3133de0c5d0e9b,openstack/diskimage-builder,master,I701ae853a12d1d34176ebf437f3133de0c5d0e9b,centos-minimal: boot test 9-stream,ABANDONED,2021-10-21 01:43:07.000000000,2021-10-28 05:16:05.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-21 01:43:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/f6eba4778320498143f3588162419338fa019a19', 'message': 'centos-minimal: boot test 9-stream\n\nChange-Id: I701ae853a12d1d34176ebf437f3133de0c5d0e9b\n'}, {'number': 2, 'created': '2021-10-21 02:19:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/88ad2d0eb4f0b7cac73b0b2de711d192afaeee15', 'message': 'centos-minimal: boot test 9-stream\n\nChange-Id: I701ae853a12d1d34176ebf437f3133de0c5d0e9b\n'}, {'number': 3, 'created': '2021-10-21 03:17:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/1f98857228d6fc2965d732da81474c077ed97c2a', 'message': 'centos-minimal: boot test 9-stream\n\nDepends-On: https://review.opendev.org/c/zuul/nodepool/+/806312\nChange-Id: I701ae853a12d1d34176ebf437f3133de0c5d0e9b\n'}, {'number': 4, 'created': '2021-10-25 00:07:27.000000000', 'files': ['.zuul.d/project.yaml', '.zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/d743b26dccb26663446a1f612307573c83aa2b92', 'message': 'centos-minimal: boot test 9-stream\n\nChange-Id: I701ae853a12d1d34176ebf437f3133de0c5d0e9b\n'}]",7,814844,d743b26dccb26663446a1f612307573c83aa2b92,24,1,4,7118,,,0,"centos-minimal: boot test 9-stream

Change-Id: I701ae853a12d1d34176ebf437f3133de0c5d0e9b
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/44/814844/4 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.d/project.yaml', '.zuul.d/jobs.yaml']",2,f6eba4778320498143f3588162419338fa019a19,change-811392," name: dib-nodepool-functional-openstack-centos-9-stream-src description: | Test building and booting a Centos 9 Stream image with Nodepool and OpenStack. parent: dib-nodepool-functional-src-base vars: nodepool_diskimage: base_element: centos-minimal release: '9-stream' # TODO: set when CentOS 9 Stream repos mirrored. # mirror: ""http://{{ zuul_site_mirror_fqdn }}/centos"" - job:", - centos-minimal/9-stream-build-succeeds- job: name: dib-functests-centos-8-stream-python3-image description: | The image tests on a CentOS 8 stream build host with Python 3 parent: dib-functests nodeset: centos-8-stream voting: false vars: dib_functests: - centos-minimal/9-stream-build-succeeds - centos-minimal/8-stream-build-succeeds ,15,13
openstack%2Fdiskimage-builder~master~Ia253f2fcf90d4ebb2bddd4839187a15e7e786720,openstack/diskimage-builder,master,Ia253f2fcf90d4ebb2bddd4839187a15e7e786720,[dnm] testing f34 with bullseye podman,ABANDONED,2021-10-27 22:49:13.000000000,2021-10-28 05:15:27.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-10-27 22:49:13.000000000', 'files': ['diskimage_builder/elements/fedora-container/containerfiles/34', '.zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/ec905cc89d6b7d90fd3d33ced10b86c571a3184a', 'message': '[dnm] testing f34 with bullseye podman\n\nChange-Id: Ia253f2fcf90d4ebb2bddd4839187a15e7e786720\n'}]",0,815763,ec905cc89d6b7d90fd3d33ced10b86c571a3184a,4,1,1,7118,,,0,"[dnm] testing f34 with bullseye podman

Change-Id: Ia253f2fcf90d4ebb2bddd4839187a15e7e786720
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/63/815763/1 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/fedora-container/containerfiles/34', '.zuul.d/project.yaml']",2,ec905cc89d6b7d90fd3d33ced10b86c571a3184a,f34-bullseye-podman,, templates: - openstack-cover-jobs - check-requirements - openstack-lower-constraints-jobs - release-notes-jobs # NOTE(ianw): 2020-05-29 jobs are unstable; see # https://bugs.launchpad.net/tripleo/+bug/1879766 - tripleo-buildimage-jobs-centos-8 - openstack-python3-wallaby-jobs - openstack-tox-pylint - dib-functests - dib-nodepool-functional-openstack-centos-7-src - dib-nodepool-functional-openstack-centos-8-src - dib-nodepool-functional-openstack-centos-8-stream-src - dib-nodepool-functional-openstack-ubuntu-xenial-src - dib-nodepool-functional-openstack-ubuntu-bionic-src - dib-nodepool-functional-openstack-ubuntu-focal-src # NOTE(ianw): 2020-04-22 these have been out of the gate for a # while; promote to voting after some stability. - dib-nodepool-functional-openstack-opensuse-15-src: voting: false - dib-nodepool-functional-openstack-opensuse-tumbleweed-src: voting: false - dib-nodepool-functional-openstack-gentoo-src: voting: false - dib-nodepool-functional-openstack-debian-bullseye-src: voting: false - ironic-python-agent-check-image-dib-centos8 # IPA job that builds AND validates an image via deployment - ipa-tempest-bios-ipmi-direct-src: voting: false check-arm64: jobs: - dib-functests-arm64,1,35
openstack%2Fzaqar~master~Id4c6a44417276950bd1fb92c2abc7c943960818a,openstack/zaqar,master,Id4c6a44417276950bd1fb92c2abc7c943960818a,Run TripleO jobs on CentOS8 instead of CentOS7,MERGED,2021-09-17 12:33:05.000000000,2021-10-28 04:05:50.000000000,2021-10-28 04:01:09.000000000,"[{'_account_id': 8846}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-17 12:33:05.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/zaqar/commit/9e028c9c0630aeea17100c416be74e1c81796b59', 'message': 'Run TripleO jobs on CentOS8 instead of CentOS7\n\nAs we are cleaning up the c7 jobs and obselete featuresets [1].\nThis change replaces usage of CentOS7 in TripleO jobs by CentOS8.\n\n[1]: https://review.opendev.org/q/topic:%22cleanup_featuresets%22+(status:open%20OR%20status:merged)\n\nChange-Id: Id4c6a44417276950bd1fb92c2abc7c943960818a\n'}]",1,809640,9e028c9c0630aeea17100c416be74e1c81796b59,9,2,1,20182,,,0,"Run TripleO jobs on CentOS8 instead of CentOS7

As we are cleaning up the c7 jobs and obselete featuresets [1].
This change replaces usage of CentOS7 in TripleO jobs by CentOS8.

[1]: https://review.opendev.org/q/topic:%22cleanup_featuresets%22+(status:open%20OR%20status:merged)

Change-Id: Id4c6a44417276950bd1fb92c2abc7c943960818a
",git fetch https://review.opendev.org/openstack/zaqar refs/changes/40/809640/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,9e028c9c0630aeea17100c416be74e1c81796b59,c7-to-c8, - tripleo-ci-centos-8-scenario002-standalone, - tripleo-ci-centos-7-scenario002-standalone,1,1
openstack%2Fos-brick~stable%2Fvictoria~I60ee7421f7b792e8324286908a9fdd8fb53e433e,openstack/os-brick,stable/victoria,I60ee7421f7b792e8324286908a9fdd8fb53e433e,multipath/iscsi: iSCSI connections are not reinitiated after reboot,MERGED,2021-10-27 18:56:29.000000000,2021-10-28 03:22:41.000000000,2021-10-28 03:20:43.000000000,"[{'_account_id': 5314}, {'_account_id': 9535}, {'_account_id': 18236}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2021-10-27 18:56:29.000000000', 'files': ['os_brick/tests/initiator/connectors/test_iscsi.py', 'os_brick/initiator/connectors/iscsi.py', 'releasenotes/notes/bug-1944474-55c5ebb3a37801aa.yaml'], 'web_link': 'https://opendev.org/openstack/os-brick/commit/7c7650b4de9fa319c8c42423502ccd55a510a417', 'message': 'multipath/iscsi: iSCSI connections are not reinitiated after reboot\n\nAfter compute host reboot, in an iSCSI/multipath environment, some\nof the connections to the iSCSI portal are not reinitiated and missing\niSCSI devices are observed. This patchset introduced retries for this\nparticular scenario.\n\nCloses-Bug: #1944474\nChange-Id: I60ee7421f7b792e8324286908a9fdd8fb53e433e\n(cherry picked from commit 8832c5389964973084cd0f80a2d8f7f24255ea3f)\n(cherry picked from commit 4d116483aff6efa425cd1b7b00e87f6385a9a725)\n(cherry picked from commit 779d1e48c79a7e47dd49ef8acaeeb61e99c253f0)\n'}]",3,815641,7c7650b4de9fa319c8c42423502ccd55a510a417,22,5,1,13425,,,0,"multipath/iscsi: iSCSI connections are not reinitiated after reboot

After compute host reboot, in an iSCSI/multipath environment, some
of the connections to the iSCSI portal are not reinitiated and missing
iSCSI devices are observed. This patchset introduced retries for this
particular scenario.

Closes-Bug: #1944474
Change-Id: I60ee7421f7b792e8324286908a9fdd8fb53e433e
(cherry picked from commit 8832c5389964973084cd0f80a2d8f7f24255ea3f)
(cherry picked from commit 4d116483aff6efa425cd1b7b00e87f6385a9a725)
(cherry picked from commit 779d1e48c79a7e47dd49ef8acaeeb61e99c253f0)
",git fetch https://review.opendev.org/openstack/os-brick refs/changes/41/815641/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_brick/tests/initiator/connectors/test_iscsi.py', 'os_brick/initiator/connectors/iscsi.py', 'releasenotes/notes/bug-1944474-55c5ebb3a37801aa.yaml']",3,7c7650b4de9fa319c8c42423502ccd55a510a417,bug/1944474-stable/xena-stable/wallaby-stable/victoria,--- fixes: - | `Bug #1944474 <https://bugs.launchpad.net/os-brick/+bug/1944474>`_: Fixed missing retries to reinitiate iSCSI connections with high concurrency of connections and with multipath enabled. ,,59,3
openstack%2Fopenstack-helm-infra~master~I0dd1f739ea4225dc56dc5bfd1fdafd872c8e4b73,openstack/openstack-helm-infra,master,I0dd1f739ea4225dc56dc5bfd1fdafd872c8e4b73,Move to bionic nagios image,MERGED,2021-10-27 16:29:32.000000000,2021-10-28 02:21:56.000000000,2021-10-28 02:05:24.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 30777}]","[{'number': 1, 'created': '2021-10-27 16:29:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/68a6d64729a1053d8a9e4a4afef0202056334a89', 'message': 'Move to bionic nagios image\n\nChange-Id: I0dd1f739ea4225dc56dc5bfd1fdafd872c8e4b73\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2021-10-27 17:39:16.000000000', 'files': ['nagios/Chart.yaml', 'nagios/values.yaml', 'releasenotes/notes/nagios.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/092e295a67423eb8d32fd2801def2a4e33a92c94', 'message': 'Move to bionic nagios image\n\nChange-Id: I0dd1f739ea4225dc56dc5bfd1fdafd872c8e4b73\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",2,815702,092e295a67423eb8d32fd2801def2a4e33a92c94,13,7,2,8863,,,0,"Move to bionic nagios image

Change-Id: I0dd1f739ea4225dc56dc5bfd1fdafd872c8e4b73
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/02/815702/1 && git format-patch -1 --stdout FETCH_HEAD,['nagios/values.yaml'],1,68a6d64729a1053d8a9e4a4afef0202056334a89,, nagios: docker.io/openstackhelm/nagios:latest-ubuntu_bionic, nagios: docker.io/openstackhelm/nagios:latest-ubuntu_xenial,1,1
openstack%2Ftripleo-heat-templates~stable%2Fvictoria~Ic045cdf0544fffeed51871d5b970fd29707fcd95,openstack/tripleo-heat-templates,stable/victoria,Ic045cdf0544fffeed51871d5b970fd29707fcd95,Added support for Neutron loggings service plugin configuration,MERGED,2021-10-12 10:24:55.000000000,2021-10-28 01:18:44.000000000,2021-10-28 01:15:21.000000000,"[{'_account_id': 7144}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-12 10:24:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e50b07c1195bfd6cd1d0bb838aa14cb24cc331ba', 'message': 'Added support for Neutron loggings service plugin configuration\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-neutron/+/813602\n\nConflicts:\n    deployment/neutron/neutron-l3-container-puppet.yaml\n    deployment/neutron/neutron-ovs-agent-container-puppet.yaml\n    deployment/neutron/neutron-plugin-ml2-ovn.yaml\n\nRelated: rhbz#1990357\nChange-Id: Ic045cdf0544fffeed51871d5b970fd29707fcd95\n(cherry picked from commit c9f0a5af0148f6a83b67422dabdaf786676c3756)\n'}, {'number': 2, 'created': '2021-10-25 20:10:52.000000000', 'files': ['deployment/neutron/neutron-l3-container-puppet.yaml', 'releasenotes/notes/neutron-logging-plugin-support-added-b2e1292d49e087c3.yaml', 'deployment/neutron/neutron-ovs-agent-container-puppet.yaml', 'deployment/neutron/neutron-plugin-ml2-ovn.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/21a1aebc4efaf9728675e513b61a546943e5887c', 'message': 'Added support for Neutron loggings service plugin configuration\n\nDepends-On: https://review.opendev.org/c/openstack/puppet-neutron/+/813602\n\nConflicts:\n    deployment/neutron/neutron-l3-container-puppet.yaml\n    deployment/neutron/neutron-ovs-agent-container-puppet.yaml\n    deployment/neutron/neutron-plugin-ml2-ovn.yaml\n\nRelated: rhbz#1990357\nChange-Id: Ic045cdf0544fffeed51871d5b970fd29707fcd95\n(cherry picked from commit c9f0a5af0148f6a83b67422dabdaf786676c3756)\n'}]",2,813582,21a1aebc4efaf9728675e513b61a546943e5887c,19,4,2,11975,,,0,"Added support for Neutron loggings service plugin configuration

Depends-On: https://review.opendev.org/c/openstack/puppet-neutron/+/813602

Conflicts:
    deployment/neutron/neutron-l3-container-puppet.yaml
    deployment/neutron/neutron-ovs-agent-container-puppet.yaml
    deployment/neutron/neutron-plugin-ml2-ovn.yaml

Related: rhbz#1990357
Change-Id: Ic045cdf0544fffeed51871d5b970fd29707fcd95
(cherry picked from commit c9f0a5af0148f6a83b67422dabdaf786676c3756)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/82/813582/2 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/neutron/neutron-l3-container-puppet.yaml', 'releasenotes/notes/neutron-logging-plugin-support-added-b2e1292d49e087c3.yaml', 'deployment/neutron/neutron-ovs-agent-container-puppet.yaml', 'deployment/neutron/neutron-plugin-ml2-ovn.yaml']",4,e50b07c1195bfd6cd1d0bb838aa14cb24cc331ba,log-extension-stable/victoria," NeutronOVNLoggingRateLimit: default: 100 description: | Maximum number of packets logging per second type: number NeutronOVNLoggingBurstLimit: default: 25 description: | Maximum number of packets per rate_limit type: number NeutronOVNLoggingLocalOutputLogBase: default: '' description: | Output logfile path on agent side, default syslog file type: string network_log_local_output_log_base_set: not: {equals : [{get_param: NeutronOVNLoggingLocalOutputLogBase}, '']} - neutron::agents::ml2::ovn::network_log_rate_limit: {get_param: NeutronOVNLoggingRateLimit} - neutron::agents::ml2::ovn::network_log_burst_limit: {get_param: NeutronOVNLoggingBurstLimit} - if: - network_log_local_output_log_base_set - neutron::agents::ml2::ovn::network_log_local_output_log_base: {get_param: NeutronOVNLoggingLocalOutputLogBase}",,82,1
openstack%2Ftripleo-quickstart-extras~master~Ia2ad24960fc3477390a868e6572c260543b5c37a,openstack/tripleo-quickstart-extras,master,Ia2ad24960fc3477390a868e6572c260543b5c37a,[EL9] Set NovaLibvirtNumPciePorts to 12,MERGED,2021-10-27 15:35:09.000000000,2021-10-28 01:15:24.000000000,2021-10-28 01:15:24.000000000,"[{'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2021-10-27 15:35:09.000000000', 'files': ['roles/overcloud-deploy/templates/config-download.yaml.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/eefc98e6d5afaea46fa866ee6900ef922551ea92', 'message': ""[EL9] Set NovaLibvirtNumPciePorts to 12\n\nTemporarily add a workaround for EL9 by setting\n~~~\nNovaLibvirtNumPciePorts: 12\n~~~\n\nIt's basically a workaround for a bug [1] in qemu that is currently\nbeing worked on.\n\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2006409\n\nRelated-Bug: #1947861\n\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\nChange-Id: Ia2ad24960fc3477390a868e6572c260543b5c37a\n""}]",1,815698,eefc98e6d5afaea46fa866ee6900ef922551ea92,12,5,1,12393,,,0,"[EL9] Set NovaLibvirtNumPciePorts to 12

Temporarily add a workaround for EL9 by setting
~~~
NovaLibvirtNumPciePorts: 12
~~~

It's basically a workaround for a bug [1] in qemu that is currently
being worked on.

[1] https://bugzilla.redhat.com/show_bug.cgi?id=2006409

Related-Bug: #1947861

Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
Change-Id: Ia2ad24960fc3477390a868e6572c260543b5c37a
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/98/815698/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-deploy/templates/config-download.yaml.j2'],1,eefc98e6d5afaea46fa866ee6900ef922551ea92,cs9,"# TODO: This is workaround for https://bugzilla.redhat.com/show_bug.cgi?id=2006409, Remove this # once this bug is fixed. {% if ansible_distribution_major_version is version(9, '>=') %} NovaLibvirtNumPciePorts: 12 {% endif %}",,5,0
openstack%2Fpyeclib~master~I00b6387858fbb05f0ace185b233cb6764627df04,openstack/pyeclib,master,I00b6387858fbb05f0ace185b233cb6764627df04,Moving IRC network reference to OFTC,ABANDONED,2021-07-08 13:28:34.000000000,2021-10-28 00:36:54.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-08 13:28:34.000000000', 'files': ['README.rst'], 'web_link': 'https://opendev.org/openstack/pyeclib/commit/b178548956537001956490339396046a4329e1b1', 'message': 'Moving IRC network reference to OFTC\n\nChange-Id: I00b6387858fbb05f0ace185b233cb6764627df04\n'}]",0,800052,b178548956537001956490339396046a4329e1b1,6,1,1,8556,,,0,"Moving IRC network reference to OFTC

Change-Id: I00b6387858fbb05f0ace185b233cb6764627df04
",git fetch https://review.opendev.org/openstack/pyeclib refs/changes/52/800052/1 && git format-patch -1 --stdout FETCH_HEAD,['README.rst'],1,b178548956537001956490339396046a4329e1b1,oftc,"For questions or any other help, come ask in #openstack-swift on OFTC.","For questions or any other help, come ask in #openstack-swift on freenode.",1,1
openstack%2Fneutron~stable%2Fwallaby~Ibffbbd3b529c31372715d9a064f7cb6bada8c424,openstack/neutron,stable/wallaby,Ibffbbd3b529c31372715d9a064f7cb6bada8c424,Delete SG log entries when SG is deleted,MERGED,2021-09-24 10:10:47.000000000,2021-10-28 00:13:23.000000000,2021-10-28 00:10:37.000000000,"[{'_account_id': 8313}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-24 10:10:47.000000000', 'files': ['neutron/tests/unit/services/logapi/test_logging_plugin.py', 'neutron/services/logapi/common/sg_callback.py', 'neutron/services/logapi/common/db_api.py', 'neutron/tests/unit/services/logapi/common/test_db_api.py', 'neutron/services/logapi/logging_plugin.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/e9539d63a9ced4b8e952d55f8b36d55ba8054cc3', 'message': ""Delete SG log entries when SG is deleted\n\nWhen security group is deleted, log entries configured for that SG\nweren't removed and stayed in the DB as orphaned entries.\nThat patch fixes that by subscribe logapi service plugin to the\nAFTER_DELETE security group events.\n\nCloses-bug: #1939558\nChange-Id: Ibffbbd3b529c31372715d9a064f7cb6bada8c424\n(cherry picked from commit 7f063223553a18345891bf42e88989edb67038e7)\n""}]",5,810870,e9539d63a9ced4b8e952d55f8b36d55ba8054cc3,29,4,1,11975,,,0,"Delete SG log entries when SG is deleted

When security group is deleted, log entries configured for that SG
weren't removed and stayed in the DB as orphaned entries.
That patch fixes that by subscribe logapi service plugin to the
AFTER_DELETE security group events.

Closes-bug: #1939558
Change-Id: Ibffbbd3b529c31372715d9a064f7cb6bada8c424
(cherry picked from commit 7f063223553a18345891bf42e88989edb67038e7)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/70/810870/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/services/logapi/test_logging_plugin.py', 'neutron/services/logapi/common/sg_callback.py', 'neutron/services/logapi/common/db_api.py', 'neutron/tests/unit/services/logapi/common/test_db_api.py', 'neutron/services/logapi/logging_plugin.py']",5,e9539d63a9ced4b8e952d55f8b36d55ba8054cc3,bug/1939558-stable/wallaby,"from neutron_lib.callbacks import events from neutron_lib.callbacks import registry from neutron_lib.callbacks import resourcesfrom neutron.services.logapi.common import db_api as log_db_api registry.subscribe( self._clean_security_group_logs, resources.SECURITY_GROUP, events.AFTER_DELETE) def _clean_security_group_logs(self, resource, event, trigger, payload): context = payload.context.elevated() sg_id = payload.resource_id with db_api.CONTEXT_WRITER.using(context): sg_logs = log_db_api.get_logs_bound_sg(context, sg_id) for log in sg_logs: self.delete_log(context, log['id']) ",,51,9
openstack%2Fmanila~stable%2Fxena~I1bd57eec3474768596cfab1bf2f8eb6123cc95a8,openstack/manila,stable/xena,I1bd57eec3474768596cfab1bf2f8eb6123cc95a8,Adapt CephFS driver to do not try to escape export ip,MERGED,2021-10-27 15:59:11.000000000,2021-10-27 23:50:55.000000000,2021-10-27 23:49:25.000000000,"[{'_account_id': 9003}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 30002}]","[{'number': 1, 'created': '2021-10-27 15:59:11.000000000', 'files': ['manila/share/drivers/cephfs/driver.py', 'releasenotes/notes/cephfs-fix-export-ip-escaping-on-hostname-e2866be32a8f5e38.yaml'], 'web_link': 'https://opendev.org/openstack/manila/commit/a1f8f4b293d6bb656109367f3531faea5f322402', 'message': ""Adapt CephFS driver to do not try to escape export ip\n\nChanges CephFS driver to do not try to escape export ip in case it\nis a hostname. The CephFS driver might use the hostname as an\nexport ip in case no ``cephfs_ganesha_server_ip`` is configured.\nIf that happens, we should not be allowing ip validations to occur\nuppon a hostname, because it differs from an IPv4 or IPv6 and that\nisn't necessarily an issue.\n\nChange-Id: I1bd57eec3474768596cfab1bf2f8eb6123cc95a8\n(cherry picked from commit 43ebc12fb53546a286ac6180db52ee8bbb775b1a)\n""}]",2,815635,a1f8f4b293d6bb656109367f3531faea5f322402,10,4,1,29632,,,0,"Adapt CephFS driver to do not try to escape export ip

Changes CephFS driver to do not try to escape export ip in case it
is a hostname. The CephFS driver might use the hostname as an
export ip in case no ``cephfs_ganesha_server_ip`` is configured.
If that happens, we should not be allowing ip validations to occur
uppon a hostname, because it differs from an IPv4 or IPv6 and that
isn't necessarily an issue.

Change-Id: I1bd57eec3474768596cfab1bf2f8eb6123cc95a8
(cherry picked from commit 43ebc12fb53546a286ac6180db52ee8bbb775b1a)
",git fetch https://review.opendev.org/openstack/manila refs/changes/35/815635/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/share/drivers/cephfs/driver.py', 'releasenotes/notes/cephfs-fix-export-ip-escaping-on-hostname-e2866be32a8f5e38.yaml']",2,a1f8f4b293d6bb656109367f3531faea5f322402,,"--- fixes: - | When ``cephfs_ganesha_server_ip`` is not set, the current hostname is used as a default for such config option. The driver was treating this value as an IP address and trying to perform validations on it. The CEPH NFS driver will no longer treat hostnames as ip addresses and try to validate them as such. ",,17,2
openstack%2Fmanila~master~I3ee10f53315a37b47bd66eba082502b4209f4d95,openstack/manila,master,I3ee10f53315a37b47bd66eba082502b4209f4d95,service_instance: allow overriding the instance name,MERGED,2021-09-29 14:38:27.000000000,2021-10-27 23:33:28.000000000,2021-10-27 23:31:49.000000000,"[{'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}]","[{'number': 1, 'created': '2021-09-29 14:38:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/8e3de69f858d02dc2db76b5e91ffb2c1c894220f', 'message': 'service_instance: allow overriding the instance name\n\nThis uses the method _get_service_instance_name to generate the name\nof the share service instance, instead of using directly the share\nservice id.\n\nNote that it changes the default value of the\nservice_instance_name_template option to match the current default and\nkeep backwards compatibility.\n\nCloses-Bug: #1945463\nSigned-off-by: David Caro <me@dcaro.es>\nChange-Id: I3ee10f53315a37b47bd66eba082502b4209f4d95\n'}, {'number': 2, 'created': '2021-09-29 16:48:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/3753b91bc67f2d992386b0974ecb041d8b5f5cb7', 'message': 'service_instance: allow overriding the instance name\n\nThis uses the method _get_service_instance_name to generate the name\nof the share service instance, instead of using directly the share\nservice id.\n\nNote that it changes the default value of the\nservice_instance_name_template option to match the current default and\nkeep backwards compatibility.\n\nCloses-Bug: #1945463\nChange-Id: I3ee10f53315a37b47bd66eba082502b4209f4d95\nSigned-off-by: David Caro <me@dcaro.es>\n'}, {'number': 3, 'created': '2021-10-26 08:59:10.000000000', 'files': ['manila/share/drivers/service_instance.py', 'releasenotes/notes/allow_override_instance_name-b730d106a9c32c83.yaml', 'manila/tests/share/drivers/test_service_instance.py', 'doc/source/configuration/tables/manila-generic.inc'], 'web_link': 'https://opendev.org/openstack/manila/commit/abfa2e2311a4462798acb6aff33a4ac9c24a0ceb', 'message': 'service_instance: allow overriding the instance name\n\nThis uses the method _get_service_instance_name to generate the name\nof the share service instance, instead of using directly the share\nservice id.\n\nNote that it changes the default value of the\nservice_instance_name_template option to match the current default and\nkeep backwards compatibility.\n\nCloses-Bug: #1945463\nChange-Id: I3ee10f53315a37b47bd66eba082502b4209f4d95\nSigned-off-by: David Caro <me@dcaro.es>\n'}]",9,811736,abfa2e2311a4462798acb6aff33a4ac9c24a0ceb,31,3,3,8212,,,0,"service_instance: allow overriding the instance name

This uses the method _get_service_instance_name to generate the name
of the share service instance, instead of using directly the share
service id.

Note that it changes the default value of the
service_instance_name_template option to match the current default and
keep backwards compatibility.

Closes-Bug: #1945463
Change-Id: I3ee10f53315a37b47bd66eba082502b4209f4d95
Signed-off-by: David Caro <me@dcaro.es>
",git fetch https://review.opendev.org/openstack/manila refs/changes/36/811736/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/share/drivers/service_instance.py', 'doc/source/configuration/tables/manila-generic.inc', 'manila/tests/share/drivers/test_service_instance.py']",3,8e3de69f858d02dc2db76b5e91ffb2c1c894220f,," expected_service_instance_name = self._manager._get_service_instance_name(fake_network_info['server_id']) expected_service_instance_name, fake_network_info) expected_service_instance_name = self._manager._get_service_instance_name(fake_network_info['server_id']) expected_service_instance_name, fake_network_info)"," fake_network_info['server_id'], fake_network_info) fake_network_info['server_id'], fake_network_info)",8,6
openstack%2Fopenstack-helm-images~master~I6a3cbf0fc85bef25461c97929bb4e41e4d3929d9,openstack/openstack-helm-images,master,I6a3cbf0fc85bef25461c97929bb4e41e4d3929d9,Remove xenial nagios dockerfile and build bionic instead,MERGED,2021-10-27 16:31:38.000000000,2021-10-27 22:22:13.000000000,2021-10-27 22:17:14.000000000,"[{'_account_id': 8898}, {'_account_id': 18250}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 30777}]","[{'number': 1, 'created': '2021-10-27 16:31:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/715840a980b60b9829263c5501472a05e3a84fb9', 'message': 'Remove xenial nagios dockerfile and build bionic instead\n\nDepends-On: https://review.opendev.org/815702\nChange-Id: I6a3cbf0fc85bef25461c97929bb4e41e4d3929d9\n'}, {'number': 2, 'created': '2021-10-27 17:31:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/308e7d6547255a672d09532477cdbad51f52039a', 'message': 'Remove xenial nagios dockerfile and build bionic instead\n\nDepends-On: https://review.opendev.org/815702\nChange-Id: I6a3cbf0fc85bef25461c97929bb4e41e4d3929d9\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2021-10-27 17:32:05.000000000', 'files': ['nagios/Dockerfile.ubuntu_xenial', 'zuul.d/nagios.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/65c2db26e52a678e57911c074ccaea52037de0c6', 'message': 'Remove xenial nagios dockerfile and build bionic instead\n\nChange-Id: I6a3cbf0fc85bef25461c97929bb4e41e4d3929d9\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",1,815704,65c2db26e52a678e57911c074ccaea52037de0c6,13,7,3,8863,,,0,"Remove xenial nagios dockerfile and build bionic instead

Change-Id: I6a3cbf0fc85bef25461c97929bb4e41e4d3929d9
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/04/815704/1 && git format-patch -1 --stdout FETCH_HEAD,"['nagios/Dockerfile.ubuntu_xenial', 'zuul.d/nagios.yaml']",2,715840a980b60b9829263c5501472a05e3a84fb9,, dockerfile: Dockerfile.ubuntu_bionic tags: - latest-ubuntu_bionic, dockerfile: Dockerfile.ubuntu_xenial tags: - latest-ubuntu_xenial,2,70
