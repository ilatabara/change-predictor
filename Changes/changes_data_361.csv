id,project,branch,change_id,subject,status,created,updated,submitted,reviewers,revisions,total_comment_count,number,current_revision,discussion_messages_count,reviewers_count,revisions_count,owner_account_id,owner_name,owner_username,is_owner_bot,commit_message,git_command,changed_files,files_count,commit_id,topic,added_lines,deleted_lines,insertions,deletions
openstack%2Foslo.db~master~Iba278fc17d0121cf6d8b48c42a18c6ccf73de6c8,openstack/oslo.db,master,Iba278fc17d0121cf6d8b48c42a18c6ccf73de6c8,Add libpq-dev to bindep.txt,MERGED,2019-08-09 22:48:41.000000000,2019-08-12 14:48:11.000000000,2019-08-12 14:48:11.000000000,"[{'_account_id': 6928}, {'_account_id': 9414}, {'_account_id': 11816}, {'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2019-08-09 22:48:41.000000000', 'files': ['bindep.txt'], 'web_link': 'https://opendev.org/openstack/oslo.db/commit/21e70f853e4b0934364277c12256ba70aa578563', 'message': 'Add libpq-dev to bindep.txt\n\nIt seems that this is needed in order to run the py37 tests in the\ngate. See the attached bug for the full error output from a failed\nrun.\n\nChange-Id: Iba278fc17d0121cf6d8b48c42a18c6ccf73de6c8\nCloses-Bug: 1839679\n'}]",0,675709,21e70f853e4b0934364277c12256ba70aa578563,10,6,1,6928,,,0,"Add libpq-dev to bindep.txt

It seems that this is needed in order to run the py37 tests in the
gate. See the attached bug for the full error output from a failed
run.

Change-Id: Iba278fc17d0121cf6d8b48c42a18c6ccf73de6c8
Closes-Bug: 1839679
",git fetch https://review.opendev.org/openstack/oslo.db refs/changes/09/675709/1 && git format-patch -1 --stdout FETCH_HEAD,['bindep.txt'],1,21e70f853e4b0934364277c12256ba70aa578563,python3-train,libpq-dev [platform:dpkg],,1,0
openstack%2Ftripleo-quickstart~master~I9d973a8f5fc3245492380885c58db21ee6711b72,openstack/tripleo-quickstart,master,I9d973a8f5fc3245492380885c58db21ee6711b72,Add py3 support for ARA install in setup.cfg,ABANDONED,2019-08-12 14:20:23.000000000,2019-08-12 14:43:28.000000000,,"[{'_account_id': 8449}, {'_account_id': 10022}, {'_account_id': 10969}, {'_account_id': 22318}, {'_account_id': 24162}]","[{'number': 1, 'created': '2019-08-12 14:20:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/f2dc9d2cf7746913801cf16eea32db8fa29ceecd', 'message': 'Add py3 support for ARA install in setup.cfg\n\nChange-Id: I9d973a8f5fc3245492380885c58db21ee6711b72\n'}, {'number': 2, 'created': '2019-08-12 14:22:22.000000000', 'files': ['ansible.cfg'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/f8e8a3ae0e26850df823af1a6e1edc403ae98b7d', 'message': 'Add py3 support for ARA install in setup.cfg\n\nChange-Id: I9d973a8f5fc3245492380885c58db21ee6711b72\n'}]",1,675909,f8e8a3ae0e26850df823af1a6e1edc403ae98b7d,4,5,2,9976,,,0,"Add py3 support for ARA install in setup.cfg

Change-Id: I9d973a8f5fc3245492380885c58db21ee6711b72
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/09/675909/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible.cfg'],1,f2dc9d2cf7746913801cf16eea32db8fa29ceecd,setup-python3,callback_plugins = {% if ansible_python.version.major == 3 %}/usr/local/lib/python3.6/site-packages{% else %}/usr/lib/python2.7/site-packages{% endif %}/ara/plugins/actions:$VIRTUAL_ENV/lib/python2.7/site-packages/ara/plugins/callbacks:/usr/local/lib/python2.7/dist-packages/ara/plugins/callbacks test_plugins = {% if ansible_python.version.major == 3 %}/usr/local/lib/python3.6/site-packages{% else %}/usr/lib/python2.7/site-packages{% endif %}/tripleo-quickstart/test_plugins:$VIRTUAL_ENV/usr/local/share/tripleo-quickstart/test_plugins:test_plugins library = {% if ansible_python.version.major == 3 %}/usr/local/lib/python3.6/site-packages{% else %}/usr/lib/python2.7/site-packages{% endif %}/tripleo-quickstart/library:$VIRTUAL_ENV/usr/local/share/tripleo-quickstart/library:library,callback_plugins = /usr/lib/python2.7/site-packages/ara/plugins/callbacks:$VIRTUAL_ENV/lib/python2.7/site-packages/ara/plugins/callbacks:/usr/local/lib/python2.7/dist-packages/ara/plugins/callbacks test_plugins = /usr/lib/python2.7/site-packages/tripleo-quickstart/test_plugins:$VIRTUAL_ENV/usr/local/share/tripleo-quickstart/test_plugins:test_plugins library = /usr/lib/python2.7/site-packages/tripleo-quickstart/library:$VIRTUAL_ENV/usr/local/share/tripleo-quickstart/library:library,3,3
openstack%2Foslo.policy~master~I2f12fb5058984c1fc6beda4d13f934dd9b218218,openstack/oslo.policy,master,I2f12fb5058984c1fc6beda4d13f934dd9b218218,Move doc related modules to doc/requirements.txt,MERGED,2019-07-05 17:52:21.000000000,2019-08-12 14:41:58.000000000,2019-08-12 14:41:58.000000000,"[{'_account_id': 6928}, {'_account_id': 15334}, {'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 28743}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-07-05 17:52:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/3555b1e898b4af390202d66a159067bbc1b9f614', 'message': 'Move doc related modules to doc/requirements.txt\n\nChange-Id: I2f12fb5058984c1fc6beda4d13f934dd9b218218\n'}, {'number': 2, 'created': '2019-07-06 01:46:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/45c380ecb6eda9b915d45a6c4f1bcbb487d37c89', 'message': 'Move doc related modules to doc/requirements.txt\n\nChange-Id: I2f12fb5058984c1fc6beda4d13f934dd9b218218\n'}, {'number': 3, 'created': '2019-07-06 10:39:03.000000000', 'files': ['.gitignore', 'doc/source/reference/index.rst', 'test-requirements.txt', 'doc/source/conf.py', 'doc/requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/530bbea2ee40b39b1dc1d7c43fd99aadade22de5', 'message': 'Move doc related modules to doc/requirements.txt\n\nChange-Id: I2f12fb5058984c1fc6beda4d13f934dd9b218218\n'}]",0,669427,530bbea2ee40b39b1dc1d7c43fd99aadade22de5,14,7,3,22165,,,0,"Move doc related modules to doc/requirements.txt

Change-Id: I2f12fb5058984c1fc6beda4d13f934dd9b218218
",git fetch https://review.opendev.org/openstack/oslo.policy refs/changes/27/669427/1 && git format-patch -1 --stdout FETCH_HEAD,"['.gitignore', 'doc/source/reference/index.rst', 'test-requirements.txt', 'doc/source/conf.py', 'doc/requirements.txt', 'tox.ini']",6,3555b1e898b4af390202d66a159067bbc1b9f614,,whitelist_externals = rm deps = {[testenv]deps} -r{toxinidir}/doc/requirements.txt commands = rm -rf doc/build sphinx-build -W -b html doc/source doc/build/html,commands = python setup.py build_sphinx,26,9
openstack%2Ftripleo-image-elements~master~I42530b64efc8e7be0d309401c284f16050256e8a,openstack/tripleo-image-elements,master,I42530b64efc8e7be0d309401c284f16050256e8a,Fix line comparisons,MERGED,2019-08-06 21:47:43.000000000,2019-08-12 14:35:06.000000000,2019-08-08 10:53:34.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-06 21:47:43.000000000', 'files': ['elements/hosts/os-refresh-config/configure.d/51-hosts'], 'web_link': 'https://opendev.org/openstack/tripleo-image-elements/commit/d51d61a247abac1c73f868e546146fe2628a8672', 'message': ""Fix line comparisons\n\nThere was a leading \\n and a trailing \\n that is causing the script to\nadd two lines everytime it's run.\n\nChange-Id: I42530b64efc8e7be0d309401c284f16050256e8a\n""}]",0,674939,d51d61a247abac1c73f868e546146fe2628a8672,13,5,1,14985,,,0,"Fix line comparisons

There was a leading \n and a trailing \n that is causing the script to
add two lines everytime it's run.

Change-Id: I42530b64efc8e7be0d309401c284f16050256e8a
",git fetch https://review.opendev.org/openstack/tripleo-image-elements refs/changes/39/674939/1 && git format-patch -1 --stdout FETCH_HEAD,['elements/hosts/os-refresh-config/configure.d/51-hosts'],1,d51d61a247abac1c73f868e546146fe2628a8672,bug/1839222," echo -ne ""# HEAT_HOSTS_START - Do not edit manually within this section!\n"" echo -ne ""# HEAT_HOSTS_END\n"""," echo -ne ""\n# HEAT_HOSTS_START - Do not edit manually within this section!\n"" echo -ne ""# HEAT_HOSTS_END\n\n""",2,2
openstack%2Fopenstack-ansible-os_designate~stable%2Fstein~I230a6b46d91b71881c91b1f4f93d03676a3a0afa,openstack/openstack-ansible-os_designate,stable/stein,I230a6b46d91b71881c91b1f4f93d03676a3a0afa,Convert dynamic includes to static imports,MERGED,2019-08-08 15:12:17.000000000,2019-08-12 14:31:43.000000000,2019-08-12 14:31:42.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-08 15:12:17.000000000', 'files': ['tasks/main.yml', 'vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_designate/commit/8cff00487f2ece76bcb8ccb36b6645eb76da35df', 'message': 'Convert dynamic includes to static imports\n\nWhen task/role files are included using include_tasks, tags are not\npassed to the included tasks. As a result, tags like swift-config\ndo not have the intended effect. This patch changes include_tasks\nto import_tasks for all cases where dynamic vars or loops are not used\nso that tags are properly handled.\n\nReference -\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html\nhttps://bugs.launchpad.net/openstack-ansible/+bug/1815043\n\nChange-Id: I230a6b46d91b71881c91b1f4f93d03676a3a0afa\n'}]",0,675380,8cff00487f2ece76bcb8ccb36b6645eb76da35df,7,3,1,28619,,,0,"Convert dynamic includes to static imports

When task/role files are included using include_tasks, tags are not
passed to the included tasks. As a result, tags like swift-config
do not have the intended effect. This patch changes include_tasks
to import_tasks for all cases where dynamic vars or loops are not used
so that tags are properly handled.

Reference -
https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html
https://bugs.launchpad.net/openstack-ansible/+bug/1815043

Change-Id: I230a6b46d91b71881c91b1f4f93d03676a3a0afa
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_designate refs/changes/80/675380/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'vars/main.yml']",2,8cff00487f2ece76bcb8ccb36b6645eb76da35df,static_imports-stable/stein," {% set _ = value.update( { 'service_key': key, 'enabled': 'yes', 'config_overrides': value.init_config_overrides } ) %} {% set _ = value.pop('init_config_overrides') -%}", {% set _ = value.update({'service_key': key}) %},16,16
openstack%2Fcharm-specs~master~I4ef3b71057406e52437fffe525a00ea9ec52f82a,openstack/charm-specs,master,I4ef3b71057406e52437fffe525a00ea9ec52f82a,Add spec for Ceph PG Autotuning,MERGED,2019-06-24 13:22:52.000000000,2019-08-12 14:30:10.000000000,2019-08-12 14:30:10.000000000,"[{'_account_id': 935}, {'_account_id': 13686}, {'_account_id': 20634}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-06-24 13:22:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/cfd517957d4439971d6ce0e50b11507bc73a74d8', 'message': 'Add spec for Ceph PG Autotuning\n\nChange-Id: I4ef3b71057406e52437fffe525a00ea9ec52f82a\n'}, {'number': 2, 'created': '2019-06-26 08:58:34.000000000', 'files': ['specs/train/approved/ceph-pg-autotune.rst'], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/657042f714568c8bb7822dc49804641b5f1fd6e2', 'message': 'Add spec for Ceph PG Autotuning\n\nChange-Id: I4ef3b71057406e52437fffe525a00ea9ec52f82a\n'}]",8,667093,657042f714568c8bb7822dc49804641b5f1fd6e2,15,4,2,20634,,,0,"Add spec for Ceph PG Autotuning

Change-Id: I4ef3b71057406e52437fffe525a00ea9ec52f82a
",git fetch https://review.opendev.org/openstack/charm-specs refs/changes/93/667093/2 && git format-patch -1 --stdout FETCH_HEAD,['specs/train/approved/ceph-pg-autotune.rst'],1,cfd517957d4439971d6ce0e50b11507bc73a74d8,feature/ceph-pg-autotune,".. Copyright <YEARS> <HOLDER> <--UPDATE THESE This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode .. This template should be in ReSTructured text. Please do not delete any of the sections in this template. If you have nothing to say for a whole section, just write: ""None"". For help with syntax, see http://sphinx-doc.org/rest.html To test out your formatting, see http://www.tele3.cz/jbar/rest/rest.html =============================== Ceph PG Auto Tuning =============================== In the Nautilus release, Ceph has introduced placement group (PG) autotuning. The charms should support this module allowing a Ceph cluster to grow or shrink naturally. Problem Description =================== If an existing cluster is incorrectly sized at deploy time, it is very difficult for an operator to resolve the imbalance. PG Autotuning was designed to remove the black-magic of PG tuning. Proposed Change =============== For releases of Ceph >= Nautilus, the Charms should enable the pg_autoscaler manager module. Additionally, the charms should configure the charm-created Ceph pools with the expected size ratios. The charms will also disable the dynamic scaling by default to reduce unexpectedly pushing already deployed clusters into a warning state. A new configuration option will be introduced to opt-in to this new feature. The ceph-mon charms already handle sizing the default placement groups via the expected ratios so the required data is already present. Alternatives ------------ The current solution is a viable alternative, as long as the expectations about pool sizing is correct at deploy time. Other alternatives include manual operator intervention to resolve an incorrectly sized pool. Implementation ============== Assignee(s) ----------- Primary assignee: chris.macnaughton Gerrit Topic ------------ Use Gerrit topic ""pg-autotune"" for all patches related to this spec. .. code-block:: bash git-review -t pg-autotune Work Items ---------- - Enable the pg_autoscaler manager module if the Ceph version is Nautilus or higher - Disable the autoscaler globally, by default - Enable the autoscaler and configure pools when toggled via configuration Repositories ------------ No new repositories will need to be created. The charms.ceph and charm-ceph-mon repositories will be the primary focus of this development. Documentation ------------- There will be a new configuration option added to toggle on the autoscaler for the Ceph cluster. This configuration option should additionally be called out in the README for the ceph-mon charm. Security -------- There are no expected security risks associated with this change. Testing ------- An additional test-case will be added enabling this config option to ensure that the functionality works as expected. Additionally, the functionality will be validated via inspection of Ceph's suggestions for auto-tuning. Dependencies ============ There are no new dependencies.",,106,0
openstack%2Fopenstack-ansible-os_octavia~stable%2Fstein~I447c0096708c50c2a3b003af84ca7af4dd72c5f5,openstack/openstack-ansible-os_octavia,stable/stein,I447c0096708c50c2a3b003af84ca7af4dd72c5f5,Convert dynamic includes to static imports,MERGED,2019-08-08 15:14:28.000000000,2019-08-12 14:27:29.000000000,2019-08-12 14:27:29.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-08 15:14:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_octavia/commit/054d49c6584304c69ed9a17e285974727a37dc2c', 'message': 'Convert dynamic includes to static imports\n\nWhen task/role files are included using include_tasks, tags are not\npassed to the included tasks. As a result, tags like swift-config\ndo not have the intended effect. This patch changes include_tasks\nto import_tasks for all cases where dynamic vars or loops are not used\nso that tags are properly handled.\n\nReference -\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html\nhttps://bugs.launchpad.net/openstack-ansible/+bug/1815043\n\nChange-Id: I447c0096708c50c2a3b003af84ca7af4dd72c5f5\n'}, {'number': 2, 'created': '2019-08-08 17:14:37.000000000', 'files': ['tasks/main.yml', 'vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_octavia/commit/44ea565f2d65d213f5399541d9cb0cb9ba5bf2fa', 'message': 'Convert dynamic includes to static imports\n\nWhen task/role files are included using include_tasks, tags are not\npassed to the included tasks. As a result, tags like swift-config\ndo not have the intended effect. This patch changes include_tasks\nto import_tasks for all cases where dynamic vars or loops are not used\nso that tags are properly handled.\n\nReference -\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html\nhttps://bugs.launchpad.net/openstack-ansible/+bug/1815043\n\nChange-Id: I447c0096708c50c2a3b003af84ca7af4dd72c5f5\n'}]",0,675381,44ea565f2d65d213f5399541d9cb0cb9ba5bf2fa,9,3,2,28619,,,0,"Convert dynamic includes to static imports

When task/role files are included using include_tasks, tags are not
passed to the included tasks. As a result, tags like swift-config
do not have the intended effect. This patch changes include_tasks
to import_tasks for all cases where dynamic vars or loops are not used
so that tags are properly handled.

Reference -
https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html
https://bugs.launchpad.net/openstack-ansible/+bug/1815043

Change-Id: I447c0096708c50c2a3b003af84ca7af4dd72c5f5
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_octavia refs/changes/81/675381/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'vars/main.yml']",2,054d49c6584304c69ed9a17e285974727a37dc2c,static_imports-stable/stein," {% set _ = value.update( { 'service_key': key, 'enabled': 'yes', 'config_overrides': value.init_config_overrides } ) %} {% set _ = value.pop('init_config_overrides') %}", {% set _ = value.update({'service_key': key}) %},22,23
openstack%2Fopenstack-ansible-os_tempest~master~I5f8087516628e20c2539552c653d4ea5361234ec,openstack/openstack-ansible-os_tempest,master,I5f8087516628e20c2539552c653d4ea5361234ec,Fixed bugs identified by newer ansible-lint,MERGED,2019-08-09 12:57:37.000000000,2019-08-12 14:20:47.000000000,2019-08-12 14:20:47.000000000,"[{'_account_id': 1004}, {'_account_id': 7353}, {'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 24162}, {'_account_id': 25023}, {'_account_id': 25877}]","[{'number': 1, 'created': '2019-08-09 12:57:37.000000000', 'files': ['tasks/tempest_post_install.yml', 'requirements.yml', 'meta/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/92b43f56dbaac73d6759fd132deb3b7604d1f800', 'message': 'Fixed bugs identified by newer ansible-lint\n\n- scm: git is mandatory on requirements.yml when using git urls\n- role_name is needed in meta\n- centos was not listed as supported platform\n- galaxy_tags should be used instead of categories\n- comparison to empty string should be avoided\n\nThese where found while attempting to enable functional testing using\nansible-molecule.\n\nChange-Id: I5f8087516628e20c2539552c653d4ea5361234ec\nNeeded-By: https://review.opendev.org/#/c/675615/\n'}]",3,675617,92b43f56dbaac73d6759fd132deb3b7604d1f800,13,9,1,24162,,,0,"Fixed bugs identified by newer ansible-lint

- scm: git is mandatory on requirements.yml when using git urls
- role_name is needed in meta
- centos was not listed as supported platform
- galaxy_tags should be used instead of categories
- comparison to empty string should be avoided

These where found while attempting to enable functional testing using
ansible-molecule.

Change-Id: I5f8087516628e20c2539552c653d4ea5361234ec
Needed-By: https://review.opendev.org/#/c/675615/
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_tempest refs/changes/17/675617/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/tempest_post_install.yml', 'requirements.yml', 'meta/main.yml']",3,92b43f56dbaac73d6759fd132deb3b7604d1f800,fix/ansible-lint, role_name: os_tempest - name: CentOS versions: - 7 galaxy_tags:, categories:,9,3
openstack%2Fpython-tricircleclient~master~If006a45d8897d4a68e93180ea55f3220edb1abac,openstack/python-tricircleclient,master,If006a45d8897d4a68e93180ea55f3220edb1abac,Update sphinx requirements to match global requirements,MERGED,2019-05-16 18:47:39.000000000,2019-08-12 14:16:20.000000000,2019-08-12 14:16:20.000000000,"[{'_account_id': 8726}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-05-16 18:47:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tricircleclient/commit/d22cec8d9f95392b5bc2ed0c6193aa164a5bd589', 'message': 'Update sphinx requirements to match global requirements\n\nSphinx has released a version that is not compatible with Python 2, so\nwe now need separate requirements for py2 and py3.\n\nChange-Id: If006a45d8897d4a68e93180ea55f3220edb1abac\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}, {'number': 2, 'created': '2019-05-16 19:57:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tricircleclient/commit/231c1d1aff16c8a833370b493d81de6595b5eaef', 'message': 'Update sphinx requirements to match global requirements\n\nSphinx has released a version that is not compatible with Python 2, so\nwe now need separate requirements for py2 and py3.\n\nAlso removing the [docs] target from setup.cfg since that method has\nbeen deprecated and is no longer used.\n\nChange-Id: If006a45d8897d4a68e93180ea55f3220edb1abac\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}, {'number': 3, 'created': '2019-08-12 05:39:37.000000000', 'files': ['lower-constraints.txt', 'doc/requirements.txt', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/python-tricircleclient/commit/25b780e3f5c9e5da5e11b6cc6ae9177d97b1a07a', 'message': 'Update sphinx requirements to match global requirements\n\nSphinx has released a version that is not compatible with Python 2, so\nwe now need separate requirements for py2 and py3.\n\nAlso removing the [docs] target from setup.cfg since that method has\nbeen deprecated and is no longer used.\n\nChange-Id: If006a45d8897d4a68e93180ea55f3220edb1abac\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,659639,25b780e3f5c9e5da5e11b6cc6ae9177d97b1a07a,14,3,3,11904,,,0,"Update sphinx requirements to match global requirements

Sphinx has released a version that is not compatible with Python 2, so
we now need separate requirements for py2 and py3.

Also removing the [docs] target from setup.cfg since that method has
been deprecated and is no longer used.

Change-Id: If006a45d8897d4a68e93180ea55f3220edb1abac
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/python-tricircleclient refs/changes/39/659639/3 && git format-patch -1 --stdout FETCH_HEAD,"['lower-constraints.txt', 'doc/requirements.txt']",2,d22cec8d9f95392b5bc2ed0c6193aa164a5bd589,,"sphinx!=1.6.6,!=1.6.7,>=1.6.3,<2.0.0;python_version=='2.7' # BSD sphinx!=1.6.6,!=1.6.7,>=1.6.3;python_version>='3.4' # BSD","sphinx!=1.6.6,!=1.6.7,>=1.6.2 # BSD",3,2
openstack%2Fmonasca-common~master~I61ecf2cdf1dbe9a134df53c3a36614f84e8baa4e,openstack/monasca-common,master,I61ecf2cdf1dbe9a134df53c3a36614f84e8baa4e,Add LegacyKafkaMessage and Kafka client factory,MERGED,2019-08-08 11:23:16.000000000,2019-08-12 14:15:17.000000000,2019-08-12 14:15:17.000000000,"[{'_account_id': 16222}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 26141}]","[{'number': 1, 'created': '2019-08-08 11:23:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/3a6c09a0b6b3fa9d00794c65dc511cb832268081', 'message': 'Add LegacyKafkaMessage and Kafka client factory\n\nThe change moves LegacyKafkaMessage object and client factory module\nfrom the commponents commonly using it (persister, notification).\n\nStory: 2003705\nTask: 36094\n\nChange-Id: I61ecf2cdf1dbe9a134df53c3a36614f84e8baa4e\n'}, {'number': 2, 'created': '2019-08-09 08:37:21.000000000', 'files': ['monasca_common/kafka/client_factory.py', 'monasca_common/kafka/legacy_kafka_message.py', 'monasca_common/kafka/legacy_kafka_consumer.py'], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/bed8b9cd9f0298fbe4c3e8dfb140bedad10214a7', 'message': 'Add LegacyKafkaMessage and Kafka client factory\n\nThe change moves LegacyKafkaMessage object and client factory module\nfrom the commponents commonly using it (persister, notification).\n\nStory: 2003705\nTask: 36094\n\nChange-Id: I61ecf2cdf1dbe9a134df53c3a36614f84e8baa4e\n'}]",0,675297,bed8b9cd9f0298fbe4c3e8dfb140bedad10214a7,18,4,2,16222,,,0,"Add LegacyKafkaMessage and Kafka client factory

The change moves LegacyKafkaMessage object and client factory module
from the commponents commonly using it (persister, notification).

Story: 2003705
Task: 36094

Change-Id: I61ecf2cdf1dbe9a134df53c3a36614f84e8baa4e
",git fetch https://review.opendev.org/openstack/monasca-common refs/changes/97/675297/2 && git format-patch -1 --stdout FETCH_HEAD,"['monasca_common/kafka/client_factory.py', 'monasca_common/kafka/legacy_kafka_message.py', 'monasca_common/kafka/legacy_kafka_consumer.py']",3,3a6c09a0b6b3fa9d00794c65dc511cb832268081,confluent_kafka,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from monasca_common.kafka import consumer, legacy_kafka_message class LegacyKafkaConsumer(consumer.KafkaConsumer): def __iter__(self): """""":return: Kafka message object compatible with Confluent Kafka client object """""" for raw_message in super(LegacyKafkaConsumer, self).__iter__(): yield legacy_kafka_message.LegacyKafkaMessage(raw_message) ",,111,0
openstack%2Fkayobe~master~Ibcfbd9114a099d8b487f543d526b0cde0744d84a,openstack/kayobe,master,Ibcfbd9114a099d8b487f543d526b0cde0744d84a,Move to openstackdocstheme for docs & release notes,MERGED,2019-08-03 18:02:35.000000000,2019-08-12 14:11:18.000000000,2019-08-12 14:11:18.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 17669}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-03 18:02:35.000000000', 'files': ['doc/source/conf.py', 'doc/requirements.txt', 'releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c44f27b4ae83449dbbb44827e79ddd749c21bb21', 'message': 'Move to openstackdocstheme for docs & release notes\n\nSphinx configuration adapted from kolla ansible.\n\nChange-Id: Ibcfbd9114a099d8b487f543d526b0cde0744d84a\n'}]",0,674468,c44f27b4ae83449dbbb44827e79ddd749c21bb21,10,4,1,14826,,,0,"Move to openstackdocstheme for docs & release notes

Sphinx configuration adapted from kolla ansible.

Change-Id: Ibcfbd9114a099d8b487f543d526b0cde0744d84a
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/68/674468/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/conf.py', 'doc/requirements.txt', 'releasenotes/source/conf.py']",3,c44f27b4ae83449dbbb44827e79ddd749c21bb21,," import os import sys sys.path.insert(0, os.path.abspath('../..')) 'openstackdocstheme',# Release notes do not need a version number in the title, they # cover multiple releases.# The theme to use for HTML and HTML Help pages. See the documentation for # a list of builtin themes. html_theme = 'openstackdocs'html_last_updated_fmt = '%Y-%m-%d %H:%M' # -- Options for Internationalization output ------------------------------ locale_dirs = ['locale/']","# Kayobe Release Notes documentation build configuration file. # # This file is execfile()d with the current directory set to its # containing dir. # # Note that not all possible configuration values are present in this # autogenerated file. # # All configuration values have a default; values that are commented out # serve to show the default. # If extensions (or modules to document with autodoc) are in another directory, # add these directories to sys.path here. If the directory is relative to the # documentation root, use os.path.abspath to make it absolute, like shown here. # sys.path.insert(0, os.path.abspath('.'))# The version info for the project you're documenting, acts as replacement for # |version| and |release|, also used in various other places throughout the # built documents. ## openstackdocstheme options # repository_name = 'openstack/kayobe' # bug_project = 'kayobe' # bug_tag = ''# html_last_updated_fmt = '%b %d, %Y'latex_elements = { # The paper size ('letterpaper' or 'a4paper'). # 'papersize': 'letterpaper', # The font size ('10pt', '11pt' or '12pt'). # 'pointsize': '10pt', # Additional stuff for the LaTeX preamble. # 'preamble': '', } ",44,39
openstack%2Fpython-tricircleclient~master~I0d14ed9a762c1401be8b4406af94f7ad5a407f4e,openstack/python-tricircleclient,master,I0d14ed9a762c1401be8b4406af94f7ad5a407f4e,Add Python 3 Train unit tests,MERGED,2019-07-05 20:32:51.000000000,2019-08-12 14:08:57.000000000,2019-08-12 14:08:56.000000000,"[{'_account_id': 8726}, {'_account_id': 22348}, {'_account_id': 26297}]","[{'number': 1, 'created': '2019-07-05 20:32:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tricircleclient/commit/c85fd812042b80e92fae0e269e4398ad04117c9d', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I0d14ed9a762c1401be8b4406af94f7ad5a407f4e\nStory: #2005924\nTask: #34252\n'}, {'number': 2, 'created': '2019-08-12 05:39:16.000000000', 'files': ['.zuul.yaml', 'setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/python-tricircleclient/commit/bf57c03127ef1796ae83060328159f13537da95a', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I0d14ed9a762c1401be8b4406af94f7ad5a407f4e\nStory: #2005924\nTask: #34252\n'}]",0,669520,bf57c03127ef1796ae83060328159f13537da95a,10,3,2,11805,,,0,"Add Python 3 Train unit tests

This is a mechanically generated patch to ensure unit testing is in place
for all of the Tested Runtimes for Train.

See the Train python3-updates goal document for details:
https://governance.openstack.org/tc/goals/train/python3-updates.html

Change-Id: I0d14ed9a762c1401be8b4406af94f7ad5a407f4e
Story: #2005924
Task: #34252
",git fetch https://review.opendev.org/openstack/python-tricircleclient refs/changes/20/669520/2 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg', 'tox.ini']",3,c85fd812042b80e92fae0e269e4398ad04117c9d,python3-train,"envlist = py27,py37,pep8","envlist = py36,py27,pep8",3,3
openstack%2Fosprofiler~master~I640de49077f7068ce6039f80149333c5d8df8848,openstack/osprofiler,master,I640de49077f7068ce6039f80149333c5d8df8848,[TEST] Enable full Tempest job with profiling enabled,ABANDONED,2019-03-22 08:57:51.000000000,2019-08-12 14:05:13.000000000,,"[{'_account_id': 6928}, {'_account_id': 9008}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-03-22 08:57:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/595d68e1cd7b70d4610ab09bdbaa1ad86049b734', 'message': '[TEST] Enable full Tempest job with profiling enabled\n\nChange-Id: I640de49077f7068ce6039f80149333c5d8df8848\n'}, {'number': 2, 'created': '2019-03-22 16:19:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/7abc577a9fa8d263596356209d4f50216c4bacba', 'message': '[TEST] Enable full Tempest job with profiling enabled\n\nChange-Id: I640de49077f7068ce6039f80149333c5d8df8848\n'}, {'number': 3, 'created': '2019-04-03 13:21:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/ef457c06826086a896ca06e4bf0957d15703c439', 'message': '[TEST] Enable full Tempest job with profiling enabled\n\nChange-Id: I640de49077f7068ce6039f80149333c5d8df8848\n'}, {'number': 4, 'created': '2019-04-04 09:03:31.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/c8297eaa75f4b5b5028718868a35dbc4f54741c1', 'message': '[TEST] Enable full Tempest job with profiling enabled\n\nChange-Id: I640de49077f7068ce6039f80149333c5d8df8848\n'}]",0,645503,c8297eaa75f4b5b5028718868a35dbc4f54741c1,14,3,4,5950,,,0,"[TEST] Enable full Tempest job with profiling enabled

Change-Id: I640de49077f7068ce6039f80149333c5d8df8848
",git fetch https://review.opendev.org/openstack/osprofiler refs/changes/03/645503/2 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,595d68e1cd7b70d4610ab09bdbaa1ad86049b734,tempest-full-profiling, tox_envlist: full, tox_envlist: smoke,1,1
openstack%2Fopenstack-ansible-os_tempest~master~I807d5acf7e0c0a46d2513bbb4f52e65842a9af16,openstack/openstack-ansible-os_tempest,master,I807d5acf7e0c0a46d2513bbb4f52e65842a9af16,Fixed the package name of keystone tempest tests,MERGED,2019-08-12 04:24:04.000000000,2019-08-12 13:48:18.000000000,2019-08-12 13:48:18.000000000,"[{'_account_id': 8367}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 27379}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-12 04:24:04.000000000', 'files': ['vars/redhat-8.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/b8937770a758078d5037ef271e1973bfb064c40f', 'message': 'Fixed the package name of keystone tempest tests\n\nIn RHEL-8 the package name is python3-keystone-tests-tempest.\n\nChange-Id: I807d5acf7e0c0a46d2513bbb4f52e65842a9af16\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}]",0,675809,b8937770a758078d5037ef271e1973bfb064c40f,12,7,1,12393,,,0,"Fixed the package name of keystone tempest tests

In RHEL-8 the package name is python3-keystone-tests-tempest.

Change-Id: I807d5acf7e0c0a46d2513bbb4f52e65842a9af16
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_tempest refs/changes/09/675809/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat-8.yml'],1,b8937770a758078d5037ef271e1973bfb064c40f,rhel8, - python3-keystone-tests-tempest, - python-keystone-tests-tempest,1,1
openstack%2Fpython-tricircleclient~master~Ie9cb41fe0a2aef6f222a2fed13f698b830fff40c,openstack/python-tricircleclient,master,Ie9cb41fe0a2aef6f222a2fed13f698b830fff40c,Fix the :module sphinx instruction,MERGED,2019-08-12 05:38:13.000000000,2019-08-12 13:43:56.000000000,2019-08-12 13:43:56.000000000,"[{'_account_id': 8726}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-12 05:38:13.000000000', 'files': ['doc/source/api.rst'], 'web_link': 'https://opendev.org/openstack/python-tricircleclient/commit/e607733723ea336a4950c8ae0f5586c14ce7be34', 'message': 'Fix the :module sphinx instruction\n\nThis instruction was causing a warning during the building process of\nthe documentation and failing the Jenkins Jobs.\n\nChange-Id: Ie9cb41fe0a2aef6f222a2fed13f698b830fff40c\n'}]",0,675815,e607733723ea336a4950c8ae0f5586c14ce7be34,6,2,1,8726,,,0,"Fix the :module sphinx instruction

This instruction was causing a warning during the building process of
the documentation and failing the Jenkins Jobs.

Change-Id: Ie9cb41fe0a2aef6f222a2fed13f698b830fff40c
",git fetch https://review.opendev.org/openstack/python-tricircleclient refs/changes/15/675815/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/api.rst'],1,e607733723ea336a4950c8ae0f5586c14ce7be34,,,.. module:: tricircleclient :synopsis: A client for the Tricircle API. .. currentmodule:: tricircleclient ,0,5
openstack%2Foslo.upgradecheck~master~I3d2e5e2322ac8374881f76217e35792efeea073a,openstack/oslo.upgradecheck,master,I3d2e5e2322ac8374881f76217e35792efeea073a,Move doc related modules to doc/requirements.txt,MERGED,2019-07-05 17:30:09.000000000,2019-08-12 13:35:56.000000000,2019-08-12 13:35:56.000000000,"[{'_account_id': 6928}, {'_account_id': 15334}, {'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 28743}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-07-05 17:30:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.upgradecheck/commit/33e041c56848a34726cd05e2b4842dfc63bd1816', 'message': 'Move doc related modules to doc/requirements.txt\n\nChange-Id: I3d2e5e2322ac8374881f76217e35792efeea073a\n'}, {'number': 2, 'created': '2019-07-05 17:31:39.000000000', 'files': ['test-requirements.txt', 'doc/requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/oslo.upgradecheck/commit/c80448dd8bd0d2cd9df44ffc6a80f7c6abd0eb8e', 'message': 'Move doc related modules to doc/requirements.txt\n\nChange-Id: I3d2e5e2322ac8374881f76217e35792efeea073a\n'}]",0,669415,c80448dd8bd0d2cd9df44ffc6a80f7c6abd0eb8e,11,7,2,22165,,,0,"Move doc related modules to doc/requirements.txt

Change-Id: I3d2e5e2322ac8374881f76217e35792efeea073a
",git fetch https://review.opendev.org/openstack/oslo.upgradecheck refs/changes/15/669415/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/requirements.txt', 'tox.ini']",2,33e041c56848a34726cd05e2b4842dfc63bd1816,,whitelist_externals = rm deps = {[testenv]deps} -r{toxinidir}/doc/requirements.txt commands = rm -rf doc/build sphinx-build -W -b html doc/source doc/build/html,commands = sphinx-build -W -b html doc/source doc/build/html,16,1
openstack%2Fdiskimage-builder~master~I87853fcda4c8b29a3f1720a2778debeb3acc3a53,openstack/diskimage-builder,master,I87853fcda4c8b29a3f1720a2778debeb3acc3a53,Fixes DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE matching when empty,MERGED,2019-08-08 11:12:51.000000000,2019-08-12 13:23:43.000000000,2019-08-12 13:22:44.000000000,"[{'_account_id': 7118}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30309}]","[{'number': 1, 'created': '2019-08-08 11:12:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/8ac0745a4922a9953d3de1906f45a46925f41279', 'message': 'Fixes Launchpad issue #1808359\n\nAlso normalizes bash conditionals\n\nChange-Id: I87853fcda4c8b29a3f1720a2778debeb3acc3a53\nSigned-off-by: Manuel Torrinha <manuel.torrinha@tecnico.ulisboa.pt>\n'}, {'number': 2, 'created': '2019-08-09 10:28:37.000000000', 'files': ['diskimage_builder/elements/ubuntu/pre-install.d/01-set-ubuntu-mirror'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/a38ac762f12e2e7fde431c7091cc33371aa53cc4', 'message': 'Fixes DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE matching when empty\n\n - DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE matches when it is empty or not\n set and DIB_DISTRIBUTION_MIRROR is being used. Checking for it being \n set and not empty solves this.\n - Normalizing bash conditionals for readability\n\nCloses-Bug: #1808359\nChange-Id: I87853fcda4c8b29a3f1720a2778debeb3acc3a53\nSigned-off-by: Manuel Torrinha <manuel.torrinha@tecnico.ulisboa.pt>\n'}]",1,675294,a38ac762f12e2e7fde431c7091cc33371aa53cc4,21,5,2,30309,,,0,"Fixes DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE matching when empty

 - DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE matches when it is empty or not
 set and DIB_DISTRIBUTION_MIRROR is being used. Checking for it being 
 set and not empty solves this.
 - Normalizing bash conditionals for readability

Closes-Bug: #1808359
Change-Id: I87853fcda4c8b29a3f1720a2778debeb3acc3a53
Signed-off-by: Manuel Torrinha <manuel.torrinha@tecnico.ulisboa.pt>
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/94/675294/1 && git format-patch -1 --stdout FETCH_HEAD,['diskimage_builder/elements/ubuntu/pre-install.d/01-set-ubuntu-mirror'],1,8ac0745a4922a9953d3de1906f45a46925f41279,,"if [[ ${DIB_DEBUG_TRACE:-0} -gt 1 ]]; then[[ -n ""$DIB_DISTRIBUTION_MIRROR"" ]] || exit 0 if [[ -n ""${DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE:-}"" && ""$line"" =~ ${DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE:-} ]]; then","if [ ${DIB_DEBUG_TRACE:-0} -gt 1 ]; then[ -n ""$DIB_DISTRIBUTION_MIRROR"" ] || exit 0 if [[ ""$line"" =~ ${DIB_DISTRIBUTION_MIRROR_UBUNTU_IGNORE:-} ]]; then",3,3
openstack%2Fgovernance~master~Idd76f949d1f84dd4b0e921f5d95fed299aa28422,openstack/governance,master,Idd76f949d1f84dd4b0e921f5d95fed299aa28422,Make url required in projects.yaml,MERGED,2019-08-05 18:07:32.000000000,2019-08-12 13:14:02.000000000,2019-08-12 13:14:02.000000000,"[{'_account_id': 308}, {'_account_id': 1004}, {'_account_id': 2472}, {'_account_id': 8099}, {'_account_id': 17068}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-05 18:07:32.000000000', 'files': ['openstack_governance/projects_schema.yaml'], 'web_link': 'https://opendev.org/openstack/governance/commit/55b33415e44e396039f8813e9aa2c831cad6d26a', 'message': 'Make url required in projects.yaml\n\nChange-Id: Idd76f949d1f84dd4b0e921f5d95fed299aa28422\nDepends-On: https://review.opendev.org/673837\n'}]",0,674666,55b33415e44e396039f8813e9aa2c831cad6d26a,11,6,1,4257,,,0,"Make url required in projects.yaml

Change-Id: Idd76f949d1f84dd4b0e921f5d95fed299aa28422
Depends-On: https://review.opendev.org/673837
",git fetch https://review.opendev.org/openstack/governance refs/changes/66/674666/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_governance/projects_schema.yaml'],1,55b33415e44e396039f8813e9aa2c831cad6d26a,code-change, - url,,1,0
openstack%2Fgovernance~master~I28ff94af37d7f4de07c1d282bf3c37c77eeea101,openstack/governance,master,I28ff94af37d7f4de07c1d282bf3c37c77eeea101,add jsonschema validation for project data,MERGED,2019-07-30 19:21:06.000000000,2019-08-12 13:11:57.000000000,2019-08-12 13:11:57.000000000,"[{'_account_id': 308}, {'_account_id': 1004}, {'_account_id': 2472}, {'_account_id': 4257}, {'_account_id': 8099}, {'_account_id': 11904}, {'_account_id': 17068}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-30 19:21:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/3191ad61bf446c37483c41629783f98121a849b7', 'message': 'add jsonschema validation for project data\n\nThis change adds a tool to perform basic JSONSchema validation of the\nreference/projects.yaml file.\n\nUnfortunately the format of that file does not lend itself to easy\nvalidation, because it is structured as a mapping of project team\nnames to data rather than a sequence of project objects. The\ndeliverables portion of each project has a similar issue. To work\naround that, the tool loops over the data and validates each project\nand its deliverables separately using 2 different schema\nfragments. Future work can change the file format for more robust\nvalidation.\n\nValidating ATC expiration dates required reformatting those as actual\ndates. I selected the last day of the month that had been previously\nmentioned in each case to be generous with the existing status. Future\nATC entries can be set to whatever date is desired.\n\nChange-Id: I28ff94af37d7f4de07c1d282bf3c37c77eeea101\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\n'}, {'number': 2, 'created': '2019-07-30 23:23:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/868530c13340413ae516a2c5d274d06dbf2110d9', 'message': 'add jsonschema validation for project data\n\nThis change adds a tool to perform basic JSONSchema validation of the\nreference/projects.yaml file.\n\nChange-Id: I28ff94af37d7f4de07c1d282bf3c37c77eeea101\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\nCo-Authored-by: Zane Bitter <zbitter@redhat.com>\n'}, {'number': 3, 'created': '2019-07-30 23:29:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/445c1a0795cf300d729ac7206190333d87c0ec93', 'message': 'add jsonschema validation for project data\n\nThis change adds a tool to perform basic JSONSchema validation of the\nreference/projects.yaml file.\n\nChange-Id: I28ff94af37d7f4de07c1d282bf3c37c77eeea101\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\nCo-Authored-by: Zane Bitter <zbitter@redhat.com>\n'}, {'number': 4, 'created': '2019-07-31 07:02:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/8b5a2ea3ae745654cf6041894735bf504405ff2a', 'message': 'add jsonschema validation for project data\n\nThis change adds a tool to perform basic JSONSchema validation of the\nreference/projects.yaml file.\n\nChange-Id: I28ff94af37d7f4de07c1d282bf3c37c77eeea101\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\nCo-Authored-by: Zane Bitter <zbitter@redhat.com>\n'}, {'number': 5, 'created': '2019-07-31 13:35:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/5ab2404d9e037e34c2189053c35055e3b01fe4f5', 'message': 'add jsonschema validation for project data\n\nThis change adds a tool to perform basic JSONSchema validation of the\nreference/projects.yaml file.\n\nChange-Id: I28ff94af37d7f4de07c1d282bf3c37c77eeea101\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\nCo-Authored-by: Zane Bitter <zbitter@redhat.com>\n'}, {'number': 6, 'created': '2019-07-31 14:05:38.000000000', 'files': ['requirements.txt', 'openstack_governance/_check_schema.py', 'setup.cfg', 'openstack_governance/projects_schema.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/governance/commit/96e8407730f8560b90d2734836bfbd6c5b3396a6', 'message': 'add jsonschema validation for project data\n\nThis change adds a tool to perform basic JSONSchema validation of the\nreference/projects.yaml file.\n\nChange-Id: I28ff94af37d7f4de07c1d282bf3c37c77eeea101\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\nCo-Authored-by: Zane Bitter <zbitter@redhat.com>\n'}]",7,673618,96e8407730f8560b90d2734836bfbd6c5b3396a6,28,8,6,2472,,,0,"add jsonschema validation for project data

This change adds a tool to perform basic JSONSchema validation of the
reference/projects.yaml file.

Change-Id: I28ff94af37d7f4de07c1d282bf3c37c77eeea101
Signed-off-by: Doug Hellmann <doug@doughellmann.com>
Co-Authored-by: Zane Bitter <zbitter@redhat.com>
",git fetch https://review.opendev.org/openstack/governance refs/changes/18/673618/6 && git format-patch -1 --stdout FETCH_HEAD,"['reference/projects.yaml', 'requirements.txt', 'openstack_governance/deliverable_schema.yaml', 'openstack_governance/_check_schema.py', 'setup.cfg', 'openstack_governance/projects_schema.yaml', 'tox.ini']",7,3191ad61bf446c37483c41629783f98121a849b7,code-change, osg-check-schema,,264,57
openstack%2Fopenstack-ansible-os_manila~master~I41b680f5dcb5be92e3304c591d9a4705cf138a72,openstack/openstack-ansible-os_manila,master,I41b680f5dcb5be92e3304c591d9a4705cf138a72,smart_sources: Use config files from repo,MERGED,2019-08-05 16:35:19.000000000,2019-08-12 13:07:59.000000000,2019-08-12 13:07:59.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-05 16:35:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/929379fd8e0bc2d0f744bac9e02858b17d39e71b', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}, {'number': 2, 'created': '2019-08-05 17:24:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/b7ef854afc2e3560cb9b40ad686e7e34e34efaab', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}, {'number': 3, 'created': '2019-08-05 17:38:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/ee56ad96dc423227d675b3c3abe465391689f6de', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}, {'number': 4, 'created': '2019-08-05 17:46:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/fee4a5ed8f5b3556cc5aa1ef97db03103ab9fc9d', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}, {'number': 5, 'created': '2019-08-06 11:51:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/7b641a55c0251fc0f3c0aa31405c5771e76966de', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}, {'number': 6, 'created': '2019-08-06 11:54:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/642c1f9d8aa13175a46000a1ebdc5b353ba26de0', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}, {'number': 7, 'created': '2019-08-06 12:02:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/fc87ebf9ee943ef609485d2b54f846d60f1ef894', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}, {'number': 8, 'created': '2019-08-08 13:00:30.000000000', 'files': ['templates/rootwrap.conf.j2', 'templates/api-paste.ini.j2', 'tasks/manila_post_install.yml', 'vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/203eb8772ace6855322f1f5c7b474cb91bb490be', 'message': 'smart_sources: Use config files from repo\n\nDo not carry and maintain rootwrap and api files, since they are present\ninside pip packages and deployed during installation.\nThis also adds deployment of rootwrap filters for manila-share nodes.\n\nChange-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72\n'}]",2,674649,203eb8772ace6855322f1f5c7b474cb91bb490be,28,4,8,28619,,,0,"smart_sources: Use config files from repo

Do not carry and maintain rootwrap and api files, since they are present
inside pip packages and deployed during installation.
This also adds deployment of rootwrap filters for manila-share nodes.

Change-Id: I41b680f5dcb5be92e3304c591d9a4705cf138a72
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_manila refs/changes/49/674649/8 && git format-patch -1 --stdout FETCH_HEAD,"['templates/rootwrap.conf.j2', 'templates/api-paste.ini.j2', 'tasks/manila_post_install.yml', 'vars/main.yml']",4,929379fd8e0bc2d0f744bac9e02858b17d39e71b,smart-sources," manila_core_files: - src: ""manila.conf.j2"" dest: ""/etc/manila/manila.conf"" config_overrides: ""{{ manila_manila_conf_overrides }}"" config_type: ""ini"" - src: ""policy.json.j2"" dest: ""/etc/manila/policy.json-{{ manila_venv_tag }}"" config_overrides: ""{{ manila_policy_overrides }}"" config_type: ""json"" - src: ""sudoers.j2"" dest: ""/etc/sudoers.d/{{ manila_system_user_name }}_sudoers"" mode: ""0440"" group: ""root"" manila_rootwrap_files: - condition: ""{{ manila_install_method == 'source' }}"" config_overrides: ""{{ manila_rootwrap_conf_overrides }}"" config_type: ini dest: /etc/manila/rootwrap.conf source: ""{{ manila_bin | dirname }}/etc/manila/rootwrap.conf"" src: /tmp/rootwrap.conf - condition: ""{{ manila_install_method == 'source' }}"" config_type: ini dest: /etc/manila/rootwrap.d/share.filters source: ""{{ manila_bin | dirname }}/etc/manila/rootwrap.d/share.filters"" src: /tmp/manila-share.filters - condition: ""{{ manila_install_method == 'source' and 'manila_share' in group_names }}"" config_type: ""ini"" config_overrides: ""{{ manila_api_paste_ini_overrides }}"" source: ""{{ manila_bin | dirname }}/etc/manila/api-paste.ini"" src: ""/tmp/api-paste.ini"" dest: ""/etc/manila/api-paste.ini""",,46,112
openstack%2Fmonasca-common~master~Ic134eed058fbc21f3e91029c0049d99762a1bdc3,openstack/monasca-common,master,Ic134eed058fbc21f3e91029c0049d99762a1bdc3,Create Docker image for StatsD,MERGED,2019-07-26 09:40:21.000000000,2019-08-12 13:00:14.000000000,2019-08-12 13:00:14.000000000,"[{'_account_id': 16222}, {'_account_id': 21922}, {'_account_id': 22348}, {'_account_id': 26141}, {'_account_id': 28062}, {'_account_id': 29909}, {'_account_id': 30221}]","[{'number': 1, 'created': '2019-07-26 09:40:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/1d30861e195c6091dbe07fde9f32c27fbe25ab54', 'message': 'Create Docker image for StatsD\n\nThe purpose of this change is to build Docker image for StatsdD. Building Docker image for StatsD is moved to Monasca-Agent.\n\nChange-Id: Ic134eed058fbc21f3e91029c0049d99762a1bdc3\n'}, {'number': 2, 'created': '2019-07-26 09:41:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/5c9cfd328a06cf4dbd4cca1a36c2bda7f1388b59', 'message': 'Create Docker image for StatsD\n\nThe purpose of this change is to build Docker image for StatsdD.\nBuilding Docker image for StatsD is moved to Monasca-Agent.\n\nChange-Id: Ic134eed058fbc21f3e91029c0049d99762a1bdc3\n'}, {'number': 3, 'created': '2019-08-09 11:45:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/ac07f9e0d36377c2e30d86eff75e282e69790ec8', 'message': 'Create Docker image for StatsD\n\nThe purpose of this change is to build Docker image for StatsdD.\nBuilding Docker image for StatsD is moved to Monasca-Agent.\n\nChange-Id: Ic134eed058fbc21f3e91029c0049d99762a1bdc3\nStory: 2001694\nTask: 30228\n'}, {'number': 4, 'created': '2019-08-12 07:41:38.000000000', 'files': ['docker/Dockerfile'], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/eca3199ede21037dad7dc3e47c81885f66e67202', 'message': 'Create Docker image for StatsD\n\nThe purpose of this change is to build Docker image for StatsD.\nBuilding Docker image for StatsD is moved to Monasca-Agent.\n\nChange-Id: Ic134eed058fbc21f3e91029c0049d99762a1bdc3\nStory: 2001694\nTask: 36259\n'}]",0,672932,eca3199ede21037dad7dc3e47c81885f66e67202,20,7,4,29909,,,0,"Create Docker image for StatsD

The purpose of this change is to build Docker image for StatsD.
Building Docker image for StatsD is moved to Monasca-Agent.

Change-Id: Ic134eed058fbc21f3e91029c0049d99762a1bdc3
Story: 2001694
Task: 36259
",git fetch https://review.opendev.org/openstack/monasca-common refs/changes/32/672932/2 && git format-patch -1 --stdout FETCH_HEAD,['docker/Dockerfile'],1,1d30861e195c6091dbe07fde9f32c27fbe25ab54,feature/piotrowskim/docker," [ $DOCKER_IMAGE = ""monasca/statsd"" ] && \ sed -i ""s|monasca-statsd.*||"" \ /app/upper-constraints.txt || true && \",,3,0
openstack%2Fansible-role-thales-hsm~stable%2Fstein~I054ad78fedde279a056808e4abf1256ad80cb92e,openstack/ansible-role-thales-hsm,stable/stein,I054ad78fedde279a056808e4abf1256ad80cb92e,Fix typo in client playbook,MERGED,2019-08-08 21:07:31.000000000,2019-08-12 12:59:30.000000000,2019-08-12 12:59:30.000000000,"[{'_account_id': 1004}, {'_account_id': 3153}, {'_account_id': 9914}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-08 21:07:31.000000000', 'files': ['tasks/client.yaml'], 'web_link': 'https://opendev.org/openstack/ansible-role-thales-hsm/commit/cc299d761e0236aaf6b3ae01ea964afb2d1a7fbe', 'message': 'Fix typo in client playbook\n\nChange-Id: I054ad78fedde279a056808e4abf1256ad80cb92e\n(cherry picked from commit 93f475c08d2538220fb78015bd66d135e2b73bc2)\n'}]",0,675465,cc299d761e0236aaf6b3ae01ea964afb2d1a7fbe,9,6,1,7973,,,0,"Fix typo in client playbook

Change-Id: I054ad78fedde279a056808e4abf1256ad80cb92e
(cherry picked from commit 93f475c08d2538220fb78015bd66d135e2b73bc2)
",git fetch https://review.opendev.org/openstack/ansible-role-thales-hsm refs/changes/65/675465/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/client.yaml'],1,cc299d761e0236aaf6b3ae01ea964afb2d1a7fbe,libnsl-fixes, register: st, registers: st,1,1
openstack%2Fansible-role-thales-hsm~stable%2Fstein~I188fd02d3a8d017ea1ea0894ea3b8d9318321dad,openstack/ansible-role-thales-hsm,stable/stein,I188fd02d3a8d017ea1ea0894ea3b8d9318321dad,Ensure libnsl is installed,MERGED,2019-08-08 21:04:10.000000000,2019-08-12 12:59:28.000000000,2019-08-12 12:59:27.000000000,"[{'_account_id': 1004}, {'_account_id': 3153}, {'_account_id': 7973}, {'_account_id': 9914}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-08 21:04:10.000000000', 'files': ['tasks/client.yaml'], 'web_link': 'https://opendev.org/openstack/ansible-role-thales-hsm/commit/5d797e3e2a4e8749e98b6b0cce3b9f29159a5cd6', 'message': 'Ensure libnsl is installed\n\nChange-Id: I188fd02d3a8d017ea1ea0894ea3b8d9318321dad\n(cherry picked from commit 0133696ce670c3e1d55524a990fe56374a711934)\n'}]",2,675464,5d797e3e2a4e8749e98b6b0cce3b9f29159a5cd6,12,7,1,7973,,,0,"Ensure libnsl is installed

Change-Id: I188fd02d3a8d017ea1ea0894ea3b8d9318321dad
(cherry picked from commit 0133696ce670c3e1d55524a990fe56374a711934)
",git fetch https://review.opendev.org/openstack/ansible-role-thales-hsm refs/changes/64/675464/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/client.yaml'],1,5d797e3e2a4e8749e98b6b0cce3b9f29159a5cd6,,- name: check for libnsl dependency stat: path: /lib64/libnsl.so.1 registers: st - name: ensure libnsl dependency is installed package: name: libnsl state: present when: not st.stat.exists ,,11,0
openstack%2Fmistral~master~I57b4f3d1533982d3b9b7063925f8d70f044aefea,openstack/mistral,master,I57b4f3d1533982d3b9b7063925f8d70f044aefea,Fail-on policy,MERGED,2019-06-06 21:30:38.000000000,2019-08-12 12:58:38.000000000,2019-08-12 12:58:38.000000000,"[{'_account_id': 7700}, {'_account_id': 8731}, {'_account_id': 9712}, {'_account_id': 15895}, {'_account_id': 19134}, {'_account_id': 21970}, {'_account_id': 22348}, {'_account_id': 27008}, {'_account_id': 29124}]","[{'number': 1, 'created': '2019-06-06 21:30:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/3c18cf20d10189c164a5dea769fea2532f589ebb', 'message': 'Fail-on policy\n\nFail-on policy allows to fail success tasks by condition. It is useful\nin cases we have to fail task if its result is unacceptable and it makes\nworkflow definition more readable.\n\nChange-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea\nImplements: blueprint fail-on-policy\nSigned-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>\n'}, {'number': 2, 'created': '2019-06-07 07:55:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/d0fbea703b6b009c8818ed26f22615dca923fedc', 'message': 'Fail-on policy\n\nFail-on policy allows to fail success tasks by condition. It is useful\nin cases we have to fail task if its result is unacceptable and it makes\nworkflow definition more readable.\n\nChange-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea\nImplements: blueprint fail-on-policy\nSigned-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>\n'}, {'number': 3, 'created': '2019-07-11 23:29:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/517b8e73dcb4c4b2b1a13376bc2c1a9118bc6661', 'message': 'Fail-on policy\n\nFail-on policy allows to fail success tasks by condition. It is useful\nin cases we have to fail task if its result is unacceptable and it makes\nworkflow definition more readable.\n\nChange-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea\nImplements: blueprint fail-on-policy\nSigned-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>\n'}, {'number': 4, 'created': '2019-08-03 22:05:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/293f1ae451bde75a680485f394b2be0a112c2c7a', 'message': 'Fail-on policy\n\nFail-on policy allows to fail success tasks by condition. It is useful\nin cases we have to fail task if its result is unacceptable and it makes\nworkflow definition more readable.\n\nChange-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea\nImplements: blueprint fail-on-policy\nSigned-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>\n'}, {'number': 5, 'created': '2019-08-08 11:51:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/e46cc8306383d14408c80750868c113f00afedd3', 'message': 'Fail-on policy\n\nFail-on policy allows to fail success tasks by condition. It is useful\nin cases we have to fail task if its result is unacceptable and it makes\nworkflow definition more readable.\n\nChange-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea\nImplements: blueprint fail-on-policy\nSigned-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>\n'}, {'number': 6, 'created': '2019-08-08 13:10:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/d3a721f3e22dc434b629aff432aa0c45a31c11a2', 'message': 'Fail-on policy\n\nFail-on policy allows to fail success tasks by condition. It is useful\nin cases we have to fail task if its result is unacceptable and it makes\nworkflow definition more readable.\n\nChange-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea\nImplements: blueprint fail-on-policy\nSigned-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>\n'}, {'number': 7, 'created': '2019-08-11 07:22:01.000000000', 'files': ['doc/source/user/wf_lang_v2.rst', 'mistral/lang/v2/policies.py', 'mistral/lang/v2/tasks.py', 'requirements.txt', 'doc/source/main_features.rst', 'mistral/tests/unit/engine/test_policies.py', 'mistral/lang/v2/task_defaults.py', 'doc/source/user/wf_namespaces.rst', 'mistral/engine/policies.py'], 'web_link': 'https://opendev.org/openstack/mistral/commit/4e926a1f136a54ddf83e9eae43c33d9636d48aaf', 'message': 'Fail-on policy\n\nFail-on policy allows to fail success tasks by condition. It is useful\nin cases we have to fail task if its result is unacceptable and it makes\nworkflow definition more readable.\n\nChange-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea\nImplements: blueprint fail-on-policy\nSigned-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>\n'}]",0,663776,4e926a1f136a54ddf83e9eae43c33d9636d48aaf,44,9,7,29124,,,0,"Fail-on policy

Fail-on policy allows to fail success tasks by condition. It is useful
in cases we have to fail task if its result is unacceptable and it makes
workflow definition more readable.

Change-Id: I57b4f3d1533982d3b9b7063925f8d70f044aefea
Implements: blueprint fail-on-policy
Signed-off-by: Oleg Ovcharuk <vgvoleg@gmail.com>
",git fetch https://review.opendev.org/openstack/mistral refs/changes/76/663776/1 && git format-patch -1 --stdout FETCH_HEAD,"['mistral/lang/v2/policies.py', 'mistral/lang/v2/tasks.py', 'mistral/tests/unit/engine/test_policies.py', 'mistral/lang/v2/task_defaults.py', 'mistral/engine/policies.py']",5,3c18cf20d10189c164a5dea769fea2532f589ebb,bp/fail-on-policy," build_fail_on_policy,def build_fail_on_policy(policies_spec): if not policies_spec: return None fail_on_policy = policies_spec.get_fail_on() return (FailOnPolicy(fail_on_policy) if fail_on_policy else None) class FailOnPolicy(base.TaskPolicy): _schema = { ""properties"": { ""fail-on"": {""type"": ""boolean""}, } } def __init__(self, fail_on): self.fail_on = fail_on def before_task_start(self, task_ex, task_spec): pass def after_task_complete(self, task_ex, task_spec): if task_ex.state != states.SUCCESS: return super(FailOnPolicy, self).after_task_complete(task_ex, task_spec) if self.fail_on: task_ex.state = states.ERROR task_ex.state_info = 'Failed by fail-on policy' ",,199,2
openstack%2Fnova~master~I28703dc7c106e9a00a31d4f84c103a7608b45de0,openstack/nova,master,I28703dc7c106e9a00a31d4f84c103a7608b45de0,Update comments in HostManager._get_instance_info,MERGED,2019-08-06 20:38:39.000000000,2019-08-12 12:55:53.000000000,2019-08-12 12:55:53.000000000,"[{'_account_id': 7634}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-06 20:38:39.000000000', 'files': ['nova/scheduler/host_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1775a59975d74b94e84196c758800b031269aa81', 'message': 'Update comments in HostManager._get_instance_info\n\nThe comments in this method are from when it was originally\nadded [1] in Kilo and the part about ""not yet upgraded"" is\nway out of date (it was presumably just there for rolling\nupgrades to Kilo) so that\'s all removed. In addition to\nmentioning performance, I\'ve also noted ""isolation"" as a\nreason for disabling track_instance_changes in a split-MQ\ncells v2 deployment [2].\n\n[1] Ibfcd3b77dbde94db14a9e4027dbaceecb76182cd\n[2] https://docs.openstack.org/nova/latest/user/cellsv2-layout.html\n\nChange-Id: I28703dc7c106e9a00a31d4f84c103a7608b45de0\n'}]",0,674929,1775a59975d74b94e84196c758800b031269aa81,32,14,1,6873,,,0,"Update comments in HostManager._get_instance_info

The comments in this method are from when it was originally
added [1] in Kilo and the part about ""not yet upgraded"" is
way out of date (it was presumably just there for rolling
upgrades to Kilo) so that's all removed. In addition to
mentioning performance, I've also noted ""isolation"" as a
reason for disabling track_instance_changes in a split-MQ
cells v2 deployment [2].

[1] Ibfcd3b77dbde94db14a9e4027dbaceecb76182cd
[2] https://docs.openstack.org/nova/latest/user/cellsv2-layout.html

Change-Id: I28703dc7c106e9a00a31d4f84c103a7608b45de0
",git fetch https://review.opendev.org/openstack/nova refs/changes/29/674929/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/scheduler/host_manager.py'],1,1775a59975d74b94e84196c758800b031269aa81,bug/1737465," Some sites may disable ``track_instance_changes`` for performance or isolation reasons. In either of these cases, there will either be no information for the host, or the 'updated' value for that host dict will be False. In those cases, we need to grab the current InstanceList instead of relying on the version in _instance_info. # Updates aren't flowing from nova-compute."," Some older compute nodes may not be sending instance change updates to the Scheduler; other sites may disable this feature for performance reasons. In either of these cases, there will either be no information for the host, or the 'updated' value for that host dict will be False. In those cases, we need to grab the current InstanceList instead of relying on the version in _instance_info. # Host is running old version, or updates aren't flowing.",6,7
openstack%2Fnova~master~Ic6b1edfad2e384eb32c6942edc522ee301123cbc,openstack/nova,master,Ic6b1edfad2e384eb32c6942edc522ee301123cbc,Cache host to cell mapping in HostManager,MERGED,2019-06-05 17:34:47.000000000,2019-08-12 12:55:46.000000000,2019-08-12 12:55:46.000000000,"[{'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 26936}]","[{'number': 1, 'created': '2019-06-05 17:34:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a59a373a512bb028dacdd720327f92a4c3ec1186', 'message': ""Cache host to cell mapping in HostManager\n\nIf the instances per host are not cached in the HostManager\nwe lookup the HostMapping per candidate compute node during\neach scheduling request to get the CellMapping so we can target\nthat cell database to pull the instance uuids on the given host.\n\nFor example, if placement returned 20 compute node allocation\ncandidates and we don't have the instances cached for any of those,\nwe'll do 20 queries to the API DB to get host mappings.\n\nWe can improve this by caching the host to cell uuid after the first\nlookup for a given host and then after that, get the CellMapping\nfrom the cells cache (which is a dict, keyed by cell uuid, to the\nCellMapping for that cell).\n\nThe host to instances cache is only enabled if config option\n[filter_scheduler]/track_instance_changes=True which some might\nturn off if the computes cannot RPC cast information the scheduler.\n\nChange-Id: Ic6b1edfad2e384eb32c6942edc522ee301123cbc\nRelated-Bug: #1737465\n""}, {'number': 2, 'created': '2019-08-06 20:12:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d832d2c30027962061836c00138a61709a4eba64', 'message': ""Cache host to cell mapping in HostManager\n\nIf the instances per host are not cached in the HostManager\nwe lookup the HostMapping per candidate compute node during\neach scheduling request to get the CellMapping so we can target\nthat cell database to pull the instance uuids on the given host.\n\nFor example, if placement returned 20 compute node allocation\ncandidates and we don't have the instances cached for any of those,\nwe'll do 20 queries to the API DB to get host mappings.\n\nWe can improve this by caching the host to cell uuid after the first\nlookup for a given host and then after that, get the CellMapping\nfrom the cells cache (which is a dict, keyed by cell uuid, to the\nCellMapping for that cell).\n\nChange-Id: Ic6b1edfad2e384eb32c6942edc522ee301123cbc\nRelated-Bug: #1737465\n""}, {'number': 3, 'created': '2019-08-06 20:28:08.000000000', 'files': ['nova/scheduler/manager.py', 'doc/source/cli/nova-manage.rst', 'nova/tests/unit/scheduler/test_host_manager.py', 'nova/cmd/manage.py', 'nova/scheduler/host_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3a69fdb333e80f5ad2e025a9823b11483fad55c2', 'message': ""Cache host to cell mapping in HostManager\n\nIf the instances per host are not cached in the HostManager\nwe lookup the HostMapping per candidate compute node during\neach scheduling request to get the CellMapping so we can target\nthat cell database to pull the instance uuids on the given host.\n\nFor example, if placement returned 20 compute node allocation\ncandidates and we don't have the instances cached for any of those,\nwe'll do 20 queries to the API DB to get host mappings.\n\nWe can improve this by caching the host to cell uuid after the first\nlookup for a given host and then after that, get the CellMapping\nfrom the cells cache (which is a dict, keyed by cell uuid, to the\nCellMapping for that cell).\n\nChange-Id: Ic6b1edfad2e384eb32c6942edc522ee301123cbc\nRelated-Bug: #1737465\n""}]",18,663388,3a69fdb333e80f5ad2e025a9823b11483fad55c2,64,17,3,6873,,,0,"Cache host to cell mapping in HostManager

If the instances per host are not cached in the HostManager
we lookup the HostMapping per candidate compute node during
each scheduling request to get the CellMapping so we can target
that cell database to pull the instance uuids on the given host.

For example, if placement returned 20 compute node allocation
candidates and we don't have the instances cached for any of those,
we'll do 20 queries to the API DB to get host mappings.

We can improve this by caching the host to cell uuid after the first
lookup for a given host and then after that, get the CellMapping
from the cells cache (which is a dict, keyed by cell uuid, to the
CellMapping for that cell).

Change-Id: Ic6b1edfad2e384eb32c6942edc522ee301123cbc
Related-Bug: #1737465
",git fetch https://review.opendev.org/openstack/nova refs/changes/88/663388/3 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/scheduler/test_host_manager.py', 'nova/scheduler/host_manager.py']",2,a59a373a512bb028dacdd720327f92a4c3ec1186,bug/1737465," # Dict, keyed by host name, to cell UUID to be used to look up the # cell a particular host is in (used with self.cells). self.host_to_cell_uuid = {} def _get_cell_mapping_for_host(self, context, host_name): """"""Finds the CellMapping for a particular host name Relies on a cache to quickly fetch the CellMapping if we have looked up this host before, otherwise gets the CellMapping via the HostMapping record for the given host name. :param context: nova auth request context :param host_name: compute service host name :returns: CellMapping object :raises: HostMappingNotFound if the host is not mapped to a cell """""" # Check to see if we have the host in our cache. if host_name in self.host_to_cell_uuid: cell_uuid = self.host_to_cell_uuid[host_name] if cell_uuid in self.cells: return self.cells[cell_uuid] # Something is wrong so log a warning and just fall through to # lookup the HostMapping. LOG.warning('Host %s is expected to be in cell %s but that cell ' 'uuid was not found in our cache. The service may ' 'need to be restarted to refresh the cache.', host_name, cell_uuid) # We have not cached this host yet so get the HostMapping, cache the # result and return the CellMapping. hm = objects.HostMapping.get_by_host(context, host_name) cell_mapping = hm.cell_mapping self.host_to_cell_uuid[host_name] = cell_mapping.uuid return cell_mapping cm = self._get_cell_mapping_for_host(context, host_name) with context_module.target_cell(context, cm) as cctxt:"," hm = objects.HostMapping.get_by_host(context, host_name) with context_module.target_cell(context, hm.cell_mapping) as cctxt:",81,2
openstack%2Fpuppet-tripleo~master~I364436ed6ca451dfaa079dc891c2cb6516eb3907,openstack/puppet-tripleo,master,I364436ed6ca451dfaa079dc891c2cb6516eb3907,Use nova_metadata related hiera and make cell aware,MERGED,2019-08-07 09:37:05.000000000,2019-08-12 12:53:06.000000000,2019-08-12 12:53:06.000000000,"[{'_account_id': 3153}, {'_account_id': 17216}, {'_account_id': 20172}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30133}]","[{'number': 1, 'created': '2019-08-07 09:37:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/94bfd929f7b478f90295a308b05ad1584352d854', 'message': 'Use nova_metadata related hiera information\n\nSince nova metadata runs via wsgi and can be run on its own\nuse nova_metadata_ related hiera keys to configure the\nproxy in haproxy.\n\nChange-Id: I364436ed6ca451dfaa079dc891c2cb6516eb3907\nRelated-Bug: #1823760\n'}, {'number': 2, 'created': '2019-08-07 09:56:58.000000000', 'files': ['manifests/haproxy.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/520dd2a4cbca1579c2fd7cfd36b96f82d7bbc5e8', 'message': 'Use nova_metadata related hiera and make cell aware\n\nSince nova metadata runs via wsgi and can be run on its own\nuse nova_metadata_ related hiera keys to configure the\nproxy in haproxy.\nIt is now also possible to configure nova_metadata local\nto a nova cellv2.\n\nChange-Id: I364436ed6ca451dfaa079dc891c2cb6516eb3907\nRelated-Bug: #1823760\n'}]",0,675070,520dd2a4cbca1579c2fd7cfd36b96f82d7bbc5e8,13,7,2,17216,,,0,"Use nova_metadata related hiera and make cell aware

Since nova metadata runs via wsgi and can be run on its own
use nova_metadata_ related hiera keys to configure the
proxy in haproxy.
It is now also possible to configure nova_metadata local
to a nova cellv2.

Change-Id: I364436ed6ca451dfaa079dc891c2cb6516eb3907
Related-Bug: #1823760
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/70/675070/2 && git format-patch -1 --stdout FETCH_HEAD,['manifests/haproxy.pp'],1,94bfd929f7b478f90295a308b05ad1584352d854,bug/1823760,"# Defaults to hiera('nova_metadata_enabled', false)# Defaults to hiera('nova_metadata_network', undef) $nova_metadata = hiera('nova_metadata_enabled', false), $nova_metadata_network = hiera('nova_metadata_network', undef),","# Defaults to hiera('nova_api_enabled', false)# Defaults to hiera('nova_api_network', undef) $nova_metadata = hiera('nova_api_enabled', false), $nova_metadata_network = hiera('nova_api_network', undef),",4,4
openstack%2Foslo.messaging~master~I5793d65490167fc940538485dd3584c0f8f27572,openstack/oslo.messaging,master,I5793d65490167fc940538485dd3584c0f8f27572,Update broker version,ABANDONED,2019-04-18 19:19:15.000000000,2019-08-12 12:52:01.000000000,,"[{'_account_id': 20523}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-04-18 19:19:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/f044c385b2bd037936e207c4565657b3aebe40ff', 'message': 'Update broker version\n\nChange-Id: I5793d65490167fc940538485dd3584c0f8f27572\n'}, {'number': 2, 'created': '2019-04-19 12:41:17.000000000', 'files': ['oslo_messaging/tests/functional/test_functional.py', 'tools/setup-test-env-amqp1.sh'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/19e9239cb44530119838a27522a0c91460ff44e6', 'message': 'Update broker version\n\nChange-Id: I5793d65490167fc940538485dd3584c0f8f27572\n'}]",0,653835,19e9239cb44530119838a27522a0c91460ff44e6,10,2,2,20523,,,0,"Update broker version

Change-Id: I5793d65490167fc940538485dd3584c0f8f27572
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/35/653835/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/setup-test-env-amqp1.sh'],1,f044c385b2bd037936e207c4565657b3aebe40ff,amqp1-backend,"ARTEMIS_VERSION=${ARTEMIS_VERSION:-""2.7.0""}","ARTEMIS_VERSION=${ARTEMIS_VERSION:-""2.6.4""}",1,1
openstack%2Foslo.messaging~master~I8a5ba42b3eeba13524b1b9e81bac59a807fe4ab9,openstack/oslo.messaging,master,I8a5ba42b3eeba13524b1b9e81bac59a807fe4ab9,Update kafka version and use archive,ABANDONED,2019-04-18 18:32:06.000000000,2019-08-12 12:51:44.000000000,,"[{'_account_id': 6928}, {'_account_id': 20523}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2019-04-18 18:32:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/54d9706bb6c71a2d488bcd2913c46d3f5e1aa71a', 'message': 'Update kafka version and use archive\n\nChange-Id: I8a5ba42b3eeba13524b1b9e81bac59a807fe4ab9\n'}, {'number': 2, 'created': '2019-06-10 11:39:43.000000000', 'files': ['doc/source/admin/kafka.rst', 'setup-test-env-kafka.sh'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/4400e8ab397cb0b9211c59894c3955e6e592aadc', 'message': 'Update kafka version and use archive\n\nChange-Id: I8a5ba42b3eeba13524b1b9e81bac59a807fe4ab9\n'}]",0,653825,4400e8ab397cb0b9211c59894c3955e6e592aadc,12,4,2,20523,,,0,"Update kafka version and use archive

Change-Id: I8a5ba42b3eeba13524b1b9e81bac59a807fe4ab9
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/25/653825/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/kafka.rst', 'setup-test-env-kafka.sh']",2,54d9706bb6c71a2d488bcd2913c46d3f5e1aa71a,update_kafka,"KAFKA_VERSION=${KAFKA_VERSION:-""2.2.0""} wget http://archive.apache.org/dist/kafka/${KAFKA_VERSION}/$tarball -O $DATADIR/$tarball","KAFKA_VERSION=${KAFKA_VERSION:-""2.0.0""} wget http://www.apache.org/dist/kafka/${KAFKA_VERSION}/$tarball -O $DATADIR/$tarball",4,4
openstack%2Fpython-tripleoclient~master~I6e6a587333e93eb117afe8e6bad1c65962db6cb2,openstack/python-tripleoclient,master,I6e6a587333e93eb117afe8e6bad1c65962db6cb2,Remove support for Cisco hardware types,MERGED,2019-07-25 10:17:44.000000000,2019-08-12 12:44:14.000000000,2019-08-12 12:44:14.000000000,"[{'_account_id': 10239}, {'_account_id': 10873}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-25 10:17:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/ef6f65d45fc22fd5a913c1149a796efe00af1c07', 'message': 'Remove support for Cisco hardware types\n\nRemoved from ironic in https://review.opendev.org/#/c/653282/\n\nChange-Id: I6e6a587333e93eb117afe8e6bad1c65962db6cb2\n'}, {'number': 2, 'created': '2019-07-25 10:36:58.000000000', 'files': ['tripleoclient/v1/undercloud_config.py', 'releasenotes/notes/no-cisco-bdddc17abb5f2847.yaml', 'tripleoclient/tests/v1/undercloud/test_config.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/719267e4db339f1655427daa83042350e6d144b9', 'message': 'Remove support for Cisco hardware types\n\nRemoved from ironic in https://review.opendev.org/#/c/653282/\n\nChange-Id: I6e6a587333e93eb117afe8e6bad1c65962db6cb2\n'}]",0,672684,719267e4db339f1655427daa83042350e6d144b9,21,5,2,10239,,,0,"Remove support for Cisco hardware types

Removed from ironic in https://review.opendev.org/#/c/653282/

Change-Id: I6e6a587333e93eb117afe8e6bad1c65962db6cb2
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/84/672684/2 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/v1/undercloud_config.py', 'releasenotes/notes/no-cisco-bdddc17abb5f2847.yaml', 'tripleoclient/tests/v1/undercloud/test_config.py']",3,ef6f65d45fc22fd5a913c1149a796efe00af1c07,cisco," 'irmc', 'xclarity'] 'IronicEnabledHardwareTypes': ['idrac', 'ilo', 'ipmi', 'irmc', 'IronicEnabledManagementInterfaces': ['fake', 'idrac', 'staging-ovirt', 'xclarity'], 'IronicEnabledPowerInterfaces': ['fake', 'idrac', 'staging-ovirt', 'xclarity'],"," 'irmc', 'cisco-ucs-managed', 'cisco-ucs-standalone', 'xclarity'] 'IronicEnabledHardwareTypes': ['cisco-ucs-managed', 'cisco-ucs-standalone', 'idrac', 'ilo', 'ipmi', 'irmc', 'IronicEnabledManagementInterfaces': ['cimc', 'fake', 'idrac', 'staging-ovirt', 'ucsm', 'xclarity'], 'IronicEnabledPowerInterfaces': ['cimc', 'fake', 'idrac', 'staging-ovirt', 'ucsm', 'xclarity'],",12,16
openstack%2Fdiskimage-builder~master~I58ee1a49d62316c6c3f0588832c97f659f7e460b,openstack/diskimage-builder,master,I58ee1a49d62316c6c3f0588832c97f659f7e460b,Stop regex warning,MERGED,2019-08-08 13:33:03.000000000,2019-08-12 12:34:46.000000000,2019-08-09 06:59:50.000000000,"[{'_account_id': 7118}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 13:33:03.000000000', 'files': ['diskimage_builder/lib/outfilter.py'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/9a145cf0d06390bd049faf5db082f1d4fd5821e7', 'message': 'Stop regex warning\n\npython 3.6 warns about regexes like:\nDeprecationWarning: invalid escape sequence \\+\n\nI noticed that debugging a trove job and it really led me in the wrong\nway. Fix this with making it a raw string.\n\nChange-Id: I58ee1a49d62316c6c3f0588832c97f659f7e460b\n'}]",0,675337,9a145cf0d06390bd049faf5db082f1d4fd5821e7,18,4,1,6547,,,0,"Stop regex warning

python 3.6 warns about regexes like:
DeprecationWarning: invalid escape sequence \+

I noticed that debugging a trove job and it really led me in the wrong
way. Fix this with making it a raw string.

Change-Id: I58ee1a49d62316c6c3f0588832c97f659f7e460b
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/37/675337/1 && git format-patch -1 --stdout FETCH_HEAD,['diskimage_builder/lib/outfilter.py'],1,9a145cf0d06390bd049faf5db082f1d4fd5821e7,warn-py36,IGNORE_LINES = re.compile(r'(set \+o|xtrace)'),IGNORE_LINES = re.compile('(set \+o|xtrace)'),1,1
openstack%2Ftripleo-ci~master~Icc2b673f44ea4e9d5ab244bc722ec232cb39299f,openstack/tripleo-ci,master,Icc2b673f44ea4e9d5ab244bc722ec232cb39299f,Make standalone-10 temp non-voting while fix merges,MERGED,2019-08-08 14:10:08.000000000,2019-08-12 12:31:53.000000000,2019-08-09 02:07:26.000000000,"[{'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 14:10:08.000000000', 'files': ['zuul.d/standalone-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/2a227889c704f1a711840fd2b103da419a5c2aa9', 'message': 'Make standalone-10 temp non-voting while fix merges\n\nhttps://review.opendev.org/#/c/675301/ and\nhttps://review.opendev.org/#/c/675263/\nare required to fix the failing job.\n\nSince the job failure is preventing merges,\nmake this job temp non-voting.\n\nRevert this patch when the fix merges.\n\nChange-Id: Icc2b673f44ea4e9d5ab244bc722ec232cb39299f\n'}]",0,675342,2a227889c704f1a711840fd2b103da419a5c2aa9,14,8,1,9976,,,0,"Make standalone-10 temp non-voting while fix merges

https://review.opendev.org/#/c/675301/ and
https://review.opendev.org/#/c/675263/
are required to fix the failing job.

Since the job failure is preventing merges,
make this job temp non-voting.

Revert this patch when the fix merges.

Change-Id: Icc2b673f44ea4e9d5ab244bc722ec232cb39299f
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/42/675342/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/standalone-jobs.yaml'],1,2a227889c704f1a711840fd2b103da419a5c2aa9,temp-standalone-10, voting: false, voting: true,1,1
openstack%2Fopenstack-ansible-os_horizon~master~I9b07cf4a1ffdffab752f59e1510796c29a259b45,openstack/openstack-ansible-os_horizon,master,I9b07cf4a1ffdffab752f59e1510796c29a259b45,Add encoding to local_settings.py,MERGED,2019-08-03 10:15:58.000000000,2019-08-12 12:23:46.000000000,2019-08-10 13:11:28.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-03 10:15:58.000000000', 'files': ['templates/horizon_local_settings.py.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_horizon/commit/7bb294b92a61ea1bebcdce1943f48ffaf5c1cdee', 'message': 'Add encoding to local_settings.py\n\nIn order to allow usage of non-latin symbols inside local_settings.py\nmagic comment is required according to PEP263[1]\n\nWhile this can be overriden on master with config_template (since [2]),\nthis might be easily backported to earlier releases.\n\n[1] https://www.python.org/dev/peps/pep-0263/\n[2] https://review.opendev.org/#/c/672170/\n\nChange-Id: I9b07cf4a1ffdffab752f59e1510796c29a259b45\n'}]",0,674448,7bb294b92a61ea1bebcdce1943f48ffaf5c1cdee,13,4,1,28619,,,0,"Add encoding to local_settings.py

In order to allow usage of non-latin symbols inside local_settings.py
magic comment is required according to PEP263[1]

While this can be overriden on master with config_template (since [2]),
this might be easily backported to earlier releases.

[1] https://www.python.org/dev/peps/pep-0263/
[2] https://review.opendev.org/#/c/672170/

Change-Id: I9b07cf4a1ffdffab752f59e1510796c29a259b45
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_horizon refs/changes/48/674448/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/horizon_local_settings.py.j2'],1,7bb294b92a61ea1bebcdce1943f48ffaf5c1cdee,,# -*- coding: utf-8 -*-,,1,0
openstack%2Fopenstack-ansible~master~Ic10d5f7c310bc7ee8a4ddd1425e98380f11c512d,openstack/openstack-ansible,master,Ic10d5f7c310bc7ee8a4ddd1425e98380f11c512d,Bump SHAs for master,ABANDONED,2019-07-28 14:33:03.000000000,2019-08-12 12:18:43.000000000,,"[{'_account_id': 17068}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-07-28 14:33:03.000000000', 'files': ['playbooks/defaults/repo_packages/openstack_services.yml', 'releasenotes/notes/enable-active-active-9af1551759468dc8.yaml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'releasenotes/notes/drop_legacy_l3_ha-e8d5d3dbd7c882fc.yaml', 'playbooks/defaults/repo_packages/openstack_testing.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/30411886354124c5cb845bb913ca5035bab92303', 'message': 'Bump SHAs for master\n\nChange-Id: Ic10d5f7c310bc7ee8a4ddd1425e98380f11c512d\n'}]",0,673174,30411886354124c5cb845bb913ca5035bab92303,7,4,1,17068,,,0,"Bump SHAs for master

Change-Id: Ic10d5f7c310bc7ee8a4ddd1425e98380f11c512d
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/74/673174/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/defaults/repo_packages/openstack_services.yml', 'releasenotes/notes/enable-active-active-9af1551759468dc8.yaml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'releasenotes/notes/drop_legacy_l3_ha-e8d5d3dbd7c882fc.yaml', 'playbooks/defaults/repo_packages/openstack_testing.yml']",6,30411886354124c5cb845bb913ca5035bab92303,bump_osa,tempest_git_install_branch: a63d89a9d8b152d34d12fe58de9af3d7af696ecc # HEAD as of 28.07.2019,tempest_git_install_branch: d605315e7f7e1f71cc20437049daca6430f3cfb4 # HEAD as of 14.07.2019,66,49
openstack%2Fneutron~stable%2Fstein~I30c2bd4ce3715cde60bc0cd3736bd9c75edc1df3,openstack/neutron,stable/stein,I30c2bd4ce3715cde60bc0cd3736bd9c75edc1df3,Stop OVS agent before starting it again,MERGED,2019-06-20 13:58:47.000000000,2019-08-12 12:11:05.000000000,2019-06-27 18:42:55.000000000,"[{'_account_id': 1131}, {'_account_id': 9531}, {'_account_id': 9732}, {'_account_id': 13995}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 26622}]","[{'number': 1, 'created': '2019-06-20 13:58:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e8d4db792bda8ea527dbc72b3f833c343b9fa02d', 'message': 'Stop OVS agent before starting it again\n\nIn TestOVSAgent, there are two tests where the OVS agent is\nconfigured and started twice per test. Before the second call,\nthe agent should be stopped first.\n\nChange-Id: I30c2bd4ce3715cde60bc0cd3736bd9c75edc1df3\nCloses-Bug: #1830895\n(cherry picked from commit b77c79e5e8ee8127ccfc875e6e260f554694104b)\n'}, {'number': 2, 'created': '2019-06-22 15:24:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/2993e5c88cafbd4db9a6702bf980761a1a389a7c', 'message': 'Stop OVS agent before starting it again\n\nIn TestOVSAgent, there are two tests where the OVS agent is\nconfigured and started twice per test. Before the second call,\nthe agent should be stopped first.\n\nChange-Id: I30c2bd4ce3715cde60bc0cd3736bd9c75edc1df3\nCloses-Bug: #1830895\n(cherry picked from commit b77c79e5e8ee8127ccfc875e6e260f554694104b)\n'}, {'number': 3, 'created': '2019-06-25 05:40:04.000000000', 'files': ['neutron/tests/functional/agent/test_l2_ovs_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/ff662050817eee6ee6371e765b46d90e49adbe9c', 'message': 'Stop OVS agent before starting it again\n\nIn TestOVSAgent, there are two tests where the OVS agent is\nconfigured and started twice per test. Before the second call,\nthe agent should be stopped first.\n\nDepends-On: https://review.opendev.org/667216/\nChange-Id: I30c2bd4ce3715cde60bc0cd3736bd9c75edc1df3\nCloses-Bug: #1830895\n(cherry picked from commit b77c79e5e8ee8127ccfc875e6e260f554694104b)\n'}]",0,666583,ff662050817eee6ee6371e765b46d90e49adbe9c,47,8,3,16688,,,0,"Stop OVS agent before starting it again

In TestOVSAgent, there are two tests where the OVS agent is
configured and started twice per test. Before the second call,
the agent should be stopped first.

Depends-On: https://review.opendev.org/667216/
Change-Id: I30c2bd4ce3715cde60bc0cd3736bd9c75edc1df3
Closes-Bug: #1830895
(cherry picked from commit b77c79e5e8ee8127ccfc875e6e260f554694104b)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/83/666583/2 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/agent/test_l2_ovs_agent.py'],1,e8d4db792bda8ea527dbc72b3f833c343b9fa02d,bug/1830895," self.stop_agent(self.agent, self.agent_thread) self.stop_agent(self.agent, self.agent_thread)",,2,0
openstack%2Fneutron~master~Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a,openstack/neutron,master,Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a,Populate binding levels when concurrent ops fail,MERGED,2018-09-30 08:29:44.000000000,2019-08-12 12:05:58.000000000,2019-05-06 02:45:50.000000000,"[{'_account_id': 1131}, {'_account_id': 1653}, {'_account_id': 4694}, {'_account_id': 9531}, {'_account_id': 9732}, {'_account_id': 10385}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 27654}, {'_account_id': 28373}]","[{'number': 1, 'created': '2018-09-30 08:29:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ecf25147d67d2a5c648d3618b09b6ffb6ebaa90e', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}, {'number': 2, 'created': '2018-10-08 06:00:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/78406ca4447200387e7b1dc98b403a6466c5afc8', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}, {'number': 3, 'created': '2018-10-17 07:36:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/13537f12ff31278a7ebb6dfcd8202a7a529053d3', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}, {'number': 4, 'created': '2018-11-27 05:32:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8a1b17014763da5c555ed58976e6948a4315f4b9', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}, {'number': 5, 'created': '2019-01-10 09:22:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/232210ef8488cf0974ca78caccf972d0a6521d38', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}, {'number': 6, 'created': '2019-03-04 04:42:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c15bdf07c29f382ba361366addff2ad0255c5c28', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}, {'number': 7, 'created': '2019-04-18 03:22:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/cb8fa2300342e578814307f6bcacbb344081d06a', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}, {'number': 8, 'created': '2019-04-30 22:58:36.000000000', 'files': ['neutron/tests/unit/plugins/ml2/test_plugin.py', 'neutron/plugins/ml2/plugin.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/0dc730c7c0d3f0a49dee28d0d6e7ff9020d94443', 'message': 'Populate binding levels when concurrent ops fail\n\nConcurrent calls to _bind_port_if_needed may lead to a missing RPC\nnotification which can cause a port stuck in a DOWN state. If the only\ncaller that succeeds in the concurrency does not specify that an RPC\nnotification is allowed then no RPC would be sent to the agent. The\nother caller which needs to send an RPC notification will fail since the\nresulting PortContext instance will not have any binding levels set.\n\nThe failure has negative effects on consumers of the L2Population\nfunctionality because the L2Population mechanism driver will not be\ntriggered to publish that a port is UP on a given compute node. Manual\nintervention is required in this case.\n\nThis patch proposes to handle this by populating the PortContext with\nthe current binding levels so that the caller can continue on and have\nan RPC notification sent out.\n\nCloses-Bug: #1755810\nStory: 2003922\nChange-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a\n'}]",4,606827,0dc730c7c0d3f0a49dee28d0d6e7ff9020d94443,102,14,8,28373,,,0,"Populate binding levels when concurrent ops fail

Concurrent calls to _bind_port_if_needed may lead to a missing RPC
notification which can cause a port stuck in a DOWN state. If the only
caller that succeeds in the concurrency does not specify that an RPC
notification is allowed then no RPC would be sent to the agent. The
other caller which needs to send an RPC notification will fail since the
resulting PortContext instance will not have any binding levels set.

The failure has negative effects on consumers of the L2Population
functionality because the L2Population mechanism driver will not be
triggered to publish that a port is UP on a given compute node. Manual
intervention is required in this case.

This patch proposes to handle this by populating the PortContext with
the current binding levels so that the caller can continue on and have
an RPC notification sent out.

Closes-Bug: #1755810
Story: 2003922
Change-Id: Ie2b813b2bdf181fb3c24743dbd13487ace6ee76a
",git fetch https://review.opendev.org/openstack/neutron refs/changes/27/606827/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/plugins/ml2/plugin.py'],1,ecf25147d67d2a5c648d3618b09b6ffb6ebaa90e,bug/1755810," else: # Try to populate the PortContext with the current binding # levels so that the RPC notification won't get suppressed. # This is to avoid leaving ports stuck in a DOWN state. # For more information see bug: # https://bugs.launchpad.net/neutron/+bug/1755810 LOG.debug(""Concurrent port binding operations fail on port %s"", port_id) levels = db.get_binding_levels(plugin_context, port_id, cur_binding.host) for level in levels: cur_context._push_binding_level(level) # refresh context with a snapshot of the current binding state cur_context._binding = driver_context.InstanceSnapshot( cur_binding) ",,16,0
openstack%2Fneutron~master~I94ddddda3c1960d43893c7a367a81279d429e469,openstack/neutron,master,I94ddddda3c1960d43893c7a367a81279d429e469,Make sure the port still in port map when prepare_port_filter,MERGED,2019-04-18 06:52:57.000000000,2019-08-12 12:03:51.000000000,2019-05-14 20:43:13.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 9531}, {'_account_id': 10518}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 19956}, {'_account_id': 22348}, {'_account_id': 26286}, {'_account_id': 26297}, {'_account_id': 26622}, {'_account_id': 27654}, {'_account_id': 28935}, {'_account_id': 30103}, {'_account_id': 30413}]","[{'number': 1, 'created': '2019-04-18 06:52:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e5be106f875fa4dc36b630b492e2d174c3f7f235', 'message': ""Make sure the port still in port map when prepare_port_filter\n\nThe current code will remove the port from sg_port_map, but then it\nwon't be added into the map, when we resize/migrate this instance,\nthe related openflow won't be deleted, this will cause vm connectivity\nproblem.\n\nChange-Id: I94ddddda3c1960d43893c7a367a81279d429e469\n""}, {'number': 2, 'created': '2019-04-18 07:16:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8797d5b44e3bdafe49ce936dacd26ef7a747003c', 'message': ""Make sure the port still in port map when prepare_port_filter\n\nThe current code will remove the port from sg_port_map, but then it\nwon't be added into the map, when we resize/migrate this instance,\nthe related openflow won't be deleted, this will cause vm connectivity\nproblem.\n\nCloses-Bug: #1825295\nChange-Id: I94ddddda3c1960d43893c7a367a81279d429e469\n""}, {'number': 3, 'created': '2019-05-10 13:00:38.000000000', 'files': ['neutron/agent/linux/openvswitch_firewall/firewall.py', 'neutron/tests/unit/agent/linux/openvswitch_firewall/test_firewall.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/82782d37639fab97e445e4bbb4daeb85dc829fcd', 'message': ""Make sure the port still in port map when prepare_port_filter\n\nThe current code will remove the port from sg_port_map, but then it\nwon't be added into the map, when we resize/migrate this instance,\nthe related openflow won't be deleted, this will cause vm connectivity\nproblem.\n\nCloses-Bug: #1825295\nChange-Id: I94ddddda3c1960d43893c7a367a81279d429e469\n""}]",1,653668,82782d37639fab97e445e4bbb4daeb85dc829fcd,55,17,3,19956,,,0,"Make sure the port still in port map when prepare_port_filter

The current code will remove the port from sg_port_map, but then it
won't be added into the map, when we resize/migrate this instance,
the related openflow won't be deleted, this will cause vm connectivity
problem.

Closes-Bug: #1825295
Change-Id: I94ddddda3c1960d43893c7a367a81279d429e469
",git fetch https://review.opendev.org/openstack/neutron refs/changes/68/653668/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/agent/linux/openvswitch_firewall/firewall.py', 'neutron/tests/unit/agent/linux/openvswitch_firewall/test_firewall.py']",2,e5be106f875fa4dc36b630b492e2d174c3f7f235,bug/1825295," self.assertIn(of_port.id, self.firewall.sg_port_map.ports.keys())",,4,1
openstack%2Ftripleo-validations~stable%2Fstein~Ic17307efc2b4907cc21df8289a2e0c84d2f30b48,openstack/tripleo-validations,stable/stein,Ic17307efc2b4907cc21df8289a2e0c84d2f30b48,Improve Ceph health checks to work with custom cluster names,ABANDONED,2019-08-09 11:08:01.000000000,2019-08-12 11:48:35.000000000,,"[{'_account_id': 6796}, {'_account_id': 14985}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 25402}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-09 11:08:01.000000000', 'files': ['roles/ceph/tasks/ceph-health.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/466285cd5d847455bc1b769a9c0612394b9b529a', 'message': 'Improve Ceph health checks to work with custom cluster names\n\nWhen the Ceph cluster name is customized the ceph commands need\nto be told the custom cluster name.\n\nChange-Id: Ic17307efc2b4907cc21df8289a2e0c84d2f30b48\n(cherry picked from commit ff4d7ceec5a24e0b53d0b2effc2e7d23cb895344)\n'}]",0,675585,466285cd5d847455bc1b769a9c0612394b9b529a,5,6,1,11491,,,0,"Improve Ceph health checks to work with custom cluster names

When the Ceph cluster name is customized the ceph commands need
to be told the custom cluster name.

Change-Id: Ic17307efc2b4907cc21df8289a2e0c84d2f30b48
(cherry picked from commit ff4d7ceec5a24e0b53d0b2effc2e7d23cb895344)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/85/675585/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/ceph/tasks/ceph-health.yaml'],1,466285cd5d847455bc1b769a9c0612394b9b529a,ceph-health-backports," - name: Set ceph cluster name become: true shell: find /etc/ceph -name '*.conf' -exec basename -s .conf {} \; 2>/dev/null | head -n1 ignore_errors: true register: ceph_cluster_name changed_when: False shell: ""{{ container_cli }} exec {{ ceph_mon_container.stdout }} ceph --cluster {{ ceph_cluster_name }} health | awk '{print $1}'"" shell: ""{{ container_cli }} exec {{ ceph_mon_container.stdout }} ceph --cluster {{ ceph_cluster_name }} osd stat -f json | jq '{{ jq_osd_percentage_filter }}'"""," shell: ""{{ container_cli }} exec {{ ceph_mon_container.stdout }} ceph health | awk '{print $1}'"" shell: ""{{ container_cli }} exec {{ ceph_mon_container.stdout }} ceph osd stat -f json | jq '{{ jq_osd_percentage_filter }}'""",9,2
openstack%2Fpuppet-tripleo~stable%2Fstein~I6eb75c88e06281c61e4317fe8722e4bdfa572fe4,openstack/puppet-tripleo,stable/stein,I6eb75c88e06281c61e4317fe8722e4bdfa572fe4,Ensure we set $haproxy_firewall_rules variable,MERGED,2019-08-08 17:57:54.000000000,2019-08-12 11:33:31.000000000,2019-08-12 11:33:31.000000000,"[{'_account_id': 3153}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-08 17:57:54.000000000', 'files': ['manifests/haproxy/endpoint.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/ed6c6b003c1fd2cb6a615f809941b00bf750b3cb', 'message': ""Ensure we set $haproxy_firewall_rules variable\n\nIf we do not set a default value for that one, we might hit the\nfollowing puppet warning:\n\nWarning: Unknown variable: 'haproxy_firewall_rules'. (file:\n/etc/puppet/modules/tripleo/manifests/haproxy/endpoint.pp, line: 303,\ncolumn: 54)\n\nChange-Id: I6eb75c88e06281c61e4317fe8722e4bdfa572fe4\n(cherry picked from commit 34bf20d668d228f8c3ee09e0d3354b22dc4fd6b6)\n""}]",0,675428,ed6c6b003c1fd2cb6a615f809941b00bf750b3cb,15,5,1,20172,,,0,"Ensure we set $haproxy_firewall_rules variable

If we do not set a default value for that one, we might hit the
following puppet warning:

Warning: Unknown variable: 'haproxy_firewall_rules'. (file:
/etc/puppet/modules/tripleo/manifests/haproxy/endpoint.pp, line: 303,
column: 54)

Change-Id: I6eb75c88e06281c61e4317fe8722e4bdfa572fe4
(cherry picked from commit 34bf20d668d228f8c3ee09e0d3354b22dc4fd6b6)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/28/675428/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/haproxy/endpoint.pp'],1,ed6c6b003c1fd2cb6a615f809941b00bf750b3cb,haproxy_rules/empty-set-stable/stein, } else { $haproxy_firewall_rules = {},,2,0
openstack%2Fironic-python-agent~stable%2Frocky~I855e6e02a33bcf146497089319445d76652f0691,openstack/ironic-python-agent,stable/rocky,I855e6e02a33bcf146497089319445d76652f0691,CI: stop using pyghmi from git master,MERGED,2019-07-31 15:43:49.000000000,2019-08-12 11:05:58.000000000,2019-08-12 11:05:58.000000000,"[{'_account_id': 10239}, {'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}]","[{'number': 1, 'created': '2019-07-31 15:43:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/ef37023d48083fe1cb58885f2a2e7a0d22d27f9b', 'message': 'CI: stop using pyghmi from git master\n\nChange-Id: I855e6e02a33bcf146497089319445d76652f0691\n(cherry picked from commit e1b630dd841363d1e1d322628ce667705f309467)\n'}, {'number': 2, 'created': '2019-08-07 08:46:00.000000000', 'files': ['playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-direct-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-iscsi-tinyipa-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-direct-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-direct-tinyipa-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-iscsi-tinyipa-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-direct-tinyipa-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-iscsi-tinyipa256-src/run.yaml', 'playbooks/legacy/tempest-dsvm-ironic-inspector-src/run.yaml', 'zuul.d/legacy-ironic-jobs.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-ipmi-iscsi-tinyipa-python3/run.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/e1903844ede0aeb5592c31d132f0c52fc8583e51', 'message': 'CI: stop using pyghmi from git master\n\nThe stable backport was adjusted to remove pyghmi from PROJECTS.\n\nChange-Id: I855e6e02a33bcf146497089319445d76652f0691\n(cherry picked from commit e1b630dd841363d1e1d322628ce667705f309467)\n'}]",0,673855,e1903844ede0aeb5592c31d132f0c52fc8583e51,25,5,2,10239,,,0,"CI: stop using pyghmi from git master

The stable backport was adjusted to remove pyghmi from PROJECTS.

Change-Id: I855e6e02a33bcf146497089319445d76652f0691
(cherry picked from commit e1b630dd841363d1e1d322628ce667705f309467)
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/55/673855/2 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-direct-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-direct-coreos-src/run.yaml', 'zuul.d/legacy-ironic-jobs.yaml']",5,ef37023d48083fe1cb58885f2a2e7a0d22d27f9b,gate-stable/rocky,, - x/pyghmi,0,5
openstack%2Fironic-python-agent~master~Ia810c7fb47f7098b8173d765ff9c33b48a223ff1,openstack/ironic-python-agent,master,Ia810c7fb47f7098b8173d765ff9c33b48a223ff1,Ignore /dev/ramX devices for any purposes,MERGED,2019-08-12 07:24:05.000000000,2019-08-12 10:59:34.000000000,2019-08-12 10:28:31.000000000,"[{'_account_id': 11292}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24828}]","[{'number': 1, 'created': '2019-08-12 07:24:05.000000000', 'files': ['ironic_python_agent/hardware.py', 'ironic_python_agent/tests/unit/test_hardware.py'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/3d5fc82ecec720a81cd7e2c862038aba37e8eb1f', 'message': ""Ignore /dev/ramX devices for any purposes\n\nWhile most modern Linux distributions do not create RAM disks, newer\nTinyCoreLinux actually does. Ignore them since we don't want to deploy\nto RAM.\n\nChange-Id: Ia810c7fb47f7098b8173d765ff9c33b48a223ff1\n""}]",0,675833,3d5fc82ecec720a81cd7e2c862038aba37e8eb1f,8,4,1,10239,,,0,"Ignore /dev/ramX devices for any purposes

While most modern Linux distributions do not create RAM disks, newer
TinyCoreLinux actually does. Ignore them since we don't want to deploy
to RAM.

Change-Id: Ia810c7fb47f7098b8173d765ff9c33b48a223ff1
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/33/675833/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/hardware.py', 'ironic_python_agent/tests/unit/test_hardware.py']",2,3d5fc82ecec720a81cd7e2c862038aba37e8eb1f,ram," 'KNAME=""zram0"" MODEL="""" SIZE="""" ROTA=""0"" TYPE=""disk""\n' 'KNAME=""ram0"" MODEL="""" SIZE=""8388608"" ROTA=""0"" TYPE=""disk""\n' 'KNAME=""ram1"" MODEL="""" SIZE=""8388608"" ROTA=""0"" TYPE=""disk""\n' 'KNAME=""ram2"" MODEL="""" SIZE=""8388608"" ROTA=""0"" TYPE=""disk""\n' 'KNAME=""ram3"" MODEL="""" SIZE=""8388608"" ROTA=""0"" TYPE=""disk""'"," 'KNAME=""zram0"" MODEL="""" SIZE="""" ROTA=""0"" TYPE=""disk""'",10,5
openstack%2Fopenstack-ansible~master~Ifb665d7513ad28a9acfe4184f2c9019a81c3aeac,openstack/openstack-ansible,master,Ifb665d7513ad28a9acfe4184f2c9019a81c3aeac,docs: Release OSA Stein,ABANDONED,2019-08-08 15:47:12.000000000,2019-08-12 10:59:01.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-08 15:47:12.000000000', 'files': ['doc/source/index.rst'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/d115865881f6587f333f67ad9e6f54fe68bebbc8', 'message': ""docs: Release OSA Stein\n\nLet's make stein to be released!\n\nChange-Id: Ifb665d7513ad28a9acfe4184f2c9019a81c3aeac\n""}]",0,675385,d115865881f6587f333f67ad9e6f54fe68bebbc8,3,1,1,28619,,,0,"docs: Release OSA Stein

Let's make stein to be released!

Change-Id: Ifb665d7513ad28a9acfe4184f2c9019a81c3aeac
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/85/675385/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/index.rst'],1,d115865881f6587f333f67ad9e6f54fe68bebbc8,,Stein: MaintainedOpenStack-Ansible Stein series was first released with the 19.0.0 tag on 16 July 2019.,Stein: Pre-releaseOpenStack-Ansible Stein is currently in development.,3,2
openstack%2Fironic~master~I928ad2c493802a60d77afdb7d4827d820652512c,openstack/ironic,master,I928ad2c493802a60d77afdb7d4827d820652512c,Enable no IP address to be returned,MERGED,2017-08-30 22:31:06.000000000,2019-08-12 10:57:43.000000000,2019-08-12 10:57:43.000000000,"[{'_account_id': 3}, {'_account_id': 10118}, {'_account_id': 10239}, {'_account_id': 11076}, {'_account_id': 11655}, {'_account_id': 14525}, {'_account_id': 14629}, {'_account_id': 17998}, {'_account_id': 19003}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}, {'_account_id': 24828}]","[{'number': 1, 'created': '2017-08-30 22:31:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/d511be7109577b465471326d89cb03dd03d62290', 'message': 'Bypass neutron dhcp if noop interface\n\nSince we have not removed the dhcp interface,\nand we still invoke it as opposed through the\nconfigured network_interface, we should bypass\nwhen the noop interface is configured.\n\nChange-Id: I928ad2c493802a60d77afdb7d4827d820652512c\nRelated-Bug: #1683777\n'}, {'number': 2, 'created': '2019-06-14 22:02:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/4ce8fbd43170406aaf8bd3bebf8cc5949f2f0188', 'message': ""Enable no IP address to be returned\n\nCurrently 'noop' network_interface users are unable to use\ngrub to pxe boot machines as the original code path expected\nalways use IP addresses for the lookup. We've previously\nchanged the default template, so now there is really no\nreason to error at this point, since we should be able to\ncontinue ahead and still boot the instance.\n\nChange-Id: I928ad2c493802a60d77afdb7d4827d820652512c\nStory: 1683777\nTask: 33759\n""}, {'number': 3, 'created': '2019-06-21 06:17:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/fd73210312638a6942d67716b5ec5926fd93840d', 'message': ""Enable no IP address to be returned\n\nCurrently 'noop' network_interface users are unable to use\ngrub to pxe boot machines as the original code path expected\nalways use IP addresses for the lookup. We've previously\nchanged the default template, so now there is really no\nreason to error at this point, since we should be able to\ncontinue ahead and still boot the instance.\n\nChange-Id: I928ad2c493802a60d77afdb7d4827d820652512c\nStory: 1683777\nTask: 33759\n""}, {'number': 4, 'created': '2019-07-05 18:40:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/cb577620da36ab9bec09df988bd96f40bf9eb1fa', 'message': ""Enable no IP address to be returned\n\nCurrently 'noop' network_interface users are unable to use\ngrub to pxe boot machines as the original code path expected\nalways use IP addresses for the lookup. We've previously\nchanged the default template, so now there is really no\nreason to error at this point, since we should be able to\ncontinue ahead and still boot the instance.\n\nChange-Id: I928ad2c493802a60d77afdb7d4827d820652512c\nStory: 1683777\nTask: 33759\n""}, {'number': 5, 'created': '2019-07-29 19:10:16.000000000', 'files': ['releasenotes/notes/fixes-noop-network-with-grub-8fd99a73b593ddba.yaml', 'ironic/dhcp/base.py', 'ironic/common/pxe_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/ac8b2d01b056997955a2ca071ac3da6525354fca', 'message': ""Enable no IP address to be returned\n\nCurrently 'noop' network_interface users are unable to use\ngrub to pxe boot machines as the original code path expected\nalways use IP addresses for the lookup. We've previously\nchanged the default template, so now there is really no\nreason to error at this point, since we should be able to\ncontinue ahead and still boot the instance.\n\nChange-Id: I928ad2c493802a60d77afdb7d4827d820652512c\nStory: 1683777\nTask: 33759\n""}]",17,499376,ac8b2d01b056997955a2ca071ac3da6525354fca,71,14,5,11655,,,0,"Enable no IP address to be returned

Currently 'noop' network_interface users are unable to use
grub to pxe boot machines as the original code path expected
always use IP addresses for the lookup. We've previously
changed the default template, so now there is really no
reason to error at this point, since we should be able to
continue ahead and still boot the instance.

Change-Id: I928ad2c493802a60d77afdb7d4827d820652512c
Story: 1683777
Task: 33759
",git fetch https://review.opendev.org/openstack/ironic refs/changes/76/499376/5 && git format-patch -1 --stdout FETCH_HEAD,['ironic/dhcp/neutron.py'],1,d511be7109577b465471326d89cb03dd03d62290,temp," # NOTE(TheJulia): Until the dhcp interface is fully deprecated # and removed, we need to bypass if a node calls with the ``noop`` # network_interface. if task.node.network_interface == 'noop': return # NOTE(TheJulia): Until the dhcp interface is fully deprecated # and removed, we need to bypass if a node calls with the ``noop`` # network_interface. if task.node.network_interface == 'noop': return",,10,1
openstack%2Ftripleo-heat-templates~master~I8a54a03c826597fe8c89ffccbdde48357a0b6654,openstack/tripleo-heat-templates,master,I8a54a03c826597fe8c89ffccbdde48357a0b6654,"Moved to ""systemd"" module and ensure caches are flushed",MERGED,2019-08-05 07:49:53.000000000,2019-08-12 10:45:32.000000000,2019-08-12 10:45:32.000000000,"[{'_account_id': 3153}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-05 07:49:53.000000000', 'files': ['deployment/octavia/octavia-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c5e4348ae0e8f41e1a6dfe74e67f4857b333e0d4', 'message': 'Moved to ""systemd"" module and ensure caches are flushed\n\nSince most of the services are managed with systemd ansible module, it\'s\nlogical to convert this one. We also ensure systemd caches are flushes\nwhen we remove the unit file.\n\nChange-Id: I8a54a03c826597fe8c89ffccbdde48357a0b6654\n'}]",0,674546,c5e4348ae0e8f41e1a6dfe74e67f4857b333e0d4,14,6,1,28223,,,0,"Moved to ""systemd"" module and ensure caches are flushed

Since most of the services are managed with systemd ansible module, it's
logical to convert this one. We also ensure systemd caches are flushes
when we remove the unit file.

Change-Id: I8a54a03c826597fe8c89ffccbdde48357a0b6654
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/46/674546/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/octavia/octavia-api-container-puppet.yaml'],1,c5e4348ae0e8f41e1a6dfe74e67f4857b333e0d4,systemd/daemon-reload, systemd: - name: reload systemd systemd: daemon-reload: yes when: container_cli == 'podman', service:,5,1
openstack%2Fcookbook-openstack-orchestration~master~Idfd9aed09ccd5c3871cac71dbe0b51c921f1ec0e,openstack/cookbook-openstack-orchestration,master,Idfd9aed09ccd5c3871cac71dbe0b51c921f1ec0e,"Fixes for fog-openstack, admin endpoint and common pkgs on Debian",MERGED,2019-07-06 20:45:25.000000000,2019-08-12 10:10:35.000000000,2019-08-12 10:10:35.000000000,"[{'_account_id': 13252}, {'_account_id': 19193}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-06 20:45:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cookbook-openstack-orchestration/commit/9e9c2444572653a54cb2e08b82928a2557f66a79', 'message': 'Fixes for fog-openstack, admin endpoint and common pkgs on Debian\n\nThis provides a collection of fixes required to converge properly:\n\n- fog-openstack-1.x already appends ""auth/tokens"" so we no longer need\n  to do that\n- Remove references to deprecated\n  node[\'openstack\'][\'api\'][\'auth\'][\'version\'] attribute\n- Remove creation of admin deprecated endpoints\n- Add python-heat to common packages on Debian system so that the\n  heat-manage binary is available\n\nChange-Id: Idfd9aed09ccd5c3871cac71dbe0b51c921f1ec0e\nSigned-off-by: Lance Albertson <lance@osuosl.org>\n'}, {'number': 2, 'created': '2019-08-05 20:17:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cookbook-openstack-orchestration/commit/a95a234f830a34835a27a3ef4c8f3ded9647124a', 'message': 'Fixes for fog-openstack, admin endpoint and common pkgs on Debian\n\nThis provides a collection of fixes required to converge properly:\n\n- fog-openstack-1.x already appends ""auth/tokens"" so we no longer need\n  to do that\n- Remove references to deprecated\n  node[\'openstack\'][\'api\'][\'auth\'][\'version\'] attribute\n- Remove creation of admin deprecated endpoints\n- Add python-heat to common packages on Debian system so that the\n  heat-manage binary is available\n\nChange-Id: Idfd9aed09ccd5c3871cac71dbe0b51c921f1ec0e\nSigned-off-by: Lance Albertson <lance@osuosl.org>\n'}, {'number': 3, 'created': '2019-08-05 21:38:19.000000000', 'files': ['spec/common_spec.rb', 'attributes/default.rb', 'spec/identity_registration_spec.rb', 'recipes/common.rb', 'recipes/identity_registration.rb'], 'web_link': 'https://opendev.org/openstack/cookbook-openstack-orchestration/commit/cd52c71b6cdb4616c25c12b2bc64a9db84df9dda', 'message': 'Fixes for fog-openstack, admin endpoint and common pkgs on Debian\n\nThis provides a collection of fixes required to converge properly:\n\n- fog-openstack-1.x already appends ""auth/tokens"" so we no longer need\n  to do that\n- Remove references to deprecated\n  node[\'openstack\'][\'api\'][\'auth\'][\'version\'] attribute\n- Remove creation of admin deprecated endpoints\n- Add python-heat to common packages on Debian system so that the\n  heat-manage binary is available\n- Remove and refactor use of deprecated identity_uri_transform function\n\nChange-Id: Idfd9aed09ccd5c3871cac71dbe0b51c921f1ec0e\nSigned-off-by: Lance Albertson <lance@osuosl.org>\n'}]",6,669556,cd52c71b6cdb4616c25c12b2bc64a9db84df9dda,14,3,3,21961,,,0,"Fixes for fog-openstack, admin endpoint and common pkgs on Debian

This provides a collection of fixes required to converge properly:

- fog-openstack-1.x already appends ""auth/tokens"" so we no longer need
  to do that
- Remove references to deprecated
  node['openstack']['api']['auth']['version'] attribute
- Remove creation of admin deprecated endpoints
- Add python-heat to common packages on Debian system so that the
  heat-manage binary is available
- Remove and refactor use of deprecated identity_uri_transform function

Change-Id: Idfd9aed09ccd5c3871cac71dbe0b51c921f1ec0e
Signed-off-by: Lance Albertson <lance@osuosl.org>
",git fetch https://review.opendev.org/openstack/cookbook-openstack-orchestration refs/changes/56/669556/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/common_spec.rb', 'attributes/default.rb', 'spec/identity_registration_spec.rb', 'recipes/identity_registration.rb']",4,9e9c2444572653a54cb2e08b82928a2557f66a79,fog-fixes-and-remove-admin-endpoint,"auth_url = ::URI.decode identity_endpoint.to_s openstack_auth_url: auth_url,","auth_url = auth_uri_transform identity_endpoint.to_s, node['openstack']['api']['auth']['version'] admin_heat_endpoint = admin_endpoint 'orchestration-api'admin_heat_cfn_endpoint = admin_endpoint 'orchestration-api-cfn' openstack_auth_url: ""#{auth_url}/auth/tokens"",# Register Orchestration Admin-Endpoint openstack_endpoint service_type do service_name service_name interface 'admin' url admin_heat_endpoint.to_s region region connection_params connection_params end # Register Heat API CloudFormation Admin-Endpoint openstack_endpoint 'cloudformation' do service_name 'heat-cfn' interface 'admin' url admin_heat_cfn_endpoint.to_s region region connection_params connection_params end",12,31
openstack%2Fpuppet-tripleo~stable%2Frocky~I3fa07e28c4e37197890664d12a265f1673c780f2,openstack/puppet-tripleo,stable/rocky,I3fa07e28c4e37197890664d12a265f1673c780f2,Close OVN VIP race by adding an ordering constraint,MERGED,2019-07-10 07:20:16.000000000,2019-08-12 10:06:20.000000000,2019-07-15 17:33:44.000000000,"[{'_account_id': 3153}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23804}]","[{'number': 1, 'created': '2019-07-10 07:20:16.000000000', 'files': ['manifests/profile/pacemaker/ovn_dbs_bundle.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/bcea8ea1aac2a4b892007ced0b28d34b7651fecc', 'message': ""Close OVN VIP race by adding an ordering constraint\n\nCurrently there is a race with the high-availability of ovn when resetting a\ncontroller. Namely, the VIP that OVN uses (namely the internal_api VIP\nby default) only has a colocation constraint with the master role of the\novn-dbs resource. This leaves the following race open:\n1) We reboot ctrl-0 hosting the master role of ovn-dbs\n2) OVN becomes master on ctrl-1 from pacemaker's POV (but the\n   promotion operation running in the background is not completed)\n3) OVN VIP moves to ctrl-1 even though it is still in slave mode\n  (there is only a colocation constraint between vip and master role for\novn)\n4) OVN controllers on the overcloud connect to the VIP but it is in\n  read-only mode because it was a slave\n5) OVN controllers that connected at 4) stay in read-only forever\n   until they get restarted manually.\n\nWith the addition of this constraint we force the VIP move only after\nthe master role has been promoted. This makes it much more unlikely\nfor a client to connect to the VIP and get a read-only db in the\nbackground. With only this patch applied I did not manage to reproduce\nthe issue (even after 7 reboots of controllers).\nNote that there is still a small race window possible because the\ncurrent OVN resource agent has a bug: it promotes a resource to master\nafter issuing the promotion command to the DB but without waiting for\nthis promotion to complete. A patch for OVN-ra will also be submitted\nbut from initial testing this change seems to be largely sufficient.\n\nAlso note that this change introduces a small less desirable\nside-effect:\nA failover of the internal VIP will now take a bit longer because it\nwill happen only after ovn-dbs gets promoted to master.\nWe plan to take care of this fully by decoupling the OVN VIP from the\ninternal_api one. This change addresses the immediate issue related\nto ovn_controllers being stuck in read-only due to premature promotion.\n(OVN upstream is discussing how to make connections to read-only VIP\ntrigger a reconnection eventually)\n\nCloses-Bug: #1835830\n\nChange-Id: I3fa07e28c4e37197890664d12a265f1673c780f2\n(cherry picked from commit 5c10f331977152d4e69e91ed67cd14304cef6a18)\n(cherry picked from commit dc4bb7e7cb652e41f55b5b7ba8b93628afab10cf)\n""}]",0,669996,bcea8ea1aac2a4b892007ced0b28d34b7651fecc,12,5,1,20172,,,0,"Close OVN VIP race by adding an ordering constraint

Currently there is a race with the high-availability of ovn when resetting a
controller. Namely, the VIP that OVN uses (namely the internal_api VIP
by default) only has a colocation constraint with the master role of the
ovn-dbs resource. This leaves the following race open:
1) We reboot ctrl-0 hosting the master role of ovn-dbs
2) OVN becomes master on ctrl-1 from pacemaker's POV (but the
   promotion operation running in the background is not completed)
3) OVN VIP moves to ctrl-1 even though it is still in slave mode
  (there is only a colocation constraint between vip and master role for
ovn)
4) OVN controllers on the overcloud connect to the VIP but it is in
  read-only mode because it was a slave
5) OVN controllers that connected at 4) stay in read-only forever
   until they get restarted manually.

With the addition of this constraint we force the VIP move only after
the master role has been promoted. This makes it much more unlikely
for a client to connect to the VIP and get a read-only db in the
background. With only this patch applied I did not manage to reproduce
the issue (even after 7 reboots of controllers).
Note that there is still a small race window possible because the
current OVN resource agent has a bug: it promotes a resource to master
after issuing the promotion command to the DB but without waiting for
this promotion to complete. A patch for OVN-ra will also be submitted
but from initial testing this change seems to be largely sufficient.

Also note that this change introduces a small less desirable
side-effect:
A failover of the internal VIP will now take a bit longer because it
will happen only after ovn-dbs gets promoted to master.
We plan to take care of this fully by decoupling the OVN VIP from the
internal_api one. This change addresses the immediate issue related
to ovn_controllers being stuck in read-only due to premature promotion.
(OVN upstream is discussing how to make connections to read-only VIP
trigger a reconnection eventually)

Closes-Bug: #1835830

Change-Id: I3fa07e28c4e37197890664d12a265f1673c780f2
(cherry picked from commit 5c10f331977152d4e69e91ed67cd14304cef6a18)
(cherry picked from commit dc4bb7e7cb652e41f55b5b7ba8b93628afab10cf)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/96/669996/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/profile/pacemaker/ovn_dbs_bundle.pp'],1,bcea8ea1aac2a4b892007ced0b28d34b7651fecc,ovn-fixes-stable/stein-stable/rocky," pacemaker::constraint::order { ""${ovndb_vip_resource_name}-with-${ovndb_servers_resource_name}"": first_resource => 'ovn-dbs-bundle', second_resource => ""${ovndb_vip_resource_name}"", first_action => 'promote', second_action => 'start', constraint_params => 'kind=Optional', tries => $pcs_tries, } -> Pacemaker::Constraint::Order[""${ovndb_vip_resource_name}-with-${ovndb_servers_resource_name}""] -> Pacemaker::Constraint::Colocation[""${ovndb_vip_resource_name}-with-${ovndb_servers_resource_name}""]"," -> Pacemaker::Constraint::Colocation[""${ovndb_vip_resource_name}-with-${ovndb_servers_resource_name}""]",11,1
openstack%2Ftripleo-common~master~Ie01c20a00287e0a58277db664dd0a278d317d814,openstack/tripleo-common,master,Ie01c20a00287e0a58277db664dd0a278d317d814,[RHEL8]Remove collectd-sensubility from collectd container,MERGED,2019-08-08 09:50:07.000000000,2019-08-12 10:04:49.000000000,2019-08-09 17:10:29.000000000,"[{'_account_id': 3153}, {'_account_id': 4264}, {'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 16312}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 09:50:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/de1acff67656e9332852a5ce0e9c238bf9c5367c', 'message': '[RHEL8]Remove collectd-sensubility from collectd container\n\nhttps://review.opendev.org/#/c/672547 adds collectd-sensubility\nto the collectd image but it is not available in RHEL-8\nleading to blocking the promotion pipeline.\n\nIn order to fix it, we are removing it from collectd\ncontainer till it is available.\n\nRelated-Bug: #1839423\n\nChange-Id: Ie01c20a00287e0a58277db664dd0a278d317d814\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 2, 'created': '2019-08-09 04:44:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/cb7fc586876a47bd64b649e30168981262d05db9', 'message': '[RHEL8]Remove collectd-sensubility from collectd container\n\nhttps://review.opendev.org/#/c/672547 adds collectd-sensubility\nto the collectd image but it is not available in RHEL-8\nleading to blocking the promotion pipeline.\n\nIn order to fix it, we are removing it from collectd\ncontainer till it is available.\n\nRelated-Bug: #1839423\n\nChange-Id: Ie01c20a00287e0a58277db664dd0a278d317d814\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 3, 'created': '2019-08-09 07:26:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/cef88f12b94fcfc1e346beb7dd6e679dbe7028fe', 'message': '[RHEL8]Remove collectd-sensubility from collectd container\n\nhttps://review.opendev.org/#/c/672547 adds collectd-sensubility\nto the collectd image but it is not available in RHEL-8\nleading to blocking the promotion pipeline.\n\nIn order to fix it, we are removing it from collectd\ncontainer till it is available.\n\nRelated-Bug: #1839423\n\nChange-Id: Ie01c20a00287e0a58277db664dd0a278d317d814\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 4, 'created': '2019-08-09 07:27:00.000000000', 'files': ['container-images/tripleo_kolla_template_overrides.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/84d1fcdfffe8dba4186a9d77f0b9f358e7a81d50', 'message': '[RHEL8]Remove collectd-sensubility from collectd container\n\nhttps://review.opendev.org/#/c/672547 adds collectd-sensubility\nto the collectd image but it is not available in RHEL-8\nleading to blocking the promotion pipeline.\n\nIn order to fix it, we are removing it from collectd\ncontainer till it is available.\n\nRelated-Bug: #1839423\n\nChange-Id: Ie01c20a00287e0a58277db664dd0a278d317d814\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}]",3,675282,84d1fcdfffe8dba4186a9d77f0b9f358e7a81d50,21,9,4,12393,,,0,"[RHEL8]Remove collectd-sensubility from collectd container

https://review.opendev.org/#/c/672547 adds collectd-sensubility
to the collectd image but it is not available in RHEL-8
leading to blocking the promotion pipeline.

In order to fix it, we are removing it from collectd
container till it is available.

Related-Bug: #1839423

Change-Id: Ie01c20a00287e0a58277db664dd0a278d317d814
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/82/675282/4 && git format-patch -1 --stdout FETCH_HEAD,['container-images/tripleo_kolla_template_overrides.j2'],1,de1acff67656e9332852a5ce0e9c238bf9c5367c,rhel8,"{% if ansible_distribution == ""RedHat"" %} # Remoce collectd-sensubility from RHEL-8 as it is not available. {% set collectd_packages_remove = [ 'collectd-sensubility' ] %} {% endif %}",,6,0
openstack%2Ftripleo-ci~master~I92d8cd7411fca9a4a0b9da0ef5b8e9997cb07aaa,openstack/tripleo-ci,master,I92d8cd7411fca9a4a0b9da0ef5b8e9997cb07aaa,[RHEL8] exclude collectd from build-containers role,MERGED,2019-08-11 09:50:20.000000000,2019-08-12 10:04:36.000000000,2019-08-12 08:52:18.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-11 09:50:20.000000000', 'files': ['roles/build-containers/vars/common.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d3905dc64e46b9bdc1af33edd1f760350c68aa56', 'message': '[RHEL8] exclude collectd from build-containers role\n\nCurrently collectd containers requires collectd-sensubility, is\ncurrently not available in RHEL8 and collectd containers are not\nused in standalone and fs01 jobs, so it is better to remove that\nin order to unblock RHEL-8 work.\n\nRelated-Bug: #1839423\n\nChange-Id: I92d8cd7411fca9a4a0b9da0ef5b8e9997cb07aaa\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}]",0,675768,d3905dc64e46b9bdc1af33edd1f760350c68aa56,21,7,1,12393,,,0,"[RHEL8] exclude collectd from build-containers role

Currently collectd containers requires collectd-sensubility, is
currently not available in RHEL8 and collectd containers are not
used in standalone and fs01 jobs, so it is better to remove that
in order to unblock RHEL-8 work.

Related-Bug: #1839423

Change-Id: I92d8cd7411fca9a4a0b9da0ef5b8e9997cb07aaa
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/68/675768/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/build-containers/vars/common.yaml'],1,d3905dc64e46b9bdc1af33edd1f760350c68aa56,collectd, - collectd,,1,0
openstack%2Ftripleo-common~master~I816cbedc57e390d1c37a58687e3962b54aef11b3,openstack/tripleo-common,master,I816cbedc57e390d1c37a58687e3962b54aef11b3,Use base_distro_tag for collectd package removal,ABANDONED,2019-08-12 05:15:11.000000000,2019-08-12 10:03:33.000000000,,"[{'_account_id': 8449}, {'_account_id': 10969}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-12 05:15:11.000000000', 'files': ['container-images/tripleo_kolla_template_overrides.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/c4c4bdae551b6f06b6530180d7ddc6c15af69872', 'message': 'Use base_distro_tag for collectd package removal\n\nansible_distribution is not working in tripleo kolla\ntemplate override, it needs to be base_distro_tag in order\nto remove package from collectd container.\n\nRelated-Bug: #1839423\n\nChange-Id: I816cbedc57e390d1c37a58687e3962b54aef11b3\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}]",1,675812,c4c4bdae551b6f06b6530180d7ddc6c15af69872,6,5,1,12393,,,0,"Use base_distro_tag for collectd package removal

ansible_distribution is not working in tripleo kolla
template override, it needs to be base_distro_tag in order
to remove package from collectd container.

Related-Bug: #1839423

Change-Id: I816cbedc57e390d1c37a58687e3962b54aef11b3
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/12/675812/1 && git format-patch -1 --stdout FETCH_HEAD,['container-images/tripleo_kolla_template_overrides.j2'],1,c4c4bdae551b6f06b6530180d7ddc6c15af69872,collectd,{% if base_distro_tag.startswith('8') %},"{% if ansible_distribution == ""RedHat"" %}",1,1
openstack%2Ftripleo-validations~stable%2Fstein~Ia4976b1cb79911d2fdb07eb6536c9a898c35be23,openstack/tripleo-validations,stable/stein,Ia4976b1cb79911d2fdb07eb6536c9a898c35be23,Simplifying the check of the latest package version validation,MERGED,2019-08-09 11:02:23.000000000,2019-08-12 10:03:31.000000000,2019-08-12 10:03:31.000000000,"[{'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 17888}, {'_account_id': 22348}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-09 11:02:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/72218b68d44fa934ddd79eaf5473a6de816d99a9', 'message': ""Simplifying the check of the latest package version validation\n\nThis patch makes this validation simpler by checking if a package update\nis available.\n\nThis patch also renames the role's name:\n- Old: check-latest-minor-version\n- New: check-latest-packages-version\n\nThe molecule tests are also included in this commit.\n\nChange-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n(cherry picked from commit 4faf07f89746853d9f8b625de0d1a9cb97c10e5d)\n""}, {'number': 2, 'created': '2019-08-09 12:46:30.000000000', 'files': ['roles/check-latest-packages-version/molecule/default/Dockerfile.j2', 'roles/check-latest-packages-version/molecule/default/playbook.yml', 'playbooks/check-latest-minor-version.yaml', 'roles/check-latest-minor-version/tasks/main.yml', 'roles/check-latest-packages-version/defaults/main.yml', 'tripleo_validations/tests/library/test_check_package_update.py', 'roles/check-latest-packages-version/molecule/default/molecule.yml', 'roles/check-latest-packages-version/tasks/main.yml', 'library/check_package_update.py', 'roles/check-latest-packages-version/vars/main.yml', 'playbooks/check-latest-packages-version.yaml', 'roles/check-latest-minor-version/vars/main.yml', 'roles/check-latest-packages-version/molecule/default/prepare.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/80a9f7b99bcdff3aab792c571683800f0dd7c8ad', 'message': ""Simplifying the check of the latest package version validation\n\nThis patch makes this validation simpler by checking if a package update\nis available.\n\nThis patch also renames the role's name:\n- Old: check-latest-minor-version\n- New: check-latest-packages-version\n\nThe molecule tests are also included in this commit.\n\nChange-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n(cherry picked from commit 4faf07f89746853d9f8b625de0d1a9cb97c10e5d)\n""}]",0,675584,80a9f7b99bcdff3aab792c571683800f0dd7c8ad,8,5,2,11491,,,0,"Simplifying the check of the latest package version validation

This patch makes this validation simpler by checking if a package update
is available.

This patch also renames the role's name:
- Old: check-latest-minor-version
- New: check-latest-packages-version

The molecule tests are also included in this commit.

Change-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23
Signed-off-by: Gael Chamoulaud <gchamoul@redhat.com>
(cherry picked from commit 4faf07f89746853d9f8b625de0d1a9cb97c10e5d)
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/84/675584/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/check-latest-packages-version/molecule/default/Dockerfile.j2', 'roles/check-latest-packages-version/molecule/default/playbook.yml', 'playbooks/check-latest-minor-version.yaml', 'roles/check-latest-minor-version/tasks/main.yml', 'roles/check-latest-packages-version/defaults/main.yml', 'tripleo_validations/tests/library/test_check_package_update.py', 'roles/check-latest-packages-version/molecule/default/molecule.yml', 'roles/check-latest-packages-version/tasks/main.yml', 'library/check_package_update.py', 'roles/check-latest-packages-version/vars/main.yml', 'playbooks/check-latest-packages-version.yaml', 'roles/check-latest-minor-version/vars/main.yml', 'roles/check-latest-packages-version/molecule/default/prepare.yml']",13,72218b68d44fa934ddd79eaf5473a6de816d99a9,linting_pre-commit_backport,"--- # Copyright 2019 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. - name: Prepare hosts: all gather_facts: no tasks: - name: install patch rpm package: name: patch ",,253,109
openstack%2Fdevstack~stable%2Frocky~I9dfee387ecd25eaaa1fd9f2e896914ee88451755,openstack/devstack,stable/rocky,I9dfee387ecd25eaaa1fd9f2e896914ee88451755,"Cap network, swift, volume api_extensions for tempest",MERGED,2019-05-30 16:43:03.000000000,2019-08-12 09:39:37.000000000,2019-08-12 09:39:37.000000000,"[{'_account_id': 5803}, {'_account_id': 7118}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 26458}]","[{'number': 1, 'created': '2019-05-30 16:43:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/b16b07b7498d18d11533ff91442bbe1defdd311d', 'message': ""Cap network, swift, volume api_extensions for tempest\n\nThis commit cap the network, volume and swift extensions on\nTempest's config option api_extensions.\n\nChange-Id: I9dfee387ecd25eaaa1fd9f2e896914ee88451755\n""}, {'number': 2, 'created': '2019-06-21 16:55:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/136ed01502215e51546da6b6d76bcbbe4e4de90f', 'message': ""Cap network, swift, volume api_extensions for tempest\n\nThis commit cap the network, volume and swift extensions on\nTempest's config option api_extensions.\n\nChange-Id: I9dfee387ecd25eaaa1fd9f2e896914ee88451755\n""}, {'number': 3, 'created': '2019-07-10 03:26:43.000000000', 'files': ['lib/tempest'], 'web_link': 'https://opendev.org/openstack/devstack/commit/d4e22d2ab1f826ab0bf8fbb97f1aa6239ece3fa8', 'message': ""Cap network, swift, volume api_extensions for tempest\n\nThis commit cap the network, volume and swift extensions on\nTempest's config option api_extensions.\n\nDepends-On: https://review.opendev.org/#/c/667020/\n\nChange-Id: I9dfee387ecd25eaaa1fd9f2e896914ee88451755\n""}]",0,662258,d4e22d2ab1f826ab0bf8fbb97f1aa6239ece3fa8,17,5,3,8556,,,0,"Cap network, swift, volume api_extensions for tempest

This commit cap the network, volume and swift extensions on
Tempest's config option api_extensions.

Depends-On: https://review.opendev.org/#/c/667020/

Change-Id: I9dfee387ecd25eaaa1fd9f2e896914ee88451755
",git fetch https://review.opendev.org/openstack/devstack refs/changes/58/662258/3 && git format-patch -1 --stdout FETCH_HEAD,['lib/tempest'],1,b16b07b7498d18d11533ff91442bbe1defdd311d,cap-extensions," DEFAULT_NET_EXT=""address-scope,agent,allowed-address-pairs,auto-allocated-topology"" DEFAULT_NET_EXT+="",availability_zone,binding,default-subnetpools,dhcp_agent_scheduler"" DEFAULT_NET_EXT+="",dvr,ext-gw-mode,external-net,extra_dhcp_opt,extraroute,flavors"" DEFAULT_NET_EXT+="",l3-flavors,l3-ha,l3_agent_scheduler,multi-provider,net-mtu"" DEFAULT_NET_EXT+="",network-ip-availability,network_availability_zone,pagination"" DEFAULT_NET_EXT+="",port-security,project-id,provider,quotas,quota_details,rbac-policies"" DEFAULT_NET_EXT+="",revision-if-match,router,router_availability_zone,security-group,service-type,sorting"" DEFAULT_NET_EXT+="",standard-attr-description,standard-attr-revisions,standard-attr-tag,standard-attr-timestamp"" DEFAULT_NET_EXT+="",subnet-service-types,subnet_allocation,net-mtu-writable,ip-substring-filtering"" DEFAULT_NET_EXT+="",availability_zone_filter,filter-validation,empty-string-filtering ,port-mac-address-regenerate"" DEFAULT_NET_EXT+="",port-security-groups-filtering,fip-port-details,binding-extended"" local network_api_extensions=${NETWORK_API_EXTENSIONS:-$DEFAULT_NET_EXT} DEFAULT_SWIFT_OPT=""account_quotas,bulk_delete,bulk_upload,container_quotas"" DEFAULT_SWIFT_OPT+="",container_sync,crossdomain,formpost,ratelimit,slo"" DEFAULT_SWIFT_OPT+="",staticweb,tempauth,tempurl,versioned_writes"" local object_storage_api_extensions=${OBJECT_STORAGE_API_EXTENSIONS:-$DEFAULT_SWIFT_OPT} DEFAULT_VOL_EXT=""OS-SCH-HNT,backups,capabilities,cgsnapshots,consistencygroups"" DEFAULT_VOL_EXT+="",encryption,os-admin-actions,os-availability-zone"" DEFAULT_VOL_EXT+="",os-extended-services,os-extended-snapshot-attributes"" DEFAULT_VOL_EXT+="",os-hosts,os-image-create,os-quota-class-sets,os-quota-sets"" DEFAULT_VOL_EXT+="",os-services,os-snapshot-actions,os-snapshot-manage"" DEFAULT_VOL_EXT+="",os-snapshot-unmanage,os-types-extra-specs,os-types-manage"" DEFAULT_VOL_EXT+="",os-used-limits,os-vol-host-attr,os-vol-image-meta"" DEFAULT_VOL_EXT+="",os-vol-mig-status-attr,os-vol-tenant-attr,os-volume-actions"" DEFAULT_VOL_EXT+="",os-volume-encryption-metadata,os-volume-manage"" DEFAULT_VOL_EXT+="",os-volume-transfer,os-volume-type-access"" DEFAULT_VOL_EXT+="",os-volume-unmanage,qos-specs,scheduler-stats"" local volume_api_extensions=${VOLUME_API_EXTENSIONS:-$DEFAULT_VOL_EXT}"," local network_api_extensions=${NETWORK_API_EXTENSIONS:-""all""} local object_storage_api_extensions=${OBJECT_STORAGE_API_EXTENSIONS:-""all""} local volume_api_extensions=${VOLUME_API_EXTENSIONS:-""all""}",29,3
openstack%2Ftripleo-validations~master~I5c08dc36c811c76d4b4c5ee6a0872ad031c243f8,openstack/tripleo-validations,master,I5c08dc36c811c76d4b4c5ee6a0872ad031c243f8,Remove useless meta directory for the Ansible ntp role,MERGED,2019-07-05 16:51:25.000000000,2019-08-12 09:32:51.000000000,2019-08-12 09:32:51.000000000,"[{'_account_id': 3153}, {'_account_id': 10969}, {'_account_id': 11082}, {'_account_id': 11491}, {'_account_id': 14985}, {'_account_id': 17130}, {'_account_id': 17888}, {'_account_id': 22348}, {'_account_id': 25402}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-07-05 16:51:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/954351d556e4328ea8b4cb444c6c84e1a6cc24aa', 'message': 'Remove useless meta directory for the Ansible ntp role\n\nChange-Id: I5c08dc36c811c76d4b4c5ee6a0872ad031c243f8\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 2, 'created': '2019-07-31 13:23:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/8f71af668e5df4d78b1f03416de1790ce80fd60c', 'message': 'Remove useless meta directory for the Ansible ntp role\n\nChange-Id: I5c08dc36c811c76d4b4c5ee6a0872ad031c243f8\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 3, 'created': '2019-08-09 11:01:06.000000000', 'files': ['roles/ntp/meta/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/e3eb813fee773eccee7e5155a22c141df8b93c0f', 'message': 'Remove useless meta directory for the Ansible ntp role\n\nChange-Id: I5c08dc36c811c76d4b4c5ee6a0872ad031c243f8\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}]",0,669397,e3eb813fee773eccee7e5155a22c141df8b93c0f,21,10,3,11491,,,0,"Remove useless meta directory for the Ansible ntp role

Change-Id: I5c08dc36c811c76d4b4c5ee6a0872ad031c243f8
Signed-off-by: Gael Chamoulaud <gchamoul@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/97/669397/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/ntp/meta/main.yml'],1,954351d556e4328ea8b4cb444c6c84e1a6cc24aa,bp/validations-framework,,"galaxy_info: author: TripleO Validations Team company: Red Hat license: Apache min_ansible_version: 2.4 platforms: - name: CentOS versions: - 7 - name: RHEL versions: - 7 categories: - cloud - baremetal - system galaxy_tags: [] # List tags for your role here, one per line. A tag is a keyword that describes # and categorizes the role. Users find roles by searching for tags. Be sure to # remove the '[]' above, if you add tags to this list. # # NOTE: A tag is limited to a single word comprised of alphanumeric characters. # Maximum 20 tags per role. dependencies: [] ",0,28
openstack%2Frpm-packaging~master~I8308652f81d2453aa0f3e95f498598f40510b889,openstack/rpm-packaging,master,I8308652f81d2453aa0f3e95f498598f40510b889,Fix provides/requires for ironic-lib,MERGED,2019-08-12 08:56:31.000000000,2019-08-12 09:32:12.000000000,2019-08-12 09:32:12.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-12 08:56:31.000000000', 'files': ['openstack/ironic-lib/ironic-lib.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/1d3a778f27471832f2e3aa7a01e6e69c8bc2d7d9', 'message': 'Fix provides/requires for ironic-lib\n\nChange-Id: I8308652f81d2453aa0f3e95f498598f40510b889\n'}]",3,675848,1d3a778f27471832f2e3aa7a01e6e69c8bc2d7d9,11,5,1,6593,,,0,"Fix provides/requires for ironic-lib

Change-Id: I8308652f81d2453aa0f3e95f498598f40510b889
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/48/675848/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/ironic-lib/ironic-lib.spec.j2'],1,1d3a778f27471832f2e3aa7a01e6e69c8bc2d7d9,,%global oldpython pythonRequires: %{oldpython}-ironic-lib-common = %{version}-%{release},Requires: python-ironic-lib-common = %{version}-%{release},2,1
openstack%2Frpm-packaging~master~Iea2340b43757dc861e7fba9ee47106471ff0b92a,openstack/rpm-packaging,master,Iea2340b43757dc861e7fba9ee47106471ff0b92a,ironic-lib: Add missing provides to -common package,ABANDONED,2019-08-12 08:37:47.000000000,2019-08-12 09:07:12.000000000,,"[{'_account_id': 6593}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-12 08:37:47.000000000', 'files': ['openstack/ironic-lib/ironic-lib.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/0d7cbeb1f495600a2cb0dd90a1627cfbbbbe87bc', 'message': 'ironic-lib: Add missing provides to -common package\n\nOtherwise, the python packages can not be installed due to:\n\nnothing provides python2-ironic-lib-common = 2.19.0-lp151.1.1 needed \\\n    by python2-ironic-lib\n\nChange-Id: Iea2340b43757dc861e7fba9ee47106471ff0b92a\n'}]",1,675845,0d7cbeb1f495600a2cb0dd90a1627cfbbbbe87bc,5,3,1,7102,,,0,"ironic-lib: Add missing provides to -common package

Otherwise, the python packages can not be installed due to:

nothing provides python2-ironic-lib-common = 2.19.0-lp151.1.1 needed \
    by python2-ironic-lib

Change-Id: Iea2340b43757dc861e7fba9ee47106471ff0b92a
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/45/675845/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/ironic-lib/ironic-lib.spec.j2'],1,0d7cbeb1f495600a2cb0dd90a1627cfbbbbe87bc,,Provides: %{python_module ironic-lib-common = %{version}-%{release}},,1,0
openstack%2Frpm-packaging~master~I7327984bf5d4c0394ededb881f58a7fb2656cc59,openstack/rpm-packaging,master,I7327984bf5d4c0394ededb881f58a7fb2656cc59,oslo.policy: update to 2.3.0 (required now by keystone),MERGED,2019-08-12 08:09:50.000000000,2019-08-12 08:40:46.000000000,2019-08-12 08:40:45.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-12 08:09:50.000000000', 'files': ['openstack/oslo.policy/oslo.policy.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/91cae40b1ebc4390f9e045e26ce15bfd698f62a5', 'message': 'oslo.policy: update to 2.3.0 (required now by keystone)\n\nChange-Id: I7327984bf5d4c0394ededb881f58a7fb2656cc59\n'}]",0,675837,91cae40b1ebc4390f9e045e26ce15bfd698f62a5,8,4,1,6593,,,0,"oslo.policy: update to 2.3.0 (required now by keystone)

Change-Id: I7327984bf5d4c0394ededb881f58a7fb2656cc59
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/37/675837/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/oslo.policy/oslo.policy.spec.j2'],1,91cae40b1ebc4390f9e045e26ce15bfd698f62a5,,{% set upstream_version = upstream_version('2.3.0') %},{% set upstream_version = upstream_version('2.2.0') %},1,1
openstack%2Frpm-packaging~master~Ib6ab9b79aa62136082e82fe6f7728602f4194854,openstack/rpm-packaging,master,Ib6ab9b79aa62136082e82fe6f7728602f4194854,os-traits: Update to 0.16.0 (required now by Nova),MERGED,2019-08-12 08:09:13.000000000,2019-08-12 08:37:04.000000000,2019-08-12 08:37:04.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-12 08:09:13.000000000', 'files': ['openstack/os-traits/os-traits.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/a18d5684b11710c0d46fc5d5520bd209ce9fd711', 'message': 'os-traits: Update to 0.16.0 (required now by Nova)\n\nChange-Id: Ib6ab9b79aa62136082e82fe6f7728602f4194854\n'}]",0,675836,a18d5684b11710c0d46fc5d5520bd209ce9fd711,8,4,1,6593,,,0,"os-traits: Update to 0.16.0 (required now by Nova)

Change-Id: Ib6ab9b79aa62136082e82fe6f7728602f4194854
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/36/675836/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/os-traits/os-traits.spec.j2'],1,a18d5684b11710c0d46fc5d5520bd209ce9fd711,,{% set upstream_version = upstream_version('0.16.0') %},{% set upstream_version = upstream_version('0.15.0') %},1,1
openstack%2Fpuppet-tripleo~stable%2Frocky~I0a7f8382756d063183f29895b539afe9452df858,openstack/puppet-tripleo,stable/rocky,I0a7f8382756d063183f29895b539afe9452df858,Ensure that the file /etc/my.cnf.d/tripleo.cnf exists,ABANDONED,2019-08-05 16:31:51.000000000,2019-08-12 08:17:33.000000000,,"[{'_account_id': 3153}, {'_account_id': 9914}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-05 16:31:51.000000000', 'files': ['manifests/profile/base/database/mysql/client.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/39c233d6a15df8757433a158ac5e03cf84c6f989', 'message': 'Ensure that the file /etc/my.cnf.d/tripleo.cnf exists\n\nThis is needed to backport a change to paunch, that will not start\ndocker, unless all volume paths exist.\n\nChange-Id: I0a7f8382756d063183f29895b539afe9452df858\nNeeded-By: https://review.opendev.org/#/c/673561/\n'}]",0,674648,39c233d6a15df8757433a158ac5e03cf84c6f989,15,5,1,14250,,,0,"Ensure that the file /etc/my.cnf.d/tripleo.cnf exists

This is needed to backport a change to paunch, that will not start
docker, unless all volume paths exist.

Change-Id: I0a7f8382756d063183f29895b539afe9452df858
Needed-By: https://review.opendev.org/#/c/673561/
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/48/674648/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/profile/base/database/mysql/client.pp'],1,39c233d6a15df8757433a158ac5e03cf84c6f989,bug/1830734," file {'/etc/my.cnf.d/tripleo.cnf': ensure => 'present' } command => 'mkdir -p /etc/my.cnf.d && touch /etc/my.cnf.d/tripleo.cnf',"," command => 'mkdir -p /etc/my.cnf.d',",4,1
openstack%2Fmetalsmith~master~Ic5789c0c3808afaa6b45408bce51d6c4ca86dbe5,openstack/metalsmith,master,Ic5789c0c3808afaa6b45408bce51d6c4ca86dbe5,Set useful port name when hostname is provided,MERGED,2019-08-08 23:00:06.000000000,2019-08-12 08:17:03.000000000,2019-08-12 08:17:03.000000000,"[{'_account_id': 4571}, {'_account_id': 10239}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 23:00:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/metalsmith/commit/8761efb090b8a6bd086a5c4116378244592eb0bd', 'message': 'Set useful port name when hostname is provided\n\nIt is useful to see the purpose of a port when viewing a port list or\nport details. This change will set the port name to\n<hostname>-<net-name> when the hostname is provided to the NICs\nconstructor.\n\nChange-Id: Ic5789c0c3808afaa6b45408bce51d6c4ca86dbe5\n'}, {'number': 2, 'created': '2019-08-12 01:00:31.000000000', 'files': ['metalsmith/_nics.py', 'metalsmith/test/test_provisioner.py', 'metalsmith/_provisioner.py'], 'web_link': 'https://opendev.org/openstack/metalsmith/commit/a77cfb2ce66f965809bb4dd43eb0b03b5787ff6e', 'message': 'Set useful port name when hostname is provided\n\nIt is useful to see the purpose of a port when viewing a port list or\nport details. This change will set the port name to\n<hostname>-<net-name> when the hostname is provided to the NICs\nconstructor.\n\nChange-Id: Ic5789c0c3808afaa6b45408bce51d6c4ca86dbe5\n'}]",2,675495,a77cfb2ce66f965809bb4dd43eb0b03b5787ff6e,12,3,2,4571,,,0,"Set useful port name when hostname is provided

It is useful to see the purpose of a port when viewing a port list or
port details. This change will set the port name to
<hostname>-<net-name> when the hostname is provided to the NICs
constructor.

Change-Id: Ic5789c0c3808afaa6b45408bce51d6c4ca86dbe5
",git fetch https://review.opendev.org/openstack/metalsmith refs/changes/95/675495/2 && git format-patch -1 --stdout FETCH_HEAD,"['metalsmith/_nics.py', 'metalsmith/test/test_provisioner.py', 'metalsmith/_provisioner.py']",3,8761efb090b8a6bd086a5c4116378244592eb0bd,nova-less-deploy," nics = _nics.NICs(self.connection, node, nics, hostname=hostname)"," nics = _nics.NICs(self.connection, node, nics)",19,7
openstack%2Fneutron~master~I9b07255988f7ba6609af1961b3429c3ce12d5186,openstack/neutron,master,I9b07255988f7ba6609af1961b3429c3ce12d5186,Fix sort issue in test_dhcp_agent_scheduler.test_filter_bindings,MERGED,2019-08-09 08:30:45.000000000,2019-08-12 08:17:01.000000000,2019-08-11 20:54:32.000000000,"[{'_account_id': 11975}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 27654}]","[{'number': 1, 'created': '2019-08-09 08:30:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ecfcdfff35b5e236ba501c72eef0f3dfc808347d', 'message': 'Sort network_ids in test_dhcp_agent_scheduler.test_filter_bindings\n\nThe test acts on a list of NetworkDhcpAgentBindings (sorted by\nnetwork_id) and then checks results in the original list of network_ids.\n\nSort that original list to prevent random failures in the test\n\nChange-Id: I9b07255988f7ba6609af1961b3429c3ce12d5186\nCloses-Bug: #1839595\n'}, {'number': 2, 'created': '2019-08-09 09:46:40.000000000', 'files': ['neutron/tests/unit/scheduler/test_dhcp_agent_scheduler.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/f59b6a470620eaf53c98f4d98801789c95ed9a26', 'message': 'Fix sort issue in test_dhcp_agent_scheduler.test_filter_bindings\n\nThe test creates a list of networks, and then acts on a list of\nNetworkDhcpAgentBindings obtained from get_objects() not guaranteed to\nfollow the original build order (based on the network_ids list)\n\nMake sure that returned list is sorted on network_id, and network_ids\nitself sorted so both lists match\n\nChange-Id: I9b07255988f7ba6609af1961b3429c3ce12d5186\nCloses-Bug: #1839595\n'}]",1,675556,f59b6a470620eaf53c98f4d98801789c95ed9a26,18,8,2,21798,,,0,"Fix sort issue in test_dhcp_agent_scheduler.test_filter_bindings

The test creates a list of networks, and then acts on a list of
NetworkDhcpAgentBindings obtained from get_objects() not guaranteed to
follow the original build order (based on the network_ids list)

Make sure that returned list is sorted on network_id, and network_ids
itself sorted so both lists match

Change-Id: I9b07255988f7ba6609af1961b3429c3ce12d5186
Closes-Bug: #1839595
",git fetch https://review.opendev.org/openstack/neutron refs/changes/56/675556/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/unit/scheduler/test_dhcp_agent_scheduler.py'],1,ecfcdfff35b5e236ba501c72eef0f3dfc808347d,bug/1839595, network_ids = sorted(self._create_test_networks(num_net=4)), network_ids = self._create_test_networks(num_net=4),1,1
openstack%2Fpuppet-tripleo~stable%2Fqueens~I0a7f8382756d063183f29895b539afe9452df858,openstack/puppet-tripleo,stable/queens,I0a7f8382756d063183f29895b539afe9452df858,Ensure that the file /etc/my.cnf.d/tripleo.cnf exists,ABANDONED,2019-08-08 14:33:16.000000000,2019-08-12 08:16:20.000000000,,"[{'_account_id': 9914}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 14:33:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/ef1f84696ad09effd2c5df672d25ef165a6ed780', 'message': 'Ensure that the file /etc/my.cnf.d/tripleo.cnf exists\n\nThis is needed to backport a change to paunch, that will not start\ndocker, unless all volume paths exist.\n\nChange-Id: I0a7f8382756d063183f29895b539afe9452df858\nNeeded-By: https://review.opendev.org/#/c/673561/\n'}, {'number': 2, 'created': '2019-08-08 14:35:50.000000000', 'files': ['manifests/profile/base/database/mysql/client.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/acfadb52d4b6a88c5b662aa63ea62bf81e4a401c', 'message': 'Ensure that the file /etc/my.cnf.d/tripleo.cnf exists\n\nThis is needed to backport a change to paunch, that will not start\ndocker, unless all volume paths exist.\n\nChange-Id: I0a7f8382756d063183f29895b539afe9452df858\nNeeded-By: https://review.opendev.org/#/c/673565/\n(cherry picked from commit 39c233d6a15df8757433a158ac5e03cf84c6f989)\n'}]",0,675354,acfadb52d4b6a88c5b662aa63ea62bf81e4a401c,10,4,2,14250,,,0,"Ensure that the file /etc/my.cnf.d/tripleo.cnf exists

This is needed to backport a change to paunch, that will not start
docker, unless all volume paths exist.

Change-Id: I0a7f8382756d063183f29895b539afe9452df858
Needed-By: https://review.opendev.org/#/c/673565/
(cherry picked from commit 39c233d6a15df8757433a158ac5e03cf84c6f989)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/54/675354/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/profile/base/database/mysql/client.pp'],1,ef1f84696ad09effd2c5df672d25ef165a6ed780,bug/1830734-stable/queens," file {'/etc/my.cnf.d/tripleo.cnf': ensure => 'present' } command => 'mkdir -p /etc/my.cnf.d && touch /etc/my.cnf.d/tripleo.cnf',"," command => 'mkdir -p /etc/my.cnf.d',",4,1
openstack%2Ftripleo-heat-templates~stable%2Fqueens~I4fd0fdd6bd3b95ccd48fe06924bb8737f4be8e53,openstack/tripleo-heat-templates,stable/queens,I4fd0fdd6bd3b95ccd48fe06924bb8737f4be8e53,Include OctaviaServerCertsKeyPassphrase in octavia-deployment-config,ABANDONED,2019-08-04 20:12:16.000000000,2019-08-12 07:53:58.000000000,,"[{'_account_id': 6579}, {'_account_id': 6681}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-04 20:12:16.000000000', 'files': ['docker/services/octavia/octavia-deployment-config.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d78912a6c4b0fda509b239f1961d74d34ba0ea70', 'message': 'Include OctaviaServerCertsKeyPassphrase in octavia-deployment-config\n\nThis line should have been a part of the stable/queens backport[1].\nIt is currently missing and fails with:\n\novercloud.ControllerServiceChain.ServiceChain:\n  resource_type: OS::Heat::ResourceChain\n  physical_resource_id:\n  status: CREATE_FAILED\n  status_reason: |\n    resources.ServiceChain: Property error: resources[113].properties: \\\nProperty OctaviaServerCertsKeyPassphrase not assigned\n\n[1] https://review.opendev.org/#/c/661968/\n\nChange-Id: I4fd0fdd6bd3b95ccd48fe06924bb8737f4be8e53\n'}]",0,674514,d78912a6c4b0fda509b239f1961d74d34ba0ea70,9,4,1,6579,,,0,"Include OctaviaServerCertsKeyPassphrase in octavia-deployment-config

This line should have been a part of the stable/queens backport[1].
It is currently missing and fails with:

overcloud.ControllerServiceChain.ServiceChain:
  resource_type: OS::Heat::ResourceChain
  physical_resource_id:
  status: CREATE_FAILED
  status_reason: |
    resources.ServiceChain: Property error: resources[113].properties: \
Property OctaviaServerCertsKeyPassphrase not assigned

[1] https://review.opendev.org/#/c/661968/

Change-Id: I4fd0fdd6bd3b95ccd48fe06924bb8737f4be8e53
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/14/674514/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/services/octavia/octavia-deployment-config.yaml'],1,d78912a6c4b0fda509b239f1961d74d34ba0ea70,, server_certs_key_passphrase: {get_param: OctaviaServerCertsKeyPassphrase},,1,0
openstack%2Fkeystone~master~I06a9d07225977469341851ea604df75976b105ca,openstack/keystone,master,I06a9d07225977469341851ea604df75976b105ca,Update api-ref for revocation list OS-PKI,MERGED,2019-08-08 11:18:07.000000000,2019-08-12 07:53:35.000000000,2019-08-12 07:53:35.000000000,"[{'_account_id': 8482}, {'_account_id': 15054}, {'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 27621}]","[{'number': 1, 'created': '2019-08-08 11:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/f40e0c736c52523c593a42e5e22a32243f2de639', 'message': 'Update api-ref for revocation list OS-PKI\n\nSince PKI tokens are removed and  OS-PKI API\nis deprecated, updating api-ref for it [1].\n\n[1] https://review.opendev.org/#/c/672334\n\nChange-Id: I06a9d07225977469341851ea604df75976b105ca\n'}, {'number': 2, 'created': '2019-08-09 04:29:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/d80c2c41487fadc017f660e1bafe0244779c3159', 'message': 'Update api-ref for revocation list OS-PKI\n\nSince PKI tokens are removed and  OS-PKI API\nis deprecated, updating api-ref for it [1].\n\n[1] https://review.opendev.org/#/c/672334\n\nChange-Id: I06a9d07225977469341851ea604df75976b105ca\n'}, {'number': 3, 'created': '2019-08-09 09:31:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/2f3960655408102e7bafea51be7af851b3ce67ad', 'message': 'Update api-ref for revocation list OS-PKI\n\nSince PKI tokens are removed and  OS-PKI API\nis deprecated, updating api-ref for it [1].\n\n[1] https://review.opendev.org/#/c/672334\n\nChange-Id: I06a9d07225977469341851ea604df75976b105ca\n'}, {'number': 4, 'created': '2019-08-10 13:32:18.000000000', 'files': ['api-ref/source/v3/os-pki.inc', 'api-ref/source/v3/index.rst', 'api-ref/source/v3/samples/admin/get-pki-revoked-response.json', 'api-ref/source/v3/status.yaml', 'api-ref/source/v3/parameters.yaml'], 'web_link': 'https://opendev.org/openstack/keystone/commit/af7800454b207acc0057a5360e5badb5036d538c', 'message': 'Update api-ref for revocation list OS-PKI\n\nSince PKI tokens are removed and  OS-PKI API\nis deprecated, updating api-ref for it [1].\n\n[1] https://review.opendev.org/#/c/672334\n\nChange-Id: I06a9d07225977469341851ea604df75976b105ca\n'}]",2,675296,af7800454b207acc0057a5360e5badb5036d538c,16,5,4,27621,,,0,"Update api-ref for revocation list OS-PKI

Since PKI tokens are removed and  OS-PKI API
is deprecated, updating api-ref for it [1].

[1] https://review.opendev.org/#/c/672334

Change-Id: I06a9d07225977469341851ea604df75976b105ca
",git fetch https://review.opendev.org/openstack/keystone refs/changes/96/675296/4 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/v3/os-pki.inc', 'api-ref/source/v3/samples/admin/get-pki-revoked-response.json', 'api-ref/source/v3/status.yaml', 'api-ref/source/v3/parameters.yaml']",4,f40e0c736c52523c593a42e5e22a32243f2de639,675296,,"signed: description: | List of expired PKI tokens, signed by the cryptographic message syntax (CMS). in: body required: true type: string",7,41
openstack%2Ftripleo-common~master~I5019dca6d1f84fc9061d5411aec67f3ae751d311,openstack/tripleo-common,master,I5019dca6d1f84fc9061d5411aec67f3ae751d311,Allow Centos 7 CI passing for Apache base,ABANDONED,2019-08-09 16:03:14.000000000,2019-08-12 07:29:44.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-09 16:03:14.000000000', 'files': ['container-images/tripleo_kolla_template_overrides.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/4e01eb22ce86fdc7403f88f1e33470c41ff3761a', 'message': 'Allow Centos 7 CI passing for Apache base\n\nThere is no /etc/httpd/conf.modules.d path for RHEL >7 OS family.\nAs of RHEL 8, apache module configs reside in /etc/httpd/conf.d.\n\nWhile the latter should be only used as of Train, we have to keep a w/a\nfor the missing former path, unless we get rid of Centos 7 CI/promo\njobs for Train.\n\nRevert this patch after no more Centos 7/Fedora CI jobs left for Train\n\nRelated-bug: #1838972\n\nChange-Id: I5019dca6d1f84fc9061d5411aec67f3ae751d311\nSigned-off-by: Bogdan Dobrelya <bdobreli@redhat.com>\n'}]",0,675653,4e01eb22ce86fdc7403f88f1e33470c41ff3761a,4,2,1,6926,,,0,"Allow Centos 7 CI passing for Apache base

There is no /etc/httpd/conf.modules.d path for RHEL >7 OS family.
As of RHEL 8, apache module configs reside in /etc/httpd/conf.d.

While the latter should be only used as of Train, we have to keep a w/a
for the missing former path, unless we get rid of Centos 7 CI/promo
jobs for Train.

Revert this patch after no more Centos 7/Fedora CI jobs left for Train

Related-bug: #1838972

Change-Id: I5019dca6d1f84fc9061d5411aec67f3ae751d311
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/53/675653/1 && git format-patch -1 --stdout FETCH_HEAD,['container-images/tripleo_kolla_template_overrides.j2'],1,4e01eb22ce86fdc7403f88f1e33470c41ff3761a,bug/1838972,# FIXME(bogdando): LP#1838972. Remove this after no more Centos 7 jobs rm -f /etc/httpd/conf.modules.d/00-mpm.*,,2,0
openstack%2Fpython-openstackclient~stable%2Fstein~I199f17e95c509a33f809ac85c65f685a37acd198,openstack/python-openstackclient,stable/stein,I199f17e95c509a33f809ac85c65f685a37acd198,openstack port create support --extra-dhcp-option,ABANDONED,2019-08-04 13:25:06.000000000,2019-08-12 07:24:38.000000000,,"[{'_account_id': 970}, {'_account_id': 22348}, {'_account_id': 30380}]","[{'number': 1, 'created': '2019-08-04 13:25:06.000000000', 'files': ['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/3c1dd53c55b46823d774bfe4dd9261b4a9b5cced', 'message': 'openstack port create support --extra-dhcp-option\n\nneutron create-port API  has extra_dhcp_opts parameter, this parameter\ncan set port with special extra dhcp options.\n\nChange-Id: I199f17e95c509a33f809ac85c65f685a37acd198\n(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)\n'}]",0,674489,3c1dd53c55b46823d774bfe4dd9261b4a9b5cced,4,3,1,29071,,,0,"openstack port create support --extra-dhcp-option

neutron create-port API  has extra_dhcp_opts parameter, this parameter
can set port with special extra dhcp options.

Change-Id: I199f17e95c509a33f809ac85c65f685a37acd198
(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/89/674489/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml']",3,3c1dd53c55b46823d774bfe4dd9261b4a9b5cced,,"--- features: - | Add ``--extra-dhcp-options`` parameter to the ``port create`` command. The neutronclient ``port-create`` command can accept extra DHCP options, add it to the openstackclient in order to be consistent.",,76,2
openstack%2Fpython-openstackclient~stable%2Fpike~I199f17e95c509a33f809ac85c65f685a37acd198,openstack/python-openstackclient,stable/pike,I199f17e95c509a33f809ac85c65f685a37acd198,openstack port create support --extra-dhcp-option,ABANDONED,2019-08-04 13:28:10.000000000,2019-08-12 07:24:32.000000000,,"[{'_account_id': 22348}, {'_account_id': 29071}, {'_account_id': 30380}]","[{'number': 1, 'created': '2019-08-04 13:28:10.000000000', 'files': ['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/e32c9604543f0f592b4d9716b36d79c999a476fe', 'message': 'openstack port create support --extra-dhcp-option\n\nneutron create-port API  has extra_dhcp_opts parameter, this parameter\ncan set port with special extra dhcp options.\n\nChange-Id: I199f17e95c509a33f809ac85c65f685a37acd198\n(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)\n'}]",0,674492,e32c9604543f0f592b4d9716b36d79c999a476fe,5,3,1,29071,,,0,"openstack port create support --extra-dhcp-option

neutron create-port API  has extra_dhcp_opts parameter, this parameter
can set port with special extra dhcp options.

Change-Id: I199f17e95c509a33f809ac85c65f685a37acd198
(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/92/674492/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml']",3,e32c9604543f0f592b4d9716b36d79c999a476fe,,"--- features: - | Add ``--extra-dhcp-options`` parameter to the ``port create`` command. The neutronclient ``port-create`` command can accept extra DHCP options, add it to the openstackclient in order to be consistent.",,76,2
openstack%2Fpython-openstackclient~stable%2Fqueens~I199f17e95c509a33f809ac85c65f685a37acd198,openstack/python-openstackclient,stable/queens,I199f17e95c509a33f809ac85c65f685a37acd198,openstack port create support --extra-dhcp-option,ABANDONED,2019-08-04 13:25:34.000000000,2019-08-12 07:24:25.000000000,,"[{'_account_id': 22348}, {'_account_id': 30380}]","[{'number': 1, 'created': '2019-08-04 13:25:34.000000000', 'files': ['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/afe27ee979dba34ecd8a1948312ec16e64fcb13c', 'message': 'openstack port create support --extra-dhcp-option\n\nneutron create-port API  has extra_dhcp_opts parameter, this parameter\ncan set port with special extra dhcp options.\n\nChange-Id: I199f17e95c509a33f809ac85c65f685a37acd198\n(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)\n'}]",0,674491,afe27ee979dba34ecd8a1948312ec16e64fcb13c,3,2,1,29071,,,0,"openstack port create support --extra-dhcp-option

neutron create-port API  has extra_dhcp_opts parameter, this parameter
can set port with special extra dhcp options.

Change-Id: I199f17e95c509a33f809ac85c65f685a37acd198
(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/91/674491/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml']",3,afe27ee979dba34ecd8a1948312ec16e64fcb13c,,"--- features: - | Add ``--extra-dhcp-options`` parameter to the ``port create`` command. The neutronclient ``port-create`` command can accept extra DHCP options, add it to the openstackclient in order to be consistent.",,76,2
openstack%2Fpython-openstackclient~stable%2Frocky~I199f17e95c509a33f809ac85c65f685a37acd198,openstack/python-openstackclient,stable/rocky,I199f17e95c509a33f809ac85c65f685a37acd198,openstack port create support --extra-dhcp-option,ABANDONED,2019-08-04 13:25:30.000000000,2019-08-12 07:24:17.000000000,,"[{'_account_id': 22348}, {'_account_id': 30380}]","[{'number': 1, 'created': '2019-08-04 13:25:30.000000000', 'files': ['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/c2fc6ac3a2d6d13012a3157dbf882343a759b7a8', 'message': 'openstack port create support --extra-dhcp-option\n\nneutron create-port API  has extra_dhcp_opts parameter, this parameter\ncan set port with special extra dhcp options.\n\nChange-Id: I199f17e95c509a33f809ac85c65f685a37acd198\n(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)\n'}]",0,674490,c2fc6ac3a2d6d13012a3157dbf882343a759b7a8,3,2,1,29071,,,0,"openstack port create support --extra-dhcp-option

neutron create-port API  has extra_dhcp_opts parameter, this parameter
can set port with special extra dhcp options.

Change-Id: I199f17e95c509a33f809ac85c65f685a37acd198
(cherry picked from commit 68809fce5a1073659001a87aee4f9407affd5d0e)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/90/674490/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/network/v2/test_port.py', 'openstackclient/network/v2/port.py', 'releasenotes/notes/allow-port-create-with-extra-dhcp-options-c2c40e4002b52e2a.yaml']",3,c2fc6ac3a2d6d13012a3157dbf882343a759b7a8,,"--- features: - | Add ``--extra-dhcp-options`` parameter to the ``port create`` command. The neutronclient ``port-create`` command can accept extra DHCP options, add it to the openstackclient in order to be consistent.",,76,2
openstack%2Fheat-dashboard~master~If9029786919eea82d25b9624f47184c6e155b4f1,openstack/heat-dashboard,master,If9029786919eea82d25b9624f47184c6e155b4f1,Removed older version of python added 3.5,ABANDONED,2018-09-29 08:11:07.000000000,2019-08-12 07:22:02.000000000,,"[{'_account_id': 841}, {'_account_id': 22348}, {'_account_id': 28935}, {'_account_id': 29313}]","[{'number': 1, 'created': '2018-09-29 08:11:07.000000000', 'files': ['setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/heat-dashboard/commit/e43fe6de76b8602b54293cceeff025ba0ec53bec', 'message': 'Removed older version of python added 3.5\n\nIn setup.cfg file the python 3.5 is added\nIn tox.ini the python 3.5 is added\n\nChange-Id: If9029786919eea82d25b9624f47184c6e155b4f1\n'}]",0,606332,e43fe6de76b8602b54293cceeff025ba0ec53bec,10,4,1,17499,,,0,"Removed older version of python added 3.5

In setup.cfg file the python 3.5 is added
In tox.ini the python 3.5 is added

Change-Id: If9029786919eea82d25b9624f47184c6e155b4f1
",git fetch https://review.opendev.org/openstack/heat-dashboard refs/changes/32/606332/1 && git format-patch -1 --stdout FETCH_HEAD,"['setup.cfg', 'tox.ini']",2,e43fe6de76b8602b54293cceeff025ba0ec53bec,,basepython = python3basepython = python3basepython = python3basepython = python3basepython = python3basepython = python3,,6,2
openstack%2Fnetworking-ovn~master~Ib9fe6e1bfea1d5f62b2f2b6fdb12d16878108c3f,openstack/networking-ovn,master,Ib9fe6e1bfea1d5f62b2f2b6fdb12d16878108c3f,Update port_status to ACTIVE during live-migration,MERGED,2019-07-31 12:30:50.000000000,2019-08-12 07:10:39.000000000,2019-08-09 17:51:41.000000000,"[{'_account_id': 1131}, {'_account_id': 1653}, {'_account_id': 4694}, {'_account_id': 5367}, {'_account_id': 5756}, {'_account_id': 6773}, {'_account_id': 6854}, {'_account_id': 8655}, {'_account_id': 10237}, {'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 24791}]","[{'number': 1, 'created': '2019-07-31 12:30:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/e87b5f6c149a4f57747f04007c5cfdf50596c827', 'message': ""DNM Update port_status to ACTIVE during live-migration\n\nDuring live-migration nova waits for 'network-vif-plugged' event\nin order to proceeed with live-migration [1]. While using OVN\nit never happened because the original design assumes usage\nof neutron agents.\n\nThis patch updates port status from DOWN to ACTIVE during\npre_live_migration state, which in fact for Neutron/ML2\nis done by neutron-ovs-agent, just only to emit\n'network-vif-plugged' notification and allow nova\nto perform live-migration.\n\n[1] https://review.opendev.org/#/c/558001/\n\nChange-Id: Ib9fe6e1bfea1d5f62b2f2b6fdb12d16878108c3f\nRelated-Bug: 1834045\n""}, {'number': 2, 'created': '2019-07-31 13:59:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/ec0ae7f76929e7a1bfa81ab87df672d102775780', 'message': ""DNM Update port_status to ACTIVE during live-migration\n\nDuring live-migration nova waits for 'network-vif-plugged' event\nin order to proceeed with live-migration [1]. While using OVN\nit never happened because the original design assumes usage\nof neutron agents.\n\nThis patch updates port status from DOWN to ACTIVE during\npre_live_migration state, which in fact for Neutron/ML2\nis done by neutron-ovs-agent, just only to emit\n'network-vif-plugged' notification and allow nova\nto perform live-migration.\n\n[1] https://review.opendev.org/#/c/558001/\n\nChange-Id: Ib9fe6e1bfea1d5f62b2f2b6fdb12d16878108c3f\nRelated-Bug: 1834045\n""}, {'number': 3, 'created': '2019-07-31 14:42:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/80e64f67d563b26279870741ab63d12d15a4fc86', 'message': ""Update port_status to ACTIVE during live-migration\n\nDuring live-migration nova waits for 'network-vif-plugged' event\nin order to proceeed with live-migration [1]. While using OVN\nit never happened because the original design assumes usage\nof neutron agents.\n\nThis patch updates port status from DOWN to ACTIVE during\npre_live_migration state, which in fact for Neutron/ML2\nis done by neutron-ovs-agent, just only to emit\n'network-vif-plugged' notification and allow nova\nto perform live-migration.\n\n[1] https://review.opendev.org/#/c/558001/\n\nChange-Id: Ib9fe6e1bfea1d5f62b2f2b6fdb12d16878108c3f\nRelated-Bug: 1834045\n""}, {'number': 4, 'created': '2019-08-09 11:51:44.000000000', 'files': ['networking_ovn/common/constants.py', 'networking_ovn/tests/unit/ml2/test_mech_driver.py', 'networking_ovn/ml2/mech_driver.py'], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/229f894ee6aff6b5da8cc399575537feed1c6a49', 'message': ""Update port_status to ACTIVE during live-migration\n\nDuring live-migration nova waits for 'network-vif-plugged' event\nin order to proceeed with live-migration [1]. While using OVN\nit never happened because the original design assumes usage\nof neutron agents.\n\nThis patch updates port status from DOWN to ACTIVE during\npre_live_migration state, which in fact for Neutron/ML2\nis done by neutron-ovs-agent, just only to emit\n'network-vif-plugged' notification and allow nova\nto perform live-migration.\n\n[1] https://review.opendev.org/#/c/558001/\n\nChange-Id: Ib9fe6e1bfea1d5f62b2f2b6fdb12d16878108c3f\nRelated-Bug: 1834045\n""}]",7,673803,229f894ee6aff6b5da8cc399575537feed1c6a49,33,13,4,24791,,,0,"Update port_status to ACTIVE during live-migration

During live-migration nova waits for 'network-vif-plugged' event
in order to proceeed with live-migration [1]. While using OVN
it never happened because the original design assumes usage
of neutron agents.

This patch updates port status from DOWN to ACTIVE during
pre_live_migration state, which in fact for Neutron/ML2
is done by neutron-ovs-agent, just only to emit
'network-vif-plugged' notification and allow nova
to perform live-migration.

[1] https://review.opendev.org/#/c/558001/

Change-Id: Ib9fe6e1bfea1d5f62b2f2b6fdb12d16878108c3f
Related-Bug: 1834045
",git fetch https://review.opendev.org/openstack/networking-ovn refs/changes/03/673803/1 && git format-patch -1 --stdout FETCH_HEAD,['networking_ovn/ml2/mech_driver.py'],1,e87b5f6c149a4f57747f04007c5cfdf50596c827,bug/1834045," # NOTE(mjozefcz): Check if port is in migration state. If so update # the port status from DOWN to UP in order to generate 'fake' # vif-interface-plugged event. This workaround is needed to # perform live-migration with live_migration_wait_for_vif_plug=True. if (port['status'] == const.PORT_STATUS_DOWN and 'migrating_to' in port[portbindings.PROFILE].keys() and port[portbindings.VIF_TYPE] == portbindings.VIF_TYPE_OVS): admin_context = n_context.get_admin_context() db_port = ml2_db.get_port(admin_context, port['id']) if db_port: LOG.warning(""Setting port %s status from DOWN to UP in order "" ""to init vif-interface-plugged event."", port['id']) self._plugin.update_port_status(admin_context, port['id'], const.PORT_STATUS_ACTIVE) ",,17,0
openstack%2Fironic~master~I4d941f9f39e49dcd997c1a82c9a2aba42c8a468a,openstack/ironic,master,I4d941f9f39e49dcd997c1a82c9a2aba42c8a468a,Docu: Fix broken link,MERGED,2019-08-09 19:41:03.000000000,2019-08-12 06:56:07.000000000,2019-08-12 06:56:07.000000000,"[{'_account_id': 11076}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 24828}]","[{'number': 1, 'created': '2019-08-09 19:41:03.000000000', 'files': ['doc/source/admin/portgroups.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/9eccadbf192f60173e24e2e8c3d25b2281bd585e', 'message': 'Docu: Fix broken link\n\nFix broken RST that generated a link to\nhttps://docs.openstack.org/../tools/link_aggregation_on_windows.ps1\nwhich does not exist. Instead link to the file in git.\n\nChange-Id: I4d941f9f39e49dcd997c1a82c9a2aba42c8a468a\n'}]",0,675685,9eccadbf192f60173e24e2e8c3d25b2281bd585e,8,4,1,6547,,,0,"Docu: Fix broken link

Fix broken RST that generated a link to
https://docs.openstack.org/../tools/link_aggregation_on_windows.ps1
which does not exist. Instead link to the file in git.

Change-Id: I4d941f9f39e49dcd997c1a82c9a2aba42c8a468a
",git fetch https://review.opendev.org/openstack/ironic refs/changes/85/675685/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/portgroups.rst'],1,9eccadbf192f60173e24e2e8c3d25b2281bd585e,fix-links,`script file <https://opendev.org/openstack/ironic/src/branch/master/tools/link_aggregation_on_windows.ps1>`_ in,`script file <../../../../tools/link_aggregation_on_windows.ps1>`_ in,2,1
openstack%2Ftripleo-heat-templates~master~I9021b28bfe1d2b42f11c09597aaa8bd3d68b1195,openstack/tripleo-heat-templates,master,I9021b28bfe1d2b42f11c09597aaa8bd3d68b1195,Add a daemon-reload to the tripleo-iptables services,MERGED,2019-08-02 17:32:21.000000000,2019-08-12 06:37:13.000000000,2019-08-09 17:22:12.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-02 17:32:21.000000000', 'files': ['deployment/tripleo-firewall/tripleo-firewall-baremetal-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f4a445aa6ea6de633214a0ccb6b4c69f330c18db', 'message': 'Add a daemon-reload to the tripleo-iptables services\n\nNormally this is not needed but after trying to clean up a borked\nundercloud I repeatedly stumbled in:\nTASK [create iptables service] * changed: [undercloud-0]\n\nTASK [enable tripleo-iptables service] * fatal: [undercloud-0]: FAILED! => {""changed"": false, ""msg"": ""Could not find the requested service tripleo-iptables.service: host""}\n\nWhile I genuinely am not sure how exactly I managed to get into\nthis state on the undercloud, with this change I managed to get\npast this error during the redeploy and it seems to be more robust\nanyway.\n\nIn the process of this change we also move to the \'systemd\' ansible\nmodule which is what is used everywhere anyway (so we can leverage\nthe daemon-reload option)\n\nChange-Id: I9021b28bfe1d2b42f11c09597aaa8bd3d68b1195\n'}]",0,674363,f4a445aa6ea6de633214a0ccb6b4c69f330c18db,24,8,1,20172,,,0,"Add a daemon-reload to the tripleo-iptables services

Normally this is not needed but after trying to clean up a borked
undercloud I repeatedly stumbled in:
TASK [create iptables service] * changed: [undercloud-0]

TASK [enable tripleo-iptables service] * fatal: [undercloud-0]: FAILED! => {""changed"": false, ""msg"": ""Could not find the requested service tripleo-iptables.service: host""}

While I genuinely am not sure how exactly I managed to get into
this state on the undercloud, with this change I managed to get
past this error during the redeploy and it seems to be more robust
anyway.

In the process of this change we also move to the 'systemd' ansible
module which is what is used everywhere anyway (so we can leverage
the daemon-reload option)

Change-Id: I9021b28bfe1d2b42f11c09597aaa8bd3d68b1195
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/63/674363/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/tripleo-firewall/tripleo-firewall-baremetal-puppet.yaml'],1,f4a445aa6ea6de633214a0ccb6b4c69f330c18db,tripleo-iptables-robust, - name: enable tripleo-iptables service (and do a daemon-reload systemd) systemd: daemon_reload: yes enabled: yes name: tripleo-iptables.service systemd:, - name: enable tripleo-iptables service service: enabled: yes name: tripleo-iptables.service service:,6,5
openstack%2Fmurano-dashboard~master~I2032047950d3de9dac190858f15d4b61d10a863a,openstack/murano-dashboard,master,I2032047950d3de9dac190858f15d4b61d10a863a,Imported Translations from Zanata,MERGED,2019-08-09 08:01:30.000000000,2019-08-12 05:59:54.000000000,2019-08-12 05:59:54.000000000,"[{'_account_id': 14107}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 08:01:30.000000000', 'files': ['muranodashboard/locale/ru/LC_MESSAGES/django.po'], 'web_link': 'https://opendev.org/openstack/murano-dashboard/commit/3342531a81e6cd2403c901517e227d1f31329be9', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I2032047950d3de9dac190858f15d4b61d10a863a\n'}]",0,675551,3342531a81e6cd2403c901517e227d1f31329be9,6,2,1,11131,,,0,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I2032047950d3de9dac190858f15d4b61d10a863a
",git fetch https://review.opendev.org/openstack/murano-dashboard refs/changes/51/675551/1 && git format-patch -1 --stdout FETCH_HEAD,['muranodashboard/locale/ru/LC_MESSAGES/django.po'],1,3342531a81e6cd2403c901517e227d1f31329be9,zanata/translations,"# Roman Gorshunov <roman.gorshunov@att.com>, 2019. #zanata""POT-Creation-Date: 2019-08-01 01:13+0000\n""""PO-Revision-Date: 2019-08-08 03:23+0000\n"" ""Last-Translator: Roman Gorshunov <roman.gorshunov@att.com>\n""#, python-format msgid """" ""\n"" "" %(used)s + %(other_used)s of %(quota)s MB used\n"" "" "" msgstr """" ""\n"" "" %(used)s + %(other_used)s  %(quota)s MB\n"" "" "" #, python-format msgid """" ""\n"" "" %(used)s + %(other_used)s of %(quota)s used\n"" "" "" msgstr """" ""\n"" "" %(used)s + %(other_used)s  %(quota)s\n"" "" "" #, python-format msgid ""%s: random subnet"" msgstr ""%s:  "" msgid ""Application default security group"" msgstr ""    "" msgid ""Browse Local"" msgstr "" "" msgid ""Can not get logo for {0}."" msgstr ""     {0}."" msgid ""Can not get supplier logo for {0}."" msgstr ""      {0}."" msgstr ""   .""""Default network is either not specified for this project, or specified "" ""incorrectly, please contact administrator."" msgstr """" "" -      ,    "" "". ,    ."" msgid """"msgstr "" ""msgstr "" ""#, python-format msgid ""Enter a dict with choices and values. Got %(value)s."" msgstr ""     .  %(value)s."" msgid ""Environment Deployment History"" msgstr ""  "" #, python-format msgid """" ""Error fetching the environment. The page may be rendered incorrectly. "" ""Reason: %s"" msgstr """" ""    .     "" ""   : %s"" msgid ""Failed to get list of flavors."" msgstr ""     ."" msgid ""Logs (Created, Message)"" msgstr ""  (, )"" msgid ""No volumes available"" msgstr ""  "" msgid ""Number of Instances"" msgstr "" "" msgid ""Number of VCPUs"" msgstr "" VCPU"" msgstr "" ""#, python-format msgid ""Select a valid choice. %(value)s is not one of the available choices."" msgstr """" ""  . %(value)s      "" ""."" msgstr """" "" ,      Glance."" msgid """" ""Select an image type supported by Murano. Choose 'Custom type' to enter type "" ""manually."" msgstr """" ""  ,  Murano,   \"" \"",  "" ""     .""msgid ""Select volume"" msgstr "" "" msgid ""Services (Name, Type)"" msgstr "" (, )"" ""This Application requires encryption, please contact your administrator to "" ""configure this."" msgstr """" ""   . ,    "" "",   ."" msgid """"msgid ""Total RAM"" msgstr "" RAM"" msgid ""Unable to retrieve deployment history."" msgstr ""    ."" msgid ""Unable to retrieve snapshot list."" msgstr ""    ."" msgid ""Unable to retrieve volume list."" msgstr ""    ."" msgid ""You are not allowed to make packages public."" msgstr ""     ."" ","""POT-Creation-Date: 2018-05-15 15:53+0000\n""""PO-Revision-Date: 2017-02-06 09:03+0000\n"" ""Last-Translator: Artem <amikhalev90@gmail.com>\n""msgstr ""   ""msgstr "" ""msgstr "" ""msgstr "" ""msgstr "" ,   Glance""",124,8
openstack%2Fkolla~master~I5a86405901139d643172835acb89f55b14bfedbf,openstack/kolla,master,I5a86405901139d643172835acb89f55b14bfedbf,Upgrade Monasca to InfluxDB 1.7,MERGED,2019-05-10 13:42:49.000000000,2019-08-12 04:57:02.000000000,2019-08-12 04:57:02.000000000,"[{'_account_id': 17669}, {'_account_id': 19316}, {'_account_id': 22348}, {'_account_id': 23717}, {'_account_id': 24072}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-05-10 13:42:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/29b393a806d8f68c6dcd28bcfa5dcc7d12e1d7ce', 'message': 'DNM: Remove Monasca template override\n\nMonasca now supports InfluxDB 1.7, the current version provided by\nKolla.\n\nChange-Id: I5a86405901139d643172835acb89f55b14bfedbf\n'}, {'number': 2, 'created': '2019-06-06 10:51:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/73cc35ce1439fb0f029c2767f77861fd3606f1d9', 'message': 'Upgrade Monasca to InfluxDB 1.7\n\nMonasca now supports InfluxDB 1.7, the current version provided by\nKolla. We no longer need to build an old version for Monasca.\n\nDepends-On: https://review.opendev.org/#/c/658330\nChange-Id: I5a86405901139d643172835acb89f55b14bfedbf\n'}, {'number': 3, 'created': '2019-06-24 08:55:07.000000000', 'files': ['contrib/template-override/monasca-template-overrides.j2', 'releasenotes/notes/upgrade-influxdb-for-monasca-202f3cf22ff8597e.yaml', 'doc/source/admin/template-override/monasca.rst'], 'web_link': 'https://opendev.org/openstack/kolla/commit/dde74ebfdc1a50f002e844b4433a17b9533db78e', 'message': 'Upgrade Monasca to InfluxDB 1.7\n\nMonasca now supports InfluxDB 1.7, the current version provided by\nKolla. We no longer need to build an old version for Monasca.\n\nDepends-On: https://review.opendev.org/#/c/658330\nChange-Id: I5a86405901139d643172835acb89f55b14bfedbf\n'}]",0,658367,dde74ebfdc1a50f002e844b4433a17b9533db78e,18,6,3,17669,,,0,"Upgrade Monasca to InfluxDB 1.7

Monasca now supports InfluxDB 1.7, the current version provided by
Kolla. We no longer need to build an old version for Monasca.

Depends-On: https://review.opendev.org/#/c/658330
Change-Id: I5a86405901139d643172835acb89f55b14bfedbf
",git fetch https://review.opendev.org/openstack/kolla refs/changes/67/658367/1 && git format-patch -1 --stdout FETCH_HEAD,"['contrib/template-override/monasca-template-overrides.j2', 'doc/source/admin/template-override/monasca.rst']",2,29b393a806d8f68c6dcd28bcfa5dcc7d12e1d7ce,,,============================================== Building non-standard Monasca container images ============================================== The `monasca-template-overrides.j2` file shows how to build any images required for Monasca which are non-standard. Currently this includes only InfluxDB. When Monasca is upgraded this file will no longer be required. InfluxDB -------- Build the container by executing the following command: .. code-block:: console kolla-build --template-override contrib/template-override/monasca-template-overrides.j2 influxdb ,0,21
openstack%2Ftripleo-ansible~master~I7f9e993735a0347aac12f728393639d88c80ff0f,openstack/tripleo-ansible,master,I7f9e993735a0347aac12f728393639d88c80ff0f,Import Hiera roles,MERGED,2019-07-29 21:03:18.000000000,2019-08-12 04:56:13.000000000,2019-08-12 04:56:13.000000000,"[{'_account_id': 3153}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 11491}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2019-07-29 21:03:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/63003933a5eff9f98c50fd41c19c6b1e4b85e026', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 2, 'created': '2019-07-29 21:04:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/bd34c526beb9255bbe3013deae0486a2bbb0123e', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 3, 'created': '2019-07-29 21:15:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/f602cebe7e9e73f6be7b13a5f6299a5fb8ff5560', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34730\nTask: 34730\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 4, 'created': '2019-07-29 21:16:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/7d0d80bc710d2799d23841861f37456feeee183a', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 5, 'created': '2019-07-29 22:06:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/25ea7ec4a1f9f9cdb35b99f92770554be0ff7294', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 6, 'created': '2019-07-30 02:20:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/6389e140cf8efa6f90c0c981813d672f6628c0c2', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 7, 'created': '2019-07-30 17:53:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/7fd9b159636f17cf114257ca9ada37236f5e6231', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 8, 'created': '2019-07-30 17:57:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8d568bb2e2697fc8f0a4553d269b98c21d12795c', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 9, 'created': '2019-07-30 18:02:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c473dc6c7d02f138af9b92194e8a658e228f89d7', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 10, 'created': '2019-07-30 19:18:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/116290d6a2d973c25c31d1ef3295e703df5dc867', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional scenario jobs have been added to the layout. These jobs\nwill execute whenever a change is made to either of the hiera roles.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 11, 'created': '2019-07-30 21:06:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/d468bafba728bb8ae48119c7bd23649fed9263b3', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 12, 'created': '2019-07-30 22:53:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/73939cec0ce8172e1d87d70681b23d1e8519d395', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 13, 'created': '2019-07-30 23:21:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/bae97bf8ba7f2f3d5d128e767b5d315775b3c89e', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 14, 'created': '2019-07-31 12:45:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/dbe9fe41b612f0b2f7c508508f385a538a941478', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 15, 'created': '2019-07-31 19:11:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ec963b3e9e90b8fda831f1e336e01f6d48b42833', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n  - all-hosts - Tests running through a standard multi-node deployment\n                using mock hieradata\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 16, 'created': '2019-07-31 21:50:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3de3b676202410e27304cfcadcbf6b80ded1af48', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n  - all-hosts - Tests running through a standard multi-node deployment\n                using mock hieradata\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 17, 'created': '2019-08-01 13:23:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/77b1a8cd9489e036d6836545afba54f49dc46fc5', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n  - all-hosts - Tests running through a standard multi-node deployment\n                using mock hieradata\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 18, 'created': '2019-08-05 22:29:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3d391b0fb80adce82e18c636b44045f8e1dfcfa0', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n  - all-hosts - Tests running through a standard multi-node deployment\n                using mock hieradata\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 19, 'created': '2019-08-08 04:10:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ef75ce20ca4322dee0e1e46564b6ce4ff652f867', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n  - all-hosts - Tests running through a standard multi-node deployment\n                using mock hieradata\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 20, 'created': '2019-08-08 13:53:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/d9d41ac016435f30e9669cf4818a2bd1a4243444', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n  - all-hosts - Tests running through a standard multi-node deployment\n                using mock hieradata\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}, {'number': 21, 'created': '2019-08-09 15:32:15.000000000', 'files': ['tripleo_ansible/roles/tripleo-hieradata/tasks/main.yml', 'test-requirements.txt', 'tripleo_ansible/roles/tripleo-hieradata/templates/fqdn.j2', 'tripleo_ansible/roles/tripleo-hieradata/templates/vip_data.j2', 'tripleo_ansible/roles/tripleo-hieradata/handlers/main.yml', 'tripleo_ansible/roles/tripleo-hieradata/tasks/all_hosts.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/tests/test_default.py', 'zuul.d/molecule.yaml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/templates/cloud_domain.j2', 'tripleo_ansible/roles/tripleo-hieradata/meta/main.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/playbook.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/prepare.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/Dockerfile', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/tests/test_hieradata_vars.py', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/main.yml', 'doc/source/roles/role-tripleo-hieradata.rst', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/prepare.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/prepare.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/tests/test_default.py', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/create-tripleo-upgrade-file.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-hieradata/templates/net_ip_map.j2', 'tripleo_ansible/roles/tripleo-hieradata/templates/service_configs.j2', 'tripleo_ansible/roles/tripleo-hieradata/templates/bootstrap_node.j2', 'tripleo_ansible/roles/tripleo-hieradata/defaults/main.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/Dockerfile', 'zuul.d/layout.yaml', 'tripleo_ansible/roles/tripleo-hieradata/templates/role_extraconfig.j2', 'doc/source/roles/role-tripleo-upgrade-hiera.rst', 'tripleo_ansible/roles/tripleo-upgrade-hiera/meta/main.yml', 'tripleo_ansible/roles/tripleo-hieradata/tasks/hieradata_vars.yaml', 'tripleo_ansible/roles/tripleo-hieradata/templates/all_nodes.j2', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/set.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/Dockerfile', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/remove-all.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/Dockerfile', 'tripleo_ansible/roles/tripleo-hieradata/templates/extraconfig.j2', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/remove.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/prepare.yml', 'tripleo_ansible/roles/tripleo-hieradata/tasks/per_host.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/prepare.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/defaults/main.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/molecule.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/Dockerfile'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9743b73de65fc599158036565ec9305d30d1ad0a', 'message': ""Import Hiera roles\n\nThe hiera roles (data and upgrade) have been imported. These roles will now\nbe tested using molecule which will ensure functionality via multiple\nscenarios tests which should provide coverage for all currently available\ncode path's.\n\nBecause these roles use the ip filter from Ansible a change to the test\nrequirements has been made to include the require python library, netaddr.\n\nHieradata Test Matrix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n  - hieradata_vars - Rests role include functionality to generate\n                     hiera templates\n  - per-host - Tests running with hiera config with host specific\n               values\n  - all-hosts - Tests running through a standard multi-node deployment\n                using mock hieradata\n\nHiera Upgrade Test Matix:\n  - Default - Runs through the role top to bottom with all default\n              settings\n\nTo ensure we maintain coverage for the hieradata and upgrade roles\nadditional voting scenario jobs have been added to the layout. These\njobs will execute whenever a change is made to either of the hiera\nroles ensuring we're not experiencing any regressions on a critical\npart of our deployment process.\n\nStory: 2006044\nTask: 34726\nTask: 34728\nTask: 34729\nStory: 2006044\nTask: 34730\nTask: 34732\nTask: 34733\nChange-Id: I7f9e993735a0347aac12f728393639d88c80ff0f\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n""}]",16,673364,9743b73de65fc599158036565ec9305d30d1ad0a,94,9,21,7353,,,0,"Import Hiera roles

The hiera roles (data and upgrade) have been imported. These roles will now
be tested using molecule which will ensure functionality via multiple
scenarios tests which should provide coverage for all currently available
code path's.

Because these roles use the ip filter from Ansible a change to the test
requirements has been made to include the require python library, netaddr.

Hieradata Test Matrix:
  - Default - Runs through the role top to bottom with all default
              settings
  - hieradata_vars - Rests role include functionality to generate
                     hiera templates
  - per-host - Tests running with hiera config with host specific
               values
  - all-hosts - Tests running through a standard multi-node deployment
                using mock hieradata

Hiera Upgrade Test Matix:
  - Default - Runs through the role top to bottom with all default
              settings

To ensure we maintain coverage for the hieradata and upgrade roles
additional voting scenario jobs have been added to the layout. These
jobs will execute whenever a change is made to either of the hiera
roles ensuring we're not experiencing any regressions on a critical
part of our deployment process.

Story: 2006044
Task: 34726
Task: 34728
Task: 34729
Story: 2006044
Task: 34730
Task: 34732
Task: 34733
Change-Id: I7f9e993735a0347aac12f728393639d88c80ff0f
Signed-off-by: Kevin Carter <kecarter@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/64/673364/2 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo-hieradata/tasks/main.yml', 'test-requirements.txt', 'tripleo_ansible/roles/tripleo-hieradata/templates/fqdn.j2', 'tripleo_ansible/roles/tripleo-hieradata/templates/vip_data.j2', 'tripleo_ansible/roles/tripleo-hieradata/handlers/main.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/verify.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-hieradata/tasks/all_hosts.yml', 'tripleo_ansible/roles/tripleo-hieradata/templates/net_ip_map.j2', 'tripleo_ansible/roles/tripleo-hieradata/tasks/hieradata_vars.yml', 'tripleo_ansible/roles/tripleo-hieradata/templates/bootstrap_node.j2', 'zuul.d/molecule.yaml', 'tripleo_ansible/roles/tripleo-hieradata/defaults/main.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/Dockerfile', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/templates/cloud_domain.j2', 'doc/source/roles/role-tripleo-upgrade-hiera.rst', 'tripleo_ansible/roles/tripleo-hieradata/meta/main.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/meta/main.yml', 'tripleo_ansible/roles/tripleo-hieradata/templates/all_nodes.j2', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/set.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/playbook.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/prepare.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/Dockerfile', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/remove-all.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/Dockerfile', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/remove.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/prepare.yml', 'tripleo_ansible/roles/tripleo-hieradata/tasks/per_host.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/prepare.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/main.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/defaults/main.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/molecule.yml', 'doc/source/roles/role-tripleo-hieradata.rst', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/prepare.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/per-host/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/default/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/tasks/create-tripleo-upgrade-file.yml', 'tripleo_ansible/roles/tripleo-upgrade-hiera/molecule/default/Dockerfile']",44,63003933a5eff9f98c50fd41c19c6b1e4b85e026,hieraroles,"# Molecule managed # Copyright 2019 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. {% if item.registry is defined %} FROM {{ item.registry.url }}/{{ item.image }} {% else %} FROM {{ item.image }} {% endif %} RUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates && apt-get clean; \ elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python*-dnf bash {{ item.pkg_extras | default('') }} && dnf clean all; \ elif [ $(command -v yum) ]; then yum makecache fast && yum install -y python sudo yum-plugin-ovl python-setuptools bash {{ item.pkg_extras | default('') }} && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \ elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml {{ item.pkg_extras | default('') }} && zypper clean -a; \ elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates {{ item.pkg_extras | default('') }}; \ elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates {{ item.pkg_extras | default('') }} && xbps-remove -O; fi {% for pkg in item.easy_install | default([]) %} # install pip for centos where there is no python-pip rpm in default repos RUN easy_install {{ pkg }} {% endfor %} CMD [""sh"", ""-c"", ""while true; do sleep 10000; done""] ",,1343,1
openstack%2Frequirements~master~I8aac47183b781d69136a33b7513d27d2f325a3bc,openstack/requirements,master,I8aac47183b781d69136a33b7513d27d2f325a3bc,Updated from generate-constraints,MERGED,2019-08-11 06:13:08.000000000,2019-08-12 04:54:32.000000000,2019-08-12 04:54:32.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-11 06:13:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/2b4afee04c06d393bcafdf4eea2cc7bc622116a6', 'message': 'Updated from generate-constraints\n\nChange-Id: I8aac47183b781d69136a33b7513d27d2f325a3bc\n'}, {'number': 2, 'created': '2019-08-11 19:30:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/7bc541c8e1a23d029fbd1c4f283bb895bf3a8ce7', 'message': 'Updated from generate-constraints\n\nChange-Id: I8aac47183b781d69136a33b7513d27d2f325a3bc\n'}, {'number': 3, 'created': '2019-08-11 21:18:48.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/9d9cf9a640553a386a2ed150ef2cba4fea86865c', 'message': 'Updated from generate-constraints\n\nChange-Id: I8aac47183b781d69136a33b7513d27d2f325a3bc\n'}]",0,675759,9d9cf9a640553a386a2ed150ef2cba4fea86865c,14,2,3,11131,,,0,"Updated from generate-constraints

Change-Id: I8aac47183b781d69136a33b7513d27d2f325a3bc
",git fetch https://review.opendev.org/openstack/requirements refs/changes/59/675759/3 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,2b4afee04c06d393bcafdf4eea2cc7bc622116a6,openstack/requirements/constraints,lxml===4.4.0scipy===1.3.1;python_version=='3.4' scipy===1.3.1;python_version=='3.5' scipy===1.3.1;python_version=='3.6' scipy===1.3.1;python_version=='3.7'ruamel.yaml.clib===0.1.2arrow===0.14.5tornado===5.1.1;python_version=='2.7'python-3parclient===4.2.10libvirt-python===5.6.0ruamel.yaml===0.16.1gabbi===1.49.0boto3===1.9.205stestr===2.5.0kubernetes===10.0.0botocore===1.12.205pyzmq===18.1.0storops===1.2.0configparser===3.7.5;python_version=='2.7'jsonschema===3.0.2oauthlib===3.1.0,lxml===4.3.4scipy===1.3.0;python_version=='3.4' scipy===1.3.0;python_version=='3.5' scipy===1.3.0;python_version=='3.6' scipy===1.3.0;python_version=='3.7'ruamel.yaml.clib===0.1.0arrow===0.14.4tornado===4.5.3;python_version=='2.7'python-3parclient===4.2.9libvirt-python===5.5.0ruamel.yaml===0.16.0gabbi===1.48.0boto3===1.9.191stestr===2.4.0kubernetes===9.0.0botocore===1.12.191pyzmq===18.0.2storops===1.1.0configparser===3.7.4;python_version=='2.7'jsonschema===2.6.0oauthlib===3.0.2,21,21
openstack%2Fkeystone~master~Ie022e379d03d0309ec320b6947b987758d87fe5d,openstack/keystone,master,Ie022e379d03d0309ec320b6947b987758d87fe5d,Add API changes for app cred access rules,MERGED,2019-01-03 12:39:17.000000000,2019-08-12 04:36:00.000000000,2019-08-12 04:36:00.000000000,"[{'_account_id': 1916}, {'_account_id': 2218}, {'_account_id': 2903}, {'_account_id': 5046}, {'_account_id': 8482}, {'_account_id': 15054}, {'_account_id': 22348}, {'_account_id': 25564}, {'_account_id': 27621}]","[{'number': 1, 'created': '2019-01-03 12:39:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/5bed7e72b76510fc9ead9273dd9c0f004d5ff944', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 2, 'created': '2019-01-03 14:42:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/eae0c715c56a7780fba724bde2d5d88dae36ae45', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 3, 'created': '2019-01-04 16:04:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/e0bded362d4a0ee2926707762318a5f5e2d6883a', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 4, 'created': '2019-01-07 14:16:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/fe53fe8a533e11b6fdd1592600587b2996ff24af', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 5, 'created': '2019-01-19 19:31:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/83cedd6247ea72954a74d5f7f681a3625bd34178', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 6, 'created': '2019-01-20 19:17:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/807071316734a20ab869ff8d496ce4b4ed150a93', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 7, 'created': '2019-01-29 22:17:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/2fde0603622e7435df4246efdfdd0fb37f1b7827', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 8, 'created': '2019-01-30 21:50:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/d51ac1ab0dcfd9afd8d918fb812201e20329e52f', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 9, 'created': '2019-02-09 15:00:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/05233311bcd216fc8b9222dba82f074c6df2c0a0', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 10, 'created': '2019-02-09 20:46:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/aee04145f6d55d7f834e4eb331627d1041249566', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 11, 'created': '2019-02-14 00:08:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/60e37d14093d0072edc0e7ad0b88da108671bdca', 'message': '[WIP] Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 12, 'created': '2019-02-17 22:10:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/9a7fa2e4436e0196a6b342a17a3155fe104a7125', 'message': 'Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 13, 'created': '2019-02-19 16:32:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/d68d416853f5f7288c3d4acf99b410142f385b5b', 'message': 'Add API changes for app cred capabilities\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 14, 'created': '2019-02-24 23:58:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/506a1757d8bd7bef5a39222576d5822207c2d3da', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 15, 'created': '2019-02-25 08:47:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/ade99e4ab46349e3cd8e198aa50e896ddceff222', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 16, 'created': '2019-02-25 08:48:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/fbd78ef74aa2a9556aa81367d7d4261163c0a972', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 17, 'created': '2019-02-25 08:48:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/ed95861aa067f674c265ef386cc4f4a50de078c7', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 18, 'created': '2019-02-25 08:50:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/1a518c38dff2dd469de9def07ec423d4dd1f8f79', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 19, 'created': '2019-02-25 11:36:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/a3126df83cfaf7170cf7abf01046fc600da4af3c', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 20, 'created': '2019-02-25 14:17:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/4fbab5000d58945cc1d91103e88420cf570a9431', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 21, 'created': '2019-03-03 17:43:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/8331e4dc335ca21045f8cbf15f935f22160ce9a7', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 22, 'created': '2019-03-04 08:22:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/d0c816bb4188bb7d35a0812eab6f155ec28e4fd6', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 23, 'created': '2019-06-07 19:51:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/cb82d4896edadac9cdeca633e8577743e25fe98e', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 24, 'created': '2019-06-10 21:30:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/77206bc80b8f4f1eed2130babb8725373684f804', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 25, 'created': '2019-06-11 22:46:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/1fb3d5a730478863dc6d5d7fbdc89cbe1cf5e254', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 26, 'created': '2019-06-27 21:28:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/5d69d257c8ba04d13f3bdbd01b961f6bf213aca7', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 27, 'created': '2019-07-05 19:12:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/50a955784e7e6e03dcf41df237329e474b57558f', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}, {'number': 28, 'created': '2019-08-01 19:57:54.000000000', 'files': ['keystone/application_credential/schema.py', 'keystone/api/users.py', 'keystone/tests/unit/test_v3_application_credential.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/14c4b177efc4b53f9ab97fa3f7560ba255bbdb93', 'message': 'Add API changes for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d\n'}]",0,628168,14c4b177efc4b53f9ab97fa3f7560ba255bbdb93,78,9,28,8482,,,0,"Add API changes for app cred access rules

bp whitelist-extension-for-app-creds

Change-Id: Ie022e379d03d0309ec320b6947b987758d87fe5d
",git fetch https://review.opendev.org/openstack/keystone refs/changes/68/628168/15 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/api/users.py', 'keystone/application_credential/schema.py', 'keystone/tests/unit/test_v3_application_credential.py', 'keystone/application_credential/core.py']",4,5bed7e72b76510fc9ead9273dd9c0f004d5ff944,bp/whitelist-extension-for-app-creds, # FIXME(cmurphy) WIP if 'capabilities' in application_credential: application_credential.pop('capabilities'),,52,3
openstack%2Fironic-specs~master~I7f2d9da84c9a2321706d20861eab01779257856e,openstack/ironic-specs,master,I7f2d9da84c9a2321706d20861eab01779257856e,"Fix a typo of ""parameter""",NEW,2019-01-11 12:10:28.000000000,2019-08-12 03:16:43.000000000,,"[{'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 29209}]","[{'number': 1, 'created': '2019-01-11 12:10:28.000000000', 'files': ['specs/liberty-implemented/supported-boot-device-list.rst'], 'web_link': 'https://opendev.org/openstack/ironic-specs/commit/b6f142c12e7fd0eac2f538b034d1b673696b2225', 'message': 'Fix a typo of ""parameter""\n\nChange-Id: I7f2d9da84c9a2321706d20861eab01779257856e\n'}]",2,630184,b6f142c12e7fd0eac2f538b034d1b673696b2225,4,3,1,26775,,,0,"Fix a typo of ""parameter""

Change-Id: I7f2d9da84c9a2321706d20861eab01779257856e
",git fetch https://review.opendev.org/openstack/ironic-specs refs/changes/84/630184/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/liberty-implemented/supported-boot-device-list.rst'],1,b6f142c12e7fd0eac2f538b034d1b673696b2225,,"a deprecation warning if ""task"" parameter has not been implemented. * Update all in tree drivers adding task parameter","a deprecation warning if ""task"" paramater has not been implemented. * Update all in tree drivers adding task paramater",2,2
openstack%2Fkarbor-dashboard~master~Ibadf2b8be7077535ec666ce88e06c480cf5dd36c,openstack/karbor-dashboard,master,Ibadf2b8be7077535ec666ce88e06c480cf5dd36c,Update links in README,ABANDONED,2018-03-28 09:01:06.000000000,2019-08-12 03:10:49.000000000,,"[{'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 25903}, {'_account_id': 29313}, {'_account_id': 30356}]","[{'number': 1, 'created': '2018-03-28 09:01:06.000000000', 'files': ['README.rst'], 'web_link': 'https://opendev.org/openstack/karbor-dashboard/commit/3b470fdbcf1c872c1a72af44033a42719a19f4d4', 'message': 'Update links in README\n\nChange the outdated links to the latest links in README\n\nChange-Id: Ibadf2b8be7077535ec666ce88e06c480cf5dd36c\n'}]",2,557204,3b470fdbcf1c872c1a72af44033a42719a19f4d4,7,5,1,26775,,,0,"Update links in README

Change the outdated links to the latest links in README

Change-Id: Ibadf2b8be7077535ec666ce88e06c480cf5dd36c
",git fetch https://review.opendev.org/openstack/karbor-dashboard refs/changes/04/557204/1 && git format-patch -1 --stdout FETCH_HEAD,['README.rst'],1,3b470fdbcf1c872c1a72af44033a42719a19f4d4,,.. image:: https://governance.openstack.org/tc/badges/karbor-dashboard.svg :target: https://governance.openstack.org/tc/reference/tags/index.html,.. image:: https://governance.openstack.org/badges/karbor-dashboard.svg :target: https://governance.openstack.org/reference/tags/index.html,2,2
openstack%2Faodh~master~Ic2328aa907d23c6b6f827661a3fb3cb26f8496fd,openstack/aodh,master,Ic2328aa907d23c6b6f827661a3fb3cb26f8496fd,Heat notifier: notify alarm without Octavia tags,MERGED,2019-08-09 03:30:16.000000000,2019-08-12 03:08:05.000000000,2019-08-12 03:01:28.000000000,"[{'_account_id': 6732}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 27068}]","[{'number': 1, 'created': '2019-08-09 03:30:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/aodh/commit/744e5e6b19a5467e8371b97a5b7665ff3dcbf0e4', 'message': 'Heat notifier: notify alarm without Octavia tags\n\nThis patch improves heat notifier by removing the hard requirement for\nOctavia tags. When Aodh is deployed in an environment that Octavia\ndoens\'t support tags yet(before stable/stein), heat notifier will do\nresource search by the Octavia member ID.\n\nNote:\n\nBoth approaches need specific Heat template definition:\n\n1. Use Octavia tags.\n\n    pool_member:\n      type: OS::Octavia::PoolMember\n      properties:\n        address: {get_attr: [server, first_address]}\n        pool: {get_param: pool_id}\n        protocol_port: {get_param: webserver_port}\n        tags: [{get_param: ""OS::stack_id""}]\n\n2. Resource search.\n\n    outputs:\n      OS::stack_id:\n        value: { get_resource: pool_member }\n\nChange-Id: Ic2328aa907d23c6b6f827661a3fb3cb26f8496fd\n'}, {'number': 2, 'created': '2019-08-09 10:24:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/aodh/commit/81ba9524be374fb86d9e4ca25d3bdd1c68b1c6c4', 'message': 'Heat notifier: notify alarm without Octavia tags\n\nThis patch improves heat notifier by removing the hard requirement for\nOctavia tags. When Aodh is deployed in an environment that Octavia\ndoens\'t support tags yet(before stable/stein), heat notifier will do\nresource search by the Octavia member ID.\n\nNote:\n\nBoth approaches need specific Heat template definition:\n\n1. Use Octavia tags.\n\n    pool_member:\n      type: OS::Octavia::PoolMember\n      properties:\n        address: {get_attr: [server, first_address]}\n        pool: {get_param: pool_id}\n        protocol_port: {get_param: webserver_port}\n        tags: [{get_param: ""OS::stack_id""}]\n\n2. Resource search.\n\n    outputs:\n      OS::stack_id:\n        value: { get_resource: pool_member }\n\nChange-Id: Ic2328aa907d23c6b6f827661a3fb3cb26f8496fd\n'}, {'number': 3, 'created': '2019-08-12 01:15:21.000000000', 'files': ['aodh/notifier/heat.py', 'aodh/tests/unit/notifier/test_heat.py'], 'web_link': 'https://opendev.org/openstack/aodh/commit/e2d2ebf44ebb0e5120566c23add6b02a42172c82', 'message': 'Heat notifier: notify alarm without Octavia tags\n\nThis patch improves heat notifier by removing the hard requirement for\nOctavia tags. When Aodh is deployed in an environment that Octavia\ndoens\'t support tags yet(before stable/stein), heat notifier will do\nresource search by the Octavia member ID.\n\nNote:\n\nBoth approaches need specific Heat template definition:\n\n1. Use Octavia tags.\n\n    pool_member:\n      type: OS::Octavia::PoolMember\n      properties:\n        address: {get_attr: [server, first_address]}\n        pool: {get_param: pool_id}\n        protocol_port: {get_param: webserver_port}\n        tags: [{get_param: ""OS::stack_id""}]\n\n2. Resource search.\n\n    outputs:\n      OS::stack_id:\n        value: { get_resource: pool_member }\n\nChange-Id: Ic2328aa907d23c6b6f827661a3fb3cb26f8496fd\n'}]",4,675510,e2d2ebf44ebb0e5120566c23add6b02a42172c82,16,4,3,6732,,,0,"Heat notifier: notify alarm without Octavia tags

This patch improves heat notifier by removing the hard requirement for
Octavia tags. When Aodh is deployed in an environment that Octavia
doens't support tags yet(before stable/stein), heat notifier will do
resource search by the Octavia member ID.

Note:

Both approaches need specific Heat template definition:

1. Use Octavia tags.

    pool_member:
      type: OS::Octavia::PoolMember
      properties:
        address: {get_attr: [server, first_address]}
        pool: {get_param: pool_id}
        protocol_port: {get_param: webserver_port}
        tags: [{get_param: ""OS::stack_id""}]

2. Resource search.

    outputs:
      OS::stack_id:
        value: { get_resource: pool_member }

Change-Id: Ic2328aa907d23c6b6f827661a3fb3cb26f8496fd
",git fetch https://review.opendev.org/openstack/aodh refs/changes/10/675510/1 && git format-patch -1 --stdout FETCH_HEAD,"['aodh/notifier/heat.py', 'aodh/tests/unit/notifier/test_heat.py']",2,744e5e6b19a5467e8371b97a5b7665ff3dcbf0e4,heat-notifier," def test_notify_with_tags(self, mock_heatclient): def test_notify_without_tags(self, mock_heatclient): action = netutils.urlsplit(""trust+autohealer://fake_trust_id:delete@"") alarm_id = ""fake_alarm_id"" alarm_name = ""fake_alarm_name"" severity = ""low"" previous = ""ok"" current = ""alarm"" reason = ""no good reason"" reason_data = { ""stack_id"": ""fake_stack_id"", ""asg_id"": ""fake_asg_id"", ""unhealthy_members"": [ {""id"": ""3bd8bc5a-7632-11e9-84cd-00224d6b7bc1""} ] } mock_client = mock_heatclient.return_value mock_client.resources.list.return_value = [ {""resource_name"": ""fake_resource_name""} ] notifier = heat_notifier.TrustHeatAlarmNotifier(self.conf) notifier.notify(action, alarm_id, alarm_name, severity, previous, current, reason, reason_data) mock_heatclient.assert_called_once_with(self.conf, ""fake_trust_id"") mock_client.resources.mark_unhealthy.assert_called_once_with( ""fake_asg_id"", ""fake_resource_name"", True, ""unhealthy load balancer member"" ) mock_client.stacks.update.assert_called_once_with( ""fake_stack_id"", existing=True ) @mock.patch(""aodh.keystone_client.get_heat_client_from_trust"")"," def test_notify(self, mock_heatclient):",94,34
openstack%2Fzun~master~I4a2b2a24f75757d1fb9cd925eecf386b2a1752eb,openstack/zun,master,I4a2b2a24f75757d1fb9cd925eecf386b2a1752eb,Remove the unnecessary glance_store config,MERGED,2019-08-11 16:23:45.000000000,2019-08-12 02:34:09.000000000,2019-08-12 02:34:09.000000000,"[{'_account_id': 22348}, {'_account_id': 23365}]","[{'number': 1, 'created': '2019-08-11 16:23:45.000000000', 'files': ['devstack/lib/zun'], 'web_link': 'https://opendev.org/openstack/zun/commit/67925c9ce93e8d958893ea846aab2051d40791c3', 'message': ""Remove the unnecessary glance_store config\n\nThe override of the 'default_store' config is a temporary walk-around\na python3 issue. Such walk-around is not needed anymore.\n\nChange-Id: I4a2b2a24f75757d1fb9cd925eecf386b2a1752eb\n""}]",0,675786,67925c9ce93e8d958893ea846aab2051d40791c3,6,2,1,11536,,,0,"Remove the unnecessary glance_store config

The override of the 'default_store' config is a temporary walk-around
a python3 issue. Such walk-around is not needed anymore.

Change-Id: I4a2b2a24f75757d1fb9cd925eecf386b2a1752eb
",git fetch https://review.opendev.org/openstack/zun refs/changes/86/675786/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/zun'],1,67925c9ce93e8d958893ea846aab2051d40791c3,,," if [[ ""$USE_PYTHON3"" = ""True"" ]]; then # Switch off glance->swift communication as swift fails under py3.x iniset /etc/glance/glance-api.conf glance_store default_store file fi",0,5
openstack%2Fzun~master~Ia166d7d23e058810831dd05da65d812565833124,openstack/zun,master,Ia166d7d23e058810831dd05da65d812565833124,Fix container status on create,MERGED,2019-08-01 03:44:56.000000000,2019-08-12 02:18:03.000000000,2019-08-12 02:18:02.000000000,"[{'_account_id': 11536}, {'_account_id': 22348}, {'_account_id': 23365}]","[{'number': 1, 'created': '2019-08-01 03:44:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zun/commit/e4d389fd7c228d59b1044d47b7434fb854904ead', 'message': 'Fix container status on create\n\nChange-Id: Ia166d7d23e058810831dd05da65d812565833124\n'}, {'number': 2, 'created': '2019-08-02 02:07:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zun/commit/d022e794786b36b5a652a60a2c74dd26f9619bd9', 'message': 'Fix container status on create\n\nCloses-Bug: #1838715\nChange-Id: Ia166d7d23e058810831dd05da65d812565833124\n'}, {'number': 3, 'created': '2019-08-09 01:51:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zun/commit/4f22d40f6e906b8f7f64c38cd764ef9cb51e5191', 'message': 'Fix container status on create\n\nCloses-Bug: #1838715\nChange-Id: Ia166d7d23e058810831dd05da65d812565833124\n'}, {'number': 4, 'created': '2019-08-09 02:13:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zun/commit/b0e15cd87e170b0d3b80d2ba453faf2a7a3ab1e8', 'message': 'Fix container status on create\n\nCloses-Bug: #1838715\nChange-Id: Ia166d7d23e058810831dd05da65d812565833124\n'}, {'number': 5, 'created': '2019-08-09 03:54:53.000000000', 'files': ['zun/container/docker/driver.py'], 'web_link': 'https://opendev.org/openstack/zun/commit/e205780bb55397c8afa635a1e6396b86c87f125a', 'message': 'Fix container status on create\n\nCloses-Bug: #1838715\nChange-Id: Ia166d7d23e058810831dd05da65d812565833124\n'}]",2,673940,e205780bb55397c8afa635a1e6396b86c87f125a,16,3,5,11536,,,0,"Fix container status on create

Closes-Bug: #1838715
Change-Id: Ia166d7d23e058810831dd05da65d812565833124
",git fetch https://review.opendev.org/openstack/zun refs/changes/40/673940/5 && git format-patch -1 --stdout FETCH_HEAD,['zun/container/docker/driver.py'],1,e4d389fd7c228d59b1044d47b7434fb854904ead,bug/1838715," self._populate_container(container, response, task_owner=True) def _populate_container(self, container, response, task_owner=False): self._populate_container_state(container, state, task_owner) def _populate_container_state(self, container, state, task_owner): if not task_owner and container.task_state: self._populate_container(container, response, task_owner=True)"," self._populate_container(container, response) def _populate_container(self, container, response): self._populate_container_state(container, state) def _populate_container_state(self, container, state): if container.task_state: self._populate_container(container, response)",6,6
openstack%2Fwatcher~master~I70257dd5fb342a67a3ffda1055eddc54b8360ca3,openstack/watcher,master,I70257dd5fb342a67a3ffda1055eddc54b8360ca3,update node resource capacity for basic_consolidation,MERGED,2019-07-29 03:00:06.000000000,2019-08-12 02:15:58.000000000,2019-08-12 02:15:58.000000000,"[{'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}, {'_account_id': 29911}]","[{'number': 1, 'created': '2019-07-29 03:00:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/8013334e9d668a8c18ded2286de07942060a6114', 'message': 'update node resource capacity for basic_consolidation\n\nFor Compute node, when calculating resource(VCPU, memory and disk)\ncapacity, we need to consider reserved resource and allocation ratio.\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I70257dd5fb342a67a3ffda1055eddc54b8360ca3\n'}, {'number': 2, 'created': '2019-08-09 06:20:58.000000000', 'files': ['watcher/tests/decision_engine/model/data/scenario_8_with_4_nodes.xml', 'watcher/decision_engine/strategy/strategies/basic_consolidation.py', 'watcher/tests/decision_engine/model/data/scenario_3_with_2_nodes.xml'], 'web_link': 'https://opendev.org/openstack/watcher/commit/33d7de12efbed88f43f961406cd255f8713aa3b2', 'message': 'update node resource capacity for basic_consolidation\n\nFor Compute node, when calculating resource(VCPU, memory and disk)\ncapacity, we need to consider reserved resource and allocation ratio.\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e\nChange-Id: I70257dd5fb342a67a3ffda1055eddc54b8360ca3\n'}]",0,673195,33d7de12efbed88f43f961406cd255f8713aa3b2,10,4,2,21692,,,0,"update node resource capacity for basic_consolidation

For Compute node, when calculating resource(VCPU, memory and disk)
capacity, we need to consider reserved resource and allocation ratio.

Partially Implements: blueprint improve-compute-data-model
Depends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e
Change-Id: I70257dd5fb342a67a3ffda1055eddc54b8360ca3
",git fetch https://review.opendev.org/openstack/watcher refs/changes/95/673195/2 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/tests/decision_engine/model/data/scenario_8_with_4_nodes.xml', 'watcher/decision_engine/strategy/strategies/basic_consolidation.py', 'watcher/tests/decision_engine/model/data/scenario_3_with_2_nodes.xml']",3,8013334e9d668a8c18ded2286de07942060a6114,bp/improve-compute-data-model," <ComputeNode uuid=""fa69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""40"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode uuid=""af69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""40"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_reserved=""0"" memory_ratio=""1"">"," <ComputeNode uuid=""fa69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132""> <ComputeNode uuid=""af69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132"">",9,9
openstack%2Fwatcher~master~I9fe58603692a9850e86a2c36ad7a31c473070100,openstack/watcher,master,I9fe58603692a9850e86a2c36ad7a31c473070100,update workload_balance strategy,MERGED,2019-07-29 12:26:12.000000000,2019-08-12 02:15:57.000000000,2019-08-12 02:15:57.000000000,"[{'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}, {'_account_id': 29911}]","[{'number': 1, 'created': '2019-07-29 12:26:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/5e75141ac96ca79a7b70e439ca3718d64780a391', 'message': 'update workload_balance strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I9fe58603692a9850e86a2c36ad7a31c473070100\n'}, {'number': 2, 'created': '2019-08-09 06:31:23.000000000', 'files': ['watcher/tests/decision_engine/model/data/scenario_6_with_2_nodes.xml', 'watcher/decision_engine/strategy/strategies/workload_balance.py', 'watcher/tests/decision_engine/model/data/scenario_4_with_1_node_no_instance.xml'], 'web_link': 'https://opendev.org/openstack/watcher/commit/5a26ceb1b94eeafdffaba06703aaa857a981a4b1', 'message': 'update workload_balance strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e\nChange-Id: I9fe58603692a9850e86a2c36ad7a31c473070100\n'}]",0,673282,5a26ceb1b94eeafdffaba06703aaa857a981a4b1,10,4,2,21692,,,0,"update workload_balance strategy

For Compute node, we can use the new property to calculate
resource(VCPU, memory and disk).

Partially Implements: blueprint improve-compute-data-model
Depends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e
Change-Id: I9fe58603692a9850e86a2c36ad7a31c473070100
",git fetch https://review.opendev.org/openstack/watcher refs/changes/82/673282/1 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/tests/decision_engine/strategy/strategies/test_workload_balance.py', 'watcher/tests/decision_engine/model/data/scenario_6_with_2_nodes.xml', 'watcher/decision_engine/strategy/strategies/workload_balance.py', 'watcher/tests/decision_engine/model/data/scenario_4_with_1_node_no_instance.xml']",4,5e75141ac96ca79a7b70e439ca3718d64780a391,bp/improve-compute-data-model," <ComputeNode name="""" uuid=""Node_0"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""1"" vcpus_used=""0"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""1"" disk_gb_used=""0"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""1"" memory=""1"" memory_mb_used=""0"" memory_mb_reserved=""0"" memory_ratio=""1""/>"," <ComputeNode name="""" uuid=""Node_0"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""1"" disk=""1"" disk_capacity=""1"" memory=""1""/>",6,30
openstack%2Fwatcher~master~I2bb230b5f5a573fb3045261dfdee73f1a8434e0d,openstack/watcher,master,I2bb230b5f5a573fb3045261dfdee73f1a8434e0d,update host_maintenance strategy,MERGED,2019-07-29 08:44:21.000000000,2019-08-12 02:10:17.000000000,2019-08-12 02:10:17.000000000,"[{'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}, {'_account_id': 29911}]","[{'number': 1, 'created': '2019-07-29 08:44:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/d41511d728045fc43068b2c9ca822f436aeded95', 'message': 'update host_maintenance strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I2bb230b5f5a573fb3045261dfdee73f1a8434e0d\n'}, {'number': 2, 'created': '2019-08-09 06:15:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/3200de31bf26f0ed48990ae132bbdced78e2219e', 'message': 'update host_maintenance strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e\nChange-Id: I2bb230b5f5a573fb3045261dfdee73f1a8434e0d\n'}, {'number': 3, 'created': '2019-08-09 06:16:23.000000000', 'files': ['watcher/decision_engine/strategy/strategies/host_maintenance.py', 'watcher/tests/decision_engine/model/faker_cluster_state.py', 'watcher/tests/decision_engine/model/data/scenario_1_with_all_nodes_disable.xml', 'watcher/tests/decision_engine/model/data/scenario_9_with_3_active_plus_1_disabled_nodes.xml', 'watcher/tests/decision_engine/model/data/scenario_1.xml'], 'web_link': 'https://opendev.org/openstack/watcher/commit/3bcd25727fe5ff9596c7902316e6b58570a57d60', 'message': 'update host_maintenance strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e\nChange-Id: I2bb230b5f5a573fb3045261dfdee73f1a8434e0d\n'}]",0,673232,3bcd25727fe5ff9596c7902316e6b58570a57d60,11,4,3,21692,,,0,"update host_maintenance strategy

For Compute node, we can use the new property to calculate
resource(VCPU, memory and disk).

Partially Implements: blueprint improve-compute-data-model
Depends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e
Change-Id: I2bb230b5f5a573fb3045261dfdee73f1a8434e0d
",git fetch https://review.opendev.org/openstack/watcher refs/changes/32/673232/3 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/decision_engine/strategy/strategies/host_maintenance.py', 'watcher/tests/decision_engine/model/faker_cluster_state.py', 'watcher/tests/decision_engine/model/data/scenario_1_with_all_nodes_disable.xml', 'watcher/tests/decision_engine/model/data/scenario_9_with_3_active_plus_1_disabled_nodes.xml', 'watcher/tests/decision_engine/model/data/scenario_1.xml']",5,d41511d728045fc43068b2c9ca822f436aeded95,bp/improve-compute-data-model," <ComputeNode uuid=""Node_0"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""40"" vcpus_used=""20"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""40"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""4"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode uuid=""Node_1"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""40"" vcpus_used=""10"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""20"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""2"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode uuid=""Node_2"" status=""enabled"" state=""up"" id=""2"" hostname=""hostname_2"" vcpus=""40"" vcpus_used=""30"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""60"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""6"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode uuid=""Node_3"" status=""enabled"" state=""up"" id=""3"" hostname=""hostname_3"" vcpus=""40"" vcpus_used=""10"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""20"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""2"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode uuid=""Node_4"" status=""enabled"" state=""up"" id=""4"" hostname=""hostname_4"" vcpus=""40"" vcpus_used=""10"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""20"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""2"" memory_mb_reserved=""0"" memory_ratio=""1"">"," <ComputeNode uuid=""Node_0"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132""> <ComputeNode uuid=""Node_1"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132""> <ComputeNode uuid=""Node_2"" status=""enabled"" state=""up"" id=""2"" hostname=""hostname_2"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132""> <ComputeNode uuid=""Node_3"" status=""enabled"" state=""up"" id=""3"" hostname=""hostname_3"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132""> <ComputeNode uuid=""Node_4"" status=""enabled"" state=""up"" id=""4"" hostname=""hostname_4"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132"">",41,30
openstack%2Fwatcher~master~I7872265b2378e5dc37aa2e086ff1f7fb9071db0b,openstack/watcher,master,I7872265b2378e5dc37aa2e086ff1f7fb9071db0b,update vm_workload_consolidation strategy,MERGED,2019-08-06 11:40:42.000000000,2019-08-12 02:10:16.000000000,2019-08-12 02:10:16.000000000,"[{'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}]","[{'number': 1, 'created': '2019-08-06 11:40:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/283238f45cca16b464d66a100929c2313891cd2a', 'message': 'update vm_workload_consolidation strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I7872265b2378e5dc37aa2e086ff1f7fb9071db0b\n'}, {'number': 2, 'created': '2019-08-08 08:41:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/3a7682c5472344ec2dd67cf1cb5f09b4d679128d', 'message': 'update vm_workload_consolidation strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I7872265b2378e5dc37aa2e086ff1f7fb9071db0b\n'}, {'number': 3, 'created': '2019-08-09 03:03:47.000000000', 'files': ['watcher/decision_engine/strategy/strategies/vm_workload_consolidation.py', 'watcher/tests/decision_engine/model/data/scenario_3_with_metrics.xml', 'watcher/tests/decision_engine/model/data/scenario_2_with_metrics.xml', 'watcher/tests/decision_engine/model/data/scenario_1_with_metrics.xml'], 'web_link': 'https://opendev.org/openstack/watcher/commit/7420915244651c2503dbc0ad7c626d1f99fa3088', 'message': 'update vm_workload_consolidation strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e\nChange-Id: I7872265b2378e5dc37aa2e086ff1f7fb9071db0b\n'}]",4,674783,7420915244651c2503dbc0ad7c626d1f99fa3088,14,3,3,21692,,,0,"update vm_workload_consolidation strategy

For Compute node, we can use the new property to calculate
resource(VCPU, memory and disk).

Partially Implements: blueprint improve-compute-data-model
Depends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e
Change-Id: I7872265b2378e5dc37aa2e086ff1f7fb9071db0b
",git fetch https://review.opendev.org/openstack/watcher refs/changes/83/674783/3 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/decision_engine/strategy/strategies/vm_workload_consolidation.py', 'watcher/tests/decision_engine/model/data/scenario_3_with_metrics.xml', 'watcher/tests/decision_engine/model/data/scenario_2_with_metrics.xml', 'watcher/tests/decision_engine/model/data/scenario_1_with_metrics.xml']",4,283238f45cca16b464d66a100929c2313891cd2a,bp/improve-compute-data-model," <ComputeNode hostname=""hostname_0"" uuid=""Node_0"" id=""0"" state=""up"" status=""enabled"" vcpus=""40"" vcpus_used=""10"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""20"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""64"" memory_mb_used=""2"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode hostname=""hostname_1"" uuid=""Node_1"" id=""1"" state=""up"" status=""enabled"" vcpus=""40"" vcpus_used=""10"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""20"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""64"" memory_mb_used=""2"" memory_mb_reserved=""0"" memory_ratio=""1"">"," <ComputeNode hostname=""hostname_0"" uuid=""Node_0"" id=""0"" state=""up"" status=""enabled"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""64""> <ComputeNode hostname=""hostname_1"" uuid=""Node_1"" id=""1"" state=""up"" status=""enabled"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""64"">",10,9
openstack%2Fwatcher~master~I19780be28912cb0ea1cad49c7c0f43ab3ba8f6e7,openstack/watcher,master,I19780be28912cb0ea1cad49c7c0f43ab3ba8f6e7,add releasenote for bp improve-compute-data-model,MERGED,2019-08-07 09:16:17.000000000,2019-08-12 02:10:15.000000000,2019-08-12 02:10:15.000000000,"[{'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}]","[{'number': 1, 'created': '2019-08-07 09:16:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/98b3e14ae29bfcf01520434569b3922cd0ee07d3', 'message': 'add releasenote for bp improve-compute-data-model\n\nChange-Id: I19780be28912cb0ea1cad49c7c0f43ab3ba8f6e7\nImplements: blueprint improve-compute-data-model\n'}, {'number': 2, 'created': '2019-08-08 07:21:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/02b0ac4b89dc51bff07e2966d47114cc360e65fd', 'message': 'add releasenote for bp improve-compute-data-model\n\nChange-Id: I19780be28912cb0ea1cad49c7c0f43ab3ba8f6e7\nImplements: blueprint improve-compute-data-model\n'}, {'number': 3, 'created': '2019-08-09 03:06:58.000000000', 'files': ['releasenotes/notes/improve-compute-data-model-b427c85e4ed2b6fb.yaml'], 'web_link': 'https://opendev.org/openstack/watcher/commit/4b2238f9a548f63ce7e8ce55e08d984c23bbd029', 'message': 'add releasenote for bp improve-compute-data-model\n\nChange-Id: I19780be28912cb0ea1cad49c7c0f43ab3ba8f6e7\nImplements: blueprint improve-compute-data-model\n'}]",7,675065,4b2238f9a548f63ce7e8ce55e08d984c23bbd029,14,3,3,21692,,,0,"add releasenote for bp improve-compute-data-model

Change-Id: I19780be28912cb0ea1cad49c7c0f43ab3ba8f6e7
Implements: blueprint improve-compute-data-model
",git fetch https://review.opendev.org/openstack/watcher refs/changes/65/675065/2 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/notes/improve-compute-data-model-b427c85e4ed2b6fb.yaml'],1,98b3e14ae29bfcf01520434569b3922cd0ee07d3,bp/improve-compute-data-model,"--- features: - | Watcher can get resource information such as total, allocation ratio and reserved information from Placement API. Now we add some new fields to the Watcher Data Model: * vcpus_used: the number of vcpu used in this node. * vcpu_reserved: The amount of cpu a node has reserved for its own use. * vcpu_ratio: CPU allocation ratio. * memory_mb_used: The memory used in this node(in MiB). * memory_mb_reserved: The amount of memory a node has reserved for its own use. * ram_ratio: Memory allocation ratio. * disk_gb_used: The disk used in this node(in GiB). * disk_gb_reserved: The amount of disk a node has reserved for its own use. * disk_ratio: Disk allocation ratio. We also add some new propeties: * vcpus_capacity: The amount of vcpu, take allocation ratio into account, but do not include reserved. * memory_mb_capacity: The amount of vcpu, take allocation ratio into account, but do not include reserved. * disk_gb_capacity: The amount of vcpu, take allocation ratio into account, but do not include reserved. * vcpus_free: The amount of vcpu that can be used for creating new server. * memory_mb_free: The amount of vcpu that can be used for creating new server. * disk_gb_free: The amount of vcpu that can be used for creating new server. ",,31,0
openstack%2Fwatcher~master~Id113b4c19792946329e9ff448bfe636cc8eca057,openstack/watcher,master,Id113b4c19792946329e9ff448bfe636cc8eca057,update outlet_temp_control strategy,MERGED,2019-08-07 03:29:22.000000000,2019-08-12 02:10:15.000000000,2019-08-12 02:10:14.000000000,"[{'_account_id': 17130}, {'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}]","[{'number': 1, 'created': '2019-08-07 03:29:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/083d69b6824d6fcff182da0bfe609eba1f2c515f', 'message': 'update outlet_temp_control strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: Id113b4c19792946329e9ff448bfe636cc8eca057\n'}, {'number': 2, 'created': '2019-08-09 03:19:33.000000000', 'files': ['watcher/decision_engine/strategy/strategies/outlet_temp_control.py', 'watcher/tests/decision_engine/model/data/scenario_3_with_2_nodes.xml'], 'web_link': 'https://opendev.org/openstack/watcher/commit/93b40e92620340b77a2e4e28446272af7c99819b', 'message': 'update outlet_temp_control strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e\nChange-Id: Id113b4c19792946329e9ff448bfe636cc8eca057\n'}]",0,675020,93b40e92620340b77a2e4e28446272af7c99819b,11,4,2,21692,,,0,"update outlet_temp_control strategy

For Compute node, we can use the new property to calculate
resource(VCPU, memory and disk).

Partially Implements: blueprint improve-compute-data-model
Depends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e
Change-Id: Id113b4c19792946329e9ff448bfe636cc8eca057
",git fetch https://review.opendev.org/openstack/watcher refs/changes/20/675020/2 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/decision_engine/strategy/strategies/outlet_temp_control.py', 'watcher/tests/decision_engine/strategy/strategies/test_outlet_temp_control.py', 'watcher/tests/decision_engine/model/data/scenario_3_with_2_nodes.xml']",3,083d69b6824d6fcff182da0bfe609eba1f2c515f,bp/improve-compute-data-model," <ComputeNode uuid=""fa69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""40"" vcpus_used=""10"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""20"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""2"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode uuid=""af69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""40"" vcpus_used=""10"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""20"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""2"" memory_mb_reserved=""0"" memory_ratio=""1"">"," <ComputeNode uuid=""fa69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132""> <ComputeNode uuid=""af69c544-906b-4a6a-a9c6-c1f7a8078c73"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""40"" disk=""250"" disk_capacity=""250"" memory=""132"">",5,28
openstack%2Fwatcher~master~I4f041ad25353d575c276fce87fe13c5e6705754f,openstack/watcher,master,I4f041ad25353d575c276fce87fe13c5e6705754f,update noisy_neighbor strategy,MERGED,2019-08-07 06:40:20.000000000,2019-08-12 02:07:04.000000000,2019-08-12 02:07:04.000000000,"[{'_account_id': 17130}, {'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}, {'_account_id': 29911}]","[{'number': 1, 'created': '2019-08-07 06:40:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/133b391d416286aac626e7511e628b70064e1c99', 'message': 'update noisy_neighbor strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I7de4f322d26e31c8d3eff5204f39d8dc4244b423\nChange-Id: I4f041ad25353d575c276fce87fe13c5e6705754f\n'}, {'number': 2, 'created': '2019-08-08 07:17:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher/commit/997889d08f915bf739ca18293c89aa53eb9ef2d6', 'message': 'update noisy_neighbor strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I7de4f322d26e31c8d3eff5204f39d8dc4244b423\nChange-Id: I4f041ad25353d575c276fce87fe13c5e6705754f\n'}, {'number': 3, 'created': '2019-08-09 03:35:06.000000000', 'files': ['watcher/tests/decision_engine/model/data/scenario_7_with_2_nodes.xml', 'watcher/decision_engine/strategy/strategies/noisy_neighbor.py'], 'web_link': 'https://opendev.org/openstack/watcher/commit/60ef87762605f252b2f988c9b0d7853e9832203f', 'message': 'update noisy_neighbor strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\nDepends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e\nChange-Id: I4f041ad25353d575c276fce87fe13c5e6705754f\n'}]",2,675035,60ef87762605f252b2f988c9b0d7853e9832203f,16,5,3,21692,,,0,"update noisy_neighbor strategy

For Compute node, we can use the new property to calculate
resource(VCPU, memory and disk).

Partially Implements: blueprint improve-compute-data-model
Depends-on: I3f9a3279a26f3df444117d9265e74cca57b38d6e
Change-Id: I4f041ad25353d575c276fce87fe13c5e6705754f
",git fetch https://review.opendev.org/openstack/watcher refs/changes/35/675035/2 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/tests/decision_engine/strategy/strategies/test_noisy_neighbor.py', 'watcher/decision_engine/strategy/strategies/noisy_neighbor.py']",2,133b391d416286aac626e7511e628b70064e1c99,bp/improve-compute-data-model, cores_available = host.vcpus_used disk_available = host.disk_gb_used mem_available = host.memory_mb_used," def calc_used_resource(self, node): """"""Calculate the used vcpus, memory and disk based on VM flavors"""""" instances = self.compute_model.get_node_instances(node) vcpus_used = 0 memory_mb_used = 0 disk_gb_used = 0 for instance in instances: vcpus_used += instance.vcpus memory_mb_used += instance.memory disk_gb_used += instance.disk return vcpus_used, memory_mb_used, disk_gb_used cores_used, mem_used, disk_used = self.calc_used_resource(host) cores_available = host.vcpus - cores_used disk_available = host.disk - disk_used mem_available = host.memory - mem_used",3,26
openstack%2Fwatcher~master~I3f9a3279a26f3df444117d9265e74cca57b38d6e,openstack/watcher,master,I3f9a3279a26f3df444117d9265e74cca57b38d6e,Remove resource used fields from ComputeNode,MERGED,2019-08-09 02:40:18.000000000,2019-08-12 02:07:03.000000000,2019-08-12 02:07:03.000000000,"[{'_account_id': 17130}, {'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}]","[{'number': 1, 'created': '2019-08-09 02:40:18.000000000', 'files': ['watcher/decision_engine/model/notification/nova.py', 'watcher/tests/decision_engine/cluster/test_nova_cdmc.py', 'watcher/decision_engine/model/element/node.py', 'watcher/decision_engine/model/collector/nova.py'], 'web_link': 'https://opendev.org/openstack/watcher/commit/4e4cfc959bdfb8bb4f40848167e710d5643f95fb', 'message': 'Remove resource used fields from ComputeNode\n\nThe node resource(vcpu, memory and disk) used infomation need\nto change when creating or deleting instances. Now Placement do\nnot send notifications, so there is not a good way to capture\nthe change. We remove these fields and leave the process to strategy.\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I3f9a3279a26f3df444117d9265e74cca57b38d6e\n'}]",0,675506,4e4cfc959bdfb8bb4f40848167e710d5643f95fb,8,4,1,21692,,,0,"Remove resource used fields from ComputeNode

The node resource(vcpu, memory and disk) used infomation need
to change when creating or deleting instances. Now Placement do
not send notifications, so there is not a good way to capture
the change. We remove these fields and leave the process to strategy.

Partially Implements: blueprint improve-compute-data-model

Change-Id: I3f9a3279a26f3df444117d9265e74cca57b38d6e
",git fetch https://review.opendev.org/openstack/watcher refs/changes/06/675506/1 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/decision_engine/model/notification/nova.py', 'watcher/tests/decision_engine/cluster/test_nova_cdmc.py', 'watcher/decision_engine/model/collector/nova.py', 'watcher/decision_engine/model/element/node.py']",4,4e4cfc959bdfb8bb4f40848167e710d5643f95fb,bp/improve-compute-data-model, def vcpu_capacity(self):," ""memory_mb_used"": wfields.NonNegativeIntegerField(), ""disk_gb_used"": wfields.NonNegativeIntegerField(), ""vcpus_used"": wfields.NonNegativeIntegerField(), def vcpus_capacity(self): @property def memory_mb_free(self): total = (self.memory-self.memory_mb_reserved)*self.memory_ratio return total-self.memory_mb_used @property def disk_gb_free(self): total = (self.disk-self.disk_gb_reserved)*self.disk_ratio return total-self.disk_gb_used @property def vcpus_free(self): total = (self.vcpus-self.vcpu_reserved)*self.vcpu_ratio return total-self.vcpus_used ",2,66
openstack%2Fwatcher-specs~master~I6d5da58272d33d6b867c2da3f709b1506401568f,openstack/watcher-specs,master,I6d5da58272d33d6b867c2da3f709b1506401568f,update improve-compute-data-model spec,MERGED,2019-08-07 09:31:39.000000000,2019-08-12 01:39:36.000000000,2019-08-12 01:39:35.000000000,"[{'_account_id': 17130}, {'_account_id': 21692}, {'_account_id': 22348}, {'_account_id': 28748}, {'_account_id': 29911}]","[{'number': 1, 'created': '2019-08-07 09:31:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher-specs/commit/f7e05b889f2bff5a560785d814764603c81e08ab', 'message': 'update improve-compute-data-model spec\n\nupdate some field names and add new property\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I6d5da58272d33d6b867c2da3f709b1506401568f\n'}, {'number': 2, 'created': '2019-08-08 07:23:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher-specs/commit/66a0dd1053f37569ee54982debbf099d742f62ba', 'message': 'update improve-compute-data-model spec\n\nupdate some field names and add new property\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I6d5da58272d33d6b867c2da3f709b1506401568f\n'}, {'number': 3, 'created': '2019-08-08 08:43:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher-specs/commit/49a502f73b16fb78fbb792fadcc5a71cd86f6533', 'message': 'update improve-compute-data-model spec\n\nupdate some field names and add new property\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I6d5da58272d33d6b867c2da3f709b1506401568f\n'}, {'number': 4, 'created': '2019-08-08 11:26:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/watcher-specs/commit/c03546cb50adb5bea950ddd944684d79cb3eab79', 'message': 'update improve-compute-data-model spec\n\nupdate some field names and add new property\nBecause resource usage is not stable field,\nso remove it from the Data Model.\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I6d5da58272d33d6b867c2da3f709b1506401568f\n'}, {'number': 5, 'created': '2019-08-09 01:33:13.000000000', 'files': ['specs/train/approved/improve-compute-data-model.rst'], 'web_link': 'https://opendev.org/openstack/watcher-specs/commit/26f3881d8f2e701713114b90028a91663d839abe', 'message': 'update improve-compute-data-model spec\n\nupdate some field names and add new property\nBecause resource usage is not stable field,\nso remove it from the Data Model.\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I6d5da58272d33d6b867c2da3f709b1506401568f\n'}]",8,675067,26f3881d8f2e701713114b90028a91663d839abe,21,5,5,21692,,,0,"update improve-compute-data-model spec

update some field names and add new property
Because resource usage is not stable field,
so remove it from the Data Model.

Partially Implements: blueprint improve-compute-data-model

Change-Id: I6d5da58272d33d6b867c2da3f709b1506401568f
",git fetch https://review.opendev.org/openstack/watcher-specs refs/changes/67/675067/4 && git format-patch -1 --stdout FETCH_HEAD,['specs/train/approved/improve-compute-data-model.rst'],1,f7e05b889f2bff5a560785d814764603c81e08ab,bp/improve-compute-data-model,"* vcpu_reserved: The amount of cpu a node has reserved for its own use. * vcpu_ratio: CPU allocation ratio.We also add some new propeties to the Watcher ComputeNode: * vcpus_capacity: The amount of vcpu, take allocation ratio into account, but do not include reserved. * memory_mb_capacity: The amount of vcpu, take allocation ratio into account, but do not include reserved. * disk_gb_capacity: The amount of vcpu, take allocation ratio into account, but do not include reserved. * vcpus_free: The amount of vcpu that can be used for creating new server. * memory_mb_free: The amount of vcpu that can be used for creating new server. * disk_gb_free: The amount of vcpu that can be used for creating new server. ",* cpu_reserved: The amount of cpu a node has reserved for its own use. * cpu_ratio: CPU allocation ratio.,14,2
openstack%2Fmanila~master~Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75,openstack/manila,master,Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75,Add Infortrend Manila Driver,MERGED,2019-05-08 10:48:43.000000000,2019-08-12 01:38:57.000000000,2019-08-08 14:04:34.000000000,"[{'_account_id': 9003}, {'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 14384}, {'_account_id': 14624}, {'_account_id': 15386}, {'_account_id': 15831}, {'_account_id': 16643}, {'_account_id': 18058}, {'_account_id': 20695}, {'_account_id': 21863}, {'_account_id': 21884}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 24236}, {'_account_id': 25243}, {'_account_id': 26968}, {'_account_id': 29311}, {'_account_id': 29632}, {'_account_id': 30398}]","[{'number': 1, 'created': '2019-05-08 10:48:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/dbd40f103b60200f8eb6f4b46d15d609f23fe1df', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 2, 'created': '2019-05-17 02:42:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/85588f9d9b2533dfdf91e90d5fc9a0150e05effe', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 3, 'created': '2019-05-31 06:19:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/d550febe7045207ecb44abfda22ffaa76ddc22fb', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 4, 'created': '2019-06-03 02:54:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/92c7899f32de09c3d81f2567c4379d751230015c', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 5, 'created': '2019-06-04 09:32:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/8751796f4d7c617c30c666f1345b9a63f628dbc2', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 6, 'created': '2019-06-11 06:57:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/77dce204aeda5379d5e38eff3d13e1c9847c4f23', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 7, 'created': '2019-06-11 10:41:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/6bf1f437be193eb01f25109cfadb7d7008c8d6e7', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 8, 'created': '2019-07-04 11:21:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/bda4d6340817133bbc3ffb7b1ed55740cb73907d', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 9, 'created': '2019-07-05 05:06:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/b3860e04b764a6eb0068d10cf2c5bbb5038154ac', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 10, 'created': '2019-07-05 13:11:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/a2f0bba08db6d0541dedd087b7b1df11c2a61c3e', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 11, 'created': '2019-07-11 10:50:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/10017574fc5c427776a4dcd673bbc5ef02ef08b1', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 12, 'created': '2019-07-12 08:55:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/20daf6bc9b0affa92892328f4e4b2986bf2ffad9', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 13, 'created': '2019-07-15 11:15:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/9098d1dcb4f918c0667cc120f8d1f3500bb1c713', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 14, 'created': '2019-07-16 02:42:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/944181098556d3f905227f490d8ece5d9457100a', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 15, 'created': '2019-07-17 08:03:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/ed264884311c83a2fa24f8004c2c5075a3e8e738', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 16, 'created': '2019-07-18 07:06:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/d374cef08dd6435eac8adf0990a4ee7719d1a29d', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 17, 'created': '2019-07-22 07:42:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/7e42277a3e6cb9111538cb43e7e10f2c506eaa97', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 18, 'created': '2019-07-24 03:38:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/f82c8dedfa7b99163b324961114d3d22cc5f4183', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 19, 'created': '2019-08-01 07:47:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/2fc78242a86a729e92ee79af453e45a8d0c2d3bf', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}, {'number': 20, 'created': '2019-08-02 09:59:03.000000000', 'files': ['manila/tests/conf_fixture.py', 'manila/tests/share/drivers/infortrend/test_infortrend_nas.py', 'manila/opts.py', 'manila/share/drivers/infortrend/driver.py', 'doc/source/admin/share_back_ends_feature_support_mapping.rst', 'manila/tests/share/drivers/infortrend/fake_infortrend_nas_data.py', 'manila/tests/share/drivers/infortrend/fake_infortrend_manila_data.py', 'manila/share/drivers/infortrend/infortrend_nas.py', 'manila/tests/share/drivers/infortrend/__init__.py', 'manila/exception.py', 'manila/share/drivers/infortrend/__init__.py', 'releasenotes/notes/infortrend-manila-driver-a1a2af20de6368cb.yaml'], 'web_link': 'https://opendev.org/openstack/manila/commit/266972ab91742c875362596afcef2ebb47f38189', 'message': 'Add Infortrend Manila Driver\n\nThis driver supports NFS and CIFS shares.\n\nThe following operations are supported:\n - Create a share.\n - Delete a share.\n - Allow share access.\n - Deny share access.\n - Manage a share.\n - Unmanage a share.\n - Extend a share.\n - Shrink a share.\n\nDocImpact\nImplements: blueprint infortrend-support-manila-driver\n\nChange-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75\n'}]",238,657775,266972ab91742c875362596afcef2ebb47f38189,295,20,20,29311,,,0,"Add Infortrend Manila Driver

This driver supports NFS and CIFS shares.

The following operations are supported:
 - Create a share.
 - Delete a share.
 - Allow share access.
 - Deny share access.
 - Manage a share.
 - Unmanage a share.
 - Extend a share.
 - Shrink a share.

DocImpact
Implements: blueprint infortrend-support-manila-driver

Change-Id: Ib1adbd8f7f55805387b126851dbb0ff50cfbcd75
",git fetch https://review.opendev.org/openstack/manila refs/changes/75/657775/20 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/share_back_ends_feature_support_mapping.rst', 'releasenotes/notes/bug-1818081-fix-inferred-script-name-in-case-of-proxy-urls-e33466af856708b4.yaml\t\t\t', 'manila/tests/share/drivers/infortrend/fake_infortrend_nas_data.py', 'manila/tests/share/drivers/infortrend/fake_infortrend_manila_data.py', 'manila/share/drivers/infortrend/infortrend_nas.py', 'manila/tests/share/drivers/infortrend/test_infortrend_nas.py', 'manila/tests/share/drivers/infortrend/__init__.py', 'manila/exception.py', 'manila/opts.py', 'manila/share/drivers/infortrend/__init__.py', 'manila/share/drivers/infortrend/driver.py']",11,dbd40f103b60200f8eb6f4b46d15d609f23fe1df,bp/infortrend-support-manila-driver,"# Copyright (c) 2017 Infortrend Technology, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from oslo_config import cfg from oslo_log import log from manila import exception from manila.i18n import _ from manila.share import driver from manila.share.drivers.infortrend import infortrend_nas LOG = log.getLogger(__name__) infortrend_nas_opts = [ cfg.StrOpt('infortrend_nas_ip', default=None, help='Infortrend nas ip. ' 'It is the ip for management.'), cfg.StrOpt('infortrend_nas_user', default='manila', help='User for the Infortrend NAS server.'), cfg.StrOpt('infortrend_nas_password', default=None, help='Password for the Infortrend NAS server. ' 'This is not necessary ' 'if infortrend_nas_ssh_key is set.'), cfg.StrOpt('infortrend_nas_ssh_key', default=None, help='SSH key for the Infortrend NAS server. ' 'This is not necessary ' 'if infortrend_nas_password is set.'), cfg.StrOpt('infortrend_share_pools', default=None, help='Infortrend nas pool name list. ' 'It is separated with comma.'), cfg.StrOpt('infortrend_share_channels', default=None, help='Infortrend channels for file service. ' 'It is separated with comma.'), cfg.IntOpt('infortrend_ssh_timeout', default=30, help='SSH timeout in seconds.'), ] CONF = cfg.CONF CONF.register_opts(infortrend_nas_opts) class InfortrendNASDriver(driver.ShareDriver): """"""Infortrend Share Driver for GS/GSe Family using NASCLI. Version history: 1.0.0 - Initial driver """""" VERSION = ""1.0.0"" PROTOCOL = ""NFS_CIFS"" def __init__(self, *args, **kwargs): super(InfortrendNASDriver, self).__init__(False, *args, **kwargs) self.configuration.append_config_values(infortrend_nas_opts) nas_ip = self.configuration.safe_get('infortrend_nas_ip') username = self.configuration.safe_get('infortrend_nas_user') password = self.configuration.safe_get('infortrend_nas_password') ssh_key = self.configuration.safe_get('infortrend_nas_ssh_key') timeout = self.configuration.safe_get('infortrend_ssh_timeout') self.backend_name = self.configuration.safe_get('share_backend_name') if not nas_ip: msg = _('The infortrend_nas_ip is not set.') raise exception.InvalidParameterValue(err=msg) if not (password or ssh_key): msg = _('Either infortrend_nas_password or infortrend_nas_ssh_key ' 'should be set.') raise exception.InvalidParameterValue(err=msg) pool_dict = self._init_pool_dict() channel_dict = self._init_channel_dict() self.ift_nas = infortrend_nas.InfortrendNAS(nas_ip, username, password, ssh_key, timeout, pool_dict, channel_dict) def _init_pool_dict(self): temp_pool_dict = {} pools_name = self.configuration.safe_get('infortrend_share_pools') if not pools_name: msg = _('The infortrend_share_pools is not set.') raise exception.InvalidParameterValue(err=msg) tmp_pool_list = pools_name.split(',') for pool in tmp_pool_list: temp_pool_dict[pool.strip()] = {} return temp_pool_dict def _init_channel_dict(self): temp_ch_dict = {} channels = self.configuration.safe_get('infortrend_share_channels') if not channels: msg = _('The infortrend_share_channels is not set.') raise exception.InvalidParameterValue(err=msg) tmp_ch_list = channels.split(',') for channel in tmp_ch_list: temp_ch_dict[channel.strip()] = '' return temp_ch_dict def do_setup(self, context): """"""Any initialization the share driver does while starting."""""" LOG.debug('Infortrend NAS do_setup start.') self.ift_nas.do_setup() def check_for_setup_error(self): """"""Check for setup error."""""" LOG.debug('Infortrend NAS check_for_setup_error start.') self.ift_nas.check_for_setup_error() def _update_share_stats(self): """"""Retrieve stats info from share group."""""" LOG.debug('Updating Infortrend backend [%s].', self.backend_name) data = dict(share_backend_name=self.backend_name, vendor_name='Infortrend', driver_version=self.VERSION, storage_protocol=self.PROTOCOL, total_capacity_gb=0.0, free_capacity_gb=0.0, reserved_percentage=0, pools=self.ift_nas.update_pools_stats()) LOG.debug('Infortrend pools status: %s', data['pools']) super(InfortrendNASDriver, self)._update_share_stats(data) def update_access(self, context, share, access_rules, add_rules, delete_rules, share_server=None): """"""Update access rules for given share. :param context: Current context :param share: Share model with share data. :param access_rules: All access rules for given share :param add_rules: Empty List or List of access rules which should be added. access_rules already contains these rules. :param delete_rules: Empty List or List of access rules which should be removed. access_rules doesn't contain these rules. :param share_server: Not used by this driver. :returns: None, or a dictionary of ``access_id``, ``access_key`` as key: value pairs for the rules added, where, ``access_id`` is the UUID (string) of the access rule, and ``access_key`` is the credential (string) of the entity granted access. During recovery after error, the returned dictionary must contain ``access_id``, ``access_key`` for all the rules that the driver is ordered to resync, i.e. rules in the ``access_rules`` parameter. """""" LOG.debug( 'Update access rules for share: %(share)s, ' 'access_rules: %(access_rules)s, ' 'add_rules: %(add_rules)s, ' 'delete_rules: %(delete_rules)s', { 'share': share['share_id'], 'access_rules': self._list_of_dict(access_rules), 'add_rules': self._list_of_dict(add_rules), 'delete_rules': self._list_of_dict(delete_rules), }) return self.ift_nas.update_access(share, access_rules, add_rules, delete_rules, share_server) def _list_of_dict(self, list_of_dict): temp_list = [] for data in list_of_dict: temp_dict = dict(data) temp_list.append(temp_dict) return temp_list def create_share(self, context, share, share_server=None): """"""Is called to create share."""""" LOG.info('share of driver(infortrend) is %s',share) LOG.debug('Creating share: %s.', share['share_id']) return self.ift_nas.create_share(share, share_server) def delete_share(self, context, share, share_server=None): """"""Is called to remove share."""""" LOG.debug('Deleting share: %s.', share['share_id']) return self.ift_nas.delete_share(share, share_server) def get_pool(self, share): """"""Return pool name where the share resides on. :param share: The share hosted by the driver. """""" return self.ift_nas.get_pool(share) def ensure_share(self, context, share, share_server=None): """"""Invoked to ensure that share is exported. Driver can use this method to update the list of export locations of the share if it changes. To do that, you should return list with export locations. :return None or list with export locations """""" return self.ift_nas.ensure_share(share, share_server) def allow_access(self, context, share, access, share_server=None): """"""Allow access to the share."""""" return self.ift_nas.allow_access(share, access, share_server) def deny_access(self, context, share, access, share_server=None): """"""Deny access to the share."""""" return self.ift_nas.deny_access(share, access, share_server) def manage_existing(self, share, driver_options): """"""Brings an existing share under Manila management. If the provided share is not valid, then raise a ManageInvalidShare exception, specifying a reason for the failure. If the provided share is not in a state that can be managed, such as being replicated on the backend, the driver *MUST* raise ManageInvalidShare exception with an appropriate message. The share has a share_type, and the driver can inspect that and compare against the properties of the referenced backend share. If they are incompatible, raise a ManageExistingShareTypeMismatch, specifying a reason for the failure. :param share: Share model :param driver_options: Driver-specific options provided by admin. :return: share_update dictionary with required key 'size', which should contain size of the share. """""" LOG.debug( 'Manage existing for share: %(share)s, ' 'driver_options: %(driver_options)s, ', { 'share': share['share_id'], 'driver_options': dict(driver_options), }) return self.ift_nas.manage_existing(share, driver_options) def unmanage(self, share): """"""Removes the specified share from Manila management. Does not delete the underlying backend share. For most drivers, this will not need to do anything. However, some drivers might use this call as an opportunity to clean up any Manila-specific configuration that they have associated with the backend share. If provided share cannot be unmanaged, then raise an UnmanageInvalidShare exception, specifying a reason for the failure. """""" LOG.debug( 'Unmanage share: %(share)s', { 'share': share['share_id'], }) return self.ift_nas.unmanage(share) def extend_share(self, share, new_size, share_server=None): """"""Extends size of existing share. :param share: Share model :param new_size: New size of share (new_size > share['size']) :param share_server: Optional -- Share server model """""" return self.ift_nas.extend_share(share, new_size, share_server) def shrink_share(self, share, new_size, share_server=None): """"""Shrinks size of existing share. If consumed space on share larger than new_size driver should raise ShareShrinkingPossibleDataLoss exception: raise ShareShrinkingPossibleDataLoss(share_id=share['id']) :param share: Share model :param new_size: New size of share (new_size < share['size']) :param share_server: Optional -- Share server model :raises ShareShrinkingPossibleDataLoss, NotImplementedError """""" return self.ift_nas.shrink_share(share, new_size, share_server) ",,2689,7
openstack%2Fadjutant~master~Ie2f26480857920163b5c6bb0686e648ddaefd9cb,openstack/adjutant,master,Ie2f26480857920163b5c6bb0686e648ddaefd9cb,Blacklist sphinx 2.1.0 (autodoc bug),ABANDONED,2019-07-31 08:37:08.000000000,2019-08-12 01:38:21.000000000,,"[{'_account_id': 6547}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-31 08:37:08.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/adjutant/commit/a2630f7048c22e1e30f34022337d48b6f084c900', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\n\nChange-Id: Ie2f26480857920163b5c6bb0686e648ddaefd9cb\n'}]",0,673758,a2630f7048c22e1e30f34022337d48b6f084c900,4,2,1,27822,,,0,"Blacklist sphinx 2.1.0 (autodoc bug)

See https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details

Change-Id: Ie2f26480857920163b5c6bb0686e648ddaefd9cb
",git fetch https://review.opendev.org/openstack/adjutant refs/changes/58/673758/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,a2630f7048c22e1e30f34022337d48b6f084c900,sphinx,"sphinx!=1.6.6,!=1.6.7,!=2.1.0,>=1.6.2;python_version>='3.4' # BSD reno>=2.11.3 # Apache-2.0 ","sphinx!=1.6.6,!=1.6.7,>=1.6.2;python_version>='3.4' # BSD reno>=2.11.3 # Apache-2.0",2,2
openstack%2Ftempest~master~I57094b027d3ac3b17b12a0f58080cdea1ebaecd6,openstack/tempest,master,I57094b027d3ac3b17b12a0f58080cdea1ebaecd6,add show version details api test for volume,ABANDONED,2019-08-08 11:50:26.000000000,2019-08-12 01:02:31.000000000,,"[{'_account_id': 17887}, {'_account_id': 20190}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 11:50:26.000000000', 'files': ['tempest/api/volume/test_versions.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/bc177838811084a310ea0baafabf23b0aa60fc6f', 'message': 'add show version details api test for volume\n\nfor v3 volume, add show version details api test in test_version.py\n\nChange-Id: I57094b027d3ac3b17b12a0f58080cdea1ebaecd6\n'}]",2,675305,bc177838811084a310ea0baafabf23b0aa60fc6f,5,3,1,30409,,,0,"add show version details api test for volume

for v3 volume, add show version details api test in test_version.py

Change-Id: I57094b027d3ac3b17b12a0f58080cdea1ebaecd6
",git fetch https://review.opendev.org/openstack/tempest refs/changes/05/675305/1 && git format-patch -1 --stdout FETCH_HEAD,['tempest/api/volume/test_versions.py'],1,bc177838811084a310ea0baafabf23b0aa60fc6f,, @decorators.idempotent_id('fb09b083-6604-450b-8039-ac045cd12f7d') @decorators.attr(type='smoke') def test_show_version(self): # NOTE: The version data is checked on service client side # with JSON-Schema validation. It is enough to just call # the API here. self.versions_client.show_version('v3/'),,8,0
openstack%2Ftripleo-quickstart~master~I4b51fac263e1334efdde7814c8f56f3c163f9ade,openstack/tripleo-quickstart,master,I4b51fac263e1334efdde7814c8f56f3c163f9ade,Remove 'change_when' when using include_role,MERGED,2019-08-11 17:42:50.000000000,2019-08-12 00:23:48.000000000,2019-08-12 00:23:48.000000000,"[{'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-11 17:42:50.000000000', 'files': ['roles/libvirt/setup/undercloud/tasks/inject_repos.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/236c35deb1bd87608e7bee01a8f4ebb1195532d7', 'message': ""Remove 'change_when' when using include_role\n\nThis combination is erroring with Ansible 2.8.\nThis patch removes the changed_when to see if the\ntask can work without it.\n\nChange-Id: I4b51fac263e1334efdde7814c8f56f3c163f9ade\nCloses-Bug: #1839776\n""}]",0,675790,236c35deb1bd87608e7bee01a8f4ebb1195532d7,9,5,1,9976,,,0,"Remove 'change_when' when using include_role

This combination is erroring with Ansible 2.8.
This patch removes the changed_when to see if the
task can work without it.

Change-Id: I4b51fac263e1334efdde7814c8f56f3c163f9ade
Closes-Bug: #1839776
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/90/675790/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/libvirt/setup/undercloud/tasks/inject_repos.yml'],1,236c35deb1bd87608e7bee01a8f4ebb1195532d7,bug/1839776,, changed_when: true,0,1
openstack%2Fpython-qinlingclient~master~I0c08c950ff60083962ea8945b529fffa9237e4d7,openstack/python-qinlingclient,master,I0c08c950ff60083962ea8945b529fffa9237e4d7,Improve function_alias integration,MERGED,2019-06-25 15:23:23.000000000,2019-08-11 23:17:05.000000000,2019-08-11 23:17:05.000000000,"[{'_account_id': 6732}, {'_account_id': 16006}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-06-25 15:23:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-qinlingclient/commit/e4738f6b452cf00f954673c9883be803d053b67c', 'message': 'WIP: Add --function-alias support\n\nChange-Id: I0c08c950ff60083962ea8945b529fffa9237e4d7\nStory: 2005913\nTask: 34173\n'}, {'number': 2, 'created': '2019-08-02 20:02:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-qinlingclient/commit/fa4b2f9001d03868ac9778b77024d9f7df4d297b', 'message': 'WIP: Add --function-alias support\n\nChange-Id: I0c08c950ff60083962ea8945b529fffa9237e4d7\nStory: 2005913\nTask: 34173\n'}, {'number': 3, 'created': '2019-08-05 17:49:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-qinlingclient/commit/d319538bf86dc95ecf4e663376d54826c4e86e23', 'message': 'WIP: Add --function-alias support\n\nThe --function-alias option needs to be available for:\n\n  - executions\n  - webhooks\n  - jobs (already done by https://review.opendev.org/#/c/671948)\n\nChange-Id: I0c08c950ff60083962ea8945b529fffa9237e4d7\nStory: 2005913\nTask: 34173\n'}, {'number': 4, 'created': '2019-08-05 18:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-qinlingclient/commit/38aee6283dc7567e8b3a1874f0a21020a441b793', 'message': 'WIP: Add --function-alias support\n\nThe --function-alias option needs to be available for:\n\n  - executions\n  - webhooks\n  - jobs (already done by https://review.opendev.org/#/c/671948)\n\nChange-Id: I0c08c950ff60083962ea8945b529fffa9237e4d7\nStory: 2005913\nTask: 34173\n'}, {'number': 5, 'created': '2019-08-05 20:59:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-qinlingclient/commit/4766a6df130f8bc7deafcdf224f5b0953efaed72', 'message': 'WIP: Add --function-alias support\n\nThe --function-alias option needs to be available for:\n\n  - executions\n  - webhooks\n  - jobs (already done by https://review.opendev.org/#/c/671948)\n\nChange-Id: I0c08c950ff60083962ea8945b529fffa9237e4d7\nStory: 2005913\nTask: 34173\n'}, {'number': 6, 'created': '2019-08-06 00:18:38.000000000', 'files': ['releasenotes/notes/add-support-function-alias-for-execution-and-webhook-8df54e2fe4a27779.yaml', 'qinlingclient/tests/unit/v1/test_function_execution.py', 'qinlingclient/osc/v1/webhook.py', 'qinlingclient/v1/function_execution.py', 'qinlingclient/v1/webhook.py', 'qinlingclient/osc/v1/base.py', 'qinlingclient/osc/v1/function_execution.py', 'qinlingclient/tests/unit/osc/v1/test_webhook.py', 'qinlingclient/tests/unit/osc/v1/test_function_execution.py', 'qinlingclient/tests/unit/osc/v1/fakes.py', 'qinlingclient/tests/unit/v1/test_webhook.py'], 'web_link': 'https://opendev.org/openstack/python-qinlingclient/commit/7e251a205233131131d06200a8cc76a510431ccc', 'message': 'Improve function_alias integration\n\nThe --function-alias option needs to be available for:\n\n  - executions\n  - webhooks\n  - jobs (already done by https://review.opendev.org/#/c/671948)\n\nChange-Id: I0c08c950ff60083962ea8945b529fffa9237e4d7\nStory: 2005913\nTask: 34173\n'}]",0,667385,7e251a205233131131d06200a8cc76a510431ccc,17,3,6,16006,,,0,"Improve function_alias integration

The --function-alias option needs to be available for:

  - executions
  - webhooks
  - jobs (already done by https://review.opendev.org/#/c/671948)

Change-Id: I0c08c950ff60083962ea8945b529fffa9237e4d7
Story: 2005913
Task: 34173
",git fetch https://review.opendev.org/openstack/python-qinlingclient refs/changes/85/667385/6 && git format-patch -1 --stdout FETCH_HEAD,"['qinlingclient/tests/unit/v1/test_function_execution.py', 'qinlingclient/v1/function_execution.py', 'qinlingclient/osc/v1/function_execution.py', 'qinlingclient/tests/unit/osc/v1/test_function_execution.py']",4,e4738f6b452cf00f954673c9883be803d053b67c,2005913/34173," data = (e.id, e.function_id, e.function_version, e.description, e.input, e.result, e.status, e.sync, function_alias = None 'function_alias': function_alias, arglist = ['--function', function_name, '--function-version', str(function_version),"," data = (e.id, e.function_id, e.function_version, e.description, e.input, e.result, e.status, e.sync, arglist = [function_name, '--function-version', str(function_version),",46,17
openstack%2Fqinling~master~I4f9a11daad8eaeabc16f008649c3184b987599c3,openstack/qinling,master,I4f9a11daad8eaeabc16f008649c3184b987599c3,Replace git.openstack.org URLs by opendev.org URLs,MERGED,2019-08-11 16:42:51.000000000,2019-08-11 22:18:26.000000000,2019-08-11 22:18:26.000000000,"[{'_account_id': 6732}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-11 16:42:51.000000000', 'files': ['doc/source/admin/install/install_ubuntu.rst', 'doc/source/contributor/development-environment-devstack.rst'], 'web_link': 'https://opendev.org/openstack/qinling/commit/33cd4863b7c80014a2e6816b4ec17f996bda54f7', 'message': 'Replace git.openstack.org URLs by opendev.org URLs\n\nChange-Id: I4f9a11daad8eaeabc16f008649c3184b987599c3\n'}]",0,675787,33cd4863b7c80014a2e6816b4ec17f996bda54f7,6,2,1,16006,,,0,"Replace git.openstack.org URLs by opendev.org URLs

Change-Id: I4f9a11daad8eaeabc16f008649c3184b987599c3
",git fetch https://review.opendev.org/openstack/qinling refs/changes/87/675787/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/install/install_ubuntu.rst', 'doc/source/contributor/development-environment-devstack.rst']",2,33cd4863b7c80014a2e6816b4ec17f996bda54f7,, enable_plugin qinling-dashboard https://opendev.org/openstack/qinling-dashboardmore detailed information about Qinling devstack installation. , enable_plugin qinling-dashboard https://git.openstack.org/openstack/qinling-dashboardmore detailed information about Qinling devstack installation.,3,3
openstack%2Fqinling~master~I17320a2a4f55cda8884de928c69ceba366c37f2e,openstack/qinling,master,I17320a2a4f55cda8884de928c69ceba366c37f2e,Improve function_alias integration,MERGED,2019-08-05 22:50:54.000000000,2019-08-11 22:18:23.000000000,2019-08-11 22:18:23.000000000,"[{'_account_id': 6732}, {'_account_id': 16006}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-05 22:50:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/51d35f7069c67a769f3e1b3be93e4a9ee5b64a06', 'message': 'WIP: Improve --function-alias support\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 2, 'created': '2019-08-05 23:22:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/91cb149ea331a80cc5c00419b919e663ce8f1582', 'message': 'WIP: Improve --function-alias support\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 3, 'created': '2019-08-06 00:17:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/aa01f0ada50e82404a5273432a8f6a451f35f9c0', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 4, 'created': '2019-08-06 00:20:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/b4666c3b9c753f1486b50cd30e2168b2bf8f22d7', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 5, 'created': '2019-08-06 13:28:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/e28e5a16662ce4f931b5262fc8756b0317098a57', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 6, 'created': '2019-08-07 13:41:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/a43f37f529c59f00b0be1d5a9ae5764728d35a96', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 7, 'created': '2019-08-07 14:09:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/ea81aeebfe5550892d0706086bbfd0065892ec81', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 8, 'created': '2019-08-07 14:41:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/8df8963feb4b9a2542b4778206e298b8486c524b', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 9, 'created': '2019-08-08 14:01:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/4bcb48337dc138dcb402a963745a369fd37bb945', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 10, 'created': '2019-08-09 11:36:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/qinling/commit/6c55b97e2a29ebfb4e1f37655a473bd98798cf5e', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}, {'number': 11, 'created': '2019-08-10 07:57:07.000000000', 'files': ['releasenotes/notes/add-support-function-alias-for-execution-and-webhook-cf786fc4c9efd0af.yaml', 'qinling/tests/unit/api/controllers/v1/test_execution.py', 'qinling/tests/unit/base.py', 'qinling/utils/executions.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/008_function_alias_for_execution.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/011_function_id_for_webhook.py', 'qinling/tests/unit/api/controllers/v1/test_webhook.py', 'qinling/api/controllers/v1/webhook.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/010_function_id_for_execution.py', 'qinling/api/controllers/v1/resources.py', 'qinling/db/sqlalchemy/models.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/009_function_alias_for_webhook.py'], 'web_link': 'https://opendev.org/openstack/qinling/commit/9696b3428881679ae18d25657337e9d65576ae1b', 'message': 'Improve function_alias integration\n\nWhen creating webhook using function_alias, the function id\nand function version should be updated dynamically. For example,\na function alias A1 is created for function_1 and version 1,\na job is created using A1.\n\nWhen the user updates A1 with function 1 and version 2, the webhook\nshould pick up the new version automatically.\n\nFor function execution, the execution has to make sure if an alias\nis provided then the function id and the function version should be\nthe same as the one from the alias.\n\nChange-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e\nStory: 2006337\nTask: 36085\n'}]",9,674710,9696b3428881679ae18d25657337e9d65576ae1b,58,3,11,16006,,,0,"Improve function_alias integration

When creating webhook using function_alias, the function id
and function version should be updated dynamically. For example,
a function alias A1 is created for function_1 and version 1,
a job is created using A1.

When the user updates A1 with function 1 and version 2, the webhook
should pick up the new version automatically.

For function execution, the execution has to make sure if an alias
is provided then the function id and the function version should be
the same as the one from the alias.

Change-Id: I17320a2a4f55cda8884de928c69ceba366c37f2e
Story: 2006337
Task: 36085
",git fetch https://review.opendev.org/openstack/qinling refs/changes/10/674710/10 && git format-patch -1 --stdout FETCH_HEAD,"['qinling/api/controllers/v1/execution.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/010_function_id_for_execution.py', 'qinling/api/controllers/v1/resources.py', 'qinling/db/sqlalchemy/models.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/008_function_alias_for_execution.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/009_function_alias_for_webhook.py', 'qinling/db/sqlalchemy/migration/alembic_migrations/versions/011_function_id_for_webhook.py']",7,51d35f7069c67a769f3e1b3be93e4a9ee5b64a06,function-alias,"# Copyright 2019 - Ormuco Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. """"""Make function id nullable for webhooks table Revision ID: 011 Revises: 010 """""" revision = '011' down_revision = '010' from alembic import op import sqlalchemy as sa def upgrade(): op.alter_column( 'webhooks', 'function_id', existing_type=sa.String(length=36), nullable=True ) ",,153,3
openstack%2Fneutron~master~Ia8e922dfc8d80d1a07e291283f08bc537897d480,openstack/neutron,master,Ia8e922dfc8d80d1a07e291283f08bc537897d480,Skip failing migration test in midonet job,ABANDONED,2019-08-06 16:01:30.000000000,2019-08-11 20:41:13.000000000,,"[{'_account_id': 6854}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 26622}]","[{'number': 1, 'created': '2019-08-06 16:01:30.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/cceca7f669537c3914246957665b0a20df3b0ce0', 'message': 'Skip failing migration test in midonet job\n\nIn networking-midonet co-gating job we have 100% times failing\none test related to VM migrations.\nLets skip this test in our job until it will be fixed on\nmidonet side to make job green again.\n\nChange-Id: Ia8e922dfc8d80d1a07e291283f08bc537897d480\nRelated-Bug: #1839169\n'}]",1,674858,cceca7f669537c3914246957665b0a20df3b0ce0,8,6,1,11975,,,0,"Skip failing migration test in midonet job

In networking-midonet co-gating job we have 100% times failing
one test related to VM migrations.
Lets skip this test in our job until it will be fixed on
midonet side to make job green again.

Change-Id: Ia8e922dfc8d80d1a07e291283f08bc537897d480
Related-Bug: #1839169
",git fetch https://review.opendev.org/openstack/neutron refs/changes/58/674858/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,cceca7f669537c3914246957665b0a20df3b0ce0,bug/1839169," # TODO(slaweq): remove test_resize_server_revert_deleted_flavor # from the blacklist once bug # https://bugs.launchpad.net/networking-midonet/+bug/1839169 # will be fixed vars: tempest_black_regex: ""(^tempest.api.compute.admin.test_migrations.MigrationsAdminTest.test_resize_server_revert_deleted_flavor)""",,6,0
openstack%2Fopenstack-ansible~master~If21b919cfbf2dd306ae158ed9ead84da5cb338bc,openstack/openstack-ansible,master,If21b919cfbf2dd306ae158ed9ead84da5cb338bc,inventory: don't crash with missing global overrides,MERGED,2019-07-12 14:16:46.000000000,2019-08-11 20:05:00.000000000,2019-08-11 20:05:00.000000000,"[{'_account_id': 1004}, {'_account_id': 17068}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28471}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-07-12 14:16:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/c90927c26dcbf7f238b482eaad75fb4bbe225e0f', 'message': ""inventory: don't crash with missing global overrides\n\nChange-Id: If21b919cfbf2dd306ae158ed9ead84da5cb338bc\n""}, {'number': 2, 'created': '2019-07-29 15:07:50.000000000', 'files': ['osa_toolkit/generate.py'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/e9c9d92987425bc909d662e5e288b61226bb0674', 'message': ""inventory: don't crash with missing global overrides\n\nChange-Id: If21b919cfbf2dd306ae158ed9ead84da5cb338bc\n""}]",0,670569,e9c9d92987425bc909d662e5e288b61226bb0674,16,6,2,1004,,,0,"inventory: don't crash with missing global overrides

Change-Id: If21b919cfbf2dd306ae158ed9ead84da5cb338bc
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/69/670569/2 && git format-patch -1 --stdout FETCH_HEAD,['osa_toolkit/generate.py'],1,c90927c26dcbf7f238b482eaad75fb4bbe225e0f,," overrides = config.get('global_overrides', dict())", overrides = config['global_overrides'],1,1
openstack%2Fneutron~master~Ia3429c00397b7d18fac492cb2573cf2cb6569138,openstack/neutron,master,Ia3429c00397b7d18fac492cb2573cf2cb6569138,Removing invalid double asterics entry from the doc file doc/source/admin/fwaas.rst,MERGED,2019-08-10 22:27:41.000000000,2019-08-11 19:27:22.000000000,2019-08-11 19:27:22.000000000,"[{'_account_id': 11975}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 27654}]","[{'number': 1, 'created': '2019-08-10 22:27:41.000000000', 'files': ['doc/source/admin/fwaas.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/1f09cff08e8ca2e02b04e6ad4379bcd9a07f4b51', 'message': 'Removing invalid double asterics entry from the\ndoc file doc/source/admin/fwaas.rst\n\nChange-Id: Ia3429c00397b7d18fac492cb2573cf2cb6569138\nCloses-Bug: #1812225\n'}]",0,675743,1f09cff08e8ca2e02b04e6ad4379bcd9a07f4b51,10,6,1,26916,,,0,"Removing invalid double asterics entry from the
doc file doc/source/admin/fwaas.rst

Change-Id: Ia3429c00397b7d18fac492cb2573cf2cb6569138
Closes-Bug: #1812225
",git fetch https://review.opendev.org/openstack/neutron refs/changes/43/675743/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/fwaas.rst'],1,1f09cff08e8ca2e02b04e6ad4379bcd9a07f4b51,bug/1812225,| Supports L2 firewalling (VM ports) | NO | NO |,| Supports L2 firewalling (VM ports) | NO | NO** |\*\* This feature is planned for Ocata. ,1,3
openstack%2Fhorizon~master~I6eb64af5ae1b112195712e07b09e427a541a0089,openstack/horizon,master,I6eb64af5ae1b112195712e07b09e427a541a0089,Add non-voting job with Python 3 + Django 2.2,MERGED,2019-07-24 12:28:48.000000000,2019-08-11 19:08:51.000000000,2019-08-11 19:08:51.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2019-07-24 12:28:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/a80dc619339a1956b0bd02fac8ca3f222e4f3547', 'message': 'Add non-voting job with Python 3 + Django 2.2\n\nChange-Id: I6eb64af5ae1b112195712e07b09e427a541a0089\n'}, {'number': 2, 'created': '2019-07-24 12:31:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/9143c7aa91171046423fe802b68043d97a0dddab', 'message': 'Add non-voting job with Python 3 + Django 2.2\n\nChange-Id: I6eb64af5ae1b112195712e07b09e427a541a0089\n'}, {'number': 3, 'created': '2019-07-24 12:35:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/e383b2132c011ac242248651003b4a15ac46adde', 'message': 'Add non-voting job with Python 3 + Django 2.2\n\nChange-Id: I6eb64af5ae1b112195712e07b09e427a541a0089\n'}, {'number': 4, 'created': '2019-07-24 12:36:13.000000000', 'files': ['.zuul.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/horizon/commit/d2ae6b105f0c6c3549447811951d71c5d4414255', 'message': 'Add non-voting job with Python 3 + Django 2.2\n\nChange-Id: I6eb64af5ae1b112195712e07b09e427a541a0089\n'}]",2,672512,d2ae6b105f0c6c3549447811951d71c5d4414255,23,4,4,1736,,,0,"Add non-voting job with Python 3 + Django 2.2

Change-Id: I6eb64af5ae1b112195712e07b09e427a541a0089
",git fetch https://review.opendev.org/openstack/horizon refs/changes/12/672512/4 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'tox.ini']",2,a80dc619339a1956b0bd02fac8ca3f222e4f3547,django-2.2-compat,[testenv:py3-dj22] basepython = python3 commands = pip install django>=2.2<2.3 {[unit_tests]commands} ignore = D000 ,ignore = D000,17,1
openstack%2Fopenstack-ansible~master~I8ee511820f82e1e4d4437af409dfbacd8bc372a2,openstack/openstack-ansible,master,I8ee511820f82e1e4d4437af409dfbacd8bc372a2,powervm: drop un-used vars,MERGED,2019-08-07 17:06:35.000000000,2019-08-11 17:20:32.000000000,2019-08-11 17:20:32.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-07 17:06:35.000000000', 'files': ['inventory/env.d/nova.yml', 'playbooks/defaults/repo_packages/openstack_services.yml', 'tests/test_inventory.py', 'inventory/group_vars/powervm-compute_hosts.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/42ed00dfcb3428e1f2753392db6a054f036cbc86', 'message': 'powervm: drop un-used vars\n\nThe support has been removed from the role a while back, this just\nremoves the extra cruft\n\nChange-Id: I8ee511820f82e1e4d4437af409dfbacd8bc372a2\n'}]",0,675158,42ed00dfcb3428e1f2753392db6a054f036cbc86,9,3,1,1004,,,0,"powervm: drop un-used vars

The support has been removed from the role a while back, this just
removes the extra cruft

Change-Id: I8ee511820f82e1e4d4437af409dfbacd8bc372a2
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/58/675158/1 && git format-patch -1 --stdout FETCH_HEAD,"['inventory/env.d/nova.yml', 'playbooks/defaults/repo_packages/openstack_services.yml', 'tests/test_inventory.py', 'inventory/group_vars/powervm-compute_hosts.yml']",4,42ed00dfcb3428e1f2753392db6a054f036cbc86,,,"--- # Copyright 2017, Logan Vig <logan2211@gmail.com> # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. nova_virt_type: powervm ",1,33
openstack%2Fopenstack-ansible~master~I73e425f441788f4d30509946965e6f3cae0ed8c6,openstack/openstack-ansible,master,I73e425f441788f4d30509946965e6f3cae0ed8c6,lxd: remove support,MERGED,2019-08-07 17:06:35.000000000,2019-08-11 17:12:52.000000000,2019-08-11 17:12:52.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-07 17:06:35.000000000', 'files': ['inventory/env.d/nova.yml', 'playbooks/defaults/repo_packages/openstack_services.yml', 'inventory/group_vars/lxd-compute_hosts.yml', 'etc/openstack_deploy/user_secrets.yml', 'tests/test_inventory.py'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/b5f07e6719f1b5386d361bd1e5cb96543d6fe060', 'message': ""lxd: remove support\n\nThe nova-lxd driver has been retired and therefore all lxd\njobs will be failing on the next bump, let's remove support\nwith this patch.\n\nChange-Id: I73e425f441788f4d30509946965e6f3cae0ed8c6\n""}]",0,675157,b5f07e6719f1b5386d361bd1e5cb96543d6fe060,10,3,1,1004,,,0,"lxd: remove support

The nova-lxd driver has been retired and therefore all lxd
jobs will be failing on the next bump, let's remove support
with this patch.

Change-Id: I73e425f441788f4d30509946965e6f3cae0ed8c6
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/57/675157/1 && git format-patch -1 --stdout FETCH_HEAD,"['inventory/env.d/nova.yml', 'playbooks/defaults/repo_packages/openstack_services.yml', 'inventory/group_vars/lxd-compute_hosts.yml', 'etc/openstack_deploy/user_secrets.yml', 'tests/test_inventory.py']",5,b5f07e6719f1b5386d361bd1e5cb96543d6fe060,,," 'lxd-compute_containers', 'lxd-compute_hosts',",0,35
openstack%2Fkolla-ansible~master~I229d32a4d10010692c7af9df485a3bddf0c15bb4,openstack/kolla-ansible,master,I229d32a4d10010692c7af9df485a3bddf0c15bb4,Bump the openstackdocstheme extension to 1.20,ABANDONED,2019-07-15 09:22:37.000000000,2019-08-11 15:07:02.000000000,,"[{'_account_id': 19779}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-15 09:22:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/0553903064ebf0d9cd7944dfafcd2305d9028954', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: I229d32a4d10010692c7af9df485a3bddf0c15bb4\n'}, {'number': 2, 'created': '2019-07-15 11:07:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c189fc75c877a1f85ca799e95fffb629ad2b4bfd', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: I229d32a4d10010692c7af9df485a3bddf0c15bb4\n'}, {'number': 3, 'created': '2019-07-21 12:48:22.000000000', 'files': ['doc/source/conf.py', 'lower-constraints.txt', 'doc/requirements.txt', 'deploy-guide/source/conf.py', 'releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/dd42837f34364c666db78fe3be7874af799c349a', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: I229d32a4d10010692c7af9df485a3bddf0c15bb4\n'}]",1,670798,dd42837f34364c666db78fe3be7874af799c349a,8,2,3,30356,,,0,"Bump the openstackdocstheme extension to 1.20

Some options are now automatically configured by the version 1.20:
- project
- html_last_updated_fmt
- latex_engine
- latex_elements
- version
- release.

Change-Id: I229d32a4d10010692c7af9df485a3bddf0c15bb4
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/98/670798/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/conf.py', 'lower-constraints.txt', 'doc/requirements.txt', 'deploy-guide/source/conf.py', 'releasenotes/source/conf.py']",5,0553903064ebf0d9cd7944dfafcd2305d9028954,,,"project = u'Kolla Release Notes'# Release notes do not need a version number in the title, they # cover multiple releases. # The short X.Y version. version = '' # The full version, including alpha/beta/rc tags. release = '' # If not '', a 'Last updated on:' timestamp is inserted at every page bottom, # using the given strftime format. html_last_updated_fmt = '%Y-%m-%d %H:%M' ",3,58
openstack%2Fkolla-ansible~master~I629b8ae261acd5fc5382e87fba26878483a6c857,openstack/kolla-ansible,master,I629b8ae261acd5fc5382e87fba26878483a6c857,Fix the genconfig subcommand failed when enable_ceph,ABANDONED,2019-07-03 02:08:09.000000000,2019-08-11 15:06:48.000000000,,"[{'_account_id': 14826}, {'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 28614}, {'_account_id': 30356}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-07-03 02:08:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/a47ff42625ff773792aabd05311e9803b6962cc8', 'message': 'Fix the genconfig subcommand failed\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 2, 'created': '2019-07-03 02:29:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/470c8726eb92aa4c09cec71ce27e7ddcdd5a5c0f', 'message': 'Fix the genconfig subcommand failed\n\n1. When run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n2. remove a unnecessary space.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 3, 'created': '2019-07-03 15:30:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/e4aa9cb4ec0d3f8f272d6a23eb41a3a6334290aa', 'message': 'Fix the genconfig subcommand failed\n\n1. When run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n2. remove a unnecessary space.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 4, 'created': '2019-07-04 02:08:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/74f8fb1240332bd2259103f9bf687e8ac0c0f8a9', 'message': 'Fix the genconfig subcommand failed\n\n1. When run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n2. remove a unnecessary space.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 5, 'created': '2019-07-04 02:15:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b51743f415e75161d8a570f79d575bf3597d5737', 'message': 'Fix the genconfig subcommand failed when enable_ceph\n\nWhen run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 6, 'created': '2019-07-04 05:16:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/e9539da575f2ab96071126bc21d8227fb1f256f4', 'message': 'Fix the genconfig subcommand failed when enable_ceph\n\nWhen run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 7, 'created': '2019-07-05 05:26:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/2675549d1365e3f209c2cb9d6e11fbed918f0a63', 'message': 'Fix the genconfig subcommand failed when enable_ceph\n\nWhen run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 8, 'created': '2019-07-05 05:29:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3abae7a9bdf6d6a4cd5b29f105406b0bbba6075a', 'message': 'Fix the genconfig subcommand failed when enable_ceph\n\nWhen run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}, {'number': 9, 'created': '2019-07-05 05:31:58.000000000', 'files': ['ansible/roles/gnocchi/tasks/ceph.yml', 'ansible/roles/manila/tasks/ceph.yml', 'ansible/roles/glance/tasks/ceph.yml', 'ansible/roles/cinder/tasks/ceph.yml', 'ansible/roles/nova/tasks/ceph.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/430852657d4983ee44d704f9bf376ba6e90a5c6f', 'message': 'Fix the genconfig subcommand failed when enable_ceph\n\nWhen run `kolla-ansible genconfig` to generage configs before\ndeploy, it will failed due to the ceph pool not exists. this PS\nto fix it.\n\nChange-Id: I629b8ae261acd5fc5382e87fba26878483a6c857\n'}]",10,668773,430852657d4983ee44d704f9bf376ba6e90a5c6f,27,6,9,30356,,,0,"Fix the genconfig subcommand failed when enable_ceph

When run `kolla-ansible genconfig` to generage configs before
deploy, it will failed due to the ceph pool not exists. this PS
to fix it.

Change-Id: I629b8ae261acd5fc5382e87fba26878483a6c857
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/73/668773/7 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/glance/tasks/config.yml', 'ansible/roles/manila/tasks/config.yml', 'ansible/roles/gnocchi/tasks/config.yml', 'ansible/roles/nova/tasks/config.yml', 'ansible/roles/cinder/tasks/config.yml']",5,a47ff42625ff773792aabd05311e9803b6962cc8,," - kolla_action != ""config"" - kolla_action != ""config""",,10,0
openstack%2Fkolla-ansible~stable%2Fstein~I74427ce9b937c42393d86574614603bd788606af,openstack/kolla-ansible,stable/stein,I74427ce9b937c42393d86574614603bd788606af,"Fix FWaaS service provider (v2, Stein issue)",MERGED,2019-08-09 14:26:33.000000000,2019-08-11 12:35:28.000000000,2019-08-11 12:35:27.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-09 14:26:33.000000000', 'files': ['ansible/roles/neutron/templates/fwaas_driver.ini.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/72c34b3efac8c680240d3ac35e897ffe4a7c5280', 'message': 'Fix FWaaS service provider (v2, Stein issue)\n\nBecause we merged both [1] and [2] in master,\nwe got broken FWaaS.\nThis patch unbreaks it and is required to backport\nto Stein due to [2] backport waiting for merge,\nwhile [1] is already backported.\n\n[1] https://review.opendev.org/661704\n[2] https://review.opendev.org/668406\n\nChange-Id: I74427ce9b937c42393d86574614603bd788606af\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n(cherry picked from commit 85a5fb55c4e8ec75987db2d7745439604c0301a7)\n'}]",0,675634,72c34b3efac8c680240d3ac35e897ffe4a7c5280,8,4,1,30491,,,0,"Fix FWaaS service provider (v2, Stein issue)

Because we merged both [1] and [2] in master,
we got broken FWaaS.
This patch unbreaks it and is required to backport
to Stein due to [2] backport waiting for merge,
while [1] is already backported.

[1] https://review.opendev.org/661704
[2] https://review.opendev.org/668406

Change-Id: I74427ce9b937c42393d86574614603bd788606af
Signed-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>
(cherry picked from commit 85a5fb55c4e8ec75987db2d7745439604c0301a7)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/34/675634/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/neutron/templates/fwaas_driver.ini.j2'],1,72c34b3efac8c680240d3ac35e897ffe4a7c5280,fix-fwaas-v2-stable/stein,,{% if neutron_fwaas_version == 'v1' %} service_provider = FIREWALL:Iptables:neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver:default {% elif neutron_fwaas_version == 'v2' %}{% endif %},0,4
openstack%2Ftripleo-heat-templates~master~Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f,openstack/tripleo-heat-templates,master,Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f,Stop services for unupgraded controllers,MERGED,2019-07-04 08:20:44.000000000,2019-08-11 12:15:06.000000000,2019-08-11 12:15:06.000000000,"[{'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 8042}, {'_account_id': 8297}, {'_account_id': 20775}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 26343}]","[{'number': 1, 'created': '2019-07-04 08:20:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f46548252aefc46f30a65f34fe9a530f6d268e70', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 2, 'created': '2019-07-04 14:20:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/589ab1f5f6d4035662ffa84436f6b496a67a6e4c', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 3, 'created': '2019-07-04 15:16:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a9e7cc0401a42602cfd8a5ab2de24baf29428933', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 4, 'created': '2019-07-04 15:21:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/156c84be509169f6b4420897f451183844d8a367', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 5, 'created': '2019-07-04 15:23:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6b81fa9a55d4a826e01b647147577065887211c6', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 6, 'created': '2019-07-05 08:20:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/cb3d94216fdf847510c3fd0d8853ec462ccb3650', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 7, 'created': '2019-07-05 13:40:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d668b733f39c9abb8064fd60a63da24b0c6065f5', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 8, 'created': '2019-07-08 09:25:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/08d1156fccc6c94d6f065e2be5a7699a0285ef1f', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 9, 'created': '2019-07-08 11:30:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b632c876320e04df71b5e49ad5fa41fb2c8a011c', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I3c0580893aed5bda46d9104ffcee0f00cbabd9ee\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 10, 'created': '2019-07-08 12:44:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/74714cf1a1aac3d571959fbe6de00b7a1b4fc726', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 11, 'created': '2019-07-08 15:58:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/caf2fc772ecf0221c97cde6e7744b6e0848e5bde', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 12, 'created': '2019-07-11 12:24:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7c1e2c73ac407b60beeaafc32fdae3e063f0e14c', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 13, 'created': '2019-07-11 13:19:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/0c415da00fc7a376d99c8c1613ab5e234f952448', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 14, 'created': '2019-07-12 11:26:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a38416399fbf6bf0435e2b2e80b60c099f510ba9', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 15, 'created': '2019-07-12 11:36:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/0eece8897a06ce8f88847e427bdfe4a3746447d4', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 16, 'created': '2019-07-15 15:10:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b4c3e578d0b01dda14239f81056c57ef65a32b1d', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 17, 'created': '2019-07-17 10:08:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8180f0060316c4b13f5e747fefd30169fb9dc197', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 18, 'created': '2019-08-05 20:46:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/2080ecae6d9c274cd39e41a767fecbcc305d8e9c', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 19, 'created': '2019-08-05 20:50:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f820b7d520af7fbe63146be3d8b65a848273ea08', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}, {'number': 20, 'created': '2019-08-07 17:23:14.000000000', 'files': ['deployment/nova/nova-vnc-proxy-container-puppet.yaml', 'deployment/nova/nova-metadata-container-puppet.yaml', 'deployment/gnocchi/gnocchi-metricd-container-puppet.yaml', 'deployment/horizon/horizon-container-puppet.yaml', 'deployment/ceilometer/ceilometer-agent-notification-container-puppet.yaml', 'deployment/cinder/cinder-api-container-puppet.yaml', 'deployment/ceilometer/ceilometer-agent-central-container-puppet.yaml', 'deployment/heat/heat-api-cfn-container-puppet.yaml', 'deployment/nova/nova-conductor-container-puppet.yaml', 'deployment/keystone/keystone-container-puppet.yaml', 'deployment/aodh/aodh-evaluator-container-puppet.yaml', 'deployment/cinder/cinder-scheduler-container-puppet.yaml', 'deployment/deprecated/panko/panko-api-container-puppet.yaml', 'deployment/heat/heat-engine-container-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/heat/heat-api-container-puppet.yaml', 'deployment/pacemaker/pacemaker-baremetal-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml', 'deployment/pacemaker/clustercheck-container-puppet.yaml', 'deployment/gnocchi/gnocchi-statsd-container-puppet.yaml', 'deployment/database/redis-container-puppet.yaml', 'deployment/nova/nova-api-container-puppet.yaml', 'deployment/glance/glance-api-container-puppet.yaml', 'deployment/aodh/aodh-notifier-container-puppet.yaml', 'deployment/aodh/aodh-listener-container-puppet.yaml', 'deployment/gnocchi/gnocchi-api-container-puppet.yaml', 'deployment/haproxy/haproxy-container-puppet.yaml', 'deployment/neutron/neutron-api-container-puppet.yaml', 'deployment/logrotate/logrotate-crond-container-puppet.yaml', 'deployment/aodh/aodh-api-container-puppet.yaml', 'deployment/memcached/memcached-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8529ce60da84d2aa1e1c9e6994303678261b09da', 'message': 'Stop services for unupgraded controllers\n\nBefore we start services on upgraded bootstrap\ncontroller (usually controller-0), we need to\nstop services on unupgraded controllers\n(usually controller-1 and controller-2).\n\nAlso we need to move the mysql data transfer\nto the step 2 as we need to first stop the\nservices.\n\nDepends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc\nChange-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f\n'}]",14,669095,8529ce60da84d2aa1e1c9e6994303678261b09da,87,8,20,20775,,,0,"Stop services for unupgraded controllers

Before we start services on upgraded bootstrap
controller (usually controller-0), we need to
stop services on unupgraded controllers
(usually controller-1 and controller-2).

Also we need to move the mysql data transfer
to the step 2 as we need to first stop the
services.

Depends-On: I4fcc0858cac8f59d797d62f6de18c02e4b1819dc
Change-Id: Ib4af5b4a92b3b516b8e2fc1ae12c8d5abe40327f
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/95/669095/20 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/nova/nova-vnc-proxy-container-puppet.yaml', 'deployment/nova/nova-metadata-container-puppet.yaml', 'deployment/gnocchi/gnocchi-metricd-container-puppet.yaml', 'deployment/horizon/horizon-container-puppet.yaml', 'deployment/ceilometer/ceilometer-agent-notification-container-puppet.yaml', 'deployment/cinder/cinder-api-container-puppet.yaml', 'deployment/ceilometer/ceilometer-agent-central-container-puppet.yaml', 'deployment/heat/heat-api-cfn-container-puppet.yaml', 'deployment/nova/nova-conductor-container-puppet.yaml', 'deployment/keystone/keystone-container-puppet.yaml', 'deployment/aodh/aodh-evaluator-container-puppet.yaml', 'deployment/neutron/neutron-dhcp-container-puppet.yaml', 'deployment/cinder/cinder-scheduler-container-puppet.yaml', 'deployment/iscsid/iscsid-container-puppet.yaml', 'deployment/swift/swift-storage-container-puppet.yaml', 'deployment/heat/heat-engine-container-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/heat/heat-api-container-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml', 'deployment/gnocchi/gnocchi-statsd-container-puppet.yaml', 'deployment/database/redis-container-puppet.yaml', 'deployment/neutron/neutron-l3-container-puppet.yaml', 'deployment/nova/nova-api-container-puppet.yaml', 'deployment/glance/glance-api-container-puppet.yaml', 'deployment/aodh/aodh-notifier-container-puppet.yaml', 'deployment/aodh/aodh-listener-container-puppet.yaml', 'deployment/neutron/neutron-ovs-agent-container-puppet.yaml', 'deployment/gnocchi/gnocchi-api-container-puppet.yaml', 'deployment/haproxy/haproxy-container-puppet.yaml', 'deployment/neutron/neutron-metadata-container-puppet.yaml', 'deployment/neutron/neutron-api-container-puppet.yaml', 'deployment/logrotate/logrotate-crond-container-puppet.yaml', 'deployment/aodh/aodh-api-container-puppet.yaml', 'deployment/memcached/memcached-container-puppet.yaml']",34,f46548252aefc46f30a65f34fe9a530f6d268e70,stop-pre-upgrade, external_upgrade_tasks: - when: - step|int == 1 tags: - never - system_upgrade_transfer_data - system_upgrade_stop_services block: - name: Stop memcached container import_role: name: tripleo-container-stop vars: container_cli: {get_param: ContainerCli} containers_to_stop: - memcached,,531,9
openstack%2Fnova~master~I5235751b1dbc77ecc919eec7f3e022cd70085051,openstack/nova,master,I5235751b1dbc77ecc919eec7f3e022cd70085051,vif: Resolve a TODO and update another,MERGED,2019-06-20 16:18:41.000000000,2019-08-11 12:13:05.000000000,2019-07-17 04:15:53.000000000,"[{'_account_id': 6962}, {'_account_id': 9008}, {'_account_id': 9708}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 11604}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-06-20 16:18:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7e07c40e5c63b48202781f42b643c1a5fd4bd8e6', 'message': ""vif: Resolve a TODO and update another\n\nOnce TODO noted that a block could be removed once we bump to libvirt\n1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one\nlooks like it should be resolved in 3.2.0 so the TODO is updated to\nhighlight this for future reviewers.\n\nChange-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 2, 'created': '2019-06-20 16:48:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6df58f3ab1635e2e2e1b7318a2f8387211738c9a', 'message': ""vif: Resolve a TODO and update another\n\nOnce TODO noted that a block could be removed once we bump to libvirt\n1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one\nlooks like it should be resolved in 3.2.0 so the TODO is updated to\nhighlight this for future reviewers.\n\nChange-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 3, 'created': '2019-06-21 10:05:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3d74b6436d00babe28ff4643779841276bf9c478', 'message': ""vif: Resolve a TODO and update another\n\nOnce TODO noted that a block could be removed once we bump to libvirt\n1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one\nlooks like it should be resolved in 3.2.0 so the TODO is updated to\nhighlight this for future reviewers.\n\nChange-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 4, 'created': '2019-06-21 10:48:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6f49d5c760cd8f0823874f0490e897dae57a2317', 'message': ""vif: Resolve a TODO and update another\n\nOnce TODO noted that a block could be removed once we bump to libvirt\n1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one\nlooks like it should be resolved in 3.2.0 so the TODO is updated to\nhighlight this for future reviewers.\n\nChange-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 5, 'created': '2019-06-21 11:05:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d2e899f5fcbd4de57e2f5813a922d815b31bd571', 'message': ""vif: Resolve a TODO and update another\n\nOnce TODO noted that a block could be removed once we bump to libvirt\n1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one\nlooks like it should be resolved in 3.2.0 so the TODO is updated to\nhighlight this for future reviewers.\n\nChange-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 6, 'created': '2019-07-10 15:19:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/fdfaf7791708152e2aeb0ed289f63a4aa08cfe85', 'message': ""vif: Resolve a TODO and update another\n\nOnce TODO noted that a block could be removed once we bump to libvirt\n1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one\nlooks like it should be resolved in 3.2.0 so the TODO is updated to\nhighlight this for future reviewers.\n\nChange-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 7, 'created': '2019-07-12 15:40:17.000000000', 'files': ['nova/virt/libvirt/vif.py', 'nova/tests/unit/virt/libvirt/test_vif.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3f56e44b843ab8c0ee017eb58a8d77679aeb7b3b', 'message': ""vif: Resolve a TODO and update another\n\nOnce TODO noted that a block could be removed once we bump to libvirt\n1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one\nlooks like it should be resolved in 3.2.0 so the TODO is updated to\nhighlight this for future reviewers.\n\nChange-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}]",2,666631,3f56e44b843ab8c0ee017eb58a8d77679aeb7b3b,77,17,7,15334,,,0,"vif: Resolve a TODO and update another

Once TODO noted that a block could be removed once we bump to libvirt
1.3.8 or greater. We require 3.0.0 now so that's resolved. Another one
looks like it should be resolved in 3.2.0 so the TODO is updated to
highlight this for future reviewers.

Change-Id: I5235751b1dbc77ecc919eec7f3e022cd70085051
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/31/666631/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/virt/libvirt/vif.py'],1,7e07c40e5c63b48202781f42b643c1a5fd4bd8e6,bug/1789074," # https://bugzilla.redhat.com/show_bug.cgi?id=1415609 and should be removed # once we bump the libvirt minimum to 3.2.0, as noted in # https://bugzilla.redhat.com/show_bug.cgi?id=1372944 if vif['vnic_type'] == network_model.VNIC_TYPE_DIRECT:"," # https://bugzilla.redhat.com/show_bug.cgi?id=1372944 # once resolved it will be removed # TODO(vladikr): This code can be removed once the minimum version of # Libvirt is incleased above 1.3.5, as vlan will be set by libvirt if vif['vnic_type'] == network_model.VNIC_TYPE_MACVTAP: set_vf_interface_vlan( vif['profile']['pci_slot'], mac_addr=vif['address'], vlan=vif['details'][network_model.VIF_DETAILS_VLAN]) elif vif['vnic_type'] == network_model.VNIC_TYPE_DIRECT:",4,11
openstack%2Fnova~master~If27814e0006a6c33ae6270dff626586c41eafcad,openstack/nova,master,If27814e0006a6c33ae6270dff626586c41eafcad,Don't mention CONF.api_database.connection in user-facing messages/docs,MERGED,2019-08-07 21:31:18.000000000,2019-08-11 12:09:45.000000000,2019-08-10 16:32:05.000000000,"[{'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-07 21:31:18.000000000', 'files': ['doc/source/cli/nova-manage.rst', 'nova/tests/unit/test_nova_manage.py', 'nova/cmd/manage.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/2c5134d5f388a81abca1b92b26a95ba1452a5afe', 'message': ""Don't mention CONF.api_database.connection in user-facing messages/docs\n\nCONF.api_database.connection is a variable in code, not something\nan operator needs to know what it means, so this changes that\nmention in the docs and error message for the nova-manage db\narchive_deleted_rows command.\n\nChange-Id: If27814e0006a6c33ae6270dff626586c41eafcad\nCloses-Bug: #1839391\n""}]",2,675205,2c5134d5f388a81abca1b92b26a95ba1452a5afe,73,15,1,6873,,,0,"Don't mention CONF.api_database.connection in user-facing messages/docs

CONF.api_database.connection is a variable in code, not something
an operator needs to know what it means, so this changes that
mention in the docs and error message for the nova-manage db
archive_deleted_rows command.

Change-Id: If27814e0006a6c33ae6270dff626586c41eafcad
Closes-Bug: #1839391
",git fetch https://review.opendev.org/openstack/nova refs/changes/05/675205/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/cli/nova-manage.rst', 'nova/tests/unit/test_nova_manage.py', 'nova/cmd/manage.py']",3,2c5134d5f388a81abca1b92b26a95ba1452a5afe,archive_deleted_rows, '[api_database]/connection is set and run this ', 'CONF.api_database.connection is set and run this ',3,3
openstack%2Fopenstack-ansible-os_nova~master~I9906ede54f6b41972a03bfa1d39ba5f99c6235ed,openstack/openstack-ansible-os_nova,master,I9906ede54f6b41972a03bfa1d39ba5f99c6235ed,Remove support for the nova-lxd driver,MERGED,2019-08-10 19:11:29.000000000,2019-08-11 11:20:25.000000000,2019-08-11 11:20:25.000000000,"[{'_account_id': 1004}, {'_account_id': 17799}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-10 19:11:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_nova/commit/3ddd83217420c2ee69706e4dd9e97d82980d22b1', 'message': 'Remove support for the nova-lxd driver\n\nThis driver has been retired [1] and tests are now failing becasue the\nnova-lxd repo master branch is now empty.\n\n[1] https://review.opendev.org/#/c/672283/\n\nChange-Id: I9906ede54f6b41972a03bfa1d39ba5f99c6235ed\n'}, {'number': 2, 'created': '2019-08-10 19:58:28.000000000', 'files': ['vars/source_install.yml', 'vars/distro_install.yml', 'vars/debian.yml', 'zuul.d/playbooks/pre-lxd.yml', 'tests/test.yml', 'zuul.d/playbooks/files/user_variables_lxd.yml', 'files/rootwrap.d/lxd.filters', 'defaults/main.yml', 'vars/main.yml', 'doc/source/index.rst', 'tests/test-create-zfs-dev.yml', 'templates/nova.conf.j2', 'vars/redhat-7.yml', 'zuul.d/project.yaml', 'tasks/drivers/lxd/nova_compute_lxd.yml', 'templates/lxd-init.sh.j2', 'tox.ini', 'zuul.d/jobs.yaml', 'releasenotes/notes/remove-lxd-driver-79969c0adc73115d.yaml', 'vars/suse.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_nova/commit/9376fd253d9856d416d1d46377fa1775cbae553a', 'message': 'Remove support for the nova-lxd driver\n\nThis driver has been retired [1] and tests are now failing becasue the\nnova-lxd repo master branch is now empty.\n\n[1] https://review.opendev.org/#/c/672283/\n\nChange-Id: I9906ede54f6b41972a03bfa1d39ba5f99c6235ed\n'}]",0,675741,9376fd253d9856d416d1d46377fa1775cbae553a,12,4,2,25023,,,0,"Remove support for the nova-lxd driver

This driver has been retired [1] and tests are now failing becasue the
nova-lxd repo master branch is now empty.

[1] https://review.opendev.org/#/c/672283/

Change-Id: I9906ede54f6b41972a03bfa1d39ba5f99c6235ed
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_nova refs/changes/41/675741/2 && git format-patch -1 --stdout FETCH_HEAD,"['vars/source_install.yml', 'vars/distro_install.yml', 'vars/debian.yml', 'zuul.d/playbooks/pre-lxd.yml', 'tests/test.yml', 'zuul.d/playbooks/files/user_variables_lxd.yml', 'files/rootwrap.d/lxd.filters', 'defaults/main.yml', 'vars/main.yml', 'doc/source/index.rst', 'tests/test-create-zfs-dev.yml', 'templates/nova.conf.j2', 'vars/redhat-7.yml', 'zuul.d/project.yaml', 'tasks/drivers/lxd/nova_compute_lxd.yml', 'templates/lxd-init.sh.j2', 'tox.ini', 'zuul.d/jobs.yaml', 'releasenotes/notes/remove-lxd-driver-79969c0adc73115d.yaml', 'vars/suse.yml']",20,3ddd83217420c2ee69706e4dd9e97d82980d22b1,,, lxd: []# TODO: add support for LXD on openSUSE at some point. nova_compute_lxd_distro_packages: [] ,19,308
openstack%2Fdragonflow~master~I022a79f2ef7544e31d285c9e496d702a682d7a94,openstack/dragonflow,master,I022a79f2ef7544e31d285c9e496d702a682d7a94,Fix failing test_create_delete_policy_rule test,ABANDONED,2019-08-11 10:43:39.000000000,2019-08-11 11:02:05.000000000,,[],"[{'number': 1, 'created': '2019-08-11 10:43:39.000000000', 'files': ['dragonflow/tests/unit/test_df_qos_driver.py'], 'web_link': 'https://opendev.org/openstack/dragonflow/commit/68cf7b6185c5b43eafc42a7b132a56537fe35e9e', 'message': 'Fix failing test_create_delete_policy_rule test\n\nChange-Id: I022a79f2ef7544e31d285c9e496d702a682d7a94\n'}]",0,675772,68cf7b6185c5b43eafc42a7b132a56537fe35e9e,2,0,1,17880,,,0,"Fix failing test_create_delete_policy_rule test

Change-Id: I022a79f2ef7544e31d285c9e496d702a682d7a94
",git fetch https://review.opendev.org/openstack/dragonflow refs/changes/72/675772/1 && git format-patch -1 --stdout FETCH_HEAD,['dragonflow/tests/unit/test_df_qos_driver.py'],1,68cf7b6185c5b43eafc42a7b132a56537fe35e9e,test_policy_rule_fix,," qos_rule_obj.pop('qos_policy_id', None)",0,1
openstack%2Fkolla-cli~master~Id8cb840651e4455064699a2a53943d364d9a7e82,openstack/kolla-cli,master,Id8cb840651e4455064699a2a53943d364d9a7e82,Move stop acton to kolla model from host,MERGED,2019-08-09 01:39:57.000000000,2019-08-11 10:49:00.000000000,2019-08-11 10:49:00.000000000,"[{'_account_id': 17130}, {'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 28743}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-08-09 01:39:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/e5e2ee07390759e337fdd40b811983d84a31a878', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 2, 'created': '2019-08-09 01:59:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/4e63f2c5bbf692c856c919f2865aa12f5eb6ea74', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 3, 'created': '2019-08-09 02:07:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/d96c005defa02b322e6a978642202d0d7be12c54', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 4, 'created': '2019-08-09 02:25:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/1f4b991108fb74f353ba2b6218890d286140905a', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 5, 'created': '2019-08-09 02:31:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/efa77f34ac5e97ad3da788765ce7aa97d10a5573', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 6, 'created': '2019-08-09 02:54:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/d009923eda4de7a9305357baea9c7741c012b3ab', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 7, 'created': '2019-08-09 03:20:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/7890480d244a64fdc34cbd23e074bad4c16093ae', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 8, 'created': '2019-08-09 06:06:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/724fb07ac8cc0cb0e762e46b3e3882fe4df6c768', 'message': '[WIP]Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 9, 'created': '2019-08-09 06:44:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/7a9d3de9e6c2b4a38d76c3607b6126c1ac0325eb', 'message': 'Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 10, 'created': '2019-08-09 14:43:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/2323f209240e82d9ea05bd6ddcb86df0c2c48df2', 'message': 'Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}, {'number': 11, 'created': '2019-08-09 16:12:40.000000000', 'files': ['kolla_cli/api/host.py', 'kolla_cli/common/ansible/actions.py', 'kolla_cli/tests/unit/test_stop_cmd.py', 'kolla_cli/api/control_plane.py', 'kolla_cli/commands/host.py', 'setup.cfg', 'kolla_cli/tests/functional/test_stop.py', 'kolla_cli/tests/unit/test_host_cmd.py', 'kolla_cli/commands/kolla_action.py'], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/1498b7eade7ef1667f2fab3a62b8f40de742864c', 'message': 'Move stop acton to kolla model from host\n\nChange-Id: Id8cb840651e4455064699a2a53943d364d9a7e82\n'}]",2,675502,1498b7eade7ef1667f2fab3a62b8f40de742864c,32,5,11,27781,,,0,"Move stop acton to kolla model from host

Change-Id: Id8cb840651e4455064699a2a53943d364d9a7e82
",git fetch https://review.opendev.org/openstack/kolla-cli refs/changes/02/675502/7 && git format-patch -1 --stdout FETCH_HEAD,"['kolla_cli/api/host.py', 'kolla_cli/commands/host.py', 'kolla_cli/commands/kolla_action.py']",3,e5e2ee07390759e337fdd40b811983d84a31a878,,"class Stop(Command): """"""Stop Kolla containers."""""" def get_parser(self, prog_name): parser = super(Reconfigure, self).get_parser(prog_name) return parser def take_action(self, parsed_args): try: verbose_level = self.app.options.verbose_level job = CLIENT.stop(verbose_level) status = job.wait() handers_action_result(job, status, verbose_level) except Exception: raise Exception(traceback.format_exc()) ",,16,58
openstack%2Fkolla-cli~master~Ib84a45116b0975b8866499ff30cd1499c309e6af,openstack/kolla-cli,master,Ib84a45116b0975b8866499ff30cd1499c309e6af,Add --hosts and --services support for reconfigure action,MERGED,2019-08-09 15:25:16.000000000,2019-08-11 10:47:13.000000000,2019-08-11 10:47:13.000000000,"[{'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 27781}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-08-09 15:25:16.000000000', 'files': ['kolla_cli/common/ansible/actions.py', 'kolla_cli/api/control_plane.py', 'kolla_cli/commands/kolla_action.py'], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/96f5956b3daada5e79130fc3a75a5a866e97aa54', 'message': 'Add --hosts and --services support for reconfigure action\n\nChange-Id: Ib84a45116b0975b8866499ff30cd1499c309e6af\n'}]",0,675643,96f5956b3daada5e79130fc3a75a5a866e97aa54,9,4,1,27781,,,0,"Add --hosts and --services support for reconfigure action

Change-Id: Ib84a45116b0975b8866499ff30cd1499c309e6af
",git fetch https://review.opendev.org/openstack/kolla-cli refs/changes/43/675643/1 && git format-patch -1 --stdout FETCH_HEAD,"['kolla_cli/common/ansible/actions.py', 'kolla_cli/api/control_plane.py', 'kolla_cli/commands/kolla_action.py']",3,96f5956b3daada5e79130fc3a75a5a866e97aa54,," parser.add_argument('--hosts', nargs='?', metavar='<host_list>', help=u._('Reconfigure host list')) parser.add_argument('--services', nargs='?', metavar='<service_list>', help=u._('Reconfigure service list')) hosts = [] services = [] if parsed_args.hosts: host_list = parsed_args.hosts.strip() hosts = host_list.split(',') if parsed_args.services: service_list = parsed_args.services.strip() services = service_list.split(',') job = CLIENT.reconfigure(verbose_level, hosts, services)", job = CLIENT.reconfigure(verbose_level),34,5
openstack%2Fkeystone~master~Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620,openstack/keystone,master,Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620,Suppress policy deprecation warnings in unit tests,MERGED,2019-08-01 01:29:43.000000000,2019-08-11 10:18:08.000000000,2019-08-11 10:18:08.000000000,"[{'_account_id': 2903}, {'_account_id': 8482}, {'_account_id': 8556}, {'_account_id': 13063}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 27621}]","[{'number': 1, 'created': '2019-08-01 01:29:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/a7ba10f4073f896c0ee7a449484fb03ae6731ce9', 'message': '(WIP) Test oslo.policy changes\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n'}, {'number': 2, 'created': '2019-08-01 01:34:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/090bd1a732688c2fad98f67484b5d7becf0dcfa8', 'message': '(WIP) Test oslo.policy changes\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n'}, {'number': 3, 'created': '2019-08-01 01:47:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/fc4628e9912987d62f143dbabf91375c12cc8fd2', 'message': '(WIP) Test oslo.policy changes\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n'}, {'number': 4, 'created': '2019-08-01 01:58:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/91c543092f82f53b1d34866e69fe592676eace28', 'message': '(WIP) Test oslo.policy changes\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n'}, {'number': 5, 'created': '2019-08-01 17:53:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/6e39693d335e328119f33065d8d72220151be3ef', 'message': '(WIP) Test oslo.policy changes\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n'}, {'number': 6, 'created': '2019-08-02 20:32:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/83aba353c17bbfb8df2162ba029ca3afa9730f0f', 'message': ""Ignore policy deprecation warnings in unit tests\n\nSince the WSGI app is reinitialized pretty much for every unit test, and\nwe have deprecated so many policies, we get hundreds of megabytes of\ndeprecation warnings in the unit test logs. This is unnecessary for unit\ntests, a noisy hindrance to developers, and causes a high failure rate\nin our CI due to the huge logs. This change fixes the issue for the unit\ntests by adding warnings filters for DeprecationWarnings and\nUserWarnings from oslo.policy and oslo.context.\n\nThis does not solve the issue that deployers see a lot of noise in their\nlogs. However, since production servers aren't reinitializing the WSGI\napp quite so often, it's a less severe issue.\n\nRelated-bug: #1836568\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\n""}, {'number': 7, 'created': '2019-08-05 19:13:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/d0e5b91e601e1762866220f32d5f1badd5f5f8ba', 'message': ""Suppress policy deprecation warnings in unit tests\n\nSince the WSGI app is reinitialized pretty much for every unit test, and\nwe have deprecated so many policies, we get hundreds of megabytes of\ndeprecation warnings in the unit test logs. This is unnecessary for unit\ntests, a noisy hindrance to developers, and causes a high failure rate\nin our CI due to the huge logs. This change fixes the issue for the unit\ntests by adding warnings filters for DeprecationWarnings and\nUserWarnings from oslo.policy and oslo.context.\n\nThis does not solve the issue that deployers see a lot of noise in their\nlogs. However, since production servers aren't reinitializing the WSGI\napp quite so often, it's a less severe issue.\n\nRelated-bug: #1836568\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n""}, {'number': 8, 'created': '2019-08-05 19:37:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/6b0fd7dcb346be3024ce8b8983f856ea3956bb59', 'message': ""Suppress policy deprecation warnings in unit tests\n\nSince the WSGI app is reinitialized pretty much for every unit test, and\nwe have deprecated so many policies, we get hundreds of megabytes of\ndeprecation warnings in the unit test logs. This is unnecessary for unit\ntests, a noisy hindrance to developers, and causes a high failure rate\nin our CI due to the huge logs. This change fixes the issue for the unit\ntests by adding warnings filters for DeprecationWarnings and\nUserWarnings from oslo.policy and oslo.context.\n\nThis does not solve the issue that deployers see a lot of noise in their\nlogs. However, since production servers aren't reinitializing the WSGI\napp quite so often, it's a less severe issue.\n\nRelated-bug: #1836568\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n""}, {'number': 9, 'created': '2019-08-05 21:22:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/6b5c14a0a287227955b3a36ac893485153d910ce', 'message': ""Suppress policy deprecation warnings in unit tests\n\nSince the WSGI app is reinitialized pretty much for every unit test, and\nwe have deprecated so many policies, we get hundreds of megabytes of\ndeprecation warnings in the unit test logs. This is unnecessary for unit\ntests, a noisy hindrance to developers, and causes a high failure rate\nin our CI due to the huge logs. This change fixes the issue for the unit\ntests by adding warnings filters for DeprecationWarnings and\nUserWarnings from oslo.policy and oslo.context.\n\nThis does not solve the issue that deployers see a lot of noise in their\nlogs. However, since production servers aren't reinitializing the WSGI\napp quite so often, it's a less severe issue.\n\nRelated-bug: #1836568\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n""}, {'number': 10, 'created': '2019-08-05 21:23:22.000000000', 'files': ['requirements.txt', 'keystone/tests/unit/ksfixtures/policy.py', 'lower-constraints.txt', 'keystone/common/rbac_enforcer/enforcer.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/e8151070c052c2a26037cdad3ad3330899ff334b', 'message': ""Suppress policy deprecation warnings in unit tests\n\nSince the WSGI app is reinitialized pretty much for every unit test, and\nwe have deprecated so many policies, we get hundreds of megabytes of\ndeprecation warnings in the unit test logs. This is unnecessary for unit\ntests, a noisy hindrance to developers, and causes a high failure rate\nin our CI due to the huge logs. This change fixes the issue for the unit\ntests by adding warnings filters for DeprecationWarnings and\nUserWarnings from oslo.policy and oslo.context.\n\nThis does not solve the issue that deployers see a lot of noise in their\nlogs. However, since production servers aren't reinitializing the WSGI\napp quite so often, it's a less severe issue.\n\nRelated-bug: #1836568\n\nChange-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620\nDepends-on: https://review.opendev.org/673932\n""}]",3,673933,e8151070c052c2a26037cdad3ad3330899ff334b,52,7,10,8482,,,0,"Suppress policy deprecation warnings in unit tests

Since the WSGI app is reinitialized pretty much for every unit test, and
we have deprecated so many policies, we get hundreds of megabytes of
deprecation warnings in the unit test logs. This is unnecessary for unit
tests, a noisy hindrance to developers, and causes a high failure rate
in our CI due to the huge logs. This change fixes the issue for the unit
tests by adding warnings filters for DeprecationWarnings and
UserWarnings from oslo.policy and oslo.context.

This does not solve the issue that deployers see a lot of noise in their
logs. However, since production servers aren't reinitializing the WSGI
app quite so often, it's a less severe issue.

Related-bug: #1836568

Change-Id: Iaa7eae03bde7ab43a8c5a5886686f834cf7ec620
Depends-on: https://review.opendev.org/673932
",git fetch https://review.opendev.org/openstack/keystone refs/changes/33/673933/10 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'keystone/tests/unit/ksfixtures/policy.py']",2,a7ba10f4073f896c0ee7a449484fb03ae6731ce9,policy-logs-patch5, #self.addCleanup(policy.reset), self.addCleanup(policy.reset),51,47
openstack%2Fnova~master~I511b4bb7f8f4823a45365723ee10247925fd8b12,openstack/nova,master,I511b4bb7f8f4823a45365723ee10247925fd8b12,Clean up docstrings for archive_deleted_rows,MERGED,2019-08-07 21:43:08.000000000,2019-08-11 10:11:40.000000000,2019-08-10 16:32:11.000000000,"[{'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-07 21:43:08.000000000', 'files': ['nova/db/api.py', 'nova/db/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4551a187e7e399568f2de648394ffcada9d80d3e', 'message': ""Clean up docstrings for archive_deleted_rows\n\nThe docstrings were missing descriptions of the parameters\n(it's weird that max_rows is a kwarg defaulting to None but\nit's clearly required so I've marked it as such) and the\nreturns was missing the 2nd item of the typle which is the\nlist of deleted instance UUIDs.\n\nChange-Id: I511b4bb7f8f4823a45365723ee10247925fd8b12\n""}]",8,675209,4551a187e7e399568f2de648394ffcada9d80d3e,41,14,1,6873,,,0,"Clean up docstrings for archive_deleted_rows

The docstrings were missing descriptions of the parameters
(it's weird that max_rows is a kwarg defaulting to None but
it's clearly required so I've marked it as such) and the
returns was missing the 2nd item of the typle which is the
list of deleted instance UUIDs.

Change-Id: I511b4bb7f8f4823a45365723ee10247925fd8b12
",git fetch https://review.opendev.org/openstack/nova refs/changes/09/675209/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/db/api.py', 'nova/db/sqlalchemy/api.py']",2,4551a187e7e399568f2de648394ffcada9d80d3e,archive_deleted_rows," :returns: 2-item tuple: - number of rows archived - list of UUIDs of instances that were archived :param max_rows: Maximum number of rows to archive (required) :param before: optional datetime which when specified filters the records to only archive those records deleted before the given date :returns: 2-item tuple: - dict that maps table name to number of rows archived from that table, for example:: { 'instances': 5, 'block_device_mapping': 5, 'pci_devices': 2, } - list of UUIDs of instances that were archived rows_archived, _deleted_instance_uuids = ( deleted_instance_uuids = _deleted_instance_uuids"," :returns: number of rows archived :returns: dict that maps table name to number of rows archived from that table, for example: :: { 'instances': 5, 'block_device_mapping': 5, 'pci_devices': 2, } rows_archived, deleted_instance_uuid = ( deleted_instance_uuids = deleted_instance_uuid",32,23
openstack%2Fnova~master~Id0c5bdf97504d24310eb7d1ca737e3547026edd5,openstack/nova,master,Id0c5bdf97504d24310eb7d1ca737e3547026edd5,Drop usage of lxml's deprecated getchildren() method,MERGED,2019-08-09 09:45:00.000000000,2019-08-11 10:04:59.000000000,2019-08-10 10:49:21.000000000,"[{'_account_id': 2394}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 11604}, {'_account_id': 14070}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-09 09:45:00.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/virt/libvirt/config.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/491d9c4c44779821b2afd460c77b625759a4b34b', 'message': ""Drop usage of lxml's deprecated getchildren() method\n\nThe getchildren() instance method of xml.etree.Element has been\ndeprecated since lxml 2.7:\n\nhttps://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.getchildren\n\nSince requirements.txt already requires lxml >= 3.4.1, we can safely\ndrop this in favour of the alternatives (using list(elem) or iteration\nor len(elem) as appropriate) which are much more pleasant to read.\n\nChange-Id: Id0c5bdf97504d24310eb7d1ca737e3547026edd5\n""}]",7,675566,491d9c4c44779821b2afd460c77b625759a4b34b,29,14,1,2394,,,0,"Drop usage of lxml's deprecated getchildren() method

The getchildren() instance method of xml.etree.Element has been
deprecated since lxml 2.7:

https://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.getchildren

Since requirements.txt already requires lxml >= 3.4.1, we can safely
drop this in favour of the alternatives (using list(elem) or iteration
or len(elem) as appropriate) which are much more pleasant to read.

Change-Id: Id0c5bdf97504d24310eb7d1ca737e3547026edd5
",git fetch https://review.opendev.org/openstack/nova refs/changes/66/675566/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/virt/libvirt/config.py']",2,491d9c4c44779821b2afd460c77b625759a4b34b,drop-lxml-getchildren, for c in xmldoc: for c in xmldoc: for c in xmldoc: xmlcells = xmldoc[0] for xmlcell in xmlcells: for c in xmldoc: for c2 in c: for c in xmldoc: for c in xmldoc: for ac in c: for dc in domxml: for c in xmldoc: for child in xmldoc: for child in xmldoc: for c in xmldoc: for sub in c: for c in xmldoc: for d in c: if len(c): for c in xmldoc: for sub in c: for c in xmldoc: for c in xmldoc: for c in xmldoc: for c in xmldoc: for sub in c: for sub in c: for sub in c: for sub in c: for sub in c: return list(xmldoc) for sub in c: for sub in c: for c in xmldoc: for c in xmldoc: if c.tag == 'devices': for d in c: for map in c: for p in c: for c in xmldoc: for c in xmldoc: for c in xmldoc: for c in xmldoc: for e in c: for c in xmldoc:, for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): xmlcells = xmldoc.getchildren()[0] for xmlcell in xmlcells.getchildren(): for c in xmldoc.getchildren(): for c2 in c.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for ac in c.getchildren(): for dc in domxml.getchildren(): for c in xmldoc.getchildren(): for child in xmldoc.getchildren(): for child in xmldoc.getchildren(): for c in xmldoc.getchildren(): for sub in c.getchildren(): for c in xmldoc.getchildren(): for d in c.getchildren(): if c.getchildren(): for c in xmldoc.getchildren(): for sub in c.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for sub in c.getchildren(): for sub in c.getchildren(): for sub in c.getchildren(): for sub in c.getchildren(): for sub in c.getchildren(): return xmldoc.getchildren() for sub in c.getchildren(): for sub in c.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): if c.tag == 'devices': for d in c.getchildren(): for map in c.getchildren(): for p in c.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for c in xmldoc.getchildren(): for e in c.getchildren(): for c in xmldoc.getchildren():,45,45
openstack%2Fnova~master~I670a559569f2da01027a6fb35a34b86f7053e718,openstack/nova,master,I670a559569f2da01027a6fb35a34b86f7053e718,Rename 'map' variable to avoid shadowing keywords,MERGED,2019-08-09 10:37:41.000000000,2019-08-11 09:16:31.000000000,2019-08-10 10:49:28.000000000,"[{'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 11604}, {'_account_id': 14070}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-09 10:37:41.000000000', 'files': ['nova/virt/libvirt/config.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/415be3ba9a1f8db8ff1a74d7031a77e47cd0112c', 'message': ""Rename 'map' variable to avoid shadowing keywords\n\nmap is a reserved keyword in Python, so it's bad style to use it\nas a variable.\n\nChange-Id: I670a559569f2da01027a6fb35a34b86f7053e718\n""}]",0,675578,415be3ba9a1f8db8ff1a74d7031a77e47cd0112c,27,13,1,2394,,,0,"Rename 'map' variable to avoid shadowing keywords

map is a reserved keyword in Python, so it's bad style to use it
as a variable.

Change-Id: I670a559569f2da01027a6fb35a34b86f7053e718
",git fetch https://review.opendev.org/openstack/nova refs/changes/78/675578/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/virt/libvirt/config.py'],1,415be3ba9a1f8db8ff1a74d7031a77e47cd0112c,unshadow-map, for idmap in c: if idmap.tag == 'uid': elif idmap.tag == 'gid': obj.parse_dom(idmap), for map in c: if map.tag == 'uid': elif map.tag == 'gid': obj.parse_dom(map),4,4
openstack%2Fnova~master~I9cfb9d0b20d4dfc18236a2d528a8f65534c9a263,openstack/nova,master,I9cfb9d0b20d4dfc18236a2d528a8f65534c9a263,Use :oslo.config:* in nova-manage doc,MERGED,2019-08-07 22:58:28.000000000,2019-08-11 08:51:23.000000000,2019-08-10 16:32:19.000000000,"[{'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-07 22:58:28.000000000', 'files': ['doc/source/cli/nova-manage.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/9ffdc0bcbc0b243ba6aeec2823e77c9885d6c634', 'message': ""Use :oslo.config:* in nova-manage doc\n\nFix up some sphinx-isms in nova-manage.rst:\n\n- Replace ``[group]/option`` with :oslo.config:option:`group.option`\n- Replace ``[group]`` with :oslo.config:group:`group`\n- Replace `default role used for italics` with *explicit italics*\n- Fix up a mention of [placement_database] -- for which we can't use\n  :oslo.config:* because that section doesn't exist anymore -- to\n  pertain only to Rocky & Stein, where it did exist.\n\nChange-Id: I9cfb9d0b20d4dfc18236a2d528a8f65534c9a263\n""}]",2,675224,9ffdc0bcbc0b243ba6aeec2823e77c9885d6c634,25,12,1,14070,,,0,"Use :oslo.config:* in nova-manage doc

Fix up some sphinx-isms in nova-manage.rst:

- Replace ``[group]/option`` with :oslo.config:option:`group.option`
- Replace ``[group]`` with :oslo.config:group:`group`
- Replace `default role used for italics` with *explicit italics*
- Fix up a mention of [placement_database] -- for which we can't use
  :oslo.config:* because that section doesn't exist anymore -- to
  pertain only to Rocky & Stein, where it did exist.

Change-Id: I9cfb9d0b20d4dfc18236a2d528a8f65534c9a263
",git fetch https://review.opendev.org/openstack/nova refs/changes/24/675224/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/cli/nova-manage.rst'],1,9ffdc0bcbc0b243ba6aeec2823e77c9885d6c634,archive_deleted_rows," determined by :oslo.config:option:`database.connection` in the configuration file passed to nova-manage. This command should be run after ``nova-manage api_db sync``. instance records are archived and thus, :oslo.config:option:`api_database.connection` is required in the config file. Specifying ``--verbose`` will print the results of the archive operation for any tables that were changed. Specifying ``--until-complete`` will make the command run continuously until all deleted rows are archived. Use the ``--max_rows`` option, which defaults to 1000, as a batch size for each iteration (note that the purged API database table records are not included in this batch size). Specifying ``--before`` will archive only instances that were deleted before the date_ provided, and records in other tables related to those instances. Specifying ``--purge`` will cause a *full* DB purge to be completed after archival. If a date range is desired for the purge, then run ``nova-manage db purge --before <date>`` manually after archiving is complete. while services are offline. This is *not recommended* for most determined by :oslo.config:option:`api_database.connection` in the configuration file passed to nova-manage. In the 18.0.0 Rocky or 19.0.0 Stein release, this command will also upgrade the optional placement database if ``[placement_database]/connection`` is specified, it will use the one defined by :oslo.config:option:`transport_url` :oslo.config:option:`database.connection` in the configuration file passed to nova-manage. The cell0 database is used for instances that have not been scheduled to any cell. This generally applies to instances that have encountered an error before they have been scheduled. Returns 0 if cell0 is created successfully or already setup. comes from the :oslo.config:option:`database.connection` defined in the configuration file passed to nova-manage. If a transport_url is not specified, it will use the one defined by :oslo.config:option:`transport_url` in the configuration file. This command is idempotent (can be run multiple times), and the verbose option will print out the resulting cell mapping uuid. Returns 0 on successful completion, and 1 if the transport url is missing or invalid. one defined by :oslo.config:option:`database.connection` in the configuration file passed to nova-manage. If a transport_url is not specified, it will use the one defined by :oslo.config:option:`transport_url` in the configuration file. The verbose option will print out the resulting cell mapping uuid. All the cells created are by default enabled. However passing the ``--disabled`` option defined by :oslo.config:option:`database.connection` in the configuration file. If a transport_url is not specified, it will attempt to use the one defined by :oslo.config:option:`transport_url` in the configuration file. The meaning of the various exit codes returned by this command are explained below: This command requires that the :oslo.config:option:`api_database.connection` and :oslo.config:group:`placement` configuration options are set. Placement API >= 1.28 is required. in the Placement service. Requires the :oslo.config:group:`api_database` and :oslo.config:group:`placement` sections of the nova configuration file to be populated."," determined by ``[database]/connection`` in the configuration file passed to nova-manage. This command should be run after ``nova-manage api_db sync``. instance records are archived and thus, ``[api_database]/connection`` is required in the config file. Specifying ``--verbose`` will print the results of the archive operation for any tables that were changed. Specifying ``--until-complete`` will make the command run continuously until all deleted rows are archived. Use the ``--max_rows`` option, which defaults to 1000, as a batch size for each iteration (note that the purged API database table records are not included in this batch size). Specifying ``--before`` will archive only instances that were deleted before the date_ provided, and records in other tables related to those instances. Specifying ``--purge`` will cause a `full` DB purge to be completed after archival. If a date range is desired for the purge, then run ``nova-manage db purge --before <date>`` manually after archiving is complete. while services are offline. This is `not recommended` for most determined by ``[api_database]/connection`` in the configuration file passed to nova-manage. Starting in the 18.0.0 Rocky release, this command will also upgrade the optional placement database if ``[placement_database]/connection`` is specified, it will use the one defined by ``[DEFAULT]/transport_url`` ``[database]/connection`` in the configuration file passed to nova-manage. The cell0 database is used for instances that have not been scheduled to any cell. This generally applies to instances that have encountered an error before they have been scheduled. Returns 0 if cell0 is created successfully or already setup. comes from the ``[database]/connection`` defined in the configuration file passed to nova-manage. If a transport_url is not specified, it will use the one defined by ``[DEFAULT]/transport_url`` in the configuration file. This command is idempotent (can be run multiple times), and the verbose option will print out the resulting cell mapping uuid. Returns 0 on successful completion, and 1 if the transport url is missing or invalid. one defined by ``[database]/connection`` in the configuration file passed to nova-manage. If a transport_url is not specified, it will use the one defined by ``[DEFAULT]/transport_url`` in the configuration file. The verbose option will print out the resulting cell mapping uuid. All the cells created are by default enabled. However passing the ``--disabled`` option defined by ``[database]/connection`` in the configuration file. If a transport_url is not specified, it will attempt to use the one defined by ``[DEFAULT]/transport_url`` in the configuration file. The meaning of the various exit codes returned by this command are explained below: This command requires that the ``[api_database]/connection`` and ``[placement]`` configuration options are set. Placement API >= 1.28 is required. in the Placement service. Requires the ``[api_database]`` and ``[placement]`` sections of the nova configuration file to be populated.",52,46
openstack%2Fkolla-ansible~master~I825431d41fbceb824baff27130d64dabe4475d33,openstack/kolla-ansible,master,I825431d41fbceb824baff27130d64dabe4475d33,Do not require EPEL repo on RHEL-based target hosts,MERGED,2019-08-01 19:16:39.000000000,2019-08-11 07:20:04.000000000,2019-08-10 00:33:53.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-01 19:16:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/8010034d1add72f7310d631bf3f78c30c0ef3f70', 'message': ""Get rid of EPEL repo on target hosts\n\nThis change makes kolla-ansible compatible with RHEL\nwhich does not provide epel-release package.\n\nEPEL was required to install simplejson from rpm\nwhich was an ansible requirement when used python\nversion is below 2.5 ([1]). This has been obsolete for\nquite a time so it's a good iead to get rid of it.\n\nThis change includes update of docs to read more properly.\n\n[1] https://docs.ansible.com/ansible/2.3/intro_installation.html\n\nChange-Id: I825431d41fbceb824baff27130d64dabe4475d33\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n""}, {'number': 2, 'created': '2019-08-01 19:17:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7ebef66e0510ef3908c5e1510f447776cd079f78', 'message': ""Get rid of EPEL repo on target hosts\n\nThis change makes kolla-ansible compatible with RHEL\nwhich does not provide epel-release package.\n\nEPEL was required to install simplejson from rpm\nwhich was an ansible requirement when used python\nversion is below 2.5 ([1]). This has been obsolete for\nquite a time so it's a good idea to get rid of it.\n\nThis change includes update of docs to read more properly.\n\n[1] https://docs.ansible.com/ansible/2.3/intro_installation.html\n\nChange-Id: I825431d41fbceb824baff27130d64dabe4475d33\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n""}, {'number': 3, 'created': '2019-08-01 19:32:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/45be057fd609e2b8d4fd1022d370d0e02576938f', 'message': ""Do not require EPEL repo on RHEL-based target hosts\n\nThis change makes kolla-ansible more compatible with\nRHEL which does not provide epel-release package.\n\nEPEL was required to install simplejson from rpm\nwhich was an ansible requirement when used python\nversion was below 2.5 ([1]). This has been obsolete for\nquite a time so it's a good idea to get rid of it.\n\nThis change includes update of docs to read more properly.\n\n[1] https://docs.ansible.com/ansible/2.3/intro_installation.html\n\nChange-Id: I825431d41fbceb824baff27130d64dabe4475d33\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n""}, {'number': 4, 'created': '2019-08-02 06:38:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c5f11f25a0e82f8f8c7d321b3035aa12187a7b12', 'message': ""Do not require EPEL repo on RHEL-based target hosts\n\nThis change makes kolla-ansible more compatible with\nRHEL which does not provide epel-release package.\n\nEPEL was required to install simplejson from rpm\nwhich was an ansible requirement when used python\nversion was below 2.5 ([1]). This has been obsolete for\nquite a time so it's a good idea to get rid of it.\n\nThis change includes update of docs to read more properly.\n\n[1] https://docs.ansible.com/ansible/2.3/intro_installation.html\n\nChange-Id: I825431d41fbceb824baff27130d64dabe4475d33\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n""}, {'number': 5, 'created': '2019-08-05 07:02:44.000000000', 'files': ['ansible/roles/baremetal/tasks/pre-install.yml', 'doc/source/user/quickstart.rst', 'releasenotes/notes/drop-epel-req-2f48edf20da1ef96.yaml', 'ansible/roles/baremetal/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/67cedb7ad569b19138f52fdfd353d4600bc4b2bb', 'message': ""Do not require EPEL repo on RHEL-based target hosts\n\nThis change makes kolla-ansible more compatible with\nRHEL which does not provide epel-release package.\n\nEPEL was required to install simplejson from rpm\nwhich was an ansible requirement when used python\nversion was below 2.5 ([1]). This has been obsolete for\nquite a time so it's a good idea to get rid of it.\n\nThis change includes update of docs to read more properly.\n\n[1] https://docs.ansible.com/ansible/2.3/intro_installation.html\n\nChange-Id: I825431d41fbceb824baff27130d64dabe4475d33\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n""}]",2,674114,67cedb7ad569b19138f52fdfd353d4600bc4b2bb,22,4,5,30491,,,0,"Do not require EPEL repo on RHEL-based target hosts

This change makes kolla-ansible more compatible with
RHEL which does not provide epel-release package.

EPEL was required to install simplejson from rpm
which was an ansible requirement when used python
version was below 2.5 ([1]). This has been obsolete for
quite a time so it's a good idea to get rid of it.

This change includes update of docs to read more properly.

[1] https://docs.ansible.com/ansible/2.3/intro_installation.html

Change-Id: I825431d41fbceb824baff27130d64dabe4475d33
Signed-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/14/674114/4 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/baremetal/tasks/pre-install.yml', 'doc/source/user/quickstart.rst', 'ansible/roles/baremetal/defaults/main.yml']",3,8010034d1add72f7310d631bf3f78c30c0ef3f70,drop-epel-req,, - epel-release,11,17
openstack%2Ftrove~master~I5d9def9bd2c2c428fbfa72820dd803017b20294e,openstack/trove,master,I5d9def9bd2c2c428fbfa72820dd803017b20294e,Cleanup devstack job,ABANDONED,2019-08-07 13:42:15.000000000,2019-08-11 06:06:13.000000000,,"[{'_account_id': 6547}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 13:42:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/45230254d2c46f69b4493dfe0bbaa08263265b83', 'message': ""Cleanup devstack job\n\nLet's handle permissions in the pre-run playbook and not in the run,\nthis is a cleaner approach.\n\nChange-Id: I5d9def9bd2c2c428fbfa72820dd803017b20294e\n""}, {'number': 2, 'created': '2019-08-07 15:09:34.000000000', 'files': ['roles/trove-devstack/tasks/main.yml', 'playbooks/pre-trove-devstack-base.yaml', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/trove/commit/4ee4a01a4e0dd9e1e41b5f9231de8cfc112f9e20', 'message': ""Cleanup devstack job\n\nLet's handle permissions in the pre-run playbook and not in the run,\nthis is a cleaner approach.\n\nChange-Id: I5d9def9bd2c2c428fbfa72820dd803017b20294e\n""}]",0,675122,4ee4a01a4e0dd9e1e41b5f9231de8cfc112f9e20,9,2,2,6547,,,0,"Cleanup devstack job

Let's handle permissions in the pre-run playbook and not in the run,
this is a cleaner approach.

Change-Id: I5d9def9bd2c2c428fbfa72820dd803017b20294e
",git fetch https://review.opendev.org/openstack/trove refs/changes/22/675122/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/trove-devstack/tasks/main.yml', 'playbooks/pre-trove-devstack-base.yaml', '.zuul.yaml']",3,45230254d2c46f69b4493dfe0bbaa08263265b83,stackuser, pre-run: playbooks/pre-trove-devstack-base.yaml,,11,10
openstack%2Fnetworking-ovn~master~If23d22d6ae5aa6a0e62bae12b2340f3c5c6d798e,openstack/networking-ovn,master,If23d22d6ae5aa6a0e62bae12b2340f3c5c6d798e,Enable live-migration tempest test for OVN,MERGED,2019-07-31 17:43:39.000000000,2019-08-11 02:23:35.000000000,2019-08-11 02:23:35.000000000,"[{'_account_id': 1653}, {'_account_id': 4694}, {'_account_id': 5367}, {'_account_id': 5756}, {'_account_id': 6773}, {'_account_id': 6854}, {'_account_id': 8655}, {'_account_id': 10237}, {'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 24791}]","[{'number': 1, 'created': '2019-07-31 17:43:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/e9b2eeb1f23c948eb47aecb4d0d33f15f1828dab', 'message': 'Enable live-migration tempest test for OVN\n\nChange-Id: If23d22d6ae5aa6a0e62bae12b2340f3c5c6d798e\nRelated-Bug: 1834045\n'}, {'number': 2, 'created': '2019-08-09 11:52:13.000000000', 'files': ['zuul.d/networking-ovn-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/6466771aec7c4171ff96f43cdb9a5a506a8e302b', 'message': 'Enable live-migration tempest test for OVN\n\nChange-Id: If23d22d6ae5aa6a0e62bae12b2340f3c5c6d798e\nRelated-Bug: 1834045\n'}]",0,673884,6466771aec7c4171ff96f43cdb9a5a506a8e302b,34,12,2,24791,,,0,"Enable live-migration tempest test for OVN

Change-Id: If23d22d6ae5aa6a0e62bae12b2340f3c5c6d798e
Related-Bug: 1834045
",git fetch https://review.opendev.org/openstack/networking-ovn refs/changes/84/673884/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/networking-ovn-jobs.yaml'],1,e9b2eeb1f23c948eb47aecb4d0d33f15f1828dab,," tempest_black_regex: ""(?:tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_port_security_macspoofing_port)"""," # TODO(slaweq): remove test_server_connectivity_live_migration test from # the blacklist when bug # https://bugzilla.redhat.com/show_bug.cgi?id=1716335 will be fixed tempest_black_regex: ""(?:tempest.scenario.test_network_basic_ops.TestNetworkBasicOps.test_port_security_macspoofing_port)|(?:tempest.scenario.test_network_advanced_server_ops.TestNetworkAdvancedServerOps.test_server_connectivity_live_migration)""",1,4
openstack%2Frequirements~master~I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05,openstack/requirements,master,I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05,Updated from generate-constraints,MERGED,2019-07-31 06:20:41.000000000,2019-08-11 01:47:40.000000000,2019-08-11 01:47:40.000000000,"[{'_account_id': 5196}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-31 06:20:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/493933a66602bd9a7f9a714d0b5c64c64d1bc99c', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 2, 'created': '2019-08-03 06:08:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/e8e7fb24d685c36b4e9d71be50df6be139a20c64', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 3, 'created': '2019-08-04 07:07:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/dff02703349861d601715ebc67503cb51c9157bf', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 4, 'created': '2019-08-06 06:15:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/78233aa58d4fc144c6b20b547682a2676c886b55', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 5, 'created': '2019-08-07 06:18:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/17bf97a7324c273d4bf1bf6d5079701400edcba1', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 6, 'created': '2019-08-07 20:52:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/b8153e9d0fe728557bf64c439de7d4f22ecb3920', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 7, 'created': '2019-08-07 23:33:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/531fd9e241d0d360fc7e8b0bc3f2e906a734ecc1', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 8, 'created': '2019-08-08 13:34:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/9952e37f53e92763474fe947d10271f973655f48', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 9, 'created': '2019-08-09 04:45:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/e920c2139e01fdbd96fa9f48d2bfc8cbd816ecd4', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}, {'number': 10, 'created': '2019-08-10 21:49:56.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/9056f0be86b18fe18972b109c09ae6db6c2a3d86', 'message': 'Updated from generate-constraints\n\nChange-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05\n'}]",0,673737,9056f0be86b18fe18972b109c09ae6db6c2a3d86,37,3,10,11131,,,0,"Updated from generate-constraints

Change-Id: I0ea2f8389b7de62076fb234a2cf2e72daf7e4b05
",git fetch https://review.opendev.org/openstack/requirements refs/changes/37/673737/2 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,493933a66602bd9a7f9a714d0b5c64c64d1bc99c,openstack/requirements/constraints/noclob,lxml===4.4.0pysnmp===4.4.10pyghmi===1.4.1arrow===0.14.4tornado===5.1.1;python_version=='2.7'ruamel.ordereddict===0.4.14;python_version=='2.7'trollius===2.2.post1;python_version=='2.7'coverage===4.5.4importlib-metadata===0.19docutils===0.15.2boto3===1.9.199packaging===19.1kubernetes===10.0.0 httplib2===0.13.1pyparsing===2.4.2botocore===1.12.199redis===3.3.4jsonpatch===1.24GitPython===2.1.13;python_version=='3.4' GitPython===2.1.13;python_version=='3.5' GitPython===2.1.13;python_version=='3.6' GitPython===2.1.13;python_version=='3.7'pymemcache===2.2.0pyrsistent===0.15.4storops===1.2.0jsonschema===3.0.1scikit-learn===0.21.3;python_version=='3.4' scikit-learn===0.21.3;python_version=='3.5' scikit-learn===0.21.3;python_version=='3.6' scikit-learn===0.21.3;python_version=='3.7',smmap===0.9.0;python_version=='3.4' smmap===0.9.0;python_version=='3.5' smmap===0.9.0;python_version=='3.6' smmap===0.9.0;python_version=='3.7'lxml===4.3.4pysnmp===4.4.9pyghmi===1.3.0arrow===0.14.2tornado===4.5.3;python_version=='2.7'ruamel.ordereddict===0.4.13;python_version=='2.7'trollius===2.2;python_version=='2.7'coverage===4.5.3importlib-metadata===0.18docutils===0.15.1;python_version=='2.7' docutils===0.15;python_version=='3.4' docutils===0.15;python_version=='3.5' docutils===0.15;python_version=='3.6' docutils===0.15;python_version=='3.7'boto3===1.9.191gitdb===0.6.4;python_version=='3.4' gitdb===0.6.4;python_version=='3.5' gitdb===0.6.4;python_version=='3.6' gitdb===0.6.4;python_version=='3.7'packaging===19.0kubernetes===9.0.0 httplib2===0.13.0pyparsing===2.4.1.1botocore===1.12.191redis===3.2.1jsonpatch===1.23GitPython===2.1.12;python_version=='3.4' GitPython===2.1.12;python_version=='3.5' GitPython===2.1.12;python_version=='3.6' GitPython===2.1.12;python_version=='3.7'pymemcache===2.1.1pyrsistent===0.15.3storops===1.1.0jsonschema===2.6.0scikit-learn===0.21.2;python_version=='3.4' scikit-learn===0.21.2;python_version=='3.5' scikit-learn===0.21.2;python_version=='3.6' scikit-learn===0.21.2;python_version=='3.7',30,42
openstack%2Fneutron~master~I024b8ef73be69af069e4516dc501df3f5c145419,openstack/neutron,master,I024b8ef73be69af069e4516dc501df3f5c145419,fix update neutron resource with incorrect body key server return 500,MERGED,2019-08-02 02:33:43.000000000,2019-08-11 01:20:25.000000000,2019-08-11 01:20:25.000000000,"[{'_account_id': 9531}, {'_account_id': 9732}, {'_account_id': 11975}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 17130}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 26458}, {'_account_id': 26622}, {'_account_id': 30380}]","[{'number': 1, 'created': '2019-08-02 02:33:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/dcddeeead8c6c04b1884010d0dd15522a5641cfe', 'message': 'fix update neutron resourc with incorrect body key server return 500\n\nIn current neutron, when I update resource with incorrect body, neutron\nserver return 500 NeutronError. it should be fixed 400(BadRequest)\nthis patch fixed it.\n\nChange-Id: I024b8ef73be69af069e4516dc501df3f5c145419\nPartial-bug: #1838587\n'}, {'number': 2, 'created': '2019-08-02 03:27:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/7e040d40996d8bc24aab07279246ec6ce7bbf531', 'message': 'fix update neutron resource with incorrect body key server return 500\n\nIn current neutron, when I update resource with incorrect body, neutron\nserver return 500 NeutronError. it should be fixed 400(BadRequest)\nthis patch fixed it.\n\nChange-Id: I024b8ef73be69af069e4516dc501df3f5c145419\nPartial-bug: #1838587\n'}, {'number': 3, 'created': '2019-08-05 06:07:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c7d2d67be2367d34e44a37df3503b2e4c95f3bff', 'message': 'fix update neutron resource with incorrect body key server return 500\n\nIn current neutron, when I update resource with incorrect body, neutron\nserver return 500 NeutronError. It should be fixed and BadRequest (400)\nshould be returned.\nThis patch fixed it.\n\nChange-Id: I024b8ef73be69af069e4516dc501df3f5c145419\nPartial-bug: #1838587\n'}, {'number': 4, 'created': '2019-08-07 00:20:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/44a03318dea8ac96e05db83b6e58b3e86dae7aa5', 'message': 'fix update neutron resource with incorrect body key server return 500\n\nIn current neutron, when I update resource with incorrect body, neutron\nserver return 500 NeutronError. It should be fixed and BadRequest (400)\nshould be returned.\nThis patch fixed it.\n\nChange-Id: I024b8ef73be69af069e4516dc501df3f5c145419\nPartial-bug: #1838587\n'}, {'number': 5, 'created': '2019-08-09 00:56:54.000000000', 'files': ['neutron/tests/unit/plugins/ml2/test_plugin.py', 'neutron/pecan_wsgi/controllers/resource.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/45612ca52f0a318d437904b1599095e971a831b9', 'message': 'fix update neutron resource with incorrect body key server return 500\n\nIn current neutron, when I update resource with incorrect body, neutron\nserver return 500 NeutronError. It should be fixed and BadRequest (400)\nshould be returned.\nThis patch fixed it.\n\nChange-Id: I024b8ef73be69af069e4516dc501df3f5c145419\nPartial-bug: #1838587\n'}]",12,674153,45612ca52f0a318d437904b1599095e971a831b9,70,11,5,30380,,,0,"fix update neutron resource with incorrect body key server return 500

In current neutron, when I update resource with incorrect body, neutron
server return 500 NeutronError. It should be fixed and BadRequest (400)
should be returned.
This patch fixed it.

Change-Id: I024b8ef73be69af069e4516dc501df3f5c145419
Partial-bug: #1838587
",git fetch https://review.opendev.org/openstack/neutron refs/changes/53/674153/4 && git format-patch -1 --stdout FETCH_HEAD,['neutron/pecan_wsgi/controllers/resource.py'],1,dcddeeead8c6c04b1884010d0dd15522a5641cfe,bug/1838587," if ""resources"" not in request.context: msg = _(""Resources to be updated should be included in "" ""request body."") raise webob.exc.HTTPBadRequest(msg)",,4,0
openstack%2Frequirements~master~Idf4d11a6a8128118796e652dc433ab93498457f5,openstack/requirements,master,Idf4d11a6a8128118796e652dc433ab93498457f5,update constraint for keystoneauth1 to new release 3.16.0,MERGED,2019-08-09 15:32:15.000000000,2019-08-11 00:58:54.000000000,2019-08-11 00:58:54.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 15:32:15.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/be6650995eb7a873a3c9102c31a303f03376006f', 'message': 'update constraint for keystoneauth1 to new release 3.16.0\n\nChange-Id: Idf4d11a6a8128118796e652dc433ab93498457f5\nmeta:version: 3.16.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Monty Taylor <mordred@inaugust.com>\nmeta:release:Commit: Monty Taylor <mordred@inaugust.com>\nmeta:release:Change-Id: I628159936211aaee956963e3fabf58351ca8fb9a\nmeta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>\nmeta:release:Code-Review+1: Morgan Fainberg <morgan.fainberg@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,675647,be6650995eb7a873a3c9102c31a303f03376006f,12,2,1,11131,,,0,"update constraint for keystoneauth1 to new release 3.16.0

Change-Id: Idf4d11a6a8128118796e652dc433ab93498457f5
meta:version: 3.16.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Monty Taylor <mordred@inaugust.com>
meta:release:Commit: Monty Taylor <mordred@inaugust.com>
meta:release:Change-Id: I628159936211aaee956963e3fabf58351ca8fb9a
meta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>
meta:release:Code-Review+1: Morgan Fainberg <morgan.fainberg@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/47/675647/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,be6650995eb7a873a3c9102c31a303f03376006f,new-release,keystoneauth1===3.16.0,keystoneauth1===3.15.0,1,1
openstack%2Fneutron~master~Iabab7e4d36c7d6a876b2b74423efd7106a5f63f6,openstack/neutron,master,Iabab7e4d36c7d6a876b2b74423efd7106a5f63f6,[DVR] Add lock during creation of FIP agent gateway port,MERGED,2019-07-29 16:24:00.000000000,2019-08-11 00:58:52.000000000,2019-08-11 00:58:52.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 9531}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 30103}]","[{'number': 1, 'created': '2019-07-29 16:24:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/077f02239f99c51482f11667bea86d6d63c35654', 'message': ""[DVR] Add lock during creation of FIP agent gateway port\n\nIn case when new external network is set as gateway network for\ndvr router, neutron tries to create floating IP agent gateway port.\nThere should be always max 1 such port per network per L3 agent but\nsometimes when there are 2 requests to set external gateway for 2\ndifferent routers executed almost in same time it may happend that\nthere will be 2 such ports created.\nThat will cause error with configuration of one of routers on L3 agent\nand this will cause e.g. problems with access from VMs to metadata\nservice.\nSuch issues are visible in DVR CI jobs from time to time. Please check\nrelated bug for details.\n\nThis patch adds lock mechanism during creation of such FIP gateway port.\nSuch solution isn't fully solving exising race condition as if 2\nrequests will be processed by api workers running on 2 different nodes\nthan this race can still happend.\nBut this should mitigate the issue a bit and solve problem in U/S gates\nat least.\nFor proper fix we should probably add some constraint on database level\nto prevent creation of 2 such ports for one network and one host but\nsuch solution will not be easy to backport to stable branches so I would\nprefer first to go with this easy workaround.\n\nChange-Id: Iabab7e4d36c7d6a876b2b74423efd7106a5f63f6\nRelated-Bug: #1830763\n""}, {'number': 2, 'created': '2019-08-01 11:15:31.000000000', 'files': ['neutron/db/l3_dvr_db.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/7b81c1bc67d2d85e03b4c96a8c1c558a2f909836', 'message': ""[DVR] Add lock during creation of FIP agent gateway port\n\nIn case when new external network is set as gateway network for\ndvr router, neutron tries to create floating IP agent gateway port.\nThere should be always max 1 such port per network per L3 agent but\nsometimes when there are 2 requests to set external gateway for 2\ndifferent routers executed almost in same time it may happend that\nthere will be 2 such ports created.\nThat will cause error with configuration of one of routers on L3 agent\nand this will cause e.g. problems with access from VMs to metadata\nservice.\nSuch issues are visible in DVR CI jobs from time to time. Please check\nrelated bug for details.\n\nThis patch adds lock mechanism during creation of such FIP gateway port.\nSuch solution isn't fully solving exising race condition as if 2\nrequests will be processed by api workers running on 2 different nodes\nthan this race can still happend.\nBut this should mitigate the issue a bit and solve problem in U/S gates\nat least.\nFor proper fix we should probably add some constraint on database level\nto prevent creation of 2 such ports for one network and one host but\nsuch solution will not be easy to backport to stable branches so I would\nprefer first to go with this easy workaround.\n\nChange-Id: Iabab7e4d36c7d6a876b2b74423efd7106a5f63f6\nRelated-Bug: #1830763\n""}]",5,673331,7b81c1bc67d2d85e03b4c96a8c1c558a2f909836,44,11,2,11975,,,0,"[DVR] Add lock during creation of FIP agent gateway port

In case when new external network is set as gateway network for
dvr router, neutron tries to create floating IP agent gateway port.
There should be always max 1 such port per network per L3 agent but
sometimes when there are 2 requests to set external gateway for 2
different routers executed almost in same time it may happend that
there will be 2 such ports created.
That will cause error with configuration of one of routers on L3 agent
and this will cause e.g. problems with access from VMs to metadata
service.
Such issues are visible in DVR CI jobs from time to time. Please check
related bug for details.

This patch adds lock mechanism during creation of such FIP gateway port.
Such solution isn't fully solving exising race condition as if 2
requests will be processed by api workers running on 2 different nodes
than this race can still happend.
But this should mitigate the issue a bit and solve problem in U/S gates
at least.
For proper fix we should probably add some constraint on database level
to prevent creation of 2 such ports for one network and one host but
such solution will not be easy to backport to stable branches so I would
prefer first to go with this easy workaround.

Change-Id: Iabab7e4d36c7d6a876b2b74423efd7106a5f63f6
Related-Bug: #1830763
",git fetch https://review.opendev.org/openstack/neutron refs/changes/31/673331/2 && git format-patch -1 --stdout FETCH_HEAD,['neutron/db/l3_dvr_db.py'],1,077f02239f99c51482f11667bea86d6d63c35654,bug/1830763,"from oslo_concurrency import lockutils # TODO(slaweq): add proper constraint on database level to avoid # creation of duplicated Floating IP gateway ports for same network and # same L3 agent. When this will be done, we can get rid of this lock. lock_name = 'fip-gw-lock-' + network_id + '-' + host with lockutils.lock(lock_name, external=True): return self._create_fip_agent_gw_port_if_not_exists( context, network_id, host) def _create_fip_agent_gw_port_if_not_exists(self, context, network_id, host): LOG.info(""Floating IP Agent Gateway port for network %s "" ""does not exist on host %s. Creating one."", network_id, host)"," LOG.info(""Floating IP Agent Gateway port does not exist, "" ""creating one"")",14,2
openstack%2Fopenstack-helm-infra~master~Ide338d7ee64ef513d7f6276c3136a35565f668e3,openstack/openstack-helm-infra,master,Ide338d7ee64ef513d7f6276c3136a35565f668e3,Rename scripted_test tag for rabbitmq,ABANDONED,2019-03-22 19:37:32.000000000,2019-08-11 00:44:27.000000000,,"[{'_account_id': 22348}, {'_account_id': 23928}]","[{'number': 1, 'created': '2019-03-22 19:37:32.000000000', 'files': ['rabbitmq/templates/job-cluster-wait.yaml', 'rabbitmq/values.yaml', 'rabbitmq/templates/pod-test.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/991bfb9340c61b9b7c8ddb72192d61c9f3f9f091', 'message': 'Rename scripted_test tag for rabbitmq\n\nAllows not to mess rabbitmq scripted_test image override with\nscripted_test image overrides for other components.\n\nChange-Id: Ide338d7ee64ef513d7f6276c3136a35565f668e3\n'}]",0,645859,991bfb9340c61b9b7c8ddb72192d61c9f3f9f091,3,2,1,8863,,,0,"Rename scripted_test tag for rabbitmq

Allows not to mess rabbitmq scripted_test image override with
scripted_test image overrides for other components.

Change-Id: Ide338d7ee64ef513d7f6276c3136a35565f668e3
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/59/645859/1 && git format-patch -1 --stdout FETCH_HEAD,"['rabbitmq/templates/job-cluster-wait.yaml', 'rabbitmq/values.yaml', 'rabbitmq/templates/pod-test.yaml']",3,991bfb9340c61b9b7c8ddb72192d61c9f3f9f091,,"{{ tuple $envAll ""rabbitmq_scripted_test"" | include ""helm-toolkit.snippets.image"" | indent 6 }}","{{ tuple $envAll ""scripted_test"" | include ""helm-toolkit.snippets.image"" | indent 6 }}",3,3
openstack%2Fpatrole~master~I273175e09556135fc9665c9065c25ad0c2d7add1,openstack/patrole,master,I273175e09556135fc9665c9065c25ad0c2d7add1,Fix a broken url link in README.rst,MERGED,2019-08-08 02:22:24.000000000,2019-08-10 23:51:16.000000000,2019-08-10 23:51:16.000000000,"[{'_account_id': 5689}, {'_account_id': 17130}, {'_account_id': 17887}, {'_account_id': 22348}, {'_account_id': 23186}]","[{'number': 1, 'created': '2019-08-08 02:22:24.000000000', 'files': ['README.rst'], 'web_link': 'https://opendev.org/openstack/patrole/commit/17fc33340dd6c449ce504e70b357e914bcd0a919', 'message': 'Fix a broken url link in README.rst\n\nhttps://docs.openstack.org/patrole/latest/framework/rbac_utils.html#role-overriding\nis broken, this is to fix it.\n\nChange-Id: I273175e09556135fc9665c9065c25ad0c2d7add1\n'}]",0,675238,17fc33340dd6c449ce504e70b357e914bcd0a919,9,5,1,20190,,,0,"Fix a broken url link in README.rst

https://docs.openstack.org/patrole/latest/framework/rbac_utils.html#role-overriding
is broken, this is to fix it.

Change-Id: I273175e09556135fc9665c9065c25ad0c2d7add1
",git fetch https://review.opendev.org/openstack/patrole refs/changes/38/675238/1 && git format-patch -1 --stdout FETCH_HEAD,['README.rst'],1,17fc33340dd6c449ce504e70b357e914bcd0a919,, related to expected test results and `Role Overriding <https://docs.openstack.org/patrole/latest/test_writing_guide.html#role-overriding>`_., related to expected test results and `Role Overriding <https://docs.openstack.org/patrole/latest/framework/rbac_utils.html#role-overriding>`_.,1,1
openstack%2Fnova~master~Ic249dbbb5a64808377d8127b0892c4ac8afaaa25,openstack/nova,master,Ic249dbbb5a64808377d8127b0892c4ac8afaaa25,[Trivial]Remove unused _last_bw_usage_cell_update,MERGED,2019-08-09 07:25:49.000000000,2019-08-10 22:24:04.000000000,2019-08-09 22:31:45.000000000,"[{'_account_id': 9008}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-09 07:25:49.000000000', 'files': ['nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/b69ddd64ba6d800128f9a483c89a7c26979cd59b', 'message': '[Trivial]Remove unused _last_bw_usage_cell_update\n\n_last_bw_usage_cell_update is no used after 14cc25552a52e6898a81b9877c6d2c0423a95d57,\nthis is to remove it.\n\nChange-Id: Ic249dbbb5a64808377d8127b0892c4ac8afaaa25\n'}]",0,675543,b69ddd64ba6d800128f9a483c89a7c26979cd59b,17,10,1,20190,,,0,"[Trivial]Remove unused _last_bw_usage_cell_update

_last_bw_usage_cell_update is no used after 14cc25552a52e6898a81b9877c6d2c0423a95d57,
this is to remove it.

Change-Id: Ic249dbbb5a64808377d8127b0892c4ac8afaaa25
",git fetch https://review.opendev.org/openstack/nova refs/changes/43/675543/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/compute/manager.py'],1,b69ddd64ba6d800128f9a483c89a7c26979cd59b,cleanup_code,, self._last_bw_usage_cell_update = 0,0,1
openstack%2Fnova~master~Ie2a5c0be5e14bb96857ba7e14f45738eee441dcc,openstack/nova,master,Ie2a5c0be5e14bb96857ba7e14f45738eee441dcc,trivial: Use NoDBTestCase instead of TestCase,MERGED,2019-08-09 06:24:01.000000000,2019-08-10 20:43:53.000000000,2019-08-10 01:08:20.000000000,"[{'_account_id': 6167}, {'_account_id': 9008}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-09 06:24:01.000000000', 'files': ['nova/tests/unit/objects/test_request_spec.py', 'nova/tests/unit/objects/test_instance.py', 'nova/tests/unit/objects/test_service.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e0099590ec552017a01c9b6943a0c11448f0b5b4', 'message': 'trivial: Use NoDBTestCase instead of TestCase\n\nIn unit tests, nova.test.NoDBTestCase should be used instead of\nnova.test.TestCase if it is not necessary to set up database\nfixtures.\nReplace nova.test.TestCase with nova.test.NoDBTestCase.\n\nTrivialFix\nChange-Id: Ie2a5c0be5e14bb96857ba7e14f45738eee441dcc\n'}]",0,675529,e0099590ec552017a01c9b6943a0c11448f0b5b4,16,10,1,7634,,,0,"trivial: Use NoDBTestCase instead of TestCase

In unit tests, nova.test.NoDBTestCase should be used instead of
nova.test.TestCase if it is not necessary to set up database
fixtures.
Replace nova.test.TestCase with nova.test.NoDBTestCase.

TrivialFix
Change-Id: Ie2a5c0be5e14bb96857ba7e14f45738eee441dcc
",git fetch https://review.opendev.org/openstack/nova refs/changes/29/675529/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/objects/test_request_spec.py', 'nova/tests/unit/objects/test_instance.py', 'nova/tests/unit/objects/test_service.py']",3,e0099590ec552017a01c9b6943a0c11448f0b5b4,trivialfix,class TestServiceVersion(test.NoDBTestCase):,class TestServiceVersion(test.TestCase):,3,3
openstack%2Fnova~master~Ibc31e6af1ab4eecb7add065976315647d54e05a6,openstack/nova,master,Ibc31e6af1ab4eecb7add065976315647d54e05a6,Dump versioned notifications when len assertions fail,MERGED,2019-08-08 16:29:44.000000000,2019-08-10 18:20:27.000000000,2019-08-09 02:31:35.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-08 16:29:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/57c0f9bea8a2ef0f5648027739a087cfaa280a03', 'message': 'Dump versioned notifications when len assertions fail\n\nWhen versioned notification sample tests fail asserting\nthe number of expected notifications it is easier to debug\nwhat is wrong if we have the tracked notifications in the\nMismatchError message, so this adds that for the test_instance\nand test_compute_task modules.\n\nChange-Id: Ibc31e6af1ab4eecb7add065976315647d54e05a6\n'}, {'number': 2, 'created': '2019-08-08 16:33:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d4ad574df61040bc70be8b2a8baf798091f43120', 'message': 'Dump versioned notifications when len assertions fail\n\nWhen versioned notification sample tests fail asserting\nthe number of expected notifications it is easier to debug\nwhat is wrong if we have the tracked notifications in the\nMismatchError message, so this adds that for the test_instance\nand test_compute_task modules and one spot in the base class.\n\nChange-Id: Ibc31e6af1ab4eecb7add065976315647d54e05a6\n'}, {'number': 3, 'created': '2019-08-08 23:28:02.000000000', 'files': ['nova/tests/functional/notification_sample_tests/notification_sample_base.py', 'nova/tests/functional/notification_sample_tests/test_instance.py', 'nova/tests/functional/notification_sample_tests/test_compute_task.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/5294af8b92143f133bc8139092d166781f9bd0f3', 'message': 'Dump versioned notifications when len assertions fail\n\nWhen versioned notification sample tests fail asserting\nthe number of expected notifications it is easier to debug\nwhat is wrong if we have the tracked notifications in the\nMismatchError message, so this adds that for the test_instance\nand test_compute_task modules and one spot in the base class.\n\nChange-Id: Ibc31e6af1ab4eecb7add065976315647d54e05a6\n'}]",0,675404,5294af8b92143f133bc8139092d166781f9bd0f3,34,12,3,6873,,,0,"Dump versioned notifications when len assertions fail

When versioned notification sample tests fail asserting
the number of expected notifications it is easier to debug
what is wrong if we have the tracked notifications in the
MismatchError message, so this adds that for the test_instance
and test_compute_task modules and one spot in the base class.

Change-Id: Ibc31e6af1ab4eecb7add065976315647d54e05a6
",git fetch https://review.opendev.org/openstack/nova refs/changes/04/675404/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/notification_sample_tests/test_instance.py', 'nova/tests/functional/notification_sample_tests/test_compute_task.py']",2,57c0f9bea8a2ef0f5648027739a087cfaa280a03,bug/1839515," self.assertEqual(2, len(fake_notifier.VERSIONED_NOTIFICATIONS), fake_notifier.VERSIONED_NOTIFICATIONS) self.assertEqual(3, len(fake_notifier.VERSIONED_NOTIFICATIONS), fake_notifier.VERSIONED_NOTIFICATIONS) self.assertEqual(2, len(fake_notifier.VERSIONED_NOTIFICATIONS), fake_notifier.VERSIONED_NOTIFICATIONS)"," self.assertEqual(2, len(fake_notifier.VERSIONED_NOTIFICATIONS)) self.assertEqual(3, len(fake_notifier.VERSIONED_NOTIFICATIONS)) self.assertEqual(2, len(fake_notifier.VERSIONED_NOTIFICATIONS))",70,35
openstack%2Fnova~master~I8da4caebe4c574280b1cfdb76a93cc899b807f2e,openstack/nova,master,I8da4caebe4c574280b1cfdb76a93cc899b807f2e,Skip test_migrate_disk_and_power_off_crash_finish_revert_migration,MERGED,2019-08-08 17:13:07.000000000,2019-08-10 17:23:54.000000000,2019-08-09 02:31:28.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-08 17:13:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ed17b2e8e9076209ac325398c5e61ad665767754', 'message': 'Skip test_migrate_disk_and_power_off_crash_finish_revert_migration\n\nThe stub with the compute service restart + sleep in this test is\nleaking into other tests on the same worker process causing other\ntests to fail, like versioned notification sample tests which are\nasserting an expected number of notifications but getting more than\nexpected because the revert resize is waking up after the sleep and\nfailing which triggers and error notification.\n\nChange-Id: I8da4caebe4c574280b1cfdb76a93cc899b807f2e\nRelated-Bug: #1839515\n'}, {'number': 2, 'created': '2019-08-08 23:28:02.000000000', 'files': ['nova/tests/functional/compute/test_init_host.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4156571d2cbda764d79d873dc9686c6b12a46380', 'message': 'Skip test_migrate_disk_and_power_off_crash_finish_revert_migration\n\nThe stub with the compute service restart + sleep in this test is\nleaking into other tests on the same worker process causing other\ntests to fail, like versioned notification sample tests which are\nasserting an expected number of notifications but getting more than\nexpected because the revert resize is waking up after the sleep and\nfailing which triggers and error notification.\n\nChange-Id: I8da4caebe4c574280b1cfdb76a93cc899b807f2e\nRelated-Bug: #1839515\n'}]",1,675417,4156571d2cbda764d79d873dc9686c6b12a46380,27,13,2,6873,,,0,"Skip test_migrate_disk_and_power_off_crash_finish_revert_migration

The stub with the compute service restart + sleep in this test is
leaking into other tests on the same worker process causing other
tests to fail, like versioned notification sample tests which are
asserting an expected number of notifications but getting more than
expected because the revert resize is waking up after the sleep and
failing which triggers and error notification.

Change-Id: I8da4caebe4c574280b1cfdb76a93cc899b807f2e
Related-Bug: #1839515
",git fetch https://review.opendev.org/openstack/nova refs/changes/17/675417/2 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/compute/test_init_host.py'],1,ed17b2e8e9076209ac325398c5e61ad665767754,bug/1839515,import testtools @testtools.skip('Bug 1839515'),,3,0
openstack%2Fceilometermiddleware~master~I39cbbe5915ab95fb0927b0899b8f09870b4c0b07,openstack/ceilometermiddleware,master,I39cbbe5915ab95fb0927b0899b8f09870b4c0b07,Fix a socket leak in case of broken connection,MERGED,2019-08-09 14:31:45.000000000,2019-08-10 13:51:44.000000000,2019-08-10 13:51:44.000000000,"[{'_account_id': 22348}, {'_account_id': 27068}]","[{'number': 1, 'created': '2019-08-09 14:31:45.000000000', 'files': ['ceilometermiddleware/swift.py'], 'web_link': 'https://opendev.org/openstack/ceilometermiddleware/commit/fc21cde1c26bbb6c7abbc0890a88381aabed67fa', 'message': 'Fix a socket leak in case of broken connection\n\nChange-Id: I39cbbe5915ab95fb0927b0899b8f09870b4c0b07\n'}]",0,675635,fc21cde1c26bbb6c7abbc0890a88381aabed67fa,6,2,1,13852,,,0,"Fix a socket leak in case of broken connection

Change-Id: I39cbbe5915ab95fb0927b0899b8f09870b4c0b07
",git fetch https://review.opendev.org/openstack/ceilometermiddleware refs/changes/35/675635/1 && git format-patch -1 --stdout FETCH_HEAD,['ceilometermiddleware/swift.py'],1,fc21cde1c26bbb6c7abbc0890a88381aabed67fa,fix/socketLeak," def close(self): close_method = getattr(self.wsgi_input, 'close', None) if callable(close_method): close_method() close_method = getattr(iterable, 'close', None) if callable(close_method): close_method()",,8,0
openstack%2Ftripleo-heat-templates~master~Ida2ddd1f880e09e930eac3dccd5b7e2989bc1bd2,openstack/tripleo-heat-templates,master,Ida2ddd1f880e09e930eac3dccd5b7e2989bc1bd2,Remove pingtest from THT,MERGED,2019-08-06 19:22:43.000000000,2019-08-10 13:04:15.000000000,2019-08-10 13:04:15.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 19:22:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c8b1161770735faec3d90ffcb9df507a3dc3b736', 'message': ""Remove pingtest from THT\n\nThe pingtest isn't used anywhere in Train cycle, we can remove it.\n\nChange-Id: Ida2ddd1f880e09e930eac3dccd5b7e2989bc1bd2\n""}, {'number': 2, 'created': '2019-08-10 07:44:35.000000000', 'files': ['ci/pingtests/tenantvm_floatingip.yaml', 'tools/yaml-validate.py', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1e33ed8366eedf3021e8c6d5952f0e8d24079c8a', 'message': ""Remove pingtest from THT\n\nThe pingtest isn't used anywhere in Train cycle, we can remove it.\n\nChange-Id: Ida2ddd1f880e09e930eac3dccd5b7e2989bc1bd2\n""}]",0,674917,1e33ed8366eedf3021e8c6d5952f0e8d24079c8a,22,5,2,3153,,,0,"Remove pingtest from THT

The pingtest isn't used anywhere in Train cycle, we can remove it.

Change-Id: Ida2ddd1f880e09e930eac3dccd5b7e2989bc1bd2
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/17/674917/1 && git format-patch -1 --stdout FETCH_HEAD,"['ci/pingtests/tenantvm_floatingip.yaml', 'tools/yaml-validate.py', 'zuul.d/layout.yaml']",3,c8b1161770735faec3d90ffcb9df507a3dc3b736,pingtest,, - ci/pingtests/scenario006-multinode.yaml - ci/pingtests/scenario009-multinode.yaml,1,166
openstack%2Fneutron-vpnaas-dashboard~master~Ibc812a81ff6fa0ddf0d6184f2dc255df8c87ca9b,openstack/neutron-vpnaas-dashboard,master,Ibc812a81ff6fa0ddf0d6184f2dc255df8c87ca9b,Add Python 3 Train unit tests,MERGED,2019-07-05 17:54:56.000000000,2019-08-10 13:02:01.000000000,2019-08-10 13:02:01.000000000,"[{'_account_id': 841}, {'_account_id': 11805}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2019-07-05 17:54:56.000000000', 'files': ['.zuul.yaml', 'setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/neutron-vpnaas-dashboard/commit/766ad9ecd63b5ced9e805f230f270350e1ef22b4', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: Ibc812a81ff6fa0ddf0d6184f2dc255df8c87ca9b\nStory: #2005924\nTask: #34225\n'}]",2,669433,766ad9ecd63b5ced9e805f230f270350e1ef22b4,9,4,1,11805,,,0,"Add Python 3 Train unit tests

This is a mechanically generated patch to ensure unit testing is in place
for all of the Tested Runtimes for Train.

See the Train python3-updates goal document for details:
https://governance.openstack.org/tc/goals/train/python3-updates.html

Change-Id: Ibc812a81ff6fa0ddf0d6184f2dc255df8c87ca9b
Story: #2005924
Task: #34225
",git fetch https://review.opendev.org/openstack/neutron-vpnaas-dashboard refs/changes/33/669433/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg', 'tox.ini']",3,766ad9ecd63b5ced9e805f230f270350e1ef22b4,python3-train,"envlist = py27,py37,pep8","envlist = py36,py27,pep8",3,2
openstack%2Fneutron-interconnection~master~I368d1fe36117bd39b89c14a758bd0cf4fc567031,openstack/neutron-interconnection,master,I368d1fe36117bd39b89c14a758bd0cf4fc567031,Add Python 3 Train unit tests,MERGED,2019-07-05 17:53:30.000000000,2019-08-10 12:59:03.000000000,2019-08-10 12:59:03.000000000,"[{'_account_id': 841}, {'_account_id': 4694}, {'_account_id': 8556}, {'_account_id': 13995}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-05 17:53:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-interconnection/commit/b0c60b848d79ece3af638a8e1f2dfca820d4a10b', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I368d1fe36117bd39b89c14a758bd0cf4fc567031\nStory: #2005924\nTask: #34225\n'}, {'number': 2, 'created': '2019-07-19 18:32:18.000000000', 'files': ['zuul.d/project.yaml', 'setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/neutron-interconnection/commit/1c5fbf56ff05f503745f7de7041f3e3e258d4f73', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I368d1fe36117bd39b89c14a758bd0cf4fc567031\nStory: #2005924\nTask: #34225\n'}]",0,669430,1c5fbf56ff05f503745f7de7041f3e3e258d4f73,11,6,2,11805,,,0,"Add Python 3 Train unit tests

This is a mechanically generated patch to ensure unit testing is in place
for all of the Tested Runtimes for Train.

See the Train python3-updates goal document for details:
https://governance.openstack.org/tc/goals/train/python3-updates.html

Change-Id: I368d1fe36117bd39b89c14a758bd0cf4fc567031
Story: #2005924
Task: #34225
",git fetch https://review.opendev.org/openstack/neutron-interconnection refs/changes/30/669430/2 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'setup.cfg', 'tox.ini']",3,b0c60b848d79ece3af638a8e1f2dfca820d4a10b,python3-train,"envlist = py27,py37,pep8","envlist = py35,py27,pep8",5,5
openstack%2Fneutron-fwaas-dashboard~master~I5e4718df8760458dc7830f1ad4be3cd09d76fe78,openstack/neutron-fwaas-dashboard,master,I5e4718df8760458dc7830f1ad4be3cd09d76fe78,Add Python 3 Train unit tests,MERGED,2019-07-05 17:52:50.000000000,2019-08-10 12:55:29.000000000,2019-08-10 12:55:29.000000000,"[{'_account_id': 841}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 27822}, {'_account_id': 29313}]","[{'number': 1, 'created': '2019-07-05 17:52:50.000000000', 'files': ['.zuul.yaml', 'setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/neutron-fwaas-dashboard/commit/e473c8ca699d988fbe76e5e6f74f6e02de20a306', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I5e4718df8760458dc7830f1ad4be3cd09d76fe78\nStory: #2005924\nTask: #34225\n'}]",0,669429,e473c8ca699d988fbe76e5e6f74f6e02de20a306,9,5,1,11805,,,0,"Add Python 3 Train unit tests

This is a mechanically generated patch to ensure unit testing is in place
for all of the Tested Runtimes for Train.

See the Train python3-updates goal document for details:
https://governance.openstack.org/tc/goals/train/python3-updates.html

Change-Id: I5e4718df8760458dc7830f1ad4be3cd09d76fe78
Story: #2005924
Task: #34225
",git fetch https://review.opendev.org/openstack/neutron-fwaas-dashboard refs/changes/29/669429/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg', 'tox.ini']",3,e473c8ca699d988fbe76e5e6f74f6e02de20a306,python3-train,"envlist = py27,py37,pep8","envlist = py36,py27,pep8",3,3
openstack%2Fpuppet-ironic~master~I43941b598c05c3f6529ede274d526e3a6c8910d5,openstack/puppet-ironic,master,I43941b598c05c3f6529ede274d526e3a6c8910d5,Train deprecations and removals,MERGED,2019-08-09 07:59:37.000000000,2019-08-10 12:03:53.000000000,2019-08-10 12:03:53.000000000,"[{'_account_id': 3153}, {'_account_id': 9414}, {'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-09 07:59:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/4235ed07bf9e171010776ac6ca3c23e09e41e26d', 'message': 'Train deprecations and removals\n\nChange-Id: I43941b598c05c3f6529ede274d526e3a6c8910d5\n'}, {'number': 2, 'created': '2019-08-09 09:52:02.000000000', 'files': ['manifests/neutron.pp', 'manifests/glance.pp', 'manifests/drivers/inspector.pp', 'manifests/conductor.pp', 'spec/classes/ironic_glance_spec.rb', 'spec/classes/ironic_conductor_spec.rb', 'spec/classes/ironic_drivers_inspector_spec.rb', 'spec/classes/ironic_neutron_spec.rb', 'releasenotes/notes/train-deprecations-06c3472b1703a4c7.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/fb8e19deb88c4e244dded10d660f9aa81792c54b', 'message': 'Train deprecations and removals\n\nChange-Id: I43941b598c05c3f6529ede274d526e3a6c8910d5\n'}]",0,675549,fb8e19deb88c4e244dded10d660f9aa81792c54b,21,5,2,10239,,,0,"Train deprecations and removals

Change-Id: I43941b598c05c3f6529ede274d526e3a6c8910d5
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/49/675549/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/neutron.pp', 'manifests/glance.pp', 'manifests/drivers/inspector.pp', 'manifests/conductor.pp', 'spec/classes/ironic_conductor_spec.rb', 'spec/classes/ironic_drivers_inspector_spec.rb', 'spec/classes/ironic_neutron_spec.rb', 'releasenotes/notes/train-deprecations-06c3472b1703a4c7.yaml']",8,4235ed07bf9e171010776ac6ca3c23e09e41e26d,deprecations,--- upgrade: - | The deprecated parameter ``ironic::conductor::enabled_drivers`` has been removed. Use new-style hardware types and the ``ironic::conductor::enabled_hardware_types`` parameter instead. - | The deprecated parameter ``ironic::drivers::inspector::enabled`` has been removed. Use ``ironic::drivers::hardware_interfaces::enabled_inspect_interfaces`` to enable ironic-inspector support. deprecations: - | The parameter ``ironic::drivers::inspector::service_url`` is deprecated and has no effect. Use ``ironic::drivers::inspector::endpoint_override``. - | The parameter ``ironic::glance::api_servers`` is deprecated and has no effect. Use ``ironic::glance::endpoint_override``. - | The parameter ``ironic::neutron::api_endpoint`` is deprecated and has no effect. Use ``ironic::neutron::endpoint_override``. ,,54,50
openstack%2Frequirements~master~Icbca4774363e032be96618fb2def7bae333b585f,openstack/requirements,master,Icbca4774363e032be96618fb2def7bae333b585f,update constraint for metalsmith to new release 0.14.0,MERGED,2019-08-09 15:51:47.000000000,2019-08-10 11:11:50.000000000,2019-08-10 11:11:49.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 15:51:47.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/d32e054e79cb9f531adf9352310935addccee845', 'message': 'update constraint for metalsmith to new release 0.14.0\n\nChange-Id: Icbca4774363e032be96618fb2def7bae333b585f\nmeta:version: 0.14.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: no\nmeta:first: no\nmeta:release:Author: Dmitry Tantsur <dtantsur@protonmail.com>\nmeta:release:Commit: Dmitry Tantsur <dtantsur@protonmail.com>\nmeta:release:Change-Id: I5fbd0c75caacfda26d37a68d09c2b6506c9fa88f\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,675650,d32e054e79cb9f531adf9352310935addccee845,10,2,1,11131,,,0,"update constraint for metalsmith to new release 0.14.0

Change-Id: Icbca4774363e032be96618fb2def7bae333b585f
meta:version: 0.14.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: no
meta:first: no
meta:release:Author: Dmitry Tantsur <dtantsur@protonmail.com>
meta:release:Commit: Dmitry Tantsur <dtantsur@protonmail.com>
meta:release:Change-Id: I5fbd0c75caacfda26d37a68d09c2b6506c9fa88f
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/50/675650/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,d32e054e79cb9f531adf9352310935addccee845,new-release,metalsmith===0.14.0,metalsmith===0.13.0,1,1
openstack%2Fneutron~stable%2Frocky~I3ad59864eeb42916d2cf15a5292d5aa9484f6e91,openstack/neutron,stable/rocky,I3ad59864eeb42916d2cf15a5292d5aa9484f6e91,Check for agent restarted after checking for DVR port,MERGED,2019-07-22 06:56:32.000000000,2019-08-10 10:59:31.000000000,2019-08-10 10:59:31.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 9732}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 26622}]","[{'number': 1, 'created': '2019-07-22 06:56:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c42bfef5887bdd64e7148f6193447bd37e8b5bfd', 'message': ""Check for agent restarted after checking for DVR port\n\nCommit a5244d6d44d2b66de27dc77efa7830fa657260be changed the check\norder so regular non-dvr ports are checked for agent restarted.\nHowever regular ports may be unbound already, which leads to the\nerror in the bug description: agent_restarted check is done against\na 'None' agent.\nThis patch fixed logic back - only check agent_restarted for dvr ports.\n\nThis also adds some logging to have a clue why update port up/down fails.\n\nChange-Id: I3ad59864eeb42916d2cf15a5292d5aa9484f6e91\nCloses-Bug: #1835731\n""}, {'number': 2, 'created': '2019-08-06 12:32:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f542545a35b2b32a3a4ee0e692d9737159363043', 'message': ""Check for agent restarted after checking for DVR port\n\nThis is a stable-only fix since code around the change was removed \nin master: https://review.opendev.org/#/c/641866\n\nCommit a5244d6d44d2b66de27dc77efa7830fa657260be changed the check\norder so regular non-dvr ports are checked for agent restarted.\nHowever regular ports may be unbound already, which leads to the\nerror in the bug description: agent_restarted check is done against\na 'None' agent.\nThis patch fixed logic back - only check agent_restarted for dvr ports.\n\nThis also adds some logging to have a clue why update port up/down fails.\n\nChange-Id: I3ad59864eeb42916d2cf15a5292d5aa9484f6e91\nCloses-Bug: #1835731\n""}, {'number': 3, 'created': '2019-08-08 13:03:10.000000000', 'files': ['neutron/plugins/ml2/rpc.py', 'neutron/tests/unit/plugins/ml2/test_rpc.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/3ba9c03c05f1cb423098b5e775df9c51f6ba48a7', 'message': ""Check for agent restarted after checking for DVR port\n\nThis is a stable-only fix since code around the change was removed \nin master: https://review.opendev.org/#/c/641866\n\nCommit a5244d6d44d2b66de27dc77efa7830fa657260be changed the check\norder so regular non-dvr ports are checked for agent restarted.\nHowever regular ports may be unbound already, which leads to the\nerror in the bug description: agent_restarted check is done against\na 'None' agent.\nThis patch fixed logic back - only check agent_restarted for dvr ports.\n\nThis also adds some logging to have a clue why update port up/down fails.\n\nChange-Id: I3ad59864eeb42916d2cf15a5292d5aa9484f6e91\nCloses-Bug: #1835731\n(cherry picked from commit c3a3031f78b3ea2d16d4eb08b181916dbc6f4c45)\n""}]",0,671965,3ba9c03c05f1cb423098b5e775df9c51f6ba48a7,32,7,3,5948,,,0,"Check for agent restarted after checking for DVR port

This is a stable-only fix since code around the change was removed 
in master: https://review.opendev.org/#/c/641866

Commit a5244d6d44d2b66de27dc77efa7830fa657260be changed the check
order so regular non-dvr ports are checked for agent restarted.
However regular ports may be unbound already, which leads to the
error in the bug description: agent_restarted check is done against
a 'None' agent.
This patch fixed logic back - only check agent_restarted for dvr ports.

This also adds some logging to have a clue why update port up/down fails.

Change-Id: I3ad59864eeb42916d2cf15a5292d5aa9484f6e91
Closes-Bug: #1835731
(cherry picked from commit c3a3031f78b3ea2d16d4eb08b181916dbc6f4c45)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/65/671965/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/rpc.py', 'neutron/tests/unit/plugins/ml2/test_rpc.py']",2,c42bfef5887bdd64e7148f6193447bd37e8b5bfd,bug/1835731-stable/rocky," def test_notify_l2pop_port_wiring_non_dvr_port(self): port = {'device_owner': constants.DEVICE_OWNER_COMPUTE_PREFIX} l2pop_driver = ( self.plugin.mechanism_manager.mech_drivers.get.return_value) with mock.patch.object(ml2_db, 'get_port') as ml2_db_get_port: ml2_db_get_port.return_value = port self.callbacks.notify_l2pop_port_wiring( 'port_id', mock.Mock(), 'DOWN', 'host', agent_restarted=None) self.assertFalse(l2pop_driver.obj.agent_restarted.called) ",,21,9
openstack%2Frequirements~master~Ie7e3ba6e6e9fbeb3a270d77c62ccf5ba14a4602f,openstack/requirements,master,Ie7e3ba6e6e9fbeb3a270d77c62ccf5ba14a4602f,update constraint for openstacksdk to new release 0.33.0,MERGED,2019-08-09 13:36:43.000000000,2019-08-10 10:59:29.000000000,2019-08-10 10:59:29.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 13:36:43.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/623d52cf6911fd14a764264fd3e77519544236f7', 'message': 'update constraint for openstacksdk to new release 0.33.0\n\nChange-Id: Ie7e3ba6e6e9fbeb3a270d77c62ccf5ba14a4602f\nmeta:version: 0.33.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Monty Taylor <mordred@inaugust.com>\nmeta:release:Commit: Monty Taylor <mordred@inaugust.com>\nmeta:release:Change-Id: I5aeffd5fddefc2c35f5854c6b9570b9e0493ec06\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+1: Matt Riedemann <mriedem.os@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n'}]",0,675626,623d52cf6911fd14a764264fd3e77519544236f7,13,2,1,11131,,,0,"update constraint for openstacksdk to new release 0.33.0

Change-Id: Ie7e3ba6e6e9fbeb3a270d77c62ccf5ba14a4602f
meta:version: 0.33.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Monty Taylor <mordred@inaugust.com>
meta:release:Commit: Monty Taylor <mordred@inaugust.com>
meta:release:Change-Id: I5aeffd5fddefc2c35f5854c6b9570b9e0493ec06
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+1: Matt Riedemann <mriedem.os@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/26/675626/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,623d52cf6911fd14a764264fd3e77519544236f7,new-release,openstacksdk===0.33.0,openstacksdk===0.32.0,1,1
openstack%2Fironic-lib~stable%2Fqueens~Ic3963e5c4a1886aeabed6c5994599e72040a251e,openstack/ironic-lib,stable/queens,Ic3963e5c4a1886aeabed6c5994599e72040a251e,Use last digit to determine paritition naming scheme,MERGED,2019-07-31 13:58:04.000000000,2019-08-10 10:42:29.000000000,2019-08-10 10:42:28.000000000,"[{'_account_id': 10239}, {'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2019-07-31 13:58:04.000000000', 'files': ['ironic_lib/tests/test_disk_utils.py', 'releasenotes/notes/fix-metadisk-partitioning-32d3fca274290dd6.yaml', 'ironic_lib/disk_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic-lib/commit/3cad8a60a94609b91eb4575f992b68b5f7e316ee', 'message': 'Use last digit to determine paritition naming scheme\n\nThis matches the behaviour of the linux kernel, see:\n\nhttps://github.com/torvalds/linux/blob/d3511f53bb2475f2a4e8460bee5a1ae6dea2a433/block/partition-generic.c#L39\n\nChange-Id: Ic3963e5c4a1886aeabed6c5994599e72040a251e\nStory: 2006154\nTask: 35656\n(cherry picked from commit cd51319528bb2333139c7cefb68e7e6e27df740a)\n'}]",0,673823,3cad8a60a94609b91eb4575f992b68b5f7e316ee,7,4,1,10239,,,0,"Use last digit to determine paritition naming scheme

This matches the behaviour of the linux kernel, see:

https://github.com/torvalds/linux/blob/d3511f53bb2475f2a4e8460bee5a1ae6dea2a433/block/partition-generic.c#L39

Change-Id: Ic3963e5c4a1886aeabed6c5994599e72040a251e
Story: 2006154
Task: 35656
(cherry picked from commit cd51319528bb2333139c7cefb68e7e6e27df740a)
",git fetch https://review.opendev.org/openstack/ironic-lib refs/changes/23/673823/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_lib/tests/test_disk_utils.py', 'releasenotes/notes/fix-metadisk-partitioning-32d3fca274290dd6.yaml', 'ironic_lib/disk_utils.py']",3,3cad8a60a94609b91eb4575f992b68b5f7e316ee,p-scheme-stable/queens,"def is_last_char_digit(dev): """"""check whether device name ends with a digit"""""" if len(dev) >= 1: return dev[-1].isdigit() return False elif is_last_char_digit(dev): elif is_last_char_digit(device):","def is_nvme_device(dev): """"""check whether the device path belongs to an NVMe drive. """""" return ""/dev/nvme"" in dev elif is_nvme_device(dev): elif is_nvme_device(device):",14,6
openstack%2Fpython-ironic-inspector-client~stable%2Fstein~I24f3c101646ae0157ab1c7a4bf6c81784a356477,openstack/python-ironic-inspector-client,stable/stein,I24f3c101646ae0157ab1c7a4bf6c81784a356477,CI: clean up required projects,MERGED,2019-08-02 09:43:27.000000000,2019-08-10 10:31:19.000000000,2019-08-10 10:31:19.000000000,"[{'_account_id': 10206}, {'_account_id': 10239}, {'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}, {'_account_id': 24828}]","[{'number': 1, 'created': '2019-08-02 09:43:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/2c518a9870f2bddd7fac27f0a0abaabb0dff9a5c', 'message': 'CI: clean up required projects\n\nChange-Id: I24f3c101646ae0157ab1c7a4bf6c81784a356477\n(cherry picked from commit dd1628e20ede390a63cdb91598846d6115525566)\n'}, {'number': 2, 'created': '2019-08-10 02:59:57.000000000', 'files': ['zuul.d/python-ironic-inspector-client-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/37defd6a1d6cc7d7e6d6d7d3d36b6ea59413aa0b', 'message': 'CI: clean up required projects\n\nChange-Id: I24f3c101646ae0157ab1c7a4bf6c81784a356477\n(cherry picked from commit dd1628e20ede390a63cdb91598846d6115525566)\n'}]",2,674248,37defd6a1d6cc7d7e6d6d7d3d36b6ea59413aa0b,17,7,2,10239,,,0,"CI: clean up required projects

Change-Id: I24f3c101646ae0157ab1c7a4bf6c81784a356477
(cherry picked from commit dd1628e20ede390a63cdb91598846d6115525566)
",git fetch https://review.opendev.org/openstack/python-ironic-inspector-client refs/changes/48/674248/2 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/python-ironic-inspector-client-jobs.yaml'],1,2c518a9870f2bddd7fac27f0a0abaabb0dff9a5c,gate-stable/stein," # NOTE(dtantsur): this should not be needed, but python 3 job doesn't # work without it.", - openstack/ironic-lib - openstack/ironic-python-agent - x/pyghmi,2,3
openstack%2Ftripleo-common~master~Ifad776b903d175749588b35d86a0b157fc1a5559,openstack/tripleo-common,master,Ifad776b903d175749588b35d86a0b157fc1a5559,DNM: testing ansible 2.8,ABANDONED,2019-06-11 09:56:06.000000000,2019-08-10 10:23:08.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-11 09:56:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/36c1483be20546be1595f14ba5943b6c068fff98', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: Ifad776b903d175749588b35d86a0b157fc1a5559\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 2, 'created': '2019-06-24 09:03:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/fda1720fad6265314bd7e99d99c7feb0d2cd1c77', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: Ifad776b903d175749588b35d86a0b157fc1a5559\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 3, 'created': '2019-06-24 20:39:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/1dfb606fa77acc43dc996e02cc764daf02fc1737', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Ifad776b903d175749588b35d86a0b157fc1a5559\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 4, 'created': '2019-07-01 16:25:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/27cc990c8b0df90debaeec11512fa2caf5e9cd1c', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Ifad776b903d175749588b35d86a0b157fc1a5559\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 5, 'created': '2019-07-22 08:54:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ef2b2143f6df5d03b6c3d2ceded80e779ae1884c', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Ifad776b903d175749588b35d86a0b157fc1a5559\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 6, 'created': '2019-08-04 19:21:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e775cd6ca3c8a9c936acd8849918aa28598e2b98', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Ifad776b903d175749588b35d86a0b157fc1a5559\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 7, 'created': '2019-08-07 22:44:40.000000000', 'files': ['container-images/container_image_prepare_defaults.yaml', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ab14de02c6636d6b03784a7cbac2e4b31da040e2', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Ifad776b903d175749588b35d86a0b157fc1a5559\nDepends-On: https://review.opendev.org/#/c/667219/\n'}]",0,664546,ab14de02c6636d6b03784a7cbac2e4b31da040e2,49,3,7,10969,,,0,"DNM: testing ansible 2.8

Change-Id: Ifad776b903d175749588b35d86a0b157fc1a5559
Depends-On: https://review.opendev.org/#/c/667219/
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/46/664546/3 && git format-patch -1 --stdout FETCH_HEAD,"['container-images/container_image_prepare_defaults.yaml', 'zuul.d/layout.yaml']",2,36c1483be20546be1595f14ba5943b6c068fff98,ansible2.8-oooq,# test,,2,0
openstack%2Ftripleo-quickstart~master~I7957f097bd55573eb0afed2964a26269a2b7b7ab,openstack/tripleo-quickstart,master,I7957f097bd55573eb0afed2964a26269a2b7b7ab,DNM: test ansible2.8,ABANDONED,2019-06-24 20:42:28.000000000,2019-08-10 10:23:04.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-24 20:42:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/5642cd3762e3e01154a4de31610d10dc83979213', 'message': 'DNM: test ansible2.8\n\nChange-Id: I7957f097bd55573eb0afed2964a26269a2b7b7ab\n'}, {'number': 2, 'created': '2019-06-25 08:58:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/28764bfb726b551ab24427ba83d835ab016cb589', 'message': 'DNM: test ansible2.8\n\nChange-Id: I7957f097bd55573eb0afed2964a26269a2b7b7ab\n'}, {'number': 3, 'created': '2019-07-01 16:23:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/15b989c2281432d798095559ce5d427a8b8a7416', 'message': 'DNM: test ansible2.8\n\nChange-Id: I7957f097bd55573eb0afed2964a26269a2b7b7ab\n'}, {'number': 4, 'created': '2019-07-22 08:54:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/ffa466e41273964349ea6c53bb48557fcb453d1b', 'message': 'DNM: test ansible2.8\n\nChange-Id: I7957f097bd55573eb0afed2964a26269a2b7b7ab\n'}, {'number': 5, 'created': '2019-08-04 19:20:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/1633248315972a7555f72ac8a21277c753dee79b', 'message': 'DNM: test ansible2.8\n\nChange-Id: I7957f097bd55573eb0afed2964a26269a2b7b7ab\n'}, {'number': 6, 'created': '2019-08-07 22:44:04.000000000', 'files': ['roles/repo-setup/templates/repo_setup.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/9398867dbaba264849bccd134d4dcfceba456e1e', 'message': 'DNM: test ansible2.8\n\nChange-Id: I7957f097bd55573eb0afed2964a26269a2b7b7ab\n'}]",0,667222,9398867dbaba264849bccd134d4dcfceba456e1e,26,3,6,10969,,,0,"DNM: test ansible2.8

Change-Id: I7957f097bd55573eb0afed2964a26269a2b7b7ab
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/22/667222/4 && git format-patch -1 --stdout FETCH_HEAD,['roles/repo-setup/templates/repo_setup.sh.j2'],1,5642cd3762e3e01154a4de31610d10dc83979213,ansible2.8-oooq, # test ansible 2.8,,2,0
openstack%2Ftripleo-upgrade~master~Ie3509a8899564e0fcac9724cd357bf15d5fb42a9,openstack/tripleo-upgrade,master,Ie3509a8899564e0fcac9724cd357bf15d5fb42a9,DNM: testing ansible 2.8,ABANDONED,2019-06-11 10:02:12.000000000,2019-08-10 10:23:01.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-06-11 10:02:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/1da32d0aaa6a438b4bb7a13998fd592a708741b5', 'message': 'DNM: testing ansible 2.7\n\nDepends-On: https://review.opendev.org/#/c/650169\nChange-Id: Ie3509a8899564e0fcac9724cd357bf15d5fb42a9\n'}, {'number': 2, 'created': '2019-06-19 16:02:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/c2673292a0b51e58641d16a3af0825eb62e20827', 'message': 'DNM: testing ansible 2.7\n\nDepends-On: https://review.opendev.org/#/c/650169\nChange-Id: Ie3509a8899564e0fcac9724cd357bf15d5fb42a9\n'}, {'number': 3, 'created': '2019-06-24 09:04:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/a571c87d64e8389b4a35ecad11d0e9e4d52b0023', 'message': 'DNM: testing ansible 2.7\n\nDepends-On: https://review.opendev.org/#/c/650169\nChange-Id: Ie3509a8899564e0fcac9724cd357bf15d5fb42a9\n'}, {'number': 4, 'created': '2019-06-24 20:39:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/b0818e05280c3544c7d29ced863080da9f8ef6c3', 'message': 'DNM: testing ansible 2.8\n\nDepends-On: https://review.opendev.org/#/c/667219/\nChange-Id: Ie3509a8899564e0fcac9724cd357bf15d5fb42a9\n'}, {'number': 5, 'created': '2019-07-22 08:54:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/ff0bc475fe8a4dbd85cec19c19e066592e9a3644', 'message': 'DNM: testing ansible 2.8\n\nDepends-On: https://review.opendev.org/#/c/667219/\nChange-Id: Ie3509a8899564e0fcac9724cd357bf15d5fb42a9\n'}, {'number': 6, 'created': '2019-08-04 19:21:26.000000000', 'files': ['zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/f25933b9d0173804bcfc1c850a356f4c036fceea', 'message': 'DNM: testing ansible 2.8\n\nDepends-On: https://review.opendev.org/#/c/667219/\nChange-Id: Ie3509a8899564e0fcac9724cd357bf15d5fb42a9\n'}]",0,664547,f25933b9d0173804bcfc1c850a356f4c036fceea,30,2,6,10969,,,0,"DNM: testing ansible 2.8

Depends-On: https://review.opendev.org/#/c/667219/
Change-Id: Ie3509a8899564e0fcac9724cd357bf15d5fb42a9
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/47/664547/5 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/layout.yaml'],1,1da32d0aaa6a438b4bb7a13998fd592a708741b5,ansible2.8-oooq, # run with ansible 2.7,,2,0
openstack%2Ftripleo-heat-templates~master~Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb,openstack/tripleo-heat-templates,master,Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb,DNM: testing ansible 2.8,ABANDONED,2019-06-11 09:53:46.000000000,2019-08-10 10:22:58.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-11 09:53:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a9a755fbe71d1062b4f055278dbb659a12d87531', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 2, 'created': '2019-06-24 09:04:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4c5973697f8cef2ba928655382265b58fa184dc3', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 3, 'created': '2019-06-24 20:40:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/2191ac07175af310cc0c5da16e8bc4ddfcc3bff4', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 4, 'created': '2019-07-22 08:54:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/38a4dc070b12c727f502368684ab0fefc0b11399', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 5, 'created': '2019-08-04 19:22:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c7b54e84d2891e365df1f60510ac1906577c8e6e', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 6, 'created': '2019-08-07 22:44:25.000000000', 'files': ['deployment/ironic/ironic-api-container-puppet.yaml', 'zuul.d/layout.yaml', 'roles/Compute.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/76af22cccf8b35af9c3d213c918a96d58e1f56d9', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb\nDepends-On: https://review.opendev.org/#/c/667219/\n'}]",0,664544,76af22cccf8b35af9c3d213c918a96d58e1f56d9,45,3,6,10969,,,0,"DNM: testing ansible 2.8

Change-Id: Id2d4ec6af74e8e345e653ecbe5700bfc21d2b1cb
Depends-On: https://review.opendev.org/#/c/667219/
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/44/664544/6 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ironic/ironic-api-container-puppet.yaml', 'zuul.d/layout.yaml', 'roles/Compute.yaml']",3,a9a755fbe71d1062b4f055278dbb659a12d87531,ansible2.8-oooq, # test ansible 2.7,,6,0
openstack%2Ftripleo-ci~master~Iaef955b3ba738327c68f846058c03cb9d3553b6c,openstack/tripleo-ci,master,Iaef955b3ba738327c68f846058c03cb9d3553b6c,DNM: testing ansible 2.8,ABANDONED,2019-06-11 09:50:33.000000000,2019-08-10 10:22:54.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-11 09:50:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/6a410c89436ff72d03ab0c3e74bab235d85c5f86', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 2, 'created': '2019-06-24 09:03:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/1fdf817eca8c1976d5b4e6e2f132b097d04b506f', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 3, 'created': '2019-06-24 20:39:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/c2bf5276dbb8f8e880bedea6579cefe5428f5f0e', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 4, 'created': '2019-06-26 05:26:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/8f5bcb7430fc391ec8d5d7432104cdd5bbaa74f6', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 5, 'created': '2019-07-01 16:22:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/6e50ad17644546294703ec43c4dc9429f4829fa9', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 6, 'created': '2019-07-22 08:54:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/7b88b778491660982c0da791a4ba53283b09dda6', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 7, 'created': '2019-08-04 19:21:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/c8af51035c7e9c8f5650775ed35bfd8858f4360a', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/667219/\n'}, {'number': 8, 'created': '2019-08-07 22:44:32.000000000', 'files': ['toci-quickstart/config/collect-logs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/a694ce9e34b17dea3b966dbf03440b48cacf0bdd', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c\nDepends-On: https://review.opendev.org/#/c/667219/\n'}]",0,664543,a694ce9e34b17dea3b966dbf03440b48cacf0bdd,53,3,8,10969,,,0,"DNM: testing ansible 2.8

Change-Id: Iaef955b3ba738327c68f846058c03cb9d3553b6c
Depends-On: https://review.opendev.org/#/c/667219/
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/43/664543/8 && git format-patch -1 --stdout FETCH_HEAD,['toci-quickstart/config/collect-logs.yml'],1,6a410c89436ff72d03ab0c3e74bab235d85c5f86,ansible2.8-oooq, # ansible 2.7 is great,,2,0
openstack%2Ftripleo-quickstart-extras~master~I6d8599eed2d2e96f82367d64b6658871e0705040,openstack/tripleo-quickstart-extras,master,I6d8599eed2d2e96f82367d64b6658871e0705040,DNM: testing ansible 2.8,ABANDONED,2019-06-11 09:47:24.000000000,2019-08-10 10:22:34.000000000,,"[{'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-11 09:47:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/88db6e98b90ed5abdc9f731f6a21c36a0089f770', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 2, 'created': '2019-06-11 17:11:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/1d4b109b99ff911a5b190cd4aa71f8c47993a081', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/650169\nDepends-On: https://review.opendev.org/#/c/664639\n'}, {'number': 3, 'created': '2019-06-11 17:12:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/de86d0525bde4195e9860ac2e46da08391da347c', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/650169\nDepends-On: https://review.opendev.org/#/c/664639\n'}, {'number': 4, 'created': '2019-06-11 17:13:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/47d068cb112c43f392bcb2c1771f1cd41de5f7d3', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/650169\nDepends-On: https://review.opendev.org/#/c/664639\n'}, {'number': 5, 'created': '2019-06-11 17:13:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/bc915fe04b331cf40232400d89a52b9580c6553a', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 6, 'created': '2019-06-14 12:48:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/121863f26ce89adfc1bd8859ff1fc26d4e704100', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/650169\nDepends-On: https://review.opendev.org/#/c/665244/\n'}, {'number': 7, 'created': '2019-06-19 16:01:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/8b4b133795426bea6f706335590f28bba549822f', 'message': 'DNM: testing ansible 2.7\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/650169\n'}, {'number': 8, 'created': '2019-06-24 20:38:46.000000000', 'files': ['roles/overcloud-prep-network/templates/overcloud-prep-network.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/14f3c861c02abe051eaec3daac14060b923abb77', 'message': 'DNM: testing ansible 2.8\n\nChange-Id: I6d8599eed2d2e96f82367d64b6658871e0705040\nDepends-On: https://review.opendev.org/#/c/667219/\n'}]",0,664537,14f3c861c02abe051eaec3daac14060b923abb77,89,5,8,10969,,,0,"DNM: testing ansible 2.8

Change-Id: I6d8599eed2d2e96f82367d64b6658871e0705040
Depends-On: https://review.opendev.org/#/c/667219/
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/37/664537/7 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-prep-network/templates/overcloud-prep-network.sh.j2'],1,88db6e98b90ed5abdc9f731f6a21c36a0089f770,ansible2.8-oooq, # and test ansible 2.7,,2,0
openstack%2Frequirements~master~Ibc85f70fbc9f790a3491a3ed1ed8e71141c00642,openstack/requirements,master,Ibc85f70fbc9f790a3491a3ed1ed8e71141c00642,update constraint for python-vitrageclient to new release 3.0.0,MERGED,2019-08-09 15:23:04.000000000,2019-08-10 10:01:45.000000000,2019-08-10 10:01:45.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 15:23:04.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/5f6825ec3ae8ef5f13992687f8c44123f80a03bb', 'message': 'update constraint for python-vitrageclient to new release 3.0.0\n\nChange-Id: Ibc85f70fbc9f790a3491a3ed1ed8e71141c00642\nmeta:version: 3.0.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: yes\nmeta:release:Author: Eyal <eyal.bar-ilan@nokia.com>\nmeta:release:Commit: Eyal <eyal.bar-ilan@nokia.com>\nmeta:release:Change-Id: I05346253e4abd635e2033e82db5587b72e6dbd43\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Code-Review+1: Ivan Kolodyazhny <e0ne@e0ne.info>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,675642,5f6825ec3ae8ef5f13992687f8c44123f80a03bb,7,2,1,11131,,,0,"update constraint for python-vitrageclient to new release 3.0.0

Change-Id: Ibc85f70fbc9f790a3491a3ed1ed8e71141c00642
meta:version: 3.0.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: yes
meta:release:Author: Eyal <eyal.bar-ilan@nokia.com>
meta:release:Commit: Eyal <eyal.bar-ilan@nokia.com>
meta:release:Change-Id: I05346253e4abd635e2033e82db5587b72e6dbd43
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+1: Ivan Kolodyazhny <e0ne@e0ne.info>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/42/675642/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,5f6825ec3ae8ef5f13992687f8c44123f80a03bb,new-release,python-vitrageclient===3.0.0,python-vitrageclient===2.7.0,1,1
openstack%2Fceilometer~master~Ia1b75782e8a3faa506a84912c7e6718dcc6d3c5c,openstack/ceilometer,master,Ia1b75782e8a3faa506a84912c7e6718dcc6d3c5c,Fix default discovery is used when having no instance,NEW,2019-08-10 04:09:12.000000000,2019-08-10 07:07:29.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-10 04:09:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/2407f8e020c0c4021aacd34985f38274e3b9c055', 'message': 'Fix default discovery is used when having no instance\n\nWhen discovery (not default discovery) is configured in polling.yaml and obtain instances is\nempty, ceilometer will use default discovery. ceilometer should check wheter the source configure discovery.\nIf the source has no discovery configuration, the default discovery will be used.\nOtherwise, remain the configured discovery.\n\nChange-Id: Ia1b75782e8a3faa506a84912c7e6718dcc6d3c5c\nTask: #36213\nStory: #2006389\n'}, {'number': 2, 'created': '2019-08-10 04:17:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/7129dbd10bcfb0b7c9246a5dc875037fa903b117', 'message': 'Fix default discovery is used when having no instance\n\nWhen discovery (not default discovery) is configured in polling.yaml\nand obtain instances is empty, ceilometer will use default discovery.\nceilometer should check wheter the source configure discovery.\nIf the source has no discovery configuration,\nthe default discovery will be used.\nOtherwise, remain the configured discovery.\n\nChange-Id: Ia1b75782e8a3faa506a84912c7e6718dcc6d3c5c\nTask: #36213\nStory: #2006389\n'}, {'number': 3, 'created': '2019-08-10 05:54:04.000000000', 'files': ['ceilometer/polling/manager.py'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/e5c04cc57289fcd97d3f03edc023b33984067df1', 'message': 'Fix default discovery is used when having no instance\n\nWhen discovery (not default discovery) is configured in polling.yaml\nand obtain instances is empty, ceilometer will use default discovery.\nceilometer should check wheter the source configure discovery.\nIf the source has no discovery configuration,\nthe default discovery will be used.\nOtherwise, remain the configured discovery.\n\nChange-Id: Ia1b75782e8a3faa506a84912c7e6718dcc6d3c5c\nTask: #36213\nStory: #2006389\n'}]",0,675719,e5c04cc57289fcd97d3f03edc023b33984067df1,5,1,3,17144,,,0,"Fix default discovery is used when having no instance

When discovery (not default discovery) is configured in polling.yaml
and obtain instances is empty, ceilometer will use default discovery.
ceilometer should check wheter the source configure discovery.
If the source has no discovery configuration,
the default discovery will be used.
Otherwise, remain the configured discovery.

Change-Id: Ia1b75782e8a3faa506a84912c7e6718dcc6d3c5c
Task: #36213
Story: #2006389
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/19/675719/1 && git format-patch -1 --stdout FETCH_HEAD,['ceilometer/polling/manager.py'],1,2407f8e020c0c4021aacd34985f38274e3b9c055,bug/2006389," def get_discovery(self): return self._discovery if not self.resources[key].get_discovery(): if not candidate_res and pollster.obj.default_discovery: candidate_res = self.manager.discover( [pollster.obj.default_discovery], discovery_cache)"," if not candidate_res and pollster.obj.default_discovery: candidate_res = self.manager.discover( [pollster.obj.default_discovery], discovery_cache)",6,3
openstack%2Fopenstacksdk~master~I3940a8e93d0fc69244794a81b9d2c81d53b54986,openstack/openstacksdk,master,I3940a8e93d0fc69244794a81b9d2c81d53b54986,bug: avoid unnecessary object meta prefix,MERGED,2019-08-09 19:31:40.000000000,2019-08-10 06:40:50.000000000,2019-08-10 06:40:50.000000000,"[{'_account_id': 2}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2019-08-09 19:31:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/e6ac4bdfb153f059389c3478335ceb8ef1019fee', 'message': ""bug: avoid unnecessary object meta prefix\n\nSome hard coded values for object headers are already including the\nrequired 'x-object-meta-' prefix. In some cases, like the header\nfor _OBJECT_AUTOCREATE_KEY, we were unnecessarily adding the prefix\nto the header name.\n\nChange-Id: I3940a8e93d0fc69244794a81b9d2c81d53b54986\n""}, {'number': 2, 'created': '2019-08-09 19:47:21.000000000', 'files': ['openstack/cloud/_object_store.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/09cdcc002055c28a7ff6e2bb9fecc68af8fd52c1', 'message': ""bug: avoid unnecessary object meta prefix\n\nSome hard coded values for object headers are already including the\nrequired 'x-object-meta-' prefix. In some cases, like the header\nfor _OBJECT_AUTOCREATE_KEY, we were unnecessarily adding the prefix\nto the header name.\n\nChange-Id: I3940a8e93d0fc69244794a81b9d2c81d53b54986\n""}]",0,675683,09cdcc002055c28a7ff6e2bb9fecc68af8fd52c1,9,3,2,3099,,,0,"bug: avoid unnecessary object meta prefix

Some hard coded values for object headers are already including the
required 'x-object-meta-' prefix. In some cases, like the header
for _OBJECT_AUTOCREATE_KEY, we were unnecessarily adding the prefix
to the header name.

Change-Id: I3940a8e93d0fc69244794a81b9d2c81d53b54986
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/83/675683/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack/cloud/_object_store.py'],1,e6ac4bdfb153f059389c3478335ceb8ef1019fee,object-fixes, if not k.lower().startswith('x-object-meta-'): headers['x-object-meta-' + k] = v else: headers[k] = v, headers['x-object-meta-' + k] = v,4,1
openstack%2Frequirements~master~I51333571eb2bc81c83793dfb4559971fe162be68,openstack/requirements,master,I51333571eb2bc81c83793dfb4559971fe162be68,Updated from generate-constraints,ABANDONED,2019-08-10 06:15:11.000000000,2019-08-10 06:25:24.000000000,,[],"[{'number': 1, 'created': '2019-08-10 06:15:11.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/99da3dc3236db441a37341dec6cfbec69e675f79', 'message': 'Updated from generate-constraints\n\nChange-Id: I51333571eb2bc81c83793dfb4559971fe162be68\n'}]",0,675723,99da3dc3236db441a37341dec6cfbec69e675f79,2,0,1,11131,,,0,"Updated from generate-constraints

Change-Id: I51333571eb2bc81c83793dfb4559971fe162be68
",git fetch https://review.opendev.org/openstack/requirements refs/changes/23/675723/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,99da3dc3236db441a37341dec6cfbec69e675f79,openstack/requirements/constraints,lxml===4.4.0pytest===4.6.5;python_version=='2.7'pysnmp===4.4.10Mako===1.1.0python-vitrageclient===3.0.0scipy===1.3.1;python_version=='3.4' scipy===1.3.1;python_version=='3.5' scipy===1.3.1;python_version=='3.6' scipy===1.3.1;python_version=='3.7'ruamel.yaml.clib===0.1.2sphinxcontrib.datatemplates===0.5.0arrow===0.14.5tornado===5.1.1;python_version=='2.7'PyYAML===5.1.2python-3parclient===4.2.10libvirt-python===5.6.0ruamel.yaml===0.16.1daiquiri===1.6.0autobahn===19.8.1gabbi===1.49.0boto3===1.9.205stestr===2.5.0metalsmith===0.14.0infinisdk===141.1.0 packaging===19.1protobuf===3.9.1kubernetes===10.0.0botocore===1.12.205pyasn1===0.4.6Django===1.11.23;python_version=='2.7'redis===3.3.6openstacksdk===0.33.0pyzmq===18.1.0pymemcache===2.2.2pyasn1-modules===0.2.6keystoneauth1===3.16.0storops===1.2.0jsonschema===3.0.2oauthlib===3.1.0pytz===2019.2,lxml===4.3.4pytest===4.6.4;python_version=='2.7'pysnmp===4.4.9Mako===1.0.14python-vitrageclient===2.7.0scipy===1.3.0;python_version=='3.4' scipy===1.3.0;python_version=='3.5' scipy===1.3.0;python_version=='3.6' scipy===1.3.0;python_version=='3.7'ruamel.yaml.clib===0.1.0sphinxcontrib.datatemplates===0.4.0arrow===0.14.3tornado===4.5.3;python_version=='2.7'PyYAML===5.1.1python-3parclient===4.2.9libvirt-python===5.5.0ruamel.yaml===0.16.0daiquiri===1.5.0autobahn===19.7.2gabbi===1.48.0boto3===1.9.191stestr===2.4.0metalsmith===0.13.0infinisdk===127.2.1 packaging===19.0protobuf===3.9.0kubernetes===9.0.0botocore===1.12.191pyasn1===0.4.5Django===1.11.22;python_version=='2.7'redis===3.3.2openstacksdk===0.32.0pyzmq===18.0.2pymemcache===2.1.1pyasn1-modules===0.2.5keystoneauth1===3.15.0storops===1.1.0jsonschema===2.6.0oauthlib===3.0.2pytz===2019.1,40,40
openstack%2Fcompute-hyperv~master~Iddd6c2cad1e6f94b1904e1f1196f6c7dee1b2f99,openstack/compute-hyperv,master,Iddd6c2cad1e6f94b1904e1f1196f6c7dee1b2f99,Update driver interface,MERGED,2019-08-07 19:45:07.000000000,2019-08-10 05:49:31.000000000,2019-08-10 05:49:31.000000000,"[{'_account_id': 8213}, {'_account_id': 8543}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 19:45:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/compute-hyperv/commit/d752082dea97aa081a0496cd974b7429a4489ca7', 'message': ""Pass migration to finish_revert_migration()\n\nThe Hyper-V driver doesn't actually use this argument but the\nsignature must be updated to match the one of the base driver.\n\nChange-Id: Iddd6c2cad1e6f94b1904e1f1196f6c7dee1b2f99\n""}, {'number': 2, 'created': '2019-08-08 11:44:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/compute-hyperv/commit/dc02541042c7e0da803f785414627e4ae6b682e4', 'message': 'Update driver interface\n\nfinish_revert_migration() now accepts a migration object and\nestimate_instance_overhead() has been dropped.\n\nChange-Id: Iddd6c2cad1e6f94b1904e1f1196f6c7dee1b2f99\n'}, {'number': 3, 'created': '2019-08-08 16:44:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/compute-hyperv/commit/50d3ea3270316111325571e4e2226d3b0a27589d', 'message': 'Update driver interface\n\nfinish_revert_migration() now accepts a migration object and\nestimate_instance_overhead() has been dropped.\n\nChange-Id: Iddd6c2cad1e6f94b1904e1f1196f6c7dee1b2f99\n'}, {'number': 4, 'created': '2019-08-09 18:45:38.000000000', 'files': ['compute_hyperv/tests/unit/cluster/test_driver.py', 'compute_hyperv/nova/cluster/driver.py', 'compute_hyperv/nova/vmops.py', 'compute_hyperv/nova/driver.py', 'compute_hyperv/tests/unit/test_vmops.py', 'compute_hyperv/tests/unit/test_driver.py'], 'web_link': 'https://opendev.org/openstack/compute-hyperv/commit/20ee0665c5058b3f1ba32d6fd002920eee673176', 'message': 'Update driver interface\n\nfinish_revert_migration() now accepts a migration object and\nestimate_instance_overhead() has been dropped.\n\nChange-Id: Iddd6c2cad1e6f94b1904e1f1196f6c7dee1b2f99\n'}]",0,675186,20ee0665c5058b3f1ba32d6fd002920eee673176,18,3,4,8543,,,0,"Update driver interface

finish_revert_migration() now accepts a migration object and
estimate_instance_overhead() has been dropped.

Change-Id: Iddd6c2cad1e6f94b1904e1f1196f6c7dee1b2f99
",git fetch https://review.opendev.org/openstack/compute-hyperv refs/changes/86/675186/1 && git format-patch -1 --stdout FETCH_HEAD,"['compute_hyperv/nova/driver.py', 'compute_hyperv/tests/unit/test_driver.py']",2,d752082dea97aa081a0496cd974b7429a4489ca7,," mock.sentinel.network_info, mock.sentinel.migration, mock.sentinel.block_device_info, mock.sentinel.power_on)"," mock.sentinel.network_info, mock.sentinel.block_device_info, mock.sentinel.power_on)",4,3
openstack%2Fnova~stable%2Fqueens~Id14993db6ea33b2da14caa4b58671fc57c182706,openstack/nova,stable/queens,Id14993db6ea33b2da14caa4b58671fc57c182706,Fix type error on call to mount device,MERGED,2019-07-08 09:57:47.000000000,2019-08-10 05:35:56.000000000,2019-08-10 03:30:52.000000000,"[{'_account_id': 6873}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 14595}, {'_account_id': 16128}, {'_account_id': 19490}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-08 09:57:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a7bd326d37f57a46619820f3d69ee9e4fe9fecba', 'message': 'Fix type error on call to mount device\n\nThe call in nova.virt.disk.mount.api.Mount.mnt_dev() to\nnova.privsep.fs.mount() should include the `options` argument to\nfulfill with the method signature.\n\nThe test test_do_mount_need_to_specify_fs_type has been modified to\ncheck that the caller use the correct signature.\n\nCloses-Bug: 1829506\n\nChange-Id: Id14993db6ea33b2da14caa4b58671fc57c182706\nSigned-off-by: Miguel Herranz <miguel@midokura.com>\n(cherry picked from commit d2ef1ce309c28a5416af4cc00662ad6925574004)\n'}, {'number': 2, 'created': '2019-08-09 13:35:07.000000000', 'files': ['nova/virt/disk/mount/api.py', 'nova/tests/unit/virt/disk/mount/test_nbd.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/f77c628b4f08a625bebe8b8b3bb24a8e9784a226', 'message': 'Fix type error on call to mount device\n\nThe call in nova.virt.disk.mount.api.Mount.mnt_dev() to\nnova.privsep.fs.mount() should include the `options` argument to\nfulfill with the method signature.\n\nThe test test_do_mount_need_to_specify_fs_type has been modified to\ncheck that the caller use the correct signature.\n\nCloses-Bug: 1829506\n\nChange-Id: Id14993db6ea33b2da14caa4b58671fc57c182706\nSigned-off-by: Miguel Herranz <miguel@midokura.com>\n(cherry picked from commit d2ef1ce309c28a5416af4cc00662ad6925574004)\n(cherry picked from commit 8371073ac7a3439ea5b6ce9091a91e77cf88020e)\n(cherry picked from commit e3cd1d9baa74181cbac1765291ad67654b35721d)\n'}]",1,669629,f77c628b4f08a625bebe8b8b3bb24a8e9784a226,21,9,2,19490,,,0,"Fix type error on call to mount device

The call in nova.virt.disk.mount.api.Mount.mnt_dev() to
nova.privsep.fs.mount() should include the `options` argument to
fulfill with the method signature.

The test test_do_mount_need_to_specify_fs_type has been modified to
check that the caller use the correct signature.

Closes-Bug: 1829506

Change-Id: Id14993db6ea33b2da14caa4b58671fc57c182706
Signed-off-by: Miguel Herranz <miguel@midokura.com>
(cherry picked from commit d2ef1ce309c28a5416af4cc00662ad6925574004)
(cherry picked from commit 8371073ac7a3439ea5b6ce9091a91e77cf88020e)
(cherry picked from commit e3cd1d9baa74181cbac1765291ad67654b35721d)
",git fetch https://review.opendev.org/openstack/nova refs/changes/29/669629/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/disk/mount/api.py', 'nova/tests/unit/virt/disk/mount/test_nbd.py']",2,a7bd326d37f57a46619820f3d69ee9e4fe9fecba,bug/1829506," mock_mount.assert_called_once_with( None, None, tempdir, None)",,3,1
openstack%2Fironic~master~Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f,openstack/ironic,master,Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f,devstack: allow creating more than one volume for a VM,MERGED,2019-07-31 12:17:32.000000000,2019-08-10 04:47:46.000000000,2019-08-09 17:48:07.000000000,"[{'_account_id': 10118}, {'_account_id': 10239}, {'_account_id': 11929}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 24828}]","[{'number': 1, 'created': '2019-07-31 12:17:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/310ef190ad5bf4a41285b502891afacbb5360ff0', 'message': 'devstack: allow creating more than one volume for a VM\n\nThis is needed to easily test software RAID.\n\nChange-Id: Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f\n'}, {'number': 2, 'created': '2019-07-31 13:21:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/9c29241ff3f2645260e0c9c511f97b604fc5bc4a', 'message': 'devstack: allow creating more than one volume for a VM\n\nThis is needed to easily test software RAID.\n\nChange-Id: Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f\n'}, {'number': 3, 'created': '2019-07-31 15:32:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/57909dc0d0964a5e800abc861733d3478108ac0d', 'message': 'devstack: allow creating more than one volume for a VM\n\nThis is needed to easily test software RAID.\n\nChange-Id: Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f\n'}, {'number': 4, 'created': '2019-07-31 15:35:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/645895a7a715126ca1ffc05bafe9b9fe6e138094', 'message': 'devstack: allow creating more than one volume for a VM\n\nThis is needed to easily test software RAID.\n\nChange-Id: Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f\n'}, {'number': 5, 'created': '2019-08-07 07:14:17.000000000', 'files': ['devstack/lib/ironic', 'devstack/tools/ironic/templates/vm.xml', 'devstack/tools/ironic/scripts/configure-vm.py', 'devstack/tools/ironic/scripts/create-node.sh'], 'web_link': 'https://opendev.org/openstack/ironic/commit/c7bd03cf688c7059c694e07da34506f4a64a21ac', 'message': 'devstack: allow creating more than one volume for a VM\n\nThis is needed to easily test software RAID.\n\nChange-Id: Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f\n'}]",6,673800,c7bd03cf688c7059c694e07da34506f4a64a21ac,40,8,5,10239,,,0,"devstack: allow creating more than one volume for a VM

This is needed to easily test software RAID.

Change-Id: Ia1bc81db97c6d5d1f79c4e1cfea1ab29fd988c3f
",git fetch https://review.opendev.org/openstack/ironic refs/changes/00/673800/2 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/lib/ironic', 'devstack/tools/ironic/templates/vm.xml', 'devstack/tools/ironic/scripts/configure-vm.py', 'devstack/tools/ironic/scripts/create-node.sh']",4,310ef190ad5bf4a41285b502891afacbb5360ff0,volume-count,"while getopts ""n:c:i:m:M:d:a:b:e:E:p:o:f:l:L:N:A:D:v:"" arg; do v) VOLUME_COUNT=$OPTARG;;VOLUME_COUNT=${VOLUME_COUNT:-1} for int in $(seq 1 $INTERFACE_COUNT); do if [[ ""$int"" == ""1"" ]]; then # Compatibility with old naming vol_name=""$NAME.$DISK_FORMAT"" else vol_name=""$NAME-$int.$DISK_FORMAT"" fi virsh vol-list --pool $LIBVIRT_STORAGE_POOL | grep -q $vol_name && virsh vol-delete $vol_name --pool $LIBVIRT_STORAGE_POOL >&2 virsh vol-create-as $LIBVIRT_STORAGE_POOL ${vol_name} ${DISK}G --format $DISK_FORMAT $PREALLOC >&2 volume_path=$(virsh vol-path --pool $LIBVIRT_STORAGE_POOL $vol_name) # Pre-touch the VM to set +C, as it can only be set on empty files. sudo touch ""$volume_path"" sudo chattr +C ""$volume_path"" || true vm_opts+=""--image \""$volume_path\"" "" done --bootdev network --name $NAME \","while getopts ""n:c:i:m:M:d:a:b:e:E:p:o:f:l:L:N:A:D:"" arg; doVOL_NAME=""${NAME}.${DISK_FORMAT}"" virsh vol-list --pool $LIBVIRT_STORAGE_POOL | grep -q $VOL_NAME && virsh vol-delete $VOL_NAME --pool $LIBVIRT_STORAGE_POOL >&2 virsh vol-create-as $LIBVIRT_STORAGE_POOL ${VOL_NAME} ${DISK}G --format $DISK_FORMAT $PREALLOC >&2 volume_path=$(virsh vol-path --pool $LIBVIRT_STORAGE_POOL $VOL_NAME) # Pre-touch the VM to set +C, as it can only be set on empty files. sudo touch ""$volume_path"" sudo chattr +C ""$volume_path"" || true --bootdev network --name $NAME --image ""$volume_path"" \",33,15
openstack%2Ftripleo-heat-templates~master~I6a73f7f22dda69bef324ffdaecdcd6be693c1257,openstack/tripleo-heat-templates,master,I6a73f7f22dda69bef324ffdaecdcd6be693c1257,Removal of OpenShift deployed by TripleO support,MERGED,2019-08-06 15:30:56.000000000,2019-08-10 04:37:20.000000000,2019-08-10 04:37:20.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 13039}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 15:30:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/66e64370519da30f29c14d31433798226ffa507b', 'message': 'Removal of OpenShift deployed by TripleO support\n\nOpenShift deployed by TripleO support has been removed in a downstream\nversion of Stein which make the upstream support difficult to maintain.\nOpenShift can be deployed using OpenShift-Ansible and\nusers who desire to deploy OpenShift 3.11 onto bare metal nodes can\nstill do so using openshift-ansible directly. The provisioning of\nthe Operating System on baremetal can be done with OpenStack Ironic on\nthe Overcloud or also can be done with deployed-servers, achieving the\nsame result.\n\nChange-Id: I6a73f7f22dda69bef324ffdaecdcd6be693c1257\n'}, {'number': 2, 'created': '2019-08-06 21:22:29.000000000', 'files': ['README.rst', 'roles/OpenShiftAllInOne.yaml', 'ci/environments/scenario009-multinode.yaml', 'network/endpoints/endpoint_map.yaml', 'roles/OpenShiftMaster.yaml', 'roles/OpenShiftWorker.yaml', 'environments/ssl/no-tls-endpoints-public-ip.yaml', 'environments/openshift.yaml', 'environments/ssl/tls-everywhere-endpoints-dns.yaml', 'network/endpoints/endpoint_data.yaml', 'tools/yaml-validate.py', 'zuul.d/layout.yaml', 'network/service_net_map.j2.yaml', 'deployment/openshift/openshift-node-baremetal-ansible.yaml', 'environments/ssl/tls-endpoints-public-ip.yaml', 'network_data_openshift.yaml', 'environments/openshift-cns.yaml', 'roles/OpenShiftInfra.yaml', 'sample-env-generator/ssl.yaml', 'deployment/openshift/openshift-cns-baremetal-ansible.yaml', 'deployment/openshift/openshift-master-baremetal-ansible.yaml', 'environments/ssl/tls-endpoints-public-dns.yaml', 'deployment/openshift/openshift-infra-baremetal-ansible.yaml', 'releasenotes/notes/openshift-removal-d7efdc1696a1999e.yaml', 'deployment/openshift/openshift-worker-baremetal-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c845595ba3c9f8ad88e0dad24d56c7349fbd3d1b', 'message': 'Removal of OpenShift deployed by TripleO support\n\nOpenShift deployed by TripleO support has been removed in a downstream\nversion of Stein which make the upstream support difficult to maintain.\nOpenShift can be deployed using OpenShift-Ansible and\nusers who desire to deploy OpenShift 3.11 onto bare metal nodes can\nstill do so using openshift-ansible directly. The provisioning of\nthe Operating System on baremetal can be done with OpenStack Ironic on\nthe Overcloud or also can be done with deployed-servers, achieving the\nsame result.\n\nChange-Id: I6a73f7f22dda69bef324ffdaecdcd6be693c1257\n'}]",0,674847,c845595ba3c9f8ad88e0dad24d56c7349fbd3d1b,25,7,2,3153,,,0,"Removal of OpenShift deployed by TripleO support

OpenShift deployed by TripleO support has been removed in a downstream
version of Stein which make the upstream support difficult to maintain.
OpenShift can be deployed using OpenShift-Ansible and
users who desire to deploy OpenShift 3.11 onto bare metal nodes can
still do so using openshift-ansible directly. The provisioning of
the Operating System on baremetal can be done with OpenStack Ironic on
the Overcloud or also can be done with deployed-servers, achieving the
same result.

Change-Id: I6a73f7f22dda69bef324ffdaecdcd6be693c1257
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/47/674847/2 && git format-patch -1 --stdout FETCH_HEAD,"['README.rst', 'roles/OpenShiftAllInOne.yaml', 'ci/environments/scenario009-multinode.yaml', 'network/endpoints/endpoint_map.yaml', 'roles/OpenShiftMaster.yaml', 'roles/OpenShiftWorker.yaml', 'environments/ssl/no-tls-endpoints-public-ip.yaml', 'environments/openshift.yaml', 'environments/ssl/tls-everywhere-endpoints-dns.yaml', 'network/endpoints/endpoint_data.yaml', 'tools/yaml-validate.py', 'zuul.d/layout.yaml', 'network/service_net_map.j2.yaml', 'deployment/openshift/openshift-node-baremetal-ansible.yaml', 'environments/ssl/tls-endpoints-public-ip.yaml', 'environments/openshift-cns.yaml', 'roles/OpenShiftInfra.yaml', 'sample-env-generator/ssl.yaml', 'deployment/openshift/openshift-cns-baremetal-ansible.yaml', 'deployment/openshift/openshift-master-baremetal-ansible.yaml', 'environments/ssl/tls-endpoints-public-dns.yaml', 'deployment/openshift/openshift-infra-baremetal-ansible.yaml', 'releasenotes/notes/openshift-removal-d7efdc1696a1999e.yaml', 'deployment/openshift/openshift-worker-baremetal-ansible.yaml']",24,66e64370519da30f29c14d31433798226ffa507b,openshift/removal,,"heat_template_version: rocky description: External tasks definition for OpenShift parameters: RoleNetIpMap: default: {} type: json ServiceData: default: {} description: Dictionary packing service data type: json ServiceNetMap: default: {} description: Mapping of service_name -> network name. Typically set via parameter_defaults in the resource registry. This mapping overrides those in ServiceNetMapDefaults. type: json DefaultPasswords: default: {} type: json RoleName: default: '' description: Role name on which the service is applied type: string RoleParameters: default: {} description: Parameters specific to the role type: json EndpointMap: default: {} description: Mapping of service endpoint -> protocol. Typically set via parameter_defaults in the resource registry. type: json # TODO(mandre) This is unused. Remove it or make it OpenShiftNodeVars OpenShiftWorkerNodeVars: default: {} description: OpenShift node vars specific for the worker nodes type: json resources: OpenShiftNode: type: ./openshift-node-baremetal-ansible.yaml properties: EndpointMap: {get_param: EndpointMap} ServiceNetMap: {get_param: ServiceNetMap} DefaultPasswords: {get_param: DefaultPasswords} RoleName: {get_param: RoleName} RoleParameters: {get_param: RoleParameters} outputs: role_data: description: Role data for the Openshift Service value: service_name: openshift_worker config_settings: {get_attr: [OpenShiftNode, role_data, config_settings]} upgrade_tasks: [] step_config: '' external_deploy_tasks: - get_attr: [OpenShiftNode, role_data, external_deploy_tasks] ",11,1877
openstack%2Fkeystone~master~I3d07637b0046cc88a66bcb51a0a4fe7c146c1549,openstack/keystone,master,I3d07637b0046cc88a66bcb51a0a4fe7c146c1549,Docs: Make robust with using real links,MERGED,2019-08-09 16:49:37.000000000,2019-08-10 04:26:55.000000000,2019-08-10 04:26:54.000000000,"[{'_account_id': 2903}, {'_account_id': 6547}, {'_account_id': 8482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 16:49:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/3005ecdc0c9e0b4344fa96c54a363e81c6052126', 'message': 'Docs: Make robust with using real links\n\nOur tools noticed that keystone links to\nhttps://docs.openstack.org/keystone/latest/admin/identity-domain-specific-config.html\nwhich does not exist anymore.\n\nThe page was removed but the link to it was not changed. Replace this\nand similar links with internal links that will work even if files are\nmoved - and can be verified, thus sphinx will error in case of broken\ntargets.\n\nThese changes include a few other fixes for broken keystone links, e.g.\nto renamed anchors.\n\nDo not use includes in admin/configuration.rst and\nadmin/federation/configure_federation.rst - the files were\npublished twice (as separate files and on this page) and thus\nreferencing failed. Use a normal toctree instead.\n\nChange-Id: I3d07637b0046cc88a66bcb51a0a4fe7c146c1549\n'}, {'number': 2, 'created': '2019-08-09 18:15:26.000000000', 'files': ['doc/source/admin/federation/shibboleth.inc', 'doc/source/admin/domain-specific-config.inc', 'doc/source/admin/endpoint-filtering.inc', 'doc/source/contributor/auth-plugins.rst', 'doc/source/admin/federation/mellon.inc', 'doc/source/admin/resource-options.rst', 'doc/source/contributor/developing-drivers.rst', 'doc/source/admin/configuration.rst', 'doc/source/admin/identity-concepts.rst', 'doc/source/admin/caching-layer.inc', 'doc/source/admin/event_notifications.rst', 'doc/source/admin/identity-sources.rst', 'doc/source/configuration/config-options.rst', 'doc/source/contributor/proposing-features.rst', 'doc/source/contributor/api_change_tutorial.rst', 'doc/source/admin/security-compliance.inc', 'doc/source/admin/manage-trusts.rst', 'doc/source/contributor/services.rst', 'doc/source/admin/endpoint-policy.inc', 'doc/source/contributor/vision-reflection.rst', 'doc/source/install/keystone-install-rdo.rst', 'doc/source/install/keystone-install-ubuntu.rst', 'doc/source/admin/federation/configure_federation.rst', 'doc/source/admin/limit-list-size.inc', 'doc/source/user/trusts.rst', 'doc/source/admin/manage-services.rst', 'doc/source/admin/federation/openidc.inc', 'doc/source/admin/troubleshoot.inc', 'doc/source/admin/logging.inc', 'doc/source/admin/url-safe-naming.inc', 'doc/source/user/application_credentials.rst', 'doc/source/configuration/index.rst', 'doc/source/admin/tokens-overview.rst', 'doc/source/admin/federation/introduction.rst', 'doc/source/contributor/how-can-i-help.rst', 'doc/source/admin/integrate-with-ldap.inc', 'tox.ini', 'doc/source/admin/performance.inc', 'doc/source/install/keystone-install-obs.rst'], 'web_link': 'https://opendev.org/openstack/keystone/commit/f10f95b455806ce28b112827a794618957e1f829', 'message': 'Docs: Make robust with using real links\n\nOur tools noticed that keystone links to\nhttps://docs.openstack.org/keystone/latest/admin/identity-domain-specific-config.html\nwhich does not exist anymore.\n\nThe page was removed but the link to it was not changed. Replace this\nand similar links with internal links that will work even if files are\nmoved - and can be verified, thus sphinx will error in case of broken\ntargets.\n\nThese changes include a few other fixes for broken keystone links, e.g.\nto renamed anchors.\n\nFor the include files in admin/configuration.rst and\nadmin/federation/configure_federation.rst: Rename them to *inc.\nThe files were\npublished twice (as separate files and on this page) and thus\nreferencing failed. Renaming avoids this.\n\nAlso, put doctree outside of html tree so that it does not get\npublished.\n\nChange-Id: I3d07637b0046cc88a66bcb51a0a4fe7c146c1549\n'}]",4,675667,f10f95b455806ce28b112827a794618957e1f829,11,4,2,6547,,,0,"Docs: Make robust with using real links

Our tools noticed that keystone links to
https://docs.openstack.org/keystone/latest/admin/identity-domain-specific-config.html
which does not exist anymore.

The page was removed but the link to it was not changed. Replace this
and similar links with internal links that will work even if files are
moved - and can be verified, thus sphinx will error in case of broken
targets.

These changes include a few other fixes for broken keystone links, e.g.
to renamed anchors.

For the include files in admin/configuration.rst and
admin/federation/configure_federation.rst: Rename them to *inc.
The files were
published twice (as separate files and on this page) and thus
referencing failed. Renaming avoids this.

Also, put doctree outside of html tree so that it does not get
published.

Change-Id: I3d07637b0046cc88a66bcb51a0a4fe7c146c1549
",git fetch https://review.opendev.org/openstack/keystone refs/changes/67/675667/2 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/contributor/auth-plugins.rst', 'doc/source/admin/resource-options.rst', 'doc/source/contributor/developing-drivers.rst', 'doc/source/admin/configuration.rst', 'doc/source/admin/identity-concepts.rst', 'doc/source/admin/identity-sources.rst', 'doc/source/configuration/config-options.rst', 'doc/source/contributor/proposing-features.rst', 'doc/source/contributor/api_change_tutorial.rst', 'doc/source/admin/manage-trusts.rst', 'doc/source/contributor/services.rst', 'doc/source/contributor/vision-reflection.rst', 'doc/source/admin/federation/mellon.rst', 'doc/source/install/keystone-install-rdo.rst', 'doc/source/install/keystone-install-ubuntu.rst', 'doc/source/admin/federation/configure_federation.rst', 'doc/source/admin/federation/openidc.rst', 'doc/source/user/trusts.rst', 'doc/source/admin/manage-services.rst', 'doc/source/user/application_credentials.rst', 'doc/source/configuration/index.rst', 'doc/source/admin/tokens-overview.rst', 'doc/source/admin/federation/introduction.rst', 'doc/source/admin/domain-specific-config.rst', 'doc/source/contributor/how-can-i-help.rst', 'doc/source/admin/federation/shibboleth.rst', 'doc/source/install/keystone-install-obs.rst']",27,3005ecdc0c9e0b4344fa96c54a363e81c6052126,broken-links,.. _suse_configure_apache: ,,109,102
openstack%2Fswift~master~Icb0d3e3708949127e9750f2022de8c74ce51ebe9,openstack/swift,master,Icb0d3e3708949127e9750f2022de8c74ce51ebe9,Allow Connection: value to be case-insensitive,MERGED,2019-08-09 20:07:07.000000000,2019-08-10 03:58:38.000000000,2019-08-10 03:57:34.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 20:07:07.000000000', 'files': ['test/functional/tests.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/c90365f98d64a38aa6a76a7efcd803470be384bd', 'message': 'Allow Connection: value to be case-insensitive\n\nProxies and LBs parse the Connection: header and re-insert\nthe value with random casing. This occurs when we run functional\ntests against realistic clusters.\n\nChange-Id: Icb0d3e3708949127e9750f2022de8c74ce51ebe9\n'}]",0,675696,c90365f98d64a38aa6a76a7efcd803470be384bd,7,2,1,597,,,0,"Allow Connection: value to be case-insensitive

Proxies and LBs parse the Connection: header and re-insert
the value with random casing. This occurs when we run functional
tests against realistic clusters.

Change-Id: Icb0d3e3708949127e9750f2022de8c74ce51ebe9
",git fetch https://review.opendev.org/openstack/swift refs/changes/96/675696/1 && git format-patch -1 --stdout FETCH_HEAD,['test/functional/tests.py'],1,c90365f98d64a38aa6a76a7efcd803470be384bd,py3/func-keepalive, # The Connection: header is parsed by cluster's LB and may # be returned in either original lowercase or camel-cased. if k == 'connection': got_v = got_v.lower(),,4,0
openstack%2Fswift~stable%2Fstein~I32f51f42d76db38271442a261600089404a00f91,openstack/swift,stable/stein,I32f51f42d76db38271442a261600089404a00f91,container-replicator: Add a timeout for get_shard_ranges,MERGED,2019-08-08 18:21:31.000000000,2019-08-10 03:57:32.000000000,2019-08-10 03:57:32.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 18:21:31.000000000', 'files': ['test/unit/container/test_replicator.py', 'swift/common/db_replicator.py', 'swift/container/replicator.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/4a7104b0c5b4f1793b4c4d46a3535c6c901182bd', 'message': ""container-replicator: Add a timeout for get_shard_ranges\n\nPreviously this had no timeout, which meant that the replicator might\nhang and fail to make progress indefinitely while trying to receive\nshard ranges.\n\nWhile we're at it, only call get_shard_ranges when the remote indicates\nthat it has shard ranges for us to sync -- this reduces the number of\nrequests necessary to bring unsharded replicas in sync.\n\nChange-Id: I32f51f42d76db38271442a261600089404a00f91\nCloses-Bug: #1835260\n(cherry picked from commit 4c4bd778ea8fe8d02a2892524c7918da0ca25ea9)\n""}]",0,675432,4a7104b0c5b4f1793b4c4d46a3535c6c901182bd,8,2,1,15343,,,0,"container-replicator: Add a timeout for get_shard_ranges

Previously this had no timeout, which meant that the replicator might
hang and fail to make progress indefinitely while trying to receive
shard ranges.

While we're at it, only call get_shard_ranges when the remote indicates
that it has shard ranges for us to sync -- this reduces the number of
requests necessary to bring unsharded replicas in sync.

Change-Id: I32f51f42d76db38271442a261600089404a00f91
Closes-Bug: #1835260
(cherry picked from commit 4c4bd778ea8fe8d02a2892524c7918da0ca25ea9)
",git fetch https://review.opendev.org/openstack/swift refs/changes/32/675432/1 && git format-patch -1 --stdout FETCH_HEAD,"['test/unit/container/test_replicator.py', 'swift/common/db_replicator.py', 'swift/container/replicator.py']",3,4a7104b0c5b4f1793b4c4d46a3535c6c901182bd,bug/1835260," if remote_info.get('shard_max_row', -1) >= 0: with Timeout(self.node_timeout): response = http.replicate('get_shard_ranges')", if 'shard_max_row' in remote_info: response = http.replicate('get_shard_ranges'),103,14
openstack%2Fkeystone~master~Icce8b54e45ad94ca41a6b47ec6109346dc886334,openstack/keystone,master,Icce8b54e45ad94ca41a6b47ec6109346dc886334,Add manager support for app cred access rules,MERGED,2019-06-06 00:43:44.000000000,2019-08-10 03:57:30.000000000,2019-08-10 03:57:29.000000000,"[{'_account_id': 2903}, {'_account_id': 5046}, {'_account_id': 8482}, {'_account_id': 22348}, {'_account_id': 27621}]","[{'number': 1, 'created': '2019-06-06 00:43:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/534b85a82be2821519b7d2252c6cc8ce2124dc76', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}, {'number': 2, 'created': '2019-06-07 18:20:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/4e8ab188de977b5e9bb713a5e14f5b5775a067bb', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}, {'number': 3, 'created': '2019-06-07 19:51:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/e8d56f6988cc09e89b0e116c9747c040ad10d1fc', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}, {'number': 4, 'created': '2019-06-10 21:30:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/97666072b4707a53f3a24ac5f1b0430a71494467', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}, {'number': 5, 'created': '2019-06-11 22:46:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/fa2dc1851cce8695c38c1afe041b54e88d2587ab', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}, {'number': 6, 'created': '2019-06-27 21:28:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/00517f9ea9a52c4079e6e011263da35b309c6113', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}, {'number': 7, 'created': '2019-07-05 19:12:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/776e528055bb70db20207c02d205745cde87acec', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}, {'number': 8, 'created': '2019-08-01 19:57:54.000000000', 'files': ['keystone/application_credential/core.py', 'keystone/tests/unit/application_credential/test_backends.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/ee7315971c87449c0a73b5a596fb24e8ca21f555', 'message': 'Add manager support for app cred access rules\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334\n'}]",4,663462,ee7315971c87449c0a73b5a596fb24e8ca21f555,26,5,8,8482,,,0,"Add manager support for app cred access rules

bp whitelist-extension-for-app-creds

Change-Id: Icce8b54e45ad94ca41a6b47ec6109346dc886334
",git fetch https://review.opendev.org/openstack/keystone refs/changes/62/663462/8 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/application_credential/core.py', 'keystone/tests/unit/application_credential/test_backends.py']",2,534b85a82be2821519b7d2252c6cc8ce2124dc76,bp/whitelist-extension-for-app-creds," def test_create_application_credential_with_access_rules(self): app_cred = self._new_app_cred_data(self.user_foo['id'], project_id=self.project_bar['id']) app_cred['access_rules'] = [{ 'id': uuid.uuid4().hex, 'service': uuid.uuid4().hex, 'path': uuid.uuid4().hex, 'method': uuid.uuid4().hex[16:] }] resp = self.app_cred_api.create_application_credential(app_cred) resp.pop('roles') resp_access_rules = resp.pop('access_rules') app_cred.pop('roles') orig_access_rules = app_cred.pop('access_rules') self.assertDictEqual(app_cred, resp) for i, ar in enumerate(resp_access_rules): self.assertDictEqual(orig_access_rules[i], ar) def test_create_application_credential_with_preexisting_access_rules(self): app_cred_1 = self._new_app_cred_data(self.user_foo['id'], project_id=self.project_bar['id']) app_cred_1['access_rules'] = [{ 'id': uuid.uuid4().hex, 'service': uuid.uuid4().hex, 'path': uuid.uuid4().hex, 'method': uuid.uuid4().hex[16:] }] resp = self.app_cred_api.create_application_credential(app_cred_1) resp_access_rules_1 = resp.pop('access_rules') app_cred_2 = self._new_app_cred_data(self.user_foo['id'], project_id=self.project_bar['id']) app_cred_2['access_rules'] = [{'id': resp_access_rules_1[0]['id']}] resp = self.app_cred_api.create_application_credential(app_cred_2) resp_access_rules_2 = resp.pop('access_rules') self.assertDictEqual(resp_access_rules_1[0], resp_access_rules_2[0]) ",,38,1
openstack%2Fkeystone~master~I8a516fc19be25350593ef915a94f029c65db8de2,openstack/keystone,master,I8a516fc19be25350593ef915a94f029c65db8de2,"Add user_id, external_id to access rules table",MERGED,2019-06-05 21:38:41.000000000,2019-08-10 03:48:04.000000000,2019-08-10 03:48:04.000000000,"[{'_account_id': 2903}, {'_account_id': 5046}, {'_account_id': 8482}, {'_account_id': 15054}, {'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 27621}]","[{'number': 1, 'created': '2019-06-05 21:38:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/536f7b76e203ac68847ac5674109d73b50c255a4', 'message': 'Add user_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id column and index to allow\nthat.\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 2, 'created': '2019-06-05 22:37:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/da2af6d7ee6dc62a2235ea52508530f199f286e1', 'message': 'Add user_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 3, 'created': '2019-06-06 00:43:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/e5fcd5f67b5250c16c51174bc26b05d47fbecbae', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 4, 'created': '2019-06-07 18:20:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/e7be6d6307735810ce6bcf215621e6ef8ac8cd3e', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 5, 'created': '2019-06-07 19:51:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/c867505d6e8bf8e0cf0f0af43757ce4753650c9e', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 6, 'created': '2019-06-10 21:30:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/cf47bc488130471c9fa7bfaef0614103b731b990', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 7, 'created': '2019-06-11 22:46:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/194a2721d49cbee8bb749abd8f828d603f32a16c', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 8, 'created': '2019-06-27 21:28:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/244941cc324eea4d8bebaea8960839d4a9f287f8', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 9, 'created': '2019-07-05 19:12:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/05e8c7654000c4cb131f495755f40b5670c192c8', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}, {'number': 10, 'created': '2019-08-01 19:57:54.000000000', 'files': ['keystone/tests/unit/application_credential/backends/test_sql.py', 'keystone/application_credential/backends/sql.py', 'keystone/common/sql/expand_repo/versions/065_expand_add_user_external_id_to_access_rule.py', 'keystone/common/sql/contract_repo/versions/065_contract_add_user_external_id_to_access_rule.py', 'keystone/common/sql/data_migration_repo/versions/065_migrate_add_user_external_id_to_access_rule.py', 'keystone/tests/unit/test_sql_upgrade.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/2203e81729b944a3b0b2a00caaf931a8bf95ec5f', 'message': 'Add user_id, external_id to access rules table\n\nAccess rules that a user creates via an application credential will be\npreserved independently of the application credential, and can be\nqueried on a per-user basis and re-used with new application\ncredentials. This change adds the user_id and external_id columns and\nindices to allow that.\n\nbp whitelist-extension-for-app-creds\n\nChange-Id: I8a516fc19be25350593ef915a94f029c65db8de2\n'}]",4,663440,2203e81729b944a3b0b2a00caaf931a8bf95ec5f,40,7,10,8482,,,0,"Add user_id, external_id to access rules table

Access rules that a user creates via an application credential will be
preserved independently of the application credential, and can be
queried on a per-user basis and re-used with new application
credentials. This change adds the user_id and external_id columns and
indices to allow that.

bp whitelist-extension-for-app-creds

Change-Id: I8a516fc19be25350593ef915a94f029c65db8de2
",git fetch https://review.opendev.org/openstack/keystone refs/changes/40/663440/9 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/tests/unit/application_credential/backends/test_sql.py', 'keystone/application_credential/backends/sql.py', 'keystone/common/sql/expand_repo/versions/063_expand_add_user_id_to_access_rule.py', 'keystone/common/sql/contract_repo/versions/063_contract_add_user_id_to_access_rule.py', 'keystone/common/sql/data_migration_repo/versions/063_migrate_add_user_id_to_access_rule.py', 'keystone/tests/unit/test_sql_upgrade.py']",6,536f7b76e203ac68847ac5674109d73b50c255a4,bp/whitelist-extension-for-app-creds," def test_migration_063_add_user_id_to_access_rule(self): self.expand(62) self.migrate(62) self.contract(62) self.assertTableColumns( 'access_rule', ['id', 'service', 'path', 'method'] ) self.expand(63) self.migrate(63) self.contract(63) self.assertTableColumns( 'access_rule', ['id', 'user_id', 'service', 'path', 'method'] ) self.assertTrue(self.does_index_exist('access_rule', 'user_id')) ",,78,1
openstack%2Fnova~stable%2Fqueens~I141c90ac27d16f2e9c033bcd2f95ac08904a2f52,openstack/nova,stable/queens,I141c90ac27d16f2e9c033bcd2f95ac08904a2f52,doc: Fix a parameter of NotificationPublisher,MERGED,2019-07-11 04:05:31.000000000,2019-08-10 03:31:07.000000000,2019-08-10 03:31:07.000000000,"[{'_account_id': 6873}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-11 04:05:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d0fb978ac90ce2a5f359f873367fdd43f9e1854d', 'message': ""doc: Fix a parameter of NotificationPublisher\n\nThe 'binary' parameter has been changed to the 'source'\nsince I95b5b0826190d396efe7bfc017f6081a6356da65.\nBut the notification document has not been updated yet.\n\nReplace the 'binary' parameter with the 'source' parameter.\n\nChange-Id: I141c90ac27d16f2e9c033bcd2f95ac08904a2f52\nCloses-Bug: #1836005\n(cherry picked from commit de31466fdb09dd367b23660f71b4ca06f83271a2)\n(cherry picked from commit 5ba20d128cd0dee8b9b2a429a71e1bac5b0220df)\n(cherry picked from commit 7793f4d759d35841848597e27faadb1903df21e9)\n""}, {'number': 2, 'created': '2019-08-09 16:05:44.000000000', 'files': ['doc/source/reference/notifications.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/b6108ebb3f31fe835e2337d0a7449a69ab613c04', 'message': ""doc: Fix a parameter of NotificationPublisher\n\nThe 'binary' parameter has been changed to the 'source'\nsince I95b5b0826190d396efe7bfc017f6081a6356da65.\nBut the notification document has not been updated yet.\n\nReplace the 'binary' parameter with the 'source' parameter.\n\nChange-Id: I141c90ac27d16f2e9c033bcd2f95ac08904a2f52\nCloses-Bug: #1836005\n(cherry picked from commit de31466fdb09dd367b23660f71b4ca06f83271a2)\n(cherry picked from commit 5ba20d128cd0dee8b9b2a429a71e1bac5b0220df)\n(cherry picked from commit 7793f4d759d35841848597e27faadb1903df21e9)\n""}]",0,670226,b6108ebb3f31fe835e2337d0a7449a69ab613c04,14,4,2,7634,,,0,"doc: Fix a parameter of NotificationPublisher

The 'binary' parameter has been changed to the 'source'
since I95b5b0826190d396efe7bfc017f6081a6356da65.
But the notification document has not been updated yet.

Replace the 'binary' parameter with the 'source' parameter.

Change-Id: I141c90ac27d16f2e9c033bcd2f95ac08904a2f52
Closes-Bug: #1836005
(cherry picked from commit de31466fdb09dd367b23660f71b4ca06f83271a2)
(cherry picked from commit 5ba20d128cd0dee8b9b2a429a71e1bac5b0220df)
(cherry picked from commit 7793f4d759d35841848597e27faadb1903df21e9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/26/670226/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/reference/notifications.rst'],1,d0fb978ac90ce2a5f359f873367fdd43f9e1854d,bug/1836005,with a `host` and a `source` string parameter or it can be generated from a,with a `host` and a `binary` string parameter or it can be generated from a,1,1
openstack%2Fnova~stable%2Fqueens~I5dc65924fee65f6340d1495a9b1b992001c30731,openstack/nova,stable/queens,I5dc65924fee65f6340d1495a9b1b992001c30731,docs: Correct issues with 'openstack quota set' commands,MERGED,2019-07-10 15:29:21.000000000,2019-08-10 03:30:59.000000000,2019-08-10 03:30:59.000000000,"[{'_account_id': 6873}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-10 15:29:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a6ef6015f26cddb63cfec02b03d149654545f8cc', 'message': ""doc: Correct issues with 'openstack quota set' commands\n\nChange Ic857918b15496049b5ccacde9515f130cc0bd7e9 against\nopenstack-manuals updated the quotas document to use openstackclient\ncommands in place of novaclient commands. It missed the fact that you\nneed to pass the '--class' parameter if you wish to set a quota for a\nclass rather than a project. Correct this.\n\nChange-Id: I5dc65924fee65f6340d1495a9b1b992001c30731\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1834057\n(cherry picked from commit efd9344f2ee9995d242bb236cfeb152b87bb17e7)\n(cherry picked from commit fcde2cab24d5b66888e46270df13bf978ccbabbc)\n(cherry picked from commit 19cedf822a6b1d38a83f6aace0fc6dfa40cb5bcc)\n""}, {'number': 2, 'created': '2019-07-11 12:27:52.000000000', 'files': ['doc/source/admin/quotas.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/92ecfaab5e66b151d831f524850755ff16a34a37', 'message': ""docs: Correct issues with 'openstack quota set' commands\n\nChange Ic857918b15496049b5ccacde9515f130cc0bd7e9 against\nopenstack-manuals updated the quotas document to use openstackclient\ncommands in place of novaclient commands. It missed the fact that you\nneed to pass the '--class' parameter if you wish to set a quota for a\nclass rather than a project. Correct this.\n\nChange-Id: I5dc65924fee65f6340d1495a9b1b992001c30731\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1834057\n(cherry picked from commit 426790237e75eb184191bee1de50ee493252a717)\n(cherry picked from commit 75a3ae933759fb89abd7ee9847fb6685c22a862c)\n(cherry picked from commit 5982c92fa883e40cf01faf58b84e5f93fd7ebdbb)\n""}]",0,670100,92ecfaab5e66b151d831f524850755ff16a34a37,11,4,2,15334,,,0,"docs: Correct issues with 'openstack quota set' commands

Change Ic857918b15496049b5ccacde9515f130cc0bd7e9 against
openstack-manuals updated the quotas document to use openstackclient
commands in place of novaclient commands. It missed the fact that you
need to pass the '--class' parameter if you wish to set a quota for a
class rather than a project. Correct this.

Change-Id: I5dc65924fee65f6340d1495a9b1b992001c30731
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Closes-Bug: #1834057
(cherry picked from commit 426790237e75eb184191bee1de50ee493252a717)
(cherry picked from commit 75a3ae933759fb89abd7ee9847fb6685c22a862c)
(cherry picked from commit 5982c92fa883e40cf01faf58b84e5f93fd7ebdbb)
",git fetch https://review.opendev.org/openstack/nova refs/changes/00/670100/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/quotas.rst'],1,a6ef6015f26cddb63cfec02b03d149654545f8cc,bug/1834057, +----------------------+----------+ | Field | Value | +----------------------+----------+ | backup-gigabytes | 1000 | | backups | 10 | | cores | 20 | | fixed-ips | -1 | | floating-ips | 50 | | gigabytes | 1000 | | health_monitors | None | | injected-file-size | 10240 | | injected-files | 5 | | injected-path-size | 255 | | instances | 10 | | key-pairs | 100 | | l7_policies | None | | listeners | None | | load_balancers | None | | location | None | | name | None | | networks | 10 | | per-volume-gigabytes | -1 | | pools | None | | ports | 50 | | project | None | | project_name | project | | properties | 128 | | ram | 51200 | | rbac_policies | 10 | | routers | 10 | | secgroup-rules | 100 | | secgroups | 10 | | server-group-members | 10 | | server-groups | 10 | | snapshots | 10 | | subnet_pools | -1 | | subnets | 10 | | volumes | 10 | +----------------------+----------+ $ openstack quota set --class --instances 15 default +----------------------+----------------------------------+ | Field | Value | +----------------------+----------------------------------+ | backup-gigabytes | 1000 | | backups | 10 | | cores | 32 | | fixed-ips | -1 | | floating-ips | 10 | | gigabytes | 1000 | | health_monitors | None | | injected-file-size | 10240 | | injected-files | 5 | | injected-path-size | 255 | | instances | 10 | | key-pairs | 100 | | l7_policies | None | | listeners | None | | load_balancers | None | | location | None | | name | None | | networks | 20 | | per-volume-gigabytes | -1 | | pools | None | | ports | 60 | | project | c8156b55ec3b486193e73d2974196993 | | project_name | project | | properties | 128 | | ram | 65536 | | rbac_policies | 10 | | routers | 10 | | secgroup-rules | 50 | | secgroups | 50 | | server-group-members | 10 | | server-groups | 10 | | snapshots | 10 | | subnet_pools | -1 | | subnets | 20 | | volumes | 10 | +----------------------+----------------------------------+ To update quotas for a project: $ openstack quota set --QUOTA_NAME QUOTA_VALUE PROJECT_NAME To update quotas for a class: .. code-block:: console $ openstack quota set --class --QUOTA_NAME QUOTA_VALUE CLASS_NAME $ openstack quota set --gigabytes 2000 PROJECT_NAME +----------------------+----------------------------------+ | Field | Value | +----------------------+----------------------------------+ | ... | ... | | gigabytes | 2000 | | ... | ... | +----------------------+----------------------------------+, +-----------------------------+-------+ | Quota | Limit | +-----------------------------+-------+ | instances | 10 | | cores | 20 | | ram | 51200 | | floating_ips | 10 | | fixed_ips | -1 | | metadata_items | 128 | | injected_files | 5 | | injected_file_content_bytes | 10240 | | injected_file_path_bytes | 255 | | key_pairs | 100 | | security_groups | 10 | | security_group_rules | 20 | | server_groups | 10 | | server_group_members | 10 | +-----------------------------+-------+ $ openstack quota set --instances 15 default +-----------------------------+-------+ | Quota | Limit | +-----------------------------+-------+ | instances | 10 | | cores | 20 | | ram | 51200 | | floating_ips | 10 | | fixed_ips | -1 | | metadata_items | 128 | | injected_files | 5 | | injected_file_content_bytes | 10240 | | injected_file_path_bytes | 255 | | key_pairs | 100 | | security_groups | 10 | | security_group_rules | 20 | | server_groups | 10 | | server_group_members | 10 | +-----------------------------+-------+ $ openstack quota set --QUOTA_NAME QUOTA_VALUE PROJECT_OR_CLASS $ openstack quota set --floating-ips 20 PROJECT_OR_CLASS +-----------------------------+-------+ | Quota | Limit | +-----------------------------+-------+ | instances | 10 | | cores | 20 | | ram | 51200 | | floating_ips | 20 | | fixed_ips | -1 | | metadata_items | 128 | | injected_files | 5 | | injected_file_content_bytes | 10240 | | injected_file_path_bytes | 255 | | key_pairs | 100 | | security_groups | 10 | | security_group_rules | 20 | | server_groups | 10 | | server_group_members | 10 | +-----------------------------+-------+,96,59
openstack%2Fpuppet-oslo~master~If5fb021a6864abbe95f4d23281484cb859537f3b,openstack/puppet-oslo,master,If5fb021a6864abbe95f4d23281484cb859537f3b,Introduce the new `heartbeat_in_pthread` oslo.messaging option.,MERGED,2019-08-08 16:42:45.000000000,2019-08-10 03:20:53.000000000,2019-08-10 03:20:52.000000000,"[{'_account_id': 3153}, {'_account_id': 9414}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 16:42:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-oslo/commit/3f282afe22c6b26221cdc4391e5f9a347608059a', 'message': 'Introduce the new `heartbeat_in_pthread` oslo.messaging option.\n\noslo.messaging RabbitMQ driver have now a new option that allow user to\nrun the RabbitMQ AMQP heartbeat over a native python thread.\n\nThese change allow user to use this new option.\n\nFor further reading:\nhttps://review.opendev.org/#/c/663074/\n\nChange-Id: If5fb021a6864abbe95f4d23281484cb859537f3b\n'}, {'number': 2, 'created': '2019-08-09 08:20:37.000000000', 'files': ['releasenotes/notes/rabbitmq-heartbeat-over-pthread-bc86d8b3a2154613.yaml', 'spec/defines/oslo_messaging_rabbit_spec.rb', 'manifests/messaging/rabbit.pp'], 'web_link': 'https://opendev.org/openstack/puppet-oslo/commit/23eb13c6c86ef7b3a1deb9b1b8f636a8c072908d', 'message': 'Introduce the new `heartbeat_in_pthread` oslo.messaging option.\n\noslo.messaging RabbitMQ driver have now a new option that allow user to\nrun the RabbitMQ AMQP heartbeat over a native python thread.\n\nThese change allow user to use this new option.\n\nFor further reading:\nhttps://review.opendev.org/#/c/663074/\n\nChange-Id: If5fb021a6864abbe95f4d23281484cb859537f3b\n'}]",0,675405,23eb13c6c86ef7b3a1deb9b1b8f636a8c072908d,10,3,2,28522,,,0,"Introduce the new `heartbeat_in_pthread` oslo.messaging option.

oslo.messaging RabbitMQ driver have now a new option that allow user to
run the RabbitMQ AMQP heartbeat over a native python thread.

These change allow user to use this new option.

For further reading:
https://review.opendev.org/#/c/663074/

Change-Id: If5fb021a6864abbe95f4d23281484cb859537f3b
",git fetch https://review.opendev.org/openstack/puppet-oslo refs/changes/05/675405/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/rabbitmq-heartbeat-over-pthread-bc86d8b3a2154613.yaml', 'manifests/messaging/rabbit.pp']",2,3f282afe22c6b26221cdc4391e5f9a347608059a,heartbeat,"# [*heartbeat_in_pthread*] # (Optional) EXPERIMENTAL: Run the health check heartbeat thread # through a native python thread. By default if this # option isn't provided the health check heartbeat will # inherit the execution model from the parent process. By # example if the parent process have monkey patched the # stdlib by using eventlet/greenlet then the heartbeat # will be run through a green thread. # Defaults to $::os_service_default # $heartbeat_in_pthread = $::os_service_default, 'oslo_messaging_rabbit/heartbeat_in_pthread' => { value => $heartbeat_in_pthread },",,18,0
openstack%2Fnova~stable%2Fqueens~I958005b6a3e2b90ca6fe6046e4dbcc5991581245,openstack/nova,stable/queens,I958005b6a3e2b90ca6fe6046e4dbcc5991581245,Changing scheduler sync event from INFO to DEBUG,MERGED,2019-07-04 10:05:20.000000000,2019-08-10 03:16:55.000000000,2019-08-10 03:16:55.000000000,"[{'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 14595}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-04 10:05:20.000000000', 'files': ['nova/scheduler/host_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1c56895dc19ebd47f74344dbdf9e2101d52dbe8e', 'message': ""Changing scheduler sync event from INFO to DEBUG\n\nWe don't need to log every single sync event, this can get\npretty spammy, especially when you have computes in the hundreds.\n\nChange-Id: I958005b6a3e2b90ca6fe6046e4dbcc5991581245\n(cherry picked from commit e86ac82bbdd365eb0085697ba3b634c55c4016e7)\n""}]",0,669126,1c56895dc19ebd47f74344dbdf9e2101d52dbe8e,17,7,1,6593,,,0,"Changing scheduler sync event from INFO to DEBUG

We don't need to log every single sync event, this can get
pretty spammy, especially when you have computes in the hundreds.

Change-Id: I958005b6a3e2b90ca6fe6046e4dbcc5991581245
(cherry picked from commit e86ac82bbdd365eb0085697ba3b634c55c4016e7)
",git fetch https://review.opendev.org/openstack/nova refs/changes/26/669126/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/scheduler/host_manager.py'],1,1c56895dc19ebd47f74344dbdf9e2101d52dbe8e,," LOG.debug(""Successfully synced instances from host '%s'."", host_name)"," LOG.info(_LI(""Successfully synced instances from host '%s'.""), host_name)",2,2
openstack%2Ftripleo-heat-templates~master~Id3bcfd6b7c96bfa32c36f626960c19792e2293a7,openstack/tripleo-heat-templates,master,Id3bcfd6b7c96bfa32c36f626960c19792e2293a7,"Revert ""Matches updates for ceph-ansible variables name change""",MERGED,2019-08-01 14:47:41.000000000,2019-08-10 03:12:10.000000000,2019-08-10 03:12:10.000000000,"[{'_account_id': 6796}, {'_account_id': 8042}, {'_account_id': 8449}, {'_account_id': 14270}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2019-08-01 14:47:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c7f9817d9cace41d51c8d3a8bdb068722fb71304', 'message': 'Revert ""Matches updates for ceph-ansible variables name change""\n\nThis reverts commit 1a194079f0d5a79d620bb39d126f0bfe8cad2d58.\n\nChange-Id: Id3bcfd6b7c96bfa32c36f626960c19792e2293a7\n'}, {'number': 2, 'created': '2019-08-07 11:33:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/11a4dcb25f3256fdd3ed08e5a9022b8084a2d23c', 'message': 'Revert ""Matches updates for ceph-ansible variables name change""\n\nThis reverts commit 1a194079f0d5a79d620bb39d126f0bfe8cad2d58.\n\nChange-Id: Id3bcfd6b7c96bfa32c36f626960c19792e2293a7\n'}, {'number': 3, 'created': '2019-08-08 07:54:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1e8389e0d9ff89c8b9cf12141e0336ef270cb066', 'message': 'Revert ""Matches updates for ceph-ansible variables name change""\n\nThis reverts commit 1a194079f0d5a79d620bb39d126f0bfe8cad2d58.\n\nChange-Id: Id3bcfd6b7c96bfa32c36f626960c19792e2293a7\n'}, {'number': 4, 'created': '2019-08-09 14:27:38.000000000', 'files': ['deployment/ceph-ansible/ceph-base.yaml', 'deployment/ceph-ansible/ceph-mgr.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/8242ae60c0ad8641491492f2241b985c44eaf8a8', 'message': 'Revert ""Matches updates for ceph-ansible variables name change""\n\nThis reverts commit 1a194079f0d5a79d620bb39d126f0bfe8cad2d58.\n\nChange-Id: Id3bcfd6b7c96bfa32c36f626960c19792e2293a7\n'}]",0,674056,8242ae60c0ad8641491492f2241b985c44eaf8a8,29,8,4,6796,,,0,"Revert ""Matches updates for ceph-ansible variables name change""

This reverts commit 1a194079f0d5a79d620bb39d126f0bfe8cad2d58.

Change-Id: Id3bcfd6b7c96bfa32c36f626960c19792e2293a7
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/56/674056/4 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/ceph-ansible/ceph-base.yaml', 'deployment/ceph-ansible/ceph-mgr.yaml']",2,c7f9817d9cace41d51c8d3a8bdb068722fb71304,ceph_ansible_pr_4002, ceph_mgr_docker_extra_env: '-e MGR_DASHBOARD=0', ceph_mgr_container_extra_env: '-e MGR_DASHBOARD=0',5,4
openstack%2Fpuppet-ironic~master~I1df419a7023600e0bb3d437d1fd0820b2f0f7616,openstack/puppet-ironic,master,I1df419a7023600e0bb3d437d1fd0820b2f0f7616,"Add support for configuring {deploy,rescue}_{kernel,ramdisk}",MERGED,2019-08-09 07:37:25.000000000,2019-08-10 03:06:27.000000000,2019-08-10 03:06:27.000000000,"[{'_account_id': 3153}, {'_account_id': 9414}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-09 07:37:25.000000000', 'files': ['manifests/conductor.pp', 'releasenotes/notes/deploy-kernel-13b2318ae0f2b8bb.yaml', 'spec/classes/ironic_conductor_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-ironic/commit/e9220c8ee330905e12a079edb45411952ff21125', 'message': 'Add support for configuring {deploy,rescue}_{kernel,ramdisk}\n\nChange-Id: I1df419a7023600e0bb3d437d1fd0820b2f0f7616\nDepends-On: https://review.opendev.org/#/c/672989/\n'}]",0,675544,e9220c8ee330905e12a079edb45411952ff21125,8,4,1,10239,,,0,"Add support for configuring {deploy,rescue}_{kernel,ramdisk}

Change-Id: I1df419a7023600e0bb3d437d1fd0820b2f0f7616
Depends-On: https://review.opendev.org/#/c/672989/
",git fetch https://review.opendev.org/openstack/puppet-ironic refs/changes/44/675544/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/conductor.pp', 'releasenotes/notes/deploy-kernel-13b2318ae0f2b8bb.yaml', 'spec/classes/ironic_conductor_spec.rb']",3,e9220c8ee330905e12a079edb45411952ff21125,deploy," :deploy_kernel => 'http://host/deploy.kernel', :deploy_ramdisk => 'http://host/deploy.ramdisk', :rescue_kernel => 'http://host/rescue.kernel', :rescue_ramdisk => 'http://host/rescue.ramdisk', is_expected.to contain_ironic_config('conductor/deploy_kernel').with_value(p[:deploy_kernel]) is_expected.to contain_ironic_config('conductor/deploy_ramdisk').with_value(p[:deploy_ramdisk]) is_expected.to contain_ironic_config('conductor/rescue_kernel').with_value(p[:rescue_kernel]) is_expected.to contain_ironic_config('conductor/rescue_ramdisk').with_value(p[:rescue_ramdisk])",,38,0
openstack%2Frequirements~master~Iebba67956431936a1fc58719d8ea673004966bcf,openstack/requirements,master,Iebba67956431936a1fc58719d8ea673004966bcf,update constraint for python-muranoclient to new release 1.3.0,MERGED,2019-08-09 13:35:05.000000000,2019-08-10 03:01:42.000000000,2019-08-10 03:01:41.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 13:35:05.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/391ca821658a68a11ae10f591f28beb3d61ff4c1', 'message': 'update constraint for python-muranoclient to new release 1.3.0\n\nChange-Id: Iebba67956431936a1fc58719d8ea673004966bcf\nmeta:version: 1.3.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: yes\nmeta:release:Author: zhurong <aaronzhu1121@gmail.com>\nmeta:release:Commit: zhurong <aaronzhu1121@gmail.com>\nmeta:release:Change-Id: Ice0469fc690b75099af66b18217750b861c85726\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n'}]",0,675625,391ca821658a68a11ae10f591f28beb3d61ff4c1,6,2,1,11131,,,0,"update constraint for python-muranoclient to new release 1.3.0

Change-Id: Iebba67956431936a1fc58719d8ea673004966bcf
meta:version: 1.3.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: yes
meta:release:Author: zhurong <aaronzhu1121@gmail.com>
meta:release:Commit: zhurong <aaronzhu1121@gmail.com>
meta:release:Change-Id: Ice0469fc690b75099af66b18217750b861c85726
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/25/675625/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,391ca821658a68a11ae10f591f28beb3d61ff4c1,new-release,python-muranoclient===1.3.0,python-muranoclient===1.2.0,1,1
openstack%2Fnova~stable%2Fqueens~Ia597594e0469c0e83d7ad22b0678390aaebaffe7,openstack/nova,stable/queens,Ia597594e0469c0e83d7ad22b0678390aaebaffe7,Fix double word hacking test,MERGED,2019-06-17 23:19:07.000000000,2019-08-10 01:20:41.000000000,2019-08-10 01:20:41.000000000,"[{'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 15334}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-06-17 23:19:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/59ec7d63d964752036d81f903ccc7c25982786c1', 'message': 'Fix double word hacking test\n\nAt present, \'pycodestyle\' feeds the following string into the \'tokenizer\'\nlibrary:\n\n    [""\'This is the the best comment\'""]\n\n(note the added quotes because this isn\'t valid Python otherwise)\n\nOn previous versions of Python, this tokenizer would parse the string like so:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'"")\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 0 = \'ENDMARKER\')\n\nHowever, with the fix [1] backported to recent versions of Python, this now\nresolves to:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'"")\n  (4, \'\', (1, 30), (1, 31), \'\')\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 4 = \'NEWLINE\', 0 = \'ENDMARKER\')\n\nTypically, \'pycodestyle\' will run physical line checks on each line as it\nparses the token:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2036\n\nFor the former case above, the line doesn\'t include a newline which\nmeans we never parse a \'NEWLINE\' token with a logical line (the fifth\nelement of the token tuple) corresponding to our full line. This means\nwe don\'t here but that wasn\'t an issue previously since there\'s a\nfallthrough case that handled tokens remaining at the end of the parse:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2114-L2116\n\nUnfortunately, because we now have an additional newline character to\nparse, one that\'s on a separate line to our test string no less, we run\nlogical checks on it:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2105-L2107\n\nThis is an issue since the logical check wipes stored tokens meaning\nwe\'ve nothing to check when we get to the fallthrough case:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2012\n\nThis fixes changes things so that a newline is included (and also adds\nquotes so it\'s valid Python, but that\'s mostly unrelated). This means we\nend up with the following instead:\n\n  [""\'This is the the best comment\'\\n""]\n\nOn both Python without the bugfix and with it, this parses as:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'\\n"")\n  (4, \'\\n\', (1, 30), (1, 31), ""\'This is the the best comment\'\\n"")\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 4 = \'NEWLINE\', 0 = \'ENDMARKER\')\n\nWhich triggers things in \'pycodestyle\' correctly.\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2044-L2046\n\nThis isn\'t _really_ a fix since there\'s clearly still a bug in either\n\'pycodestyle\' or Python (I think the latter, since it\'s adding a newline\nto a file that explicitly doesn\'t have one), but the chances of us\nhitting this bug in practice are rather low - you\'d need to make a\nmistake on the very last line of a file without a newline at the end\nwhich is something Vim, for example, won\'t even let you do without\nsetting special flags - and therefore it can be reasonably ignored.\n\nConflicts:\n\tnova/tests/unit/test_hacking.py\n\nNOTE(stephenfin): Conflicts are because we don\'t have change\nI35c654bd39f343417e0a1124263ff31dcd0b05c9 (""Bump to hacking 1.1.0"") or\nchange I8826c3fb89690805baae6b9b7b48985abb8d62d3 (""Skip\ntest_check_doubled_words hacking check UT"") on this branch.\n\n[1] https://bugs.python.org/issue33899\n\nChange-Id: Ia597594e0469c0e83d7ad22b0678390aaebaffe7\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1804062\n(cherry picked from f545a25cc443c41dcd9bdd028064c28b53f56037)\n'}, {'number': 2, 'created': '2019-06-24 09:33:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f33125dbf7d6e2f2f8ad6944de7139b82903d5f0', 'message': 'Fix double word hacking test\n\nAt present, \'pycodestyle\' feeds the following string into the \'tokenizer\'\nlibrary:\n\n    [""\'This is the the best comment\'""]\n\n(note the added quotes because this isn\'t valid Python otherwise)\n\nOn previous versions of Python, this tokenizer would parse the string like so:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'"")\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 0 = \'ENDMARKER\')\n\nHowever, with the fix [1] backported to recent versions of Python, this now\nresolves to:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'"")\n  (4, \'\', (1, 30), (1, 31), \'\')\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 4 = \'NEWLINE\', 0 = \'ENDMARKER\')\n\nTypically, \'pycodestyle\' will run physical line checks on each line as it\nparses the token:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2036\n\nFor the former case above, the line doesn\'t include a newline which\nmeans we never parse a \'NEWLINE\' token with a logical line (the fifth\nelement of the token tuple) corresponding to our full line. This means\nwe don\'t here but that wasn\'t an issue previously since there\'s a\nfallthrough case that handled tokens remaining at the end of the parse:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2114-L2116\n\nUnfortunately, because we now have an additional newline character to\nparse, one that\'s on a separate line to our test string no less, we run\nlogical checks on it:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2105-L2107\n\nThis is an issue since the logical check wipes stored tokens meaning\nwe\'ve nothing to check when we get to the fallthrough case:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2012\n\nThis fixes changes things so that a newline is included (and also adds\nquotes so it\'s valid Python, but that\'s mostly unrelated). This means we\nend up with the following instead:\n\n  [""\'This is the the best comment\'\\n""]\n\nOn both Python without the bugfix and with it, this parses as:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'\\n"")\n  (4, \'\\n\', (1, 30), (1, 31), ""\'This is the the best comment\'\\n"")\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 4 = \'NEWLINE\', 0 = \'ENDMARKER\')\n\nWhich triggers things in \'pycodestyle\' correctly.\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2044-L2046\n\nThis isn\'t _really_ a fix since there\'s clearly still a bug in either\n\'pycodestyle\' or Python (I think the latter, since it\'s adding a newline\nto a file that explicitly doesn\'t have one), but the chances of us\nhitting this bug in practice are rather low - you\'d need to make a\nmistake on the very last line of a file without a newline at the end\nwhich is something Vim, for example, won\'t even let you do without\nsetting special flags - and therefore it can be reasonably ignored.\n\nConflicts:\n\tnova/tests/unit/test_hacking.py\n\nNOTE(stephenfin): Conflicts are because we don\'t have change\nI35c654bd39f343417e0a1124263ff31dcd0b05c9 (""Bump to hacking 1.1.0"") or\nchange I8826c3fb89690805baae6b9b7b48985abb8d62d3 (""Skip\ntest_check_doubled_words hacking check UT"") on this branch.\n\n[1] https://bugs.python.org/issue33899\n\nChange-Id: Ia597594e0469c0e83d7ad22b0678390aaebaffe7\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1804062\n(cherry picked from f545a25cc443c41dcd9bdd028064c28b53f56037)\n(cherry picked from commit 0cb6106b83c33bded9e6cdec7737964c36be8de5)\n(cherry picked from commit 825c64738bf0164b5206ef9a285fc6599f32da96)\n'}, {'number': 3, 'created': '2019-08-09 14:47:56.000000000', 'files': ['nova/tests/unit/test_hacking.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/dc2963d2a0002d4ddacf50b1f80c470d5de7ec61', 'message': 'Fix double word hacking test\n\nAt present, \'pycodestyle\' feeds the following string into the \'tokenizer\'\nlibrary:\n\n    [""\'This is the the best comment\'""]\n\n(note the added quotes because this isn\'t valid Python otherwise)\n\nOn previous versions of Python, this tokenizer would parse the string like so:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'"")\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 0 = \'ENDMARKER\')\n\nHowever, with the fix [1] backported to recent versions of Python, this now\nresolves to:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'"")\n  (4, \'\', (1, 30), (1, 31), \'\')\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 4 = \'NEWLINE\', 0 = \'ENDMARKER\')\n\nTypically, \'pycodestyle\' will run physical line checks on each line as it\nparses the token:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2036\n\nFor the former case above, the line doesn\'t include a newline which\nmeans we never parse a \'NEWLINE\' token with a logical line (the fifth\nelement of the token tuple) corresponding to our full line. This means\nwe don\'t here but that wasn\'t an issue previously since there\'s a\nfallthrough case that handled tokens remaining at the end of the parse:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2114-L2116\n\nUnfortunately, because we now have an additional newline character to\nparse, one that\'s on a separate line to our test string no less, we run\nlogical checks on it:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2105-L2107\n\nThis is an issue since the logical check wipes stored tokens meaning\nwe\'ve nothing to check when we get to the fallthrough case:\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2012\n\nThis fixes changes things so that a newline is included (and also adds\nquotes so it\'s valid Python, but that\'s mostly unrelated). This means we\nend up with the following instead:\n\n  [""\'This is the the best comment\'\\n""]\n\nOn both Python without the bugfix and with it, this parses as:\n\n  (3, ""\'This is the the best comment\'"", (1, 0), (1, 30), ""\'This is the the best comment\'\\n"")\n  (4, \'\\n\', (1, 30), (1, 31), ""\'This is the the best comment\'\\n"")\n  (0, \'\', (2, 0), (2, 0), \'\')\n\nwhere (3 = \'STRING\', 4 = \'NEWLINE\', 0 = \'ENDMARKER\')\n\nWhich triggers things in \'pycodestyle\' correctly.\n\n  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2044-L2046\n\nThis isn\'t _really_ a fix since there\'s clearly still a bug in either\n\'pycodestyle\' or Python (I think the latter, since it\'s adding a newline\nto a file that explicitly doesn\'t have one), but the chances of us\nhitting this bug in practice are rather low - you\'d need to make a\nmistake on the very last line of a file without a newline at the end\nwhich is something Vim, for example, won\'t even let you do without\nsetting special flags - and therefore it can be reasonably ignored.\n\n[1] https://bugs.python.org/issue33899\n\nChange-Id: Ia597594e0469c0e83d7ad22b0678390aaebaffe7\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1804062\n(cherry picked from f545a25cc443c41dcd9bdd028064c28b53f56037)\n(cherry picked from commit 0cb6106b83c33bded9e6cdec7737964c36be8de5)\n(cherry picked from commit 4858074c89838eadeb9eaf9f39917e9fb90acd93)\n'}]",2,665790,dc2963d2a0002d4ddacf50b1f80c470d5de7ec61,21,6,3,3031,,,0,"Fix double word hacking test

At present, 'pycodestyle' feeds the following string into the 'tokenizer'
library:

    [""'This is the the best comment'""]

(note the added quotes because this isn't valid Python otherwise)

On previous versions of Python, this tokenizer would parse the string like so:

  (3, ""'This is the the best comment'"", (1, 0), (1, 30), ""'This is the the best comment'"")
  (0, '', (2, 0), (2, 0), '')

where (3 = 'STRING', 0 = 'ENDMARKER')

However, with the fix [1] backported to recent versions of Python, this now
resolves to:

  (3, ""'This is the the best comment'"", (1, 0), (1, 30), ""'This is the the best comment'"")
  (4, '', (1, 30), (1, 31), '')
  (0, '', (2, 0), (2, 0), '')

where (3 = 'STRING', 4 = 'NEWLINE', 0 = 'ENDMARKER')

Typically, 'pycodestyle' will run physical line checks on each line as it
parses the token:

  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2036

For the former case above, the line doesn't include a newline which
means we never parse a 'NEWLINE' token with a logical line (the fifth
element of the token tuple) corresponding to our full line. This means
we don't here but that wasn't an issue previously since there's a
fallthrough case that handled tokens remaining at the end of the parse:

  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2114-L2116

Unfortunately, because we now have an additional newline character to
parse, one that's on a separate line to our test string no less, we run
logical checks on it:

  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2105-L2107

This is an issue since the logical check wipes stored tokens meaning
we've nothing to check when we get to the fallthrough case:

  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2012

This fixes changes things so that a newline is included (and also adds
quotes so it's valid Python, but that's mostly unrelated). This means we
end up with the following instead:

  [""'This is the the best comment'\n""]

On both Python without the bugfix and with it, this parses as:

  (3, ""'This is the the best comment'"", (1, 0), (1, 30), ""'This is the the best comment'\n"")
  (4, '\n', (1, 30), (1, 31), ""'This is the the best comment'\n"")
  (0, '', (2, 0), (2, 0), '')

where (3 = 'STRING', 4 = 'NEWLINE', 0 = 'ENDMARKER')

Which triggers things in 'pycodestyle' correctly.

  https://github.com/PyCQA/pycodestyle/blob/2.5.0/pycodestyle.py#L2044-L2046

This isn't _really_ a fix since there's clearly still a bug in either
'pycodestyle' or Python (I think the latter, since it's adding a newline
to a file that explicitly doesn't have one), but the chances of us
hitting this bug in practice are rather low - you'd need to make a
mistake on the very last line of a file without a newline at the end
which is something Vim, for example, won't even let you do without
setting special flags - and therefore it can be reasonably ignored.

[1] https://bugs.python.org/issue33899

Change-Id: Ia597594e0469c0e83d7ad22b0678390aaebaffe7
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Closes-Bug: #1804062
(cherry picked from f545a25cc443c41dcd9bdd028064c28b53f56037)
(cherry picked from commit 0cb6106b83c33bded9e6cdec7737964c36be8de5)
(cherry picked from commit 4858074c89838eadeb9eaf9f39917e9fb90acd93)
",git fetch https://review.opendev.org/openstack/nova refs/changes/90/665790/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/test_hacking.py'],1,59ec7d63d964752036d81f903ccc7c25982786c1,bug/1804062," lines = textwrap.dedent(code).lstrip().splitlines(True) # Explicit addition of line-ending here and below since this isn't a # block comment and without it we trigger #1804062. Artificial break is # necessary to stop flake8 detecting the test code = ""'This is the"" + "" the best comment'\n"" code = ""'This is the then best comment'\n"""," lines = textwrap.dedent(code).strip().splitlines(True) # Artificial break to stop pep8 detecting the test ! code = ""This is the"" + "" the best comment"" code = ""This is the then best comment""",6,4
openstack%2Fplacement~master~Idb98611f549b628d273c43f07d137fcf9c73314c,openstack/placement,master,Idb98611f549b628d273c43f07d137fcf9c73314c,Copy AllocationRequestResource only when necessary,MERGED,2019-08-08 17:12:44.000000000,2019-08-10 01:08:26.000000000,2019-08-10 01:08:26.000000000,"[{'_account_id': 9708}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 17:12:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/f3571f755b77850b378b2f834d7c6ffebdd4013a', 'message': ""Copy AllocationRequestResource only when necessary\n\nProfiling revealed that copying AllocationRequestResource in\n_consolidate_allocation_requests was expensive.\n\nAs an optimization, this patch adds logic to only do that copy when it's\nnecessary.\n\nAnd it's only necessary for an ARR whose resource class was requested\nfrom multiple groups, when group_policy=none. In that case, we're\nconstructing multiple results with the same ARR. For example, consider a\nhost with two PFs with VF inventory. A request like:\n\n ?resources1=VF:1\n &resources2=VF:1\n &group_policy=none\n\n...will yield results like:\n\n(1) PF1{VF:1},PF2{VF:1}\n(2) PF1{VF:2}\n(3) PF2{VF:2}\n\nThe AllocationRequestResource representing PF1{VF:1} gets used in both\nresult (1) and result (2). When producing result (2), we add the\nAllocationRequestResource.amountZ together. If we were reusing the same\nARR instance from result (1), result (1) would end up looking like:\n\n(1) PF1{VF:2},PF2{VF:1}\n\n...which is wrong. So we have to do the copy.\n\nWith group_policy=isolate, or if we've only requested the resource class\nfrom one group, we're only using that ARR once in the results, so we can\njust use it without copying.\n\nChange-Id: Idb98611f549b628d273c43f07d137fcf9c73314c\n""}, {'number': 2, 'created': '2019-08-08 17:24:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/7029006ea0b9ca5836562b9832c2e57594cfb0bd', 'message': ""Copy AllocationRequestResource only when necessary\n\nProfiling revealed that copying AllocationRequestResource in\n_consolidate_allocation_requests was expensive.\n\nAs an optimization, this patch adds logic to only do that copy when it's\nnecessary.\n\nAnd it's only necessary for an ARR whose resource class was requested\nfrom multiple groups, when group_policy=none. In that case, we're\nconstructing multiple results with the same ARR. For example, consider a\nhost with two PFs with VF inventory. A request like:\n\n ?resources1=VF:1\n &resources2=VF:1\n &group_policy=none\n\n...will yield results like:\n\n(1) PF1{VF:1},PF2{VF:1}\n(2) PF1{VF:2}\n(3) PF2{VF:2}\n\nThe AllocationRequestResource representing PF1{VF:1} gets used in both\nresult (1) and result (2). When producing result (2), we add the\nAllocationRequestResource.amountZ together. If we were reusing the same\nARR instance from result (1), result (1) would end up looking like:\n\n(1) PF1{VF:2},PF2{VF:1}\n\n...which is wrong. So we have to do the copy.\n\nWith group_policy=isolate, or if we've only requested the resource class\nfrom one group, we're only using that ARR once in the results, so we can\njust use it without copying.\n\nChange-Id: Idb98611f549b628d273c43f07d137fcf9c73314c\n""}, {'number': 3, 'created': '2019-08-09 13:39:03.000000000', 'files': ['placement/objects/research_context.py', 'placement/objects/allocation_candidate.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/e96237050a921bc466f7cf2fcc6263024db0444a', 'message': ""Copy AllocationRequestResource only when necessary\n\nProfiling revealed that copying AllocationRequestResource in\n_consolidate_allocation_requests was expensive.\n\nAs an optimization, this patch adds logic to only do that copy when it's\nnecessary.\n\nAnd it's only necessary for an ARR whose resource class was requested\nfrom multiple groups, when group_policy=none. In that case, we're\nconstructing multiple results with the same ARR. For example, consider a\nhost with two PFs with VF inventory. A request like:\n\n ?resources1=VF:1\n &resources2=VF:1\n &group_policy=none\n\n...will yield results like:\n\n(1) PF1{VF:1},PF2{VF:1}\n(2) PF1{VF:2}\n(3) PF2{VF:2}\n\nThe AllocationRequestResource representing PF1{VF:1} gets used in both\nresult (1) and result (2). When producing result (2), we add the\nAllocationRequestResource.amountZ together. If we were reusing the same\nARR instance from result (1), result (1) would end up looking like:\n\n(1) PF1{VF:2},PF2{VF:1}\n\n...which is wrong. So we have to do the copy.\n\nWith group_policy=isolate, or if we've only requested the resource class\nfrom one group, we're only using that ARR once in the results, so we can\njust use it without copying.\n\nChange-Id: Idb98611f549b628d273c43f07d137fcf9c73314c\n""}]",5,675416,e96237050a921bc466f7cf2fcc6263024db0444a,15,4,3,14070,,,0,"Copy AllocationRequestResource only when necessary

Profiling revealed that copying AllocationRequestResource in
_consolidate_allocation_requests was expensive.

As an optimization, this patch adds logic to only do that copy when it's
necessary.

And it's only necessary for an ARR whose resource class was requested
from multiple groups, when group_policy=none. In that case, we're
constructing multiple results with the same ARR. For example, consider a
host with two PFs with VF inventory. A request like:

 ?resources1=VF:1
 &resources2=VF:1
 &group_policy=none

...will yield results like:

(1) PF1{VF:1},PF2{VF:1}
(2) PF1{VF:2}
(3) PF2{VF:2}

The AllocationRequestResource representing PF1{VF:1} gets used in both
result (1) and result (2). When producing result (2), we add the
AllocationRequestResource.amountZ together. If we were reusing the same
ARR instance from result (1), result (1) would end up looking like:

(1) PF1{VF:2},PF2{VF:1}

...which is wrong. So we have to do the copy.

With group_policy=isolate, or if we've only requested the resource class
from one group, we're only using that ARR once in the results, so we can
just use it without copying.

Change-Id: Idb98611f549b628d273c43f07d137fcf9c73314c
",git fetch https://review.opendev.org/openstack/placement refs/changes/16/675416/1 && git format-patch -1 --stdout FETCH_HEAD,"['placement/objects/research_context.py', 'placement/objects/allocation_candidate.py']",2,f3571f755b77850b378b2f834d7c6ffebdd4013a,optimize_consolidate_copy," seen_rcs = set() # Which resource classes are requested in more than one group? for rc in rg_ctx.rcs: if rc in seen_rcs: rw_ctx.multi_group_rcs.add(rc) else: seen_rcs.add(rc) def _consolidate_allocation_requests(areqs, rw_ctx): def _copy_arr_if_needed(_arr): # In cases with group_policy=isolate where multiple groups request # amounts from the same resource class, we end up using the same # AllocationRequestResource more than once when consolidating. So we # need to make a copy so we don't overwrite the one used for a # different result. But as an optimization, since this copy is not # cheap, we don't do it unless it's necessary. if rw_ctx.group_policy == 'isolate': return _arr if _arr.resource_class in rw_ctx.multi_group_rcs: return copy.copy(_arr) return _arr arrs_by_rp_rc[key] = _copy_arr_if_needed(arr) areq = _consolidate_allocation_requests(areq_list, rw_ctx)",def _consolidate_allocation_requests(areqs): arrs_by_rp_rc[key] = copy.copy(arr) areq = _consolidate_allocation_requests(areq_list),32,7
openstack%2Ftempest~master~I8fa20a0b8e5c2cf82085d787027f7edd5061357d,openstack/tempest,master,I8fa20a0b8e5c2cf82085d787027f7edd5061357d,Modify the fake date to the correct value,MERGED,2019-08-02 09:25:45.000000000,2019-08-10 01:08:16.000000000,2019-08-10 01:08:16.000000000,"[{'_account_id': 6167}, {'_account_id': 20190}, {'_account_id': 22348}, {'_account_id': 23186}]","[{'number': 1, 'created': '2019-08-02 09:25:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/30e7b9930e85e1d724a0eea3ca8f41fab14a9e99', 'message': 'Modify the fake date to the correct value according to the API document described\n\nChange-Id: I8fa20a0b8e5c2cf82085d787027f7edd5061357d\n'}, {'number': 2, 'created': '2019-08-05 02:12:02.000000000', 'files': ['tempest/tests/lib/services/volume/v3/test_groups_client.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/043533235bfbb3ef264d23d56b463718d65f8a65', 'message': 'Modify the fake date to the correct value\n\nThis commit modify the fake date to the correct value according to the API document described\n\nChange-Id: I8fa20a0b8e5c2cf82085d787027f7edd5061357d\n'}]",4,674236,043533235bfbb3ef264d23d56b463718d65f8a65,11,4,2,30643,,,0,"Modify the fake date to the correct value

This commit modify the fake date to the correct value according to the API document described

Change-Id: I8fa20a0b8e5c2cf82085d787027f7edd5061357d
",git fetch https://review.opendev.org/openstack/tempest refs/changes/36/674236/2 && git format-patch -1 --stdout FETCH_HEAD,['tempest/tests/lib/services/volume/v3/test_groups_client.py'],1,30e7b9930e85e1d724a0eea3ca8f41fab14a9e99,," ""id"": ""6f519a48-3183-46cf-a32f-41815f816666"", ""name"": ""first_group"" ""group"": { ""id"": ""6f519a48-3183-46cf-a32f-41815f816668"", ""name"": ""first_group"" ""group"": { ""id"": ""6f519a48-3183-46cf-a32f-41815f816667"", ""name"": ""other_group"""," ""name"": ""group-001"", ""description"": ""Test group 1"", ""group_type"": ""0e58433f-d108-4bf3-a22c-34e6b71ef86b"", ""volume_types"": [""2103099d-7cc3-4e52-a2f1-23a5284416f3""], ""availability_zone"": ""az1"", ""create-from-src"": { ""name"": ""group-002"", ""description"": ""Test group 2"", ""group_snapshot_id"": ""79c9afdb-7e46-4d71-9249-1f022886963c"", ""create-from-src"": { ""name"": ""group-003"", ""description"": ""Test group 3"", ""source_group_id"": ""e92f9dc7-0b20-492d-8ab2-3ad8fdac270e"",",8,13
openstack%2Ftempest~master~Icf676eb2192d9a651cbdc428a008cae627c03d3e,openstack/tempest,master,Icf676eb2192d9a651cbdc428a008cae627c03d3e,Add api reference in quotas_client,MERGED,2019-08-09 02:13:59.000000000,2019-08-10 01:08:14.000000000,2019-08-10 01:08:14.000000000,"[{'_account_id': 6167}, {'_account_id': 20190}, {'_account_id': 22348}, {'_account_id': 30410}]","[{'number': 1, 'created': '2019-08-09 02:13:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/ae3b099b85560ed70b0474c55985ca34367bbd03', 'message': 'Add api reference in quotas_client\nAdd api reference in quotas_client.py\n\nChange-Id: Icf676eb2192d9a651cbdc428a008cae627c03d3e\n'}, {'number': 2, 'created': '2019-08-09 02:15:31.000000000', 'files': ['tempest/lib/services/network/quotas_client.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/9ae6ef82df0a1f71ac3f92c90e17ff57a559a22e', 'message': 'Add api reference in quotas_client\n\nAdd api reference in quotas_client.py\n\nChange-Id: Icf676eb2192d9a651cbdc428a008cae627c03d3e\n'}]",0,675504,9ae6ef82df0a1f71ac3f92c90e17ff57a559a22e,11,4,2,30410,,,0,"Add api reference in quotas_client

Add api reference in quotas_client.py

Change-Id: Icf676eb2192d9a651cbdc428a008cae627c03d3e
",git fetch https://review.opendev.org/openstack/tempest refs/changes/04/675504/2 && git format-patch -1 --stdout FETCH_HEAD,['tempest/lib/services/network/quotas_client.py'],1,ae3b099b85560ed70b0474c55985ca34367bbd03,," """"""Show quota for a project. For a full list of available parameters, please refer to the official API reference: https://docs.openstack.org/api-ref/network/v2/index.html#list-quotas-for-a-project """""" """"""List quotas for projects with non default quota values. For a full list of available parameters, please refer to the official API reference: https://docs.openstack.org/api-ref/network/v2/index.html#list-quotas-for-projects-with-non-default-quota-values """"""",,12,0
openstack%2Fnova~stable%2Fqueens~I5e0a43ec59341c9ac62f89105ddf82c4a014df81,openstack/nova,stable/queens,I5e0a43ec59341c9ac62f89105ddf82c4a014df81,Replace non-nova server fault message,MERGED,2019-08-06 16:05:09.000000000,2019-08-10 00:44:46.000000000,2019-08-09 05:06:08.000000000,"[{'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-06 16:05:09.000000000', 'files': ['nova/tests/functional/test_server_faults.py', 'releasenotes/notes/bug-1837877-cve-fault-message-exposure-5360d794f4976b7c.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/utils.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3dcefba60a4f4553888a9dfda9fe3bee094d617a', 'message': 'Replace non-nova server fault message\n\nThe server fault ""message"" is always shown in the API\nserver response, regardless of policy or user role.\n\nThe fault ""details"" are only shown to users with the\nadmin role when the fault code is 500.\n\nThe problem with this is for non-nova exceptions, the\nfault message is a string-ified version of the exception\n(see nova.compute.utils.exception_to_dict) which can\ncontain sensitive information which the non-admin owner\nof the server can see.\n\nThis change adds a functional test to recreate the issue\nand a change to exception_to_dict which for the non-nova\ncase changes the fault message by simply storing the\nexception type class name. Admins can still see the fault\ntraceback in the ""details"" key of the fault dict in the\nserver API response. Note that _get_fault_details is\nchanged so that the details also includes the exception\nvalue which is what used to be in the fault message for\nnon-nova exceptions. This is necessary so admins can still\nget the exception message with the traceback details.\n\nNote that nova exceptions with a %(reason)s replacement\nvariable could potentially be leaking sensitive details as\nwell but those would need to be cleaned up on a case-by-case\nbasis since we don\'t want to change the behavior of all\nfault messages otherwise users might not see information\nlike NoValidHost when their server goes to ERROR status\nduring scheduling.\n\nSecurityImpact: This change contains a fix for CVE-2019-14433.\n\nChange-Id: I5e0a43ec59341c9ac62f89105ddf82c4a014df81\nCloses-Bug: #1837877\n(cherry picked from commit 298b337a16c0d10916b4431c436d19b3d6f5360e)\n(cherry picked from commit 67651881163b75eb1983eaf753471a91ecec35eb)\n(cherry picked from commit e0b91a5b1e89bd0506dc6da86bc61f1708f0215a)\n'}]",0,674859,3dcefba60a4f4553888a9dfda9fe3bee094d617a,16,6,1,6873,,,0,"Replace non-nova server fault message

The server fault ""message"" is always shown in the API
server response, regardless of policy or user role.

The fault ""details"" are only shown to users with the
admin role when the fault code is 500.

The problem with this is for non-nova exceptions, the
fault message is a string-ified version of the exception
(see nova.compute.utils.exception_to_dict) which can
contain sensitive information which the non-admin owner
of the server can see.

This change adds a functional test to recreate the issue
and a change to exception_to_dict which for the non-nova
case changes the fault message by simply storing the
exception type class name. Admins can still see the fault
traceback in the ""details"" key of the fault dict in the
server API response. Note that _get_fault_details is
changed so that the details also includes the exception
value which is what used to be in the fault message for
non-nova exceptions. This is necessary so admins can still
get the exception message with the traceback details.

Note that nova exceptions with a %(reason)s replacement
variable could potentially be leaking sensitive details as
well but those would need to be cleaned up on a case-by-case
basis since we don't want to change the behavior of all
fault messages otherwise users might not see information
like NoValidHost when their server goes to ERROR status
during scheduling.

SecurityImpact: This change contains a fix for CVE-2019-14433.

Change-Id: I5e0a43ec59341c9ac62f89105ddf82c4a014df81
Closes-Bug: #1837877
(cherry picked from commit 298b337a16c0d10916b4431c436d19b3d6f5360e)
(cherry picked from commit 67651881163b75eb1983eaf753471a91ecec35eb)
(cherry picked from commit e0b91a5b1e89bd0506dc6da86bc61f1708f0215a)
",git fetch https://review.opendev.org/openstack/nova refs/changes/59/674859/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_server_faults.py', 'releasenotes/notes/bug-1837877-cve-fault-message-exposure-5360d794f4976b7c.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/utils.py']",4,3dcefba60a4f4553888a9dfda9fe3bee094d617a,bug/1837877," """"""Converts exceptions to a dict for use in notifications. :param fault: Exception that occurred :param message: Optional fault message, otherwise the message is derived from the fault itself. :returns: dict with the following items: - exception: the fault itself - message: one of (in priority order): - the provided message to this method - a formatted NovaException message - the fault class name - code: integer code for the fault (defaults to 500) """""" # In this case either we have a NovaException which failed to format # the message or we have a non-nova exception which could contain # sensitive details. Since we're not sure, be safe and set the message # to the exception class name. Note that we don't guard on # context.is_admin here because the message is always shown in the API, # even to non-admin users (e.g. NoValidHost) but only the traceback # details are shown to users with the admin role. Checking for admin # context here is also not helpful because admins can perform # operations on a tenant user's server (migrations, reboot, etc) and # service startup and periodic tasks could take actions on a server # and those use an admin context. # TODO(mriedem): Why do we only include the details if the code is 500? # Though for non-nova exceptions the code will probably be 500. if exc_info and error_code == 500: # We get the full exception details including the value since # the fault message may not contain that information for non-nova # exceptions (see exception_to_dict). details = ''.join(traceback.format_exception( exc_info[0], exc_info[1], exc_info[2]))"," """"""Converts exceptions to a dict for use in notifications."""""" try: message = six.text_type(fault) except Exception: message = None if not message: if exc_info and error_code == 500: tb = exc_info[2] if tb: details = ''.join(traceback.format_tb(tb))",183,16
openstack%2Fironic~master~I02ec595e639c04dd65ce788851c5dde074cc1095,openstack/ironic,master,I02ec595e639c04dd65ce788851c5dde074cc1095,DRAC : Fix issue for RAID-0 creation for multiple disks for PERC H740P,MERGED,2019-08-06 09:23:50.000000000,2019-08-10 00:33:05.000000000,2019-08-10 00:33:05.000000000,"[{'_account_id': 7160}, {'_account_id': 8580}, {'_account_id': 10118}, {'_account_id': 10206}, {'_account_id': 10239}, {'_account_id': 10250}, {'_account_id': 14629}, {'_account_id': 17130}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23847}, {'_account_id': 23851}, {'_account_id': 24828}, {'_account_id': 29834}]","[{'number': 1, 'created': '2019-08-06 09:23:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/39b823ff60926855606ff22edda9468e767b93d3', 'message': ""DRAC : Fix issue for RAID-0 creation for multiple disks for PERC H740P\n\nStory: 2005364\nBug: 36089\n\nFix a bug which was introduced when executing ``create_configuration``\ncleaning step for multiple disks of PERC H740P controller, first disks\ngets created and then controller doesn't allow to create next couple\nof disks because controller is getting busy at one time.\n\nChange-Id: I02ec595e639c04dd65ce788851c5dde074cc1095\n""}, {'number': 2, 'created': '2019-08-08 10:13:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/ad0489b89e3469a0f4bdd7c419beedf9d0dd75c0', 'message': ""DRAC : Fix issue for RAID-0 creation for multiple disks for PERC H740P\n\nStory: 2006375\nTask: 36164\n\nFix a bug which was introduced when executing ``create_configuration``\ncleaning step for multiple disks of PERC H740P controller, first disks\ngets created and then controller doesn't allow to create next couple\nof disks because controller is getting busy at one time.\n\nChange-Id: I02ec595e639c04dd65ce788851c5dde074cc1095\n""}, {'number': 3, 'created': '2019-08-09 05:07:13.000000000', 'files': ['ironic/tests/unit/drivers/modules/drac/test_raid.py', 'ironic/drivers/modules/drac/raid.py', 'releasenotes/notes/fix_raid0_creation_for_multiple_disks-f47957754fca0312.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/81e4da55b983f1b0bc60751b61b03086dadb3851', 'message': ""DRAC : Fix issue for RAID-0 creation for multiple disks for PERC H740P\n\nStory: 2006375\nTask: 36164\n\nFix a bug which was introduced when executing ``create_configuration``\ncleaning step for multiple disks of PERC H740P controller, first disks\ngets created and then controller doesn't allow to create next couple\nof disks because controller is getting busy at one time.\n\nChange-Id: I02ec595e639c04dd65ce788851c5dde074cc1095\n""}]",10,674765,81e4da55b983f1b0bc60751b61b03086dadb3851,42,15,3,29834,,,0,"DRAC : Fix issue for RAID-0 creation for multiple disks for PERC H740P

Story: 2006375
Task: 36164

Fix a bug which was introduced when executing ``create_configuration``
cleaning step for multiple disks of PERC H740P controller, first disks
gets created and then controller doesn't allow to create next couple
of disks because controller is getting busy at one time.

Change-Id: I02ec595e639c04dd65ce788851c5dde074cc1095
",git fetch https://review.opendev.org/openstack/ironic refs/changes/65/674765/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/tests/unit/drivers/modules/drac/test_raid.py', 'ironic/drivers/modules/drac/raid.py', 'releasenotes/notes/fix_raid0_creation_for_multiple_disks-f47957754fca0312.yaml']",3,39b823ff60926855606ff22edda9468e767b93d3,bug/36089,"--- fixes: - | Fixed a bug when executes ``create_configuration`` cleaning step for disks of PERC H740P controller, first disks gets created and then controller doesn't allow to create next couple disks because controller is getting busy at one time. ",,14,6
openstack%2Fnova~master~I11081177abfe2fb69fbd8fc17464c9f08962ab4c,openstack/nova,master,I11081177abfe2fb69fbd8fc17464c9f08962ab4c,Make nova-multi-cell job voting and gating,MERGED,2019-08-03 12:46:26.000000000,2019-08-10 00:09:13.000000000,2019-08-09 22:54:22.000000000,"[{'_account_id': 6167}, {'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-03 12:46:26.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/a8f502c04f86db86caf32a4c8b9000c2ee7e7a1d', 'message': ""Make nova-multi-cell job voting and gating\n\nCompared to tempest-full-py3 and tempest-slow-py3\nthe nova-multi-cell job has been relatively stable\nfor the past couple of months so let's make it voting\nso we don't regress multi-cell functionality.\n\nChange-Id: I11081177abfe2fb69fbd8fc17464c9f08962ab4c\n""}]",1,674453,a8f502c04f86db86caf32a4c8b9000c2ee7e7a1d,18,12,1,6873,,,0,"Make nova-multi-cell job voting and gating

Compared to tempest-full-py3 and tempest-slow-py3
the nova-multi-cell job has been relatively stable
for the past couple of months so let's make it voting
so we don't regress multi-cell functionality.

Change-Id: I11081177abfe2fb69fbd8fc17464c9f08962ab4c
",git fetch https://review.opendev.org/openstack/nova refs/changes/53/674453/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,a8f502c04f86db86caf32a4c8b9000c2ee7e7a1d,, - nova-multi-cell, # TODO(mriedem): Make this job voting and gating once we're happy with # its relative stability. voting: false,1,3
openstack%2Fnova~master~Iac2911a7a305a9d14bc6dadb364998f3ecb9ce42,openstack/nova,master,Iac2911a7a305a9d14bc6dadb364998f3ecb9ce42,Add useful error log when _determine_version_cap raises DBNotAllowed,MERGED,2019-08-07 16:31:07.000000000,2019-08-10 00:08:19.000000000,2019-08-09 23:04:09.000000000,"[{'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-07 16:31:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/e55764bd82f4921de0b1c444a0d973d0d6085f0f', 'message': 'Add useful error log when _determine_version_cap raises DBNotAllowed\n\nChange Icddbe4760eaff30e4e13c1e8d3d5d3f489dac3c4 was intended for the\nAPI service to check all cells for the minimum nova-compute service\nversion when [upgrade_levels]/compute=auto.\n\nThat worked in the gate with devstack because we don\'t configure\nnova-compute with access to the database and run nova-compute with\na separate nova-cpu.conf so even if nova-compute is on the same\nhost as the nova-api service, they aren\'t using the same config\nfile (nova-api runs with nova.conf which has access to the API DB\nobviously).\n\nThe problem is when nova-compute is configured with\n[upgrade_levels]/compute=auto and an [api_database]/connection,\nthere are flows that can try to hit the API database directly\nbecause of the _determine_version_cap method. For example, the\n_sync_power_states periodic task trying to stop an instance,\nor even simple inter-compute communication over RPC like during\na resize.\n\nThis change simply catches the DBNotAllowed exception, logs a more\nuseful error message, and re-raises the exception. In addition,\nthe config help for the [api_database] group and ""configuration""\noption specifically are updated to mention they should not be set\non the nova-compute service.\n\nChange-Id: Iac2911a7a305a9d14bc6dadb364998f3ecb9ce42\nRelated-Bug: #1807044\n'}, {'number': 2, 'created': '2019-08-07 17:13:38.000000000', 'files': ['nova/tests/unit/compute/test_rpcapi.py', 'nova/compute/rpcapi.py', 'nova/conf/database.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/7d7d58509d5e60ec19c6310931dc62eeff033595', 'message': 'Add useful error log when _determine_version_cap raises DBNotAllowed\n\nChange Icddbe4760eaff30e4e13c1e8d3d5d3f489dac3c4 was intended for the\nAPI service to check all cells for the minimum nova-compute service\nversion when [upgrade_levels]/compute=auto.\n\nThat worked in the gate with devstack because we don\'t configure\nnova-compute with access to the database and run nova-compute with\na separate nova-cpu.conf so even if nova-compute is on the same\nhost as the nova-api service, they aren\'t using the same config\nfile (nova-api runs with nova.conf which has access to the API DB\nobviously).\n\nThe problem is when nova-compute is configured with\n[upgrade_levels]/compute=auto and an [api_database]/connection,\nthere are flows that can try to hit the API database directly\nbecause of the _determine_version_cap method. For example, the\n_sync_power_states periodic task trying to stop an instance,\nor even simple inter-compute communication over RPC like during\na resize.\n\nThis change simply catches the DBNotAllowed exception, logs a more\nuseful error message, and re-raises the exception. In addition,\nthe config help for the [api_database] group and ""configuration""\noption specifically are updated to mention they should not be set\non the nova-compute service.\n\nChange-Id: Iac2911a7a305a9d14bc6dadb364998f3ecb9ce42\nRelated-Bug: #1807044\nCloses-Bug: #1839360\n'}]",5,675148,7d7d58509d5e60ec19c6310931dc62eeff033595,29,15,2,6873,,,0,"Add useful error log when _determine_version_cap raises DBNotAllowed

Change Icddbe4760eaff30e4e13c1e8d3d5d3f489dac3c4 was intended for the
API service to check all cells for the minimum nova-compute service
version when [upgrade_levels]/compute=auto.

That worked in the gate with devstack because we don't configure
nova-compute with access to the database and run nova-compute with
a separate nova-cpu.conf so even if nova-compute is on the same
host as the nova-api service, they aren't using the same config
file (nova-api runs with nova.conf which has access to the API DB
obviously).

The problem is when nova-compute is configured with
[upgrade_levels]/compute=auto and an [api_database]/connection,
there are flows that can try to hit the API database directly
because of the _determine_version_cap method. For example, the
_sync_power_states periodic task trying to stop an instance,
or even simple inter-compute communication over RPC like during
a resize.

This change simply catches the DBNotAllowed exception, logs a more
useful error message, and re-raises the exception. In addition,
the config help for the [api_database] group and ""configuration""
option specifically are updated to mention they should not be set
on the nova-compute service.

Change-Id: Iac2911a7a305a9d14bc6dadb364998f3ecb9ce42
Related-Bug: #1807044
Closes-Bug: #1839360
",git fetch https://review.opendev.org/openstack/nova refs/changes/48/675148/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_rpcapi.py', 'nova/compute/rpcapi.py', 'nova/conf/database.py']",3,e55764bd82f4921de0b1c444a0d973d0d6085f0f,bug/1839360," This group should **not** be configured for the ``nova-compute`` service. # This help gets appended to the oslo.db help so prefix with a space. help=' Do not set this for the ``nova-compute`` service.'),"," help=''),",46,3
openstack%2Fnova~master~I1d6d2c1f734b28dbea5c67cf88717149dd4911d7,openstack/nova,master,I1d6d2c1f734b28dbea5c67cf88717149dd4911d7,Retrun 400 if invalid query parameters are specified,MERGED,2019-07-12 04:56:42.000000000,2019-08-09 23:50:19.000000000,2019-08-09 23:50:18.000000000,"[{'_account_id': 5754}, {'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 30112}]","[{'number': 1, 'created': '2019-07-12 04:56:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/94d1081d6ff7183fa52ac51dcaab11d3469c9bf7', 'message': 'Retrun 400 if invalid query parameters are specified\n\nThe following APIs return 500 error currently\nif an invalid sort key or an invalid sort direction\nquery parameter is specified.\n\n- GET /flavors\n- GET /flavors/detail\n\nMake the APIs return 400 error in that case.\n\nChange-Id: I1d6d2c1f734b28dbea5c67cf88717149dd4911d7\nCloses-Bug: #1835925\n'}, {'number': 2, 'created': '2019-07-29 02:36:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/21b783c6242cb3674344c21c17b081388686908a', 'message': 'Retrun 400 if invalid query parameters are specified\n\nThe following APIs return 500 error currently\nif an invalid sort key or an invalid sort direction\nquery parameter is specified.\n\n- GET /flavors\n- GET /flavors/detail\n\nMake the APIs return 400 error in that case.\n\nChange-Id: I1d6d2c1f734b28dbea5c67cf88717149dd4911d7\nCloses-Bug: #1835925\n'}, {'number': 3, 'created': '2019-08-04 23:59:51.000000000', 'files': ['api-ref/source/parameters.yaml', 'nova/api/openstack/compute/schemas/flavors.py', 'nova/tests/functional/api_sample_tests/test_flavors.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ae7ebdf45eb6c9c4406d851ab8ee6f2e47d5f275', 'message': 'Retrun 400 if invalid query parameters are specified\n\nThe following APIs return 500 error currently\nif an invalid sort key or an invalid sort direction\nquery parameter is specified.\n\n- GET /flavors\n- GET /flavors/detail\n\nMake the APIs return 400 error in that case.\n\nChange-Id: I1d6d2c1f734b28dbea5c67cf88717149dd4911d7\nCloses-Bug: #1835925\n'}]",0,670440,ae7ebdf45eb6c9c4406d851ab8ee6f2e47d5f275,42,15,3,7634,,,0,"Retrun 400 if invalid query parameters are specified

The following APIs return 500 error currently
if an invalid sort key or an invalid sort direction
query parameter is specified.

- GET /flavors
- GET /flavors/detail

Make the APIs return 400 error in that case.

Change-Id: I1d6d2c1f734b28dbea5c67cf88717149dd4911d7
Closes-Bug: #1835925
",git fetch https://review.opendev.org/openstack/nova refs/changes/40/670440/1 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/parameters.yaml', 'nova/api/openstack/compute/schemas/flavors.py', 'nova/tests/functional/api_sample_tests/test_flavors.py']",3,94d1081d6ff7183fa52ac51dcaab11d3469c9bf7,bug/1835925," sort_keys = ['created_at', 'description', 'disabled', 'ephemeral_gb', 'flavorid', 'id', 'is_public', 'memory_mb', 'name', 'root_gb', 'rxtx_factor', 'swap', 'updated_at', 'vcpu_weight', 'vcpus'] sort_dirs = ['asc', 'desc'] def test_flavors_list_with_sort_key(self): for sort_key in self.sort_keys: response = self._do_get('flavors?sort_key=%s' % sort_key) self._verify_response('flavors-list-resp', self.subs, response, 200) def test_flavors_list_with_invalid_sort_key(self): response = self._do_get('flavors?sort_key=invalid') self.assertEqual(400, response.status_code) def test_flavors_list_with_sort_dir(self): for sort_dir in self.sort_dirs: response = self._do_get('flavors?sort_dir=%s' % sort_dir) self._verify_response('flavors-list-resp', self.subs, response, 200) def test_flavors_list_with_invalid_sort_dir(self): response = self._do_get('flavors?sort_dir=invalid') self.assertEqual(400, response.status_code) def test_flavors_detail_with_sort_key(self): for sort_key in self.sort_keys: response = self._do_get('flavors/detail?sort_key=%s' % sort_key) self._verify_response('flavors-detail-resp', self.subs, response, 200) def test_flavors_detail_with_invalid_sort_key(self): response = self._do_get('flavors/detail?sort_key=invalid') self.assertEqual(400, response.status_code) def test_flavors_detail_with_sort_dir(self): for sort_dir in self.sort_dirs: response = self._do_get('flavors/detail?sort_dir=%s' % sort_dir) self._verify_response('flavors-detail-resp', self.subs, response, 200) def test_flavors_detail_with_invalid_sort_dir(self): response = self._do_get('flavors/detail?sort_dir=invalid') self.assertEqual(400, response.status_code) ",,76,3
openstack%2Fswift~master~Ibf9d83c488bfcfbe9e32539f93dda33581346fa1,openstack/swift,master,Ibf9d83c488bfcfbe9e32539f93dda33581346fa1,WIP: Use Sysmeta Container Override in footers,NEW,2019-08-09 16:14:57.000000000,2019-08-09 23:43:13.000000000,,"[{'_account_id': 1179}, {'_account_id': 7233}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 16:14:57.000000000', 'files': ['test/unit/proxy/controllers/test_obj.py', 'swift/proxy/controllers/obj.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/312c5f935626142b2ddbfe5433ee9f84e1717546', 'message': 'WIP: Use Sysmeta Container Override in footers\n\nThis might help us eventually transistion entirely to sysmeta container\noverride headers.\n\nChange-Id: Ibf9d83c488bfcfbe9e32539f93dda33581346fa1\n'}]",2,675657,312c5f935626142b2ddbfe5433ee9f84e1717546,3,4,1,1179,,,0,"WIP: Use Sysmeta Container Override in footers

This might help us eventually transistion entirely to sysmeta container
override headers.

Change-Id: Ibf9d83c488bfcfbe9e32539f93dda33581346fa1
",git fetch https://review.opendev.org/openstack/swift refs/changes/57/675657/1 && git format-patch -1 --stdout FETCH_HEAD,"['test/unit/proxy/controllers/test_obj.py', 'swift/proxy/controllers/obj.py']",2,312c5f935626142b2ddbfe5433ee9f84e1717546,675451," resolve_etag_is_at_header, get_container_update_override_keydef trailing_metadata(req, policy, client_obj_hasher, override_header = get_container_update_override_key('etag') etag = override_key = client_obj_hasher.hexdigest() if override_header in req.headers: old_etag, sep, params = req.headers[override_header].partition(';') override_key = etag + sep + params size = str(bytes_transferred_from_client) # here (in addition to x-object-sysmeta-container-update-override-* 'X-Backend-Container-Update-Override-Etag': etag, override_header: override_key, 'X-Backend-Container-Update-Override-Size': size, get_container_update_override_key('size'): size, req, policy, etag_hasher,"," resolve_etag_is_at_headerdef trailing_metadata(policy, client_obj_hasher, # here (rather than x-object-sysmeta-container-update-override-* 'X-Backend-Container-Update-Override-Etag': client_obj_hasher.hexdigest(), 'X-Backend-Container-Update-Override-Size': str(bytes_transferred_from_client), policy, etag_hasher,",17,9
openstack%2Fopenstacksdk~master~I3d16d17caa2e8a58b7064c54e930468288aa6ff1,openstack/openstacksdk,master,I3d16d17caa2e8a58b7064c54e930468288aa6ff1,Allow limiting Connection service_types from oslo.config,MERGED,2019-08-05 19:01:14.000000000,2019-08-09 23:30:20.000000000,2019-08-09 23:30:20.000000000,"[{'_account_id': 2}, {'_account_id': 10239}, {'_account_id': 14070}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-05 19:01:14.000000000', 'files': ['openstack/config/cloud_region.py', 'openstack/tests/unit/test_connection.py', 'openstack/tests/unit/base.py', 'openstack/tests/unit/config/test_from_conf.py', 'openstack/connection.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/6cfd642591f65642e704ecc4e4a0b385292cc8ce', 'message': ""Allow limiting Connection service_types from oslo.config\n\nAdd a service_types kwarg to cloud_region.from_conf and\nConnection.__init__, accepting a list/set of service types. All other\nservice types will be explicitly disabled, and we won't attempt to load\ntheir configs.\n\nChange-Id: I3d16d17caa2e8a58b7064c54e930468288aa6ff1\n""}]",2,674675,6cfd642591f65642e704ecc4e4a0b385292cc8ce,9,4,1,14070,,,0,"Allow limiting Connection service_types from oslo.config

Add a service_types kwarg to cloud_region.from_conf and
Connection.__init__, accepting a list/set of service types. All other
service types will be explicitly disabled, and we won't attempt to load
their configs.

Change-Id: I3d16d17caa2e8a58b7064c54e930468288aa6ff1
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/75/674675/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/config/cloud_region.py', 'openstack/tests/unit/test_connection.py', 'openstack/tests/unit/base.py', 'openstack/tests/unit/config/test_from_conf.py', 'openstack/connection.py']",5,6cfd642591f65642e704ecc4e4a0b385292cc8ce,from_conf-limited-service-types," service_types=None, :param service_types: A list/set of service types this Connection should support. All other service types will be disabled (will error if used). **Currently only supported in conjunction with the ``oslo_conf`` kwarg.** app_version=app_version, service_types=service_types)", app_version=app_version),119,47
openstack%2Fnova~master~I75e5bf2c45688f68eeca27404641f4c438b023c6,openstack/nova,master,I75e5bf2c45688f68eeca27404641f4c438b023c6,Convert HostMapping.cells to a dict,MERGED,2019-06-05 17:34:47.000000000,2019-08-09 23:04:16.000000000,2019-08-09 23:04:16.000000000,"[{'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-06-05 17:34:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0d757576a1308d822cb8236df3dd0da20417a739', 'message': 'Convert HostMapping.cells to a dict\n\nThis changes the HostMapping.cells list to a dict,\nkeyed by cell uuid, to each CellMapping object.\nThis is going to be used in a later change where\nwe will create a cached mapping of host to cell uuid\nso we can go quickly from compute node host value to\nget the CellMapping without having to lookup the\nHostMapping again.\n\nChange-Id: I75e5bf2c45688f68eeca27404641f4c438b023c6\nRelated-Bug: #1737465\n'}, {'number': 2, 'created': '2019-08-06 20:12:45.000000000', 'files': ['nova/tests/unit/scheduler/test_host_manager.py', 'nova/scheduler/host_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/426a303ee4cb848e75b9ed2acc498479c651c539', 'message': 'Convert HostMapping.cells to a dict\n\nThis changes the HostMapping.cells list to a dict,\nkeyed by cell uuid, to each CellMapping object.\nThis is going to be used in a later change [1] where\nwe will create a cached mapping of host to cell uuid\nso we can go quickly from compute node host value to\nget the CellMapping without having to lookup the\nHostMapping again.\n\n[1] Ic6b1edfad2e384eb32c6942edc522ee301123cbc\n\nChange-Id: I75e5bf2c45688f68eeca27404641f4c438b023c6\nRelated-Bug: #1737465\n'}]",7,663387,426a303ee4cb848e75b9ed2acc498479c651c539,42,16,2,6873,,,0,"Convert HostMapping.cells to a dict

This changes the HostMapping.cells list to a dict,
keyed by cell uuid, to each CellMapping object.
This is going to be used in a later change [1] where
we will create a cached mapping of host to cell uuid
so we can go quickly from compute node host value to
get the CellMapping without having to lookup the
HostMapping again.

[1] Ic6b1edfad2e384eb32c6942edc522ee301123cbc

Change-Id: I75e5bf2c45688f68eeca27404641f4c438b023c6
Related-Bug: #1737465
",git fetch https://review.opendev.org/openstack/nova refs/changes/87/663387/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/scheduler/test_host_manager.py', 'nova/scheduler/host_manager.py']",2,0d757576a1308d822cb8236df3dd0da20417a739,bug/1737465," for cell in self.cells.values(): # NOTE(danms, tssurya): global dict, keyed by cell uuid, of cells # cached which will be refreshed every time a SIGHUP is sent to the # scheduler. self.cells = {cell.uuid: cell for cell in temp_cells} 'cells': ', '.join(self.cells.keys())}) self.enabled_cells = [c for c in temp_cells if not c.disabled] if CONF.debug: disabled_cells = [c for c in temp_cells if c.disabled] LOG.debug('Found %(count)i disabled cells: %(cells)s', {'count': len(disabled_cells), 'cells': ', '.join( [c.identity for c in disabled_cells])})"," for cell in self.cells: # NOTE(danms, tssurya): global list of cells cached which # will be refreshed every time a SIGHUP is sent to the scheduler. self.cells = temp_cells 'cells': ', '.join([c.uuid for c in self.cells])}) self.enabled_cells = [c for c in self.cells if not c.disabled] disabled_cells = [c for c in self.cells if c.disabled] LOG.debug('Found %(count)i disabled cells: %(cells)s', {'count': len(disabled_cells), 'cells': ', '.join( [c.identity for c in disabled_cells])})",26,22
openstack%2Fopenstack-ansible~master~I368594c920953a8e042329aabb927386d2f0788a,openstack/openstack-ansible,master,I368594c920953a8e042329aabb927386d2f0788a,Default nova_cinder_rbd_inuse when it is not set,MERGED,2019-08-08 18:04:08.000000000,2019-08-09 22:53:46.000000000,2019-08-09 22:53:46.000000000,"[{'_account_id': 17799}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-08 18:04:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/18575ba0f8930960d77e78befb758bc8bfaa3834', 'message': 'Omit nova_cinder_rbd_inuse when it is not set\n\nIf the fact is not set, we do not need to override the role defaults.\n\nChange-Id: I368594c920953a8e042329aabb927386d2f0788a\n'}, {'number': 2, 'created': '2019-08-09 13:08:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/b5b550646f056437b7ac1f01063d06ebeefa7c33', 'message': 'Omit nova_cinder_rbd_inuse when it is not set\n\nIf the fact is not set, we do not need to override the role defaults.\n\nChange-Id: I368594c920953a8e042329aabb927386d2f0788a\n'}, {'number': 3, 'created': '2019-08-09 13:09:10.000000000', 'files': ['playbooks/common-playbooks/nova.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/b9f3b515a4d451471fb34023e0bfb9ceacd21429', 'message': 'Default nova_cinder_rbd_inuse when it is not set\n\nIf the fact is not set, default it according to the os_nova role\ndefaults.\n\nChange-Id: I368594c920953a8e042329aabb927386d2f0788a\n'}]",0,675429,b9f3b515a4d451471fb34023e0bfb9ceacd21429,12,4,3,17799,,,0,"Default nova_cinder_rbd_inuse when it is not set

If the fact is not set, default it according to the os_nova role
defaults.

Change-Id: I368594c920953a8e042329aabb927386d2f0788a
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/29/675429/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/common-playbooks/nova.yml'],1,18575ba0f8930960d77e78befb758bc8bfaa3834,," nova_cinder_rbd_inuse: ""{{ hostvars['localhost']['nova_cinder_rbd_inuse'] | default(omit) }}"""," nova_cinder_rbd_inuse: ""{{ hostvars['localhost']['nova_cinder_rbd_inuse'] }}""",1,1
openstack%2Fopenstack-virtual-baremetal~master~Iccef8ff21b64f20f4a185c654c0308478eecfb4a,openstack/openstack-virtual-baremetal,master,Iccef8ff21b64f20f4a185c654c0308478eecfb4a,Add embedded iPXE script to retry,MERGED,2019-08-09 12:00:36.000000000,2019-08-09 22:46:19.000000000,2019-08-09 22:46:19.000000000,"[{'_account_id': 6928}, {'_account_id': 11166}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-09 12:00:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-virtual-baremetal/commit/71382f2e65720094223784b3f1dc0b65730415ab', 'message': 'Add embedded iPXE script to retry\n\nCurrently when the iPXE boot fails, the machine halts and requires\nmanual intervention to retry. In some environments when machine\nboots, but the network is not yet ready to receive the DHCP request\non time. Sometimes when DHCP is ready, the filename option is not\npresent because the back-end service is not yet ready to provide it.\nThen also sometimes the option is there, but it fails.\n\nThis patch implements a script which will do ten attempts to get\nDHCP and the filename option before failing. When it fails, it will\nthen reboot the machine. The purpose of this is to maximise the chances\nof succeeding the iPXE boot.\n\nA small change to the element deps is also made to ensure that a boot\npartition is created. This is necessary due to changes in\ndiskimage-builder.\n\nChange-Id: Iccef8ff21b64f20f4a185c654c0308478eecfb4a\n'}, {'number': 2, 'created': '2019-08-09 14:14:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-virtual-baremetal/commit/93698df2a77cf85b8455f67cff7fa426a3422f71', 'message': 'Add embedded iPXE script to retry\n\nCurrently when the iPXE boot fails, the machine halts and requires\nmanual intervention to retry. In some environments when machine\nboots, but the network is not yet ready to receive the DHCP request\non time. Sometimes when DHCP is ready, the filename option is not\npresent because the back-end service is not yet ready to provide it.\nThen also sometimes the option is there, but it fails.\n\nThis patch implements a script which will do ten attempts to get\nDHCP and the filename option before failing. When it fails, it will\nthen reboot the machine. The purpose of this is to maximise the chances\nof succeeding the iPXE boot.\n\nA small change to the element deps is also made to ensure that a boot\npartition is created. This is necessary due to changes in\ndiskimage-builder.\n\nChange-Id: Iccef8ff21b64f20f4a185c654c0308478eecfb4a\n'}, {'number': 3, 'created': '2019-08-09 15:05:56.000000000', 'files': ['ipxe/ipxe-boot.qcow2', 'ipxe/elements/ipxe-boot-image/install.d/50-grub2-boot-ipxe', 'ipxe/Makefile', 'ipxe/elements/ipxe-boot-image/element-deps'], 'web_link': 'https://opendev.org/openstack/openstack-virtual-baremetal/commit/b5b7791180b92644b680d738b383d1254f5a1e35', 'message': 'Add embedded iPXE script to retry\n\nCurrently when the iPXE boot fails, the machine halts and requires\nmanual intervention to retry. In some environments when machine\nboots, but the network is not yet ready to receive the DHCP request\non time. Sometimes when DHCP is ready, the filename option is not\npresent because the back-end service is not yet ready to provide it.\nThen also sometimes the option is there, but it fails.\n\nThis patch implements a script which will do ten attempts to get\nDHCP and the filename option before failing. When it fails, it will\nthen reboot the machine. The purpose of this is to maximise the chances\nof succeeding the iPXE boot.\n\nA small change to the element deps is also made to ensure that a boot\npartition is created. This is necessary due to changes in\ndiskimage-builder.\n\nFinally, the git SHA is updated in the make file to the current HEAD\nto ensure that the image built is current.\n\nChange-Id: Iccef8ff21b64f20f4a185c654c0308478eecfb4a\n'}]",0,675601,b5b7791180b92644b680d738b383d1254f5a1e35,12,4,3,6816,,,0,"Add embedded iPXE script to retry

Currently when the iPXE boot fails, the machine halts and requires
manual intervention to retry. In some environments when machine
boots, but the network is not yet ready to receive the DHCP request
on time. Sometimes when DHCP is ready, the filename option is not
present because the back-end service is not yet ready to provide it.
Then also sometimes the option is there, but it fails.

This patch implements a script which will do ten attempts to get
DHCP and the filename option before failing. When it fails, it will
then reboot the machine. The purpose of this is to maximise the chances
of succeeding the iPXE boot.

A small change to the element deps is also made to ensure that a boot
partition is created. This is necessary due to changes in
diskimage-builder.

Finally, the git SHA is updated in the make file to the current HEAD
to ensure that the image built is current.

Change-Id: Iccef8ff21b64f20f4a185c654c0308478eecfb4a
",git fetch https://review.opendev.org/openstack/openstack-virtual-baremetal refs/changes/01/675601/3 && git format-patch -1 --stdout FETCH_HEAD,"['ipxe/ipxe-boot.qcow2', 'ipxe/elements/ipxe-boot-image/install.d/50-grub2-boot-ipxe', 'ipxe/elements/ipxe-boot-image/element-deps']",3,71382f2e65720094223784b3f1dc0b65730415ab,,block-device-mbr,,50,1
openstack%2Fnova~master~I7fee254edefd524633af62d80cb47009b1cf010b,openstack/nova,master,I7fee254edefd524633af62d80cb47009b1cf010b,api-ref: document valid GET /os-migrations?migration_type values,MERGED,2019-08-06 22:42:42.000000000,2019-08-09 22:32:00.000000000,2019-08-09 22:31:59.000000000,"[{'_account_id': 7634}, {'_account_id': 9008}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-06 22:42:42.000000000', 'files': ['api-ref/source/parameters.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/ebd68b3d1e29beddb77704cb3f294a2f90f7334f', 'message': ""api-ref: document valid GET /os-migrations?migration_type values\n\nThere are only four valid values for the migration_type filter\nwhen listing migrations so let's document them for the request\nparameter. Note that the API jsonschema validation does not\nrestrict the values since the filter parameter pre-dated jsonschema\nvalidation for query parameters. Specifying an invalid value would\njust result in no results from the DB query.\n\nChange-Id: I7fee254edefd524633af62d80cb47009b1cf010b\n""}]",1,674949,ebd68b3d1e29beddb77704cb3f294a2f90f7334f,18,13,1,6873,,,0,"api-ref: document valid GET /os-migrations?migration_type values

There are only four valid values for the migration_type filter
when listing migrations so let's document them for the request
parameter. Note that the API jsonschema validation does not
restrict the values since the filter parameter pre-dated jsonschema
validation for query parameters. Specifying an invalid value would
just result in no results from the DB query.

Change-Id: I7fee254edefd524633af62d80cb47009b1cf010b
",git fetch https://review.opendev.org/openstack/nova refs/changes/49/674949/1 && git format-patch -1 --stdout FETCH_HEAD,['api-ref/source/parameters.yaml'],1,ebd68b3d1e29beddb77704cb3f294a2f90f7334f,migrations-api-docs, The type of migration to filter. Valid values are: * ``evacuation`` * ``live-migration`` * ``migration`` * ``resize``, The type of migration to filter.,6,1
openstack%2Fnova~master~I4110ab279df3d25d957648e30645270b75cd07f9,openstack/nova,master,I4110ab279df3d25d957648e30645270b75cd07f9,docs: update 2.23 REST API version history,MERGED,2019-08-06 22:37:59.000000000,2019-08-09 22:31:52.000000000,2019-08-09 22:31:51.000000000,"[{'_account_id': 7634}, {'_account_id': 9008}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-06 22:37:59.000000000', 'files': ['nova/api/openstack/compute/rest_api_version_history.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/92e1e0736dd2ee71e17a207774ee5ae62890cdd4', 'message': ""docs: update 2.23 REST API version history\n\nThe comment about the GET /os-migrations API being deprecated\nand not extended anymore (after 2.23) is obviously not true\nsince it's been updated twice since then (2.59 and 2.66).\n\nChange-Id: I4110ab279df3d25d957648e30645270b75cd07f9\n""}]",0,674948,92e1e0736dd2ee71e17a207774ee5ae62890cdd4,18,13,1,6873,,,0,"docs: update 2.23 REST API version history

The comment about the GET /os-migrations API being deprecated
and not extended anymore (after 2.23) is obviously not true
since it's been updated twice since then (2.59 and 2.66).

Change-Id: I4110ab279df3d25d957648e30645270b75cd07f9
",git fetch https://review.opendev.org/openstack/nova refs/changes/48/674948/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/api/openstack/compute/rest_api_version_history.rst'],1,92e1e0736dd2ee71e17a207774ee5ae62890cdd4,migrations-api-docs,,And the old top-level resource `/os-migrations` won't be extended anymore.,0,1
openstack%2Fcyborg~master~I08c63d533fd5dbd4330c68a22d2ecafb38134766,openstack/cyborg,master,I08c63d533fd5dbd4330c68a22d2ecafb38134766,Add the fake driver,MERGED,2019-06-14 07:14:39.000000000,2019-08-09 22:07:46.000000000,2019-08-09 22:07:45.000000000,"[{'_account_id': 11604}, {'_account_id': 20722}, {'_account_id': 21672}, {'_account_id': 22348}, {'_account_id': 25738}]","[{'number': 1, 'created': '2019-06-14 07:14:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/de3bdc4f5c13dbcbf8163682bb8a34e18656e818', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 2, 'created': '2019-06-14 07:43:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/626f096e2e1499e2dfae3c71cef9710b4a92712f', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 3, 'created': '2019-06-18 01:56:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/081b7bb40ec275ec3ed3c4a376685ad7a08136e2', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 4, 'created': '2019-07-03 06:22:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/49d030778f743e924df5eb7b905cafa58ec8ddc4', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 5, 'created': '2019-07-03 08:06:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/3323f55d5d04f43bffa48e9f430df8d9e2163c14', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 6, 'created': '2019-07-03 08:06:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/9bb10b84313bc015cc2587eccf936f3dfa84cb8a', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 7, 'created': '2019-07-03 08:07:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/15643de70f4906111b0a4af767c2a6c0dcd87e8c', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 8, 'created': '2019-07-10 07:25:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/6553c510bfabaaf74a3cd191843342e36ce82738', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 9, 'created': '2019-07-25 02:10:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/30963cd840c7332b10963ba81c9760cf3f554236', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 10, 'created': '2019-08-09 07:48:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/65607fe9aafa1053a8b496b8148631ba83021bd1', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}, {'number': 11, 'created': '2019-08-09 08:25:11.000000000', 'files': ['cyborg/accelerator/drivers/fake.py', 'requirements.txt', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/cyborg/commit/658334455bbd113611097645f2b9c2f89ae98527', 'message': 'Add the fake driver\n\nThis patch add the fake driver, this driver can be configured\nin cyborg.cfg to enable it:\n\n[agent]\nenabled_drivers = fake_driver\n\nIt would be used in cyborg test.\n\nChange-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766\n'}]",14,665318,658334455bbd113611097645f2b9c2f89ae98527,37,5,11,20722,,,0,"Add the fake driver

This patch add the fake driver, this driver can be configured
in cyborg.cfg to enable it:

[agent]
enabled_drivers = fake_driver

It would be used in cyborg test.

Change-Id: I08c63d533fd5dbd4330c68a22d2ecafb38134766
",git fetch https://review.opendev.org/openstack/cyborg refs/changes/18/665318/11 && git format-patch -1 --stdout FETCH_HEAD,"['cyborg/accelerator/drivers/fake.py', 'setup.cfg']",2,de3bdc4f5c13dbcbf8163682bb8a34e18656e818,fake, fake_driver = cyborg.accelerator.drivers.fake:FakeDriver,,67,0
openstack%2Fopenstacksdk~master~Ifd4f2fce59c76148807fb7390f68eaae179694c4,openstack/openstacksdk,master,Ifd4f2fce59c76148807fb7390f68eaae179694c4,Skip most service_description for unknown services,MERGED,2019-08-07 15:18:20.000000000,2019-08-09 21:49:09.000000000,2019-08-09 19:35:54.000000000,"[{'_account_id': 3099}, {'_account_id': 6873}, {'_account_id': 14070}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 15:18:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/1de3e2855d670a70d6c874b2af1d0599a27e87c6', 'message': ""Skip most service_description for unknown services\n\nWhen we don't know anything about a service, we can know early\nin the process that we're never going to match a supported version.\nThat means we can just directly and without malice or warnings\nreturn a REST adapter and be done with it.\n\nChange-Id: Ifd4f2fce59c76148807fb7390f68eaae179694c4\n""}, {'number': 2, 'created': '2019-08-07 17:42:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/b7086fa1e2849b87c2e7f67b8e43bc2cf12ceca8', 'message': ""Skip most service_description for unknown services\n\nWhen we don't know anything about a service, we can know early\nin the process that we're never going to match a supported version.\nThat means we can just directly and without malice or warnings\nreturn a REST adapter and be done with it.\n\nChange-Id: Ifd4f2fce59c76148807fb7390f68eaae179694c4\n""}, {'number': 3, 'created': '2019-08-09 15:28:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/58f99d5ae3180c8f5cfbfd878ee1b598122ae700', 'message': ""Skip most service_description for unknown services\n\nWhen we don't know anything about a service, we can know early\nin the process that we're never going to match a supported version.\nThat means we can just directly and without malice or warnings\nreturn a REST adapter and be done with it.\n\nChange-Id: Ifd4f2fce59c76148807fb7390f68eaae179694c4\n""}, {'number': 4, 'created': '2019-08-09 15:42:08.000000000', 'files': ['openstack/tests/unit/test_connection.py', 'openstack/service_description.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/a7423f720fd4319e8abf0bf0abaaae8f9972142c', 'message': ""Skip most service_description for unknown services\n\nWhen we don't know anything about a service, we can know early\nin the process that we're never going to match a supported version.\nThat means we can just directly and without malice or warnings\nreturn a REST adapter and be done with it.\n\nChange-Id: Ifd4f2fce59c76148807fb7390f68eaae179694c4\n""}]",1,675135,a7423f720fd4319e8abf0bf0abaaae8f9972142c,17,4,4,2,,,0,"Skip most service_description for unknown services

When we don't know anything about a service, we can know early
in the process that we're never going to match a supported version.
That means we can just directly and without malice or warnings
return a REST adapter and be done with it.

Change-Id: Ifd4f2fce59c76148807fb7390f68eaae179694c4
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/35/675135/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/service_description.py'],1,1de3e2855d670a70d6c874b2af1d0599a27e87c6,fixture," # We don't know anything about this service, so the user is # explicitly just using us for a passthrough REST adapter. # Skip all the lower logic. if not self.supported_versions: return config.get_session_client( self.service_type, allow_version_hack=True, ) # Check to see if we've got config that matches what we if endpoint_override and version_string: elif endpoint_override: else:"," # First, check to see if we've got config that matches what we if endpoint_override and version_string and self.supported_versions: elif endpoint_override and self.supported_versions: elif self.supported_versions:",13,4
openstack%2Fnetworking-hyperv~master~Iea85d110ab057b17d133b3db6eb93c0a33c88cb9,openstack/networking-hyperv,master,Iea85d110ab057b17d133b3db6eb93c0a33c88cb9,Add Python 3 Train unit tests,MERGED,2019-07-05 21:03:03.000000000,2019-08-09 21:17:51.000000000,2019-08-09 21:17:51.000000000,"[{'_account_id': 8213}, {'_account_id': 11805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-05 21:03:03.000000000', 'files': ['.zuul.yaml', 'setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/networking-hyperv/commit/d8118b726c0805efa952580808e7cfea927a416a', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: Iea85d110ab057b17d133b3db6eb93c0a33c88cb9\nStory: #2005924\nTask: #34257\n'}]",0,669530,d8118b726c0805efa952580808e7cfea927a416a,8,3,1,11805,,,0,"Add Python 3 Train unit tests

This is a mechanically generated patch to ensure unit testing is in place
for all of the Tested Runtimes for Train.

See the Train python3-updates goal document for details:
https://governance.openstack.org/tc/goals/train/python3-updates.html

Change-Id: Iea85d110ab057b17d133b3db6eb93c0a33c88cb9
Story: #2005924
Task: #34257
",git fetch https://review.opendev.org/openstack/networking-hyperv refs/changes/30/669530/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg', 'tox.ini']",3,d8118b726c0805efa952580808e7cfea927a416a,python3-train,"envlist = py27,py37,pep8","envlist = py27,py36,pep8",3,3
openstack%2Fkeystone~master~I16eee0dcd2de36c3435ba941f723514082484b52,openstack/keystone,master,I16eee0dcd2de36c3435ba941f723514082484b52,Migrations for application credential capabilities,ABANDONED,2018-06-06 13:49:28.000000000,2019-08-09 20:53:25.000000000,,"[{'_account_id': 2903}, {'_account_id': 5046}, {'_account_id': 8482}, {'_account_id': 12542}, {'_account_id': 22348}]","[{'number': 1, 'created': '2018-06-06 13:49:28.000000000', 'files': ['keystone/common/sql/contract_repo/versions/046_contract_add_capability_tables.py', 'keystone/common/sql/data_migration_repo/versions/046_migrate_add_capability_tables.py', 'keystone/common/sql/expand_repo/versions/046_expand_add_capability_tables.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/c9626e53db05e4c6ec671649a2f83a3d228b7056', 'message': 'Migrations for application credential capabilities\n\nThis commit adds an additive-only migration for the tables required\nfor appplication credential capabilities, namely:\n\n* A url_path_template table for URL path templates\n* A url_path_template_key table for listing the keys defined for a URL template\n* A url_path_template_value table for user defined keys to substitute into path\n* A capabilities table for the actual capabilities list\n\nChange-Id: I16eee0dcd2de36c3435ba941f723514082484b52\nbp: whitelist-extension-for-app-creds\n'}]",12,572776,c9626e53db05e4c6ec671649a2f83a3d228b7056,10,5,1,12542,,,0,"Migrations for application credential capabilities

This commit adds an additive-only migration for the tables required
for appplication credential capabilities, namely:

* A url_path_template table for URL path templates
* A url_path_template_key table for listing the keys defined for a URL template
* A url_path_template_value table for user defined keys to substitute into path
* A capabilities table for the actual capabilities list

Change-Id: I16eee0dcd2de36c3435ba941f723514082484b52
bp: whitelist-extension-for-app-creds
",git fetch https://review.opendev.org/openstack/keystone refs/changes/76/572776/1 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/common/sql/contract_repo/versions/046_contract_add_capability_tables.py', 'keystone/common/sql/data_migration_repo/versions/046_migrate_add_capability_tables.py', 'keystone/common/sql/expand_repo/versions/046_expand_add_capability_tables.py']",3,c9626e53db05e4c6ec671649a2f83a3d228b7056,bp/whitelist-extension-for-app-creds,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import sqlalchemy as sql def upgrade(migrate_engine): meta = sql.MetaData() meta.bind = migrate_engine application_credential_table = sql.Table('application_credential', meta, None, autoload=True) url_path_template = sql.Table( 'url_path_template', meta, sql.Column('internal_id', sql.Integer, primary_key=True, nullable=False), sql.Column('id', sql.String(length=64), nullable=False), sql.Column('template_string', sql.Text(), nullable=False), sql.Column('allow_chained', sql.Boolean(), nullable=False, server_default='0'), sql.UniqueConstraint('id', name='duplicate_id_constraint'), mysql_engine='InnoDB', mysql_charset='utf8') capability = sql.Table( 'capability', meta, sql.Column('internal_id', sql.Integer, primary_key=True, nullable=False), sql.Column('application_credential_id', sql.Integer, sql.ForeignKey(application_credential_table.c.internal_id, ondelete='CASCADE'), index=True, nullable=False), sql.Column('id', sql.String(length=64), nullable=False), sql.Column('url_path', sql.Text(), nullable=False), sql.Column('service_uuid', sql.String(length=64), nullable=False), sql.Column('allow_chained', sql.Boolean(), nullable=False, server_default='0'), sql.Column('request_type', sql.String(length=7), nullable=False), mysql_engine='InnoDB', mysql_charset='utf8') url_path_template_key = sql.Table( 'url_path_template_key', meta, sql.Column('internal_id', sql.Integer, primary_key=True, nullable=False), sql.Column('url_path_template_id', sql.Integer, sql.ForeignKey(url_path_template.c.internal_id, ondelete='CASCADE'), index=True, nullable=False), sql.Column('key', sql.String(255), nullable=False), sql.Column('type', sql.Enum('context', 'user'), nullable=False), mysql_engine='InnoDB', mysql_charset='utf8') url_path_template_value = sql.Table( 'url_path_template_value', meta, sql.Column('internal_id', sql.Integer, primary_key=True, nullable=False), sql.Column('capability_id', sql.Integer, sql.ForeignKey(capability.c.internal_id, ondelete='CASCADE'), index=True, nullable=False), sql.Column('key', sql.String(255), nullable=False), sql.Column('value', sql.String(255), nullable=True), mysql_engine='InnoDB', mysql_charset='utf8') url_path_template.create(migrate_engine, checkfirst=True) capability.create(migrate_engine, checkfirst=True) url_path_template_key.create(migrate_engine, checkfirst=True) url_path_template_value.create(migrate_engine, checkfirst=True) ",,119,0
openstack%2Fnetworking-baremetal~stable%2Fpike~I3d550ab4cd6de099dae417dc14867e94fe9db7f7,openstack/networking-baremetal,stable/pike,I3d550ab4cd6de099dae417dc14867e94fe9db7f7,Install Neutron from stable/pike,MERGED,2019-05-29 16:16:42.000000000,2019-08-09 20:45:28.000000000,2019-08-09 20:45:28.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 24245}]","[{'number': 1, 'created': '2019-05-29 16:16:42.000000000', 'files': ['tools/tox_install.sh'], 'web_link': 'https://opendev.org/openstack/networking-baremetal/commit/d34fd44053fef1d9772a15b19b45cceddee49c3e', 'message': 'Install Neutron from stable/pike\n\notherwise when running unit tests locally (w/o Zuul and zuul-cloner)\nthe master version of neutron is installed and tests fail.\n\nChange-Id: I3d550ab4cd6de099dae417dc14867e94fe9db7f7\n'}]",0,662030,d34fd44053fef1d9772a15b19b45cceddee49c3e,9,5,1,9542,,,0,"Install Neutron from stable/pike

otherwise when running unit tests locally (w/o Zuul and zuul-cloner)
the master version of neutron is installed and tests fail.

Change-Id: I3d550ab4cd6de099dae417dc14867e94fe9db7f7
",git fetch https://review.opendev.org/openstack/networking-baremetal refs/changes/30/662030/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/tox_install.sh'],1,d34fd44053fef1d9772a15b19b45cceddee49c3e,fix-local-tests,BRANCH_NAME=stable/pike,BRANCH_NAME=master,1,1
openstack%2Fironic~stable%2Fstein~Ie3b699a0010c88366a0814db28fc7cbac123a8b2,openstack/ironic,stable/stein,Ie3b699a0010c88366a0814db28fc7cbac123a8b2,Fixing broken links,MERGED,2019-08-09 07:59:43.000000000,2019-08-09 20:40:43.000000000,2019-08-09 15:42:33.000000000,"[{'_account_id': 10206}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2019-08-09 07:59:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/a51d0adb1853b369dc8774808d998a5a7c7fa94d', 'message': 'Fixing broken links\n\nChange-Id: Ie3b699a0010c88366a0814db28fc7cbac123a8b2\nBackport: stein rocky\n'}, {'number': 2, 'created': '2019-08-09 11:46:43.000000000', 'files': ['doc/source/admin/drivers/ilo.rst', 'doc/source/admin/drivers/irmc.rst', 'doc/source/admin/drivers/idrac.rst', 'doc/source/admin/console.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/82ce9a67bb0c8a22434f5a01a206af9c8f722798', 'message': 'Fixing broken links\n\nChange-Id: Ie3b699a0010c88366a0814db28fc7cbac123a8b2\nBackport: stein rocky\n'}]",0,675550,82ce9a67bb0c8a22434f5a01a206af9c8f722798,13,6,2,10607,,,0,"Fixing broken links

Change-Id: Ie3b699a0010c88366a0814db28fc7cbac123a8b2
Backport: stein rocky
",git fetch https://review.opendev.org/openstack/ironic refs/changes/50/675550/2 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/drivers/ilo.rst', 'doc/source/admin/drivers/irmc.rst', 'doc/source/admin/drivers/idrac.rst', 'doc/source/admin/console.rst']",4,a51d0adb1853b369dc8774808d998a5a7c7fa94d,fix-url-404, .. note:: shellinabox is no longer maintained by the authorized author. `This <https://github.com/shellinabox/shellinabox>`_ is a fork of the project on GitHub that aims to continue with maintenance of the shellinabox project. .. _`shellinabox page`: https://code.google.com/archive/p/shellinabox/,.. _`shellinabox page`: https://code.google.com/p/shellinabox/,14,7
openstack%2Fheat~master~I9adb45ef380b476fdd669650e98add5a9f7e4043,openstack/heat,master,I9adb45ef380b476fdd669650e98add5a9f7e4043,Allow user@domain in user property,ABANDONED,2019-08-09 19:54:58.000000000,2019-08-09 20:04:13.000000000,,[],"[{'number': 1, 'created': '2019-08-09 19:54:58.000000000', 'files': ['heat/engine/clients/os/keystone/__init__.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/fb658f7035f520c6d0d48dcb3169cb29d870c6ed', 'message': 'Allow user@domain in user property\n\nChange-Id: I9adb45ef380b476fdd669650e98add5a9f7e4043\n'}]",0,675694,fb658f7035f520c6d0d48dcb3169cb29d870c6ed,2,0,1,30515,,,0,"Allow user@domain in user property

Change-Id: I9adb45ef380b476fdd669650e98add5a9f7e4043
",git fetch https://review.opendev.org/openstack/heat refs/changes/94/675694/1 && git format-patch -1 --stdout FETCH_HEAD,['heat/engine/clients/os/keystone/__init__.py'],1,fb658f7035f520c6d0d48dcb3169cb29d870c6ed,," if '@' in group and not domain: group_with_domain = group group, domain = group_with_domain.split('@') domain = self.get_domain_id(domain) except: raise exception.Invalid(reason=""Invalid group provided: %s""%(group)) try: if '@' in user and not domain: user_with_domain = user user, domain = user_with_domain.split('@') domain = self.get_domain_id(domain) except: raise exception.Invalid(reason=""Invalid user provided: %s""%(user)) try:",,14,0
openstack%2Fopenstacksdk~master~Iedebf0d6d95605ce5d67936d974e8e40ba11802c,openstack/openstacksdk,master,Iedebf0d6d95605ce5d67936d974e8e40ba11802c,bug: Consider case when comparing object values,ABANDONED,2019-08-09 19:31:40.000000000,2019-08-09 19:47:39.000000000,,[{'_account_id': 2}],"[{'number': 1, 'created': '2019-08-09 19:31:40.000000000', 'files': ['openstack/cloud/_object_store.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/ee1bce397f943b0087ec0924721a685f44b6ab64', 'message': 'bug: Consider case when comparing object values\n\nThe method to delete autocreated objects would never work because\nthe headers returned from swift are camelcase. Use the option to\nget them back in lowercase for easy comparison.\n\nChange-Id: Iedebf0d6d95605ce5d67936d974e8e40ba11802c\n'}]",0,675684,ee1bce397f943b0087ec0924721a685f44b6ab64,3,1,1,3099,,,0,"bug: Consider case when comparing object values

The method to delete autocreated objects would never work because
the headers returned from swift are camelcase. Use the option to
get them back in lowercase for easy comparison.

Change-Id: Iedebf0d6d95605ce5d67936d974e8e40ba11802c
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/84/675684/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/cloud/_object_store.py'],1,ee1bce397f943b0087ec0924721a685f44b6ab64,object-fixes," meta = self.get_object_metadata(container, obj['name'], lowercase_keys=True)"," meta = self.get_object_metadata(container, obj['name'])",2,1
openstack%2Fopenstacksdk~master~I50ee904a8912aeff03aa363a3fb151714c0a36b4,openstack/openstacksdk,master,I50ee904a8912aeff03aa363a3fb151714c0a36b4,Add option to lowercase object meta keys,ABANDONED,2019-08-09 19:31:40.000000000,2019-08-09 19:47:31.000000000,,[{'_account_id': 2}],"[{'number': 1, 'created': '2019-08-09 19:31:40.000000000', 'files': ['openstack/tests/unit/cloud/test_object.py', 'openstack/cloud/_object_store.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/909cc685d0b98a0bbd655b7a26f036c1965b5b11', 'message': ""Add option to lowercase object meta keys\n\nThe keys we might save on an object's metadata may not be returned\nwith the same casing when returned (it is, in fact, returned in\ncamelcase). Add an option to lowercase the keys for us.\n\nChange-Id: I50ee904a8912aeff03aa363a3fb151714c0a36b4\n""}]",0,675682,909cc685d0b98a0bbd655b7a26f036c1965b5b11,3,1,1,3099,,,0,"Add option to lowercase object meta keys

The keys we might save on an object's metadata may not be returned
with the same casing when returned (it is, in fact, returned in
camelcase). Add an option to lowercase the keys for us.

Change-Id: I50ee904a8912aeff03aa363a3fb151714c0a36b4
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/82/675682/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/tests/unit/cloud/test_object.py', 'openstack/cloud/_object_store.py']",2,909cc685d0b98a0bbd655b7a26f036c1965b5b11,object-fixes," def get_object_metadata(self, container, name, lowercase_keys=False): try: orig_meta = self._object_store_client.head( if lowercase_keys: return dict((k.lower(), v) for k, v in orig_meta.items()) return orig_meta"," def get_object_metadata(self, container, name): try: return self._object_store_client.head(",30,2
openstack%2Fpython-zaqarclient~master~I6b5253d4456dd76155b8944854e67ff98b6b89fa,openstack/python-zaqarclient,master,I6b5253d4456dd76155b8944854e67ff98b6b89fa,Drop pool group support,ABANDONED,2019-05-15 16:48:38.000000000,2019-08-09 19:43:55.000000000,,"[{'_account_id': 6593}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-05-15 16:48:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/052b70a6f61ed910756460c0987dd8d2060dcf0e', 'message': 'Drop pool group support\n\nChange I64fa5fde35f9b9f2e8aa4977eb2c253ffc6aee99 on the service side\nremoved all support for pool group in a backwards incompatible way,\ncausing any client calls that include it to fail. This is causing\nfunctional test failures for python-zaqarclient now and is preventing\nany patches from passing gate checks.\n\nThis patch drops support in the client. The next release will need to be\na major one to indicate there was a backwards incompatible change\nincluded.\n\nAlso needed to update the Sphinx doc requirement to match current global\nrequirements since that is also causing a blocking failure in the gate.\n\nChange-Id: I6b5253d4456dd76155b8944854e67ff98b6b89fa\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}, {'number': 2, 'created': '2019-05-15 16:57:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/52df03c53454812d75e23e0847474151bfc1d6d4', 'message': 'Drop pool group support\n\nChange I64fa5fde35f9b9f2e8aa4977eb2c253ffc6aee99 on the service side\nremoved all support for pool group in a backwards incompatible way,\ncausing any client calls that include it to fail. This is causing\nfunctional test failures for python-zaqarclient now and is preventing\nany patches from passing gate checks.\n\nThis patch drops support in the client. The next release will need to be\na major one to indicate there was a backwards incompatible change\nincluded.\n\nAlso needed to update the Sphinx doc requirement to match current global\nrequirements since that is also causing a blocking failure in the gate.\n\nChange-Id: I6b5253d4456dd76155b8944854e67ff98b6b89fa\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}, {'number': 3, 'created': '2019-05-15 19:34:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/f3b3e7150401c6e193402adf690d2343d7fe9945', 'message': 'Drop pool group support\n\nChange I64fa5fde35f9b9f2e8aa4977eb2c253ffc6aee99 on the service side\nremoved all support for pool group in a backwards incompatible way,\ncausing any client calls that include it to fail. This is causing\nfunctional test failures for python-zaqarclient now and is preventing\nany patches from passing gate checks.\n\nThis patch drops support in the client. The next release will need to be\na major one to indicate there was a backwards incompatible change\nincluded.\n\nAlso needed to update the Sphinx doc requirement to match current global\nrequirements since that is also causing a blocking failure in the gate.\n\nAlso needed to uncap jsonschema to match current global requirements.\n\nCo-Authored-by: Tony Breeds <tony@bakeyournoodle.com>\nChange-Id: I6b5253d4456dd76155b8944854e67ff98b6b89fa\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}, {'number': 4, 'created': '2019-05-15 20:19:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/27cd920916500172e477758f61fff6354eeb8904', 'message': 'Drop pool group support\n\nChange I64fa5fde35f9b9f2e8aa4977eb2c253ffc6aee99 on the service side\nremoved all support for pool group in a backwards incompatible way,\ncausing any client calls that include it to fail. This is causing\nfunctional test failures for python-zaqarclient now and is preventing\nany patches from passing gate checks.\n\nThis patch drops support in the client. The next release will need to be\na major one to indicate there was a backwards incompatible change\nincluded.\n\nAlso needed to update the Sphinx doc requirement to match current global\nrequirements since that is also causing a blocking failure in the gate.\n\nAlso needed to uncap jsonschema to match current global requirements.\n\nCo-Authored-by: Tony Breeds <tony@bakeyournoodle.com>\nChange-Id: I6b5253d4456dd76155b8944854e67ff98b6b89fa\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}, {'number': 5, 'created': '2019-05-15 20:56:17.000000000', 'files': ['zaqarclient/tests/queues/flavor.py', 'zaqarclient/queues/v1/flavor.py', 'requirements.txt', 'doc/requirements.txt', 'zaqarclient/queues/v1/pool.py'], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/6f641d59455c7b35c7d9ac3d2fa9a364f9b97232', 'message': 'Drop pool group support\n\nChange I64fa5fde35f9b9f2e8aa4977eb2c253ffc6aee99 on the service side\nremoved all support for pool group in a backwards incompatible way,\ncausing any client calls that include it to fail. This is causing\nfunctional test failures for python-zaqarclient now and is preventing\nany patches from passing gate checks.\n\nThis patch drops support in the client. The next release will need to be\na major one to indicate there was a backwards incompatible change\nincluded.\n\nAlso needed to update the Sphinx doc requirement to match current global\nrequirements since that is also causing a blocking failure in the gate.\n\nAlso needed to uncap jsonschema to match current global requirements.\n\nCo-Authored-by: Tony Breeds <tony@bakeyournoodle.com>\nChange-Id: I6b5253d4456dd76155b8944854e67ff98b6b89fa\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,659339,6f641d59455c7b35c7d9ac3d2fa9a364f9b97232,12,3,5,11904,,,0,"Drop pool group support

Change I64fa5fde35f9b9f2e8aa4977eb2c253ffc6aee99 on the service side
removed all support for pool group in a backwards incompatible way,
causing any client calls that include it to fail. This is causing
functional test failures for python-zaqarclient now and is preventing
any patches from passing gate checks.

This patch drops support in the client. The next release will need to be
a major one to indicate there was a backwards incompatible change
included.

Also needed to update the Sphinx doc requirement to match current global
requirements since that is also causing a blocking failure in the gate.

Also needed to uncap jsonschema to match current global requirements.

Co-Authored-by: Tony Breeds <tony@bakeyournoodle.com>
Change-Id: I6b5253d4456dd76155b8944854e67ff98b6b89fa
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/python-zaqarclient refs/changes/39/659339/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/requirements.txt', 'zaqarclient/queues/v1/pool.py']",2,052b70a6f61ed910756460c0987dd8d2060dcf0e,blocker," def __init__(self, client, name, uri=None, weight=None, auto_create=True,"," def __init__(self, client, name, weight=None, uri=None, group=None, auto_create=True, self.group = group if self.client.api_version >= 1.1 and self.group: data['group'] = self.group ",3,8
openstack%2Fpython-zaqarclient~master~I86df72b228fdddb40b13836c8d3d10766169abf8,openstack/python-zaqarclient,master,I86df72b228fdddb40b13836c8d3d10766169abf8,Update sphinx and uncap jsonschema,ABANDONED,2019-05-30 22:30:43.000000000,2019-08-09 19:43:08.000000000,,"[{'_account_id': 6593}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-05-30 22:30:43.000000000', 'files': ['requirements.txt', 'doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/730a382ce8846449fe2ba69323857b99c34dbb84', 'message': 'Update sphinx and uncap jsonschema\n\nThis updates these two requirements to match global requirements.\n\nChange-Id: I86df72b228fdddb40b13836c8d3d10766169abf8\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,662346,730a382ce8846449fe2ba69323857b99c34dbb84,4,2,1,11904,,,0,"Update sphinx and uncap jsonschema

This updates these two requirements to match global requirements.

Change-Id: I86df72b228fdddb40b13836c8d3d10766169abf8
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/python-zaqarclient refs/changes/46/662346/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'doc/requirements.txt']",2,730a382ce8846449fe2ba69323857b99c34dbb84,sphinx,"sphinx!=1.6.6,!=1.6.7,>=1.6.3,<2.0.0;python_version=='2.7' # BSD sphinx!=1.6.6,!=1.6.7,>=1.6.3;python_version>='3.4' # BSD","sphinx!=1.6.6,!=1.6.7,>=1.6.2 # BSD",3,2
openstack%2Fironic~master~Ie3b699a0010c88366a0814db28fc7cbac123a8b2,openstack/ironic,master,Ie3b699a0010c88366a0814db28fc7cbac123a8b2,Fixing broken links,MERGED,2019-08-09 05:23:43.000000000,2019-08-09 19:27:50.000000000,2019-08-09 15:42:26.000000000,"[{'_account_id': 10206}, {'_account_id': 10239}, {'_account_id': 10343}, {'_account_id': 10607}, {'_account_id': 11655}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2019-08-09 05:23:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/6ed6554262e14359f00daf2ed0144cf29b64e2c9', 'message': 'Fixing broken links\n\nChange-Id: Ie3b699a0010c88366a0814db28fc7cbac123a8b2\nBackport: stein rocky\n'}, {'number': 2, 'created': '2019-08-09 07:59:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/028e723179018c703c069f357c957aa611628158', 'message': 'Fixing broken links\n\nChange-Id: Ie3b699a0010c88366a0814db28fc7cbac123a8b2\nBackport: stein rocky\n'}, {'number': 3, 'created': '2019-08-09 11:45:38.000000000', 'files': ['doc/source/admin/drivers/ilo.rst', 'doc/source/admin/drivers/irmc.rst', 'doc/source/admin/drivers/idrac.rst', 'doc/source/admin/console.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/c740ae0a2f9d8dd4ebea2a085f8afa830cf85571', 'message': 'Fixing broken links\n\nChange-Id: Ie3b699a0010c88366a0814db28fc7cbac123a8b2\nBackport: stein rocky\n'}]",3,675522,c740ae0a2f9d8dd4ebea2a085f8afa830cf85571,18,8,3,10607,,,0,"Fixing broken links

Change-Id: Ie3b699a0010c88366a0814db28fc7cbac123a8b2
Backport: stein rocky
",git fetch https://review.opendev.org/openstack/ironic refs/changes/22/675522/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/drivers/ilo.rst', 'doc/source/admin/drivers/irmc.rst', 'doc/source/admin/drivers/idrac.rst', 'doc/source/admin/console.rst']",4,6ed6554262e14359f00daf2ed0144cf29b64e2c9,fix-url-404, .. note:: shellinabox is no longer maintained by the authorized author. `This <https://github.com/shellinabox/shellinabox>`_ is a fork of the project on GitHub that to continue with maintenance of the shellinabox project. .. _`shellinabox page`: https://code.google.com/archive/p/shellinabox/,.. _`shellinabox page`: https://code.google.com/p/shellinabox/,14,7
openstack%2Fnetworking-hyperv~master~I55eecfe1b2f27cccd30f02cab6778f54856a2cfa,openstack/networking-hyperv,master,I55eecfe1b2f27cccd30f02cab6778f54856a2cfa,Uses neutron_lib trunk constants,MERGED,2019-08-09 10:11:23.000000000,2019-08-09 19:15:35.000000000,2019-08-09 19:15:35.000000000,"[{'_account_id': 8213}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 10:11:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-hyperv/commit/465fcb4eae6623e85d979614fb897d5b2e7f5176', 'message': 'Uses neutron_lib trunk constants\n\nThe neutron trunk constants have been moved to neutron_lib.\n\nChange-Id: I55eecfe1b2f27cccd30f02cab6778f54856a2cfa\nCloses-Bug: #1839574\n'}, {'number': 2, 'created': '2019-08-09 11:12:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-hyperv/commit/e2f3fd10f27d57924c1472a6457e14754f5730f8', 'message': 'Uses neutron_lib trunk constants\n\nThe neutron trunk constants have been moved to neutron_lib.\n\nChange-Id: I55eecfe1b2f27cccd30f02cab6778f54856a2cfa\nCloses-Bug: #1839574\n'}, {'number': 3, 'created': '2019-08-09 12:07:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-hyperv/commit/885b5d81b35ab1a9b1ccf472c2fd9cd9dd6d2565', 'message': 'Uses neutron_lib trunk constants\n\nThe neutron trunk constants have been moved to neutron_lib.\n\nChange-Id: I55eecfe1b2f27cccd30f02cab6778f54856a2cfa\nCloses-Bug: #1839574\n'}, {'number': 4, 'created': '2019-08-09 12:37:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-hyperv/commit/c0036bc005fb42625003937162475bbc960ae71f', 'message': 'Uses neutron_lib trunk constants\n\nThe neutron trunk constants have been moved to neutron_lib.\n\nChange-Id: I55eecfe1b2f27cccd30f02cab6778f54856a2cfa\nCloses-Bug: #1839574\n'}, {'number': 5, 'created': '2019-08-09 13:07:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-hyperv/commit/f3acfd1c7d7b2e7b1fe7bfe142756d3c7b56ec15', 'message': 'Uses neutron_lib trunk constants\n\nThe neutron trunk constants have been moved to neutron_lib.\n\nChange-Id: I55eecfe1b2f27cccd30f02cab6778f54856a2cfa\nCloses-Bug: #1839574\n'}, {'number': 6, 'created': '2019-08-09 13:27:29.000000000', 'files': ['requirements.txt', 'networking_hyperv/neutron/trunk_driver.py', 'test-requirements.txt', 'lower-constraints.txt', 'networking_hyperv/tests/unit/neutron/test_trunk_driver.py'], 'web_link': 'https://opendev.org/openstack/networking-hyperv/commit/79148e1dbf4e3249598f509bbedf038b691654d6', 'message': 'Uses neutron_lib trunk constants\n\nThe neutron trunk constants have been moved to neutron_lib.\n\nChange-Id: I55eecfe1b2f27cccd30f02cab6778f54856a2cfa\nCloses-Bug: #1839574\n'}]",0,675572,79148e1dbf4e3249598f509bbedf038b691654d6,17,2,6,8213,,,0,"Uses neutron_lib trunk constants

The neutron trunk constants have been moved to neutron_lib.

Change-Id: I55eecfe1b2f27cccd30f02cab6778f54856a2cfa
Closes-Bug: #1839574
",git fetch https://review.opendev.org/openstack/networking-hyperv refs/changes/72/675572/5 && git format-patch -1 --stdout FETCH_HEAD,"['networking_hyperv/neutron/trunk_driver.py', 'networking_hyperv/tests/unit/neutron/test_trunk_driver.py']",2,465fcb4eae6623e85d979614fb897d5b2e7f5176,bug/1839574,"from neutron_lib.services.trunk import constants as t_const for status in [t_const.TRUNK_ACTIVE_STATUS, t_const.TRUNK_DEGRADED_STATUS]])","from neutron.services.trunk import constants as t_const for status in [t_const.ACTIVE_STATUS, t_const.DEGRADED_STATUS]])",6,5
openstack%2Fironic-inspector~stable%2Fqueens~I634e75ab04253edffb6f19394d3943e9ffe56d13,openstack/ironic-inspector,stable/queens,I634e75ab04253edffb6f19394d3943e9ffe56d13,CI: clean up the required projects list,MERGED,2019-08-01 08:56:20.000000000,2019-08-09 19:12:49.000000000,2019-08-09 19:12:49.000000000,"[{'_account_id': 10206}, {'_account_id': 10239}, {'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}]","[{'number': 1, 'created': '2019-08-01 08:56:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/5540756d0673dcdb90cd1e126573719a79e89b84', 'message': ""CI: clean up the required projects list for grenade\n\nWe don't need to install libraries from git in this job.\nironic-python-agent is also not needed since we download the ramdisk.\n\nChange-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13\n(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)\n""}, {'number': 2, 'created': '2019-08-07 08:51:58.000000000', 'files': ['playbooks/legacy/ironic-inspector-grenade-dsvm/run.yaml', 'zuul.d/legacy-ironic-inspector-jobs.yaml', 'playbooks/legacy/ironic-inspector-tempest-dsvm-discovery/run.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/cacc517ac97d2216bbf0a724904c992ec4781bd9', 'message': ""CI: clean up the required projects list\n\nWe don't need to install libraries from git in our jobs.\nironic-python-agent is also not needed since we download the ramdisk.\n\nChange-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13\n(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)\n""}]",0,673960,cacc517ac97d2216bbf0a724904c992ec4781bd9,17,6,2,10239,,,0,"CI: clean up the required projects list

We don't need to install libraries from git in our jobs.
ironic-python-agent is also not needed since we download the ramdisk.

Change-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13
(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)
",git fetch https://review.opendev.org/openstack/ironic-inspector refs/changes/60/673960/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/ironic-inspector-grenade-dsvm/run.yaml', 'zuul.d/legacy-ironic-inspector-jobs.yaml']",2,5540756d0673dcdb90cd1e126573719a79e89b84,gate-stable/queens,, - openstack/ironic-lib - openstack/ironic-python-agent - x/pyghmi - openstack/python-ironic-inspector-client - openstack/python-ironicclient,0,10
openstack%2Fpython-ironic-inspector-client~stable%2Fstein~I1d8cd5a98bdbb0be21481fac34e2305d561af9a4,openstack/python-ironic-inspector-client,stable/stein,I1d8cd5a98bdbb0be21481fac34e2305d561af9a4,Switch base job to ironic-base,MERGED,2019-08-09 11:40:50.000000000,2019-08-09 19:09:08.000000000,2019-08-09 19:09:08.000000000,"[{'_account_id': 10239}, {'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24828}]","[{'number': 1, 'created': '2019-08-09 11:40:50.000000000', 'files': ['zuul.d/python-ironic-inspector-client-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/ede9131d59443e872cba7a4ccb86740fbd4c3975', 'message': 'Switch base job to ironic-base\n\nSwitch inspector client base job to ironic-base, and remove\nsome overrides with the identical value to base job.\n\nChange-Id: I1d8cd5a98bdbb0be21481fac34e2305d561af9a4\n(cherry picked from commit 519190d59e1d6363c56f4c6fd52bc7c0d02d9e53)\n'}]",0,675591,ede9131d59443e872cba7a4ccb86740fbd4c3975,14,5,1,10239,,,0,"Switch base job to ironic-base

Switch inspector client base job to ironic-base, and remove
some overrides with the identical value to base job.

Change-Id: I1d8cd5a98bdbb0be21481fac34e2305d561af9a4
(cherry picked from commit 519190d59e1d6363c56f4c6fd52bc7c0d02d9e53)
",git fetch https://review.opendev.org/openstack/python-ironic-inspector-client refs/changes/91/675591/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/python-ironic-inspector-client-jobs.yaml'],1,ede9131d59443e872cba7a4ccb86740fbd4c3975,gate-stable/stein, parent: ironic-base," parent: devstack-tempest DEFAULT_INSTANCE_TYPE: baremetal INSTALL_TEMPEST: False # Don't install a tempest package globaly OVERRIDE_PUBLIC_BRIDGE_MTU: 1400 TEMPEST_PLUGINS: ""'{{ ansible_user_dir }}/src/opendev.org/openstack/ironic-tempest-plugin'"" VIRT_DRIVER: ironic",1,6
openstack%2Fpython-zaqarclient~master~I61e7731f8740cbda7e6a6f88ccdd904859dca2d0,openstack/python-zaqarclient,master,I61e7731f8740cbda7e6a6f88ccdd904859dca2d0,Mark functional tests as non-voting,ABANDONED,2019-08-09 16:25:56.000000000,2019-08-09 19:03:14.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-09 16:25:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/0ea12bc4646fd15edcd3f76fc5f7d36859b58463', 'message': 'Mark functional tests as non-voting\n\nThe python-zaqarclient has not been updated after\nhttps://review.opendev.org/#/c/628723/ has been merged,\nwhich breaks the functional tests. Mark them as nonvoting\nfor now.\n\nRelated-Bug: #1839614\n\nChange-Id: I61e7731f8740cbda7e6a6f88ccdd904859dca2d0\n'}, {'number': 2, 'created': '2019-08-09 18:00:35.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/python-zaqarclient/commit/11462218ed0ac4ee336c44dde379f705f4826d75', 'message': 'Mark functional tests as non-voting\n\nThe python-zaqarclient has not been updated after\nhttps://review.opendev.org/#/c/628723/ has been merged,\nwhich breaks the functional tests. Mark them as nonvoting\nfor now.\n\nRelated-Bug: #1839614\n\nChange-Id: I61e7731f8740cbda7e6a6f88ccdd904859dca2d0\n'}]",1,675663,11462218ed0ac4ee336c44dde379f705f4826d75,5,1,2,6593,,,0,"Mark functional tests as non-voting

The python-zaqarclient has not been updated after
https://review.opendev.org/#/c/628723/ has been merged,
which breaks the functional tests. Mark them as nonvoting
for now.

Related-Bug: #1839614

Change-Id: I61e7731f8740cbda7e6a6f88ccdd904859dca2d0
",git fetch https://review.opendev.org/openstack/python-zaqarclient refs/changes/63/675663/2 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,0ea12bc4646fd15edcd3f76fc5f7d36859b58463,, - python-zaqarclient-functional: voting: false, - python-zaqarclient-functional gate: jobs: - python-zaqarclient-functional,2,4
openstack%2Foctavia~master~Iaa9850d3fb8326bbf6f34fd25bc21cbd817bd73d,openstack/octavia,master,Iaa9850d3fb8326bbf6f34fd25bc21cbd817bd73d,Make centos jobs experimental for now,ABANDONED,2019-08-06 18:47:46.000000000,2019-08-09 18:50:29.000000000,,"[{'_account_id': 6469}, {'_account_id': 10273}, {'_account_id': 11628}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-06 18:47:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/7b2e2eb6408d786cc4f2dfff07fe0cc1778f0dae', 'message': 'Make centos jobs experimental for now\n\nThey cannot pass, waste resources, and one of them consistently times\nout, meaning that no run can finish in less than the 2.5h max time.\n\nChange-Id: Iaa9850d3fb8326bbf6f34fd25bc21cbd817bd73d\n'}, {'number': 2, 'created': '2019-08-09 18:47:43.000000000', 'files': ['zuul.d/projects.yaml'], 'web_link': 'https://opendev.org/openstack/octavia/commit/a6ee796f6cd693286f309e1e48ae2b12ca00bfbf', 'message': 'Make centos jobs experimental for now\n\nThey cannot pass, waste resources, and one of them consistently times\nout, meaning that no run can finish in less than the 2.5h max time.\n\nChange-Id: Iaa9850d3fb8326bbf6f34fd25bc21cbd817bd73d\n'}]",0,674911,a6ee796f6cd693286f309e1e48ae2b12ca00bfbf,10,4,2,10273,,,0,"Make centos jobs experimental for now

They cannot pass, waste resources, and one of them consistently times
out, meaning that no run can finish in less than the 2.5h max time.

Change-Id: Iaa9850d3fb8326bbf6f34fd25bc21cbd817bd73d
",git fetch https://review.opendev.org/openstack/octavia refs/changes/11/674911/2 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/projects.yaml'],1,7b2e2eb6408d786cc4f2dfff07fe0cc1778f0dae,, experimental: jobs: - octavia-v2-dsvm-py2-scenario-centos-7 - octavia-v2-act-stdby-iptables-dsvm-py2-scenario-centos-7, - octavia-v2-dsvm-py2-scenario-centos-7: voting: false - octavia-v2-act-stdby-iptables-dsvm-py2-scenario-centos-7: voting: false,4,4
openstack%2Fkolla-ansible~stable%2Fstein~Ia03e7979dd48bafb34c11edd08c2a2a87b949e0e,openstack/kolla-ansible,stable/stein,Ia03e7979dd48bafb34c11edd08c2a2a87b949e0e,Remove FWaaS v1 related options,MERGED,2019-07-01 09:51:20.000000000,2019-08-09 18:24:47.000000000,2019-08-09 18:24:47.000000000,"[{'_account_id': 6594}, {'_account_id': 7488}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-07-01 09:51:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f93d0251964dd9a766269858252fa2547eeef02d', 'message': 'Remove FWaaS v1 related options\n\nNeutron FWaaS v1 is deprecated and removed since stein cycle by [0]. So\nremove related options in kolla.\n\n[0] https://review.opendev.org/616410\n\nChange-Id: Ia03e7979dd48bafb34c11edd08c2a2a87b949e0e\n'}, {'number': 3, 'created': '2019-08-08 18:02:11.000000000', 'files': ['ansible/roles/neutron/defaults/main.yml', 'ansible/roles/neutron/templates/fwaas_driver.ini.j2', 'releasenotes/notes/remove-fwaas-v1-6d75b742ebbf0c56.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/28ce9dc727c1a269d1226277db1cc380d05a2d53', 'message': 'Remove FWaaS v1 related options\n\nNeutron FWaaS v1 is deprecated and removed since stein cycle by [0]. So\nremove related options in kolla.\n\n[0] https://review.opendev.org/616410\n\nChange-Id: Ia03e7979dd48bafb34c11edd08c2a2a87b949e0e\n(cherry picked from commit 1537f6ed6616a52e73520972370b0a47032a0836)\n'}]",0,668403,28ce9dc727c1a269d1226277db1cc380d05a2d53,16,7,2,7488,,,0,"Remove FWaaS v1 related options

Neutron FWaaS v1 is deprecated and removed since stein cycle by [0]. So
remove related options in kolla.

[0] https://review.opendev.org/616410

Change-Id: Ia03e7979dd48bafb34c11edd08c2a2a87b949e0e
(cherry picked from commit 1537f6ed6616a52e73520972370b0a47032a0836)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/03/668403/3 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/neutron/defaults/main.yml', 'ansible/roles/neutron/templates/fwaas_driver.ini.j2', 'releasenotes/notes/remove-fwaas-v1-6d75b742ebbf0c56.yaml']",3,f93d0251964dd9a766269858252fa2547eeef02d,,--- deprecations: - | Neutron FWaaS v1 is deprecated and removed since stein cycle by [0]. So remove related options in kolla. [0] https://review.opendev.org/616410 ,,10,10
openstack%2Ftripleo-quickstart-extras~master~I9e9472b2a2de8f92dab50f4fe2ab6df1cd3d87d9,openstack/tripleo-quickstart-extras,master,I9e9472b2a2de8f92dab50f4fe2ab6df1cd3d87d9,Remove VolumesSnapshotTestJSON from stein skip list,MERGED,2019-08-08 06:45:03.000000000,2019-08-09 18:20:12.000000000,2019-08-09 18:20:11.000000000,"[{'_account_id': 8175}, {'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10022}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 06:45:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/f142965dcd5a460c7a73187dfb0e9b4e57d3da48', 'message': 'Remve VolumesSnapshotTestJSON from stein skip list\n\nIn https://logs.rdoproject.org/openstack-periodic-latest-released/\nopendev.org/openstack/tripleo-ci/master/\nperiodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-stein/83bbe80/logs/tempest.html.gz\n\ntempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON\nis passing in fs021.\n\nCloses-Bug: #1753211\n\nChange-Id: I9e9472b2a2de8f92dab50f4fe2ab6df1cd3d87d9\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 2, 'created': '2019-08-08 06:46:03.000000000', 'files': ['roles/validate-tempest/vars/tempest_skip_stein.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/0e51e3492c6f46566d7ec6f6c1c9bef32f43f69b', 'message': 'Remove VolumesSnapshotTestJSON from stein skip list\n\nIn https://logs.rdoproject.org/openstack-periodic-latest-released/\nopendev.org/openstack/tripleo-ci/master/\nperiodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-stein/83bbe80/logs/tempest.html.gz\n\ntempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON\nis passing in fs021.\n\nCloses-Bug: #1753211\n\nChange-Id: I9e9472b2a2de8f92dab50f4fe2ab6df1cd3d87d9\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}]",0,675253,0e51e3492c6f46566d7ec6f6c1c9bef32f43f69b,27,11,2,12393,,,0,"Remove VolumesSnapshotTestJSON from stein skip list

In https://logs.rdoproject.org/openstack-periodic-latest-released/
opendev.org/openstack/tripleo-ci/master/
periodic-tripleo-ci-centos-7-ovb-1ctlr_2comp-featureset021-stein/83bbe80/logs/tempest.html.gz

tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON
is passing in fs021.

Closes-Bug: #1753211

Change-Id: I9e9472b2a2de8f92dab50f4fe2ab6df1cd3d87d9
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/53/675253/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/validate-tempest/vars/tempest_skip_stein.yml'],1,f142965dcd5a460c7a73187dfb0e9b4e57d3da48,stein_skip,, - test: 'tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON' reason: 'network resource conflict' lp: 'https://bugs.launchpad.net/tripleo/+bug/1753211',0,3
openstack%2Fnova~stable%2Fqueens~I347096a527c257075cefe7b81210622f6cd87daf,openstack/nova,stable/queens,I347096a527c257075cefe7b81210622f6cd87daf,Don't generate service UUID for deleted services,MERGED,2019-07-31 14:04:14.000000000,2019-08-09 17:49:03.000000000,2019-08-09 17:49:02.000000000,"[{'_account_id': 4393}, {'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-31 14:04:14.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1778305.py', 'nova/objects/service.py', 'nova/tests/functional/regressions/test_bug_1764556.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/97e78f8cc194c60d06a37b11c9c09405bf87b295', 'message': ""Don't generate service UUID for deleted services\n\nIn Pike, we added a UUID field to services and during an upgrade from\nOcata => Pike, when instances are accessed joined with their associated\nservices, we generate a UUID for the services on-the-fly.\n\nThis causes a problem in the scenario where an operator upgrades their\ncluster and has old, deleted services with hostnames matching existing\nservices associated with instances. When we go to generate the service\nUUID for the old, deleted service, we hit a ServiceTooOld exception.\n\nThis addresses the problem by not bothering to generate a UUID for a\ndeleted service. One alternative would be to exclude deleted services\nwhen we join the 'instances' and 'services' tables, but I'm not sure\nwhether that approach might cause unintended effects where service\ninformation that used to be viewable for instances becomes hidden.\n\nCloses-Bug: #1778305\nCloses-Bug: #1764556\n\nChange-Id: I347096a527c257075cefe7b81210622f6cd87daf\n(cherry picked from commit 16e163053ca39886f11fdb8a3af10a28619fc105)\n(cherry picked from commit 8601ca75b1515e7434f1d3c563a0e65458c8c86a)\n(cherry picked from commit d9094e54fbb6a25c8cf189c4fd9fbb8d66cec145)\n""}]",0,673827,97e78f8cc194c60d06a37b11c9c09405bf87b295,13,7,1,6873,,,0,"Don't generate service UUID for deleted services

In Pike, we added a UUID field to services and during an upgrade from
Ocata => Pike, when instances are accessed joined with their associated
services, we generate a UUID for the services on-the-fly.

This causes a problem in the scenario where an operator upgrades their
cluster and has old, deleted services with hostnames matching existing
services associated with instances. When we go to generate the service
UUID for the old, deleted service, we hit a ServiceTooOld exception.

This addresses the problem by not bothering to generate a UUID for a
deleted service. One alternative would be to exclude deleted services
when we join the 'instances' and 'services' tables, but I'm not sure
whether that approach might cause unintended effects where service
information that used to be viewable for instances becomes hidden.

Closes-Bug: #1778305
Closes-Bug: #1764556

Change-Id: I347096a527c257075cefe7b81210622f6cd87daf
(cherry picked from commit 16e163053ca39886f11fdb8a3af10a28619fc105)
(cherry picked from commit 8601ca75b1515e7434f1d3c563a0e65458c8c86a)
(cherry picked from commit d9094e54fbb6a25c8cf189c4fd9fbb8d66cec145)
",git fetch https://review.opendev.org/openstack/nova refs/changes/27/673827/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/regressions/test_bug_1778305.py', 'nova/objects/service.py', 'nova/tests/functional/regressions/test_bug_1764556.py']",3,97e78f8cc194c60d06a37b11c9c09405bf87b295,bug/1764556," servers = self.admin_api.get_servers(detail=True) for server in servers: self.assertEqual('UP', server['host_status'])","import six from nova.tests.functional.api import client as api_client # FIXME(mriedem): This is bug 1764556 where the join on the services # table also pulls the deleted service that doesn't have a uuid and # attempts to migrate that service to have a uuid, which fails because # it's not using a read_deleted='yes' context. ex = self.assertRaises(api_client.OpenStackApiException, self.admin_api.get_servers, detail=True) self.assertIn('ServiceNotFound', six.text_type(ex))",13,26
openstack%2Fironic-lib~stable%2Frocky~Ic3963e5c4a1886aeabed6c5994599e72040a251e,openstack/ironic-lib,stable/rocky,Ic3963e5c4a1886aeabed6c5994599e72040a251e,Use last digit to determine paritition naming scheme,MERGED,2019-07-31 13:57:45.000000000,2019-08-09 17:48:10.000000000,2019-08-09 17:48:09.000000000,"[{'_account_id': 10239}, {'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2019-07-31 13:57:45.000000000', 'files': ['ironic_lib/tests/test_disk_utils.py', 'releasenotes/notes/fix-metadisk-partitioning-32d3fca274290dd6.yaml', 'ironic_lib/disk_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic-lib/commit/3ca0cf67c141f5db1b7333b2d0ae07de04261ada', 'message': 'Use last digit to determine paritition naming scheme\n\nThis matches the behaviour of the linux kernel, see:\n\nhttps://github.com/torvalds/linux/blob/d3511f53bb2475f2a4e8460bee5a1ae6dea2a433/block/partition-generic.c#L39\n\nChange-Id: Ic3963e5c4a1886aeabed6c5994599e72040a251e\nStory: 2006154\nTask: 35656\n(cherry picked from commit cd51319528bb2333139c7cefb68e7e6e27df740a)\n'}]",0,673822,3ca0cf67c141f5db1b7333b2d0ae07de04261ada,7,4,1,10239,,,0,"Use last digit to determine paritition naming scheme

This matches the behaviour of the linux kernel, see:

https://github.com/torvalds/linux/blob/d3511f53bb2475f2a4e8460bee5a1ae6dea2a433/block/partition-generic.c#L39

Change-Id: Ic3963e5c4a1886aeabed6c5994599e72040a251e
Story: 2006154
Task: 35656
(cherry picked from commit cd51319528bb2333139c7cefb68e7e6e27df740a)
",git fetch https://review.opendev.org/openstack/ironic-lib refs/changes/22/673822/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_lib/tests/test_disk_utils.py', 'releasenotes/notes/fix-metadisk-partitioning-32d3fca274290dd6.yaml', 'ironic_lib/disk_utils.py']",3,3ca0cf67c141f5db1b7333b2d0ae07de04261ada,p-scheme-stable/rocky,"def is_last_char_digit(dev): """"""check whether device name ends with a digit"""""" if len(dev) >= 1: return dev[-1].isdigit() return False elif is_last_char_digit(dev): elif is_last_char_digit(device):","def is_nvme_device(dev): """"""check whether the device path belongs to an NVMe drive. """""" return ""/dev/nvme"" in dev elif is_nvme_device(dev): elif is_nvme_device(device):",14,6
openstack%2Foctavia-tempest-plugin~master~I60c23e3d4026b431d9871b86c7abe035f51f5a4b,openstack/octavia-tempest-plugin,master,I60c23e3d4026b431d9871b86c7abe035f51f5a4b,DNM: Testing the tempest jobs,ABANDONED,2019-07-31 20:36:42.000000000,2019-08-09 17:41:10.000000000,,"[{'_account_id': 11628}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-31 20:36:42.000000000', 'files': ['octavia_tempest_plugin/config.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/3028bdebbeeca32506909750b502a269acc82895', 'message': 'DNM: Testing the tempest jobs\n\nChange-Id: I60c23e3d4026b431d9871b86c7abe035f51f5a4b\n'}]",0,673909,3028bdebbeeca32506909750b502a269acc82895,4,2,1,11628,,,0,"DNM: Testing the tempest jobs

Change-Id: I60c23e3d4026b431d9871b86c7abe035f51f5a4b
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/09/673909/1 && git format-patch -1 --stdout FETCH_HEAD,['octavia_tempest_plugin/config.py'],1,3028bdebbeeca32506909750b502a269acc82895,," help=""Whetheror not the load-balancer service is expected """," help=""Whether or not the load-balancer service is expected """,1,1
openstack%2Ftripleo-heat-templates~stable%2Fqueens~I6f71ce62b1c5f3de175d7a50ee7229d3047a379a,openstack/tripleo-heat-templates,stable/queens,I6f71ce62b1c5f3de175d7a50ee7229d3047a379a,neutron-api: remove /usr/share/neutron mount,MERGED,2019-08-08 14:42:09.000000000,2019-08-09 17:32:47.000000000,2019-08-09 17:32:47.000000000,"[{'_account_id': 3153}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 14:42:09.000000000', 'files': ['docker/services/neutron-api.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d1b90da077bc0bd6e1d4ebde0a817d479cebfd23', 'message': ""neutron-api: remove /usr/share/neutron mount\n\nWe don't need to mount /usr/share/neutron, the directory is provided in\nopenstack-neutron rpm, so we don't need to manage this directory. It\nshould be in all neutron containers, including the neutron_db_sync.\n\nChange-Id: I6f71ce62b1c5f3de175d7a50ee7229d3047a379a\n(cherry picked from commit 191841339bf67b73172250bfcf7d4eed4ffa809b)\n""}]",0,675356,d1b90da077bc0bd6e1d4ebde0a817d479cebfd23,9,4,1,14250,,,0,"neutron-api: remove /usr/share/neutron mount

We don't need to mount /usr/share/neutron, the directory is provided in
openstack-neutron rpm, so we don't need to manage this directory. It
should be in all neutron containers, including the neutron_db_sync.

Change-Id: I6f71ce62b1c5f3de175d7a50ee7229d3047a379a
(cherry picked from commit 191841339bf67b73172250bfcf7d4eed4ffa809b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/56/675356/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/services/neutron-api.yaml'],1,d1b90da077bc0bd6e1d4ebde0a817d479cebfd23,bug/1830734-stable/queens,, - /var/lib/config-data/neutron/usr/share/neutron:/usr/share/neutron:ro,0,1
openstack%2Ftripleo-heat-templates~stable%2Frocky~I19d660168c98887a5e352b3413235888c800760d,openstack/tripleo-heat-templates,stable/rocky,I19d660168c98887a5e352b3413235888c800760d,Create /run/netns if does not exist,MERGED,2019-07-31 12:00:15.000000000,2019-08-09 17:32:45.000000000,2019-08-09 17:32:45.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 9914}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-31 12:00:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/fedc1f4004e19e2935cec4147fdf2535c629ce1c', 'message': ""Create /run/netns if does not exist\n\nUnlike docker with podman you can't mount a host directory\nthat does not exist. We did some work as part of bug 1799638\ntake care of this for reboots. However, we need it to be created\nfor fresh installations, as nodes are not necessarily rebooted\nafter installing paunch. The real issue without reboots did not\nsurface before the next patch in this series, as we were using\ncni0 bridge network for some containers and that resulted in\nnamespace being created and the directory existing for\nneutron_dhcp and neutron_l3 containers in step 4 to mount them.\n\nThis patch creates/removes a temp namespace in host_prep_tasks\nto ensure that the directory exists.\n\nChange-Id: I19d660168c98887a5e352b3413235888c800760d\nRelated-Bug: #1799638\n(cherry picked from commit 9b284e74cbdcf43253edaf424534b71a483fdb69)\n""}, {'number': 2, 'created': '2019-07-31 12:08:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6c76598aae71e472509ab4135ae3350ab3a9d0a9', 'message': ""Create /run/netns if does not exist\n\nUnlike docker with podman you can't mount a host directory\nthat does not exist. We did some work as part of bug 1799638\ntake care of this for reboots. However, we need it to be created\nfor fresh installations, as nodes are not necessarily rebooted\nafter installing paunch. The real issue without reboots did not\nsurface before the next patch in this series, as we were using\ncni0 bridge network for some containers and that resulted in\nnamespace being created and the directory existing for\nneutron_dhcp and neutron_l3 containers in step 4 to mount them.\n\nThis patch creates/removes a temp namespace in host_prep_tasks\nto ensure that the directory exists.\n\nChange-Id: I19d660168c98887a5e352b3413235888c800760d\nRelated-Bug: #1799638\n(cherry picked from commit 9b284e74cbdcf43253edaf424534b71a483fdb69)\n""}, {'number': 3, 'created': '2019-08-08 08:15:38.000000000', 'files': ['docker/services/neutron-l3.yaml', 'docker/services/neutron-dhcp.yaml', 'docker/services/ovn-metadata.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/12ef8149d58d1fcb4426b65fdf09c283f3345e5c', 'message': ""Create /run/netns if does not exist\n\nUnlike docker with podman you can't mount a host directory\nthat does not exist. We did some work as part of bug 1799638\ntake care of this for reboots. However, we need it to be created\nfor fresh installations, as nodes are not necessarily rebooted\nafter installing paunch. The real issue without reboots did not\nsurface before the next patch in this series, as we were using\ncni0 bridge network for some containers and that resulted in\nnamespace being created and the directory existing for\nneutron_dhcp and neutron_l3 containers in step 4 to mount them.\n\nThis patch creates/removes a temp namespace in host_prep_tasks\nto ensure that the directory exists.\n\nChange-Id: I19d660168c98887a5e352b3413235888c800760d\nRelated-Bug: #1799638\n(cherry picked from commit 9b284e74cbdcf43253edaf424534b71a483fdb69)\n""}]",0,673797,12ef8149d58d1fcb4426b65fdf09c283f3345e5c,17,6,3,14250,,,0,"Create /run/netns if does not exist

Unlike docker with podman you can't mount a host directory
that does not exist. We did some work as part of bug 1799638
take care of this for reboots. However, we need it to be created
for fresh installations, as nodes are not necessarily rebooted
after installing paunch. The real issue without reboots did not
surface before the next patch in this series, as we were using
cni0 bridge network for some containers and that resulted in
namespace being created and the directory existing for
neutron_dhcp and neutron_l3 containers in step 4 to mount them.

This patch creates/removes a temp namespace in host_prep_tasks
to ensure that the directory exists.

Change-Id: I19d660168c98887a5e352b3413235888c800760d
Related-Bug: #1799638
(cherry picked from commit 9b284e74cbdcf43253edaf424534b71a483fdb69)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/97/673797/2 && git format-patch -1 --stdout FETCH_HEAD,"['docker/services/neutron-l3.yaml', 'docker/services/neutron-dhcp.yaml', 'docker/services/ovn-metadata.yaml']",3,fedc1f4004e19e2935cec4147fdf2535c629ce1c,bug/1830734, - - name: create /run/netns with temp namespace command: ip netns add ns_temp register: ipnetns_add_result ignore_errors: True - - name: remove temp namespace command: ip netns delete ns_temp ignore_errors: True when: ipnetns_add_result.rc == 0,,24,0
openstack%2Ftripleo-heat-templates~stable%2Frocky~I3e37828907bbdbfbcd178fd47c5335e5f6ca04e3,openstack/tripleo-heat-templates,stable/rocky,I3e37828907bbdbfbcd178fd47c5335e5f6ca04e3,"Revert ""Revert ""Create missing directories before mounting them""""",MERGED,2019-07-31 12:08:24.000000000,2019-08-09 17:32:43.000000000,2019-08-09 17:32:43.000000000,"[{'_account_id': 3153}, {'_account_id': 9914}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-31 12:08:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bdaee2f11eb011c65a7bbf6f0d06572e700fdf58', 'message': 'Revert ""Revert ""Create missing directories before mounting them""""\n\nThis change is actually needed to support a newer version of paunch,\nwhich streamlines the behavior between docker and podman.\n\nThis reverts commit d95b5b9a71955137cc9590ba4b6d1bafe3b1b080.\n\nChange-Id: I3e37828907bbdbfbcd178fd47c5335e5f6ca04e3\n'}, {'number': 2, 'created': '2019-08-08 08:15:38.000000000', 'files': ['docker/services/swift-storage.yaml', 'docker/services/mistral-executor.yaml', 'docker/services/glance-api.yaml', 'docker/services/iscsid.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/43bcbf571a877f7e368ec7245dc53b9d1efdafe0', 'message': 'Revert ""Revert ""Create missing directories before mounting them""""\n\nThis change is actually needed to support a newer version of paunch,\nwhich streamlines the behavior between docker and podman.\n\nThis reverts commit d95b5b9a71955137cc9590ba4b6d1bafe3b1b080.\n\nChange-Id: I3e37828907bbdbfbcd178fd47c5335e5f6ca04e3\n'}]",0,673798,43bcbf571a877f7e368ec7245dc53b9d1efdafe0,19,5,2,14250,,,0,"Revert ""Revert ""Create missing directories before mounting them""""

This change is actually needed to support a newer version of paunch,
which streamlines the behavior between docker and podman.

This reverts commit d95b5b9a71955137cc9590ba4b6d1bafe3b1b080.

Change-Id: I3e37828907bbdbfbcd178fd47c5335e5f6ca04e3
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/98/673798/2 && git format-patch -1 --stdout FETCH_HEAD,"['docker/services/swift-storage.yaml', 'docker/services/mistral-executor.yaml', 'docker/services/glance-api.yaml', 'docker/services/iscsid.yaml']",4,bdaee2f11eb011c65a7bbf6f0d06572e700fdf58,bug/1830734, - name: ensure /etc/iscsi exists file: path: /etc/iscsi state: directory,,14,1
openstack%2Ftripleo-heat-templates~stable%2Frocky~I6f8dc49ff556215a25e8bb23ae8da63ce607d70c,openstack/tripleo-heat-templates,stable/rocky,I6f8dc49ff556215a25e8bb23ae8da63ce607d70c,Ensure directories managed by libvirt-daemon exist,MERGED,2019-08-08 07:49:36.000000000,2019-08-09 17:32:41.000000000,2019-08-09 17:32:41.000000000,"[{'_account_id': 3153}, {'_account_id': 9914}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 27427}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-08 07:49:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1da18608fee660e3e5a26ca6c6eaa170e5d2e090', 'message': 'Ensure directories managed by libvirt-daemon exist\n\nThe /var/run/libvirt directory is managed by libvirt-daemon. As\nthis service is now running within a container, the directory\nmight not exists on a fresh install.\nThis patch also takes care of the fact the /var/run directory is\ncleaned upon reboot, and uses systemd-tmpfiles in order to ensure\nthe directory creation during the boot process.\n\nWe also take care of missing log directories, also managed by the\nlibvirt-daemon package.\n\nChange-Id: I6f8dc49ff556215a25e8bb23ae8da63ce607d70c\nCloses-Bug: #1801977\n(cherry picked from commit f65664ff56de26b6e98ffcf09001427e5a8bdaf3)\n'}, {'number': 2, 'created': '2019-08-08 08:15:38.000000000', 'files': ['docker/services/nova-libvirt.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/2beb6e7d5b94527dc4b3ce8f93f4e9d590707bfc', 'message': 'Ensure directories managed by libvirt-daemon exist\n\nThe /var/run/libvirt directory is managed by libvirt-daemon. As\nthis service is now running within a container, the directory\nmight not exists on a fresh install.\nThis patch also takes care of the fact the /var/run directory is\ncleaned upon reboot, and uses systemd-tmpfiles in order to ensure\nthe directory creation during the boot process.\n\nWe also take care of missing log directories, also managed by the\nlibvirt-daemon package.\n\nChange-Id: I6f8dc49ff556215a25e8bb23ae8da63ce607d70c\nCloses-Bug: #1801977\n(cherry picked from commit f65664ff56de26b6e98ffcf09001427e5a8bdaf3)\n'}]",0,675262,2beb6e7d5b94527dc4b3ce8f93f4e9d590707bfc,13,6,2,14250,,,0,"Ensure directories managed by libvirt-daemon exist

The /var/run/libvirt directory is managed by libvirt-daemon. As
this service is now running within a container, the directory
might not exists on a fresh install.
This patch also takes care of the fact the /var/run directory is
cleaned upon reboot, and uses systemd-tmpfiles in order to ensure
the directory creation during the boot process.

We also take care of missing log directories, also managed by the
libvirt-daemon package.

Change-Id: I6f8dc49ff556215a25e8bb23ae8da63ce607d70c
Closes-Bug: #1801977
(cherry picked from commit f65664ff56de26b6e98ffcf09001427e5a8bdaf3)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/62/675262/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/services/nova-libvirt.yaml'],1,1da18608fee660e3e5a26ca6c6eaa170e5d2e090,bug/1830734, - /var/run/libvirt:/var/run/libvirt:shared - /var/run/libvirt - /var/log/libvirt - /var/log/libvirt/qemu - name: ensure /var/run/libvirt is present upon reboot copy: dest: /etc/tmpfiles.d/var-run-libvirt.conf content: | d /var/run/libvirt 0755 root root - -, - /var/run/libvirt:/var/run/libvirt,9,1
openstack%2Fnova~stable%2Fqueens~I1c62a0a5be6c44176b5714af00cc181eb5437585,openstack/nova,stable/queens,I1c62a0a5be6c44176b5714af00cc181eb5437585,Add functional regression test for bug 1778305,MERGED,2019-07-31 14:01:22.000000000,2019-08-09 17:32:36.000000000,2019-08-09 17:32:36.000000000,"[{'_account_id': 4393}, {'_account_id': 4690}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-31 14:01:22.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1778305.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/57538f0d8d11189b348c5820e88169862e25800a', 'message': 'Add functional regression test for bug 1778305\n\nThis tests the scenario where an operator has upgraded from Ocata =>\nPike but has old, deleted services that share the same hostname with\ncurrently existing, running services. The current behavior is that\nServiceTooOld is raised when we try to generate a UUID for the old,\ndeleted service while querying for a list of instances. After the bug\nis fixed, we should be able to successfully query for a list of\ninstances.\n\nRelated-Bug: #1778305\n\nChange-Id: I1c62a0a5be6c44176b5714af00cc181eb5437585\n(cherry picked from commit 1d9aaef3d1c880b02d6b7c186e8de79cbaac9ae0)\n(cherry picked from commit 06ae1ff21495a51d24376c457f51162e17ae3235)\n(cherry picked from commit 36246000949f29036ed5b9eed563975d063b29c9)\n'}]",0,673825,57538f0d8d11189b348c5820e88169862e25800a,7,4,1,6873,,,0,"Add functional regression test for bug 1778305

This tests the scenario where an operator has upgraded from Ocata =>
Pike but has old, deleted services that share the same hostname with
currently existing, running services. The current behavior is that
ServiceTooOld is raised when we try to generate a UUID for the old,
deleted service while querying for a list of instances. After the bug
is fixed, we should be able to successfully query for a list of
instances.

Related-Bug: #1778305

Change-Id: I1c62a0a5be6c44176b5714af00cc181eb5437585
(cherry picked from commit 1d9aaef3d1c880b02d6b7c186e8de79cbaac9ae0)
(cherry picked from commit 06ae1ff21495a51d24376c457f51162e17ae3235)
(cherry picked from commit 36246000949f29036ed5b9eed563975d063b29c9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/25/673825/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1778305.py'],1,57538f0d8d11189b348c5820e88169862e25800a,bug/1764556,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import nova.context from nova.db import api as db from nova import objects from nova import test class InstanceListWithOldDeletedServiceTestCase(test.TestCase): def setUp(self): super(InstanceListWithOldDeletedServiceTestCase, self).setUp() self.context = nova.context.RequestContext('fake-user', 'fake-project') def test_instance_list_old_deleted_service_with_no_uuid(self): # Create a nova-compute service record with a host that will match the # instance's host, with no uuid. We can't do this through the # Service object because it will automatically generate a uuid. # Use service version 9, which is too old compared to the minimum # version in the rest of the deployment. service = db.service_create(self.context, {'host': 'fake-host', 'binary': 'nova-compute', 'version': 9}) self.assertIsNone(service['uuid']) # Now delete it. db.service_destroy(self.context, service['id']) # Create a new service with the same host name that has a UUID and a # current version. new_service = objects.Service(context=self.context, host='fake-host', binary='nova-compute') new_service.create() # Create an instance whose host will match both services, including the # deleted one. inst = objects.Instance(context=self.context, project_id=self.context.project_id, host='fake-host') inst.create() # TODO(melwitt): Remove this assert when the bug is fixed. self.assertRaises(nova.exception.ServiceTooOld, objects.InstanceList.get_by_filters, self.context, {}, expected_attrs=['services']) # TODO(melwitt): Uncomment these asserts when the bug is fixed. # insts = objects.InstanceList.get_by_filters( # self.context, {}, expected_attrs=['services']) # self.assertEqual(1, len(insts)) # self.assertEqual(2, len(insts[0].services)) # Deleted service should not have a UUID # for service in insts[0].services: # if service.deleted: # self.assertNotIn('uuid', service) # else: # self.assertIsNotNone(service.uuid) ",,67,0
openstack%2Fnova~stable%2Fqueens~I4d60da26fcf0a77628d1fdf4e818884614fa4f02,openstack/nova,stable/queens,I4d60da26fcf0a77628d1fdf4e818884614fa4f02,Add functional recreate test for bug 1764556,MERGED,2019-07-31 14:00:38.000000000,2019-08-09 17:32:30.000000000,2019-08-09 17:32:30.000000000,"[{'_account_id': 4393}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-31 14:00:38.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1764556.py', 'nova/db/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/de035bbfccbfd5a3e7516434171e89e9df7d08fa', 'message': 'Add functional recreate test for bug 1764556\n\nThis attempts to recreate the following scenario:\n\n1) boot instance on ocata host where the compute service\n   does not have a uuid\n2) migrate instance\n3) delete the ocata service (thus deleting the compute node)\n4) start compute service with the same name\n5) migrate instance to newly-created compute node\n6) upgrade to pike where services.uuid data migration happens\n7) list instances as admin to join on the services table\n\nThe failure occurs when listing instances because the deleted\nservice with the same name as the compute host that the instance\nis running on gets pulled from the DB and the Service object\nattempts to set a uuid on it, which fails since it\'s not using\na read_deleted=""yes"" context.\n\nWhile working on this, the service_get_all_by_binary DB API\nmethod had to be fixed to not hard-code read_deleted=""no"" since\nthe test needs to be able to read deleted services, which it can\ncontrol via its own context object (note that\nRequestContext.read_deleted already defaults to ""no"" so the\nhard-coding in the DB API is unnecessarily restrictive).\n\nChange-Id: I4d60da26fcf0a77628d1fdf4e818884614fa4f02\nRelated-Bug: #1764556\n(cherry picked from commit 81f05f53d357a546c7f9a53cae6ef45b92e28bc1)\n(cherry picked from commit 44709cfb5cfa6a8a384eb391ad520de55b2fa247)\n(cherry picked from commit eadd78efe39e1958d14319cfcdbda15862485845)\n'}]",0,673824,de035bbfccbfd5a3e7516434171e89e9df7d08fa,9,5,1,6873,,,0,"Add functional recreate test for bug 1764556

This attempts to recreate the following scenario:

1) boot instance on ocata host where the compute service
   does not have a uuid
2) migrate instance
3) delete the ocata service (thus deleting the compute node)
4) start compute service with the same name
5) migrate instance to newly-created compute node
6) upgrade to pike where services.uuid data migration happens
7) list instances as admin to join on the services table

The failure occurs when listing instances because the deleted
service with the same name as the compute host that the instance
is running on gets pulled from the DB and the Service object
attempts to set a uuid on it, which fails since it's not using
a read_deleted=""yes"" context.

While working on this, the service_get_all_by_binary DB API
method had to be fixed to not hard-code read_deleted=""no"" since
the test needs to be able to read deleted services, which it can
control via its own context object (note that
RequestContext.read_deleted already defaults to ""no"" so the
hard-coding in the DB API is unnecessarily restrictive).

Change-Id: I4d60da26fcf0a77628d1fdf4e818884614fa4f02
Related-Bug: #1764556
(cherry picked from commit 81f05f53d357a546c7f9a53cae6ef45b92e28bc1)
(cherry picked from commit 44709cfb5cfa6a8a384eb391ad520de55b2fa247)
(cherry picked from commit eadd78efe39e1958d14319cfcdbda15862485845)
",git fetch https://review.opendev.org/openstack/nova refs/changes/24/673824/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/regressions/test_bug_1764556.py', 'nova/db/sqlalchemy/api.py']",2,de035bbfccbfd5a3e7516434171e89e9df7d08fa,bug/1764556," query = model_query(context, models.Service).filter_by(binary=binary)"," query = model_query(context, models.Service, read_deleted=""no"").\ filter_by(binary=binary)",163,2
openstack%2Fpython-openstackclient~master~I6c52485341214ba401064c0f2d1e2b95fdc225c0,openstack/python-openstackclient,master,I6c52485341214ba401064c0f2d1e2b95fdc225c0,Make configuration show not require auth,MERGED,2019-07-26 21:43:05.000000000,2019-08-09 17:29:40.000000000,2019-08-09 17:29:40.000000000,"[{'_account_id': 970}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-26 21:43:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/4b3559db1aaffed067bb5c545c0db541fb3f9716', 'message': ""Make configuration show not require auth\n\nThe configuration show should not require auth to just display the\nOSC config object.  Changes to make it not require auth have\nknock-on effects of needing to change a bunch of tests that use it\nassuming it _does_ require auth so change those to use 'extension list'\ninstead.\n\nChange-Id: I6c52485341214ba401064c0f2d1e2b95fdc225c0\nSigned-off-by: Dean Troyer <dtroyer@gmail.com>\n""}, {'number': 2, 'created': '2019-07-27 20:42:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/45cc113c539d9ae7ba20fdb53ea7293baaf26340', 'message': ""Make configuration show not require auth\n\nThe configuration show should not require auth to just display the\nOSC config object.  Changes to make it not require auth have\nknock-on effects of needing to change a bunch of tests that use it\nassuming it _does_ require auth so change those to use 'extension list'\ninstead.\n\nThis sets up further testing of the command line options for changes\nin behaviour when we switch to straight SDK usage for configuration.\n\nChange-Id: I6c52485341214ba401064c0f2d1e2b95fdc225c0\nSigned-off-by: Dean Troyer <dtroyer@gmail.com>\n""}, {'number': 3, 'created': '2019-08-01 19:53:42.000000000', 'files': ['openstackclient/tests/functional/base.py', 'openstackclient/tests/unit/integ/cli/test_project.py', 'openstackclient/tests/unit/integ/cli/test_shell.py', 'releasenotes/notes/config-show-00512dc60882e5c0.yaml', 'openstackclient/tests/functional/common/test_configuration.py', 'openstackclient/common/configuration.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/865e182970c9ce42d5be07cd3b81fb5dd1a3e656', 'message': ""Make configuration show not require auth\n\nThe configuration show should not require auth to just display the\nOSC config object.  Changes to make it not require auth have\nknock-on effects of needing to change a bunch of tests that use it\nassuming it _does_ require auth so change those to use 'extension list'\ninstead.\n\nThis sets up further testing of the command line options for changes\nin behaviour when we switch to straight SDK usage for configuration.\n\nChange-Id: I6c52485341214ba401064c0f2d1e2b95fdc225c0\nSigned-off-by: Dean Troyer <dtroyer@gmail.com>\n""}]",0,673110,865e182970c9ce42d5be07cd3b81fb5dd1a3e656,10,2,3,970,,,0,"Make configuration show not require auth

The configuration show should not require auth to just display the
OSC config object.  Changes to make it not require auth have
knock-on effects of needing to change a bunch of tests that use it
assuming it _does_ require auth so change those to use 'extension list'
instead.

This sets up further testing of the command line options for changes
in behaviour when we switch to straight SDK usage for configuration.

Change-Id: I6c52485341214ba401064c0f2d1e2b95fdc225c0
Signed-off-by: Dean Troyer <dtroyer@gmail.com>
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/10/673110/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/functional/base.py', 'openstackclient/tests/unit/integ/cli/test_project.py', 'openstackclient/tests/unit/integ/cli/test_shell.py', 'openstackclient/tests/functional/common/test_configuration.py', 'openstackclient/common/configuration.py']",5,4b3559db1aaffed067bb5c545c0db541fb3f9716,config-show-no-auth," auth_required = False # Assume a default secret list in case we do not have an auth_plugin secret_opts = [""password"", ""token""] if getattr(self.app.client_manager, ""auth_plugin_name"", None): auth_plg_name = self.app.client_manager.auth_plugin_name secret_opts = [ o.dest for o in base.get_plugin_options(auth_plg_name) if o.secret ] value = REDACTED", auth_plg_name = self.app.client_manager.auth_plugin_name secret_opts = [o.dest for o in base.get_plugin_options(auth_plg_name) if o.secret] value = REDACTED,124,34
openstack%2Fswift~master~Ifab726f63739f62aeef495c970939410341694d1,openstack/swift,master,Ifab726f63739f62aeef495c970939410341694d1,slo: Add X-Manifest-Etag to responses,MERGED,2019-08-08 21:20:32.000000000,2019-08-09 17:23:03.000000000,2019-08-09 17:21:47.000000000,"[{'_account_id': 1179}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 21:20:32.000000000', 'files': ['swift/common/middleware/slo.py', 'test/unit/common/middleware/test_slo.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/3ee6de408e8507c8501a9abb17fbf9e08fd65c17', 'message': ""slo: Add X-Manifest-Etag to responses\n\nThis matches the ETag of the underlying swift object, as opposed to the\nMD5-of-MD5s that is the large object's ETag.\n\nChange-Id: Ifab726f63739f62aeef495c970939410341694d1\n""}]",3,675469,3ee6de408e8507c8501a9abb17fbf9e08fd65c17,9,3,1,15343,,,0,"slo: Add X-Manifest-Etag to responses

This matches the ETag of the underlying swift object, as opposed to the
MD5-of-MD5s that is the large object's ETag.

Change-Id: Ifab726f63739f62aeef495c970939410341694d1
",git fetch https://review.opendev.org/openstack/swift refs/changes/69/675469/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/common/middleware/slo.py', 'test/unit/common/middleware/test_slo.py']",2,3ee6de408e8507c8501a9abb17fbf9e08fd65c17,," if not isinstance(s, bytes): s = s.encode('ascii') return hashlib.md5(s).hexdigest() self.manifest_json_etag = md5hex(manifest_json) 'Etag': self.manifest_json_etag} self.assertIn(('X-Manifest-Etag', self.manifest_json_etag), headers) self.abcd_manifest_json_etag = md5hex(_abcd_manifest_json) 'Etag': self.abcd_manifest_json_etag}, self.assertIn( ('Content-Type', 'application/json; charset=utf-8'), headers) self.assertIn(('Etag', md5hex(body)), headers) self.assertEqual(headers['X-Manifest-Etag'], self.abcd_manifest_json_etag) self.assertEqual(headers['X-Manifest-Etag'], self.abcd_manifest_json_etag) self.abcd_manifest_json_etag = md5hex(_abcd_manifest_json) 'Etag': self.abcd_manifest_json_etag,"," return hashlib.md5(s.encode('ascii')).hexdigest() 'Etag': md5hex(manifest_json)} 'Etag': md5hex(_abcd_manifest_json)}, self.assertTrue( ('Content-Type', 'application/json; charset=utf-8') in headers, headers) 'Etag': md5hex(_abcd_manifest_json),",21,8
openstack%2Fnova~stable%2Fqueens~I9e852e25ea89f32bf19cdaeb1f5dac8f749f5dbc,openstack/nova,stable/queens,I9e852e25ea89f32bf19cdaeb1f5dac8f749f5dbc,Delete resource providers for all nodes when deleting compute service,MERGED,2019-06-21 15:11:15.000000000,2019-08-09 17:21:43.000000000,2019-08-09 17:21:43.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 9373}, {'_account_id': 10118}, {'_account_id': 14595}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-06-21 15:11:15.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_services.py', 'releasenotes/notes/bug-1811726-multi-node-delete-2ba17f02c6171fbb.yaml', 'nova/api/openstack/compute/services.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/b2f438bab4a0fdaa37b1a57cff0b27fb2a3f3437', 'message': ""Delete resource providers for all nodes when deleting compute service\n\nChange I7b8622b178d5043ed1556d7bdceaf60f47e5ac80 started deleting the\ncompute node resource provider associated with a compute node when\ndeleting a nova-compute service. However, it would only delete the\nfirst compute node associated with the service which means for an\nironic compute service that is managing multiple nodes, the resource\nproviders were not cleaned up in placement. This fixes the issue by\niterating all the compute nodes and cleaning up their providers.\nNote this could be potentially a lot of nodes, but we don't really\nhave many good options here but to iterate them and clean them up\none at a time.\n\nNote that this is best-effort but because of how the\nSchedulerReportClient.delete_resource_provider method ignores\nResourceProviderInUse errors, and we could have stale allocations\non the host for which delete_resource_provider is not accounting,\nnamely allocations from evacuated instances (or incomplete migrations\nthough you can't migrate baremetal instances today), we could still\ndelete the compute service and orphan those in-use providers. That,\nhowever, is no worse than before this change where we did not try\nto cleanup all providers. The issue described above is being tracked\nwith bug 1829479 and will be dealt with separately.\n\nConflicts:\n      nova/tests/unit/api/openstack/compute/test_services.py\n\nNOTE(mriedem): The conflict is due to not having change\nIe1aa45a508fbba16e969f216398dee15b37a9569 in Queens.\n\nChange-Id: I9e852e25ea89f32bf19cdaeb1f5dac8f749f5dbc\nCloses-Bug: #1811726\n(cherry picked from commit 650fe118d128f09f78552b82abc114bb4b84930e)\n(cherry picked from commit e9889be94ee58a6da78ef96d09d8f5282b86f648)\n(cherry picked from commit 64d52788831f0e676f0b9bf9780eeadb38232def)\n""}]",0,666862,b2f438bab4a0fdaa37b1a57cff0b27fb2a3f3437,14,8,1,6873,,,0,"Delete resource providers for all nodes when deleting compute service

Change I7b8622b178d5043ed1556d7bdceaf60f47e5ac80 started deleting the
compute node resource provider associated with a compute node when
deleting a nova-compute service. However, it would only delete the
first compute node associated with the service which means for an
ironic compute service that is managing multiple nodes, the resource
providers were not cleaned up in placement. This fixes the issue by
iterating all the compute nodes and cleaning up their providers.
Note this could be potentially a lot of nodes, but we don't really
have many good options here but to iterate them and clean them up
one at a time.

Note that this is best-effort but because of how the
SchedulerReportClient.delete_resource_provider method ignores
ResourceProviderInUse errors, and we could have stale allocations
on the host for which delete_resource_provider is not accounting,
namely allocations from evacuated instances (or incomplete migrations
though you can't migrate baremetal instances today), we could still
delete the compute service and orphan those in-use providers. That,
however, is no worse than before this change where we did not try
to cleanup all providers. The issue described above is being tracked
with bug 1829479 and will be dealt with separately.

Conflicts:
      nova/tests/unit/api/openstack/compute/test_services.py

NOTE(mriedem): The conflict is due to not having change
Ie1aa45a508fbba16e969f216398dee15b37a9569 in Queens.

Change-Id: I9e852e25ea89f32bf19cdaeb1f5dac8f749f5dbc
Closes-Bug: #1811726
(cherry picked from commit 650fe118d128f09f78552b82abc114bb4b84930e)
(cherry picked from commit e9889be94ee58a6da78ef96d09d8f5282b86f648)
(cherry picked from commit 64d52788831f0e676f0b9bf9780eeadb38232def)
",git fetch https://review.opendev.org/openstack/nova refs/changes/62/666862/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/api/openstack/compute/test_services.py', 'releasenotes/notes/bug-1811726-multi-node-delete-2ba17f02c6171fbb.yaml', 'nova/api/openstack/compute/services.py']",3,b2f438bab4a0fdaa37b1a57cff0b27fb2a3f3437,bug/1811726," # placement for the compute nodes managed by this service; # remember that an ironic compute service can manage multiple # nodes compute_nodes = objects.ComputeNodeList.get_all_by_host( context, service.host) for compute_node in compute_nodes: self.placementclient.delete_resource_provider( context, compute_node, cascade=True)"," # placement for this compute node self.placementclient.delete_resource_provider( context, service.compute_node, cascade=True)",32,9
openstack%2Ftripleo-heat-templates~master~I21524419b8b416d0879fc61aa3274d2e30537438,openstack/tripleo-heat-templates,master,I21524419b8b416d0879fc61aa3274d2e30537438,"Force ""Pre-cache"" tasks to run in dry run",MERGED,2019-08-07 12:39:34.000000000,2019-08-09 17:10:32.000000000,2019-08-09 17:10:32.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 18002}, {'_account_id': 18851}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}, {'_account_id': 27427}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-08-07 12:39:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/0a2cb9430830d9b9795419d622d127b3b56e8fe9', 'message': 'Skip pre-cache facts tasks in dry-run\n\nAdd ""check_mode: no"" to the following tasks:\n\nTASK [Create puppet caching structures]\nTASK [Write facter cache config]\nTASK [Cleanup facter cache if exists]\nTASK [Pre-cache facts]\nTASK [Sync cached facts]\n\nSo when running dry-run mode, we don\'t actually pre-cache the facts on\nthe host.\n\nCloses-Bug: #1839321\nChange-Id: I21524419b8b416d0879fc61aa3274d2e30537438\n'}, {'number': 2, 'created': '2019-08-07 12:59:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6b093035a4d290d4351a91f587bfb9ef54928d8c', 'message': 'Force ""Pre-cache facts"" to run in dry run\n\nThe task is skipped in check mode because we don\'t provide ""creates""\nnor ""removes""; and since we need to cache facts when running Puppet\nin dry mode, we need to make sure this task is run anyway.\n\nSee https://docs.ansible.com/ansible/latest/modules/command_module.html\n\nCloses-Bug: #1839321\nChange-Id: I21524419b8b416d0879fc61aa3274d2e30537438\n'}, {'number': 3, 'created': '2019-08-07 20:25:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6ca25536b6b5262d6810540580d65352a1b4f4dc', 'message': 'Force ""Pre-cache facts"" to run in dry run\n\nThe task is skipped in check mode because we don\'t provide ""creates""\nnor ""removes""; and since we need to cache facts when running Puppet\nin dry mode, we need to make sure this task is run anyway.\n\nSee https://docs.ansible.com/ansible/latest/modules/command_module.html\n\nCloses-Bug: #1839321\nChange-Id: I21524419b8b416d0879fc61aa3274d2e30537438\n'}, {'number': 4, 'created': '2019-08-08 17:38:32.000000000', 'files': ['common/deploy-steps-tasks.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/9581614e9353576c6a7b83136793631473851b31', 'message': 'Force ""Pre-cache"" tasks to run in dry run\n\nWe don\'t want the pre-cache tasks to be skipped in dry-run so we force\ncheck_mode to ""no"".\n\nFor example, ""command"" is skipped in check mode because we don\'t provide\n""creates"" nor ""removes""; and since we need to cache facts when running Puppet\nin dry mode, we need to make sure this task is run anyway.\n\nSee https://docs.ansible.com/ansible/latest/modules/command_module.html\n\nFor ""file"", ""copy"", and ""synchronize"", they aren\'t skipped in dry mode\nbut the resources aren\'t executed for real.\n\nSo this patch disable check_mode for all these tasks.\nWe also move the tasks in a block which avoid tags & check_mode\nduplication for each task and avoid problems in the future if a task is\nadded.\n\nCloses-Bug: #1839321\nChange-Id: I21524419b8b416d0879fc61aa3274d2e30537438\n'}]",1,675108,9581614e9353576c6a7b83136793631473851b31,32,12,4,3153,,,0,"Force ""Pre-cache"" tasks to run in dry run

We don't want the pre-cache tasks to be skipped in dry-run so we force
check_mode to ""no"".

For example, ""command"" is skipped in check mode because we don't provide
""creates"" nor ""removes""; and since we need to cache facts when running Puppet
in dry mode, we need to make sure this task is run anyway.

See https://docs.ansible.com/ansible/latest/modules/command_module.html

For ""file"", ""copy"", and ""synchronize"", they aren't skipped in dry mode
but the resources aren't executed for real.

So this patch disable check_mode for all these tasks.
We also move the tasks in a block which avoid tags & check_mode
duplication for each task and avoid problems in the future if a task is
added.

Closes-Bug: #1839321
Change-Id: I21524419b8b416d0879fc61aa3274d2e30537438
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/08/675108/4 && git format-patch -1 --stdout FETCH_HEAD,['common/deploy-steps-tasks.yaml'],1,0a2cb9430830d9b9795419d622d127b3b56e8fe9,bug/1839321, check_mode: no check_mode: no check_mode: no check_mode: no check_mode: no,,5,0
openstack%2Ftripleo-upgrade~stable%2Fstein~Ided7f974c571c45ab83a59c6dd35ad522555caa3,openstack/tripleo-upgrade,stable/stein,Ided7f974c571c45ab83a59c6dd35ad522555caa3,Automate the undercloud leapp upgrade.,MERGED,2019-07-31 11:42:35.000000000,2019-08-09 17:10:31.000000000,2019-08-09 17:10:31.000000000,"[{'_account_id': 8042}, {'_account_id': 20775}, {'_account_id': 21537}, {'_account_id': 22348}, {'_account_id': 26343}, {'_account_id': 27141}]","[{'number': 1, 'created': '2019-07-31 11:42:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/cd2e3a6dd3d41e0b23e87a319b0952b367b27c6f', 'message': ""Automate the undercloud leapp upgrade.\n\nThis patch covers the automation of the undercloud's operating\nsystem upgrade using Leapp.\nIt includes a new option for Infrared --undercloud_os_upgrade\nthat will allow us to run only the specific bits to upgrade the\nundercloud's OS. The node subscription needs to be done before\nrunning this set of tasks, otherwise it will fail.\n\nBefore running leapp it's needed to clean up all the RHEL7\npackages and some other packages which conflict with leapp, like\nis the case of rhos-release.\n\nOnce the whole leapp upgrade and reboot has been performed, the\nundercloud might be unsubscribed if desired by setting the\nleapp_unregister variable.\n\nDue to the incompatibility of the python2 binary interpreter and\nRHEL8, we also need to set the ansible_python_interpreter variable\nat playbook level inside infrared-plugin/main.yml.\n\nCo-Authored: Natal Ngtal<hobbestigrou@erakis.eu>\nChange-Id: Ided7f974c571c45ab83a59c6dd35ad522555caa3\n(cherry picked from commit 7063b476f8744ab21f79de33e2127119a195c832)\n""}, {'number': 2, 'created': '2019-08-06 09:17:42.000000000', 'files': ['templates/workarounds.sh.j2', 'tasks/main.yml', 'tasks/common/undercloud_validate_upgrade.yaml', 'tasks/upgrade/undercloud_os_upgrade.yaml', 'tasks/common/undercloud_reboot.yaml', 'infrared_plugin/plugin.spec', 'infrared_plugin/main.yml', 'tasks/upgrade/main.yml', 'tasks/upgrade/create-undercloud-upgrade-scripts.yaml', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/adf9a4fcf017d5dcea6a9b5b0d8198ccfda1445d', 'message': ""Automate the undercloud leapp upgrade.\n\nThis patch covers the automation of the undercloud's operating\nsystem upgrade using Leapp.\nIt includes a new option for Infrared --undercloud_os_upgrade\nthat will allow us to run only the specific bits to upgrade the\nundercloud's OS. The node subscription needs to be done before\nrunning this set of tasks, otherwise it will fail.\n\nBefore running leapp it's needed to clean up all the RHEL7\npackages and some other packages which conflict with leapp, like\nis the case of rhos-release.\n\nOnce the whole leapp upgrade and reboot has been performed, the\nundercloud might be unsubscribed if desired by setting the\nleapp_unregister variable.\n\nDue to the incompatibility of the python2 binary interpreter and\nRHEL8, we also need to set the ansible_python_interpreter variable\nat playbook level inside infrared-plugin/main.yml.\n\nCo-Authored: Natal Ngtal<hobbestigrou@erakis.eu>\nChange-Id: Ided7f974c571c45ab83a59c6dd35ad522555caa3\n(cherry picked from commit 7063b476f8744ab21f79de33e2127119a195c832)\n""}]",2,673789,adf9a4fcf017d5dcea6a9b5b0d8198ccfda1445d,17,6,2,26343,,,0,"Automate the undercloud leapp upgrade.

This patch covers the automation of the undercloud's operating
system upgrade using Leapp.
It includes a new option for Infrared --undercloud_os_upgrade
that will allow us to run only the specific bits to upgrade the
undercloud's OS. The node subscription needs to be done before
running this set of tasks, otherwise it will fail.

Before running leapp it's needed to clean up all the RHEL7
packages and some other packages which conflict with leapp, like
is the case of rhos-release.

Once the whole leapp upgrade and reboot has been performed, the
undercloud might be unsubscribed if desired by setting the
leapp_unregister variable.

Due to the incompatibility of the python2 binary interpreter and
RHEL8, we also need to set the ansible_python_interpreter variable
at playbook level inside infrared-plugin/main.yml.

Co-Authored: Natal Ngtal<hobbestigrou@erakis.eu>
Change-Id: Ided7f974c571c45ab83a59c6dd35ad522555caa3
(cherry picked from commit 7063b476f8744ab21f79de33e2127119a195c832)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/89/673789/1 && git format-patch -1 --stdout FETCH_HEAD,"['templates/workarounds.sh.j2', 'tasks/main.yml', 'tasks/common/undercloud_validate_upgrade.yaml', 'tasks/upgrade/undercloud_os_upgrade.yaml', 'tasks/common/undercloud_reboot.yaml', 'infrared_plugin/plugin.spec', 'infrared_plugin/main.yml', 'tasks/upgrade/main.yml', 'tasks/upgrade/create-undercloud-upgrade-scripts.yaml', 'defaults/main.yml']",10,cd2e3a6dd3d41e0b23e87a319b0952b367b27c6f,,undercloud_os_upgrade: false # Leapp OS upgrade variables leapp_unregister: true,,157,50
openstack%2Ftripleo-heat-templates~stable%2Fstein~I33d62bbef3a19af0898f8047af436ed05c9a90a8,openstack/tripleo-heat-templates,stable/stein,I33d62bbef3a19af0898f8047af436ed05c9a90a8,Fix typo in barbican deployment,MERGED,2019-08-08 21:13:57.000000000,2019-08-09 17:01:43.000000000,2019-08-09 17:01:43.000000000,"[{'_account_id': 3153}, {'_account_id': 9914}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 21:13:57.000000000', 'files': ['deployment/barbican/barbican-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a8f24be0a258b3f793a7e3a9a142b89b5e0968bd', 'message': 'Fix typo in barbican deployment\n\nChange-Id: I33d62bbef3a19af0898f8047af436ed05c9a90a8\n(cherry picked from commit 06c8ab8beff4d9ba26b574c1c391d2d103e715a7)\n'}]",0,675466,a8f24be0a258b3f793a7e3a9a142b89b5e0968bd,8,5,1,7973,,,0,"Fix typo in barbican deployment

Change-Id: I33d62bbef3a19af0898f8047af436ed05c9a90a8
(cherry picked from commit 06c8ab8beff4d9ba26b574c1c391d2d103e715a7)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/66/675466/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/barbican/barbican-api-container-puppet.yaml'],1,a8f24be0a258b3f793a7e3a9a142b89b5e0968bd,, - /usr/lib64/libnethsm.so:/usr/lib64/libnethsm.so, - /usr/lib64/libnetshm.so:/usr/lib64/libnethsm.so,1,1
openstack%2Ftripleo-heat-templates~stable%2Fstein~If74e061ec6b5b78dd6a3c16de1ab0449f4d197e2,openstack/tripleo-heat-templates,stable/stein,If74e061ec6b5b78dd6a3c16de1ab0449f4d197e2,"Change datatype of revalidator,handler threads",MERGED,2019-08-09 06:30:20.000000000,2019-08-09 16:58:00.000000000,2019-08-09 16:58:00.000000000,"[{'_account_id': 3153}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-09 06:30:20.000000000', 'files': ['puppet/services/openvswitch.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/abf7c24bd276cc8b92ebf900b72fad2cf1e9b2e2', 'message': 'Change datatype of revalidator,handler threads\n\nCurrently these parameters are number type.\nThey fail string validation at vs_config.\nDefault set to none to retain current behavior.\n\nChange-Id: If74e061ec6b5b78dd6a3c16de1ab0449f4d197e2\nCloses-Bug: #1837030\n(cherry picked from commit b214b2c5852a63b56ea3dde621ddd2c233a228b2)\n'}]",0,675531,abf7c24bd276cc8b92ebf900b72fad2cf1e9b2e2,7,3,1,30229,,,0,"Change datatype of revalidator,handler threads

Currently these parameters are number type.
They fail string validation at vs_config.
Default set to none to retain current behavior.

Change-Id: If74e061ec6b5b78dd6a3c16de1ab0449f4d197e2
Closes-Bug: #1837030
(cherry picked from commit b214b2c5852a63b56ea3dde621ddd2c233a228b2)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/31/675531/1 && git format-patch -1 --stdout FETCH_HEAD,['puppet/services/openvswitch.yaml'],1,abf7c24bd276cc8b92ebf900b72fad2cf1e9b2e2,bug/1837030," type: string default: """" type: string default: """"", type: number default: 1 type: number default: 1,4,4
openstack%2Fnova~stable%2Fpike~I5e0a43ec59341c9ac62f89105ddf82c4a014df81,openstack/nova,stable/pike,I5e0a43ec59341c9ac62f89105ddf82c4a014df81,Replace non-nova server fault message,MERGED,2019-08-06 16:57:19.000000000,2019-08-09 16:42:06.000000000,2019-08-09 16:42:05.000000000,"[{'_account_id': 4690}, {'_account_id': 10118}, {'_account_id': 10311}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-06 16:57:19.000000000', 'files': ['nova/tests/functional/test_server_faults.py', 'releasenotes/notes/bug-1837877-cve-fault-message-exposure-5360d794f4976b7c.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/utils.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/6da28b0aa9b6a0ba67460f88dd2c397605b0679b', 'message': 'Replace non-nova server fault message\n\nThe server fault ""message"" is always shown in the API\nserver response, regardless of policy or user role.\n\nThe fault ""details"" are only shown to users with the\nadmin role when the fault code is 500.\n\nThe problem with this is for non-nova exceptions, the\nfault message is a string-ified version of the exception\n(see nova.compute.utils.exception_to_dict) which can\ncontain sensitive information which the non-admin owner\nof the server can see.\n\nThis change adds a functional test to recreate the issue\nand a change to exception_to_dict which for the non-nova\ncase changes the fault message by simply storing the\nexception type class name. Admins can still see the fault\ntraceback in the ""details"" key of the fault dict in the\nserver API response. Note that _get_fault_details is\nchanged so that the details also includes the exception\nvalue which is what used to be in the fault message for\nnon-nova exceptions. This is necessary so admins can still\nget the exception message with the traceback details.\n\nNote that nova exceptions with a %(reason)s replacement\nvariable could potentially be leaking sensitive details as\nwell but those would need to be cleaned up on a case-by-case\nbasis since we don\'t want to change the behavior of all\nfault messages otherwise users might not see information\nlike NoValidHost when their server goes to ERROR status\nduring scheduling.\n\nSecurityImpact: This change contains a fix for CVE-2019-14433.\n\nChange-Id: I5e0a43ec59341c9ac62f89105ddf82c4a014df81\nCloses-Bug: #1837877\n(cherry picked from commit 298b337a16c0d10916b4431c436d19b3d6f5360e)\n(cherry picked from commit 67651881163b75eb1983eaf753471a91ecec35eb)\n(cherry picked from commit e0b91a5b1e89bd0506dc6da86bc61f1708f0215a)\n(cherry picked from commit 3dcefba60a4f4553888a9dfda9fe3bee094d617a)\n'}]",0,674877,6da28b0aa9b6a0ba67460f88dd2c397605b0679b,12,6,1,6873,,,0,"Replace non-nova server fault message

The server fault ""message"" is always shown in the API
server response, regardless of policy or user role.

The fault ""details"" are only shown to users with the
admin role when the fault code is 500.

The problem with this is for non-nova exceptions, the
fault message is a string-ified version of the exception
(see nova.compute.utils.exception_to_dict) which can
contain sensitive information which the non-admin owner
of the server can see.

This change adds a functional test to recreate the issue
and a change to exception_to_dict which for the non-nova
case changes the fault message by simply storing the
exception type class name. Admins can still see the fault
traceback in the ""details"" key of the fault dict in the
server API response. Note that _get_fault_details is
changed so that the details also includes the exception
value which is what used to be in the fault message for
non-nova exceptions. This is necessary so admins can still
get the exception message with the traceback details.

Note that nova exceptions with a %(reason)s replacement
variable could potentially be leaking sensitive details as
well but those would need to be cleaned up on a case-by-case
basis since we don't want to change the behavior of all
fault messages otherwise users might not see information
like NoValidHost when their server goes to ERROR status
during scheduling.

SecurityImpact: This change contains a fix for CVE-2019-14433.

Change-Id: I5e0a43ec59341c9ac62f89105ddf82c4a014df81
Closes-Bug: #1837877
(cherry picked from commit 298b337a16c0d10916b4431c436d19b3d6f5360e)
(cherry picked from commit 67651881163b75eb1983eaf753471a91ecec35eb)
(cherry picked from commit e0b91a5b1e89bd0506dc6da86bc61f1708f0215a)
(cherry picked from commit 3dcefba60a4f4553888a9dfda9fe3bee094d617a)
",git fetch https://review.opendev.org/openstack/nova refs/changes/77/674877/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_server_faults.py', 'releasenotes/notes/bug-1837877-cve-fault-message-exposure-5360d794f4976b7c.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/utils.py']",4,6da28b0aa9b6a0ba67460f88dd2c397605b0679b,bug/1837877," """"""Converts exceptions to a dict for use in notifications. :param fault: Exception that occurred :param message: Optional fault message, otherwise the message is derived from the fault itself. :returns: dict with the following items: - exception: the fault itself - message: one of (in priority order): - the provided message to this method - a formatted NovaException message - the fault class name - code: integer code for the fault (defaults to 500) """""" # In this case either we have a NovaException which failed to format # the message or we have a non-nova exception which could contain # sensitive details. Since we're not sure, be safe and set the message # to the exception class name. Note that we don't guard on # context.is_admin here because the message is always shown in the API, # even to non-admin users (e.g. NoValidHost) but only the traceback # details are shown to users with the admin role. Checking for admin # context here is also not helpful because admins can perform # operations on a tenant user's server (migrations, reboot, etc) and # service startup and periodic tasks could take actions on a server # and those use an admin context. # TODO(mriedem): Why do we only include the details if the code is 500? # Though for non-nova exceptions the code will probably be 500. if exc_info and error_code == 500: # We get the full exception details including the value since # the fault message may not contain that information for non-nova # exceptions (see exception_to_dict). details = ''.join(traceback.format_exception( exc_info[0], exc_info[1], exc_info[2]))"," """"""Converts exceptions to a dict for use in notifications."""""" try: message = six.text_type(fault) except Exception: message = None if not message: if exc_info and error_code == 500: tb = exc_info[2] if tb: details = ''.join(traceback.format_tb(tb))",183,16
openstack%2Fnetworking-odl~master~I3a7040610e0d3855ef3c5567bc8e3f62ee2ed1c7,openstack/networking-odl,master,I3a7040610e0d3855ef3c5567bc8e3f62ee2ed1c7,Update api-ref location,MERGED,2019-07-30 17:53:48.000000000,2019-08-09 16:34:10.000000000,2019-08-09 16:34:10.000000000,"[{'_account_id': 4694}, {'_account_id': 6854}, {'_account_id': 13334}, {'_account_id': 17120}, {'_account_id': 22348}, {'_account_id': 27822}]","[{'number': 1, 'created': '2019-07-30 17:53:48.000000000', 'files': ['doc/source/contributor/index.rst'], 'web_link': 'https://opendev.org/openstack/networking-odl/commit/35a3a1e8e4846b8920b72b789c99bf427cf97510', 'message': ""Update api-ref location\n\nThe api documentation is now published on docs.openstack.org instead\nof developer.openstack.org. Update all links that are changed to the\nnew location.\n\nNote that redirects will be set up as well but let's point now to the\nnew location.\n\nFor details, see:\nhttp://lists.openstack.org/pipermail/openstack-discuss/2019-July/007828.html\n\nChange-Id: I3a7040610e0d3855ef3c5567bc8e3f62ee2ed1c7\n""}]",0,673599,35a3a1e8e4846b8920b72b789c99bf427cf97510,8,6,1,6547,,,0,"Update api-ref location

The api documentation is now published on docs.openstack.org instead
of developer.openstack.org. Update all links that are changed to the
new location.

Note that redirects will be set up as well but let's point now to the
new location.

For details, see:
http://lists.openstack.org/pipermail/openstack-discuss/2019-July/007828.html

Change-Id: I3a7040610e0d3855ef3c5567bc8e3f62ee2ed1c7
",git fetch https://review.opendev.org/openstack/networking-odl refs/changes/99/673599/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/contributor/index.rst'],1,35a3a1e8e4846b8920b72b789c99bf427cf97510,retire-api-site,https://docs.openstack.org/api-ref/network/,https://developer.openstack.org/api-ref/networking/,1,1
openstack%2Fpuppet-tripleo~stable%2Fqueens~I2adeb566e07e62f1626ea56c151fd44988a88eae,openstack/puppet-tripleo,stable/queens,I2adeb566e07e62f1626ea56c151fd44988a88eae,mysql/client: create tripleo.cnf everytime,ABANDONED,2019-08-09 16:27:38.000000000,2019-08-09 16:29:31.000000000,,[{'_account_id': 3153}],"[{'number': 1, 'created': '2019-08-09 16:27:38.000000000', 'files': ['manifests/profile/base/database/mysql/client.pp', 'spec/classes/tripleo_profile_base_database_mysql_client_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/5379028a3f920684d1f57e3d5ac6f654936d3294', 'message': ""mysql/client: create tripleo.cnf everytime\n\nIf TLS isn't enabled, Augeas won't create tripleo.cnf but Docker will\ncreate the file itself while mount binding it into the container.\nWith podman, the files/dirs that don't exist aren't created (probably\nfor the best), so let's create this empty file so podman can mount it\nanyway.\n\nWe need to backport this commit to support a change in pauch that only\nstarts docker if the mounts exist.\n\nBlueprint podman-support\nCo-Authored-By: Cdric Jeanneret <cjeanner@redhat.com>\nNeeded-By: https://review.opendev.org/#/c/673561/\n(cherry picked from commit 5a96b2ec0c7bb1181bf8ecd96b543efa12a72bba)\n\nChange-Id: I2adeb566e07e62f1626ea56c151fd44988a88eae\n""}]",0,675664,5379028a3f920684d1f57e3d5ac6f654936d3294,2,1,1,9914,,,0,"mysql/client: create tripleo.cnf everytime

If TLS isn't enabled, Augeas won't create tripleo.cnf but Docker will
create the file itself while mount binding it into the container.
With podman, the files/dirs that don't exist aren't created (probably
for the best), so let's create this empty file so podman can mount it
anyway.

We need to backport this commit to support a change in pauch that only
starts docker if the mounts exist.

Blueprint podman-support
Co-Authored-By: Cdric Jeanneret <cjeanner@redhat.com>
Needed-By: https://review.opendev.org/#/c/673561/
(cherry picked from commit 5a96b2ec0c7bb1181bf8ecd96b543efa12a72bba)

Change-Id: I2adeb566e07e62f1626ea56c151fd44988a88eae
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/64/675664/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/database/mysql/client.pp', 'spec/classes/tripleo_profile_base_database_mysql_client_spec.rb']",2,5379028a3f920684d1f57e3d5ac6f654936d3294,bug/1830734," is_expected.to contain_file('/etc/my.cnf.d/tripleo.cnf').with( :ensure => 'file', )",,7,0
openstack%2Fplacement~master~If1ce6acc2e0d0416d3921cf58c7e4f99d025a9f8,openstack/placement,master,If1ce6acc2e0d0416d3921cf58c7e4f99d025a9f8,Extract a _get_schema from list_allocation_candidates,MERGED,2019-07-12 14:11:22.000000000,2019-08-09 16:03:12.000000000,2019-08-09 16:03:11.000000000,"[{'_account_id': 9708}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-12 14:11:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/c6a5b7a04bec47fdaaaa599b2bb405358c3ce3c5', 'message': 'Extract a _get_schema from list_allocation_candidates\n\nIn order to simplify list_allocation_candidates (identified as\n""complex"" by \'radon cc -n C placement/handlers/\') extract\na _get_schema method which does the same thing, but in a loop.\n\nChange-Id: If1ce6acc2e0d0416d3921cf58c7e4f99d025a9f8\n'}, {'number': 2, 'created': '2019-07-14 15:51:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/820d28cd5943014360742b2e065ef0fc02212921', 'message': 'Extract a _get_schema from list_allocation_candidates\n\nIn order to simplify list_allocation_candidates (identified as\n""complex"" by \'radon cc -n C placement/handlers/\') extract\na _get_schema method which does the same thing, but in a loop.\n\nChange-Id: If1ce6acc2e0d0416d3921cf58c7e4f99d025a9f8\n'}, {'number': 3, 'created': '2019-07-18 10:45:54.000000000', 'files': ['placement/handlers/allocation_candidate.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/d76d6ab779e6de144ff7004f7e026e2dfec5d9ba', 'message': 'Extract a _get_schema from list_allocation_candidates\n\nIn order to simplify list_allocation_candidates (identified as\n""complex"" by \'radon cc -n C placement/handlers/\') extract\na _get_schema method which does the same thing, but in a loop.\n\nChange-Id: If1ce6acc2e0d0416d3921cf58c7e4f99d025a9f8\n'}]",7,670567,d76d6ab779e6de144ff7004f7e026e2dfec5d9ba,19,4,3,11564,,,0,"Extract a _get_schema from list_allocation_candidates

In order to simplify list_allocation_candidates (identified as
""complex"" by 'radon cc -n C placement/handlers/') extract
a _get_schema method which does the same thing, but in a loop.

Change-Id: If1ce6acc2e0d0416d3921cf58c7e4f99d025a9f8
",git fetch https://review.opendev.org/openstack/placement refs/changes/67/670567/2 && git format-patch -1 --stdout FETCH_HEAD,['placement/handlers/allocation_candidate.py'],1,c6a5b7a04bec47fdaaaa599b2bb405358c3ce3c5,cd/simplify-handlers,"# The microversions at which the schema used to validate # query parameters to GET /allocation_candidates differs. GET_SCHEMA_MICROVERSIONS = [ (1, 36), (1, 35), (1, 33), (1, 31), (1, 25), (1,21), (1, 17), (1, 16), ] def _get_schema(want_version): """"""Calculate the desired query parameter schema for list_allocation_candidates. """""" get_schema = schema.GET_SCHEMA_1_10 for major, minor in GET_SCHEMA_MICROVERSIONS: if want_version.matches((major, minor)): schema_string = 'GET_SCHEMA_%d_%d' % (major, minor) get_schema = getattr(schema, schema_string) break return get_schema get_schema = _get_schema(want_version)"," get_schema = schema.GET_SCHEMA_1_10 if want_version.matches((1, 36)): get_schema = schema.GET_SCHEMA_1_36 elif want_version.matches((1, 35)): get_schema = schema.GET_SCHEMA_1_35 elif want_version.matches((1, 33)): get_schema = schema.GET_SCHEMA_1_33 elif want_version.matches((1, 31)): get_schema = schema.GET_SCHEMA_1_31 elif want_version.matches((1, 25)): get_schema = schema.GET_SCHEMA_1_25 elif want_version.matches((1, 21)): get_schema = schema.GET_SCHEMA_1_21 elif want_version.matches((1, 17)): get_schema = schema.GET_SCHEMA_1_17 elif want_version.matches((1, 16)): get_schema = schema.GET_SCHEMA_1_16",22,17
openstack%2Fnova~stable%2Fqueens~I6a2c63a4c33e783100208fd3f45eb52aad49e3d6,openstack/nova,stable/queens,I6a2c63a4c33e783100208fd3f45eb52aad49e3d6,Cleanup when hitting MaxRetriesExceeded from no host_available,MERGED,2019-07-30 16:29:39.000000000,2019-08-09 16:03:08.000000000,2019-08-09 16:03:08.000000000,"[{'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-30 16:29:39.000000000', 'files': ['nova/tests/unit/conductor/test_conductor.py', 'nova/tests/functional/regressions/test_bug_1837955.py', 'nova/conductor/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3ec4c5ed9c93ee261a948db9679d1550f58c2882', 'message': 'Cleanup when hitting MaxRetriesExceeded from no host_available\n\nPrior to this patch there was a condition when no\nhost_available was true and an exception would get\nraised without first cleaning up the instance.\nThis causes instances to get indefinitely stuck in\na scheduling state.\n\nThis patch fixes this by calling the clean up function\nand then exits build_instances using a return statement.\n\nThe related functional regression recreate test is updated\nto show this fixes the bug.\n\nChange-Id: I6a2c63a4c33e783100208fd3f45eb52aad49e3d6\nCloses-bug: #1837955\n(cherry picked from commit b98d4ba6d54f5ca2999a8fe6b6d7dfcc134061df)\n(cherry picked from commit fcc2b9e33ed2b3d9f469b458e0f46011fe9883ac)\n(cherry picked from commit e3b68a1c8bbedd877cfc988898f7e458ab067f28)\n'}]",0,673576,3ec4c5ed9c93ee261a948db9679d1550f58c2882,16,6,1,6873,,,0,"Cleanup when hitting MaxRetriesExceeded from no host_available

Prior to this patch there was a condition when no
host_available was true and an exception would get
raised without first cleaning up the instance.
This causes instances to get indefinitely stuck in
a scheduling state.

This patch fixes this by calling the clean up function
and then exits build_instances using a return statement.

The related functional regression recreate test is updated
to show this fixes the bug.

Change-Id: I6a2c63a4c33e783100208fd3f45eb52aad49e3d6
Closes-bug: #1837955
(cherry picked from commit b98d4ba6d54f5ca2999a8fe6b6d7dfcc134061df)
(cherry picked from commit fcc2b9e33ed2b3d9f469b458e0f46011fe9883ac)
(cherry picked from commit e3b68a1c8bbedd877cfc988898f7e458ab067f28)
",git fetch https://review.opendev.org/openstack/nova refs/changes/76/673576/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/conductor/test_conductor.py', 'nova/conductor/manager.py', 'nova/tests/functional/regressions/test_bug_1837955.py']",3,3ec4c5ed9c93ee261a948db9679d1550f58c2882,bug/1837955," def setUp(self): super(BuildRescheduleClaimFailsTestCase, self).setUp() fake_notifier.stub_notifier(self) self.addCleanup(fake_notifier.reset) server = self._wait_for_state_change(self.api, server, 'ERROR') self._wait_for_unversioned_notification( 'compute_task.build_instances') server = self.api.get_server(server['id']) self.assertIn('fault', server) self.assertIn('Exceeded maximum number of retries', server['fault']['message'])"," # FIXME(mriedem): This is bug 1837955 where the status is stuck in # BUILD rather than the vm_state being set to error and the task_state # being set to None. Uncomment this when the bug is fixed. # server = self._wait_for_state_change(self.api, server, 'ERROR') # FIXME(mriedem): Uncomment this when bug 1837955 is fixed. # self._wait_for_unversioned_notification( # 'compute_task.build_instances') # server = self.api.get_server(server['id']) # self.assertIn('fault', server) # self.assertIn('Exceeded maximum number of retries', # server['fault']['message']) # TODO(mriedem): Remove this when the bug is fixed. We need to assert # something before the bug is fixed to show the failure so check the # logs. for x in range(20): logs = self.stdlog.logger.output if 'MaxRetriesExceeded' in logs: break time.sleep(.5) else: self.fail('Timed out waiting for MaxRetriesExceeded to show up ' 'in the logs.')",60,43
openstack%2Frpm-packaging~master~If41b52e0eae7afd5e748bcc499d1c2c5860b22fd,openstack/rpm-packaging,master,If41b52e0eae7afd5e748bcc499d1c2c5860b22fd,ironic-lib: Update to 2.19.0 and move to singlespec,MERGED,2019-08-08 14:48:27.000000000,2019-08-09 15:53:51.000000000,2019-08-09 15:53:51.000000000,"[{'_account_id': 6593}, {'_account_id': 8482}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 14:48:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/c4e43d3e63588f54fa2e88bad83bbb3982241bb2', 'message': 'ironic-lib: Update to 2.19.0 and move to singlespec\n\nChange-Id: If41b52e0eae7afd5e748bcc499d1c2c5860b22fd\n'}, {'number': 2, 'created': '2019-08-09 07:51:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/dd3ef73188bcc122fe9a2b33822110154fc02495', 'message': 'ironic-lib: Update to 2.19.0 and move to singlespec\n\nChange-Id: If41b52e0eae7afd5e748bcc499d1c2c5860b22fd\n'}, {'number': 3, 'created': '2019-08-09 08:13:23.000000000', 'files': ['openstack/ironic-lib/ironic-lib.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/1930ec0b1bfc07515ff4c52ff06b34ba88343b14', 'message': 'ironic-lib: Update to 2.19.0 and move to singlespec\n\nChange-Id: If41b52e0eae7afd5e748bcc499d1c2c5860b22fd\n'}]",0,675366,1930ec0b1bfc07515ff4c52ff06b34ba88343b14,17,5,3,7102,,,0,"ironic-lib: Update to 2.19.0 and move to singlespec

Change-Id: If41b52e0eae7afd5e748bcc499d1c2c5860b22fd
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/66/675366/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/ironic-lib/ironic-lib.spec.j2'],1,c4e43d3e63588f54fa2e88bad83bbb3982241bb2,,"{% set pypi_name = 'ironic-lib' %} {% set upstream_version = upstream_version('2.19.0') %} {% set rpm_release = '1' %} {% set source = url_pypi() %} Name: {{ py2name() }} Version: {{ py2rpmversion() }} Release: {{ py2rpmrelease() }}BuildRequires: {{ py2pkg('pbr', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('setuptools', py_versions=['py2', 'py3']) }}Requires: {{ py2pkg('oslo.serialization') }}Requires: {{ py2pkg('zeroconf') }} Requires: python-ironic-lib-common = %{epoch}:%{version}-%{release}%python_subpackages%package -n python-ironic-lib-common Summary: Ironic Common Libraries Group: Development/Languages/Python %description -n python-ironic-lib-common A common library to be used **exclusively** by projects under the `Ironic governance <http://governance.openstack.org/reference/projects/ironic.html>` This package contains the common files needed for all python versions %autosetup -p1 -n {{ pypi_name }}-{{ upstream_version }}%python_build%python_install%files %{python_files}%{python_sitelib}/ironic_lib %{python_sitelib}/ironic_lib*egg-info %files -n python-ironic-lib-common %license LICENSE",Name: {{ py2name('ironic-lib') }} Version: 2.18.0 Release: 0BuildRequires: {{ py2pkg('pbr') }} BuildRequires: {{ py2pkg('setuptools') }} Requires: {{ py2pkg('eventlet') }}%autosetup -n ironic-lib-%{version}%{py2_build}%{py2_install}%files%{python2_sitelib}/ironic_lib %{python2_sitelib}/ironic_lib*egg-info,33,12
openstack%2Frpm-packaging~stable%2Frocky~Id8fbc69f8a60a06d934a020e3fd8fecb406b8031,openstack/rpm-packaging,stable/rocky,Id8fbc69f8a60a06d934a020e3fd8fecb406b8031,keystonemiddleware: Add patch,MERGED,2019-08-09 10:51:54.000000000,2019-08-09 15:53:50.000000000,2019-08-09 15:53:50.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-09 10:51:54.000000000', 'files': ['openstack/keystonemiddleware/0001-Skip-the-services-with-no-endpoints-when-parsing-ser.patch', 'openstack/keystonemiddleware/keystonemiddleware.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/c6d08d66aa3e2d7d7b2f2cc86e8f64d74a20a85b', 'message': 'keystonemiddleware: Add patch\n\nAdding 0001-Skip-the-services-with-no-endpoints-when-parsing-ser.patch\n\nChange-Id: Id8fbc69f8a60a06d934a020e3fd8fecb406b8031\n'}]",0,675580,c6d08d66aa3e2d7d7b2f2cc86e8f64d74a20a85b,10,5,1,7102,,,0,"keystonemiddleware: Add patch

Adding 0001-Skip-the-services-with-no-endpoints-when-parsing-ser.patch

Change-Id: Id8fbc69f8a60a06d934a020e3fd8fecb406b8031
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/80/675580/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/keystonemiddleware/0001-Skip-the-services-with-no-endpoints-when-parsing-ser.patch', 'openstack/keystonemiddleware/keystonemiddleware.spec.j2']",2,c6d08d66aa3e2d7d7b2f2cc86e8f64d74a20a85b,stable-rocky,Patch0: 0001-Skip-the-services-with-no-endpoints-when-parsing-ser.patch,,81,0
openstack%2Freleases~master~Ifc033162f5d84d062a3145f834d24b09c62e51cb,openstack/releases,master,Ifc033162f5d84d062a3145f834d24b09c62e51cb,Release OpenStack-Ansible Rocky,MERGED,2019-07-29 09:51:19.000000000,2019-08-09 15:48:51.000000000,2019-08-09 15:48:51.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-29 09:51:19.000000000', 'files': ['deliverables/rocky/openstack-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/510ebd39a8eecdec12528eb474c6623e48da071d', 'message': 'Release OpenStack-Ansible Rocky\n\nChange-Id: Ifc033162f5d84d062a3145f834d24b09c62e51cb\n'}]",0,673249,510ebd39a8eecdec12528eb474c6623e48da071d,7,3,1,17068,,,0,"Release OpenStack-Ansible Rocky

Change-Id: Ifc033162f5d84d062a3145f834d24b09c62e51cb
",git fetch https://review.opendev.org/openstack/releases refs/changes/49/673249/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/rocky/openstack-ansible.yaml'],1,510ebd39a8eecdec12528eb474c6623e48da071d,release_osa, - version: 18.1.9 projects: - repo: openstack/openstack-ansible hash: e0755a5998b7654e7fb4aaa93cb69ec45741b22b,,4,0
openstack%2Fdevstack~master~Iea469128b15298aee61245e702d20603c8d376fb,openstack/devstack,master,Iea469128b15298aee61245e702d20603c8d376fb,Remove VNC server listen addresses seeting to IPv4 from base job,MERGED,2019-07-24 10:34:05.000000000,2019-08-09 15:47:15.000000000,2019-07-30 12:31:36.000000000,"[{'_account_id': 7118}, {'_account_id': 8556}, {'_account_id': 13252}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-24 10:34:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/bcaa7e13b74b4c083ad7650f8ad1255c042cf88c', 'message': ""Set VNC server listen addresses of IPv6\n\n'devstack-ipv6' job need to set the VNC listen\naddresses 'VNCSERVER_LISTEN' and 'VNCSERVER_PROXYCLIENT_ADDRESS'\nto IPv6 not IPv4.\n\nThis base will be used to define the IPv6-only jobs\non Tempest and project side gate.\n\nChange-Id: Iea469128b15298aee61245e702d20603c8d376fb\nStory: #2005477\nTask: #35923\n""}, {'number': 2, 'created': '2019-07-25 06:54:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/1d41b4e42cf840969a5761bd1789efc57d6fd5be', 'message': ""Set VNC server listen addresses of IPv6\n\n'devstack-ipv6' job need to set the VNC listen\naddresses 'VNCSERVER_LISTEN' and 'VNCSERVER_PROXYCLIENT_ADDRESS'\nto IPv6 not IPv4.\n\nThis base will be used to define the IPv6-only jobs\non Tempest and project side gate.\n\nChange-Id: Iea469128b15298aee61245e702d20603c8d376fb\nStory: #2005477\nTask: #35923\n""}, {'number': 3, 'created': '2019-07-25 07:45:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/43b550c0f57ba92adc3277e78c6e277fdfaf47b3', 'message': ""Set VNC server listen addresses of IPv6\n\n'devstack-ipv6' job need to set the VNC listen\naddresses 'VNCSERVER_LISTEN' and 'VNCSERVER_PROXYCLIENT_ADDRESS'\nto IPv6 not IPv4.\n\nThis base will be used to define the IPv6-only jobs\non Tempest and project side gate.\n\nChange-Id: Iea469128b15298aee61245e702d20603c8d376fb\nStory: #2005477\nTask: #35923\n""}, {'number': 4, 'created': '2019-07-25 07:48:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/4eaafa4adc2fc33a4ced5f257be7ed71e7ce43b6', 'message': ""Set VNC server listen addresses of IPv6\n\n'devstack-ipv6' job need to set the VNC listen\naddresses 'VNCSERVER_LISTEN' and 'VNCSERVER_PROXYCLIENT_ADDRESS'\nto IPv6 not IPv4.\n\nThis base will be used to define the IPv6-only jobs\non Tempest and project side gate.\n\nChange-Id: Iea469128b15298aee61245e702d20603c8d376fb\nStory: #2005477\nTask: #35923\n""}, {'number': 5, 'created': '2019-07-26 02:50:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/bdcde2ee9dda50e985fdca75965dbbb6ab359377', 'message': ""Set VNC server listen addresses of IPv6\n\n'devstack-ipv6' job need to set the VNC listen\naddresses 'VNCSERVER_LISTEN' and 'VNCSERVER_PROXYCLIENT_ADDRESS'\nto IPv6 not IPv4.\n\nThis base will be used to define the IPv6-only jobs\non Tempest and project side gate.\n\nChange-Id: Iea469128b15298aee61245e702d20603c8d376fb\nStory: #2005477\nTask: #35923\n""}, {'number': 6, 'created': '2019-07-26 08:25:59.000000000', 'files': ['lib/nova', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/devstack/commit/b0b80d76e1b8787fbfa66aedaf700c2abe44e22d', 'message': ""Remove VNC server listen addresses seeting to IPv4 from base job\n\n'devstack' job set the VNC listen addresses 'VNCSERVER_LISTEN' and\n'VNCSERVER_PROXYCLIENT_ADDRESS' IPv4 which makes 'devstack-ipv6' job\nto either unset those or set for IPv6 values.\n\nLet's remove the setting of those in base job and let lib/nova\nset based on configured ip version from job.\n\n'devstack-ipv6' base job will be used to define the IPv6-only jobs\non Tempest and project side gate.\n\nChange-Id: Iea469128b15298aee61245e702d20603c8d376fb\nStory: #2005477\nTask: #35923\n""}]",2,672493,b0b80d76e1b8787fbfa66aedaf700c2abe44e22d,29,4,6,8556,,,0,"Remove VNC server listen addresses seeting to IPv4 from base job

'devstack' job set the VNC listen addresses 'VNCSERVER_LISTEN' and
'VNCSERVER_PROXYCLIENT_ADDRESS' IPv4 which makes 'devstack-ipv6' job
to either unset those or set for IPv6 values.

Let's remove the setting of those in base job and let lib/nova
set based on configured ip version from job.

'devstack-ipv6' base job will be used to define the IPv6-only jobs
on Tempest and project side gate.

Change-Id: Iea469128b15298aee61245e702d20603c8d376fb
Story: #2005477
Task: #35923
",git fetch https://review.opendev.org/openstack/devstack refs/changes/93/672493/4 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,bcaa7e13b74b4c083ad7650f8ad1255c042cf88c,ipv6-only-deployment-and-testing, VNCSERVER_LISTEN: $SERVICE_LISTEN_ADDRESS VNCSERVER_PROXYCLIENT_ADDRESS: $HOST_IPV6,,2,0
openstack%2Fmonasca-common~master~I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776,openstack/monasca-common,master,I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776,Support kafka connection timeout option,MERGED,2019-07-26 08:23:28.000000000,2019-08-09 15:45:58.000000000,2019-08-09 15:45:58.000000000,"[{'_account_id': 16222}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 29970}]","[{'number': 1, 'created': '2019-07-26 08:23:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/03900d11934f0abb3d2ecc409cdfd9bdc084c350', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}, {'number': 2, 'created': '2019-07-26 09:33:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/d7811cc57e1a1de62fc900ce82231103cb3eeff1', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}, {'number': 3, 'created': '2019-07-27 01:20:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/532428d4f8c318ad757ea283a5556e1127ec144e', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}, {'number': 4, 'created': '2019-07-29 10:22:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/b5f44839bb7cba3a7ec6a0ca73aefa3b40d18a8d', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}, {'number': 5, 'created': '2019-07-30 00:32:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/2b601b2814a5d93f18b7fe04857a98c3e82c96fa', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}, {'number': 6, 'created': '2019-07-30 01:17:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/ccbef75ea5d775e3b9e2f32b8530cc9a90b7d01c', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}, {'number': 7, 'created': '2019-07-31 01:43:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/9e13217fe13815b76ef51dd972b3be91aad5a522', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nTask:  36034\nStory: 2006312\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}, {'number': 8, 'created': '2019-07-31 08:34:50.000000000', 'files': ['monasca_common/confluent_kafka/consumer.py', 'monasca_common/tests/test_confluent_kafka.py', 'monasca_common/kafka/consumer.py'], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/0b818510e373b2cfbe66594e15819ab2989f588a', 'message': 'Support kafka connection timeout option\n\nAdd timeout option for kafka consumer client.\n\nTask: 36034\nStory: 2006312\nChange-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776\n'}]",4,672910,0b818510e373b2cfbe66594e15819ab2989f588a,39,4,8,29970,,,0,"Support kafka connection timeout option

Add timeout option for kafka consumer client.

Task: 36034
Story: 2006312
Change-Id: I197b81b2c5690b3e27b3fac8dd42c4cb2d9ba776
",git fetch https://review.opendev.org/openstack/monasca-common refs/changes/10/672910/4 && git format-patch -1 --stdout FETCH_HEAD,['monasca_common/kafka/consumer.py'],1,03900d11934f0abb3d2ecc409cdfd9bdc084c350,kafka-sessiontimeout-option,"from kazoo.client import KazooClient from kazoo.recipe.partitioner import SetPartitioner from monasca_common.kafka_lib.conn import DEFAULT_SOCKET_TIMEOUT_SECONDS commit_timeout=30, timeout=DEFAULT_SOCKET_TIMEOUT_SECONDS, ): timeout - kafka connection timeout self._kafka = kafka_client.KafkaClient(kafka_url, timeout)", from kazoo.client import KazooClient from kazoo.recipe.partitioner import SetPartitioner commit_timeout=30): self._kafka = kafka_client.KafkaClient(kafka_url),8,5
openstack%2Fironic-python-agent~master~I6c1d90b4669102ab59588ab15f7166626c4d72be,openstack/ironic-python-agent,master,I6c1d90b4669102ab59588ab15f7166626c4d72be,Software RAID: try to assemble RAID on start-up,MERGED,2019-08-09 08:19:04.000000000,2019-08-09 15:42:29.000000000,2019-08-09 15:42:28.000000000,"[{'_account_id': 10343}, {'_account_id': 11655}, {'_account_id': 15064}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-09 08:19:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/09476b05729a9627990ffa067d72ac1b6d30bcbc', 'message': 'Software RAID: try to assemble RAID on start-up\n\nTinyIPA does not do it, which prevents deployment on RAID devices.\n\nChange-Id: I6c1d90b4669102ab59588ab15f7166626c4d72be\n'}, {'number': 2, 'created': '2019-08-09 08:35:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/635020c3b5fe8785d2fcf8dcb86fe864ad16045a', 'message': 'Software RAID: try to assemble RAID on start-up\n\nTinyIPA does not do it, which prevents deployment on RAID devices.\n\nChange-Id: I6c1d90b4669102ab59588ab15f7166626c4d72be\n'}, {'number': 3, 'created': '2019-08-09 09:08:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/5c74603acd3ba55fbacb99a2b5647480297361f1', 'message': 'Software RAID: try to assemble RAID on start-up\n\nTinyIPA does not do it, which prevents deployment on RAID devices.\n\nChange-Id: I6c1d90b4669102ab59588ab15f7166626c4d72be\n'}, {'number': 4, 'created': '2019-08-09 11:29:16.000000000', 'files': ['ironic_python_agent/hardware.py', 'ironic_python_agent/tests/unit/test_hardware.py', 'releasenotes/notes/sw-raid-assemble-9c20fe967f73d1dd.yaml', 'ironic_python_agent/tests/unit/test_agent.py'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/c7c307c497cbd77827a9af72bb99cf1a72c5ce2a', 'message': 'Software RAID: try to assemble RAID on start-up\n\nTinyIPA does not do it, which prevents deployment on RAID devices.\n\nStory: #2004581\nTask: #36196\nChange-Id: I6c1d90b4669102ab59588ab15f7166626c4d72be\n'}]",0,675554,c7c307c497cbd77827a9af72bb99cf1a72c5ce2a,16,5,4,10239,,,0,"Software RAID: try to assemble RAID on start-up

TinyIPA does not do it, which prevents deployment on RAID devices.

Story: #2004581
Task: #36196
Change-Id: I6c1d90b4669102ab59588ab15f7166626c4d72be
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/54/675554/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/hardware.py', 'ironic_python_agent/tests/unit/test_hardware.py', 'releasenotes/notes/sw-raid-assemble-9c20fe967f73d1dd.yaml', 'ironic_python_agent/tests/unit/test_agent.py']",4,09476b05729a9627990ffa067d72ac1b6d30bcbc,sw-raid," @mock.patch.object(hardware, '_md_scan_and_assemble', mock.Mock())@mock.patch.object(hardware, '_md_scan_and_assemble', lambda: None)",,72,60
openstack%2Fironic-lib~stable%2Fstein~Ic3963e5c4a1886aeabed6c5994599e72040a251e,openstack/ironic-lib,stable/stein,Ic3963e5c4a1886aeabed6c5994599e72040a251e,Use last digit to determine paritition naming scheme,MERGED,2019-07-31 13:57:21.000000000,2019-08-09 15:42:22.000000000,2019-08-09 15:42:22.000000000,"[{'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2019-07-31 13:57:21.000000000', 'files': ['ironic_lib/tests/test_disk_utils.py', 'releasenotes/notes/fix-metadisk-partitioning-32d3fca274290dd6.yaml', 'ironic_lib/disk_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic-lib/commit/a8a8b35891e61dffb873f0363594363fcb75db79', 'message': 'Use last digit to determine paritition naming scheme\n\nThis matches the behaviour of the linux kernel, see:\n\nhttps://github.com/torvalds/linux/blob/d3511f53bb2475f2a4e8460bee5a1ae6dea2a433/block/partition-generic.c#L39\n\nChange-Id: Ic3963e5c4a1886aeabed6c5994599e72040a251e\nStory: 2006154\nTask: 35656\n(cherry picked from commit cd51319528bb2333139c7cefb68e7e6e27df740a)\n'}]",0,673820,a8a8b35891e61dffb873f0363594363fcb75db79,6,3,1,10239,,,0,"Use last digit to determine paritition naming scheme

This matches the behaviour of the linux kernel, see:

https://github.com/torvalds/linux/blob/d3511f53bb2475f2a4e8460bee5a1ae6dea2a433/block/partition-generic.c#L39

Change-Id: Ic3963e5c4a1886aeabed6c5994599e72040a251e
Story: 2006154
Task: 35656
(cherry picked from commit cd51319528bb2333139c7cefb68e7e6e27df740a)
",git fetch https://review.opendev.org/openstack/ironic-lib refs/changes/20/673820/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_lib/tests/test_disk_utils.py', 'releasenotes/notes/fix-metadisk-partitioning-32d3fca274290dd6.yaml', 'ironic_lib/disk_utils.py']",3,a8a8b35891e61dffb873f0363594363fcb75db79,p-scheme-stable/stein,"def is_last_char_digit(dev): """"""check whether device name ends with a digit"""""" if len(dev) >= 1: return dev[-1].isdigit() return False elif is_last_char_digit(dev): elif is_last_char_digit(device):","def is_nvme_device(dev): """"""check whether the device path belongs to an NVMe drive. """""" return ""/dev/nvme"" in dev elif is_nvme_device(dev): elif is_nvme_device(device):",14,6
openstack%2Fironic~stable%2Fstein~Id175e0573b9ff76fd1b6c2e57af774e943ae1476,openstack/ironic,stable/stein,Id175e0573b9ff76fd1b6c2e57af774e943ae1476,Enable testing adoption in the CI,MERGED,2019-08-03 17:13:23.000000000,2019-08-09 15:42:20.000000000,2019-08-09 15:42:19.000000000,"[{'_account_id': 10118}, {'_account_id': 10343}, {'_account_id': 11655}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-03 17:13:23.000000000', 'files': ['devstack/lib/ironic'], 'web_link': 'https://opendev.org/openstack/ironic/commit/4014612ca0f027e4d86a0999887f949a55a89a83', 'message': 'Enable testing adoption in the CI\n\nChange-Id: Id175e0573b9ff76fd1b6c2e57af774e943ae1476\nDepends-On: https://review.opendev.org/672286\n(cherry picked from commit 363e50cab81bfd4ad73b27bcac6ac5b567ec0447)\n'}]",0,674466,4014612ca0f027e4d86a0999887f949a55a89a83,14,8,1,10239,,,0,"Enable testing adoption in the CI

Change-Id: Id175e0573b9ff76fd1b6c2e57af774e943ae1476
Depends-On: https://review.opendev.org/672286
(cherry picked from commit 363e50cab81bfd4ad73b27bcac6ac5b567ec0447)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/66/674466/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/ironic'],1,4014612ca0f027e4d86a0999887f949a55a89a83,adoption-stable/stein," if [[ ""$IRONIC_IS_HARDWARE"" == ""False"" ]]; then # Adoption requires reading or guessing the BMC credentials, so let's # not enable it for real hardware, at least for now. iniset $TEMPEST_CONFIG baremetal_feature_enabled adoption True fi",,5,1
openstack%2Fnova~stable%2Fqueens~If3c9d1de3ce0fe394405bd1e1f0fa08ce2baeda8,openstack/nova,stable/queens,If3c9d1de3ce0fe394405bd1e1f0fa08ce2baeda8,libvirt: flatten rbd images when unshelving an instance,MERGED,2019-06-28 09:22:29.000000000,2019-08-09 15:42:11.000000000,2019-08-09 15:42:11.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 11503}, {'_account_id': 14595}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-06-28 09:22:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/88116d95ae38978c5e4467ff0680f6a85e835273', 'message': 'libvirt: flatten rbd images when unshelving an instance\n\nPreviously attempts to remove the shelved snapshot of an unshelved\ninstance when using the rbd backends for both Nova and Glance would\nfail. This was due to the instance disk being cloned from and still\nreferencing the shelved snapshot image in Glance, blocking any attempt\nto remove this image later in the unshelve process.\n\nAfter much debate this change attempts to fix this issue by flattening\nthe instance disk while the instance is being spawned as part of an\nunshelve. For the rbd imagebackend this removes any reference to the\nshelved snapshot in Glance allowing this image to be removed. For all\nother imagebackends the call to flatten the image is currently a no-op.\n\nCo-Authored-By: Lee Yarwood <lyarwood@redhat.com>\nCo-Authored-By: Vladyslav Drok <vdrok@mirantis.com>\n\nNOTE(lyarwood): Test conflicts due to Ie3130e104d7ca80289f1bd9f0fee9a7a198c263c\nand I407034374fe17c4795762aa32575ba72d3a46fe8 not being present in\nstable/queens. Note that the latter was backported but then reverted via\nIbf2b5eeafd962e93ae4ab6290015d58c33024132 resulting in this conflict.\n\nConflicts:\n    nova/tests/unit/virt/libvirt/test_driver.py\n\nCloses-Bug: #1653953\nChange-Id: If3c9d1de3ce0fe394405bd1e1f0fa08ce2baeda8\n(cherry picked from commit d89e7d7857e0ab56c3b088338272c24d0618c07f)\n(cherry picked from commit e802ede4b30b21c7590620abc142300a57bcf349)\n(cherry picked from commit e93bc57a73d8642012f759a4ffbe5289112ba490)\n'}, {'number': 2, 'created': '2019-06-28 11:21:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/902cffb6a99395745104bcc1a673e470aadbd79c', 'message': 'libvirt: flatten rbd images when unshelving an instance\n\nPreviously attempts to remove the shelved snapshot of an unshelved\ninstance when using the rbd backends for both Nova and Glance would\nfail. This was due to the instance disk being cloned from and still\nreferencing the shelved snapshot image in Glance, blocking any attempt\nto remove this image later in the unshelve process.\n\nAfter much debate this change attempts to fix this issue by flattening\nthe instance disk while the instance is being spawned as part of an\nunshelve. For the rbd imagebackend this removes any reference to the\nshelved snapshot in Glance allowing this image to be removed. For all\nother imagebackends the call to flatten the image is currently a no-op.\n\nCo-Authored-By: Lee Yarwood <lyarwood@redhat.com>\nCo-Authored-By: Vladyslav Drok <vdrok@mirantis.com>\n\nNOTE(lyarwood): Test conflicts due to Ie3130e104d7ca80289f1bd9f0fee9a7a198c263c\nand I407034374fe17c4795762aa32575ba72d3a46fe8 not being present in\nstable/queens. Note that the latter was backported but then reverted via\nIbf2b5eeafd962e93ae4ab6290015d58c33024132 resulting in this conflict.\n\nConflicts:\n    nova/tests/unit/virt/libvirt/test_driver.py\n\nCloses-Bug: #1653953\nChange-Id: If3c9d1de3ce0fe394405bd1e1f0fa08ce2baeda8\n(cherry picked from commit d89e7d7857e0ab56c3b088338272c24d0618c07f)\n(cherry picked from commit e802ede4b30b21c7590620abc142300a57bcf349)\n(cherry picked from commit e93bc57a73d8642012f759a4ffbe5289112ba490)\n'}, {'number': 3, 'created': '2019-07-29 08:07:02.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_imagebackend.py', 'nova/virt/libvirt/imagebackend.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/d2f91755ab74372a966b0ebae710beccabef0821', 'message': 'libvirt: flatten rbd images when unshelving an instance\n\nPreviously attempts to remove the shelved snapshot of an unshelved\ninstance when using the rbd backends for both Nova and Glance would\nfail. This was due to the instance disk being cloned from and still\nreferencing the shelved snapshot image in Glance, blocking any attempt\nto remove this image later in the unshelve process.\n\nAfter much debate this change attempts to fix this issue by flattening\nthe instance disk while the instance is being spawned as part of an\nunshelve. For the rbd imagebackend this removes any reference to the\nshelved snapshot in Glance allowing this image to be removed. For all\nother imagebackends the call to flatten the image is currently a no-op.\n\nCo-Authored-By: Lee Yarwood <lyarwood@redhat.com>\nCo-Authored-By: Vladyslav Drok <vdrok@mirantis.com>\n\nNOTE(lyarwood): Test conflicts due to Ie3130e104d7ca80289f1bd9f0fee9a7a198c263c\nand I407034374fe17c4795762aa32575ba72d3a46fe8 not being present in\nstable/queens. Note that the latter was backported but then reverted via\nIbf2b5eeafd962e93ae4ab6290015d58c33024132 resulting in this conflict.\n\nConflicts:\n    nova/tests/unit/virt/libvirt/test_driver.py\n\nCloses-Bug: #1653953\nChange-Id: If3c9d1de3ce0fe394405bd1e1f0fa08ce2baeda8\n(cherry picked from commit d89e7d7857e0ab56c3b088338272c24d0618c07f)\n(cherry picked from commit e802ede4b30b21c7590620abc142300a57bcf349)\n(cherry picked from commit e93bc57a73d8642012f759a4ffbe5289112ba490)\n'}]",0,668123,d2f91755ab74372a966b0ebae710beccabef0821,28,10,3,10135,,,0,"libvirt: flatten rbd images when unshelving an instance

Previously attempts to remove the shelved snapshot of an unshelved
instance when using the rbd backends for both Nova and Glance would
fail. This was due to the instance disk being cloned from and still
referencing the shelved snapshot image in Glance, blocking any attempt
to remove this image later in the unshelve process.

After much debate this change attempts to fix this issue by flattening
the instance disk while the instance is being spawned as part of an
unshelve. For the rbd imagebackend this removes any reference to the
shelved snapshot in Glance allowing this image to be removed. For all
other imagebackends the call to flatten the image is currently a no-op.

Co-Authored-By: Lee Yarwood <lyarwood@redhat.com>
Co-Authored-By: Vladyslav Drok <vdrok@mirantis.com>

NOTE(lyarwood): Test conflicts due to Ie3130e104d7ca80289f1bd9f0fee9a7a198c263c
and I407034374fe17c4795762aa32575ba72d3a46fe8 not being present in
stable/queens. Note that the latter was backported but then reverted via
Ibf2b5eeafd962e93ae4ab6290015d58c33024132 resulting in this conflict.

Conflicts:
    nova/tests/unit/virt/libvirt/test_driver.py

Closes-Bug: #1653953
Change-Id: If3c9d1de3ce0fe394405bd1e1f0fa08ce2baeda8
(cherry picked from commit d89e7d7857e0ab56c3b088338272c24d0618c07f)
(cherry picked from commit e802ede4b30b21c7590620abc142300a57bcf349)
(cherry picked from commit e93bc57a73d8642012f759a4ffbe5289112ba490)
",git fetch https://review.opendev.org/openstack/nova refs/changes/23/668123/3 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_imagebackend.py', 'nova/virt/libvirt/imagebackend.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",4,88116d95ae38978c5e4467ff0680f6a85e835273,bug/1653953," 'vm_state': None, instance = objects.Instance(**self.test_instance) instance.vm_state = vm_states.BUILDING inst['vm_state'] = None def test_unshelve_noop_flatten_fetch_image_cache(self): instance = self._create_instance( params={'vm_state': vm_states.SHELVED_OFFLOADED}) drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) mock_imagebackend = mock.Mock(spec=imagebackend.Lvm) mock_imagebackend.flatten.side_effect = NotImplementedError() # Assert that this doesn't raise NotImplementedError drvr._try_fetch_image_cache(mock_imagebackend, mock.sentinel.fetch, self.context, mock.sentinel.filename, uuids.image_id, instance, mock.sentinel.size) # Assert that we cache and then flatten the image when an instance is # still SHELVED_OFFLOADED during _try_fetch_image_cache. mock_imagebackend.cache.assert_called_once_with( fetch_func=mock.sentinel.fetch, context=self.context, filename=mock.sentinel.filename, image_id=uuids.image_id, size=mock.sentinel.size, trusted_certs=instance.trusted_certs) mock_imagebackend.flatten.assert_called_once() def test_unshelve_rbd_image_flatten_during_fetch_image_cache(self): instance = self._create_instance( params={'vm_state': vm_states.SHELVED_OFFLOADED}) drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) mock_rbd_driver = mock.Mock(spec=rbd_utils.RBDDriver) mock_rbd_imagebackend = mock.Mock(spec=imagebackend.Rbd) mock_rbd_imagebackend.rbd_name = mock.sentinel.rbd_name mock_rbd_imagebackend.pool = mock.sentinel.rbd_pool # This is logged so we can't use a sentinel mock_rbd_imagebackend.path = 'rbd:pool/vol_disk' mock_rbd_imagebackend.driver = mock_rbd_driver mock_rbd_imagebackend.flatten.side_effect = \ imagebackend.Rbd.flatten(mock_rbd_imagebackend) drvr._try_fetch_image_cache(mock_rbd_imagebackend, mock.sentinel.fetch, self.context, mock.sentinel.filename, uuids.image_id, instance, mock.sentinel.size) # Assert that we cache and then flatten the image when an instance is # still SHELVED_OFFLOADED during _try_fetch_image_cache. mock_rbd_imagebackend.cache.assert_called_once_with( fetch_func=mock.sentinel.fetch, context=self.context, filename=mock.sentinel.filename, image_id=uuids.image_id, size=mock.sentinel.size, trusted_certs=instance.trusted_certs) mock_rbd_imagebackend.flatten.assert_called_once() mock_rbd_driver.flatten.assert_called_once_with( mock.sentinel.rbd_name, pool=mock.sentinel.rbd_pool) "," instance = objects.Instance(vm_state=vm_states.BUILDING, **self.test_instance)",89,2
openstack%2Fnova~stable%2Fqueens~I4ca64dd60d883356880680fb1f04cee4136c2e00,openstack/nova,stable/queens,I4ca64dd60d883356880680fb1f04cee4136c2e00,Add functional regression test for bug 1837955,MERGED,2019-07-30 15:48:01.000000000,2019-08-09 15:41:27.000000000,2019-08-09 15:41:27.000000000,"[{'_account_id': 10135}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-30 15:48:01.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1837955.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/26ec2cbe5975f1687cce3e6b81b448ed51569cd6', 'message': 'Add functional regression test for bug 1837955\n\nThis adds a functional regression recreate test for\nbug 1837955 which was introduced with change\nIae904afb6cb4fcea8bb27741d774ffbe986a5fb4 in the Queens\nrelease.\n\nIn this scenario, the primary (and potentially alternate)\nhosts for a server build fail and reschedule to conductor.\nEventually all alternate hosts are exhausted and specifically\ntrying to claim allocations against the alternates fails,\nprobably because between the time of initial scheduling and\nrescheduling something else took up the spare capacity on the\nalternate host.\n\nWhen this happens, MaxRetriesExceeded is raised but the\ninstance is stuck in BUILD status rather than set to ERROR\nstatus with a fault message.\n\nNOTE(mriedem): In this backport the test is changed slighty\nsince change Iea283322124cb35fc0bc6d25f35548621e8c8c2f is not\nin Queens so ProviderUsageBaseTestCase is still in test_servers.py.\n\nChange-Id: I4ca64dd60d883356880680fb1f04cee4136c2e00\nRelated-Bug: #1837955\n(cherry picked from commit 5cc39fc51eee6e39f584394283f009aa6809d17b)\n(cherry picked from commit 0d2e27fd018e08617964dc38321ebfa8f1a5a4f9)\n(cherry picked from commit f292a92a89b452c66b5799ac309a5f623ee7b16c)\n'}]",0,673567,26ec2cbe5975f1687cce3e6b81b448ed51569cd6,7,3,1,6873,,,0,"Add functional regression test for bug 1837955

This adds a functional regression recreate test for
bug 1837955 which was introduced with change
Iae904afb6cb4fcea8bb27741d774ffbe986a5fb4 in the Queens
release.

In this scenario, the primary (and potentially alternate)
hosts for a server build fail and reschedule to conductor.
Eventually all alternate hosts are exhausted and specifically
trying to claim allocations against the alternates fails,
probably because between the time of initial scheduling and
rescheduling something else took up the spare capacity on the
alternate host.

When this happens, MaxRetriesExceeded is raised but the
instance is stuck in BUILD status rather than set to ERROR
status with a fault message.

NOTE(mriedem): In this backport the test is changed slighty
since change Iea283322124cb35fc0bc6d25f35548621e8c8c2f is not
in Queens so ProviderUsageBaseTestCase is still in test_servers.py.

Change-Id: I4ca64dd60d883356880680fb1f04cee4136c2e00
Related-Bug: #1837955
(cherry picked from commit 5cc39fc51eee6e39f584394283f009aa6809d17b)
(cherry picked from commit 0d2e27fd018e08617964dc38321ebfa8f1a5a4f9)
(cherry picked from commit f292a92a89b452c66b5799ac309a5f623ee7b16c)
",git fetch https://review.opendev.org/openstack/nova refs/changes/67/673567/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1837955.py'],1,26ec2cbe5975f1687cce3e6b81b448ed51569cd6,bug/1837955,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import time from nova import exception from nova.tests import fixtures as nova_fixtures from nova.tests.functional import test_servers from nova.tests.unit import fake_notifier from nova.tests.unit.image import fake as fake_image class BuildRescheduleClaimFailsTestCase( test_servers.ProviderUsageBaseTestCase): """"""Regression test case for bug 1837955 where a server build fails on the primary host and then attempting to allocate resources on the alternate host, the alternate host is full and the allocations claim in placement fails, resulting in the build failing due to MaxRetriesExceeded and the server going to ERROR status. """""" compute_driver = 'fake.SmallFakeDriver' def _wait_for_unversioned_notification(self, event_type): for x in range(20): # wait up to 10 seconds for notification in fake_notifier.NOTIFICATIONS: if notification.event_type == event_type: return notification time.sleep(.5) self.fail('Timed out waiting for unversioned notification %s. Got: %s' % (event_type, fake_notifier.NOTIFICATIONS)) def test_build_reschedule_alt_host_alloc_fails(self): # Start two compute services so we have one alternate host. # Set cpu_allocation_ratio=1.0 to make placement inventory # and allocations for VCPU easier to manage. self.flags(cpu_allocation_ratio=1.0) for x in range(2): self._start_compute('host%i' % x) def fake_instance_claim(_self, _context, _inst, nodename, *a, **kw): # Before triggering the reschedule to the other host, max out the # capacity on the alternate host. alt_nodename = 'host0' if nodename == 'host1' else 'host1' rp_uuid = self._get_provider_uuid_by_host(alt_nodename) inventories = self._get_provider_inventory(rp_uuid) # Fake some other consumer taking all of the VCPU on the alt host. # Since we set cpu_allocation_ratio=1.0 the total is the total # capacity for VCPU on the host. total_vcpu = inventories['VCPU']['total'] alt_consumer = '7d32d0bc-af16-44b2-8019-a24925d76152' allocs = { 'allocations': { rp_uuid: { 'resources': { 'VCPU': total_vcpu } } }, 'project_id': self.api.project_id, 'user_id': self.api.project_id } resp = self.placement_api.put( '/allocations/%s' % alt_consumer, allocs, version='1.12') self.assertEqual(204, resp.status, resp.content) raise exception.ComputeResourcesUnavailable(reason='overhead!') # Stub out the instance claim (regardless of which host the scheduler # picks as the primary) to trigger a reschedule. self.stub_out('nova.compute.manager.resource_tracker.ResourceTracker.' 'instance_claim', fake_instance_claim) # Now that our stub is in place, try to create a server and wait for it # to go to ERROR status. server = self._build_minimal_create_server_request( self.api, 'test_build_reschedule_alt_host_alloc_fails', image_uuid=fake_image.get_valid_image_id(), networks=[{'port': nova_fixtures.NeutronFixture.port_1['id']}]) server = self.api.post_server({'server': server}) # FIXME(mriedem): This is bug 1837955 where the status is stuck in # BUILD rather than the vm_state being set to error and the task_state # being set to None. Uncomment this when the bug is fixed. # server = self._wait_for_state_change(self.api, server, 'ERROR') # Wait for the MaxRetriesExceeded fault to be recorded. # set_vm_state_and_notify sets the vm_state to ERROR before the fault # is recorded but after the notification is sent. So wait for the # unversioned notification to show up and then get the fault. # FIXME(mriedem): Uncomment this when bug 1837955 is fixed. # self._wait_for_unversioned_notification( # 'compute_task.build_instances') # server = self.api.get_server(server['id']) # self.assertIn('fault', server) # self.assertIn('Exceeded maximum number of retries', # server['fault']['message']) # TODO(mriedem): Remove this when the bug is fixed. We need to assert # something before the bug is fixed to show the failure so check the # logs. for x in range(20): logs = self.stdlog.logger.output if 'MaxRetriesExceeded' in logs: break time.sleep(.5) else: self.fail('Timed out waiting for MaxRetriesExceeded to show up ' 'in the logs.') ",,115,0
openstack%2Fnova~stable%2Fqueens~I99bd79fb45777edc0e33d846ba478b0a94a1191e,openstack/nova,stable/queens,I99bd79fb45777edc0e33d846ba478b0a94a1191e,fix cellv2 delete_host,MERGED,2019-07-25 10:49:19.000000000,2019-08-09 15:41:21.000000000,2019-08-09 15:41:21.000000000,"[{'_account_id': 6167}, {'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 9373}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 16128}, {'_account_id': 16198}, {'_account_id': 20722}, {'_account_id': 22348}, {'_account_id': 23871}, {'_account_id': 25562}, {'_account_id': 26515}, {'_account_id': 30568}]","[{'number': 1, 'created': '2019-07-25 10:49:19.000000000', 'files': ['nova/tests/unit/test_nova_manage.py', 'nova/cmd/manage.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1535f8e215c99b730e63eafb1e2f8db2e526376f', 'message': 'fix cellv2 delete_host\n\nWhen trying to delete host that can be found in host_mappings\nbut not in compute_nodes, current cellv2 delete_host will throw\nan exception but does not really handle it.\n\nThis patch tries to handle this exception and allow the delete\noperation to continue since it shows the host has gone anyway.\n\nChange-Id: I99bd79fb45777edc0e33d846ba478b0a94a1191e\nCloses-Bug: #1781391\n(cherry picked from commit 0ef4ed96d19a3576d67fdc9c1958610887d57ed4)\n'}]",0,672690,1535f8e215c99b730e63eafb1e2f8db2e526376f,14,14,1,14200,,,0,"fix cellv2 delete_host

When trying to delete host that can be found in host_mappings
but not in compute_nodes, current cellv2 delete_host will throw
an exception but does not really handle it.

This patch tries to handle this exception and allow the delete
operation to continue since it shows the host has gone anyway.

Change-Id: I99bd79fb45777edc0e33d846ba478b0a94a1191e
Closes-Bug: #1781391
(cherry picked from commit 0ef4ed96d19a3576d67fdc9c1958610887d57ed4)
",git fetch https://review.opendev.org/openstack/nova refs/changes/90/672690/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/test_nova_manage.py', 'nova/cmd/manage.py']",2,1535f8e215c99b730e63eafb1e2f8db2e526376f,bug/1781391," try: nodes = objects.ComputeNodeList.get_all_by_host(cctxt, host) except exception.ComputeHostNotFound: nodes = []"," nodes = objects.ComputeNodeList.get_all_by_host(cctxt, host)",37,2
openstack%2Freleases~master~I3e9bf0c67ad6d01288ac38f2dab41643c1c70a63,openstack/releases,master,I3e9bf0c67ad6d01288ac38f2dab41643c1c70a63,Add deliverable for compute-hyperv,MERGED,2019-08-02 18:49:21.000000000,2019-08-09 15:40:57.000000000,2019-08-09 15:40:57.000000000,"[{'_account_id': 308}, {'_account_id': 8213}, {'_account_id': 11904}, {'_account_id': 14826}, {'_account_id': 16708}, {'_account_id': 22165}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-02 18:49:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/675f3c987e0b8520de9f33ba077e6855af618ff6', 'message': 'Add deliverables for compute-hyperv & kolla-cli\n\nAfter hitting membership freeze and chatting with the ptls & other\ncontributors to these repositories, they are interested in releasing this\ncycle.\n\nChange-Id: I3e9bf0c67ad6d01288ac38f2dab41643c1c70a63\n'}, {'number': 2, 'created': '2019-08-05 09:03:05.000000000', 'files': ['deliverables/train/compute-hyperv.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/cd8d67071716b5aebdf0de1e661b2ddafdda4911', 'message': 'Add deliverable for compute-hyperv\n\nAfter hitting membership freeze and chatting with the ptl & other\ncontributors to this repository, they are interested in releasing this\ncycle.\n\nChange-Id: I3e9bf0c67ad6d01288ac38f2dab41643c1c70a63\n'}]",1,674405,cd8d67071716b5aebdf0de1e661b2ddafdda4911,14,7,2,16708,,,0,"Add deliverable for compute-hyperv

After hitting membership freeze and chatting with the ptl & other
contributors to this repository, they are interested in releasing this
cycle.

Change-Id: I3e9bf0c67ad6d01288ac38f2dab41643c1c70a63
",git fetch https://review.opendev.org/openstack/releases refs/changes/05/674405/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/train/compute-hyperv.yaml', 'deliverables/train/kolla-cli.yaml']",2,675f3c987e0b8520de9f33ba077e6855af618ff6,membership_freeze_train,--- launchpad: kolla release-model: cycle-trailing team: kolla type: other repository-settings: openstack/kolla-cli: {} ,,14,0
openstack%2Freleases~master~I5fbd0c75caacfda26d37a68d09c2b6506c9fa88f,openstack/releases,master,I5fbd0c75caacfda26d37a68d09c2b6506c9fa88f,Release metalsmith 0.14.0 for Train,MERGED,2019-08-07 10:23:31.000000000,2019-08-09 15:35:17.000000000,2019-08-09 15:35:17.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 10:23:31.000000000', 'files': ['deliverables/train/metalsmith.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/f51c2f816561e18b9ad5bd351e52d4bd7e196992', 'message': 'Release metalsmith 0.14.0 for Train\n\nChange-Id: I5fbd0c75caacfda26d37a68d09c2b6506c9fa88f\n'}]",0,675080,f51c2f816561e18b9ad5bd351e52d4bd7e196992,7,3,1,10239,,,0,"Release metalsmith 0.14.0 for Train

Change-Id: I5fbd0c75caacfda26d37a68d09c2b6506c9fa88f
",git fetch https://review.opendev.org/openstack/releases refs/changes/80/675080/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/metalsmith.yaml'],1,f51c2f816561e18b9ad5bd351e52d4bd7e196992,metalsmith, - version: 0.14.0 projects: - repo: openstack/metalsmith hash: 6f316bbad4e8a82ab1d77e0ee2fcc7fbe7f0c476,,4,0
openstack%2Fcharm-percona-cluster~master~Ic03056d037bc72320596d4f277d44a4fda95096d,openstack/charm-percona-cluster,master,Ic03056d037bc72320596d4f277d44a4fda95096d,WIP -- DO NOT MERGE - Convert charm to Python 3 only,ABANDONED,2019-03-14 17:58:40.000000000,2019-08-09 15:34:37.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-03-14 17:58:40.000000000', 'files': ['.zuul.yaml', 'unit_tests/__init__.py', 'hooks/charmhelpers', 'hooks/percona_hooks.py', 'hooks/percona_utils.py', 'unit_tests/test_percona_utils.py', 'actions/actions.py', 'hooks/upgrade-charm.real', 'unit_tests/test_percona_hooks.py', 'unit_tests/test_utils.py', 'hooks/install', 'hooks/upgrade-charm', 'tox.ini', 'hooks/install_deps'], 'web_link': 'https://opendev.org/openstack/charm-percona-cluster/commit/241cb0fe22c05beeb4aa476bc4b107d3d02c95f5', 'message': ""WIP -- DO NOT MERGE - Convert charm to Python 3 only\n\nThis is WIP because trusty doesn't have python3-mysqldb packaged which\nmeans the charm won't work on trusty.  Either the charm has to be made\npython2 for trusty and python3 for everything later, or trusty is\ndropped from the series.\n\nChange-Id: Ic03056d037bc72320596d4f277d44a4fda95096d\n""}]",0,643411,241cb0fe22c05beeb4aa476bc4b107d3d02c95f5,6,3,1,20870,,,0,"WIP -- DO NOT MERGE - Convert charm to Python 3 only

This is WIP because trusty doesn't have python3-mysqldb packaged which
means the charm won't work on trusty.  Either the charm has to be made
python2 for trusty and python3 for everything later, or trusty is
dropped from the series.

Change-Id: Ic03056d037bc72320596d4f277d44a4fda95096d
",git fetch https://review.opendev.org/openstack/charm-percona-cluster refs/changes/11/643411/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'unit_tests/__init__.py', 'hooks/charmhelpers', 'hooks/percona_hooks.py', 'hooks/percona_utils.py', 'unit_tests/test_percona_utils.py', 'actions/actions.py', 'hooks/upgrade-charm.real', 'unit_tests/test_percona_hooks.py', 'unit_tests/test_utils.py', 'hooks/install', 'hooks/upgrade-charm', 'tox.ini', 'hooks/install_deps']",14,241cb0fe22c05beeb4aa476bc4b107d3d02c95f5,ensure-py3,"#!/bin/bash -e # Wrapper to deal with newer Ubuntu versions that don't have py2 installed # by default. declare -a DEPS=('apt' 'netaddr' 'netifaces' 'yaml' 'dnspython') check_and_install() { pkg=""${1}-${2}"" if ! dpkg -s ${pkg} 2>&1 > /dev/null; then apt-get -y install ${pkg} fi } PYTHON=""python3"" for dep in ${DEPS[@]}; do check_and_install ${PYTHON} ${dep} done ",,109,67
openstack%2Freleases~master~I2486cbd1642a85a29c5063076dc2721ce7bf0d71,openstack/releases,master,I2486cbd1642a85a29c5063076dc2721ce7bf0d71,New keystonemiddleware release for stable/rocky,ABANDONED,2019-08-09 13:54:28.000000000,2019-08-09 15:32:13.000000000,,"[{'_account_id': 7102}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 13:54:28.000000000', 'files': ['deliverables/rocky/keystonemiddleware.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/3d7d24faf64afc320da25155cead2a7a867e7c0e', 'message': 'New keystonemiddleware release for stable/rocky\n\nThis picks up the bugfix for 1800017\n\nChange-Id: I2486cbd1642a85a29c5063076dc2721ce7bf0d71\n'}]",0,675628,3d7d24faf64afc320da25155cead2a7a867e7c0e,4,2,1,6593,,,0,"New keystonemiddleware release for stable/rocky

This picks up the bugfix for 1800017

Change-Id: I2486cbd1642a85a29c5063076dc2721ce7bf0d71
",git fetch https://review.opendev.org/openstack/releases refs/changes/28/675628/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/rocky/keystonemiddleware.yaml'],1,3d7d24faf64afc320da25155cead2a7a867e7c0e,, - version: 5.2.1 projects: - repo: openstack/keystonemiddleware hash: fcc3bc0c233e911f7b89bc2bc090f80dd31da0dc,,4,0
openstack%2Freleases~master~I69d0d00e1891357d8a016ee6daa513fac923f896,openstack/releases,master,I69d0d00e1891357d8a016ee6daa513fac923f896,Release keystonemiddleware 5.2.1 for rocky,ABANDONED,2019-08-09 15:28:48.000000000,2019-08-09 15:29:54.000000000,,[],"[{'number': 1, 'created': '2019-08-09 15:28:48.000000000', 'files': ['deliverables/rocky/keystonemiddleware.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/91bb96ac9cc2ffe591e512712ec3ae82f673dc59', 'message': 'Release keystonemiddleware 5.2.1 for rocky\n\nChange-Id: I69d0d00e1891357d8a016ee6daa513fac923f896\n'}]",0,675644,91bb96ac9cc2ffe591e512712ec3ae82f673dc59,2,0,1,8482,,,0,"Release keystonemiddleware 5.2.1 for rocky

Change-Id: I69d0d00e1891357d8a016ee6daa513fac923f896
",git fetch https://review.opendev.org/openstack/releases refs/changes/44/675644/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/rocky/keystonemiddleware.yaml'],1,91bb96ac9cc2ffe591e512712ec3ae82f673dc59,ksm-rocky, - projects: - hash: fcc3bc0c233e911f7b89bc2bc090f80dd31da0dc repo: openstack/keystonemiddleware version: 5.2.1,,4,0
openstack%2Fcharm-nova-lxd~master~I2b365891679463cafd3a325ce0caab9a20e5ab2e,openstack/charm-nova-lxd,master,I2b365891679463cafd3a325ce0caab9a20e5ab2e,Implements support for snap installing LXD,ABANDONED,2019-03-01 16:26:40.000000000,2019-08-09 15:29:39.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-03-01 16:26:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/dbeb16740112253a91dd940e1fad0ae3237a00f7', 'message': 'WIP - Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 2, 'created': '2019-03-01 16:29:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/6497cbbc9c3f7173dfa180d822b8dd4ec35ac7e2', 'message': 'WIP - Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 3, 'created': '2019-03-04 18:27:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/543deada5c8d8001eb7ee207eddad4d3be8a9c59', 'message': 'WIP - Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 4, 'created': '2019-03-19 16:50:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/1fa17443b88262f8f009da28700f995a2570fbae', 'message': 'WIP - Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 5, 'created': '2019-04-18 14:41:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/c13f33cd0bd404a77c1a3fc8c060569d103441ba', 'message': 'WIP - Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 6, 'created': '2019-04-18 14:48:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/4b5ebb6b5d044fd8f23b85e9871ceea0ef087b2e', 'message': 'Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 7, 'created': '2019-04-24 14:20:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/c3ea5b0a7d8bfe4288935da44652993812f0eed6', 'message': 'Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 8, 'created': '2019-04-25 14:45:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/31d8ae7b88ab9848d029f5a0b26576b65f311b68', 'message': 'Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nThe basic_deployment test is enabled for bionic onwards, which implies that\nbionic-queens, and later, nova-lxd packages must support LXD when installed by\na snap.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 9, 'created': '2019-05-10 10:27:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/b9c7cf1cb2df7c477f23a642dddfd34e533cf2ce', 'message': 'Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 10, 'created': '2019-05-10 12:09:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/6250602f10858fb46b471d9273eb568e6dd3e5bb', 'message': 'Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}, {'number': 11, 'created': '2019-05-16 12:43:41.000000000', 'files': ['unit_tests/test_lxd_utils.py', 'unit_tests/test_lxd_hooks.py', 'test-requirements.txt', 'files/lxd', 'files/lxd-dummy_1.0_all.deb', 'hooks/lxd_hooks.py', 'hooks/lxd_utils.py', 'tests/basic_deployment.py', 'files/README.md', 'README.md'], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/697e32049575fa02858e982d000e22f5f70de20a', 'message': 'Implements support for snap installing LXD\n\nThis patchset adds support for performing a snap installation of LXD on\nthe nova-compute host that the LXD subordinate is added to.\nThere a corresponding changes in the nova-compute charm and in the\nnova-lxd plugin for nova.  The reason is because some directories change\ndepending on whether LXD is snap-installed or not, and in the case of\nnova-lxd, the location of the console.log.\n\nChange-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e\n'}]",11,640429,697e32049575fa02858e982d000e22f5f70de20a,36,4,11,20870,,,0,"Implements support for snap installing LXD

This patchset adds support for performing a snap installation of LXD on
the nova-compute host that the LXD subordinate is added to.
There a corresponding changes in the nova-compute charm and in the
nova-lxd plugin for nova.  The reason is because some directories change
depending on whether LXD is snap-installed or not, and in the case of
nova-lxd, the location of the console.log.

Change-Id: I2b365891679463cafd3a325ce0caab9a20e5ab2e
",git fetch https://review.opendev.org/openstack/charm-nova-lxd refs/changes/29/640429/11 && git format-patch -1 --stdout FETCH_HEAD,"['unit_tests/test_lxd_utils.py', 'unit_tests/test_lxd_hooks.py', 'files/lxd', 'files/lxd-dummy_1.0_all.deb', 'hooks/lxd_hooks.py', 'hooks/lxd_utils.py', 'tests/basic_deployment.py', 'tox.ini', 'files/README.md']",9,dbeb16740112253a91dd940e1fad0ae3237a00f7,snap-install-lxd,The `lxd` file in this directory is for building the lxd-dummy package which is used to replace the proper `lxd` package when the snap is installed. Use the `equivs` package to build the dummy package. Note as the dummy package is *in* this directory it should never need rebuilding! ,,794,53
openstack%2Fcharm-nova-compute~master~Ic1dae464c0d0787d6a1f9c760ad196753d314760,openstack/charm-nova-compute,master,Ic1dae464c0d0787d6a1f9c760ad196753d314760,Add support for lxc being snap installed,ABANDONED,2019-03-01 16:59:36.000000000,2019-08-09 15:29:04.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-03-01 16:59:36.000000000', 'files': ['hooks/nova_compute_utils.py', 'unit_tests/test_nova_compute_utils.py'], 'web_link': 'https://opendev.org/openstack/charm-nova-compute/commit/8d718f6f02bfdeb243ce0d58fb62414750cf2af1', 'message': 'Add support for lxc being snap installed\n\nEssentially, the charm tries to run a `lxc list` to verify that the LXD\nconfiguration is complete (from the LXD subordinate charm).  However,\nwhen LXD is snap installed, the binary and location of its config\nchanges.  This patchset updates the nova-compute charm with this\ninformation.\n\nChange-Id: Ic1dae464c0d0787d6a1f9c760ad196753d314760\n'}]",4,640439,8d718f6f02bfdeb243ce0d58fb62414750cf2af1,8,4,1,20870,,,0,"Add support for lxc being snap installed

Essentially, the charm tries to run a `lxc list` to verify that the LXD
configuration is complete (from the LXD subordinate charm).  However,
when LXD is snap installed, the binary and location of its config
changes.  This patchset updates the nova-compute charm with this
information.

Change-Id: Ic1dae464c0d0787d6a1f9c760ad196753d314760
",git fetch https://review.opendev.org/openstack/charm-nova-compute refs/changes/39/640439/1 && git format-patch -1 --stdout FETCH_HEAD,"['hooks/nova_compute_utils.py', 'unit_tests/test_nova_compute_utils.py']",2,8d718f6f02bfdeb243ce0d58fb62414750cf2af1,snap-install-lxd," @patch('os.path.isfile') def test_lxc_bin(self, mock_os_path_isfile): """"""Verify that lxc_bin returns the right value for the bin"""""" mock_os_path_isfile.return_value = False self.assertEqual(utils.lxc_bin(), '/usr/bin/lxc') mock_os_path_isfile.return_value = True self.assertEqual(utils.lxc_bin(), '/snap/lxd/current/bin/lxc') @patch('os.path.isfile') def test_lxc_env(self, mock_os_path_isfile): mock_env = {'key': 'value'} with patch('os.environ', new=mock_env): mock_os_path_isfile.return_value = False self.assertEqual(utils.lxc_env(), mock_env) mock_os_path_isfile.return_value = True mock_env_snapped = mock_env.copy() mock_env_snapped['LXD_DIR'] = '/var/snap/lxd/common/lxd/' r_env = utils.lxc_env() self.assertEqual(r_env, mock_env_snapped) self.assertFalse('LXD_DIR' in mock_env) ",,50,2
openstack%2Fkolla-ansible~master~I8c3fe44fd9d2da99b5bb1c0ec3472d7e1b5fb295,openstack/kolla-ansible,master,I8c3fe44fd9d2da99b5bb1c0ec3472d7e1b5fb295,Remove support for Docker legacy packages,MERGED,2019-08-06 17:34:56.000000000,2019-08-09 15:27:09.000000000,2019-08-09 15:27:09.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-06 17:34:56.000000000', 'files': ['releasenotes/notes/remove-legacy-docker-3c7d6b9568474e3a.yaml', 'doc/source/reference/deployment-and-bootstrapping/bootstrap-servers.rst', 'ansible/roles/baremetal/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f63e36780bef01b1a9c45d0f523ea4124f791aec', 'message': 'Remove support for Docker legacy packages\n\nDocker is now always installed using the community edition (CE)\npackages.\n\nChange-Id: I8c3fe44fd9d2da99b5bb1c0ec3472d7e1b5fb295\n'}]",0,674886,f63e36780bef01b1a9c45d0f523ea4124f791aec,8,4,1,14826,,,0,"Remove support for Docker legacy packages

Docker is now always installed using the community edition (CE)
packages.

Change-Id: I8c3fe44fd9d2da99b5bb1c0ec3472d7e1b5fb295
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/86/674886/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/remove-legacy-docker-3c7d6b9568474e3a.yaml', 'doc/source/reference/deployment-and-bootstrapping/bootstrap-servers.rst', 'ansible/roles/baremetal/defaults/main.yml']",3,f63e36780bef01b1a9c45d0f523ea4124f791aec,,"docker_apt_url: ""https://download.docker.com/linux/{{ ansible_distribution | lower }}"" docker_apt_repo: ""deb {{ docker_apt_url }} {{ ansible_lsb.codename }} stable"" docker_apt_key_file: ""gpg"" docker_apt_key_id: ""0EBFCD88"" docker_apt_package: ""docker-ce""docker_yum_url: ""https://download.docker.com/linux/{{ ansible_distribution | lower }}"" docker_yum_baseurl: ""{{ docker_yum_url }}/{{ ansible_distribution_major_version | lower }}/$basearch/stable"" docker_yum_gpgkey: ""{{ docker_yum_url }}/gpg""docker_yum_package: ""docker-ce""","# Whether to use the legacy Docker packages at dockerproject.org instead of the # newer packages at docker.com. docker_legacy_packages: false docker_apt_url: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_apt_url }}{% else %}{{ docker_new_apt_url }}{% endif %}"" docker_apt_repo: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_apt_repo }}{% else %}{{ docker_new_apt_repo }}{% endif %}"" docker_apt_key_file: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_apt_key_file }}{% else %}{{ docker_new_apt_key_file }}{% endif %}"" docker_apt_key_id: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_apt_key_id }}{% else %}{{ docker_new_apt_key_id }}{% endif %}"" docker_apt_package: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_apt_package }}{% else %}{{ docker_new_apt_package }}{% endif %}"" # Docker APT repository configuration when docker_legacy_packages is false. docker_new_apt_url: ""https://download.docker.com/linux/{{ ansible_distribution | lower }}"" docker_new_apt_repo: ""deb {{ docker_new_apt_url }} {{ ansible_lsb.codename }} stable"" docker_new_apt_key_file: ""gpg"" docker_new_apt_key_id: ""0EBFCD88"" docker_new_apt_package: ""docker-ce"" # Docker APT repository configuration when docker_legacy_packages is true. docker_legacy_apt_url: ""{{ 'http://obs.linaro.org/ERP:/17.12/Debian_9' if ansible_architecture == 'aarch64' else 'https://apt.dockerproject.org' }}"" docker_legacy_apt_repo: ""{{ docker_legacy_apt_repo_aarch64 if ansible_architecture == 'aarch64' else docker_legacy_apt_repo_x86_64 }}"" docker_legacy_apt_repo_x86_64: ""deb {{ docker_apt_url }}/repo {{ ansible_distribution | lower }}-{{ ansible_distribution_release | lower }} main"" docker_legacy_apt_repo_aarch64: ""deb {{ docker_apt_url }} ./"" docker_legacy_apt_key_file: ""{{ 'Release.key' if ansible_architecture == 'aarch64' else 'gpg' }}"" docker_legacy_apt_key_id: ""{{ 'C32DA102AD89C2BE' if ansible_architecture == 'aarch64' else 'F76221572C52609D' }}"" docker_legacy_apt_package: ""{{ 'docker-ce' if ansible_architecture == 'aarch64' else 'docker-engine=1.12.*' }}""docker_yum_url: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_yum_url }}{% else %}{{ docker_new_yum_url }}{% endif %}"" docker_yum_baseurl: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_yum_baseurl }}{% else %}{{ docker_new_yum_baseurl }}{% endif %}"" docker_yum_gpgkey: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_yum_gpgkey }}{% else %}{{ docker_new_yum_gpgkey }}{% endif %}""docker_yum_package: ""{% if docker_legacy_packages | bool %}{{ docker_legacy_yum_package }}{% else %}{{ docker_new_yum_package }}{% endif %}"" # Docker Yum repository configuration when docker_legacy_packages is false. docker_new_yum_url: ""https://download.docker.com/linux/{{ ansible_distribution | lower }}"" docker_new_yum_baseurl: ""{{ docker_yum_url }}/{{ ansible_distribution_major_version | lower }}/$basearch/stable"" docker_new_yum_gpgkey: ""{{ docker_yum_url }}/gpg"" docker_new_yum_package: ""docker-ce"" # Docker Yum repository configuration when docker_legacy_packages is true. docker_legacy_yum_url: ""https://yum.dockerproject.org"" docker_legacy_yum_baseurl: ""{{ docker_legacy_yum_url }}/repo/main/{{ ansible_distribution | lower }}/{{ ansible_distribution_major_version | lower }}"" docker_legacy_yum_gpgkey: ""{{ docker_legacy_yum_url }}/gpg"" docker_legacy_yum_package: ""docker-engine-1.12.0""",18,48
openstack%2Fcharm-specs~master~I195c61d7dd8da3690f2cde17b4e0a304a1187842,openstack/charm-specs,master,I195c61d7dd8da3690f2cde17b4e0a304a1187842,Add lxd snap install spec,ABANDONED,2019-02-07 11:36:21.000000000,2019-08-09 15:24:59.000000000,,"[{'_account_id': 7730}, {'_account_id': 11805}, {'_account_id': 20634}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-02-07 11:36:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/ad800c37b18360543125256ede395727bdc78b68', 'message': 'Add lxd snap install spec\n\nAdd specification for adding ""snap installation"" capability to the lxd\ncharm.\n\nChange-Id: I195c61d7dd8da3690f2cde17b4e0a304a1187842\n'}, {'number': 2, 'created': '2019-02-07 12:42:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/bb17957cc0ab3f59981237a499994cce00d14739', 'message': 'Add lxd snap install spec\n\nAdd specification for adding ""snap installation"" capability to the lxd\ncharm.\n\nChange-Id: I195c61d7dd8da3690f2cde17b4e0a304a1187842\n'}, {'number': 3, 'created': '2019-03-05 12:17:49.000000000', 'files': ['specs/stein/approved/lxd-snap-install.rst'], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/d3c122a54d4a0f6b6904d122cddd163775f8ff9c', 'message': 'Add lxd snap install spec\n\nAdd specification for adding ""snap installation"" capability to the lxd\ncharm.\n\nChange-Id: I195c61d7dd8da3690f2cde17b4e0a304a1187842\n'}]",23,635484,d3c122a54d4a0f6b6904d122cddd163775f8ff9c,20,5,3,20870,,,0,"Add lxd snap install spec

Add specification for adding ""snap installation"" capability to the lxd
charm.

Change-Id: I195c61d7dd8da3690f2cde17b4e0a304a1187842
",git fetch https://review.opendev.org/openstack/charm-specs refs/changes/84/635484/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/stein/approved/lxd-snap-install.rst'],1,ad800c37b18360543125256ede395727bdc78b68,snap-install-lxd,".. Copyright 2019 Canonical Limited This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode .. This template should be in ReSTructured text. Please do not delete any of the sections in this template. If you have nothing to say for a whole section, just write: ""None"". For help with syntax, see http://sphinx-doc.org/rest.html To test out your formatting, see http://www.tele3.cz/jbar/rest/rest.html ====================================================================== Add snap installation capability to the LXD charm ====================================================================== The snap-installed version of LXD which will become the default for LXD, and is retro-fittable to xenial. Problem Description =================== LXD is switching to a snap-only installation option from Ubuntu 19.04 onwards (April 2019). The current ``lxd`` charm does not support snap installs. Whilst snap installation of ``lxd`` is back-portable to *trusty*, the charm will only support *xenial* and later. Proposed Change =============== The charm will be able install and configure the snap *or* packaged version of LXD to work with the *nova-compute* charm and, therefore, OpenStack nova-compute. The ``config.yaml`` ``source`` option will have an additional capability to recognise a string of the form ``snap:<channel>``, where the ``<channel>`` will be the string passed to the ``--channel=<channel>`` option of the snap install command. One issue is that an upgrade from package to snap is not reversable. i.e. Once the snap is installed it *can't* be reverted to a package version without dropping all of the containers, scrubbing the storage and starting again. Therefore, the charm will block if the snap is currently installed and the ``source`` option is changed away from the snap. However, the charm will upgrade from a package to snap using the snapped lxd builtin command ``lxd.migrate`` which will move the containers from the packaged version to the snap version. This does result in the containers being stopped, but they will be restarted after the ``lxd.migrate`` completes. Implementation ============== Assignee(s) ----------- Primary assignee: ajkavanagh Gerrit Topic ------------ Use Gerrit topic ""nova-lxd-charm"" for all patches related to this spec. .. code-block:: bash git-review -t nova-lxd-charm Work Items ---------- 1. Add snap installation support to lxd charm. 2. Modify ``basic_deployment.py`` to use a snap installation or ``xenial`` and later. 3. Add a ``basic_deployment.py`` target that performs a package installation on bionic, and performs a snap upgrade, and verifies that it works. This will be added to a ""full"" run, and will migrate at least two containers. 4. Change mojo tests to use snap install for ``xenial`` and later. 5. Change the *openstack-bundles* dev openstack-lxd to use the snap installation for testing. Repositories ------------ New git repository: ``openstack/charm-nova-lxd`` The existing git/gerrit project of ``openstack/charm-lxd`` will be archived when the renamed charm is introduced. Documentation ------------- Add note into README that identifies that the charm now supports snap installation and that it will be the default moving forward. Note that package installation will still be possible at present. Security -------- None noted. Testing ------- 1. The charm will have unit tests and pep8 conformance tests. 2. Perform upgrade testing using a functional test as the scope of the change is contained within the unit. No additional testing services other than UOSCI will be necessary. Dependencies ============ None noted. ",,115,0
openstack%2Fcharm-specs~master~I9e31ebfe5ded913e3de4002cc22b5c3ed494097d,openstack/charm-specs,master,I9e31ebfe5ded913e3de4002cc22b5c3ed494097d,WIP lxd storage,ABANDONED,2019-02-07 14:52:18.000000000,2019-08-09 15:24:26.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-02-07 14:52:18.000000000', 'files': ['specs/stein/approved/lxd-storage.rst'], 'web_link': 'https://opendev.org/openstack/charm-specs/commit/be6202b2154c0224418ebcea0509c80017cd2bfb', 'message': 'WIP lxd storage\n\nAdd options to the nova-lxd charm to enable support of more diverse LXD\nstorage pools.\n\nChange-Id: I9e31ebfe5ded913e3de4002cc22b5c3ed494097d\n'}]",0,635526,be6202b2154c0224418ebcea0509c80017cd2bfb,3,1,1,20870,,,0,"WIP lxd storage

Add options to the nova-lxd charm to enable support of more diverse LXD
storage pools.

Change-Id: I9e31ebfe5ded913e3de4002cc22b5c3ed494097d
",git fetch https://review.opendev.org/openstack/charm-specs refs/changes/26/635526/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/stein/approved/lxd-storage.rst'],1,be6202b2154c0224418ebcea0509c80017cd2bfb,lxd-storage,".. Copyright 2019 Canonical Limited This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode .. This template should be in ReSTructured text. Please do not delete any of the sections in this template. If you have nothing to say for a whole section, just write: ""None"". For help with syntax, see http://sphinx-doc.org/rest.html To test out your formatting, see http://www.tele3.cz/jbar/rest/rest.html ======================================================= WIP - Enabling richer storage pool options on the charm ======================================================= LXD has grown it's storage pool capabilities. This change enables operators to configure the lxd (nova-lxd) charm so that it can take full advantage of this. //TODO Problem Description =================== LXD now has a richer storage model that when the original ``lxd`` charm was written. This could be retrofitted to the existing charm, but it is proposed to *only* support LXD storage (and thus LXD charms versions > 3.x) which will simplify how the charm is currently written. //TODO Proposed Change =============== It will be LXD storage 'aware' in that the charm will support configuration of the storage that the will be used. The charm will *not* include actions for configuring storage in this release; that will be possible using ``juju run`` commands against the unit and then configuring the storage parameter. /TODO Implementation ============== Assignee(s) ----------- Primary assignee: ajkavanagh Gerrit Topic ------------ Use Gerrit topic ""nova-lxd-charm"" for all patches related to this spec. .. code-block:: bash git-review -t nova-lxd-charm-storage-pools Work Items ---------- //TODO Repositories ------------ None needed. Documentation ------------- //TODO Security -------- None noted. Testing ------- //TODO Dependencies ============ None noted. ",,90,0
openstack%2Fnova~master~I29eddb8d2e2a1c5a0252fdd3a1e229093586d241,openstack/nova,master,I29eddb8d2e2a1c5a0252fdd3a1e229093586d241,Add LXD to the nova.objects.fields.HypervisorDriver Enum,ABANDONED,2019-01-25 21:18:21.000000000,2019-08-09 15:24:02.000000000,,"[{'_account_id': 1063}, {'_account_id': 4393}, {'_account_id': 6062}, {'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 10118}, {'_account_id': 11604}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-01-25 21:18:21.000000000', 'files': ['nova/tests/unit/objects/test_diagnostics.py', 'nova/tests/unit/objects/test_objects.py', 'nova/objects/diagnostics.py', 'nova/objects/fields.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/30fa537f31841cb04c39386c89c9510eebdee765', 'message': ""Add LXD to the nova.objects.fields.HypervisorDriver Enum\n\nThis is so that the get_instance_diagnostics() function in the LXD\ndriver can report itself as 'lxd'.\n\n* Added LXD to HypervisorDriver() enum\n* Bumped version to 1.1 in HypervisorDriver enum\n* Updated tests to match bumped version\n\nChange-Id: I29eddb8d2e2a1c5a0252fdd3a1e229093586d241\n""}]",11,633279,30fa537f31841cb04c39386c89c9510eebdee765,29,17,1,20870,,,0,"Add LXD to the nova.objects.fields.HypervisorDriver Enum

This is so that the get_instance_diagnostics() function in the LXD
driver can report itself as 'lxd'.

* Added LXD to HypervisorDriver() enum
* Bumped version to 1.1 in HypervisorDriver enum
* Updated tests to match bumped version

Change-Id: I29eddb8d2e2a1c5a0252fdd3a1e229093586d241
",git fetch https://review.opendev.org/openstack/nova refs/changes/79/633279/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/objects/test_diagnostics.py', 'nova/tests/unit/objects/test_objects.py', 'nova/objects/diagnostics.py', 'nova/objects/fields.py']",4,30fa537f31841cb04c39386c89c9510eebdee765,add-lxd-to-hypervisordriver-enum," LXD = ""lxd"" ALL = (LIBVIRT, XENAPI, VMWAREAPI, IRONIC, HYPERV, LXD)"," ALL = (LIBVIRT, XENAPI, VMWAREAPI, IRONIC, HYPERV)",6,4
openstack%2Freleases~master~I8925c5de7e8ddebbc9b37d1fdd42dae35a1ec91f,openstack/releases,master,I8925c5de7e8ddebbc9b37d1fdd42dae35a1ec91f,Change murano-agent release model,MERGED,2019-08-08 22:11:47.000000000,2019-08-09 15:22:16.000000000,2019-08-09 15:22:16.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 23186}]","[{'number': 1, 'created': '2019-08-08 22:11:47.000000000', 'files': ['deliverables/train/murano-agent.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/0d1b4e6998db7be78c1b8e5ae658d4e299d03a6d', 'message': 'Change murano-agent release model\n\nSince murano-agent was only released once last cycle AND it has not\nyet been released this cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do a single\nrelease per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\n\nChange-Id: I8925c5de7e8ddebbc9b37d1fdd42dae35a1ec91f\n'}]",0,675484,0d1b4e6998db7be78c1b8e5ae658d4e299d03a6d,8,5,1,16708,,,0,"Change murano-agent release model

Since murano-agent was only released once last cycle AND it has not
yet been released this cycle yet either, we propose to change it to the
cycle-with-rc model which is better for deliverables that do a single
release per cycle.

There are three options for responding:

1) If you know you will only do one release this cycle, +1.
2) If you know you will do more than one, please release now and -1
this change.
3) If you have no idea when you will release, please please please
propose one BEFORE rc1 and -1 this change.

Change-Id: I8925c5de7e8ddebbc9b37d1fdd42dae35a1ec91f
",git fetch https://review.opendev.org/openstack/releases refs/changes/84/675484/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/murano-agent.yaml'],1,0d1b4e6998db7be78c1b8e5ae658d4e299d03a6d,murano-agent-model-change,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Freleases~master~Ifd86c2c956e5e17d44f48496794ce973b5ac54b4,openstack/releases,master,Ifd86c2c956e5e17d44f48496794ce973b5ac54b4,Change solum-dashboard release model,MERGED,2019-08-08 22:15:50.000000000,2019-08-09 15:22:15.000000000,2019-08-09 15:22:15.000000000,"[{'_account_id': 308}, {'_account_id': 2506}, {'_account_id': 11904}, {'_account_id': 14107}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 22:15:50.000000000', 'files': ['deliverables/train/solum-dashboard.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/544b3b1b205f63ed169cdadb893be06827b84c7f', 'message': 'Change solum-dashboard release model\n\nSince solum-dashboard was only released once last cycle AND it has not\nyet been released this cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do a single\nrelease per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\n\nChange-Id: Ifd86c2c956e5e17d44f48496794ce973b5ac54b4\n'}]",0,675487,544b3b1b205f63ed169cdadb893be06827b84c7f,8,5,1,16708,,,0,"Change solum-dashboard release model

Since solum-dashboard was only released once last cycle AND it has not
yet been released this cycle yet either, we propose to change it to the
cycle-with-rc model which is better for deliverables that do a single
release per cycle.

There are three options for responding:

1) If you know you will only do one release this cycle, +1.
2) If you know you will do more than one, please release now and -1
this change.
3) If you have no idea when you will release, please please please
propose one BEFORE rc1 and -1 this change.

Change-Id: Ifd86c2c956e5e17d44f48496794ce973b5ac54b4
",git fetch https://review.opendev.org/openstack/releases refs/changes/87/675487/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/solum-dashboard.yaml'],1,544b3b1b205f63ed169cdadb893be06827b84c7f,solum-dashboard-model-change,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Freleases~master~I2453e6f0708318c2a957322621155944e96eceab,openstack/releases,master,I2453e6f0708318c2a957322621155944e96eceab,Change ec2-api release model,MERGED,2019-08-08 21:54:18.000000000,2019-08-09 15:22:14.000000000,2019-08-09 15:22:14.000000000,"[{'_account_id': 308}, {'_account_id': 10234}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 21:54:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/0ef228645d333d5f79fa0875c1b87748983e840f', 'message': 'Change ec2-api release model\n\nSince blazar-dashboard was only released once last cycle AND it has not\nyet been released this cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do a single\nrelease per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\n\nChange-Id: I2453e6f0708318c2a957322621155944e96eceab\n'}, {'number': 2, 'created': '2019-08-08 21:57:48.000000000', 'files': ['deliverables/train/ec2-api.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/d69c657db86ec31025bdcb6f8d454d6a03ef25bd', 'message': 'Change ec2-api release model\n\nSince ec2-api was only released once last cycle AND it has not\nyet been released this cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do a single\nrelease per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\n\nChange-Id: I2453e6f0708318c2a957322621155944e96eceab\n'}]",0,675474,d69c657db86ec31025bdcb6f8d454d6a03ef25bd,9,4,2,16708,,,0,"Change ec2-api release model

Since ec2-api was only released once last cycle AND it has not
yet been released this cycle yet either, we propose to change it to the
cycle-with-rc model which is better for deliverables that do a single
release per cycle.

There are three options for responding:

1) If you know you will only do one release this cycle, +1.
2) If you know you will do more than one, please release now and -1
this change.
3) If you have no idea when you will release, please please please
propose one BEFORE rc1 and -1 this change.

Change-Id: I2453e6f0708318c2a957322621155944e96eceab
",git fetch https://review.opendev.org/openstack/releases refs/changes/74/675474/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/ec2-api.yaml'],1,0ef228645d333d5f79fa0875c1b87748983e840f,ec2-api-model-change,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Freleases~master~Ic0ecabccffc5332340beacb0ce576d86e03f1366,openstack/releases,master,Ic0ecabccffc5332340beacb0ce576d86e03f1366,Change monasca-kibana-plugin release model,MERGED,2019-08-08 22:05:49.000000000,2019-08-09 15:22:12.000000000,2019-08-09 15:22:12.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 16222}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 22:05:49.000000000', 'files': ['deliverables/train/monasca-kibana-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/75ed71dadddd44daa394b7a8403c04ee2a66f7c6', 'message': 'Change monasca-kibana-plugin release model\n\nSince monasca-kibana-plugin was only released once last cycle AND it has not\nyet been released this cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do a single\nrelease per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\n\nChange-Id: Ic0ecabccffc5332340beacb0ce576d86e03f1366\n'}]",0,675481,75ed71dadddd44daa394b7a8403c04ee2a66f7c6,8,4,1,16708,,,0,"Change monasca-kibana-plugin release model

Since monasca-kibana-plugin was only released once last cycle AND it has not
yet been released this cycle yet either, we propose to change it to the
cycle-with-rc model which is better for deliverables that do a single
release per cycle.

There are three options for responding:

1) If you know you will only do one release this cycle, +1.
2) If you know you will do more than one, please release now and -1
this change.
3) If you have no idea when you will release, please please please
propose one BEFORE rc1 and -1 this change.

Change-Id: Ic0ecabccffc5332340beacb0ce576d86e03f1366
",git fetch https://review.opendev.org/openstack/releases refs/changes/81/675481/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/monasca-kibana-plugin.yaml'],1,75ed71dadddd44daa394b7a8403c04ee2a66f7c6,monasca-kibana-plugin-model-change,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Freleases~master~I0a9c15c6cc83ea4b786f2b2cfc7ae346be6dcd42,openstack/releases,master,I0a9c15c6cc83ea4b786f2b2cfc7ae346be6dcd42,Release monasca-ui 1.16.0,MERGED,2019-08-09 07:17:37.000000000,2019-08-09 15:22:11.000000000,2019-08-09 15:22:11.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 07:17:37.000000000', 'files': ['deliverables/train/monasca-ui.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/748be11b2e2cee85b28971b71d26044af64bf71e', 'message': 'Release monasca-ui 1.16.0\n\nChange-Id: I0a9c15c6cc83ea4b786f2b2cfc7ae346be6dcd42\n'}]",0,675539,748be11b2e2cee85b28971b71d26044af64bf71e,7,3,1,16222,,,0,"Release monasca-ui 1.16.0

Change-Id: I0a9c15c6cc83ea4b786f2b2cfc7ae346be6dcd42
",git fetch https://review.opendev.org/openstack/releases refs/changes/39/675539/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/monasca-ui.yaml'],1,748be11b2e2cee85b28971b71d26044af64bf71e,monasca-ui,releases: - projects: - hash: f0231ab00f7e352fa8a9637a3e3a887f0d6ce374 repo: openstack/monasca-ui version: 1.16.0,,5,0
openstack%2Fopenstacksdk~master~Iead6c2ea1f58f76548b31107ae00c2e929ed3e83,openstack/openstacksdk,master,Iead6c2ea1f58f76548b31107ae00c2e929ed3e83,Add empty placement proxy,ABANDONED,2019-08-05 14:22:16.000000000,2019-08-09 15:11:06.000000000,,"[{'_account_id': 6873}, {'_account_id': 14070}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-05 14:22:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/d05700037bce8708eab24649c4d474fc89718bae', 'message': ""Add empty placement proxy\n\nThis should silence the warnings from sdk about not knowing about\nthe placement service. Also, use the new mechanism for skipping\nattempting to do discovery since it's simply not needed for\nplacement.\n\nChange-Id: Iead6c2ea1f58f76548b31107ae00c2e929ed3e83\n""}, {'number': 2, 'created': '2019-08-05 14:23:36.000000000', 'files': ['openstack/placement/_proxy.py', 'openstack/placement/__init__.py', 'openstack/placement/placement_service.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/e0e79438a5bf844925106599ad1033b2defe4c9b', 'message': ""Add empty placement proxy\n\nThis should silence the warnings from sdk about not knowing about\nthe placement service. Also, use the new mechanism for skipping\nattempting to do discovery since it's simply not needed for\nplacement.\n\nChange-Id: Iead6c2ea1f58f76548b31107ae00c2e929ed3e83\n""}]",2,674620,e0e79438a5bf844925106599ad1033b2defe4c9b,7,3,2,2,,,0,"Add empty placement proxy

This should silence the warnings from sdk about not knowing about
the placement service. Also, use the new mechanism for skipping
attempting to do discovery since it's simply not needed for
placement.

Change-Id: Iead6c2ea1f58f76548b31107ae00c2e929ed3e83
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/20/674620/2 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/placement/_proxy.py', 'openstack/placement/__init__.py', 'openstack/placement/placement_service.py']",3,d05700037bce8708eab24649c4d474fc89718bae,,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from openstack.placement import _proxy from openstack import service_description class PlacementService(service_description.ServiceDescription): """"""The Placement service."""""" def get_proxy_override(self, config): # Swift doesn't do version discovery. It doesn't need any of the # version code, so skip it. endpoint_override = ( config.get_endpoint(self.service_type) or config.get_endpoint_from_catalog(self.service_type)) config.config['placement_endpoint_override'] = endpoint_override return config.get_session_client( self.service_type, constructor=_proxy.Proxy, ) ",,47,0
openstack%2Freleases~master~I5bf4e27499aa80b95eef924f9b3d8a15c582389b,openstack/releases,master,I5bf4e27499aa80b95eef924f9b3d8a15c582389b,Release monasca-thresh 2.5.0,MERGED,2019-08-09 07:22:10.000000000,2019-08-09 15:08:37.000000000,2019-08-09 15:08:37.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 07:22:10.000000000', 'files': ['deliverables/train/monasca-thresh.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/153d5a706cf468ae3f78b42568a0831fbbc0aa88', 'message': 'Release monasca-thresh 2.5.0\n\nChange-Id: I5bf4e27499aa80b95eef924f9b3d8a15c582389b\n'}]",0,675541,153d5a706cf468ae3f78b42568a0831fbbc0aa88,7,3,1,16222,,,0,"Release monasca-thresh 2.5.0

Change-Id: I5bf4e27499aa80b95eef924f9b3d8a15c582389b
",git fetch https://review.opendev.org/openstack/releases refs/changes/41/675541/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/monasca-thresh.yaml'],1,153d5a706cf468ae3f78b42568a0831fbbc0aa88,,releases: - projects: - hash: b1409c391f72826baac7951a753a58672874d88f repo: openstack/monasca-thresh version: 2.5.0,,5,0
openstack%2Freleases~master~I3879445b530342de233766295f46de2e92e81499,openstack/releases,master,I3879445b530342de233766295f46de2e92e81499,Change cloudkitty-dashboard release model,MERGED,2019-08-08 21:56:01.000000000,2019-08-09 15:05:26.000000000,2019-08-09 15:05:25.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 23060}]","[{'number': 1, 'created': '2019-08-08 21:56:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/eeb9eb5d6ba85561e3e6a2b3cf47db5d38e3d388', 'message': 'Change cloudkitty-dashboard release model\n\nSince blazar-dashboard was only released once last cycle\n(and the release before)AND it has not yet been released\nthis cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do\na single release per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\nChange-Id: I3879445b530342de233766295f46de2e92e81499\n'}, {'number': 2, 'created': '2019-08-08 21:58:10.000000000', 'files': ['deliverables/train/cloudkitty-dashboard.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/9b8c65c0c2dd6373fcead1da37b4012ee1190239', 'message': 'Change cloudkitty-dashboard release model\n\nSince cloudkitty-dashboard was only released once last cycle\n(and the release before)AND it has not yet been released\nthis cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do\na single release per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\nChange-Id: I3879445b530342de233766295f46de2e92e81499\n'}]",0,675476,9b8c65c0c2dd6373fcead1da37b4012ee1190239,9,4,2,16708,,,0,"Change cloudkitty-dashboard release model

Since cloudkitty-dashboard was only released once last cycle
(and the release before)AND it has not yet been released
this cycle yet either, we propose to change it to the
cycle-with-rc model which is better for deliverables that do
a single release per cycle.

There are three options for responding:

1) If you know you will only do one release this cycle, +1.
2) If you know you will do more than one, please release now and -1
this change.
3) If you have no idea when you will release, please please please
propose one BEFORE rc1 and -1 this change.
Change-Id: I3879445b530342de233766295f46de2e92e81499
",git fetch https://review.opendev.org/openstack/releases refs/changes/76/675476/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/cloudkitty-dashboard.yaml'],1,eeb9eb5d6ba85561e3e6a2b3cf47db5d38e3d388,cloudkitt-dashboard-model-change,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Freleases~master~I628159936211aaee956963e3fabf58351ca8fb9a,openstack/releases,master,I628159936211aaee956963e3fabf58351ca8fb9a,Release 3.16.0 of keystoneauth,MERGED,2019-08-08 16:22:38.000000000,2019-08-09 15:02:08.000000000,2019-08-09 15:02:08.000000000,"[{'_account_id': 308}, {'_account_id': 2903}, {'_account_id': 8482}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 16:22:38.000000000', 'files': ['deliverables/train/keystoneauth.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/52f4d163783b79e0d69e1fb3fe91ee232be5f4a7', 'message': 'Release 3.16.0 of keystoneauth\n\nChange-Id: I628159936211aaee956963e3fabf58351ca8fb9a\n'}]",0,675402,52f4d163783b79e0d69e1fb3fe91ee232be5f4a7,9,5,1,2,,,0,"Release 3.16.0 of keystoneauth

Change-Id: I628159936211aaee956963e3fabf58351ca8fb9a
",git fetch https://review.opendev.org/openstack/releases refs/changes/02/675402/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/keystoneauth.yaml'],1,52f4d163783b79e0d69e1fb3fe91ee232be5f4a7,, - projects: - repo: openstack/keystoneauth hash: 8e59fb20b35d024dd7a01439dce0e90f92eba886 tarball-base: keystoneauth1 version: 3.16.0,,5,0
openstack%2Freleases~master~I05346253e4abd635e2033e82db5587b72e6dbd43,openstack/releases,master,I05346253e4abd635e2033e82db5587b72e6dbd43,Release Vitrage deliverables for Train,MERGED,2019-08-08 08:21:28.000000000,2019-08-09 15:02:07.000000000,2019-08-09 15:02:07.000000000,"[{'_account_id': 308}, {'_account_id': 1736}, {'_account_id': 11904}, {'_account_id': 19159}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 08:21:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/8d54f8e025f7a87bd72626769f63339c95a61088', 'message': 'Release Vitrage deliverables for Train\n\nChange-Id: I05346253e4abd635e2033e82db5587b72e6dbd43\n'}, {'number': 2, 'created': '2019-08-08 08:37:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/28e3cbb1e7507c9dfaf46ca4349894033ceb60e7', 'message': 'Release Vitrage deliverables for Train\n\nChange-Id: I05346253e4abd635e2033e82db5587b72e6dbd43\n'}, {'number': 3, 'created': '2019-08-08 09:00:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/0d305a27cc0f52a733a0b710f5d7295771a0162a', 'message': 'Release Vitrage deliverables for Train\n\nChange-Id: I05346253e4abd635e2033e82db5587b72e6dbd43\n'}, {'number': 4, 'created': '2019-08-08 09:16:53.000000000', 'files': ['deliverables/train/python-vitrageclient.yaml', 'deliverables/train/vitrage-dashboard.yaml', 'deliverables/train/vitrage.yaml', 'deliverables/train/vitrage-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/4e68693cb7e7c556ef7cb7da08beba7066a3cc99', 'message': 'Release Vitrage deliverables for Train\n\nChange-Id: I05346253e4abd635e2033e82db5587b72e6dbd43\n'}]",0,675269,4e68693cb7e7c556ef7cb7da08beba7066a3cc99,14,5,4,19134,,,0,"Release Vitrage deliverables for Train

Change-Id: I05346253e4abd635e2033e82db5587b72e6dbd43
",git fetch https://review.opendev.org/openstack/releases refs/changes/69/675269/4 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/train/python-vitrageclient.yaml', 'deliverables/train/vitrage-dashboard.yaml', 'deliverables/train/vitrage.yaml', 'deliverables/train/vitrage-tempest-plugin.yaml']",4,8d54f8e025f7a87bd72626769f63339c95a61088,release_vitrage,releases: - version: 3.0.0 projects: - repo: openstack/vitrage-tempest-plugin hash: d5f6909995f8fad5ff947f2aab32be45873b3ef4,,20,0
openstack%2Fnova~stable%2Fqueens~Ie217523a8969326b27930d7f74e50e9b352ab7a1,openstack/nova,stable/queens,Ie217523a8969326b27930d7f74e50e9b352ab7a1,Stabilize unshelve notification sample tests,MERGED,2019-08-05 15:33:46.000000000,2019-08-09 14:38:24.000000000,2019-08-09 14:38:23.000000000,"[{'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-05 15:33:46.000000000', 'files': ['nova/tests/functional/notification_sample_tests/test_instance.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/8afc39a2c748a8fde070493dd5633788f782c69a', 'message': ""Stabilize unshelve notification sample tests\n\nThe notification sample test for unshelve waits for the instance to\nreach ACTIVE state and then asserts if unshelve.end notification is\nemitted properly. However the instance.vm_state is set to ACTIVE earlier[1]\nthan emitting the unshelve.end notification[2]. This can cause two\ndifferent test case failure.\n\n1) _test_unshelve_server() fails with no ushelve.end notification\nreceived.\n\n2) _test_shelve_and_shelve_offload_server() also has a unshelve action\nat the end and that test step also only waits for the the ACTIVE state.\nSo the unshelve.end notification from the end of\n_test_shelve_and_shelve_offload_server() can bleed into the\n_test_unshelve_server() step causing that it receive one more\nnotifications.\n\nSo this patch adds an extra\nself._wait_for_notification('instance.unshelve.end') call to each test\nstep to prevent the instability.\n\n[1] https://github.com/openstack/nova/blob/5c6c1f8f/nova/compute/manager.py#L5322-L5326\n[2] https://github.com/openstack/nova/blob/5c6c1f8f/nova/compute/manager.py#L5329\n[3] https://github.com/openstack/nova/blob/5c6c1f8f/nova/tests/functional/notification_sample_tests/test_instance.py#L836\n\nConflicts:\n      nova/tests/functional/notification_sample_tests/test_instance.py\nConflicts due to:\n* I1a0afa0e8740c229db77c18b932e316196880de5\n\nCloses-Bug: #1835070\n\nChange-Id: Ie217523a8969326b27930d7f74e50e9b352ab7a1\n(cherry picked from commit 40f1e7c4c22dc6023614b34f28bb7fc416b668a8)\n(cherry picked from commit 3bc6ff029ff24083844db363010988d8d08cff00)\n(cherry picked from commit a85ce04fa39e60e672e4fa2d7912f6880079c6ef)\n""}]",0,674636,8afc39a2c748a8fde070493dd5633788f782c69a,9,5,1,9708,,,0,"Stabilize unshelve notification sample tests

The notification sample test for unshelve waits for the instance to
reach ACTIVE state and then asserts if unshelve.end notification is
emitted properly. However the instance.vm_state is set to ACTIVE earlier[1]
than emitting the unshelve.end notification[2]. This can cause two
different test case failure.

1) _test_unshelve_server() fails with no ushelve.end notification
received.

2) _test_shelve_and_shelve_offload_server() also has a unshelve action
at the end and that test step also only waits for the the ACTIVE state.
So the unshelve.end notification from the end of
_test_shelve_and_shelve_offload_server() can bleed into the
_test_unshelve_server() step causing that it receive one more
notifications.

So this patch adds an extra
self._wait_for_notification('instance.unshelve.end') call to each test
step to prevent the instability.

[1] https://github.com/openstack/nova/blob/5c6c1f8f/nova/compute/manager.py#L5322-L5326
[2] https://github.com/openstack/nova/blob/5c6c1f8f/nova/compute/manager.py#L5329
[3] https://github.com/openstack/nova/blob/5c6c1f8f/nova/tests/functional/notification_sample_tests/test_instance.py#L836

Conflicts:
      nova/tests/functional/notification_sample_tests/test_instance.py
Conflicts due to:
* I1a0afa0e8740c229db77c18b932e316196880de5

Closes-Bug: #1835070

Change-Id: Ie217523a8969326b27930d7f74e50e9b352ab7a1
(cherry picked from commit 40f1e7c4c22dc6023614b34f28bb7fc416b668a8)
(cherry picked from commit 3bc6ff029ff24083844db363010988d8d08cff00)
(cherry picked from commit a85ce04fa39e60e672e4fa2d7912f6880079c6ef)
",git fetch https://review.opendev.org/openstack/nova refs/changes/36/674636/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/notification_sample_tests/test_instance.py'],1,8afc39a2c748a8fde070493dd5633788f782c69a,bug/1835070, self._wait_for_notification('instance.unshelve.end') self._wait_for_notification('instance.unshelve.end'),,2,0
openstack%2Fplacement~master~I3e8167e5d09aeb2ae68282bc0378bee6d956a286,openstack/placement,master,I3e8167e5d09aeb2ae68282bc0378bee6d956a286,"Add __copy__ method to AllocationRequest{,Resource}",MERGED,2019-08-08 15:02:03.000000000,2019-08-09 14:38:20.000000000,2019-08-09 14:38:20.000000000,"[{'_account_id': 9708}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 15:02:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/50fe7a4cb4113d0cc13be9eb313d8e477042a42f', 'message': ""Add __copy__ method to AllocationRequest{,Resource}\n\nIt turns out that when Python runs copy.copy on an object it does\na lot of unnecessary work that can be avoided by implementing a\n__copy__ method that essentially does a clone(), creating a new\nobject with the same values. This is considered the idiomatic form\nof clone.\n\nThat unnecessary work shows up quite significantly in the\n_consolidate_allocation_requests method in allocation_candidate.py where\nAllocationRequestResource objects get copied, alot. The use of __copy__\nmore than halves the time consume by _consolidate_allocation_requests.\n\nThere is another copy.copy, in _alloc_candidates_single_provider in the\nsame file, this time copying AllocationRequest objects. This is only\ndone when a shared provider is involved, and we haven't been doing scale\ntesting for those (yet) but since we're in that domain I've gone ahead\nand pre-emptively added a __copy__ to that object too, to prepare for\nthe eventually work of many shared disks.\n\nChange-Id: I3e8167e5d09aeb2ae68282bc0378bee6d956a286\n""}, {'number': 2, 'created': '2019-08-08 17:08:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/f00db15570ead06b9a68cdfa0fae0675fbed35ba', 'message': ""Add __copy__ method to AllocationRequest{,Resource}\n\nIt turns out that when Python runs copy.copy on an object it does\na lot of unnecessary work that can be avoided by implementing a\n__copy__ method that essentially does a clone(), creating a new\nobject with the same values. This is considered the idiomatic form\nof clone.\n\nThat unnecessary work shows up quite significantly in the\n_consolidate_allocation_requests method in allocation_candidate.py where\nAllocationRequestResource objects get copied, a lot. The use of __copy__\nmore than halves the time consumed by _consolidate_allocation_requests.\n\nThere is another copy.copy, in _alloc_candidates_single_provider in the\nsame file, this time copying AllocationRequest objects. This is only\ndone when a shared provider is involved, and we haven't been doing scale\ntesting for those (yet) but since we're in that domain I've gone ahead\nand pre-emptively added a __copy__ to that object too, to prepare for\nthe eventual work of many shared disks.\n\nChange-Id: I3e8167e5d09aeb2ae68282bc0378bee6d956a286\n""}, {'number': 3, 'created': '2019-08-08 21:34:37.000000000', 'files': ['placement/objects/allocation_candidate.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/1a7d39beed138406267d214580ba07c255fccd62', 'message': ""Add __copy__ method to AllocationRequest{,Resource}\n\nIt turns out that when Python runs copy.copy on an object it does\na lot of unnecessary work that can be avoided by implementing a\n__copy__ method that essentially does a clone(), creating a new\nobject with the same values. This is considered the idiomatic form\nof clone.\n\nThat unnecessary work shows up quite significantly in the\n_consolidate_allocation_requests method in allocation_candidate.py where\nAllocationRequestResource objects get copied, a lot. The use of __copy__\nmore than halves the time consumed by _consolidate_allocation_requests.\n\nThere is another copy.copy, in _alloc_candidates_single_provider in the\nsame file, this time copying AllocationRequest objects. This is only\ndone when a shared provider is involved, and we haven't been doing scale\ntesting for those (yet) but since we're in that domain I've gone ahead\nand pre-emptively added a __copy__ to that object too, to prepare for\nthe eventual work of many shared disks.\n\nChange-Id: I3e8167e5d09aeb2ae68282bc0378bee6d956a286\n""}]",6,675372,1a7d39beed138406267d214580ba07c255fccd62,11,4,3,11564,,,0,"Add __copy__ method to AllocationRequest{,Resource}

It turns out that when Python runs copy.copy on an object it does
a lot of unnecessary work that can be avoided by implementing a
__copy__ method that essentially does a clone(), creating a new
object with the same values. This is considered the idiomatic form
of clone.

That unnecessary work shows up quite significantly in the
_consolidate_allocation_requests method in allocation_candidate.py where
AllocationRequestResource objects get copied, a lot. The use of __copy__
more than halves the time consumed by _consolidate_allocation_requests.

There is another copy.copy, in _alloc_candidates_single_provider in the
same file, this time copying AllocationRequest objects. This is only
done when a shared provider is involved, and we haven't been doing scale
testing for those (yet) but since we're in that domain I've gone ahead
and pre-emptively added a __copy__ to that object too, to prepare for
the eventual work of many shared disks.

Change-Id: I3e8167e5d09aeb2ae68282bc0378bee6d956a286
",git fetch https://review.opendev.org/openstack/placement refs/changes/72/675372/1 && git format-patch -1 --stdout FETCH_HEAD,['placement/objects/allocation_candidate.py'],1,50fe7a4cb4113d0cc13be9eb313d8e477042a42f,cd/arr-clone," def __copy__(self): # This is shallow copy, so resource_requests and mappings are the # same objects as prior to the copy. return self.__class__( anchor_root_provider_uuid=self.anchor_root_provider_uuid, use_same_provider=self.use_same_provider, resource_requests=self.resource_requests, mappings=self.mappings ) def __copy__(self): # This is shallow copy, so resource_provider and resource_class are # the same objects as prior to the copy. return self.__class__( resource_provider=self.resource_provider, resource_class=self.resource_class, amount=self.amount) ",,18,0
openstack%2Fkolla-cli~master~Ie08058f82d59811eedfbf97192e2c0e4f766faf1,openstack/kolla-cli,master,Ie08058f82d59811eedfbf97192e2c0e4f766faf1,Use kolla-cli owner url as the home page,MERGED,2019-07-24 06:37:14.000000000,2019-08-09 14:36:23.000000000,2019-08-09 14:36:23.000000000,"[{'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 28614}, {'_account_id': 28743}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-07-24 06:37:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/351c5fc9e3b3375516ec026ed65c307099c9415f', 'message': 'Update kolla command to kolla-cli action command\n\nChange-Id: Ie08058f82d59811eedfbf97192e2c0e4f766faf1\n'}, {'number': 2, 'created': '2019-07-24 06:37:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/afd42b408f457d45210c517536d8c607e0af9890', 'message': 'Update kolla command to kolla-cli action command\n\nChange-Id: Ie08058f82d59811eedfbf97192e2c0e4f766faf1\n'}, {'number': 3, 'created': '2019-07-24 06:39:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/1aeb4f0bb340b292bc369d3ba8f4ac0c4284f70f', 'message': 'Update kolla command to kolla-cli action command\n\nChange-Id: Ie08058f82d59811eedfbf97192e2c0e4f766faf1\n'}, {'number': 4, 'created': '2019-07-24 06:44:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/4063f5e8e13cc71db361b980375b56041dfc3c80', 'message': 'Update kolla command to kolla-cli action command\n\nChange-Id: Ie08058f82d59811eedfbf97192e2c0e4f766faf1\n'}, {'number': 5, 'created': '2019-08-06 08:45:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/6a21fb453b035b2843f4fc0df4fc744ec703546e', 'message': 'Update kolla command to kolla-cli action command\n\nChange-Id: Ie08058f82d59811eedfbf97192e2c0e4f766faf1\n'}, {'number': 6, 'created': '2019-08-08 04:25:40.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/fe33d212ce4077a029268d4923d54b58100ff79d', 'message': ""Use kolla-cli owner url as the home page\n\nnow, kolla-cli's home page is reachable, it completed in\nhttps://review.opendev.org/#/c/673871/\n\nChange-Id: Ie08058f82d59811eedfbf97192e2c0e4f766faf1\n""}]",1,672406,fe33d212ce4077a029268d4923d54b58100ff79d,22,5,6,22165,,,0,"Use kolla-cli owner url as the home page

now, kolla-cli's home page is reachable, it completed in
https://review.opendev.org/#/c/673871/

Change-Id: Ie08058f82d59811eedfbf97192e2c0e4f766faf1
",git fetch https://review.opendev.org/openstack/kolla-cli refs/changes/06/672406/6 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,351c5fc9e3b3375516ec026ed65c307099c9415f,, action_deploy = kolla_cli.commands.kolla_action:Deploy action_pull = kolla_cli.commands.kolla_action:Pull action_genconfig = kolla_cli.commands.kolla_action:Genconfig action_reconfigure = kolla_cli.commands.kolla_action:Reconfigure action_check = kolla_cli.commands.kolla_action:Check action_upgrade = kolla_cli.commands.kolla_action:Upgrade, deploy = kolla_cli.commands.kolla_action:Deploy genconfig = kolla_cli.commands.kolla_action:Genconfig pull = kolla_cli.commands.kolla_action:Pull reconfigure = kolla_cli.commands.kolla_action:Reconfigure check = kolla_cli.commands.kolla_action:Check upgrade = kolla_cli.commands.kolla_action:Upgrade,6,6
openstack%2Fkolla-cli~master~Iad1e78be8cba0e378a623d17ad408b3e43a48daf,openstack/kolla-cli,master,Iad1e78be8cba0e378a623d17ad408b3e43a48daf,Use inventory object to validate the hosts and services,MERGED,2019-08-09 07:23:27.000000000,2019-08-09 14:30:25.000000000,2019-08-09 14:30:25.000000000,"[{'_account_id': 17130}, {'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 28743}]","[{'number': 1, 'created': '2019-08-09 07:23:27.000000000', 'files': ['kolla_cli/common/ansible/utils.py', 'kolla_cli/api/exceptions.py'], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/6cc525c2ec2607207187405dd0c22093755d5c94', 'message': 'Use inventory object to validate the hosts and services\n\ninventory complete the hosts and services check, we should use it\nrather than complete it again[1]\n\n[1]: https://review.opendev.org/#/c/673537/\n\nChange-Id: Iad1e78be8cba0e378a623d17ad408b3e43a48daf\n'}]",0,675542,6cc525c2ec2607207187405dd0c22093755d5c94,9,4,1,30356,,,0,"Use inventory object to validate the hosts and services

inventory complete the hosts and services check, we should use it
rather than complete it again[1]

[1]: https://review.opendev.org/#/c/673537/

Change-Id: Iad1e78be8cba0e378a623d17ad408b3e43a48daf
",git fetch https://review.opendev.org/openstack/kolla-cli refs/changes/42/675542/1 && git format-patch -1 --stdout FETCH_HEAD,"['kolla_cli/common/ansible/utils.py', 'kolla_cli/api/exceptions.py']",2,6cc525c2ec2607207187405dd0c22093755d5c94,,,"class InvalidHosts(ClientException): """"""Invalid hosts"""""" pass class InvalidServices(ClientException): """"""Invalid services"""""" pass ",2,26
openstack%2Fkolla-cli~master~I8f636570a9756a004f186d806e4451a87f046f18,openstack/kolla-cli,master,I8f636570a9756a004f186d806e4451a87f046f18,Move kolla prechecks action into kolla_actiom model,MERGED,2019-08-07 16:10:37.000000000,2019-08-09 14:28:06.000000000,2019-08-09 14:28:06.000000000,"[{'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 28471}, {'_account_id': 28743}]","[{'number': 1, 'created': '2019-08-07 16:10:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/f1fcdb1735bf6fd8f140f3dad818b8a05cd35059', 'message': 'Move kolla prechecks action into kolla_actiom model\n\n1. prechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host into kolla_action\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 2, 'created': '2019-08-08 02:37:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/445e86ad4eea8d886eaf8f80f0084bfbdfd6f089', 'message': 'Move kolla prechecks action into kolla_actiom model\n\n1. prechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host into kolla_action\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 3, 'created': '2019-08-08 02:57:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/4d0d6a0fd9b885602a43615a745397f432bbe8e0', 'message': 'Move kolla prechecks action into kolla_actiom model\n\nPrechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 4, 'created': '2019-08-08 03:39:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/294281b897e661f72fef6645542278630639abdd', 'message': 'Move kolla prechecks action into kolla_actiom model\n\nPrechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 5, 'created': '2019-08-08 14:05:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/88f660bfb514b446a891b6754a812636484329d3', 'message': 'Move kolla prechecks action into kolla_actiom model\n\nPrechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 6, 'created': '2019-08-08 15:17:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/9d88db5c85451559b449cb61ebdb8a4b0d6479cf', 'message': 'Move kolla prechecks action into kolla_actiom model\n\n1. Prechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n2. Add prechecks action with hosts and services flag\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 7, 'created': '2019-08-08 15:23:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/872168030e33ab514f4e50ae2b003bce63d1fff3', 'message': 'Move kolla prechecks action into kolla_actiom model\n\n1. Prechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n2. Add prechecks action with hosts and services flag\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 8, 'created': '2019-08-08 15:28:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/590f4232f46befb4af30062759b964e6040bda12', 'message': 'Move kolla prechecks action into kolla_actiom model\n\n1. Prechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n2. Add prechecks action with hosts and services flag\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 9, 'created': '2019-08-08 15:29:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/a146ab41093b683044deddedee30b3a19c403d26', 'message': 'Move kolla prechecks action into kolla_actiom model\n\n1. Prechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n2. Add prechecks action unit test with hosts and services flag\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}, {'number': 10, 'created': '2019-08-08 16:10:31.000000000', 'files': ['kolla_cli/api/host.py', 'kolla_cli/common/ansible/actions.py', 'kolla_cli/tests/unit/test_prechecks_cmd.py', 'kolla_cli/api/control_plane.py', 'kolla_cli/commands/host.py', 'kolla_cli/tests/functional/test_host.py', 'setup.cfg', 'kolla_cli/tests/unit/test_host_cmd.py', 'kolla_cli/commands/kolla_action.py'], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/661f3f51d3f88fbd213e0c2fbd1e192893c34dda', 'message': 'Move kolla prechecks action into kolla_actiom model\n\n1. Prechecks action is one core action of kolla action command,\nit should be in kolla_action rather than host, this PS to\nmove it from host model into kolla_action\n2. Add prechecks action unit test with hosts and services flag\n\nChange-Id: I8f636570a9756a004f186d806e4451a87f046f18\n'}]",3,675140,661f3f51d3f88fbd213e0c2fbd1e192893c34dda,29,4,10,30356,,,0,"Move kolla prechecks action into kolla_actiom model

1. Prechecks action is one core action of kolla action command,
it should be in kolla_action rather than host, this PS to
move it from host model into kolla_action
2. Add prechecks action unit test with hosts and services flag

Change-Id: I8f636570a9756a004f186d806e4451a87f046f18
",git fetch https://review.opendev.org/openstack/kolla-cli refs/changes/40/675140/5 && git format-patch -1 --stdout FETCH_HEAD,"['kolla_cli/commands/host.py', 'setup.cfg', 'kolla_cli/commands/kolla_action.py']",3,f1fcdb1735bf6fd8f140f3dad818b8a05cd35059,,"class Prechecks(Command): """"""Do pre-deployment checks for hosts."""""" def get_parser(self, prog_name): parser = super(Pull, self).get_parser(prog_name) parser.add_argument('--hosts', nargs='?', metavar='<host_list>', help=u._('Pull host list')) parser.add_argument('--services', nargs='?', metavar='<service_list>', help=u._('Pull service list')) return parser def take_action(self, parsed_args): hosts = [] services = [] try: verbose_level = self.app.options.verbose_level if parsed_args.hosts: host_list = parsed_args.hosts.strip() hosts = host_list.split(',') if parsed_args.services: service_list = parsed_args.services.strip() services = service_list.split(',') job = CLIENT.prechecks(verbose_level, hosts, services) status = job.wait() handers_action_result(job, status, verbose_level) except Exception: raise Exception(traceback.format_exc()) ",,48,27
openstack%2Fkolla-ansible~master~I74427ce9b937c42393d86574614603bd788606af,openstack/kolla-ansible,master,I74427ce9b937c42393d86574614603bd788606af,"Fix FWaaS service provider (v2, Stein issue)",MERGED,2019-08-08 18:32:51.000000000,2019-08-09 14:26:33.000000000,2019-08-09 12:05:56.000000000,"[{'_account_id': 14826}, {'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-08 18:32:51.000000000', 'files': ['ansible/roles/neutron/templates/fwaas_driver.ini.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/85a5fb55c4e8ec75987db2d7745439604c0301a7', 'message': 'Fix FWaaS service provider (v2, Stein issue)\n\nBecause we merged both [1] and [2] in master,\nwe got broken FWaaS.\nThis patch unbreaks it and is required to backport\nto Stein due to [2] backport waiting for merge,\nwhile [1] is already backported.\n\n[1] https://review.opendev.org/661704\n[2] https://review.opendev.org/668406\n\nChange-Id: I74427ce9b937c42393d86574614603bd788606af\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n'}]",0,675439,85a5fb55c4e8ec75987db2d7745439604c0301a7,12,6,1,30491,,,0,"Fix FWaaS service provider (v2, Stein issue)

Because we merged both [1] and [2] in master,
we got broken FWaaS.
This patch unbreaks it and is required to backport
to Stein due to [2] backport waiting for merge,
while [1] is already backported.

[1] https://review.opendev.org/661704
[2] https://review.opendev.org/668406

Change-Id: I74427ce9b937c42393d86574614603bd788606af
Signed-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/39/675439/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/neutron/templates/fwaas_driver.ini.j2'],1,85a5fb55c4e8ec75987db2d7745439604c0301a7,fix-fwaas-v2,,{% if neutron_fwaas_version == 'v1' %} service_provider = FIREWALL:Iptables:neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver:default {% elif neutron_fwaas_version == 'v2' %}{% endif %},0,4
openstack%2Ftripleo-puppet-elements~master~I6e7c0b0ce266d359fc6db595b0201c43b3b40fc3,openstack/tripleo-puppet-elements,master,I6e7c0b0ce266d359fc6db595b0201c43b3b40fc3,Bump the openstackdocstheme extension to 1.20,MERGED,2019-07-29 07:52:05.000000000,2019-08-09 14:14:00.000000000,2019-08-09 14:14:00.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 25402}]","[{'number': 1, 'created': '2019-07-29 07:52:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-puppet-elements/commit/897d77e5e084b37d0fd102da5ffa0d5d60843a39', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: I6e7c0b0ce266d359fc6db595b0201c43b3b40fc3\n'}, {'number': 2, 'created': '2019-08-01 02:41:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-puppet-elements/commit/15e86edc888cc16a05a91c8a09d50c6ce7057983', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: I6e7c0b0ce266d359fc6db595b0201c43b3b40fc3\n'}, {'number': 3, 'created': '2019-08-09 08:00:48.000000000', 'files': ['test-requirements.txt', 'doc/source/conf.py', 'releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/tripleo-puppet-elements/commit/d155a90890e7794c073f6441e710f1f23f0f7ad1', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: I6e7c0b0ce266d359fc6db595b0201c43b3b40fc3\n'}]",0,673225,d155a90890e7794c073f6441e710f1f23f0f7ad1,15,4,3,27822,,,0,"Bump the openstackdocstheme extension to 1.20

Some options are now automatically configured by the version 1.20:
- project
- html_last_updated_fmt
- latex_engine
- latex_elements
- version
- release.

Change-Id: I6e7c0b0ce266d359fc6db595b0201c43b3b40fc3
",git fetch https://review.opendev.org/openstack/tripleo-puppet-elements refs/changes/25/673225/2 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'doc/source/conf.py', 'releasenotes/source/conf.py']",3,897d77e5e084b37d0fd102da5ffa0d5d60843a39,openstackdocstheme,,"project = u'tripleo-puppet-elements Release Notes'# The version info for the project you're documenting, acts as replacement for # |version| and |release|, also used in various other places throughout the # built documents. # # The full version, including alpha/beta/rc tags. release = '' # The short X.Y version. version = '' latex_elements = { # The paper size ('letterpaper' or 'a4paper'). #'papersize': 'letterpaper', # The font size ('10pt', '11pt' or '12pt'). #'pointsize': '10pt', # Additional stuff for the LaTeX preamble. #'preamble': '', } ",1,35
openstack%2Fpuppet-tripleo~master~I8148a039ab9dcbc97baff141aae6ebab4c27e16d,openstack/puppet-tripleo,master,I8148a039ab9dcbc97baff141aae6ebab4c27e16d,Add missing base apache configs when internal TLS,MERGED,2019-08-01 15:11:38.000000000,2019-08-09 14:13:59.000000000,2019-08-09 14:13:59.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-01 15:11:38.000000000', 'files': ['manifests/profile/base/swift/proxy.pp', 'manifests/profile/base/nova/ec2api.pp', 'manifests/profile/base/neutron/server.pp', 'manifests/profile/base/glance/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/3a5294ea9aa61d713632e031266dc9383c6bc8ec', 'message': 'Add missing base apache configs when internal TLS\n\nSome services are missing the base apache configuration, when\nrunning with TLS and under WSGI. Address that in its base\nprofiles.\n\nRelated-Bug: #1835414\n\nChange-Id: I8148a039ab9dcbc97baff141aae6ebab4c27e16d\nSigned-off-by: Bogdan Dobrelya <bdobreli@redhat.com>\n'}]",2,674069,3a5294ea9aa61d713632e031266dc9383c6bc8ec,35,5,1,6926,,,0,"Add missing base apache configs when internal TLS

Some services are missing the base apache configuration, when
running with TLS and under WSGI. Address that in its base
profiles.

Related-Bug: #1835414

Change-Id: I8148a039ab9dcbc97baff141aae6ebab4c27e16d
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/69/674069/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/swift/proxy.pp', 'manifests/profile/base/nova/ec2api.pp', 'manifests/profile/base/neutron/server.pp', 'manifests/profile/base/glance/api.pp']",4,3a5294ea9aa61d713632e031266dc9383c6bc8ec,bug/1835414, include ::tripleo::profile::base::apache,,4,0
openstack%2Frpm-packaging~master~I770c38037b2f6fd356061a20e7095e72080a238b,openstack/rpm-packaging,master,I770c38037b2f6fd356061a20e7095e72080a238b,python-ironic-inspector-client: Update to 3.6.1; move to singlespec,MERGED,2019-08-08 15:04:02.000000000,2019-08-09 14:06:08.000000000,2019-08-09 14:06:08.000000000,"[{'_account_id': 6593}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 15:04:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/3e32c8312e875a6c3621e534cab7837423aa0108', 'message': 'python-ironic-inspector-client: Update to 3.6.1; move to singlespec\n\nChange-Id: I770c38037b2f6fd356061a20e7095e72080a238b\n'}, {'number': 2, 'created': '2019-08-09 07:53:35.000000000', 'files': ['openstack/python-ironic-inspector-client/python-ironic-inspector-client.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/e756324d98c3b0b7198b1db94d5ac1d87c604978', 'message': 'python-ironic-inspector-client: Update to 3.6.1; move to singlespec\n\nChange-Id: I770c38037b2f6fd356061a20e7095e72080a238b\n'}]",0,675375,e756324d98c3b0b7198b1db94d5ac1d87c604978,12,4,2,7102,,,0,"python-ironic-inspector-client: Update to 3.6.1; move to singlespec

Change-Id: I770c38037b2f6fd356061a20e7095e72080a238b
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/75/675375/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack/python-ironic-inspector-client/python-ironic-inspector-client.spec.j2'],1,3e32c8312e875a6c3621e534cab7837423aa0108,,"{% set upstream_version = upstream_version('3.6.1') %}BuildRequires: {{ py2pkg('fixtures', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('mock', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('python-openstackclient', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('openstackdocstheme', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('osc-lib', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('oslo.concurrency', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('reno', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('requests-mock', py_versions=['py2', 'py3']) }} BuildRequires: {{ py2pkg('testrepository', py_versions=['py2', 'py3']) }} Requires: {{ py2pkg('PyYAML') }}Requires: {{ py2pkg('python-openstackclient') }}%python_subpackages%python_build%python_install%{python_expand rm -rf .testrepository $python -m unittest discover ironic_inspector_client } %files %{python_files}%{python_sitelib}/ironic_inspector_client %{python_sitelib}/*.egg-info",{% set upstream_version = upstream_version('3.5.0') %}BuildRequires: {{ py2pkg('devel') }} BuildRequires: {{ py2pkg('fixtures') }} BuildRequires: {{ py2pkg('mock') }} BuildRequires: {{ py2pkg('python-openstackclient') }} BuildRequires: {{ py2pkg('openstackdocstheme') }} BuildRequires: {{ py2pkg('osc-lib') }} BuildRequires: {{ py2pkg('oslo.concurrency') }} BuildRequires: {{ py2pkg('reno') }} BuildRequires: {{ py2pkg('requests-mock') }} BuildRequires: {{ py2pkg('testrepository') }}%{py2_build}%{py2_install}%{__python2} setup.py test %files%{python2_sitelib}/ironic_inspector_client %{python2_sitelib}/*.egg-info,21,17
openstack%2Fkuryr-kubernetes~master~Iddc03090dc8a847abe4afa2bed0900f0c7cf6936,openstack/kuryr-kubernetes,master,Iddc03090dc8a847abe4afa2bed0900f0c7cf6936,Ensure namespace network resources are cleaned up,MERGED,2019-07-18 14:14:17.000000000,2019-08-09 14:04:41.000000000,2019-08-09 14:04:41.000000000,"[{'_account_id': 6598}, {'_account_id': 11600}, {'_account_id': 14352}, {'_account_id': 17130}, {'_account_id': 22348}, {'_account_id': 23567}, {'_account_id': 27032}]","[{'number': 1, 'created': '2019-07-18 14:14:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/d103a40dbed97b7f7f01c2626ea58fb44387690d', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}, {'number': 2, 'created': '2019-07-29 08:37:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/f30285b19e8ea73204ea5b7c24a17096838c84dc', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}, {'number': 3, 'created': '2019-08-01 09:04:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/51f612d20b0155cc2489df45593ebd4a7be7a889', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}, {'number': 4, 'created': '2019-08-01 09:07:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/5e09ee6cd4149edcb8c347a34d2b1c303cfddd61', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}, {'number': 5, 'created': '2019-08-06 07:04:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/6d3f7449c14c75ffdd40c96291a6f6dc13b6cf10', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}, {'number': 6, 'created': '2019-08-07 16:38:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/3aaaa0965d6ffabfc425ec7d4a7790f92c46b6fa', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}, {'number': 7, 'created': '2019-08-08 07:43:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/06dfd02c8e3ef3caf6aa802a068d877b6254e91b', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}, {'number': 8, 'created': '2019-08-09 09:06:57.000000000', 'files': ['kuryr_kubernetes/controller/drivers/utils.py', 'kuryr_kubernetes/tests/unit/controller/drivers/test_namespace_subnet.py', 'kuryr_kubernetes/tests/unit/controller/handlers/test_namespace.py', 'kuryr_kubernetes/controller/drivers/base.py', 'kuryr_kubernetes/controller/drivers/vif_pool.py', 'kuryr_kubernetes/controller/drivers/namespace_subnet.py', 'kuryr_kubernetes/controller/handlers/namespace.py', 'kuryr_kubernetes/tests/unit/controller/drivers/test_vif_pool.py'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/bfa1acf27f54d72e0ad2f3947feb237e764fd83d', 'message': 'Ensure namespace network resources are cleaned up\n\nIn case of kuryr-controller crash/restart while creating a namespace\nit may happen that some network resources are leftover as the kuryr\nnet crd was not yet created. This may lead to a waste of OpenStack\nnetwork resources (networks, subnets). This patch ensures the namespace\nis cleaned up before creating the resources in case a previous attempt\nwas made without completing the kuryr net crd creation.\n\nChange-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936\n'}]",1,671498,bfa1acf27f54d72e0ad2f3947feb237e764fd83d,28,7,8,23567,,,0,"Ensure namespace network resources are cleaned up

In case of kuryr-controller crash/restart while creating a namespace
it may happen that some network resources are leftover as the kuryr
net crd was not yet created. This may lead to a waste of OpenStack
network resources (networks, subnets). This patch ensures the namespace
is cleaned up before creating the resources in case a previous attempt
was made without completing the kuryr net crd creation.

Change-Id: Iddc03090dc8a847abe4afa2bed0900f0c7cf6936
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/98/671498/8 && git format-patch -1 --stdout FETCH_HEAD,"['kuryr_kubernetes/tests/unit/controller/drivers/test_namespace_subnet.py', 'kuryr_kubernetes/tests/unit/controller/handlers/test_namespace.py', 'kuryr_kubernetes/controller/drivers/base.py', 'kuryr_kubernetes/controller/drivers/namespace_subnet.py', 'kuryr_kubernetes/controller/handlers/namespace.py']",5,d103a40dbed97b7f7f01c2626ea58fb44387690d,pools-with-tags," # NOTE(ltomasbo): Ensure there is no previously created networks # leftovers due to a kuryr-controller crash/restart LOG.debug(""Deleting leftovers network resources for namespace: %s"", ns_name) self._drv_subnets.cleanup_namespace_networks(ns_name) ",,71,31
openstack%2Fironic-python-agent~stable%2Fstein~I855e6e02a33bcf146497089319445d76652f0691,openstack/ironic-python-agent,stable/stein,I855e6e02a33bcf146497089319445d76652f0691,CI: stop using pyghmi from git master,MERGED,2019-07-31 15:43:39.000000000,2019-08-09 14:00:58.000000000,2019-08-09 14:00:58.000000000,"[{'_account_id': 10343}, {'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}]","[{'number': 1, 'created': '2019-07-31 15:43:39.000000000', 'files': ['playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-direct-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-direct-coreos-src/run.yaml', 'zuul.d/legacy-ironic-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/e5ec860d295fb29152a3affbefc3be20e8ad4ced', 'message': 'CI: stop using pyghmi from git master\n\nChange-Id: I855e6e02a33bcf146497089319445d76652f0691\n(cherry picked from commit e1b630dd841363d1e1d322628ce667705f309467)\n'}]",0,673853,e5ec860d295fb29152a3affbefc3be20e8ad4ced,8,5,1,10239,,,0,"CI: stop using pyghmi from git master

Change-Id: I855e6e02a33bcf146497089319445d76652f0691
(cherry picked from commit e1b630dd841363d1e1d322628ce667705f309467)
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/53/673853/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-direct-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-wholedisk-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-iscsi-coreos-src/run.yaml', 'playbooks/legacy/ipa-tempest-dsvm-partition-bios-ipmi-direct-coreos-src/run.yaml', 'zuul.d/legacy-ironic-jobs.yaml']",5,e5ec860d295fb29152a3affbefc3be20e8ad4ced,gate-stable/stein,, - x/pyghmi,0,5
openstack%2Fnova~stable%2Fqueens~Ib3b962a417edc4ae10d8e8150107f8627b2f3168,openstack/nova,stable/queens,Ib3b962a417edc4ae10d8e8150107f8627b2f3168,Test for plug_contrail_vif with utf8 VM name,ABANDONED,2019-03-05 15:36:33.000000000,2019-08-09 13:37:21.000000000,,"[{'_account_id': 6873}, {'_account_id': 16128}, {'_account_id': 21813}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-03-05 15:36:33.000000000', 'files': ['nova/tests/unit/virt/libvirt/test_vif.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/00bc2b8f880cdf400136430b1b351dd2d709504f', 'message': 'Test for plug_contrail_vif with utf8 VM name\n\nRelated-Bug: #1818687\nChange-Id: Ib3b962a417edc4ae10d8e8150107f8627b2f3168\n'}]",0,641048,00bc2b8f880cdf400136430b1b351dd2d709504f,7,5,1,21813,,,0,"Test for plug_contrail_vif with utf8 VM name

Related-Bug: #1818687
Change-Id: Ib3b962a417edc4ae10d8e8150107f8627b2f3168
",git fetch https://review.opendev.org/openstack/nova refs/changes/48/641048/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/virt/libvirt/test_vif.py'],1,00bc2b8f880cdf400136430b1b351dd2d709504f,bug/1818687,"from nova import privsep @mock.patch('subprocess.Popen') def test_plug_contrail_vif_utf8(self, popen): popen.return_value.communicate.return_value = ['', ''] popen.return_value.returncode = 0 privsep.sys_admin_pctxt.set_client_mode(False) self.addCleanup(privsep.sys_admin_pctxt.set_client_mode, True) privsep.libvirt.plug_contrail_vif( project_id='fake-project-id', vm_id='fake-vm-id', vm_name='\xd0\xb2\xd0\xbc1'.decode('utf8'), vif_id='fake-vif-id', net_id='fake-net-id', port_type='fake-port-type', dev_name='fake-dev-name', mac='fake-mac', ip_addr='fake-ip-addr', ip6_addr='fake-ip6-addr' )",,20,0
openstack%2Fironic-inspector~stable%2Frocky~I634e75ab04253edffb6f19394d3943e9ffe56d13,openstack/ironic-inspector,stable/rocky,I634e75ab04253edffb6f19394d3943e9ffe56d13,CI: clean up the required projects list,MERGED,2019-08-01 08:56:11.000000000,2019-08-09 13:31:01.000000000,2019-08-09 13:31:01.000000000,"[{'_account_id': 10206}, {'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-01 08:56:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/790099c3f75443f0f20528de9eb7ef48a7ea1123', 'message': ""CI: clean up the required projects list for grenade\n\nWe don't need to install libraries from git in this job.\nironic-python-agent is also not needed since we download the ramdisk.\n\nChange-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13\n(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)\n""}, {'number': 2, 'created': '2019-08-07 08:48:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/29810f5efb7e6e70b40e7c915d4282436745aeef', 'message': ""CI: clean up the required projects list for grenade\n\nWe don't need to install libraries from git in this job.\nironic-python-agent is also not needed since we download the ramdisk.\n\nChange-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13\n(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)\n""}, {'number': 3, 'created': '2019-08-07 08:49:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/9094e63f01f9ebf9e1a83367cfed057e8e5f24e9', 'message': ""CI: clean up the required projects list for grenade\n\nWe don't need to install libraries from git in this job.\nironic-python-agent is also not needed since we download the ramdisk.\n\nChange-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13\n(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)\n""}, {'number': 4, 'created': '2019-08-07 08:50:26.000000000', 'files': ['playbooks/legacy/ironic-inspector-grenade-dsvm/run.yaml', 'zuul.d/legacy-ironic-inspector-jobs.yaml', 'playbooks/legacy/ironic-inspector-tempest-dsvm-discovery/run.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/f8eba2adc0c46fd76bf68982b3c1f2bbeb40e5f8', 'message': ""CI: clean up the required projects list\n\nWe don't need to install libraries from git in our jobs.\nironic-python-agent is also not needed since we download the ramdisk.\n\nChange-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13\n(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)\n""}]",0,673959,f8eba2adc0c46fd76bf68982b3c1f2bbeb40e5f8,13,4,4,10239,,,0,"CI: clean up the required projects list

We don't need to install libraries from git in our jobs.
ironic-python-agent is also not needed since we download the ramdisk.

Change-Id: I634e75ab04253edffb6f19394d3943e9ffe56d13
(cherry picked from commit da69fca0f8c32880604be14100598a1e1da4c7f2)
",git fetch https://review.opendev.org/openstack/ironic-inspector refs/changes/59/673959/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/ironic-inspector-grenade-dsvm/run.yaml', 'zuul.d/legacy-ironic-inspector-jobs.yaml']",2,790099c3f75443f0f20528de9eb7ef48a7ea1123,gate-stable/rocky,, - openstack/ironic-lib - openstack/ironic-python-agent - x/pyghmi - openstack/python-ironic-inspector-client - openstack/python-ironicclient,0,10
openstack%2Ftempest~master~I09e28c245c11dd3dd061df786bd137eceb97be07,openstack/tempest,master,I09e28c245c11dd3dd061df786bd137eceb97be07,tempest cleanup fix return code,MERGED,2019-08-05 20:12:16.000000000,2019-08-09 13:28:46.000000000,2019-08-09 13:28:46.000000000,"[{'_account_id': 5689}, {'_account_id': 5803}, {'_account_id': 6167}, {'_account_id': 8556}, {'_account_id': 17887}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 23186}]","[{'number': 1, 'created': '2019-08-05 20:12:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/b268ede4f101d6466834cefb33996f875309f986', 'message': ""tempest cleanup fix return code\n\nIt's a follow up fix for tempest cleanup NotImplemented error issue.\nTempest cleanup shouldn't return a non-zero return code for\nNotImplemented errors as they are actually not errors, they are just\nan outcome of tempest not checking availability of extensions in order\nto keep it simple without any complicated logic.\n\nCloses-bug: #1832566\n\nChange-Id: I09e28c245c11dd3dd061df786bd137eceb97be07\n""}, {'number': 2, 'created': '2019-08-06 05:21:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/1e0dbe485bedfa2d6f770cac652188a76f0d1b5e', 'message': ""tempest cleanup fix return code\n\nIt's a follow up fix for tempest cleanup NotImplemented error issue.\nTempest cleanup shouldn't return a non-zero return code for\nNotImplemented errors as they are actually not errors, they are just\nan outcome of tempest not checking availability of extensions in order\nto keep it simple without any complicated logic.\n\nCloses-bug: #1832566\n\nChange-Id: I09e28c245c11dd3dd061df786bd137eceb97be07\n""}, {'number': 3, 'created': '2019-08-06 19:14:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/79cb42ef685a1dbc6f35bb1a35cdb954d28d520e', 'message': ""tempest cleanup fix return code\n\nIt's a follow up fix for tempest cleanup NotImplemented error issue.\nTempest cleanup shouldn't return a non-zero return code for\nNotImplemented errors as they are actually not errors, they are just\nan outcome of tempest not checking availability of extensions in order\nto keep it simple without any complicated logic.\n\nCloses-bug: #1832566\n\nChange-Id: I09e28c245c11dd3dd061df786bd137eceb97be07\n""}, {'number': 4, 'created': '2019-08-07 05:24:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/66533ae8e51b0e431e83bd05d9d46dd4f58d8182', 'message': ""tempest cleanup fix return code\n\nIt's a follow up fix for tempest cleanup NotImplemented error issue.\nTempest cleanup shouldn't return a non-zero return code for\nNotImplemented errors as they are actually not errors, they are just\nan outcome of tempest not checking availability of extensions in order\nto keep it simple without any complicated logic.\n\nCloses-bug: #1832566\n\nChange-Id: I09e28c245c11dd3dd061df786bd137eceb97be07\n""}, {'number': 5, 'created': '2019-08-08 09:02:02.000000000', 'files': ['tempest/cmd/cleanup.py', 'tempest/cmd/cleanup_service.py'], 'web_link': 'https://opendev.org/openstack/tempest/commit/219e322e7eced4b4d7a3a8930f62bf64baf05cd9', 'message': ""tempest cleanup fix return code\n\nIt's a follow up fix for tempest cleanup NotImplemented error issue.\nTempest cleanup shouldn't return a non-zero return code for\nNotImplemented errors as they are actually not errors, they are just\nan outcome of tempest not checking availability of extensions in order\nto keep it simple without any complicated logic.\n\nCloses-bug: #1832566\n\nChange-Id: I09e28c245c11dd3dd061df786bd137eceb97be07\n""}]",5,674689,219e322e7eced4b4d7a3a8930f62bf64baf05cd9,29,8,5,22873,,,0,"tempest cleanup fix return code

It's a follow up fix for tempest cleanup NotImplemented error issue.
Tempest cleanup shouldn't return a non-zero return code for
NotImplemented errors as they are actually not errors, they are just
an outcome of tempest not checking availability of extensions in order
to keep it simple without any complicated logic.

Closes-bug: #1832566

Change-Id: I09e28c245c11dd3dd061df786bd137eceb97be07
",git fetch https://review.opendev.org/openstack/tempest refs/changes/89/674689/3 && git format-patch -1 --stdout FETCH_HEAD,['tempest/cmd/cleanup.py'],1,b268ede4f101d6466834cefb33996f875309f986,cleanup," fail = False for ex in self.GOT_EXCEPTIONS: # ignore NotImplemented errors as those are an outcome # of some extensions being disabled and cleanup is not checking # their availability as it tries to clean up as much as possible # without any complicated logic if ""NotImplemented"" not in ex: fail = True if fail:", if self.GOT_EXCEPTIONS:,9,1
openstack%2Fpaunch~stable%2Fstein~I681e5add2dda97d879ead9f79e1984e3e4493b9f,openstack/paunch,stable/stein,I681e5add2dda97d879ead9f79e1984e3e4493b9f,"Revert ""Check if volume paths exist before executing Docker.""",ABANDONED,2019-08-08 20:46:04.000000000,2019-08-09 13:19:27.000000000,,"[{'_account_id': 3153}, {'_account_id': 10873}, {'_account_id': 14250}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-08 20:46:04.000000000', 'files': ['paunch/builder/podman.py', 'paunch/tests/test_builder_compose1.py', 'paunch/builder/compose1.py', 'paunch/tests/test_builder_base.py', 'paunch/builder/base.py', 'paunch/__init__.py'], 'web_link': 'https://opendev.org/openstack/paunch/commit/994ec3a9f06fbcf45794309a718622237429df54', 'message': 'Revert ""Check if volume paths exist before executing Docker.""\n\nThis reverts commit a85515a89395fbc6c20ff8a0bc4015777750f773.\n\nChange-Id: I681e5add2dda97d879ead9f79e1984e3e4493b9f\n'}]",0,675462,994ec3a9f06fbcf45794309a718622237429df54,5,8,1,3153,,,0,"Revert ""Check if volume paths exist before executing Docker.""

This reverts commit a85515a89395fbc6c20ff8a0bc4015777750f773.

Change-Id: I681e5add2dda97d879ead9f79e1984e3e4493b9f
",git fetch https://review.opendev.org/openstack/paunch refs/changes/62/675462/1 && git format-patch -1 --stdout FETCH_HEAD,"['paunch/builder/podman.py', 'paunch/tests/test_builder_compose1.py', 'paunch/builder/compose1.py', 'paunch/builder/base.py', 'paunch/tests/test_builder_base.py', 'paunch/__init__.py']",6,994ec3a9f06fbcf45794309a718622237429df54,," builder.container_run_args(cmd, container_name) return r.execute_interactive(cmd, log)"," if builder.container_run_args(cmd, container_name): return r.execute_interactive(cmd, log)",5,93
openstack%2Freleases~master~Ice0469fc690b75099af66b18217750b861c85726,openstack/releases,master,Ice0469fc690b75099af66b18217750b861c85726,Release python-muranoclient 1.3.0,MERGED,2019-08-09 01:25:56.000000000,2019-08-09 13:16:48.000000000,2019-08-09 13:16:48.000000000,"[{'_account_id': 308}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 01:25:56.000000000', 'files': ['deliverables/train/python-muranoclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/abb4fdac3fde68a87bdf3ca5d3f09fa619e07e04', 'message': 'Release python-muranoclient 1.3.0\n\nChange-Id: Ice0469fc690b75099af66b18217750b861c85726\n'}]",0,675501,abb4fdac3fde68a87bdf3ca5d3f09fa619e07e04,7,3,1,14107,,,0,"Release python-muranoclient 1.3.0

Change-Id: Ice0469fc690b75099af66b18217750b861c85726
",git fetch https://review.opendev.org/openstack/releases refs/changes/01/675501/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/python-muranoclient.yaml'],1,abb4fdac3fde68a87bdf3ca5d3f09fa619e07e04,,releases: - version: 1.3.0 projects: - repo: openstack/python-muranoclient hash: 2f501776a607db3862ce89dbaf22c9d48e7e7f87,,5,0
openstack%2Freleases~master~I5aeffd5fddefc2c35f5854c6b9570b9e0493ec06,openstack/releases,master,I5aeffd5fddefc2c35f5854c6b9570b9e0493ec06,Release 0.33.0 of openstacksdk,MERGED,2019-08-05 17:26:24.000000000,2019-08-09 13:16:47.000000000,2019-08-09 13:16:47.000000000,"[{'_account_id': 2}, {'_account_id': 308}, {'_account_id': 6873}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2019-08-05 17:26:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/8ce795224bef804b8279e0d6582a86a3cb807c25', 'message': 'Release 0.32.1 of openstacksdk\n\nChange-Id: I5aeffd5fddefc2c35f5854c6b9570b9e0493ec06\n'}, {'number': 2, 'created': '2019-08-08 15:24:51.000000000', 'files': ['deliverables/train/openstacksdk.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/323d3192708d65962e21a0b48bcc33a6a87e457a', 'message': 'Release 0.33.0 of openstacksdk\n\nChange-Id: I5aeffd5fddefc2c35f5854c6b9570b9e0493ec06\n'}]",0,674660,323d3192708d65962e21a0b48bcc33a6a87e457a,14,6,2,2,,,0,"Release 0.33.0 of openstacksdk

Change-Id: I5aeffd5fddefc2c35f5854c6b9570b9e0493ec06
",git fetch https://review.opendev.org/openstack/releases refs/changes/60/674660/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/openstacksdk.yaml'],1,8ce795224bef804b8279e0d6582a86a3cb807c25,, - projects: - hash: 46459f3ab4aa9cc513f8fbc9e9e5a3783d3dd2d0 repo: openstack/openstacksdk version: 0.32.1,,4,0
openstack%2Freleases~master~I74db49594596b13869787208fbeb28a5b247ae06,openstack/releases,master,I74db49594596b13869787208fbeb28a5b247ae06,Change monasca-thresh release model,ABANDONED,2019-08-08 22:08:43.000000000,2019-08-09 13:02:45.000000000,,"[{'_account_id': 16222}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 22:08:43.000000000', 'files': ['deliverables/train/monasca-thresh.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/c7e6f6ca54932f7c7f6708ff8b4a42fba1eaabcc', 'message': 'Change monasca-thresh release model\n\nSince monasca-thresh was only released once last cycle\n(and the release before) AND it has not yet been released\nthis cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do\na single release per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\n\nChange-Id: I74db49594596b13869787208fbeb28a5b247ae06\n'}]",0,675482,c7e6f6ca54932f7c7f6708ff8b4a42fba1eaabcc,4,2,1,16708,,,0,"Change monasca-thresh release model

Since monasca-thresh was only released once last cycle
(and the release before) AND it has not yet been released
this cycle yet either, we propose to change it to the
cycle-with-rc model which is better for deliverables that do
a single release per cycle.

There are three options for responding:

1) If you know you will only do one release this cycle, +1.
2) If you know you will do more than one, please release now and -1
this change.
3) If you have no idea when you will release, please please please
propose one BEFORE rc1 and -1 this change.

Change-Id: I74db49594596b13869787208fbeb28a5b247ae06
",git fetch https://review.opendev.org/openstack/releases refs/changes/82/675482/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/monasca-thresh.yaml'],1,c7e6f6ca54932f7c7f6708ff8b4a42fba1eaabcc,monasca-thresh-model-change,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Freleases~master~Iffc37adf97d22f6d514ed079efcb6f7daae6b848,openstack/releases,master,Iffc37adf97d22f6d514ed079efcb6f7daae6b848,Change monasca-ui release model,ABANDONED,2019-08-08 22:10:29.000000000,2019-08-09 13:02:16.000000000,,"[{'_account_id': 16222}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 22:10:29.000000000', 'files': ['deliverables/train/monasca-ui.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/6dd1d2c234c06d5c864c467104ed6b44cd5cc331', 'message': 'Change monasca-ui release model\n\nSince monasca-ui was only released once last cycle AND it has not\nyet been released this cycle yet either, we propose to change it to the\ncycle-with-rc model which is better for deliverables that do a single\nrelease per cycle.\n\nThere are three options for responding:\n\n1) If you know you will only do one release this cycle, +1.\n2) If you know you will do more than one, please release now and -1\nthis change.\n3) If you have no idea when you will release, please please please\npropose one BEFORE rc1 and -1 this change.\n\nChange-Id: Iffc37adf97d22f6d514ed079efcb6f7daae6b848\n'}]",0,675483,6dd1d2c234c06d5c864c467104ed6b44cd5cc331,4,2,1,16708,,,0,"Change monasca-ui release model

Since monasca-ui was only released once last cycle AND it has not
yet been released this cycle yet either, we propose to change it to the
cycle-with-rc model which is better for deliverables that do a single
release per cycle.

There are three options for responding:

1) If you know you will only do one release this cycle, +1.
2) If you know you will do more than one, please release now and -1
this change.
3) If you have no idea when you will release, please please please
propose one BEFORE rc1 and -1 this change.

Change-Id: Iffc37adf97d22f6d514ed079efcb6f7daae6b848
",git fetch https://review.opendev.org/openstack/releases refs/changes/83/675483/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/monasca-ui.yaml'],1,6dd1d2c234c06d5c864c467104ed6b44cd5cc331,monasca-ui-model-change,release-model: cycle-with-rc,release-model: cycle-with-intermediary,1,1
openstack%2Fpython-openstackclient~master~I4118e0b06f9734f7ad3a0141e3fef5eeacd49707,openstack/python-openstackclient,master,I4118e0b06f9734f7ad3a0141e3fef5eeacd49707,fixup! Add command: router add/remove route --route,ABANDONED,2019-08-09 13:01:54.000000000,2019-08-09 13:02:11.000000000,,[],"[{'number': 1, 'created': '2019-08-09 13:01:54.000000000', 'files': ['openstackclient/network/v2/router.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/ca5a367e68f36c5ecfa5716a6b6d6eb71918e0f3', 'message': 'fixup! Add command: router add/remove route --route\n\nChange-Id: I4118e0b06f9734f7ad3a0141e3fef5eeacd49707\n'}]",0,675618,ca5a367e68f36c5ecfa5716a6b6d6eb71918e0f3,2,0,1,15554,,,0,"fixup! Add command: router add/remove route --route

Change-Id: I4118e0b06f9734f7ad3a0141e3fef5eeacd49707
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/18/675618/1 && git format-patch -1 --stdout FETCH_HEAD,['openstackclient/network/v2/router.py'],1,ca5a367e68f36c5ecfa5716a6b6d6eb71918e0f3,extraroute, body={'router': {'routes': parsed_args.routes}}) body={'router': {'routes': parsed_args.routes}}), routes=parsed_args.routes) routes=parsed_args.routes),2,2
openstack%2Fmonasca-common~master~Ic34e6dc3fea75fe125f024d6b9c992c6cce7907a,openstack/monasca-common,master,Ic34e6dc3fea75fe125f024d6b9c992c6cce7907a,Fix confluent-kafka connection bug,ABANDONED,2019-08-01 01:44:43.000000000,2019-08-09 12:58:22.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-01 01:44:43.000000000', 'files': ['monasca_common/confluent_kafka/consumer.py'], 'web_link': 'https://opendev.org/openstack/monasca-common/commit/8652e7c686630c1d7938bc311fe0c7ad3f701c42', 'message': 'Fix confluent-kafka connection bug\n\nfix error:TypeError: on_revoke expects a callable\n\nChange-Id: Ic34e6dc3fea75fe125f024d6b9c992c6cce7907a\nTask: 36050\nStory: 2006319\n'}]",0,673935,8652e7c686630c1d7938bc311fe0c7ad3f701c42,3,1,1,29970,,,0,"Fix confluent-kafka connection bug

fix error:TypeError: on_revoke expects a callable

Change-Id: Ic34e6dc3fea75fe125f024d6b9c992c6cce7907a
Task: 36050
Story: 2006319
",git fetch https://review.opendev.org/openstack/monasca-common refs/changes/35/673935/1 && git format-patch -1 --stdout FETCH_HEAD,['monasca_common/confluent_kafka/consumer.py'],1,8652e7c686630c1d7938bc311fe0c7ad3f701c42,fix-confluent-kafka-error," if repartition_callback is None: self._consumer.subscribe([topic]) else: self._consumer.subscribe([topic], on_revoke=repartition_callback)"," self._consumer.subscribe([topic], on_revoke=repartition_callback)",5,1
openstack%2Fproject-config~master~I8eeb76acb0074c30632708f5b3c0575a761a779e,openstack/project-config,master,I8eeb76acb0074c30632708f5b3c0575a761a779e,starlingx: add zuul-jobs repo,MERGED,2019-08-08 18:58:41.000000000,2019-08-09 12:52:28.000000000,2019-08-09 12:52:28.000000000,"[{'_account_id': 5263}, {'_account_id': 6547}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 18:58:41.000000000', 'files': ['gerrit/acls/starlingx/zuul-jobs.config', 'zuul/main.yaml', 'gerrit/projects.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/0f977df14d0514d84ef1c2b00ce975b68521e77a', 'message': 'starlingx: add zuul-jobs repo\n\nThis repo will contain the playbooks, roles and associated scripts\nsimilar to the base zuul-jobs and openstack-zuul-jobs.\n\nChange-Id: I8eeb76acb0074c30632708f5b3c0575a761a779e\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n'}]",0,675445,0f977df14d0514d84ef1c2b00ce975b68521e77a,7,3,1,28607,,,0,"starlingx: add zuul-jobs repo

This repo will contain the playbooks, roles and associated scripts
similar to the base zuul-jobs and openstack-zuul-jobs.

Change-Id: I8eeb76acb0074c30632708f5b3c0575a761a779e
Signed-off-by: Saul Wold <sgw@linux.intel.com>
",git fetch https://review.opendev.org/openstack/project-config refs/changes/45/675445/1 && git format-patch -1 --stdout FETCH_HEAD,"['gerrit/acls/starlingx/zuul-jobs.config', 'gerrit/projects.yaml', 'zuul/main.yaml']",3,0f977df14d0514d84ef1c2b00ce975b68521e77a,starlingx/zuul-jobs, - starlingx/zuul-jobs,,24,0
openstack%2Frpm-packaging~master~I8777a96d2572eeb5a8ebdd32cbbb3037e54c1c99,openstack/rpm-packaging,master,I8777a96d2572eeb5a8ebdd32cbbb3037e54c1c99,Bump python-*client versions,MERGED,2019-08-08 15:11:25.000000000,2019-08-09 12:45:05.000000000,2019-08-09 12:45:05.000000000,"[{'_account_id': 1916}, {'_account_id': 6593}, {'_account_id': 8482}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 15:11:25.000000000', 'files': ['openstack/python-novaclient/python-novaclient.spec.j2', 'openstack/python-keystoneclient/python-keystoneclient.spec.j2', 'openstack/python-swiftclient/python-swiftclient.spec.j2', 'openstack/python-magnumclient/python-magnumclient.spec.j2', 'openstack/python-troveclient/python-troveclient.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/d83525bd7eef80e77f54873b1a3e94b25f449894', 'message': 'Bump python-*client versions\n\nChange-Id: I8777a96d2572eeb5a8ebdd32cbbb3037e54c1c99\n'}]",0,675379,d83525bd7eef80e77f54873b1a3e94b25f449894,14,6,1,7102,,,0,"Bump python-*client versions

Change-Id: I8777a96d2572eeb5a8ebdd32cbbb3037e54c1c99
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/79/675379/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/python-novaclient/python-novaclient.spec.j2', 'openstack/python-keystoneclient/python-keystoneclient.spec.j2', 'openstack/python-swiftclient/python-swiftclient.spec.j2', 'openstack/python-magnumclient/python-magnumclient.spec.j2', 'openstack/python-troveclient/python-troveclient.spec.j2']",5,d83525bd7eef80e77f54873b1a3e94b25f449894,,Version: 2.18.0,Version: 2.17.0,5,5
openstack%2Fcharm-guide~master~I0bdd6fe0599843bc288bd5ed77add90dd4063ed6,openstack/charm-guide,master,I0bdd6fe0599843bc288bd5ed77add90dd4063ed6,Release notes around Series upgrade,MERGED,2019-08-08 14:11:58.000000000,2019-08-09 12:43:54.000000000,2019-08-09 12:43:54.000000000,"[{'_account_id': 11805}, {'_account_id': 22348}, {'_account_id': 30561}]","[{'number': 1, 'created': '2019-08-08 14:11:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/23ac2b6005b8979739cc523d4ebd21fab5f8c064', 'message': 'WIP - Release notes around Series upgrade\n\nChange-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6\n'}, {'number': 2, 'created': '2019-08-08 16:40:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/8ede8fccc9fb22d748b9da4bf730dc23e0c23409', 'message': 'WIP - Release notes around Series upgrade\n\n- Bug: #1839021 - hacluster charm ""Resource;\n                  res_ks_haproxy not running""\n- Bug: #1839495 - nova-compute charm: libvirtd not running\n\nRelated-Bug: #1839021\nRelated-Bug: #1839495\n\nChange-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6\n'}, {'number': 3, 'created': '2019-08-08 19:18:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/6a63c828389158c58f872b3292c5bc22db9e5bb8', 'message': 'Release notes around Series upgrade\n\n- Bug: #1839021 - hacluster charm ""Resource;\n                  res_ks_haproxy not running""\n- Bug: #1839495 - nova-compute charm: libvirtd not running\n\nRelated-Bug: #1839021\nRelated-Bug: #1839495\n\nChange-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6\n'}, {'number': 4, 'created': '2019-08-08 19:21:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/b67cf0e6b351beb57a9a1e716d376ec49d88cf8c', 'message': 'Release notes around Series upgrade\n\n- Bug: #1839021 - hacluster charm ""Resource;\n                  res_ks_haproxy not running""\n- Bug: #1839495 - nova-compute charm: libvirtd not running\n\nRelated-Bug: #1839021\nRelated-Bug: #1839495\n\nChange-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6\n'}, {'number': 5, 'created': '2019-08-08 19:35:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/10caf3c1e2bc2b790dcbd008e8ce9b29dfde3161', 'message': 'Release notes around Series upgrade\n\n- Bug: #1839021 - hacluster charm ""Resource;\n                  res_ks_haproxy not running""\n- Bug: #1839495 - nova-compute charm: libvirtd not running\n\nRelated-Bug: #1839021\nRelated-Bug: #1839495\n\nChange-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6\n'}, {'number': 6, 'created': '2019-08-08 20:55:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/91bca75730826747266011a8c83ff777439322a0', 'message': 'Release notes around Series upgrade\n\n- Bug: #1839021 - hacluster charm ""Resource;\n                  res_ks_haproxy not running""\n- Bug: #1839495 - nova-compute charm: libvirtd not running\n\nRelated-Bug: #1839021\nRelated-Bug: #1839495\n\nChange-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6\n'}, {'number': 7, 'created': '2019-08-09 08:52:49.000000000', 'files': ['doc/source/1907.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/caf132f409bf9b819ef48c44509aea6e80cb1b10', 'message': 'Release notes around Series upgrade\n\n- Bug: #1839021 - hacluster charm ""Resource;\n                  res_ks_haproxy not running""\n\nRelated-Bug: #1839021\nChange-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6\n'}]",3,675343,caf132f409bf9b819ef48c44509aea6e80cb1b10,23,3,7,20870,,,0,"Release notes around Series upgrade

- Bug: #1839021 - hacluster charm ""Resource;
                  res_ks_haproxy not running""

Related-Bug: #1839021
Change-Id: I0bdd6fe0599843bc288bd5ed77add90dd4063ed6
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/43/675343/6 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/1907.rst'],1,23ac2b6005b8979739cc523d4ebd21fab5f8c064,rel-series-upgrade-notes-1907,"Series Upgrade Issues ===================== Trusty to Xenial - Bug: #1839021 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ For an HA deployment, when performing a Trusty to Xenial upgrade, it's possible, if the keystone unit takes a long time to reboot and restart its service, that keystone's hacluster crm monitor may exhaust it's retries and show a ``blocked`` state with the status message ``Resource: res_ks_haproxy not running``. In this case, running the following against the affected hacluster unit should resolve the issue once the associated keystone unit has completed its upgrade: ```bash juju run --unit <unit> sudo crm resource refresh ``` where ``<unit>`` is (say) keystone/0. ",,21,0
openstack%2Frpm-packaging~master~I2acdbe2e900fbddf8533b2d99d07896aa875e8b4,openstack/rpm-packaging,master,I2acdbe2e900fbddf8533b2d99d07896aa875e8b4,update glance_store to 1.0.0,MERGED,2019-06-12 06:59:29.000000000,2019-08-09 12:43:36.000000000,2019-08-09 12:43:36.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-12 06:59:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/3116669e3e02bc4427da9918f30f0adb17043de6', 'message': 'update glance_store to 0.29.0\n\nChange-Id: I2acdbe2e900fbddf8533b2d99d07896aa875e8b4\n'}, {'number': 2, 'created': '2019-08-09 08:00:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/8f47d4706be07cfd420d9f0dd28daecc4664ac4a', 'message': 'update glance_store to 0.29.0\n\nChange-Id: I2acdbe2e900fbddf8533b2d99d07896aa875e8b4\n'}, {'number': 3, 'created': '2019-08-09 08:19:00.000000000', 'files': ['openstack/glance_store/glance_store.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/f1cd9c2c19201cebf13bda97cdb123667b09dea6', 'message': 'update glance_store to 1.0.0\n\nChange-Id: I2acdbe2e900fbddf8533b2d99d07896aa875e8b4\n'}]",0,664801,f1cd9c2c19201cebf13bda97cdb123667b09dea6,19,6,3,28654,,,0,"update glance_store to 1.0.0

Change-Id: I2acdbe2e900fbddf8533b2d99d07896aa875e8b4
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/01/664801/3 && git format-patch -1 --stdout FETCH_HEAD,['openstack/glance_store/glance_store.spec.j2'],1,3116669e3e02bc4427da9918f30f0adb17043de6,glance-store,{% set upstream_version = upstream_version('0.29.0') %},{% set upstream_version = upstream_version('0.28.0') %},1,1
openstack%2Fmanila~master~If6d233ffd658cd75599eec36eb8027f35771e224,openstack/manila,master,If6d233ffd658cd75599eec36eb8027f35771e224,[CI] Enable glusterfs-nfs ci,MERGED,2019-07-31 09:17:46.000000000,2019-08-09 12:39:14.000000000,2019-08-09 10:53:28.000000000,"[{'_account_id': 9003}, {'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 15831}, {'_account_id': 16643}, {'_account_id': 21863}, {'_account_id': 21884}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 30722}]","[{'number': 1, 'created': '2019-07-31 09:17:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/d5109cb5a22ef518ab323b426faad3e448d8bcf0', 'message': '[CI] Enable glusterfs CI jobs\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs CI\n\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}, {'number': 2, 'created': '2019-07-31 09:18:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/583b2336124d126ab062888e1598570c60270b35', 'message': '[CI] Enable glusterfs CI jobs\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs CI\n\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}, {'number': 3, 'created': '2019-08-01 08:13:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/7bf5caedbe93f5fdb0b6e97b624b4d45e2bf537b', 'message': '[CI] Enable glusterfs CI jobs\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs CI\n\nDepends-On: https://review.opendev.org/#/c/673239/\nDepends-On: https://review.opendev.org/#/c/673276/\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}, {'number': 4, 'created': '2019-08-01 08:13:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/b0c4aff51ad56dac355a011acb440bf888f51e3d', 'message': '[CI] Enable glusterfs CI jobs\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs CI\n\nDepends-On: https://review.opendev.org/#/c/673239/\nDepends-On: https://review.opendev.org/#/c/673276/\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}, {'number': 5, 'created': '2019-08-06 06:48:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/0b5be4cca6a15119868e9c84e0f516005b859b79', 'message': '[CI] Enable glusterfs CI jobs\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs CI\n\nDepends-On: https://review.opendev.org/#/c/674739/\nDepends-On: https://review.opendev.org/#/c/674738/\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}, {'number': 6, 'created': '2019-08-07 13:55:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/7354574fc000e0b93045af8fdaa1cd884a78dc07', 'message': '[CI] Enable glusterfs-nfs ci\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs-nfs CI\n\nDepends-On: https://review.opendev.org/#/c/674738/\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}, {'number': 7, 'created': '2019-08-08 04:23:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/4b2ae3c084aa5afac98aa7384aba8f97c3cac1c1', 'message': '[CI] Enable glusterfs-nfs ci\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs-nfs CI\n\nDepends-On: https://review.opendev.org/#/c/674738/\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}, {'number': 8, 'created': '2019-08-08 23:03:46.000000000', 'files': ['playbooks/legacy/manila-tempest-dsvm-glusterfs-native-heketi/run.yaml', 'playbooks/legacy/manila-tempest-dsvm-glusterfs-nfs/run.yaml', '.zuul.yaml', 'playbooks/legacy/manila-tempest-dsvm-glusterfs-nfs-heketi/run.yaml', 'playbooks/legacy/manila-tempest-dsvm-glusterfs-native/run.yaml'], 'web_link': 'https://opendev.org/openstack/manila/commit/4aa0945c1dabd3ea81975853202c8a04c0808748', 'message': '[CI] Enable glusterfs-nfs ci\n\n- Change post_test_hook in the gluster CI takes arguments\n- Enable glusterfs-nfs CI\n\nDepends-On: https://review.opendev.org/#/c/674738/\nChange-Id: If6d233ffd658cd75599eec36eb8027f35771e224\n'}]",2,673771,4aa0945c1dabd3ea81975853202c8a04c0808748,118,13,8,30722,,,0,"[CI] Enable glusterfs-nfs ci

- Change post_test_hook in the gluster CI takes arguments
- Enable glusterfs-nfs CI

Depends-On: https://review.opendev.org/#/c/674738/
Change-Id: If6d233ffd658cd75599eec36eb8027f35771e224
",git fetch https://review.opendev.org/openstack/manila refs/changes/71/673771/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/manila-tempest-dsvm-glusterfs-native-heketi/run.yaml', 'playbooks/legacy/manila-tempest-dsvm-glusterfs-nfs/run.yaml', '.zuul.yaml', 'playbooks/legacy/manila-tempest-dsvm-glusterfs-nfs-heketi/run.yaml', 'playbooks/legacy/manila-tempest-dsvm-glusterfs-native/run.yaml']",5,d5109cb5a22ef518ab323b426faad3e448d8bcf0,enable_gluster_ci, source $BASE/new/devstack-plugin-glusterfs/manila/post_test_hook.sh \ singlebackend \ glusterfs-native \ api, source $BASE/new/devstack-plugin-glusterfs/manila/post_test_hook.sh singlebackend,20,6
openstack%2Ftripleo-heat-templates~stable%2Fstein~Ie7cb761ad3b4a180990de2916d6210d15ec0bf50,openstack/tripleo-heat-templates,stable/stein,Ie7cb761ad3b4a180990de2916d6210d15ec0bf50,Add the ability to configure ovn-remote-probe-interval,MERGED,2019-07-29 15:16:02.000000000,2019-08-09 12:25:15.000000000,2019-08-09 12:25:14.000000000,"[{'_account_id': 3153}, {'_account_id': 11082}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-07-29 15:16:02.000000000', 'files': ['releasenotes/notes/ovn_remote_probe_interval-023b3fa671f88101.yaml', 'deployment/ovn/ovn-controller-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6d72398122707f3176e142fb581fdff0f9e60efc', 'message': 'Add the ability to configure ovn-remote-probe-interval\n\nThis parameter sets inactive probe interval of the JSON\nsession from ovn-controller to the OVN SB database.\nBy default this it is 5s which not be sufficient in\nloaded systems or during high control-plane activity spikes,\nleading to unnecessary reconnections to OVSDB server.\nNow it is extended by default to 1 min and it\nis configurable.\n\nDepends-On: https://review.opendev.org/#/c/673308/\nChange-Id: Ie7cb761ad3b4a180990de2916d6210d15ec0bf50\nCloses-Bug: #1836604\n(cherry picked from commit 65a132505a65de3cc91c52bc07a768fbfe139824)\n'}]",0,673310,6d72398122707f3176e142fb581fdff0f9e60efc,16,7,1,11082,,,0,"Add the ability to configure ovn-remote-probe-interval

This parameter sets inactive probe interval of the JSON
session from ovn-controller to the OVN SB database.
By default this it is 5s which not be sufficient in
loaded systems or during high control-plane activity spikes,
leading to unnecessary reconnections to OVSDB server.
Now it is extended by default to 1 min and it
is configurable.

Depends-On: https://review.opendev.org/#/c/673308/
Change-Id: Ie7cb761ad3b4a180990de2916d6210d15ec0bf50
Closes-Bug: #1836604
(cherry picked from commit 65a132505a65de3cc91c52bc07a768fbfe139824)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/10/673310/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovn_remote_probe_interval-023b3fa671f88101.yaml', 'deployment/ovn/ovn-controller-container-puppet.yaml']",2,6d72398122707f3176e142fb581fdff0f9e60efc,, OVNRemoteProbeInterval: description: Probe interval in ms type: number default: 60000 ovn::controller::ovn_remote_probe_interval: {get_param: OVNRemoteProbeInterval},,14,0
openstack%2Fironic-python-agent~master~Iabfde30f35af172610777f55d986d1ec2debb415,openstack/ironic-python-agent,master,Iabfde30f35af172610777f55d986d1ec2debb415,Implements OpenStack CI job having DIB-built IPA,MERGED,2019-08-05 20:09:23.000000000,2019-08-09 12:22:57.000000000,2019-08-09 12:22:57.000000000,"[{'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}, {'_account_id': 30099}]","[{'number': 1, 'created': '2019-08-05 20:09:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/01372336ab20acf05f1833ef2864c38b33ff1986', 'message': 'Implements OpenStack CI job having DIB-built IPA\n\nImplements DIB-built IPA. Also adds a corresponding zuul test.\n\nChange-Id: Iabfde30f35af172610777f55d986d1ec2debb415\nTask: #29752\nStory: #2005114\n'}, {'number': 2, 'created': '2019-08-06 18:59:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/40c395fbf6cab6c0cf8848bd8d8df590587c3d62', 'message': 'Implements OpenStack CI job having DIB-built IPA\n\nImplements DIB-built IPA. Also adds a corresponding zuul test.\n\nChange-Id: Iabfde30f35af172610777f55d986d1ec2debb415\nTask: #29752\nStory: #2005114\n'}, {'number': 3, 'created': '2019-08-07 09:12:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/1a91b7890d19736b5ad0a8d3cf55430def7a315c', 'message': 'Implements OpenStack CI job having DIB-built IPA\n\nImplements DIB-built IPA. Also adds a corresponding zuul test.\n\nChange-Id: Iabfde30f35af172610777f55d986d1ec2debb415\nTask: #29752\nStory: #2005114\n'}, {'number': 4, 'created': '2019-08-07 18:35:37.000000000', 'files': ['zuul.d/ironic-python-agent-jobs.yaml', 'zuul.d/project.yaml', 'playbooks/ironic-python-agent-buildimage/run.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/f5e6ac50955e47d754b5bec50ea9fb04df1edee5', 'message': 'Implements OpenStack CI job having DIB-built IPA\n\nImplements DIB-built IPA. Also adds a corresponding zuul test.\n\nChange-Id: Iabfde30f35af172610777f55d986d1ec2debb415\nTask: #29752\nStory: #2005114\n'}]",14,674688,f5e6ac50955e47d754b5bec50ea9fb04df1edee5,31,5,4,30099,,,0,"Implements OpenStack CI job having DIB-built IPA

Implements DIB-built IPA. Also adds a corresponding zuul test.

Change-Id: Iabfde30f35af172610777f55d986d1ec2debb415
Task: #29752
Story: #2005114
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/88/674688/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/ironic-python-agent-jobs.yaml', 'playbooks/ironic-python-agent-buildimage/run.yaml']",2,01372336ab20acf05f1833ef2864c38b33ff1986,making_dib_built_ipa," type_image='{{ image_type }}' if type_image == ""dib""; then export IPA_SOURCE_DIR={{ ansible_user_dir }}/src/opendev.org/openstack/ironic-python-agent pushd {{ ansible_user_dir }}/src/opendev.org/openstack/ironic-python-agent-builder/dib build mv dib*.tar.gz* ""$IPA_SOURCE_DIR/UPLOAD_TAR"" mv dib*.* ""$IPA_SOURCE_DIR/UPLOAD_RAW"" mv tiny-instance-uec*.tar.gz ""$IPA_SOURCE_DIR/UPLOAD_TAR"" # NOTE(sambetts) Must clean up chroot directories before # publisher rsync command tries and fails to read them make clean popd else export BUILD_AND_INSTALL_TINYIPA=true export IPA_SOURCE_DIR={{ ansible_user_dir }}/src/opendev.org/openstack/ironic-python-agent pushd {{ ansible_user_dir }}/src/opendev.org/openstack/ironic-python-agent-builder/tinyipa make mv tinyipa*.tar.gz* ""$IPA_SOURCE_DIR/UPLOAD_TAR"" mv tinyipa*.* ""$IPA_SOURCE_DIR/UPLOAD_RAW"" mv tiny-instance-uec*.tar.gz ""$IPA_SOURCE_DIR/UPLOAD_TAR"" # NOTE(sambetts) Must clean up chroot directories before # publisher rsync command tries and fails to read them make clean popd fi"," export BUILD_AND_INSTALL_TINYIPA=true export IPA_SOURCE_DIR={{ ansible_user_dir }}/src/opendev.org/openstack/ironic-python-agent pushd {{ ansible_user_dir }}/src/opendev.org/openstack/ironic-python-agent-builder/tinyipa make mv tinyipa*.tar.gz* ""$IPA_SOURCE_DIR/UPLOAD_TAR"" mv tinyipa*.* ""$IPA_SOURCE_DIR/UPLOAD_RAW"" mv tiny-instance-uec*.tar.gz ""$IPA_SOURCE_DIR/UPLOAD_TAR"" # NOTE(sambetts) Must clean up chroot directories before # publisher rsync command tries and fails to read them make clean popd",32,11
openstack%2Fironic~master~I39f33f748c6c25ff1f4a543beb59231ea8b7f30f,openstack/ironic,master,I39f33f748c6c25ff1f4a543beb59231ea8b7f30f,Uses IPA-B to build in addition to CoreOS,MERGED,2019-07-31 14:37:26.000000000,2019-08-09 12:22:53.000000000,2019-08-09 12:22:53.000000000,"[{'_account_id': 10118}, {'_account_id': 10239}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2019-07-31 14:37:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/b8a234f15c86b65c2347861dccbab305f37259a0', 'message': 'Uses IPA-B to build insted of CoreOS\n\nTask: 29752\nStory: 2005114\n\nChange-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f\n'}, {'number': 2, 'created': '2019-07-31 14:40:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/0a6a7b4089d467ddf8d4af84ca93e7e08d63466c', 'message': 'Uses IPA-B to build insted of CoreOS\n\nDepends-On: https://review.opendev.org/#/c/669213/\nTask: 29752\nStory: 2005114\n\nChange-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f\n'}, {'number': 3, 'created': '2019-08-01 18:11:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/2678eb494de74916794d1badc4c0eac5244f7f44', 'message': 'Uses IPA-B to build insted of CoreOS\n\nDepends-On: https://review.opendev.org/#/c/669213/\nTask: 29752\nStory: 2005114\n\nChange-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f\n'}, {'number': 4, 'created': '2019-08-01 18:13:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/fb8bcbce9deb59636c398ad6858937b070718714', 'message': 'Uses IPA-B to build insted of CoreOS\n\nDepends-On: https://review.opendev.org/#/c/669213/\nTask: 29752\nStory: 2005114\n\nChange-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f\n'}, {'number': 5, 'created': '2019-08-06 19:09:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/4a0210a64fc7df3f19266f8d201b1618cb66a220', 'message': 'Uses IPA-B to build in addition to CoreOS\n\nDepends-On: https://review.opendev.org/#/c/669213/\nTask: 29752\nStory: 2005114\n\nChange-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f\n'}, {'number': 6, 'created': '2019-08-07 09:16:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/d68713fcc9dd72a557e4f367535f6414350047eb', 'message': 'Uses IPA-B to build in addition to CoreOS\n\nDepends-On: https://review.opendev.org/#/c/669213/\nTask: 29752\nStory: 2005114\n\nChange-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f\n'}, {'number': 7, 'created': '2019-08-08 14:30:29.000000000', 'files': ['devstack/lib/ironic'], 'web_link': 'https://opendev.org/openstack/ironic/commit/d62c3f4fa5d852bc49f8d601d510157147b0f7ce', 'message': 'Uses IPA-B to build in addition to CoreOS\n\nDepends-On: https://review.opendev.org/#/c/669213/\nTask: 30073\nStory: 2005114\n\nChange-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f\n'}]",7,673834,d62c3f4fa5d852bc49f8d601d510157147b0f7ce,40,6,7,30099,,,0,"Uses IPA-B to build in addition to CoreOS

Depends-On: https://review.opendev.org/#/c/669213/
Task: 30073
Story: 2005114

Change-Id: I39f33f748c6c25ff1f4a543beb59231ea8b7f30f
",git fetch https://review.opendev.org/openstack/ironic refs/changes/34/673834/7 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/ironic'],1,b8a234f15c86b65c2347861dccbab305f37259a0,automating_ci_jobs," git_clone $IRONIC_PYTHON_AGENT_BUILDER_REPO $IRONIC_PYTHON_AGENT_BUILDER_DIR $IRONIC_PYTHON_AGENT_BUILDER_BRANCH cd $IRONIC_PYTHON_AGENT_BUILDER_DIR/dib export ELEMENTS_PATH=${ELEMENTS_PATH:-`pwd`} -o ""$tempdir/ironic-python-agent-ramdisk"" \ ironic-python-agent-ramdisk mv ""$tempdir/ironic-python-agent-ramdisk.kernel"" ""$kernel_path"" mv ""$tempdir/ironic-python-agent-ramdisk.initramfs"" ""$ramdisk_path"" mv ""$tempdir/ironic-python-agent-ramdisk.iso"" ""$iso_path"""," -o ""$tempdir/ironic-agent"" \ ironic-agent mv ""$tempdir/ironic-agent.kernel"" ""$kernel_path"" mv ""$tempdir/ironic-agent.initramfs"" ""$ramdisk_path"" mv ""$tempdir/ironic-agent.iso"" ""$iso_path""",8,5
openstack%2Fkolla~stable%2Fqueens~I1822a8c610db72654bbacc7148e25a837090b680,openstack/kolla,stable/queens,I1822a8c610db72654bbacc7148e25a837090b680,ceph mds cap 'allow *' in extend_start,MERGED,2019-08-07 07:22:40.000000000,2019-08-09 12:15:25.000000000,2019-08-09 12:15:25.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23181}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-07 07:22:40.000000000', 'files': ['docker/ceph/ceph-mon/extend_start.sh'], 'web_link': 'https://opendev.org/openstack/kolla/commit/689506f537eda0334b26c831b0124b1f434d7021', 'message': ""ceph mds cap 'allow *' in extend_start\n\nThis applies the fix made in kolla-ansible (see [1])\nto kolla ceph mon image directly.\n\n[1] https://review.opendev.org/670035\n\nChange-Id: I1822a8c610db72654bbacc7148e25a837090b680\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n(cherry picked from commit b1d4ed51f41721c86a33d766fdfd80aaccf1df60)\n(cherry picked from commit 2f45d6810e341cd89a20d5fceff0179cde768acc)\n""}]",0,675043,689506f537eda0334b26c831b0124b1f434d7021,11,5,1,30491,,,0,"ceph mds cap 'allow *' in extend_start

This applies the fix made in kolla-ansible (see [1])
to kolla ceph mon image directly.

[1] https://review.opendev.org/670035

Change-Id: I1822a8c610db72654bbacc7148e25a837090b680
Signed-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>
(cherry picked from commit b1d4ed51f41721c86a33d766fdfd80aaccf1df60)
(cherry picked from commit 2f45d6810e341cd89a20d5fceff0179cde768acc)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/43/675043/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/ceph/ceph-mon/extend_start.sh'],1,689506f537eda0334b26c831b0124b1f434d7021,," ceph-authtool --create-keyring ""${KEYRING_ADMIN}"" --gen-key -n client.admin --set-uid=0 --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *'"," ceph-authtool --create-keyring ""${KEYRING_ADMIN}"" --gen-key -n client.admin --set-uid=0 --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow' --cap mgr 'allow *'",1,1
openstack%2Ftripleo-quickstart~master~Idebd929b40097442feee3efbdee3084cb38c9838,openstack/tripleo-quickstart,master,Idebd929b40097442feee3efbdee3084cb38c9838,Bump tripleo quickstart ansible to 2.8,MERGED,2019-06-24 20:36:47.000000000,2019-08-09 12:13:52.000000000,2019-08-09 12:13:52.000000000,"[{'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 24162}, {'_account_id': 25402}, {'_account_id': 27379}]","[{'number': 1, 'created': '2019-06-24 20:36:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/0e5941aa4296202e28ecf5ac81808c2b1d5d36a2', 'message': 'WIP: bump ansible to 2.8\n\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 2, 'created': '2019-06-25 08:57:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/b0a8440204b8281ed99c274a437c2a3381ea03da', 'message': 'WIP: bump ansible to 2.8\n\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 3, 'created': '2019-06-26 14:34:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/414cb98f37b2ed04ee4054e5ef0812d6beb79293', 'message': 'WIP: bump ansible to 2.8\n\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 4, 'created': '2019-07-01 16:21:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/2ce5d33ec3b714b17b9fb4f65ad158812e62ca35', 'message': 'WIP: bump ansible to 2.8\n\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 5, 'created': '2019-07-22 08:53:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/9b891ecae2781ab2ce18fdf440f17163d402686c', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 6, 'created': '2019-07-23 09:06:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/a115be76077f85d3491d8c01f0147864e16ccf03', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\nDepends-On: https://review.opendev.org/#/c/672231/\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 7, 'created': '2019-07-24 17:38:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/a430d5f9be21a021363681ce25fd90eb05a9843b', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\nDepends-On: https://review.opendev.org/#/c/672231/\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 8, 'created': '2019-07-25 04:30:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/d67ab67fe2cc39f4b4e270a507962aa45afa57cc', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\nDepends-On: https://review.opendev.org/#/c/672231/\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 9, 'created': '2019-07-26 12:30:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/863a466498fb8a6289f693b1a8db4a2e7797a688', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\nDepends-On: https://review.opendev.org/#/c/672231/\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 10, 'created': '2019-07-26 16:19:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/1cac351805369749d1af80770ccb4e2efb6c369e', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\nDepends-On: https://review.opendev.org/#/c/672231/\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 11, 'created': '2019-07-26 16:40:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/a6e1ad72a4ee449e99dc9cf7d957ff30a08f1c43', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\n\nDepends-On: https://review.opendev.org/#/c/672231/\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 12, 'created': '2019-07-26 17:08:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/4fe6c30d607c4e3fddf80b817a04efc1a8405fad', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/#/c/671989/\n\nDepends-On: https://review.opendev.org/673021\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 13, 'created': '2019-07-30 14:28:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/e4d15caeae945366febe655bf5f772969b3f7ec3', 'message': 'WIP: bump ansible to 2.8\n\nDepends-On: https://review.opendev.org/673021\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 14, 'created': '2019-08-04 19:20:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/86bf2a5ee3080fabb9d035f56f973fe749c1f86f', 'message': 'WIP: bump ansible to 2.8\n\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 15, 'created': '2019-08-04 19:20:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/8497e15e725795d2eeb54b6ba8eaf92727261077', 'message': 'WIP: bump ansible to 2.8\n\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 16, 'created': '2019-08-07 22:43:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/1b624ceda6f831e52c6dd10ec40dfc339cd45f21', 'message': 'Bump tripleo quickstart ansible to 2.8\n\nDepends-On: https://review.opendev.org/675223\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 17, 'created': '2019-08-07 22:43:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/18d9f243e95fc398cce0121273178f21bd65b73d', 'message': 'Bump tripleo quickstart ansible to 2.8\n\nDepends-On: https://review.opendev.org/675223\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}, {'number': 18, 'created': '2019-08-08 15:03:46.000000000', 'files': ['requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/f95ed60441647fd54e32eeff65dd7f10da0f7a53', 'message': 'Bump tripleo quickstart ansible to 2.8\n\nDepends-On: https://review.opendev.org/675344\nChange-Id: Idebd929b40097442feee3efbdee3084cb38c9838\n'}]",0,667219,f95ed60441647fd54e32eeff65dd7f10da0f7a53,61,9,18,10969,,,0,"Bump tripleo quickstart ansible to 2.8

Depends-On: https://review.opendev.org/675344
Change-Id: Idebd929b40097442feee3efbdee3084cb38c9838
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/19/667219/1 && git format-patch -1 --stdout FETCH_HEAD,['requirements.txt'],1,0e5941aa4296202e28ecf5ac81808c2b1d5d36a2,ansible2.8-oooq,"ansible>=2.8,<2.9",ansible==2.5.7,1,1
openstack%2Ftripleo-heat-templates~stable%2Fstein~I2e88dc34fa59624523de4c52a1873438c78e972f,openstack/tripleo-heat-templates,stable/stein,I2e88dc34fa59624523de4c52a1873438c78e972f,Pacemaker resource upgrade tasks compatible with staged upgrade,MERGED,2019-08-05 15:49:51.000000000,2019-08-09 12:13:51.000000000,2019-08-09 12:13:51.000000000,"[{'_account_id': 8042}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 26343}]","[{'number': 1, 'created': '2019-08-05 15:49:51.000000000', 'files': ['deployment/haproxy/haproxy-pacemaker-puppet.yaml', 'deployment/database/redis-pacemaker-puppet.yaml', 'deployment/cinder/cinder-volume-pacemaker-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-notify-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-rpc-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ea24fc57d025d6ae89db30cbd699e1ea20b1461e', 'message': ""Pacemaker resource upgrade tasks compatible with staged upgrade\n\nAdd better idempotency checks on editing the pacemaker resources and\nfetching and re-tagging new images, which prevents the upgrade from\nfailing. The latest status after staged upgrade looks like this:\n\nOnline: [ controller-0 controller-1 controller-2 ]\nGuestOnline: [ galera-bundle-0@controller-0 galera-bundle-1@controller-1 galera-bundle-2@controller-2 rabbitmq-bundle-0@controller-0 rabbitmq-bundle-1@controller-1 redis-bundle-0@controller-0 redis-bundle-1@controller-1 ]\n\nFull list of resources:\n\n podman container set: galera-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-mariadb:pcmklatest]\n   galera-bundle-0      (ocf::heartbeat:galera):        Master controller-0\n   galera-bundle-1      (ocf::heartbeat:galera):        Master controller-1\n   galera-bundle-2      (ocf::heartbeat:galera):        Master controller-2\n podman container set: rabbitmq-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-rabbitmq:pcmklatest]\n   rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started controller-0\n   rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started controller-1\n podman container set: redis-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-redis:pcmklatest]\n   redis-bundle-0       (ocf::heartbeat:redis): Master controller-0\n   redis-bundle-1       (ocf::heartbeat:redis): Slave controller-1\n ip-192.168.24.8        (ocf::heartbeat:IPaddr2):       Started controller-0\n ip-10.0.0.106  (ocf::heartbeat:IPaddr2):       Started controller-0\n ip-172.17.1.16 (ocf::heartbeat:IPaddr2):       Started controller-0\n ip-172.17.1.23 (ocf::heartbeat:IPaddr2):       Started controller-0\n ip-172.17.3.11 (ocf::heartbeat:IPaddr2):       Started controller-0\n ip-172.17.4.25 (ocf::heartbeat:IPaddr2):       Started controller-0\n podman container set: haproxy-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-haproxy:pcmklatest]\n   haproxy-bundle-podman-0      (ocf::heartbeat:podman):        Started controller-0\n   haproxy-bundle-podman-1      (ocf::heartbeat:podman):        Started controller-1\n   haproxy-bundle-podman-2      (ocf::heartbeat:podman):        Stopped\n podman container: openstack-cinder-volume [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-cinder-volume:pcmklatest]\n   openstack-cinder-volume-podman-0     (ocf::heartbeat:podman):        Started controller-1\n\nFailed Resource Actions:\n* rabbitmq_monitor_10000 on rabbitmq-bundle-0 'unknown error' (1): call=4861, status=Timed Out, exitreason='',\n    last-rc-change='Mon Aug  5 10:37:51 2019', queued=0ms, exec=0ms\n* rabbitmq_monitor_10000 on rabbitmq-bundle-1 'unknown error' (1): call=42, status=Timed Out, exitreason='',\n    last-rc-change='Mon Aug  5 10:15:55 2019', queued=0ms, exec=0ms\n\nThis indicates that there are still issues we'll need to solve, but at\nleast the upgrade passes now and we can keep solving the follow-up\nissues while the critical upgrade path is unblocked.\n\nCloses-Bug: #1838971\nChange-Id: I2e88dc34fa59624523de4c52a1873438c78e972f\n(cherry picked from commit 8827e4f7f10d71027d9be4fbe650f9d1beccedeb)\n""}]",0,674638,ea24fc57d025d6ae89db30cbd699e1ea20b1461e,11,4,1,8042,,,0,"Pacemaker resource upgrade tasks compatible with staged upgrade

Add better idempotency checks on editing the pacemaker resources and
fetching and re-tagging new images, which prevents the upgrade from
failing. The latest status after staged upgrade looks like this:

Online: [ controller-0 controller-1 controller-2 ]
GuestOnline: [ galera-bundle-0@controller-0 galera-bundle-1@controller-1 galera-bundle-2@controller-2 rabbitmq-bundle-0@controller-0 rabbitmq-bundle-1@controller-1 redis-bundle-0@controller-0 redis-bundle-1@controller-1 ]

Full list of resources:

 podman container set: galera-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-mariadb:pcmklatest]
   galera-bundle-0      (ocf::heartbeat:galera):        Master controller-0
   galera-bundle-1      (ocf::heartbeat:galera):        Master controller-1
   galera-bundle-2      (ocf::heartbeat:galera):        Master controller-2
 podman container set: rabbitmq-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-rabbitmq:pcmklatest]
   rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started controller-0
   rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started controller-1
 podman container set: redis-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-redis:pcmklatest]
   redis-bundle-0       (ocf::heartbeat:redis): Master controller-0
   redis-bundle-1       (ocf::heartbeat:redis): Slave controller-1
 ip-192.168.24.8        (ocf::heartbeat:IPaddr2):       Started controller-0
 ip-10.0.0.106  (ocf::heartbeat:IPaddr2):       Started controller-0
 ip-172.17.1.16 (ocf::heartbeat:IPaddr2):       Started controller-0
 ip-172.17.1.23 (ocf::heartbeat:IPaddr2):       Started controller-0
 ip-172.17.3.11 (ocf::heartbeat:IPaddr2):       Started controller-0
 ip-172.17.4.25 (ocf::heartbeat:IPaddr2):       Started controller-0
 podman container set: haproxy-bundle [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-haproxy:pcmklatest]
   haproxy-bundle-podman-0      (ocf::heartbeat:podman):        Started controller-0
   haproxy-bundle-podman-1      (ocf::heartbeat:podman):        Started controller-1
   haproxy-bundle-podman-2      (ocf::heartbeat:podman):        Stopped
 podman container: openstack-cinder-volume [brew-pulp-docker01.web.prod.ext.phx2.redhat.com:8888/rhosp15/openstack-cinder-volume:pcmklatest]
   openstack-cinder-volume-podman-0     (ocf::heartbeat:podman):        Started controller-1

Failed Resource Actions:
* rabbitmq_monitor_10000 on rabbitmq-bundle-0 'unknown error' (1): call=4861, status=Timed Out, exitreason='',
    last-rc-change='Mon Aug  5 10:37:51 2019', queued=0ms, exec=0ms
* rabbitmq_monitor_10000 on rabbitmq-bundle-1 'unknown error' (1): call=42, status=Timed Out, exitreason='',
    last-rc-change='Mon Aug  5 10:15:55 2019', queued=0ms, exec=0ms

This indicates that there are still issues we'll need to solve, but at
least the upgrade passes now and we can keep solving the follow-up
issues while the critical upgrade path is unblocked.

Closes-Bug: #1838971
Change-Id: I2e88dc34fa59624523de4c52a1873438c78e972f
(cherry picked from commit 8827e4f7f10d71027d9be4fbe650f9d1beccedeb)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/38/674638/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/haproxy/haproxy-pacemaker-puppet.yaml', 'deployment/database/redis-pacemaker-puppet.yaml', 'deployment/cinder/cinder-volume-pacemaker-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-notify-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-rpc-pacemaker-puppet.yaml']",7,ea24fc57d025d6ae89db30cbd699e1ea20b1461e,leapp-stein," - name: Get container rabbitmq image set_fact: rabbitmq_image: {get_param: DockerRabbitmqImage} rabbitmq_image_latest: *rabbitmq_image_pcmklatest - name: Pull latest rabbitmq images command: ""{{container_cli}} pull {{rabbitmq_image}}"" - name: Get previous rabbitmq image id shell: ""{{container_cli}} inspect --format '{{'{{'}}.Id{{'}}'}}' {{rabbitmq_image_latest}}"" register: old_rabbitmq_image_id failed_when: false - name: Get new rabbitmq image id shell: ""{{container_cli}} inspect --format '{{'{{'}}.Id{{'}}'}}' {{rabbitmq_image}}"" register: new_rabbitmq_image_id - name: Retag pcmklatest to latest rabbitmq image include_role: container_image: ""{{rabbitmq_image}}"" container_image_latest: ""{{rabbitmq_image_latest}}"" when: - old_rabbitmq_image_id.stdout != new_rabbitmq_image_id.stdout - block: - name: Get a list of container using rabbitmq image shell: ""{{container_cli}} ps -a -q -f 'ancestor={{old_rabbitmq_image_id.stdout}}'"" register: rabbitmq_containers_to_destroy # It will be recreated with the delpoy step. - name: Remove any container using the same rabbitmq image shell: ""{{container_cli}} rm -fv {{item}}"" with_items: ""{{ rabbitmq_containers_to_destroy.stdout_lines }}"" - name: Remove previous rabbitmq images shell: ""{{container_cli}} rmi -f {{old_rabbitmq_image_id.stdout}}"" when: - old_rabbitmq_image_id.stdout != '' - old_rabbitmq_image_id.stdout != new_rabbitmq_image_id.stdout upgrade_tasks: - name: Prepare switch of rabbitmq image name when: - step|int == 0 block: - name: Get rabbitmq image id currently used by pacemaker shell: ""pcs resource config rabbitmq-bundle | grep -Eo 'image=[^ ]+' | awk -F= '{print $2;}'"" register: rabbitmq_image_current_res failed_when: false - name: Image facts for rabbitmq set_fact: rabbitmq_image_latest: *rabbitmq_image_pcmklatest rabbitmq_image_current: ""{{rabbitmq_image_current_res.stdout}}"" - name: Prepare the switch to new rabbitmq container image name in pacemaker block: - name: Temporarily tag the current rabbitmq image id with the upgraded image name import_role: name: tripleo-container-tag vars: container_image: ""{{rabbitmq_image_current}}"" container_image_latest: ""{{rabbitmq_image_latest}}"" pull_image: false when: - rabbitmq_image_current != '' - rabbitmq_image_current != rabbitmq_image_latest - name: Check rabbitmq cluster resource status shell: pcs resource config rabbitmq-bundle failed_when: false register: rabbitmq_pcs_res_result - name: Set fact rabbitmq_pcs_res set_fact: rabbitmq_pcs_res: ""{{rabbitmq_pcs_res_result|succeeded}}"" - name: set is_rpc_rabbitmq_bootstrap_node fact set_fact: is_rpc_rabbitmq_bootstrap_node={{oslo_messaging_rpc_short_bootstrap_node_name|lower == ansible_hostname|lower}} - name: Update rabbitmq-bundle pcs resource bundle for new container image when: - step|int == 1 - is_rpc_rabbitmq_bootstrap_node|bool - rabbitmq_pcs_res|bool - rabbitmq_image_current != rabbitmq_image_latest block: - name: Disable the rabbitmq cluster resource before container upgrade pacemaker_resource: resource: rabbitmq-bundle state: disable wait_for_resource: true register: output retries: 5 until: output.rc == 0 - name: Move rabbitmq logging to /var/log/containers block: - name: Check rabbitmq logging configuration in pacemaker command: cibadmin --query --xpath ""//storage-mapping[@id='rabbitmq-log']"" ignore_errors: true register: rabbitmq_logs_moved - name: Add a bind mount for logging in the rabbitmq bundle # rc == 6 means the configuration doesn't exist in the CIB when: rabbitmq_logs_moved.rc == 6 command: pcs resource bundle update rabbitmq-bundle storage-map add id=rabbitmq-log source-dir=/var/log/containers/rabbitmq target-dir=/var/log/rabbitmq options=rw - name: Update the rabbitmq bundle to use the new container image name command: ""pcs resource bundle update rabbitmq-bundle container image={{rabbitmq_image_latest}}"" - name: Enable the rabbitmq cluster resource pacemaker_resource: resource: rabbitmq-bundle state: enable wait_for_resource: true register: output retries: 5 until: output.rc == 0 - name: Create hiera data to upgrade oslo messaging rpc in a stepwise manner. You can't upgrade oslo_messaging_rpc without staged upgrade. You need to use the limit option in order"," - name: Get docker Rabbitmq image set_fact: docker_image: {get_param: DockerRabbitmqImage} docker_image_latest: *rabbitmq_image_pcmklatest - name: Get previous Rabbitmq image id shell: ""{{container_cli}} images | awk '/rabbitmq.* pcmklatest/{print $3}' | uniq"" register: rabbitmq_image_id - block: - name: Get a list of container using Rabbitmq image shell: ""{{container_cli}} ps -a -q -f 'ancestor={{rabbitmq_image_id.stdout}}'"" register: rabbitmq_containers_to_destroy # It will be recreated with the delpoy step. - name: Remove any container using the same Rabbitmq image shell: ""{{container_cli}} rm -fv {{item}}"" with_items: ""{{ rabbitmq_containers_to_destroy.stdout_lines }}"" - name: Remove previous Rabbitmq images shell: ""{{container_cli}} rmi -f {{rabbitmq_image_id.stdout}}"" when: - rabbitmq_image_id.stdout != '' - name: Pull latest Rabbitmq images command: ""{{container_cli}} pull {{docker_image}}"" - name: Retag pcmklatest to latest Rabbitmq image import_role: container_image: ""{{docker_image}}"" container_image_latest: ""{{docker_image_latest}}"" # Got to check that pacemaker_is_active is working fine with bundle. # TODO: pacemaker_is_active resource doesn't support bundle. upgrade_tasks: - name: Create hiera data to upgrade oslo_messaging_rpc in a stepwise manner. You can't upgrade oslo_messaging_rpc without staged upgrade. You need to use the limit option in order - name: Get docker Rabbitmq image set_fact: rabbitmq_docker_image_latest: *rabbitmq_image_pcmklatest - name: set is_rpc_rabbitmq_bootstrap_node fact set_fact: is_rpc_rabbitmq_bootstrap_node={{oslo_messaging_rpc_short_bootstrap_node_name|lower == ansible_hostname|lower}} - name: Prepare the switch to new rabbitmq container image name in pacemaker when: - step|int == 0 block: - name: Get rabbitmq image id currently used by pacemaker shell: ""{{container_cli}} images | awk '/rabbitmq.* pcmklatest/{print $3}' | uniq"" register: rabbitmq_current_pcmklatest_id - name: Temporarily tag the current rabbitmq image id with the upgraded image name import_role: name: tripleo-container-tag vars: container_image: ""{{rabbitmq_current_pcmklatest_id.stdout}}"" container_image_latest: ""{{rabbitmq_docker_image_latest}}"" pull_image: false when: rabbitmq_current_pcmklatest_id.stdout != '' - name: Check rabbitmq-bundle cluster resource status pacemaker_resource: resource: rabbitmq-bundle state: show check_mode: false ignore_errors: true register: rabbit_pcs_res - name: Update rabbitmq-bundle pcs resource bundle for new container image when: - step|int == 1 - is_rpc_rabbitmq_bootstrap_node - rabbit_pcs_res|succeeded block: - name: Disable the rabbitmq cluster resource before container upgrade pacemaker_resource: resource: rabbitmq-bundle state: disable wait_for_resource: true register: output retries: 5 until: output.rc == 0 - name: Move rabbitmq logging to /var/log/containers block: - name: Check rabbitmq logging configuration in pacemaker command: cibadmin --query --xpath ""//storage-mapping[@id='rabbitmq-log']"" ignore_errors: true register: rabbitmq_logs_moved - name: Add a bind mount for logging in the rabbitmq bundle # rc == 6 means the configuration doesn't exist in the CIB when: rabbitmq_logs_moved.rc == 6 command: pcs resource bundle update rabbitmq-bundle storage-map add id=rabbitmq-log source-dir=/var/log/containers/rabbitmq target-dir=/var/log/rabbitmq options=rw - name: Update the rabbitmq bundle to use the new container image name command: ""pcs resource bundle update rabbitmq-bundle container image={{rabbitmq_docker_image_latest}}"" - name: Enable the rabbitmq cluster resource pacemaker_resource: resource: rabbitmq-bundle state: enable wait_for_resource: true register: output retries: 5 until: output.rc == 0",682,576
openstack%2Fmetalsmith~stable%2Fstein~I52a85620d9ac2f471bca6498294871f3bb16d47f,openstack/metalsmith,stable/stein,I52a85620d9ac2f471bca6498294871f3bb16d47f,Ensure instance_info is clean before deploy and after failure,MERGED,2019-05-17 12:15:53.000000000,2019-08-09 12:12:38.000000000,2019-08-09 12:12:38.000000000,"[{'_account_id': 10343}, {'_account_id': 22348}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-05-17 12:15:53.000000000', 'files': ['releasenotes/notes/iinfo-2014b1de4dbeca2d.yaml', 'metalsmith/test/test_provisioner.py', 'metalsmith/_provisioner.py'], 'web_link': 'https://opendev.org/openstack/metalsmith/commit/b941aaa48e977b02101d271598643cf3258a6e3c', 'message': 'Ensure instance_info is clean before deploy and after failure\n\nCurrently stale values can be left in instance_info (and reused next time)\nif a deployment attempts fails. This change ensures that we:\n1) Purge instance_info completely on failures\n2) Only keep traits and capabilities in instance_info on deploy.\n\nChange-Id: I52a85620d9ac2f471bca6498294871f3bb16d47f\n(cherry picked from commit 8e7b8d3f398fd206af74708d53857154f9e8e6a1)\n'}]",0,659784,b941aaa48e977b02101d271598643cf3258a6e3c,7,3,1,10239,,,0,"Ensure instance_info is clean before deploy and after failure

Currently stale values can be left in instance_info (and reused next time)
if a deployment attempts fails. This change ensures that we:
1) Purge instance_info completely on failures
2) Only keep traits and capabilities in instance_info on deploy.

Change-Id: I52a85620d9ac2f471bca6498294871f3bb16d47f
(cherry picked from commit 8e7b8d3f398fd206af74708d53857154f9e8e6a1)
",git fetch https://review.opendev.org/openstack/metalsmith refs/changes/84/659784/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/iinfo-2014b1de4dbeca2d.yaml', 'metalsmith/test/test_provisioner.py', 'metalsmith/_provisioner.py']",3,b941aaa48e977b02101d271598643cf3258a6e3c,,"_PRESERVE_INSTANCE_INFO_KEYS = {'capabilities', 'traits'} instance_info = self._clean_instance_info(node.instance_info) def _clean_instance_info(self, instance_info): return {key: value for key, value in instance_info.items() if key in _PRESERVE_INSTANCE_INFO_KEYS} LOG.debug('Updating node %(node)s with empty instance info (was ' '%(iinfo)s) and extras %(extra)s and releasing the lock', 'iinfo': node.instance_info, node, instance_info={}, extra=extra, instance_id=None)"," instance_info = node.instance_info.copy() instance_info = node.instance_info.copy() instance_info.pop(self.HOSTNAME_FIELD, None) LOG.debug('Updating node %(node)s with instance info %(iinfo)s ' 'and extras %(extra)s and releasing the lock', 'iinfo': instance_info, node, instance_info=instance_info, extra=extra, instance_id=None)",21,8
openstack%2Fkeystone~master~Iff9cd6c076388e347eb27f317157c6f7239e05bf,openstack/keystone,master,Iff9cd6c076388e347eb27f317157c6f7239e05bf,Fix missing print format and missing ws between words,MERGED,2019-08-05 03:24:08.000000000,2019-08-09 11:59:57.000000000,2019-08-09 11:59:57.000000000,"[{'_account_id': 1916}, {'_account_id': 2903}, {'_account_id': 15054}, {'_account_id': 20190}, {'_account_id': 22348}, {'_account_id': 27621}]","[{'number': 1, 'created': '2019-08-05 03:24:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/keystone/commit/a51f5ce3ce0d477300ca6d5713bd21257760e1f0', 'message': 'Fix missing print format and missing ws between words\n\nThis is to fix:\n1. missing print format\n2. missing ws between words in log messages\n\nChange-Id: Iff9cd6c076388e347eb27f317157c6f7239e05bf\n'}, {'number': 2, 'created': '2019-08-06 00:41:00.000000000', 'files': ['keystone/identity/backends/ldap/common.py', 'keystone/api/os_simple_cert.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/5d4bf308c4d392ced48fd81003e2816984c78712', 'message': 'Fix missing print format and missing ws between words\n\nThis is to fix:\n1. missing print format\n2. missing ws between words in log messages\n\nChange-Id: Iff9cd6c076388e347eb27f317157c6f7239e05bf\n'}]",0,674521,5d4bf308c4d392ced48fd81003e2816984c78712,24,6,2,20190,,,0,"Fix missing print format and missing ws between words

This is to fix:
1. missing print format
2. missing ws between words in log messages

Change-Id: Iff9cd6c076388e347eb27f317157c6f7239e05bf
",git fetch https://review.opendev.org/openstack/keystone refs/changes/21/674521/2 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/identity/backends/ldap/common.py', 'keystone/api/os_simple_cert.py']",2,a51f5ce3ce0d477300ca6d5713bd21257760e1f0,missing_ws, message=_('This API is no longer available due to the removal ' 'of support for PKI tokens. Returning a 410 instead ' message=_('This API is no longer available due to the removal ' 'of support for PKI tokens. Returning a 410 instead ', message=_('This API is no longer available due to the removal' 'of support for PKI tokens. Returning a 410 instead' message=_('This API is no longer available due to the removal' 'of support for PKI tokens. Returning a 410 instead',5,5
openstack%2Fhorizon~master~Ibc5534571bb21767c3ede322c39e783d4299f694,openstack/horizon,master,Ibc5534571bb21767c3ede322c39e783d4299f694,Imported Translations from Zanata,MERGED,2019-08-09 08:59:09.000000000,2019-08-09 11:57:15.000000000,2019-08-09 11:57:15.000000000,"[{'_account_id': 841}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-09 08:59:09.000000000', 'files': ['openstack_dashboard/locale/ru/LC_MESSAGES/django.po'], 'web_link': 'https://opendev.org/openstack/horizon/commit/f966365ddc97b523e20d131deb0e36aea6866a3d', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: Ibc5534571bb21767c3ede322c39e783d4299f694\n'}]",0,675562,f966365ddc97b523e20d131deb0e36aea6866a3d,6,2,1,11131,,,0,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: Ibc5534571bb21767c3ede322c39e783d4299f694
",git fetch https://review.opendev.org/openstack/horizon refs/changes/62/675562/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_dashboard/locale/ru/LC_MESSAGES/django.po'],1,f966365ddc97b523e20d131deb0e36aea6866a3d,zanata/translations,"""POT-Creation-Date: 2019-08-08 18:06+0000\n""""PO-Revision-Date: 2019-08-08 02:54+0000\n"""" If a snapshot is specified here only the specified snapshot of the volume\n"" "" will be backed up.\n"" "" </p>\n"" "" "" msgstr """" ""\n"" ""    ,       \n"" ""   .\n"" "" </p>\n"" "" "" msgid """" ""\n""msgid ""Backup Snapshot"" msgstr ""  "" msgid ""No snapshot for this volume"" msgstr ""     "" msgid ""Select snapshot to backup (Optional)"" msgstr ""     ()"" msgid ""Unable to attach volume: %s"" msgstr ""  : %s"" #, python-format#, python-format msgid ""Unable to detach volume: %s"" msgstr ""  : %s"" msgid ""Unable to fetch snapshot"" msgstr ""   "" msgid ""Unable to fetch snapshots"" msgstr ""   "" ","""POT-Creation-Date: 2019-08-05 06:15+0000\n""""PO-Revision-Date: 2019-08-05 07:19+0000\n""",38,2
openstack%2Fopenstacksdk~master~I2647b211a02e4fbc8f4850c420249398eaee9e74,openstack/openstacksdk,master,I2647b211a02e4fbc8f4850c420249398eaee9e74,Initalize pool_executor so close works,MERGED,2019-08-07 13:39:20.000000000,2019-08-09 11:56:46.000000000,2019-08-09 11:56:46.000000000,"[{'_account_id': 3099}, {'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2019-08-07 13:39:20.000000000', 'files': ['openstack/tests/unit/cloud/test_shade.py', 'openstack/connection.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/28d31345833b2af163fa6391258e72dd2b0df626', 'message': ""Initalize pool_executor so close works\n\nThe close method, called by the context manager, blows up if\nthe Connection hasn't been used to upload any large swift objects,\nbecause the pool executor object hasn't been created. Initialize\nthe variable so that the context manager works again.\n\nChange-Id: I2647b211a02e4fbc8f4850c420249398eaee9e74\n""}]",0,675120,28d31345833b2af163fa6391258e72dd2b0df626,12,4,1,2,,,0,"Initalize pool_executor so close works

The close method, called by the context manager, blows up if
the Connection hasn't been used to upload any large swift objects,
because the pool executor object hasn't been created. Initialize
the variable so that the context manager works again.

Change-Id: I2647b211a02e4fbc8f4850c420249398eaee9e74
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/20/675120/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/tests/unit/cloud/test_shade.py', 'openstack/connection.py']",2,28d31345833b2af163fa6391258e72dd2b0df626,, self.__pool_executor = None,,10,0
openstack%2Fnetworking-ovn~master~I1ad224960173fe896f6eb8049a188d9e82874068,openstack/networking-ovn,master,I1ad224960173fe896f6eb8049a188d9e82874068,Fix gateway blockers,MERGED,2019-08-05 10:53:10.000000000,2019-08-09 11:47:18.000000000,2019-08-09 11:47:18.000000000,"[{'_account_id': 6773}, {'_account_id': 8655}, {'_account_id': 10237}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 24791}]","[{'number': 1, 'created': '2019-08-05 10:53:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/ab83720bac1468987779d85b6352e3b63e149ed4', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids.\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 2, 'created': '2019-08-05 10:54:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/9ccefec04d248ebbc84fdff2522a1d556f060a97', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its id [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 3, 'created': '2019-08-05 11:43:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/0900b020ee0670fa78e5800e778f170392bada5b', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 4, 'created': '2019-08-05 12:53:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/1725dcf4398cea91d1785bf8d91798a2f358fb4b', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nRelated-Bug: #1838977\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 5, 'created': '2019-08-05 14:25:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/a04a27927f87cb254d22d704a0fa16c332fd7fa5', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nRelated-Bug: #1838977\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 6, 'created': '2019-08-05 15:08:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/f80db2256fef24da77d8c2c40d3a7ae782f5edf0', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nRelated-Bug: #1838977\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 7, 'created': '2019-08-06 07:53:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/753ebe628a35e89defaedc5faa1b212220204169', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nRelated-Bug: #1838977\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 8, 'created': '2019-08-07 14:02:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/667dac2973e6be8c759aa2c6fda7f35fbb3a0c44', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nDepends-On: https://review.opendev.org/#/c/675044/\nRelated-Bug: #1838977\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 9, 'created': '2019-08-08 07:49:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/f2dd513e648761cd441c806d79a9815990f4eb18', 'message': 'Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [0].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nDepends-On: https://review.opendev.org/#/c/675044/\nDepends-On: https://review.opendev.org/#/c/675261/\nRelated-Bug: #1838977\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n'}, {'number': 10, 'created': '2019-08-08 08:59:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/9a9ac27f4c5d7c3d4e3df3fadb0050b035620aed', 'message': ""Fix test_update_port_with_empty_data and add mock for _check_for_socket_ready\n\nThis patch squaches two commits:\n\n1) Fix test_update_port_with_empty_data\n\nTest test_update_port_with_empty_data from TestOVNMechanismDriverPortsV2\nclass in neutron is runned agains:\nneutron.tests.unit.plugins.ml2.drivers.mechanism_test.TestMechanismDriver\nwhich in fact during update_port_postcommit() does nothing with\nthe port, only validates it [0].\n\nIn networking-ovn this test is runned against real mechanism driver:\nnetworking_ovn.ml2.mech_driver.OVNMechanismDriver. This ends with\nlittle difference - to port dict 'network' information is added\nduring call of update_port_postcommit(). The port data itself\nremains the same.\n\nThis patch modifies the test to pop('network'), and checks if other\nfields were not modified, like in neutron tests.\n\n2) Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [1].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://github.com/openstack/neutron/blob/master/neutron/tests/unit/plugins/ml2/drivers/mechanism_test.py#L208\n[1] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nRelated-Bug: #1838977\nCloses-Bug: #1839434\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n""}, {'number': 11, 'created': '2019-08-08 12:25:20.000000000', 'files': ['networking_ovn/tests/unit/ml2/test_mech_driver.py', 'test-requirements.txt', 'networking_ovn/tests/unit/octavia/test_ovn_driver.py', 'networking_ovn/ml2/mech_driver.py', 'networking_ovn/tests/functional/octavia/test_ovn_driver.py'], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/b2b5e89bca25570a757c62fc6e30277365dae456', 'message': ""Fix gateway blockers\n\nThis patch squaches two commits:\n\n1) Do not modify passed by reference variables in mechanism_driver\n\nTest test_update_port_with_empty_data [0] from TestOVNMechanismDriverPortsV2\nclass in neutron is runned agains:\nneutron.tests.unit.plugins.ml2.drivers.mechanism_test.TestMechanismDriver\nwhich in fact during update_port_postcommit() does nothing with\nthe port, only validates it [1].\n\nIn networking-ovn this test is runned against real mechanism driver:\nnetworking_ovn.ml2.mech_driver.OVNMechanismDriver. This ends with\nlittle difference - to port dict 'network' information is added\nduring call of update_port_postcommit(). The port data itself\nremains the same.\nWe shouldn't modify passed by reference variables there. So doing\ndeepcopy on all provided data.\n\nHere comes also the question if this test inheritance is the\nright way.\n\n2) Add mock for _check_for_socket_ready\n\nRecently in new octavia-lib release driver-lib provides\nget methods for quering objects by its ids [2].\nWe need to mock() socket communication in tests, otherwise\nall the tests fails blocking CI.\n\n[0] https://review.opendev.org/#/c/673486\n[1] https://github.com/openstack/neutron/blob/master/neutron/tests/unit/plugins/ml2/drivers/mechanism_test.py#L208\n[2] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda\n\nRelated-Bug: #1838977\nCloses-Bug: #1839434\nChange-Id: I1ad224960173fe896f6eb8049a188d9e82874068\n""}]",8,674574,b2b5e89bca25570a757c62fc6e30277365dae456,56,6,11,24791,,,0,"Fix gateway blockers

This patch squaches two commits:

1) Do not modify passed by reference variables in mechanism_driver

Test test_update_port_with_empty_data [0] from TestOVNMechanismDriverPortsV2
class in neutron is runned agains:
neutron.tests.unit.plugins.ml2.drivers.mechanism_test.TestMechanismDriver
which in fact during update_port_postcommit() does nothing with
the port, only validates it [1].

In networking-ovn this test is runned against real mechanism driver:
networking_ovn.ml2.mech_driver.OVNMechanismDriver. This ends with
little difference - to port dict 'network' information is added
during call of update_port_postcommit(). The port data itself
remains the same.
We shouldn't modify passed by reference variables there. So doing
deepcopy on all provided data.

Here comes also the question if this test inheritance is the
right way.

2) Add mock for _check_for_socket_ready

Recently in new octavia-lib release driver-lib provides
get methods for quering objects by its ids [2].
We need to mock() socket communication in tests, otherwise
all the tests fails blocking CI.

[0] https://review.opendev.org/#/c/673486
[1] https://github.com/openstack/neutron/blob/master/neutron/tests/unit/plugins/ml2/drivers/mechanism_test.py#L208
[2] https://github.com/openstack/octavia-lib/commit/d700c00a90fd62b4f6cb9eb30ebe5f619dd6bfda

Related-Bug: #1838977
Closes-Bug: #1839434
Change-Id: I1ad224960173fe896f6eb8049a188d9e82874068
",git fetch https://review.opendev.org/openstack/networking-ovn refs/changes/74/674574/7 && git format-patch -1 --stdout FETCH_HEAD,['networking_ovn/tests/unit/octavia/test_ovn_driver.py'],1,ab83720bac1468987779d85b6352e3b63e149ed4,bug/1838977,"from octavia_lib.api.drivers import driver_lib mock.patch.object( driver_lib.DriverLibrary, '_check_for_socket_ready').start()",,3,0
openstack%2Fnova~stable%2Frocky~I347096a527c257075cefe7b81210622f6cd87daf,openstack/nova,stable/rocky,I347096a527c257075cefe7b81210622f6cd87daf,Don't generate service UUID for deleted services,MERGED,2019-07-31 13:57:22.000000000,2019-08-09 11:46:26.000000000,2019-08-09 02:31:22.000000000,"[{'_account_id': 4393}, {'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-31 13:57:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d9094e54fbb6a25c8cf189c4fd9fbb8d66cec145', 'message': ""Don't generate service UUID for deleted services\n\nIn Pike, we added a UUID field to services and during an upgrade from\nOcata => Pike, when instances are accessed joined with their associated\nservices, we generate a UUID for the services on-the-fly.\n\nThis causes a problem in the scenario where an operator upgrades their\ncluster and has old, deleted services with hostnames matching existing\nservices associated with instances. When we go to generate the service\nUUID for the old, deleted service, we hit a ServiceTooOld exception.\n\nThis addresses the problem by not bothering to generate a UUID for a\ndeleted service. One alternative would be to exclude deleted services\nwhen we join the 'instances' and 'services' tables, but I'm not sure\nwhether that approach might cause unintended effects where service\ninformation that used to be viewable for instances becomes hidden.\n\nCloses-Bug: #1778305\nCloses-Bug: #1764556\n\nConflicts:\n      nova/tests/functional/regressions/test_bug_1764556.py\n\nNOTE(mriedem): The conflict is due to eadd78efe3 removing the\nfunc_fixtures import.\n\nChange-Id: I347096a527c257075cefe7b81210622f6cd87daf\n(cherry picked from commit 16e163053ca39886f11fdb8a3af10a28619fc105)\n(cherry picked from commit 8601ca75b1515e7434f1d3c563a0e65458c8c86a)\n""}, {'number': 2, 'created': '2019-08-08 17:03:07.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1778305.py', 'nova/objects/service.py', 'nova/tests/functional/regressions/test_bug_1764556.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/72f9aa720f9137a35d55b9f96e2220d2d0e5588d', 'message': ""Don't generate service UUID for deleted services\n\nIn Pike, we added a UUID field to services and during an upgrade from\nOcata => Pike, when instances are accessed joined with their associated\nservices, we generate a UUID for the services on-the-fly.\n\nThis causes a problem in the scenario where an operator upgrades their\ncluster and has old, deleted services with hostnames matching existing\nservices associated with instances. When we go to generate the service\nUUID for the old, deleted service, we hit a ServiceTooOld exception.\n\nThis addresses the problem by not bothering to generate a UUID for a\ndeleted service. One alternative would be to exclude deleted services\nwhen we join the 'instances' and 'services' tables, but I'm not sure\nwhether that approach might cause unintended effects where service\ninformation that used to be viewable for instances becomes hidden.\n\nCloses-Bug: #1778305\nCloses-Bug: #1764556\n\nConflicts:\n      nova/tests/functional/regressions/test_bug_1764556.py\n\nNOTE(mriedem): The conflict is due to eadd78efe3 removing the\nfunc_fixtures import.\n\nChange-Id: I347096a527c257075cefe7b81210622f6cd87daf\n(cherry picked from commit 16e163053ca39886f11fdb8a3af10a28619fc105)\n(cherry picked from commit 8601ca75b1515e7434f1d3c563a0e65458c8c86a)\n""}]",0,673821,72f9aa720f9137a35d55b9f96e2220d2d0e5588d,17,9,2,6873,,,0,"Don't generate service UUID for deleted services

In Pike, we added a UUID field to services and during an upgrade from
Ocata => Pike, when instances are accessed joined with their associated
services, we generate a UUID for the services on-the-fly.

This causes a problem in the scenario where an operator upgrades their
cluster and has old, deleted services with hostnames matching existing
services associated with instances. When we go to generate the service
UUID for the old, deleted service, we hit a ServiceTooOld exception.

This addresses the problem by not bothering to generate a UUID for a
deleted service. One alternative would be to exclude deleted services
when we join the 'instances' and 'services' tables, but I'm not sure
whether that approach might cause unintended effects where service
information that used to be viewable for instances becomes hidden.

Closes-Bug: #1778305
Closes-Bug: #1764556

Conflicts:
      nova/tests/functional/regressions/test_bug_1764556.py

NOTE(mriedem): The conflict is due to eadd78efe3 removing the
func_fixtures import.

Change-Id: I347096a527c257075cefe7b81210622f6cd87daf
(cherry picked from commit 16e163053ca39886f11fdb8a3af10a28619fc105)
(cherry picked from commit 8601ca75b1515e7434f1d3c563a0e65458c8c86a)
",git fetch https://review.opendev.org/openstack/nova refs/changes/21/673821/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/regressions/test_bug_1778305.py', 'nova/objects/service.py', 'nova/tests/functional/regressions/test_bug_1764556.py']",3,d9094e54fbb6a25c8cf189c4fd9fbb8d66cec145,bug/1764556," servers = self.admin_api.get_servers(detail=True) for server in servers: self.assertEqual('UP', server['host_status'])","import six from nova.tests.functional.api import client as api_client # FIXME(mriedem): This is bug 1764556 where the join on the services # table also pulls the deleted service that doesn't have a uuid and # attempts to migrate that service to have a uuid, which fails because # it's not using a read_deleted='yes' context. ex = self.assertRaises(api_client.OpenStackApiException, self.admin_api.get_servers, detail=True) self.assertIn('ServiceNotFound', six.text_type(ex))",13,26
openstack%2Fpython-ironic-inspector-client~master~I1d8cd5a98bdbb0be21481fac34e2305d561af9a4,openstack/python-ironic-inspector-client,master,I1d8cd5a98bdbb0be21481fac34e2305d561af9a4,Switch base job to ironic-base,MERGED,2019-06-27 02:44:28.000000000,2019-08-09 11:40:50.000000000,2019-06-27 11:37:53.000000000,"[{'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2019-06-27 02:44:28.000000000', 'files': ['zuul.d/python-ironic-inspector-client-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/519190d59e1d6363c56f4c6fd52bc7c0d02d9e53', 'message': 'Switch base job to ironic-base\n\nSwitch inspector client base job to ironic-base, and remove\nsome overrides with the identical value to base job.\n\nChange-Id: I1d8cd5a98bdbb0be21481fac34e2305d561af9a4\n'}]",2,667774,519190d59e1d6363c56f4c6fd52bc7c0d02d9e53,9,3,1,24828,,,0,"Switch base job to ironic-base

Switch inspector client base job to ironic-base, and remove
some overrides with the identical value to base job.

Change-Id: I1d8cd5a98bdbb0be21481fac34e2305d561af9a4
",git fetch https://review.opendev.org/openstack/python-ironic-inspector-client refs/changes/74/667774/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/python-ironic-inspector-client-jobs.yaml'],1,519190d59e1d6363c56f4c6fd52bc7c0d02d9e53,gate, parent: ironic-base," parent: devstack-tempest DEFAULT_INSTANCE_TYPE: baremetal INSTALL_TEMPEST: False # Don't install a tempest package globaly OVERRIDE_PUBLIC_BRIDGE_MTU: 1400 TEMPEST_PLUGINS: ""'{{ ansible_user_dir }}/src/opendev.org/openstack/ironic-tempest-plugin'"" VIRT_DRIVER: ironic",1,6
openstack%2Foslo.config~master~Iac913e9dea8318ad8398ed7478cb66d845fe7f1e,openstack/oslo.config,master,Iac913e9dea8318ad8398ed7478cb66d845fe7f1e,Bump the openstackdocstheme extension to 1.20,MERGED,2019-07-05 02:10:33.000000000,2019-08-09 11:39:15.000000000,2019-08-09 11:39:15.000000000,"[{'_account_id': 6928}, {'_account_id': 22348}, {'_account_id': 27822}, {'_account_id': 28522}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-07-05 02:10:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.config/commit/4bcd714a1b9b35ae19e193bdc22daecad25be94f', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: Iac913e9dea8318ad8398ed7478cb66d845fe7f1e\n'}, {'number': 2, 'created': '2019-08-01 01:46:05.000000000', 'files': ['doc/source/conf.py', 'lower-constraints.txt', 'doc/requirements.txt', 'releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/oslo.config/commit/039fdae7d252c234e2cf97529ab20afc78bd51cf', 'message': 'Bump the openstackdocstheme extension to 1.20\n\nSome options are now automatically configured by the version 1.20:\n- project\n- html_last_updated_fmt\n- latex_engine\n- latex_elements\n- version\n- release.\n\nChange-Id: Iac913e9dea8318ad8398ed7478cb66d845fe7f1e\n'}]",0,669235,039fdae7d252c234e2cf97529ab20afc78bd51cf,15,5,2,27822,,,0,"Bump the openstackdocstheme extension to 1.20

Some options are now automatically configured by the version 1.20:
- project
- html_last_updated_fmt
- latex_engine
- latex_elements
- version
- release.

Change-Id: Iac913e9dea8318ad8398ed7478cb66d845fe7f1e
",git fetch https://review.opendev.org/openstack/oslo.config refs/changes/35/669235/2 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/conf.py', 'lower-constraints.txt', 'doc/requirements.txt', 'releasenotes/source/conf.py']",4,4bcd714a1b9b35ae19e193bdc22daecad25be94f,openstackdocstheme,,"html_last_updated_fmt = '%Y-%m-%d %H:%M'project = u'oslo.config Release Notes'# Release notes do not need a version in the title, they span # multiple versions. # The full version, including alpha/beta/rc tags. release = '' # The short X.Y version. version = '' # Output file base name for HTML help builder. htmlhelp_basename = 'oslo.configReleaseNotesdoc' # -- Options for LaTeX output --------------------------------------------- latex_elements = { # The paper size ('letterpaper' or 'a4paper'). # 'papersize': 'letterpaper', # The font size ('10pt', '11pt' or '12pt'). # 'pointsize': '10pt', # Additional stuff for the LaTeX preamble. # 'preamble': '', } # Grouping the document tree into LaTeX files. List of tuples # (source start file, target name, title, # author, documentclass [howto, manual, or own class]). latex_documents = [ ('index', 'oslo.configReleaseNotes.tex', u'oslo.config Release Notes Documentation', u'oslo.config Developers', 'manual'), ] # The name of an image file (relative to this directory) to place at the top of # the title page. # latex_logo = None # For ""manual"" documents, if this is true, then toplevel headings are parts, # not chapters. # latex_use_parts = False # If true, show page references after internal links. # latex_show_pagerefs = False # If true, show URL addresses after external links. # latex_show_urls = False # Documents to append as an appendix to all manuals. # latex_appendices = [] # If false, no module index is generated. # latex_domain_indices = True ",2,72
openstack%2Fpuppet-tripleo~master~Idec0875a2d3ea1f7a0f9bfc91d4cba3812315a37,openstack/puppet-tripleo,master,Idec0875a2d3ea1f7a0f9bfc91d4cba3812315a37,Don't configure OVN octavia provider by default when OVN,ABANDONED,2019-08-08 14:30:44.000000000,2019-08-09 11:38:12.000000000,,"[{'_account_id': 3153}, {'_account_id': 6469}, {'_account_id': 6681}, {'_account_id': 8833}, {'_account_id': 9592}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 14:30:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/efe49bed5c94ce8725b3038f82b2f35b693146e7', 'message': ""Disable OVN provider driver when the driver agent is not configured\n\nOctavia doesn't work well with the OVN provider enabled but there are no\nagents.\n\nChange-Id: Idec0875a2d3ea1f7a0f9bfc91d4cba3812315a37\nCloses-Bug: #1839436\n""}, {'number': 2, 'created': '2019-08-08 17:00:36.000000000', 'files': ['manifests/profile/base/octavia/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/d457acecbfcc9dbe7105a90305591eaafd152bef', 'message': ""Don't configure OVN octavia provider by default when OVN\n\nOctavia doesn't work well with the OVN provider enabled but there are no\nagents. This patch makes this a bit more explicit by adding a flag to\nbe set by the driver agent template that it is being deployed and also\nleaves the provider driver configuration to be set via hiera and the\ntemplates.\n\nChange-Id: Idec0875a2d3ea1f7a0f9bfc91d4cba3812315a37\nCloses-Bug: #1839436\n""}]",1,675352,d457acecbfcc9dbe7105a90305591eaafd152bef,11,7,2,6681,,,0,"Don't configure OVN octavia provider by default when OVN

Octavia doesn't work well with the OVN provider enabled but there are no
agents. This patch makes this a bit more explicit by adding a flag to
be set by the driver agent template that it is being deployed and also
leaves the provider driver configuration to be set via hiera and the
templates.

Change-Id: Idec0875a2d3ea1f7a0f9bfc91d4cba3812315a37
Closes-Bug: #1839436
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/52/675352/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/profile/base/octavia/api.pp'],1,efe49bed5c94ce8725b3038f82b2f35b693146e7,bug/1839436," $driver_agent_nodes = hiera('octavia_driver_agent_short_node_names', []), if 'ovn' in $neutron_driver and size($driver_agent_nodes) > 0 {", if 'ovn' in $neutron_driver {,2,1
openstack%2Frequirements~master~Iaafe97372b9ce2ade3113720a67bda03f1375466,openstack/requirements,master,Iaafe97372b9ce2ade3113720a67bda03f1375466,update constraint for oslo.policy to new release 2.3.0,MERGED,2019-08-08 21:54:02.000000000,2019-08-09 11:07:02.000000000,2019-08-09 11:07:02.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 21:54:02.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/e7e8375dea5b18e50c1bbd17114a7529ca150cec', 'message': 'update constraint for oslo.policy to new release 2.3.0\n\nChange-Id: Iaafe97372b9ce2ade3113720a67bda03f1375466\nmeta:version: 2.3.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Ben Nemec <bnemec@redhat.com>\nmeta:release:Commit: Ben Nemec <bnemec@redhat.com>\nmeta:release:Change-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f\nmeta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,675473,e7e8375dea5b18e50c1bbd17114a7529ca150cec,12,2,1,11131,,,0,"update constraint for oslo.policy to new release 2.3.0

Change-Id: Iaafe97372b9ce2ade3113720a67bda03f1375466
meta:version: 2.3.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Ben Nemec <bnemec@redhat.com>
meta:release:Commit: Ben Nemec <bnemec@redhat.com>
meta:release:Change-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f
meta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/73/675473/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,e7e8375dea5b18e50c1bbd17114a7529ca150cec,new-release,oslo.policy===2.3.0,oslo.policy===2.2.0,1,1
openstack%2Ftripleo-validations~master~Ia4976b1cb79911d2fdb07eb6536c9a898c35be23,openstack/tripleo-validations,master,Ia4976b1cb79911d2fdb07eb6536c9a898c35be23,Simplifying the check of the latest package version validation,MERGED,2019-07-25 14:58:26.000000000,2019-08-09 11:02:23.000000000,2019-08-06 11:33:09.000000000,"[{'_account_id': 14985}, {'_account_id': 17888}, {'_account_id': 20775}, {'_account_id': 22348}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-07-25 14:58:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/798fa6236862dc50d95c52fa6eae36c1c089520f', 'message': ""Simplifying the check of the latest package version validation\n\nThis patch makes this validation simpler by checking if a\npython*-tripleoclient package update is available.\n\nThis patch also renames the role's name:\n- Old: check-latest-minor-version\n- New: check-latest-packages-version\n\nChange-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n""}, {'number': 2, 'created': '2019-07-26 11:43:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/b4fb3a31994dfd7f1fe39724c6175f45e31032b7', 'message': ""Simplifying the check of the latest package version validation\n\nThis patch makes this validation simpler by checking if a package update\nis available.\n\nThis patch also renames the role's name:\n- Old: check-latest-minor-version\n- New: check-latest-packages-version\n\nThe molecule tests are also included in this commit.\n\nChange-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n""}, {'number': 3, 'created': '2019-07-26 11:45:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/e4e13861db79bbd5e997fb5f325ee50e620c0c70', 'message': ""Simplifying the check of the latest package version validation\n\nThis patch makes this validation simpler by checking if a package update\nis available.\n\nThis patch also renames the role's name:\n- Old: check-latest-minor-version\n- New: check-latest-packages-version\n\nThe molecule tests are also included in this commit.\n\nChange-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n""}, {'number': 4, 'created': '2019-07-30 12:35:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/7ef6150d4b4c3b3f7de2b60f5b526410d340754b', 'message': ""Simplifying the check of the latest package version validation\n\nThis patch makes this validation simpler by checking if a package update\nis available.\n\nThis patch also renames the role's name:\n- Old: check-latest-minor-version\n- New: check-latest-packages-version\n\nThe molecule tests are also included in this commit.\n\nChange-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n""}, {'number': 5, 'created': '2019-08-01 12:21:39.000000000', 'files': ['roles/check-latest-packages-version/molecule/default/Dockerfile.j2', 'roles/check-latest-packages-version/molecule/default/playbook.yml', 'playbooks/check-latest-minor-version.yaml', 'roles/check-latest-minor-version/tasks/main.yml', 'roles/check-latest-packages-version/defaults/main.yml', 'tripleo_validations/tests/library/test_check_package_update.py', 'roles/check-latest-packages-version/molecule/default/molecule.yml', 'roles/check-latest-packages-version/tasks/main.yml', 'library/check_package_update.py', 'roles/check-latest-packages-version/vars/main.yml', 'playbooks/check-latest-packages-version.yaml', 'roles/check-latest-minor-version/vars/main.yml', 'roles/check-latest-packages-version/molecule/default/prepare.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/4faf07f89746853d9f8b625de0d1a9cb97c10e5d', 'message': ""Simplifying the check of the latest package version validation\n\nThis patch makes this validation simpler by checking if a package update\nis available.\n\nThis patch also renames the role's name:\n- Old: check-latest-minor-version\n- New: check-latest-packages-version\n\nThe molecule tests are also included in this commit.\n\nChange-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n""}]",0,672751,4faf07f89746853d9f8b625de0d1a9cb97c10e5d,16,5,5,11491,,,0,"Simplifying the check of the latest package version validation

This patch makes this validation simpler by checking if a package update
is available.

This patch also renames the role's name:
- Old: check-latest-minor-version
- New: check-latest-packages-version

The molecule tests are also included in this commit.

Change-Id: Ia4976b1cb79911d2fdb07eb6536c9a898c35be23
Signed-off-by: Gael Chamoulaud <gchamoul@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/51/672751/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/check-latest-packages-version.yaml', 'roles/check-latest-minor-version/vars/main.yml', 'playbooks/check-latest-minor-version.yaml', 'roles/check-latest-minor-version/tasks/main.yml', 'roles/check-latest-packages-version/defaults/main.yml', 'roles/check-latest-packages-version/tasks/main.yml', 'library/check_package_update.py', 'roles/check-latest-packages-version/vars/main.yml']",8,798fa6236862dc50d95c52fa6eae36c1c089520f,,--- metadata: name: Check if latest version of packages is installed description: > Makes sure python-tripleoclient is at its latest version before starting an upgrade. groups: - pre-upgrade ,,76,87
openstack%2Fcharm-deployment-guide~master~I41fea73fcecc810c80bf189a2083a74bb4993bf1,openstack/charm-deployment-guide,master,I41fea73fcecc810c80bf189a2083a74bb4993bf1,edit app-ceph-rbd-mirror post edit of charm README,MERGED,2019-08-05 19:11:08.000000000,2019-08-09 10:36:01.000000000,2019-08-09 10:36:01.000000000,"[{'_account_id': 13686}, {'_account_id': 20635}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-05 19:11:08.000000000', 'files': ['deploy-guide/source/app-ceph-rbd-mirror.rst'], 'web_link': 'https://opendev.org/openstack/charm-deployment-guide/commit/a3b5493b36dc8ddcfb72b3fcd9e47ca54c248ea2', 'message': 'edit app-ceph-rbd-mirror post edit of charm README\n\nChange-Id: I41fea73fcecc810c80bf189a2083a74bb4993bf1\n'}]",0,674677,a3b5493b36dc8ddcfb72b3fcd9e47ca54c248ea2,7,3,1,30561,,,0,"edit app-ceph-rbd-mirror post edit of charm README

Change-Id: I41fea73fcecc810c80bf189a2083a74bb4993bf1
",git fetch https://review.opendev.org/openstack/charm-deployment-guide refs/changes/77/674677/1 && git format-patch -1 --stdout FETCH_HEAD,['deploy-guide/source/app-ceph-rbd-mirror.rst'],1,a3b5493b36dc8ddcfb72b3fcd9e47ca54c248ea2,edit-app-ceph-rbd-mirror-post-README,"RADOS Block Device (RBD) mirroring is a process of asynchronous replication of Ceph block device images between two or more Ceph clusters. Mirroring ensures point-in-time consistent replicas of all changes to an image, including reads and writes, block device resizing, snapshots, clones, and flattening. RBD mirroring is mainly used for disaster recovery (i.e. having a secondary site as a failover). This appendix includes detailed steps for deploying Ceph clusters with RBD mirroring with the use of the ``ceph-rbd-mirror`` charm. The `ceph-rbd-mirror charm project page`_ includes in-depth information on this charm as well as how to use it for cluster failover and disaster recovery. It also includes more brief deployment steps as the ones shown here. RBD mirroring is only one specific element in datacentre redundancy. Refer to `Ceph RADOS Gateway Multisite Replication`_ and other work to arrive at a complete solution. See `Upstream Ceph documentation on RBD mirroring`_ for complete information.This section will show how to use charms to deploy two Ceph clusters (site 'a' and site 'b') with RBD mirroring between them. Two scenarios will be shown: Application ""ceph-rbd-mirror-b"" endpoints [ceph-remote] available at ""admin/site-b.ceph-rbd-mirror-b"".. LINKS .. _ceph-rbd-mirror charm project page: https://opendev.org/openstack/charm-ceph-rbd-mirror/src/branch/master/src/README.md .. _Ceph RADOS Gateway Multisite replication: https://docs.openstack.org/project-deploy-guide/charm-deployment-guide/latest/app-rgw-multisite.html .. _Upstream Ceph documentation on RBD mirroring: https://docs.ceph.com/docs/mimic/rbd/rbd-mirroring/","The ``ceph-rbd-mirror`` charm supports deployment of the Ceph RBD Mirror daemon and helps automate remote creation and configuration of mirroring for Ceph pools used to host RBD images. Actions for operator driven failover and fallback for the pools used for RBD images is also provided. Data center redundancy is a large topic and this work addresses a very specific piece in the puzzle related to Ceph RBD images. You need to combine this with `Ceph RADOS Gateway Multisite replication`_ and other work to get a complete solution. .. _Ceph RADOS Gateway Multisite replication: https://docs.openstack.org/project-deploy-guide/charm-deployment-guide/latest/app-rgw-multisite.html This is supported both for multiple distinct Ceph clusters within a single Juju model and between different models with help from cross-model relations. When the charm is related to a local and a remote Ceph cluster it will automatically create pools eligible for mirroring on the remote cluster and enable mirroring. Eligible pools are selected on the basis of Ceph pool tagging and all pools with the application ``rbd`` enabled on them will be selected. .. note:: As of the 19.04 charm release charms will automatically have newly created pools for use with RBD tagged with the ``rbd`` tag. .. warning:: Only mirroring of whole pools is supported by the charm. A prerequisite for RBD Mirroring is that every RBD image within each pool is created with the ``journaling`` and ``exclusive-lock`` image features enabled. To support this the ``ceph-mon`` charm will announce these image features over the ``client`` relation when it has units connected to its ``rbd-mirror`` endpoint. This will ensure that images created in the deployment get the appropriate features to support mirroring. .. warning:: RBD Mirroring is only supported by the charm when deployed with Ceph Luminous or later. The feature itself appeared upstream in Ceph Jewel but the ability to run multiple rbd-mirror daemons per Ceph cluster first appeared in Ceph Luminous. Attempts to deploy with earlier versions of Ceph may work if you do not deploy multiple ceph-rbd-mirror units per cluster, but we have done no validation of this. The Ceph RBD Mirror feature supports running multiple instances of the daemon. Having multiple daemons will cause the mirroring load to automatically be (re-)distributed between the daemons. This addresses both High Availability and performance concerns. You can make use of this feature by increasing the number of ``ceph-rbd-mirror`` units in your deployment. .. warning:: The charm is written for Two-way Replication, which give you the ability to fail over and fall back to/from a secondary site. Ceph does have support for mirroring to any number of slave clusters but this is neither implemented nor supported by the charm. The charm is aware of network spaces and you will be able to tell the RBD Mirror daemon about network configuration by binding the ``public`` and ``cluster`` endpoints. The RBD Mirror daemon will use the network associated with the ``cluster`` endpoint for mirroring traffic when available.This section will cover the essential commands for deploying two Ceph clusters (site 'a' and site 'b') with RBD mirroring between them. Two scenarios will be shown: application ""ceph-rbd-mirror-b"" endpoints [ceph-remote] available at ""admin/site-b.ceph-rbd-mirror-b""Usage +++++ Pools ----- Pools created by other charms through the Ceph broker protocol will automatically be detected and acted upon. Pools tagged with the ``rbd`` application will be selected for mirroring. If you manually create a pool, either through actions on the ``ceph-mon`` charm or by talking to Ceph directly, you must inform the ``ceph-rbd-mirror`` charm about them. This is accomplished by executing the ``refresh-pools`` action. .. code:: juju run-action -m site-a ceph-mon/leader --wait create-pool name=mypool \ app-name=rbd juju run-action -m site-a ceph-rbd-mirror/leader --wait refresh-pools Failover and Fallback --------------------- Controlled failover and fallback .. code:: juju run-action -m site-a ceph-rbd-mirror/leader --wait status verbose=True juju run-action -m site-b ceph-rbd-mirror/leader --wait status verbose=True .. code:: juju run-action -m site-a ceph-rbd-mirror/leader --wait demote .. code:: juju run-action -m site-a ceph-rbd-mirror/leader --wait status verbose=True juju run-action -m site-b ceph-rbd-mirror/leader --wait status verbose=True .. code:: juju run-action -m site-b ceph-rbd-mirror/leader --wait promote .. note:: When using Ceph Luminous, the mirror status information may not be accurate. Specifically the ``entries_behind_master`` counter may never get to ``0`` even though the image is fully synchronized. Recovering from abrupt shutdown ------------------------------- There exist failure scenarios where abrupt shutdown and/or interruptions to communication may lead to a split-brain situation where the RBD Mirroring process in both Ceph clusters claim to be the primary. In such a situation the operator must decide which cluster has the most recent data and should be elected primary by using the ``demote`` and ``promote`` (optionally with force parameter) actions. After making this decision the secondary cluster must be resynced to track the promoted master, this is done by running the ``resync-pools`` action on the non-master cluster. .. code:: juju run-action -m site-b ceph-rbd-mirror/leader --wait demote juju run-action -m site-a ceph-rbd-mirror/leader --wait promote force=True juju run-action -m site-a ceph-rbd-mirror/leader --wait status verbose=True juju run-action -m site-b ceph-rbd-mirror/leader --wait status verbose=True juju run-action -m site-b ceph-rbd-mirror/leader --wait resync-pools i-really-mean-it=True .. note:: When using Ceph Luminous, the mirror state information will not be accurate after recovering from unclean shutdown. Regardless of the output of the status information you will be able to write to images after a forced promote.",22,159
openstack%2Fpython-tripleoclient~master~I576291c6bc68a45c0aea0d704f31f4344735a99c,openstack/python-tripleoclient,master,I576291c6bc68a45c0aea0d704f31f4344735a99c,[WIP] Fix external update tasks.,ABANDONED,2019-08-08 17:09:58.000000000,2019-08-09 10:08:25.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 26343}]","[{'number': 1, 'created': '2019-08-08 17:09:58.000000000', 'files': ['tripleoclient/v1/overcloud_external_update.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/b485cf4cb46a43c092bbf56f34faf1fd635bf615', 'message': ""[WIP] Fix external update tasks.\n\ninclude_tasks and include statements don't have the same behavior\nregarding tags.  As a consequence the external task commands are\nbroken (at least for the update one).\n\nThis is just an incomplete proposal open for discussion as this could\nbe resolved in many ways.\n\nChange-Id: I576291c6bc68a45c0aea0d704f31f4344735a99c\nCloses-Bug: #1839520\n""}]",0,675415,b485cf4cb46a43c092bbf56f34faf1fd635bf615,5,3,1,8297,,,0,"[WIP] Fix external update tasks.

include_tasks and include statements don't have the same behavior
regarding tags.  As a consequence the external task commands are
broken (at least for the update one).

This is just an incomplete proposal open for discussion as this could
be resolved in many ways.

Change-Id: I576291c6bc68a45c0aea0d704f31f4344735a99c
Closes-Bug: #1839520
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/15/675415/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/overcloud_external_update.py'],1,b485cf4cb46a43c092bbf56f34faf1fd635bf615,bug/1839520," all_tags = ','.join([parsed_args.tags, 'external']) tags=all_tags, skip_tags=parsed_args.skip_tags,"," tags=parsed_args.tags, skip_tags=parsed_args.skip_tags,",2,2
openstack%2Fkolla-ansible~master~Ied2c24c01571327ea532ba0aaf2fc5e89de8e1fb,openstack/kolla-ansible,master,Ied2c24c01571327ea532ba0aaf2fc5e89de8e1fb,Support namespacing RabbitMQ logs,MERGED,2019-08-08 16:06:35.000000000,2019-08-09 10:04:30.000000000,2019-08-09 10:04:29.000000000,"[{'_account_id': 11444}, {'_account_id': 14826}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-08 16:06:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7989e1fc0554471b612aecbf222a9e56a3b2f143', 'message': 'Support namespacing RabbitMQ logs\n\nThe RabbitMQ role supports namespacing the service via the\nproject_name. For example, if you change the project_name, the\ncontainer name and config directory will be renamed accordingly. However\nthe log folder is currently fixed, even though the service tries to\nwrite to one named after the project_name. This change fixes that.\n\nWhilst you might generally use vhosts, running multiple RabbitMQ\nservices on a single node is useful at the very least for testing.\n\nThis change is part of the work to support Cells v2.\n\nChange-Id: Ied2c24c01571327ea532ba0aaf2fc5e89de8e1fb\n'}, {'number': 2, 'created': '2019-08-08 16:49:43.000000000', 'files': ['ansible/roles/rabbitmq/templates/rabbitmq.json.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/339ea2bdebc6b3ff9c2454893a258b3f9808c654', 'message': ""Support namespacing RabbitMQ logs\n\nThe RabbitMQ role supports namespacing the service via the\nproject_name. For example, if you change the project_name, the\ncontainer name and config directory will be renamed accordingly. However\nthe log folder is currently fixed, even though the service tries to\nwrite to one named after the project_name. This change fixes that.\n\nWhilst you might generally use vhosts, running multiple RabbitMQ\nservices on a single node is useful at the very least for testing,\nor for running 'outward RabbitMQ' on the same node.\n\nThis change is part of the work to support Cells v2.\n\nPartially Implements: blueprint support-nova-cells\nChange-Id: Ied2c24c01571327ea532ba0aaf2fc5e89de8e1fb\n""}]",0,675397,339ea2bdebc6b3ff9c2454893a258b3f9808c654,12,5,2,17669,,,0,"Support namespacing RabbitMQ logs

The RabbitMQ role supports namespacing the service via the
project_name. For example, if you change the project_name, the
container name and config directory will be renamed accordingly. However
the log folder is currently fixed, even though the service tries to
write to one named after the project_name. This change fixes that.

Whilst you might generally use vhosts, running multiple RabbitMQ
services on a single node is useful at the very least for testing,
or for running 'outward RabbitMQ' on the same node.

This change is part of the work to support Cells v2.

Partially Implements: blueprint support-nova-cells
Change-Id: Ied2c24c01571327ea532ba0aaf2fc5e89de8e1fb
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/97/675397/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/rabbitmq/templates/rabbitmq.json.j2'],1,7989e1fc0554471b612aecbf222a9e56a3b2f143,bp/support-nova-cells," ""path"": ""/var/log/kolla/{{ project_name }}"","," ""path"": ""/var/log/kolla/rabbitmq"",",1,1
openstack%2Ftripleo-heat-templates~master~I582fad2bd7b058a573c6e0398f05906582461861,openstack/tripleo-heat-templates,master,I582fad2bd7b058a573c6e0398f05906582461861,Use ansible group_vars for extraconfig hieradata,MERGED,2019-07-31 05:14:41.000000000,2019-08-09 10:02:01.000000000,2019-08-09 10:02:01.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-31 05:14:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bc46d6da9ebc57098b6b9bab8cce12539e1fe563', 'message': 'WIP Use ansible group_vars for extraconfig hieradata\n\nChange-Id: I582fad2bd7b058a573c6e0398f05906582461861\nDepends-On: https://review.opendev.org/#/c/673728\n'}, {'number': 2, 'created': '2019-07-31 06:26:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/d292491973e12842bb8cd731d24891946f1c9047', 'message': 'WIP Use ansible group_vars for extraconfig hieradata\n\nChange-Id: I582fad2bd7b058a573c6e0398f05906582461861\nDepends-On: https://review.opendev.org/#/c/673728\n'}, {'number': 3, 'created': '2019-07-31 10:33:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a95183b1fb3092f67e8b798fd23cf2f2e4b47e5e', 'message': 'Use ansible group_vars for extraconfig hieradata\n\nChange-Id: I582fad2bd7b058a573c6e0398f05906582461861\nDepends-On: https://review.opendev.org/#/c/673728\n'}, {'number': 4, 'created': '2019-08-07 05:09:18.000000000', 'files': ['overcloud.j2.yaml', 'common/deploy-steps.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6ff7c512c3904d2cf638f2ab5ba96d856020f6fe', 'message': 'Use ansible group_vars for extraconfig hieradata\n\nChange-Id: I582fad2bd7b058a573c6e0398f05906582461861\nDepends-On: https://review.opendev.org/#/c/673728\n'}]",0,673731,6ff7c512c3904d2cf638f2ab5ba96d856020f6fe,30,5,4,8833,,,0,"Use ansible group_vars for extraconfig hieradata

Change-Id: I582fad2bd7b058a573c6e0398f05906582461861
Depends-On: https://review.opendev.org/#/c/673728
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/31/673731/4 && git format-patch -1 --stdout FETCH_HEAD,"['overcloud.j2.yaml', 'common/deploy-steps.j2']",2,bc46d6da9ebc57098b6b9bab8cce12539e1fe563,bp/reduce-deployment-resources," hieradata_template: """" - extraconfig - role_extraconfig"," {{role.name}}DeploymentHieradata: type: json default: {} hieradata_template: ""{{role.name}}/deployment-hieradata.j2.yaml"" {{role.name}}/deployment-hieradata.j2.yaml: {get_param: {{role.name}}DeploymentHieradata}",14,18
openstack%2Fnova-specs~master~Iaff9b643bdfafb9ec26ac430bebb1a094816ef85,openstack/nova-specs,master,Iaff9b643bdfafb9ec26ac430bebb1a094816ef85,Correct nit with cpu-resources,MERGED,2019-08-08 09:13:25.000000000,2019-08-09 09:57:48.000000000,2019-08-09 09:57:48.000000000,"[{'_account_id': 14070}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 09:13:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/fd9eccdbf56ad1a35d715fedce6d54b0bc89b177', 'message': 'Correct nit with cpu-resources\n\nChange-Id: Iaff9b643bdfafb9ec26ac430bebb1a094816ef85\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 2, 'created': '2019-08-09 09:29:57.000000000', 'files': ['specs/train/approved/cpu-resources.rst'], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/bb61141e6b2a3cad901535ef090b0729964c1d17', 'message': 'Correct nit with cpu-resources\n\nChange-Id: Iaff9b643bdfafb9ec26ac430bebb1a094816ef85\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",0,675276,bb61141e6b2a3cad901535ef090b0729964c1d17,9,3,2,15334,,,0,"Correct nit with cpu-resources

Change-Id: Iaff9b643bdfafb9ec26ac430bebb1a094816ef85
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova-specs refs/changes/76/675276/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/train/approved/cpu-resources.rst'],1,fd9eccdbf56ad1a35d715fedce6d54b0bc89b177,bp/cpu-resources, $ openstack flavor set --property resources:PCPU=8 \, $ openstack flavor set --property resources:VCPU=8 \,1,1
openstack%2Frequirements~master~I546641a69e5531820e26de5d0da117ec33045f2b,openstack/requirements,master,I546641a69e5531820e26de5d0da117ec33045f2b,update constraint for oslo.messaging to new release 10.0.0,MERGED,2019-08-08 21:59:11.000000000,2019-08-09 09:44:17.000000000,2019-08-09 09:44:17.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 21:59:11.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/17e4e4aaa2ca8fd2a1deb6feefde1c2e0e5abe5a', 'message': 'update constraint for oslo.messaging to new release 10.0.0\n\nChange-Id: I546641a69e5531820e26de5d0da117ec33045f2b\nmeta:version: 10.0.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Ben Nemec <bnemec@redhat.com>\nmeta:release:Commit: Ben Nemec <bnemec@redhat.com>\nmeta:release:Change-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f\nmeta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,675477,17e4e4aaa2ca8fd2a1deb6feefde1c2e0e5abe5a,10,2,1,11131,,,0,"update constraint for oslo.messaging to new release 10.0.0

Change-Id: I546641a69e5531820e26de5d0da117ec33045f2b
meta:version: 10.0.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Ben Nemec <bnemec@redhat.com>
meta:release:Commit: Ben Nemec <bnemec@redhat.com>
meta:release:Change-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f
meta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/77/675477/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,17e4e4aaa2ca8fd2a1deb6feefde1c2e0e5abe5a,new-release,oslo.messaging===10.0.0,oslo.messaging===9.8.0,1,1
openstack%2Fneutron~stable%2Fstein~I3ad59864eeb42916d2cf15a5292d5aa9484f6e91,openstack/neutron,stable/stein,I3ad59864eeb42916d2cf15a5292d5aa9484f6e91,Check for agent restarted after checking for DVR port,MERGED,2019-07-22 06:55:14.000000000,2019-08-09 09:44:15.000000000,2019-08-09 09:44:15.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 9732}, {'_account_id': 11975}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 26622}]","[{'number': 1, 'created': '2019-07-22 06:55:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0155cb8624d2c748990d49f9f2419ec74d502c68', 'message': ""Check for agent restarted after checking for DVR port\n\nCommit a5244d6d44d2b66de27dc77efa7830fa657260be changed the check\norder so regular non-dvr ports are checked for agent restarted.\nHowever regular ports may be unbound already, which leads to the\nerror in the bug description: agent_restarted check is done against\na 'None' agent.\nThis patch fixed logic back - only check agent_restarted for dvr ports.\n\nThis also adds some logging to have a clue why update port up/down fails.\n\nChange-Id: I3ad59864eeb42916d2cf15a5292d5aa9484f6e91\nCloses-Bug: #1835731\n""}, {'number': 2, 'created': '2019-08-06 12:31:53.000000000', 'files': ['neutron/plugins/ml2/rpc.py', 'neutron/tests/unit/plugins/ml2/test_rpc.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/c3a3031f78b3ea2d16d4eb08b181916dbc6f4c45', 'message': ""Check for agent restarted after checking for DVR port\n\nThis is a stable-only fix since code around the change was removed \nin master: https://review.opendev.org/#/c/641866\n\nCommit a5244d6d44d2b66de27dc77efa7830fa657260be changed the check\norder so regular non-dvr ports are checked for agent restarted.\nHowever regular ports may be unbound already, which leads to the\nerror in the bug description: agent_restarted check is done against\na 'None' agent.\nThis patch fixed logic back - only check agent_restarted for dvr ports.\n\nThis also adds some logging to have a clue why update port up/down fails.\n\nChange-Id: I3ad59864eeb42916d2cf15a5292d5aa9484f6e91\nCloses-Bug: #1835731\n""}]",0,671964,c3a3031f78b3ea2d16d4eb08b181916dbc6f4c45,25,8,2,5948,,,0,"Check for agent restarted after checking for DVR port

This is a stable-only fix since code around the change was removed 
in master: https://review.opendev.org/#/c/641866

Commit a5244d6d44d2b66de27dc77efa7830fa657260be changed the check
order so regular non-dvr ports are checked for agent restarted.
However regular ports may be unbound already, which leads to the
error in the bug description: agent_restarted check is done against
a 'None' agent.
This patch fixed logic back - only check agent_restarted for dvr ports.

This also adds some logging to have a clue why update port up/down fails.

Change-Id: I3ad59864eeb42916d2cf15a5292d5aa9484f6e91
Closes-Bug: #1835731
",git fetch https://review.opendev.org/openstack/neutron refs/changes/64/671964/2 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/rpc.py', 'neutron/tests/unit/plugins/ml2/test_rpc.py']",2,0155cb8624d2c748990d49f9f2419ec74d502c68,bug/1835731-stable/stein," def test_notify_l2pop_port_wiring_non_dvr_port(self): port = {'device_owner': constants.DEVICE_OWNER_COMPUTE_PREFIX} l2pop_driver = ( self.plugin.mechanism_manager.mech_drivers.get.return_value) with mock.patch.object(ml2_db, 'get_port') as ml2_db_get_port: ml2_db_get_port.return_value = port self.callbacks.notify_l2pop_port_wiring( 'port_id', mock.Mock(), 'DOWN', 'host', agent_restarted=None) self.assertFalse(l2pop_driver.obj.agent_restarted.called) ",,21,9
openstack%2Fdesignate~master~I7578414cad7064433701defc2f14bde5cfb6007d,openstack/designate,master,I7578414cad7064433701defc2f14bde5cfb6007d,Use zone.tenant_id when context.project_id is None for pdns3,MERGED,2019-08-07 18:35:21.000000000,2019-08-09 09:37:02.000000000,2019-08-09 09:37:02.000000000,"[{'_account_id': 8099}, {'_account_id': 13252}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 18:35:21.000000000', 'files': ['designate/backend/impl_powerdns/__init__.py'], 'web_link': 'https://opendev.org/openstack/designate/commit/ed34f9a30777777db72d85920481c5ab191877df', 'message': 'Use zone.tenant_id when context.project_id is None for pdns3\n\nSimilar to Bug 1838379, that most likely affects the pdns3\nimplementation as well.\n\nThe periodic recovery job creates a new context that does\nnot contain the project_id. This commit adds a fallback to the\nzone tenant_id.\n\nChange-Id: I7578414cad7064433701defc2f14bde5cfb6007d\n'}]",0,675175,ed34f9a30777777db72d85920481c5ab191877df,7,3,1,22623,,,0,"Use zone.tenant_id when context.project_id is None for pdns3

Similar to Bug 1838379, that most likely affects the pdns3
implementation as well.

The periodic recovery job creates a new context that does
not contain the project_id. This commit adds a fallback to the
zone tenant_id.

Change-Id: I7578414cad7064433701defc2f14bde5cfb6007d
",git fetch https://review.opendev.org/openstack/designate refs/changes/75/675175/1 && git format-patch -1 --stdout FETCH_HEAD,['designate/backend/impl_powerdns/__init__.py'],1,ed34f9a30777777db72d85920481c5ab191877df,pdns3_fix, 'account': context.project_id or zone.tenant_id, 'account': context.project_id,1,1
openstack%2Fansible-role-collect-logs~master~Icc9d848412bde9f4993e795012c04449f8b332be,openstack/ansible-role-collect-logs,master,Icc9d848412bde9f4993e795012c04449f8b332be,Disable warnings in collecting ara tasks,ABANDONED,2019-08-07 22:42:49.000000000,2019-08-09 09:25:32.000000000,,"[{'_account_id': 10969}, {'_account_id': 18846}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 22:42:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-role-collect-logs/commit/6563775ca03c546e0241b1e3c93f33a3a4a0e0bc', 'message': 'Disable warnings in collecting ara tasks\n\nChange-Id: Icc9d848412bde9f4993e795012c04449f8b332be\n'}, {'number': 2, 'created': '2019-08-08 09:10:22.000000000', 'files': ['tasks/ara_influxdb.yml', 'tasks/ara_graphite.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-collect-logs/commit/38b6e79f3feb1287eea3f3dc9d32f95a05e5eef3', 'message': 'Disable warnings in collecting ara tasks\n\nChange-Id: Icc9d848412bde9f4993e795012c04449f8b332be\n'}]",0,675223,38b6e79f3feb1287eea3f3dc9d32f95a05e5eef3,12,3,2,10969,,,0,"Disable warnings in collecting ara tasks

Change-Id: Icc9d848412bde9f4993e795012c04449f8b332be
",git fetch https://review.opendev.org/openstack/ansible-role-collect-logs refs/changes/23/675223/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/ara_influxdb.yml', 'tasks/ara_graphite.yml']",2,6563775ca03c546e0241b1e3c93f33a3a4a0e0bc,, args: warn: false,,8,0
openstack%2Ftripleo-common~master~I44329cdeeaa7b3e61e12681383f815d420834ed8,openstack/tripleo-common,master,I44329cdeeaa7b3e61e12681383f815d420834ed8,WIP - add retry to the upload_image itself,ABANDONED,2019-07-26 09:57:33.000000000,2019-08-09 09:12:02.000000000,,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-26 09:57:33.000000000', 'files': ['tripleo_common/image/image_uploader.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/8195078570e6fd4361218f7066a970d3bf9e3827', 'message': 'WIP - add retry to the upload_image itself\n\nPosting for the discussion for related bug below. Not sure\ntenacity.retry is OK for a threadpoolexecutor function. I see we\nalready have retry on the others but not the top-level upload_image\n\nChange-Id: I44329cdeeaa7b3e61e12681383f815d420834ed8\nRelated-Bug: 1837388\n'}]",1,672938,8195078570e6fd4361218f7066a970d3bf9e3827,5,3,1,8449,,,0,"WIP - add retry to the upload_image itself

Posting for the discussion for related bug below. Not sure
tenacity.retry is OK for a threadpoolexecutor function. I see we
already have retry on the others but not the top-level upload_image

Change-Id: I44329cdeeaa7b3e61e12681383f815d420834ed8
Related-Bug: 1837388
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/38/672938/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/image/image_uploader.py'],1,8195078570e6fd4361218f7066a970d3bf9e3827,," @tenacity.retry( # Retry up to 5 times with jittered exponential backoff reraise=True, retry=tenacity.retry_if_exception_type( requests.exceptions.RequestException ), wait=tenacity.wait_random_exponential(multiplier=1, max=10), stop=tenacity.stop_after_attempt(5) )",,8,0
openstack%2Fkolla~master~I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa,openstack/kolla,master,I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa,Bump up pkg versions in kolla-toolbox,MERGED,2019-03-11 10:49:55.000000000,2019-08-09 08:59:30.000000000,2019-08-08 18:25:06.000000000,"[{'_account_id': 14826}, {'_account_id': 22076}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23181}, {'_account_id': 24072}, {'_account_id': 28614}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-03-11 10:49:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/058816dcc42a4d8b7f3806e9783fca78a7d7d3b9', 'message': 'Bump up pkg versions in kolla-toolbox\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 2, 'created': '2019-03-11 12:08:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/33b542561ee80d73dd384529e5e6bff034117d91', 'message': 'Bump up pkg versions in kolla-toolbox\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 3, 'created': '2019-03-11 13:56:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/99c937462163a06cddc20e4222016eaf44806896', 'message': 'Bump up pkg versions in kolla-toolbox\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 4, 'created': '2019-05-21 12:34:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/75592d987344c901c3c750206288bea37a0d470a', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 5, 'created': '2019-06-06 06:53:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/daced73186acd78e66ba43e9c639b1755dc9a0da', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 6, 'created': '2019-06-06 07:12:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/573bf07c4b8a22bcfcbb7117e4e79c5d40510e91', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 7, 'created': '2019-06-07 07:06:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/beea28794b8e042b5ada96729d1f4f365cae45e5', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 8, 'created': '2019-06-07 17:18:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/32aa4c3630e366f8d67537337aed85da28cfef29', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCloses-bug: 1823736\nDepends-On: https://review.opendev.org/664009\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 9, 'created': '2019-06-10 09:15:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/4fb26aeeec72cb2566d3c404ccc36b7ef694a2f4', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nCloses-bug: 1823736\nDepends-On: https://review.opendev.org/664009\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 10, 'created': '2019-06-11 14:24:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/ab98e58198ca2bb527ea09f05519b7020fbc29a8', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nCloses-bug: 1823736\nDepends-On: https://review.opendev.org/664009\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 11, 'created': '2019-06-11 14:28:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/119b61de0f5e68b7993333f7f3866789c1a0e66b', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 12, 'created': '2019-06-13 07:04:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/a79ca2798702e2270c465c41b1832634ad43a2b7', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nDepends-On: https://review.opendev.org/664631\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 13, 'created': '2019-07-23 09:48:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/fab5de1f81e8c8c45087c60d8913225a169a5fcd', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nDepends-On: https://review.opendev.org/664631\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 14, 'created': '2019-08-01 07:43:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/1237b9713e435f24a49f1b7fa3c14a7bd8ffa9fc', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nDepends-On: https://review.opendev.org/673949\n\nCloses-bug: 1823736\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 15, 'created': '2019-08-02 06:19:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/2711ee8c85ad0924ffdcc17e197a9ed7778550a3', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nDepends-On: https://review.opendev.org/673949\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 16, 'created': '2019-08-02 06:20:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/11d3d264d12087d152da25e398312a9f502871e9', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nDepends-On: https://review.opendev.org/673949\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 17, 'created': '2019-08-02 06:35:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/b4feb076aeecc5d86d8a8685a52e5d6945d7fdc4', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nDepends-On: https://review.opendev.org/673949\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 18, 'created': '2019-08-02 06:38:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/40d77dc9bfcb5a83682a7580427ce7717ee990cf', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 19, 'created': '2019-08-02 07:53:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/21c06a308be96e322a097448c9729732fd73a7d5', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 20, 'created': '2019-08-02 07:53:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/b4ff696808dfd9cdf6ccca700f0e886be40bb49a', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 21, 'created': '2019-08-02 09:28:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/3fe9b439bbc1e22fcddc116fab7be2e23b6e4575', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 22, 'created': '2019-08-02 09:30:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/fa9ba6af6432e3c817ae4d8a8dbafd5a4bcf155c', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 23, 'created': '2019-08-02 09:39:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/d592b872fcbe46500cb65a3aacad04734508c815', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8 and resolving issues in dependent\nchanges.\n\nSome changes are needed in kolla_* modules to support no_log=True when\npassing passwords.\n\nThis is part of the effort to move to newer Ansible, including Python3.\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 24, 'created': '2019-08-02 09:45:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/eabc0b6d68d891c42f4033f174c1be6fc9e7ea2f', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 25, 'created': '2019-08-02 11:46:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/437935950f31394500e5930fdd220e9d54983abe', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 26, 'created': '2019-08-02 13:01:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/8992b14c4389eb83ad42db7b1caf38c84cb2b69c', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 27, 'created': '2019-08-08 07:10:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/111034d3076ff581a60b6a8d0b7b805dd911c1ea', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n* Add openstack_release variable in kolla/common/config.py which\n  is used for fetching upper-constraints.txt for desired release\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 28, 'created': '2019-08-08 07:11:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/8c31c48e4ca0d79eb304b62c7c6f9ba0b5c8baf8', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n* Add openstack_release variable in kolla/common/config.py which\n  is used for fetching upper-constraints.txt for desired release\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 29, 'created': '2019-08-08 09:34:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/b46f230efd109d2570f1618db849574f5500a761', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n* Add openstack_release variable in kolla/common/config.py which\n  is used for fetching upper-constraints.txt for desired release\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 30, 'created': '2019-08-08 11:22:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/c4bf229ecdee8ef1c7990e44771177b7d843c0bd', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n* Add openstack_release variable in kolla/common/config.py which\n  is used for fetching upper-constraints.txt for desired release\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}, {'number': 31, 'created': '2019-08-08 13:56:48.000000000', 'files': ['kolla/image/build.py', 'docker/kolla-toolbox/kolla_keystone_service.py', 'docker/kolla-toolbox/Dockerfile.j2', 'kolla/common/config.py', 'docker/kolla-toolbox/kolla_keystone_user.py'], 'web_link': 'https://opendev.org/openstack/kolla/commit/e3108d93c69dbad0c575da719f842d36c195a673', 'message': 'Bump up pkg versions in kolla-toolbox\n\nCurrently we use Ansible 2.2 in kolla_toolbox, while lowest supported\nversion is 2.6 - bumping up to 2.8.\n\n* Use upper constrains in Dockerfile.j2, instead of pinning them in\nhere - Ansible is pinned to 2.8.*\n* Add no_log=True in kolla_keystone_user\n* Add endpoint_type as a param in kolla_keystone_service - now\nAnsibleModule requires all options to be defined, otherwise it throws\nan UnsupportedParameter error\n* Add openstack_release variable in kolla/common/config.py which\n  is used for fetching upper-constraints.txt for desired release\n\nChange-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa\n'}]",25,642416,e3108d93c69dbad0c575da719f842d36c195a673,130,8,31,22629,,,0,"Bump up pkg versions in kolla-toolbox

Currently we use Ansible 2.2 in kolla_toolbox, while lowest supported
version is 2.6 - bumping up to 2.8.

* Use upper constrains in Dockerfile.j2, instead of pinning them in
here - Ansible is pinned to 2.8.*
* Add no_log=True in kolla_keystone_user
* Add endpoint_type as a param in kolla_keystone_service - now
AnsibleModule requires all options to be defined, otherwise it throws
an UnsupportedParameter error
* Add openstack_release variable in kolla/common/config.py which
  is used for fetching upper-constraints.txt for desired release

Change-Id: I2cb0ea2fde1b408d48b39bf7a54b898e850d31aa
",git fetch https://review.opendev.org/openstack/kolla refs/changes/16/642416/7 && git format-patch -1 --stdout FETCH_HEAD,['docker/kolla-toolbox/Dockerfile.j2'],1,058816dcc42a4d8b7f3806e9783fca78a7d7d3b9,feature/bump_up_toolbox," 'ansible==2.7.8', 'cmd2', 'os-client-config', 'pbr', 'python-openstackclient', 'shade'"," 'ansible==2.2.0.0', '""cmd2<0.9.0""', 'os-client-config==1.29.0', 'pbr==4.0.0', 'python-openstackclient==3.14.0', 'shade==1.27.1'",6,6
openstack%2Fhorizon~master~I58023f12e6b01808921555a33d09155b103e2000,openstack/horizon,master,I58023f12e6b01808921555a33d09155b103e2000,Fix typo: disassocaite -> disassociate,MERGED,2019-04-09 10:45:25.000000000,2019-08-09 08:50:18.000000000,2019-04-10 10:47:41.000000000,"[{'_account_id': 841}, {'_account_id': 12156}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2019-04-09 10:45:25.000000000', 'files': ['openstack_dashboard/dashboards/project/instances/templates/instances/_disassociate.html', 'openstack_dashboard/dashboards/project/instances/views.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/81b53ae8a91d3b4aaedd7a4ec930dc3913101b2e', 'message': 'Fix typo: disassocaite -> disassociate\n\nChange-Id: I58023f12e6b01808921555a33d09155b103e2000\n'}]",0,651188,81b53ae8a91d3b4aaedd7a4ec930dc3913101b2e,11,4,1,167,,,0,"Fix typo: disassocaite -> disassociate

Change-Id: I58023f12e6b01808921555a33d09155b103e2000
",git fetch https://review.opendev.org/openstack/horizon refs/changes/88/651188/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/dashboards/project/instances/templates/instances/_disassociate.html', 'openstack_dashboard/dashboards/project/instances/views.py']",2,81b53ae8a91d3b4aaedd7a4ec930dc3913101b2e,typo-disassocaite," submit_label = _(""Disassociate"")"," submit_label = _(""Disassocaite"")",2,2
openstack%2Fcyborg~master~If8eca0bcc187aed9fb2ef6794171a1acbc202079,openstack/cyborg,master,If8eca0bcc187aed9fb2ef6794171a1acbc202079,Add bindep support,MERGED,2019-08-05 06:38:47.000000000,2019-08-09 08:27:04.000000000,2019-08-09 08:27:04.000000000,"[{'_account_id': 20722}, {'_account_id': 21672}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-05 06:38:47.000000000', 'files': ['bindep.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/cyborg/commit/7a4c80e7e2507e8bdf5b76f29eb7e13d13e78140', 'message': ""Add bindep support\n\nAdd an bindep.txt file containing a cross-platform list of\ndependencies needed for running included tox-based tests. Also include a\ntox environment for convenience calling the bindep[*] utility to list\nany missing system requirements.\n\nCyborg requires package 'pciutils' because it is required for running\n'lspci' command, this patch also add it.\n\n[*] http://docs.openstack.org/infra/bindep/\n\nChange-Id: If8eca0bcc187aed9fb2ef6794171a1acbc202079\n""}]",0,674536,7a4c80e7e2507e8bdf5b76f29eb7e13d13e78140,9,3,1,20722,,,0,"Add bindep support

Add an bindep.txt file containing a cross-platform list of
dependencies needed for running included tox-based tests. Also include a
tox environment for convenience calling the bindep[*] utility to list
any missing system requirements.

Cyborg requires package 'pciutils' because it is required for running
'lspci' command, this patch also add it.

[*] http://docs.openstack.org/infra/bindep/

Change-Id: If8eca0bcc187aed9fb2ef6794171a1acbc202079
",git fetch https://review.opendev.org/openstack/cyborg refs/changes/36/674536/1 && git format-patch -1 --stdout FETCH_HEAD,"['bindep.txt', 'tox.ini']",2,7a4c80e7e2507e8bdf5b76f29eb7e13d13e78140,ascend,"[testenv:bindep] # Do not install any requirements. We want this to be fast and work even if # system dependencies are missing, since it's used to tell you what system # dependencies are missing! This also means that bindep must be installed # separately, outside of the requirements files, and develop mode disabled # explicitly to avoid unnecessarily installing the checked-out repo too (this # further relies on ""tox.skipsdist = True"" above). basepython = python3 deps = bindep commands = bindep test usedevelop = False ",,17,0
openstack%2Fswift~master~Ia9ae0fc226dfc9b40157faebac100c10a9180c62,openstack/swift,master,Ia9ae0fc226dfc9b40157faebac100c10a9180c62,py3: Add swift-tox-func-encryption-py37 gate job,MERGED,2019-08-06 17:00:57.000000000,2019-08-09 08:24:11.000000000,2019-08-09 08:19:36.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-06 17:00:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/fb493b89e862ccbb2fc9c1b728f271146f1a1d35', 'message': 'py3: Add swift-tox-func-encryption-py37 gate job\n\nChange-Id: Ia9ae0fc226dfc9b40157faebac100c10a9180c62\n'}, {'number': 2, 'created': '2019-08-06 20:57:04.000000000', 'files': ['test/functional/__init__.py', '.zuul.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/swift/commit/2c727f65ffae3d925fb825e20616615ab319d1d2', 'message': 'py3: Add swift-tox-func-encryption-py37 gate job\n\nChange-Id: Ia9ae0fc226dfc9b40157faebac100c10a9180c62\n'}]",0,674878,2c727f65ffae3d925fb825e20616615ab319d1d2,20,2,2,15343,,,0,"py3: Add swift-tox-func-encryption-py37 gate job

Change-Id: Ia9ae0fc226dfc9b40157faebac100c10a9180c62
",git fetch https://review.opendev.org/openstack/swift refs/changes/78/674878/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'tox.ini']",2,fb493b89e862ccbb2fc9c1b728f271146f1a1d35,py3-func-tests,[testenv:func-encryption-py3] basepython = python3 commands = {[testenv:func-py3]commands} setenv = SWIFT_TEST_IN_PROCESS=1 SWIFT_TEST_IN_PROCESS_CONF_LOADER=encryption ,,24,0
openstack%2Fcharm-nova-compute~master~Ibfa24b678c1077b441464da8c38114ce23d14963,openstack/charm-nova-compute,master,Ibfa24b678c1077b441464da8c38114ce23d14963,Start libvirt in post-series-upgrade,MERGED,2019-08-08 20:52:13.000000000,2019-08-09 08:12:33.000000000,2019-08-09 08:12:33.000000000,"[{'_account_id': 12549}, {'_account_id': 13686}, {'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 20:52:13.000000000', 'files': ['hooks/nova_compute_utils.py', 'hooks/nova_compute_hooks.py', 'unit_tests/test_nova_compute_utils.py'], 'web_link': 'https://opendev.org/openstack/charm-nova-compute/commit/6a1e3a799e1c1d4433c15882c7b7158463452fd3', 'message': 'Start libvirt in post-series-upgrade\n\nA recent change (commit ceab1e91dc2e3948f6ba7c121c1801ad1641643c)\nremoved libvirt from the pause/resume list of services. This affected\nseries upgrade. Libvirt stayed down and did not start back up on resume.\n\nThis change checks the hook being executed and if it is\npost-series-upgrade it includes libvirt as a service to start on resume.\n\nCloses-Bug: #1839495\nChange-Id: Ibfa24b678c1077b441464da8c38114ce23d14963\n'}]",0,675463,6a1e3a799e1c1d4433c15882c7b7158463452fd3,11,5,1,20805,,,0,"Start libvirt in post-series-upgrade

A recent change (commit ceab1e91dc2e3948f6ba7c121c1801ad1641643c)
removed libvirt from the pause/resume list of services. This affected
series upgrade. Libvirt stayed down and did not start back up on resume.

This change checks the hook being executed and if it is
post-series-upgrade it includes libvirt as a service to start on resume.

Closes-Bug: #1839495
Change-Id: Ibfa24b678c1077b441464da8c38114ce23d14963
",git fetch https://review.opendev.org/openstack/charm-nova-compute refs/changes/63/675463/1 && git format-patch -1 --stdout FETCH_HEAD,"['hooks/nova_compute_utils.py', 'hooks/nova_compute_hooks.py', 'unit_tests/test_nova_compute_utils.py']",3,6a1e3a799e1c1d4433c15882c7b7158463452fd3,bug/1839495," @patch.object(utils, ""libvirt_daemon"") @patch.object(utils, ""hook_name"") @patch.object(utils, ""services"") def test_services_to_pause_or_resume( self, _services, _hook_name, _libvirt_daemon): _no_libvirt = [""nova-compute""] _full = _no_libvirt + [""libvirtd""] _services.return_value = _full _libvirt_daemon.return_value = ""libvirtd"" _hook_name.return_value = ""config-changed"" self.assertEqual(_no_libvirt, utils.services_to_pause_or_resume()) _hook_name.return_value = ""post-series-upgrade"" self.assertEqual(_full, utils.services_to_pause_or_resume())",,24,2
openstack%2Fdiskimage-builder~master~Ib75b65c5a94be818ccd6f747758ce9962319dffc,openstack/diskimage-builder,master,Ib75b65c5a94be818ccd6f747758ce9962319dffc,Reduce yum-minimal based OS install size footprint,ABANDONED,2019-07-23 16:48:49.000000000,2019-08-09 08:07:44.000000000,,"[{'_account_id': 6469}, {'_account_id': 7118}, {'_account_id': 10118}, {'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-23 16:48:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/1a2eca3fa722084e3d0345b7cd22f09a89e1940e', 'message': ""Reduce yum-minimal based OS install size footprint\n\nThis patch further minimalizes yum-minimal based OSes. It does so by\nremoving packages not expected on minimal environments, and moving the\ndoc files delete to run in the end of the image build. Additionally,\npackage redhat-rpm-config was removed as there's no value in having it\non such minimal environments, and it pulls Perl and its subpackages.\n\nChange-Id: Ib75b65c5a94be818ccd6f747758ce9962319dffc\n""}, {'number': 2, 'created': '2019-07-23 17:30:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/58ff47d7afb0e1ee8991ccaaf66520a770ffa469', 'message': ""Reduce yum-minimal based OS install size footprint\n\nThis patch further minimalizes yum-minimal based OSes. It does so by\nremoving packages not expected on minimal environments, and moving the\ndoc files delete to run in the end of the image build. Additionally,\npackage redhat-rpm-config was removed as there's no value in having it\non such minimal environments, and it pulls Perl and its subpackages.\n\nlinux-firmware and linux-firmware-whence (meta package for mostly iwl\nfirmwares) packages account for approx. 289 M install size on a F30\nsystem, and linux-firmware for approx. 176 M on CentOS 7. Users needing\nthese firmwares are eventually baremetal users and are not looking for a\nvery minimal operating system base install like virtual image users are.\nThus, a non-minimal OS element is better suited for them. Alternatively,\nit could be later considered, and if only proven to be required, a\ndedicated firmware element.\n\nChange-Id: Ib75b65c5a94be818ccd6f747758ce9962319dffc\n""}, {'number': 3, 'created': '2019-08-01 09:19:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/2c017af539574a1f0589474f4eeb42bd6c159c39', 'message': ""Reduce yum-minimal based OS install size footprint\n\nThis patch further minimalizes yum-minimal based OSes. It does so by\nremoving packages not expected on minimal environments, and moving the\ndoc files delete to run in the end of the image build. Additionally,\npackage redhat-rpm-config was removed as there's no value in having it\non such minimal environments, and it pulls Perl and its subpackages.\n\nlinux-firmware and linux-firmware-whence (meta package for mostly iwl\nfirmwares) packages account for approx. 289 M install size on a F30\nsystem, and linux-firmware for approx. 176 M on CentOS 7. Users needing\nthese firmwares are eventually baremetal users and are not looking for a\nvery minimal operating system base install like virtual image users are.\nThus, a non-minimal OS element is better suited for them. Alternatively,\nit could be later considered, and if only proven to be required, a\ndedicated firmware element.\n\nChange-Id: Ib75b65c5a94be818ccd6f747758ce9962319dffc\n""}, {'number': 4, 'created': '2019-08-08 09:11:05.000000000', 'files': ['diskimage_builder/elements/yum-minimal/pre-install.d/03-yum-cleanup', 'diskimage_builder/elements/yum-minimal/install.d/99-autoremove', 'diskimage_builder/elements/yum-minimal/package-installs.yaml', 'diskimage_builder/elements/yum-minimal/finalise.d/95-remove-docs'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/6bccdcc2aa5d8dd0a13f24f2f56e4d9f60602e92', 'message': ""Reduce yum-minimal based OS install size footprint\n\nThis patch further minimalizes yum-minimal based OSes. It does so by\nremoving packages not expected on minimal environments, and moving the\ndoc files delete to run in the end of the image build. Additionally,\npackage redhat-rpm-config was removed as there's no value in having it\non such minimal environments, and it pulls Perl and its subpackages.\n\nlinux-firmware and linux-firmware-whence (meta package for mostly iwl\nfirmwares) packages account for approx. 289 M install size on a F30\nsystem, and linux-firmware for approx. 176 M on CentOS 7. Users needing\nthese firmwares are eventually baremetal users and are not looking for a\nvery minimal operating system base install like virtual image users are.\nThus, a non-minimal OS element is better suited for them. Alternatively,\nit could be later considered, and if only proven to be required, a\ndedicated firmware element.\n\nChange-Id: Ib75b65c5a94be818ccd6f747758ce9962319dffc\n""}]",4,672329,6bccdcc2aa5d8dd0a13f24f2f56e4d9f60602e92,19,6,4,6469,,,0,"Reduce yum-minimal based OS install size footprint

This patch further minimalizes yum-minimal based OSes. It does so by
removing packages not expected on minimal environments, and moving the
doc files delete to run in the end of the image build. Additionally,
package redhat-rpm-config was removed as there's no value in having it
on such minimal environments, and it pulls Perl and its subpackages.

linux-firmware and linux-firmware-whence (meta package for mostly iwl
firmwares) packages account for approx. 289 M install size on a F30
system, and linux-firmware for approx. 176 M on CentOS 7. Users needing
these firmwares are eventually baremetal users and are not looking for a
very minimal operating system base install like virtual image users are.
Thus, a non-minimal OS element is better suited for them. Alternatively,
it could be later considered, and if only proven to be required, a
dedicated firmware element.

Change-Id: Ib75b65c5a94be818ccd6f747758ce9962319dffc
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/29/672329/4 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/yum-minimal/pre-install.d/03-yum-cleanup', 'diskimage_builder/elements/yum-minimal/finalise.d/94-remove-linux-firmware', 'diskimage_builder/elements/yum-minimal/package-installs.yaml', 'diskimage_builder/elements/yum-minimal/finalise.d/95-remove-docs']",4,1a2eca3fa722084e3d0345b7cd22f09a89e1940e,,"#!/bin/bash if [ ${DIB_DEBUG_TRACE:-1} -gt 0 ]; then set -x fi set -eu set -o pipefail # Non-OS base packages are likely to have been installed. Delete doc files. # This is still valid if building a minimal image with only e.g. centos-minimal # element included as it installs extra packages via package-installs. rm -rf /usr/share/{doc,info,gnome/help} ",,33,5
openstack%2Fnova~stable%2Frocky~I5e0a43ec59341c9ac62f89105ddf82c4a014df81,openstack/nova,stable/rocky,I5e0a43ec59341c9ac62f89105ddf82c4a014df81,Replace non-nova server fault message,MERGED,2019-08-06 15:36:56.000000000,2019-08-09 08:00:12.000000000,2019-08-08 07:05:10.000000000,"[{'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 10118}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-06 15:36:56.000000000', 'files': ['nova/tests/functional/test_server_faults.py', 'releasenotes/notes/bug-1837877-cve-fault-message-exposure-5360d794f4976b7c.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/utils.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e0b91a5b1e89bd0506dc6da86bc61f1708f0215a', 'message': 'Replace non-nova server fault message\n\nThe server fault ""message"" is always shown in the API\nserver response, regardless of policy or user role.\n\nThe fault ""details"" are only shown to users with the\nadmin role when the fault code is 500.\n\nThe problem with this is for non-nova exceptions, the\nfault message is a string-ified version of the exception\n(see nova.compute.utils.exception_to_dict) which can\ncontain sensitive information which the non-admin owner\nof the server can see.\n\nThis change adds a functional test to recreate the issue\nand a change to exception_to_dict which for the non-nova\ncase changes the fault message by simply storing the\nexception type class name. Admins can still see the fault\ntraceback in the ""details"" key of the fault dict in the\nserver API response. Note that _get_fault_details is\nchanged so that the details also includes the exception\nvalue which is what used to be in the fault message for\nnon-nova exceptions. This is necessary so admins can still\nget the exception message with the traceback details.\n\nNote that nova exceptions with a %(reason)s replacement\nvariable could potentially be leaking sensitive details as\nwell but those would need to be cleaned up on a case-by-case\nbasis since we don\'t want to change the behavior of all\nfault messages otherwise users might not see information\nlike NoValidHost when their server goes to ERROR status\nduring scheduling.\n\nSecurityImpact: This change contains a fix for CVE-2019-14433.\n\nNOTE(mriedem): The functional test imports change here\nbecause Idaed39629095f86d24a54334c699a26c218c6593 is not\nin Rocky so the PlacementFixture comes from nova_fixtures.\n\nChange-Id: I5e0a43ec59341c9ac62f89105ddf82c4a014df81\nCloses-Bug: #1837877\n(cherry picked from commit 298b337a16c0d10916b4431c436d19b3d6f5360e)\n(cherry picked from commit 67651881163b75eb1983eaf753471a91ecec35eb)\n'}]",0,674848,e0b91a5b1e89bd0506dc6da86bc61f1708f0215a,19,7,1,6873,,,0,"Replace non-nova server fault message

The server fault ""message"" is always shown in the API
server response, regardless of policy or user role.

The fault ""details"" are only shown to users with the
admin role when the fault code is 500.

The problem with this is for non-nova exceptions, the
fault message is a string-ified version of the exception
(see nova.compute.utils.exception_to_dict) which can
contain sensitive information which the non-admin owner
of the server can see.

This change adds a functional test to recreate the issue
and a change to exception_to_dict which for the non-nova
case changes the fault message by simply storing the
exception type class name. Admins can still see the fault
traceback in the ""details"" key of the fault dict in the
server API response. Note that _get_fault_details is
changed so that the details also includes the exception
value which is what used to be in the fault message for
non-nova exceptions. This is necessary so admins can still
get the exception message with the traceback details.

Note that nova exceptions with a %(reason)s replacement
variable could potentially be leaking sensitive details as
well but those would need to be cleaned up on a case-by-case
basis since we don't want to change the behavior of all
fault messages otherwise users might not see information
like NoValidHost when their server goes to ERROR status
during scheduling.

SecurityImpact: This change contains a fix for CVE-2019-14433.

NOTE(mriedem): The functional test imports change here
because Idaed39629095f86d24a54334c699a26c218c6593 is not
in Rocky so the PlacementFixture comes from nova_fixtures.

Change-Id: I5e0a43ec59341c9ac62f89105ddf82c4a014df81
Closes-Bug: #1837877
(cherry picked from commit 298b337a16c0d10916b4431c436d19b3d6f5360e)
(cherry picked from commit 67651881163b75eb1983eaf753471a91ecec35eb)
",git fetch https://review.opendev.org/openstack/nova refs/changes/48/674848/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_server_faults.py', 'releasenotes/notes/bug-1837877-cve-fault-message-exposure-5360d794f4976b7c.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/utils.py']",4,e0b91a5b1e89bd0506dc6da86bc61f1708f0215a,bug/1837877," """"""Converts exceptions to a dict for use in notifications. :param fault: Exception that occurred :param message: Optional fault message, otherwise the message is derived from the fault itself. :returns: dict with the following items: - exception: the fault itself - message: one of (in priority order): - the provided message to this method - a formatted NovaException message - the fault class name - code: integer code for the fault (defaults to 500) """""" # In this case either we have a NovaException which failed to format # the message or we have a non-nova exception which could contain # sensitive details. Since we're not sure, be safe and set the message # to the exception class name. Note that we don't guard on # context.is_admin here because the message is always shown in the API, # even to non-admin users (e.g. NoValidHost) but only the traceback # details are shown to users with the admin role. Checking for admin # context here is also not helpful because admins can perform # operations on a tenant user's server (migrations, reboot, etc) and # service startup and periodic tasks could take actions on a server # and those use an admin context. # TODO(mriedem): Why do we only include the details if the code is 500? # Though for non-nova exceptions the code will probably be 500. if exc_info and error_code == 500: # We get the full exception details including the value since # the fault message may not contain that information for non-nova # exceptions (see exception_to_dict). details = ''.join(traceback.format_exception( exc_info[0], exc_info[1], exc_info[2]))"," """"""Converts exceptions to a dict for use in notifications."""""" try: message = six.text_type(fault) except Exception: message = None if not message: if exc_info and error_code == 500: tb = exc_info[2] if tb: details = ''.join(traceback.format_tb(tb))",183,16
openstack%2Frpm-packaging~stable%2Frocky~I724115429a2ea923cc96028867ea2ee796a65a3b,openstack/rpm-packaging,stable/rocky,I724115429a2ea923cc96028867ea2ee796a65a3b,update python-ironicclient to 2.5.3,MERGED,2019-08-08 21:21:33.000000000,2019-08-09 07:54:53.000000000,2019-08-09 07:54:52.000000000,"[{'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 21:21:33.000000000', 'files': ['openstack/python-ironicclient/python-ironicclient.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/054f08fb6fe0aac80aaf1ebdb57e3e999cf58706', 'message': 'update python-ironicclient to 2.5.3\n\nChange-Id: I724115429a2ea923cc96028867ea2ee796a65a3b\n'}]",0,675470,054f08fb6fe0aac80aaf1ebdb57e3e999cf58706,9,5,1,1916,,,0,"update python-ironicclient to 2.5.3

Change-Id: I724115429a2ea923cc96028867ea2ee796a65a3b
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/70/675470/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/python-ironicclient/python-ironicclient.spec.j2'],1,054f08fb6fe0aac80aaf1ebdb57e3e999cf58706,update_python_ironicclient,{% set upstream_version = upstream_version('2.5.3') %},{% set upstream_version = upstream_version('2.5.2') %},1,1
openstack%2Fcyborg~master~Ic5bb997df771719db3dfe61106b7639cbb2837e7,openstack/cyborg,master,Ic5bb997df771719db3dfe61106b7639cbb2837e7,Add serialization/deserialization for control_path.cpid_info,MERGED,2019-05-14 10:03:16.000000000,2019-08-09 07:54:20.000000000,2019-08-09 07:54:19.000000000,"[{'_account_id': 17813}, {'_account_id': 20722}, {'_account_id': 21672}, {'_account_id': 22348}, {'_account_id': 22899}, {'_account_id': 25738}]","[{'number': 1, 'created': '2019-05-14 10:03:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cyborg/commit/7377065782fdaf5b0ca97556e909219c59ada8fe', 'message': ""Add serialization/deserialization for control_path.cpid_info\n\nThe 'cpid_info' is a string type field which is not convenient to be\nused, we should do serialize/deserialize by manual.\n\nThis patch try to add a property for control_path.cpid_info, the user\ncan use control_path.cpid_info_obj to access the deserialized object.\n\nChange-Id: Ic5bb997df771719db3dfe61106b7639cbb2837e7\n""}, {'number': 2, 'created': '2019-08-09 06:24:32.000000000', 'files': ['cyborg/tests/unit/objects/test_control_path.py', 'cyborg/objects/control_path.py', 'cyborg/tests/unit/db/utils.py'], 'web_link': 'https://opendev.org/openstack/cyborg/commit/729d7dd322d441d30e9e368d6b0b2d3bd1c82653', 'message': ""Add serialization/deserialization for control_path.cpid_info\n\nThe 'cpid_info' is a string type field which is not convenient to be\nused, we should do serialize/deserialize by manual.\n\nThis patch try to add a property for control_path.cpid_info, the user\ncan use control_path.cpid_info_obj to access the deserialized object.\n\nChange-Id: Ic5bb997df771719db3dfe61106b7639cbb2837e7\n""}]",9,659014,729d7dd322d441d30e9e368d6b0b2d3bd1c82653,24,6,2,20722,,,0,"Add serialization/deserialization for control_path.cpid_info

The 'cpid_info' is a string type field which is not convenient to be
used, we should do serialize/deserialize by manual.

This patch try to add a property for control_path.cpid_info, the user
can use control_path.cpid_info_obj to access the deserialized object.

Change-Id: Ic5bb997df771719db3dfe61106b7639cbb2837e7
",git fetch https://review.opendev.org/openstack/cyborg refs/changes/14/659014/2 && git format-patch -1 --stdout FETCH_HEAD,"['cyborg/tests/unit/objects/test_control_path.py', 'cyborg/objects/control_path.py', 'cyborg/tests/unit/db/utils.py']",3,7377065782fdaf5b0ca97556e909219c59ada8fe,cpid_ovo_improve," 'cpid_info': kw.get('cpid_info', '{""device"": ""2"", ""bus"": ""00"", ""function"": ""01""}'),"," 'cpid_info': kw.get('cpid_info', ""cpid_info""),",29,2
openstack%2Fdiskimage-builder~master~I9f96fd140065f48075d4e77325e2c36751b3ef91,openstack/diskimage-builder,master,I9f96fd140065f48075d4e77325e2c36751b3ef91,Move docs delete to finalise.d,ABANDONED,2019-08-09 07:41:47.000000000,2019-08-09 07:47:25.000000000,,[],"[{'number': 1, 'created': '2019-08-09 07:41:47.000000000', 'files': ['diskimage_builder/elements/yum-minimal/pre-install.d/03-yum-cleanup', 'diskimage_builder/elements/yum-minimal/finalise.d/95-remove-docs'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/c188a7ca8a74b52ccb2445c56fc88da6a279c221', 'message': 'Move docs delete to finalise.d\n\nNon-OS base packages are likely to have been installed. This patch moves\nthe doc files delete to run in the end of the image build.\n\nChange-Id: I9f96fd140065f48075d4e77325e2c36751b3ef91\n'}]",0,675545,c188a7ca8a74b52ccb2445c56fc88da6a279c221,2,0,1,6469,,,0,"Move docs delete to finalise.d

Non-OS base packages are likely to have been installed. This patch moves
the doc files delete to run in the end of the image build.

Change-Id: I9f96fd140065f48075d4e77325e2c36751b3ef91
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/45/675545/1 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/yum-minimal/pre-install.d/03-yum-cleanup', 'diskimage_builder/elements/yum-minimal/finalise.d/95-remove-docs']",2,c188a7ca8a74b52ccb2445c56fc88da6a279c221,yum-reduce-footprint,"#!/bin/bash if [ ${DIB_DEBUG_TRACE:-1} -gt 0 ]; then set -x fi set -eu set -o pipefail # Non-OS base packages are likely to have been installed. Delete doc files. # This is still valid if building a minimal image with only e.g. centos-minimal # element included as it installs extra packages via package-installs. rm -rf /usr/share/{doc,info,gnome/help} ",,13,2
openstack%2Foslo.policy~master~Ibfc7d4fca02b896953f80ddf1a9a8b9a19444f72,openstack/oslo.policy,master,Ibfc7d4fca02b896953f80ddf1a9a8b9a19444f72,Add attribute to suppress deprecation warnings,MERGED,2019-08-01 01:29:26.000000000,2019-08-09 07:33:51.000000000,2019-08-06 15:40:27.000000000,"[{'_account_id': 2903}, {'_account_id': 6928}, {'_account_id': 8482}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-01 01:29:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/09c60acbf6f55de0ee27e2936969aae3f5ea5f92', 'message': '(WIP) Log deprecation warnings only on enforcer init\n\nWithout this patch, deprecation warnings are emitted upon every call to\nthe enforcer, which is effectively every API request. This is because\npolicy rules are reloaded on every call, which is necessary to ensure\nrules are always up to date upon every enforcement. However, repeating\nthe same deprecation warning is unnecessary and causes the logs to\nrapidly overfill. This change uses the enforcer object to track whether\ndeprecation warnings have already been emitted and silences the warning\nin that case. This does not address the issue if the enforcer object is\nreinitialized, which will have to be addressed in the calling service.\n\nChange-Id: Ibfc7d4fca02b896953f80ddf1a9a8b9a19444f72\nPartial-bug: #1836568\n'}, {'number': 2, 'created': '2019-08-01 22:47:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/95f12bf2eaa4f9f9bb421dedf27ea603948b323b', 'message': 'Log deprecation warnings only on enforcer init\n\nWithout this patch, deprecation warnings are emitted upon every call to\nthe enforcer, which is effectively every API request. This is because\npolicy rules are reloaded on every call, which is necessary to ensure\nrules are always up to date upon every enforcement. However, repeating\nthe same deprecation warning is unnecessary and causes the logs to\nrapidly overfill. This change uses the enforcer object to track whether\ndeprecation warnings have already been emitted and silences the warning\nin that case. This does not address the issue if the enforcer object is\nreinitialized, which will have to be addressed in the calling service.\n\nNeeded-by: https://review.opendev.org/673933\nChange-Id: Ibfc7d4fca02b896953f80ddf1a9a8b9a19444f72\nCloses-bug: #1836568\n'}, {'number': 3, 'created': '2019-08-05 19:13:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/01ff5400fd9eaa2a8150b730b4ea340c05176427', 'message': 'Add attribute to suppress deprecation warnings\n\nWithout this patch, if a project is going through a heavy policy\nrefactor, significant numbers of deprecation warnings are emitted. When\nthe enforcer is repeated reinitialized, as is the case when unit\ntesting, the vast amount of logs resulting from the warnings is both\nunnecessary and harmful as it impedes log readability and explodes the\nsize of the logs, thereby causing CI instability as the infrastructure\nstruggles to process the logs.\n\nThis change adds a public attribute to the enforcer object to allow\ncallers to suppress these logs. This is not exposed as a configuration\noption because we do not want to allow operators to suppress these logs,\nand the warnings that occur when the enforcer is only reinitialized when\nthe process is reloaded are not nearly so debilitating as they are\nduring, e.g., a unit test run when the enforcer is generally\nreinitialized for every test.\n\nThe Python warnings module allows for setting global attributes to\nfilter logs, and it might have been useful for the consuming project to\nfilter these logs at that level rather than modifying the policy\nenforcer to turn log emissions on and off. The problem with this\napproach is that if the number of deprecations is extreme, as may be the\ncase during a heavy refactor, the warnings filter can become so\ninefficient that the test run can take much longer, causing even further\nCI stability as test runs reach timeout limits.\n\nNeeded-by: https://review.opendev.org/673933\nChange-Id: Ibfc7d4fca02b896953f80ddf1a9a8b9a19444f72\nRelated-bug: #1836568\n'}, {'number': 4, 'created': '2019-08-05 19:35:35.000000000', 'files': ['oslo_policy/policy.py', 'oslo_policy/tests/test_policy.py'], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/4d40252748bd31584f1cbb72d4641dec62cf1303', 'message': 'Add attribute to suppress deprecation warnings\n\nWithout this patch, if a project is going through a heavy policy\nrefactor, significant numbers of deprecation warnings are emitted. When\nthe enforcer is repeated reinitialized, as is the case when unit\ntesting, the vast amount of logs resulting from the warnings is both\nunnecessary and harmful as it impedes log readability and explodes the\nsize of the logs, thereby causing CI instability as the infrastructure\nstruggles to process the logs.\n\nThis change adds a public attribute to the enforcer object to allow\ncallers to suppress these logs. This is not exposed as a configuration\noption because we do not want to allow operators to suppress these logs,\nand the warnings that occur when the enforcer is only reinitialized when\nthe process is reloaded are not nearly so debilitating as they are\nduring, e.g., a unit test run when the enforcer is generally\nreinitialized for every test.\n\nThe Python warnings module allows for setting global attributes to\nfilter logs, and it might have been useful for the consuming project to\nfilter these logs at that level rather than modifying the policy\nenforcer to turn log emissions on and off. The problem with this\napproach is that if the number of deprecations is extreme, as may be the\ncase during a heavy refactor, the warnings filter can become so\ninefficient that the test run can take much longer, causing even further\nCI stability as test runs reach timeout limits.\n\nNeeded-by: https://review.opendev.org/673933\nChange-Id: Ibfc7d4fca02b896953f80ddf1a9a8b9a19444f72\nRelated-bug: #1836568\n'}]",2,673932,4d40252748bd31584f1cbb72d4641dec62cf1303,27,5,4,8482,,,0,"Add attribute to suppress deprecation warnings

Without this patch, if a project is going through a heavy policy
refactor, significant numbers of deprecation warnings are emitted. When
the enforcer is repeated reinitialized, as is the case when unit
testing, the vast amount of logs resulting from the warnings is both
unnecessary and harmful as it impedes log readability and explodes the
size of the logs, thereby causing CI instability as the infrastructure
struggles to process the logs.

This change adds a public attribute to the enforcer object to allow
callers to suppress these logs. This is not exposed as a configuration
option because we do not want to allow operators to suppress these logs,
and the warnings that occur when the enforcer is only reinitialized when
the process is reloaded are not nearly so debilitating as they are
during, e.g., a unit test run when the enforcer is generally
reinitialized for every test.

The Python warnings module allows for setting global attributes to
filter logs, and it might have been useful for the consuming project to
filter these logs at that level rather than modifying the policy
enforcer to turn log emissions on and off. The problem with this
approach is that if the number of deprecations is extreme, as may be the
case during a heavy refactor, the warnings filter can become so
inefficient that the test run can take much longer, causing even further
CI stability as test runs reach timeout limits.

Needed-by: https://review.opendev.org/673933
Change-Id: Ibfc7d4fca02b896953f80ddf1a9a8b9a19444f72
Related-bug: #1836568
",git fetch https://review.opendev.org/openstack/oslo.policy refs/changes/32/673932/4 && git format-patch -1 --stdout FETCH_HEAD,['oslo_policy/policy.py'],1,09c60acbf6f55de0ee27e2936969aae3f5ea5f92,log-warnings-only-on-init, self._logged_warnings_on_load = False self._logged_warnings_on_load = False any_deprecated_rules = False any_deprecated_rules = True any_deprecated_rules = True if any_deprecated_rules: self._logged_warnings_on_load = True if self._logged_warnings_on_load and default.name in self.file_rules: if not self._logged_warnings_on_load: warnings.warn(deprecated_msg) if not self._logged_warnings_on_load: warnings.warn(deprecated_msg), if default.name in self.file_rules: warnings.warn(deprecated_msg) warnings.warn(deprecated_msg),12,3
openstack%2Fceilometer~stable%2Frocky~I4a56ee26ae39ab02bed8bac8d0e364322617622c,openstack/ceilometer,stable/rocky,I4a56ee26ae39ab02bed8bac8d0e364322617622c,Fixing broken links,MERGED,2019-08-09 04:08:50.000000000,2019-08-09 07:31:38.000000000,2019-08-09 07:31:38.000000000,"[{'_account_id': 22348}, {'_account_id': 27068}]","[{'number': 1, 'created': '2019-08-09 04:08:50.000000000', 'files': ['doc/source/admin/telemetry-best-practices.rst', 'doc/source/admin/telemetry-system-architecture.rst'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/395747b739e7fbe793454c70f45dd325c5ab190b', 'message': 'Fixing broken links\n\n1. Dead link to the HA guide. Added a comment regarding\navailability and reliability.\n2. Hyper-v link re-routed to Azure instead of Hyper-V.\nUpdated this so it reflects Hyper-V docs.\n\nSuggestion: Might be worth mentioning which Hyper-V servers\nceilometer actually supports.\n\nChange-Id: I4a56ee26ae39ab02bed8bac8d0e364322617622c\nbackport: stein rocky\n(cherry picked from commit b6896c2400c75d1aa736f45ff0e9b8478efc902e)\n'}]",0,675516,395747b739e7fbe793454c70f45dd325c5ab190b,7,2,1,10607,,,0,"Fixing broken links

1. Dead link to the HA guide. Added a comment regarding
availability and reliability.
2. Hyper-v link re-routed to Azure instead of Hyper-V.
Updated this so it reflects Hyper-V docs.

Suggestion: Might be worth mentioning which Hyper-V servers
ceilometer actually supports.

Change-Id: I4a56ee26ae39ab02bed8bac8d0e364322617622c
backport: stein rocky
(cherry picked from commit b6896c2400c75d1aa736f45ff0e9b8478efc902e)
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/16/675516/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/telemetry-best-practices.rst', 'doc/source/admin/telemetry-system-architecture.rst']",2,395747b739e7fbe793454c70f45dd325c5ab190b,fix-url-404,- `Hyper-V <https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/hyper-v-on-windows-server>`__,- `Hyper-V <http://www.microsoft.com/en-us/server-cloud/hyper-v-server/default.aspx>`__,7,2
openstack%2Fceilometer~stable%2Fstein~I4a56ee26ae39ab02bed8bac8d0e364322617622c,openstack/ceilometer,stable/stein,I4a56ee26ae39ab02bed8bac8d0e364322617622c,Fixing broken links,MERGED,2019-08-09 04:08:39.000000000,2019-08-09 07:24:34.000000000,2019-08-09 07:24:34.000000000,"[{'_account_id': 22348}, {'_account_id': 27068}]","[{'number': 1, 'created': '2019-08-09 04:08:39.000000000', 'files': ['doc/source/admin/telemetry-best-practices.rst', 'doc/source/admin/telemetry-system-architecture.rst'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/c8fa40552861bcba680f17c30ef830d4f7df9852', 'message': 'Fixing broken links\n\n1. Dead link to the HA guide. Added a comment regarding\navailability and reliability.\n2. Hyper-v link re-routed to Azure instead of Hyper-V.\nUpdated this so it reflects Hyper-V docs.\n\nSuggestion: Might be worth mentioning which Hyper-V servers\nceilometer actually supports.\n\nChange-Id: I4a56ee26ae39ab02bed8bac8d0e364322617622c\nbackport: stein rocky\n(cherry picked from commit b6896c2400c75d1aa736f45ff0e9b8478efc902e)\n'}]",0,675515,c8fa40552861bcba680f17c30ef830d4f7df9852,7,2,1,10607,,,0,"Fixing broken links

1. Dead link to the HA guide. Added a comment regarding
availability and reliability.
2. Hyper-v link re-routed to Azure instead of Hyper-V.
Updated this so it reflects Hyper-V docs.

Suggestion: Might be worth mentioning which Hyper-V servers
ceilometer actually supports.

Change-Id: I4a56ee26ae39ab02bed8bac8d0e364322617622c
backport: stein rocky
(cherry picked from commit b6896c2400c75d1aa736f45ff0e9b8478efc902e)
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/15/675515/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/telemetry-best-practices.rst', 'doc/source/admin/telemetry-system-architecture.rst']",2,c8fa40552861bcba680f17c30ef830d4f7df9852,fix-url-404,- `Hyper-V <https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/hyper-v-on-windows-server>`__,- `Hyper-V <http://www.microsoft.com/en-us/server-cloud/hyper-v-server/default.aspx>`__,7,2
openstack%2Fcyborg~master~I7f2a65052e21bbb635e7c7c77b4c17ee6a7a6026,openstack/cyborg,master,I7f2a65052e21bbb635e7c7c77b4c17ee6a7a6026,Bug-fix in FPGA driver test case.,MERGED,2019-08-07 08:36:25.000000000,2019-08-09 07:20:23.000000000,2019-08-09 07:20:23.000000000,"[{'_account_id': 14131}, {'_account_id': 20722}, {'_account_id': 21672}, {'_account_id': 22348}, {'_account_id': 25738}]","[{'number': 1, 'created': '2019-08-07 08:36:25.000000000', 'files': ['cyborg/tests/unit/accelerator/drivers/fpga/intel/test_driver.py'], 'web_link': 'https://opendev.org/openstack/cyborg/commit/03fb1e5b7cdc2ec2987c2cf0f174a04a9b2ebc8d', 'message': 'Bug-fix in FPGA driver test case.\n\nCurrently when we run the FPGA test cases on a host where real FPGA\nlocated, the test will not passed because the discover() return real\nFPGA info and fake FPGA info. In that case, the assertion will fail.\n\nThis patch fixed this.\n\nChange-Id: I7f2a65052e21bbb635e7c7c77b4c17ee6a7a6026\n'}]",2,675058,03fb1e5b7cdc2ec2987c2cf0f174a04a9b2ebc8d,9,5,1,25738,,,0,"Bug-fix in FPGA driver test case.

Currently when we run the FPGA test cases on a host where real FPGA
located, the test will not passed because the discover() return real
FPGA info and fake FPGA info. In that case, the assertion will fail.

This patch fixed this.

Change-Id: I7f2a65052e21bbb635e7c7c77b4c17ee6a7a6026
",git fetch https://review.opendev.org/openstack/cyborg refs/changes/58/675058/1 && git format-patch -1 --stdout FETCH_HEAD,['cyborg/tests/unit/accelerator/drivers/fpga/intel/test_driver.py'],1,03fb1e5b7cdc2ec2987c2cf0f174a04a9b2ebc8d,," self.pcipath_pattern = sysinfo.PCI_DEVICES_PATH_PATTERN sysinfo.PCI_DEVICES_PATH_PATTERN = os.path.join( tmp_path, sysinfo.PCI_DEVICES_PATH_PATTERN.split(""/"", 1)[-1]) sysinfo.PCI_DEVICES_PATH_PATTERN = self.pcipath_pattern 'name': 'intel-fpga-dev_0000:5e:00.1', 'name': 'intel-fpga-dev_0000:be:00.0',"," 'name': 'intel-fpga-dev.1', 'name': 'intel-fpga-dev.2',",6,2
openstack%2Frequirements~master~I6e9d7d458b509a47f5715856e1ead8a76f9f689f,openstack/requirements,master,I6e9d7d458b509a47f5715856e1ead8a76f9f689f,Updated from generate-constraints,ABANDONED,2019-08-09 06:15:24.000000000,2019-08-09 06:42:33.000000000,,[],"[{'number': 1, 'created': '2019-08-09 06:15:24.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/7b5e21afdf91a24f8325c2fd10dce85a95e148a8', 'message': 'Updated from generate-constraints\n\nChange-Id: I6e9d7d458b509a47f5715856e1ead8a76f9f689f\n'}]",0,675527,7b5e21afdf91a24f8325c2fd10dce85a95e148a8,2,0,1,11131,,,0,"Updated from generate-constraints

Change-Id: I6e9d7d458b509a47f5715856e1ead8a76f9f689f
",git fetch https://review.opendev.org/openstack/requirements refs/changes/27/675527/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,7b5e21afdf91a24f8325c2fd10dce85a95e148a8,openstack/requirements/constraints,lxml===4.4.0pytest===4.6.5;python_version=='2.7'pysnmp===4.4.10Mako===1.1.0scipy===1.3.1;python_version=='3.4' scipy===1.3.1;python_version=='3.5' scipy===1.3.1;python_version=='3.6' scipy===1.3.1;python_version=='3.7'ruamel.yaml.clib===0.1.2sphinxcontrib.datatemplates===0.5.0arrow===0.14.5oslo.messaging===10.0.0tornado===5.1.1;python_version=='2.7'PyYAML===5.1.2python-3parclient===4.2.10libvirt-python===5.6.0ruamel.yaml===0.16.1daiquiri===1.6.0autobahn===19.8.1gabbi===1.49.0boto3===1.9.204stestr===2.5.0infinisdk===141.1.0 packaging===19.1protobuf===3.9.1kubernetes===10.0.0botocore===1.12.204pyasn1===0.4.6Django===1.11.23;python_version=='2.7'redis===3.3.6pyzmq===18.1.0pymemcache===2.2.2oslo.policy===2.3.0pyasn1-modules===0.2.6storops===1.2.0jsonschema===3.0.2oauthlib===3.1.0pytz===2019.2,lxml===4.3.4pytest===4.6.4;python_version=='2.7'pysnmp===4.4.9Mako===1.0.14scipy===1.3.0;python_version=='3.4' scipy===1.3.0;python_version=='3.5' scipy===1.3.0;python_version=='3.6' scipy===1.3.0;python_version=='3.7'ruamel.yaml.clib===0.1.0sphinxcontrib.datatemplates===0.4.0arrow===0.14.3oslo.messaging===9.8.0tornado===4.5.3;python_version=='2.7'PyYAML===5.1.1python-3parclient===4.2.9libvirt-python===5.5.0ruamel.yaml===0.16.0daiquiri===1.5.0autobahn===19.7.2gabbi===1.48.0boto3===1.9.191stestr===2.4.0infinisdk===127.2.1 packaging===19.0protobuf===3.9.0kubernetes===9.0.0botocore===1.12.191pyasn1===0.4.5Django===1.11.22;python_version=='2.7'redis===3.3.2pyzmq===18.0.2pymemcache===2.1.1oslo.policy===2.2.0pyasn1-modules===0.2.5storops===1.1.0jsonschema===2.6.0oauthlib===3.0.2pytz===2019.1,38,38
openstack%2Ftripleo-heat-templates~master~Ifa06f849dda8599b752cb6265c2a78083c4d6be1,openstack/tripleo-heat-templates,master,Ifa06f849dda8599b752cb6265c2a78083c4d6be1,Disable ovn provider driver for octavia in scenario010,ABANDONED,2019-08-08 07:51:57.000000000,2019-08-09 06:39:37.000000000,,"[{'_account_id': 3153}, {'_account_id': 6469}, {'_account_id': 6681}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 07:51:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b04588e3e6bc864c8f6e9833394b887d3038046e', 'message': ""Disable ovn provider driver for octavia in scenario010\n\nWith https://review.opendev.org/#/c/665027/ octavia-lib now checks\nfor existence of the sockets when loading the drivers. We enable\novn provider based on enabled nutron-driver. However, we still don't\nhave the agent ready.\n\nChange-Id: Ifa06f849dda8599b752cb6265c2a78083c4d6be1\nCloses-Bug: #1839436\n""}, {'number': 2, 'created': '2019-08-08 11:35:30.000000000', 'files': ['ci/environments/scenario010-multinode-containers.yaml', 'ci/environments/scenario010-standalone.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/440530bef3398f2f1c7fff08d4f0df7a7b6b8253', 'message': ""Disable ovn provider driver for octavia in scenario010\n\nWith https://review.opendev.org/#/c/665027/ octavia-lib now checks\nfor existence of the sockets when loading the drivers. We enable\novn provider based on enabled nutron-driver. However, we still don't\nhave the agent ready.\n\nChange-Id: Ifa06f849dda8599b752cb6265c2a78083c4d6be1\nDepends-On: https://review.opendev.org/675301\nCloses-Bug: #1839436\n""}]",3,675263,440530bef3398f2f1c7fff08d4f0df7a7b6b8253,11,9,2,8833,,,0,"Disable ovn provider driver for octavia in scenario010

With https://review.opendev.org/#/c/665027/ octavia-lib now checks
for existence of the sockets when loading the drivers. We enable
ovn provider based on enabled nutron-driver. However, we still don't
have the agent ready.

Change-Id: Ifa06f849dda8599b752cb6265c2a78083c4d6be1
Depends-On: https://review.opendev.org/675301
Closes-Bug: #1839436
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/63/675263/2 && git format-patch -1 --stdout FETCH_HEAD,"['ci/environments/scenario010-multinode-containers.yaml', 'ci/environments/scenario010-standalone.yaml']",2,b04588e3e6bc864c8f6e9833394b887d3038046e,," StandaloneExtraConfig: # We're not yet ready to use ovn provider driver without the driver agent octavia::api::provider_drivers: 'amphora: The Octavia Amphora driver.,octavia: Deprecated alias of the Octavia Amphora driver.'",,5,0
openstack%2Fcongress~master~I7f3a6b0b6973b99e535dfd379a5188732529e420,openstack/congress,master,I7f3a6b0b6973b99e535dfd379a5188732529e420,Define new 'congress-tempest-ipv6-only' job in gate,MERGED,2019-07-20 19:29:58.000000000,2019-08-09 06:14:27.000000000,2019-08-09 06:14:27.000000000,"[{'_account_id': 8556}, {'_account_id': 18591}, {'_account_id': 22348}, {'_account_id': 25553}]","[{'number': 1, 'created': '2019-07-20 19:29:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/871dbb47b9980700d1d43604f3c5a81850301862', 'message': ""Define new 'congress-tempest-ipv6-only' job in gate\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' (adding\nin Depends-On patch) which will deploy services on IPv6.\n\nThis commit adds the new job 'congress-tempest-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'congress-tempest-ipv6-only' will run the tests.\n\nStory: #2005477\nTask: #35885\n\nDepends-On: https://review.opendev.org/#/c/671231/\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: I7f3a6b0b6973b99e535dfd379a5188732529e420\n""}, {'number': 2, 'created': '2019-07-22 06:51:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/64fae6885c9c3c268cbe342668ad84df529b96fe', 'message': ""Define new 'congress-tempest-ipv6-only' job in gate\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' (adding\nin Depends-On patch) which will deploy services on IPv6.\n\nThis commit adds the new job 'congress-tempest-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'congress-tempest-ipv6-only' will run the tests.\n\nStory: #2005477\nTask: #35885\n\nDepends-On: https://review.opendev.org/#/c/671231/\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: I7f3a6b0b6973b99e535dfd379a5188732529e420\n""}, {'number': 3, 'created': '2019-08-08 00:17:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/7df5314f9bff6095df7af6cee334e790d2caaec2', 'message': ""WIP: Define new 'congress-tempest-ipv6-only' job in gate\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' (adding\nin Depends-On patch) which will deploy services on IPv6.\n\nThis commit adds the new job 'congress-tempest-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'congress-tempest-ipv6-only' will run the tests.\n\nStory: #2005477\nTask: #35885\n\nDepends-On: https://review.opendev.org/#/c/671231/\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: I7f3a6b0b6973b99e535dfd379a5188732529e420\n""}, {'number': 4, 'created': '2019-08-08 02:12:49.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/congress/commit/a8ab0d758e464cf7d5ce9ba48249bd4954345613', 'message': ""Define new 'congress-tempest-ipv6-only' job in gate\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' (adding\nin Depends-On patch) which will deploy services on IPv6.\n\nThis commit adds the new job 'congress-tempest-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'congress-tempest-ipv6-only' will run the tests.\n\nStory: #2005477\nTask: #35885\n\nDepends-On: https://review.opendev.org/#/c/671231/\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: I7f3a6b0b6973b99e535dfd379a5188732529e420\n""}]",0,671908,a8ab0d758e464cf7d5ce9ba48249bd4954345613,21,4,4,8556,,,0,"Define new 'congress-tempest-ipv6-only' job in gate

As part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],
Tempest has defined the base job 'devstack-tempest-ipv6' (adding
in Depends-On patch) which will deploy services on IPv6.

This commit adds the new job 'congress-tempest-ipv6-only'
run on gate which is derived from 'devstack-tempest-ipv6'.

Verification structure will be:
- 'devstack-IPv6' deploy the service on IPv6
- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address
- 'congress-tempest-ipv6-only' will run the tests.

Story: #2005477
Task: #35885

Depends-On: https://review.opendev.org/#/c/671231/

[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html

Change-Id: I7f3a6b0b6973b99e535dfd379a5188732529e420
",git fetch https://review.opendev.org/openstack/congress refs/changes/08/671908/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,871dbb47b9980700d1d43604f3c5a81850301862,ipv6-only-deployment-and-testing, irrelevant-files: &base_irrelevant_files required-projects: &base_required_projects vars: &base_vars name: congress-tempest-ipv6-only parent: devstack-tempest-ipv6 description: | Congress devstack tempest tests job for IPv6-only deployment irrelevant-files: *base_irrelevant_files required-projects: *base_required_projects timeout: 6000 vars: *base_vars - job:, irrelevant-files: required-projects: vars:,13,3
openstack%2Fnetworking-midonet~master~I3d304d9b744566d5eea5d9836b2503451b59320b,openstack/networking-midonet,master,I3d304d9b744566d5eea5d9836b2503451b59320b,Disable ubuntu integration jobs,MERGED,2019-08-02 18:37:59.000000000,2019-08-09 05:38:36.000000000,2019-08-09 05:38:35.000000000,"[{'_account_id': 156}, {'_account_id': 4146}, {'_account_id': 6854}, {'_account_id': 19307}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-02 18:37:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-midonet/commit/f57596ded1a62adb7454fbbfd7fed4e3601861c9', 'message': ""Disable ubuntu integration jobs\n\nSimilar to the centos integration jobs these jobs are failing. These\njobs speak to builds.midonet.org via http:// so they aren't failing due\nto the expired cert. Instead they are failing because midolman fails to\nresolve its dependencies of vpp and libreswan.\n\nThe error:\n  Some packages could not be installed. This may mean that you have\n  requested an impossible situation or if you are using the unstable\n  distribution that some required packages have not yet been created\n  or been moved out of Incoming.\n  The following information may help to resolve the situation:\n\n  The following packages have unmet dependencies:\n   midolman : Depends: libreswan (>= 3.14-1) but it is not going to be installed\n              Depends: vpp but it is not going to be installed\n  E: Unable to correct problems, you have held broken packages.\n\nAs with the centos jobs these jobs can be added back if someone is\nworking to fix them. Such changes will be self testing so you will know\nif they function before you merge the change.\n\nChange-Id: I3d304d9b744566d5eea5d9836b2503451b59320b\n""}, {'number': 2, 'created': '2019-08-05 17:03:19.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/networking-midonet/commit/486fd932b15835da9e513bd775708278d99a55bc', 'message': ""Disable ubuntu integration jobs\n\nSimilar to the centos integration jobs these jobs are failing. These\njobs speak to builds.midonet.org via http:// so they aren't failing due\nto the expired cert. Instead they are failing because midolman fails to\nresolve its dependencies of vpp and libreswan.\n\nThe error:\n  Some packages could not be installed. This may mean that you have\n  requested an impossible situation or if you are using the unstable\n  distribution that some required packages have not yet been created\n  or been moved out of Incoming.\n  The following information may help to resolve the situation:\n\n  The following packages have unmet dependencies:\n   midolman : Depends: libreswan (>= 3.14-1) but it is not going to be installed\n              Depends: vpp but it is not going to be installed\n  E: Unable to correct problems, you have held broken packages.\n\nAs with the centos jobs these jobs can be added back if someone is\nworking to fix them. Such changes will be self testing so you will know\nif they function before you merge the change.\n\nChange-Id: I3d304d9b744566d5eea5d9836b2503451b59320b\n""}]",1,674404,486fd932b15835da9e513bd775708278d99a55bc,16,5,2,4146,,,0,"Disable ubuntu integration jobs

Similar to the centos integration jobs these jobs are failing. These
jobs speak to builds.midonet.org via http:// so they aren't failing due
to the expired cert. Instead they are failing because midolman fails to
resolve its dependencies of vpp and libreswan.

The error:
  Some packages could not be installed. This may mean that you have
  requested an impossible situation or if you are using the unstable
  distribution that some required packages have not yet been created
  or been moved out of Incoming.
  The following information may help to resolve the situation:

  The following packages have unmet dependencies:
   midolman : Depends: libreswan (>= 3.14-1) but it is not going to be installed
              Depends: vpp but it is not going to be installed
  E: Unable to correct problems, you have held broken packages.

As with the centos jobs these jobs can be added back if someone is
working to fix them. Such changes will be self testing so you will know
if they function before you merge the change.

Change-Id: I3d304d9b744566d5eea5d9836b2503451b59320b
",git fetch https://review.opendev.org/openstack/networking-midonet refs/changes/04/674404/2 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,f57596ded1a62adb7454fbbfd7fed4e3601861c9,disable-ubuntu-jobs,, - networking-midonet-tempest-multinode-ml2: voting: false irrelevant-files: - ^(test-|)requirements.txt$ - ^.*\.rst$ - ^doc/.*$ - ^midonet/neutron/tests/unit/.*$ - ^setup.cfg$ - ^specs/.*$ - networking-midonet-tempest-multinode-ml2-full: voting: false irrelevant-files: - ^(test-|)requirements.txt$ - ^.*\.rst$ - ^doc/.*$ - ^midonet/neutron/tests/unit/.*$ - ^setup.cfg$ - ^specs/.*$ - networking-midonet-tempest-aio-ml2-full-legacy: voting: false branches: ^(?!stable/(ocata|pike)).*$ irrelevant-files: - ^(test-|)requirements.txt$ - ^.*\.rst$ - ^doc/.*$ - ^midonet/neutron/tests/unit/.*$ - ^setup.cfg$ - ^specs/.*$ - networking-midonet-grenade-ml2: voting: false irrelevant-files: - ^(test-|)requirements.txt$ - ^.*\.rst$ - ^doc/.*$ - ^midonet/neutron/tests/unit/.*$ - ^setup.cfg$ - ^specs/.*$ - networking-midonet-rally-ml2: voting: false irrelevant-files: - ^.*\.rst$ - ^doc/.*$ - ^midonet/neutron/tests/unit/.*$ - ^specs/.*$,0,44
openstack%2Fcharm-guide~master~I1f632cd84638be5e266640f81ba69ac5d8edc562,openstack/charm-guide,master,I1f632cd84638be5e266640f81ba69ac5d8edc562,Update the charm list,MERGED,2019-08-08 19:51:45.000000000,2019-08-09 05:19:08.000000000,2019-08-09 05:19:07.000000000,"[{'_account_id': 13686}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 19:51:45.000000000', 'files': ['doc/source/openstack-charms.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/c55a4cbf055eb632b2ba4df08fa20075d20efbdb', 'message': 'Update the charm list\n\nSupported list:\n\n  * octavia-diskimage-retrofit (added)\n  * cinder-backup (removed)\n\nSupporting/auxiliary list:\n\n  * glance-simplestreams-sync (added)\n  * alphabetical ordering\n\nPreview list:\n\n  * cinder-backup (kept)\n\nDeprecated list:\n\n  * nova-lxd (added)\n  * alphabetical ordering\n\nChange-Id: I1f632cd84638be5e266640f81ba69ac5d8edc562\n'}]",0,675455,c55a4cbf055eb632b2ba4df08fa20075d20efbdb,6,2,1,30561,,,0,"Update the charm list

Supported list:

  * octavia-diskimage-retrofit (added)
  * cinder-backup (removed)

Supporting/auxiliary list:

  * glance-simplestreams-sync (added)
  * alphabetical ordering

Preview list:

  * cinder-backup (kept)

Deprecated list:

  * nova-lxd (added)
  * alphabetical ordering

Change-Id: I1f632cd84638be5e266640f81ba69ac5d8edc562
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/55/675455/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/openstack-charms.rst'],1,c55a4cbf055eb632b2ba4df08fa20075d20efbdb,update-charm-list,* `octavia-diskimage-retrofit <https://opendev.org/openstack/charm-octavia-diskimage-retrofit/>`_* `ceph-osd <https://opendev.org/openstack/charm-ceph-osd/>`_* `glance-simplestreams-sync <https://opendev.org/openstack/charm-glance-simplestreams-sync/>`_* `hacluster <https://opendev.org/openstack/charm-hacluster/>`_ * `lxd <https://opendev.org/openstack/charm-lxd/>`_ * `percona-cluster <https://opendev.org/openstack/charm-percona-cluster/>`_ * `rabbitmq-server <https://opendev.org/openstack/charm-rabbitmq-server/>`_* `nova-lxd <https://opendev.org/openstack/charm-nova-lxd/>`_* `openvswitch-odl <https://opendev.org/openstack/charm-openvswitch-odl/>`_,* `cinder-backup <https://opendev.org/openstack/charm-cinder-backup/>`_* `percona-cluster <https://opendev.org/openstack/charm-percona-cluster/>`_ * `rabbitmq-server <https://opendev.org/openstack/charm-rabbitmq-server/>`_ * `lxd <https://opendev.org/openstack/charm-lxd/>`_ * `ceph-osd <https://opendev.org/openstack/charm-ceph-osd/>`_* `hacluster <https://opendev.org/openstack/charm-hacluster/>`_* `openvswitch-odl <https://opendev.org/openstack/charm-openvswitch-odl/>`_,9,8
openstack%2Fcharm-guide~master~I34604e05e93aaa6cec6ef0f6fe0367b298cccd09,openstack/charm-guide,master,I34604e05e93aaa6cec6ef0f6fe0367b298cccd09,editorial: 19.07 release notes,MERGED,2019-08-06 15:45:07.000000000,2019-08-09 05:03:14.000000000,2019-08-09 05:03:14.000000000,"[{'_account_id': 935}, {'_account_id': 13686}, {'_account_id': 20635}, {'_account_id': 22348}, {'_account_id': 30561}]","[{'number': 1, 'created': '2019-08-06 15:45:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/1bdf324f9f2c94dbf4013429b29f2cdec24edb94', 'message': 'editorial: 19.07 release notes\n\nGeneral editorial and tidy up to refactor release notes into\nactualy release notes rather than feature documentation.\n\nChange-Id: I34604e05e93aaa6cec6ef0f6fe0367b298cccd09\n'}, {'number': 2, 'created': '2019-08-07 08:52:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/dfba88f177cb5e66ad3bc054084fae92fbeb41fb', 'message': 'editorial: 19.07 release notes\n\nGeneral editorial and tidy up to refactor release notes into\nactualy release notes rather than feature documentation.\n\nChange-Id: I34604e05e93aaa6cec6ef0f6fe0367b298cccd09\n'}, {'number': 3, 'created': '2019-08-07 21:56:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/606010d81b5d3da19b828f05dbb6855020a378de', 'message': 'editorial: 19.07 release notes\n\nGeneral editorial and tidy up to refactor release notes into\nactualy release notes rather than feature documentation.\n\nChange-Id: I34604e05e93aaa6cec6ef0f6fe0367b298cccd09\n'}, {'number': 4, 'created': '2019-08-08 06:07:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/cfe37f8aa43004c986f607e04da53879a0bd8877', 'message': 'editorial: 19.07 release notes\n\nGeneral editorial and tidy up to refactor release notes into\nactualy release notes rather than feature documentation.\n\nChange-Id: I34604e05e93aaa6cec6ef0f6fe0367b298cccd09\n'}, {'number': 5, 'created': '2019-08-08 14:10:36.000000000', 'files': ['doc/source/1907.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/6bcedaa62f00a6fe87624a9eef9554d54df251a7', 'message': 'editorial: 19.07 release notes\n\nGeneral editorial and tidy up to refactor release notes into\nactualy release notes rather than feature documentation.\n\nChange-Id: I34604e05e93aaa6cec6ef0f6fe0367b298cccd09\n'}]",1,674852,6bcedaa62f00a6fe87624a9eef9554d54df251a7,17,5,5,935,,,0,"editorial: 19.07 release notes

General editorial and tidy up to refactor release notes into
actualy release notes rather than feature documentation.

Change-Id: I34604e05e93aaa6cec6ef0f6fe0367b298cccd09
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/52/674852/3 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/1907.rst'],1,1bdf324f9f2c94dbf4013429b29f2cdec24edb94,19.07-release-notes,"* nova-lxdoperational tasks surrounding an unexpected database cluster shutdown. Human interaction is still required to recover the cluster.section in the `charm documentation <https://jaas.ai/percona-cluster/349>`.The neutron-openvswitch charm now supports deployment of DVR based routers with combined SNAT functionality, removing the need to use the neutron-gateway charm in some types of deployment. This implicitly requires that 'external' networks are routable to all hypervisors within the deployment to allow effective load balancing of SNAT routers and DVR services across a deployment. For more details refer to the documentation of the ``use-dvr-snat`` configuration option of the `neutron-openvswitch <https://jaas.io/neutron-openvswitch` charma tool for retro-fitting cloud images for use as Octavia Amphora.`charm home page <https://jaas.ai/octavia-diskimage-retrofit/5>` and the `charm deployment guide <https://docs.openstack.org/project-deploy-guide/charm-deployment-guide/latest/app-octavia.html#amphora-image>`.`charm documentation <https://jaas.ai/nova-cloud-controller#charm-config-cache-known-hosts>`.Inline with the `retirement of the nova compute driver for lxd <https://opendev.org/x/nova-lxd/>`, the nova-lxd charm has been deprecated with this release. Git repos and branches, as well as charm store historical revisions remain in place for community efforts and existing users. The OpenStack Charms team will no longer focus on backports or bug fixes to the nova lxd driver or the corresponding charm.Percona-Cluster Charm Trusty Support ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ The Percona-Cluster Charm has dropped support for Trusty. This, and future releases of the Percona-Cluster Charm will no longer support Trusty. The","* nova-lxd (retired)operational tasks surrounding a database shutdown scenario. However, human interaction is still required. In the event of an unexpected power outage and cold boot, the cluster will be unable to re-establish itself without manual intervention. In such situation determine the node with the highest sequence number by verifying information from the '/var/lib/percona-xtradb-cluster/grastate.dat' file or 'juju status' output, and bootstrap the node by running the following action: juju run-action --wait percona-cluster/<unit-number> bootstrap-pxc In order to notify the cluster of the new bootstrap UUID run the following action: juju run-action --wait percona-cluster/<unit-number> notify-bootstrapped The percona-cluster is now back to a clustered and healthy state.section at the `charm documentation <https://jaas.ai/u/openstack-charmers/percona-cluster/349>`. For more information about Percona recovery refer to the `upstream documentation <https://www.percona.com/blog/2014/09/01/galera-replication-how-to-recover-a-pxc-cluster/>`.TODO: Writeme.a tool for retrofitting cloud images for use as Octavia Amphora. One of the problems with Octavia was that it needs a method for generating base images to be deployed as load balancing entities. The octavia-diskimage-retrofit charm solves this problem by providing an action which, upon end user request, downloads the most recent Ubuntu Server or Minimal Cloud image from Glance, applies OpenStack Diskimage-builder elements from OpenStack Octavia and turns it into an image suitable for use by Octavia. The charm can be deployed as a subordinate application as follows: juju deploy glance-simplestreams-sync \ --config source=ppa:simplestreams-dev/trunk juju deploy octavia-diskimage-retrofit \ --config amp-image-tag=octavia-amphora juju add-relation glance-simplestreams-sync keystone juju add-relation glance-simplestreams-sync rabbitmq-server juju add-relation octavia-diskimage-retrofit glance-simplestreams-sync juju add-relation octavia-diskimage-retrofit keystone Once deployed the retrofitting process can be triggered as follows: juju run-action octavia-diskimage-retrofit/leader retrofit-image`charm home page <https://jaas.ai/u/openstack-charmers/octavia-diskimage-retrofit/5>`. For the project home page visit https://github.com/openstack/charm-octavia-diskimage-retrofit. For a detailed deployment guide visit `OpenStack Documentation <https://docs.openstack.org/project-deploy-guide/charm-deployment-guide/latest/app-octavia.html#amphora-image>`.TODO: Remove the following text once the README of nova-cloud-controller is updated. The rest of this section covers an EXPERIMENTAL option involving the caching of SSH host lookups (knownhosts) on each nova-compute unit. There is a new Boolean configuration option - ``cache-known-hosts`` - that allows any given host lookup to be performed just once. .. note:: A cloud can be deployed with the ``cache-known-hosts`` key set to ``false``, and be set to ``true`` post-deployment. At that point the hosts will have been cached. The key only controls *whether* the cache is used or not. If the above key is set, a new Juju action ``clear-unit-knownhost-cache`` is provided to clear the cache. This can be applied to a unit, service, or an entire nova-cloud-controller application. This would be needed if DNS resolution had changed in an existing cloud or during a cloud deployment. Not clearing the cache in such cases would result in an inconsistent set of knownhosts files. This action will cause DNS resolution to be performed (for unit/service/application), thus potentially triggering a relation-set on the nova-cloud-controller unit(s) and subsequent changed hook on the related nova-compute units. The action is used as follows, based on unit, service, or application, respectively: juju run-action nova-cloud-controller/0 clear-unit-knownhost-cache target=nova-compute/2 juju run-action nova-cloud-controller/0 clear-unit-knownhost-cache target=nova-compute juju run-action nova-cloud-controller/0 clear-unit-knownhost-cache In a high-availability setup, the action **must** be run on all nova-cloud-controller units. `charm documentation <https://jaas.ai/u/openstack-charmers/nova-cloud-controller/435#charm-config-cache-known-hosts>`.For more information on the vault-kv interface visit the `project home page <https://github.com/openstack-charmers/charm-interface-vault-kv>`. Inline with the `retirement of the nova compute driver for lxd <https://opendev.org/x/nova-lxd/>`, the nova-lxd charm has been deprecated with this release. Git repos and branches, as well as charm store historical revisions remain in place for community efforts and existing users. The OpenStack Charms team will no longer focus on backports or bug fixes to the nova lxd driver or the corresponding charm. The purpose of the nova lxd charm was to provide nova api access to lxd hypervisors, in place or alongside kvm hypervisors. This has no bearing on the lxd project itself, which has its own healthy ecosystem with an aggressive feature roadmap, and is under active development. For more information about LXD visit the `project home page <https://linuxcontainers.org/>`.Percona-Cluster Charm Trusty Series Removed ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ The Percona-Cluster Charm has had the Trusty series removed. This, and future releases of the Percona-Cluster Charm will no longer function on Trusty. The",27,101
openstack%2Frequirements~master~Ie1136ef123a29a0c41bcbdae613da837cf6200a3,openstack/requirements,master,Ie1136ef123a29a0c41bcbdae613da837cf6200a3,update constraint for tooz to new release 1.66.1,MERGED,2019-08-08 21:54:44.000000000,2019-08-09 04:47:56.000000000,2019-08-09 04:47:56.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 21:54:44.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/cbed28fdf15778736b6d9945b61e64501a46f659', 'message': 'update constraint for tooz to new release 1.66.1\n\nChange-Id: Ie1136ef123a29a0c41bcbdae613da837cf6200a3\nmeta:version: 1.66.1\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Ben Nemec <bnemec@redhat.com>\nmeta:release:Commit: Ben Nemec <bnemec@redhat.com>\nmeta:release:Change-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f\nmeta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,675475,cbed28fdf15778736b6d9945b61e64501a46f659,6,2,1,11131,,,0,"update constraint for tooz to new release 1.66.1

Change-Id: Ie1136ef123a29a0c41bcbdae613da837cf6200a3
meta:version: 1.66.1
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Ben Nemec <bnemec@redhat.com>
meta:release:Commit: Ben Nemec <bnemec@redhat.com>
meta:release:Change-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f
meta:release:Code-Review+1: Colleen Murphy <colleen@gazlene.net>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/75/675475/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,cbed28fdf15778736b6d9945b61e64501a46f659,new-release,tooz===1.66.1,tooz===1.66.0,1,1
openstack%2Fceilometer~master~I4a56ee26ae39ab02bed8bac8d0e364322617622c,openstack/ceilometer,master,I4a56ee26ae39ab02bed8bac8d0e364322617622c,Fixing broken links,MERGED,2019-08-09 03:10:03.000000000,2019-08-09 04:08:50.000000000,2019-08-09 04:03:24.000000000,"[{'_account_id': 6732}, {'_account_id': 10607}, {'_account_id': 22348}, {'_account_id': 27068}]","[{'number': 1, 'created': '2019-08-09 03:10:03.000000000', 'files': ['doc/source/admin/telemetry-best-practices.rst', 'doc/source/admin/telemetry-system-architecture.rst'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/b6896c2400c75d1aa736f45ff0e9b8478efc902e', 'message': 'Fixing broken links\n\n1. Dead link to the HA guide. Added a comment regarding\navailability and reliability.\n2. Hyper-v link re-routed to Azure instead of Hyper-V.\nUpdated this so it reflects Hyper-V docs.\n\nSuggestion: Might be worth mentioning which Hyper-V servers\nceilometer actually supports.\n\nChange-Id: I4a56ee26ae39ab02bed8bac8d0e364322617622c\nbackport: stein rocky\n'}]",1,675507,b6896c2400c75d1aa736f45ff0e9b8478efc902e,11,4,1,10607,,,0,"Fixing broken links

1. Dead link to the HA guide. Added a comment regarding
availability and reliability.
2. Hyper-v link re-routed to Azure instead of Hyper-V.
Updated this so it reflects Hyper-V docs.

Suggestion: Might be worth mentioning which Hyper-V servers
ceilometer actually supports.

Change-Id: I4a56ee26ae39ab02bed8bac8d0e364322617622c
backport: stein rocky
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/07/675507/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/telemetry-best-practices.rst', 'doc/source/admin/telemetry-system-architecture.rst']",2,b6896c2400c75d1aa736f45ff0e9b8478efc902e,fix-url-404,- `Hyper-V <https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/hyper-v-on-windows-server>`__,- `Hyper-V <http://www.microsoft.com/en-us/server-cloud/hyper-v-server/default.aspx>`__,7,2
openstack%2Ftripleo-heat-templates~stable%2Fstein~Ic2fb37d6ff872840ec4fc506c6949327d2d9705c,openstack/tripleo-heat-templates,stable/stein,Ic2fb37d6ff872840ec4fc506c6949327d2d9705c,Ensure libnsl dependency is available,MERGED,2019-08-08 14:57:56.000000000,2019-08-09 03:47:07.000000000,2019-08-09 03:47:07.000000000,"[{'_account_id': 3153}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-08 14:57:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/234559ae22795090fab5a0e56feda57a79629604', 'message': 'Ensure libnsl dependency is available\n\nlibnsl is a dependency of the nfast client software, so it must\nalso be mounted on the container for the nfast tools to work.\n\nChange-Id: Ic2fb37d6ff872840ec4fc506c6949327d2d9705c\n(cherry picked from commit af3208c743d2c2940a3a5c5721e1a1e04ef50f6c)\n'}, {'number': 2, 'created': '2019-08-08 20:53:40.000000000', 'files': ['deployment/barbican/barbican-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/eb09a925f58db653eb2a315ba42d8981441a961d', 'message': 'Ensure libnsl dependency is available\n\nlibnsl is a dependency of the nfast client software, so it must\nalso be mounted on the container for the nfast tools to work.\n\nChange-Id: Ic2fb37d6ff872840ec4fc506c6949327d2d9705c\n(cherry picked from commit af3208c743d2c2940a3a5c5721e1a1e04ef50f6c)\n'}]",0,675369,eb09a925f58db653eb2a315ba42d8981441a961d,10,4,2,7973,,,0,"Ensure libnsl dependency is available

libnsl is a dependency of the nfast client software, so it must
also be mounted on the container for the nfast tools to work.

Change-Id: Ic2fb37d6ff872840ec4fc506c6949327d2d9705c
(cherry picked from commit af3208c743d2c2940a3a5c5721e1a1e04ef50f6c)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/69/675369/2 && git format-patch -1 --stdout FETCH_HEAD,['deployment/barbican/barbican-api-container-puppet.yaml'],1,234559ae22795090fab5a0e56feda57a79629604,, - /lib64/libnsl.so.1:/lib64/libnsl.so.1 - /lib64/libnsl.so.1:/lib64/libnsl.so.1 - /lib64/libnsl.so.1:/lib64/libnsl.so.1,,3,0
openstack%2Fplacement~master~Iefbb38f1f328b4d7a51cfec360c81369a977461e,openstack/placement,master,Iefbb38f1f328b4d7a51cfec360c81369a977461e,Correct SQL docstring on _get_usages_by_provider_trees,MERGED,2019-08-08 11:43:24.000000000,2019-08-09 03:40:47.000000000,2019-08-09 03:40:46.000000000,"[{'_account_id': 14070}, {'_account_id': 22348}, {'_account_id': 25625}]","[{'number': 1, 'created': '2019-08-08 11:43:24.000000000', 'files': ['placement/objects/research_context.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/b16b48ad6341dc90a2fae8be47ba5cc20df97fff', 'message': 'Correct SQL docstring on _get_usages_by_provider_trees\n\nWe updated the SQL when getting rid of null root provider\nprotections [1] but did not update the docstring. This does.\n\nI confirmed it was accurate by printing the generated SQL\nand doing a compare.\n\n[1] I84baff29505550f3f20069ad5817784d0d1aaea6\n\nChange-Id: Iefbb38f1f328b4d7a51cfec360c81369a977461e\n'}]",0,675302,b16b48ad6341dc90a2fae8be47ba5cc20df97fff,7,3,1,11564,,,0,"Correct SQL docstring on _get_usages_by_provider_trees

We updated the SQL when getting rid of null root provider
protections [1] but did not update the docstring. This does.

I confirmed it was accurate by printing the generated SQL
and doing a compare.

[1] I84baff29505550f3f20069ad5817784d0d1aaea6

Change-Id: Iefbb38f1f328b4d7a51cfec360c81369a977461e
",git fetch https://review.opendev.org/openstack/placement refs/changes/02/675302/1 && git format-patch -1 --stdout FETCH_HEAD,['placement/objects/research_context.py'],1,b16b48ad6341dc90a2fae8be47ba5cc20df97fff,cd/usages-bindparam, # AND resource_providers.root_provider_id IN($root_ids), # AND (resource_providers.root_provider_id IN($root_ids) # OR resource_providers.id IN($root_ids)),1,2
openstack%2Fzaqar~master~I9371cd91f1a14becd28fd226ce54d066012d1c20,openstack/zaqar,master,I9371cd91f1a14becd28fd226ce54d066012d1c20,Fix api-ref link,MERGED,2019-08-08 08:14:40.000000000,2019-08-09 03:40:29.000000000,2019-08-09 03:40:29.000000000,"[{'_account_id': 15054}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 08:14:40.000000000', 'files': ['doc/source/user/headers_queue_api_working.rst'], 'web_link': 'https://opendev.org/openstack/zaqar/commit/d535a96ee8adb9310a950526bfb9a4157dd6dbc2', 'message': 'Fix api-ref link\n\nThe name of the API is message, not messaging - fix the link.\n\nChange-Id: I9371cd91f1a14becd28fd226ce54d066012d1c20\n'}]",0,675267,d535a96ee8adb9310a950526bfb9a4157dd6dbc2,6,2,1,6547,,,0,"Fix api-ref link

The name of the API is message, not messaging - fix the link.

Change-Id: I9371cd91f1a14becd28fd226ce54d066012d1c20
",git fetch https://review.opendev.org/openstack/zaqar refs/changes/67/675267/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/user/headers_queue_api_working.rst'],1,d535a96ee8adb9310a950526bfb9a4157dd6dbc2,api-ref,Reference <https://docs.openstack.org/api-ref/message/>`_.,Reference <https://docs.openstack.org/api-ref/messaging/>`_.,1,1
openstack%2Fwatcher~master~I7de4f322d26e31c8d3eff5204f39d8dc4244b423,openstack/watcher,master,I7de4f322d26e31c8d3eff5204f39d8dc4244b423,update uniform_airflow strategy,ABANDONED,2019-08-07 06:07:21.000000000,2019-08-09 03:22:38.000000000,,"[{'_account_id': 22348}, {'_account_id': 28748}]","[{'number': 1, 'created': '2019-08-07 06:07:21.000000000', 'files': ['watcher/decision_engine/strategy/strategies/uniform_airflow.py', 'watcher/tests/decision_engine/strategy/strategies/test_uniform_airflow.py', 'watcher/tests/decision_engine/model/data/scenario_7_with_2_nodes.xml'], 'web_link': 'https://opendev.org/openstack/watcher/commit/dbe2b48b8c29d7abd145237452f5c0bbad0704cf', 'message': 'update uniform_airflow strategy\n\nFor Compute node, we can use the new property to calculate\nresource(VCPU, memory and disk).\n\nPartially Implements: blueprint improve-compute-data-model\n\nChange-Id: I7de4f322d26e31c8d3eff5204f39d8dc4244b423\n'}]",0,675031,dbe2b48b8c29d7abd145237452f5c0bbad0704cf,4,2,1,21692,,,0,"update uniform_airflow strategy

For Compute node, we can use the new property to calculate
resource(VCPU, memory and disk).

Partially Implements: blueprint improve-compute-data-model

Change-Id: I7de4f322d26e31c8d3eff5204f39d8dc4244b423
",git fetch https://review.opendev.org/openstack/watcher refs/changes/31/675031/1 && git format-patch -1 --stdout FETCH_HEAD,"['watcher/decision_engine/strategy/strategies/uniform_airflow.py', 'watcher/tests/decision_engine/strategy/strategies/test_uniform_airflow.py', 'watcher/tests/decision_engine/model/data/scenario_7_with_2_nodes.xml']",3,dbe2b48b8c29d7abd145237452f5c0bbad0704cf,bp/improve-compute-data-model," <ComputeNode uuid=""Node_0"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""50"" vcpus_used=""25"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""40"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""4"" memory_mb_reserved=""0"" memory_ratio=""1""> <ComputeNode uuid=""Node_1"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""50"" vcpus_used=""20"" vcpu_reserved=""0"" vcpu_ratio=""1"" disk=""250"" disk_gb_used=""40"" disk_gb_reserved=""0"" disk_ratio=""1"" disk_capacity=""250"" memory=""132"" memory_mb_used=""4"" memory_mb_reserved=""0"" memory_ratio=""1"">"," <ComputeNode uuid=""Node_0"" status=""enabled"" state=""up"" id=""0"" hostname=""hostname_0"" vcpus=""50"" disk=""250"" disk_capacity=""250"" memory=""132""> <ComputeNode uuid=""Node_1"" status=""enabled"" state=""up"" id=""1"" hostname=""hostname_1"" vcpus=""50"" disk=""250"" disk_capacity=""250"" memory=""132"">",5,27
openstack%2Frpm-packaging~master~Ib5f2829f88f846db8f4a54ee6f579c3e4bee5976,openstack/rpm-packaging,master,Ib5f2829f88f846db8f4a54ee6f579c3e4bee5976,Tempest: Update to 21.0.0,MERGED,2019-08-08 15:02:50.000000000,2019-08-09 03:15:05.000000000,2019-08-09 03:15:05.000000000,"[{'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 15:02:50.000000000', 'files': ['openstack/Tempest/Tempest.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/8f76ffbfad8c920e2270cadecc77f0027a5dc772', 'message': 'Tempest: Update to 21.0.0\n\nChange-Id: Ib5f2829f88f846db8f4a54ee6f579c3e4bee5976\n'}]",0,675374,8f76ffbfad8c920e2270cadecc77f0027a5dc772,9,5,1,6593,,,0,"Tempest: Update to 21.0.0

Change-Id: Ib5f2829f88f846db8f4a54ee6f579c3e4bee5976
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/74/675374/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/Tempest/Tempest.spec.j2'],1,8f76ffbfad8c920e2270cadecc77f0027a5dc772,,Version: 21.0.0,Version: 20.0.0,1,1
openstack%2Frpm-packaging~stable%2Fstein~Id79f1abab8a0dc71dbf2dcd665f3e093eb0a8ec8,openstack/rpm-packaging,stable/stein,Id79f1abab8a0dc71dbf2dcd665f3e093eb0a8ec8,Update Tempest version to 20.0.0,MERGED,2019-08-08 15:00:15.000000000,2019-08-09 03:14:56.000000000,2019-08-09 03:14:55.000000000,"[{'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28654}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-08 15:00:15.000000000', 'files': ['openstack/Tempest/Tempest.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/832253310372ec0f021c8d9e51e406117f5c360e', 'message': 'Update Tempest version to 20.0.0\n\nNOTE(dmllr): Fix build\n(cherry picked from commit 883b194411dca9279700cad2a136a0f8d57d32bf)\n\nChange-Id: Id79f1abab8a0dc71dbf2dcd665f3e093eb0a8ec8\n'}]",0,675370,832253310372ec0f021c8d9e51e406117f5c360e,10,7,1,6593,,,0,"Update Tempest version to 20.0.0

NOTE(dmllr): Fix build
(cherry picked from commit 883b194411dca9279700cad2a136a0f8d57d32bf)

Change-Id: Id79f1abab8a0dc71dbf2dcd665f3e093eb0a8ec8
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/70/675370/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/Tempest/Tempest.spec.j2'],1,832253310372ec0f021c8d9e51e406117f5c360e,,Version: 20.0.0PBR_VERSION=%version sphinx-build -b html doc/source doc/build/html,Version: 18.0.0%{__python2} setup.py build_sphinx,2,2
openstack%2Fmurano~master~I1efc0f37a23f991fd0a47b6fd8f91c7a75d873ec,openstack/murano,master,I1efc0f37a23f991fd0a47b6fd8f91c7a75d873ec,[train][goal] Define new 'murano-tempest-api-ipv6-only' job in gate,MERGED,2019-07-29 13:23:46.000000000,2019-08-09 03:13:51.000000000,2019-08-09 03:13:51.000000000,"[{'_account_id': 14107}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-29 13:23:46.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/murano/commit/c1e496190f222418801be69c24b99462489e4150', 'message': ""[train][goal] Define new 'murano-tempest-api-ipv6-only' job in gate\n\nAs part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],\nTempest has defined the base job 'devstack-tempest-ipv6' (adding\nin Depends-On patch) which will deploy services on IPv6.\n\nThis commit adds the new job 'murano-tempest-api-ipv6-only'\nrun on gate which is derived from 'devstack-tempest-ipv6'.\n\nVerification structure will be:\n- 'devstack-IPv6' deploy the service on IPv6\n- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address\n- 'murano-tempest-api-ipv6-only' will run the tests.\n\nStory: #2005477\nTask: #35907\n\nDepends-On: https://review.opendev.org/#/c/671231/\n\n[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html\n\nChange-Id: I1efc0f37a23f991fd0a47b6fd8f91c7a75d873ec\n""}]",0,673291,c1e496190f222418801be69c24b99462489e4150,10,2,1,8556,,,0,"[train][goal] Define new 'murano-tempest-api-ipv6-only' job in gate

As part of Train community goal 'Support IPv6-Only Deployments and Testing'[1],
Tempest has defined the base job 'devstack-tempest-ipv6' (adding
in Depends-On patch) which will deploy services on IPv6.

This commit adds the new job 'murano-tempest-api-ipv6-only'
run on gate which is derived from 'devstack-tempest-ipv6'.

Verification structure will be:
- 'devstack-IPv6' deploy the service on IPv6
- 'devstack-tempest-ipv6' run will verify the IPv6-only setting and listen address
- 'murano-tempest-api-ipv6-only' will run the tests.

Story: #2005477
Task: #35907

Depends-On: https://review.opendev.org/#/c/671231/

[1] https://governance.openstack.org/tc/goals/train/ipv6-support-and-testing.html

Change-Id: I1efc0f37a23f991fd0a47b6fd8f91c7a75d873ec
",git fetch https://review.opendev.org/openstack/murano refs/changes/91/673291/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,c1e496190f222418801be69c24b99462489e4150,ipv6-only-deployment-and-testing, - murano-tempest-api-ipv6-only - murano-tempest-api-ipv6-only required-projects: &base_required_projects vars: &base_vars name: murano-tempest-api-ipv6-only parent: devstack-tempest-ipv6 description: | Murano devstack tempest tests job for IPv6-only deployment timeout: 7800 irrelevant-files: *murano-irrelevant-files required-projects: *base_required_projects vars: *base_vars - job:, required-projects: vars:,14,2
openstack%2Ftripleo-puppet-elements~master~If431fce391f669c483c7fd1efa97bb3b640ed2a1,openstack/tripleo-puppet-elements,master,If431fce391f669c483c7fd1efa97bb3b640ed2a1,Blacklist sphinx 2.1.0 (autodoc bug),MERGED,2019-07-29 07:45:40.000000000,2019-08-09 02:39:53.000000000,2019-08-09 02:39:53.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 25402}]","[{'number': 1, 'created': '2019-07-29 07:45:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-puppet-elements/commit/ea92cbb8ed487f3fe782f7ce571b109741d53fe6', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\nDepend-On: https://review.opendev.org/#/c/663060/\n\nChange-Id: If431fce391f669c483c7fd1efa97bb3b640ed2a1\n'}, {'number': 2, 'created': '2019-07-30 08:48:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-puppet-elements/commit/3730b26102495a4959dad2d848d39ff84be77f46', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\n\nChange-Id: If431fce391f669c483c7fd1efa97bb3b640ed2a1\n'}, {'number': 3, 'created': '2019-07-30 09:04:25.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/tripleo-puppet-elements/commit/8cff8a664be050ceae439558275d870cfa003265', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\n\nChange-Id: If431fce391f669c483c7fd1efa97bb3b640ed2a1\n'}]",1,673224,8cff8a664be050ceae439558275d870cfa003265,12,5,3,27822,,,0,"Blacklist sphinx 2.1.0 (autodoc bug)

See https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details

Change-Id: If431fce391f669c483c7fd1efa97bb3b640ed2a1
",git fetch https://review.opendev.org/openstack/tripleo-puppet-elements refs/changes/24/673224/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,ea92cbb8ed487f3fe782f7ce571b109741d53fe6,sphinx,"sphinx!=1.6.6,!=1.6.7,>=1.6.2,<2.0.0;python_version=='2.7' # BSD sphinx!=1.6.6,!=1.6.7,!=2.1.0,>=1.6.2;python_version>='3.4' # BSD",sphinx>=1.6.2 # BSD,2,1
openstack%2Ftripleo-heat-templates~stable%2Frocky~I6f71ce62b1c5f3de175d7a50ee7229d3047a379a,openstack/tripleo-heat-templates,stable/rocky,I6f71ce62b1c5f3de175d7a50ee7229d3047a379a,neutron-api: remove /usr/share/neutron mount,MERGED,2019-08-07 17:35:58.000000000,2019-08-09 02:39:52.000000000,2019-08-09 02:39:51.000000000,"[{'_account_id': 3153}, {'_account_id': 9914}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-07 17:35:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ab11ed576b5415bc09faa474bf34f8e5f128cdec', 'message': ""neutron-api: remove /usr/share/neutron mount\n\nWe don't need to mount /usr/share/neutron, the directory is provided in\nopenstack-neutron rpm, so we don't need to manage this directory. It\nshould be in all neutron containers, including the neutron_db_sync.\n\nChange-Id: I6f71ce62b1c5f3de175d7a50ee7229d3047a379a\n(cherry picked from commit 191841339bf67b73172250bfcf7d4eed4ffa809b)\n""}, {'number': 2, 'created': '2019-08-08 08:15:38.000000000', 'files': ['docker/services/neutron-api.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/55c912f86bc19d5fb6350c8f8fb84bb339af1c5b', 'message': ""neutron-api: remove /usr/share/neutron mount\n\nWe don't need to mount /usr/share/neutron, the directory is provided in\nopenstack-neutron rpm, so we don't need to manage this directory. It\nshould be in all neutron containers, including the neutron_db_sync.\n\nChange-Id: I6f71ce62b1c5f3de175d7a50ee7229d3047a379a\n(cherry picked from commit 191841339bf67b73172250bfcf7d4eed4ffa809b)\n""}]",0,675162,55c912f86bc19d5fb6350c8f8fb84bb339af1c5b,14,5,2,14250,,,0,"neutron-api: remove /usr/share/neutron mount

We don't need to mount /usr/share/neutron, the directory is provided in
openstack-neutron rpm, so we don't need to manage this directory. It
should be in all neutron containers, including the neutron_db_sync.

Change-Id: I6f71ce62b1c5f3de175d7a50ee7229d3047a379a
(cherry picked from commit 191841339bf67b73172250bfcf7d4eed4ffa809b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/62/675162/2 && git format-patch -1 --stdout FETCH_HEAD,['docker/services/neutron-api.yaml'],1,ab11ed576b5415bc09faa474bf34f8e5f128cdec,bug/1830734,, - /var/lib/config-data/neutron/usr/share/neutron:/usr/share/neutron:ro,0,1
openstack%2Ftripleo-heat-templates~stable%2Fstein~Id4bba3df475582fa3884e38d17ca66913da83657,openstack/tripleo-heat-templates,stable/stein,Id4bba3df475582fa3884e38d17ca66913da83657,Redis HA TLS: do not use the pacemaker image tag for redis_tls_proxy,MERGED,2019-08-08 15:59:45.000000000,2019-08-09 02:33:45.000000000,2019-08-09 02:33:45.000000000,"[{'_account_id': 3153}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-08 15:59:45.000000000', 'files': ['deployment/database/redis-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/837c54259816d14fc0ff7bd8b307d546ab440d2c', 'message': ""Redis HA TLS: do not use the pacemaker image tag for redis_tls_proxy\n\nWhen running a 3-nodes Redis cluster with TLS, we use an intermediate\ncontainer redis_tls_proxy for all the encrypted communication between\nthe redis nodes.\n\nThe intermediate container is managed by paunch, so it shouldn't use\nthe container image tagged :pcmklatest. This tag is a intermediate\ntag only meant to be consumed by pacemaker to implement container\nupdate without service disruption. When used in paunch, it causes\nthe deployment to fail at step 2.\n\nConfigure redis_tls_proxy to use heat parameter DockerRedisImage\ninstead. That is the image meant to be consumed by paunch containers.\n\nThis has been manually cherry-picked because the name of the heat\nparameter changed between Stein and Master.\n\nCloses-Bug: 1839305\n\nChange-Id: Id4bba3df475582fa3884e38d17ca66913da83657\n(cherry picked from commit e29fa2361766d13c3deec7879ed824f8bfd21ea8)\n""}]",0,675394,837c54259816d14fc0ff7bd8b307d546ab440d2c,9,5,1,20778,,,0,"Redis HA TLS: do not use the pacemaker image tag for redis_tls_proxy

When running a 3-nodes Redis cluster with TLS, we use an intermediate
container redis_tls_proxy for all the encrypted communication between
the redis nodes.

The intermediate container is managed by paunch, so it shouldn't use
the container image tagged :pcmklatest. This tag is a intermediate
tag only meant to be consumed by pacemaker to implement container
update without service disruption. When used in paunch, it causes
the deployment to fail at step 2.

Configure redis_tls_proxy to use heat parameter DockerRedisImage
instead. That is the image meant to be consumed by paunch containers.

This has been manually cherry-picked because the name of the heat
parameter changed between Stein and Master.

Closes-Bug: 1839305

Change-Id: Id4bba3df475582fa3884e38d17ca66913da83657
(cherry picked from commit e29fa2361766d13c3deec7879ed824f8bfd21ea8)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/94/675394/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/database/redis-pacemaker-puppet.yaml'],1,837c54259816d14fc0ff7bd8b307d546ab440d2c,bug/1839305-stable/stein, image: {get_param: DockerRedisImage}, image: *redis_image_pcmklatest,1,1
openstack%2Frequirements~master~I8b2834ab258dc8ccb0c7c3c53e6a08dac950c37a,openstack/requirements,master,I8b2834ab258dc8ccb0c7c3c53e6a08dac950c37a,Updated from generate-constraints,ABANDONED,2019-08-08 06:16:29.000000000,2019-08-09 02:17:26.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-08 06:16:29.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/b93c335be4dad6d30a75a84eb4af1f34aea1ff96', 'message': 'Updated from generate-constraints\n\nChange-Id: I8b2834ab258dc8ccb0c7c3c53e6a08dac950c37a\n'}]",0,675252,b93c335be4dad6d30a75a84eb4af1f34aea1ff96,3,1,1,11131,,,0,"Updated from generate-constraints

Change-Id: I8b2834ab258dc8ccb0c7c3c53e6a08dac950c37a
",git fetch https://review.opendev.org/openstack/requirements refs/changes/52/675252/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,b93c335be4dad6d30a75a84eb4af1f34aea1ff96,openstack/requirements/constraints,lxml===4.4.0pytest===4.6.5;python_version=='2.7'pysnmp===4.4.10Mako===1.1.0ruamel.yaml.clib===0.1.2sphinxcontrib.datatemplates===0.5.0arrow===0.14.4tornado===5.1.1;python_version=='2.7'PyYAML===5.1.2python-3parclient===4.2.10libvirt-python===5.6.0daiquiri===1.6.0autobahn===19.8.1gabbi===1.49.0boto3===1.9.203stestr===2.5.0infinisdk===141.1.0 packaging===19.1protobuf===3.9.1kubernetes===10.0.0botocore===1.12.203pyasn1===0.4.6Django===1.11.23;python_version=='2.7'redis===3.3.6pymemcache===2.2.2pyasn1-modules===0.2.6storops===1.2.0jsonschema===3.0.2oauthlib===3.1.0pytz===2019.2,lxml===4.3.4pytest===4.6.4;python_version=='2.7'pysnmp===4.4.9Mako===1.0.14ruamel.yaml.clib===0.1.0sphinxcontrib.datatemplates===0.4.0arrow===0.14.3tornado===4.5.3;python_version=='2.7'PyYAML===5.1.1python-3parclient===4.2.9libvirt-python===5.5.0daiquiri===1.5.0autobahn===19.7.2gabbi===1.48.0boto3===1.9.191stestr===2.4.0infinisdk===127.2.1 packaging===19.0protobuf===3.9.0kubernetes===9.0.0botocore===1.12.191pyasn1===0.4.5Django===1.11.22;python_version=='2.7'redis===3.3.2pymemcache===2.1.1pyasn1-modules===0.2.5storops===1.1.0jsonschema===2.6.0oauthlib===3.0.2pytz===2019.1,30,30
openstack%2Ftripleo-heat-templates~stable%2Fstein~I9e52ece33a131fbcec64d96d3c9c273f98ccb284,openstack/tripleo-heat-templates,stable/stein,I9e52ece33a131fbcec64d96d3c9c273f98ccb284,Fix bogus reference to conditional in octavia upgrade tasks,MERGED,2019-07-30 08:14:49.000000000,2019-08-09 02:07:37.000000000,2019-08-09 02:07:37.000000000,"[{'_account_id': 3153}, {'_account_id': 6469}, {'_account_id': 6681}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-07-30 08:14:49.000000000', 'files': ['deployment/octavia/octavia-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/9f239f8c801b4a9aaa157b980a27f0bacc2ddea3', 'message': 'Fix bogus reference to conditional in octavia upgrade tasks\n\nAdds a fact to take the value of the EnableInternalTLS heat parameter so\nit can be used in ansible upgrade tasks.\n\nChange-Id: I9e52ece33a131fbcec64d96d3c9c273f98ccb284\nCloses-Bug: #1836729\n(cherry picked from commit 430cb559208523e7c7f561c76c0703285f47ab7a)\n'}]",0,673437,9f239f8c801b4a9aaa157b980a27f0bacc2ddea3,17,6,1,6469,,,0,"Fix bogus reference to conditional in octavia upgrade tasks

Adds a fact to take the value of the EnableInternalTLS heat parameter so
it can be used in ansible upgrade tasks.

Change-Id: I9e52ece33a131fbcec64d96d3c9c273f98ccb284
Closes-Bug: #1836729
(cherry picked from commit 430cb559208523e7c7f561c76c0703285f47ab7a)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/37/673437/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/octavia/octavia-api-container-puppet.yaml'],1,9f239f8c801b4a9aaa157b980a27f0bacc2ddea3,bug/1836729, - name: Set internal tls variable set_fact: internal_tls_enabled: {get_param: EnableInternalTLS} - name: Set internal tls variable set_fact: internal_tls_enabled: {get_param: EnableInternalTLS} - name: Set internal tls variable set_fact: internal_tls_enabled: {get_param: EnableInternalTLS},,9,0
openstack%2Ftripleo-validations~master~Ic895c81f11b61e7310b7ca17fad4693c4eea0418,openstack/tripleo-validations,master,Ic895c81f11b61e7310b7ca17fad4693c4eea0418,Use custom Ceph cluster name in validations,MERGED,2019-08-06 11:12:06.000000000,2019-08-09 02:07:28.000000000,2019-08-09 02:07:28.000000000,"[{'_account_id': 6796}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 11491}, {'_account_id': 13861}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 25402}]","[{'number': 1, 'created': '2019-08-06 11:12:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/c405e4888ad28cdc0851194b66bdf3328ed6aba0', 'message': 'Use custom Ceph cluster name in validations\n\nAlso adds scenario004 as check and gate job for changes to the\nCeph roles.\n\nChange-Id: Ic895c81f11b61e7310b7ca17fad4693c4eea0418\nCloses-Bug: 1838556\n'}, {'number': 2, 'created': '2019-08-06 12:13:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/3a61d5c9be056671dc041c62106982f8a5099f9c', 'message': 'Use custom Ceph cluster name in validations\n\nAlso adds scenario004 as check and gate job for changes to the\nCeph roles.\n\nChange-Id: Ic895c81f11b61e7310b7ca17fad4693c4eea0418\nCloses-Bug: 1838556\n'}, {'number': 3, 'created': '2019-08-06 12:17:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/ea109d9c321c89dd418dc8ee136db8a72c16e791', 'message': 'Use custom Ceph cluster name in validations\n\nAlso adds scenario004 as check and gate job for changes to the\nCeph roles.\n\nChange-Id: Ic895c81f11b61e7310b7ca17fad4693c4eea0418\nCloses-Bug: 1838556\n'}, {'number': 4, 'created': '2019-08-06 13:54:47.000000000', 'files': ['roles/ceph/tasks/ceph-health.yaml', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/dd1c4dd16a7621ca93db5f74be4bdcaa8d78ad8f', 'message': 'Use custom Ceph cluster name in validations\n\nAlso adds scenario004 as check and gate job for changes to the\nCeph roles.\n\nChange-Id: Ic895c81f11b61e7310b7ca17fad4693c4eea0418\nCloses-Bug: 1838556\n'}]",5,674778,dd1c4dd16a7621ca93db5f74be4bdcaa8d78ad8f,27,9,4,6796,,,0,"Use custom Ceph cluster name in validations

Also adds scenario004 as check and gate job for changes to the
Ceph roles.

Change-Id: Ic895c81f11b61e7310b7ca17fad4693c4eea0418
Closes-Bug: 1838556
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/78/674778/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/ceph/tasks/ceph-health.yaml', 'zuul.d/layout.yaml']",2,c405e4888ad28cdc0851194b66bdf3328ed6aba0,, - tripleo-ci-centos-7-scenario004-multinode-oooq-container: files: - ^roles/ceph.*$ - tripleo-ci-centos-7-scenario004-multinode-oooq-container: files: - ^roles/ceph.*$,,15,2
openstack%2Ftripleo-heat-templates~stable%2Fqueens~I5e73660e23fef15d1cae4c89d8b45b2456b0a110,openstack/tripleo-heat-templates,stable/queens,I5e73660e23fef15d1cae4c89d8b45b2456b0a110,Enable rabbitmq_management plugin,MERGED,2019-08-08 09:51:45.000000000,2019-08-09 01:34:19.000000000,2019-08-09 01:34:19.000000000,"[{'_account_id': 3153}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 09:51:45.000000000', 'files': ['releasenotes/notes/rabbitmq-enable-management-plugin-94b27747e4f5e685.yaml', 'puppet/services/rabbitmq.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/23ad857ae1d1c6b8107b37fa225b7d51eb266659', 'message': 'Enable rabbitmq_management plugin\n\nEnable the RabbitMQ managment plugin. RabbitMQ managment\nwill listen on localhost (127.0.0.1) only.\n\nNOTE: This depend on this upstream change:\n  https://github.com/voxpupuli/puppet-rabbitmq/pull/777\n\nAlso to optimize for performance:\n - Disables message rates in the management plugin.\n - Raises the collect_statistics_interval from 5000ms to\n   30000ms.\n\nNB: Cherry-pick was not clean so I tested this manually on queens\nand got the expected result:\n~]# pcs status |grep -e \'rabbitmq.*Started\'\n  rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started controller-0\n  rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started controller-1\n  rabbitmq-bundle-2    (ocf::heartbeat:rabbitmq-cluster):      Started controller-2\n\n~]# curl -sS  -u guest:$(hiera -c /etc/puppet/hiera.yaml rabbitmq::default_pass) http://127.0.0.1:15672/api/queues/ 2> /dev/null  |jq . |head -n5\n[\n  {\n    ""memory"": 10936,\n    ""idle_since"": ""2019-08-08 8:49:23"",\n    ""consumer_utilisation"": null,\n\nRelated-Bug: #1815675\nChange-Id: I5e73660e23fef15d1cae4c89d8b45b2456b0a110\n(cherry-picked from commit d6727aff73276446f34dde4de724984bc381fa3f\n'}]",0,675283,23ad857ae1d1c6b8107b37fa225b7d51eb266659,11,4,1,20172,,,0,"Enable rabbitmq_management plugin

Enable the RabbitMQ managment plugin. RabbitMQ managment
will listen on localhost (127.0.0.1) only.

NOTE: This depend on this upstream change:
  https://github.com/voxpupuli/puppet-rabbitmq/pull/777

Also to optimize for performance:
 - Disables message rates in the management plugin.
 - Raises the collect_statistics_interval from 5000ms to
   30000ms.

NB: Cherry-pick was not clean so I tested this manually on queens
and got the expected result:
~]# pcs status |grep -e 'rabbitmq.*Started'
  rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started controller-0
  rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started controller-1
  rabbitmq-bundle-2    (ocf::heartbeat:rabbitmq-cluster):      Started controller-2

~]# curl -sS  -u guest:$(hiera -c /etc/puppet/hiera.yaml rabbitmq::default_pass) http://127.0.0.1:15672/api/queues/ 2> /dev/null  |jq . |head -n5
[
  {
    ""memory"": 10936,
    ""idle_since"": ""2019-08-08 8:49:23"",
    ""consumer_utilisation"": null,

Related-Bug: #1815675
Change-Id: I5e73660e23fef15d1cae4c89d8b45b2456b0a110
(cherry-picked from commit d6727aff73276446f34dde4de724984bc381fa3f
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/83/675283/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/rabbitmq-enable-management-plugin-94b27747e4f5e685.yaml', 'puppet/services/rabbitmq.yaml']",2,23ad857ae1d1c6b8107b37fa225b7d51eb266659,mgmt_plugin-stable/queens, rabbitmq::collect_statistics_interval: 30000 rabbitmq::management_enable: true rabbitmq::use_config_file_for_plugins: true rabbitmq::management_ip_address: 127.0.0.1 rabbitmq::config_management_variables: rates_mode: none,,12,0
openstack%2Fansible-role-collect-logs~master~I2a805ff896f1e75e17a5c9405054dce37ee3a50f,openstack/ansible-role-collect-logs,master,I2a805ff896f1e75e17a5c9405054dce37ee3a50f,Fix warnings of unquoted strings in influxdb module,MERGED,2019-08-08 14:13:29.000000000,2019-08-09 01:34:17.000000000,2019-08-09 01:34:16.000000000,"[{'_account_id': 9592}, {'_account_id': 10969}, {'_account_id': 18846}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 14:13:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-role-collect-logs/commit/e560b53a372443dc1ad7bd58836765ee0fb1b9a2', 'message': 'Fix warnings of unquoted strings in influxdb module\n\nIt disables ansible 2.8 warnings about strings and variables.\nChange-Id: I2a805ff896f1e75e17a5c9405054dce37ee3a50f\n'}, {'number': 2, 'created': '2019-08-08 16:31:28.000000000', 'files': ['library/ara_influxdb.py', 'tasks/ara_influxdb.yml', 'tasks/ara_graphite.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-collect-logs/commit/9dc533daf21a8d16ca56c76513c4bd5f2161357d', 'message': 'Fix warnings of unquoted strings in influxdb module\n\nIt disables ansible 2.8 warnings about strings and variables.\nChange-Id: I2a805ff896f1e75e17a5c9405054dce37ee3a50f\n'}]",0,675344,9dc533daf21a8d16ca56c76513c4bd5f2161357d,10,4,2,10969,,,0,"Fix warnings of unquoted strings in influxdb module

It disables ansible 2.8 warnings about strings and variables.
Change-Id: I2a805ff896f1e75e17a5c9405054dce37ee3a50f
",git fetch https://review.opendev.org/openstack/ansible-role-collect-logs refs/changes/44/675344/2 && git format-patch -1 --stdout FETCH_HEAD,"['library/ara_influxdb.py', 'tasks/ara_influxdb.yml', 'tasks/ara_graphite.yml']",3,e560b53a372443dc1ad7bd58836765ee0fb1b9a2,nowarn," ara_data: ""{{ ara_data.stdout|to_json }}"""," ara_data: ""{{ ara_data.stdout }}""",5,4
openstack%2Fzun~master~I9197c771e426f7077e55b0b6f718b915408c941a,openstack/zun,master,I9197c771e426f7077e55b0b6f718b915408c941a,Fix format issue on private registry doc,MERGED,2019-08-03 16:12:36.000000000,2019-08-09 01:33:52.000000000,2019-08-09 01:33:52.000000000,"[{'_account_id': 22348}, {'_account_id': 23365}]","[{'number': 1, 'created': '2019-08-03 16:12:36.000000000', 'files': ['doc/source/admin/private_registry.rst'], 'web_link': 'https://opendev.org/openstack/zun/commit/935639c106078bdde3064c54898e6bb45a23d683', 'message': 'Fix format issue on private registry doc\n\nChange-Id: I9197c771e426f7077e55b0b6f718b915408c941a\n'}]",0,674464,935639c106078bdde3064c54898e6bb45a23d683,6,2,1,11536,,,0,"Fix format issue on private registry doc

Change-Id: I9197c771e426f7077e55b0b6f718b915408c941a
",git fetch https://review.opendev.org/openstack/zun refs/changes/64/674464/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/private_registry.rst'],1,935639c106078bdde3064c54898e6bb45a23d683,,deploy it as a Zun container: .. code-block:: consoleself-signed certificates: .. code-block:: consoleCopy the certificates to registry: .. code-block:: consoleConfigure docker daemon to accept the certificates: .. code-block:: consoleStart the registry: .. code-block:: consoleVerify the registry is working: .. code-block:: console,deploy it as a Zun container::self-signed certificates::Copy the certificates to registry::Configure docker daemon to accept the certificates::Start the registry::Verify the registry is working::,18,6
openstack%2Fpython-manilaclient~master~If81fef04885a43e01e53de7980ebc0c651540934,openstack/python-manilaclient,master,If81fef04885a43e01e53de7980ebc0c651540934,wip: Add update share type functional tests,ABANDONED,2019-07-17 09:40:38.000000000,2019-08-09 00:52:56.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-07-17 09:40:38.000000000', 'files': ['manilaclient/tests/functional/test_share_types.py', 'manilaclient/tests/functional/client.py', 'manilaclient/tests/functional/base.py'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/4ee5a525ad925935d4e9414b16e69aad9287edac', 'message': 'wip: Add update share type functional tests\n\nDepends-on: https://review.opendev.org/#/c/669651/\nDepends-on: https://review.opendev.org/#/c/670750/\nPart-of blueprint update-share-type-name-or-description\n\nChange-Id: If81fef04885a43e01e53de7980ebc0c651540934\n'}]",0,671226,4ee5a525ad925935d4e9414b16e69aad9287edac,3,1,1,30407,,,0,"wip: Add update share type functional tests

Depends-on: https://review.opendev.org/#/c/669651/
Depends-on: https://review.opendev.org/#/c/670750/
Part-of blueprint update-share-type-name-or-description

Change-Id: If81fef04885a43e01e53de7980ebc0c651540934
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/26/671226/1 && git format-patch -1 --stdout FETCH_HEAD,"['manilaclient/tests/functional/test_share_types.py', 'manilaclient/tests/functional/client.py', 'manilaclient/tests/functional/base.py']",3,4ee5a525ad925935d4e9414b16e69aad9287edac,," def update_share_type(cls, share_type_id, name=None, is_public=None, client=None, cleanup_in_class=True, microversion=None, description=None): if client is None: client = cls.get_admin_client() data = { ""share_type_id"": share_type_id, ""microversion"": microversion, } if name: data[""name""] = name if description: data[""description""] = description if is_public is not None: data[""is_public""] = is_public share_type = client.update_share_type(**data) resource = { ""type"": ""share_type"", ""id"": share_type[""ID""], ""client"": client, ""microversion"": microversion, } if cleanup_in_class: cls.class_resources.insert(0, resource) else: cls.method_resources.insert(0, resource) return share_type @classmethod",,91,5
openstack%2Fmanila-specs~master~Ia0a8394d20615062e91eed918589ab70a4388c39,openstack/manila-specs,master,Ia0a8394d20615062e91eed918589ab70a4388c39,remove error code,ABANDONED,2019-08-08 07:37:17.000000000,2019-08-09 00:42:01.000000000,,"[{'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 26458}]","[{'number': 1, 'created': '2019-08-08 07:37:17.000000000', 'files': ['specs/train/update-share-type-name-or-description.rst'], 'web_link': 'https://opendev.org/openstack/manila-specs/commit/b3e38ed69feb65fc0eb2f238cfe0f45c5b28561f', 'message': ""remove error code\n\nthe error code 409 isn't valid for share_type_update API.\n\nChange-Id: Ia0a8394d20615062e91eed918589ab70a4388c39\n""}]",0,675259,b3e38ed69feb65fc0eb2f238cfe0f45c5b28561f,4,3,1,30407,,,0,"remove error code

the error code 409 isn't valid for share_type_update API.

Change-Id: Ia0a8394d20615062e91eed918589ab70a4388c39
",git fetch https://review.opendev.org/openstack/manila-specs refs/changes/59/675259/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/train/update-share-type-name-or-description.rst'],1,b3e38ed69feb65fc0eb2f238cfe0f45c5b28561f,, 404(Not Found)," 404(Not Found), 409(Conflict)",1,1
openstack%2Frequirements~master~I4bec7591cd7b5e9ca4ba84517554081b057acfef,openstack/requirements,master,I4bec7591cd7b5e9ca4ba84517554081b057acfef,update constraint for python-designateclient to new release 2.12.0,MERGED,2019-08-08 16:19:17.000000000,2019-08-09 00:31:43.000000000,2019-08-09 00:31:43.000000000,"[{'_account_id': 6593}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 16:19:17.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/553c279f8e0ce643315564f89b169f5f2b82e09e', 'message': 'update constraint for python-designateclient to new release 2.12.0\n\nChange-Id: I4bec7591cd7b5e9ca4ba84517554081b057acfef\nmeta:version: 2.12.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: yes\nmeta:release:Author: Dirk Mueller <dirk@dmllr.de>\nmeta:release:Commit: Dirk Mueller <dirk@dmllr.de>\nmeta:release:Change-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa\nmeta:release:Code-Review+1: Graham Hayes <gr@ham.ie>\nmeta:release:Code-Review+1: zhurong <aaronzhu1121@gmail.com>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n'}]",0,675401,553c279f8e0ce643315564f89b169f5f2b82e09e,7,3,1,11131,,,0,"update constraint for python-designateclient to new release 2.12.0

Change-Id: I4bec7591cd7b5e9ca4ba84517554081b057acfef
meta:version: 2.12.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: yes
meta:first: yes
meta:release:Author: Dirk Mueller <dirk@dmllr.de>
meta:release:Commit: Dirk Mueller <dirk@dmllr.de>
meta:release:Change-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa
meta:release:Code-Review+1: Graham Hayes <gr@ham.ie>
meta:release:Code-Review+1: zhurong <aaronzhu1121@gmail.com>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/01/675401/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,553c279f8e0ce643315564f89b169f5f2b82e09e,new-release,python-designateclient===2.12.0,python-designateclient===2.11.0,1,1
openstack%2Frequirements~master~I009b90fdf7bcf9f0c85f150d06e797e738653161,openstack/requirements,master,I009b90fdf7bcf9f0c85f150d06e797e738653161,update constraint for python-solumclient to new release 2.9.0,MERGED,2019-08-08 16:16:33.000000000,2019-08-09 00:14:01.000000000,2019-08-09 00:14:01.000000000,"[{'_account_id': 6593}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 16:16:33.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/776fe11e826a897e29ebafd9d304f8b2a0eae72d', 'message': 'update constraint for python-solumclient to new release 2.9.0\n\nChange-Id: I009b90fdf7bcf9f0c85f150d06e797e738653161\nmeta:version: 2.9.0\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: no\nmeta:first: yes\nmeta:release:Author: Dirk Mueller <dirk@dmllr.de>\nmeta:release:Commit: Dirk Mueller <dirk@dmllr.de>\nmeta:release:Change-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa\nmeta:release:Code-Review+1: Graham Hayes <gr@ham.ie>\nmeta:release:Code-Review+1: zhurong <aaronzhu1121@gmail.com>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n'}]",0,675400,776fe11e826a897e29ebafd9d304f8b2a0eae72d,7,3,1,11131,,,0,"update constraint for python-solumclient to new release 2.9.0

Change-Id: I009b90fdf7bcf9f0c85f150d06e797e738653161
meta:version: 2.9.0
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: no
meta:first: yes
meta:release:Author: Dirk Mueller <dirk@dmllr.de>
meta:release:Commit: Dirk Mueller <dirk@dmllr.de>
meta:release:Change-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa
meta:release:Code-Review+1: Graham Hayes <gr@ham.ie>
meta:release:Code-Review+1: zhurong <aaronzhu1121@gmail.com>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/00/675400/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,776fe11e826a897e29ebafd9d304f8b2a0eae72d,new-release,python-solumclient===2.9.0,python-solumclient===2.8.0,1,1
openstack%2Fnova~master~Ia69fabce8e7fd7de101e291fe133c6f5f5f7056a,openstack/nova,master,Ia69fabce8e7fd7de101e291fe133c6f5f5f7056a,Match ComputeNode.uuid to ironic node uuid in RT,MERGED,2018-05-31 17:35:37.000000000,2019-08-08 23:25:48.000000000,2018-06-29 18:09:59.000000000,"[{'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 10239}, {'_account_id': 10385}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 26580}, {'_account_id': 26936}, {'_account_id': 27386}]","[{'number': 1, 'created': '2018-05-31 17:35:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ed7c63fa0f1e94c91137084ed3de0c20799af64e', 'message': ""Match ComputeNode.uuid to ironic node uuid in RT\n\nWhen the ResourceTracker creates a new ComputeNode\nrecord, when using the Ironic driver, we can use\nthe ironic node uuid to set the compute node uuid\nwhich will then also get reflected as the compute\nnode resource provider uuid in Placement, which\nwill be a nice link between the three resources\nwhich should be 1:1:1 with each other. This isn't\nmandatory nor does it fix any bugs, but it will\nbe nice for debugging.\n\nChange-Id: Ia69fabce8e7fd7de101e291fe133c6f5f5f7056a\nRelated-Bug: #1771806\n""}, {'number': 2, 'created': '2018-05-31 20:26:21.000000000', 'files': ['nova/virt/ironic/driver.py', 'nova/tests/unit/virt/ironic/test_driver.py', 'nova/tests/unit/objects/test_compute_node.py', 'nova/objects/compute_node.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/9f28727eb75e05e07bad51b6eecce667d09dfb65', 'message': ""Match ComputeNode.uuid to ironic node uuid in RT\n\nWhen the ResourceTracker creates a new ComputeNode\nrecord, when using the Ironic driver, we can use\nthe ironic node uuid to set the compute node uuid\nwhich will then also get reflected as the compute\nnode resource provider uuid in Placement, which\nwill be a nice link between the three resources\nwhich should be 1:1:1 with each other. This isn't\nmandatory nor does it fix any bugs, but it will\nbe nice for debugging.\n\nChange-Id: Ia69fabce8e7fd7de101e291fe133c6f5f5f7056a\nRelated-Bug: #1771806\n""}]",0,571535,9f28727eb75e05e07bad51b6eecce667d09dfb65,39,18,2,6873,,,0,"Match ComputeNode.uuid to ironic node uuid in RT

When the ResourceTracker creates a new ComputeNode
record, when using the Ironic driver, we can use
the ironic node uuid to set the compute node uuid
which will then also get reflected as the compute
node resource provider uuid in Placement, which
will be a nice link between the three resources
which should be 1:1:1 with each other. This isn't
mandatory nor does it fix any bugs, but it will
be nice for debugging.

Change-Id: Ia69fabce8e7fd7de101e291fe133c6f5f5f7056a
Related-Bug: #1771806
",git fetch https://review.opendev.org/openstack/nova refs/changes/35/571535/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/ironic/driver.py', 'nova/tests/unit/virt/ironic/test_driver.py', 'nova/objects/compute_node.py', 'nova/tests/unit/objects/test_compute_node.py']",4,ed7c63fa0f1e94c91137084ed3de0c20799af64e,bug/1771806, # Emulate the ironic driver which adds a uuid field. resources['uuid'] = uuidsentinel.node_uuid expected.uuid = uuidsentinel.node_uuid,,7,3
openstack%2Fswift~master~I4a32239eec37eed4085fbc2a283def4b69c816ac,openstack/swift,master,I4a32239eec37eed4085fbc2a283def4b69c816ac,Bring our IPv6 setup more in line with devstack's,MERGED,2019-08-08 16:02:40.000000000,2019-08-08 23:13:34.000000000,2019-08-08 23:10:00.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 16:02:40.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/swift/commit/e095bf3dabad005d48985f06f6bfe14683621a59', 'message': ""Bring our IPv6 setup more in line with devstack's\n\nChange-Id: I4a32239eec37eed4085fbc2a283def4b69c816ac\n""}]",0,675395,e095bf3dabad005d48985f06f6bfe14683621a59,7,2,1,15343,,,0,"Bring our IPv6 setup more in line with devstack's

Change-Id: I4a32239eec37eed4085fbc2a283def4b69c816ac
",git fetch https://review.opendev.org/openstack/swift refs/changes/95/675395/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,e095bf3dabad005d48985f06f6bfe14683621a59,IPv6-support-and-testing," SERVICE_HOST: """"", HOST_IPV6: '[::1]' SERVICE_HOST: '[::1]',1,2
openstack%2Ftripleo-common~master~I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d,openstack/tripleo-common,master,I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d,Add shim for package module,ABANDONED,2019-05-31 15:04:43.000000000,2019-08-08 22:50:34.000000000,,"[{'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-05-31 15:04:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/b94fd6beb9fe55ca7323da3b2f6fbc76d4cc17eb', 'message': '[WIP] Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the EnablePackageInstall option as a variable defined\nat runtime. If this option is unset the normal package module\nwill be used.\n\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 2, 'created': '2019-05-31 19:58:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/a8c96e6f524b755789d2346e8bfb6d4892a804b5', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the EnablePackageInstall option as a variable defined\nat runtime. If this option is unset the normal package module\nwill be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 3, 'created': '2019-05-31 21:46:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e8bdc4c846b52290c2b2562843f47c0fa05fc83c', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the EnablePackageInstall option as a variable defined\nat runtime. If this option is unset the normal package module\nwill be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 4, 'created': '2019-05-31 21:48:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/be99becaf29aedc4547cfb15bd4b0dd82ffb55e9', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the EnablePackageInstall option as a variable defined\nat runtime. If this option is unset the normal package module\nwill be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 5, 'created': '2019-06-01 04:36:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ef65cc70899fedb1bfd05d04ae64608478e1887b', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the EnablePackageInstall option as a variable defined\nat runtime. If this option is unset the normal package module\nwill be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 6, 'created': '2019-06-07 20:27:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/922f079a84b4c75b31234b84fd0fc4ac3e206997', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the tripleo_enable_package_install option as a variable\ndefined in inventory or at runtime. If this option is unset the\nnormal package module will be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 7, 'created': '2019-06-10 12:39:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/f37dd5c440bd12c669063ef405c8e277ec41d84e', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the tripleo_enable_package_install option as a variable\ndefined in inventory or at runtime. If this option is unset the\nnormal package module will be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 8, 'created': '2019-06-19 21:00:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/769f86d584e40ae7acce17307bfd6b850b2485d7', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the tripleo_enable_package_install option as a variable\ndefined in inventory or at runtime. If this option is unset the\nnormal package module will be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 9, 'created': '2019-06-26 23:03:30.000000000', 'files': ['releasenotes/notes/tripleo-package-module-4dd1b8e8c320483e.yaml', 'ansible_plugins/action/package.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ebfa882a29699683994cf5dd41ec5583de78a7c0', 'message': 'Add shim for package module\n\nThis change adds an action plugin shim for the package module\nso that we can port our existing puppet logic into ansible\nby using the tripleo_enable_package_install option as a variable\ndefined in inventory or at runtime. If this option is unset the\nnormal package module will be used.\n\nCloses-Bug: #1831246\nChange-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}]",2,662496,ebfa882a29699683994cf5dd41ec5583de78a7c0,39,6,9,7353,,,0,"Add shim for package module

This change adds an action plugin shim for the package module
so that we can port our existing puppet logic into ansible
by using the tripleo_enable_package_install option as a variable
defined in inventory or at runtime. If this option is unset the
normal package module will be used.

Closes-Bug: #1831246
Change-Id: I9fc504944e2067d9f87a5ad6ca0fe19097d1dd2d
Signed-off-by: Kevin Carter <kecarter@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/96/662496/5 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_common/actions/ansible.py', 'ansible_plugins/action/package.py']",2,b94fd6beb9fe55ca7323da3b2f6fbc76d4cc17eb,bug/1831246,"# Copyright 2019 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from ansible.plugins.action import ActionBase from ansible.plugins.action import package from ansible.plugins.filter import core class ActionModule(ActionBase): def run(self, tmp=None, task_vars=None): """"""Shim for tripleo package operations. This shim will intercept the package module and if the hostvar `EnablePackageInstall` is set to false all package operations will be no-op. If this option is set to true, then the normal package module will be executed. * This shim allows for the package module to be used with and without delegation. * In the event of ANY exception the module will hand off back to the normal package module. """""" try: if self._task.delegate_to: tripleo_pkg = self._templar.template( ""{{ hostvars['%s']['EnablePackageInstall'] }}"" % self._task.delegate_to ) else: tripleo_pkg = self._templar.template( ""{{ EnablePackageInstall }}"" ) except Exception: # If any exception run the normal pkg module return package.run(ActionModule, self).run(tmp, task_vars) else: if core.to_bool(tripleo_pkg): return package.run(ActionModule, self).run(tmp, task_vars) else: return { 'failed': False, 'msg': 'Because the module has been disabled via' ' ""EnablePackageInstall"" being set to ""false""' ' no package operations have been performed.', } ",,61,0
openstack%2Fkeystone~master~I2de4a106a366a966251e866482f255aa94631855,openstack/keystone,master,I2de4a106a366a966251e866482f255aa94631855,Clean up irrelevant comment,MERGED,2019-08-06 21:32:03.000000000,2019-08-08 22:14:50.000000000,2019-08-08 22:14:50.000000000,"[{'_account_id': 16465}, {'_account_id': 22348}, {'_account_id': 27621}]","[{'number': 1, 'created': '2019-08-06 21:32:03.000000000', 'files': ['keystone/common/policies/application_credential.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/2df534efce8f88542dc55d72a521eedfc09015ba', 'message': 'Clean up irrelevant comment\n\nscope_types is no longer commented out for the app cred policies, so\nremove misleading comment.\n\nChange-Id: I2de4a106a366a966251e866482f255aa94631855\n'}]",0,674935,2df534efce8f88542dc55d72a521eedfc09015ba,7,3,1,8482,,,0,"Clean up irrelevant comment

scope_types is no longer commented out for the app cred policies, so
remove misleading comment.

Change-Id: I2de4a106a366a966251e866482f255aa94631855
",git fetch https://review.opendev.org/openstack/keystone refs/changes/35/674935/1 && git format-patch -1 --stdout FETCH_HEAD,['keystone/common/policies/application_credential.py'],1,2df534efce8f88542dc55d72a521eedfc09015ba,fix-policies,, # FIXME(cmurphy) A system administrator should be able to manage any # application credential. A user with a role on a project should be # able to manage their own application credential. We don't currently # have a way of describing how a project administrator should or should # not be able to manage application credentials related to their # project. scope_types will remain commented out for now and will be # updated when we have an answer for this. The same applies to the # other policies in this file.,0,8
openstack%2Fkeystone~master~I3fc1cff61df6d64ea1fc98f54f98aba0cd35145c,openstack/keystone,master,I3fc1cff61df6d64ea1fc98f54f98aba0cd35145c,Fix list_mappings deprecation warning message,MERGED,2019-08-06 21:27:45.000000000,2019-08-08 22:14:47.000000000,2019-08-08 22:14:47.000000000,"[{'_account_id': 1916}, {'_account_id': 8482}, {'_account_id': 8866}, {'_account_id': 16465}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-06 21:27:45.000000000', 'files': ['keystone/common/policies/mapping.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/3c665395ccdfbbaf4dbd140a28f989cafba8aac4', 'message': ""Fix list_mappings deprecation warning message\n\nWithout this patch, the identity:list_mappings policy uses the\ndeprecated name and check string for the old identity:get_mapping rule,\nwhich means the resulting OR'd policy is wrong and the deprecation\nmessage is confusing. Use the right one.\n\nChange-Id: I3fc1cff61df6d64ea1fc98f54f98aba0cd35145c\n""}]",0,674934,3c665395ccdfbbaf4dbd140a28f989cafba8aac4,13,5,1,8482,,,0,"Fix list_mappings deprecation warning message

Without this patch, the identity:list_mappings policy uses the
deprecated name and check string for the old identity:get_mapping rule,
which means the resulting OR'd policy is wrong and the deprecation
message is confusing. Use the right one.

Change-Id: I3fc1cff61df6d64ea1fc98f54f98aba0cd35145c
",git fetch https://review.opendev.org/openstack/keystone refs/changes/34/674934/1 && git format-patch -1 --stdout FETCH_HEAD,['keystone/common/policies/mapping.py'],1,3c665395ccdfbbaf4dbd140a28f989cafba8aac4,fix-policies," deprecated_rule=deprecated_list_mappings,"," deprecated_rule=deprecated_get_mapping,",1,1
openstack%2Fnova~stable%2Fpike~Ie621686053ad774c4ae4f22bb2a455f98900b611,openstack/nova,stable/pike,Ie621686053ad774c4ae4f22bb2a455f98900b611,Implement power_off/power_on for the FakeDriver,MERGED,2019-08-06 16:57:19.000000000,2019-08-08 22:14:43.000000000,2019-08-08 22:14:43.000000000,"[{'_account_id': 4690}, {'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-06 16:57:19.000000000', 'files': ['doc/notification_samples/instance-shelve-end.json', 'nova/virt/fake.py', 'doc/api_samples/os-rescue/server-get-resp-rescue.json', 'nova/tests/functional/notification_sample_tests/test_instance.py', 'nova/tests/unit/compute/test_compute.py', 'doc/notification_samples/instance-shelve_offload-start.json', 'doc/api_samples/os-rescue/server-get-resp-unrescue.json', 'nova/tests/functional/api_sample_tests/api_samples/os-rescue/server-get-resp-unrescue.json.tpl', 'nova/tests/functional/api_sample_tests/api_samples/os-rescue/server-get-resp-rescue.json.tpl', 'doc/notification_samples/instance-unshelve-start.json', 'doc/notification_samples/instance-power_on-start.json', 'doc/notification_samples/instance-shelve_offload-end.json'], 'web_link': 'https://opendev.org/openstack/nova/commit/4a3eea8c30f5a452bcf82b145c66de3d3416a1cd', 'message': 'Implement power_off/power_on for the FakeDriver\n\nWhen trying to recreate hundreds of instance action\nevents for scale testing with the FakeDriver, a nice\nsimple way to do that is by stopping those instances\nand starting them again.\n\nHowever, since power_off/on aren\'t implemented, once\nyou ""stop"" them the sync_instance_power_state periodic\ntask in the compute manager thinks they are still running\non the ""hypervisor"" and will stop them again via the API,\nwhich records yet another instance action and set of\nevents.\n\nThis just toggles the power state bit on the fake instance\nin the FakeDriver to make the periodic task do the right\nthing.\n\nAs a result, we also have more realistic API and\nnotification samples.\n\nChange-Id: Ie621686053ad774c4ae4f22bb2a455f98900b611\n(cherry picked from commit 211e9b1961a14e22b39194fdd90e40738fc27202)\n'}]",0,674876,4a3eea8c30f5a452bcf82b145c66de3d3416a1cd,10,6,1,6873,,,0,"Implement power_off/power_on for the FakeDriver

When trying to recreate hundreds of instance action
events for scale testing with the FakeDriver, a nice
simple way to do that is by stopping those instances
and starting them again.

However, since power_off/on aren't implemented, once
you ""stop"" them the sync_instance_power_state periodic
task in the compute manager thinks they are still running
on the ""hypervisor"" and will stop them again via the API,
which records yet another instance action and set of
events.

This just toggles the power state bit on the fake instance
in the FakeDriver to make the periodic task do the right
thing.

As a result, we also have more realistic API and
notification samples.

Change-Id: Ie621686053ad774c4ae4f22bb2a455f98900b611
(cherry picked from commit 211e9b1961a14e22b39194fdd90e40738fc27202)
",git fetch https://review.opendev.org/openstack/nova refs/changes/76/674876/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/notification_samples/instance-shelve-end.json', 'nova/virt/fake.py', 'doc/api_samples/os-rescue/server-get-resp-rescue.json', 'nova/tests/functional/notification_sample_tests/test_instance.py', 'nova/tests/unit/compute/test_compute.py', 'doc/notification_samples/instance-shelve_offload-start.json', 'doc/api_samples/os-rescue/server-get-resp-unrescue.json', 'nova/tests/functional/api_sample_tests/api_samples/os-rescue/server-get-resp-unrescue.json.tpl', 'nova/tests/functional/api_sample_tests/api_samples/os-rescue/server-get-resp-rescue.json.tpl', 'doc/notification_samples/instance-unshelve-start.json', 'doc/notification_samples/instance-power_on-start.json', 'doc/notification_samples/instance-shelve_offload-end.json']",12,4a3eea8c30f5a452bcf82b145c66de3d3416a1cd,bug/1837877," ""power_state"":""shutdown"","," ""power_state"":""running"",",23,15
openstack%2Fcongress-tempest-plugin~master~I171eb7efc0e34b4451a1b3539ae6655f81dd2312,openstack/congress-tempest-plugin,master,I171eb7efc0e34b4451a1b3539ae6655f81dd2312,Update api-ref location,MERGED,2019-07-30 17:39:52.000000000,2019-08-08 21:54:01.000000000,2019-08-08 21:54:01.000000000,"[{'_account_id': 8215}, {'_account_id': 8878}, {'_account_id': 11278}, {'_account_id': 18591}, {'_account_id': 18955}, {'_account_id': 22348}, {'_account_id': 25553}, {'_account_id': 27822}]","[{'number': 1, 'created': '2019-07-30 17:39:52.000000000', 'files': ['congress_tempest_plugin/services/congress_network/qos_client.py', 'congress_tempest_plugin/services/congress_network/qos_rule_client.py'], 'web_link': 'https://opendev.org/openstack/congress-tempest-plugin/commit/e0a0125a01a8436b364e49c19f62efd66c5398f1', 'message': ""Update api-ref location\n\nThe api documentation is now published on docs.openstack.org instead\nof developer.openstack.org. Update all links that are changed to the\nnew location.\n\nNote that redirects will be set up as well but let's point now to the\nnew location.\n\nFor details, see:\nhttp://lists.openstack.org/pipermail/openstack-discuss/2019-July/007828.html\n\nChange-Id: I171eb7efc0e34b4451a1b3539ae6655f81dd2312\n""}]",0,673588,e0a0125a01a8436b364e49c19f62efd66c5398f1,9,8,1,6547,,,0,"Update api-ref location

The api documentation is now published on docs.openstack.org instead
of developer.openstack.org. Update all links that are changed to the
new location.

Note that redirects will be set up as well but let's point now to the
new location.

For details, see:
http://lists.openstack.org/pipermail/openstack-discuss/2019-July/007828.html

Change-Id: I171eb7efc0e34b4451a1b3539ae6655f81dd2312
",git fetch https://review.opendev.org/openstack/congress-tempest-plugin refs/changes/88/673588/1 && git format-patch -1 --stdout FETCH_HEAD,"['congress_tempest_plugin/services/congress_network/qos_client.py', 'congress_tempest_plugin/services/congress_network/qos_rule_client.py']",2,e0a0125a01a8436b364e49c19f62efd66c5398f1,retire-api-site, https://docs.openstack.org/api-ref/network/v2/index.html#quality-of-service https://docs.openstack.org/api-ref/network/v2/index.html#quality-of-service https://docs.openstack.org/api-ref/network/v2/index.html#quality-of-service https://docs.openstack.org/api-ref/network/v2/index.html#quality-of-service https://docs.openstack.org/api-ref/network/v2/index.html#quality-of-service, https://developer.openstack.org/api-ref/network/v2/index.html#quality-of-service https://developer.openstack.org/api-ref/network/v2/index.html#quality-of-service https://developer.openstack.org/api-ref/network/v2/index.html#quality-of-service https://developer.openstack.org/api-ref/network/v2/index.html#quality-of-service https://developer.openstack.org/api-ref/network/v2/index.html#quality-of-service,10,10
openstack%2Freleases~master~I7592130bd689f7fc5c1e25ecbca71d4d934d429f,openstack/releases,master,I7592130bd689f7fc5c1e25ecbca71d4d934d429f,Oslo releases for 2019-8-6,MERGED,2019-08-06 16:06:55.000000000,2019-08-08 21:35:39.000000000,2019-08-08 21:35:38.000000000,"[{'_account_id': 308}, {'_account_id': 8482}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-06 16:06:55.000000000', 'files': ['deliverables/train/oslo.messaging.yaml', 'deliverables/train/oslo.policy.yaml', 'deliverables/train/tooz.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e85044317d41387c3521e0a228c30310509e57b2', 'message': 'Oslo releases for 2019-8-6\n\nChange-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f\n'}]",0,674861,e85044317d41387c3521e0a228c30310509e57b2,8,4,1,6928,,,0,"Oslo releases for 2019-8-6

Change-Id: I7592130bd689f7fc5c1e25ecbca71d4d934d429f
",git fetch https://review.opendev.org/openstack/releases refs/changes/61/674861/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/train/oslo.messaging.yaml', 'deliverables/train/oslo.policy.yaml', 'deliverables/train/tooz.yaml']",3,e85044317d41387c3521e0a228c30310509e57b2,oslo-master, - version: 1.66.1 projects: - repo: openstack/tooz hash: a4f1288ee4234865a4db8b9c191ba275e2deef3d,,12,0
openstack%2Fcongress~master~Ib4c5aff2fe02d9511e38e2e26b4361d81d853263,openstack/congress,master,Ib4c5aff2fe02d9511e38e2e26b4361d81d853263,Update api-ref location,MERGED,2019-07-30 17:46:23.000000000,2019-08-08 21:24:53.000000000,2019-08-08 21:24:53.000000000,"[{'_account_id': 18591}, {'_account_id': 22348}, {'_account_id': 27822}]","[{'number': 1, 'created': '2019-07-30 17:46:23.000000000', 'files': ['doc/source/user/jgress.rst'], 'web_link': 'https://opendev.org/openstack/congress/commit/3c9ca637124301a2b014e6a1bd46f6f01fa37a3f', 'message': ""Update api-ref location\n\nThe api documentation is now published on docs.openstack.org instead\nof developer.openstack.org. Update all links that are changed to the\nnew location.\n\nNote that redirects will be set up as well but let's point now to the\nnew location.\n\nFor details, see:\nhttp://lists.openstack.org/pipermail/openstack-discuss/2019-July/007828.html\n\nChange-Id: Ib4c5aff2fe02d9511e38e2e26b4361d81d853263\n""}]",0,673591,3c9ca637124301a2b014e6a1bd46f6f01fa37a3f,8,3,1,6547,,,0,"Update api-ref location

The api documentation is now published on docs.openstack.org instead
of developer.openstack.org. Update all links that are changed to the
new location.

Note that redirects will be set up as well but let's point now to the
new location.

For details, see:
http://lists.openstack.org/pipermail/openstack-discuss/2019-July/007828.html

Change-Id: Ib4c5aff2fe02d9511e38e2e26b4361d81d853263
",git fetch https://review.opendev.org/openstack/congress refs/changes/91/673591/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/user/jgress.rst'],1,3c9ca637124301a2b014e6a1bd46f6f01fa37a3f,retire-api-site,<https://docs.openstack.org/api-ref/image/v2/index.html?expanded=list-images-detail#id11>`_.<https://docs.openstack.org/api-ref/image/v2/index.html?expanded=list-images-detail#id11>`_.`API response data <https://docs.openstack.org/api-ref/compute/?expanded=list-servers-detailed-detail#id22>`_ on,<https://developer.openstack.org/api-ref/image/v2/index.html?expanded=list-images-detail#id11>`_.<https://developer.openstack.org/api-ref/image/v2/index.html?expanded=list-images-detail#id11>`_.`API response data <https://developer.openstack.org/api-ref/compute/?expanded=list-servers-detailed-detail#id22>`_ on,3,3
openstack%2Fcongress~master~I1bbc3539a751f7c0c0f54ec046f88a847b4647f9,openstack/congress,master,I1bbc3539a751f7c0c0f54ec046f88a847b4647f9,update devstack plugin for ipv6,MERGED,2019-08-07 23:38:24.000000000,2019-08-08 21:24:52.000000000,2019-08-08 21:24:52.000000000,"[{'_account_id': 8556}, {'_account_id': 18591}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 23:38:24.000000000', 'files': ['congress/common/config.py', 'devstack/plugin.sh'], 'web_link': 'https://opendev.org/openstack/congress/commit/5d8d0e7c7efe4e46bb6f8946e1bf899017465ff9', 'message': 'update devstack plugin for ipv6\n\nSet listen address to devstack variable SERVICE_LISTEN_ADDRESS\nto override the default 0.0.0.0 (which does not listen to ipv6 addresses).\n\nChange-Id: I1bbc3539a751f7c0c0f54ec046f88a847b4647f9\nStory: #2005477\n'}]",0,675230,5d8d0e7c7efe4e46bb6f8946e1bf899017465ff9,8,3,1,18591,,,0,"update devstack plugin for ipv6

Set listen address to devstack variable SERVICE_LISTEN_ADDRESS
to override the default 0.0.0.0 (which does not listen to ipv6 addresses).

Change-Id: I1bbc3539a751f7c0c0f54ec046f88a847b4647f9
Story: #2005477
",git fetch https://review.opendev.org/openstack/congress refs/changes/30/675230/1 && git format-patch -1 --stdout FETCH_HEAD,"['congress/common/config.py', 'devstack/plugin.sh']",2,5d8d0e7c7efe4e46bb6f8946e1bf899017465ff9,ipv6-only-deployment-and-testing, iniset $CONGRESS_CONF DEFAULT bind_host $(ipv6_unquote $SERVICE_LISTEN_ADDRESS),,2,0
openstack%2Fpuppet-tripleo~master~I507efdf3e771789de8cae5e29bc312b4d27f6b25,openstack/puppet-tripleo,master,I507efdf3e771789de8cae5e29bc312b4d27f6b25,Clean up a few FIXME,MERGED,2019-08-07 00:44:27.000000000,2019-08-08 21:21:54.000000000,2019-08-08 21:21:54.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-07 00:44:27.000000000', 'files': ['manifests/profile/base/ironic_inspector.pp', 'manifests/profile/base/zaqar.pp', 'manifests/profile/base/rabbitmq.pp', 'manifests/profile/base/glance/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/0a2469304e1e6c4a8598e8ab1769361e76333739', 'message': 'Clean up a few FIXME\n\nChange-Id: I507efdf3e771789de8cae5e29bc312b4d27f6b25\nglance: remove useless comments, they were implemented.\nironic: remove the useless condition\nrabbitmq: remove useless comment\nzaqar: remove useless parameter, call class directly\n'}]",0,674964,0a2469304e1e6c4a8598e8ab1769361e76333739,14,5,1,3153,,,0,"Clean up a few FIXME

Change-Id: I507efdf3e771789de8cae5e29bc312b4d27f6b25
glance: remove useless comments, they were implemented.
ironic: remove the useless condition
rabbitmq: remove useless comment
zaqar: remove useless parameter, call class directly
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/64/674964/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/ironic_inspector.pp', 'manifests/profile/base/zaqar.pp', 'manifests/profile/base/rabbitmq.pp', 'manifests/profile/base/glance/api.pp']",4,0a2469304e1e6c4a8598e8ab1769361e76333739,todo,," # TODO: notifications, scrubber, etc. # TODO(jaosorior): Remove bind_host when we set it up conditionally in t-h-t",5,17
openstack%2Fpuppet-tripleo~master~If68485390dc11295872f7c3b859234cbf40a7796,openstack/puppet-tripleo,master,If68485390dc11295872f7c3b859234cbf40a7796,"Remove Midonet, Cassandra and Zookeeper",MERGED,2019-08-07 00:48:28.000000000,2019-08-08 21:21:52.000000000,2019-08-08 21:21:52.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-07 00:48:28.000000000', 'files': ['manifests/profile/base/neutron/midonet.pp', 'manifests/haproxy.pp', 'manifests/cluster/zookeeper.pp', 'manifests/cluster/cassandra.pp', 'manifests/profile/base/neutron/agents/midonet.pp', 'manifests/network/midonet/agent.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/1fa66c49c036bf473ef7bb7008778331e117bb71', 'message': 'Remove Midonet, Cassandra and Zookeeper\n\nWe removed Midonet from THT, we can now cleanup puppet-tripleo.\nIt also removes the cassandra & zookeeper cluster manifests, created by\nthe Midonet integrators.\n\nNote that Contrail is also using Cassandra and Zookeeper but not the\nremoved code to deploy these components.\n\nChange-Id: If68485390dc11295872f7c3b859234cbf40a7796\n'}]",0,674967,1fa66c49c036bf473ef7bb7008778331e117bb71,14,5,1,3153,,,0,"Remove Midonet, Cassandra and Zookeeper

We removed Midonet from THT, we can now cleanup puppet-tripleo.
It also removes the cassandra & zookeeper cluster manifests, created by
the Midonet integrators.

Note that Contrail is also using Cassandra and Zookeeper but not the
removed code to deploy these components.

Change-Id: If68485390dc11295872f7c3b859234cbf40a7796
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/67/674967/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/neutron/midonet.pp', 'manifests/haproxy.pp', 'manifests/cluster/zookeeper.pp', 'manifests/cluster/cassandra.pp', 'manifests/profile/base/neutron/agents/midonet.pp', 'manifests/network/midonet/agent.pp']",6,1fa66c49c036bf473ef7bb7008778331e117bb71,midonet,,"# # Copyright (C) 2015 Midokura SARL # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # # == Class: tripleo::network::midonet::agent # # Configure the midonet agent # # == Parameters: # # [*zookeeper_servers*] # (required) List of IPs of the zookeeper server cluster. It will configure # the connection using the 2181 port. # Array of strings value. # # [*cassandra_seeds*] # (required) List of IPs of the cassandra cluster. # Array of strings value. # class tripleo::network::midonet::agent ( $zookeeper_servers, $cassandra_seeds ) { # TODO: Remove comments below once we can guarantee that all the distros # deploying TripleO use Puppet > 3.7 because of this bug: # https://tickets.puppetlabs.com/browse/PUP-1299 # validate_array($zookeeper_servers) # validate_array($cassandra_seeds) # FIXME: This statement should be controlled by hiera on heat templates # project # Make sure openvswitch service is not running service {'openvswitch': ensure => stopped, enable => false } exec {'delete datapaths': command => '/usr/bin/mm-dpctl --delete-dp ovs-system', path => '/usr/bin:/usr/sbin:/bin', onlyif => '/usr/bin/mm-dpctl --show-dp ovs-system' } # Configure and run the agent class {'::midonet::midonet_agent': zk_servers => list_to_zookeeper_hash($zookeeper_servers), cassandra_seeds => $cassandra_seeds } Service['openvswitch'] -> Class['::midonet::midonet_agent::run'] Exec['delete datapaths'] -> Class['::midonet::midonet_agent::run'] } ",0,401
openstack%2Fopenstack-helm-infra~master~I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77,openstack/openstack-helm-infra,master,I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77,(postgresql) Cert auth for replication connections,MERGED,2019-06-04 19:54:27.000000000,2019-08-08 21:16:14.000000000,2019-08-08 21:16:14.000000000,"[{'_account_id': 8898}, {'_account_id': 20466}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 26449}, {'_account_id': 28208}, {'_account_id': 28664}, {'_account_id': 28718}, {'_account_id': 28778}, {'_account_id': 29624}]","[{'number': 1, 'created': '2019-06-04 19:54:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f0e2b66628054fc9ca670d7866d259ea66aea1bd', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 2, 'created': '2019-06-04 21:36:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6a64a0232c4ee8e00c98a2013c67145a88874b2a', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 3, 'created': '2019-06-18 19:26:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9b80a3ac9b810863a4a599d5993296139dc7dd64', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 4, 'created': '2019-06-24 22:22:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/28af2e98e3758b02e9269b7c9171aab2e63f9c6c', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 5, 'created': '2019-06-24 22:57:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e7d7afea76445b952ab376f312feee73cb2232c3', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 6, 'created': '2019-06-25 04:16:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0ff08c939f98e8500d7987c511c07ee826a0a770', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 7, 'created': '2019-06-25 04:28:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b9b52a39c657dded03e8314b2408609869a45857', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 8, 'created': '2019-06-25 05:33:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8e45f85f053c05d5409bc5c26d8708c3af69817b', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 9, 'created': '2019-06-25 15:57:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/330d0a62d1c3e9217f06ae0baff84066fc568d84', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 10, 'created': '2019-06-25 17:06:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/2cc443d808e20cfdf8e0e7da5722fed109a885b2', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 11, 'created': '2019-06-25 18:31:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/97a04441bc14a4a2c8d2183ada4cb2dcfba345cc', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 12, 'created': '2019-06-25 19:28:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/31d104fb746d865df025dd2f5b948a05d43d45e6', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 13, 'created': '2019-06-25 19:29:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8aa682a01453d2100ff6ac0d8ecdeb56bdeafba1', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 14, 'created': '2019-06-25 19:53:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d53e15fca764b0d2a63a92a29a0379dd3d342308', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 15, 'created': '2019-06-25 20:31:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/36e010ec5164913745e3615065ad9c1effad3b4d', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 16, 'created': '2019-06-25 20:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a241deb3dcb079c356470b1c787a907ab13fe0f9', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 17, 'created': '2019-06-25 21:16:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/44ed9113af5f8f8ac91969b6c0bb3df98c2998ec', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 18, 'created': '2019-06-25 21:16:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/3eb458c5e2437f6a7090c8acecda3caa84d4ffd6', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 19, 'created': '2019-06-26 21:48:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f2bc1504d15fa757656922b949196c29a1d25a4d', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 20, 'created': '2019-06-26 23:04:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8133c1aae73da4e72c14ab2f65f41b634b6f1af3', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 21, 'created': '2019-06-27 03:13:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/689f9caa73df0b70339b8432713f30b2e001dcd7', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 22, 'created': '2019-06-27 13:59:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/36347d2832dfb6c2fa4c4335a641f8f1c251bd3e', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 23, 'created': '2019-06-27 14:32:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/64f8366b29bc9ebedb1d97f4e96382b895085c21', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 24, 'created': '2019-06-27 15:10:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ac140b2ce71b84b1d84ff5c601bf9477fb8f8c83', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 25, 'created': '2019-06-27 16:49:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f40d76f3ea22f761b62d8d242c07e33ea70bc61e', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 26, 'created': '2019-06-27 17:35:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a0b0c94f2e0e55e281d4f82433d3ce8c1184f8ce', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 27, 'created': '2019-06-28 00:26:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/eb7cc4c64be115f67424c1339e3d6728d67e4b0f', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 28, 'created': '2019-06-28 02:50:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1861d6eb3dcb43f334266eedf8a63df24af30312', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 29, 'created': '2019-06-28 05:28:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fa2c0f81af91b5d244c8fb0fbf373c4569c445db', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 30, 'created': '2019-06-28 15:00:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b40bddfec465838635006ebabd6b812d015edeeb', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 31, 'created': '2019-06-30 01:51:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/80e36c7a6abeabddd79626e03c7ebaf5fb4ec2d6', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 32, 'created': '2019-06-30 04:10:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/df20cfb57bb22dc9a650928fb3740129b6e50f14', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 33, 'created': '2019-06-30 07:20:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/507778e1627e00fb9d4b5e7e8f5cbde004331d0b', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 34, 'created': '2019-06-30 19:24:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4186ef9408c9d3701ac308d874b2f8377bf89340', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 35, 'created': '2019-06-30 23:22:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9b27bd90e7088fc1694c556996692e0a8b0d2b76', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 36, 'created': '2019-07-01 03:17:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/abbe67e5db8010220a0236901ff63c3bc1cf8809', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 37, 'created': '2019-07-01 15:12:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/13a429e0a159b5e294055eca091926c3f9f82d34', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 38, 'created': '2019-07-01 16:17:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/95af7ec8855a10e2d7ebeecedff004df1b8e3c42', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 39, 'created': '2019-07-01 16:20:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/68f89aa7ea1350c60aa1cbb7de3f5e27168ab100', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 40, 'created': '2019-07-01 17:18:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/69fa230d63944b456e2a85dfd90925845086bacc', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 41, 'created': '2019-07-01 18:01:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ed5c04d6723852117c28595ec324251c94123d53', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 42, 'created': '2019-07-01 20:41:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/cde51a43cbf98254149a94ccb6bc0acec339aa50', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 43, 'created': '2019-07-01 21:36:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5d062bd90af5278c0c9d8d3ea686f84935bf1076', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 44, 'created': '2019-07-02 02:16:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5298c1e217955a45454105ef691a4c3863b8ce34', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 45, 'created': '2019-07-02 04:34:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7b12f1d76a6e7c78e5b0a32c38157dc0e95781f4', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 46, 'created': '2019-07-02 04:39:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fa01362c67738156b154b91ea2b5381fcc34a2ba', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 47, 'created': '2019-07-02 21:30:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8a00641bdf4258c41727d51682cb037f0cddedd6', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 48, 'created': '2019-07-02 22:55:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/55c01f715dda2ec1c218e11414c047387b577e60', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 49, 'created': '2019-07-05 22:36:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/728664521f8c26fb410e2035af390f4b29e0383b', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 50, 'created': '2019-07-06 07:10:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b8115dfae3628d2a565fbda6c68eedc243ae8f15', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 51, 'created': '2019-07-06 15:41:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ccfaa22a10c8719b5f85f9c0ddc55dc428e423c8', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 52, 'created': '2019-07-07 07:17:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e1a6c47491cc81b719339b7e87c7cd2f35ab9cf2', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 53, 'created': '2019-07-07 07:48:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/2cb0876ecc7adefc926f68d7b4752a7d6e59bd28', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 54, 'created': '2019-07-08 18:45:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a655547e71c4daf007cebfc61d3874fa25cb9096', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 55, 'created': '2019-07-09 04:44:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0dbaa04b6f16aa621104d58afb06d40fbd052d4e', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 56, 'created': '2019-07-09 07:09:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5c45f8ff33952a9801c88ca3ad108e2bf4a94a5c', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 57, 'created': '2019-07-09 07:19:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a20c112d594757f3eb83de3fe042ba8db4679fed', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 58, 'created': '2019-07-11 16:01:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4bd026448c797404e745666c6ac66ff0a1cd26d7', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 59, 'created': '2019-07-11 19:44:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fdef8b613aa19086b8044fea58eee96378a2210d', 'message': '(postgresql) WIP - Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n- This PS depends on https://review.opendev.org/#/c/667681\n  for helm-tookit, and should be applied on top of that PS.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 60, 'created': '2019-07-11 20:55:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9d92589e5e834e14808883494de4ad9a4569ae70', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 61, 'created': '2019-07-30 19:44:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/2f3f93c90026cc8a9fa7fd65c8a8b9b56687ed39', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 62, 'created': '2019-07-30 20:04:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d74460b56e6e94e0d54075cfb6780ffe16544991', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 63, 'created': '2019-07-30 20:29:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/81ab5f6b40aa396fbfe6bd26511b20d8524760e7', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 64, 'created': '2019-07-31 00:12:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/74977f9b9973dd223338eeba257cddf13a0ae3ca', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 65, 'created': '2019-08-06 16:56:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/399a8073b924458e3871bfbfb3608de237744d5f', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 66, 'created': '2019-08-06 17:22:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7709e16e86e3425fab13c8bb7ef895063a0c13e5', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}, {'number': 67, 'created': '2019-08-08 14:04:44.000000000', 'files': ['postgresql/templates/bin/_patroni_conversion.sh.tpl', 'postgresql/templates/statefulset.yaml', 'postgresql/templates/secret-replica.yaml', 'postgresql/values.yaml', 'postgresql/templates/bin/_set_password.sh.tpl', 'postgresql/templates/secret-server.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9c27dd75763d420d9ffbe0abbda273065ab3f3dd', 'message': '(postgresql) Cert auth for replication connections\n\n- Change the Postgres configuration to use x509 client\n  certs for authenticating the connections for replicating\n  between Patroni nodes. This is a straightforward solution\n  for support credential rotation for the replication user.\n  Password authentication is problematic due to the declartive\n  nature of helm charts and requiring an existing replication\n  connection to replicate the rotated password.\n\nChange-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77\n'}]",13,663129,9c27dd75763d420d9ffbe0abbda273065ab3f3dd,152,11,67,26449,,,0,"(postgresql) Cert auth for replication connections

- Change the Postgres configuration to use x509 client
  certs for authenticating the connections for replicating
  between Patroni nodes. This is a straightforward solution
  for support credential rotation for the replication user.
  Password authentication is problematic due to the declartive
  nature of helm charts and requiring an existing replication
  connection to replicate the rotated password.

Change-Id: I0c5456a01b3a36fee8ee4c986d25c4a1d807cb77
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/29/663129/64 && git format-patch -1 --stdout FETCH_HEAD,"['postgresql/templates/statefulset.yaml', 'postgresql/templates/secret-replica.yaml', 'postgresql/values.yaml', 'postgresql/templates/secret-server.yaml']",4,f0e2b66628054fc9ca670d7866d259ea66aea1bd,psql-replication-tls,"{{/* Licensed under the Apache License, Version 2.0 (the ""License""); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */}} {{- if .Values.manifests.secret_server }} --- apiVersion: v1 kind: Secret metadata: name: {{ .Values.secrets.postgresql.server }} type: Opaque data: {{ include ""helm-toolkit.utils.tls_generate_certs"" (dict ""params"" .Values.pki.server ""encode"" true) | indent 2 }} ... {{- end }} ",,212,6
openstack%2Ftripleo-heat-templates~master~I33d62bbef3a19af0898f8047af436ed05c9a90a8,openstack/tripleo-heat-templates,master,I33d62bbef3a19af0898f8047af436ed05c9a90a8,Fix typo in barbican deployment,MERGED,2019-08-02 19:22:46.000000000,2019-08-08 21:13:57.000000000,2019-08-05 22:29:53.000000000,"[{'_account_id': 3153}, {'_account_id': 9914}, {'_account_id': 10873}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-02 19:22:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/08258e7d3e2c57027794b8818058987ed42d03fe', 'message': 'Fix typo in barbican deployment\n\nChange-Id: I33d62bbef3a19af0898f8047af436ed05c9a90a8\n'}, {'number': 2, 'created': '2019-08-05 12:30:22.000000000', 'files': ['deployment/barbican/barbican-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/06c8ab8beff4d9ba26b574c1c391d2d103e715a7', 'message': 'Fix typo in barbican deployment\n\nChange-Id: I33d62bbef3a19af0898f8047af436ed05c9a90a8\n'}]",0,674410,06c8ab8beff4d9ba26b574c1c391d2d103e715a7,13,5,2,7973,,,0,"Fix typo in barbican deployment

Change-Id: I33d62bbef3a19af0898f8047af436ed05c9a90a8
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/10/674410/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/barbican/barbican-api-container-puppet.yaml'],1,08258e7d3e2c57027794b8818058987ed42d03fe,, - /usr/lib64/libnethsm.so:/usr/lib64/libnethsm.so, - /usr/lib64/libnetshm.so:/usr/lib64/libnethsm.so,1,1
openstack%2Fansible-role-thales-hsm~master~I188fd02d3a8d017ea1ea0894ea3b8d9318321dad,openstack/ansible-role-thales-hsm,master,I188fd02d3a8d017ea1ea0894ea3b8d9318321dad,Ensure libnsl is installed,MERGED,2019-07-30 14:31:47.000000000,2019-08-08 21:04:10.000000000,2019-07-30 18:58:42.000000000,"[{'_account_id': 1004}, {'_account_id': 9914}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-07-30 14:31:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-role-thales-hsm/commit/32e47464577765bbc2f291c2c55a8b0b08a70582', 'message': 'Ensure libnsl is installed\n\nChange-Id: I188fd02d3a8d017ea1ea0894ea3b8d9318321dad\n'}, {'number': 2, 'created': '2019-07-30 14:45:27.000000000', 'files': ['tasks/client.yaml'], 'web_link': 'https://opendev.org/openstack/ansible-role-thales-hsm/commit/0133696ce670c3e1d55524a990fe56374a711934', 'message': 'Ensure libnsl is installed\n\nChange-Id: I188fd02d3a8d017ea1ea0894ea3b8d9318321dad\n'}]",0,673538,0133696ce670c3e1d55524a990fe56374a711934,10,4,2,7973,,,0,"Ensure libnsl is installed

Change-Id: I188fd02d3a8d017ea1ea0894ea3b8d9318321dad
",git fetch https://review.opendev.org/openstack/ansible-role-thales-hsm refs/changes/38/673538/2 && git format-patch -1 --stdout FETCH_HEAD,['tasks/client.yaml'],1,32e47464577765bbc2f291c2c55a8b0b08a70582,,- name: ensure libnsl dependency is installed stat: path: /lib64/libnsl.so.1 registers: st - package: name: libnsl state: present when: not st.stat.exists ,,9,0
openstack%2Fcongress~master~I0e1e695eb266665280f01847eab1771a9904ff06,openstack/congress,master,I0e1e695eb266665280f01847eab1771a9904ff06,WIP - update devstack plugin for ipv6,ABANDONED,2019-08-05 23:40:04.000000000,2019-08-08 20:24:18.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-05 23:40:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/f895f532b0c8ebf31d2093beebed0062146364b1', 'message': 'DNM - ipv6 testing\n\nChange-Id: I0e1e695eb266665280f01847eab1771a9904ff06\n'}, {'number': 2, 'created': '2019-08-06 17:22:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/0d90b11e2667cea17a0ed87ade3a6396d262d5e7', 'message': 'DNM - ipv6 testing\n\nChange-Id: I0e1e695eb266665280f01847eab1771a9904ff06\n'}, {'number': 3, 'created': '2019-08-06 20:00:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/84e0cc1ab9caf80e96977550a234dabd12ab136b', 'message': 'DNM - ipv6 testing\n\nChange-Id: I0e1e695eb266665280f01847eab1771a9904ff06\n'}, {'number': 4, 'created': '2019-08-06 21:56:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/b8db879bdd8221b2c317246db1b3003278610251', 'message': 'DNM - ipv6 testing\n\nChange-Id: I0e1e695eb266665280f01847eab1771a9904ff06\n'}, {'number': 5, 'created': '2019-08-06 22:11:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/congress/commit/9af8d21a57031119c7dd4056baa92429fb2d8120', 'message': 'WIP - update devstack plugin for ipv6\n\nSet listen address to devstack variable SERVICE_LISTEN_ADDRESS\nto override the default 0.0.0.0 (which does not listen to ipv6 addresses).\n\nChange-Id: I0e1e695eb266665280f01847eab1771a9904ff06\n'}, {'number': 6, 'created': '2019-08-07 22:17:27.000000000', 'files': ['congress/common/config.py', '.zuul.yaml', 'devstack/plugin.sh'], 'web_link': 'https://opendev.org/openstack/congress/commit/f0816e6028458f9616b71077fb0ad969b36a3755', 'message': 'WIP - update devstack plugin for ipv6\n\nSet listen address to devstack variable SERVICE_LISTEN_ADDRESS\nto override the default 0.0.0.0 (which does not listen to ipv6 addresses).\n\nChange-Id: I0e1e695eb266665280f01847eab1771a9904ff06\n'}]",0,674712,f0816e6028458f9616b71077fb0ad969b36a3755,12,1,6,18591,,,0,"WIP - update devstack plugin for ipv6

Set listen address to devstack variable SERVICE_LISTEN_ADDRESS
to override the default 0.0.0.0 (which does not listen to ipv6 addresses).

Change-Id: I0e1e695eb266665280f01847eab1771a9904ff06
",git fetch https://review.opendev.org/openstack/congress refs/changes/12/674712/6 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'devstack/plugin.sh']",2,f895f532b0c8ebf31d2093beebed0062146364b1,ipv6-only-deployment-and-testing," sleep 200 # if ! timeout $SERVICE_TIMEOUT sh -c ""while ! wget --no-proxy -q -O- http://$CONGRESS_HOST:$CONGRESS_PORT; do sleep 1; done""; then # die $LINENO ""Congress did not start"" # fi"," if ! timeout $SERVICE_TIMEOUT sh -c ""while ! wget --no-proxy -q -O- http://$CONGRESS_HOST:$CONGRESS_PORT; do sleep 1; done""; then die $LINENO ""Congress did not start"" fi",18,17
openstack%2Fneutron~master~I93e8d21d612e343479f26f8adc4477473579bab1,openstack/neutron,master,I93e8d21d612e343479f26f8adc4477473579bab1,Add 3 retry attempts to initialize ovs agent,MERGED,2019-08-01 16:13:00.000000000,2019-08-08 20:07:56.000000000,2019-08-08 20:07:56.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 27654}]","[{'number': 1, 'created': '2019-08-01 16:13:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/bc4c4709e7e53935b7d90865fc13790f8a70f2b3', 'message': ""Add 3 retry attempts to initialize ovs agent\n\nIn case when TimeoutException will be raised by ovsdbapp during\ninitialization of neutron-ovs-agent, it will now try to create\nobject of agents class 3 times before agent will be terminated.\n\nSuch timeouts shouldn't happend usually but if for some reason\nit happens e.g. once, e.g. in CI job, it should be better to just\nretry and initialize this agent instead of left it dead on the\nnode.\n\nChange-Id: I93e8d21d612e343479f26f8adc4477473579bab1\nCloses-Bug: #1838563\n""}, {'number': 2, 'created': '2019-08-05 09:18:31.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/30a60d04f098581340f83b38b7a79104308c66bc', 'message': ""Add 3 retry attempts to initialize ovs agent\n\nIn case when TimeoutException will be raised by ovsdbapp during\ninitialization of neutron-ovs-agent, it will now try to create\nobject of agents class 3 times before agent will be terminated.\n\nSuch timeouts shouldn't happend usually but if for some reason\nit happens e.g. once, e.g. in CI job, it should be better to just\nretry and initialize this agent instead of left it dead on the\nnode.\n\nChange-Id: I93e8d21d612e343479f26f8adc4477473579bab1\nCloses-Bug: #1838563\n""}]",4,674085,30a60d04f098581340f83b38b7a79104308c66bc,45,9,2,11975,,,0,"Add 3 retry attempts to initialize ovs agent

In case when TimeoutException will be raised by ovsdbapp during
initialization of neutron-ovs-agent, it will now try to create
object of agents class 3 times before agent will be terminated.

Such timeouts shouldn't happend usually but if for some reason
it happens e.g. once, e.g. in CI job, it should be better to just
retry and initialize this agent instead of left it dead on the
node.

Change-Id: I93e8d21d612e343479f26f8adc4477473579bab1
Closes-Bug: #1838563
",git fetch https://review.opendev.org/openstack/neutron refs/changes/85/674085/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py'],1,bc4c4709e7e53935b7d90865fc13790f8a70f2b3,bug/1838563,"from ovsdbapp import exceptions as ovs_exceptions init_max_tries = 3 init_try = 1 while True: try: agent = OVSNeutronAgent(bridge_classes, ext_mgr, cfg.CONF) capabilities.notify_init_event(n_const.AGENT_TYPE_OVS, agent) break except ovs_exceptions.TimeoutException as e: if init_try < init_max_tries: LOG.warning(""Ovsdb command timeout!"") init_try += 1 else: LOG.error(""%s agent terminated after %s initialization "" ""attempts!"", e, init_try) sys.exit(1) except (RuntimeError, ValueError) as e: LOG.error(""%s agent terminated!"", e) sys.exit(1)"," try: agent = OVSNeutronAgent(bridge_classes, ext_mgr, cfg.CONF) capabilities.notify_init_event(n_const.AGENT_TYPE_OVS, agent) except (RuntimeError, ValueError) as e: LOG.error(""%s Agent terminated!"", e) sys.exit(1)",19,6
openstack%2Fmagnum~master~I2ba32844b822ffc14da043e6ef7d071bb62a22ee,openstack/magnum,master,I2ba32844b822ffc14da043e6ef7d071bb62a22ee,k8s: stop introspecting instance name,MERGED,2019-06-27 21:37:09.000000000,2019-08-08 19:50:58.000000000,2019-08-08 19:50:58.000000000,"[{'_account_id': 1004}, {'_account_id': 6484}, {'_account_id': 7822}, {'_account_id': 20498}, {'_account_id': 22348}, {'_account_id': 28022}, {'_account_id': 29425}]","[{'number': 1, 'created': '2019-06-27 21:37:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/19c2118a2c941c55c9f71a2933731cd85a48f3ed', 'message': 'k8s: stop introspecting instance name\n\nWe kept introspecting the name of the instance with the assumption\nthat the network always existed under .novalocal\n\nThis is not always the case, with certain variables changed inside\nNeutron it is possible to control this, therefore, leading in failing\ndeploys.\n\nWith this change, we pass the instance name directly to the cluster\nand therefore we always have the accurate name.\n\nChange-Id: I2ba32844b822ffc14da043e6ef7d071bb62a22ee\n'}, {'number': 2, 'created': '2019-06-27 22:22:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/953b5726248df0e36014c6d33be2461369f55246', 'message': 'k8s: stop introspecting instance name\n\nWe kept introspecting the name of the instance with the assumption\nthat the network always existed under .novalocal\n\nThis is not always the case, with certain variables changed inside\nNeutron it is possible to control this, therefore, leading in failing\ndeploys.\n\nWith this change, we pass the instance name directly to the cluster\nand therefore we always have the accurate name.\n\nChange-Id: I2ba32844b822ffc14da043e6ef7d071bb62a22ee\n'}, {'number': 3, 'created': '2019-06-27 22:27:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/572ff3864b5fc0f7a6981679f965cb0c25be735b', 'message': 'k8s: stop introspecting instance name\n\nWe kept introspecting the name of the instance with the assumption\nthat the network always existed under .novalocal\n\nThis is not always the case, with certain variables changed inside\nNeutron it is possible to control this, therefore, leading in failing\ndeploys.\n\nWith this change, we pass the instance name directly to the cluster\nand therefore we always have the accurate name.\n\nChange-Id: I2ba32844b822ffc14da043e6ef7d071bb62a22ee\n'}, {'number': 4, 'created': '2019-06-28 01:11:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/38ad3e2077651032f6860f84bd8dfe1118f4ed5f', 'message': 'k8s: stop introspecting instance name\n\nWe kept introspecting the name of the instance with the assumption\nthat the network always existed under .novalocal\n\nThis is not always the case, with certain variables changed inside\nNeutron it is possible to control this, therefore, leading in failing\ndeploys.\n\nWith this change, we pass the instance name directly to the cluster\nand therefore we always have the accurate name.\n\nChange-Id: I2ba32844b822ffc14da043e6ef7d071bb62a22ee\n'}, {'number': 5, 'created': '2019-08-02 13:42:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/fdf426d581804fef4f2d6b2caa95a6d94edf29ce', 'message': 'k8s: stop introspecting instance name\n\nWe kept introspecting the name of the instance with the assumption\nthat the network always existed under .novalocal\n\nThis is not always the case, with certain variables changed inside\nNeutron it is possible to control this, therefore, leading in failing\ndeploys.\n\nWith this change, we pass the instance name directly to the cluster\nand therefore we always have the accurate name.\n\nChange-Id: I2ba32844b822ffc14da043e6ef7d071bb62a22ee\n'}, {'number': 6, 'created': '2019-08-07 21:24:12.000000000', 'files': ['magnum/drivers/common/templates/kubernetes/fragments/make-cert-client.sh', 'magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-minion.sh', 'magnum/drivers/k8s_fedora_atomic_v1/templates/kubeminion.yaml', 'magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-master.sh', 'magnum/drivers/common/templates/kubernetes/fragments/make-cert.sh', 'magnum/drivers/common/templates/kubernetes/fragments/write-heat-params.sh', 'magnum/drivers/k8s_fedora_atomic_v1/templates/kubemaster.yaml', 'magnum/drivers/common/templates/kubernetes/fragments/upgrade-kubernetes.sh', 'magnum/drivers/common/templates/kubernetes/fragments/write-heat-params-master.sh', 'magnum/drivers/k8s_coreos_v1/templates/fragments/enable-kubelet-master.yaml', 'magnum/drivers/k8s_coreos_v1/templates/fragments/enable-kubelet-minion.yaml'], 'web_link': 'https://opendev.org/openstack/magnum/commit/2f2d05c826a35dbc89199f49560bb68cd14f49f4', 'message': 'k8s: stop introspecting instance name\n\nWe kept introspecting the name of the instance with the assumption\nthat the network always existed under .novalocal\n\nThis is not always the case, with certain variables changed inside\nNeutron it is possible to control this, therefore, leading in failing\ndeploys.\n\nWith this change, we pass the instance name directly to the cluster\nand therefore we always have the accurate name.\n\nTask: 36160\nStory: 2006371\n\nChange-Id: I2ba32844b822ffc14da043e6ef7d071bb62a22ee\n'}]",0,668059,2f2d05c826a35dbc89199f49560bb68cd14f49f4,26,7,6,1004,,,0,"k8s: stop introspecting instance name

We kept introspecting the name of the instance with the assumption
that the network always existed under .novalocal

This is not always the case, with certain variables changed inside
Neutron it is possible to control this, therefore, leading in failing
deploys.

With this change, we pass the instance name directly to the cluster
and therefore we always have the accurate name.

Task: 36160
Story: 2006371

Change-Id: I2ba32844b822ffc14da043e6ef7d071bb62a22ee
",git fetch https://review.opendev.org/openstack/magnum refs/changes/59/668059/1 && git format-patch -1 --stdout FETCH_HEAD,"['magnum/drivers/common/templates/kubernetes/fragments/make-cert-client.sh', 'magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-minion.sh', 'magnum/drivers/k8s_fedora_atomic_v1/templates/kubeminion.yaml', 'magnum/drivers/common/templates/kubernetes/fragments/configure-kubernetes-master.sh', 'magnum/drivers/common/templates/kubernetes/fragments/make-cert.sh', 'magnum/drivers/k8s_fedora_atomic_v1/templates/kubemaster.yaml', 'magnum/drivers/common/templates/kubernetes/fragments/upgrade-kubernetes.sh', 'magnum/drivers/common/templates/kubernetes/fragments/write-heat-params-master.sh', 'magnum/drivers/k8s_coreos_v1/templates/fragments/enable-kubelet-master.yaml', 'magnum/drivers/k8s_coreos_v1/templates/fragments/enable-kubelet-minion.yaml']",10,19c2118a2c941c55c9f71a2933731cd85a48f3ed,, --hostname-override=${INSTANCE_NAME} \, HOSTNAME_OVERRIDE=$(hostname --short | sed 's/\.novalocal//') --hostname-override=${HOSTNAME_OVERRIDE} \,16,26
openstack%2Ftripleo-quickstart~master~Iee4eaaad37d1ac1d595e2430c1cbea09349522b8,openstack/tripleo-quickstart,master,Iee4eaaad37d1ac1d595e2430c1cbea09349522b8,Generate fs matrix from source yaml files,MERGED,2019-07-26 15:08:58.000000000,2019-08-08 19:47:48.000000000,2019-08-08 19:47:48.000000000,"[{'_account_id': 8175}, {'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10022}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24162}]","[{'number': 1, 'created': '2019-07-26 15:08:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/dcb98ddb27e6d35e48d9ce0689be63fd5184fada', 'message': 'Generate fs matrix from source yaml files\n\nUse featureset yaml files as the unique source of truth.\n\nWhen updating fs yaml files, one should run a python code to parse\nfeatureset yaml files and generate the matrix in\ndoc/source/featureset-configuration.rst. The output of the python\nscript should be copied into rst file.\n\nChange includes:\n\n  - Normalized matrix headers w/ 5 chars\n  - Legend w/ acronyms and symbols automatically generated\n  - Features marked as enabled, disabled, not found, or enabled by\n    release.\n  - Removed default settings enabled after release XYZ that are\n    not controlled by the featureset file: e.g. cnf-dl.\n  - Removed settings not present in any fs: ssl uc\n    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha\n    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).\n  - Merged SSL overcloud INT and EXT into a single SSL OC.\n\nChange-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8\nTask: https://tree.taiga.io/project/tripleo-ci-board/task/1202\n'}, {'number': 2, 'created': '2019-07-26 19:26:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/70275e3b0b04cff91a4a1f54efaf9931b8af34d5', 'message': 'Generate fs matrix from source yaml files\n\nUse featureset yaml files as the unique source of truth.\n\nWhen updating fs yaml files, one should run a python code to parse\nfeatureset yaml files and generate the matrix in\ndoc/source/featureset-configuration.rst. The output of the python\nscript should be copied into rst file.\n\nChange includes:\n\n  - Normalized matrix headers w/ 5 chars\n  - Legend w/ acronyms and symbols automatically generated\n  - Features marked as enabled, disabled, not found, or enabled by\n    release.\n  - Removed default settings enabled after release XYZ that are\n    not controlled by the featureset file: e.g. cnf-dl.\n  - Removed settings not present in any fs: ssl uc\n    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha\n    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).\n  - Merged SSL overcloud INT and EXT into a single SSL OC.\n\nChange-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8\nTask: https://tree.taiga.io/project/tripleo-ci-board/task/1202\n'}, {'number': 3, 'created': '2019-07-29 18:53:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/06a9d4a183d34243c47376ce106a6e77c9e78e8c', 'message': 'Generate fs matrix from source yaml files\n\nUse featureset yaml files as the unique source of truth.\n\nWhen updating fs yaml files, one should run a python code to parse\nfeatureset yaml files and generate the matrix in\ndoc/source/featureset-configuration.rst. The output of the python\nscript should be copied into rst file.\n\nChange includes:\n\n  - Normalized matrix headers w/ 5 chars\n  - Legend w/ acronyms and symbols automatically generated\n  - Features marked as enabled, disabled, not found, or enabled by\n    release.\n  - Removed default settings enabled after release XYZ that are\n    not controlled by the featureset file: e.g. cnf-dl.\n  - Removed settings not present in any fs: ssl uc\n    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha\n    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).\n  - Merged SSL overcloud INT and EXT into a single SSL OC.\n\nChange-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8\nTask: https://tree.taiga.io/project/tripleo-ci-board/task/1202\n'}, {'number': 4, 'created': '2019-07-30 12:14:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/09b8b1481ff0a973977fb3cc00d1a4ff2928a50a', 'message': 'Generate fs matrix from source yaml files\n\nUse featureset yaml files as the unique source of truth.\n\nWhen updating fs yaml files, one should run a python code to parse\nfeatureset yaml files and generate the matrix in\ndoc/source/featureset-configuration.rst. The output of the python\nscript should be copied into rst file.\n\nChange includes:\n\n  - Normalized matrix headers w/ 5 chars\n  - Legend w/ acronyms and symbols automatically generated\n  - Features marked as enabled, disabled, not found, or enabled by\n    release.\n  - Removed default settings enabled after release XYZ that are\n    not controlled by the featureset file: e.g. cnf-dl.\n  - Removed settings not present in any fs: ssl uc\n    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha\n    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).\n  - Merged SSL overcloud INT and EXT into a single SSL OC.\n\nChange-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8\nTask: https://tree.taiga.io/project/tripleo-ci-board/task/1202\n'}, {'number': 5, 'created': '2019-08-01 13:25:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/a88857c5938670df7f9777831462849fbb0f09fa', 'message': 'Generate fs matrix from source yaml files\n\nUse featureset yaml files as the unique source of truth.\n\nWhen updating fs yaml files, one should run a python code to parse\nfeatureset yaml files and generate the matrix in\ndoc/source/featureset-configuration.rst. The output of the python\nscript should be copied into rst file.\n\nChange includes:\n\n  - Normalized matrix headers w/ 5 chars\n  - Legend w/ acronyms and symbols automatically generated\n  - Features marked as enabled, disabled, not found, or enabled by\n    release.\n  - Removed default settings enabled after release XYZ that are\n    not controlled by the featureset file: e.g. cnf-dl.\n  - Removed settings not present in any fs: ssl uc\n    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha\n    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).\n  - Merged SSL overcloud INT and EXT into a single SSL OC.\n\nChange-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8\nTask: https://tree.taiga.io/project/tripleo-ci-board/task/1202\n'}, {'number': 6, 'created': '2019-08-05 15:28:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/f188620f125c959858107569bb235b329cc2a2e9', 'message': 'Generate fs matrix from source yaml files\n\nUse featureset yaml files as the unique source of truth.\n\nWhen updating fs yaml files, one should run a python code to parse\nfeatureset yaml files and generate the matrix in\ndoc/source/featureset-configuration.rst. The output of the python\nscript should be copied into rst file.\n\nChange includes:\n\n  - Normalized matrix headers w/ 5 chars\n  - Legend w/ acronyms and symbols automatically generated\n  - Features marked as enabled, disabled, not found, or enabled by\n    release.\n  - Removed default settings enabled after release XYZ that are\n    not controlled by the featureset file: e.g. cnf-dl.\n  - Removed settings not present in any fs: ssl uc\n    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha\n    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).\n  - Merged SSL overcloud INT and EXT into a single SSL OC.\n\nChange-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8\nTask: https://tree.taiga.io/project/tripleo-ci-board/task/1202\nCo-Authored-By: Sorin Sbarnea <ssbarnea@redhat.com>\n'}, {'number': 7, 'created': '2019-08-06 19:10:29.000000000', 'files': ['doc/source/feature-configuration.rst', 'test-requirements.txt', 'fs-matrix.py', 'tox.ini', 'doc/source/feature-configuration-generated.rst', '.pre-commit-config.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/edaa1be4bcb53db87ea61a3bfd26e94a012cb5bc', 'message': ""Generate fs matrix from source yaml files\n\nUse featureset yaml files as the unique source of truth.\n\nWhen updating fs yaml files, one should run 'tox -e docs'\nto update the featureset matrix. Tox calls a python code\nto parse featureset yaml files and generate the matrix in\ndoc/source/featureset-configuration-generated.rst, which\nin turn, is imported into the featureset configuration page.\n\nChange includes:\n\n  - Normalized matrix headers w/ 5 chars\n  - Legend w/ acronyms and symbols automatically generated\n  - Features marked as enabled, disabled, not found, or enabled by\n    release.\n  - Removed default settings enabled after release XYZ that are\n    not controlled by the featureset file: e.g. cnf-dl.\n  - Removed settings not present in any fs: ssl uc\n    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha\n    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).\n  - Merged SSL overcloud INT and EXT into a single SSL OC.\n\nChange-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8\nTask: https://tree.taiga.io/project/tripleo-ci-board/task/1202\nCo-Authored-By: Sorin Sbarnea <ssbarnea@redhat.com>\n""}]",31,673005,edaa1be4bcb53db87ea61a3bfd26e94a012cb5bc,51,12,7,8175,,,0,"Generate fs matrix from source yaml files

Use featureset yaml files as the unique source of truth.

When updating fs yaml files, one should run 'tox -e docs'
to update the featureset matrix. Tox calls a python code
to parse featureset yaml files and generate the matrix in
doc/source/featureset-configuration-generated.rst, which
in turn, is imported into the featureset configuration page.

Change includes:

  - Normalized matrix headers w/ 5 chars
  - Legend w/ acronyms and symbols automatically generated
  - Features marked as enabled, disabled, not found, or enabled by
    release.
  - Removed default settings enabled after release XYZ that are
    not controlled by the featureset file: e.g. cnf-dl.
  - Removed settings not present in any fs: ssl uc
    (SSL Undercloud), NI Bond (Network Isolation Bond), nonha
    (non-HA), PM (Pacemaker), IPSec (IPSec tunnels).
  - Merged SSL overcloud INT and EXT into a single SSL OC.

Change-Id: Iee4eaaad37d1ac1d595e2430c1cbea09349522b8
Task: https://tree.taiga.io/project/tripleo-ci-board/task/1202
Co-Authored-By: Sorin Sbarnea <ssbarnea@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/05/673005/7 && git format-patch -1 --stdout FETCH_HEAD,"['config/general_config/README.rst', 'doc/source/feature-configuration.rst', 'doc/source/fs-matrix.py']",3,dcb98ddb27e6d35e48d9ce0689be63fd5184fada,ruck_sprint13,"#!/bin/python # -*- coding: utf-8 -*- import yaml import os import operator from texttable import Texttable # featureset mapping to match fs configuration files features_map = { #<feature_setting_name>: [<enabled_value>,<acronym>,<description>] 'overcloud_ipv6': ['true','IPv6','Overcloud IPv6'], 'ssl_overcloud': ['true','SSLoc','Overcloud SSL'], 'network_isolation': ['true','NIsol','Network Isolation'], 'network_isolation_type': ['single-nic-vlans|multiple-nics|bond','NItyp','Network Isolation Type'], 'step_introspect': ['true','Intro','Introspection'], 'undercloud_check_idempotency': ['true','Idemp','Undercloud Idempotency Check'], 'containerized_undercloud': ['true','ConUC','Containerized undecloud'], 'containerized_overcloud': ['true','ConOC','Containerized overcloud'], 'undercloud_upgrade': ['true','UPGuc','Undercloud Upgrade'], 'containerized_overcloud_upgrade': ['true','UPGoc','Overcloud Major Upgrade'], 'overcloud_update': ['true','UPDoc','Overcloud Update (Minor Upgrade)'], 'ffu_overcloud_upgrade': ['true','UPGff','Fast-forward Overcloud Upgrade'], 'standalone_role': ['Standalone.yaml','Stdln','Standalone Deploy'], 'run_tripleo_validations': ['true','Valid','Validations'], 'test_ping': ['true','PingT','Ping and ssh tests'], 'run_tempest': ['true','Temps','run Tempest'], 'composable_scenario': ['','Scen#','Scenario ###'], 'extra_args': ['ceph','Cephd','Ceph deploy'], 'undercloud_heat_convergence': ['true','HConv','Undercloud Heat Convergence'], 'enable_minimal_browbeat': ['true','BrowB','Browbeat performance testing'], 'validate_ha_overcloud': ['true','HAval','HA Validation'], } symbol_map = { 'single-nic-vlans': [u'','Network isolation single network interface card'], 'multiple-nics': [u'','Network isolation multiple network interface cards'], 'release': [u'','Feature enabled in certain releases only'], 'enabled': [u'','Feature enabled in all releases'], 'disabled': [u'','Feature explicitly disabled in all releases'], 'not-found': [u' ','Feature not found'], } def load_fs(): t = Texttable() # headers/columns columns = ['Fset#'] for k, h in sorted(features_map.items(), key=lambda kv: kv[1][1]): columns.append(h[1]) matrix_length = len(columns) t.set_cols_width([5]*matrix_length) t.set_cols_align(['c']*matrix_length) t.set_cols_valign(['m']*matrix_length) t.set_cols_dtype(['t']*matrix_length) for fs_filename in sorted(os.listdir('./fs')): fs_dict = {} if fs_filename.startswith('featureset0') and fs_filename.endswith('.yml'): with open('./fs/'+fs_filename) as fs_file: fs_dict=yaml.load(fs_file) datarow = add_fs_to_matrix(fs_dict, fs_filename) t.add_rows([columns, datarow]) print(t.draw()+'\n') def add_fs_to_matrix(fs_dict, fs_filename): datarow = [fs_filename[10:13]+'_'] for k,v in sorted(features_map.items(), key=lambda kv: kv[1][1]): if k in fs_dict: # value = what the fs file has value = str.lower(str(fs_dict[k])) # enabled = what it should have to be active enabled = str.lower(str(v[0])) # get digits only from scenarioXXX in composable_scenario setting if k == 'composable_scenario': datarow.append(''.join([n for n in value if n.isdigit()])) # expects substr in extra_args e.g. 'ceph' elif k == 'extra_args' and enabled in value: datarow.append(symbol_map['enabled'][0]) # fields that expects exact value e.g. 'true' elif value == enabled: datarow.append(symbol_map['enabled'][0]) # expects a substr, transform it into a symbol elif value in enabled and value in symbol_map: datarow.append(symbol_map[value][0]) # enabled in certain releases elif value.startswith('{%') and 'release' in value: datarow.append(symbol_map['release'][0]) else: # feature is present but disabled e.g. 'false' datarow.append(symbol_map['disabled'][0]) # feature not found in fs file else: datarow.append(symbol_map['not-found'][0]) return datarow def acronyms_and_symbols(): at = Texttable() columns = ['Acronym','Definition'] for k,acr in sorted(features_map.items(), key=lambda kv: kv[1][1]): at.add_rows([columns, [acr[1], acr[2]]]) print(at.draw()+'\n') st = Texttable() columns = ['Symbol','Description'] for k, symdef in sorted(symbol_map.items(), key=lambda kv: kv[1][1]): st.add_rows([columns, [symdef[0], symdef[1]]]) print(st.draw()+'\n') ### load_fs() acronyms_and_symbols() ",,325,0
openstack%2Foslo.config~master~I4c4a2083d6578c625b948b1458412b832264f11e,openstack/oslo.config,master,I4c4a2083d6578c625b948b1458412b832264f11e,Blacklist sphinx 2.1.0 (autodoc bug),MERGED,2019-07-05 02:06:58.000000000,2019-08-08 19:29:22.000000000,2019-08-08 19:29:22.000000000,"[{'_account_id': 6928}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 26297}, {'_account_id': 27781}, {'_account_id': 28522}, {'_account_id': 28935}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-07-05 02:06:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.config/commit/bda29b53774a0adf8c8680425a699f384460dcdf', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\nDepend-On: https://review.opendev.org/#/c/663060/\n\nChange-Id: I4c4a2083d6578c625b948b1458412b832264f11e\n'}, {'number': 2, 'created': '2019-07-30 08:53:47.000000000', 'files': ['doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/oslo.config/commit/1d1067445994fc1b1fa4d30c14fe444102dd4dad', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\n\nChange-Id: I4c4a2083d6578c625b948b1458412b832264f11e\n'}]",1,669234,1d1067445994fc1b1fa4d30c14fe444102dd4dad,14,8,2,27822,,,0,"Blacklist sphinx 2.1.0 (autodoc bug)

See https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details

Change-Id: I4c4a2083d6578c625b948b1458412b832264f11e
",git fetch https://review.opendev.org/openstack/oslo.config refs/changes/34/669234/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/requirements.txt'],1,bda29b53774a0adf8c8680425a699f384460dcdf,sphinx,"sphinx!=1.6.6,!=1.6.7,!=2.1.0,>=1.6.2;python_version>='3.4' # BSD","sphinx!=1.6.6,!=1.6.7,>=1.6.2;python_version>='3.4' # BSD",1,1
openstack%2Ftripleo-ci~master~I0799fd3f6e89ac408d2987477f52f1952bc96686,openstack/tripleo-ci,master,I0799fd3f6e89ac408d2987477f52f1952bc96686,Move buildimages playbook tasks from config to tripleo,MERGED,2019-08-07 23:14:03.000000000,2019-08-08 19:21:45.000000000,2019-08-08 19:21:45.000000000,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24162}]","[{'number': 1, 'created': '2019-08-07 23:14:03.000000000', 'files': ['roles/oooci-build-images/tasks/main.yaml', 'roles/oooci-build-images/tasks/pre.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/f30dce2993d7b99a095ac120217e73c68bc8bd12', 'message': ""Move buildimages playbook tasks from config to tripleo\n\nTasks that are in config/ repo don't have any secrets and should\nbe in tripleoc-ci, because they should be used in check jobs too.\nRHEL-8 jobs fail because of lack of these tasks.\n\nChange-Id: I0799fd3f6e89ac408d2987477f52f1952bc96686\n""}]",7,675225,f30dce2993d7b99a095ac120217e73c68bc8bd12,13,7,1,10969,,,0,"Move buildimages playbook tasks from config to tripleo

Tasks that are in config/ repo don't have any secrets and should
be in tripleoc-ci, because they should be used in check jobs too.
RHEL-8 jobs fail because of lack of these tasks.

Change-Id: I0799fd3f6e89ac408d2987477f52f1952bc96686
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/25/675225/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/oooci-build-images/tasks/main.yaml', 'roles/oooci-build-images/tasks/pre.yaml']",2,f30dce2993d7b99a095ac120217e73c68bc8bd12,buuldimg,"- when: rhel_image_source is defined block: - name: Set dib_local_image and other facts used by tripleo-ci build-image role build template set_fact: dib_local_image: ""{{ workspace }}/{{ rhel_image_source | urlsplit('path') | basename }}"" dib_node_dist: ""rhel"" dib_release: ""8"" dib_yum_repo_conf: "" /etc/yum.repos.d/delorean.repo /etc/yum.repos.d/osp15-deps.repo /etc/yum.repos.d/rh-cloud.repo "" cacheable: true - name: Download rhel source image get_url: url: ""{{ rhel_image_source }}"" dest: ""{{ dib_local_image }}"" ",,64,0
openstack%2Ftripleo-docs~master~Ifb9a9edf699aa3b01584c6628c459b9d38edea2a,openstack/tripleo-docs,master,Ifb9a9edf699aa3b01584c6628c459b9d38edea2a,Add step to DCN doc to include oslo_messaging passwords,ABANDONED,2019-08-08 15:59:03.000000000,2019-08-08 19:17:19.000000000,,"[{'_account_id': 7144}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 15:59:03.000000000', 'files': ['doc/source/install/advanced_deployment/distributed_compute_node.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-docs/commit/f47e8f89cc3893e52f547d484777f56222833ea9', 'message': 'Add step to DCN doc to include oslo_messaging passwords\n\nWithout this missing step I run into this error:\n\n""puppet-user: Error: Function lookup() did not find a\n value for the name \'oslo_messaging_rpc_password\'""\n\nChange-Id: Ifb9a9edf699aa3b01584c6628c459b9d38edea2a\n'}]",0,675392,f47e8f89cc3893e52f547d484777f56222833ea9,3,2,1,18002,,,0,"Add step to DCN doc to include oslo_messaging passwords

Without this missing step I run into this error:

""puppet-user: Error: Function lookup() did not find a
 value for the name 'oslo_messaging_rpc_password'""

Change-Id: Ifb9a9edf699aa3b01584c6628c459b9d38edea2a
",git fetch https://review.opendev.org/openstack/tripleo-docs refs/changes/92/675392/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/install/advanced_deployment/distributed_compute_node.rst'],1,f47e8f89cc3893e52f547d484777f56222833ea9,missing_oslo_password,"Create an environment file, e.g. oslo.yaml, for setting necessary oslo messaging configuration overrides:Update the file with the oslo messaging rpc and notify passwords: .. code-block:: yaml parameter_defaults: ComputeExtraConfig: oslo_messaging_notify_use_ssl: false oslo_messaging_rpc_use_ssl: false oslo_messaging_rpc_password: <password> oslo_messaging_notify_password: <password> To get the oslo passwords above run the following command on the undercloud: .. code-block:: bash sudo cat /etc/puppet/hieradata/service_configs.json | jq . | egrep ""oslo.*password"" ",Create an environment file for setting necessary oslo messaging configuration overrides:,19,2
openstack%2Fplacement~master~If9e6693da9ea09966b4282369cd99516658507b6,openstack/placement,master,If9e6693da9ea09966b4282369cd99516658507b6,Use another expanding bindparam in _get_usages_by_provider_trees,MERGED,2019-08-08 10:30:56.000000000,2019-08-08 18:59:58.000000000,2019-08-08 18:59:58.000000000,"[{'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 22348}, {'_account_id': 25625}]","[{'number': 1, 'created': '2019-08-08 10:30:56.000000000', 'files': ['placement/objects/research_context.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/f69f584577eedf07b45862d65fce2c7217634b8f', 'message': 'Use another expanding bindparam in _get_usages_by_provider_trees\n\nWe had already [1] changed one in_ in _get_usages_by_provider_trees to\nbe an expanding bindparam. This changes the other based on new profiling\nresults. The same value is used for the param.\n\n[1] I121e5ac6e8202467bf72d9de7ac452d5b5804da1h\n\nChange-Id: If9e6693da9ea09966b4282369cd99516658507b6\n'}]",4,675287,f69f584577eedf07b45862d65fce2c7217634b8f,8,4,1,11564,,,0,"Use another expanding bindparam in _get_usages_by_provider_trees

We had already [1] changed one in_ in _get_usages_by_provider_trees to
be an expanding bindparam. This changes the other based on new profiling
results. The same value is used for the param.

[1] I121e5ac6e8202467bf72d9de7ac452d5b5804da1h

Change-Id: If9e6693da9ea09966b4282369cd99516658507b6
",git fetch https://review.opendev.org/openstack/placement refs/changes/87/675287/1 && git format-patch -1 --stdout FETCH_HEAD,['placement/objects/research_context.py'],1,f69f584577eedf07b45862d65fce2c7217634b8f,cd/usages-bindparam," _RP_TBL.c.root_provider_id.in_(sa.bindparam( 'root_ids', expanding=True)))", _RP_TBL.c.root_provider_id.in_(root_ids)),2,1
openstack%2Fplacement~master~Ief3e86ca0d722035809115818d38fb14a89a7a39,openstack/placement,master,Ief3e86ca0d722035809115818d38fb14a89a7a39,Move provider_ids_from_rp_ids to allocation_candidate and fix,MERGED,2019-08-07 10:34:02.000000000,2019-08-08 18:59:17.000000000,2019-08-08 18:59:17.000000000,"[{'_account_id': 9708}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 22348}, {'_account_id': 25625}]","[{'number': 1, 'created': '2019-08-07 10:34:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/b6ccfb6ecbd05218ea7718043df394d0011c05c5', 'message': 'Move provider_ids_from_rp_ids to allocation_candidate\n\nRight now the only consumer of provider_ids_from_rp_ids is\n_build_summaries, which is private to allocation_candidates.\n\nSince provider_ids_from_rp_ids has evolved to have a fairly\nspecific behavior, with some tricky considerations for how\nit is used, this patch moves it to allocation_candidate.py\nand makes it private to make it a bit more clear that it is\nspecial.\n\nIf/when it gains more uses we can reconsider.\n\nChange-Id: Ief3e86ca0d722035809115818d38fb14a89a7a39\n'}, {'number': 2, 'created': '2019-08-07 13:10:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/34723302b8516d4beeab574f463acc496cd70fbd', 'message': 'Move provider_ids_from_rp_ids to allocation_candidate\n\nRight now the only consumer of provider_ids_from_rp_ids is\n_build_summaries, which is private to allocation_candidates.\n\nSince provider_ids_from_rp_ids has evolved to have a fairly\nspecific behavior, with some tricky considerations for how\nit is used, this patch moves it to allocation_candidate.py\nand makes it private to make it a bit more clear that it is\nspecial.\n\nIf/when it gains more uses we can reconsider.\n\nChange-Id: Ief3e86ca0d722035809115818d38fb14a89a7a39\n'}, {'number': 3, 'created': '2019-08-07 22:53:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/6aea279785f362251fb9e0246d0c56293abb1490', 'message': 'Move provider_ids_from_rp_ids to allocation_candidate\n\nRight now the only consumer of provider_ids_from_rp_ids is\n_build_summaries, which is private to allocation_candidates.\n\nSince provider_ids_from_rp_ids has evolved to have a fairly\nspecific behavior, with some tricky considerations for how\nit is used, this patch moves it to allocation_candidate.py\nand makes it private to make it a bit more clear that it is\nspecial.\n\nIf/when it gains more uses we can reconsider.\n\nChange-Id: Ief3e86ca0d722035809115818d38fb14a89a7a39\n'}, {'number': 4, 'created': '2019-08-08 02:54:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/5c00ae6b8c6943afdc6f34c105e91ac7e3f898e8', 'message': 'Move provider_ids_from_rp_ids to allocation_candidate\n\nRight now the only consumer of provider_ids_from_rp_ids is\n_build_summaries, which is private to allocation_candidates.\n\nSince provider_ids_from_rp_ids has evolved to have a fairly\nspecific behavior, with some tricky considerations for how\nit is used, this patch moves it to allocation_candidate.py\nand makes it private to make it a bit more clear that it is\nspecial.\n\nIf/when it gains more uses we can reconsider.\n\nChange-Id: Ief3e86ca0d722035809115818d38fb14a89a7a39\n'}, {'number': 5, 'created': '2019-08-08 08:14:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/6c00561309e9b1d7a33d955b1f5289f6c7e13c53', 'message': 'Move provider_ids_from_rp_ids to allocation_candidate\n\nRight now the only consumer of provider_ids_from_rp_ids is\n_build_summaries, which is private to allocation_candidates.\n\nSince provider_ids_from_rp_ids has evolved to have a fairly\nspecific behavior, with some tricky considerations for how\nit is used, this patch moves it to allocation_candidate.py\nand makes it private to make it a bit more clear that it is\nspecial.\n\nIf/when it gains more uses we can reconsider.\n\nChange-Id: Ief3e86ca0d722035809115818d38fb14a89a7a39\n'}, {'number': 6, 'created': '2019-08-08 09:29:33.000000000', 'files': ['placement/objects/research_context.py', 'placement/objects/allocation_candidate.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/6de94f98e54343ee8619cb51b3e1d949fc1a4cc5', 'message': 'Move provider_ids_from_rp_ids to allocation_candidate and fix\n\nRight now the only consumer of provider_ids_from_rp_ids is\n_build_summaries, which is private to allocation_candidates.\n\nSince provider_ids_from_rp_ids has evolved to have a fairly\nspecific behavior, with some tricky considerations for how\nit is used, this patch moves it to allocation_candidate.py\nand makes it private to make it a bit more clear that it is\nspecial.\n\nIf/when it gains more uses we can reconsider.\n\nThis change also returns the expanding bindparam functionality\nadded in [1] and removed in [2] as part of a rebasing mistake.\nSee above about ""tricky"".\n\n[1] Ic4e0cdd87f8f2d76b921059ac4bf16a838913abf\n[2] If937053a8af3f0eecdd90aa807be0abc316d8c4f\n\nChange-Id: Ief3e86ca0d722035809115818d38fb14a89a7a39\n'}]",1,675084,6de94f98e54343ee8619cb51b3e1d949fc1a4cc5,26,5,6,11564,,,0,"Move provider_ids_from_rp_ids to allocation_candidate and fix

Right now the only consumer of provider_ids_from_rp_ids is
_build_summaries, which is private to allocation_candidates.

Since provider_ids_from_rp_ids has evolved to have a fairly
specific behavior, with some tricky considerations for how
it is used, this patch moves it to allocation_candidate.py
and makes it private to make it a bit more clear that it is
special.

If/when it gains more uses we can reconsider.

This change also returns the expanding bindparam functionality
added in [1] and removed in [2] as part of a rebasing mistake.
See above about ""tricky"".

[1] Ic4e0cdd87f8f2d76b921059ac4bf16a838913abf
[2] If937053a8af3f0eecdd90aa807be0abc316d8c4f

Change-Id: Ief3e86ca0d722035809115818d38fb14a89a7a39
",git fetch https://review.opendev.org/openstack/placement refs/changes/84/675084/6 && git format-patch -1 --stdout FETCH_HEAD,"['placement/objects/research_context.py', 'placement/objects/allocation_candidate.py']",2,b6ccfb6ecbd05218ea7718043df394d0011c05c5,cd/de-tuple," provider_ids = _provider_ids_from_rp_ids(context, rp_ids) def _provider_ids_from_rp_ids(context, rp_ids): """"""Given an iterable of internal resource provider IDs, returns a dict, keyed by internal provider Id, of sqla objects describing those providers. :param rp_ids: iterable of internal provider IDs to look up :returns: dict, keyed by internal provider Id, of sqla objects with the following attributes: id: resource provider internal id uuid: resource provider uuid parent_id: internal id of the resource provider's parent provider (None if there is no parent) root_id: internal id of the resource providers's root provider """""" # SELECT # rp.id, rp.uuid, rp.parent_provider_id, rp.root_provider.id # FROM resource_providers AS rp # WHERE rp.id IN ($rp_ids) me = sa.alias(_RP_TBL, name=""me"") cols = [ me.c.id, me.c.uuid, me.c.parent_provider_id.label('parent_id'), me.c.root_provider_id.label('root_id'), ] sel = sa.select(cols).where(me.c.id.in_(rp_ids)) ret = {} for r in context.session.execute(sel, {'rps': list(rp_ids)}): ret[r['id']] = r return ret"," provider_ids = res_ctx.provider_ids_from_rp_ids(context, rp_ids)",34,34
openstack%2Ftripleo-heat-templates~stable%2Frocky~I5e73660e23fef15d1cae4c89d8b45b2456b0a110,openstack/tripleo-heat-templates,stable/rocky,I5e73660e23fef15d1cae4c89d8b45b2456b0a110,Enable rabbitmq_management plugin,MERGED,2019-08-07 08:34:29.000000000,2019-08-08 18:44:57.000000000,2019-08-08 18:44:57.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-07 08:34:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/dca80d01e29d0f978d82b95439d804bd588a30b2', 'message': 'Enable rabbitmq_management plugin\n\nEnable the RabbitMQ managment plugin. RabbitMQ managment\nwill listen on localhost (127.0.0.1) only.\n\nNOTE: This depend on this upstream change:\n  https://github.com/voxpupuli/puppet-rabbitmq/pull/777\n\nAlso to optimize for performance:\n - Disables message rates in the management plugin.\n - Raises the collect_statistics_interval from 5000ms to\n   30000ms.\n\nNB: Cherry-pick was not clean\n\nRelated-Bug: #1815675\nChange-Id: I5e73660e23fef15d1cae4c89d8b45b2456b0a110\n(cherry-picked from commit d6727aff73276446f34dde4de724984bc381fa3f\n'}, {'number': 2, 'created': '2019-08-08 09:14:40.000000000', 'files': ['releasenotes/notes/rabbitmq-enable-management-plugin-94b27747e4f5e685.yaml', 'puppet/services/rabbitmq.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/04b83ec504391b0dac0fbc38b8168c160c3399e0', 'message': 'Enable rabbitmq_management plugin\n\nEnable the RabbitMQ managment plugin. RabbitMQ managment\nwill listen on localhost (127.0.0.1) only.\n\nNOTE: This depend on this upstream change:\n  https://github.com/voxpupuli/puppet-rabbitmq/pull/777\n\nAlso to optimize for performance:\n - Disables message rates in the management plugin.\n - Raises the collect_statistics_interval from 5000ms to\n   30000ms.\n\nNB: Cherry-pick was not clean so I tested this manually on queens\nand got the expected result:\n~]# pcs status |grep -e \'rabbitmq.*Started\'\n  rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started controller-0\n  rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started controller-1\n  rabbitmq-bundle-2    (ocf::heartbeat:rabbitmq-cluster):      Started controller-2\n\n~]# curl -sS  -u guest:$(hiera -c /etc/puppet/hiera.yaml rabbitmq::default_pass) http://127.0.0.1:15672/api/queues/ 2> /dev/null  |jq . |head -n5\n[\n  {\n    ""memory"": 10936,\n    ""idle_since"": ""2019-08-08 8:49:23"",\n    ""consumer_utilisation"": null,\n\nRelated-Bug: #1815675\nChange-Id: I5e73660e23fef15d1cae4c89d8b45b2456b0a110\n(cherry-picked from commit d6727aff73276446f34dde4de724984bc381fa3f\n'}]",0,675057,04b83ec504391b0dac0fbc38b8168c160c3399e0,13,5,2,20172,,,0,"Enable rabbitmq_management plugin

Enable the RabbitMQ managment plugin. RabbitMQ managment
will listen on localhost (127.0.0.1) only.

NOTE: This depend on this upstream change:
  https://github.com/voxpupuli/puppet-rabbitmq/pull/777

Also to optimize for performance:
 - Disables message rates in the management plugin.
 - Raises the collect_statistics_interval from 5000ms to
   30000ms.

NB: Cherry-pick was not clean so I tested this manually on queens
and got the expected result:
~]# pcs status |grep -e 'rabbitmq.*Started'
  rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started controller-0
  rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started controller-1
  rabbitmq-bundle-2    (ocf::heartbeat:rabbitmq-cluster):      Started controller-2

~]# curl -sS  -u guest:$(hiera -c /etc/puppet/hiera.yaml rabbitmq::default_pass) http://127.0.0.1:15672/api/queues/ 2> /dev/null  |jq . |head -n5
[
  {
    ""memory"": 10936,
    ""idle_since"": ""2019-08-08 8:49:23"",
    ""consumer_utilisation"": null,

Related-Bug: #1815675
Change-Id: I5e73660e23fef15d1cae4c89d8b45b2456b0a110
(cherry-picked from commit d6727aff73276446f34dde4de724984bc381fa3f
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/57/675057/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/rabbitmq-enable-management-plugin-94b27747e4f5e685.yaml', 'puppet/services/rabbitmq.yaml']",2,dca80d01e29d0f978d82b95439d804bd588a30b2,mgmt_plugin, rabbitmq::collect_statistics_interval: 30000 rabbitmq::management_enable: true rabbitmq::use_config_file_for_plugins: true rabbitmq::management_ip_address: 127.0.0.1 rabbitmq::config_management_variables: rates_mode: none,,12,0
openstack%2Ftripleo-validations~master~I66b796fab1d8651163226febbc4e99648a9ecc6a,openstack/tripleo-validations,master,I66b796fab1d8651163226febbc4e99648a9ecc6a,Linting hardening with pre-commit,MERGED,2019-07-26 15:28:52.000000000,2019-08-08 18:44:56.000000000,2019-08-08 18:44:56.000000000,"[{'_account_id': 7353}, {'_account_id': 8175}, {'_account_id': 11491}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 25402}, {'_account_id': 25877}, {'_account_id': 26343}, {'_account_id': 28223}]","[{'number': 1, 'created': '2019-07-26 15:28:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/1a71ea8772b032d691bb46e3b9737fc745fccb8e', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 2, 'created': '2019-07-26 15:33:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/e6adfb66ec58fb7f76ecd20b70014a2abc7d016d', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 3, 'created': '2019-07-28 13:35:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/364dab87298bc7bd52bc3933fbf9da3adf40a328', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 4, 'created': '2019-07-28 14:09:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/6906ab9acda2ed525b3d59e4fde913cb9d6b7ed8', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 5, 'created': '2019-07-29 10:24:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/b4ef818e8e1677eee4cc1fbf8d5e57dd2ce43cc3', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 6, 'created': '2019-07-29 10:39:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/9990a44a6b37a6ea558c87ef0afa7d7659eaeadb', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 7, 'created': '2019-07-29 11:18:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/6adf9d4b43375d51aa1749f152d1d74bdba587d8', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 8, 'created': '2019-07-29 11:21:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/c76bd3ae08a73784febb52a2ee3e9c3cdb14fc34', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 9, 'created': '2019-07-29 11:23:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/83f1af18edcecdeca9b55b6351e04495653b357f', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 10, 'created': '2019-07-29 11:36:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/4d0faf1758d3cff37aad9189f708598645e4f749', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 11, 'created': '2019-07-29 12:27:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/93dc986bfde50882f540149ebe9f93ff60886c0f', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 12, 'created': '2019-07-29 13:07:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/11253738201b9da889274ba6348886c4372a0c97', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 13, 'created': '2019-07-29 13:09:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/f7fa05a2d664ab4f22a778074151a07cdcf9b4cb', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 14, 'created': '2019-07-30 09:47:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/623e63ada9816d3c66d96f21e010312faf524b2c', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 15, 'created': '2019-07-30 12:15:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/83267a17de5d9730f375f6af747a4d91b4073ff7', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 16, 'created': '2019-07-30 14:01:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/f40f43904239332add62cd45d86e6bdc35c4a62e', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 17, 'created': '2019-07-31 10:09:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/49eaf9276b9940f44e2751c82e30bb16ab907979', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 18, 'created': '2019-07-31 14:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/4e14d5895f11e8b018ec718aa240f8fc88b1854c', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 19, 'created': '2019-07-31 14:57:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/45e97e29d053c30f6384e5c68b2021170b8a9a64', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 20, 'created': '2019-07-31 15:48:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/764c94033d79a13d5777d4047e55ee69df47e39c', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 21, 'created': '2019-08-02 10:35:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/d8eeb370130cc78a0b92ab1c68def79f5a4e2981', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 22, 'created': '2019-08-02 14:16:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/2763412cbf048f2df9f821bbca84dd96e1affbd4', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 23, 'created': '2019-08-06 07:35:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/b3b7a6e85ed993271b868857c885e034f784e2ca', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 24, 'created': '2019-08-06 10:52:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/cb3e83e1081024fb7f3814c09eb6824e7701eb2f', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 25, 'created': '2019-08-06 12:18:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/5c538c5b7be9f78bae754df3e4d44d0af0b26786', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 26, 'created': '2019-08-06 13:21:43.000000000', 'files': ['playbooks/stack-health.yaml', 'playbooks/nova-status.yaml', 'test-requirements.txt', 'doc/source/roles/role-check-latest-minor-version.rst', 'playbooks/openshift-nw-requirements.yaml', '.pre-commit-config.yaml', 'bindep.txt', 'library/haproxy_conf.py', 'tools/validate-files.py', 'releasenotes/notes/ip-range-validation-result-daddc8c015dd34c0.yaml', 'doc/source/roles/role-check-latest-packages-version.rst', 'zuul.d/layout.yaml', 'roles/openshift-on-openstack/tasks/openshift-hw-requirements.yaml', 'library/check_ironic_boot_config.py', 'playbooks/openshift-hw-requirements.yaml', 'library/docker_facts.py', 'roles/tls-everywhere/tasks/pre-deployment-containerized.yaml', 'doc/source/conf.py', 'doc/source/_exts/generate_validations_doc.py', 'molecule-requirements.txt', 'doc/source/index.rst', 'tools/releasenotes_tox.sh', 'library/ini.py', 'lookup_plugins/nova_servers.py', 'doc/requirements.txt', 'doc/source/readme.rst', 'lookup_plugins/ironic_nodes.py', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/cac3e7101d89c743ce2593141b9da4735be2fd33', 'message': 'Linting hardening with pre-commit\n\n- Adds bashate test using v0.6.0\n- Bump pre-commit-hooks release to v2.2.4\n- Bump ansible-lint release to v4.1.0a0\n- Fix some minor flake8 errors\n\nChange-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}]",1,673007,cac3e7101d89c743ce2593141b9da4735be2fd33,61,9,26,11491,,,0,"Linting hardening with pre-commit

- Adds bashate test using v0.6.0
- Bump pre-commit-hooks release to v2.2.4
- Bump ansible-lint release to v4.1.0a0
- Fix some minor flake8 errors

Change-Id: I66b796fab1d8651163226febbc4e99648a9ecc6a
Signed-off-by: Gael Chamoulaud <gchamoul@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/07/673007/26 && git format-patch -1 --stdout FETCH_HEAD,"['library/check_ironic_boot_config.py', 'playbooks/openshift-hw-requirements.yaml', 'library/docker_facts.py', 'test-requirements.txt', 'doc/source/conf.py', 'doc/source/_exts/generate_validations_doc.py', 'playbooks/openshift-nw-requirements.yaml', '.pre-commit-config.yaml', 'molecule-requirements.txt', 'tools/releasenotes_tox.sh', 'library/haproxy_conf.py', 'tools/validate-files.py', 'library/ini.py', 'lookup_plugins/nova_servers.py', 'releasenotes/notes/ip-range-validation-result-daddc8c015dd34c0.yaml', 'lookup_plugins/ironic_nodes.py', 'tox.ini', 'roles/openshift-on-openstack/tasks/openshift-hw-requirements.yaml']",18,1a71ea8772b032d691bb46e3b9737fc745fccb8e,bp/validation-framework-infra,"- name: Fail if minimum requirements are not met fail: msg: ""{{ warning_msg }}""- name: Warn if production requirements are not met warn: msg: ""{{ warning_msg }}""","- name: Fail if minimum requirements aren't met fail: msg=""{{ warning_msg }}""- name: Warn if production requirements aren't met warn: msg=""{{ warning_msg }}""",184,77
openstack%2Fcharm-deployment-guide~master~I373eb238f10ab31ee43fdea251747393bc95b44b,openstack/charm-deployment-guide,master,I373eb238f10ab31ee43fdea251747393bc95b44b,clarify data-port for neutron,MERGED,2019-08-07 21:40:49.000000000,2019-08-08 18:40:10.000000000,2019-08-08 18:40:10.000000000,"[{'_account_id': 20635}, {'_account_id': 20805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-07 21:40:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-deployment-guide/commit/972ba3f049f3e6373e2601551f41e63021e17c20', 'message': 'clarify data-port for neutron\n\nIt is odd to have the user configure all MAAS nodes in this way but the\nalternative was to be invasive in terms of changes, which would result in a\nhigh risk of breakage later on. This entire guide will be revisited and\nreviewed at a later date.\n\nChange-Id: I373eb238f10ab31ee43fdea251747393bc95b44b\n'}, {'number': 2, 'created': '2019-08-08 02:53:34.000000000', 'files': ['deploy-guide/source/install-maas.rst', 'deploy-guide/source/install-openstack.rst'], 'web_link': 'https://opendev.org/openstack/charm-deployment-guide/commit/1b9afc876a9e24a17e65f36b10fd73c4c6836c72', 'message': ""clarify data-port for neutron\n\nUpdate metadata.yaml snippet for neutron-gateway.\n\nAdd 'NICs' column to a table on the install-maas page.\n\nClarify what 'data-port' is and how to configure all MAAS nodes so that\nan unused network interface is left in the 'Unconfigured' state.\n\nIt is odd to have the user do this but the alternative was to be invasive in\nterms of changes, which would result in a high risk of breakage later on. This\nentire guide will be revisited and reviewed at a later date.\n\nCloses-Bug: #1833625\n\nChange-Id: I373eb238f10ab31ee43fdea251747393bc95b44b\n""}]",1,675208,1b9afc876a9e24a17e65f36b10fd73c4c6836c72,10,3,2,30561,,,0,"clarify data-port for neutron

Update metadata.yaml snippet for neutron-gateway.

Add 'NICs' column to a table on the install-maas page.

Clarify what 'data-port' is and how to configure all MAAS nodes so that
an unused network interface is left in the 'Unconfigured' state.

It is odd to have the user do this but the alternative was to be invasive in
terms of changes, which would result in a high risk of breakage later on. This
entire guide will be revisited and reviewed at a later date.

Closes-Bug: #1833625

Change-Id: I373eb238f10ab31ee43fdea251747393bc95b44b
",git fetch https://review.opendev.org/openstack/charm-deployment-guide refs/changes/08/675208/2 && git format-patch -1 --stdout FETCH_HEAD,"['deploy-guide/source/install-maas.rst', 'deploy-guide/source/install-openstack.rst']",2,972ba3f049f3e6373e2601551f41e63021e17c20,bug/1833625, data-port: br-ex:eth1The ``data-port`` refers to a network interface that Neutron Gateway will bind to. In the above example it is ``eth1`` and it should be an unused interface. In the MAAS web UI the subnet of this interface must be given a value of 'Unconfigured'. Set all four nodes in this way to ensure that any node is able to accommodate Neutron. Deploy neutron-gateway on machine 0 now:," ext-port: 'eth1'First, deploy the gateway:",21,15
openstack%2Fkuryr-kubernetes~master~I6af8eb8790f0bdafa5ffcaa4465b9cad6bfec50f,openstack/kuryr-kubernetes,master,I6af8eb8790f0bdafa5ffcaa4465b9cad6bfec50f,Add PodResources gRPC API updating guide,MERGED,2019-08-01 11:27:16.000000000,2019-08-08 18:19:26.000000000,2019-08-08 18:19:26.000000000,"[{'_account_id': 11600}, {'_account_id': 22348}, {'_account_id': 23567}, {'_account_id': 24604}, {'_account_id': 25900}, {'_account_id': 28396}, {'_account_id': 30247}]","[{'number': 1, 'created': '2019-08-01 11:27:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/8b30e5a78144b22106beb423272805cf4f9ce68b', 'message': 'Add PodResources gRPC API updating guide\n\nChange-Id: I6af8eb8790f0bdafa5ffcaa4465b9cad6bfec50f\nSigned-off-by: Ilya Maximets <i.maximets@samsung.com>\n'}, {'number': 2, 'created': '2019-08-02 14:51:13.000000000', 'files': ['doc/source/devref/updating_pod_resources_api.rst', 'doc/source/devref/index.rst', 'contrib/regenerate_pod_resources_api.sh', 'kuryr_kubernetes/pod_resources/api.proto'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/8442d47f5ac7d927bc0e7282159056ea11e752b1', 'message': 'Add PodResources gRPC API updating guide\n\nChange-Id: I6af8eb8790f0bdafa5ffcaa4465b9cad6bfec50f\nSigned-off-by: Ilya Maximets <i.maximets@samsung.com>\n'}]",3,674008,8442d47f5ac7d927bc0e7282159056ea11e752b1,14,7,2,30247,,,0,"Add PodResources gRPC API updating guide

Change-Id: I6af8eb8790f0bdafa5ffcaa4465b9cad6bfec50f
Signed-off-by: Ilya Maximets <i.maximets@samsung.com>
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/08/674008/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/devref/updating_pod_resources_api.rst', 'doc/source/devref/index.rst', 'kuryr_kubernetes/pod_resources/api.proto']",3,8b30e5a78144b22106beb423272805cf4f9ce68b,,"// To regenerate api.proto, api_pb2.py and api_pb2_grpc.py follow instructions // from doc/source/devref/updating_pod_resources_api.rst.",// by removing the 'gogoproto' dependencies. // To regenerate api_pb2.py and api_pb2_grpc.py use: // python -m grpc_tools.protoc -I./ --python_out=. --grpc_python_out=. kuryr_kubernetes/pod_resources/api.proto // // Important: Version of 'protoc' compiler should be equal to 'protobuf' // version specified in lower-constraints.txt. // Check: 'python -m grpc_tools.protoc --version'.,89,7
openstack%2Fkayobe~stable%2Fqueens~I104d6af48ddd916460ee454e17a50a2475de6bff,openstack/kayobe,stable/queens,I104d6af48ddd916460ee454e17a50a2475de6bff,Ignore --limit for localhost plays,MERGED,2019-08-04 14:06:22.000000000,2019-08-08 18:16:07.000000000,2019-08-08 18:16:07.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2019-08-04 14:06:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/794425b758a46819dd3b037f4a154d92f863c81d', 'message': ""Ignore --limit for localhost plays\n\nIf using the kayobe --limit <hosts> argument, only those hosts matching\nthe limit will have an inventory generated for Kolla Ansible. This can\ncause problems for Kolla Ansible, even when using a similar limit via\n--kolla-limit <hosts>, since it gathers facts for all hosts, and expects\nall host variables to be defined.\n\nThis change adds a new 'ignore_limit' argument to the playbook running\nmethods, which allows us to override and ignore the --limit argument\nprovided by the user, ensuring that we always run these plays.\n\nConflicts:\n\tkayobe/cli/commands.py\n\tkayobe/tests/unit/cli/test_commands.py\n\nChange-Id: I104d6af48ddd916460ee454e17a50a2475de6bff\nStory: 2004805\nTask: 28960\n(cherry picked from commit 0b4b6cb79deb96f5cd4ada4212037032e0f79e00)\n""}, {'number': 2, 'created': '2019-08-08 08:42:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c7e5181da2a9f5f03545db7069373c3cd5ce71a6', 'message': ""Ignore --limit for localhost plays\n\nIf using the kayobe --limit <hosts> argument, only those hosts matching\nthe limit will have an inventory generated for Kolla Ansible. This can\ncause problems for Kolla Ansible, even when using a similar limit via\n--kolla-limit <hosts>, since it gathers facts for all hosts, and expects\nall host variables to be defined.\n\nThis change adds a new 'ignore_limit' argument to the playbook running\nmethods, which allows us to override and ignore the --limit argument\nprovided by the user, ensuring that we always run these plays.\n\nConflicts:\n\tkayobe/cli/commands.py\n\tkayobe/tests/unit/cli/test_commands.py\n\nChange-Id: I104d6af48ddd916460ee454e17a50a2475de6bff\nStory: 2004805\nTask: 28960\n(cherry picked from commit 0b4b6cb79deb96f5cd4ada4212037032e0f79e00)\n""}, {'number': 3, 'created': '2019-08-08 10:12:20.000000000', 'files': ['kayobe/tests/unit/cli/test_commands.py', 'kayobe/ansible.py', 'kayobe/tests/unit/test_ansible.py', 'kayobe/cli/commands.py'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/2b5078b656859f906183cb295f274d78e3700e95', 'message': ""Ignore --limit for localhost plays\n\nIf using the kayobe --limit <hosts> argument, only those hosts matching\nthe limit will have an inventory generated for Kolla Ansible. This can\ncause problems for Kolla Ansible, even when using a similar limit via\n--kolla-limit <hosts>, since it gathers facts for all hosts, and expects\nall host variables to be defined.\n\nThis change adds a new 'ignore_limit' argument to the playbook running\nmethods, which allows us to override and ignore the --limit argument\nprovided by the user, ensuring that we always run these plays.\n\nConflicts:\n\tkayobe/cli/commands.py\n\tkayobe/tests/unit/cli/test_commands.py\n\nChange-Id: I104d6af48ddd916460ee454e17a50a2475de6bff\nStory: 2004805\nTask: 28960\n(cherry picked from commit 0b4b6cb79deb96f5cd4ada4212037032e0f79e00)\n""}]",0,674493,2b5078b656859f906183cb295f274d78e3700e95,19,3,3,15197,,,0,"Ignore --limit for localhost plays

If using the kayobe --limit <hosts> argument, only those hosts matching
the limit will have an inventory generated for Kolla Ansible. This can
cause problems for Kolla Ansible, even when using a similar limit via
--kolla-limit <hosts>, since it gathers facts for all hosts, and expects
all host variables to be defined.

This change adds a new 'ignore_limit' argument to the playbook running
methods, which allows us to override and ignore the --limit argument
provided by the user, ensuring that we always run these plays.

Conflicts:
	kayobe/cli/commands.py
	kayobe/tests/unit/cli/test_commands.py

Change-Id: I104d6af48ddd916460ee454e17a50a2475de6bff
Story: 2004805
Task: 28960
(cherry picked from commit 0b4b6cb79deb96f5cd4ada4212037032e0f79e00)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/93/674493/2 && git format-patch -1 --stdout FETCH_HEAD,"['kayobe/tests/unit/cli/test_commands.py', 'kayobe/ansible.py', 'kayobe/tests/unit/test_ansible.py', 'kayobe/cli/commands.py']",4,794425b758a46819dd3b037f4a154d92f863c81d,story/2004805-stable/queens," def run_kayobe_playbooks(self, parsed_args, *args, **kwargs): return ansible.run_playbooks(parsed_args, *args, **kwargs) def run_kayobe_playbook(self, parsed_args, *args, **kwargs): return ansible.run_playbook(parsed_args, *args, **kwargs) def run_kayobe_config_dump(self, parsed_args, *args, **kwargs): return ansible.config_dump(parsed_args, *args, **kwargs) def generate_kolla_ansible_config(self, parsed_args, install=False, service_config=True, bifrost_config=False): """"""Generate configuration for kolla-ansible. :param install: If True, also install kolla-ansible. :param service_config: If True, generate service configuration. :param bifrost_config: If True, generate bifrost configuration. """""" # We use ignore_limit here because all of these plays execute against # localhost, and are typically necessary for kolla-ansible to function # correctly. Previously a number of people were caught out by using # --limit and having these plays skipped. tags = None if install else ""config"" playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=tags, ignore_limit=True) if service_config: playbooks = _build_playbook_list(""kolla-openstack"") self.run_kayobe_playbooks(parsed_args, playbooks, ignore_limit=True) if bifrost_config: playbooks = _build_playbook_list(""kolla-bifrost"") self.run_kayobe_playbooks(parsed_args, playbooks, ignore_limit=True) self.run_kayobe_playbooks(parsed_args, playbooks, ignore_limit=True) self.run_kayobe_playbooks(parsed_args, playbooks, tags=""install"", ignore_limit=True) self.run_kayobe_playbooks(parsed_args, playbooks, ignore_limit=True) self.run_kayobe_playbooks(parsed_args, playbooks, tags=""install"", ignore_limit=True) self.generate_kolla_ansible_config(parsed_args, service_config=False) self.generate_kolla_ansible_config(parsed_args, service_config=False) self.generate_kolla_ansible_config(parsed_args, service_config=False, bifrost_config=True) self.generate_kolla_ansible_config(parsed_args, service_config=False, bifrost_config=True) self.generate_kolla_ansible_config(parsed_args, service_config=False) self.generate_kolla_ansible_config(parsed_args, service_config=False) self.generate_kolla_ansible_config(parsed_args) playbooks = _build_playbook_list(""swift-setup"") self.generate_kolla_ansible_config(parsed_args) playbooks = _build_playbook_list(""swift-setup"") self.run_kayobe_playbooks(parsed_args, playbooks, ignore_limit=True) self.generate_kolla_ansible_config(parsed_args) playbooks = _build_playbook_list(""swift-setup"") self.run_kayobe_playbooks(parsed_args, playbooks, ignore_limit=True) self.generate_kolla_ansible_config(parsed_args, install=True) self.generate_kolla_ansible_config(parsed_args) self.generate_kolla_ansible_config(parsed_args, service_config=False)"," def run_kayobe_playbooks(self, *args, **kwargs): return ansible.run_playbooks(*args, **kwargs) def run_kayobe_playbook(self, *args, **kwargs): return ansible.run_playbook(*args, **kwargs) def run_kayobe_config_dump(self, *args, **kwargs): return ansible.config_dump(*args, **kwargs) self.run_kayobe_playbooks(parsed_args, playbooks) self.run_kayobe_playbooks(parsed_args, playbooks, tags=""install"") self.run_kayobe_playbooks(parsed_args, playbooks) self.run_kayobe_playbooks(parsed_args, playbooks, tags=""install"") self.run_kayobe_playbook(parsed_args, ""ansible/kolla-ansible.yml"", tags=""config"") playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") playbooks = _build_playbook_list(""kolla-bifrost"") self.run_kayobe_playbooks(parsed_args, playbooks) playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") ""kolla-bifrost"", self.run_kayobe_playbook(parsed_args, ""ansible/kolla-ansible.yml"", tags=""config"") playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") playbooks = _build_playbook_list(""kolla-openstack"", ""swift-setup"") playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") playbooks = _build_playbook_list(""kolla-openstack"", ""swift-setup"") self.run_kayobe_playbooks(parsed_args, playbooks) playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") playbooks = _build_playbook_list(""kolla-openstack"", ""swift-setup"") self.run_kayobe_playbooks(parsed_args, playbooks) playbooks = _build_playbook_list(""kolla-ansible"", ""kolla-openstack"") self.run_kayobe_playbooks(parsed_args, playbooks) playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"") playbooks = _build_playbook_list(""kolla-openstack"") self.run_kayobe_playbooks(parsed_args, playbooks) playbooks = _build_playbook_list(""kolla-ansible"") self.run_kayobe_playbooks(parsed_args, playbooks, tags=""config"")",108,54
openstack%2Foslo.messaging~master~I8fd1624834510f8dee81ab9342c708d726b8f827,openstack/oslo.messaging,master,I8fd1624834510f8dee81ab9342c708d726b8f827,Introduce RabbitMQ driver documentation,MERGED,2019-06-21 15:11:51.000000000,2019-08-08 18:13:19.000000000,2019-08-08 18:13:18.000000000,"[{'_account_id': 8770}, {'_account_id': 15334}, {'_account_id': 16006}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 29364}]","[{'number': 1, 'created': '2019-06-21 15:11:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/03d82f0fc3a3a1e86e6a07e203e79ca2ae522c6b', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 2, 'created': '2019-06-21 15:16:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/2240869b3224a2b11a9a6d37fcfe21045c539a00', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 3, 'created': '2019-06-21 15:34:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/1cff1cd8958016b346a75352f7069a56ed80444c', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nNot fully written, the main goal is to introduce\nmore clearly the heartbeat specifications in a first time,\nand also start to write some doc about rabbitmq.\n\nIn a second time we need to continue to write this doc\nby adding more content about producer/consumer, connection\nspecification, exchange policies, mandatory etc...\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 4, 'created': '2019-06-21 22:22:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/7ccd847b089e69c9f21e1ec526faffa6407110fb', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nNot fully written, the main goal is to introduce\nmore clearly the heartbeat specifications in a first time,\nand also start to write some doc about rabbitmq.\n\nIn a second time we need to continue to write this doc\nby adding more content about producer/consumer, connection\nspecification, exchange policies, mandatory etc...\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 5, 'created': '2019-06-22 09:25:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/c2bce665af9ddc5d8b34263a2462636b62d3fb31', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nNot fully written, the main goal is to introduce\nmore clearly the heartbeat specifications in a first time,\nand also start to write some doc about rabbitmq.\n\nIn a second time we need to continue to write this doc\nby adding more content about producer/consumer, connection\nspecification, exchange policies, mandatory etc...\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 6, 'created': '2019-06-22 13:21:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/f07368081e57f8af35d714860e9243f1d7b0af1c', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nNot fully written, the main goal is to introduce\nmore clearly the heartbeat specifications in a first time,\nand also start to write some doc about rabbitmq.\n\nIn a second time we need to continue to write this doc\nby adding more content about producer/consumer, connection\nspecification, exchange policies, mandatory etc...\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 7, 'created': '2019-06-24 09:30:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/775f61445c04620db53c1acd693e61d197876797', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nNot fully written, the main goal is to introduce\nmore clearly the heartbeat specifications in a first time,\nand also start to write some doc about rabbitmq.\n\nIn a second time we need to continue to write this doc\nby adding more content about producer/consumer, connection\nspecification, exchange policies, mandatory etc...\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 8, 'created': '2019-06-24 17:28:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/4a3d318438e9188f514a909e6f9959038fc71e54', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nDescribing:\n- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)\n- the heartbeat specification and the type of used threads\n- the driver options\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 9, 'created': '2019-06-25 18:13:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/e9d7543812895d74edd4165b9467cc95d3296dba', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nDescribing:\n- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)\n- the heartbeat specification and the type of used threads\n- the driver options\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 10, 'created': '2019-06-26 08:16:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/4c220b9b2a44e4d3f300c12c87e8add705e07aef', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nDescribing:\n- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)\n- the heartbeat specification and the type of used threads\n- the driver options\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 11, 'created': '2019-07-04 18:59:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/e16a1da6dd4c07c5b52e05c1b31b32ae2496ed1b', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nDescribing:\n- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)\n- the heartbeat specification and the type of used threads\n- the driver options\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 12, 'created': '2019-07-05 09:46:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/67499d5de8c74e218e9de4f1c934c4d049ce674e', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nDescribing:\n- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)\n- the heartbeat specification and the type of used threads\n- the driver options\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 13, 'created': '2019-07-05 15:26:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/0be2550cee7e8a2a8bb84133962d75bc58e8735c', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nDescribing:\n- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)\n- the heartbeat specification and the type of used threads\n- the driver options\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}, {'number': 14, 'created': '2019-08-08 16:00:19.000000000', 'files': ['doc/source/admin/index.rst', 'doc/source/admin/rabbit.rst'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/b56380654a4b695a8a27827621b185ee3991ce92', 'message': 'Introduce RabbitMQ driver documentation\n\nIntroduce a RabbitMQ driver documentation for admin.\n\nDescribing:\n- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)\n- the heartbeat specification and the type of used threads\n- the driver options\n\nChange-Id: I8fd1624834510f8dee81ab9342c708d726b8f827\n'}]",44,666863,b56380654a4b695a8a27827621b185ee3991ce92,48,6,14,28522,,,0,"Introduce RabbitMQ driver documentation

Introduce a RabbitMQ driver documentation for admin.

Describing:
- some RabbitMQ and AMQP specifications (exchanges, queues, routing-key)
- the heartbeat specification and the type of used threads
- the driver options

Change-Id: I8fd1624834510f8dee81ab9342c708d726b8f827
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/63/666863/13 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/rabbit.rst'],1,03d82f0fc3a3a1e86e6a07e203e79ca2ae522c6b,rabbitmq_driver_doc,"----------------------------- RabbitMq Driver Deployment Guide ----------------------------- ============ Introduction ============ The RabbitMq Driver is a messaging transport backend in *oslo.messaging*. The driver maps the base oslo.messaging capabilities for notification message exchange onto V3.8 of the RabbitMQ distributed message broker. More detail regarding the RabbitMQ server is available from the `RabbitMQ website`__. __ https://www.rabbitmq.com/ ======== Overview ======== The RabbitMq driver **only** supports use for sending and receiving *oslo.messaging* notifications. Communications between the driver and RabbitMQ server backend uses the `AMQP protocol`_ that defines all APIs to request messages from a message queue or to publishes messages to an exchange. The RabbitMQ driver integrates the kombu python client for full protocol support and utilizes the `Producer API` to publish notification messages and the `Consumer API`_ for notification listener subscriptions. The driver is able to work with a single instance of a RabbitMQ server or a clustered RabbitMQ server deployment. .. _AMQP protocol: https://www.rabbitmq.com/protocol.html .. _Consumer API: https://kombu.readthedocs.io/en/stable/userguide/consumers.html .. _Producer API: https://kombu.readthedocs.io/en/stable/userguide/producers.html Topics ------ The RabbitMQ topic is an `exchange type`_. In RabbitMQ messages sent to a `topic exchange`_ can't have an arbitrary routing_key - it must be a list of words, delimited by dots. The words can be anything, but usually they specify some features connected to the message. A few valid routing key examples: ""blue.orange.yellow"", ""cars.bikes"", ""quick.orange.rabbit"". There can be as many words in the routing key as you like, up to the limit of 255 bytes.. Topic is a type of exchange so RabbitMQ backend does not store the data. A RabbitMQ exchange can live without any queues. No exceptions was raised if a message is send to an exchange without queue unless you use the mandatory flag. In *oslo.messaging*, a notification listener subscribes to a topic in a supplied target that is directly mapped by the driver to the RabbitMQ topic. .. _exchange type: https://www.rabbitmq.com/tutorials/tutorial-three-python.html .. _topic exchange: https://www.rabbitmq.com/tutorials/tutorial-five-python.html Health check with heartbeat frames ---------------------------------- The RabbitMQ driver of *oslo.messaging* allow you to detect dead TCP connections with heartbeats and TCP keepalives. The heartbeat function from the driver is build over the `heartbeat_check feature of kombu client`_ and over the `AMQP 0.9.1 heartbeat feature`_ implemented by RabbitMQ. Heartbeating is a technique designed to undo one of TCP/IP's features, namely its ability to recover from abroken physical connection by closing only after a quite long time-out. In some scenarios we need to knowvery rapidly if a peer is disconnected or not responding for other reasons (e.g. it is looping). Since heart-beating can be done at a low level, AMQP 0.9.1 implement this as a special type of frame that peers exchange at the transport level, rather than as a class method. Heartbeats also defend against certain network equipment which may terminate ""idle"" TCP connections when there is no activity on them for a certain period of time. The driver will always run the heartbeat in a native python thread and avoid to inherit the execution model from the parent process to avoid to use green threads. .. _heartbeat_check feature of kombu client: http://docs.celeryproject.org/projects/kombu/en/stable/reference/kombu.html?highlight=heartbeat#kombu.Connection.heartbeat_check .. _AMQP 0.9.1 implementation heartbeat: ============= Prerequisites ============= In order to run the driver the kombu python client must be installed. The RabbitMQ driver integrates a `Python client based on py-amqp`_ for full protocol support and utilizes the Producer API to publish notification messages and the Consumer API for notification listener subscriptions. .. _Python client based on py-amqp: https://github.com/celery/kombu Source packages for the `kombu library`_ are available via PyPI. Since the RabbitMQ driver is not an optional extension to *oslo.messaging* these packages installed by default. .. _kombu library: https://pypi.org/project/kombu/ ============= Configuration ============= Transport URL Enable -------------------- In *oslo.messaging*, the transport_url parameters define the OpenStack service backends for RPC and Notify. The url is of the form:: transport://user:pass@host1:port[,hostN:portN]/virtual_host Where the transport value specifies the rpc or notification backend as one of ``amqp``, ``rabbit``, ``kafka``, etc. To specify and enable the RabbitMQ driver for notifications, in the section ``[oslo_messaging_notifications]`` of the service configuration file, specify the ``transport_url`` parameter:: [oslo_messaging_notifications] transport_url = rabbit://username:password@kafkahostname:9092 Note, that if a ``transport_url`` parameter is not specified in the ``[oslo_messaging_notifications]`` section, the ``[DEFAULT]`` transport_url will be used for both RPC and Notify backends. Driver Options -------------- It is recommended that the default configuration options provided by the RabbitMQ driver be used. The configuration options can be modified in the ``oslo_messaging_rabbit`` section of the service configuration file. Publishing Options ^^^^^^^^^^^^^^^^^^ kombu_compression EXPERIMENTAL: Possible values are: gzip, bz2. If not set compression will not be used. This option may not be available in future versions. kombu_missing_consumer_retry_timeout How long to wait a missing client before abandoning to send it its replies. This value should not be longer than rpc_response_timeout. Default set to 60 seconds Consuming Options ^^^^^^^^^^^^^^^^^ rabbit_ha_queues default=False, deprecated_group='DEFAULT', Try to use HA queues in RabbitMQ (x-ha-policy: all). If you change this option, you must wipe the RabbitMQ database. In RabbitMQ 3.0, queue mirroring is no longer controlled by the x-ha-policy argument when declaring a queue. If you just want to make sure that all queues (except those with auto-generated names) are mirrored across all nodes, run: rabbitmqctl set_policy HA '^(?!amq\.).*' '{""ha-mode"": ""all""}' rabbit_transient_queues_ttl Positive integer representing duration in seconds for queue TTL (x-expires). Queues which are unused for the duration of the TTL are automatically deleted. The parameter affects only reply and fanout queues. Connection Options ^^^^^^^^^^^^^^^^^^ kombu_reconnect_delay How long to wait before reconnecting in response to an AMQP consumer cancel notification. kombu_failover_strategy', Determines how the next RabbitMQ node is chosen in case the one we are currently connected to becomes unavailable. Takes effect only if more than one RabbitMQ node is provided in config. Valid choices are 'round-robin', 'shuffle'. Default set to 'round-robin'. rabbit_retry_interval How frequently to retry connecting with RabbitMQ. Default set to 1 second. rabbit_retry_backoff, How long to backoff for between retries when connecting to RabbitMQ. By how much the interval is increased for each retry. Default set to 2. rabbit_interval_max Maximum interval of RabbitMQ connection sleep between retries. Default is 30 seconds. rabbit_qos_prefetch_count Specifies the number of messages to prefetch. Setting to zero allows unlimited messages. Default set to 0. Heartbeat Options ^^^^^^^^^^^^^^^^^ heartbeat_timeout_threshold Number of seconds after which the Rabbit broker is considered down if heartbeat's keep-alive fails (0 disables heartbeat). Default is 60 seconds. heartbeat_rate How often times during the heartbeat_timeout_threshold we check the heartbeat. Default is 2. Security Options ^^^^^^^^^^^^^^^^ ssl Connect over SSL. ssl_version SSL version to use (valid only if SSL enabled). Valid values are TLSv1 and SSLv23. SSLv2, SSLv3, TLSv1_1, and TLSv1_2 may be available on some distributions. ssl_key_file SSL key file (valid only if SSL enabled). ssl_cert_file SSL certification authority file (valid only if SSL enabled). rabbit_login_method The RabbitMQ login method. Choices are 'PLAIN', 'AMQPLAIN', 'RABBIT-CR-DEMO'. Default set to 'AMQPLAIN' ",,233,0
openstack%2Fopenstack-ansible~master~Id6112e130f3fb5994f046e60c8520adc787685a5,openstack/openstack-ansible,master,Id6112e130f3fb5994f046e60c8520adc787685a5,Set default for nova_cinder_rbd_inuse,ABANDONED,2019-08-07 10:08:36.000000000,2019-08-08 18:05:40.000000000,,"[{'_account_id': 17799}, {'_account_id': 22348}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-07 10:08:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/f8139fa8a6e8839d3e04f9a86e4b41e43746887e', 'message': 'Noop patch to check gates\n\nChange-Id: Id6112e130f3fb5994f046e60c8520adc787685a5\n'}, {'number': 2, 'created': '2019-08-07 12:44:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/6c4a0fd2fd6644c8755c735512155b04e31ca254', 'message': 'Fix condition of defining nova_cinder_rbd_inuse\n\nChange-Id: Id6112e130f3fb5994f046e60c8520adc787685a5\n'}, {'number': 3, 'created': '2019-08-07 15:05:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/b74db571846e637836a1399f98faeedf24631078', 'message': 'Fix condition of defining nova_cinder_rbd_inuse\n\nChange-Id: Id6112e130f3fb5994f046e60c8520adc787685a5\n'}, {'number': 4, 'created': '2019-08-07 17:11:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/f0b8956fc78163b9a2471eee01bf83c6860449d2', 'message': 'Fix condition of defining nova_cinder_rbd_inuse\n\nChange-Id: Id6112e130f3fb5994f046e60c8520adc787685a5\n'}, {'number': 5, 'created': '2019-08-08 15:16:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/27afbdab6fbaa34eb23feb22f29f208c1fe9e69c', 'message': 'Fix condition of defining nova_cinder_rbd_inuse\n\nChange-Id: Id6112e130f3fb5994f046e60c8520adc787685a5\n'}, {'number': 6, 'created': '2019-08-08 16:53:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/19c6eb95b6069c2f47a99c4f84a4341059de193c', 'message': 'Fix condition of defining nova_cinder_rbd_inuse\n\nChange-Id: Id6112e130f3fb5994f046e60c8520adc787685a5\n'}, {'number': 7, 'created': '2019-08-08 18:04:55.000000000', 'files': ['playbooks/common-playbooks/nova.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/824ccec117c4491b58fe998aed935dfbb3169b33', 'message': 'Set default for nova_cinder_rbd_inuse\n\nDuring lxc builds nova-api is deployed first, so nova_cinder_rbd_inuse\nfact is not gathered, which makes role to fail.\n\nChange-Id: Id6112e130f3fb5994f046e60c8520adc787685a5\n'}]",0,675077,824ccec117c4491b58fe998aed935dfbb3169b33,14,3,7,28619,,,0,"Set default for nova_cinder_rbd_inuse

During lxc builds nova-api is deployed first, so nova_cinder_rbd_inuse
fact is not gathered, which makes role to fail.

Change-Id: Id6112e130f3fb5994f046e60c8520adc787685a5
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/77/675077/7 && git format-patch -1 --stdout FETCH_HEAD,['noop'],1,f8139fa8a6e8839d3e04f9a86e4b41e43746887e,,,,0,0
openstack%2Fpython-manilaclient~master~Id65bac35f99483ca8fd55c645d47f4e882f6e191,openstack/python-manilaclient,master,Id65bac35f99483ca8fd55c645d47f4e882f6e191,"Add ""functional tests"" documentation",MERGED,2019-06-10 19:34:47.000000000,2019-08-08 18:00:29.000000000,2019-08-08 18:00:29.000000000,"[{'_account_id': 6413}, {'_account_id': 9003}, {'_account_id': 18058}, {'_account_id': 22348}, {'_account_id': 29632}]","[{'number': 1, 'created': '2019-06-10 19:34:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/cba5844fe63e3ad413b7572d9c4160e394303986', 'message': 'Add ""functional tests"" documentation\n\nAdd a base set of instructions with examples\non how contributors can run the functional tests\n\nChange-Id: Id65bac35f99483ca8fd55c645d47f4e882f6e191\nCloses-Bug: #1832023\n'}, {'number': 2, 'created': '2019-06-10 19:37:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/86baad4b32fd64366ceaafd3811043cc3cd72b8d', 'message': 'Add ""functional tests"" documentation\n\nAdd a base set of instructions with examples\non how contributors can run the functional tests\n\nChange-Id: Id65bac35f99483ca8fd55c645d47f4e882f6e191\nCloses-Bug: #1832023\n'}, {'number': 3, 'created': '2019-06-12 19:21:15.000000000', 'files': ['doc/source/contributor/index.rst', 'doc/source/contributor/functional-tests.rst'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/6ed5fa8056caa44c3c9b22608312419019ee2b2a', 'message': 'Add ""functional tests"" documentation\n\nAdd a base set of instructions with examples\non how contributors can run the functional tests\n\nChange-Id: Id65bac35f99483ca8fd55c645d47f4e882f6e191\nCloses-Bug: #1832023\n'}]",2,664427,6ed5fa8056caa44c3c9b22608312419019ee2b2a,15,5,3,6413,,,0,"Add ""functional tests"" documentation

Add a base set of instructions with examples
on how contributors can run the functional tests

Change-Id: Id65bac35f99483ca8fd55c645d47f4e882f6e191
Closes-Bug: #1832023
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/27/664427/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/contributor/index.rst'],1,cba5844fe63e3ad413b7572d9c4160e394303986,bug/1832023,.. toctree:: :maxdepth: 3 functional-tests .. _Consistent Testing Interface: https://opendev.org/openstack/governance/src/branch/master/reference/project-testing-interface.rst,".. _Consistent Testing Interface: https://opendev.org/openstack/governance/src/branch/master/reference/project-testing-interface.rst Functional tests ---------------- Functional CLI tests require several things to be able to run: * Deployed and working manila service. * Configured config file. Config file is used to get information like 'auth_url', 'username', 'tenant_name' and 'password'. To get config sample need to run following 'tox' job: .. code-block:: console $ tox -e genconfig This will create file 'etc/manilaclient/manilaclient.conf.sample' with all available config opts. Then rename it removing "".sample"" and set values for opts there. After it, tests can be run using following tox job: .. code-block:: console $ tox -e functional ",4,25
openstack%2Fpuppet-tripleo~master~I6eb75c88e06281c61e4317fe8722e4bdfa572fe4,openstack/puppet-tripleo,master,I6eb75c88e06281c61e4317fe8722e4bdfa572fe4,Ensure we set $haproxy_firewall_rules variable,MERGED,2019-08-08 08:05:07.000000000,2019-08-08 17:57:54.000000000,2019-08-08 17:18:12.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 14250}, {'_account_id': 14985}, {'_account_id': 17823}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-08 08:05:07.000000000', 'files': ['manifests/haproxy/endpoint.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/34bf20d668d228f8c3ee09e0d3354b22dc4fd6b6', 'message': ""Ensure we set $haproxy_firewall_rules variable\n\nIf we do not set a default value for that one, we might hit the\nfollowing puppet warning:\n\nWarning: Unknown variable: 'haproxy_firewall_rules'. (file:\n/etc/puppet/modules/tripleo/manifests/haproxy/endpoint.pp, line: 303,\ncolumn: 54)\n\nChange-Id: I6eb75c88e06281c61e4317fe8722e4bdfa572fe4\n""}]",0,675266,34bf20d668d228f8c3ee09e0d3354b22dc4fd6b6,10,9,1,28223,,,0,"Ensure we set $haproxy_firewall_rules variable

If we do not set a default value for that one, we might hit the
following puppet warning:

Warning: Unknown variable: 'haproxy_firewall_rules'. (file:
/etc/puppet/modules/tripleo/manifests/haproxy/endpoint.pp, line: 303,
column: 54)

Change-Id: I6eb75c88e06281c61e4317fe8722e4bdfa572fe4
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/66/675266/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/haproxy/endpoint.pp'],1,34bf20d668d228f8c3ee09e0d3354b22dc4fd6b6,haproxy_rules/empty-set, } else { $haproxy_firewall_rules = {},,2,0
openstack%2Fhorizon~master~I8acea40851c7e9dc248751be967859b2b9430af7,openstack/horizon,master,I8acea40851c7e9dc248751be967859b2b9430af7,Use the python real executable,MERGED,2019-07-15 13:51:36.000000000,2019-08-08 17:47:37.000000000,2019-08-08 17:47:37.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 5623}, {'_account_id': 7781}, {'_account_id': 8648}, {'_account_id': 8674}, {'_account_id': 19160}, {'_account_id': 21967}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-15 13:51:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/5e817478ced084d09cb7bcb6b0346a7d9a80be7f', 'message': 'Use python real executable\n\nUse the real python executable as shebang\nUse exec instead of execfile if python 3\nUse the user defined static files dir\n\nChange-Id: I8acea40851c7e9dc248751be967859b2b9430af7\nCloses-Bug: #1836580\n'}, {'number': 2, 'created': '2019-07-17 14:24:44.000000000', 'files': ['.pylintrc', 'openstack_dashboard/management/commands/make_web_conf.py', 'openstack_dashboard/management/commands/horizon.wsgi.template', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/horizon/commit/66144165ff39b8b7b5257e141c51a081d498963f', 'message': 'Use the python real executable\n\nUse the real python executable as shebang\nUse exec instead of execfile if using python 3\n\nChange-Id: I8acea40851c7e9dc248751be967859b2b9430af7\nCloses-Bug: #1836580\n'}]",8,670840,66144165ff39b8b7b5257e141c51a081d498963f,20,9,2,8674,,,0,"Use the python real executable

Use the real python executable as shebang
Use exec instead of execfile if using python 3

Change-Id: I8acea40851c7e9dc248751be967859b2b9430af7
Closes-Bug: #1836580
",git fetch https://review.opendev.org/openstack/horizon refs/changes/40/670840/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/management/commands/make_web_conf.py', 'openstack_dashboard/management/commands/horizon.wsgi.template']",2,5e817478ced084d09cb7bcb6b0346a7d9a80be7f,bug/1836580,"#!{{ PYTHON_EXEC }} # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. {% if ACTIVATE_THIS %}{% if PY2 %}{% elif PY3 %} exec( # pylint: disable=W0122 compile(open(activate_this, ""rb"").read(), activate_this, 'exec'), dict(__file__=activate_this) )# We import now instead of at the top of the module to use the virtual env {% endif %} import os # noqa pylint: disable=C0413 import sys # noqa pylint: disable=C0413 import django.core.wsgi # noqa pylint: disable=C0413",#!/usr/bin/env python import os import sys {% if ACTIVATE_THIS %} import django.core.wsgi,30,5
openstack%2Ftripleo-repos~master~Ie4963b8cb269171eb73dfd3fc82643bd0f284122,openstack/tripleo-repos,master,Ie4963b8cb269171eb73dfd3fc82643bd0f284122,add support for RHEL8,ABANDONED,2019-06-27 18:29:23.000000000,2019-08-08 17:22:09.000000000,,"[{'_account_id': 8449}, {'_account_id': 10022}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-27 18:29:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/241154d9d67dc69a2bec7b8604a1bc9f79b7e897', 'message': '[WIP] add support for RHEL8\n\nChange-Id: Ie4963b8cb269171eb73dfd3fc82643bd0f284122\n'}, {'number': 2, 'created': '2019-06-27 19:22:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/fd8f034e710f13942c84c23a9cc51e27511f9f79', 'message': '[WIP] add support for RHEL8\n\nChange-Id: Ie4963b8cb269171eb73dfd3fc82643bd0f284122\n'}, {'number': 3, 'created': '2019-06-27 20:41:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/e76a2e013530f2645774d078fa25aeec2884ab00', 'message': 'add support for RHEL8\n\nAdd support for running on RHEL8 / CentOS8\nThere are some additional defaults that need \nto be added to support the tripleo-repos workflow\nwhen running on ubuntu / debian.\n\nChange-Id: Ie4963b8cb269171eb73dfd3fc82643bd0f284122\n'}, {'number': 4, 'created': '2019-06-28 11:56:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/841d5079eb404b51d32df507f3712bab8665f42e', 'message': 'add support for RHEL8\n\nAdd support for running on RHEL8 / CentOS8\nThere are some additional defaults that need \nto be added to support the tripleo-repos workflow\nwhen running on ubuntu / debian.\n\nChange-Id: Ie4963b8cb269171eb73dfd3fc82643bd0f284122\n'}, {'number': 5, 'created': '2019-06-28 11:56:49.000000000', 'files': ['tripleo_repos/main.py'], 'web_link': 'https://opendev.org/openstack/tripleo-repos/commit/324e037bc5b47bdcc83f0ff93f43bff6032e2e8f', 'message': 'add support for RHEL8\n\nAdd support for running on RHEL8 / CentOS8\nThere are some additional defaults that need \nto be added to support the tripleo-repos workflow\nwhen running on ubuntu / debian.\n\nChange-Id: Ie4963b8cb269171eb73dfd3fc82643bd0f284122\n'}]",1,668015,324e037bc5b47bdcc83f0ff93f43bff6032e2e8f,13,4,5,9592,,,0,"add support for RHEL8

Add support for running on RHEL8 / CentOS8
There are some additional defaults that need 
to be added to support the tripleo-repos workflow
when running on ubuntu / debian.

Change-Id: Ie4963b8cb269171eb73dfd3fc82643bd0f284122
",git fetch https://review.opendev.org/openstack/tripleo-repos refs/changes/15/668015/5 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_repos/main.py'],1,241154d9d67dc69a2bec7b8604a1bc9f79b7e897,add-rhel8-support,"# RHEL is only provided to licensed cloud providers via RHUI 'centos': 'http://mirror.centos.org', 'rhel': '',SUPPORTED_DISTROS = ['centos7', 'fedora28', 'fedora', 'rhel8'] output = subprocess.Popen( 'source /etc/os-release && echo ""$ID\n$VERSION_ID""', universal_newlines=True).communicate() # when running on unsupported_distros major version can be null try: distro_id, distro_version_id = output[0].split() distro_major_version_id = distro_version_id.split('.')[:2][0] distro = ""{}{}"".format(distro_id, distro_major_version_id) except ValueError: ""WARNING: Unsuported platformueetected by tripleo-repos "" distro = 'centos7' distro_key = distro_id elif args.distro in ['rhel8']: valid_repos = ['ceph', 'current', 'current-tripleo', 'current-tripleo-dev', 'deps', 'tripleo-ci-testing'] elif args.distro in ['rhel8']: distro_branch = '%s-%s' % (args.distro, args.branch)"," 'centos': 'http://mirror.centos.org'SUPPORTED_DISTROS = ['centos7', 'fedora28', 'fedora'] distro = subprocess.Popen( 'source /etc/os-release && echo ""$ID$VERSION_ID""', universal_newlines=True).communicate()[0].rstrip() distro_key = re.sub(r'[0-9]+', '', distro) distro_key = re.sub(r'[0-9]+', '', args.distro)",23,7
openstack%2Fdevstack-plugin-ceph~master~I7a709d49ec4c93b2a06e961ca8ca1414cf4c1918,openstack/devstack-plugin-ceph,master,I7a709d49ec4c93b2a06e961ca8ca1414cf4c1918,Update syntax for cephfs snapshot enablement,MERGED,2019-08-02 16:31:51.000000000,2019-08-08 17:18:14.000000000,2019-08-08 17:18:13.000000000,"[{'_account_id': 9003}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-02 16:31:51.000000000', 'files': ['devstack/lib/ceph'], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/ae9d524b79d97cb6a7992f36eb51bca2d667d67e', 'message': 'Update syntax for cephfs snapshot enablement\n\nWe should be using ""ceph fs set <fs_name> allow_new_snaps true""\ninstead of using the mds call\n\nChange-Id: I7a709d49ec4c93b2a06e961ca8ca1414cf4c1918\nCloses-Bug: #1838790\n'}]",0,674348,ae9d524b79d97cb6a7992f36eb51bca2d667d67e,6,2,1,6413,,,0,"Update syntax for cephfs snapshot enablement

We should be using ""ceph fs set <fs_name> allow_new_snaps true""
instead of using the mds call

Change-Id: I7a709d49ec4c93b2a06e961ca8ca1414cf4c1918
Closes-Bug: #1838790
",git fetch https://review.opendev.org/openstack/devstack-plugin-ceph refs/changes/48/674348/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/ceph'],1,ae9d524b79d97cb6a7992f36eb51bca2d667d67e,bug/1838790, sudo $DOCKER_EXEC ceph -c ${CEPH_CONF_FILE} fs set ${CEPHFS_FILESYSTEM} allow_new_snaps true \, sudo $DOCKER_EXEC ceph -c ${CEPH_CONF_FILE} mds set allow_new_snaps true \,1,1
openstack%2Ftripleo-heat-templates~stable%2Fstein~I1681a5e5ac7842500fc5e9dd0900ee6121773537,openstack/tripleo-heat-templates,stable/stein,I1681a5e5ac7842500fc5e9dd0900ee6121773537,Handle edge cases in staged upgrade hiera data,MERGED,2019-07-31 12:12:30.000000000,2019-08-08 17:18:10.000000000,2019-08-08 17:18:10.000000000,"[{'_account_id': 8042}, {'_account_id': 11090}, {'_account_id': 20775}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 26343}]","[{'number': 1, 'created': '2019-07-31 12:12:30.000000000', 'files': ['deployment/haproxy/haproxy-pacemaker-puppet.yaml', 'deployment/database/redis-pacemaker-puppet.yaml', 'puppet/services/pacemaker.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-notify-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-rpc-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/945a22166c48079d903d88287870e0391b772f45', 'message': ""Handle edge cases in staged upgrade hiera data\n\nWe make sure the hiera is set in an either-or branches so that we\nprevent from executing both at the same time or none at all.\n\nEdge case 1 which is not that much of an edge case --\nsingle-controller environment with Pacemaker. Previously we ran both\nbranches resulting in duplicate entries.\n\nEdge case 2 -- having the service in roles data but having no node\nassigned to that role. In that case previously we wouldn't set the\nvariables and the upgrade would fail.\n\nChange-Id: I1681a5e5ac7842500fc5e9dd0900ee6121773537\nPartial-Bug: #1831690\n(cherry picked from commit 2b427970a36a63cc2b9afbd61f10fe033287aca5)\n""}]",0,673799,945a22166c48079d903d88287870e0391b772f45,28,6,1,8042,,,0,"Handle edge cases in staged upgrade hiera data

We make sure the hiera is set in an either-or branches so that we
prevent from executing both at the same time or none at all.

Edge case 1 which is not that much of an edge case --
single-controller environment with Pacemaker. Previously we ran both
branches resulting in duplicate entries.

Edge case 2 -- having the service in roles data but having no node
assigned to that role. In that case previously we wouldn't set the
variables and the upgrade would fail.

Change-Id: I1681a5e5ac7842500fc5e9dd0900ee6121773537
Partial-Bug: #1831690
(cherry picked from commit 2b427970a36a63cc2b9afbd61f10fe033287aca5)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/99/673799/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/haproxy/haproxy-pacemaker-puppet.yaml', 'deployment/database/redis-pacemaker-puppet.yaml', 'puppet/services/pacemaker.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-notify-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-rpc-pacemaker-puppet.yaml']",7,945a22166c48079d903d88287870e0391b772f45,bug/1832588," when: groups['oslo_messaging_rpc'] | length <= 1 when: - groups['oslo_messaging_rpc'] | length > 1 - item.split('.')[0] in ansible_limit.split(',')"," when: groups['oslo_messaging_rpc'] | length == 1 when: item.split('.')[0] in ansible_limit.split(',')",28,14
openstack%2Fdevstack-plugin-ceph~master~Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4,openstack/devstack-plugin-ceph,master,Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4,Update call for keys creation,MERGED,2019-07-30 18:07:21.000000000,2019-08-08 17:15:55.000000000,2019-08-08 17:15:55.000000000,"[{'_account_id': 4523}, {'_account_id': 6413}, {'_account_id': 6796}, {'_account_id': 6984}, {'_account_id': 9003}, {'_account_id': 9236}, {'_account_id': 20813}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-30 18:07:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/7897d77663ee7f4134362ab29d90d5f1f46af03c', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 2, 'created': '2019-07-30 18:10:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/6ffdf0b5bc0e0317764f8bd7928872f0b096c9c0', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 3, 'created': '2019-07-31 13:09:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/2a9259ffa90f5418ac897fd6ee2fff949900b8d7', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 4, 'created': '2019-07-31 14:36:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/b0a8adcef4058b3dfd619e0c414304faebf9fbbf', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 5, 'created': '2019-08-01 13:01:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/29b44be54653739ab3be4091191ca51015d049e0', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 6, 'created': '2019-08-01 18:15:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/ad6b96c9b8c3eab70356bc9f4d45ccaf9be6a401', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 7, 'created': '2019-08-02 03:56:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/a20e11ae0dfae46d907a3faf3fe77fd70b510f42', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 8, 'created': '2019-08-02 16:15:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/5bc593dc413e45fdb6c02471db5e650abd00aeb1', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}, {'number': 9, 'created': '2019-08-02 16:16:56.000000000', 'files': ['devstack/lib/ceph'], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/cbdcb8c10adce03d32c8eb92b31ea5ffb6ab235c', 'message': 'Update call for keys creation\n\nceph-create-keys was being used to create keys.\nThis command has been deprecated and it does nothing.\nFor this reason, keys were not available when starting\ndaemons and this made the deployment to fail.\n\nThis change adds the correct key creation using ceph-authtool.\n\nChange-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4\nCo-Authored-By: Giulio Fidente <gfidente@redhat.com>\n'}]",9,673608,cbdcb8c10adce03d32c8eb92b31ea5ffb6ab235c,36,8,9,6413,,,0,"Update call for keys creation

ceph-create-keys was being used to create keys.
This command has been deprecated and it does nothing.
For this reason, keys were not available when starting
daemons and this made the deployment to fail.

This change adds the correct key creation using ceph-authtool.

Change-Id: Ie1a41f67bbf1c7a58e89168b0c8ad63f101648b4
Co-Authored-By: Giulio Fidente <gfidente@redhat.com>
",git fetch https://review.opendev.org/openstack/devstack-plugin-ceph refs/changes/08/673608/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/ceph'],1,7897d77663ee7f4134362ab29d90d5f1f46af03c,bug/1838453," ${CEPH_DATA_DIR}/{bootstrap-mds,bootstrap-osd,bootstrap-mgr,bootstrap-rgw,mgr,rgw,mds,mon,osd,tmp,radosgw} --create-keyring --name=mon. --add-key=$(ceph-authtool --gen-print-key) \ --cap mon 'allow *' sudo ceph-authtool ${CEPH_CONF_DIR}/ceph.client.admin.keyring \ --create-keyring --gen-key -n client.admin --cap mon 'allow *' \ --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' sudo ceph-authtool ${CEPH_DATA_DIR}/tmp/keyring.mon.$(hostname) \ --import-keyring ${CEPH_CONF_DIR}/ceph.client.admin.keyring for key in bootstrap-{mds,osd,rgw}; do sudo ceph auth get client.$key -o ${CEPH_DATA_DIR}/$key/ceph.keyring sudo ceph auth get client.bootstrap-mgr -o ${CEPH_DATA_DIR}/bootstrap-mgr/ceph.keyring sudo mkdir -p ${CEPH_DATA_DIR}/osd/ceph-${OSD_ID} sudo chown ceph. ${CEPH_DATA_DIR}/osd/ceph-${OSD_ID} if [[ $RUN_AS == 'ceph' ]] ; then sudo ceph-osd -c ${CEPH_CONF_FILE} --setuser ceph --setgroup ceph -i ${OSD_ID} --mkfs else sudo ceph-osd -c ${CEPH_CONF_FILE} -i ${OSD_ID} --mkfs fi"," ${CEPH_DATA_DIR}/{bootstrap-mds,bootstrap-osd,mds,mon,osd,tmp,radosgw} --create-keyring --name=mon. --add-key=$(ceph-authtool \ --gen-print-key) --cap mon 'allow *' if [[ $(echo $ceph_version '>=' 11.1 | bc -l) == 1 ]] ; then sudo ceph-create-keys --cluster ceph --id $(hostname) fi # wait for the admin key to come up # otherwise we will not be able to do the actions below until [ -f ${CEPH_CONF_DIR}/ceph.client.admin.keyring ]; do echo_summary ""Waiting for the Ceph admin key to be ready..."" count=$(($count + 1)) if [ $count -eq 3 ]; then die $LINENO ""Maximum of 3 retries reached"" fi sleep 5 if [[ $RUN_AS == 'ceph' ]] ; then sudo mkdir -p ${CEPH_DATA_DIR}/osd/ceph-${OSD_ID} sudo chown ceph. ${CEPH_DATA_DIR}/osd/ceph-${OSD_ID} sudo ceph-osd -c ${CEPH_CONF_FILE} --setuser ceph --setgroup ceph -i ${OSD_ID} --mkfs else sudo mkdir -p ${CEPH_DATA_DIR}/osd/ceph-${OSD_ID} sudo ceph-osd -c ${CEPH_CONF_FILE} -i ${OSD_ID} --mkfs fi",20,24
openstack%2Fdevstack-plugin-ceph~master~I9010f0d6226304537adcbe4e3f97250c754a7de9,openstack/devstack-plugin-ceph,master,I9010f0d6226304537adcbe4e3f97250c754a7de9,Add stable versions of devstack-plugin-ceph-tempest-py3,MERGED,2019-06-28 18:06:57.000000000,2019-08-08 17:15:54.000000000,2019-08-08 17:15:54.000000000,"[{'_account_id': 8556}, {'_account_id': 9003}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-06-28 18:06:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/5d566cc0fa134b01d95d14d0f35695fc0b010acf', 'message': ""Add stable versions of devstack-plugin-ceph-tempest-py3\n\ndevstack-plugin-ceph is branchless and its jobs run on\nstable branches. To tests the devstack-plugin-ceph changes\nfor stable branches, let' add the stable version of\ndevstack-plugin-ceph-tempest-py3 job in experimental pipeline.\n\nChange-Id: I9010f0d6226304537adcbe4e3f97250c754a7de9\n""}, {'number': 2, 'created': '2019-06-28 18:11:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/9a0abadc5da563c08e6718759c68d2acd1e5a048', 'message': ""Add stable versions of devstack-plugin-ceph-tempest-py3\n\ndevstack-plugin-ceph is branchless and its jobs run on\nstable branches. To tests the devstack-plugin-ceph changes\nfor stable branches, let' add the stable version of\ndevstack-plugin-ceph-tempest-py3 job in experimental pipeline.\n\nAdding in experimental pipeline as we do not really have to run\nthose all the time on check gate but can be run on demand.\n\nChange-Id: I9010f0d6226304537adcbe4e3f97250c754a7de9\n""}, {'number': 3, 'created': '2019-07-04 04:42:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/7cc2db9fc22267cf0eefd5c30e0834198c6b1d6c', 'message': ""Add stable versions of devstack-plugin-ceph-tempest-py3\n\ndevstack-plugin-ceph is branchless and its jobs run on\nstable branches. To tests the devstack-plugin-ceph changes\nfor stable branches, let' add the stable version of\ndevstack-plugin-ceph-tempest-py3 job in experimental pipeline.\n\nAdding in experimental pipeline as we do not really have to run\nthose all the time on check gate but can be run on demand.\n\nChange-Id: I9010f0d6226304537adcbe4e3f97250c754a7de9\n""}, {'number': 4, 'created': '2019-07-04 04:48:54.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/devstack-plugin-ceph/commit/0a8488b07139a9347dcb7fa314bce3b9ba1be5a1', 'message': ""Add stable versions of devstack-plugin-ceph-tempest-py3\n\ndevstack-plugin-ceph is branchless and its jobs run on\nstable branches. To tests the devstack-plugin-ceph changes\nfor stable branches, let' add the stable version of\ndevstack-plugin-ceph-tempest-py3 job in experimental pipeline.\n\nAdding in experimental pipeline as we do not really have to run\nthose all the time on check gate but can be run on demand.\n\nChange-Id: I9010f0d6226304537adcbe4e3f97250c754a7de9\n""}]",0,668223,0a8488b07139a9347dcb7fa314bce3b9ba1be5a1,22,3,4,8556,,,0,"Add stable versions of devstack-plugin-ceph-tempest-py3

devstack-plugin-ceph is branchless and its jobs run on
stable branches. To tests the devstack-plugin-ceph changes
for stable branches, let' add the stable version of
devstack-plugin-ceph-tempest-py3 job in experimental pipeline.

Adding in experimental pipeline as we do not really have to run
those all the time on check gate but can be run on demand.

Change-Id: I9010f0d6226304537adcbe4e3f97250c754a7de9
",git fetch https://review.opendev.org/openstack/devstack-plugin-ceph refs/changes/23/668223/4 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,5d566cc0fa134b01d95d14d0f35695fc0b010acf,,- job: name: devstack-plugin-ceph-tempest-stein-py3 parent: devstack-plugin-ceph-tempest-py3 override-checkout: stable/stein - job: name: devstack-plugin-ceph-tempest-rocky-py3 parent: devstack-plugin-ceph-tempest-py3 nodeset: openstack-single-node-xenial override-checkout: stable/rocky - job: name: devstack-plugin-ceph-tempest-queens-py3 parent: devstack-plugin-ceph-tempest-py3 nodeset: openstack-single-node-xenial override-checkout: stable/queens - devstack-plugin-ceph-tempest-stein-py3 - devstack-plugin-ceph-tempest-rocky-py3 - devstack-plugin-ceph-tempest-queens-py3,,20,0
openstack%2Fnova~master~I107d842520c088b4859a3b36621ce6bd8e970475,openstack/nova,master,I107d842520c088b4859a3b36621ce6bd8e970475,Add functional test for resize crash compute restart revert,MERGED,2019-07-11 21:18:26.000000000,2019-08-08 17:11:19.000000000,2019-08-06 20:10:44.000000000,"[{'_account_id': 6873}, {'_account_id': 8864}, {'_account_id': 9008}, {'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-11 21:18:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/24c7466c1c519ddb6103a3c9b7cb94cb09fe881a', 'message': 'Add functional test for resize crash compute restart revert\n\nDuring review of change I51673e58fc8d5f051df911630f6d7a928d123a5b\nthere was discussion about the RESIZE_MIGRATING crashed resize\ncleanup on restart of the compute service and how it may or may\nnot work but is likely missing some things to cleanup like fields\nset on the instance during prep_resize and resource allocations\nin placement.\n\nThis adds a functional test to hit that code and make assertions\nabout what it does and does not cleanup after the crashed resize.\n\nChange-Id: I107d842520c088b4859a3b36621ce6bd8e970475\n'}, {'number': 2, 'created': '2019-07-12 13:51:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/31648e636d70b9159da7aea52e72b0728622b3da', 'message': 'Add functional test for resize crash compute restart revert\n\nDuring review of change I51673e58fc8d5f051df911630f6d7a928d123a5b\nthere was discussion about the RESIZE_MIGRATING crashed resize\ncleanup on restart of the compute service and how it may or may\nnot work but is likely missing some things to cleanup like fields\nset on the instance during prep_resize and resource allocations\nin placement.\n\nThis adds a functional test to hit that code and make assertions\nabout what it does and does not cleanup after the crashed resize.\n\nRelated-Bug: #1836369\n\nChange-Id: I107d842520c088b4859a3b36621ce6bd8e970475\n'}, {'number': 3, 'created': '2019-07-12 17:42:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0132b8388e825119e8a4f68785e5dcac988ac042', 'message': 'Add functional test for resize crash compute restart revert\n\nDuring review of change I51673e58fc8d5f051df911630f6d7a928d123a5b\nthere was discussion about the RESIZE_MIGRATING crashed resize\ncleanup on restart of the compute service and how it may or may\nnot work but is likely missing some things to cleanup like fields\nset on the instance during prep_resize and resource allocations\nin placement.\n\nThis adds a functional test to hit that code and make assertions\nabout what it does and does not cleanup after the crashed resize.\n\nRelated-Bug: #1836369\n\nChange-Id: I107d842520c088b4859a3b36621ce6bd8e970475\n'}, {'number': 4, 'created': '2019-07-14 14:28:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ffe5e7b2892a98b7e994854f5253055afbe35b5f', 'message': 'Add functional test for resize crash compute restart revert\n\nDuring review of change I51673e58fc8d5f051df911630f6d7a928d123a5b\nthere was discussion about the RESIZE_MIGRATING crashed resize\ncleanup on restart of the compute service and how it may or may\nnot work but is likely missing some things to cleanup like fields\nset on the instance during prep_resize and resource allocations\nin placement.\n\nThis adds a functional test to hit that code and make assertions\nabout what it does and does not cleanup after the crashed resize.\n\nRelated-Bug: #1836369\n\nChange-Id: I107d842520c088b4859a3b36621ce6bd8e970475\n'}, {'number': 5, 'created': '2019-07-22 14:10:28.000000000', 'files': ['nova/tests/functional/compute/test_init_host.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/8db712fe040b15f2b8bc5538338658d3aac246e3', 'message': 'Add functional test for resize crash compute restart revert\n\nDuring review of change I51673e58fc8d5f051df911630f6d7a928d123a5b\nthere was discussion about the RESIZE_MIGRATING crashed resize\ncleanup on restart of the compute service and how it may or may\nnot work but is likely missing some things to cleanup like fields\nset on the instance during prep_resize and resource allocations\nin placement.\n\nThis adds a functional test to hit that code and make assertions\nabout what it does and does not cleanup after the crashed resize.\n\nRelated-Bug: #1836369\n\nChange-Id: I107d842520c088b4859a3b36621ce6bd8e970475\n'}]",11,670393,8db712fe040b15f2b8bc5538338658d3aac246e3,53,12,5,6873,,,0,"Add functional test for resize crash compute restart revert

During review of change I51673e58fc8d5f051df911630f6d7a928d123a5b
there was discussion about the RESIZE_MIGRATING crashed resize
cleanup on restart of the compute service and how it may or may
not work but is likely missing some things to cleanup like fields
set on the instance during prep_resize and resource allocations
in placement.

This adds a functional test to hit that code and make assertions
about what it does and does not cleanup after the crashed resize.

Related-Bug: #1836369

Change-Id: I107d842520c088b4859a3b36621ce6bd8e970475
",git fetch https://review.opendev.org/openstack/nova refs/changes/93/670393/3 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/compute/test_init_host.py'],1,24c7466c1c519ddb6103a3c9b7cb94cb09fe881a,bug/1836369,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import mock import time from nova import context as nova_context from nova import objects from nova.tests.functional import integrated_helpers from nova.tests.unit.image import fake as fake_image class ComputeManagerInitHostTestCase( integrated_helpers.ProviderUsageBaseTestCase): """"""Tests various actions performed when the nova-compute service starts."""""" compute_driver = 'fake.MediumFakeDriver' def test_migrate_disk_and_power_off_crash_finish_revert_migration(self): """"""Tests the scenario that the compute service crashes while the driver's migrate_disk_and_power_off method is running (we could be slow transferring disks or something when it crashed) and on restart of the compute service the driver's finish_revert_migration method is called to cleanup the source host and reset the instnace task_state. """""" # Start two compute service so we migrate across hosts. for x in range(2): self._start_compute('host%d' % x) # Create a server, it does not matter on which host it lands. name = 'test_migrate_disk_and_power_off_crash_finish_revert_migration' server = self._build_minimal_create_server_request( self.api, name, image_uuid=fake_image.get_valid_image_id(), networks='auto') server = self.api.post_server({'server': server}) server = self._wait_for_state_change(self.admin_api, server, 'ACTIVE') # Save the source hostname for assertions later. source_host = server['OS-EXT-SRV-ATTR:host'] def fake_migrate_disk_and_power_off(*args, **kwargs): # Simulate the source compute service crashing by restarting it. self.restart_compute_service(self.computes[source_host]) # We have to keep the method from returning before asserting the # _init_instance restart behavior otherwise resize_instance will # fail and set the instance to ERROR status, revert allocations, # etc which is not realistic if the service actually crashed while # migrate_disk_and_power_off was running. time.sleep(30) source_driver = self.computes[source_host].manager.driver with mock.patch.object(source_driver, 'migrate_disk_and_power_off', side_effect=fake_migrate_disk_and_power_off): # Initiate a cold migration from the source host. self.admin_api.post_server_action(server['id'], {'migrate': None}) # Now wait for the task_state to be reset to None during # _init_instance. server = self._wait_for_server_parameter( self.admin_api, server, { 'status': 'ACTIVE', 'OS-EXT-STS:task_state': None, 'OS-EXT-SRV-ATTR:host': source_host } ) # Assert we went through the _init_instance processing we expect. self.assertIn('Instance found in migrating state during startup. ' 'Resetting task_state', self.stdlog.logger.output) # The migration status should be ""error"" rather than stuck as # ""migrating"". context = nova_context.get_admin_context() objects.Migration.get_by_instance_and_status( context, server['id'], 'migrating') # FIXME(mriedem): This is a bug because we would normally expect # Migration.get_by_instance_and_status to raise # MigrationNotFoundByStatus since the status should be ""error"". # Assert things related to the resize get cleaned up: # - things set on the instance during prep_resize like: # - migration_context # - new_flavor # - stashed old_vm_state in system_metadata # - migration-based allocations from conductor/scheduler, i.e. that the # allocations created by the scheduler for the instance and dest host # are gone and the source host allocations are back on the instance # rather than the migration record instance = objects.Instance.get_by_uuid( context, server['id'], expected_attrs=[ 'migration_context', 'flavor', 'system_metadata' ]) # FIXME(mriedem): Leaving these fields set on the instance is a bug. self.assertIsNotNone(instance.migration_context) self.assertIsNotNone(instance.new_flavor) self.assertEqual('active', instance.system_metadata['old_vm_state']) dest_host = 'host0' if source_host == 'host1' else 'host1' dest_rp_uuid = self._get_provider_uuid_by_host(dest_host) dest_allocations = self._get_allocations_by_provider_uuid(dest_rp_uuid) # FIXME(mriedem): This is a bug because we orphaned the allocations # created by the scheduler for the instance on the dest host. self.assertIn(server['id'], dest_allocations) source_rp_uuid = self._get_provider_uuid_by_host(source_host) source_allocations = self._get_allocations_by_provider_uuid( source_rp_uuid) # FIXME(mriedem): This is a bug because the server is running on the # source host but is not tracking allocations against the source host. self.assertNotIn(server['id'], source_allocations) ",,115,0
openstack%2Frally-openstack~master~I6a12bdce95aef34a85cfae306c475905c6b19e7c,openstack/rally-openstack,master,I6a12bdce95aef34a85cfae306c475905c6b19e7c,Add barbican scenarios for orders,MERGED,2019-01-15 18:11:48.000000000,2019-08-08 17:09:30.000000000,2019-08-08 17:09:30.000000000,"[{'_account_id': 24}, {'_account_id': 9545}, {'_account_id': 15209}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-01-15 18:11:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/01a7a26cd0ec817365b74a0dbf820b3e3e8c6f70', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 2, 'created': '2019-01-16 14:19:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/95ff4e5e8f0da297c62a6df92a748083fbb35d15', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 3, 'created': '2019-01-16 16:44:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/d4c722adf6adeae0ac6e130801f4178cf41345b0', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 4, 'created': '2019-01-16 19:01:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/390b3cb91e0d0c4ad61285427c532095f14d7fd1', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 5, 'created': '2019-01-24 16:41:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/db64771202d1bc146a3e986272cd7101ff157cdf', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 6, 'created': '2019-01-24 17:36:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/eea64a2e8db321f6bf3b062317130752fe99d916', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 7, 'created': '2019-01-28 14:35:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/ff8a2a381aa9961921b1e97f00cdd3e6ec20c7d5', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 8, 'created': '2019-05-16 23:49:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/e5a80ebe095749c964384ead69be353221846837', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 9, 'created': '2019-07-08 13:06:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/853311ddfec20ff76fe4ddc42cdc95eb193129e1', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}, {'number': 10, 'created': '2019-08-05 10:56:45.000000000', 'files': ['rally_openstack/services/key_manager/barbican.py', 'tests/unit/scenarios/barbican/test_orders.py', 'samples/tasks/scenarios/barbican/create-and-delete-keys.json', 'tests/unit/services/barbican/test_secrets.py', 'samples/tasks/scenarios/barbican/create-and-delete-asymmetric.yaml', 'samples/tasks/scenarios/barbican/create-and-delete-keys.yaml', 'samples/tasks/scenarios/barbican/create-and-delete-asymmetric.json', 'rally_openstack/scenarios/barbican/orders.py', 'rally_openstack/cleanup/resources.py', 'samples/tasks/scenarios/barbican/create-and-delete-order-certificate.yaml', 'samples/tasks/scenarios/barbican/list-orders.yaml', 'rally-jobs/barbican.yaml', 'samples/tasks/scenarios/barbican/create-and-delete-order-certificate.json', 'samples/tasks/scenarios/barbican/list-orders.json'], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/ae2e04d82d0183ba3b51eaf4ad5eb0fac4056e29', 'message': 'Add barbican scenarios for orders\n\nAdded the following scenarios:\n\n- BarbicanOrders.list\n- BarbicanOrders.create_key_and_delete\n- BarbicanOrders.create_certificate_and_delete\n- BarbicanOrders.create_asymmetric_and_delete\n\nChange-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c\nSigned-off-by: Charles Short <chucks@redhat.com>\n'}]",0,631042,ae2e04d82d0183ba3b51eaf4ad5eb0fac4056e29,42,4,10,24,,,0,"Add barbican scenarios for orders

Added the following scenarios:

- BarbicanOrders.list
- BarbicanOrders.create_key_and_delete
- BarbicanOrders.create_certificate_and_delete
- BarbicanOrders.create_asymmetric_and_delete

Change-Id: I6a12bdce95aef34a85cfae306c475905c6b19e7c
Signed-off-by: Charles Short <chucks@redhat.com>
",git fetch https://review.opendev.org/openstack/rally-openstack refs/changes/42/631042/3 && git format-patch -1 --stdout FETCH_HEAD,"['samples/tasks/scenarios/barbican/create-and-delete-certificate.json', 'rally_openstack/scenarios/barbican/secrets.py', 'rally_openstack/services/key_manager/barbican.py', 'tests/unit/scenarios/barbican/test_orders.py', 'samples/tasks/scenarios/barbican/create-and-delete-keys.json', 'tests/unit/services/barbican/test_secrets.py', 'samples/tasks/scenarios/barbican/create-and-delete-asymmetric.yaml', 'samples/tasks/scenarios/barbican/create-and-delete-keys.yaml', 'samples/tasks/scenarios/barbican/create-and-delete-asymmetric.json', 'rally_openstack/scenarios/barbican/orders.py', 'rally_openstack/scenarios/barbican/utils.py', 'rally_openstack/cleanup/resources.py', 'samples/tasks/scenarios/barbican/create-and-delete-certificate.yaml', 'samples/tasks/scenarios/barbican/list-orders.yaml', 'tests/unit/scenarios/barbican/test_utils.py', 'samples/tasks/scenarios/barbican/list-orders.json']",16,01a7a26cd0ec817365b74a0dbf820b3e3e8c6f70,barbican,"{ ""BarbicanOrders.list"": [ { ""runner"": { ""type"": ""constant"", ""times"": 2, ""concurrency"": 1 }, ""context"": { ""users"": { ""tenants"": 1, ""users_per_tenant"": 1 } }, ""sla"": { ""failure_rate"": { ""max"": 0 } } } ] } ",,435,20
openstack%2Fhorizon~master~Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325,openstack/horizon,master,Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325,Allow to select multiattach volume that has been attached,MERGED,2019-05-27 03:56:59.000000000,2019-08-08 17:08:10.000000000,2019-08-08 07:52:15.000000000,"[{'_account_id': 841}, {'_account_id': 1736}, {'_account_id': 6873}, {'_account_id': 8556}, {'_account_id': 8648}, {'_account_id': 9171}, {'_account_id': 22053}, {'_account_id': 22348}, {'_account_id': 27738}, {'_account_id': 27822}, {'_account_id': 29313}]","[{'number': 1, 'created': '2019-05-27 03:56:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/64b69fe3cb59a636c9a9046945f88078603dbceb', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\n'}, {'number': 2, 'created': '2019-05-29 10:29:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/3569a96fabaefaff1a4d25c3ca2774a74dadfb2c', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 3, 'created': '2019-05-29 16:17:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/c5a208400f8c4da27b030c640f9004e46852dc83', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 4, 'created': '2019-06-07 10:24:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/e9fa119e9fbbbba0bc8e391e8246c2934c18c379', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 5, 'created': '2019-06-11 08:28:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/10a2b14055fc88feb28965a5d6fdd85f7a4cd469', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 6, 'created': '2019-06-19 12:26:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/a903c0a63df3a30d8f7b5a978aa3fb53471a71b8', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 7, 'created': '2019-07-15 09:00:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/83d527ca45acf2b018f9fcd060047e5b1407f269', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 8, 'created': '2019-07-18 15:38:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/b5ebf2b6343c0a710b1a0808f4811e9b83f102e7', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 9, 'created': '2019-07-19 14:18:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/c4720c70a12a5e0a3ababdda022c9ff41f51deab', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 10, 'created': '2019-07-30 08:14:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/c536de27ff8dbcf11a7710a18789e14cf921587d', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 11, 'created': '2019-07-30 08:21:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/6b731d05fe4de626638adf5f1241655f444313af', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}, {'number': 12, 'created': '2019-07-30 10:33:56.000000000', 'files': ['openstack_dashboard/dashboards/project/instances/tests.py', 'releasenotes/notes/multi-attached-volume-support-3d32cde6f296cdd9.yaml', 'openstack_dashboard/dashboards/project/instances/forms.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/86e1960f99d3163eaead4968cf67fdbf43d8ba76', 'message': 'Allow to select multiattach volume that has been attached\n\nWhen one multiattach enable volume is attached to one instance,\nit can be only attached to another instance by cli. This patch\nallows users to do so from horizon\n\nPart of blueprint multi-attach-volume\n\nChange-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325\nCo-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>\n'}]",59,661526,86e1960f99d3163eaead4968cf67fdbf43d8ba76,73,11,12,27738,,,0,"Allow to select multiattach volume that has been attached

When one multiattach enable volume is attached to one instance,
it can be only attached to another instance by cli. This patch
allows users to do so from horizon

Part of blueprint multi-attach-volume

Change-Id: Ic65d84d00a9113b7ee71f06b9c41cd09dcaa1325
Co-Authored-By: Vishal Manchanda <manchandavishal143@gmail.com>
",git fetch https://review.opendev.org/openstack/horizon refs/changes/26/661526/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_dashboard/dashboards/project/instances/forms.py'],1,64b69fe3cb59a636c9a9046945f88078603dbceb,bp/multi-attach-volume," # Or those with multiattach enabled if not volume.attachments or getattr(volume, 'multiattach', False):", if not volume.attachments:,2,1
openstack%2Fnova~stable%2Frocky~I1c62a0a5be6c44176b5714af00cc181eb5437585,openstack/nova,stable/rocky,I1c62a0a5be6c44176b5714af00cc181eb5437585,Add functional regression test for bug 1778305,MERGED,2019-07-31 13:52:03.000000000,2019-08-08 17:02:34.000000000,2019-08-08 17:02:34.000000000,"[{'_account_id': 4393}, {'_account_id': 4690}, {'_account_id': 7634}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-31 13:52:03.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1778305.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/36246000949f29036ed5b9eed563975d063b29c9', 'message': 'Add functional regression test for bug 1778305\n\nThis tests the scenario where an operator has upgraded from Ocata =>\nPike but has old, deleted services that share the same hostname with\ncurrently existing, running services. The current behavior is that\nServiceTooOld is raised when we try to generate a UUID for the old,\ndeleted service while querying for a list of instances. After the bug\nis fixed, we should be able to successfully query for a list of\ninstances.\n\nRelated-Bug: #1778305\n\nChange-Id: I1c62a0a5be6c44176b5714af00cc181eb5437585\n(cherry picked from commit 1d9aaef3d1c880b02d6b7c186e8de79cbaac9ae0)\n(cherry picked from commit 06ae1ff21495a51d24376c457f51162e17ae3235)\n'}]",0,673818,36246000949f29036ed5b9eed563975d063b29c9,8,5,1,6873,,,0,"Add functional regression test for bug 1778305

This tests the scenario where an operator has upgraded from Ocata =>
Pike but has old, deleted services that share the same hostname with
currently existing, running services. The current behavior is that
ServiceTooOld is raised when we try to generate a UUID for the old,
deleted service while querying for a list of instances. After the bug
is fixed, we should be able to successfully query for a list of
instances.

Related-Bug: #1778305

Change-Id: I1c62a0a5be6c44176b5714af00cc181eb5437585
(cherry picked from commit 1d9aaef3d1c880b02d6b7c186e8de79cbaac9ae0)
(cherry picked from commit 06ae1ff21495a51d24376c457f51162e17ae3235)
",git fetch https://review.opendev.org/openstack/nova refs/changes/18/673818/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1778305.py'],1,36246000949f29036ed5b9eed563975d063b29c9,bug/1764556,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import nova.context from nova.db import api as db from nova import objects from nova import test class InstanceListWithOldDeletedServiceTestCase(test.TestCase): def setUp(self): super(InstanceListWithOldDeletedServiceTestCase, self).setUp() self.context = nova.context.RequestContext('fake-user', 'fake-project') def test_instance_list_old_deleted_service_with_no_uuid(self): # Create a nova-compute service record with a host that will match the # instance's host, with no uuid. We can't do this through the # Service object because it will automatically generate a uuid. # Use service version 9, which is too old compared to the minimum # version in the rest of the deployment. service = db.service_create(self.context, {'host': 'fake-host', 'binary': 'nova-compute', 'version': 9}) self.assertIsNone(service['uuid']) # Now delete it. db.service_destroy(self.context, service['id']) # Create a new service with the same host name that has a UUID and a # current version. new_service = objects.Service(context=self.context, host='fake-host', binary='nova-compute') new_service.create() # Create an instance whose host will match both services, including the # deleted one. inst = objects.Instance(context=self.context, project_id=self.context.project_id, host='fake-host') inst.create() # TODO(melwitt): Remove this assert when the bug is fixed. self.assertRaises(nova.exception.ServiceTooOld, objects.InstanceList.get_by_filters, self.context, {}, expected_attrs=['services']) # TODO(melwitt): Uncomment these asserts when the bug is fixed. # insts = objects.InstanceList.get_by_filters( # self.context, {}, expected_attrs=['services']) # self.assertEqual(1, len(insts)) # self.assertEqual(2, len(insts[0].services)) # Deleted service should not have a UUID # for service in insts[0].services: # if service.deleted: # self.assertNotIn('uuid', service) # else: # self.assertIsNotNone(service.uuid) ",,67,0
openstack%2Fnova~stable%2Frocky~I4d60da26fcf0a77628d1fdf4e818884614fa4f02,openstack/nova,stable/rocky,I4d60da26fcf0a77628d1fdf4e818884614fa4f02,Add functional recreate test for bug 1764556,MERGED,2019-07-31 13:48:42.000000000,2019-08-08 17:02:26.000000000,2019-08-08 17:02:25.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-31 13:48:42.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1764556.py', 'nova/db/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/eadd78efe39e1958d14319cfcdbda15862485845', 'message': 'Add functional recreate test for bug 1764556\n\nThis attempts to recreate the following scenario:\n\n1) boot instance on ocata host where the compute service\n   does not have a uuid\n2) migrate instance\n3) delete the ocata service (thus deleting the compute node)\n4) start compute service with the same name\n5) migrate instance to newly-created compute node\n6) upgrade to pike where services.uuid data migration happens\n7) list instances as admin to join on the services table\n\nThe failure occurs when listing instances because the deleted\nservice with the same name as the compute host that the instance\nis running on gets pulled from the DB and the Service object\nattempts to set a uuid on it, which fails since it\'s not using\na read_deleted=""yes"" context.\n\nWhile working on this, the service_get_all_by_binary DB API\nmethod had to be fixed to not hard-code read_deleted=""no"" since\nthe test needs to be able to read deleted services, which it can\ncontrol via its own context object (note that\nRequestContext.read_deleted already defaults to ""no"" so the\nhard-coding in the DB API is unnecessarily restrictive).\n\nNOTE(mriedem): This backport needed to account for not having\nchange Idaed39629095f86d24a54334c699a26c218c6593 in Rocky so\nthe PlacementFixture comes from the same module as the other\nnova fixtures.\n\nChange-Id: I4d60da26fcf0a77628d1fdf4e818884614fa4f02\nRelated-Bug: #1764556\n(cherry picked from commit 81f05f53d357a546c7f9a53cae6ef45b92e28bc1)\n(cherry picked from commit 44709cfb5cfa6a8a384eb391ad520de55b2fa247)\n'}]",2,673816,eadd78efe39e1958d14319cfcdbda15862485845,11,7,1,6873,,,0,"Add functional recreate test for bug 1764556

This attempts to recreate the following scenario:

1) boot instance on ocata host where the compute service
   does not have a uuid
2) migrate instance
3) delete the ocata service (thus deleting the compute node)
4) start compute service with the same name
5) migrate instance to newly-created compute node
6) upgrade to pike where services.uuid data migration happens
7) list instances as admin to join on the services table

The failure occurs when listing instances because the deleted
service with the same name as the compute host that the instance
is running on gets pulled from the DB and the Service object
attempts to set a uuid on it, which fails since it's not using
a read_deleted=""yes"" context.

While working on this, the service_get_all_by_binary DB API
method had to be fixed to not hard-code read_deleted=""no"" since
the test needs to be able to read deleted services, which it can
control via its own context object (note that
RequestContext.read_deleted already defaults to ""no"" so the
hard-coding in the DB API is unnecessarily restrictive).

NOTE(mriedem): This backport needed to account for not having
change Idaed39629095f86d24a54334c699a26c218c6593 in Rocky so
the PlacementFixture comes from the same module as the other
nova fixtures.

Change-Id: I4d60da26fcf0a77628d1fdf4e818884614fa4f02
Related-Bug: #1764556
(cherry picked from commit 81f05f53d357a546c7f9a53cae6ef45b92e28bc1)
(cherry picked from commit 44709cfb5cfa6a8a384eb391ad520de55b2fa247)
",git fetch https://review.opendev.org/openstack/nova refs/changes/16/673816/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/regressions/test_bug_1764556.py', 'nova/db/sqlalchemy/api.py']",2,eadd78efe39e1958d14319cfcdbda15862485845,bug/1764556," query = model_query(context, models.Service).filter_by(binary=binary)"," query = model_query(context, models.Service, read_deleted=""no"").\ filter_by(binary=binary)",163,2
openstack%2Fnova~stable%2Frocky~I52c8d038118c858004e17e71b2fba9e9e2714815,openstack/nova,stable/rocky,I52c8d038118c858004e17e71b2fba9e9e2714815,Drop source node allocations if finish_resize fails,MERGED,2019-07-05 16:15:51.000000000,2019-08-08 17:02:18.000000000,2019-08-08 17:02:18.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 14595}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-05 16:15:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b65464e42fb2bd5afde014fbc1758e50ac4e0c55', 'message': 'WIP: Drop source node allocations if finish_resize fails\n\nBy the time finish_resize runs on the dest host, the instance\nhost/node values are already pointing at the dest (they are\nset by resize_instance on the source compute before casting to\nfinish_resize on the dest). If finish_resize fails, the instance\nis essentially stuck on the dest host so rather than revert the\nallocations (which will drop the new flavor allocations against\nthe dest host where the instance now lives) we should just drop\nthe old flavor allocations on the source node resource provider,\nwhich is what this change does.\n\nThe functional regression recreate test is updated to show this\nworking.\n\nConflicts:\n      nova/tests/functional/regressions/test_bug_1825537.py\n      nova/tests/functional/test_servers.py\n\nNOTE(mriedem): The functional test conflicts are due to not having\nchange If6aa37d9b6b48791e070799ab026c816fda4441c in Rocky.\nThe code fix is also different because we don\'t have change\nI0851e2d54a1fdc82fe3291fb7e286e790f121e92 in Rocky and cannot use\nthe _delete_allocation_after_move method as documented inline.\nThis also means we have to deal with migration-based and legacy\ntracked allocations (where the source and dest node allocations\nare both on the instance consumer). As such, similar logic to\n_delete_allocation_after_move is used to try and delete the\nmigration-based allocations first and failing that, attempt\nto cleanup the source node allocations the legacy way by removing\nthem from the ""doubled up"" allocations created by the scheduler.\n\nChange-Id: I52c8d038118c858004e17e71b2fba9e9e2714815\nCloses-Bug: #1825537\n(cherry picked from commit ea297d6ffba81c5dc982afe6519de09ff3744cad)\n(cherry picked from commit e6c6178d22db43959103da1400017fa49b18f514)\n'}, {'number': 2, 'created': '2019-07-05 16:31:07.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/compute/manager.py', 'nova/tests/functional/test_servers.py', 'nova/tests/functional/regressions/test_bug_1825537.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/cbf6a46d8fcd3236bff44439c8d143a77167dfe2', 'message': 'Drop source node allocations if finish_resize fails\n\nBy the time finish_resize runs on the dest host, the instance\nhost/node values are already pointing at the dest (they are\nset by resize_instance on the source compute before casting to\nfinish_resize on the dest). If finish_resize fails, the instance\nis essentially stuck on the dest host so rather than revert the\nallocations (which will drop the new flavor allocations against\nthe dest host where the instance now lives) we should just drop\nthe old flavor allocations on the source node resource provider,\nwhich is what this change does.\n\nThe functional regression recreate test is updated to show this\nworking.\n\nConflicts:\n      nova/tests/functional/regressions/test_bug_1825537.py\n      nova/tests/functional/test_servers.py\n\nNOTE(mriedem): The functional test conflicts are due to not having\nchange If6aa37d9b6b48791e070799ab026c816fda4441c in Rocky.\nThe code fix is also different because we don\'t have change\nI0851e2d54a1fdc82fe3291fb7e286e790f121e92 in Rocky and cannot use\nthe _delete_allocation_after_move method as documented inline.\nThis also means we have to deal with migration-based and legacy\ntracked allocations (where the source and dest node allocations\nare both on the instance consumer). As such, similar logic to\n_delete_allocation_after_move is used to try and delete the\nmigration-based allocations first and failing that, attempt\nto cleanup the source node allocations the legacy way by removing\nthem from the ""doubled up"" allocations created by the scheduler.\nSince this is new logic in the backport, a functional test is\nadded to cover the legacy cleanup flow.\n\nChange-Id: I52c8d038118c858004e17e71b2fba9e9e2714815\nCloses-Bug: #1825537\n(cherry picked from commit ea297d6ffba81c5dc982afe6519de09ff3744cad)\n(cherry picked from commit e6c6178d22db43959103da1400017fa49b18f514)\n'}]",3,669393,cbf6a46d8fcd3236bff44439c8d143a77167dfe2,14,8,2,6873,,,0,"Drop source node allocations if finish_resize fails

By the time finish_resize runs on the dest host, the instance
host/node values are already pointing at the dest (they are
set by resize_instance on the source compute before casting to
finish_resize on the dest). If finish_resize fails, the instance
is essentially stuck on the dest host so rather than revert the
allocations (which will drop the new flavor allocations against
the dest host where the instance now lives) we should just drop
the old flavor allocations on the source node resource provider,
which is what this change does.

The functional regression recreate test is updated to show this
working.

Conflicts:
      nova/tests/functional/regressions/test_bug_1825537.py
      nova/tests/functional/test_servers.py

NOTE(mriedem): The functional test conflicts are due to not having
change If6aa37d9b6b48791e070799ab026c816fda4441c in Rocky.
The code fix is also different because we don't have change
I0851e2d54a1fdc82fe3291fb7e286e790f121e92 in Rocky and cannot use
the _delete_allocation_after_move method as documented inline.
This also means we have to deal with migration-based and legacy
tracked allocations (where the source and dest node allocations
are both on the instance consumer). As such, similar logic to
_delete_allocation_after_move is used to try and delete the
migration-based allocations first and failing that, attempt
to cleanup the source node allocations the legacy way by removing
them from the ""doubled up"" allocations created by the scheduler.
Since this is new logic in the backport, a functional test is
added to cover the legacy cleanup flow.

Change-Id: I52c8d038118c858004e17e71b2fba9e9e2714815
Closes-Bug: #1825537
(cherry picked from commit ea297d6ffba81c5dc982afe6519de09ff3744cad)
(cherry picked from commit e6c6178d22db43959103da1400017fa49b18f514)
",git fetch https://review.opendev.org/openstack/nova refs/changes/93/669393/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/compute/manager.py', 'nova/tests/functional/test_servers.py', 'nova/tests/functional/regressions/test_bug_1825537.py']",4,b65464e42fb2bd5afde014fbc1758e50ac4e0c55,bug/1825537," self.assertFlavorMatchesAllocation(self.flavor2, dest_rp_usages) # And the source node provider should not have any usage. source_rp_usages = self._get_provider_usages(source_rp_uuid) self.assertEqual(no_usage, source_rp_usages)"," # FIXME(mriedem): This is bug 1825537 where the allocations are # reverted when finish_resize fails so the dest node resource provider # does not have any allocations and the instance allocations are for # the old flavor on the source node resource provider even though the # instance is not running on the source host nor pointed at the source # host in the DB. # self.assertFlavorMatchesAllocation( # self.flavor2, server['id'], dest_rp_uuid) self.assertEqual(no_usage, dest_rp_usages) source_usages = self._get_provider_usages(source_rp_uuid) self.assertFlavorMatchesAllocation(self.flavor1, source_usages)",60,18
openstack%2Fneutron~master~Ibd3fb9286cbf6906eb4a1bc5a43194fbf36f8a60,openstack/neutron,master,Ibd3fb9286cbf6906eb4a1bc5a43194fbf36f8a60,remove try_again from _commit_port_binding,MERGED,2019-08-07 06:39:01.000000000,2019-08-08 17:02:12.000000000,2019-08-08 17:02:11.000000000,"[{'_account_id': 1131}, {'_account_id': 9732}, {'_account_id': 11975}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 26622}, {'_account_id': 30380}]","[{'number': 1, 'created': '2019-08-07 06:39:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d039c4a6e9071e67a77461cc236a6f33b7564d9e', 'message': 'remove try_again from _commit_port_binding\n\nthe parameter try_again is not used in the method.\n\nChange-Id: Ibd3fb9286cbf6906eb4a1bc5a43194fbf36f8a60\n'}, {'number': 2, 'created': '2019-08-08 00:42:18.000000000', 'files': ['neutron/tests/unit/plugins/ml2/test_plugin.py', 'neutron/plugins/ml2/plugin.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/296f92f5c4158162f9cbf2558b52d2cf7cf3178c', 'message': 'remove try_again from _commit_port_binding\n\nthe parameter try_again is not used in the method.\n\nChange-Id: Ibd3fb9286cbf6906eb4a1bc5a43194fbf36f8a60\n'}]",4,675034,296f92f5c4158162f9cbf2558b52d2cf7cf3178c,18,8,2,30380,,,0,"remove try_again from _commit_port_binding

the parameter try_again is not used in the method.

Change-Id: Ibd3fb9286cbf6906eb4a1bc5a43194fbf36f8a60
",git fetch https://review.opendev.org/openstack/neutron refs/changes/34/675034/2 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/plugins/ml2/test_plugin.py', 'neutron/plugins/ml2/plugin.py']",2,d039c4a6e9071e67a77461cc236a6f33b7564d9e,," need_notify)) need_notify, update_binding_levels=True): update_binding_levels=False)"," need_notify, try_again)) need_notify, try_again, update_binding_levels=True): try_again=True, update_binding_levels=False)",4,5
openstack%2Fnova~stable%2Frocky~I7d761dc269f8c12c4a76ba14201ccdd82a04d01d,openstack/nova,stable/rocky,I7d761dc269f8c12c4a76ba14201ccdd82a04d01d,"Revert ""[libvirt] Filter hypervisor_type by virt_type""",MERGED,2019-07-25 14:35:08.000000000,2019-08-08 17:02:07.000000000,2019-08-08 17:02:07.000000000,"[{'_account_id': 4393}, {'_account_id': 7634}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-25 14:35:08.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/5f0497e5952eab583346c96b56e4110041ab4f27', 'message': 'Revert ""[libvirt] Filter hypervisor_type by virt_type""\n\nThis reverts commit eaa766ee2093c24fd61c61e52f46bdd9ff9e93d2.\n\nThe change regressed the behavior of the ImagePropertiesFilter\nbecause existing images with hypervisor_type=QEMU, which would\nmatch what is reported for hypervisor_type in the API for both\nqemu/kvm virt_type nodes, will now get filtered out for hosts\nwhere the configured virt_type is kvm.\n\nNote that both the ImagePropertiesFilter docs [1] and\nhypervisor_type image property docs [2] mention that for both\nqemu and kvm nodes the value to use is qemu since that is the\nactual hypervisor.\n\nPresumably the change was made for a deployment with some\nhosts configured with virt_type=qemu and other hosts configured\nwith virt_type=kvm and there were separate images with\nhypervisor_type=qemu and hypervisor_type=kvm to match those hosts\nfor scheduler filter, but as noted this was a regression in\nbehavior for something that could have been achieved using\nhost aggregates and the AggregateImagePropertiesIsolation filter.\n\nWe could even use traits and a placement request pre-filter these\ndays for a more modern approach.\n\nAlso, since the API continues to report hypervisor_type=QEMU it\'s\ndoubly confusing for operators to have to configure their images\nto use hypervisor_type=kvm (despite the docs).\n\nAnd finally, any existing instances which have hypervisor_type=qemu\nembedded in their RequestSpec can no longer be migrated to kvm\nhosts without manually fixing the entries in the request_specs\ntable in the API DB.\n\nNote that this is not a clean revert because of change\nI5d95bd50279a6bf903a5793ad5f3ae9d06f085f4 made in Stein.\n\n[1] https://docs.openstack.org/nova/latest/admin/configuration/schedulers.html#imagepropertiesfilter\n[2] https://docs.openstack.org/glance/latest/admin/useful-image-properties.html\n\nChange-Id: I7d761dc269f8c12c4a76ba14201ccdd82a04d01d\nCloses-Bug: #1837756\n(cherry picked from commit 743dc083bb5628554d9abfa82665738233ed47e9)\n(cherry picked from commit 45f290e36c797a271a20a3055ee866fa5b7997a8)\n'}]",0,672747,5f0497e5952eab583346c96b56e4110041ab4f27,11,7,1,6873,,,0,"Revert ""[libvirt] Filter hypervisor_type by virt_type""

This reverts commit eaa766ee2093c24fd61c61e52f46bdd9ff9e93d2.

The change regressed the behavior of the ImagePropertiesFilter
because existing images with hypervisor_type=QEMU, which would
match what is reported for hypervisor_type in the API for both
qemu/kvm virt_type nodes, will now get filtered out for hosts
where the configured virt_type is kvm.

Note that both the ImagePropertiesFilter docs [1] and
hypervisor_type image property docs [2] mention that for both
qemu and kvm nodes the value to use is qemu since that is the
actual hypervisor.

Presumably the change was made for a deployment with some
hosts configured with virt_type=qemu and other hosts configured
with virt_type=kvm and there were separate images with
hypervisor_type=qemu and hypervisor_type=kvm to match those hosts
for scheduler filter, but as noted this was a regression in
behavior for something that could have been achieved using
host aggregates and the AggregateImagePropertiesIsolation filter.

We could even use traits and a placement request pre-filter these
days for a more modern approach.

Also, since the API continues to report hypervisor_type=QEMU it's
doubly confusing for operators to have to configure their images
to use hypervisor_type=kvm (despite the docs).

And finally, any existing instances which have hypervisor_type=qemu
embedded in their RequestSpec can no longer be migrated to kvm
hosts without manually fixing the entries in the request_specs
table in the API DB.

Note that this is not a clean revert because of change
I5d95bd50279a6bf903a5793ad5f3ae9d06f085f4 made in Stein.

[1] https://docs.openstack.org/nova/latest/admin/configuration/schedulers.html#imagepropertiesfilter
[2] https://docs.openstack.org/glance/latest/admin/useful-image-properties.html

Change-Id: I7d761dc269f8c12c4a76ba14201ccdd82a04d01d
Closes-Bug: #1837756
(cherry picked from commit 743dc083bb5628554d9abfa82665738233ed47e9)
(cherry picked from commit 45f290e36c797a271a20a3055ee866fa5b7997a8)
",git fetch https://review.opendev.org/openstack/nova refs/changes/47/672747/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",2,5f0497e5952eab583346c96b56e4110041ab4f27,bug/1195361," def test_get_instance_capabilities(self): want = [(fields.Architecture.X86_64, 'kvm', 'hvm'), (fields.Architecture.X86_64, 'qemu', 'hvm'), (fields.Architecture.I686, 'kvm', 'hvm')]"," def _test_get_instance_capabilities(self, want): '''Base test for 'get_capabilities' function. ''' def test_get_instance_capabilities_kvm(self): self.flags(virt_type='kvm', group='libvirt') # Because virt_type is set to kvm, we get only # capabilities where the hypervisor_type is kvm want = [(fields.Architecture.X86_64, 'kvm', 'hvm'), (fields.Architecture.I686, 'kvm', 'hvm')] self._test_get_instance_capabilities(want) def test_get_instance_capabilities_qemu(self): self.flags(virt_type='qemu', group='libvirt') # Because virt_type is set to qemu, we get only # capabilities where the hypervisor_type is qemu want = [(fields.Architecture.X86_64, 'qemu', 'hvm')] self._test_get_instance_capabilities(want) ",4,26
openstack%2Fnova~master~Id112098ef7603d0e514120ac9b7ed861dfa32bd3,openstack/nova,master,Id112098ef7603d0e514120ac9b7ed861dfa32bd3,Functional reproduce for bug 1833581,MERGED,2019-06-27 12:21:30.000000000,2019-08-08 16:49:00.000000000,2019-08-06 22:01:25.000000000,"[{'_account_id': 6873}, {'_account_id': 9008}, {'_account_id': 9708}, {'_account_id': 14070}, {'_account_id': 14384}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-06-27 12:21:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d2e800bc90284bf42487d8b91fc7cad96c2aa391', 'message': 'Functional reproduce for bug 1833581\n\nChange-Id: Id112098ef7603d0e514120ac9b7ed861dfa32bd3\nRelated-Bug: #1833581\n'}, {'number': 2, 'created': '2019-08-01 16:04:45.000000000', 'files': ['nova/tests/functional/compute/test_init_host.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/d2e0bd81df6a732f9c78df29538db89dda37b246', 'message': 'Functional reproduce for bug 1833581\n\nChange-Id: Id112098ef7603d0e514120ac9b7ed861dfa32bd3\nRelated-Bug: #1833581\n'}]",21,667913,d2e0bd81df6a732f9c78df29538db89dda37b246,28,12,2,9708,,,0,"Functional reproduce for bug 1833581

Change-Id: Id112098ef7603d0e514120ac9b7ed861dfa32bd3
Related-Bug: #1833581
",git fetch https://review.opendev.org/openstack/nova refs/changes/13/667913/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1833581.py'],1,d2e800bc90284bf42487d8b91fc7cad96c2aa391,bug/1833581,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import mock import time from nova import context from nova.tests.functional import integrated_helpers from nova.tests.unit import fake_notifier class TestComputeRestartInstanceStuckInBuild( integrated_helpers.ProviderUsageBaseTestCase): compute_driver = 'fake.SmallFakeDriver' def setUp(self): super(TestComputeRestartInstanceStuckInBuild, self).setUp() self.compute1 = self._start_compute(host='host1') flavors = self.api.get_flavors() self.flavor1 = flavors[0] def test_restart_compute_while_instance_waiting_for_resource_claim(self): """"""Regression test for bug 1833581 where an instance is stuck in BUILD state forever due to compute service is restarted before the resource claim finished. """""" # To reproduce the problem we need to stop / kill the compute service # when an instance build request is already reached the service but # the instance_claim() have not been finished. One way that this # happens in practice is when multiple builds are waiting for the # 'nova-compute-resource' semaphore. So one way to reproduce this in # the test would be to grab that semaphore, boot an instance, wait for # it to reach the compute then stop the compute. # Unfortunately when we release the semaphore after the simulated # compute restart the original instance_claim execution continues as # the stopped compute doesn't 100% stopped in the func test env. Also # we cannot really keep the semaphore forever as this named semaphore # is shared between the old and new compute service. # There is another way to trigger the issue. We can inject a sleep into # instance_claim() to stop it. This is less realistic but it works in # the test env. self.flags(instance_build_timeout=1) server_req = self._build_minimal_create_server_request( self.api, 'interrupted-server', flavor_id=self.flavor1['id'], image_uuid='155d900f-4e14-4e4c-a73d-069cbf4541e6', networks='none', az='nova:host1') def sleep_forever(*args, **kwargs): time.sleep(1000000) with mock.patch('nova.compute.resource_tracker.ResourceTracker.' 'instance_claim') as mock_instance_claim: mock_instance_claim.side_effect = sleep_forever server = self.api.post_server({'server': server_req}) self._wait_for_state_change(self.admin_api, server, 'BUILD') # the instance.create.start is the closest thing to the # instance_claim call we can wait for in the test fake_notifier.wait_for_versioned_notifications( 'instance.create.start') self.restart_compute_service(self.compute1) # This is bug 1833581 as the server remains in BUILD state after the # compute restart. self._wait_for_state_change(self.admin_api, server, 'BUILD') # Not even the periodic task push this server to ERROR self.compute1.manager._check_instance_build_time( context.get_admin_context()) server = self.admin_api.get_server(server['id']) self.assertEqual('BUILD', server['status']) # We expect that the instance is pushed to ERROR state during the # compute restart. # self._wait_for_state_change(self.admin_api, server, 'ERROR') ",,88,0
openstack%2Fdevstack~stable%2Fstein~I92146e04731efc6dcc632ae6c3a7c374e783cdba,openstack/devstack,stable/stein,I92146e04731efc6dcc632ae6c3a7c374e783cdba,Fix double quoting issue when writing localconf,ABANDONED,2019-07-31 08:31:28.000000000,2019-08-08 16:28:33.000000000,,"[{'_account_id': 10459}, {'_account_id': 13252}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-31 08:31:28.000000000', 'files': ['roles/write-devstack-local-conf/library/devstack_local_conf.py', 'roles/write-devstack-local-conf/library/test.py'], 'web_link': 'https://opendev.org/openstack/devstack/commit/e5410548190860a25c6fbea03737169f1c36d410', 'message': 'Fix double quoting issue when writing localconf\n\nWhen [0] introduced quoting all arguments, it broke existing consumers\nthat already quote their value themselves. Fix this by avoiding to add\nadditional quotes to the value when it already starts with a double\nquote.\n\n[0] https://review.openstack.org/636078\n\nCherry-pick note: the original commit fixed a regression (1822453)\nintroduced by [0] by replacing it completely; the original commit\nhas not thus been backported.\n\nChange-Id: I92146e04731efc6dcc632ae6c3a7c374e783cdba\n(cherry picked from commit 7f0b4f3001575d1419c5020e007ce2c841c88f2f)\n'}]",0,673754,e5410548190860a25c6fbea03737169f1c36d410,4,3,1,10459,,,0,"Fix double quoting issue when writing localconf

When [0] introduced quoting all arguments, it broke existing consumers
that already quote their value themselves. Fix this by avoiding to add
additional quotes to the value when it already starts with a double
quote.

[0] https://review.openstack.org/636078

Cherry-pick note: the original commit fixed a regression (1822453)
introduced by [0] by replacing it completely; the original commit
has not thus been backported.

Change-Id: I92146e04731efc6dcc632ae6c3a7c374e783cdba
(cherry picked from commit 7f0b4f3001575d1419c5020e007ce2c841c88f2f)
",git fetch https://review.opendev.org/openstack/devstack refs/changes/54/673754/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/write-devstack-local-conf/library/devstack_local_conf.py', 'roles/write-devstack-local-conf/library/test.py']",2,e5410548190860a25c6fbea03737169f1c36d410,," def test_avoid_double_quote(self): ""Test that there a no duplicated quotes"" localrc = {'TESTVAR': '""quoted value""'} p = dict(localrc=localrc, base_services=[], base_dir='./test', path=os.path.join(self.tmpdir, 'test.local.conf'), projects={}) lc = self._init_localconf(p) lc.write(p['path']) testvar = None with open(p['path']) as f: for line in f: if line.startswith('TESTVAR'): testvar = line.strip().split('=')[1] self.assertEqual('""quoted value""', testvar) ",,23,1
openstack%2Fkuryr-kubernetes~master~Ie1b80082627bc49fc3e396333dedbf79e22e63c4,openstack/kuryr-kubernetes,master,Ie1b80082627bc49fc3e396333dedbf79e22e63c4,Ensure leftover ports are deleted upon kuryr-controller restart,MERGED,2019-08-05 12:17:28.000000000,2019-08-08 16:26:40.000000000,2019-08-08 16:26:40.000000000,"[{'_account_id': 6598}, {'_account_id': 11600}, {'_account_id': 14352}, {'_account_id': 22348}, {'_account_id': 23567}, {'_account_id': 27032}]","[{'number': 1, 'created': '2019-08-05 12:17:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/9b3b39c219f94eaa82ab824cc035dbf7505bd3e2', 'message': 'Ensure leftover ports are deleted upon kuryr-controller restart\n\nThis patch ensures that no leftover ports are left behind. It may\nhappen that the kuryr-controller crashes before either attaching\nthe subports to the trunk or before tagging them. This patch checks\nthe existing ports in properly created (and tagged) networks and\ndeletes the ones that did not complete their creation process, i.e.,\nDevice Owner set to compute:kuryr and status DOWN with:\n- Not properly tagged if tags are used\n- No binding information in the non-nested case\n\nChange-Id: Ie1b80082627bc49fc3e396333dedbf79e22e63c4\n'}, {'number': 2, 'created': '2019-08-05 16:50:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/8f2b31c0d82874c944c0313c4fb84515b861677e', 'message': 'Ensure leftover ports are deleted upon kuryr-controller restart\n\nThis patch ensures that no leftover ports are left behind. It may\nhappen that the kuryr-controller crashes before either attaching\nthe subports to the trunk or before tagging them. This patch checks\nthe existing ports in properly created (and tagged) networks and\ndeletes the ones that did not complete their creation process, i.e.,\nDevice Owner set to compute:kuryr and status DOWN with:\n- Not properly tagged if tags are used\n- No binding information in the non-nested case\n\nChange-Id: Ie1b80082627bc49fc3e396333dedbf79e22e63c4\n'}, {'number': 3, 'created': '2019-08-06 07:57:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/77d034febac76cde774ab6b742b18b5ac6463063', 'message': 'Ensure leftover ports are deleted upon kuryr-controller restart\n\nThis patch ensures that no leftover ports are left behind. It may\nhappen that the kuryr-controller crashes before either attaching\nthe subports to the trunk or before tagging them. This patch checks\nthe existing ports in properly created (and tagged) networks and\ndeletes the ones that did not complete their creation process, i.e.,\nDevice Owner set to compute:kuryr and status DOWN with:\n- Not properly tagged if tags are used\n- No binding information in the non-nested case\n\nCloses-Bug: 1839062\nChange-Id: Ie1b80082627bc49fc3e396333dedbf79e22e63c4\n'}, {'number': 4, 'created': '2019-08-06 11:27:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/78f960f52cd3e977d33c4c29eb73f821a18b829a', 'message': 'Ensure leftover ports are deleted upon kuryr-controller restart\n\nThis patch ensures that no leftover ports are left behind. It may\nhappen that the kuryr-controller crashes before either attaching\nthe subports to the trunk or before tagging them. This patch checks\nthe existing ports in properly created (and tagged) networks and\ndeletes the ones that did not complete their creation process, i.e.,\nDevice Owner set to compute:kuryr and status DOWN with:\n- Not properly tagged if tags are used\n- No binding information in the non-nested case\n\nCloses-Bug: 1839062\nChange-Id: Ie1b80082627bc49fc3e396333dedbf79e22e63c4\n'}, {'number': 5, 'created': '2019-08-07 16:38:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/20d6b4ed3f6b748ac5732ccffd3baf7eadfebb81', 'message': 'Ensure leftover ports are deleted upon kuryr-controller restart\n\nThis patch ensures that no leftover ports are left behind. It may\nhappen that the kuryr-controller crashes before either attaching\nthe subports to the trunk or before tagging them. This patch checks\nthe existing ports in properly created (and tagged) networks and\ndeletes the ones that did not complete their creation process, i.e.,\nDevice Owner set to compute:kuryr and status DOWN with:\n- Not properly tagged if tags are used\n- No binding information in the non-nested case\n\nCloses-Bug: 1839062\nChange-Id: Ie1b80082627bc49fc3e396333dedbf79e22e63c4\n'}, {'number': 6, 'created': '2019-08-08 12:25:59.000000000', 'files': ['kuryr_kubernetes/controller/drivers/vif_pool.py', 'kuryr_kubernetes/tests/unit/controller/drivers/test_vif_pool.py'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/e727a529998dee495a152dea03746bdb84f68527', 'message': 'Ensure leftover ports are deleted upon kuryr-controller restart\n\nThis patch ensures that no leftover ports are left behind. It may\nhappen that the kuryr-controller crashes before either attaching\nthe subports to the trunk or before tagging them. This patch checks\nthe existing ports in properly created (and tagged) networks and\ndeletes the ones that did not complete their creation process, i.e.,\nDevice Owner set to compute:kuryr and status DOWN with:\n- Not properly tagged if tags are used\n- No binding information in the non-nested case\n\nCloses-Bug: 1839062\nChange-Id: Ie1b80082627bc49fc3e396333dedbf79e22e63c4\n'}]",3,674585,e727a529998dee495a152dea03746bdb84f68527,33,6,6,23567,,,0,"Ensure leftover ports are deleted upon kuryr-controller restart

This patch ensures that no leftover ports are left behind. It may
happen that the kuryr-controller crashes before either attaching
the subports to the trunk or before tagging them. This patch checks
the existing ports in properly created (and tagged) networks and
deletes the ones that did not complete their creation process, i.e.,
Device Owner set to compute:kuryr and status DOWN with:
- Not properly tagged if tags are used
- No binding information in the non-nested case

Closes-Bug: 1839062
Change-Id: Ie1b80082627bc49fc3e396333dedbf79e22e63c4
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/85/674585/6 && git format-patch -1 --stdout FETCH_HEAD,['kuryr_kubernetes/controller/drivers/vif_pool.py'],1,9b3b39c219f94eaa82ab824cc035dbf7505bd3e2,pools-with-tags," self._cleanup_leftover_ports() def _cleanup_leftover_ports(self): neutron = clients.get_neutron_client() attrs = {'device_owner': kl_const.DEVICE_OWNER, 'status': 'DOWN'} existing_ports = self._get_ports_by_attrs(**attrs) tags = config.CONF.neutron_defaults.resource_tags if tags: deployment_nets = [] non_deployment_nets = [] for port in existing_ports: net_id = port['network_id'] if (net_id not in deployment_nets and net_id not in non_deployment_nets): net = neutron.get_network(port['network_id']) for tag in tags: if tag not in net['tags']: non_deployment_nets.append(net_id) break else: deployment_nets.append(net_id) if net_id in deployment_nets: if not port.get('binding:host_id'): # delete port if they have no binding but belong to the # deployment networks, regardless of their tagging neutron.delete_port(port['id']) else: for tag in tags: if tag not in port['tags']: # delete the port if it has binding details, it # belongs to the deployment subnet and it does # not have the right tags neutron.delete_port(port['id']) break else: for port in existing_ports: if not port.get('binding:host_id'): neutron.delete_port(port['id']) ",,40,0
openstack%2Fnova~stable%2Frocky~I6a2c63a4c33e783100208fd3f45eb52aad49e3d6,openstack/nova,stable/rocky,I6a2c63a4c33e783100208fd3f45eb52aad49e3d6,Cleanup when hitting MaxRetriesExceeded from no host_available,MERGED,2019-07-30 15:05:21.000000000,2019-08-08 16:22:10.000000000,2019-08-08 16:22:10.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-30 15:05:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/923b6c45ee276946790d98449e0b8b35bf6b806f', 'message': 'Cleanup when hitting MaxRetriesExceeded from no host_available\n\nPrior to this patch there was a condition when no\nhost_available was true and an exception would get\nraised without first cleaning up the instance.\nThis causes instances to get indefinitely stuck in\na scheduling state.\n\nThis patch fixes this by calling the clean up function\nand then exits build_instances using a return statement.\n\nThe related functional regression recreate test is updated\nto show this fixes the bug.\n\nNOTE(mriedem): There are two changes in this backport. First,\nthe conductor manager.py call to _cleanup_when_reschedule_fails\nchanges to pass request_spec since there is no legacy_request_spec\nsince change If8a13f74d2b3c99f05365eb49dcfa01d9042fefa is not in\nRocky. The test_bug_1837955 setUp needed to stub notifications\nsince change I017d1a31139c9300642dd706eadc265f7c954ca8 is not\nin Rocky to do that in ProviderUsageBaseTestCase.\n\nChange-Id: I6a2c63a4c33e783100208fd3f45eb52aad49e3d6\nCloses-bug: #1837955\n(cherry picked from commit b98d4ba6d54f5ca2999a8fe6b6d7dfcc134061df)\n(cherry picked from commit fcc2b9e33ed2b3d9f469b458e0f46011fe9883ac)\n'}, {'number': 2, 'created': '2019-07-30 15:35:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f2a4c9cecee924af85aa7d743a9ccbd7b47ecb44', 'message': 'Cleanup when hitting MaxRetriesExceeded from no host_available\n\nPrior to this patch there was a condition when no\nhost_available was true and an exception would get\nraised without first cleaning up the instance.\nThis causes instances to get indefinitely stuck in\na scheduling state.\n\nThis patch fixes this by calling the clean up function\nand then exits build_instances using a return statement.\n\nThe related functional regression recreate test is updated\nto show this fixes the bug.\n\nNOTE(mriedem): There are three changes in this backport. First,\nthe conductor manager.py call to _cleanup_when_reschedule_fails\nchanges to pass request_spec since there is no legacy_request_spec\nsince change If8a13f74d2b3c99f05365eb49dcfa01d9042fefa is not in\nRocky. Second, the test_bug_1837955 setUp needed to stub notifications\nsince change I017d1a31139c9300642dd706eadc265f7c954ca8 is not\nin Rocky to do that in ProviderUsageBaseTestCase. Third, the unit\ntest is changed to mock _set_vm_state_and_notify since\nchange Ibfb0a6db5920d921c4fc7cabf3f4d2838ea7f421 is not in Rocky\nfor compute utils to call notify_about_compute_task_error.\n\nChange-Id: I6a2c63a4c33e783100208fd3f45eb52aad49e3d6\nCloses-bug: #1837955\n(cherry picked from commit b98d4ba6d54f5ca2999a8fe6b6d7dfcc134061df)\n(cherry picked from commit fcc2b9e33ed2b3d9f469b458e0f46011fe9883ac)\n'}, {'number': 3, 'created': '2019-07-30 16:17:50.000000000', 'files': ['nova/tests/unit/conductor/test_conductor.py', 'nova/tests/functional/regressions/test_bug_1837955.py', 'nova/conductor/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e3b68a1c8bbedd877cfc988898f7e458ab067f28', 'message': 'Cleanup when hitting MaxRetriesExceeded from no host_available\n\nPrior to this patch there was a condition when no\nhost_available was true and an exception would get\nraised without first cleaning up the instance.\nThis causes instances to get indefinitely stuck in\na scheduling state.\n\nThis patch fixes this by calling the clean up function\nand then exits build_instances using a return statement.\n\nThe related functional regression recreate test is updated\nto show this fixes the bug.\n\nNOTE(mriedem): There are three changes in this backport. First,\nsince bug 1819460 and change I78fc2312274471a7bd85a263de12cc5a0b19fd10\ndo not apply to Rocky, _cleanup_when_reschedule_fails is added here.\nSecond, the test_bug_1837955 setUp needed to stub notifications\nsince change I017d1a31139c9300642dd706eadc265f7c954ca8 is not\nin Rocky to do that in ProviderUsageBaseTestCase. Third, the unit\ntest is changed to mock _set_vm_state_and_notify since\nchange Ibfb0a6db5920d921c4fc7cabf3f4d2838ea7f421 is not in Rocky\nfor compute utils to call notify_about_compute_task_error.\n\nChange-Id: I6a2c63a4c33e783100208fd3f45eb52aad49e3d6\nCloses-bug: #1837955\n(cherry picked from commit b98d4ba6d54f5ca2999a8fe6b6d7dfcc134061df)\n(cherry picked from commit fcc2b9e33ed2b3d9f469b458e0f46011fe9883ac)\n'}]",4,673553,e3b68a1c8bbedd877cfc988898f7e458ab067f28,15,7,3,6873,,,0,"Cleanup when hitting MaxRetriesExceeded from no host_available

Prior to this patch there was a condition when no
host_available was true and an exception would get
raised without first cleaning up the instance.
This causes instances to get indefinitely stuck in
a scheduling state.

This patch fixes this by calling the clean up function
and then exits build_instances using a return statement.

The related functional regression recreate test is updated
to show this fixes the bug.

NOTE(mriedem): There are three changes in this backport. First,
since bug 1819460 and change I78fc2312274471a7bd85a263de12cc5a0b19fd10
do not apply to Rocky, _cleanup_when_reschedule_fails is added here.
Second, the test_bug_1837955 setUp needed to stub notifications
since change I017d1a31139c9300642dd706eadc265f7c954ca8 is not
in Rocky to do that in ProviderUsageBaseTestCase. Third, the unit
test is changed to mock _set_vm_state_and_notify since
change Ibfb0a6db5920d921c4fc7cabf3f4d2838ea7f421 is not in Rocky
for compute utils to call notify_about_compute_task_error.

Change-Id: I6a2c63a4c33e783100208fd3f45eb52aad49e3d6
Closes-bug: #1837955
(cherry picked from commit b98d4ba6d54f5ca2999a8fe6b6d7dfcc134061df)
(cherry picked from commit fcc2b9e33ed2b3d9f469b458e0f46011fe9883ac)
",git fetch https://review.opendev.org/openstack/nova refs/changes/53/673553/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/conductor/test_conductor.py', 'nova/conductor/manager.py', 'nova/tests/functional/regressions/test_bug_1837955.py']",3,923b6c45ee276946790d98449e0b8b35bf6b806f,bug/1837955," def setUp(self): super(BuildRescheduleClaimFailsTestCase, self).setUp() fake_notifier.stub_notifier(self) self.addCleanup(fake_notifier.reset) server = self._wait_for_state_change(self.api, server, 'ERROR') self._wait_for_unversioned_notification( 'compute_task.build_instances') server = self.api.get_server(server['id']) self.assertIn('fault', server) self.assertIn('Exceeded maximum number of retries', server['fault']['message'])"," # FIXME(mriedem): This is bug 1837955 where the status is stuck in # BUILD rather than the vm_state being set to error and the task_state # being set to None. Uncomment this when the bug is fixed. # server = self._wait_for_state_change(self.api, server, 'ERROR') # FIXME(mriedem): Uncomment this when bug 1837955 is fixed. # self._wait_for_unversioned_notification( # 'compute_task.build_instances') # server = self.api.get_server(server['id']) # self.assertIn('fault', server) # self.assertIn('Exceeded maximum number of retries', # server['fault']['message']) # TODO(mriedem): Remove this when the bug is fixed. We need to assert # something before the bug is fixed to show the failure so check the # logs. for x in range(20): logs = self.stdlog.logger.output if 'MaxRetriesExceeded' in logs: break time.sleep(.5) else: self.fail('Timed out waiting for MaxRetriesExceeded to show up ' 'in the logs.')",38,37
openstack%2Fnova~stable%2Frocky~I4ca64dd60d883356880680fb1f04cee4136c2e00,openstack/nova,stable/rocky,I4ca64dd60d883356880680fb1f04cee4136c2e00,Add functional regression test for bug 1837955,MERGED,2019-07-30 14:25:47.000000000,2019-08-08 16:19:54.000000000,2019-08-08 16:19:54.000000000,"[{'_account_id': 4393}, {'_account_id': 6873}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-30 14:25:47.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1837955.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/f292a92a89b452c66b5799ac309a5f623ee7b16c', 'message': 'Add functional regression test for bug 1837955\n\nThis adds a functional regression recreate test for\nbug 1837955 which was introduced with change\nIae904afb6cb4fcea8bb27741d774ffbe986a5fb4 in the Queens\nrelease.\n\nIn this scenario, the primary (and potentially alternate)\nhosts for a server build fail and reschedule to conductor.\nEventually all alternate hosts are exhausted and specifically\ntrying to claim allocations against the alternates fails,\nprobably because between the time of initial scheduling and\nrescheduling something else took up the spare capacity on the\nalternate host.\n\nWhen this happens, MaxRetriesExceeded is raised but the\ninstance is stuck in BUILD status rather than set to ERROR\nstatus with a fault message.\n\nNOTE(mriedem): In this backport the test is changed slighty\nsince change Id8b5c48a6e8cf65dc0a7dc13a80a0a72684f70d9 is\nnot in Rocky so the ProviderUsageBaseTestCase.neutron\nattribute does not exist.\n\nChange-Id: I4ca64dd60d883356880680fb1f04cee4136c2e00\nRelated-Bug: #1837955\n(cherry picked from commit 5cc39fc51eee6e39f584394283f009aa6809d17b)\n(cherry picked from commit 0d2e27fd018e08617964dc38321ebfa8f1a5a4f9)\n'}]",2,673536,f292a92a89b452c66b5799ac309a5f623ee7b16c,8,4,1,6873,,,0,"Add functional regression test for bug 1837955

This adds a functional regression recreate test for
bug 1837955 which was introduced with change
Iae904afb6cb4fcea8bb27741d774ffbe986a5fb4 in the Queens
release.

In this scenario, the primary (and potentially alternate)
hosts for a server build fail and reschedule to conductor.
Eventually all alternate hosts are exhausted and specifically
trying to claim allocations against the alternates fails,
probably because between the time of initial scheduling and
rescheduling something else took up the spare capacity on the
alternate host.

When this happens, MaxRetriesExceeded is raised but the
instance is stuck in BUILD status rather than set to ERROR
status with a fault message.

NOTE(mriedem): In this backport the test is changed slighty
since change Id8b5c48a6e8cf65dc0a7dc13a80a0a72684f70d9 is
not in Rocky so the ProviderUsageBaseTestCase.neutron
attribute does not exist.

Change-Id: I4ca64dd60d883356880680fb1f04cee4136c2e00
Related-Bug: #1837955
(cherry picked from commit 5cc39fc51eee6e39f584394283f009aa6809d17b)
(cherry picked from commit 0d2e27fd018e08617964dc38321ebfa8f1a5a4f9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/36/673536/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1837955.py'],1,f292a92a89b452c66b5799ac309a5f623ee7b16c,bug/1837955,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import time from nova import exception from nova.tests import fixtures as nova_fixtures from nova.tests.functional import integrated_helpers from nova.tests.unit import fake_notifier from nova.tests.unit.image import fake as fake_image class BuildRescheduleClaimFailsTestCase( integrated_helpers.ProviderUsageBaseTestCase): """"""Regression test case for bug 1837955 where a server build fails on the primary host and then attempting to allocate resources on the alternate host, the alternate host is full and the allocations claim in placement fails, resulting in the build failing due to MaxRetriesExceeded and the server going to ERROR status. """""" compute_driver = 'fake.SmallFakeDriver' def _wait_for_unversioned_notification(self, event_type): for x in range(20): # wait up to 10 seconds for notification in fake_notifier.NOTIFICATIONS: if notification.event_type == event_type: return notification time.sleep(.5) self.fail('Timed out waiting for unversioned notification %s. Got: %s' % (event_type, fake_notifier.NOTIFICATIONS)) def test_build_reschedule_alt_host_alloc_fails(self): # Start two compute services so we have one alternate host. # Set cpu_allocation_ratio=1.0 to make placement inventory # and allocations for VCPU easier to manage. self.flags(cpu_allocation_ratio=1.0) for x in range(2): self._start_compute('host%i' % x) def fake_instance_claim(_self, _context, _inst, nodename, *a, **kw): # Before triggering the reschedule to the other host, max out the # capacity on the alternate host. alt_nodename = 'host0' if nodename == 'host1' else 'host1' rp_uuid = self._get_provider_uuid_by_host(alt_nodename) inventories = self._get_provider_inventory(rp_uuid) # Fake some other consumer taking all of the VCPU on the alt host. # Since we set cpu_allocation_ratio=1.0 the total is the total # capacity for VCPU on the host. total_vcpu = inventories['VCPU']['total'] alt_consumer = '7d32d0bc-af16-44b2-8019-a24925d76152' allocs = { 'allocations': { rp_uuid: { 'resources': { 'VCPU': total_vcpu } } }, 'project_id': self.api.project_id, 'user_id': self.api.project_id } resp = self.placement_api.put( '/allocations/%s' % alt_consumer, allocs, version='1.12') self.assertEqual(204, resp.status, resp.content) raise exception.ComputeResourcesUnavailable(reason='overhead!') # Stub out the instance claim (regardless of which host the scheduler # picks as the primary) to trigger a reschedule. self.stub_out('nova.compute.manager.resource_tracker.ResourceTracker.' 'instance_claim', fake_instance_claim) # Now that our stub is in place, try to create a server and wait for it # to go to ERROR status. server = self._build_minimal_create_server_request( self.api, 'test_build_reschedule_alt_host_alloc_fails', image_uuid=fake_image.get_valid_image_id(), networks=[{'port': nova_fixtures.NeutronFixture.port_1['id']}]) server = self.api.post_server({'server': server}) # FIXME(mriedem): This is bug 1837955 where the status is stuck in # BUILD rather than the vm_state being set to error and the task_state # being set to None. Uncomment this when the bug is fixed. # server = self._wait_for_state_change(self.api, server, 'ERROR') # Wait for the MaxRetriesExceeded fault to be recorded. # set_vm_state_and_notify sets the vm_state to ERROR before the fault # is recorded but after the notification is sent. So wait for the # unversioned notification to show up and then get the fault. # FIXME(mriedem): Uncomment this when bug 1837955 is fixed. # self._wait_for_unversioned_notification( # 'compute_task.build_instances') # server = self.api.get_server(server['id']) # self.assertIn('fault', server) # self.assertIn('Exceeded maximum number of retries', # server['fault']['message']) # TODO(mriedem): Remove this when the bug is fixed. We need to assert # something before the bug is fixed to show the failure so check the # logs. for x in range(20): logs = self.stdlog.logger.output if 'MaxRetriesExceeded' in logs: break time.sleep(.5) else: self.fail('Timed out waiting for MaxRetriesExceeded to show up ' 'in the logs.') ",,115,0
openstack%2Fnova~stable%2Frocky~Icce1e31fe3ebcbf9e4897bbfa57b7f3d1fba67a3,openstack/nova,stable/rocky,Icce1e31fe3ebcbf9e4897bbfa57b7f3d1fba67a3,Avoid logging traceback when detach device not found,MERGED,2019-08-01 15:07:15.000000000,2019-08-08 16:19:47.000000000,2019-08-08 16:19:47.000000000,"[{'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-08-01 15:07:15.000000000', 'files': ['nova/tests/unit/virt/libvirt/test_guest.py', 'nova/virt/libvirt/guest.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3a1be7afd0f11a2123c59b0ddea63f08bb4436ce', 'message': ""Avoid logging traceback when detach device not found\n\nWe use the oslo.utils save_and_reraise_exception context manager in our\ndetach device code and catch specific exceptions that mean 'not found'\nand raise DeviceNotFound instead. When we do that, the\nsave_and_reraise_exception context manager logs an ERROR traceback of\nthe original exception, for informational purposes. This is misleading\nwhen trying to debug other issues, as it makes it look like the caught\nexception caused a problem.\n\nThis passes the reraise=False keyword arg to the context manager and\nsets the 'reraise' attribute to True only if we are not going to raise\na different exception.\n\nRelated-Bug: #1836212\n\nChange-Id: Icce1e31fe3ebcbf9e4897bbfa57b7f3d1fba67a3\n(cherry picked from commit 738774b942dab21d8c03c70b4e74b6a487515ff5)\n(cherry picked from commit d83342226470e1957525978d7bec7d98db9bb695)\n""}]",0,674068,3a1be7afd0f11a2123c59b0ddea63f08bb4436ce,10,6,1,4690,,,0,"Avoid logging traceback when detach device not found

We use the oslo.utils save_and_reraise_exception context manager in our
detach device code and catch specific exceptions that mean 'not found'
and raise DeviceNotFound instead. When we do that, the
save_and_reraise_exception context manager logs an ERROR traceback of
the original exception, for informational purposes. This is misleading
when trying to debug other issues, as it makes it look like the caught
exception caused a problem.

This passes the reraise=False keyword arg to the context manager and
sets the 'reraise' attribute to True only if we are not going to raise
a different exception.

Related-Bug: #1836212

Change-Id: Icce1e31fe3ebcbf9e4897bbfa57b7f3d1fba67a3
(cherry picked from commit 738774b942dab21d8c03c70b4e74b6a487515ff5)
(cherry picked from commit d83342226470e1957525978d7bec7d98db9bb695)
",git fetch https://review.opendev.org/openstack/nova refs/changes/68/674068/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/libvirt/test_guest.py', 'nova/virt/libvirt/guest.py']",2,3a1be7afd0f11a2123c59b0ddea63f08bb4436ce,bug/1836212-stable/rocky," with excutils.save_and_reraise_exception(reraise=False) as ctx: # Re-raise the original exception if we're not raising # DeviceNotFound instead. This will avoid logging of a # ""Original exception being dropped"" traceback. ctx.reraise = True", with excutils.save_and_reraise_exception():,10,1
openstack%2Fopenstack-ansible-os_trove~master~If4896f1711ac655c33b6d4132ffd74085cb0f3b1,openstack/openstack-ansible-os_trove,master,If4896f1711ac655c33b6d4132ffd74085cb0f3b1,service_setup: refactor service setup to a single file,MERGED,2019-08-08 11:10:07.000000000,2019-08-08 16:19:42.000000000,2019-08-08 16:19:41.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-08 11:10:07.000000000', 'files': ['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/trove_service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_trove/commit/4e93d821332349aef4cf6f175e0e0baccab5f2d8', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: If4896f1711ac655c33b6d4132ffd74085cb0f3b1\n'}]",0,675293,4e93d821332349aef4cf6f175e0e0baccab5f2d8,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: If4896f1711ac655c33b6d4132ffd74085cb0f3b1
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_trove refs/changes/93/675293/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/trove_service_setup.yml']",3,4e93d821332349aef4cf6f175e0e0baccab5f2d8,osa/service_refactor,,"--- # Copyright 2016 Internet Solutions (Pty) Ltd # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # # (c) 2016 Donovan Francesco <donovan.francesco@is.co.za> # (c) 2016 Paul Stevens <paul.stevens@is.co.za> # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the service delegate_to: ""{{ trove_service_setup_host }}"" vars: ansible_python_interpreter: ""{{ trove_service_setup_host_python_interpreter }}"" block: - name: Add service to the keystone service catalog os_keystone_service: cloud: default state: present name: ""{{ trove_service_name }}"" service_type: ""{{ trove_service_type }}"" description: ""{{ trove_service_description }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 - name: Add service project os_project: cloud: default state: present name: ""{{ trove_service_project_name }}"" domain_id: ""{{ trove_service_project_domain_id }}"" description: ""{{ trove_service_description }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 - name: Add service user os_user: cloud: default state: present name: ""{{ trove_admin_user_name }}"" password: ""{{ trove_service_password }}"" domain: default default_project: ""{{ trove_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 no_log: True - name: Add service user to admin role os_user_role: cloud: default state: present user: ""{{ trove_admin_user_name }}"" role: ""{{ item }}"" project: ""{{ trove_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: ""{{ trove_service_admin_role_names }}"" - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: present service: ""{{ trove_service_name }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ trove_service_region }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: - interface: ""public"" url: ""{{ trove_service_publicurl }}"" - interface: ""internal"" url: ""{{ trove_service_internalurl }}"" - interface: ""admin"" url: ""{{ trove_service_adminurl }}"" ",189,110
openstack%2Fopenstack-ansible-os_tacker~master~I4af14b99ec618bb9c26c77a4e43b6e6d3b968d35,openstack/openstack-ansible-os_tacker,master,I4af14b99ec618bb9c26c77a4e43b6e6d3b968d35,service_setup: refactor service setup to a single file,MERGED,2019-08-08 10:40:03.000000000,2019-08-08 16:16:09.000000000,2019-08-08 16:16:09.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-08 10:40:03.000000000', 'files': ['tasks/main.yml', 'tasks/tacker_service_setup.yml', 'tasks/service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tacker/commit/2690cb845a2a08aa9ec957099e4415924a8b284b', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I4af14b99ec618bb9c26c77a4e43b6e6d3b968d35\n'}]",0,675289,2690cb845a2a08aa9ec957099e4415924a8b284b,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: I4af14b99ec618bb9c26c77a4e43b6e6d3b968d35
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_tacker refs/changes/89/675289/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/tacker_service_setup.yml', 'tasks/service_setup.yml']",3,2690cb845a2a08aa9ec957099e4415924a8b284b,osa/service_refactor,"--- # Copyright 2019, VEXXHOST, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # WARNING: # This file is maintained in the openstack-ansible-tests repository. # https://opendev.org/openstack/openstack-ansible-tests/src/sync/tasks/service_setup.yml # If you need to modify this file, update the one in the openstack-ansible-tests # repository. Once it merges there, the changes will automatically be proposed to # all the repositories which use it. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the OS service delegate_to: ""{{ _service_setup_host }}"" vars: ansible_python_interpreter: ""{{ _service_setup_host_python_interpreter }}"" block: - name: Add keystone domain os_keystone_domain: cloud: default state: present name: ""{{ _domain_name }}"" endpoint_type: admin verify: ""{{ not _service_adminuri_insecure }}"" register: add_domain when: _domain_name is defined until: add_domain is success retries: 5 delay: 10 - name: Add service project os_project: cloud: default state: present name: ""{{ _project_name }}"" description: ""{{ _project_description | default(omit) }}"" domain_id: ""{{ _project_domain | default('default') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _project_name is defined until: add_service is success retries: 5 delay: 10 - name: Add services to the keystone service catalog os_keystone_service: cloud: default state: ""{{ item.state | default('present') }}"" name: ""{{ item.name }}"" service_type: ""{{ item.type }}"" description: ""{{ item.description | default('') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service with_items: ""{{ _service_catalog }}"" when: _service_catalog is defined until: add_service is success retries: 5 delay: 10 - name: Add keystone roles os_keystone_role: cloud: default state: present name: ""{{ item.role }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add service users os_user: cloud: default state: present name: ""{{ item.name }}"" password: ""{{ item.password }}"" domain: ""{{ item.domain | default('default') }}"" default_project: ""{{ item.project | default(_service_project_name) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" update_password: always register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'password' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 no_log: True - name: Add service users to the role os_user_role: cloud: default state: present user: ""{{ item.name }}"" role: ""{{ item.role }}"" project: ""{{ item.project | default(_service_project_name) }}"" domain: ""{{ item.domain | default(omit) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: ""{{ item.state | default('present') }}"" service: ""{{ item.service }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ _service_region | default('RegionOne') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: ""{{ _service_endpoints }}"" when: _service_endpoints is defined ",,185,95
openstack%2Freleases~master~I4019cfff92b0174721177aaa175c3ef4da2dffaa,openstack/releases,master,I4019cfff92b0174721177aaa175c3ef4da2dffaa,Release designateclient and solumclient be able to uncap jsonschema,MERGED,2019-08-06 17:38:56.000000000,2019-08-08 15:54:47.000000000,2019-08-08 15:54:47.000000000,"[{'_account_id': 308}, {'_account_id': 2506}, {'_account_id': 6593}, {'_account_id': 8099}, {'_account_id': 11904}, {'_account_id': 14107}, {'_account_id': 19563}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-06 17:38:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/2e32dfd99734c4baadedd681cca02f82ffd0989a', 'message': 'Release designateclient and solumclient be able to uncap jsonschema\n\n    We have jsonschema capped at a fairly old version. Other than some\n    specific releases, it looks like keeping it below 3.0 was added in\n    I943fd68b9fab3bce1764305a5058df5339470757 without really any explanation\n    why.\n\n    In order to update to a 3.x release we need to:\n    1. Remove the cap from global-requirements.txt (see Depends-On), leaving\n       upper-constraints.txt at a 2.x release\n    2. Remove the cap from all consumers\n    3. Release a new version of consumers that are published to pypi (this change)\n    4. Update upper-constraints.txt with those new releases\n\nThis review perfoms step 3.\n\nChange-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa\n'}, {'number': 2, 'created': '2019-08-07 06:39:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/ce2cf4fd92f7875408a7dbedb18c30eadc0060fc', 'message': 'Release designateclient and solumclient be able to uncap jsonschema\n\n    We have jsonschema capped at a fairly old version. Other than some\n    specific releases, it looks like keeping it below 3.0 was added in\n    I943fd68b9fab3bce1764305a5058df5339470757 without really any explanation\n    why.\n\n    In order to update to a 3.x release we need to:\n    1. Remove the cap from global-requirements.txt, leaving\n       upper-constraints.txt at a 2.x release\n    2. Remove the cap from all consumers\n    3. Release a new version of consumers that are published to pypi (this change)\n    4. Update upper-constraints.txt with those new releases\n\nThis review perfoms step 3.\n\nChange-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa\n'}, {'number': 3, 'created': '2019-08-07 13:08:28.000000000', 'files': ['deliverables/train/python-designateclient.yaml', 'deliverables/train/python-solumclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/661f097ec71d05a14b2fb24545b20fc1a8be3aca', 'message': 'Release designateclient and solumclient be able to uncap jsonschema\n\n    We have jsonschema capped at a fairly old version. Other than some\n    specific releases, it looks like keeping it below 3.0 was added in\n    I943fd68b9fab3bce1764305a5058df5339470757 without really any explanation\n    why.\n\n    In order to update to a 3.x release we need to:\n    1. Remove the cap from global-requirements.txt, leaving\n       upper-constraints.txt at a 2.x release\n    2. Remove the cap from all consumers\n    3. Release a new version of consumers that are published to pypi (this change)\n    4. Update upper-constraints.txt with those new releases\n\nThis review perfoms step 3.\n\nChange-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa\n'}]",2,674887,661f097ec71d05a14b2fb24545b20fc1a8be3aca,20,8,3,6593,,,0,"Release designateclient and solumclient be able to uncap jsonschema

    We have jsonschema capped at a fairly old version. Other than some
    specific releases, it looks like keeping it below 3.0 was added in
    I943fd68b9fab3bce1764305a5058df5339470757 without really any explanation
    why.

    In order to update to a 3.x release we need to:
    1. Remove the cap from global-requirements.txt, leaving
       upper-constraints.txt at a 2.x release
    2. Remove the cap from all consumers
    3. Release a new version of consumers that are published to pypi (this change)
    4. Update upper-constraints.txt with those new releases

This review perfoms step 3.

Change-Id: I4019cfff92b0174721177aaa175c3ef4da2dffaa
",git fetch https://review.opendev.org/openstack/releases refs/changes/87/674887/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/train/python-designateclient.yaml', 'deliverables/_independent/python-solumclient.yaml']",2,2e32dfd99734c4baadedd681cca02f82ffd0989a,, - version: 1.3.0 projects: - repo: openstack/python-solumclient hash: b3e7f9dd4edf032074b5f67a3a92a6c8cfafa8fa,,9,0
openstack%2Foslo.messaging~master~If8846599efc48fe18ecfb99c04e2c38f9a45b9ed,openstack/oslo.messaging,master,If8846599efc48fe18ecfb99c04e2c38f9a45b9ed,Allow users run the rabbitmq heartbeat inside a standard pthread.,MERGED,2019-06-04 15:54:44.000000000,2019-08-08 15:50:07.000000000,2019-08-08 15:50:07.000000000,"[{'_account_id': 6926}, {'_account_id': 6928}, {'_account_id': 8770}, {'_account_id': 9373}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 29222}, {'_account_id': 29364}]","[{'number': 1, 'created': '2019-06-04 15:54:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/9f4d387e344c4ba0959cf0f1f39f0fa1b58688fd', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\nPartial-Bug: #1826281\n'}, {'number': 2, 'created': '2019-06-04 15:56:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/2bb037cbe4b352c485bf06d2ac6d53b470adc74f', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 3, 'created': '2019-06-04 17:00:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/47adbaaf5de55f502d16c0b2e00a6f80492be051', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nYou can check the new behavior by using the following gist:\n- https://gist.github.com/4383/ad316b498b6d6b2beaed96f7a2f9b38c (without\nsimilar patch changes)\n\n- https://gist.github.com/4383/1ac3a2c2cbd6d7a54046d4585ecef151 (with\nchecks/changes who looks like to this patch)\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 4, 'created': '2019-06-05 10:32:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/322b1dea204d5f142b7d78f8677515ffaf07cdd2', 'message': '[WIP] Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nYou can check the new behavior by using the following gist:\n- https://gist.github.com/4383/ad316b498b6d6b2beaed96f7a2f9b38c (without\nsimilar patch changes)\n\n- https://gist.github.com/4383/1ac3a2c2cbd6d7a54046d4585ecef151 (with\nchecks/changes who looks like to this patch)\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 5, 'created': '2019-06-05 10:35:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/de5b27d6007683047fb9d1603abc2396b953d271', 'message': '[WIP] Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nYou can check the new behavior by using the following gist:\n- https://gist.github.com/4383/ad316b498b6d6b2beaed96f7a2f9b38c (without\nsimilar patch changes)\n\n- https://gist.github.com/4383/1ac3a2c2cbd6d7a54046d4585ecef151 (with\nchecks/changes who looks like to this patch)\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 6, 'created': '2019-06-05 14:10:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/b2d4cb46ed3a8ea7a4e8f103e0b6f0aa362eb3ba', 'message': '[WIP] Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nYou can check the new behavior by using the following gist:\n- https://gist.github.com/4383/ad316b498b6d6b2beaed96f7a2f9b38c (without\nsimilar patch changes)\n\n- https://gist.github.com/4383/1ac3a2c2cbd6d7a54046d4585ecef151 (with\nchecks/changes who looks like to this patch)\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 7, 'created': '2019-06-05 14:52:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/76cf41f0c5e8c4da1bd9ad77b09a658e85d34a04', 'message': '[WIP] Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 8, 'created': '2019-06-05 15:57:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/de5ac2850adc9b520be02c879ac38cf5d2877ab1', 'message': '[WIP] Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 9, 'created': '2019-06-05 16:51:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/2251dc0d36e8d516ad20f861b7f6d904f5862c13', 'message': '[WIP] Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 10, 'created': '2019-06-18 16:19:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/b9afa43944bd1da18966f3f6ac195968892f0a9a', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nTo fix this issue we have propose different approaches:\n- using a python thread (the changes of this patch set)\n- using eventlet tpool execute (patch set 9)\n\nThe only version which work like expected is this one (import the native python\nthread from eventlet)\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\nhttps://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/fakeservice/README.md\n\nWith this walkthrough you can observe the different the differents steps\nused by nova to use oslo.messaging.\n\nAlso, I would propose to you to compare the different solutions that I\'ve\ntested and propose to you to observe the behaviour.\n\nTo do this we will use some of the patches set related to this review.\n\nTo test the different solution we will play with git review and patches\nsets like:\n`git review -d 663074,<patch_set>`\n\nBut in a first time we will setup a testing environment to reproduce the\nissue and observe the patches results.\n\n/## First setup the testing env\n\nSetup the testing environment:\n```\ncd /tmp\nTEST_DEBUG_ENV=/tmp/663074\nmkdir ${TEST_DEBUG_ENV}\ncd ${TEST_DEBUG_ENV}\ngit clone git@github.com:openstack/oslo.messaging.git\ncd oslo.messaging\ngit review -s\ncd ${TEST_DEBUG_ENV}\ngit clone https://github.com/4383/pyamqp-heartbeat/ -b test_debug_env\n```\n\nNow the testing environment is setup.\n\nYou need to ensure to have pipenv installed on your laptop:\n```\npython3 -m pip install --user pipenv\n```\n\n/## Solution 1 - Using a native python thread\n\nWe will first check this patch set (the solution that works)(the latest\npatch set).\n\nhttps://review.opendev.org/#/c/663074/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work without issues and the\nconnection stay opened. Please observe that during more than 10 minutes.\n\nNow you can kill the running process.\n\n/## Solution 2 - Using eventlet tpool execute\n\nWe will now check how the things works if we use the eventlet tpool\nexecute functionality:\nhttps://eventlet.net/doc/threading.html#eventlet.tpool.execute\n\nhttps://review.opendev.org/#/c/663074/9/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074,9 # to setup the patch set number 9\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh # if rabbit server is not running\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work doesn\'t stream output to the\nterminal.\n\nYou also can observe on the rabbit dashboard that after some minutes\n(3 minutes on my side), all the connections are closed.\n\n/## More informations\n\n- During all these tests we force to run the heartbeat by using the send\n  purpose:\n  https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L30\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 11, 'created': '2019-06-19 14:07:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/d50d2fa6c28a6e9956f7e83f8b11c66f9e64d21a', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nTo fix this issue we have propose different approaches:\n- using a python thread (the changes of this patch set)\n- using eventlet tpool execute (patch set 9)\n\nThe only version which work like expected is this one (import the native python\nthread from eventlet)\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\nhttps://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/fakeservice/README.md\n\nWith this walkthrough you can observe the different the differents steps\nused by nova to use oslo.messaging.\n\nAlso, I would propose to you to compare the different solutions that I\'ve\ntested and propose to you to observe the behaviour.\n\nTo do this we will use some of the patches set related to this review.\n\nTo test the different solution we will play with git review and patches\nsets like:\n`git review -d 663074,<patch_set>`\n\nBut in a first time we will setup a testing environment to reproduce the\nissue and observe the patches results.\n\n/## First setup the testing env\n\nSetup the testing environment:\n```\ncd /tmp\nTEST_DEBUG_ENV=/tmp/663074\nmkdir ${TEST_DEBUG_ENV}\ncd ${TEST_DEBUG_ENV}\ngit clone git@github.com:openstack/oslo.messaging.git\ncd oslo.messaging\ngit review -s\ncd ${TEST_DEBUG_ENV}\ngit clone https://github.com/4383/pyamqp-heartbeat/ -b test_debug_env\n```\n\nNow the testing environment is setup.\n\nYou need to ensure to have pipenv installed on your laptop:\n```\npython3 -m pip install --user pipenv\n```\n\n/## Solution 1 - Using a native python thread\n\nWe will first check this patch set (the solution that works)(the latest\npatch set).\n\nhttps://review.opendev.org/#/c/663074/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work without issues and the\nconnection stay opened. Please observe that during more than 10 minutes.\n\nNow you can kill the running process.\n\n/## Solution 2 - Using eventlet tpool execute\n\nWe will now check how the things works if we use the eventlet tpool\nexecute functionality:\nhttps://eventlet.net/doc/threading.html#eventlet.tpool.execute\n\nhttps://review.opendev.org/#/c/663074/9/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074,9 # to setup the patch set number 9\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh # if rabbit server is not running\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work doesn\'t stream output to the\nterminal.\n\nYou also can observe on the rabbit dashboard that after some minutes\n(3 minutes on my side), all the connections are closed.\n\n/## More informations\n\n- During all these tests we force to run the heartbeat by using the send\n  purpose:\n  https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L30\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 12, 'created': '2019-06-19 17:54:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/1660223ec0095540e7cc146f8ff862f6c7f4e6ee', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nTo fix this issue we have propose different approaches:\n- using a python thread (the changes of this patch set)\n- using eventlet tpool execute (patch set 9)\n\nThe only version which work like expected is this one (import the native python\nthread from eventlet)\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\nhttps://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/fakeservice/README.md\n\nWith this walkthrough you can observe the different the differents steps\nused by nova to use oslo.messaging.\n\nAlso, I would propose to you to compare the different solutions that I\'ve\ntested and propose to you to observe the behaviour.\n\nTo do this we will use some of the patches set related to this review.\n\nTo test the different solution we will play with git review and patches\nsets like:\n`git review -d 663074,<patch_set>`\n\nBut in a first time we will setup a testing environment to reproduce the\nissue and observe the patches results.\n\n/## First setup the testing env\n\nSetup the testing environment:\n```\ncd /tmp\nTEST_DEBUG_ENV=/tmp/663074\nmkdir ${TEST_DEBUG_ENV}\ncd ${TEST_DEBUG_ENV}\ngit clone git@github.com:openstack/oslo.messaging.git\ncd oslo.messaging\ngit review -s\ncd ${TEST_DEBUG_ENV}\ngit clone https://github.com/4383/pyamqp-heartbeat/ -b test_debug_env\n```\n\nNow the testing environment is setup.\n\nYou need to ensure to have pipenv installed on your laptop:\n```\npython3 -m pip install --user pipenv\n```\n\n/## Solution 1 - Using a native python thread\n\nWe will first check this patch set (the solution that works)(the latest\npatch set).\n\nhttps://review.opendev.org/#/c/663074/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work without issues and the\nconnection stay opened. Please observe that during more than 10 minutes.\n\nNow you can kill the running process.\n\n/## Solution 2 - Using eventlet tpool execute\n\nWe will now check how the things works if we use the eventlet tpool\nexecute functionality:\nhttps://eventlet.net/doc/threading.html#eventlet.tpool.execute\n\nhttps://review.opendev.org/#/c/663074/9/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074,9 # to setup the patch set number 9\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh # if rabbit server is not running\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work doesn\'t stream output to the\nterminal.\n\nYou also can observe on the rabbit dashboard that after some minutes\n(3 minutes on my side), all the connections are closed.\n\n/## More informations\n\n- During all these tests we force to run the heartbeat by using the send\n  purpose:\n  https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L30\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 13, 'created': '2019-06-19 23:47:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/82f5a53b40214e120814a5daf2a2af81f2968abc', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues who run\nheartbeat under mod_wsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat.\n\nTo fix this issue we have propose different approaches:\n- using a python thread (the changes of this patch set)\n- using eventlet tpool execute (patch set 9)\n\nThe only version which work like expected is this one (import the native python\nthread from eventlet)\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\nhttps://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/fakeservice/README.md\n\nWith this walkthrough you can observe the different the differents steps\nused by nova to use oslo.messaging.\n\nAlso, I would propose to you to compare the different solutions that I\'ve\ntested and propose to you to observe the behaviour.\n\nTo do this we will use some of the patches set related to this review.\n\nTo test the different solution we will play with git review and patches\nsets like:\n`git review -d 663074,<patch_set>`\n\nBut in a first time we will setup a testing environment to reproduce the\nissue and observe the patches results.\n\n/## First setup the testing env\n\nSetup the testing environment:\n```\ncd /tmp\nTEST_DEBUG_ENV=/tmp/663074\nmkdir ${TEST_DEBUG_ENV}\ncd ${TEST_DEBUG_ENV}\ngit clone git@github.com:openstack/oslo.messaging.git\ncd oslo.messaging\ngit review -s\ncd ${TEST_DEBUG_ENV}\ngit clone https://github.com/4383/pyamqp-heartbeat/ -b test_debug_env\n```\n\nNow the testing environment is setup.\n\nYou need to ensure to have pipenv installed on your laptop:\n```\npython3 -m pip install --user pipenv\n```\n\n/## Solution 1 - Using a native python thread\n\nWe will first check this patch set (the solution that works)(the latest\npatch set).\n\nhttps://review.opendev.org/#/c/663074/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work without issues and the\nconnection stay opened. Please observe that during more than 10 minutes.\n\nNow you can kill the running process.\n\n/## Solution 2 - Using eventlet tpool execute\n\nWe will now check how the things works if we use the eventlet tpool\nexecute functionality:\nhttps://eventlet.net/doc/threading.html#eventlet.tpool.execute\n\nhttps://review.opendev.org/#/c/663074/9/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074,9 # to setup the patch set number 9\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh # if rabbit server is not running\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in                                            /!\\\n/!\\ a tmux, resize a pane or create a new pane kill the container... so for /!\\\n/!\\ the next steps you need to create a second terminal to avoid tmux pane  /!\\\n/!\\ creation and similar things.                                            /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulate service monkey patch the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow In your open the rabbit management dashboard and observe the\nconnections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work doesn\'t stream output to the\nterminal.\n\nYou also can observe on the rabbit dashboard that after some minutes\n(3 minutes on my side), all the connections are closed.\n\n/## More informations\n\n- During all these tests we force to run the heartbeat by using the send\n  purpose:\n  https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L30\n\nSee the specifications for more informations:\nhttps://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 14, 'created': '2019-07-05 14:46:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/ed7625be665319fc5b608dbb79163fd96d06c39e', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [6] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\neventlet is based on epoll or libevent [7][9], in an environment based on\napache MPM `prefork` module who doesn\'t support epoll and recent kernel\nfeatures.\n\nThe MPM `prefork` apache module is appropriate for sites that\nneed to avoid threading for compatibility with non-thread-safe\nlibraries [1].\n\nPossible proposed solutions\n===========================\n\nTo fix this issue we have proposed different approaches during discusses [8]:\n- using a python thread (the changes of this patch set)\n- using eventlet tpool execute (patch set 9)\n\nThe only version which work like expected is this patch set who\ncorrespond to use a native python thread and not eventlet.\n\nI think the tpool solution doesn\'t work correctly due to the apache\nengine in use currently (`prefork`), and using tpool keep us to using\neventlet and so libevent or epoll too.\n\nI would propose to you to compare the different solutions that I\'ve\ntested and I want allow to you to observe the behaviours.\n\nBut before starting the comparison I\'ll describe a little bit the chosen\nsolution.\n\nChosen solution\n===============\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nSo we need to ensure to run heartbeat through a classical python thread\nnot build over epoll and libevent to avoid issue with environment who\ndoesn\'t support these kernel features.\n\nAlso we try to switch [4][5] from the apache `prefork` module to the `event`\nmodule which support non blocking sockets, use modern kernel features\nlike epoll through APR [3].\n\nPOC\n===\n\nTo do this comparison we will use:\n- some of the patches set of this review\n- the POC section bellow\n- and the POC project => https://github.com/4383/pyamqp-heartbeat/\n\nTo test the different solutions we will play with git review and patches\nsets by using commands like `git review -d 663074,<patch_set>`\n\nBut in a first time we will setup a testing environment to reproduce the\nissue and observe the patches results.\n\nSetup the testing environment\n-----------------------------\n\nThe testing env is based on https://github.com/4383/pyamqp-heartbeat/\n\nIt was designed to help to reproduce the issue easily and to reproduce\nthe original environment as much as possible.\n\nSo, now setup your env by using:\n\n```\ncd /tmp\nTEST_DEBUG_ENV=/tmp/663074\nmkdir ${TEST_DEBUG_ENV}\ncd ${TEST_DEBUG_ENV}\ngit clone git@github.com:openstack/oslo.messaging.git\ncd oslo.messaging\ngit review -s\ncd ${TEST_DEBUG_ENV}\ngit clone https://github.com/4383/pyamqp-heartbeat/\n```\n\nNow the testing environment is setup.\n\nYou need to ensure to have pipenv installed on your laptop:\n```\npython3 -m pip install --user pipenv\n```\n\nReproduce the original issue with non patched code\n--------------------------------------------------\n\nYou can test the original issue with a non patched code by simply switch\nto the `master` branch of your oslo.messaging clone that you have\nrealize during the previous setup step:\n\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit checkout master\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\nSolution 1 - Using a native python thread\n-----------------------------------------\n\nWe will first check this patch set (the solution that works)(the latest\npatch set https://review.opendev.org/#/c/663074/).\n\nHow can test these changes by using the following commands:\n\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in  a tmux with have an issue with the        /!\\\n/!\\ resize of a tmux pane or when we create a new pane, the both kill       /!\\\n/!\\ the container... so for the next steps you need to create a second      /!\\\n/!\\ terminal or tmux window to avoid tmux pane creation and similar things. /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulated service have monkey patched the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow open the rabbit management dashboard and observe the connections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal like described in\nthe previous warning, where you need to send a request to\nthe service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work without issues and the\nconnection stay opened indefinitely.\nPlease observe that during more than 10 minutes.\n\nNow you can kill the running process.\n\nSolution 2 - Using eventlet tpool execute\n-----------------------------------------\n\nWe will now check how the things works if we use the eventlet tpool\nexecute functionality:\nhttps://eventlet.net/doc/threading.html#eventlet.tpool.execute\n\nThis test correspond to the patch set https://review.opendev.org/#/c/663074/9/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074,9 # to setup the patch set number 9\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh # if rabbit server is not running\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in  a tmux with have an issue with the        /!\\\n/!\\ resize of a tmux pane or when we create a new pane, the both kill       /!\\\n/!\\ the container... so for the next steps you need to create a second      /!\\\n/!\\ terminal or tmux window to avoid tmux pane creation and similar things. /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulated service have monkey patched the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow open the rabbit management dashboard and observe the connections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe on the rabbit dashboard that after some minutes\n(3 minutes on my side), all the connections are closed.\n\nConclusion\n----------\n\nWith standard python thread connections stay opened indefinitely\nWith tpool connections still to disappears after few minutes like the\noriginal issue.\n\nAdditional informations\n-----------------------\n\nDuring all these tests:\n- we force to run the heartbeat by using the send purpose\n  https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L30\n- we run oslo.messaging under a monkey patched environment\n\nFurther reading\n===============\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\n- https://github.com/4383/pyamqp-heartbeat/tree/master/fakeservice\n\nWith this walkthrough you can observe the differents steps\nused by nova to use oslo.messaging and the different components in use\nto obtain the big picture of the stack.\n\nThe previous POC is based on this walkthrough as much as possible to\nreproduce the original issue.\n\nAlso you can retrieve online discussion on the mailing list about this\ntopic:\n- http://lists.openstack.org/pipermail/openstack-discuss/2019-April/005310.html\n\nLibevent support epoll too [9] but I don\'t know in which case eventlet use it.\n\nReferences\n==========\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://httpd.apache.org/docs/2.4/fr/mod/event.html\n[3] https://httpd.apache.org/docs/2.4/fr/glossary.html#apr\n[4] https://review.opendev.org/#/c/668862/\n[5] https://review.opendev.org/#/c/669178/\n[6] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n[7] https://github.com/eventlet/eventlet/blame/master/README.rst#L3\n[8] https://review.opendev.org/#/c/661314/\n[9] https://libevent.org/\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\nPartial-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 15, 'created': '2019-07-06 10:38:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/18f610345114d1af5e2a93f245fe5c7124dfa27f', 'message': 'Always run the rabbitmq heartbeat inside a standard pthread.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to always run the rabbitmq health check heartbeat in a\nstandard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [6] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\neventlet is based on epoll or libevent [7][9], in an environment based on\napache MPM `prefork` module who doesn\'t support epoll and recent kernel\nfeatures.\n\nThe MPM `prefork` apache module is appropriate for sites that\nneed to avoid threading for compatibility with non-thread-safe\nlibraries [1].\n\nPossible proposed solutions\n===========================\n\nTo fix this issue we have proposed different approaches during discussions [8]:\n- using a python thread (this change)\n- using eventlet tpool execute (https://review.opendev.org/#/c/663074/9/)\n\nThe only version which work like expected is this patch set who\ncorrespond to use a native python thread and not eventlet.\n\nI think the tpool solution doesn\'t work correctly due to the apache\nengine in use currently (`prefork`), and using tpool keep us to using\neventlet and so libevent or epoll too.\n\nI would propose to you to compare the different solutions that I\'ve\ntested and I want allow to you to observe the behaviours.\n\nBut before starting the comparison I\'ll describe a little bit the chosen\nsolution.\n\nChosen solution\n===============\n\nWe want to isolate the heartbeat execution model from the parent process\ninherited execution model.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nWe want to force to use the python stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nSo we need to ensure to run heartbeat through a classical python thread\nnot build over epoll and libevent to avoid issue with environment who\ndoesn\'t support these kernel features.\n\nAlso we try to switch [4][5] from the apache `prefork` module to the `event`\nmodule which support non blocking sockets, use modern kernel features\nlike epoll through APR [3].\n\nPOC\n===\n\nTo do this comparison we will use:\n- some of the patches set of this review\n- the POC section bellow\n- and the POC project => https://github.com/4383/pyamqp-heartbeat/\n\nTo test the different solutions we will play with git review and patches\nsets by using commands like `git review -d 663074,<patch_set>`\n\nBut in a first time we will setup a testing environment to reproduce the\nissue and observe the patches results.\n\nSetup the testing environment\n-----------------------------\n\nThe testing env is based on https://github.com/4383/pyamqp-heartbeat/\n\nIt was designed to help to reproduce the issue easily and to reproduce\nthe original environment as much as possible.\n\nSo, now setup your env by using:\n\n```\ncd /tmp\nTEST_DEBUG_ENV=/tmp/663074\nmkdir ${TEST_DEBUG_ENV}\ncd ${TEST_DEBUG_ENV}\ngit clone git@github.com:openstack/oslo.messaging.git\ncd oslo.messaging\ngit review -s\ncd ${TEST_DEBUG_ENV}\ngit clone https://github.com/4383/pyamqp-heartbeat/\n```\n\nNow the testing environment is setup.\n\nYou need to ensure to have pipenv installed on your laptop:\n```\npython3 -m pip install --user pipenv\n```\n\nReproduce the original issue with non patched code\n--------------------------------------------------\n\nYou can test the original issue with a non patched code by simply switch\nto the `master` branch of your oslo.messaging clone that you have\nrealize during the previous setup step:\n\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit checkout master\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\nSolution 1 - Using a native python thread\n-----------------------------------------\n\nWe will first check this patch set (the solution that works)(the latest\npatch set https://review.opendev.org/#/c/663074/).\n\nHow can test these changes by using the following commands:\n\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in  a tmux with have an issue with the        /!\\\n/!\\ resize of a tmux pane or when we create a new pane, the both kill       /!\\\n/!\\ the container... so for the next steps you need to create a second      /!\\\n/!\\ terminal or tmux window to avoid tmux pane creation and similar things. /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulated service have monkey patched the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow open the rabbit management dashboard and observe the connections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal like described in\nthe previous warning, where you need to send a request to\nthe service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe that the heartbeat work without issues and the\nconnection stay opened indefinitely.\nPlease observe that during more than 10 minutes.\n\nNow you can kill the running process.\n\nSolution 2 - Using eventlet tpool execute\n-----------------------------------------\n\nWe will now check how the things works if we use the eventlet tpool\nexecute functionality:\nhttps://eventlet.net/doc/threading.html#eventlet.tpool.execute\n\nThis test correspond to the patch set https://review.opendev.org/#/c/663074/9/\n\nHow can test these changes by using the following commands:\n```\ncd ${TEST_DEBUG_ENV}/oslo.messaging\ngit review -d 663074,9 # to setup the patch set number 9\ncd ${TEST_DEBUG_ENV}/pyamqp-heartbeat\npipenv run ./setup-containers.sh # if rabbit server is not running\npipenv run ./start-oslo-mod_wsgi.sh ${TEST_DEBUG_ENV}/oslo.messaging\n```\n\n/!\\-------------------------------------------------------------------------/!\\\n/!\\ For some obscure reasons when we run this container                     /!\\\n/!\\ (who emulate the service) in  a tmux with have an issue with the        /!\\\n/!\\ resize of a tmux pane or when we create a new pane, the both kill       /!\\\n/!\\ the container... so for the next steps you need to create a second      /!\\\n/!\\ terminal or tmux window to avoid tmux pane creation and similar things. /!\\\n/!\\-------------------------------------------------------------------------/!\\\n\nYour emulated service is now running.\n\nThe emulated service have monkey patched the stdlib at start like nova do the\nthing.\n\nFor further reading about the emulated service and monkey patch:\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/Dockerfile#L13\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server-eventlet.wsgi#L10\n- https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L45\n\nNow open the rabbit management dashboard and observe the connections:\nhttp://127.0.0.1:15672/#/connections\nuser: guest\npwd: guest\n\nIn a second time you need to open a second terminal where you need to send\na request to this service by using:\n```\ncurl 0.0.0.0:8000\n```\n\nThe service will return ""it\'s work"" and you now can observe the\nestablished connections (related to the heartbeat) in the rabbit\ndashboard previously opened.\n\nYou can observe on the rabbit dashboard that after some minutes\n(3 minutes on my side), all the connections are closed.\n\nConclusion\n----------\n\nWith standard python thread connections stay opened indefinitely\nWith tpool connections still to disappears after few minutes like the\noriginal issue.\n\nAdditional informations\n-----------------------\n\nDuring all these tests:\n- we force to run the heartbeat by using the send purpose\n  https://github.com/4383/pyamqp-heartbeat/blob/test_debug_env/server.py#L30\n- we run oslo.messaging under a monkey patched environment\n\nFurther reading\n===============\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\n- https://github.com/4383/pyamqp-heartbeat/tree/master/fakeservice\n\nWith this walkthrough you can observe the differents steps\nused by nova to use oslo.messaging and the different components in use\nto obtain the big picture of the stack.\n\nThe previous POC is based on this walkthrough as much as possible to\nreproduce the original issue.\n\nAlso you can retrieve online discussion on the mailing list about this\ntopic:\n- http://lists.openstack.org/pipermail/openstack-discuss/2019-April/005310.html\n\nLibevent support epoll too [9] but I don\'t know in which case eventlet use it.\n\nReferences\n==========\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://httpd.apache.org/docs/2.4/fr/mod/event.html\n[3] https://httpd.apache.org/docs/2.4/fr/glossary.html#apr\n[4] https://review.opendev.org/#/c/668862/\n[5] https://review.opendev.org/#/c/669178/\n[6] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n[7] https://github.com/eventlet/eventlet/blame/master/README.rst#L3\n[8] https://review.opendev.org/#/c/661314/\n[9] https://libevent.org/\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\nCloses-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 16, 'created': '2019-07-10 12:06:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/b7a08986ff9d11d2b61e558c55feaec50f71b663', 'message': 'Allow users run the rabbitmq heartbeat inside a standard pthread.\n\nThis is an experimental feature.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to allow user to choose to run the rabbitmq health check\nheartbeat in a standard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [6] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\neventlet is based on epoll or libevent [7][9], in an environment based on\napache MPM `prefork` module who doesn\'t support epoll and recent kernel\nfeatures.\n\nThe MPM `prefork` apache module is appropriate for sites that\nneed to avoid threading for compatibility with non-thread-safe\nlibraries [1].\n\nPossible proposed solutions\n===========================\n\nTo fix this issue we have proposed different approaches during discussions [8]:\n- using a python thread (this change)\n- using eventlet tpool execute (https://review.opendev.org/#/c/663074/9/)\n\nThe only version which work like expected is this patch set who\ncorrespond to use a native python thread and not eventlet.\n\nI think the tpool solution doesn\'t work correctly due to the apache\nengine in use currently (`prefork`), and using tpool keep us to using\neventlet and so libevent or epoll too.\n\nI would propose to you to compare the different solutions that I\'ve\ntested and I want allow to you to observe the behaviours.\n\nBut before starting the comparison I\'ll describe a little bit the chosen\nsolution.\n\nChosen solution\n===============\n\nWe want to allow user to isolate the heartbeat execution model\nfrom the parent process inherited execution model by passing the\n`heartbeat_in_pthread` option through the driver config.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nIf the `heartbeat_in_pthread` option is given we want to force to use the\npython stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nThis is an experimental feature, we can help us to ensure to run heartbeat\nthrough a classical python thread\nnot build over epoll and libevent to avoid issue with environment who\ndoesn\'t support these kernel features.\n\nAlso we try to switch [4][5] from the apache `prefork` module to the `event`\nmodule which support non blocking sockets, use modern kernel features\nlike epoll through APR [3].\n\nPOC\n===\n\nA POC is available at https://github.com/4383/pyamqp-heartbeat/ you can\ntest this feature and compare execution changes with the current code base.\n\nFurther reading\n===============\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\n- https://github.com/4383/pyamqp-heartbeat/tree/master/fakeservice\n\nWith this walkthrough you can observe the differents steps\nused by nova to use oslo.messaging and the different components in use\nto obtain the big picture of the stack.\n\nThe previous POC is based on this walkthrough as much as possible to\nreproduce the original issue.\n\nAlso you can retrieve online discussion on the mailing list about this\ntopic:\n- http://lists.openstack.org/pipermail/openstack-discuss/2019-April/005310.html\n\nLibevent support epoll too [9] but I don\'t know in which case eventlet use it.\n\nReferences\n==========\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://httpd.apache.org/docs/2.4/fr/mod/event.html\n[3] https://httpd.apache.org/docs/2.4/fr/glossary.html#apr\n[4] https://review.opendev.org/#/c/668862/\n[5] https://review.opendev.org/#/c/669178/\n[6] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n[7] https://github.com/eventlet/eventlet/blame/master/README.rst#L3\n[8] https://review.opendev.org/#/c/661314/\n[9] https://libevent.org/\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\nCloses-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 17, 'created': '2019-07-10 12:08:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/95f5327d68b5aff201bbe45da966dd01f920716f', 'message': 'Allow users run the rabbitmq heartbeat inside a standard pthread.\n\nThis is an experimental feature.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to allow user to choose to run the rabbitmq health check\nheartbeat in a standard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [6] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\neventlet is based on epoll or libevent [7][9], in an environment based on\napache MPM `prefork` module who doesn\'t support epoll and recent kernel\nfeatures.\n\nThe MPM `prefork` apache module is appropriate for sites that\nneed to avoid threading for compatibility with non-thread-safe\nlibraries [1].\n\nPossible proposed solutions\n===========================\n\nTo fix this issue we have proposed different approaches during discussions [8]:\n- using a python thread (this change)\n- using eventlet tpool execute (https://review.opendev.org/#/c/663074/9/)\n\nThe only version which work like expected is this patch set who\ncorrespond to use a native python thread and not eventlet.\n\nI think the tpool solution doesn\'t work correctly due to the apache\nengine in use currently (`prefork`), and using tpool keep us to using\neventlet and so libevent or epoll too.\n\nI would propose to you to compare the different solutions that I\'ve\ntested and I want allow to you to observe the behaviours.\n\nBut before starting the comparison I\'ll describe a little bit the chosen\nsolution.\n\nChosen solution\n===============\n\nWe want to allow user to isolate the heartbeat execution model\nfrom the parent process inherited execution model by passing the\n`heartbeat_in_pthread` option through the driver config.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nIf the `heartbeat_in_pthread` option is given we want to force to use the\npython stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nThis is an experimental feature, we can help us to ensure to run heartbeat\nthrough a classical python thread\nnot build over epoll and libevent to avoid issue with environment who\ndoesn\'t support these kernel features.\n\nAlso we try to switch [4][5] from the apache `prefork` module to the `event`\nmodule which support non blocking sockets, use modern kernel features\nlike epoll through APR [3].\n\nPOC\n===\n\nA POC is available at:\nhttps://github.com/4383/pyamqp-heartbeat/blob/master/POC.md\n\nYou can test this feature and compare execution changes\nwith the current code base.\n\nFurther reading\n===============\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\n- https://github.com/4383/pyamqp-heartbeat/tree/master/fakeservice\n\nWith this walkthrough you can observe the differents steps\nused by nova to use oslo.messaging and the different components in use\nto obtain the big picture of the stack.\n\nThe previous POC is based on this walkthrough as much as possible to\nreproduce the original issue.\n\nAlso you can retrieve online discussion on the mailing list about this\ntopic:\n- http://lists.openstack.org/pipermail/openstack-discuss/2019-April/005310.html\n\nLibevent support epoll too [9] but I don\'t know in which case eventlet use it.\n\nReferences\n==========\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://httpd.apache.org/docs/2.4/fr/mod/event.html\n[3] https://httpd.apache.org/docs/2.4/fr/glossary.html#apr\n[4] https://review.opendev.org/#/c/668862/\n[5] https://review.opendev.org/#/c/669178/\n[6] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n[7] https://github.com/eventlet/eventlet/blame/master/README.rst#L3\n[8] https://review.opendev.org/#/c/661314/\n[9] https://libevent.org/\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\nCloses-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 18, 'created': '2019-07-10 14:19:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/318a9b102cf532841a1cd69346a36a01253c5220', 'message': 'Allow users run the rabbitmq heartbeat inside a standard pthread.\n\nThis is an experimental feature.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to allow user to choose to run the rabbitmq health check\nheartbeat in a standard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [6] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\neventlet is based on epoll or libevent [7][9], in an environment based on\napache MPM `prefork` module who doesn\'t support epoll and recent kernel\nfeatures.\n\nThe MPM `prefork` apache module is appropriate for sites that\nneed to avoid threading for compatibility with non-thread-safe\nlibraries [1].\n\nPossible proposed solutions\n===========================\n\nTo fix this issue we have proposed different approaches during discussions [8]:\n- using a python thread (this change)\n- using eventlet tpool execute (https://review.opendev.org/#/c/663074/9/)\n\nThe only version which work like expected is this patch set who\ncorrespond to use a native python thread and not eventlet.\n\nI think the tpool solution doesn\'t work correctly due to the apache\nengine in use currently (`prefork`), and using tpool keep us to using\neventlet and so libevent or epoll too.\n\nI would propose to you to compare the different solutions that I\'ve\ntested and I want allow to you to observe the behaviours.\n\nBut before starting the comparison I\'ll describe a little bit the chosen\nsolution.\n\nChosen solution\n===============\n\nWe want to allow user to isolate the heartbeat execution model\nfrom the parent process inherited execution model by passing the\n`heartbeat_in_pthread` option through the driver config.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nIf the `heartbeat_in_pthread` option is given we want to force to use the\npython stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nThis is an experimental feature, we can help us to ensure to run heartbeat\nthrough a classical python thread\nnot build over epoll and libevent to avoid issue with environment who\ndoesn\'t support these kernel features.\n\nAlso we try to switch [4][5] from the apache `prefork` module to the `event`\nmodule which support non blocking sockets, use modern kernel features\nlike epoll through APR [3].\n\nPOC\n===\n\nSome POC are available at:\nhttps://github.com/4383/pyamqp-heartbeat/blob/master/POC.md\n\nYou can test behaviors between execution models and the current code base.\n\nThese POCs are not compatible with the patches set higher than the patch\nset 15.\n\nThey don\'t reflect the latest changes and especially the\n`heartbeat_in_pthread` option and the possibility to turn on/off the\nfeature. In other words on these POCs we always force to use pthreads\nand these POCs allow you to compare the rabbitmq heartbeat connection\nwith pthread and green thread.\n\nFurther reading\n===============\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\n- https://github.com/4383/pyamqp-heartbeat/tree/master/fakeservice\n\nWith this walkthrough you can observe the differents steps\nused by nova to use oslo.messaging and the different components in use\nto obtain the big picture of the stack.\n\nThe previous POC is based on this walkthrough as much as possible to\nreproduce the original issue.\n\nAlso you can retrieve online discussion on the mailing list about this\ntopic:\n- http://lists.openstack.org/pipermail/openstack-discuss/2019-April/005310.html\n\nLibevent support epoll too [9] but I don\'t know in which case eventlet use it.\n\nReferences\n==========\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://httpd.apache.org/docs/2.4/fr/mod/event.html\n[3] https://httpd.apache.org/docs/2.4/fr/glossary.html#apr\n[4] https://review.opendev.org/#/c/668862/\n[5] https://review.opendev.org/#/c/669178/\n[6] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n[7] https://github.com/eventlet/eventlet/blame/master/README.rst#L3\n[8] https://review.opendev.org/#/c/661314/\n[9] https://libevent.org/\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\nCloses-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 19, 'created': '2019-07-11 06:43:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/197e4f47af5d0cea7e408ac4136bb18b2f8f1ac8', 'message': 'Allow users run the rabbitmq heartbeat inside a standard pthread.\n\nThis is an experimental feature.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to allow user to choose to run the rabbitmq health check\nheartbeat in a standard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [6] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\neventlet is based on epoll or libevent [7][9], in an environment based on\napache MPM `prefork` module who doesn\'t support epoll and recent kernel\nfeatures.\n\nThe MPM `prefork` apache module is appropriate for sites that\nneed to avoid threading for compatibility with non-thread-safe\nlibraries [1].\n\nPossible proposed solutions\n===========================\n\nTo fix this issue we have proposed different approaches during discussions [8]:\n- using a python thread (this change)\n- using eventlet tpool execute (https://review.opendev.org/#/c/663074/9/)\n\nThe only version which work like expected is this patch set who\ncorrespond to use a native python thread and not eventlet.\n\nI think the tpool solution doesn\'t work correctly due to the apache\nengine in use currently (`prefork`), and using tpool keep us to using\neventlet and so libevent or epoll too.\n\nI would propose to you to compare the different solutions that I\'ve\ntested and I want allow to you to observe the behaviours.\n\nBut before starting the comparison I\'ll describe a little bit the chosen\nsolution.\n\nChosen solution\n===============\n\nWe want to allow user to isolate the heartbeat execution model\nfrom the parent process inherited execution model by passing the\n`heartbeat_in_pthread` option through the driver config.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nIf the `heartbeat_in_pthread` option is given we want to force to use the\npython stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nThis is an experimental feature, we can help us to ensure to run heartbeat\nthrough a classical python thread\nnot build over epoll and libevent to avoid issue with environment who\ndoesn\'t support these kernel features.\n\nAlso we try to switch [4][5] from the apache `prefork` module to the `event`\nmodule which support non blocking sockets, use modern kernel features\nlike epoll through APR [3].\n\nPOC\n===\n\nSome POC are available at:\nhttps://github.com/4383/pyamqp-heartbeat/blob/master/POC.md\n\nYou can test behaviors between execution models and the current code base.\n\nThese POCs are not compatible with the patches set higher than the patch\nset 15.\n\nThey don\'t reflect the latest changes and especially the\n`heartbeat_in_pthread` option and the possibility to turn on/off the\nfeature. In other words on these POCs we always force to use pthreads\nand these POCs allow you to compare the rabbitmq heartbeat connection\nwith pthread and green thread.\n\nFurther reading\n===============\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\n- https://github.com/4383/pyamqp-heartbeat/tree/master/fakeservice\n\nWith this walkthrough you can observe the differents steps\nused by nova to use oslo.messaging and the different components in use\nto obtain the big picture of the stack.\n\nThe previous POC is based on this walkthrough as much as possible to\nreproduce the original issue.\n\nAlso you can retrieve online discussion on the mailing list about this\ntopic:\n- http://lists.openstack.org/pipermail/openstack-discuss/2019-April/005310.html\n\nLibevent support epoll too [9] but I don\'t know in which case eventlet use it.\n\nReferences\n==========\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://httpd.apache.org/docs/2.4/fr/mod/event.html\n[3] https://httpd.apache.org/docs/2.4/fr/glossary.html#apr\n[4] https://review.opendev.org/#/c/668862/\n[5] https://review.opendev.org/#/c/669178/\n[6] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n[7] https://github.com/eventlet/eventlet/blame/master/README.rst#L3\n[8] https://review.opendev.org/#/c/661314/\n[9] https://libevent.org/\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\nCloses-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 20, 'created': '2019-07-29 09:56:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/e589f93ab360ad6dd0ba313c3805b407c1eebd3a', 'message': 'Allow users run the rabbitmq heartbeat inside a standard pthread.\n\nThis is an experimental feature.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to allow user to choose to run the rabbitmq health check\nheartbeat in a standard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [6] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\neventlet is based on epoll or libevent [7][9], in an environment based on\napache MPM `prefork` module who doesn\'t support epoll and recent kernel\nfeatures.\n\nThe MPM `prefork` apache module is appropriate for sites that\nneed to avoid threading for compatibility with non-thread-safe\nlibraries [1].\n\nPossible proposed solutions\n===========================\n\nTo fix this issue we have proposed different approaches during discussions [8]:\n- using a python thread (this change)\n- using eventlet tpool execute (https://review.opendev.org/#/c/663074/9/)\n\nThe only version which work like expected is this patch set who\ncorrespond to use a native python thread and not eventlet.\n\nI think the tpool solution doesn\'t work correctly due to the apache\nengine in use currently (`prefork`), and using tpool keep us to using\neventlet and so libevent or epoll too.\n\nI would propose to you to compare the different solutions that I\'ve\ntested and I want allow to you to observe the behaviours.\n\nBut before starting the comparison I\'ll describe a little bit the chosen\nsolution.\n\nChosen solution\n===============\n\nWe want to allow user to isolate the heartbeat execution model\nfrom the parent process inherited execution model by passing the\n`heartbeat_in_pthread` option through the driver config.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nIf the `heartbeat_in_pthread` option is given we want to force to use the\npython stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nThis is an experimental feature, we can help us to ensure to run heartbeat\nthrough a classical python thread\nnot build over epoll and libevent to avoid issue with environment who\ndoesn\'t support these kernel features.\n\nAlso we try to switch [4][5] from the apache `prefork` module to the `event`\nmodule which support non blocking sockets, use modern kernel features\nlike epoll through APR [3].\n\nPOC\n===\n\nSome POC are available at:\nhttps://github.com/4383/pyamqp-heartbeat/blob/master/POC.md\n\nYou can test behaviors between execution models and the current code base.\n\nThese POCs are not compatible with the patches set higher than the patch\nset 15.\n\nThey don\'t reflect the latest changes and especially the\n`heartbeat_in_pthread` option and the possibility to turn on/off the\nfeature. In other words on these POCs we always force to use pthreads\nand these POCs allow you to compare the rabbitmq heartbeat connection\nwith pthread and green thread.\n\nFurther reading\n===============\n\nTo understand how services consume the oslo.messaging drivers,\nand especially how to nova consome the oslo.messaging rabbitmq driver,\nplease take a look to:\n- https://github.com/4383/pyamqp-heartbeat/tree/master/fakeservice\n\nWith this walkthrough you can observe the differents steps\nused by nova to use oslo.messaging and the different components in use\nto obtain the big picture of the stack.\n\nThe previous POC is based on this walkthrough as much as possible to\nreproduce the original issue.\n\nAlso you can retrieve online discussion on the mailing list about this\ntopic:\n- http://lists.openstack.org/pipermail/openstack-discuss/2019-April/005310.html\n\nLibevent support epoll too [9] but I don\'t know in which case eventlet use it.\n\nReferences\n==========\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://httpd.apache.org/docs/2.4/fr/mod/event.html\n[3] https://httpd.apache.org/docs/2.4/fr/glossary.html#apr\n[4] https://review.opendev.org/#/c/668862/\n[5] https://review.opendev.org/#/c/669178/\n[6] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n[7] https://github.com/eventlet/eventlet/blame/master/README.rst#L3\n[8] https://review.opendev.org/#/c/661314/\n[9] https://libevent.org/\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\nCloses-Bug: #1826281\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}, {'number': 21, 'created': '2019-08-07 15:24:01.000000000', 'files': ['oslo_messaging/tests/drivers/test_impl_rabbit.py', 'oslo_messaging/_drivers/impl_rabbit.py'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/22f240b82fffbd62be8568a7d0d3369134596ace', 'message': 'Allow users run the rabbitmq heartbeat inside a standard pthread.\n\nThis is an experimental feature.\n\nThe proposed changes will fix related issues when we run\nheartbeat under apache/httpd enviornment with the apache MPM `prefork`\n[1] engine and mod_wsgi or uwsgi in a monkey patched environment.\n\nPropose changes to allow user to choose to run the rabbitmq health check\nheartbeat in a standard python thread.\n\nIssue\n=====\n\nWe facing an issue with the rabbitmq driver heartbeat\nunder apache MPM `prefork` module and mod_wsgi when nova_api monkey\npatched the stdlib by using eventlet.\n\nnova_api calling eventlet.monkey_patch() [2] when it runs under mod_wsgi.\n\nThis impacts the AMQP heartbeat thread,\nwhich is meant to be a native thread. Instead of checking AMQP sockets\nevery 15s, It is now suspended and resumed by eventlet. However,\nresuming greenthreads can take a very long time if mod_wsgi isn\'t\nprocessing traffic regularly, which can cause rabbitmq to close the AMQP\nconnection.\n\nRoot Cause\n==========\n\nThe oslo.messaging RabbitMQ driver and especially the heartbeat\nsuffer to inherit the execution model of the service which consume him.\n\nIn this scenario nova_api need green threads to manage cells and edge\nfeatures so nova_api monkey patch the stdlib to obtain async features,\nand the oslo.messaging rabbitmq driver endure these changes.\n\nI think the main issue here is that nova_api want async and use eventlet green\nthreads to obtain it.\n\nSolution\n========\n\nWe want to allow user to isolate the heartbeat execution model\nfrom the parent process inherited execution model by passing the\n`heartbeat_in_pthread` option through the driver config.\n\nWhile we use MPM `prefork` we want to avoid to use libevent and epoll.\n\nIf the `heartbeat_in_pthread` option is given we want to force to use the\npython stdlib threading module to run the\nrabbitmq heartbeat to avoid issue related to a non ""standard""\nenvironment. I mean ""standard"" because async features isn\'t the default\nconfig in mostly case, starting by apache which define `prefork` is the\ndefault engine.\n\nThis is an experimental feature, we can help us to ensure to run heartbeat\nthrough a classical python thread\n\nSpecifications\n==============\n\n- https://review.opendev.org/661314\n\n[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html\n[2] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04\n\nChange-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed\n'}]",19,663074,22f240b82fffbd62be8568a7d0d3369134596ace,73,9,21,28522,,,0,"Allow users run the rabbitmq heartbeat inside a standard pthread.

This is an experimental feature.

The proposed changes will fix related issues when we run
heartbeat under apache/httpd enviornment with the apache MPM `prefork`
[1] engine and mod_wsgi or uwsgi in a monkey patched environment.

Propose changes to allow user to choose to run the rabbitmq health check
heartbeat in a standard python thread.

Issue
=====

We facing an issue with the rabbitmq driver heartbeat
under apache MPM `prefork` module and mod_wsgi when nova_api monkey
patched the stdlib by using eventlet.

nova_api calling eventlet.monkey_patch() [2] when it runs under mod_wsgi.

This impacts the AMQP heartbeat thread,
which is meant to be a native thread. Instead of checking AMQP sockets
every 15s, It is now suspended and resumed by eventlet. However,
resuming greenthreads can take a very long time if mod_wsgi isn't
processing traffic regularly, which can cause rabbitmq to close the AMQP
connection.

Root Cause
==========

The oslo.messaging RabbitMQ driver and especially the heartbeat
suffer to inherit the execution model of the service which consume him.

In this scenario nova_api need green threads to manage cells and edge
features so nova_api monkey patch the stdlib to obtain async features,
and the oslo.messaging rabbitmq driver endure these changes.

I think the main issue here is that nova_api want async and use eventlet green
threads to obtain it.

Solution
========

We want to allow user to isolate the heartbeat execution model
from the parent process inherited execution model by passing the
`heartbeat_in_pthread` option through the driver config.

While we use MPM `prefork` we want to avoid to use libevent and epoll.

If the `heartbeat_in_pthread` option is given we want to force to use the
python stdlib threading module to run the
rabbitmq heartbeat to avoid issue related to a non ""standard""
environment. I mean ""standard"" because async features isn't the default
config in mostly case, starting by apache which define `prefork` is the
default engine.

This is an experimental feature, we can help us to ensure to run heartbeat
through a classical python thread

Specifications
==============

- https://review.opendev.org/661314

[1] https://httpd.apache.org/docs/2.4/fr/mod/prefork.html
[2] https://github.com/openstack/nova/commit/3c5e2b0e9fac985294a949852bb8c83d4ed77e04

Change-Id: If8846599efc48fe18ecfb99c04e2c38f9a45b9ed
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/74/663074/14 && git format-patch -1 --stdout FETCH_HEAD,['oslo_messaging/_drivers/impl_rabbit.py'],1,9f4d387e344c4ba0959cf0f1f39f0fa1b58688fd,bug/1826281,"from oslo_utils import importutils# NOTE(hberaud): threading module is in use to run the rabbitmq health check # heartbeat, we want to force to use pthread here instead of using a # monkey patched thread for the heartbeat to avoid issue related to the # parent execution environment (example: mod_wsgi, uwsgi). # eventlet green threads doesn't work properly in a mod_wsgi environment so if # oslo.messaging users have monkey patch the stdlib for some reasons and if # they run theirs services under mod_wsgi the heartbeat thread will fail. # The heartbeat doesn't need a green thread to be ran. eventlet = importutils.try_import('eventlet') eventlet_patched = eventlet and eventletutils.is_monkey_patched(""thread"") if eventlet_patched: # We need to make # sure the *native* threading module for initialize # the heartbeat thread.. threading = eventlet.patcher.original('threading') else: import threading self._heartbeat_exit_event = threading.Event()",import threading self._heartbeat_exit_event = eventletutils.Event(),19,2
openstack%2Frpm-packaging-tools~master~I182c3e4c8a0e0d3bad7e9636050a328d6ca72b03,openstack/rpm-packaging-tools,master,I182c3e4c8a0e0d3bad7e9636050a328d6ca72b03,"Move current CLI behaviour to a subcommand called ""status""",MERGED,2019-08-06 12:14:17.000000000,2019-08-08 15:46:21.000000000,2019-08-08 15:46:21.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-06 12:14:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging-tools/commit/5bdb835f087e3f0278634df69ead8e3264cb5e11', 'message': 'Move current CLI behaviour to a subcommand called ""status""\n\nInstead of calling\n\n./tools/rpm-packaging-status.py ../releases/ ../rpm-packaging/ \\\n    ../requirements train\n\ndo now\n\n./tools/rpm-packaging-status.py status ../releases/ \\\n    ../rpm-packaging/ ../requirements train\n\nWith that we can introduce other commands in the future.\n\nChange-Id: I182c3e4c8a0e0d3bad7e9636050a328d6ca72b03\n'}, {'number': 2, 'created': '2019-08-06 12:30:52.000000000', 'files': ['tools/rpm-packaging-status.py', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/rpm-packaging-tools/commit/f4b0814a306ddc898ba0bcb8500a096a625d2042', 'message': 'Move current CLI behaviour to a subcommand called ""status""\n\nInstead of calling\n\n./tools/rpm-packaging-status.py ../releases/ ../rpm-packaging/ \\\n    ../requirements train\n\ndo now\n\n./tools/rpm-packaging-status.py status ../releases/ \\\n    ../rpm-packaging/ ../requirements train\n\nWith that we can introduce other commands in the future.\n\nChange-Id: I182c3e4c8a0e0d3bad7e9636050a328d6ca72b03\n'}]",0,674795,f4b0814a306ddc898ba0bcb8500a096a625d2042,9,4,2,7102,,,0,"Move current CLI behaviour to a subcommand called ""status""

Instead of calling

./tools/rpm-packaging-status.py ../releases/ ../rpm-packaging/ \
    ../requirements train

do now

./tools/rpm-packaging-status.py status ../releases/ \
    ../rpm-packaging/ ../requirements train

With that we can introduce other commands in the future.

Change-Id: I182c3e4c8a0e0d3bad7e9636050a328d6ca72b03
",git fetch https://review.opendev.org/openstack/rpm-packaging-tools refs/changes/95/674795/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/rpm-packaging-status.py'],1,5bdb835f087e3f0278634df69ead8e3264cb5e11,improve,"def _process_status(args=None): projects = {} upper_constraints = read_upper_constraints( os.path.join(args['requirements-git-dir'], 'upper-constraints.txt')) # open reviews for the given release open_reviews = _gerrit_open_reviews_per_file(args['release']) # directory which contains all yaml files from the openstack/release # git dir releases_yaml_dir = os.path.join(args['releases-git-dir'], 'deliverables', args['release']) releases_indep_yaml_dir = os.path.join(args['releases-git-dir'], 'deliverables', '_independent') yaml_files = [os.path.join(releases_indep_yaml_dir, f) for f in os.listdir(releases_indep_yaml_dir)] yaml_files += [os.path.join(releases_yaml_dir, f) for f in os.listdir(releases_yaml_dir)] for yaml_file in yaml_files: project_name = re.sub('\.ya?ml$', '', os.path.basename(yaml_file)) # skip projects if include list is given if len(args['include_projects']) and \ project_name not in args['include_projects']: continue with open(yaml_file) as f: data = yaml.load(f.read()) if 'releases' not in data: # there might be yaml files without any releases continue v_release = find_highest_release_version(data['releases']) # use tarball-base name if available project_name_pkg = v_release['projects'][0].get('tarball-base', project_name) # get version from upper-constraints.txt if project_name in upper_constraints: v_upper_constraints = upper_constraints[project_name] else: v_upper_constraints = '-' # path to the corresponding .spec.j2 file rpm_packaging_pkg_project_spec = os.path.join( args['rpm-packaging-git-dir'], 'openstack', project_name_pkg, '%s.spec.j2' % project_name_pkg) v_rpm_packaging_pkg = find_rpm_packaging_pkg_version( rpm_packaging_pkg_project_spec) # version from build service published file v_obs_published = find_openbuildservice_pkg_version( args['obs_published_xml'], project_name) # reviews for the given project if project_name in open_reviews: project_reviews = open_reviews[project_name] else: project_reviews = [] # add both versions to the project dict projects[project_name] = V(version.parse(v_release['version']), v_upper_constraints, v_rpm_packaging_pkg, project_reviews, v_obs_published) include_obs = args['obs_published_xml'] if args['format'] == 'text': output_text(args['release'], projects, include_obs) elif args['format'] == 'html': output_html(args['release'], projects, include_obs) subparsers = parser.add_subparsers(help='sub-command help') # subparsers - status parser_status = subparsers.add_parser('status', help='status help') parser_status.add_argument('releases-git-dir', help='Base directory of the openstack/releases ' 'git repo', default='releases') parser_status.add_argument('rpm-packaging-git-dir', help='Base directory of the ' 'openstack/rpm-packaging git repo', default='rpm-packaging') parser_status.add_argument('requirements-git-dir', help='Base directory of the ' 'openstack/requirements git repo', default='requirements') parser_status.add_argument('--obs-published-xml', help='path to a published xml file from the ' 'openbuildservice') parser_status.add_argument('release', help='name of the release. I.e. ""mitaka""', default='mitaka') parser_status.add_argument('--include-projects', nargs='*', metavar='project-name', default=[], help='If non-empty, only the given ' 'projects will be checked. ' 'default: %(default)s') parser_status.add_argument('--format', help='output format', choices=('text', 'html'), default='text') parser_status.set_defaults(func=_process_status) args = parser.parse_args() args.func(vars(args)) process_args()"," parser.add_argument('releases-git-dir', help='Base directory of the openstack/releases ' 'git repo', default='releases') parser.add_argument('rpm-packaging-git-dir', help='Base directory of the openstack/rpm-packaging ' 'git repo', default='rpm-packaging') parser.add_argument('requirements-git-dir', help='Base directory of the openstack/requirements ' 'git repo', default='requirements') parser.add_argument('--obs-published-xml', help='path to a published xml file from the ' 'openbuildservice') parser.add_argument('release', help='name of the release. I.e. ""mitaka""', default='mitaka') parser.add_argument('--include-projects', nargs='*', metavar='project-name', default=[], help='If non-empty, only the given ' 'projects will be checked. default: %(default)s') parser.add_argument('--format', help='output format', choices=('text', 'html'), default='text') return vars(parser.parse_args()) args = process_args() projects = {} upper_constraints = read_upper_constraints( os.path.join(args['requirements-git-dir'], 'upper-constraints.txt')) # open reviews for the given release open_reviews = _gerrit_open_reviews_per_file(args['release']) # directory which contains all yaml files from the openstack/release # git dir releases_yaml_dir = os.path.join(args['releases-git-dir'], 'deliverables', args['release']) releases_indep_yaml_dir = os.path.join(args['releases-git-dir'], 'deliverables', '_independent') yaml_files = [os.path.join(releases_indep_yaml_dir, f) for f in os.listdir(releases_indep_yaml_dir)] yaml_files += [os.path.join(releases_yaml_dir, f) for f in os.listdir(releases_yaml_dir)] for yaml_file in yaml_files: project_name = re.sub('\.ya?ml$', '', os.path.basename(yaml_file)) # skip projects if include list is given if len(args['include_projects']) and \ project_name not in args['include_projects']: continue with open(yaml_file) as f: data = yaml.load(f.read()) if 'releases' not in data: # there might be yaml files without any releases continue v_release = find_highest_release_version(data['releases']) # use tarball-base name if available project_name_pkg = v_release['projects'][0].get('tarball-base', project_name) # get version from upper-constraints.txt if project_name in upper_constraints: v_upper_constraints = upper_constraints[project_name] else: v_upper_constraints = '-' # path to the corresponding .spec.j2 file rpm_packaging_pkg_project_spec = os.path.join( args['rpm-packaging-git-dir'], 'openstack', project_name_pkg, '%s.spec.j2' % project_name_pkg) v_rpm_packaging_pkg = find_rpm_packaging_pkg_version( rpm_packaging_pkg_project_spec) # version from build service published file v_obs_published = find_openbuildservice_pkg_version( args['obs_published_xml'], project_name) # reviews for the given project if project_name in open_reviews: project_reviews = open_reviews[project_name] else: project_reviews = [] # add both versions to the project dict projects[project_name] = V(version.parse(v_release['version']), v_upper_constraints, v_rpm_packaging_pkg, project_reviews, v_obs_published) include_obs = args['obs_published_xml'] if args['format'] == 'text': output_text(args['release'], projects, include_obs) elif args['format'] == 'html': output_html(args['release'], projects, include_obs) ",105,96
openstack%2Frpm-packaging-tools~master~Iba609c18e173301ca8c4d4c584431a98f332dad3,openstack/rpm-packaging-tools,master,Iba609c18e173301ca8c4d4c584431a98f332dad3,Use python3 in shebang,MERGED,2019-08-06 12:14:17.000000000,2019-08-08 15:46:20.000000000,2019-08-08 15:46:20.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-06 12:14:17.000000000', 'files': ['tools/rpm-packaging-status.py'], 'web_link': 'https://opendev.org/openstack/rpm-packaging-tools/commit/59c9ae3dc5be1ec410a8cb0ba4063ec9fbcc5628', 'message': 'Use python3 in shebang\n\nGet rid of python2\n\nChange-Id: Iba609c18e173301ca8c4d4c584431a98f332dad3\n'}]",0,674794,59c9ae3dc5be1ec410a8cb0ba4063ec9fbcc5628,7,4,1,7102,,,0,"Use python3 in shebang

Get rid of python2

Change-Id: Iba609c18e173301ca8c4d4c584431a98f332dad3
",git fetch https://review.opendev.org/openstack/rpm-packaging-tools refs/changes/94/674794/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/rpm-packaging-status.py'],1,59c9ae3dc5be1ec410a8cb0ba4063ec9fbcc5628,improve,#!/usr/bin/python3,#!/usr/bin/python,1,1
openstack%2Fopenstack-ansible-os_zun~master~I8c9d80b5396ef486f1fd70857b0d8ebbffdf87a6,openstack/openstack-ansible-os_zun,master,I8c9d80b5396ef486f1fd70857b0d8ebbffdf87a6,service_setup: refactor service setup to a single file,MERGED,2019-08-08 11:32:29.000000000,2019-08-08 15:33:49.000000000,2019-08-08 15:33:49.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-08 11:32:29.000000000', 'files': ['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/zun_service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_zun/commit/54c580ced05d2bd65846d0a08877a2de327b17fa', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I8c9d80b5396ef486f1fd70857b0d8ebbffdf87a6\n'}]",0,675300,54c580ced05d2bd65846d0a08877a2de327b17fa,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: I8c9d80b5396ef486f1fd70857b0d8ebbffdf87a6
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_zun refs/changes/00/675300/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/zun_service_setup.yml']",3,54c580ced05d2bd65846d0a08877a2de327b17fa,osa/service_refactor,,"--- # Copyright 2018, Rackspace US, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the service delegate_to: ""{{ zun_service_setup_host }}"" vars: ansible_python_interpreter: ""{{ zun_service_setup_host_python_interpreter }}"" block: - name: Add service to the keystone service catalog os_keystone_service: cloud: default state: present name: ""{{ zun_service_name }}"" service_type: ""{{ zun_service_type }}"" description: ""{{ zun_service_description }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 - name: Add service user os_user: cloud: default state: present name: ""{{ item.name }}"" password: ""{{ item.password }}"" domain: default default_project: ""{{ zun_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not zun_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 no_log: True with_items: - name: ""{{ zun_service_user_name }}"" password: ""{{ zun_service_password }}"" - name: ""{{ zun_kuryr_service_username }}"" password: ""{{ zun_kuryr_service_password }}"" loop_control: label: ""{{ item.name }}"" - name: Add service user to admin role os_user_role: cloud: default state: present user: ""{{ item }}"" role: ""{{ zun_service_role_name }}"" project: ""{{ zun_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not zun_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 with_items: - ""{{ zun_service_user_name }}"" - ""{{ zun_kuryr_service_username }}"" - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: present service: ""{{ zun_service_name }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ zun_service_region }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: - interface: ""public"" url: ""{{ zun_service_publicurl }}"" - interface: ""internal"" url: ""{{ zun_service_internalurl }}"" - interface: ""admin"" url: ""{{ zun_service_adminurl }}"" ",188,103
openstack%2Fsahara-tests~master~I5683245c0a9373e299a647f7f61d3e6a2de284e6,openstack/sahara-tests,master,I5683245c0a9373e299a647f7f61d3e6a2de284e6,"Force the format of ssh key to PEM, at least for now",MERGED,2019-07-29 08:11:46.000000000,2019-08-08 15:32:56.000000000,2019-08-08 15:32:55.000000000,"[{'_account_id': 8932}, {'_account_id': 22348}, {'_account_id': 23078}]","[{'number': 1, 'created': '2019-07-29 08:11:46.000000000', 'files': ['releasenotes/notes/force-pem-ssh-keys-2cc9eb30a76c8dd1.yaml', 'sahara_tests/utils/crypto.py'], 'web_link': 'https://opendev.org/openstack/sahara-tests/commit/9f57fcaa9fbd46f2ed4f6f44a13f2b4553f3b7b4', 'message': 'Force the format of ssh key to PEM, at least for now\n\nUnfortunately it is not possible to switch to the new, more secure, native\nformat of OpenSSH >=6.5, because paramiko does not support it:\nhttps://github.com/paramiko/paramiko/issues/602\n\nA similar change has been applied to sahara some time ago:\nhttps://review.opendev.org/605028\n\nStory: 2003674\nTask: 35983\nChange-Id: I5683245c0a9373e299a647f7f61d3e6a2de284e6\n'}]",0,673229,9f57fcaa9fbd46f2ed4f6f44a13f2b4553f3b7b4,7,3,1,10459,,,0,"Force the format of ssh key to PEM, at least for now

Unfortunately it is not possible to switch to the new, more secure, native
format of OpenSSH >=6.5, because paramiko does not support it:
https://github.com/paramiko/paramiko/issues/602

A similar change has been applied to sahara some time ago:
https://review.opendev.org/605028

Story: 2003674
Task: 35983
Change-Id: I5683245c0a9373e299a647f7f61d3e6a2de284e6
",git fetch https://review.opendev.org/openstack/sahara-tests refs/changes/29/673229/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/force-pem-ssh-keys-2cc9eb30a76c8dd1.yaml', 'sahara_tests/utils/crypto.py']",2,9f57fcaa9fbd46f2ed4f6f44a13f2b4553f3b7b4,ssh-key," # The key is generated in the old PEM format, instead of the native # format of OpenSSH >=6.5, because paramiko does not support it: # https://github.com/paramiko/paramiko/issues/602 '-m', 'PEM', # old PEM format",,10,0
openstack%2Foslo.policy~master~I7c761710e88d144fef4736295e8d9dd85bf72396,openstack/oslo.policy,master,I7c761710e88d144fef4736295e8d9dd85bf72396,Add unit tests on the sphinxext indent function,MERGED,2019-07-17 10:51:35.000000000,2019-08-08 15:27:26.000000000,2019-08-08 15:27:26.000000000,"[{'_account_id': 6928}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 29222}]","[{'number': 1, 'created': '2019-07-17 10:51:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/8d70ff3598382fb8fde5117a9f9447a23152a168', 'message': 'Add unit tests on the sphinxext indent function\n\nChange-Id: I7c761710e88d144fef4736295e8d9dd85bf72396\n'}, {'number': 2, 'created': '2019-07-17 17:21:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/0995db590fd72324dc3baa674ab53068ecb8a669', 'message': 'Remove useless strip code and add unit tests on the sphinxext indent function\n\nThe if/else condition in the yield always return True\nno matter the input text so we don\'t strip anything at all.\n\nDo we need to always strip spaces? I suppose yes but\ntill now we never strip anything.\n\nWe need to choose wheter to strip things or not.\n\nBecarful, using strip without using any char also remove the line returns ""\\n"".\n\nYou can test the strip issue by using:\n```\n$ python\n>>> bool(""   test"".strip())\nTrue\n>>> bool(""test"".strip())\nTrue\n```\n\nSo we will always prefix everything\n\nChange-Id: I7c761710e88d144fef4736295e8d9dd85bf72396\n'}, {'number': 3, 'created': '2019-07-22 09:46:50.000000000', 'files': ['oslo_policy/tests/test_sphinxext.py'], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/0d01756c1db9a6c19d263edadeda775adf5291af', 'message': 'Add unit tests on the sphinxext indent function\n\nChange-Id: I7c761710e88d144fef4736295e8d9dd85bf72396\n'}]",2,671241,0d01756c1db9a6c19d263edadeda775adf5291af,24,5,3,28522,,,0,"Add unit tests on the sphinxext indent function

Change-Id: I7c761710e88d144fef4736295e8d9dd85bf72396
",git fetch https://review.opendev.org/openstack/oslo.policy refs/changes/41/671241/1 && git format-patch -1 --stdout FETCH_HEAD,['oslo_policy/tests/test_sphinxext.py'],1,8d70ff3598382fb8fde5117a9f9447a23152a168,addtest,"class IndentTest(base.BaseTestCase): def test_indent(self): result = sphinxext._indent(""foo\nbar"") self.assertEqual("" foo\n bar"", result) ",,7,0
openstack%2Frally-openstack~master~I21ffc24304596ea53451e603299146644084c5e2,openstack/rally-openstack,master,I21ffc24304596ea53451e603299146644084c5e2,Add waiting for delete of octavia load balancer,NEW,2019-08-06 15:53:57.000000000,2019-08-08 15:18:03.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-06 15:53:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/ea52651066c3823d3385e4f2d0fc11fe8f27b442', 'message': 'Add waiting for delete of octavia load balancer\n\nChange-Id: I21ffc24304596ea53451e603299146644084c5e2\n'}, {'number': 2, 'created': '2019-08-07 15:26:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/9c8b174db43c47ac16e0f051a64c422d4ac5f2c2', 'message': 'Add waiting for delete of octavia load balancer\n\nChange-Id: I21ffc24304596ea53451e603299146644084c5e2\n'}, {'number': 3, 'created': '2019-08-08 10:29:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/3a6c87127995446e4d4893bc27935b59aa8bc63f', 'message': 'Add waiting for delete of octavia load balancer\n\nChange-Id: I21ffc24304596ea53451e603299146644084c5e2\n'}, {'number': 4, 'created': '2019-08-08 13:07:48.000000000', 'files': ['rally_openstack/services/loadbalancer/octavia.py'], 'web_link': 'https://opendev.org/openstack/rally-openstack/commit/a93c5a8c030648fa47a1b353df185b412e046862', 'message': 'Add waiting for delete of octavia load balancer\n\nChange-Id: I21ffc24304596ea53451e603299146644084c5e2\n'}]",0,674855,a93c5a8c030648fa47a1b353df185b412e046862,8,1,4,9545,,,0,"Add waiting for delete of octavia load balancer

Change-Id: I21ffc24304596ea53451e603299146644084c5e2
",git fetch https://review.opendev.org/openstack/rally-openstack refs/changes/55/674855/1 && git format-patch -1 --stdout FETCH_HEAD,['rally_openstack/services/loadbalancer/octavia.py'],1,ea52651066c3823d3385e4f2d0fc11fe8f27b442,octaviaDelete," def load_balancer_delete(self, lb_id, wait=True, cascade=False): :param string lb_id: an ID of loadbalancer to delete :param bool wait: whether to wait till loadbalancer become unavailable or not (Defaults to True) :param cascade: remove loadbalancer and all related resources (Defaults to False) :return: Response Code from the API resp = self._clients.octavia().load_balancer_delete( if wait: utils.wait_for_status( {""id"": lb_id, ""provisioning_status"": ""n/a""}, ready_statuses=[""deleted""], status_attr=""provisioning_status"", check_deletion=True, update_resource=lambda lb: self.load_balancer_show(lb[""id""]), timeout=CONF.openstack.octavia_delete_loadbalancer_timeout, check_interval=( CONF.openstack.octavia_create_loadbalancer_poll_interval) ) return resp"," def load_balancer_delete(self, lb_id, cascade=False): :param string lb: The dict of the load balancer to delete :return: Response Code from the API return self._clients.octavia().load_balancer_delete(",21,6
openstack%2Frpm-packaging~master~Icb00b38b639da7b3f20b472fb39efbc72b44f81c,openstack/rpm-packaging,master,Icb00b38b639da7b3f20b472fb39efbc72b44f81c,neutron/networking-generic-switch: switch to python3,MERGED,2019-07-11 17:20:18.000000000,2019-08-08 15:04:50.000000000,2019-08-08 15:04:50.000000000,"[{'_account_id': 6593}, {'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 13294}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-11 17:20:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/8a4ce11536245bdd3543bce8308a5fbe7fa936b9', 'message': 'neutron: switch to python3\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}, {'number': 2, 'created': '2019-07-11 17:40:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/ffd22b3f3d557457af07a4062d40dc6cbe93acb5', 'message': 'neutron: switch to python3\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}, {'number': 3, 'created': '2019-07-11 20:39:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/3e533c0d6e654fbe44aa3e5545e09b908998f247', 'message': 'neutron: switch to python3\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}, {'number': 4, 'created': '2019-07-11 21:16:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/939fb309610417fd77a5831982d16b6d026b194e', 'message': 'neutron: switch to python3\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}, {'number': 5, 'created': '2019-08-02 14:28:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/21a6ce4c8450f33771e39e502f437d771d4f8174', 'message': 'neutron: switch to python3\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}, {'number': 6, 'created': '2019-08-02 20:52:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/3a306b33a84629eea52067e3a4f646a21f785aad', 'message': 'neutron/networking-generic-switch: switch to python3\n\nWe need both to merge at the same time as they\ndepend on each other.\n\nCo-Authored-By: Jaime Caamao Ruiz <jcaamano@suse.com>\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}, {'number': 7, 'created': '2019-08-04 17:54:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/a593d6a83d341f27bd7900758be090d764e396a6', 'message': 'neutron/networking-generic-switch: switch to python3\n\nWe need both to merge at the same time as they\ndepend on each other.\n\nCo-Authored-By: Jaime Caamao Ruiz <jcaamano@suse.com>\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}, {'number': 8, 'created': '2019-08-08 13:26:35.000000000', 'files': ['openstack/networking-generic-switch/networking-generic-switch.spec.j2', 'openstack/neutron/neutron.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/77f2fcb936a7da56239cdbe52e5f1154184f8f48', 'message': 'neutron/networking-generic-switch: switch to python3\n\nWe need both to merge at the same time as they\ndepend on each other.\n\nCo-Authored-By: Jaime Caamao Ruiz <jcaamano@suse.com>\n\nChange-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c\n'}]",0,670357,77f2fcb936a7da56239cdbe52e5f1154184f8f48,67,7,8,6593,,,0,"neutron/networking-generic-switch: switch to python3

We need both to merge at the same time as they
depend on each other.

Co-Authored-By: Jaime Caamao Ruiz <jcaamano@suse.com>

Change-Id: Icb00b38b639da7b3f20b472fb39efbc72b44f81c
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/57/670357/8 && git format-patch -1 --stdout FETCH_HEAD,['openstack/neutron/neutron.spec.j2'],1,8a4ce11536245bdd3543bce8308a5fbe7fa936b9,,BuildRequires: {{ py3('ddt') }} BuildRequires: {{ py3('devel') }} BuildRequires: {{ py3('fixtures') }} BuildRequires: {{ py3('httplib2') }} BuildRequires: {{ py3('keystoneauth1') }} BuildRequires: {{ py3('keystonemiddleware') }} BuildRequires: {{ py3('mock') }} BuildRequires: {{ py3('neutron-lib') }} BuildRequires: {{ py3('os-ken') }} BuildRequires: {{ py3('oslo.cache') }} BuildRequires: {{ py3('oslo.privsep') }} BuildRequires: {{ py3('oslo.reports') }} BuildRequires: {{ py3('oslo.rootwrap') }} BuildRequires: {{ py3('oslotest') }} BuildRequires: {{ py3('oslo.versionedobjects') }} BuildRequires: {{ py3('osprofiler') }} BuildRequires: {{ py3('os-xenapi') }} BuildRequires: {{ py3('ovs') }} BuildRequires: {{ py3('ovsdbapp') }} BuildRequires: {{ py3('pecan') }} BuildRequires: {{ py3('PyMySQL') }} BuildRequires: {{ py3('pyroute2') }} BuildRequires: {{ py3('python-designateclient') }} BuildRequires: {{ py3('python-neutronclient') }} BuildRequires: {{ py3('python-novaclient') }} BuildRequires: {{ py3('python-subunit') }} BuildRequires: {{ py3('reno') }} BuildRequires: {{ py3('Tempest') }} BuildRequires: {{ py3('testrepository') }} BuildRequires: {{ py3('testresources') }} BuildRequires: {{ py3('testtools') }} BuildRequires: {{ py3('weakrefmethod') }} BuildRequires: {{ py3('WebTest') }}Provides: {{ py2name('neutron') }}-dhcp-agent = %{version}-%{release} Provides: {{ py2name('neutron') }}-l3-agent = %{version}-%{release} Provides: {{ py2name('neutron') }}-metadata-agent = %{version}-%{release} Requires: python3-%{sname} = %{epoch}:%{version}-%{release}%package -n python3-%{sname}Requires: {{ py3('Jinja2') }} Requires: {{ py3('Paste') }} Requires: {{ py3('PasteDeploy') }} Requires: {{ py3('Routes') }} Requires: {{ py3('SQLAlchemy') }} Requires: {{ py3('WebOb') }} Requires: {{ py3('alembic') }} Requires: {{ py3('debtcollector') }} Requires: {{ py3('python-designateclient') }} Requires: {{ py3('eventlet') }} Requires: {{ py3('httplib2') }} Requires: {{ py3('keystoneauth1') }} Requires: {{ py3('keystonemiddleware') }} Requires: {{ py3('netaddr') }} Requires: {{ py3('netifaces') }} Requires: {{ py3('neutron-lib') }} Requires: {{ py3('python-neutronclient') }} Requires: {{ py3('python-novaclient') }} Requires: {{ py3('os-ken') }} Requires: {{ py3('os-xenapi') }} Requires: {{ py3('oslo.cache') }} Requires: {{ py3('oslo.concurrency') }} Requires: {{ py3('oslo.config') }} Requires: {{ py3('oslo.context') }} Requires: {{ py3('oslo.db') }} Requires: {{ py3('oslo.i18n') }} Requires: {{ py3('oslo.log') }} Requires: {{ py3('oslo.messaging') }} Requires: {{ py3('oslo.middleware') }} Requires: {{ py3('oslo.policy') }} Requires: {{ py3('oslo.privsep') }} Requires: {{ py3('oslo.reports') }} Requires: {{ py3('oslo.rootwrap') }} Requires: {{ py3('oslo.serialization') }} Requires: {{ py3('oslo.service') }} Requires: {{ py3('oslo.utils') }} Requires: {{ py3('oslo.versionedobjects') }} Requires: {{ py3('osprofiler') }} Requires: {{ py3('ovs') }} Requires: {{ py3('ovsdbapp') }} Requires: {{ py3('pbr') }} Requires: {{ py3('pecan') }} Requires: {{ py3('psutil') }} Requires: {{ py3('pyroute2') }} Requires: {{ py3('requests') }} Requires: {{ py3('six') }} Requires: {{ py3('stevedore') }} Requires: {{ py3('tenacity') }} Requires: {{ py3('weakrefmethod') }} %description -n python3-%{sname}BuildRequires: {{ py3('Sphinx') }} BuildRequires: {{ py3('openstackdocstheme') }} BuildRequires: {{ py3('tenacity') }}%py3_buildPYTHONPATH=$PWD PBR_VERSION={{ upstream_version }} %sphinx_build -b html doc/source doc/build/html%py3_install%files -n python3-%{sname}%{python3_sitelib}/%{sname} %{python3_sitelib}/%{sname}-*.egg-info,"BuildRequires: {{ py2pkg('Tempest') }} BuildRequires: {{ py2pkg('PyMySQL') }} BuildRequires: {{ py2pkg('WebTest') }} BuildRequires: {{ py2pkg('ddt') }} BuildRequires: {{ py2pkg('devel') }} BuildRequires: {{ py2pkg('fixtures') }} BuildRequires: {{ py2pkg('mock') }} BuildRequires: {{ py2pkg('oslotest') }} BuildRequires: {{ py2pkg('python-subunit') }} BuildRequires: {{ py2pkg('reno') }} BuildRequires: {{ py2pkg('testrepository') }} BuildRequires: {{ py2pkg('testresources') }} BuildRequires: {{ py2pkg('testtools') }}Requires: python-%{sname} = %{epoch}:%{version}-%{release}%package -n python-%{sname}BuildRequires: {{ py2pkg('python-designateclient') }} BuildRequires: {{ py2pkg('httplib2') }} BuildRequires: {{ py2pkg('keystoneauth1') }} BuildRequires: {{ py2pkg('keystonemiddleware') }} BuildRequires: {{ py2pkg('neutron-lib') }} BuildRequires: {{ py2pkg('python-neutronclient') }} BuildRequires: {{ py2pkg('python-novaclient') }} BuildRequires: {{ py2pkg('os-ken') }} BuildRequires: {{ py2pkg('os-xenapi') }} BuildRequires: {{ py2pkg('oslo.cache') }} BuildRequires: {{ py2pkg('oslo.privsep') }} BuildRequires: {{ py2pkg('oslo.reports') }} BuildRequires: {{ py2pkg('oslo.rootwrap') }} BuildRequires: {{ py2pkg('oslo.versionedobjects') }} BuildRequires: {{ py2pkg('osprofiler') }} BuildRequires: {{ py2pkg('ovs') }} BuildRequires: {{ py2pkg('ovsdbapp') }} BuildRequires: {{ py2pkg('pecan') }} BuildRequires: {{ py2pkg('pyroute2') }} BuildRequires: {{ py2pkg('weakrefmethod') }} Requires: {{ py2pkg('Jinja2') }} Requires: {{ py2pkg('Paste') }} Requires: {{ py2pkg('PasteDeploy') }} Requires: {{ py2pkg('Routes') }} Requires: {{ py2pkg('SQLAlchemy') }} Requires: {{ py2pkg('WebOb') }} Requires: {{ py2pkg('alembic') }} Requires: {{ py2pkg('debtcollector') }} Requires: {{ py2pkg('python-designateclient') }} Requires: {{ py2pkg('eventlet') }} Requires: {{ py2pkg('httplib2') }} Requires: {{ py2pkg('keystoneauth1') }} Requires: {{ py2pkg('keystonemiddleware') }} Requires: {{ py2pkg('netaddr') }} Requires: {{ py2pkg('netifaces') }} Requires: {{ py2pkg('neutron-lib') }} Requires: {{ py2pkg('python-neutronclient') }} Requires: {{ py2pkg('python-novaclient') }} Requires: {{ py2pkg('os-ken') }} Requires: {{ py2pkg('os-xenapi') }} Requires: {{ py2pkg('oslo.cache') }} Requires: {{ py2pkg('oslo.concurrency') }} Requires: {{ py2pkg('oslo.config') }} Requires: {{ py2pkg('oslo.context') }} Requires: {{ py2pkg('oslo.db') }} Requires: {{ py2pkg('oslo.i18n') }} Requires: {{ py2pkg('oslo.log') }} Requires: {{ py2pkg('oslo.messaging') }} Requires: {{ py2pkg('oslo.middleware') }} Requires: {{ py2pkg('oslo.policy') }} Requires: {{ py2pkg('oslo.privsep') }} Requires: {{ py2pkg('oslo.reports') }} Requires: {{ py2pkg('oslo.rootwrap') }} Requires: {{ py2pkg('oslo.serialization') }} Requires: {{ py2pkg('oslo.service') }} Requires: {{ py2pkg('oslo.utils') }} Requires: {{ py2pkg('oslo.versionedobjects') }} Requires: {{ py2pkg('osprofiler') }} Requires: {{ py2pkg('ovs') }} Requires: {{ py2pkg('ovsdbapp') }} Requires: {{ py2pkg('pbr') }} Requires: {{ py2pkg('pecan') }} Requires: {{ py2pkg('psutil') }} Requires: {{ py2pkg('pyroute2') }} Requires: {{ py2pkg('requests') }} Requires: {{ py2pkg('six') }} Requires: {{ py2pkg('stevedore') }} Requires: {{ py2pkg('tenacity') }} Requires: {{ py2pkg('weakrefmethod') }} %description -n python-%{sname}BuildRequires: {{ py2pkg('Sphinx') }} BuildRequires: {{ py2pkg('openstackdocstheme') }} BuildRequires: {{ py2pkg('tenacity') }}%py2_buildPYTHONPATH=$PWD PBR_VERSION={{ upstream_version }} sphinx-build -b html doc/source doc/build/html%py2_install%files -n python-%{sname} %defattr(-,root,root,-)%{python2_sitelib}/%{sname} %{python2_sitelib}/%{sname}-*.egg-info",97,95
openstack%2Fopenstacksdk~master~I38fd8c38d6f0ff08effdc39afbdfa90fb87adf83,openstack/openstacksdk,master,I38fd8c38d6f0ff08effdc39afbdfa90fb87adf83,Fix dns return values,MERGED,2019-08-08 11:25:06.000000000,2019-08-08 15:01:17.000000000,2019-08-08 15:01:16.000000000,"[{'_account_id': 2}, {'_account_id': 10239}, {'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 30322}]","[{'number': 1, 'created': '2019-08-08 11:25:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/c755cddb54d9bfee5430cfe6e2921b13d49bd7cb', 'message': ""Fix dns return values\n\nThe dns layer started returning False instead of None when things\naren't found. Fix it.\n\nChange-Id: I38fd8c38d6f0ff08effdc39afbdfa90fb87adf83\n""}, {'number': 2, 'created': '2019-08-08 11:30:38.000000000', 'files': ['releasenotes/notes/fix-dns-return-c810d5e6736322f1.yaml', 'openstack/cloud/_dns.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/1a4b61d51dfcf7666a32d1323c9e70e1706fa98e', 'message': ""Fix dns return values\n\nThe dns layer started returning False instead of None when things\naren't found. Fix it.\n\nChange-Id: I38fd8c38d6f0ff08effdc39afbdfa90fb87adf83\n""}]",2,675298,1a4b61d51dfcf7666a32d1323c9e70e1706fa98e,11,5,2,2,,,0,"Fix dns return values

The dns layer started returning False instead of None when things
aren't found. Fix it.

Change-Id: I38fd8c38d6f0ff08effdc39afbdfa90fb87adf83
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/98/675298/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix-dns-return-c810d5e6736322f1.yaml', 'openstack/cloud/_dns.py']",2,c755cddb54d9bfee5430cfe6e2921b13d49bd7cb,, return None return None, return False return False,9,2
openstack%2Fkolla-ansible~stable%2Frocky~I6946290cd890f74c59ed5394e8382a8b75c0c4cd,openstack/kolla-ansible,stable/rocky,I6946290cd890f74c59ed5394e8382a8b75c0c4cd,Add ceph-mds/rgw/nfs to gate,MERGED,2019-08-04 09:08:46.000000000,2019-08-08 15:00:45.000000000,2019-08-08 15:00:45.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-04 09:08:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/150be6b84bcac098e965191976ea0d27fd91c2d1', 'message': 'Add ceph-mds/rgw/nfs to gate\n\nDepends-On: https://review.opendev.org/674279\nChange-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd\n(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)\n'}, {'number': 2, 'created': '2019-08-04 10:15:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b9e3343aa2dd17cab5319a2433efa2eb99eec529', 'message': 'Add ceph-mds/rgw/nfs to gate\n\nDepends-On: https://review.opendev.org/674481\nChange-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd\n(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)\n'}, {'number': 3, 'created': '2019-08-06 17:54:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/8145f069fe66a1f1c451878e48a959f32a32ebb8', 'message': 'Add ceph-mds/rgw/nfs to gate\n\nChange-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd\n(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)\n'}, {'number': 4, 'created': '2019-08-06 17:54:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/cd83ff36cefaea2257eb405ce8c8dadeb99353d8', 'message': 'Add ceph-mds/rgw/nfs to gate\n\nChange-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd\n(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)\n'}, {'number': 5, 'created': '2019-08-07 07:38:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7538ab9d8fd0ffd22bc1731b688bf09f74844973', 'message': 'Add ceph-mds/rgw/nfs to gate\n\nChange-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd\nDepends-On: https://review.opendev.org/675048\nDepends-On: https://review.opendev.org/675040\n(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)\n'}, {'number': 6, 'created': '2019-08-07 11:31:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/e7db6e54f35857e105aba6b98d038c93830942a3', 'message': 'Add ceph-mds/rgw/nfs to gate\n\nChange-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd\nDepends-On: https://review.opendev.org/675040\nDepends-On: https://review.opendev.org/675096\n(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)\n'}, {'number': 7, 'created': '2019-08-07 16:34:15.000000000', 'files': ['tests/templates/globals-default.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/211b0b34737d3478cba6ff425a09c32ae1c984ab', 'message': 'Add ceph-mds/rgw/nfs to gate\n\nChange-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd\nDepends-On: https://review.opendev.org/675040\nDepends-On: https://review.opendev.org/675096\nDepends-On: https://review.opendev.org/675048\n(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)\n'}]",0,674479,211b0b34737d3478cba6ff425a09c32ae1c984ab,27,4,7,30491,,,0,"Add ceph-mds/rgw/nfs to gate

Change-Id: I6946290cd890f74c59ed5394e8382a8b75c0c4cd
Depends-On: https://review.opendev.org/675040
Depends-On: https://review.opendev.org/675096
Depends-On: https://review.opendev.org/675048
(cherry picked from commit a77b0f624ea3d7a1640cf4aefbee007422806690)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/79/674479/6 && git format-patch -1 --stdout FETCH_HEAD,['tests/templates/globals-default.j2'],1,150be6b84bcac098e965191976ea0d27fd91c2d1,feature/ceph-ci-nfs-stable/stein-stable/rocky,"enable_ceph_mds: ""yes"" enable_ceph_rgw: ""yes"" enable_ceph_rgw_keystone: ""yes"" enable_ceph_nfs: ""yes""",,4,0
openstack%2Fkolla-ansible~stable%2Frocky~I347107bc33733061ad043bffe38ecc1d16770afc,openstack/kolla-ansible,stable/rocky,I347107bc33733061ad043bffe38ecc1d16770afc,repair ceph_nfs container start failed,MERGED,2019-08-07 11:29:44.000000000,2019-08-08 15:00:43.000000000,2019-08-08 15:00:43.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 24072}, {'_account_id': 26285}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-07 11:29:44.000000000', 'files': ['ansible/roles/ceph/tasks/distribute_keyrings.yml', 'ansible/roles/ceph/templates/ceph-nfs.json.j2', 'ansible/roles/ceph/templates/ganesha.conf.j2', 'ansible/roles/ceph/tasks/config.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/07082c508ec498a29c1ebda2b54960a923f37669', 'message': ""repair ceph_nfs container start failed\n\nwhen enable ceph_nfs,it deploy failed, because no ganesha config\nfile, and the 'ganesha.nfs' command need root privilege to run.\ni will modify ceph_nfs dockerfile,please review. thanks\n\nhttps://review.openstack.org/#/c/630510/\n\nChange-Id: I347107bc33733061ad043bffe38ecc1d16770afc\nCloses-Bug: #1811581\n(cherry picked from commit d35f9a4b706f10bfc1add7fa36dad2b334348afb)\n""}]",0,675096,07082c508ec498a29c1ebda2b54960a923f37669,8,6,1,30491,,,0,"repair ceph_nfs container start failed

when enable ceph_nfs,it deploy failed, because no ganesha config
file, and the 'ganesha.nfs' command need root privilege to run.
i will modify ceph_nfs dockerfile,please review. thanks

https://review.openstack.org/#/c/630510/

Change-Id: I347107bc33733061ad043bffe38ecc1d16770afc
Closes-Bug: #1811581
(cherry picked from commit d35f9a4b706f10bfc1add7fa36dad2b334348afb)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/96/675096/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/ceph/tasks/distribute_keyrings.yml', 'ansible/roles/ceph/templates/ceph-nfs.json.j2', 'ansible/roles/ceph/tasks/config.yml', 'ansible/roles/ceph/templates/ganesha.conf.j2']",4,07082c508ec498a29c1ebda2b54960a923f37669,bug/1811581-stable/rocky,," User_Id = ""admin"";",27,2
openstack%2Fsphinx-feature-classification~master~I2ab037bbab84fc8873a1f714013a10aa1b254cba,openstack/sphinx-feature-classification,master,I2ab037bbab84fc8873a1f714013a10aa1b254cba,Add Python 3 Train unit tests,MERGED,2019-07-05 19:14:58.000000000,2019-08-08 14:58:08.000000000,2019-08-08 14:58:08.000000000,"[{'_account_id': 6928}, {'_account_id': 14070}, {'_account_id': 22348}, {'_account_id': 27822}]","[{'number': 1, 'created': '2019-07-05 19:14:58.000000000', 'files': ['.zuul.yaml', 'setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/sphinx-feature-classification/commit/acebe59fe8209576ac653df204beacb8dfc7284f', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I2ab037bbab84fc8873a1f714013a10aa1b254cba\nStory: #2005924\nTask: #34234\n'}]",1,669468,acebe59fe8209576ac653df204beacb8dfc7284f,8,4,1,11805,,,0,"Add Python 3 Train unit tests

This is a mechanically generated patch to ensure unit testing is in place
for all of the Tested Runtimes for Train.

See the Train python3-updates goal document for details:
https://governance.openstack.org/tc/goals/train/python3-updates.html

Change-Id: I2ab037bbab84fc8873a1f714013a10aa1b254cba
Story: #2005924
Task: #34234
",git fetch https://review.opendev.org/openstack/sphinx-feature-classification refs/changes/68/669468/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg', 'tox.ini']",3,acebe59fe8209576ac653df204beacb8dfc7284f,python3-train,"envlist = py27,py37,pypy,pep8","envlist = py35,py36,py27,pypy,pep8",4,4
openstack%2Ftripleo-heat-templates~master~Ic2fb37d6ff872840ec4fc506c6949327d2d9705c,openstack/tripleo-heat-templates,master,Ic2fb37d6ff872840ec4fc506c6949327d2d9705c,Ensure libnsl dependency is available,MERGED,2019-07-30 15:00:44.000000000,2019-08-08 14:57:56.000000000,2019-08-05 23:57:05.000000000,"[{'_account_id': 3153}, {'_account_id': 7973}, {'_account_id': 9914}, {'_account_id': 10873}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-30 15:00:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/fd85faf54845663fcb744f6b1b586140bc84cc1f', 'message': 'Ensure libnsl dependency is available\n\nlibnsl is a dependency of the nfast client software, so it must\nalso be mounted on the container for the nfast tools to work.\n\nChange-Id: Ic2fb37d6ff872840ec4fc506c6949327d2d9705c\n'}, {'number': 2, 'created': '2019-07-30 15:02:08.000000000', 'files': ['deployment/barbican/barbican-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/af3208c743d2c2940a3a5c5721e1a1e04ef50f6c', 'message': 'Ensure libnsl dependency is available\n\nlibnsl is a dependency of the nfast client software, so it must\nalso be mounted on the container for the nfast tools to work.\n\nChange-Id: Ic2fb37d6ff872840ec4fc506c6949327d2d9705c\n'}]",0,673551,af3208c743d2c2940a3a5c5721e1a1e04ef50f6c,16,6,2,7973,,,0,"Ensure libnsl dependency is available

libnsl is a dependency of the nfast client software, so it must
also be mounted on the container for the nfast tools to work.

Change-Id: Ic2fb37d6ff872840ec4fc506c6949327d2d9705c
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/51/673551/2 && git format-patch -1 --stdout FETCH_HEAD,['deployment/barbican/barbican-api-container-puppet.yaml'],1,fd85faf54845663fcb744f6b1b586140bc84cc1f,, - /lib64/libnsl.so.1:/lib64/libnsl.so.1 - /lib64/libnsl.so.1:/lib64/libnsl.so.1 - - /lib64/libnsl.so.1:/lib64/libnsl.so.1, -,4,1
openstack%2Fopenstack-ansible-os_aodh~master~I7c0dac84dd127a9c33a8a3eb97d547e3d04497f5,openstack/openstack-ansible-os_aodh,master,I7c0dac84dd127a9c33a8a3eb97d547e3d04497f5,service_setup: refactor service setup to a single file,MERGED,2019-07-30 12:21:08.000000000,2019-08-08 14:54:12.000000000,2019-08-08 14:54:12.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-07-30 12:21:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_aodh/commit/2ac4b551674d3c5bba027ed55f7be315b25a382f', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I7c0dac84dd127a9c33a8a3eb97d547e3d04497f5\n'}, {'number': 2, 'created': '2019-08-01 14:31:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_aodh/commit/b89af5e1990acaa64e365662bfb6109d1db1a141', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I7c0dac84dd127a9c33a8a3eb97d547e3d04497f5\n'}, {'number': 3, 'created': '2019-08-02 15:26:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_aodh/commit/140a82946cddc9c9ce658c9ec610b5cceec3cd0d', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nDepends-On: https://review.opendev.org/674295/\nChange-Id: I7c0dac84dd127a9c33a8a3eb97d547e3d04497f5\n'}, {'number': 4, 'created': '2019-08-07 11:08:03.000000000', 'files': ['tasks/main.yml', 'tasks/aodh_service_setup.yml', 'tasks/service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_aodh/commit/97c03b8decb175176299e6fceb3e275323c0f08a', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nDepends-On: https://review.opendev.org/674295/\nChange-Id: I7c0dac84dd127a9c33a8a3eb97d547e3d04497f5\n'}]",0,673495,97c03b8decb175176299e6fceb3e275323c0f08a,18,4,4,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Depends-On: https://review.opendev.org/674295/
Change-Id: I7c0dac84dd127a9c33a8a3eb97d547e3d04497f5
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_aodh refs/changes/95/673495/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/aodh_service_setup.yml', 'tasks/service_setup.yml']",3,2ac4b551674d3c5bba027ed55f7be315b25a382f,osa/service-refactor,"--- # Copyright 2019, VEXXHOST, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # WARNING: # This file is maintained in the openstack-ansible-tests repository. # https://opendev.org/openstack/openstack-ansible-tests/src/sync/tasks/service_setup.yml # If you need to modify this file, update the one in the openstack-ansible-tests # repository. Once it merges there, the changes will automatically be proposed to # all the repositories which use it. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the OS service delegate_to: ""{{ _service_setup_host }}"" vars: ansible_python_interpreter: ""{{ _service_setup_host_python_interpreter }}"" block: - name: Add service project os_project: cloud: default state: present name: ""{{ _project_name }}"" description: ""{{ _project_description | default('') }}"" domain_id: ""default"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _project_name is defined until: add_service is success retries: 5 delay: 10 - name: Add services to the keystone service catalog os_keystone_service: cloud: default state: ""{{ item.state | default('present') }}"" name: ""{{ item.name }}"" service_type: ""{{ item.type }}"" description: ""{{ item.description | default('') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service with_items: ""{{ _service_catalog }}"" when: _service_catalog is defined until: add_service is success retries: 5 delay: 10 - name: Add keystone roles os_keystone_role: cloud: default state: present name: ""{{ item.role }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add service users os_user: cloud: default state: present name: ""{{ item.name }}"" password: ""{{ item.password }}"" domain: default default_project: ""{{ item.project | default(_service_project_name) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'password' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 no_log: True - name: Add service users to the role os_user_role: cloud: default state: present user: ""{{ item.name }}"" role: ""{{ item.role }}"" project: ""{{ item.project | default(_service_project_name) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: ""{{ item.state | default('present') }}"" service: ""{{ item.service }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ _service_region | default('RegionOne') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: ""{{ _service_endpoints }}"" when: _service_endpoints is defined ",,170,94
openstack%2Fopenstack-ansible-os_ironic~master~I5765e4e1e0ca29517a04976111ef14f20f77607c,openstack/openstack-ansible-os_ironic,master,I5765e4e1e0ca29517a04976111ef14f20f77607c,service_setup: refactor service setup to a single file,MERGED,2019-08-07 11:04:33.000000000,2019-08-08 14:47:48.000000000,2019-08-08 14:47:48.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 11:04:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ironic/commit/febcd3a8c1dfaae807aa395f7a348ca42dc78e43', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I5765e4e1e0ca29517a04976111ef14f20f77607c\n'}, {'number': 2, 'created': '2019-08-07 11:06:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ironic/commit/fe67a48e434e5cc6f7380867b33a6bb86c408e6f', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I5765e4e1e0ca29517a04976111ef14f20f77607c\n'}, {'number': 3, 'created': '2019-08-07 16:05:32.000000000', 'files': ['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/ironic_service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ironic/commit/61d96ee0cc5e857dc73eb18d47f6256683827638', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I5765e4e1e0ca29517a04976111ef14f20f77607c\n'}]",0,675090,61d96ee0cc5e857dc73eb18d47f6256683827638,10,3,3,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: I5765e4e1e0ca29517a04976111ef14f20f77607c
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_ironic refs/changes/90/675090/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/ironic_service_setup.yml']",3,febcd3a8c1dfaae807aa395f7a348ca42dc78e43,osa/service_refactor,,"--- # Copyright 2016, Rackspace US, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the service delegate_to: ""{{ ironic_service_setup_host }}"" vars: ansible_python_interpreter: ""{{ ironic_service_setup_host_python_interpreter }}"" block: - name: Add service to the keystone service catalog os_keystone_service: cloud: default state: present name: ""{{ ironic_service_name }}"" service_type: ""{{ ironic_service_type }}"" description: ""{{ ironic_service_description }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 - name: Add service user os_user: cloud: default state: present name: ""{{ ironic_service_user_name }}"" password: ""{{ ironic_service_password }}"" domain: default default_project: ""{{ ironic_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not ironic_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 no_log: True - name: Add service user to admin role os_user_role: cloud: default state: present user: ""{{ ironic_service_user_name }}"" role: ""{{ ironic_service_role_name }}"" project: ""{{ ironic_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not ironic_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: present service: ""{{ ironic_service_name }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ ironic_service_region }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: - interface: ""public"" url: ""{{ ironic_service_publicurl }}"" - interface: ""internal"" url: ""{{ ironic_service_internalurl }}"" - interface: ""admin"" url: ""{{ ironic_service_adminurl }}"" ",185,93
openstack%2Fheat~stable%2Fqueens~Ie2e9251245e7e16309661154e17724e5984c21e6,openstack/heat,stable/queens,Ie2e9251245e7e16309661154e17724e5984c21e6,Do not perform the tenant stack limit check for admin user,MERGED,2019-07-26 04:22:53.000000000,2019-08-08 14:46:21.000000000,2019-08-08 14:46:21.000000000,"[{'_account_id': 4257}, {'_account_id': 22348}, {'_account_id': 22776}, {'_account_id': 27427}]","[{'number': 1, 'created': '2019-07-26 04:22:53.000000000', 'files': ['heat/engine/service.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/cc01d5da4e8b8afc1fe4ca8b250ab0f1020d88eb', 'message': 'Do not perform the tenant stack limit check for admin user\n\nRemoving stack creation limit for admin since admin can view all stacks,\nand stacks created by other tenants would have been counted in the limit\ncheck.\n\nChange-Id: Ie2e9251245e7e16309661154e17724e5984c21e6\nStory: 2003487\nTask: 24756\n(cherry picked from commit 22b14ff975f885c26b861d4d1b22577cca189e04)\n'}]",0,672863,cc01d5da4e8b8afc1fe4ca8b250ab0f1020d88eb,7,4,1,8833,,,0,"Do not perform the tenant stack limit check for admin user

Removing stack creation limit for admin since admin can view all stacks,
and stacks created by other tenants would have been counted in the limit
check.

Change-Id: Ie2e9251245e7e16309661154e17724e5984c21e6
Story: 2003487
Task: 24756
(cherry picked from commit 22b14ff975f885c26b861d4d1b22577cca189e04)
",git fetch https://review.opendev.org/openstack/heat refs/changes/63/672863/1 && git format-patch -1 --stdout FETCH_HEAD,['heat/engine/service.py'],1,cc01d5da4e8b8afc1fe4ca8b250ab0f1020d88eb,stx-enhancements-stable/queens," # Do not stack limit check for admin since admin can see all stacks. if not cnxt.is_admin: tenant_limit = cfg.CONF.max_stacks_per_tenant if stack_object.Stack.count_all(cnxt) >= tenant_limit: message = _(""You have reached the maximum stacks per tenant, "" ""%d. Please delete some stacks."") % tenant_limit raise exception.RequestLimitExceeded(message=message)"," tenant_limit = cfg.CONF.max_stacks_per_tenant if stack_object.Stack.count_all(cnxt) >= tenant_limit: message = _(""You have reached the maximum stacks per tenant, "" ""%d. Please delete some stacks."") % tenant_limit raise exception.RequestLimitExceeded(message=message)",7,5
openstack%2Fheat~stable%2Fqueens~I0f6a30e06bb214bb673930b31a2db946600926b0,openstack/heat,stable/queens,I0f6a30e06bb214bb673930b31a2db946600926b0,Show an engine as down if service record is not updated twice,MERGED,2019-07-29 04:53:46.000000000,2019-08-08 14:46:16.000000000,2019-08-08 14:46:16.000000000,"[{'_account_id': 4257}, {'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-29 04:53:46.000000000', 'files': ['heat/tests/test_common_service_utils.py', 'heat/common/service_utils.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/c5d417927470f12426a0f1b95991a688b7c8dec3', 'message': ""Show an engine as down if service record is not updated twice\n\nWe use the same periodic_interval to update the service record\nand compare it with current time when doing 'service list'. So, It's\npossible there will be a small window where 'service list' would show\nthe engine as down. Tools that use service list for monitoring would\nwrongly assume the service as down. Let's change service list to\nreport the service as down if it's not updated in 2*periodic_interval.\n\nChange-Id: I0f6a30e06bb214bb673930b31a2db946600926b0\nTask: 35946\n(cherry picked from commit fd23308f6ec20e4441d8da486a4f6930a2ba366d)\n""}]",0,673207,c5d417927470f12426a0f1b95991a688b7c8dec3,8,3,1,8833,,,0,"Show an engine as down if service record is not updated twice

We use the same periodic_interval to update the service record
and compare it with current time when doing 'service list'. So, It's
possible there will be a small window where 'service list' would show
the engine as down. Tools that use service list for monitoring would
wrongly assume the service as down. Let's change service list to
report the service as down if it's not updated in 2*periodic_interval.

Change-Id: I0f6a30e06bb214bb673930b31a2db946600926b0
Task: 35946
(cherry picked from commit fd23308f6ec20e4441d8da486a4f6930a2ba366d)
",git fetch https://review.opendev.org/openstack/heat refs/changes/07/673207/1 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/test_common_service_utils.py', 'heat/common/service_utils.py']",2,c5d417927470f12426a0f1b95991a688b7c8dec3,, last_updated = service.updated_at or service.created_at check_interval = (timeutils.utcnow() - last_updated).total_seconds() if check_interval <= 2 * service.report_interval: status = 'up', if service.updated_at is not None: if ((timeutils.utcnow() - service.updated_at).total_seconds() <= service.report_interval): status = 'up' else: if ((timeutils.utcnow() - service.created_at).total_seconds() <= service.report_interval): status = 'up',10,14
openstack%2Fopenstack-ansible-os_cinder~master~I562fea6d7c58e69d59588ccc411437b110077f4d,openstack/openstack-ansible-os_cinder,master,I562fea6d7c58e69d59588ccc411437b110077f4d,Replace include with import,MERGED,2019-08-07 11:13:19.000000000,2019-08-08 14:44:01.000000000,2019-08-08 14:44:01.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-08-07 11:13:19.000000000', 'files': ['tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/5d27a4d84730684c777fc66956a8f826f7347126', 'message': 'Replace include with import\n\nDuring previous commit include_task was accidentally copy-pasted.\n\nChange-Id: I562fea6d7c58e69d59588ccc411437b110077f4d\n'}]",0,675091,5d27a4d84730684c777fc66956a8f826f7347126,9,4,1,28619,,,0,"Replace include with import

During previous commit include_task was accidentally copy-pasted.

Change-Id: I562fea6d7c58e69d59588ccc411437b110077f4d
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_cinder refs/changes/91/675091/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,5d27a4d84730684c777fc66956a8f826f7347126,osa/service-refactor,- import_tasks: service_setup.yml- name: Import ceph_client role,- include_tasks: service_setup.yml- name: Include ceph_client role,2,2
openstack%2Fopenstack-ansible-os_panko~master~I2d849e55a1bb300e3f9290ef173b259f71cf3b45,openstack/openstack-ansible-os_panko,master,I2d849e55a1bb300e3f9290ef173b259f71cf3b45,service_setup: refactor service setup to a single file,MERGED,2019-08-07 17:23:31.000000000,2019-08-08 14:43:56.000000000,2019-08-08 14:43:56.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 17:23:31.000000000', 'files': ['tasks/main.yml', 'tasks/panko_service_setup.yml', 'tasks/service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_panko/commit/ece27edf705ea85698a44251b21f720437c85349', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I2d849e55a1bb300e3f9290ef173b259f71cf3b45\n'}]",0,675159,ece27edf705ea85698a44251b21f720437c85349,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: I2d849e55a1bb300e3f9290ef173b259f71cf3b45
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_panko refs/changes/59/675159/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/panko_service_setup.yml', 'tasks/service_setup.yml']",3,ece27edf705ea85698a44251b21f720437c85349,osa/service_refactor,"--- # Copyright 2019, VEXXHOST, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # WARNING: # This file is maintained in the openstack-ansible-tests repository. # https://opendev.org/openstack/openstack-ansible-tests/src/sync/tasks/service_setup.yml # If you need to modify this file, update the one in the openstack-ansible-tests # repository. Once it merges there, the changes will automatically be proposed to # all the repositories which use it. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the OS service delegate_to: ""{{ _service_setup_host }}"" vars: ansible_python_interpreter: ""{{ _service_setup_host_python_interpreter }}"" block: - name: Add keystone domain os_keystone_domain: cloud: default state: present name: ""{{ _domain_name }}"" endpoint_type: admin verify: ""{{ not _service_adminuri_insecure }}"" register: add_domain when: _domain_name is defined until: add_domain is success retries: 5 delay: 10 - name: Add service project os_project: cloud: default state: present name: ""{{ _project_name }}"" description: ""{{ _project_description | default(omit) }}"" domain_id: ""{{ _project_domain | default('default') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _project_name is defined until: add_service is success retries: 5 delay: 10 - name: Add services to the keystone service catalog os_keystone_service: cloud: default state: ""{{ item.state | default('present') }}"" name: ""{{ item.name }}"" service_type: ""{{ item.type }}"" description: ""{{ item.description | default('') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service with_items: ""{{ _service_catalog }}"" when: _service_catalog is defined until: add_service is success retries: 5 delay: 10 - name: Add keystone roles os_keystone_role: cloud: default state: present name: ""{{ item.role }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add service users os_user: cloud: default state: present name: ""{{ item.name }}"" password: ""{{ item.password }}"" domain: ""{{ item.domain | default('default') }}"" default_project: ""{{ item.project | default(_service_project_name) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" update_password: always register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'password' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 no_log: True - name: Add service users to the role os_user_role: cloud: default state: present user: ""{{ item.name }}"" role: ""{{ item.role }}"" project: ""{{ item.project | default(_service_project_name) }}"" domain: ""{{ item.domain | default(omit) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: ""{{ item.state | default('present') }}"" service: ""{{ item.service }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ _service_region | default('RegionOne') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: ""{{ _service_endpoints }}"" when: _service_endpoints is defined ",,185,93
openstack%2Fheat~stable%2Frocky~I2cc2785cb32cf8d788af6262992b1b76107c8292,openstack/heat,stable/rocky,I2cc2785cb32cf8d788af6262992b1b76107c8292,Fix allowed address pair validation,MERGED,2019-08-05 11:15:22.000000000,2019-08-08 14:41:08.000000000,2019-08-08 14:41:08.000000000,"[{'_account_id': 4257}, {'_account_id': 22348}, {'_account_id': 26106}]","[{'number': 1, 'created': '2019-08-05 11:15:22.000000000', 'files': ['heat/tests/constraints/test_common_constraints.py', 'heat/tests/openstack/neutron/test_neutron_subnet.py', 'heat/engine/constraint/common_constraints.py', 'heat/tests/openstack/neutron/test_neutron_port.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/ac3bf784ff9eabf3010ac377e5727893a583c3f9', 'message': 'Fix allowed address pair validation\n\nNeutron requires the allowed address pair ip address to be\neither an ip or a cidr.\nhttps://review.opendev.org/#/c/575265/ made heat verify for\ncidr only.\n\nChange-Id: I2cc2785cb32cf8d788af6262992b1b76107c8292\nStory: 2005674\nTask: 30985\n(cherry picked from commit 5e93b3e4cf60310d33bf397fd11b4ec50e6067a0)\n(cherry picked from commit cec8b079c006522b2b2eaeede49a7a7229f7ae2d)\n'}]",0,674577,ac3bf784ff9eabf3010ac377e5727893a583c3f9,7,3,1,26106,,,0,"Fix allowed address pair validation

Neutron requires the allowed address pair ip address to be
either an ip or a cidr.
https://review.opendev.org/#/c/575265/ made heat verify for
cidr only.

Change-Id: I2cc2785cb32cf8d788af6262992b1b76107c8292
Story: 2005674
Task: 30985
(cherry picked from commit 5e93b3e4cf60310d33bf397fd11b4ec50e6067a0)
(cherry picked from commit cec8b079c006522b2b2eaeede49a7a7229f7ae2d)
",git fetch https://review.opendev.org/openstack/heat refs/changes/77/674577/1 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/constraints/test_common_constraints.py', 'heat/tests/openstack/neutron/test_neutron_subnet.py', 'heat/engine/constraint/common_constraints.py', 'heat/tests/openstack/neutron/test_neutron_port.py']",4,ac3bf784ff9eabf3010ac377e5727893a583c3f9,," t['resources']['port']['properties'][ 'allowed_address_pairs'][0]['ip_address'] = '10.0.3.21' 'ip_address': u'10.0.3.21',"," 'ip_address': u'10.0.3.21/8',",54,21
openstack%2Fnova~stable%2Frocky~Ie9e294db7e24d0e3cbe83eee847f0fbfb7478900,openstack/nova,stable/rocky,Ie9e294db7e24d0e3cbe83eee847f0fbfb7478900,Add functional recreate test for regression bug 1825537,MERGED,2019-07-05 14:23:13.000000000,2019-08-08 14:37:01.000000000,2019-08-01 19:49:01.000000000,"[{'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 14595}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-05 14:23:13.000000000', 'files': ['nova/virt/fake.py', 'nova/tests/functional/test_servers.py', 'nova/tests/functional/regressions/test_bug_1825537.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/9a977cb28c1c4f2e8d950476fa373326f636dfd6', 'message': ""Add functional recreate test for regression bug 1825537\n\nChange I2d9ab06b485f76550dbbff46f79f40ff4c97d12f in Rocky\n(and backported through to Pike) added error handling to\nthe resize_instance and finish_resize methods to revert\nallocations in placement when a failure occurs.\n\nThis is OK for resize_instance, which runs on the source\ncompute, as long as the instance.host/node values have not\nyet been changed to the dest host/node before RPC casting\nto the finish_resize method on the dest compute. It's OK\nbecause the instance is still on the source compute and the\nDB says so, so any attempt to recover the instance via hard\nreboot or rebuild will be on the source host.\n\nThis is not OK for finish_resize because if we fail there\nand revert the allocations, the instance host/node values\nare already pointing at the dest compute and by reverting\nthe allocations in placement, placement will be incorrectly\ntracking the instance usage with the old flavor against the\nsource node resource provider rather than the new flavor\nagainst the dest node resource provider - where the instance\nis actually running and the nova DB says the instance lives.\n\nThis change adds a simple functional regression test to\nrecreate the bug with a multi-host resize. There is already\na same-host resize functional test marked here which will\nneed to be fixed as well.\n\nConflicts:\n      nova/tests/functional/test_servers.py\n      nova/virt/fake.py\n\nNOTE(mriedem): The test_servers conflict is due to not having\nchange If6aa37d9b6b48791e070799ab026c816fda4441c in Rocky. As\na result, the new regression test also had to be modified for\nthe call to assertFlavorMatchesAllocation. The fake module\nconflict is due to not having change\nIefff121640e04abdbb6a4ae546c447f168dc8af9 in Rocky.\n\nChange-Id: Ie9e294db7e24d0e3cbe83eee847f0fbfb7478900\nRelated-Bug: #1825537\n(cherry picked from commit f4bb67210602914e1b9a678419cf22cfbeaf1431)\n(cherry picked from commit eaa1fc6159ca4437a1e0cbaa77a3da779afb8cb2)\n""}]",0,669361,9a977cb28c1c4f2e8d950476fa373326f636dfd6,12,6,1,6873,,,0,"Add functional recreate test for regression bug 1825537

Change I2d9ab06b485f76550dbbff46f79f40ff4c97d12f in Rocky
(and backported through to Pike) added error handling to
the resize_instance and finish_resize methods to revert
allocations in placement when a failure occurs.

This is OK for resize_instance, which runs on the source
compute, as long as the instance.host/node values have not
yet been changed to the dest host/node before RPC casting
to the finish_resize method on the dest compute. It's OK
because the instance is still on the source compute and the
DB says so, so any attempt to recover the instance via hard
reboot or rebuild will be on the source host.

This is not OK for finish_resize because if we fail there
and revert the allocations, the instance host/node values
are already pointing at the dest compute and by reverting
the allocations in placement, placement will be incorrectly
tracking the instance usage with the old flavor against the
source node resource provider rather than the new flavor
against the dest node resource provider - where the instance
is actually running and the nova DB says the instance lives.

This change adds a simple functional regression test to
recreate the bug with a multi-host resize. There is already
a same-host resize functional test marked here which will
need to be fixed as well.

Conflicts:
      nova/tests/functional/test_servers.py
      nova/virt/fake.py

NOTE(mriedem): The test_servers conflict is due to not having
change If6aa37d9b6b48791e070799ab026c816fda4441c in Rocky. As
a result, the new regression test also had to be modified for
the call to assertFlavorMatchesAllocation. The fake module
conflict is due to not having change
Iefff121640e04abdbb6a4ae546c447f168dc8af9 in Rocky.

Change-Id: Ie9e294db7e24d0e3cbe83eee847f0fbfb7478900
Related-Bug: #1825537
(cherry picked from commit f4bb67210602914e1b9a678419cf22cfbeaf1431)
(cherry picked from commit eaa1fc6159ca4437a1e0cbaa77a3da779afb8cb2)
",git fetch https://review.opendev.org/openstack/nova refs/changes/61/669361/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/fake.py', 'nova/tests/functional/test_servers.py', 'nova/tests/functional/regressions/test_bug_1825537.py']",3,9a977cb28c1c4f2e8d950476fa373326f636dfd6,bug/1825537,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova.tests.functional import integrated_helpers class FinishResizeErrorAllocationCleanupTestCase( integrated_helpers.ProviderUsageBaseTestCase): """"""Test for bug 1825537 introduced in Rocky and backported down to Pike. Tests a scenario where finish_resize fails on the dest compute during a resize and ensures resource provider allocations are properly cleaned up in placement. """""" compute_driver = 'fake.FakeFinishMigrationFailDriver' def setUp(self): super(FinishResizeErrorAllocationCleanupTestCase, self).setUp() # Get the flavors we're going to use. flavors = self.api.get_flavors() self.flavor1 = flavors[0] self.flavor2 = flavors[1] def _resize_and_assert_error(self, server, dest_host): # Now resize the server and wait for it to go to ERROR status because # the finish_migration virt driver method in host2 should fail. req = {'resize': {'flavorRef': self.flavor2['id']}} self.api.post_server_action(server['id'], req) # The instance is set to ERROR status before the fault is recorded so # to avoid a race we need to wait for the task_state to change # to None which happens after the fault is recorded. server = self._wait_for_server_parameter( self.admin_api, server, {'status': 'ERROR', 'OS-EXT-STS:task_state': None}) # The server should be pointing at $dest_host because resize_instance # will have updated the host/node value on the instance before casting # to the finish_resize method on the dest compute. self.assertEqual(dest_host, server['OS-EXT-SRV-ATTR:host']) # In this case the FakeFinishMigrationFailDriver.finish_migration # method raises VirtualInterfaceCreateException. self.assertIn('Virtual Interface creation failed', server['fault']['message']) def test_finish_resize_fails_allocation_cleanup(self): # Start two computes so we can resize across hosts. self._start_compute('host1') self._start_compute('host2') # Create a server on host1. server = self._boot_and_check_allocations(self.flavor1, 'host1') # Resize to host2 which should fail. self._resize_and_assert_error(server, 'host2') # Check the resource provider allocations. Since the server is pointed # at the dest host in the DB now, the dest node resource provider # allocations should still exist with the new flavor. source_rp_uuid = self._get_provider_uuid_by_host('host1') dest_rp_uuid = self._get_provider_uuid_by_host('host2') # FIXME(mriedem): This is bug 1825537 where the allocations are # reverted when finish_resize fails so the dest node resource provider # does not have any allocations and the instance allocations are for # the old flavor on the source node resource provider even though the # instance is not running on the source host nor pointed at the source # host in the DB. # self.assertFlavorMatchesAllocation( # self.flavor2, server['id'], dest_rp_uuid) dest_rp_usages = self._get_provider_usages(dest_rp_uuid) no_usage = {'VCPU': 0, 'MEMORY_MB': 0, 'DISK_GB': 0} self.assertEqual(no_usage, dest_rp_usages) source_usages = self._get_provider_usages(source_rp_uuid) self.assertFlavorMatchesAllocation(self.flavor1, source_usages) ",,90,0
openstack%2Fopenstack-ansible-os_octavia~master~If0169e5d307f1b75087e2459226102b47c1cdee0,openstack/openstack-ansible-os_octavia,master,If0169e5d307f1b75087e2459226102b47c1cdee0,service_setup: refactor service setup to a single file,MERGED,2019-08-07 16:47:04.000000000,2019-08-08 14:33:30.000000000,2019-08-08 14:33:29.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 16:47:04.000000000', 'files': ['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/octavia_service_add.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_octavia/commit/263266b9595ab54672a6962e18007d2e769175cd', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\nWe can ignore octavia_v2 condition, since v1 was dropped in train [1]\n\n[1] https://review.opendev.org/#/c/656707/\n\nChange-Id: If0169e5d307f1b75087e2459226102b47c1cdee0\n'}]",0,675153,263266b9595ab54672a6962e18007d2e769175cd,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.
We can ignore octavia_v2 condition, since v1 was dropped in train [1]

[1] https://review.opendev.org/#/c/656707/

Change-Id: If0169e5d307f1b75087e2459226102b47c1cdee0
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_octavia refs/changes/53/675153/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/octavia_service_add.yml']",3,263266b9595ab54672a6962e18007d2e769175cd,osa/service-refactor,,"--- # Copyright 2017, Rackspace US, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the service delegate_to: ""{{ octavia_service_setup_host }}"" vars: ansible_python_interpreter: ""{{ octavia_service_setup_host_python_interpreter }}"" block: - name: Add service to the keystone service catalog os_keystone_service: cloud: default state: present name: ""{{ octavia_service_name }}"" service_type: ""{{ octavia_service_type }}"" description: ""{{ octavia_service_description }}"" interface: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 - name: Add service user os_user: cloud: default state: present name: ""{{ octavia_service_user_name }}"" password: ""{{ octavia_service_password }}"" domain: default default_project: ""{{ octavia_service_project_name }}"" interface: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not octavia_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 no_log: True - name: Add service user to admin role os_user_role: cloud: default state: present user: ""{{ octavia_service_user_name }}"" role: ""{{ octavia_service_role_name }}"" project: ""{{ octavia_service_project_name }}"" interface: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not octavia_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: present service: ""{{ octavia_service_name }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ octavia_service_region }}"" interface: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: - interface: ""public"" url: ""{{ octavia_service_publicuri }}"" - interface: ""internal"" url: ""{{ octavia_service_internaluri }}"" - interface: ""admin"" url: ""{{ octavia_service_adminuri }}"" when: octavia_v2 | bool - name: Create service roles os_keystone_role: cloud: default state: present name: ""{{ item }}"" interface: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_roles until: add_roles is success retries: 5 delay: 10 with_items: - load-balancer_observer - load-balancer_global_observer - load-balancer_member - load-balancer_admin - load-balancer_quota_admin ",191,113
openstack%2Fopenstack-ansible-os_octavia~master~I447c0096708c50c2a3b003af84ca7af4dd72c5f5,openstack/openstack-ansible-os_octavia,master,I447c0096708c50c2a3b003af84ca7af4dd72c5f5,Convert dynamic includes to static imports,MERGED,2019-08-07 16:27:36.000000000,2019-08-08 14:33:29.000000000,2019-08-08 14:33:29.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 16:27:36.000000000', 'files': ['tasks/main.yml', 'vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_octavia/commit/56ee4fe9285689e369e7d551bc7f718f0a076e6b', 'message': 'Convert dynamic includes to static imports\n\nWhen task/role files are included using include_tasks, tags are not\npassed to the included tasks. As a result, tags like swift-config\ndo not have the intended effect. This patch changes include_tasks\nto import_tasks for all cases where dynamic vars or loops are not used\nso that tags are properly handled.\n\nReference -\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html\nhttps://bugs.launchpad.net/openstack-ansible/+bug/1815043\n\nChange-Id: I447c0096708c50c2a3b003af84ca7af4dd72c5f5\n'}]",0,675144,56ee4fe9285689e369e7d551bc7f718f0a076e6b,7,3,1,28619,,,0,"Convert dynamic includes to static imports

When task/role files are included using include_tasks, tags are not
passed to the included tasks. As a result, tags like swift-config
do not have the intended effect. This patch changes include_tasks
to import_tasks for all cases where dynamic vars or loops are not used
so that tags are properly handled.

Reference -
https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html
https://bugs.launchpad.net/openstack-ansible/+bug/1815043

Change-Id: I447c0096708c50c2a3b003af84ca7af4dd72c5f5
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_octavia refs/changes/44/675144/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'vars/main.yml']",2,56ee4fe9285689e369e7d551bc7f718f0a076e6b,static_imports," {% set _ = value.update( { 'service_key': key, 'enabled': 'yes', 'config_overrides': value.init_config_overrides } ) %} {% set _ = value.pop('init_config_overrides') %}", {% set _ = value.update({'service_key': key}) %},23,24
openstack%2Fopenstack-ansible-os_magnum~master~Iec426e8161da2e92f075d87bae3f4a28a05dd2b1,openstack/openstack-ansible-os_magnum,master,Iec426e8161da2e92f075d87bae3f4a28a05dd2b1,service_setup: refactor service setup to a single file,MERGED,2019-08-07 12:04:37.000000000,2019-08-08 14:33:11.000000000,2019-08-08 14:33:11.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 12:04:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_magnum/commit/c924c834846b13cc8478e2b260601696372e394d', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: Iec426e8161da2e92f075d87bae3f4a28a05dd2b1\n'}, {'number': 2, 'created': '2019-08-07 15:50:43.000000000', 'files': ['tasks/magnum_service_setup.yml', 'tasks/service_setup.yml', 'tasks/magnum_post_install.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_magnum/commit/d36311c6e4f8458e8adf9ae58f0c5b2a9c95cb46', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: Iec426e8161da2e92f075d87bae3f4a28a05dd2b1\n'}]",0,675100,d36311c6e4f8458e8adf9ae58f0c5b2a9c95cb46,9,3,2,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: Iec426e8161da2e92f075d87bae3f4a28a05dd2b1
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_magnum refs/changes/00/675100/2 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/magnum_service_setup.yml', 'tasks/service_setup.yml', 'tasks/magnum_post_install.yml']",3,c924c834846b13cc8478e2b260601696372e394d,osa/service-refactor," - name: Add magnum image delegate_to: ""{{ magnum_service_setup_host }}"" vars: ansible_python_interpreter: ""{{ magnum_service_setup_host_python_interpreter }}"" block: - name: Create image download directory file: path: ""{{ magnum_image_path }}"" state: directory mode: ""0750"" owner: ""{{ magnum_image_path_owner }}"" - name: Download images get_url: url: ""{{ item.file }}"" dest: ""{{ magnum_image_path }}/{{ item.file | basename }}"" checksum: ""{{ item.checksum | default(omit) }}"" register: download_image until: download_image is success retries: 5 delay: 10 with_items: ""{{ magnum_glance_images }}"" - name: Upload images to Glance os_image: cloud: default state: present endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" name: ""{{ item.name }}"" disk_format: ""{{ item.disk_format }}"" container_format: ""{{ item.image_format }}"" is_public: ""{{ item.public }}"" filename: ""{{ magnum_image_path }}/{{ item.file | basename }}"" properties: os_distro: ""{{ item.distro }}"" register: upload_image until: upload_image is success retries: 5 delay: 10 with_items: ""{{ magnum_glance_images }}""",,247,134
openstack%2Fopenstack-ansible-os_mistral~master~I31cad6851c7508dcad681ca4f97eac4dfce1a7b4,openstack/openstack-ansible-os_mistral,master,I31cad6851c7508dcad681ca4f97eac4dfce1a7b4,service_setup: refactor service setup to a single file,MERGED,2019-08-07 16:20:15.000000000,2019-08-08 14:32:33.000000000,2019-08-08 14:32:33.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 16:20:15.000000000', 'files': ['tasks/main.yml', 'tasks/mistral_service_setup.yml', 'tasks/service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_mistral/commit/296fee49697bd90c94e122e99c5f9f83be421435', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I31cad6851c7508dcad681ca4f97eac4dfce1a7b4\n'}]",0,675143,296fee49697bd90c94e122e99c5f9f83be421435,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: I31cad6851c7508dcad681ca4f97eac4dfce1a7b4
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_mistral refs/changes/43/675143/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/mistral_service_setup.yml', 'tasks/service_setup.yml']",3,296fee49697bd90c94e122e99c5f9f83be421435,osa/service_refactor,"--- # Copyright 2019, VEXXHOST, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # WARNING: # This file is maintained in the openstack-ansible-tests repository. # https://opendev.org/openstack/openstack-ansible-tests/src/sync/tasks/service_setup.yml # If you need to modify this file, update the one in the openstack-ansible-tests # repository. Once it merges there, the changes will automatically be proposed to # all the repositories which use it. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the OS service delegate_to: ""{{ _service_setup_host }}"" vars: ansible_python_interpreter: ""{{ _service_setup_host_python_interpreter }}"" block: - name: Add keystone domain os_keystone_domain: cloud: default state: present name: ""{{ _domain_name }}"" endpoint_type: admin verify: ""{{ not _service_adminuri_insecure }}"" register: add_domain when: _domain_name is defined until: add_domain is success retries: 5 delay: 10 - name: Add service project os_project: cloud: default state: present name: ""{{ _project_name }}"" description: ""{{ _project_description | default(omit) }}"" domain_id: ""{{ _project_domain | default('default') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _project_name is defined until: add_service is success retries: 5 delay: 10 - name: Add services to the keystone service catalog os_keystone_service: cloud: default state: ""{{ item.state | default('present') }}"" name: ""{{ item.name }}"" service_type: ""{{ item.type }}"" description: ""{{ item.description | default('') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service with_items: ""{{ _service_catalog }}"" when: _service_catalog is defined until: add_service is success retries: 5 delay: 10 - name: Add keystone roles os_keystone_role: cloud: default state: present name: ""{{ item.role }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add service users os_user: cloud: default state: present name: ""{{ item.name }}"" password: ""{{ item.password }}"" domain: ""{{ item.domain | default('default') }}"" default_project: ""{{ item.project | default(_service_project_name) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" update_password: always register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'password' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 no_log: True - name: Add service users to the role os_user_role: cloud: default state: present user: ""{{ item.name }}"" role: ""{{ item.role }}"" project: ""{{ item.project | default(_service_project_name) }}"" domain: ""{{ item.domain | default(omit) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: ""{{ item.state | default('present') }}"" service: ""{{ item.service }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ _service_region | default('RegionOne') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: ""{{ _service_endpoints }}"" when: _service_endpoints is defined ",,185,93
openstack%2Fopenstack-ansible-os_designate~master~I230a6b46d91b71881c91b1f4f93d03676a3a0afa,openstack/openstack-ansible-os_designate,master,I230a6b46d91b71881c91b1f4f93d03676a3a0afa,Convert dynamic includes to static imports,MERGED,2019-08-07 11:19:34.000000000,2019-08-08 14:30:34.000000000,2019-08-08 14:30:34.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 11:19:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_designate/commit/5c8a6e76e022b0e985ff806b8406c27c5c307a31', 'message': 'Convert dynamic includes to static imports\n\nWhen task/role files are included using include_tasks, tags are not\npassed to the included tasks. As a result, tags like swift-config\ndo not have the intended effect. This patch changes include_tasks\nto import_tasks for all cases where dynamic vars or loops are not used\nso that tags are properly handled.\n\nReference -\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html\nhttps://bugs.launchpad.net/openstack-ansible/+bug/1815043\n\nChange-Id: I230a6b46d91b71881c91b1f4f93d03676a3a0afa\n'}, {'number': 2, 'created': '2019-08-07 15:55:26.000000000', 'files': ['tasks/main.yml', 'vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_designate/commit/af1cd0ac8f9f8db7cc84e1c23f26c9b1b7e4bda0', 'message': 'Convert dynamic includes to static imports\n\nWhen task/role files are included using include_tasks, tags are not\npassed to the included tasks. As a result, tags like swift-config\ndo not have the intended effect. This patch changes include_tasks\nto import_tasks for all cases where dynamic vars or loops are not used\nso that tags are properly handled.\n\nReference -\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html\nhttps://bugs.launchpad.net/openstack-ansible/+bug/1815043\n\nChange-Id: I230a6b46d91b71881c91b1f4f93d03676a3a0afa\n'}]",0,675094,af1cd0ac8f9f8db7cc84e1c23f26c9b1b7e4bda0,9,3,2,28619,,,0,"Convert dynamic includes to static imports

When task/role files are included using include_tasks, tags are not
passed to the included tasks. As a result, tags like swift-config
do not have the intended effect. This patch changes include_tasks
to import_tasks for all cases where dynamic vars or loops are not used
so that tags are properly handled.

Reference -
https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html
https://bugs.launchpad.net/openstack-ansible/+bug/1815043

Change-Id: I230a6b46d91b71881c91b1f4f93d03676a3a0afa
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_designate refs/changes/94/675094/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,5c8a6e76e022b0e985ff806b8406c27c5c307a31,static_imports,- import_tasks: designate_pre_install.yml- import_tasks: designate_install.yml- import_tasks: designate_post_install.yml import_role:- import_tasks: designate_db_sync.yml- import_tasks: service_setup.yml,- include_tasks: designate_pre_install.yml- include_tasks: designate_install.yml- include_tasks: designate_post_install.yml include_role:- include_tasks: designate_db_sync.yml- include_tasks: service_setup.yml,6,6
openstack%2Fopenstack-ansible-os_congress~master~I2ac03af80fb57eeaf839ab72c91aaba0e2da3be0,openstack/openstack-ansible-os_congress,master,I2ac03af80fb57eeaf839ab72c91aaba0e2da3be0,Replace include with import,MERGED,2019-08-07 11:20:55.000000000,2019-08-08 14:29:30.000000000,2019-08-08 14:29:30.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 11:20:55.000000000', 'files': ['tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_congress/commit/9a22bc42e569d2c425bdc8c8dc91ba5245c29318', 'message': 'Replace include with import\n\nDuring previous commit include_task was accidentally copy-pasted.\n\nChange-Id: I2ac03af80fb57eeaf839ab72c91aaba0e2da3be0\n'}]",0,675095,9a22bc42e569d2c425bdc8c8dc91ba5245c29318,7,3,1,28619,,,0,"Replace include with import

During previous commit include_task was accidentally copy-pasted.

Change-Id: I2ac03af80fb57eeaf839ab72c91aaba0e2da3be0
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_congress refs/changes/95/675095/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,9a22bc42e569d2c425bdc8c8dc91ba5245c29318,osa/service-refactor,- import_tasks: service_setup.yml,- include_tasks: service_setup.yml,1,1
openstack%2Fopenstack-ansible-os_masakari~master~Id0d68668cdbf9c9e9c4738c8e1dd053586f6a5c0,openstack/openstack-ansible-os_masakari,master,Id0d68668cdbf9c9e9c4738c8e1dd053586f6a5c0,service_setup: refactor service setup to a single file,MERGED,2019-08-07 16:11:33.000000000,2019-08-08 14:23:21.000000000,2019-08-08 14:23:21.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 16:11:33.000000000', 'files': ['tasks/main.yml', 'tasks/masakari_service_setup.yml', 'tasks/service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_masakari/commit/be0a6d48b9120a3d50f9a75886a1fa594109c49d', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: Id0d68668cdbf9c9e9c4738c8e1dd053586f6a5c0\n'}]",0,675141,be0a6d48b9120a3d50f9a75886a1fa594109c49d,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: Id0d68668cdbf9c9e9c4738c8e1dd053586f6a5c0
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_masakari refs/changes/41/675141/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/masakari_service_setup.yml', 'tasks/service_setup.yml']",3,be0a6d48b9120a3d50f9a75886a1fa594109c49d,osa/service_refactor,"--- # Copyright 2019, VEXXHOST, Inc. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # WARNING: # This file is maintained in the openstack-ansible-tests repository. # https://opendev.org/openstack/openstack-ansible-tests/src/sync/tasks/service_setup.yml # If you need to modify this file, update the one in the openstack-ansible-tests # repository. Once it merges there, the changes will automatically be proposed to # all the repositories which use it. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the OS service delegate_to: ""{{ _service_setup_host }}"" vars: ansible_python_interpreter: ""{{ _service_setup_host_python_interpreter }}"" block: - name: Add keystone domain os_keystone_domain: cloud: default state: present name: ""{{ _domain_name }}"" endpoint_type: admin verify: ""{{ not _service_adminuri_insecure }}"" register: add_domain when: _domain_name is defined until: add_domain is success retries: 5 delay: 10 - name: Add service project os_project: cloud: default state: present name: ""{{ _project_name }}"" description: ""{{ _project_description | default(omit) }}"" domain_id: ""{{ _project_domain | default('default') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _project_name is defined until: add_service is success retries: 5 delay: 10 - name: Add services to the keystone service catalog os_keystone_service: cloud: default state: ""{{ item.state | default('present') }}"" name: ""{{ item.name }}"" service_type: ""{{ item.type }}"" description: ""{{ item.description | default('') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service with_items: ""{{ _service_catalog }}"" when: _service_catalog is defined until: add_service is success retries: 5 delay: 10 - name: Add keystone roles os_keystone_role: cloud: default state: present name: ""{{ item.role }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add service users os_user: cloud: default state: present name: ""{{ item.name }}"" password: ""{{ item.password }}"" domain: ""{{ item.domain | default('default') }}"" default_project: ""{{ item.project | default(_service_project_name) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" update_password: always register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'password' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 no_log: True - name: Add service users to the role os_user_role: cloud: default state: present user: ""{{ item.name }}"" role: ""{{ item.role }}"" project: ""{{ item.project | default(_service_project_name) }}"" domain: ""{{ item.domain | default(omit) }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service when: - not (_service_in_ldap | default(False) | bool) - _service_users is defined - ""'name' in item"" - ""'role' in item"" - (item.condition | default(True)) | bool until: add_service is success with_items: ""{{ _service_users }}"" retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: ""{{ item.state | default('present') }}"" service: ""{{ item.service }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ _service_region | default('RegionOne') }}"" endpoint_type: admin validate_certs: ""{{ not (_service_adminuri_insecure | default(True) | bool) }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: ""{{ _service_endpoints }}"" when: _service_endpoints is defined ",,185,93
openstack%2Fnova~master~Ie6391576b3baed14f761bb64a98835f023e8f49d,openstack/nova,master,Ie6391576b3baed14f761bb64a98835f023e8f49d,libvirt: add generater of fake pci devices capabilities,ABANDONED,2018-07-17 13:59:13.000000000,2019-08-08 14:22:29.000000000,,"[{'_account_id': 9008}, {'_account_id': 14384}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2018-07-17 13:59:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6078261ef04dc41a86e5f23900270dc35f8fab01', 'message': 'libvirt: add generater of fake pci devices capabilities\n\nThis class to generate devices capabilities. That will be used by\nfunctional tests\n\nChange-Id: Ie6391576b3baed14f761bb64a98835f023e8f49d\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}, {'number': 2, 'created': '2018-07-18 12:41:58.000000000', 'files': ['nova/tests/unit/virt/libvirt/test_fakelibvirt.py', 'nova/tests/unit/virt/libvirt/fakelibvirt.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4719137a785e90f440f7d67f295aa5adfc951023', 'message': 'libvirt: add generater of fake pci devices capabilities\n\nThis class to generate devices capabilities. That will be used by\nfunctional tests\n\nChange-Id: Ie6391576b3baed14f761bb64a98835f023e8f49d\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}]",0,583251,4719137a785e90f440f7d67f295aa5adfc951023,17,8,2,7730,,,0,"libvirt: add generater of fake pci devices capabilities

This class to generate devices capabilities. That will be used by
functional tests

Change-Id: Ie6391576b3baed14f761bb64a98835f023e8f49d
Signed-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/51/583251/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/libvirt/test_fakelibvirt.py', 'nova/tests/unit/virt/libvirt/fakelibvirt.py']",2,6078261ef04dc41a86e5f23900270dc35f8fab01,fakelibvirt,"class FakePhysicalPCIDevice(object): def __init__(self, vendor, product, driver, domain=""0000"", bus=""00"", slot=""00"", function=""0"", numa=0, parent=None, capability=None): self.cfg = vconfig.LibvirtConfigNodeDevice() self.cfg.name = ""pci_%(domain)s_%(bus)s_%(slot)s_%(function)s"" % { 'domain': domain, 'bus': bus, 'slot': slot, 'function': function} self.cfg.parent = parent self.cfg.driver = driver self.cfg.pci_capability = vconfig.LibvirtConfigNodeDevicePciCap() self.cfg.pci_capability.vendor_id = int(vendor[0], 16) self.cfg.pci_capability.vendor = vendor[1] self.cfg.pci_capability.product_id = int(product[0], 16) self.cfg.pci_capability.product = product[1] self.cfg.pci_capability.domain = int(domain) self.cfg.pci_capability.bus = int(bus) self.cfg.pci_capability.slot = int(slot) self.cfg.pci_capability.function = int(function) self.cfg.pci_capability.numa_node = numa if capability: kind, number = capability if kind == 'virt_functions': cap = vconfig.LibvirtConfigNodeDevicePciSubFunctionCap() cap.type = 'pci' for i in range(number): dev = (int(domain, 16), int(bus, 16), int(slot, 16), int(function, 16) + i) cap.device_addrs.append(dev) self.cfg.pci_capability.fun_capability.append(cap) ",,64,0
openstack%2Fopenstack-ansible-os_placement~master~I9c222cfc28c6838099bc155bf2d023cfd6112816,openstack/openstack-ansible-os_placement,master,I9c222cfc28c6838099bc155bf2d023cfd6112816,Convert dynamic includes to static imports,MERGED,2019-08-07 17:27:39.000000000,2019-08-08 14:22:22.000000000,2019-08-08 14:22:22.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 17:27:39.000000000', 'files': ['tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_placement/commit/b561dbf67af61ff07543b469000d3692f4f9184d', 'message': 'Convert dynamic includes to static imports\n\nWhen task/role files are included using include_tasks, tags are not\npassed to the included tasks. As a result, tags like swift-config\ndo not have the intended effect. This patch changes include_tasks\nto import_tasks for all cases where dynamic vars or loops are not used\nso that tags are properly handled.\n\nReference -\nhttps://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html\nhttps://bugs.launchpad.net/openstack-ansible/+bug/1815043\n\nChange-Id: I9c222cfc28c6838099bc155bf2d023cfd6112816\n'}]",0,675161,b561dbf67af61ff07543b469000d3692f4f9184d,7,3,1,28619,,,0,"Convert dynamic includes to static imports

When task/role files are included using include_tasks, tags are not
passed to the included tasks. As a result, tags like swift-config
do not have the intended effect. This patch changes include_tasks
to import_tasks for all cases where dynamic vars or loops are not used
so that tags are properly handled.

Reference -
https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse.html
https://bugs.launchpad.net/openstack-ansible/+bug/1815043

Change-Id: I9c222cfc28c6838099bc155bf2d023cfd6112816
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_placement refs/changes/61/675161/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,b561dbf67af61ff07543b469000d3692f4f9184d,static-imports,- import_tasks: placement_pre_install.yml- import_tasks: placement_install.yml- import_tasks: placement_post_install.yml- import_tasks: placement_db_sync.yml- import_tasks: placement_service_setup.yml,- include_tasks: placement_pre_install.yml- include_tasks: placement_install.yml- include_tasks: placement_post_install.yml- include_tasks: placement_db_sync.yml- include_tasks: placement_service_setup.yml,5,5
openstack%2Fnova~master~Ic0e97039be07a29fc66478b585effe95c030b38f,openstack/nova,master,Ic0e97039be07a29fc66478b585effe95c030b38f,libvirt: add format_dom() method for LibvirtConfigNodeDevice,ABANDONED,2018-07-17 13:59:13.000000000,2019-08-08 14:21:58.000000000,,"[{'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2018-07-17 13:59:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/71a1f27a9ef5bf8fe16b8402a3328e0e57ccf572', 'message': 'libvirt: add format_dom() method for LibvirtConfigNodeDevice\n\nThis will be necessary for fakelibvirt to generate XML that will be\nused by functiona tests\n\nChange-Id: Ic0e97039be07a29fc66478b585effe95c030b38f\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}, {'number': 2, 'created': '2018-07-18 12:41:58.000000000', 'files': ['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/5eea8a816d8fabcbe75f64e4ce9c8050b4e2a8f0', 'message': 'libvirt: add format_dom() method for LibvirtConfigNodeDevice\n\nThis will be necessary for fakelibvirt to generate XML that will be\nused by functiona tests\n\nChange-Id: Ic0e97039be07a29fc66478b585effe95c030b38f\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}]",0,583250,5eea8a816d8fabcbe75f64e4ce9c8050b4e2a8f0,34,14,2,7730,,,0,"libvirt: add format_dom() method for LibvirtConfigNodeDevice

This will be necessary for fakelibvirt to generate XML that will be
used by functiona tests

Change-Id: Ic0e97039be07a29fc66478b585effe95c030b38f
Signed-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/50/583250/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py']",2,71a1f27a9ef5bf8fe16b8402a3328e0e57ccf572,fakelibvirt," self.assertXmlEqual(obj.to_xml(), xmlin) self.assertEqual(obj.domain, 0)"," <driver> <name>vxx</name> </driver> self.assertEqual(obj.domain, 1)",25,17
openstack%2Fnova~master~Ib7d6830d438225784a5d558aa99c3ffea1970e13,openstack/nova,master,Ib7d6830d438225784a5d558aa99c3ffea1970e13,libvirt: add format_dom() for config LibvirtConfigNodeDevicePciCap,ABANDONED,2018-07-17 13:59:13.000000000,2019-08-08 14:21:54.000000000,,"[{'_account_id': 6062}, {'_account_id': 7730}, {'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2018-07-17 13:59:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d4182a95f70f72471d57b43d8bf491bd49961beb', 'message': 'libvirt: add format_dom() for config LibvirtConfigNodeDevicePciCap\n\nThis will be necessary for fakelibvirt to generate XML that will be\nused by functiona tests\n\nChange-Id: Ib7d6830d438225784a5d558aa99c3ffea1970e13\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}, {'number': 2, 'created': '2018-07-18 12:41:58.000000000', 'files': ['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a2f7123dbfe73e5bce06783ad7029f284d947125', 'message': 'libvirt: add format_dom() for config LibvirtConfigNodeDevicePciCap\n\nThis will be necessary for fakelibvirt to generate XML that will be\nused by functiona tests\n\nChange-Id: Ib7d6830d438225784a5d558aa99c3ffea1970e13\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}]",2,583249,a2f7123dbfe73e5bce06783ad7029f284d947125,34,16,2,7730,,,0,"libvirt: add format_dom() for config LibvirtConfigNodeDevicePciCap

This will be necessary for fakelibvirt to generate XML that will be
used by functiona tests

Change-Id: Ib7d6830d438225784a5d558aa99c3ffea1970e13
Signed-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/49/583249/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py']",2,d4182a95f70f72471d57b43d8bf491bd49961beb,fakelibvirt," <address domain=""0x0000"" bus=""0x0a"" slot=""0x01"" function=""0x1""/> <address domain=""0x0001"" bus=""0x0a"" slot=""0x02"" function=""0x3""/> self.assertEqual(obj.domain, 1) self.assertXmlEqual(obj.to_xml(), xmlin) "," <address domain=""0000"" bus=""0x0a"" slot=""0x1"" function=""0x1""/> <address domain=""0001"" bus=""0x0a"" slot=""0x02"" function=""0x03""/> self.assertEqual(obj.domain, 0)",35,3
openstack%2Fnova~master~Ibed8309fb7568edf169124f80b3f03b7984a2147,openstack/nova,master,Ibed8309fb7568edf169124f80b3f03b7984a2147,libvirt: add missing type for LibvirtConfigNodeDevicePciCap,ABANDONED,2018-07-17 13:59:13.000000000,2019-08-08 14:21:50.000000000,,"[{'_account_id': 6062}, {'_account_id': 7634}, {'_account_id': 7730}, {'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 27621}]","[{'number': 1, 'created': '2018-07-17 13:59:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/106e435802b8dfb3159d0203679ade1fe38239b2', 'message': 'libvirt: add missing type for LibvirtConfigNodeDevicePciCap\n\nlibvirt is reporting capabaility per type. It will be useful to have\nthe XML well formatted that to help generating accurate data used by\nfunctional tests in future\n\nChange-Id: Ibed8309fb7568edf169124f80b3f03b7984a2147\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}, {'number': 2, 'created': '2018-07-18 12:41:58.000000000', 'files': ['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4efe5b089c1a07e9eabff529da087cce5360fe0a', 'message': 'libvirt: add missing type for LibvirtConfigNodeDevicePciCap\n\nlibvirt is reporting capabaility per type. It will be useful to have\nthe XML well formatted that to help generating accurate data used by\nfunctional tests in future\n\nChange-Id: Ibed8309fb7568edf169124f80b3f03b7984a2147\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}]",2,583248,4efe5b089c1a07e9eabff529da087cce5360fe0a,38,18,2,7730,,,0,"libvirt: add missing type for LibvirtConfigNodeDevicePciCap

libvirt is reporting capabaility per type. It will be useful to have
the XML well formatted that to help generating accurate data used by
functional tests in future

Change-Id: Ibed8309fb7568edf169124f80b3f03b7984a2147
Signed-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/48/583248/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py']",2,106e435802b8dfb3159d0203679ade1fe38239b2,fakelibvirt," self.assertEqual(""pci"", obj.type)",,5,0
openstack%2Fnova~master~Ib877a78413247bfee9f0e8a40c53649202e8387e,openstack/nova,master,Ib877a78413247bfee9f0e8a40c53649202e8387e,libvirt: add format_dom for ConfigNodeDevicePciSubFunctionCap,ABANDONED,2018-07-17 13:59:13.000000000,2019-08-08 14:21:46.000000000,,"[{'_account_id': 6062}, {'_account_id': 6873}, {'_account_id': 7634}, {'_account_id': 7730}, {'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15751}, {'_account_id': 15941}, {'_account_id': 16128}, {'_account_id': 16376}, {'_account_id': 16898}, {'_account_id': 19944}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}]","[{'number': 1, 'created': '2018-07-17 13:59:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3a79d0adec99f916d492a523ee22a4982563e24f', 'message': 'libvirt: add format_dom for ConfigNodeDevicePciSubFunctionCap\n\nThis will be necessary for fakelibvirt to generate XML that will be\nused by functiona tests\n\nChange-Id: Ib877a78413247bfee9f0e8a40c53649202e8387e\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}, {'number': 2, 'created': '2018-07-18 12:41:58.000000000', 'files': ['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/06bd7b25a52b1460543cdbd16355f1d1b63b844e', 'message': 'libvirt: add format_dom for ConfigNodeDevicePciSubFunctionCap\n\nThis will be necessary for fakelibvirt to generate XML that will be\nused by functiona tests\n\nChange-Id: Ib877a78413247bfee9f0e8a40c53649202e8387e\nSigned-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>\n'}]",3,583247,06bd7b25a52b1460543cdbd16355f1d1b63b844e,42,19,2,7730,,,0,"libvirt: add format_dom for ConfigNodeDevicePciSubFunctionCap

This will be necessary for fakelibvirt to generate XML that will be
used by functiona tests

Change-Id: Ib877a78413247bfee9f0e8a40c53649202e8387e
Signed-off-by: Sahid Orentino Ferdjaoui <sahid.ferdjaoui@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/47/583247/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/config.py', 'nova/tests/unit/virt/libvirt/test_config.py']",2,3a79d0adec99f916d492a523ee22a4982563e24f,fakelibvirt," <address domain=""0x0000"" bus=""0x0a"" slot=""0x01"" function=""0x1""/> <address domain=""0x0001"" bus=""0x0a"" slot=""0x02"" function=""0x3""/> self.assertXmlEqual(xmlin, fun_capability.to_xml())"," <address domain=""0000"" bus=""0x0a"" slot=""0x1"" function=""0x1""/> <address domain=""0001"" bus=""0x0a"" slot=""0x02"" function=""0x03""/>",20,2
openstack%2Fopenstack-ansible-os_blazar~master~Id42d77095754fefff640a4d48c6a3f48f2997f25,openstack/openstack-ansible-os_blazar,master,Id42d77095754fefff640a4d48c6a3f48f2997f25,Replace include with import,MERGED,2019-08-07 11:16:22.000000000,2019-08-08 14:20:41.000000000,2019-08-08 14:20:41.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 11:16:22.000000000', 'files': ['tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_blazar/commit/5cecf29e03ec7a74a4e09da5f05fa90af3c0cf1f', 'message': 'Replace include with import\n\nDuring previous commit include_task was accidentally copy-pasted.\n\nChange-Id: Id42d77095754fefff640a4d48c6a3f48f2997f25\n'}]",0,675093,5cecf29e03ec7a74a4e09da5f05fa90af3c0cf1f,7,3,1,28619,,,0,"Replace include with import

During previous commit include_task was accidentally copy-pasted.

Change-Id: Id42d77095754fefff640a4d48c6a3f48f2997f25
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_blazar refs/changes/93/675093/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,5cecf29e03ec7a74a4e09da5f05fa90af3c0cf1f,osa/service-refactor,- import_tasks: service_setup.yml,- include_tasks: service_setup.yml,1,1
openstack%2Fopenstack-ansible-os_sahara~master~I45b018381a9958e3df12d1eccd5fafc0fcc45ad0,openstack/openstack-ansible-os_sahara,master,I45b018381a9958e3df12d1eccd5fafc0fcc45ad0,service_setup: refactor service setup to a single file,MERGED,2019-08-07 17:57:55.000000000,2019-08-08 14:20:12.000000000,2019-08-08 14:20:11.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 17:57:55.000000000', 'files': ['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/sahara_service_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_sahara/commit/6d8b558f1783577cc07c225cccdab761e8d1ff46', 'message': 'service_setup: refactor service setup to a single file\n\nThis patch refactors the openstack user/service/endpoints creation to\nservice_setup.yml which will eventually be managed by\nopenstack-ansible-tests.\n\nChange-Id: I45b018381a9958e3df12d1eccd5fafc0fcc45ad0\n'}]",0,675167,6d8b558f1783577cc07c225cccdab761e8d1ff46,7,3,1,28619,,,0,"service_setup: refactor service setup to a single file

This patch refactors the openstack user/service/endpoints creation to
service_setup.yml which will eventually be managed by
openstack-ansible-tests.

Change-Id: I45b018381a9958e3df12d1eccd5fafc0fcc45ad0
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_sahara refs/changes/67/675167/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'tasks/service_setup.yml', 'tasks/sahara_service_setup.yml']",3,6d8b558f1783577cc07c225cccdab761e8d1ff46,osa/service-refactor,,"--- # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # We set the python interpreter to the ansible runtime venv if # the delegation is to localhost so that we get access to the # appropriate python libraries in that venv. If the delegation # is to another host, we assume that it is accessible by the # system python instead. - name: Setup the service delegate_to: ""{{ sahara_service_setup_host }}"" vars: ansible_python_interpreter: ""{{ sahara_service_setup_host_python_interpreter }}"" block: - name: Add service to the keystone service catalog os_keystone_service: cloud: default state: present name: ""{{ sahara_service_name }}"" service_type: ""{{ sahara_service_type }}"" description: ""{{ sahara_service_description }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 - name: Add service user os_user: cloud: default state: present name: ""{{ sahara_service_user_name }}"" password: ""{{ sahara_service_password }}"" domain: default default_project: ""{{ sahara_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not sahara_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 no_log: True - name: Add service user to admin role os_user_role: cloud: default state: present user: ""{{ sahara_service_user_name }}"" role: ""{{ sahara_role_name }}"" project: ""{{ sahara_service_project_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service when: not sahara_service_in_ldap | bool until: add_service is success retries: 5 delay: 10 - name: Add endpoints to keystone endpoint catalog os_keystone_endpoint: cloud: default state: present service: ""{{ sahara_service_name }}"" endpoint_interface: ""{{ item.interface }}"" url: ""{{ item.url }}"" region: ""{{ sahara_service_region }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 with_items: - interface: ""public"" url: ""{{ sahara_service_publicuri }}"" - interface: ""internal"" url: ""{{ sahara_service_internaluri }}"" - interface: ""admin"" url: ""{{ sahara_service_adminuri }}"" - name: Add proxy domain os_keystone_domain: cloud: default state: present name: ""{{ sahara_proxy_user_domain_name }}"" endpoint_type: admin verify: ""{{ not keystone_service_adminuri_insecure }}"" register: add_service until: add_service is success retries: 5 delay: 10 ",186,103
openstack%2Ftripleo-quickstart-extras~master~I1cd87401058929f578e6b12b5501eba480562343,openstack/tripleo-quickstart-extras,master,I1cd87401058929f578e6b12b5501eba480562343,Add py3 support for ARA install in mistral,MERGED,2019-08-02 17:39:43.000000000,2019-08-08 14:13:20.000000000,2019-08-08 13:37:45.000000000,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2019-08-02 17:39:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/6018fe449b3d78c3f74e6f40830e2967f6400330', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 2, 'created': '2019-08-02 21:59:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/a8a370d4e1166e459adbddf9f3d76ce019e96aac', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 3, 'created': '2019-08-03 10:56:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/071fe3f6b3bc8ba21e88a8f5ee686273a5b0b552', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 4, 'created': '2019-08-03 14:13:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/dba678d0306dbbee173e63e08fe198cd48c54c20', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 5, 'created': '2019-08-03 17:23:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/4d0e77ae4346676ee509c26b1310f0bd676d81de', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 6, 'created': '2019-08-03 19:11:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/fb6fea52ea0a35c53512590c4cc49bee8f4bdc28', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 7, 'created': '2019-08-03 22:20:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/3bcfe458662da5c7ed9b0bca744a0ba51b82c136', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 8, 'created': '2019-08-03 23:28:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/867b82b3996109ed5264141c1bb22a091253ea2f', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 9, 'created': '2019-08-04 01:48:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/4be63ad6fe56a75e7cfd2bfb7bdd5b738a2b0e30', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 10, 'created': '2019-08-04 17:50:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e0fecf4c093777cddd9028d106bf95fe36d8c869', 'message': 'WIP: Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 11, 'created': '2019-08-05 15:23:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/4e83908bab0d2016fcb0f835ea20950840c9724e', 'message': 'WIP: Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 12, 'created': '2019-08-05 18:05:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/509d430b98db5417b6ddd00781f98db95108b22c', 'message': 'WIP: Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}, {'number': 13, 'created': '2019-08-06 15:45:13.000000000', 'files': ['roles/overcloud-prep-images/templates/overcloud-prep-images.sh.j2', 'roles/overcloud-deploy/templates/ansible.cfg.j2', 'roles/undercloud-setup/tasks/ansible_cfg.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/9dfb4084c207181afaf5e2d85d89ce2cdbf7be45', 'message': 'Add py3 support for ARA install in mistral\n\nIn py3 containers there is no easy_install, but there is pip3.\nUse pip3 ad failover to install ARA in py3 container.\nChange-Id: I1cd87401058929f578e6b12b5501eba480562343\n'}]",4,674366,9dfb4084c207181afaf5e2d85d89ce2cdbf7be45,52,7,13,10969,,,0,"Add py3 support for ARA install in mistral

In py3 containers there is no easy_install, but there is pip3.
Use pip3 ad failover to install ARA in py3 container.
Change-Id: I1cd87401058929f578e6b12b5501eba480562343
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/66/674366/13 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-prep-images/templates/overcloud-prep-images.sh.j2'],1,6018fe449b3d78c3f74e6f40830e2967f6400330,ovb8,"sudo $container_cli exec --user root $cont bash -c ""easy_install pip && pip install 'ara<1.0.0' || pip3 install 'ara<1.0.0'""","sudo $container_cli exec --user root $cont bash -c ""easy_install pip && pip install 'ara<1.0.0'""",1,1
openstack%2Fcinderlib~master~Ia4cf0044c23665e715ff45a4fc6d0e6e472b6c4e,openstack/cinderlib,master,Ia4cf0044c23665e715ff45a4fc6d0e6e472b6c4e,Bump openstackdocstheme to 1.20.0,MERGED,2019-07-16 09:35:20.000000000,2019-08-08 13:58:01.000000000,2019-08-08 13:58:01.000000000,"[{'_account_id': 5314}, {'_account_id': 9535}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-16 09:35:20.000000000', 'files': ['doc/source/conf.py', 'lower-constraints.txt', 'doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/cinderlib/commit/8974ba2529c7d61eed29f4252f99750c11ef9527', 'message': 'Bump openstackdocstheme to 1.20.0\n\nChange-Id: Ia4cf0044c23665e715ff45a4fc6d0e6e472b6c4e\n'}]",0,670990,8974ba2529c7d61eed29f4252f99750c11ef9527,7,3,1,30092,,,0,"Bump openstackdocstheme to 1.20.0

Change-Id: Ia4cf0044c23665e715ff45a4fc6d0e6e472b6c4e
",git fetch https://review.opendev.org/openstack/cinderlib refs/changes/90/670990/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/conf.py', 'lower-constraints.txt', 'doc/requirements.txt']",3,8974ba2529c7d61eed29f4252f99750c11ef9527,,openstackdocstheme>=1.20.0 # Apache-2.0,openstackdocstheme>=1.18.1 # Apache-2.0,2,4
openstack%2Fcinder~stable%2Fstein~Iac785eef9be4b9cdb5c739ee0a87949805282867,openstack/cinder,stable/stein,Iac785eef9be4b9cdb5c739ee0a87949805282867,Fix DetachedInstanceError for VolumeAttachment,MERGED,2019-08-07 10:25:49.000000000,2019-08-08 13:58:00.000000000,2019-08-08 13:58:00.000000000,"[{'_account_id': 9535}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 12369}, {'_account_id': 19933}, {'_account_id': 21863}, {'_account_id': 21976}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 26537}, {'_account_id': 29716}]","[{'number': 1, 'created': '2019-08-07 10:25:49.000000000', 'files': ['cinder/tests/unit/objects/test_volume.py', 'releasenotes/notes/detachedinstanceerror-64be35894c624eae.yaml', 'cinder/objects/volume_attachment.py', 'cinder/tests/unit/objects/test_volume_attachment.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/44a15be6a71ebdaf0e5d1663fc31011ff43ef37b', 'message': 'Fix DetachedInstanceError for VolumeAttachment\n\nPatch I253123d5451b32f0e3143916e41aaa1af75561c2 fixed the\nDetachedInstanceError for VolumeAttachment OVOs but only partially, as\napparently it was dependent on the SQLAlchemy version due to the use os\n""hasattr"".\n\nThis patch replaces ""hasattr"" with a check on the object\'s dictionary,\nwhich will never trigger a Lazy Load.\n\nCloses-Bug: #1834845\nChange-Id: Iac785eef9be4b9cdb5c739ee0a87949805282867\n(cherry picked from commit 2e73bede80cc2acdb3527f06bc5c5f9c1a8463a7)\n'}]",0,675081,44a15be6a71ebdaf0e5d1663fc31011ff43ef37b,19,14,1,935,,,0,"Fix DetachedInstanceError for VolumeAttachment

Patch I253123d5451b32f0e3143916e41aaa1af75561c2 fixed the
DetachedInstanceError for VolumeAttachment OVOs but only partially, as
apparently it was dependent on the SQLAlchemy version due to the use os
""hasattr"".

This patch replaces ""hasattr"" with a check on the object's dictionary,
which will never trigger a Lazy Load.

Closes-Bug: #1834845
Change-Id: Iac785eef9be4b9cdb5c739ee0a87949805282867
(cherry picked from commit 2e73bede80cc2acdb3527f06bc5c5f9c1a8463a7)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/81/675081/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/tests/unit/objects/test_volume.py', 'releasenotes/notes/detachedinstanceerror-64be35894c624eae.yaml', 'cinder/objects/volume_attachment.py', 'cinder/tests/unit/objects/test_volume_attachment.py']",4,44a15be6a71ebdaf0e5d1663fc31011ff43ef37b,bug/1834845,"from sqlalchemy.orm import attributes def test_from_db_object_no_volume(self): original_get = attributes.InstrumentedAttribute.__get__ def my_get(get_self, instance, owner): self.assertNotEqual('volume', get_self.key) return original_get(get_self, instance, owner) # Volume field is not loaded attach = fake_volume.models.VolumeAttachment(id=fake.ATTACHMENT_ID, volume_id=fake.VOLUME_ID) patch_str = 'sqlalchemy.orm.attributes.InstrumentedAttribute.__get__' with mock.patch(patch_str, side_effect=my_get): objects.VolumeAttachment._from_db_object( self.context, objects.VolumeAttachment(), attach) attachment = fake_volume.volume_attachment_ovo(self.context) attachment = fake_volume.volume_attachment_ovo(self.context)", attachment = fake_volume.fake_volume_attachment_obj(self.context) attachment = fake_volume.fake_volume_attachment_obj(self.context),34,9
openstack%2Fnova~stable%2Frocky~I3e53c76812ac6614d10a7fdbbc0584c81a4b60b2,openstack/nova,stable/rocky,I3e53c76812ac6614d10a7fdbbc0584c81a4b60b2,[DNM] testing bug/1813789 revert resize events,ABANDONED,2019-07-17 14:09:35.000000000,2019-08-08 13:56:33.000000000,,"[{'_account_id': 8864}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}]","[{'number': 1, 'created': '2019-07-17 14:09:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8e353775d6c01e1f213a41c37380dd36c72acef4', 'message': ""[DNM] testing bug/1813789 revert resize events\n\nThis is a combination of 3 commits.\nwhich have been modifed to test revert resize on\nstable branches.\n\nThis is the 1st commit message:\n\n  Run revert resize tests in nova-live-migration\n\n  In order to test multinode resize revert (which is currently only\n  tested in the single node tempest-full-py3 job), this patch renames\n  the nova-live-migration job to nova-multinode and makes it run revert\n  resize test via a Tempest RC file. The existing live migration and\n  evacuate tests are left as post-test hook scripts because they do\n  things like change Tempest settings, start Glance, and force down\n  compute nodes.\n\n  Change-Id: I980177410c16ecbd809856440ac633453fa20ea8\n\nThis is the commit message #2:\n\n  [DNM] use iptables in nova-multinode\n\n  This patch is jsut for testing to see if we can repoduce the\n  issue we are seeing downstrem upstream.\n\n  my current working theroy is because we are using iptables\n  in the downstream ci which enable the hybrid plug workflow it\n  change the timeing of when the network events are sent.\n\n  in a non hybrid plug case the network events are sent after the\n  vm is resumed and libvirt plugs the interface back into ovs\n  in the hybrid plug case as we have not called unplug on the souce\n  node the veth pair and intermeidate linux bridge still exist when\n  we activate the souce binding so the event woudl be sent imedetly before\n  we start waithgin for it. this is what we belive is the souce of the\n  bug and this shoudl hopefully repoduce it.\n\n  Change-Id: Idf0ed84bae0bedbb70b5a65ee804ec1f2f4a27ee\n\nThis is the commit message #3:\n\n  Add neutron-tempest-iptables_hybrid job to experimental queue\n\n  Due to regression bug 1833902 we should have the option to\n  run the neutron job that tests the OVS hybrid plug configuration\n  on specific patches.\n\n  We could eventually consider running this in the check queue\n  like neutron-tempest-linuxbridge with a strict set of irrelevant\n  files but that would require some thought, i.e. we'd want to run\n  the job on changes to nova/compute/manager.py since the network\n  vif model bind events code is used in the ComputeManager and is\n  specific to OVS hybrid plug ports. Rather than get bogged down in\n  thinking up what that set is, this change takes the easy path and\n  just throws the job into the on-demand experimental queue.\n\n  Change-Id: Id5172d97b349abe59b47d1284e97943091652419\n  Related-Bug: #1833902\n\nthis modifed versions of those commits will run\n3 jobs in the check queue\n  - nova-live-migration\n  - nova-live-migration-iptables\n  - neutron-tempest-iptables_hybrid\n\nnova-live-migartion and the iptables variant\nwill test teh multi node case\nand the neutron-tempest-iptables_hybrid will test\nsame host resize.\n\nChange-Id: I3e53c76812ac6614d10a7fdbbc0584c81a4b60b2\n""}, {'number': 2, 'created': '2019-07-18 17:08:05.000000000', 'files': ['playbooks/legacy/nova-live-migration/run.yaml', 'devstack/tempest-dsvm-multinode-rc', 'playbooks/legacy/nova-live-migration-iptables/run.yaml', '.zuul.yaml', 'playbooks/legacy/nova-live-migration-iptables/post.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/b65bee242a7240a570c07d288dd645caf40c9ea6', 'message': ""[DNM] testing bug/1813789 revert resize events\n\nThis is a combination of 3 commits.\nwhich have been modifed to test revert resize on\nstable branches.\n\nThis is the 1st commit message:\n\n  Run revert resize tests in nova-live-migration\n\n  In order to test multinode resize revert (which is currently only\n  tested in the single node tempest-full-py3 job), this patch renames\n  the nova-live-migration job to nova-multinode and makes it run revert\n  resize test via a Tempest RC file. The existing live migration and\n  evacuate tests are left as post-test hook scripts because they do\n  things like change Tempest settings, start Glance, and force down\n  compute nodes.\n\n  Change-Id: I980177410c16ecbd809856440ac633453fa20ea8\n\nThis is the commit message #2:\n\n  [DNM] use iptables in nova-multinode\n\n  This patch is jsut for testing to see if we can repoduce the\n  issue we are seeing downstrem upstream.\n\n  my current working theroy is because we are using iptables\n  in the downstream ci which enable the hybrid plug workflow it\n  change the timeing of when the network events are sent.\n\n  in a non hybrid plug case the network events are sent after the\n  vm is resumed and libvirt plugs the interface back into ovs\n  in the hybrid plug case as we have not called unplug on the souce\n  node the veth pair and intermeidate linux bridge still exist when\n  we activate the souce binding so the event woudl be sent imedetly before\n  we start waithgin for it. this is what we belive is the souce of the\n  bug and this shoudl hopefully repoduce it.\n\n  Change-Id: Idf0ed84bae0bedbb70b5a65ee804ec1f2f4a27ee\n\nThis is the commit message #3:\n\n  Add neutron-tempest-iptables_hybrid job to experimental queue\n\n  Due to regression bug 1833902 we should have the option to\n  run the neutron job that tests the OVS hybrid plug configuration\n  on specific patches.\n\n  We could eventually consider running this in the check queue\n  like neutron-tempest-linuxbridge with a strict set of irrelevant\n  files but that would require some thought, i.e. we'd want to run\n  the job on changes to nova/compute/manager.py since the network\n  vif model bind events code is used in the ComputeManager and is\n  specific to OVS hybrid plug ports. Rather than get bogged down in\n  thinking up what that set is, this change takes the easy path and\n  just throws the job into the on-demand experimental queue.\n\n  Change-Id: Id5172d97b349abe59b47d1284e97943091652419\n  Related-Bug: #1833902\n\nthis modifed versions of those commits will run\n3 jobs in the check queue\n  - nova-live-migration\n  - nova-live-migration-iptables\n  - neutron-tempest-iptables_hybrid\n\nnova-live-migartion and the iptables variant\nwill test teh multi node case\nand the neutron-tempest-iptables_hybrid will test\nsame host resize.\n\nChange-Id: I3e53c76812ac6614d10a7fdbbc0584c81a4b60b2\n""}]",0,671303,b65bee242a7240a570c07d288dd645caf40c9ea6,13,6,2,8864,,,0,"[DNM] testing bug/1813789 revert resize events

This is a combination of 3 commits.
which have been modifed to test revert resize on
stable branches.

This is the 1st commit message:

  Run revert resize tests in nova-live-migration

  In order to test multinode resize revert (which is currently only
  tested in the single node tempest-full-py3 job), this patch renames
  the nova-live-migration job to nova-multinode and makes it run revert
  resize test via a Tempest RC file. The existing live migration and
  evacuate tests are left as post-test hook scripts because they do
  things like change Tempest settings, start Glance, and force down
  compute nodes.

  Change-Id: I980177410c16ecbd809856440ac633453fa20ea8

This is the commit message #2:

  [DNM] use iptables in nova-multinode

  This patch is jsut for testing to see if we can repoduce the
  issue we are seeing downstrem upstream.

  my current working theroy is because we are using iptables
  in the downstream ci which enable the hybrid plug workflow it
  change the timeing of when the network events are sent.

  in a non hybrid plug case the network events are sent after the
  vm is resumed and libvirt plugs the interface back into ovs
  in the hybrid plug case as we have not called unplug on the souce
  node the veth pair and intermeidate linux bridge still exist when
  we activate the souce binding so the event woudl be sent imedetly before
  we start waithgin for it. this is what we belive is the souce of the
  bug and this shoudl hopefully repoduce it.

  Change-Id: Idf0ed84bae0bedbb70b5a65ee804ec1f2f4a27ee

This is the commit message #3:

  Add neutron-tempest-iptables_hybrid job to experimental queue

  Due to regression bug 1833902 we should have the option to
  run the neutron job that tests the OVS hybrid plug configuration
  on specific patches.

  We could eventually consider running this in the check queue
  like neutron-tempest-linuxbridge with a strict set of irrelevant
  files but that would require some thought, i.e. we'd want to run
  the job on changes to nova/compute/manager.py since the network
  vif model bind events code is used in the ComputeManager and is
  specific to OVS hybrid plug ports. Rather than get bogged down in
  thinking up what that set is, this change takes the easy path and
  just throws the job into the on-demand experimental queue.

  Change-Id: Id5172d97b349abe59b47d1284e97943091652419
  Related-Bug: #1833902

this modifed versions of those commits will run
3 jobs in the check queue
  - nova-live-migration
  - nova-live-migration-iptables
  - neutron-tempest-iptables_hybrid

nova-live-migartion and the iptables variant
will test teh multi node case
and the neutron-tempest-iptables_hybrid will test
same host resize.

Change-Id: I3e53c76812ac6614d10a7fdbbc0584c81a4b60b2
",git fetch https://review.opendev.org/openstack/nova refs/changes/03/671303/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/nova-live-migration/run.yaml', 'devstack/tempest-dsvm-multinode-rc', 'playbooks/legacy/nova-live-migration-iptables/run.yaml', '.zuul.yaml', 'playbooks/legacy/nova-live-migration-iptables/post.yaml']",5,8e353775d6c01e1f213a41c37380dd36c72acef4,bug/1832028,- hosts: primary tasks: - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=/logs/** - --include=*/ - --exclude=* - --prune-empty-dirs ,,132,119
openstack%2Ftripleo-ansible~master~If6a32a38fdfd6096028d01f2c1a287e68f7b91c3,openstack/tripleo-ansible,master,If6a32a38fdfd6096028d01f2c1a287e68f7b91c3,Add extraconfig/role_extraconfig template to hieradata,ABANDONED,2019-08-05 16:11:57.000000000,2019-08-08 13:48:39.000000000,,"[{'_account_id': 7353}, {'_account_id': 10969}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-05 16:11:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ddd260c2f27783a87503d3d23480083d61c5cbe7', 'message': 'Add extraconfig/role_extraconfig template to hieradata\n\nChange-Id: If6a32a38fdfd6096028d01f2c1a287e68f7b91c3\nRelated-Change: I8f173d125e7407a80c9ddb89e5272fe2a829b1cb\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 2, 'created': '2019-08-06 20:24:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/e7047be07f99e62e80db63b1573b7e2d5af1cdbe', 'message': 'Add extraconfig/role_extraconfig template to hieradata\n\nChange-Id: If6a32a38fdfd6096028d01f2c1a287e68f7b91c3\nRelated-Change: I8f173d125e7407a80c9ddb89e5272fe2a829b1cb\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 3, 'created': '2019-08-08 04:12:13.000000000', 'files': ['tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/tests/test_hieradata_vars.py', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/tests/test_default.py', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-hieradata/templates/role_extraconfig.j2', 'tripleo_ansible/roles/tripleo-hieradata/templates/extraconfig.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/7e35be199fbf79a8c75e404ec9c7a072362baed9', 'message': 'Add extraconfig/role_extraconfig template to hieradata\n\nChange-Id: If6a32a38fdfd6096028d01f2c1a287e68f7b91c3\nRelated-Change: I8f173d125e7407a80c9ddb89e5272fe2a829b1cb\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}]",0,674646,7e35be199fbf79a8c75e404ec9c7a072362baed9,16,5,3,7353,,,0,"Add extraconfig/role_extraconfig template to hieradata

Change-Id: If6a32a38fdfd6096028d01f2c1a287e68f7b91c3
Related-Change: I8f173d125e7407a80c9ddb89e5272fe2a829b1cb
Signed-off-by: Kevin Carter <kecarter@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/46/674646/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/tests/test_hieradata_vars.py', 'tripleo_ansible/roles/tripleo-hieradata/molecule/all-hosts/tests/test_default.py', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/mock-hieradata.j2.yaml', 'tripleo_ansible/roles/tripleo-hieradata/templates/role_extraconfig.j2', 'tripleo_ansible/roles/tripleo-hieradata/templates/extraconfig.j2']",7,ddd260c2f27783a87503d3d23480083d61c5cbe7,bp/reduce-deployment-resources,{{ extraconfig | default({}) | to_nice_json }} ,,10,9
openstack%2Ftripleo-ansible~master~Iefd11a58f6b9c212eee13474ce019f0d99eecb24,openstack/tripleo-ansible,master,Iefd11a58f6b9c212eee13474ce019f0d99eecb24,Add service_configs template to tripleo-hieradata,ABANDONED,2019-08-05 15:48:11.000000000,2019-08-08 13:48:35.000000000,,"[{'_account_id': 10969}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-05 15:48:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/096e7a46d59d9830aa337a9bf19e3afc26a8e4f4', 'message': 'Add service_configs template to tripleo-hieradata\n\nMolecule tests have been extended to exercise this new template.\n\nChange-Id: Iefd11a58f6b9c212eee13474ce019f0d99eecb24\nRelated-Change: Icbc66dc91b03adf329ad0c3680a343e64373eaf2\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 2, 'created': '2019-08-05 16:05:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8f576cd7387de276d07fe38e1ce17e686b8d22e7', 'message': 'Add service_configs template to tripleo-hieradata\n\nMolecule tests have been extended to exercise this new template.\n\nChange-Id: Iefd11a58f6b9c212eee13474ce019f0d99eecb24\nRelated-Change: Icbc66dc91b03adf329ad0c3680a343e64373eaf2\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 3, 'created': '2019-08-06 20:24:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/a10b2d00cc9d538f2ef7f256d48dc22a17469548', 'message': 'Add service_configs template to tripleo-hieradata\n\nMolecule tests have been extended to exercise this new template.\n\nChange-Id: Iefd11a58f6b9c212eee13474ce019f0d99eecb24\nRelated-Change: Icbc66dc91b03adf329ad0c3680a343e64373eaf2\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 4, 'created': '2019-08-08 04:12:02.000000000', 'files': ['tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/templates/service_configs.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9c7cf599d41b2dcbde807510e87d4d1287f14e0c', 'message': 'Add service_configs template to tripleo-hieradata\n\nMolecule tests have been extended to exercise this new template.\n\nChange-Id: Iefd11a58f6b9c212eee13474ce019f0d99eecb24\nRelated-Change: Icbc66dc91b03adf329ad0c3680a343e64373eaf2\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}]",0,674637,9c7cf599d41b2dcbde807510e87d4d1287f14e0c,14,4,4,7353,,,0,"Add service_configs template to tripleo-hieradata

Molecule tests have been extended to exercise this new template.

Change-Id: Iefd11a58f6b9c212eee13474ce019f0d99eecb24
Related-Change: Icbc66dc91b03adf329ad0c3680a343e64373eaf2
Signed-off-by: Kevin Carter <kecarter@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/37/674637/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/molecule.yml', 'tripleo_ansible/roles/tripleo-hieradata/molecule/hieradata_vars/playbook.yml', 'tripleo_ansible/roles/tripleo-hieradata/templates/service_configs.j2']",3,096e7a46d59d9830aa337a9bf19e3afc26a8e4f4,bp/reduce-deployment-resources,{{ service_configs | to_nice_json }} ,,4,0
openstack%2Fpython-cinderclient~master~I1d923d9922bdaaca381611cba299522c21546736,openstack/python-cinderclient,master,I1d923d9922bdaaca381611cba299522c21546736,Blacklist sphinx 2.1.0 (autodoc bug),MERGED,2019-07-19 07:29:31.000000000,2019-08-08 13:43:10.000000000,2019-08-08 13:43:10.000000000,"[{'_account_id': 4523}, {'_account_id': 5314}, {'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-19 07:29:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/c96bfd9b5f107a7f9dc056f02db3576f9589c9e2', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\nDepend-On: https://review.opendev.org/#/c/663060/\n\nChange-Id: I1d923d9922bdaaca381611cba299522c21546736\n'}, {'number': 2, 'created': '2019-07-30 08:54:55.000000000', 'files': ['doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/2134e92b668607d71654fa281920ce62a8223284', 'message': 'Blacklist sphinx 2.1.0 (autodoc bug)\n\nSee https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details\n\nChange-Id: I1d923d9922bdaaca381611cba299522c21546736\n'}]",1,671666,2134e92b668607d71654fa281920ce62a8223284,10,4,2,27822,,,0,"Blacklist sphinx 2.1.0 (autodoc bug)

See https://github.com/sphinx-doc/sphinx/issues/6440 for upstream details

Change-Id: I1d923d9922bdaaca381611cba299522c21546736
",git fetch https://review.opendev.org/openstack/python-cinderclient refs/changes/66/671666/2 && git format-patch -1 --stdout FETCH_HEAD,['doc/requirements.txt'],1,c96bfd9b5f107a7f9dc056f02db3576f9589c9e2,sphinx,"sphinx!=1.6.6,!=1.6.7,!=2.1.0,>=1.6.2;python_version>='3.4' # BSD","sphinx!=1.6.6,!=1.6.7,>=1.6.2;python_version>='3.4' # BSD",1,1
openstack%2Fpython-cinderclient~master~I9488156cbf606731d8ce3f16857da7aeca2e85e6,openstack/python-cinderclient,master,I9488156cbf606731d8ce3f16857da7aeca2e85e6,Enable warnings-as-error for doc builds,MERGED,2019-04-17 15:44:24.000000000,2019-08-08 13:43:09.000000000,2019-08-08 13:43:09.000000000,"[{'_account_id': 5314}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2019-04-17 15:44:24.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/34ff180981352dc192255f84c0377a419bffe99c', 'message': 'Enable warnings-as-error for doc builds\n\nChange-Id: I9488156cbf606731d8ce3f16857da7aeca2e85e6\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,653477,34ff180981352dc192255f84c0377a419bffe99c,14,4,1,11904,,,0,"Enable warnings-as-error for doc builds

Change-Id: I9488156cbf606731d8ce3f16857da7aeca2e85e6
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/python-cinderclient refs/changes/77/653477/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,34ff180981352dc192255f84c0377a419bffe99c,doc-warnings,commands = sphinx-build -W -b html doc/source doc/build/html,commands = sphinx-build -b html doc/source doc/build/html,1,1
openstack%2Fopenstack-ansible-os_cloudkitty~master~Ib03d9af5f2492564bdc5c16b139d7ef1bcdfe354,openstack/openstack-ansible-os_cloudkitty,master,Ib03d9af5f2492564bdc5c16b139d7ef1bcdfe354,Replace include with import,MERGED,2019-08-07 11:15:17.000000000,2019-08-08 13:34:33.000000000,2019-08-08 13:34:33.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}]","[{'number': 1, 'created': '2019-08-07 11:15:17.000000000', 'files': ['tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cloudkitty/commit/9832403d003f3a065e4e61bf1c562b4baaeab1f3', 'message': 'Replace include with import\n\nDuring previous commit include_task was accidentally copy-pasted.\n\nChange-Id: Ib03d9af5f2492564bdc5c16b139d7ef1bcdfe354\n'}]",0,675092,9832403d003f3a065e4e61bf1c562b4baaeab1f3,7,3,1,28619,,,0,"Replace include with import

During previous commit include_task was accidentally copy-pasted.

Change-Id: Ib03d9af5f2492564bdc5c16b139d7ef1bcdfe354
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_cloudkitty refs/changes/92/675092/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,9832403d003f3a065e4e61bf1c562b4baaeab1f3,osa/service-refactor,- import_tasks: service_setup.yml,- include_tasks: service_setup.yml,1,1
openstack%2Ftripleo-heat-templates~master~Id4bba3df475582fa3884e38d17ca66913da83657,openstack/tripleo-heat-templates,master,Id4bba3df475582fa3884e38d17ca66913da83657,Redis HA TLS: do not use the pacemaker image tag for redis_tls_proxy,MERGED,2019-08-07 10:58:04.000000000,2019-08-08 13:32:20.000000000,2019-08-08 13:32:20.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2019-08-07 10:58:04.000000000', 'files': ['deployment/database/redis-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e29fa2361766d13c3deec7879ed824f8bfd21ea8', 'message': ""Redis HA TLS: do not use the pacemaker image tag for redis_tls_proxy\n\nWhen running a 3-nodes Redis cluster with TLS, we use an intermediate\ncontainer redis_tls_proxy for all the encrypted communication between\nthe redis nodes.\n\nThe intermediate container is managed by paunch, so it shouldn't use\nthe container image tagged :pcmklatest. This tag is a intermediate\ntag only meant to be consumed by pacemaker to implement container\nupdate without service disruption. When used in paunch, it causes\nthe deployment to fail at step 2.\n\nConfigure redis_tls_proxy to use heat parameter ContainerRedisImage\ninstead. That is the image meant to be consumed by paunch containers.\n\nCloses-Bug: 1839305\n\nChange-Id: Id4bba3df475582fa3884e38d17ca66913da83657\n""}]",0,675089,e29fa2361766d13c3deec7879ed824f8bfd21ea8,15,7,1,20778,,,0,"Redis HA TLS: do not use the pacemaker image tag for redis_tls_proxy

When running a 3-nodes Redis cluster with TLS, we use an intermediate
container redis_tls_proxy for all the encrypted communication between
the redis nodes.

The intermediate container is managed by paunch, so it shouldn't use
the container image tagged :pcmklatest. This tag is a intermediate
tag only meant to be consumed by pacemaker to implement container
update without service disruption. When used in paunch, it causes
the deployment to fail at step 2.

Configure redis_tls_proxy to use heat parameter ContainerRedisImage
instead. That is the image meant to be consumed by paunch containers.

Closes-Bug: 1839305

Change-Id: Id4bba3df475582fa3884e38d17ca66913da83657
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/89/675089/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/database/redis-pacemaker-puppet.yaml'],1,e29fa2361766d13c3deec7879ed824f8bfd21ea8,bug/1839305, image: {get_param: ContainerRedisImage}, image: *redis_image_pcmklatest,1,1
openstack%2Ftripleo-common~stable%2Frocky~I242f7bb718b08724da21cafa86d3e8853d0ff453,openstack/tripleo-common,stable/rocky,I242f7bb718b08724da21cafa86d3e8853d0ff453,Use internal endpoints for configuration in octavia nodes,MERGED,2019-08-06 08:06:28.000000000,2019-08-08 13:29:24.000000000,2019-08-08 13:29:24.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 08:06:28.000000000', 'files': ['playbooks/octavia-files.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/36fad5f7d8749e54168f0e731fd73d5a0b169483', 'message': 'Use internal endpoints for configuration in octavia nodes\n\nWhen running configuration steps for octavia in octavia nodes, use\ninternal endpoints since public endpoints may not be available due to\nnetwork topology (spine-leaf network + octavia in networkers).\n\nDepends-On: https://review.opendev.org/#/c/674749/\n\nCloses-Bug: #1835171\nChange-Id: I242f7bb718b08724da21cafa86d3e8853d0ff453\n(cherry picked from tripleo-ansible commit\n6deec581ac00b3901570f9f4e4768a266cea37e1)\n(cherry picked from commit fd44741029dc65d934d8c32b5d8fa5cbc70eefe4)\n'}]",0,674751,36fad5f7d8749e54168f0e731fd73d5a0b169483,8,3,1,29244,,,0,"Use internal endpoints for configuration in octavia nodes

When running configuration steps for octavia in octavia nodes, use
internal endpoints since public endpoints may not be available due to
network topology (spine-leaf network + octavia in networkers).

Depends-On: https://review.opendev.org/#/c/674749/

Closes-Bug: #1835171
Change-Id: I242f7bb718b08724da21cafa86d3e8853d0ff453
(cherry picked from tripleo-ansible commit
6deec581ac00b3901570f9f4e4768a266cea37e1)
(cherry picked from commit fd44741029dc65d934d8c32b5d8fa5cbc70eefe4)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/51/674751/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/octavia-files.yaml'],1,36fad5f7d8749e54168f0e731fd73d5a0b169483,bug/1835171," OS_AUTH_URL: ""{{ os_int_auth_url }}"" OS_INTERFACE: ""internal"" OS_ENDPOINT_TYPE: ""internal"" OS_AUTH_URL: ""{{ os_int_auth_url }}"" OS_INTERFACE: ""internal"" OS_ENDPOINT_TYPE: ""internal"""," OS_AUTH_URL: ""{{ os_auth_url }}"" OS_AUTH_URL: ""{{ os_auth_url }}""",6,2
openstack%2Ftripleo-heat-templates~stable%2Fstein~I0f38df69777340ebbdc5c419f121524dbc74cad7,openstack/tripleo-heat-templates,stable/stein,I0f38df69777340ebbdc5c419f121524dbc74cad7,Add missing update_serial key to compute roles,MERGED,2019-08-06 15:58:29.000000000,2019-08-08 13:29:23.000000000,2019-08-08 13:29:23.000000000,"[{'_account_id': 3153}, {'_account_id': 8042}, {'_account_id': 14985}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2019-08-06 15:58:29.000000000', 'files': ['roles/ComputeHCIOvsDpdk.yaml', 'roles/ComputeRBDEphemeral.yaml', 'roles/ComputeLocalEphemeral.yaml', 'tools/yaml-validate.py'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7b72488d2ef12d99524f6926fca0efe310ff453e', 'message': 'Add missing update_serial key to compute roles\n\nI missed this the changes from I4ee0110a6c2b9466d81e37e5df27f5f81a6eceb5 when\nrebasing I9f40a2a3561fcb1d1fec9d9c3c1f9cabaf02650c.\n\nAdd the missing key to the roles and add some validation to catch this.\n\nChange-Id: I0f38df69777340ebbdc5c419f121524dbc74cad7\nRelated-bug: #1831617\nImplements: blueprint nova-backend-per-role\n(cherry picked from commit c2977e3c00c08eca8d5f52f7fb9c61abdf0ef28f)\n'}]",0,674857,7b72488d2ef12d99524f6926fca0efe310ff453e,13,7,1,23811,,,0,"Add missing update_serial key to compute roles

I missed this the changes from I4ee0110a6c2b9466d81e37e5df27f5f81a6eceb5 when
rebasing I9f40a2a3561fcb1d1fec9d9c3c1f9cabaf02650c.

Add the missing key to the roles and add some validation to catch this.

Change-Id: I0f38df69777340ebbdc5c419f121524dbc74cad7
Related-bug: #1831617
Implements: blueprint nova-backend-per-role
(cherry picked from commit c2977e3c00c08eca8d5f52f7fb9c61abdf0ef28f)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/57/674857/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/ComputeHCIOvsDpdk.yaml', 'roles/ComputeRBDEphemeral.yaml', 'roles/ComputeLocalEphemeral.yaml', 'tools/yaml-validate.py']",4,7b72488d2ef12d99524f6926fca0efe310ff453e,stein," cmpt_us = cmpt_tpl[0].get('update_serial', None) tpl_us = role_tpl[0].get('update_serial', None) if 'OS::TripleO::Services::CephOSD' in role_services: if tpl_us not in (None, 1): print('ERROR: update_serial in {0} ({1}) ' 'is should be 1 as it includes CephOSD'.format( role_filename, tpl_us, cmpt_us)) return 1 elif cmpt_us is not None and tpl_us != cmpt_us: print('ERROR: update_serial in {0} ({1}) ' 'does not match roles/Compute.yaml {2}'.format( role_filename, tpl_us, cmpt_us)) return 1 return 0", return 0 ,24,1
openstack%2Fgovernance~master~I27131c648b65365098e3e533c1edfbe1877943ad,openstack/governance,master,I27131c648b65365098e3e533c1edfbe1877943ad,Resolution: Mandatory Repository Retirement,MERGED,2019-07-14 21:51:45.000000000,2019-08-08 13:28:26.000000000,2019-08-08 13:28:26.000000000,"[{'_account_id': 308}, {'_account_id': 841}, {'_account_id': 1004}, {'_account_id': 2472}, {'_account_id': 4146}, {'_account_id': 4257}, {'_account_id': 5263}, {'_account_id': 8556}, {'_account_id': 10607}, {'_account_id': 11655}, {'_account_id': 17068}, {'_account_id': 22348}, {'_account_id': 24162}, {'_account_id': 27068}]","[{'number': 1, 'created': '2019-07-14 21:51:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/8bec0075ae040d8bf691c5bde207908fb31dc28e', 'message': 'Resolution: Mandatory Repository Retirement\n\nSee the transcript of the 2019-07-11 TC meeting for background:\n\nhttp://eavesdrop.openstack.org/meetings/tc/2019/tc.2019-07-11-14.00.log.html#l-214\n\nChange-Id: I27131c648b65365098e3e533c1edfbe1877943ad\n'}, {'number': 2, 'created': '2019-07-14 22:35:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/d9a9bf03126b990cba4c7bcdbda162c94f596197', 'message': 'Resolution: Mandatory Repository Retirement\n\nSee the transcript of the 2019-07-11 TC meeting for background:\n\nhttp://eavesdrop.openstack.org/meetings/tc/2019/tc.2019-07-11-14.00.log.html#l-214\n\nCorresponding ML thread:\n\nhttp://lists.openstack.org/pipermail/openstack-discuss/2019-July/007749.html\n\nChange-Id: I27131c648b65365098e3e533c1edfbe1877943ad\n'}, {'number': 3, 'created': '2019-07-22 14:46:25.000000000', 'files': ['resolutions/20190711-mandatory-repository-retirement.rst'], 'web_link': 'https://opendev.org/openstack/governance/commit/57ab6aef3900690e9ac48b974be1065962358097', 'message': 'Resolution: Mandatory Repository Retirement\n\nSee the transcript of the 2019-07-11 TC meeting for background:\n\nhttp://eavesdrop.openstack.org/meetings/tc/2019/tc.2019-07-11-14.00.log.html#l-214\n\nCorresponding ML thread:\n\nhttp://lists.openstack.org/pipermail/openstack-discuss/2019-July/007749.html\n\nChange-Id: I27131c648b65365098e3e533c1edfbe1877943ad\n'}]",27,670741,57ab6aef3900690e9ac48b974be1065962358097,37,14,3,5263,,,0,"Resolution: Mandatory Repository Retirement

See the transcript of the 2019-07-11 TC meeting for background:

http://eavesdrop.openstack.org/meetings/tc/2019/tc.2019-07-11-14.00.log.html#l-214

Corresponding ML thread:

http://lists.openstack.org/pipermail/openstack-discuss/2019-July/007749.html

Change-Id: I27131c648b65365098e3e533c1edfbe1877943ad
",git fetch https://review.opendev.org/openstack/governance refs/changes/41/670741/1 && git format-patch -1 --stdout FETCH_HEAD,['resolutions/20190711-mandatory-repository-retirement.rst'],1,8bec0075ae040d8bf691c5bde207908fb31dc28e,formal-vote,"============================================ 2019-07-11 Mandatory Repository Retirement ============================================ With the 2019-03-22 resolution to :doc:`Namespace Unofficial Projects <20190322-namespace-unofficial-projects>`, only current or former official OpenStack deliverable repositories (or those managed by SIGs, working groups and other officially recognized bodies) remain within the ``openstack`` Git namespace prefix on OpenDev. Formerly official software which left OpenStack governance with the intent of continuing development outside it was in many cases subsequently abandoned in place by its authors, creating an attractive nuisance and unwitting surprise for source consumers who (in at least some cases) likely continued unaware that it was no longer supported by anyone at all. When OpenStack ceases development on a source code repository, OpenDev's recommended `retirement process <https://docs.openstack.org/infra/manual/drivers.html#retiring-a-project>`_ is followed to replace that repository's source code with a prominent ``README`` message indicating its new situation, abandons all open changes for it, and sets Gerrit to reject future change proposals for review. When projects choose to continue development for formerly official OpenStack deliverables outside OpenStack governance, no similar process exists to clarify to users that OpenStack is no longer responsible for these repositories. This problem is further complicated by OpenDev's use of Gitea and its automatic redirect feature, where simply renaming those projects to move them to a new Git prefix namespace leaves their old ``openstack`` URLs working for browsers and Git client operations so many existing users may never notice the transition. The solution to this problem is to follow the repository retirement process in ``openstack`` any time a deliverable repository is removed from current governance, regardless of whether its authors intend to continue development on it outside governance. OpenDev allows multiple repositories to have the same base names across different namespaces, so this does not mean a project has to change its new name. It does however mean that the repository must be forked into the new namespace, leaving behind its Gerrit reviews and not having its repository redirected in Gitea (the ``README`` file can certainly mention where to find continued development however). This forces existing consumers of the source code to take note of the change in governance, so they can be made aware OpenStack is no longer responsible for what is being developed there. Because this is a significant change in policy, it cannot easily be retroactively applied to old repositories which are no longer under OpenStack's governance (but the damage this would mitigate for them is probably already done anyway). To provide ample warning for any existing projects considering exiting OpenStack in the near future, only removals after the conclusion of the Train development cycle will be subject to the new mandatory retirement policy. Removals prior to the end of the Train cycle can be renamed to new namespaces in OpenDev (with redirects) per our previous de facto process, if maintainers prefer. ",,56,0
openstack%2Fcinder~master~Ifc4f816ae1a5e7d40775c9c8243bce8d43ac9f32,openstack/cinder,master,Ifc4f816ae1a5e7d40775c9c8243bce8d43ac9f32,Fix formatting issues in PowerMax docs,MERGED,2019-05-30 16:39:35.000000000,2019-08-08 13:19:34.000000000,2019-08-08 13:19:33.000000000,"[{'_account_id': 5314}, {'_account_id': 8037}, {'_account_id': 12017}, {'_account_id': 12032}, {'_account_id': 12033}, {'_account_id': 12369}, {'_account_id': 14384}, {'_account_id': 15296}, {'_account_id': 15386}, {'_account_id': 15941}, {'_account_id': 16834}, {'_account_id': 19933}, {'_account_id': 21863}, {'_account_id': 21884}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 23613}, {'_account_id': 24814}, {'_account_id': 24815}, {'_account_id': 24921}, {'_account_id': 26537}, {'_account_id': 27615}, {'_account_id': 28801}, {'_account_id': 29716}, {'_account_id': 30402}, {'_account_id': 30413}]","[{'number': 1, 'created': '2019-05-30 16:39:35.000000000', 'files': ['doc/source/configuration/block-storage/drivers/dell-emc-powermax-driver.rst'], 'web_link': 'https://opendev.org/openstack/cinder/commit/1ca347c1159e2f9fd28ea7c91a601de4d07a9c59', 'message': 'Fix formatting issues in PowerMax docs\n\nIndentation was causing some sections to be block quoted or included in\nprevious code blocks.\n\nChange-Id: Ifc4f816ae1a5e7d40775c9c8243bce8d43ac9f32\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,662257,1ca347c1159e2f9fd28ea7c91a601de4d07a9c59,48,26,1,11904,,,0,"Fix formatting issues in PowerMax docs

Indentation was causing some sections to be block quoted or included in
previous code blocks.

Change-Id: Ifc4f816ae1a5e7d40775c9c8243bce8d43ac9f32
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/cinder refs/changes/57/662257/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/configuration/block-storage/drivers/dell-emc-powermax-driver.rst'],1,1ca347c1159e2f9fd28ea7c91a601de4d07a9c59,doc_additions,"Once the ``cinder.conf`` has been updated, :command:`openstack` commands need to be issued in order to create and associate OpenStack volume types with the declared ``volume_backend_names``. Additionally, each volume type will need an associated ``pool_name`` - an extra specification indicating the service level/ workload combination to be used for that volume type. There is also the option to assign a port group to a volume type by setting the ``storagetype:portgroupname`` extra specification. .. note:: It is possible to create as many volume types as the number of Service Level and Workload(available) combination for provisioning volumes. The pool_name is the additional property which has to be set and is of the format: ``<ServiceLevel>+<Workload>+<SRP>+<Array ID>``. This can be obtained from the output of the ``cinder get-pools--detail``. Workload is NONE for PowerMax or any All Flash with PowerMax OS (5978) or greater. .. code-block:: console $ openstack volume type create POWERMAX_ISCSI_SILVER_OLTP $ openstack volume type set --property volume_backend_name=ISCSI_backend \ --property pool_name=Silver+OLTP+SRP_1+000123456789 \ --property storagetype:portgroupname=OS-PG2 \ POWERMAX_ISCSI_SILVER_OLTP $ openstack volume type create POWERMAX_FC_DIAMOND_DSS $ openstack volume type set --property volume_backend_name=FC_backend \ --property pool_name=Diamond+DSS+SRP_1+000123456789 \ --property storagetype:portgroupname=OS-PG1 \ POWERMAX_FC_DIAMOND_DSS By issuing these commands, the Block Storage volume type ``POWERMAX_ISCSI_SILVER_OLTP`` is associated with the ``ISCSI_backend``, a Silver Service Level, and an OLTP workload. The type ``POWERMAX_FC_DIAMOND_DSS`` is associated with the ``FC_backend``, a Diamond Service Level, and a DSS workload. The ``ServiceLevel`` manages the underlying storage to provide expected performance. Setting the ``ServiceLevel`` to ``None`` means that non-FAST managed storage groups will be created instead (storage groups not associated with any service level). If ``ServiceLevel`` is ``None`` then ``Workload`` must be ``None``. .. code-block:: console openstack volume type set --property pool_name=None+None+SRP_1+000123456789 When a ``Workload`` is added, the latency range is reduced due to the added information. Setting the ``Workload`` to ``None`` means the latency range will be the widest for its Service Level type. Please note that you cannot set a Workload without a Service Level. .. code-block:: console openstack volume type set --property pool_name=Diamond+None+SRP_1+000123456789 .. note:: PowerMax and Hybrid support Optimized, Diamond, Platinum, Gold, Silver, Bronze, and NONE service levels. VMAX All Flash supports Diamond and None. Hybrid and All Flash support DSS_REP, DSS, OLTP_REP, OLTP, and None workloads, the latter up until ucode 5977. There is no support for workloads in PowerMax OS (5978) or greater. successfully. Human intervention will also be required to failover from R1 .. note:: ``replication_device`` key value pairs will need to be on the same line (separated by commas) in cinder.conf. They are displayed on separated lines above for readiblity."," Once the ``cinder.conf`` has been updated, :command:`openstack` commands need to be issued in order to create and associate OpenStack volume types with the declared ``volume_backend_names``. Additionally, each volume type will need an associated ``pool_name`` - an extra specification indicating the service level/ workload combination to be used for that volume type. There is also the option to assign a port group to a volume type by setting the ``storagetype:portgroupname`` extra specification. .. note:: It is possible to create as many volume types as the number of Service Level and Workload(available) combination for provisioning volumes. The pool_name is the additional property which has to be set and is of the format: ``<ServiceLevel>+<Workload>+<SRP>+<Array ID>``. This can be obtained from the output of the ``cinder get-pools--detail``. Workload is NONE for PowerMax or any All Flash with PowerMax OS (5978) or greater. .. code-block:: console $ openstack volume type create POWERMAX_ISCSI_SILVER_OLTP $ openstack volume type set --property volume_backend_name=ISCSI_backend \ --property pool_name=Silver+OLTP+SRP_1+000123456789 \ --property storagetype:portgroupname=OS-PG2 \ POWERMAX_ISCSI_SILVER_OLTP $ openstack volume type create POWERMAX_FC_DIAMOND_DSS $ openstack volume type set --property volume_backend_name=FC_backend \ --property pool_name=Diamond+DSS+SRP_1+000123456789 \ --property storagetype:portgroupname=OS-PG1 \ POWERMAX_FC_DIAMOND_DSS By issuing these commands, the Block Storage volume type ``POWERMAX_ISCSI_SILVER_OLTP`` is associated with the ``ISCSI_backend``, a Silver Service Level, and an OLTP workload. The type ``POWERMAX_FC_DIAMOND_DSS`` is associated with the ``FC_backend``, a Diamond Service Level, and a DSS workload. The ``ServiceLevel`` manages the underlying storage to provide expected performance. Setting the ``ServiceLevel`` to ``None`` means that non-FAST managed storage groups will be created instead (storage groups not associated with any service level). If ``ServiceLevel`` is ``None`` then ``Workload`` must be ``None``. .. code-block:: console openstack volume type set --property pool_name=None+None+SRP_1+000123456789 When a ``Workload`` is added, the latency range is reduced due to the added information. Setting the ``Workload`` to ``None`` means the latency range will be the widest for its Service Level type. Please note that you cannot set a Workload without a Service Level. .. code-block:: console openstack volume type set --property pool_name=Diamond+None+SRP_1+000123456789 .. note:: PowerMax and Hybrid support Optimized, Diamond, Platinum, Gold, Silver, Bronze, and NONE service levels. VMAX All Flash supports Diamond and None. Hybrid and All Flash support DSS_REP, DSS, OLTP_REP, OLTP, and None workloads, the latter up until ucode 5977. There is no support for workloads in PowerMax OS (5978) or greater. successfully, human intervention will also be required to failover from R1 .. note:: ``replication_device`` key value pairs will need to be on the same line (separated by commas) in cinder.conf. They are displayed on separated lines above for readiblity.",56,56
openstack%2Fplacement~master~Ic0bf2ab666dab546dd7b03955473c246fd0f380a,openstack/placement,master,Ic0bf2ab666dab546dd7b03955473c246fd0f380a,Add apache benchmark (ab) to end of perfload jobs,MERGED,2019-07-30 14:35:48.000000000,2019-08-08 13:19:32.000000000,2019-08-08 13:19:32.000000000,"[{'_account_id': 9708}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 22348}, {'_account_id': 25625}]","[{'number': 1, 'created': '2019-07-30 14:35:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/a4616e5f8b5b881541f4a3f32aa71d0c2076ddfe', 'message': ""Add apache bencmark (ab) to end of perfload jobs\n\nStart the process of reporting some concurrency numbers by including\na 500 x 10 'ab' run against the query URL used in each perfload job.\n\nThere's duplication removal that could be done here, but we leave\nthat until we've determined if this is working well.\n\nChange-Id: Ic0bf2ab666dab546dd7b03955473c246fd0f380a\n""}, {'number': 2, 'created': '2019-07-30 16:23:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/6c86565874cba0945e99cd1bde6181f51c2eaf61', 'message': ""Add apache benchmark (ab) to end of perfload jobs\n\nStart the process of reporting some concurrency numbers by including\na 500 x 10 'ab' run against the query URL used in each perfload job.\n\nThere's duplication removal that could be done here, but we leave\nthat until we've determined if this is working well.\n\nChange-Id: Ic0bf2ab666dab546dd7b03955473c246fd0f380a\n""}, {'number': 3, 'created': '2019-07-31 09:03:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/5b831ecc0d6c70aef2f51a18d8b2d9cfcf1c97ca', 'message': ""Add apache benchmark (ab) to end of perfload jobs\n\nStart the process of reporting some concurrency numbers by including\na 500 x 10 'ab' run against the query URL used in each perfload job.\n\nThere's duplication removal that could be done here, but we leave\nthat until we've determined if this is working well.\n\nThe PLACEMENT_URL is updated to use 127.0.0.1 instead of localhost;\nab will attempt to use the IPV6 version of localhost if that's the\ncase, and we've not bound the placement server to that interface.\n\nChange-Id: Ic0bf2ab666dab546dd7b03955473c246fd0f380a\n""}, {'number': 4, 'created': '2019-07-31 10:19:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/74656aea16fa0fc6aa23a8466c439fd2e613a35c', 'message': ""Add apache benchmark (ab) to end of perfload jobs\n\nStart the process of reporting some concurrency numbers by including\na 500 x 10 'ab' run against the query URL used in each perfload job.\n\nThere's duplication removal that could be done here, but we leave\nthat until we've determined if this is working well.\n\nThe PLACEMENT_URL is updated to use 127.0.0.1 instead of localhost;\nab will attempt to use the IPV6 version of localhost if that's the\ncase, and we've not bound the placement server to that interface.\n\nChange-Id: Ic0bf2ab666dab546dd7b03955473c246fd0f380a\n""}, {'number': 5, 'created': '2019-07-31 14:13:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/fe36b9778b31cf09a7d58c40769154341dffd5d8', 'message': ""Add apache benchmark (ab) to end of perfload jobs\n\nStart the process of reporting some concurrency numbers by including\na 500 x 10 'ab' run against the query URL used in each perfload job.\n\nThere's duplication removal that could be done here, but we leave\nthat until we've determined if this is working well.\n\nThe PLACEMENT_URL is updated to use 127.0.0.1 instead of localhost;\nab will attempt to use the IPV6 version of localhost if that's the\ncase, and we've not bound the placement server to that interface.\n\nThe timeout on the placement-nested-perfload job has been raised to\n1 hour as the default 30 minutes is leading to a timeout. If that's\nstill not enough we'll explore lowering concurrency.\n\nWe will quite likely need to adapt the mysql configuration if we\nintend to continue down this road.\n\nChange-Id: Ic0bf2ab666dab546dd7b03955473c246fd0f380a\n""}, {'number': 6, 'created': '2019-08-06 08:19:01.000000000', 'files': ['gate/perfload-server.sh', '.zuul.yaml', 'gate/perfload-nested-runner.sh', 'gate/perfload-runner.sh'], 'web_link': 'https://opendev.org/openstack/placement/commit/ed030851874c1b747d7a4e44233fccdb170bb308', 'message': ""Add apache benchmark (ab) to end of perfload jobs\n\nStart the process of reporting some concurrency numbers by including\na 500 x 10 'ab' run against the query URL used in each perfload job.\n\nThere's duplication removal that could be done here, but we leave\nthat until we've determined if this is working well.\n\nThe PLACEMENT_URL is updated to use 127.0.0.1 instead of localhost;\nab will attempt to use the IPV6 version of localhost if that's the\ncase, and we've not bound the placement server to that interface.\n\nThe timeout on the placement-nested-perfload job has been raised to\n1 hour as the default 30 minutes is leading to a timeout. If that's\nstill not enough we'll explore lowering concurrency.\n\nWe will quite likely need to adapt the mysql configuration if we\nintend to continue down this road.\n\nChange-Id: Ic0bf2ab666dab546dd7b03955473c246fd0f380a\n""}]",1,673540,ed030851874c1b747d7a4e44233fccdb170bb308,25,5,6,11564,,,0,"Add apache benchmark (ab) to end of perfload jobs

Start the process of reporting some concurrency numbers by including
a 500 x 10 'ab' run against the query URL used in each perfload job.

There's duplication removal that could be done here, but we leave
that until we've determined if this is working well.

The PLACEMENT_URL is updated to use 127.0.0.1 instead of localhost;
ab will attempt to use the IPV6 version of localhost if that's the
case, and we've not bound the placement server to that interface.

The timeout on the placement-nested-perfload job has been raised to
1 hour as the default 30 minutes is leading to a timeout. If that's
still not enough we'll explore lowering concurrency.

We will quite likely need to adapt the mysql configuration if we
intend to continue down this road.

Change-Id: Ic0bf2ab666dab546dd7b03955473c246fd0f380a
",git fetch https://review.opendev.org/openstack/placement refs/changes/40/673540/6 && git format-patch -1 --stdout FETCH_HEAD,"['gate/perfload-server.sh', 'gate/perfload-nested-runner.sh', 'gate/perfload-runner.sh']",3,a4616e5f8b5b881541f4a3f32aa71d0c2076ddfe,story/2005443,"# Apache Benchmark Concurrency AB_CONCURRENT=10 # Apache Benchmark Total Requests AB_COUNT=500 function ab_bench { ( echo ""#### Running apache benchmark"" ab -c $AB_CONCURRENT -n $AB_COUNT -H 'x-auth-token: admin' -H 'openstack-api-version: placement latest' ""${PLACEMENT_URL}/allocation_candidates?${PLACEMENT_QUERY}"" ) 2>&1 | tee -a $LOG } ab_bench",,27,1
openstack%2Fdevstack~stable%2Frocky~Ia703af54a7131843fc2b0ae34efcfe0f5507acbf,openstack/devstack,stable/rocky,Ia703af54a7131843fc2b0ae34efcfe0f5507acbf,Fix quoting for devstack_localrc arguments,MERGED,2019-08-05 12:29:41.000000000,2019-08-08 13:19:31.000000000,2019-08-08 13:19:31.000000000,"[{'_account_id': 5803}, {'_account_id': 7118}, {'_account_id': 10459}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-05 12:29:41.000000000', 'files': ['roles/write-devstack-local-conf/library/devstack_local_conf.py', 'roles/write-devstack-local-conf/library/test.py'], 'web_link': 'https://opendev.org/openstack/devstack/commit/11c5aa83281dffa035b367da637346df3548bcbf', 'message': 'Fix quoting for devstack_localrc arguments\n\nThis is a combination of the following commits:\n- ""Quote devstack_localrc arguments""\n  https://review.opendev.org/636078\n  Ia63a53d745dfea7262bcdb5d46425f431c3ccfe5\n- ""Fix double quoting issue when writing localconf""\n  https://review.opendev.org/648951\n  I92146e04731efc6dcc632ae6c3a7c374e783cdba\n\nThey have been merged together because the first commit introduces\na bug, and it looks a bit pointless to deliberately introduce\na potentially breaking change on the process of backporting a fix.\n\nCo-Authored-By: Ian Wienand <iwienand@redhat.com>\nCo-Authored-By: Jens Harbott <j.harbott@x-ion.de>\n\nChange-Id: Ia703af54a7131843fc2b0ae34efcfe0f5507acbf\n(cherry picked from commit 2e1393621a4d4321e5437b63d6ac97011f089c45)\n'}]",0,674590,11c5aa83281dffa035b367da637346df3548bcbf,11,4,1,10459,,,0,"Fix quoting for devstack_localrc arguments

This is a combination of the following commits:
- ""Quote devstack_localrc arguments""
  https://review.opendev.org/636078
  Ia63a53d745dfea7262bcdb5d46425f431c3ccfe5
- ""Fix double quoting issue when writing localconf""
  https://review.opendev.org/648951
  I92146e04731efc6dcc632ae6c3a7c374e783cdba

They have been merged together because the first commit introduces
a bug, and it looks a bit pointless to deliberately introduce
a potentially breaking change on the process of backporting a fix.

Co-Authored-By: Ian Wienand <iwienand@redhat.com>
Co-Authored-By: Jens Harbott <j.harbott@x-ion.de>

Change-Id: Ia703af54a7131843fc2b0ae34efcfe0f5507acbf
(cherry picked from commit 2e1393621a4d4321e5437b63d6ac97011f089c45)
",git fetch https://review.opendev.org/openstack/devstack refs/changes/90/674590/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/write-devstack-local-conf/library/devstack_local_conf.py', 'roles/write-devstack-local-conf/library/test.py']",2,11c5aa83281dffa035b367da637346df3548bcbf,," self.assertEqual('""oslo.db""', lfg) def test_avoid_double_quote(self): ""Test that there a no duplicated quotes"" localrc = {'TESTVAR': '""quoted value""'} p = dict(localrc=localrc, base_services=[], base_dir='./test', path=os.path.join(self.tmpdir, 'test.local.conf'), projects={}) lc = self._init_localconf(p) lc.write(p['path']) testvar = None with open(p['path']) as f: for line in f: if line.startswith('TESTVAR'): testvar = line.strip().split('=')[1] self.assertEqual('""quoted value""', testvar) self.assertEqual('""someplugin""', tp)"," self.assertEqual('oslo.db', lfg) self.assertEqual('someplugin', tp)",25,3
openstack%2Fgovernance~master~I1cb1d9b66a8c7278ff481e6c25239ea8fd339eab,openstack/governance,master,I1cb1d9b66a8c7278ff481e6c25239ea8fd339eab,Add URL to rpm-packaging,MERGED,2019-07-31 14:44:11.000000000,2019-08-08 13:08:22.000000000,2019-08-08 13:08:22.000000000,"[{'_account_id': 308}, {'_account_id': 1004}, {'_account_id': 2472}, {'_account_id': 4257}, {'_account_id': 7102}, {'_account_id': 8482}, {'_account_id': 10607}, {'_account_id': 17068}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-31 14:44:11.000000000', 'files': ['reference/projects.yaml'], 'web_link': 'https://opendev.org/openstack/governance/commit/f2d9e4bd454a77342cf1f91c49a004f254bc68ad', 'message': ""Add URL to rpm-packaging\n\nRpm-packaging is the only project to not have a url.\n\nWithout this patch, it will be impossible to enforce a schema\nvalidation on the presence of an URL.\n\nThis is a problem as I believe that we should validate the\npresence of an URL, because a link is one of the best ways to\nget started with a problem.\n\nThis fixes it by providing the rpm-packaging landing page,\npointing to each of the project's source code and documentation.\n\nChange-Id: I1cb1d9b66a8c7278ff481e6c25239ea8fd339eab\n""}]",0,673837,f2d9e4bd454a77342cf1f91c49a004f254bc68ad,16,9,1,17068,,,0,"Add URL to rpm-packaging

Rpm-packaging is the only project to not have a url.

Without this patch, it will be impossible to enforce a schema
validation on the presence of an URL.

This is a problem as I believe that we should validate the
presence of an URL, because a link is one of the best ways to
get started with a problem.

This fixes it by providing the rpm-packaging landing page,
pointing to each of the project's source code and documentation.

Change-Id: I1cb1d9b66a8c7278ff481e6c25239ea8fd339eab
",git fetch https://review.opendev.org/openstack/governance refs/changes/37/673837/1 && git format-patch -1 --stdout FETCH_HEAD,['reference/projects.yaml'],1,f2d9e4bd454a77342cf1f91c49a004f254bc68ad,project-update, url: https://wiki.openstack.org/wiki/Rpm-packaging,,1,0
openstack%2Ftripleo-quickstart-extras~master~I0417beb7f2adb06545b740a2beb829ba1a2e7c4b,openstack/tripleo-quickstart-extras,master,I0417beb7f2adb06545b740a2beb829ba1a2e7c4b,Display errors when validations failed,ABANDONED,2018-09-12 11:14:51.000000000,2019-08-08 13:07:49.000000000,,"[{'_account_id': 10969}, {'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2018-09-12 11:14:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/d5fcc0484a0a58efdba16296d1a44375be4ba1a8', 'message': 'Display errors when validations failed\n\nThis patch displays stderr instead of stdout when validations failed through\nMistral framework.\n\nChange-Id: I0417beb7f2adb06545b740a2beb829ba1a2e7c4b\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}, {'number': 2, 'created': '2018-09-19 09:34:20.000000000', 'files': ['roles/tripleo-validations/templates/run-tripleo-validations.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/afd6f4357560f0cf15dcb7e19b177b3b0a5ff290', 'message': 'Display errors when validations failed\n\nThis patch displays stderr instead of stdout when validations failed through\nMistral framework.\n\nChange-Id: I0417beb7f2adb06545b740a2beb829ba1a2e7c4b\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n'}]",0,602005,afd6f4357560f0cf15dcb7e19b177b3b0a5ff290,14,5,2,11491,,,0,"Display errors when validations failed

This patch displays stderr instead of stdout when validations failed through
Mistral framework.

Change-Id: I0417beb7f2adb06545b740a2beb829ba1a2e7c4b
Signed-off-by: Gael Chamoulaud <gchamoul@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/05/602005/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/tripleo-validations/templates/run-tripleo-validations.sh.j2'],1,d5fcc0484a0a58efdba16296d1a44375be4ba1a8,," mistral execution-get-output ""$ID"" | jq .stderr -r 2>&1 | tee -a {{ failed_validations_log }}"," mistral execution-get-output ""$ID"" | jq .stdout -r 2>&1 | tee -a {{ failed_validations_log }}",1,1
openstack%2Ftripleo-ci~master~I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e,openstack/tripleo-ci,master,I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e,Run upgrades-stein job in CI repos on master,ABANDONED,2019-07-16 14:45:31.000000000,2019-08-08 13:06:29.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-16 14:45:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ddac93e2e6e57c36d95bcc30e1d7a7d14d7f7e07', 'message': 'Run upgrades-stein job in CI repos on master\n\nupgrade-stein job will run only on rocky/stein branches, but we\nneed to test it on CI repos that have only master. Define a new\njob for such tests, which will run on CI repos only and master.\nChange-Id: I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e\n'}, {'number': 2, 'created': '2019-07-16 15:03:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/218d9f46ac336bda5e44fc609e760e2baae042b7', 'message': 'Run upgrades-stein job in CI repos on master\n\nupgrade-stein job will run only on rocky/stein branches, but we\nneed to test it on CI repos that have only master. Define a new\njob for such tests, which will run on CI repos only and master.\nChange-Id: I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e\n'}, {'number': 3, 'created': '2019-07-17 06:24:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/f85dcf0a24f7612198590e34f4987af37d680d8e', 'message': 'Run upgrades-stein job in CI repos on master\n\nupgrade-stein job will run only on rocky/stein branches, but we\nneed to test it on CI repos that have only master. Define a new\njob for such tests, which will run on CI repos only and master.\nChange-Id: I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e\n'}, {'number': 4, 'created': '2019-07-18 09:43:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ad72469bf38f418ed27a59a9a43f0907cb0d6a3d', 'message': 'Run upgrades-stein job in CI repos on master\n\nupgrade-stein job will run only on rocky/stein branches, but we\nneed to test it on CI repos that have only master. Define a new\njob for such tests, which will run on CI repos only and master.\nChange-Id: I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e\n'}, {'number': 5, 'created': '2019-07-18 09:51:00.000000000', 'files': ['zuul.d/standalone-jobs.yaml', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/7b937a7dfb2937d52bc7565bc046cbc543f6f55a', 'message': 'Run upgrades-stein job in CI repos on master\n\nupgrade-stein job will run only on rocky/stein branches, but we\nneed to test it on CI repos that have only master. Define a new\njob for such tests, which will run on CI repos only and master.\nChange-Id: I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e\n'}]",0,671055,7b937a7dfb2937d52bc7565bc046cbc543f6f55a,12,3,5,10969,,,0,"Run upgrades-stein job in CI repos on master

upgrade-stein job will run only on rocky/stein branches, but we
need to test it on CI repos that have only master. Define a new
job for such tests, which will run on CI repos only and master.
Change-Id: I32f5e8d85b15dec1400b9ca71df2fda6124bdf5e
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/55/671055/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/standalone-jobs.yaml', 'zuul.d/layout.yaml']",2,ddac93e2e6e57c36d95bcc30e1d7a7d14d7f7e07,st, - tripleo-ci-centos-7-standalone-upgrade-stein-ci - tripleo-ci-centos-7-standalone-upgrade-stein-ci, - tripleo-ci-centos-7-standalone-upgrade-stein: branches: master - tripleo-ci-centos-7-standalone-upgrade-stein: branches: master,8,4
openstack%2Ftripleo-ci~master~I74ad1acbc2054889c50ea85db2b88711b96a47c8,openstack/tripleo-ci,master,I74ad1acbc2054889c50ea85db2b88711b96a47c8,Add /var/lib/ironic-inspector to logs collection,ABANDONED,2019-06-06 09:27:14.000000000,2019-08-08 13:06:08.000000000,,"[{'_account_id': 8449}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-06-06 09:27:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ad81b5ee592dcc4b5fdeee8cbf6f10e898ac97df', 'message': 'WIP: add /var/lib/ironic-inspector to logs collection\n\nChange-Id: I74ad1acbc2054889c50ea85db2b88711b96a47c8\n'}, {'number': 2, 'created': '2019-06-11 15:16:08.000000000', 'files': ['toci-quickstart/config/collect-logs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/9dd21175f0c809aa10a4f05c7bd198f0536a74cc', 'message': 'Add /var/lib/ironic-inspector to logs collection\n\nChange-Id: I74ad1acbc2054889c50ea85db2b88711b96a47c8\n'}]",0,663558,9dd21175f0c809aa10a4f05c7bd198f0536a74cc,10,4,2,10969,,,0,"Add /var/lib/ironic-inspector to logs collection

Change-Id: I74ad1acbc2054889c50ea85db2b88711b96a47c8
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/58/663558/2 && git format-patch -1 --stdout FETCH_HEAD,['toci-quickstart/config/collect-logs.yml'],1,ad81b5ee592dcc4b5fdeee8cbf6f10e898ac97df,, - /var/lib/ironic-inspector/,,1,0
openstack%2Ftripleo-common~master~I3814d839739b230b00bcf83efe1aeecad67cc021,openstack/tripleo-common,master,I3814d839739b230b00bcf83efe1aeecad67cc021,DNM: test tripleo-ansible,ABANDONED,2019-07-11 10:47:57.000000000,2019-08-08 13:05:52.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-11 10:47:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/7cae7e8a5ab148761cf79f789ab2e3e991eafad6', 'message': 'DNM: test tripleo-ansible\n\nDepends-On: https://review.opendev.org/#/c/670272/\nChange-Id: I3814d839739b230b00bcf83efe1aeecad67cc021\n'}, {'number': 2, 'created': '2019-07-12 04:07:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/d82b6323eb761c16dd83ac0100b79e67327a385b', 'message': 'DNM: test tripleo-ansible\n\nDepends-On: https://review.opendev.org/#/c/670319/\nChange-Id: I3814d839739b230b00bcf83efe1aeecad67cc021\n'}, {'number': 3, 'created': '2019-07-13 09:12:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/83ffc0a3c61e1f7a2744dd7ca760feb7a65e6db5', 'message': 'DNM: test tripleo-ansible\n\nDepends-On: https://review.opendev.org/#/c/670689/\nChange-Id: I3814d839739b230b00bcf83efe1aeecad67cc021\n'}, {'number': 4, 'created': '2019-07-15 09:11:15.000000000', 'files': ['tripleo_common/actions/ansible.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/6ac07d722a8965b6d4d6b910791b3ce52eab9931', 'message': 'DNM: test tripleo-ansible\n\nDepends-On: https://review.opendev.org/#/c/670796/\nChange-Id: I3814d839739b230b00bcf83efe1aeecad67cc021\n'}]",0,670276,6ac07d722a8965b6d4d6b910791b3ce52eab9931,16,3,4,10969,,,0,"DNM: test tripleo-ansible

Depends-On: https://review.opendev.org/#/c/670796/
Change-Id: I3814d839739b230b00bcf83efe1aeecad67cc021
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/76/670276/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/actions/ansible.py'],1,7cae7e8a5ab148761cf79f789ab2e3e991eafad6,,# test???,,1,0
openstack%2Ftripleo-heat-templates~master~If2ae9f802892ff2bfcd7e200092477a5240d395e,openstack/tripleo-heat-templates,master,If2ae9f802892ff2bfcd7e200092477a5240d395e,DNM: login-defs in 004 standalone,ABANDONED,2019-07-10 11:07:12.000000000,2019-08-08 13:05:44.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-10 11:07:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7ed344b285bdfdd9206988b75096eee5aac7a1a6', 'message': 'DNM: login-defs in 004 standalone\n\nChange-Id: If2ae9f802892ff2bfcd7e200092477a5240d395e\n'}, {'number': 2, 'created': '2019-07-11 08:39:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/01a12733ae75848a61bff1ccab2b15878a1b48b4', 'message': 'DNM: login-defs in 004 standalone\n\nChange-Id: If2ae9f802892ff2bfcd7e200092477a5240d395e\n'}, {'number': 3, 'created': '2019-07-12 12:40:51.000000000', 'files': ['ci/environments/scenario004-standalone.yaml', 'deployment/login-defs/login-defs-baremetal-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/11778c59c7c6c52b179248b2c576d9aebf641b9f', 'message': 'DNM: login-defs in 004 standalone\n\nChange-Id: If2ae9f802892ff2bfcd7e200092477a5240d395e\n'}]",0,670034,11778c59c7c6c52b179248b2c576d9aebf641b9f,10,2,3,10969,,,0,"DNM: login-defs in 004 standalone

Change-Id: If2ae9f802892ff2bfcd7e200092477a5240d395e
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/34/670034/1 && git format-patch -1 --stdout FETCH_HEAD,['ci/environments/scenario004-standalone.yaml'],1,7ed344b285bdfdd9206988b75096eee5aac7a1a6,670034, OS::TripleO::Services::LoginDefs: ../../deployment/login-defs/login-defs-baremetal-puppet.yaml,,1,0
openstack%2Ftripleo-ci~master~I4e9edfe731de36f385d49dc4de340ca07aebaa8f,openstack/tripleo-ci,master,I4e9edfe731de36f385d49dc4de340ca07aebaa8f,DNM: try mitogen for logs,ABANDONED,2019-05-26 15:06:14.000000000,2019-08-08 13:03:22.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-05-26 15:06:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/5aa9b909fe7d55ecf28d8e0af19a643fd2276206', 'message': 'DNM: try mitogen for logs\n\nChange-Id: I4e9edfe731de36f385d49dc4de340ca07aebaa8f\n'}, {'number': 2, 'created': '2019-05-26 15:07:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/00bc0849fa391b9cb9e88f3236e5014c587c94e3', 'message': 'DNM: try mitogen for logs\n\nChange-Id: I4e9edfe731de36f385d49dc4de340ca07aebaa8f\n'}, {'number': 3, 'created': '2019-05-26 21:43:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/8c9fbcdbd7424551219af085cbc645a876631b0a', 'message': 'DNM: try mitogen for logs\n\nChange-Id: I4e9edfe731de36f385d49dc4de340ca07aebaa8f\n'}, {'number': 4, 'created': '2019-05-27 22:23:57.000000000', 'files': ['roles/run-test/templates/oooq_common_functions.sh.j2', 'roles/run-test/templates/toci_quickstart.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/111f2d8ff4e3d752d6ab7dd72c1abdcad10fabf9', 'message': 'DNM: try mitogen for logs\n\nChange-Id: I4e9edfe731de36f385d49dc4de340ca07aebaa8f\n'}]",0,661488,111f2d8ff4e3d752d6ab7dd72c1abdcad10fabf9,11,2,4,10969,,,0,"DNM: try mitogen for logs

Change-Id: I4e9edfe731de36f385d49dc4de340ca07aebaa8f
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/88/661488/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/run-test/templates/oooq_common_functions.sh.j2'],1,5aa9b909fe7d55ecf28d8e0af19a643fd2276206,speedlogs,$LOCAL_WORKING_DIR/bin/pip install ansible<2.8 mitogen cat <EOF>$ANSIBLE_CONFIG [defaults] command_warnings = False retry_files_enabled = False callback_whitelist = profile_tasks host_key_checking = False gathering = smart fact_caching = jsonfile fact_caching_connection = $VIRTUAL_ENV/ansible_facts_cache fact_caching_timeout = 0 stdout_callback = debug strategy = mitogen_linear # Attempt to load custom modules whether it's installed system-wide or from a virtual environment callback_plugins = /usr/lib/python2.7/site-packages/ara/plugins/callbacks:$VIRTUAL_ENV/lib/python2.7/site-packages/ara/plugins/callbacks:/usr/local/lib/python2.7/dist-packages/ara/plugins/callbacks test_plugins = /usr/lib/python2.7/site-packages/tripleo-quickstart/test_plugins:$VIRTUAL_ENV/usr/local/share/tripleo-quickstart/test_plugins:test_plugins library = /usr/lib/python2.7/site-packages/tripleo-quickstart/library:$VIRTUAL_ENV/usr/local/share/tripleo-quickstart/library:library roles_path = roles:$VIRTUAL_ENV/usr/local/share/tripleo-quickstart/roles:$VIRTUAL_ENV/usr/local/share/ansible/roles:$VIRTUAL_ENV/usr/local/share/opstools-ansible/roles action_plugins = /usr/share/ansible/plugins/action:$VIRTUAL_ENV/usr/share/ansible/plugins/action strategy_plugins = /usr/lib/python2.7/site-packages/ansible_mitogen/plugins/strategy:$VIRTUAL_ENV/lib/python2.7/site-packages/ansible_mitogen/plugins/strategy [ssh_connection] pipelining = True control_path = %(directory)s/%%h-%%r ssh_args = -o ControlMaster=auto -o ControlPersist=270s -o ServerAliveInterval=30 -o GSSAPIAuthentication=no retries = 3 EOF ,,30,0
openstack%2Ftripleo-ci~master~I28efefd1a23b9ffc0001c69ad7de9782bd611af6,openstack/tripleo-ci,master,I28efefd1a23b9ffc0001c69ad7de9782bd611af6,DNM: no verbosity in logs,ABANDONED,2019-05-21 13:21:28.000000000,2019-08-08 13:03:19.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-05-21 13:21:28.000000000', 'files': ['roles/run-test/templates/toci_quickstart.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/3ef07a107fd9a12b01248456f49d05cb71075db1', 'message': 'DNM: no verbosity in logs\n\nChange-Id: I28efefd1a23b9ffc0001c69ad7de9782bd611af6\n'}]",0,660382,3ef07a107fd9a12b01248456f49d05cb71075db1,4,2,1,10969,,,0,"DNM: no verbosity in logs

Change-Id: I28efefd1a23b9ffc0001c69ad7de9782bd611af6
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/82/660382/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/run-test/templates/toci_quickstart.sh.j2'],1,3ef07a107fd9a12b01248456f49d05cb71075db1,noverbose,, -vvvv \,0,1
openstack%2Ftripleo-heat-templates~master~I01ca6fe6c55af8bd00644ca2e468e0f9aef0291c,openstack/tripleo-heat-templates,master,I01ca6fe6c55af8bd00644ca2e468e0f9aef0291c,DNM: test oooq mitogen on sa jobs,ABANDONED,2019-05-21 13:07:36.000000000,2019-08-08 13:03:16.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-05-21 13:07:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f2858f8c10135cac0d607f912a59a849789e9e14', 'message': 'DNM: test oooq mitogen on sa jobs\n\nChange-Id: I01ca6fe6c55af8bd00644ca2e468e0f9aef0291c\nDepends-On: https://review.opendev.org/#/c/659906/\n'}, {'number': 2, 'created': '2019-05-26 21:48:53.000000000', 'files': ['ci/environments/scenario004-standalone.yaml', 'ci/environments/scenario001-multinode-containers.yaml', 'ci/environments/scenario002-standalone.yaml', 'ci/environments/scenario003-standalone.yaml', 'ci/environments/scenario010-standalone.yaml', 'ci/environments/multinode-containers.yaml', 'ci/environments/scenario001-standalone.yaml', 'ci/environments/scenario002-multinode-containers.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f9240ca4dfdd3c458a88b7c24b758f7a14fd4e9e', 'message': 'DNM: test oooq mitogen on sa jobs\n\nChange-Id: I01ca6fe6c55af8bd00644ca2e468e0f9aef0291c\nDepends-On: https://review.opendev.org/#/c/659906/\nDepends-On: https://review.opendev.org/661505/\n'}]",0,660380,f9240ca4dfdd3c458a88b7c24b758f7a14fd4e9e,10,3,2,10969,,,0,"DNM: test oooq mitogen on sa jobs

Change-Id: I01ca6fe6c55af8bd00644ca2e468e0f9aef0291c
Depends-On: https://review.opendev.org/#/c/659906/
Depends-On: https://review.opendev.org/661505/
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/80/660380/1 && git format-patch -1 --stdout FETCH_HEAD,"['ci/environments/scenario004-standalone.yaml', 'ci/environments/scenario001-multinode-containers.yaml', 'ci/environments/scenario002-standalone.yaml', 'ci/environments/scenario003-standalone.yaml', 'ci/environments/multinode-containers.yaml', 'ci/environments/scenario010-standalone.yaml', 'ci/environments/scenario001-standalone.yaml', 'ci/environments/scenario002-multinode-containers.yaml']",8,f2858f8c10135cac0d607f912a59a849789e9e14,mitogen,#test,,9,0
openstack%2Ftripleo-quickstart-extras~master~Id0e836c2e5871e51d45f2b9559fd2cecbf419b22,openstack/tripleo-quickstart-extras,master,Id0e836c2e5871e51d45f2b9559fd2cecbf419b22,DNM: hack for containers name prefix,ABANDONED,2019-05-20 16:57:59.000000000,2019-08-08 13:02:59.000000000,,"[{'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-05-20 16:57:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e41b5369001b959615d7a639c85b1e458563a6a7', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}, {'number': 2, 'created': '2019-05-20 20:50:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/5d67fef7683826440d2bb5baf4553f0bcb83fe50', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}, {'number': 3, 'created': '2019-05-20 20:50:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/67f3dadab123e88a1bdb04ec9a8cc84117f26621', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}, {'number': 4, 'created': '2019-05-20 20:51:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/0ec9500e589347c33079da6b00e738f4ca3e285b', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}, {'number': 5, 'created': '2019-05-21 11:22:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/062e7325d7933960227235d06c6b5caa7923f525', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}, {'number': 6, 'created': '2019-05-23 12:10:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/4e301e1a391fc706b87ea31117574eed4b697054', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}, {'number': 7, 'created': '2019-05-30 15:37:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/dce62ee85fbdf47df0828dc81fc27b1e51b09f9d', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}, {'number': 8, 'created': '2019-06-04 20:42:24.000000000', 'files': ['roles/undercloud-deploy/tasks/install-undercloud.yml', 'roles/overcloud-prep-images/templates/overcloud-prep-images.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/4bd04547498ebb4b8fba67e1b3d0fa63929b7ea3', 'message': 'DNM: hack for containers name prefix\n\nChange-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22\n'}]",0,660176,4bd04547498ebb4b8fba67e1b3d0fa63929b7ea3,28,3,8,10969,,,0,"DNM: hack for containers name prefix

Change-Id: Id0e836c2e5871e51d45f2b9559fd2cecbf419b22
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/76/660176/8 && git format-patch -1 --stdout FETCH_HEAD,['roles/undercloud-deploy/tasks/install-undercloud.yml'],1,e41b5369001b959615d7a639c85b1e458563a6a7,testcont,"- name: Hack shell: > sed -i ""s/name_prefix: redhat/name_prefix: centos/g"" {{ working_dir }}/containers-prepare-parameters.yaml ",,4,0
openstack%2Ftripleo-quickstart-extras~master~I98a900ea10b64999dd52ea161b2815e6c6c70032,openstack/tripleo-quickstart-extras,master,I98a900ea10b64999dd52ea161b2815e6c6c70032,DNM: run mitogen on undercloud too,ABANDONED,2019-05-18 13:45:45.000000000,2019-08-08 13:02:55.000000000,,"[{'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-05-18 13:45:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/22491e6bab84a55af09ea519291146b948bbf7af', 'message': 'DNM: run mitogen on undercloud too\n\nChange-Id: I98a900ea10b64999dd52ea161b2815e6c6c70032\n'}, {'number': 2, 'created': '2019-05-18 14:15:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/93dd0775d41d2428ceb71340db45d7b4126c68cd', 'message': 'DNM: run mitogen on undercloud too\n\nChange-Id: I98a900ea10b64999dd52ea161b2815e6c6c70032\n'}, {'number': 3, 'created': '2019-05-19 11:12:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/ad07412ba90cafb83617e88555cb42db971fe8e5', 'message': 'DNM: run mitogen on undercloud too\n\nChange-Id: I98a900ea10b64999dd52ea161b2815e6c6c70032\n'}, {'number': 4, 'created': '2019-05-19 23:35:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/cf81259b9f802455430c54d894c400529b0091eb', 'message': 'DNM: run mitogen on undercloud too\n\nChange-Id: I98a900ea10b64999dd52ea161b2815e6c6c70032\n'}, {'number': 5, 'created': '2019-05-19 23:43:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/a2d5c1b99e184b3b35cf21139718ede2db9562da', 'message': 'DNM: run mitogen on undercloud too\n\nChange-Id: I98a900ea10b64999dd52ea161b2815e6c6c70032\n'}, {'number': 6, 'created': '2019-05-20 12:23:30.000000000', 'files': ['roles/undercloud-setup/templates/install_packages.sh.j2', 'roles/undercloud-setup/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/796ba34311490c2eb24bb1b83ec624d5db22b27c', 'message': 'DNM: run mitogen on undercloud too\n\nChange-Id: I98a900ea10b64999dd52ea161b2815e6c6c70032\n'}]",0,659909,796ba34311490c2eb24bb1b83ec624d5db22b27c,22,3,6,10969,,,0,"DNM: run mitogen on undercloud too

Change-Id: I98a900ea10b64999dd52ea161b2815e6c6c70032
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/09/659909/5 && git format-patch -1 --stdout FETCH_HEAD,['roles/undercloud-setup/tasks/main.yml'],1,22491e6bab84a55af09ea519291146b948bbf7af,ooomitogen," - name: Install ara deps become: true pip: name: ""{{ item }}"" state: latest with_items: - pip - setuptools # TODO(sshnaidm): https://bugs.launchpad.net/tripleo/+bug/1792622 ignore_errors: true - name: Install mitogen become: true pip: name: mitogen state: present version: latest - name: Update the default path ansible strategy setting in /etc/ansible/ansible.cfg become: true lineinfile: path: /etc/ansible/ansible.cfg regexp: '^#strategy_plugins' line: | strategy_plugins=/usr/lib/python2.7/site-packages/ansible_mitogen/plugins/strategy - name: Update the default ansible strategy setting in /etc/ansible/ansible.cfg become: true lineinfile: path: /etc/ansible/ansible.cfg regexp: '^#module_lang' line: | strategy=mitogen_linear",,34,0
openstack%2Ftripleo-quickstart-extras~master~I7fb830ad4723d46c5f36f451ce5f342dbfc320aa,openstack/tripleo-quickstart-extras,master,I7fb830ad4723d46c5f36f451ce5f342dbfc320aa,DNM: discover mitogen path and try to run it in overcloud,ABANDONED,2019-05-18 13:27:56.000000000,2019-08-08 13:02:52.000000000,,"[{'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-05-18 13:27:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/c30176ba6b10aee266f8ad6738ea65526d8d65d2', 'message': 'DNM: discover mitogen path and try to run it in overcloud\n\nChange-Id: I7fb830ad4723d46c5f36f451ce5f342dbfc320aa\n'}, {'number': 2, 'created': '2019-05-19 00:24:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/3f06186183f65947570e217828b01e0721874657', 'message': 'DNM: discover mitogen path and try to run it in overcloud\n\nChange-Id: I7fb830ad4723d46c5f36f451ce5f342dbfc320aa\n'}, {'number': 3, 'created': '2019-05-19 11:12:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/60961202d4cba0e2c5feb36e2657714b9577fb85', 'message': 'DNM: discover mitogen path and try to run it in overcloud\n\nChange-Id: I7fb830ad4723d46c5f36f451ce5f342dbfc320aa\n'}, {'number': 4, 'created': '2019-05-19 19:49:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/7fca00f606ae6efb128c505b5a3351b09db099e8', 'message': 'DNM: discover mitogen path and try to run it in overcloud\n\nChange-Id: I7fb830ad4723d46c5f36f451ce5f342dbfc320aa\n'}, {'number': 5, 'created': '2019-05-19 23:21:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/dd1a5ff1a50b47450e28b425ddb8b4690da77d01', 'message': 'DNM: discover mitogen path and try to run it in overcloud\n\nChange-Id: I7fb830ad4723d46c5f36f451ce5f342dbfc320aa\n'}, {'number': 6, 'created': '2019-05-19 23:43:08.000000000', 'files': ['roles/overcloud-prep-images/templates/overcloud-prep-images.sh.j2', 'roles/overcloud-deploy/templates/ansible.cfg.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/ae2aa5ea3602b49c527e541cc8432ee0c3b60705', 'message': 'DNM: discover mitogen path and try to run it in overcloud\n\nChange-Id: I7fb830ad4723d46c5f36f451ce5f342dbfc320aa\n'}]",0,659907,ae2aa5ea3602b49c527e541cc8432ee0c3b60705,23,3,6,10969,,,0,"DNM: discover mitogen path and try to run it in overcloud

Change-Id: I7fb830ad4723d46c5f36f451ce5f342dbfc320aa
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/07/659907/2 && git format-patch -1 --stdout FETCH_HEAD,"['roles/overcloud-deploy/templates/ansible.cfg.j2', 'roles/overcloud-prep-images/templates/overcloud-prep-images.sh.j2']",2,c30176ba6b10aee266f8ad6738ea65526d8d65d2,ooomitogen,"container_cli=""{{ undercloud_container_cli | default('podman') }}"" cont=$(sudo $container_cli ps | grep executor | awk {'print $1'}) sudo $container_cli exec --user root $cont bash -c ""easy_install pip && pip install mitogen"" # check it sudo $container_cli exec --user root $cont ls /usr/lib/ | grep mitogen ",,9,0
openstack%2Ftripleo-quickstart~master~Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7,openstack/tripleo-quickstart,master,Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7,DNM: try mitogen with quickstart,ABANDONED,2019-05-18 13:16:01.000000000,2019-08-08 13:02:49.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24162}, {'_account_id': 28522}]","[{'number': 1, 'created': '2019-05-18 13:16:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/587486af6ff7528400f3b2c8be2d1ea3013ab1a9', 'message': 'DNM: try mitogen with quickstart\n\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 2, 'created': '2019-05-18 14:13:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/c9ad63399d8e19dace9695f7a815b174eb3a49e0', 'message': 'DNM: try mitogen with quickstart\n\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 3, 'created': '2019-05-19 00:23:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/ec0d9ba059f9d85f98539f3e6024520f0e9cf537', 'message': 'DNM: try mitogen with quickstart\n\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 4, 'created': '2019-05-19 23:33:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/0b390e4beadd50e6559b278cdb73c991432c9025', 'message': 'DNM: try mitogen with quickstart\n\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 5, 'created': '2019-05-20 12:09:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/56c4a4fbe4afacf1c87b32cab7f981d6fa7ffba1', 'message': 'DNM: try mitogen with quickstart\n\nDepends-On: https://review.opendev.org/#/c/660100\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 6, 'created': '2019-05-20 13:25:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/8f7ff7c83945c3251f1ee36ebeb019e7218d4ca3', 'message': 'DNM: try mitogen with quickstart\n\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 7, 'created': '2019-05-20 15:56:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/93ca1ed1874598c371b3141f7fb0e66d1831145c', 'message': 'DNM: try mitogen with quickstart\n\nDepends-On: https://review.opendev.org/#/c/660100\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 8, 'created': '2019-05-20 16:18:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/1f0628baf8333899155ff3a098bebfb0d8ffa3fc', 'message': 'DNM: try mitogen with quickstart\n\nDepends-On: https://review.opendev.org/#/c/660100\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 9, 'created': '2019-05-21 00:00:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/7b6e79eec1f88c3579b52a84b4bdddc40ac0f33f', 'message': 'DNM: try mitogen with quickstart\n\n\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}, {'number': 10, 'created': '2019-05-21 13:22:01.000000000', 'files': ['requirements.txt', 'ansible.cfg'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/7129f07b9657699dacd37551d1b60776f32c7afb', 'message': 'DNM: try mitogen with quickstart\n\nDepends-On: https://review.opendev.org/660382\nChange-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7\n'}]",0,659906,7129f07b9657699dacd37551d1b60776f32c7afb,37,5,10,10969,,,0,"DNM: try mitogen with quickstart

Depends-On: https://review.opendev.org/660382
Change-Id: Ieabd2bf4fcc3e5bdebe02e85eca0cb9b92b934e7
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/06/659906/2 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'install-deps.sh', 'ansible.cfg']",3,587486af6ff7528400f3b2c8be2d1ea3013ab1a9,mitogen,strategy = mitogen_linearstrategy_plugins = /usr/lib/python2.7/site-packages/ansible_mitogen/plugins/strategy ,,5,0
openstack%2Fplacement~master~Iec2b235187e4c56a25d5a708d7abead68983e62e,openstack/placement,master,Iec2b235187e4c56a25d5a708d7abead68983e62e,_get_all_by_filters_from_db do not cast to list of dict,MERGED,2019-08-01 10:07:03.000000000,2019-08-08 13:02:39.000000000,2019-08-08 13:02:39.000000000,"[{'_account_id': 7634}, {'_account_id': 11564}, {'_account_id': 14070}, {'_account_id': 22348}, {'_account_id': 25625}]","[{'number': 1, 'created': '2019-08-01 10:07:03.000000000', 'files': ['placement/objects/resource_provider.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/069c531b1a0a1aa981aa894e603a15b736e75df5', 'message': '_get_all_by_filters_from_db do not cast to list of dict\n\nThe RowProxy objects in the `res` list are already dict-like,\nso casting them to dict is redundant.\n\nIn an environment with 1623 resource providers, the list\ncomprehension that does the dict-ification contributes 36%\nof the time.\n\nChange-Id: Iec2b235187e4c56a25d5a708d7abead68983e62e\n'}]",1,673991,069c531b1a0a1aa981aa894e603a15b736e75df5,11,5,1,11564,,,0,"_get_all_by_filters_from_db do not cast to list of dict

The RowProxy objects in the `res` list are already dict-like,
so casting them to dict is redundant.

In an environment with 1623 resource providers, the list
comprehension that does the dict-ification contributes 36%
of the time.

Change-Id: Iec2b235187e4c56a25d5a708d7abead68983e62e
",git fetch https://review.opendev.org/openstack/placement refs/changes/91/673991/1 && git format-patch -1 --stdout FETCH_HEAD,['placement/objects/resource_provider.py'],1,069c531b1a0a1aa981aa894e603a15b736e75df5,cd/de-dict-list-rps, return context.session.execute(query).fetchall(), res = context.session.execute(query).fetchall() return [dict(r) for r in res],1,2
openstack%2Ftripleo-quickstart-extras~master~I6a3f539853dfbb46fc6d7658f50071f673bd8e3c,openstack/tripleo-quickstart-extras,master,I6a3f539853dfbb46fc6d7658f50071f673bd8e3c,DNM: test sa prefix containers,ABANDONED,2019-04-11 15:44:18.000000000,2019-08-08 13:02:26.000000000,,"[{'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-04-11 15:44:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/9a5e995df26e601a729eee0dfaaf6548a70def92', 'message': 'DNM: test sa prefix containers\n\nChange-Id: I6a3f539853dfbb46fc6d7658f50071f673bd8e3c\n'}, {'number': 2, 'created': '2019-04-11 16:58:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/c222cd76fb9f822d5d0ab92f57717791aa0baefe', 'message': 'DNM: test sa prefix containers\n\nChange-Id: I6a3f539853dfbb46fc6d7658f50071f673bd8e3c\n'}, {'number': 3, 'created': '2019-04-11 17:23:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/b551084f91e52b0c89dd38cfde1515599427c8af', 'message': 'DNM: test sa prefix containers\n\nChange-Id: I6a3f539853dfbb46fc6d7658f50071f673bd8e3c\n'}, {'number': 4, 'created': '2019-04-11 18:02:39.000000000', 'files': ['roles/standalone/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/bc52301ac3964047efa38cb54a52390e6a16c2e5', 'message': 'DNM: test sa prefix containers\n\nChange-Id: I6a3f539853dfbb46fc6d7658f50071f673bd8e3c\n'}]",0,651817,bc52301ac3964047efa38cb54a52390e6a16c2e5,11,3,4,10969,,,0,"DNM: test sa prefix containers

Change-Id: I6a3f539853dfbb46fc6d7658f50071f673bd8e3c
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/17/651817/4 && git format-patch -1 --stdout FETCH_HEAD,['roles/standalone/templates/standalone-container-prep.sh.j2'],1,9a5e995df26e601a729eee0dfaaf6548a70def92,test11,"openstack tripleo container image prepare --prefix ""centos-binary-"" \",openstack tripleo container image prepare default \,1,1
openstack%2Ftripleo-ci~master~I56c90f85b66cafd3c886c108ff3f86d42393cad1,openstack/tripleo-ci,master,I56c90f85b66cafd3c886c108ff3f86d42393cad1,Add OR condition to periodic job detection,ABANDONED,2019-03-18 09:59:08.000000000,2019-08-08 13:01:55.000000000,,"[{'_account_id': 8449}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-03-18 09:59:08.000000000', 'files': ['roles/common/vars/main.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/1b1a8c62529b85762651e9268c6fbb2ebd044ecb', 'message': 'Add OR condition to periodic job detection\n\nWhen we want to run periodic jobs by demand we should have such\noption, so it\'s enough to have ""periodic"" in the name, not only\nperiodic pipeline.\nChange-Id: I56c90f85b66cafd3c886c108ff3f86d42393cad1\n'}]",2,643906,1b1a8c62529b85762651e9268c6fbb2ebd044ecb,12,6,1,10969,,,0,"Add OR condition to periodic job detection

When we want to run periodic jobs by demand we should have such
option, so it's enough to have ""periodic"" in the name, not only
periodic pipeline.
Change-Id: I56c90f85b66cafd3c886c108ff3f86d42393cad1
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/06/643906/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/common/vars/main.yaml'],1,1b1a8c62529b85762651e9268c6fbb2ebd044ecb,periodicall, {% if 'periodic' in zuul.pipeline or 'periodic' in zuul.job -%}, {% if 'periodic' in zuul.pipeline -%},1,1
openstack%2Fopenstack-virtual-baremetal~master~Ie66080e8cc9f145a6b15e69d05b57e664b557e50,openstack/openstack-virtual-baremetal,master,Ie66080e8cc9f145a6b15e69d05b57e664b557e50,WIP: use relative import in OVB,ABANDONED,2019-01-29 07:57:36.000000000,2019-08-08 13:00:55.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-01-29 07:57:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-virtual-baremetal/commit/ce0acc27416fb2a1c45ae8fde4823af5514e29f1', 'message': 'WIP: use relative import in OVB\n\nChange-Id: Ie66080e8cc9f145a6b15e69d05b57e664b557e50\n'}, {'number': 2, 'created': '2019-01-29 11:24:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-virtual-baremetal/commit/856a1f7e9074ee4d602d80e34d99448262838545', 'message': 'WIP: use relative import in OVB\n\nChange-Id: Ie66080e8cc9f145a6b15e69d05b57e664b557e50\n'}, {'number': 3, 'created': '2019-01-29 11:40:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-virtual-baremetal/commit/f2aac9b7bc0d24bc84b8d7c591978b6176c9f0d7', 'message': 'WIP: use relative import in OVB\n\nChange-Id: Ie66080e8cc9f145a6b15e69d05b57e664b557e50\n'}, {'number': 4, 'created': '2019-01-29 14:05:38.000000000', 'files': ['openstack_virtual_baremetal/deploy.py'], 'web_link': 'https://opendev.org/openstack/openstack-virtual-baremetal/commit/70a1934f8a7492e3c1d0a5c411cf6fde6aa09f13', 'message': 'WIP: use relative import in OVB\n\nChange-Id: Ie66080e8cc9f145a6b15e69d05b57e664b557e50\n'}]",0,633668,70a1934f8a7492e3c1d0a5c411cf6fde6aa09f13,12,2,4,10969,,,0,"WIP: use relative import in OVB

Change-Id: Ie66080e8cc9f145a6b15e69d05b57e664b557e50
",git fetch https://review.opendev.org/openstack/openstack-virtual-baremetal refs/changes/68/633668/4 && git format-patch -1 --stdout FETCH_HEAD,['openstack_virtual_baremetal/deploy.py'],1,ce0acc27416fb2a1c45ae8fde4823af5514e29f1,,import auth,from openstack_virtual_baremetal import auth,1,1
openstack%2Ftripleo-quickstart-extras~master~I6e6e4af92aab592a2614da4dded1fefcfee08a61,openstack/tripleo-quickstart-extras,master,I6e6e4af92aab592a2614da4dded1fefcfee08a61,"WIP: Revert ""Revert ""Don't trigger repo injection if nothing was built""""",ABANDONED,2018-07-15 12:27:40.000000000,2019-08-08 13:00:32.000000000,,"[{'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2018-07-15 12:27:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/5deb1d549abbb8b77ce0d606ce1c819719496f04', 'message': 'WIP: Revert ""Revert ""Don\'t trigger repo injection if nothing was built""""\n\nThis reverts commit b4e000cc6d7365e0f1ac844467886852fd7fc296.\n\nChange-Id: I6e6e4af92aab592a2614da4dded1fefcfee08a61\n'}, {'number': 2, 'created': '2018-08-23 08:40:52.000000000', 'files': ['playbooks/multinode-overcloud-upgrade.yml', 'playbooks/multinode-standalone.yml', 'playbooks/ovb-setup.yml', 'playbooks/multinode-undercloud-upgrade.yml', 'playbooks/multinode-undercloud.yml', 'roles/build-test-packages/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/1acb89c18638a20a3cafa5f279eba2befae2184f', 'message': 'WIP: Revert ""Revert ""Don\'t trigger repo injection if nothing was built""""\n\nThis reverts commit b4e000cc6d7365e0f1ac844467886852fd7fc296.\n\nChange-Id: I6e6e4af92aab592a2614da4dded1fefcfee08a61\n'}]",0,582763,1acb89c18638a20a3cafa5f279eba2befae2184f,9,3,2,10969,,,0,"WIP: Revert ""Revert ""Don't trigger repo injection if nothing was built""""

This reverts commit b4e000cc6d7365e0f1ac844467886852fd7fc296.

Change-Id: I6e6e4af92aab592a2614da4dded1fefcfee08a61
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/63/582763/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/multinode-overcloud-upgrade.yml', 'playbooks/multinode-standalone.yml', 'playbooks/ovb-setup.yml', 'playbooks/multinode-undercloud-upgrade.yml', 'playbooks/multinode-undercloud.yml', 'roles/build-test-packages/tasks/main.yml']",6,5deb1d549abbb8b77ce0d606ce1c819719496f04,," - name: Don't trigger repo injection if nothing is built set_fact: compressed_gating_repo: """" cacheable: true when: repo_built is not defined or repo_built.skipped is defined",,50,13
openstack%2Ftripleo-quickstart-extras~master~Ic6e82699ff50037e4c38568f3fa399e8f6d5e994,openstack/tripleo-quickstart-extras,master,Ic6e82699ff50037e4c38568f3fa399e8f6d5e994,Make reproducer more verbose,ABANDONED,2018-05-22 14:00:45.000000000,2019-08-08 13:00:18.000000000,,"[{'_account_id': 9592}, {'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24162}, {'_account_id': 24752}, {'_account_id': 28223}]","[{'number': 1, 'created': '2018-05-22 14:00:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/7c70481f80d11283936b3adf36714ba79ed6bd4d', 'message': 'Make reproducer more verbose\n\nRun ansible playbooks in reproducer with more verbosity, it will\nhelp to diagnose failures and will be useful for debugging.\n\nChange-Id: Ic6e82699ff50037e4c38568f3fa399e8f6d5e994\n'}, {'number': 2, 'created': '2018-05-28 06:23:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/1e97e2b1640b51295511f32956b10a4767f93650', 'message': 'Make reproducer more verbose\n\nRun ansible playbooks in reproducer with more verbosity, it will\nhelp to diagnose failures and will be useful for debugging.\n\nChange-Id: Ic6e82699ff50037e4c38568f3fa399e8f6d5e994\n'}, {'number': 3, 'created': '2018-06-07 23:41:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/f359c6c039d7345a76506385356ff71c97948b65', 'message': 'Make reproducer more verbose\n\nRun ansible playbooks in reproducer with more verbosity, it will\nhelp to diagnose failures and will be useful for debugging.\n\nChange-Id: Ic6e82699ff50037e4c38568f3fa399e8f6d5e994\n'}, {'number': 4, 'created': '2018-10-08 11:41:02.000000000', 'files': ['roles/create-reproducer-script/templates/reproducer-quickstart.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/756192b43cf2d2e781c532db3e270e340541f65c', 'message': 'Make reproducer more verbose\n\nRun ansible playbooks in reproducer with more verbosity, it will\nhelp to diagnose failures and will be useful for debugging.\n\nChange-Id: Ic6e82699ff50037e4c38568f3fa399e8f6d5e994\n'}]",0,569985,756192b43cf2d2e781c532db3e270e340541f65c,20,7,4,10969,,,0,"Make reproducer more verbose

Run ansible playbooks in reproducer with more verbosity, it will
help to diagnose failures and will be useful for debugging.

Change-Id: Ic6e82699ff50037e4c38568f3fa399e8f6d5e994
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/85/569985/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/create-reproducer-script/templates/reproducer-quickstart.sh.j2'],1,7c70481f80d11283936b3adf36714ba79ed6bd4d,verb,ansible-playbook -vv $WORKSPACE/tripleo-quickstart-extras/playbooks/ovb-create-stack.yml \ansible-playbook -vv $WORKSPACE/tripleo-quickstart-extras/playbooks/nodepool-setup.yml \ ansible-playbook -vv $WORKSPACE/tripleo-quickstart/playbooks/libvirt-nodepool.yml \ ansible-playbook -vv $WORKSPACE/tripleo-quickstart-extras/playbooks/provision_multinodes.yml \ansible-playbook -vv $WORKSPACE/tripleo-quickstart-extras/playbooks/nodepool-setup.yml \,ansible-playbook $WORKSPACE/tripleo-quickstart-extras/playbooks/ovb-create-stack.yml \ansible-playbook $WORKSPACE/tripleo-quickstart-extras/playbooks/nodepool-setup.yml \ ansible-playbook $WORKSPACE/tripleo-quickstart/playbooks/libvirt-nodepool.yml \ ansible-playbook $WORKSPACE/tripleo-quickstart-extras/playbooks/provision_multinodes.yml \ansible-playbook $WORKSPACE/tripleo-quickstart-extras/playbooks/nodepool-setup.yml \,5,5
openstack%2Ftripleo-quickstart-extras~master~I879d2c0fd0a81ffaa23e84fe4366519175340334,openstack/tripleo-quickstart-extras,master,I879d2c0fd0a81ffaa23e84fe4366519175340334,Install collectd on undercloud,ABANDONED,2018-04-10 15:18:43.000000000,2019-08-08 12:59:39.000000000,,"[{'_account_id': 9592}, {'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2018-04-10 15:18:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/fdf03a064fe5c35f7dca32a059d7a38b262ca113', 'message': 'WIP: install collectd on undercloud\n\ninstall collectd on undercloud\n\nChange-Id: I879d2c0fd0a81ffaa23e84fe4366519175340334\nDepends-On: Ideaa8b782bebbb97cbbdb09c7ab8354f3f97f25d\n'}, {'number': 2, 'created': '2018-04-10 16:43:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/7fbc0c7b089e319338c1ab4e1efa528de5a54ffc', 'message': 'WIP: install collectd on undercloud\n\ninstall collectd on undercloud\n\nChange-Id: I879d2c0fd0a81ffaa23e84fe4366519175340334\nDepends-On: I14c45f807f4cfcbcccc54fd8a50ad3f6212b7808\nDepends-On: Ideaa8b782bebbb97cbbdb09c7ab8354f3f97f25d\n'}, {'number': 3, 'created': '2018-04-11 10:02:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/e12752e7a9746d047f638d02935c81865aac9e9c', 'message': 'WIP: install collectd on undercloud\n\ninstall collectd on undercloud\n\nChange-Id: I879d2c0fd0a81ffaa23e84fe4366519175340334\nDepends-On: I14c45f807f4cfcbcccc54fd8a50ad3f6212b7808\nDepends-On: Ideaa8b782bebbb97cbbdb09c7ab8354f3f97f25d\n'}, {'number': 4, 'created': '2018-04-24 10:13:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/18fbdd8797e2551e803d9d16ae1a4de1322f9b19', 'message': 'Install collectd on undercloud\n\ninstall collectd on undercloud\n\nChange-Id: I879d2c0fd0a81ffaa23e84fe4366519175340334\nDepends-On: I14c45f807f4cfcbcccc54fd8a50ad3f6212b7808\nDepends-On: Ideaa8b782bebbb97cbbdb09c7ab8354f3f97f25d\n'}, {'number': 5, 'created': '2018-04-24 10:13:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/d304bae6c4a15a1203814f497b0a508595842416', 'message': 'Install collectd on undercloud\n\ninstall collectd on undercloud\n\nChange-Id: I879d2c0fd0a81ffaa23e84fe4366519175340334\nDepends-On: I14c45f807f4cfcbcccc54fd8a50ad3f6212b7808\nDepends-On: Ideaa8b782bebbb97cbbdb09c7ab8354f3f97f25d\n'}, {'number': 6, 'created': '2018-07-18 14:51:15.000000000', 'files': ['playbooks/baremetal-full-undercloud.yml', 'playbooks/multinode-undercloud.yml', 'playbooks/quickstart-extras-undercloud.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/15e5896b7a5d71d7ae5ec1eb7588b01ab1c2ceaf', 'message': 'Install collectd on undercloud\n\ninstall collectd on undercloud\n\nChange-Id: I879d2c0fd0a81ffaa23e84fe4366519175340334\nDepends-On: I14c45f807f4cfcbcccc54fd8a50ad3f6212b7808\nDepends-On: Ideaa8b782bebbb97cbbdb09c7ab8354f3f97f25d\n'}]",0,560048,15e5896b7a5d71d7ae5ec1eb7588b01ab1c2ceaf,20,4,6,10969,,,0,"Install collectd on undercloud

install collectd on undercloud

Change-Id: I879d2c0fd0a81ffaa23e84fe4366519175340334
Depends-On: I14c45f807f4cfcbcccc54fd8a50ad3f6212b7808
Depends-On: Ideaa8b782bebbb97cbbdb09c7ab8354f3f97f25d
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/48/560048/6 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/baremetal-full-undercloud.yml', 'playbooks/multinode-undercloud.yml', 'playbooks/quickstart-extras-undercloud.yml']",3,fdf03a064fe5c35f7dca32a059d7a38b262ca113,collectd,- name: Install collectd hosts: undercloud gather_facts: no tags: - undercloud-setup roles: - collectd ,,24,0
openstack%2Ftripleo-ci~master~I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0,openstack/tripleo-ci,master,I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0,DNM: testing build images,ABANDONED,2019-07-24 14:00:20.000000000,2019-08-08 12:59:26.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-24 14:00:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/25e87e3d2ab3b8cd26e0913595373fc7db039730', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}, {'number': 2, 'created': '2019-07-24 14:32:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d48156f6f863a199cc1250fa2dc6e8a84513e968', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}, {'number': 3, 'created': '2019-07-24 22:50:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/244b671e7261e7750da71294ea3c73e2fd21fee9', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}, {'number': 4, 'created': '2019-07-24 22:52:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/c0d51e6d3d745703dc845c5a70f97365f88c89c7', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}, {'number': 5, 'created': '2019-07-25 12:52:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/b31d6385d6f25b03000c4f20aaef0711c70d059f', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}, {'number': 6, 'created': '2019-07-25 14:16:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/35bb3a6beb9178befc63985ca7931f3cad55cc81', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}, {'number': 7, 'created': '2019-07-29 12:52:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/90c5404de908629c7c92b93cf4c5bf6743882429', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}, {'number': 8, 'created': '2019-07-30 15:24:54.000000000', 'files': ['roles/common/vars/main.yaml', 'roles/oooci-build-images/tasks/pre.yaml', 'roles/oooci-build-images/templates/pathfix_repos.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d19dbc651914425e42034d8f28b3a2f7456c4d4f', 'message': 'DNM: testing build images\n\nChange-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0\n'}]",0,672531,d19dbc651914425e42034d8f28b3a2f7456c4d4f,19,2,8,10969,,,0,"DNM: testing build images

Change-Id: I3f903d7a6f25bf4ea7a2a1ae9c798d4c23dcc1b0
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/31/672531/8 && git format-patch -1 --stdout FETCH_HEAD,"['roles/oooci-build-images/tasks/post.yaml', 'roles/oooci-build-images/templates/build-images.sh.j2', 'roles/common/vars/main.yaml', 'roles/oooci-build-images/tasks/main.yaml']",4,25e87e3d2ab3b8cd26e0913595373fc7db039730,col, shell: bash build_images.sh > {{ workspace }}/logs/build.log 2> {{ workspace }}/logs/build-err.log, shell: bash build_images.sh > {{ workspace }}/build.log 2> build-err.log,5,47
openstack%2Ftripleo-quickstart-extras~master~Ia5e5cd8a7b18d8014f7000a3b57829bf0f32c6b3,openstack/tripleo-quickstart-extras,master,Ia5e5cd8a7b18d8014f7000a3b57829bf0f32c6b3,DNM: don't build image,ABANDONED,2019-07-31 06:56:58.000000000,2019-08-08 12:59:04.000000000,,"[{'_account_id': 10969}, {'_account_id': 18846}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-31 06:56:58.000000000', 'files': ['roles/check-to-build-or-not-to-build/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/7fa27a3dc2e1e63c27ede3303a77dda994f768f7', 'message': ""DNM: don't build image\n\nChange-Id: Ia5e5cd8a7b18d8014f7000a3b57829bf0f32c6b3\n""}]",0,673743,7fa27a3dc2e1e63c27ede3303a77dda994f768f7,6,4,1,10969,,,0,"DNM: don't build image

Change-Id: Ia5e5cd8a7b18d8014f7000a3b57829bf0f32c6b3
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/43/673743/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/check-to-build-or-not-to-build/tasks/main.yml'],1,7fa27a3dc2e1e63c27ede3303a77dda994f768f7,,,"- name: Always build images in the periodic jobs set_fact: to_build: true cacheable: true when: lookup('env', 'PERIODIC')|default('0')|int == 1",0,5
openstack%2Ftripleo-ci~master~Ib96bf3162a27711460d6cc1369eaecc0077c6eba,openstack/tripleo-ci,master,Ib96bf3162a27711460d6cc1369eaecc0077c6eba,DNM: test SA rhel8,ABANDONED,2019-08-06 17:29:08.000000000,2019-08-08 12:58:42.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 17:29:08.000000000', 'files': ['toci-quickstart/config/testenv/multinode.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/c19759b3508d53f21553c1772676b9ef67ce1a6c', 'message': 'DNM: test SA rhel8\n\nDepends-On: https://review.opendev.org/674572\nChange-Id: Ib96bf3162a27711460d6cc1369eaecc0077c6eba\n'}]",0,674885,c19759b3508d53f21553c1772676b9ef67ce1a6c,7,3,1,10969,,,0,"DNM: test SA rhel8

Depends-On: https://review.opendev.org/674572
Change-Id: Ib96bf3162a27711460d6cc1369eaecc0077c6eba
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/85/674885/1 && git format-patch -1 --stdout FETCH_HEAD,['toci-quickstart/config/testenv/multinode.yml'],1,c19759b3508d53f21553c1772676b9ef67ce1a6c,,# yes,,1,0
openstack%2Ftripleo-heat-templates~master~I22aa13728aaebf69b9d89ebcd7b3731458fb8fbe,openstack/tripleo-heat-templates,master,I22aa13728aaebf69b9d89ebcd7b3731458fb8fbe,DNM: testing build,ABANDONED,2019-08-06 22:23:30.000000000,2019-08-08 12:58:25.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 22:23:30.000000000', 'files': ['environments/low-memory-usage.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/11c93e894a9dcdadcd2b46b9ca48f48c7e3d701f', 'message': 'DNM: testing build\n\nDepends-On: https://review.opendev.org/#/c/674943\nChange-Id: I22aa13728aaebf69b9d89ebcd7b3731458fb8fbe\n'}]",0,674944,11c93e894a9dcdadcd2b46b9ca48f48c7e3d701f,5,2,1,10969,,,0,"DNM: testing build

Depends-On: https://review.opendev.org/#/c/674943
Change-Id: I22aa13728aaebf69b9d89ebcd7b3731458fb8fbe
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/44/674944/1 && git format-patch -1 --stdout FETCH_HEAD,['environments/low-memory-usage.yaml'],1,11c93e894a9dcdadcd2b46b9ca48f48c7e3d701f,build8, # test,,2,0
openstack%2Ftripleo-ci~master~Id89d95608ab867bb9e503b60ddd8ca1d0c33f8c3,openstack/tripleo-ci,master,Id89d95608ab867bb9e503b60ddd8ca1d0c33f8c3,DNM: test build 8,ABANDONED,2019-08-06 22:25:07.000000000,2019-08-08 12:58:15.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 22:25:07.000000000', 'files': ['toci-quickstart/config/testenv/multinode.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/6aed4eb46d9bfe90443b024134fc9f70cec3421f', 'message': 'DNM: test build 8\n\nDepends-On: https://review.opendev.org/674944\nChange-Id: Id89d95608ab867bb9e503b60ddd8ca1d0c33f8c3\n'}]",0,674946,6aed4eb46d9bfe90443b024134fc9f70cec3421f,4,2,1,10969,,,0,"DNM: test build 8

Depends-On: https://review.opendev.org/674944
Change-Id: Id89d95608ab867bb9e503b60ddd8ca1d0c33f8c3
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/46/674946/1 && git format-patch -1 --stdout FETCH_HEAD,['toci-quickstart/config/testenv/multinode.yml'],1,6aed4eb46d9bfe90443b024134fc9f70cec3421f,build8,# just run me,,1,0
openstack%2Fopenstack-ansible-os_manila~master~I294a9dd1939f7392806ba6e1db2bf3de56cb4dcb,openstack/openstack-ansible-os_manila,master,I294a9dd1939f7392806ba6e1db2bf3de56cb4dcb,Set defaults for project-specific variables,MERGED,2019-07-29 19:01:34.000000000,2019-08-08 12:57:05.000000000,2019-08-08 12:57:04.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-07-29 19:01:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/9b3beacce2d90b74ac6f1ba66702d5b4d9a1298f', 'message': 'Set defaults for project-specific variables\n\nSince neutron, nova and cinder variables are not defined in manila scope,\nwe need to set defaults for them.\nAlso some options are not used so there is no reason to carry them.\n\nChange-Id: I294a9dd1939f7392806ba6e1db2bf3de56cb4dcb\n'}, {'number': 2, 'created': '2019-08-06 11:48:37.000000000', 'files': ['templates/manila.conf.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/7364011f4d14333be6b78711092f06932123fb70', 'message': 'Set defaults for project-specific variables\n\nSince neutron, nova and cinder variables are not defined in manila scope,\nwe need to set defaults for them.\nAlso some options are not used so there is no reason to carry them.\n\nChange-Id: I294a9dd1939f7392806ba6e1db2bf3de56cb4dcb\n'}]",0,673350,7364011f4d14333be6b78711092f06932123fb70,12,4,2,28619,,,0,"Set defaults for project-specific variables

Since neutron, nova and cinder variables are not defined in manila scope,
we need to set defaults for them.
Also some options are not used so there is no reason to carry them.

Change-Id: I294a9dd1939f7392806ba6e1db2bf3de56cb4dcb
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_manila refs/changes/50/673350/2 && git format-patch -1 --stdout FETCH_HEAD,['templates/manila.conf.j2'],1,9b3beacce2d90b74ac6f1ba66702d5b4d9a1298f,fix_manila,"region_name = {{ neutron_service_region | default(""Default"") }} project_name = {{ neutron_service_project_name | default(""service"") }} username = {{ neutron_service_user_name | default(""neutron"") }}region_name = {{ nova_service_region | default(""Default"") }} project_name = {{ nova_service_project_name | default(""service"") }} username = {{ nova_service_user_name | default(""nova"") }}password = {{ cinder_service_password }}","www_authenticate_uri = {{ keystone_service_internaluri }}memcached_servers = {{ memcached_servers }}region_name = {{ neutron_service_region }} project_name = {{ neutron_service_project_name }} username = {{ neutron_service_user_name }}www_authenticate_uri = {{ keystone_service_internaluri }}memcached_servers = {{ memcached_servers }}region_name = {{ nova_service_region }} project_name = {{ nova_service_project_name }} username = {{ nova_service_user_name }}www_authenticate_uri = {{ keystone_service_internaluri }}memcached_servers = {{ memcached_servers }}password = {{ cinder_service_password | default(""secrete"") }}",7,13
openstack%2Fopenstack-ansible-os_manila~master~I98fc2e4703cfec45da118958bf79a4bea70b5ff9,openstack/openstack-ansible-os_manila,master,I98fc2e4703cfec45da118958bf79a4bea70b5ff9,Fix db_setup condition,MERGED,2019-07-29 17:14:57.000000000,2019-08-08 12:52:16.000000000,2019-08-08 12:52:16.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2019-07-29 17:14:57.000000000', 'files': ['tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_manila/commit/924fe699cd51fba1a26b3335afa81788e6b923ce', 'message': 'Fix db_setup condition\n\nThis patch changes condition when db_setup is launched\nsince it used non-existent key for retrieving host for execution.\n\nChange-Id: I98fc2e4703cfec45da118958bf79a4bea70b5ff9\n'}]",0,673343,924fe699cd51fba1a26b3335afa81788e6b923ce,9,4,1,28619,,,0,"Fix db_setup condition

This patch changes condition when db_setup is launched
since it used non-existent key for retrieving host for execution.

Change-Id: I98fc2e4703cfec45da118958bf79a4bea70b5ff9
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_manila refs/changes/43/673343/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,924fe699cd51fba1a26b3335afa81788e6b923ce,osa/db_refactor," - ""manila_services['manila_api']['group'] in group_names"" - ""inventory_hostname == ((groups[manila_services['manila_api']['group']]| intersect(ansible_play_hosts)) | list)[0]"""," - ""manila_services['manila-api']['group'] in group_names"" - ""inventory_hostname == ((groups[manila_services['manila-api']['group']]| intersect(ansible_play_hosts)) | list)[0]""",2,2
openstack%2Fkolla-cli~master~Icdfc2c8d63d6122a624e13e3d498ef98abbb0636,openstack/kolla-cli,master,Icdfc2c8d63d6122a624e13e3d498ef98abbb0636,Typo fix: update aciton to action,MERGED,2019-08-08 03:46:52.000000000,2019-08-08 12:51:02.000000000,2019-08-08 12:51:02.000000000,"[{'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 28743}, {'_account_id': 30356}]","[{'number': 1, 'created': '2019-08-08 03:46:52.000000000', 'files': ['kolla_cli/api/control_plane.py'], 'web_link': 'https://opendev.org/openstack/kolla-cli/commit/d9d50149a12c8dd2640c25f90ed63ac1bd45619a', 'message': 'Typo fix: update aciton to action\n\nChange-Id: Icdfc2c8d63d6122a624e13e3d498ef98abbb0636\n'}]",0,675242,d9d50149a12c8dd2640c25f90ed63ac1bd45619a,8,4,1,27781,,,0,"Typo fix: update aciton to action

Change-Id: Icdfc2c8d63d6122a624e13e3d498ef98abbb0636
",git fetch https://review.opendev.org/openstack/kolla-cli refs/changes/42/675242/1 && git format-patch -1 --stdout FETCH_HEAD,['kolla_cli/api/control_plane.py'],1,d9d50149a12c8dd2640c25f90ed63ac1bd45619a,," action = KollaAction(verbose_level=verbose_level, ansible_job = action.pull(hostnames, servicenames) action = KollaAction(verbose_level=verbose_level, ansible_job = action.upgrade(servicenames) action = KollaAction(verbose_level=verbose_level, ansible_job = action.genconfig(hostnames, servicenames)"," aciton = KollaAction(verbose_level=verbose_level, ansible_job = aciton.pull(hostnames, servicenames) aciton = KollaAction(verbose_level=verbose_level, ansible_job = aciton.upgrade(servicenames) aciton = KollaAction(verbose_level=verbose_level, ansible_job = aciton.genconfig(hostnames, servicenames)",6,6
openstack%2Fpython-tripleoclient~stable%2Fstein~I0668241a1675dd4e344cc24b6ff2cbb8f93b7a45,openstack/python-tripleoclient,stable/stein,I0668241a1675dd4e344cc24b6ff2cbb8f93b7a45,Add gathering_policy parameter to run_ansible_playbook function,MERGED,2019-08-01 09:39:30.000000000,2019-08-08 12:49:08.000000000,2019-08-08 12:49:08.000000000,"[{'_account_id': 3153}, {'_account_id': 11082}, {'_account_id': 11491}, {'_account_id': 14985}, {'_account_id': 20775}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-01 09:39:30.000000000', 'files': ['tripleoclient/tests/test_utils.py', 'tripleoclient/tests/v1/tripleo/test_tripleo_validator.py', 'tripleoclient/utils.py', 'tripleoclient/v1/tripleo_validator.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/aec307d1767027f31e4e17db094b08e33f940965', 'message': ""Add gathering_policy parameter to run_ansible_playbook function\n\nThis patch adds a new parameter called 'gathering_policy' (Defaults to\nNone) to the 'run_ansible_playbook' function. This parameter will\ncontrol the default policy of the Ansible fact gathering. Sets to None\nby default, it will use the default policy for Ansible (ie. 'implicit').\n\nChange-Id: I0668241a1675dd4e344cc24b6ff2cbb8f93b7a45\nSigned-off-by: Gael Chamoulaud <gchamoul@redhat.com>\n(cherry picked from commit d7793ce1a5eef8b076318aecc17ecbe5dcb418d6)\n""}]",0,673985,aec307d1767027f31e4e17db094b08e33f940965,37,9,1,11491,,,0,"Add gathering_policy parameter to run_ansible_playbook function

This patch adds a new parameter called 'gathering_policy' (Defaults to
None) to the 'run_ansible_playbook' function. This parameter will
control the default policy of the Ansible fact gathering. Sets to None
by default, it will use the default policy for Ansible (ie. 'implicit').

Change-Id: I0668241a1675dd4e344cc24b6ff2cbb8f93b7a45
Signed-off-by: Gael Chamoulaud <gchamoul@redhat.com>
(cherry picked from commit d7793ce1a5eef8b076318aecc17ecbe5dcb418d6)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/85/673985/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/tests/test_utils.py', 'tripleoclient/tests/v1/tripleo/test_tripleo_validator.py', 'tripleoclient/utils.py', 'tripleoclient/v1/tripleo_validator.py']",4,aec307d1767027f31e4e17db094b08e33f940965,bp/validation-framework-stable/stein," python_interpreter=python_interpreter, gathering_policy='explicit')", python_interpreter=python_interpreter),64,3
openstack%2Ftripleo-common~master~I8f173d125e7407a80c9ddb89e5272fe2a829b1cb,openstack/tripleo-common,master,I8f173d125e7407a80c9ddb89e5272fe2a829b1cb,Add extraconfig/role_extraconfig template to hieradata,MERGED,2019-07-31 05:05:48.000000000,2019-08-08 12:18:47.000000000,2019-08-08 12:18:47.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 8833}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-31 05:05:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/c5f20784df2b08b7a0c99c1f3d6e2029a3610c6b', 'message': 'WIP Add extraconfig/role_extraconfig template to hieradata\n\nChange-Id: I8f173d125e7407a80c9ddb89e5272fe2a829b1cb\n'}, {'number': 2, 'created': '2019-07-31 10:30:51.000000000', 'files': ['roles/tripleo-hieradata/tasks/main.yaml', 'roles/tripleo-hieradata/templates/extraconfig.j2', 'roles/tripleo-hieradata/templates/role_extraconfig.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/9a25d23d096c85136f109b8bafd6043ae0052350', 'message': 'Add extraconfig/role_extraconfig template to hieradata\n\nChange-Id: I8f173d125e7407a80c9ddb89e5272fe2a829b1cb\n'}]",5,673728,9a25d23d096c85136f109b8bafd6043ae0052350,31,7,2,8833,,,0,"Add extraconfig/role_extraconfig template to hieradata

Change-Id: I8f173d125e7407a80c9ddb89e5272fe2a829b1cb
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/28/673728/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/tripleo-hieradata/tasks/main.yaml', 'roles/tripleo-hieradata/templates/extraconfig.j2', 'roles/tripleo-hieradata/templates/role_extraconfig.j2']",3,c5f20784df2b08b7a0c99c1f3d6e2029a3610c6b,bp/reduce-deployment-resources,{{ role_extraconfig | to_nice_json }} ,,2,50
openstack%2Ftripleo-ci~master~I9e65aa973ebd5c2f499b25e61cd14f440e9a7878,openstack/tripleo-ci,master,I9e65aa973ebd5c2f499b25e61cd14f440e9a7878,Switch image path definitions based on distro,MERGED,2019-07-31 18:11:07.000000000,2019-08-08 12:18:46.000000000,2019-08-08 12:18:46.000000000,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-07-31 18:11:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/29407a3ac44674ddc878cbbf20a67b611298c3db', 'message': 'DNM: Remove image path definitions from OVB settings file\n\nThe image path should be defined in the release file.\nSince the OVB settings files are passed afterwards,\nthese image path definition stake preference.\n\nMarking DNM as only RHEL 8 images are failing here.\n\nChange-Id: I9e65aa973ebd5c2f499b25e61cd14f440e9a7878\n'}, {'number': 2, 'created': '2019-08-01 16:38:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/bae153208d726753e3dc8b21d7b5d276f57cacf6', 'message': 'DNM: Remove image path definitions from OVB settings file\n\nThe image path should be defined in the release file.\nSince the OVB settings files are passed afterwards,\nthese image path definition stake preference.\n\nMarking DNM as only RHEL 8 images are failing here.\n\nChange-Id: I9e65aa973ebd5c2f499b25e61cd14f440e9a7878\n'}, {'number': 3, 'created': '2019-08-03 13:59:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/3bcf739e402d7774737cb6b3611f1f530e27c9ad', 'message': 'DNM: Remove image path definitions from OVB settings file\n\nThe image path should be defined in the release file.\nSince the OVB settings files are passed afterwards,\nthese image path definition stake preference.\n\nMarking DNM as only RHEL 8 images are failing here.\n\nChange-Id: I9e65aa973ebd5c2f499b25e61cd14f440e9a7878\n'}, {'number': 4, 'created': '2019-08-05 15:17:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/b068cdc79be4464ec69cc8b12d45c2ba6ed14807', 'message': 'DNM: Remove image path definitions from OVB settings file\n\nThe image path should be defined in the release file.\nSince the OVB settings files are passed afterwards,\nthese image path definition stake preference.\n\nMarking DNM as only RHEL 8 images are failing here.\n\nChange-Id: I9e65aa973ebd5c2f499b25e61cd14f440e9a7878\n'}, {'number': 5, 'created': '2019-08-06 18:08:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/e899a179c6b60cbfe51eec43a92ea483139965e7', 'message': 'Switch image path definitions based on distro\n\nUse the rcm server path when using RHEL 8 in OVB\nsettings files.\n\nChange-Id: I9e65aa973ebd5c2f499b25e61cd14f440e9a7878\n'}, {'number': 6, 'created': '2019-08-07 12:23:04.000000000', 'files': ['toci-quickstart/config/testenv/ovb-rdocloud.yml', 'toci-quickstart/config/testenv/ovb.yml', 'toci-quickstart/config/collect-logs.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/092e342cbfe824611d9889235558b3a0efc3ad77', 'message': 'Switch image path definitions based on distro\n\nUse the rcm server path when using RHEL 8 in OVB\nsettings files.\n\nChange-Id: I9e65aa973ebd5c2f499b25e61cd14f440e9a7878\n'}]",5,673891,092e342cbfe824611d9889235558b3a0efc3ad77,26,5,6,9976,,,0,"Switch image path definitions based on distro

Use the rcm server path when using RHEL 8 in OVB
settings files.

Change-Id: I9e65aa973ebd5c2f499b25e61cd14f440e9a7878
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/91/673891/6 && git format-patch -1 --stdout FETCH_HEAD,"['toci-quickstart/config/testenv/ovb-rdocloud.yml', 'toci-quickstart/config/testenv/ovb.yml']",2,29407a3ac44674ddc878cbbf20a67b611298c3db,remove-image-ovb-settings,#overcloud_image_url: http://images.rdoproject.org/{{ release }}/rdo_trunk/{{ dlrn_hash|default(dlrn_hash_tag) }}/overcloud-full.tar #ipa_image_url: http://images.rdoproject.org/{{ release }}/rdo_trunk/{{ dlrn_hash|default(dlrn_hash_tag) }}/ironic-python-agent.tar,overcloud_image_url: http://images.rdoproject.org/{{ release }}/rdo_trunk/{{ dlrn_hash|default(dlrn_hash_tag) }}/overcloud-full.tar ipa_image_url: http://images.rdoproject.org/{{ release }}/rdo_trunk/{{ dlrn_hash|default(dlrn_hash_tag) }}/ironic-python-agent.tar,4,4
openstack%2Ftripleo-heat-templates~stable%2Fstein~I399098bf734aa3b2862e1713d4b1f429d180afbc,openstack/tripleo-heat-templates,stable/stein,I399098bf734aa3b2862e1713d4b1f429d180afbc,Fix pcmk remote podman bundle restarts,MERGED,2019-08-07 16:08:59.000000000,2019-08-08 12:18:45.000000000,2019-08-08 12:18:44.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30381}]","[{'number': 1, 'created': '2019-08-07 16:08:59.000000000', 'files': ['deployment/haproxy/haproxy-pacemaker-puppet.yaml', 'deployment/cinder/cinder-backup-pacemaker-puppet.yaml', 'deployment/manila/manila-share-pacemaker-puppet.yaml', 'deployment/database/redis-pacemaker-puppet.yaml', 'deployment/ovn/ovn-dbs-pacemaker-puppet.yaml', 'deployment/cinder/cinder-volume-pacemaker-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-notify-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-rpc-pacemaker-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/e20d02a8b63e83deca47d3d53128c44b4e5ce629', 'message': 'Fix pcmk remote podman bundle restarts\n\nWe blindly bind mount /etc/corosync/corosync.conf from the host to the\ncontainer as that is required by pcs when running on pacemaker nodes\nwhen using pcs 0.9/pcmk 1.x.\n\nWhen running on a pacemaker remote node, this will actually barf on it\nbecause that file does not exist on a remote node:\n\n        ""stderr: error checking path \\""/etc/corosync/corosync.conf\\"": stat /etc/corosync/corosync.conf: no such file or directory"",\n\nThis is not an issue with docker because docker simply creates non\nexisting host bind mount points.\nSo we should not bind mount this when we run podman because podman and\nHA only works on RHEL/CentOS 8 and it is not required there.\n\nTested this on an Stein deployment with RHEL8 as OS and I correctly\nget a composable HA environment using pacemaker remote:\novercloud-database-0    (ocf::pacemaker:remote):        Started overcloud-controller-0\novercloud-database-1    (ocf::pacemaker:remote):        Started overcloud-controller-1\novercloud-database-2    (ocf::pacemaker:remote):        Started overcloud-controller-2\novercloud-messaging-0   (ocf::pacemaker:remote):        Started overcloud-controller-0\novercloud-messaging-1   (ocf::pacemaker:remote):        Started overcloud-controller-1\novercloud-messaging-2   (ocf::pacemaker:remote):        Started overcloud-controller-2\n podman container set: galera-bundle [192.168.24.1:8787/rhosp15/openstack-mariadb:pcmklatest]\n   galera-bundle-0      (ocf::heartbeat:galera):        Master overcloud-database-0\n   galera-bundle-1      (ocf::heartbeat:galera):        Master overcloud-database-1\n   galera-bundle-2      (ocf::heartbeat:galera):        Master overcloud-database-2\n podman container set: redis-bundle [192.168.24.1:8787/rhosp15/openstack-redis:pcmklatest]\n   redis-bundle-0       (ocf::heartbeat:redis): Master overcloud-controller-0\n   redis-bundle-1       (ocf::heartbeat:redis): Slave overcloud-controller-1\n   redis-bundle-2       (ocf::heartbeat:redis): Slave overcloud-controller-2\n podman container set: rabbitmq-bundle [192.168.24.1:8787/rhosp15/openstack-rabbitmq:pcmklatest]\n   rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started overcloud-messaging-0\n   rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started overcloud-messaging-1\n   rabbitmq-bundle-2    (ocf::heartbeat:rabbitmq-cluster):      Started overcloud-messaging-2\nip-192.168.24.12        (ocf::heartbeat:IPaddr2):       Started overcloud-controller-0\nip-10.0.0.106   (ocf::heartbeat:IPaddr2):       Started overcloud-controller-1\nip-172.17.1.68  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-2\nip-172.17.1.89  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-0\nip-172.17.3.23  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-1\nip-172.17.4.41  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-2\n podman container set: haproxy-bundle [192.168.24.1:8787/rhosp15/openstack-haproxy:pcmklatest]\n   haproxy-bundle-podman-0      (ocf::heartbeat:podman):        Started overcloud-controller-0\n   haproxy-bundle-podman-1      (ocf::heartbeat:podman):        Started overcloud-controller-1\n   haproxy-bundle-podman-2      (ocf::heartbeat:podman):        Started overcloud-controller-2\n podman container set: ovn-dbs-bundle [192.168.24.1:8787/rhosp15/openstack-ovn-northd:pcmklatest]\n   ovn-dbs-bundle-0     (ocf::ovn:ovndb-servers):       Master overcloud-controller-0\n   ovn-dbs-bundle-1     (ocf::ovn:ovndb-servers):       Slave overcloud-controller-1\n   ovn-dbs-bundle-2     (ocf::ovn:ovndb-servers):       Slave overcloud-controller-2\nstonith-fence_ipmilan-5254008aa119      (stonith:fence_ipmilan):        Started overcloud-controller-0\nstonith-fence_ipmilan-5254003d74a4      (stonith:fence_ipmilan):        Started overcloud-controller-0\nstonith-fence_ipmilan-525400092968      (stonith:fence_ipmilan):        Started overcloud-controller-1\nstonith-fence_ipmilan-525400439c7e      (stonith:fence_ipmilan):        Started overcloud-controller-0\nstonith-fence_ipmilan-5254002beafa      (stonith:fence_ipmilan):        Started overcloud-controller-2\nstonith-fence_ipmilan-525400bbb6cb      (stonith:fence_ipmilan):        Started overcloud-controller-1\nstonith-fence_ipmilan-5254001b9a8f      (stonith:fence_ipmilan):        Started overcloud-controller-2\nstonith-fence_ipmilan-525400367613      (stonith:fence_ipmilan):        Started overcloud-controller-1\nstonith-fence_ipmilan-525400150f28      (stonith:fence_ipmilan):        Started overcloud-controller-2\n podman container: openstack-cinder-volume [192.168.24.1:8787/rhosp15/openstack-cinder-volume:pcmklatest]\n   openstack-cinder-volume-podman-0     (ocf::heartbeat:podman):        Started overcloud-controller-0\n\nCloses-Bug: #1838279\n\nChange-Id: I399098bf734aa3b2862e1713d4b1f429d180afbc\n(cherry picked from commit bdf742d05f90a57fdd08e73409d417bfcffdb8ab)\n'}]",0,675139,e20d02a8b63e83deca47d3d53128c44b4e5ce629,9,5,1,20172,,,0,"Fix pcmk remote podman bundle restarts

We blindly bind mount /etc/corosync/corosync.conf from the host to the
container as that is required by pcs when running on pacemaker nodes
when using pcs 0.9/pcmk 1.x.

When running on a pacemaker remote node, this will actually barf on it
because that file does not exist on a remote node:

        ""stderr: error checking path \""/etc/corosync/corosync.conf\"": stat /etc/corosync/corosync.conf: no such file or directory"",

This is not an issue with docker because docker simply creates non
existing host bind mount points.
So we should not bind mount this when we run podman because podman and
HA only works on RHEL/CentOS 8 and it is not required there.

Tested this on an Stein deployment with RHEL8 as OS and I correctly
get a composable HA environment using pacemaker remote:
overcloud-database-0    (ocf::pacemaker:remote):        Started overcloud-controller-0
overcloud-database-1    (ocf::pacemaker:remote):        Started overcloud-controller-1
overcloud-database-2    (ocf::pacemaker:remote):        Started overcloud-controller-2
overcloud-messaging-0   (ocf::pacemaker:remote):        Started overcloud-controller-0
overcloud-messaging-1   (ocf::pacemaker:remote):        Started overcloud-controller-1
overcloud-messaging-2   (ocf::pacemaker:remote):        Started overcloud-controller-2
 podman container set: galera-bundle [192.168.24.1:8787/rhosp15/openstack-mariadb:pcmklatest]
   galera-bundle-0      (ocf::heartbeat:galera):        Master overcloud-database-0
   galera-bundle-1      (ocf::heartbeat:galera):        Master overcloud-database-1
   galera-bundle-2      (ocf::heartbeat:galera):        Master overcloud-database-2
 podman container set: redis-bundle [192.168.24.1:8787/rhosp15/openstack-redis:pcmklatest]
   redis-bundle-0       (ocf::heartbeat:redis): Master overcloud-controller-0
   redis-bundle-1       (ocf::heartbeat:redis): Slave overcloud-controller-1
   redis-bundle-2       (ocf::heartbeat:redis): Slave overcloud-controller-2
 podman container set: rabbitmq-bundle [192.168.24.1:8787/rhosp15/openstack-rabbitmq:pcmklatest]
   rabbitmq-bundle-0    (ocf::heartbeat:rabbitmq-cluster):      Started overcloud-messaging-0
   rabbitmq-bundle-1    (ocf::heartbeat:rabbitmq-cluster):      Started overcloud-messaging-1
   rabbitmq-bundle-2    (ocf::heartbeat:rabbitmq-cluster):      Started overcloud-messaging-2
ip-192.168.24.12        (ocf::heartbeat:IPaddr2):       Started overcloud-controller-0
ip-10.0.0.106   (ocf::heartbeat:IPaddr2):       Started overcloud-controller-1
ip-172.17.1.68  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-2
ip-172.17.1.89  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-0
ip-172.17.3.23  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-1
ip-172.17.4.41  (ocf::heartbeat:IPaddr2):       Started overcloud-controller-2
 podman container set: haproxy-bundle [192.168.24.1:8787/rhosp15/openstack-haproxy:pcmklatest]
   haproxy-bundle-podman-0      (ocf::heartbeat:podman):        Started overcloud-controller-0
   haproxy-bundle-podman-1      (ocf::heartbeat:podman):        Started overcloud-controller-1
   haproxy-bundle-podman-2      (ocf::heartbeat:podman):        Started overcloud-controller-2
 podman container set: ovn-dbs-bundle [192.168.24.1:8787/rhosp15/openstack-ovn-northd:pcmklatest]
   ovn-dbs-bundle-0     (ocf::ovn:ovndb-servers):       Master overcloud-controller-0
   ovn-dbs-bundle-1     (ocf::ovn:ovndb-servers):       Slave overcloud-controller-1
   ovn-dbs-bundle-2     (ocf::ovn:ovndb-servers):       Slave overcloud-controller-2
stonith-fence_ipmilan-5254008aa119      (stonith:fence_ipmilan):        Started overcloud-controller-0
stonith-fence_ipmilan-5254003d74a4      (stonith:fence_ipmilan):        Started overcloud-controller-0
stonith-fence_ipmilan-525400092968      (stonith:fence_ipmilan):        Started overcloud-controller-1
stonith-fence_ipmilan-525400439c7e      (stonith:fence_ipmilan):        Started overcloud-controller-0
stonith-fence_ipmilan-5254002beafa      (stonith:fence_ipmilan):        Started overcloud-controller-2
stonith-fence_ipmilan-525400bbb6cb      (stonith:fence_ipmilan):        Started overcloud-controller-1
stonith-fence_ipmilan-5254001b9a8f      (stonith:fence_ipmilan):        Started overcloud-controller-2
stonith-fence_ipmilan-525400367613      (stonith:fence_ipmilan):        Started overcloud-controller-1
stonith-fence_ipmilan-525400150f28      (stonith:fence_ipmilan):        Started overcloud-controller-2
 podman container: openstack-cinder-volume [192.168.24.1:8787/rhosp15/openstack-cinder-volume:pcmklatest]
   openstack-cinder-volume-podman-0     (ocf::heartbeat:podman):        Started overcloud-controller-0

Closes-Bug: #1838279

Change-Id: I399098bf734aa3b2862e1713d4b1f429d180afbc
(cherry picked from commit bdf742d05f90a57fdd08e73409d417bfcffdb8ab)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/39/675139/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/haproxy/haproxy-pacemaker-puppet.yaml', 'deployment/cinder/cinder-backup-pacemaker-puppet.yaml', 'deployment/manila/manila-share-pacemaker-puppet.yaml', 'deployment/database/redis-pacemaker-puppet.yaml', 'deployment/ovn/ovn-dbs-pacemaker-puppet.yaml', 'deployment/cinder/cinder-volume-pacemaker-puppet.yaml', 'deployment/database/mysql-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-notify-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-pacemaker-puppet.yaml', 'deployment/rabbitmq/rabbitmq-messaging-rpc-pacemaker-puppet.yaml']",10,e20d02a8b63e83deca47d3d53128c44b4e5ce629,pcmkremote_restart2-stable/stein," docker_enabled: {equals: [{get_param: ContainerCli}, 'docker']} - if: - docker_enabled - - /etc/corosync/corosync.conf:/etc/corosync/corosync.conf:ro - null - - /bin/true:/bin/epmd - if: - docker_enabled - - /etc/corosync/corosync.conf:/etc/corosync/corosync.conf:ro - null", - /etc/corosync/corosync.conf:/etc/corosync/corosync.conf:ro - - /etc/corosync/corosync.conf:/etc/corosync/corosync.conf:ro - /bin/true:/bin/epmd,94,26
openstack%2Fkolla-ansible~stable%2Frocky~I6fd092f6599c1f9549108715ca7bf7f836dae146,openstack/kolla-ansible,stable/rocky,I6fd092f6599c1f9549108715ca7bf7f836dae146,Rocky-only: add rpcbind to CentOS as well,MERGED,2019-08-07 07:36:35.000000000,2019-08-08 12:11:08.000000000,2019-08-08 12:11:08.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-07 07:36:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/06386d86d4ff3123003ce1c14b2588baa7d20791', 'message': 'Rocky-only: add rpcbind to CentOS as well\n\nGanesha version in CentOS Rocky requires rpcbind just like Ubuntu.\nMoreover, due to RedHat policy of not starting services after\npackage installation, it has to be started by k-a.\n\nChange-Id: I6fd092f6599c1f9549108715ca7bf7f836dae146\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n'}, {'number': 2, 'created': '2019-08-07 08:00:24.000000000', 'files': ['ansible/roles/baremetal/tasks/install.yml', 'ansible/roles/baremetal/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/783ae9336d1ac3181694d40401a75985cff5ebfc', 'message': 'Rocky-only: add rpcbind to CentOS as well\n\nGanesha version in CentOS Rocky requires rpcbind just like Ubuntu.\nMoreover, due to RedHat policy of not starting services after\npackage installation, it has to be started by k-a.\n\nChange-Id: I6fd092f6599c1f9549108715ca7bf7f836dae146\nSigned-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>\n'}]",0,675048,783ae9336d1ac3181694d40401a75985cff5ebfc,14,4,2,30491,,,0,"Rocky-only: add rpcbind to CentOS as well

Ganesha version in CentOS Rocky requires rpcbind just like Ubuntu.
Moreover, due to RedHat policy of not starting services after
package installation, it has to be started by k-a.

Change-Id: I6fd092f6599c1f9549108715ca7bf7f836dae146
Signed-off-by: Radosaw Piliszek <radoslaw.piliszek@gmail.com>
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/48/675048/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/baremetal/tasks/install.yml', 'ansible/roles/baremetal/defaults/main.yml']",2,06386d86d4ff3123003ce1c14b2588baa7d20791,rocky-centos-ganesha," - ""{% if enable_ceph_nfs|bool %}rpcbind{% endif %}""",,9,0
openstack%2Fneutron~master~I40d388543387ebdd72f26d761339c1829bef9413,openstack/neutron,master,I40d388543387ebdd72f26d761339c1829bef9413,fix update port bug,MERGED,2019-07-30 12:06:22.000000000,2019-08-08 11:53:37.000000000,2019-08-07 00:32:50.000000000,"[{'_account_id': 1131}, {'_account_id': 9732}, {'_account_id': 11975}, {'_account_id': 15752}, {'_account_id': 16376}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 26458}, {'_account_id': 26622}, {'_account_id': 29071}, {'_account_id': 30103}, {'_account_id': 30380}]","[{'number': 1, 'created': '2019-07-30 12:06:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ca67d42766c36cea2ab789e7cf6f8a8147863775', 'message': 'fix update port bug\n\nwhen update port set body={""port"": {}}, neutron server will return 500.\n\nIn function _process_port_binding_attributes(plugins/ml2/plugin.py),\nwhen update port body={""port"": {}}\nattrs={}\nvnic_type = attrs and attrs.get(portbindings.VNIC_TYPE)\nvnic_type = {}\nbecause attrs as False, will not execute attrs.get(portbindings.VNIC_TYPE)\nvnic_type will be replicated as attrs.\n\nChange-Id: I40d388543387ebdd72f26d761339c1829bef9413\nPartial-bug: #1838396\n'}, {'number': 2, 'created': '2019-07-30 23:57:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3102b32c2fac48ed43b20defd7417fe107a85427', 'message': 'fix update port bug\n\nwhen update port set body={""port"": {}}, neutron server will return 500.\n\nIn function _process_port_binding_attributes(plugins/ml2/plugin.py),\nwhen update port body={""port"": {}}\nattrs={}\nvnic_type = attrs and attrs.get(portbindings.VNIC_TYPE)\nvnic_type = {}\nbecause attrs as False, will not execute attrs.get(portbindings.VNIC_TYPE)\nvnic_type will be replicated as attrs.\n\nChange-Id: I40d388543387ebdd72f26d761339c1829bef9413\nPartial-bug: #1838396\n'}, {'number': 3, 'created': '2019-08-02 02:09:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0caa0f806269d02643a2e301a6c32142c4db563b', 'message': 'fix update port bug\n\nwhen update port set body={""port"": {}}, neutron server will return 500.\n\nIn function _process_port_binding_attributes(plugins/ml2/plugin.py),\nwhen update port body={""port"": {}}\nattrs={}\nvnic_type = attrs and attrs.get(portbindings.VNIC_TYPE)\nvnic_type = {}\nbecause attrs as False, will not execute attrs.get(portbindings.VNIC_TYPE)\nvnic_type will be replicated as attrs.\n\nChange-Id: I40d388543387ebdd72f26d761339c1829bef9413\nPartial-bug: #1838396\n'}, {'number': 4, 'created': '2019-08-02 02:47:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ca7678c58470146c591dbfa70f66f0352c4d3701', 'message': 'fix update port bug\n\nwhen update port set body={""port"": {}}, neutron server will return 500.\n\nIn function _process_port_binding_attributes(plugins/ml2/plugin.py),\nwhen update port body={""port"": {}}\nattrs={}\nvnic_type = attrs and attrs.get(portbindings.VNIC_TYPE)\nvnic_type = {}\nbecause attrs as False, will not execute attrs.get(portbindings.VNIC_TYPE)\nvnic_type will be replicated as attrs.\n\nChange-Id: I40d388543387ebdd72f26d761339c1829bef9413\nPartial-bug: #1838396\n'}, {'number': 5, 'created': '2019-08-04 09:50:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1a7023d6e5ac6ca2ad74d01a1353e97c284f8917', 'message': 'fix update port bug\n\nwhen update port set body={""port"": {}}, neutron server will return 500.\n\nIn function _process_port_binding_attributes(plugins/ml2/plugin.py),\nwhen update port body={""port"": {}}\nattrs={}\nvnic_type = attrs and attrs.get(portbindings.VNIC_TYPE)\nvnic_type = {}\nbecause attrs as False, will not execute attrs.get(portbindings.VNIC_TYPE)\nvnic_type will be replicated as attrs.\n\nChange-Id: I40d388543387ebdd72f26d761339c1829bef9413\nPartial-bug: #1838396\n'}, {'number': 6, 'created': '2019-08-06 02:30:41.000000000', 'files': ['neutron/tests/unit/plugins/ml2/test_plugin.py', 'neutron/plugins/ml2/plugin.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/dd080c70b423a56a69abf7e52d1fee0cb7988c92', 'message': 'fix update port bug\n\nwhen update port set body={""port"": {}}, neutron server will return 500.\n\nIn function _process_port_binding_attributes(plugins/ml2/plugin.py),\nwhen update port body={""port"": {}}\nattrs={}\nvnic_type = attrs and attrs.get(portbindings.VNIC_TYPE)\nvnic_type = {}\nbecause attrs as False, will not execute attrs.get(portbindings.VNIC_TYPE)\nvnic_type will be replicated as attrs.\n\nChange-Id: I40d388543387ebdd72f26d761339c1829bef9413\nPartial-bug: #1838396\n'}]",9,673486,dd080c70b423a56a69abf7e52d1fee0cb7988c92,107,13,6,30380,,,0,"fix update port bug

when update port set body={""port"": {}}, neutron server will return 500.

In function _process_port_binding_attributes(plugins/ml2/plugin.py),
when update port body={""port"": {}}
attrs={}
vnic_type = attrs and attrs.get(portbindings.VNIC_TYPE)
vnic_type = {}
because attrs as False, will not execute attrs.get(portbindings.VNIC_TYPE)
vnic_type will be replicated as attrs.

Change-Id: I40d388543387ebdd72f26d761339c1829bef9413
Partial-bug: #1838396
",git fetch https://review.opendev.org/openstack/neutron refs/changes/86/673486/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/plugins/ml2/plugin.py'],1,ca67d42766c36cea2ab789e7cf6f8a8147863775,, vnic_type = attrs.get(portbindings.VNIC_TYPE) and attrs, vnic_type = attrs and attrs.get(portbindings.VNIC_TYPE),1,1
openstack%2Foctavia-tempest-plugin~master~I9fa9d7e16f32f516592bf155045d4f4e6a15ed6c,openstack/octavia-tempest-plugin,master,I9fa9d7e16f32f516592bf155045d4f4e6a15ed6c,Fix VIP IPv6 subnet discovery order,MERGED,2019-07-25 14:00:07.000000000,2019-08-08 11:44:54.000000000,2019-08-08 11:44:54.000000000,"[{'_account_id': 6469}, {'_account_id': 10273}, {'_account_id': 11628}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-07-25 14:00:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/032fbc8de2c6e30012ec31b17482c31a9cc53339', 'message': 'Fix VIP IPv6 subnet discovery order\n\nCode was assuming the subnet existed already and only after creating one\nif not. On environments where the subnet does not exist, it raises an\nIndexError exception as there are no elements in priv_ipv6_subnet. This\npatch fixes the order of the code to first create the subnet if ones\ndoes not exist yet.\n\nChange-Id: I9fa9d7e16f32f516592bf155045d4f4e6a15ed6c\nStory: 2006280\nTask: 35982\n'}, {'number': 2, 'created': '2019-07-25 17:18:57.000000000', 'files': ['octavia_tempest_plugin/tests/test_base.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/84af48c0f095b515a1f7bceb68a2991deff7c85d', 'message': 'Fix VIP IPv6 subnet discovery order\n\nCode was assuming the subnet existed already and only after creating one\nif not. On environments where the subnet does not exist, it raises an\nIndexError exception as there are no elements in priv_ipv6_subnet. This\npatch fixes the order of the code to first create the subnet if ones\ndoes not exist yet.\n\nStory: 2006280\nTask: 35982\n\nChange-Id: I9fa9d7e16f32f516592bf155045d4f4e6a15ed6c\n'}]",6,672732,84af48c0f095b515a1f7bceb68a2991deff7c85d,17,4,2,6469,,,0,"Fix VIP IPv6 subnet discovery order

Code was assuming the subnet existed already and only after creating one
if not. On environments where the subnet does not exist, it raises an
IndexError exception as there are no elements in priv_ipv6_subnet. This
patch fixes the order of the code to first create the subnet if ones
does not exist yet.

Story: 2006280
Task: 35982

Change-Id: I9fa9d7e16f32f516592bf155045d4f4e6a15ed6c
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/32/672732/2 && git format-patch -1 --stdout FETCH_HEAD,['octavia_tempest_plugin/tests/test_base.py'],1,032fbc8de2c6e30012ec31b17482c31a9cc53339,story/2006280," if len(priv_ipv6_subnet) == 0: 'ip_version': 6, 'ipv6_address_mode': 'slaac'} elif (priv_ipv6_subnet[0]['ipv6_address_mode'] == 'dhcpv6-stateful'): cls.lb_member_vip_ipv6_subnet_stateful = True if len(priv_ipv6_subnet) == 1: cls.lb_member_vip_ipv6_subnet = priv_ipv6_subnet[0] cls.lb_member_vip_ipv6_net = { 'id': priv_ipv6_subnet[0]['network_id']} ", if (priv_ipv6_subnet[0]['ipv6_address_mode'] == 'dhcpv6-stateful'): cls.lb_member_vip_ipv6_subnet_stateful = True if len(priv_ipv6_subnet) == 1: cls.lb_member_vip_ipv6_subnet = priv_ipv6_subnet[0] cls.lb_member_vip_ipv6_net = { 'id': priv_ipv6_subnet[0]['network_id']} else: 'ip_version': 6},11,9
openstack%2Fkolla-ansible~master~I4f4cbb09df752d00073a606463c62f0a6ca6c067,openstack/kolla-ansible,master,I4f4cbb09df752d00073a606463c62f0a6ca6c067,Stop using MountFlags=shared in Docker configuration,MERGED,2019-08-05 12:19:54.000000000,2019-08-08 11:27:13.000000000,2019-08-08 10:57:03.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2019-08-05 12:19:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/04aa0ee813bfb689c4f8ae290402b23b3128f488', 'message': 'Stop using MountFlags=shared in Docker configuration\n\nAccording to Docker upstream release notes [1] MountFlags should be\nempty.\n\n1. https://docs.docker.com/engine/release-notes/#18091\n\n""Important notes about this release\n\nIn Docker versions prior to 18.09, containerd was managed by the Docker\nengine daemon. In Docker Engine 18.09, containerd is managed by systemd.\nSince containerd is managed by systemd, any custom configuration to the\ndocker.service systemd configuration which changes mount settings (for\nexample, MountFlags=slave) breaks interactions between the Docker Engine\ndaemon and containerd, and you will not be able to start containers.\n\nRun the following command to get the current value of the MountFlags\nproperty for the docker.service:\n\nsudo systemctl show --property=MountFlags docker.service\nMountFlags=\n\nUpdate your configuration if this command prints a non-empty value for\nMountFlags, and restart the docker service.""\n\nCloses-bug: #1833835\n\nChange-Id: I4f4cbb09df752d00073a606463c62f0a6ca6c067\n'}, {'number': 2, 'created': '2019-08-07 11:51:55.000000000', 'files': ['ansible/roles/neutron/tasks/precheck.yml', 'ansible/roles/baremetal/templates/docker_systemd_service.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/35941738d59002f8bbf55d25b3468619983dcea6', 'message': 'Stop using MountFlags=shared in Docker configuration\n\nAccording to Docker upstream release notes [1] MountFlags should be\nempty.\n\n1. https://docs.docker.com/engine/release-notes/#18091\n\n""Important notes about this release\n\nIn Docker versions prior to 18.09, containerd was managed by the Docker\nengine daemon. In Docker Engine 18.09, containerd is managed by systemd.\nSince containerd is managed by systemd, any custom configuration to the\ndocker.service systemd configuration which changes mount settings (for\nexample, MountFlags=slave) breaks interactions between the Docker Engine\ndaemon and containerd, and you will not be able to start containers.\n\nRun the following command to get the current value of the MountFlags\nproperty for the docker.service:\n\nsudo systemctl show --property=MountFlags docker.service\nMountFlags=\n\nUpdate your configuration if this command prints a non-empty value for\nMountFlags, and restart the docker service.""\n\nCloses-bug: #1833835\n\nChange-Id: I4f4cbb09df752d00073a606463c62f0a6ca6c067\n'}]",4,674587,35941738d59002f8bbf55d25b3468619983dcea6,20,5,2,24072,,,0,"Stop using MountFlags=shared in Docker configuration

According to Docker upstream release notes [1] MountFlags should be
empty.

1. https://docs.docker.com/engine/release-notes/#18091

""Important notes about this release

In Docker versions prior to 18.09, containerd was managed by the Docker
engine daemon. In Docker Engine 18.09, containerd is managed by systemd.
Since containerd is managed by systemd, any custom configuration to the
docker.service systemd configuration which changes mount settings (for
example, MountFlags=slave) breaks interactions between the Docker Engine
daemon and containerd, and you will not be able to start containers.

Run the following command to get the current value of the MountFlags
property for the docker.service:

sudo systemctl show --property=MountFlags docker.service
MountFlags=

Update your configuration if this command prints a non-empty value for
MountFlags, and restart the docker service.""

Closes-bug: #1833835

Change-Id: I4f4cbb09df752d00073a606463c62f0a6ca6c067
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/87/674587/2 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/neutron/tasks/precheck.yml', 'ansible/roles/baremetal/templates/docker_systemd_service.j2']",2,04aa0ee813bfb689c4f8ae290402b23b3128f488,bug/1833835,,MountFlags=shared,0,17
openstack%2Fcinderlib~master~I4be36c173796e85379fac0091dc36ce55832d70a,openstack/cinderlib,master,I4be36c173796e85379fac0091dc36ce55832d70a,Sync Sphinx requirement,MERGED,2019-07-31 09:28:07.000000000,2019-08-08 11:01:55.000000000,2019-08-08 11:01:55.000000000,"[{'_account_id': 9535}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2019-07-31 09:28:07.000000000', 'files': ['doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/cinderlib/commit/a6c33c2f7fc6c239218612d712bfe35a38db9bab', 'message': 'Sync Sphinx requirement\n\nSync sphinx dependency with global requirements. It caps python 2 since\nsphinx 2.0 no longer supports Python 2.7.\n\nChange-Id: I4be36c173796e85379fac0091dc36ce55832d70a\n'}]",0,673776,a6c33c2f7fc6c239218612d712bfe35a38db9bab,7,3,1,27822,,,0,"Sync Sphinx requirement

Sync sphinx dependency with global requirements. It caps python 2 since
sphinx 2.0 no longer supports Python 2.7.

Change-Id: I4be36c173796e85379fac0091dc36ce55832d70a
",git fetch https://review.opendev.org/openstack/cinderlib refs/changes/76/673776/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/requirements.txt'],1,a6c33c2f7fc6c239218612d712bfe35a38db9bab,sphinx,"sphinx!=1.6.6,!=1.6.7,>=1.6.2,<2.0.0;python_version=='2.7' # BSD sphinx!=1.6.6,!=1.6.7,!=2.1.0,>=1.6.2;python_version>='3.4' # BSD","sphinx!=1.6.6,!=1.6.7,>=1.6.2 # BSD",2,1
openstack%2Fkolla-ansible~master~Iddaece4b8e4972614b77237fb02920dbfd8d96ba,openstack/kolla-ansible,master,Iddaece4b8e4972614b77237fb02920dbfd8d96ba,Add event definitions for manila,NEW,2019-08-08 09:29:00.000000000,2019-08-08 10:59:44.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-08 09:29:00.000000000', 'files': ['ansible/roles/ceilometer/templates/event_definitions.yaml.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/d7f30cd1094408431d93f3305ce393d0ec2af8e0', 'message': 'Add event definitions for manila\n\nThe event of manila is available, refer to link [1].\n\n[1] https://github.com/openstack/ceilometer/blob/stable/rocky/ceilometer/pipeline/data/event_definitions.yaml#L101\n\nChange-Id: Iddaece4b8e4972614b77237fb02920dbfd8d96ba\nSigned-off-by: ZijianGuo <guozijn@gmail.com>\n'}]",0,675280,d7f30cd1094408431d93f3305ce393d0ec2af8e0,2,1,1,28367,,,0,"Add event definitions for manila

The event of manila is available, refer to link [1].

[1] https://github.com/openstack/ceilometer/blob/stable/rocky/ceilometer/pipeline/data/event_definitions.yaml#L101

Change-Id: Iddaece4b8e4972614b77237fb02920dbfd8d96ba
Signed-off-by: ZijianGuo <guozijn@gmail.com>
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/80/675280/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/ceilometer/templates/event_definitions.yaml.j2'],1,d7f30cd1094408431d93f3305ce393d0ec2af8e0,manila-event,"- event_type: ['share.create.*', 'share.delete.*', 'share.extend.*', 'share.shrink.*'] traits: &share_traits share_id: fields: payload.share_id user_id: fields: payload.user_id project_id: fields: payload.tenant_id snapshot_id: fields: payload.snapshot_id availability_zone: fields: payload.availability_zone status: fields: payload.status created_at: fields: payload.created_at share_group_id: fields: payload.share_group_id size: fields: payload.size name: fields: payload.name proto: fields: payload.proto is_public: fields: payload.is_public description: fields: payload.description host: fields: payload.host",,30,0
openstack%2Ftripleo-common~stable%2Fqueens~I242f7bb718b08724da21cafa86d3e8853d0ff453,openstack/tripleo-common,stable/queens,I242f7bb718b08724da21cafa86d3e8853d0ff453,Use internal endpoints for configuration in octavia nodes,MERGED,2019-08-06 08:07:00.000000000,2019-08-08 10:53:43.000000000,2019-08-08 10:53:43.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 08:07:00.000000000', 'files': ['playbooks/octavia-files.yaml', 'workbooks/octavia_post.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/6d75852f822c78766ba53024d09f4fd666399d3c', 'message': 'Use internal endpoints for configuration in octavia nodes\n\nWhen running configuration steps for octavia in octavia nodes, use\ninternal endpoints since public endpoints may not be available due to\nnetwork topology (spine-leaf network + octavia in networkers).\n\nSpecific to stable/queens: updated workbooks/octavia_post.yaml to\nexport os_int_auth_url variable.\n\nDepends-On: https://review.opendev.org/#/c/674750/\n\nCloses-Bug: #1835171\nChange-Id: I242f7bb718b08724da21cafa86d3e8853d0ff453\n(cherry picked from tripleo-ansible commit\n6deec581ac00b3901570f9f4e4768a266cea37e1)\n(cherry picked from commit fd44741029dc65d934d8c32b5d8fa5cbc70eefe4)\n(cherry picked from commit 3d537b21ecae9b413514e5d3c7b878ae5bb5dc81)\n'}]",0,674752,6d75852f822c78766ba53024d09f4fd666399d3c,7,3,1,29244,,,0,"Use internal endpoints for configuration in octavia nodes

When running configuration steps for octavia in octavia nodes, use
internal endpoints since public endpoints may not be available due to
network topology (spine-leaf network + octavia in networkers).

Specific to stable/queens: updated workbooks/octavia_post.yaml to
export os_int_auth_url variable.

Depends-On: https://review.opendev.org/#/c/674750/

Closes-Bug: #1835171
Change-Id: I242f7bb718b08724da21cafa86d3e8853d0ff453
(cherry picked from tripleo-ansible commit
6deec581ac00b3901570f9f4e4768a266cea37e1)
(cherry picked from commit fd44741029dc65d934d8c32b5d8fa5cbc70eefe4)
(cherry picked from commit 3d537b21ecae9b413514e5d3c7b878ae5bb5dc81)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/52/674752/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/octavia-files.yaml', 'workbooks/octavia_post.yaml']",2,6d75852f822c78766ba53024d09f4fd666399d3c,bug/1835171, - overcloud_int_auth_uri os_int_auth_url: <% $.overcloud_int_auth_uri %> os_int_auth_url: <% $.overcloud_int_auth_uri %>,,9,2
openstack%2Ftripleo-common~stable%2Fstein~I242f7bb718b08724da21cafa86d3e8853d0ff453,openstack/tripleo-common,stable/stein,I242f7bb718b08724da21cafa86d3e8853d0ff453,Use internal endpoints for configuration in octavia nodes,MERGED,2019-08-06 08:04:33.000000000,2019-08-08 10:53:42.000000000,2019-08-08 10:53:42.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 08:04:33.000000000', 'files': ['playbooks/octavia-files.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/bffd83737a22ff5c40c8dca4830ca4e20615d496', 'message': 'Use internal endpoints for configuration in octavia nodes\n\nWhen running configuration steps for octavia in octavia nodes, use\ninternal endpoints since public endpoints may not be available due to\nnetwork topology (spine-leaf network + octavia in networkers).\n\nDepends-On: https://review.opendev.org/#/c/674747/\n\nCloses-Bug: #1835171\nChange-Id: I242f7bb718b08724da21cafa86d3e8853d0ff453\n(cherry picked from tripleo-ansible commit\n6deec581ac00b3901570f9f4e4768a266cea37e1)\n'}]",0,674748,bffd83737a22ff5c40c8dca4830ca4e20615d496,7,3,1,29244,,,0,"Use internal endpoints for configuration in octavia nodes

When running configuration steps for octavia in octavia nodes, use
internal endpoints since public endpoints may not be available due to
network topology (spine-leaf network + octavia in networkers).

Depends-On: https://review.opendev.org/#/c/674747/

Closes-Bug: #1835171
Change-Id: I242f7bb718b08724da21cafa86d3e8853d0ff453
(cherry picked from tripleo-ansible commit
6deec581ac00b3901570f9f4e4768a266cea37e1)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/48/674748/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/octavia-files.yaml'],1,bffd83737a22ff5c40c8dca4830ca4e20615d496,bug/1835171," OS_AUTH_URL: ""{{ os_int_auth_url }}"" OS_INTERFACE: ""internal"" OS_ENDPOINT_TYPE: ""internal"" OS_AUTH_URL: ""{{ os_int_auth_url }}"" OS_INTERFACE: ""internal"" OS_ENDPOINT_TYPE: ""internal"""," OS_AUTH_URL: ""{{ os_auth_url }}"" OS_AUTH_URL: ""{{ os_auth_url }}""",6,2
openstack%2Ftripleo-heat-templates~stable%2Fqueens~I6f4abab5ea6963f6f5ac55e6b85bb80e1e68753d,openstack/tripleo-heat-templates,stable/queens,I6f4abab5ea6963f6f5ac55e6b85bb80e1e68753d,Add internal keystone endpoint in octavia variables,MERGED,2019-08-06 08:06:04.000000000,2019-08-08 10:53:40.000000000,2019-08-08 10:53:39.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-08-06 08:06:04.000000000', 'files': ['docker/services/octavia/octavia-deployment-config.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/937bae534abd059318a31c87dc3bd3dbbfbc42e3', 'message': 'Add internal keystone endpoint in octavia variables\n\nAdded a new variable for using internal keystone endpoint in octavia\nansible playbooks when deploying and configuring octavia services.\n\nCloses-Bug: #1835171\nChange-Id: I6f4abab5ea6963f6f5ac55e6b85bb80e1e68753d\n(cherry picked from commit 92be0c603c90285528a703dc9028204e2b59b09f)\n(cherry picked from commit 1a74f7557ec159e9e844c7b5897aaf566a9b3a0c)\n(cherry picked from commit de71fbfcaa9f6e0632d1704f4acfae756711906b)\n'}]",0,674750,937bae534abd059318a31c87dc3bd3dbbfbc42e3,7,3,1,29244,,,0,"Add internal keystone endpoint in octavia variables

Added a new variable for using internal keystone endpoint in octavia
ansible playbooks when deploying and configuring octavia services.

Closes-Bug: #1835171
Change-Id: I6f4abab5ea6963f6f5ac55e6b85bb80e1e68753d
(cherry picked from commit 92be0c603c90285528a703dc9028204e2b59b09f)
(cherry picked from commit 1a74f7557ec159e9e844c7b5897aaf566a9b3a0c)
(cherry picked from commit de71fbfcaa9f6e0632d1704f4acfae756711906b)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/50/674750/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/services/octavia/octavia-deployment-config.yaml'],1,937bae534abd059318a31c87dc3bd3dbbfbc42e3,bug/1835171," overcloud_int_auth_uri: { get_param: [EndpointMap, KeystoneInternal, uri] }",,1,0
