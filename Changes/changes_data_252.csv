id,project,branch,change_id,subject,status,created,updated,submitted,reviewers,revisions,total_comment_count,number,current_revision,discussion_messages_count,reviewers_count,revisions_count,owner_account_id,owner_name,owner_username,is_owner_bot,commit_message,git_command,changed_files,files_count,commit_id,topic,added_lines,deleted_lines,insertions,deletions
openstack%2Fironic~master~Ia95a68729f684a06c722539816eadea5ebb80d1a,openstack/ironic,master,Ia95a68729f684a06c722539816eadea5ebb80d1a,Account for power interfaces that cannot power on,MERGED,2020-07-17 14:13:01.000000000,2020-07-23 05:19:04.000000000,2020-07-23 04:48:48.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 30100}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-17 14:13:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/d068ac0e1f8670806916e6047cb0313f5fac6e24', 'message': 'Account for power interfaces that cannot power on\n\nThe future agent power interface will only be capable of rebooting, so:\n1) Adjust agent_base to be able to use reboot instead power off+on\n2) Adjust power sync to avoid trying to force power state for such nodes\n\nChange-Id: Ia95a68729f684a06c722539816eadea5ebb80d1a\nStory: #2007771\nTask: #40381\n'}, {'number': 2, 'created': '2020-07-17 15:32:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/e6be636c0535c24e80f28c9f21cdccf73e09d743', 'message': 'Account for power interfaces that cannot power on\n\nThe future agent power interface will only be capable of rebooting, so:\n1) Adjust agent_base to be able to use reboot instead power off+on\n2) Adjust power sync to avoid trying to force power state for such nodes\n\nChange-Id: Ia95a68729f684a06c722539816eadea5ebb80d1a\nStory: #2007771\nTask: #40381\n'}, {'number': 3, 'created': '2020-07-20 07:45:18.000000000', 'files': ['releasenotes/notes/no-power-on-842b21d55b07a632.yaml', 'ironic/conductor/manager.py', 'ironic/tests/unit/drivers/modules/test_agent_base.py', 'ironic/drivers/modules/agent_base.py', 'ironic/drivers/base.py', 'ironic/tests/unit/conductor/test_manager.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/e804f6c56bbfc9c71dda9096710ad6288b5d618a', 'message': 'Account for power interfaces that cannot power on\n\nThe future agent power interface will only be capable of rebooting, so:\n1) Adjust agent_base to be able to use reboot instead power off+on\n2) Adjust power sync to avoid trying to force power state for such nodes\n\nChange-Id: Ia95a68729f684a06c722539816eadea5ebb80d1a\nStory: #2007771\nTask: #40381\n'}]",1,741650,e804f6c56bbfc9c71dda9096710ad6288b5d618a,26,8,3,10239,,,0,"Account for power interfaces that cannot power on

The future agent power interface will only be capable of rebooting, so:
1) Adjust agent_base to be able to use reboot instead power off+on
2) Adjust power sync to avoid trying to force power state for such nodes

Change-Id: Ia95a68729f684a06c722539816eadea5ebb80d1a
Story: #2007771
Task: #40381
",git fetch https://review.opendev.org/openstack/ironic refs/changes/50/741650/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/conductor/manager.py', 'ironic/drivers/modules/agent_base.py', 'ironic/tests/unit/drivers/modules/test_agent_base.py', 'ironic/drivers/base.py', 'ironic/tests/unit/conductor/test_manager.py']",5,d068ac0e1f8670806916e6047cb0313f5fac6e24,story/2007771," def test_no_power_sync_support(self, mock_power_update, node_power_action): self.config(force_power_state_during_sync=True, group='conductor') self.power.supports_power_sync.return_value = False self._do_sync_power_state(states.POWER_ON, states.POWER_OFF) self.assertFalse(self.power.validate.called) self.power.get_power_state.assert_called_once_with(self.task) self.assertFalse(node_power_action.called) self.assertEqual(states.POWER_OFF, self.node.power_state) self.task.upgrade_lock.assert_called_once_with() mock_power_update.assert_called_once_with( self.task.context, self.node.instance_uuid, states.POWER_OFF) @mock.patch.object(nova, 'power_update', autospec=True)",,90,3
openstack%2Ftripleo-quickstart-extras~master~Id67cee0b03e2e3671378f8a0ebf53a821606fbdf,openstack/tripleo-quickstart-extras,master,Id67cee0b03e2e3671378f8a0ebf53a821606fbdf,overcloud-deploy: do not enable debug callback in ansible.cfg,MERGED,2020-07-22 19:12:18.000000000,2020-07-23 04:31:14.000000000,2020-07-23 04:31:14.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 9976}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-22 19:12:18.000000000', 'files': ['roles/overcloud-deploy/templates/ansible.cfg.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/9e5c23b88c16726c7f8f184d50fb84900d9b11e5', 'message': ""overcloud-deploy: do not enable debug callback in ansible.cfg\n\nSomething in Ansible 2.9.10 is now loading that variable and makes the\novercloud_deploy logs to be 200+ MBs, which isn't acceptable.\n\nLet's just remove that callback from ansible.cfg; this shouldn't be\nneeded.\n\nChange-Id: Id67cee0b03e2e3671378f8a0ebf53a821606fbdf\n""}]",0,742517,9e5c23b88c16726c7f8f184d50fb84900d9b11e5,10,6,1,3153,,,0,"overcloud-deploy: do not enable debug callback in ansible.cfg

Something in Ansible 2.9.10 is now loading that variable and makes the
overcloud_deploy logs to be 200+ MBs, which isn't acceptable.

Let's just remove that callback from ansible.cfg; this shouldn't be
needed.

Change-Id: Id67cee0b03e2e3671378f8a0ebf53a821606fbdf
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/17/742517/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-deploy/templates/ansible.cfg.j2'],1,9e5c23b88c16726c7f8f184d50fb84900d9b11e5,stdout,,stdout_callback=debug,0,1
openstack%2Ftripleo-heat-templates~stable%2Ftrain~Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529,openstack/tripleo-heat-templates,stable/train,Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529,Remove /run from some services,MERGED,2020-07-20 18:55:44.000000000,2020-07-23 04:06:49.000000000,2020-07-23 04:06:49.000000000,"[{'_account_id': 20172}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-20 18:55:44.000000000', 'files': ['deployment/database/redis-container-puppet.yaml', 'deployment/swift/swift-proxy-container-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/31d8500d96f77ffc1e034a9a427cd0daaa416d7f', 'message': 'Remove /run from some services\n\nredis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind\nmounted from the host.  As a matter of fact bind-mounting /run is\nproblematic due to a number of reasons (see LP#1883849 for more\nbackground). In particular swift-proxy is the only swift container\n(out of 9) that has /run bind-mounted.\n\nThese three services always had /run from the very beginning:\n- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f\n- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456\n- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94\n\nTested this by applying this patch on a train deployment and\ndeployed an undercloud and an overcloud with it.\nVerified that:\nA) /run:/run is not present in the three containers\nB) Deploy of UC and OC worked correctly\nC) Tempest still works\nD) Restarting the swift_proxy and nova_scheduler works correctly\nE) Reboot the overcloud worked okay and tempest still works after the\n   full overcloud reboot\nF) Ran a minor UC update\nG) Ran a minor update on all nodes and tempest still worked\nH) Ran a redeploy on all nodes and tempest still worked\n\nNB: I did not investigate other containers that bind mount /run\nbecause they 1) seem to need it and 2) had no means to do proper\ntesting.\n\nNB2: Note that while once we rebuild containers with\nI81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not\nstrictly needed for the LP bug, but is a nice cleanup nonetheless.\nSo this is to be backported only if rebuilding containers is\na problematic/costly move\n\nChange-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529\nRelated-Bug: #1883849\n(cherry picked from commit bd4b57c2690e7e341691bcf4e3aa15af36978936)\n'}]",0,742010,31d8500d96f77ffc1e034a9a427cd0daaa416d7f,15,4,1,20172,,,0,"Remove /run from some services

redis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind
mounted from the host.  As a matter of fact bind-mounting /run is
problematic due to a number of reasons (see LP#1883849 for more
background). In particular swift-proxy is the only swift container
(out of 9) that has /run bind-mounted.

These three services always had /run from the very beginning:
- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f
- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456
- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94

Tested this by applying this patch on a train deployment and
deployed an undercloud and an overcloud with it.
Verified that:
A) /run:/run is not present in the three containers
B) Deploy of UC and OC worked correctly
C) Tempest still works
D) Restarting the swift_proxy and nova_scheduler works correctly
E) Reboot the overcloud worked okay and tempest still works after the
   full overcloud reboot
F) Ran a minor UC update
G) Ran a minor update on all nodes and tempest still worked
H) Ran a redeploy on all nodes and tempest still worked

NB: I did not investigate other containers that bind mount /run
because they 1) seem to need it and 2) had no means to do proper
testing.

NB2: Note that while once we rebuild containers with
I81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not
strictly needed for the LP bug, but is a nice cleanup nonetheless.
So this is to be backported only if rebuilding containers is
a problematic/costly move

Change-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529
Related-Bug: #1883849
(cherry picked from commit bd4b57c2690e7e341691bcf4e3aa15af36978936)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/10/742010/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/redis-container-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml', 'deployment/swift/swift-proxy-container-puppet.yaml']",3,31d8500d96f77ffc1e034a9a427cd0daaa416d7f,prune-run-stable/ussuri-stable/train,, - /run:/run,0,3
openstack%2Fpython-tripleoclient~stable%2Ftrain~I994353a6d4aa6b72e9fecc5f61bf5314a5a94963,openstack/python-tripleoclient,stable/train,I994353a6d4aa6b72e9fecc5f61bf5314a5a94963,Don't use stack name in default config_download_dir,ABANDONED,2020-07-15 10:36:15.000000000,2020-07-23 04:00:47.000000000,,"[{'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-15 10:36:15.000000000', 'files': ['tripleoclient/tests/v1/test_overcloud_export.py', 'tripleoclient/v1/overcloud_export.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/66bb81b66cec5c8cad40c9f6bb2071f311dee4cf', 'message': ""Don't use stack name in default config_download_dir\n\nWe create a subfolder with the plan/stack name under the\nconfig_download_dir to store the config-downloaded artifacts.\nFix 'overcloud export' as users are not expected to specify\nthe path with the plan/stack name.\n\nChange-Id: I994353a6d4aa6b72e9fecc5f61bf5314a5a94963\nRelated-Bug: #1884246\n(cherry picked from commit e4d9bb17be805ae7bbb844f65c9f28d4d22b44e1)\n""}]",4,741151,66bb81b66cec5c8cad40c9f6bb2071f311dee4cf,5,3,1,8833,,,0,"Don't use stack name in default config_download_dir

We create a subfolder with the plan/stack name under the
config_download_dir to store the config-downloaded artifacts.
Fix 'overcloud export' as users are not expected to specify
the path with the plan/stack name.

Change-Id: I994353a6d4aa6b72e9fecc5f61bf5314a5a94963
Related-Bug: #1884246
(cherry picked from commit e4d9bb17be805ae7bbb844f65c9f28d4d22b44e1)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/51/741151/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/tests/v1/test_overcloud_export.py', 'tripleoclient/v1/overcloud_export.py']",2,66bb81b66cec5c8cad40c9f6bb2071f311dee4cf,," '$HOME/config-download')) config_download_dir = os.path.join(os.environ.get('HOME'), 'config-download')"," '/var/lib/mistral/<stack>')) config_download_dir = os.path.join('/var/lib/mistral', parsed_args.stack)",9,5
openstack%2Fironic~master~I9e17f48f83444b5e2cab63a2041e77e860ce6df5,openstack/ironic,master,I9e17f48f83444b5e2cab63a2041e77e860ce6df5,Remove old driver name from cross-gating job,MERGED,2020-07-15 15:39:40.000000000,2020-07-23 03:52:55.000000000,2020-07-23 03:14:54.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 24828}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-07-15 15:39:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/770819199655fa19648329e846232d4dcfda7200', 'message': 'Remove old driver name from cross-gating job\n\nAlaises the old name of the cross gating job to the new name\nso we can change jobs in other projects without breaking the world.\n\nChange-Id: I9e17f48f83444b5e2cab63a2041e77e860ce6df5\n'}, {'number': 2, 'created': '2020-07-16 19:44:50.000000000', 'files': ['zuul.d/ironic-jobs.yaml', 'zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/53f751dcfd86594160dc9be92b616ef5d0d70623', 'message': 'Remove old driver name from cross-gating job\n\nAlaises the old name of the cross gating job to the new name\nso we can change jobs in other projects without breaking the world.\n\nChange-Id: I9e17f48f83444b5e2cab63a2041e77e860ce6df5\n'}]",2,741254,53f751dcfd86594160dc9be92b616ef5d0d70623,24,6,2,11655,,,0,"Remove old driver name from cross-gating job

Alaises the old name of the cross gating job to the new name
so we can change jobs in other projects without breaking the world.

Change-Id: I9e17f48f83444b5e2cab63a2041e77e860ce6df5
",git fetch https://review.opendev.org/openstack/ironic refs/changes/54/741254/2 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/ironic-jobs.yaml'],1,770819199655fa19648329e846232d4dcfda7200,741254, name: ironic-tempest-wholedisk-bios-ipmi-direct-tinyipa description: ironic-tempest-wholedisk-bios-ipmi-direct-tinyipa that also tests cleaning. name: ironic-tempest-ipa-wholedisk-bios-agent_ipmitool-tinyipa description: Alias for ironic-tempest-wholedisk-bios-ipmi-direct-tinyipa parent: ironic-tempest-wholedisk-bios-ipmi-direct-tinyipa - job:, name: ironic-tempest-ipa-wholedisk-bios-agent_ipmitool-tinyipa description: ironic-tempest-ipa-wholedisk-bios-agent_ipmitool-tinyipa that also tests cleaning.,7,2
openstack%2Fironic~master~I57c442a4bf54fae6cd0d5e9091460606fc0bd995,openstack/ironic,master,I57c442a4bf54fae6cd0d5e9091460606fc0bd995,Substrate fixes and changes for adoption testing,ABANDONED,2016-07-20 18:19:45.000000000,2020-07-23 02:57:27.000000000,,"[{'_account_id': 10118}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 12356}, {'_account_id': 14525}, {'_account_id': 14629}, {'_account_id': 17998}, {'_account_id': 19003}, {'_account_id': 19339}, {'_account_id': 20311}]","[{'number': 1, 'created': '2016-07-20 18:19:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/2aa56b737113147347adb6f3237849de87280746', 'message': 'Substrate fixes and changes for adoption testing\n\nUpon creation of a tempest test for node adoption,\nthe API client used for tempest tests was found to\nlack some required functionality and contain some\nbugs that needed to be addressed.\n\nChange-Id: I57c442a4bf54fae6cd0d5e9091460606fc0bd995\nPartial-Bug: #1526315\n'}, {'number': 2, 'created': '2016-07-21 13:21:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/46324b7af40a72b1055a309cf97c714b148cd49c', 'message': 'Substrate fixes and changes for adoption testing\n\nUpon creation of a tempest test for node adoption,\nthe API client used for tempest tests was found to\nlack some required functionality and contain some\nbugs that needed to be addressed.\n\nChange-Id: I57c442a4bf54fae6cd0d5e9091460606fc0bd995\nPartial-Bug: #1526315\n'}, {'number': 3, 'created': '2016-07-22 19:18:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/4d6ae8e5cdeb104d8e9cc57e6b91f0da2dfd8f58', 'message': 'Substrate fixes and changes for adoption testing\n\nUpon creation of a tempest test for node adoption,\nthe API client used for tempest tests was found to\nlack some required functionality and contain some\nbugs that needed to be addressed.\n\nChange-Id: I57c442a4bf54fae6cd0d5e9091460606fc0bd995\nPartial-Bug: #1526315\n'}, {'number': 4, 'created': '2016-08-22 13:47:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/7456da9c51904251161b96c8c2be01724ac7976f', 'message': 'Substrate fixes and changes for adoption testing\n\nUpon creation of a tempest test for node adoption,\nthe API client used for tempest tests was found to\nlack some required functionality and contain some\nbugs that needed to be addressed.\n\nChange-Id: I57c442a4bf54fae6cd0d5e9091460606fc0bd995\nPartial-Bug: #1526315\n'}, {'number': 5, 'created': '2016-08-22 19:27:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8e02dfabaaf57cc3d23da57ee74701428f2d930f', 'message': 'Substrate fixes and changes for adoption testing\n\nUpon creation of a tempest test for node adoption,\nthe API client used for tempest tests was found to\nlack some required functionality and contain some\nbugs that needed to be addressed.\n\nChange-Id: I57c442a4bf54fae6cd0d5e9091460606fc0bd995\nPartial-Bug: #1526315\n'}, {'number': 6, 'created': '2016-10-07 19:02:48.000000000', 'files': ['ironic_tempest_plugin/tests/scenario/baremetal_manager.py', 'ironic_tempest_plugin/config.py', 'ironic_tempest_plugin/services/baremetal/v1/json/baremetal_client.py', 'ironic_tempest_plugin/services/baremetal/base.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/1e24475a3c67f6008e04584e4e3c0c323487e6f4', 'message': 'Substrate fixes and changes for adoption testing\n\nUpon creation of a tempest test for node adoption,\nthe API client used for tempest tests was found to\nlack some required functionality and contain some\nbugs that needed to be addressed.\n\nChange-Id: I57c442a4bf54fae6cd0d5e9091460606fc0bd995\nPartial-Bug: #1526315\n'}]",27,344974,1e24475a3c67f6008e04584e4e3c0c323487e6f4,48,10,6,11655,,,0,"Substrate fixes and changes for adoption testing

Upon creation of a tempest test for node adoption,
the API client used for tempest tests was found to
lack some required functionality and contain some
bugs that needed to be addressed.

Change-Id: I57c442a4bf54fae6cd0d5e9091460606fc0bd995
Partial-Bug: #1526315
",git fetch https://review.opendev.org/openstack/ironic refs/changes/74/344974/6 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_tempest_plugin/tests/scenario/baremetal_manager.py', 'ironic_tempest_plugin/services/baremetal/v1/json/baremetal_client.py', 'ironic_tempest_plugin/services/baremetal/base.py']",3,2aa56b737113147347adb6f3237849de87280746,bug/1526315, # NOTE(TheJulia): This method only works for # pre-existing values. New values must have # the operation set to 'add'.,,166,2
openstack%2Fbifrost~master~Ic19d78b8136ba44272b4eb877cd7dd447ba08ceb,openstack/bifrost,master,Ic19d78b8136ba44272b4eb877cd7dd447ba08ceb,POC: Overriding the GIT server,ABANDONED,2017-03-06 14:20:15.000000000,2020-07-23 02:57:10.000000000,,"[{'_account_id': 3}, {'_account_id': 9542}, {'_account_id': 16704}, {'_account_id': 18893}, {'_account_id': 22474}]","[{'number': 1, 'created': '2017-03-06 14:20:15.000000000', 'files': ['playbooks/roles/bifrost-ironic-install/defaults/main.yml', 'playbooks/roles/bifrost-prep-for-install/defaults/main.yml', 'playbooks/roles/bifrost-keystone-install/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/5e58cc5d81158101a0942efe012bf55f1eb729ec', 'message': 'POC: Overriding the GIT server\n\nChange-Id: Ic19d78b8136ba44272b4eb877cd7dd447ba08ceb\n'}]",8,441958,5e58cc5d81158101a0942efe012bf55f1eb729ec,9,5,1,11655,,,0,"POC: Overriding the GIT server

Change-Id: Ic19d78b8136ba44272b4eb877cd7dd447ba08ceb
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/58/441958/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/roles/bifrost-ironic-install/defaults/main.yml', 'playbooks/roles/bifrost-prep-for-install/defaults/main.yml', 'playbooks/roles/bifrost-keystone-install/defaults/main.yml']",3,5e58cc5d81158101a0942efe012bf55f1eb729ec,,"# git_server can be overridden to support local git mirrors. git_server: ""https://git.openstack.org/"" keystone_git_url: ""{{ git_Server }}openstack/keystone""",keystone_git_url: https://git.openstack.org/openstack/keystone,26,17
openstack%2Fneutron-specs~master~Id74f478fbacaea8afe2c8e303ef508f9e2ffda71,openstack/neutron-specs,master,Id74f478fbacaea8afe2c8e303ef508f9e2ffda71,SSL VPN for multi-client remote access,ABANDONED,2019-09-03 08:29:51.000000000,2020-07-23 02:25:47.000000000,,"[{'_account_id': 4694}, {'_account_id': 10068}, {'_account_id': 11975}, {'_account_id': 17021}, {'_account_id': 22348}, {'_account_id': 23922}, {'_account_id': 30837}]","[{'number': 1, 'created': '2019-09-03 08:29:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-specs/commit/5e0a08403badbd2ac4eec1613ff93ca614833430', 'message': ""SSL VPN for multi-client remote access\n\nSSL VPN is a good choice when we want to access the company's internal\nservices at home or on a business trip, but currently OpenStack neutron does not\nsupport it. The spec introduces a new extension of sslvpn to support\nmulti-client remote access.\n\nChange-Id: Id74f478fbacaea8afe2c8e303ef508f9e2ffda71\nImplements: blueprint neutron-sslvpn\n""}, {'number': 2, 'created': '2019-09-04 01:09:37.000000000', 'files': ['specs/stein/neutron-sslvpn.rst'], 'web_link': 'https://opendev.org/openstack/neutron-specs/commit/f215ab0d50d60f78723828ad266048c72f5dd6d4', 'message': ""SSL VPN for multi-client remote access\n\nSSL VPN is a good choice when we want to access the company's internal\nservices at home or on a business trip, but currently OpenStack neutron does not\nsupport it. The spec introduces a new extension of sslvpn to support\nmulti-client remote access.\n\nChange-Id: Id74f478fbacaea8afe2c8e303ef508f9e2ffda71\nImplements: blueprint neutron-sslvpn\n""}]",0,679715,f215ab0d50d60f78723828ad266048c72f5dd6d4,11,7,2,30837,,,0,"SSL VPN for multi-client remote access

SSL VPN is a good choice when we want to access the company's internal
services at home or on a business trip, but currently OpenStack neutron does not
support it. The spec introduces a new extension of sslvpn to support
multi-client remote access.

Change-Id: Id74f478fbacaea8afe2c8e303ef508f9e2ffda71
Implements: blueprint neutron-sslvpn
",git fetch https://review.opendev.org/openstack/neutron-specs refs/changes/15/679715/2 && git format-patch -1 --stdout FETCH_HEAD,['specs/stein/neutron-sslvpn.rst'],1,5e0a08403badbd2ac4eec1613ff93ca614833430,bp/neutron-sslvpn,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode ====================================== SSL VPN for multi-client remote access ====================================== Launchpad blueprint: https://blueprints.launchpad.net/neutron/+spec/neutron-sslvpn SSL VPN is a good choice when we want to access the company's internal services at home or on a business trip, but currently OpenStack neutron does not support it. The spec introduces a new extension of sslvpn to support multi-client remote access. Problem Description =================== According to different technical protocol standards and application scopes, VPNs are classified into MPLS VPN, IPsec VPN, and SSL VPN. MPLS VPN is built on a dedicated network to ensure good service quality, but at the same price as traditional leased lines. IPSec/SSL VPN is carried on the public Internet, and the quality of service is basically not guaranteed, but the cost is relatively low. MPLS VPN mainly solves the problem of interconnection between fixed sites. It is generally implemented without the aid of the Internet. It is convenient to guarantee the quality of service and security, and is suitable for the networking of large and medium-sized customers. The main solution for IPSec VPN and SSL VPN is based on Remote access and interconnection of the Internet, they are more suitable for customers who are particularly sensitive to price, such as commercial customers. IPSec VPN and SSL VPN have their own advantages in different fields. When a user implementing a fixed site-to-site accesses a VPN, IPSec VPN technology is generally adopted. When a mobile user implementing a common application accesses a VPN, SSL VPN is usually adopted. Networking-bgpvpn provides support for MPLS VPN, neutron-vpnaas provides support for IPsec VPN, but SSL VPN has not yet been supported by neutron. This spec attempts to add a new neutron extension to provide support for SSL VPN. Typical use cases ----------------- 1. Administrator creates SSL VPN server:: openstack sslvpn server create ... --router <router_id> <name> 2. User creates SSL VPN client certificate:: openstack sslvpn client ovpn create --server <sslvpn_server_id> <name> 3. User downloads certificate:: openstack sslvpn client ovpn show --save <file_name> <sslvpn_client_ovpn_id> 4. User starts SSL VPN:: openvpn --config /etc/openvpn/conf/config.ovpn --daemon Proposed Change =============== In order to achieve this extension, OpenVPN and easy-rsa are used in this spec. (OpenVPN is a full-featured open source SSL VPN solution that accommodates a wide range of configurations, including remote access, site-to-site VPNs, Wi-Fi security, and enterprise-scale remote access solutions with load balancing, failover, and fine-grained access-controls. easy-rsa is a CLI utility to build and manage a PKI CA.) When creating sslvpn server, make sure that PKI has been initialized and CA certificate has been created, and then automatically generate key, sign req, generate dh, generate ta, generate configuration file, and finally start OpenVPN. When creating the ovpn of sslvpn client, it is also necessary to automatically generate key, sign req, and finally generate ovpn according to the configuration file of the specified sslvpn server. Data Model Impact ----------------- The following new tables is added as part of sslvpn feature :: CREATE TABLE sslvpn_inline_file( id CHAR(36) NOT NULL PRI KEY, project_id VARCHAR(255) NOT NULL, type ENUM('ca', 'key', 'cert', 'dh', 'ta', 'req') NOT NULL, content TEXT NOT NULL) :: CREATE TABLE sslvpn_server( id CHAR(36) NOT NULL PRI KEY, project_id VARCHAR(255) NOT NULL, name VARCHAR(255), description VARCHAR(255), status VARCHAR(16) NOT NULL, admin_state_up BOOL NOT NULL, shared BOOL NOT NULL, router_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES routers(id), local_network_cidrs TEXT NOT NULL, client_network_cidr VARCHAR(18) NOT NULL, protocol ENUM('udp', 'tcp') NOT NULL, port INT NOT NULL, encryption_algorithm ENUM('AES-128-CBC', 'AES-192-CBC', 'AES-256-CBC') NOT NULL, compress BOOL NOT NULL, ca_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), key_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), cert_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), dh_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), ta_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), crl_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id)) :: CREATE TABLE sslvpn_client_ovpn( id CHAR(36) NOT NULL PRI KEY, project_id VARCHAR(255) NOT NULL, name VARCHAR(255), description VARCHAR(255), server_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_server(id), ca_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), key_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), cert_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), ta_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id), req_id VARCHAR(255) NOT NULL FOREIGN KEY REFERENCES sslvpn_inline_file(id)) Resource Extension ------------------ The following new resource is being introduced and its attributes maps would be like: .. code-block:: python DEFAULT_CLIENT_NETWORK_CIDR = '10.8.1.0/24' UDP = 'udp' TCP = 'tcp' PROTOCOL = [UDP, TCP] AES_128_CBC = 'AES-128-CBC' AES_192_CBC = 'AES-192-CBC' AES_256_CBC = 'AES-256-CBC' ENCRYPTION_ALGORITHM = [AES_128_CBC, AES_192_CBC, AES_256_CBC] DEFAULT_PORT = 1194 RESOURCE_ATTRIBUTE_MAPS = { 'sslvpn_servers': { 'id': {'allow_post': False, 'allow_put': False, 'validate': {'type:uuid': None}, 'is_visible': True, 'primary_key': True}, 'project_id': {'allow_post': True, 'allow_put': False, 'validate': { 'type:string': db_const.PROJECT_ID_FIELD_SIZE}, 'required_by_policy': True, 'is_visible': True}, 'name': {'allow_post': True, 'allow_put': True, 'validate': {'type:string': db_const.NAME_FIELD_SIZE}, 'is_visible': True, 'default': ''}, 'description': {'allow_post': True, 'allow_put': True, 'validate': { 'type:string': db_const.DESCRIPTION_FIELD_SIZE}, 'is_visible': True, 'default': ''}, 'status': {'allow_post': False, 'allow_put': False, 'is_visible': True}, 'admin_state_up': {'allow_post': True, 'allow_put': True, 'default': True 'convert_to': converters.convert_to_boolean, 'is_visible': True}, 'shared': {'allow_post': True, 'allow_put': True, 'convert_to': converters.convert_to_boolean, 'is_visible': True, 'default': True}, 'router_id': {'allow_post': True, 'allow_put': False, 'validate': {'type:uuid': None}, 'is_visible': True}, 'local_network_cidrs': {'allow_post': True, 'allow_put': True, 'is_visible': True}, 'client_network_cidr': {'allow_post': True, 'allow_put': True, 'convert_to': converters.convert_cidr_to_canonical_format, 'validate': {'type:subnet_or_none': None}, 'default': DEFAULT_CLIENT_NETWORK_CIDR 'is_visible': True}, 'protocol': {'allow_post': True, 'allow_put': True, 'validate': {'type:values': PROTOCOL}, 'default': UDP, 'is_visible': True}, 'port': {'allow_post': True, 'allow_put': True, 'convert_to': converters.convert_to_int, 'default': DEFAULT_PORT, 'is_visible': True}, 'encryption_algorithm': {'allow_post': True, 'allow_put': True, 'validate': {'type:values': ENCRYPTION_ALGORITHM}, 'default': AES_256_CBC, 'is_visible': True}, 'compress': {'allow_post': True, 'allow_put': True, 'convert_to': converters.convert_to_boolean, 'is_visible': True, 'default': False} 'sslvpn_client_ovpns': { 'id': {'allow_post': False, 'allow_put': False, 'validate': {'type:uuid': None}, 'is_visible': True, 'primary_key': True}, 'project_id': {'allow_post': True, 'allow_put': False, 'validate': { 'type:string': db_const.PROJECT_ID_FIELD_SIZE}, 'required_by_policy': True, 'is_visible': True}, 'name': {'allow_post': True, 'allow_put': True, 'validate': {'type:string': db_const.NAME_FIELD_SIZE}, 'is_visible': True, 'default': ''}, 'description': {'allow_post': True, 'allow_put': True, 'validate': { 'type:string': db_const.DESCRIPTION_FIELD_SIZE}, 'is_visible': True, 'default': ''}, 'server_id': {'allow_post': True, 'allow_put': False, 'validate': {'type:uuid': None}, 'is_visible': True}, 'ovpn': {'allow_post': False, 'allow_put': False, 'is_visible': True} } } REST API Impact --------------- The idea is to add a new resource extension with the below defined attributes. Resource extension sslvpn_servers: +---------------------+-------+-----+-----+------------+-----------------------+ | Attribute Name | Type | Req | CRUD| Default | Description | | | | | | Value | | +=====================+=======+=====+=====+============+=======================+ | id | String| N/A | R | Generated | Identifier of sslvpn | | | | | | | server | +---------------------+-------+-----+-----+------------+-----------------------+ | project_id | String| No | CR | Current | Owner of sslvpn | | | | | | project_id | server | +---------------------+-------+-----+-----+------------+-----------------------+ | name | String| No | CRU | '' | Name of sslvpn server | +---------------------+-------+-----+-----+------------+-----------------------+ | description | String| No | CRU | '' | Description of sslvpn | | | | | | | server | +---------------------+-------+-----+-----+------------+-----------------------+ | status | String| No | R | None | Indicates whether | | | | | | | sslvpn server is | | | | | | | currently operational | +---------------------+-------+-----+-----+------------+-----------------------+ | admin_state_up | Bool | No | CRU | True | The administrative | | | | | | | state of sslvpn | | | | | | | server, which is up | | | | | | | (true) or down (false)| +---------------------+-------+-----+-----+------------+-----------------------+ | shared | Bool | No | CRU | True | Indicates whether | | | | | | | this sslvpn server is | | | | | | | shared across all | | | | | | | projects | +---------------------+-------+-----+-----+------------+-----------------------+ | router_id | String| Yes | CR | None | The ID of the router | +---------------------+-------+-----+-----+------------+-----------------------+ | local_network_cidrs | String| No | CRU | None | The IP address range | | | | | | | to be accessed by the | | | | | | | client | +---------------------+-------+-----+-----+------------+-----------------------+ | client_network_cidr | String| No | CRU | 10.8.1.0/24| The IP address range | | | | | | | from which an IP | | | | | | | address will be | | | | | | | allocated to the | | | | | | | virtual network card | | | | | | | of the client | +---------------------+-------+-----+-----+------------+-----------------------+ | protocol | Enum | No | CRU | udp | Protocol used by SSL | | | | | | | connection | +---------------------+-------+-----+-----+------------+-----------------------+ | port | Int | No | CRU | 1194 | Port used by SSL | | | | | | | connection | +---------------------+-------+-----+-----+------------+-----------------------+ | encryption_algorithm| Enum | No | CRU | AES-256-CBC| Encryption algorithm | | | | | | | used by SSL connection| +---------------------+-------+-----+-----+------------+-----------------------+ | compress | Bool | No | CRU | False | Whether to compress | | | | | | | the transmitted data | +---------------------+-------+-----+-----+------------+-----------------------+ Resource extension sslvpn_client_ovpns: +----------------+--------+-----+------+-------------+-------------------------+ | Attribute Name | Type | Req | CRUD | Default | Description | | | | | | Value | | +================+========+=====+======+=============+=========================+ | id | String | N/A | R | Generated | Identifier of sslvpn | | | | | | | client ovpn | +----------------+--------+-----+------+-------------+-------------------------+ | project_id | String | No | CR | Current | Owner of sslvpn client | | | | | | project_id | ovpn | +----------------+--------+-----+------+-------------+-------------------------+ | name | String | No | CRU | '' | Name of sslvpn client | | | | | | | ovpn | +----------------+--------+-----+------+-------------+-------------------------+ | description | String | No | CRU | '' | Description of sslvpn | | | | | | | client ovpn | +----------------+--------+-----+------+-------------+-------------------------+ | server_id | String | Yes | CR | None | The sslvpn server to | | | | | | | connect to | +----------------+--------+-----+------+-------------+-------------------------+ | ovpn | String | No | R | None | The content of sslvpn | | | | | | | client ovpn | +----------------+--------+-----+------+-------------+-------------------------+ The following sslvpn server management Rest APIs will be provided in line with the new resources previously introduced: * List all sslvpn servers. GET /v2.0/sslvpn/sslvpn_servers :: GET /v2.0/sslvpn/sslvpn_servers Accept: application/json { ""sslvpn_servers"": [ { ""id"": ""6aef4a33-20ed-4b23-88b8-041ee625f683"", ""project_id"": ""0d617d593a994395a119826de267c53b"", ""name"": ""server"", ""description"": """", ""status"": ""ACTIVE"", ""admin_state_up"": True, ""shared"": True, ""router_id"": ""85800df1-603f-45bc-a14e-c8ee2d41792f"", ""local_network_cidrs"": ""['172.20.1.0/24', '172.20.2.0/24']"", ""client_network_cidr"": ""10.8.1.0/24"", ""protocol"": ""udp"", ""port"": 1194, ""encryption_algorithm"": ""AES-256-CBC"", ""compress"": False, } ] } * List a sslvpn server information. GET /v2.0/sslvpn/sslvpn_servers/<sslvpn_server_id> :: GET /v2.0/sslvpn/sslvpn_servers/6aef4a33-20ed-4b23-88b8-041ee625f683 Accept: application/json { ""sslvpn_server"": { ""id"": ""6aef4a33-20ed-4b23-88b8-041ee625f683"", ""project_id"": ""0d617d593a994395a119826de267c53b"", ""name"": ""server"", ""description"": """", ""status"": ""ACTIVE"", ""admin_state_up"": True, ""shared"": True, ""router_id"": ""85800df1-603f-45bc-a14e-c8ee2d41792f"", ""local_network_cidrs"": ""['172.20.1.0/24', '172.20.2.0/24']"", ""client_network_cidr"": ""10.8.1.0/24"", ""protocol"": ""udp"", ""port"": 1194, ""encryption_algorithm"": ""AES-256-CBC"", ""compress"": False, } } * Create a sslvpn server for a given tenant. POST /v2.0/sslvpn/sslvpn_servers :: POST /v2.0/sslvpn/sslvpn_servers Accept: application/json { ""sslvpn_server"": { ""project_id"": ""0d617d593a994395a119826de267c53b"", ""name"": ""server"", ""router_id"": ""85800df1-603f-45bc-a14e-c8ee2d41792f"", } } * Delete a sslvpn server by id. DELETE /v2.0/sslvpn/sslvpn_servers/<sslvpn_server_id> :: DELETE /v2.0/sslvpn/sslvpn_servers/6aef4a33-20ed-4b23-88b8-041ee625f683 Accept: application/json * Update a sslvpn server with given data. PUT /v2.0/sslvpn/sslvpn_servers/<sslvpn_server_id> :: PUT /v2.0/sslvpn/sslvpn_servers/<sslvpn_server_id> Accept: application/json { ""sslvpn_server"": { ""port"": 1195, ""compress"": True, } } The following sslvpn client ovpn management Rest APIs will be provided in line with the new resources previously introduced: * List all sslvpn client ovpns. GET /v2.0/sslvpn/sslvpn_client_ovpns :: GET /v2.0/sslvpn/sslvpn_client_ovpns Accept: application/json { ""sslvpn_client_ovpns"" "" [ { ""id"": ""afde5174-3438-4969-9b85-64ec64a5e2dc"", ""project_id"": ""0d617d593a994395a119826de267c53b"", ""name"": ""client"", ""description"": """", ""server_id"": ""6aef4a33-20ed-4b23-88b8-041ee625f683"", } ] } * List a sslvpn client ovpn information. GET /v2.0/sslvpn/sslvpn_client_ovpns/<sslvpn_client_ovpn_id> :: GET /v2.0/sslvpn/sslvpn_client_ovpns/afde5174-3438-4969-9b85-64ec64a5e2dc Accept: application/json { ""sslvpn_client_ovpn"": { ""id"": ""afde5174-3438-4969-9b85-64ec64a5e2dc"", ""project_id"": ""0d617d593a994395a119826de267c53b"", ""name"": ""client"", ""description"": """", ""server_id"": ""6aef4a33-20ed-4b23-88b8-041ee625f683"", ""ovpn"": ..., } } * Create a sslvpn client ovpn for a given tenant. POST /v2.0/sslvpn/sslvpn_client_ovpns :: POST /v2.0/sslvpn/sslvpn_client_ovpns Accept: application/json { ""sslvpn_client_ovpn"": { ""project_id"": ""0d617d593a994395a119826de267c53b"", ""name"": ""client"", ""server_id"": ""6aef4a33-20ed-4b23-88b8-041ee625f683"", } } * Delete a sslvpn client ovpn by id. DELETE /v2.0/sslvpn/sslvpn_client_ovpns/<sslvpn_client_ovpn_id> :: DELETE /v2.0/sslvpn/sslvpn_client_ovpns/afde5174-3438-4969-9b85-64ec64a5e2dc Accept: application/json * Update a sslvpn client ovpn with given data. PUT /v2.0/sslvpn/sslvpn_client_ovpns/<sslvpn_client_ovpn_id> :: PUT /v2.0/sslvpn/sslvpn_client_ovpns/afde5174-3438-4969-9b85-64ec64a5e2dc Accept: application/json { ""sslvpn_client_ovpn"": { ""name"": ""client ovpn"", } } Command Line Client Impact -------------------------- Openstack Client would add sslvpn server management related CLIs. They should be admin only CLI commands. For example:: openstack sslvpn server list openstack sslvpn server show <sslvpn_server_id> openstack sslvpn server create --router <router_id> [--description <description>] [--enable | --disable] [--shared | --not-shared] [--local-network <local_network_cidr>] [--client-network <client_network_cidr>] [--protocol {udp,tcp}] [--port <port>] [--encryption-algorithm {AES-128-CBC,AES-192-CBC,AES-256-CBC}] [--compress | --not-compress] <name> Notes: Argument --local-network can be repeated to set multiple local_network_cidr. openstack sslvpn server set [--name <name>] [--description <description>] [--enable | --disable] [--shared | --not-shared] [--del-local-network <local_network_cidr>] [--not-local-network] [--local-network <local_network_cidr>] [--client-network <client_network_cidr>] [--protocol {udp,tcp}] [--port <port>] [--encryption-algorithm {AES-128-CBC,AES-192-CBC,AES-256-CBC}] [--compress | --not-compress] <sslvpn_server_id> Notes: Argument --del-local-network can be repeated to del multiple local_network_cidr. openstack sslvpn server delete <sslvpn_server_id> Openstack Client would add sslvpn client ovpn management related CLIs. For example:: openstack sslvpn client ovpn list openstack sslvpn client ovpn show [--save <file_name>] <sslvpn_client_ovpn_id> openstack sslvpn client ovpn create --server <sslvpn_server_id> [--description <description>] <name> openstack sslvpn client ovpn set [--name <name>] [--description <description>] <sslvpn_client_ovpn_id> openstack sslvpn client ovpn delete <sslvpn_client_ovpn_id> References ========== .. [1] `OpenVPN`: https://community.openvpn.net/openvpn/wiki .. [2] `Neutron VPNaaS`: https://docs.openstack.org/neutron-vpnaas/stein/ .. [3] `Neutron BGP VPN`: https://docs.openstack.org/networking-bgpvpn/stein/ ",,591,0
openstack%2Fironic~stable%2Fstein~I06136f3f445b6ee4858697e22e8d63ca3d81c137,openstack/ironic,stable/stein,I06136f3f445b6ee4858697e22e8d63ca3d81c137,Pin the python-ibmcclient upper bounds due to six usage,MERGED,2020-07-22 19:01:37.000000000,2020-07-23 02:22:44.000000000,2020-07-22 21:42:01.000000000,"[{'_account_id': 10239}, {'_account_id': 19339}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 19:01:37.000000000', 'files': ['driver-requirements.txt'], 'web_link': 'https://opendev.org/openstack/ironic/commit/6fc5548a78cf9a73d72d6c24b9cec411ca9ef063', 'message': 'Pin the python-ibmcclient upper bounds due to six usage\n\nPython-ibmcclient 0.2.0 uses six, which is not installed by default\nas it is not necessary for python3 only usage.\n\nThis patch pins the upper bounds until the library can be fixed and\na new version released.\n\nChange-Id: I06136f3f445b6ee4858697e22e8d63ca3d81c137\n(cherry picked from commit f6b9f343581eb430cb339dde09bf97915e2e3a7b)\n(cherry picked from commit 3904d0202fa70942da5b85aa68477851ca234b75)\n'}]",0,742512,6fc5548a78cf9a73d72d6c24b9cec411ca9ef063,8,3,1,11655,,,0,"Pin the python-ibmcclient upper bounds due to six usage

Python-ibmcclient 0.2.0 uses six, which is not installed by default
as it is not necessary for python3 only usage.

This patch pins the upper bounds until the library can be fixed and
a new version released.

Change-Id: I06136f3f445b6ee4858697e22e8d63ca3d81c137
(cherry picked from commit f6b9f343581eb430cb339dde09bf97915e2e3a7b)
(cherry picked from commit 3904d0202fa70942da5b85aa68477851ca234b75)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/12/742512/1 && git format-patch -1 --stdout FETCH_HEAD,['driver-requirements.txt'],1,6fc5548a78cf9a73d72d6c24b9cec411ca9ef063,,"python-ibmcclient>=0.1.0,<0.2.0 ",python-ibmcclient>=0.1.0,2,1
openstack%2Fcinder~stable%2Fussuri~Iae17c0987292c1c89b963b556630649afd26c4d8,openstack/cinder,stable/ussuri,Iae17c0987292c1c89b963b556630649afd26c4d8,PowerMax Ussuri Driver -  Setting the minimum version of U4P,MERGED,2020-06-25 16:39:55.000000000,2020-07-23 01:50:28.000000000,2020-07-18 10:24:21.000000000,"[{'_account_id': 1736}, {'_account_id': 7198}, {'_account_id': 10118}, {'_account_id': 10459}, {'_account_id': 11904}, {'_account_id': 12016}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 12670}, {'_account_id': 18883}, {'_account_id': 19933}, {'_account_id': 21863}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 26561}, {'_account_id': 28801}, {'_account_id': 31981}]","[{'number': 1, 'created': '2020-06-25 16:39:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/59c8fdbcc99fbbc4e512d6dd0af18e80d13ea5c3', 'message': 'PowerMax Ussuri Driver -  Setting the minimum version of U4P\n\nThis is applicable to Ussuri only as we are moving to the 92\nin Victoria.  A replication refresh issue has been fixed in Unisphere\nfor PowerMax 9.1.0.17 and has recently become generally available.\n\nChange-Id: Iae17c0987292c1c89b963b556630649afd26c4d8\n'}, {'number': 2, 'created': '2020-06-30 20:41:49.000000000', 'files': ['cinder/tests/unit/volume/drivers/dell_emc/powermax/test_powermax_rest.py', 'cinder/volume/drivers/dell_emc/powermax/rest.py', 'cinder/tests/unit/volume/drivers/dell_emc/powermax/powermax_data.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/3fadd92b64503f65c369841e924748bf7992059d', 'message': 'PowerMax Ussuri Driver -  Setting the minimum version of U4P\n\nThis is applicable to Ussuri only as we are moving to the 92\nin Victoria.  A replication refresh issue has been fixed in Unisphere\nfor PowerMax 9.1.0.17 and has recently become generally available.\n\nChange-Id: Iae17c0987292c1c89b963b556630649afd26c4d8\n'}]",2,738063,3fadd92b64503f65c369841e924748bf7992059d,97,23,2,12670,,,0,"PowerMax Ussuri Driver -  Setting the minimum version of U4P

This is applicable to Ussuri only as we are moving to the 92
in Victoria.  A replication refresh issue has been fixed in Unisphere
for PowerMax 9.1.0.17 and has recently become generally available.

Change-Id: Iae17c0987292c1c89b963b556630649afd26c4d8
",git fetch https://review.opendev.org/openstack/cinder refs/changes/63/738063/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/tests/unit/volume/drivers/dell_emc/powermax/test_powermax_rest.py', 'cinder/tests/unit/volume/drivers/dell_emc/powermax/powermax_data.py']",2,59c8fdbcc99fbbc4e512d6dd0af18e80d13ea5c3,u4p_min_version, unisphere_version = u'V9.1.0.17', unisphere_version = u'V9.1.0.14',2,2
openstack%2Fneutron~stable%2Fussuri~I42c33fefaae6a7bee134779c840f35632823472e,openstack/neutron,stable/ussuri,I42c33fefaae6a7bee134779c840f35632823472e,Ensure drop flows on br-int at agent startup for DVR too,MERGED,2020-07-22 07:19:52.000000000,2020-07-23 01:17:27.000000000,2020-07-23 01:15:36.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 07:19:52.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/143fe8ff89ba776618ed6291af9d5e28e4662bdb', 'message': ""Ensure drop flows on br-int at agent startup for DVR too\n\nCommit 90212b12 changed the OVS agent so adding vital drop flows on\nbr-int (table 0 priority 2) for packets from physical bridges was\ndeferred until DVR initialization later on. But if br-int has no flows\nfrom a previous run (eg after host reboot), then these packets will hit\nthe NORMAL flow in table 60. And if there is more than one physical\nbridge, then the physical interfaces from the different bridges are now\nessentially connected at layer 2 and a network loop is possible in the\ntime before the flows are added by DVR. Also the DVR code won't add them\nuntil after RPC calls to the server, so a loop is more likely if the\nserver is not available.\n\nThis patch restores adding these flows to when the physical bridges are\nfirst configured. Also updated a comment that was no longer correct and\nupdated the unit test.\n\nChange-Id: I42c33fefaae6a7bee134779c840f35632823472e\nCloses-Bug: #1887148\nRelated-Bug: #1869808\n(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)\n""}]",0,742355,143fe8ff89ba776618ed6291af9d5e28e4662bdb,10,5,1,2733,,,0,"Ensure drop flows on br-int at agent startup for DVR too

Commit 90212b12 changed the OVS agent so adding vital drop flows on
br-int (table 0 priority 2) for packets from physical bridges was
deferred until DVR initialization later on. But if br-int has no flows
from a previous run (eg after host reboot), then these packets will hit
the NORMAL flow in table 60. And if there is more than one physical
bridge, then the physical interfaces from the different bridges are now
essentially connected at layer 2 and a network loop is possible in the
time before the flows are added by DVR. Also the DVR code won't add them
until after RPC calls to the server, so a loop is more likely if the
server is not available.

This patch restores adding these flows to when the physical bridges are
first configured. Also updated a comment that was no longer correct and
updated the unit test.

Change-Id: I42c33fefaae6a7bee134779c840f35632823472e
Closes-Bug: #1887148
Related-Bug: #1869808
(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/55/742355/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py']",2,143fe8ff89ba776618ed6291af9d5e28e4662bdb,bug/1887148," def _test_setup_physical_bridges(self, port_exists=False, dvr_enabled=False): self.agent.enable_distributed_routing = dvr_enabled mock.call.int_br.drop_port(in_port='int_ofport') ] if not dvr_enabled: expected_calls += [ mock.call.phys_br.drop_port(in_port='phy_ofport') ] expected_calls += [ def test_setup_physical_bridges_dvr_enabled(self): self._test_setup_physical_bridges(dvr_enabled=True) "," def _test_setup_physical_bridges(self, port_exists=False): mock.call.int_br.drop_port(in_port='int_ofport'), mock.call.phys_br.drop_port(in_port='phy_ofport'),",19,24
openstack%2Fneutron~stable%2Fstein~I42c33fefaae6a7bee134779c840f35632823472e,openstack/neutron,stable/stein,I42c33fefaae6a7bee134779c840f35632823472e,Ensure drop flows on br-int at agent startup for DVR too,MERGED,2020-07-22 07:48:16.000000000,2020-07-23 00:58:25.000000000,2020-07-23 00:56:51.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 07:48:16.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/8181c5dbfe799ac6c832ab67b7eab3bcef4098b9', 'message': ""Ensure drop flows on br-int at agent startup for DVR too\n\nCommit 90212b12 changed the OVS agent so adding vital drop flows on\nbr-int (table 0 priority 2) for packets from physical bridges was\ndeferred until DVR initialization later on. But if br-int has no flows\nfrom a previous run (eg after host reboot), then these packets will hit\nthe NORMAL flow in table 60. And if there is more than one physical\nbridge, then the physical interfaces from the different bridges are now\nessentially connected at layer 2 and a network loop is possible in the\ntime before the flows are added by DVR. Also the DVR code won't add them\nuntil after RPC calls to the server, so a loop is more likely if the\nserver is not available.\n\nThis patch restores adding these flows to when the physical bridges are\nfirst configured. Also updated a comment that was no longer correct and\nupdated the unit test.\n\nChange-Id: I42c33fefaae6a7bee134779c840f35632823472e\nCloses-Bug: #1887148\nRelated-Bug: #1869808\n(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)\n(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)\n(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)\n""}]",0,742361,8181c5dbfe799ac6c832ab67b7eab3bcef4098b9,10,5,1,2733,,,0,"Ensure drop flows on br-int at agent startup for DVR too

Commit 90212b12 changed the OVS agent so adding vital drop flows on
br-int (table 0 priority 2) for packets from physical bridges was
deferred until DVR initialization later on. But if br-int has no flows
from a previous run (eg after host reboot), then these packets will hit
the NORMAL flow in table 60. And if there is more than one physical
bridge, then the physical interfaces from the different bridges are now
essentially connected at layer 2 and a network loop is possible in the
time before the flows are added by DVR. Also the DVR code won't add them
until after RPC calls to the server, so a loop is more likely if the
server is not available.

This patch restores adding these flows to when the physical bridges are
first configured. Also updated a comment that was no longer correct and
updated the unit test.

Change-Id: I42c33fefaae6a7bee134779c840f35632823472e
Closes-Bug: #1887148
Related-Bug: #1869808
(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)
(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)
(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/61/742361/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py']",2,8181c5dbfe799ac6c832ab67b7eab3bcef4098b9,bug/1887148," def _test_setup_physical_bridges(self, port_exists=False, dvr_enabled=False): self.agent.enable_distributed_routing = dvr_enabled mock.call.int_br.drop_port(in_port='int_ofport') ] if not dvr_enabled: expected_calls += [ mock.call.phys_br.drop_port(in_port='phy_ofport') ] expected_calls += [ def test_setup_physical_bridges_dvr_enabled(self): self._test_setup_physical_bridges(dvr_enabled=True) "," def _test_setup_physical_bridges(self, port_exists=False): mock.call.int_br.drop_port(in_port='int_ofport'), mock.call.phys_br.drop_port(in_port='phy_ofport'),",19,24
openstack%2Fneutron~stable%2Fqueens~I42c33fefaae6a7bee134779c840f35632823472e,openstack/neutron,stable/queens,I42c33fefaae6a7bee134779c840f35632823472e,Ensure drop flows on br-int at agent startup for DVR too,MERGED,2020-07-22 08:06:14.000000000,2020-07-23 00:56:49.000000000,2020-07-23 00:56:49.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 08:06:14.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/8a173ec29ac1819c3d28c191814cd1402d272bb9', 'message': ""Ensure drop flows on br-int at agent startup for DVR too\n\nCommit 90212b12 changed the OVS agent so adding vital drop flows on\nbr-int (table 0 priority 2) for packets from physical bridges was\ndeferred until DVR initialization later on. But if br-int has no flows\nfrom a previous run (eg after host reboot), then these packets will hit\nthe NORMAL flow in table 60. And if there is more than one physical\nbridge, then the physical interfaces from the different bridges are now\nessentially connected at layer 2 and a network loop is possible in the\ntime before the flows are added by DVR. Also the DVR code won't add them\nuntil after RPC calls to the server, so a loop is more likely if the\nserver is not available.\n\nThis patch restores adding these flows to when the physical bridges are\nfirst configured. Also updated a comment that was no longer correct and\nupdated the unit test.\n\nChange-Id: I42c33fefaae6a7bee134779c840f35632823472e\nCloses-Bug: #1887148\nRelated-Bug: #1869808\n(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)\n(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)\n(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)\n(cherry picked from commit 8181c5dbfe799ac6c832ab67b7eab3bcef4098b9)\nConflicts:\n\tneutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py\n(cherry picked from commit 47ec363f5faefd85dfa33223c0087f4444afb5b9)\nConflicts:\n\tneutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py\n""}]",0,742365,8a173ec29ac1819c3d28c191814cd1402d272bb9,8,4,1,2733,,,0,"Ensure drop flows on br-int at agent startup for DVR too

Commit 90212b12 changed the OVS agent so adding vital drop flows on
br-int (table 0 priority 2) for packets from physical bridges was
deferred until DVR initialization later on. But if br-int has no flows
from a previous run (eg after host reboot), then these packets will hit
the NORMAL flow in table 60. And if there is more than one physical
bridge, then the physical interfaces from the different bridges are now
essentially connected at layer 2 and a network loop is possible in the
time before the flows are added by DVR. Also the DVR code won't add them
until after RPC calls to the server, so a loop is more likely if the
server is not available.

This patch restores adding these flows to when the physical bridges are
first configured. Also updated a comment that was no longer correct and
updated the unit test.

Change-Id: I42c33fefaae6a7bee134779c840f35632823472e
Closes-Bug: #1887148
Related-Bug: #1869808
(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)
(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)
(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)
(cherry picked from commit 8181c5dbfe799ac6c832ab67b7eab3bcef4098b9)
Conflicts:
	neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py
(cherry picked from commit 47ec363f5faefd85dfa33223c0087f4444afb5b9)
Conflicts:
	neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py
",git fetch https://review.opendev.org/openstack/neutron refs/changes/65/742365/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py']",2,8a173ec29ac1819c3d28c191814cd1402d272bb9,bug/1887148," def _test_setup_physical_bridges(self, port_exists=False, dvr_enabled=False): self.agent.enable_distributed_routing = dvr_enabled mock.call.int_br.drop_port(in_port='int_ofport') ] if not dvr_enabled: expected_calls += [ mock.call.phys_br.drop_port(in_port='phy_ofport') ] expected_calls += [ def test_setup_physical_bridges_dvr_enabled(self): self._test_setup_physical_bridges(dvr_enabled=True) "," def _test_setup_physical_bridges(self, port_exists=False): mock.call.int_br.drop_port(in_port='int_ofport'), mock.call.phys_br.drop_port(in_port='phy_ofport'),",19,11
openstack%2Fneutron~stable%2Fpike~I42c33fefaae6a7bee134779c840f35632823472e,openstack/neutron,stable/pike,I42c33fefaae6a7bee134779c840f35632823472e,Ensure drop flows on br-int at agent startup for DVR too,MERGED,2020-07-22 08:11:27.000000000,2020-07-23 00:43:06.000000000,2020-07-23 00:43:06.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 08:11:27.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/00466f41d690ca7c7a918bfd861878ef620bbec9', 'message': ""Ensure drop flows on br-int at agent startup for DVR too\n\nCommit 90212b12 changed the OVS agent so adding vital drop flows on\nbr-int (table 0 priority 2) for packets from physical bridges was\ndeferred until DVR initialization later on. But if br-int has no flows\nfrom a previous run (eg after host reboot), then these packets will hit\nthe NORMAL flow in table 60. And if there is more than one physical\nbridge, then the physical interfaces from the different bridges are now\nessentially connected at layer 2 and a network loop is possible in the\ntime before the flows are added by DVR. Also the DVR code won't add them\nuntil after RPC calls to the server, so a loop is more likely if the\nserver is not available.\n\nThis patch restores adding these flows to when the physical bridges are\nfirst configured. Also updated a comment that was no longer correct and\nupdated the unit test.\n\nChange-Id: I42c33fefaae6a7bee134779c840f35632823472e\nCloses-Bug: #1887148\nRelated-Bug: #1869808\n(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)\n(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)\n(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)\n(cherry picked from commit 8181c5dbfe799ac6c832ab67b7eab3bcef4098b9)\nConflicts:\n\tneutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py\n(cherry picked from commit 47ec363f5faefd85dfa33223c0087f4444afb5b9)\nConflicts:\n\tneutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py\n(cherry picked from commit 8a173ec29ac1819c3d28c191814cd1402d272bb9)\n""}]",0,742366,00466f41d690ca7c7a918bfd861878ef620bbec9,8,4,1,2733,,,0,"Ensure drop flows on br-int at agent startup for DVR too

Commit 90212b12 changed the OVS agent so adding vital drop flows on
br-int (table 0 priority 2) for packets from physical bridges was
deferred until DVR initialization later on. But if br-int has no flows
from a previous run (eg after host reboot), then these packets will hit
the NORMAL flow in table 60. And if there is more than one physical
bridge, then the physical interfaces from the different bridges are now
essentially connected at layer 2 and a network loop is possible in the
time before the flows are added by DVR. Also the DVR code won't add them
until after RPC calls to the server, so a loop is more likely if the
server is not available.

This patch restores adding these flows to when the physical bridges are
first configured. Also updated a comment that was no longer correct and
updated the unit test.

Change-Id: I42c33fefaae6a7bee134779c840f35632823472e
Closes-Bug: #1887148
Related-Bug: #1869808
(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)
(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)
(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)
(cherry picked from commit 8181c5dbfe799ac6c832ab67b7eab3bcef4098b9)
Conflicts:
	neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py
(cherry picked from commit 47ec363f5faefd85dfa33223c0087f4444afb5b9)
Conflicts:
	neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py
(cherry picked from commit 8a173ec29ac1819c3d28c191814cd1402d272bb9)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/66/742366/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py']",2,00466f41d690ca7c7a918bfd861878ef620bbec9,bug/1887148," def _test_setup_physical_bridges(self, port_exists=False, dvr_enabled=False): self.agent.enable_distributed_routing = dvr_enabled mock.call.int_br.drop_port(in_port='int_ofport') ] if not dvr_enabled: expected_calls += [ mock.call.phys_br.drop_port(in_port='phy_ofport') ] expected_calls += [ def test_setup_physical_bridges_dvr_enabled(self): self._test_setup_physical_bridges(dvr_enabled=True) "," def _test_setup_physical_bridges(self, port_exists=False): mock.call.int_br.drop_port(in_port='int_ofport'), mock.call.phys_br.drop_port(in_port='phy_ofport'),",19,11
openstack%2Fneutron~stable%2Frocky~I42c33fefaae6a7bee134779c840f35632823472e,openstack/neutron,stable/rocky,I42c33fefaae6a7bee134779c840f35632823472e,Ensure drop flows on br-int at agent startup for DVR too,MERGED,2020-07-22 07:58:30.000000000,2020-07-23 00:43:03.000000000,2020-07-23 00:43:03.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 26622}]","[{'number': 1, 'created': '2020-07-22 07:58:30.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/47ec363f5faefd85dfa33223c0087f4444afb5b9', 'message': ""Ensure drop flows on br-int at agent startup for DVR too\n\nCommit 90212b12 changed the OVS agent so adding vital drop flows on\nbr-int (table 0 priority 2) for packets from physical bridges was\ndeferred until DVR initialization later on. But if br-int has no flows\nfrom a previous run (eg after host reboot), then these packets will hit\nthe NORMAL flow in table 60. And if there is more than one physical\nbridge, then the physical interfaces from the different bridges are now\nessentially connected at layer 2 and a network loop is possible in the\ntime before the flows are added by DVR. Also the DVR code won't add them\nuntil after RPC calls to the server, so a loop is more likely if the\nserver is not available.\n\nThis patch restores adding these flows to when the physical bridges are\nfirst configured. Also updated a comment that was no longer correct and\nupdated the unit test.\n\nChange-Id: I42c33fefaae6a7bee134779c840f35632823472e\nCloses-Bug: #1887148\nRelated-Bug: #1869808\n(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)\n(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)\n(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)\n(cherry picked from commit 8181c5dbfe799ac6c832ab67b7eab3bcef4098b9)\nConflicts:\n\tneutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py\n""}]",0,742364,47ec363f5faefd85dfa33223c0087f4444afb5b9,10,6,1,2733,,,0,"Ensure drop flows on br-int at agent startup for DVR too

Commit 90212b12 changed the OVS agent so adding vital drop flows on
br-int (table 0 priority 2) for packets from physical bridges was
deferred until DVR initialization later on. But if br-int has no flows
from a previous run (eg after host reboot), then these packets will hit
the NORMAL flow in table 60. And if there is more than one physical
bridge, then the physical interfaces from the different bridges are now
essentially connected at layer 2 and a network loop is possible in the
time before the flows are added by DVR. Also the DVR code won't add them
until after RPC calls to the server, so a loop is more likely if the
server is not available.

This patch restores adding these flows to when the physical bridges are
first configured. Also updated a comment that was no longer correct and
updated the unit test.

Change-Id: I42c33fefaae6a7bee134779c840f35632823472e
Closes-Bug: #1887148
Related-Bug: #1869808
(cherry picked from commit c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8)
(cherry picked from commit 143fe8ff89ba776618ed6291af9d5e28e4662bdb)
(cherry picked from commit 6a861b8c8c28e5675ec2208057298b811ba2b649)
(cherry picked from commit 8181c5dbfe799ac6c832ab67b7eab3bcef4098b9)
Conflicts:
	neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py
",git fetch https://review.opendev.org/openstack/neutron refs/changes/64/742364/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py']",2,47ec363f5faefd85dfa33223c0087f4444afb5b9,bug/1887148," def _test_setup_physical_bridges(self, port_exists=False, dvr_enabled=False): self.agent.enable_distributed_routing = dvr_enabled mock.call.int_br.drop_port(in_port='int_ofport') ] if not dvr_enabled: expected_calls += [ mock.call.phys_br.drop_port(in_port='phy_ofport') ] expected_calls += [ def test_setup_physical_bridges_dvr_enabled(self): self._test_setup_physical_bridges(dvr_enabled=True) "," def _test_setup_physical_bridges(self, port_exists=False): mock.call.int_br.drop_port(in_port='int_ofport'), mock.call.phys_br.drop_port(in_port='phy_ofport'),",19,11
openstack%2Ftripleo-common~master~I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887,openstack/tripleo-common,master,I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887,First pass at script cleanup,MERGED,2020-06-15 19:11:22.000000000,2020-07-23 00:11:50.000000000,2020-07-22 19:14:49.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-06-15 19:11:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/d63fa1f22d9f2d502e1196da1edae12f87e6ebee', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment.\n\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 2, 'created': '2020-06-15 19:12:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/1a02f7a9f4351280497f14d9af11daed7ccc6ea2', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 3, 'created': '2020-06-15 20:02:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/52d44b6ba080863a5ac319e405ddd03f36ed2a65', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 4, 'created': '2020-06-15 20:03:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/2e1d19c1e3c9325984974306ca1c6d9512a7f7ae', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 5, 'created': '2020-06-16 14:08:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e68b9e7a994a01e0090730c1bc5d75023a27d077', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 6, 'created': '2020-06-17 04:01:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/7185ecaf071779fd22899bf7dfb6a01c7d7d44c4', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 7, 'created': '2020-06-17 13:53:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/5db69104a30917d7a936ed37fdb37c38c36dabe9', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 8, 'created': '2020-06-17 14:31:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/50e927830cdf4b67703e3d7baada3732b060a791', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 9, 'created': '2020-06-17 14:48:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/a53932bdc6db4d48e03de38774817fdf3662a8f9', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 10, 'created': '2020-06-19 13:14:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/acfdaaae0f823c398f2fa602cddeab786f0a9380', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 11, 'created': '2020-06-23 02:43:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/8d42824f483f907716a239fefbbb8a64f6b2d431', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 12, 'created': '2020-06-25 12:56:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/c75f495747abb58c4176cc9569ef157e4950e4d2', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 13, 'created': '2020-06-25 12:58:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/782835c120572c31c1c8b37800d931e92ab965f9', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unifi\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 14, 'created': '2020-06-29 13:06:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/95da330b6c9bceca29786c0900017fdd1ecedddd', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 15, 'created': '2020-07-05 20:24:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e8d9c24ce4cd5f43def0d9198e330ff53bf0bf9b', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 16, 'created': '2020-07-08 13:45:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e24b1b05f12bc804761f5206d391fb886a2c6f3a', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 17, 'created': '2020-07-13 17:20:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/c576130dd10577929aa04b57be6a7c69608838da', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 18, 'created': '2020-07-15 12:10:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/caa04af5194de7e2a47f1cf1b10ca8c1c3d4a18f', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 19, 'created': '2020-07-15 22:12:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/c98d0ca52dd3380de76c7c7c22f47554004ecfd0', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 20, 'created': '2020-07-15 22:13:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ac32b156ab99afb5009ff44acd12aa79c4b869c9', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 21, 'created': '2020-07-15 22:17:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/c66e7e1cfd90f0d2a505c06c0dcf9dae902c26b7', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nThe kolla user will now be able to execute any kolla* command which\nshould allow us to generally simplify how we handle sudoers across\nour container base.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 22, 'created': '2020-07-22 12:11:45.000000000', 'files': ['container-images/kolla/base/httpd_setup.sh', 'container-images/kolla/horizon/extend_start.sh', 'container-images/tcib/base/os/barbican-base/barbican-base.yaml', 'container-images/kolla/barbican-base/sudoers', 'container-images/kolla/neutron-base/neutron_sudoers', 'container-images/tcib/base/mariadb/mariadb.yaml', 'container-images/kolla/base/sudoers'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/9190a3d0001bed39a12f097750bef90d5015a42c', 'message': 'First pass at script cleanup\n\nThis change removes bits from our imported scripts that are irrelevant\nfor a TripleO environment. All of the sudoers implementations have been\nmoved into files which are copied into containers. This move will unify\nhow we deploy privledge escallations.\n\nThe kolla user will now be able to execute any kolla* command which\nshould allow us to generally simplify how we handle sudoers across\nour container base.\n\nStory: 2007780\nTask: 40014\nChange-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}]",6,735661,9190a3d0001bed39a12f097750bef90d5015a42c,80,6,22,7353,,,0,"First pass at script cleanup

This change removes bits from our imported scripts that are irrelevant
for a TripleO environment. All of the sudoers implementations have been
moved into files which are copied into containers. This move will unify
how we deploy privledge escallations.

The kolla user will now be able to execute any kolla* command which
should allow us to generally simplify how we handle sudoers across
our container base.

Story: 2007780
Task: 40014
Change-Id: I2e0b98d9f60e3c862e9db3f7d87f09b5bd3a0887
Signed-off-by: Kevin Carter <kecarter@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/61/735661/22 && git format-patch -1 --stdout FETCH_HEAD,"['container-images/kolla/base/httpd_setup.sh', 'container-images/kolla/horizon/extend_start.sh', 'container-images/kolla/neutron-base/neutron_sudoers']",3,d63fa1f22d9f2d502e1196da1edae12f87e6ebee,images/new,,neutron ALL = (root) NOPASSWD: /var/lib/kolla/venv/bin/neutron-rootwrap /etc/neutron/rootwrap.conf * neutron ALL = (root) NOPASSWD: /var/lib/kolla/venv/bin/neutron-rootwrap-daemon /etc/neutron/rootwrap.conf,2,4
openstack%2Fironic-python-agent~master~I2ba658d83a15554e135429d464c0a033063d4631,openstack/ironic-python-agent,master,I2ba658d83a15554e135429d464c0a033063d4631,Fix versions in release notes,MERGED,2020-07-22 13:42:52.000000000,2020-07-23 00:10:52.000000000,2020-07-23 00:09:02.000000000,"[{'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 13:42:52.000000000', 'files': ['releasenotes/source/train.rst', 'releasenotes/source/ussuri.rst'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/ab585153c9d462a112ceb2e2f95f5cc07b177d31', 'message': 'Fix versions in release notes\n\nChange-Id: I2ba658d83a15554e135429d464c0a033063d4631\n'}]",0,742431,ab585153c9d462a112ceb2e2f95f5cc07b177d31,7,2,1,23851,,,0,"Fix versions in release notes

Change-Id: I2ba658d83a15554e135429d464c0a033063d4631
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/31/742431/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/source/train.rst', 'releasenotes/source/ussuri.rst']",2,ab585153c9d462a112ceb2e2f95f5cc07b177d31,correct-res-versions,=========================================== Ussuri Series Release Notes (6.0.0 - 6.1.x) ===========================================,=========================== Ussuri Series Release Notes ===========================,4,4
openstack%2Ftripleo-ansible~master~Ic625bc5dd7bbd964d36eab0a3f81eca31c533716,openstack/tripleo-ansible,master,Ic625bc5dd7bbd964d36eab0a3f81eca31c533716,tripleo_container_manage: continue to reduce tasks,MERGED,2020-07-21 16:22:00.000000000,2020-07-23 00:07:18.000000000,2020-07-22 23:32:50.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 16:22:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/53efcc98c760f4f9ee3dd42db65bc31fb4154100', 'message': ""tripleo_container_manage: continue to reduce tasks\n\n1) shutdown: include tasks without a block. this should remove the stat\n   and include task; to only have one task that include the shutdown\n   playbook if needed.\n\n2) Initialize containers_changed at each new config.\n\n3) Remove all_containers_commands tasks, there aren't needed. Ansible\n   output already provides the commands that are run via the\n   container_status module.\n\nChange-Id: Ic625bc5dd7bbd964d36eab0a3f81eca31c533716\n""}, {'number': 2, 'created': '2020-07-21 17:45:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/662ded74550b950309624925f6a0d66c9babbeb7', 'message': ""tripleo_container_manage: continue to reduce tasks\n\n1) shutdown: include tasks without a block. this should remove the stat\n   and include task; to only have one task that include the shutdown\n   playbook if needed.\n\n2) Initialize containers_changed at each new config.\n\n3) Remove all_containers_commands tasks, there aren't needed. Ansible\n   output already provides the commands that are run via the\n   container_status module.\n\nChange-Id: Ic625bc5dd7bbd964d36eab0a3f81eca31c533716\n""}, {'number': 3, 'created': '2020-07-21 18:31:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/aba0c1cb73a3d7e2d2bc767005583d71654720c4', 'message': ""tripleo_container_manage: continue to reduce tasks\n\n1) shutdown: include tasks without a block. this should remove the stat\n   and include task; to only have one task that include the shutdown\n   playbook if needed.\n\n2) Remove containers_changed tasks. This is not useful to restart a\n   container just because its podman_container resource changed.\n   when podman_container module applies a change to the container, this\n   one is already restarted.\n\n3) Remove all_containers_commands tasks, there aren't needed. Ansible\n   output already provides the commands that are run via the\n   container_status module.\n\nChange-Id: Ic625bc5dd7bbd964d36eab0a3f81eca31c533716\n""}, {'number': 4, 'created': '2020-07-21 19:43:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/514974daebaef05999be31316b7866e724746822', 'message': ""tripleo_container_manage: continue to reduce tasks\n\n1) shutdown: include tasks without a block. this should remove the stat\n   and include task; to only have one task that include the shutdown\n   playbook if needed.\n\n2) Remove containers_changed tasks. This is not useful to restart a\n   container just because its podman_container resource changed.\n   when podman_container module applies a change to the container, this\n   one is already restarted.\n\n3) Remove all_containers_commands tasks, there aren't needed. Ansible\n   output already provides the commands that are run via the\n   container_status module.\n\nChange-Id: Ic625bc5dd7bbd964d36eab0a3f81eca31c533716\n""}, {'number': 5, 'created': '2020-07-22 02:18:52.000000000', 'files': ['tripleo_ansible/roles/tripleo_container_manage/tasks/create.yml', 'tripleo_ansible/roles/tripleo_container_manage/tasks/podman/exec.yml', 'tripleo_ansible/ansible_plugins/action/container_systemd.py', 'tripleo_ansible/roles/tripleo_container_manage/tasks/main.yml', 'tripleo_ansible/roles/tripleo_container_manage/tasks/shutdown.yml', 'tripleo_ansible/roles/tripleo_container_manage/tasks/podman/create.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ca8fae62e410b9381bf8a411184f6a452120778c', 'message': ""tripleo_container_manage: continue to reduce tasks\n\n1) shutdown: include tasks without a block. this should remove the stat\n   and include task; to only have one task that include the shutdown\n   playbook if needed.\n\n2) Remove containers_changed tasks. This is not useful to restart a\n   container just because its podman_container resource changed.\n   when podman_container module applies a change to the container, this\n   one is already restarted.\n\n3) Remove all_containers_commands tasks, there aren't needed. Ansible\n   output already provides the commands that are run via the\n   container_status module.\n\nChange-Id: Ic625bc5dd7bbd964d36eab0a3f81eca31c533716\n""}]",0,742237,ca8fae62e410b9381bf8a411184f6a452120778c,19,5,5,3153,,,0,"tripleo_container_manage: continue to reduce tasks

1) shutdown: include tasks without a block. this should remove the stat
   and include task; to only have one task that include the shutdown
   playbook if needed.

2) Remove containers_changed tasks. This is not useful to restart a
   container just because its podman_container resource changed.
   when podman_container module applies a change to the container, this
   one is already restarted.

3) Remove all_containers_commands tasks, there aren't needed. Ansible
   output already provides the commands that are run via the
   container_status module.

Change-Id: Ic625bc5dd7bbd964d36eab0a3f81eca31c533716
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/37/742237/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_container_manage/tasks/podman/exec.yml', 'tripleo_ansible/roles/tripleo_container_manage/tasks/main.yml', 'tripleo_ansible/roles/tripleo_container_manage/tasks/podman/create.yml']",3,53efcc98c760f4f9ee3dd42db65bc31fb4154100,improv," containers_changed: ""{{ container_status_results.changed_containers | default([]) + (containers_changed | default([]) | list) }}"""," containers_changed: ""{{ container_status_results.changed_containers | default([]) }}"" - name: ""Append the list of all podman commands that are run for containers with changes"" set_fact: all_containers_commands: ""{{ container_status_results.commands | default([]) + (all_containers_commands | default([]) | list) }}"" when: - ansible_check_mode|bool",6,29
openstack%2Fmanila-image-elements~master~I032e77e2f16e1d445c72eb3abd99a09c413dabe5,openstack/manila-image-elements,master,I032e77e2f16e1d445c72eb3abd99a09c413dabe5,Start ssh only after full boot,MERGED,2020-07-20 14:09:43.000000000,2020-07-22 23:57:21.000000000,2020-07-22 23:57:21.000000000,"[{'_account_id': 9003}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 30238}]","[{'number': 1, 'created': '2020-07-20 14:09:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/2a8831a842fea16873c4bd98bfe1cc3c1c565ae1', 'message': 'Start ssh only after full boot\n\nBefore this change instance may close ssh connection on boot with message:\n\n""System is booting up. See pam_nologin(8)""\nConnection closed by XXX port 22\n\n, so manila think that password/private key is wrong and fails share creation.\n\nChange-Id: I032e77e2f16e1d445c72eb3abd99a09c413dabe5\nSigned-off-by: George Melikov <mail@gmelikov.ru>\n'}, {'number': 2, 'created': '2020-07-21 17:53:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/37e951ad95ff3f00d7465c05f307489943790397', 'message': 'Start ssh only after full boot\n\nBefore this change instance may close ssh connection on boot with message:\n\n""System is booting up. See pam_nologin(8)""\nConnection closed by XXX port 22\n\n, so manila think that password/private key is wrong and fails share creation.\n\nChange-Id: I032e77e2f16e1d445c72eb3abd99a09c413dabe5\nSigned-off-by: George Melikov <mail@gmelikov.ru>\n'}, {'number': 3, 'created': '2020-07-21 19:16:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/49d3ac84d09416dd548668252939e82e8f60f3bd', 'message': 'Start ssh only after full boot\n\nBefore this change instance may close ssh connection on boot with message:\n\n""System is booting up. See pam_nologin(8)""\nConnection closed by XXX port 22\n\n, so manila think that password/private key is wrong and fails share creation.\n\nChange-Id: I032e77e2f16e1d445c72eb3abd99a09c413dabe5\nSigned-off-by: George Melikov <mail@gmelikov.ru>\n'}, {'number': 4, 'created': '2020-07-22 20:49:17.000000000', 'files': ['elements/manila-ssh/install.d/99-start-ssh-after-full-boot'], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/bc5e37ffd9bcb1f67b88b1933cd7e503d8c6484a', 'message': 'Start ssh only after full boot\n\nBefore this change instance may close ssh connection on boot with message:\n\n""System is booting up. See pam_nologin(8)""\nConnection closed by XXX port 22\n\n, so manila think that password/private key is wrong and fails share creation.\n\nCloses-bug: #1888569\nChange-Id: I032e77e2f16e1d445c72eb3abd99a09c413dabe5\nSigned-off-by: George Melikov <mail@gmelikov.ru>\n'}]",1,741953,bc5e37ffd9bcb1f67b88b1933cd7e503d8c6484a,18,4,4,30238,,,0,"Start ssh only after full boot

Before this change instance may close ssh connection on boot with message:

""System is booting up. See pam_nologin(8)""
Connection closed by XXX port 22

, so manila think that password/private key is wrong and fails share creation.

Closes-bug: #1888569
Change-Id: I032e77e2f16e1d445c72eb3abd99a09c413dabe5
Signed-off-by: George Melikov <mail@gmelikov.ru>
",git fetch https://review.opendev.org/openstack/manila-image-elements refs/changes/53/741953/1 && git format-patch -1 --stdout FETCH_HEAD,['elements/manila-ssh/install.d/99-start-ssh-after-full-boot'],1,2a8831a842fea16873c4bd98bfe1cc3c1c565ae1,ssh_load_public,"#!/bin/bash if [ ${DIB_DEBUG_TRACE:-0} -gt 0 ]; then set -x fi set -eu set -o pipefail DIB_INIT_SYSTEM=$(dib-init-system) if [ ""$DIB_INIT_SYSTEM"" == ""systemd"" ]; then POSSIBLE_NAMES=(""ssh"" ""sshd"") for SERVICE_NAME in ""${POSSIBLE_NAMES[@]}"" do if [ -f ""/lib/systemd/system/$SERVICE_NAME.service"" ]; then sudo cp /lib/systemd/system/$SERVICE_NAME.service \ /etc/systemd/system/$SERVICE_NAME.service sudo sed -i ""/^After=/ s/$/ multi-user.target/"" \ /etc/systemd/system/$SERVICE_NAME.service sudo sed -i ""s/^WantedBy=multi-user.target//"" \ /etc/systemd/system/$SERVICE_NAME.service fi done else echo ""Not supported for this init system"" fi ",,25,0
openstack%2Fironic~stable%2Fussuri~I62b2d32c545b6ad6487aead98c8fab212ed5e83f,openstack/ironic,stable/ussuri,I62b2d32c545b6ad6487aead98c8fab212ed5e83f,Fix the error message when reached max number of traits,MERGED,2020-07-06 12:37:20.000000000,2020-07-22 23:44:58.000000000,2020-07-22 23:43:40.000000000,"[{'_account_id': 10239}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 24828}]","[{'number': 1, 'created': '2020-07-06 12:37:20.000000000', 'files': ['ironic/db/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/bde1e8ea1af0ffec65dc774b1e2b720552654e10', 'message': 'Fix the error message when reached max number of traits\n\nThe error message is not properly tranlated as desired, raw string\nis returned when reached maximum number of traits.\n\nChange-Id: I62b2d32c545b6ad6487aead98c8fab212ed5e83f\n(cherry picked from commit d90459a87fce4a84d34bdf24604de3edfb23dda7)\n'}]",0,739477,bde1e8ea1af0ffec65dc774b1e2b720552654e10,14,6,1,10239,,,0,"Fix the error message when reached max number of traits

The error message is not properly tranlated as desired, raw string
is returned when reached maximum number of traits.

Change-Id: I62b2d32c545b6ad6487aead98c8fab212ed5e83f
(cherry picked from commit d90459a87fce4a84d34bdf24604de3edfb23dda7)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/77/739477/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic/db/sqlalchemy/api.py'],1,bde1e8ea1af0ffec65dc774b1e2b720552654e10,trait-errormsg-stable/ussuri," msg = (_(""Could not modify traits for node %(node_id)s as it "" ""would exceed the maximum number of traits per node "" ""(%(num_traits)d vs. %(max_traits)d)"") % {'node_id': node_id, 'num_traits': num_traits, 'max_traits': MAX_TRAITS_PER_NODE}) raise exception.InvalidParameterValue(err=msg)"," msg = _(""Could not modify traits for node %(node_id)s as it would "" ""exceed the maximum number of traits per node "" ""(%(num_traits)d vs. %(max_traits)d)"") raise exception.InvalidParameterValue( msg, node_id=node_id, num_traits=num_traits, max_traits=MAX_TRAITS_PER_NODE)",6,6
openstack%2Ftripleo-heat-templates~master~I588c7c1cf44dc0c1794371d6ed4b0958071a8e2c,openstack/tripleo-heat-templates,master,I588c7c1cf44dc0c1794371d6ed4b0958071a8e2c,Remove usage of ineffective parameter in nova::api class,MERGED,2020-06-30 14:29:32.000000000,2020-07-22 22:42:19.000000000,2020-07-22 22:42:19.000000000,"[{'_account_id': 3153}, {'_account_id': 7144}, {'_account_id': 9816}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 17216}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30133}]","[{'number': 1, 'created': '2020-06-30 14:29:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4f821926582a1e829ee9ab31547b52b1afe875bc', 'message': 'Remove usage of uneffective parameter in nova-api\n\nThe nova::api::neutron_metadata_proxy_shared_secret parameter was\nalready removed from puppet-nova[1], so we should remove that parameter\nfrom t-h-t as well.\n\n[1] 66f2e8e509941391c172b56f5b9e4310e5fa72dd\n\nChange-Id: I588c7c1cf44dc0c1794371d6ed4b0958071a8e2c\n'}, {'number': 2, 'created': '2020-06-30 14:37:03.000000000', 'files': ['deployment/nova/nova-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c8d4429e9f0fdd0f5546f7f6f357d84cadbda62d', 'message': 'Remove usage of ineffective parameter in nova::api class\n\nThe nova::api::neutron_metadata_proxy_shared_secret parameter was\nalready removed from puppet-nova[1], so we should remove that parameter\nfrom t-h-t as well.\n\n[1] 66f2e8e509941391c172b56f5b9e4310e5fa72dd\n\nChange-Id: I588c7c1cf44dc0c1794371d6ed4b0958071a8e2c\n'}]",0,738636,c8d4429e9f0fdd0f5546f7f6f357d84cadbda62d,21,10,2,9816,,,0,"Remove usage of ineffective parameter in nova::api class

The nova::api::neutron_metadata_proxy_shared_secret parameter was
already removed from puppet-nova[1], so we should remove that parameter
from t-h-t as well.

[1] 66f2e8e509941391c172b56f5b9e4310e5fa72dd

Change-Id: I588c7c1cf44dc0c1794371d6ed4b0958071a8e2c
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/36/738636/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/nova/nova-api-container-puppet.yaml'],1,4f821926582a1e829ee9ab31547b52b1afe875bc,cleanup,," NeutronMetadataProxySharedSecret: description: Shared secret to prevent spoofing type: string hidden: true is_neutron_shared_metadata_notempty: {not: {equals: [{get_param: NeutronMetadataProxySharedSecret}, '']}} - if: - is_neutron_shared_metadata_notempty - nova::api::neutron_metadata_proxy_shared_secret: {get_param: NeutronMetadataProxySharedSecret} - {}",0,10
openstack%2Fopenstack-helm~master~I655ef19a3c187e3462ff8ec1a54bc9691ca64d41,openstack/openstack-helm,master,I655ef19a3c187e3462ff8ec1a54bc9691ca64d41,Add missing security context to Keystone pods/containers,MERGED,2020-07-20 18:26:11.000000000,2020-07-22 22:41:27.000000000,2020-07-22 22:39:34.000000000,"[{'_account_id': 7769}, {'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 12281}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 29144}, {'_account_id': 29161}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-20 18:26:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/724d52a51c2ab8c6f1d9e5566beca99bb3393706', 'message': 'Add missing security context to Keystone pods/containers\n\nThis updates the Keystone chart to include the pod\nsecurity context on the pod template.\n\nThis also adds the container security context to set\nreadOnlyRootFilesystem flag to true\n\nChange-Id: I655ef19a3c187e3462ff8ec1a54bc9691ca64d41\n'}, {'number': 2, 'created': '2020-07-20 19:26:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/54022f3091192255b9ad2fd4f71c2eb9291e50ad', 'message': 'Add missing security context to Keystone pods/containers\n\nThis updates the Keystone chart to include the pod\nsecurity context on the pod template.\n\nThis also adds the container security context to set\nreadOnlyRootFilesystem flag to true\n\nChange-Id: I655ef19a3c187e3462ff8ec1a54bc9691ca64d41\n'}, {'number': 3, 'created': '2020-07-21 04:57:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/e8120339a989ad1e6306c897ce77fa3b8a4ae53a', 'message': 'Add missing security context to Keystone pods/containers\n\nThis updates the Keystone chart to include the pod\nsecurity context on the pod template.\n\nThis also adds the container security context to set\nreadOnlyRootFilesystem flag to true\n\nChange-Id: I655ef19a3c187e3462ff8ec1a54bc9691ca64d41\n'}, {'number': 4, 'created': '2020-07-21 17:33:15.000000000', 'files': ['keystone/templates/cron-job-fernet-rotate.yaml', 'keystone/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/46afde4c6d88d2d0f61fb66c8cd6cfcc5b1c21f8', 'message': 'Add missing security context to Keystone pods/containers\n\nThis updates the Keystone chart to include the pod\nsecurity context on the pod template.\n\nThis also adds the container security context to set\nreadOnlyRootFilesystem flag to true\n\nChange-Id: I655ef19a3c187e3462ff8ec1a54bc9691ca64d41\n'}]",2,742002,46afde4c6d88d2d0f61fb66c8cd6cfcc5b1c21f8,21,12,4,29144,,,0,"Add missing security context to Keystone pods/containers

This updates the Keystone chart to include the pod
security context on the pod template.

This also adds the container security context to set
readOnlyRootFilesystem flag to true

Change-Id: I655ef19a3c187e3462ff8ec1a54bc9691ca64d41
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/02/742002/3 && git format-patch -1 --stdout FETCH_HEAD,['keystone/templates/cron-job-fernet-rotate.yaml'],1,724d52a51c2ab8c6f1d9e5566beca99bb3393706,,"{{ dict ""envAll"" $envAll ""application"" ""fernet_rotate"" | include ""helm-toolkit.snippets.kubernetes_pod_security_context"" | indent 10 }}{{ dict ""envAll"" $envAll ""application"" ""fernet_rotate"" ""container"" ""keystone_fernet_rotate"" | include ""helm-toolkit.snippets.kubernetes_container_security_context"" | indent 14}}",,2,0
openstack%2Ftripleo-common~master~I815443fa7cfd54c9884aff751caf701fd77a8f3a,openstack/tripleo-common,master,I815443fa7cfd54c9884aff751caf701fd77a8f3a,Properly collect tasks with or conditional in step file.,MERGED,2020-07-10 13:42:47.000000000,2020-07-22 22:29:49.000000000,2020-07-22 22:27:33.000000000,"[{'_account_id': 3153}, {'_account_id': 6816}, {'_account_id': 7144}, {'_account_id': 11090}, {'_account_id': 11166}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-07-10 13:42:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/db0b6de105c62f35bd21dfddb91e6e09871ed466', 'message': ""Properly collect tasks with or conditional in step file.\n\nTasks with or conditional (step == 1 or step == 0) were not showing up\nin the step file.\n\nTo make sure we collect the tasks properly we refactor the filter\nlogic:\n 1. make all conditional a big string with no spaces and no boolean\n 2. use findall to collect all the conditional step\n 3. if step found and it does belong to the current step add it.\n 4. if step found and it doesn't belong to the current step remove it.\n 5. if step condition not found, let strict decide.\n 6. if strict remove it else add it (default behavior)\n\nChange-Id: I815443fa7cfd54c9884aff751caf701fd77a8f3a\nCloses-Bug: #1887135\n""}, {'number': 2, 'created': '2020-07-10 13:46:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/43421fb1dabc62bd84a869b2075be4b1adaac036', 'message': ""Properly collect tasks with or conditional in step file.\n\nTasks with or conditional (step == 1 or step == 0) were not showing up\nin the step file.\n\nTo make sure we collect the tasks properly we refactor the filter\nlogic:\n 1. make all conditional a big string with no spaces and no Boolean\n 2. use findall to collect all the conditional step\n 3. if step found and it does belong to the current step add it.\n 4. if step found and it doesn't belong to the current step remove it.\n 5. if step condition not found, let strict decide.\n 6. if strict remove it else add it (default behavior)\n\nWe also add a unit test related to that filtering.\n\nChange-Id: I815443fa7cfd54c9884aff751caf701fd77a8f3a\nCloses-Bug: #1887135\n""}, {'number': 3, 'created': '2020-07-10 15:53:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/8c1582b241800d223bf9fcb48712a61b65be6046', 'message': ""Properly collect tasks with or conditional in step file.\n\nTasks with or conditional (step == 1 or step == 0) were not showing up\nin the step file.\n\nTo make sure we collect the tasks properly we refactor the filter\nlogic:\n 1. make all conditional a big string with no spaces and no Boolean\n 2. use findall to collect all the conditional step\n 3. if step found and it does belong to the current step add it.\n 4. if step found and it doesn't belong to the current step remove it.\n 5. if step condition not found, let strict decide.\n 6. if strict remove it else add it (default behavior)\n\nWe also add a unit test related to that filtering.\n\nChange-Id: I815443fa7cfd54c9884aff751caf701fd77a8f3a\nCloses-Bug: #1887135\n""}, {'number': 4, 'created': '2020-07-22 13:45:14.000000000', 'files': ['tripleo_common/utils/config.py', 'tripleo_common/tests/utils/test_config.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/5493304944a443dcab74439c522a18bbf62d1d2a', 'message': ""Properly collect tasks with or conditional in step file.\n\nTasks with or conditional (step == 1 or step == 0) were not showing up\nin the step file.\n\nTo make sure we collect the tasks properly we refactor the filter\nlogic:\n 1. make all conditional a big string with no spaces and no Boolean\n 2. use findall to collect all the conditional step\n 3. if step found and it does belong to the current step add it.\n 4. if step found and it doesn't belong to the current step remove it.\n 5. if step condition not found, let strict decide.\n 6. if strict remove it else add it (default behavior)\n\nWe also add a unit test related to that filtering.\n\nChange-Id: I815443fa7cfd54c9884aff751caf701fd77a8f3a\nCloses-Bug: #1887135\n""}]",8,740465,5493304944a443dcab74439c522a18bbf62d1d2a,16,9,4,8297,,,0,"Properly collect tasks with or conditional in step file.

Tasks with or conditional (step == 1 or step == 0) were not showing up
in the step file.

To make sure we collect the tasks properly we refactor the filter
logic:
 1. make all conditional a big string with no spaces and no Boolean
 2. use findall to collect all the conditional step
 3. if step found and it does belong to the current step add it.
 4. if step found and it doesn't belong to the current step remove it.
 5. if step condition not found, let strict decide.
 6. if strict remove it else add it (default behavior)

We also add a unit test related to that filtering.

Change-Id: I815443fa7cfd54c9884aff751caf701fd77a8f3a
Closes-Bug: #1887135
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/65/740465/2 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_common/utils/config.py', 'tripleo_common/tests/utils/test_config.py']",2,db0b6de105c62f35bd21dfddb91e6e09871ed466,bp/tripleo-update-smart-steps," @patch.object(ooo_config.Config, '_open_file') def test_overcloud_config__write_tasks_per_step(self, mock_open_file): heat = mock.MagicMock() self.config = ooo_config.Config(heat) # TODO: how can I share this tasks definition between to test as a fixture # So that I do two several test cases instead of a big one. tasks = [ { ""when"": ""step|int == 0"", ""name"": ""Simple check"" }, { ""when"": ""(step|int == 0)"", ""name"": ""Check within parenthesis"" }, { ""when"": [""step|int == 0"", ""test1"", False], ""name"": ""Check with list with boolean"" }, { ""when"": [""test1"", False, ""step|int == 0""], ""name"": ""Check with list with boolean other order"" }, { ""when"": ""step|int == 0 or step|int == 3"", ""name"": ""Check with boolean expression"" }, { ""when"": ""(step|int == 0 or step|int == 3) and yum_pid_file.stat.exists"", ""name"": ""Complex boolean expression"" }, { ""name"": ""Task with no conditional"" } ] # Everything should come back tasks_per_step = self.config._write_tasks_per_step( tasks, 'Compute', 'Compute/update_tasks_step0.yaml', 0 ) self.assertEqual(tasks, tasks_per_step) # Using stict the tasks with no conditional will be dropped tasks_per_step = self.config._write_tasks_per_step( tasks, 'Compute', 'Compute/update_tasks_step0.yaml', 0, strict=True, ) expected_tasks = [task for task in tasks if task != {""name"": ""Task with no conditional""}] self.assertEqual(expected_tasks, tasks_per_step) # Some tasks will be filtered out for step 3. tasks_per_step = self.config._write_tasks_per_step( tasks, 'Compute', 'Compute/update_tasks_step3.yaml', 3 ) self.assertEqual( [ { ""when"": ""step|int == 0 or step|int == 3"", ""name"": ""Check with boolean expression"" }, { ""when"": ""(step|int == 0 or step|int == 3) and yum_pid_file.stat.exists"", ""name"": ""Complex boolean expression"" }, { ""name"": ""Task with no conditional"" } ], tasks_per_step) # Even more tasks will be filtered out for step 3 with strict. tasks_per_step = self.config._write_tasks_per_step( tasks, 'Compute', 'Compute/update_tasks_step3.yaml', 3, strict=True, ) self.assertEqual( [ { ""when"": ""step|int == 0 or step|int == 3"", ""name"": ""Check with boolean expression"" }, { ""when"": ""(step|int == 0 or step|int == 3) and yum_pid_file.stat.exists"", ""name"": ""Complex boolean expression"" }, ], tasks_per_step)",,123,15
openstack%2Ftripleo-common~master~I2033efd47c09707797a4b48a853517d42f584e76,openstack/tripleo-common,master,I2033efd47c09707797a4b48a853517d42f584e76,Add a strict option to per role tasks file generation.,MERGED,2020-07-02 16:00:05.000000000,2020-07-22 22:28:51.000000000,2020-07-22 22:27:28.000000000,"[{'_account_id': 3153}, {'_account_id': 6816}, {'_account_id': 6926}, {'_account_id': 7144}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-02 16:00:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/1266bff5883041b1676078059afcbb119c38d935', 'message': ""Add a strict option to per role tasks file generation.\n\nFor upgrade and deployment we generate tasks files based on the step\ntasks must run in.\n\nBy default, all tasks that doesn't have a matching conditional are\nincluded in all step files.\n\nWe add a option to be able to control this behavior.\n\nPER_STEP_TASKS becomes a dictionary of array.  Each element of the\narray map to the steps: element 0 is step0 and so on.  That element\ntell the _write_tasks_per_step function if we include tasks with no conditional\n(when strict is False) or excluded (when strict is True).\n\nThis open the possibility to prevent tasks from being run at every\nstep when the user forgot to add the conditional.\n\nChange-Id: I2033efd47c09707797a4b48a853517d42f584e76\n""}, {'number': 2, 'created': '2020-07-09 11:24:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/d21112690714093650b60242c698631f603af9be', 'message': ""Add a strict option to per role tasks file generation.\n\nFor upgrade and deployment we generate tasks files based on the step\ntasks must run in.\n\nBy default, all tasks that doesn't have a matching conditional are\nincluded in all step files.\n\nWe add a option to be able to control this behavior.\n\nPER_STEP_TASKS becomes a dictionary with key being the current config\ncollected and the value is an array.  Each element of the array map to\nthe steps: element 0 is step0 and so on.  That element tell the\n_write_tasks_per_step function if we include tasks with no\nconditional when it is False or excluded when it is True.\n\nThis structure opens four possibilities:\n\n - allow to have step task of different length: for instance if we\n   want to expand post update tasks which have a length of four (not\n   DEFAULT_STEPS_MAX)\n\n - In testing, we can identify the tasks with no conditional by\n   putting all normal step to strict (set True for every step) and add\n   a extra one set to False.  The extra one will have the steps with\n   no conditional.\n\n - Identify when the conditional matcher in _write_tasks_per_step\n   fails.\n\n - Eventually, set everything to strict to force the developer to\n   properly add conditional to every tasks.\n\nAs it is, the change has no impact and keep the current default\nbehavior.\n\nChange-Id: I2033efd47c09707797a4b48a853517d42f584e76\n""}, {'number': 3, 'created': '2020-07-22 13:43:55.000000000', 'files': ['tripleo_common/constants.py', 'tripleo_common/utils/config.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/7c67777f4a256bfc8c5285294769671f0922d479', 'message': ""Add a strict option to per role tasks file generation.\n\nFor upgrade and deployment we generate tasks files based on the step\ntasks must run in.\n\nBy default, all tasks that doesn't have a matching conditional are\nincluded in all step files.\n\nWe add a option to be able to control this behavior.\n\nPER_STEP_TASKS becomes a dictionary with key being the current config\ncollected and the value is an array.  Each element of the array map to\nthe steps: element 0 is step0 and so on.  That element tell the\n_write_tasks_per_step function if we include tasks with no\nconditional when it is False or excluded when it is True.\n\nThis structure opens four possibilities:\n\n - allow to have step task of different length: for instance if we\n   want to expand post update tasks which have a length of four (not\n   DEFAULT_STEPS_MAX)\n\n - In testing, we can identify the tasks with no conditional by\n   putting all normal step to strict (set True for every step) and add\n   a extra one set to False.  The extra one will have the steps with\n   no conditional.\n\n - Identify when the conditional matcher in _write_tasks_per_step\n   fails.\n\n - Eventually, set everything to strict to force the developer to\n   properly add conditional to every tasks.\n\nAs it is, the change has no impact and keep the current default\nbehavior.\n\nChange-Id: I2033efd47c09707797a4b48a853517d42f584e76\n""}]",3,739083,7c67777f4a256bfc8c5285294769671f0922d479,23,8,3,8297,,,0,"Add a strict option to per role tasks file generation.

For upgrade and deployment we generate tasks files based on the step
tasks must run in.

By default, all tasks that doesn't have a matching conditional are
included in all step files.

We add a option to be able to control this behavior.

PER_STEP_TASKS becomes a dictionary with key being the current config
collected and the value is an array.  Each element of the array map to
the steps: element 0 is step0 and so on.  That element tell the
_write_tasks_per_step function if we include tasks with no
conditional when it is False or excluded when it is True.

This structure opens four possibilities:

 - allow to have step task of different length: for instance if we
   want to expand post update tasks which have a length of four (not
   DEFAULT_STEPS_MAX)

 - In testing, we can identify the tasks with no conditional by
   putting all normal step to strict (set True for every step) and add
   a extra one set to False.  The extra one will have the steps with
   no conditional.

 - Identify when the conditional matcher in _write_tasks_per_step
   fails.

 - Eventually, set everything to strict to force the developer to
   properly add conditional to every tasks.

As it is, the change has no impact and keep the current default
behavior.

Change-Id: I2033efd47c09707797a4b48a853517d42f584e76
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/83/739083/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_common/constants.py', 'tripleo_common/utils/config.py']",2,1266bff5883041b1676078059afcbb119c38d935,bp/tripleo-update-smart-steps," def _write_tasks_per_step(self, tasks, role, filepath, step, strict=False): def step_in_task(task, step, strict): if not strict: # If no step is defined, it will be executed for all # steps if strict is false return True else: # We only want the task with the step defined. return False # No match if strict: return False tasks_per_step = [task for task in tasks if step_in_task(task, step, strict)] if config in constants.PER_STEP_TASKS.keys(): for i in range(len(constants.PER_STEP_TASKS[config])): self._write_tasks_per_step( role[config], role_name, filepath, i, constants.PER_STEP_TASKS[config][i])"," def _write_tasks_per_step(self, tasks, role, filepath, step): def step_in_task(task, step): # If no step is defined, it will be executed for all # steps. return True tasks_per_step = [task for task in tasks if step_in_task(task, step)] if config in constants.PER_STEP_TASKS: for i in range(constants.DEFAULT_STEPS_MAX): self._write_tasks_per_step(role[config], role_name, filepath, i)",27,11
openstack%2Fpython-tripleoclient~stable%2Ftrain~I08b447379ae6e267f8dff11e6e703a991918683c,openstack/python-tripleoclient,stable/train,I08b447379ae6e267f8dff11e6e703a991918683c,[stable-only] Use folder with plan name for config download export,MERGED,2020-07-15 10:25:26.000000000,2020-07-22 22:28:35.000000000,2020-07-22 22:27:24.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 9592}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-15 10:25:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/99fab27764ff1d1a0dd50256d5ff53735a87e5c0', 'message': '[stable-only] Use folder with plan name for config download export\n\nTo be consistent with auto config-download and overcloud export\ncreate subfloder with plan/stack name.\n\nChange-Id: I08b447379ae6e267f8dff11e6e703a991918683c\nCloses-Bug: #1884246\n(cherry picked from commit 46c9aa552f7ff7ce392d065d0da2c36bf4037ee8)\n'}, {'number': 2, 'created': '2020-07-21 18:44:31.000000000', 'files': ['tripleoclient/tests/v1/overcloud_config/test_overcloud_config.py', 'tripleoclient/v1/overcloud_config.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/309df8afbe51830ccaf0af7cf39ee656d61fb828', 'message': '[stable-only] Use folder with plan name for config download export\n\nTo be consistent with auto config-download and overcloud export\ncreate subfloder with plan/stack name.\n\nChange-Id: I08b447379ae6e267f8dff11e6e703a991918683c\nCloses-Bug: #1884246\n(cherry picked from commit 46c9aa552f7ff7ce392d065d0da2c36bf4037ee8)\n'}]",0,741141,309df8afbe51830ccaf0af7cf39ee656d61fb828,22,5,2,8833,,,0,"[stable-only] Use folder with plan name for config download export

To be consistent with auto config-download and overcloud export
create subfloder with plan/stack name.

Change-Id: I08b447379ae6e267f8dff11e6e703a991918683c
Closes-Bug: #1884246
(cherry picked from commit 46c9aa552f7ff7ce392d065d0da2c36bf4037ee8)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/41/741141/2 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/tests/v1/overcloud_config/test_overcloud_config.py', 'tripleoclient/v1/overcloud_config.py']",2,99fab27764ff1d1a0dd50256d5ff53735a87e5c0,," work_dir = os.path.join(config_dir, name) self.create_config_dir(work_dir, preserve_config_dir) tarball_path = os.path.join(work_dir, tarball_name) cmd = ['/usr/bin/tar', '-C', work_dir, '-xf', tarball_path] ""into: {0}"".format(work_dir))"," self.create_config_dir(config_dir, preserve_config_dir) tarball_path = os.path.join(config_dir, tarball_name) cmd = ['/usr/bin/tar', '-C', config_dir, '-xf', tarball_path] ""into: {0}"".format(config_dir))",15,5
openstack%2Fopenstack-helm-images~master~Iba4aa4d26f293268cff91e25f154041f889b79cd,openstack/openstack-helm-images,master,Iba4aa4d26f293268cff91e25f154041f889b79cd,Add post-review test deployments after image build,MERGED,2020-07-19 22:14:53.000000000,2020-07-22 22:28:21.000000000,2020-07-22 22:22:24.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-19 22:14:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/1e328ca7b6fd489e67ba407e2be39eae8dba58bd', 'message': 'Add post-review test deployments after image build\n\nChange-Id: Iba4aa4d26f293268cff91e25f154041f889b79cd\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2020-07-19 22:16:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/df1bdc76ffbc7c5c38ce9c991d4e2407bd938583', 'message': 'Add post-review test deployments after image build\n\nChange-Id: Iba4aa4d26f293268cff91e25f154041f889b79cd\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2020-07-19 22:20:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/d4bb71e2e328abd0218704637ec33fa73a6e10e7', 'message': 'Add post-review test deployments after image build\n\nChange-Id: Iba4aa4d26f293268cff91e25f154041f889b79cd\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 4, 'created': '2020-07-22 01:11:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/c803a642664898f9c281d6b05a7272e3d1f7bcbe', 'message': 'Add post-review test deployments after image build\n\nChange-Id: Iba4aa4d26f293268cff91e25f154041f889b79cd\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 5, 'created': '2020-07-22 01:28:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/b0fcdb74072a97597b3a3a0c4f7c74c6544dd268', 'message': 'Add post-review test deployments after image build\n\nChange-Id: Iba4aa4d26f293268cff91e25f154041f889b79cd\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 6, 'created': '2020-07-22 02:22:38.000000000', 'files': ['zuul.d/fluentd.yaml', 'zuul.d/ospurge.yaml', 'zuul.d/patroni.yaml', 'zuul.d/libvirt.yaml', 'zuul.d/osh-selenium.yaml', 'zuul.d/nagios.yaml', 'zuul.d/prometheus-openstack-exporter.yaml', 'zuul.d/node-problem-detector.yaml', 'zuul.d/elasticsearch-s3.yaml', 'zuul.d/openstack-loci.yaml', 'zuul.d/mariadb.yaml', 'zuul.d/openvswitch.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/e044e6381a268eef9a6cb2281f2b5dff94763872', 'message': 'Add post-review test deployments after image build\n\nChange-Id: Iba4aa4d26f293268cff91e25f154041f889b79cd\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",1,741855,e044e6381a268eef9a6cb2281f2b5dff94763872,25,6,6,8863,,,0,"Add post-review test deployments after image build

Change-Id: Iba4aa4d26f293268cff91e25f154041f889b79cd
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/55/741855/6 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/fluentd.yaml', 'zuul.d/ospurge.yaml', 'zuul.d/patroni.yaml', 'zuul.d/libvirt.yaml', 'zuul.d/osh-selenium.yaml', 'zuul.d/nagios.yaml', 'zuul.d/prometheus-openstack-exporter.yaml', 'zuul.d/node-problem-detector.yaml', 'zuul.d/elasticsearch-s3.yaml', 'zuul.d/openstack-loci.yaml', 'zuul.d/mariadb.yaml', 'zuul.d/openvswitch.yaml']",12,1e328ca7b6fd489e67ba407e2be39eae8dba58bd,, - openstack-helm-images-compute-kit-stein-openvswitch: dependencies: - name: openstack-helm-images-upload-openvswitch - openstack-helm-images-compute-kit-train-openvswitch: dependencies: - name: openstack-helm-images-upload-openvswitch - job: name: openstack-helm-images-compute-kit-stein-openvswitch parent: openstack-helm-compute-kit-stein-ubuntu_bionic dependencies: - name: openstack-helm-images-upload-openvswitch description: Deploy stein compute kit with openvswitch proposed image vars: *openvswitch_vars files: *openvswitch_files - job: name: openstack-helm-images-compute-kit-train-openvswitch parent: openstack-helm-compute-kit-train-ubuntu_bionic dependencies: - name: openstack-helm-images-upload-openvswitch description: Deploy train compute kit with openvswitch proposed image vars: *openvswitch_vars files: *openvswitch_files,,172,4
openstack%2Ftripleo-heat-templates~stable%2Fstein~I567839785a72813a382a00253562894e19eb6715,openstack/tripleo-heat-templates,stable/stein,I567839785a72813a382a00253562894e19eb6715,Don't set RABBITMQ_SERVER_ERL_ARGS,MERGED,2020-07-07 13:36:24.000000000,2020-07-22 22:27:35.000000000,2020-07-22 22:27:35.000000000,"[{'_account_id': 7144}, {'_account_id': 9257}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-07 13:36:24.000000000', 'files': ['deployment/rabbitmq/rabbitmq-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/f08b9164c7351bca811de2bc5fb153285d1f5b9c', 'message': 'Don\'t set RABBITMQ_SERVER_ERL_ARGS\n\nFrom the RabbitMQ docs[1]:\n\n""RABBITMQ_SERVER_ERL_ARGS - Standard parameters for the erl command\nused when invoking the RabbitMQ Server. This should be overridden for\ndebugging purposes only. Overriding this variable replaces the default\nvalue.""\n\nWe do not need any of the current values because of this commit from\n2015 in rabbitmq 3.5.4:\n\nhttps://github.com/rabbitmq/rabbitmq-server/commit/5c3c0e6f38792ca37289888ce39996e6baf4d846\n\nIn which the ""+K true"" and ""-kernel inet_default_connect_options\n""[{nodelay,true}]"" options were hard-coded to the rabbitmq-server\nscript.  Meanwhile the ""+P 1048576"" configuration was moved to the\nrabbitmq-env script under the SERVER_ERL_ARGS variable, which is the\ndefaults used when RABBITMQ_SERVER_ERL_ARGS is unset.\n\n[1] https://www.rabbitmq.com/configure.html#supported-environment-variables\n\nLet\'s also move the current RabbitAdditionalErlArgs to a new dedicated\noverride hiera key.\n\nNB: To get this properly working we need a puppet-rabbitmq that contains\n    https://github.com/voxpupuli/puppet-rabbitmq/pull/841\nDepends-On: I3bf244a70538209773804eb85fae6be035c587f4\n\nCloses-Bug: #1884922\n\nChange-Id: I567839785a72813a382a00253562894e19eb6715\n(cherry picked from commit 938166b93b8fc525d575c53509f8364a8f3d04e5)\n'}]",0,739751,f08b9164c7351bca811de2bc5fb153285d1f5b9c,9,5,1,20172,,,0,"Don't set RABBITMQ_SERVER_ERL_ARGS

From the RabbitMQ docs[1]:

""RABBITMQ_SERVER_ERL_ARGS - Standard parameters for the erl command
used when invoking the RabbitMQ Server. This should be overridden for
debugging purposes only. Overriding this variable replaces the default
value.""

We do not need any of the current values because of this commit from
2015 in rabbitmq 3.5.4:

https://github.com/rabbitmq/rabbitmq-server/commit/5c3c0e6f38792ca37289888ce39996e6baf4d846

In which the ""+K true"" and ""-kernel inet_default_connect_options
""[{nodelay,true}]"" options were hard-coded to the rabbitmq-server
script.  Meanwhile the ""+P 1048576"" configuration was moved to the
rabbitmq-env script under the SERVER_ERL_ARGS variable, which is the
defaults used when RABBITMQ_SERVER_ERL_ARGS is unset.

[1] https://www.rabbitmq.com/configure.html#supported-environment-variables

Let's also move the current RabbitAdditionalErlArgs to a new dedicated
override hiera key.

NB: To get this properly working we need a puppet-rabbitmq that contains
    https://github.com/voxpupuli/puppet-rabbitmq/pull/841
Depends-On: I3bf244a70538209773804eb85fae6be035c587f4

Closes-Bug: #1884922

Change-Id: I567839785a72813a382a00253562894e19eb6715
(cherry picked from commit 938166b93b8fc525d575c53509f8364a8f3d04e5)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/51/739751/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/rabbitmq/rabbitmq-container-puppet.yaml'],1,f08b9164c7351bca811de2bc5fb153285d1f5b9c,, tripleo::profile::base::rabbitmq::additional_erl_args: {get_param: RabbitAdditionalErlArgs}," RABBITMQ_SERVER_ERL_ARGS: '""+K true +P 1048576 -kernel inet_default_connect_options [{nodelay,true}]""' RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS: {get_param: RabbitAdditionalErlArgs}",1,2
openstack%2Ftripleo-common~master~Ibc7ba230bce3464482a91cfea3cc4791544e3abf,openstack/tripleo-common,master,Ibc7ba230bce3464482a91cfea3cc4791544e3abf,Add update and post update tasks to step generated file.,MERGED,2020-07-09 11:24:45.000000000,2020-07-22 22:27:31.000000000,2020-07-22 22:27:31.000000000,"[{'_account_id': 3153}, {'_account_id': 6816}, {'_account_id': 7144}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-07-09 11:24:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/88a958cfc46df2430e470e80b282729fbf7a0764', 'message': 'add update and post update tasks and a extra debug step.\n\nChange-Id: Ibc7ba230bce3464482a91cfea3cc4791544e3abf\n'}, {'number': 2, 'created': '2020-07-09 12:53:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/7f8d6e3dcbe28988db334438f489412df656f3f6', 'message': ""Add update and post update tasks to step generated file.\n\nThis will create update_tasks_stepX.yaml for X from 0 to 5 and\npost_update_tasks_stepX.yaml for X from 0 to 3.\n\nThe usuals <ROLE>/post_update_tasks.yaml and <ROLE>/update_tasks.yaml\nare still created so that patch won't break current deployment but it\nwill open the way to load each step file instead of looping over the\nstep.\n\nChange-Id: Ibc7ba230bce3464482a91cfea3cc4791544e3abf\n""}, {'number': 3, 'created': '2020-07-22 13:45:07.000000000', 'files': ['tripleo_common/constants.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/642e396f280e3041c8b674fdf22d70b0f857a4ec', 'message': ""Add update and post update tasks to step generated file.\n\nThis will create update_tasks_stepX.yaml for X from 0 to 5 and\npost_update_tasks_stepX.yaml for X from 0 to 3.\n\nThe usuals <ROLE>/post_update_tasks.yaml and <ROLE>/update_tasks.yaml\nare still created so that patch won't break current deployment but it\nwill open the way to load each step file instead of looping over the\nstep.\n\nChange-Id: Ibc7ba230bce3464482a91cfea3cc4791544e3abf\n""}]",0,740247,642e396f280e3041c8b674fdf22d70b0f857a4ec,13,8,3,8297,,,0,"Add update and post update tasks to step generated file.

This will create update_tasks_stepX.yaml for X from 0 to 5 and
post_update_tasks_stepX.yaml for X from 0 to 3.

The usuals <ROLE>/post_update_tasks.yaml and <ROLE>/update_tasks.yaml
are still created so that patch won't break current deployment but it
will open the way to load each step file instead of looping over the
step.

Change-Id: Ibc7ba230bce3464482a91cfea3cc4791544e3abf
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/47/740247/3 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/constants.py'],1,88a958cfc46df2430e470e80b282729fbf7a0764,bp/tripleo-update-smart-steps," 'deploy_steps_tasks': _PER_STEP_TASK_STRICTNESS, 'update_tasks': _PER_STEP_TASK_STRICTNESS, 'post_update_tasks': [False, False, False, False]", 'deploy_steps_tasks': _PER_STEP_TASK_STRICTNESS,3,1
openstack%2Ftripleo-ci~master~Ic3d9f706a1a8fe468be739e73d5b577e445b7d64,openstack/tripleo-ci,master,Ic3d9f706a1a8fe468be739e73d5b577e445b7d64,build-containers: allow to use ci_branch to find out if it's train,MERGED,2020-07-21 19:01:42.000000000,2020-07-22 22:27:30.000000000,2020-07-22 22:27:29.000000000,"[{'_account_id': 9976}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 19:01:42.000000000', 'files': ['roles/build-containers/tasks/pre.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d7b3b43a6893170c95d3f35bb5d1c6db437b5663', 'message': ""build-containers: allow to use ci_branch to find out if it's train\n\nIn build-containers role, we try to find out if train is being deployed\nbut it's missing a check on ci_branch.\nThanks to that, we'll run the right tripleo-image-serve role on Train.\n\nChange-Id: Ic3d9f706a1a8fe468be739e73d5b577e445b7d64\n""}]",0,742267,d7b3b43a6893170c95d3f35bb5d1c6db437b5663,8,4,1,3153,,,0,"build-containers: allow to use ci_branch to find out if it's train

In build-containers role, we try to find out if train is being deployed
but it's missing a check on ci_branch.
Thanks to that, we'll run the right tripleo-image-serve role on Train.

Change-Id: Ic3d9f706a1a8fe468be739e73d5b577e445b7d64
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/67/742267/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/build-containers/tasks/pre.yaml'],1,d7b3b43a6893170c95d3f35bb5d1c6db437b5663,version, or (ci_branch is defined and ci_branch == 'train'),,1,0
openstack%2Fpuppet-tripleo~stable%2Fussuri~I6221c300b3d329b6d1f80f354fd665fdbcf4536e,openstack/puppet-tripleo,stable/ussuri,I6221c300b3d329b6d1f80f354fd665fdbcf4536e,bump metadata for new ussuri release,MERGED,2020-07-22 15:44:52.000000000,2020-07-22 22:27:27.000000000,2020-07-22 22:27:27.000000000,"[{'_account_id': 3153}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 15:44:52.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/fa42b3b6ac8fde11fe786016aa90fab9d98f2ced', 'message': 'bump metadata for new ussuri release\n\nChange-Id: I6221c300b3d329b6d1f80f354fd665fdbcf4536e\n'}]",0,742463,fa42b3b6ac8fde11fe786016aa90fab9d98f2ced,6,2,1,9592,,,0,"bump metadata for new ussuri release

Change-Id: I6221c300b3d329b6d1f80f354fd665fdbcf4536e
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/63/742463/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,fa42b3b6ac8fde11fe786016aa90fab9d98f2ced,ussuri," ""version"": ""12.4.0"","," ""version"": ""12.3.0"",",1,1
openstack%2Fpuppet-tripleo~master~I7ff13b61d932df8337958ab690e9356d8d7ab0f1,openstack/puppet-tripleo,master,I7ff13b61d932df8337958ab690e9356d8d7ab0f1,first devel release for Victoria ( victoria-1 ),MERGED,2020-05-13 17:28:12.000000000,2020-07-22 22:27:26.000000000,2020-07-22 22:27:25.000000000,"[{'_account_id': 3153}, {'_account_id': 9592}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-05-13 17:28:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/939c50f9a3059339bcf2d3d20185c354687f4cc9', 'message': 'DNM, first release for Victoria\n\nChange-Id: I7ff13b61d932df8337958ab690e9356d8d7ab0f1\n'}, {'number': 2, 'created': '2020-07-22 16:27:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/42229d1e405470d71382ac10da2a52db70c5c2a8', 'message': 'first devel release for Victoria ( victoria-1 )\n\nChange-Id: I7ff13b61d932df8337958ab690e9356d8d7ab0f1\n'}, {'number': 3, 'created': '2020-07-22 16:28:27.000000000', 'files': ['metadata.json'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/545eba0db4d8bf8ab3b593425c028e3cbc67eb09', 'message': 'first devel release for Victoria ( victoria-1 )\n\nChange-Id: I7ff13b61d932df8337958ab690e9356d8d7ab0f1\n'}]",0,727844,545eba0db4d8bf8ab3b593425c028e3cbc67eb09,12,4,3,9592,,,0,"first devel release for Victoria ( victoria-1 )

Change-Id: I7ff13b61d932df8337958ab690e9356d8d7ab0f1
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/44/727844/3 && git format-patch -1 --stdout FETCH_HEAD,['metadata.json'],1,939c50f9a3059339bcf2d3d20185c354687f4cc9,," ""version"": ""13.0.0"","," ""version"": ""12.3.0"",",1,1
openstack%2Fcharm-swift-storage~master~Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9,openstack/charm-swift-storage,master,Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9,Add monitoring for object-replicator logs disappearing,MERGED,2019-12-23 19:32:58.000000000,2020-07-22 21:59:38.000000000,2020-07-22 21:59:38.000000000,"[{'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 25011}, {'_account_id': 27944}, {'_account_id': 29805}, {'_account_id': 31420}]","[{'number': 1, 'created': '2019-12-23 19:32:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/49fb6614b5789bd677e691fc77640266f36ca609', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during coro-thread cleanup that affects\nthe swift-object-replicator\'s ability to complete replication successfully.  This is most easily\nwitnessed by the lack of the every 5 minute replicated percentage complete messages that should\ncome from the swift-object-replicator daemon to syslog.  This patch monitors for and alerts on\nthe condition of the ""replicated"" line missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 2, 'created': '2019-12-23 19:52:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/27fdacaeb0fe5bd827c6c68ad4d447384229c0b1', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during coro-thread cleanup that affects\nthe swift-object-replicator\'s ability to complete replication successfully.  This is most easily\nwitnessed by the lack of the every 5 minute replicated percentage complete messages that should\ncome from the swift-object-replicator daemon to syslog.  This patch monitors for and alerts on\nthe condition of the ""replicated"" line missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 3, 'created': '2019-12-23 20:13:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/76ea2ea85b0c361df7e972a0709e2ff25c50ddc0', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during coro-thread cleanup that affects\nthe swift-object-replicator\'s ability to complete replication successfully.  This is most easily\nwitnessed by the lack of the every 5 minute replicated percentage complete messages that should\ncome from the swift-object-replicator daemon to syslog.  This patch monitors for and alerts on\nthe condition of the ""replicated"" line missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 4, 'created': '2019-12-30 14:54:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/a98bc15a7e7c568161216c2eaa68d0d3066a7747', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during coro-thread cleanup that affects\nthe swift-object-replicator\'s ability to complete replication successfully.  This is most easily\nwitnessed by the lack of the every 5 minute replicated percentage complete messages that should\ncome from the swift-object-replicator daemon to syslog.  This patch monitors for and alerts on\nthe condition of the ""replicated"" line missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 5, 'created': '2019-12-30 14:56:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/8b8d85772d668aa28cf676091018ffd9dbf4fc02', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during\ncoro-thread cleanup that affects the swift-object-replicator\'s ability\nto complete replication successfully.  This is most easily witnessed by\nthe lack of the every 5 minute replicated percentage complete messages\nthat should come from the swift-object-replicator daemon to syslog.\nThis patch monitors for and alerts on the condition of the ""replicated""\nline missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 6, 'created': '2019-12-30 15:20:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/09b7639222e6d461710d141e7d3626a199861afd', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during\ncoro-thread cleanup that affects the swift-object-replicator\'s ability\nto complete replication successfully.  This is most easily witnessed by\nthe lack of the every 5 minute replicated percentage complete messages\nthat should come from the swift-object-replicator daemon to syslog.\nThis patch monitors for and alerts on the condition of the ""replicated""\nline missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 7, 'created': '2020-04-16 21:25:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/6454bf412d03b6a283db6b8ac0e2f44c5e08ec39', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during\ncoro-thread cleanup that affects the swift-object-replicator\'s ability\nto complete replication successfully.  This is most easily witnessed by\nthe lack of the every 5 minute replicated percentage complete messages\nthat should come from the swift-object-replicator daemon to syslog.\nThis patch monitors for and alerts on the condition of the ""replicated""\nline missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 8, 'created': '2020-05-29 19:07:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/8a07eac96278d6b7e3f513e0f8ff5abc0bc9031b', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during\ncoro-thread cleanup that affects the swift-object-replicator\'s ability\nto complete replication successfully.  This is most easily witnessed by\nthe lack of the every 5 minute replicated percentage complete messages\nthat should come from the swift-object-replicator daemon to syslog.\nThis patch monitors for and alerts on the condition of the ""replicated""\nline missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 9, 'created': '2020-07-20 21:10:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/1dc0a6cef3db9a67f93463c54612c098cbd3308b', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during\ncoro-thread cleanup that affects the swift-object-replicator\'s ability\nto complete replication successfully.  This is most easily witnessed by\nthe lack of the every 5 minute replicated percentage complete messages\nthat should come from the swift-object-replicator daemon to syslog.\nThis patch monitors for and alerts on the condition of the ""replicated""\nline missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 10, 'created': '2020-07-21 14:17:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/b5f1b0910b486a50fbce068b1a35246793ea09a8', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during\ncoro-thread cleanup that affects the swift-object-replicator\'s ability\nto complete replication successfully.  This is most easily witnessed by\nthe lack of the every 5 minute replicated percentage complete messages\nthat should come from the swift-object-replicator daemon to syslog.\nThis patch monitors for and alerts on the condition of the ""replicated""\nline missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}, {'number': 11, 'created': '2020-07-21 20:31:24.000000000', 'files': ['files/nrpe-external-master/check_swift_replicator_logs.sh', 'unit_tests/test_swift_storage_relations.py', 'config.yaml', 'files/sudo/swift-storage', 'files/nrpe-external-master/check_timed_logs.pl', 'unit_tests/test_swift_storage_utils.py', 'hooks/swift_storage_hooks.py', 'lib/swift_storage_utils.py'], 'web_link': 'https://opendev.org/openstack/charm-swift-storage/commit/74daa465d626f04f30685f46025fbd6799be2657', 'message': 'Add monitoring for object-replicator logs disappearing\n\nAs noted in lp#1691570, there is an issue with storage I/O during\ncoro-thread cleanup that affects the swift-object-replicator\'s ability\nto complete replication successfully.  This is most easily witnessed by\nthe lack of the every 5 minute replicated percentage complete messages\nthat should come from the swift-object-replicator daemon to syslog.\nThis patch monitors for and alerts on the condition of the ""replicated""\nline missing from syslog within the past 15 minutes.\n\nChange-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9\nCloses-Bug: 1691570\n'}]",1,700444,74daa465d626f04f30685f46025fbd6799be2657,59,8,11,25011,,,0,"Add monitoring for object-replicator logs disappearing

As noted in lp#1691570, there is an issue with storage I/O during
coro-thread cleanup that affects the swift-object-replicator's ability
to complete replication successfully.  This is most easily witnessed by
the lack of the every 5 minute replicated percentage complete messages
that should come from the swift-object-replicator daemon to syslog.
This patch monitors for and alerts on the condition of the ""replicated""
line missing from syslog within the past 15 minutes.

Change-Id: Ieb15da3f3f67fa9bcad03151e36c70faae4c36c9
Closes-Bug: 1691570
",git fetch https://review.opendev.org/openstack/charm-swift-storage refs/changes/44/700444/3 && git format-patch -1 --stdout FETCH_HEAD,"['files/nrpe-external-master/check_swift_replication.py', 'config.yaml', 'files/nrpe-external-master/check_timed_logs.pl', 'hooks/swift_storage_hooks.py', 'lib/swift_storage_utils.py']",5,49fb6614b5789bd677e691fc77640266f36ca609,bug/1691570," 'libfile-readbackwards-perl', 'libtime-piece-perl',",,400,0
openstack%2Fswift~stable%2Fussuri~I3ccd145c14a9b68ff8a9da61f79034549c9bc127,openstack/swift,stable/ussuri,I3ccd145c14a9b68ff8a9da61f79034549c9bc127,Breakup reclaim into batches,MERGED,2020-07-17 22:17:20.000000000,2020-07-22 21:01:52.000000000,2020-07-22 20:59:30.000000000,"[{'_account_id': 1179}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-17 22:17:20.000000000', 'files': ['swift/common/db.py', 'test/unit/common/test_db.py', 'test/unit/container/test_backend.py', 'test/unit/account/test_backend.py', 'swift/container/backend.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/bb0a283a07df3c2c73eb696c5c3ac75e4a366f5a', 'message': 'Breakup reclaim into batches\n\nWe want to do the table scan without locking and group the locking\ndeletes into small indexed operations to minimize the impact of\nbackground processes calling reclaim each cycle.\n\nChange-Id: I3ccd145c14a9b68ff8a9da61f79034549c9bc127\nCo-Authored-By: Tim Burke <tim.burke@gmail.com>\nCloses-Bug: #1877651\n(cherry picked from commit aab45880f8aaddfed15fe641939aac0d2eccc465)\n'}]",0,741753,bb0a283a07df3c2c73eb696c5c3ac75e4a366f5a,12,3,1,15343,,,0,"Breakup reclaim into batches

We want to do the table scan without locking and group the locking
deletes into small indexed operations to minimize the impact of
background processes calling reclaim each cycle.

Change-Id: I3ccd145c14a9b68ff8a9da61f79034549c9bc127
Co-Authored-By: Tim Burke <tim.burke@gmail.com>
Closes-Bug: #1877651
(cherry picked from commit aab45880f8aaddfed15fe641939aac0d2eccc465)
",git fetch https://review.opendev.org/openstack/swift refs/changes/53/741753/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/common/db.py', 'test/unit/common/test_db.py', 'test/unit/container/test_backend.py', 'test/unit/account/test_backend.py', 'swift/container/backend.py']",5,bb0a283a07df3c2c73eb696c5c3ac75e4a366f5a,batched-reclaim-stable/ussuri," zero_like, DatabaseAlreadyExists, SQLITE_ARG_LIMIT def _reclaim_other_stuff(self, conn, age_timestamp, sync_timestamp): super(ContainerBroker, self)._reclaim_other_stuff( conn, age_timestamp, sync_timestamp)"," zero_like, DatabaseAlreadyExists SQLITE_ARG_LIMIT = 999 def _reclaim(self, conn, age_timestamp, sync_timestamp): super(ContainerBroker, self)._reclaim(conn, age_timestamp, sync_timestamp)",208,16
openstack%2Frequirements~master~I1f0b07423a4ef80ca852d6244d0cd87dc2534f3c,openstack/requirements,master,I1f0b07423a4ef80ca852d6244d0cd87dc2534f3c,update constraint for validations-libs to new release 1.0.2,MERGED,2020-07-22 14:28:52.000000000,2020-07-22 21:01:26.000000000,2020-07-22 20:59:32.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-22 14:28:52.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/4d4f7d377e4305a967e84c88d07d0e92f4259cd7', 'message': 'update constraint for validations-libs to new release 1.0.2\n\nChange-Id: I1f0b07423a4ef80ca852d6244d0cd87dc2534f3c\nmeta:version: 1.0.2\nmeta:diff-start: -\nmeta:series: independent\nmeta:release-type: release\nmeta:pypi: no\nmeta:first: no\nmeta:release:Author: Mathieu Bultel <mat.bultel@gmail.com>\nmeta:release:Commit: mathieu bultel <mat.bultel@gmail.com>\nmeta:release:Change-Id: I18ab5d7afa350746ba2310a219755f07ef957b06\nmeta:release:Code-Review+1: Cédric Jeanneret (Tengu) <cjeanner@redhat.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Code-Review+1: wes hayutin <whayutin@redhat.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,742448,4d4f7d377e4305a967e84c88d07d0e92f4259cd7,10,4,1,11131,,,0,"update constraint for validations-libs to new release 1.0.2

Change-Id: I1f0b07423a4ef80ca852d6244d0cd87dc2534f3c
meta:version: 1.0.2
meta:diff-start: -
meta:series: independent
meta:release-type: release
meta:pypi: no
meta:first: no
meta:release:Author: Mathieu Bultel <mat.bultel@gmail.com>
meta:release:Commit: mathieu bultel <mat.bultel@gmail.com>
meta:release:Change-Id: I18ab5d7afa350746ba2310a219755f07ef957b06
meta:release:Code-Review+1: Cédric Jeanneret (Tengu) <cjeanner@redhat.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>
meta:release:Code-Review+1: wes hayutin <whayutin@redhat.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/48/742448/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,4d4f7d377e4305a967e84c88d07d0e92f4259cd7,new-release,validations-libs===1.0.2,validations-libs===1.0.1,1,1
openstack%2Fswift~stable%2Ftrain~I3ccd145c14a9b68ff8a9da61f79034549c9bc127,openstack/swift,stable/train,I3ccd145c14a9b68ff8a9da61f79034549c9bc127,Breakup reclaim into batches,MERGED,2020-07-17 22:17:33.000000000,2020-07-22 20:42:44.000000000,2020-07-22 20:40:05.000000000,"[{'_account_id': 1179}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-17 22:17:33.000000000', 'files': ['swift/common/db.py', 'test/unit/common/test_db.py', 'test/unit/container/test_backend.py', 'test/unit/account/test_backend.py', 'swift/container/backend.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/170dddaacc609493d4b3e7ba1f6a9168e7633216', 'message': 'Breakup reclaim into batches\n\nWe want to do the table scan without locking and group the locking\ndeletes into small indexed operations to minimize the impact of\nbackground processes calling reclaim each cycle.\n\nChange-Id: I3ccd145c14a9b68ff8a9da61f79034549c9bc127\nCo-Authored-By: Tim Burke <tim.burke@gmail.com>\nCloses-Bug: #1877651\n(cherry picked from commit aab45880f8aaddfed15fe641939aac0d2eccc465)\n'}]",0,741755,170dddaacc609493d4b3e7ba1f6a9168e7633216,9,3,1,15343,,,0,"Breakup reclaim into batches

We want to do the table scan without locking and group the locking
deletes into small indexed operations to minimize the impact of
background processes calling reclaim each cycle.

Change-Id: I3ccd145c14a9b68ff8a9da61f79034549c9bc127
Co-Authored-By: Tim Burke <tim.burke@gmail.com>
Closes-Bug: #1877651
(cherry picked from commit aab45880f8aaddfed15fe641939aac0d2eccc465)
",git fetch https://review.opendev.org/openstack/swift refs/changes/55/741755/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/common/db.py', 'test/unit/common/test_db.py', 'test/unit/container/test_backend.py', 'test/unit/account/test_backend.py', 'swift/container/backend.py']",5,170dddaacc609493d4b3e7ba1f6a9168e7633216,batched-reclaim-stable/ussuri-stable/train," zero_like, DatabaseAlreadyExists, SQLITE_ARG_LIMIT def _reclaim_other_stuff(self, conn, age_timestamp, sync_timestamp): super(ContainerBroker, self)._reclaim_other_stuff( conn, age_timestamp, sync_timestamp)"," zero_like, DatabaseAlreadyExists SQLITE_ARG_LIMIT = 999 def _reclaim(self, conn, age_timestamp, sync_timestamp): super(ContainerBroker, self)._reclaim(conn, age_timestamp, sync_timestamp)",208,16
openstack%2Ftripleo-ansible~stable%2Ftrain~Ied39aaef9c65c65f33cceb99071c53af7f9aa464,openstack/tripleo-ansible,stable/train,Ied39aaef9c65c65f33cceb99071c53af7f9aa464,Fix tripleo_profile_tasks callback plugin _output(),MERGED,2020-07-22 12:29:11.000000000,2020-07-22 20:40:00.000000000,2020-07-22 20:40:00.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-22 12:29:11.000000000', 'files': ['tripleo_ansible/ansible_plugins/callback/tripleo_profile_tasks.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8abf3ab094c576a11d69d416ccaf8dd0b21a3f79', 'message': 'Fix tripleo_profile_tasks callback plugin _output()\n\nRegression from https://review.opendev.org/#/c/733394/\n\nChange-Id: Ied39aaef9c65c65f33cceb99071c53af7f9aa464\n(cherry picked from commit f0dbd1d0f5eb0122007b3a4ca100764646a68d98)\n'}]",0,742409,8abf3ab094c576a11d69d416ccaf8dd0b21a3f79,7,4,1,14985,,,0,"Fix tripleo_profile_tasks callback plugin _output()

Regression from https://review.opendev.org/#/c/733394/

Change-Id: Ied39aaef9c65c65f33cceb99071c53af7f9aa464
(cherry picked from commit f0dbd1d0f5eb0122007b3a4ca100764646a68d98)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/09/742409/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/ansible_plugins/callback/tripleo_profile_tasks.py'],1,8abf3ab094c576a11d69d416ccaf8dd0b21a3f79,," def _output(self, msg, color=None): self._display.display(output, color=color)"," def _output(self, msg, color): self._output(output, color=color)",2,2
openstack%2Fkayobe~master~I1bb857bfca9e209bc6de30ae9852a4a08b2c7fb0,openstack/kayobe,master,I1bb857bfca9e209bc6de30ae9852a4a08b2c7fb0,Fix network configuration of network hosts,MERGED,2020-06-25 16:52:29.000000000,2020-07-22 20:38:36.000000000,2020-07-22 20:36:22.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 17669}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-06-25 16:52:29.000000000', 'files': ['releasenotes/notes/fix-network-hosts-interfaces-f0206aa91b218a25.yaml', 'etc/kayobe/controllers.yml', 'ansible/group_vars/all/controllers', 'doc/source/control-plane-service-placement.rst', 'doc/source/configuration/network.rst'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/58f26fb61bfda83a6b56095dd8570bfe31ac7cd3', 'message': 'Fix network configuration of network hosts\n\nThe Control Plane Service Placement documentation connects network hosts\nto networks listed in controller_network_host_network_interfaces.\nHowever this only contained public, tunnel, and external networks. For a\nfully functional network host, we also need:\n\n- the overcloud admin network, to manage the host\n- internal network, for services to interact with each other\n- storage network, for manila-share\n\nThis change updates the default network configuration for network hosts\nand adds a variable to define extra networks like for other hosts. It\nalso improves the documentation for adding network hosts.\n\nChange-Id: I1bb857bfca9e209bc6de30ae9852a4a08b2c7fb0\n'}]",0,738065,58f26fb61bfda83a6b56095dd8570bfe31ac7cd3,19,4,1,15197,,,0,"Fix network configuration of network hosts

The Control Plane Service Placement documentation connects network hosts
to networks listed in controller_network_host_network_interfaces.
However this only contained public, tunnel, and external networks. For a
fully functional network host, we also need:

- the overcloud admin network, to manage the host
- internal network, for services to interact with each other
- storage network, for manila-share

This change updates the default network configuration for network hosts
and adds a variable to define extra networks like for other hosts. It
also improves the documentation for adding network hosts.

Change-Id: I1bb857bfca9e209bc6de30ae9852a4a08b2c7fb0
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/65/738065/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix-network-hosts-interfaces-f0206aa91b218a25.yaml', 'etc/kayobe/controllers.yml', 'ansible/group_vars/all/controllers', 'doc/source/control-plane-service-placement.rst', 'doc/source/configuration/network.rst']",5,58f26fb61bfda83a6b56095dd8570bfe31ac7cd3,network-host-interfaces,"Network Hosts ------------- By default, controllers provide Neutron network services and load balancing. If separate network hosts are used (see :ref:`control-plane-service-placement-network-hosts`), they are attached to the following networks: * overcloud admin network * internal network * storage network * public network * external network * tunnel network This list may be extended by setting ``controller_network_host_extra_network_interfaces`` to a list of names of additional networks to attach. Alternatively, the list may be completely overridden by setting ``controller_network_host_network_interfaces``. These variables are found in ``${KAYOBE_CONFIG_PATH}/controllers.yml``. ",,74,3
openstack%2Fcharm-glance~master~Ib3a8fff7c202e2fc002371113e1301abda1e08bb,openstack/charm-glance,master,Ib3a8fff7c202e2fc002371113e1301abda1e08bb,"Fix ceph relation, some drive-by template fixes",MERGED,2020-07-22 19:58:59.000000000,2020-07-22 20:26:16.000000000,2020-07-22 20:26:16.000000000,"[{'_account_id': 20805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 19:58:59.000000000', 'files': ['README.md'], 'web_link': 'https://opendev.org/openstack/charm-glance/commit/c0f003ae0cc811c9e912c7f5694171ff6e338bdf', 'message': 'Fix ceph relation, some drive-by template fixes\n\nChange-Id: Ib3a8fff7c202e2fc002371113e1301abda1e08bb\n'}]",0,742531,c0f003ae0cc811c9e912c7f5694171ff6e338bdf,6,2,1,30561,,,0,"Fix ceph relation, some drive-by template fixes

Change-Id: Ib3a8fff7c202e2fc002371113e1301abda1e08bb
",git fetch https://review.opendev.org/openstack/charm-glance refs/changes/31/742531/1 && git format-patch -1 --stdout FETCH_HEAD,['README.md'],1,c0f003ae0cc811c9e912c7f5694171ff6e338bdf,readme-fixes,"The glance charm provides the Glance image service for OpenStack. It is intended to be used alongside the other OpenStack components.Glance may be deployed in a number of ways. This charm focuses on 3 main configurations. All require the existence of the other core OpenStack services deployed via Juju charms, specifically: mysql, keystone and nova-cloud-controller. The following assumes these services have already been deployed.Glance can also use Swift Object storage for image storage. Swift is oftenscale when compared to using local disk storage. This configuration assumesscalable, resilient storage of images. This configuration assumes that you juju add-relation glance ceph-mon> **Note**: Glance acts as a Ceph client in this case which requires IP (L3) connectivity to Ceph monitors and OSDs. For MAAS-based deployments this can be addressed with network spaces (see section 'Network spaces' below).## Network spaces This charm supports the use of Juju [network spaces][juju-docs-spaces]. This feature optionally allows specific types of the application's network traffic to be bound to subnets that the underlying hardware is connected to. > **Note**: Spaces must be configured in the backing cloud prior to deployment.> **Note**: Existing glance units configured with the `os-admin-network`, `os-internal-network`, or `os-public-network` options will continue to honour them. Furthermore, these options override any space bindings, if set. ## Policy overrides Policy overrides is an advanced feature that allows an operator to override the default policy of an OpenStack service. The policies that the service supports, the defaults it implements in its code, and the defaults that a charm may include should all be clearly understood before proceeding.See appendix [Policy overrides][cdg-appendix-n] in the [OpenStack CharmsFor general charm questions refer to the [OpenStack Charm Guide][cg].[juju-docs-spaces]: https://juju.is/docs/spaces","This charm provides the Glance image service for OpenStack. It is intended to be used alongside the other OpenStack components.Glance may be deployed in a number of ways. This charm focuses on 3 main configurations. All require the existence of the other core OpenStack services deployed via Juju charms, specifically: mysql, keystone and nova-cloud-controller. The following assumes these services have already been deployed.Glance can also use Swift Object storage for image storage. Swift is oftenscale when compared to using local disk storage. This configuration assumesscalable, resilient storage of images. This configuration assumes that you juju add-relation glance cephNOTE: Glance acts as a Ceph client in this case which requires IP (L3) connectivity to ceph monitors and OSDs. For MAAS-based deployments this can be addressed with network spaces (see the relevant section below).## Spaces This charm supports the use of Juju Spaces, allowing the charm to be bound to network space configurations managed directly by Juju. This is only supported with Juju 2.0 and above.NOTE: Spaces must be configured in the underlying provider prior to attempting to use them. NOTE: Existing deployments using os-*-network configuration options will continue to function; these options are preferred over any network space binding provided if set. ## Policy Overrides Policy overrides is an **advanced** feature that allows an operator to override the default policy of an OpenStack service. The policies that the service supports, the defaults it implements in its code, and the defaults that a charm may include should all be clearly understood before proceeding.See appendix [Policy Overrides][cdg-appendix-n] in the [OpenStack CharmsFor general charm questions refer to the OpenStack [Charm Guide][cg].",31,31
openstack%2Fglance~master~Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8,openstack/glance,master,Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8,Add image_set_property_atomic() helper,MERGED,2020-06-24 20:08:50.000000000,2020-07-22 20:18:51.000000000,2020-07-22 20:16:58.000000000,"[{'_account_id': 4393}, {'_account_id': 5202}, {'_account_id': 8122}, {'_account_id': 9008}, {'_account_id': 9303}, {'_account_id': 11816}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-06-24 20:08:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/bf7745b5370493f374098294ae61aadef35842ed', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 2, 'created': '2020-06-24 20:13:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/75d9b3e88de1b1f23c7bca4e0e77bdec27da1247', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 3, 'created': '2020-06-25 13:34:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/7f25c10937ba68773e38d9e02657fb556b29213c', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 4, 'created': '2020-06-25 16:14:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/af69b3a12a4360418c5b00f643d7a3f27d98b9d6', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 5, 'created': '2020-06-26 10:33:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/e2efdea631d3ba7da1c0e70f3c24dc5a50cc002d', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 6, 'created': '2020-06-26 14:11:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/5f99919b844d10bb80d2f84481f5d4c4c938c589', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 7, 'created': '2020-06-26 16:40:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/bdebef8aeb347cc008c9830f2ec4ed784ea5a697', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 8, 'created': '2020-07-02 05:05:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/1a0615a550c3db6ba314b9511c5e02a5815b7f91', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 9, 'created': '2020-07-03 18:02:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/c243786c7e596a054cc411e70bdef94360350a2d', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}, {'number': 10, 'created': '2020-07-17 14:22:17.000000000', 'files': ['glance/tests/unit/test_db.py', 'glance/db/simple/api.py', 'glance/db/__init__.py', 'glance/db/sqlalchemy/api.py', 'glance/tests/unit/test_domain_proxy.py', 'glance/domain/proxy.py', 'glance/tests/functional/db/test_sqlalchemy.py'], 'web_link': 'https://opendev.org/openstack/glance/commit/2a51843138e27071bf84269f6b2a601b3ba9978f', 'message': 'Add image_set_property_atomic() helper\n\nThis adds a new DB API method to atomically create a property on an image\nin a way that we can be sure it is created once and only once for the\npurposes of exclusion of multiple threads.\n\nChange-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8\nRelated-Bug: #1884596\n'}]",22,737868,2a51843138e27071bf84269f6b2a601b3ba9978f,47,8,10,4393,,,0,"Add image_set_property_atomic() helper

This adds a new DB API method to atomically create a property on an image
in a way that we can be sure it is created once and only once for the
purposes of exclusion of multiple threads.

Change-Id: Ifdb711cb241ef13eccaa5ae29a234f2fe4a52eb8
Related-Bug: #1884596
",git fetch https://review.opendev.org/openstack/glance refs/changes/68/737868/9 && git format-patch -1 --stdout FETCH_HEAD,"['glance/db/sqlalchemy/api.py', 'glance/tests/functional/db/test_sqlalchemy.py']",2,bf7745b5370493f374098294ae61aadef35842ed,copy-image_race,"from glance import contextfrom glance.tests import utils as test_utils class TestImageAtomicUpdate(base.TestDriver, base.FunctionalInitWrapper): def setUp(self): db_tests.load(get_db, reset_db) super(TestImageAtomicUpdate, self).setUp() self.addCleanup(db_tests.reset) self.image = self.db_api.image_create( self.adm_context, {'status': 'active', 'owner': self.adm_context.owner, 'properties': {'speed': '88mph'}, }) @staticmethod def _propdict(list_of_props): """"""Convert a list of ImageProperty objects to dict, ignoring deleted values."""""" return {x.name: x.value for x in list_of_props if x.deleted == 0} def test_update(self): """"""Try to double-create a property atomically. This should ensure that a second attempt to create the property atomically fails with Duplicate. """""" # Atomically create the property self.db_api.image_set_property_atomic(self.adm_context, self.image['id'], 'test_property', 'foo') # Trying again should fail self.assertRaises(exception.Duplicate, self.db_api.image_set_property_atomic, self.adm_context, self.image['id'], 'test_property', 'bar') # Ensure that only the first one stuck image = self.db_api.image_get(self.adm_context, self.image['id']) self.assertEqual({'speed': '88mph', 'test_property': 'foo'}, self._propdict(image['properties'])) def test_update_drop_update(self): """"""Try to create, delete, re-create property atomically. If we fail to undelete and claim the property, this will fail as duplicate. """""" # Atomically create the property self.db_api.image_set_property_atomic(self.adm_context, self.image['id'], 'test_property', 'foo') # Ensure that it stuck image = self.db_api.image_get(self.adm_context, self.image['id']) self.assertEqual({'speed': '88mph', 'test_property': 'foo'}, self._propdict(image['properties'])) # Update the image with the property removed, like image_repo.save() new_props = self._propdict(image['properties']) del new_props['test_property'] self.db_api.image_update(self.adm_context, self.image['id'], values={'properties': new_props}, purge_props=True) # Make sure that a fetch shows the property deleted image = self.db_api.image_get(self.adm_context, self.image['id']) self.assertEqual({'speed': '88mph'}, self._propdict(image['properties'])) # Atomically update the property, which still exists, but is # deleted self.db_api.image_set_property_atomic(self.adm_context, self.image['id'], 'test_property', 'bar') # Makes sure we updated the property and undeleted it image = self.db_api.image_get(self.adm_context, self.image['id']) self.assertEqual({'speed': '88mph', 'test_property': 'bar'}, self._propdict(image['properties']))",,146,0
openstack%2Fopenstack-helm-infra~master~Iba1deb6ff4c6e7c3582d90f9175b2d3953bfd4d8,openstack/openstack-helm-infra,master,Iba1deb6ff4c6e7c3582d90f9175b2d3953bfd4d8,Add openstack-helm-infra to required projects for infra jobs,MERGED,2020-07-22 03:25:49.000000000,2020-07-22 20:07:38.000000000,2020-07-22 19:59:56.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-22 03:25:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7a459909fa9161b9378db911333bda48680b66c8', 'message': 'Add openstack-helm-infra to required projects for infra jobs\n\nRequired to run osh-infra jobs from another projects.\n\nChange-Id: Iba1deb6ff4c6e7c3582d90f9175b2d3953bfd4d8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2020-07-22 05:21:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8d48e326e64e47fe197dde94afc9090f5362d079', 'message': 'Add openstack-helm-infra to required projects for infra jobs\n\nRequired to run osh-infra jobs from another projects.\n\nChange-Id: Iba1deb6ff4c6e7c3582d90f9175b2d3953bfd4d8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2020-07-22 17:17:31.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/553af32beb3cbf26c5a934774bce49c2a1a6a182', 'message': 'Add openstack-helm-infra to required projects for infra jobs\n\nRequired to run osh-infra jobs from another projects.\n\nChange-Id: Iba1deb6ff4c6e7c3582d90f9175b2d3953bfd4d8\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,742336,553af32beb3cbf26c5a934774bce49c2a1a6a182,18,6,3,8863,,,0,"Add openstack-helm-infra to required projects for infra jobs

Required to run osh-infra jobs from another projects.

Change-Id: Iba1deb6ff4c6e7c3582d90f9175b2d3953bfd4d8
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/36/742336/2 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,7a459909fa9161b9378db911333bda48680b66c8,, required-projects: - openstack/openstack-helm-infra,,2,0
openstack%2Frequirements~master~I7f19332593a285c52af79c1297de83c62e3d83b7,openstack/requirements,master,I7f19332593a285c52af79c1297de83c62e3d83b7,update constraint for octavia-lib to new release 2.1.1,MERGED,2020-07-22 13:12:12.000000000,2020-07-22 20:07:25.000000000,2020-07-22 20:04:59.000000000,"[{'_account_id': 6469}, {'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 13:12:12.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/43510b35d99badd586cfbef23e980e84181bc389', 'message': 'update constraint for octavia-lib to new release 2.1.1\n\nChange-Id: I7f19332593a285c52af79c1297de83c62e3d83b7\nmeta:version: 2.1.1\nmeta:diff-start: -\nmeta:series: victoria\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Carlos Goncalves <cgoncalves@redhat.com>\nmeta:release:Commit: Carlos Goncalves <cgoncalves@redhat.com>\nmeta:release:Change-Id: Iff1555bf0a79f8150c2f01d91781278f357fc6e7\nmeta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,742422,43510b35d99badd586cfbef23e980e84181bc389,10,4,1,11131,,,0,"update constraint for octavia-lib to new release 2.1.1

Change-Id: I7f19332593a285c52af79c1297de83c62e3d83b7
meta:version: 2.1.1
meta:diff-start: -
meta:series: victoria
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Carlos Goncalves <cgoncalves@redhat.com>
meta:release:Commit: Carlos Goncalves <cgoncalves@redhat.com>
meta:release:Change-Id: Iff1555bf0a79f8150c2f01d91781278f357fc6e7
meta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/22/742422/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,43510b35d99badd586cfbef23e980e84181bc389,new-release,octavia-lib===2.1.1,octavia-lib===2.1.0,1,1
openstack%2Frequirements~master~I7c35157e120e7a7d104aa5ac3131a746381798a6,openstack/requirements,master,I7c35157e120e7a7d104aa5ac3131a746381798a6,update constraint for python-novaclient to new release 17.2.0,MERGED,2020-07-22 13:10:02.000000000,2020-07-22 20:06:07.000000000,2020-07-22 20:04:57.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 13:10:02.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/3e2cfaebc1cc76d777201c45ac31d32a0cfcc774', 'message': 'update constraint for python-novaclient to new release 17.2.0\n\nChange-Id: I7c35157e120e7a7d104aa5ac3131a746381798a6\nmeta:version: 17.2.0\nmeta:diff-start: -\nmeta:series: victoria\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: yes\nmeta:release:Author: Balazs Gibizer <balazs.gibizer@est.tech>\nmeta:release:Commit: Balazs Gibizer <balazs.gibizer@est.tech>\nmeta:release:Change-Id: I8dcd8f16a11c1076f72759de7fe5bd28bdfe1a01\nmeta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,742421,3e2cfaebc1cc76d777201c45ac31d32a0cfcc774,9,3,1,11131,,,0,"update constraint for python-novaclient to new release 17.2.0

Change-Id: I7c35157e120e7a7d104aa5ac3131a746381798a6
meta:version: 17.2.0
meta:diff-start: -
meta:series: victoria
meta:release-type: release
meta:pypi: yes
meta:first: yes
meta:release:Author: Balazs Gibizer <balazs.gibizer@est.tech>
meta:release:Commit: Balazs Gibizer <balazs.gibizer@est.tech>
meta:release:Change-Id: I8dcd8f16a11c1076f72759de7fe5bd28bdfe1a01
meta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/21/742421/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,3e2cfaebc1cc76d777201c45ac31d32a0cfcc774,new-release,python-novaclient===17.2.0,python-novaclient===17.1.0,1,1
openstack%2Fopenstack-helm-infra~master~Ida43d83902d26bef3434c47e71959bb2086ad82a,openstack/openstack-helm-infra,master,Ida43d83902d26bef3434c47e71959bb2086ad82a,[ceph] Add noup flag check to helm tests,MERGED,2020-07-17 18:10:53.000000000,2020-07-22 20:04:15.000000000,2020-07-22 19:59:54.000000000,"[{'_account_id': 8863}, {'_account_id': 17119}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 28372}, {'_account_id': 29974}]","[{'number': 1, 'created': '2020-07-17 18:10:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5c68f4a61526de61fbc80a48ab27d3a82d29a705', 'message': '[ceph-client, ceph-osd] Add noup flag check to helm tests\n\nThe PS allows successfully pass the tests even if noup flag is set.\n\nChange-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a\n'}, {'number': 2, 'created': '2020-07-17 21:28:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/30647e59a354afe9e6d96d326b0169d5d294710a', 'message': '[ceph] Add noup flag check to helm tests\n\nThe PS adds noup flag check to Ceph-client and Ceph-OSD helm tests.\nIt allows successfully pass the tests even if noup flag is set.\n\nChange-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a\n'}, {'number': 3, 'created': '2020-07-17 21:28:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f15ec5fdb9984458172f1d230dd7bf4baef9d78d', 'message': '[ceph] Add noup flag check to helm tests\n\nThe PS adds noup flag check to Ceph-client and Ceph-OSD helm tests.\nIt allows successfully pass the tests even if noup flag is set.\n\nChange-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a\n'}, {'number': 4, 'created': '2020-07-20 19:42:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a2db0dab2d07289c137095784a53aaa47b5541bd', 'message': '[ceph] Add noup flag check to helm tests\n\nThe PS adds noup flag check to Ceph-client and Ceph-OSD helm tests.\nIt allows successfully pass the tests even if noup flag is set.\n\nChange-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a\n'}, {'number': 5, 'created': '2020-07-21 16:05:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9b9069464f7ec5616858a8af08c69727c135ff29', 'message': '[ceph] Add noup flag check to helm tests\n\nThe PS adds noup flag check to Ceph-client and Ceph-OSD helm tests.\nIt allows successfully pass the tests even if noup flag is set.\n\nChange-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a\n'}, {'number': 6, 'created': '2020-07-21 17:50:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/c892c03ba60ea0057bd530df1036790b72176700', 'message': '[ceph] Add noup flag check to helm tests\n\nThe PS adds noup flag check to Ceph-client and Ceph-OSD helm tests.\nIt allows successfully pass the tests even if noup flag is set.\n\nChange-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a\n'}, {'number': 7, 'created': '2020-07-22 15:30:51.000000000', 'files': ['ceph-osd/templates/bin/_helm-tests.sh.tpl', 'ceph-client/templates/bin/_helm-tests.sh.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b736a74e39e2e6e8a9ddcc3962e5b2707a79df3c', 'message': '[ceph] Add noup flag check to helm tests\n\nThe PS adds noup flag check to Ceph-client and Ceph-OSD helm tests.\nIt allows successfully pass the tests even if noup flag is set.\n\nChange-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a\n'}]",2,741697,b736a74e39e2e6e8a9ddcc3962e5b2707a79df3c,27,6,7,17119,,,0,"[ceph] Add noup flag check to helm tests

The PS adds noup flag check to Ceph-client and Ceph-OSD helm tests.
It allows successfully pass the tests even if noup flag is set.

Change-Id: Ida43d83902d26bef3434c47e71959bb2086ad82a
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/97/741697/3 && git format-patch -1 --stdout FETCH_HEAD,"['ceph-osd/templates/bin/_helm-tests.sh.tpl', 'ceph-client/templates/bin/_helm-tests.sh.tpl']",2,5c68f4a61526de61fbc80a48ab27d3a82d29a705,," noup_flag=$(ceph osd stat | awk '/noup/ {print $2}') osd_stat=$(ceph osd stat -f json) num_osd=$(jq '.osdmap.num_osds' <<< ""$osd_stat"") num_in_osds=$(jq '.osdmap.num_in_osds' <<< ""$osd_stat"") num_up_osds=$(jq '.osdmap.num_up_osds' <<< ""$osd_stat"") if [ ""${noup_flag}"" ]; then osd_status=$(ceph osd dump -f json | jq -c '.osds[] | .state') count=0 for osd in $osd_status; do if [[ ""$osd"" == *""up""* || ""$osd"" == *""new""* ]]; then ((count=count+1)) fi done echo ""Caution: noup flag is set. ${count} OSDs in up/new state. Required number of OSDs: ${MIN_OSDS}."" if [ $MIN_OSDS -gt $count ]; then exit 1 fi if [ ""${num_osd}"" -eq 0 ]; then echo ""There are no osds in the cluster"" exit 1 elif [ ""${num_in_osds}"" -ge ""${MIN_OSDS}"" ] && [ ""${num_up_osds}"" -ge ""${MIN_OSDS}"" ]; then echo ""Required number of OSDs (${MIN_OSDS}) are UP and IN status"" else echo ""Required number of OSDs (${MIN_OSDS}) are NOT UP and IN status. Cluster shows OSD count=${num_osd}, UP=${num_up_osds}, IN=${num_in_osds}"" exit 1 fi"," num_osd=$(ceph osd stat | tr ' ' '\n' | grep -x -E '[0-9]+' | head -n1) num_in_osds=$(ceph osd stat | tr ' ' '\n' | grep -x -E '[0-9]+' | tail -n1) num_up_osds=$(ceph osd stat | tr ' ' '\n' | grep -x -E '[0-9]+' | head -n2 | tail -n1) if [ ""${num_osd}"" -eq 0 ]; then echo ""There are no osds in the cluster"" exit 1 elif [ ""${num_in_osds}"" -ge ""${MIN_OSDS}"" ] && [ ""${num_up_osds}"" -ge ""${MIN_OSDS}"" ]; then echo ""Required number of OSDs (${MIN_OSDS}) are UP and IN status"" echo ""Required number of OSDs (${MIN_OSDS}) are NOT UP and IN status. Cluster shows OSD count=${num_osd}, UP=${num_up_osds}, IN=${num_in_osds}"" exit 1",52,20
openstack%2Fironic-python-agent~bugfix%2F6.2~Ic82fc9dc7b658dab52c06b3619a0118acd111bc5,openstack/ironic-python-agent,bugfix/6.2,Ic82fc9dc7b658dab52c06b3619a0118acd111bc5,Update jobs,MERGED,2020-07-13 13:19:47.000000000,2020-07-22 19:57:52.000000000,2020-07-22 19:53:35.000000000,"[{'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-13 13:19:47.000000000', 'files': ['zuul.d/ironic-python-agent-jobs.yaml', 'zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/b1ec335b9a5cce024b279bcbb6c1e89a1b293ccd', 'message': ""Update jobs\n\n- Increase the number of VM's since we are running two tests.\n- Do no run ipa-tempest-wholedisk-* (the partition jobs are covering\nthis since tempest runs wholedisk and partition tests)\n- Remove `partition` from the job names\n\nChange-Id: Ic82fc9dc7b658dab52c06b3619a0118acd111bc5\n(cherry picked from commit 6bde89e4dd8403c98885963cb3f2aa983f852acc)\n""}]",0,740692,b1ec335b9a5cce024b279bcbb6c1e89a1b293ccd,8,3,1,15519,,,0,"Update jobs

- Increase the number of VM's since we are running two tests.
- Do no run ipa-tempest-wholedisk-* (the partition jobs are covering
this since tempest runs wholedisk and partition tests)
- Remove `partition` from the job names

Change-Id: Ic82fc9dc7b658dab52c06b3619a0118acd111bc5
(cherry picked from commit 6bde89e4dd8403c98885963cb3f2aa983f852acc)
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/92/740692/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/ironic-python-agent-jobs.yaml', 'zuul.d/project.yaml']",2,b1ec335b9a5cce024b279bcbb6c1e89a1b293ccd,update_jobs-bugfix/6.2, # NOTE(iurygregory) Only run this two jobs since we are testing # wholedisk + partition on tempest - ipa-tempest-bios-ipmi-direct-tinyipa-src - ipa-tempest-bios-ipmi-iscsi-tinyipa-src - ipa-tempest-bios-ipmi-direct-tinyipa-src - ipa-tempest-bios-ipmi-iscsi-tinyipa-src, - ipa-tempest-partition-bios-ipmi-direct-tinyipa-src - ipa-tempest-partition-bios-ipmi-iscsi-tinyipa-src - ipa-tempest-wholedisk-bios-ipmi-direct-tinyipa-src - ipa-tempest-wholedisk-bios-ipmi-iscsi-tinyipa-src - ipa-tempest-partition-bios-ipmi-direct-tinyipa-src - ipa-tempest-partition-bios-ipmi-iscsi-tinyipa-src - ipa-tempest-wholedisk-bios-ipmi-direct-tinyipa-src - ipa-tempest-wholedisk-bios-ipmi-iscsi-tinyipa-src,16,8
openstack%2Fironic-python-agent~master~I5ad772a18cc4584585c5a7b6fb127547cece1998,openstack/ironic-python-agent,master,I5ad772a18cc4584585c5a7b6fb127547cece1998,Adds poll mode deployment support,MERGED,2019-11-15 07:16:58.000000000,2020-07-22 19:56:29.000000000,2020-07-22 19:53:31.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}, {'_account_id': 24828}, {'_account_id': 27336}]","[{'number': 1, 'created': '2019-11-15 07:16:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/df6f3ac8d92b2f425c081618434f9aa761ec6041', 'message': ""Adds poll mode deployment support\n\nAdds get_hardware_info to the standby extension, which will be used\nfor node validation by ironic deploy drivers.\n\nAdds node_info to the stanby extension, which will used for sending\nlookup data to IPA.\n\nstandalone mode is assumed as debug only, but it's not the case\nconsidering the poll mode will be introduced, slightly update the\ndescription, also prevents the mdns lookup when standalone is true.\n\nStory: 1526486\nTask: 28724\n\nChange-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998\n""}, {'number': 2, 'created': '2020-03-23 07:05:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/05f02307beb1eb88f435f83ca50a553ab650903b', 'message': ""Adds poll mode deployment support\n\nAdds get_hardware_info to the standby extension, which will be used\nfor node validation by ironic deploy drivers.\n\nAdds node_info to the stanby extension, which will be used for sending\nlookup data to IPA.\n\nstandalone mode is assumed as debug only, but it's not the case\nconsidering the poll mode will be introduced, slightly update the\ndescription, also prevents the mdns lookup when standalone is true.\n\nStory: 1526486\nTask: 28724\n\nChange-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998\n""}, {'number': 3, 'created': '2020-03-23 07:10:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/21616dffdd6cbdb1df97b4fcb08db736e1df1f4d', 'message': ""Adds poll mode deployment support\n\nAdds get_hardware_info to the standby extension, which will be used\nfor node validation by ironic deploy drivers.\n\nAdds node_info to the stanby extension, which will be used for sending\nlookup data to IPA.\n\nstandalone mode is assumed as debug only, but it's not the case\nconsidering the poll mode will be introduced, slightly update the\ndescription, also prevents the mdns lookup when standalone is true.\n\nStory: 1526486\nTask: 28724\n\nChange-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998\n""}, {'number': 4, 'created': '2020-05-20 02:20:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/3d7b3dd804da145fc05621c9ea8c7397642569b3', 'message': ""Adds poll mode deployment support\n\nAdds get_hardware_info to the standby extension, which will be used\nfor node validation by ironic deploy drivers.\n\nAdds get_node_info to the stanby extension, which will be used for sending\nlookup data to IPA.\n\nstandalone mode is assumed as debug only, but it's not the case\nconsidering the poll mode will be introduced, slightly update the\ndescription, also prevents the mdns lookup when standalone is true.\n\nStory: 1526486\nTask: 28724\n\nChange-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998\n""}, {'number': 5, 'created': '2020-05-20 05:43:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/b56f02ad3b297723d7a1bbd4816c5b7ef33e689d', 'message': ""Adds poll mode deployment support\n\nAdds a new poll extension to provide get_hardware_info and get_node_info\ninterfaces.\n\nget_hardware_info will be used for node validation by ironic deploy\ndrivers.\n\nget_node_info will be used for sending lookup data to IPA.\n\nstandalone mode is assumed as debug only, but it's not the case\nconsidering the poll mode will be introduced, slightly updates the\ndescription, also prevents the mdns lookup when standalone is true.\n\nStory: 1526486\nTask: 28724\n\nChange-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998\n""}, {'number': 6, 'created': '2020-06-21 08:43:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/e4de89910fff9ad7e86c7e5d3646e4a7fcd86ddc', 'message': ""Adds poll mode deployment support\n\nAdds a new poll extension to provide get_hardware_info and get_node_info\ninterfaces.\n\nget_hardware_info will be used for node validation by ironic deploy\ndrivers.\n\nget_node_info will be used for sending lookup data to IPA.\n\nstandalone mode is assumed as debug only, but it's not the case\nconsidering the poll mode will be introduced, slightly updates the\ndescription, also prevents the mdns lookup when standalone is true.\n\nStory: 1526486\nTask: 28724\n\nChange-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998\n""}, {'number': 7, 'created': '2020-06-21 08:47:55.000000000', 'files': ['ironic_python_agent/tests/unit/extensions/test_poll.py', 'releasenotes/notes/poll-mode-063bd36b2b18bffb.yaml', 'ironic_python_agent/extensions/poll.py', 'ironic_python_agent/config.py', 'ironic_python_agent/agent.py', 'ironic_python_agent/tests/unit/test_agent.py', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/61c95554ff07420f8c57e97b9b4a5af909258012', 'message': ""Adds poll mode deployment support\n\nAdds a new poll extension to provide get_hardware_info and get_node_info\ninterfaces.\n\nget_hardware_info will be used for node validation by ironic deploy\ndrivers.\n\nget_node_info will be used for sending lookup data to IPA.\n\nstandalone mode is assumed as debug only, but it's not the case\nconsidering the poll mode will be introduced, slightly updates the\ndescription, also prevents the mdns lookup when standalone is true.\n\nStory: 1526486\nTask: 28724\n\nChange-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998\n""}]",12,694461,61c95554ff07420f8c57e97b9b4a5af909258012,35,7,7,24828,,,0,"Adds poll mode deployment support

Adds a new poll extension to provide get_hardware_info and get_node_info
interfaces.

get_hardware_info will be used for node validation by ironic deploy
drivers.

get_node_info will be used for sending lookup data to IPA.

standalone mode is assumed as debug only, but it's not the case
considering the poll mode will be introduced, slightly updates the
description, also prevents the mdns lookup when standalone is true.

Story: 1526486
Task: 28724

Change-Id: I5ad772a18cc4584585c5a7b6fb127547cece1998
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/61/694461/6 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/config.py', 'ironic_python_agent/agent.py', 'ironic_python_agent/tests/unit/extensions/test_standby.py', 'ironic_python_agent/extensions/standby.py', 'ironic_python_agent/tests/unit/test_agent.py']",5,df6f3ac8d92b2f425c081618434f9aa761ec6041,passive-mode, self.agent.api_client = mock.Mock(),,77,18
openstack%2Fcharm-ceilometer~master~Ia541e7b8994fae56e04771333009321cd6ac164e,openstack/charm-ceilometer,master,Ia541e7b8994fae56e04771333009321cd6ac164e,Fix python3 message error,MERGED,2020-07-08 21:13:41.000000000,2020-07-22 19:31:22.000000000,2020-07-22 19:31:22.000000000,"[{'_account_id': 2424}, {'_account_id': 10058}, {'_account_id': 14567}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}]","[{'number': 1, 'created': '2020-07-08 21:13:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceilometer/commit/d29b96de0c640e5e026c28b703c7dabfbac1edb8', 'message': ""Fix python3 message error\n\nThis exception handling code was still calling for\n'e.message' which is only present in Python 2 and\nnot supported anymore. Also fixed unit tests where were\nskipping over this.\n\nChange-Id: Ia541e7b8994fae56e04771333009321cd6ac164e\n""}, {'number': 2, 'created': '2020-07-08 21:24:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceilometer/commit/b369c267bbe0415b403d997438255e9cab17c239', 'message': ""Fix python3 message error\n\nThis exception handling code was still calling for\n'e.message' which is only present in Python 2 and\nnot supported anymore. Also fixed unit tests where were\nskipping over this.\n\nCloses-bug: #1886874\nChange-Id: Ia541e7b8994fae56e04771333009321cd6ac164e\n""}, {'number': 3, 'created': '2020-07-10 08:55:20.000000000', 'files': ['lib/ceilometer_utils.py', 'unit_tests/test_ceilometer_utils.py'], 'web_link': 'https://opendev.org/openstack/charm-ceilometer/commit/de2056f4bf78fe7e4c44b2d0196a902c04e1d830', 'message': ""Fix python3 message error\n\nThis exception handling code was still calling for\n'e.message' which is only present in Python 2 and\nnot supported anymore. Also fixed unit tests where were\nskipping over this.\n\nCloses-bug: #1886874\nChange-Id: Ia541e7b8994fae56e04771333009321cd6ac164e\n""}]",0,740118,de2056f4bf78fe7e4c44b2d0196a902c04e1d830,14,6,3,10058,,,0,"Fix python3 message error

This exception handling code was still calling for
'e.message' which is only present in Python 2 and
not supported anymore. Also fixed unit tests where were
skipping over this.

Closes-bug: #1886874
Change-Id: Ia541e7b8994fae56e04771333009321cd6ac164e
",git fetch https://review.opendev.org/openstack/charm-ceilometer refs/changes/18/740118/1 && git format-patch -1 --stdout FETCH_HEAD,"['lib/ceilometer_utils.py', 'unit_tests/test_ceilometer_utils.py']",2,d29b96de0c640e5e026c28b703c7dabfbac1edb8,fix-python3-compatibility," 'identity-service', 'mongodb' ] self.assertRaises(utils.FailedAction, utils.ceilometer_upgrade_helper, self.CONFIGS) mock_ceilometer_upgrade.reset_mock() self.CONFIGS.complete_contexts.return_value = ['mongodb'] self.assertRaises(utils.FailedAction, utils.ceilometer_upgrade_helper, self.CONFIGS) mock_ceilometer_upgrade.reset_mock() import subprocess self.CONFIGS.complete_contexts.return_value = [ mock_ceilometer_upgrade.side_effect = subprocess.CalledProcessError( 1, 'bash_cmd') self.assertRaises(utils.FailedAction, utils.ceilometer_upgrade_helper, self.CONFIGS)"," # workaround Py3 constraint that raise only accepts an actual # exception, so we have to patch CalledProcessError back onto the # mocked out subprocess module import subprocess exc = subprocess.CalledProcessError mock_ceilometer_upgrade.side_effect = utils.FailedAction(""message"") with patch.object(utils, 'subprocess') as subp, \ self.assertRaises(utils.FailedAction): subp.CalledProcessError = exc utils.ceilometer_upgrade_helper(self.CONFIGS) mock_ceilometer_upgrade.assert_called_once_with(action=True)",21,12
openstack%2Fcharm-percona-cluster~master~I4e3cafb654e94906ab1c9217acdf156ca11455f6,openstack/charm-percona-cluster,master,I4e3cafb654e94906ab1c9217acdf156ca11455f6,Sync charm-helpers for Victoria/Groovy updates,ABANDONED,2020-07-13 19:00:56.000000000,2020-07-22 19:27:12.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-13 19:00:56.000000000', 'files': ['charmhelpers/contrib/openstack/utils.py', 'charmhelpers/core/hookenv.py', 'charmhelpers/fetch/ubuntu.py'], 'web_link': 'https://opendev.org/openstack/charm-percona-cluster/commit/4fe75d037e021629b920ef76dfe19eab3f511a90', 'message': 'Sync charm-helpers for Victoria/Groovy updates\n\nThis sync picks up the release and version details for Victoria/Groovy.\n\nChange-Id: I4e3cafb654e94906ab1c9217acdf156ca11455f6\n'}]",0,740773,4fe75d037e021629b920ef76dfe19eab3f511a90,8,5,1,11805,,,0,"Sync charm-helpers for Victoria/Groovy updates

This sync picks up the release and version details for Victoria/Groovy.

Change-Id: I4e3cafb654e94906ab1c9217acdf156ca11455f6
",git fetch https://review.opendev.org/openstack/charm-percona-cluster refs/changes/73/740773/1 && git format-patch -1 --stdout FETCH_HEAD,"['charmhelpers/contrib/openstack/utils.py', 'charmhelpers/core/hookenv.py', 'charmhelpers/fetch/ubuntu.py']",3,4fe75d037e021629b920ef76dfe19eab3f511a90,batch-update," # Victoria 'victoria': 'focal-updates/victoria', 'focal-victoria': 'focal-updates/victoria', 'focal-victoria/updates': 'focal-updates/victoria', 'focal-updates/victoria': 'focal-updates/victoria', 'victoria/proposed': 'focal-proposed/victoria', 'focal-victoria/proposed': 'focal-proposed/victoria', 'focal-proposed/victoria': 'focal-proposed/victoria',",,26,2
openstack%2Fovsdbapp~master~I0250c7bd51c63fea534c3b6b55bb5bb053637b19,openstack/ovsdbapp,master,I0250c7bd51c63fea534c3b6b55bb5bb053637b19,Add MAC_Binding index lookup,MERGED,2020-05-27 02:44:01.000000000,2020-07-22 19:26:46.000000000,2020-07-22 19:25:34.000000000,"[{'_account_id': 5756}, {'_account_id': 8655}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-27 02:44:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/71ea4064b4cfaa68cce39d7f6b870bb1f17fb5ec', 'message': 'Add MAC_Binding index lookup\n\nChange-Id: I0250c7bd51c63fea534c3b6b55bb5bb053637b19\n'}, {'number': 2, 'created': '2020-05-28 15:21:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/770729098ff4b596e774e3ec8eb1da3905882553', 'message': 'Add MAC_Binding index lookup\n\nChange-Id: I0250c7bd51c63fea534c3b6b55bb5bb053637b19\n'}, {'number': 3, 'created': '2020-07-15 13:46:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/3841134da86af57f45580c87f4c0c78060bc6400', 'message': 'Add MAC_Binding index lookup\n\nChange-Id: I0250c7bd51c63fea534c3b6b55bb5bb053637b19\n'}, {'number': 4, 'created': '2020-07-22 16:04:48.000000000', 'files': ['ovsdbapp/schema/ovn_southbound/impl_idl.py'], 'web_link': 'https://opendev.org/openstack/ovsdbapp/commit/469095b4472fef6d3e2e1f1ef4e86314b90548b0', 'message': 'Add MAC_Binding index lookup\n\nThis is required because MAC_Binding does not have a ""simple"" one-column\nindex in the OVSDB schema, so it will not have an autocreated index.\nNeutron code does a db_find of the MAC_Binding entry by the ""ip"" column,\nso adding this entry allows us to do an indexed lookup.\n\nChange-Id: I0250c7bd51c63fea534c3b6b55bb5bb053637b19\n'}]",1,731020,469095b4472fef6d3e2e1f1ef4e86314b90548b0,16,4,4,5756,,,0,"Add MAC_Binding index lookup

This is required because MAC_Binding does not have a ""simple"" one-column
index in the OVSDB schema, so it will not have an autocreated index.
Neutron code does a db_find of the MAC_Binding entry by the ""ip"" column,
so adding this entry allows us to do an indexed lookup.

Change-Id: I0250c7bd51c63fea534c3b6b55bb5bb053637b19
",git fetch https://review.opendev.org/openstack/ovsdbapp refs/changes/20/731020/4 && git format-patch -1 --stdout FETCH_HEAD,['ovsdbapp/schema/ovn_southbound/impl_idl.py'],1,71ea4064b4cfaa68cce39d7f6b870bb1f17fb5ec,," 'MAC_Binding': idlutils.RowLookup('MAC_Binding', 'ip', None),",,1,0
openstack%2Fopenstack-helm~master~Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce,openstack/openstack-helm,master,Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce,[CEPH] Update dev scripts for ceph to handle loopback devices,MERGED,2020-07-16 21:26:18.000000000,2020-07-22 19:22:07.000000000,2020-07-22 19:20:07.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 17119}, {'_account_id': 18511}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 23928}, {'_account_id': 28372}, {'_account_id': 29974}, {'_account_id': 30777}, {'_account_id': 32190}]","[{'number': 1, 'created': '2020-07-16 21:26:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/2cc741a41567ca023b99164ba2c53c7e65173d3a', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 2, 'created': '2020-07-16 21:29:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/14a5d14aa4367dc5dddb8fdd499e94d644875477', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 3, 'created': '2020-07-17 15:25:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/703bbef584badd7c0e3f9271bc6d0620f1a5c387', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 4, 'created': '2020-07-17 15:38:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/479ce42d8a11e8b3fc407482617bf3978d868784', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 5, 'created': '2020-07-17 18:30:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d28ac9d11d019a52bfb01bcc5c570b01968d2e08', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 6, 'created': '2020-07-17 20:28:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/fb11e29871e3fd53e80f31bd1e4736af35f09ff3', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 7, 'created': '2020-07-21 16:46:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/298f225ab85138c09bb8561852d0b8e8d1520fff', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 8, 'created': '2020-07-21 18:00:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d01d6b0274d4949e90b33e79ad0545b3e623e762', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}, {'number': 9, 'created': '2020-07-21 21:46:22.000000000', 'files': ['doc/source/install/developer/deploy-with-ceph.rst', 'tools/deployment/common/setup-ceph-loopback-device.sh', 'doc/source/install/multinode.rst', 'tools/deployment/component/ceph/ceph.sh', 'tools/deployment/developer/ceph/040-ceph.sh'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/385c0775b9c92a523091fe8d7503ccc95934c0ce', 'message': '[CEPH] Update dev scripts for ceph to handle loopback devices\n\nThis is to update loopback devices creation script to take device names\nfrom developers in case if default devices are busy.\n\nChange-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce\n'}]",13,741549,385c0775b9c92a523091fe8d7503ccc95934c0ce,40,11,9,28372,,,0,"[CEPH] Update dev scripts for ceph to handle loopback devices

This is to update loopback devices creation script to take device names
from developers in case if default devices are busy.

Change-Id: Ie368ebdfdc64ea00ccf62cf61010beddcc2cf4ce
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/49/741549/2 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/install/developer/deploy-with-ceph.rst', 'doc/source/install/multinode.rst', 'tools/deployment/common/setup-ceph-loopback-device.sh', 'tools/deployment/developer/ceph/040-ceph.sh']",4,2cc741a41567ca023b99164ba2c53c7e65173d3a,,"export CEPH_OSD_DATA_DEVICE=""$1"" export CEPH_OSD_DB_WAL_DEVICE=""$2""./tools/deployment/common/setup-ceph-loopback-device.sh --ceph-osd-data ${CEPH_OSD_DATA_DEVICE} --ceph-osd-dbwal ${CEPH_OSD_DB_WAL_DEVICE}",sudo df -lh sudo lsblk sudo mkdir -p /var/lib/openstack-helm/ceph sudo truncate -s 10G /var/lib/openstack-helm/ceph/ceph-osd-data-loopbackfile.img sudo truncate -s 8G /var/lib/openstack-helm/ceph/ceph-osd-db-wal-loopbackfile.img sudo losetup /dev/loop0 /var/lib/openstack-helm/ceph/ceph-osd-data-loopbackfile.img sudo losetup /dev/loop1 /var/lib/openstack-helm/ceph/ceph-osd-db-wal-loopbackfile.img # lets check the devices sudo df -lh sudo lsblk,39,23
openstack%2Fneutron~master~I0a708ae63d6a2c8933324157a4bbbd229fc43073,openstack/neutron,master,I0a708ae63d6a2c8933324157a4bbbd229fc43073,Fix neutron-ovn-tempest-ovs-master-fedora job,MERGED,2020-07-17 09:37:17.000000000,2020-07-22 19:21:06.000000000,2020-07-22 16:09:43.000000000,"[{'_account_id': 1131}, {'_account_id': 6773}, {'_account_id': 11952}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23804}, {'_account_id': 24791}]","[{'number': 1, 'created': '2020-07-17 09:37:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/06a12bd9380078f55b000602843119d93dcf47fb', 'message': 'Fix neutron-ovn-tempest-ovs-master-fedora job\n\nThe job should use OVN_BRANCH = master and OVS_BRANCH = master,\nbecause based on its definition, it should use master code.\n\nChange-Id: I0a708ae63d6a2c8933324157a4bbbd229fc43073\nRelated-Bug: #1877377\n'}, {'number': 2, 'created': '2020-07-22 07:15:45.000000000', 'files': ['zuul.d/tempest-singlenode.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/294720fcd28485326e62eb38de5d6ba9683120a2', 'message': 'Fix neutron-ovn-tempest-ovs-master-fedora job\n\nThe job should use OVN_BRANCH = master and OVS_BRANCH = master,\nbecause based on its definition, it should use master code.\n\nChange-Id: I0a708ae63d6a2c8933324157a4bbbd229fc43073\nRelated-Bug: #1877377\n'}]",1,741606,294720fcd28485326e62eb38de5d6ba9683120a2,22,7,2,24791,,,0,"Fix neutron-ovn-tempest-ovs-master-fedora job

The job should use OVN_BRANCH = master and OVS_BRANCH = master,
because based on its definition, it should use master code.

Change-Id: I0a708ae63d6a2c8933324157a4bbbd229fc43073
Related-Bug: #1877377
",git fetch https://review.opendev.org/openstack/neutron refs/changes/06/741606/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/tempest-singlenode.yaml'],1,06a12bd9380078f55b000602843119d93dcf47fb,, vars: devstack_localrc: OVN_BRANCH: master OVS_BRANCH: master,,4,0
openstack%2Ftripleo-common~stable%2Ftrain~Ia29944a07900ff36d5d4a5826cdd076d11864962,openstack/tripleo-common,stable/train,Ia29944a07900ff36d5d4a5826cdd076d11864962,Retry fetching {{ deployment_uuid }}.notify.json file,MERGED,2020-07-21 13:11:41.000000000,2020-07-22 19:16:42.000000000,2020-07-22 19:14:48.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 13:11:41.000000000', 'files': ['tripleo_common/templates/deployments.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/258a4af14698b09be588d5eba0f9449fce994dde', 'message': ""Retry fetching {{ deployment_uuid }}.notify.json file\n\nDuring a deployment, there is a small chance that right after\n55-heat-config run, the {{ deployment_uuid }}.notify.json file doesn't\nexist yet on the filesystem.\n\nThis patch will retry to fetch the file during 20s and return an error\nmessage if it can't be found.\n\nChange-Id: Ia29944a07900ff36d5d4a5826cdd076d11864962\nCloses-Bug: #1887846\n(cherry picked from commit e6634751e5bb127e4513bb7fc6ce51ca4770a7e9)\n""}]",0,742185,258a4af14698b09be588d5eba0f9449fce994dde,8,3,1,3153,,,0,"Retry fetching {{ deployment_uuid }}.notify.json file

During a deployment, there is a small chance that right after
55-heat-config run, the {{ deployment_uuid }}.notify.json file doesn't
exist yet on the filesystem.

This patch will retry to fetch the file during 20s and return an error
message if it can't be found.

Change-Id: Ia29944a07900ff36d5d4a5826cdd076d11864962
Closes-Bug: #1887846
(cherry picked from commit e6634751e5bb127e4513bb7fc6ce51ca4770a7e9)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/85/742185/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/templates/deployments.yaml'],1,258a4af14698b09be588d5eba0f9449fce994dde,heat-config-stable/train, timeout 20 bash -c -- 'while [ ! -f /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json ]; do sleep 1; done' timeout 20 bash -c -- 'while [ ! -f /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json ]; do sleep 1; done',,2,0
openstack%2Ftripleo-common~stable%2Fussuri~Ia29944a07900ff36d5d4a5826cdd076d11864962,openstack/tripleo-common,stable/ussuri,Ia29944a07900ff36d5d4a5826cdd076d11864962,Retry fetching {{ deployment_uuid }}.notify.json file,MERGED,2020-07-21 13:11:33.000000000,2020-07-22 19:16:32.000000000,2020-07-22 19:14:47.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 13:11:33.000000000', 'files': ['tripleo_common/templates/deployments.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/20f32171e4da9d029f40b54e7a0c61074fcda1ba', 'message': ""Retry fetching {{ deployment_uuid }}.notify.json file\n\nDuring a deployment, there is a small chance that right after\n55-heat-config run, the {{ deployment_uuid }}.notify.json file doesn't\nexist yet on the filesystem.\n\nThis patch will retry to fetch the file during 20s and return an error\nmessage if it can't be found.\n\nChange-Id: Ia29944a07900ff36d5d4a5826cdd076d11864962\nCloses-Bug: #1887846\n(cherry picked from commit e6634751e5bb127e4513bb7fc6ce51ca4770a7e9)\n""}]",0,742184,20f32171e4da9d029f40b54e7a0c61074fcda1ba,8,3,1,3153,,,0,"Retry fetching {{ deployment_uuid }}.notify.json file

During a deployment, there is a small chance that right after
55-heat-config run, the {{ deployment_uuid }}.notify.json file doesn't
exist yet on the filesystem.

This patch will retry to fetch the file during 20s and return an error
message if it can't be found.

Change-Id: Ia29944a07900ff36d5d4a5826cdd076d11864962
Closes-Bug: #1887846
(cherry picked from commit e6634751e5bb127e4513bb7fc6ce51ca4770a7e9)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/84/742184/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/templates/deployments.yaml'],1,20f32171e4da9d029f40b54e7a0c61074fcda1ba,heat-config-stable/ussuri, timeout 20 bash -c -- 'while [ ! -f /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json ]; do sleep 1; done' timeout 20 bash -c -- 'while [ ! -f /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json ]; do sleep 1; done',,2,0
openstack%2Fpython-tripleoclient~stable%2Fussuri~I8a67554f268042d2cceebf3ec3b1f098f001bbfd,openstack/python-tripleoclient,stable/ussuri,I8a67554f268042d2cceebf3ec3b1f098f001bbfd,Ensure --limit option takes precedence over skiplist,MERGED,2020-07-21 13:11:59.000000000,2020-07-22 19:16:32.000000000,2020-07-22 19:14:45.000000000,"[{'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 13:11:59.000000000', 'files': ['tripleoclient/workflows/deployment.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/6c11a176b3a43b4a0a32e8e0c5f3c7f6f017eaf7', 'message': ""Ensure --limit option takes precedence over skiplist\n\nNow that we've decided to ignore skiplist when limit\nis specified, ensure we do that in master/ussuri.\n\nChange-Id: I8a67554f268042d2cceebf3ec3b1f098f001bbfd\nRelated-Bug: #1857298\n(cherry picked from commit a39424c19e757a622e87f71731c34dfd6434983a)\n""}]",0,742186,6c11a176b3a43b4a0a32e8e0c5f3c7f6f017eaf7,9,2,1,3153,,,0,"Ensure --limit option takes precedence over skiplist

Now that we've decided to ignore skiplist when limit
is specified, ensure we do that in master/ussuri.

Change-Id: I8a67554f268042d2cceebf3ec3b1f098f001bbfd
Related-Bug: #1857298
(cherry picked from commit a39424c19e757a622e87f71731c34dfd6434983a)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/86/742186/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/workflows/deployment.py'],1,6c11a176b3a43b4a0a32e8e0c5f3c7f6f017eaf7,," if not limit_hosts: blacklist_show = stack.output_show('BlacklistedHostnames') blacklist_stack_output = blacklist_show.get('output', dict()) blacklist_stack_output_value = blacklist_stack_output.get( 'output_value') if blacklist_stack_output_value: limit_hosts = ( ':'.join(['!{}'.format(i) for i in blacklist_stack_output_value if i]))"," blacklist_show = stack.output_show('BlacklistedHostnames') blacklist_stack_output = blacklist_show.get('output', dict()) blacklist_stack_output_value = blacklist_stack_output.get('output_value') if blacklist_stack_output_value: if not limit_hosts: limit_hosts = """" limit_hosts += ( ':'.join(['!{}'.format(i) for i in blacklist_stack_output_value if i]))",9,11
openstack%2Ftripleo-quickstart-extras~master~I9991f6c0ea51a3bf537bdcafd4220a5a025cc026,openstack/tripleo-quickstart-extras,master,I9991f6c0ea51a3bf537bdcafd4220a5a025cc026,Centralize tempest execution,MERGED,2020-07-20 09:50:25.000000000,2020-07-22 19:14:44.000000000,2020-07-22 19:14:43.000000000,"[{'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-20 09:50:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/17c2c25d1bf71cf3cbee7d074028718ce22977c5', 'message': ""Centralize tempest execution\n\nToday we have two roles that run tempest, the first one that is\ndeprecated, validate-tempest, and the new one os_tempest.\nThe problem right now is that, in order to deprecate validate-tempest,\nwe need to ensure a smooth transition, and centralize everything in one\nsingle playbook, is the best way to do it.\nFurthermore, move old jobs running on centos 7 require some workarounds\nto create the clouds.yaml file, that today would be harder.\nThis patch consolidate both os_tempest and validate-tempest in one\nsingle playbook, and so, in the future, it's easier to just remove the\ncalls from validate-tempest in one single place rather than keep\nsearching for all the places we use it.\n\nChange-Id: I9991f6c0ea51a3bf537bdcafd4220a5a025cc026\n""}, {'number': 2, 'created': '2020-07-20 18:40:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/230d62b7f412dc65a2c64ccd0439b78ddd3efec9', 'message': ""Centralize tempest execution\n\nToday we have two roles that run tempest, the first one that is\ndeprecated, validate-tempest, and the new one os_tempest.\nThe problem right now is that, in order to deprecate validate-tempest,\nwe need to ensure a smooth transition, and centralize everything in one\nsingle playbook, is the best way to do it.\nFurthermore, move old jobs running on centos 7 require some workarounds\nto create the clouds.yaml file, that today would be harder.\nThis patch consolidate both os_tempest and validate-tempest in one\nsingle playbook, and so, in the future, it's easier to just remove the\ncalls from validate-tempest in one single place rather than keep\nsearching for all the places we use it.\n\nChange-Id: I9991f6c0ea51a3bf537bdcafd4220a5a025cc026\n""}, {'number': 3, 'created': '2020-07-21 18:34:24.000000000', 'files': ['playbooks/multinode-validate.yml', 'playbooks/quickstart-extras-validate.yml', 'playbooks/multinode-standalone.yml', 'playbooks/multinode-standalone-upgrade.yml', 'playbooks/tempest.yml', 'playbooks/baremetal-full-overcloud-validate.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/8c570777f34bf05a17018eca14a167de1fe7dd0c', 'message': ""Centralize tempest execution\n\nToday we have two roles that run tempest, the first one that is\ndeprecated, validate-tempest, and the new one os_tempest.\nThe problem right now is that, in order to deprecate validate-tempest,\nwe need to ensure a smooth transition, and centralize everything in one\nsingle playbook, is the best way to do it.\nFurthermore, move old jobs running on centos 7 require some workarounds\nto create the clouds.yaml file, that today would be harder.\nThis patch consolidate both os_tempest and validate-tempest in one\nsingle playbook, and so, in the future, it's easier to just remove the\ncalls from validate-tempest in one single place rather than keep\nsearching for all the places we use it.\n\nChange-Id: I9991f6c0ea51a3bf537bdcafd4220a5a025cc026\n""}]",0,741905,8c570777f34bf05a17018eca14a167de1fe7dd0c,33,7,3,8367,,,0,"Centralize tempest execution

Today we have two roles that run tempest, the first one that is
deprecated, validate-tempest, and the new one os_tempest.
The problem right now is that, in order to deprecate validate-tempest,
we need to ensure a smooth transition, and centralize everything in one
single playbook, is the best way to do it.
Furthermore, move old jobs running on centos 7 require some workarounds
to create the clouds.yaml file, that today would be harder.
This patch consolidate both os_tempest and validate-tempest in one
single playbook, and so, in the future, it's easier to just remove the
calls from validate-tempest in one single place rather than keep
searching for all the places we use it.

Change-Id: I9991f6c0ea51a3bf537bdcafd4220a5a025cc026
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/05/741905/2 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/multinode-validate.yml', 'playbooks/quickstart-extras-validate.yml', 'playbooks/multinode-standalone.yml', 'playbooks/multinode-standalone-upgrade.yml', 'playbooks/tempest.yml', 'playbooks/baremetal-full-overcloud-validate.yml']",6,17c2c25d1bf71cf3cbee7d074028718ce22977c5,validate-tempest,# Execute tempest against the overcloud deployment,"# Execute tempest using validate-tempest against the overcloud deployment - name: Execute tempest against the overcloud hosts: undercloud tags: - overcloud-validate gather_facts: false roles: - {role: validate-tempest, when: run_tempest|bool} # Execute tempest using os_tempest against the overcloud deployment when: - not run_tempest|bool - use_os_tempest is defined - use_os_tempest|bool",115,130
openstack%2Fironic~stable%2Ftrain~I06136f3f445b6ee4858697e22e8d63ca3d81c137,openstack/ironic,stable/train,I06136f3f445b6ee4858697e22e8d63ca3d81c137,Pin the python-ibmcclient upper bounds due to six usage,MERGED,2020-05-15 09:05:47.000000000,2020-07-22 19:01:37.000000000,2020-05-15 11:50:20.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 19339}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-15 09:05:47.000000000', 'files': ['driver-requirements.txt'], 'web_link': 'https://opendev.org/openstack/ironic/commit/3904d0202fa70942da5b85aa68477851ca234b75', 'message': 'Pin the python-ibmcclient upper bounds due to six usage\n\nPython-ibmcclient 0.2.0 uses six, which is not installed by default\nas it is not necessary for python3 only usage.\n\nThis patch pins the upper bounds until the library can be fixed and\na new version released.\n\nChange-Id: I06136f3f445b6ee4858697e22e8d63ca3d81c137\n(cherry picked from commit f6b9f343581eb430cb339dde09bf97915e2e3a7b)\n'}]",0,728389,3904d0202fa70942da5b85aa68477851ca234b75,9,4,1,23851,,,0,"Pin the python-ibmcclient upper bounds due to six usage

Python-ibmcclient 0.2.0 uses six, which is not installed by default
as it is not necessary for python3 only usage.

This patch pins the upper bounds until the library can be fixed and
a new version released.

Change-Id: I06136f3f445b6ee4858697e22e8d63ca3d81c137
(cherry picked from commit f6b9f343581eb430cb339dde09bf97915e2e3a7b)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/89/728389/1 && git format-patch -1 --stdout FETCH_HEAD,['driver-requirements.txt'],1,3904d0202fa70942da5b85aa68477851ca234b75,,"python-ibmcclient>=0.1.0,<0.2.0 ",python-ibmcclient>=0.1.0,2,1
openstack%2Fopenstack-helm-infra~master~I4cb40d8bac0533d516d2105f9589636c81fa4111,openstack/openstack-helm-infra,master,I4cb40d8bac0533d516d2105f9589636c81fa4111,Updated the Node Problem Detector chart,MERGED,2020-07-15 15:18:47.000000000,2020-07-22 18:59:59.000000000,2020-07-22 18:56:42.000000000,"[{'_account_id': 8863}, {'_account_id': 18295}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 30582}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-15 15:18:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/c1f83048e1a1b01ede897b9b1db59cababbbbd2d', 'message': '[WIP] Update the NPD image to v0.8.2\n\nChange-Id: I4cb40d8bac0533d516d2105f9589636c81fa4111\n'}, {'number': 2, 'created': '2020-07-15 16:27:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e35792476dc530e1b26653d18c32ee99810ec54c', 'message': '[WIP] Update the NPD image to v0.8.2\n\nChange-Id: I4cb40d8bac0533d516d2105f9589636c81fa4111\n'}, {'number': 3, 'created': '2020-07-15 17:17:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7f1c24e98ce0429ae5e5b8cc4143f23d3e7f5cbe', 'message': '[WIP] Update the NPD image to v0.8.2\n\nChange-Id: I4cb40d8bac0533d516d2105f9589636c81fa4111\n'}, {'number': 4, 'created': '2020-07-16 21:01:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/bf358bd0b457eeae4db6058f3a994ea3b7370f4b', 'message': 'Updated the Node Problem Detector chart\n\nThe image for the npd is updated to use from the openstackhelm images\nrepo rather than the k8 image . The k8 image had some security\nvulnerabities.\nThe version for the image is updated to latest ie v0.8.2.\n\nChange-Id: I4cb40d8bac0533d516d2105f9589636c81fa4111\n'}, {'number': 5, 'created': '2020-07-20 13:56:59.000000000', 'files': ['kubernetes-node-problem-detector/values.yaml', 'kubernetes-node-problem-detector/templates/bin/_node-problem-detector.sh.tpl', 'kubernetes-node-problem-detector/values_overrides/apparmor.yaml', 'tools/deployment/apparmor/115-node-problem-detector.sh'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/efac80f2d2fe18322d9de440976cc66966d04f36', 'message': 'Updated the Node Problem Detector chart\n\nThe image for the npd is updated to use from the openstackhelm images\nrepo rather than the k8 image . The k8 image had some security\nvulnerabities.\nThe version for the image is updated to latest ie v0.8.2.\n\nAdded the apparmor file.\n\nChange-Id: I4cb40d8bac0533d516d2105f9589636c81fa4111\n'}]",3,741240,efac80f2d2fe18322d9de440976cc66966d04f36,25,7,5,30582,,,0,"Updated the Node Problem Detector chart

The image for the npd is updated to use from the openstackhelm images
repo rather than the k8 image . The k8 image had some security
vulnerabities.
The version for the image is updated to latest ie v0.8.2.

Added the apparmor file.

Change-Id: I4cb40d8bac0533d516d2105f9589636c81fa4111
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/40/741240/2 && git format-patch -1 --stdout FETCH_HEAD,"['kubernetes-node-problem-detector/values.yaml', 'kubernetes-node-problem-detector/templates/bin/_node-problem-detector.sh.tpl', 'kubernetes-node-problem-detector/templates/daemonset.yaml']",3,c1f83048e1a1b01ede897b9b1db59cababbbbd2d,npd-image-update," - ""tail -f /dev/null""", - /tmp/node-problem-detector.sh,3,3
openstack%2Fopenstack-ansible-os_congress~master~If262d5997474d58ce6754334c6d8b214af20718e,openstack/openstack-ansible-os_congress,master,If262d5997474d58ce6754334c6d8b214af20718e,Add centos-8 support,ABANDONED,2020-07-07 04:23:52.000000000,2020-07-22 18:57:38.000000000,,"[{'_account_id': 22348}, {'_account_id': 28752}]","[{'number': 1, 'created': '2020-07-07 04:23:52.000000000', 'files': ['vars/redhat.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_congress/commit/f9191788f6826cc37e2bdd419eea87aff0dd8134', 'message': 'Add centos-8 support\n\nRenaming redhat-7.yml to redhat.yml for centos-8 support.\n\nChange-Id: If262d5997474d58ce6754334c6d8b214af20718e\n'}]",0,739653,f9191788f6826cc37e2bdd419eea87aff0dd8134,6,2,1,28752,,,0,"Add centos-8 support

Renaming redhat-7.yml to redhat.yml for centos-8 support.

Change-Id: If262d5997474d58ce6754334c6d8b214af20718e
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_congress refs/changes/53/739653/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat.yml'],1,f9191788f6826cc37e2bdd419eea87aff0dd8134,osa/el8,,,0,0
openstack%2Fopenstack-ansible~master~Ibda7232e73ceca02c32e6b97c372e6d4498f8c28,openstack/openstack-ansible,master,Ibda7232e73ceca02c32e6b97c372e6d4498f8c28,Add congress to required projects,ABANDONED,2020-07-22 18:36:17.000000000,2020-07-22 18:54:47.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-22 18:36:17.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/7650fc2de0af85329dcf454720b7d03bd6998f88', 'message': 'Add congress to required projects\n\nChange-Id: Ibda7232e73ceca02c32e6b97c372e6d4498f8c28\n'}]",1,742508,7650fc2de0af85329dcf454720b7d03bd6998f88,3,1,1,28619,,,0,"Add congress to required projects

Change-Id: Ibda7232e73ceca02c32e6b97c372e6d4498f8c28
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/08/742508/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,7650fc2de0af85329dcf454720b7d03bd6998f88,, - name: openstack/congress,,1,0
openstack%2Fpython-openstackclient~stable%2Frocky~I9e96d2978912c8dfeadae4a782c481a17cd7e348,openstack/python-openstackclient,stable/rocky,I9e96d2978912c8dfeadae4a782c481a17cd7e348,Stop silently ignoring invalid 'server create --hint' options,MERGED,2020-02-19 13:34:26.000000000,2020-07-22 18:53:24.000000000,2020-07-22 18:53:24.000000000,"[{'_account_id': 2}, {'_account_id': 1736}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-02-19 13:34:26.000000000', 'files': ['openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/4c7a4587ca556897fc19a7684a6ee99484532161', 'message': 'Stop silently ignoring invalid \'server create --hint\' options\n\nThe \'--hint\' option for \'server create\' expects a key-value pair like so:\n\n  openstack server create --hint group=245e1dfe-2d0e-4139-80a9-fce124948896 ...\n\nHowever, the command doesn\'t complain if this isn\'t the case, meaning\ntypos like the below aren\'t indicated to the user:\n\n  openstack server create --hint 245e1dfe-2d0e-4139-80a9-fce124948896\n\nDue to how we\'d implemented this here, this ultimately results in us\nPOSTing the following as part of the body to \'os-servers\':\n\n  {\n    ...\n    ""OS-SCH-HNT:scheduler_hints"": {\n      ""245e1dfe-2d0e-4139-80a9-fce124948896"": null\n    }\n    ...\n  }\n\nWhich is unfortunately allowed and ignored by nova due to the use of\n\'additionalProperties\' in the schema [1]\n\nDo what we do for loads of other options and explicitly fail on invalid\nvalues. This involves adding a new argparse action since none of those\ndefined in osc-lib work for us. This is included here to ease\nbackporting of the fix but will be moved to osc-lib in a future patch.\n\n[1] https://github.com/openstack/nova/blob/19.0.0/nova/api/openstack/compute/schemas/servers.py#L142-L146\n\nChange-Id: I9e96d2978912c8dfeadae4a782c481a17cd7e348\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nStory: #2006628\nTask: #36840\nRelated-Bug: #1845322\n(cherry picked from commit ea27ebb0f918db9eab2f5751a1b065818faa0e6d)\n(cherry picked from commit 576d9ecfd0ac27611ec89af6d34e7378b7a39fb3)\n(cherry picked from commit 38e1274f478219bee8899b6c9eaa09dbfd03bbcd)\n'}]",0,708653,4c7a4587ca556897fc19a7684a6ee99484532161,13,7,1,15334,,,0,"Stop silently ignoring invalid 'server create --hint' options

The '--hint' option for 'server create' expects a key-value pair like so:

  openstack server create --hint group=245e1dfe-2d0e-4139-80a9-fce124948896 ...

However, the command doesn't complain if this isn't the case, meaning
typos like the below aren't indicated to the user:

  openstack server create --hint 245e1dfe-2d0e-4139-80a9-fce124948896

Due to how we'd implemented this here, this ultimately results in us
POSTing the following as part of the body to 'os-servers':

  {
    ...
    ""OS-SCH-HNT:scheduler_hints"": {
      ""245e1dfe-2d0e-4139-80a9-fce124948896"": null
    }
    ...
  }

Which is unfortunately allowed and ignored by nova due to the use of
'additionalProperties' in the schema [1]

Do what we do for loads of other options and explicitly fail on invalid
values. This involves adding a new argparse action since none of those
defined in osc-lib work for us. This is included here to ease
backporting of the fix but will be moved to osc-lib in a future patch.

[1] https://github.com/openstack/nova/blob/19.0.0/nova/api/openstack/compute/schemas/servers.py#L142-L146

Change-Id: I9e96d2978912c8dfeadae4a782c481a17cd7e348
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Story: #2006628
Task: #36840
Related-Bug: #1845322
(cherry picked from commit ea27ebb0f918db9eab2f5751a1b065818faa0e6d)
(cherry picked from commit 576d9ecfd0ac27611ec89af6d34e7378b7a39fb3)
(cherry picked from commit 38e1274f478219bee8899b6c9eaa09dbfd03bbcd)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/53/708653/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py']",2,4c7a4587ca556897fc19a7684a6ee99484532161,bug/1845322,"# TODO(stephenfin): Migrate this to osc-lib class KeyValueAppendAction(argparse.Action): """"""A custom action to parse arguments as key=value pairs Ensures that ``dest`` is a dict and values are lists of strings. """""" def __call__(self, parser, namespace, values, option_string=None): # Make sure we have an empty dict rather than None if getattr(namespace, self.dest, None) is None: setattr(namespace, self.dest, {}) # Add value if an assignment else remove it if '=' in values: key, value = values.split('=', 1) # NOTE(qtang): Prevent null key setting in property if '' == key: msg = _(""Property key must be specified: %s"") raise argparse.ArgumentTypeError(msg % str(values)) dest = getattr(namespace, self.dest) if key in dest: dest[key].append(value) else: dest[key] = [value] else: msg = _(""Expected 'key=value' type, but got: %s"") raise argparse.ArgumentTypeError(msg % str(values)) action=KeyValueAppendAction, default={}, for key, values in parsed_args.hint.items(): # only items with multiple values will result in a list if len(values) == 1: hints[key] = values[0] else: hints[key] = values"," action='append', default=[], for hint in parsed_args.hint: key, _sep, value = hint.partition('=') # NOTE(vish): multiple copies of the same hint will # result in a list of values if key in hints: if isinstance(hints[key], six.string_types): hints[key] = [hints[key]] hints[key] += [value] else: hints[key] = value",61,12
openstack%2Frpm-packaging~master~I3a6de45aad40840017708267a3f3cf4eb16c2eb2,openstack/rpm-packaging,master,I3a6de45aad40840017708267a3f3cf4eb16c2eb2,openstackdocstheme: update to 2.2.5,MERGED,2020-07-22 07:28:45.000000000,2020-07-22 18:33:20.000000000,2020-07-22 18:33:20.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-22 07:28:45.000000000', 'files': ['openstack/openstackdocstheme/openstackdocstheme.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/07d95173195cc296998232493400ad2405eea84b', 'message': 'openstackdocstheme: update to 2.2.5\n\nChange-Id: I3a6de45aad40840017708267a3f3cf4eb16c2eb2\n'}]",0,742356,07d95173195cc296998232493400ad2405eea84b,11,7,1,6593,,,0,"openstackdocstheme: update to 2.2.5

Change-Id: I3a6de45aad40840017708267a3f3cf4eb16c2eb2
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/56/742356/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/openstackdocstheme/openstackdocstheme.spec.j2'],1,07d95173195cc296998232493400ad2405eea84b,,{% set upstream_version = upstream_version('2.2.5') %},{% set upstream_version = upstream_version('2.2.4') %},1,1
openstack%2Fcinder~master~I33da9c65ef56b3e4967170e3a0fb25f12e067876,openstack/cinder,master,I33da9c65ef56b3e4967170e3a0fb25f12e067876,Creating snapshot on NFS backend fails,MERGED,2020-07-03 19:05:57.000000000,2020-07-22 18:29:51.000000000,2020-07-22 10:53:02.000000000,"[{'_account_id': 1736}, {'_account_id': 4523}, {'_account_id': 9008}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 11611}, {'_account_id': 12017}, {'_account_id': 12032}, {'_account_id': 12033}, {'_account_id': 12369}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 15670}, {'_account_id': 15941}, {'_account_id': 18883}, {'_account_id': 19933}, {'_account_id': 20813}, {'_account_id': 21863}, {'_account_id': 21884}, {'_account_id': 22126}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24814}, {'_account_id': 24815}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 25678}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 27615}, {'_account_id': 28801}, {'_account_id': 29568}, {'_account_id': 29705}, {'_account_id': 30688}, {'_account_id': 32071}]","[{'number': 1, 'created': '2020-07-03 19:05:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/185da3acd13e7675c1bcb5fee8d5fdec2a783d5a', 'message': 'Fix create qcow2 snapshot on NFS backend\n\nThis patch fixes qcow2 snapshot creation on NFS backend.\n\nChange-Id: I33da9c65ef56b3e4967170e3a0fb25f12e067876\nCloses-Bug: 1886222\n'}, {'number': 2, 'created': '2020-07-04 11:31:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/c13f8797475ebf2720d8f972d278abf6a2419803', 'message': 'Creating snapshot on NFS backend fails\n\nFixed an issue with creating a snapshot on an NFS backend\nif the snapshot name is not specified.\n\nCloses-Bug: 1886222\nChange-Id: I33da9c65ef56b3e4967170e3a0fb25f12e067876\n'}, {'number': 3, 'created': '2020-07-08 16:25:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/097ede0b300020cbcae8ebd1c8678a29c0492feb', 'message': 'Creating snapshot on NFS backend fails\n\nFixed an issue with creating a snapshot on an NFS backend\nif the snapshot name is not specified.\n\nCloses-Bug: 1886222\nChange-Id: I33da9c65ef56b3e4967170e3a0fb25f12e067876\n'}, {'number': 4, 'created': '2020-07-09 11:27:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/21b46d91d8faf40bf6963f415997293d4998c9c0', 'message': 'Creating snapshot on NFS backend fails\n\nFixed an issue with creating a snapshot on an NFS backend\nif the snapshot name is not specified.\n\nCloses-Bug: 1886222\nChange-Id: I33da9c65ef56b3e4967170e3a0fb25f12e067876\n'}, {'number': 5, 'created': '2020-07-20 11:36:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/435a6f2a55eaf6b98efc6389bc8bf1c3adf240fd', 'message': 'Creating snapshot on NFS backend fails\n\nFixed an issue with creating a snapshot on an NFS backend\nif the snapshot name is not specified.\n\nCloses-Bug: 1886222\nChange-Id: I33da9c65ef56b3e4967170e3a0fb25f12e067876\n'}, {'number': 6, 'created': '2020-07-21 13:34:50.000000000', 'files': ['releasenotes/notes/bug-1886222-nfs-snapshot-82b5519175c48a6f.yaml', 'cinder/tests/unit/volume/drivers/test_remotefs.py', 'cinder/volume/drivers/remotefs.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/11b5c9d97bd69f9e8b5db0d32bfe257063170155', 'message': 'Creating snapshot on NFS backend fails\n\nFixed an issue with creating a snapshot on an NFS backend\nif the snapshot name is not specified.\n\nCloses-Bug: 1886222\nChange-Id: I33da9c65ef56b3e4967170e3a0fb25f12e067876\n'}]",4,739277,11b5c9d97bd69f9e8b5db0d32bfe257063170155,174,37,6,29568,,,0,"Creating snapshot on NFS backend fails

Fixed an issue with creating a snapshot on an NFS backend
if the snapshot name is not specified.

Closes-Bug: 1886222
Change-Id: I33da9c65ef56b3e4967170e3a0fb25f12e067876
",git fetch https://review.opendev.org/openstack/cinder refs/changes/77/739277/6 && git format-patch -1 --stdout FETCH_HEAD,['cinder/volume/drivers/remotefs.py'],1,185da3acd13e7675c1bcb5fee8d5fdec2a783d5a,bug/1886222, if (snapshot.display_name and snapshot.display_name.startswith('tmp-snap-')):, if snapshot.display_name.startswith('tmp-snap-'):,2,1
openstack%2Fopenstack-helm-infra~master~I28a314da6e08f5555b7e68a4ad9f8c1802fde9ca,openstack/openstack-helm-infra,master,I28a314da6e08f5555b7e68a4ad9f8c1802fde9ca,"Unpin nagios, osh-selenium and heat images for grafana and nagios",MERGED,2020-07-19 21:54:39.000000000,2020-07-22 18:25:53.000000000,2020-07-22 18:23:41.000000000,"[{'_account_id': 8863}, {'_account_id': 17119}, {'_account_id': 20466}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-19 21:54:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6cdb47bce637ffae65357033d84941ab617f4ef1', 'message': 'Update osh-selenium and heat images for grafana and nagios\n\nChange-Id: I28a314da6e08f5555b7e68a4ad9f8c1802fde9ca\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2020-07-19 22:34:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9d6f60228bc347080499b1a8f1b3256be5dfab37', 'message': 'Update osh-selenium and heat images for grafana and nagios\n\nChange-Id: I28a314da6e08f5555b7e68a4ad9f8c1802fde9ca\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2020-07-22 15:10:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/18f140ae51ebb800084e280956ce27c7455ecba4', 'message': 'Unpin nagios, osh-selenium and heat images for grafana and nagios\n\nChange-Id: I28a314da6e08f5555b7e68a4ad9f8c1802fde9ca\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 4, 'created': '2020-07-22 15:10:22.000000000', 'files': ['grafana/values.yaml', 'nagios/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ed1cc58de08582a018be34ae23d05efd9f923c1d', 'message': 'Unpin nagios, osh-selenium and heat images for grafana and nagios\n\nChange-Id: I28a314da6e08f5555b7e68a4ad9f8c1802fde9ca\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",2,741854,ed1cc58de08582a018be34ae23d05efd9f923c1d,18,6,4,8863,,,0,"Unpin nagios, osh-selenium and heat images for grafana and nagios

Change-Id: I28a314da6e08f5555b7e68a4ad9f8c1802fde9ca
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/54/741854/1 && git format-patch -1 --stdout FETCH_HEAD,"['grafana/values.yaml', 'nagios/values.yaml']",2,6cdb47bce637ffae65357033d84941ab617f4ef1,, selenium_tests: docker.io/openstackhelm/osh-selenium:latest-ubuntu_bionic, selenium_tests: docker.io/openstackhelm/osh-selenium:ubuntu_bionic-20191017,4,4
openstack%2Fironic-lib~master~I0450657cf3023f47f1894b650d2e400cc4bbcbf4,openstack/ironic-lib,master,I0450657cf3023f47f1894b650d2e400cc4bbcbf4,Support more bcrypt prefixes,MERGED,2020-06-30 23:31:19.000000000,2020-07-22 18:20:38.000000000,2020-07-22 18:19:14.000000000,"[{'_account_id': 4571}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-06-30 23:31:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-lib/commit/7951e56a2bdbb71ea2786d99c7abd85dec6f9ece', 'message': 'Support more bcrypt prefixes\n\nThe htpasswd tool generates $2y$ prefixed values, which is not common\nfor bcrypt implementations[1].\n\nThis change adds acceptance for $2a$ and $2b$ prefixed values which the\nvast majority of bcrypt implementations will produce (including golang\nand the bcrypt python library which this feature depends on)\n\n[1] https://en.wikipedia.org/wiki/Bcrypt\n\nChange-Id: I0450657cf3023f47f1894b650d2e400cc4bbcbf4\n'}, {'number': 2, 'created': '2020-07-01 21:32:12.000000000', 'files': ['ironic_lib/auth_basic.py', 'ironic_lib/tests/test_basic_auth.py'], 'web_link': 'https://opendev.org/openstack/ironic-lib/commit/f898a7802f1bff19b368ddb434cf4860635aefca', 'message': 'Support more bcrypt prefixes\n\nThe htpasswd tool generates $2y$ prefixed values, which is not common\nfor bcrypt implementations[1].\n\nThis change adds acceptance for $2a$ and $2b$ prefixed values which the\nvast majority of bcrypt implementations will produce (including golang\nand the bcrypt python library which this feature depends on)\n\n[1] https://en.wikipedia.org/wiki/Bcrypt\n\nChange-Id: I0450657cf3023f47f1894b650d2e400cc4bbcbf4\n'}]",2,738718,f898a7802f1bff19b368ddb434cf4860635aefca,27,6,2,4571,,,0,"Support more bcrypt prefixes

The htpasswd tool generates $2y$ prefixed values, which is not common
for bcrypt implementations[1].

This change adds acceptance for $2a$ and $2b$ prefixed values which the
vast majority of bcrypt implementations will produce (including golang
and the bcrypt python library which this feature depends on)

[1] https://en.wikipedia.org/wiki/Bcrypt

Change-Id: I0450657cf3023f47f1894b650d2e400cc4bbcbf4
",git fetch https://review.opendev.org/openstack/ironic-lib refs/changes/18/738718/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_lib/auth_basic.py', 'ironic_lib/tests/test_basic_auth.py']",2,7951e56a2bdbb71ea2786d99c7abd85dec6f9ece,basic-auth," entry_pass_2a = ('myName:$2a$10$I9Fi3DM1sbxQP0560MK9' 'tec1dUdytBtIqXfDCyTNfDUabtGvQjW1S') entry_pass_2b = ('myName:$2b$12$dWLBxT6aMxpVTfUNAyOu' 'IusHXewu8m6Hrsxw4/e95WGBelFn0oOMW') # success with a bcrypt implementations other than htpasswd self.assertEqual( {'HTTP_X_USER': 'myName', 'HTTP_X_USER_NAME': 'myName'}, auth_basic.auth_entry( entry_pass_2a, b'myPassword') ) self.assertEqual( {'HTTP_X_USER': 'myName', 'HTTP_X_USER_NAME': 'myName'}, auth_basic.auth_entry( entry_pass_2b, b'myPassword') ) ",,19,1
openstack%2Frpm-packaging~master~I17e1df91b587c4faa5a8d940e54ae3d3be143128,openstack/rpm-packaging,master,I17e1df91b587c4faa5a8d940e54ae3d3be143128,oslo.messaging: update to 12.2.1,MERGED,2020-07-08 23:51:26.000000000,2020-07-22 18:06:08.000000000,2020-07-22 18:06:08.000000000,"[{'_account_id': 6593}, {'_account_id': 12907}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 20312}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-08 23:51:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/6248b1c0d70ad44f4096ed081dec77e9674f2f70', 'message': 'oslo.messaging: disable rabbit like amqp tests\n\nSomething in both files fails with Errno 111 Connection refused every\nfew seconds making it loop forever.\n\nChange-Id: I17e1df91b587c4faa5a8d940e54ae3d3be143128\n'}, {'number': 2, 'created': '2020-07-13 15:24:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/9b2519a0766e657b3f15b989dc8e1a4ac45a0d1d', 'message': 'oslo.messaging: disable failing rabbit tests\n\nThese fail with Errno 111 Connection refused every few seconds making it\nloop forever.\n\nAlso change to blacklist instead of deleting tests. Add omitted pifpaf\nbuild requires, that is only used in functional tests.\n\nThis was fixed in: Ibbcf21a57ab1e3f90c21901296e5c088b645127c\n\nChange-Id: I17e1df91b587c4faa5a8d940e54ae3d3be143128\n'}, {'number': 3, 'created': '2020-07-13 15:28:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/04f8ef211cece2f7036619dc2faadef36bc33394', 'message': 'oslo.messaging: update to 12.2.1\n\nIn Ibbcf21a57ab1e3f90c21901296e5c088b645127c this fixes failing rabbit\ntests:\noslo_messaging.tests.drivers.test_impl_rabbit.(ConnectionLockTestCase|RpcKombuHATestCase)\nThese were failing with Errno 111 Connection refused every few seconds\nmaking it loop forever.\n\nAlso change to blacklist instead of deleting tests. Add omitted pifpaf\nbuild requires, that is only used in functional tests.\n\nChange-Id: I17e1df91b587c4faa5a8d940e54ae3d3be143128\n'}, {'number': 4, 'created': '2020-07-22 07:25:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/ed2c0c5bed255e38d17a95b5d78361ef37c3eca5', 'message': 'oslo.messaging: update to 12.2.1\n\nIn Ibbcf21a57ab1e3f90c21901296e5c088b645127c this fixes failing rabbit\ntests:\noslo_messaging.tests.drivers.test_impl_rabbit.(ConnectionLockTestCase|RpcKombuHATestCase)\nThese were failing with Errno 111 Connection refused every few seconds\nmaking it loop forever.\n\nAlso change to blacklist instead of deleting tests. Add omitted pifpaf\nbuild requires, that is only used in functional tests.\n\nChange-Id: I17e1df91b587c4faa5a8d940e54ae3d3be143128\n'}, {'number': 5, 'created': '2020-07-22 11:44:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/72d0e250d00c7a2851e1ed18f913c4f7e25607e9', 'message': 'oslo.messaging: update to 12.2.1\n\nIn Ibbcf21a57ab1e3f90c21901296e5c088b645127c this fixes failing rabbit\ntests:\noslo_messaging.tests.drivers.test_impl_rabbit.(ConnectionLockTestCase|RpcKombuHATestCase)\nThese were failing with Errno 111 Connection refused every few seconds\nmaking it loop forever.\n\nAlso added blacklist for when those tests are not deleted.\n\nChange-Id: I17e1df91b587c4faa5a8d940e54ae3d3be143128\n'}, {'number': 6, 'created': '2020-07-22 12:13:13.000000000', 'files': ['openstack/oslo.messaging/oslo.messaging.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/8f23d7f3a2397ad470caedbad34e7e8bbad1665b', 'message': 'oslo.messaging: update to 12.2.1\n\nIn Ibbcf21a57ab1e3f90c21901296e5c088b645127c this fixes failing rabbit\ntests:\noslo_messaging.tests.drivers.test_impl_rabbit.(ConnectionLockTestCase|RpcKombuHATestCase)\nThese were failing with Errno 111 Connection refused every few seconds\nmaking it loop forever.\n\nAlso added blacklist functional tests for when those tests are not deleted.\n\nBlacklist 3 amqp cyrus tests that fail (only on RDO, on SUSE that test\nclass is skipped) with:\nTraceback (most recent call last):\n  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/tests/drivers/test_amqp_driver.py"", line 878, in test_authentication_ok\n    self._authentication_test(addr)\n  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/tests/drivers/test_amqp_driver.py"", line 865, in _authentication_test\n    retry=retry)\n  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/_drivers/impl_amqp1.py"", line 295, in wrap\n    return func(self, *args, **kws)\n  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/_drivers/impl_amqp1.py"", line 357, in send\n    raise reply\noslo_messaging.exceptions.MessageDeliveryFailure: RPC Call message sent to <Target topic=test-topic> failed: timed out\n\nChange-Id: I17e1df91b587c4faa5a8d940e54ae3d3be143128\n'}]",3,740131,8f23d7f3a2397ad470caedbad34e7e8bbad1665b,40,8,6,12907,,,0,"oslo.messaging: update to 12.2.1

In Ibbcf21a57ab1e3f90c21901296e5c088b645127c this fixes failing rabbit
tests:
oslo_messaging.tests.drivers.test_impl_rabbit.(ConnectionLockTestCase|RpcKombuHATestCase)
These were failing with Errno 111 Connection refused every few seconds
making it loop forever.

Also added blacklist functional tests for when those tests are not deleted.

Blacklist 3 amqp cyrus tests that fail (only on RDO, on SUSE that test
class is skipped) with:
Traceback (most recent call last):
  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/tests/drivers/test_amqp_driver.py"", line 878, in test_authentication_ok
    self._authentication_test(addr)
  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/tests/drivers/test_amqp_driver.py"", line 865, in _authentication_test
    retry=retry)
  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/_drivers/impl_amqp1.py"", line 295, in wrap
    return func(self, *args, **kws)
  File ""/builddir/build/BUILD/oslo.messaging-12.2.1/oslo_messaging/_drivers/impl_amqp1.py"", line 357, in send
    raise reply
oslo_messaging.exceptions.MessageDeliveryFailure: RPC Call message sent to <Target topic=test-topic> failed: timed out

Change-Id: I17e1df91b587c4faa5a8d940e54ae3d3be143128
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/31/740131/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/oslo.messaging/oslo.messaging.spec.j2'],1,6248b1c0d70ad44f4096ed081dec77e9674f2f70,,"# FIXME(jpena): since version 5.23.0, four tests in the amqp driver are # failing. Let's remove the tests for now, so we can build a package and # figure out whatis wrong. # With 12.1.0 both amqp and rabbit tests are stuck forever erroring every few # seconds with Errno 111 Connection refused rm -f oslo_messaging/tests/drivers/test_amqp_driver.py rm -f oslo_messaging/tests/drivers/test_impl_rabbit.py","%if !0%{?suse_version} # FIXME(jpena): since version 5.23.0, four tests in the amqp driver are # failing. Let's remove the tests for now, so we can build a package and # figure out whatis wrong. rm -f oslo_messaging/tests/drivers/test_amqp_driver.py %endif ",7,7
openstack%2Fkuryr-kubernetes~master~Id7bffb358a09f20fadb563770615a2a4fc7d7dfe,openstack/kuryr-kubernetes,master,Id7bffb358a09f20fadb563770615a2a4fc7d7dfe,Added Neutron metadata service to the config files.,MERGED,2020-07-22 11:34:47.000000000,2020-07-22 17:50:35.000000000,2020-07-22 17:48:03.000000000,"[{'_account_id': 11600}, {'_account_id': 22348}, {'_account_id': 23567}, {'_account_id': 27032}]","[{'number': 1, 'created': '2020-07-22 11:34:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/88f6e5ed8a09ec28b41b8da8ccbe0838606b6aca', 'message': 'Added Neutron metadata service to the config files.\n\nTo being able to run kuryr tempest tests locally, on devstack, Neutron\nmetadata service has to be present, otherwise accessing metadata service\nfrom created VMs will not be accessible.\n\nChange-Id: Id7bffb358a09f20fadb563770615a2a4fc7d7dfe\n'}, {'number': 2, 'created': '2020-07-22 12:16:40.000000000', 'files': ['devstack/local.conf.odl.sample', 'devstack/local.conf.openshift.sample', 'devstack/local.conf.sample'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/52cfea0649b2c899b22dc4e0cee449c5715eb06d', 'message': 'Added Neutron metadata service to the config files.\n\nTo being able to run kuryr tempest tests locally, on devstack, Neutron\nmetadata service has to be present, otherwise accessing metadata service\nfrom created VMs will not be possible.\n\nChange-Id: Id7bffb358a09f20fadb563770615a2a4fc7d7dfe\n'}]",0,742396,52cfea0649b2c899b22dc4e0cee449c5715eb06d,11,4,2,13692,,,0,"Added Neutron metadata service to the config files.

To being able to run kuryr tempest tests locally, on devstack, Neutron
metadata service has to be present, otherwise accessing metadata service
from created VMs will not be possible.

Change-Id: Id7bffb358a09f20fadb563770615a2a4fc7d7dfe
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/96/742396/1 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/local.conf.odl.sample', 'devstack/local.conf.openshift.sample', 'devstack/local.conf.sample']",3,88f6e5ed8a09ec28b41b8da8ccbe0838606b6aca,add-q-meta,enable_service q-meta,,3,0
openstack%2Fpython-manilaclient~stable%2Fstein~I3b67f3b566bdadf1cc228f885b7253435a4507b5,openstack/python-manilaclient,stable/stein,I3b67f3b566bdadf1cc228f885b7253435a4507b5,Migrate functional job to native zuulv3,MERGED,2020-07-20 22:33:14.000000000,2020-07-22 17:49:43.000000000,2020-07-22 17:43:58.000000000,"[{'_account_id': 6413}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-20 22:33:14.000000000', 'files': ['playbooks/legacy/manilaclient-dsvm-neutron-functional/run.yaml', 'playbooks/python-manilaclient-functional/post.yaml', 'contrib/ci/post_test_hook.sh', '.zuul.yaml', 'roles/populate-manilaclient-config/defaults/main.yaml', 'playbooks/python-manilaclient-functional/run.yaml', 'playbooks/legacy/manilaclient-dsvm-neutron-functional/post.yaml', 'bindep.txt', 'contrib/ci/pre_test_hook.sh', 'roles/populate-manilaclient-config/README.rst', 'zuul.d/project.yaml', 'roles/populate-manilaclient-config/tasks/main.yaml', 'zuul.d/python-manilaclient-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/771700bd513ec0c34225976b85835eafab7eb7b6', 'message': 'Migrate functional job to native zuulv3\n\nThe manilaclient functional test job\n""manilaclient-dsvm-neutron-functional""\nis currently broken due to a change to its\nparent job in the devstack repository.\n\nInstead of investing to fix that legacy style\njob, we\'d be better off rewriting it to be\nin native zuulv3 style, i.e., without the\nuse of the deprecated devstack-gate project.\n\n- Introduce a new job ""python-manilaclient-functional""\n  which replaces ""manilaclient-dsvm-neutron-functional""\n  but preserves the testing done by the latter.\n- The new job runs on a minimal devstack (keystone,\n  neutron, manila, mysql and rabbit) and uses an ansible\n  role introduced to setup test configuration.\n- Add a ""bindep.txt"" file to call out test system\n  dependencies, and install them via the new job.\n- Cleanup the old job, the associated devstack gate\n  hooks and playbooks.\n\nChange-Id: I3b67f3b566bdadf1cc228f885b7253435a4507b5\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n(cherry picked from commit d65d7f05a7f99aad7b3a4ba286c8ab136775d303)\n(cherry picked from commit f852358f21c04a551e40d397e00577fbb90aa534)\n(cherry picked from commit cf01e725dfdccd37631c30400cb72d95ff275ecb)\n'}]",0,742039,771700bd513ec0c34225976b85835eafab7eb7b6,9,4,1,16643,,,0,"Migrate functional job to native zuulv3

The manilaclient functional test job
""manilaclient-dsvm-neutron-functional""
is currently broken due to a change to its
parent job in the devstack repository.

Instead of investing to fix that legacy style
job, we'd be better off rewriting it to be
in native zuulv3 style, i.e., without the
use of the deprecated devstack-gate project.

- Introduce a new job ""python-manilaclient-functional""
  which replaces ""manilaclient-dsvm-neutron-functional""
  but preserves the testing done by the latter.
- The new job runs on a minimal devstack (keystone,
  neutron, manila, mysql and rabbit) and uses an ansible
  role introduced to setup test configuration.
- Add a ""bindep.txt"" file to call out test system
  dependencies, and install them via the new job.
- Cleanup the old job, the associated devstack gate
  hooks and playbooks.

Change-Id: I3b67f3b566bdadf1cc228f885b7253435a4507b5
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
(cherry picked from commit d65d7f05a7f99aad7b3a4ba286c8ab136775d303)
(cherry picked from commit f852358f21c04a551e40d397e00577fbb90aa534)
(cherry picked from commit cf01e725dfdccd37631c30400cb72d95ff275ecb)
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/39/742039/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/manilaclient-dsvm-neutron-functional/run.yaml', 'playbooks/python-manilaclient-functional/post.yaml', 'contrib/ci/post_test_hook.sh', '.zuul.yaml', 'roles/populate-manilaclient-config/defaults/main.yaml', 'playbooks/python-manilaclient-functional/run.yaml', 'playbooks/legacy/manilaclient-dsvm-neutron-functional/post.yaml', 'bindep.txt', 'contrib/ci/pre_test_hook.sh', 'roles/populate-manilaclient-config/README.rst', 'zuul.d/project.yaml', 'roles/populate-manilaclient-config/tasks/main.yaml', 'zuul.d/python-manilaclient-jobs.yaml']",13,771700bd513ec0c34225976b85835eafab7eb7b6,native-zuulv3-migration,"- job: name: python-manilaclient-functional parent: devstack-minimal irrelevant-files: - ^manilaclient/tests/unit/.*$ - ^setup.cfg$ - ^tools/.*$ - ^tox.ini$ required-projects: - openstack/keystone - openstack/manila - openstack/neutron - openstack/python-manilaclient timeout: 5400 run: playbooks/python-manilaclient-functional/run.yaml post-run: playbooks/python-manilaclient-functional/post.yaml vars: zuul_copy_output: ""{{ zuul.project.src_dir }}/etc/manilaclient/manilaclient.conf"": logs tox_environment: PYTHONUNBUFFERED: 'true' tox_envlist: functional devstack_plugins: manila: https://opendev.org/openstack/manila devstack_localrc: USE_PYTHON3: true INSTALL_TEMPEST: false # Enable manila with a fake driver that supports all capabilities MANILA_CONFIGURE_DEFAULT_TYPES: true MANILA_OPTGROUP_DEFAULT_quota_share_networks: 50 MANILA_DEFAULT_SHARE_TYPE_EXTRA_SPECS: 'snapshot_support=True create_share_from_snapshot_support=True revert_to_snapshot_support=True mount_snapshot_support=True' MANILA_INSTALL_TEMPEST_PLUGIN_SYSTEMWIDE: false MANILA_SERVICE_IMAGE_ENABLED: false MANILA_SHARE_MIGRATION_PERIOD_TASK_INTERVAL: 1 SHARE_DRIVER: manila.tests.share.drivers.dummy.DummyDriver MANILA_REPLICA_STATE_UPDATE_INTERVAL: 10 MANILA_ENABLED_BACKENDS: alpha,beta,gamma,delta MANILA_CONFIGURE_GROUPS: alpha,beta,gamma,delta,membernet,adminnet MANILA_OPTGROUP_alpha_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_alpha_driver_handles_share_servers: true MANILA_OPTGROUP_alpha_share_backend_name: ALPHA MANILA_OPTGROUP_alpha_network_config_group: membernet MANILA_OPTGROUP_alpha_admin_network_config_group: adminnet MANILA_OPTGROUP_alpha_replication_domain: DUMMY_DOMAIN_2 MANILA_OPTGROUP_beta_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_beta_driver_handles_share_servers: true MANILA_OPTGROUP_beta_share_backend_name: BETA MANILA_OPTGROUP_beta_network_config_group: membernet MANILA_OPTGROUP_beta_admin_network_config_group: adminnet MANILA_OPTGROUP_beta_replication_domain: DUMMY_DOMAIN_2 MANILA_OPTGROUP_gamma_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_gamma_driver_handles_share_servers: false MANILA_OPTGROUP_gamma_share_backend_name: GAMMA MANILA_OPTGROUP_gamma_replication_domain: DUMMY_DOMAIN MANILA_OPTGROUP_delta_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_delta_driver_handles_share_servers: false MANILA_OPTGROUP_delta_share_backend_name: DELTA MANILA_OPTGROUP_delta_replication_domain: DUMMY_DOMAIN MANILA_OPTGROUP_membernet_network_api_class: manila.network.standalone_network_plugin.StandaloneNetworkPlugin MANILA_OPTGROUP_membernet_standalone_network_plugin_gateway: 10.0.0.1 MANILA_OPTGROUP_membernet_standalone_network_plugin_mask: 24 MANILA_OPTGROUP_membernet_standalone_network_plugin_network_type: vlan MANILA_OPTGROUP_membernet_standalone_network_plugin_segmentation_id: 1010 MANILA_OPTGROUP_membernet_standalone_network_plugin_allowed_ip_ranges: 10.0.0.10-10.0.0.209 MANILA_OPTGROUP_membernet_network_plugin_ipv4_enabled: true MANILA_OPTGROUP_adminnet_network_api_class: manila.network.standalone_network_plugin.StandaloneNetworkPlugin MANILA_OPTGROUP_adminnet_standalone_network_plugin_gateway: 11.0.0.1 MANILA_OPTGROUP_adminnet_standalone_network_plugin_mask: 24 MANILA_OPTGROUP_adminnet_standalone_network_plugin_network_type: vlan MANILA_OPTGROUP_adminnet_standalone_network_plugin_segmentation_id: 1011 MANILA_OPTGROUP_adminnet_standalone_network_plugin_allowed_ip_ranges: 11.0.0.10-11.0.0.19,11.0.0.30-11.0.0.39,11.0.0.50-11.0.0.199 MANILA_OPTGROUP_adminnet_network_plugin_ipv4_enabled: true devstack_services: # Keystone key: true # Neutron q-agt: true q-dhcp: true q-l3: true q-meta: true q-metering: true q-svc: true ",,238,275
openstack%2Ftripleo-ansible~stable%2Ftrain~Ie7234bf113204e8cf847257554b88b899b45d5ee,openstack/tripleo-ansible,stable/train,Ie7234bf113204e8cf847257554b88b899b45d5ee,Use ansible_user only if ANSIBLE_REMOTE_USER is unset,MERGED,2020-07-21 21:38:36.000000000,2020-07-22 17:36:32.000000000,2020-07-22 17:36:32.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25402}]","[{'number': 1, 'created': '2020-07-21 21:38:36.000000000', 'files': ['tripleo_ansible/roles/tripleo-ceph-run-ansible/tasks/create_ceph_ansible_remote_tmp.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/42b7a23f04831e360c89d7423854b11090626629', 'message': 'Use ansible_user only if ANSIBLE_REMOTE_USER is unset\n\nIn a non-standalone deployment config-download is called\nwith the ANSIBLE_REMOTE_USER defined. This variable is\nundefined when using standalone, which is what caused the\nrelated bug. Unfortunately the fix for the related bug\nintroduced the bug this patch closes. This patch should\nwork for both non-standalone and standalone deployments.\n\nChange-Id: Ie7234bf113204e8cf847257554b88b899b45d5ee\nRelated-Bug: #1886497\nCloses-Bug: #1887708\n(cherry picked from commit 67c4a4f58e9b8af07c277b1f6c20fa7af116eaf7)\n'}]",0,742291,42b7a23f04831e360c89d7423854b11090626629,10,6,1,18002,,,0,"Use ansible_user only if ANSIBLE_REMOTE_USER is unset

In a non-standalone deployment config-download is called
with the ANSIBLE_REMOTE_USER defined. This variable is
undefined when using standalone, which is what caused the
related bug. Unfortunately the fix for the related bug
introduced the bug this patch closes. This patch should
work for both non-standalone and standalone deployments.

Change-Id: Ie7234bf113204e8cf847257554b88b899b45d5ee
Related-Bug: #1886497
Closes-Bug: #1887708
(cherry picked from commit 67c4a4f58e9b8af07c277b1f6c20fa7af116eaf7)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/91/742291/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo-ceph-run-ansible/tasks/create_ceph_ansible_remote_tmp.yml'],1,42b7a23f04831e360c89d7423854b11090626629,bug/1887708," owner: ""{{ lookup('env','ANSIBLE_REMOTE_USER') | default(ansible_user, true) }}"" group: ""{{ lookup('env','ANSIBLE_REMOTE_USER') | default(ansible_user, true) }}"""," owner: ""{{ ansible_user | default('tripleo-admin', true) }}"" group: ""{{ ansible_user | default('tripleo-admin', true) }}""",2,2
openstack%2Fswift~master~Iaeb08759e1cde142153219f563602be3a7140f71,openstack/swift,master,Iaeb08759e1cde142153219f563602be3a7140f71,swift-container-info: better shard range summary,ABANDONED,2020-06-30 20:34:10.000000000,2020-07-22 17:30:20.000000000,,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-06-30 20:34:10.000000000', 'files': ['swift/cli/info.py', 'test/unit/cli/test_info.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/dabb5990df405bee6f84da53a0298c20f4daf195', 'message': 'swift-container-info: better shard range summary\n\nChange-Id: Iaeb08759e1cde142153219f563602be3a7140f71\n'}]",1,738692,dabb5990df405bee6f84da53a0298c20f4daf195,4,2,1,1179,,,0,"swift-container-info: better shard range summary

Change-Id: Iaeb08759e1cde142153219f563602be3a7140f71
",git fetch https://review.opendev.org/openstack/swift refs/changes/92/738692/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/cli/info.py', 'test/unit/cli/test_info.py']",2,dabb5990df405bee6f84da53a0298c20f4daf195,," self.assertEqual(out.getvalue().strip().split('\n'), exp_out.split('\n')) print_db_info_metadata('container', info, {}, verbose=True) States: found: 1 created: 1 cleaved: 1 Max objects: 3 Min objects: 1 Avg objects: 2.0 self.assertEqual(out.getvalue().strip().split('\n'), exp_out.strip().split('\n')) States: found: 17 created: 1 cleaved: 1 Max objects: 19 Min objects: 1 Avg objects: 10.0 (Use -v/--verbose to show more Shard Ranges details) self.assertEqual(out.getvalue().strip().split('\n'), exp_out.strip().split('\n')) print_db_info_metadata('container', info, {}, verbose=True) States: found: 1 created: 1 cleaved: 1 Max objects: 3 Min objects: 1 Avg objects: 2.0"," self.assertEqual(sorted(out.getvalue().strip().split('\n')), sorted(exp_out.split('\n'))) print_db_info_metadata('container', info, {}) self.assertEqual(sorted(out.getvalue().strip().split('\n')), sorted(exp_out.strip().split('\n'))) (More than 10 shard ranges; use -v/--verbose to show) self.assertEqual(sorted(out.getvalue().strip().split('\n')), sorted(exp_out.strip().split('\n'))) print_db_info_metadata('container', info, {})",49,12
openstack%2Ftripleo-ansible~stable%2Fussuri~Ied39aaef9c65c65f33cceb99071c53af7f9aa464,openstack/tripleo-ansible,stable/ussuri,Ied39aaef9c65c65f33cceb99071c53af7f9aa464,Fix tripleo_profile_tasks callback plugin _output(),MERGED,2020-07-22 11:50:52.000000000,2020-07-22 17:26:32.000000000,2020-07-22 17:26:31.000000000,"[{'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-22 11:50:52.000000000', 'files': ['tripleo_ansible/ansible_plugins/callback/tripleo_profile_tasks.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8794829156e0fb2ad085fa21b104e6e319b896f5', 'message': 'Fix tripleo_profile_tasks callback plugin _output()\n\nRegression from https://review.opendev.org/#/c/733394/\n\nPartial-Bug: #1888488\nChange-Id: Ied39aaef9c65c65f33cceb99071c53af7f9aa464\n(cherry picked from commit f0dbd1d0f5eb0122007b3a4ca100764646a68d98)\n'}]",0,742400,8794829156e0fb2ad085fa21b104e6e319b896f5,8,4,1,6926,,,0,"Fix tripleo_profile_tasks callback plugin _output()

Regression from https://review.opendev.org/#/c/733394/

Partial-Bug: #1888488
Change-Id: Ied39aaef9c65c65f33cceb99071c53af7f9aa464
(cherry picked from commit f0dbd1d0f5eb0122007b3a4ca100764646a68d98)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/00/742400/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/ansible_plugins/callback/tripleo_profile_tasks.py'],1,8794829156e0fb2ad085fa21b104e6e319b896f5,," def _output(self, msg, color=None): self._display.display(output, color=color)"," def _output(self, msg, color): self._output(output, color=color)",2,2
openstack%2Ftripleo-ansible~stable%2Ftrain~I614766bd9b111bda9ddfea0a60b032e1dee09abc,openstack/tripleo-ansible,stable/train,I614766bd9b111bda9ddfea0a60b032e1dee09abc,Introduce an Action Plugin to manage systemd services for containers,MERGED,2020-07-20 18:48:21.000000000,2020-07-22 17:26:31.000000000,2020-07-22 17:26:31.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-20 18:48:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/f17d0ebad6f981fa236e0792a6e244c10f1f63ba', 'message': 'WIP - Introduce an Action Plugin to manage systemd services for containers\n\nTODO:\n- manage systemd healthchecks via the action plugin\n- molecule testing\n\nInstead of running a bunch of tasks to manage systemd resources, move\nit into an action plugin which should make the execution faster and\neasier to debug as well.\n\nExample of task:\n- name: Manage container systemd services\n  container_systemd:\n    container_config:\n      - keystone:\n          image: quay.io/tripleo/keystone\n          restart: always\n      - mysql:\n          image: quay.io/tripleo/mysql\n          stop_grace_period: 25\n          restart: always\n\nThe output is ""restarted"" for the list of services that were actually\nrestarted in systemd.\n\nNote on testing: since that module is consummed by\ntripleo_container_manage role, there is no need to create dedicated\nmolecule tests, we already cover containers with restart policy in that\nrole\'s molecule tests. So we\'ll re-use it.\n\nCo-Authored-By: Alex Schultz <aschultz@redhat.com>\nCo-Authored-By: Kevin Carter <kecarter@redhat.com>\n\nChange-Id: I614766bd9b111bda9ddfea0a60b032e1dee09abc\n(cherry picked from commit af7f083066574dcefe637b3aae5026de4573d954)\n'}, {'number': 2, 'created': '2020-07-20 18:48:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/30981ee549fe910b9cf97d234f01b1e65c5a7217', 'message': 'WIP - Introduce an Action Plugin to manage systemd services for containers\n\nTODO:\n- manage systemd healthchecks via the action plugin\n- molecule testing\n\nInstead of running a bunch of tasks to manage systemd resources, move\nit into an action plugin which should make the execution faster and\neasier to debug as well.\n\nExample of task:\n- name: Manage container systemd services\n  container_systemd:\n    container_config:\n      - keystone:\n          image: quay.io/tripleo/keystone\n          restart: always\n      - mysql:\n          image: quay.io/tripleo/mysql\n          stop_grace_period: 25\n          restart: always\n\nThe output is ""restarted"" for the list of services that were actually\nrestarted in systemd.\n\nNote on testing: since that module is consummed by\ntripleo_container_manage role, there is no need to create dedicated\nmolecule tests, we already cover containers with restart policy in that\nrole\'s molecule tests. So we\'ll re-use it.\n\nCo-Authored-By: Alex Schultz <aschultz@redhat.com>\nCo-Authored-By: Kevin Carter <kecarter@redhat.com>\n\nChange-Id: I614766bd9b111bda9ddfea0a60b032e1dee09abc\n(cherry picked from commit af7f083066574dcefe637b3aae5026de4573d954)\n'}, {'number': 3, 'created': '2020-07-21 01:53:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ee597b7664494eaa87a6e2bdcc668c14788355c1', 'message': 'WIP - Introduce an Action Plugin to manage systemd services for containers\n\nTODO:\n- manage systemd healthchecks via the action plugin\n- molecule testing\n\nInstead of running a bunch of tasks to manage systemd resources, move\nit into an action plugin which should make the execution faster and\neasier to debug as well.\n\nExample of task:\n- name: Manage container systemd services\n  container_systemd:\n    container_config:\n      - keystone:\n          image: quay.io/tripleo/keystone\n          restart: always\n      - mysql:\n          image: quay.io/tripleo/mysql\n          stop_grace_period: 25\n          restart: always\n\nThe output is ""restarted"" for the list of services that were actually\nrestarted in systemd.\n\nNote on testing: since that module is consummed by\ntripleo_container_manage role, there is no need to create dedicated\nmolecule tests, we already cover containers with restart policy in that\nrole\'s molecule tests. So we\'ll re-use it.\n\nCo-Authored-By: Alex Schultz <aschultz@redhat.com>\nCo-Authored-By: Kevin Carter <kecarter@redhat.com>\n\nChange-Id: I614766bd9b111bda9ddfea0a60b032e1dee09abc\n(cherry picked from commit af7f083066574dcefe637b3aae5026de4573d954)\n'}, {'number': 4, 'created': '2020-07-21 12:54:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/5c1c36907d8a01db7a02cc46d6e43bb6a60aa2ab', 'message': 'WIP - Introduce an Action Plugin to manage systemd services for containers\n\nInstead of running a bunch of tasks to manage systemd resources, move\nit into an action plugin which should make the execution faster and\neasier to debug as well.\n\nExample of task:\n- name: Manage container systemd services\n  container_systemd:\n    container_config:\n      - keystone:\n          image: quay.io/tripleo/keystone\n          restart: always\n      - mysql:\n          image: quay.io/tripleo/mysql\n          stop_grace_period: 25\n          restart: always\n\nThe output is ""restarted"" for the list of services that were actually\nrestarted in systemd.\n\nNote on testing: since that module is consummed by\ntripleo_container_manage role, there is no need to create dedicated\nmolecule tests, we already cover containers with restart policy in that\nrole\'s molecule tests. So we\'ll re-use it.\n\nNote on backporting: this action plugin was rewritten to support systemd\nhealthcheck resources. In Ussuri, we removed them but they still remain\nin Train so the action plugin supports it.\n\nCo-Authored-By: Alex Schultz <aschultz@redhat.com>\nCo-Authored-By: Kevin Carter <kecarter@redhat.com>\n\nChange-Id: I614766bd9b111bda9ddfea0a60b032e1dee09abc\n(cherry picked from commit af7f083066574dcefe637b3aae5026de4573d954)\n'}, {'number': 5, 'created': '2020-07-21 12:54:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/08433f4a999a8ae24b8c67f8390ea06b0d9ca2b7', 'message': 'Introduce an Action Plugin to manage systemd services for containers\n\nInstead of running a bunch of tasks to manage systemd resources, move\nit into an action plugin which should make the execution faster and\neasier to debug as well.\n\nExample of task:\n- name: Manage container systemd services\n  container_systemd:\n    container_config:\n      - keystone:\n          image: quay.io/tripleo/keystone\n          restart: always\n      - mysql:\n          image: quay.io/tripleo/mysql\n          stop_grace_period: 25\n          restart: always\n\nThe output is ""restarted"" for the list of services that were actually\nrestarted in systemd.\n\nNote on testing: since that module is consummed by\ntripleo_container_manage role, there is no need to create dedicated\nmolecule tests, we already cover containers with restart policy in that\nrole\'s molecule tests. So we\'ll re-use it.\n\nNote on backporting: this action plugin was rewritten to support systemd\nhealthcheck resources. In Ussuri, we removed them but they still remain\nin Train so the action plugin supports it.\n\nCo-Authored-By: Alex Schultz <aschultz@redhat.com>\nCo-Authored-By: Kevin Carter <kecarter@redhat.com>\n\nChange-Id: I614766bd9b111bda9ddfea0a60b032e1dee09abc\n(cherry picked from commit af7f083066574dcefe637b3aae5026de4573d954)\n'}, {'number': 6, 'created': '2020-07-21 13:17:24.000000000', 'files': ['zuul.d/molecule.yaml', 'tripleo_ansible/ansible_plugins/action/container_systemd.py', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-healthcheck.j2', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-healthcheck-service.j2', 'tripleo_ansible/roles/tripleo-container-manage/tasks/podman/systemd.yml', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-service.j2', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-healthcheck-timer.j2', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-timer.j2', 'tripleo_ansible/roles/tripleo-container-manage/tasks/create.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/02ba2938ba29042a45cc752a0d467cf9102da95b', 'message': 'Introduce an Action Plugin to manage systemd services for containers\n\nInstead of running a bunch of tasks to manage systemd resources, move\nit into an action plugin which should make the execution faster and\neasier to debug as well.\n\nExample of task:\n- name: Manage container systemd services\n  container_systemd:\n    container_config:\n      - keystone:\n          image: quay.io/tripleo/keystone\n          restart: always\n      - mysql:\n          image: quay.io/tripleo/mysql\n          stop_grace_period: 25\n          restart: always\n\nThe output is ""restarted"" for the list of services that were actually\nrestarted in systemd.\n\nNote on testing: since that module is consummed by\ntripleo_container_manage role, there is no need to create dedicated\nmolecule tests, we already cover containers with restart policy in that\nrole\'s molecule tests. So we\'ll re-use it.\n\nNote on backporting: this action plugin was rewritten to support systemd\nhealthcheck resources. In Ussuri, we removed them but they still remain\nin Train so the action plugin supports it.\n\nCo-Authored-By: Alex Schultz <aschultz@redhat.com>\nCo-Authored-By: Kevin Carter <kecarter@redhat.com>\n\nChange-Id: I614766bd9b111bda9ddfea0a60b032e1dee09abc\n(cherry picked from commit af7f083066574dcefe637b3aae5026de4573d954)\n'}]",0,742007,02ba2938ba29042a45cc752a0d467cf9102da95b,24,5,6,3153,,,0,"Introduce an Action Plugin to manage systemd services for containers

Instead of running a bunch of tasks to manage systemd resources, move
it into an action plugin which should make the execution faster and
easier to debug as well.

Example of task:
- name: Manage container systemd services
  container_systemd:
    container_config:
      - keystone:
          image: quay.io/tripleo/keystone
          restart: always
      - mysql:
          image: quay.io/tripleo/mysql
          stop_grace_period: 25
          restart: always

The output is ""restarted"" for the list of services that were actually
restarted in systemd.

Note on testing: since that module is consummed by
tripleo_container_manage role, there is no need to create dedicated
molecule tests, we already cover containers with restart policy in that
role's molecule tests. So we'll re-use it.

Note on backporting: this action plugin was rewritten to support systemd
healthcheck resources. In Ussuri, we removed them but they still remain
in Train so the action plugin supports it.

Co-Authored-By: Alex Schultz <aschultz@redhat.com>
Co-Authored-By: Kevin Carter <kecarter@redhat.com>

Change-Id: I614766bd9b111bda9ddfea0a60b032e1dee09abc
(cherry picked from commit af7f083066574dcefe637b3aae5026de4573d954)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/07/742007/6 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/molecule.yaml', 'tripleo_ansible/ansible_plugins/action/container_systemd.py', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-healthcheck.j2', 'tripleo_ansible/roles/tripleo-container-manage/tasks/podman/systemd.yml', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-service.j2', 'tripleo_ansible/roles/tripleo-container-manage/templates/systemd-timer.j2', 'tripleo_ansible/roles/tripleo-container-manage/tasks/create.yml']",7,f17d0ebad6f981fa236e0792a6e244c10f1f63ba,systemd/train," become: true container_systemd: container_config: ""{{ container_config }}"" debug: ""{{ tripleo_container_manage_debug | bool }}"" restart_containers: ""{{ containers_changed | default([]) }}"" systemd_healthchecks: ""{{ (not tripleo_container_manage_healthcheck_disabled | bool) }}"""," include_tasks: podman/systemd.yml container_config_healthcheck: ""{{ all_containers_hash | dict_to_list | haskey(attribute='healthcheck') | intersect(container_config) | default([]) }}""",408,144
openstack%2Ftripleo-ansible~master~Id0487e4649ef1f6aaf2591e003746b385f592095,openstack/tripleo-ansible,master,Id0487e4649ef1f6aaf2591e003746b385f592095,BaR: Deleted duplicated variables,MERGED,2020-07-21 14:50:01.000000000,2020-07-22 17:26:29.000000000,2020-07-22 17:26:29.000000000,"[{'_account_id': 3153}, {'_account_id': 8449}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 18002}, {'_account_id': 20182}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 14:50:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/064fd74f1fc0f09b7dd33c821ea2a6514a3d33b6', 'message': 'Fix bug 1888404\n\nAdding some brackets as suggested at\nhttps://github.com/ansible/ansible/issues/64398\n\nChange-Id: Id0487e4649ef1f6aaf2591e003746b385f592095\nCloses-Bug: 1887708\n'}, {'number': 2, 'created': '2020-07-21 15:02:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/7b5bbb233d8c7b3de2af1c3358e2492203a25aa7', 'message': 'Fix bug 1888404\n\nAdding some brackets as suggested at\nhttps://github.com/ansible/ansible/issues/64398\n\nChange-Id: Id0487e4649ef1f6aaf2591e003746b385f592095\nCloses-Bug: 1887704\n'}, {'number': 3, 'created': '2020-07-21 15:10:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/df1d1ad886a65c6f858a4d5f4d1a8be26218247a', 'message': 'BaR: Adding some missing brackets on rear template\n\nAdding some brackets as suggested at\nhttps://github.com/ansible/ansible/issues/64398 to\nbe able to create the /etc/rear/local.conf configuration\n\nChange-Id: Id0487e4649ef1f6aaf2591e003746b385f592095\nCloses-Bug: 1887704\n'}, {'number': 4, 'created': '2020-07-21 16:39:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/8f0f364259aff001e5149cf5eaaf6f7dc9c0a9c1', 'message': 'BaR: Rename duplicated variable\n\nThe backup_and_restore has the same name for a\nfact and a register variable, both of them named the same.\nThat variable is used later on a template (local.conf.j2), which\nis using the register one.\n\nThis patch changes the name of the register variable, so the fact\nis used on the template.\n\nChange-Id: Id0487e4649ef1f6aaf2591e003746b385f592095\nCloses-Bug: 1887704\n'}, {'number': 5, 'created': '2020-07-21 16:42:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3a62d1b91da5197fec5c5407146fe46b7d2db269', 'message': 'BaR: Rename duplicated variable\n\nThe backup_and_restore has the same name for a\nfact and a register variable, both of them named the same.\nThat variable is used later on a template (local.conf.j2), which\nis using the register one.\n\nThis patch changes the name of the register variable, so the fact\nis used on the template.\n\nChange-Id: Id0487e4649ef1f6aaf2591e003746b385f592095\nCloses-Bug: 1888404\n'}, {'number': 6, 'created': '2020-07-21 16:56:06.000000000', 'files': ['tripleo_ansible/roles/backup_and_restore/tasks/setup_rear.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c384348f5586bb5fb47bf59b7bb9e0a61f8178bf', 'message': ""BaR: Deleted duplicated variables\n\nThe backup_and_restore has the same name for a\nfact and a register variable, both of them named the same.\nThat variable is used later on a template (local.conf.j2), which\nis using the register one.\n\nThis patch removed the register variable, as it's not used.\n\nChange-Id: Id0487e4649ef1f6aaf2591e003746b385f592095\nCloses-Bug: 1888404\n""}]",3,742213,c384348f5586bb5fb47bf59b7bb9e0a61f8178bf,20,9,6,22954,,,0,"BaR: Deleted duplicated variables

The backup_and_restore has the same name for a
fact and a register variable, both of them named the same.
That variable is used later on a template (local.conf.j2), which
is using the register one.

This patch removed the register variable, as it's not used.

Change-Id: Id0487e4649ef1f6aaf2591e003746b385f592095
Closes-Bug: 1888404
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/13/742213/6 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/backup_and_restore/templates/local.conf.j2'],1,064fd74f1fc0f09b7dd33c821ea2a6514a3d33b6,bug/1888404,BACKUP_PROG_EXCLUDE=( {{ (tripleo_backup_and_restore_exclude_paths | sum(start=[]) | map('quote')) | join(' ') }} ),BACKUP_PROG_EXCLUDE=( {{ tripleo_backup_and_restore_exclude_paths | sum(start=[]) | map('quote') | join(' ') }} ),1,1
openstack%2Fopenstack-ansible~stable%2Ftrain~I2ffe28560d9034ed1ec37833e76f22713d516df7,openstack/openstack-ansible,stable/train,I2ffe28560d9034ed1ec37833e76f22713d516df7,Bump SHAs for stable/train,MERGED,2020-07-12 15:34:28.000000000,2020-07-22 17:01:25.000000000,2020-07-22 16:59:03.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-12 15:34:28.000000000', 'files': ['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'ansible-role-requirements.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/32bc849b8b1ba337d96a916ac4568fb657296b9b', 'message': 'Bump SHAs for stable/train\n\nChange-Id: I2ffe28560d9034ed1ec37833e76f22713d516df7\n'}]",0,740594,32bc849b8b1ba337d96a916ac4568fb657296b9b,8,3,1,28619,,,0,"Bump SHAs for stable/train

Change-Id: I2ffe28560d9034ed1ec37833e76f22713d516df7
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/94/740594/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'ansible-role-requirements.yml']",4,32bc849b8b1ba337d96a916ac4568fb657296b9b,bump_osa, version: 4ed672e3992f41dc4020ba68b8ea12d657a11710 version: 908b2e2b6b46ae995edf1d4d4b11524c3b7d97ad version: 4225342ab7454e70bb82113eaf2fa8f3e5506fdb version: 6fee93cedd2bb8c41e683b6f460fe4b6173810c3 version: 9e5a7d7fc8b72ad4aa73280a7638b0554cf20d5c version: ab16128506152bdf1b7f68dfaa2017afd9fecb34, version: 51356b811c0ab318572011e638ecdf61cfe3fd71 version: c598325177a7114f9e0a0ef43ebee3c885288bd3 version: 6fce55be2c526be9cf447b2abbf09e7231f884f8 version: ad311180be14d2ac082597bf70e1ccf285263138 version: c755eb300b12ecb659e92375fa0572efec74846f version: eb3f065d03ba45ed147b8154f2750c0e0533e029,52,52
openstack%2Fceilometer~master~I3ec151b8807d0dd3e529bb449d22fa68c8c810ee,openstack/ceilometer,master,I3ec151b8807d0dd3e529bb449d22fa68c8c810ee,Add support to the use of headers in the dynamic pollsters,MERGED,2020-03-26 18:14:21.000000000,2020-07-22 16:55:53.000000000,2020-07-22 16:53:44.000000000,"[{'_account_id': 4264}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 28356}, {'_account_id': 30695}]","[{'number': 1, 'created': '2020-03-26 18:14:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/836a0a1a86a7e83eab22b48e7ce6c68056eb997c', 'message': 'Add support to the use of headers in the dynamic pollsters\n\nDepends-On: https://review.opendev.org/#/c/709807/\nChange-Id: I3ec151b8807d0dd3e529bb449d22fa68c8c810ee\n'}, {'number': 2, 'created': '2020-03-26 22:37:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/696123273665c0654ae337d90885ad32fa578889', 'message': 'Add support to the use of headers in the dynamic pollsters\n\nDepends-On: https://review.opendev.org/#/c/709807/\nChange-Id: I3ec151b8807d0dd3e529bb449d22fa68c8c810ee\n'}, {'number': 3, 'created': '2020-03-27 00:07:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/ccf0df490b48e5155fe80b18f87a211bf2990031', 'message': 'Add support to the use of headers in the dynamic pollsters\n\nDepends-On: https://review.opendev.org/#/c/709807/\nChange-Id: I3ec151b8807d0dd3e529bb449d22fa68c8c810ee\n'}, {'number': 4, 'created': '2020-07-22 03:01:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/139ebe7be4aa7863194e6030ac18af05b166ec1e', 'message': 'Add support to the use of headers in the dynamic pollsters\n\nDepends-On: https://review.opendev.org/#/c/709807/\nChange-Id: I3ec151b8807d0dd3e529bb449d22fa68c8c810ee\n'}, {'number': 5, 'created': '2020-07-22 11:22:36.000000000', 'files': ['doc/source/admin/telemetry-dynamic-pollster.rst', 'ceilometer/polling/dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_dynamic_pollster.py'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/39a534b3f8e745476738bfba98a0f984f730d5e6', 'message': 'Add support to the use of headers in the dynamic pollsters\n\nDepends-On: https://review.opendev.org/#/c/709807/\nChange-Id: I3ec151b8807d0dd3e529bb449d22fa68c8c810ee\n'}]",0,715289,39a534b3f8e745476738bfba98a0f984f730d5e6,22,5,5,28356,,,0,"Add support to the use of headers in the dynamic pollsters

Depends-On: https://review.opendev.org/#/c/709807/
Change-Id: I3ec151b8807d0dd3e529bb449d22fa68c8c810ee
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/89/715289/5 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/telemetry-dynamic-pollster.rst', 'ceilometer/polling/dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_dynamic_pollster.py']",3,836a0a1a86a7e83eab22b48e7ce6c68056eb997c,customHeaders-upstream," def test_create_request_arguments_NonOpenStackApisSamplesGatherer(self): pollster_definition = { 'name': ""test-pollster"", 'sample_type': ""gauge"", 'unit': ""test"", 'value_attribute': ""volume"", 'url_path':""https://test.com/v1/test/endpoint/fake"", ""module"": ""someModule"", ""authentication_object"": ""objectAuthentication"", ""authentication_parameters"": ""authParam"", ""headers"": [{""header1"": ""val1""}, {""header2"": ""val2""}]} pollster = dynamic_pollster.DynamicPollster(pollster_definition) request_args = pollster.definitions.sample_gatherer\ .create_request_arguments() self.assertTrue(""headers"" in request_args) self.assertEqual(2, len(request_args[""headers""])) self.assertEqual(['header1', 'header2'], list(map(lambda h: list(h.keys())[0], request_args[""headers""]))) self.assertEqual(['val1', 'val2'], list(map(lambda h: list(h.values())[0], request_args[""headers""]))) self.assertTrue(""authenticated"" not in request_args) def test_create_request_arguments_PollsterSampleGatherer(self): pollster_definition = copy.deepcopy( self.pollster_definition_only_required_fields) pollster_definition[""headers""] = [ {""x-openstack-nova-api-version"": ""2.46""}, {""custom_header"": ""custom""}, {""some_other_header"": ""something""}] pollster = dynamic_pollster.DynamicPollster(pollster_definition) request_args = pollster.definitions.sample_gatherer\ .create_request_arguments() self.assertTrue(""headers"" in request_args) self.assertTrue(""authenticated"" in request_args) self.assertTrue(request_args[""authenticated""]) self.assertEqual(3, len(request_args[""headers""])) self.assertEqual(['x-openstack-nova-api-version', 'custom_header', ""some_other_header""], list(map(lambda h: list(h.keys())[0], request_args[""headers""]))) self.assertEqual(['2.46', 'custom', 'something'], list(map(lambda h: list(h.values())[0], request_args[""headers""]))) def test_create_request_arguments_PollsterSampleGatherer_no_headers(self): pollster = dynamic_pollster.DynamicPollster( self.pollster_definition_only_required_fields) request_args = pollster.definitions.sample_gatherer\ .create_request_arguments() self.assertTrue(""headers"" not in request_args) self.assertTrue(""authenticated"" in request_args) self.assertTrue(request_args[""authenticated""])",,139,5
openstack%2Fopenstack-ansible~stable%2Fstein~I552500a1765c775b08bb7fbdc39536b7706b3889,openstack/openstack-ansible,stable/stein,I552500a1765c775b08bb7fbdc39536b7706b3889,Bump SHAs for stable/stein,MERGED,2020-07-12 15:34:19.000000000,2020-07-22 16:54:47.000000000,2020-07-22 16:53:29.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-12 15:34:19.000000000', 'files': ['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'ansible-role-requirements.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/099c316b4454ffbc128ba6848e23d51ec85372b6', 'message': 'Bump SHAs for stable/stein\n\nChange-Id: I552500a1765c775b08bb7fbdc39536b7706b3889\n'}]",0,740593,099c316b4454ffbc128ba6848e23d51ec85372b6,8,3,1,28619,,,0,"Bump SHAs for stable/stein

Change-Id: I552500a1765c775b08bb7fbdc39536b7706b3889
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/93/740593/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/defaults/repo_packages/openstack_services.yml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'ansible-role-requirements.yml']",4,099c316b4454ffbc128ba6848e23d51ec85372b6,bump_osa, version: 4ed672e3992f41dc4020ba68b8ea12d657a11710 version: c95cf92d0e30bc12ab72ca04181f0111211bdacc version: f3efb647e3f48d40627a1dd81045ae6db6bb68b8 version: 9e5a7d7fc8b72ad4aa73280a7638b0554cf20d5c version: a16bb2b630a64e7801b79f2c8bb656bb7c14538f, version: 51356b811c0ab318572011e638ecdf61cfe3fd71 version: 918b9077c816be5fc056637301265e0be2f245ab version: 60bfce9173ca10af23edd38d098ed6f61a21ef68 version: c755eb300b12ecb659e92375fa0572efec74846f version: 1cf3a57a6c34709a750c5a228330cecb1c85a1d8,53,53
openstack%2Fcharm-guide~master~I827c64a61b1efeac2f343b63ba5cd8a9c971de18,openstack/charm-guide,master,I827c64a61b1efeac2f343b63ba5cd8a9c971de18,glance-simplestreams-sync,MERGED,2020-07-08 18:26:15.000000000,2020-07-22 16:36:58.000000000,2020-07-22 16:35:08.000000000,"[{'_account_id': 22348}, {'_account_id': 24824}]","[{'number': 1, 'created': '2020-07-08 18:26:15.000000000', 'files': ['doc/source/2008.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/f8b328230b7da3f580d233b537fb26ffb9662868', 'message': 'glance-simplestreams-sync\n\nDetail deployment switch to using snap for simplestreams.\n\nRemoval of support for relation to rabbitmq-server.\n\nChange-Id: I827c64a61b1efeac2f343b63ba5cd8a9c971de18\n'}]",0,740080,f8b328230b7da3f580d233b537fb26ffb9662868,7,2,1,935,,,0,"glance-simplestreams-sync

Detail deployment switch to using snap for simplestreams.

Removal of support for relation to rabbitmq-server.

Change-Id: I827c64a61b1efeac2f343b63ba5cd8a9c971de18
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/80/740080/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/2008.rst'],1,f8b328230b7da3f580d233b537fb26ffb9662868,gss-rmq-support,Glance Simplestreams Sync ~~~~~~~~~~~~~~~~~~~~~~~~~ The glance-simplestreams-sync charm now installs simplestreams as a snap. As such it no longer has a 'source' configuration option - the snapstore channel to use for the snap can be configured using the 'channel' option. Glance Simplestreams Sync ~~~~~~~~~~~~~~~~~~~~~~~~~ The glance-simplestreams-sync charm no longer supports deployment with the rabbitmq-server charm. Bundles which specify this relation will need to be updated. ,,14,0
openstack%2Frequirements~stable%2Fstein~Icfa6029688063b7dfed5d08bd009eb5a8106182b,openstack/requirements,stable/stein,Icfa6029688063b7dfed5d08bd009eb5a8106182b,update constraint for castellan to new release 1.2.3,MERGED,2020-07-20 09:38:55.000000000,2020-07-22 16:35:10.000000000,2020-07-22 16:35:09.000000000,"[{'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-20 09:38:55.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/d2080357ed432c3b82441fb723b251cca79b96db', 'message': 'update constraint for castellan to new release 1.2.3\n\nChange-Id: Icfa6029688063b7dfed5d08bd009eb5a8106182b\nmeta:version: 1.2.3\nmeta:diff-start: -\nmeta:series: stein\nmeta:release-type: release\nmeta:pypi: no\nmeta:first: no\nmeta:release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Change-Id: Ifdd08c9f3457470c6fc0a142c10982bcbfb0450e\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n'}]",0,741898,d2080357ed432c3b82441fb723b251cca79b96db,16,3,1,11131,,,0,"update constraint for castellan to new release 1.2.3

Change-Id: Icfa6029688063b7dfed5d08bd009eb5a8106182b
meta:version: 1.2.3
meta:diff-start: -
meta:series: stein
meta:release-type: release
meta:pypi: no
meta:first: no
meta:release:Author: Hervé Beraud <hberaud@redhat.com>
meta:release:Commit: Hervé Beraud <hberaud@redhat.com>
meta:release:Change-Id: Ifdd08c9f3457470c6fc0a142c10982bcbfb0450e
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/98/741898/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,d2080357ed432c3b82441fb723b251cca79b96db,new-release,castellan===1.2.3,castellan===1.2.2,1,1
openstack%2Fironic~master~I6840b1caffd272ef12ab2b259a02376ec185bc3f,openstack/ironic,master,I6840b1caffd272ef12ab2b259a02376ec185bc3f,Use native oslo.concurrency execution timeout in ipmitool,MERGED,2020-06-30 12:05:34.000000000,2020-07-22 16:28:40.000000000,2020-07-22 15:58:19.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 21909}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-06-30 12:05:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8ccf039fb9243f51e17c5840adb1de708337bce5', 'message': '[WIP] Use native oslo.concurrency execution timeout in ipmitool\n\nChange-Id: I6840b1caffd272ef12ab2b259a02376ec185bc3f\n'}, {'number': 2, 'created': '2020-07-06 12:52:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/79133fbf1338e65b41d78f5f281d0d34a6f27b37', 'message': '[WIP] Use native oslo.concurrency execution timeout in ipmitool\n\nThis change replaces custom Popen-based code with the new argument\n(backed by the corresponding stdlib argument).\n\nChange-Id: I6840b1caffd272ef12ab2b259a02376ec185bc3f\n'}, {'number': 3, 'created': '2020-07-06 16:36:21.000000000', 'files': ['requirements.txt', 'ironic/drivers/modules/ipmitool.py', 'lower-constraints.txt', 'ironic/tests/unit/drivers/modules/test_ipmitool.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/737076fae20c6a49e245de546c3de6110ec3cc28', 'message': 'Use native oslo.concurrency execution timeout in ipmitool\n\nThis change replaces custom Popen-based code with the new argument\n(backed by the corresponding stdlib argument).\n\nStory: #2004449\nTask: #40283\nChange-Id: I6840b1caffd272ef12ab2b259a02376ec185bc3f\n'}]",0,738591,737076fae20c6a49e245de546c3de6110ec3cc28,53,8,3,10239,,,0,"Use native oslo.concurrency execution timeout in ipmitool

This change replaces custom Popen-based code with the new argument
(backed by the corresponding stdlib argument).

Story: #2004449
Task: #40283
Change-Id: I6840b1caffd272ef12ab2b259a02376ec185bc3f
",git fetch https://review.opendev.org/openstack/ironic refs/changes/91/738591/3 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'ironic/drivers/modules/ipmitool.py', 'lower-constraints.txt']",3,8ccf039fb9243f51e17c5840adb1de708337bce5,ipmitool-timeout,oslo.concurrency==4.2.0,oslo.concurrency==3.26.0,7,37
openstack%2Fglance~master~I511bed6057763227c0065fdc28c40143c27e7efa,openstack/glance,master,I511bed6057763227c0065fdc28c40143c27e7efa,Update bandit usage in tests,ABANDONED,2017-11-01 16:19:59.000000000,2020-07-22 16:28:22.000000000,,"[{'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 27882}]","[{'number': 1, 'created': '2017-11-01 16:19:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/81cdf047603acd8ca7294f3dc6376366a58588b8', 'message': 'Update bandit usage in tests\n\nthis patch replaces legacy bandit configuration file with what\ncurrent bandit versions are expecting, and adapts bandit invokations\nin tox environments accordingly.\n\nThe explicit list of tests to run was replaced with list of tests to\nskip, trying to keep the comments to reasons of skipping.\n\nAlso, bandit tox environment is not explicitly defined to allow\nfaster runs by not installing glance and all of it requirements.\n\nChange-Id: I511bed6057763227c0065fdc28c40143c27e7efa\n'}, {'number': 2, 'created': '2017-11-01 17:57:54.000000000', 'files': ['bandit.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/glance/commit/213b803daa2370af12923556055eddc65857ce3d', 'message': 'Update bandit usage in tests\n\nthis patch replaces legacy bandit configuration file with what\ncurrent bandit versions are expecting, and adapts bandit invokations\nin tox environments accordingly.\n\nThe explicit list of tests to run was replaced with list of tests to\nskip, trying to keep the comments to reasons of skipping.\n\nAlso, bandit tox environment is not explicitly defined to allow\nfaster runs by not installing glance and all of it requirements.\n\nChange-Id: I511bed6057763227c0065fdc28c40143c27e7efa\n'}]",0,517033,213b803daa2370af12923556055eddc65857ce3d,7,3,2,9542,,,0,"Update bandit usage in tests

this patch replaces legacy bandit configuration file with what
current bandit versions are expecting, and adapts bandit invokations
in tox environments accordingly.

The explicit list of tests to run was replaced with list of tests to
skip, trying to keep the comments to reasons of skipping.

Also, bandit tox environment is not explicitly defined to allow
faster runs by not installing glance and all of it requirements.

Change-Id: I511bed6057763227c0065fdc28c40143c27e7efa
",git fetch https://review.opendev.org/openstack/glance refs/changes/33/517033/2 && git format-patch -1 --stdout FETCH_HEAD,"['bandit.yaml', 'tox.ini']",2,81cdf047603acd8ca7294f3dc6376366a58588b8,bandit-tox, bandit -c bandit.yaml -r glance -n5 -x tests[testenv:bandit] usedevelop = False commands = bandit -c bandit.yaml -r glance -n5 -x tests {posargs} , bandit: bandit -c bandit.yaml -r glance -n5 -p gate bandit -c bandit.yaml -r glance -n5 -p gate,34,236
openstack%2Fpython-openstackclient~stable%2Fstein~I9e96d2978912c8dfeadae4a782c481a17cd7e348,openstack/python-openstackclient,stable/stein,I9e96d2978912c8dfeadae4a782c481a17cd7e348,Stop silently ignoring invalid 'server create --hint' options,MERGED,2020-02-19 13:32:54.000000000,2020-07-22 16:17:09.000000000,2020-07-22 16:09:46.000000000,"[{'_account_id': 2}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-02-19 13:32:54.000000000', 'files': ['openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/38e1274f478219bee8899b6c9eaa09dbfd03bbcd', 'message': 'Stop silently ignoring invalid \'server create --hint\' options\n\nThe \'--hint\' option for \'server create\' expects a key-value pair like so:\n\n  openstack server create --hint group=245e1dfe-2d0e-4139-80a9-fce124948896 ...\n\nHowever, the command doesn\'t complain if this isn\'t the case, meaning\ntypos like the below aren\'t indicated to the user:\n\n  openstack server create --hint 245e1dfe-2d0e-4139-80a9-fce124948896\n\nDue to how we\'d implemented this here, this ultimately results in us\nPOSTing the following as part of the body to \'os-servers\':\n\n  {\n    ...\n    ""OS-SCH-HNT:scheduler_hints"": {\n      ""245e1dfe-2d0e-4139-80a9-fce124948896"": null\n    }\n    ...\n  }\n\nWhich is unfortunately allowed and ignored by nova due to the use of\n\'additionalProperties\' in the schema [1]\n\nDo what we do for loads of other options and explicitly fail on invalid\nvalues. This involves adding a new argparse action since none of those\ndefined in osc-lib work for us. This is included here to ease\nbackporting of the fix but will be moved to osc-lib in a future patch.\n\nConflicts:\n\topenstackclient/tests/unit/compute/v2/test_server.py\n\nNOTE(stephenfin): Conflicts are due to the absence of tests for changes\nIc06d97b29e51828b29d7ac5172645c288e4ada9e (""Compute: Add description\nsupport for server"") and If188c3d96fa506dbe62ef256418f2f9bca1520c2 (""Add\nhost and hypervisor_hostname to create servers""), neither of which we\nwant to backport.\n\n[1] https://github.com/openstack/nova/blob/19.0.0/nova/api/openstack/compute/schemas/servers.py#L142-L146\n\nChange-Id: I9e96d2978912c8dfeadae4a782c481a17cd7e348\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nStory: #2006628\nTask: #36840\nRelated-Bug: #1845322\n(cherry picked from commit ea27ebb0f918db9eab2f5751a1b065818faa0e6d)\n(cherry picked from commit 576d9ecfd0ac27611ec89af6d34e7378b7a39fb3)\n'}]",0,708652,38e1274f478219bee8899b6c9eaa09dbfd03bbcd,9,6,1,15334,,,0,"Stop silently ignoring invalid 'server create --hint' options

The '--hint' option for 'server create' expects a key-value pair like so:

  openstack server create --hint group=245e1dfe-2d0e-4139-80a9-fce124948896 ...

However, the command doesn't complain if this isn't the case, meaning
typos like the below aren't indicated to the user:

  openstack server create --hint 245e1dfe-2d0e-4139-80a9-fce124948896

Due to how we'd implemented this here, this ultimately results in us
POSTing the following as part of the body to 'os-servers':

  {
    ...
    ""OS-SCH-HNT:scheduler_hints"": {
      ""245e1dfe-2d0e-4139-80a9-fce124948896"": null
    }
    ...
  }

Which is unfortunately allowed and ignored by nova due to the use of
'additionalProperties' in the schema [1]

Do what we do for loads of other options and explicitly fail on invalid
values. This involves adding a new argparse action since none of those
defined in osc-lib work for us. This is included here to ease
backporting of the fix but will be moved to osc-lib in a future patch.

Conflicts:
	openstackclient/tests/unit/compute/v2/test_server.py

NOTE(stephenfin): Conflicts are due to the absence of tests for changes
Ic06d97b29e51828b29d7ac5172645c288e4ada9e (""Compute: Add description
support for server"") and If188c3d96fa506dbe62ef256418f2f9bca1520c2 (""Add
host and hypervisor_hostname to create servers""), neither of which we
want to backport.

[1] https://github.com/openstack/nova/blob/19.0.0/nova/api/openstack/compute/schemas/servers.py#L142-L146

Change-Id: I9e96d2978912c8dfeadae4a782c481a17cd7e348
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Story: #2006628
Task: #36840
Related-Bug: #1845322
(cherry picked from commit ea27ebb0f918db9eab2f5751a1b065818faa0e6d)
(cherry picked from commit 576d9ecfd0ac27611ec89af6d34e7378b7a39fb3)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/52/708652/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py']",2,38e1274f478219bee8899b6c9eaa09dbfd03bbcd,bug/1845322,"# TODO(stephenfin): Migrate this to osc-lib class KeyValueAppendAction(argparse.Action): """"""A custom action to parse arguments as key=value pairs Ensures that ``dest`` is a dict and values are lists of strings. """""" def __call__(self, parser, namespace, values, option_string=None): # Make sure we have an empty dict rather than None if getattr(namespace, self.dest, None) is None: setattr(namespace, self.dest, {}) # Add value if an assignment else remove it if '=' in values: key, value = values.split('=', 1) # NOTE(qtang): Prevent null key setting in property if '' == key: msg = _(""Property key must be specified: %s"") raise argparse.ArgumentTypeError(msg % str(values)) dest = getattr(namespace, self.dest) if key in dest: dest[key].append(value) else: dest[key] = [value] else: msg = _(""Expected 'key=value' type, but got: %s"") raise argparse.ArgumentTypeError(msg % str(values)) action=KeyValueAppendAction, default={}, for key, values in parsed_args.hint.items(): # only items with multiple values will result in a list if len(values) == 1: hints[key] = values[0] else: hints[key] = values"," action='append', default=[], for hint in parsed_args.hint: key, _sep, value = hint.partition('=') # NOTE(vish): multiple copies of the same hint will # result in a list of values if key in hints: if isinstance(hints[key], six.string_types): hints[key] = [hints[key]] hints[key] += [value] else: hints[key] = value",61,12
openstack%2Fbifrost~master~I3839e9930511ff2d3a6b69bef5ae898d92a21ff1,openstack/bifrost,master,I3839e9930511ff2d3a6b69bef5ae898d92a21ff1,Disable keystone account locking by default,MERGED,2020-07-22 14:55:56.000000000,2020-07-22 16:14:40.000000000,2020-07-22 16:08:46.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-07-22 14:55:56.000000000', 'files': ['releasenotes/notes/keystone-lockout-c8a26a09e0f0560b.yaml', 'playbooks/roles/bifrost-keystone-install/templates/keystone.conf.j2', 'playbooks/roles/bifrost-keystone-install/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/716f0feb2f57415c14a47e087328c603138d3671', 'message': 'Disable keystone account locking by default\n\nIt provides an easy to exploit DoS opportunity.\n\nChange-Id: I3839e9930511ff2d3a6b69bef5ae898d92a21ff1\n'}]",0,742456,716f0feb2f57415c14a47e087328c603138d3671,8,3,1,10239,,,0,"Disable keystone account locking by default

It provides an easy to exploit DoS opportunity.

Change-Id: I3839e9930511ff2d3a6b69bef5ae898d92a21ff1
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/56/742456/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/keystone-lockout-c8a26a09e0f0560b.yaml', 'playbooks/roles/bifrost-keystone-install/templates/keystone.conf.j2', 'playbooks/roles/bifrost-keystone-install/defaults/main.yml']",3,716f0feb2f57415c14a47e087328c603138d3671,lockout-attempts,keystone_lockout_security_attempts: -1 keystone_lockout_duration: 1800 ,,19,1
openstack%2Fos-brick~stable%2Fussuri~I55bc70437d41da3a32b8440d00c139805b8be256,openstack/os-brick,stable/ussuri,I55bc70437d41da3a32b8440d00c139805b8be256,rbd: Support 'rbd showmapped' output from ceph 13.2.0+,MERGED,2020-06-26 16:22:37.000000000,2020-07-22 16:03:52.000000000,2020-07-22 16:00:45.000000000,"[{'_account_id': 4523}, {'_account_id': 5314}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 12369}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 27710}]","[{'number': 1, 'created': '2020-06-26 16:22:37.000000000', 'files': ['os_brick/tests/initiator/connectors/test_rbd.py', 'releasenotes/notes/bug-1884052-798094496dccf23c.yaml', 'os_brick/initiator/connectors/rbd.py'], 'web_link': 'https://opendev.org/openstack/os-brick/commit/bf0faeaea4626f7dee37a672da7e3f175b958086', 'message': ""rbd: Support 'rbd showmapped' output from ceph 13.2.0+\n\nCeph 13.2.0 changed [1] the JSON and XML output format for the 'rbd\nshowmapped' command, from a object keyed by device ID to a list of\ndevice objects. Handle this change.\n\nChange-Id: I55bc70437d41da3a32b8440d00c139805b8be256\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1884052\n(cherry picked from commit a87ef7bbabc80bf7f2d078764986aea2cbb90aa5)\n""}]",0,738235,bf0faeaea4626f7dee37a672da7e3f175b958086,16,9,1,15334,,,0,"rbd: Support 'rbd showmapped' output from ceph 13.2.0+

Ceph 13.2.0 changed [1] the JSON and XML output format for the 'rbd
showmapped' command, from a object keyed by device ID to a list of
device objects. Handle this change.

Change-Id: I55bc70437d41da3a32b8440d00c139805b8be256
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Closes-Bug: #1884052
(cherry picked from commit a87ef7bbabc80bf7f2d078764986aea2cbb90aa5)
",git fetch https://review.opendev.org/openstack/os-brick refs/changes/35/738235/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_brick/tests/initiator/connectors/test_rbd.py', 'releasenotes/notes/bug-1884052-798094496dccf23c.yaml', 'os_brick/initiator/connectors/rbd.py']",3,bf0faeaea4626f7dee37a672da7e3f175b958086,bug/1884052," # ceph v13.2.0 (Mimic) changed the output format of 'rbd showmapped' # from a dict of mappings keyed by ID to a simple list of mappings # https://docs.ceph.com/docs/master/releases/mimic/ # # before: # # { # ""0"": { # ""pool"":""volumes"", # ""namespace"":"""", # ""name"":""volume-6d54cb90-a5d1-40d8-9cb2-c6adf43a02af"", # ""snap"":""-"", # ""device"":""/dev/rbd0"" # } # } # # after: # # [ # { # ""id"":""0"", # ""pool"":""volumes"", # ""namespace"":"""", # ""name"":""volume-6d54cb90-a5d1-40d8-9cb2-c6adf43a02af"", # ""snap"":""-"", # ""device"":""/dev/rbd0"" # } # ] # # TODO(stephenfin): Drop when we drop support for ceph 13.2.0 mappings = jsonutils.loads(out) if isinstance(mappings, dict): # yes, we're losing the ID field but we don't need it here mappings = mappings.values() for mapping in mappings:"," for index, mapping in jsonutils.loads(out).items():",55,6
openstack%2Fopenstack-helm-infra~master~Ib0d54f9e40c65eaaede788000c822871f1232196,openstack/openstack-helm-infra,master,Ib0d54f9e40c65eaaede788000c822871f1232196,Allow to override default path in ingress template,ABANDONED,2020-07-21 09:25:43.000000000,2020-07-22 16:01:00.000000000,,"[{'_account_id': 14525}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 09:25:43.000000000', 'files': ['helm-toolkit/templates/manifests/_ingress.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/62dea07eee3821624d1a86ee960cea8b6d596cf4', 'message': 'Allow to override default path in ingress template\n\nThe patch adds ability to override default path / for cluster and namespace\ningress fqdns. It will allow to use path based public endpoints\ninstead of host based (for example mydomain.com/identity). It will allow to\ndo not change SSL certificate when adding new services to existed deployment.\n\nRelated-Prod: PRODX-5855\nChange-Id: Ib0d54f9e40c65eaaede788000c822871f1232196\n'}]",0,742109,62dea07eee3821624d1a86ee960cea8b6d596cf4,6,2,1,14525,,,0,"Allow to override default path in ingress template

The patch adds ability to override default path / for cluster and namespace
ingress fqdns. It will allow to use path based public endpoints
instead of host based (for example mydomain.com/identity). It will allow to
do not change SSL certificate when adding new services to existed deployment.

Related-Prod: PRODX-5855
Change-Id: Ib0d54f9e40c65eaaede788000c822871f1232196
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/09/742109/1 && git format-patch -1 --stdout FETCH_HEAD,['helm-toolkit/templates/manifests/_ingress.tpl'],1,62dea07eee3821624d1a86ee960cea8b6d596cf4,upstr,"{{- $endpointPath := index . ""endpointPath"" | default ""/"" -}} - path: {{ $endpointPath }}{{- $endpointPath := tuple $backendServiceType $endpoint $backendService $envAll | include ""helm-toolkit.endpoints.keystone_endpoint_path_lookup"" }}{{- $hostNameFullRules := dict ""vHost"" $hostNameFull ""backendName"" $backendName ""backendPort"" $backendPort ""endpointPath"" $endpointPath }}"," - path: /{{- $hostNameFullRules := dict ""vHost"" $hostNameFull ""backendName"" $backendName ""backendPort"" $backendPort }}",4,2
openstack%2Fironic~stable%2Ftrain~I9813925c7d9b27696cef45c27d93a2e0433a1c15,openstack/ironic,stable/train,I9813925c7d9b27696cef45c27d93a2e0433a1c15,"Revert ""redfish: handle hardware that is unable to set persistent boot""",ABANDONED,2020-06-01 10:53:36.000000000,2020-07-22 15:56:08.000000000,,"[{'_account_id': 7160}, {'_account_id': 10239}, {'_account_id': 10250}, {'_account_id': 10379}, {'_account_id': 11655}, {'_account_id': 14629}, {'_account_id': 14826}, {'_account_id': 15519}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23847}, {'_account_id': 23851}, {'_account_id': 27909}, {'_account_id': 31616}, {'_account_id': 31636}]","[{'number': 1, 'created': '2020-06-01 10:53:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/3a9deee709af7905ef0ffedf735e51c7c04064a2', 'message': 'Revert ""redfish: handle hardware that is unable to set persistent boot""\n\nThis reverts commit f2eac72e888595615bd0fd79648c538bb889be5f.\n\nDue to how imports and module loading works the original patch made installed sushy lib a requirement for any enabled drac driver, not only the redfish one. This may cause problems on upgrade to latest train in envs that use non-redfish drac drivers and do not have sushy installed.\n\nChange-Id: I9813925c7d9b27696cef45c27d93a2e0433a1c15\n'}, {'number': 2, 'created': '2020-06-01 11:00:13.000000000', 'files': ['ironic/drivers/modules/redfish/power.py', 'ironic/tests/unit/drivers/modules/redfish/test_power.py', 'ironic/drivers/modules/redfish/management.py', 'ironic/tests/unit/drivers/modules/redfish/test_management.py', 'ironic/common/utils.py', 'releasenotes/notes/redfish-sadness-6e2a37b3f45ef1aa.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/d059d0b02e427f783c1028a81eaa17d9fdc205b4', 'message': 'Revert ""redfish: handle hardware that is unable to set persistent boot""\n\nThis reverts commit f2eac72e888595615bd0fd79648c538bb889be5f.\n\nDue to how imports and module loading works the original patch\nmade installed sushy lib a requirement for any enabled drac driver,\nnot only the redfish one.\n\nThis may cause problems on upgrade to latest train in envs that use\nnon-redfish drac drivers and do not have sushy installed.\n\nChange-Id: I9813925c7d9b27696cef45c27d93a2e0433a1c15\n'}]",1,732158,d059d0b02e427f783c1028a81eaa17d9fdc205b4,10,15,2,9542,,,0,"Revert ""redfish: handle hardware that is unable to set persistent boot""

This reverts commit f2eac72e888595615bd0fd79648c538bb889be5f.

Due to how imports and module loading works the original patch
made installed sushy lib a requirement for any enabled drac driver,
not only the redfish one.

This may cause problems on upgrade to latest train in envs that use
non-redfish drac drivers and do not have sushy installed.

Change-Id: I9813925c7d9b27696cef45c27d93a2e0433a1c15
",git fetch https://review.opendev.org/openstack/ironic refs/changes/58/732158/2 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/drivers/modules/redfish/power.py', 'ironic/drivers/modules/redfish/management.py', 'ironic/tests/unit/drivers/modules/redfish/test_power.py', 'ironic/tests/unit/drivers/modules/redfish/test_management.py', 'ironic/common/utils.py', 'releasenotes/notes/redfish-sadness-6e2a37b3f45ef1aa.yaml']",6,3a9deee709af7905ef0ffedf735e51c7c04064a2,redfish-sadness-stable/train,,"--- fixes: - | Provides a workaround for hardware that does not support persistent boot device setting with the ``redfish`` hardware type. When such situation is detected, ironic will fall back to one-time boot device setting, restoring it on every reboot. issues: - | Some redfish-enabled hardware is known not to support persistent boot device setting that is used by the Bare Metal service for deployed instances. The ``redfish`` hardware type tries to work around this problem, but rebooting such an instance in-band may cause it to boot incorrectly. A predictable boot order should be configured in the node's boot firmware to avoid issues and at least metadata cleaning must be enabled. See `this mailing list thread <http://lists.openstack.org/pipermail/openstack-discuss/2020-April/014543.html>`_ for technical details. ",24,258
openstack%2Fkolla-ansible~master~I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc,openstack/kolla-ansible,master,I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc,Make /dev/kvm permissions handling more robust,MERGED,2020-06-13 19:06:44.000000000,2020-07-22 15:54:17.000000000,2020-07-22 12:32:39.000000000,"[{'_account_id': 167}, {'_account_id': 14826}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23717}, {'_account_id': 24072}, {'_account_id': 30491}, {'_account_id': 30523}]","[{'number': 1, 'created': '2020-06-13 19:06:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/ed525b96118301c351e547c12f44b21ed3449372', 'message': 'Make /dev/kvm permissions handling more robust\n\nThis makes use of udev rules to make it smarter and override\nhost-level packages settings.\nAdditionally, this masks Ubuntu-only service that is another\npain point in terms of /dev/kvm permissions.\nFingers crossed for no further surprises.\n\nChange-Id: I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc\nCloses-bug: #1681461\n'}, {'number': 2, 'created': '2020-06-14 10:07:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/5bc9837603fbc5416f62fc85aef4de0859767726', 'message': 'Make /dev/kvm permissions handling more robust\n\nThis makes use of udev rules to make it smarter and override\nhost-level packages settings.\nAdditionally, this masks Ubuntu-only service that is another\npain point in terms of /dev/kvm permissions.\nFingers crossed for no further surprises.\n\nChange-Id: I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc\nCloses-bug: #1681461\n'}, {'number': 3, 'created': '2020-07-17 16:55:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6af21667d6189c9aed650fee73fa8f3745f621e5', 'message': 'Make /dev/kvm permissions handling more robust\n\nThis makes use of udev rules to make it smarter and override\nhost-level packages settings.\nAdditionally, this masks Ubuntu-only service that is another\npain point in terms of /dev/kvm permissions.\nFingers crossed for no further surprises.\n\nChange-Id: I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc\nCloses-bug: #1681461\n'}, {'number': 4, 'created': '2020-07-17 17:09:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c5b27eedf48cb77cf054b7ccefe9a6f3f651d80c', 'message': 'Make /dev/kvm permissions handling more robust\n\nThis makes use of udev rules to make it smarter and override\nhost-level packages settings.\nAdditionally, this masks Ubuntu-only service that is another\npain point in terms of /dev/kvm permissions.\nFingers crossed for no further surprises.\n\nChange-Id: I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc\nCloses-bug: #1681461\n'}, {'number': 5, 'created': '2020-07-17 17:51:18.000000000', 'files': ['ansible/roles/nova-cell/defaults/main.yml', 'releasenotes/notes/bug-1681461-761f0cdf71bcb962.yaml', 'ansible/roles/nova-cell/templates/99-kolla-kvm.rules.j2', 'ansible/roles/nova-cell/tasks/config-host.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/202365e70213fe7f23d1d618789e356e24ed0679', 'message': 'Make /dev/kvm permissions handling more robust\n\nThis makes use of udev rules to make it smarter and override\nhost-level packages settings.\nAdditionally, this masks Ubuntu-only service that is another\npain point in terms of /dev/kvm permissions.\nFingers crossed for no further surprises.\n\nChange-Id: I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc\nCloses-bug: #1681461\n'}]",5,735441,202365e70213fe7f23d1d618789e356e24ed0679,31,9,5,30491,,,0,"Make /dev/kvm permissions handling more robust

This makes use of udev rules to make it smarter and override
host-level packages settings.
Additionally, this masks Ubuntu-only service that is another
pain point in terms of /dev/kvm permissions.
Fingers crossed for no further surprises.

Change-Id: I61235b51e2e1325b8a9b4f85bf634f663c7ec3cc
Closes-bug: #1681461
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/41/735441/5 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/nova-cell/defaults/main.yml', 'releasenotes/notes/bug-1681461-761f0cdf71bcb962.yaml', 'ansible/roles/nova-cell/templates/99-kolla-kvm.rules.j2', 'ansible/roles/nova-cell/tasks/config-host.yml']",4,ed525b96118301c351e547c12f44b21ed3449372,bug/1681461," # NOTE(yoctozepto): Part of bug #1681461 fix. # This part can actually run on any distro and lets us drop the hardcoded # chown and chmod from the nova-libvirt image extend_start and make the process # more robust. - name: Install udev kolla kvm rules become: true template: src: ""99-kolla-kvm.rules.j2"" dest: ""/etc/udev/rules.d/99-kolla-kvm.rules"" mode: ""0644"" when: - nova_compute_virt_type == 'kvm' - inventory_hostname in groups[nova_cell_compute_group] # NOTE(yoctozepto): Part of bug #1681461 fix. # This part only really makes sense on Ubuntu and would end up being confusing # on others. This service changes /dev/kvm permissions. - name: Mask qemu-kvm service become: true systemd: name: qemu-kvm.service masked: true when: - nova_compute_virt_type == 'kvm' - ansible_distribution == 'Ubuntu' - inventory_hostname in groups[nova_cell_compute_group]",,42,0
openstack%2Fkolla-ansible~master~I779c2b942d007acbdd43d999f2fc0cdc131d431f,openstack/kolla-ansible,master,I779c2b942d007acbdd43d999f2fc0cdc131d431f,"Fix fluentd warnings caused by ""type copy""",MERGED,2020-07-21 12:36:54.000000000,2020-07-22 15:51:37.000000000,2020-07-22 12:35:38.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-07-21 12:36:54.000000000', 'files': ['ansible/roles/common/templates/conf/output/00-local.conf.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/5b057812416c0c055c57352ca6f1f7964b046428', 'message': 'Fix fluentd warnings caused by ""type copy""\n\nA ""@type copy"" statement is already present at the beginning of each\nmatch element, so extra ""type copy"" are not needed. They are causing the\nfollowing warnings in fluentd logs:\n\n[warn]: parameter \'type\' in <match syslog.local0.**>\n[warn]: parameter \'type\' in <match syslog.local1.**>\n\nThis commit also harmonizes indentation of the Monasca config block.\n\nChange-Id: I779c2b942d007acbdd43d999f2fc0cdc131d431f\nRelated-Bug: #1885873\n'}]",1,742172,5b057812416c0c055c57352ca6f1f7964b046428,10,3,1,15197,,,0,"Fix fluentd warnings caused by ""type copy""

A ""@type copy"" statement is already present at the beginning of each
match element, so extra ""type copy"" are not needed. They are causing the
following warnings in fluentd logs:

[warn]: parameter 'type' in <match syslog.local0.**>
[warn]: parameter 'type' in <match syslog.local1.**>

This commit also harmonizes indentation of the Monasca config block.

Change-Id: I779c2b942d007acbdd43d999f2fc0cdc131d431f
Related-Bug: #1885873
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/72/742172/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/common/templates/conf/output/00-local.conf.j2'],1,5b057812416c0c055c57352ca6f1f7964b046428,fluentd-warnings, <store> @type monasca keystone_url {{ keystone_internal_url }} monasca_api {{ internal_protocol }}://{{ kolla_internal_fqdn | put_address_in_context('url') }}:{{ monasca_log_api_port }} monasca_api_version v2.0 username {{ monasca_agent_user }} password {{ monasca_agent_password }} domain_id default project_name {{ monasca_control_plane_project }} message_field_name Payload buffer_type file buffer_path /var/lib/fluentd/data/monasca.buffer/{{ syslog_swift_facility }}.* max_retry_wait 1800s disable_retry_limit true <buffer> chunk_limit_size 8m </buffer> </store> <store> @type monasca keystone_url {{ keystone_internal_url }} monasca_api {{ internal_protocol }}://{{ kolla_internal_fqdn | put_address_in_context('url') }}:{{ monasca_log_api_port }} monasca_api_version v2.0 username {{ monasca_agent_user }} password {{ monasca_agent_password }} domain_id default project_name {{ monasca_control_plane_project }} message_field_name Payload buffer_type file buffer_path /var/lib/fluentd/data/monasca.buffer/{{ syslog_haproxy_facility }}.* max_retry_wait 1800s disable_retry_limit true <buffer> chunk_limit_size 8m </buffer> </store> <store> @type monasca keystone_url {{ keystone_internal_url }} monasca_api {{ internal_protocol }}://{{ kolla_internal_fqdn | put_address_in_context('url') }}:{{ monasca_log_api_port }} monasca_api_version v2.0 username {{ monasca_agent_user }} password {{ monasca_agent_password }} domain_id default project_name {{ monasca_control_plane_project }} message_field_name Payload buffer_type file buffer_path /var/lib/fluentd/data/monasca.buffer/{{ syslog_glance_tls_proxy_facility }}.* max_retry_wait 1800s disable_retry_limit true <buffer> chunk_limit_size 8m </buffer> </store>, type copy <store> @type monasca keystone_url {{ keystone_internal_url }} monasca_api {{ internal_protocol }}://{{ kolla_internal_fqdn | put_address_in_context('url') }}:{{ monasca_log_api_port }} monasca_api_version v2.0 username {{ monasca_agent_user }} password {{ monasca_agent_password }} domain_id default project_name {{ monasca_control_plane_project }} message_field_name Payload buffer_type file buffer_path /var/lib/fluentd/data/monasca.buffer/{{ syslog_swift_facility }}.* max_retry_wait 1800s disable_retry_limit true <buffer> chunk_limit_size 8m </buffer> </store> type copy <store> @type monasca keystone_url {{ keystone_internal_url }} monasca_api {{ internal_protocol }}://{{ kolla_internal_fqdn | put_address_in_context('url') }}:{{ monasca_log_api_port }} monasca_api_version v2.0 username {{ monasca_agent_user }} password {{ monasca_agent_password }} domain_id default project_name {{ monasca_control_plane_project }} message_field_name Payload buffer_type file buffer_path /var/lib/fluentd/data/monasca.buffer/{{ syslog_haproxy_facility }}.* max_retry_wait 1800s disable_retry_limit true <buffer> chunk_limit_size 8m </buffer> </store> type copy <store> @type monasca keystone_url {{ keystone_internal_url }} monasca_api {{ internal_protocol }}://{{ kolla_internal_fqdn | put_address_in_context('url') }}:{{ monasca_log_api_port }} monasca_api_version v2.0 username {{ monasca_agent_user }} password {{ monasca_agent_password }} domain_id default project_name {{ monasca_control_plane_project }} message_field_name Payload buffer_type file buffer_path /var/lib/fluentd/data/monasca.buffer/{{ syslog_glance_tls_proxy_facility }}.* max_retry_wait 1800s disable_retry_limit true <buffer> chunk_limit_size 8m </buffer> </store>,54,57
openstack%2Fironic~stable%2Ftrain~Idde2891b2f15190f327e4298131a6069c58163c0,openstack/ironic,stable/train,Idde2891b2f15190f327e4298131a6069c58163c0,Stop running test_schedule_to_all_nodes in the multinode job,MERGED,2020-07-21 14:53:07.000000000,2020-07-22 15:50:08.000000000,2020-07-22 15:43:18.000000000,"[{'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-07-21 14:53:07.000000000', 'files': ['zuul.d/ironic-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/2b5759ef20070204e048bc177dcb510f5df5c636', 'message': ""Stop running test_schedule_to_all_nodes in the multinode job\n\nAfter the recent changes we're running 5 tests already, some of them\nusing several VMs. This should cover scheduling to different conductors\nwell enough, the nova test just adds random failures on top.\n\nThis allows reducing the number of test VMs to 3 per testing node\n(6 totally), reducing the resource pressure and allowing giving\neach VM a bit more RAM.\n\nAlso adding missing VM_SPECS_DISK to the subnode configuration.\n\nConflicts:\n\tzuul.d/ironic-jobs.yaml\n\nThe Train backport also reduces concurrency to match master.\n\nChange-Id: Idde2891b2f15190f327e4298131a6069c58163c0\n(cherry picked from commit 1cb1df76d96810b0cb4204cb54503b83532ef7c9)\n""}]",0,742215,2b5759ef20070204e048bc177dcb510f5df5c636,11,3,1,10239,,,0,"Stop running test_schedule_to_all_nodes in the multinode job

After the recent changes we're running 5 tests already, some of them
using several VMs. This should cover scheduling to different conductors
well enough, the nova test just adds random failures on top.

This allows reducing the number of test VMs to 3 per testing node
(6 totally), reducing the resource pressure and allowing giving
each VM a bit more RAM.

Also adding missing VM_SPECS_DISK to the subnode configuration.

Conflicts:
	zuul.d/ironic-jobs.yaml

The Train backport also reduces concurrency to match master.

Change-Id: Idde2891b2f15190f327e4298131a6069c58163c0
(cherry picked from commit 1cb1df76d96810b0cb4204cb54503b83532ef7c9)
",git fetch https://review.opendev.org/openstack/ironic refs/changes/15/742215/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/ironic-jobs.yaml'],1,2b5759ef20070204e048bc177dcb510f5df5c636,," tempest_concurrency: 3 tempest_test_regex: ""ironic_tempest_plugin.tests.scenario"" IRONIC_VM_COUNT: 3 IRONIC_VM_SPECS_RAM: 512 IRONIC_VM_COUNT: 3 IRONIC_VM_SPECS_RAM: 512 IRONIC_VM_SPECS_DISK: 4"," tempest_concurrency: 4 tempest_test_regex: ""(ironic_tempest_plugin.tests.scenario|test_schedule_to_all_nodes)"" IRONIC_VM_COUNT: 7 IRONIC_VM_SPECS_RAM: 384 IRONIC_VM_COUNT: 7 IRONIC_VM_SPECS_RAM: 384",7,6
openstack%2Fcharm-neutron-gateway~master~Ifd084c94c9808b49dda39bafed9345bfbf6aab81,openstack/charm-neutron-gateway,master,Ifd084c94c9808b49dda39bafed9345bfbf6aab81,Fix action managed upgrades,MERGED,2020-05-05 14:58:15.000000000,2020-07-22 15:47:55.000000000,2020-07-22 15:47:54.000000000,"[{'_account_id': 935}, {'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-05 14:58:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-gateway/commit/d866bbc4c685b9e49483c4fbb839cbcf9e9f0021', 'message': 'Fix action managed upgrades\n\nUse the resolve_CONFIGS function to resolve the current set\nof CONFIGS for the charm, rather than directly referencing\nthe CONFIGS global variable which will not be initialized\nduring action invocation.\n\nChange-Id: Ifd084c94c9808b49dda39bafed9345bfbf6aab81\nCloses-Bug: 1876585\n'}, {'number': 2, 'created': '2020-05-13 11:28:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-gateway/commit/ce7d77e7daf2891915fc4f58b7172b6a27a11848', 'message': 'Fix action managed upgrades\n\nUse the resolve_CONFIGS function to resolve the current set\nof CONFIGS for the charm, rather than directly referencing\nthe CONFIGS global variable which will not be initialized\nduring action invocation.\n\nChange-Id: Ifd084c94c9808b49dda39bafed9345bfbf6aab81\nCloses-Bug: 1876585\n'}, {'number': 3, 'created': '2020-07-22 13:04:58.000000000', 'files': ['actions/openstack_upgrade.py', 'unit_tests/test_actions_openstack_upgrade.py'], 'web_link': 'https://opendev.org/openstack/charm-neutron-gateway/commit/de30b2f73df9909e6d9f8c1e9b7eccdb8ce1f544', 'message': 'Fix action managed upgrades\n\nUse the resolve_CONFIGS function to resolve the current set\nof CONFIGS for the charm, rather than directly referencing\nthe CONFIGS global variable which will not be initialized\nduring action invocation.\n\nChange-Id: Ifd084c94c9808b49dda39bafed9345bfbf6aab81\nCloses-Bug: 1876585\n'}]",0,725621,de30b2f73df9909e6d9f8c1e9b7eccdb8ce1f544,24,5,3,935,,,0,"Fix action managed upgrades

Use the resolve_CONFIGS function to resolve the current set
of CONFIGS for the charm, rather than directly referencing
the CONFIGS global variable which will not be initialized
during action invocation.

Change-Id: Ifd084c94c9808b49dda39bafed9345bfbf6aab81
Closes-Bug: 1876585
",git fetch https://review.opendev.org/openstack/charm-neutron-gateway refs/changes/21/725621/1 && git format-patch -1 --stdout FETCH_HEAD,"['actions/openstack_upgrade.py', 'unit_tests/test_actions_openstack_upgrade.py']",2,d866bbc4c685b9e49483c4fbb839cbcf9e9f0021,bug/1876585," 'resolve_CONFIGS',",,3,2
openstack%2Foslo.policy~master~I993d743c53fa3506ceda3d1f291c12f4635eb60a,openstack/oslo.policy,master,I993d743c53fa3506ceda3d1f291c12f4635eb60a,Fix unit tests to work with stevedore > 2.0.1,MERGED,2020-07-20 04:55:18.000000000,2020-07-22 15:38:20.000000000,2020-07-22 15:36:03.000000000,"[{'_account_id': 6928}, {'_account_id': 11904}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-20 04:55:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/17d5fa1bb61e5a3d3679d0544d11c42446cefc28', 'message': '[DNM] unit tests not working with stevedore > 2.0.1\n\nChange-Id: I993d743c53fa3506ceda3d1f291c12f4635eb60a\n'}, {'number': 2, 'created': '2020-07-21 04:30:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/91a6fc32b49874b39c63049069e11f600254e7f0', 'message': 'Fix unit tests to work with stevedore > 2.0.1\n\nstevedore has switched to importlib_metadata[1],\nneed to adopt unit test to work with it.\n\n[1] https://review.opendev.org/#/c/739306/\n\nCloses-Bug: #1888208\nChange-Id: I993d743c53fa3506ceda3d1f291c12f4635eb60a\n'}, {'number': 3, 'created': '2020-07-21 04:31:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/6c4934f4176b0fed6ba6ab9652de0da4a0dc0efa', 'message': 'Fix unit tests to work with stevedore > 2.0.1\n\nstevedore has switched to importlib_metadata[1],\nneed to adapt unit test to work with it.\n\n[1] https://review.opendev.org/#/c/739306/\n\nCloses-Bug: #1888208\nChange-Id: I993d743c53fa3506ceda3d1f291c12f4635eb60a\n'}, {'number': 4, 'created': '2020-07-21 05:53:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/47fc4d6fb79b7e826498488a764317f01fb234ee', 'message': 'Fix unit tests to work with stevedore > 2.0.1\n\nstevedore has switched to importlib_metadata[1],\nneed to adapt unit test to work with it.\n\nAlso update lower-constraints of stevedore to\n3.0.0.\n\n[1] https://review.opendev.org/#/c/739306/\n\nCloses-Bug: #1888208\nChange-Id: I993d743c53fa3506ceda3d1f291c12f4635eb60a\n'}, {'number': 5, 'created': '2020-07-22 06:17:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/1f7fa11985079bc31ca6c7e22c04c495b0d551e7', 'message': ""Fix unit tests to work with stevedore > 2.0.1\n\nstevedore has switched to importlib_metadata[1] and\nthis breaked unit test as the test relied on internal\nimplementation of it.\n\nInstead we should switch to mock NamedExtensionManager\nthat's what called by oslo_policy.\n\n[1] https://review.opendev.org/#/c/739306/\n\nCloses-Bug: #1888208\nChange-Id: I993d743c53fa3506ceda3d1f291c12f4635eb60a\n""}, {'number': 6, 'created': '2020-07-22 06:44:43.000000000', 'files': ['oslo_policy/tests/test_generator.py'], 'web_link': 'https://opendev.org/openstack/oslo.policy/commit/6296fce9f8e3205506f87dd31d0b18f4b7842000', 'message': ""Fix unit tests to work with stevedore > 2.0.1\n\nstevedore has switched to importlib_metadata[1] and\nthis breaked unit test as the test relied on internal\nimplementation of it.\n\nInstead we should switch to mock NamedExtensionManager\nthat's what called by oslo_policy.\n\n[1] https://review.opendev.org/#/c/739306/\n\nCloses-Bug: #1888208\nChange-Id: I993d743c53fa3506ceda3d1f291c12f4635eb60a\n""}]",0,741869,6296fce9f8e3205506f87dd31d0b18f4b7842000,22,5,6,13861,,,0,"Fix unit tests to work with stevedore > 2.0.1

stevedore has switched to importlib_metadata[1] and
this breaked unit test as the test relied on internal
implementation of it.

Instead we should switch to mock NamedExtensionManager
that's what called by oslo_policy.

[1] https://review.opendev.org/#/c/739306/

Closes-Bug: #1888208
Change-Id: I993d743c53fa3506ceda3d1f291c12f4635eb60a
",git fetch https://review.opendev.org/openstack/oslo.policy refs/changes/69/741869/6 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_policy/policy.py', '.zuul.yaml']",2,17d5fa1bb61e5a3d3679d0544d11c42446cefc28,bug/1888208,, - check-requirements - lib-forward-testing-python3 - openstack-lower-constraints-jobs - periodic-stable-jobs - publish-openstack-docs-pti - release-notes-jobs-python3,1,7
openstack%2Floci~master~I18b826435acd7d64038d5e3d79d3f1378c43c109,openstack/loci,master,I18b826435acd7d64038d5e3d79d3f1378c43c109,Fix missing gzip package in Leap,ABANDONED,2019-05-21 17:41:58.000000000,2020-07-22 15:37:40.000000000,,"[{'_account_id': 5997}, {'_account_id': 17068}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-05-21 17:41:58.000000000', 'files': ['scripts/install.sh'], 'web_link': 'https://opendev.org/openstack/loci/commit/263e52320f7a45fc67223ae517528de8f3914228', 'message': 'Fix missing gzip package in Leap\n\nThis patch ensures that for OpenSUSE Leap builds, that the gzip\npackage is present.  Leap builds fail without it due to missing\ngzip package.\n\nChange-Id: I18b826435acd7d64038d5e3d79d3f1378c43c109\nCloses-Bug: #1829903\n'}]",0,660478,263e52320f7a45fc67223ae517528de8f3914228,20,3,1,5997,,,0,"Fix missing gzip package in Leap

This patch ensures that for OpenSUSE Leap builds, that the gzip
package is present.  Leap builds fail without it due to missing
gzip package.

Change-Id: I18b826435acd7d64038d5e3d79d3f1378c43c109
Closes-Bug: #1829903
",git fetch https://review.opendev.org/openstack/loci refs/changes/78/660478/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/install.sh'],1,263e52320f7a45fc67223ae517528de8f3914228,bug/1829903, gzip \,,1,0
openstack%2Fnova~master~Ib542e8d8a461a8624536d596a6a93ad360f02dfc,openstack/nova,master,Ib542e8d8a461a8624536d596a6a93ad360f02dfc,Delete non tag related device metadata during detach,ABANDONED,2020-07-22 14:39:01.000000000,2020-07-22 15:33:23.000000000,,[],"[{'number': 1, 'created': '2020-07-22 14:39:01.000000000', 'files': ['nova/tests/unit/network/test_neutron.py', 'nova/network/neutron.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/b25e28583e27e778ad12e066498d24fe35f75963', 'message': 'Delete non tag related device metadata during detach\n\nWhen the blueprint virt-device-tagged-attach-detach [1] was\nimplemented the metadata cleanup during interface detach made an\nassumption that metadata only exists if the detached vif has tags.\nHowever metadata exists for vif with vlan information as well. In such\ncase the metadata is leaked during interface attach. This patch removes\nthis assumption from the detach code path.\n\n[1] https://review.opendev.org/#/c/415520\n\nChange-Id: Ib542e8d8a461a8624536d596a6a93ad360f02dfc\n'}]",4,742451,b25e28583e27e778ad12e066498d24fe35f75963,3,0,1,9708,,,0,"Delete non tag related device metadata during detach

When the blueprint virt-device-tagged-attach-detach [1] was
implemented the metadata cleanup during interface detach made an
assumption that metadata only exists if the detached vif has tags.
However metadata exists for vif with vlan information as well. In such
case the metadata is leaked during interface attach. This patch removes
this assumption from the detach code path.

[1] https://review.opendev.org/#/c/415520

Change-Id: Ib542e8d8a461a8624536d596a6a93ad360f02dfc
",git fetch https://review.opendev.org/openstack/nova refs/changes/51/742451/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/network/test_neutron.py', 'nova/network/neutron.py']",2,b25e28583e27e778ad12e066498d24fe35f75963,bug/1887799," self._delete_nic_metadata(instance, vif) if not instance.device_metadata: # nothing to delete return "," if 'tag' in vif and vif.tag: self._delete_nic_metadata(instance, vif)",13,4
openstack%2Fcharm-octavia~master~I6c26c5ec6bfd5b5ba5049c8899c086babb0465d1,openstack/charm-octavia,master,I6c26c5ec6bfd5b5ba5049c8899c086babb0465d1,Rebuild charm to pickup openstack-ha updates,ABANDONED,2020-07-22 13:02:56.000000000,2020-07-22 15:23:34.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 13:02:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/bfe8f36a4cdfecd0146109e231705ad1e746fe4d', 'message': 'Rebuild charm to pickup openstack-ha updates\n\nRebuild charm to pickup improvements to the openstack-ha interface\nensuring that only valid, data complete hosts are written to the\nhaproxy.cfg configuration file.\n\nChange-Id: I6c26c5ec6bfd5b5ba5049c8899c086babb0465d1\nCloses-Bug: 1849901\n'}, {'number': 2, 'created': '2020-07-22 15:16:59.000000000', 'files': ['rebuild'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/128af74bbcccc3fa905b43e27803914bfd341f5f', 'message': 'Rebuild charm to pickup openstack-ha updates\n\nRebuild charm to pickup improvements to the openstack-ha interface\nensuring that only valid, data complete hosts are written to the\nhaproxy.cfg configuration file.\n\nChange-Id: I6c26c5ec6bfd5b5ba5049c8899c086babb0465d1\nCloses-Bug: 1849901\n'}]",0,742413,128af74bbcccc3fa905b43e27803914bfd341f5f,5,2,2,935,,,0,"Rebuild charm to pickup openstack-ha updates

Rebuild charm to pickup improvements to the openstack-ha interface
ensuring that only valid, data complete hosts are written to the
haproxy.cfg configuration file.

Change-Id: I6c26c5ec6bfd5b5ba5049c8899c086babb0465d1
Closes-Bug: 1849901
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/13/742413/2 && git format-patch -1 --stdout FETCH_HEAD,['rebuild'],1,bfe8f36a4cdfecd0146109e231705ad1e746fe4d,bug/1849901,c71b2cfc-969d-48d6-a207-ef7c3329d352,,1,0
openstack%2Fpython-manilaclient~stable%2Ftrain~I3b67f3b566bdadf1cc228f885b7253435a4507b5,openstack/python-manilaclient,stable/train,I3b67f3b566bdadf1cc228f885b7253435a4507b5,Migrate functional job to native zuulv3,MERGED,2020-07-20 22:23:58.000000000,2020-07-22 15:08:37.000000000,2020-07-22 15:01:36.000000000,"[{'_account_id': 6413}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-20 22:23:58.000000000', 'files': ['playbooks/legacy/manilaclient-dsvm-neutron-functional/run.yaml', 'playbooks/python-manilaclient-functional/post.yaml', 'contrib/ci/post_test_hook.sh', '.zuul.yaml', 'roles/populate-manilaclient-config/defaults/main.yaml', 'playbooks/python-manilaclient-functional/run.yaml', 'playbooks/legacy/manilaclient-dsvm-neutron-functional/post.yaml', 'bindep.txt', 'contrib/ci/pre_test_hook.sh', 'roles/populate-manilaclient-config/README.rst', 'zuul.d/project.yaml', 'roles/populate-manilaclient-config/tasks/main.yaml', 'zuul.d/python-manilaclient-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/cf01e725dfdccd37631c30400cb72d95ff275ecb', 'message': 'Migrate functional job to native zuulv3\n\nThe manilaclient functional test job\n""manilaclient-dsvm-neutron-functional""\nis currently broken due to a change to its\nparent job in the devstack repository.\n\nInstead of investing to fix that legacy style\njob, we\'d be better off rewriting it to be\nin native zuulv3 style, i.e., without the\nuse of the deprecated devstack-gate project.\n\n- Introduce a new job ""python-manilaclient-functional""\n  which replaces ""manilaclient-dsvm-neutron-functional""\n  but preserves the testing done by the latter.\n- The new job runs on a minimal devstack (keystone,\n  neutron, manila, mysql and rabbit) and uses an ansible\n  role introduced to setup test configuration.\n- Add a ""bindep.txt"" file to call out test system\n  dependencies, and install them via the new job.\n- Cleanup the old job, the associated devstack gate\n  hooks and playbooks.\n\nChange-Id: I3b67f3b566bdadf1cc228f885b7253435a4507b5\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n(cherry picked from commit d65d7f05a7f99aad7b3a4ba286c8ab136775d303)\n(cherry picked from commit f852358f21c04a551e40d397e00577fbb90aa534)\n'}]",0,742038,cf01e725dfdccd37631c30400cb72d95ff275ecb,11,4,1,16643,,,0,"Migrate functional job to native zuulv3

The manilaclient functional test job
""manilaclient-dsvm-neutron-functional""
is currently broken due to a change to its
parent job in the devstack repository.

Instead of investing to fix that legacy style
job, we'd be better off rewriting it to be
in native zuulv3 style, i.e., without the
use of the deprecated devstack-gate project.

- Introduce a new job ""python-manilaclient-functional""
  which replaces ""manilaclient-dsvm-neutron-functional""
  but preserves the testing done by the latter.
- The new job runs on a minimal devstack (keystone,
  neutron, manila, mysql and rabbit) and uses an ansible
  role introduced to setup test configuration.
- Add a ""bindep.txt"" file to call out test system
  dependencies, and install them via the new job.
- Cleanup the old job, the associated devstack gate
  hooks and playbooks.

Change-Id: I3b67f3b566bdadf1cc228f885b7253435a4507b5
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
(cherry picked from commit d65d7f05a7f99aad7b3a4ba286c8ab136775d303)
(cherry picked from commit f852358f21c04a551e40d397e00577fbb90aa534)
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/38/742038/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/manilaclient-dsvm-neutron-functional/run.yaml', 'playbooks/python-manilaclient-functional/post.yaml', 'contrib/ci/post_test_hook.sh', '.zuul.yaml', 'roles/populate-manilaclient-config/defaults/main.yaml', 'playbooks/python-manilaclient-functional/run.yaml', 'playbooks/legacy/manilaclient-dsvm-neutron-functional/post.yaml', 'bindep.txt', 'contrib/ci/pre_test_hook.sh', 'roles/populate-manilaclient-config/README.rst', 'zuul.d/project.yaml', 'roles/populate-manilaclient-config/tasks/main.yaml', 'zuul.d/python-manilaclient-jobs.yaml']",13,cf01e725dfdccd37631c30400cb72d95ff275ecb,native-zuulv3-migration,"- job: name: python-manilaclient-functional parent: devstack-minimal irrelevant-files: - ^manilaclient/tests/unit/.*$ - ^setup.cfg$ - ^tools/.*$ - ^tox.ini$ required-projects: - openstack/keystone - openstack/manila - openstack/neutron - openstack/python-manilaclient timeout: 5400 run: playbooks/python-manilaclient-functional/run.yaml post-run: playbooks/python-manilaclient-functional/post.yaml vars: zuul_copy_output: ""{{ zuul.project.src_dir }}/etc/manilaclient/manilaclient.conf"": logs tox_environment: PYTHONUNBUFFERED: 'true' tox_envlist: functional devstack_plugins: manila: https://opendev.org/openstack/manila devstack_localrc: USE_PYTHON3: true INSTALL_TEMPEST: false # Enable manila with a fake driver that supports all capabilities MANILA_CONFIGURE_DEFAULT_TYPES: true MANILA_OPTGROUP_DEFAULT_quota_share_networks: 50 MANILA_DEFAULT_SHARE_TYPE_EXTRA_SPECS: 'snapshot_support=True create_share_from_snapshot_support=True revert_to_snapshot_support=True mount_snapshot_support=True' MANILA_INSTALL_TEMPEST_PLUGIN_SYSTEMWIDE: false MANILA_SERVICE_IMAGE_ENABLED: false MANILA_SHARE_MIGRATION_PERIOD_TASK_INTERVAL: 1 SHARE_DRIVER: manila.tests.share.drivers.dummy.DummyDriver MANILA_REPLICA_STATE_UPDATE_INTERVAL: 10 MANILA_ENABLED_BACKENDS: alpha,beta,gamma,delta MANILA_CONFIGURE_GROUPS: alpha,beta,gamma,delta,membernet,adminnet MANILA_OPTGROUP_alpha_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_alpha_driver_handles_share_servers: true MANILA_OPTGROUP_alpha_share_backend_name: ALPHA MANILA_OPTGROUP_alpha_network_config_group: membernet MANILA_OPTGROUP_alpha_admin_network_config_group: adminnet MANILA_OPTGROUP_alpha_replication_domain: DUMMY_DOMAIN_2 MANILA_OPTGROUP_beta_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_beta_driver_handles_share_servers: true MANILA_OPTGROUP_beta_share_backend_name: BETA MANILA_OPTGROUP_beta_network_config_group: membernet MANILA_OPTGROUP_beta_admin_network_config_group: adminnet MANILA_OPTGROUP_beta_replication_domain: DUMMY_DOMAIN_2 MANILA_OPTGROUP_gamma_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_gamma_driver_handles_share_servers: false MANILA_OPTGROUP_gamma_share_backend_name: GAMMA MANILA_OPTGROUP_gamma_replication_domain: DUMMY_DOMAIN MANILA_OPTGROUP_delta_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_delta_driver_handles_share_servers: false MANILA_OPTGROUP_delta_share_backend_name: DELTA MANILA_OPTGROUP_delta_replication_domain: DUMMY_DOMAIN MANILA_OPTGROUP_membernet_network_api_class: manila.network.standalone_network_plugin.StandaloneNetworkPlugin MANILA_OPTGROUP_membernet_standalone_network_plugin_gateway: 10.0.0.1 MANILA_OPTGROUP_membernet_standalone_network_plugin_mask: 24 MANILA_OPTGROUP_membernet_standalone_network_plugin_network_type: vlan MANILA_OPTGROUP_membernet_standalone_network_plugin_segmentation_id: 1010 MANILA_OPTGROUP_membernet_standalone_network_plugin_allowed_ip_ranges: 10.0.0.10-10.0.0.209 MANILA_OPTGROUP_membernet_network_plugin_ipv4_enabled: true MANILA_OPTGROUP_adminnet_network_api_class: manila.network.standalone_network_plugin.StandaloneNetworkPlugin MANILA_OPTGROUP_adminnet_standalone_network_plugin_gateway: 11.0.0.1 MANILA_OPTGROUP_adminnet_standalone_network_plugin_mask: 24 MANILA_OPTGROUP_adminnet_standalone_network_plugin_network_type: vlan MANILA_OPTGROUP_adminnet_standalone_network_plugin_segmentation_id: 1011 MANILA_OPTGROUP_adminnet_standalone_network_plugin_allowed_ip_ranges: 11.0.0.10-11.0.0.19,11.0.0.30-11.0.0.39,11.0.0.50-11.0.0.199 MANILA_OPTGROUP_adminnet_network_plugin_ipv4_enabled: true devstack_services: # Keystone key: true # Neutron q-agt: true q-dhcp: true q-l3: true q-meta: true q-metering: true q-svc: true ",,237,273
openstack%2Fpython-tackerclient~master~I600e3aaace42f7e185c408af02279e6374282e5f,openstack/python-tackerclient,master,I600e3aaace42f7e185c408af02279e6374282e5f,Stop to use the __future__ module.,MERGED,2020-06-02 18:52:59.000000000,2020-07-22 14:48:29.000000000,2020-07-22 14:44:35.000000000,"[{'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-06-02 18:52:59.000000000', 'files': ['tackerclient/tacker/v1_0/__init__.py', 'tackerclient/tacker/v1_0/vnfm/vnfd.py', 'tackerclient/shell.py', 'tackerclient/tacker/v1_0/nfvo/vnffgd.py', 'tackerclient/tacker/v1_0/nfvo/nsd.py'], 'web_link': 'https://opendev.org/openstack/python-tackerclient/commit/2389e7466c4c598b6760d713adf45553b353e4c7', 'message': ""Stop to use the __future__ module.\n\nThe __future__ module [1] was used in this context to ensure compatibility\nbetween python 2 and python 3.\n\nWe previously dropped the support of python 2.7 [2] and now we only support\npython 3 so we don't need to continue to use this module and the imports\nlisted below.\n\nImports commonly used and their related PEPs:\n- `division` is related to PEP 238 [3]\n- `print_function` is related to PEP 3105 [4]\n- `unicode_literals` is related to PEP 3112 [5]\n- `with_statement` is related to PEP 343 [6]\n- `absolute_import` is related to PEP 328 [7]\n\n[1] https://docs.python.org/3/library/__future__.html\n[2] https://governance.openstack.org/tc/goals/selected/ussuri/drop-py27.html\n[3] https://www.python.org/dev/peps/pep-0238\n[4] https://www.python.org/dev/peps/pep-3105\n[5] https://www.python.org/dev/peps/pep-3112\n[6] https://www.python.org/dev/peps/pep-0343\n[7] https://www.python.org/dev/peps/pep-0328\n\nChange-Id: I600e3aaace42f7e185c408af02279e6374282e5f\n""}]",0,732937,2389e7466c4c598b6760d713adf45553b353e4c7,9,4,1,28522,,,0,"Stop to use the __future__ module.

The __future__ module [1] was used in this context to ensure compatibility
between python 2 and python 3.

We previously dropped the support of python 2.7 [2] and now we only support
python 3 so we don't need to continue to use this module and the imports
listed below.

Imports commonly used and their related PEPs:
- `division` is related to PEP 238 [3]
- `print_function` is related to PEP 3105 [4]
- `unicode_literals` is related to PEP 3112 [5]
- `with_statement` is related to PEP 343 [6]
- `absolute_import` is related to PEP 328 [7]

[1] https://docs.python.org/3/library/__future__.html
[2] https://governance.openstack.org/tc/goals/selected/ussuri/drop-py27.html
[3] https://www.python.org/dev/peps/pep-0238
[4] https://www.python.org/dev/peps/pep-3105
[5] https://www.python.org/dev/peps/pep-3112
[6] https://www.python.org/dev/peps/pep-0343
[7] https://www.python.org/dev/peps/pep-0328

Change-Id: I600e3aaace42f7e185c408af02279e6374282e5f
",git fetch https://review.opendev.org/openstack/python-tackerclient refs/changes/37/732937/1 && git format-patch -1 --stdout FETCH_HEAD,"['tackerclient/tacker/v1_0/__init__.py', 'tackerclient/tacker/v1_0/vnfm/vnfd.py', 'tackerclient/shell.py', 'tackerclient/tacker/v1_0/nfvo/nsd.py', 'tackerclient/tacker/v1_0/nfvo/vnffgd.py']",5,2389e7466c4c598b6760d713adf45553b353e4c7,drop_future_imports,,from __future__ import print_function ,0,10
openstack%2Fpython-tackerclient~master~I8d8db92664383e014dda76a4e7780628b72602fb,openstack/python-tackerclient,master,I8d8db92664383e014dda76a4e7780628b72602fb,drop mock from lower-constraints,MERGED,2020-06-09 10:00:48.000000000,2020-07-22 14:46:12.000000000,2020-07-22 14:44:33.000000000,"[{'_account_id': 22348}, {'_account_id': 26222}, {'_account_id': 26588}]","[{'number': 1, 'created': '2020-06-09 10:00:48.000000000', 'files': ['lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/python-tackerclient/commit/a0c3d1f1df287860510983f86c1d0fe7d138ccac', 'message': ""drop mock from lower-constraints\n\nThe mock third party library was needed for mock support in py2\nruntimes. Since we now only support py36 and later, we don't need it\nin lower-constraints.\n\nThese changes will help us to drop `mock` from openstack/requirements\n\nChange-Id: I8d8db92664383e014dda76a4e7780628b72602fb\n""}]",0,734526,a0c3d1f1df287860510983f86c1d0fe7d138ccac,8,3,1,28522,,,0,"drop mock from lower-constraints

The mock third party library was needed for mock support in py2
runtimes. Since we now only support py36 and later, we don't need it
in lower-constraints.

These changes will help us to drop `mock` from openstack/requirements

Change-Id: I8d8db92664383e014dda76a4e7780628b72602fb
",git fetch https://review.opendev.org/openstack/python-tackerclient refs/changes/26/734526/1 && git format-patch -1 --stdout FETCH_HEAD,['lower-constraints.txt'],1,a0c3d1f1df287860510983f86c1d0fe7d138ccac,drop_mock,,mock==2.0.0,0,1
openstack%2Fkayobe~master~Icf64b15e58c84f31a11cdefcdb79558b58737da1,openstack/kayobe,master,Icf64b15e58c84f31a11cdefcdb79558b58737da1,Update seed VM image to CentOS 8.2,MERGED,2020-07-21 13:19:20.000000000,2020-07-22 14:45:48.000000000,2020-07-21 21:54:34.000000000,"[{'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2020-07-21 13:19:20.000000000', 'files': ['ansible/group_vars/all/seed-vm', 'releasenotes/notes/seed-vm-centos-8.2-36b7a480a7725da1.yaml', 'etc/kayobe/seed-vm.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f618a2c4b823023c45aeb75df498b514f9483782', 'message': ""Update seed VM image to CentOS 8.2\n\nIf using a CentOS 8.2 bifrost_deploy image on a CentOS 8.1 seed host, we\nmay see an error such as the following:\n\n    TASK [Ensure the overcloud host image has bogus name server entries removed]\n    fatal: [seed]: FAILED!\n\nRunning virt-customize with more debug in the Bifrost container, we see\nthis output:\n\nqemu-kvm: error: failed to set MSR 0x48e to 0xfff9fffe04006172\nqemu-kvm: /builddir/build/BUILD/qemu-4.2.0/target/i386/kvm.c:2695: kvm_buf_set_msrs: Assertion `ret == cpu->kvm_msr_buf->nmsrs' failed.\n\nThis appears to be an incompatibility between qemu/libvirt in CentOS 8.1\nand 8.2.\n\nThis change fixes the issue for new deployments by updating the seed VM\nimage to CentOS 8.2.  Existing deployments will need to update packages\non the seed host to match the bifrost_deploy container.\n\nChange-Id: Icf64b15e58c84f31a11cdefcdb79558b58737da1\nStory: 2007942\nTask: 40407\n""}]",0,742189,f618a2c4b823023c45aeb75df498b514f9483782,11,3,1,14826,,,0,"Update seed VM image to CentOS 8.2

If using a CentOS 8.2 bifrost_deploy image on a CentOS 8.1 seed host, we
may see an error such as the following:

    TASK [Ensure the overcloud host image has bogus name server entries removed]
    fatal: [seed]: FAILED!

Running virt-customize with more debug in the Bifrost container, we see
this output:

qemu-kvm: error: failed to set MSR 0x48e to 0xfff9fffe04006172
qemu-kvm: /builddir/build/BUILD/qemu-4.2.0/target/i386/kvm.c:2695: kvm_buf_set_msrs: Assertion `ret == cpu->kvm_msr_buf->nmsrs' failed.

This appears to be an incompatibility between qemu/libvirt in CentOS 8.1
and 8.2.

This change fixes the issue for new deployments by updating the seed VM
image to CentOS 8.2.  Existing deployments will need to update packages
on the seed host to match the bifrost_deploy container.

Change-Id: Icf64b15e58c84f31a11cdefcdb79558b58737da1
Story: 2007942
Task: 40407
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/89/742189/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/group_vars/all/seed-vm', 'releasenotes/notes/seed-vm-centos-8.2-36b7a480a7725da1.yaml', 'etc/kayobe/seed-vm.yml']",3,f618a2c4b823023c45aeb75df498b514f9483782,,"# ""https://cloud.centos.org/centos/8/x86_64/images/CentOS-8-GenericCloud-8.2.2004-20200611.2.x86_64.qcow2"".","# ""https://cloud.centos.org/centos/8/x86_64/images/CentOS-8-GenericCloud-8.1.1911-20200113.3.x86_64.qcow2"".",13,2
openstack%2Fcharm-octavia~master~Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1,openstack/charm-octavia,master,Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1,Pin setuptools and dependencies of dependencies,MERGED,2020-06-23 22:15:44.000000000,2020-07-22 14:45:37.000000000,2020-07-22 14:45:37.000000000,"[{'_account_id': 11805}, {'_account_id': 13686}, {'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 22348}, {'_account_id': 28510}, {'_account_id': 31420}]","[{'number': 1, 'created': '2020-06-23 22:15:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/4c01447b9f7bf6ce46e9f84b09f1da960e75e7e7', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\nPin dependecies of dependencies of netaddr.\nUpdate bundles for GSSS topology change.\n\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 2, 'created': '2020-06-24 21:36:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/13d07310b66bdce0c9f5e2972ccecca49692e1c0', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\nPin dependecies of dependencies of netaddr.\nUpdate bundles for GSSS topology change.\n\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 3, 'created': '2020-06-29 07:11:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/9fa4760fd7228c12dacbab8bb81dbbaba695a682', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 4, 'created': '2020-07-01 11:02:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/96ef3704e1cdafc04eb0338415f6680ab4f76206', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 5, 'created': '2020-07-01 23:03:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/4d17fb9e1621614fabad396b0289e81ee8d91149', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 6, 'created': '2020-07-03 06:50:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/b5aef4c6cecb68ff59fd10facb36cb2fb9fb519a', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nDouble the number of compute nodes, I suspect many of our failures\nis due to the test running out of resources due to the\nunpredictable nature of the number of instance Octavia will start.\n\nRemove payload_instance setup jobs as that is now handled by the\ntest itself.\n\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/345\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 7, 'created': '2020-07-14 17:37:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/f8c8176250698fe264554f9285539c9eb2a5f600', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nDouble the number of compute nodes, I suspect many of our failures\nis due to the test running out of resources due to the\nunpredictable nature of the number of instance Octavia will start.\n\nRemove payload_instance setup jobs as that is now handled by the\ntest itself.\n\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/345\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 8, 'created': '2020-07-15 18:02:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/52393186e90ca2758ac06b4fd0fab02dc4584c5d', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nDouble the number of compute nodes, I suspect many of our failures\nis due to the test running out of resources due to the\nunpredictable nature of the number of instance Octavia will start.\n\nRemove payload_instance setup jobs as that is now handled by the\ntest itself.\n\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/345\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 9, 'created': '2020-07-15 22:02:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/f0c5bec75330e3852278879128f9e9294bbe50a8', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nDouble the number of compute nodes, I suspect many of our failures\nis due to the test running out of resources due to the\nunpredictable nature of the number of instance Octavia will start.\n\nRemove payload_instance setup jobs as that is now handled by the\ntest itself.\n\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/345\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 10, 'created': '2020-07-17 16:37:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/7ae4305f44bc619f03de72c71df7db47a5e58478', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nDouble the number of compute nodes, I suspect many of our failures\nis due to the test running out of resources due to the\nunpredictable nature of the number of instance Octavia will start.\n\nRemove payload_instance setup jobs as that is now handled by the\ntest itself.\n\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/345\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 11, 'created': '2020-07-20 15:54:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/a03471a958e995847cb2159f842fd9837e7a0345', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nDouble the number of compute nodes, I suspect many of our failures\nis due to the test running out of resources due to the\nunpredictable nature of the number of instance Octavia will start.\n\nRemove payload_instance setup jobs as that is now handled by the\ntest itself.\n\nFunc-Test-Pr: https://github.com/openstack-charmers/zaza-openstack-tests/pull/345\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}, {'number': 12, 'created': '2020-07-22 10:41:49.000000000', 'files': ['src/tests/bundles/bionic-rocky-ha.yaml', 'src/tests/bundles/bionic-ussuri-ha-ovn.yaml', 'src/tests/bundles/bionic-train-ha-ovn.yaml', 'src/tests/bundles/focal-ussuri-ha.yaml', 'src/tests/bundles/bionic-ussuri-ha.yaml', 'src/wheelhouse.txt', 'src/tests/bundles/focal-ussuri-ha-ovn.yaml', 'src/tests/bundles/bionic-train-ha.yaml', 'src/tests/bundles/bionic-rocky-lxd.yaml', 'src/tests/bundles/bionic-stein-ha.yaml', 'src/tests/tests.yaml'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/6b4235ba06d7021f048b6bd26160749c9b9f09c3', 'message': 'Pin setuptools and dependencies of dependencies\n\nPin setuptools to keep allow-hosts setting for off-line deployments for\n< focal.\n\nPin dependecies of dependencies of netaddr.\n\nUpdate bundles for GSSS topology change.\n\nAdjust target_deploy_status to match new behaviour for OVN charms.\n\nDouble the number of compute nodes, I suspect many of our failures\nis due to the test running out of resources due to the\nunpredictable nature of the number of instance Octavia will start.\n\nRemove payload_instance setup jobs as that is now handled by the\ntest itself.\n\nChange-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1\nCloses-Bug: #1884164\n'}]",2,737648,6b4235ba06d7021f048b6bd26160749c9b9f09c3,94,7,12,20805,,,0,"Pin setuptools and dependencies of dependencies

Pin setuptools to keep allow-hosts setting for off-line deployments for
< focal.

Pin dependecies of dependencies of netaddr.

Update bundles for GSSS topology change.

Adjust target_deploy_status to match new behaviour for OVN charms.

Double the number of compute nodes, I suspect many of our failures
is due to the test running out of resources due to the
unpredictable nature of the number of instance Octavia will start.

Remove payload_instance setup jobs as that is now handled by the
test itself.

Change-Id: Ia6631a29a0bd1a4ce5b992fecf047884205cd1e1
Closes-Bug: #1884164
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/48/737648/1 && git format-patch -1 --stdout FETCH_HEAD,"['src/tests/bundles/bionic-rocky-ha.yaml', 'src/tests/bundles/bionic-ussuri-ha-ovn.yaml', 'src/tests/bundles/bionic-train-ha-ovn.yaml', 'src/tests/bundles/focal-ussuri-ha.yaml', 'src/tests/bundles/bionic-ussuri-ha.yaml', 'src/wheelhouse.txt', 'src/tests/bundles/bionic-train-ha.yaml', 'src/tests/bundles/focal-ussuri-ha-ovn.yaml', 'src/tests/bundles/bionic-rocky-lxd.yaml', 'src/tests/bundles/bionic-stein-ha.yaml', 'src/tests/tests.yaml']",11,4c01447b9f7bf6ce46e9f84b09f1da960e75e7e7,bug/1884164," workload-status: unknown workload-status-message: """"- zaza.openstack.charm_tests.glance_simplestreams_sync.setup.sync_images", workload-status: active workload-status-message: Sync completed,8,20
openstack%2Ftacker-horizon~master~Ia852a117466efde5f79f89c31b65388003f854c2,openstack/tacker-horizon,master,Ia852a117466efde5f79f89c31b65388003f854c2,Bump default tox env from py37 to py38,MERGED,2020-07-20 10:48:44.000000000,2020-07-22 14:45:37.000000000,2020-07-22 14:41:11.000000000,"[{'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}]","[{'number': 1, 'created': '2020-07-20 10:48:44.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/tacker-horizon/commit/3e2d3fa65e585ef639043d32259a96feef2a4e25', 'message': 'Bump default tox env from py37 to py38\n\nPython 3.8 is now our highest level supported python runtime.\nThis updates the default tox target environments to swap out\npy37 for py38 to make sure local development testing is\ncovering this version.\n\nThis does not impact zuul jobs in any way, nor prevent local\ntests against py37. It just changes the default if none is\nexplicitly provided.\n\nChange-Id: Ia852a117466efde5f79f89c31b65388003f854c2\n'}]",0,741919,3e2d3fa65e585ef639043d32259a96feef2a4e25,9,4,1,29313,,,0,"Bump default tox env from py37 to py38

Python 3.8 is now our highest level supported python runtime.
This updates the default tox target environments to swap out
py37 for py38 to make sure local development testing is
covering this version.

This does not impact zuul jobs in any way, nor prevent local
tests against py37. It just changes the default if none is
explicitly provided.

Change-Id: Ia852a117466efde5f79f89c31b65388003f854c2
",git fetch https://review.opendev.org/openstack/tacker-horizon refs/changes/19/741919/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,3e2d3fa65e585ef639043d32259a96feef2a4e25,py38-tox,"envlist = py38,pep8,docs","envlist = py37,pep8,docs",1,1
openstack%2Fpython-tackerclient~master~I5a93a561981ad7ce88e5f3ce4032b1c48eb3ae70,openstack/python-tackerclient,master,I5a93a561981ad7ce88e5f3ce4032b1c48eb3ae70,Replace assertItemsEqual with assertCountEqual,MERGED,2020-06-04 14:08:50.000000000,2020-07-22 14:44:34.000000000,2020-07-22 14:44:33.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 26222}, {'_account_id': 26588}]","[{'number': 1, 'created': '2020-06-04 14:08:50.000000000', 'files': ['tackerclient/tests/unit/osc/v1/test_vnflcm.py', 'tackerclient/tests/unit/osc/v1/test_vnf_package.py', 'tackerclient/tests/unit/osc/v1/vnf/test_vnf.py'], 'web_link': 'https://opendev.org/openstack/python-tackerclient/commit/3f504b1d4aaa175da830999afd1d07f8a4556c7e', 'message': ""Replace assertItemsEqual with assertCountEqual\n\nassertItemsEqual was removed from Python's unittest.TestCase in\nPython 3.3 [1][2]. We have been able to use them since then, because\ntesttools required unittest2, which still included it. With testtools\nremoving Python 2.7 support [3][4], we will lose support for\nassertItemsEqual, so we should switch to use assertCountEqual.\n\n[1] - https://bugs.python.org/issue17866\n[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd\n[3] - https://github.com/testing-cabal/testtools/issues/286\n[4] - https://github.com/testing-cabal/testtools/pull/277\n\nChange-Id: I5a93a561981ad7ce88e5f3ce4032b1c48eb3ae70\n""}]",0,733618,3f504b1d4aaa175da830999afd1d07f8a4556c7e,8,4,1,31068,,,0,"Replace assertItemsEqual with assertCountEqual

assertItemsEqual was removed from Python's unittest.TestCase in
Python 3.3 [1][2]. We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - https://github.com/testing-cabal/testtools/issues/286
[4] - https://github.com/testing-cabal/testtools/pull/277

Change-Id: I5a93a561981ad7ce88e5f3ce4032b1c48eb3ae70
",git fetch https://review.opendev.org/openstack/python-tackerclient refs/changes/18/733618/1 && git format-patch -1 --stdout FETCH_HEAD,"['tackerclient/tests/unit/osc/v1/test_vnflcm.py', 'tackerclient/tests/unit/osc/v1/test_vnf_package.py', 'tackerclient/tests/unit/osc/v1/vnf/test_vnf.py']",3,3f504b1d4aaa175da830999afd1d07f8a4556c7e,replace_assertItemsEqual," self.assertCountEqual(_get_columns_vnf_parameter(), self.assertCountEqual( self.assertCountEqual(self._get_vnf_data(json['vnf']), data)"," self.assertItemsEqual(_get_columns_vnf_parameter(), self.assertItemsEqual( self.assertItemsEqual(self._get_vnf_data(json['vnf']), data)",8,8
openstack%2Ftacker-horizon~master~Id69c80822752b0f972d6e2ccf87e2921acd1d04b,openstack/tacker-horizon,master,Id69c80822752b0f972d6e2ccf87e2921acd1d04b,Quick fix for installation guide,MERGED,2020-07-19 14:24:49.000000000,2020-07-22 14:43:31.000000000,2020-07-22 14:41:10.000000000,"[{'_account_id': 22348}, {'_account_id': 26222}, {'_account_id': 26588}, {'_account_id': 29313}]","[{'number': 1, 'created': '2020-07-19 14:24:49.000000000', 'files': ['manage.py', 'doc/source/install/index.rst'], 'web_link': 'https://opendev.org/openstack/tacker-horizon/commit/4f35c40a39e096c352aaac7c09f3a0083cc4a71d', 'message': ""Quick fix for installation guide\n\nYou failed to install tacker-horizon as following [1] because it\ndoesn't support python3 completely. This update is to fix the\ninstallation.\n\n[1] https://docs.openstack.org/tacker-horizon/latest/install/index.html#manual-installation\n\nChange-Id: Id69c80822752b0f972d6e2ccf87e2921acd1d04b\nSigned-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>\n""}]",0,741842,4f35c40a39e096c352aaac7c09f3a0083cc4a71d,8,4,1,25701,,,0,"Quick fix for installation guide

You failed to install tacker-horizon as following [1] because it
doesn't support python3 completely. This update is to fix the
installation.

[1] https://docs.openstack.org/tacker-horizon/latest/install/index.html#manual-installation

Change-Id: Id69c80822752b0f972d6e2ccf87e2921acd1d04b
Signed-off-by: Yasufumi Ogawa <yasufum.o@gmail.com>
",git fetch https://review.opendev.org/openstack/tacker-horizon refs/changes/42/741842/1 && git format-patch -1 --stdout FETCH_HEAD,"['manage.py', 'doc/source/install/index.rst']",2,4f35c40a39e096c352aaac7c09f3a0083cc4a71d,py3-manage, sudo python3 setup.py install," sudo python setup.py install sudo service apache2 restart If your server is using Systemd instead of Upstart (e.g Ubuntu 15.10 and above), use the following command instead: :: ",2,10
openstack%2Ftacker-horizon~master~I64c0f5cb0ca97a0b0d1e4e2ae4863c5b50beabf0,openstack/tacker-horizon,master,I64c0f5cb0ca97a0b0d1e4e2ae4863c5b50beabf0,Add py38 package metadata,MERGED,2020-07-20 10:45:27.000000000,2020-07-22 14:41:10.000000000,2020-07-22 14:41:10.000000000,"[{'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}]","[{'number': 1, 'created': '2020-07-20 10:45:27.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/tacker-horizon/commit/13aea583c9ef75b43dc649954c644abd626fc8d2', 'message': 'Add py38 package metadata\n\nNow that we are running the Victoria tests that include a\nvoting py38, we can now add the Python 3.8 metadata to the\npackage information to reflect that support.\n\nChange-Id: I64c0f5cb0ca97a0b0d1e4e2ae4863c5b50beabf0\n'}]",0,741916,13aea583c9ef75b43dc649954c644abd626fc8d2,8,4,1,29313,,,0,"Add py38 package metadata

Now that we are running the Victoria tests that include a
voting py38, we can now add the Python 3.8 metadata to the
package information to reflect that support.

Change-Id: I64c0f5cb0ca97a0b0d1e4e2ae4863c5b50beabf0
",git fetch https://review.opendev.org/openstack/tacker-horizon refs/changes/16/741916/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,13aea583c9ef75b43dc649954c644abd626fc8d2,add-py38-meta, Programming Language :: Python :: 3.8,,1,0
openstack%2Fopenstack-ansible-os_neutron~master~I1cb85f63e59010385f3e3086bf8665d0572c685f,openstack/openstack-ansible-os_neutron,master,I1cb85f63e59010385f3e3086bf8665d0572c685f,Remove unused neutron_management_ip,MERGED,2020-07-15 13:02:50.000000000,2020-07-22 14:40:17.000000000,2020-07-22 14:38:29.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-15 13:02:50.000000000', 'files': ['defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_neutron/commit/f4322258c96fa64a5be44d69d01bbd9d64b4d610', 'message': 'Remove unused neutron_management_ip\n\nThis only appears to have been used historically in reference\nto DragonFlow ML2. At present it is unused, and could be confused\nwith other configuration options.\n\nChange-Id: I1cb85f63e59010385f3e3086bf8665d0572c685f\n'}]",0,741177,f4322258c96fa64a5be44d69d01bbd9d64b4d610,8,3,1,31542,,,0,"Remove unused neutron_management_ip

This only appears to have been used historically in reference
to DragonFlow ML2. At present it is unused, and could be confused
with other configuration options.

Change-Id: I1cb85f63e59010385f3e3086bf8665d0572c685f
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_neutron refs/changes/77/741177/1 && git format-patch -1 --stdout FETCH_HEAD,['defaults/main.yml'],1,f4322258c96fa64a5be44d69d01bbd9d64b4d610,neutron-mgmt-ip,,# neutron_management_ip is used to configure the location (IP) of the # neutron-server neutron_management_ip: 127.0.0.1 ,0,4
openstack%2Fblazar-dashboard~stable%2Fussuri~Ic98d6ce664f705808b107bc2da12d157a8f04cb7,openstack/blazar-dashboard,stable/ussuri,Ic98d6ce664f705808b107bc2da12d157a8f04cb7,Update TOX_CONSTRAINTS_FILE for stable/ussuri,MERGED,2020-04-22 16:23:26.000000000,2020-07-22 14:39:03.000000000,2020-07-22 14:37:26.000000000,"[{'_account_id': 15197}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-04-22 16:23:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/blazar-dashboard/commit/2bc15883d34ada12c54c98b4e81d024892809c51', 'message': 'Update TOX_CONSTRAINTS_FILE for stable/ussuri\n\nUpdate the URL to the upper-constraints file to point to the redirect\nrule on releases.openstack.org so that anyone working on this branch\nwill switch to the correct upper-constraints list automatically when\nthe requirements repository branches.\n\nUntil the requirements repository has as stable/ussuri branch, tests will\ncontinue to use the upper-constraints list on master.\n\nChange-Id: Ic98d6ce664f705808b107bc2da12d157a8f04cb7\n'}, {'number': 2, 'created': '2020-06-09 10:04:45.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/blazar-dashboard/commit/1c2fc55b291df9a44d8f695a6ef1bfaa3007a807', 'message': 'Update TOX_CONSTRAINTS_FILE for stable/ussuri\n\nUpdate the URL to the upper-constraints file to point to the redirect\nrule on releases.openstack.org so that anyone working on this branch\nwill switch to the correct upper-constraints list automatically when\nthe requirements repository branches.\n\nUntil the requirements repository has as stable/ussuri branch, tests will\ncontinue to use the upper-constraints list on master.\n\nChange-Id: Ic98d6ce664f705808b107bc2da12d157a8f04cb7\n'}]",0,722068,1c2fc55b291df9a44d8f695a6ef1bfaa3007a807,12,2,2,22816,,,0,"Update TOX_CONSTRAINTS_FILE for stable/ussuri

Update the URL to the upper-constraints file to point to the redirect
rule on releases.openstack.org so that anyone working on this branch
will switch to the correct upper-constraints list automatically when
the requirements repository branches.

Until the requirements repository has as stable/ussuri branch, tests will
continue to use the upper-constraints list on master.

Change-Id: Ic98d6ce664f705808b107bc2da12d157a8f04cb7
",git fetch https://review.opendev.org/openstack/blazar-dashboard refs/changes/68/722068/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,2bc15883d34ada12c54c98b4e81d024892809c51,create-ussuri,deps = -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/ussuri} -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/ussuri} -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/ussuri},deps = -c{env:UPPER_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -c{env:UPPER_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -c{env:UPPER_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master},3,3
openstack%2Fansible-role-uwsgi~master~I8afba713b6375865e1978f4b3d32c7d8d0db5a70,openstack/ansible-role-uwsgi,master,I8afba713b6375865e1978f4b3d32c7d8d0db5a70,Use X-Forwarded-For header in logs,MERGED,2020-07-10 13:47:23.000000000,2020-07-22 14:34:13.000000000,2020-07-22 14:32:16.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28522}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-10 13:47:23.000000000', 'files': ['templates/uwsgi.ini.j2'], 'web_link': 'https://opendev.org/openstack/ansible-role-uwsgi/commit/da08f49f80fb1a64a9f305e5357215233f286544', 'message': 'Use X-Forwarded-For header in logs\n\nSet log-x-forwarded-for to true by default to true to use\noriginating IP in logs instead of haproxy one.\n\nChange-Id: I8afba713b6375865e1978f4b3d32c7d8d0db5a70\n'}]",0,740469,da08f49f80fb1a64a9f305e5357215233f286544,9,4,1,28619,,,0,"Use X-Forwarded-For header in logs

Set log-x-forwarded-for to true by default to true to use
originating IP in logs instead of haproxy one.

Change-Id: I8afba713b6375865e1978f4b3d32c7d8d0db5a70
",git fetch https://review.opendev.org/openstack/ansible-role-uwsgi refs/changes/69/740469/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/uwsgi.ini.j2'],1,da08f49f80fb1a64a9f305e5357215233f286544,,log-x-forwarded-for = true,,1,0
openstack%2Ftacker~stable%2Ftrain~I021d1752fcf96dfba97faf21e849dc87019e4e57,openstack/tacker,stable/train,I021d1752fcf96dfba97faf21e849dc87019e4e57,Fix bug that causes InternalServerError in FT,MERGED,2020-07-14 06:45:52.000000000,2020-07-22 14:30:02.000000000,2020-07-22 14:28:22.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}, {'_account_id': 30491}, {'_account_id': 31072}]","[{'number': 1, 'created': '2020-07-14 06:45:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/ac3da826a78130497f55eee05141b5a30fcb9e7c', 'message': 'Fix bug that causes InternalServerError in FT\n\nThis patch fixes a bug that caused many functinal-tests\nto fail with the following error:\n- tackerclient.common.exceptions.InternalServerError\n\nThe bug occurs because the password is converted to bytes\ntype when decrypting the password of vim_auth with python3.\n\nChange-Id: I021d1752fcf96dfba97faf21e849dc87019e4e57\n(cherry picked from commit bdb2d52b3a1b69c58cb2ac6f903380ab8a7bd973)\n'}, {'number': 2, 'created': '2020-07-15 08:25:25.000000000', 'files': ['tacker/vnfm/vim_client.py', 'tacker/nfvo/nfvo_plugin.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/7fb34294684c895acf3b575bfe9c96c03ad6e819', 'message': 'Fix bug that causes InternalServerError in FT\n\nThis patch fixes a bug that caused many functinal-tests\nto fail with the following error:\n- tackerclient.common.exceptions.InternalServerError\n\nThe bug occurs because the password is converted to bytes\ntype when decrypting the password of vim_auth with python3.\n\nChange-Id: I021d1752fcf96dfba97faf21e849dc87019e4e57\nCloses-Bug: #1883350\n(cherry picked from commit bdb2d52b3a1b69c58cb2ac6f903380ab8a7bd973)\n'}]",0,740894,7fb34294684c895acf3b575bfe9c96c03ad6e819,17,7,2,30491,,,0,"Fix bug that causes InternalServerError in FT

This patch fixes a bug that caused many functinal-tests
to fail with the following error:
- tackerclient.common.exceptions.InternalServerError

The bug occurs because the password is converted to bytes
type when decrypting the password of vim_auth with python3.

Change-Id: I021d1752fcf96dfba97faf21e849dc87019e4e57
Closes-Bug: #1883350
(cherry picked from commit bdb2d52b3a1b69c58cb2ac6f903380ab8a7bd973)
",git fetch https://review.opendev.org/openstack/tacker refs/changes/94/740894/1 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/vnfm/vim_client.py', 'tacker/nfvo/nfvo_plugin.py']",2,ac3da826a78130497f55eee05141b5a30fcb9e7c,tacker-functional-stable/train, return f.decrypt(cred).decode('utf-8'), return f.decrypt(cred),2,2
openstack%2Ftacker~master~Iad88c7adfe56e926ee0324d94787577ba066989b,openstack/tacker,master,Iad88c7adfe56e926ee0324d94787577ba066989b,Unexpected update in setup script for functional test,MERGED,2020-06-05 00:17:48.000000000,2020-07-22 14:26:26.000000000,2020-07-22 14:24:28.000000000,"[{'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}, {'_account_id': 27180}, {'_account_id': 31072}, {'_account_id': 31730}]","[{'number': 1, 'created': '2020-06-05 00:17:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/ade811558ca4b2763f5c6426a72bffa49c441e7f', 'message': '[WIP]Unexpected update in setup script for functional test\n\nThe following files are updated after building Devstack\non local environment.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese files are management for Git and should not be updated.\nOn the other hand, need it update for Zuul.\n\nTherefore, I will create these update files to outside\nof Git manage.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n'}, {'number': 2, 'created': '2020-06-05 04:59:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/b7eddad4adc705d015a5a205dcebaaed6e68928b', 'message': '[WIP]Unexpected update in setup script for functional test\n\nThe following files are updated after building Devstack\non local environment.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese files are management for Git and should not be updated.\nOn the other hand, need it update for Zuul.\n\nTherefore, I will create these update files to outside\nof Git manage.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n'}, {'number': 3, 'created': '2020-06-10 02:13:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/eb46d4f7654f40f22062710b76565aafe7fb3621', 'message': '[WIP]Unexpected update in setup script for functional test\n\nThe following files are updated after building Devstack\non local environment.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese files are management for Git and should not be updated.\nOn the other hand, need it update for Zuul.\n\nTherefore, I will create these update files to outside\nof Git manage.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n'}, {'number': 4, 'created': '2020-06-10 05:15:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/00a0ccdbed97d8aa3220f60c49ec58b6d17c9914', 'message': '[WIP]Unexpected update in setup script for functional test\n\nThe following files are updated after building Devstack\non local environment.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese files are management for Git and should not be updated.\nOn the other hand, need it update for Zuul.\n\nTherefore, I will create these update files to outside\nof Git manage.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n'}, {'number': 5, 'created': '2020-06-10 08:52:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f84708eb96e6f3c3a50dfb65dcf5761cb5de35af', 'message': '[WIP]Unexpected update in setup script for functional test\n\nThe following files are updated after building Devstack\non local environment.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese files are management for Git and should not be updated.\nOn the other hand, need it update for Zuul.\n\nTherefore, I will create these update files to outside\nof Git manage.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n'}, {'number': 6, 'created': '2020-06-11 06:33:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/7190618d441c4ef5eab999dfa24b4444c40cf335', 'message': 'Unexpected update in setup script for functional test\n\nThe following files are updated after building Devstack\non local environment.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese files are management for Git and should not be updated.\nOn the other hand, need it update for Zuul.\n\nTherefore, I will create these update files to outside\nof Git manage.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n'}, {'number': 7, 'created': '2020-06-24 09:15:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/0562a9ae69488f4796ffeddc47d37593884c22d3', 'message': ""Unexpected update in setup script for functional test\n\nThere are some placeholder files for running functional test in zuul.\nThe contents of the files, such as `auth_url` of the following files,\nare updated while running devstack `stack.sh`.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese Git management files including the above, should not be\nmodified. Therefore, I will be fix as follow.\n\nThe need files to be change for Zuul are deploy by Ansible,\nso the deploy process is run with Ansible instead of the\n`devstack/lib/tacker` script.\n\nAllow `tools/test-setup-default-vim.sh` script to be executed\nby itself, so the git management files aren't updated by running\ndevstack `stack.sh`.\n\nAlso, as other improvements, replace the file path included in\nAnsible role to definition value.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n""}, {'number': 8, 'created': '2020-07-02 02:18:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/e633aeb14807c23d734f89f1992a71e1c4cbf2ba', 'message': ""Unexpected update in setup script for functional test\n\nThere are some placeholder files for running functional test in zuul.\nThe contents of the files, such as `auth_url` of the following files,\nare updated while running devstack `stack.sh`.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese Git management files including the above, should not be\nmodified. Therefore, I will be fix as follow.\n\nThe need files to be change for Zuul are deploy by Ansible,\nso the deploy process is run with Ansible instead of the\n`devstack/lib/tacker` script.\n\nAllow `tools/test-setup-default-vim.sh` script to be executed\nby itself, so the git management files aren't updated by running\ndevstack `stack.sh`.\n\nAlso, as other improvements, replace the file path included in\nAnsible role to definition value.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n""}, {'number': 9, 'created': '2020-07-06 07:12:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f13c59419f2c9eaf1117ec658a51ceffd95eded9', 'message': ""[WIP] Unexpected update in setup script for functional test\n\nThere are some placeholder files for running functional test in zuul.\nThe contents of the files, such as `auth_url` of the following files,\nare updated while running devstack `stack.sh`.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese Git management files including the above, should not be\nmodified. Therefore, I will be fix as follow.\n\nThe need files to be change for Zuul are deploy by Ansible,\nso the deploy process is run with Ansible instead of the\n`devstack/lib/tacker` script.\n\nAllow `tools/test-setup-default-vim.sh` script to be executed\nby itself, so the git management files aren't updated by running\ndevstack `stack.sh`.\n\nAlso, as other improvements, replace the file path included in\nAnsible role to definition value.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n""}, {'number': 10, 'created': '2020-07-06 10:51:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/a566bb9063a52c1bf15e00a449e90c5443bea49b', 'message': ""[WIP] Unexpected update in setup script for functional test\n\nThere are some placeholder files for running functional test in zuul.\nThe contents of the files, such as `auth_url` of the following files,\nare updated while running devstack `stack.sh`.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese Git management files including the above, should not be\nmodified. Therefore, I will be fix as follow.\n\nThe need files to be change for Zuul are deploy by Ansible,\nso the deploy process is run with Ansible instead of the\n`devstack/lib/tacker` script.\n\nAllow `tools/test-setup-default-vim.sh` script to be executed\nby itself, so the git management files aren't updated by running\ndevstack `stack.sh`.\n\nAlso, as other improvements, replace the file path included in\nAnsible role to definition value.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n""}, {'number': 11, 'created': '2020-07-07 08:04:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/349d4562f84a6c0b605261368294b05a9a180d2f', 'message': ""Unexpected update in setup script for functional test\n\nThere are some placeholder files for running functional test in zuul.\nThe contents of the files, such as `auth_url` of the following files,\nare updated while running devstack `stack.sh`.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese Git management files including the above, should not be\nmodified. Therefore, I will be fix as follow.\n\nThe need files to be change for Zuul are deploy by Ansible,\nso the deploy process is run with Ansible instead of the\n`devstack/lib/tacker` script.\n\nAllow `tools/test-setup-default-vim.sh` script to be executed\nby itself, so the git management files aren't updated by running\ndevstack `stack.sh`.\n\nAlso, as other improvements, replace the file path included in\nAnsible role to definition value.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n""}, {'number': 12, 'created': '2020-07-15 11:54:04.000000000', 'files': ['devstack/lib/tacker', 'roles/setup-default-vim/tasks/main.yaml', 'tools/test-setup-default-vim.sh', 'roles/show-net-setup/tasks/main.yaml'], 'web_link': 'https://opendev.org/openstack/tacker/commit/fa373795ba1000eb6ee369a21b412c5d32826e0f', 'message': ""Unexpected update in setup script for functional test\n\nThere are some placeholder files for running functional test in zuul.\nThe contents of the files, such as `auth_url` of the following files,\nare updated while running devstack `stack.sh`.\n\n* tacker/tests/etc/samples/local-vim.yaml\n* tools/test-setup-default-vim.sh\n\nThese Git management files including the above, should not be\nmodified. Therefore, I will be fix as follow.\n\nThe need files to be change for Zuul are deploy by Ansible,\nso the deploy process is run with Ansible instead of the\n`devstack/lib/tacker` script.\n\nAllow `tools/test-setup-default-vim.sh` script to be executed\nby itself, so the git management files aren't updated by running\ndevstack `stack.sh`.\n\nAlso, as other improvements, replace the file path included in\nAnsible role to definition value.\n\nChange-Id: Iad88c7adfe56e926ee0324d94787577ba066989b\nCloses-Bug: #1879303\n""}]",16,733721,fa373795ba1000eb6ee369a21b412c5d32826e0f,40,7,12,31730,,,0,"Unexpected update in setup script for functional test

There are some placeholder files for running functional test in zuul.
The contents of the files, such as `auth_url` of the following files,
are updated while running devstack `stack.sh`.

* tacker/tests/etc/samples/local-vim.yaml
* tools/test-setup-default-vim.sh

These Git management files including the above, should not be
modified. Therefore, I will be fix as follow.

The need files to be change for Zuul are deploy by Ansible,
so the deploy process is run with Ansible instead of the
`devstack/lib/tacker` script.

Allow `tools/test-setup-default-vim.sh` script to be executed
by itself, so the git management files aren't updated by running
devstack `stack.sh`.

Also, as other improvements, replace the file path included in
Ansible role to definition value.

Change-Id: Iad88c7adfe56e926ee0324d94787577ba066989b
Closes-Bug: #1879303
",git fetch https://review.opendev.org/openstack/tacker refs/changes/21/733721/4 && git format-patch -1 --stdout FETCH_HEAD,"['devstack/lib/tacker', 'roles/setup-default-vim/tasks/main.yaml']",2,ade811558ca4b2763f5c6426a72bffa49c441e7f,bug/1879303, src=/tmp/test-setup-default-vim.sh mode=0755 src=/tmp/local-vim.yaml, src=/opt/stack/tacker/tools/test-setup-default-vim.sh src=/opt/stack/tacker/tacker/tests/etc/samples/local-vim.yaml,11,10
openstack%2Fneutron~master~Id988cab87d32d5721cd91152df194fbb6fa703c5,openstack/neutron,master,Id988cab87d32d5721cd91152df194fbb6fa703c5,String to byte conversion should provide the encoding type,MERGED,2020-07-13 13:26:23.000000000,2020-07-22 14:24:23.000000000,2020-07-22 14:21:29.000000000,"[{'_account_id': 4694}, {'_account_id': 8313}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-13 13:26:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/2b30ce85b5e93f7e9c26d290c26d7be5f4649ae9', 'message': 'String to byte conversion should provide the encoding type\n\nChange-Id: Id988cab87d32d5721cd91152df194fbb6fa703c5\nCloses-Bug: #1887385\n'}, {'number': 2, 'created': '2020-07-13 17:09:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/82f17324ad0b599504ca2931f51390f9bff2b80d', 'message': 'String to byte conversion should provide the encoding type\n\nChange-Id: Id988cab87d32d5721cd91152df194fbb6fa703c5\nCloses-Bug: #1887385\n'}, {'number': 3, 'created': '2020-07-14 09:01:51.000000000', 'files': ['neutron/tests/functional/test_server.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/7a56b8f3bc5187846ce9f62dd9347ab5ffefcb5c', 'message': 'String to byte conversion should provide the encoding type\n\nChange-Id: Id988cab87d32d5721cd91152df194fbb6fa703c5\nCloses-Bug: #1887385\n'}]",1,740693,7a56b8f3bc5187846ce9f62dd9347ab5ffefcb5c,20,4,3,16688,,,0,"String to byte conversion should provide the encoding type

Change-Id: Id988cab87d32d5721cd91152df194fbb6fa703c5
Closes-Bug: #1887385
",git fetch https://review.opendev.org/openstack/neutron refs/changes/93/740693/3 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/test_server.py'],1,2b30ce85b5e93f7e9c26d290c26d7be5f4649ae9,bug/1887385," os.write(self.pipeout, bytes(self.port, 'utf-8'))"," os.write(self.pipeout, bytes(self.port))",1,1
openstack%2Ftacker~master~I9e664ec156bdcf3a95ecc1c6a0b582604f7f0335,openstack/tacker,master,I9e664ec156bdcf3a95ecc1c6a0b582604f7f0335,Fix: Instantiation fails with single VNFD,MERGED,2020-07-09 05:54:49.000000000,2020-07-22 14:21:41.000000000,2020-07-22 14:19:31.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 26222}, {'_account_id': 26588}, {'_account_id': 31072}]","[{'number': 1, 'created': '2020-07-09 05:54:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/3a200fe51b193484f16ecbb47333f80b5de8b439', 'message': 'Fix: Instantiation fails with single VNFD\n\nWhen executing ""Instantiate a VNF instance"" with single VNFD,\nit fails with an error.\nThis is because in instantiation, it\'s not possible to consider\nthat VNFD is single, and an error will occur when trying to get\nthe information of VNFD imported on the multiple premise.\n\nIn this patch, if the VNFD is single, that is,\nif the imported VNFD doesn\'t exist, fix to skipping\nthe subsequent VNFD information getting process.\n\nChange-Id: I9e664ec156bdcf3a95ecc1c6a0b582604f7f0335\nCloses-Bug: #1886634\n'}, {'number': 2, 'created': '2020-07-10 01:36:44.000000000', 'files': ['tacker/vnflcm/utils.py', 'tacker/tests/etc/samples/etsi/nfv/sample_vnfpkg_no_meta_single_vnfd/vnfd_helloworld_single.yaml', 'tacker/tests/unit/vnflcm/test_vnflcm_driver.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/362b30066a98b1c69d23b27212724c4c5fded092', 'message': 'Fix: Instantiation fails with single VNFD\n\nWhen executing ""Instantiate a VNF instance"" with single VNFD,\nit fails with an error.\nThis is because in instantiation, it\'s not possible to consider\nthat VNFD is single, and an error will occur when trying to get\nthe information of VNFD imported on the multiple premise.\n\nIn this patch, if the VNFD is single, that is,\nif the imported VNFD doesn\'t exist, fix to skipping\nthe subsequent VNFD information getting process.\nIn unittest, I found an error in the existing single VNFD,\nso correct it as well.\n\nChange-Id: I9e664ec156bdcf3a95ecc1c6a0b582604f7f0335\nCloses-Bug: #1886634\n'}]",2,740162,362b30066a98b1c69d23b27212724c4c5fded092,13,6,2,31072,,,0,"Fix: Instantiation fails with single VNFD

When executing ""Instantiate a VNF instance"" with single VNFD,
it fails with an error.
This is because in instantiation, it's not possible to consider
that VNFD is single, and an error will occur when trying to get
the information of VNFD imported on the multiple premise.

In this patch, if the VNFD is single, that is,
if the imported VNFD doesn't exist, fix to skipping
the subsequent VNFD information getting process.
In unittest, I found an error in the existing single VNFD,
so correct it as well.

Change-Id: I9e664ec156bdcf3a95ecc1c6a0b582604f7f0335
Closes-Bug: #1886634
",git fetch https://review.opendev.org/openstack/tacker refs/changes/62/740162/2 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/vnflcm/utils.py', 'tacker/tests/etc/samples/etsi/nfv/sample_vnfpkg_no_meta_single_vnfd/vnfd_helloworld_single.yaml', 'tacker/tests/unit/vnflcm/test_vnflcm_driver.py']",3,3a200fe51b193484f16ecbb47333f80b5de8b439,bug/1886634," @mock.patch.object(objects.VnfResource, 'create') @mock.patch.object(objects.VnfPackageVnfd, 'get_by_id') @mock.patch.object(objects.VnfInstance, ""save"") def test_instantiate_vnf_with_single_vnfd(self, mock_vnf_instance_save, mock_vnf_package_vnfd, mock_create): vnf_package_vnfd = fakes.return_vnf_package_vnfd() vnf_package_id = vnf_package_vnfd.package_uuid mock_vnf_package_vnfd.return_value = vnf_package_vnfd instantiate_vnf_req_dict = fakes.get_dummy_instantiate_vnf_request() instantiate_vnf_req_obj = \ objects.InstantiateVnfRequest.obj_from_primitive( instantiate_vnf_req_dict, self.context) vnf_instance_obj = fakes.return_vnf_instance() fake_csar = os.path.join(self.temp_dir, vnf_package_id) cfg.CONF.set_override('vnf_package_csar_path', self.temp_dir, group='vnf_package') test_utils.copy_csar_files( fake_csar, ""sample_vnfpkg_no_meta_single_vnfd"") self._mock_vnf_manager(vnf_resource_count=2) driver = vnflcm_driver.VnfLcmDriver() driver.instantiate_vnf(self.context, vnf_instance_obj, instantiate_vnf_req_obj) self.assertEqual(2, mock_create.call_count) self.assertEqual(""INSTANTIATED"", vnf_instance_obj.instantiation_state) shutil.rmtree(fake_csar) ",,40,1
openstack%2Ftripleo-quickstart-extras~master~Icb0e3137bbfb388f18e4456355ca2ae8638534c6,openstack/tripleo-quickstart-extras,master,Icb0e3137bbfb388f18e4456355ca2ae8638534c6,"Revert ""Add InternalTLSCAFile param when enabling overcloud ssl""",MERGED,2020-05-28 01:55:03.000000000,2020-07-22 14:19:15.000000000,2020-07-22 14:19:15.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 9592}, {'_account_id': 13861}, {'_account_id': 14250}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-05-28 01:55:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/93da0bd715ca9f1eebc1fa2a3f9283efeee139bc', 'message': 'Revert ""Add InternalTLSCAFile param when enabling overcloud ssl""\n\nWe\'ll fix this in tripleo-heat-templates.\n\nThis reverts commit 271c82dbd775e6ca6c20655ae3f781593d86ccb4.\n\nChange-Id: Icb0e3137bbfb388f18e4456355ca2ae8638534c6\n'}, {'number': 2, 'created': '2020-05-28 04:52:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/607921761bef1ec27b3c1f9fdf1e617ad0b2cb36', 'message': 'Revert ""Add InternalTLSCAFile param when enabling overcloud ssl""\n\nAdded default in tripleo-heat-templates.\n\nThis reverts commit 271c82dbd775e6ca6c20655ae3f781593d86ccb4.\n\nDepends-On: #https://review.opendev.org/#/c/731386/\nChange-Id: Icb0e3137bbfb388f18e4456355ca2ae8638534c6\n'}, {'number': 3, 'created': '2020-05-28 07:23:47.000000000', 'files': ['roles/overcloud-ssl/library/tls_tht.py'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart-extras/commit/150d5ae8c6d7fa52f17fcf67cdb678696cb9e73e', 'message': 'Revert ""Add InternalTLSCAFile param when enabling overcloud ssl""\n\nAdded default in tripleo-heat-templates.\n\nThis reverts commit 271c82dbd775e6ca6c20655ae3f781593d86ccb4.\n\nDepends-On: https://review.opendev.org/#/c/731386/\nChange-Id: Icb0e3137bbfb388f18e4456355ca2ae8638534c6\n'}]",0,731383,150d5ae8c6d7fa52f17fcf67cdb678696cb9e73e,48,8,3,8833,,,0,"Revert ""Add InternalTLSCAFile param when enabling overcloud ssl""

Added default in tripleo-heat-templates.

This reverts commit 271c82dbd775e6ca6c20655ae3f781593d86ccb4.

Depends-On: https://review.opendev.org/#/c/731386/
Change-Id: Icb0e3137bbfb388f18e4456355ca2ae8638534c6
",git fetch https://review.opendev.org/openstack/tripleo-quickstart-extras refs/changes/83/731383/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/overcloud-ssl/library/tls_tht.py'],1,93da0bd715ca9f1eebc1fa2a3f9283efeee139bc,,," output_dict[""parameter_defaults""][ ""InternalTLSCAFile""] = ""/etc/pki/ca-trust/source/anchors/overcloud-cacert.pem""",0,2
openstack%2Fopenstack-ansible-os_tempest~master~I37bc266eebd3a8455acac179055b87810143dfc4,openstack/openstack-ansible-os_tempest,master,I37bc266eebd3a8455acac179055b87810143dfc4,Deploy resources only when tempest_run is True,MERGED,2020-07-07 16:22:50.000000000,2020-07-22 14:13:03.000000000,2020-07-22 14:11:19.000000000,"[{'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28522}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-07 16:22:50.000000000', 'files': ['tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tempest/commit/7e8f1a90f194ae36fbfcd655d1ed7dd669ac64eb', 'message': 'Deploy resources only when tempest_run is True\n\nSetting this condition will make possible to only install tempest\nwithout  creating weird resources. We still will install them,\nwhen deployer explicitly set to run tempest with the role.\n\nChange-Id: I37bc266eebd3a8455acac179055b87810143dfc4\n'}]",0,739810,7e8f1a90f194ae36fbfcd655d1ed7dd669ac64eb,10,5,1,28619,,,0,"Deploy resources only when tempest_run is True

Setting this condition will make possible to only install tempest
without  creating weird resources. We still will install them,
when deployer explicitly set to run tempest with the role.

Change-Id: I37bc266eebd3a8455acac179055b87810143dfc4
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_tempest refs/changes/10/739810/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/main.yml'],1,7e8f1a90f194ae36fbfcd655d1ed7dd669ac64eb,, when: tempest_run | bool - tempest-run,,2,0
openstack%2Fovn-octavia-provider~master~I6bf1d578eea258b74208ee7712200fa291a13cfc,openstack/ovn-octavia-provider,master,I6bf1d578eea258b74208ee7712200fa291a13cfc,[WIP][DNM] Add API tests to tempest job,ABANDONED,2020-07-22 08:26:29.000000000,2020-07-22 14:11:52.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-22 08:26:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovn-octavia-provider/commit/9c1613efe5f27816c5e2987ca241f83271eccd7f', 'message': '[WIP][DNM] Add API tests to tempest job\n\nChange-Id: I6bf1d578eea258b74208ee7712200fa291a13cfc\n'}, {'number': 2, 'created': '2020-07-22 08:27:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ovn-octavia-provider/commit/04e12f7256e216808d2b16447fcae9b75329c5de', 'message': '[WIP][DNM] Add API tests to tempest job\n\nChange-Id: I6bf1d578eea258b74208ee7712200fa291a13cfc\n'}, {'number': 3, 'created': '2020-07-22 10:02:13.000000000', 'files': ['zuul.d/base.yaml'], 'web_link': 'https://opendev.org/openstack/ovn-octavia-provider/commit/b9fcb5fd895c51e8d10d0173dd320dd92a0f9578', 'message': '[WIP][DNM] Add API tests to tempest job\n\nChange-Id: I6bf1d578eea258b74208ee7712200fa291a13cfc\n'}]",0,742368,b9fcb5fd895c51e8d10d0173dd320dd92a0f9578,6,1,3,24791,,,0,"[WIP][DNM] Add API tests to tempest job

Change-Id: I6bf1d578eea258b74208ee7712200fa291a13cfc
",git fetch https://review.opendev.org/openstack/ovn-octavia-provider refs/changes/68/742368/2 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/base.yaml'],1,9c1613efe5f27816c5e2987ca241f83271eccd7f,," tempest_test_regex: ""octavia_tempest_plugin.tests.(api|scenario).v2""", tempest_test_regex: ^octavia_tempest_plugin.tests.scenario.v2,1,1
openstack%2Fmagnum~master~I0b586f05168ece84fd340ef7493a56688191053d,openstack/magnum,master,I0b586f05168ece84fd340ef7493a56688191053d,Add master_lb_enabled to cluster,MERGED,2020-05-06 22:52:25.000000000,2020-07-22 14:06:20.000000000,2020-07-22 10:41:33.000000000,"[{'_account_id': 6484}, {'_account_id': 8064}, {'_account_id': 20498}, {'_account_id': 22348}, {'_account_id': 28022}]","[{'number': 1, 'created': '2020-05-06 22:52:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/69a3cc4f4f598ea25d64c8a8121bc3b09e30c506', 'message': ""[WIP] Add master_lb_enabled to cluster\n\nAdding the master_lb_enabled option when creating a cluster,\nwhich will benefit both the cloud provider side and the end\nuser side. For cloud prodiver, they don't have to maintain\nseparated cluster templates with or w/o master_lb_enabled enabled.\nFor end user, they can easily use one single template to create\ndifferent clusters with different configs.\n\nTask: 39680\nStory: 2007634\n\nChange-Id: I0b586f05168ece84fd340ef7493a56688191053d\n""}, {'number': 2, 'created': '2020-06-26 05:23:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/9e2585774062c16213012b13ab916b2e9a4f8f98', 'message': ""[WIP] Add master_lb_enabled to cluster\n\nAdding the master_lb_enabled option when creating a cluster,\nwhich will benefit both the cloud provider side and the end\nuser side. For cloud prodiver, they don't have to maintain\nseparated cluster templates with or w/o master_lb_enabled enabled.\nFor end user, they can easily use one single template to create\ndifferent clusters with different configs.\n\nTask: 39680\nStory: 2007634\n\nChange-Id: I0b586f05168ece84fd340ef7493a56688191053d\n""}, {'number': 3, 'created': '2020-06-29 00:52:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/60ffc09a955c0069394d954d7e155d6e9380028d', 'message': ""[WIP] Add master_lb_enabled to cluster\n\nAdding the master_lb_enabled option when creating a cluster,\nwhich will benefit both the cloud provider side and the end\nuser side. For cloud prodiver, they don't have to maintain\nseparated cluster templates with or w/o master_lb_enabled enabled.\nFor end user, they can easily use one single template to create\ndifferent clusters with different configs.\n\nTask: 39680\nStory: 2007634\n\nChange-Id: I0b586f05168ece84fd340ef7493a56688191053d\n""}, {'number': 4, 'created': '2020-07-01 08:57:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/664218f49cca1992310bcc915d68203d0e8e1fdf', 'message': ""[WIP] Add master_lb_enabled to cluster\n\nAdding the master_lb_enabled option when creating a cluster,\nwhich will benefit both the cloud provider side and the end\nuser side. For cloud prodiver, they don't have to maintain\nseparated cluster templates with or w/o master_lb_enabled enabled.\nFor end user, they can easily use one single template to create\ndifferent clusters with different configs.\n\nTask: 39680\nStory: 2007634\n\nChange-Id: I0b586f05168ece84fd340ef7493a56688191053d\n""}, {'number': 5, 'created': '2020-07-02 03:01:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/66aa4dba5ffdc0db537d8dd5a22661607d543722', 'message': ""Add master_lb_enabled to cluster\n\nAdding the master_lb_enabled option when creating a cluster,\nwhich will benefit both the cloud provider side and the end\nuser side. For cloud prodiver, they don't have to maintain\nseparated cluster templates with or w/o master_lb_enabled enabled.\nFor end user, they can easily use one single template to create\ndifferent clusters with different configs.\n\nTask: 39680\nStory: 2007634\n\nChange-Id: I0b586f05168ece84fd340ef7493a56688191053d\n""}, {'number': 6, 'created': '2020-07-06 22:31:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/887a2059bf6eb2aa8d3c69be4cb0523c329ccb36', 'message': ""Add master_lb_enabled to cluster\n\nAdding the master_lb_enabled option when creating a cluster,\nwhich will benefit both the cloud provider side and the end\nuser side. For cloud prodiver, they don't have to maintain\nseparate cluster templates with or w/o master_lb_enabled enabled.\nFor end user, they can easily use one single template to create\ndifferent clusters with different configs.\n\nTask: 39680\nStory: 2007634\n\nChange-Id: I0b586f05168ece84fd340ef7493a56688191053d\n""}, {'number': 7, 'created': '2020-07-20 23:10:38.000000000', 'files': ['magnum/drivers/heat/k8s_coreos_template_def.py', 'magnum/drivers/heat/template_def.py', 'magnum/tests/unit/conductor/handlers/test_swarm_cluster_conductor.py', 'doc/source/user/index.rst', 'magnum/tests/unit/drivers/test_template_definition.py', 'magnum/api/controllers/v1/bay.py', 'magnum/tests/unit/db/utils.py', 'magnum/drivers/heat/swarm_mode_template_def.py', 'magnum/tests/unit/conductor/handlers/test_k8s_cluster_conductor.py', 'magnum/db/sqlalchemy/alembic/versions/95096e2334ee_add_master_lb_enabled_to_cluster.py', 'magnum/drivers/common/k8s_monitor.py', 'magnum/drivers/heat/k8s_fedora_template_def.py', 'magnum/tests/unit/conductor/test_monitors.py', 'releasenotes/notes/add-master_lb_enabled-to-cluster-c773fac9086b2531.yaml', 'magnum/drivers/heat/swarm_fedora_template_def.py', 'magnum/api/controllers/v1/cluster.py', 'contrib/drivers/heat/dcos_centos_template_def.py', 'contrib/drivers/k8s_opensuse_v1/template_def.py', 'magnum/db/sqlalchemy/models.py', 'magnum/drivers/mesos_ubuntu_v1/template_def.py', 'magnum/objects/cluster.py', 'magnum/tests/unit/objects/test_objects.py', 'magnum/tests/unit/conductor/handlers/test_mesos_cluster_conductor.py'], 'web_link': 'https://opendev.org/openstack/magnum/commit/946c1d67c73a1b325dadd27018c38555acfee52f', 'message': ""Add master_lb_enabled to cluster\n\nAdding the master_lb_enabled option when creating a cluster,\nwhich will benefit both the cloud provider side and the end\nuser side. For cloud prodiver, they don't have to maintain\nseparate cluster templates with or w/o master_lb_enabled enabled.\nFor end user, they can easily use one single template to create\ndifferent clusters with different configs.\n\nTask: 39680\nStory: 2007634\n\nChange-Id: I0b586f05168ece84fd340ef7493a56688191053d\n""}]",8,726017,946c1d67c73a1b325dadd27018c38555acfee52f,31,5,7,6484,,,0,"Add master_lb_enabled to cluster

Adding the master_lb_enabled option when creating a cluster,
which will benefit both the cloud provider side and the end
user side. For cloud prodiver, they don't have to maintain
separate cluster templates with or w/o master_lb_enabled enabled.
For end user, they can easily use one single template to create
different clusters with different configs.

Task: 39680
Story: 2007634

Change-Id: I0b586f05168ece84fd340ef7493a56688191053d
",git fetch https://review.opendev.org/openstack/magnum refs/changes/17/726017/6 && git format-patch -1 --stdout FETCH_HEAD,"['magnum/drivers/heat/k8s_coreos_template_def.py', 'magnum/drivers/heat/template_def.py', 'magnum/drivers/heat/swarm_mode_template_def.py', 'magnum/drivers/common/k8s_monitor.py', 'magnum/drivers/heat/k8s_fedora_template_def.py', 'magnum/tests/unit/conductor/test_monitors.py', 'releasenotes/notes/add-master_lb_enabled-to-cluster-c773fac9086b2531.yaml', 'magnum/drivers/heat/swarm_fedora_template_def.py', 'magnum/api/controllers/v1/cluster.py', 'contrib/drivers/heat/dcos_centos_template_def.py', 'contrib/drivers/k8s_opensuse_v1/template_def.py', 'magnum/db/sqlalchemy/models.py', 'magnum/drivers/mesos_ubuntu_v1/template_def.py', 'magnum/objects/cluster.py']",14,69a3cc4f4f598ea25d64c8a8121bc3b09e30c506,story/2007634-39680," # Version 1.22 Added master_lb_enabled VERSION = '1.22' 'master_lb_enabled': fields.BooleanField(default=False),", VERSION = '1.21',34,16
openstack%2Foslo.messaging~master~Ibbb811e988cc048e6c39a0c2336c716a1a0ddb30,openstack/oslo.messaging,master,Ibbb811e988cc048e6c39a0c2336c716a1a0ddb30,Move legacy grenade jobs to Zuul v3,MERGED,2020-07-20 13:52:35.000000000,2020-07-22 14:05:04.000000000,2020-07-22 13:58:19.000000000,"[{'_account_id': 8770}, {'_account_id': 10459}, {'_account_id': 20523}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-20 13:52:35.000000000', 'files': ['playbooks/oslo.messaging-telemetry-dsvm-integration-kafka/post.yaml', '.zuul.yaml', 'playbooks/oslo.messaging-telemetry-dsvm-integration-rabbit/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm-multinode/run.yaml', 'playbooks/oslo.messaging-telemetry-dsvm-integration-amqp1/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm-multinode/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm/run.yaml'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/a5ae9f4aa0e18787b4bb676b3e725c225deae96d', 'message': 'Move legacy grenade jobs to Zuul v3\n\nAlso deletes obsolete playbook files for telemetry tests that have\nbeen removed.\n\nChange-Id: Ibbb811e988cc048e6c39a0c2336c716a1a0ddb30\n'}]",0,741947,a5ae9f4aa0e18787b4bb676b3e725c225deae96d,11,5,1,8770,,,0,"Move legacy grenade jobs to Zuul v3

Also deletes obsolete playbook files for telemetry tests that have
been removed.

Change-Id: Ibbb811e988cc048e6c39a0c2336c716a1a0ddb30
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/47/741947/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/oslo.messaging-telemetry-dsvm-integration-kafka/post.yaml', '.zuul.yaml', 'playbooks/oslo.messaging-telemetry-dsvm-integration-rabbit/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm-multinode/run.yaml', 'playbooks/oslo.messaging-telemetry-dsvm-integration-amqp1/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm-multinode/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm/post.yaml', 'playbooks/oslo.messaging-src-grenade-dsvm/run.yaml']",8,a5ae9f4aa0e18787b4bb676b3e725c225deae96d,native-zuulv3-migration,,"- hosts: all name: Autoconverted job legacy-oslo.messaging-src-grenade-dsvm from old job gate-oslo.messaging-src-grenade-dsvm-ubuntu-xenial-nv tasks: - name: Ensure legacy workspace directory file: path: '{{ ansible_user_dir }}/workspace' state: directory - shell: cmd: | set -e set -x cat > clonemap.yaml << EOF clonemap: - name: openstack/devstack-gate dest: devstack-gate EOF /usr/zuul-env/bin/zuul-cloner -m clonemap.yaml --cache-dir /opt/git \ https://opendev.org \ openstack/devstack-gate executable: /bin/bash chdir: '{{ ansible_user_dir }}/workspace' environment: '{{ zuul | zuul_legacy_vars }}' - shell: cmd: | set -e set -x export PROJECTS=""openstack/grenade $PROJECTS"" export PYTHONUNBUFFERED=true export DEVSTACK_GATE_TEMPEST=1 export DEVSTACK_GATE_GRENADE=pullup export DEVSTACK_GATE_USE_PYTHON3=True export BRANCH_OVERRIDE=default if [ ""$BRANCH_OVERRIDE"" != ""default"" ] ; then export OVERRIDE_ZUUL_BRANCH=$BRANCH_OVERRIDE fi export DEVSTACK_PROJECT_FROM_GIT=$ZUUL_SHORT_PROJECT_NAME # Even if the branch is overridden, make sure we use # the correct branch using the OVERRIDE_*_PROJECT_BRANCH # variable. uc_project=`echo $DEVSTACK_PROJECT_FROM_GIT | tr [:lower:] [:upper:] | tr '-' '_' | sed 's/[^A-Z_]//'` export ""OVERRIDE_""$uc_project""_PROJECT_BRANCH""=$ZUUL_BRANCH cp devstack-gate/devstack-vm-gate-wrap.sh ./safe-devstack-vm-gate-wrap.sh ./safe-devstack-vm-gate-wrap.sh executable: /bin/bash chdir: '{{ ansible_user_dir }}/workspace' environment: '{{ zuul | zuul_legacy_vars }}' ",6,393
openstack%2Freleases~master~Ic51b31b0c1b4f917ca659f124f22f9910885d8e0,openstack/releases,master,Ic51b31b0c1b4f917ca659f124f22f9910885d8e0,Add new release note links,MERGED,2020-07-21 17:09:03.000000000,2020-07-22 14:02:34.000000000,2020-07-22 14:02:34.000000000,"[{'_account_id': 8213}, {'_account_id': 8543}, {'_account_id': 11904}, {'_account_id': 15343}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-21 17:09:03.000000000', 'files': ['deliverables/ussuri/tripleo-heat-templates.yaml', 'deliverables/ussuri/tripleo-ansible.yaml', 'deliverables/ussuri/tooz.yaml', 'deliverables/ussuri/kolla.yaml', 'deliverables/ussuri/tripleo-image-elements.yaml', 'deliverables/ussuri/paunch.yaml', 'deliverables/ussuri/puppet-ovn.yaml', 'deliverables/ussuri/tripleo-validations.yaml', 'deliverables/ussuri/congress-dashboard.yaml', 'deliverables/ussuri/cloudkitty-dashboard.yaml', 'deliverables/ussuri/compute-hyperv.yaml', 'deliverables/ussuri/zaqar.yaml', 'deliverables/ussuri/python-tripleoclient.yaml', 'deliverables/ussuri/networking-odl.yaml', 'deliverables/ussuri/puppet-tripleo.yaml', 'deliverables/ussuri/neutron-dynamic-routing.yaml', 'deliverables/ussuri/kolla-ansible.yaml', 'deliverables/ussuri/os-vif.yaml', 'deliverables/ussuri/blazar-dashboard.yaml', 'deliverables/ussuri/octavia-lib.yaml', 'deliverables/train/python-keystoneclient.yaml', 'deliverables/ussuri/tripleo-puppet-elements.yaml', 'deliverables/ussuri/os-net-config.yaml', 'deliverables/ussuri/tripleo-common.yaml', 'deliverables/ussuri/kayobe.yaml', 'deliverables/ussuri/openstack-ansible.yaml', 'deliverables/train/compute-hyperv.yaml', 'deliverables/ussuri/python-masakariclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/1b78be1a90f61e69a07720fb73fd665588186976', 'message': 'Add new release note links\n\nChange-Id: Ic51b31b0c1b4f917ca659f124f22f9910885d8e0\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",5,742252,1b78be1a90f61e69a07720fb73fd665588186976,11,6,1,11904,,,0,"Add new release note links

Change-Id: Ic51b31b0c1b4f917ca659f124f22f9910885d8e0
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/52/742252/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/ussuri/tripleo-heat-templates.yaml', 'deliverables/ussuri/tripleo-ansible.yaml', 'deliverables/ussuri/tooz.yaml', 'deliverables/ussuri/kolla.yaml', 'deliverables/ussuri/tripleo-image-elements.yaml', 'deliverables/ussuri/paunch.yaml', 'deliverables/ussuri/puppet-ovn.yaml', 'deliverables/ussuri/tripleo-validations.yaml', 'deliverables/ussuri/congress-dashboard.yaml', 'deliverables/ussuri/cloudkitty-dashboard.yaml', 'deliverables/ussuri/compute-hyperv.yaml', 'deliverables/ussuri/zaqar.yaml', 'deliverables/ussuri/python-tripleoclient.yaml', 'deliverables/ussuri/networking-odl.yaml', 'deliverables/ussuri/puppet-tripleo.yaml', 'deliverables/ussuri/neutron-dynamic-routing.yaml', 'deliverables/ussuri/kolla-ansible.yaml', 'deliverables/ussuri/os-vif.yaml', 'deliverables/ussuri/blazar-dashboard.yaml', 'deliverables/ussuri/octavia-lib.yaml', 'deliverables/train/python-keystoneclient.yaml', 'deliverables/ussuri/tripleo-puppet-elements.yaml', 'deliverables/ussuri/os-net-config.yaml', 'deliverables/ussuri/tripleo-common.yaml', 'deliverables/ussuri/kayobe.yaml', 'deliverables/ussuri/openstack-ansible.yaml', 'deliverables/train/compute-hyperv.yaml', 'deliverables/ussuri/python-masakariclient.yaml']",28,1b78be1a90f61e69a07720fb73fd665588186976,reno-links,release-notes: https://docs.openstack.org/releasenotes/python-masakariclient/ussuri.html,,28,0
openstack%2Freleases~master~I18ab5d7afa350746ba2310a219755f07ef957b06,openstack/releases,master,I18ab5d7afa350746ba2310a219755f07ef957b06,Create validations-libs and validations-common min version,MERGED,2020-07-15 13:59:38.000000000,2020-07-22 14:02:33.000000000,2020-07-22 14:02:33.000000000,"[{'_account_id': 308}, {'_account_id': 3153}, {'_account_id': 9592}, {'_account_id': 11491}, {'_account_id': 11904}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 28223}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 13:59:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/b797b14dcd4160a58c3c035d921413283174c440', 'message': 'Create validations-libs and validations-common min version\n\nAdd validations-libs 1.0.2 min version\nAdd validations-common 1.0.1 min version\n\nChange-Id: I18ab5d7afa350746ba2310a219755f07ef957b06\n'}, {'number': 2, 'created': '2020-07-15 14:08:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/05fb2efda3354536f8427f1e34880e00d17aaebf', 'message': 'Create validations-libs and validations-common min version\n\nAdd validations-libs 1.0.2 min version\nAdd validations-common 1.0.1 min version\n\nChange-Id: I18ab5d7afa350746ba2310a219755f07ef957b06\n'}, {'number': 3, 'created': '2020-07-16 07:41:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/ef4b99aa1d5abd80c847fe5f9e357ca98220637f', 'message': 'Create validations-libs and validations-common min version\n\nAdd validations-libs 1.0.2 min version\nAdd validations-common 1.0.1 min version\n\nChange-Id: I18ab5d7afa350746ba2310a219755f07ef957b06\n'}, {'number': 4, 'created': '2020-07-16 09:47:38.000000000', 'files': ['deliverables/_independent/validations-common.yaml', 'deliverables/_independent/validations-libs.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e49a68ac8ed84d2935efb51c7974ae13057f4f04', 'message': 'Create validations-libs and validations-common min version\n\nAdd validations-libs 1.0.2 min version\nAdd validations-common 1.1.0 min version\n\nChange-Id: I18ab5d7afa350746ba2310a219755f07ef957b06\n'}]",4,741212,e49a68ac8ed84d2935efb51c7974ae13057f4f04,21,9,4,16515,,,0,"Create validations-libs and validations-common min version

Add validations-libs 1.0.2 min version
Add validations-common 1.1.0 min version

Change-Id: I18ab5d7afa350746ba2310a219755f07ef957b06
",git fetch https://review.opendev.org/openstack/releases refs/changes/12/741212/3 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/_independent/validations-common.yaml', 'deliverables/_independent/validations-libs.yaml']",2,b797b14dcd4160a58c3c035d921413283174c440,, - projects: - hash: 21a722adac9c844d33a07323d111d0fe7a888ab3 repo: openstack/validations-libs version: 1.0.2,,8,0
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6,openstack/tripleo-heat-templates,stable/train,I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6,Use a single task for fact gathering,ABANDONED,2020-07-22 13:54:38.000000000,2020-07-22 13:56:05.000000000,,[{'_account_id': 14985}],"[{'number': 1, 'created': '2020-07-22 13:54:38.000000000', 'files': ['common/deploy-steps-playbooks-common.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/07ea09736ba9220665edc2f39da8d57f235336ad', 'message': ""Use a single task for fact gathering\n\nWe don't need to do different plays for fact gathering as we can simply\ninclude both the source/remote hosts in a single pattern.\n\nFor the record, this was added because we were using local connections\nfor the undercloud when running under mistral however this is no longer\nthe case. Additionally I believe we stopped doing that later as well but\nthis may not be able to be backported to run under mistral. Original\ncontext https://review.opendev.org/#/c/518323/\n\nChange-Id: I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6\n(cherry picked from commit 27ec857cf2696a005eedb397207a0e78658b9989)\n""}]",0,742435,07ea09736ba9220665edc2f39da8d57f235336ad,2,1,1,3153,,,0,"Use a single task for fact gathering

We don't need to do different plays for fact gathering as we can simply
include both the source/remote hosts in a single pattern.

For the record, this was added because we were using local connections
for the undercloud when running under mistral however this is no longer
the case. Additionally I believe we stopped doing that later as well but
this may not be able to be backported to run under mistral. Original
context https://review.opendev.org/#/c/518323/

Change-Id: I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6
(cherry picked from commit 27ec857cf2696a005eedb397207a0e78658b9989)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/35/742435/1 && git format-patch -1 --stdout FETCH_HEAD,['common/deploy-steps-playbooks-common.yaml'],1,07ea09736ba9220665edc2f39da8d57f235336ad,train/gather,"- hosts: ""{{ deploy_source_host }}:{{ deploy_target_host }}"" name: Gather facts","- hosts: ""{{ deploy_source_host }}"" name: Gather facts from undercloud gather_facts: yes any_errors_fatal: true ignore_unreachable: ""{{ scale_ignore_unreachable | default(false) }}"" become: false tags: - facts - hosts: ""{{ deploy_target_host }}"" name: Gather facts from overcloud",2,11
openstack%2Freleases~master~I604e2c60b327a75ef29a8f2cc35e5a019e673de2,openstack/releases,master,I604e2c60b327a75ef29a8f2cc35e5a019e673de2,Release ansible-config_template,MERGED,2020-07-21 16:23:05.000000000,2020-07-22 13:55:36.000000000,2020-07-22 13:55:36.000000000,"[{'_account_id': 1004}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-21 16:23:05.000000000', 'files': ['deliverables/_independent/ansible-config_template.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/90d92571da213984d27eeb947c576cced45ac3c1', 'message': 'Release ansible-config_template\n\nChange-Id: I604e2c60b327a75ef29a8f2cc35e5a019e673de2\n'}]",0,742238,90d92571da213984d27eeb947c576cced45ac3c1,8,4,1,28619,,,0,"Release ansible-config_template

Change-Id: I604e2c60b327a75ef29a8f2cc35e5a019e673de2
",git fetch https://review.opendev.org/openstack/releases refs/changes/38/742238/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/ansible-config_template.yaml'],1,90d92571da213984d27eeb947c576cced45ac3c1,, - version: 1.1.1 projects: - repo: openstack/ansible-config_template hash: 4ed672e3992f41dc4020ba68b8ea12d657a11710,,4,0
openstack%2Fopenstack-ansible-os_glance~master~Icf572c656c24b646110ce3fd90727205c22eff15,openstack/openstack-ansible-os_glance,master,Icf572c656c24b646110ce3fd90727205c22eff15,Make possible to run glance-api not with uwsgi,MERGED,2020-04-08 18:00:08.000000000,2020-07-22 13:50:32.000000000,2020-04-27 15:29:09.000000000,"[{'_account_id': 1004}, {'_account_id': 16011}, {'_account_id': 22348}, {'_account_id': 28619}]","[{'number': 1, 'created': '2020-04-08 18:00:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_glance/commit/73ab968afafa05169f914273c7ef526cdd28ee09', 'message': 'Make possible to run glance-api not with uwsgi\n\nWhile running as uwsgi glance has malfunctioning interoperable image\nimport feature. So we add new variable `glance_use_uwsgi` based on which\nglance will be either started via uwsgi or as a regular service.\nAlso once glance_use_uwsgi is true, enable_image_import will be disabled\n\nChange-Id: Icf572c656c24b646110ce3fd90727205c22eff15\n'}, {'number': 2, 'created': '2020-04-08 18:43:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_glance/commit/a6134f7ebce21985212ed6eebb5e5b6639d0611d', 'message': 'Make possible to run glance-api not with uwsgi\n\nWhile running as uwsgi glance has malfunctioning interoperable image\nimport feature. So we add new variable `glance_use_uwsgi` based on which\nglance will be either started via uwsgi or as a regular service.\nAlso once glance_use_uwsgi is true, enable_image_import will be disabled\n\nChange-Id: Icf572c656c24b646110ce3fd90727205c22eff15\n'}, {'number': 3, 'created': '2020-04-13 20:23:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_glance/commit/f070b05596c3e752497b47d6b1f053721e3fe344', 'message': 'Make possible to run glance-api not with uwsgi\n\nWhile running as uwsgi glance has malfunctioning interoperable image\nimport feature. So we add new variable `glance_use_uwsgi` based on which\nglance will be either started via uwsgi or as a regular service.\nAlso once glance_use_uwsgi is true, enable_image_import will be disabled\n\nChange-Id: Icf572c656c24b646110ce3fd90727205c22eff15\n'}, {'number': 4, 'created': '2020-04-27 10:54:15.000000000', 'files': ['templates/glance-api.conf.j2', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_glance/commit/fbe7177e7d7cd09ae602941bfb1be86a6a14ae99', 'message': 'Make possible to run glance-api not with uwsgi\n\nWhile running as uwsgi glance has malfunctioning interoperable image\nimport feature. So we add new variable `glance_use_uwsgi` based on which\nglance will be either started via uwsgi or as a regular service.\nAlso once glance_use_uwsgi is true, enable_image_import will be disabled\n\nChange-Id: Icf572c656c24b646110ce3fd90727205c22eff15\n'}]",4,718530,fbe7177e7d7cd09ae602941bfb1be86a6a14ae99,23,4,4,28619,,,0,"Make possible to run glance-api not with uwsgi

While running as uwsgi glance has malfunctioning interoperable image
import feature. So we add new variable `glance_use_uwsgi` based on which
glance will be either started via uwsgi or as a regular service.
Also once glance_use_uwsgi is true, enable_image_import will be disabled

Change-Id: Icf572c656c24b646110ce3fd90727205c22eff15
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_glance refs/changes/30/718530/4 && git format-patch -1 --stdout FETCH_HEAD,"['templates/glance-api.conf.j2', 'defaults/main.yml']",2,73ab968afafa05169f914273c7ef526cdd28ee09,,"# With enabled uwsgi glance has broken functionality of # the interoperable import feature (and maybe smth else) glance_use_uwsgi: True execstarts: ""{{ _glance_bin }}/glance-api"" wsgi_app: ""{{ glance_use_uwsgi }}""", wsgi_app: True,7,1
openstack%2Ftripleo-quickstart~master~Ie737aca08ec237cb934392f2ab12aff0cce0f781,openstack/tripleo-quickstart,master,Ie737aca08ec237cb934392f2ab12aff0cce0f781,"Revert ""Removing some profile overrides from featureset062""",ABANDONED,2020-07-22 13:30:42.000000000,2020-07-22 13:49:27.000000000,,"[{'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24162}, {'_account_id': 30750}]","[{'number': 1, 'created': '2020-07-22 13:30:42.000000000', 'files': ['config/general_config/featureset062.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/496eb3fb11b684e15951e946037744310c3ce08e', 'message': 'Revert ""Removing some profile overrides from featureset062""\n\nTill a new release of tempestconf is available.\n\nThis reverts commit 4ce51449e97dd55836e5eb28b947548fef3a3efb.\n\nChange-Id: Ie737aca08ec237cb934392f2ab12aff0cce0f781\n'}]",3,742427,496eb3fb11b684e15951e946037744310c3ce08e,5,9,1,12393,,,0,"Revert ""Removing some profile overrides from featureset062""

Till a new release of tempestconf is available.

This reverts commit 4ce51449e97dd55836e5eb28b947548fef3a3efb.

Change-Id: Ie737aca08ec237cb934392f2ab12aff0cce0f781
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/27/742427/1 && git format-patch -1 --stdout FETCH_HEAD,['config/general_config/featureset062.yml'],1,496eb3fb11b684e15951e946037744310c3ce08e,taiga_1699," load_balancer.member_role: '""Member""'",,1,0
openstack%2Fgovernance~master~I487ab4a608196a2d70acec40fa83805a722bc0d7,openstack/governance,master,I487ab4a608196a2d70acec40fa83805a722bc0d7,migrate from mock to built in unittest.mock,MERGED,2020-04-24 16:12:08.000000000,2020-07-22 13:46:33.000000000,2020-05-07 00:18:08.000000000,"[{'_account_id': 308}, {'_account_id': 1004}, {'_account_id': 7198}, {'_account_id': 8099}, {'_account_id': 8556}, {'_account_id': 11904}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 16465}, {'_account_id': 16643}, {'_account_id': 17068}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-04-24 16:12:08.000000000', 'files': ['goals/proposed/use-builtin-mock.rst'], 'web_link': 'https://opendev.org/openstack/governance/commit/a6dabee544a487ea9b7e694580ad5986e74f3b00', 'message': 'migrate from mock to built in unittest.mock\n\nChange-Id: I487ab4a608196a2d70acec40fa83805a722bc0d7\n'}]",0,722924,a6dabee544a487ea9b7e694580ad5986e74f3b00,21,13,1,14288,,,0,"migrate from mock to built in unittest.mock

Change-Id: I487ab4a608196a2d70acec40fa83805a722bc0d7
",git fetch https://review.opendev.org/openstack/governance refs/changes/24/722924/1 && git format-patch -1 --stdout FETCH_HEAD,['goals/proposed/use-builtin-mock.rst'],1,a6dabee544a487ea9b7e694580ad5986e74f3b00,formal-vote,"========================================= Migrate from mock to bultin unittest.mock ========================================= The external mock library was necessary in python versions less than 3.3. The built in unittest.mock provides the functionality of the old mock library and also provides a more stable interface vs the constantly updating external mock library. Champion ======== * Matthew Thode <mthode@mthode.org> (prometheanfire) * Sean McGinnis <sean.mcginnis@gmail.com> (smcginnis) Gerrit Topic ============ To facilitate tracking, commits related to this goal should use the gerrit topic:: unittest.mock A new Story in https://storyboard.openstack.org/ will be created to track any related patch. Completion Criteria =================== #. All projects with managed constraints do not use the mock library but use the built in unittest.mock. References ========== The main refrence is upstream documentation located at [1]_ An example review can be found in [2]_ Current progress is tracked in [3]_ Current State / Anticipated Impact ================================== There are over 100 repositories needing this change, a short selection is listed below. * openstack/ironic * openstack/ironic * openstack/ironic-ui * openstack/karbor-dashboard * openstack/keystoneauth * openstack/keystoneauth * openstack/keystoneauth * openstack/keystonemiddleware * openstack/keystonemiddleware * openstack/kuryr-tempest-plugin * openstack/magnum * openstack/manila * openstack/mistral-dashboard * openstack/mistral-tempest-plugin * openstack/monasca-analytics * openstack/monasca-analytics * openstack/monasca-ceilometer * openstack/monasca-events-api * openstack/monasca-log-api * openstack/monasca-statsd * openstack/monasca-tempest-plugin * openstack/monasca-transform * openstack/monasca-transform * openstack/monasca-ui * openstack/networking-l2gw * openstack/networking-l2gw-tempest-plugin * openstack/networking-midonet * openstack/networking-powervm * openstack/networking-sfc * openstack/neutron * openstack/neutron-dynamic-routing * openstack/neutron-fwaas * openstack/neutron-fwaas-dashboard * openstack/neutron-vpnaas-dashboard * openstack/nova * openstack/nova-powervm * openstack/openstack-ansible * openstack/openstack-doc-tools * openstack/openstack-doc-tools * openstack/openstack-health * openstack/openstacksdk * openstack/os-brick * openstack/os-collect-config Links ===== .. [1] https://docs.python.org/3/library/unittest.mock.html .. [2] https://review.opendev.org/#/c/720914/ .. [3] https://review.opendev.org/#/q/branch:master+topic:unittest.mock ",,100,0
openstack%2Foslo.vmware~master~I72082f10a184a2451dfda3d002a9288fefcef961,openstack/oslo.vmware,master,I72082f10a184a2451dfda3d002a9288fefcef961,Add backend-independent access to cookiejar,MERGED,2020-07-14 08:04:20.000000000,2020-07-22 13:45:44.000000000,2020-07-22 13:42:34.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-14 08:04:20.000000000', 'files': ['oslo_vmware/tests/test_service.py', 'releasenotes/notes/bp-oslo-vmware-soap-library-switch-cookiejar-access-d7efcc23d0eaee98.yaml', 'oslo_vmware/tests/test_vim.py', 'oslo_vmware/tests/test_rw_handles.py', 'oslo_vmware/rw_handles.py', 'oslo_vmware/service.py'], 'web_link': 'https://opendev.org/openstack/oslo.vmware/commit/dc4eb020ad3f9ebd90d030bd20853019918c51b9', 'message': 'Add backend-independent access to cookiejar\n\nHaving the cookiejar available as attribute on the client instead of\nsome child objects exposes an interface which depending code can rely\non. This will help with upcoming efforts to switch the SOAP library\nbacking oslo.vmware.\n\nThis is part of phase 1 of\nhttps://specs.openstack.org/openstack/oslo-specs/specs/victoria/oslo-vmware-soap-library-switch.html\n\nChange-Id: I72082f10a184a2451dfda3d002a9288fefcef961\n'}]",0,740909,dc4eb020ad3f9ebd90d030bd20853019918c51b9,10,3,1,26250,,,0,"Add backend-independent access to cookiejar

Having the cookiejar available as attribute on the client instead of
some child objects exposes an interface which depending code can rely
on. This will help with upcoming efforts to switch the SOAP library
backing oslo.vmware.

This is part of phase 1 of
https://specs.openstack.org/openstack/oslo-specs/specs/victoria/oslo-vmware-soap-library-switch.html

Change-Id: I72082f10a184a2451dfda3d002a9288fefcef961
",git fetch https://review.opendev.org/openstack/oslo.vmware refs/changes/09/740909/1 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_vmware/tests/test_service.py', 'releasenotes/notes/bp-oslo-vmware-soap-library-switch-cookiejar-access-d7efcc23d0eaee98.yaml', 'oslo_vmware/tests/test_vim.py', 'oslo_vmware/tests/test_rw_handles.py', 'oslo_vmware/rw_handles.py', 'oslo_vmware/service.py']",6,dc4eb020ad3f9ebd90d030bd20853019918c51b9,bp/oslo-vmware-soap-library-switch-2,"class CompatibilitySudsClient(client.Client): """"""suds client with added cookiejar attribute The cookiejar properties allow reading/setting the cookiejar used by the underlying transport. """""" def __init__(self, *args, **kwargs): super(CompatibilitySudsClient, self).__init__(*args, **kwargs) @property def cookiejar(self): return self.options.transport.cookiejar @cookiejar.setter def cookiejar(self, cookies): self.options.transport.session.cookies = cookies self.options.transport.cookiejar = cookies self.client = CompatibilitySudsClient(self.wsdl_url, transport=transport, location=self.soap_url, plugins=[ServiceMessagePlugin()], cache=_CACHE) cookies = self.client.cookiejar"," self.client = client.Client(self.wsdl_url, transport=transport, location=self.soap_url, plugins=[ServiceMessagePlugin()], cache=_CACHE) cookies = self.client.options.transport.cookiejar",41,14
openstack%2Fopenstack-ansible~master~I3a99bfb3fec9f47d407ec6f6555094836aedb785,openstack/openstack-ansible,master,I3a99bfb3fec9f47d407ec6f6555094836aedb785,Ensure distro packages are present for utility wheel build,MERGED,2020-07-06 08:40:41.000000000,2020-07-22 13:40:16.000000000,2020-07-22 13:36:43.000000000,"[{'_account_id': 22348}, {'_account_id': 25600}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-06 08:40:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/f3be87c4f5c314872b20484f4f22d1ade0773edc', 'message': 'Ensure distro packages are present for utility wheel build\n\nThe python packages installed into the utility container require\ngcc and the python development packages to be present in order to\nbuild the wheels.\n\nChange-Id: I3a99bfb3fec9f47d407ec6f6555094836aedb785\n'}, {'number': 2, 'created': '2020-07-06 10:35:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/fce4a1ed46de96fcd98571c04c2de433c2854767', 'message': 'Ensure distro packages are present for utility wheel build\n\nThe python packages installed into the utility container require\ngcc and the python development packages to be present in order to\nbuild the wheels.\n\nChange-Id: I3a99bfb3fec9f47d407ec6f6555094836aedb785\n'}, {'number': 3, 'created': '2020-07-06 22:10:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/046a770ae93a8337670623c5cd5f3cf52b602f7d', 'message': 'Ensure distro packages are present for utility wheel build\n\nThe python packages installed into the utility container require\ngcc and the python development packages to be present in order to\nbuild the wheels.\n\nChange-Id: I3a99bfb3fec9f47d407ec6f6555094836aedb785\n'}, {'number': 4, 'created': '2020-07-07 07:42:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/cc700764ade4c3043d9e271c9c92e0cc3fcf14b2', 'message': 'Ensure distro packages are present for utility wheel build\n\nThe python packages installed into the utility container require\ngcc and the python development packages to be present in order to\nbuild the wheels.\n\nChange-Id: I3a99bfb3fec9f47d407ec6f6555094836aedb785\n'}, {'number': 5, 'created': '2020-07-07 09:09:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/97722753a53e1ff841ce990f1b1891a1b84784f6', 'message': 'Ensure distro packages are present for utility wheel build\n\nThe python packages installed into the utility container require\ngcc and the python development packages to be present in order to\nbuild the wheels.\n\nChange-Id: I3a99bfb3fec9f47d407ec6f6555094836aedb785\n'}, {'number': 6, 'created': '2020-07-07 12:43:51.000000000', 'files': ['inventory/group_vars/utility_all.yml', 'playbooks/utility-install.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/abf978005752c75032f362f3bd1eaa4f70155ad4', 'message': 'Ensure distro packages are present for utility wheel build\n\nThe python packages installed into the utility container require\ngcc and the python development packages to be present in order to\nbuild the wheels.\n\nChange-Id: I3a99bfb3fec9f47d407ec6f6555094836aedb785\n'}]",0,739428,abf978005752c75032f362f3bd1eaa4f70155ad4,18,3,6,25023,,,0,"Ensure distro packages are present for utility wheel build

The python packages installed into the utility container require
gcc and the python development packages to be present in order to
build the wheels.

Change-Id: I3a99bfb3fec9f47d407ec6f6555094836aedb785
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/28/739428/5 && git format-patch -1 --stdout FETCH_HEAD,"['inventory/group_vars/utility_all.yml', 'playbooks/utility-install.yml']",2,f3be87c4f5c314872b20484f4f22d1ade0773edc,," venv_build_distro_package_list: ""{{ utility_devel_distro_packages }}""",,6,0
openstack%2Freleases~master~Ife9d551d1752c3c64fc9073ff55e750655f5dc60,openstack/releases,master,Ife9d551d1752c3c64fc9073ff55e750655f5dc60,Release hacking 3.2.0,MERGED,2020-07-21 16:34:50.000000000,2020-07-22 13:38:22.000000000,2020-07-22 13:38:22.000000000,"[{'_account_id': 5689}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-21 16:34:50.000000000', 'files': ['deliverables/_independent/hacking.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/fe0335041306aab575392af096ab28cb4dbff96d', 'message': 'Release hacking 3.2.0\n\nChange-Id: Ife9d551d1752c3c64fc9073ff55e750655f5dc60\n'}]",0,742242,fe0335041306aab575392af096ab28cb4dbff96d,9,4,1,8556,,,0,"Release hacking 3.2.0

Change-Id: Ife9d551d1752c3c64fc9073ff55e750655f5dc60
",git fetch https://review.opendev.org/openstack/releases refs/changes/42/742242/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/hacking.yaml'],1,fe0335041306aab575392af096ab28cb4dbff96d,, - version: 3.2.0 projects: - repo: openstack/hacking hash: 93e6cd290471f9e58f6d052eea508213a55f98c3,,4,0
openstack%2Freviewstats~master~I6b80b62d8e3c8bd9432f567e0725c191cef6f715,openstack/reviewstats,master,I6b80b62d8e3c8bd9432f567e0725c191cef6f715,Use unittest.mock instead of third party mock,MERGED,2020-03-13 16:32:45.000000000,2020-07-22 13:31:15.000000000,2020-07-22 13:29:29.000000000,"[{'_account_id': 1736}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 27621}, {'_account_id': 28522}, {'_account_id': 31245}]","[{'number': 1, 'created': '2020-03-13 16:32:45.000000000', 'files': ['test-requirements.txt', 'reviewstats/tests/test_projectinfo.py'], 'web_link': 'https://opendev.org/openstack/reviewstats/commit/9b9aabe74a7de830980e26672f68cffa0c821ea8', 'message': 'Use unittest.mock instead of third party mock\n\nWe can now use the standard library mock library instead of the third\nparty one previously needed for py27 compatibility.\n\nChange-Id: I6b80b62d8e3c8bd9432f567e0725c191cef6f715\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,713019,9b9aabe74a7de830980e26672f68cffa0c821ea8,11,6,1,11904,,,0,"Use unittest.mock instead of third party mock

We can now use the standard library mock library instead of the third
party one previously needed for py27 compatibility.

Change-Id: I6b80b62d8e3c8bd9432f567e0725c191cef6f715
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/reviewstats refs/changes/19/713019/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'reviewstats/tests/test_projectinfo.py']",2,9b9aabe74a7de830980e26672f68cffa0c821ea8,unittest.mock,from unittest import mock,import mock,1,2
openstack%2Ftripleo-quickstart~master~If526e9b0b6b2d272c35118275c5000c5f1e23aee,openstack/tripleo-quickstart,master,If526e9b0b6b2d272c35118275c5000c5f1e23aee,Removing some profile overrides from featureset062,MERGED,2020-07-09 14:42:04.000000000,2020-07-22 13:30:42.000000000,2020-07-22 03:00:51.000000000,"[{'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 24162}, {'_account_id': 30750}]","[{'number': 1, 'created': '2020-07-09 14:42:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/1759f25e895d2fcb934e03446031d19c175ae1d9', 'message': ""[DNM] Testing python-tempestconf octavia chagnes\n\nSince member role is added in the python-tempestconf,\nwe don't need to override it from featureset file.\n\nDepends-On: https://review.opendev.org/#/c/731501\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n""}, {'number': 2, 'created': '2020-07-09 14:54:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/4c15852bedd3d8e31c4ba739616202ea0e152737', 'message': 'Removing profile overrides from featureset063\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make\ntempest_tempestconf_profile_overrides use abolute in\nfeatureset062.yaml.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n\nDepends-On: https://review.opendev.org/#/c/731501\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}, {'number': 3, 'created': '2020-07-14 05:30:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/7789e4750b2ed21282d1fc4d6f2dab5bf94e8aef', 'message': 'Removing profile overrides from featureset063\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make\ntempest_tempestconf_profile_overrides use abolute in\nfeatureset062.yaml.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n\nDepends-On: https://review.opendev.org/#/c/731501\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}, {'number': 4, 'created': '2020-07-14 13:03:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/3ab24ace87fd621f1856a3485dabbd67b9738f31', 'message': 'Removing profile overrides from featureset063\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make some options use\nabsolute under tempest_tempestconf_profile_overrides in\nfeatureset062.yaml.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n\nDepends-On: https://review.opendev.org/#/c/731501\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}, {'number': 5, 'created': '2020-07-15 16:44:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/224a705e8f48f4b4849957f1b8af0318f960d7f1', 'message': 'Removing profile overrides from featureset063\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make some options use\nabsolute under tempest_tempestconf_profile_overrides in\nfeatureset062.yaml.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n\nDepends-On: https://review.opendev.org/#/c/731501\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}, {'number': 6, 'created': '2020-07-15 17:41:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/b20f5db9c1423e81a08f1fea0d04b6e0679aab92', 'message': 'Removing profile overrides from featureset062\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make some options use\nabsolute under tempest_tempestconf_profile_overrides in\nfeatureset062.yaml.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n\nDepends-On: https://review.opendev.org/#/c/731501\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}, {'number': 7, 'created': '2020-07-17 12:52:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/3bcca34e47bf381be0d43e1577b19f1346d2b072', 'message': 'Removing profile overrides from featureset062\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make some options use\nabsolute under tempest_tempestconf_profile_overrides in\nfeatureset062.yaml.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n\nDepends-On: https://review.opendev.org/#/c/738488/\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}, {'number': 8, 'created': '2020-07-20 14:06:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/c285b57057378abdbb41391eb3aa55c273688788', 'message': 'Removing some profile overrides from featureset062\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make some options use absolute\nunder tempest_tempestconf_profile_overrides in featureset062.yaml.\n\nOptions like member_role by default set by python-tempestconf[2].\nOverriding those values might cause tempest tests run failure.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n[2] https://review.opendev.org/#/c/731501/\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}, {'number': 9, 'created': '2020-07-21 11:13:43.000000000', 'files': ['config/general_config/featureset062.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/4ce51449e97dd55836e5eb28b947548fef3a3efb', 'message': 'Removing some profile overrides from featureset062\n\nPython-tempestconf can set load_balancer section config\nin tempest.conf[1]. This work will make some options use absolute\nunder tempest_tempestconf_profile_overrides in featureset062.yaml.\n\nOptions like member_role by default set by python-tempestconf[2].\nOverriding those values might cause tempest tests run failure.\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699\n[2] https://review.opendev.org/#/c/731501/\n\nChange-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee\nSigned-off-by: Amol Kahat <amolkahat@gmail.com>\n'}]",5,740314,4ce51449e97dd55836e5eb28b947548fef3a3efb,66,10,9,30750,,,0,"Removing some profile overrides from featureset062

Python-tempestconf can set load_balancer section config
in tempest.conf[1]. This work will make some options use absolute
under tempest_tempestconf_profile_overrides in featureset062.yaml.

Options like member_role by default set by python-tempestconf[2].
Overriding those values might cause tempest tests run failure.

[1] https://tree.taiga.io/project/tripleo-ci-board/task/1699
[2] https://review.opendev.org/#/c/731501/

Change-Id: If526e9b0b6b2d272c35118275c5000c5f1e23aee
Signed-off-by: Amol Kahat <amolkahat@gmail.com>
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/14/740314/7 && git format-patch -1 --stdout FETCH_HEAD,['config/general_config/featureset062.yml'],1,1759f25e895d2fcb934e03446031d19c175ae1d9,taiga_1699,," load_balancer.member_role: '""Member""'",0,1
openstack%2Fopenstack-ansible~master~Ia08b2ab5de0dbea3c472412bd1efc9b4c955be7e,openstack/openstack-ansible,master,Ia08b2ab5de0dbea3c472412bd1efc9b4c955be7e,Simplify version check,MERGED,2020-06-17 14:02:06.000000000,2020-07-22 13:17:23.000000000,2020-07-22 13:14:17.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28522}, {'_account_id': 28619}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-06-17 14:02:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/12526dcd71d1273d57abc593126175b4ddb94563', 'message': ""Simplify version check\n\nSince we're already sourcing os-release with determine_distro\nfunction, there's no need in grepping it again.\nWe also drop stretch block as this distro is not supported anymore.\n\nChange-Id: Ia08b2ab5de0dbea3c472412bd1efc9b4c955be7e\n""}, {'number': 2, 'created': '2020-06-17 14:07:56.000000000', 'files': ['scripts/bootstrap-ansible.sh'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/8150ec4546348f6beccb49161d9891c1c5feb159', 'message': ""Simplify version check\n\nSince we're already sourcing os-release with determine_distro\nfunction, there's no need in grepping it again.\nWe also drop stretch block as this distro is not supported anymore.\nAnd we suppose that infra mirrors have been fixed, so dropping that\npart as well\n\nChange-Id: Ia08b2ab5de0dbea3c472412bd1efc9b4c955be7e\n""}]",0,736222,8150ec4546348f6beccb49161d9891c1c5feb159,13,5,2,28619,,,0,"Simplify version check

Since we're already sourcing os-release with determine_distro
function, there's no need in grepping it again.
We also drop stretch block as this distro is not supported anymore.
And we suppose that infra mirrors have been fixed, so dropping that
part as well

Change-Id: Ia08b2ab5de0dbea3c472412bd1efc9b4c955be7e
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/22/736222/2 && git format-patch -1 --stdout FETCH_HEAD,['scripts/bootstrap-ansible.sh'],1,12526dcd71d1273d57abc593126175b4ddb94563,," if [[ ${VERSION_ID} == ""10"" ]] && [ -f ""/etc/apt/sources.list.d/security.list"" ]; then if [[ ${VERSION_ID} == ""10"" ]]; then"," # NOTE(jrosser) remove this once infra debian images point to the upstream security repo if `/bin/grep -q ""stretch"" /etc/os-release` && [ -f ""/etc/apt/sources.list.d/security.list"" ]; then echo ""deb http://security.debian.org stretch/updates main contrib"" > /etc/apt/sources.list.d/security.list fi if `/bin/grep -q ""buster"" /etc/os-release` && [ -f ""/etc/apt/sources.list.d/security.list"" ]; then if `/bin/grep -q ""buster"" /etc/os-release`; then",2,6
openstack%2Foslo.cache~master~I6ab4fe2a8164f4c9a10dde941255c367af5f5ba9,openstack/oslo.cache,master,I6ab4fe2a8164f4c9a10dde941255c367af5f5ba9,Support SASL protocol for memcached,ABANDONED,2020-07-22 10:29:22.000000000,2020-07-22 13:07:11.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-22 10:29:22.000000000', 'files': ['oslo_cache/backends/memcache_pool.py', 'oslo_cache/_opts.py', 'oslo_cache/core.py', 'oslo_cache/_bmemcache_pool.py'], 'web_link': 'https://opendev.org/openstack/oslo.cache/commit/1d995e990269347cba3a62513656b2ec1d3c080c', 'message': ""Support SASL protocol for memcached\n\nAdd the SASL protocol for memcached, to improve the security of authority.\nSASL(Simple Authentication and Security Layer): is a memchanism used to\nextend the verification ability of C/S mode. SASL is only the\nauthentication process, which integrates the application layer and the\nsystem authentication mechanism. However, the current memcached hasn't\nany authenticaction mechanism to protect the user's data cached in\nmemcached server.\n\nDepends-On: 0861ce25e6c8f00b73c82ad3b31fbd9dfa872f24\n\nChange-Id: I6ab4fe2a8164f4c9a10dde941255c367af5f5ba9\nImplements: blueprint enable-sasl-protocol\n""}]",0,742388,1d995e990269347cba3a62513656b2ec1d3c080c,3,1,1,31827,,,0,"Support SASL protocol for memcached

Add the SASL protocol for memcached, to improve the security of authority.
SASL(Simple Authentication and Security Layer): is a memchanism used to
extend the verification ability of C/S mode. SASL is only the
authentication process, which integrates the application layer and the
system authentication mechanism. However, the current memcached hasn't
any authenticaction mechanism to protect the user's data cached in
memcached server.

Depends-On: 0861ce25e6c8f00b73c82ad3b31fbd9dfa872f24

Change-Id: I6ab4fe2a8164f4c9a10dde941255c367af5f5ba9
Implements: blueprint enable-sasl-protocol
",git fetch https://review.opendev.org/openstack/oslo.cache refs/changes/88/742388/1 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_cache/backends/memcache_pool.py', 'oslo_cache/_opts.py', 'oslo_cache/core.py', 'oslo_cache/_bmemcache_pool.py']",4,1d995e990269347cba3a62513656b2ec1d3c080c,bp/enable-sasl-protocol,"# Copyright 2014 Mirantis Inc # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. """"""Thread-safe connection pool for python-binary-memcached."""""" import collections import contextlib import itertools import threading import time try: import eventlet except ImportError: eventlet = None import bmemcached from oslo_log import log from six.moves import queue from six.moves import zip from oslo_cache._i18n import _ from oslo_cache import exception LOG = log.getLogger(__name__) class _BMemcacheClient(bmemcached.Client): """"""Thread global memcache client As client is inherited from threading.local we have to restore object methods overloaded by threading.local so we can reuse clients in different threads """""" __delattr__ = object.__delattr__ __getattribute__ = object.__getattribute__ __setattr__ = object.__setattr__ # Hack for lp 1812935 if eventlet and eventlet.patcher.is_monkey_patched('thread'): # NOTE(bnemec): I'm not entirely sure why this works in a # monkey-patched environment and not with vanilla stdlib, but it does. def __new__(cls, *args, **kwargs): return object.__new__(cls) else: __new__ = object.__new__ def __del__(self): pass _PoolItem = collections.namedtuple('_PoolItem', ['ttl', 'connection']) class BConnectionPool(queue.Queue): """"""Base connection pool class This class implements the basic connection pool logic as an abstract base class. """""" def __init__(self, maxsize, unused_timeout, conn_get_timeout=None): """"""Initialize the connection pool. :param maxsize: maximum number of client connections for the pool :type maxsize: int :param unused_timeout: idle time to live for unused clients (in seconds). If a client connection object has been in the pool and idle for longer than the unused_timeout, it will be reaped. This is to ensure resources are released as utilization goes down. :type unused_timeout: int :param conn_get_timeout: maximum time in seconds to wait for a connection. If set to `None` timeout is indefinite. :type conn_get_timeout: int """""" # super() cannot be used here because Queue in stdlib is an # old-style class queue.Queue.__init__(self, maxsize) self._unused_timeout = unused_timeout self._connection_get_timeout = conn_get_timeout self._acquired = 0 def _create_connection(self): """"""Returns a connection instance. This is called when the pool needs another instance created. :returns: a new connection instance """""" raise NotImplementedError def _destroy_connection(self, conn): """"""Destroy and cleanup a connection instance. This is called when the pool wishes to get rid of an existing connection. This is the opportunity for a subclass to free up resources and cleanup after itself. :param conn: the connection object to destroy """""" raise NotImplementedError def _do_log(self, level, msg, *args, **kwargs): if LOG.isEnabledFor(level): thread_id = threading.current_thread().ident args = (id(self), thread_id) + args prefix = 'Memcached pool %s, thread %s: ' LOG.log(level, prefix + msg, *args, **kwargs) def _debug_logger(self, msg, *args, **kwargs): self._do_log(log.DEBUG, msg, *args, **kwargs) def _trace_logger(self, msg, *args, **kwargs): self._do_log(log.TRACE, msg, *args, **kwargs) @contextlib.contextmanager def acquire(self): self._trace_logger('Acquiring connection') self._drop_expired_connections() try: conn = self.get(timeout=self._connection_get_timeout) except queue.Empty: raise exception.QueueEmpty( _('Unable to get a connection from pool id %(id)s after ' '%(seconds)s seconds.') % {'id': id(self), 'seconds': self._connection_get_timeout}) self._trace_logger('Acquired connection %s', id(conn)) try: yield conn finally: self._trace_logger('Releasing connection %s', id(conn)) try: # super() cannot be used here because Queue in stdlib is an # old-style class queue.Queue.put(self, conn, block=False) except queue.Full: self._trace_logger('Reaping exceeding connection %s', id(conn)) self._destroy_connection(conn) def _qsize(self): if self.maxsize: return self.maxsize - self._acquired else: # A value indicating there is always a free connection # if maxsize is None or 0 return 1 # NOTE(dstanek): stdlib and eventlet Queue implementations # have different names for the qsize method. This ensures # that we override both of them. if not hasattr(queue.Queue, '_qsize'): qsize = _qsize def _get(self): try: conn = self.queue.pop().connection except IndexError: conn = self._create_connection() self._acquired += 1 return conn def _drop_expired_connections(self): """"""Drop all expired connections from the left end of the queue."""""" now = time.time() try: while self.queue[0].ttl < now: conn = self.queue.popleft().connection self._trace_logger('Reaping connection %s', id(conn)) self._destroy_connection(conn) except IndexError: # NOTE(amakarov): This is an expected excepton. so there's no # need to react. We have to handle exceptions instead of # checking queue length as IndexError is a result of race # condition too as well as of mere queue depletio of mere queue # depletionn. pass def _put(self, conn): self.queue.append(_PoolItem( ttl=time.time() + self._unused_timeout, connection=conn, )) self._acquired -= 1 class BMemcacheClientPool(BConnectionPool): def __init__(self, urls, arguments, **kwargs): # super() cannot be used here because Queue in stdlib is an # old-style class BConnectionPool.__init__(self, **kwargs) self.urls = urls self._username = arguments.pop('usrname') self._password = arguments.pop('password') self._arguments = { 'socket_timeout': arguments.get('socket_timeout', 3.0), } # NOTE(morganfainberg): The host objects expect an int for the # deaduntil value. Initialize this at 0 for each host with 0 indicating # the host is not dead. self._hosts_deaduntil = [0] * len(urls) def _create_connection(self): # NOTE(morgan): Explicitly set flush_on_reconnect for pooled # connections. This should ensure that stale data is never consumed # from a server that pops in/out due to a network partition # or disconnect. # # See the help from python-memcached: # # param flush_on_reconnect: optional flag which prevents a # scenario that can cause stale data to be read: If there's more # than one memcached server and the connection to one is # interrupted, keys that mapped to that server will get # reassigned to another. If the first server comes back, those # keys will map to it again. If it still has its data, get()s # can read stale data that was overwritten on another # server. This flag is off by default for backwards # compatibility. # # The normal non-pooled clients connect explicitly on each use and # does not need the explicit flush_on_reconnect return _BMemcacheClient(self.urls, self._username, self._password, **self._arguments) def _destroy_connection(self, conn): conn.disconnect_all() def _get(self): # super() cannot be used here because Queue in stdlib is an # old-style class conn = BConnectionPool._get(self) try: # Propagate host state known to us to this client's list now = time.time() for deaduntil, host in zip(self._hosts_deaduntil, conn.servers): if deaduntil > now and host.deaduntil <= now: host.mark_dead('propagating death mark from the pool') host.deaduntil = deaduntil except Exception: # We need to be sure that connection doesn't leak from the pool. # This code runs before we enter context manager's try-finally # block, so we need to explicitly release it here. # super() cannot be used here because Queue in stdlib is an # old-style class BConnectionPool._put(self, conn) raise return conn def _put(self, conn): try: # If this client found that one of the hosts is dead, mark it as # such in our internal list now = time.time() for i, host in zip(itertools.count(), conn.servers): deaduntil = self._hosts_deaduntil[i] # Do nothing if we already know this host is dead if deaduntil <= now: if host.deaduntil > now: self._hosts_deaduntil[i] = host.deaduntil self._debug_logger( 'Marked host %s dead until %s', self.urls[i], host.deaduntil) else: self._hosts_deaduntil[i] = 0 # If all hosts are dead we should forget that they're dead. This # way we won't get completely shut off until dead_retry seconds # pass, but will be checking servers as frequent as we can (over # way smaller socket_timeout) if all(deaduntil > now for deaduntil in self._hosts_deaduntil): self._debug_logger('All hosts are dead. Marking them as live.') self._hosts_deaduntil[:] = [0] * len(self._hosts_deaduntil) finally: # super() cannot be used here because Queue in stdlib is an # old-style class BConnectionPool._put(self, conn) ",,325,13
openstack%2Fopenstack-ansible-galera_server~master~I9b8b16c6947a2b795f765002765bb601dd7b618b,openstack/openstack-ansible-galera_server,master,I9b8b16c6947a2b795f765002765bb601dd7b618b,Fix default galera_wsrep_provider_options,MERGED,2020-06-26 08:52:57.000000000,2020-07-22 12:58:48.000000000,2020-07-22 12:57:25.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-06-26 08:52:57.000000000', 'files': ['defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-galera_server/commit/3b44cf919c56fb6225ef9f87ad1829ecf9303de5', 'message': 'Fix default galera_wsrep_provider_options\n\nChange-Id: I9b8b16c6947a2b795f765002765bb601dd7b618b\n'}]",0,738162,3b44cf919c56fb6225ef9f87ad1829ecf9303de5,10,3,1,28619,,,0,"Fix default galera_wsrep_provider_options

Change-Id: I9b8b16c6947a2b795f765002765bb601dd7b618b
",git fetch https://review.opendev.org/openstack/openstack-ansible-galera_server refs/changes/62/738162/1 && git format-patch -1 --stdout FETCH_HEAD,['defaults/main.yml'],1,3b44cf919c56fb6225ef9f87ad1829ecf9303de5,," - { option: ""gmcast.listen_addr"", value: ""tcp://{{ galera_wsrep_node_incoming_address }}:{{ galera_wsrep_cluster_port }}"" }"," - { option: ""gmcast.listen_addr"", value: ""tcp://{{ galera_wsrep_address | ternary('[::]', '0.0.0.0') }}:{{ galera_wsrep_cluster_port }}"" }",1,1
openstack%2Freleases~master~Iba2051e86290dabbfd3d9bdcc0150ffd3da0b019,openstack/releases,master,Iba2051e86290dabbfd3d9bdcc0150ffd3da0b019,Initial Victoria release of manila-tempest-plugin,MERGED,2020-07-21 23:16:20.000000000,2020-07-22 12:58:06.000000000,2020-07-22 12:58:05.000000000,"[{'_account_id': 9003}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-21 23:16:20.000000000', 'files': ['deliverables/victoria/manila-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e07a9d2f517a1c85091aaa2cba5b77d811cde4e8', 'message': 'Initial Victoria release of manila-tempest-plugin\n\nmanila-tempest-plugin is a branchless tempest plugin\nproject maintained by the OpenStack Manila community.\nIt contains test cases that are executed against stable\nbranches of manila, all the way back to stable/queens.\n\nSome downstream distributions (e.g.: RDO) only package\ntagged versions of this test plugin and\ndo not rely on the tip of master, as we expect them to.\nThis requires the team to cut newer releases when\nbugfixes come along.\n\nThis version of manila-tempest-plugin includes bugfixes\nto seek network resources from tempest rather than creating\nnetworks on the fly, add security services to share\nnetworks created by manila-tempest-plugin (bug #1699856),\nstop forcing the creation of dynamic test credentials\n(bug #1883795), skip snapshot cloning if no capability,\nskip tests for incompatible access types, storage\nnetwork fixes and new test cases for native cephfs.\n\nChange-Id: Iba2051e86290dabbfd3d9bdcc0150ffd3da0b019\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n'}]",0,742311,e07a9d2f517a1c85091aaa2cba5b77d811cde4e8,9,4,1,16643,,,0,"Initial Victoria release of manila-tempest-plugin

manila-tempest-plugin is a branchless tempest plugin
project maintained by the OpenStack Manila community.
It contains test cases that are executed against stable
branches of manila, all the way back to stable/queens.

Some downstream distributions (e.g.: RDO) only package
tagged versions of this test plugin and
do not rely on the tip of master, as we expect them to.
This requires the team to cut newer releases when
bugfixes come along.

This version of manila-tempest-plugin includes bugfixes
to seek network resources from tempest rather than creating
networks on the fly, add security services to share
networks created by manila-tempest-plugin (bug #1699856),
stop forcing the creation of dynamic test credentials
(bug #1883795), skip snapshot cloning if no capability,
skip tests for incompatible access types, storage
network fixes and new test cases for native cephfs.

Change-Id: Iba2051e86290dabbfd3d9bdcc0150ffd3da0b019
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/11/742311/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/victoria/manila-tempest-plugin.yaml'],1,e07a9d2f517a1c85091aaa2cba5b77d811cde4e8,manila,releases: - version: 1.1.0 projects: - repo: openstack/manila-tempest-plugin hash: eba8fa9fc22390051c929f358b98f6d048eddeec,,5,0
openstack%2Fkolla~master~I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd,openstack/kolla,master,I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd,fluentd: migrate to td-agent 4 where possible,MERGED,2020-07-08 09:18:00.000000000,2020-07-22 12:56:45.000000000,2020-07-22 12:55:09.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 23181}, {'_account_id': 24072}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-07-08 09:18:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/9bfb4e192494e4ec4b3f2657267ecf78602b60af', 'message': 'fluentd: migrate to td-agent 4 where possible\n\ntd-agent 4 got released for all distributions we support. For both\nx86-64 and aarch64 architectures.\n\nChange-Id: I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd\n'}, {'number': 2, 'created': '2020-07-08 09:24:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/67fd2d2ba49242849a0a509e114d746313f9b979', 'message': 'fluentd: migrate to td-agent 4 where possible\n\ntd-agent 4 got released for all distributions we support. For both\nx86-64 and aarch64 architectures.\n\nChange-Id: I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd\n'}, {'number': 3, 'created': '2020-07-08 09:39:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/641855f4c55a6ccec0b0afc3b08adaec49145318', 'message': 'fluentd: migrate to td-agent 4 where possible\n\ntd-agent 4 got released for all distributions we support. For both\nx86-64 and aarch64 architectures.\n\nChange-Id: I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd\n'}, {'number': 4, 'created': '2020-07-09 21:30:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/a66d47a9ec214c5df99ae977cff152d5002b8fa9', 'message': 'fluentd: migrate to td-agent 4 where possible\n\ntd-agent 4 got released for all distributions we support. For both\nx86-64 and aarch64 architectures.\n\nChange-Id: I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd\n'}, {'number': 5, 'created': '2020-07-20 10:58:54.000000000', 'files': ['kolla/image/build.py', 'releasenotes/notes/td-agent-4-b2c7fc574bff0a42.yaml', 'docker/base/Dockerfile.j2', 'kolla/template/repos.yaml', 'docker/base/td.repo', 'docker/fluentd/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/c19a222b4c2540f0875a47038f5edac9bb1c8a4d', 'message': 'fluentd: migrate to td-agent 4 where possible\n\ntd-agent 4 got released for all distributions we support. For both\nx86-64 and aarch64 architectures.\n\nChange-Id: I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd\n'}]",10,739935,c19a222b4c2540f0875a47038f5edac9bb1c8a4d,31,6,5,24072,,,0,"fluentd: migrate to td-agent 4 where possible

td-agent 4 got released for all distributions we support. For both
x86-64 and aarch64 architectures.

Change-Id: I86ecdc1ac45dfd76b94a34d1b837f7c0bc975dcd
",git fetch https://review.opendev.org/openstack/kolla refs/changes/35/739935/4 && git format-patch -1 --stdout FETCH_HEAD,"['docker/base/Dockerfile.j2', 'kolla/template/repos.yaml', 'docker/base/td.repo', 'docker/fluentd/Dockerfile.j2']",4,9bfb4e192494e4ec4b3f2657267ecf78602b60af,,"{% if base_package_type == 'rpm' and base_arch not in ['aarch64', 'x86_64'] %}{% elif base_package_type == 'deb' and base_arch not in ['aarch64', 'x86_64'] %} {% if base_arch in ['aarch64', 'x86_64' %} {% if base_arch in ['aarch64', 'x86_64' %}{% if base_package_type == 'deb' and fluentd_binary == 'fluentd' %}",{% if base_package_type == 'rpm' and base_arch != 'x86_64' %}{% elif base_package_type == 'deb' and base_arch != 'x86_64' %} {% if base_arch == 'x86_64' %} {% if base_arch == 'x86_64' %}{% if base_package_type == 'deb' and base_arch != 'x86_64' %},12,8
openstack%2Freleases~master~Iff1555bf0a79f8150c2f01d91781278f357fc6e7,openstack/releases,master,Iff1555bf0a79f8150c2f01d91781278f357fc6e7,Release octavia-lib 2.1.1,MERGED,2020-07-22 08:16:47.000000000,2020-07-22 12:54:57.000000000,2020-07-22 12:54:57.000000000,"[{'_account_id': 11628}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-22 08:16:47.000000000', 'files': ['deliverables/victoria/octavia-lib.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/b8ed2b9b78e30183f2e4b6f5314eb76ea833b4c5', 'message': 'Release octavia-lib 2.1.1\n\nChange-Id: Iff1555bf0a79f8150c2f01d91781278f357fc6e7\n'}]",0,742367,b8ed2b9b78e30183f2e4b6f5314eb76ea833b4c5,8,4,1,6469,,,0,"Release octavia-lib 2.1.1

Change-Id: Iff1555bf0a79f8150c2f01d91781278f357fc6e7
",git fetch https://review.opendev.org/openstack/releases refs/changes/67/742367/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/victoria/octavia-lib.yaml'],1,b8ed2b9b78e30183f2e4b6f5314eb76ea833b4c5,, - version: 2.1.1 projects: - repo: openstack/octavia-lib hash: 397653cb6de49d5f9733348231833a12da49531d,,4,0
openstack%2Freleases~master~I8dcd8f16a11c1076f72759de7fe5bd28bdfe1a01,openstack/releases,master,I8dcd8f16a11c1076f72759de7fe5bd28bdfe1a01,Release python-novaclient for victoria-2 milestone,MERGED,2020-07-22 09:21:27.000000000,2020-07-22 12:52:36.000000000,2020-07-22 12:52:36.000000000,"[{'_account_id': 7166}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-22 09:21:27.000000000', 'files': ['deliverables/victoria/python-novaclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/bca22872e4f4684a427bfa5d2dc457a40d02d0bf', 'message': 'Release python-novaclient for victoria-2 milestone\n\nchangelog:\n\n13221998 migrate testing to ubuntu focal\nb7ae8c75 Switch legacy Zuul jobs to native Zuul v3 jobs\n109d41e7 use stevedore to load extensions\n\nChange-Id: I8dcd8f16a11c1076f72759de7fe5bd28bdfe1a01\n'}]",0,742378,bca22872e4f4684a427bfa5d2dc457a40d02d0bf,8,4,1,9708,,,0,"Release python-novaclient for victoria-2 milestone

changelog:

13221998 migrate testing to ubuntu focal
b7ae8c75 Switch legacy Zuul jobs to native Zuul v3 jobs
109d41e7 use stevedore to load extensions

Change-Id: I8dcd8f16a11c1076f72759de7fe5bd28bdfe1a01
",git fetch https://review.opendev.org/openstack/releases refs/changes/78/742378/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/victoria/python-novaclient.yaml'],1,bca22872e4f4684a427bfa5d2dc457a40d02d0bf,v2-c-w-i, - version: 17.2.0 hash: 1322199845a095bafd0a16900f4899283fd0fabe, - version: 17.1.0 hash: 600384fa3b046f3c01e7f375f384610df99fae90,2,2
openstack%2Fopenstack-ansible-haproxy_server~master~I6b017720f933a06303916e8a1b437c3fb92b7ea6,openstack/openstack-ansible-haproxy_server,master,I6b017720f933a06303916e8a1b437c3fb92b7ea6,Update ansible metadata to indicate support for centos-8,MERGED,2020-07-21 09:28:36.000000000,2020-07-22 12:46:28.000000000,2020-07-22 12:43:03.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-21 09:28:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/f687cf851d0e22f53c4406eb433d4991a9adac4a', 'message': 'Update ansible metadata to indicate support for centos-8\n\nChange-Id: I6b017720f933a06303916e8a1b437c3fb92b7ea6\n'}, {'number': 2, 'created': '2020-07-21 12:44:17.000000000', 'files': ['meta/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/4e47093565a4f6cb1f70e7d1cbf2a73b97c3ec36', 'message': 'Update ansible metadata to indicate support for centos-8\n\nChange-Id: I6b017720f933a06303916e8a1b437c3fb92b7ea6\n'}]",0,742112,4e47093565a4f6cb1f70e7d1cbf2a73b97c3ec36,10,3,2,25023,,,0,"Update ansible metadata to indicate support for centos-8

Change-Id: I6b017720f933a06303916e8a1b437c3fb92b7ea6
",git fetch https://review.opendev.org/openstack/openstack-ansible-haproxy_server refs/changes/12/742112/1 && git format-patch -1 --stdout FETCH_HEAD,['meta/main.yml'],1,f687cf851d0e22f53c4406eb433d4991a9adac4a,, - 8, - 7,1,1
openstack%2Fneutron~master~I3d7e70a4a110c68a89d6c575abf121cd9b97e439,openstack/neutron,master,I3d7e70a4a110c68a89d6c575abf121cd9b97e439,[OVN] Fix logic issue while deleting port with QoS,MERGED,2020-07-14 13:54:07.000000000,2020-07-22 12:42:19.000000000,2020-07-22 12:39:08.000000000,"[{'_account_id': 6773}, {'_account_id': 8655}, {'_account_id': 9845}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 24791}]","[{'number': 1, 'created': '2020-07-14 13:54:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/56036e24209d7d7f4a21d01b3049290caad6fe6b', 'message': ""[OVN] Fix logic issue while deleting port with QoS\n\nWhile port has QoS policy configured the policy wasn't deleted\nbecause of logic issue.\n\nChange-Id: I3d7e70a4a110c68a89d6c575abf121cd9b97e439\nCloses-Bug: #1886962\n""}, {'number': 2, 'created': '2020-07-15 08:42:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c02dc2a72ad350d5c996b2c05e661f4fc56c351e', 'message': ""[OVN] Fix logic issue while deleting port with QoS\n\nWhile port has QoS policy configured the policy wasn't deleted\nbecause of logic issue.\n\nChange-Id: I3d7e70a4a110c68a89d6c575abf121cd9b97e439\nCloses-Bug: #1886962\n""}, {'number': 3, 'created': '2020-07-17 10:54:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/48ee90c2bf7126eb4b1d28e3b6b81d05db7b7f43', 'message': ""[OVN] Fix logic issue while deleting port with QoS\n\nWhile port has QoS policy configured the policy wasn't deleted\nbecause of logic issue.\n\nChange-Id: I3d7e70a4a110c68a89d6c575abf121cd9b97e439\nCloses-Bug: #1886962\n""}, {'number': 4, 'created': '2020-07-17 10:54:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0e53673c5d4f49846bb439b2e1ab8e984c20d6f8', 'message': ""[OVN] Fix logic issue while deleting port with QoS\n\nWhile port has QoS policy configured the policy wasn't deleted\nbecause of logic issue.\n\nChange-Id: I3d7e70a4a110c68a89d6c575abf121cd9b97e439\nCloses-Bug: #1886962\n""}, {'number': 5, 'created': '2020-07-22 06:14:21.000000000', 'files': ['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/extensions/test_qos.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/extensions/qos.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/ccbebfeaccf657caf8bcf8d635e3032e4c51c658', 'message': ""[OVN] Fix logic issue while deleting port with QoS\n\nWhile port has QoS policy configured the policy wasn't deleted\nbecause of logic issue.\n\nChange-Id: I3d7e70a4a110c68a89d6c575abf121cd9b97e439\nCloses-Bug: #1886962\n""}]",7,740967,ccbebfeaccf657caf8bcf8d635e3032e4c51c658,32,6,5,24791,,,0,"[OVN] Fix logic issue while deleting port with QoS

While port has QoS policy configured the policy wasn't deleted
because of logic issue.

Change-Id: I3d7e70a4a110c68a89d6c575abf121cd9b97e439
Closes-Bug: #1886962
",git fetch https://review.opendev.org/openstack/neutron refs/changes/67/740967/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/extensions/test_qos.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/extensions/qos.py']",2,56036e24209d7d7f4a21d01b3049290caad6fe6b,bug/1886962, if (not reset and not original_port) and not delete:, if not reset and not original_port:,9,1
openstack%2Fpython-openstackclient~stable%2Fqueens~I1a92999758006d02567c542b6be8902a049899cc,openstack/python-openstackclient,stable/queens,I1a92999758006d02567c542b6be8902a049899cc,Fix server show for microversion 2.47,MERGED,2020-04-29 19:33:34.000000000,2020-07-22 12:40:47.000000000,2020-07-22 12:39:19.000000000,"[{'_account_id': 6873}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 31245}]","[{'number': 1, 'created': '2020-04-29 19:33:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/7569830768a72e14b61bb06c948349365535a11f', 'message': 'Fix server show for microversion 2.47\n\nCompute API version 2.47 embeds the server\'s internal\nflavor in the response. The original flavor id is not\npreserved since it could have changed if the flavor\nwas deleted and re-created after the server was created,\nwhich was the dreaded Horizon ""Edit Flavor"" issue.\nSo the flavor dict in the server response is a dict of\ninformation about the flavor representing the server\n""right now"" excluding the id. The original flavor name\nis shown though along with the ram/disk/vcpu etc\ninformation.\n\nThe server list command has a similar issue which\nwill be fixed in a follow up change.\n\nChange-Id: I1a92999758006d02567c542b6be8902a049899cc\nTask: 13864\nStory: 1751104\n(cherry picked from commit da7572a5ff9f54dbab4f8328632c562a2816a4fb)\n'}, {'number': 2, 'created': '2020-07-21 17:21:17.000000000', 'files': ['openstackclient/tests/unit/compute/v2/test_server.py', 'releasenotes/notes/bug-1751104-compute-api-2.47-4bfa21cfaa13f408.yaml', 'openstackclient/compute/v2/server.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/1c754197b58a28e9d30ae158560bd9921e7a8e9c', 'message': 'Fix server show for microversion 2.47\n\nCompute API version 2.47 embeds the server\'s internal\nflavor in the response. The original flavor id is not\npreserved since it could have changed if the flavor\nwas deleted and re-created after the server was created,\nwhich was the dreaded Horizon ""Edit Flavor"" issue.\nSo the flavor dict in the server response is a dict of\ninformation about the flavor representing the server\n""right now"" excluding the id. The original flavor name\nis shown though along with the ram/disk/vcpu etc\ninformation.\n\nThe server list command has a similar issue which\nwill be fixed in a follow up change.\n\nChange-Id: I1a92999758006d02567c542b6be8902a049899cc\nTask: 13864\nStory: 1751104\n(cherry picked from commit da7572a5ff9f54dbab4f8328632c562a2816a4fb)\n'}]",0,724406,1c754197b58a28e9d30ae158560bd9921e7a8e9c,12,5,2,17685,,,0,"Fix server show for microversion 2.47

Compute API version 2.47 embeds the server's internal
flavor in the response. The original flavor id is not
preserved since it could have changed if the flavor
was deleted and re-created after the server was created,
which was the dreaded Horizon ""Edit Flavor"" issue.
So the flavor dict in the server response is a dict of
information about the flavor representing the server
""right now"" excluding the id. The original flavor name
is shown though along with the ram/disk/vcpu etc
information.

The server list command has a similar issue which
will be fixed in a follow up change.

Change-Id: I1a92999758006d02567c542b6be8902a049899cc
Task: 13864
Story: 1751104
(cherry picked from commit da7572a5ff9f54dbab4f8328632c562a2816a4fb)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/06/724406/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/compute/v2/test_server.py', 'releasenotes/notes/bug-1751104-compute-api-2.47-4bfa21cfaa13f408.yaml', 'openstackclient/compute/v2/server.py']",3,7569830768a72e14b61bb06c948349365535a11f,story/1751104," # Microversion 2.47 puts the embedded flavor into the server response # body but omits the id, so if not present we just expose the flavor # dict in the server output. if 'id' in flavor_info: flavor_id = flavor_info.get('id', '') try: flavor = utils.find_resource(compute_client.flavors, flavor_id) info['flavor'] = ""%s (%s)"" % (flavor.name, flavor_id) except Exception: info['flavor'] = flavor_id else: info['flavor'] = utils.format_dict(flavor_info) # TODO(mriedem): Fix this for microversion >= 2.47 where the # flavor is embedded in the server response without the id. # We likely need to drop the Flavor ID column in that case if # --long is specified. _description = _( ""Show server details. Specify ``--os-compute-api-version 2.47`` "" ""or higher to see the embedded flavor information for the server."")"," flavor_id = flavor_info.get('id', '') try: flavor = utils.find_resource(compute_client.flavors, flavor_id) info['flavor'] = ""%s (%s)"" % (flavor.name, flavor_id) except Exception: info['flavor'] = flavor_id _description = _(""Show server details"")",52,7
openstack%2Fcharm-ceph-radosgw~master~I9d3fab6020817be23f26d410aa59878287dbf5b0,openstack/charm-ceph-radosgw,master,I9d3fab6020817be23f26d410aa59878287dbf5b0,Align context and interface name for mon relation,MERGED,2020-07-22 10:29:55.000000000,2020-07-22 12:35:37.000000000,2020-07-22 12:35:37.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-22 10:29:55.000000000', 'files': ['hooks/utils.py', 'hooks/ceph_radosgw_context.py'], 'web_link': 'https://opendev.org/openstack/charm-ceph-radosgw/commit/4c76721923a01dd85a9840250a0189f22530e44c', 'message': ""Align context and interface name for mon relation\n\nEnsure that the name of the local endpoint and the context are\naligned - 'ceph-radosgw' is the type of the interface and not\nthe name of the local endpoint which is 'mon'.\n\nThis misnaming causes the charm to sit in blocked state for an\nextended period of time until the relation data bag is complete,\nskipping the intermediate waiting/incomplete state.\n\nChange-Id: I9d3fab6020817be23f26d410aa59878287dbf5b0\nCloses-Bug: 1885144\n""}]",0,742389,4c76721923a01dd85a9840250a0189f22530e44c,7,3,1,935,,,0,"Align context and interface name for mon relation

Ensure that the name of the local endpoint and the context are
aligned - 'ceph-radosgw' is the type of the interface and not
the name of the local endpoint which is 'mon'.

This misnaming causes the charm to sit in blocked state for an
extended period of time until the relation data bag is complete,
skipping the intermediate waiting/incomplete state.

Change-Id: I9d3fab6020817be23f26d410aa59878287dbf5b0
Closes-Bug: 1885144
",git fetch https://review.opendev.org/openstack/charm-ceph-radosgw refs/changes/89/742389/1 && git format-patch -1 --stdout FETCH_HEAD,"['hooks/utils.py', 'hooks/ceph_radosgw_context.py']",2,4c76721923a01dd85a9840250a0189f22530e44c,bug/1885144, interfaces = ['mon'] if not relation_ids(self.interfaces[0]): for rid in relation_ids(self.interfaces[0]):, interfaces = ['ceph-radosgw'] if not relation_ids('mon'): for rid in relation_ids('mon'):,4,4
openstack%2Fkolla-ansible~master~I2e736920f5b2cb4a78c2e6c216665394faf83001,openstack/kolla-ansible,master,I2e736920f5b2cb4a78c2e6c216665394faf83001,CI: Update ceph-ansible to v5 - deploy Ceph Octopus,MERGED,2020-06-25 06:05:13.000000000,2020-07-22 12:32:43.000000000,2020-07-22 12:32:43.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-06-25 06:05:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3e9d63483d43037c0ebf85391880671cc4819c22', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 2, 'created': '2020-06-25 08:38:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/4b6a102c8f005380720f2315d33ed4d47f6105e6', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 3, 'created': '2020-06-25 11:23:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/5c374867dd388192398d5af1f241081a6b0432d2', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 4, 'created': '2020-07-03 09:36:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6f76581939360b90b34e618277ce67b8c82da6b2', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 5, 'created': '2020-07-03 12:13:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/d1329d336d3ed758b2814e14b7c955afa0cde541', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 6, 'created': '2020-07-06 09:17:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6b3795b06fc78324775fda75d4f2ea97e2b8f1a3', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 7, 'created': '2020-07-07 07:15:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c50b142b47d4e18daeab7ab651728cec3be1703c', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 8, 'created': '2020-07-07 12:31:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c2f43c74801ed178aa844e206d5f6b0d610c6514', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 9, 'created': '2020-07-08 07:20:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/a1bf43d4501ee8e2f9b3946294f33c1e254b576c', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 10, 'created': '2020-07-15 06:59:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/79eb7ff1364915c6a5f6437c91b93289d21e133b', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 11, 'created': '2020-07-15 08:03:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3b06e2a0973b8d22df87ff1bc43305a97161ab27', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 12, 'created': '2020-07-15 09:42:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b57c98126703b616037f97639d06c72c5e3a6f6a', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}, {'number': 13, 'created': '2020-07-15 13:59:33.000000000', 'files': ['zuul.d/base.yaml', 'tests/templates/ceph-ansible.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/47f8b8917f856d9e36e549c7c6b4d9066ee9233d', 'message': 'CI: Update ceph-ansible to v5 - deploy Ceph Octopus\n\nChange-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001\n'}]",1,737903,47f8b8917f856d9e36e549c7c6b4d9066ee9233d,48,4,13,22629,,,0,"CI: Update ceph-ansible to v5 - deploy Ceph Octopus

Change-Id: I2e736920f5b2cb4a78c2e6c216665394faf83001
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/03/737903/9 && git format-patch -1 --stdout FETCH_HEAD,"['tests/deploy-ceph-ansible.sh', 'tests/run.yml', 'zuul.d/base.yaml', 'tests/templates/ceph-ansible.j2']",4,3e9d63483d43037c0ebf85391880671cc4819c22,,"ceph_docker_image_tag: ""latest-octopus""","ceph_docker_image_tag: ""latest-nautilus""",4,2
openstack%2Fcharm-designate-bind~master~Ifa178694a97997f992afa88f4a8f3bead09ced3b,openstack/charm-designate-bind,master,Ifa178694a97997f992afa88f4a8f3bead09ced3b,Misc tidy of lint,MERGED,2020-07-21 08:13:31.000000000,2020-07-22 12:30:21.000000000,2020-07-22 08:30:48.000000000,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 08:13:31.000000000', 'files': ['test-requirements.txt', 'src/lib/charm/openstack/designate_bind.py', 'unit_tests/test_designate_bind_handlers.py', 'unit_tests/__init__.py'], 'web_link': 'https://opendev.org/openstack/charm-designate-bind/commit/5174ce1201c120ce4c5fc387fc68f314381816b7', 'message': 'Misc tidy of lint\n\nRemove upper bound on flake8 and tidy misc lint on codebase.\n\nNote that one of the warning messages signalled that a parameter\nwas not used in a format call. This may or may not be correct\nbut this commit sticks with the existing behaviour.\n\nChange-Id: Ifa178694a97997f992afa88f4a8f3bead09ced3b\n'}]",0,742091,5174ce1201c120ce4c5fc387fc68f314381816b7,8,3,1,935,,,0,"Misc tidy of lint

Remove upper bound on flake8 and tidy misc lint on codebase.

Note that one of the warning messages signalled that a parameter
was not used in a format call. This may or may not be correct
but this commit sticks with the existing behaviour.

Change-Id: Ifa178694a97997f992afa88f4a8f3bead09ced3b
",git fetch https://review.opendev.org/openstack/charm-designate-bind refs/changes/91/742091/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'src/lib/charm/openstack/designate_bind.py', 'unit_tests/test_designate_bind_handlers.py', 'unit_tests/__init__.py']",4,5174ce1201c120ce4c5fc387fc68f314381816b7,misc-tidy,,,6,4
openstack%2Ftripleo-ansible~master~Ied39aaef9c65c65f33cceb99071c53af7f9aa464,openstack/tripleo-ansible,master,Ied39aaef9c65c65f33cceb99071c53af7f9aa464,Fix tripleo_profile_tasks callback plugin _output(),MERGED,2020-06-05 06:14:10.000000000,2020-07-22 12:29:11.000000000,2020-06-05 22:05:10.000000000,"[{'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-05 06:14:10.000000000', 'files': ['tripleo_ansible/ansible_plugins/callback/tripleo_profile_tasks.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/f0dbd1d0f5eb0122007b3a4ca100764646a68d98', 'message': 'Fix tripleo_profile_tasks callback plugin _output()\n\nRegression from https://review.opendev.org/#/c/733394/\n\nChange-Id: Ied39aaef9c65c65f33cceb99071c53af7f9aa464\n'}]",0,733750,f0dbd1d0f5eb0122007b3a4ca100764646a68d98,15,4,1,8833,,,0,"Fix tripleo_profile_tasks callback plugin _output()

Regression from https://review.opendev.org/#/c/733394/

Change-Id: Ied39aaef9c65c65f33cceb99071c53af7f9aa464
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/50/733750/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/ansible_plugins/callback/tripleo_profile_tasks.py'],1,f0dbd1d0f5eb0122007b3a4ca100764646a68d98,," def _output(self, msg, color=None): self._display.display(output, color=color)"," def _output(self, msg, color): self._output(output, color=color)",2,2
openstack%2Fcharm-glance-simplestreams-sync~master~I6d6b2327adf0a9a49954a4cf2fd1844fbb5901cb,openstack/charm-glance-simplestreams-sync,master,I6d6b2327adf0a9a49954a4cf2fd1844fbb5901cb,Deprecate the use_swift option,MERGED,2020-07-22 09:34:47.000000000,2020-07-22 12:24:33.000000000,2020-07-22 12:24:33.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}]","[{'number': 1, 'created': '2020-07-22 09:34:47.000000000', 'files': ['config.yaml'], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/25a0877228efedee21ffb2475326d2983a49690a', 'message': 'Deprecate the use_swift option\n\nThe use_swift option was added to make testing of the charm more\nlightweight in the charm test gates.\n\nHowever tests have since been updated to make use of the Ceph\nRADOS Gateway as this is aligned to the original intent of\nthe charm in production use cases.\n\nDeprecate this configuration option and add a note that use_swift=False\nwas only ever for testing purposes and not for use in production\nclouds.\n\nThis option will be removed in the 20.10 charm release.\n\nChange-Id: I6d6b2327adf0a9a49954a4cf2fd1844fbb5901cb\nRelated-Bug: 1871175\n'}]",0,742380,25a0877228efedee21ffb2475326d2983a49690a,7,3,1,935,,,0,"Deprecate the use_swift option

The use_swift option was added to make testing of the charm more
lightweight in the charm test gates.

However tests have since been updated to make use of the Ceph
RADOS Gateway as this is aligned to the original intent of
the charm in production use cases.

Deprecate this configuration option and add a note that use_swift=False
was only ever for testing purposes and not for use in production
clouds.

This option will be removed in the 20.10 charm release.

Change-Id: I6d6b2327adf0a9a49954a4cf2fd1844fbb5901cb
Related-Bug: 1871175
",git fetch https://review.opendev.org/openstack/charm-glance-simplestreams-sync refs/changes/80/742380/1 && git format-patch -1 --stdout FETCH_HEAD,['config.yaml'],1,25a0877228efedee21ffb2475326d2983a49690a,bug/1871175," description: > DEPRECATED FOR REMOVAL Should the charm set up the product-streams endpoint with swift's URLs? If this value is set to False, product-streams metadata will be hosted on a local Apache server running on the unit and endpoints will be registered referencing the local unit. This does not support HA or TLS and is for testing purposes only."," description: ""Should the charm set up the product-streams endpoint with swift's URLs?""",7,1
openstack%2Fkolla-ansible~master~I67b75b7dfbb0db87ecee59986678720bc66003d9,openstack/kolla-ansible,master,I67b75b7dfbb0db87ecee59986678720bc66003d9,add masakari_log,ABANDONED,2019-05-06 07:46:55.000000000,2020-07-22 12:22:08.000000000,,"[{'_account_id': 14826}, {'_account_id': 16006}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-05-06 07:46:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/5d23b9a42c5a6b46a29936baa5d341e2c4fefc04', 'message': 'add masakari_log\n\nadd masakari_log\n\nChange-Id: I67b75b7dfbb0db87ecee59986678720bc66003d9\n'}, {'number': 2, 'created': '2019-05-06 08:51:33.000000000', 'files': ['ansible/roles/common/templates/conf/input/00-global.conf.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/219de881bbd7bef6298ebaa972bced6de86d59d0', 'message': 'add masakari_log\n\nadd masakari_log\n\nChange-Id: I67b75b7dfbb0db87ecee59986678720bc66003d9\n'}]",0,657329,219de881bbd7bef6298ebaa972bced6de86d59d0,7,3,2,24061,,,0,"add masakari_log

add masakari_log

Change-Id: I67b75b7dfbb0db87ecee59986678720bc66003d9
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/29/657329/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/common/templates/conf/input/00-global.conf.j2'],1,5d23b9a42c5a6b46a29936baa5d341e2c4fefc04,add_masakari," ( 'zun', enable_zun ), ( 'masakari', enable_masakari )"," ( 'zun', enable_zun )",2,1
openstack%2Fopenstack-ansible-openstack_hosts~stable%2Fussuri~I71877d976e3669737861bc22e8c07f9a8678c4fc,openstack/openstack-ansible-openstack_hosts,stable/ussuri,I71877d976e3669737861bc22e8c07f9a8678c4fc,Use Ussuri RDO repo on ussuri branch,MERGED,2020-07-21 13:17:25.000000000,2020-07-22 12:15:06.000000000,2020-07-22 12:13:46.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-07-21 13:17:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-openstack_hosts/commit/dd9d35da6717bca100f8726da0cb38555857a479', 'message': 'Use Ussuri RDO repo on ussuri branch\n\nChange-Id: I71877d976e3669737861bc22e8c07f9a8678c4fc\n'}, {'number': 2, 'created': '2020-07-21 14:34:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-openstack_hosts/commit/632d6bb099698bc9ff61055960f3d953ea0e379a', 'message': ""Use Ussuri RDO repo on ussuri branch\n\nThis leaves the branch as 'master' for the Centos-7 RDO repo.\n\nChange-Id: I71877d976e3669737861bc22e8c07f9a8678c4fc\n""}, {'number': 3, 'created': '2020-07-21 15:08:16.000000000', 'files': ['vars/redhat-8.yml', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-openstack_hosts/commit/57ee30ff297dbde1002bab5a68e8e4213d801290', 'message': ""Use Ussuri RDO repo on ussuri branch\n\nThis leaves the branch as 'master' for the Centos-7 RDO repo.\n\nChange-Id: I71877d976e3669737861bc22e8c07f9a8678c4fc\n""}]",0,742188,57ee30ff297dbde1002bab5a68e8e4213d801290,11,3,3,25023,,,0,"Use Ussuri RDO repo on ussuri branch

This leaves the branch as 'master' for the Centos-7 RDO repo.

Change-Id: I71877d976e3669737861bc22e8c07f9a8678c4fc
",git fetch https://review.opendev.org/openstack/openstack-ansible-openstack_hosts refs/changes/88/742188/1 && git format-patch -1 --stdout FETCH_HEAD,['defaults/main.yml'],1,dd9d35da6717bca100f8726da0cb38555857a479,,"openstack_hosts_rdo_repo_url: ""{{ openstack_hosts_rdo_mirror_url }}/centos{{ ansible_distribution_major_version }}-ussuri/current-passed-ci/"" openstack_hosts_rdo_deps_url: ""{{ openstack_hosts_rdo_mirror_url }}/centos{{ ansible_distribution_major_version }}-ussuri/deps/latest/""","openstack_hosts_rdo_repo_url: ""{{ openstack_hosts_rdo_mirror_url }}/centos{{ ansible_distribution_major_version }}-master/current-passed-ci/"" openstack_hosts_rdo_deps_url: ""{{ openstack_hosts_rdo_mirror_url }}/centos{{ ansible_distribution_major_version }}-master/deps/latest/""",2,2
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I077202b9cce7ed0231839964761f04ed20229945,openstack/tripleo-heat-templates,stable/train,I077202b9cce7ed0231839964761f04ed20229945,DNM: Test ansible_user vs ANSIBLE_REMOTE_USER change,ABANDONED,2020-07-21 21:44:59.000000000,2020-07-22 12:09:33.000000000,,"[{'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 21:44:59.000000000', 'files': ['deployment/ceph-ansible/ceph-base.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/505aba5eab79a417f84f4665a271a879fe0d5b5c', 'message': ""DNM: Test ansible_user vs ANSIBLE_REMOTE_USER change\n\nThis is a test of the related bug to ensure that the\nCloses-Bug doesn't break the related bug either.\n\nDO NOT MERGE\n\nDepends-On: Ie7234bf113204e8cf847257554b88b899b45d5ee\nChange-Id: I077202b9cce7ed0231839964761f04ed20229945\nRelated-Bug: #1886497\nCloses-Bug: #1887708\n""}]",0,742293,505aba5eab79a417f84f4665a271a879fe0d5b5c,4,2,1,18002,,,0,"DNM: Test ansible_user vs ANSIBLE_REMOTE_USER change

This is a test of the related bug to ensure that the
Closes-Bug doesn't break the related bug either.

DO NOT MERGE

Depends-On: Ie7234bf113204e8cf847257554b88b899b45d5ee
Change-Id: I077202b9cce7ed0231839964761f04ed20229945
Related-Bug: #1886497
Closes-Bug: #1887708
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/93/742293/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/ceph-ansible/ceph-base.yaml'],1,505aba5eab79a417f84f4665a271a879fe0d5b5c,bug/1887708, Ceph base service. Shared by all Ceph services. With love., Ceph base service. Shared by all Ceph services.,1,1
openstack%2Fopenstack-ansible-os_cinder~master~Ic833be57ad43eb1e471101676fedb07d9ba1e8da,openstack/openstack-ansible-os_cinder,master,Ic833be57ad43eb1e471101676fedb07d9ba1e8da,Added checks for failed cinder services,MERGED,2020-06-10 09:59:13.000000000,2020-07-22 12:06:57.000000000,2020-07-22 12:05:29.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-06-10 09:59:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/ade3bb2606df693380b29b7dce239e12680ef84e', 'message': 'Added checks for failed cinder services\n\nThe task ""Perform online data migrations"" fails if not all cinder\nservices are available at the time of execution. Therefore, if\nthe task fails, we check if all services are up and print a more\nmeaningful error message.\n\nChange-Id: Ic833be57ad43eb1e471101676fedb07d9ba1e8da\n'}, {'number': 2, 'created': '2020-06-10 10:03:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/f87633ac21d7f53f0e3ef677005af039d5d66ae1', 'message': 'Added checks for failed cinder services\n\nThe task ""Perform online data migrations"" fails if not all cinder\nservices are available at the time of execution. Therefore, if\nthe task fails, we check if all services are up and print a more\nmeaningful error message.\n\nChange-Id: Ic833be57ad43eb1e471101676fedb07d9ba1e8da\n'}, {'number': 3, 'created': '2020-06-10 10:05:37.000000000', 'files': ['tasks/cinder_db_sync.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/00efa4cfd26de5767ba2a981e6109ad9bc6cd616', 'message': 'Added checks for failed cinder services\n\nThe task ""Perform online data migrations"" fails if not all cinder\nservices are available at the time of execution. Therefore, if\nthe task fails, we check if all services are up and print a more\nmeaningful error message.\n\nChange-Id: Ic833be57ad43eb1e471101676fedb07d9ba1e8da\n'}]",0,734778,00efa4cfd26de5767ba2a981e6109ad9bc6cd616,12,3,3,30660,,,0,"Added checks for failed cinder services

The task ""Perform online data migrations"" fails if not all cinder
services are available at the time of execution. Therefore, if
the task fails, we check if all services are up and print a more
meaningful error message.

Change-Id: Ic833be57ad43eb1e471101676fedb07d9ba1e8da
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_cinder refs/changes/78/734778/2 && git format-patch -1 --stdout FETCH_HEAD,['tasks/cinder_db_sync.yml'],1,ade3bb2606df693380b29b7dce239e12680ef84e,check-if-all-services-are-up-before-db-sync,"- name: Perform data migrations if necessary and all cinder services are up block: - name: Perform online data migrations command: ""{{ cinder_bin }}/cinder-manage db online_data_migrations"" register: data_migrations changed_when: false become: yes become_user: ""{{ cinder_system_user_name }}"" rescue: - name: Check if all cinder services are up shell: ""{{ cinder_bin }}/cinder-manage service list | /usr/bin/awk '{ if(NR>1) print $5 }' | /bin/egrep -vq ':-)'"" register: failed_cinder_services ignore_errors: True - name: Fail if any cinder service is down fail: msg: At least one cinder service is down. You need to fix this before re-running the playbook. when: failed_cinder_services.rc != 1 - name: All cinder services are up, but migration failed nontheless. fail: msg: An unexpected error occured. when: failed_cinder_services.rc == 1 ","- name: Perform online data migrations command: ""{{ cinder_bin }}/cinder-manage db online_data_migrations"" changed_when: false register: data_migrations",27,5
openstack%2Fkuryr-kubernetes~master~I9620173d048fd273b77f66dcc1e3710c06f84b89,openstack/kuryr-kubernetes,master,I9620173d048fd273b77f66dcc1e3710c06f84b89,Disable colors for K8s NP e2e tests,MERGED,2020-07-21 14:58:43.000000000,2020-07-22 12:05:19.000000000,2020-07-22 12:03:29.000000000,"[{'_account_id': 11600}, {'_account_id': 22348}, {'_account_id': 23567}, {'_account_id': 27032}]","[{'number': 1, 'created': '2020-07-21 14:58:43.000000000', 'files': ['playbooks/run_k8s_e2e_tests.yaml'], 'web_link': 'https://opendev.org/openstack/kuryr-kubernetes/commit/6457a9dee8b040b5beb7a1672eccd99bdb558473', 'message': 'Disable colors for K8s NP e2e tests\n\nIn the gate logs are critically unreadable when color tags are thrown\ninto them. This commit disables colors on K8s e2e NP gate.\n\nChange-Id: I9620173d048fd273b77f66dcc1e3710c06f84b89\n'}]",0,742216,6457a9dee8b040b5beb7a1672eccd99bdb558473,11,4,1,11600,,,0,"Disable colors for K8s NP e2e tests

In the gate logs are critically unreadable when color tags are thrown
into them. This commit disables colors on K8s e2e NP gate.

Change-Id: I9620173d048fd273b77f66dcc1e3710c06f84b89
",git fetch https://review.opendev.org/openstack/kuryr-kubernetes refs/changes/16/742216/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/run_k8s_e2e_tests.yaml'],1,6457a9dee8b040b5beb7a1672eccd99bdb558473,np-crd," GINKGO_NO_COLOR: ""y""",,1,0
openstack%2Fkolla-ansible~master~If0baef37db392324c285798fa55d5e85892edb9f,openstack/kolla-ansible,master,If0baef37db392324c285798fa55d5e85892edb9f,CI: Add CentOS KVM job,MERGED,2020-07-17 16:54:15.000000000,2020-07-22 12:01:18.000000000,2020-07-22 11:54:28.000000000,"[{'_account_id': 14826}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2020-07-17 16:54:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/afe15addb0d4a236f68917a0d999e8816f1eb66e', 'message': 'CI: Add CentOS KVM job\n\nFollow-up on [1] which added Ubuntu.\n\n[1] https://review.opendev.org/735454\n\nChange-Id: If0baef37db392324c285798fa55d5e85892edb9f\n'}, {'number': 2, 'created': '2020-07-17 17:09:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6de9720d3b8b307eae84a141fa1ea1a908be4a41', 'message': 'CI: Add CentOS KVM job\n\nFollow-up on [1] which added Ubuntu.\n\n[1] https://review.opendev.org/735454\n\nChange-Id: If0baef37db392324c285798fa55d5e85892edb9f\n'}, {'number': 3, 'created': '2020-07-17 17:51:09.000000000', 'files': ['zuul.d/project.yaml', 'zuul.d/nodesets.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f2a5d374ca730d8812f07379e540350ad849e019', 'message': 'CI: Add CentOS KVM job\n\nFollow-up on [1] which added Ubuntu.\n\n[1] https://review.opendev.org/735454\n\nChange-Id: If0baef37db392324c285798fa55d5e85892edb9f\n'}]",0,741679,f2a5d374ca730d8812f07379e540350ad849e019,11,4,3,30491,,,0,"CI: Add CentOS KVM job

Follow-up on [1] which added Ubuntu.

[1] https://review.opendev.org/735454

Change-Id: If0baef37db392324c285798fa55d5e85892edb9f
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/79/741679/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'zuul.d/nodesets.yaml', 'zuul.d/jobs.yaml']",3,afe15addb0d4a236f68917a0d999e8816f1eb66e,ci-kvm-jobs, name: kolla-ansible-centos8-source-kvm parent: kolla-ansible-kvm-base nodeset: kolla-ansible-centos8-nested-virt vars: base_distro: centos8 install_type: source - job:,,15,0
openstack%2Fkolla-ansible~master~I560e4f9d0a69c347e6aaf3b970331157c1a56f18,openstack/kolla-ansible,master,I560e4f9d0a69c347e6aaf3b970331157c1a56f18,CI: Add Ubuntu KVM job,MERGED,2020-06-14 10:05:17.000000000,2020-07-22 12:00:11.000000000,2020-07-22 11:54:26.000000000,"[{'_account_id': 167}, {'_account_id': 14826}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23717}, {'_account_id': 24072}, {'_account_id': 30491}, {'_account_id': 30523}]","[{'number': 1, 'created': '2020-06-14 10:05:17.000000000', 'files': ['tests/templates/nova-compute-overrides.j2', 'tests/templates/globals-default.j2', 'zuul.d/base.yaml', 'zuul.d/project.yaml', 'zuul.d/nodesets.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/88e7f8006e33cd39db0fee479cc36730fc13aeaa', 'message': 'CI: Add Ubuntu KVM job\n\nThis also uses the recommended machinery to set qemu instead\nof relying on config file override so that we test what we\nreally want to test.\n\nChange-Id: I560e4f9d0a69c347e6aaf3b970331157c1a56f18\n'}]",0,735454,88e7f8006e33cd39db0fee479cc36730fc13aeaa,22,9,1,30491,,,0,"CI: Add Ubuntu KVM job

This also uses the recommended machinery to set qemu instead
of relying on config file override so that we test what we
really want to test.

Change-Id: I560e4f9d0a69c347e6aaf3b970331157c1a56f18
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/54/735454/1 && git format-patch -1 --stdout FETCH_HEAD,"['tests/templates/nova-compute-overrides.j2', 'tests/templates/globals-default.j2', 'zuul.d/base.yaml', 'zuul.d/project.yaml', 'zuul.d/nodesets.yaml', 'zuul.d/jobs.yaml']",6,88e7f8006e33cd39db0fee479cc36730fc13aeaa,ci-kvm-jobs, name: kolla-ansible-ubuntu-source-kvm parent: kolla-ansible-kvm-base nodeset: kolla-ansible-bionic-nested-virt vars: base_distro: ubuntu install_type: source - job:,,27,4
openstack%2Fkolla-ansible~stable%2Fussuri~Iabad035d583d291169f23be3d71931cb260e87ae,openstack/kolla-ansible,stable/ussuri,Iabad035d583d291169f23be3d71931cb260e87ae,CI: add prometheus-efk scenario,MERGED,2020-07-20 10:12:03.000000000,2020-07-22 12:00:02.000000000,2020-07-22 11:54:25.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-07-20 10:12:03.000000000', 'files': ['tests/test-prometheus-efk.sh', 'tests/run.yml', 'tests/templates/globals-default.j2', 'zuul.d/base.yaml', 'zuul.d/project.yaml', 'zuul.d/jobs.yaml', 'tools/setup_gate.sh'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f7b86b8ae160a5a040bbdef4d8a6219b44a1b014', 'message': 'CI: add prometheus-efk scenario\n\nTests prometheus, grafana, and centralised logging.\n\nThe tests could be improved in future by querying logs in elasticsearch,\nand metrics in prometheus.\n\nChange-Id: Iabad035d583d291169f23be3d71931cb260e87ae\n(cherry picked from commit f44876c406fcb7edf28e1d2f9ee894a220c362bc)\n'}]",0,741909,f7b86b8ae160a5a040bbdef4d8a6219b44a1b014,9,3,1,14826,,,0,"CI: add prometheus-efk scenario

Tests prometheus, grafana, and centralised logging.

The tests could be improved in future by querying logs in elasticsearch,
and metrics in prometheus.

Change-Id: Iabad035d583d291169f23be3d71931cb260e87ae
(cherry picked from commit f44876c406fcb7edf28e1d2f9ee894a220c362bc)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/09/741909/1 && git format-patch -1 --stdout FETCH_HEAD,"['tests/test-prometheus-efk.sh', 'tests/run.yml', 'tests/templates/globals-default.j2', 'zuul.d/base.yaml', 'zuul.d/project.yaml', 'zuul.d/jobs.yaml', 'tools/setup_gate.sh']",7,f7b86b8ae160a5a040bbdef4d8a6219b44a1b014,," if [[ $SCENARIO == ""prometheus-efk"" ]]; then GATE_IMAGES=""^cron,^elasticsearch,^fluentd,^grafana,^haproxy,^keepalived,^kibana,^kolla-toolbox,^mariadb,^memcached,^prometheus,^rabbitmq"" fi ",,198,1
openstack%2Ftripleo-ci~master~I1d751f9d078b5ed52ff10728130a3288183837c7,openstack/tripleo-ci,master,I1d751f9d078b5ed52ff10728130a3288183837c7,Add missing build image and build container jobs,ABANDONED,2020-07-22 11:12:43.000000000,2020-07-22 11:43:47.000000000,,[],"[{'number': 1, 'created': '2020-07-22 11:12:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/2a63eb029fe491fcead05873f8316fd0100bfb96', 'message': 'Add missing build image and build container jobs\n\nAdded missing build image and build container jobs\nfor centos8 train.\n\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1898?kanban-status=1447275\n\nChange-Id: I1d751f9d078b5ed52ff10728130a3288183837c7\nSigned-off-by: Bhagyashri Shewale <bshewale@redhat.com>\n'}, {'number': 2, 'created': '2020-07-22 11:21:40.000000000', 'files': ['zuul.d/build-containers.yaml', 'zuul.d/build-image.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/09b3e88920f2d25f8668eddc756fa4be850f9f92', 'message': 'Add missing build image and build container jobs\n\nAdded missing build image and build container jobs\nfor centos8 train.\n\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1898?kanban-status=1447275\n\nChange-Id: I1d751f9d078b5ed52ff10728130a3288183837c7\nSigned-off-by: Bhagyashri Shewale <bshewale@redhat.com>\n'}]",0,742394,09b3e88920f2d25f8668eddc756fa4be850f9f92,3,0,2,20182,,,0,"Add missing build image and build container jobs

Added missing build image and build container jobs
for centos8 train.

https://tree.taiga.io/project/tripleo-ci-board/task/1898?kanban-status=1447275

Change-Id: I1d751f9d078b5ed52ff10728130a3288183837c7
Signed-off-by: Bhagyashri Shewale <bshewale@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/94/742394/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/build-containers.yaml', 'zuul.d/build-image.yaml']",2,2a63eb029fe491fcead05873f8316fd0100bfb96,add-missing-jobs-train-c8,# Branchful job to run on CI branchless repos which have master only - job: name: tripleo-buildimage-ironic-python-agent-centos-8-train parent: tripleo-buildimage-ironic-python-agent-centos-8 branches: master override-checkout: stable/train vars: branch_override: stable/train # Branchful job to run on CI branchless repos which have master only - job: name: tripleo-buildimage-overcloud-full-centos-8-train parent: tripleo-buildimage-overcloud-full-centos-8 branches: master override-checkout: stable/train vars: branch_override: stable/train # Branchful job to run on CI branchless repos which have master only - job: name: tripleo-buildimage-overcloud-hardened-full-centos-8-train parent: tripleo-buildimage-overcloud-hardened-full-centos-8 branches: master override-checkout: stable/train vars: branch_override: stable/train ,,36,0
openstack%2Fnova~stable%2Fstein~I1e9431e739adfbcfc1ca34b87e826a516a4b18e2,openstack/nova,stable/stein,I1e9431e739adfbcfc1ca34b87e826a516a4b18e2,Create instance action when burying in cell0,MERGED,2020-05-20 07:57:01.000000000,2020-07-22 11:43:41.000000000,2020-07-22 03:23:37.000000000,"[{'_account_id': 6873}, {'_account_id': 9373}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}, {'_account_id': 30077}]","[{'number': 1, 'created': '2020-05-20 07:57:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/16f73a87a1c9022f5338915671198cb623fe6e69', 'message': 'Create instance action when burying in cell0\n\nChange I8742071b55f018f864f5a382de20075a5b444a79 in Ocata\nmoved the creation of the instance record from the API to\nconductor. As a result, the ""create"" instance action was\nonly being created in conductor when the instance is created\nin a non-cell0 database. This is a regression because before\nthat change when a server create would fail during scheduling\nyou could still list instance actions for the server and see\nthe ""create"" action but that was lost once we started burying\nthose instances in cell0.\n\nThis fixes the bug by creating the ""create"" action in the cell0\ndatabase when burying an instance there. It goes a step further\nand also creates and finishes an event so the overall action\nmessage shows up as ""Error"" with the details about where the\nfailure occurred in the event traceback.\n\nA short release note is added since a new action event is\nadded here (conductor_schedule_and_build_instances) rather than\nre-use some kind of event that we could generate from the\ncompute service, e.g. compute__do_build_and_run_instance.\n\nNOTE(mriedem): A couple of helper method calls in the test had\nto be updated since change I8c96b337f32148f8f5899c9b87af331b1fa41424\nis not in Train.\n\nChange-Id: I1e9431e739adfbcfc1ca34b87e826a516a4b18e2\nCloses-Bug: #1852458\n(cherry picked from commit f2608c91175411ec7c2604035adb39306d7e607e)\n(cherry picked from commit 6484d9ff5b03f7b7d8e9ba296f7f32d2e54fcc11)\n'}, {'number': 2, 'created': '2020-06-10 16:37:41.000000000', 'files': ['releasenotes/notes/bug-1852458-cell0-instance-action-e3112cf17bcc7c64.yaml', 'nova/conductor/manager.py', 'nova/tests/functional/regressions/test_bug_1852458.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/7ff71e6b87bd0ea2ed5bc4ac8dd8a2b6fc188ff4', 'message': 'Create instance action when burying in cell0\n\nChange I8742071b55f018f864f5a382de20075a5b444a79 in Ocata\nmoved the creation of the instance record from the API to\nconductor. As a result, the ""create"" instance action was\nonly being created in conductor when the instance is created\nin a non-cell0 database. This is a regression because before\nthat change when a server create would fail during scheduling\nyou could still list instance actions for the server and see\nthe ""create"" action but that was lost once we started burying\nthose instances in cell0.\n\nThis fixes the bug by creating the ""create"" action in the cell0\ndatabase when burying an instance there. It goes a step further\nand also creates and finishes an event so the overall action\nmessage shows up as ""Error"" with the details about where the\nfailure occurred in the event traceback.\n\nA short release note is added since a new action event is\nadded here (conductor_schedule_and_build_instances) rather than\nre-use some kind of event that we could generate from the\ncompute service, e.g. compute__do_build_and_run_instance.\n\nChange-Id: I1e9431e739adfbcfc1ca34b87e826a516a4b18e2\nCloses-Bug: #1852458\n(cherry picked from commit f2608c91175411ec7c2604035adb39306d7e607e)\n(cherry picked from commit 6484d9ff5b03f7b7d8e9ba296f7f32d2e54fcc11)\n'}]",2,729531,7ff71e6b87bd0ea2ed5bc4ac8dd8a2b6fc188ff4,42,12,2,30077,,,0,"Create instance action when burying in cell0

Change I8742071b55f018f864f5a382de20075a5b444a79 in Ocata
moved the creation of the instance record from the API to
conductor. As a result, the ""create"" instance action was
only being created in conductor when the instance is created
in a non-cell0 database. This is a regression because before
that change when a server create would fail during scheduling
you could still list instance actions for the server and see
the ""create"" action but that was lost once we started burying
those instances in cell0.

This fixes the bug by creating the ""create"" action in the cell0
database when burying an instance there. It goes a step further
and also creates and finishes an event so the overall action
message shows up as ""Error"" with the details about where the
failure occurred in the event traceback.

A short release note is added since a new action event is
added here (conductor_schedule_and_build_instances) rather than
re-use some kind of event that we could generate from the
compute service, e.g. compute__do_build_and_run_instance.

Change-Id: I1e9431e739adfbcfc1ca34b87e826a516a4b18e2
Closes-Bug: #1852458
(cherry picked from commit f2608c91175411ec7c2604035adb39306d7e607e)
(cherry picked from commit 6484d9ff5b03f7b7d8e9ba296f7f32d2e54fcc11)
",git fetch https://review.opendev.org/openstack/nova refs/changes/31/729531/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1852458-cell0-instance-action-e3112cf17bcc7c64.yaml', 'nova/conductor/manager.py', 'nova/tests/functional/regressions/test_bug_1852458.py']",3,16f73a87a1c9022f5338915671198cb623fe6e69,bug/1852458,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova.compute import instance_actions from nova import test from nova.tests import fixtures as nova_fixtures from nova.tests.functional import fixtures as func_fixtures from nova.tests.functional import integrated_helpers from nova.tests.unit.image import fake as fake_image from nova.tests.unit import policy_fixture from nova import utils class TestInstanceActionBuryInCell0(test.TestCase, integrated_helpers.InstanceHelperMixin): """"""Regression test for bug 1852458 where the ""create"" instance action event was not being created for instances buried in cell0 starting in Ocata. """""" def setUp(self): super(TestInstanceActionBuryInCell0, self).setUp() # Setup common fixtures. fake_image.stub_out_image_service(self) self.addCleanup(fake_image.FakeImageService_reset) self.useFixture(func_fixtures.PlacementFixture()) self.useFixture(nova_fixtures.NeutronFixture(self)) policy = self.useFixture(policy_fixture.RealPolicyFixture()) # Allow non-admins to see instance action events. policy.set_rules({ 'os_compute_api:os-instance-actions:events': 'rule:admin_or_owner' }, overwrite=False) # Setup controller services. self.start_service('conductor') self.start_service('scheduler') self.api = self.useFixture( nova_fixtures.OSAPIFixture(api_version='v2.1')).api def test_bury_in_cell0_instance_create_action(self): """"""Tests creating a server which will fail scheduling because there is no compute service and result in the instance being created (buried) in cell0. """""" server = self._build_minimal_create_server_request( self.api, 'test_bury_in_cell0_instance_create_action', image_uuid=fake_image.get_valid_image_id(), networks='none') # Use microversion 2.37 to create a server without any networking. with utils.temporary_mutation(self.api, microversion='2.37'): server = self.api.post_server({'server': server}) # The server should go to ERROR status and have a NoValidHost fault. server = self._wait_for_state_change(self.api, server, 'ERROR') self.assertIn('fault', server) self.assertIn('No valid host', server['fault']['message']) self.assertEqual('', server['hostId']) # Assert the ""create"" instance action exists and is failed. actions = self.api.get_instance_actions(server['id']) self.assertEqual(1, len(actions), actions) action = actions[0] self.assertEqual(instance_actions.CREATE, action['action']) self.assertEqual('Error', action['message']) # Get the events. There should be one with an Error result. action = self.api.api_get( '/servers/%s/os-instance-actions/%s' % (server['id'], action['request_id'])).body['instanceAction'] events = action['events'] self.assertEqual(1, len(events), events) event = events[0] self.assertEqual('conductor_schedule_and_build_instances', event['event']) self.assertEqual('Error', event['result']) # Normally non-admins cannot see the event traceback but we enabled # that via policy in setUp so assert something was recorded. self.assertIn('select_destinations', event['traceback']) ",,120,0
openstack%2Fvalidations-common~master~If0563d5dac5135b71c0a1162a56e21dbe01e2e2b,openstack/validations-common,master,If0563d5dac5135b71c0a1162a56e21dbe01e2e2b,Fix pygments style,MERGED,2020-06-24 03:59:00.000000000,2020-07-22 11:38:22.000000000,2020-07-22 11:32:15.000000000,"[{'_account_id': 11491}, {'_account_id': 22348}, {'_account_id': 28223}]","[{'number': 1, 'created': '2020-06-24 03:59:00.000000000', 'files': ['releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/validations-common/commit/e907e8cebb4b20c8f50d73fb590c2dffc88e33d3', 'message': 'Fix pygments style\n\nNew theme of docs respects pygments_style.\n\nmore info: http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html\n\nChange-Id: If0563d5dac5135b71c0a1162a56e21dbe01e2e2b\n'}]",0,737675,e907e8cebb4b20c8f50d73fb590c2dffc88e33d3,8,3,1,17130,,,0,"Fix pygments style

New theme of docs respects pygments_style.

more info: http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html

Change-Id: If0563d5dac5135b71c0a1162a56e21dbe01e2e2b
",git fetch https://review.opendev.org/openstack/validations-common refs/changes/75/737675/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/source/conf.py'],1,e907e8cebb4b20c8f50d73fb590c2dffc88e33d3,sphinx,pygments_style = 'native',pygments_style = 'sphinx',1,1
openstack%2Fvalidations-libs~master~Ic861e69a6bc268c30fead9ec1a1f6a9a735f7403,openstack/validations-libs,master,Ic861e69a6bc268c30fead9ec1a1f6a9a735f7403,Update openstackdocstheme.,MERGED,2020-06-10 07:30:23.000000000,2020-07-22 11:32:14.000000000,2020-07-22 11:32:14.000000000,"[{'_account_id': 11491}, {'_account_id': 22348}, {'_account_id': 28223}]","[{'number': 1, 'created': '2020-06-10 07:30:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/2614d01be6ae6c50a9e9b58b78ff3d494b82a1f5', 'message': 'Update openstackdocstheme.\n\nUpdate to the latest version.\n\nChange-Id: Ic861e69a6bc268c30fead9ec1a1f6a9a735f7403\n'}, {'number': 2, 'created': '2020-06-15 08:56:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/48a6cc0df6dd9131ca47a9997a3bb8d8d1f714be', 'message': 'Update openstackdocstheme.\n\nUpdate to the latest version.\n\nChange-Id: Ic861e69a6bc268c30fead9ec1a1f6a9a735f7403\n'}, {'number': 3, 'created': '2020-06-23 11:54:46.000000000', 'files': ['doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/validations-libs/commit/6f3241426fc2805bf83605678ecae9923d49453a', 'message': 'Update openstackdocstheme.\n\nUpdate to the latest version.\n\nChange-Id: Ic861e69a6bc268c30fead9ec1a1f6a9a735f7403\n'}]",0,734757,6f3241426fc2805bf83605678ecae9923d49453a,11,3,3,31245,,,0,"Update openstackdocstheme.

Update to the latest version.

Change-Id: Ic861e69a6bc268c30fead9ec1a1f6a9a735f7403
",git fetch https://review.opendev.org/openstack/validations-libs refs/changes/57/734757/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/requirements.txt'],1,2614d01be6ae6c50a9e9b58b78ff3d494b82a1f5,update_openstackdocstheme,openstackdocstheme>=2.2.2 # Apache-2.0,openstackdocstheme>=1.20.0 # Apache-2.0,1,1
openstack%2Ftripleo-ci~master~I56a03fe6d307fee83e0e29c5357f124b6b1960af,openstack/tripleo-ci,master,I56a03fe6d307fee83e0e29c5357f124b6b1960af,Add centos-8-containerized-undercloud-upgrades job ussuri/master,MERGED,2020-07-03 12:12:47.000000000,2020-07-22 11:32:10.000000000,2020-07-22 11:32:09.000000000,"[{'_account_id': 3153}, {'_account_id': 8175}, {'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 11090}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}]","[{'number': 1, 'created': '2020-07-03 12:12:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/12d56a739aafcce48cd30de6a3e3aa404457d7ab', 'message': 'Add centos-8-containerized-undercloud-upgrades job\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add -train/-ussuri specific jobs as needed\n(to differentiate voting).\n\nThis will run for -train -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 2, 'created': '2020-07-06 10:22:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/9c5aa8c9e9d128281bdeeb65b14db4e9a9e9553d', 'message': 'Add centos-8-containerized-undercloud-upgrades job\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add -train/-ussuri specific jobs as needed\n(to differentiate voting).\n\nThis will run for -train -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 3, 'created': '2020-07-07 09:14:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/35e4179e4fa633f02b319fc967cf11583e2df459', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 4, 'created': '2020-07-07 11:15:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/026818a67e7c43cbad6f7cc965f1c35d8c36da0c', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 5, 'created': '2020-07-08 09:24:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/59f8478be660e76af9dd0a8bbe36c50af4fe7f13', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 6, 'created': '2020-07-08 10:40:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/1c6f5e0555cf4af9c5ba9979ced7bad436846ac7', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nDepends-On: https://review.opendev.org/739946\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 7, 'created': '2020-07-09 10:35:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/cd0e4c8d9f9548c159a5e4b396f5ac4124b00b5a', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nDepends-On: https://review.opendev.org/739946\nDepends-On: https://review.opendev.org/740019\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 8, 'created': '2020-07-10 08:38:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/cddcd194a1b03d0d341a2fc6aacf6a24394e69d8', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nDepends-On: https://review.opendev.org/739946\nDepends-On: https://review.opendev.org/740019\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 9, 'created': '2020-07-13 11:54:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/5c546e1ebfc0990d40b8b821dfc9003e16e7ba70', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nDepends-On: https://review.opendev.org/739946\nDepends-On: https://review.opendev.org/740019\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 10, 'created': '2020-07-15 10:08:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/740d32b2ab25f476c57b56024f5a1f3fb018eabb', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nDepends-On: https://review.opendev.org/739946\nDepends-On: https://review.opendev.org/740019\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 11, 'created': '2020-07-20 11:51:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/b115fca2af1f29f6fe9ee83fd51a65b09ffc14d7', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nDepends-On: https://review.opendev.org/739946\nDepends-On: https://review.opendev.org/740019\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 12, 'created': '2020-07-21 08:27:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ff492f9c2fea08e87ee5a6aa4ef6c08d944b25b7', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}, {'number': 13, 'created': '2020-07-21 09:11:03.000000000', 'files': ['zuul.d/undercloud-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/8619000f7b2024ada95128bfb235f871f523cc4e', 'message': 'Add centos-8-containerized-undercloud-upgrades job ussuri/master\n\ntripleo-ci-centos-8-containerized-undercloud-upgrades is added\nnon voting for now. Once merged and green we can switch to voting\nat which time we can add ussuri specific job if we want different\noting for master.\n\nThis will run for -ussuri + master. Tracked by tripleo-ci\nat [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nChange-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af\n'}]",2,739218,8619000f7b2024ada95128bfb235f871f523cc4e,47,12,13,8449,,,0,"Add centos-8-containerized-undercloud-upgrades job ussuri/master

tripleo-ci-centos-8-containerized-undercloud-upgrades is added
non voting for now. Once merged and green we can switch to voting
at which time we can add ussuri specific job if we want different
oting for master.

This will run for -ussuri + master. Tracked by tripleo-ci
at [1]

[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817
Change-Id: I56a03fe6d307fee83e0e29c5357f124b6b1960af
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/18/739218/3 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/undercloud-jobs.yaml'],1,12d56a739aafcce48cd30de6a3e3aa404457d7ab,centos8_upgrades_jobs, - tripleo-ci-centos-8-containerized-undercloud-upgrades: irrelevant-files: *undercloud_ignored - job: name: tripleo-ci-centos-8-containerized-undercloud-upgrades parent: tripleo-ci-base-singlenode-centos-8 branches: ^(?!stable/(queens|rocky|stein)).*$ voting: false vars: featureset: '050' featureset_override: validate_services: false extra_tags: - undercloud-upgrade,,14,0
openstack%2Ftripleo-ci~master~I9ed5416e213c0c35380c79d560d19218a168d100,openstack/tripleo-ci,master,I9ed5416e213c0c35380c79d560d19218a168d100,Add centos8 container updates and upgrades jobs -ussuri train,MERGED,2020-07-03 12:12:47.000000000,2020-07-22 11:32:08.000000000,2020-07-22 11:32:08.000000000,"[{'_account_id': 8175}, {'_account_id': 8367}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}]","[{'number': 1, 'created': '2020-07-03 12:12:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/1ce26c2593aaea36bac68b7640bbcf1145262566', 'message': ""Add centos8 container updates and upgrades jobs -ussuri and train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nand -train versions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: values for -train and ussuri\nupgrades job are thus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri/train are added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 2, 'created': '2020-07-06 10:22:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/4ca8c96e183ad1e561aef9c724088fcf8794d3b7', 'message': ""Add centos8 container updates and upgrades jobs -ussuri and train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nand -train versions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: values for -train and ussuri\nupgrades job are thus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri/train are added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 3, 'created': '2020-07-07 09:14:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/b1a12ca41158ec86f7cc7bdd05df5a09ea8e0a71', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: value for ussuri upgrades job is\nthus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri is added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 4, 'created': '2020-07-07 11:15:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ef33cb8cafb497125be918596d2656c15fbe02e5', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: value for ussuri upgrades job is\nthus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri is added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 5, 'created': '2020-07-08 09:24:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/f7a9231da9f9d35dbbd5d0a47cbaffb7c75d5069', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: value for ussuri upgrades job is\nthus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri is added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 6, 'created': '2020-07-10 08:38:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/d056715dd658b121ec28643ab38b6975b27d48bb', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: value for ussuri upgrades job is\nthus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri is added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\nDepends-On: https://review.opendev.org/739963 # test minor update train fix\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 7, 'created': '2020-07-13 11:53:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/ee5ab0732078a7a3047345bb9e03d652e1e739d8', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: value for ussuri upgrades job is\nthus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri is added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\nDepends-On: https://review.opendev.org/739963 # test minor update train fix\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 8, 'created': '2020-07-15 10:08:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/2e57bb1b079a25ba49c3c717216eaa9c56c3f071', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. Both are added to the tripleo-multinode-branchful template.\nFor updates jobs as they always gate (voting true) we use the\n-branch jobs to guard changes in our tooling tripleo-ci/tq/extras\ni.e. 'as usual'.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs as we need different voting\n(not changed here - followup) for master we instead use the -branch\njobs for this purpose. i.e. container-upgrades-ussuri will run\nfor tripleo-common stable/ussuri branch. Not on a tripleo-ci\nrepo 'as usual'. The branches: value for ussuri upgrades job is\nthus stable/foo and not master: as is normally\nthe case for these '-branch' jobs. For this reason the\nupgrades-ussuri is added into the main templates and not\ninto the branchful one.\n\nTracked by tripleo-ci at [1]\n\nDepends-On: https://review.opendev.org/739963 # test minor update train fix\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 9, 'created': '2020-07-20 11:51:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/26609a94edb5afac19c28736e5f15263f6802cb7', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. As described in 'Centos8 minor update & branchful jobs'\nat [1] the -train job is being merged as non voting and blocked\non related-bug below.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs we always need different voting\n(not done here - followup ) for master. The -branch jobs run\nfor eg tripleo-common stable/ussuri branch.\n\nThere is an issue with coverage against the branchless repos as\ndescribed at [1]. We can consider adding relevant jobs later\nonce basic coverage is restored here.\n\nRelated-Bug: 1887176\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 10, 'created': '2020-07-21 08:27:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/74d2b5db5f63b791ae2792e7cb2e38a815bb5910', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. As described in 'Centos8 minor update & branchful jobs'\nat [1] the -train job is being merged as non voting and blocked\non related-bug below.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs we always need different voting\n(not done here - followup ) for master. The -branch jobs run\nfor eg tripleo-common stable/ussuri branch.\n\nThere is an issue with coverage against the branchless repos as\ndescribed at [1]. We can consider adding relevant jobs later\nonce basic coverage is restored here.\n\nRelated-Bug: 1887176\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}, {'number': 11, 'created': '2020-07-21 09:10:19.000000000', 'files': ['zuul.d/multinode-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/30849194bab85ae23b9aa54bf7306dc32d52a8cf', 'message': ""Add centos8 container updates and upgrades jobs -ussuri train\n\nAdds centos8 multinode-oooq-container-updates-train, ussuri\nexisted. As described in 'Centos8 minor update & branchful jobs'\nat [1] the -train job is being merged as non voting and blocked\non related-bug below.\n\nAdds the scenario000-multinode-oooq-container-upgrades + -ussuri\nversions. For upgrades jobs we always need different voting\n(not done here - followup ) for master. The -branch jobs run\nfor eg tripleo-common stable/ussuri branch.\n\nThere is an issue with coverage against the branchless repos as\ndescribed at [1]. We can consider adding relevant jobs later\nonce basic coverage is restored here.\n\nRelated-Bug: 1887176\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\nChange-Id: I9ed5416e213c0c35380c79d560d19218a168d100\n""}]",7,739217,30849194bab85ae23b9aa54bf7306dc32d52a8cf,48,10,11,8449,,,0,"Add centos8 container updates and upgrades jobs -ussuri train

Adds centos8 multinode-oooq-container-updates-train, ussuri
existed. As described in 'Centos8 minor update & branchful jobs'
at [1] the -train job is being merged as non voting and blocked
on related-bug below.

Adds the scenario000-multinode-oooq-container-upgrades + -ussuri
versions. For upgrades jobs we always need different voting
(not done here - followup ) for master. The -branch jobs run
for eg tripleo-common stable/ussuri branch.

There is an issue with coverage against the branchless repos as
described at [1]. We can consider adding relevant jobs later
once basic coverage is restored here.

Related-Bug: 1887176
[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817
Change-Id: I9ed5416e213c0c35380c79d560d19218a168d100
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/17/739217/5 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/multinode-jobs.yaml'],1,1ce26c2593aaea36bac68b7640bbcf1145262566,centos8_upgrades_jobs," - tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades-ussuri: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades-train: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades-ussuri: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades-train: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates-ussuri: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates-train: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates-ussuri: irrelevant-files: *multinode_ignored - tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates-train: irrelevant-files: *multinode_ignored branches: ^(?!stable/(queens|rocky|stein)).*$ name: tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates-ussuri description: | ussuri tripleo minor update job for centos-8, this is not an upgrade job. parent: tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates branches: master voting: true override-checkout: stable/ussuri vars: branch_override: stable/ussuri - job: name: tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates-train description: | train tripleo minor update job for centos-8, this is not an upgrade job. parent: tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates branches: master voting: true override-checkout: stable/train vars: branch_override: stable/train - job: - job: name: tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades parent: tripleo-ci-base-multinode-centos-8 voting: false branches: ^master$ vars: nodes: 1ctlr featureset: '051' extra_tags: - overcloud-upgrade - job: name: tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades-ussuri parent: tripleo-ci-base-multinode-centos-8 voting: false branches: ^stable/ussuri$ override-checkout: 'stable/ussuri' vars: branch_override: 'stable/ussuri' nodes: 1ctlr featureset: '051' extra_tags: - overcloud-upgrade - job: name: tripleo-ci-centos-8-scenario000-multinode-oooq-container-upgrades-train parent: tripleo-ci-base-multinode-centos-8 voting: false branches: ^stable/train$ override-checkout: 'stable/train' vars: nodes: 1ctlr branch_override: 'stable/train' featureset: '051' extra_tags: - overcloud-upgrade"," branches: ^(?!stable/(queens|rocky|stein|train)).*$# Master updates job must be non-voting, unlike ussuri job that must vote - job: name: tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates-ussuri description: | ussuri tripleo minor update job for centos-8, this is not an upgrade job. parent: tripleo-ci-centos-8-scenario000-multinode-oooq-container-updates voting: true override-checkout: stable/ussuri vars: branch_override: stable/ussuri ",82,12
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I04a6114ca3d2703ca2891d6807d49b78ffee0f97,openstack/tripleo-heat-templates,stable/ussuri,I04a6114ca3d2703ca2891d6807d49b78ffee0f97,Simplify host entries generation,MERGED,2020-07-16 09:29:32.000000000,2020-07-22 11:22:03.000000000,2020-07-22 11:22:02.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-16 09:29:32.000000000', 'files': ['overcloud.j2.yaml', 'puppet/role.role.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/eefa55e340a9f015ecdaa809f460defba428f28d', 'message': 'Simplify host entries generation\n\nThis removes a resource and the the unnecessary yaql function.\nAlso replaces json data types with lists to reduce memory\nfootprint.\n\nChange-Id: I04a6114ca3d2703ca2891d6807d49b78ffee0f97\nRelated-Bug: #1886203\n(cherry picked from commit d573f4e8787c99982f6172aae74042f05a750d56)\n'}]",0,741411,eefa55e340a9f015ecdaa809f460defba428f28d,17,5,1,8833,,,0,"Simplify host entries generation

This removes a resource and the the unnecessary yaql function.
Also replaces json data types with lists to reduce memory
footprint.

Change-Id: I04a6114ca3d2703ca2891d6807d49b78ffee0f97
Related-Bug: #1886203
(cherry picked from commit d573f4e8787c99982f6172aae74042f05a750d56)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/11/741411/1 && git format-patch -1 --stdout FETCH_HEAD,"['overcloud.j2.yaml', 'puppet/role.role.j2.yaml']",2,eefa55e340a9f015ecdaa809f460defba428f28d,remove_yaql-stable/ussuri," - str_replace: template: PRIMARYIP PRIMARYHOST.DOMAIN PRIMARYHOST params: PRIMARYIP: {get_attr: [NetIpMap, net_ip_map, {get_param: [ServiceNetMap, {{role.name}}HostnameResolveNetwork]}]} DOMAIN: {get_param: CloudDomain} PRIMARYHOST: {get_attr: [{{server_resource_name}}, name]} - str_replace: template: {{network.name}}IP {{network.name}}HOST.DOMAIN {{network.name}}HOST params: DOMAIN: {get_param: CloudDomain} {{network.name}}IP: {get_attr: [{{network.name}}Port, ip_address]} {{network.name}}HOST: {get_attr: [NetHostMap, value, {{network.name_lower|default(network.name.lower())}}, short]} - str_replace: template: CTLPLANEIP CTLPLANEHOST.DOMAIN CTLPLANEHOST params: DOMAIN: {get_param: CloudDomain} CTLPLANEIP: {get_attr: [{{server_resource_name}}, networks, ctlplane, 0]} CTLPLANEHOST: {get_attr: [NetHostMap, value, ctlplane, short]}"," entries: - str_replace: template: PRIMARYIP PRIMARYHOST.DOMAIN PRIMARYHOST params: PRIMARYIP: {get_attr: [NetIpMap, net_ip_map, {get_param: [ServiceNetMap, {{role.name}}HostnameResolveNetwork]}]} DOMAIN: {get_param: CloudDomain} PRIMARYHOST: {get_attr: [{{server_resource_name}}, name]} - str_replace: template: {{network.name}}IP {{network.name}}HOST.DOMAIN {{network.name}}HOST params: DOMAIN: {get_param: CloudDomain} {{network.name}}IP: {get_attr: [{{network.name}}Port, ip_address]} {{network.name}}HOST: {get_attr: [NetHostMap, value, {{network.name_lower|default(network.name.lower())}}, short]} - str_replace: template: CTLPLANEIP CTLPLANEHOST.DOMAIN CTLPLANEHOST params: DOMAIN: {get_param: CloudDomain} CTLPLANEIP: {get_attr: [{{server_resource_name}}, networks, ctlplane, 0]} CTLPLANEHOST: {get_attr: [NetHostMap, value, ctlplane, short]}",58,69
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I071292b1bc9181305fd8d4dddf098c5013f73260,openstack/tripleo-heat-templates,stable/train,I071292b1bc9181305fd8d4dddf098c5013f73260,Add podman service to scenario007 environment,MERGED,2020-07-20 08:42:05.000000000,2020-07-22 11:22:00.000000000,2020-07-22 11:22:00.000000000,"[{'_account_id': 3153}, {'_account_id': 8449}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 31075}]","[{'number': 1, 'created': '2020-07-20 08:42:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/4008f3191a0260976a0fa06f1bebd52d76fab2ec', 'message': 'Add podman service to scenario007 environment\n\nChange-Id: I071292b1bc9181305fd8d4dddf098c5013f73260\n'}, {'number': 2, 'created': '2020-07-21 12:32:45.000000000', 'files': ['ci/environments/scenario007-multinode-containers.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/63154e137ecfe7b65dff75a1d51e15d411314619', 'message': 'Add podman service to scenario007 environment\n\nAs centos8 needs podman, centos-8-multinode-FS030-train job failed with\nlog[1]. So made chnages to patch[2] and also added podman service\nto scenario007 environment as per comment given on patch[2]\n\n[1] https://logserver.rdoproject.org/84/28284/18/check/periodic-tripleo-ci-centos-8-multinode-1ctlr-featureset030-train/879f959/logs/undercloud/home/zuul/overcloud_deploy.log.txt.gz\n[2] https://review.opendev.org/#/c/741644/\n\nChange-Id: I071292b1bc9181305fd8d4dddf098c5013f73260\n'}]",1,741891,63154e137ecfe7b65dff75a1d51e15d411314619,18,6,2,31075,,,0,"Add podman service to scenario007 environment

As centos8 needs podman, centos-8-multinode-FS030-train job failed with
log[1]. So made chnages to patch[2] and also added podman service
to scenario007 environment as per comment given on patch[2]

[1] https://logserver.rdoproject.org/84/28284/18/check/periodic-tripleo-ci-centos-8-multinode-1ctlr-featureset030-train/879f959/logs/undercloud/home/zuul/overcloud_deploy.log.txt.gz
[2] https://review.opendev.org/#/c/741644/

Change-Id: I071292b1bc9181305fd8d4dddf098c5013f73260
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/91/741891/1 && git format-patch -1 --stdout FETCH_HEAD,['ci/environments/scenario007-multinode-containers.yaml'],1,4008f3191a0260976a0fa06f1bebd52d76fab2ec,add_podman_service, - OS::TripleO::Services::Podman,,1,0
openstack%2Ftripleo-common~stable%2Ftrain~Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f,openstack/tripleo-common,stable/train,Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f,[Train-Only] Fix mixing nodes and limit_hosts.,MERGED,2020-05-23 00:49:51.000000000,2020-07-22 10:49:47.000000000,2020-07-22 10:47:59.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-05-23 00:49:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/861552cf15f0da07efe97d9fd7dc9e0c1912b7e0', 'message': '[WIP] Fix mixing nodes and limit_hosts.\n\nThis corrects a behavior where in some cases the --limit is not\npassed to the ansible-playbook command during config_download_deploy.\n\nChange-Id: Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f\nTODO: Create/link launchpad bug. Test with baremetal nodes.\nSigned-off-by: Luke Short <ekultails@gmail.com>\n'}, {'number': 2, 'created': '2020-05-23 00:51:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/8bc3b3be9e7780c928c8d4c78a4cb81facc4e96f', 'message': '[WIP][Train-Only] Fix mixing nodes and limit_hosts.\n\nThis corrects a behavior where in some cases the --limit is not\npassed to the ansible-playbook command during config_download_deploy.\n\nChange-Id: Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f\nTODO: Create/link launchpad bug. Test with baremetal nodes.\nSigned-off-by: Luke Short <ekultails@gmail.com>\n'}, {'number': 3, 'created': '2020-05-27 15:49:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/46535e2ee918e982babb3d8423029e61b0e794be', 'message': '[Train-Only] Fix mixing nodes and limit_hosts.\n\nThis corrects a behavior where in some cases the --limit is not\npassed to the ansible-playbook command during config_download_deploy.\n\nChange-Id: Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f\nCloses-Bug: #1880977\nSigned-off-by: Luke Short <ekultails@gmail.com>\n'}, {'number': 4, 'created': '2020-06-24 13:15:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/cdbafd216005fad846151513144fbf90ae3b3309', 'message': '[Train-Only] Fix mixing nodes and limit_hosts.\n\nThis corrects a behavior where in some cases the --limit is not\npassed to the ansible-playbook command during config_download_deploy.\n\nChange-Id: Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f\nCloses-Bug: #1880977\nSigned-off-by: Luke Short <ekultails@gmail.com>\n'}, {'number': 5, 'created': '2020-07-21 20:11:23.000000000', 'files': ['workbooks/deployment.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/f161bfb049b23b53706e6950f71aaaadf4687131', 'message': '[Train-Only] Fix mixing nodes and limit_hosts.\n\nThis corrects a behavior where in some cases the --limit is not\npassed to the ansible-playbook command during config_download_deploy.\n\nChange-Id: Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f\nCloses-Bug: #1880977\nSigned-off-by: Luke Short <ekultails@gmail.com>\n'}]",0,730426,f161bfb049b23b53706e6950f71aaaadf4687131,29,6,5,25877,,,0,"[Train-Only] Fix mixing nodes and limit_hosts.

This corrects a behavior where in some cases the --limit is not
passed to the ansible-playbook command during config_download_deploy.

Change-Id: Ie5b8d41abacb071f528d4f9220bff3532ed0ab2f
Closes-Bug: #1880977
Signed-off-by: Luke Short <ekultails@gmail.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/26/730426/5 && git format-patch -1 --stdout FETCH_HEAD,['workbooks/deployment.yaml'],1,861552cf15f0da07efe97d9fd7dc9e0c1912b7e0,," nodes_names: <% $.nodes.join(',') %> publish: nodes_names: <% list(task().result.instance_info.display_name).join(',') %> limit_hosts: <% ($.nodes_names or $.limit_hosts) or false %>"," limit_hosts: <% $.nodes.join(',') %> publish: limit_hosts: <% list(task().result.instance_info.display_name).join(',') %> limit_hosts: <% $.nodes and $.get(limit_hosts) or false %>",3,3
openstack%2Ftripleo-quickstart~master~Ibf72c11a886245f798ada5426dc73ae9139b3ea1,openstack/tripleo-quickstart,master,Ibf72c11a886245f798ada5426dc73ae9139b3ea1,Fix fs30 CentOS-8 job with /etc/docker does not exists,MERGED,2020-07-17 13:57:24.000000000,2020-07-22 10:49:37.000000000,2020-07-22 10:47:59.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 31075}]","[{'number': 1, 'created': '2020-07-17 13:57:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/41093b4a7fc2458e4eed9905d11ea6a82d4db6bd', 'message': 'Fix fs30 CentOS-8 job with /etc/docker does not exists\n\nWhile adding fs30 CentOS8 job fails with error message\n""Destination directory /etc/docker does not exist"" as CentOS-8\nneeds podman. This patch fixes the same issue.\n\nChange-Id: Ibf72c11a886245f798ada5426dc73ae9139b3ea1\nCloses-Bug: 1887963\n'}, {'number': 2, 'created': '2020-07-17 13:59:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/ee09bafe083970fa5aa62530503cc1a4bb3f71c4', 'message': 'Fix fs30 CentOS-8 job with /etc/docker does not exists\n\nWhile adding fs30 CentOS8 job fails with error message\n""Destination directory /etc/docker does not exist"" as CentOS-8\nneeds podman. This patch fixes the same issue.\n\nCloses-Bug: 1887963\nChange-Id: Ibf72c11a886245f798ada5426dc73ae9139b3ea1\n'}, {'number': 3, 'created': '2020-07-21 17:50:21.000000000', 'files': ['config/general_config/featureset030.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/febca79721097adcfc2ee1db49f2b0f3222dee4c', 'message': 'Fix fs30 CentOS-8 job with /etc/docker does not exists\n\nWhile adding fs30 CentOS8 job fails with error message\n""Destination directory /etc/docker does not exist"" as CentOS-8\nneeds podman. This patch fixes the same issue.\n\nCloses-Bug: 1887963\nChange-Id: Ibf72c11a886245f798ada5426dc73ae9139b3ea1\n'}]",1,741644,febca79721097adcfc2ee1db49f2b0f3222dee4c,18,10,3,31075,,,0,"Fix fs30 CentOS-8 job with /etc/docker does not exists

While adding fs30 CentOS8 job fails with error message
""Destination directory /etc/docker does not exist"" as CentOS-8
needs podman. This patch fixes the same issue.

Closes-Bug: 1887963
Change-Id: Ibf72c11a886245f798ada5426dc73ae9139b3ea1
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/44/741644/3 && git format-patch -1 --stdout FETCH_HEAD,['config/general_config/featureset030.yml'],1,41093b4a7fc2458e4eed9905d11ea6a82d4db6bd,fix_docker_issue_c8," {%- if ansible_distribution in [""RedHat"", ""CentOS""] and ansible_distribution_major_version|int >= 8 %}podman {%- else %}docker{% endif -%}"," {% if release not in ['pike', 'queens', 'rocky', 'stein', 'rocky', 'train'] -%} podman {%- else -%} docker {%- endif -%}",2,5
openstack%2Fnova~stable%2Ftrain~I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75,openstack/nova,stable/train,I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75,libvirt: Mark e1000e VIF as supported,MERGED,2020-06-19 08:51:06.000000000,2020-07-22 10:43:02.000000000,2020-07-20 12:29:02.000000000,"[{'_account_id': 8556}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14595}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-06-19 08:51:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4e68b3980c6bb4051864a2273349b5c5db455759', 'message': 'libvirt: Mark e1000e VIF as supported\n\nThis is supported by the QEMU/KVM backends in libvirt. There\'s no reason\nnot to support it in nova. This appears to have been an oversight.\n\nConflicts:\n\tnova/virt/libvirt/vif.py\n\nNOTE(stephenfin): Conflicts are due to absence of change\nI0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5 (""libvirt: Use domain\ncapabilities to get supported device models"") which moved the list of\nsupported VIFs from a function attribute to a module attribute.\n\nChange-Id: I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1882919\n(cherry picked from commit 644cb5cb8bf44184d9b3f046cc67746b13550dd6)\n(cherry picked from commit 52dbf4981c89f1582faa3f2f9ebdf707c09f4c2a)\n'}, {'number': 2, 'created': '2020-06-26 09:24:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/62605469b98049116e661ad505f9e12ffc3fa11e', 'message': 'libvirt: Mark e1000e VIF as supported\n\nThis is supported by the QEMU/KVM backends in libvirt. There\'s no reason\nnot to support it in nova. This appears to have been an oversight.\n\nConflicts:\n\tnova/virt/libvirt/vif.py\n\nNOTE(stephenfin): Conflicts are due to absence of change\nI0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5 (""libvirt: Use domain\ncapabilities to get supported device models"") which moved the list of\nsupported VIFs from a function attribute to a module attribute.\n\nChange-Id: I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1882919\n(cherry picked from commit 644cb5cb8bf44184d9b3f046cc67746b13550dd6)\n(cherry picked from commit 52dbf4981c89f1582faa3f2f9ebdf707c09f4c2a)\n'}, {'number': 3, 'created': '2020-06-26 09:24:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c91f68268a4ad5d4b54dbe96048a042fe846311b', 'message': 'libvirt: Mark e1000e VIF as supported\n\nThis is supported by the QEMU/KVM backends in libvirt. There\'s no reason\nnot to support it in nova. This appears to have been an oversight.\n\nConflicts:\n\tnova/virt/libvirt/vif.py\n\nNOTE(stephenfin): Conflicts are due to absence of change\nI0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5 (""libvirt: Use domain\ncapabilities to get supported device models"") which moved the list of\nsupported VIFs from a function attribute to a module attribute.\n\nChange-Id: I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1882919\n(cherry picked from commit 644cb5cb8bf44184d9b3f046cc67746b13550dd6)\n(cherry picked from commit fd275f5da6dd511230ce41dda524a44d30bd0390)\n'}, {'number': 4, 'created': '2020-07-09 15:44:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a8e979fbd16ab96782f2ea54e7ed1b39c8b3d97d', 'message': 'libvirt: Mark e1000e VIF as supported\n\nThis is supported by the QEMU/KVM backends in libvirt. There\'s no reason\nnot to support it in nova. This appears to have been an oversight.\n\nConflicts:\n\tnova/virt/libvirt/vif.py\n\nNOTE(stephenfin): Conflicts are due to absence of change\nI0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5 (""libvirt: Use domain\ncapabilities to get supported device models"") which moved the list of\nsupported VIFs from a function attribute to a module attribute.\n\nChange-Id: I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1882919\n(cherry picked from commit 644cb5cb8bf44184d9b3f046cc67746b13550dd6)\n(cherry picked from commit fd275f5da6dd511230ce41dda524a44d30bd0390)\n'}, {'number': 5, 'created': '2020-07-13 10:40:50.000000000', 'files': ['nova/virt/libvirt/vif.py', 'releasenotes/notes/bug-1882919-support-e1000e-vif-5437a45c13dff978.yaml', 'nova/tests/unit/virt/libvirt/test_vif.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ddbc262494cf0df3f3abd5b5139eb787bb085f8c', 'message': 'libvirt: Mark e1000e VIF as supported\n\nThis is supported by the QEMU/KVM backends in libvirt. There\'s no reason\nnot to support it in nova. This appears to have been an oversight.\n\nConflicts:\n\tnova/virt/libvirt/vif.py\n\nNOTE(stephenfin): Conflicts are due to absence of change\nI0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5 (""libvirt: Use domain\ncapabilities to get supported device models"") which moved the list of\nsupported VIFs from a function attribute to a module attribute.\n\nChange-Id: I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1882919\n(cherry picked from commit 644cb5cb8bf44184d9b3f046cc67746b13550dd6)\n(cherry picked from commit 840de3b8924612fa3fc47a4c9032a4723d536613)\n'}]",1,736962,ddbc262494cf0df3f3abd5b5139eb787bb085f8c,39,8,5,15334,,,0,"libvirt: Mark e1000e VIF as supported

This is supported by the QEMU/KVM backends in libvirt. There's no reason
not to support it in nova. This appears to have been an oversight.

Conflicts:
	nova/virt/libvirt/vif.py

NOTE(stephenfin): Conflicts are due to absence of change
I0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5 (""libvirt: Use domain
capabilities to get supported device models"") which moved the list of
supported VIFs from a function attribute to a module attribute.

Change-Id: I12a5d28d75bc32a76a4f3765cb4db4cbc46c0c75
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Closes-Bug: #1882919
(cherry picked from commit 644cb5cb8bf44184d9b3f046cc67746b13550dd6)
(cherry picked from commit 840de3b8924612fa3fc47a4c9032a4723d536613)
",git fetch https://review.opendev.org/openstack/nova refs/changes/62/736962/3 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/vif.py', 'nova/tests/unit/virt/libvirt/test_vif.py', 'releasenotes/notes/bug-1882919-support-e1000e-vif-5437a45c13dff978.yaml']",3,4e68b3980c6bb4051864a2273349b5c5db455759,bug/1882919,"--- fixes: - | Previously, attempting to configure an instance with the ``e1000e`` or legacy ``VirtualE1000e`` VIF types on a host using the QEMU/KVM driver would result in an incorrect ``UnsupportedHardware`` exception. These interfaces are now correctly marked as supported. ",,11,0
openstack%2Fsushy~master~I4cbe35a53639cedb503e6754c84599113d1928bd,openstack/sushy,master,I4cbe35a53639cedb503e6754c84599113d1928bd,Support Target as an alias for target,NEW,2020-01-06 13:30:59.000000000,2020-07-22 10:41:46.000000000,,"[{'_account_id': 10379}, {'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 26340}]","[{'number': 1, 'created': '2020-01-06 13:30:59.000000000', 'files': ['sushy/resources/common.py', 'sushy/tests/unit/resources/system/test_bios.py', 'sushy/tests/unit/resources/system/test_system.py'], 'web_link': 'https://opendev.org/openstack/sushy/commit/90a978f35e9b282b4023a5dd2456f4e95fec2fbe', 'message': ""Support Target as an alias for target\n\nOn Dell PowerEdge R630 servers, the action targets use the key\n'Target' and not 'target'.\n\nChange-Id: I4cbe35a53639cedb503e6754c84599113d1928bd\nStory: 2007071\nTask: 37960\n""}]",1,701221,90a978f35e9b282b4023a5dd2456f4e95fec2fbe,17,6,1,28048,,,0,"Support Target as an alias for target

On Dell PowerEdge R630 servers, the action targets use the key
'Target' and not 'target'.

Change-Id: I4cbe35a53639cedb503e6754c84599113d1928bd
Story: 2007071
Task: 37960
",git fetch https://review.opendev.org/openstack/sushy refs/changes/21/701221/1 && git format-patch -1 --stdout FETCH_HEAD,"['sushy/resources/common.py', 'sushy/tests/unit/resources/system/test_bios.py', 'sushy/tests/unit/resources/system/test_system.py']",3,90a978f35e9b282b4023a5dd2456f4e95fec2fbe,take2," 'attribute selected via a callable',"," 'attribute Actions/#ComputerSystem.Reset/target',",6,4
openstack%2Freleases~master~I7df3feb98877b2a846f7239fb741ae84e35b59d5,openstack/releases,master,I7df3feb98877b2a846f7239fb741ae84e35b59d5,Fix output format default in list_unreleased_changes,MERGED,2020-07-21 15:36:16.000000000,2020-07-22 10:36:50.000000000,2020-07-22 10:36:50.000000000,"[{'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-21 15:36:16.000000000', 'files': ['openstack_releases/cmds/list_unreleased_changes.py'], 'web_link': 'https://opendev.org/openstack/releases/commit/1a08f4b439780da985857f27f1a210c408dbce84', 'message': 'Fix output format default in list_unreleased_changes\n\n""standard"" is not one of the valid values and it results in the\ncommand erroring because no output is returned. The correct default\nfor this opt seems to be ""std"".\n\nChange-Id: I7df3feb98877b2a846f7239fb741ae84e35b59d5\n'}]",0,742227,1a08f4b439780da985857f27f1a210c408dbce84,7,3,1,6928,,,0,"Fix output format default in list_unreleased_changes

""standard"" is not one of the valid values and it results in the
command erroring because no output is returned. The correct default
for this opt seems to be ""std"".

Change-Id: I7df3feb98877b2a846f7239fb741ae84e35b59d5
",git fetch https://review.opendev.org/openstack/releases refs/changes/27/742227/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_releases/cmds/list_unreleased_changes.py'],1,1a08f4b439780da985857f27f1a210c408dbce84,oslo-master," default='std',"," default='standard',",1,1
openstack%2Fpython-tripleoclient~master~I7dd35e64a32b99dd018ef8835d51ebb26fce8051,openstack/python-tripleoclient,master,I7dd35e64a32b99dd018ef8835d51ebb26fce8051,Eliminate the usage of kwargs in update_deployment_plan,MERGED,2020-06-23 12:57:57.000000000,2020-07-22 10:33:58.000000000,2020-07-22 10:32:20.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 9816}, {'_account_id': 19138}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-06-23 12:57:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/fe475184a1be0bb3810ce0f1431f8c821b9fe89f', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nThis makes that TypeError is raised when the method is called with\nwrong arguments, and help us with detecting interface mismatch\nmore easily.\n\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 2, 'created': '2020-06-23 22:43:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/a0b6c5efe711b1a203b423d7045f18e94ba072f8', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 3, 'created': '2020-06-24 04:37:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/024d76bb102cb650a98e2901a0ca5db4f2d765a6', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 4, 'created': '2020-07-21 05:20:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/1d6a52c78b7b46163adc8a10461d6e6744499000', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nDepends-on: https://review.opendev.org/#/c/742068/\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 5, 'created': '2020-07-21 05:40:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/d1594b62e1ed8af9756cfe2650c382c397d707af', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nDepends-on: https://review.opendev.org/#/c/742068/\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 6, 'created': '2020-07-21 05:44:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/cafd44462e7139a7b0b37241e1becba9aff7c5da', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nDepends-on: https://review.opendev.org/#/c/742068/\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 7, 'created': '2020-07-21 05:56:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/16cf96a9b988db581256f38a3b14842ca4f93d13', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 8, 'created': '2020-07-21 05:59:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/8519e6ce0da6f7e80ad54744b0403055a3a68a9b', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nThis patch also replaces incorrect playbook parameter, validate, by\nthe corret one, vlaidate_stack .\n\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 9, 'created': '2020-07-21 06:03:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/d1629ca187495450ea6c0d97220c58f27c4b9889', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nThis patch also removes validate_stack parameter from update deployment\nplan, which is always False.\n\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}, {'number': 10, 'created': '2020-07-21 06:08:03.000000000', 'files': ['tripleoclient/workflows/plan_management.py', 'tripleoclient/tests/workflows/test_plan_management.py', 'tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/bced646931dc5f44908201818ee1d108ef4dcc5a', 'message': 'Eliminate the usage of kwargs in update_deployment_plan\n\nThis patch makes sure that explicit arguments are defined for the\nupdate_deployment_plan method.\nWith this change, update_deployment_plan should raise TypeError when\nthe method is called with wrong arguments, and help us with detecting\ninterface mismatch more easily, compared to KeyError it currently\nraises.\n\nThis patch also removes validate_stack parameter from update deployment\nplan, which is always False.\n\nChange-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051\n'}]",4,737530,bced646931dc5f44908201818ee1d108ef4dcc5a,32,8,10,9816,,,0,"Eliminate the usage of kwargs in update_deployment_plan

This patch makes sure that explicit arguments are defined for the
update_deployment_plan method.
With this change, update_deployment_plan should raise TypeError when
the method is called with wrong arguments, and help us with detecting
interface mismatch more easily, compared to KeyError it currently
raises.

This patch also removes validate_stack parameter from update deployment
plan, which is always False.

Change-Id: I7dd35e64a32b99dd018ef8835d51ebb26fce8051
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/30/737530/6 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/workflows/plan_management.py'],1,fe475184a1be0bb3810ce0f1431f8c821b9fe89f,kwargs,"def update_deployment_plan(clients, container, generate_passwords, validate_stack, verbosity_level=0): """"""Update a deployment plan. :param clients: Application client object. :type clients: Object :param container: Container name to pull from. :type container: String :param generate_passwords: Whether to generate password :type generate_passwords: Boolean :param validate_stack: Whether to validate stack :type validate_stack: Boolean :param verbosity_level: Verbosity level used in playbook execution :type verbosity_level: Integer """""" ""container"": container, ""validate"": validate_stack, ""generate_passwords"": generate_passwords,","def update_deployment_plan(clients, verbosity_level=0, **workflow_input): ""container"": workflow_input['container'], ""validate"": workflow_input['validate_stack'], ""generate_passwords"": workflow_input[""generate_passwords""], source_url=None,",23,5
openstack%2Ftripleo-common~stable%2Fussuri~I8122178601fd8e28bcf0a878c410d348e6539dd6,openstack/tripleo-common,stable/ussuri,I8122178601fd8e28bcf0a878c410d348e6539dd6,Update container image sources in U,MERGED,2020-07-15 15:56:44.000000000,2020-07-22 10:33:51.000000000,2020-07-22 10:32:18.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-15 15:56:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/3e00b71e2cea1440569bfde14c8febaf2a40b851', 'message': 'Update container image sources in U\n\nAll of the container image sources in U were pointed at a respo in\nquay.io which does not exist. Additionally the repo name was\nincorrect meaning that should it exist it would pull from the wrong\ncontainer set. This change updates the repos URL and name to point\nto a valid URL.\n\nChange-Id: I8122178601fd8e28bcf0a878c410d348e6539dd6\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 2, 'created': '2020-07-15 16:10:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/a298373f54a29cc4f7f8b8a794b21addf80b7d1e', 'message': 'Update container image sources in U\n\nAll of the container image sources in U were pointed at a respo in\nquay.io which does not exist. Additionally the repo name was\nincorrect meaning that should it exist it would pull from the wrong\ncontainer set. This change updates the repos URL and name to point\nto a valid URL.\n\nChange-Id: I8122178601fd8e28bcf0a878c410d348e6539dd6\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 3, 'created': '2020-07-15 22:00:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/8e1d0d2b4b10f8ab30e65ea830eebfb82b469329', 'message': 'Update container image sources in U\n\nAll of the container image sources in U were pointed at a respo in\nquay.io which does not exist. Additionally the repo name was\nincorrect meaning that should it exist it would pull from the wrong\ncontainer set. This change updates the repos URL and name to point\nto a valid URL.\n\nChange-Id: I8122178601fd8e28bcf0a878c410d348e6539dd6\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}, {'number': 4, 'created': '2020-07-21 13:15:21.000000000', 'files': ['container-images/tripleo_containers.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/2fc3d1f3ea356a95b7eb08340e498cc6fa5e1608', 'message': 'Update container image sources in U\n\nAll of the container image sources in U were pointed at a respo in\nquay.io which does not exist. Additionally the repo name was\nincorrect meaning that should it exist it would pull from the wrong\ncontainer set. This change updates the repos URL and name to point\nto a valid URL.\n\nChange-Id: I8122178601fd8e28bcf0a878c410d348e6539dd6\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\n'}]",2,741261,2fc3d1f3ea356a95b7eb08340e498cc6fa5e1608,28,6,4,7353,,,0,"Update container image sources in U

All of the container image sources in U were pointed at a respo in
quay.io which does not exist. Additionally the repo name was
incorrect meaning that should it exist it would pull from the wrong
container set. This change updates the repos URL and name to point
to a valid URL.

Change-Id: I8122178601fd8e28bcf0a878c410d348e6539dd6
Signed-off-by: Kevin Carter <kecarter@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/61/741261/4 && git format-patch -1 --stdout FETCH_HEAD,['container-images/tripleo_containers.yaml'],1,3e00b71e2cea1440569bfde14c8febaf2a40b851,, imagename: docker.io/tripleou/openstack-base:current-tripleo imagename: docker.io/tripleou/openstack-os:current-tripleo imagename: docker.io/tripleou/openstack-aodh-base:current-tripleo imagename: docker.io/tripleou/openstack-aodh-api:current-tripleo imagename: docker.io/tripleou/openstack-aodh-evaluator:current-tripleo imagename: docker.io/tripleou/openstack-aodh-listener:current-tripleo imagename: docker.io/tripleou/openstack-aodh-notifier:current-tripleo imagename: docker.io/tripleou/openstack-barbican-base:current-tripleo imagename: docker.io/tripleou/openstack-barbican-api:current-tripleo imagename: docker.io/tripleou/openstack-barbican-keystone-listener:current-tripleo imagename: docker.io/tripleou/openstack-barbican-worker:current-tripleo imagename: docker.io/tripleou/openstack-ceilometer-base:current-tripleo imagename: docker.io/tripleou/openstack-ceilometer-ipmi:current-tripleo imagename: docker.io/tripleou/openstack-ceilometer-central:current-tripleo imagename: docker.io/tripleou/openstack-ceilometer-compute:current-tripleo imagename: docker.io/tripleou/openstack-ceilometer-notification:current-tripleo imagename: docker.io/tripleou/openstack-cinder-base:current-tripleo imagename: docker.io/tripleou/openstack-cinder-api:current-tripleo imagename: docker.io/tripleou/openstack-cinder-backup:current-tripleo imagename: docker.io/tripleou/openstack-cinder-scheduler:current-tripleo imagename: docker.io/tripleou/openstack-cinder-volume:current-tripleo imagename: docker.io/tripleou/openstack-collectd:current-tripleo imagename: docker.io/tripleou/openstack-cron:current-tripleo imagename: docker.io/tripleou/openstack-designate-base:current-tripleo imagename: docker.io/tripleou/openstack-designate-backend-bind9:current-tripleo imagename: docker.io/tripleou/openstack-designate-api:current-tripleo imagename: docker.io/tripleou/openstack-designate-central:current-tripleo imagename: docker.io/tripleou/openstack-designate-mdns:current-tripleo imagename: docker.io/tripleou/openstack-designate-producer:current-tripleo imagename: docker.io/tripleou/openstack-designate-base:current-tripleo imagename: docker.io/tripleou/openstack-designate-sink:current-tripleo imagename: docker.io/tripleou/openstack-designate-worker:current-tripleo imagename: docker.io/tripleou/openstack-etcd:current-tripleo imagename: docker.io/tripleou/openstack-glance-api:current-tripleo imagename: docker.io/tripleou/openstack-gnocchi-base:current-tripleo imagename: docker.io/tripleou/openstack-gnocchi-api:current-tripleo imagename: docker.io/tripleou/openstack-gnocchi-metricd:current-tripleo imagename: docker.io/tripleou/openstack-gnocchi-statsd:current-tripleo imagename: docker.io/tripleou/openstack-haproxy:current-tripleo imagename: docker.io/tripleou/openstack-heat-base:current-tripleo imagename: docker.io/tripleou/openstack-heat-api:current-tripleo imagename: docker.io/tripleou/openstack-heat-api-cfn:current-tripleo imagename: docker.io/tripleou/openstack-heat-engine:current-tripleo imagename: docker.io/tripleou/openstack-heat-all:current-tripleo imagename: docker.io/tripleou/openstack-horizon:current-tripleo imagename: docker.io/tripleou/openstack-ironic-base:current-tripleo imagename: docker.io/tripleou/openstack-ironic-api:current-tripleo imagename: docker.io/tripleou/openstack-ironic-conductor:current-tripleo imagename: docker.io/tripleou/openstack-ironic-inspector:current-tripleo imagename: docker.io/tripleou/openstack-ironic-neutron-agent:current-tripleo imagename: docker.io/tripleou/openstack-ironic-pxe:current-tripleo imagename: docker.io/tripleou/openstack-iscsid:current-tripleo imagename: docker.io/tripleou/openstack-keepalived:current-tripleo imagename: docker.io/tripleou/openstack-keystone:current-tripleo imagename: docker.io/tripleou/openstack-manila-base:current-tripleo imagename: docker.io/tripleou/openstack-manila-api:current-tripleo imagename: docker.io/tripleou/openstack-manila-scheduler:current-tripleo imagename: docker.io/tripleou/openstack-manila-share:current-tripleo imagename: docker.io/tripleou/openstack-mariadb:current-tripleo imagename: docker.io/tripleou/openstack-memcached:current-tripleo imagename: docker.io/tripleou/openstack-mistral-base:current-tripleo imagename: docker.io/tripleou/openstack-mistral-api:current-tripleo imagename: docker.io/tripleou/openstack-mistral-engine:current-tripleo imagename: docker.io/tripleou/openstack-mistral-event-engine:current-tripleo imagename: docker.io/tripleou/openstack-mistral-executor:current-tripleo imagename: docker.io/tripleou/openstack-multipathd:current-tripleo imagename: docker.io/tripleou/openstack-neutron-base:current-tripleo imagename: docker.io/tripleou/openstack-neutron-agent-base:current-tripleo imagename: docker.io/tripleou/openstack-neutron-dhcp-agent:current-tripleo imagename: docker.io/tripleou/openstack-neutron-l3-agent:current-tripleo imagename: docker.io/tripleou/openstack-neutron-metadata-agent-ovn:current-tripleo imagename: docker.io/tripleou/openstack-neutron-metadata-agent:current-tripleo imagename: docker.io/tripleou/openstack-neutron-openvswitch-agent:current-tripleo imagename: docker.io/tripleou/openstack-neutron-server:current-tripleo imagename: docker.io/tripleou/openstack-neutron-server-ovn:current-tripleo imagename: docker.io/tripleou/openstack-neutron-sriov-agent:current-tripleo imagename: docker.io/tripleou/openstack-nova-base:current-tripleo imagename: docker.io/tripleou/openstack-nova-libvirt:current-tripleo imagename: docker.io/tripleou/openstack-nova-api:current-tripleo imagename: docker.io/tripleou/openstack-nova-compute:current-tripleo imagename: docker.io/tripleou/openstack-nova-compute-ironic:current-tripleo imagename: docker.io/tripleou/openstack-nova-conductor:current-tripleo imagename: docker.io/tripleou/openstack-nova-novncproxy:current-tripleo imagename: docker.io/tripleou/openstack-nova-scheduler:current-tripleo imagename: docker.io/tripleou/openstack-novajoin-base:current-tripleo imagename: docker.io/tripleou/openstack-novajoin-notifier:current-tripleo imagename: docker.io/tripleou/openstack-novajoin-server:current-tripleo imagename: docker.io/tripleou/openstack-octavia-base:current-tripleo imagename: docker.io/tripleou/openstack-octavia-api:current-tripleo imagename: docker.io/tripleou/openstack-octavia-health-manager:current-tripleo imagename: docker.io/tripleou/openstack-octavia-housekeeping:current-tripleo imagename: docker.io/tripleou/openstack-octavia-worker:current-tripleo imagename: docker.io/tripleou/openstack-ovn-base:current-tripleo imagename: docker.io/tripleou/openstack-ovn-controller:current-tripleo imagename: docker.io/tripleou/openstack-ovn-northd:current-tripleo imagename: docker.io/tripleou/openstack-ovn-nb-db-server:current-tripleo imagename: docker.io/tripleou/openstack-ovn-sb-db-server:current-tripleo imagename: docker.io/tripleou/openstack-placement-api:current-tripleo imagename: docker.io/tripleou/openstack-qdrouterd:current-tripleo imagename: docker.io/tripleou/openstack-rabbitmq:current-tripleo imagename: docker.io/tripleou/openstack-redis:current-tripleo imagename: docker.io/tripleou/openstack-rsyslog:current-tripleo imagename: docker.io/tripleou/openstack-swift-base:current-tripleo imagename: docker.io/tripleou/openstack-swift-account:current-tripleo imagename: docker.io/tripleou/openstack-swift-container:current-tripleo imagename: docker.io/tripleou/openstack-swift-object:current-tripleo imagename: docker.io/tripleou/openstack-swift-proxy-server:current-tripleo imagename: docker.io/tripleou/openstack-tempest:current-tripleo imagename: docker.io/tripleou/openstack-tripleoclient:current-tripleo imagename: docker.io/tripleoussuri/openstack-zaqar-wsgi:current-tripleo - imagename: docker.io/ceph/daemon:v4.0.12-stable-4.0-nautilus-centos-7-x86_64, imagename: quay.io/tripleotrain/openstack-base:current-tripleo imagename: quay.io/tripleotrain/openstack-os:current-tripleo imagename: quay.io/tripleotrain/openstack-aodh-base:current-tripleo imagename: quay.io/tripleotrain/openstack-aodh-api:current-tripleo imagename: quay.io/tripleotrain/openstack-aodh-evaluator:current-tripleo imagename: quay.io/tripleotrain/openstack-aodh-listener:current-tripleo imagename: quay.io/tripleotrain/openstack-aodh-notifier:current-tripleo imagename: quay.io/tripleotrain/openstack-barbican-base:current-tripleo imagename: quay.io/tripleotrain/openstack-barbican-api:current-tripleo imagename: quay.io/tripleotrain/openstack-barbican-keystone-listener:current-tripleo imagename: quay.io/tripleotrain/openstack-barbican-worker:current-tripleo imagename: quay.io/tripleotrain/openstack-ceilometer-base:current-tripleo imagename: quay.io/tripleotrain/openstack-ceilometer-ipmi:current-tripleo imagename: quay.io/tripleotrain/openstack-ceilometer-central:current-tripleo imagename: quay.io/tripleotrain/openstack-ceilometer-compute:current-tripleo imagename: quay.io/tripleotrain/openstack-ceilometer-notification:current-tripleo imagename: quay.io/tripleotrain/openstack-cinder-base:current-tripleo imagename: quay.io/tripleotrain/openstack-cinder-api:current-tripleo imagename: quay.io/tripleotrain/openstack-cinder-backup:current-tripleo imagename: quay.io/tripleotrain/openstack-cinder-scheduler:current-tripleo imagename: quay.io/tripleotrain/openstack-cinder-volume:current-tripleo imagename: quay.io/tripleotrain/openstack-collectd:current-tripleo imagename: quay.io/tripleotrain/openstack-cron:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-base:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-backend-bind9:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-api:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-central:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-mdns:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-producer:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-base:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-sink:current-tripleo imagename: quay.io/tripleotrain/openstack-designate-worker:current-tripleo imagename: quay.io/tripleotrain/openstack-etcd:current-tripleo imagename: quay.io/tripleotrain/openstack-glance-api:current-tripleo imagename: quay.io/tripleotrain/openstack-gnocchi-base:current-tripleo imagename: quay.io/tripleotrain/openstack-gnocchi-api:current-tripleo imagename: quay.io/tripleotrain/openstack-gnocchi-metricd:current-tripleo imagename: quay.io/tripleotrain/openstack-gnocchi-statsd:current-tripleo imagename: quay.io/tripleotrain/openstack-haproxy:current-tripleo imagename: quay.io/tripleotrain/openstack-heat-base:current-tripleo imagename: quay.io/tripleotrain/openstack-heat-api:current-tripleo imagename: quay.io/tripleotrain/openstack-heat-api-cfn:current-tripleo imagename: quay.io/tripleotrain/openstack-heat-engine:current-tripleo imagename: quay.io/tripleotrain/openstack-heat-all:current-tripleo imagename: quay.io/tripleotrain/openstack-horizon:current-tripleo imagename: quay.io/tripleotrain/openstack-ironic-base:current-tripleo imagename: quay.io/tripleotrain/openstack-ironic-api:current-tripleo imagename: quay.io/tripleotrain/openstack-ironic-conductor:current-tripleo imagename: quay.io/tripleotrain/openstack-ironic-inspector:current-tripleo imagename: quay.io/tripleotrain/openstack-ironic-neutron-agent:current-tripleo imagename: quay.io/tripleotrain/openstack-ironic-pxe:current-tripleo imagename: quay.io/tripleotrain/openstack-iscsid:current-tripleo imagename: quay.io/tripleotrain/openstack-keepalived:current-tripleo imagename: quay.io/tripleotrain/openstack-keystone:current-tripleo imagename: quay.io/tripleotrain/openstack-manila-base:current-tripleo imagename: quay.io/tripleotrain/openstack-manila-api:current-tripleo imagename: quay.io/tripleotrain/openstack-manila-scheduler:current-tripleo imagename: quay.io/tripleotrain/openstack-manila-share:current-tripleo imagename: quay.io/tripleotrain/openstack-mariadb:current-tripleo imagename: quay.io/tripleotrain/openstack-memcached:current-tripleo imagename: quay.io/tripleotrain/openstack-mistral-base:current-tripleo imagename: quay.io/tripleotrain/openstack-mistral-api:current-tripleo imagename: quay.io/tripleotrain/openstack-mistral-engine:current-tripleo imagename: quay.io/tripleotrain/openstack-mistral-event-engine:current-tripleo imagename: quay.io/tripleotrain/openstack-mistral-executor:current-tripleo imagename: quay.io/tripleotrain/openstack-multipathd:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-base:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-agent-base:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-dhcp-agent:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-l3-agent:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-metadata-agent-ovn:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-metadata-agent:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-openvswitch-agent:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-server:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-server-ovn:current-tripleo imagename: quay.io/tripleotrain/openstack-neutron-sriov-agent:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-base:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-libvirt:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-api:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-compute:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-compute-ironic:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-conductor:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-novncproxy:current-tripleo imagename: quay.io/tripleotrain/openstack-nova-scheduler:current-tripleo imagename: quay.io/tripleotrain/openstack-novajoin-base:current-tripleo imagename: quay.io/tripleotrain/openstack-novajoin-notifier:current-tripleo imagename: quay.io/tripleotrain/openstack-novajoin-server:current-tripleo imagename: quay.io/tripleotrain/openstack-octavia-base:current-tripleo imagename: quay.io/tripleotrain/openstack-octavia-api:current-tripleo imagename: quay.io/tripleotrain/openstack-octavia-health-manager:current-tripleo imagename: quay.io/tripleotrain/openstack-octavia-housekeeping:current-tripleo imagename: quay.io/tripleotrain/openstack-octavia-worker:current-tripleo imagename: quay.io/tripleotrain/openstack-ovn-base:current-tripleo imagename: quay.io/tripleotrain/openstack-ovn-controller:current-tripleo imagename: quay.io/tripleotrain/openstack-ovn-northd:current-tripleo imagename: quay.io/tripleotrain/openstack-ovn-nb-db-server:current-tripleo imagename: quay.io/tripleotrain/openstack-ovn-sb-db-server:current-tripleo imagename: quay.io/tripleotrain/openstack-placement-api:current-tripleo imagename: quay.io/tripleotrain/openstack-qdrouterd:current-tripleo imagename: quay.io/tripleotrain/openstack-rabbitmq:current-tripleo imagename: quay.io/tripleotrain/openstack-redis:current-tripleo imagename: quay.io/tripleotrain/openstack-rsyslog:current-tripleo imagename: quay.io/tripleotrain/openstack-swift-base:current-tripleo imagename: quay.io/tripleotrain/openstack-swift-account:current-tripleo imagename: quay.io/tripleotrain/openstack-swift-container:current-tripleo imagename: quay.io/tripleotrain/openstack-swift-object:current-tripleo imagename: quay.io/tripleotrain/openstack-swift-proxy-server:current-tripleo imagename: quay.io/tripleotrain/openstack-tempest:current-tripleo imagename: quay.io/tripleotrain/openstack-tripleoclient:current-tripleo imagename: quay.io/tripleotrain/openstack-zaqar-wsgi:current-tripleo - imagename: docker.io/ceph/daemon:v4.0.10-stable-4.0-nautilus-centos-7-x86_64,111,111
openstack%2Ftripleo-heat-templates~stable%2Fqueens~I5f0cedb808c6371caee6918da5b8bef743971221,openstack/tripleo-heat-templates,stable/queens,I5f0cedb808c6371caee6918da5b8bef743971221,[queens-only] Unmount cinder NFS shares during upgrade,MERGED,2020-07-20 13:32:00.000000000,2020-07-22 10:32:27.000000000,2020-07-22 10:32:27.000000000,"[{'_account_id': 3153}, {'_account_id': 9592}, {'_account_id': 14985}, {'_account_id': 21129}, {'_account_id': 22348}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-07-20 13:32:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/faafd195ffd4df444cca0eb5ee5fb8ea41788d98', 'message': ""[queens-only] Unmount cinder NFS shares during upgrade\n\nUnmount any cinder NFS shares on the host when upgrading cinder from\nrunning on the host to running in a kolla container. This ensures\nthere are no active NFS mounts in cinder's service directory prior to\nlaunching the container. Kolla recusively changes the ownership of\n/var/lib/cinder, so removing the mounts prevents kolla from inadvertently\nchanging the ownership of files on the NFS storage backends.\n\nCloses-Bug: #1887435\nChange-Id: I5f0cedb808c6371caee6918da5b8bef743971221\n""}, {'number': 2, 'created': '2020-07-20 20:00:18.000000000', 'files': ['docker/services/cinder-volume.yaml', 'docker/services/pacemaker/cinder-volume.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6df5268155f20dcd283200d050d5d44a2136d42b', 'message': ""[queens-only] Unmount cinder NFS shares during upgrade\n\nUnmount any cinder NFS shares on the host when upgrading cinder from\nrunning on the host to running in a kolla container. This ensures\nthere are no active NFS mounts in cinder's service directory prior to\nlaunching the container. Kolla recusively changes the ownership of\n/var/lib/cinder, so removing the mounts prevents kolla from inadvertently\nchanging the ownership of files on the NFS storage backends.\n\nCloses-Bug: #1887435\nChange-Id: I5f0cedb808c6371caee6918da5b8bef743971221\n""}]",7,741940,6df5268155f20dcd283200d050d5d44a2136d42b,22,6,2,21129,,,0,"[queens-only] Unmount cinder NFS shares during upgrade

Unmount any cinder NFS shares on the host when upgrading cinder from
running on the host to running in a kolla container. This ensures
there are no active NFS mounts in cinder's service directory prior to
launching the container. Kolla recusively changes the ownership of
/var/lib/cinder, so removing the mounts prevents kolla from inadvertently
changing the ownership of files on the NFS storage backends.

Closes-Bug: #1887435
Change-Id: I5f0cedb808c6371caee6918da5b8bef743971221
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/40/741940/2 && git format-patch -1 --stdout FETCH_HEAD,"['docker/services/cinder-volume.yaml', 'docker/services/pacemaker/cinder-volume.yaml']",2,faafd195ffd4df444cca0eb5ee5fb8ea41788d98,bug/1887435," - name: Unmount cinder NFS shares mounted on the host mount: path: ""{{ item.mount }}"" state: unmounted with_items: ""{{ ansible_mounts }}"" when: - ""'/var/lib/cinder/' in item.mount"" - ""'nfs' in item.fstype"" - name: Unmount cinder NFS shares mounted on the host mount: path: ""{{ item.mount }}"" state: unmounted with_items: ""{{ ansible_mounts }}"" when: - step|int == 2 - release == 'ocata' - ""'/var/lib/cinder/' in item.mount"" - ""'nfs' in item.fstype""",,38,3
openstack%2Ftripleo-heat-templates~stable%2Fussuri~Ifaddeccfbb82e03815311ee0b76eb2e2eae282a7,openstack/tripleo-heat-templates,stable/ussuri,Ifaddeccfbb82e03815311ee0b76eb2e2eae282a7,Use tripleo linear when not using tripleo free,MERGED,2020-07-17 14:03:07.000000000,2020-07-22 10:32:24.000000000,2020-07-22 10:32:24.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-17 14:03:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/286cb52ce8416f72d48848845cbe0ef1390e998c', 'message': ""Use tripleo linear when not using tripleo free\n\nIn order to handle percentage failures for tripleo classes we will need\nto use a custom strategy to handle the failures. Let's explicitly define\nour expected strategies in the playbook so it'll default to linear (the\nansible default) on the host when ansible is invoked but our deployment\ntasks will be run as we want them.\n\nDepends-On: https://review.opendev.org/#/c/724766/\nChange-Id: Ifaddeccfbb82e03815311ee0b76eb2e2eae282a7\n(cherry picked from commit 029722ef1f828f8f97675e75acfaad581dcf1b01)\n""}, {'number': 2, 'created': '2020-07-22 02:22:46.000000000', 'files': ['common/deploy-steps-playbooks-common.yaml', 'common/deploy-steps.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/afc7e2c28afe8d23657727b9c2b8e798d0abd133', 'message': ""Use tripleo linear when not using tripleo free\n\nIn order to handle percentage failures for tripleo classes we will need\nto use a custom strategy to handle the failures. Let's explicitly define\nour expected strategies in the playbook so it'll default to linear (the\nansible default) on the host when ansible is invoked but our deployment\ntasks will be run as we want them.\n\nDepends-On: https://review.opendev.org/#/c/724766/\nChange-Id: Ifaddeccfbb82e03815311ee0b76eb2e2eae282a7\n(cherry picked from commit 029722ef1f828f8f97675e75acfaad581dcf1b01)\n""}]",0,741646,afc7e2c28afe8d23657727b9c2b8e798d0abd133,27,4,2,3153,,,0,"Use tripleo linear when not using tripleo free

In order to handle percentage failures for tripleo classes we will need
to use a custom strategy to handle the failures. Let's explicitly define
our expected strategies in the playbook so it'll default to linear (the
ansible default) on the host when ansible is invoked but our deployment
tasks will be run as we want them.

Depends-On: https://review.opendev.org/#/c/724766/
Change-Id: Ifaddeccfbb82e03815311ee0b76eb2e2eae282a7
(cherry picked from commit 029722ef1f828f8f97675e75acfaad581dcf1b01)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/46/741646/2 && git format-patch -1 --stdout FETCH_HEAD,"['common/deploy-steps-playbooks-common.yaml', 'common/deploy-steps.j2']",2,286cb52ce8416f72d48848845cbe0ef1390e998c,linear/ussuri, strategy: tripleo_linear strategy: tripleo_linear strategy: tripleo_linear strategy: tripleo_linear,,5,0
openstack%2Fpuppet-tripleo~stable%2Fstein~I4c60a73e4b88f71dfdf2f52071f7cee0aae94cca,openstack/puppet-tripleo,stable/stein,I4c60a73e4b88f71dfdf2f52071f7cee0aae94cca,Update Gemfile for stable/stein,MERGED,2020-07-17 02:51:10.000000000,2020-07-22 10:32:23.000000000,2020-07-22 10:32:23.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-17 02:51:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/41cb66fc9084b04573e1838dacf0512e3e133217', 'message': '[Stein only] Use openstack_spec_helper stable/stein\n\nChange-Id: I4c60a73e4b88f71dfdf2f52071f7cee0aae94cca\n'}, {'number': 2, 'created': '2020-07-17 02:53:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/78f3d6a1b0641fcbaee386ddae7b36075bb32fa4', 'message': 'Update Gemfile for stable/stein\n\nChange-Id: I4c60a73e4b88f71dfdf2f52071f7cee0aae94cca\n'}, {'number': 3, 'created': '2020-07-18 03:31:41.000000000', 'files': ['Gemfile'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/aa3acb3514007e73df4579bd3e31d97e6f67db41', 'message': 'Update Gemfile for stable/stein\n\nChange-Id: I4c60a73e4b88f71dfdf2f52071f7cee0aae94cca\n'}]",0,741573,aa3acb3514007e73df4579bd3e31d97e6f67db41,13,5,3,9816,,,0,"Update Gemfile for stable/stein

Change-Id: I4c60a73e4b88f71dfdf2f52071f7cee0aae94cca
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/73/741573/1 && git format-patch -1 --stdout FETCH_HEAD,['Gemfile'],1,41cb66fc9084b04573e1838dacf0512e3e133217,gemfile-stein," :ref => 'stable/steain',",,1,0
openstack%2Ftripleo-heat-templates~stable%2Fussuri~Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529,openstack/tripleo-heat-templates,stable/ussuri,Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529,Remove /run from some services,MERGED,2020-07-20 18:55:33.000000000,2020-07-22 10:32:21.000000000,2020-07-22 10:32:21.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 20172}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-20 18:55:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/72fdd50b87eafd90dff800646c492aaff79948fd', 'message': 'Remove /run from some services\n\nredis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind\nmounted from the host.  As a matter of fact bind-mounting /run is\nproblematic due to a number of reasons (see LP#1883849 for more\nbackground). In particular swift-proxy is the only swift container\n(out of 9) that has /run bind-mounted.\n\nThese three services always had /run from the very beginning:\n- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f\n- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456\n- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94\n\nTested this by applying this patch on a train deployment and\ndeployed an undercloud and an overcloud with it.\nVerified that:\nA) /run:/run is not present in the three containers\nB) Deploy of UC and OC worked correctly\nC) Tempest still works\nD) Restarting the swift_proxy and nova_scheduler works correctly\nE) Reboot the overcloud worked okay and tempest still works after the\n   full overcloud reboot\nF) Ran a minor UC update\nG) Ran a minor update on all nodes and tempest still worked\nH) Ran a redeploy on all nodes and tempest still worked\n\nNB: I did not investigate other containers that bind mount /run\nbecause they 1) seem to need it and 2) had no means to do proper\ntesting.\n\nNB2: Note that while once we rebuild containers with\nI81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not\nstrictly needed for the LP bug, but is a nice cleanup nonetheless.\nSo this is to be backported only if rebuilding containers is\na problematic/costly move\n\nChange-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529\nRelated-Bug: #1883849\n(cherry picked from commit bd4b57c2690e7e341691bcf4e3aa15af36978936)\n'}, {'number': 2, 'created': '2020-07-21 06:49:58.000000000', 'files': ['deployment/database/redis-container-puppet.yaml', 'deployment/swift/swift-proxy-container-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/6358fd4a1aa47971363fa25949cb1b85ab8090d7', 'message': 'Remove /run from some services\n\nredis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind\nmounted from the host.  As a matter of fact bind-mounting /run is\nproblematic due to a number of reasons (see LP#1883849 for more\nbackground). In particular swift-proxy is the only swift container\n(out of 9) that has /run bind-mounted.\n\nThese three services always had /run from the very beginning:\n- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f\n- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456\n- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94\n\nTested this by applying this patch on a train deployment and\ndeployed an undercloud and an overcloud with it.\nVerified that:\nA) /run:/run is not present in the three containers\nB) Deploy of UC and OC worked correctly\nC) Tempest still works\nD) Restarting the swift_proxy and nova_scheduler works correctly\nE) Reboot the overcloud worked okay and tempest still works after the\n   full overcloud reboot\nF) Ran a minor UC update\nG) Ran a minor update on all nodes and tempest still worked\nH) Ran a redeploy on all nodes and tempest still worked\n\nNB: I did not investigate other containers that bind mount /run\nbecause they 1) seem to need it and 2) had no means to do proper\ntesting.\n\nNB2: Note that while once we rebuild containers with\nI81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not\nstrictly needed for the LP bug, but is a nice cleanup nonetheless.\nSo this is to be backported only if rebuilding containers is\na problematic/costly move\n\nChange-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529\nRelated-Bug: #1883849\n(cherry picked from commit bd4b57c2690e7e341691bcf4e3aa15af36978936)\n'}]",0,742009,6358fd4a1aa47971363fa25949cb1b85ab8090d7,17,6,2,20172,,,0,"Remove /run from some services

redis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind
mounted from the host.  As a matter of fact bind-mounting /run is
problematic due to a number of reasons (see LP#1883849 for more
background). In particular swift-proxy is the only swift container
(out of 9) that has /run bind-mounted.

These three services always had /run from the very beginning:
- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f
- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456
- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94

Tested this by applying this patch on a train deployment and
deployed an undercloud and an overcloud with it.
Verified that:
A) /run:/run is not present in the three containers
B) Deploy of UC and OC worked correctly
C) Tempest still works
D) Restarting the swift_proxy and nova_scheduler works correctly
E) Reboot the overcloud worked okay and tempest still works after the
   full overcloud reboot
F) Ran a minor UC update
G) Ran a minor update on all nodes and tempest still worked
H) Ran a redeploy on all nodes and tempest still worked

NB: I did not investigate other containers that bind mount /run
because they 1) seem to need it and 2) had no means to do proper
testing.

NB2: Note that while once we rebuild containers with
I81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not
strictly needed for the LP bug, but is a nice cleanup nonetheless.
So this is to be backported only if rebuilding containers is
a problematic/costly move

Change-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529
Related-Bug: #1883849
(cherry picked from commit bd4b57c2690e7e341691bcf4e3aa15af36978936)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/09/742009/2 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/redis-container-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml', 'deployment/swift/swift-proxy-container-puppet.yaml']",3,72fdd50b87eafd90dff800646c492aaff79948fd,prune-run-stable/ussuri,, - /run:/run,0,3
openstack%2Fmanila~stable%2Fstein~Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,openstack/manila,stable/stein,Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,Update NFS helper restart,MERGED,2020-07-21 21:18:05.000000000,2020-07-22 10:29:01.000000000,2020-07-22 01:58:13.000000000,"[{'_account_id': 9003}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 25243}]","[{'number': 1, 'created': '2020-07-21 21:18:05.000000000', 'files': ['manila/share/drivers/helpers.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/a2f21e25e8796311f395a1e83bac3e3a5769c038', 'message': 'Update NFS helper restart\n\nBecause ``service`` commands are deprecated in favor of\n``systemctl` commands, the check to see if the service\ncommand succeeds in the NFS helper used by e.g. the\nlvm and generic back ends fails.  The string sought to\nindicate an error is never present.\n\nUpdate the helper to use ``systemctl`` commands instead\nand error check for them correctly.\n\nCloses-bug: #1887695\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n(cherry picked from commit 391ec7dffa701f54843b3aafdc6d2f8b4dfe0504)\n(cherry picked from commit eb0de241b395fdc309d3b13b1adac464316f3f10)\n(cherry picked from commit 0a3125439627da84bddfdf075b833f998f1935a7)\n'}]",0,742286,a2f21e25e8796311f395a1e83bac3e3a5769c038,12,4,1,9003,,,0,"Update NFS helper restart

Because ``service`` commands are deprecated in favor of
``systemctl` commands, the check to see if the service
command succeeds in the NFS helper used by e.g. the
lvm and generic back ends fails.  The string sought to
indicate an error is never present.

Update the helper to use ``systemctl`` commands instead
and error check for them correctly.

Closes-bug: #1887695
Change-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f
(cherry picked from commit 391ec7dffa701f54843b3aafdc6d2f8b4dfe0504)
(cherry picked from commit eb0de241b395fdc309d3b13b1adac464316f3f10)
(cherry picked from commit 0a3125439627da84bddfdf075b833f998f1935a7)
",git fetch https://review.opendev.org/openstack/manila refs/changes/86/742286/1 && git format-patch -1 --stdout FETCH_HEAD,['manila/share/drivers/helpers.py'],1,a2f21e25e8796311f395a1e83bac3e3a5769c038,bug/1887695," server, ['sudo', 'systemctl', 'is-active', 'nfs-kernel-server'], if ""inactive"" in out: server, ['sudo', 'systemctl', 'restart', 'nfs-kernel-server'])"," server, ['sudo', 'service', 'nfs-kernel-server', 'status'], if ""not"" in out: server, ['sudo', 'service', 'nfs-kernel-server', 'restart'])",4,3
openstack%2Fansible-hardening~stable%2Ftrain~I21bcbde8acc8d4fd83b28026bcec33f388e69912,openstack/ansible-hardening,stable/train,I21bcbde8acc8d4fd83b28026bcec33f388e69912,Enable syncing of docs,MERGED,2020-06-04 12:09:52.000000000,2020-07-22 10:23:08.000000000,2020-07-22 10:21:24.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 29865}]","[{'number': 1, 'created': '2020-06-04 12:09:52.000000000', 'files': ['test-requirements.txt', 'doc/requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/ansible-hardening/commit/5ce44f19feef05282f11eef11780250f4aa31940', 'message': 'Enable syncing of docs\n\nThe docs job is failing in https://review.opendev.org/671840 and thus\nnothing is synced in from openstack-ansible-tests. The failure is due to\nthe removal of entries from doc/requirements.txt. Add those\nto test-requirements.txt instead.\n\nChange-Id: I21bcbde8acc8d4fd83b28026bcec33f388e69912\n(cherry picked from commit 1fa67fd90d7c3ed63c502f99545a1216da3c1b06)\n'}]",0,733572,5ce44f19feef05282f11eef11780250f4aa31940,10,3,1,6547,,,0,"Enable syncing of docs

The docs job is failing in https://review.opendev.org/671840 and thus
nothing is synced in from openstack-ansible-tests. The failure is due to
the removal of entries from doc/requirements.txt. Add those
to test-requirements.txt instead.

Change-Id: I21bcbde8acc8d4fd83b28026bcec33f388e69912
(cherry picked from commit 1fa67fd90d7c3ed63c502f99545a1216da3c1b06)
",git fetch https://review.opendev.org/openstack/ansible-hardening refs/changes/72/733572/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'doc/requirements.txt', 'tox.ini']",3,5ce44f19feef05282f11eef11780250f4aa31940,train/backport/733391,deps = -r{toxinidir}/doc/requirements.txt -r{toxinidir}/test-requirements.txt,deps = -r{toxinidir}/doc/requirements.txt,9,3
openstack%2Freleases~master~Ic0a889be831a4741d91ef91b478cfee3e41d57ba,openstack/releases,master,Ic0a889be831a4741d91ef91b478cfee3e41d57ba,Remove abandoned deliverables,MERGED,2020-07-21 14:05:55.000000000,2020-07-22 10:20:55.000000000,2020-07-22 10:20:55.000000000,"[{'_account_id': 3153}, {'_account_id': 9592}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-21 14:05:55.000000000', 'files': ['deliverables/_independent/tripleo-repos.yaml', 'deliverables/victoria/mox3.yaml', 'deliverables/victoria/puppet-congress.yaml', 'deliverables/victoria/paunch.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/88336a493f8e60b3fbdebf29b6053867a52ab357', 'message': ""Remove abandoned deliverables\n\nFollowing the victoria-2 consistency check, remove victoria\ndeliverable files for a number of recently-abandoned repositories:\n\n- paunch (marked deprecated in victoria, Jun 10)\n- puppet-congress (retired on Jun 21)\n- mox3 (retired on Jun 18)\n\nAdditionally, mark tripleo-repos (marked release-management:none)\nas abandoned since it's cycle-independent.\n\nNote that mox3 had a victoria release before being retired.\n\nChange-Id: Ic0a889be831a4741d91ef91b478cfee3e41d57ba\n""}]",0,742200,88336a493f8e60b3fbdebf29b6053867a52ab357,7,5,1,308,,,0,"Remove abandoned deliverables

Following the victoria-2 consistency check, remove victoria
deliverable files for a number of recently-abandoned repositories:

- paunch (marked deprecated in victoria, Jun 10)
- puppet-congress (retired on Jun 21)
- mox3 (retired on Jun 18)

Additionally, mark tripleo-repos (marked release-management:none)
as abandoned since it's cycle-independent.

Note that mox3 had a victoria release before being retired.

Change-Id: Ic0a889be831a4741d91ef91b478cfee3e41d57ba
",git fetch https://review.opendev.org/openstack/releases refs/changes/00/742200/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/_independent/tripleo-repos.yaml', 'deliverables/victoria/mox3.yaml', 'deliverables/victoria/puppet-congress.yaml', 'deliverables/victoria/paunch.yaml']",4,88336a493f8e60b3fbdebf29b6053867a52ab357,clean-abandoned-deliverables,,--- launchpad: paunch release-model: cycle-with-intermediary release-type: python-pypi team: tripleo type: trailing repository-settings: openstack/paunch: {} ,1,28
openstack%2Fos-brick~master~Ib9914405474aa4006f689ad8fba90761b2f73e39,openstack/os-brick,master,Ib9914405474aa4006f689ad8fba90761b2f73e39,rbd: Warn if ceph udev rules are not configured,ABANDONED,2020-07-22 10:15:44.000000000,2020-07-22 10:19:01.000000000,,[],"[{'number': 1, 'created': '2020-07-22 10:15:44.000000000', 'files': ['os_brick/initiator/connectors/rbd.py'], 'web_link': 'https://opendev.org/openstack/os-brick/commit/60acce5feca194ae4619245fedec12987b147dca', 'message': 'rbd: Warn if ceph udev rules are not configured\n\nThe LUKS encryptor feature expects devices to have a symbolic link that\nit can overwrite in order to enable transparent encryption/decryption\nfor instances [1]. This is generally the case for RBD volumes, as Ceph\nuses udev rules [2] to create a \'/dev/rbd/{pool}/{device}\' ->\n\'/dev/rbdN\' symlink. However, in an environment where udev daemon is not\npresent or configured correctly, this symlink will never be configured.\nThis causes things to crash and burn in a rather non-obvious manner when\nlocally attaching an encrypted RBD volume:\n\n  oslo_concurrency.processutils.ProcessExecutionError: Unexpected error while running command.\n  Command: cryptsetup luksOpen --key-file=- /dev/rbd/volumes/volume-foo crypt-volume-foo\n  Exit code: 4\n  Stdout: \'\'\n  Stderr: ""Device /dev/rbd/volumes/foo doesn\'t exist or access denied.\\n""\n\n(\'foo\' being a stand-in for a very long \'device-$UUID\' name)\n\nThe long term fix here is to probably stop relying on the side effects\nof these udev rules, i.e. the symlinks, but that is a far more involved\nfix that would not be backportable. Instead, for now we simply leave a\nbreadcrumb for the user, informing them as to what\'s gone wrong and\nencouraging them to look at the bug report for more information.\n\n[1] https://github.com/openstack/os-brick/blob/3.1.0/os_brick/encryptors/luks.py#L191-L195\n[2] https://github.com/ceph/ceph/blob/v14.0.0/udev/50-rbd.rules\n\nChange-Id: Ib9914405474aa4006f689ad8fba90761b2f73e39\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nRelated-Bug: #1884114\n'}]",0,742383,60acce5feca194ae4619245fedec12987b147dca,2,0,1,15334,,,0,"rbd: Warn if ceph udev rules are not configured

The LUKS encryptor feature expects devices to have a symbolic link that
it can overwrite in order to enable transparent encryption/decryption
for instances [1]. This is generally the case for RBD volumes, as Ceph
uses udev rules [2] to create a '/dev/rbd/{pool}/{device}' ->
'/dev/rbdN' symlink. However, in an environment where udev daemon is not
present or configured correctly, this symlink will never be configured.
This causes things to crash and burn in a rather non-obvious manner when
locally attaching an encrypted RBD volume:

  oslo_concurrency.processutils.ProcessExecutionError: Unexpected error while running command.
  Command: cryptsetup luksOpen --key-file=- /dev/rbd/volumes/volume-foo crypt-volume-foo
  Exit code: 4
  Stdout: ''
  Stderr: ""Device /dev/rbd/volumes/foo doesn't exist or access denied.\n""

('foo' being a stand-in for a very long 'device-$UUID' name)

The long term fix here is to probably stop relying on the side effects
of these udev rules, i.e. the symlinks, but that is a far more involved
fix that would not be backportable. Instead, for now we simply leave a
breadcrumb for the user, informing them as to what's gone wrong and
encouraging them to look at the bug report for more information.

[1] https://github.com/openstack/os-brick/blob/3.1.0/os_brick/encryptors/luks.py#L191-L195
[2] https://github.com/ceph/ceph/blob/v14.0.0/udev/50-rbd.rules

Change-Id: Ib9914405474aa4006f689ad8fba90761b2f73e39
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Related-Bug: #1884114
",git fetch https://review.opendev.org/openstack/os-brick refs/changes/83/742383/1 && git format-patch -1 --stdout FETCH_HEAD,['os_brick/initiator/connectors/rbd.py'],1,60acce5feca194ae4619245fedec12987b147dca,bug/1884114," # Sanity check if device is mounted root_device = self._find_root_device(connection_properties) if not root_device: msg = _(""Device does not appear to be mounted"") LOG.error(msg) raise exception.BrickException(message=msg) if ( not os.path.islink(rbd_dev_path) or not os.path.exists(os.path.realpath(rbd_dev_path)) ): LOG.debug( 'Volume %(vol)s is already mapped to local device %(dev)s', {'vol': volume, 'dev': os.path.realpath(rbd_dev_path)} ) if ( not os.path.islink(rbd_dev_path) or not os.path.exists(os.path.realpath(rbd_dev_path)) ): LOG.warning( 'Volume %(vol)s has not been mapped to local device ' '%(dev)s; is the udev daemon running and are the ' 'ceph-renamer udev rules configured? See bug #1884114 for ' 'more information.', {'vol': volume, 'dev': rbd_dev_path}, ) return {'path': rbd_dev_path, 'type': 'block'}"," if (not os.path.islink(rbd_dev_path) or not os.path.exists(os.path.realpath(rbd_dev_path))): LOG.debug('volume %(vol)s is already mapped to local' ' device %(dev)s', {'vol': volume, 'dev': os.path.realpath(rbd_dev_path)}) return {'path': rbd_dev_path, 'type': 'block'}",29,8
openstack%2Fneutron~master~Id7104c7a695b85451fa982c2530153d0f84fb27e,openstack/neutron,master,Id7104c7a695b85451fa982c2530153d0f84fb27e,Increase the priority of the default flow in table 0 for phys br,ABANDONED,2020-07-16 13:02:31.000000000,2020-07-22 10:18:45.000000000,,"[{'_account_id': 841}, {'_account_id': 1131}, {'_account_id': 2733}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 9531}, {'_account_id': 9732}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 29071}]","[{'number': 1, 'created': '2020-07-16 13:02:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/875dad2d5c4633eb4f38d8ed48d9bfd88541750a', 'message': 'Increase the priority of the default flow in table 0 for phys br\n\nSome context on this patch:\n- https://bugs.launchpad.net/neutron/+bug/1840443: ""[OVS agent] Physical\nbridges can\'t be initialized if there is no connectivity to rabbitmq"".\nBecause of this bug, the RPC initialization was delayed until the tunnel\nand physical bridges were configured. But this just guarantees that the\ninitial flows are written, actually that won\'t guarantee any\ncommunication with the RPC server if the physical bridge was created.\nThe default initial rules (with and without DVR) drop any incoming\npacket.\n\n- https://bugs.launchpad.net/neutron/+bug/1869808: ""reboot\nneutron-ovs-agent introduces a short interrupt of vlan traffic""\nThe fix for this bug was to remove the installation of the drop flows\nboth in br-int and br-phys<x>, if DVR was configured. Patch: [1]\n\n- https://bugs.launchpad.net/neutron/+bug/1887148: ""Network loop between\nphysical networks with DVR"". Because of the previous LP fix [1], we can\nget into the following situation if those conditions are met:\n  * Both the OVS agent and the server are stopped.\n  * The physical bridge rules are deleted manually (this is not done by\n    any OpenStack service).\n  * The OVS agent is then restarted (with DVR and the Neutron server down)\n\nA default ""NORMAL"" flow rule in the physical bridges is written\nallowing this network loop with the integration bridge.\n\nIn a nutshell:\n- In a running system (OVS flows not deleted), the OVS agent restart\nshould not interfere with the live traffic. This is currently happening\nright now, both with and without DVR.\n- In a system where, by any reason, the flows are deleted:\n  * Without DVR, the drop rules will be written and there won\'t be any\n    network loop between physical bridges.\n  * With DVR, we should modify the\n    OVSDVRNeutronAgent.setup_dvr_flows_on_phys_br method, called during the\n    initialization.\n\nThe OVS agent drop rules installed in the physical bridges, in the local\nswitch table (table 0), match priority 2. For the sake of readability,\nI\'ve removed the cooki and the duration from all flows:\nroot@dev18:~$ ovs-ofctl dump-flows br-phy\n  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL\n\nWhen the DVR class initializes the physical bridge flows, this rule is\noverwritten with a redirection to table 1 (for traffic coming from\nbr-int). The default installed rules will drops those packets (table 2\ndrop rule):\nroot@dev18:~$ ovs-ofctl dump-flows br-phy\n  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=resubmit(,1)\n  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL\n  table=0, n_packets=0, n_bytes=0, priority=1 actions=resubmit(,3)\n  table=1, n_packets=0, n_bytes=0, priority=0 actions=resubmit(,2)\n  table=2, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=3, n_packets=0, n_bytes=0, priority=1 actions=NORMAL\n\nThis is the case when the physical bridge has now flows. There will be\nno network loops.\n\nBut when the OVS is running with live traffic and the flows are set, the\ninstallation of this drop rule in physical bridge, in table 0 with\npriority 2, will drop any existing traffic (first flow snippet). If the\nOVS is fast enough, this rule will be overwritten in 1-2 seconds. This\nis an example of physical bridge with DVR and live traffic (notice the\nVLAN transformation in table 2):\nroot@dev18:~$ ovs-ofctl dump-flows br-phy\n  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=0, n_packets=1, n_bytes=70, priority=3,in_port=""phy-br-phy"" actions=resubmit(,1)\n  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL\n  table=0, n_packets=0, n_bytes=0, priority=1 actions=resubmit(,3)\n  table=1, n_packets=1, n_bytes=70, priority=0 actions=resubmit(,2)\n  table=2, n_packets=0, n_bytes=0, priority=4,in_port=""phy-br-phy"",dl_vlan=2 actions=mod_vlan_vid:12,NORMAL\n  table=2, n_packets=0, n_bytes=0, priority=4,in_port=""phy-br-phy"",dl_vlan=1 actions=mod_vlan_vid:11,NORMAL\n  table=2, n_packets=1, n_bytes=70, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=3, n_packets=0, n_bytes=0, priority=1 actions=NORMAL\n\nThe solution is very simple: the action configured by DVR class in OVS\nagent in physical bridge, table 0, for ""phy-br-phy"", should have a\npriority above 2 (see previous snippet, second rule). Even during an OVS\nagent restart, if the drop rule (priority 2) is installed, that won\'t\naffect the DVR traffic.\n\nThis solution has a little inconvenience (of course): that new rule must\nbe installed manually in all physical bridges, before executing the OVS\nrestart to avoid the traffic interruption. Once the OVS agent is updated\n(with this patch), the OVS restart can be done without any problem.\n\n[1]https://review.opendev.org/#/c/733568/\n\nChange-Id: Id7104c7a695b85451fa982c2530153d0f84fb27e\nCloses-Bug: #1887148\nRelated-Bug: #1840443\nRelated-Bug: #1869808\nRelated-Bug: #1803919\n'}, {'number': 2, 'created': '2020-07-16 14:31:21.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/plugins/ml2/drivers/openvswitch/agent/ovs_dvr_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/a0b1ce5d7d1753f763406d61def7ebbc555690ad', 'message': 'Increase the priority of the default flow in table 0 for phys br\n\nSome context on this patch:\n- https://bugs.launchpad.net/neutron/+bug/1840443: ""[OVS agent] Physical\nbridges can\'t be initialized if there is no connectivity to rabbitmq"".\nBecause of this bug, the RPC initialization was delayed until the tunnel\nand physical bridges were configured. But this just guarantees that the\ninitial flows are written, actually that won\'t guarantee any\ncommunication with the RPC server if the physical bridge was created.\nThe default initial rules (with and without DVR) drop any incoming\npacket.\n\n- https://bugs.launchpad.net/neutron/+bug/1869808: ""reboot\nneutron-ovs-agent introduces a short interrupt of vlan traffic""\nThe fix for this bug was to remove the installation of the drop flows\nboth in br-int and br-phys<x>, if DVR was configured. Patch: [1]\n\n- https://bugs.launchpad.net/neutron/+bug/1887148: ""Network loop between\nphysical networks with DVR"". Because of the previous LP fix [1], we can\nget into the following situation if those conditions are met:\n  * Both the OVS agent and the server are stopped.\n  * The physical bridge rules are deleted manually (this is not done by\n    any OpenStack service).\n  * The OVS agent is then restarted (with DVR and the Neutron server down)\n\nA default ""NORMAL"" flow rule in the physical bridges is written\nallowing this network loop with the integration bridge.\n\nIn a nutshell:\n- In a running system (OVS flows not deleted), the OVS agent restart\nshould not interfere with the live traffic. This is currently happening\nright now, both with and without DVR.\n- In a system where, by any reason, the flows are deleted:\n  * Without DVR, the drop rules will be written and there won\'t be any\n    network loop between physical bridges.\n  * With DVR, we should modify the\n    OVSDVRNeutronAgent.setup_dvr_flows_on_phys_br method, called during the\n    initialization.\n\nThe OVS agent drop rules installed in the physical bridges, in the local\nswitch table (table 0), match priority 2. For the sake of readability,\nI\'ve removed the cooki and the duration from all flows:\nroot@dev18:~$ ovs-ofctl dump-flows br-phy\n  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL\n\nWhen the DVR class initializes the physical bridge flows, this rule is\noverwritten with a redirection to table 1 (for traffic coming from\nbr-int). The default installed rules will drops those packets (table 2\ndrop rule):\nroot@dev18:~$ ovs-ofctl dump-flows br-phy\n  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=resubmit(,1)\n  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL\n  table=0, n_packets=0, n_bytes=0, priority=1 actions=resubmit(,3)\n  table=1, n_packets=0, n_bytes=0, priority=0 actions=resubmit(,2)\n  table=2, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=3, n_packets=0, n_bytes=0, priority=1 actions=NORMAL\n\nThis is the case when the physical bridge has now flows. There will be\nno network loops.\n\nBut when the OVS is running with live traffic and the flows are set, the\ninstallation of this drop rule in physical bridge, in table 0 with\npriority 2, will drop any existing traffic (first flow snippet). If the\nOVS is fast enough, this rule will be overwritten in 1-2 seconds. This\nis an example of physical bridge with DVR and live traffic (notice the\nVLAN transformation in table 2):\nroot@dev18:~$ ovs-ofctl dump-flows br-phy\n  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=0, n_packets=1, n_bytes=70, priority=3,in_port=""phy-br-phy"" actions=resubmit(,1)\n  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL\n  table=0, n_packets=0, n_bytes=0, priority=1 actions=resubmit(,3)\n  table=1, n_packets=1, n_bytes=70, priority=0 actions=resubmit(,2)\n  table=2, n_packets=0, n_bytes=0, priority=4,in_port=""phy-br-phy"",dl_vlan=2 actions=mod_vlan_vid:12,NORMAL\n  table=2, n_packets=0, n_bytes=0, priority=4,in_port=""phy-br-phy"",dl_vlan=1 actions=mod_vlan_vid:11,NORMAL\n  table=2, n_packets=1, n_bytes=70, priority=2,in_port=""phy-br-phy"" actions=drop\n  table=3, n_packets=0, n_bytes=0, priority=1 actions=NORMAL\n\nThe solution is very simple: the action configured by DVR class in OVS\nagent in physical bridge, table 0, for ""phy-br-phy"", should have a\npriority above 2 (see previous snippet, second rule). Even during an OVS\nagent restart, if the drop rule (priority 2) is installed, that won\'t\naffect the DVR traffic.\n\nThis solution has a little inconvenience (of course): that new rule must\nbe installed manually in all physical bridges, before executing the OVS\nrestart to avoid the traffic interruption. Once the OVS agent is updated\n(with this patch), the OVS restart can be done without any problem.\n\n[1]https://review.opendev.org/#/c/733568/\n\nChange-Id: Id7104c7a695b85451fa982c2530153d0f84fb27e\nCloses-Bug: #1887148\nRelated-Bug: #1840443\nRelated-Bug: #1869808\nRelated-Bug: #1803919\n'}]",18,741444,a0b1ce5d7d1753f763406d61def7ebbc555690ad,21,15,2,16688,,,0,"Increase the priority of the default flow in table 0 for phys br

Some context on this patch:
- https://bugs.launchpad.net/neutron/+bug/1840443: ""[OVS agent] Physical
bridges can't be initialized if there is no connectivity to rabbitmq"".
Because of this bug, the RPC initialization was delayed until the tunnel
and physical bridges were configured. But this just guarantees that the
initial flows are written, actually that won't guarantee any
communication with the RPC server if the physical bridge was created.
The default initial rules (with and without DVR) drop any incoming
packet.

- https://bugs.launchpad.net/neutron/+bug/1869808: ""reboot
neutron-ovs-agent introduces a short interrupt of vlan traffic""
The fix for this bug was to remove the installation of the drop flows
both in br-int and br-phys<x>, if DVR was configured. Patch: [1]

- https://bugs.launchpad.net/neutron/+bug/1887148: ""Network loop between
physical networks with DVR"". Because of the previous LP fix [1], we can
get into the following situation if those conditions are met:
  * Both the OVS agent and the server are stopped.
  * The physical bridge rules are deleted manually (this is not done by
    any OpenStack service).
  * The OVS agent is then restarted (with DVR and the Neutron server down)

A default ""NORMAL"" flow rule in the physical bridges is written
allowing this network loop with the integration bridge.

In a nutshell:
- In a running system (OVS flows not deleted), the OVS agent restart
should not interfere with the live traffic. This is currently happening
right now, both with and without DVR.
- In a system where, by any reason, the flows are deleted:
  * Without DVR, the drop rules will be written and there won't be any
    network loop between physical bridges.
  * With DVR, we should modify the
    OVSDVRNeutronAgent.setup_dvr_flows_on_phys_br method, called during the
    initialization.

The OVS agent drop rules installed in the physical bridges, in the local
switch table (table 0), match priority 2. For the sake of readability,
I've removed the cooki and the duration from all flows:
root@dev18:~$ ovs-ofctl dump-flows br-phy
  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop
  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL

When the DVR class initializes the physical bridge flows, this rule is
overwritten with a redirection to table 1 (for traffic coming from
br-int). The default installed rules will drops those packets (table 2
drop rule):
root@dev18:~$ ovs-ofctl dump-flows br-phy
  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=resubmit(,1)
  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL
  table=0, n_packets=0, n_bytes=0, priority=1 actions=resubmit(,3)
  table=1, n_packets=0, n_bytes=0, priority=0 actions=resubmit(,2)
  table=2, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop
  table=3, n_packets=0, n_bytes=0, priority=1 actions=NORMAL

This is the case when the physical bridge has now flows. There will be
no network loops.

But when the OVS is running with live traffic and the flows are set, the
installation of this drop rule in physical bridge, in table 0 with
priority 2, will drop any existing traffic (first flow snippet). If the
OVS is fast enough, this rule will be overwritten in 1-2 seconds. This
is an example of physical bridge with DVR and live traffic (notice the
VLAN transformation in table 2):
root@dev18:~$ ovs-ofctl dump-flows br-phy
  table=0, n_packets=0, n_bytes=0, priority=2,in_port=""phy-br-phy"" actions=drop
  table=0, n_packets=1, n_bytes=70, priority=3,in_port=""phy-br-phy"" actions=resubmit(,1)
  table=0, n_packets=0, n_bytes=0, priority=0 actions=NORMAL
  table=0, n_packets=0, n_bytes=0, priority=1 actions=resubmit(,3)
  table=1, n_packets=1, n_bytes=70, priority=0 actions=resubmit(,2)
  table=2, n_packets=0, n_bytes=0, priority=4,in_port=""phy-br-phy"",dl_vlan=2 actions=mod_vlan_vid:12,NORMAL
  table=2, n_packets=0, n_bytes=0, priority=4,in_port=""phy-br-phy"",dl_vlan=1 actions=mod_vlan_vid:11,NORMAL
  table=2, n_packets=1, n_bytes=70, priority=2,in_port=""phy-br-phy"" actions=drop
  table=3, n_packets=0, n_bytes=0, priority=1 actions=NORMAL

The solution is very simple: the action configured by DVR class in OVS
agent in physical bridge, table 0, for ""phy-br-phy"", should have a
priority above 2 (see previous snippet, second rule). Even during an OVS
agent restart, if the drop rule (priority 2) is installed, that won't
affect the DVR traffic.

This solution has a little inconvenience (of course): that new rule must
be installed manually in all physical bridges, before executing the OVS
restart to avoid the traffic interruption. Once the OVS agent is updated
(with this patch), the OVS restart can be done without any problem.

[1]https://review.opendev.org/#/c/733568/

Change-Id: Id7104c7a695b85451fa982c2530153d0f84fb27e
Closes-Bug: #1887148
Related-Bug: #1840443
Related-Bug: #1869808
Related-Bug: #1803919
",git fetch https://review.opendev.org/openstack/neutron refs/changes/44/741444/2 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/plugins/ml2/drivers/openvswitch/agent/ovs_dvr_neutron_agent.py']",2,875dad2d5c4633eb4f38d8ed48d9bfd88541750a,bug/1887148," priority=3,"," priority=2,",15,24
openstack%2Foctavia-tempest-plugin~master~Ie6443a694b3d6e835cc86cb1b8b85f8d6afc6fa1,openstack/octavia-tempest-plugin,master,Ie6443a694b3d6e835cc86cb1b8b85f8d6afc6fa1,Fix two-node active-standby job vars,ABANDONED,2020-07-21 13:50:47.000000000,2020-07-22 10:18:43.000000000,,"[{'_account_id': 11628}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 13:50:47.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/a45d48b666f7df15ba2808182bd7b85c517728d1', 'message': 'Fix two-node active-standby job vars\n\nOctavia is not running under the ACTIVE_STANDBY loadbalancer topology as\nit is expected to. This is because the devstack_local_conf section is\nnot under ""vars"".\n\nChange-Id: Ie6443a694b3d6e835cc86cb1b8b85f8d6afc6fa1\n'}]",1,742195,a45d48b666f7df15ba2808182bd7b85c517728d1,4,2,1,6469,,,0,"Fix two-node active-standby job vars

Octavia is not running under the ACTIVE_STANDBY loadbalancer topology as
it is expected to. This is because the devstack_local_conf section is
not under ""vars"".

Change-Id: Ie6443a694b3d6e835cc86cb1b8b85f8d6afc6fa1
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/95/742195/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,a45d48b666f7df15ba2808182bd7b85c517728d1,," vars: devstack_local_conf: test-config: ""$TEMPEST_CONFIG"": load_balancer: loadbalancer_topology: ACTIVE_STANDBY"," devstack_local_conf: test-config: ""$TEMPEST_CONFIG"": load_balancer: loadbalancer_topology: ACTIVE_STANDBY",6,5
openstack%2Fmanila-image-elements~master~I136b46ea8f6f1630eb5691e9b6eeadcc92dd6197,openstack/manila-image-elements,master,I136b46ea8f6f1630eb5691e9b6eeadcc92dd6197,Install qemu-quest-agent,MERGED,2020-07-20 13:54:01.000000000,2020-07-22 10:13:51.000000000,2020-07-22 10:13:51.000000000,"[{'_account_id': 9003}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 30238}]","[{'number': 1, 'created': '2020-07-20 13:54:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/214a3dec5181e7c2283b502ef3e13a969f061c00', 'message': ""Install qemu-quest-agent\n\nIt's needed for some cases (fox ex. online disk resize)\n\nChange-Id: I136b46ea8f6f1630eb5691e9b6eeadcc92dd6197\nSigned-off-by: George Melikov <mail@gmelikov.ru>\n""}, {'number': 2, 'created': '2020-07-21 19:16:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/99fb38cac1bf1c0fc992cc4b45aafc26a31b917d', 'message': ""Install qemu-quest-agent\n\nIt's needed for some cases (fox ex. online disk resize)\n\nChange-Id: I136b46ea8f6f1630eb5691e9b6eeadcc92dd6197\nSigned-off-by: George Melikov <mail@gmelikov.ru>\n""}, {'number': 3, 'created': '2020-07-21 22:15:56.000000000', 'files': ['elements/manila-ubuntu-minimal/package-installs.yaml', 'elements/manila-centos-minimal/package-installs.yaml'], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/8d0a0e8a522d616150316992dd0b9c09e2fb62b9', 'message': ""Install qemu-quest-agent\n\nIt's needed for some cases (fox ex. online disk resize)\n\nChange-Id: I136b46ea8f6f1630eb5691e9b6eeadcc92dd6197\nSigned-off-by: George Melikov <mail@gmelikov.ru>\n""}]",0,741948,8d0a0e8a522d616150316992dd0b9c09e2fb62b9,14,4,3,30238,,,0,"Install qemu-quest-agent

It's needed for some cases (fox ex. online disk resize)

Change-Id: I136b46ea8f6f1630eb5691e9b6eeadcc92dd6197
Signed-off-by: George Melikov <mail@gmelikov.ru>
",git fetch https://review.opendev.org/openstack/manila-image-elements refs/changes/48/741948/1 && git format-patch -1 --stdout FETCH_HEAD,['elements/manila-ubuntu-minimal/pre-install.d/99-ubuntu-apt-install'],1,214a3dec5181e7c2283b502ef3e13a969f061c00,quest_agent,#!/bin/bash if [ ${DIB_DEBUG_TRACE:-0} -gt 0 ]; then set -x fi set -eu set -o pipefail apt-get install qemu-guest-agent -y ,,9,0
openstack%2Fcharm-openstack-dashboard~master~I990ddff0be85f38912f82078aa72fa159a973d87,openstack/charm-openstack-dashboard,master,I990ddff0be85f38912f82078aa72fa159a973d87,Add Victoria test bundles,MERGED,2020-07-22 08:41:49.000000000,2020-07-22 09:56:53.000000000,2020-07-22 09:56:53.000000000,"[{'_account_id': 935}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-22 08:41:49.000000000', 'files': ['tests/tests.yaml', 'tests/bundles/focal-victoria.yaml', 'tests/bundles/groovy-victoria.yaml'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/29e9aead255fe7199066ee1a68c8ca3708d51fc1', 'message': 'Add Victoria test bundles\n\nChange-Id: I990ddff0be85f38912f82078aa72fa159a973d87\n'}]",0,742370,29e9aead255fe7199066ee1a68c8ca3708d51fc1,7,3,1,31289,,,0,"Add Victoria test bundles

Change-Id: I990ddff0be85f38912f82078aa72fa159a973d87
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/70/742370/1 && git format-patch -1 --stdout FETCH_HEAD,"['tests/tests.yaml', 'tests/bundles/focal-victoria.yaml', 'tests/bundles/groovy-victoria.yaml']",3,29e9aead255fe7199066ee1a68c8ca3708d51fc1,victoria-charm-tests,variables: openstack-origin: &openstack-origin distro series: groovy comment: - 'machines section to decide order of deployment. database sooner = faster' - 'virt-type=kvm is workaround while awaiting new release of python-libjuju' machines: '0': constraints: virt-type=kvm mem=3072M '1': constraints: virt-type=kvm mem=3072M '2': constraints: virt-type=kvm mem=3072M '3': constraints: virt-type=kvm '4': constraints: virt-type=kvm mem=3072M applications: keystone-mysql-router: charm: cs:~openstack-charmers-next/mysql-router openstack-dashboard-mysql-router: charm: cs:~openstack-charmers-next/mysql-router mysql-innodb-cluster: charm: cs:~openstack-charmers-next/mysql-innodb-cluster num_units: 3 options: source: *openstack-origin to: - '0' - '1' - '2' keystone: charm: cs:~openstack-charmers-next/keystone num_units: 1 options: openstack-origin: *openstack-origin to: - '3' openstack-dashboard: charm: ../../../openstack-dashboard num_units: 1 options: openstack-origin: *openstack-origin to: - '4' relations: - - 'keystone:shared-db' - 'keystone-mysql-router:shared-db' - - 'keystone-mysql-router:db-router' - 'mysql-innodb-cluster:db-router' - - 'openstack-dashboard:shared-db' - 'openstack-dashboard-mysql-router:shared-db' - - 'openstack-dashboard-mysql-router:db-router' - 'mysql-innodb-cluster:db-router' - - 'openstack-dashboard:identity-service' - 'keystone:identity-service' ,,141,2
openstack%2Ftripleo-ansible~master~I7d8c715450c9e9d7f6b414e81b76343fe0280b62,openstack/tripleo-ansible,master,I7d8c715450c9e9d7f6b414e81b76343fe0280b62,Fix problem stack user problem on create_ceph_ansible_remote_tmp playbook,ABANDONED,2020-07-16 17:26:49.000000000,2020-07-22 09:53:05.000000000,,"[{'_account_id': 18002}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-16 17:26:49.000000000', 'files': ['tripleo_ansible/roles/tripleo_ceph_run_ansible/tasks/create_ceph_ansible_remote_tmp.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/09406a326c85f88283b2f1693aa01c3c8e9e32e1', 'message': 'Fix problem stack user problem on create_ceph_ansible_remote_tmp playbook\n\nThis patch makes the playbook to chose dynamicaly the user/group. It does that\nbecause the jinja2 expression is not rendered when the playbook is generated.\nThe expression is writen on the playbook so later when the playbook is called,\nit choses the owner and group of the directory.\n\nChange-Id: I7d8c715450c9e9d7f6b414e81b76343fe0280b62\nPartial-Bug: 1887708\n'}]",0,741505,09406a326c85f88283b2f1693aa01c3c8e9e32e1,8,4,1,22954,,,0,"Fix problem stack user problem on create_ceph_ansible_remote_tmp playbook

This patch makes the playbook to chose dynamicaly the user/group. It does that
because the jinja2 expression is not rendered when the playbook is generated.
The expression is writen on the playbook so later when the playbook is called,
it choses the owner and group of the directory.

Change-Id: I7d8c715450c9e9d7f6b414e81b76343fe0280b62
Partial-Bug: 1887708
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/05/741505/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_ceph_run_ansible/tasks/create_ceph_ansible_remote_tmp.yml'],1,09406a326c85f88283b2f1693aa01c3c8e9e32e1,bug/1887708,"- name: Use some !unsafe to avoid jinja2 rendering set_fact: group_owner: !unsafe ""{{ ansible_user | default('tripleo-admin', true) }}"" owner: ""{{ group_owner }}"" group: ""{{ group_owner }}"""," owner: ""{{ ansible_user | default('tripleo-admin', true) }}"" group: ""{{ ansible_user | default('tripleo-admin', true) }}""",6,2
openstack%2Fcharm-designate-bind~master~I02ebe63ad2775a00eb0f2d0a9ff2499319940833,openstack/charm-designate-bind,master,I02ebe63ad2775a00eb0f2d0a9ff2499319940833,Allow access from remote designate units,MERGED,2020-07-21 08:13:58.000000000,2020-07-22 09:40:19.000000000,2020-07-22 09:40:19.000000000,"[{'_account_id': 935}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-21 08:13:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate-bind/commit/b455f8f384c99ce2b069b892158fc0c8d9fc5abd', 'message': 'Append dns-backend CIDR to allowed_nets\n\nIf the allowed_nets configuration option is set, automatically\nappend the CIDR for the dns-backend network space binding to\nthe list of permitted networks, otherwise the designate servers\ncannot interact correctly with BIND.\n\nCloses-Bug: 1806485\nChange-Id: I02ebe63ad2775a00eb0f2d0a9ff2499319940833\n'}, {'number': 2, 'created': '2020-07-21 08:56:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate-bind/commit/a221027d0620e865375bbe909d00a54f9ed00dd2', 'message': ""Allow access from remote designate units\n\nIf allowed_nets is set ensure that the CIDR's for the remote\nunits on the dns-backend relation are also included in the\nallow-query configuration stanza.\n\nThis ensures that designate can validate that zone updates\nhave been correctly transferred to all BIND servers.\n\nCloses-Bug: 1806485\nDepends-On: Icdb525c9886937597e35ab8126237a2850604832\nChange-Id: I02ebe63ad2775a00eb0f2d0a9ff2499319940833\n""}, {'number': 3, 'created': '2020-07-21 09:04:21.000000000', 'files': ['src/lib/charm/openstack/designate_bind.py', 'src/templates/named.conf.options', 'unit_tests/test_lib_charm_openstack_designate_bind.py'], 'web_link': 'https://opendev.org/openstack/charm-designate-bind/commit/57d034b7299375bba294dad194292cf5a3722dd6', 'message': ""Allow access from remote designate units\n\nIf allowed_nets is set ensure that the CIDR's for the remote\nunits on the dns-backend relation are also included in the\nallow-query configuration stanza.\n\nThis ensures that designate can validate that zone updates\nhave been correctly transferred to all BIND servers.\n\nCloses-Bug: 1806485\nDepends-On: Icdb525c9886937597e35ab8126237a2850604832\nChange-Id: I02ebe63ad2775a00eb0f2d0a9ff2499319940833\n""}]",0,742092,57d034b7299375bba294dad194292cf5a3722dd6,20,4,3,935,,,0,"Allow access from remote designate units

If allowed_nets is set ensure that the CIDR's for the remote
units on the dns-backend relation are also included in the
allow-query configuration stanza.

This ensures that designate can validate that zone updates
have been correctly transferred to all BIND servers.

Closes-Bug: 1806485
Depends-On: Icdb525c9886937597e35ab8126237a2850604832
Change-Id: I02ebe63ad2775a00eb0f2d0a9ff2499319940833
",git fetch https://review.opendev.org/openstack/charm-designate-bind refs/changes/92/742092/3 && git format-patch -1 --stdout FETCH_HEAD,"['src/lib/charm/openstack/designate_bind.py', 'src/templates/named.conf.options', 'unit_tests/test_lib_charm_openstack_designate_bind.py']",3,b455f8f384c99ce2b069b892158fc0c8d9fc5abd,bug/1806485,"class TestAllAllowedNets(Helper): def test_allowed_nets_unset(self): self.patch(designate_bind.ch_ip, 'resolve_network_cidr') self.patch(designate_bind.hookenv, 'config') self.patch(designate_bind.hookenv, 'network_get_primary_address') self.config.return_value = """" self.assertIsNone(designate_bind.all_allowed_nets(None)) def test_allowed_nets_set(self): self.patch(designate_bind.ch_ip, 'resolve_network_cidr') self.patch(designate_bind.hookenv, 'config') self.patch(designate_bind.hookenv, 'network_get_primary_address') self.config.return_value = ""10.20.30.40/24"" self.resolve_network_cidr.return_value = ""10.5.2.0/16"" self.network_get_primary_address.return_value = ""10.5.2.1"" self.assertEqual( designate_bind.all_allowed_nets(None), '10.20.30.40/24;10.5.2.0/16' ) self.resolve_network_cidr.assert_called_once_with(""10.5.2.1"") self.network_get_primary_address.assert_called_once_with('dns-backend') self.config.assert_called_once_with('allowed_nets') ",,49,2
openstack%2Fswift~master~Ib711418d02d2ab41867fde8d55de3c26e5afafea,openstack/swift,master,Ib711418d02d2ab41867fde8d55de3c26e5afafea,skip same suffixes sync when update_delete,NEW,2020-07-22 07:43:39.000000000,2020-07-22 09:30:10.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-22 07:43:39.000000000', 'files': ['swift/obj/replicator.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/7ab7c20b493bf2531d77a7b49d4ed235728c9d36', 'message': 'skip same suffixes sync when update_delete\n\nOur Cluster have PB data and data increase fast,when scale node the rebalance is slow ,also have effect in network and disk io and cpu,rsync once maybe failure,we hope rebalance fast and have less load to Cluster.\n\nFor example,when three replicates cluter scale,this fix just sync more data to new node,the other two nodes just compare suffix hash and sync less rsync check，save bandwidth and lower effect to disk io and cpu.\n\nThe other situation is PB data cluster is not rebalance,we have to rebalance cluster many times when cluster level is 80%,we want reblance fast take time\n\nChange-Id: Ib711418d02d2ab41867fde8d55de3c26e5afafea\nCloses-Bug: #742197\n'}]",7,742360,7ab7c20b493bf2531d77a7b49d4ed235728c9d36,2,1,1,32225,,,0,"skip same suffixes sync when update_delete

Our Cluster have PB data and data increase fast,when scale node the rebalance is slow ,also have effect in network and disk io and cpu,rsync once maybe failure,we hope rebalance fast and have less load to Cluster.

For example,when three replicates cluter scale,this fix just sync more data to new node,the other two nodes just compare suffix hash and sync less rsync check，save bandwidth and lower effect to disk io and cpu.

The other situation is PB data cluster is not rebalance,we have to rebalance cluster many times when cluster level is 80%,we want reblance fast take time

Change-Id: Ib711418d02d2ab41867fde8d55de3c26e5afafea
Closes-Bug: #742197
",git fetch https://review.opendev.org/openstack/swift refs/changes/60/742360/1 && git format-patch -1 --stdout FETCH_HEAD,['swift/obj/replicator.py'],1,7ab7c20b493bf2531d77a7b49d4ed235728c9d36,742197," df_mgr = self._df_router[job['policy']] hashed, local_hash = tpool.execute( df_mgr._get_hashes, job['device'], job['partition'], job['policy'], do_listdir=_do_listdir( int(job['partition']), self.replication_cycle)) try: with Timeout(self.http_timeout): conn_resp = http_connect( '/', headers=headers).getresponse() if conn_resp.status == HTTP_INSUFFICIENT_STORAGE: self.logger.error( _('%(replication_ip)s/%(device)s ' 'responded as unmounted'), node) failure_devs_info.add((node['replication_ip'], node['device'])) continue if conn_resp.status != HTTP_OK: self.logger.error(_(""Invalid response %(resp)s "" ""from %(ip)s""), {'resp': resp.status, 'ip': node['replication_ip']}) failure_devs_info.add((node['replication_ip'], node['device'])) continue remote_hash = pickle.loads(conn_resp.read()) del conn_resp local_hash[suffix] != remote_hash.get(suffix, -1)] except (Exception, Timeout): node_suffixes = suffixes if not node_suffixes: continue"," hashed, local_hash = tpool_reraise( get_hashes, job['path'], do_listdir=(self.replication_count % 10) == 0, reclaim_age=self.reclaim_age) remote_hash={} with Timeout(self.http_timeout): resp = http_connect( '', headers=headers).getresponse() if resp.status == HTTP_INSUFFICIENT_STORAGE: self.logger.error( _('%(replication_ip)s/%(device)s ' 'responded as unmounted'), node) attempts_left += 1 failure_devs_info.add((node['replication_ip'], node['device'])) continue if resp.status != HTTP_OK: self.logger.error(_(""Invalid response %(resp)s "" ""from %(ip)s""), {'resp': resp.status, 'ip': node['replication_ip']}) failure_devs_info.add((node['replication_ip'], node['device'])) continue remote_hash = pickle.loads(resp.read()) del resp if remote_hash: local_hash[suffix] != remote_hash.get(suffix, -1)] if not node_suffixes: continue else: node_suffixes=suffixes",34,33
openstack%2Fcharm-trilio-wlm~master~I2d7a9da957e95d58d8ed0110f39579f0aefc644d,openstack/charm-trilio-wlm,master,I2d7a9da957e95d58d8ed0110f39579f0aefc644d,Use mysqldb db driver,MERGED,2020-07-17 14:08:33.000000000,2020-07-22 09:24:50.000000000,2020-07-22 09:24:50.000000000,"[{'_account_id': 935}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}]","[{'number': 1, 'created': '2020-07-17 14:08:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/453497ca78e5749f4b9b7c9eec29b39274a35c59', 'message': 'Use mysqldb db driver\n\nworkloadmgr is not compatible with pymysql so strip the +pymysql\nfrom the generated shared db URI to ensure compatibility.\n\nChange-Id: I2d7a9da957e95d58d8ed0110f39579f0aefc644d\nCloses-Bug: 1887675\n'}, {'number': 2, 'created': '2020-07-17 14:44:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/4f8c411ca0cbb233ffc5ed6b194430e5f7f36867', 'message': 'Use mysqldb db driver\n\nForce use of the mysqldb db driver as workloadmgr is not\ncompatible with pymysql.\n\nChange-Id: I2d7a9da957e95d58d8ed0110f39579f0aefc644d\nDepends-On: I78218aa972ead49f144bb19a988bd6f0bbf4a539\nCloses-Bug: 1887675\n'}, {'number': 3, 'created': '2020-07-17 14:49:58.000000000', 'files': ['src/lib/charm/openstack/trilio_wlm.py'], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/7c5c74be6e3385fcc8af95c42933c4e94302e9ad', 'message': 'Use mysqldb db driver\n\nForce use of the mysqldb db driver as workloadmgr is not\ncompatible with pymysql.\n\nChange-Id: I2d7a9da957e95d58d8ed0110f39579f0aefc644d\nDepends-On: I78218aa972ead49f144bb19a988bd6f0bbf4a539\nCloses-Bug: 1887675\n'}]",0,741649,7c5c74be6e3385fcc8af95c42933c4e94302e9ad,17,4,3,935,,,0,"Use mysqldb db driver

Force use of the mysqldb db driver as workloadmgr is not
compatible with pymysql.

Change-Id: I2d7a9da957e95d58d8ed0110f39579f0aefc644d
Depends-On: I78218aa972ead49f144bb19a988bd6f0bbf4a539
Closes-Bug: 1887675
",git fetch https://review.opendev.org/openstack/charm-trilio-wlm refs/changes/49/741649/1 && git format-patch -1 --stdout FETCH_HEAD,['src/templates/workloadmgr.conf'],1,453497ca78e5749f4b9b7c9eec29b39274a35c59,bug/1887675,"sql_connection = {{ shared_db.uri.replace('+pymysql', '') }}",sql_connection = {{ shared_db.uri }},1,1
openstack%2Fmagnum~master~I8fd5cc154e86006e9139d5ac5f282d0b460eca37,openstack/magnum,master,I8fd5cc154e86006e9139d5ac5f282d0b460eca37,[k8s] Use helm upgrade --install in deployment loop,MERGED,2020-07-03 10:33:30.000000000,2020-07-22 09:01:58.000000000,2020-07-12 23:19:22.000000000,"[{'_account_id': 6484}, {'_account_id': 20498}, {'_account_id': 22348}, {'_account_id': 28022}]","[{'number': 1, 'created': '2020-07-03 10:33:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/a13a0ae70d41961268ee37dbf794b6c0194e18dd', 'message': '[k8s] Retry chart deployment until deployed\n\nSometimes, the chart may fail to deploy, e.g. if the worker node is not\nready before chart deployment timeout. Retry until status is deployed.\n\nStory: 2007514\nTask: 40276\n\nChange-Id: I8fd5cc154e86006e9139d5ac5f282d0b460eca37\n'}, {'number': 2, 'created': '2020-07-10 08:35:30.000000000', 'files': ['magnum/drivers/common/templates/kubernetes/fragments/install-helm-modules.sh'], 'web_link': 'https://opendev.org/openstack/magnum/commit/a008e3b44f8610675d50f8aef9c576133c707814', 'message': '[k8s] Use helm upgrade --install in deployment loop\n\nSometimes, the chart may fail to deploy, e.g. if the worker node is not\nready before chart deployment times out. Retry until status is deployed.\n\nStory: 2007514\nTask: 40276\n\nChange-Id: I8fd5cc154e86006e9139d5ac5f282d0b460eca37\n'}]",3,739201,a008e3b44f8610675d50f8aef9c576133c707814,15,4,2,28022,,,0,"[k8s] Use helm upgrade --install in deployment loop

Sometimes, the chart may fail to deploy, e.g. if the worker node is not
ready before chart deployment times out. Retry until status is deployed.

Story: 2007514
Task: 40276

Change-Id: I8fd5cc154e86006e9139d5ac5f282d0b460eca37
",git fetch https://review.opendev.org/openstack/magnum refs/changes/01/739201/2 && git format-patch -1 --stdout FETCH_HEAD,['magnum/drivers/common/templates/kubernetes/fragments/install-helm-modules.sh'],1,a13a0ae70d41961268ee37dbf794b6c0194e18dd,," helm_install_cmd=""helm upgrade --install magnum . --namespace kube-system --values values.yaml --render-subchart-notes"" helm_install_cmd=""helm upgrade --install --name magnum . --namespace kube-system --values values.yaml --render-subchart-notes"" until ($helm_history_cmd | grep magnum | grep deployed) || (helm dep update && $helm_install_cmd); do"," helm_install_cmd=""helm install magnum . --namespace kube-system --values values.yaml --render-subchart-notes"" helm_install_cmd=""helm install --name magnum . --namespace kube-system --values values.yaml --render-subchart-notes"" until ($helm_history_cmd | grep magnum) || (helm dep update && $helm_install_cmd); do",3,3
openstack%2Fcharm-neutron-openvswitch~master~I2468ce5e20150371a7472ecdd89f8d4b3b14c489,openstack/charm-neutron-openvswitch,master,I2468ce5e20150371a7472ecdd89f8d4b3b14c489,Honour the `instance-mtu` configuration option,MERGED,2020-07-16 14:52:34.000000000,2020-07-22 08:07:13.000000000,2020-07-22 08:07:13.000000000,"[{'_account_id': 13686}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-16 14:52:34.000000000', 'files': ['templates/icehouse/dhcp_agent.ini', 'templates/mitaka/dhcp_agent.ini', 'templates/ocata/dhcp_agent.ini'], 'web_link': 'https://opendev.org/openstack/charm-neutron-openvswitch/commit/e17d73c416d92a014104c73ae4167cb0c997ad3b', 'message': 'Honour the `instance-mtu` configuration option\n\nThe templates was missing a gate on the `instance_mtu` context\nvariable. Update template for all supported versions to be on\npar with the neutrona-gateway charm.\n\nChange-Id: I2468ce5e20150371a7472ecdd89f8d4b3b14c489\nCloses-Bug: #1887817\n'}]",0,741472,e17d73c416d92a014104c73ae4167cb0c997ad3b,9,4,1,13686,,,0,"Honour the `instance-mtu` configuration option

The templates was missing a gate on the `instance_mtu` context
variable. Update template for all supported versions to be on
par with the neutrona-gateway charm.

Change-Id: I2468ce5e20150371a7472ecdd89f8d4b3b14c489
Closes-Bug: #1887817
",git fetch https://review.opendev.org/openstack/charm-neutron-openvswitch refs/changes/72/741472/1 && git format-patch -1 --stdout FETCH_HEAD,"['templates/icehouse/dhcp_agent.ini', 'templates/mitaka/dhcp_agent.ini', 'templates/ocata/dhcp_agent.ini']",3,e17d73c416d92a014104c73ae4167cb0c997ad3b,bug/1887817,{% if instance_mtu or dnsmasq_flags -%},{% if dnsmasq_flags -%},3,3
openstack%2Fcharm-openstack-dashboard~master~I4a42144ff3f1cf01d6ea26fec80980d27a6bd64f,openstack/charm-openstack-dashboard,master,I4a42144ff3f1cf01d6ea26fec80980d27a6bd64f,Updates for 20.08 cycle start for groovy and libs,MERGED,2020-06-02 13:36:43.000000000,2020-07-22 07:57:57.000000000,2020-07-22 07:57:57.000000000,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 24824}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-06-02 13:36:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/fe5573ace3965f06c4d25ff52bbe1ccd5e4368f6', 'message': 'Updates for 20.08 cycle start for groovy and libs\n\n- Adds groovy to the series in the metadata\n- Classic charms: sync charm-helpers.\n- Classic ceph based charms:  also sync charms.ceph\n- Reactive charms: trigger a rebuild\n\nChange-Id: I4a42144ff3f1cf01d6ea26fec80980d27a6bd64f\n'}, {'number': 2, 'created': '2020-06-05 06:29:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/a19389faad0625b3c9a93724ef3b225550fbbf16', 'message': 'Updates for 20.08 cycle start for groovy and libs\n\n- Adds groovy to the series in the metadata\n- Classic charms: sync charm-helpers.\n- Classic ceph based charms:  also sync charms.ceph\n- Reactive charms: trigger a rebuild\n\nChange-Id: I4a42144ff3f1cf01d6ea26fec80980d27a6bd64f\n'}, {'number': 3, 'created': '2020-07-20 18:53:17.000000000', 'files': ['metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/d229c3417dbf5f07a9b0794d19fa7574c7ecb840', 'message': 'Updates for 20.08 cycle start for groovy and libs\n\n- Adds groovy to the series in the metadata\n- Classic charms: sync charm-helpers.\n- Classic ceph based charms:  also sync charms.ceph\n- Reactive charms: trigger a rebuild\n\nChange-Id: I4a42144ff3f1cf01d6ea26fec80980d27a6bd64f\n'}]",0,732673,d229c3417dbf5f07a9b0794d19fa7574c7ecb840,27,5,3,20870,,,0,"Updates for 20.08 cycle start for groovy and libs

- Adds groovy to the series in the metadata
- Classic charms: sync charm-helpers.
- Classic ceph based charms:  also sync charms.ceph
- Reactive charms: trigger a rebuild

Change-Id: I4a42144ff3f1cf01d6ea26fec80980d27a6bd64f
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/73/732673/3 && git format-patch -1 --stdout FETCH_HEAD,"['charmhelpers/contrib/openstack/utils.py', 'charmhelpers/fetch/snap.py', 'charmhelpers/contrib/storage/linux/ceph.py', 'metadata.yaml']",4,fe5573ace3965f06c4d25ff52bbe1ccd5e4368f6,batch-groovy-ch-libs," The OpenStack Dashboard provides a full feature web interface for interacting with instances, images, volumes and networks within an OpenStack deployment. tags: - openstack - miscseries # Only used to allow specifying a hostname for DNS-HA. : - xenial - bionic - eoan - focal - trusty - groovy description: Custom dashboard theme"," The OpenStack Dashboard provides a full feature web interface for interacting with instances, images, volumes and networks within an OpenStack deployment. tags: - openstack - miscseries: - xenial - bionic - eoan - focal - trusty description: ""Custom dashboard theme""",19,17
openstack%2Fpuppet-tripleo~stable%2Fussuri~Iaba8da504f9c7a54656cf1abe259dff779ea7125,openstack/puppet-tripleo,stable/ussuri,Iaba8da504f9c7a54656cf1abe259dff779ea7125,Ensure post-save certmonger scripts target the right HA container,MERGED,2020-07-21 07:52:35.000000000,2020-07-22 07:52:46.000000000,2020-07-22 03:53:18.000000000,"[{'_account_id': 3153}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 07:52:35.000000000', 'files': ['files/certmonger-rabbitmq-refresh.sh', 'files/certmonger-haproxy-refresh.sh'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/e0fa5abdf69f4cb7f80bb40c858eef4f7601dea5', 'message': 'Ensure post-save certmonger scripts target the right HA container\n\nHAProxy and RabbitMQ can reload their TLS certificate on change,\nwithout being restarted. To do that, a post-save script scan the\nlist of running container, copy the new certs and trigger a reload\naction in the service.\n\nMake sure that those post-save script only get the right container\nout of the ""$container_cli ps"" command, i.e. that the scripts Work\nboth with HA and non-HA deployments.\n\nChange-Id: Iaba8da504f9c7a54656cf1abe259dff779ea7125\nCloses-Bug: #1885284\n(cherry picked from commit 3e942b7ff5cc91bfee7cc19d31b502548dcf3f57)\n'}]",0,742088,e0fa5abdf69f4cb7f80bb40c858eef4f7601dea5,10,3,1,20778,,,0,"Ensure post-save certmonger scripts target the right HA container

HAProxy and RabbitMQ can reload their TLS certificate on change,
without being restarted. To do that, a post-save script scan the
list of running container, copy the new certs and trigger a reload
action in the service.

Make sure that those post-save script only get the right container
out of the ""$container_cli ps"" command, i.e. that the scripts Work
both with HA and non-HA deployments.

Change-Id: Iaba8da504f9c7a54656cf1abe259dff779ea7125
Closes-Bug: #1885284
(cherry picked from commit 3e942b7ff5cc91bfee7cc19d31b502548dcf3f57)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/88/742088/1 && git format-patch -1 --stdout FETCH_HEAD,"['files/certmonger-rabbitmq-refresh.sh', 'files/certmonger-haproxy-refresh.sh']",2,e0fa5abdf69f4cb7f80bb40c858eef4f7601dea5,ha-cert-rotation-stable/ussuri,"haproxy_container_name=$($container_cli ps --format=""{{.Names}}"" | grep -w -E 'haproxy(-bundle-.*-[0-9]+)?')","haproxy_container_name=$($container_cli ps --format=""{{.Names}}"" | grep haproxy)",2,2
openstack%2Frpm-packaging~master~Ia2dbb5aa5c9a4c527855bec9eeb5cc91e47d75dc,openstack/rpm-packaging,master,Ia2dbb5aa5c9a4c527855bec9eeb5cc91e47d75dc,tooz: update to 2.6.0,MERGED,2020-07-15 10:33:12.000000000,2020-07-22 07:46:11.000000000,2020-07-22 07:46:11.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 10:33:12.000000000', 'files': ['openstack/tooz/tooz.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/377bd087c92ddfaf59cc3ae5da86157d21d53666', 'message': 'tooz: update to 2.6.0\n\nChange-Id: Ia2dbb5aa5c9a4c527855bec9eeb5cc91e47d75dc\n'}]",0,741148,377bd087c92ddfaf59cc3ae5da86157d21d53666,11,7,1,6593,,,0,"tooz: update to 2.6.0

Change-Id: Ia2dbb5aa5c9a4c527855bec9eeb5cc91e47d75dc
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/48/741148/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/tooz/tooz.spec.j2'],1,377bd087c92ddfaf59cc3ae5da86157d21d53666,,{% set upstream_version = upstream_version('2.6.0') %},{% set upstream_version = upstream_version('2.5.1') %},1,1
openstack%2Frpm-packaging~master~I8393ce869d378330cb739fad4e25d4126fb16bf6,openstack/rpm-packaging,master,I8393ce869d378330cb739fad4e25d4126fb16bf6,ceilometermiddleware: update to 2.1.0,MERGED,2020-07-15 10:33:59.000000000,2020-07-22 07:46:10.000000000,2020-07-22 07:46:09.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 10:33:59.000000000', 'files': ['openstack/ceilometermiddleware/ceilometermiddleware.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/8e5696a44da5b2f522690c831307e183241c2ac7', 'message': 'ceilometermiddleware: update to 2.1.0\n\nChange-Id: I8393ce869d378330cb739fad4e25d4126fb16bf6\n'}]",0,741149,8e5696a44da5b2f522690c831307e183241c2ac7,11,7,1,6593,,,0,"ceilometermiddleware: update to 2.1.0

Change-Id: I8393ce869d378330cb739fad4e25d4126fb16bf6
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/49/741149/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/ceilometermiddleware/ceilometermiddleware.spec.j2'],1,8e5696a44da5b2f522690c831307e183241c2ac7,,{% set upstream_version = upstream_version('2.1.0') %},{% set upstream_version = upstream_version('2.0.0') %},1,1
openstack%2Fceilometer~master~I5d3eb04534afaeb556ddab4ef603a205745883b8,openstack/ceilometer,master,I5d3eb04534afaeb556ddab4ef603a205745883b8,Allow operations on Ceilometer dynamic pollster to reference the sample itself,MERGED,2020-05-29 15:50:15.000000000,2020-07-22 07:41:48.000000000,2020-07-22 07:40:14.000000000,"[{'_account_id': 4264}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 28356}]","[{'number': 1, 'created': '2020-05-29 15:50:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/2d5a7834aa8d5ada5f6bf71053bd253fa6cb93f9', 'message': 'Allow operations on Ceilometer dynamic pollster to reference the sample itself\n\nThis issue is to allow operators to create expressions that can reference the sample itself.\nCurrently, the expression is allowed only for fields in the sample, and not the sample itself.\n\nWe discovered this requirement when developing pollsters for Cinde;\nthe attribute `volume_image_metadata` is not returned in the API response when it does not exist,\ntherefore, we need a method to check if it exist before trying to retrieve it.\n\nChange-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8\n'}, {'number': 2, 'created': '2020-06-19 11:06:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/025abe5a6adb46e8c60db6dacad8534fe05d891e', 'message': 'Allow operations on Ceilometer dynamic pollster to reference the sample itself\n\nThis issue is to allow operators to create expressions that can reference the\nsample itself. Currently, the expression is allowed only for fields in the\nsample, and not the sample itself.\n\nWe discovered this requirement when developing pollsters for Cinder;\nthe attribute `volume_image_metadata` is not returned in the API response when\nit does not exist, therefore, we need a method to check if it exist before\ntrying to retrieve it.\n\nChange-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8\n'}, {'number': 3, 'created': '2020-06-20 17:46:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/46989d685f4ad3389f299256ef502ca5135059d3', 'message': 'Allow operations on Ceilometer dynamic pollster to reference the sample itself\n\nThis issue is to allow operators to create expressions that can reference the\nsample itself. Currently, the expression is allowed only for fields in the\nsample, and not the sample itself.\n\nWe discovered this requirement when developing pollsters for Cinder;\nthe attribute `volume_image_metadata` is not returned in the API response when\nit does not exist, therefore, we need a method to check if it exist before\ntrying to retrieve it.\n\nChange-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8\n'}, {'number': 4, 'created': '2020-06-20 19:03:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/f9399a8c2cf403bfa41fd14fdb946b33fdf96687', 'message': 'Allow operations on Ceilometer dynamic pollster to reference the sample itself\n\nThis issue is to allow operators to create expressions that can reference the\nsample itself. Currently, the expression is allowed only for fields in the\nsample, and not the sample itself.\n\nWe discovered this requirement when developing pollsters for Cinder;\nthe attribute `volume_image_metadata` is not returned in the API response when\nit does not exist, therefore, we need a method to check if it exist before\ntrying to retrieve it.\n\nChange-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8\n'}, {'number': 5, 'created': '2020-06-21 22:22:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/17a24189e9c0699ec4f90c0da6d466342fe411bf', 'message': 'Allow operations on Ceilometer dynamic pollster to reference the sample itself\n\nThis issue is to allow operators to create expressions that can reference the\nsample itself. Currently, the expression is allowed only for fields in the\nsample, and not the sample itself.\n\nWe discovered this requirement when developing pollsters for Cinder;\nthe attribute `volume_image_metadata` is not returned in the API response when\nit does not exist, therefore, we need a method to check if it exist before\ntrying to retrieve it.\n\nChange-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8\n'}, {'number': 6, 'created': '2020-06-23 11:28:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/b5b24891469255a4eda28e7fa2cace95b623c85a', 'message': 'Allow operations on Ceilometer dynamic pollster to reference the sample itself\n\nThis issue is to allow operators to create expressions that can reference the\nsample itself. Currently, the expression is allowed only for fields in the\nsample, and not the sample itself.\n\nWe discovered this requirement when developing pollsters for Cinder;\nthe attribute `volume_image_metadata` is not returned in the API response when\nit does not exist, therefore, we need a method to check if it exist before\ntrying to retrieve it.\n\nChange-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8\n'}, {'number': 7, 'created': '2020-07-22 02:47:25.000000000', 'files': ['doc/source/admin/telemetry-dynamic-pollster.rst', 'ceilometer/polling/dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_dynamic_pollster.py'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/51119ddc1c7a98674ac9216cbfb890b1a2dab6a2', 'message': 'Allow operations on Ceilometer dynamic pollster to reference the sample itself\n\nThis issue is to allow operators to create expressions that can reference the\nsample itself. Currently, the expression is allowed only for fields in the\nsample, and not the sample itself.\n\nWe discovered this requirement when developing pollsters for Cinder;\nthe attribute `volume_image_metadata` is not returned in the API response when\nit does not exist, therefore, we need a method to check if it exist before\ntrying to retrieve it.\n\nChange-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8\n'}]",4,731792,51119ddc1c7a98674ac9216cbfb890b1a2dab6a2,44,4,7,28356,,,0,"Allow operations on Ceilometer dynamic pollster to reference the sample itself

This issue is to allow operators to create expressions that can reference the
sample itself. Currently, the expression is allowed only for fields in the
sample, and not the sample itself.

We discovered this requirement when developing pollsters for Cinder;
the attribute `volume_image_metadata` is not returned in the API response when
it does not exist, therefore, we need a method to check if it exist before
trying to retrieve it.

Change-Id: I5d3eb04534afaeb556ddab4ef603a205745883b8
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/92/731792/5 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/telemetry-dynamic-pollster.rst', 'ceilometer/polling/dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_dynamic_pollster.py']",3,2d5a7834aa8d5ada5f6bf71053bd253fa6cb93f9,operation-reference-sample-upstream," def test_retrieve_attribute_self_reference_sample(self): key = "" . | value['key1']['subKey1'][0]['d'] if 'key1' in value else 0"" sub_value1 = [{""d"": 2}, {""g"": {""h"": ""val""}}] sub_value2 = [{""r"": 245}, {""h"": {""yu"": ""yu""}}] json_object = {""key1"": {""subKey1"": sub_value1}, ""key2"": {""subkey2"": sub_value2}} pollster = dynamic_pollster.DynamicPollster( self.pollster_definition_only_required_fields) returned_value = pollster.definitions.sample_extractor.\ retrieve_attribute_nested_value(json_object, key) self.assertEqual(2, returned_value) del json_object['key1'] returned_value = pollster.definitions.sample_extractor.\ retrieve_attribute_nested_value(json_object, key) self.assertEqual(0, returned_value)",,34,4
openstack%2Frpm-packaging~master~I6367f841f086bfd43a74da93fcb9c41acd804ce1,openstack/rpm-packaging,master,I6367f841f086bfd43a74da93fcb9c41acd804ce1,openstacksdk: update to 0.48.0,MERGED,2020-07-15 10:34:30.000000000,2020-07-22 07:38:57.000000000,2020-07-22 07:38:57.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 10:34:30.000000000', 'files': ['openstack/openstacksdk/openstacksdk.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/bbb5f24328be18ce18ae3ac08fda6cb5dfb5cc2e', 'message': 'openstacksdk: update to 0.48.0\n\nChange-Id: I6367f841f086bfd43a74da93fcb9c41acd804ce1\n'}]",0,741150,bbb5f24328be18ce18ae3ac08fda6cb5dfb5cc2e,11,7,1,6593,,,0,"openstacksdk: update to 0.48.0

Change-Id: I6367f841f086bfd43a74da93fcb9c41acd804ce1
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/50/741150/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/openstacksdk/openstacksdk.spec.j2'],1,bbb5f24328be18ce18ae3ac08fda6cb5dfb5cc2e,,{% set upstream_version = upstream_version('0.48.0') %},{% set upstream_version = upstream_version('0.46.0') %},1,1
openstack%2Frpm-packaging~master~I5f57bd5d1ab174c6c9415721729acea3568a7052,openstack/rpm-packaging,master,I5f57bd5d1ab174c6c9415721729acea3568a7052,python-masakariclient: switch to stestr,MERGED,2020-07-15 11:48:13.000000000,2020-07-22 07:33:58.000000000,2020-07-22 07:33:58.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 11:48:13.000000000', 'files': ['openstack/python-masakariclient/python-masakariclient.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/2885399652f943e06ffca08c7fa1217301c9b90c', 'message': 'python-masakariclient: switch to stestr\n\nThis was done upstream in https://review.opendev.org/#/c/665639/\n\nChange-Id: I5f57bd5d1ab174c6c9415721729acea3568a7052\n'}]",0,741159,2885399652f943e06ffca08c7fa1217301c9b90c,11,7,1,6593,,,0,"python-masakariclient: switch to stestr

This was done upstream in https://review.opendev.org/#/c/665639/

Change-Id: I5f57bd5d1ab174c6c9415721729acea3568a7052
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/59/741159/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/python-masakariclient/python-masakariclient.spec.j2'],1,2885399652f943e06ffca08c7fa1217301c9b90c,,BuildRequires: {{ py3('stestr') }}python3 -m stestr.cli run,BuildRequires: {{ py3('nose') }}BuildRequires: {{ py3('testrepository') }}find . -type f -name *.pyc -delete %if 0%{?suse_version} PYTHONPATH=%{buildroot}%{python3_sitelib} nosetests masakariclient/tests/unit %else PYTHONPATH=%{buildroot}%{python3_sitelib} nosetests-3 masakariclient/tests/unit %endif,2,8
openstack%2Frpm-packaging~master~I913843fcd95e0386e962d3635254808238842e89,openstack/rpm-packaging,master,I913843fcd95e0386e962d3635254808238842e89,python-mistralclient: Switch to using stestr,MERGED,2020-07-15 11:53:20.000000000,2020-07-22 07:33:23.000000000,2020-07-22 07:33:23.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 11:53:20.000000000', 'files': ['openstack/python-mistralclient/python-mistralclient.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/6589d847d877708b86a39c597c6a7d0ece4c6143', 'message': 'python-mistralclient: Switch to using stestr\n\nThis has been done upstream in https://review.opendev.org/#/c/569875/\n\nChange-Id: I913843fcd95e0386e962d3635254808238842e89\n'}]",0,741161,6589d847d877708b86a39c597c6a7d0ece4c6143,11,7,1,6593,,,0,"python-mistralclient: Switch to using stestr

This has been done upstream in https://review.opendev.org/#/c/569875/

Change-Id: I913843fcd95e0386e962d3635254808238842e89
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/61/741161/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/python-mistralclient/python-mistralclient.spec.j2'],1,6589d847d877708b86a39c597c6a7d0ece4c6143,,BuildRequires: {{ py3('stestr') }}python3 -m stestr.cli run,BuildRequires: {{ py3('nose') }}find . -type f -name *.pyc -delete %if 0%{?suse_version} PYTHONPATH=%{buildroot}%{python3_sitelib} nosetests mistralclient/tests/unit %else PYTHONPATH=%{buildroot}%{python3_sitelib} nosetests-3 mistralclient/tests/unit %endif,2,7
openstack%2Frpm-packaging~stable%2Ftrain~I5340910e5be568ad03c067b82092c5ab27bb2d57,openstack/rpm-packaging,stable/train,I5340910e5be568ad03c067b82092c5ab27bb2d57,Update ironic-lib train version to 2.21.2,MERGED,2020-07-15 10:22:04.000000000,2020-07-22 07:23:12.000000000,2020-07-22 07:23:12.000000000,"[{'_account_id': 6593}, {'_account_id': 13294}, {'_account_id': 17246}, {'_account_id': 19648}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 10:22:04.000000000', 'files': ['openstack/ironic-lib/ironic-lib.spec.j2'], 'web_link': 'https://opendev.org/openstack/rpm-packaging/commit/b6a6dc5ebdff3c5d106a9ac446d67d08d387f7df', 'message': 'Update ironic-lib train version to 2.21.2\n\nChange-Id: I5340910e5be568ad03c067b82092c5ab27bb2d57\n'}]",0,741138,b6a6dc5ebdff3c5d106a9ac446d67d08d387f7df,11,7,1,23851,,,0,"Update ironic-lib train version to 2.21.2

Change-Id: I5340910e5be568ad03c067b82092c5ab27bb2d57
",git fetch https://review.opendev.org/openstack/rpm-packaging refs/changes/38/741138/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/ironic-lib/ironic-lib.spec.j2'],1,b6a6dc5ebdff3c5d106a9ac446d67d08d387f7df,ironic-lib-train-update,{% set upstream_version = upstream_version('2.21.2') %},{% set upstream_version = upstream_version('2.21.1') %},1,1
openstack%2Fswift~master~I8b5b9b08087c045445d6fadf337ea0b206e2b755,openstack/swift,master,I8b5b9b08087c045445d6fadf337ea0b206e2b755,skip same suffixes sync when update_delete,NEW,2020-07-22 05:06:02.000000000,2020-07-22 06:10:27.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-22 05:06:02.000000000', 'files': ['swift/obj/replicator.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/580bbfc7b8a79ec18b9282aab559815375e2012a', 'message': 'skip same suffixes sync when update_delete\n\nOur Cluster have PB data and data increase fast,when scale node the rebalance is slow ,also have effect in network and disk io and cpu,rsync once maybe failure,we hope rebalance fast and have less load to Cluster.\n\nFor example,when three replicates cluter scale,this fix just sync more data to new node,the other two nodes just compare suffix hash and sync less rsync check，save bandwidth and lower effect to disk io and cpu.\n\nThe other situation is PB data cluster is not rebalance,we have to rebalance cluster many times when cluster level is 80%,we want reblance fast take time\n\nChange-Id: I8b5b9b08087c045445d6fadf337ea0b206e2b755\nCloses-Bug: #742197\n'}]",6,742342,580bbfc7b8a79ec18b9282aab559815375e2012a,2,1,1,32225,,,0,"skip same suffixes sync when update_delete

Our Cluster have PB data and data increase fast,when scale node the rebalance is slow ,also have effect in network and disk io and cpu,rsync once maybe failure,we hope rebalance fast and have less load to Cluster.

For example,when three replicates cluter scale,this fix just sync more data to new node,the other two nodes just compare suffix hash and sync less rsync check，save bandwidth and lower effect to disk io and cpu.

The other situation is PB data cluster is not rebalance,we have to rebalance cluster many times when cluster level is 80%,we want reblance fast take time

Change-Id: I8b5b9b08087c045445d6fadf337ea0b206e2b755
Closes-Bug: #742197
",git fetch https://review.opendev.org/openstack/swift refs/changes/42/742342/1 && git format-patch -1 --stdout FETCH_HEAD,['swift/obj/replicator.py'],1,580bbfc7b8a79ec18b9282aab559815375e2012a,742197," df_mgr = self._df_router[job['policy']] hashed, local_hash = tpool.execute( df_mgr._get_hashes, job['device'], job['partition'], job['policy'], do_listdir=_do_listdir( int(job['partition']), self.replication_cycle)) try: with Timeout(self.http_timeout): resp = http_connect( node['replication_ip'], node['replication_port'], node['device'], job['partition'], 'REPLICATE', '', headers=headers).getresponse() if resp.status == HTTP_INSUFFICIENT_STORAGE: self.logger.error( _('%(replication_ip)s/%(device)s ' 'responded as unmounted'), node) failure_devs_info.add((node['replication_ip'], node['device'])) continue if resp.status != HTTP_OK: self.logger.error(_(""Invalid response %(resp)s "" ""from %(ip)s""), {'resp': resp.status, 'ip': node['replication_ip']}) failure_devs_info.add((node['replication_ip'], node['device'])) continue remote_hash = pickle.loads(resp.read()) del resp except (Exception, Timeout): node_suffixes = suffixes if not node_suffixes: continue"," hashed, local_hash = tpool_reraise( get_hashes, job['path'], do_listdir=(self.replication_count % 10) == 0, reclaim_age=self.reclaim_age) remote_hash={} with Timeout(self.http_timeout): resp = http_connect( node['replication_ip'], node['replication_port'], node['device'], job['partition'], 'REPLICATE', '', headers=headers).getresponse() if resp.status == HTTP_INSUFFICIENT_STORAGE: self.logger.error( _('%(replication_ip)s/%(device)s ' 'responded as unmounted'), node) attempts_left += 1 failure_devs_info.add((node['replication_ip'], node['device'])) continue if resp.status != HTTP_OK: self.logger.error(_(""Invalid response %(resp)s "" ""from %(ip)s""), {'resp': resp.status, 'ip': node['replication_ip']}) failure_devs_info.add((node['replication_ip'], node['device'])) continue remote_hash = pickle.loads(resp.read()) del resp if remote_hash: if not node_suffixes: continue else: node_suffixes=suffixes",34,33
openstack%2Fnetworking-l2gw~stable%2Frocky~I1bf048df49c385a92fea55f99bd0a7c4283960cf,openstack/networking-l2gw,stable/rocky,I1bf048df49c385a92fea55f99bd0a7c4283960cf,Retire networking-l2gw: remove zuul jobs,MERGED,2020-07-16 07:56:36.000000000,2020-07-22 05:40:51.000000000,2020-07-22 05:40:51.000000000,"[{'_account_id': 841}, {'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-16 07:56:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-l2gw/commit/857d321344e4481cab10c5cfe685b08daaab6da2', 'message': 'Retire networking-l2gw: remove zuul jobs\n\nnetworking-l2gw is not a neutron stadium project, and not governed by\nopenstack, so it is time to move it to x/ namespace. As a first step\ndisable zuul jobs to avoid collisions when the new repository will be\ncreated as x/networking-l2gw.\n\nChange-Id: I1bf048df49c385a92fea55f99bd0a7c4283960cf\n(cherry picked from commit 454cf61f8a191fc25a1d85d7be5df81eab405c54)\n(cherry picked from commit 5f692dcca0a8b7cb60c9d250dbe3fa522d59425c)\n(cherry picked from commit 243ea9820f539694b7bb3f2e9eb91eb98cb6ef66)\n'}, {'number': 2, 'created': '2020-07-16 08:04:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-l2gw/commit/39ab511f5dbf7b1d1e512eed71695a2f263bd659', 'message': 'Retire networking-l2gw: remove zuul jobs\n\nnetworking-l2gw is not a neutron stadium project, and not governed by\nopenstack, so it is time to move it to x/ namespace. As a first step\ndisable zuul jobs to avoid collisions when the new repository will be\ncreated as x/networking-l2gw.\n\nChange-Id: I1bf048df49c385a92fea55f99bd0a7c4283960cf\n(cherry picked from commit 454cf61f8a191fc25a1d85d7be5df81eab405c54)\n(cherry picked from commit 5f692dcca0a8b7cb60c9d250dbe3fa522d59425c)\n(cherry picked from commit 243ea9820f539694b7bb3f2e9eb91eb98cb6ef66)\n'}, {'number': 3, 'created': '2020-07-16 08:05:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-l2gw/commit/017ac1df983a2dda88fdd1eaf895ed3ad5373854', 'message': 'Retire networking-l2gw: remove zuul jobs\n\nnetworking-l2gw is not a neutron stadium project, and not governed by\nopenstack, so it is time to move it to x/ namespace. As a first step\ndisable zuul jobs to avoid collisions when the new repository will be\ncreated as x/networking-l2gw.\n\nConflicts: .zuul.yaml, on rocky there were no templates, and as the\nmain goal is to remove networking-l2gw-tempest-plugin those jobs are\nremoved.\n\nChange-Id: I1bf048df49c385a92fea55f99bd0a7c4283960cf\n(cherry picked from commit 454cf61f8a191fc25a1d85d7be5df81eab405c54)\n(cherry picked from commit 5f692dcca0a8b7cb60c9d250dbe3fa522d59425c)\n(cherry picked from commit 243ea9820f539694b7bb3f2e9eb91eb98cb6ef66)\n'}, {'number': 4, 'created': '2020-07-17 07:41:59.000000000', 'files': ['bindep.txt', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/networking-l2gw/commit/4074c22b0af71d8e8ca92304291143120dcedcc0', 'message': 'Retire networking-l2gw: remove zuul jobs\n\nnetworking-l2gw is not a neutron stadium project, and not governed by\nopenstack, so it is time to move it to x/ namespace. As a first step\ndisable zuul jobs to avoid collisions when the new repository will be\ncreated as x/networking-l2gw.\n\nConflicts: .zuul.yaml, on rocky there were no templates, and as the\nmain goal is to remove networking-l2gw-tempest-plugin those jobs are\nremoved.\nAdded bindep.txt to make sure that mysql and other things are in place.\n\nChange-Id: I1bf048df49c385a92fea55f99bd0a7c4283960cf\n(cherry picked from commit 454cf61f8a191fc25a1d85d7be5df81eab405c54)\n(cherry picked from commit 5f692dcca0a8b7cb60c9d250dbe3fa522d59425c)\n(cherry picked from commit 243ea9820f539694b7bb3f2e9eb91eb98cb6ef66)\n'}]",0,741396,4074c22b0af71d8e8ca92304291143120dcedcc0,10,3,4,8313,,,0,"Retire networking-l2gw: remove zuul jobs

networking-l2gw is not a neutron stadium project, and not governed by
openstack, so it is time to move it to x/ namespace. As a first step
disable zuul jobs to avoid collisions when the new repository will be
created as x/networking-l2gw.

Conflicts: .zuul.yaml, on rocky there were no templates, and as the
main goal is to remove networking-l2gw-tempest-plugin those jobs are
removed.
Added bindep.txt to make sure that mysql and other things are in place.

Change-Id: I1bf048df49c385a92fea55f99bd0a7c4283960cf
(cherry picked from commit 454cf61f8a191fc25a1d85d7be5df81eab405c54)
(cherry picked from commit 5f692dcca0a8b7cb60c9d250dbe3fa522d59425c)
(cherry picked from commit 243ea9820f539694b7bb3f2e9eb91eb98cb6ef66)
",git fetch https://review.opendev.org/openstack/networking-l2gw refs/changes/96/741396/3 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,857d321344e4481cab10c5cfe685b08daaab6da2,complete-retirement-networking-l2gw-stable/train-stable/stein-stable/rocky, templates: - check-requirements - openstack-python-jobs-neutron - openstack-python36-jobs-neutron - build-openstack-docs-pti , check: jobs: - networking-l2gw-tempest-dummy - l2gw-tox-lower-constraints gate: jobs: - networking-l2gw-tempest-dummy - l2gw-tox-lower-constraints - job: name: l2gw-tox-lower-constraints parent: openstack-tox-lower-constraints required-projects: - openstack/neutron,5,13
openstack%2Fopenstack-helm-images~master~I525df976f9810e61d4fc49cf772736aa21dba510,openstack/openstack-helm-images,master,I525df976f9810e61d4fc49cf772736aa21dba510,Disable build of openSUSE base images and uplift ceph packages,MERGED,2020-07-18 23:12:58.000000000,2020-07-22 05:27:54.000000000,2020-07-22 05:24:27.000000000,"[{'_account_id': 8898}, {'_account_id': 16374}, {'_account_id': 17119}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-18 23:12:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/03606c734caa2084a3d01db9bb8967faaa4f6fbc', 'message': 'Disable build of openSUSE base images\n\nRelated code will be removed in subsequent commit later if not\nmaintained.\n\nChange-Id: I525df976f9810e61d4fc49cf772736aa21dba510\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2020-07-22 00:47:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/47903444d41e6fa784dbff12976172289b40413d', 'message': 'Disable build of openSUSE base images\n\nRelated code will be removed in subsequent commit later if not\nmaintained.\n\nChange-Id: I525df976f9810e61d4fc49cf772736aa21dba510\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2020-07-22 00:47:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/8c3a3b05bb002d4bdac4f141fa68ac3e3243585b', 'message': 'Disable build of openSUSE base images\n\nRelated code will be removed in subsequent commit later if not\nmaintained.\n\nChange-Id: I525df976f9810e61d4fc49cf772736aa21dba510\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 4, 'created': '2020-07-22 01:11:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/8ed4a2f3b0cc601e701fbaf849b253e3896c988c', 'message': 'Disable build of openSUSE base images and uplift ceph packages\n\nRelated code will be removed in subsequent commit later if not maintained.\n\nCeph updated to 14.2.10-1.0~bionic as previous one is not available in\nrepos.\n\nPuting these two together to address gates issue.\n\nChange-Id: I525df976f9810e61d4fc49cf772736aa21dba510\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 5, 'created': '2020-07-22 01:28:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/6b88b0040659ef39f85471eb4965feb78d4b9610', 'message': 'Disable build of openSUSE base images and uplift ceph packages\n\nRelated code will be removed in subsequent commit later if not maintained.\n\nCeph updated to 14.2.10-1.0~bionic as previous one is not available in\nrepos.\n\nPuting these two together to address gates issue.\n\nChange-Id: I525df976f9810e61d4fc49cf772736aa21dba510\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 6, 'created': '2020-07-22 02:22:06.000000000', 'files': ['zuul.d/gate-utils.yaml', 'zuul.d/tempest.yaml', 'zuul.d/libvirt.yaml', 'ceph-cephfs-provisioner/Dockerfile.ubuntu_bionic', 'ceph-daemon/Dockerfile.ubuntu_bionic', 'zuul.d/ceph-config-helper.yaml', 'zuul.d/osh-selenium.yaml', 'ceph-utility/Dockerfile.ubuntu_bionic', 'ceph-config-helper/Dockerfile.ubuntu_bionic', 'ceph-rbd-provisioner/Dockerfile.ubuntu_bionic', 'zuul.d/openstack-loci.yaml', 'zuul.d/openvswitch.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/43c4c13b2aa6b4eeed8ccaac2cfe4af64ccd00f4', 'message': 'Disable build of openSUSE base images and uplift ceph packages\n\nRelated code will be removed in subsequent commit later if not maintained.\n\nCeph updated to 14.2.10-1.0~bionic as previous one is not available in\nrepos.\n\nPutting these two together to address gates issue.\n\nChange-Id: I525df976f9810e61d4fc49cf772736aa21dba510\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",1,741824,43c4c13b2aa6b4eeed8ccaac2cfe4af64ccd00f4,21,9,6,8863,,,0,"Disable build of openSUSE base images and uplift ceph packages

Related code will be removed in subsequent commit later if not maintained.

Ceph updated to 14.2.10-1.0~bionic as previous one is not available in
repos.

Putting these two together to address gates issue.

Change-Id: I525df976f9810e61d4fc49cf772736aa21dba510
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/24/741824/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/gate-utils.yaml', 'zuul.d/tempest.yaml', 'zuul.d/libvirt.yaml', 'zuul.d/ceph-config-helper.yaml', 'zuul.d/osh-selenium.yaml', 'zuul.d/openstack-loci.yaml', 'zuul.d/openvswitch.yaml']",7,03606c734caa2084a3d01db9bb8967faaa4f6fbc,," #- context: openvswitch # repository: openstackhelm/openvswitch # tags: # - latest-opensuse_15 # - ""opensuse_15-{{ currentdate }}"" # dockerfile: Dockerfile.suse_15 #- context: openvswitch # repository: openstackhelm/openvswitch # tags: # - latest-opensuse_15-dpdk # - ""opensuse_15-dpdk-{{ currentdate }}"" # dockerfile: Dockerfile.suse_15-dpdk"," - context: openvswitch repository: openstackhelm/openvswitch tags: - latest-opensuse_15 - ""opensuse_15-{{ currentdate }}"" dockerfile: Dockerfile.suse_15 - context: openvswitch repository: openstackhelm/openvswitch tags: - latest-opensuse_15-dpdk - ""opensuse_15-dpdk-{{ currentdate }}"" dockerfile: Dockerfile.suse_15-dpdk",42,47
openstack%2Fopenstack-helm-images~master~I61e03e06afffcba53233991cdbf9fb8b27d58fc5,openstack/openstack-helm-images,master,I61e03e06afffcba53233991cdbf9fb8b27d58fc5,[test],ABANDONED,2020-07-22 05:22:44.000000000,2020-07-22 05:23:23.000000000,,[],"[{'number': 1, 'created': '2020-07-22 05:22:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/23439b47eaa134f9f2c89aa3ceb6fe21d6ab9f7e', 'message': '[test]\n\nDepends-On: https://review.opendev.org/#/c/742336/\nChange-Id: I61e03e06afffcba53233991cdbf9fb8b27d58fc5\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,742343,23439b47eaa134f9f2c89aa3ceb6fe21d6ab9f7e,2,0,1,8863,,,0,"[test]

Depends-On: https://review.opendev.org/#/c/742336/
Change-Id: I61e03e06afffcba53233991cdbf9fb8b27d58fc5
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/43/742343/1 && git format-patch -1 --stdout FETCH_HEAD,[],0,23439b47eaa134f9f2c89aa3ceb6fe21d6ab9f7e,,,,0,0
openstack%2Fpython-openstackclient~stable%2Fqueens~Id702b91f919f5f6bedda0f707a92257347303de6,openstack/python-openstackclient,stable/queens,Id702b91f919f5f6bedda0f707a92257347303de6,[stable-only] Use python2 for functional tests,ABANDONED,2020-03-19 12:33:59.000000000,2020-07-22 05:17:09.000000000,,"[{'_account_id': 1736}, {'_account_id': 11904}, {'_account_id': 19234}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 31245}]","[{'number': 1, 'created': '2020-03-19 12:33:59.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/6b30a398719090280013c266b85cbda98a013114', 'message': '[stable-only] Use python2 for functional tests\n\nChange-Id: Id702b91f919f5f6bedda0f707a92257347303de6\n'}]",0,713865,6b30a398719090280013c266b85cbda98a013114,9,6,1,17685,,,0,"[stable-only] Use python2 for functional tests

Change-Id: Id702b91f919f5f6bedda0f707a92257347303de6
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/65/713865/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,6b30a398719090280013c266b85cbda98a013114,,basepython = python2,,1,0
openstack%2Fswift~master~I87fe3477d8b7ef186421ef2d08bc3b205c18a0c1,openstack/swift,master,I87fe3477d8b7ef186421ef2d08bc3b205c18a0c1,py3: Stop munging RAW_PATH_INFO,MERGED,2020-06-24 18:01:56.000000000,2020-07-22 05:08:30.000000000,2020-07-22 05:07:03.000000000,"[{'_account_id': 1179}, {'_account_id': 15343}, {'_account_id': 22348}, {'_account_id': 32029}, {'_account_id': 32210}]","[{'number': 1, 'created': '2020-06-24 18:01:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/99efb58c877214322103426ac8792ab9c5619ee7', 'message': ""py3: Stop munging RAW_PATH_INFO\n\nWe rely on having byte-accurate representations of the request path\nas-seen-on-the-wire to compute signatures in s3api; the unquoting /\nrequoting madness to make non-ascii paths work with python's stdlib can\nlead to erroneous SignatureDoesNotMatch responses.\n\nChange-Id: I87fe3477d8b7ef186421ef2d08bc3b205c18a0c1\nCloses-Bug: #1884991\n""}, {'number': 2, 'created': '2020-06-27 00:16:52.000000000', 'files': ['swift/common/wsgi.py', 'test/unit/common/test_wsgi.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/7753eff66233db82948227c7f592fb0c463a0aef', 'message': ""py3: Stop munging RAW_PATH_INFO\n\nWe rely on having byte-accurate representations of the request path\nas-seen-on-the-wire to compute signatures in s3api; the unquoting /\nrequoting madness to make non-ascii paths work with python's stdlib can\nlead to erroneous SignatureDoesNotMatch responses.\n\nChange-Id: I87fe3477d8b7ef186421ef2d08bc3b205c18a0c1\nCloses-Bug: #1884991\n""}]",4,737856,7753eff66233db82948227c7f592fb0c463a0aef,16,5,2,15343,,,0,"py3: Stop munging RAW_PATH_INFO

We rely on having byte-accurate representations of the request path
as-seen-on-the-wire to compute signatures in s3api; the unquoting /
requoting madness to make non-ascii paths work with python's stdlib can
lead to erroneous SignatureDoesNotMatch responses.

Change-Id: I87fe3477d8b7ef186421ef2d08bc3b205c18a0c1
Closes-Bug: #1884991
",git fetch https://review.opendev.org/openstack/swift refs/changes/56/737856/2 && git format-patch -1 --stdout FETCH_HEAD,['swift/common/wsgi.py'],1,99efb58c877214322103426ac8792ab9c5619ee7,bug/1884991," # Need to track the bytes-on-the-wire for S3 signatures -- eventlet # would do it for us, but since we rewrite the path on py3, we need to # fix it ourselves later. self.__raw_path_info = None # properly quoted. self.__raw_path_info = path environ['RAW_PATH_INFO'] = bytes_to_wsgi( self.__raw_path_info)"," # properly quoted. py2 will do the right thing without this, but it # doesn't hurt to re-write the request line like this and it # simplifies testing.",9,3
openstack%2Fironic~master~Ie74472969c75994794dc0ca19bbe7cfd395855c9,openstack/ironic,master,Ie74472969c75994794dc0ca19bbe7cfd395855c9,Iso booting via redfish virtual media,MERGED,2020-05-12 23:19:57.000000000,2020-07-22 05:04:39.000000000,2020-07-22 04:55:59.000000000,"[{'_account_id': 10239}, {'_account_id': 11076}, {'_account_id': 11655}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 30100}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-05-12 23:19:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/de9cb5e1b3d823bb9d85260d57673231c99a478e', 'message': 'WIP Iso booting via redfish virtual media\n\nChange-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9\n'}, {'number': 2, 'created': '2020-05-20 01:27:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/2ae1617cd6763bb9026957aabab770346464ea6f', 'message': 'WIP Iso booting via redfish virtual media\n\nChange-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9\n'}, {'number': 3, 'created': '2020-05-21 20:47:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/e0655b1a24e5fa2977ff4991ca378e2aae88d9c3', 'message': 'Iso booting via redfish virtual media\n\nAdds support to signal a pass-through request to the\nredfish-virtual-media boot interface so a user can supply\na boot ISO to boot the machine.\n\nStory: 2007633\nTask: 39823\n\nChange-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9\n'}, {'number': 4, 'created': '2020-06-01 16:32:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/4b0718fd381eb00e800a63447f93534818b5d49f', 'message': 'Iso booting via redfish virtual media\n\nAdds support to signal a pass-through request to the\nredfish-virtual-media boot interface so a user can supply\na boot ISO to boot the machine.\n\nTested on an HPE Edgeline e910 series machine using the\n``redifhs-virtual-media`` boot interface.\n\nStory: 2007633\nTask: 39823\n\nChange-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9\n'}, {'number': 5, 'created': '2020-06-15 22:04:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/3eaa2e91e2d84d8fbdca8a853d4d5f4de0bc8dea', 'message': 'Iso booting via redfish virtual media\n\nAdds support to signal a pass-through request to the\nredfish-virtual-media boot interface so a user can supply\na boot ISO to boot the machine.\n\nTested on an HPE Edgeline e910 series machine using the\n``redfish-virtual-media`` boot interface.\n\nStory: 2007633\nTask: 39823\n\nChange-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9\n'}, {'number': 6, 'created': '2020-07-02 21:18:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8a159fd98fd16e8f361954c00ad4298cf0574fa2', 'message': 'Iso booting via redfish virtual media\n\nAdds support to signal a pass-through request to the\nredfish-virtual-media boot interface so a user can supply\na boot ISO to boot the machine.\n\nTested on an HPE Edgeline e910 series machine using the\n``redfish-virtual-media`` boot interface.\n\nStory: 2007633\nTask: 39823\n\nChange-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9\n'}, {'number': 7, 'created': '2020-07-10 15:47:14.000000000', 'files': ['ironic/tests/unit/common/test_images.py', 'doc/source/admin/drivers/redfish.rst', 'ironic/drivers/modules/deploy_utils.py', 'releasenotes/notes/add-redfish-boot_iso-pass-through-8a6f4d0c98ada1d5.yaml', 'ironic/tests/unit/drivers/modules/redfish/test_boot.py', 'ironic/common/images.py', 'ironic/drivers/modules/redfish/boot.py', 'ironic/tests/unit/drivers/modules/test_deploy_utils.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/bd0033611d5c51c10ce3c6f23c960d0b8e8e0feb', 'message': 'Iso booting via redfish virtual media\n\nAdds support to signal a pass-through request to the\nredfish-virtual-media boot interface so a user can supply\na boot ISO to boot the machine.\n\nTested on an HPE Edgeline e910 series machine using the\n``redfish-virtual-media`` boot interface.\n\nStory: 2007633\nTask: 39823\n\nChange-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9\n'}]",19,727480,bd0033611d5c51c10ce3c6f23c960d0b8e8e0feb,60,8,7,11655,,,0,"Iso booting via redfish virtual media

Adds support to signal a pass-through request to the
redfish-virtual-media boot interface so a user can supply
a boot ISO to boot the machine.

Tested on an HPE Edgeline e910 series machine using the
``redfish-virtual-media`` boot interface.

Story: 2007633
Task: 39823

Change-Id: Ie74472969c75994794dc0ca19bbe7cfd395855c9
",git fetch https://review.opendev.org/openstack/ironic refs/changes/80/727480/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/drivers/modules/deploy_utils.py', 'ironic/tests/unit/drivers/modules/redfish/test_boot.py', 'ironic/common/images.py', 'ironic/drivers/modules/redfish/boot.py']",4,de9cb5e1b3d823bb9d85260d57673231c99a478e,727480," root_uuid=None, params=None, base_iso=None): if (not kernel_href or not ramdisk_href) and not base_iso: ""Unable to find kernel, ramdisk for "" ""building ISO, or explicit ISO for %(node)s"") % # NOTE(TheJulia): Until we support modifying a base iso, most of # this logic actually does nothing in the end. But it should! # FIXME(TheJulia): marking conditional based on base_iso # Once we support injection, we should consider this. if configdrive and not base_iso: boot_mode=boot_mode, base_iso=base_iso) # TODO(TheJulia): At some point we should support something like # boot_iso for the deploy interface, perhaps when we support config # injection. base_iso = node.instance_info.get('boot_iso') if (not kernel_href or not ramdisk_href) and not base_iso: if (not kernel_href or not ramdisk_href) and not base_iso: root_uuid=root_uuid, base_iso=base_iso)"," root_uuid=None, params=None): if not kernel_href or not ramdisk_href: ""Unable to find kernel or ramdisk for "" ""building ISO for %(node)s"") % if configdrive: boot_mode=boot_mode) if not kernel_href or not ramdisk_href: if not kernel_href or not ramdisk_href: root_uuid=root_uuid)",119,24
openstack%2Fswift~stable%2Ftrain~I6eda54ccd2792effadb334ce9324887132b62b6f,openstack/swift,stable/train,I6eda54ccd2792effadb334ce9324887132b62b6f,Use latest pip in gate jobs,MERGED,2020-07-21 22:53:47.000000000,2020-07-22 04:49:52.000000000,2020-07-22 04:48:27.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-21 22:53:47.000000000', 'files': ['tools/playbooks/common/install_dependencies.yaml'], 'web_link': 'https://opendev.org/openstack/swift/commit/498454a13931f93c8f42d1df149d15bb1d22141f', 'message': ""Use latest pip in gate jobs\n\nWe've seen failures with probe tests lately where dnspython 2.0.0 is\ngetting installed even though it doesn't support py2 anymore. I think\nusing latest pip should be better about noticing that and installing the\nlast 1.x release intead?\n\nChange-Id: I6eda54ccd2792effadb334ce9324887132b62b6f\n(cherry picked from commit 1c91547643f9c85f152d1d8c15431fec8334e214)\n""}]",0,742305,498454a13931f93c8f42d1df149d15bb1d22141f,8,3,1,15343,,,0,"Use latest pip in gate jobs

We've seen failures with probe tests lately where dnspython 2.0.0 is
getting installed even though it doesn't support py2 anymore. I think
using latest pip should be better about noticing that and installing the
last 1.x release intead?

Change-Id: I6eda54ccd2792effadb334ce9324887132b62b6f
(cherry picked from commit 1c91547643f9c85f152d1d8c15431fec8334e214)
",git fetch https://review.opendev.org/openstack/swift refs/changes/05/742305/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/playbooks/common/install_dependencies.yaml'],1,498454a13931f93c8f42d1df149d15bb1d22141f,, - name: upgrade pip pip: name: pip extra_args: --upgrade ,,5,0
openstack%2Fcinder~stable%2Ftrain~I88c5afacff5f1f780c2dc850e3af417b1b081592,openstack/cinder,stable/train,I88c5afacff5f1f780c2dc850e3af417b1b081592,Kaminario: Fix unique_fqdn_network option,MERGED,2020-07-20 06:32:32.000000000,2020-07-22 04:49:42.000000000,2020-07-21 17:59:16.000000000,"[{'_account_id': 9535}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 15670}, {'_account_id': 19933}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 28801}, {'_account_id': 29122}, {'_account_id': 31868}]","[{'number': 1, 'created': '2020-07-20 06:32:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/e99aa0e2af1c4354f002a178fb97836015fc422e', 'message': 'Kaminario: Fix unique_fqdn_network option\n\nThe Kaminario driver used to accept the unique_fqdn_network\nconfiguration option in the specific driver section, but when we moved\nthis option to be an option also used by 3PAR we introduced a regression\nwhere the parameter was now only used if it was defined in the shared\nconfiguration group.\n\nThis patch fixes this and makes it possible for the option to be defined\nin the shared configuration group as well as the driver specific\nsection.\n\nConflicts:\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/hpe/hpe_3par_fc.py\n\tcinder/volume/drivers/hpe/hpe_3par_iscsi.py\n\tdoc/source/configuration/block-storage/drivers/hpe-3par-driver.rst\n\nCloses-Bug: #1886042\nChange-Id: I88c5afacff5f1f780c2dc850e3af417b1b081592\n(cherry picked from commit 53504f82a53146151935e6aac301a41e2b387623)\n'}, {'number': 2, 'created': '2020-07-20 12:56:50.000000000', 'files': ['doc/source/configuration/block-storage/drivers/hpe-3par-driver.rst', 'cinder/test.py', 'releasenotes/notes/fix-kaminario-unique_fqdn_network-ecde36f614c30733.yaml', 'cinder/volume/drivers/hpe/hpe_3par_iscsi.py', 'cinder/tests/unit/volume/drivers/test_kaminario.py', 'cinder/volume/drivers/kaminario/kaminario_common.py', 'cinder/volume/drivers/hpe/hpe_3par_fc.py', 'cinder/tests/unit/volume/drivers/hpe/test_hpe3par.py', 'cinder/volume/drivers/hpe/hpe_3par_common.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/039b2bfd64bebc011ee9debe8962c8340db37b69', 'message': 'Kaminario: Fix unique_fqdn_network option\n\nThe Kaminario driver used to accept the unique_fqdn_network\nconfiguration option in the specific driver section, but when we moved\nthis option to be an option also used by 3PAR we introduced a regression\nwhere the parameter was now only used if it was defined in the shared\nconfiguration group.\n\nThis patch fixes this and makes it possible for the option to be defined\nin the shared configuration group as well as the driver specific\nsection.\n\nConflicts:\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\nCloses-Bug: #1886042\nChange-Id: I88c5afacff5f1f780c2dc850e3af417b1b081592\n(cherry picked from commit 53504f82a53146151935e6aac301a41e2b387623)\n'}]",0,741879,039b2bfd64bebc011ee9debe8962c8340db37b69,50,17,2,29122,,,0,"Kaminario: Fix unique_fqdn_network option

The Kaminario driver used to accept the unique_fqdn_network
configuration option in the specific driver section, but when we moved
this option to be an option also used by 3PAR we introduced a regression
where the parameter was now only used if it was defined in the shared
configuration group.

This patch fixes this and makes it possible for the option to be defined
in the shared configuration group as well as the driver specific
section.

Conflicts:
	cinder/volume/drivers/hpe/hpe_3par_common.py

Closes-Bug: #1886042
Change-Id: I88c5afacff5f1f780c2dc850e3af417b1b081592
(cherry picked from commit 53504f82a53146151935e6aac301a41e2b387623)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/79/741879/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/configuration/block-storage/drivers/hpe-3par-driver.rst', 'cinder/test.py', 'releasenotes/notes/fix-kaminario-unique_fqdn_network-ecde36f614c30733.yaml', 'cinder/volume/drivers/hpe/hpe_3par_iscsi.py', 'cinder/tests/unit/volume/drivers/test_kaminario.py', 'cinder/volume/drivers/hpe/hpe_3par_fc.py', 'cinder/tests/unit/volume/drivers/hpe/test_hpe3par.py', 'cinder/volume/drivers/hpe/hpe_3par_common.py']",8,e99aa0e2af1c4354f002a178fb97836015fc422e,bug/1834695," def _safe_hostname(self, connector, configuration): hostname = connector['host'] unique_fqdn_network = configuration.unique_fqdn_network if(not unique_fqdn_network and connector.get('initiator')): iqn = connector.get('initiator') iqn = iqn.replace("":"", ""-"") return iqn[::-1][:31] else: try: index = hostname.index('.') except ValueError: # couldn't find it index = len(hostname) # we'll just chop this off for now. if index > 31: index = 31 return hostname[:index]"," def _safe_hostname(self, hostname): try: index = hostname.index('.') except ValueError: # couldn't find it index = len(hostname) # we'll just chop this off for now. if index > 31: index = 31 return hostname[:index]",134,24
openstack%2Fswift~stable%2Fussuri~I6eda54ccd2792effadb334ce9324887132b62b6f,openstack/swift,stable/ussuri,I6eda54ccd2792effadb334ce9324887132b62b6f,Use latest pip in gate jobs,MERGED,2020-07-21 22:53:41.000000000,2020-07-22 04:49:33.000000000,2020-07-22 04:48:24.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-21 22:53:41.000000000', 'files': ['tools/playbooks/common/install_dependencies.yaml'], 'web_link': 'https://opendev.org/openstack/swift/commit/2e53fa8ed30a227c9ea1f60bc8893ea7ae9fab3d', 'message': ""Use latest pip in gate jobs\n\nWe've seen failures with probe tests lately where dnspython 2.0.0 is\ngetting installed even though it doesn't support py2 anymore. I think\nusing latest pip should be better about noticing that and installing the\nlast 1.x release intead?\n\nChange-Id: I6eda54ccd2792effadb334ce9324887132b62b6f\n(cherry picked from commit 1c91547643f9c85f152d1d8c15431fec8334e214)\n""}]",0,742304,2e53fa8ed30a227c9ea1f60bc8893ea7ae9fab3d,9,3,1,15343,,,0,"Use latest pip in gate jobs

We've seen failures with probe tests lately where dnspython 2.0.0 is
getting installed even though it doesn't support py2 anymore. I think
using latest pip should be better about noticing that and installing the
last 1.x release intead?

Change-Id: I6eda54ccd2792effadb334ce9324887132b62b6f
(cherry picked from commit 1c91547643f9c85f152d1d8c15431fec8334e214)
",git fetch https://review.opendev.org/openstack/swift refs/changes/04/742304/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/playbooks/common/install_dependencies.yaml'],1,2e53fa8ed30a227c9ea1f60bc8893ea7ae9fab3d,, - name: upgrade pip pip: name: pip extra_args: --upgrade ,,5,0
openstack%2Ftripleo-ci~master~I2240656762770daa75f7b0501ccc08866e1c9412,openstack/tripleo-ci,master,I2240656762770daa75f7b0501ccc08866e1c9412,Disable ubi8 job on train,MERGED,2020-07-21 14:26:25.000000000,2020-07-22 04:31:03.000000000,2020-07-22 04:31:03.000000000,"[{'_account_id': 9592}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 14:26:25.000000000', 'files': ['zuul.d/build-containers.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/f0cb940efada3d9e2bcce33b48bd0ac4dec5896d', 'message': ""Disable ubi8 job on train\n\nFor now, we haven't backported enough patches to have this job working.\nWe'll enable it when https://review.opendev.org/#/c/740095 will be\nmerged.\n\nChange-Id: I2240656762770daa75f7b0501ccc08866e1c9412\n""}]",0,742207,f0cb940efada3d9e2bcce33b48bd0ac4dec5896d,9,3,1,3153,,,0,"Disable ubi8 job on train

For now, we haven't backported enough patches to have this job working.
We'll enable it when https://review.opendev.org/#/c/740095 will be
merged.

Change-Id: I2240656762770daa75f7b0501ccc08866e1c9412
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/07/742207/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/build-containers.yaml'],1,f0cb940efada3d9e2bcce33b48bd0ac4dec5896d,tripleo-build-containers-jobs, branches: ^(?!stable/(pike|queens|rocky|stein|train)).*$, branches: ^(?!stable/(pike|queens|rocky|stein)).*$,1,1
openstack%2Ftripleo-image-elements~master~I181cf4dc0c0976833e39e4df78a7cff184f0f0b2,openstack/tripleo-image-elements,master,I181cf4dc0c0976833e39e4df78a7cff184f0f0b2,Move partition handling to overcloud-partition / overcloud-partition-uefi,MERGED,2020-07-15 21:11:55.000000000,2020-07-22 04:31:02.000000000,2020-07-22 04:31:02.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-07-15 21:11:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-image-elements/commit/4465f093e8f548c44717b7d673ffa0b500740490', 'message': 'Move partition handling to overcloud-partition / overcloud-partition-uefi\n\nMove partition handling to overcloud-partition / overcloud-partition-uefi\nas whole-disk images with kernel-rt would be impossible to create due to\ndependencies between kernel-rt and kdump/kexec-tools.   We need to be able\nto create whole-disk image while some package should not be uninstalled.\n\nChange-Id: I181cf4dc0c0976833e39e4df78a7cff184f0f0b2\n'}, {'number': 2, 'created': '2020-07-21 14:54:51.000000000', 'files': ['elements/overcloud-partition-uefi/element-deps', 'elements/overcloud-secure/element-deps', 'elements/overcloud-secure-uefi/package-installs.yaml', 'elements/overcloud-partition/element-deps', 'elements/overcloud-secure-uefi/README.rst', 'elements/overcloud-secure/README.rst', 'elements/overcloud-secure-uefi/element-deps', 'elements/overcloud-partition-uefi/block-device-default.yaml', 'elements/overcloud-partition/block-device-default.yaml', 'elements/overcloud-partition-uefi/README.rst', 'elements/overcloud-partition/README.rst'], 'web_link': 'https://opendev.org/openstack/tripleo-image-elements/commit/66d1d0beba1c318ebdf1df5d3678acb1913103e2', 'message': 'Move partition handling to overcloud-partition / overcloud-partition-uefi\n\nMove partition handling to overcloud-partition / overcloud-partition-uefi\nas whole-disk images with kernel-rt would be impossible to create due to\ndependencies between kernel-rt and kdump/kexec-tools.   We need to be able\nto create whole-disk image while some package should not be uninstalled.\n\nChange-Id: I181cf4dc0c0976833e39e4df78a7cff184f0f0b2\n'}]",2,741319,66d1d0beba1c318ebdf1df5d3678acb1913103e2,15,5,2,7130,,,0,"Move partition handling to overcloud-partition / overcloud-partition-uefi

Move partition handling to overcloud-partition / overcloud-partition-uefi
as whole-disk images with kernel-rt would be impossible to create due to
dependencies between kernel-rt and kdump/kexec-tools.   We need to be able
to create whole-disk image while some package should not be uninstalled.

Change-Id: I181cf4dc0c0976833e39e4df78a7cff184f0f0b2
",git fetch https://review.opendev.org/openstack/tripleo-image-elements refs/changes/19/741319/1 && git format-patch -1 --stdout FETCH_HEAD,"['elements/overcloud-partition-uefi/element-deps', 'elements/overcloud-secure-uefi/package-installs.yaml', 'elements/overcloud-secure/element-deps', 'elements/overcloud-partition/element-deps', 'elements/overcloud-secure/README.rst', 'elements/overcloud-secure-uefi/element-deps', 'elements/overcloud-partition-uefi/block-device-default.yaml', 'elements/overcloud-partition/block-device-default.yaml', 'elements/overcloud-partition-uefi/README.rst', 'elements/overcloud-partition/README.rst']",10,4465f093e8f548c44717b7d673ffa0b500740490,bug/secure,"overcloud-partition ================ overcloud-partition is an element to add extra security hardening features to the tripleo images: partition creation. It includes the block-device-default definition, that creates independent partitions on the overcloud image, allowing those to accomplish the ANSSI security requirements. Please note that the sizes of the partitions may not be enough for production usage, they will need to be resized properly after deployment depending on the available disk size. ",,18,18
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I27aa62d00b77ca7ff61bb31c6f396f03e148a144,openstack/tripleo-heat-templates,stable/train,I27aa62d00b77ca7ff61bb31c6f396f03e148a144,Move nova online migrations to nova-conductor,MERGED,2020-06-16 09:05:19.000000000,2020-07-22 04:30:58.000000000,2020-07-22 04:30:58.000000000,"[{'_account_id': 3153}, {'_account_id': 5241}, {'_account_id': 6816}, {'_account_id': 6926}, {'_account_id': 7144}, {'_account_id': 7353}, {'_account_id': 8042}, {'_account_id': 9414}, {'_account_id': 11166}, {'_account_id': 14985}, {'_account_id': 19138}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23811}, {'_account_id': 25877}, {'_account_id': 30133}]","[{'number': 1, 'created': '2020-06-16 09:05:19.000000000', 'files': ['deployment/nova/nova-api-container-puppet.yaml', 'deployment/nova/nova-conductor-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5c55a46dfa177d13f0ac6794270e2ff7190aaf8b', 'message': 'Move nova online migrations to nova-conductor\n\nWith multi-cell we can have stacks with no nova-api so the nova database\noperations must be coupled to nova-conductor, not nova-api.\n\nChange-Id: I27aa62d00b77ca7ff61bb31c6f396f03e148a144\nCloses-bug: #1883098\n(cherry picked from commit 22df3dbcbb67c62dc725c5f76140a10278b4d27b)\n(cherry picked from commit 1ca404cbc1499bba6b4d88d2eabfd94dfac10f89)\n'}]",0,735818,5c55a46dfa177d13f0ac6794270e2ff7190aaf8b,20,17,1,20733,,,0,"Move nova online migrations to nova-conductor

With multi-cell we can have stacks with no nova-api so the nova database
operations must be coupled to nova-conductor, not nova-api.

Change-Id: I27aa62d00b77ca7ff61bb31c6f396f03e148a144
Closes-bug: #1883098
(cherry picked from commit 22df3dbcbb67c62dc725c5f76140a10278b4d27b)
(cherry picked from commit 1ca404cbc1499bba6b4d88d2eabfd94dfac10f89)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/18/735818/1 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/nova/nova-api-container-puppet.yaml', 'deployment/nova/nova-conductor-container-puppet.yaml']",2,5c55a46dfa177d13f0ac6794270e2ff7190aaf8b,bug/1883098," - when: step|int == 1 block: - name: Online data migration for Nova command: ""{{ container_cli }} exec nova_conductor nova-manage db online_data_migrations"" delegate_to: ""{{ groups['nova_conductor'][0] }}"" become: true tags: - online_upgrade - online_upgrade_nova",,9,9
openstack%2Fglance~master~I7851e2b5ed21534e739327ce9562d458064eab1c,openstack/glance,master,I7851e2b5ed21534e739327ce9562d458064eab1c,"Make our tempest job use import, standalone, and inject_metadata",MERGED,2020-07-15 17:23:39.000000000,2020-07-22 04:15:16.000000000,2020-07-22 04:12:28.000000000,"[{'_account_id': 4393}, {'_account_id': 5202}, {'_account_id': 5314}, {'_account_id': 8556}, {'_account_id': 9008}, {'_account_id': 9303}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 17:23:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/8fd1c0391ac90dbe5102fca62c825c16049f1d9e', 'message': 'WIP: Make our tempest job use import, standalone, and inject_metadata\n\nThis should configure Glance to inject a random piece of metadata\ninto images that are created via import, which we can check later to\nmake sure it works.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 2, 'created': '2020-07-16 13:39:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/50c0438178df9fb56ce6d6c29f7ca3f30b90fdee', 'message': 'WIP: Make our tempest job use import, standalone, and inject_metadata\n\nThis should configure Glance to inject a random piece of metadata\ninto images that are created via import, and execute a post-run job\nto make sure the cirros image that was uploaded via import got that\nmetadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 3, 'created': '2020-07-16 15:06:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/2554398776037488e15f310755ae3805cc70644f', 'message': 'WIP: Make our tempest job use import, standalone, and inject_metadata\n\nThis should configure Glance to inject a random piece of metadata\ninto images that are created via import, and execute a post-run job\nto make sure the cirros image that was uploaded via import got that\nmetadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 4, 'created': '2020-07-17 15:59:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/252bb5a36ab23231393cf84c5e57920ad2ec4622', 'message': 'WIP: Make our tempest job use import, standalone, and inject_metadata\n\nThis should configure Glance to inject a random piece of metadata\ninto images that are created via import, and execute a post-run job\nto make sure the cirros image that was uploaded via import got that\nmetadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 5, 'created': '2020-07-17 16:16:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/27467dc6017eca93369ba97c0b7762008c1cd4ef', 'message': 'WIP: Make our tempest job use import, standalone, and inject_metadata\n\nThis should configure Glance to inject a random piece of metadata\ninto images that are created via import, and execute a post-run job\nto make sure the cirros image that was uploaded via import got that\nmetadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 6, 'created': '2020-07-20 20:36:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/3692571605cd0239e1565a8b8cf35d479bf3c74f', 'message': 'Make our tempest job use import, standalone, and inject_metadata\n\nThis configures Glance to inject a random piece of metadata\ninto images that are created via import, cause devstack to use import,\nand execute a post-run job to make sure the cirros image that was\nuploaded via import got that metadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 7, 'created': '2020-07-21 14:56:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/cc46eb8d9b05ee4f5a1652e0202466b66267d1e0', 'message': 'Make our tempest job use import, standalone, and inject_metadata\n\nThis configures Glance to inject a random piece of metadata\ninto images that are created via import, cause devstack to use import,\nand execute a post-run job to make sure the cirros image that was\nuploaded via import got that metadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 8, 'created': '2020-07-21 14:59:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/da836bdd2dcb50ce70458b09b86656f46d13810d', 'message': 'Make our tempest job use import, standalone, and inject_metadata\n\nThis configures Glance to inject a random piece of metadata\ninto images that are created via import, cause devstack to use import,\nand execute a post-run job to make sure the cirros image that was\nuploaded via import got that metadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 9, 'created': '2020-07-21 15:01:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/b6427cbc1503780744837b1f87b968182befd939', 'message': 'Make our tempest job use import, standalone, and inject_metadata\n\nThis configures Glance to inject a random piece of metadata\ninto images that are created via import, cause devstack to use import,\nand execute a post-run job to make sure the cirros image that was\nuploaded via import got that metadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}, {'number': 10, 'created': '2020-07-21 22:18:56.000000000', 'files': ['playbooks/post-check-metadata-injection.yaml', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/glance/commit/7d49b7ffc22d8835610c7670acbac0b910afcc63', 'message': 'Make our tempest job use import, standalone, and inject_metadata\n\nThis configures Glance to inject a random piece of metadata\ninto images that are created via import, cause devstack to use import,\nand execute a post-run job to make sure the cirros image that was\nuploaded via import got that metadata as expected.\n\nChange-Id: I7851e2b5ed21534e739327ce9562d458064eab1c\n'}]",3,741276,7d49b7ffc22d8835610c7670acbac0b910afcc63,48,8,10,4393,,,0,"Make our tempest job use import, standalone, and inject_metadata

This configures Glance to inject a random piece of metadata
into images that are created via import, cause devstack to use import,
and execute a post-run job to make sure the cirros image that was
uploaded via import got that metadata as expected.

Change-Id: I7851e2b5ed21534e739327ce9562d458064eab1c
",git fetch https://review.opendev.org/openstack/glance refs/changes/76/741276/4 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,8fd1c0391ac90dbe5102fca62c825c16049f1d9e,glance-import-job,"- job: name: tempest-integrated-storage-import parent: tempest-integrated-storage description: | The regular tempest-integrated-storage job but with glance metadata injection vars: devstack_localrc: GLANCE_STANDALONE: True GLANCE_USE_IMPORT_WORKFLOW: True devstack_local_conf: post-config: $GLANCE_IMAGE_IMPORT_CONF: image_import_opts: image_import_plugins: ""['inject_image_metadata']"" inject_metadata_properties: inject: | ""glance_devstack_test"":""doyouseeme?"" - tempest-integrated-storage-import: - tempest-integrated-storage-import:", - tempest-integrated-storage: - tempest-integrated-storage:,20,2
openstack%2Fswift~master~I8f9b5cf7f5749481ef391a2029b0c4263443a89b,openstack/swift,master,I8f9b5cf7f5749481ef391a2029b0c4263443a89b,probe tests: Get rid of `server` arg for device_dir() and storage_dir(),MERGED,2020-07-16 20:51:14.000000000,2020-07-22 04:15:09.000000000,2020-07-22 04:12:27.000000000,"[{'_account_id': 1179}, {'_account_id': 15343}, {'_account_id': 22348}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-16 20:51:14.000000000', 'files': ['test/probe/common.py', 'test/probe/test_reconstructor_rebuild.py', 'test/probe/test_reconstructor_revert.py', 'test/probe/test_object_partpower_increase.py', 'test/probe/test_object_handoff.py', 'test/probe/test_object_failures.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/5bd95cf2b75d30f97b301b0c4752edeb8b311fd0', 'message': ""probe tests: Get rid of `server` arg for device_dir() and storage_dir()\n\nIt's not actually *used* anywhere.\n\nChange-Id: I8f9b5cf7f5749481ef391a2029b0c4263443a89b\n""}]",2,741544,5bd95cf2b75d30f97b301b0c4752edeb8b311fd0,13,4,1,15343,,,0,"probe tests: Get rid of `server` arg for device_dir() and storage_dir()

It's not actually *used* anywhere.

Change-Id: I8f9b5cf7f5749481ef391a2029b0c4263443a89b
",git fetch https://review.opendev.org/openstack/swift refs/changes/44/741544/1 && git format-patch -1 --stdout FETCH_HEAD,"['test/probe/common.py', 'test/probe/test_reconstructor_rebuild.py', 'test/probe/test_reconstructor_revert.py', 'test/probe/test_object_partpower_increase.py', 'test/probe/test_object_handoff.py', 'test/probe/test_object_failures.py']",6,5bd95cf2b75d30f97b301b0c4752edeb8b311fd0,," part_dir = self.storage_dir(node, part=opart)"," part_dir = self.storage_dir('object', node, part=opart)",24,25
openstack%2Fneutron~master~I42c33fefaae6a7bee134779c840f35632823472e,openstack/neutron,master,I42c33fefaae6a7bee134779c840f35632823472e,Ensure drop flows on br-int at agent startup for DVR too,MERGED,2020-07-13 16:17:56.000000000,2020-07-22 04:15:08.000000000,2020-07-22 04:12:24.000000000,"[{'_account_id': 1131}, {'_account_id': 2733}, {'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 9531}, {'_account_id': 9732}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 29071}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-13 16:17:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/b41e0dad552bb3b14f5267d699615ca16f9b68e8', 'message': ""Ensure drop flows on br-int at agent startup for DVR too\n\nCommit 90212b12 changed the agent so adding vital drop flows on br-int\n(table 0 priority 2) for packets from physical bridges was deferred\nuntil DVR startup later on. But if br-int has no flows from a previous\nrun (eg after host reboot), then these packets will hit the NORMAL flow\nin table 60. So if you have more than one physical bridge, then their\ninterfaces are now essentially connected at layer 2 and a network loop\nis possible in the time window before the flows are added by DVR. Also\nthe DVR code won't add them until after RPC calls to the server, so a\nloop is more likely if the server is not available.\n\nThis patch restores adding these flows when the physical bridges are\ninitialized. Also removed a related comment that is no longer correct.\n\nChange-Id: I42c33fefaae6a7bee134779c840f35632823472e\nCloses-Bug: #1887148\nRelated-Bug: #1869808\n""}, {'number': 2, 'created': '2020-07-14 09:30:24.000000000', 'files': ['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py', 'neutron/tests/unit/plugins/ml2/drivers/openvswitch/agent/test_ovs_neutron_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8', 'message': ""Ensure drop flows on br-int at agent startup for DVR too\n\nCommit 90212b12 changed the OVS agent so adding vital drop flows on\nbr-int (table 0 priority 2) for packets from physical bridges was\ndeferred until DVR initialization later on. But if br-int has no flows\nfrom a previous run (eg after host reboot), then these packets will hit\nthe NORMAL flow in table 60. And if there is more than one physical\nbridge, then the physical interfaces from the different bridges are now\nessentially connected at layer 2 and a network loop is possible in the\ntime before the flows are added by DVR. Also the DVR code won't add them\nuntil after RPC calls to the server, so a loop is more likely if the\nserver is not available.\n\nThis patch restores adding these flows to when the physical bridges are\nfirst configured. Also updated a comment that was no longer correct and\nupdated the unit test.\n\nChange-Id: I42c33fefaae6a7bee134779c840f35632823472e\nCloses-Bug: #1887148\nRelated-Bug: #1869808\n""}]",15,740724,c1a77ef8b74bb9b5abbc5cb03fb3201383122eb8,38,13,2,2733,,,0,"Ensure drop flows on br-int at agent startup for DVR too

Commit 90212b12 changed the OVS agent so adding vital drop flows on
br-int (table 0 priority 2) for packets from physical bridges was
deferred until DVR initialization later on. But if br-int has no flows
from a previous run (eg after host reboot), then these packets will hit
the NORMAL flow in table 60. And if there is more than one physical
bridge, then the physical interfaces from the different bridges are now
essentially connected at layer 2 and a network loop is possible in the
time before the flows are added by DVR. Also the DVR code won't add them
until after RPC calls to the server, so a loop is more likely if the
server is not available.

This patch restores adding these flows to when the physical bridges are
first configured. Also updated a comment that was no longer correct and
updated the unit test.

Change-Id: I42c33fefaae6a7bee134779c840f35632823472e
Closes-Bug: #1887148
Related-Bug: #1869808
",git fetch https://review.opendev.org/openstack/neutron refs/changes/24/740724/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/plugins/ml2/drivers/openvswitch/agent/ovs_neutron_agent.py'],1,b41e0dad552bb3b14f5267d699615ca16f9b68e8,bug/1887148, self.int_br.drop_port(in_port=int_ofport) if not self.enable_distributed_routing:," # following drop operations are not necessary for # dvr agent setup_dvr_flows. So skip it if dvr enabled # the reason is for br_int it is duplicate # for br_physical drop_port is dangerous because when dvr # enabled the highest flow on table=0 is 2 which means # basically everything will be dropped until setup_dvr_flows # got executed. if not self.enable_distributed_routing: # These two drop flows are the root cause for the bug #1803919. # And now we add a rpc check during agent start procedure. If # ovs agent can not reach any neutron server, or all neutron # servers are down, these flows will not be installed anymore. # Bug #1803919 was fixed in that way. # And as a reminder, we can not do much work on this. Because # the bridge mappings can be varied. Provider (external) # network can be implicitly set on any physical bridge # due to the basic NORMAL flow. # Different vlan range networks can also have many # bridge map settings, these tenant network traffic can also be # blocked by the following drop flows. # block all untranslated traffic between bridges self.int_br.drop_port(in_port=int_ofport)",1,21
openstack%2Fpython-tripleoclient~master~I716ad7994e28e40e524ad4c7b968cf49a47174ef,openstack/python-tripleoclient,master,I716ad7994e28e40e524ad4c7b968cf49a47174ef,Correct a typo in a string,MERGED,2020-07-11 02:56:18.000000000,2020-07-22 03:54:13.000000000,2020-07-22 03:52:58.000000000,"[{'_account_id': 3153}, {'_account_id': 7144}, {'_account_id': 22348}, {'_account_id': 25877}]","[{'number': 1, 'created': '2020-07-11 02:56:18.000000000', 'files': ['tripleoclient/v1/undercloud_preflight.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/6fe832a1c3ea3b6fd599e606ae78bf600cbdec0b', 'message': ""Correct a typo in a string\n\nThis patch changes 'Provisionning' to\n'Provisioning' in the 526 line in\ntripleoclient/v1/undercloud_preflight.py\n\nChange-Id: I716ad7994e28e40e524ad4c7b968cf49a47174ef\n""}]",0,740535,6fe832a1c3ea3b6fd599e606ae78bf600cbdec0b,11,4,1,30696,,,0,"Correct a typo in a string

This patch changes 'Provisionning' to
'Provisioning' in the 526 line in
tripleoclient/v1/undercloud_preflight.py

Change-Id: I716ad7994e28e40e524ad4c7b968cf49a47174ef
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/35/740535/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleoclient/v1/undercloud_preflight.py'],1,6fe832a1c3ea3b6fd599e606ae78bf600cbdec0b,typo, _checking_status('Provisioning IP change'), _checking_status('Provisionning IP change'),1,1
openstack%2Ftempest~master~Ib705f59ef3aea93b2778cc87fc44d390b5a62c94,openstack/tempest,master,Ib705f59ef3aea93b2778cc87fc44d390b5a62c94,Document the process to pin the constraint in tox.ini,MERGED,2020-07-06 21:34:12.000000000,2020-07-22 03:25:49.000000000,2020-07-22 03:23:41.000000000,"[{'_account_id': 5689}, {'_account_id': 5803}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 28522}, {'_account_id': 31239}]","[{'number': 1, 'created': '2020-07-06 21:34:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/3bef2c6f983e1326a443a682e48bffe68bfa7db1', 'message': 'Document the process to pin the constraint in tox.ini\n\nAs discussed in Victoria PTG[1], we need to start pining\nthe constarint in tox.ini on Tempest new release so that our\ntox.ini can match with compatible constraints with Tempest version.\n\n[1] https://etherpad.opendev.org/p/qa-victoria-ptg\n\nChange-Id: Ib705f59ef3aea93b2778cc87fc44d390b5a62c94\n'}, {'number': 2, 'created': '2020-07-06 22:07:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tempest/commit/d7f75f046db3f2e857e568ab8e2f679dadae44c6', 'message': 'Document the process to pin the constraint in tox.ini\n\nAs discussed in Victoria PTG[1], we need to start pining\nthe constarint in tox.ini on Tempest new release so that our\ntox.ini can match with compatible constraints with Tempest version.\n\n[1] https://etherpad.opendev.org/p/qa-victoria-ptg\n\nChange-Id: Ib705f59ef3aea93b2778cc87fc44d390b5a62c94\n'}, {'number': 3, 'created': '2020-07-07 13:11:44.000000000', 'files': ['doc/source/index.rst', 'doc/source/requirement_upper_constraint_for_tempest.rst'], 'web_link': 'https://opendev.org/openstack/tempest/commit/d89122be41543a2f2416f30cfcb9e0374f516d6c', 'message': 'Document the process to pin the constraint in tox.ini\n\nAs discussed in Victoria PTG[1], we need to start pining\nthe constraint in tox.ini on Tempest new release so that our\ntox.ini can match with compatible constraints with Tempest version.\n\n[1] https://etherpad.opendev.org/p/qa-victoria-ptg\n\nChange-Id: Ib705f59ef3aea93b2778cc87fc44d390b5a62c94\n'}]",7,739609,d89122be41543a2f2416f30cfcb9e0374f516d6c,17,7,3,8556,,,0,"Document the process to pin the constraint in tox.ini

As discussed in Victoria PTG[1], we need to start pining
the constraint in tox.ini on Tempest new release so that our
tox.ini can match with compatible constraints with Tempest version.

[1] https://etherpad.opendev.org/p/qa-victoria-ptg

Change-Id: Ib705f59ef3aea93b2778cc87fc44d390b5a62c94
",git fetch https://review.opendev.org/openstack/tempest refs/changes/09/739609/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/index.rst', 'doc/source/requirement_upper_constraint_for_tempest.rst']",2,3bef2c6f983e1326a443a682e48bffe68bfa7db1,,"Requirements Upper Constraint for Tempest ========================================= Tempest is brachless and supported stable branches use Tempest master for their testing and all EM stable branches use old compatible Tempest version. This means the OpenStack installed upper-constraints might not be compatible with Tempest used for their testing. For example, if Tempest master is used for testing the stable/stein then stable/stein constraint might not be compatible with Tempest master so we need to use master upper-constraints for Tempest. That is why we use virtual env for Tempest installation and running test. Devstack take cares for using the master upper-constraints when Tempest master is used. But when old Tempest is used for testing then devstack alone cannot handle the compatible constraints because Tempest in-tree tox.ini also set the upper-constraints path for tox venv so if devstack set the different path for constraint than tox.ini tox venv end up re-created which flush all previously installed tempest plugins in that venv. To solve that problem we have two ways: #. Set UPPER_CONSTRAINTS_FILE to compatible constraint path This option is not easy as it requires to set this env var everywhere Tempest tox env is used like in devstack, grenade, projects side, zuulv3 roles etc. #. Pin upper-constraints in tox.ini If we can pin the upper-constraints in tox.ini on every release with the branch constraint at the time of release then we can solve it in an easy way because tox can use the compatible constraint at the time of venv creation itself. But this can again mismatch with the devstack set constraint so we need to follow the below process to make it work. How to pin upper-constraints in tox.ini --------------------------------------- This has to be done exactly before we cut the Tempest new release. Step1: Add the pin constraint proposal in `QA office hour <https://wiki.openstack.org/wiki/Meetings/QATeamMeeting#Agenda_for_next_Office_hours>`_. Proposal includes: - pin constraint patch. `Example patch <https://review.opendev.org/#/c/720578/>`_ - revert of pin constraint patch. `Example patch <https://review.opendev.org/#/c/721724/>`_ Step2: Approve pin constraint and its revert patch together. During office hour we need to check that there are no open patches for Tempest release and accordingly we fast approve the 'pin constraint' and its revert patch during office hour itself. Remember 'pin constraint patch' has to be the last commit to include in Tempest release. Step3: Use 'pin constraint patch' hash for the Tempest release. ",,51,0
openstack%2Fswift~master~I0dac997f9ff2c7c60e9769ef6d4d802ea7d71ca8,openstack/swift,master,I0dac997f9ff2c7c60e9769ef6d4d802ea7d71ca8,Decouple proxy_server tests,MERGED,2020-07-21 20:50:19.000000000,2020-07-22 03:25:20.000000000,2020-07-22 03:23:43.000000000,"[{'_account_id': 1179}, {'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 20:50:19.000000000', 'files': ['test/unit/proxy/test_server.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/fa5bad279cba99ec328f692a35f6804492b0d3d6', 'message': 'Decouple proxy_server tests\n\nTests that trigger error limiting can bleed state across the long lived\nmodule servers.  Expand usage of existing pattern to clear error\nlimiting in TestCase setUp and tearDown.\n\nChange-Id: I0dac997f9ff2c7c60e9769ef6d4d802ea7d71ca8\n'}]",1,742281,fa5bad279cba99ec328f692a35f6804492b0d3d6,8,3,1,1179,,,0,"Decouple proxy_server tests

Tests that trigger error limiting can bleed state across the long lived
module servers.  Expand usage of existing pattern to clear error
limiting in TestCase setUp and tearDown.

Change-Id: I0dac997f9ff2c7c60e9769ef6d4d802ea7d71ca8
",git fetch https://review.opendev.org/openstack/swift refs/changes/81/742281/1 && git format-patch -1 --stdout FETCH_HEAD,['test/unit/proxy/test_server.py'],1,fa5bad279cba99ec328f692a35f6804492b0d3d6,, _test_servers[0]._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors prosrv._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors _test_servers[0]._error_limiting = {} # clear out errors,,10,0
openstack%2Ftripleo-upgrade~stable%2Ftrain~I969d901be4eeb93e0abe4e8b06f6c54399b52ea2,openstack/tripleo-upgrade,stable/train,I969d901be4eeb93e0abe4e8b06f6c54399b52ea2,Workload during updates can be launched with SRIOV ports,MERGED,2020-07-20 08:37:07.000000000,2020-07-22 03:00:52.000000000,2020-07-22 03:00:52.000000000,"[{'_account_id': 6816}, {'_account_id': 8297}, {'_account_id': 11090}, {'_account_id': 22348}, {'_account_id': 26343}]","[{'number': 1, 'created': '2020-07-20 08:37:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/05599442ce1bebeb9eadd820954d930973f80ffd', 'message': 'Workload during updates can be launched with SRIOV ports\n\nWhen upgrade-workloadsriov is set, workload is generated with an SRIOV\nPF port on the existing external network\nA mechanism has been added to remove workload previously created after\nupdate/upgrade is completed, when upgrade-workloadcleanup is set\n\nChange-Id: I969d901be4eeb93e0abe4e8b06f6c54399b52ea2\n'}, {'number': 2, 'created': '2020-07-21 08:52:12.000000000', 'files': ['tasks/main.yml', 'README.rst', 'infrared_plugin/plugin.spec', 'templates/workload_launch.sh.j2', 'templates/fip_http_check_start.sh.j2', 'infrared_plugin/main.yml', 'templates/nova_actions_check.sh.j2', 'defaults/main.yml', 'templates/l3_agent_start_ping.sh.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-upgrade/commit/7812261ddb3ec57613a964ff8a634862701ae8c0', 'message': 'Workload during updates can be launched with SRIOV ports\n\nWhen upgrade-workloadsriov is set, workload is generated with an SRIOV\nPF port on the existing external network\nA mechanism has been added to remove workload previously created after\nupdate/upgrade is completed, when upgrade-workloadcleanup is set\n\nChange-Id: I969d901be4eeb93e0abe4e8b06f6c54399b52ea2\n(cherry picked from commit 85c12706d145162d85c2c519e01e35393364d4c8)\n'}]",0,741890,7812261ddb3ec57613a964ff8a634862701ae8c0,14,5,2,31291,,,0,"Workload during updates can be launched with SRIOV ports

When upgrade-workloadsriov is set, workload is generated with an SRIOV
PF port on the existing external network
A mechanism has been added to remove workload previously created after
update/upgrade is completed, when upgrade-workloadcleanup is set

Change-Id: I969d901be4eeb93e0abe4e8b06f6c54399b52ea2
(cherry picked from commit 85c12706d145162d85c2c519e01e35393364d4c8)
",git fetch https://review.opendev.org/openstack/tripleo-upgrade refs/changes/90/741890/2 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'README.rst', 'infrared_plugin/plugin.spec', 'templates/fip_http_check_start.sh.j2', 'templates/workload_launch.sh.j2', 'infrared_plugin/main.yml', 'templates/nova_actions_check.sh.j2', 'defaults/main.yml', 'templates/l3_agent_start_ping.sh.j2']",9,05599442ce1bebeb9eadd820954d930973f80ffd,sriov_workload-stable/train,"if [ -f {{ working_dir }}/vm_ip.sh ]; then source {{ working_dir }}/vm_ip.sh {% if workload_sriov | bool %} echo export VM_IP=$(openstack server list -f json | jq -r -c '.[0][""Networks""]' | cut -d""="" -f2) > {{ working_dir }}/vm_ip.sh {% else %} echo export VM_IP=$(openstack floating ip list -f json | jq -r -c '.[] | select(.Port) | .[""Floating IP Address""]' | head -1) > {{ working_dir }}/vm_ip.sh {% endif %} source {{ working_dir }}/vm_ip.shping -D ${VM_IP} >> ~/ping_results_$(date +%Y%m%d%H%M).log &","if [ -f {{ working_dir }}/fip.sh ]; then source {{ working_dir }}/fip.sh echo export FIP=$(openstack floating ip list -f json | jq -r -c '.[] | select(.Port) | .[""Floating IP Address""]' | head -1) > {{ working_dir }}/fip.sh source {{ working_dir }}/fip.shping -D ${FIP} >> ~/ping_results_$(date +%Y%m%d%H%M).log &",295,177
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I3e496e2c80cb2e67e8cb5e39cb99d5b559171b77,openstack/tripleo-heat-templates,stable/train,I3e496e2c80cb2e67e8cb5e39cb99d5b559171b77,[TRAIN-only] Remove duplicate register,MERGED,2020-07-20 17:57:43.000000000,2020-07-22 02:58:16.000000000,2020-07-22 02:58:16.000000000,"[{'_account_id': 3153}, {'_account_id': 11090}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-20 17:57:43.000000000', 'files': ['common/deploy-steps-tasks.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/cfb99a9674987e4b423f7fb2ddbfb3cc55b4c0c7', 'message': '[TRAIN-only] Remove duplicate register\n\n99f24b64b76747a5efb19723e297908f06047903 introduced a duplicate register\nparameter on a task in the common deploy steps.\n\n[WARNING]: While constructing a mapping from\n/var/lib/mistral/overcloud/common_deploy_steps_tasks.yaml, line 158, column 7,\nfound a duplicate dict key (register). Using last defined value only.\n\nChange-Id: I3e496e2c80cb2e67e8cb5e39cb99d5b559171b77\n'}]",0,741999,cfb99a9674987e4b423f7fb2ddbfb3cc55b4c0c7,11,4,1,14985,,,0,"[TRAIN-only] Remove duplicate register

99f24b64b76747a5efb19723e297908f06047903 introduced a duplicate register
parameter on a task in the common deploy steps.

[WARNING]: While constructing a mapping from
/var/lib/mistral/overcloud/common_deploy_steps_tasks.yaml, line 158, column 7,
found a duplicate dict key (register). Using last defined value only.

Change-Id: I3e496e2c80cb2e67e8cb5e39cb99d5b559171b77
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/99/741999/1 && git format-patch -1 --stdout FETCH_HEAD,['common/deploy-steps-tasks.yaml'],1,cfb99a9674987e4b423f7fb2ddbfb3cc55b4c0c7,remove-duplicate,, register: outputs,0,1
openstack%2Frequirements~master~I3bf414dace38f30590c951165030ad023e4f888d,openstack/requirements,master,I3bf414dace38f30590c951165030ad023e4f888d,update constraint for tooz to new release 2.7.0,MERGED,2020-07-21 16:38:55.000000000,2020-07-22 02:48:25.000000000,2020-07-22 02:46:08.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 16:38:55.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/33b69dbe9e6db48ee844c9fd9988df561f702641', 'message': 'update constraint for tooz to new release 2.7.0\n\nChange-Id: I3bf414dace38f30590c951165030ad023e4f888d\nmeta:version: 2.7.0\nmeta:diff-start: -\nmeta:series: victoria\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Ben Nemec <bnemec@redhat.com>\nmeta:release:Commit: Ben Nemec <bnemec@redhat.com>\nmeta:release:Change-Id: Ice9b9df4d011df4ee6ac8e5b31da055419d03d75\nmeta:release:Code-Review+1: Dmitry Tantsur <dtantsur@protonmail.com>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,742243,33b69dbe9e6db48ee844c9fd9988df561f702641,9,3,1,11131,,,0,"update constraint for tooz to new release 2.7.0

Change-Id: I3bf414dace38f30590c951165030ad023e4f888d
meta:version: 2.7.0
meta:diff-start: -
meta:series: victoria
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Ben Nemec <bnemec@redhat.com>
meta:release:Commit: Ben Nemec <bnemec@redhat.com>
meta:release:Change-Id: Ice9b9df4d011df4ee6ac8e5b31da055419d03d75
meta:release:Code-Review+1: Dmitry Tantsur <dtantsur@protonmail.com>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/43/742243/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,33b69dbe9e6db48ee844c9fd9988df561f702641,new-release,tooz===2.7.0,tooz===2.6.0,1,1
openstack%2Fdevstack~master~I928072e935e7a7ec24609cdc4522c96f65d3ba3b,openstack/devstack,master,I928072e935e7a7ec24609cdc4522c96f65d3ba3b,Fix setting enabled_import_methods if glance is standalone,MERGED,2020-07-21 00:01:56.000000000,2020-07-22 02:48:20.000000000,2020-07-22 02:46:07.000000000,"[{'_account_id': 4393}, {'_account_id': 8556}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-07-21 00:01:56.000000000', 'files': ['lib/glance'], 'web_link': 'https://opendev.org/openstack/devstack/commit/7700d5a825e48ea5f536e580df5c769a7224afcc', 'message': 'Fix setting enabled_import_methods if glance is standalone\n\nI forgot to update devstack with the section name when I did Grenade.\n\nChange-Id: I928072e935e7a7ec24609cdc4522c96f65d3ba3b\n'}]",0,742047,7700d5a825e48ea5f536e580df5c769a7224afcc,14,5,1,4393,,,0,"Fix setting enabled_import_methods if glance is standalone

I forgot to update devstack with the section name when I did Grenade.

Change-Id: I928072e935e7a7ec24609cdc4522c96f65d3ba3b
",git fetch https://review.opendev.org/openstack/devstack refs/changes/47/742047/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/glance'],1,7700d5a825e48ea5f536e580df5c769a7224afcc,fix-iniset, iniset $GLANCE_API_CONF DEFAULT enabled_import_methods [], iniset $GLANCE_API_CONF enabled_import_methods [],1,1
openstack%2Fceilometer~master~Idda62731e70bb1fd4d8293576a3f84207048c6b8,openstack/ceilometer,master,Idda62731e70bb1fd4d8293576a3f84207048c6b8,Fix dynamic pollster `default_discovery` method call,MERGED,2020-07-06 17:10:44.000000000,2020-07-22 02:35:42.000000000,2020-07-22 02:32:35.000000000,"[{'_account_id': 4264}, {'_account_id': 14107}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-06 17:10:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/eff151ad1495324a898f6fd8aa1ec257270aa5dd', 'message': 'Fix dynamic pollster `default_discovery` method call\n\nChange-Id: Idda62731e70bb1fd4d8293576a3f84207048c6b8\n'}, {'number': 2, 'created': '2020-07-06 18:34:52.000000000', 'files': ['ceilometer/polling/dynamic_pollster.py'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/6bb26f356f527d933a0ddf0fddd0b463ccb05c7c', 'message': 'Fix dynamic pollster `default_discovery` method call\n\nChange-Id: Idda62731e70bb1fd4d8293576a3f84207048c6b8\n'}]",1,739555,6bb26f356f527d933a0ddf0fddd0b463ccb05c7c,10,3,2,28356,,,0,"Fix dynamic pollster `default_discovery` method call

Change-Id: Idda62731e70bb1fd4d8293576a3f84207048c6b8
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/55/739555/2 && git format-patch -1 --stdout FETCH_HEAD,['ceilometer/polling/dynamic_pollster.py'],1,eff151ad1495324a898f6fd8aa1ec257270aa5dd,fix-dynamic-pollster-default_discovery-call, return self.definitions.sample_gatherer.default_discovery , return self.definitions.sample_gatherer.default_discovery(),2,1
openstack%2Fceilometer~master~I066fd99bc104f1d28870473a90d6c09863c70920,openstack/ceilometer,master,I066fd99bc104f1d28870473a90d6c09863c70920,drop mock from lower-constraints,MERGED,2020-06-08 20:25:43.000000000,2020-07-22 02:34:23.000000000,2020-07-22 02:32:31.000000000,"[{'_account_id': 4264}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 28356}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-06-08 20:25:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/b37b00cc4b9cf09c8b8ef946d4914621fd5af590', 'message': ""drop mock from lower-constraints\n\nThe mock third party library was needed for mock support in py2\nruntimes. Since we now only support py36 and later, we don't need it\nin lower-constraints.\n\nThese changes will help us to drop `mock` from openstack/requirements\n\nChange-Id: I066fd99bc104f1d28870473a90d6c09863c70920\n""}, {'number': 2, 'created': '2020-06-09 09:43:59.000000000', 'files': ['lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/82de25bfd6706a642975bae1d1e56bcaa2436cb8', 'message': ""drop mock from lower-constraints\n\nThe mock third party library was needed for mock support in py2\nruntimes. Since we now only support py36 and later, we don't need it\nin lower-constraints.\n\nThese changes will help us to drop `mock` from openstack/requirements\n\nChange-Id: I066fd99bc104f1d28870473a90d6c09863c70920\n""}]",0,734227,82de25bfd6706a642975bae1d1e56bcaa2436cb8,14,5,2,28522,,,0,"drop mock from lower-constraints

The mock third party library was needed for mock support in py2
runtimes. Since we now only support py36 and later, we don't need it
in lower-constraints.

These changes will help us to drop `mock` from openstack/requirements

Change-Id: I066fd99bc104f1d28870473a90d6c09863c70920
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/27/734227/1 && git format-patch -1 --stdout FETCH_HEAD,['lower-constraints.txt'],1,b37b00cc4b9cf09c8b8ef946d4914621fd5af590,drop_mock,,mock==2.0.0,0,1
openstack%2Fceilometer~master~Id5ae1720ad714675722bc857a142d7bd667fe7ed,openstack/ceilometer,master,Id5ae1720ad714675722bc857a142d7bd667fe7ed,"Enable OpenStack pollster to configure Ids(project, user, and resource)",MERGED,2020-04-22 17:28:02.000000000,2020-07-22 02:32:32.000000000,2020-07-22 02:32:32.000000000,"[{'_account_id': 4264}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 28356}]","[{'number': 1, 'created': '2020-04-22 17:28:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/4661e4fa691b67e01a88ac90c21127b92d75c50a', 'message': 'Enable OpenStack pollster to configure Ids(project, user, and resource)\n\nThis pull request enables OpenStack pollsters to configure\nIds(project, user, and resource) as the non-openstack pollster.\nThis is useful as some of the OpenStack APIs use other keys to represent\nvalues such as project_id and user_id.\n\nChange-Id: Id5ae1720ad714675722bc857a142d7bd667fe7ed\n'}, {'number': 2, 'created': '2020-04-22 18:53:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/179b7efb3229184bc450523f5e822bbf75a83741', 'message': 'Enable OpenStack pollster to configure Ids(project, user, and resource)\n\nThis pull request enables OpenStack pollsters to configure\nIds(project, user, and resource) as the non-openstack pollster.\nThis is useful as some of the OpenStack APIs use other keys to represent\nvalues such as project_id and user_id.\n\nChange-Id: Id5ae1720ad714675722bc857a142d7bd667fe7ed\n'}, {'number': 3, 'created': '2020-05-29 15:11:31.000000000', 'files': ['doc/source/admin/telemetry-dynamic-pollster.rst', 'ceilometer/polling/dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_non_openstack_dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_dynamic_pollster.py'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/1a4ab34df565fa00dc72edfd263afc56276f7621', 'message': 'Enable OpenStack pollster to configure Ids(project, user, and resource)\n\nThis pull request enables OpenStack pollsters to configure\nIds(project, user, and resource) as the non-openstack pollster.\nThis is useful as some of the OpenStack APIs use other keys to represent\nvalues such as project_id and user_id.\n\nChange-Id: Id5ae1720ad714675722bc857a142d7bd667fe7ed\n'}]",3,722092,1a4ab34df565fa00dc72edfd263afc56276f7621,15,4,3,28356,,,0,"Enable OpenStack pollster to configure Ids(project, user, and resource)

This pull request enables OpenStack pollsters to configure
Ids(project, user, and resource) as the non-openstack pollster.
This is useful as some of the OpenStack APIs use other keys to represent
values such as project_id and user_id.

Change-Id: Id5ae1720ad714675722bc857a142d7bd667fe7ed
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/92/722092/2 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/telemetry-dynamic-pollster.rst', 'ceilometer/polling/dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_non_openstack_dynamic_pollster.py', 'ceilometer/tests/unit/polling/test_dynamic_pollster.py']",4,4661e4fa691b67e01a88ac90c21127b92d75c50a,openstack_pollster_custom_ids," def test_execute_request_get_samples_custom_ids(self): sample = {'user_id_attribute': ""1"", 'project_id_attribute': ""2"", 'resource_id_attribute': ""3"", 'user_id': ""234"", 'project_id': ""2334"", 'id': ""35""} def internal_execute_request_get_samples_mock(self, arg): class Response: def json(self): return [sample] return Response(), ""url"" original_method = dynamic_pollster.PollsterSampleGatherer.\ internal_execute_request_get_samples try: dynamic_pollster.PollsterSampleGatherer. \ internal_execute_request_get_samples = \ internal_execute_request_get_samples_mock self.pollster_definition_all_fields[ 'user_id_attribute'] = 'user_id_attribute' self.pollster_definition_all_fields[ 'project_id_attribute'] = 'project_id_attribute' self.pollster_definition_all_fields[ 'resource_id_attribute'] = 'resource_id_attribute' pollster = dynamic_pollster.DynamicPollster( self.pollster_definition_all_fields) params = {""d"": ""d""} response = pollster.definitions.sample_gatherer. \ execute_request_get_samples(**params) self.assertEqual(sample['user_id_attribute'], response[0]['user_id']) self.assertEqual(sample['project_id_attribute'], response[0]['project_id']) self.assertEqual(sample['resource_id_attribute'], response[0]['id']) finally: dynamic_pollster.PollsterSampleGatherer. \ internal_execute_request_get_samples = original_method",,143,78
openstack%2Fceilometer~master~Ic76f25bcd2d70525d02c565449da753c4ba58bc3,openstack/ceilometer,master,Ic76f25bcd2d70525d02c565449da753c4ba58bc3,Refresh tox,MERGED,2020-06-09 09:43:59.000000000,2020-07-22 02:22:55.000000000,2020-07-22 02:21:11.000000000,"[{'_account_id': 4264}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 28356}]","[{'number': 1, 'created': '2020-06-09 09:43:59.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/abba67bf5483ffd2ce0eafcb4381764bc7d516c0', 'message': 'Refresh tox\n\nAdd ignore_basepython_conflict [1], this will fix tox warnings about\npython versions.\nBump tox minversion to 3.1.0 to ensure that ignore_basepython_conflict\nis supported.\nUse the default install_commandi [2].\n\n[1] https://tox.readthedocs.io/en/latest/config.html#conf-ignore_basepython_conflict\n[2] https://tox.readthedocs.io/en/latest/config.html#conf-install_command\n\nChange-Id: Ic76f25bcd2d70525d02c565449da753c4ba58bc3\n'}]",0,734487,abba67bf5483ffd2ce0eafcb4381764bc7d516c0,11,4,1,28522,,,0,"Refresh tox

Add ignore_basepython_conflict [1], this will fix tox warnings about
python versions.
Bump tox minversion to 3.1.0 to ensure that ignore_basepython_conflict
is supported.
Use the default install_commandi [2].

[1] https://tox.readthedocs.io/en/latest/config.html#conf-ignore_basepython_conflict
[2] https://tox.readthedocs.io/en/latest/config.html#conf-install_command

Change-Id: Ic76f25bcd2d70525d02c565449da753c4ba58bc3
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/87/734487/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,abba67bf5483ffd2ce0eafcb4381764bc7d516c0,drop_mock,minversion = 3.1.0ignore_basepython_conflict=true,minversion = 2.0install_command = pip install {opts} {packages},2,2
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I1626e16376da07b887d06089f556faf907b24c35,openstack/tripleo-heat-templates,stable/ussuri,I1626e16376da07b887d06089f556faf907b24c35,Check for correct column name for execution show,MERGED,2020-07-15 10:24:34.000000000,2020-07-22 01:37:35.000000000,2020-07-22 01:37:35.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-15 10:24:34.000000000', 'files': ['deployed-server/scripts/enable-ssh-admin.sh'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/381f0146ffe0dd2ddb487c4a18432923b24da846', 'message': ""Check for correct column name for execution show\n\nUse 'State' instead of 'state'.\n\nChange-Id: I1626e16376da07b887d06089f556faf907b24c35\nRelated-Bug: #1876646\n(cherry picked from commit 9cf9a5a8abda86fa50a232d2d5ff010b9ddd61c3)\n""}]",0,741139,381f0146ffe0dd2ddb487c4a18432923b24da846,12,4,1,8833,,,0,"Check for correct column name for execution show

Use 'State' instead of 'state'.

Change-Id: I1626e16376da07b887d06089f556faf907b24c35
Related-Bug: #1876646
(cherry picked from commit 9cf9a5a8abda86fa50a232d2d5ff010b9ddd61c3)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/39/741139/1 && git format-patch -1 --stdout FETCH_HEAD,['deployed-server/scripts/enable-ssh-admin.sh'],1,381f0146ffe0dd2ddb487c4a18432923b24da846,, RESULT=$(openstack workflow execution show -f value -c State $execution_id), RESULT=$(openstack workflow execution show -f value -c state $execution_id),1,1
openstack%2Fopenstack-helm-infra~master~I2008992c65a7efd3acf2533279e1a0abfa7e2b16,openstack/openstack-helm-infra,master,I2008992c65a7efd3acf2533279e1a0abfa7e2b16,Validate interconnection between containers in k8's cloud,ABANDONED,2019-03-12 15:24:33.000000000,2020-07-22 01:24:19.000000000,,"[{'_account_id': 8898}, {'_account_id': 16274}, {'_account_id': 16881}, {'_account_id': 17591}, {'_account_id': 17966}, {'_account_id': 18250}, {'_account_id': 18256}, {'_account_id': 18295}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 27589}, {'_account_id': 27977}, {'_account_id': 29397}, {'_account_id': 29868}]","[{'number': 1, 'created': '2019-03-12 15:24:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d56aafd407f242dd6781105df899919e218c3e5a', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 2, 'created': '2019-03-12 15:26:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b30e277bf1ae244fe02e4c85c8fc808a4ca6e103', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 3, 'created': '2019-03-12 18:26:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1b59bf3b874a11bfb001b1cd98aea44450347b24', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 4, 'created': '2019-03-13 13:59:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f8acaf6d8cae48ac8b67d9ba5e6a1353022d1303', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 5, 'created': '2019-03-13 14:05:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/15643bc163f0deeea6e446622dc062081aad866f', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 6, 'created': '2019-03-13 20:09:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1c0a8aca5732be40158ecf565a3c24aa0fd3bf5f', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 7, 'created': '2019-03-13 20:42:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/57916ab7352d62452c20d96464a6847cfd1aeb35', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 8, 'created': '2019-03-14 08:50:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/bc9c4cf831a1183ae51e274b3ed8af94d1508db2', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 9, 'created': '2019-03-15 14:24:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8a1e356295d782bd0c2ca1e31e033dfcf2126e9c', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 10, 'created': '2019-03-15 14:25:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/727e676bb08fff4d26d1a06142053dc57f13865f', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 11, 'created': '2019-03-20 13:54:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d35aaeb30a613fd265cc886fcc790a33524c8765', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 12, 'created': '2019-03-27 07:50:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/63c890ba9bb6a0d0fd1d052b20d70b31ed961381', 'message': 'Validate interconnection between containers in kubernetes cloud.\n\nThis commit is to validate accidental lost of connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n'}, {'number': 13, 'created': '2019-03-28 13:11:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/80abdbafb5fe847b31a0df31eac0a7cefd373818', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 14, 'created': '2019-04-18 15:24:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f9e6fa07fccd2e4fdbfebb5bae5bf5aa8c0a1536', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 15, 'created': '2019-04-30 15:28:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f748f510f6d8b53fd67075273c80082d02374c4a', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 16, 'created': '2019-05-21 07:46:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7fb9b80677186bf9e0fb3d0869e0721f19736341', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 17, 'created': '2019-05-21 11:22:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9e4a5351544a0225002b657453f4b6b726549afc', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 18, 'created': '2019-05-21 15:15:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/317384a232e955354f9570bdcde47a8e326f94b5', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 19, 'created': '2019-05-22 06:46:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f28966aa5a6ffa18399e328c800c1f032cceb1fd', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 20, 'created': '2019-05-22 06:47:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/df77348d43bedbb329ed801651b6aed127f1963c', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 21, 'created': '2019-05-22 09:58:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f8b46a34bdedece85df7daa2783b92bdaa88532d', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 22, 'created': '2019-05-22 11:51:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/46fd9bb6296cf4934cd6ffbbd1dd0c208b29557b', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 23, 'created': '2019-05-24 06:04:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0c23b4b5d719c5c22594f4540737c25e5ce07103', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 24, 'created': '2019-05-24 06:05:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9a3ba56be795ab9e16f9b948bb9d262d1b640813', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 25, 'created': '2019-06-16 13:16:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fabdbb9ecccad30f28e43ee5413b650ba69ecef5', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 26, 'created': '2019-06-25 13:22:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/08574f30ed95093c216f148b2c29a94243a94aa8', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 27, 'created': '2019-06-28 05:48:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fe2b8c77e3cfce74dda188f1ccc8a155777dfafe', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}, {'number': 28, 'created': '2019-07-03 08:24:57.000000000', 'files': ['prometheus-kube-network-metrics/templates/bin/_kube-ncmp.py.tpl', 'prometheus-kube-network-metrics/templates/service_kube_network_metrics.yaml', 'prometheus-kube-network-metrics/templates/deployment.yaml', 'prometheus-kube-network-metrics/templates/bin/_run_ncmp.sh.tpl', 'prometheus-kube-network-metrics/Chart.yaml', 'prometheus-kube-network-metrics/templates/job-image-repo-sync.yaml', 'prometheus-kube-network-metrics/templates/service_ingress_kube_network_metrics.yaml', 'prometheus-kube-network-metrics/requirements.yaml', 'prometheus-kube-network-metrics/templates/ingress_kube_network_metrics.yaml', 'tools/deployment/network-policy/150-kube-network-metrics.sh', 'prometheus-kube-network-metrics/.helmignore', 'prometheus-kube-network-metrics/values.yaml', 'tools/images/kube-network-metrics/Dockerfile', 'prometheus-kube-network-metrics/templates/network_policy.yaml', 'prometheus-kube-network-metrics/templates/configmap-bin.yaml', 'prometheus-kube-network-metrics/Readme.md', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/74915059d0790b1a1a73f8836c23debfbd900448', 'message': ""Validate interconnection between containers in k8's cloud\n\nThis commit is to validate accidental loss\nof connectivity between compute nodes.\n\nCo-Authored-By: Mykola Yakovliev <vegasq@gmail.com>\nChange-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16\n""}]",18,642791,74915059d0790b1a1a73f8836c23debfbd900448,94,15,28,27977,,,0,"Validate interconnection between containers in k8's cloud

This commit is to validate accidental loss
of connectivity between compute nodes.

Co-Authored-By: Mykola Yakovliev <vegasq@gmail.com>
Change-Id: I2008992c65a7efd3acf2533279e1a0abfa7e2b16
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/91/642791/4 && git format-patch -1 --stdout FETCH_HEAD,"['prometheus-kube-network-metrics/templates/service_kube_network_metrics.yaml', 'prometheus-kube-network-metrics/.helmignore', 'prometheus-kube-network-metrics/templates/deployment.yaml', 'prometheus-kube-network-metrics/values.yaml', 'prometheus-kube-network-metrics/templates/configmap-bin.yaml', 'prometheus-kube-network-metrics/Chart.yaml', 'prometheus-kube-network-metrics/Readme.md', 'prometheus-kube-network-metrics/templates/serviceaccount.yaml']",8,d56aafd407f242dd6781105df899919e218c3e5a,,{{- if .Values.manifests.serviceaccount }} {{- $envAll := . }} --- apiVersion: v1 kind: ServiceAccount metadata: name: {{ .Values.releaseName }} namespace: {{ .Values.nameSpace }} {{- end }} ,,220,0
openstack%2Fopenstack-helm-images~master~I57f3e0b17b3959f9ab007ffadf3adf0241d0eb1a,openstack/openstack-helm-images,master,I57f3e0b17b3959f9ab007ffadf3adf0241d0eb1a,Update the constraints url,ABANDONED,2019-09-25 06:03:09.000000000,2020-07-22 01:24:14.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-09-25 06:03:09.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/41e03029896efb2a729833923ef070a14b667d57', 'message': 'Update the constraints url\n\nFor more detail, see http://lists.openstack.org/pipermail/openstack-discuss/2019-May/006478.html\n\nChange-Id: I57f3e0b17b3959f9ab007ffadf3adf0241d0eb1a\n'}]",0,684508,41e03029896efb2a729833923ef070a14b667d57,3,1,1,27822,,,0,"Update the constraints url

For more detail, see http://lists.openstack.org/pipermail/openstack-discuss/2019-May/006478.html

Change-Id: I57f3e0b17b3959f9ab007ffadf3adf0241d0eb1a
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/08/684508/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,41e03029896efb2a729833923ef070a14b667d57,constraints, pip install -c{env:UPPER_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} {opts} {packages}, pip install -c{env:UPPER_CONSTRAINTS_FILE:https://opendev.org/openstack/requirements/raw/branch/master/upper-constraints.txt} {opts} {packages},1,1
openstack%2Fopenstack-helm-addons~master~Ib92dc27543df4db49502263e16fd82e3a9cd6325,openstack/openstack-helm-addons,master,Ib92dc27543df4db49502263e16fd82e3a9cd6325,[WIP] This change is to add into the mini-mirror values an  option to add a folder to the url that is used  for the mini-mirror helm test,ABANDONED,2019-09-23 16:35:03.000000000,2020-07-22 01:24:11.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-09-23 16:35:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-addons/commit/bef1d58dc9a9f1ace1ad4f5b47e4bb59433db7c2', 'message': '[WIP] This change is to add into the mini-mirror values an \noption to add a folder to the url that is used \nfor the mini-mirror helm test\n\nChange-Id: Ib92dc27543df4db49502263e16fd82e3a9cd6325\n'}, {'number': 2, 'created': '2019-09-23 16:51:42.000000000', 'files': ['mini-mirror/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-addons/commit/82f94e730b6a07534bd16b7f8d111dee067f68f6', 'message': '[WIP] This change is to add into the mini-mirror values an \noption to add a folder to the url that is used \nfor the mini-mirror helm test\n\nChange-Id: Ib92dc27543df4db49502263e16fd82e3a9cd6325\n'}]",0,683995,82f94e730b6a07534bd16b7f8d111dee067f68f6,4,1,2,28025,,,0,"[WIP] This change is to add into the mini-mirror values an 
option to add a folder to the url that is used 
for the mini-mirror helm test

Change-Id: Ib92dc27543df4db49502263e16fd82e3a9cd6325
",git fetch https://review.opendev.org/openstack/openstack-helm-addons refs/changes/95/683995/2 && git format-patch -1 --stdout FETCH_HEAD,[],0,bef1d58dc9a9f1ace1ad4f5b47e4bb59433db7c2,,,,0,0
openstack%2Fopenstack-helm-infra~master~I9385aae18de976783c76edc2f59453b48628f538,openstack/openstack-helm-infra,master,I9385aae18de976783c76edc2f59453b48628f538,Monitoring PVC-PV-RBD and mapping them,ABANDONED,2019-09-20 16:04:25.000000000,2020-07-22 01:24:08.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-09-20 16:04:25.000000000', 'files': ['tools/deployment/post_deployment/100-pvc_pv_rbd_monitoring.py'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/90217a384a19a24f2e58eb5baa4c222aec6a1e7d', 'message': ""Monitoring PVC-PV-RBD and mapping them\n\nThe script allows to monitor if PVC has associated PV and RBD associated with PV.\n\nusage: 001-pvc_rbd_monitoring.py [-h] [--rbd] [--pvc] [--all] [--pv] [--bin]\n                                 [--config] [--debug | --silent]\n\noptional arguments:\n  -h, --help    show this help message and exit\n  --debug, -d   enable debugging (default: False)\n  --silent, -s  don't log into console (default: False)\n\nmonitoring settigns:\n  --rbd, -r     check rbd (default: False)\n  --pvc, -p     check permanent volume claim (default: False)\n  --all, -a     all checks (default: False)\n  --pv          check permanent volumes (default: False)\n  --bin, -e     path to kubecl binary (default: None)\n  --config, -c  path to kubecl config (default: None)\n\nChange-Id: I9385aae18de976783c76edc2f59453b48628f538\n""}]",0,683436,90217a384a19a24f2e58eb5baa4c222aec6a1e7d,3,1,1,10108,,,0,"Monitoring PVC-PV-RBD and mapping them

The script allows to monitor if PVC has associated PV and RBD associated with PV.

usage: 001-pvc_rbd_monitoring.py [-h] [--rbd] [--pvc] [--all] [--pv] [--bin]
                                 [--config] [--debug | --silent]

optional arguments:
  -h, --help    show this help message and exit
  --debug, -d   enable debugging (default: False)
  --silent, -s  don't log into console (default: False)

monitoring settigns:
  --rbd, -r     check rbd (default: False)
  --pvc, -p     check permanent volume claim (default: False)
  --all, -a     all checks (default: False)
  --pv          check permanent volumes (default: False)
  --bin, -e     path to kubecl binary (default: None)
  --config, -c  path to kubecl config (default: None)

Change-Id: I9385aae18de976783c76edc2f59453b48628f538
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/36/683436/1 && git format-patch -1 --stdout FETCH_HEAD,['tools/deployment/post_deployment/100-pvc_pv_rbd_monitoring.py'],1,90217a384a19a24f2e58eb5baa4c222aec6a1e7d,,"#!/usr/bin/env python3 import sys import subprocess import argparse import json import logging import logging.handlers import os # need to export path to configuration file. should work faster if os.environ[""KUBECONFIG""] !="""": CONFIG = ""KUBECONFIG={}"".format(os.environ[""KUBECONFIG""]) else: CONFIG = ""KUBECONFIG=/etc/kubernetes/admin/kubeconfig.yaml"" if os.environ[""KUBECTL""] != """": KUBECTL = os.environ[""KUBECTL""] else: KUBECTL = ""/usr/local/bin/kubectl"" OPTIONS = { 'read': ""-o json"", 'ns': ""-n"", 'exec': """" } logger = logging.getLogger(os.path.splitext(os.path.basename(sys.argv[0]))[0]) kubectl = ""{config} {kubectl} {options} {namespace}"".format(config=CONFIG, kubectl=KUBECTL, namespace=OPTIONS[""ns""], options=OPTIONS[""read""]) kubectl_exec = ""{config} {kubectl} {options} {namespace}"".format(config=CONFIG, kubectl=KUBECTL, namespace=OPTIONS[""ns""], options=OPTIONS[""exec""]) class CustomFormatter(argparse.RawDescriptionHelpFormatter, argparse.ArgumentDefaultsHelpFormatter): pass def parse_args(args=sys.argv[1:]): """""" parse arguments of script """""" logger.debug(""Parsing arguments"") parser = argparse.ArgumentParser(description=sys.modules[__name__].__doc__, formatter_class=CustomFormatter) g = parser.add_argument_group(""monitoring settigns"") g.add_argument(""--rbd"", ""-r"", action=""store_true"", default=False, help=""check rbd"") g.add_argument(""--pvc"", ""-p"", action=""store_true"", default=False, help=""check permanent volume claim"") g.add_argument(""--all"", ""-a"", action=""store_true"", default=False, help=""all checks"") g.add_argument(""--pv"", action=""store_true"", default=False, help=""check permanent volumes"") # configuration options g.add_argument(""--bin"", ""-e"", action=""store_const"", const=KUBECTL, help=""path to kubecl binary"") g.add_argument(""--config"", ""-c"", action=""store_const"", const=CONFIG, help=""path to kubecl config"") # debug options g = parser.add_mutually_exclusive_group() g.add_argument(""--debug"", ""-d"", action=""store_true"", default=False, help=""enable debugging"") g.add_argument(""--silent"", ""-s"", action=""store_true"", default=False, help=""don't log into console"") return parser.parse_args(args) def setup_logging(options): """""" configure logging """""" logger.debug(""Configuring logging"") root = logging.getLogger("""") root.setLevel(logging.WARNING) logger.setLevel(options.debug and logging.DEBUG or logging.INFO) if not options.silent: ch = logging.StreamHandler() ch.setFormatter(logging.Formatter(""%(levelname)s [%(name)s] %(message)s"")) root.addHandler(ch) def get_podname(label, namespace): """""" return list of pods in provided namespaces with label """""" logger.debug(""Getting pod names with labels {label} in namespcae {namespace}"".format(label=label, namespace=namespace)) command = ""{command} {namespace} get pods -l {label}"".format(command=kubectl, namespace=namespace, label=label) logger.debug(command) try: output = run_command(command) except Exception as e: logger.error(""Getting pod names for labels {label} in namespace {namespace}"".format(label=label, namespace=namespace)) sys.exit(1) podnames = [] try: out = json.loads(output) for item in out[""items""]: if item['kind'] == ""Pod"": podnames.append(item['metadata']['name']) except Exception as e: sys.exit(1) return podnames def run_command(command): """""" run command in linux shell and return a result """""" try: result = subprocess.check_output(command, shell=True).strip().decode('utf-8') except Exception as e: logger.error(e) sys.exit(1) return result def check_rbd_status(namespace, rbd): """""" return status or rbd in json format """""" ceph_mon = get_podname(""application=ceph,component=mon"", namespace)[0] command = ""{command} {namespace} exec -it {pod} -- rbd status --format json {rbd}"".format(command=kubectl_exec, namespace=namespace, rbd=rbd, pod=ceph_mon) out = run_command(command) try: output = json.loads(out) except Exception as e: output = ""{{'rbd': {}, 'status': {} }}"".format(rbd, e) return output def get_pvc(namespace): """""" return list of permanent volume claim in specific namespace """""" command = ""{command} {namespace} get pvc"".format(command=kubectl, namespace=namespace) out = run_command(command) try: output = json.loads(out) except Exception as e: # output = {'namespace': namespace, 'status': e} output = [] return output def get_pv(persistentvolume, namespace): """""" return list of persistent volumes in specific namespace """""" command = ""{command} {namespace} get pv {pv}"".format(command=kubectl, namespace=namespace, pv=persistentvolume) out = run_command(command) try: output = json.loads(out) except Exception as e: output = {'persistentvolume': namespace, 'status': e} return output def get_namespaces(): """""" return list of namespaces """""" command = ""{command} {namespace} get ns -o json"".format(command=kubectl_exec, namespace=""ceph"") out = run_command(command) try: output = json.loads(out) except Exception as e: output = {""Error"": e} return output def get_rbd_list(namespace): """""" return list of rbd in json format """""" ceph_mon = get_podname(""application=ceph,component=mon"", namespace)[0] command = ""{command} {namespace} exec -it {pod} -- rbd ls --format json"".format(command=kubectl_exec, namespace=namespace, pod=ceph_mon) out = run_command(command) logger.debug(out) try: output = json.loads(out) except Exception as e: output = ""{{'namaspace': {}, 'status': {} }}"".format(namespace, e) logger.error(""parse json rbd list output: {}"".format(e)) return output def monitoring_pvc(): logger.info(""PVCs aren't associated with RBD"") rbds = get_rbd_list(""ceph"") logger.info(""Gettign list of namespaces"") namespaces = get_namespaces() for namespace in namespaces['items']: ns = namespace['metadata']['name'] logger.info(""Checking namespace: {}"".format(ns)) pvc = get_pvc(ns) for pv in pvc['items']: rbd = get_pv(pv['spec']['volumeName'], ns) rbd = rbd['spec']['rbd']['image'] if rbd not in rbds: print (""pvc_doesnot_have_rbd:{{namespace={},name={}}} 0"".format(ns, pv['metadata']['name'])) def monitoring_rbd(): logger.info(""RBD volumes aren't associated with PVC"") r = get_rbd_list(""ceph"") rbds = [] namespaces = get_namespaces() for namespace in namespaces['items']: ns = namespace['metadata']['name'] pvc = get_pvc(ns) for pv in pvc['items']: rbd = get_pv(pv['spec']['volumeName'], ns) rbd = rbd['spec']['rbd']['image'] rbds.append(rbd) logger.info(rbd) for i in r: if i not in rbds: logger.debug(i) print (""rbd_doesnot_have_pvc:{{name={}}} {}"".format(i, len(check_rbd_status(""ceph"", i)['watchers']))) def monitoring_pv(): logger.info(""PVs aren't associated with PVC "") command = ""{config} {kubectl} get pv -o json"".format(config=CONFIG, kubectl=KUBECTL) logger.debug(command) out = run_command(command) logger.debug(out) try: output = json.loads(out) for pv in output['items']: if pv['status']['phase'] == ""Released"": print (""pv_released:{{name={},status={}}} 0"".format(pv['metadata']['name'], pv['status']['phase'])) except Exception as e: logger.error(""gettign rbd list: {}"".format(e)) sys.exit(1) def monitoring(): monitoring_rbd() monitoring_pvc() monitoring_pv() def main(): # nagios monitoring # 0 - Service is OK. # 1 - Service has a WARNING. # 2 - Service is in a CRITICAL status. # 3 - Service status is UNKNOWN # promotheus text file options = parse_args() setup_logging(options) if options.all: logger.info(""all"") monitoring() if options.rbd: logger.info(""rbd"") monitoring_rbd() if options.pvc: logger.info(""pvc"") monitoring_pvc() if options.pv: logger.info(""pv"") monitoring_pv() sys.exit(1) if __name__ == ""__main__"": main() ",,290,0
openstack%2Fopenstack-helm~master~I1ac04f843837e70e81c8db59b8135ed60ff527b9,openstack/openstack-helm,master,I1ac04f843837e70e81c8db59b8135ed60ff527b9,[WIP] Network Policy Egress Gate,ABANDONED,2019-09-16 02:27:47.000000000,2020-07-22 01:23:58.000000000,,"[{'_account_id': 22348}, {'_account_id': 28875}]","[{'number': 1, 'created': '2019-09-16 02:27:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/ab414c4bfb58b69b02aae95d2baae46c8b449336', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 2, 'created': '2019-09-16 11:19:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/4a29a97a08c6ccecca53ed414693200a6bcbcd62', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 3, 'created': '2019-09-16 14:03:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/7b88dae32770d652297e6b38aae1586aaeda8528', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 4, 'created': '2019-09-17 17:58:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/6a7a2db8a0b9ad204fbe3704c68466cd4a4dda2c', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 5, 'created': '2019-09-17 20:19:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/04dccb0215f2769b71e3aee2c588937e1ddba878', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 6, 'created': '2019-09-17 20:36:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9b7daa8d59193f43063d31ff5ec1efc78874c4e8', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 7, 'created': '2019-09-17 21:28:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/732728d75e00b6fb9a441b6544b1ac882b516e66', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 8, 'created': '2019-09-17 22:47:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/25ce7d7a2bdb52e3062f1c03584bb4d27fde40cd', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 9, 'created': '2019-09-18 01:04:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/aba384623421807806b302b6b87e9bae971c297a', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 10, 'created': '2019-09-18 14:03:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/081440e69fbc8ad1eff342e7f08d111094652da1', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 11, 'created': '2019-09-18 14:44:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/685f60cd61f76fda6dbc0766605a9bb734174714', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 12, 'created': '2019-09-18 15:28:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f7615cdbbb4ee576248fed5120d3af7c3630696d', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}, {'number': 13, 'created': '2019-09-18 20:32:40.000000000', 'files': ['tools/deployment/netpol/230-setup-gateway.sh', 'tools/deployment/netpol/000-install-packages.sh', 'tools/deployment/common/deploy-k8s.sh', 'tools/deployment/netpol/060-lockdown.sh', 'tools/deployment/netpol/101-nfs-provisioner.sh', 'zuul.d/jobs-openstack-helm.yaml', 'tools/deployment/netpol/020-setup-client.sh', 'glance/values.yaml', 'tools/deployment/netpol/300-horizon.sh', 'horizon/values.yaml', 'tools/deployment/netpol/210-libvirt.sh', 'tools/deployment/netpol/130-heat.sh', 'tools/deployment/netpol/120-cinder.sh', 'tools/deployment/netpol/080-mariadb.sh', 'tools/deployment/netpol/wait-for-pods.sh', 'keystone/values.yaml', 'tools/deployment/netpol/030-ingress.sh', 'tools/deployment/netpol/110-glance.sh', 'cinder/values.yaml', 'tools/deployment/netpol/090-rabbitmq.sh', 'tools/deployment/netpol/100-keystone.sh', 'tools/deployment/netpol/010-deploy-k8s.sh', 'tools/deployment/netpol/900-use-it.sh', 'tools/deployment/netpol/070-memcache.sh', 'tools/deployment/netpol/200-openvswitch.sh', 'tools/deployment/netpol/220-compute-kit.sh', 'tools/deployment/common/install-packages.sh', 'zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f6cf90e85e56796def630874e1f8f1b831ab527a', 'message': '[WIP] Network Policy Egress Gate\n\nThis patch set adds a gate for egress network policy.\n\nDepends-On: https://review.opendev.org/#/c/679853/\n\nChange-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9\nCo-Authored-By: Gage Hugo <gagehugo@gmail.com>\nCo-Authored-By: Mike Pham <tpham0630@gmail.com>\n'}]",0,682263,f6cf90e85e56796def630874e1f8f1b831ab527a,28,2,13,28875,,,0,"[WIP] Network Policy Egress Gate

This patch set adds a gate for egress network policy.

Depends-On: https://review.opendev.org/#/c/679853/

Change-Id: I1ac04f843837e70e81c8db59b8135ed60ff527b9
Co-Authored-By: Gage Hugo <gagehugo@gmail.com>
Co-Authored-By: Mike Pham <tpham0630@gmail.com>
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/63/682263/13 && git format-patch -1 --stdout FETCH_HEAD,"['tools/deployment/netpol/230-setup-gateway.sh', 'tools/deployment/netpol/000-install-packages.sh', 'tools/deployment/common/deploy-k8s.sh', 'tools/deployment/netpol/060-lockdown.sh', 'tools/deployment/netpol/101-nfs-provisioner.sh', 'zuul.d/jobs-openstack-helm.yaml', 'tools/deployment/netpol/020-setup-client.sh', 'glance/values.yaml', 'tools/deployment/netpol/300-horizon.sh', 'horizon/values.yaml', 'tools/deployment/netpol/210-libvirt.sh', 'tools/deployment/netpol/130-heat.sh', 'tools/deployment/netpol/120-cinder.sh', 'tools/deployment/netpol/080-mariadb.sh', 'keystone/values.yaml', 'tools/deployment/netpol/030-ingress.sh', 'tools/deployment/netpol/110-glance.sh', 'cinder/values.yaml', 'tools/deployment/netpol/090-rabbitmq.sh', 'tools/deployment/netpol/100-keystone.sh', 'tools/deployment/netpol/010-deploy-k8s.sh', 'tools/deployment/netpol/900-use-it.sh', 'tools/deployment/netpol/070-memcache.sh', 'tools/deployment/netpol/200-openvswitch.sh', 'tools/deployment/netpol/220-compute-kit.sh', 'tools/deployment/common/install-packages.sh', 'zuul.d/project.yaml']",27,ab414c4bfb58b69b02aae95d2baae46c8b449336,netpol, - openstack-helm-aio-network-policy #- openstack-helm-lint #- openstack-helm-bandit #- openstack-helm-cinder #- openstack-helm-cinder-pike-ubuntu_xenial: # voting: false #- openstack-helm-cinder-queens-ubuntu_xenial: # voting: false #- openstack-helm-cinder-rocky-ubuntu_xenial: # voting: false #- openstack-helm-cinder-rocky-ubuntu_bionic: # voting: false #- openstack-helm-cinder-rocky-opensuse_15: # voting: false #- openstack-helm-cinder-stein-ubuntu_bionic: # voting: false #- openstack-helm-compute-kit #- openstack-helm-compute-kit-pike-ubuntu_xenial: # voting: false #- openstack-helm-compute-kit-queens-ubuntu_xenial: # voting: false #- openstack-helm-compute-kit-rocky-ubuntu_xenial: # voting: false #- openstack-helm-compute-kit-rocky-ubuntu_bionic: # voting: false #- openstack-helm-compute-kit-rocky-opensuse_15: # voting: false #- openstack-helm-compute-kit-stein-ubuntu_bionic: # voting: false #- openstack-helm-horizon #- openstack-helm-apparmor: # voting: false, - openstack-helm-lint - openstack-helm-bandit - openstack-helm-cinder - openstack-helm-cinder-pike-ubuntu_xenial: voting: false - openstack-helm-cinder-queens-ubuntu_xenial: voting: false - openstack-helm-cinder-rocky-ubuntu_xenial: voting: false - openstack-helm-cinder-rocky-ubuntu_bionic: voting: false - openstack-helm-cinder-rocky-opensuse_15: voting: false - openstack-helm-cinder-stein-ubuntu_bionic: voting: false - openstack-helm-compute-kit - openstack-helm-compute-kit-pike-ubuntu_xenial: voting: false - openstack-helm-compute-kit-queens-ubuntu_xenial: voting: false - openstack-helm-compute-kit-rocky-ubuntu_xenial: voting: false - openstack-helm-compute-kit-rocky-ubuntu_bionic: voting: false - openstack-helm-compute-kit-rocky-opensuse_15: voting: false - openstack-helm-compute-kit-stein-ubuntu_bionic: voting: false - openstack-helm-horizon - openstack-helm-apparmor: voting: false,1059,91
openstack%2Fopenstack-helm-infra~master~Ia2797f3b94320c44d204c51a55395255be87c66c,openstack/openstack-helm-infra,master,Ia2797f3b94320c44d204c51a55395255be87c66c,DNM: Mariadb-py3,ABANDONED,2019-09-12 19:13:20.000000000,2020-07-22 01:23:47.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-09-12 19:13:20.000000000', 'files': ['mariadb/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e5cd98e5d1548d5e580f9b7570749f7b4b4db1a7', 'message': 'DNM: Mariadb-py3\n\nChange-Id: Ia2797f3b94320c44d204c51a55395255be87c66c\nSigned-off-by: Pete Birley <pete@port.direct>\n'}]",0,681884,e5cd98e5d1548d5e580f9b7570749f7b4b4db1a7,3,1,1,23928,,,0,"DNM: Mariadb-py3

Change-Id: Ia2797f3b94320c44d204c51a55395255be87c66c
Signed-off-by: Pete Birley <pete@port.direct>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/84/681884/1 && git format-patch -1 --stdout FETCH_HEAD,['mariadb/values.yaml'],1,e5cd98e5d1548d5e580f9b7570749f7b4b4db1a7,, mariadb: docker.io/port/mariadb-osh-py3:latest, mariadb: docker.io/openstackhelm/mariadb:10.2.18,1,1
openstack%2Fopenstack-helm-images~master~I4dbdea7628b38c3693b54eb3476795c2b2331cca,openstack/openstack-helm-images,master,I4dbdea7628b38c3693b54eb3476795c2b2331cca,WIP: Mariadb Python3,ABANDONED,2019-09-12 16:02:31.000000000,2020-07-22 01:23:41.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-09-12 16:02:31.000000000', 'files': ['mariadb/Dockerfile.ubuntu_xenial'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/9c43ea170d5c9a80f6c15ae6a9712b90df381f4f', 'message': 'WIP: Mariadb Python3\n\nChange-Id: I4dbdea7628b38c3693b54eb3476795c2b2331cca\nSigned-off-by: Pete Birley <pete@port.direct>\n'}]",0,681792,9c43ea170d5c9a80f6c15ae6a9712b90df381f4f,3,1,1,23928,,,0,"WIP: Mariadb Python3

Change-Id: I4dbdea7628b38c3693b54eb3476795c2b2331cca
Signed-off-by: Pete Birley <pete@port.direct>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/92/681792/1 && git format-patch -1 --stdout FETCH_HEAD,['mariadb/Dockerfile.ubuntu_xenial'],1,9c43ea170d5c9a80f6c15ae6a9712b90df381f4f,, python3-pip ;\ pip3 --no-cache-dir install --upgrade pip ;\, python-pip ;\ pip --no-cache-dir install --upgrade pip ;\,2,2
openstack%2Fopenstack-helm-infra~master~I1a5eb55d85dec0fbed15eea49ef00690322308b0,openstack/openstack-helm-infra,master,I1a5eb55d85dec0fbed15eea49ef00690322308b0,WIP/DNM: Prometheus post-run queries,ABANDONED,2019-09-11 12:34:36.000000000,2020-07-22 01:23:35.000000000,,"[{'_account_id': 17591}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-09-11 12:34:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/189ddc71fd0460641d8d2aa188cd68e8daa17021', 'message': 'WIP/DNM: Prometheus post-run queries\n\nChange-Id: I1a5eb55d85dec0fbed15eea49ef00690322308b0\nSigned-off-by: Steve Wilkerson <sw5822@att.com>\n'}, {'number': 2, 'created': '2019-09-11 14:46:47.000000000', 'files': ['zuul.d/project.yaml', 'roles/query-prometheus-alerts/tasks/main.yaml', 'playbooks/osh-infra-query-prometheus-alerts.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/babb0b234af7f51c323a53575486312b552b288b', 'message': 'WIP/DNM: Prometheus post-run queries\n\nChange-Id: I1a5eb55d85dec0fbed15eea49ef00690322308b0\nSigned-off-by: Steve Wilkerson <sw5822@att.com>\n'}]",0,681459,babb0b234af7f51c323a53575486312b552b288b,9,2,2,17591,,,0,"WIP/DNM: Prometheus post-run queries

Change-Id: I1a5eb55d85dec0fbed15eea49ef00690322308b0
Signed-off-by: Steve Wilkerson <sw5822@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/59/681459/2 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'playbooks/osh-infra-query-prometheus-alerts.yaml', 'roles/query-prometheus-alerts/tasks/main.yaml', 'zuul.d/jobs.yaml']",4,189ddc71fd0460641d8d2aa188cd68e8daa17021,lma-post-run, post-run: - playbooks/osh-infra-query-prometheus-alerts.yaml - playbooks/osh-infra-collect-logs.yaml post-run: - playbooks/osh-infra-query-prometheus-alerts.yaml - playbooks/osh-infra-collect-logs.yaml - playbooks/osh-infra-query-prometheus-alerts.yaml, post-run: playbooks/osh-infra-collect-logs.yaml post-run: playbooks/osh-infra-collect-logs.yaml,80,19
openstack%2Fopenstack-helm~master~I4c310448dc5d4f5e24812428a3ab42e7fbdf68d5,openstack/openstack-helm,master,I4c310448dc5d4f5e24812428a3ab42e7fbdf68d5,Drop enabled_drivers from ironic values,ABANDONED,2019-06-20 09:29:25.000000000,2020-07-22 01:23:24.000000000,,"[{'_account_id': 7769}, {'_account_id': 8898}, {'_account_id': 9542}, {'_account_id': 12281}, {'_account_id': 14525}, {'_account_id': 17591}, {'_account_id': 20466}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 28618}, {'_account_id': 29954}]","[{'number': 1, 'created': '2019-06-20 09:29:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b8e97bdf2427976a89777ad844df5e135edc2c3f', 'message': 'Drop enabled_drivers from ironic values\n\nenabled_drivers option was deprecated and when set prevent\nironic-conductor from start [0]. The patch removes it from\nvalues.yaml to make sure defaults work with all releases.\n\n[0] https://review.opendev.org/#/c/578457\n\nChange-Id: I4c310448dc5d4f5e24812428a3ab42e7fbdf68d5\n'}, {'number': 2, 'created': '2019-06-20 21:18:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/c512e6092c98ab0beb6d5bbfb58557e05eeff788', 'message': 'Drop enabled_drivers from ironic values\n\nenabled_drivers option was deprecated and when set prevent\nironic-conductor from start [0]. The patch removes it from\nvalues.yaml to make sure defaults work with all releases.\n\n[0] https://review.opendev.org/#/c/578457\n\nChange-Id: I4c310448dc5d4f5e24812428a3ab42e7fbdf68d5\n'}, {'number': 3, 'created': '2019-09-09 21:59:58.000000000', 'files': ['ironic/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/1d4697be84513cd58d85f27cacfb952ed2c89dca', 'message': 'Drop enabled_drivers from ironic values\n\nenabled_drivers option was deprecated and when set prevent\nironic-conductor from start [0]. The patch removes it from\nvalues.yaml to make sure defaults work with all releases.\n\n[0] https://review.opendev.org/#/c/578457\n\nChange-Id: I4c310448dc5d4f5e24812428a3ab42e7fbdf68d5\n'}]",0,666524,1d4697be84513cd58d85f27cacfb952ed2c89dca,11,12,3,14525,,,0,"Drop enabled_drivers from ironic values

enabled_drivers option was deprecated and when set prevent
ironic-conductor from start [0]. The patch removes it from
values.yaml to make sure defaults work with all releases.

[0] https://review.opendev.org/#/c/578457

Change-Id: I4c310448dc5d4f5e24812428a3ab42e7fbdf68d5
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/24/666524/3 && git format-patch -1 --stdout FETCH_HEAD,['ironic/values.yaml'],1,b8e97bdf2427976a89777ad844df5e135edc2c3f,mstr,, enabled_drivers: agent_ipmitool,0,1
openstack%2Fopenstack-helm-infra~master~I69e283fec98903b7543dba26d54dbfe057c8a0f0,openstack/openstack-helm-infra,master,I69e283fec98903b7543dba26d54dbfe057c8a0f0,Update images refs to use ocata by default,ABANDONED,2019-08-08 16:10:39.000000000,2020-07-22 01:23:18.000000000,,"[{'_account_id': 14525}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-08 16:10:39.000000000', 'files': ['prometheus-openstack-exporter/values.yaml', 'grafana/values.yaml', 'elasticsearch/values.yaml', 'fluentd/values.yaml', 'gnocchi/values.yaml', 'mariadb/values.yaml', 'kubernetes-keystone-webhook/values.yaml', 'ceph-rgw/values.yaml', 'kibana/values.yaml', 'prometheus/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d5660ecf740020699d44df5bbfc4651730e88431', 'message': 'Update images refs to use ocata by default\n\nThis PS moves to move from netwon to ocata for image\nrefs.\n\nChange-Id: I69e283fec98903b7543dba26d54dbfe057c8a0f0\nSigned-off-by: Pete Birley <pete@port.direct>\n'}]",0,675398,d5660ecf740020699d44df5bbfc4651730e88431,4,2,1,23928,,,0,"Update images refs to use ocata by default

This PS moves to move from netwon to ocata for image
refs.

Change-Id: I69e283fec98903b7543dba26d54dbfe057c8a0f0
Signed-off-by: Pete Birley <pete@port.direct>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/98/675398/1 && git format-patch -1 --stdout FETCH_HEAD,"['prometheus-openstack-exporter/values.yaml', 'grafana/values.yaml', 'elasticsearch/values.yaml', 'fluentd/values.yaml', 'gnocchi/values.yaml', 'mariadb/values.yaml', 'kubernetes-keystone-webhook/values.yaml', 'ceph-rgw/values.yaml', 'kibana/values.yaml', 'prometheus/values.yaml']",10,d5660ecf740020699d44df5bbfc4651730e88431,, helm_tests: docker.io/openstackhelm/heat:ocata-ubuntu_xenial, helm_tests: docker.io/openstackhelm/heat:newton-ubuntu_xenial,17,17
openstack%2Fopenstack-helm-infra~master~I02e1db16eaf674c544023843385070f72183b15b,openstack/openstack-helm-infra,master,I02e1db16eaf674c544023843385070f72183b15b,Ingress: VIP Monitoring,ABANDONED,2019-08-01 20:56:23.000000000,2020-07-22 01:23:10.000000000,,"[{'_account_id': 7769}, {'_account_id': 13319}, {'_account_id': 18677}, {'_account_id': 22348}, {'_account_id': 23928}, {'_account_id': 24780}]","[{'number': 1, 'created': '2019-08-01 20:56:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e54b1f64270c21868d72d71a93c9737d502cfe84', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 2, 'created': '2019-08-03 19:08:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/440c454afb7ee95add0e5c00d5678b41ad69e914', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 3, 'created': '2019-08-04 16:08:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4041b9064685d9533f72ab31c34435039fe841d2', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 4, 'created': '2019-08-05 12:44:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b9385efa9faa1954ec7877b3cb4a541103afb916', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 5, 'created': '2019-08-05 15:56:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/3a9e3bc804747b0815bc3855e70419c9c5df0e4c', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 6, 'created': '2019-08-05 18:06:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/736574834af00aff1646582b6c0e92e03b73a0ce', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 7, 'created': '2019-08-05 18:08:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/dd7dcd06eeeaefe6948e82a4f4f18552182f8e49', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 8, 'created': '2019-08-05 19:48:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/870b8e67de41aa4f176f23852df283232f4c571c', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 9, 'created': '2019-08-05 21:21:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b723d4a26b617b868e52785b41a5feba8baaf858', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 10, 'created': '2019-08-19 16:45:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/cbeb799a88d3fbe525425a18ab6025c2fcc91659', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 11, 'created': '2019-08-19 18:12:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/57ead6e2939539f9842e10d8b125174c7ffdbdb2', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 12, 'created': '2019-08-19 19:59:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4409bea1571ba73872bd63e926ca100c8a2f37dc', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 13, 'created': '2019-08-19 20:58:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b892bb1a5eeb4a6835244d595df7ea8c49810764', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 14, 'created': '2019-08-20 13:26:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/05784e6019a2de8db007c1b125ff3ecc9694f1f5', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 15, 'created': '2019-08-20 14:23:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/54e34bd2828d57aca571c04e381a5c06dc707e30', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 16, 'created': '2019-08-20 15:00:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/120b4d671d01042e496b7c65726d31e08cc39c3b', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 17, 'created': '2019-08-20 18:57:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/61ae316afa773c54ecc5f0d4a8fb9d2702ac09f1', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 18, 'created': '2019-08-20 19:24:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/72e26b062881a4ddcf2592435170f54fbc198c55', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 19, 'created': '2019-08-20 19:46:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/43485cfc6ad64d57917d94bbcbe8f0902e6cdec2', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 20, 'created': '2019-08-20 20:07:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f775915c190861268668f0f77a498f9aec939882', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 21, 'created': '2019-08-22 14:25:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0e03225a598060a63dd56cb78ddde28194aad978', 'message': '[WIP] Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 22, 'created': '2019-08-26 16:13:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e13cab80da562f315e0be1ead5ecfdad50d3f33a', 'message': 'Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\nThis process also start a cron job on the control node and also \nmonitors the VIP status on that node. If at any time it is down, it will\nstop the VIP. This cron job does not start VIP once it is back in \nservce. The above process running insode the POD should start it. \n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}, {'number': 23, 'created': '2019-09-06 14:52:35.000000000', 'files': ['ingress/templates/job-start-cron.yaml', 'ingress/templates/deployment-ingress.yaml', 'ingress/templates/bin/_ingress-vip-routed.sh.tpl', 'ingress/templates/configmap-bin.yaml', 'ingress/templates/bin/_vip-cron-job.sh.tpl', 'ingress/templates/bin/_check_vip_status.py.tpl', 'ingress/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4eb948fa322304cdd28b6e1567337b35cc5a9bc1', 'message': 'Ingress: VIP Monitoring\n\nThis PS monitors the VIP status. If at any time it is down, it will\nstop the VIP and once it is back in service it will start it.\nThis process also start a cron job on the control node and also\nmonitors the VIP status on that node. If at any time it is down, it will\nstop the VIP. This cron job does not start VIP once it is back in\nservce. The above process running insode the POD should start it.\n\nChange-Id: I02e1db16eaf674c544023843385070f72183b15b\n'}]",7,674134,4eb948fa322304cdd28b6e1567337b35cc5a9bc1,41,6,23,24780,,,0,"Ingress: VIP Monitoring

This PS monitors the VIP status. If at any time it is down, it will
stop the VIP and once it is back in service it will start it.
This process also start a cron job on the control node and also
monitors the VIP status on that node. If at any time it is down, it will
stop the VIP. This cron job does not start VIP once it is back in
servce. The above process running insode the POD should start it.

Change-Id: I02e1db16eaf674c544023843385070f72183b15b
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/34/674134/1 && git format-patch -1 --stdout FETCH_HEAD,"['ingress/templates/bin/_ingress-vip-routed.sh.tpl', 'ingress/templates/configmap-bin.yaml', 'ingress/templates/deployment-ingress.yaml', 'ingress/templates/bin/_check_vip_status.py.tpl']",4,e54b1f64270c21868d72d71a93c9737d502cfe84,,"opyright 2018 The Openstack-Helm Authors. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. import requests import os vip = os.environ['ADDR'].split('/') print(""%s ..... %s"" % (vip[0], vip[1])) try: r = requests.get('http://' + vip[0], timeout=10) except: exit(1) exit(0) ",,41,0
openstack%2Fmanila-ui~stable%2Ftrain~Ibf35d7196d83e1018881776110ce173e68cf8286,openstack/manila-ui,stable/train,Ibf35d7196d83e1018881776110ce173e68cf8286,Drop legacy dsvm job & change zuulv3 integration job,MERGED,2020-07-20 22:09:05.000000000,2020-07-22 01:22:23.000000000,2020-07-22 01:18:40.000000000,"[{'_account_id': 6413}, {'_account_id': 9003}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 22:09:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-ui/commit/6853bb1c12d0b7c26eedb430ed13a4f56eb5cd00', 'message': 'Drop legacy dsvm job & change zuulv3 integration job\n\nThe legacy job in this repository was just\nsetting up devstack with manila-ui enabled\nand doing nothing else.\n\nWe added an integration gate job a couple of\nreleases ago that does exactly what the above\njob does, and goes a step beyond by executing\ntests that check whether manila-ui is working.\n\nWe can make this job use the fake driver from\nmanila so we can add more interesting and useful\ntest cases without having to worry about any\nlacking capabilities.\n\nAlso make this integration job voting.\n\nChange-Id: Ibf35d7196d83e1018881776110ce173e68cf8286\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n(cherry picked from commit 1f0754ff32660c3b669a1e12d302d4c4eea090a2)\n(cherry picked from commit c29dd15b4d0ed04968001919c3c25536d6d7c9f7)\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n'}, {'number': 2, 'created': '2020-07-20 22:43:27.000000000', 'files': ['playbooks/legacy/manila-ui-dsvm/run.yaml', '.zuul.yaml', 'playbooks/legacy/manila-ui-dsvm/post.yaml'], 'web_link': 'https://opendev.org/openstack/manila-ui/commit/209943752ab922075e1dfc716b9eba4b693b7427', 'message': 'Drop legacy dsvm job & change zuulv3 integration job\n\nThe legacy job in this repository was just\nsetting up devstack with manila-ui enabled\nand doing nothing else.\n\nWe added an integration gate job a couple of\nreleases ago that does exactly what the above\njob does, and goes a step beyond by executing\ntests that check whether manila-ui is working.\n\nWe can make this job use the fake driver from\nmanila so we can add more interesting and useful\ntest cases without having to worry about any\nlacking capabilities.\n\nAlso make this integration job voting.\n\nChange-Id: Ibf35d7196d83e1018881776110ce173e68cf8286\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n(cherry picked from commit 1f0754ff32660c3b669a1e12d302d4c4eea090a2)\n(cherry picked from commit c29dd15b4d0ed04968001919c3c25536d6d7c9f7)\n'}]",0,742035,209943752ab922075e1dfc716b9eba4b693b7427,10,3,2,16643,,,0,"Drop legacy dsvm job & change zuulv3 integration job

The legacy job in this repository was just
setting up devstack with manila-ui enabled
and doing nothing else.

We added an integration gate job a couple of
releases ago that does exactly what the above
job does, and goes a step beyond by executing
tests that check whether manila-ui is working.

We can make this job use the fake driver from
manila so we can add more interesting and useful
test cases without having to worry about any
lacking capabilities.

Also make this integration job voting.

Change-Id: Ibf35d7196d83e1018881776110ce173e68cf8286
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
(cherry picked from commit 1f0754ff32660c3b669a1e12d302d4c4eea090a2)
(cherry picked from commit c29dd15b4d0ed04968001919c3c25536d6d7c9f7)
",git fetch https://review.opendev.org/openstack/manila-ui refs/changes/35/742035/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/manila-ui-dsvm/run.yaml', '.zuul.yaml', 'playbooks/legacy/manila-ui-dsvm/post.yaml']",3,6853bb1c12d0b7c26eedb430ed13a4f56eb5cd00,native-zuulv3-migration,,- hosts: primary tasks: - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=**/*nose_results.html - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=**/*testr_results.html.gz - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=/.testrepository/tmp* - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=**/*testrepository.subunit.gz - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}/tox' mode: pull copy_links: true verify_host: true rsync_opts: - --include=/.tox/*/log/* - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=/logs/** - --include=*/ - --exclude=* - --prune-empty-dirs ,49,181
openstack%2Fopenstack-ansible-os_gnocchi~master~I2d8a498b7ded3b113974dd907945644a480b1040,openstack/openstack-ansible-os_gnocchi,master,I2d8a498b7ded3b113974dd907945644a480b1040,Add centos-8 support,ABANDONED,2020-07-10 18:04:45.000000000,2020-07-22 01:21:32.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-10 18:04:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_gnocchi/commit/ed63056775b2942b1909653ed3f3646de3a541b8', 'message': 'Add centos-8 support\n\nRenaming redhat-7.yml to redhat.yml for centos-8 support.\n\nChange-Id: I2d8a498b7ded3b113974dd907945644a480b1040\n'}, {'number': 2, 'created': '2020-07-20 00:33:54.000000000', 'files': ['vars/redhat.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_gnocchi/commit/b16d07712d0b8c551c0fb252431aee19a5c02b3b', 'message': 'Add centos-8 support\n\nDepends-On: https://review.opendev.org/739400\nChange-Id: I2d8a498b7ded3b113974dd907945644a480b1040\n'}]",0,740513,b16d07712d0b8c551c0fb252431aee19a5c02b3b,6,1,2,28752,,,0,"Add centos-8 support

Depends-On: https://review.opendev.org/739400
Change-Id: I2d8a498b7ded3b113974dd907945644a480b1040
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_gnocchi refs/changes/13/740513/2 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat.yml'],1,ed63056775b2942b1909653ed3f3646de3a541b8,osa/el8," - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('python-devel', 'python36-devel') }}""", - python-devel,1,1
openstack%2Fmanila~stable%2Ftrain~I5eb97ba1b29ad24b296e12064f81eb93533c6b99,openstack/manila,stable/train,I5eb97ba1b29ad24b296e12064f81eb93533c6b99,[NetApp] update set_preferred_dc for ontapi 1.150,MERGED,2020-07-21 07:41:54.000000000,2020-07-22 01:10:49.000000000,2020-07-22 01:09:13.000000000,"[{'_account_id': 16643}, {'_account_id': 18816}, {'_account_id': 22348}, {'_account_id': 25243}]","[{'number': 1, 'created': '2020-07-21 07:41:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/a5e7d693a00ca3fa0d483b0a5209c94a02b11c66', 'message': ""[NetApp] update set_preferred_dc for ontapi 1.150\n\nONTAP 9.5 adds vserver cifs domain preferred-dc configuration\nvalidation. The parameter 'skip-config-validation' is mandatory\nfor 'cifs-domain-preferred-dc-add' now and is set to false,\ni.e. an invalid config will raise early.\n\nChange-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99\nCloses-Bug: 1887643\n(cherry picked from commit 3057d0643e8a93c4ae857159d96e94541ad0be4d)\n""}, {'number': 2, 'created': '2020-07-21 18:38:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/f325be2b3600f15bfe0a292b58452e8a54358490', 'message': ""[NetApp] update set_preferred_dc for ontapi 1.150\n\nONTAP 9.5 adds vserver cifs domain preferred-dc configuration\nvalidation. The parameter 'skip-config-validation' is mandatory\nfor 'cifs-domain-preferred-dc-add' now and is set to false,\ni.e. an invalid config will raise early.\n\nChange-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99\nCloses-Bug: 1887643\n(cherry picked from commit 3057d0643e8a93c4ae857159d96e94541ad0be4d)\n""}, {'number': 3, 'created': '2020-07-21 18:50:22.000000000', 'files': ['manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'releasenotes/notes/bug-1887643-netapp-add-cifs-dc-add-skip-check-c8ea9b952cedb643.yaml', 'manila/share/drivers/netapp/dataontap/client/client_cmode.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/6ad361a1858e9b349e3b379e720ff95bd38ac7ff', 'message': ""[NetApp] update set_preferred_dc for ontapi 1.150\n\nONTAP 9.5 adds vserver cifs domain preferred-dc configuration\nvalidation. The parameter 'skip-config-validation' is mandatory\nfor 'cifs-domain-preferred-dc-add' now and is set to false,\ni.e. an invalid config will raise early.\n\nChange-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99\nCloses-Bug: 1887643\n(cherry picked from commit 3057d0643e8a93c4ae857159d96e94541ad0be4d)\n(cherry picked from commit 7248532de8927c953a6d32491060b11b1e4f2a6b)\n""}]",2,742085,6ad361a1858e9b349e3b379e720ff95bd38ac7ff,18,4,3,18816,,,0,"[NetApp] update set_preferred_dc for ontapi 1.150

ONTAP 9.5 adds vserver cifs domain preferred-dc configuration
validation. The parameter 'skip-config-validation' is mandatory
for 'cifs-domain-preferred-dc-add' now and is set to false,
i.e. an invalid config will raise early.

Change-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99
Closes-Bug: 1887643
(cherry picked from commit 3057d0643e8a93c4ae857159d96e94541ad0be4d)
(cherry picked from commit 7248532de8927c953a6d32491060b11b1e4f2a6b)
",git fetch https://review.opendev.org/openstack/manila refs/changes/85/742085/3 && git format-patch -1 --stdout FETCH_HEAD,"['manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'releasenotes/notes/bug-1887643-netapp-add-cifs-dc-add-skip-check-c8ea9b952cedb643.yaml', 'manila/share/drivers/netapp/dataontap/client/client_cmode.py']",3,a5e7d693a00ca3fa0d483b0a5209c94a02b11c66,bug/1887643," ontapi_1_150 = ontapi_version >= (1, 150) self.features.add_feature('CIFS_DC_ADD_SKIP_CHECK', supported=ontapi_1_150) if self.features.CIFS_DC_ADD_SKIP_CHECK: api_args['skip-config-validation'] = 'false' ",,38,2
openstack%2Fopenstack-helm-images~master~Ib26be083ece5178f7e4a578dfdf1757667c55e60,openstack/openstack-helm-images,master,Ib26be083ece5178f7e4a578dfdf1757667c55e60,Add gcc and make for fluent-plugin-kafka gem installation,MERGED,2020-07-18 22:58:43.000000000,2020-07-22 00:16:25.000000000,2020-07-22 00:14:48.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-18 22:58:43.000000000', 'files': ['fluentd/Dockerfile.debian'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/e74d9571eadf4bceb04bfc96c0acc60f9d16c330', 'message': 'Add gcc and make for fluent-plugin-kafka gem installation\n\nChange-Id: Ib26be083ece5178f7e4a578dfdf1757667c55e60\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",2,741823,e74d9571eadf4bceb04bfc96c0acc60f9d16c330,11,7,1,8863,,,0,"Add gcc and make for fluent-plugin-kafka gem installation

Change-Id: Ib26be083ece5178f7e4a578dfdf1757667c55e60
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/23/741823/1 && git format-patch -1 --stdout FETCH_HEAD,['fluentd/Dockerfile.debian'],1,e74d9571eadf4bceb04bfc96c0acc60f9d16c330,,RUN set -ex; \ apt-get update; \ apt-get install -y gcc make; \ gem install \ fluent-plugin-prometheus; \ apt-get purge -y gcc make,RUN gem install \ fluent-plugin-prometheus,6,2
openstack%2Fpython-manilaclient~master~Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939,openstack/python-manilaclient,master,Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939,Use os_client_config for functional tests,ABANDONED,2016-01-13 16:37:13.000000000,2020-07-22 00:09:34.000000000,,"[{'_account_id': 8851}, {'_account_id': 9003}, {'_account_id': 9285}, {'_account_id': 15100}, {'_account_id': 16643}]","[{'number': 1, 'created': '2016-01-13 16:37:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/9c70031bfa7c45bb9b769b3a6f0834e6be0fa61b', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for python-manilaclient. This can be eliminated if the tests use os_client_config to get authentication environment similar to python-novaclient. With this change, we wont be needing manilaclient.conf for functional tests unless it is used elsewhere in manilaclient code itself.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 2, 'created': '2016-01-13 16:41:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/d3e862523fe0b8df71315712c5d4aecbd3d79389', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for python-manilaclient. This can be eliminated if the tests use os_client_config to get authentication environment similar to python-novaclient. With this change, we wont be needing manilaclient.conf for functional tests unless it is used elsewhere in manilaclient code itself.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 3, 'created': '2016-01-13 16:43:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/15a27da0753e53174267463de8d9397778e9fc31', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for python-manilaclient. This can be eliminated if the tests use os_client_config to get authentication environment similar to python-novaclient. With this change, we wont be needing manilaclient.conf for functional tests unless it is used elsewhere in manilaclient code itself.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 4, 'created': '2016-01-13 16:44:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/207497fb252dc109ed2aeaad71abfae6f919816f', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for\npython-manilaclient. This can be eliminated if the tests use\nos_client_config to get authentication environment similar to\npython-novaclient. With this change, we wont be needing\nmanilaclient.conf for functional tests unless it is used elsewhere\nin manilaclient code itself.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 5, 'created': '2016-01-14 17:05:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/6a8693e9c1aa27df22c4a02afdfd86ba8690c032', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for\npython-manilaclient. This can be eliminated if the tests use\nos_client_config to get authentication environment similar to\npython-novaclient. With this change, we wont be needing\nmanilaclient.conf for functional tests unless it is used elsewhere\nin manilaclient code itself.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 6, 'created': '2016-01-20 15:24:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/40b35ad3cf6f95f3d8522258b8d218a6a5dafe0e', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for\npython-manilaclient. This can be cleaned up if the tests use\nos_client_config to get authentication environment similar to\npython-novaclient.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 7, 'created': '2016-01-21 08:19:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/b0ffcf953292ceb5fafccae796e070ffe3a1ff71', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for\npython-manilaclient. This can be cleaned up if the tests use\nos_client_config to get authentication environment similar to\npython-novaclient.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 8, 'created': '2016-01-21 09:20:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/a6a2de1f286426c5aa5be8c2eb7c5b9187b5b972', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests use a special conf file for\npython-manilaclient. This can be cleaned up if the tests use\nos_client_config to get authentication environment similar to\npython-novaclient.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 9, 'created': '2016-03-17 17:47:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/a6d0a4d421c376425cb693e23199514e96c95dbd', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests is currently read from\nthe conf file. This is cleaner if the tests use\nos_client_config to get authentication environment similar to\nother client projects.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 10, 'created': '2016-03-31 13:16:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/56a7a901819318aacd75280c638fcca4582f0275', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests is currently read from\nthe conf file. This is cleaner if the tests use\nos_client_config to get authentication environment similar to\nother client projects.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 11, 'created': '2016-03-31 13:47:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/323f0fe2a61d1ac06f641acd34de4970a1cb0dd5', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests is currently read from\nthe conf file. This is cleaner if the tests use\nos_client_config to get authentication environment similar to\nother client projects.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 12, 'created': '2016-04-12 11:44:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/0ea9c1d5d26e0d39f30504806cf16172b1e12711', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests is currently read from\nthe conf file. This is cleaner if the tests use\nos_client_config to get authentication environment similar to\nother client projects.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}, {'number': 13, 'created': '2016-05-16 20:03:30.000000000', 'files': ['test-requirements.txt', 'contrib/ci/post_test_hook.sh', 'manilaclient/tests/functional/base.py'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/dd67d43a22ccaa4d38600ded2dc39f92d30f7f36', 'message': 'Use os_client_config for functional tests\n\nAuthentication for functional tests is currently read from\nthe conf file. This is cleaner if the tests use\nos_client_config to get authentication environment similar to\nother client projects.\n\nChange-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939\nCloses-bug: #1532115\n'}]",20,267018,dd67d43a22ccaa4d38600ded2dc39f92d30f7f36,33,5,13,9285,,,0,"Use os_client_config for functional tests

Authentication for functional tests is currently read from
the conf file. This is cleaner if the tests use
os_client_config to get authentication environment similar to
other client projects.

Change-Id: Iadebc6ede3f78a0003b0db9b8bdbb9354abdd939
Closes-bug: #1532115
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/18/267018/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'manilaclient/tests/functional/base.py']",2,9c70031bfa7c45bb9b769b3a6f0834e6be0fa61b,bug/1532115,"import osimport os_client_config (lib_exc.NotFound, lib_exc.Forbidden))):class NoCloudConfigException(Exception): """"""We couldn't find a cloud configuration."""""" pass openstack_config = os_client_config.config.OpenStackConfig() try: cloud_config = cls.openstack_config.get_one_cloud( 'functional_admin') except os_client_config.exceptions.OpenStackConfigException: try: cloud_config = cls.openstack_config.get_one_cloud( auth=dict(username='admin', project_name='admin')) except os_client_config.exceptions.OpenStackConfigException: try: cloud_config = cls.openstack_config.get_one_cloud( 'envvars') except os_client_config.exceptions.OpenStackConfigException: cloud_config = None if cloud_config is None: raise NoCloudConfigException(""Cloud not find a suitable cloud for "" ""functional tests. Please check your "" ""environment or update your "" "" clouds.yaml and check again"") auth_info = cloud_config.config['auth'] user = auth_info['username'] passwd = auth_info['password'] tenant = auth_info['project_name'] auth_url = auth_info['auth_url'] username=user, password=passwd, tenant_name=tenant, uri=auth_url, cli_dir=os.environ.get('OS_MANILACLIENT_EXEC_DIR')) manilaclient.share_network = ( os.environ.get('OS_ADMIN_SHARE_NETWORK') or None) try: cloud_config = cls.openstack_config.get_one_cloud( 'admin', auth=dict(admin_user='manila', admin_tenant_name='service')) except os_client_config.exceptions.OpenStackConfigException: try: cloud_config = cls.openstack_config.get_one_cloud('envvars') except os_client_config.exceptions.OpenStackConfigException: cloud_config = None if cloud_config is None: raise NoCloudConfigException(""Cloud not find a suitable cloud for "" ""functional tests. Please check your "" ""environment or update your "" ""clouds.yaml and check again"") cloud_config.config['auth_type'] = 'admin_token' auth_info = cloud_config.config['auth'] user = auth_info['username'] passwd = auth_info['password'] tenant = auth_info['project_name'] auth_url = auth_info['auth_url'] username=user, password=passwd, tenant_name=tenant, uri=auth_url, cli_dir=os.environ.get('OS_MANILACLIENT_EXEC_DIR')) manilaclient.share_network = ( os.environ.get('OS_SERVICE_SHARE_NETWORK') or None)","from manilaclient import configCONF = config.CONF Suppress all other exceptions only in case config opt 'suppress_errors_in_cleanup' is True. (lib_exc.NotFound, lib_exc.Forbidden)) or CONF.suppress_errors_in_cleanup): username=CONF.admin_username, password=CONF.admin_password, tenant_name=CONF.admin_tenant_name, uri=CONF.admin_auth_url or CONF.auth_url, cli_dir=CONF.manila_exec_dir) manilaclient.share_network = CONF.admin_share_network username=CONF.username, password=CONF.password, tenant_name=CONF.tenant_name, uri=CONF.auth_url, cli_dir=CONF.manila_exec_dir) manilaclient.share_network = CONF.share_network share_type = share_type or CONF.share_type",70,19
openstack%2Fmanila~stable%2Fussuri~I5eb97ba1b29ad24b296e12064f81eb93533c6b99,openstack/manila,stable/ussuri,I5eb97ba1b29ad24b296e12064f81eb93533c6b99,[NetApp] update set_preferred_dc for ontapi 1.150,MERGED,2020-07-21 07:41:22.000000000,2020-07-22 00:07:17.000000000,2020-07-22 00:05:22.000000000,"[{'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-21 07:41:22.000000000', 'files': ['manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'releasenotes/notes/bug-1887643-netapp-add-cifs-dc-add-skip-check-c8ea9b952cedb643.yaml', 'manila/share/drivers/netapp/dataontap/client/client_cmode.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/7248532de8927c953a6d32491060b11b1e4f2a6b', 'message': ""[NetApp] update set_preferred_dc for ontapi 1.150\n\nONTAP 9.5 adds vserver cifs domain preferred-dc configuration\nvalidation. The parameter 'skip-config-validation' is mandatory\nfor 'cifs-domain-preferred-dc-add' now and is set to false,\ni.e. an invalid config will raise early.\n\nChange-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99\nCloses-Bug: 1887643\n(cherry picked from commit 3057d0643e8a93c4ae857159d96e94541ad0be4d)\n""}]",0,742084,7248532de8927c953a6d32491060b11b1e4f2a6b,18,4,1,18816,,,0,"[NetApp] update set_preferred_dc for ontapi 1.150

ONTAP 9.5 adds vserver cifs domain preferred-dc configuration
validation. The parameter 'skip-config-validation' is mandatory
for 'cifs-domain-preferred-dc-add' now and is set to false,
i.e. an invalid config will raise early.

Change-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99
Closes-Bug: 1887643
(cherry picked from commit 3057d0643e8a93c4ae857159d96e94541ad0be4d)
",git fetch https://review.opendev.org/openstack/manila refs/changes/84/742084/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'releasenotes/notes/bug-1887643-netapp-add-cifs-dc-add-skip-check-c8ea9b952cedb643.yaml', 'manila/share/drivers/netapp/dataontap/client/client_cmode.py']",3,7248532de8927c953a6d32491060b11b1e4f2a6b,bug/1887643," ontapi_1_150 = ontapi_version >= (1, 150) self.features.add_feature('CIFS_DC_ADD_SKIP_CHECK', supported=ontapi_1_150) if self.features.CIFS_DC_ADD_SKIP_CHECK: api_args['skip-config-validation'] = 'false' ",,38,2
openstack%2Fopenstack-ansible-os_cinder~stable%2Fussuri~I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d,openstack/openstack-ansible-os_cinder,stable/ussuri,I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d,Add Centos-8 support,MERGED,2020-07-21 17:23:40.000000000,2020-07-21 23:29:33.000000000,2020-07-21 23:27:48.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2020-07-21 17:23:40.000000000', 'files': ['vars/redhat.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/d5c49ab82757befa0a2b6b2b99eb1072c1108796', 'message': 'Add Centos-8 support\n\nChange-Id: I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d\n(cherry picked from commit 983ee0aef7ba013780bcf3aba491c80d609a233c)\n'}]",0,742254,d5c49ab82757befa0a2b6b2b99eb1072c1108796,8,3,1,25023,,,0,"Add Centos-8 support

Change-Id: I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d
(cherry picked from commit 983ee0aef7ba013780bcf3aba491c80d609a233c)
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_cinder refs/changes/54/742254/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat.yml'],1,d5c49ab82757befa0a2b6b2b99eb1072c1108796,osa/el8-stable/ussuri," - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('systemd-python', 'python3-systemd') }}""", - python-openstackclient - python2-shade - systemd-python,1,3
openstack%2Fironic~master~I34a11f52e8e98e5b64f2d21f7190468a9e4b030d,openstack/ironic,master,I34a11f52e8e98e5b64f2d21f7190468a9e4b030d,Allow retrying PXE boot if it takes too long,MERGED,2019-09-19 12:24:21.000000000,2020-07-21 23:23:50.000000000,2019-09-23 12:58:26.000000000,"[{'_account_id': 6618}, {'_account_id': 10118}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 19339}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-09-19 12:24:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/7ea175c4c9f1d0c9d007afffd5fa80db0a4409fd', 'message': '[WIP] Allow retrying PXE boot if it takes too long\n\nChange-Id: I34a11f52e8e98e5b64f2d21f7190468a9e4b030d\nStory: #2005167\nTask: #29901\n'}, {'number': 2, 'created': '2019-09-19 12:27:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/9186a03ccd415598bf9e3cfc745ae6d92db5bb4b', 'message': '[WIP] Allow retrying PXE boot if it takes too long\n\nChange-Id: I34a11f52e8e98e5b64f2d21f7190468a9e4b030d\nStory: #2005167\nTask: #29901\n'}, {'number': 3, 'created': '2019-09-19 13:07:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/324b82cf28efc3116ac2388e98d304f1c8399867', 'message': '[WIP] Allow retrying PXE boot if it takes too long\n\nPXE is inherently unreliable and sometimes times out without an\nobvious reason. It happens particularly often in resource constrained\nenvironments, such as the CI. This change allows an operator to\nset a timeout, after which the boot is retried again.\n\nChange-Id: I34a11f52e8e98e5b64f2d21f7190468a9e4b030d\nStory: #2005167\nTask: #29901\n'}, {'number': 4, 'created': '2019-09-20 11:06:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/86f6e70d9b72ca33fd82f4e2ba1ef602ed544066', 'message': '[WIP] Allow retrying PXE boot if it takes too long\n\nPXE is inherently unreliable and sometimes times out without an\nobvious reason. It happens particularly often in resource constrained\nenvironments, such as the CI. This change allows an operator to\nset a timeout, after which the boot is retried again.\n\nThe _add_node_filters call had to be refactored to avoid hitting\nthe complexity limit.\n\nChange-Id: I34a11f52e8e98e5b64f2d21f7190468a9e4b030d\nStory: #2005167\nTask: #29901\n'}, {'number': 5, 'created': '2019-09-20 12:14:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8c6eb29dfe68bc7a85d11c8cfd771fb462c21add', 'message': 'Allow retrying PXE boot if it takes too long\n\nPXE is inherently unreliable and sometimes times out without an\nobvious reason. It happens particularly often in resource constrained\nenvironments, such as the CI. This change allows an operator to\nset a timeout, after which the boot is retried again.\n\nThe _add_node_filters call had to be refactored to avoid hitting\nthe complexity limit.\n\nChange-Id: I34a11f52e8e98e5b64f2d21f7190468a9e4b030d\nStory: #2005167\nTask: #29901\n'}, {'number': 6, 'created': '2019-09-20 13:26:16.000000000', 'files': ['ironic/conf/pxe.py', 'ironic/drivers/modules/pxe_base.py', 'devstack/lib/ironic', 'ironic/db/sqlalchemy/api.py', 'ironic/drivers/modules/pxe.py', 'ironic/conductor/utils.py', 'ironic/tests/unit/db/test_nodes.py', 'ironic/tests/unit/drivers/modules/test_pxe.py', 'releasenotes/notes/pxe-retry-762a00ba1089bd75.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/b2834e66619c5f968389fa6ab1cf3e5f99cbafa3', 'message': 'Allow retrying PXE boot if it takes too long\n\nPXE is inherently unreliable and sometimes times out without an\nobvious reason. It happens particularly often in resource constrained\nenvironments, such as the CI. This change allows an operator to\nset a timeout, after which the boot is retried again.\n\nThe _add_node_filters call had to be refactored to avoid hitting\nthe complexity limit.\n\nChange-Id: I34a11f52e8e98e5b64f2d21f7190468a9e4b030d\nStory: #2005167\nTask: #29901\n'}]",34,683127,b2834e66619c5f968389fa6ab1cf3e5f99cbafa3,45,6,6,10239,,,0,"Allow retrying PXE boot if it takes too long

PXE is inherently unreliable and sometimes times out without an
obvious reason. It happens particularly often in resource constrained
environments, such as the CI. This change allows an operator to
set a timeout, after which the boot is retried again.

The _add_node_filters call had to be refactored to avoid hitting
the complexity limit.

Change-Id: I34a11f52e8e98e5b64f2d21f7190468a9e4b030d
Story: #2005167
Task: #29901
",git fetch https://review.opendev.org/openstack/ironic refs/changes/27/683127/6 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/conf/pxe.py', 'ironic/drivers/modules/pxe_base.py', 'devstack/lib/ironic', 'ironic/db/sqlalchemy/api.py', 'ironic/drivers/modules/pxe.py', 'ironic/conductor/utils.py', 'ironic/tests/unit/db/test_nodes.py']",7,7ea175c4c9f1d0c9d007afffd5fa80db0a4409fd,story/2005167/pxe-retry," provision_updated_at=past, provision_state=states.DEPLOYING) res = self.dbapi.get_nodeinfo_list( filters={'provision_state_in': [states.ACTIVE, states.DEPLOYING]}) self.assertEqual([node1.id], [r[0] for r in res]) ", provision_updated_at=past),126,36
openstack%2Ftripleo-ansible~master~I07a41bdb699c6ec9a422d10b56186fdb5ebe3434,openstack/tripleo-ansible,master,I07a41bdb699c6ec9a422d10b56186fdb5ebe3434,"Revert ""tripleo_container_manage: add test if systemd service is disabled""",MERGED,2020-07-21 22:41:08.000000000,2020-07-21 23:19:48.000000000,2020-07-21 23:19:48.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 22:41:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ced7f5299fb795b5cbc517cbbe4b575b14c3bfb7', 'message': 'Revert ""tripleo_container_manage: add test if systemd service is disabled""\n\nIt\'s unstable, I need to figure it out why.\nThis reverts commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c.\n\nChange-Id: I07a41bdb699c6ec9a422d10b56186fdb5ebe3434\n'}, {'number': 2, 'created': '2020-07-21 22:41:11.000000000', 'files': ['tripleo_ansible/roles/tripleo_container_manage/molecule/default/converge.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/c9cab3399b3fe819ab06713df8b5663b7de5e412', 'message': 'Revert ""tripleo_container_manage: add test if systemd service is disabled""\n\nIt\'s unstable, I need to figure it out why.\nThis reverts commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c.\n\nChange-Id: I07a41bdb699c6ec9a422d10b56186fdb5ebe3434\n'}]",0,742303,c9cab3399b3fe819ab06713df8b5663b7de5e412,8,5,2,3153,,,0,"Revert ""tripleo_container_manage: add test if systemd service is disabled""

It's unstable, I need to figure it out why.
This reverts commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c.

Change-Id: I07a41bdb699c6ec9a422d10b56186fdb5ebe3434
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/03/742303/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_container_manage/molecule/default/converge.yml'],1,ced7f5299fb795b5cbc517cbbe4b575b14c3bfb7,restart,,- name: Test systemd state on fedora container after a manual stop become: true hosts: all gather_facts: false vars: tripleo_container_manage_config: '/tmp/container-configs' tripleo_container_manage_debug: true tripleo_container_manage_config_patterns: '*.json' tripleo_container_manage_systemd_order: true tasks: - name: Stop systemd service for tripleo_fedora in a manual stop systemd: name: tripleo_fedora.service state: stopped enabled: false daemon_reload: true - include_role: name: tripleo_container_manage post_tasks: - name: Check if tripleo_fedora systemd service is active after a manual stop command: systemctl is-active --quiet tripleo_fedora register: tripleo_fedora_active_result - name: Assert that tripleo_fedora systemd service is active after a manual stop when: - not ansible_check_mode|bool assert: that: - tripleo_fedora_active_result.rc == 0 fail_msg: 'tripleo_fedora systemd service is not active after a manual stop' success_msg: 'tripleo_fedora systemd service is active after a manual stop' ,0,31
openstack%2Fpython-openstackclient~stable%2Fqueens~I59cbf3f75c55e5d3747654edcc9be86ad954cf40,openstack/python-openstackclient,stable/queens,I59cbf3f75c55e5d3747654edcc9be86ad954cf40,Add --name-lookup-one-by-one option to server list,MERGED,2019-10-26 04:38:30.000000000,2020-07-21 23:13:54.000000000,2020-07-21 23:12:22.000000000,"[{'_account_id': 4690}, {'_account_id': 9542}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2019-10-26 04:38:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/d8a1af5588f2482dc6eda216d78648b962b2b2d9', 'message': ""Add --name-lookup-one-by-one option to server list\n\nusually in a big cloud there are many images and flavors,\nwhile each given project might use only some of those.\n\nThis patch introduces '--name-lookup-one-by-one' argument to\nserver list command (mutually exclusive with '--no-name-lookup')\n\nWhen provided (or either '--image' or '--flavor' is specified) to the\n`server list` command, name resolving for\ncorresponding entity is now using targeted GET commands instead of\nfull entities list.\n\nIn some situations this can significantly speedup the execution of the\n`server list` command by reducing the number of API requests performed.\n\n Conflicts:\n\topenstackclient/compute/v2/server.py\n\nNOTE(melwitt): The conflict is due to change\nI93a56138c50b82fb4dce67a2f788107f71c5f423 which is not in Queens.\n\nChange-Id: I59cbf3f75c55e5d3747654edcc9be86ad954cf40\nStory: #2002039\nTask: #19682\n(cherry picked from commit e782f49927a6b142a35f85a1a4a759fd2b1ceedf)\n(cherry picked from commit dda007ba33b5c7d1ae539926b826749727276e3c)\n""}, {'number': 2, 'created': '2020-07-21 00:54:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/8ede91a619781a48de4b8413c65dbfa0068dc7fc', 'message': ""Add --name-lookup-one-by-one option to server list\n\nusually in a big cloud there are many images and flavors,\nwhile each given project might use only some of those.\n\nThis patch introduces '--name-lookup-one-by-one' argument to\nserver list command (mutually exclusive with '--no-name-lookup')\n\nWhen provided (or either '--image' or '--flavor' is specified) to the\n`server list` command, name resolving for\ncorresponding entity is now using targeted GET commands instead of\nfull entities list.\n\nIn some situations this can significantly speedup the execution of the\n`server list` command by reducing the number of API requests performed.\n\n Conflicts:\n\topenstackclient/compute/v2/server.py\n\nNOTE(melwitt): The conflict is due to change\nI93a56138c50b82fb4dce67a2f788107f71c5f423 which is not in Queens.\n\nChange-Id: I59cbf3f75c55e5d3747654edcc9be86ad954cf40\nStory: #2002039\nTask: #19682\n(cherry picked from commit e782f49927a6b142a35f85a1a4a759fd2b1ceedf)\n(cherry picked from commit dda007ba33b5c7d1ae539926b826749727276e3c)\n""}, {'number': 3, 'created': '2020-07-21 03:17:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/8de7492758f4cd8568767511be7afe36e5ce0da1', 'message': ""Add --name-lookup-one-by-one option to server list\n\nusually in a big cloud there are many images and flavors,\nwhile each given project might use only some of those.\n\nThis patch introduces '--name-lookup-one-by-one' argument to\nserver list command (mutually exclusive with '--no-name-lookup')\n\nWhen provided (or either '--image' or '--flavor' is specified) to the\n`server list` command, name resolving for\ncorresponding entity is now using targeted GET commands instead of\nfull entities list.\n\nIn some situations this can significantly speedup the execution of the\n`server list` command by reducing the number of API requests performed.\n\n Conflicts:\n\topenstackclient/compute/v2/server.py\n\nNOTE(melwitt): The conflict is due to change\nI93a56138c50b82fb4dce67a2f788107f71c5f423 which is not in Queens.\n\nChange-Id: I59cbf3f75c55e5d3747654edcc9be86ad954cf40\nStory: #2002039\nTask: #19682\n(cherry picked from commit e782f49927a6b142a35f85a1a4a759fd2b1ceedf)\n(cherry picked from commit dda007ba33b5c7d1ae539926b826749727276e3c)\n""}, {'number': 4, 'created': '2020-07-21 03:26:47.000000000', 'files': ['releasenotes/notes/name-lookup-one-by-one-e0f15f4eab329b19.yaml', 'openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/defa0f562b8efc8fc917f1b195c998e2d6224260', 'message': ""Add --name-lookup-one-by-one option to server list\n\nusually in a big cloud there are many images and flavors,\nwhile each given project might use only some of those.\n\nThis patch introduces '--name-lookup-one-by-one' argument to\nserver list command (mutually exclusive with '--no-name-lookup')\n\nWhen provided (or either '--image' or '--flavor' is specified) to the\n`server list` command, name resolving for\ncorresponding entity is now using targeted GET commands instead of\nfull entities list.\n\nIn some situations this can significantly speedup the execution of the\n`server list` command by reducing the number of API requests performed.\n\n Conflicts:\n\topenstackclient/compute/v2/server.py\n\nNOTE(melwitt): The conflict is due to change\nI93a56138c50b82fb4dce67a2f788107f71c5f423 which is not in Queens.\n\nChange-Id: I59cbf3f75c55e5d3747654edcc9be86ad954cf40\nStory: #2002039\nTask: #19682\n(cherry picked from commit e782f49927a6b142a35f85a1a4a759fd2b1ceedf)\n(cherry picked from commit dda007ba33b5c7d1ae539926b826749727276e3c)\n""}]",0,691459,defa0f562b8efc8fc917f1b195c998e2d6224260,33,6,4,4690,,,0,"Add --name-lookup-one-by-one option to server list

usually in a big cloud there are many images and flavors,
while each given project might use only some of those.

This patch introduces '--name-lookup-one-by-one' argument to
server list command (mutually exclusive with '--no-name-lookup')

When provided (or either '--image' or '--flavor' is specified) to the
`server list` command, name resolving for
corresponding entity is now using targeted GET commands instead of
full entities list.

In some situations this can significantly speedup the execution of the
`server list` command by reducing the number of API requests performed.

 Conflicts:
	openstackclient/compute/v2/server.py

NOTE(melwitt): The conflict is due to change
I93a56138c50b82fb4dce67a2f788107f71c5f423 which is not in Queens.

Change-Id: I59cbf3f75c55e5d3747654edcc9be86ad954cf40
Story: #2002039
Task: #19682
(cherry picked from commit e782f49927a6b142a35f85a1a4a759fd2b1ceedf)
(cherry picked from commit dda007ba33b5c7d1ae539926b826749727276e3c)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/59/691459/3 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/name-lookup-one-by-one-e0f15f4eab329b19.yaml', 'openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py']",3,d8a1af5588f2482dc6eda216d78648b962b2b2d9,optimize-server-list," name_lookup_group = parser.add_mutually_exclusive_group() name_lookup_group.add_argument( help=_('Skip flavor and image name lookup.' 'Mutually exclusive with ""--name-lookup-one-by-one""' ' option.'), ) name_lookup_group.add_argument( '--name-lookup-one-by-one', action='store_true', default=False, help=_('When looking up flavor and image names, look them up' 'one by one as needed instead of all together (default). ' 'Mutually exclusive with ""--no-name-lookup|-n"" option.'), if not parsed_args.no_name_lookup: # Create a dict that maps image_id to image object. # Needed so that we can display the ""Image Name"" column. # ""Image Name"" is not crucial, so we swallow any exceptions. if parsed_args.name_lookup_one_by_one or image_id: for i_id in set(filter(lambda x: x is not None, (s.image.get('id') for s in data))): try: images[i_id] = image_client.images.get(i_id) except Exception: pass else: try: images_list = image_client.images.list() for i in images_list: images[i.id] = i except Exception: pass # Create a dict that maps flavor_id to flavor object. # Needed so that we can display the ""Flavor Name"" column. # ""Flavor Name"" is not crucial, so we swallow any exceptions. if parsed_args.name_lookup_one_by_one or flavor_id: for f_id in set(filter(lambda x: x is not None, (s.flavor.get('id') for s in data))): try: flavors[f_id] = compute_client.flavors.get(f_id) except Exception: pass else: try: flavors_list = compute_client.flavors.list(is_public=None) for i in flavors_list: flavors[i.id] = i except Exception: pass"," parser.add_argument( help=_('Skip flavor and image name lookup.'), # Create a dict that maps image_id to image object. # Needed so that we can display the ""Image Name"" column. # ""Image Name"" is not crucial, so we swallow any exceptions. if not parsed_args.no_name_lookup: try: images_list = self.app.client_manager.image.images.list() for i in images_list: images[i.id] = i except Exception: pass # Create a dict that maps flavor_id to flavor object. # Needed so that we can display the ""Flavor Name"" column. # ""Flavor Name"" is not crucial, so we swallow any exceptions. if not parsed_args.no_name_lookup: try: flavors_list = compute_client.flavors.list() for i in flavors_list: flavors[i.id] = i except Exception: pass",91,23
openstack%2Fpython-openstackclient~stable%2Fqueens~I312c971346c7ded93f6fcaa515098554b8580295,openstack/python-openstackclient,stable/queens,I312c971346c7ded93f6fcaa515098554b8580295,Fix BFV server list handling with --name-lookup-one-by-one,MERGED,2019-10-26 04:38:30.000000000,2020-07-21 23:12:27.000000000,2020-07-21 23:12:27.000000000,"[{'_account_id': 4690}, {'_account_id': 9542}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 31245}]","[{'number': 1, 'created': '2019-10-26 04:38:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/9f152083703f899c0e9c345343760e537bcf1dc1', 'message': ""Fix BFV server list handling with --name-lookup-one-by-one\n\nWhen the --name-lookup-one-by-one option passed to the 'server list'\ncommand, the image and flavor names will be looked up for each\nserver being listed instead of fetching all image/flavor names.\n\nThe current code assumes all servers have an image attribute, but\nservers booted from volumes have no image, so the following error is\nraised when listing BFV servers with --name-lookup-one-by-one:\n\n  AttributeError: ('unicode'|'str') object has no attribute 'get'\n\nThe error occurs when the code attempts server.image.get('id').\n\nThis fixes the --name-lookup-one-by-one code not to assume an image\nfor a server. The unit tests for 'server list' have also been\nrobustified to feature one BFV server to enhance our test coverage.\n\nStory: #2006063\nTask: #34777\n\nChange-Id: I312c971346c7ded93f6fcaa515098554b8580295\n(cherry picked from commit bfc34e11b3437506508b3e120accc0e212268ac6)\n(cherry picked from commit 83359fbe4fd7e5850abd45a467bf197c284519b1)\n(cherry picked from commit 9698c6675033664fd262bad7844af12067ff3bea)\n""}, {'number': 2, 'created': '2020-07-21 00:54:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/3473bdf6e008d36bba9859f3d2db6c881111b7e3', 'message': ""Fix BFV server list handling with --name-lookup-one-by-one\n\nWhen the --name-lookup-one-by-one option passed to the 'server list'\ncommand, the image and flavor names will be looked up for each\nserver being listed instead of fetching all image/flavor names.\n\nThe current code assumes all servers have an image attribute, but\nservers booted from volumes have no image, so the following error is\nraised when listing BFV servers with --name-lookup-one-by-one:\n\n  AttributeError: ('unicode'|'str') object has no attribute 'get'\n\nThe error occurs when the code attempts server.image.get('id').\n\nThis fixes the --name-lookup-one-by-one code not to assume an image\nfor a server. The unit tests for 'server list' have also been\nrobustified to feature one BFV server to enhance our test coverage.\n\nStory: #2006063\nTask: #34777\n\nChange-Id: I312c971346c7ded93f6fcaa515098554b8580295\n(cherry picked from commit bfc34e11b3437506508b3e120accc0e212268ac6)\n(cherry picked from commit 83359fbe4fd7e5850abd45a467bf197c284519b1)\n(cherry picked from commit 9698c6675033664fd262bad7844af12067ff3bea)\n""}, {'number': 3, 'created': '2020-07-21 03:17:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/178a7e0523daa1ba6e8c6cf090943ebc80ca8cc0', 'message': ""Fix BFV server list handling with --name-lookup-one-by-one\n\nWhen the --name-lookup-one-by-one option passed to the 'server list'\ncommand, the image and flavor names will be looked up for each\nserver being listed instead of fetching all image/flavor names.\n\nThe current code assumes all servers have an image attribute, but\nservers booted from volumes have no image, so the following error is\nraised when listing BFV servers with --name-lookup-one-by-one:\n\n  AttributeError: ('unicode'|'str') object has no attribute 'get'\n\nThe error occurs when the code attempts server.image.get('id').\n\nThis fixes the --name-lookup-one-by-one code not to assume an image\nfor a server. The unit tests for 'server list' have also been\nrobustified to feature one BFV server to enhance our test coverage.\n\nStory: #2006063\nTask: #34777\n\nChange-Id: I312c971346c7ded93f6fcaa515098554b8580295\n(cherry picked from commit bfc34e11b3437506508b3e120accc0e212268ac6)\n(cherry picked from commit 83359fbe4fd7e5850abd45a467bf197c284519b1)\n(cherry picked from commit 9698c6675033664fd262bad7844af12067ff3bea)\n""}, {'number': 4, 'created': '2020-07-21 03:26:47.000000000', 'files': ['openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/13bab18888f56ae076250a0c90a09a05152be675', 'message': ""Fix BFV server list handling with --name-lookup-one-by-one\n\nWhen the --name-lookup-one-by-one option passed to the 'server list'\ncommand, the image and flavor names will be looked up for each\nserver being listed instead of fetching all image/flavor names.\n\nThe current code assumes all servers have an image attribute, but\nservers booted from volumes have no image, so the following error is\nraised when listing BFV servers with --name-lookup-one-by-one:\n\n  AttributeError: ('unicode'|'str') object has no attribute 'get'\n\nThe error occurs when the code attempts server.image.get('id').\n\nThis fixes the --name-lookup-one-by-one code not to assume an image\nfor a server. The unit tests for 'server list' have also been\nrobustified to feature one BFV server to enhance our test coverage.\n\nStory: #2006063\nTask: #34777\n\nChange-Id: I312c971346c7ded93f6fcaa515098554b8580295\n(cherry picked from commit bfc34e11b3437506508b3e120accc0e212268ac6)\n(cherry picked from commit 83359fbe4fd7e5850abd45a467bf197c284519b1)\n(cherry picked from commit 9698c6675033664fd262bad7844af12067ff3bea)\n""}]",0,691460,13bab18888f56ae076250a0c90a09a05152be675,26,7,4,4690,,,0,"Fix BFV server list handling with --name-lookup-one-by-one

When the --name-lookup-one-by-one option passed to the 'server list'
command, the image and flavor names will be looked up for each
server being listed instead of fetching all image/flavor names.

The current code assumes all servers have an image attribute, but
servers booted from volumes have no image, so the following error is
raised when listing BFV servers with --name-lookup-one-by-one:

  AttributeError: ('unicode'|'str') object has no attribute 'get'

The error occurs when the code attempts server.image.get('id').

This fixes the --name-lookup-one-by-one code not to assume an image
for a server. The unit tests for 'server list' have also been
robustified to feature one BFV server to enhance our test coverage.

Story: #2006063
Task: #34777

Change-Id: I312c971346c7ded93f6fcaa515098554b8580295
(cherry picked from commit bfc34e11b3437506508b3e120accc0e212268ac6)
(cherry picked from commit 83359fbe4fd7e5850abd45a467bf197c284519b1)
(cherry picked from commit 9698c6675033664fd262bad7844af12067ff3bea)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/60/691460/4 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/compute/v2/test_server.py', 'openstackclient/compute/v2/server.py']",2,9f152083703f899c0e9c345343760e537bcf1dc1,lookup-one-by-one-bfv, # The 'image' attribute can be an empty string if the server was # booted from a volume. (s.image.get('id') for s in data if s.image))):, (s.image.get('id') for s in data))):,30,9
openstack%2Fswift~master~I6eda54ccd2792effadb334ce9324887132b62b6f,openstack/swift,master,I6eda54ccd2792effadb334ce9324887132b62b6f,Use latest pip in gate jobs,MERGED,2020-07-20 19:33:46.000000000,2020-07-21 22:54:19.000000000,2020-07-21 22:52:34.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 19:33:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/77b5ea6966d371249b64b071a95b2a322140521f', 'message': ""Use pip module to install swift\n\nWe've seen failures with probe tests lately where dnspython 2.0.0 is\ngetting installed even though it doesn't support py2 anymore. I think\npip should be better?\n\nChange-Id: I6eda54ccd2792effadb334ce9324887132b62b6f\n""}, {'number': 2, 'created': '2020-07-20 22:14:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/6261a0835dbf64850309ea9e9dde2595d74cc6ce', 'message': ""Use pip module to install swift\n\n...after making sure pip is updated.\n\nWe've seen failures with probe tests lately where dnspython 2.0.0 is\ngetting installed even though it doesn't support py2 anymore. I think\nusing latest pip should be better?\n\nChange-Id: I6eda54ccd2792effadb334ce9324887132b62b6f\n""}, {'number': 3, 'created': '2020-07-20 23:45:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/3dd743bd694734d7dbf8eedf33b6bf0ab5de0111', 'message': ""Use latest pip in gate jobs\n\nWe've seen failures with probe tests lately where dnspython 2.0.0 is\ngetting installed even though it doesn't support py2 anymore. I think\nusing latest pip should be better about noticing that and installing the\nlast 1.x release intead?\n\nChange-Id: I6eda54ccd2792effadb334ce9324887132b62b6f\n""}, {'number': 4, 'created': '2020-07-20 23:53:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/566d6ae1d4eab56ee767a7fa156a63de2ba56588', 'message': ""Use latest pip in gate jobs\n\nWe've seen failures with probe tests lately where dnspython 2.0.0 is\ngetting installed even though it doesn't support py2 anymore. I think\nusing latest pip should be better about noticing that and installing the\nlast 1.x release intead?\n\nChange-Id: I6eda54ccd2792effadb334ce9324887132b62b6f\n""}, {'number': 5, 'created': '2020-07-21 00:18:52.000000000', 'files': ['tools/playbooks/common/install_dependencies.yaml'], 'web_link': 'https://opendev.org/openstack/swift/commit/1c91547643f9c85f152d1d8c15431fec8334e214', 'message': ""Use latest pip in gate jobs\n\nWe've seen failures with probe tests lately where dnspython 2.0.0 is\ngetting installed even though it doesn't support py2 anymore. I think\nusing latest pip should be better about noticing that and installing the\nlast 1.x release intead?\n\nChange-Id: I6eda54ccd2792effadb334ce9324887132b62b6f\n""}]",0,742012,1c91547643f9c85f152d1d8c15431fec8334e214,17,2,5,15343,,,0,"Use latest pip in gate jobs

We've seen failures with probe tests lately where dnspython 2.0.0 is
getting installed even though it doesn't support py2 anymore. I think
using latest pip should be better about noticing that and installing the
last 1.x release intead?

Change-Id: I6eda54ccd2792effadb334ce9324887132b62b6f
",git fetch https://review.opendev.org/openstack/swift refs/changes/12/742012/2 && git format-patch -1 --stdout FETCH_HEAD,"['tools/playbooks/multinode_setup/run.yaml', 'tools/playbooks/saio_single_node_setup/make_rings.yaml']",2,77b5ea6966d371249b64b071a95b2a322140521f,, pip: editable: true name: ., shell: cmd: python setup.py develop executable: /bin/bash,6,6
openstack%2Fopenstack-helm-infra~master~Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b,openstack/openstack-helm-infra,master,Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b,[ceph-client] Add OSD check before pool creation,MERGED,2020-07-15 01:49:42.000000000,2020-07-21 22:49:52.000000000,2020-07-21 22:48:26.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 17119}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 28372}, {'_account_id': 29974}]","[{'number': 1, 'created': '2020-07-15 01:49:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4f7513cefabd09bf58af3bd1178216cd3ebecb3f', 'message': '[ceph-client] Add check osd count before pool creation.\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of ODSs\nand required persent of ODSs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 2, 'created': '2020-07-16 19:00:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7e65fe693535778685a93eee030b3b1e4f3a2594', 'message': '[ceph-client] Add check osd count before pool creation.\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of ODSs\nand required persent of ODSs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 3, 'created': '2020-07-16 19:00:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/2fe78c3f6e0f1bd8a424759ab928962adc47ff39', 'message': '[ceph-client] Add check osd count before pool creation.\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of ODSs\nand required persent of ODSs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 4, 'created': '2020-07-16 21:46:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0afa408a969bbd906085f0733087afdb400d814a', 'message': '[ceph-client] Add check osd count before pool creation.\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 5, 'created': '2020-07-17 17:07:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/8d46a53d3312f8352a6664ab86b6264a43008647', 'message': '[ceph-client] Add check osd count before pool creation.\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 6, 'created': '2020-07-17 17:57:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/df359b32351496312837d202a8c8611c454ef451', 'message': '[ceph-client] Add check osd count before pool creation.\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 7, 'created': '2020-07-17 17:57:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/11fde8e3b86c24779c2f3b897704c4d52caeafab', 'message': '[ceph-client] Add check osd count before pool creation.\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 8, 'created': '2020-07-17 21:24:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/827347308b9bdd619462f021c339d261e7ea542a', 'message': '[ceph-client] Add OSD check before pool creation\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 9, 'created': '2020-07-17 21:24:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/3a05072f6d7930139a921329c960a9be318e34f4', 'message': '[ceph-client] Add OSD check before pool creation\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 10, 'created': '2020-07-20 17:42:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a76bccf48872650eeae7c4747053088326817334', 'message': '[ceph-client] Add OSD check before pool creation\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 11, 'created': '2020-07-20 19:57:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1b77c7cf61f9c7437d6fe265693ca9804f040f11', 'message': '[ceph-client] Add OSD check before pool creation\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}, {'number': 12, 'created': '2020-07-21 17:54:16.000000000', 'files': ['ceph-client/templates/bin/pool/_init.sh.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ffb4f8679675ea51d468e82537cd31dbceb9b8ab', 'message': '[ceph-client] Add OSD check before pool creation\n\nThe PS adds the check of count of OSDs. It ensures that expected amount\nof OSDs is present at the moment of creation of a pool.\nThe expected amount of OSDs is calculated based on target amount of OSDs\nand required percent of OSDs.\n\nChange-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b\n'}]",3,741070,ffb4f8679675ea51d468e82537cd31dbceb9b8ab,46,8,12,17119,,,0,"[ceph-client] Add OSD check before pool creation

The PS adds the check of count of OSDs. It ensures that expected amount
of OSDs is present at the moment of creation of a pool.
The expected amount of OSDs is calculated based on target amount of OSDs
and required percent of OSDs.

Change-Id: Iadf36dbeca61c47d9a9db60cf5335e4e1cb7b74b
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/70/741070/2 && git format-patch -1 --stdout FETCH_HEAD,['ceph-client/templates/bin/pool/_init.sh.tpl'],1,4f7513cefabd09bf58af3bd1178216cd3ebecb3f,,"function check_osd_count() { echo ""#### Start: Checking OSD count ####"" noup_flag=$(ceph osd stat | awk '/flags/{print $2}' | grep noup) osd_stat=$(ceph osd stat -f json) num_osd=$(jq '.osdmap.num_osds' <<< ""$osd_stat"") num_in_osds=$(jq '.osdmap.num_in_osds' <<< ""$osd_stat"") num_up_osds=$(jq '.osdmap.num_up_osds' <<< ""$osd_stat"") EXPECTED_OSDS={{.Values.conf.pool.target.osd}} REQUIRED_PERCENT_OF_OSDS={{.Values.conf.pool.target.required_percent_of_osds}} MIN_OSDS=$(($EXPECTED_OSDS*$REQUIRED_PERCENT_OF_OSDS/100)) if [ ${MIN_OSDS} -lt 1 ]; then MIN_OSDS=1 fi if [ ""${noup_flag}"" ]; then osd_status=$(ceph osd dump -f json | jq -c '.osds[] | .state') count=0 for osd in $osd_status; do if [[ ""$osd"" == *""up""* || ""$osd"" == *""new""* ]]; then ((count=count+1)) fi done echo ""Caution: noup flag is set. ${count} OSDs in up/new state. Required number of OSDs (${num_osd})."" if [ $MIN_OSDS -gt $count ]; then exit 1 fi else if [ ""${num_osd}"" -eq 0 ]; then echo ""There are no osds in the cluster"" exit 1 elif [ ""${num_in_osds}"" -ge ""${MIN_OSDS}"" ] && [ ""${num_up_osds}"" -ge ""${MIN_OSDS}"" ]; then echo ""Required number of OSDs (${MIN_OSDS}) are UP and IN status"" else echo ""Required number of OSDs (${MIN_OSDS}) are NOT UP and IN status. Cluster shows OSD count=${num_osd}, UP=${num_up_osds}, IN=${num_in_osds}"" exit 1 fi fi } check_osd_count",,41,0
openstack%2Ftripleo-ansible~stable%2Fussuri~I28eb64ee938744adc8a50182e7a3a6a6e3570d6a,openstack/tripleo-ansible,stable/ussuri,I28eb64ee938744adc8a50182e7a3a6a6e3570d6a,tripleo_container_manage: add test if systemd service is disabled,ABANDONED,2020-07-21 15:55:19.000000000,2020-07-21 22:41:50.000000000,,"[{'_account_id': 3153}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 15:55:19.000000000', 'files': ['tripleo_ansible/roles/tripleo_container_manage/molecule/default/converge.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/b7987e05dbe011c2504877ce93a3c08545941be8', 'message': 'tripleo_container_manage: add test if systemd service is disabled\n\nAdd a test case where we disable the systemd service and make sure that\ntripleo_container_manage role will handle the restart.\n\nChange-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a\n(cherry picked from commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c)\n'}]",0,742231,b7987e05dbe011c2504877ce93a3c08545941be8,4,2,1,3153,,,0,"tripleo_container_manage: add test if systemd service is disabled

Add a test case where we disable the systemd service and make sure that
tripleo_container_manage role will handle the restart.

Change-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a
(cherry picked from commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/31/742231/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_container_manage/molecule/default/converge.yml'],1,b7987e05dbe011c2504877ce93a3c08545941be8,restart-stable/ussuri,- name: Test systemd state on fedora container after a manual stop become: true hosts: all gather_facts: false vars: tripleo_container_manage_config: '/tmp/container-configs' tripleo_container_manage_debug: true tripleo_container_manage_config_patterns: '*.json' tripleo_container_manage_systemd_order: true tasks: - name: Stop systemd service for tripleo_fedora in a manual stop systemd: name: tripleo_fedora.service state: stopped enabled: false daemon_reload: true - include_role: name: tripleo_container_manage post_tasks: - name: Check if tripleo_fedora systemd service is active after a manual stop command: systemctl is-active --quiet tripleo_fedora register: tripleo_fedora_active_result - name: Assert that tripleo_fedora systemd service is active after a manual stop when: - not ansible_check_mode|bool assert: that: - tripleo_fedora_active_result.rc == 0 fail_msg: 'tripleo_fedora systemd service is not active after a manual stop' success_msg: 'tripleo_fedora systemd service is active after a manual stop' ,,31,0
openstack%2Ftripleo-ansible~stable%2Ftrain~I28eb64ee938744adc8a50182e7a3a6a6e3570d6a,openstack/tripleo-ansible,stable/train,I28eb64ee938744adc8a50182e7a3a6a6e3570d6a,tripleo_container_manage: add test if systemd service is disabled,ABANDONED,2020-07-21 15:55:44.000000000,2020-07-21 22:41:46.000000000,,"[{'_account_id': 3153}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 15:55:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/085b11acc5b12964f46667ff23dc0f5fe1cea4be', 'message': 'tripleo_container_manage: add test if systemd service is disabled\n\nAdd a test case where we disable the systemd service and make sure that\ntripleo_container_manage role will handle the restart.\n\nChange-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a\n(cherry picked from commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c)\n'}, {'number': 2, 'created': '2020-07-21 18:05:18.000000000', 'files': ['tripleo_ansible/roles/tripleo-container-manage/molecule/default/playbook.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/039a20c744a2087d5d5d802895e23d94387da6f5', 'message': 'tripleo_container_manage: add test if systemd service is disabled\n\nAdd a test case where we disable the systemd service and make sure that\ntripleo_container_manage role will handle the restart.\n\nChange-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a\n(cherry picked from commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c)\n'}]",0,742232,039a20c744a2087d5d5d802895e23d94387da6f5,6,2,2,3153,,,0,"tripleo_container_manage: add test if systemd service is disabled

Add a test case where we disable the systemd service and make sure that
tripleo_container_manage role will handle the restart.

Change-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a
(cherry picked from commit faecfdaa90905f26aac9d99e4dbddcf1b350d33c)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/32/742232/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo-container-manage/molecule/default/playbook.yml'],1,085b11acc5b12964f46667ff23dc0f5fe1cea4be,testing,- name: Test systemd state on fedora container after a manual stop become: true hosts: all gather_facts: false vars: tripleo_container_manage_config: '/tmp/container-configs' tripleo_container_manage_debug: true tripleo_container_manage_config_patterns: '*.json' tripleo_container_manage_systemd_order: true tasks: - name: Stop systemd service for tripleo_fedora in a manual stop systemd: name: tripleo_fedora.service state: stopped enabled: false daemon_reload: true - include_role: name: tripleo_container_manage post_tasks: - name: Check if tripleo_fedora systemd service is active after a manual stop command: systemctl is-active --quiet tripleo_fedora register: tripleo_fedora_active_result - name: Assert that tripleo_fedora systemd service is active after a manual stop when: - not ansible_check_mode|bool assert: that: - tripleo_fedora_active_result.rc == 0 fail_msg: 'tripleo_fedora systemd service is not active after a manual stop' success_msg: 'tripleo_fedora systemd service is active after a manual stop' ,,31,0
openstack%2Ftripleo-ansible~master~Ifd6e323af8f6884df19f0d425514309856712eac,openstack/tripleo-ansible,master,Ifd6e323af8f6884df19f0d425514309856712eac,CI test - DNM,ABANDONED,2020-07-21 22:25:15.000000000,2020-07-21 22:41:29.000000000,,[],"[{'number': 1, 'created': '2020-07-21 22:25:15.000000000', 'files': ['tripleo_ansible/roles/tripleo_container_manage/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/643c4231ee1eb4fd2d12451b7981057d49ea57d5', 'message': 'CI test - DNM\n\nChange-Id: Ifd6e323af8f6884df19f0d425514309856712eac\n'}]",0,742297,643c4231ee1eb4fd2d12451b7981057d49ea57d5,2,0,1,3153,,,0,"CI test - DNM

Change-Id: Ifd6e323af8f6884df19f0d425514309856712eac
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/97/742297/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_container_manage/tasks/main.yml'],1,643c4231ee1eb4fd2d12451b7981057d49ea57d5,ci/test,"- name: ""aManage systemd shutdown files""","- name: ""Manage systemd shutdown files""",1,1
openstack%2Fopenstack-helm-infra~master~Ieb3e182f48823e6b25ec427900b372b72f9a3b1e,openstack/openstack-helm-infra,master,Ieb3e182f48823e6b25ec427900b372b72f9a3b1e,HTK: Change formatting of TLS Secret,MERGED,2020-06-09 21:17:01.000000000,2020-07-21 22:41:11.000000000,2020-07-21 22:38:25.000000000,"[{'_account_id': 8863}, {'_account_id': 16771}, {'_account_id': 21040}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 23917}, {'_account_id': 24780}, {'_account_id': 28719}, {'_account_id': 30495}]","[{'number': 1, 'created': '2020-06-09 21:17:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b0a00c75ad856a801fb3389a92b88ca9608b6cbe', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 2, 'created': '2020-06-17 15:41:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/793edd3c2bb87e0e9d10297d3f3b7b96680ed2a6', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 3, 'created': '2020-06-23 15:05:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0edc8fafd5e9ce520dd59e032c97f26f4602a79d', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 4, 'created': '2020-06-26 15:36:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/831956c72b787e77e8764752574c2772ec618e0e', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 5, 'created': '2020-06-26 15:51:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/33d6cd4da56f4fb37cfa9bf85bf5751093a3bf8a', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 6, 'created': '2020-07-01 13:51:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f43b7e61b48d02feff0fac9c6437023eaa46d89a', 'message': 'HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 7, 'created': '2020-07-17 22:20:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9579ef31f4692ce3df978503d8dd1b01919d78bb', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 8, 'created': '2020-07-17 22:22:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/dc6aa8e43a8345853af4cac20633680e3207b53f', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 9, 'created': '2020-07-17 22:22:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/97c2a998a062e260f6947ee53c1785ef43c3aba6', 'message': '[WIP] HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 10, 'created': '2020-07-21 16:07:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/80dfaef9eb9a6a2fd9f07848b7cfeca2c55b2fab', 'message': 'HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}, {'number': 11, 'created': '2020-07-21 17:12:18.000000000', 'files': ['helm-toolkit/templates/manifests/_secret-tls.yaml.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fef64e266e8761aa9920035c6b277c8d067395f3', 'message': 'HTK: Change formatting of TLS Secret\n\nChanged TLS secret to include CA in tls.crt if present\n\nChange-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e\n'}]",9,734702,fef64e266e8761aa9920035c6b277c8d067395f3,55,9,11,24780,,,0,"HTK: Change formatting of TLS Secret

Changed TLS secret to include CA in tls.crt if present

Change-Id: Ieb3e182f48823e6b25ec427900b372b72f9a3b1e
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/02/734702/2 && git format-patch -1 --stdout FETCH_HEAD,['helm-toolkit/templates/manifests/_secret-tls.yaml.tpl'],1,b0a00c75ad856a801fb3389a92b88ca9608b6cbe,," tls.crt: {{ list $endpointHost.tls.crt $endpointHost.tls.ca | join ""\n"" | b64enc }} {{- else }} tls.crt: {{ $endpointHost.tls.crt | b64enc }}", tls.crt: {{ $endpointHost.tls.crt | b64enc }} ca.crt: {{ $endpointHost.tls.ca | b64enc }},3,2
openstack%2Ftripleo-ansible~master~I28eb64ee938744adc8a50182e7a3a6a6e3570d6a,openstack/tripleo-ansible,master,I28eb64ee938744adc8a50182e7a3a6a6e3570d6a,tripleo_container_manage: add test if systemd service is disabled,MERGED,2020-07-20 20:45:31.000000000,2020-07-21 22:41:08.000000000,2020-07-21 15:46:31.000000000,"[{'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 20:45:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/ffad97254dcc54fdd117e0aa4e702b3dc5f56353', 'message': 'tripleo_container_manage: add test if systemd service is disabled\n\nAdd a test case where we disable the systemd service and make sure that\ntripleo_container_manage role will handle the restart.\n\nChange-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a\n'}, {'number': 2, 'created': '2020-07-20 21:01:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/394a4a59ff7cc50064bbf28846a83b612ac31430', 'message': 'tripleo_container_manage: add test if systemd service is disabled\n\nAdd a test case where we disable the systemd service and make sure that\ntripleo_container_manage role will handle the restart.\n\nChange-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a\n'}, {'number': 3, 'created': '2020-07-20 21:33:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/d06dd1e4956d1d127f0d9cb36d2a88b35f61a6e9', 'message': 'tripleo_container_manage: add test if systemd service is disabled\n\nAdd a test case where we disable the systemd service and make sure that\ntripleo_container_manage role will handle the restart.\n\nChange-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a\n'}, {'number': 4, 'created': '2020-07-21 01:43:15.000000000', 'files': ['tripleo_ansible/roles/tripleo_container_manage/molecule/default/converge.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/faecfdaa90905f26aac9d99e4dbddcf1b350d33c', 'message': 'tripleo_container_manage: add test if systemd service is disabled\n\nAdd a test case where we disable the systemd service and make sure that\ntripleo_container_manage role will handle the restart.\n\nChange-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a\n'}]",0,742026,faecfdaa90905f26aac9d99e4dbddcf1b350d33c,15,3,4,3153,,,0,"tripleo_container_manage: add test if systemd service is disabled

Add a test case where we disable the systemd service and make sure that
tripleo_container_manage role will handle the restart.

Change-Id: I28eb64ee938744adc8a50182e7a3a6a6e3570d6a
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/26/742026/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/roles/tripleo_container_manage/molecule/default/converge.yml'],1,ffad97254dcc54fdd117e0aa4e702b3dc5f56353,restart,- name: Test systemd state on fedora container become: true when: - not ansible_check_mode|bool hosts: all gather_facts: false vars: tripleo_container_manage_config: '/tmp/container-configs' tripleo_container_manage_debug: true tripleo_container_manage_config_patterns: '*.json' tripleo_container_manage_systemd_order: true tasks: - name: Stop systemd service for tripleo_fedora systemd: name: tripleo_fedora.service state: stopped enabled: false daemon_reload: true - include_role: name: tripleo_container_manage post_tasks: - name: Check if tripleo_fedora systemd service is active command: systemctl is-active --quiet tripleo_fedora register: tripleo_fedora_active_result - name: Assert that tripleo_fedora systemd service is active assert: that: - tripleo_fedora_active_result.rc == 0 fail_msg: 'tripleo_fedora systemd service is not active' success_msg: 'tripleo_fedora systemd service is active' ,,31,0
openstack%2Fopenstack-helm-infra~master~I44fdc1ef730c697adc8f97499b4208a99f09013e,openstack/openstack-helm-infra,master,I44fdc1ef730c697adc8f97499b4208a99f09013e,Add proper osh_params to jobs deploying openstack charts,MERGED,2020-07-21 16:29:57.000000000,2020-07-21 22:39:48.000000000,2020-07-21 22:35:15.000000000,"[{'_account_id': 8863}, {'_account_id': 17119}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-21 16:29:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/69b9c423cdc75c70fc0ed22dd783c8a24970eb9e', 'message': 'Add proper osh_params to jobs deploying openstack charts\n\nChange-Id: I44fdc1ef730c697adc8f97499b4208a99f09013e\n'}, {'number': 2, 'created': '2020-07-21 16:50:36.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6fa7dae7afbe40058a0b7e1115a6695965b025a0', 'message': 'Add proper osh_params to jobs deploying openstack charts\n\nChange-Id: I44fdc1ef730c697adc8f97499b4208a99f09013e\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,742239,6fa7dae7afbe40058a0b7e1115a6695965b025a0,14,5,2,8863,,,0,"Add proper osh_params to jobs deploying openstack charts

Change-Id: I44fdc1ef730c697adc8f97499b4208a99f09013e
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/39/742239/2 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,69b9c423cdc75c70fc0ed22dd783c8a24970eb9e,, openstack_release: stein osh_params: openstack_release: stein container_distro_name: ubuntu container_distro_version: bionic osh_params: openstack_release: stein container_distro_name: ubuntu container_distro_version: bionic,,9,0
openstack%2Fneutron-lib~master~I5669caf7e579c066acc52887a7f31ee8e238093f,openstack/neutron-lib,master,I5669caf7e579c066acc52887a7f31ee8e238093f,Change policy on neutron-lib migration,MERGED,2020-07-02 21:17:30.000000000,2020-07-21 22:38:16.000000000,2020-07-21 22:34:33.000000000,"[{'_account_id': 4694}, {'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 13995}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-02 21:17:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/49fd0ef9ef150006c8804bd0e0258d04c15be28e', 'message': 'Change policy on neutron-lib migration\n\nPer the results of discussion at the Virtual PTG in June 2020, we are\nchanging our policy with regards to neutron-lib code forklifts.  We are\nsignaling that the mass migration of code from neutron to neutron-lib\nwill no longer be actively pursued, and simpligying the process for such\nmigrations - should they become necessary - by using debtcollector\nremovals.\n\nChange-Id: I5669caf7e579c066acc52887a7f31ee8e238093f\n'}, {'number': 2, 'created': '2020-07-06 08:19:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/d02ee611f8fce1c1a984456d0a50f8c5d576b00d', 'message': 'Change policy on neutron-lib migration\n\nPer the results of discussion at the Virtual PTG in June 2020, we are\nchanging our policy with regards to neutron-lib code forklifts.  We are\nsignaling that the mass migration of code from neutron to neutron-lib\nwill no longer be actively pursued, and simpligying the process for such\nmigrations - should they become necessary - by using debtcollector\nremovals.\n\nChange-Id: I5669caf7e579c066acc52887a7f31ee8e238093f\n'}, {'number': 3, 'created': '2020-07-10 18:22:46.000000000', 'files': ['doc/source/contributor/contributing.rst'], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/4f17bc10ba0892b21cff6e88c8b2b52a81ee84a2', 'message': 'Change policy on neutron-lib migration\n\nPer the results of discussion at the Virtual PTG in June 2020, we are\nchanging our policy with regards to neutron-lib code forklifts.  We are\nsignaling that the mass migration of code from neutron to neutron-lib\nwill no longer be actively pursued, and simplifying the process for such\nmigrations - should they become necessary - by using debtcollector\nremovals.\n\nChange-Id: I5669caf7e579c066acc52887a7f31ee8e238093f\n'}]",3,739147,4f17bc10ba0892b21cff6e88c8b2b52a81ee84a2,15,5,3,13995,,,0,"Change policy on neutron-lib migration

Per the results of discussion at the Virtual PTG in June 2020, we are
changing our policy with regards to neutron-lib code forklifts.  We are
signaling that the mass migration of code from neutron to neutron-lib
will no longer be actively pursued, and simplifying the process for such
migrations - should they become necessary - by using debtcollector
removals.

Change-Id: I5669caf7e579c066acc52887a7f31ee8e238093f
",git fetch https://review.opendev.org/openstack/neutron-lib refs/changes/47/739147/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/contributor/contributing.rst'],1,49fd0ef9ef150006c8804bd0e0258d04c15be28e,rehoming-code-deprioritization,Please note that the effort to rehome existing code from neutron to neutron-lib so that no stadium projects would import directly from neutron has been suspended. When code is rehomed from neutron-lib then the original location of the code should be flagged with a `debtcollector removal <https://docs.openstack.org/debtcollector/latest/user/usage.html#removing-a-class-classmethod-method-function>`_. This will indicate to any consuming projects that the given code is deprecated. Be sure that this change is accompanied by a release note that notes the deprecation.,"It's critical that before you submit your patch to remove the rehomed code from its source that you perform a diff between it and the rehomed version in neutron-lib to ensure nothing has changed in the source. If something has changed in the source, you need to push and shepherd a patch to neutron-lib with the difference(s) before proceeding with this consumption phase. The following guidelines are intended to provide a smooth transition to the rehomed code in neutron-lib and minimize impacts to subprojects consuming the rehomed code from its source. - If the change to consume the code from neutron-lib is widespread and/or ""important"", introduce your intentions for the change via the Neutron team `meeting slot <https://wiki.openstack.org/wiki/Network/Meetings>`_ for neutron-lib. Subsequently follow-up with an email to openstack-discuss list using a subject with ``[neutron] neutron-lib impact`` providing additional details as necessary. Ideally we can identify the main impacted subprojects by `grepping the OpenStack code <http://codesearch.openstack.org/>`_. - Prepare a neutron core patch to remove and update the rehomed code from its source. This can be done without a `debtcollector <https://docs.openstack.org/debtcollector/latest/>`_ notice by following the steps here. In the patch's commit message include the ``NeutronLibImpact`` so that we can easily `query <https://review.opendev.org/#/q/status:open+message:%22NeutronLibImpact%22>`_ for such changes. Mark the patch as a work in progress with a -1 workflow vote. - If the change is significant enough, it may warrant a ""reference implementation"" in an impacted subproject to ensure the impacts are fully understood. Testing this change can be done using the ``Depends-On:`` approach described in the `review guidelines <./review-guidelines.html>`_. - If you are a core reviewer and about to approve a NeutronLibImpact change, please consider checking the state of all Stadium subprojects by looking at the `grafana periodic dashboard <http://grafana.openstack.org/dashboard/db/neutron-lib-failure-rate?panelId=4&fullscreen>`_. This dashboard shows the status of subprojects' unit tests against neutron and neutron-lib master branches, and even though it is not exactly validating unit tests against a released version of neutron-lib it may be enough of an alarm bell to indicate that something might be wrong because of a patch that recently landed in neutron (assuming that the subprojects still has direct neutron imports). The check happens daily therefore consider waiting to approve if you are either aware of another impactful change recently merged that has not been yet processed or you see failure rates spiking. - All projects that have `neutron-lib-current <http://codesearch.openstack.org/?q=neutron-lib-current&i=nope&files=requirements.txt&repos=>`_ should also be updated as part of consumption. Examples: - `348472 <https://review.opendev.org/348472/>`_ removes a validator in neutron that was rehomed to neutron-lib.",9,42
openstack%2Fopenstack-helm-infra~master~I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95,openstack/openstack-helm-infra,master,I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95,[mariadb] Modified start.py script,MERGED,2020-07-16 20:39:42.000000000,2020-07-21 22:38:15.000000000,2020-07-21 22:38:14.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 11934}, {'_account_id': 20466}, {'_account_id': 22348}, {'_account_id': 22636}, {'_account_id': 24780}]","[{'number': 1, 'created': '2020-07-16 20:39:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fdf3c6f00b84d2d8c285cd963e5e8c1318d0d118', 'message': '[maraidb] Modified start.py script.\n\nAdded check to see if the file is empty before trying to read it.\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 2, 'created': '2020-07-16 22:02:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4963807aa4558489f69b2f6a977d40d28b9ccb10', 'message': '[mariadb] Modified start.py script.\n\nAdded check to see if the file is empty before trying to read it.\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 3, 'created': '2020-07-17 19:29:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/fc9ac5be24483477f43c10696a88af4978dd04f2', 'message': '[mariadb] Modified start.py script.\n\nAdded check to see if the file is empty before trying to read it.\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 4, 'created': '2020-07-17 19:44:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/41dc01419db0af7961401db2572c9e335b92611b', 'message': '[mariadb] Modified start.py script.\n\nAdded check to see if the file is empty before trying to read it.\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 5, 'created': '2020-07-17 19:44:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/cf18de033907502fd99fea37b1a8282f3dfc85e5', 'message': '[mariadb] Modified start.py script.\n\nAdded check to see if the file is empty before trying to read it.\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 6, 'created': '2020-07-17 21:11:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b2a0aaceb3a94a55535b8bb210aac91f0ffb1c36', 'message': '[mariadb] Modified start.py script.\n\nAdded check to see if the file is empty before\ntrying to read it.\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 7, 'created': '2020-07-21 15:59:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/7398ff60972a6bcc90dd4734ee9a5fa60e4d9c31', 'message': '[mariadb] Modified start.py script.\n\nAdded check to see if the file is empty before trying to read it\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 8, 'created': '2020-07-21 16:52:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/dfbdc6c8b41c320f13af7b1171f196c5c0d8e3e6', 'message': '[mariadb] Modified start.py script.\n\nAdded check to see if the file is empty before trying to read it\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}, {'number': 9, 'created': '2020-07-21 16:52:21.000000000', 'files': ['mariadb/templates/bin/_start.py.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a3ebaf5b01d9db7c3bea2e5fc8f7144f0f4204aa', 'message': '[mariadb] Modified start.py script\n\nAdded check to see if the file is empty before trying to read it.\n\nChange-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95\n'}]",10,741541,a3ebaf5b01d9db7c3bea2e5fc8f7144f0f4204aa,35,7,9,24780,,,0,"[mariadb] Modified start.py script

Added check to see if the file is empty before trying to read it.

Change-Id: I3e1266e8c0bb7e79d90db0485e4beacf3ad77f95
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/41/741541/4 && git format-patch -1 --stdout FETCH_HEAD,['mariadb/templates/bin/_start.py.tpl'],1,fdf3c6f00b84d2d8c285cd963e5e8c1318d0d118,," if os.stat(mysqld_pidfile_path).st_size != 0: with open(mysqld_pidfile_path, ""r"") as mysqld_pidfile: mysqld_pid = int(mysqld_pidfile.readlines()[0].rstrip('\n')) if is_pid_running(mysqld_pid): if is_pid_mysqld(mysqld_pid): logger.info(""pid from pidfile is mysqld"") os.kill(mysqld_pid, 15) try: pid, status = os.waitpid(mysqld_pid, 0) except OSError as err: # The process has already exited if err.errno == errno.ECHILD: return else: raise logger.info(""Mysqld stopped: pid = {0}, "" ""exit status = {1}"".format(pid, status)) else: logger.error( ""pidfile process is not mysqld, removing pidfile and panic"" ) os.remove(mysqld_pidfile_path) sys.exit(1) else: logger.info( ""Mysqld was not running with pid {0}, going to remove stale "" ""file"".format(mysqld_pid)) ""{0} file is empty, going to remove it"".format(mysqld_pidfile_path))"," with open(mysqld_pidfile_path, ""r"") as mysqld_pidfile: mysqld_pid = int(mysqld_pidfile.readlines()[0].rstrip('\n')) if is_pid_running(mysqld_pid): if is_pid_mysqld(mysqld_pid): logger.info(""pid from pidfile is mysqld"") os.kill(mysqld_pid, 15) try: pid, status = os.waitpid(mysqld_pid, 0) except OSError as err: # The process has already exited if err.errno == errno.ECHILD: return else: raise logger.info(""Mysqld stopped: pid = {0}, "" ""exit status = {1}"".format(pid, status)) else: logger.error( ""pidfile process is not mysqld, removing pidfile and panic"" ) sys.exit(1) ""Mysqld was not running with pid {0}, going to remove stale "" ""file"".format(mysqld_pid))",27,22
openstack%2Foctavia-lib~master~Ie7df8625c907a19e82a4595b32ee6e77c93363f7,openstack/octavia-lib,master,Ie7df8625c907a19e82a4595b32ee6e77c93363f7,Fix NotFound exception in docstring,MERGED,2020-07-21 16:42:40.000000000,2020-07-21 22:22:30.000000000,2020-07-21 22:20:54.000000000,"[{'_account_id': 1131}, {'_account_id': 6469}, {'_account_id': 10273}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 16:42:40.000000000', 'files': ['octavia_lib/api/drivers/provider_base.py'], 'web_link': 'https://opendev.org/openstack/octavia-lib/commit/397653cb6de49d5f9733348231833a12da49531d', 'message': 'Fix NotFound exception in docstring\n\nA recent patch added a docstring that references the new NotFound\nexception. Unfortunately it is ambiguous with other NotFound\nexceptions.\nThis patch clarifies the NotFound exception.\n\nChange-Id: Ie7df8625c907a19e82a4595b32ee6e77c93363f7\n'}]",0,742245,397653cb6de49d5f9733348231833a12da49531d,10,4,1,11628,,,0,"Fix NotFound exception in docstring

A recent patch added a docstring that references the new NotFound
exception. Unfortunately it is ambiguous with other NotFound
exceptions.
This patch clarifies the NotFound exception.

Change-Id: Ie7df8625c907a19e82a4595b32ee6e77c93363f7
",git fetch https://review.opendev.org/openstack/octavia-lib refs/changes/45/742245/1 && git format-patch -1 --stdout FETCH_HEAD,['octavia_lib/api/drivers/provider_base.py'],1,397653cb6de49d5f9733348231833a12da49531d,, :raises octavia_lib.api.drivers.exceptions.NotFound: if the driver cannot find a resource., :raises NotFound: if the driver cannot find a resource.,2,1
openstack%2Fbifrost~master~I99a3a202125f5ca805030a2363729aa81c8f5b4e,openstack/bifrost,master,I99a3a202125f5ca805030a2363729aa81c8f5b4e,Support extra-vars in bifrost-cli,MERGED,2020-07-09 11:22:40.000000000,2020-07-21 21:57:51.000000000,2020-07-21 21:56:31.000000000,"[{'_account_id': 10239}, {'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-07-09 11:22:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/b7069185a255074529b7a52c66bb7a1d840498aa', 'message': 'Support extra-vars in bifrost-cli\n\nUse it to provide git_url_root in the CI\n\nChange-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e\n'}, {'number': 2, 'created': '2020-07-09 12:28:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/a3e17f634828e3820926432264f3fa6d6e65fbeb', 'message': 'Support extra-vars in bifrost-cli\n\nUse it to provide git_url_root in the CI\n\nChange-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e\n'}, {'number': 3, 'created': '2020-07-20 09:55:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/a16d576467b96f9f103ea562163b1db586c6802d', 'message': 'Support extra-vars in bifrost-cli\n\nUse it to provide git_url_root in the CI\n\nChange-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e\n'}, {'number': 4, 'created': '2020-07-20 10:07:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/94309fc566978a660599b1a91f00e28dee0ad2da', 'message': 'Support extra-vars in bifrost-cli\n\nUse it to provide git_url_root in the CI\n\nChange-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e\n'}, {'number': 5, 'created': '2020-07-20 10:09:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/93ddfaa7ad2ea2b523697d18e130bb29116223e9', 'message': 'Support extra-vars in bifrost-cli\n\nUse it to provide git_url_root in the CI\n\nChange-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e\n'}, {'number': 6, 'created': '2020-07-20 11:50:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/bifrost/commit/0312b915e6d0cacda589912aee6a2891d8894f27', 'message': 'Support extra-vars in bifrost-cli\n\nUse it to provide git_url_root in the CI\n\nChange-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e\n'}, {'number': 7, 'created': '2020-07-21 12:50:22.000000000', 'files': ['bifrost/cli.py', 'releasenotes/notes/bifrost-cli-extra-19fd989a05b2e4b4.yaml', 'scripts/test-bifrost.sh'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/b67115d48c7d84ce7508a9cf33433286baedea91', 'message': 'Support extra-vars in bifrost-cli\n\nUse it to provide git_url_root in the CI\n\nChange-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e\n'}]",0,740246,b67115d48c7d84ce7508a9cf33433286baedea91,21,4,7,10239,,,0,"Support extra-vars in bifrost-cli

Use it to provide git_url_root in the CI

Change-Id: I99a3a202125f5ca805030a2363729aa81c8f5b4e
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/46/740246/1 && git format-patch -1 --stdout FETCH_HEAD,"['bifrost/cli.py', 'scripts/test-bifrost.sh']",2,b7069185a255074529b7a52c66bb7a1d840498aa,bifrost-cli-extra," --extra-vars git_url_root=""${WORKSPACE:-https://opendev.org}"" \ ../bifrost-cli --debug install --release ${ZUUL_BRANCH:-master} --testenv \ --extra-vars git_url_root=""${WORKSPACE:-https://opendev.org}""", # FIXME(dtantsur): bifrost-cli does not use opendev-provided repos. ../bifrost-cli --debug install --release ${ZUUL_BRANCH:-master} --testenv,12,4
openstack%2Fcinder~master~Id2d2f846f9175fccbdfcd8be405551daeb79653d,openstack/cinder,master,Id2d2f846f9175fccbdfcd8be405551daeb79653d,Don't show host_name to non-admins,MERGED,2020-06-02 11:15:13.000000000,2020-07-21 21:53:34.000000000,2020-07-21 21:52:00.000000000,"[{'_account_id': 1736}, {'_account_id': 4523}, {'_account_id': 5314}, {'_account_id': 9008}, {'_account_id': 9535}, {'_account_id': 10118}, {'_account_id': 11611}, {'_account_id': 11904}, {'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 12032}, {'_account_id': 12033}, {'_account_id': 12369}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 15670}, {'_account_id': 15941}, {'_account_id': 18120}, {'_account_id': 18883}, {'_account_id': 21863}, {'_account_id': 21884}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24236}, {'_account_id': 24814}, {'_account_id': 24815}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 25678}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 27615}, {'_account_id': 28801}, {'_account_id': 29705}, {'_account_id': 32071}]","[{'number': 1, 'created': '2020-06-02 11:15:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/3c554618123f1fdb0243956496d8b329fae002d0', 'message': ""Check if attachment is empty or not\n\nCurrently we check the 'attachments' key exists in volume_ref or not\nwhich it will always.\nwhat we should check is if the value of this key is an empty list\nor not.\n\nChange-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d\n""}, {'number': 2, 'created': '2020-06-02 11:32:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/fb48c993bf03880d8c88bbb03b5fea39df9c6036', 'message': ""Don't show host_name to non-admins\n\nThis patch corrects the wrong behavior of [1].\n\n[1] https://review.opendev.org/#/c/726751/\n\nChange-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d\n""}, {'number': 3, 'created': '2020-06-02 14:58:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/744a7cfd7d5775003e584be994024f9e7f86e298', 'message': ""Don't show host_name to non-admins\n\nThis patch corrects the wrong behavior of [1].\n\n[1] https://review.opendev.org/#/c/726751/\n\nChange-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d\n""}, {'number': 4, 'created': '2020-06-02 15:07:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/cb99646dfe18c3652b4123a3fb9c6b913db8e74b', 'message': ""Don't show host_name to non-admins\n\nThis patch corrects the wrong behavior of [1].\n\n[1] https://review.opendev.org/#/c/726751/\n\nChange-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d\n""}, {'number': 5, 'created': '2020-06-10 18:32:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/314ade3b674f0541bbf218cac873ffba2b48ada9', 'message': ""Don't show host_name to non-admins\n\nThis patch corrects the wrong behavior of [1].\n\n[1] https://review.opendev.org/#/c/726751/\n\nChange-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d\n""}, {'number': 6, 'created': '2020-06-10 21:30:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/7a92606fd927d0543438ac47207fb8d7ec02617c', 'message': ""Don't show host_name to non-admins\n\nThis patch corrects the wrong behavior of [1].\n\n[1] https://review.opendev.org/#/c/726751/\n\nChange-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d\n""}, {'number': 7, 'created': '2020-07-02 08:18:01.000000000', 'files': ['cinder/api/v2/views/volumes.py', 'cinder/tests/unit/api/v3/test_volumes.py', 'cinder/tests/unit/api/v2/test_volumes.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/6e97ac224a4e6255aaed0e23a2f705ac71dfd029', 'message': ""Don't show host_name to non-admins\n\nThis patch corrects the wrong behavior of [1].\n\n[1] https://review.opendev.org/#/c/726751/\n\nChange-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d\n""}]",17,732525,6e97ac224a4e6255aaed0e23a2f705ac71dfd029,154,37,7,27615,,,0,"Don't show host_name to non-admins

This patch corrects the wrong behavior of [1].

[1] https://review.opendev.org/#/c/726751/

Change-Id: Id2d2f846f9175fccbdfcd8be405551daeb79653d
",git fetch https://review.opendev.org/openstack/cinder refs/changes/25/732525/2 && git format-patch -1 --stdout FETCH_HEAD,['cinder/api/v2/views/volumes.py'],1,3c554618123f1fdb0243956496d8b329fae002d0,732525, if volume_ref.get['attachments']:, if volume_ref.get('attachments'):,1,1
openstack%2Fcinderlib~master~Id1655614a8a60fba8ed225c6cea53ae1ed4b694a,openstack/cinderlib,master,Id1655614a8a60fba8ed225c6cea53ae1ed4b694a,RBD: Fix error on disconnect,MERGED,2020-06-26 15:26:03.000000000,2020-07-21 21:53:33.000000000,2020-07-21 21:51:59.000000000,"[{'_account_id': 4523}, {'_account_id': 5314}, {'_account_id': 5997}, {'_account_id': 7198}, {'_account_id': 9535}, {'_account_id': 10459}, {'_account_id': 12016}, {'_account_id': 12033}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-06-26 15:26:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinderlib/commit/beb4f92862fdb4e97cb3491e170c2b5f7cbc8918', 'message': 'RBD: Fix error on disconnect\n\nOn the RBD driver, when doing a disconnect call inside a container, when\nthe ""rbd_common"" package is installed on the host, we can get a ""No such\nfile or directory"" error if the udev rule from the host removes the\nsymlink before we do.\n\nThis error is caused by the rm command returning 1 for different type of\nerrors, so we\'ll now use -f to ensure we don\'t fail if the file is\nmissing, which is what we intended before when passing the\ncheck_exit_code parameter to the execute call.\n\nTrivial-Fix\nCloses-Bug: #1885293\nChange-Id: Id1655614a8a60fba8ed225c6cea53ae1ed4b694a\n'}, {'number': 2, 'created': '2020-07-09 11:37:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinderlib/commit/bf9cbe00e6b22f53261bba6f7274bba3cdd7ac19', 'message': 'RBD: Fix error on disconnect\n\nOn the RBD driver, when doing a disconnect call inside a container, when\nthe ""rbd_common"" package is installed on the host, we can get a ""No such\nfile or directory"" error if the udev rule from the host removes the\nsymlink before we do.\n\nThis error is caused by the rm command returning 1 for different type of\nerrors, so we\'ll now use -f to ensure we don\'t fail if the file is\nmissing, which is what we intended before when passing the\ncheck_exit_code parameter to the execute call.\n\nTrivial-Fix\nCloses-Bug: #1885293\nChange-Id: Id1655614a8a60fba8ed225c6cea53ae1ed4b694a\n'}, {'number': 3, 'created': '2020-07-15 10:41:27.000000000', 'files': ['cinderlib/tests/unit/test_nos_brick.py', 'releasenotes/notes/rbd-missing-file-or-directory-c835abac22f6b32e.yaml', 'cinderlib/nos_brick.py'], 'web_link': 'https://opendev.org/openstack/cinderlib/commit/efcec1d0ee7c892059519ad21791fce4943ac569', 'message': 'RBD: Fix error on disconnect\n\nOn the RBD driver, when doing a disconnect call inside a container, when\nthe ""rbd_common"" package is installed on the host, we can get a ""No such\nfile or directory"" error if the udev rule from the host removes the\nsymlink before we do.\n\nThis error is caused by the rm command returning 1 for different type of\nerrors, so we\'ll now use -f to ensure we don\'t fail if the file is\nmissing, which is what we intended before when passing the\ncheck_exit_code parameter to the execute call.\n\nTrivial-Fix\nCloses-Bug: #1885293\nChange-Id: Id1655614a8a60fba8ed225c6cea53ae1ed4b694a\n'}]",2,738226,efcec1d0ee7c892059519ad21791fce4943ac569,31,9,3,9535,,,0,"RBD: Fix error on disconnect

On the RBD driver, when doing a disconnect call inside a container, when
the ""rbd_common"" package is installed on the host, we can get a ""No such
file or directory"" error if the udev rule from the host removes the
symlink before we do.

This error is caused by the rm command returning 1 for different type of
errors, so we'll now use -f to ensure we don't fail if the file is
missing, which is what we intended before when passing the
check_exit_code parameter to the execute call.

Trivial-Fix
Closes-Bug: #1885293
Change-Id: Id1655614a8a60fba8ed225c6cea53ae1ed4b694a
",git fetch https://review.opendev.org/openstack/cinderlib refs/changes/26/738226/2 && git format-patch -1 --stdout FETCH_HEAD,"['cinderlib/tests/unit/test_nos_brick.py', 'releasenotes/notes/rbd-missing-file-or-directory-c835abac22f6b32e.yaml', 'cinderlib/nos_brick.py']",3,beb4f92862fdb4e97cb3491e170c2b5f7cbc8918,rbd-missing-file-or-directory," putils.execute('rm', '-f', *links, run_as_root=True,"," putils.execute('rm', *links, run_as_root=True, check_exit_code=(0, errno.ENOENT),",27,2
openstack%2Fcinder-tempest-plugin~master~Ibe1796e1380add34b6d8f19606bb55fda13c3c08,openstack/cinder-tempest-plugin,master,Ibe1796e1380add34b6d8f19606bb55fda13c3c08,zuul: collect cinderlib logs from tempest node(s) only,MERGED,2020-07-16 12:45:44.000000000,2020-07-21 21:48:07.000000000,2020-07-21 21:48:07.000000000,"[{'_account_id': 5314}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 25243}]","[{'number': 1, 'created': '2020-07-16 12:45:44.000000000', 'files': ['playbooks/post-cinderlib.yaml'], 'web_link': 'https://opendev.org/openstack/cinder-tempest-plugin/commit/6e36e2bd986d3d368851d8d60bb1cc4c7844ad12', 'message': 'zuul: collect cinderlib logs from tempest node(s) only\n\nThe functional tests are executed from the tempest node(s), which means\nthat the collection must happen from the same place, not all nodes;\notherwise the playbook code fails on pure compute nodes.\n\nChange-Id: Ibe1796e1380add34b6d8f19606bb55fda13c3c08\n'}]",0,741442,6e36e2bd986d3d368851d8d60bb1cc4c7844ad12,10,4,1,10459,,,0,"zuul: collect cinderlib logs from tempest node(s) only

The functional tests are executed from the tempest node(s), which means
that the collection must happen from the same place, not all nodes;
otherwise the playbook code fails on pure compute nodes.

Change-Id: Ibe1796e1380add34b6d8f19606bb55fda13c3c08
",git fetch https://review.opendev.org/openstack/cinder-tempest-plugin refs/changes/42/741442/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/post-cinderlib.yaml'],1,6e36e2bd986d3d368851d8d60bb1cc4c7844ad12,fix-post-cinderlib-collect,- hosts: tempest,- hosts: all,1,1
openstack%2Fironic-inspector~master~I64afec683ca3ac0e750ce30d689441d3517671b5,openstack/ironic-inspector,master,I64afec683ca3ac0e750ce30d689441d3517671b5,Set min version of tox to 3.2.1,MERGED,2020-07-15 13:26:17.000000000,2020-07-21 21:44:38.000000000,2020-07-21 21:42:43.000000000,"[{'_account_id': 4571}, {'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 13:26:17.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/32d68ef53bf7bf532d013dff0c8aa6814a5e882a', 'message': 'Set min version of tox to 3.2.1\n\nAs recommended, since version 3.2.0 tox switches pip invocations\nto use the module -m pip instead of direct invocation.\nWe set min version to 3.2.1 [1] to also fix the behavior of\n--parallel--safe-build\n\n[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10\n\nChange-Id: I64afec683ca3ac0e750ce30d689441d3517671b5\n'}]",0,741186,32d68ef53bf7bf532d013dff0c8aa6814a5e882a,9,4,1,23851,,,0,"Set min version of tox to 3.2.1

As recommended, since version 3.2.0 tox switches pip invocations
to use the module -m pip instead of direct invocation.
We set min version to 3.2.1 [1] to also fix the behavior of
--parallel--safe-build

[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10

Change-Id: I64afec683ca3ac0e750ce30d689441d3517671b5
",git fetch https://review.opendev.org/openstack/ironic-inspector refs/changes/86/741186/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,32d68ef53bf7bf532d013dff0c8aa6814a5e882a,tox-m-pip,minversion = 3.2.1,minversion = 3.1.0,1,1
openstack%2Fpython-openstackclient~stable%2Fqueens~I27d19c579179047aec11ed6b35ab7bb487ece468,openstack/python-openstackclient,stable/queens,I27d19c579179047aec11ed6b35ab7bb487ece468,[stable-only] Fix ComputeAgentTests for py3,ABANDONED,2020-07-21 03:17:50.000000000,2020-07-21 21:34:57.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 03:17:50.000000000', 'files': ['openstackclient/tests/functional/compute/v2/test_agent.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/bde27939b877a057329aa902f775023abd0ab55f', 'message': '[stable-only] Fix ComputeAgentTests for py3\n\nThis is a partial cherry pick of change\nIc9b2b47848a600e87a3674289ae7ae8c3e091fee to fix the tests failing on\nstable/queens. The remainder of the change cannot be backported to\nstable/queens as it breaks other tests [1].\n\n[1] https://review.opendev.org/742051\n\nChange-Id: I27d19c579179047aec11ed6b35ab7bb487ece468\n'}]",0,742061,bde27939b877a057329aa902f775023abd0ab55f,4,2,1,4690,,,0,"[stable-only] Fix ComputeAgentTests for py3

This is a partial cherry pick of change
Ic9b2b47848a600e87a3674289ae7ae8c3e091fee to fix the tests failing on
stable/queens. The remainder of the change cannot be backported to
stable/queens as it breaks other tests [1].

[1] https://review.opendev.org/742051

Change-Id: I27d19c579179047aec11ed6b35ab7bb487ece468
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/61/742061/1 && git format-patch -1 --stdout FETCH_HEAD,['openstackclient/tests/functional/compute/v2/test_agent.py'],1,bde27939b877a057329aa902f775023abd0ab55f,fix-func-tests, MD5HASH1.update('agent_1'.encode('utf-8')) MD5HASH2.update('agent_2'.encode('utf-8')), MD5HASH1.update('agent_1') MD5HASH2.update('agent_2'),2,2
openstack%2Fsushy-cli~master~I8ad99c474cae22e1b6d86feaf5c57eda4dbba5d9,openstack/sushy-cli,master,I8ad99c474cae22e1b6d86feaf5c57eda4dbba5d9,Set min version of tox to 3.2.1,MERGED,2020-07-15 13:31:20.000000000,2020-07-21 21:34:04.000000000,2020-07-21 21:32:34.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 13:31:20.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/sushy-cli/commit/176f7e07bba7daf79c8942022279114ea31ea08b', 'message': 'Set min version of tox to 3.2.1\n\nAs recommended, since version 3.2.0 tox switches pip invocations\nto use the module -m pip instead of direct invocation.\nWe set min version to 3.2.1 [1] to also fix the behavior of\n--parallel--safe-build\n\n[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10\n\nChange-Id: I8ad99c474cae22e1b6d86feaf5c57eda4dbba5d9\n'}]",0,741189,176f7e07bba7daf79c8942022279114ea31ea08b,9,2,1,23851,,,0,"Set min version of tox to 3.2.1

As recommended, since version 3.2.0 tox switches pip invocations
to use the module -m pip instead of direct invocation.
We set min version to 3.2.1 [1] to also fix the behavior of
--parallel--safe-build

[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10

Change-Id: I8ad99c474cae22e1b6d86feaf5c57eda4dbba5d9
",git fetch https://review.opendev.org/openstack/sushy-cli refs/changes/89/741189/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,176f7e07bba7daf79c8942022279114ea31ea08b,tox-m-pip,minversion = 3.2.1,minversion = 3.1.0,1,1
openstack%2Fcinder~stable%2Fussuri~Ibe1796e1380add34b6d8f19606bb55fda13c3c08,openstack/cinder,stable/ussuri,Ibe1796e1380add34b6d8f19606bb55fda13c3c08,zuul: collect cinderlib logs from tempest node(s) only,MERGED,2020-07-17 07:46:45.000000000,2020-07-21 21:30:08.000000000,2020-07-21 21:27:20.000000000,"[{'_account_id': 5314}, {'_account_id': 10459}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 19933}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 26537}, {'_account_id': 28801}]","[{'number': 1, 'created': '2020-07-17 07:46:45.000000000', 'files': ['playbooks/post-cinderlib.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/b584cb95bea7d138abb9d38690ee08e4e4f0de62', 'message': 'zuul: collect cinderlib logs from tempest node(s) only\n\nThe functional tests are executed from the tempest node(s), which means\nthat the collection must happen from the same place, not all nodes;\notherwise the playbook code fails on pure compute nodes.\n\nChange-Id: Ibe1796e1380add34b6d8f19606bb55fda13c3c08\n(cherry picked from commit 9487f0f4087cecd08ae5beaf354a11ae0f8b609c)\n'}]",0,741591,b584cb95bea7d138abb9d38690ee08e4e4f0de62,27,13,1,10459,,,0,"zuul: collect cinderlib logs from tempest node(s) only

The functional tests are executed from the tempest node(s), which means
that the collection must happen from the same place, not all nodes;
otherwise the playbook code fails on pure compute nodes.

Change-Id: Ibe1796e1380add34b6d8f19606bb55fda13c3c08
(cherry picked from commit 9487f0f4087cecd08ae5beaf354a11ae0f8b609c)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/91/741591/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/post-cinderlib.yaml'],1,b584cb95bea7d138abb9d38690ee08e4e4f0de62,fix-post-cinderlib-collect,- hosts: tempest,- hosts: all,1,1
openstack%2Fmanila~stable%2Ftrain~Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,openstack/manila,stable/train,Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,Update NFS helper restart,MERGED,2020-07-21 11:37:22.000000000,2020-07-21 21:18:05.000000000,2020-07-21 21:07:07.000000000,"[{'_account_id': 6413}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 25243}]","[{'number': 1, 'created': '2020-07-21 11:37:22.000000000', 'files': ['manila/share/drivers/helpers.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/0a3125439627da84bddfdf075b833f998f1935a7', 'message': 'Update NFS helper restart\n\nBecause ``service`` commands are deprecated in favor of\n``systemctl` commands, the check to see if the service\ncommand succeeds in the NFS helper used by e.g. the\nlvm and generic back ends fails.  The string sought to\nindicate an error is never present.\n\nUpdate the helper to use ``systemctl`` commands instead\nand error check for them correctly.\n\nCloses-bug: #1887695\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n(cherry picked from commit 391ec7dffa701f54843b3aafdc6d2f8b4dfe0504)\n(cherry picked from commit eb0de241b395fdc309d3b13b1adac464316f3f10)\n'}]",0,742145,0a3125439627da84bddfdf075b833f998f1935a7,12,4,1,9003,,,0,"Update NFS helper restart

Because ``service`` commands are deprecated in favor of
``systemctl` commands, the check to see if the service
command succeeds in the NFS helper used by e.g. the
lvm and generic back ends fails.  The string sought to
indicate an error is never present.

Update the helper to use ``systemctl`` commands instead
and error check for them correctly.

Closes-bug: #1887695
Change-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f
(cherry picked from commit 391ec7dffa701f54843b3aafdc6d2f8b4dfe0504)
(cherry picked from commit eb0de241b395fdc309d3b13b1adac464316f3f10)
",git fetch https://review.opendev.org/openstack/manila refs/changes/45/742145/1 && git format-patch -1 --stdout FETCH_HEAD,['manila/share/drivers/helpers.py'],1,0a3125439627da84bddfdf075b833f998f1935a7,bug/1887695-stable/train," server, ['sudo', 'systemctl', 'is-active', 'nfs-kernel-server'], if ""inactive"" in out: server, ['sudo', 'systemctl', 'restart', 'nfs-kernel-server'])"," server, ['sudo', 'service', 'nfs-kernel-server', 'status'], if ""not"" in out: server, ['sudo', 'service', 'nfs-kernel-server', 'restart'])",4,3
openstack%2Fcharm-neutron-api-plugin-arista~master~I9cb77f578c5654643eedc587937e521a32e7451a,openstack/charm-neutron-api-plugin-arista,master,I9cb77f578c5654643eedc587937e521a32e7451a,[DO NOT MERGE] Validating https://review.opendev.org/741932,ABANDONED,2020-07-20 13:01:46.000000000,2020-07-21 21:17:27.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-20 13:01:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-api-plugin-arista/commit/b394728e911ca639fe9d1ea5e07eb9a1f49b45d8', 'message': '[DO NOT MERGE] Validating https://review.opendev.org/741932\n\nChange-Id: I9cb77f578c5654643eedc587937e521a32e7451a\n'}, {'number': 2, 'created': '2020-07-20 14:32:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-api-plugin-arista/commit/0f765e8ef9523918f36338abb87ade4286746ca3', 'message': '[DO NOT MERGE] Validating https://review.opendev.org/741932\n\nChange-Id: I9cb77f578c5654643eedc587937e521a32e7451a\n'}, {'number': 3, 'created': '2020-07-21 09:21:16.000000000', 'files': ['layers/openstack/test-requirements.txt', 'layers/openstack/actions/restart-services', 'layers/openstack/templates/__init__.py', 'layers/openstack/metadata.yaml', 'layers/openstack/templates/parts/section-oslo-messaging-rabbit', 'layers/openstack/templates/parts/section-database', 'layers/openstack/LICENSE', 'layers/openstack/actions.yaml', 'layers/openstack/templates/parts/section-placement', 'layers/openstack/templates/openstack_https_frontend.conf', 'layers/openstack/templates/ceph.conf', 'layers/openstack/templates/parts/database', 'layers/openstack/templates/parts/section-oslo-middleware', 'layers/openstack/exec.d/openstack/charm-pre-install', 'layers/openstack/templates/haproxy.cfg', 'layers/openstack/layer.yaml', 'layers/openstack/templates/memcached.conf', 'layers/openstack/wheelhouse.txt', 'layers/openstack/actions/pause', 'layers/openstack/actions/os_actions.py', 'layers/openstack/README.md', 'layers/openstack/templates/parts/section-keystone-authtoken', 'layers/openstack/templates/parts/section-rabbitmq-oslo', 'layers/openstack/reactive/layer_openstack.py', 'layers/openstack/templates/parts/section-zeromq', 'layers/openstack/templates/git.upstart', 'layers/openstack/requirements.txt', 'layers/openstack/tox.ini', 'layers/openstack/config.yaml', 'layers/openstack/actions/resume', 'layers/openstack/templates/parts/section-transport-url'], 'web_link': 'https://opendev.org/openstack/charm-neutron-api-plugin-arista/commit/fb0605cf381d410dae5ffccf9e5a5a1e3021519b', 'message': '[DO NOT MERGE] Validating https://review.opendev.org/741932\n\nChange-Id: I9cb77f578c5654643eedc587937e521a32e7451a\n'}]",0,741933,fb0605cf381d410dae5ffccf9e5a5a1e3021519b,21,3,3,31289,,,0,"[DO NOT MERGE] Validating https://review.opendev.org/741932

Change-Id: I9cb77f578c5654643eedc587937e521a32e7451a
",git fetch https://review.opendev.org/openstack/charm-neutron-api-plugin-arista refs/changes/33/741933/2 && git format-patch -1 --stdout FETCH_HEAD,"['layers/openstack/test-requirements.txt', 'layers/openstack/actions/restart-services', 'layers/openstack/templates/__init__.py', 'layers/openstack/metadata.yaml', 'layers/openstack/templates/parts/section-oslo-messaging-rabbit', 'layers/openstack/templates/parts/section-database', 'layers/openstack/LICENSE', 'layers/openstack/actions.yaml', 'layers/openstack/templates/parts/section-placement', 'layers/openstack/templates/openstack_https_frontend.conf', 'layers/openstack/templates/ceph.conf', 'layers/openstack/templates/parts/database', 'layers/openstack/templates/parts/section-oslo-middleware', 'layers/openstack/exec.d/openstack/charm-pre-install', 'layers/openstack/templates/haproxy.cfg', 'layers/openstack/layer.yaml', 'layers/openstack/templates/memcached.conf', 'layers/openstack/wheelhouse.txt', 'layers/openstack/actions/pause', 'layers/openstack/actions/os_actions.py', 'layers/openstack/README.md', 'layers/openstack/templates/parts/section-keystone-authtoken', 'layers/openstack/templates/parts/section-rabbitmq-oslo', 'layers/openstack/reactive/layer_openstack.py', 'layers/openstack/templates/parts/section-zeromq', 'layers/openstack/templates/git.upstart', 'layers/openstack/requirements.txt', 'layers/openstack/tox.ini', 'layers/openstack/config.yaml', 'layers/openstack/actions/resume', 'layers/openstack/templates/parts/section-transport-url']",31,b394728e911ca639fe9d1ea5e07eb9a1f49b45d8,bug/1888225,# This template must be included under the [DEFAULT] section {% if amqp.transport_url -%} transport_url = {{ amqp.transport_url }} {% endif -%} ,,920,0
openstack%2Fcharm-openstack-dashboard~master~Ie287553cd73b634961485dfcb067283bd48ad10b,openstack/charm-openstack-dashboard,master,Ie287553cd73b634961485dfcb067283bd48ad10b,strip newlines and whitespace from user-supplied secret Closes-Bug: 1868645,MERGED,2020-06-30 02:09:48.000000000,2020-07-21 21:06:18.000000000,2020-07-21 21:06:18.000000000,"[{'_account_id': 11683}, {'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-06-30 02:09:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/a7464edf90730809e3cd1829b016ac2078c026a9', 'message': 'strip newlines and whitespace from secret\nCloses-Bug: 1868645\n\nChange-Id: Ie287553cd73b634961485dfcb067283bd48ad10b\n'}, {'number': 2, 'created': '2020-06-30 02:28:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/659872dca0e2747de8ad32dd55ce077189aaf4c1', 'message': 'strip newlines and whitespace from secret\nCloses-Bug: 1868645\n\nChange-Id: Ie287553cd73b634961485dfcb067283bd48ad10b\n'}, {'number': 3, 'created': '2020-06-30 02:48:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/1b90adbdb7ddf002d45552e77f3f0d1c31c54f1a', 'message': 'strip newlines and whitespace from secret\nCloses-Bug: 1868645\n\nChange-Id: Ie287553cd73b634961485dfcb067283bd48ad10b\n'}, {'number': 4, 'created': '2020-07-21 02:29:15.000000000', 'files': ['hooks/horizon_contexts.py'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/9a84700110c3dea431ff7f041f0f4c5dcd2f888e', 'message': 'strip newlines and whitespace from user-supplied secret\nCloses-Bug: 1868645\n\nChange-Id: Ie287553cd73b634961485dfcb067283bd48ad10b\n'}]",2,738540,9a84700110c3dea431ff7f041f0f4c5dcd2f888e,21,4,4,11683,,,0,"strip newlines and whitespace from user-supplied secret
Closes-Bug: 1868645

Change-Id: Ie287553cd73b634961485dfcb067283bd48ad10b
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/40/738540/4 && git format-patch -1 --stdout FETCH_HEAD,['hooks/horizon_contexts.py'],1,a7464edf90730809e3cd1829b016ac2078c026a9,bug/1868645," ""secret"": config('secret').strip() or pwgen(),"," ""secret"": config('secret') or pwgen(),",1,1
openstack%2Fmagnum~master~Ia68a7b694ac97563740a46e1facefc5efa0f85fc,openstack/magnum,master,Ia68a7b694ac97563740a46e1facefc5efa0f85fc,[k8s] Enforce that minor versions cannot be skipped,NEW,2020-07-02 03:27:17.000000000,2020-07-21 20:53:59.000000000,,"[{'_account_id': 6484}, {'_account_id': 20498}, {'_account_id': 22348}, {'_account_id': 28022}]","[{'number': 1, 'created': '2020-07-02 03:27:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/9916a2096fb11af3dc83d4b871a7a4144b59784c', 'message': '[WIP] Enforce that minor versions cannot be skipped\n\nTask: 40264\nStory: 2007676\n\nChange-Id: Ia68a7b694ac97563740a46e1facefc5efa0f85fc\n'}, {'number': 2, 'created': '2020-07-07 03:32:00.000000000', 'files': ['magnum/tests/unit/drivers/test_k8s_fedora_coreos_v1_driver.py', 'releasenotes/notes/k8s-upgrade-cannot-skip-minor-version-52f6215ce1b29f7b.yaml', 'magnum/drivers/heat/driver.py'], 'web_link': 'https://opendev.org/openstack/magnum/commit/49578e66de7ba7c925bf6a9fc63258b69db583a8', 'message': '[k8s] Enforce that minor versions cannot be skipped\n\nAdding enforement to make sure minor version of k8s cannot be\nskipped.\n\nTask: 40264\nStory: 2007676\n\nChange-Id: Ia68a7b694ac97563740a46e1facefc5efa0f85fc\n'}]",1,738951,49578e66de7ba7c925bf6a9fc63258b69db583a8,9,4,2,6484,,,0,"[k8s] Enforce that minor versions cannot be skipped

Adding enforement to make sure minor version of k8s cannot be
skipped.

Task: 40264
Story: 2007676

Change-Id: Ia68a7b694ac97563740a46e1facefc5efa0f85fc
",git fetch https://review.opendev.org/openstack/magnum refs/changes/51/738951/2 && git format-patch -1 --stdout FETCH_HEAD,['magnum/drivers/heat/driver.py'],1,9916a2096fb11af3dc83d4b871a7a4144b59784c,story/2007676-40264," if label == ""kube_tag"": # Enforce that minor versions cannot be skipped. new_tag = SV.from_pip_string(cluster_template.labels[label]) old_tag = SV.from_pip_string(cluster.labels[label]) if new_tag._minor - old_tag._minor > 1: raise exception.InvalidVersion( ""Minor versions cannot be "" ""skipped when upgrade a Kubernetes cluster."" ) ",,10,0
openstack%2Fpython-manilaclient~stable%2Fussuri~I3b67f3b566bdadf1cc228f885b7253435a4507b5,openstack/python-manilaclient,stable/ussuri,I3b67f3b566bdadf1cc228f885b7253435a4507b5,Migrate functional job to native zuulv3,MERGED,2020-07-20 22:12:50.000000000,2020-07-21 20:41:39.000000000,2020-07-21 20:36:44.000000000,"[{'_account_id': 6413}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-20 22:12:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/ddbee085b38de2fca253584492a3ee7e014c469e', 'message': 'Migrate functional job to native zuulv3\n\nThe manilaclient functional test job\n""manilaclient-dsvm-neutron-functional""\nis currently broken due to a change to its\nparent job in the devstack repository.\n\nInstead of investing to fix that legacy style\njob, we\'d be better off rewriting it to be\nin native zuulv3 style, i.e., without the\nuse of the deprecated devstack-gate project.\n\n- Introduce a new job ""python-manilaclient-functional""\n  which replaces ""manilaclient-dsvm-neutron-functional""\n  but preserves the testing done by the latter.\n- The new job runs on a minimal devstack (keystone,\n  neutron, manila, mysql and rabbit) and uses an ansible\n  role introduced to setup test configuration.\n- Add a ""bindep.txt"" file to call out test system\n  dependencies, and install them via the new job.\n- Cleanup the old job, the associated devstack gate\n  hooks and playbooks.\n\nChange-Id: I3b67f3b566bdadf1cc228f885b7253435a4507b5\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n(cherry picked from commit d65d7f05a7f99aad7b3a4ba286c8ab136775d303)\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n'}, {'number': 2, 'created': '2020-07-20 22:21:19.000000000', 'files': ['playbooks/legacy/manilaclient-dsvm-neutron-functional/run.yaml', 'playbooks/python-manilaclient-functional/post.yaml', 'contrib/ci/post_test_hook.sh', '.zuul.yaml', 'roles/populate-manilaclient-config/defaults/main.yaml', 'playbooks/python-manilaclient-functional/run.yaml', 'playbooks/legacy/manilaclient-dsvm-neutron-functional/post.yaml', 'bindep.txt', 'contrib/ci/pre_test_hook.sh', 'roles/populate-manilaclient-config/README.rst', 'zuul.d/project.yaml', 'roles/populate-manilaclient-config/tasks/main.yaml', 'zuul.d/python-manilaclient-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/f852358f21c04a551e40d397e00577fbb90aa534', 'message': 'Migrate functional job to native zuulv3\n\nThe manilaclient functional test job\n""manilaclient-dsvm-neutron-functional""\nis currently broken due to a change to its\nparent job in the devstack repository.\n\nInstead of investing to fix that legacy style\njob, we\'d be better off rewriting it to be\nin native zuulv3 style, i.e., without the\nuse of the deprecated devstack-gate project.\n\n- Introduce a new job ""python-manilaclient-functional""\n  which replaces ""manilaclient-dsvm-neutron-functional""\n  but preserves the testing done by the latter.\n- The new job runs on a minimal devstack (keystone,\n  neutron, manila, mysql and rabbit) and uses an ansible\n  role introduced to setup test configuration.\n- Add a ""bindep.txt"" file to call out test system\n  dependencies, and install them via the new job.\n- Cleanup the old job, the associated devstack gate\n  hooks and playbooks.\n\nChange-Id: I3b67f3b566bdadf1cc228f885b7253435a4507b5\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n(cherry picked from commit d65d7f05a7f99aad7b3a4ba286c8ab136775d303)\n'}]",0,742036,f852358f21c04a551e40d397e00577fbb90aa534,12,4,2,16643,,,0,"Migrate functional job to native zuulv3

The manilaclient functional test job
""manilaclient-dsvm-neutron-functional""
is currently broken due to a change to its
parent job in the devstack repository.

Instead of investing to fix that legacy style
job, we'd be better off rewriting it to be
in native zuulv3 style, i.e., without the
use of the deprecated devstack-gate project.

- Introduce a new job ""python-manilaclient-functional""
  which replaces ""manilaclient-dsvm-neutron-functional""
  but preserves the testing done by the latter.
- The new job runs on a minimal devstack (keystone,
  neutron, manila, mysql and rabbit) and uses an ansible
  role introduced to setup test configuration.
- Add a ""bindep.txt"" file to call out test system
  dependencies, and install them via the new job.
- Cleanup the old job, the associated devstack gate
  hooks and playbooks.

Change-Id: I3b67f3b566bdadf1cc228f885b7253435a4507b5
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
(cherry picked from commit d65d7f05a7f99aad7b3a4ba286c8ab136775d303)
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/36/742036/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/manilaclient-dsvm-neutron-functional/run.yaml', 'playbooks/python-manilaclient-functional/post.yaml', 'contrib/ci/post_test_hook.sh', '.zuul.yaml', 'roles/populate-manilaclient-config/defaults/main.yaml', 'playbooks/python-manilaclient-functional/run.yaml', 'playbooks/legacy/manilaclient-dsvm-neutron-functional/post.yaml', 'bindep.txt', 'contrib/ci/pre_test_hook.sh', 'roles/populate-manilaclient-config/README.rst', 'zuul.d/project.yaml', 'roles/populate-manilaclient-config/tasks/main.yaml', 'zuul.d/python-manilaclient-jobs.yaml']",13,ddbee085b38de2fca253584492a3ee7e014c469e,native-zuulv3-migration,"- job: name: python-manilaclient-functional parent: devstack-minimal irrelevant-files: - ^manilaclient/tests/unit/.*$ - ^setup.cfg$ - ^tools/.*$ - ^tox.ini$ required-projects: - openstack/keystone - openstack/manila - openstack/neutron - openstack/python-manilaclient timeout: 5400 run: playbooks/python-manilaclient-functional/run.yaml post-run: playbooks/python-manilaclient-functional/post.yaml vars: zuul_copy_output: ""{{ zuul.project.src_dir }}/etc/manilaclient/manilaclient.conf"": logs tox_environment: PYTHONUNBUFFERED: 'true' tox_envlist: functional devstack_plugins: manila: https://opendev.org/openstack/manila devstack_localrc: USE_PYTHON3: true INSTALL_TEMPEST: false # Enable manila with a fake driver that supports all capabilities MANILA_CONFIGURE_DEFAULT_TYPES: true MANILA_OPTGROUP_DEFAULT_quota_share_networks: 50 MANILA_DEFAULT_SHARE_TYPE_EXTRA_SPECS: 'snapshot_support=True create_share_from_snapshot_support=True revert_to_snapshot_support=True mount_snapshot_support=True' MANILA_INSTALL_TEMPEST_PLUGIN_SYSTEMWIDE: false MANILA_SERVICE_IMAGE_ENABLED: false MANILA_SHARE_MIGRATION_PERIOD_TASK_INTERVAL: 1 SHARE_DRIVER: manila.tests.share.drivers.dummy.DummyDriver MANILA_REPLICA_STATE_UPDATE_INTERVAL: 10 MANILA_ENABLED_BACKENDS: alpha,beta,gamma,delta MANILA_CONFIGURE_GROUPS: alpha,beta,gamma,delta,membernet,adminnet MANILA_OPTGROUP_alpha_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_alpha_driver_handles_share_servers: true MANILA_OPTGROUP_alpha_share_backend_name: ALPHA MANILA_OPTGROUP_alpha_network_config_group: membernet MANILA_OPTGROUP_alpha_admin_network_config_group: adminnet MANILA_OPTGROUP_alpha_replication_domain: DUMMY_DOMAIN_2 MANILA_OPTGROUP_beta_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_beta_driver_handles_share_servers: true MANILA_OPTGROUP_beta_share_backend_name: BETA MANILA_OPTGROUP_beta_network_config_group: membernet MANILA_OPTGROUP_beta_admin_network_config_group: adminnet MANILA_OPTGROUP_beta_replication_domain: DUMMY_DOMAIN_2 MANILA_OPTGROUP_gamma_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_gamma_driver_handles_share_servers: false MANILA_OPTGROUP_gamma_share_backend_name: GAMMA MANILA_OPTGROUP_gamma_replication_domain: DUMMY_DOMAIN MANILA_OPTGROUP_delta_share_driver: manila.tests.share.drivers.dummy.DummyDriver MANILA_OPTGROUP_delta_driver_handles_share_servers: false MANILA_OPTGROUP_delta_share_backend_name: DELTA MANILA_OPTGROUP_delta_replication_domain: DUMMY_DOMAIN MANILA_OPTGROUP_membernet_network_api_class: manila.network.standalone_network_plugin.StandaloneNetworkPlugin MANILA_OPTGROUP_membernet_standalone_network_plugin_gateway: 10.0.0.1 MANILA_OPTGROUP_membernet_standalone_network_plugin_mask: 24 MANILA_OPTGROUP_membernet_standalone_network_plugin_network_type: vlan MANILA_OPTGROUP_membernet_standalone_network_plugin_segmentation_id: 1010 MANILA_OPTGROUP_membernet_standalone_network_plugin_allowed_ip_ranges: 10.0.0.10-10.0.0.209 MANILA_OPTGROUP_membernet_network_plugin_ipv4_enabled: true MANILA_OPTGROUP_adminnet_network_api_class: manila.network.standalone_network_plugin.StandaloneNetworkPlugin MANILA_OPTGROUP_adminnet_standalone_network_plugin_gateway: 11.0.0.1 MANILA_OPTGROUP_adminnet_standalone_network_plugin_mask: 24 MANILA_OPTGROUP_adminnet_standalone_network_plugin_network_type: vlan MANILA_OPTGROUP_adminnet_standalone_network_plugin_segmentation_id: 1011 MANILA_OPTGROUP_adminnet_standalone_network_plugin_allowed_ip_ranges: 11.0.0.10-11.0.0.19,11.0.0.30-11.0.0.39,11.0.0.50-11.0.0.199 MANILA_OPTGROUP_adminnet_network_plugin_ipv4_enabled: true devstack_services: # Keystone key: true # Neutron q-agt: true q-dhcp: true q-l3: true q-meta: true q-metering: true q-svc: true ",,236,272
openstack%2Fglance-specs~master~Ia03a44ee193b3979f6313d70b595d9923fad8f96,openstack/glance-specs,master,Ia03a44ee193b3979f6313d70b595d9923fad8f96,Update glance image schema,ABANDONED,2020-01-28 16:27:23.000000000,2020-07-21 19:40:58.000000000,,"[{'_account_id': 4257}, {'_account_id': 5314}, {'_account_id': 22348}, {'_account_id': 30515}]","[{'number': 1, 'created': '2020-01-28 16:27:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/c07f50217270a99311bbf2dfee0da2a3b9d934e4', 'message': 'Update glance image schema\n\nChange-Id: Ia03a44ee193b3979f6313d70b595d9923fad8f96\n'}, {'number': 2, 'created': '2020-01-28 16:58:21.000000000', 'files': ['specs/train/approved/glance/spec-lite-image-schema.rst'], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/b151546df54eac551fa31de13e89ba22687d2994', 'message': 'Update glance image schema\n\nChange-Id: Ia03a44ee193b3979f6313d70b595d9923fad8f96\n'}]",2,704625,b151546df54eac551fa31de13e89ba22687d2994,9,4,2,30515,,,0,"Update glance image schema

Change-Id: Ia03a44ee193b3979f6313d70b595d9923fad8f96
",git fetch https://review.opendev.org/openstack/glance-specs refs/changes/25/704625/2 && git format-patch -1 --stdout FETCH_HEAD,['specs/train/approved/glance/spec-lite-image-schema.rst'],1,c07f50217270a99311bbf2dfee0da2a3b9d934e4,glance-image-schema,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode ========================================================= Spec Lite: Add more properties to image_schema ========================================================= :project: glance :problem: Glance glance image-schema to support reactivate, deactivate and tenants. :solution: Update glance/api/v2/image.py file to include below properties: 'reactivate': { 'type': 'boolean', 'description': _('If true, image will be reactivated.'), }, 'deactivate': { 'type': 'boolean', 'description': _('If true, image will be deactivated.'), }, 'tenants': { 'type': 'array', 'description': _('List of members of the image.'), }, :alternatives: None :impacts: None :timeline: Include in Train release. :link: None :assignee: skumar@att.com ",,39,0
openstack%2Fworkload-ref-archs~master~I7ee18992a3f769a029157e09e5b7911660c7a910,openstack/workload-ref-archs,master,I7ee18992a3f769a029157e09e5b7911660c7a910,Add Python 3 Train unit tests,MERGED,2019-08-13 06:23:05.000000000,2020-07-21 18:52:55.000000000,2020-07-21 18:52:55.000000000,"[{'_account_id': 14091}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-13 06:23:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/workload-ref-archs/commit/b154037dc99556b7cf110d2f8feec77ae86e77e3', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I7ee18992a3f769a029157e09e5b7911660c7a910\n'}, {'number': 2, 'created': '2020-07-21 15:04:04.000000000', 'files': ['setup.cfg', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/workload-ref-archs/commit/4379915dc52870a7e06c0083dfd3705fc96127a2', 'message': 'Add Python 3 Train unit tests\n\nThis is a mechanically generated patch to ensure unit testing is in place\nfor all of the Tested Runtimes for Train.\n\nSee the Train python3-updates goal document for details:\nhttps://governance.openstack.org/tc/goals/train/python3-updates.html\n\nChange-Id: I7ee18992a3f769a029157e09e5b7911660c7a910\n'}]",0,676109,4379915dc52870a7e06c0083dfd3705fc96127a2,9,2,2,28543,,,0,"Add Python 3 Train unit tests

This is a mechanically generated patch to ensure unit testing is in place
for all of the Tested Runtimes for Train.

See the Train python3-updates goal document for details:
https://governance.openstack.org/tc/goals/train/python3-updates.html

Change-Id: I7ee18992a3f769a029157e09e5b7911660c7a910
",git fetch https://review.opendev.org/openstack/workload-ref-archs refs/changes/09/676109/1 && git format-patch -1 --stdout FETCH_HEAD,"['setup.cfg', 'tox.ini']",2,b154037dc99556b7cf110d2f8feec77ae86e77e3,,"envlist = py37,py36,py27,pypy,pep8","envlist = py35,py27,pypy,pep8",3,3
openstack%2Fmanila-image-elements~master~I608d380f2347efe8615c5ff3ae157f27bbfbf497,openstack/manila-image-elements,master,I608d380f2347efe8615c5ff3ae157f27bbfbf497,Ensure tox in test job,MERGED,2020-07-20 17:42:03.000000000,2020-07-21 18:24:21.000000000,2020-07-21 18:24:21.000000000,"[{'_account_id': 6413}, {'_account_id': 22348}, {'_account_id': 30002}, {'_account_id': 30238}]","[{'number': 1, 'created': '2020-07-20 17:42:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/5500d3d8701663dd9fa3123aaf955b1fd79f1681', 'message': 'Ensure tox in test job\n\nWe use tox to build images, and it is\nno longer being included in the base\njob that we depend on.\n\nChange-Id: I608d380f2347efe8615c5ff3ae157f27bbfbf497\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n'}, {'number': 2, 'created': '2020-07-20 18:58:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/770b05e190b707807dec04b7068f07b563203b69', 'message': 'Ensure tox in test job\n\nWe use tox to build images, and it is\nno longer being included in the base\njob that we depend on.\n\nChange-Id: I608d380f2347efe8615c5ff3ae157f27bbfbf497\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n'}, {'number': 3, 'created': '2020-07-20 19:00:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/3da7cc03040c4c672b09180f2bfcc83c7da56c1f', 'message': 'Ensure tox in test job\n\nWe use tox to build images, and it is\nno longer being included in the base\njob that we depend on.\n\nChange-Id: I608d380f2347efe8615c5ff3ae157f27bbfbf497\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n'}, {'number': 4, 'created': '2020-07-20 19:51:55.000000000', 'files': ['playbooks/manila-buildimages/run.yaml', 'playbooks/manila-buildimage-docker/run.yaml'], 'web_link': 'https://opendev.org/openstack/manila-image-elements/commit/9f1a542e44c67b0d5f171d622839c606169331d9', 'message': 'Ensure tox in test job\n\nWe use tox to build images, and it is\nno longer being included in the base\njob that we depend on.\n\nChange-Id: I608d380f2347efe8615c5ff3ae157f27bbfbf497\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n'}]",0,741994,9f1a542e44c67b0d5f171d622839c606169331d9,13,4,4,16643,,,0,"Ensure tox in test job

We use tox to build images, and it is
no longer being included in the base
job that we depend on.

Change-Id: I608d380f2347efe8615c5ff3ae157f27bbfbf497
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
",git fetch https://review.opendev.org/openstack/manila-image-elements refs/changes/94/741994/4 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/manila-buildimages/run.yaml'],1,5500d3d8701663dd9fa3123aaf955b1fd79f1681,ci, - ensure-tox,,1,0
openstack%2Fswift~master~I1d37324b33fae6a65d87ef510c8111b29db117a5,openstack/swift,master,I1d37324b33fae6a65d87ef510c8111b29db117a5,skip same suffixes sync when update_delete,NEW,2020-07-21 13:58:25.000000000,2020-07-21 18:14:31.000000000,,"[{'_account_id': 1179}, {'_account_id': 10068}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 13:58:25.000000000', 'files': ['swift/obj/replicator.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/785ee913f1de4e509d0905924c42b89ae421bc61', 'message': 'skip same suffixes sync when update_delete\n\nChange-Id: I1d37324b33fae6a65d87ef510c8111b29db117a5\n'}]",8,742197,785ee913f1de4e509d0905924c42b89ae421bc61,4,3,1,32225,,,0,"skip same suffixes sync when update_delete

Change-Id: I1d37324b33fae6a65d87ef510c8111b29db117a5
",git fetch https://review.opendev.org/openstack/swift refs/changes/97/742197/1 && git format-patch -1 --stdout FETCH_HEAD,['swift/obj/replicator.py'],1,785ee913f1de4e509d0905924c42b89ae421bc61,," hashed, local_hash = tpool_reraise( get_hashes, job['path'], do_listdir=(self.replication_count % 10) == 0, reclaim_age=self.reclaim_age) with Timeout(self.http_timeout): resp = http_connect( node['replication_ip'], node['replication_port'], node['device'], job['partition'], 'REPLICATE', '', headers=headers).getresponse() if resp.status == HTTP_INSUFFICIENT_STORAGE: self.logger.error( _('%(replication_ip)s/%(device)s ' 'responded as unmounted'), node) attempts_left += 1 failure_devs_info.add((node['replication_ip'], node['device'])) continue if resp.status != HTTP_OK: self.logger.error(_(""Invalid response %(resp)s "" ""from %(ip)s""), {'resp': resp.status, 'ip': node['replication_ip']}) failure_devs_info.add((node['replication_ip'], node['device'])) continue remote_hash = pickle.loads(resp.read()) del resp node_suffixes = [suffix for suffix in local_hash if local_hash[suffix] != remote_hash.get(suffix, -1)] if not node_suffixes: continue node, job, node_suffixes, **kwargs) '/' + '-'.join(node_suffixes), headers=headers)"," node, job, suffixes, **kwargs) '/' + '-'.join(suffixes), headers=headers)",34,2
openstack%2Fopenstack-helm-addons~master~I41eb227ac8025848f3d149662ff3ef53c58ab037,openstack/openstack-helm-addons,master,I41eb227ac8025848f3d149662ff3ef53c58ab037,Explicitly specify a script directory for jobs run,MERGED,2020-07-21 16:39:08.000000000,2020-07-21 18:11:07.000000000,2020-07-21 18:11:07.000000000,"[{'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 16:39:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-addons/commit/e210b3f3726b40d679a85a723cf2e5559d083f48', 'message': 'Explicitly specify a script directory for jobs run\n\nRequired to support reusing of a job in another project.\n\nChange-Id: I41eb227ac8025848f3d149662ff3ef53c58ab037\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2020-07-21 16:39:22.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-addons/commit/5b33307fd5ff27d4e8068ebabe5b8a63103e5131', 'message': 'Explicitly specify a script directory for jobs run\n\nRequired to support reusing of a job in another project.\n\nChange-Id: I41eb227ac8025848f3d149662ff3ef53c58ab037\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,742244,5b33307fd5ff27d4e8068ebabe5b8a63103e5131,8,3,2,8863,,,0,"Explicitly specify a script directory for jobs run

Required to support reusing of a job in another project.

Change-Id: I41eb227ac8025848f3d149662ff3ef53c58ab037
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-addons refs/changes/44/742244/2 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,e210b3f3726b40d679a85a723cf2e5559d083f48,, gate_scripts_relative_path: ../openstack-helm-addons gate_scripts_relative_path: ../openstack-helm-addons gate_scripts_relative_path: ../openstack-helm-addons gate_scripts_relative_path: ../openstack-helm-addons gate_scripts_relative_path: ../openstack-helm-addons gate_scripts_relative_path: ../openstack-helm-addons,,6,0
openstack%2Fcinder~stable%2Ftrain~I781144cbe68d6908333234a614e021365b0a6d4a,openstack/cinder,stable/train,I781144cbe68d6908333234a614e021365b0a6d4a,HPE 3PAR: Support duplicated FQDN in network,MERGED,2020-04-29 10:00:45.000000000,2020-07-21 18:01:43.000000000,2020-07-21 17:59:13.000000000,"[{'_account_id': 7198}, {'_account_id': 9535}, {'_account_id': 10118}, {'_account_id': 10459}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 18883}, {'_account_id': 21863}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 28801}, {'_account_id': 29122}]","[{'number': 1, 'created': '2020-04-29 10:00:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/bfedd0e4b3df6ab5176fbd805d0a30c4b6a42a14', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\n'}, {'number': 2, 'created': '2020-05-04 13:04:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/ea9159aa3cf81cf0109d9b41a0404073b5c1d0a2', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 3, 'created': '2020-05-20 09:59:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/41989d5ee7fe916f3dbbb03070de818ebc232bfc', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 4, 'created': '2020-06-22 10:30:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/f3686002f2c3e3dbbd9e7727dfb4843689df4066', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 5, 'created': '2020-06-22 11:44:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/373cde2b8791b8b6b27571d38da342c5ca99bee8', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 6, 'created': '2020-06-23 10:02:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/bc54e5f7def172276a9d2819351e1e916677d285', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 7, 'created': '2020-06-26 06:22:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/203caf0af45c1086ff60b3bdf3b6794a1a4b9c55', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 8, 'created': '2020-07-01 14:47:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/27fea730e6cde6b2e9b0a0650be5799e2056cacc', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 9, 'created': '2020-07-01 15:06:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/3dbd2a2af23223a005ef702ad6df6e42c2280c00', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 10, 'created': '2020-07-02 07:58:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/5fe689999dbe13c4c60034eef812578f752b648e', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}, {'number': 11, 'created': '2020-07-02 10:19:08.000000000', 'files': ['doc/source/configuration/block-storage/drivers/hpe-3par-driver.rst', 'cinder/opts.py', 'cinder/volume/driver.py', 'cinder/volume/drivers/hpe/hpe_3par_iscsi.py', 'cinder/tests/unit/volume/drivers/test_kaminario.py', 'cinder/volume/drivers/kaminario/kaminario_common.py', 'cinder/volume/drivers/hpe/hpe_3par_fc.py', 'cinder/tests/unit/volume/drivers/hpe/test_hpe3par.py', 'cinder/volume/drivers/hpe/hpe_3par_common.py', 'releasenotes/notes/hpe-3par-support-duplicated-fqdn-751ad1dbcd137fbb.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/4cf0d112439af65a00f48830c375ba9c78152831', 'message': 'HPE 3PAR: Support duplicated FQDN in network\n\nThe 3PAR driver uses the FQDN of the node that is doing the\nattach as an unique identifier to map the volume.\n\nThe problem is that the FQDN is not always unique, there are\nenvironments where the same FQDN can be found in different systems, and\nin those cases if both try to attach volumes the second system will\nfail.\n\nOne example of this happening would be on a QA environment where you are\ncreating VMs and they all have names like controller-0.localdomain and\ncompute-0.localdomain.\n\nThis patch adds a configuration option to the 3PAR driver called\n`unique_fqdn_network` to support these kind of environments.\n\nConflicts:\n\tcinder/opts.py\n\tcinder/tests/unit/volume/drivers/hpe/test_hpe3par.py\n\tcinder/tests/unit/volume/drivers/test_kaminario.py\n\tcinder/volume/drivers/hpe/hpe_3par_common.py\n\tcinder/volume/drivers/kaminario/kaminario_common.py\n\nChange-Id: I781144cbe68d6908333234a614e021365b0a6d4a\nCloses-Bug: #1834695\n(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)\n'}]",7,724271,4cf0d112439af65a00f48830c375ba9c78152831,217,19,11,29122,,,0,"HPE 3PAR: Support duplicated FQDN in network

The 3PAR driver uses the FQDN of the node that is doing the
attach as an unique identifier to map the volume.

The problem is that the FQDN is not always unique, there are
environments where the same FQDN can be found in different systems, and
in those cases if both try to attach volumes the second system will
fail.

One example of this happening would be on a QA environment where you are
creating VMs and they all have names like controller-0.localdomain and
compute-0.localdomain.

This patch adds a configuration option to the 3PAR driver called
`unique_fqdn_network` to support these kind of environments.

Conflicts:
	cinder/opts.py
	cinder/tests/unit/volume/drivers/hpe/test_hpe3par.py
	cinder/tests/unit/volume/drivers/test_kaminario.py
	cinder/volume/drivers/hpe/hpe_3par_common.py
	cinder/volume/drivers/kaminario/kaminario_common.py

Change-Id: I781144cbe68d6908333234a614e021365b0a6d4a
Closes-Bug: #1834695
(cherry picked from commit f1cb8e5d8fcb09e656ba433cf764135603ab5ce1)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/71/724271/6 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/opts.py', 'doc/source/configuration/block-storage/drivers/hpe-3par-driver.rst', 'cinder/volume/driver.py', 'cinder/volume/drivers/hpe/hpe_3par_iscsi.py', 'cinder/tests/unit/volume/drivers/test_kaminario.py', 'cinder/volume/drivers/kaminario/kaminario_common.py', 'cinder/volume/drivers/hpe/hpe_3par_fc.py', 'releasenotes/notes/hpe-3par-support-duplicated-fqdn-0f99beedd66c658e.yaml', 'cinder/tests/unit/volume/drivers/hpe/test_hpe3par.py', 'cinder/volume/drivers/hpe/hpe_3par_common.py']",10,bfedd0e4b3df6ab5176fbd805d0a30c4b6a42a14,bug/1834695,"from cinder.volume import driver 4.0.15 - Support duplicated FQDN in network. Bug #1834695 VERSION = ""4.0.15"" additional_opts = driver.BaseVD._get_oslo_driver_opts( 'unique_fqdn_network') return hpe3par_opts + additional_opts def _safe_hostname(self, hostname, connector=None): SHARED_CONF_GROUP = 'backend_defaults' shared_backend_conf = CONF._get(SHARED_CONF_GROUP) unique_fqdn_network = shared_backend_conf.unique_fqdn_network if(not unique_fqdn_network and connector.get('initiator')): iqn = connector.get('initiator') iqn = iqn.replace("":"", ""-"") return iqn[::-1][:31] else: try: index = hostname.index('.') except ValueError: # couldn't find it index = len(hostname) # we'll just chop this off for now. if index > 31: index = 31 return hostname[:index]"," VERSION = ""4.0.14"" return hpe3par_opts def _safe_hostname(self, hostname): try: index = hostname.index('.') except ValueError: # couldn't find it index = len(hostname) # we'll just chop this off for now. if index > 31: index = 31 return hostname[:index]",149,33
openstack%2Fironic-inspector~stable%2Ftrain~Ia96a9a8b85841612fb13616754bfdbf651b212d8,openstack/ironic-inspector,stable/train,Ia96a9a8b85841612fb13616754bfdbf651b212d8,Do not try to set local_gb to -1 when the matched root device size is 0,MERGED,2020-07-20 13:29:08.000000000,2020-07-21 17:53:18.000000000,2020-07-21 17:50:48.000000000,"[{'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-07-20 13:29:08.000000000', 'files': ['ironic_inspector/test/unit/test_plugins_standard.py', 'ironic_inspector/plugins/standard.py', 'releasenotes/notes/zero-size-55c4b4f2b9e8384d.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/2c85396dd841682496de2f89937930056ae2b6e5', 'message': ""Do not try to set local_gb to -1 when the matched root device size is 0\n\nApparently, virtual floppies on some machines are represented as normal\nblock devices, but with size = 0. We should filter them out in ironic-lib,\nbut for now at least don't fail miserably.\n\nStory: #2007907\nTask: #40308\nChange-Id: Ia96a9a8b85841612fb13616754bfdbf651b212d8\n(cherry picked from commit 95e103d21cffd9040619ab04edd71a53a650cf34)\n""}]",0,741937,2c85396dd841682496de2f89937930056ae2b6e5,13,4,1,10239,,,0,"Do not try to set local_gb to -1 when the matched root device size is 0

Apparently, virtual floppies on some machines are represented as normal
block devices, but with size = 0. We should filter them out in ironic-lib,
but for now at least don't fail miserably.

Story: #2007907
Task: #40308
Change-Id: Ia96a9a8b85841612fb13616754bfdbf651b212d8
(cherry picked from commit 95e103d21cffd9040619ab04edd71a53a650cf34)
",git fetch https://review.opendev.org/openstack/ironic-inspector refs/changes/37/741937/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_inspector/test/unit/test_plugins_standard.py', 'ironic_inspector/plugins/standard.py', 'releasenotes/notes/zero-size-55c4b4f2b9e8384d.yaml']",3,2c85396dd841682496de2f89937930056ae2b6e5,zero-size-stable/train,--- fixes: - | No longer tries to set ``local_gb`` to -1 if the matched root device has size of zero. ,,26,5
openstack%2Freleases~master~I1a4a2f926329f16aaadb44ba7af5ddb38360b9dc,openstack/releases,master,I1a4a2f926329f16aaadb44ba7af5ddb38360b9dc,Add ussuri release note links for osc-lib and python-openstackclient,MERGED,2020-07-21 16:56:06.000000000,2020-07-21 17:48:09.000000000,2020-07-21 17:48:09.000000000,"[{'_account_id': 2}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 16:56:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/92c09ff5565d17ba2c6f832ebdf940b4838a631c', 'message': 'Add ussuri release note links for osc-lib and python-openstackclient\n\nChange-Id: I1a4a2f926329f16aaadb44ba7af5ddb38360b9dc\n'}, {'number': 2, 'created': '2020-07-21 17:16:18.000000000', 'files': ['deliverables/ussuri/python-openstackclient.yaml', 'deliverables/ussuri/osc-lib.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/bc484b3e9b7b237f32246f0cfefb10c95f1d3681', 'message': 'Add ussuri release note links for osc-lib and python-openstackclient\n\nChange-Id: I1a4a2f926329f16aaadb44ba7af5ddb38360b9dc\n'}]",2,742250,bc484b3e9b7b237f32246f0cfefb10c95f1d3681,10,3,2,15343,,,0,"Add ussuri release note links for osc-lib and python-openstackclient

Change-Id: I1a4a2f926329f16aaadb44ba7af5ddb38360b9dc
",git fetch https://review.opendev.org/openstack/releases refs/changes/50/742250/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/ussuri/python-openstackclient.yaml', 'deliverables/ussuri/osc-lib.yaml']",2,92c09ff5565d17ba2c6f832ebdf940b4838a631c,,https://docs.openstack.org/releasenotes/osc-lib/ussuri.html,,2,0
openstack%2Fcinder~master~Ie7165b02119f0e49902a6393fbfd33fd35ce270c,openstack/cinder,master,Ie7165b02119f0e49902a6393fbfd33fd35ce270c,Correct new_type type in VolumeManager retype method,MERGED,2019-05-09 10:34:47.000000000,2020-07-21 17:41:38.000000000,2020-07-21 17:34:33.000000000,"[{'_account_id': 1736}, {'_account_id': 4523}, {'_account_id': 7198}, {'_account_id': 8037}, {'_account_id': 9008}, {'_account_id': 9236}, {'_account_id': 9535}, {'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 11611}, {'_account_id': 11904}, {'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 12032}, {'_account_id': 12033}, {'_account_id': 12369}, {'_account_id': 13144}, {'_account_id': 14384}, {'_account_id': 15296}, {'_account_id': 15386}, {'_account_id': 15670}, {'_account_id': 15831}, {'_account_id': 15941}, {'_account_id': 16834}, {'_account_id': 16897}, {'_account_id': 18120}, {'_account_id': 18883}, {'_account_id': 19933}, {'_account_id': 20284}, {'_account_id': 21767}, {'_account_id': 21863}, {'_account_id': 21884}, {'_account_id': 21976}, {'_account_id': 22126}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22495}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24236}, {'_account_id': 24814}, {'_account_id': 24815}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 25678}, {'_account_id': 26077}, {'_account_id': 26233}, {'_account_id': 26537}, {'_account_id': 27336}, {'_account_id': 27615}, {'_account_id': 28801}, {'_account_id': 29637}, {'_account_id': 29705}, {'_account_id': 29716}, {'_account_id': 30688}, {'_account_id': 31254}, {'_account_id': 32071}]","[{'number': 1, 'created': '2019-05-09 10:34:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/a0c35d1237c6643f9f7ece7e5d96cc790a822528', 'message': 'Fix rbd mirror retype bug\n\nFor new_type is dict type not VolumeType[1],\ngetattr[2] always return None.\nChange fro ""getattr"" to ""get"" and update unittests\nfor fixing retype bug.\n\n[1] https://github.com/openstack/cinder/blob/master/cinder/volume/manager.py#L2836\n[2] https://github.com/openstack/cinder/blob/master/cinder/volume/drivers/rbd.py#L777\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 2, 'created': '2019-05-13 01:23:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/54749a825263c84a9e8e0edef225943a729f6b4f', 'message': 'Fix rbd mirror retype bug\n\nFor new_type is dict type not VolumeType[1],\ngetattr[2] always return None.\nChange from ""getattr"" to ""get"" and update unittests\nfor fixing retype bug.\n\n[1] https://github.com/openstack/cinder/blob/master/cinder/volume/manager.py#L2836\n[2] https://github.com/openstack/cinder/blob/master/cinder/volume/drivers/rbd.py#L777\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 3, 'created': '2019-05-13 11:39:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/c867a735afc99cd08397cbf68f63b695ef292549', 'message': 'Fix rbd mirror retype bug\n\nFor new_type[1] should be VolumeType object not dictionary.\n\n[1] https://github.com/openstack/cinder/blob/master/cinder/volume/manager.py#L2836\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 4, 'created': '2019-05-15 10:54:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/f2335daeebeccdb021c02b0a0ad3aa50ca92d011', 'message': 'Fix rbd mirror retype bug\n\nFor new_type[1] should be VolumeType object not dictionary.\n\n[1] https://github.com/openstack/cinder/blob/master/cinder/volume/manager.py#L2836\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 5, 'created': '2019-05-21 01:47:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/77b77bc6768e2f5d183b0a85499bb8dd6237e7f0', 'message': 'Fix rbd mirror retype bug\n\nnew_type should be VolumeType object not dictionary.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 6, 'created': '2019-06-05 02:26:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/54fab98b00f899caa79ce575b83dd034d66d678a', 'message': 'Fix rbd mirror retype bug\n\nnew_type should be VolumeType object not dictionary.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 7, 'created': '2019-06-24 08:04:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/eb12eddf4a77cca48c825c93eddeec38175a073f', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe manager should be passing new_type Volume Type\nobject to drivers not dictionary.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 8, 'created': '2019-07-04 08:55:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/e80d55a7062f7f0dcd4afb7f153b4512b3b68081', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe manager should be passing new_type Volume Type\nobject to drivers not dictionary.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 9, 'created': '2019-07-10 02:22:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/a7c5aa43687c1b74b380eb07b8583aca2ef44e45', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method of VolumeManager class should pass\nVolumeType new_type object same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 10, 'created': '2019-07-31 07:14:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/17c6e7a3cc7bd8c516308851c5122557d3cba677', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method of VolumeManager class should pass\nVolumeType new_type object same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 11, 'created': '2019-08-01 03:03:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/f15abab68c980c012983a1efc3157fb219b2833b', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 12, 'created': '2019-08-02 06:11:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/61708635e5e227dca47dffee6b110b24fd6de3b4', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 13, 'created': '2019-08-05 13:41:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/8e24e0ad52fc135c8c1a29ef4c65c27308d84b7d', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 14, 'created': '2019-08-15 01:33:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/1df610504717128e03f35ba8b74925d07efdfc27', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 15, 'created': '2019-09-16 02:15:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/730a75ca3e312ed7421b5046590ed72c52575db3', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 16, 'created': '2019-10-17 02:56:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/8f30d80b63495a052ac70bf9131625335545818a', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 17, 'created': '2020-06-15 04:08:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/cb7e068d2d92723e42a355e29a26a12aecf9ae15', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 18, 'created': '2020-06-15 08:42:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/00748024f3ee61436c31f766ec8cb5f6842f3084', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}, {'number': 19, 'created': '2020-07-14 11:57:45.000000000', 'files': ['cinder/volume/manager.py', 'cinder/tests/unit/volume/test_volume_migration.py', 'releasenotes/notes/bug-1828386-fix-retype-rbd-backend.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/0d22547fd246be4b09536c2da633af421e9c7df0', 'message': 'Correct new_type type in VolumeManager retype method\n\nThe retype method in class VolumeManager should pass\nobjects.VolumeType new_type to driver, same with the old\nvolume type.\n\nChange-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c\nCloses-Bug: #1828386\n'}]",27,657985,0d22547fd246be4b09536c2da633af421e9c7df0,668,57,19,8037,,,0,"Correct new_type type in VolumeManager retype method

The retype method in class VolumeManager should pass
objects.VolumeType new_type to driver, same with the old
volume type.

Change-Id: Ie7165b02119f0e49902a6393fbfd33fd35ce270c
Closes-Bug: #1828386
",git fetch https://review.opendev.org/openstack/cinder refs/changes/85/657985/19 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/drivers/rbd.py', 'cinder/tests/unit/volume/drivers/test_rbd.py']",2,a0c35d1237c6643f9f7ece7e5d96cc790a822528,bug/1828386," self.volume_a.volume_type = fake_volume.fake_volume_type_obj( self.context, id=fake.VOLUME_TYPE_ID) self.volume_b.volume_type = fake_volume.fake_volume_type_obj( self.context, id=fake.VOLUME_TYPE2_ID) self.volume_c.volume_type = fake_volume.fake_volume_type_obj( self.context, id=fake.VOLUME_TYPE3_ID) fake_volume_type = fake_volume.fake_volume_type_obj(context) fake_new_type = fake_volume.fake_db_volume_type( id=fake.VOLUME_TYPE2_ID) volume.volume_type = fake_volume_type fake_new_type, diff, host)) fake_new_type, diff, host)) fake_new_type, diff, host)) fake_new_type, diff, host)) self.volume_a.volume_type = replicated_type if old_replicated else \ fake_volume.fake_volume_type_obj(self.context) new_type = fake_volume.fake_db_volume_type( id=fake.VOLUME_TYPE2_ID, extra_specs={'replication_enabled': '<is> True'}) new_type = fake_volume.fake_db_volume_type( id=fake.VOLUME_TYPE2_ID)"," fake_type = fake_volume.fake_volume_type_obj(context) volume.volume_type = None fake_type, diff, host)) fake_type, diff, host)) fake_type, diff, host)) fake_type, diff, host)) self.volume_a.volume_type = replicated_type if old_replicated else None new_type = replicated_type new_type = fake_volume.fake_volume_type_obj( self.context, id=fake.VOLUME_TYPE2_ID),",25,12
openstack%2Fnova~stable%2Fstein~I04717b95dd44ae89f24bd74525d1c9607e3bc0fc,openstack/nova,stable/stein,I04717b95dd44ae89f24bd74525d1c9607e3bc0fc,zuul: remove legacy-tempest-dsvm-neutron-dvr-multinode-full,MERGED,2020-07-21 09:34:42.000000000,2020-07-21 17:40:47.000000000,2020-07-21 17:34:29.000000000,"[{'_account_id': 10135}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-07-21 09:34:42.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/7b005f37853a56e3ec6da455008fa5ef0d03c21b', 'message': 'zuul: remove legacy-tempest-dsvm-neutron-dvr-multinode-full\n\nThe job was part of the neutron experimental queue but then removed\nduring the ussuri lifecycle.\nSee https://review.opendev.org/#/c/693630/\n\nChange-Id: I04717b95dd44ae89f24bd74525d1c9607e3bc0fc\n(cherry picked from commit bce4a3ab97320bdc2a6a43e2a961a0aa0b8ffb63)\n(cherry picked from commit cf399a363ca530151895c4b7cf49ad7b2a79e01b)\n(cherry picked from commit b1ead1fb2adf25493e5cab472d529fde31f985f0)\n'}]",0,742113,7b005f37853a56e3ec6da455008fa5ef0d03c21b,9,4,1,10459,,,0,"zuul: remove legacy-tempest-dsvm-neutron-dvr-multinode-full

The job was part of the neutron experimental queue but then removed
during the ussuri lifecycle.
See https://review.opendev.org/#/c/693630/

Change-Id: I04717b95dd44ae89f24bd74525d1c9607e3bc0fc
(cherry picked from commit bce4a3ab97320bdc2a6a43e2a961a0aa0b8ffb63)
(cherry picked from commit cf399a363ca530151895c4b7cf49ad7b2a79e01b)
(cherry picked from commit b1ead1fb2adf25493e5cab472d529fde31f985f0)
",git fetch https://review.opendev.org/openstack/nova refs/changes/13/742113/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,7b005f37853a56e3ec6da455008fa5ef0d03c21b,native-zuulv3-migration,, - legacy-tempest-dsvm-neutron-dvr-multinode-full: irrelevant-files: *dsvm-irrelevant-files,0,2
openstack%2Fopenstack-helm-infra~master~I5428cf5d21368b1106c4a9d3d02c0840fda82020,openstack/openstack-helm-infra,master,I5428cf5d21368b1106c4a9d3d02c0840fda82020,Gate: Add openstack release,ABANDONED,2020-07-21 17:34:07.000000000,2020-07-21 17:37:22.000000000,,[],"[{'number': 1, 'created': '2020-07-21 17:34:07.000000000', 'files': ['zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e5672c71cdff3b156eeffc68ae100c6000f3cb1e', 'message': 'Gate: Add openstack release\n\nThe PS adds openstack release variable for openstack-support job.\n\nChange-Id: I5428cf5d21368b1106c4a9d3d02c0840fda82020\n'}]",0,742257,e5672c71cdff3b156eeffc68ae100c6000f3cb1e,2,0,1,17119,,,0,"Gate: Add openstack release

The PS adds openstack release variable for openstack-support job.

Change-Id: I5428cf5d21368b1106c4a9d3d02c0840fda82020
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/57/742257/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,e5672c71cdff3b156eeffc68ae100c6000f3cb1e,, osh_params: openstack_release: stein,,2,0
openstack%2Fnova~stable%2Fstein~Id610a24c066707de5ddc0507e7ef26c421ba366c,openstack/nova,stable/stein,Id610a24c066707de5ddc0507e7ef26c421ba366c,Remove stale nested backport from InstancePCIRequests,MERGED,2020-06-26 12:59:54.000000000,2020-07-21 17:33:37.000000000,2020-07-21 17:31:42.000000000,"[{'_account_id': 4393}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-06-26 12:59:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4fccdaee54ead309f34652f8f8293a3553a54bcb', 'message': ""Remove stale nested backport from InstancePCIRequests\n\nSometime in 2015, we removed the hard-coded obj_relationships mapping\nfrom parent objects which facilitated semi-automated child version\nbackports.  This was replaced by a manifest-of-versions mechanism\nwhere the client reports all the supported objects and versions\nduring a backport request to conductor. The InstancePCIRequests object\nisn't technically an ObjectListBase, despite acting like one, and thus\nwasn't using the obj_relationships. Because of this, it was doing\nits own backporting of its child object, which was not removed in\nthe culling of the static mechanism. Because we now no longer need to\nworry about sub-object backport chaining, when version 1.2 was added,\nno backport rule was added, and since the object does not call the\nbase class' generic routine, proper backporting of the child object\nwas not happening.\n\nAll we need to do is remove the override to allow the base\ninfrastructure to do the work.\n\nChange-Id: Id610a24c066707de5ddc0507e7ef26c421ba366c\nCloses-Bug: #1868033\n(cherry picked from commit d3ca7356860d64555eef6f5138501cb38f50ecc8)\n(cherry picked from commit e61d0025303b33ef00aa95ebd934f6121d320cbb)\n(cherry picked from commit 38ee1f39423e3af12ddc04de6808ff86bfbca645)\n""}, {'number': 2, 'created': '2020-07-09 15:44:44.000000000', 'files': ['nova/tests/unit/objects/test_instance_pci_requests.py', 'nova/objects/instance_pci_requests.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/eaecf7e737db3f9e8e21f5d6ba70dd20028bb697', 'message': ""Remove stale nested backport from InstancePCIRequests\n\nSometime in 2015, we removed the hard-coded obj_relationships mapping\nfrom parent objects which facilitated semi-automated child version\nbackports.  This was replaced by a manifest-of-versions mechanism\nwhere the client reports all the supported objects and versions\nduring a backport request to conductor. The InstancePCIRequests object\nisn't technically an ObjectListBase, despite acting like one, and thus\nwasn't using the obj_relationships. Because of this, it was doing\nits own backporting of its child object, which was not removed in\nthe culling of the static mechanism. Because we now no longer need to\nworry about sub-object backport chaining, when version 1.2 was added,\nno backport rule was added, and since the object does not call the\nbase class' generic routine, proper backporting of the child object\nwas not happening.\n\nAll we need to do is remove the override to allow the base\ninfrastructure to do the work.\n\nChange-Id: Id610a24c066707de5ddc0507e7ef26c421ba366c\nCloses-Bug: #1868033\n(cherry picked from commit d3ca7356860d64555eef6f5138501cb38f50ecc8)\n(cherry picked from commit e61d0025303b33ef00aa95ebd934f6121d320cbb)\n(cherry picked from commit 38ee1f39423e3af12ddc04de6808ff86bfbca645)\n""}]",0,738199,eaecf7e737db3f9e8e21f5d6ba70dd20028bb697,21,7,2,15334,,,0,"Remove stale nested backport from InstancePCIRequests

Sometime in 2015, we removed the hard-coded obj_relationships mapping
from parent objects which facilitated semi-automated child version
backports.  This was replaced by a manifest-of-versions mechanism
where the client reports all the supported objects and versions
during a backport request to conductor. The InstancePCIRequests object
isn't technically an ObjectListBase, despite acting like one, and thus
wasn't using the obj_relationships. Because of this, it was doing
its own backporting of its child object, which was not removed in
the culling of the static mechanism. Because we now no longer need to
worry about sub-object backport chaining, when version 1.2 was added,
no backport rule was added, and since the object does not call the
base class' generic routine, proper backporting of the child object
was not happening.

All we need to do is remove the override to allow the base
infrastructure to do the work.

Change-Id: Id610a24c066707de5ddc0507e7ef26c421ba366c
Closes-Bug: #1868033
(cherry picked from commit d3ca7356860d64555eef6f5138501cb38f50ecc8)
(cherry picked from commit e61d0025303b33ef00aa95ebd934f6121d320cbb)
(cherry picked from commit 38ee1f39423e3af12ddc04de6808ff86bfbca645)
",git fetch https://review.opendev.org/openstack/nova refs/changes/99/738199/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/objects/test_instance_pci_requests.py', 'nova/objects/instance_pci_requests.py']",2,4fccdaee54ead309f34652f8f8293a3553a54bcb,bug/1868033,," def obj_make_compatible(self, primitive, target_version): target_version = versionutils.convert_version_to_tuple(target_version) if target_version < (1, 1) and 'requests' in primitive: for index, request in enumerate(self.requests): request.obj_make_compatible( primitive['requests'][index]['nova_object.data'], '1.0') primitive['requests'][index]['nova_object.version'] = '1.0' ",0,22
openstack%2Fopenstack-ansible-os_designate~master~I60ed1a2415b4d145c3d4fc4207c30b384291a0e0,openstack/openstack-ansible-os_designate,master,I60ed1a2415b4d145c3d4fc4207c30b384291a0e0,Add Centos-8 support,MERGED,2020-06-19 01:56:26.000000000,2020-07-21 17:29:01.000000000,2020-07-04 10:23:22.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2020-06-19 01:56:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_designate/commit/03de2ab876f81d9167df02cd4c0ac7fb01dda303', 'message': 'Add Centos-8 support\n\ncreating redhat-8.yml file for c8 support.\n\nChange-Id: I60ed1a2415b4d145c3d4fc4207c30b384291a0e0\n'}, {'number': 2, 'created': '2020-06-19 02:01:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_designate/commit/3c98f7997cce2510ee5b84cf39d4352558e06f48', 'message': 'Add Centos-8 support\n\ncreating redhat-8.yml file for c8 support.\n\nChange-Id: I60ed1a2415b4d145c3d4fc4207c30b384291a0e0\n'}, {'number': 3, 'created': '2020-07-02 14:07:01.000000000', 'files': ['vars/redhat.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_designate/commit/18c54d70648547a758395180e244f4c4b5084deb', 'message': 'Add Centos-8 support\n\ncreating redhat-8.yml file for c8 support.\n\nChange-Id: I60ed1a2415b4d145c3d4fc4207c30b384291a0e0\n'}]",0,736876,18c54d70648547a758395180e244f4c4b5084deb,17,3,3,28752,,,0,"Add Centos-8 support

creating redhat-8.yml file for c8 support.

Change-Id: I60ed1a2415b4d145c3d4fc4207c30b384291a0e0
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_designate refs/changes/76/736876/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat-8.yml'],1,03de2ab876f81d9167df02cd4c0ac7fb01dda303,osa/el8,"--- # Copyright 2016, Intel Corporation. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # Common yum packages designate_distro_packages: - which designate_service_distro_packages: - openstack-designate-agent - openstack-designate-api - openstack-designate-central - openstack-designate-mdns - openstack-designate-producer - openstack-designate-sink - openstack-designate-worker - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('systemd-python', 'python3-systemd') }}"" designate_rndc_packages: - bind designate_devel_distro_packages: - systemd-devel ",,34,0
openstack%2Fopenstack-ansible-openstack_hosts~master~Ic150c2698acc3b78a60de36b4714fe2aafa3e970,openstack/openstack-ansible-openstack_hosts,master,Ic150c2698acc3b78a60de36b4714fe2aafa3e970,Replace yum config manager with dnf alternative,MERGED,2020-07-06 16:53:41.000000000,2020-07-21 17:26:10.000000000,2020-07-10 09:05:48.000000000,"[{'_account_id': 15993}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28752}]","[{'number': 1, 'created': '2020-07-06 16:53:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-openstack_hosts/commit/5b45136dc3d40fa60dcd4c719dc264fefa54df74', 'message': 'Replace yum config manager with dnf alternative\n\nWe need config-manager to enable repositories for CentOS 8 hosts.\n\nAlso, since we do need PowerTools inside lxc containers, we should\ninstall tooling not only for bare metal, but also for containers.\n\nChange-Id: Ic150c2698acc3b78a60de36b4714fe2aafa3e970\n'}, {'number': 2, 'created': '2020-07-08 14:04:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-openstack_hosts/commit/8df3a0cc83c81072a5b3a3ef45f6660a70adbbda', 'message': 'Replace yum config manager with dnf alternative\n\nWe need config-manager to enable repositories for CentOS 8 hosts.\n\nAlso, since we do need PowerTools inside lxc containers, we should\ninstall tooling not only for bare metal, but also for containers.\nSome projects, like manila, also require some packages out of\nPowerTools repository.\n\nChange-Id: Ic150c2698acc3b78a60de36b4714fe2aafa3e970\n'}, {'number': 3, 'created': '2020-07-08 14:20:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-openstack_hosts/commit/cb93d2d7e37ae664d118cabe66ffc0b87a473684', 'message': 'Replace yum config manager with dnf alternative\n\nWe need config-manager to enable repositories for CentOS 8 hosts.\n\nAlso, since we do need PowerTools inside lxc containers, we should\ninstall tooling not only for bare metal, but also for containers.\nSome projects, like manila, also require some packages out of\nPowerTools repository.\n\nChange-Id: Ic150c2698acc3b78a60de36b4714fe2aafa3e970\n'}, {'number': 4, 'created': '2020-07-09 20:32:21.000000000', 'files': ['vars/redhat-8.yml', 'tasks/openstack_hosts_configure_dnf.yml', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-openstack_hosts/commit/1b0a0c79bc352785cc7b40acb1800e4529054d9a', 'message': 'Replace yum config manager with dnf alternative\n\nWe need config-manager to enable repositories for CentOS 8 hosts.\n\nAlso, since we do need PowerTools inside lxc containers, we should\ninstall tooling not only for bare metal, but also for containers.\nSome projects, like manila, also require some packages out of\nPowerTools repository.\n\nChange-Id: Ic150c2698acc3b78a60de36b4714fe2aafa3e970\n'}]",0,739554,1b0a0c79bc352785cc7b40acb1800e4529054d9a,17,4,4,28619,,,0,"Replace yum config manager with dnf alternative

We need config-manager to enable repositories for CentOS 8 hosts.

Also, since we do need PowerTools inside lxc containers, we should
install tooling not only for bare metal, but also for containers.
Some projects, like manila, also require some packages out of
PowerTools repository.

Change-Id: Ic150c2698acc3b78a60de36b4714fe2aafa3e970
",git fetch https://review.opendev.org/openstack/openstack-ansible-openstack_hosts refs/changes/54/739554/2 && git format-patch -1 --stdout FETCH_HEAD,"['vars/redhat-8.yml', 'tasks/openstack_hosts_configure_dnf.yml']",2,5b45136dc3d40fa60dcd4c719dc264fefa54df74,osa/el8, command: dnf config-manager --set-enabled PowerTools, command: yum-config-manager --enable PowerTools,2,2
openstack%2Fopenstack-ansible-os_cinder~master~I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d,openstack/openstack-ansible-os_cinder,master,I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d,Add Centos-8 support,MERGED,2020-06-16 17:03:26.000000000,2020-07-21 17:23:40.000000000,2020-07-05 19:19:49.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2020-06-16 17:03:26.000000000', 'files': ['vars/redhat.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/983ee0aef7ba013780bcf3aba491c80d609a233c', 'message': 'Add Centos-8 support\n\nChange-Id: I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d\n'}]",0,735971,983ee0aef7ba013780bcf3aba491c80d609a233c,12,4,1,28619,,,0,"Add Centos-8 support

Change-Id: I2b5ae7b79f9982618a4c3a081f978fc2d42b6a7d
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_cinder refs/changes/71/735971/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat.yml'],1,983ee0aef7ba013780bcf3aba491c80d609a233c,osa/el8," - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('systemd-python', 'python3-systemd') }}""", - python-openstackclient - python2-shade - systemd-python,1,3
openstack%2Fcharm-layer-openstack~master~I1e75e11a08d7446efbbc464004d44e31413fbecf,openstack/charm-layer-openstack,master,I1e75e11a08d7446efbbc464004d44e31413fbecf,Fix installation of dnspython on python 3.5,MERGED,2020-07-20 12:52:31.000000000,2020-07-21 17:12:18.000000000,2020-07-21 17:12:18.000000000,"[{'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-20 12:52:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-layer-openstack/commit/37bd6548eeb2962e1a9900fae844461dd5fc5605', 'message': 'Fix installation of dnspython on python 3.5\n\nChange-Id: I1e75e11a08d7446efbbc464004d44e31413fbecf\nCloses-Bug: #1888225\n'}, {'number': 2, 'created': '2020-07-20 14:29:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-layer-openstack/commit/544bcf1d56debbabcc1d96d059d62bcaf600f830', 'message': 'Fix installation of dnspython on python 3.5\n\nChange-Id: I1e75e11a08d7446efbbc464004d44e31413fbecf\nCloses-Bug: #1888225\n'}, {'number': 3, 'created': '2020-07-21 09:19:36.000000000', 'files': ['wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-layer-openstack/commit/1a2962cd699dcbd5fcfc277bc4843905ae7982a3', 'message': 'Fix installation of dnspython on python 3.5\n\nChange-Id: I1e75e11a08d7446efbbc464004d44e31413fbecf\nCloses-Bug: #1888225\n'}]",0,741932,1a2962cd699dcbd5fcfc277bc4843905ae7982a3,14,4,3,31289,,,0,"Fix installation of dnspython on python 3.5

Change-Id: I1e75e11a08d7446efbbc464004d44e31413fbecf
Closes-Bug: #1888225
",git fetch https://review.opendev.org/openstack/charm-layer-openstack refs/changes/32/741932/1 && git format-patch -1 --stdout FETCH_HEAD,['wheelhouse.txt'],1,37bd6548eeb2962e1a9900fae844461dd5fc5605,bug/1888225,dnspython<2.0.0 # dnspython dropped py3.5 support,dnspython,1,1
openstack%2Fdevstack~master~I76d1efaa3a6c1fe9825e8457438f514114b2ecad,openstack/devstack,master,I76d1efaa3a6c1fe9825e8457438f514114b2ecad,zuul: clean up some legacy jobs,MERGED,2020-07-07 18:15:04.000000000,2020-07-21 16:35:19.000000000,2020-07-21 16:30:30.000000000,"[{'_account_id': 5689}, {'_account_id': 8556}, {'_account_id': 10459}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-07 18:15:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/f3a7664e4372daf4666650b08f90f98517e018fa', 'message': 'zuul: clean up legacy-tempest-dsvm-lvm-multibackend\n\nUse its native version, cinder-tempest-lvm-multibackend.\n\nChange-Id: I76d1efaa3a6c1fe9825e8457438f514114b2ecad\n'}, {'number': 2, 'created': '2020-07-07 18:20:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/5bfa710b862137f5090c42ec0075bd240de2a37f', 'message': 'zuul: clean up some legacy jobs\n\nReplace legacy-tempest-dsvm-lvm-multibackend with its native version,\ncinder-tempest-lvm-multibackend.\n\nRemove legacy-tempest-dsvm-lvm-multibackend, which was defined as\nexperimental job in neutron and removed ruing the ussuri lifecycle.\nSee https://review.opendev.org/#/c/693630/\n\nChange-Id: I76d1efaa3a6c1fe9825e8457438f514114b2ecad\n'}, {'number': 3, 'created': '2020-07-10 11:16:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack/commit/148a4e7f8f15930b39436c34dbbbe71ebbd641ee', 'message': 'zuul: clean up some legacy jobs\n\nReplace legacy-tempest-dsvm-lvm-multibackend with its native version,\ncinder-tempest-lvm-multibackend.\n\nRemove legacy-tempest-dsvm-neutron-dvr-multinode-full, which was defined\nas an experimental job in neutron and removed ruing the ussuri lifecycle.\nSee https://review.opendev.org/#/c/693630/\n\nChange-Id: I76d1efaa3a6c1fe9825e8457438f514114b2ecad\n'}, {'number': 4, 'created': '2020-07-10 11:21:59.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/devstack/commit/0cbbefc0cb6f58b09a722d1230e7ae86113b2989', 'message': 'zuul: clean up some legacy jobs\n\nReplace legacy-tempest-dsvm-lvm-multibackend with its native version,\ncinder-tempest-lvm-multibackend.\n\nRemove legacy-tempest-dsvm-neutron-dvr-multinode-full, which was defined\nas an experimental job in neutron and removed during the ussuri lifecycle.\nSee https://review.opendev.org/#/c/693630/\n\nChange-Id: I76d1efaa3a6c1fe9825e8457438f514114b2ecad\n'}]",1,739829,0cbbefc0cb6f58b09a722d1230e7ae86113b2989,14,4,4,10459,,,0,"zuul: clean up some legacy jobs

Replace legacy-tempest-dsvm-lvm-multibackend with its native version,
cinder-tempest-lvm-multibackend.

Remove legacy-tempest-dsvm-neutron-dvr-multinode-full, which was defined
as an experimental job in neutron and removed during the ussuri lifecycle.
See https://review.opendev.org/#/c/693630/

Change-Id: I76d1efaa3a6c1fe9825e8457438f514114b2ecad
",git fetch https://review.opendev.org/openstack/devstack refs/changes/29/739829/4 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,f3a7664e4372daf4666650b08f90f98517e018fa,native-zuulv3-migration, - cinder-tempest-lvm-multibackend:, - legacy-tempest-dsvm-lvm-multibackend:,1,1
openstack%2Fglance~master~Ifaaaa9cdd3240913e5b257d6a99aecd6be840b36,openstack/glance,master,Ifaaaa9cdd3240913e5b257d6a99aecd6be840b36,Remove deprecated glance-replicator options,MERGED,2020-07-15 21:31:37.000000000,2020-07-21 16:33:28.000000000,2020-07-21 16:29:46.000000000,"[{'_account_id': 5202}, {'_account_id': 5314}, {'_account_id': 9008}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-15 21:31:37.000000000', 'files': ['releasenotes/notes/replicator-token-cleanup-4a573c86f1acccc0.yaml', 'glance/cmd/replicator.py'], 'web_link': 'https://opendev.org/openstack/glance/commit/eec0604893cfdc9dbb316f70fe5d67484b1c9d96', 'message': 'Remove deprecated glance-replicator options\n\nThe mastertoken and slavetoken options were deprecated in Pike. This\ncompletes the deprecation and removes those options.\n\nChange-Id: Ifaaaa9cdd3240913e5b257d6a99aecd6be840b36\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,741321,eec0604893cfdc9dbb316f70fe5d67484b1c9d96,15,5,1,11904,,,0,"Remove deprecated glance-replicator options

The mastertoken and slavetoken options were deprecated in Pike. This
completes the deprecation and removes those options.

Change-Id: Ifaaaa9cdd3240913e5b257d6a99aecd6be840b36
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/glance refs/changes/21/741321/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/replicator-token-cleanup-4a573c86f1acccc0.yaml', 'glance/cmd/replicator.py']",2,eec0604893cfdc9dbb316f70fe5d67484b1c9d96,cmd/replicator,," cfg.StrOpt('mastertoken', short='M', default='', deprecated_since='Pike', deprecated_reason='use sourcetoken instead', help=(""Pass in your authentication token if you have "" ""one. This is the token used for the source system."")), cfg.StrOpt('slavetoken', short='S', default='', deprecated_since='Pike', deprecated_reason='use targettoken instead', help=(""Pass in your authentication token if you have "" ""one. This is the token used for the target system."")),# TODO(stevelle) Remove deprecated opts some time after Queens deprecated_opts=[cfg.DeprecatedOpt('mastertoken')], deprecated_opts=[cfg.DeprecatedOpt('slavetoken')],",6,17
openstack%2Fpython-openstackclient~stable%2Fqueens~Ic9b2b47848a600e87a3674289ae7ae8c3e091fee,openstack/python-openstackclient,stable/queens,Ic9b2b47848a600e87a3674289ae7ae8c3e091fee,Fix functional tests for py3,MERGED,2020-07-21 00:54:53.000000000,2020-07-21 16:33:24.000000000,2020-07-21 16:29:45.000000000,"[{'_account_id': 4690}, {'_account_id': 10135}, {'_account_id': 11904}, {'_account_id': 14070}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 00:54:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/901c9d3e9b4c8373ad33f9f5796843b4dd62d7a0', 'message': ""Fix functional tests for py3\n\nFix various things so the functional tests will work under python3:\n\n- A hashlib.md5() can only be update()d with an encoded string in py3.\n- There's no dict.iteritems(), change to dict.items() (which is already\n  an iterator).\n- Open temp files with 'w+' mode rather than the default 'w+b' (as an\n  alternative to encoding all the write and expected-read payloads as\n  bytes).\n- (This is a weird one) Explicitly raise SkipTest from unittest (rather\n  than unittest2, which is where cls.skipException landed). Not sure why\n  this is busted, but this moves the ball.\n\nConflicts:\n    openstackclient/tests/functional/identity/v3/common.py\n\nNOTE(melwitt): The conflicts are due to the following changes not in\nQueens:\n\n  Id8377363f7a3248b45aeeba21d2acc02684a0305\n  I7c44bbb60557378b66c5c43a7ba917f40dc2b633\n\nChange-Id: Ic9b2b47848a600e87a3674289ae7ae8c3e091fee\n(cherry picked from commit f1d742f32adeb662a3fdf8fa3ef3bc391e71ed81)\n""}, {'number': 2, 'created': '2020-07-21 03:26:47.000000000', 'files': ['openstackclient/tests/functional/compute/v2/test_keypair.py', 'openstackclient/api/object_store_v1.py', 'openstackclient/tests/unit/object/v1/test_object_all.py', 'openstackclient/tests/functional/common/test_help.py', 'openstackclient/tests/functional/object/v1/test_object.py', 'openstackclient/tests/functional/compute/v2/test_agent.py', 'releasenotes/notes/bug-1775482-7ed2a9a8765b313e.yaml'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/3228713ea302a962c11eb96ce34918b94528205e', 'message': ""Fix functional tests for py3\n\nFix various things so the functional tests will work under python3:\n\n- A hashlib.md5() can only be update()d with an encoded string in py3.\n- There's no dict.iteritems(), change to dict.items() (which is already\n  an iterator).\n- Open temp files with 'w+' mode rather than the default 'w+b' (as an\n  alternative to encoding all the write and expected-read payloads as\n  bytes).\n- (This is a weird one) Explicitly raise SkipTest from unittest (rather\n  than unittest2, which is where cls.skipException landed). Not sure why\n  this is busted, but this moves the ball.\n\nConflict/issue with raising SkipTest on this branch.\n\n(cherry picked from commit f1d742f32adeb662a3fdf8fa3ef3bc391e71ed81)\n(cherry picked from commit b866202f54afddca66a77cd989b082e193a96956)\n\nIncludes squash of:\nBefore writing object data to stdout, re-open it in binary mode\n\nOtherwise, you can hit TypeErrors on Python3.\n\nCloses-Bug: 1775482\n(cherry picked from commit 415b48056d9d021e04ec972029040a89a6b13928)\n\nConflicts:\n    openstackclient/tests/functional/identity/v3/common.py\n\nNOTE(melwitt): The conflicts are due to the following changes not in\nQueens:\n\n  Id8377363f7a3248b45aeeba21d2acc02684a0305\n  I7c44bbb60557378b66c5c43a7ba917f40dc2b633\n\nChange-Id: Ic9b2b47848a600e87a3674289ae7ae8c3e091fee\n(cherry picked from commit 47f0277208362a3224f8e587bbdd60dd5aebf846)\n""}]",0,742051,3228713ea302a962c11eb96ce34918b94528205e,14,6,2,4690,,,0,"Fix functional tests for py3

Fix various things so the functional tests will work under python3:

- A hashlib.md5() can only be update()d with an encoded string in py3.
- There's no dict.iteritems(), change to dict.items() (which is already
  an iterator).
- Open temp files with 'w+' mode rather than the default 'w+b' (as an
  alternative to encoding all the write and expected-read payloads as
  bytes).
- (This is a weird one) Explicitly raise SkipTest from unittest (rather
  than unittest2, which is where cls.skipException landed). Not sure why
  this is busted, but this moves the ball.

Conflict/issue with raising SkipTest on this branch.

(cherry picked from commit f1d742f32adeb662a3fdf8fa3ef3bc391e71ed81)
(cherry picked from commit b866202f54afddca66a77cd989b082e193a96956)

Includes squash of:
Before writing object data to stdout, re-open it in binary mode

Otherwise, you can hit TypeErrors on Python3.

Closes-Bug: 1775482
(cherry picked from commit 415b48056d9d021e04ec972029040a89a6b13928)

Conflicts:
    openstackclient/tests/functional/identity/v3/common.py

NOTE(melwitt): The conflicts are due to the following changes not in
Queens:

  Id8377363f7a3248b45aeeba21d2acc02684a0305
  I7c44bbb60557378b66c5c43a7ba917f40dc2b633

Change-Id: Ic9b2b47848a600e87a3674289ae7ae8c3e091fee
(cherry picked from commit 47f0277208362a3224f8e587bbdd60dd5aebf846)
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/51/742051/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/functional/compute/v2/test_keypair.py', 'openstackclient/tests/functional/identity/v2/common.py', 'openstackclient/tests/functional/object/v1/test_object.py', 'openstackclient/tests/functional/compute/v2/test_agent.py']",4,901c9d3e9b4c8373ad33f9f5796843b4dd62d7a0,bug/1775482, MD5HASH1.update('agent_1'.encode('utf-8')) MD5HASH2.update('agent_2'.encode('utf-8')), MD5HASH1.update('agent_1') MD5HASH2.update('agent_2'),7,6
openstack%2Fswift-bench~master~Ia1e326d52efdddd3b97fa1c2296de7d1b5589f09,openstack/swift-bench,master,Ia1e326d52efdddd3b97fa1c2296de7d1b5589f09,py2: Import print function,MERGED,2020-07-20 20:26:02.000000000,2020-07-21 16:33:23.000000000,2020-07-21 16:33:23.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 20:26:02.000000000', 'files': ['swiftbench/bench.py'], 'web_link': 'https://opendev.org/openstack/swift-bench/commit/8845f72f40893606e2e24c141e6f0aea6062b59f', 'message': 'py2: Import print function\n\nChange-Id: Ia1e326d52efdddd3b97fa1c2296de7d1b5589f09\nRelated-Change: I46c196c389f9425c398506a4abe4dd0abed7ade9\n'}]",0,742024,8845f72f40893606e2e24c141e6f0aea6062b59f,6,2,1,15343,,,0,"py2: Import print function

Change-Id: Ia1e326d52efdddd3b97fa1c2296de7d1b5589f09
Related-Change: I46c196c389f9425c398506a4abe4dd0abed7ade9
",git fetch https://review.opendev.org/openstack/swift-bench refs/changes/24/742024/1 && git format-patch -1 --stdout FETCH_HEAD,['swiftbench/bench.py'],1,8845f72f40893606e2e24c141e6f0aea6062b59f,,from __future__ import print_function ,,2,0
openstack%2Fhacking~master~I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc,openstack/hacking,master,I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc,migrate testing to ubuntu focal,MERGED,2020-07-05 02:17:43.000000000,2020-07-21 16:30:25.000000000,2020-07-21 16:28:17.000000000,"[{'_account_id': 5689}, {'_account_id': 8556}, {'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 31239}]","[{'number': 1, 'created': '2020-07-05 02:17:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/hacking/commit/4cbeaa90876fb1f75507aa66743b98694fa0a5b2', 'message': 'DNM: testing focal\nDepends-On: https://review.opendev.org/#/c/738328/\n\nChange-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc\nStory: #2007865\nTask: #40212\n'}, {'number': 2, 'created': '2020-07-05 02:18:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/hacking/commit/953b4198403f8e2389a30355feeb6b5e4ff68e39', 'message': 'DNM: testing focal\n\nDepends-On: https://review.opendev.org/#/c/738328/\n\nChange-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc\nStory: #2007865\nTask: #40212\n'}, {'number': 3, 'created': '2020-07-05 18:04:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/hacking/commit/71086b1f0b85a50de1af70bad3efacf5f7a95f6d', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the pyflakes to 2.1.1 as min version to run pep8 jobs\non py3.8 which is default python vesion in ubuntu focal.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40212\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc\n'}, {'number': 4, 'created': '2020-07-06 16:25:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/hacking/commit/40d4b8344dc694db955093daba1a4968f147c634', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the pyflakes to 2.1.1 as min version to run pep8 jobs\non py3.8 which is default python vesion in ubuntu focal.\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40212\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc\n'}, {'number': 5, 'created': '2020-07-07 14:05:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/hacking/commit/4f4806ca0ca4aa5c81269dd030528e701972044c', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the flake8 to 3.8.0 as min so that pyflakes 2.1.1 as min version taken\ncare to run pep8 jobs on py3.8 which is default python vesion in ubuntu focal.\n- https://github.com/PyCQA/flake8/blob/3.8.0/setup.cfg#L44\n\nDepends-On: https://review.opendev.org/#/c/734700/\n\nStory: #2007865\nTask: #40212\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc\n'}, {'number': 6, 'created': '2020-07-09 17:22:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/hacking/commit/5df641dacede0fa5c2fa3ad6568d893f1128e731', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the flake8 to 3.8.0 as min so that pyflakes 2.1.1 as min version taken\ncare to run pep8 jobs on py3.8 which is default python vesion in ubuntu focal.\n- https://github.com/PyCQA/flake8/blob/3.8.0/setup.cfg#L44\n\nStory: #2007865\nTask: #40212\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc\n'}, {'number': 7, 'created': '2020-07-10 14:29:28.000000000', 'files': ['requirements.txt', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/hacking/commit/93e6cd290471f9e58f6d052eea508213a55f98c3', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the flake8 to 3.8.0 as min so that pyflakes 2.1.1 as min version taken\ncare to run pep8 jobs on py3.8 which is default python vesion in ubuntu focal.\n- https://github.com/PyCQA/flake8/blob/3.8.0/setup.cfg#L44\n\nStory: #2007865\nTask: #40212\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc\n'}]",2,739334,93e6cd290471f9e58f6d052eea508213a55f98c3,29,6,7,8556,,,0,"migrate testing to ubuntu focal

As per victoria cycle testing runtime and community goal[1]
we need to migrate upstream CI/CD to Ubuntu Focal(20.04).

Fixing:
- bug#1886296
Bump the flake8 to 3.8.0 as min so that pyflakes 2.1.1 as min version taken
care to run pep8 jobs on py3.8 which is default python vesion in ubuntu focal.
- https://github.com/PyCQA/flake8/blob/3.8.0/setup.cfg#L44

Story: #2007865
Task: #40212

Closes-Bug: #1886296
[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html

Change-Id: I19b13d5d63bce0f6b646972b09cfe8e8d7c22adc
",git fetch https://review.opendev.org/openstack/hacking refs/changes/34/739334/5 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,4cbeaa90876fb1f75507aa66743b98694fa0a5b2,migrate-to-focal,#test,,1,0
openstack%2Freleases~master~Ice9b9df4d011df4ee6ac8e5b31da055419d03d75,openstack/releases,master,Ice9b9df4d011df4ee6ac8e5b31da055419d03d75,tooz 2.7.0,MERGED,2020-07-21 15:36:16.000000000,2020-07-21 16:14:42.000000000,2020-07-21 16:14:42.000000000,"[{'_account_id': 10239}, {'_account_id': 11904}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 15:36:16.000000000', 'files': ['deliverables/victoria/tooz.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/f32cffad0adbdf49f68459054ba0109cc4a58d3f', 'message': 'tooz 2.7.0\n\nChange-Id: Ice9b9df4d011df4ee6ac8e5b31da055419d03d75\n'}]",0,742226,f32cffad0adbdf49f68459054ba0109cc4a58d3f,9,3,1,6928,,,0,"tooz 2.7.0

Change-Id: Ice9b9df4d011df4ee6ac8e5b31da055419d03d75
",git fetch https://review.opendev.org/openstack/releases refs/changes/26/742226/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/victoria/tooz.yaml'],1,f32cffad0adbdf49f68459054ba0109cc4a58d3f,oslo-master, - version: 2.7.0 projects: - repo: openstack/tooz hash: fca43df8973f20d075cddecc6b7f65381e0e7a13,,4,0
openstack%2Ftripleo-heat-templates~master~I973a49aec1a263e2a1ec3e5199803c86d6f77b35,openstack/tripleo-heat-templates,master,I973a49aec1a263e2a1ec3e5199803c86d6f77b35,Remove /var/lib/config-data context task,MERGED,2020-07-15 20:26:55.000000000,2020-07-21 16:12:22.000000000,2020-07-21 16:12:22.000000000,"[{'_account_id': 3153}, {'_account_id': 4978}, {'_account_id': 6816}, {'_account_id': 6926}, {'_account_id': 9592}, {'_account_id': 14250}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 25877}, {'_account_id': 26343}, {'_account_id': 28223}]","[{'number': 1, 'created': '2020-07-15 20:26:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/0cc078b9121d7c20646a7c6939e5de4861a08c98', 'message': 'Remove /var/lib/config-data context task\n\nThe task should not be needed since we set the context in\nopenstack-selinux:\n\nhttps://github.com/redhat-openstack/openstack-selinux/blob/master/local_settings.sh.in#L89\nfcontext -N -$1 -t container_file_t \\""$LOCALSTATEDIR/lib/config-data(/.*)?\\""\n\nThis task is very expensive at scale and we should avoid these king of\nthings.\n\nChange-Id: I973a49aec1a263e2a1ec3e5199803c86d6f77b35\nCloses-Bug: #1887721\n'}, {'number': 2, 'created': '2020-07-16 12:34:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/62c8b06645325c1844f7d8fd183a8003ab78dd36', 'message': 'Remove /var/lib/config-data context task\n\nThe task should not be needed since we set the context in\nopenstack-selinux:\n\nhttps://github.com/redhat-openstack/openstack-selinux/blob/master/local_settings.sh.in#L89\nfcontext -N -$1 -t container_file_t \\""$LOCALSTATEDIR/lib/config-data(/.*)?\\""\n\nThis task is very expensive at scale and we should avoid these king of\nthings.\n\nsvirt_sandbox_file_t is an alias to container_file_t, so let\'s use\ncontainer_file_t directly to be consistent and not creating confusion.\n\nThis patch shouldn\'t be backported to Train because in Train we\'ll have\nthis task not removed but moved to run only under FFU context.\n\nChange-Id: I973a49aec1a263e2a1ec3e5199803c86d6f77b35\nCloses-Bug: #1887721\n'}, {'number': 3, 'created': '2020-07-16 12:34:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/a59f60fe3ea220eae864ada8d18d05f23e04088f', 'message': 'Remove /var/lib/config-data context task\n\nThe task should not be needed since we set the context in\nopenstack-selinux:\n\nhttps://github.com/redhat-openstack/openstack-selinux/blob/master/local_settings.sh.in#L89\nfcontext -N -$1 -t container_file_t \\""$LOCALSTATEDIR/lib/config-data(/.*)?\\""\n\nThis task is very expensive at scale and we should avoid these king of\nthings.\n\nsvirt_sandbox_file_t is an alias to container_file_t, so let\'s use\ncontainer_file_t directly to be consistent and not creating confusion.\n\nThis patch shouldn\'t be backported to Train because in Train we\'ll have\nthis task not removed but moved to run only under FFU context.\n\nChange-Id: I973a49aec1a263e2a1ec3e5199803c86d6f77b35\nCloses-Bug: #1887721\n'}, {'number': 4, 'created': '2020-07-17 13:54:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/27a42149e4e620e5fb4887b11363895fd3dae28f', 'message': 'Remove /var/lib/config-data context task\n\nThe task should not be needed since we set the context in\nopenstack-selinux:\n\nhttps://github.com/redhat-openstack/openstack-selinux/blob/master/local_settings.sh.in#L89\nfcontext -N -$1 -t container_file_t \\""$LOCALSTATEDIR/lib/config-data(/.*)?\\""\n\nThis task is very expensive at scale and we should avoid these king of\nthings.\n\nsvirt_sandbox_file_t is an alias to container_file_t, so let\'s use\ncontainer_file_t directly to be consistent and not creating confusion.\n\nThis patch shouldn\'t be backported to Train because in Train we\'ll have\nthis task not removed but moved to run only under FFU context.\n\nChange-Id: I973a49aec1a263e2a1ec3e5199803c86d6f77b35\nCloses-Bug: #1887721\n'}, {'number': 5, 'created': '2020-07-20 13:27:09.000000000', 'files': ['common/deploy-steps-playbooks-common.yaml', 'common/generate-config-tasks.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5864167034a20d20d38cd7f513b1319579765538', 'message': 'Remove /var/lib/config-data context task\n\nThe task should not be needed since we set the context in\nopenstack-selinux:\n\nhttps://github.com/redhat-openstack/openstack-selinux/blob/master/local_settings.sh.in#L89\nfcontext -N -$1 -t container_file_t \\""$LOCALSTATEDIR/lib/config-data(/.*)?\\""\n\nThis task is very expensive at scale and we should avoid these king of\nthings.\n\nsvirt_sandbox_file_t is an alias to container_file_t, so let\'s use\ncontainer_file_t directly to be consistent and not creating confusion.\n\nThis patch shouldn\'t be backported to Train because in Train we\'ll have\nthis task not removed but moved to run only under FFU context.\n\nChange-Id: I973a49aec1a263e2a1ec3e5199803c86d6f77b35\nCloses-Bug: #1887721\n'}]",1,741314,5864167034a20d20d38cd7f513b1319579765538,42,12,5,3153,,,0,"Remove /var/lib/config-data context task

The task should not be needed since we set the context in
openstack-selinux:

https://github.com/redhat-openstack/openstack-selinux/blob/master/local_settings.sh.in#L89
fcontext -N -$1 -t container_file_t \""$LOCALSTATEDIR/lib/config-data(/.*)?\""

This task is very expensive at scale and we should avoid these king of
things.

svirt_sandbox_file_t is an alias to container_file_t, so let's use
container_file_t directly to be consistent and not creating confusion.

This patch shouldn't be backported to Train because in Train we'll have
this task not removed but moved to run only under FFU context.

Change-Id: I973a49aec1a263e2a1ec3e5199803c86d6f77b35
Closes-Bug: #1887721
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/14/741314/5 && git format-patch -1 --stdout FETCH_HEAD,['common/deploy-steps-playbooks-common.yaml'],1,0cc078b9121d7c20646a7c6939e5de4861a08c98,bug/1887721,," name: Ensure /var/lib/config-data context become: true gather_facts: false any_errors_fatal: yes tasks: - name: Ensure /var/lib/config-data context shell: |- set -o pipefail if [[ -e /var/lib/config-data ]]; then chcon -R -t svirt_sandbox_file_t /var/lib/config-data exit 2 fi args: executable: /bin/bash warn: no register: _selinux_config_data changed_when: _selinux_config_data.rc == 2 failed_when: _selinux_config_data.rc not in [0,2] tags: - always - hosts: ""{{ deploy_target_host }}""",0,22
openstack%2Ftripleo-ansible~master~I45083021497761b835e340f6a8655f2fece89981,openstack/tripleo-ansible,master,I45083021497761b835e340f6a8655f2fece89981,Remove unncessary tasks from cli-update-deployment-plan.yaml,MERGED,2020-07-21 04:57:17.000000000,2020-07-21 16:02:06.000000000,2020-07-21 16:02:06.000000000,"[{'_account_id': 3153}, {'_account_id': 8449}, {'_account_id': 8833}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 04:57:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/22f82c3ee5fd98953830cb913c4479bb8b231758', 'message': ""Remove unncessary tasks from cli-update-deployment-plan.yaml\n\nWe don't seem to have cli support for updating a deployment\nplan using templates from a remote repo ( was possibly supported\nby ui earlier) and this playbook is never called with source_url\nvar.\n\nChange-Id: I45083021497761b835e340f6a8655f2fece89981\n""}, {'number': 2, 'created': '2020-07-21 05:02:54.000000000', 'files': ['tripleo_ansible/playbooks/cli-update-deployment-plan.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/31d34511535530cd5a3b9e9b5b6cecaa17283996', 'message': ""Remove unncessary tasks from cli-update-deployment-plan.yaml\n\nWe don't seem to have cli support for updating a deployment\nplan using templates from a remote repo ( was possibly supported\nby ui earlier) and this playbook is never called with source_url\nvar.\n\nAlso removes the unused validate_stack var.\n\nChange-Id: I45083021497761b835e340f6a8655f2fece89981\n""}]",3,742068,31d34511535530cd5a3b9e9b5b6cecaa17283996,15,6,2,8833,,,0,"Remove unncessary tasks from cli-update-deployment-plan.yaml

We don't seem to have cli support for updating a deployment
plan using templates from a remote repo ( was possibly supported
by ui earlier) and this playbook is never called with source_url
var.

Also removes the unused validate_stack var.

Change-Id: I45083021497761b835e340f6a8655f2fece89981
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/68/742068/1 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_ansible/playbooks/cli-update-deployment-plan.yaml'],1,22f82c3ee5fd98953830cb913c4479bb8b231758,, tasks:," source_url: null handlers: - name: Cleanup temp directory file: path: ""{{ temp_dir.path }}"" state: absent when: temp_dir is defined tasks: - name: Clone repo and upload templates block: - name: Create temp directory tempfile: state: directory suffix: ""{{ '_' + container + '_import' }}"" register: temp_dir notify: - ""Cleanup temp directory"" when: source_url is not none - name: Git clone remote url git: repo: ""{{ source_url }}"" dest: ""{{ temp_dir }}"" when: source_url is not none - name: Upload templates tripleo_templates_upload: container: ""{{ container }}"" templates_dir: ""{{ temp_dir.path }}"" when: source_url is not none when: source_url is not none ",0,33
openstack%2Fironic~master~Idde2891b2f15190f327e4298131a6069c58163c0,openstack/ironic,master,Idde2891b2f15190f327e4298131a6069c58163c0,Stop running test_schedule_to_all_nodes in the multinode job,MERGED,2020-07-20 08:07:44.000000000,2020-07-21 15:53:46.000000000,2020-07-21 14:45:25.000000000,"[{'_account_id': 11655}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-07-20 08:07:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/102af31dbb7ad05df4905d9a50ad0619e7ccd6eb', 'message': ""Stop running test_schedule_to_all_nodes in the multinode job\n\nAfter the recent changes we're running 5 tests already, some of them\nusing several VMs. This should cover scheduling to different conductors\nwell enough, the nova test just adds random failures on top.\n\nThis allows reducing the number of test VMs to 4 per testing node,\nreducing the resource pressure.\n\nChange-Id: Idde2891b2f15190f327e4298131a6069c58163c0\n""}, {'number': 2, 'created': '2020-07-20 10:33:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/5bfa8a8834e14252868890de0af75bfc82a8d34e', 'message': ""Stop running test_schedule_to_all_nodes in the multinode job\n\nAfter the recent changes we're running 5 tests already, some of them\nusing several VMs. This should cover scheduling to different conductors\nwell enough, the nova test just adds random failures on top.\n\nThis allows reducing the number of test VMs to 3 per testing node\n(6 totally), reducing the resource pressure.\n\nAlso adding missing VM_SPECS_DISK to the subnode configuration.\n\nChange-Id: Idde2891b2f15190f327e4298131a6069c58163c0\n""}, {'number': 3, 'created': '2020-07-20 11:39:16.000000000', 'files': ['zuul.d/ironic-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/1cb1df76d96810b0cb4204cb54503b83532ef7c9', 'message': ""Stop running test_schedule_to_all_nodes in the multinode job\n\nAfter the recent changes we're running 5 tests already, some of them\nusing several VMs. This should cover scheduling to different conductors\nwell enough, the nova test just adds random failures on top.\n\nThis allows reducing the number of test VMs to 3 per testing node\n(6 totally), reducing the resource pressure and allowing giving\neach VM a bit more RAM.\n\nAlso adding missing VM_SPECS_DISK to the subnode configuration.\n\nChange-Id: Idde2891b2f15190f327e4298131a6069c58163c0\n""}]",0,741884,1cb1df76d96810b0cb4204cb54503b83532ef7c9,16,5,3,10239,,,0,"Stop running test_schedule_to_all_nodes in the multinode job

After the recent changes we're running 5 tests already, some of them
using several VMs. This should cover scheduling to different conductors
well enough, the nova test just adds random failures on top.

This allows reducing the number of test VMs to 3 per testing node
(6 totally), reducing the resource pressure and allowing giving
each VM a bit more RAM.

Also adding missing VM_SPECS_DISK to the subnode configuration.

Change-Id: Idde2891b2f15190f327e4298131a6069c58163c0
",git fetch https://review.opendev.org/openstack/ironic refs/changes/84/741884/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/ironic-jobs.yaml'],1,102af31dbb7ad05df4905d9a50ad0619e7ccd6eb,gate," tempest_test_regex: ""ironic_tempest_plugin.tests.scenario"" IRONIC_VM_COUNT: 4 IRONIC_VM_COUNT: 4"," tempest_test_regex: ""(ironic_tempest_plugin.tests.scenario|test_schedule_to_all_nodes)"" IRONIC_VM_COUNT: 6 IRONIC_VM_COUNT: 6",3,3
openstack%2Ftripleo-ansible~stable%2Ftrain~I31cf042b72aad5cdd2c7c1ae8bc319eca372acff,openstack/tripleo-ansible,stable/train,I31cf042b72aad5cdd2c7c1ae8bc319eca372acff,Allow any_errors_fatal to be dynamic,MERGED,2020-07-21 01:47:04.000000000,2020-07-21 15:46:30.000000000,2020-07-21 15:46:30.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 01:47:04.000000000', 'files': ['tripleo_ansible/ansible_plugins/strategy/tripleo_linear.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_free.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_base.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/b47a4a7679ac6f59e0370372d27f8a4d66f89fc5', 'message': ""Allow any_errors_fatal to be dynamic\n\nCurrently any_errors_fatal cannot be dynamic value based on the current\ntask vars. This change attempts to evaulate the provided value and\nverifies it's a boolean when using it to handle the any_errors_fatal\nlogic.\n\nRelated Upstream: https://github.com/ansible/ansible/pull/70694\nRelated-Bug: #1887702\n\nChange-Id: I31cf042b72aad5cdd2c7c1ae8bc319eca372acff\n(cherry picked from commit 28d4e52a16c21e5f87acdfe72a7f489611c841c9)\n""}]",0,742055,b47a4a7679ac6f59e0370372d27f8a4d66f89fc5,7,3,1,3153,,,0,"Allow any_errors_fatal to be dynamic

Currently any_errors_fatal cannot be dynamic value based on the current
task vars. This change attempts to evaulate the provided value and
verifies it's a boolean when using it to handle the any_errors_fatal
logic.

Related Upstream: https://github.com/ansible/ansible/pull/70694
Related-Bug: #1887702

Change-Id: I31cf042b72aad5cdd2c7c1ae8bc319eca372acff
(cherry picked from commit 28d4e52a16c21e5f87acdfe72a7f489611c841c9)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/55/742055/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/ansible_plugins/strategy/tripleo_linear.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_free.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_base.py']",3,b47a4a7679ac6f59e0370372d27f8a4d66f89fc5,bug/1887702-stable/train," def _get_task_errors_fatal(self, task, templar): """"""Return parsed any_errors_fatal from a task"""""" return task.get_validated_value('any_errors_fatal', task._valid_attrs['any_errors_fatal'], templar.template( task.any_errors_fatal), None) ",,30,20
openstack%2Fironic~master~Ifae9bd005fb7cf951b069ade0c92b8d61e095e0f,openstack/ironic,master,Ifae9bd005fb7cf951b069ade0c92b8d61e095e0f,Remove Link type,MERGED,2020-07-20 02:15:03.000000000,2020-07-21 15:45:47.000000000,2020-07-21 14:45:18.000000000,"[{'_account_id': 10239}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-07-20 02:15:03.000000000', 'files': ['ironic/api/controllers/v1/port.py', 'ironic/api/controllers/v1/__init__.py', 'ironic/api/controllers/v1/collection.py', 'ironic/api/controllers/v1/driver.py', 'ironic/api/controllers/version.py', 'ironic/api/controllers/v1/conductor.py', 'ironic/api/controllers/v1/volume.py', 'ironic/api/controllers/v1/portgroup.py', 'ironic/api/controllers/v1/volume_connector.py', 'ironic/api/types.py', 'ironic/api/controllers/v1/bios.py', 'ironic/api/controllers/v1/allocation.py', 'ironic/api/controllers/v1/chassis.py', 'ironic/api/controllers/v1/deploy_template.py', 'ironic/api/controllers/v1/volume_target.py', 'ironic/api/controllers/link.py', 'ironic/api/controllers/v1/state.py', 'ironic/api/controllers/v1/node.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/b1328fa996ba25f3a23d07fed21b314191741fd7', 'message': ""Remove Link type\n\nThis type is only used for output response formatting, not for input\nvalidation, so it can be replaced with a basic dict equivalent without\ndisruption.\n\nThis results in fields in WSME types which shouldn't be handled by\nWSME because they are already in a dict format. This is handled by\nrelaxing the validation in the (ex-WSME) types so that a None type\nmeans that WSME shouldn't serialize that attribute. This will allow\nold style type serialization to be mixed with plain dicts during the\ntransition period.\n\nStory: 1651346\nTask: 10551\n\nChange-Id: Ifae9bd005fb7cf951b069ade0c92b8d61e095e0f\n""}]",0,741863,b1328fa996ba25f3a23d07fed21b314191741fd7,11,6,1,4571,,,0,"Remove Link type

This type is only used for output response formatting, not for input
validation, so it can be replaced with a basic dict equivalent without
disruption.

This results in fields in WSME types which shouldn't be handled by
WSME because they are already in a dict format. This is handled by
relaxing the validation in the (ex-WSME) types so that a None type
means that WSME shouldn't serialize that attribute. This will allow
old style type serialization to be mixed with plain dicts during the
transition period.

Story: 1651346
Task: 10551

Change-Id: Ifae9bd005fb7cf951b069ade0c92b8d61e095e0f
",git fetch https://review.opendev.org/openstack/ironic refs/changes/63/741863/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/api/controllers/v1/port.py', 'ironic/api/controllers/v1/__init__.py', 'ironic/api/controllers/v1/collection.py', 'ironic/api/controllers/v1/driver.py', 'ironic/api/controllers/version.py', 'ironic/api/controllers/v1/conductor.py', 'ironic/api/controllers/v1/volume.py', 'ironic/api/controllers/v1/portgroup.py', 'ironic/api/controllers/v1/volume_connector.py', 'ironic/api/types.py', 'ironic/api/controllers/v1/bios.py', 'ironic/api/controllers/v1/allocation.py', 'ironic/api/controllers/v1/chassis.py', 'ironic/api/controllers/v1/deploy_template.py', 'ironic/api/controllers/v1/volume_target.py', 'ironic/api/controllers/link.py', 'ironic/api/controllers/v1/state.py', 'ironic/api/controllers/v1/node.py']",18,b1328fa996ba25f3a23d07fed21b314191741fd7,story/1651346," links = None link.make_link( link.make_link( links = None ports = None portgroups = None volume = None states = None node.ports = [link.make_link('self', url, 'nodes', node.uuid + ""/ports""), link.make_link('bookmark', url, 'nodes', node.uuid + ""/ports"", bookmark=True) node.states = [link.make_link('self', url, 'nodes', node.uuid + ""/states""), link.make_link('bookmark', url, 'nodes', node.uuid + ""/states"", bookmark=True)] link.make_link('self', url, 'nodes', node.uuid + ""/portgroups""), link.make_link('bookmark', url, 'nodes', node.uuid + ""/portgroups"", bookmark=True)] link.make_link('self', url, 'nodes', node.uuid + ""/volume""), link.make_link('bookmark', url, 'nodes', node.uuid + ""/volume"", bookmark=True)] node.links = [link.make_link('self', url, 'nodes', node.uuid), link.make_link('bookmark', url, 'nodes', node.uuid, bookmark=True)"," links = atypes.wsattr([link.Link], readonly=True) link.Link.make_link( link.Link.make_link( links = atypes.wsattr([link.Link], readonly=True) ports = atypes.wsattr([link.Link], readonly=True) portgroups = atypes.wsattr([link.Link], readonly=True) volume = atypes.wsattr([link.Link], readonly=True) states = atypes.wsattr([link.Link], readonly=True) node.ports = [link.Link.make_link('self', url, 'nodes', node.uuid + ""/ports""), link.Link.make_link('bookmark', url, 'nodes', node.uuid + ""/ports"", bookmark=True) node.states = [link.Link.make_link('self', url, 'nodes', node.uuid + ""/states""), link.Link.make_link('bookmark', url, 'nodes', node.uuid + ""/states"", bookmark=True)] link.Link.make_link('self', url, 'nodes', node.uuid + ""/portgroups""), link.Link.make_link('bookmark', url, 'nodes', node.uuid + ""/portgroups"", bookmark=True)] link.Link.make_link('self', url, 'nodes', node.uuid + ""/volume""), link.Link.make_link('bookmark', url, 'nodes', node.uuid + ""/volume"", bookmark=True)] node.links = [link.Link.make_link('self', url, 'nodes', node.uuid), link.Link.make_link('bookmark', url, 'nodes', node.uuid, bookmark=True)",247,264
openstack%2Fcharm-barbican-softhsm~stable%2F20.05~I88793f7422c383c45e44170266b7fd28c738e9c3,openstack/charm-barbican-softhsm,stable/20.05,I88793f7422c383c45e44170266b7fd28c738e9c3,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:21:49.000000000,2020-07-21 15:45:34.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:21:49.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-barbican-softhsm/commit/09c36e2a5403856bd03aea00c0d6bc145dd0997e', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I88793f7422c383c45e44170266b7fd28c738e9c3\n'}]",0,738794,09c36e2a5403856bd03aea00c0d6bc145dd0997e,6,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I88793f7422c383c45e44170266b7fd28c738e9c3
",git fetch https://review.opendev.org/openstack/charm-barbican-softhsm refs/changes/94/738794/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,09c36e2a5403856bd03aea00c0d6bc145dd0997e,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-barbican~stable%2F20.05~I945d417e2d74bf12affe23bab9b5e487c610ea79,openstack/charm-barbican,stable/20.05,I945d417e2d74bf12affe23bab9b5e487c610ea79,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:21:34.000000000,2020-07-21 15:45:18.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:21:34.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-barbican/commit/6fa9ab40d0bbf73719c8b47662223f4fde58a926', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I945d417e2d74bf12affe23bab9b5e487c610ea79\n'}]",0,738793,6fa9ab40d0bbf73719c8b47662223f4fde58a926,6,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I945d417e2d74bf12affe23bab9b5e487c610ea79
",git fetch https://review.opendev.org/openstack/charm-barbican refs/changes/93/738793/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,6fa9ab40d0bbf73719c8b47662223f4fde58a926,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-ceph-fs~stable%2F20.05~Ie9f70c68f679c3375feda1b439ef34f1e7a69683,openstack/charm-ceph-fs,stable/20.05,Ie9f70c68f679c3375feda1b439ef34f1e7a69683,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:47:00.000000000,2020-07-21 15:45:03.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:47:00.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-ceph-fs/commit/9b33734267d41b6a46d39d3bdeb795a72f672b4b', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ie9f70c68f679c3375feda1b439ef34f1e7a69683\n'}]",0,738800,9b33734267d41b6a46d39d3bdeb795a72f672b4b,6,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ie9f70c68f679c3375feda1b439ef34f1e7a69683
",git fetch https://review.opendev.org/openstack/charm-ceph-fs refs/changes/00/738800/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,9b33734267d41b6a46d39d3bdeb795a72f672b4b,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-masakari-monitors~stable%2F20.05~Ifaefd6299c944ce7568f319c213a780b0068ee0d,openstack/charm-masakari-monitors,stable/20.05,Ifaefd6299c944ce7568f319c213a780b0068ee0d,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:49:27.000000000,2020-07-21 15:44:48.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:49:27.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-masakari-monitors/commit/ef8fdec083b86bb584b4eb2f5ae8f47e340863c4', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ifaefd6299c944ce7568f319c213a780b0068ee0d\n'}]",0,738810,ef8fdec083b86bb584b4eb2f5ae8f47e340863c4,6,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ifaefd6299c944ce7568f319c213a780b0068ee0d
",git fetch https://review.opendev.org/openstack/charm-masakari-monitors refs/changes/10/738810/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,ef8fdec083b86bb584b4eb2f5ae8f47e340863c4,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-masakari~stable%2F20.05~I43ccee97859a61dde21de4effcf8f0c34e507221,openstack/charm-masakari,stable/20.05,I43ccee97859a61dde21de4effcf8f0c34e507221,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:49:13.000000000,2020-07-21 15:44:35.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:49:13.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-masakari/commit/441492a876047a727090d10acb5b3e99b303dd56', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I43ccee97859a61dde21de4effcf8f0c34e507221\n'}]",0,738809,441492a876047a727090d10acb5b3e99b303dd56,6,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I43ccee97859a61dde21de4effcf8f0c34e507221
",git fetch https://review.opendev.org/openstack/charm-masakari refs/changes/09/738809/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,441492a876047a727090d10acb5b3e99b303dd56,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-manila-ganesha~stable%2F20.05~Ic3ceefcefb7917aa1c924cb1626b93ddc6e105d4,openstack/charm-manila-ganesha,stable/20.05,Ic3ceefcefb7917aa1c924cb1626b93ddc6e105d4,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:50:11.000000000,2020-07-21 15:44:19.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:50:11.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-manila-ganesha/commit/e26cc355b65bca3b1318e203c030b5c9793151b7', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ic3ceefcefb7917aa1c924cb1626b93ddc6e105d4\n'}]",0,738813,e26cc355b65bca3b1318e203c030b5c9793151b7,6,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ic3ceefcefb7917aa1c924cb1626b93ddc6e105d4
",git fetch https://review.opendev.org/openstack/charm-manila-ganesha refs/changes/13/738813/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,e26cc355b65bca3b1318e203c030b5c9793151b7,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-octavia-diskimage-retrofit~stable%2F20.05~Id8a246583adf8a2520af057deac4407c2fae7e0d,openstack/charm-octavia-diskimage-retrofit,stable/20.05,Id8a246583adf8a2520af057deac4407c2fae7e0d,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:52:12.000000000,2020-07-21 15:44:06.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:52:12.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-octavia-diskimage-retrofit/commit/920302ccb0854d739707dc3853baaa57ce934ea9', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Id8a246583adf8a2520af057deac4407c2fae7e0d\n'}]",0,738821,920302ccb0854d739707dc3853baaa57ce934ea9,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Id8a246583adf8a2520af057deac4407c2fae7e0d
",git fetch https://review.opendev.org/openstack/charm-octavia-diskimage-retrofit refs/changes/21/738821/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,920302ccb0854d739707dc3853baaa57ce934ea9,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-mysql-router~stable%2F20.05~Ia037d585e39aa441330a06c9794af14ba0d8375f,openstack/charm-mysql-router,stable/20.05,Ia037d585e39aa441330a06c9794af14ba0d8375f,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:50:41.000000000,2020-07-21 15:43:52.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:50:41.000000000', 'files': ['test-requirements.txt', 'src/wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-mysql-router/commit/abff452e56dcf5aa49d55cc02d783e3a825d5845', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ia037d585e39aa441330a06c9794af14ba0d8375f\n'}]",0,738815,abff452e56dcf5aa49d55cc02d783e3a825d5845,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ia037d585e39aa441330a06c9794af14ba0d8375f
",git fetch https://review.opendev.org/openstack/charm-mysql-router refs/changes/15/738815/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'src/wheelhouse.txt']",2,abff452e56dcf5aa49d55cc02d783e3a825d5845,reactive-stable-2005-update, git+https://opendev.org/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack git+https://github.com/juju/charm-helpers.git@stable/20.05#egg=charmhelpers,,5,1
openstack%2Fcharm-pacemaker-remote~stable%2F20.05~Ic89580a1e7d254490d47102d6f0e53786dc0ec62,openstack/charm-pacemaker-remote,stable/20.05,Ic89580a1e7d254490d47102d6f0e53786dc0ec62,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:53:10.000000000,2020-07-21 15:43:32.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:53:10.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-pacemaker-remote/commit/4888d2a673a2375213b93fd46a499fc6869c3ecd', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ic89580a1e7d254490d47102d6f0e53786dc0ec62\n'}]",0,738825,4888d2a673a2375213b93fd46a499fc6869c3ecd,6,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ic89580a1e7d254490d47102d6f0e53786dc0ec62
",git fetch https://review.opendev.org/openstack/charm-pacemaker-remote refs/changes/25/738825/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,4888d2a673a2375213b93fd46a499fc6869c3ecd,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-mysql-innodb-cluster~stable%2F20.05~Ic297b792558ec7b544aa56ad823b2800d24135be,openstack/charm-mysql-innodb-cluster,stable/20.05,Ic297b792558ec7b544aa56ad823b2800d24135be,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:50:26.000000000,2020-07-21 15:42:29.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:50:26.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/5cb4a683096391bed50b5c1fad2ef0fb8c45d1d4', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ic297b792558ec7b544aa56ad823b2800d24135be\n'}]",0,738814,5cb4a683096391bed50b5c1fad2ef0fb8c45d1d4,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ic297b792558ec7b544aa56ad823b2800d24135be
",git fetch https://review.opendev.org/openstack/charm-mysql-innodb-cluster refs/changes/14/738814/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,5cb4a683096391bed50b5c1fad2ef0fb8c45d1d4,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-aodh~stable%2F20.05~Ie355e30da6d4819ad96e5ae2deae67138c7a0166,openstack/charm-aodh,stable/20.05,Ie355e30da6d4819ad96e5ae2deae67138c7a0166,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:21:19.000000000,2020-07-21 15:41:31.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:21:19.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-aodh/commit/248875e3ac90af5f73bd728558a2ccaabe0bf4d7', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ie355e30da6d4819ad96e5ae2deae67138c7a0166\n'}]",0,738792,248875e3ac90af5f73bd728558a2ccaabe0bf4d7,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ie355e30da6d4819ad96e5ae2deae67138c7a0166
",git fetch https://review.opendev.org/openstack/charm-aodh refs/changes/92/738792/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,248875e3ac90af5f73bd728558a2ccaabe0bf4d7,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-tempest~stable%2F20.05~If6be38335261b9affcd24978df81e72d85040d2e,openstack/charm-tempest,stable/20.05,If6be38335261b9affcd24978df81e72d85040d2e,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:53:40.000000000,2020-07-21 15:41:17.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:53:40.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-tempest/commit/6ea8d45d36eb4aa76d00a9f6c8cdd843bd6cee15', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: If6be38335261b9affcd24978df81e72d85040d2e\n'}]",0,738827,6ea8d45d36eb4aa76d00a9f6c8cdd843bd6cee15,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: If6be38335261b9affcd24978df81e72d85040d2e
",git fetch https://review.opendev.org/openstack/charm-tempest refs/changes/27/738827/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,6ea8d45d36eb4aa76d00a9f6c8cdd843bd6cee15,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-manila-generic~stable%2F20.05~I5582e2e70c3d99539a0a4959a63acaeaaf8f6b4d,openstack/charm-manila-generic,stable/20.05,I5582e2e70c3d99539a0a4959a63acaeaaf8f6b4d,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:49:57.000000000,2020-07-21 15:41:01.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:49:57.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-manila-generic/commit/c5916452ded5b9844ca72edf1d9faf8a0038aae0', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I5582e2e70c3d99539a0a4959a63acaeaaf8f6b4d\n'}]",0,738812,c5916452ded5b9844ca72edf1d9faf8a0038aae0,10,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I5582e2e70c3d99539a0a4959a63acaeaaf8f6b4d
",git fetch https://review.opendev.org/openstack/charm-manila-generic refs/changes/12/738812/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,c5916452ded5b9844ca72edf1d9faf8a0038aae0,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-keystone-saml-mellon~stable%2F20.05~I3b1d8b64e97d534dd80b232d487f8a3ccc0d113b,openstack/charm-keystone-saml-mellon,stable/20.05,I3b1d8b64e97d534dd80b232d487f8a3ccc0d113b,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:48:58.000000000,2020-07-21 15:40:42.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:48:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-keystone-saml-mellon/commit/b4b42c52f3ad97597d34e4e5c52f211f6a06cb44', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I3b1d8b64e97d534dd80b232d487f8a3ccc0d113b\n'}, {'number': 2, 'created': '2020-07-17 14:05:26.000000000', 'files': ['test-requirements.txt', 'src/wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-keystone-saml-mellon/commit/ccbad7d9f1443fed8376e0334aac4dc875467648', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nRemove duplicate jinja2 requirements from src/wheelhouse.txt\n\nChange-Id: I3b1d8b64e97d534dd80b232d487f8a3ccc0d113b\n'}]",0,738808,ccbad7d9f1443fed8376e0334aac4dc875467648,11,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Remove duplicate jinja2 requirements from src/wheelhouse.txt

Change-Id: I3b1d8b64e97d534dd80b232d487f8a3ccc0d113b
",git fetch https://review.opendev.org/openstack/charm-keystone-saml-mellon refs/changes/08/738808/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,b4b42c52f3ad97597d34e4e5c52f211f6a06cb44,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-cinder-backup-swift-proxy~stable%2F20.05~I053974930b519092fc303cefeb86c9a8d8012776,openstack/charm-cinder-backup-swift-proxy,stable/20.05,I053974930b519092fc303cefeb86c9a8d8012776,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:47:29.000000000,2020-07-21 15:40:26.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:47:29.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-cinder-backup-swift-proxy/commit/8a462de55ad1e185adbb1ca1a520a9f5b3393739', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I053974930b519092fc303cefeb86c9a8d8012776\n'}]",0,738802,8a462de55ad1e185adbb1ca1a520a9f5b3393739,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I053974930b519092fc303cefeb86c9a8d8012776
",git fetch https://review.opendev.org/openstack/charm-cinder-backup-swift-proxy refs/changes/02/738802/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,8a462de55ad1e185adbb1ca1a520a9f5b3393739,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-nova-cell-controller~stable%2F20.05~I9e8816b0616e3dce10c30fc5f5402b81bdd79daa,openstack/charm-nova-cell-controller,stable/20.05,I9e8816b0616e3dce10c30fc5f5402b81bdd79daa,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:51:27.000000000,2020-07-21 15:40:04.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:51:27.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-nova-cell-controller/commit/0189e2acf528f8b919f9455a288b30ecfd6b2982', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I9e8816b0616e3dce10c30fc5f5402b81bdd79daa\n'}]",0,738818,0189e2acf528f8b919f9455a288b30ecfd6b2982,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I9e8816b0616e3dce10c30fc5f5402b81bdd79daa
",git fetch https://review.opendev.org/openstack/charm-nova-cell-controller refs/changes/18/738818/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,0189e2acf528f8b919f9455a288b30ecfd6b2982,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-ceph-rbd-mirror~stable%2F20.05~I1a1cb96a88760e7e7d32c620bb8f27e0536a97c3,openstack/charm-ceph-rbd-mirror,stable/20.05,I1a1cb96a88760e7e7d32c620bb8f27e0536a97c3,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:47:15.000000000,2020-07-21 15:39:30.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:47:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-rbd-mirror/commit/00c96487ce9c727158b477c8fe2b83445ce6c51e', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I1a1cb96a88760e7e7d32c620bb8f27e0536a97c3\n'}, {'number': 2, 'created': '2020-07-17 11:11:07.000000000', 'files': ['test-requirements.txt', 'src/wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-ceph-rbd-mirror/commit/8542fb56bb7d7ca83eb47fed0f09a695e310ccc3', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nAlso remove duplicate jinja2 requirements from the wheelhouse.txt\n\nChange-Id: I1a1cb96a88760e7e7d32c620bb8f27e0536a97c3\n'}]",0,738801,8542fb56bb7d7ca83eb47fed0f09a695e310ccc3,11,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Also remove duplicate jinja2 requirements from the wheelhouse.txt

Change-Id: I1a1cb96a88760e7e7d32c620bb8f27e0536a97c3
",git fetch https://review.opendev.org/openstack/charm-ceph-rbd-mirror refs/changes/01/738801/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,00c96487ce9c727158b477c8fe2b83445ce6c51e,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-octavia~stable%2F20.05~Ia5ea025b9a071898abe4acf9c5755eba1f7eaac3,openstack/charm-octavia,stable/20.05,Ia5ea025b9a071898abe4acf9c5755eba1f7eaac3,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:51:42.000000000,2020-07-21 15:39:09.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:51:42.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/7892af17d53e9c3d85d6e59854309e6b20e8897c', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ia5ea025b9a071898abe4acf9c5755eba1f7eaac3\n'}]",0,738819,7892af17d53e9c3d85d6e59854309e6b20e8897c,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ia5ea025b9a071898abe4acf9c5755eba1f7eaac3
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/19/738819/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,7892af17d53e9c3d85d6e59854309e6b20e8897c,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-neutron-dynamic-routing~stable%2F20.05~I956b36f15e9eee917fd70b427dd270a6e19098df,openstack/charm-neutron-dynamic-routing,stable/20.05,I956b36f15e9eee917fd70b427dd270a6e19098df,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:51:12.000000000,2020-07-21 15:38:41.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:51:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-dynamic-routing/commit/6ad99b3bb9c192a05ed679b1f355c2546d78e6e4', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I956b36f15e9eee917fd70b427dd270a6e19098df\n'}, {'number': 2, 'created': '2020-07-17 12:20:00.000000000', 'files': ['test-requirements.txt', 'src/wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-neutron-dynamic-routing/commit/6c924fd112fb84d8e8d65c82ac1b2d6c49ed0983', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nAlso remove the duplicate jinja2 requirement in the src/wheelhouse.txt.\n\nChange-Id: I956b36f15e9eee917fd70b427dd270a6e19098df\n'}]",0,738817,6c924fd112fb84d8e8d65c82ac1b2d6c49ed0983,9,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Also remove the duplicate jinja2 requirement in the src/wheelhouse.txt.

Change-Id: I956b36f15e9eee917fd70b427dd270a6e19098df
",git fetch https://review.opendev.org/openstack/charm-neutron-dynamic-routing refs/changes/17/738817/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,6ad99b3bb9c192a05ed679b1f355c2546d78e6e4,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-trilio-horizon-plugin~stable%2F20.05~I7350e3529b7d1e5a4343f27993c9f7692567e61b,openstack/charm-trilio-horizon-plugin,stable/20.05,I7350e3529b7d1e5a4343f27993c9f7692567e61b,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:54:24.000000000,2020-07-21 15:38:02.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:54:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-trilio-horizon-plugin/commit/c66caceaad5d922c744ab4c06383aaa018ef7b56', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I7350e3529b7d1e5a4343f27993c9f7692567e61b\n'}, {'number': 2, 'created': '2020-07-17 14:41:53.000000000', 'files': ['src/tests/bundles/bionic-queens-ssl.yaml', 'src/tests/bundles/bionic-train-ssl.yaml', 'test-requirements.txt', 'src/tests/bundles/bionic-stein-ssl.yaml'], 'web_link': 'https://opendev.org/openstack/charm-trilio-horizon-plugin/commit/d26593f860ec84e17992f39fb21d958e4d13ff78', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nAlso ensure that the fixtures for nfs remain in the\ncs:~openstack-charmers-next namespace.\n\nChange-Id: I7350e3529b7d1e5a4343f27993c9f7692567e61b\n'}]",0,738830,d26593f860ec84e17992f39fb21d958e4d13ff78,11,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Also ensure that the fixtures for nfs remain in the
cs:~openstack-charmers-next namespace.

Change-Id: I7350e3529b7d1e5a4343f27993c9f7692567e61b
",git fetch https://review.opendev.org/openstack/charm-trilio-horizon-plugin refs/changes/30/738830/2 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,c66caceaad5d922c744ab4c06383aaa018ef7b56,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack#egg=charms.openstack,1,1
openstack%2Fcharm-vault~stable%2F20.05~I2ebe7db3ec7b9f517ff4f0e5d843f6e84cbf46f1,openstack/charm-vault,stable/20.05,I2ebe7db3ec7b9f517ff4f0e5d843f6e84cbf46f1,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:54:54.000000000,2020-07-21 15:37:44.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:54:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/f3ca58dc79d3b84af8ce64da7353b3423cf0d3fd', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I2ebe7db3ec7b9f517ff4f0e5d843f6e84cbf46f1\n'}, {'number': 2, 'created': '2020-07-17 12:15:52.000000000', 'files': ['test-requirements.txt', 'src/wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/b451e0d35e1555042e4891ac1e870d7d50b3d357', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nAlso remove duplicate jinja2 requirement in the wheelhouse.txt\n\nChange-Id: I2ebe7db3ec7b9f517ff4f0e5d843f6e84cbf46f1\n'}]",0,738832,b451e0d35e1555042e4891ac1e870d7d50b3d357,13,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Also remove duplicate jinja2 requirement in the wheelhouse.txt

Change-Id: I2ebe7db3ec7b9f517ff4f0e5d843f6e84cbf46f1
",git fetch https://review.opendev.org/openstack/charm-vault refs/changes/32/738832/2 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,f3ca58dc79d3b84af8ce64da7353b3423cf0d3fd,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-gnocchi~stable%2F20.05~Ic75494b1b65c75acd1466f2d677b640144498922,openstack/charm-gnocchi,stable/20.05,Ic75494b1b65c75acd1466f2d677b640144498922,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:48:28.000000000,2020-07-21 15:37:23.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:48:28.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-gnocchi/commit/8dad4cbbca1a584e1f08f47f082bdd870f7490c1', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ic75494b1b65c75acd1466f2d677b640144498922\n'}]",0,738806,8dad4cbbca1a584e1f08f47f082bdd870f7490c1,10,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ic75494b1b65c75acd1466f2d677b640144498922
",git fetch https://review.opendev.org/openstack/charm-gnocchi refs/changes/06/738806/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,8dad4cbbca1a584e1f08f47f082bdd870f7490c1,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-manila~stable%2F20.05~I001279692a6da6abcba5b05b0c55db8aa888da74,openstack/charm-manila,stable/20.05,I001279692a6da6abcba5b05b0c55db8aa888da74,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:49:42.000000000,2020-07-21 15:37:02.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:49:42.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-manila/commit/d108f18daa514b63a0bb5e6de33b2f3c42d2856e', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I001279692a6da6abcba5b05b0c55db8aa888da74\n'}]",0,738811,d108f18daa514b63a0bb5e6de33b2f3c42d2856e,10,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I001279692a6da6abcba5b05b0c55db8aa888da74
",git fetch https://review.opendev.org/openstack/charm-manila refs/changes/11/738811/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,d108f18daa514b63a0bb5e6de33b2f3c42d2856e,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-trilio-wlm~stable%2F20.05~I49e6a0639788db5f6a65aba5e28ae0170ba1c38d,openstack/charm-trilio-wlm,stable/20.05,I49e6a0639788db5f6a65aba5e28ae0170ba1c38d,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:54:38.000000000,2020-07-21 15:36:42.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:54:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/8d5adc03b044199a0b21140d098be55ce0c893b0', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I49e6a0639788db5f6a65aba5e28ae0170ba1c38d\n'}, {'number': 2, 'created': '2020-07-17 14:49:24.000000000', 'files': ['src/tests/bundles/bionic-queens-ssl.yaml', 'src/tests/bundles/bionic-train-ssl.yaml', 'test-requirements.txt', 'src/tests/bundles/bionic-stein-ssl.yaml'], 'web_link': 'https://opendev.org/openstack/charm-trilio-wlm/commit/1d9aac128bde70ba7e300f40e3031669ba4acc4e', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nAlso switch the text fixtures back to openstack-charmers-next\n\nChange-Id: I49e6a0639788db5f6a65aba5e28ae0170ba1c38d\n'}]",0,738831,1d9aac128bde70ba7e300f40e3031669ba4acc4e,11,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Also switch the text fixtures back to openstack-charmers-next

Change-Id: I49e6a0639788db5f6a65aba5e28ae0170ba1c38d
",git fetch https://review.opendev.org/openstack/charm-trilio-wlm refs/changes/31/738831/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,8d5adc03b044199a0b21140d098be55ce0c893b0,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack#egg=charms.openstack,1,1
openstack%2Fcharm-placement~stable%2F20.05~I90df8465f7840deff9965b62b47323d93acc75c5,openstack/charm-placement,stable/20.05,I90df8465f7840deff9965b62b47323d93acc75c5,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:53:25.000000000,2020-07-21 15:36:20.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:53:25.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-placement/commit/0e431f549587bfb2fe9518189d5a9542dfb00f0b', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I90df8465f7840deff9965b62b47323d93acc75c5\n'}]",0,738826,0e431f549587bfb2fe9518189d5a9542dfb00f0b,10,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I90df8465f7840deff9965b62b47323d93acc75c5
",git fetch https://review.opendev.org/openstack/charm-placement refs/changes/26/738826/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,0e431f549587bfb2fe9518189d5a9542dfb00f0b,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-trilio-dm-api~stable%2F20.05~I6137ff538bef55d8f941d7a2bace461e00a1fcc2,openstack/charm-trilio-dm-api,stable/20.05,I6137ff538bef55d8f941d7a2bace461e00a1fcc2,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:54:09.000000000,2020-07-21 15:36:03.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:54:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-trilio-dm-api/commit/8d6cfabcb69d3c53b61ccb66818f0d3b06396943', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I6137ff538bef55d8f941d7a2bace461e00a1fcc2\n'}, {'number': 2, 'created': '2020-07-17 14:58:07.000000000', 'files': ['src/tests/bundles/bionic-queens-ssl.yaml', 'src/tests/bundles/bionic-train-ssl.yaml', 'test-requirements.txt', 'src/tests/bundles/bionic-stein-ssl.yaml'], 'web_link': 'https://opendev.org/openstack/charm-trilio-dm-api/commit/56919489694ccdf5c01a1ec8c163d5592a7eca2e', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nSwitch fixture to openstack-charmers-next\n\nChange-Id: I6137ff538bef55d8f941d7a2bace461e00a1fcc2\n'}]",0,738829,56919489694ccdf5c01a1ec8c163d5592a7eca2e,11,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Switch fixture to openstack-charmers-next

Change-Id: I6137ff538bef55d8f941d7a2bace461e00a1fcc2
",git fetch https://review.opendev.org/openstack/charm-trilio-dm-api refs/changes/29/738829/2 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,8d6cfabcb69d3c53b61ccb66818f0d3b06396943,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack#egg=charms.openstack,1,1
openstack%2Fcharm-neutron-api-plugin-ovn~stable%2F20.05~I127cb3fb8675d510b94a6ce32301fd4cb0ee4fe4,openstack/charm-neutron-api-plugin-ovn,stable/20.05,I127cb3fb8675d510b94a6ce32301fd4cb0ee4fe4,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:50:56.000000000,2020-07-21 15:35:41.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:50:56.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-neutron-api-plugin-ovn/commit/9eb6551a0b998f6050dfeee989cc8e8b6de24eb6', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I127cb3fb8675d510b94a6ce32301fd4cb0ee4fe4\n'}]",0,738816,9eb6551a0b998f6050dfeee989cc8e8b6de24eb6,12,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I127cb3fb8675d510b94a6ce32301fd4cb0ee4fe4
",git fetch https://review.opendev.org/openstack/charm-neutron-api-plugin-ovn refs/changes/16/738816/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,9eb6551a0b998f6050dfeee989cc8e8b6de24eb6,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-trilio-data-mover~stable%2F20.05~Ifdc5af552494be7aea6baf6d2891006bee85fa63,openstack/charm-trilio-data-mover,stable/20.05,Ifdc5af552494be7aea6baf6d2891006bee85fa63,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:53:54.000000000,2020-07-21 15:35:12.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:53:54.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-trilio-data-mover/commit/2a3777a22150dc13401fbfed0e3895fe4ad64a4a', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ifdc5af552494be7aea6baf6d2891006bee85fa63\n'}]",0,738828,2a3777a22150dc13401fbfed0e3895fe4ad64a4a,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ifdc5af552494be7aea6baf6d2891006bee85fa63
",git fetch https://review.opendev.org/openstack/charm-trilio-data-mover refs/changes/28/738828/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,2a3777a22150dc13401fbfed0e3895fe4ad64a4a,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack#egg=charms.openstack,1,1
openstack%2Fcharm-octavia-dashboard~stable%2F20.05~Iace5eb67bebc45e4ae5b09573c8dd0a870ef2385,openstack/charm-octavia-dashboard,stable/20.05,Iace5eb67bebc45e4ae5b09573c8dd0a870ef2385,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:51:57.000000000,2020-07-21 15:34:51.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:51:57.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-octavia-dashboard/commit/1d881279a48654cf8c2d49f0239ea4ebabc282f1', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Iace5eb67bebc45e4ae5b09573c8dd0a870ef2385\n'}]",0,738820,1d881279a48654cf8c2d49f0239ea4ebabc282f1,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Iace5eb67bebc45e4ae5b09573c8dd0a870ef2385
",git fetch https://review.opendev.org/openstack/charm-octavia-dashboard refs/changes/20/738820/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,1d881279a48654cf8c2d49f0239ea4ebabc282f1,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-keystone-ldap~stable%2F20.05~Ia019c7f4edc747dcd228ff268ea5c8a02bccfb88,openstack/charm-keystone-ldap,stable/20.05,Ia019c7f4edc747dcd228ff268ea5c8a02bccfb88,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:48:43.000000000,2020-07-21 15:34:31.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:48:43.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-keystone-ldap/commit/cee64195ca8f7a32286d9eec4231c473b70de591', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: Ia019c7f4edc747dcd228ff268ea5c8a02bccfb88\n'}]",0,738807,cee64195ca8f7a32286d9eec4231c473b70de591,8,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: Ia019c7f4edc747dcd228ff268ea5c8a02bccfb88
",git fetch https://review.opendev.org/openstack/charm-keystone-ldap refs/changes/07/738807/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,cee64195ca8f7a32286d9eec4231c473b70de591,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-cinder-purestorage~stable%2F20.05~I1702e599022ab037f4d7437c46321790fa83d2da,openstack/charm-cinder-purestorage,stable/20.05,I1702e599022ab037f4d7437c46321790fa83d2da,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:47:44.000000000,2020-07-21 15:34:16.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:47:44.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-cinder-purestorage/commit/abd72214a92cc2722f0a9891bb17d6a76e42f4bc', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I1702e599022ab037f4d7437c46321790fa83d2da\n'}]",0,738803,abd72214a92cc2722f0a9891bb17d6a76e42f4bc,10,3,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I1702e599022ab037f4d7437c46321790fa83d2da
",git fetch https://review.opendev.org/openstack/charm-cinder-purestorage refs/changes/03/738803/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,abd72214a92cc2722f0a9891bb17d6a76e42f4bc,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-designate~stable%2F20.05~I66e5ec8ca2f082ddc05d67ac6963ba1cba69c3c2,openstack/charm-designate,stable/20.05,I66e5ec8ca2f082ddc05d67ac6963ba1cba69c3c2,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:47:59.000000000,2020-07-21 15:34:02.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:47:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/a68d7b8067077ffbec5dfa5585dfea20fcd7b093', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I66e5ec8ca2f082ddc05d67ac6963ba1cba69c3c2\n'}, {'number': 2, 'created': '2020-07-20 14:58:44.000000000', 'files': ['test-requirements.txt', 'src/wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/3787c7af395840f3a0ece64c615186f4d93f3831', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nAlso pin Jinja2, PyYaml and dnspython for Py3.4 and py3.5 support\n\nChange-Id: I66e5ec8ca2f082ddc05d67ac6963ba1cba69c3c2\n'}]",0,738804,3787c7af395840f3a0ece64c615186f4d93f3831,15,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Also pin Jinja2, PyYaml and dnspython for Py3.4 and py3.5 support

Change-Id: I66e5ec8ca2f082ddc05d67ac6963ba1cba69c3c2
",git fetch https://review.opendev.org/openstack/charm-designate refs/changes/04/738804/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,a68d7b8067077ffbec5dfa5585dfea20fcd7b093,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-barbican-vault~stable%2F20.05~I49d1be616e263a1d870945367f78f638798c9fb4,openstack/charm-barbican-vault,stable/20.05,I49d1be616e263a1d870945367f78f638798c9fb4,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:22:04.000000000,2020-07-21 15:33:17.000000000,,"[{'_account_id': 20634}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:22:04.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/charm-barbican-vault/commit/813e6dab038306275ed70d8305be8da253681537', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I49d1be616e263a1d870945367f78f638798c9fb4\n'}]",0,738795,813e6dab038306275ed70d8305be8da253681537,9,4,1,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Change-Id: I49d1be616e263a1d870945367f78f638798c9fb4
",git fetch https://review.opendev.org/openstack/charm-barbican-vault refs/changes/95/738795/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,813e6dab038306275ed70d8305be8da253681537,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fcharm-designate-bind~stable%2F20.05~I75103eaceeffbbd701f2e37b44c58635c6b6d7fe,openstack/charm-designate-bind,stable/20.05,I75103eaceeffbbd701f2e37b44c58635c6b6d7fe,Update to reactive charms for stable testing,ABANDONED,2020-07-01 11:48:14.000000000,2020-07-21 15:32:53.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 11:48:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-designate-bind/commit/042d0bc9f14e468c77873865f41839d9d68de985', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nChange-Id: I75103eaceeffbbd701f2e37b44c58635c6b6d7fe\n'}, {'number': 2, 'created': '2020-07-20 15:05:12.000000000', 'files': ['test-requirements.txt', 'src/wheelhouse.txt'], 'web_link': 'https://opendev.org/openstack/charm-designate-bind/commit/7b5af63d0ec024c4839050096e20eedf5670a98b', 'message': 'Update to reactive charms for stable testing\n\nUpdates the test-requirements.txt to use the stable branch of charms.openstack\nin unit tests.\n\nAdd pins for PyYaml and dnspython due to py3.4 and py3.5\n\nChange-Id: I75103eaceeffbbd701f2e37b44c58635c6b6d7fe\n'}]",0,738805,7b5af63d0ec024c4839050096e20eedf5670a98b,17,3,2,20870,,,0,"Update to reactive charms for stable testing

Updates the test-requirements.txt to use the stable branch of charms.openstack
in unit tests.

Add pins for PyYaml and dnspython due to py3.4 and py3.5

Change-Id: I75103eaceeffbbd701f2e37b44c58635c6b6d7fe
",git fetch https://review.opendev.org/openstack/charm-designate-bind refs/changes/05/738805/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,042d0bc9f14e468c77873865f41839d9d68de985,reactive-stable-2005-update,git+https://github.com/openstack/charms.openstack.git@stable/20.05#egg=charms.openstack,git+https://github.com/openstack/charms.openstack.git#egg=charms.openstack,1,1
openstack%2Fnova-specs~master~I659a3ee6a561c2cbd9f218746304c788d0750ad7,openstack/nova-specs,master,I659a3ee6a561c2cbd9f218746304c788d0750ad7,Support SRIOV interface attach and detach,MERGED,2020-07-17 08:37:05.000000000,2020-07-21 15:23:20.000000000,2020-07-21 15:20:40.000000000,"[{'_account_id': 7166}, {'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-17 08:37:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/239ef6b92efa7c5fc54b9f53588ced8c39f9817c', 'message': 'Support SRIOV interface attach and detach\n\nNova supports booting servers with SRIOV interfaces however attaching\nand detaching an SRIOV interfaces to an existing server is not\nsupported as the PCI device management is missing from the attach\nand detach code path.\n\nPart of blueprint sriov-interface-attach-detach\n\nChange-Id: I659a3ee6a561c2cbd9f218746304c788d0750ad7\n'}, {'number': 2, 'created': '2020-07-17 15:29:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/428d3e7e72adf7b5b2530e7058d3093253d4b2ec', 'message': 'Support SRIOV interface attach and detach\n\nNova supports booting servers with SRIOV interfaces. However,\nattaching and detaching an SRIOV interface to an existing server\nis not supported as the PCI device management is missing from the\nattach and detach code path.\n\nPart of blueprint sriov-interface-attach-detach\n\nChange-Id: I659a3ee6a561c2cbd9f218746304c788d0750ad7\n'}, {'number': 3, 'created': '2020-07-21 14:47:31.000000000', 'files': ['specs/victoria/approved/sriov-interface-attach-detach.rst'], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/dd5319deffb8eae4fa4ebcf7e47e75c66df9f021', 'message': 'Support SRIOV interface attach and detach\n\nNova supports booting servers with SRIOV interfaces. However,\nattaching and detaching an SRIOV interface to an existing server\nis not supported as the PCI device management is missing from the\nattach and detach code path.\n\nPart of blueprint sriov-interface-attach-detach\n\nChange-Id: I659a3ee6a561c2cbd9f218746304c788d0750ad7\n'}]",26,741601,dd5319deffb8eae4fa4ebcf7e47e75c66df9f021,18,5,3,9708,,,0,"Support SRIOV interface attach and detach

Nova supports booting servers with SRIOV interfaces. However,
attaching and detaching an SRIOV interface to an existing server
is not supported as the PCI device management is missing from the
attach and detach code path.

Part of blueprint sriov-interface-attach-detach

Change-Id: I659a3ee6a561c2cbd9f218746304c788d0750ad7
",git fetch https://review.opendev.org/openstack/nova-specs refs/changes/01/741601/1 && git format-patch -1 --stdout FETCH_HEAD,['specs/victoria/approved/sriov-interface-attach-detach.rst'],1,239ef6b92efa7c5fc54b9f53588ced8c39f9817c,bp/sriov-interface-attach-detach,".. This work is licensed under a Creative Commons Attribution 3.0 Unported License. http://creativecommons.org/licenses/by/3.0/legalcode ========================================= Support SRIOV interface attach and detach ========================================= Include the URL of your launchpad blueprint: https://blueprints.launchpad.net/nova/+spec/sriov-interface-attach-detach Nova supports booting servers with SRIOV interfaces however attaching and detaching an SRIOV interfaces to an existing server is not supported as the PCI device management is missing from the attach and detach code path. Problem description =================== SRIOV intefaces cannot be attached or detached from an existing nova server. Use Cases --------- As an end user I need to connect my server to another neutron network via an SRIOV interface to get high throughput connectivity to that network direction. As an end user I want to detach an existing SRIOV interface as I don't use that network access any more and I want to free up the scarce SRIOV resource. Proposed change =============== In the compute manager, during interface attach, the compute needs to generate InstancePCIRequest for the requested port if the vnic_type of the port indicates an SRIOV interface. Then run a pci claim on the generated pci request to check if there is free pci device, claim it, and get a PciDevice object. If this is successful then connec the pci request to the RequestedNetwork object and call Neutron as today with that RequestedNetwork. Then call the virt driver as today. During detach we have to recover the pci request from the vif being destroyed then from that we can get the pci device that we need to uncleam in the pci tracker. Alternatives ------------ None Data model impact ----------------- None REST API impact --------------- None Security impact --------------- None Notifications impact -------------------- None Other end user impact --------------------- None Performance Impact ------------------ There will be an extra neutron call during interface attach as well as additional DB operations. The interface_attach RPC method is synchronous today so this will be an end user visible change. Other deployer impact --------------------- None Developer impact ---------------- None Upgrade impact -------------- None Implementation ============== Assignee(s) ----------- Primary assignee: balazs-gibizer Feature Liaison --------------- Feature liaison: gibi Work Items ---------- * change the attach and detach code path * add unit and functional tests * add documentation Dependencies ============ None Testing ======= Tempest test cannot be added due to the fact that the upstream CI does not have SRIOV devices. Functional tests with libvirt driver will be added instead. Documentation Impact ==================== * remove the limitation from the API documentation References ========== None History ======= .. list-table:: Revisions :header-rows: 1 * - Release Name - Description * - Victoria - Introduced ",,159,0
openstack%2Fnova-specs~master~I1dc647942599694ef7efe4f2894d2e78dec967d7,openstack/nova-specs,master,I1dc647942599694ef7efe4f2894d2e78dec967d7,template: consider openstack client besides novaclient,MERGED,2020-04-06 11:48:20.000000000,2020-07-21 15:20:45.000000000,2020-07-21 15:18:08.000000000,"[{'_account_id': 136}, {'_account_id': 4690}, {'_account_id': 7166}, {'_account_id': 7634}, {'_account_id': 8864}, {'_account_id': 9708}, {'_account_id': 10135}, {'_account_id': 11604}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 26458}]","[{'number': 1, 'created': '2020-04-06 11:48:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/ba698d18a96367e8ed9062f8f860c48b9e013d50', 'message': 'template: consider openstack client besides novaclient\n\nWe need to encourage developers proposing REST API change to nova to\nconsider the impact of such change not only novaclient but also on\nopenstack client to avoid increasing the gap between the two clients.\n\nChange-Id: I1dc647942599694ef7efe4f2894d2e78dec967d7\n'}, {'number': 2, 'created': '2020-05-20 14:32:28.000000000', 'files': ['specs/victoria-template.rst'], 'web_link': 'https://opendev.org/openstack/nova-specs/commit/b0b00d795a49a9a54d7a8f5f58379c67c1e2f3c4', 'message': 'template: consider openstack client besides novaclient\n\nWe need to encourage developers proposing REST API change to nova to\nconsider the impact of such change not only novaclient but also on\nopenstack client to avoid increasing the gap between the two clients.\n\nChange-Id: I1dc647942599694ef7efe4f2894d2e78dec967d7\n'}]",11,717722,b0b00d795a49a9a54d7a8f5f58379c67c1e2f3c4,29,11,2,9708,,,0,"template: consider openstack client besides novaclient

We need to encourage developers proposing REST API change to nova to
consider the impact of such change not only novaclient but also on
openstack client to avoid increasing the gap between the two clients.

Change-Id: I1dc647942599694ef7efe4f2894d2e78dec967d7
",git fetch https://review.opendev.org/openstack/nova-specs refs/changes/22/717722/2 && git format-patch -1 --stdout FETCH_HEAD,['specs/ussuri-template.rst'],1,ba698d18a96367e8ed9062f8f860c48b9e013d50,openstackclient,* Does this change have an impact on python-novaclient and openstack client? What does the user interface there look like?,* Does this change have an impact on python-novaclient? What does the user interface there look like?,2,2
openstack%2Fironic~master~I6759bc304839bd89a50fc3bf9e26b1cd20537a0a,openstack/ironic,master,I6759bc304839bd89a50fc3bf9e26b1cd20537a0a,Remove File type,MERGED,2020-07-20 02:15:03.000000000,2020-07-21 15:15:36.000000000,2020-07-21 14:45:13.000000000,"[{'_account_id': 10239}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-07-20 02:15:03.000000000', 'files': ['ironic/api/args.py', 'ironic/tests/unit/api/test_types.py', 'ironic/api/types.py', 'ironic/api/controllers/v1/utils.py', 'ironic/tests/unit/api/test_args.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/5e12d502fe0a023796b9c5a32878318f76124612', 'message': 'Remove File type\n\nThe only use of the File type is for wrapping passthru responses in a\nio.BytesIO, so this change does this wrapping directly and removes the\nFile type.\n\nChange-Id: I6759bc304839bd89a50fc3bf9e26b1cd20537a0a\nStory: 1651346\nTask: 10551\n'}]",0,741862,5e12d502fe0a023796b9c5a32878318f76124612,12,6,1,4571,,,0,"Remove File type

The only use of the File type is for wrapping passthru responses in a
io.BytesIO, so this change does this wrapping directly and removes the
File type.

Change-Id: I6759bc304839bd89a50fc3bf9e26b1cd20537a0a
Story: 1651346
Task: 10551
",git fetch https://review.opendev.org/openstack/ironic refs/changes/62/741862/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/api/args.py', 'ironic/tests/unit/api/test_types.py', 'ironic/api/types.py', 'ironic/api/controllers/v1/utils.py', 'ironic/tests/unit/api/test_args.py']",5,5e12d502fe0a023796b9c5a32878318f76124612,story/1651346,," # file param self.assertEqual( b'foo', args.from_param(atypes.File, b'foo').content ) ",2,123
openstack%2Fcharm-placement~master~I2cdebc875a626d69de17e16b83b7a75716741ca5,openstack/charm-placement,master,I2cdebc875a626d69de17e16b83b7a75716741ca5,"Revert part of ""Remove inherited configuration ...""",MERGED,2020-07-21 13:24:41.000000000,2020-07-21 15:10:24.000000000,2020-07-21 15:10:24.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}]","[{'number': 1, 'created': '2020-07-21 13:24:41.000000000', 'files': ['src/layer.yaml'], 'web_link': 'https://opendev.org/openstack/charm-placement/commit/c96b0a49a1389f5f4168dea1a4eac6729f11accb', 'message': 'Revert part of ""Remove inherited configuration ...""\n\nThe inherited layer properties are appropriate for the\nplacement charm as its a principal charm.\n\nRelated-Bug: 1879088\n\nChange-Id: I2cdebc875a626d69de17e16b83b7a75716741ca5\n'}]",0,742191,c96b0a49a1389f5f4168dea1a4eac6729f11accb,7,3,1,935,,,0,"Revert part of ""Remove inherited configuration ...""

The inherited layer properties are appropriate for the
placement charm as its a principal charm.

Related-Bug: 1879088

Change-Id: I2cdebc875a626d69de17e16b83b7a75716741ca5
",git fetch https://review.opendev.org/openstack/charm-placement refs/changes/91/742191/1 && git format-patch -1 --stdout FETCH_HEAD,['src/layer.yaml'],1,c96b0a49a1389f5f4168dea1a4eac6729f11accb,bug/1879088,, - ssl_ca - ssl_cert - ssl_key - use-syslog - worker-multiplier,0,5
openstack%2Fmonasca-api~master~I4d57b8893a6a131769009dc3299789d3fc89bab6,openstack/monasca-api,master,I4d57b8893a6a131769009dc3299789d3fc89bab6,Set legacy_kafka_client_enabled = False on default,MERGED,2020-07-14 13:19:17.000000000,2020-07-21 15:03:35.000000000,2020-07-21 14:59:57.000000000,"[{'_account_id': 16222}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 28062}]","[{'number': 1, 'created': '2020-07-14 13:19:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/60d540d06119353a042f32b9c22f56b8fe8c742b', 'message': 'Set legacy_kafka_client_enabled = False on default\n\nWe change the default value of kafka.legacy_kafka_client_enabled from\nTrue to False. The use of new Confluent Kafka client is recommended.\n\nChange-Id: I4d57b8893a6a131769009dc3299789d3fc89bab6\nStory: 2007924\nTask: 40338\n'}, {'number': 2, 'created': '2020-07-14 14:17:34.000000000', 'files': ['devstack/lib/persister.sh', 'devstack/lib/notification.sh', 'devstack/plugin.sh', 'releasenotes/notes/disable-legacy-kafka-client-16dd1ac1894fe7a0.yaml', 'monasca_api/conf/kafka.py'], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/3014c840d64f24830b18c535c365ae60befb212b', 'message': 'Set legacy_kafka_client_enabled = False on default\n\nWe change the default value of kafka.legacy_kafka_client_enabled from\nTrue to False. The use of new Confluent Kafka client is recommended.\n\nDevStack plugin does not set this option anymore.\n\nDepends-On: https://review.opendev.org/740959\nDepends-On: https://review.opendev.org/740966\nChange-Id: I4d57b8893a6a131769009dc3299789d3fc89bab6\nStory: 2007924\nTask: 40338\n'}]",0,740954,3014c840d64f24830b18c535c365ae60befb212b,14,4,2,16222,,,0,"Set legacy_kafka_client_enabled = False on default

We change the default value of kafka.legacy_kafka_client_enabled from
True to False. The use of new Confluent Kafka client is recommended.

DevStack plugin does not set this option anymore.

Depends-On: https://review.opendev.org/740959
Depends-On: https://review.opendev.org/740966
Change-Id: I4d57b8893a6a131769009dc3299789d3fc89bab6
Story: 2007924
Task: 40338
",git fetch https://review.opendev.org/openstack/monasca-api refs/changes/54/740954/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/disable-legacy-kafka-client-16dd1ac1894fe7a0.yaml', 'monasca_api/conf/kafka.py']",2,60d540d06119353a042f32b9c22f56b8fe8c742b,kafka-client," cfg.BoolOpt(name='legacy_kafka_client_enabled', default=False,"," cfg.BoolOpt(name='legacy_kafka_client_enabled', default=True,",7,1
openstack%2Fmonasca-api~stable%2Fussuri~Ic6f7d79d944c21ea777038a6c43f71fc66ad588b,openstack/monasca-api,stable/ussuri,Ic6f7d79d944c21ea777038a6c43f71fc66ad588b,Fix typo in http_check,MERGED,2020-07-21 12:57:19.000000000,2020-07-21 14:58:04.000000000,2020-07-21 14:55:33.000000000,"[{'_account_id': 16957}, {'_account_id': 22348}, {'_account_id': 26141}, {'_account_id': 28062}]","[{'number': 1, 'created': '2020-07-21 12:57:19.000000000', 'files': ['devstack/files/monasca-agent/http_check.yaml'], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/5b145c2cebc377ab380985ad67e15999c13c781d', 'message': 'Fix typo in http_check\n\nThis typo brakes the http_check metrics collection in devstack.\n\nChange-Id: Ic6f7d79d944c21ea777038a6c43f71fc66ad588b\n(cherry picked from commit 9d8ecbd2d97c394810947a1dc74b9aca458a961d)\n'}]",0,742176,5b145c2cebc377ab380985ad67e15999c13c781d,7,4,1,16222,,,0,"Fix typo in http_check

This typo brakes the http_check metrics collection in devstack.

Change-Id: Ic6f7d79d944c21ea777038a6c43f71fc66ad588b
(cherry picked from commit 9d8ecbd2d97c394810947a1dc74b9aca458a961d)
",git fetch https://review.opendev.org/openstack/monasca-api refs/changes/76/742176/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/files/monasca-agent/http_check.yaml'],1,5b145c2cebc377ab380985ad67e15999c13c781d,, - name: kibana,- name: kibana,1,1
openstack%2Fopenstack-ansible-os_keystone~stable%2Fussuri~I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3,openstack/openstack-ansible-os_keystone,stable/ussuri,I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3,Add Centos-8 support,MERGED,2020-07-21 06:38:04.000000000,2020-07-21 14:51:25.000000000,2020-07-21 14:48:42.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2020-07-21 06:38:04.000000000', 'files': ['vars/redhat.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_keystone/commit/dcf1da03a17070a0eb68b84fe4515ba35107a806', 'message': 'Add Centos-8 support\n\nChange-Id: I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3\n(cherry picked from commit be3a7c7e2bf63a73a1b971141e5f511bce2be5a9)\n'}]",0,742075,dcf1da03a17070a0eb68b84fe4515ba35107a806,12,3,1,25023,,,0,"Add Centos-8 support

Change-Id: I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3
(cherry picked from commit be3a7c7e2bf63a73a1b971141e5f511bce2be5a9)
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_keystone refs/changes/75/742075/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat.yml'],1,dcf1da03a17070a0eb68b84fe4515ba35107a806,osa/el8-stable/ussuri," - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('python-devel', 'python36-devel') }}"" - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('systemd-python', 'python3-systemd') }}"" - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('uwsgi-plugin-python', 'uwsgi-plugin-python3') }}""", - python-devel - systemd-python - uwsgi-plugin-python,3,3
openstack%2Fswift~master~I139916057e18b8696e9f8404e96f57e30a9bde7f,openstack/swift,master,I139916057e18b8696e9f8404e96f57e30a9bde7f,WIP: Rebuild non-durable frags if we can,ABANDONED,2019-07-23 23:05:27.000000000,2020-07-21 14:44:56.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-07-23 23:05:27.000000000', 'files': ['swift/obj/server.py', 'swift/obj/reconstructor.py', 'swift/obj/ssync_sender.py', 'swift/proxy/controllers/obj.py', 'swift/obj/diskfile.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/5be39da1bc6fd1445a988f506f4856451e35127c', 'message': 'WIP: Rebuild non-durable frags if we can\n\nStep 0 is making the suffix hashes disagree, which requires the\nreconstructor to come up with different suffix hashes.\n\nThe object-server calculate hashes for the non-durable frags.\n\nThe reconstructor will check against hashes for only durable frags.\n\nSince they disagree the reconstructor will call ssync to sync the\nsuffix.  In the ssync sender missing_check we don\'t offer non-durable\nfragment timestamps because the remote ssync receiver may\ninappropriately mark it\'s non-durable frag as durable w/o anyone\nverifying that timestamp is actually rebuildable!\n\nSo we punt a little further down, let the reconstructor offer it\'s\ndurable timestamp which the sender will want - and then we pull a fast\none and try to rebuild the newer non-durable fragset by passing\nfrag_prefs when we open the df just before reconstruct_fa!\n\nThis is a terrible kludge, only barely ""works"", throws off some basic\nassumptions and incomplete.  To the extent there\'s any ""design"" here\nit\'s mostly opportunistic.\n\nChange-Id: I139916057e18b8696e9f8404e96f57e30a9bde7f\n'}]",0,672385,5be39da1bc6fd1445a988f506f4856451e35127c,3,1,1,1179,,,0,"WIP: Rebuild non-durable frags if we can

Step 0 is making the suffix hashes disagree, which requires the
reconstructor to come up with different suffix hashes.

The object-server calculate hashes for the non-durable frags.

The reconstructor will check against hashes for only durable frags.

Since they disagree the reconstructor will call ssync to sync the
suffix.  In the ssync sender missing_check we don't offer non-durable
fragment timestamps because the remote ssync receiver may
inappropriately mark it's non-durable frag as durable w/o anyone
verifying that timestamp is actually rebuildable!

So we punt a little further down, let the reconstructor offer it's
durable timestamp which the sender will want - and then we pull a fast
one and try to rebuild the newer non-durable fragset by passing
frag_prefs when we open the df just before reconstruct_fa!

This is a terrible kludge, only barely ""works"", throws off some basic
assumptions and incomplete.  To the extent there's any ""design"" here
it's mostly opportunistic.

Change-Id: I139916057e18b8696e9f8404e96f57e30a9bde7f
",git fetch https://review.opendev.org/openstack/swift refs/changes/85/672385/1 && git format-patch -1 --stdout FETCH_HEAD,"['swift/obj/server.py', 'swift/obj/reconstructor.py', 'swift/obj/ssync_sender.py', 'swift/proxy/controllers/obj.py', 'swift/obj/diskfile.py']",5,5be39da1bc6fd1445a988f506f4856451e35127c,nondurable-rebuild, default_non_durable = False if self.default_non_durable: default_non_durable = [] else: default_non_durable = None frag_prefs = frag_prefs or default_non_durable if self.default_non_durable: key = 'chosen_frag_set' else: key = 'durable_frag_set' if ondisk_info.get(key): file_info = ondisk_info[key][0], if 'durable_frag_set' in ondisk_info: file_info = ondisk_info['durable_frag_set'][0],18,6
openstack%2Fnova~master~Ib980b1ba68ffcfe51a15dce10eb9f42ef12d7260,openstack/nova,master,Ib980b1ba68ffcfe51a15dce10eb9f42ef12d7260,Repro gen conflict in COMPUTE_STATUS_DISABLED handling,MERGED,2020-01-29 18:55:46.000000000,2020-07-21 14:27:15.000000000,2020-07-21 14:22:19.000000000,"[{'_account_id': 4690}, {'_account_id': 9008}, {'_account_id': 9708}, {'_account_id': 10135}, {'_account_id': 11604}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-01-29 18:55:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/bfe8fa44c388464b8176d00dbf9ab893a7a0d9c8', 'message': 'Repro gen conflict in COMPUTE_STATUS_DISABLED handling\n\nThe COMPUTE_STATUS_DISABLED trait is supposed to be added to the compute\nRP when the compute service is disabled, and the trait supposed to be\nremoved when the service is enabled again. However adding and removing\ntraits is subject to generation conflict in placement. The original\nimplementation of blueprint pre-filter-disabled-computes noticed this\nand prints a detailed warning message while the API operation succeeds.\nWe can ignore the conflict this way because the periodic\nupdate_available_resource() call will re-sync the traits later.\n\nStill this gives human noticeable time window where the trait and the\nservice state are not in sync.\n\nSetting the compute service disable is the smaller problem as the\nscheduler still uses the ComputeFilter that filters the computes based\non the service api. So during the enable ->disable race window we only\nlose scheduling performance as the placement filter is ineffective.\n\nIn case of setting the compute service to enabled the race is more\nvisible as the placement pre_filter will filter out the compute that\nis enable by the admin until the re-sync happens. If the de-sync would\nonly happen due to high load on the given compute the such delay could\nbe explained by the load itself. However de-sync can happen simply due\nto a new instance boot on the compute.\n\nThis patch adds a functional test that reproduce the original problem.\n\nChange-Id: Ib980b1ba68ffcfe51a15dce10eb9f42ef12d7260\n'}, {'number': 2, 'created': '2020-07-06 12:20:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7ccab74853c0022071beaedce40f083d921cd2c7', 'message': 'Repro gen conflict in COMPUTE_STATUS_DISABLED handling\n\nThe COMPUTE_STATUS_DISABLED trait is supposed to be added to the compute\nRP when the compute service is disabled, and the trait supposed to be\nremoved when the service is enabled again. However adding and removing\ntraits is subject to generation conflict in placement. The original\nimplementation of blueprint pre-filter-disabled-computes noticed this\nand prints a detailed warning message while the API operation succeeds.\nWe can ignore the conflict this way because the periodic\nupdate_available_resource() call will re-sync the traits later.\n\nStill this gives human noticeable time window where the trait and the\nservice state are not in sync.\n\nSetting the compute service disable is the smaller problem as the\nscheduler still uses the ComputeFilter that filters the computes based\non the service api. So during the enable ->disable race window we only\nlose scheduling performance as the placement filter is ineffective.\n\nIn case of setting the compute service to enabled the race is more\nvisible as the placement pre_filter will filter out the compute that\nis enable by the admin until the re-sync happens. If the de-sync would\nonly happen due to high load on the given compute the such delay could\nbe explained by the load itself. However de-sync can happen simply due\nto a new instance boot on the compute.\n\nThis patch adds a functional test that reproduce the original problem.\n\nRelated-Bug: #1886418\n\nChange-Id: Ib980b1ba68ffcfe51a15dce10eb9f42ef12d7260\n'}, {'number': 3, 'created': '2020-07-06 12:23:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/570c15de338f0e1e740e655230d860657f4b4f19', 'message': 'Repro gen conflict in COMPUTE_STATUS_DISABLED handling\n\nThe COMPUTE_STATUS_DISABLED trait is supposed to be added to the compute\nRP when the compute service is disabled, and the trait supposed to be\nremoved when the service is enabled again. However adding and removing\ntraits is subject to generation conflict in placement. The original\nimplementation of blueprint pre-filter-disabled-computes noticed this\nand prints a detailed warning message while the API operation succeeds.\nWe can ignore the conflict this way because the periodic\nupdate_available_resource() call will re-sync the traits later.\n\nStill this gives human noticeable time window where the trait and the\nservice state are not in sync.\n\nSetting the compute service disable is the smaller problem as the\nscheduler still uses the ComputeFilter that filters the computes based\non the service api. So during the enable ->disable race window we only\nlose scheduling performance as the placement filter is ineffective.\n\nIn case of setting the compute service to enabled the race is more\nvisible as the placement pre_filter will filter out the compute that\nis enable by the admin until the re-sync happens. If the de-sync would\nonly happen due to high load on the given compute the such delay could\nbe explained by the load itself. However de-sync can happen simply due\nto a new instance boot on the compute.\n\nThis patch adds a functional test that reproduce the original problem.\n\nRelated-Bug: #1886418\n\nChange-Id: Ib980b1ba68ffcfe51a15dce10eb9f42ef12d7260\n'}, {'number': 4, 'created': '2020-07-10 12:07:12.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1886418.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/f1678912181e17770de9f26aa9aed0bebc544aa1', 'message': 'Repro gen conflict in COMPUTE_STATUS_DISABLED handling\n\nThe COMPUTE_STATUS_DISABLED trait is supposed to be added to the compute\nRP when the compute service is disabled, and the trait supposed to be\nremoved when the service is enabled again. However adding and removing\ntraits is subject to generation conflict in placement. The original\nimplementation of blueprint pre-filter-disabled-computes noticed this\nand prints a detailed warning message while the API operation succeeds.\nWe can ignore the conflict this way because the periodic\nupdate_available_resource() call will re-sync the traits later.\n\nStill this gives human noticeable time window where the trait and the\nservice state are not in sync.\n\nSetting the compute service disable is the smaller problem as the\nscheduler still uses the ComputeFilter that filters the computes based\non the service api. So during the enable ->disable race window we only\nlose scheduling performance as the placement filter is inefficient.\n\nIn case of setting the compute service to enabled the race is more\nvisible as the placement pre_filter will filter out the compute that\nis enable by the admin until the re-sync happens. If the de-sync would\nonly happen due to high load on the given compute the such delay could\nbe explained by the load itself. However de-sync can happen simply due\nto a new instance boot on the compute.\n\nThis patch adds a functional test that reproduce the original problem.\n\nRelated-Bug: #1886418\n\nChange-Id: Ib980b1ba68ffcfe51a15dce10eb9f42ef12d7260\n'}]",24,704865,f1678912181e17770de9f26aa9aed0bebc544aa1,42,12,4,9708,,,0,"Repro gen conflict in COMPUTE_STATUS_DISABLED handling

The COMPUTE_STATUS_DISABLED trait is supposed to be added to the compute
RP when the compute service is disabled, and the trait supposed to be
removed when the service is enabled again. However adding and removing
traits is subject to generation conflict in placement. The original
implementation of blueprint pre-filter-disabled-computes noticed this
and prints a detailed warning message while the API operation succeeds.
We can ignore the conflict this way because the periodic
update_available_resource() call will re-sync the traits later.

Still this gives human noticeable time window where the trait and the
service state are not in sync.

Setting the compute service disable is the smaller problem as the
scheduler still uses the ComputeFilter that filters the computes based
on the service api. So during the enable ->disable race window we only
lose scheduling performance as the placement filter is inefficient.

In case of setting the compute service to enabled the race is more
visible as the placement pre_filter will filter out the compute that
is enable by the admin until the re-sync happens. If the de-sync would
only happen due to high load on the given compute the such delay could
be explained by the load itself. However de-sync can happen simply due
to a new instance boot on the compute.

This patch adds a functional test that reproduce the original problem.

Related-Bug: #1886418

Change-Id: Ib980b1ba68ffcfe51a15dce10eb9f42ef12d7260
",git fetch https://review.opendev.org/openstack/nova refs/changes/65/704865/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/test_services.py'],1,bfe8fa44c388464b8176d00dbf9ab893a7a0d9c8,bug/1886418,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova import test from nova.tests import fixtures as nova_fixtures from nova.tests.functional import fixtures as func_fixtures from nova.tests.functional import integrated_helpers from nova.tests.unit.image import fake as fake_image class TestServices(test.TestCase, integrated_helpers.InstanceHelperMixin): def setUp(self): super(TestServices, self).setUp() # Start standard fixtures. placement = func_fixtures.PlacementFixture() self.useFixture(placement) self.placement_api = placement.api self.useFixture(nova_fixtures.NeutronFixture(self)) fake_image.stub_out_image_service(self) self.addCleanup(fake_image.FakeImageService_reset) # Start nova services. self.api = self.useFixture(nova_fixtures.OSAPIFixture( api_version='v2.1')).admin_api self.api.microversion = 'latest' self.start_service('conductor') self.start_service('scheduler') self.compute = self.start_service('compute', host=""compute1"") self.compute_rp_uuid = self.api.api_get( 'os-hypervisors?hypervisor_hostname_pattern=compute1' ).body['hypervisors'][0]['id'] self.compute_service_id = self.api.get_services( host='compute1', binary='nova-compute')[0]['id'] def _get_traits_on_compute(self): return self.placement_api.get( '/resource_providers/%s/traits' % self.compute_rp_uuid, version='1.6' ).body['traits'] def _disable_compute(self): self.api.put_service( self.compute_service_id, {""status"": ""disabled""}) def _enable_compute(self): self.api.put_service( self.compute_service_id, {""status"": ""enabled""}) def test_compute_disable_after_server_create(self): # Check that COMPUTE_STATUS_DISABLED is not on the compute self.assertNotIn( ""COMPUTE_STATUS_DISABLED"", self._get_traits_on_compute()) self._disable_compute() # Check that COMPUTE_STATUS_DISABLED is now on the compute self.assertIn( ""COMPUTE_STATUS_DISABLED"", self._get_traits_on_compute()) self._enable_compute() # Check that COMPUTE_STATUS_DISABLED is not on the compute self.assertNotIn( ""COMPUTE_STATUS_DISABLED"", self._get_traits_on_compute()) # Create a server. server = self._build_server(networks=[]) server = self.api.post_server({'server': server}) server = self._wait_for_state_change(server, 'ACTIVE') self._disable_compute() # Check that COMPUTE_STATUS_DISABLED is now on the compute # Unfortunately it is not true as the compute manager failed to update # the traits in placement due to a stale provide tree cache. It is # stale because a server is booted on the compute since the last # update_available_resource periodic was run. self.assertIn( 'An error occurred while updating COMPUTE_STATUS_DISABLED trait ' 'on compute node resource provider', self.stdlog.logger.output) self.assertNotIn( ""COMPUTE_STATUS_DISABLED"", self._get_traits_on_compute()) # This would be the expected behavior # # self.assertIn( # ""COMPUTE_STATUS_DISABLED"", # self._get_traits_on_compute()) # # Alternatively the test could wait for the periodic to run or trigger # it manually. # This passes now but not because enabling works but because the # above fault caused that COMPUTE_STATUS_DISABLED is not on the compute # RP in the first place. self._enable_compute() # Check that COMPUTE_STATUS_DISABLED is removed from the compute self.assertNotIn( ""COMPUTE_STATUS_DISABLED"", self._get_traits_on_compute()) ",,111,0
openstack%2Fnova~master~I20913201cf945a7fde1f9e6264c415e1235db7b9,openstack/nova,master,I20913201cf945a7fde1f9e6264c415e1235db7b9,Move image verification and writing out of download method,MERGED,2020-07-01 06:55:14.000000000,2020-07-21 14:25:24.000000000,2020-07-21 14:22:13.000000000,"[{'_account_id': 9008}, {'_account_id': 9708}, {'_account_id': 9732}, {'_account_id': 9963}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 29963}, {'_account_id': 32071}]","[{'number': 1, 'created': '2020-07-01 06:55:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/46faedcb03be0ab3ce6d98e2b0f52d6e5df41d33', 'message': 'Move image verification and writing out of download method\n\nThis should help the readability and also make it possible\nto call new _verify_and_write with different arguments.\n\nChange-Id: I20913201cf945a7fde1f9e6264c415e1235db7b9\n'}, {'number': 2, 'created': '2020-07-01 07:58:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a05a30e88cf354ea63ab22b30e267fd2626e5a79', 'message': 'Move image verification and writing out of download method\n\nThis should help the readability and also make it possible\nto call new _verify_and_write with different arguments.\n\nChange-Id: I20913201cf945a7fde1f9e6264c415e1235db7b9\n'}, {'number': 3, 'created': '2020-07-03 11:42:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6d7688110003fa24fe554d187664c94e0702a3d7', 'message': 'Move image verification and writing out of download method\n\nThis should help the readability and also make it possible\nto call new _verify_and_write method with different arguments.\n\nChange-Id: I20913201cf945a7fde1f9e6264c415e1235db7b9\n'}, {'number': 4, 'created': '2020-07-13 13:55:19.000000000', 'files': ['nova/image/glance.py', 'nova/tests/unit/image/test_glance.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ccfde2795a958c76bfadc8f58b0ab31d0d998818', 'message': 'Move image verification and writing out of download method\n\nThis should help the readability and also make it possible\nto call new _verify_and_write method with different arguments.\n\nChange-Id: I20913201cf945a7fde1f9e6264c415e1235db7b9\n'}]",17,738738,ccfde2795a958c76bfadc8f58b0ab31d0d998818,53,14,4,9963,,,0,"Move image verification and writing out of download method

This should help the readability and also make it possible
to call new _verify_and_write method with different arguments.

Change-Id: I20913201cf945a7fde1f9e6264c415e1235db7b9
",git fetch https://review.opendev.org/openstack/nova refs/changes/38/738738/4 && git format-patch -1 --stdout FETCH_HEAD,['nova/image/glance.py'],1,46faedcb03be0ab3ce6d98e2b0f52d6e5df41d33,refactor_image_download," return self._verify_and_write(context, image_id, trusted_certs, image_chunks, data, dst_path, True) def _verify_and_write(self, context, image_id, trusted_certs, image_chunks, data, dst_path, write_image): """"""Perform image signature verification and save the image file if needed. Generally, this method just gets most of the arguments same as the download method. :param dst_path: Filepath to transfer the image file to. :param data: File object to use when writing the image. If passed as None and dst_path is provided, new file is opened. :param write_image: Write the image file provided by image_chunks. :returns an iterable with image data, or nothing. Iterable is returned only when data param is None and dst_path is not provided (assuming the caller wants to process the data by itself). """""" write_image = False # Retrieve properties for verification of Glance image signature verifier = self._get_verifier(context, image_id, trusted_certs) # Exit early if we do not need write nor verify if verifier is None and write_image is False: if data is None: return image_chunks else: return try: for chunk in image_chunks: if verifier: verifier.update(chunk) if write_image: data.write(chunk) if verifier: verifier.verify() LOG.info('Image signature verification succeeded ' 'for image %s', image_id) except cryptography.exceptions.InvalidSignature: if write_image: with excutils.save_and_reraise_exception(): LOG.error('Image signature verification failed ' 'for image %s', image_id) except Exception as ex: if write_image: finally: if close_file: # Ensure that the data is pushed all the way down to # persistent storage. This ensures that in the event of a # subsequent host crash we don't have running instances # using a corrupt backing file. data.flush() self._safe_fsync(data) data.close() if data is None: return image_chunks"," # Retrieve properties for verification of Glance image signature verifier = self._get_verifier(context, image_id, trusted_certs) # Perform image signature verification if verifier: try: for chunk in image_chunks: verifier.update(chunk) verifier.verify() LOG.info('Image signature verification succeeded ' 'for image: %s', image_id) except cryptography.exceptions.InvalidSignature: with excutils.save_and_reraise_exception(): LOG.error('Image signature verification failed ' 'for image: %s', image_id) return image_chunks else: try: for chunk in image_chunks: if verifier: verifier.update(chunk) data.write(chunk) if verifier: verifier.verify() LOG.info('Image signature verification succeeded ' 'for image %s', image_id) except cryptography.exceptions.InvalidSignature: with excutils.save_and_reraise_exception(): LOG.error('Image signature verification failed ' 'for image: %s', image_id) except Exception as ex: finally: if close_file: # Ensure that the data is pushed all the way down to # persistent storage. This ensures that in the event of a # subsequent host crash we don't have running instances # using a corrupt backing file. data.flush() self._safe_fsync(data) data.close()",56,38
openstack%2Fnova~master~Ifc8fe3b8cc589d27e9d9f00122dffd7e6ed10b13,openstack/nova,master,Ifc8fe3b8cc589d27e9d9f00122dffd7e6ed10b13,Remove unused function parameters,MERGED,2020-05-22 14:38:08.000000000,2020-07-21 14:12:40.000000000,2020-07-21 14:07:06.000000000,"[{'_account_id': 7634}, {'_account_id': 9008}, {'_account_id': 9708}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26458}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-05-22 14:38:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/5a82febabf2fad8a178800933afea8137be222d7', 'message': ""Remove unused function parameters\n\nThese were picked up with pylint:\n\n  pylint -d all -e unused-argument nova/compute/manager.py\n\nNote that this returns additional entries but we can't remove those\nbecause they're either (a) part of the API or (b) actually used by\ndecorators. To summarize the changes:\n\n- Remove 'context' argument from '_set_instance_obj_error_state'\n- Remove 'context' argument from '_retry_reboot'\n- Remove 'context' argument from '_get_power_state'\n- Remove 'context' argument from '_check_instance_exists'\n- Remove 'context' argument from '_update_instance_after_spawn'\n- Remove 'dp_name' argument from '_get_bound_arq_resources'\n- Remove 'context' argument from '_get_power_off_values'\n- Remove 'context' argument from '_power_off_instance'\n\nChange-Id: Ifc8fe3b8cc589d27e9d9f00122dffd7e6ed10b13\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2020-06-10 17:27:58.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_shelve.py', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/69079f072dafbfaa494409797869090a30b6192f', 'message': ""Remove unused function parameters\n\nThese were picked up with pylint:\n\n  pylint -d all -e unused-argument nova/compute/manager.py\n\nNote that this returns additional entries but we can't remove those\nbecause they're either (a) part of the API or (b) actually used by\ndecorators. To summarize the changes:\n\n- Remove 'context' argument from '_set_instance_obj_error_state'\n- Remove 'context' argument from '_retry_reboot'\n- Remove 'context' argument from '_get_power_state'\n- Remove 'context' argument from '_check_instance_exists'\n- Remove 'context' argument from '_update_instance_after_spawn'\n- Remove 'dp_name' argument from '_get_bound_arq_resources'\n- Remove 'context' argument from '_get_power_off_values'\n- Remove 'context' argument from '_power_off_instance'\n\nChange-Id: Ifc8fe3b8cc589d27e9d9f00122dffd7e6ed10b13\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",1,730352,69079f072dafbfaa494409797869090a30b6192f,42,15,2,15334,,,0,"Remove unused function parameters

These were picked up with pylint:

  pylint -d all -e unused-argument nova/compute/manager.py

Note that this returns additional entries but we can't remove those
because they're either (a) part of the API or (b) actually used by
decorators. To summarize the changes:

- Remove 'context' argument from '_set_instance_obj_error_state'
- Remove 'context' argument from '_retry_reboot'
- Remove 'context' argument from '_get_power_state'
- Remove 'context' argument from '_check_instance_exists'
- Remove 'context' argument from '_update_instance_after_spawn'
- Remove 'dp_name' argument from '_get_bound_arq_resources'
- Remove 'context' argument from '_get_power_off_values'
- Remove 'context' argument from '_power_off_instance'

Change-Id: Ifc8fe3b8cc589d27e9d9f00122dffd7e6ed10b13
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/52/730352/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_shelve.py', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py']",4,5a82febabf2fad8a178800933afea8137be222d7,cleanup," def _set_instance_obj_error_state(self, instance, clean_task_state=False): self._set_instance_obj_error_state(instance, clean_task_state=True) self._set_instance_obj_error_state(instance, clean_task_state=True) self._set_instance_obj_error_state(instance) current_power_state = self._get_power_state(instance) try_reboot, reboot_type = self._retry_reboot( instance, current_power_state) self._set_instance_obj_error_state(instance) drv_state = self._get_power_state(instance) self._set_instance_obj_error_state(instance) def _retry_reboot(self, instance, current_power_state): current_power_state = self._get_power_state(instance) instance, clean_task_state=True) def _get_power_state(self, instance): # TODO(stephenfin): Remove this once we bump the compute API to v6.0 self._set_instance_obj_error_state(instance) def _check_instance_exists(self, instance): def _update_instance_after_spawn(self, instance, vm_state=vm_states.ACTIVE): instance.power_state = self._get_power_state(instance) self._set_instance_obj_error_state(instance, self._set_instance_obj_error_state(instance, clean_task_state=True) self._update_instance_after_spawn(instance) if instance.flavor.extra_specs.get('accel:device_profile'): try: context, instance, accel_uuids) except (Exception, eventlet.timeout.Timeout) as exc: LOG.exception(exc.format_message()) self._build_resources_cleanup(instance, network_info) compute_utils.delete_arqs_if_needed(context, instance) msg = _('Failure getting accelerator requests.') raise exception.BuildAbortException( reason=msg, instance_uuid=instance.uuid) resources['accel_info'] = arqs def _get_bound_arq_resources(self, context, instance, arq_uuids): self._set_instance_obj_error_state(instance) def _get_power_off_values(self, instance, clean_shutdown): def _power_off_instance(self, instance, clean_shutdown=True): timeout, retry_interval = self._get_power_off_values( instance, clean_shutdown) self._set_instance_obj_error_state(instance) current_power_state = self._get_power_state(instance) self._power_off_instance(instance, clean_shutdown) instance.power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) self._power_off_instance(instance, clean_shutdown=True) self._check_instance_exists(instance) instance.power_state = self._get_power_state(instance) self._update_instance_after_spawn(instance) instance.power_state = self._get_power_state(instance) new_power_state = self._get_power_state(instance) self._set_instance_obj_error_state(instance) new_power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) current_power_state = self._get_power_state(instance) current_power_state = self._get_power_state(instance) self._power_off_instance(instance, clean_shutdown) self._set_instance_obj_error_state(instance) instance.power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) ctxt, instance) self, ctxt, instance): self._update_instance_after_spawn(instance, vm_state=vm_state) self._set_instance_obj_error_state(instance) # TODO(stephenfin): Remove unused request_spec parameter in API v6.0 self._power_off_instance(instance) instance.power_state = self._get_power_state(instance) timeout, retry_interval = self._get_power_off_values( instance, clean_shutdown) # TODO(stephenfin): Remove unused request_spec parameter in API v6.0 self._update_instance_after_spawn(instance, vm_state=vm_states.RESIZED) self._inject_network_info(instance, network_info) self._inject_network_info(instance, network_info) instance.power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) current_power_state = self._get_power_state(instance) current_power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) instance.power_state = self._get_power_state(instance) self._power_off_instance(instance, clean_shutdown) instance.power_state = self._get_power_state(instance) self._power_off_instance(instance, clean_shutdown) current_power_state = self._get_power_state(instance) self._update_instance_after_spawn(instance) # TODO(stephenfin): Remove this in RPC 6.0 since it's nova-network only def _inject_network_info(self, instance, network_info): self.driver.inject_network_info(instance, network_info) self._inject_network_info(instance, network_info) # TODO(stephenfin): Remove the unused instance argument in RPC version 6.0 self._set_instance_obj_error_state(instance, current_power_state = self._get_power_state(instance) self._set_instance_obj_error_state(instance)"," def _set_instance_obj_error_state(self, context, instance, clean_task_state=False): self._set_instance_obj_error_state( context, instance, clean_task_state=True) self._set_instance_obj_error_state( context, instance, clean_task_state=True) self._set_instance_obj_error_state(context, instance) current_power_state = self._get_power_state(context, instance) try_reboot, reboot_type = self._retry_reboot(context, instance, current_power_state) self._set_instance_obj_error_state(context, instance) drv_state = self._get_power_state(context, instance) self._set_instance_obj_error_state(context, instance) def _retry_reboot(self, context, instance, current_power_state): current_power_state = self._get_power_state(context, instance) context, instance, clean_task_state=True) def _get_power_state(self, context, instance): self._set_instance_obj_error_state(context, instance) def _check_instance_exists(self, context, instance): def _update_instance_after_spawn(self, context, instance, vm_state=vm_states.ACTIVE): instance.power_state = self._get_power_state(context, instance) self._set_instance_obj_error_state(context, instance, self._set_instance_obj_error_state(context, instance, clean_task_state=True) self._update_instance_after_spawn(context, instance) dp_name = instance.flavor.extra_specs.get('accel:device_profile') try: if dp_name: context, dp_name, instance, accel_uuids) except (Exception, eventlet.timeout.Timeout) as exc: LOG.exception(exc.format_message()) self._build_resources_cleanup(instance, network_info) compute_utils.delete_arqs_if_needed(context, instance) msg = _('Failure getting accelerator requests.') raise exception.BuildAbortException(instance_uuid=instance.uuid, reason=msg) resources['accel_info'] = arqs def _get_bound_arq_resources(self, context, dp_name, instance, arq_uuids): :param dp_name: Device profile name. Caller ensures this is valid. self._set_instance_obj_error_state(context, instance) def _get_power_off_values(self, context, instance, clean_shutdown): def _power_off_instance(self, context, instance, clean_shutdown=True): timeout, retry_interval = self._get_power_off_values(context, instance, clean_shutdown) self._set_instance_obj_error_state(context, instance) current_power_state = self._get_power_state(context, instance) self._power_off_instance(context, instance, clean_shutdown) instance.power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) self._power_off_instance(context, instance, clean_shutdown=True) self._check_instance_exists(context, instance) instance.power_state = self._get_power_state(context, instance) self._update_instance_after_spawn(context, instance) instance.power_state = self._get_power_state(context, instance) new_power_state = self._get_power_state(context, instance) self._set_instance_obj_error_state(context, instance) new_power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) current_power_state = self._get_power_state(context, instance) current_power_state = self._get_power_state(context, instance) self._power_off_instance(context, instance, clean_shutdown) self._set_instance_obj_error_state(context, instance) instance.power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) ctxt, instance, migration) self, ctxt, instance, migration): :param migration: Migration object for the resize/cold migrate self._update_instance_after_spawn( ctxt, instance, vm_state=vm_state) self._set_instance_obj_error_state(context, instance) self._power_off_instance(ctxt, instance) instance.power_state = self._get_power_state(ctxt, instance) timeout, retry_interval = self._get_power_off_values(context, instance, clean_shutdown) self._update_instance_after_spawn( ctxt, instance, vm_state=vm_states.RESIZED) self._inject_network_info(context, instance, network_info) self._inject_network_info(context, instance, network_info) instance.power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) current_power_state = self._get_power_state(context, instance) current_power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) instance.power_state = self._get_power_state(context, instance) self._power_off_instance(context, instance, clean_shutdown) instance.power_state = self._get_power_state(context, instance) self._power_off_instance(context, instance, clean_shutdown) current_power_state = self._get_power_state(context, instance) self._update_instance_after_spawn(context, instance) def _inject_network_info(self, context, instance, network_info): self.driver.inject_network_info(instance, network_info) self._inject_network_info(context, instance, network_info) self._set_instance_obj_error_state(context, instance, current_power_state = self._get_power_state(context, instance) self._set_instance_obj_error_state(context, instance)",150,168
openstack%2Fnova~master~I5fa7786523bc1b6001247c6daaee7e984e9a3b65,openstack/nova,master,I5fa7786523bc1b6001247c6daaee7e984e9a3b65,Remove unnecessary retrieval of Migration object,MERGED,2020-05-22 14:38:08.000000000,2020-07-21 14:09:28.000000000,2020-07-21 14:06:59.000000000,"[{'_account_id': 7634}, {'_account_id': 9008}, {'_account_id': 9708}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14384}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 16376}, {'_account_id': 22348}, {'_account_id': 23498}, {'_account_id': 26515}, {'_account_id': 29963}, {'_account_id': 32071}]","[{'number': 1, 'created': '2020-05-22 14:38:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ef23c45952741d55e8ea59e63e18f0c4ee22434f', 'message': ""Remove unnecessary retrieval of Migration object\n\nThis has already been retrieved with an elevated context. There's no\nneed to retrieve it again.\n\nChange-Id: I5fa7786523bc1b6001247c6daaee7e984e9a3b65\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2020-06-10 17:27:58.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/6ae11a0bcf2ebea7fa689f20ca82526a79357826', 'message': ""Remove unnecessary retrieval of Migration object\n\nThis has already been retrieved with an elevated context. There's no\nneed to retrieve it again.\n\nChange-Id: I5fa7786523bc1b6001247c6daaee7e984e9a3b65\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",0,730351,6ae11a0bcf2ebea7fa689f20ca82526a79357826,52,15,2,15334,,,0,"Remove unnecessary retrieval of Migration object

This has already been retrieved with an elevated context. There's no
need to retrieve it again.

Change-Id: I5fa7786523bc1b6001247c6daaee7e984e9a3b65
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/51/730351/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py']",3,ef23c45952741d55e8ea59e63e18f0c4ee22434f,cleanup," def do_confirm_resize(context, instance, migration): LOG.debug(""Going to confirm migration %s"", migration.id, migration.id, instance=instance) if migration.status not in ('finished', 'confirming'): {""status"": migration.status, ""id"": migration.id}, do_confirm_resize(context, instance, migration)"," def do_confirm_resize(context, instance, migration_id): # NOTE(wangpan): Get the migration status from db, if it has been # confirmed, we do nothing and return here LOG.debug(""Going to confirm migration %s"", migration_id, try: # TODO(russellb) Why are we sending the migration object just # to turn around and look it up from the db again? migration = objects.Migration.get_by_id( context.elevated(), migration_id) except exception.MigrationNotFound: LOG.error(""Migration %s is not found during confirmation"", migration_id, instance=instance) return migration_id, instance=instance) elif migration.status not in ('finished', 'confirming'): {""status"": migration.status, ""id"": migration_id}, do_confirm_resize(context, instance, migration.id)",8,36
openstack%2Fnova~master~Ied2227a482087f4a2dc4e2d9986f9b3b777aa821,openstack/nova,master,Ied2227a482087f4a2dc4e2d9986f9b3b777aa821,Switch from unittest2 compat methods to Python 3.x methods,MERGED,2020-06-23 12:16:24.000000000,2020-07-21 14:03:31.000000000,2020-07-21 13:57:40.000000000,"[{'_account_id': 7634}, {'_account_id': 9008}, {'_account_id': 10135}, {'_account_id': 14384}, {'_account_id': 15334}, {'_account_id': 15941}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-06-23 12:16:24.000000000', 'files': ['nova/tests/functional/libvirt/test_numa_live_migration.py', 'nova/tests/unit/network/test_network_info.py', 'nova/tests/unit/network/test_neutron.py', 'nova/tests/unit/objects/test_request_spec.py', 'nova/tests/unit/scheduler/test_request_filter.py', 'nova/tests/functional/db/test_aggregate.py', 'nova/tests/unit/compute/test_compute_api.py', 'nova/tests/functional/test_servers_provider_tree.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4d58c0bb3d8c889cb634fa38d4ba4b902a883741', 'message': 'Switch from unittest2 compat methods to Python 3.x methods\n\nWith the removal of Python 2.x we can remove the unittest2 compat\nwrappers and switch to assertCountEqual instead of assertItemsEqual\n\nWe have been able to use them since then, because\ntesttools required unittest2, which still included it. With testtools\nremoving Python 2.7 support [3][4], we will lose support for\nassertItemsEqual, so we should switch to use assertCountEqual.\n\n[1] - https://bugs.python.org/issue17866\n[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd\n[3] - testing-cabal/testtools#286\n[4] - testing-cabal/testtools#277^\n\nChange-Id: Ied2227a482087f4a2dc4e2d9986f9b3b777aa821\n'}]",0,737511,4d58c0bb3d8c889cb634fa38d4ba4b902a883741,15,9,1,6593,,,0,"Switch from unittest2 compat methods to Python 3.x methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277^

Change-Id: Ied2227a482087f4a2dc4e2d9986f9b3b777aa821
",git fetch https://review.opendev.org/openstack/nova refs/changes/11/737511/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/libvirt/test_numa_live_migration.py', 'nova/tests/unit/network/test_network_info.py', 'nova/tests/unit/network/test_neutron.py', 'nova/tests/unit/objects/test_request_spec.py', 'nova/tests/unit/scheduler/test_request_filter.py', 'nova/tests/functional/db/test_aggregate.py', 'nova/tests/unit/compute/test_compute_api.py', 'nova/tests/functional/test_servers_provider_tree.py']",8,4d58c0bb3d8c889cb634fa38d4ba4b902a883741,unittest2," self.assertCountEqual(self.expected_compute_node_traits, self.assertCountEqual( self.assertCountEqual(self.expected_compute_node_traits, self.assertCountEqual(expected_traits, self.assertCountEqual(expected_traits, self.assertCountEqual(expected_traits,"," self.assertItemsEqual(self.expected_compute_node_traits, self.assertItemsEqual( self.assertItemsEqual(self.expected_compute_node_traits, self.assertItemsEqual(expected_traits, self.assertItemsEqual(expected_traits, self.assertItemsEqual(expected_traits,",19,19
openstack%2Fneutron~master~I18ab51422c7de5dc213078e7dce2ea8d38fba3ea,openstack/neutron,master,I18ab51422c7de5dc213078e7dce2ea8d38fba3ea,Increase singlenode tempest jobs' timeout to 10800 seconds,MERGED,2020-07-08 11:20:29.000000000,2020-07-21 14:03:21.000000000,2020-07-21 13:57:28.000000000,"[{'_account_id': 4694}, {'_account_id': 8313}, {'_account_id': 9531}, {'_account_id': 16688}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-08 11:20:29.000000000', 'files': ['zuul.d/tempest-singlenode.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/5a0693da8db2529f5482b559b26a09b603c47d6c', 'message': ""Increase singlenode tempest jobs' timeout to 10800 seconds\n\nIn some cases 2h was not enough so it's better to wait 3h for\ngood results rather than recheck everything after 2h :)\n\nChange-Id: I18ab51422c7de5dc213078e7dce2ea8d38fba3ea\n""}]",0,739955,5a0693da8db2529f5482b559b26a09b603c47d6c,14,6,1,11975,,,0,"Increase singlenode tempest jobs' timeout to 10800 seconds

In some cases 2h was not enough so it's better to wait 3h for
good results rather than recheck everything after 2h :)

Change-Id: I18ab51422c7de5dc213078e7dce2ea8d38fba3ea
",git fetch https://review.opendev.org/openstack/neutron refs/changes/55/739955/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/tempest-singlenode.yaml'],1,5a0693da8db2529f5482b559b26a09b603c47d6c,increase-ci-job-timeout, timeout: 10800 timeout: 10800 timeout: 10800 timeout: 10800 timeout: 10800, timeout: 7800 timeout: 7800 timeout: 7800 timeout: 7800 timeout: 8400,5,5
openstack%2Fglance~stable%2Ftrain~I93dc7c999ff7a180e6b3ff760fa65328b9a883f3,openstack/glance,stable/train,I93dc7c999ff7a180e6b3ff760fa65328b9a883f3,Fix admin docs deploying under HTTPD,MERGED,2020-07-20 21:16:48.000000000,2020-07-21 14:02:59.000000000,2020-07-21 13:57:31.000000000,"[{'_account_id': 9303}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 21:16:48.000000000', 'files': ['releasenotes/notes/fix_httpd_docs-3efff0395f96a94d.yaml', 'doc/source/admin/apache-httpd.rst'], 'web_link': 'https://opendev.org/openstack/glance/commit/b264d5bfb8e877359ff8cf82658c1bca02536f48', 'message': ""Fix admin docs deploying under HTTPD\n\nDuring Pike cycle there was efforts to deploy services under\nApache HTTPD. It became clear very quickly that Glance did not\noperate properly when deployed as bare wsgi app under web\nserver but admin documentation was merged that indicated that\nbeing somehow the preferred method. It was added to the doc\nthat in Pike release there was issues in these models.\n\nThere was never interest nor resources to fix the underlying\nissues but the doc stayed in place indicating that those\nissues could be only Pike related when they in matter of\nfact has got even worse over the time. Due to the fact that\nGlance is even more relying on eventlet than back then it's\ntime to clarify the docs and make clear it's not adviced\ndeployment model, it won't work and there is no itention\nto change that.\n\nChange-Id: I93dc7c999ff7a180e6b3ff760fa65328b9a883f3\nCloses-Bug: #1887994\n(cherry picked from commit 785eefcf7853ccccfa9bec392e2271c3589a3927)\n""}]",0,742028,b264d5bfb8e877359ff8cf82658c1bca02536f48,7,2,1,5202,,,0,"Fix admin docs deploying under HTTPD

During Pike cycle there was efforts to deploy services under
Apache HTTPD. It became clear very quickly that Glance did not
operate properly when deployed as bare wsgi app under web
server but admin documentation was merged that indicated that
being somehow the preferred method. It was added to the doc
that in Pike release there was issues in these models.

There was never interest nor resources to fix the underlying
issues but the doc stayed in place indicating that those
issues could be only Pike related when they in matter of
fact has got even worse over the time. Due to the fact that
Glance is even more relying on eventlet than back then it's
time to clarify the docs and make clear it's not adviced
deployment model, it won't work and there is no itention
to change that.

Change-Id: I93dc7c999ff7a180e6b3ff760fa65328b9a883f3
Closes-Bug: #1887994
(cherry picked from commit 785eefcf7853ccccfa9bec392e2271c3589a3927)
",git fetch https://review.opendev.org/openstack/glance refs/changes/28/742028/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix_httpd_docs-3efff0395f96a94d.yaml', 'doc/source/admin/apache-httpd.rst']",2,b264d5bfb8e877359ff8cf82658c1bca02536f48,fix_adm_doc_train,"In short Glance will not operate properly if tried to be ran without eventlet and introducing another web server into the mix does not make it any better. This exercise failed without ever having proper interest or resources to fix the underlying issues. None of the models deploying Glance as bare wsgi app under some httpd are currently adviced. deploy this there are several patterns, which all fail different ways. This doc mentions three common ways of trying to deploy Glance with Apache HTTPD.This has never worked properly nor it has been of any development focus. The clearest we can say is just don't do it.This has not been doable since Ussuri as we only support Python 3. In theory the same applies as mod_wsgi but even without chunked encoding the code is still broken under uwsgi. specification.","deploy this there are several patterns. This doc shows two common ways of deploying Glance with Apache HTTPD.This is the current recommended way to deploy Glance with Apache HTTP and it is how we deploy Glance for testing every proposed commit to OpenStack. In this deployment method we use the uWSGI server as a web server bound to a random local port. Then we configure apache using mod_proxy to forward all incoming requests on the specified endpoint to that local webserver. This has the advantage of letting apache manage all inbound http connections, but letting uWSGI manage running the python code. It also means when we make changes to Glance code or configuration we don't need to restart all of apache (which may be running other services too) and just need to restart the local uWSGI daemon. The httpd/ directory contains sample files for configuring HTTPD to run Glance under the uWSGI server in this configuration. To use the sample configs simply copy `httpd/uwsgi-glance-api.conf` to the appropriate location for your Apache server. On Debian/Ubuntu systems it is:: /etc/apache2/sites-available/uwsgi-glance-api.conf On Red Hat based systems it is:: /etc/httpd/conf.d/uwsgi-glance-api.conf Enable mod_proxy by running ``sudo a2enmod proxy`` Then on Ubuntu/Debian systems enable the site by creating a symlink from the file in ``sites-available`` to ``sites-enabled``. (This is not required on Red Hat based systems):: ln -s /etc/apache2/sites-available/uwsgi-glance-api.conf /etc/apache2/sites-enabled Start or restart HTTPD to pick up the new configuration. .. NOTE:: Be careful when setting up other proxies/endpoints in the same VirtualHost on Apache HTTPD using. If any are using ``SetEnv proxy-sendcl 1`` then Apache HTTPD will buffer the incoming request to local disk before sending it to glance. This will likely cause problems when running in this configuration and is not necessary. (However, it is necessary if using mod_proxy_uwsgi.) For more details, see the section on :ref:`mod_proxy_uwsgi` below. Now we need to configure and start the uWSGi service. Copy the `httpd/glance-api-uwsgi.ini` file to `/etc/glance`. Update the file to match your system configuration (for example, you'll want to set the number of processes and threads). Install the uWSGI server and start the glance-api server using uWSGI:: sudo pip install uwsgi uwsgi --ini /etc/glance/glance-api-uwsgi.ini .. NOTE:: In the sample configs port 60999 is used, but this doesn't matter and is just a randomly selected number. This is not a contract on the port used for the local uwsgi daemon... WARNING:: Running Glance under HTTPD in this configuration will only work on Python 2 if you use ``Transfer-Encoding: chunked``. Also if running with Python 2 Apache will be buffering the chunked encoding before passing the request on to uWSGI. See bug: https://github.com/unbit/uwsgi/issues/1540 Instead of running uWSGI as a webserver listening on a local port and then having Apache HTTP proxy all the incoming requests with mod_proxy. The normally recommended way of deploying the uWSGI server with Apache HTTPD is to use mod_proxy_uwsgi and set up a local socket file for uWSGI to listen on. Apache will send the requests using the uwsgi protocol over this local socket file. However, there are issues with doing this and using chunked-encoding, so this is not recommended for use with Glance. You can work around these issues by configuring your Apache proxy to buffer the chunked data and send the full content length to the uWSGI server. You do this by adding:: SetEnv proxy-sendcl 1 to the apache config file using mod_proxy_uwsgi. For more details on using mod_proxy_uwsgi see the official docs: http://uwsgi-docs.readthedocs.io/en/latest/Apache.html?highlight=mod_uwsgi_proxy#mod-proxy-uwsgi There are some additional considerations when doing this though. Having Apache locally buffer the chunked data to disk before passing it to uWSGI means you'll need to have sufficient disk space in /tmp (or whatever you set TMPDIR to) to store all the disk files. The other aspect to consider is that this buffering can take some time to write the images to disk. To prevent random failures you'll likely have to increase timeout values in the uWSGI configuration file to ensure uWSGI will wait long enough for this to happen. (Depending on the uploaded image file sizes it may be necessary to set the timeouts to multiple minutes.) specification. (It is not recommended for use with Glance.)",22,92
openstack%2Fnova~stable%2Fqueens~Ifd8b249de3e8f96fa13db252f0abe2b1bd950de0,openstack/nova,stable/queens,Ifd8b249de3e8f96fa13db252f0abe2b1bd950de0,fix scsi disk unit number of the attaching volume when cdrom bus is scsi,MERGED,2020-05-22 12:37:14.000000000,2020-07-21 13:57:34.000000000,2020-07-21 13:57:34.000000000,"[{'_account_id': 4690}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 22076}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-05-22 12:37:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b84549ba85141f4af8b47508c247fb72a5299719', 'message': 'fix scsi disk unit number of the attaching volume when cdrom bus is scsi\n\nFrom Image Meta Properties: hw_cdrom_bus=scsi, and use virtio-scsi mode,\nit will also need a disk address for it. So we need to calculate the\ndisk address when call the function to get the next unit of scsi controller.\n\nCloses-Bug: #1867075\nChange-Id: Ifd8b249de3e8f96fa13db252f0abe2b1bd950de0\nSigned-off-by: Kevin Zhao <kevin.zhao@linaro.org>\n(cherry picked from commit c8d6767cf8baaf3cc81496c83db10c8ae72fce06)\n'}, {'number': 2, 'created': '2020-05-27 18:58:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a3811b52514373f2fca0fc60eec1ebec3bd2fc10', 'message': 'fix scsi disk unit number of the attaching volume when cdrom bus is scsi\n\nFrom Image Meta Properties: hw_cdrom_bus=scsi, and use virtio-scsi mode,\nit will also need a disk address for it. So we need to calculate the\ndisk address when call the function to get the next unit of scsi controller.\n\nCloses-Bug: #1867075\nChange-Id: Ifd8b249de3e8f96fa13db252f0abe2b1bd950de0\nSigned-off-by: Kevin Zhao <kevin.zhao@linaro.org>\n(cherry picked from commit c8d6767cf8baaf3cc81496c83db10c8ae72fce06)\n(cherry picked from commit 11b2b7f0b3a8c09216cd8ebfea8b4cd059605290)\n(cherry picked from commit 86328d11468af66d95587b53ce28f65ed92c46d7)\n(cherry picked from commit 0fe700ab53c33fb258b7746fc16ad5880af2b159)\n'}, {'number': 3, 'created': '2020-07-20 14:53:28.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/041a62d0d5e4806591233e4868711563622eb19e', 'message': 'fix scsi disk unit number of the attaching volume when cdrom bus is scsi\n\nFrom Image Meta Properties: hw_cdrom_bus=scsi, and use virtio-scsi mode,\nit will also need a disk address for it. So we need to calculate the\ndisk address when call the function to get the next unit of scsi controller.\n\nCloses-Bug: #1867075\nChange-Id: Ifd8b249de3e8f96fa13db252f0abe2b1bd950de0\nSigned-off-by: Kevin Zhao <kevin.zhao@linaro.org>\n(cherry picked from commit c8d6767cf8baaf3cc81496c83db10c8ae72fce06)\n(cherry picked from commit 11b2b7f0b3a8c09216cd8ebfea8b4cd059605290)\n(cherry picked from commit 86328d11468af66d95587b53ce28f65ed92c46d7)\n(cherry picked from commit 3b2c6ccf261ddb810473954559fa1dd1454e9f09)\n'}]",0,730313,041a62d0d5e4806591233e4868711563622eb19e,26,10,3,11604,,,0,"fix scsi disk unit number of the attaching volume when cdrom bus is scsi

From Image Meta Properties: hw_cdrom_bus=scsi, and use virtio-scsi mode,
it will also need a disk address for it. So we need to calculate the
disk address when call the function to get the next unit of scsi controller.

Closes-Bug: #1867075
Change-Id: Ifd8b249de3e8f96fa13db252f0abe2b1bd950de0
Signed-off-by: Kevin Zhao <kevin.zhao@linaro.org>
(cherry picked from commit c8d6767cf8baaf3cc81496c83db10c8ae72fce06)
(cherry picked from commit 11b2b7f0b3a8c09216cd8ebfea8b4cd059605290)
(cherry picked from commit 86328d11468af66d95587b53ce28f65ed92c46d7)
(cherry picked from commit 3b2c6ccf261ddb810473954559fa1dd1454e9f09)
",git fetch https://review.opendev.org/openstack/nova refs/changes/13/730313/2 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",2,b84549ba85141f4af8b47508c247fb72a5299719,bug/1867075," def test_get_scsi_controller_next_unit_from_guest(self): xml = """""" <domain type='kvm'> <devices> <disk type='file' device='disk'> <target dev='sda' bus='scsi'/> <address type='drive' controller='0' bus='0' target='0' unit='0'/> </disk> <disk type='file' device='disk'> <target dev='vda' bus='virtio'/> </disk> <disk type='file' device='cdrom'> <target dev='sdc' bus='scsi'/> <address type='drive' controller='0' bus='0' target='0' unit='1'/> </disk> </devices> </domain> """""" self._test_get_scsi_controller_next_unit_from_guest(xml, 2) def test_get_scsi_controller_next_unit_from_guest_no_scsi(self): xml = """""" <domain type='kvm'> <devices> <disk type='file' device='disk'> <target dev='vda' bus='virtio'/> </disk> <disk type='file' device='disk'> <target dev='vdb' bus='virtio'/> </disk> </devices> </domain> """""" self._test_get_scsi_controller_next_unit_from_guest(xml, 0) @mock.patch.object(libvirt_guest.Guest, ""get_xml_desc"") def _test_get_scsi_controller_next_unit_from_guest(self, xml, expect_num, mock_get_xml_desc): mock_get_xml_desc.return_value = xml drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), True) guest = libvirt_guest.Guest(FakeVirtDomain()) i = drvr._get_scsi_controller_next_unit(guest) self.assertEqual(expect_num, i) ",,51,5
openstack%2Fopenstack-ansible-os_ceilometer~master~I497db7388c477bb39439e4d6c8e71f691d58715f,openstack/openstack-ansible-os_ceilometer,master,I497db7388c477bb39439e4d6c8e71f691d58715f,Add centos-8 support,ABANDONED,2020-07-06 05:21:34.000000000,2020-07-21 13:28:23.000000000,,"[{'_account_id': 22348}, {'_account_id': 28752}]","[{'number': 1, 'created': '2020-07-06 05:21:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ceilometer/commit/1db0804d1afabd40980159557a961412d1d33ac4', 'message': 'Add centos-8 support\n\nRenaming redhat-7.yml to redhat.yml for centos-8 support.\n\nChange-Id: I497db7388c477bb39439e4d6c8e71f691d58715f\n'}, {'number': 2, 'created': '2020-07-07 05:24:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ceilometer/commit/e8a83598444456a09c799ffd5b19259c0c7d648f', 'message': 'Add centos-8 support\n\nRenaming redhat-7.yml to redhat.yml for centos-8 support.\n\nChange-Id: I497db7388c477bb39439e4d6c8e71f691d58715f\n'}, {'number': 3, 'created': '2020-07-19 01:37:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ceilometer/commit/83d100a55c8a6b6f48e0d8c76ae0ef0296d49020', 'message': 'Add centos-8 support\n\nDepends-On: https://review.opendev.org/740513\nDepends-On: https://review.opendev.org/739401\nChange-Id: I497db7388c477bb39439e4d6c8e71f691d58715f\n'}, {'number': 4, 'created': '2020-07-21 04:52:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ceilometer/commit/59f631e1446cfbc1c8b1eb794c6647d4d76cc39d', 'message': 'Add centos-8 support\n\nsplit os distribution file to handle libvirt libraries condition.\n\nDepends-On: https://review.opendev.org/740513\nDepends-On: https://review.opendev.org/739401\nChange-Id: I497db7388c477bb39439e4d6c8e71f691d58715f\n'}, {'number': 5, 'created': '2020-07-21 04:57:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ceilometer/commit/758023d8eddbd1c0f2d19c7602c3b1a4a89f7980', 'message': 'Add centos-8 support\n\nsplit os distribution file to handle libvirt libraries condition.\n\nDepends-On: https://review.opendev.org/740513\nDepends-On: https://review.opendev.org/739401\nChange-Id: I497db7388c477bb39439e4d6c8e71f691d58715f\n'}, {'number': 6, 'created': '2020-07-21 05:10:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ceilometer/commit/4e361adaea353aefb2957a0f788f2ce6136ee195', 'message': 'Add centos-8 support\n\nsplit os distribution file to handle libvirt libraries condition..\n\nDepends-On: https://review.opendev.org/740513\nDepends-On: https://review.opendev.org/739401\nChange-Id: I497db7388c477bb39439e4d6c8e71f691d58715f\n'}, {'number': 7, 'created': '2020-07-21 05:11:12.000000000', 'files': ['vars/redhat-8.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_ceilometer/commit/1b5086e03ea2590e0253660d6f348c65f787df9b', 'message': 'Add centos-8 support\n\nsplit os distribution file to handle libvirt libraries condition.\n\nDepends-On: https://review.opendev.org/740513\nDepends-On: https://review.opendev.org/739401\nChange-Id: I497db7388c477bb39439e4d6c8e71f691d58715f\n'}]",0,739400,1b5086e03ea2590e0253660d6f348c65f787df9b,25,2,7,28752,,,0,"Add centos-8 support

split os distribution file to handle libvirt libraries condition.

Depends-On: https://review.opendev.org/740513
Depends-On: https://review.opendev.org/739401
Change-Id: I497db7388c477bb39439e4d6c8e71f691d58715f
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_ceilometer refs/changes/00/739400/6 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat.yml'],1,1db0804d1afabd40980159557a961412d1d33ac4,osa/el8," - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('python-devel', 'python36-devel') }}"" - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('systemd-python', 'python3-systemd') }}"" ", - systemd-devel - systemd-python,3,2
openstack%2Fbifrost~master~I03a901436c0c27c6c74b4285f72807155812e632,openstack/bifrost,master,I03a901436c0c27c6c74b4285f72807155812e632,Replace ANSIBLE_COLLECTIONS_PATHS var with symlink,ABANDONED,2020-07-21 13:24:15.000000000,2020-07-21 13:25:29.000000000,,[],"[{'number': 1, 'created': '2020-07-21 13:24:15.000000000', 'files': ['scripts/env-setup.sh'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/bd789f9295127f57a386ee59f8bca0a82311bb52', 'message': 'Replace ANSIBLE_COLLECTIONS_PATHS var with symlink\n\nBifrost requires Ansible Collections for certain tasks including\nenrollment of nodes. In order for bifrost playbooks to be able to\nutilise Ansible Collections, it is required to either export\nANSIBLE_COLLECTIONS_PATHS environment variable or to create a\nsymbolic link from Ansible Collections installation directory to\nbifrost playbook subdirectory. This change replaces the variable\nbased approach with the symbolic link based approach to improve\nresiliency and flexibility.\n\nChange-Id: I03a901436c0c27c6c74b4285f72807155812e632\n'}]",0,742190,bd789f9295127f57a386ee59f8bca0a82311bb52,2,0,1,32177,,,0,"Replace ANSIBLE_COLLECTIONS_PATHS var with symlink

Bifrost requires Ansible Collections for certain tasks including
enrollment of nodes. In order for bifrost playbooks to be able to
utilise Ansible Collections, it is required to either export
ANSIBLE_COLLECTIONS_PATHS environment variable or to create a
symbolic link from Ansible Collections installation directory to
bifrost playbook subdirectory. This change replaces the variable
based approach with the symbolic link based approach to improve
resiliency and flexibility.

Change-Id: I03a901436c0c27c6c74b4285f72807155812e632
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/90/742190/1 && git format-patch -1 --stdout FETCH_HEAD,['scripts/env-setup.sh'],1,bd789f9295127f57a386ee59f8bca0a82311bb52,,"# Symlink Collections to the playbook directory. This removes the need of setting # ANSIBLE_COLLECTIONS_PATHS environment variable if [ ! -L ""$(dirname $0)/../playbooks/collections"" ]; then echo ""Creating a symbolic link to ansible collections in bifrost playbook directory"" ln -s ${ANSIBLE_COLLECTIONS_PATHS} ""$(dirname $0)/../playbooks/collections"" fi",,6,0
openstack%2Fopenstack-ansible-os_glance~stable%2Fussuri~I0b2e2e39040fd0daef04724f94a39f2d11e4d105,openstack/openstack-ansible-os_glance,stable/ussuri,I0b2e2e39040fd0daef04724f94a39f2d11e4d105,Cleanup glance-registry service,ABANDONED,2020-07-21 12:58:49.000000000,2020-07-21 13:17:55.000000000,,[{'_account_id': 28619}],"[{'number': 1, 'created': '2020-07-21 12:58:49.000000000', 'files': ['tasks/glance_post_install.yml', 'tasks/glance_install.yml', 'tests/inventory', 'releasenotes/notes/glance_registry-0a1a1f8c60f5a368.yaml', 'templates/glance-cache.conf.j2', 'README.rst', 'handlers/main.yml', 'templates/glance-api.conf.j2', 'defaults/main.yml', 'vars/main.yml', 'doc/source/index.rst', 'vars/redhat.yml', 'templates/glance-registry.conf.j2', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_glance/commit/e5c936a17a20c565ef2aafd2c7b36f6a931cfed2', 'message': 'Cleanup glance-registry service\n\nGlance-registry service has been removed in V cycle with [1]\n\nWe do all necessary cleanup to fully remove service deployment.\n\n[1] https://review.opendev.org/738671/\n\nChange-Id: I0b2e2e39040fd0daef04724f94a39f2d11e4d105\n(cherry picked from commit ed736fd783a60d583caf4727e15fe813e8d78757)\n'}]",0,742179,e5c936a17a20c565ef2aafd2c7b36f6a931cfed2,3,1,1,25023,,,0,"Cleanup glance-registry service

Glance-registry service has been removed in V cycle with [1]

We do all necessary cleanup to fully remove service deployment.

[1] https://review.opendev.org/738671/

Change-Id: I0b2e2e39040fd0daef04724f94a39f2d11e4d105
(cherry picked from commit ed736fd783a60d583caf4727e15fe813e8d78757)
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_glance refs/changes/79/742179/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/glance_post_install.yml', 'tasks/glance_install.yml', 'tests/inventory', 'releasenotes/notes/glance_registry-0a1a1f8c60f5a368.yaml', 'templates/glance-cache.conf.j2', 'README.rst', 'handlers/main.yml', 'templates/glance-api.conf.j2', 'defaults/main.yml', 'vars/main.yml', 'doc/source/index.rst', 'vars/redhat.yml', 'templates/glance-registry.conf.j2', 'tox.ini']",14,e5c936a17a20c565ef2aafd2c7b36f6a931cfed2,,,"[testenv:v2_registry_enabled] setenv = {[testenv]setenv} ANSIBLE_PARAMETERS=-e glance_enable_v2_registry=yes commands = bash -c ""{toxinidir}/tests/common/test-ansible-functional.sh"" ",5,178
openstack%2Fpython-tripleoclient~master~I8a67554f268042d2cceebf3ec3b1f098f001bbfd,openstack/python-tripleoclient,master,I8a67554f268042d2cceebf3ec3b1f098f001bbfd,Ensure --limit option takes precedence over skiplist,MERGED,2020-07-16 08:56:48.000000000,2020-07-21 13:11:59.000000000,2020-07-21 02:01:58.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-16 08:56:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/ae8e42e7e69f1d0bbb45c6a293918aba3be12056', 'message': ""Fix building --limit with skipped hosts\n\nAnsible limit it needs a ':' separator in the beginning.\n\nChange-Id: I8a67554f268042d2cceebf3ec3b1f098f001bbfd\n""}, {'number': 2, 'created': '2020-07-16 10:37:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/39319193ef499f4015f40a92b06e6e090f131128', 'message': ""Fix building --limit with skipped hosts\n\nAnsible limit it needs a ':' separator in the beginning. Also\nexcludes blacklisted nodes from --limit during scale-down.\n\nChange-Id: I8a67554f268042d2cceebf3ec3b1f098f001bbfd\n""}, {'number': 3, 'created': '2020-07-16 10:39:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/257c3f2c1b8edd5c5f47b94db1ae790257950ca8', 'message': ""Fix building --limit with skipped hosts\n\nAnsible limit needs a ':' separator in the beginning when adding\nblacklisted nodes which was missing. Also excludes blacklisted\nnodes from --limit during scale-down.\n\nChange-Id: I8a67554f268042d2cceebf3ec3b1f098f001bbfd\n""}, {'number': 4, 'created': '2020-07-17 01:45:34.000000000', 'files': ['tripleoclient/workflows/deployment.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/a39424c19e757a622e87f71731c34dfd6434983a', 'message': ""Ensure --limit option takes precedence over skiplist\n\nNow that we've decided to ignore skiplist when limit\nis specified, ensure we do that in master/ussuri.\n\nChange-Id: I8a67554f268042d2cceebf3ec3b1f098f001bbfd\nRelated-Bug: #1857298\n""}]",0,741406,a39424c19e757a622e87f71731c34dfd6434983a,13,3,4,8833,,,0,"Ensure --limit option takes precedence over skiplist

Now that we've decided to ignore skiplist when limit
is specified, ensure we do that in master/ussuri.

Change-Id: I8a67554f268042d2cceebf3ec3b1f098f001bbfd
Related-Bug: #1857298
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/06/741406/4 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/workflows/deployment.py', 'tripleoclient/tests/v1/overcloud_node/test_overcloud_node.py']",2,ae8e42e7e69f1d0bbb45c6a293918aba3be12056,," limit_hosts='overcast-controller-1:overcast-compute-0:',"," limit_hosts='overcast-controller-1:overcast-compute-0',",2,2
openstack%2Ftripleo-common~master~Ia29944a07900ff36d5d4a5826cdd076d11864962,openstack/tripleo-common,master,Ia29944a07900ff36d5d4a5826cdd076d11864962,Retry fetching {{ deployment_uuid }}.notify.json file,MERGED,2020-07-16 18:39:38.000000000,2020-07-21 13:11:41.000000000,2020-07-21 02:01:46.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-16 18:39:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/a5b538ad3c546e384089753315f14b46637d147f', 'message': ""WIP - retry fetching {{ deployment_uuid }}.notify.json file\n\nDuring a deployment, there is a small chance that right after\n55-heat-config run, the {{ deployment_uuid }}.notify.json file doesn't\nexist yet on the filesystem.\n\nThis patch will retry to fetch the file during 20s and return an error\nmessage if it can't be found.\n\nChange-Id: Ia29944a07900ff36d5d4a5826cdd076d11864962\nCloses-Bug: #1887846\n""}, {'number': 2, 'created': '2020-07-17 15:02:26.000000000', 'files': ['tripleo_common/templates/deployments.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/e6634751e5bb127e4513bb7fc6ce51ca4770a7e9', 'message': ""Retry fetching {{ deployment_uuid }}.notify.json file\n\nDuring a deployment, there is a small chance that right after\n55-heat-config run, the {{ deployment_uuid }}.notify.json file doesn't\nexist yet on the filesystem.\n\nThis patch will retry to fetch the file during 20s and return an error\nmessage if it can't be found.\n\nChange-Id: Ia29944a07900ff36d5d4a5826cdd076d11864962\nCloses-Bug: #1887846\n""}]",2,741520,e6634751e5bb127e4513bb7fc6ce51ca4770a7e9,17,5,2,3153,,,0,"Retry fetching {{ deployment_uuid }}.notify.json file

During a deployment, there is a small chance that right after
55-heat-config run, the {{ deployment_uuid }}.notify.json file doesn't
exist yet on the filesystem.

This patch will retry to fetch the file during 20s and return an error
message if it can't be found.

Change-Id: Ia29944a07900ff36d5d4a5826cdd076d11864962
Closes-Bug: #1887846
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/20/741520/2 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/templates/deployments.yaml'],1,a5b538ad3c546e384089753315f14b46637d147f,heat-config," timeout=20 while [ ! -f /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json ]; do if [ ""$timeout"" == 0 ]; then echo ""ERROR: Timeout while waiting for the file /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json"" exit 1 fi sleep 1 ((timeout--)) done timeout=20 while [ ! -f /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json ]; do if [ ""$timeout"" == 0 ]; then echo ""ERROR: Timeout while waiting for the file /var/lib/heat-config/deployed/{{ deployment_uuid }}.notify.json"" exit 1 fi sleep 1 ((timeout--)) done",,20,0
openstack%2Fmanila~master~I67ac549e790322c56d02db4424ec01a5449e6633,openstack/manila,master,I67ac549e790322c56d02db4424ec01a5449e6633,Update LVM volume extend,MERGED,2020-07-10 15:18:54.000000000,2020-07-21 13:09:06.000000000,2020-07-21 13:06:44.000000000,"[{'_account_id': 9003}, {'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 16643}, {'_account_id': 21884}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-10 15:18:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/84d1129318270b9f4b9f1f7c6d47178593cda3d2', 'message': 'DNM - experiment with\n\nhaving LVM volume extend\n - *not* skip the fsck\n - *do* the filesystem resize itself\n\nChange-Id: I67ac549e790322c56d02db4424ec01a5449e6633\n'}, {'number': 2, 'created': '2020-07-10 18:13:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/28498b0898c8c87d475f36778d42f60ac599f9f9', 'message': 'DNM - experiment with\n\nhaving LVM volume extend\n - *not* skip the fsck\n - *do* the filesystem resize itself\n\nChange-Id: I67ac549e790322c56d02db4424ec01a5449e6633\n'}, {'number': 3, 'created': '2020-07-11 13:04:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/61ced064d8709a46132b53e489065eb7b1122efb', 'message': 'DNM - experiment with\n\nhaving LVM volume extend\n - *not* skip the fsck\n - *do* the filesystem resize itself\n\nChange-Id: I67ac549e790322c56d02db4424ec01a5449e6633\n'}, {'number': 4, 'created': '2020-07-13 17:08:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/a4d0b66e7c762d987f82a869298049c41570c04c', 'message': 'Update LVM volume extend\n\n- do *not* skip fsck when extending\n- have extend resize the filesystem itself\n  rather than making a separate execution\n  of ``resize2fs``\n\nChange-Id: I67ac549e790322c56d02db4424ec01a5449e6633\n'}, {'number': 5, 'created': '2020-07-15 16:53:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/2c00187d31d5ad6dab75bb8326fdf4037a31f06b', 'message': 'Update LVM volume extend\n\n- do *not* skip fsck when extending\n- have extend resize the filesystem itself\n  rather than making a separate execution\n  of ``resize2fs``\n\nCloses-bug: #1887694\nChange-Id: I67ac549e790322c56d02db4424ec01a5449e6633\n'}, {'number': 6, 'created': '2020-07-21 04:47:06.000000000', 'files': ['manila/tests/share/drivers/test_lvm.py', 'manila/share/drivers/lvm.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/c94e1deff1bde93d4167ceeb9dafc494d12cd60c', 'message': 'Update LVM volume extend\n\n- do *not* skip fsck when extending\n- have extend resize the filesystem itself\n  rather than making a separate execution\n  of ``resize2fs``\n\nCloses-bug: #1887694\nChange-Id: I67ac549e790322c56d02db4424ec01a5449e6633\n'}]",0,740492,c94e1deff1bde93d4167ceeb9dafc494d12cd60c,53,10,6,9003,,,0,"Update LVM volume extend

- do *not* skip fsck when extending
- have extend resize the filesystem itself
  rather than making a separate execution
  of ``resize2fs``

Closes-bug: #1887694
Change-Id: I67ac549e790322c56d02db4424ec01a5449e6633
",git fetch https://review.opendev.org/openstack/manila refs/changes/92/740492/1 && git format-patch -1 --stdout FETCH_HEAD,['manila/share/drivers/lvm.py'],1,84d1129318270b9f4b9f1f7c6d47178593cda3d2,," cmd = ['lvextend', '-L', '%sG' % size, '-r', device_name]"," cmd = ['lvextend', '-L', '%sG' % size, '-n', device_name] self._execute('resize2fs', device_name, run_as_root=True)",1,2
openstack%2Fnova~stable%2Fqueens~Id687e11e235fd6c2f99bb647184310dfdce9a08d,openstack/nova,stable/queens,Id687e11e235fd6c2f99bb647184310dfdce9a08d,libvirt: Do not reraise DiskNotFound exceptions during resize,MERGED,2019-05-21 12:08:15.000000000,2020-07-21 13:01:27.000000000,2019-06-28 22:00:03.000000000,"[{'_account_id': 6062}, {'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 12898}, {'_account_id': 14595}, {'_account_id': 16128}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 30448}]","[{'number': 1, 'created': '2019-05-21 12:08:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/26c6e18db4f45c8623a35f71e4c6ef25df761bcf', 'message': ""libvirt: Do not reraise DiskNotFound exceptions during resize\n\nWhen an instance has VERIFY_RESIZE status, the instance disk on the\nsource compute host has moved to <instance_path>/<instance_uuid>_resize\nfolder, which leads to disk not found errors if the update available\nresource periodic task on the source compute runs before resize is\nactually confirmed.\n\nIcec2769bf42455853cbe686fb30fda73df791b25 almost fixed this issue but it\nwill only set reraise to False when task_state is not None, that isn't\nthe case when an instance is resized but resize is not yet confirmed.\nThis patch adds a condition based on vm_state to ensure we don't\nreraise DiskNotFound exceptions while resize is not confirmed.\n\nCloses-Bug: 1774249\nCo-Authored-By: Vladyslav Drok <vdrok@mirantis.com>\nChange-Id: Id687e11e235fd6c2f99bb647184310dfdce9a08d\n(cherry picked from commit 966192704c20d1b4e9faf384c8dafac8ea6e06ea)\n(cherry picked from commit f1280ab849d20819791f7c4030f570a917d3e91d)\n(cherry picked from commit fd5c45473823105d8572d7940980163c6f09169c)\n""}, {'number': 2, 'created': '2019-06-28 11:21:28.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/d3bdeb26155c2d3b53850b790d3800a2dd78cada', 'message': ""libvirt: Do not reraise DiskNotFound exceptions during resize\n\nWhen an instance has VERIFY_RESIZE status, the instance disk on the\nsource compute host has moved to <instance_path>/<instance_uuid>_resize\nfolder, which leads to disk not found errors if the update available\nresource periodic task on the source compute runs before resize is\nactually confirmed.\n\nIcec2769bf42455853cbe686fb30fda73df791b25 almost fixed this issue but it\nwill only set reraise to False when task_state is not None, that isn't\nthe case when an instance is resized but resize is not yet confirmed.\nThis patch adds a condition based on vm_state to ensure we don't\nreraise DiskNotFound exceptions while resize is not confirmed.\n\nCloses-Bug: 1774249\nCo-Authored-By: Vladyslav Drok <vdrok@mirantis.com>\nChange-Id: Id687e11e235fd6c2f99bb647184310dfdce9a08d\n(cherry picked from commit 966192704c20d1b4e9faf384c8dafac8ea6e06ea)\n(cherry picked from commit f1280ab849d20819791f7c4030f570a917d3e91d)\n(cherry picked from commit fd5c45473823105d8572d7940980163c6f09169c)\n""}]",0,660363,d3bdeb26155c2d3b53850b790d3800a2dd78cada,18,9,2,10135,,,0,"libvirt: Do not reraise DiskNotFound exceptions during resize

When an instance has VERIFY_RESIZE status, the instance disk on the
source compute host has moved to <instance_path>/<instance_uuid>_resize
folder, which leads to disk not found errors if the update available
resource periodic task on the source compute runs before resize is
actually confirmed.

Icec2769bf42455853cbe686fb30fda73df791b25 almost fixed this issue but it
will only set reraise to False when task_state is not None, that isn't
the case when an instance is resized but resize is not yet confirmed.
This patch adds a condition based on vm_state to ensure we don't
reraise DiskNotFound exceptions while resize is not confirmed.

Closes-Bug: 1774249
Co-Authored-By: Vladyslav Drok <vdrok@mirantis.com>
Change-Id: Id687e11e235fd6c2f99bb647184310dfdce9a08d
(cherry picked from commit 966192704c20d1b4e9faf384c8dafac8ea6e06ea)
(cherry picked from commit f1280ab849d20819791f7c4030f570a917d3e91d)
(cherry picked from commit fd5c45473823105d8572d7940980163c6f09169c)
",git fetch https://review.opendev.org/openstack/nova refs/changes/63/660363/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",2,26c6e18db4f45c8623a35f71e4c6ef25df761bcf,bug/1774249," vm_state=vm_states.ACTIVE, def test_disk_over_committed_size_total_disk_not_found_ignore_task_state( objects.Instance(uuid=uuids.instance, task_state=None, vm_state=vm_states.RESIZED)])) def test_disk_over_committed_size_total_disk_not_found_ignore_vmstate( self, mock_get, mock_bdms, mock_get_disk_info, mock_list_domains): """"""Tests that we handle DiskNotFound gracefully for an instance that is resized but resize is not confirmed yet. """""" mock_dom = mock.Mock() mock_dom.XMLDesc.return_value = ""<domain/>"" mock_dom.UUIDString.return_value = uuids.instance mock_list_domains.return_value = [mock_dom] drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) self.assertEqual(0, drvr._get_disk_over_committed_size_total()) @mock.patch('nova.virt.libvirt.host.Host.list_instance_domains') @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.' '_get_instance_disk_info_from_config', side_effect=exception.DiskNotFound(location='/opt/stack/foo')) @mock.patch('nova.objects.BlockDeviceMappingList.bdms_by_instance_uuid', return_value=objects.BlockDeviceMappingList()) @mock.patch('nova.objects.InstanceList.get_by_filters', return_value=objects.InstanceList(objects=[ objects.Instance(uuid=uuids.instance, vm_state=vm_states.ACTIVE, task_state=None)]))"," def test_disk_over_committed_size_total_disk_not_found_ignore( objects.Instance(uuid=uuids.instance, task_state=None)]))",37,5
openstack%2Fopenstack-ansible-os_glance~master~I0b2e2e39040fd0daef04724f94a39f2d11e4d105,openstack/openstack-ansible-os_glance,master,I0b2e2e39040fd0daef04724f94a39f2d11e4d105,Cleanup glance-registry service,MERGED,2020-07-07 04:30:28.000000000,2020-07-21 12:58:49.000000000,2020-07-08 13:40:26.000000000,"[{'_account_id': 13095}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28522}, {'_account_id': 28619}]","[{'number': 1, 'created': '2020-07-07 04:30:28.000000000', 'files': ['tasks/glance_post_install.yml', 'tasks/glance_install.yml', 'tests/inventory', 'releasenotes/notes/glance_registry-0a1a1f8c60f5a368.yaml', 'templates/glance-cache.conf.j2', 'README.rst', 'handlers/main.yml', 'templates/glance-api.conf.j2', 'defaults/main.yml', 'vars/main.yml', 'doc/source/index.rst', 'vars/redhat.yml', 'templates/glance-registry.conf.j2', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_glance/commit/ed736fd783a60d583caf4727e15fe813e8d78757', 'message': 'Cleanup glance-registry service\n\nGlance-registry service has been removed in V cycle with [1]\n\nWe do all necessary cleanup to fully remove service deployment.\n\n[1] https://review.opendev.org/738671/\n\nChange-Id: I0b2e2e39040fd0daef04724f94a39f2d11e4d105\n'}]",0,739656,ed736fd783a60d583caf4727e15fe813e8d78757,12,5,1,28619,,,0,"Cleanup glance-registry service

Glance-registry service has been removed in V cycle with [1]

We do all necessary cleanup to fully remove service deployment.

[1] https://review.opendev.org/738671/

Change-Id: I0b2e2e39040fd0daef04724f94a39f2d11e4d105
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_glance refs/changes/56/739656/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/glance_post_install.yml', 'tasks/glance_install.yml', 'tests/inventory', 'releasenotes/notes/glance_registry-0a1a1f8c60f5a368.yaml', 'templates/glance-cache.conf.j2', 'README.rst', 'handlers/main.yml', 'templates/glance-api.conf.j2', 'defaults/main.yml', 'vars/main.yml', 'doc/source/index.rst', 'vars/redhat.yml', 'templates/glance-registry.conf.j2', 'tox.ini']",14,ed736fd783a60d583caf4727e15fe813e8d78757,,,"[testenv:v2_registry_enabled] setenv = {[testenv]setenv} ANSIBLE_PARAMETERS=-e glance_enable_v2_registry=yes commands = bash -c ""{toxinidir}/tests/common/test-ansible-functional.sh"" ",5,178
openstack%2Fmonasca-api~master~Ic6f7d79d944c21ea777038a6c43f71fc66ad588b,openstack/monasca-api,master,Ic6f7d79d944c21ea777038a6c43f71fc66ad588b,Fix typo in http_check,MERGED,2020-07-20 12:11:14.000000000,2020-07-21 12:57:19.000000000,2020-07-20 15:11:35.000000000,"[{'_account_id': 16222}, {'_account_id': 16957}, {'_account_id': 22348}, {'_account_id': 26141}, {'_account_id': 28062}]","[{'number': 1, 'created': '2020-07-20 12:11:14.000000000', 'files': ['devstack/files/monasca-agent/http_check.yaml'], 'web_link': 'https://opendev.org/openstack/monasca-api/commit/9d8ecbd2d97c394810947a1dc74b9aca458a961d', 'message': 'Fix typo in http_check\n\nThis typo brakes the http_check metrics collection in devstack.\n\nChange-Id: Ic6f7d79d944c21ea777038a6c43f71fc66ad588b\n'}]",0,741924,9d8ecbd2d97c394810947a1dc74b9aca458a961d,12,5,1,28062,,,0,"Fix typo in http_check

This typo brakes the http_check metrics collection in devstack.

Change-Id: Ic6f7d79d944c21ea777038a6c43f71fc66ad588b
",git fetch https://review.opendev.org/openstack/monasca-api refs/changes/24/741924/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/files/monasca-agent/http_check.yaml'],1,9d8ecbd2d97c394810947a1dc74b9aca458a961d,, - name: kibana,- name: kibana,1,1
openstack%2Fnova~stable%2Ftrain~Ic7d1f497e696d5d9e0dfc82605f0ab5d0d3e62d4,openstack/nova,stable/train,Ic7d1f497e696d5d9e0dfc82605f0ab5d0d3e62d4,fixes broken shared live migration of a vm with a vif,ABANDONED,2020-07-20 15:04:03.000000000,2020-07-21 12:56:29.000000000,,"[{'_account_id': 9732}, {'_account_id': 10068}, {'_account_id': 10135}, {'_account_id': 10234}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-07-20 15:04:03.000000000', 'files': ['nova/objects/migrate_data.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/46788ac9a761960d5d8ac64dfe900290bd88352c', 'message': ""fixes broken shared live migration of a vm with a vif\n\ntarget side calls get_dest_vif member during initialization\nstage of migration on a VIFMigrateData instance prepared locally.\nthere is nobody to set the vif_type attribute value to that\ninstance earlier thus the migration fails with an exception at the\ntarget.\nfortunatelly, the value is available in the source_vif object which\nis set definitely because of the test inside the get_dest_vif function.\nresult value of the function is a deep copy of the source_vif object\nthen several attributes are replaced with the values from the\nVIFMigrateData instance.\nlet's skip accesses to unset VIFMigrateData instance attributes\nand rest with the values from the source_vif.\n\nChange-Id: Ic7d1f497e696d5d9e0dfc82605f0ab5d0d3e62d4\n""}]",0,741963,46788ac9a761960d5d8ac64dfe900290bd88352c,8,7,1,32220,,,0,"fixes broken shared live migration of a vm with a vif

target side calls get_dest_vif member during initialization
stage of migration on a VIFMigrateData instance prepared locally.
there is nobody to set the vif_type attribute value to that
instance earlier thus the migration fails with an exception at the
target.
fortunatelly, the value is available in the source_vif object which
is set definitely because of the test inside the get_dest_vif function.
result value of the function is a deep copy of the source_vif object
then several attributes are replaced with the values from the
VIFMigrateData instance.
let's skip accesses to unset VIFMigrateData instance attributes
and rest with the values from the source_vif.

Change-Id: Ic7d1f497e696d5d9e0dfc82605f0ab5d0d3e62d4
",git fetch https://review.opendev.org/openstack/nova refs/changes/63/741963/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/objects/migrate_data.py'],1,46788ac9a761960d5d8ac64dfe900290bd88352c,," if hasattr(self, obj_base.get_attrname('vif_type')): vif['type'] = self.vif_type if hasattr(self, obj_base.get_attrname('vnic_type')): vif['vnic_type'] = self.vnic_type if hasattr(self, obj_base.get_attrname('profile')): vif['profile'] = self.profile if hasattr(self, obj_base.get_attrname('vif_details')): vif['details'] = self.vif_details ", vif['type'] = self.vif_type vif['vnic_type'] = self.vnic_type vif['profile'] = self.profile vif['details'] = self.vif_details,9,4
openstack%2Fmonasca-persister~master~I300958e1e945e5236b01f4e50cb01c18468cc524,openstack/monasca-persister,master,I300958e1e945e5236b01f4e50cb01c18468cc524,Set legacy_kafka_client_enabled = False on default,MERGED,2020-07-14 13:51:36.000000000,2020-07-21 12:53:14.000000000,2020-07-21 12:50:43.000000000,"[{'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 28062}]","[{'number': 1, 'created': '2020-07-14 13:51:36.000000000', 'files': ['releasenotes/notes/disable-legacy-kafka-client-ff7181b387aaf536.yaml', 'monasca_persister/conf/kafka_common.py'], 'web_link': 'https://opendev.org/openstack/monasca-persister/commit/709318c3bbeff891664c6a0d98b47c22dd336990', 'message': 'Set legacy_kafka_client_enabled = False on default\n\nWe change the default value of kafka_common.legacy_kafka_client_enabled\nfrom True to False. The use of new Confluent Kafka client is\nrecommended.\n\nChange-Id: I300958e1e945e5236b01f4e50cb01c18468cc524\nStory: 2007924\nTask: 40340\n'}]",0,740966,709318c3bbeff891664c6a0d98b47c22dd336990,10,4,1,16222,,,0,"Set legacy_kafka_client_enabled = False on default

We change the default value of kafka_common.legacy_kafka_client_enabled
from True to False. The use of new Confluent Kafka client is
recommended.

Change-Id: I300958e1e945e5236b01f4e50cb01c18468cc524
Story: 2007924
Task: 40340
",git fetch https://review.opendev.org/openstack/monasca-persister refs/changes/66/740966/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/disable-legacy-kafka-client-ff7181b387aaf536.yaml', 'monasca_persister/conf/kafka_common.py']",2,709318c3bbeff891664c6a0d98b47c22dd336990,kafka-client, default=False), default=True),7,1
openstack%2Fpaunch~stable%2Fussuri~Ie2cb3bb63138b70019f86b88066697e98e333669,openstack/paunch,stable/ussuri,Ie2cb3bb63138b70019f86b88066697e98e333669,Make sure failed containers get stopped by systemd,MERGED,2020-06-24 09:44:02.000000000,2020-07-21 12:48:31.000000000,2020-07-21 12:15:47.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-24 09:44:02.000000000', 'files': ['paunch/tests/test_utils_systemd.py', 'paunch/utils/systemd.py'], 'web_link': 'https://opendev.org/openstack/paunch/commit/b8f412d81cf3bbbb4b3d0a420d76e91a3c620799', 'message': 'Make sure failed containers get stopped by systemd\n\nWhen the main PID (i.e., common) of a container is killed because of\nsome reasons, systemd won\'t execute ExecStop command.\nCurrent podman doesn\'t detect this failure ang recognize that container\nis still running and this causes failure when systemd tries to restart\nthe container.\n\nThis patch introduces ExecStopPost configuration into systemd unit\nfiles so that stop operation is executed even when a container fails\nbecause of killed main process. The stale container should be cleaned\nup by ExecStopPost task before systemd tries to restart it.\n\nNote that the similar change has been introcuded to ""podman generate\nsystemd"" command already[1].\n[1] https://github.com/containers/libpod/commit/e5c3432944245a740ed443803c654dcc9c3757f0\n\nChange-Id: Ie2cb3bb63138b70019f86b88066697e98e333669\nCloses-Bug: #1884866\n'}]",0,737728,b8f412d81cf3bbbb4b3d0a420d76e91a3c620799,12,6,1,9816,,,0,"Make sure failed containers get stopped by systemd

When the main PID (i.e., common) of a container is killed because of
some reasons, systemd won't execute ExecStop command.
Current podman doesn't detect this failure ang recognize that container
is still running and this causes failure when systemd tries to restart
the container.

This patch introduces ExecStopPost configuration into systemd unit
files so that stop operation is executed even when a container fails
because of killed main process. The stale container should be cleaned
up by ExecStopPost task before systemd tries to restart it.

Note that the similar change has been introcuded to ""podman generate
systemd"" command already[1].
[1] https://github.com/containers/libpod/commit/e5c3432944245a740ed443803c654dcc9c3757f0

Change-Id: Ie2cb3bb63138b70019f86b88066697e98e333669
Closes-Bug: #1884866
",git fetch https://review.opendev.org/openstack/paunch refs/changes/28/737728/1 && git format-patch -1 --stdout FETCH_HEAD,"['paunch/tests/test_utils_systemd.py', 'paunch/utils/systemd.py']",2,b8f412d81cf3bbbb4b3d0a420d76e91a3c620799,bug/1884866,ExecStopPost=/usr/bin/podman stop -t %(stop_grace_period)s %(name)s,,2,0
openstack%2Fmonasca-notification~master~Ie6a15474ebc1f04b8555ee44d413c19ee26a9227,openstack/monasca-notification,master,Ie6a15474ebc1f04b8555ee44d413c19ee26a9227,Set legacy_kafka_client_enabled = False on default,MERGED,2020-07-14 13:39:07.000000000,2020-07-21 12:39:00.000000000,2020-07-21 12:37:29.000000000,"[{'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 28062}]","[{'number': 1, 'created': '2020-07-14 13:39:07.000000000', 'files': ['monasca_notification/conf/kafka.py', 'releasenotes/notes/disable-legacy-kafka-client-50fda1487ddda782.yaml'], 'web_link': 'https://opendev.org/openstack/monasca-notification/commit/f9978670b8437b106cc8a4fa88f6760da98c3b87', 'message': 'Set legacy_kafka_client_enabled = False on default\n\nWe change the default value of kafka.legacy_kafka_client_enabled from\nTrue to False. The use of new Confluent Kafka client is recommended.\n\nChange-Id: Ie6a15474ebc1f04b8555ee44d413c19ee26a9227\nStory: 2007924\nTask: 40339\n'}]",0,740959,f9978670b8437b106cc8a4fa88f6760da98c3b87,9,3,1,16222,,,0,"Set legacy_kafka_client_enabled = False on default

We change the default value of kafka.legacy_kafka_client_enabled from
True to False. The use of new Confluent Kafka client is recommended.

Change-Id: Ie6a15474ebc1f04b8555ee44d413c19ee26a9227
Story: 2007924
Task: 40339
",git fetch https://review.opendev.org/openstack/monasca-notification refs/changes/59/740959/1 && git format-patch -1 --stdout FETCH_HEAD,"['monasca_notification/conf/kafka.py', 'releasenotes/notes/disable-legacy-kafka-client-50fda1487ddda782.yaml']",2,f9978670b8437b106cc8a4fa88f6760da98c3b87,kafka-client,--- upgrade: - | The default value of ``kafka.legacy_kafka_client_enabled`` has changed from ``True`` to ``False``. The use of new Confluent Kafka client is recommended. ,,7,1
openstack%2Fpython-tripleoclient~master~I7c43563381b694573801e6a54e973fdbd36e0798,openstack/python-tripleoclient,master,I7c43563381b694573801e6a54e973fdbd36e0798,Throw warning if --limit used with a skip list in Heat,MERGED,2020-07-16 15:54:56.000000000,2020-07-21 12:34:30.000000000,2020-07-21 04:50:51.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-16 15:54:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/c8ef65a24388708fbf8854b1fda576df3b1444e4', 'message': 'Throw warning if --limit used with a skip list in Heat\n\nWe have recently switched the --limit option to take precedence over the\ndefined skip list via a Heat parameter. In order to prevent confusion\nbetween these two, we should throw a warning indicating that the\nparameter in Heat will be ignored when running ansible.\n\nDepends-On: https://review.opendev.org/#/c/741271/\nChange-Id: I7c43563381b694573801e6a54e973fdbd36e0798\nRelated-Bug: #1857298\n'}, {'number': 2, 'created': '2020-07-16 15:57:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/a6bc76811ce9893b065797e031cb4383a9f2d990', 'message': 'Throw warning if --limit used with a skip list in Heat\n\nWe have recently switched the --limit option to take precedence over the\ndefined skip list via a Heat parameter. In order to prevent confusion\nbetween these two, we should throw a warning indicating that the\nparameter in Heat will be ignored when running ansible.\n\nDepends-On: https://review.opendev.org/#/c/741271/\nChange-Id: I7c43563381b694573801e6a54e973fdbd36e0798\nRelated-Bug: #1857298\n'}, {'number': 3, 'created': '2020-07-16 16:14:55.000000000', 'files': ['tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/tests/v1/overcloud_node/test_overcloud_node.py', 'tripleoclient/v1/overcloud_node.py', 'tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/47dc9aae0e04856d8ffccd8c8c9b50d02c554aea', 'message': 'Throw warning if --limit used with a skip list in Heat\n\nWe have recently switched the --limit option to take precedence over the\ndefined skip list via a Heat parameter. In order to prevent confusion\nbetween these two, we should throw a warning indicating that the\nparameter in Heat will be ignored when running ansible.\n\nDepends-On: https://review.opendev.org/#/c/741271/\nChange-Id: I7c43563381b694573801e6a54e973fdbd36e0798\nRelated-Bug: #1857298\n'}]",0,741489,47dc9aae0e04856d8ffccd8c8c9b50d02c554aea,15,5,3,14985,,,0,"Throw warning if --limit used with a skip list in Heat

We have recently switched the --limit option to take precedence over the
defined skip list via a Heat parameter. In order to prevent confusion
between these two, we should throw a warning indicating that the
parameter in Heat will be ignored when running ansible.

Depends-On: https://review.opendev.org/#/c/741271/
Change-Id: I7c43563381b694573801e6a54e973fdbd36e0798
Related-Bug: #1857298
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/89/741489/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/v1/overcloud_deploy.py']",2,c8ef65a24388708fbf8854b1fda576df3b1444e4,bug/1857298," def _check_limit_skiplist_warning(self, env): if env.get('parameter_defaults').get('DeploymentServerBlacklist'): msg = ('[WARNING] DeploymentServerBlacklist is defined and will ' 'be ignored because --limit has been specified.') self.log.warning(msg) if parsed_args.limit: # check if skip list is defined while using --limit and throw a # warning if ncessary self._check_limit_skiplist_warning(env) ",,50,0
openstack%2Fkolla~stable%2Fussuri~Idb0a675d92bab8b9a0cf5209f0a06e996e96033c,openstack/kolla,stable/ussuri,Idb0a675d92bab8b9a0cf5209f0a06e996e96033c,copy rootwarp files form venv in ironic base,MERGED,2020-07-20 18:30:05.000000000,2020-07-21 12:21:12.000000000,2020-07-21 12:19:22.000000000,"[{'_account_id': 11604}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2020-07-20 18:30:05.000000000', 'files': ['docker/ironic/ironic-base/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/a893e6950f5cf969b7e123ec574af8ae4d6befe4', 'message': 'copy rootwarp files form venv in ironic base\n\nThis change modifies the ironic base container\nto copy rootwarp filters from the virtual\nenv rather than the source code directory. This\nis need because some required filters have\nbeen moved to ironic-lib and are not present in\nthe /ironic dir. The rootwrap filters are not\nautomitaclly installed in /etc/... due to kolla\nuse of virtual envs and https://github.com/pypa/wheel/issues/92\n\nCloses-Bug: #1886663\nChange-Id: Idb0a675d92bab8b9a0cf5209f0a06e996e96033c\n(cherry picked from commit b6c7110409a5658de6e4d7d468d55a1d7ad49232)\n'}]",0,742003,a893e6950f5cf969b7e123ec574af8ae4d6befe4,16,4,1,14826,,,0,"copy rootwarp files form venv in ironic base

This change modifies the ironic base container
to copy rootwarp filters from the virtual
env rather than the source code directory. This
is need because some required filters have
been moved to ironic-lib and are not present in
the /ironic dir. The rootwrap filters are not
automitaclly installed in /etc/... due to kolla
use of virtual envs and https://github.com/pypa/wheel/issues/92

Closes-Bug: #1886663
Change-Id: Idb0a675d92bab8b9a0cf5209f0a06e996e96033c
(cherry picked from commit b6c7110409a5658de6e4d7d468d55a1d7ad49232)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/03/742003/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/ironic/ironic-base/Dockerfile.j2'],1,a893e6950f5cf969b7e123ec574af8ae4d6befe4,bug/1886663, && cp -r /var/lib/kolla/venv/etc/ironic/* /etc/ironic/ \, && cp -r /ironic/etc/ironic/* /etc/ironic/ \,1,1
openstack%2Fhorizon~master~I7e4de69a4dc1a40758018da18fa41a597d773403,openstack/horizon,master,I7e4de69a4dc1a40758018da18fa41a597d773403,Closes-Bug: #1886256,ABANDONED,2020-07-03 10:05:22.000000000,2020-07-21 12:19:35.000000000,,"[{'_account_id': 841}, {'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2020-07-03 10:05:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/80fe3db0f8fd01561ce8a2f2397c96ca0a93ebd9', 'message': 'Closes-Bug: #1886150\n\nChange-Id: I7e4de69a4dc1a40758018da18fa41a597d773403\n'}, {'number': 2, 'created': '2020-07-04 09:39:55.000000000', 'files': ['openstack_dashboard/locale/zh_CN/LC_MESSAGES/django.po'], 'web_link': 'https://opendev.org/openstack/horizon/commit/87a542d289896943bca2aa2c86a3aa357da53de9', 'message': 'Closes-Bug: #1886256\n\nChange-Id: I7e4de69a4dc1a40758018da18fa41a597d773403\n'}]",0,739199,87a542d289896943bca2aa2c86a3aa357da53de9,7,3,2,32160,,,0,"Closes-Bug: #1886256

Change-Id: I7e4de69a4dc1a40758018da18fa41a597d773403
",git fetch https://review.opendev.org/openstack/horizon refs/changes/99/739199/2 && git format-patch -1 --stdout FETCH_HEAD,['openstack_dashboard/locale/zh_CN/LC_MESSAGES/django.po'],1,80fe3db0f8fd01561ce8a2f2397c96ca0a93ebd9,bug#1886150,"msgstr ""实例 ID =""","msgstr ""示例 ID =""",1,1
openstack%2Ftooz~master~Ia3d9035abb645e82083fe9a796d7d7df7cf4d7a7,openstack/tooz,master,Ia3d9035abb645e82083fe9a796d7d7df7cf4d7a7,hashring: allow choosing hash function,MERGED,2020-07-07 12:32:52.000000000,2020-07-21 12:14:43.000000000,2020-07-21 12:12:10.000000000,"[{'_account_id': 2472}, {'_account_id': 6928}, {'_account_id': 10239}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 24828}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-07 12:32:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tooz/commit/2e061c96c94f78b901d04e097893f727426c93ac', 'message': ""hashring: allow choosing hash function\n\nIn FIPS mode it's not possible to use md5 for any purposes.\n\nChange-Id: Ia3d9035abb645e82083fe9a796d7d7df7cf4d7a7\n""}, {'number': 2, 'created': '2020-07-08 09:51:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tooz/commit/613a80c9d729cab812c0b347f98d0940a947446c', 'message': ""hashring: allow choosing hash function\n\nIn FIPS mode it's not possible to use md5 for any purposes.\n\nChange-Id: Ia3d9035abb645e82083fe9a796d7d7df7cf4d7a7\n""}, {'number': 3, 'created': '2020-07-12 12:56:59.000000000', 'files': ['releasenotes/notes/hashring-algo-8a279397b8ff8a6a.yaml', 'tooz/hashring.py', 'tooz/tests/test_hashring.py'], 'web_link': 'https://opendev.org/openstack/tooz/commit/f5d32480d9cd76e33f3a88e00441bc39b2a55ff1', 'message': ""hashring: allow choosing hash function\n\nIn FIPS mode it's not possible to use md5 for any purposes.\n\nChange-Id: Ia3d9035abb645e82083fe9a796d7d7df7cf4d7a7\n""}]",2,739725,f5d32480d9cd76e33f3a88e00441bc39b2a55ff1,24,7,3,10239,,,0,"hashring: allow choosing hash function

In FIPS mode it's not possible to use md5 for any purposes.

Change-Id: Ia3d9035abb645e82083fe9a796d7d7df7cf4d7a7
",git fetch https://review.opendev.org/openstack/tooz refs/changes/25/739725/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/hashring-algo-8a279397b8ff8a6a.yaml', 'tooz/hashring.py', 'tooz/tests/test_hashring.py']",3,2e061c96c94f78b901d04e097893f727426c93ac,fips," @mock.patch.object(hashlib, 'new', autospec=True) mock_md5.assert_called_with('md5', mock.ANY) "," @mock.patch.object(hashlib, 'md5', autospec=True)",17,5
openstack%2Fcharm-hacluster~master~Idffa15f7fddb0843649c5b83637fec019c2bd9a5,openstack/charm-hacluster,master,Idffa15f7fddb0843649c5b83637fec019c2bd9a5,Fix installing dnspython on python 3.5,MERGED,2020-07-20 13:12:02.000000000,2020-07-21 12:13:08.000000000,2020-07-21 12:13:08.000000000,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-20 13:12:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/4111c5eff1947e204f3fde04151d9a1dcc9cf410', 'message': 'Fix installing dnspython on python 3.5\n\nhttps://github.com/openstack-charmers/release-tools/pull/100\n\nChange-Id: Idffa15f7fddb0843649c5b83637fec019c2bd9a5\nCloses-Bug: #1888225\n'}, {'number': 2, 'created': '2020-07-20 14:13:05.000000000', 'files': ['requirements.txt', 'test-requirements.txt', '.zuul.yaml', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/charm-hacluster/commit/4acb2d59f48e08fa7b9093d4c98b5c8b0fff9fd0', 'message': 'Fix installing dnspython on python 3.5\n\nhttps://github.com/openstack-charmers/release-tools/pull/100\n\nChange-Id: Idffa15f7fddb0843649c5b83637fec019c2bd9a5\nCloses-Bug: #1888225\n'}]",1,741934,4acb2d59f48e08fa7b9093d4c98b5c8b0fff9fd0,14,4,2,31289,,,0,"Fix installing dnspython on python 3.5

https://github.com/openstack-charmers/release-tools/pull/100

Change-Id: Idffa15f7fddb0843649c5b83637fec019c2bd9a5
Closes-Bug: #1888225
",git fetch https://review.opendev.org/openstack/charm-hacluster refs/changes/34/741934/2 && git format-patch -1 --stdout FETCH_HEAD,['requirements.txt'],1,4111c5eff1947e204f3fde04151d9a1dcc9cf410,bug/1888225,"dnspython>=1.12.0,<2.0.0 # dnspython dropped py3.5 support",dnspython>=1.12.0,1,1
openstack%2Fbifrost~master~I70bf4f7984b3d04a9c74678a7a972ab92192d0ee,openstack/bifrost,master,I70bf4f7984b3d04a9c74678a7a972ab92192d0ee,Update to cirros 0.5.1,MERGED,2020-07-20 12:00:28.000000000,2020-07-21 12:08:24.000000000,2020-07-21 12:05:43.000000000,"[{'_account_id': 15519}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-07-20 12:00:28.000000000', 'files': ['releasenotes/notes/cirros-0.5.1-d09a433cbea1a3b9.yaml', 'playbooks/roles/bifrost-ironic-install/defaults/main.yml', 'playbooks/test-bifrost.yaml', 'doc/source/install/offline-install.rst'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/e03d1872095d3f5915a96b03c1ea4ed1f6b19e3a', 'message': 'Update to cirros 0.5.1\n\nChange-Id: I70bf4f7984b3d04a9c74678a7a972ab92192d0ee\n'}]",0,741923,e03d1872095d3f5915a96b03c1ea4ed1f6b19e3a,8,3,1,10239,,,0,"Update to cirros 0.5.1

Change-Id: I70bf4f7984b3d04a9c74678a7a972ab92192d0ee
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/23/741923/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/cirros-0.5.1-d09a433cbea1a3b9.yaml', 'playbooks/roles/bifrost-ironic-install/defaults/main.yml', 'playbooks/test-bifrost.yaml', 'doc/source/install/offline-install.rst']",4,e03d1872095d3f5915a96b03c1ea4ed1f6b19e3a,cirros, cirros_deploy_image_upstream_url: file:///vagrant/cirros-0.5.1-x86_64-disk.img, cirros_deploy_image_upstream_url: file:///vagrant/cirros-0.4.0-x86_64-disk.img,7,3
openstack%2Fcharm-vault~master~Ifaddeb1d03146c2993b7388466eb1cce945741f6,openstack/charm-vault,master,Ifaddeb1d03146c2993b7388466eb1cce945741f6,Change maintainer to OpenStack Charmers,MERGED,2020-06-02 13:55:39.000000000,2020-07-21 11:53:23.000000000,2020-07-21 11:53:23.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-06-02 13:55:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/52e63e16687ae47f02bd690c58599eead918302b', 'message': 'Change maintainer to OpenStack Charmers\n\nChange-Id: Ifaddeb1d03146c2993b7388466eb1cce945741f6\n'}, {'number': 2, 'created': '2020-07-20 18:48:55.000000000', 'files': ['src/metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-vault/commit/f2819ec87ca7bae411ba07012cf54347b66a0bf0', 'message': 'Change maintainer to OpenStack Charmers\n\nChange-Id: Ifaddeb1d03146c2993b7388466eb1cce945741f6\n'}]",0,732685,f2819ec87ca7bae411ba07012cf54347b66a0bf0,10,3,2,20870,,,0,"Change maintainer to OpenStack Charmers

Change-Id: Ifaddeb1d03146c2993b7388466eb1cce945741f6
",git fetch https://review.opendev.org/openstack/charm-vault refs/changes/85/732685/1 && git format-patch -1 --stdout FETCH_HEAD,['src/metadata.yaml'],1,52e63e16687ae47f02bd690c58599eead918302b,change-maintainer, - OpenStack Charmers <openstack-discuss@lists.openstack.org>, - Paul Collins <paul.collins@canonical.com>,1,1
openstack%2Foslo.service~master~Id560ba80472b9efbcfbc289a18d4df312961fdb1,openstack/oslo.service,master,Id560ba80472b9efbcfbc289a18d4df312961fdb1,"Do not import ""oslo.log"" in the main module",MERGED,2020-07-20 15:50:05.000000000,2020-07-21 11:49:04.000000000,2020-07-21 11:47:00.000000000,"[{'_account_id': 6928}, {'_account_id': 11904}, {'_account_id': 15334}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 15:50:05.000000000', 'files': ['oslo_service/__init__.py'], 'web_link': 'https://opendev.org/openstack/oslo.service/commit/91d4eee90fcbfc6bb65c327767a6d000dd94602e', 'message': 'Do not import ""oslo.log"" in the main module\n\nThe LOG instance is not being used and there is no need to import\n""oslo_log"". This will also prevent the circular import detected\nin the related bug.\n\nChange-Id: Id560ba80472b9efbcfbc289a18d4df312961fdb1\nRelated-Bug: #1888213\n'}]",0,741972,91d4eee90fcbfc6bb65c327767a6d000dd94602e,11,5,1,16688,,,0,"Do not import ""oslo.log"" in the main module

The LOG instance is not being used and there is no need to import
""oslo_log"". This will also prevent the circular import detected
in the related bug.

Change-Id: Id560ba80472b9efbcfbc289a18d4df312961fdb1
Related-Bug: #1888213
",git fetch https://review.opendev.org/openstack/oslo.service refs/changes/72/741972/1 && git format-patch -1 --stdout FETCH_HEAD,['oslo_service/__init__.py'],1,91d4eee90fcbfc6bb65c327767a6d000dd94602e,bug/1888213,,from oslo_log import log as loggingLOG = logging.getLogger(__name__) ,1,4
openstack%2Fmanila~stable%2Fussuri~Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,openstack/manila,stable/ussuri,Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,Update NFS helper restart,MERGED,2020-07-21 00:34:28.000000000,2020-07-21 11:37:22.000000000,2020-07-21 11:25:59.000000000,"[{'_account_id': 9003}, {'_account_id': 22348}, {'_account_id': 25243}]","[{'number': 1, 'created': '2020-07-21 00:34:28.000000000', 'files': ['manila/share/drivers/helpers.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/eb0de241b395fdc309d3b13b1adac464316f3f10', 'message': 'Update NFS helper restart\n\nBecause ``service`` commands are deprecated in favor of\n``systemctl` commands, the check to see if the service\ncommand succeeds in the NFS helper used by e.g. the\nlvm and generic back ends fails.  The string sought to\nindicate an error is never present.\n\nUpdate the helper to use ``systemctl`` commands instead\nand error check for them correctly.\n\nCloses-bug: #1887695\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n(cherry picked from commit 391ec7dffa701f54843b3aafdc6d2f8b4dfe0504)\n'}]",0,742049,eb0de241b395fdc309d3b13b1adac464316f3f10,10,3,1,16643,,,0,"Update NFS helper restart

Because ``service`` commands are deprecated in favor of
``systemctl` commands, the check to see if the service
command succeeds in the NFS helper used by e.g. the
lvm and generic back ends fails.  The string sought to
indicate an error is never present.

Update the helper to use ``systemctl`` commands instead
and error check for them correctly.

Closes-bug: #1887695
Change-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f
(cherry picked from commit 391ec7dffa701f54843b3aafdc6d2f8b4dfe0504)
",git fetch https://review.opendev.org/openstack/manila refs/changes/49/742049/1 && git format-patch -1 --stdout FETCH_HEAD,['manila/share/drivers/helpers.py'],1,eb0de241b395fdc309d3b13b1adac464316f3f10,bug/1887695," server, ['sudo', 'systemctl', 'is-active', 'nfs-kernel-server'], if ""inactive"" in out: server, ['sudo', 'systemctl', 'restart', 'nfs-kernel-server'])"," server, ['sudo', 'service', 'nfs-kernel-server', 'status'], if ""not"" in out: server, ['sudo', 'service', 'nfs-kernel-server', 'restart'])",4,3
openstack%2Fcharm-barbican-vault~master~I6089eae63aca83fccb7c2ecb39b21455464835b3,openstack/charm-barbican-vault,master,I6089eae63aca83fccb7c2ecb39b21455464835b3,Remove inherited configuration options invalid for charm,MERGED,2020-05-16 21:16:31.000000000,2020-07-21 11:34:53.000000000,2020-07-21 11:34:52.000000000,"[{'_account_id': 12549}, {'_account_id': 13686}, {'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 24824}]","[{'number': 1, 'created': '2020-05-16 21:16:31.000000000', 'files': ['src/layer.yaml'], 'web_link': 'https://opendev.org/openstack/charm-barbican-vault/commit/c83001ca8aba7ad425dd349def85e5e03e371164', 'message': 'Remove inherited configuration options invalid for charm\n\nChange-Id: I6089eae63aca83fccb7c2ecb39b21455464835b3\nCloses-Bug: #1879088\n'}]",0,728657,c83001ca8aba7ad425dd349def85e5e03e371164,17,5,1,13686,,,0,"Remove inherited configuration options invalid for charm

Change-Id: I6089eae63aca83fccb7c2ecb39b21455464835b3
Closes-Bug: #1879088
",git fetch https://review.opendev.org/openstack/charm-barbican-vault refs/changes/57/728657/1 && git format-patch -1 --stdout FETCH_HEAD,['src/layer.yaml'],1,c83001ca8aba7ad425dd349def85e5e03e371164,bug/1879088, - ssl_ca - ssl_cert - ssl_key,,3,0
openstack%2Fmistral~master~Icce8dfa6edb18973ca2a4eb594818ea9d504b49a,openstack/mistral,master,Icce8dfa6edb18973ca2a4eb594818ea9d504b49a,Generalize caught exceptions on workflow delete,MERGED,2020-07-21 07:44:54.000000000,2020-07-21 11:32:05.000000000,2020-07-21 11:30:12.000000000,"[{'_account_id': 8731}, {'_account_id': 19134}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 07:44:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral/commit/4b6d167149db028c82a17f9741af8e752b71d894', 'message': 'Generalize caught exceptions on workflow delete\n\nOsloDB sometimes does not convert the underlying SQLAlchemy\nerrors into DBError. Sometimes it happens that the ""too deep\ncascade delete"" error manifests in sa.OperationalError instead\nof DBError. We generalize to catch both cases as the underlying\nissue is the same (just as the message of the error).\n\nChange-Id: Icce8dfa6edb18973ca2a4eb594818ea9d504b49a\n'}, {'number': 2, 'created': '2020-07-21 08:21:06.000000000', 'files': ['mistral/db/v2/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/mistral/commit/2e600ce6fc91a4be90413ea126095a82a26b9477', 'message': 'Generalize caught exceptions on workflow delete\n\nOsloDB sometimes does not convert the underlying SQLAlchemy\nerrors into DBError. Sometimes it happens that the ""too deep\ncascade delete"" error manifests in sa.OperationalError instead\nof DBError. We generalize to catch both cases as the underlying\nissue is the same (just as the message of the error).\n\nChange-Id: Icce8dfa6edb18973ca2a4eb594818ea9d504b49a\n'}]",0,742087,2e600ce6fc91a4be90413ea126095a82a26b9477,10,3,2,21970,,,0,"Generalize caught exceptions on workflow delete

OsloDB sometimes does not convert the underlying SQLAlchemy
errors into DBError. Sometimes it happens that the ""too deep
cascade delete"" error manifests in sa.OperationalError instead
of DBError. We generalize to catch both cases as the underlying
issue is the same (just as the message of the error).

Change-Id: Icce8dfa6edb18973ca2a4eb594818ea9d504b49a
",git fetch https://review.opendev.org/openstack/mistral refs/changes/87/742087/2 && git format-patch -1 --stdout FETCH_HEAD,['mistral/db/v2/sqlalchemy/api.py'],1,4b6d167149db028c82a17f9741af8e752b71d894,," except (db_exc.DBError, sa.exc.OperationalError) as e:", except db_exc.DBError as e:,1,1
openstack%2Fmanila~stable%2Fstein~If5fe32c155fe0861b3ed86b862335e062796056b,openstack/manila,stable/stein,If5fe32c155fe0861b3ed86b862335e062796056b,Enforce policy checks getting share-type by name,MERGED,2020-07-20 23:34:43.000000000,2020-07-21 11:18:59.000000000,2020-07-21 11:15:23.000000000,"[{'_account_id': 9003}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 25243}]","[{'number': 1, 'created': '2020-07-20 23:34:43.000000000', 'files': ['manila/db/sqlalchemy/api.py', 'manila/api/v1/shares.py', 'releasenotes/notes/bug-1885956-enforce-policy-check-getting-share-type-by-name-5eca17b02bea5261.yaml'], 'web_link': 'https://opendev.org/openstack/manila/commit/644cdf4e4ff965cb96b8cce5396042b6ac8abe7e', 'message': ""Enforce policy checks getting share-type by name\n\nPolicy checks are skipped when looking up a share-type\nby name.  This causes share creation attempts that specify\na valid share-type to pass the early API check on share type\neven if the share type named is private and not shared with\nthe user's project.  The share creation fails later, but after\nthe database record for the share is created.  Although the\noperation fails with an ERROR, the share is stuck in CREATING\nstate.\n\nFix this issue by checking the user's project in the database\nAPI just as we do for share type lookups by uuid.\n\nCloses-bug: #1885956\nChange-Id: If5fe32c155fe0861b3ed86b862335e062796056b\n(cherry picked from commit f877deed5186cff3a7ecfbce2536e72fc6013895)\n(cherry picked from commit e02cc6d6bc92e354bc7f4220a05ec6fedf2ecc9c)\n(cherry picked from commit 2f2ed258f7c273543495b5476af2c3558d51384d)\n""}]",0,742043,644cdf4e4ff965cb96b8cce5396042b6ac8abe7e,11,4,1,16643,,,0,"Enforce policy checks getting share-type by name

Policy checks are skipped when looking up a share-type
by name.  This causes share creation attempts that specify
a valid share-type to pass the early API check on share type
even if the share type named is private and not shared with
the user's project.  The share creation fails later, but after
the database record for the share is created.  Although the
operation fails with an ERROR, the share is stuck in CREATING
state.

Fix this issue by checking the user's project in the database
API just as we do for share type lookups by uuid.

Closes-bug: #1885956
Change-Id: If5fe32c155fe0861b3ed86b862335e062796056b
(cherry picked from commit f877deed5186cff3a7ecfbce2536e72fc6013895)
(cherry picked from commit e02cc6d6bc92e354bc7f4220a05ec6fedf2ecc9c)
(cherry picked from commit 2f2ed258f7c273543495b5476af2c3558d51384d)
",git fetch https://review.opendev.org/openstack/manila refs/changes/43/742043/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/db/sqlalchemy/api.py', 'manila/api/v1/shares.py', 'releasenotes/notes/bug-1885956-enforce-policy-check-getting-share-type-by-name-5eca17b02bea5261.yaml']",3,644cdf4e4ff965cb96b8cce5396042b6ac8abe7e,,--- fixes: - | Fixed `launchpad bug #1885956 <https://bugs.launchpad.net/manila/+bug/1885956>`_ by ensuring that policy checks are enforced when looking up a share-type by name. This prevents a problem where shares could be stuck in CREATING status when a user attempts to create a share using the name of a private share-type to which the user lacks access. ,,11,3
openstack%2Fkayobe~stable%2Ftrain~I238aeefefa88dd584ce61ac9eb52d50552336ed0,openstack/kayobe,stable/train,I238aeefefa88dd584ce61ac9eb52d50552336ed0,Fix condition of placement image build,MERGED,2020-07-01 09:53:17.000000000,2020-07-21 11:00:11.000000000,2020-07-21 10:56:36.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 17669}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-01 09:53:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/822bcc5bd01dfd0158c0f5cea24aaba3d7c26524', 'message': 'Fix condition of placement image build\n\nThis should fix placement image build if nova is disabled but zun is\nenabled.\n\nChange-Id: I238aeefefa88dd584ce61ac9eb52d50552336ed0\n(cherry picked from commit 931fa4830d681281ff189bed15fbc9e0554428c0)\n'}, {'number': 2, 'created': '2020-07-01 10:07:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/5847187e4f851440f4477d1acb1a128ae668acea', 'message': 'Fix condition of placement image build\n\nThis should fix placement image build if nova is disabled but zun is\nenabled.\n\nChange-Id: I238aeefefa88dd584ce61ac9eb52d50552336ed0\n(cherry picked from commit 931fa4830d681281ff189bed15fbc9e0554428c0)\n'}, {'number': 3, 'created': '2020-07-01 21:19:07.000000000', 'files': ['ansible/group_vars/all/kolla'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/e9b2b3299ca8e17a9605dbf2c35b3ee9d29596e0', 'message': 'Fix condition of placement image build\n\nThis should fix placement image build if nova is disabled but zun is\nenabled.\n\nChange-Id: I238aeefefa88dd584ce61ac9eb52d50552336ed0\n(cherry picked from commit 931fa4830d681281ff189bed15fbc9e0554428c0)\n'}]",0,738778,e9b2b3299ca8e17a9605dbf2c35b3ee9d29596e0,13,4,3,14826,,,0,"Fix condition of placement image build

This should fix placement image build if nova is disabled but zun is
enabled.

Change-Id: I238aeefefa88dd584ce61ac9eb52d50552336ed0
(cherry picked from commit 931fa4830d681281ff189bed15fbc9e0554428c0)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/78/738778/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/group_vars/all/kolla'],1,822bcc5bd01dfd0158c0f5cea24aaba3d7c26524,," enabled: ""{{ kolla_enable_placement | bool }}"""," enabled: ""{{ kolla_enable_nova | bool }}""",1,1
openstack%2Fkayobe~stable%2Ftrain~Ia0aa15300f58fc4e912dea7ed304a1cdaf51382a,openstack/kayobe,stable/train,Ia0aa15300f58fc4e912dea7ed304a1cdaf51382a,Update image regexes,MERGED,2020-07-01 09:53:17.000000000,2020-07-21 10:58:34.000000000,2020-07-21 10:56:31.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2020-07-01 09:53:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/22f433a555a33c69bb951efea596c21c52f7da36', 'message': 'Update image regexes\n\nSome images were not being built automatically due to a missing regex.\nThe most notable being chrony.\n\nChange-Id: Ia0aa15300f58fc4e912dea7ed304a1cdaf51382a\nStory: 2007796\nTask: 40050\n(cherry picked from commit 50317285cba35ee919c5fbc42249dfd6f072f14e)\n'}, {'number': 2, 'created': '2020-07-01 10:07:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/01e86d021af2ef8599842c2abf39460ed8747e46', 'message': 'Update image regexes\n\nSome images were not being built automatically due to a missing regex.\nThe most notable being chrony.\n\nChange-Id: Ia0aa15300f58fc4e912dea7ed304a1cdaf51382a\nStory: 2007796\nTask: 40050\n(cherry picked from commit 50317285cba35ee919c5fbc42249dfd6f072f14e)\n'}, {'number': 3, 'created': '2020-07-01 21:19:07.000000000', 'files': ['ansible/group_vars/all/kolla'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/539a7fb5df66407e9bb06cee2c0b032832306343', 'message': 'Update image regexes\n\nSome images were not being built automatically due to a missing regex.\nThe most notable being chrony.\n\nChange-Id: Ia0aa15300f58fc4e912dea7ed304a1cdaf51382a\nStory: 2007796\nTask: 40050\n(cherry picked from commit 50317285cba35ee919c5fbc42249dfd6f072f14e)\n'}]",0,738777,539a7fb5df66407e9bb06cee2c0b032832306343,11,5,3,14826,,,0,"Update image regexes

Some images were not being built automatically due to a missing regex.
The most notable being chrony.

Change-Id: Ia0aa15300f58fc4e912dea7ed304a1cdaf51382a
Story: 2007796
Task: 40050
(cherry picked from commit 50317285cba35ee919c5fbc42249dfd6f072f14e)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/77/738777/3 && git format-patch -1 --stdout FETCH_HEAD,['ansible/group_vars/all/kolla'],1,22f433a555a33c69bb951efea596c21c52f7da36,," - regex: chrony enabled: ""{{ kolla_enable_chrony | bool }}"" - regex: cyborg enabled: ""{{ kolla_enable_cyborg | bool }}"" enabled: ""{{ kolla_enable_fluentd | bool }}"" - regex: grafana enabled: ""{{ kolla_enable_grafana | bool }}"" enabled: ""{{ kolla_enable_iscsid | bool }}"" - regex: karbor enabled: ""{{ kolla_enable_karbor | bool }}"" enabled: ""{{ kolla_enable_keepalived | bool }}"" - regex: kuryr enabled: ""{{ kolla_enable_kuryr | bool }}"" - regex: masakari enabled: ""{{ kolla_enable_masakari | bool }}"" enabled: ""{{ kolla_enable_memcached | bool }}"" - regex: mistral enabled: ""{{ kolla_enable_mistral | bool }}"" - regex: mongodb enabled: ""{{ kolla_enable_mongodb | bool }}"" - regex: multipathd enabled: ""{{ kolla_enable_multipathd | bool }}"" enabled: ""{{ kolla_enable_openvswitch | bool }}"" - regex: ovsdpdk enabled: ""{{ kolla_enable_ovs_dpdk | bool }}"" - regex: panko enabled: ""{{ kolla_enable_panko | bool }}"" - regex: qdrouterd enabled: ""{{ kolla_enable_qdrouterd | bool }}"" - regex: qinling enabled: ""{{ kolla_enable_qinling | bool }}"" - regex: rabbitmq enabled: ""{{ kolla_enable_rabbitmq | bool }}"" - regex: rally enabled: ""{{ kolla_enable_rally | bool }}"" - regex: redis enabled: ""{{ kolla_enable_redis | bool }}"" - regex: searchlight enabled: ""{{ kolla_enable_searchlight | bool }}"" - regex: senlin enabled: ""{{ kolla_enable_senlin | bool }}"" - regex: solum enabled: ""{{ kolla_enable_solum | bool }}"" - regex: tacker enabled: ""{{ kolla_enable_tacker | bool }}"" - regex: tempest enabled: ""{{ kolla_enable_tempest | bool }}"" - regex: trove enabled: ""{{ kolla_enable_trove | bool }}"" - regex: vitrage enabled: ""{{ kolla_enable_vitrage | bool }}"" - regex: vmtp enabled: ""{{ kolla_enable_vmtp | bool }}"" - regex: watcher enabled: ""{{ kolla_enable_watcher | bool }}"" - regex: zun enabled: ""{{ kolla_enable_zun | bool }}"""," enabled: True - regex: grafana enabled: ""{{ kolla_enable_grafana | bool }}"" enabled: ""{{ kolla_enable_cinder | bool or kolla_enable_ironic | bool }}"" enabled: ""{{ kolla_enable_haproxy | bool }}"" enabled: True enabled: ""{{ kolla_enable_neutron | bool }}"" - regex: rabbitmq enabled: True",57,9
openstack%2Fironic-python-agent-builder~master~If7e4e44e4f3d0606206e2212f7d8ca4945cd7ec7,openstack/ironic-python-agent-builder,master,If7e4e44e4f3d0606206e2212f7d8ca4945cd7ec7,Add Tripleo IPA build image job in zuul layout,MERGED,2020-07-20 10:45:39.000000000,2020-07-21 10:56:57.000000000,2020-07-21 10:53:01.000000000,"[{'_account_id': 9592}, {'_account_id': 10239}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-07-20 10:45:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/e3416696ceb25f3e6983da863cccce6d7fd6570e', 'message': '[dnm] test tripleo-buildimage-ipa c8\n\nTesting tripleo-buildimage-ironic-python-agent-centos-8 on\nopenstack/ironic-python-agent-builder.\n\nChange-Id: If7e4e44e4f3d0606206e2212f7d8ca4945cd7ec7\n'}, {'number': 2, 'created': '2020-07-20 14:43:17.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/a41ec9dc409ef1a031b70f9f6517a7c7a14b7b5c', 'message': 'Add Tripleo IPA build image job in zuul layout\n\nWith this patch we are adding tripleo IPA build image job for C8:-\n\n* tripleo-buildimage-ironic-python-agent-centos-8\n\nWe introduced this job as non voting.\n\nChange-Id: If7e4e44e4f3d0606206e2212f7d8ca4945cd7ec7\n'}]",0,741917,a41ec9dc409ef1a031b70f9f6517a7c7a14b7b5c,10,4,2,29775,,,0,"Add Tripleo IPA build image job in zuul layout

With this patch we are adding tripleo IPA build image job for C8:-

* tripleo-buildimage-ironic-python-agent-centos-8

We introduced this job as non voting.

Change-Id: If7e4e44e4f3d0606206e2212f7d8ca4945cd7ec7
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/17/741917/2 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,e3416696ceb25f3e6983da863cccce6d7fd6570e,enable_ipa_buildimage_jobs, - tripleo-buildimage-ironic-python-agent-centos-8, templates: - publish-openstack-docs-pti - check-requirements - release-notes-jobs-python3 - openstack-tox-pep8 - ironic-standalone-ipa-src - ipa-tempest-partition-bios-ipmi-direct-tinyipa-src - ipa-tempest-partition-bios-ipmi-iscsi-tinyipa-src - ipa-tempest-wholedisk-bios-ipmi-direct-tinyipa-src - ipa-tempest-wholedisk-bios-ipmi-iscsi-tinyipa-src - ironic-python-agent-check-image-tinyipa - ironic-python-agent-check-image-dib-centos8 - ironic-python-agent-check-image-dib-centos7 # Non-voting jobs - ironic-python-agent-check-image-dib-fedora: voting: false - ironic-python-agent-check-image-dib-debian: voting: false - ironic-python-agent-check-image-dib-ubuntu: voting: false - ipa-tempest-wholedisk-bios-ipmi-direct-dib-src: voting: false - ipa-tempest-partition-bios-ipmi-iscsi-dib-src: voting: false - ipa-tempest-ironic-inspector-src: voting: false,1,26
openstack%2Fkayobe~stable%2Ftrain~If78edb12d699a47c911d28afbb365230a3021c7b,openstack/kayobe,stable/train,If78edb12d699a47c911d28afbb365230a3021c7b,Sync zookeeper feature flag with kolla-ansible,MERGED,2020-07-13 09:39:11.000000000,2020-07-21 10:30:40.000000000,2020-07-21 10:27:24.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 17669}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-13 09:39:11.000000000', 'files': ['ansible/group_vars/all/kolla'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/edd9da709d4bb6eb4f53afe7d662f51e1e5e8f1e', 'message': 'Sync zookeeper feature flag with kolla-ansible\n\nChange-Id: If78edb12d699a47c911d28afbb365230a3021c7b\n(cherry picked from commit 1a4f3ed23e68d23120bc97a86372d02a4de204bb)\n'}]",0,740647,edd9da709d4bb6eb4f53afe7d662f51e1e5e8f1e,8,4,1,14826,,,0,"Sync zookeeper feature flag with kolla-ansible

Change-Id: If78edb12d699a47c911d28afbb365230a3021c7b
(cherry picked from commit 1a4f3ed23e68d23120bc97a86372d02a4de204bb)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/47/740647/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/group_vars/all/kolla'],1,edd9da709d4bb6eb4f53afe7d662f51e1e5e8f1e,,"kolla_enable_zookeeper: ""{{ kolla_enable_kafka | bool or kolla_enable_storm | bool }}""","kolla_enable_zookeeper: ""{{ kolla_enable_kafka | bool }}""",1,1
openstack%2Fkayobe~stable%2Ftrain~I2f8ecad57f97e5cd3e15156959c017ad29335e31,openstack/kayobe,stable/train,I2f8ecad57f97e5cd3e15156959c017ad29335e31,Update feature flag defaults,MERGED,2020-07-01 09:53:17.000000000,2020-07-21 10:29:20.000000000,2020-07-21 10:27:23.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2020-07-01 09:53:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/7ac41c40b3f9778f09d267963f539403d68f05a5', 'message': 'Update feature flag defaults\n\nWe need these defined to figure out which images to build.\n\nOnly flags that are required by build regex map have been added, and\ndependencies of those.\n\nTrivialFix\n\nChange-Id: I2f8ecad57f97e5cd3e15156959c017ad29335e31\n(cherry picked from commit bde426c9b19b272f350cdc2a84a1b324e2ad3c91)\n'}, {'number': 2, 'created': '2020-07-01 21:19:07.000000000', 'files': ['ansible/group_vars/all/kolla'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/a050984b8fb5e9f2f8954fb4b7caa7a9d0a73372', 'message': 'Update feature flag defaults\n\nWe need these defined to figure out which images to build.\n\nOnly flags that are required by build regex map have been added, and\ndependencies of those.\n\nTrivialFix\n\nChange-Id: I2f8ecad57f97e5cd3e15156959c017ad29335e31\n(cherry picked from commit bde426c9b19b272f350cdc2a84a1b324e2ad3c91)\n'}]",1,738776,a050984b8fb5e9f2f8954fb4b7caa7a9d0a73372,12,5,2,14826,,,0,"Update feature flag defaults

We need these defined to figure out which images to build.

Only flags that are required by build regex map have been added, and
dependencies of those.

TrivialFix

Change-Id: I2f8ecad57f97e5cd3e15156959c017ad29335e31
(cherry picked from commit bde426c9b19b272f350cdc2a84a1b324e2ad3c91)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/76/738776/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/group_vars/all/kolla'],1,7ac41c40b3f9778f09d267963f539403d68f05a5,,"# Enable core OpenStack services. This includes: # glance, keystone, neutron, nova, heat, and horizon. kolla_enable_openstack_core: ""yes"" # These roles are required for Kolla to be operation, however a savvy deployer # could disable some of these required roles and run their own services. kolla_enable_glance: ""{{ kolla_enable_openstack_core | bool }}"" kolla_enable_haproxy: ""yes"" kolla_enable_keepalived: ""{{ kolla_enable_haproxy | bool }}"" kolla_enable_keystone: ""{{ kolla_enable_openstack_core | bool }}"" kolla_enable_mariadb: ""yes"" kolla_enable_memcached: ""yes"" kolla_enable_neutron: ""{{ kolla_enable_openstack_core | bool }}"" kolla_enable_nova: ""{{ kolla_enable_openstack_core | bool }}"" kolla_enable_rabbitmq: ""yes"" # OpenStack services can be enabled or disabled with these optionskolla_enable_cinder_backend_iscsi: ""{{ kolla_enable_cinder_backend_lvm | bool or kolla_enable_cinder_backend_zfssa_iscsi | bool }}"" kolla_enable_cinder_backend_lvm: ""no"" kolla_enable_cinder_backend_zfssa_iscsi: ""no""kolla_enable_cyborg: ""no""kolla_enable_elasticsearch: ""{{ 'yes' if kolla_enable_central_logging | bool or kolla_enable_osprofiler | bool or kolla_enable_skydive | bool or kolla_enable_monasca | bool else 'no' }}""kolla_enable_fluentd: ""yes""kolla_enable_grafana: ""no"" kolla_enable_heat: ""{{ kolla_enable_openstack_core | bool }}"" kolla_enable_horizon: ""{{ kolla_enable_openstack_core | bool }}"" kolla_enable_influxdb: ""{{ kolla_enable_monasca | bool or kolla_enable_cloudkitty | bool }}""kolla_enable_ironic: ""{{ kolla_enable_openstack_core | bool }}"" kolla_enable_ironic_neutron_agent: ""{{ kolla_enable_neutron | bool and kolla_enable_ironic | bool }}"" kolla_enable_iscsid: ""{{ (kolla_enable_cinder | bool and kolla_enable_cinder_backend_iscsi | bool) or kolla_enable_ironic | bool }}"" kolla_enable_karbor: ""no"" kolla_enable_kafka: ""{{ kolla_enable_monasca | bool }}"" kolla_enable_kibana: ""{{ 'yes' if kolla_enable_central_logging | bool or kolla_enable_monasca | bool else 'no' }}"" kolla_enable_kuryr: ""no""kolla_enable_masakari: ""no"" kolla_enable_mistral: ""no""kolla_enable_mongodb: ""no"" kolla_enable_multipathd: ""no""kolla_enable_openvswitch: ""{{ kolla_enable_neutron | bool }}"" kolla_enable_ovs_dpdk: ""no""kolla_enable_panko: ""no"" kolla_enable_placement: ""{{ kolla_enable_nova | bool or kolla_enable_zun | bool }}""kolla_enable_qdrouterd: ""no"" kolla_enable_qinling: ""no"" kolla_enable_rally: ""no"" kolla_enable_redis: ""no""kolla_enable_searchlight: ""no"" kolla_enable_senlin: ""no""kolla_enable_solum: ""no"" kolla_enable_storm: ""{{ kolla_enable_monasca | bool }}""kolla_enable_tacker: ""no""kolla_enable_tempest: ""no"" kolla_enable_trove: ""no"" kolla_enable_vitrage: ""no"" kolla_enable_vmtp: ""no"" kolla_enable_watcher: ""no"" kolla_enable_zookeeper: ""{{ kolla_enable_kafka | bool }}"" kolla_enable_zun: ""no""","kolla_enable_elasticsearch: ""{{ 'yes' if kolla_enable_central_logging | bool or kolla_enable_freezer | bool or kolla_enable_osprofiler | bool or kolla_enable_skydive | bool or kolla_enable_monasca | bool else 'no' }}""kolla_enable_glance: ""yes"" kolla_enable_grafana: ""no""kolla_enable_haproxy: ""yes"" kolla_enable_heat: ""yes"" kolla_enable_horizon: ""yes"" kolla_enable_influxdb: ""{{ 'yes' if kolla_enable_monasca | bool else 'no' }}"" kolla_enable_ironic: ""yes""kolla_enable_ironic_neutron_agent: ""{{ 'yes' if kolla_enable_neutron | bool and kolla_enable_ironic | bool else 'no' }}"" kolla_enable_kafka: ""{{ 'yes' if kolla_enable_monasca | bool else 'no' }}"" kolla_enable_keystone: ""yes"" kolla_enable_kibana: ""{{ 'yes' if kolla_enable_central_logging | bool or kolla_enable_monasca | bool else 'no' }}""kolla_enable_mariadb: ""yes""kolla_enable_neutron: ""yes""kolla_enable_nova: ""yes""kolla_enable_storm: ""{{ 'yes' if kolla_enable_monasca | bool else 'no' }}""kolla_enable_zookeeper: ""{{ 'yes' if kolla_enable_kafka | bool or kolla_enable_storm | bool else 'no' }}""",58,17
openstack%2Fkayobe~stable%2Ftrain~I0e3be19eed371853d80c401d6a46770a7d6dcbc5,openstack/kayobe,stable/train,I0e3be19eed371853d80c401d6a46770a7d6dcbc5,Update feature flags,MERGED,2020-07-01 21:19:07.000000000,2020-07-21 10:21:28.000000000,2020-07-21 10:19:48.000000000,"[{'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 17669}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2020-07-01 21:19:07.000000000', 'files': ['etc/kayobe/kolla.yml', 'tools/feature-flags.py', 'ansible/roles/kolla-ansible/vars/main.yml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/ee65b6e4bd58876efa556d4cccf7832e406bec03', 'message': 'Update feature flags\n\nThe flags in etc/kayobe/kolla.yml were out of sync with\nansible/roles/kolla-ansible/vars/main.yml.\n\nThis commit sorts them all alphabetically and adds a script to simplify\ngenerating the list.\n\nTrivialFix\n\nChange-Id: I0e3be19eed371853d80c401d6a46770a7d6dcbc5\n(cherry picked from commit 1e963a60ada175482c415ca2f6c46a5899a6939a)\n'}]",0,738944,ee65b6e4bd58876efa556d4cccf7832e406bec03,10,5,1,15197,,,0,"Update feature flags

The flags in etc/kayobe/kolla.yml were out of sync with
ansible/roles/kolla-ansible/vars/main.yml.

This commit sorts them all alphabetically and adds a script to simplify
generating the list.

TrivialFix

Change-Id: I0e3be19eed371853d80c401d6a46770a7d6dcbc5
(cherry picked from commit 1e963a60ada175482c415ca2f6c46a5899a6939a)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/44/738944/1 && git format-patch -1 --stdout FETCH_HEAD,"['etc/kayobe/kolla.yml', 'tools/feature-flags.py', 'ansible/roles/kolla-ansible/vars/main.yml']",3,ee65b6e4bd58876efa556d4cccf7832e406bec03,, - cinder_backend_zfssa_iscsi - cinder_backup - horizon_fwaas - karbor - manila_backend_generic - manila_backend_hnas - mariadb - neutron_dvr - neutron_fwaas - neutron_infoblox_ipam_agent - neutron_metering - neutron_port_forwarding - neutron_qos - neutron_sriov - neutron_vpnaas - osprofiler, - cinder_backup - cinder_backend_zfssa_iscsi - horizon_fwaas - karbor - manila_backend_generic - manila_backend_hnas - mariadb - neutron_vpnaas - neutron_sriov - neutron_dvr - neutron_fwaas - neutron_qos - neutron_metering - neutron_infoblox_ipam_agent - neutron_port_forwarding - osprofiler,98,19
openstack%2Fpython-tripleoclient~stable%2Ftrain~Idac62d37a19ee49f30936e20021a9dab5af40eec,openstack/python-tripleoclient,stable/train,Idac62d37a19ee49f30936e20021a9dab5af40eec,Fix package manager used during undercloud packages update,ABANDONED,2020-07-17 12:37:41.000000000,2020-07-21 10:16:25.000000000,,"[{'_account_id': 8297}, {'_account_id': 8449}, {'_account_id': 11090}, {'_account_id': 20775}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 26343}]","[{'number': 1, 'created': '2020-07-17 12:37:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/1895760a6e79552c5fe7432296fc43206024c9a8', 'message': ""Fix package manager used during undercloud packages update\n\nAs described in the related bug we need to use dnf instead of yum\nfor centos8 otherwise it fails in the undercloud packages update.\n\nI am using the python version to determine - py3 is dnf. As part of\ndiscussion here when dnf isn't available fall back to yum.\n\nFound as part of the work in [1].\n\nRelated-Bug: 1886837\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: Idac62d37a19ee49f30936e20021a9dab5af40eec\n(cherry picked from commit 9c53cb3ef5ad513b05d4888552a3280e0eec43ca)\n""}, {'number': 2, 'created': '2020-07-21 10:00:40.000000000', 'files': ['tripleoclient/v1/undercloud.py', 'tripleoclient/tests/v1/undercloud/test_install_upgrade.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/58388abf895657a05f8c9a12cd1aaa270108cdef', 'message': ""Fix package manager used during undercloud packages update\n\nAs described in the related bug we need to use dnf instead of yum\nfor centos8 otherwise it fails in the undercloud packages update.\n\nI am using the python version to determine - py3 is dnf. As part of\ndiscussion here when dnf isn't available fall back to yum.\n\nFound as part of the work in [1].\n\nRelated-Bug: 1886837\n[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817\n\nChange-Id: Idac62d37a19ee49f30936e20021a9dab5af40eec\n(cherry picked from commit 9c53cb3ef5ad513b05d4888552a3280e0eec43ca)\n""}]",0,741631,58388abf895657a05f8c9a12cd1aaa270108cdef,10,7,2,8449,,,0,"Fix package manager used during undercloud packages update

As described in the related bug we need to use dnf instead of yum
for centos8 otherwise it fails in the undercloud packages update.

I am using the python version to determine - py3 is dnf. As part of
discussion here when dnf isn't available fall back to yum.

Found as part of the work in [1].

Related-Bug: 1886837
[1] https://tree.taiga.io/project/tripleo-ci-board/task/1817

Change-Id: Idac62d37a19ee49f30936e20021a9dab5af40eec
(cherry picked from commit 9c53cb3ef5ad513b05d4888552a3280e0eec43ca)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/31/741631/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/v1/undercloud.py', 'tripleoclient/tests/v1/undercloud/test_install_upgrade.py']",2,1895760a6e79552c5fe7432296fc43206024c9a8,," @mock.patch('os.system') @mock.patch('sys.version_info') mock_subprocess, mock_wr, mock_os_mkdir, mock_copy, mock_user, mock_confirm, mock_sys, mock_os_sys): mock_sys.major = 3 mock_os_sys.return_value = 0 # DisplayCommandBase.take_action() returns two tuples self.cmd.take_action(parsed_args) mock_run_command.assert_called_with( ['sudo', 'dnf', 'upgrade', '-y', 'python2-tripleoclient', 'openstack-tripleo-common', 'openstack-tripleo-heat-templates', 'openstack-tripleo-validations', 'tripleo-ansible'], name='Update extra packages' ) mock_os_sys.assert_called_with(""which dnf"") mock_sys.major = 2"," mock_subprocess, mock_wr, mock_os, mock_copy, mock_user, mock_confirm):",28,5
openstack%2Fcharm-interface-bind-rndc~master~Icdb525c9886937597e35ab8126237a2850604832,openstack/charm-interface-bind-rndc,master,Icdb525c9886937597e35ab8126237a2850604832,Add egress_subnets helper,MERGED,2020-07-21 08:29:37.000000000,2020-07-21 09:55:19.000000000,2020-07-21 09:55:19.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-07-21 08:29:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-interface-bind-rndc/commit/9b7d16c07c7267f342dbb05347be5e63cc30d36d', 'message': 'Add egress_subnets helper\n\nCollate all presented egress_subnets into a list of cidrs\nfor the remote designate servers.\n\nThis will be used by the designate-bind charm to configure\nBIND with a full list of permitted CIDRs if allowed_nets is\nconfigured.\n\nChange-Id: Icdb525c9886937597e35ab8126237a2850604832\nRelated-Bug: 1806485\n'}, {'number': 2, 'created': '2020-07-21 09:02:28.000000000', 'files': ['provides.py'], 'web_link': 'https://opendev.org/openstack/charm-interface-bind-rndc/commit/129240c1909667c2a237433709bd469479fd502f', 'message': 'Add egress_subnets helper\n\nCollate all presented egress_subnets into a list of cidrs\nfor the remote designate servers.\n\nThis will be used by the designate-bind charm to configure\nBIND with a full list of permitted CIDRs if allowed_nets is\nconfigured.\n\nChange-Id: Icdb525c9886937597e35ab8126237a2850604832\nRelated-Bug: 1806485\n'}]",0,742097,129240c1909667c2a237433709bd469479fd502f,10,3,2,935,,,0,"Add egress_subnets helper

Collate all presented egress_subnets into a list of cidrs
for the remote designate servers.

This will be used by the designate-bind charm to configure
BIND with a full list of permitted CIDRs if allowed_nets is
configured.

Change-Id: Icdb525c9886937597e35ab8126237a2850604832
Related-Bug: 1806485
",git fetch https://review.opendev.org/openstack/charm-interface-bind-rndc refs/changes/97/742097/1 && git format-patch -1 --stdout FETCH_HEAD,['provides.py'],1,9b7d16c07c7267f342dbb05347be5e63cc30d36d,bug/1806485, def egress_subnets(self): cidrs = [] for conv in self.conversations(): egress_subnets = conv.get_remote('egress-subnets') if egress_subnets: cidrs.append(egress_subnets) return cidrs,,8,0
openstack%2Fblazar-nova~master~Ic67e23f6b3760a6d2ca4a07dd84c9034d85d9b75,openstack/blazar-nova,master,Ic67e23f6b3760a6d2ca4a07dd84c9034d85d9b75,migrate testing to ubuntu focal,MERGED,2020-07-09 20:13:43.000000000,2020-07-21 09:40:16.000000000,2020-07-21 09:40:16.000000000,"[{'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 25625}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-09 20:13:43.000000000', 'files': ['test-requirements.txt', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/blazar-nova/commit/349e75a811c6fcc54eed128fed783f0bf2aeff78', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the pyflakes to 2.1.1 as min version to run pep8 jobs\non py3.8 which is default python vesion in ubuntu focal.\n\nStory: #2007865\nTask: #40178\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: Ic67e23f6b3760a6d2ca4a07dd84c9034d85d9b75\n'}]",0,740359,349e75a811c6fcc54eed128fed783f0bf2aeff78,8,4,1,8556,,,0,"migrate testing to ubuntu focal

As per victoria cycle testing runtime and community goal[1]
we need to migrate upstream CI/CD to Ubuntu Focal(20.04).

Fixing:
- bug#1886296
Bump the pyflakes to 2.1.1 as min version to run pep8 jobs
on py3.8 which is default python vesion in ubuntu focal.

Story: #2007865
Task: #40178

Closes-Bug: #1886296
[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html

Change-Id: Ic67e23f6b3760a6d2ca4a07dd84c9034d85d9b75
",git fetch https://review.opendev.org/openstack/blazar-nova refs/changes/59/740359/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'lower-constraints.txt']",2,349e75a811c6fcc54eed128fed783f0bf2aeff78,migrate-to-focal,pyflakes==2.1.1,pyflakes==0.8.1,5,1
openstack%2Fpython-blazarclient~master~If5262d4b4c67fddc55125ee3ca9c7f6c34ebade9,openstack/python-blazarclient,master,If5262d4b4c67fddc55125ee3ca9c7f6c34ebade9,migrate testing to ubuntu focal,MERGED,2020-07-09 20:13:03.000000000,2020-07-21 09:40:09.000000000,2020-07-21 09:38:43.000000000,"[{'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 25625}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-09 20:13:03.000000000', 'files': ['test-requirements.txt', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/python-blazarclient/commit/83a20368c87f6b729f1b7825ec6fc0ae25666435', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the pyflakes to 2.1.1 as min version to run pep8 jobs\non py3.8 which is default python vesion in ubuntu focal.\n\nStory: #2007865\nTask: #40178\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: If5262d4b4c67fddc55125ee3ca9c7f6c34ebade9\n'}]",0,740358,83a20368c87f6b729f1b7825ec6fc0ae25666435,9,4,1,8556,,,0,"migrate testing to ubuntu focal

As per victoria cycle testing runtime and community goal[1]
we need to migrate upstream CI/CD to Ubuntu Focal(20.04).

Fixing:
- bug#1886296
Bump the pyflakes to 2.1.1 as min version to run pep8 jobs
on py3.8 which is default python vesion in ubuntu focal.

Story: #2007865
Task: #40178

Closes-Bug: #1886296
[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html

Change-Id: If5262d4b4c67fddc55125ee3ca9c7f6c34ebade9
",git fetch https://review.opendev.org/openstack/python-blazarclient refs/changes/58/740358/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'lower-constraints.txt']",2,83a20368c87f6b729f1b7825ec6fc0ae25666435,migrate-to-focal,pyflakes==2.1.1,pyflakes==0.8.1,6,1
openstack%2Fblazar-tempest-plugin~master~I295c8e2fe6b135833b33cdf9d405d169f358c083,openstack/blazar-tempest-plugin,master,I295c8e2fe6b135833b33cdf9d405d169f358c083,migrate testing to ubuntu focal,MERGED,2020-07-09 20:11:53.000000000,2020-07-21 09:38:00.000000000,2020-07-21 09:36:17.000000000,"[{'_account_id': 8556}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 25625}, {'_account_id': 26458}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-09 20:11:53.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/blazar-tempest-plugin/commit/339c3e1e269c9d3616b38b83b0f0f6d5228e5aef', 'message': 'migrate testing to ubuntu focal\n\nAs per victoria cycle testing runtime and community goal[1]\nwe need to migrate upstream CI/CD to Ubuntu Focal(20.04).\n\nFixing:\n- bug#1886296\nBump the pyflakes to 2.1.1 as min version to run pep8 jobs\non py3.8 which is default python vesion in ubuntu focal.\n\nStory: #2007865\nTask: #40178\n\nCloses-Bug: #1886296\n[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html\n\nChange-Id: I295c8e2fe6b135833b33cdf9d405d169f358c083\n'}]",2,740357,339c3e1e269c9d3616b38b83b0f0f6d5228e5aef,11,6,1,8556,,,0,"migrate testing to ubuntu focal

As per victoria cycle testing runtime and community goal[1]
we need to migrate upstream CI/CD to Ubuntu Focal(20.04).

Fixing:
- bug#1886296
Bump the pyflakes to 2.1.1 as min version to run pep8 jobs
on py3.8 which is default python vesion in ubuntu focal.

Story: #2007865
Task: #40178

Closes-Bug: #1886296
[1] https://governance.openstack.org/tc/goals/selected/victoria/migrate-ci-cd-jobs-to-ubuntu-focal.html

Change-Id: I295c8e2fe6b135833b33cdf9d405d169f358c083
",git fetch https://review.opendev.org/openstack/blazar-tempest-plugin refs/changes/57/740357/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,339c3e1e269c9d3616b38b83b0f0f6d5228e5aef,migrate-to-focal,# remove this pyflakes from here once you bump the # hacking to 3.2.0 or above. hacking 3.2.0 takes # care of pyflakes version compatibilty. pyflakes>=2.1.1,,4,0
openstack%2Fironic~master~I986cc4a936c8679e932463ff3c91d1876a713196,openstack/ironic,master,I986cc4a936c8679e932463ff3c91d1876a713196,"Add wsme core types, remove WSME",MERGED,2020-01-28 02:13:53.000000000,2020-07-21 09:35:37.000000000,2020-07-21 09:05:14.000000000,"[{'_account_id': 4571}, {'_account_id': 10118}, {'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 14629}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-01-28 02:13:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/d2af4d78a870c423a795b01e32c7cd901135371b', 'message': 'WIP Add wsme core types, remove WSME\n\nWIP until there are unit tests\nStory: 1651346\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 2, 'created': '2020-01-28 20:42:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8f07e1315bd0ab8062d26afb488580decbc22d9d', 'message': 'WIP Add wsme core types, remove WSME\n\nWIP until there are unit tests\nStory: 1651346\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 3, 'created': '2020-04-15 05:28:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/38372d69ac2797ea0cb3c5a5d16a8a5763dba2e9', 'message': 'WIP Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nWIP until there are unit tests\nStory: 1651346\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 4, 'created': '2020-04-20 00:43:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/30d96907c3fed68291c3b7fc4dcf97f362a7ca35', 'message': 'WIP Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nWIP until there are unit tests\nStory: 1651346\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 5, 'created': '2020-05-05 05:25:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/572feecc9fda67bfa52cc485a845f29fded80906', 'message': 'WIP Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nWIP until there are unit tests\nStory: 1651346\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 6, 'created': '2020-05-05 23:24:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/8136310911fe967397fe186756a2ff76417835c7', 'message': 'WIP Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nWIP until there are unit tests\nStory: 1651346\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 7, 'created': '2020-05-05 23:49:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/93afb77068dbff81f60660f983d8305bcd140d2d', 'message': 'Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nStory: 1651346\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 8, 'created': '2020-06-02 03:13:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/108e32dd75d22143c18d49313577c7622025d234', 'message': 'Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nStory: 1651346\nTask: 10551\n\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 9, 'created': '2020-07-09 01:26:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/0235023e16719817f485074d48b2084e54966e83', 'message': 'Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nStory: 1651346\nTask: 10551\n\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 10, 'created': '2020-07-09 23:39:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/5acd3886e0ace8004790b0ca956ed622cccdf60c', 'message': 'Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nStory: 1651346\nTask: 10551\n\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}, {'number': 11, 'created': '2020-07-14 23:37:31.000000000', 'files': ['ironic/tests/unit/api/test_types.py', 'ironic/common/exception.py', 'requirements.txt', 'doc/source/conf.py', 'ironic/api/types.py', 'doc/requirements.txt'], 'web_link': 'https://opendev.org/openstack/ironic/commit/44cc6dd7927f71fbfff9b5240186eaeaf2643bb9', 'message': 'Add wsme core types, remove WSME\n\nThe header for the file types.py denotes its dual-licensed status as\nMIT with copyright to the original WSME authors, plus apache licensed\nas part of Ironic.\n\nStory: 1651346\nTask: 10551\n\nChange-Id: I986cc4a936c8679e932463ff3c91d1876a713196\n'}]",2,704490,44cc6dd7927f71fbfff9b5240186eaeaf2643bb9,68,8,11,4571,,,0,"Add wsme core types, remove WSME

The header for the file types.py denotes its dual-licensed status as
MIT with copyright to the original WSME authors, plus apache licensed
as part of Ironic.

Story: 1651346
Task: 10551

Change-Id: I986cc4a936c8679e932463ff3c91d1876a713196
",git fetch https://review.opendev.org/openstack/ironic refs/changes/90/704490/10 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/common/exception.py', 'requirements.txt', 'ironic/api/types.py']",3,d2af4d78a870c423a795b01e32c7cd901135371b,story/1651346,"import base64 import datetime import decimal import inspect import io import re import weakref from oslo_log import log from ironic.common import exception LOG = log.getLogger(__name__) pod_types = (int, bytes, str, float, bool) native_types = pod_types + (datetime.datetime, decimal.Decimal) _promotable_types = (int, str, bytes) class ArrayType(object): def __init__(self, item_type): if iscomplex(item_type): self._item_type = weakref.ref(item_type) else: self._item_type = item_type def __hash__(self): return hash(self.item_type) def __eq__(self, other): return isinstance(other, ArrayType) \ and self.item_type == other.item_type def sample(self): return [getattr(self.item_type, 'sample', self.item_type)()] @property def item_type(self): if isinstance(self._item_type, weakref.ref): return self._item_type() else: return self._item_type def validate(self, value): if value is None: return if not isinstance(value, list): raise ValueError(""Wrong type. Expected '[%s]', got '%s'"" % ( self.item_type, type(value) )) return [ validate_value(self.item_type, item) for item in value ] class DictType(object): def __init__(self, key_type, value_type): if key_type not in (int, bytes, str, float, bool): raise ValueError(""Dictionaries key can only be a pod type"") self.key_type = key_type if iscomplex(value_type): self._value_type = weakref.ref(value_type) else: self._value_type = value_type def __hash__(self): return hash((self.key_type, self.value_type)) def sample(self): key = getattr(self.key_type, 'sample', self.key_type)() value = getattr(self.value_type, 'sample', self.value_type)() return {key: value} @property def value_type(self): if isinstance(self._value_type, weakref.ref): return self._value_type() else: return self._value_type def validate(self, value): if not isinstance(value, dict): raise ValueError(""Wrong type. Expected '{%s: %s}', got '%s'"" % ( self.key_type, self.value_type, type(value) )) return dict(( ( validate_value(self.key_type, key), validate_value(self.value_type, v) ) for key, v in value.items() )) class UserType(object): basetype = None name = None def validate(self, value): return value def tobasetype(self, value): return value def frombasetype(self, value): return value def isusertype(class_): return isinstance(class_, UserType) class BinaryType(UserType): """"""A user type that use base64 strings to carry binary data. """""" basetype = bytes name = 'binary' def tobasetype(self, value): if value is None: return None return base64.encodestring(value) def frombasetype(self, value): if value is None: return None return base64.decodestring(value) #: The binary almost-native type binary = BinaryType() class IntegerType(UserType): """"""A simple integer type. Can validate a value range. :param minimum: Possible minimum value :param maximum: Possible maximum value Example:: Price = IntegerType(minimum=1) """""" basetype = int name = ""integer"" def __init__(self, minimum=None, maximum=None): self.minimum = minimum self.maximum = maximum @staticmethod def frombasetype(value): return int(value) if value is not None else None def validate(self, value): if self.minimum is not None and value < self.minimum: error = 'Value should be greater or equal to %s' % self.minimum raise ValueError(error) if self.maximum is not None and value > self.maximum: error = 'Value should be lower or equal to %s' % self.maximum raise ValueError(error) return value class StringType(UserType): """"""A simple string type. Can validate a length and a pattern. :param min_length: Possible minimum length :param max_length: Possible maximum length :param pattern: Possible string pattern Example:: Name = StringType(min_length=1, pattern='^[a-zA-Z ]*$') """""" basetype = str name = ""string"" def __init__(self, min_length=None, max_length=None, pattern=None): self.min_length = min_length self.max_length = max_length if isinstance(pattern, str): self.pattern = re.compile(pattern) else: self.pattern = pattern def validate(self, value): if not isinstance(value, self.basetype): error = 'Value should be string' raise ValueError(error) if self.min_length is not None and len(value) < self.min_length: error = 'Value should have a minimum character requirement of %s' \ % self.min_length raise ValueError(error) if self.max_length is not None and len(value) > self.max_length: error = 'Value should have a maximum character requirement of %s' \ % self.max_length raise ValueError(error) if self.pattern is not None and not self.pattern.search(value): error = 'Value should match the pattern %s' % self.pattern.pattern raise ValueError(error) return value class Enum(UserType): """"""A simple enumeration type. Can be based on any non-complex type. :param basetype: The actual data type :param values: A set of possible values If nullable, 'None' should be added the values set. Example:: Gender = Enum(str, 'male', 'female') Specie = Enum(str, 'cat', 'dog') """""" def __init__(self, basetype, *values, **kw): self.basetype = basetype self.values = set(values) name = kw.pop('name', None) if name is None: name = ""Enum(%s)"" % ', '.join((str(v) for v in values)) self.name = name def validate(self, value): if value not in self.values: raise ValueError(""Value should be one of: %s"" % ', '.join(map(str, self.values))) return value def tobasetype(self, value): return value def frombasetype(self, value): return value class UnsetType(object): def __bool__(self): return False def __repr__(self): return 'Unset' Unset = UnsetType() def validate_value(datatype, value): if value in (Unset, None): return value # Try to promote the data type to one of our complex types. if isinstance(datatype, list): datatype = ArrayType(datatype[0]) elif isinstance(datatype, dict): datatype = DictType(*list(datatype.items())[0]) # If the datatype has its own validator, use that. if hasattr(datatype, 'validate'): return datatype.validate(value) # Do type promotion/conversion and data validation for builtin # types. v_type = type(value) if datatype == int: if v_type in _promotable_types: try: # Try to turn the value into an int value = datatype(value) except ValueError: # An error is raised at the end of the function # when the types don't match. pass elif datatype is float and v_type in _promotable_types: try: value = float(value) except ValueError: # An error is raised at the end of the function # when the types don't match. pass elif datatype is str and isinstance(value, bytes): value = value.decode() elif datatype is bytes and isinstance(value, str): value = value.encode() if not isinstance(value, datatype): raise ValueError( ""Wrong type. Expected '%s', got '%s'"" % ( datatype, v_type )) return value def iscomplex(datatype): return inspect.isclass(datatype) \ and '_wsme_attributes' in datatype.__dict__ class wsproperty(property): """"""A specialised :class:`property` to define typed-property on complex types. Example:: class MyComplexType(ctypes.Base): def get_aint(self): return self._aint def set_aint(self, value): assert avalue < 10 # Dummy input validation self._aint = value aint = wsproperty(int, get_aint, set_aint, mandatory=True) """""" def __init__(self, datatype, fget, fset=None, mandatory=False, doc=None, name=None): property.__init__(self, fget, fset) #: The property name in the parent python class self.key = None #: The attribute name on the public of the api. #: Defaults to :attr:`key` self.name = name #: property data type self.datatype = datatype #: True if the property is mandatory self.mandatory = mandatory class wsattr(object): """"""Complex type attribute definition. Example:: class MyComplexType(ctypes.Base): optionalvalue = int mandatoryvalue = wsattr(int, mandatory=True) named_value = wsattr(int, name='named.value') After inspection, the non-wsattr attributes will be replaced, and the above class will be equivalent to:: class MyComplexType(ctypes.Base): optionalvalue = wsattr(int) mandatoryvalue = wsattr(int, mandatory=True) """""" def __init__(self, datatype, mandatory=False, name=None, default=Unset, readonly=False): #: The attribute name in the parent python class. #: Set by :func:`inspect_class` self.key = None # will be set by class inspection #: The attribute name on the public of the api. #: Defaults to :attr:`key` self.name = name self._datatype = (datatype,) #: True if the attribute is mandatory self.mandatory = mandatory #: Default value. The attribute will return this instead #: of :data:`Unset` if no value has been set. self.default = default #: If True value cannot be set from json/xml input data self.readonly = readonly self.complextype = None def _get_dataholder(self, instance): dataholder = getattr(instance, '_wsme_dataholder', None) if dataholder is None: dataholder = instance._wsme_DataHolderClass() instance._wsme_dataholder = dataholder return dataholder def __get__(self, instance, owner): if instance is None: return self return getattr( self._get_dataholder(instance), self.key, self.default ) def __set__(self, instance, value): try: value = validate_value(self.datatype, value) except (ValueError, TypeError) as e: raise exception.InvalidInput(self.name, value, str(e)) dataholder = self._get_dataholder(instance) if value is Unset: if hasattr(dataholder, self.key): delattr(dataholder, self.key) else: setattr(dataholder, self.key, value) def __delete__(self, instance): self.__set__(instance, Unset) def _get_datatype(self): if isinstance(self._datatype, tuple): self._datatype = \ self.complextype().__registry__.resolve_type(self._datatype[0]) if isinstance(self._datatype, weakref.ref): return self._datatype() if isinstance(self._datatype, list): return [ item() if isinstance(item, weakref.ref) else item for item in self._datatype ] return self._datatype def _set_datatype(self, datatype): self._datatype = datatype #: attribute data type. Can be either an actual type, #: or a type name, in which case the actual type will be #: determined when needed (generally just before scanning the api). datatype = property(_get_datatype, _set_datatype) def iswsattr(attr): if inspect.isfunction(attr) or inspect.ismethod(attr): return False if isinstance(attr, property) and not isinstance(attr, wsproperty): return False return True def sort_attributes(class_, attributes): """"""Sort a class attributes list. 3 mechanisms are attempted : #. Look for a _wsme_attr_order attribute on the class_. This allow to define an arbitrary order of the attributes (useful for generated types). #. Access the object source code to find the declaration order. #. Sort by alphabetically """""" if not len(attributes): return attrs = dict((a.key, a) for a in attributes) if hasattr(class_, '_wsme_attr_order'): names_order = class_._wsme_attr_order else: names = attrs.keys() names_order = [] try: lines = [] for cls in inspect.getmro(class_): if cls is object: continue lines[len(lines):] = inspect.getsourcelines(cls)[0] for line in lines: line = line.strip().replace("" "", """") if '=' in line: aname = line[:line.index('=')] if aname in names and aname not in names_order: names_order.append(aname) if len(names_order) < len(names): names_order.extend(( name for name in names if name not in names_order)) assert len(names_order) == len(names) except (TypeError, IOError): names_order = list(names) names_order.sort() attributes[:] = [attrs[name] for name in names_order] def inspect_class(class_): """"""Extract a list of (name, wsattr|wsproperty) for the given class_"""""" attributes = [] for name, attr in inspect.getmembers(class_, iswsattr): if name.startswith('_'): continue if inspect.isroutine(attr): continue if isinstance(attr, (wsattr, wsproperty)): attrdef = attr else: if attr not in native_types and ( inspect.isclass(attr) or isinstance(attr, (list, dict))): register_type(attr) attrdef = getattr(class_, '__wsattrclass__', wsattr)(attr) attrdef.key = name if attrdef.name is None: attrdef.name = name attrdef.complextype = weakref.ref(class_) attributes.append(attrdef) setattr(class_, name, attrdef) sort_attributes(class_, attributes) return attributes def list_attributes(class_): """"""Returns a list of a complex type attributes."""""" if not iscomplex(class_): raise TypeError(""%s is not a registered type"") return class_._wsme_attributes def make_dataholder(class_): # the slots are computed outside the class scope to avoid # 'attr' to pullute the class namespace, which leads to weird # things if one of the slots is named 'attr'. slots = [attr.key for attr in class_._wsme_attributes] class DataHolder(object): __slots__ = slots DataHolder.__name__ = class_.__name__ + 'DataHolder' return DataHolder class Registry(object): def __init__(self): self._complex_types = [] self.array_types = set() self.dict_types = set() @property def complex_types(self): return [t() for t in self._complex_types if t()] def register(self, class_): """"""Make sure a type is registered. It is automatically called by :class:`expose() <expose.expose>` and :class:`validate() <expose.validate>`. Unless you want to control when the class inspection is done there is no need to call it. """""" if class_ is None or \ class_ in native_types or \ isinstance(class_, UserType) or iscomplex(class_) or \ isinstance(class_, ArrayType) or isinstance(class_, DictType): return class_ if isinstance(class_, list): if len(class_) != 1: raise ValueError(""Cannot register type %s"" % repr(class_)) dt = ArrayType(class_[0]) self.register(dt.item_type) self.array_types.add(dt) return dt if isinstance(class_, dict): if len(class_) != 1: raise ValueError(""Cannot register type %s"" % repr(class_)) dt = DictType(*list(class_.items())[0]) self.register(dt.value_type) self.dict_types.add(dt) return dt class_._wsme_attributes = None class_._wsme_attributes = inspect_class(class_) class_._wsme_DataHolderClass = make_dataholder(class_) class_.__registry__ = self self._complex_types.append(weakref.ref(class_)) return class_ def reregister(self, class_): """"""Register a type which may already have been registered. """""" self._unregister(class_) return self.register(class_) def _unregister(self, class_): """"""Remove a previously registered type. """""" # Clear the existing attribute reference so it is rebuilt if # the class is registered again later. if hasattr(class_, '_wsme_attributes'): del class_._wsme_attributes # FIXME(dhellmann): This method does not recurse through the # types like register() does. Should it? if isinstance(class_, list): at = ArrayType(class_[0]) try: self.array_types.remove(at) except KeyError: pass elif isinstance(class_, dict): key_type, value_type = list(class_.items())[0] self.dict_types = set( dt for dt in self.dict_types if (dt.key_type, dt.value_type) != (key_type, value_type) ) # We can't use remove() here because the items in # _complex_types are weakref objects pointing to the classes, # so we can't compare with them directly. self._complex_types = [ ct for ct in self._complex_types if ct() is not class_ ] def lookup(self, typename): log.debug('Lookup %s' % typename) modname = None if '.' in typename: modname, typename = typename.rsplit('.', 1) for ct in self._complex_types: ct = ct() if ct is not None and typename == ct.__name__ and ( modname is None or modname == ct.__module__): return ct def resolve_type(self, type_): if isinstance(type_, str): return self.lookup(type_) if isinstance(type_, list): type_ = ArrayType(type_[0]) if isinstance(type_, dict): type_ = DictType(list(type_.keys())[0], list(type_.values())[0]) if isinstance(type_, ArrayType): type_ = ArrayType(self.resolve_type(type_.item_type)) self.array_types.add(type_) elif isinstance(type_, DictType): type_ = DictType( type_.key_type, self.resolve_type(type_.value_type) ) self.dict_types.add(type_) else: type_ = self.register(type_) return type_ # Default type registry registry = Registry() def register_type(class_): return registry.register(class_) class BaseMeta(type): def __new__(cls, name, bases, dct): if bases and bases[0] is not object and '__registry__' not in dct: dct['__registry__'] = registry return type.__new__(cls, name, bases, dct) def __init__(cls, name, bases, dct): if bases and bases[0] is not object and cls.__registry__: cls.__registry__.register(cls) class Base(metaclass=BaseMeta): """"""Base type for complex types"""""" def __init__(self, **kw): for key, value in kw.items(): if hasattr(self, key): setattr(self, key, value) class File(Base): """"""A complex type that represents a file. In the particular case of protocol accepting form encoded data as input, File can be loaded from a form file field. """""" #: The file name filename = str #: Mime type of the content contenttype = str def _get_content(self): if self._content is None and self._file: self._content = self._file.read() return self._content def _set_content(self, value): self._content = value self._file = None #: File content content = wsproperty(binary, _get_content, _set_content) def __init__(self, filename=None, file=None, content=None, contenttype=None, fieldstorage=None): self.filename = filename self.contenttype = contenttype self._file = file self._content = content if fieldstorage is not None: if fieldstorage.file: self._file = fieldstorage.file self.filename = fieldstorage.filename self.contenttype = str(fieldstorage.type) else: self._content = fieldstorage.value @property def file(self): if self._file is None and self._content: self._file = io.BytesIO(self._content) return self._file",from wsme.types import ArrayType # noqa from wsme.types import Base # noqa from wsme.types import DictType # noqa from wsme.types import Enum # noqa from wsme.types import File # noqa from wsme.types import IntegerType # noqa from wsme.types import iscomplex # noqa from wsme.types import isusertype # noqa from wsme.types import list_attributes # noqa from wsme.types import registry # noqa from wsme.types import StringType # noqa from wsme.types import Unset # noqa from wsme.types import UnsetType # noqa from wsme.types import UserType # noqa from wsme.types import validate_value # noqa from wsme.types import wsattr # noqa from wsme.types import wsproperty # noqa,741,21
openstack%2Fnova~stable%2Fqueens~I4afaa0808b75cc31a8dd14663912c162281a1a42,openstack/nova,stable/queens,I4afaa0808b75cc31a8dd14663912c162281a1a42,Check cherry-pick hashes in pep8 tox target,MERGED,2020-07-20 07:33:36.000000000,2020-07-21 09:22:54.000000000,2020-07-21 09:20:47.000000000,"[{'_account_id': 4393}, {'_account_id': 4690}, {'_account_id': 10135}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-07-20 07:33:36.000000000', 'files': ['tox.ini', 'tools/check-cherry-picks.sh'], 'web_link': 'https://opendev.org/openstack/nova/commit/e605600d9e45f1b88ecc5c68c1ec4e24ceea6bd5', 'message': ""Check cherry-pick hashes in pep8 tox target\n\nNOTE(elod.illes): This is a combination of 2 commits: the cherry-pick\nhash checker script and a fix for the script.\n\n1. Check cherry-pick hashes in pep8 tox target\n\nThis adds a tools/ script that checks any cherry-picked hashes\non the current commit (or a provided commit) to make sure that\nall the hashes exist on at least master or stable/.* branches.\nThis should help avoid accidentally merging stable backports\nwhere one of the hashes along the line has changed due to conflicts.\n\n2. Fix cherry-pick check for merge patch\n\nCherry-pick check script validates the proposed patch's commit message.\nIf a patch is not on top of the given branch then Zuul rebases it to\nthe top and the patch becomes a merge patch. In this case the script\nvalidates the merge patch's commit message instead of the original\npatch's commit message and fails.\n\nThis fix selects the parent of the patch if it is a merge patch.\n\n(cherry picked from commit c7c48c6f52c9159767b60a4576ba37726156a5f7)\n(cherry picked from commit 02f213b831d8e1d4a1d8ebb18d1260571fe20b84)\n(cherry picked from commit 7a5111ba2943014b6fd53a5fe7adcd9bc445315e)\n\nChange-Id: I4afaa0808b75cc31a8dd14663912c162281a1a42\n(cherry picked from commit aebc829c4e0d39a160eaaa5ad949c1256c8179e6)\n(cherry picked from commit 5cacfaab82853241022d3a2a0734f82dae59a34b)\n(cherry picked from commit d307b964ce380f2fa57debc6c4c8346ac8736afe)\n(cherry picked from commit c3dd9f86f13a86c901443054de5ad3ab57953901)\n(cherry picked from commit f1ab10b8252bab4123c55a9fc10583710f347cef)\n""}]",0,741883,e605600d9e45f1b88ecc5c68c1ec4e24ceea6bd5,13,6,1,17685,,,0,"Check cherry-pick hashes in pep8 tox target

NOTE(elod.illes): This is a combination of 2 commits: the cherry-pick
hash checker script and a fix for the script.

1. Check cherry-pick hashes in pep8 tox target

This adds a tools/ script that checks any cherry-picked hashes
on the current commit (or a provided commit) to make sure that
all the hashes exist on at least master or stable/.* branches.
This should help avoid accidentally merging stable backports
where one of the hashes along the line has changed due to conflicts.

2. Fix cherry-pick check for merge patch

Cherry-pick check script validates the proposed patch's commit message.
If a patch is not on top of the given branch then Zuul rebases it to
the top and the patch becomes a merge patch. In this case the script
validates the merge patch's commit message instead of the original
patch's commit message and fails.

This fix selects the parent of the patch if it is a merge patch.

(cherry picked from commit c7c48c6f52c9159767b60a4576ba37726156a5f7)
(cherry picked from commit 02f213b831d8e1d4a1d8ebb18d1260571fe20b84)
(cherry picked from commit 7a5111ba2943014b6fd53a5fe7adcd9bc445315e)

Change-Id: I4afaa0808b75cc31a8dd14663912c162281a1a42
(cherry picked from commit aebc829c4e0d39a160eaaa5ad949c1256c8179e6)
(cherry picked from commit 5cacfaab82853241022d3a2a0734f82dae59a34b)
(cherry picked from commit d307b964ce380f2fa57debc6c4c8346ac8736afe)
(cherry picked from commit c3dd9f86f13a86c901443054de5ad3ab57953901)
(cherry picked from commit f1ab10b8252bab4123c55a9fc10583710f347cef)
",git fetch https://review.opendev.org/openstack/nova refs/changes/83/741883/1 && git format-patch -1 --stdout FETCH_HEAD,"['tox.ini', 'tools/check-cherry-picks.sh']",2,e605600d9e45f1b88ecc5c68c1ec4e24ceea6bd5,backport-hash-check,"#!/bin/sh # # A tool to check the cherry-pick hashes from the current git commit message # to verify that they're all on either master or stable/ branches # commit_hash="""" # Check if the patch is a merge patch by counting the number of parents. # If the patch has 2 parents, then the 2nd parent is the patch we want # to validate. parent_number=$(git show --format='%P' --quiet | awk '{print NF}') if [ $parent_number -eq 2 ]; then commit_hash=$(git show --format='%P' --quiet | awk '{print $NF}') fi hashes=$(git show --format='%b' --quiet $commit_hash | sed -nr 's/^.cherry picked from commit (.*).$/\1/p') checked=0 branches+="""" for hash in $hashes; do branch=$(git branch -a --contains ""$hash"" 2>/dev/null| grep -oE '(master|stable/[a-z]+)') if [ $? -ne 0 ]; then echo ""Cherry pick hash $hash not on any master or stable branches"" exit 1 fi branches+="" $branch"" checked=$(($checked + 1)) done if [ $checked -eq 0 ]; then if ! grep -q '^defaultbranch=stable/' .gitreview; then echo ""Checked $checked cherry-pick hashes: OK"" exit 0 else if ! git show --format='%B' --quiet | grep -qi 'stable.*only'; then echo 'Stable branch requires either cherry-pick -x headers or [stable-only] tag!' exit 1 fi fi else echo Checked $checked cherry-pick hashes on branches: $(echo $branches | tr ' ' '\n' | sort | uniq) fi ",,43,0
openstack%2Ftripleo-ansible~stable%2Fussuri~I31cf042b72aad5cdd2c7c1ae8bc319eca372acff,openstack/tripleo-ansible,stable/ussuri,I31cf042b72aad5cdd2c7c1ae8bc319eca372acff,Allow any_errors_fatal to be dynamic,MERGED,2020-07-21 01:46:51.000000000,2020-07-21 09:21:55.000000000,2020-07-21 09:21:54.000000000,"[{'_account_id': 8449}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-21 01:46:51.000000000', 'files': ['tripleo_ansible/ansible_plugins/strategy/tripleo_linear.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_free.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_base.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/561b935adb0b70ddbb93a4ea6dc5e665ed6718fa', 'message': ""Allow any_errors_fatal to be dynamic\n\nCurrently any_errors_fatal cannot be dynamic value based on the current\ntask vars. This change attempts to evaulate the provided value and\nverifies it's a boolean when using it to handle the any_errors_fatal\nlogic.\n\nRelated Upstream: https://github.com/ansible/ansible/pull/70694\nRelated-Bug: #1887702\n\nChange-Id: I31cf042b72aad5cdd2c7c1ae8bc319eca372acff\n(cherry picked from commit 28d4e52a16c21e5f87acdfe72a7f489611c841c9)\n""}]",0,742054,561b935adb0b70ddbb93a4ea6dc5e665ed6718fa,7,4,1,3153,,,0,"Allow any_errors_fatal to be dynamic

Currently any_errors_fatal cannot be dynamic value based on the current
task vars. This change attempts to evaulate the provided value and
verifies it's a boolean when using it to handle the any_errors_fatal
logic.

Related Upstream: https://github.com/ansible/ansible/pull/70694
Related-Bug: #1887702

Change-Id: I31cf042b72aad5cdd2c7c1ae8bc319eca372acff
(cherry picked from commit 28d4e52a16c21e5f87acdfe72a7f489611c841c9)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/54/742054/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/ansible_plugins/strategy/tripleo_linear.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_free.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_base.py']",3,561b935adb0b70ddbb93a4ea6dc5e665ed6718fa,bug/1887702-stable/ussuri," def _get_task_errors_fatal(self, task, templar): """"""Return parsed any_errors_fatal from a task"""""" return task.get_validated_value('any_errors_fatal', task._valid_attrs['any_errors_fatal'], templar.template( task.any_errors_fatal), None) ",,30,20
openstack%2Ftooz~master~I5ea06ebd2b976465ff82f10a74e140f30e9e803f,openstack/tooz,master,I5ea06ebd2b976465ff82f10a74e140f30e9e803f,Fix breakage with PyMySQL 0.10.0,MERGED,2020-07-20 13:43:25.000000000,2020-07-21 09:21:28.000000000,2020-07-20 20:48:58.000000000,"[{'_account_id': 6928}, {'_account_id': 10239}, {'_account_id': 11816}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-20 13:43:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tooz/commit/4d239d39acedf0e4b642b57f1eb88cbf739e7904', 'message': ""Fix breakage with PyMySQL 0.10.0\n\nIn this version a Connection is no longer a context manager. Fix\nit by simply getting a Cursor out of it (locks don't seem to\ninteract with transactions, at least according to MariaDB docs).\n\nChange-Id: I5ea06ebd2b976465ff82f10a74e140f30e9e803f\n""}, {'number': 2, 'created': '2020-07-20 13:52:44.000000000', 'files': ['tooz/drivers/mysql.py', 'releasenotes/notes/mysql-0.10.0-7660f75a1c57a920.yaml'], 'web_link': 'https://opendev.org/openstack/tooz/commit/d59b283440e96959e6ad1b9ce2aa154c31e71480', 'message': ""Fix breakage with PyMySQL 0.10.0\n\nIn this version a Connection is no longer a context manager. Fix\nit by simply getting a Cursor out of it (locks don't seem to\ninteract with transactions, at least according to MariaDB docs).\n\nChange-Id: I5ea06ebd2b976465ff82f10a74e140f30e9e803f\n""}]",2,741945,d59b283440e96959e6ad1b9ce2aa154c31e71480,13,5,2,10239,,,0,"Fix breakage with PyMySQL 0.10.0

In this version a Connection is no longer a context manager. Fix
it by simply getting a Cursor out of it (locks don't seem to
interact with transactions, at least according to MariaDB docs).

Change-Id: I5ea06ebd2b976465ff82f10a74e140f30e9e803f
",git fetch https://review.opendev.org/openstack/tooz refs/changes/45/741945/2 && git format-patch -1 --stdout FETCH_HEAD,['tooz/drivers/mysql.py'],1,4d239d39acedf0e4b642b57f1eb88cbf739e7904,mysql," cur = self._conn.cursor() cur.execute(""SELECT GET_LOCK(%s, 0);"", self.name) # Can return NULL on error if cur.fetchone()[0] == 1: self.acquired = True return True cur = self._conn.cursor() cur.execute(""SELECT RELEASE_LOCK(%s);"", self.name) cur.fetchone()"," with self._conn as cur: cur.execute(""SELECT GET_LOCK(%s, 0);"", self.name) # Can return NULL on error if cur.fetchone()[0] == 1: self.acquired = True return True with self._conn as cur: cur.execute(""SELECT RELEASE_LOCK(%s);"", self.name) cur.fetchone()",9,9
openstack%2Fhorizon~master~I1e2d1b367840e28a60c93e07cbe92a10b9b0f63c,openstack/horizon,master,I1e2d1b367840e28a60c93e07cbe92a10b9b0f63c,Imported Translations from Zanata,MERGED,2020-07-21 06:49:57.000000000,2020-07-21 09:16:13.000000000,2020-07-21 09:14:06.000000000,"[{'_account_id': 22348}, {'_account_id': 29313}]","[{'number': 1, 'created': '2020-07-21 06:49:57.000000000', 'files': ['releasenotes/source/locale/en_GB/LC_MESSAGES/releasenotes.po'], 'web_link': 'https://opendev.org/openstack/horizon/commit/11a04772f31cc55d57bc5ebea854fb0ee7ef2103', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: I1e2d1b367840e28a60c93e07cbe92a10b9b0f63c\n'}]",0,742077,11a04772f31cc55d57bc5ebea854fb0ee7ef2103,7,2,1,11131,,,0,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: I1e2d1b367840e28a60c93e07cbe92a10b9b0f63c
",git fetch https://review.opendev.org/openstack/horizon refs/changes/77/742077/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/source/locale/en_GB/LC_MESSAGES/releasenotes.po'],1,11a04772f31cc55d57bc5ebea854fb0ee7ef2103,zanata/translations,"""POT-Creation-Date: 2020-07-13 05:40+0000\n""""PO-Revision-Date: 2020-07-20 03:35+0000\n""msgid ""18.4.1-7"" msgstr ""18.4.1-7""","""POT-Creation-Date: 2020-07-07 08:21+0000\n""""PO-Revision-Date: 2020-07-09 08:04+0000\n""msgid ""18.4.1-6"" msgstr ""18.4.1-6""",4,4
openstack%2Fceilometer~master~Ic2e8e7cc0b86c8a750dda68761d9ca99148773b7,openstack/ceilometer,master,Ic2e8e7cc0b86c8a750dda68761d9ca99148773b7,Add release note link in README,MERGED,2018-07-10 07:23:13.000000000,2020-07-21 09:07:59.000000000,2020-07-21 09:05:20.000000000,"[{'_account_id': 1669}, {'_account_id': 4264}, {'_account_id': 6763}, {'_account_id': 10311}, {'_account_id': 14320}, {'_account_id': 15843}, {'_account_id': 16222}, {'_account_id': 19944}, {'_account_id': 22348}, {'_account_id': 27078}, {'_account_id': 28356}, {'_account_id': 28427}, {'_account_id': 32029}]","[{'number': 1, 'created': '2018-07-10 07:23:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/69fdcff9a2386b7a0267925b14d8f46ed87428d8', 'message': 'Add release note link in README\n\nChange-Id: Ic2e8e7cc0b86c8a750dda68761d9ca99148773b7\n'}, {'number': 2, 'created': '2018-07-18 06:52:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/e32c20db8ea459cb5609a5f60c61e5ae964ae0c7', 'message': 'Add release note link in README\n\nChange-Id: Ic2e8e7cc0b86c8a750dda68761d9ca99148773b7\n'}, {'number': 3, 'created': '2018-11-01 17:23:31.000000000', 'files': ['README.rst'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/bdd242e4a44f52aad838bb9f74529f2b7364fd3f', 'message': 'Add release note link in README\n\nChange-Id: Ic2e8e7cc0b86c8a750dda68761d9ca99148773b7\n'}]",1,581229,bdd242e4a44f52aad838bb9f74529f2b7364fd3f,36,13,3,28427,,,0,"Add release note link in README

Change-Id: Ic2e8e7cc0b86c8a750dda68761d9ca99148773b7
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/29/581229/2 && git format-patch -1 --stdout FETCH_HEAD,['README.rst'],1,69fdcff9a2386b7a0267925b14d8f46ed87428d8,add_release_note,Release notes ------------ - Server: https://docs.openstack.org/releasenotes/ceilometer/ ,,4,0
openstack%2Fceilometer~master~I7f614624ab732be4919298ce23de192555a7fb18,openstack/ceilometer,master,I7f614624ab732be4919298ce23de192555a7fb18,Added missing Ceilometer configuration step for controller in docs.,MERGED,2018-12-18 06:44:48.000000000,2020-07-21 08:58:11.000000000,2020-07-21 08:56:36.000000000,"[{'_account_id': 4264}, {'_account_id': 14107}, {'_account_id': 15843}, {'_account_id': 22348}, {'_account_id': 28356}, {'_account_id': 30619}]","[{'number': 1, 'created': '2018-12-18 06:44:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/ed44bafa6a52a0143e6cf202c5f0fbde20ba737c', 'message': 'Added missing Ceilometer configuration step for controller in docs.\n\nChange-Id: I7f614624ab732be4919298ce23de192555a7fb18\nReference: https://docs.openstack.org/ceilometer/latest/install/install-base-ubuntu.html\nCloses-bug: #1802918\n'}, {'number': 2, 'created': '2020-06-19 22:02:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/059a0903f90489d4c6f733780fff6e8e0595907a', 'message': 'Added missing Ceilometer configuration step for controller in docs.\n\nCo-Authored-By: Jason Anderson <jasonanderson@uchicago.edu>\nChange-Id: I7f614624ab732be4919298ce23de192555a7fb18\nReference: https://docs.openstack.org/ceilometer/latest/install/install-base-ubuntu.html\nCloses-bug: #1802918\n'}, {'number': 3, 'created': '2020-06-19 22:04:42.000000000', 'files': ['doc/source/install/install-base-ubuntu.rst', 'doc/source/install/install-base-prereq-common.inc'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/71e50362de6481eb03154a26848903f788f44581', 'message': 'Added missing Ceilometer configuration step for controller in docs.\n\nCo-Authored-By: Rafael Weingärtner <rafael@apache.org>\nChange-Id: I7f614624ab732be4919298ce23de192555a7fb18\nReference: https://docs.openstack.org/ceilometer/latest/install/install-base-ubuntu.html\nCloses-bug: #1802918\n'}]",2,625806,71e50362de6481eb03154a26848903f788f44581,16,6,3,29360,,,0,"Added missing Ceilometer configuration step for controller in docs.

Co-Authored-By: Rafael Weingärtner <rafael@apache.org>
Change-Id: I7f614624ab732be4919298ce23de192555a7fb18
Reference: https://docs.openstack.org/ceilometer/latest/install/install-base-ubuntu.html
Closes-bug: #1802918
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/06/625806/1 && git format-patch -1 --stdout FETCH_HEAD,"['.idea/vcs.xml', 'doc/source/install/install-base-ubuntu.rst', 'doc/source/install/install-base-prereq-common.inc']",3,ed44bafa6a52a0143e6cf202c5f0fbde20ba737c,bug/1802918," * Create the ``ceilometer`` service entity: .. code-block:: console $ openstack service create --name ceilometer \ --description ""Telemetry"" metering +-------------+----------------------------------+ | Field | Value | +-------------+----------------------------------+ | description | Telemetry | | enabled | True | | id | 5fb7fd1bb2954fddb378d4031c28c0e4 | | name | ceilometer | | type | metering | +-------------+----------------------------------+ ",,23,1
openstack%2Fceilometer~master~Ibfcfefc6e6bb57a2897b811783aae7827fb8d9cf,openstack/ceilometer,master,Ibfcfefc6e6bb57a2897b811783aae7827fb8d9cf,Add hardware.ipmi.power metric collected,ABANDONED,2019-10-10 12:51:57.000000000,2020-07-21 08:49:59.000000000,,"[{'_account_id': 1669}, {'_account_id': 2813}, {'_account_id': 4264}, {'_account_id': 6732}, {'_account_id': 14107}, {'_account_id': 22348}, {'_account_id': 32029}]","[{'number': 1, 'created': '2019-10-10 12:51:57.000000000', 'files': ['ceilometer/tests/unit/ipmi/notifications/ipmi_test_data.py', 'ceilometer/ipmi/notifications/ironic.py', 'ceilometer/publisher/data/gnocchi_resources.yaml', 'ceilometer/tests/unit/ipmi/notifications/test_ironic.py', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/4f5ad19f06c41263237757defbddfad75a04882b', 'message': ""Add hardware.ipmi.power metric collected\n\nAccording to https://review.opendev.org/#/c/542949/, we should add\nPowerSensorNotification to collect hardware.ipmi.power metric. At the\nsame time, we should add hardware.ipmi.fan to gnocchi_resources.yaml to\navoid that hardware.ipmi.fan can't be collected.\n\nChange-Id: Ibfcfefc6e6bb57a2897b811783aae7827fb8d9cf\nStory: #2006699\nTask: #37006\n""}]",2,687885,4f5ad19f06c41263237757defbddfad75a04882b,6,7,1,17144,,,0,"Add hardware.ipmi.power metric collected

According to https://review.opendev.org/#/c/542949/, we should add
PowerSensorNotification to collect hardware.ipmi.power metric. At the
same time, we should add hardware.ipmi.fan to gnocchi_resources.yaml to
avoid that hardware.ipmi.fan can't be collected.

Change-Id: Ibfcfefc6e6bb57a2897b811783aae7827fb8d9cf
Story: #2006699
Task: #37006
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/85/687885/1 && git format-patch -1 --stdout FETCH_HEAD,"['ceilometer/tests/unit/ipmi/notifications/ipmi_test_data.py', 'ceilometer/ipmi/notifications/ironic.py', 'ceilometer/publisher/data/gnocchi_resources.yaml', 'ceilometer/tests/unit/ipmi/notifications/test_ironic.py', 'setup.cfg']",5,4f5ad19f06c41263237757defbddfad75a04882b,bug/2006699, hardware.ipmi.power = ceilometer.ipmi.pollsters.sensor:PowerSensorNotification,,52,1
openstack%2Fceilometer~master~Ib33a3f49647d86fae826f416825a85433730b391,openstack/ceilometer,master,Ib33a3f49647d86fae826f416825a85433730b391,Remove glance-registry from docs,MERGED,2020-07-07 15:30:09.000000000,2020-07-21 08:46:28.000000000,2020-07-21 08:44:15.000000000,"[{'_account_id': 4264}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-07 15:30:09.000000000', 'files': ['doc/source/install/glance/install-glance-ubuntu.rst', 'doc/source/install/glance/install-glance-obs.rst', 'doc/source/install/glance/install-glance-rdo.rst'], 'web_link': 'https://opendev.org/openstack/ceilometer/commit/1456ef0af660524dd5780c760612cbbee53ba516', 'message': 'Remove glance-registry from docs\n\nglance-registry service was deprecated in Queens release and has been\nremoved in Victoria [1].\n\n[1] https://review.opendev.org/#/c/738671/\n\nChange-Id: Ib33a3f49647d86fae826f416825a85433730b391\n'}]",0,739797,1456ef0af660524dd5780c760612cbbee53ba516,7,2,1,30356,,,0,"Remove glance-registry from docs

glance-registry service was deprecated in Queens release and has been
removed in Victoria [1].

[1] https://review.opendev.org/#/c/738671/

Change-Id: Ib33a3f49647d86fae826f416825a85433730b391
",git fetch https://review.opendev.org/openstack/ceilometer refs/changes/97/739797/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/install/glance/install-glance-ubuntu.rst', 'doc/source/install/glance/install-glance-obs.rst', 'doc/source/install/glance/install-glance-rdo.rst']",3,1456ef0af660524dd5780c760612cbbee53ba516,,* Edit the ``/etc/glance/glance-api.conf`` file and # systemctl restart openstack-glance-api.service,* Edit the ``/etc/glance/glance-api.conf`` and ``/etc/glance/glance-registry.conf`` files and # systemctl restart openstack-glance-api.service openstack-glance-registry.service,5,9
openstack%2Fcharm-keystone~master~Ic0a245fea8e49efdc7bddbd0ff63aeed4128db72,openstack/charm-keystone,master,Ic0a245fea8e49efdc7bddbd0ff63aeed4128db72,Add Victoria test bundles,MERGED,2020-07-20 21:43:23.000000000,2020-07-21 08:30:57.000000000,2020-07-21 08:30:57.000000000,"[{'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 21:43:23.000000000', 'files': ['tests/tests.yaml', 'tests/bundles/focal-victoria.yaml', 'tests/bundles/groovy-victoria.yaml'], 'web_link': 'https://opendev.org/openstack/charm-keystone/commit/76efbf0037c78a34f6e8e58a015093e784aaf4b2', 'message': 'Add Victoria test bundles\n\nChange-Id: Ic0a245fea8e49efdc7bddbd0ff63aeed4128db72\n'}]",0,742032,76efbf0037c78a34f6e8e58a015093e784aaf4b2,7,3,1,31289,,,0,"Add Victoria test bundles

Change-Id: Ic0a245fea8e49efdc7bddbd0ff63aeed4128db72
",git fetch https://review.opendev.org/openstack/charm-keystone refs/changes/32/742032/1 && git format-patch -1 --stdout FETCH_HEAD,"['tests/tests.yaml', 'tests/bundles/focal-victoria.yaml', 'tests/bundles/groovy-victoria.yaml']",3,76efbf0037c78a34f6e8e58a015093e784aaf4b2,victoria-charm-tests,variables: openstack-origin: &openstack-origin distro series: groovy comment: - 'machines section to decide order of deployment. database sooner = faster' machines: '0': constraints: mem=3072M '1': constraints: mem=3072M '2': constraints: mem=3072M '3': '4': '5': '6': applications: glance-mysql-router: charm: cs:~openstack-charmers-next/mysql-router keystone-mysql-router: charm: cs:~openstack-charmers-next/mysql-router mysql-innodb-cluster: charm: cs:~openstack-charmers-next/mysql-innodb-cluster num_units: 3 options: source: *openstack-origin to: - '0' - '1' - '2' keystone: charm: ../../../keystone num_units: 3 options: openstack-origin: *openstack-origin token-provider: 'fernet' token-expiration: 300 to: - '3' - '4' - '5' glance: charm: cs:~openstack-charmers-next/glance num_units: 1 options: openstack-origin: *openstack-origin to: - '6' relations: - - 'keystone:shared-db' - 'keystone-mysql-router:shared-db' - - 'glance:shared-db' - 'glance-mysql-router:shared-db' - - 'glance:identity-service' - 'keystone:identity-service' - - 'glance-mysql-router:db-router' - 'mysql-innodb-cluster:db-router' - - 'keystone-mysql-router:db-router' - 'mysql-innodb-cluster:db-router' ,,139,2
openstack%2Frequirements~master~Ic2a38b77b5c217f769f67ed1c45d3aeb90d9cbff,openstack/requirements,master,Ic2a38b77b5c217f769f67ed1c45d3aeb90d9cbff,Pin dnspython to 1.16.0 as eventlet fails with 2.0.0,MERGED,2020-07-20 16:30:31.000000000,2020-07-21 08:29:13.000000000,2020-07-21 02:58:00.000000000,"[{'_account_id': 4690}, {'_account_id': 10135}, {'_account_id': 11604}, {'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 16688}, {'_account_id': 17685}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 16:30:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/99826e064235f324875dd838fa7a8d1c9ea388a5', 'message': 'Pin dnspython to 1.16.0 as eventlet fails with 2.0.0\n\nAs per issue https://github.com/eventlet/eventlet/issues/619 eventlet is\nnot compatible with dnspython 2.0.0 making nova novnc proxy to fail if\nTLS is configured.\n\nCloses-Bug: #1888237\nChange-Id: Ic2a38b77b5c217f769f67ed1c45d3aeb90d9cbff\n'}, {'number': 2, 'created': '2020-07-20 18:25:18.000000000', 'files': ['global-requirements.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/8d3ac6ba5d6b07ecf3d9cd787c5664b27c5e1efe', 'message': 'Pin dnspython to 1.16.0 as eventlet fails with 2.0.0\n\nAs per issue https://github.com/eventlet/eventlet/issues/619 eventlet is\nnot compatible with dnspython 2.0.0 making nova novnc proxy to fail if\nTLS is configured.\n\nCloses-Bug: #1888237\nChange-Id: Ic2a38b77b5c217f769f67ed1c45d3aeb90d9cbff\n'}]",4,741986,8d3ac6ba5d6b07ecf3d9cd787c5664b27c5e1efe,31,9,2,9708,,,0,"Pin dnspython to 1.16.0 as eventlet fails with 2.0.0

As per issue https://github.com/eventlet/eventlet/issues/619 eventlet is
not compatible with dnspython 2.0.0 making nova novnc proxy to fail if
TLS is configured.

Closes-Bug: #1888237
Change-Id: Ic2a38b77b5c217f769f67ed1c45d3aeb90d9cbff
",git fetch https://review.opendev.org/openstack/requirements refs/changes/86/741986/2 && git format-patch -1 --stdout FETCH_HEAD,"['global-requirements.txt', 'upper-constraints.txt']",2,99826e064235f324875dd838fa7a8d1c9ea388a5,bug/1888237,# eventlet is not compatible with 2.0.0 https://github.com/eventlet/eventlet/issues/619 dnspython===1.16.0,dnspython===2.0.0,4,2
openstack%2Ftripleo-heat-templates~master~I50b3a803dcdd03d7332697739cdb4ad0f55e879d,openstack/tripleo-heat-templates,master,I50b3a803dcdd03d7332697739cdb4ad0f55e879d,Add parameter to set spare amphorae pool size,ABANDONED,2020-01-28 12:00:47.000000000,2020-07-21 08:01:24.000000000,,"[{'_account_id': 6681}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-01-28 12:00:47.000000000', 'files': ['releasenotes/notes/add-spare-amphorae-pool-size-parameter-6b76dd617bfca808.yaml', 'deployment/octavia/octavia-housekeeping-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/494a95e19d448a8e676b381519e985249e4edc59', 'message': 'Add parameter to set spare amphorae pool size\n\nThis patch adds a THT parameter to configure the number of spare\namphorae the Octavia Housekeeping service should maintain.\n\nChange-Id: I50b3a803dcdd03d7332697739cdb4ad0f55e879d\n'}]",0,704542,494a95e19d448a8e676b381519e985249e4edc59,4,3,1,6469,,,0,"Add parameter to set spare amphorae pool size

This patch adds a THT parameter to configure the number of spare
amphorae the Octavia Housekeeping service should maintain.

Change-Id: I50b3a803dcdd03d7332697739cdb4ad0f55e879d
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/42/704542/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/add-spare-amphorae-pool-size-parameter-6b76dd617bfca808.yaml', 'deployment/octavia/octavia-housekeeping-container-puppet.yaml']",2,494a95e19d448a8e676b381519e985249e4edc59,, OctaviaSpareAmphoraePoolSize: default: 0 description: Number of spare amphorae. type: number octavia::housekeeping::spare_amphorae_pool_size: {get_param: OctaviaSpareAmphoraePoolSize},,10,0
openstack%2Ftripleo-common~stable%2Ftrain~I2e9fc7b9e9005fce7d956f1b936054e540b39849,openstack/tripleo-common,stable/train,I2e9fc7b9e9005fce7d956f1b936054e540b39849,ansible: limit_hosts now takes precedence over blacklisted_hostnames,MERGED,2020-07-15 18:12:34.000000000,2020-07-21 07:58:48.000000000,2020-07-21 07:56:57.000000000,"[{'_account_id': 3153}, {'_account_id': 9976}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}]","[{'number': 1, 'created': '2020-07-15 18:12:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/9180c49ebfc1446502e1be4a27e34a429a2ea084', 'message': ""ansible: limit_hosts now takes precedence over blacklisted_hostnames\n\nFrom now, limit_hosts will take precedence over the blacklisted_hostnames.\nAnd therefore Ansible won't be run with two --limit if both limit hosts\nand blacklisted hostnames are in use. When we want to run Ansible on\nspecific hosts, we will ignore the blacklisted nodes and assume we know\nwhat we do. In the case of the scale-down scenario, the unreachable nodes\nare ignored.\n\nNote: adding unit tests coverage for both parameters.\n\nChange-Id: I2e9fc7b9e9005fce7d956f1b936054e540b39849\nCloses-Bug: #1857298\n(cherry picked from commit 8cd3b14925868f52b9b75814c1066078eac94abd)\n""}, {'number': 2, 'created': '2020-07-16 02:22:16.000000000', 'files': ['tripleo_common/actions/ansible.py', 'tripleo_common/tests/actions/test_ansible.py', 'releasenotes/notes/limit_over_blacklist-3ce81ecf04b09997.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/d9433a5af01d6f09be47f4077a74eefdc6ef3738', 'message': ""ansible: limit_hosts now takes precedence over blacklisted_hostnames\n\nFrom now, limit_hosts will take precedence over the blacklisted_hostnames.\nAnd therefore Ansible won't be run with two --limit if both limit hosts\nand blacklisted hostnames are in use. When we want to run Ansible on\nspecific hosts, we will ignore the blacklisted nodes and assume we know\nwhat we do. In the case of the scale-down scenario, the unreachable nodes\nare ignored.\n\nNote: adding unit tests coverage for both parameters.\nNote-bis: unit tests aren't clean backport on train, since Ansible CLI\nwasn't exactly the same.\n\nChange-Id: I2e9fc7b9e9005fce7d956f1b936054e540b39849\nCloses-Bug: #1857298\n(cherry picked from commit 8cd3b14925868f52b9b75814c1066078eac94abd)\n""}]",0,741293,d9433a5af01d6f09be47f4077a74eefdc6ef3738,36,6,2,3153,,,0,"ansible: limit_hosts now takes precedence over blacklisted_hostnames

From now, limit_hosts will take precedence over the blacklisted_hostnames.
And therefore Ansible won't be run with two --limit if both limit hosts
and blacklisted hostnames are in use. When we want to run Ansible on
specific hosts, we will ignore the blacklisted nodes and assume we know
what we do. In the case of the scale-down scenario, the unreachable nodes
are ignored.

Note: adding unit tests coverage for both parameters.
Note-bis: unit tests aren't clean backport on train, since Ansible CLI
wasn't exactly the same.

Change-Id: I2e9fc7b9e9005fce7d956f1b936054e540b39849
Closes-Bug: #1857298
(cherry picked from commit 8cd3b14925868f52b9b75814c1066078eac94abd)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/93/741293/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_common/actions/ansible.py', 'tripleo_common/tests/actions/test_ansible.py', 'releasenotes/notes/limit_over_blacklist-3ce81ecf04b09997.yaml']",3,9180c49ebfc1446502e1be4a27e34a429a2ea084,train/1857298,"--- fixes: - | Fix `bug 1887692 <https://bugs.launchpad.net/tripleo/+bug/1887692>`__ so limit_hosts will take precedence over the blacklisted_hostnames. And therefore Ansible won't be run with two --limit if both limit hosts and blacklisted hostnames are in use. When we want to run Ansible on specific hosts, we will ignore the blacklisted nodes and assume we know what we do. In the case of the scale-down scenario, the unreachable nodes are ignored. ",,100,5
openstack%2Ftripleo-common~master~Ia7792622f6cfad98a47bee8c799c4e247d9cf602,openstack/tripleo-common,master,Ia7792622f6cfad98a47bee8c799c4e247d9cf602,"Revert ""Remove chunk size for url stream""",MERGED,2019-11-06 17:42:41.000000000,2020-07-21 07:58:46.000000000,2020-07-21 07:56:56.000000000,"[{'_account_id': 7144}, {'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2019-11-06 17:42:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/7d98c6e91a7510788754cb5e558fa33e28a31730', 'message': 'Revert ""Remove chunk size for url stream""\n\nThis reverts commit 5cbb6bee6a15ed8f6cc249ea5b9d9157cac40a2a.\n\nAdding chunk_size back in to see if it improves the memory usage that\noccurs when processing multiple layers at the same time.\n\nChange-Id: Ia7792622f6cfad98a47bee8c799c4e247d9cf602\nRelated-Bug: #1850188\n'}, {'number': 2, 'created': '2019-11-06 18:12:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/3439dacaa4371b555afaa0c03aee817cb1b76fde', 'message': 'Revert ""Remove chunk size for url stream""\n\nThis reverts commit 5cbb6bee6a15ed8f6cc249ea5b9d9157cac40a2a.\n\nAdding chunk_size back in to see if it improves the memory usage that\noccurs when processing multiple layers at the same time.\n\nChange-Id: Ia7792622f6cfad98a47bee8c799c4e247d9cf602\n'}, {'number': 3, 'created': '2020-03-02 17:38:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/15b1d46674159171d5555f3b13d878335bafeecf', 'message': 'Revert ""Remove chunk size for url stream""\n\nThis reverts commit 5cbb6bee6a15ed8f6cc249ea5b9d9157cac40a2a.\n\nAdding chunk_size back in to see if it improves the memory usage that\noccurs when processing multiple layers at the same time.\n\nChange-Id: Ia7792622f6cfad98a47bee8c799c4e247d9cf602\n'}, {'number': 4, 'created': '2020-07-20 19:58:54.000000000', 'files': ['tripleo_common/image/image_uploader.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/d2431b9523b64b833cb4ebcdaf2b4a9282d85ccf', 'message': 'Revert ""Remove chunk size for url stream""\n\nThis reverts commit 5cbb6bee6a15ed8f6cc249ea5b9d9157cac40a2a.\n\nAdding chunk_size back in to see if it improves the memory usage that\noccurs when processing multiple layers at the same time.\n\nChange-Id: Ia7792622f6cfad98a47bee8c799c4e247d9cf602\n'}]",0,693225,d2431b9523b64b833cb4ebcdaf2b4a9282d85ccf,17,4,4,14985,,,0,"Revert ""Remove chunk size for url stream""

This reverts commit 5cbb6bee6a15ed8f6cc249ea5b9d9157cac40a2a.

Adding chunk_size back in to see if it improves the memory usage that
occurs when processing multiple layers at the same time.

Change-Id: Ia7792622f6cfad98a47bee8c799c4e247d9cf602
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/25/693225/4 && git format-patch -1 --stdout FETCH_HEAD,['tripleo_common/image/image_uploader.py'],1,7d98c6e91a7510788754cb5e558fa33e28a31730,memory-usage, chunk_size = 2 ** 20, # NOTE(aschultz): We specify None and let requests figure it out chunk_size = None,1,2
openstack%2Fansible-role-collect-logs~master~I020d3cb1b6bd8ecfb69b4b52a2f7e39f066114f1,openstack/ansible-role-collect-logs,master,I020d3cb1b6bd8ecfb69b4b52a2f7e39f066114f1,Add node provision timeout pattern,MERGED,2020-07-21 06:38:54.000000000,2020-07-21 07:56:59.000000000,2020-07-21 07:56:59.000000000,"[{'_account_id': 10969}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-21 06:38:54.000000000', 'files': ['vars/sova-patterns.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-collect-logs/commit/62857fc9e11c6c4b5b9b46379dba4dda60a4d905', 'message': 'Add node provision timeout pattern\n\nChange-Id: I020d3cb1b6bd8ecfb69b4b52a2f7e39f066114f1\n'}]",0,742076,62857fc9e11c6c4b5b9b46379dba4dda60a4d905,6,2,1,10969,,,0,"Add node provision timeout pattern

Change-Id: I020d3cb1b6bd8ecfb69b4b52a2f7e39f066114f1
",git fetch https://review.opendev.org/openstack/ansible-role-collect-logs refs/changes/76/742076/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/sova-patterns.yml'],1,62857fc9e11c6c4b5b9b46379dba4dda60a4d905,, - id: 203 logstash: 'Timeout reached while waiting for callback for node' msg: 'Node provision timeout.' pattern: 'Timeout reached while waiting for callback for node' tag: 'infra',,5,0
openstack%2Fansible-role-collect-logs~master~Ied981bd97a9334300dca00a86a63ca4fc3aebaa7,openstack/ansible-role-collect-logs,master,Ied981bd97a9334300dca00a86a63ca4fc3aebaa7,Add tempest failure pattern to sova,MERGED,2020-07-20 15:27:45.000000000,2020-07-21 07:56:58.000000000,2020-07-21 07:56:58.000000000,"[{'_account_id': 10969}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 15:27:45.000000000', 'files': ['vars/sova-patterns.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-collect-logs/commit/2dd8f51782fae0a949a7cc239fe9fc4e0799c2b8', 'message': 'Add tempest failure pattern to sova\n\nAnd make all introspection messages have the same format.\n\nChange-Id: Ied981bd97a9334300dca00a86a63ca4fc3aebaa7\n'}]",0,741968,2dd8f51782fae0a949a7cc239fe9fc4e0799c2b8,7,3,1,10969,,,0,"Add tempest failure pattern to sova

And make all introspection messages have the same format.

Change-Id: Ied981bd97a9334300dca00a86a63ca4fc3aebaa7
",git fetch https://review.opendev.org/openstack/ansible-role-collect-logs refs/changes/68/741968/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/sova-patterns.yml'],1,2dd8f51782fae0a949a7cc239fe9fc4e0799c2b8,," msg: ""Introspection failed."" msg: ""Introspection failed."" msg: ""Introspection failed."" - id: 90 msg: ""Tempest failed."" pattern: 'Playbook run of baremetal-full-overcloud-validate.yml failed' tag: ""infra"" logstash: ""Playbook run of baremetal-full-overcloud-validate.yml failed"" msg: ""Introspection failed."""," msg: ""Ironic introspection FAIL."" msg: ""Ironic introspection FAIL."" msg: ""Introspection FAIL."" msg: ""Introspection FAIL.""",9,4
openstack%2Fpuppet-tripleo~master~Iaba8da504f9c7a54656cf1abe259dff779ea7125,openstack/puppet-tripleo,master,Iaba8da504f9c7a54656cf1abe259dff779ea7125,Ensure post-save certmonger scripts target the right HA container,MERGED,2020-06-26 14:34:15.000000000,2020-07-21 07:52:35.000000000,2020-07-21 02:01:56.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 9914}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-26 14:34:15.000000000', 'files': ['files/certmonger-rabbitmq-refresh.sh', 'files/certmonger-haproxy-refresh.sh'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/3e942b7ff5cc91bfee7cc19d31b502548dcf3f57', 'message': 'Ensure post-save certmonger scripts target the right HA container\n\nHAProxy and RabbitMQ can reload their TLS certificate on change,\nwithout being restarted. To do that, a post-save script scan the\nlist of running container, copy the new certs and trigger a reload\naction in the service.\n\nMake sure that those post-save script only get the right container\nout of the ""$container_cli ps"" command, i.e. that the scripts Work\nboth with HA and non-HA deployments.\n\nChange-Id: Iaba8da504f9c7a54656cf1abe259dff779ea7125\nCloses-Bug: #1885284\n'}]",2,738215,3e942b7ff5cc91bfee7cc19d31b502548dcf3f57,15,6,1,20778,,,0,"Ensure post-save certmonger scripts target the right HA container

HAProxy and RabbitMQ can reload their TLS certificate on change,
without being restarted. To do that, a post-save script scan the
list of running container, copy the new certs and trigger a reload
action in the service.

Make sure that those post-save script only get the right container
out of the ""$container_cli ps"" command, i.e. that the scripts Work
both with HA and non-HA deployments.

Change-Id: Iaba8da504f9c7a54656cf1abe259dff779ea7125
Closes-Bug: #1885284
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/15/738215/1 && git format-patch -1 --stdout FETCH_HEAD,"['files/certmonger-rabbitmq-refresh.sh', 'files/certmonger-haproxy-refresh.sh']",2,3e942b7ff5cc91bfee7cc19d31b502548dcf3f57,ha-cert-rotation,"haproxy_container_name=$($container_cli ps --format=""{{.Names}}"" | grep -w -E 'haproxy(-bundle-.*-[0-9]+)?')","haproxy_container_name=$($container_cli ps --format=""{{.Names}}"" | grep haproxy)",2,2
openstack%2Fmanila~master~I5eb97ba1b29ad24b296e12064f81eb93533c6b99,openstack/manila,master,I5eb97ba1b29ad24b296e12064f81eb93533c6b99,[NetApp] update set_preferred_dc for ontapi 1.150,MERGED,2020-07-15 09:21:22.000000000,2020-07-21 07:42:21.000000000,2020-07-17 20:01:45.000000000,"[{'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 16643}, {'_account_id': 21884}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-15 09:21:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/e12845403f68e55af5f55a6a0de01a9af2e1dfd7', 'message': ""[NetApp] update set_preferred_dc for ontapi 1.150\n\nONTAP 9.5 adds vserver cifs domain preferred-dc configuration\nvalidation. The parameter 'skip-config-validation' is mandatory\nfor 'cifs-domain-preferred-dc-add' now and is set to false,\ni.e. an invalid config will raise early.\n\nChange-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99\nCloses-Bug: 1887643\n""}, {'number': 2, 'created': '2020-07-17 08:25:10.000000000', 'files': ['manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'releasenotes/notes/bug-1887643-netapp-add-cifs-dc-add-skip-check-c8ea9b952cedb643.yaml', 'manila/share/drivers/netapp/dataontap/client/client_cmode.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/3057d0643e8a93c4ae857159d96e94541ad0be4d', 'message': ""[NetApp] update set_preferred_dc for ontapi 1.150\n\nONTAP 9.5 adds vserver cifs domain preferred-dc configuration\nvalidation. The parameter 'skip-config-validation' is mandatory\nfor 'cifs-domain-preferred-dc-add' now and is set to false,\ni.e. an invalid config will raise early.\n\nChange-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99\nCloses-Bug: 1887643\n""}]",1,741126,3057d0643e8a93c4ae857159d96e94541ad0be4d,26,9,2,18816,,,0,"[NetApp] update set_preferred_dc for ontapi 1.150

ONTAP 9.5 adds vserver cifs domain preferred-dc configuration
validation. The parameter 'skip-config-validation' is mandatory
for 'cifs-domain-preferred-dc-add' now and is set to false,
i.e. an invalid config will raise early.

Change-Id: I5eb97ba1b29ad24b296e12064f81eb93533c6b99
Closes-Bug: 1887643
",git fetch https://review.opendev.org/openstack/manila refs/changes/26/741126/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'manila/share/drivers/netapp/dataontap/client/client_cmode.py']",2,e12845403f68e55af5f55a6a0de01a9af2e1dfd7,bug/1887643," ontapi_1_150 = ontapi_version >= (1, 150) self.features.add_feature('CIFS_CHECK', supported=ontapi_1_150) if self.features.CIFS_CHECK: api_args['skip-config-validation'] = 'false' ",,30,2
openstack%2Ffreezer-api~master~I4dc7389756a4bfd6da62841456bf1653637b0371,openstack/freezer-api,master,I4dc7389756a4bfd6da62841456bf1653637b0371,Fix pygments style,MERGED,2020-05-20 00:48:33.000000000,2020-07-21 07:33:20.000000000,2020-07-21 07:30:41.000000000,"[{'_account_id': 21069}, {'_account_id': 21387}, {'_account_id': 22165}, {'_account_id': 22348}, {'_account_id': 28543}, {'_account_id': 28614}]","[{'number': 1, 'created': '2020-05-20 00:48:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/freezer-api/commit/5874e0170e4562717c0b601dc10f0678a30fcb70', 'message': 'Fix pygments style\n\nChange-Id: I4dc7389756a4bfd6da62841456bf1653637b0371\n'}, {'number': 2, 'created': '2020-05-20 00:57:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/freezer-api/commit/932aba5f48d0bf5ceac48116023c597bb4a2f892', 'message': 'Fix pygments style\n\nNew theme of docs (Victoria+) respects pygments_style.\nSince we starts using Victoria reqs while being on Ussuri,\nthis patch ensures proper rendering both in Ussuri and Victoria.\n\nChange-Id: I4dc7389756a4bfd6da62841456bf1653637b0371\n'}, {'number': 3, 'created': '2020-05-21 01:23:50.000000000', 'files': ['doc/source/conf.py', 'api-ref/source/conf.py', 'releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/freezer-api/commit/11abfacbb8cfe1dc75f933e6358f942020f5c0f8', 'message': 'Fix pygments style\n\nNew theme of docs respects pygments_style.\n\nmore info: http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html\n\nChange-Id: I4dc7389756a4bfd6da62841456bf1653637b0371\n'}]",0,729446,11abfacbb8cfe1dc75f933e6358f942020f5c0f8,14,6,3,30356,,,0,"Fix pygments style

New theme of docs respects pygments_style.

more info: http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html

Change-Id: I4dc7389756a4bfd6da62841456bf1653637b0371
",git fetch https://review.opendev.org/openstack/freezer-api refs/changes/46/729446/2 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/conf.py', 'doc/source/conf.py', 'releasenotes/source/conf.py']",3,5874e0170e4562717c0b601dc10f0678a30fcb70,,pygments_style = 'native',pygments_style = 'sphinx',3,3
openstack%2Fheat~stable%2Ftrain~If2ebc3deacb770294004ae023500367af603b59e,openstack/heat,stable/train,If2ebc3deacb770294004ae023500367af603b59e,Use never expiring alarm_url for resource attributes,MERGED,2020-06-10 06:34:13.000000000,2020-07-21 07:32:57.000000000,2020-07-21 07:27:48.000000000,"[{'_account_id': 4257}, {'_account_id': 8833}, {'_account_id': 12404}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-06-10 06:34:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/ec304edde9314d4c85a63c36dfbff98aa7c84666', 'message': ""Use never expiring alarm_url for resource attributes\n\nDon't use timestamp when generating ec2 signed url for alarm url\nattributes of resource.\n\nThis will resolve the issue for new resources even if they are cached\nin attributes or resource_data.\n\nHowever, for existing stacks containing these resources the current\nbest option is to not cache these attributes and allow alarm resources\nto be able to get a new never expiring urls in the next forced update.\n\nChange-Id: If2ebc3deacb770294004ae023500367af603b59e\nTask: 39985\nRelated-Bug: #1872737\n(cherry picked from commit d0e44ded0a07cfe6b3413693d79c7f1f67b27701)\n""}, {'number': 2, 'created': '2020-06-25 06:16:45.000000000', 'files': ['heat/engine/resources/openstack/mistral/workflow.py', 'heat/engine/resources/openstack/sahara/job.py', 'heat/engine/resources/signal_responder.py', 'heat/engine/resources/openstack/heat/scaling_policy.py', 'heat/tests/autoscaling/test_heat_scaling_policy.py', 'heat/engine/resources/aws/autoscaling/scaling_policy.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/eb8bfd530b11fd00b9f0ef52521c823a5ccd9b2a', 'message': ""Use never expiring alarm_url for resource attributes\n\nDon't use timestamp when generating ec2 signed url for alarm url\nattributes of resource.\n\nThis will resolve the issue for new resources even if they are cached\nin attributes or resource_data.\n\nHowever, for existing stacks containing these resources the current\nbest option is to not cache these attributes and allow alarm resources\nto be able to get a new never expiring urls in the next forced update.\n\nChange-Id: If2ebc3deacb770294004ae023500367af603b59e\nTask: 39985\nRelated-Bug: #1872737\n(cherry picked from commit d0e44ded0a07cfe6b3413693d79c7f1f67b27701)\n""}]",0,734751,eb8bfd530b11fd00b9f0ef52521c823a5ccd9b2a,18,4,2,8833,,,0,"Use never expiring alarm_url for resource attributes

Don't use timestamp when generating ec2 signed url for alarm url
attributes of resource.

This will resolve the issue for new resources even if they are cached
in attributes or resource_data.

However, for existing stacks containing these resources the current
best option is to not cache these attributes and allow alarm resources
to be able to get a new never expiring urls in the next forced update.

Change-Id: If2ebc3deacb770294004ae023500367af603b59e
Task: 39985
Related-Bug: #1872737
(cherry picked from commit d0e44ded0a07cfe6b3413693d79c7f1f67b27701)
",git fetch https://review.opendev.org/openstack/heat refs/changes/51/734751/1 && git format-patch -1 --stdout FETCH_HEAD,"['heat/engine/resources/openstack/mistral/workflow.py', 'heat/engine/resources/openstack/sahara/job.py', 'heat/engine/resources/signal_responder.py', 'heat/engine/resources/aws/autoscaling/scaling_policy.py', 'heat/engine/resources/openstack/heat/scaling_policy.py', 'heat/tests/autoscaling/test_heat_scaling_policy.py']",6,ec304edde9314d4c85a63c36dfbff98aa7c84666,,," self.assertEqual('Timestamp', args[4].split('=')[0])",21,16
openstack%2Fheat~stable%2Ftrain~I6b74faed820caccd39210bd48a212b2dedca46b9,openstack/heat,stable/train,I6b74faed820caccd39210bd48a212b2dedca46b9,Don't store signal_url for ec2 signaling of deployments,MERGED,2020-06-06 11:43:14.000000000,2020-07-21 07:30:14.000000000,2020-07-21 07:27:43.000000000,"[{'_account_id': 4257}, {'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-06-06 11:43:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/3b5b0d6dbcedb66793458d5e80139ee85a86c690', 'message': ""Don't store signal_url for ec2 signaling of deployments\n\nAs part of a CVE keystone has started checking[1] the timestamp\nof signed ec2 token with default TTL of 15 mins. We can't\nstore the ec2 url anymore for future use for those.\n\nThis moves the caching logic to BaseWaitConditionHandle class.\n\nConflicts:\n\theat/engine/resources/signal_responder.py\n\theat/tests/test_signal.py\n\n[1] https://review.opendev.org/#/c/724124/\n\nChange-Id: I6b74faed820caccd39210bd48a212b2dedca46b9\nTask: 39984\nRelated-Bug: #1872737\n(cherry picked from commit 3047ca7d36baaa59ab2960602da956d2087a2a62)\n""}, {'number': 2, 'created': '2020-06-06 11:46:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/afa2bb1f021c1df5ade90a013c3cf350a97953aa', 'message': ""Don't store signal_url for ec2 signaling of deployments\n\nAs part of a CVE keystone has started checking[1] the timestamp\nof signed ec2 token with default TTL of 15 mins. We can't\nstore the ec2 url anymore for future use for those.\n\nThis moves the caching logic to BaseWaitConditionHandle class.\n\nConflicts:\n\theat/engine/resources/signal_responder.py\n\theat/tests/test_signal.py\n\n[1] https://review.opendev.org/#/c/724124/\n\nChange-Id: I6b74faed820caccd39210bd48a212b2dedca46b9\nTask: 39985\nRelated-Bug: #1872737\n(cherry picked from commit 3047ca7d36baaa59ab2960602da956d2087a2a62)\n""}, {'number': 3, 'created': '2020-06-10 06:34:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/0cf9478cb3acf27e618163d7e4e0d1a17288b3d1', 'message': ""Don't store signal_url for ec2 signaling of deployments\n\nAs part of a CVE keystone has started checking[1] the timestamp\nof signed ec2 token with default TTL of 15 mins. We can't\nstore the ec2 url anymore for future use for those.\n\nThis moves the caching logic to BaseWaitConditionHandle class.\n\nConflicts:\n\theat/engine/resources/signal_responder.py\n\theat/tests/test_signal.py\n\n[1] https://review.opendev.org/#/c/724124/\n\nChange-Id: I6b74faed820caccd39210bd48a212b2dedca46b9\nTask: 39985\nRelated-Bug: #1872737\n(cherry picked from commit 3047ca7d36baaa59ab2960602da956d2087a2a62)\n""}, {'number': 4, 'created': '2020-06-25 06:16:45.000000000', 'files': ['heat/tests/test_metadata_refresh.py', 'heat/engine/resources/signal_responder.py', 'heat/tests/test_signal.py', 'heat/tests/aws/test_waitcondition.py', 'heat/engine/resources/wait_condition.py', 'heat/tests/engine/service/test_stack_resources.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/a4346b328773239ae1668b3890a4e1f7e4472713', 'message': ""Don't store signal_url for ec2 signaling of deployments\n\nAs part of a CVE keystone has started checking[1] the timestamp\nof signed ec2 token with default TTL of 15 mins. We can't\nstore the ec2 url anymore for future use for those.\n\nThis moves the caching logic to BaseWaitConditionHandle class.\n\nConflicts:\n\theat/engine/resources/signal_responder.py\n\theat/tests/test_signal.py\n\n[1] https://review.opendev.org/#/c/724124/\n\nChange-Id: I6b74faed820caccd39210bd48a212b2dedca46b9\nTask: 39985\nRelated-Bug: #1872737\n(cherry picked from commit 3047ca7d36baaa59ab2960602da956d2087a2a62)\n""}]",0,733960,a4346b328773239ae1668b3890a4e1f7e4472713,55,3,4,8833,,,0,"Don't store signal_url for ec2 signaling of deployments

As part of a CVE keystone has started checking[1] the timestamp
of signed ec2 token with default TTL of 15 mins. We can't
store the ec2 url anymore for future use for those.

This moves the caching logic to BaseWaitConditionHandle class.

Conflicts:
	heat/engine/resources/signal_responder.py
	heat/tests/test_signal.py

[1] https://review.opendev.org/#/c/724124/

Change-Id: I6b74faed820caccd39210bd48a212b2dedca46b9
Task: 39985
Related-Bug: #1872737
(cherry picked from commit 3047ca7d36baaa59ab2960602da956d2087a2a62)
",git fetch https://review.opendev.org/openstack/heat refs/changes/60/733960/4 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/test_metadata_refresh.py', 'heat/engine/resources/signal_responder.py', 'heat/tests/test_signal.py', 'heat/tests/aws/test_waitcondition.py', 'heat/engine/resources/wait_condition.py', 'heat/tests/engine/service/test_stack_resources.py']",6,3b5b0d6dbcedb66793458d5e80139ee85a86c690,,"from heat.engine.clients.os import heat_plugin @mock.patch.object(heat_plugin.HeatClientPlugin, 'get_heat_cfn_url') mock_update, mock_get_cfn): mock_get_cfn.return_value = 'http://server.test:8000/v1'", mock_update):,27,12
openstack%2Fpython-tripleoclient~master~I8a5b7c3fc87a27c774deb368b877a9697ba320f3,openstack/python-tripleoclient,master,I8a5b7c3fc87a27c774deb368b877a9697ba320f3,Remove translation sections from setup.cfg,MERGED,2020-06-14 16:15:43.000000000,2020-07-21 07:09:43.000000000,2020-07-21 07:06:50.000000000,"[{'_account_id': 3153}, {'_account_id': 8833}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 32067}]","[{'number': 1, 'created': '2020-06-14 16:15:43.000000000', 'files': ['requirements.txt', 'babel.cfg', 'lower-constraints.txt', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/064ce9c8fd1a66fd0e06fdf3b57f87ff2f27b558', 'message': 'Remove translation sections from setup.cfg\n\nThese translation sections are not needed anymore, Babel can\ngenerate translation files without them.\n\nRemove babel.cfg as well, this is the default role and not needed\nanymore.\n\nalso remove Babel from requirements[1]\n[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-April/014227.html\n\nChange-Id: I8a5b7c3fc87a27c774deb368b877a9697ba320f3\n'}]",0,735471,064ce9c8fd1a66fd0e06fdf3b57f87ff2f27b558,10,5,1,26285,,,0,"Remove translation sections from setup.cfg

These translation sections are not needed anymore, Babel can
generate translation files without them.

Remove babel.cfg as well, this is the default role and not needed
anymore.

also remove Babel from requirements[1]
[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-April/014227.html

Change-Id: I8a5b7c3fc87a27c774deb368b877a9697ba320f3
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/71/735471/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'babel.cfg', 'lower-constraints.txt', 'setup.cfg']",4,064ce9c8fd1a66fd0e06fdf3b57f87ff2f27b558,remove-babel,,[compile_catalog] directory = tripleoclient/locale domain = tripleoclient [update_catalog] domain = tripleoclient output_dir = tripleoclient/locale input_file = tripleoclient/locale/tripleoclient.pot [extract_messages] keywords = _ gettext ngettext l_ lazy_gettext mapping_file = babel.cfg output_file = tripleoclient/locale/tripleoclient.pot ,0,17
openstack%2Ftripleo-heat-templates~master~I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6,openstack/tripleo-heat-templates,master,I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6,Use a single task for fact gathering,MERGED,2020-07-15 20:55:37.000000000,2020-07-21 07:06:48.000000000,2020-07-21 07:06:47.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 11090}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-15 20:55:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/12b9aa23f5374526373d8d060982c5e2309b3250', 'message': ""Use a single task for fact gathering\n\nWe don't need to do different plays for fact gathering as we can simply\ninclude both the source/remote hosts in a single pattern.\n\nChange-Id: I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6\n""}, {'number': 2, 'created': '2020-07-15 21:00:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b94b08ee2139b712e36ab7787c9729aeedf639e6', 'message': ""Use a single task for fact gathering\n\nWe don't need to do different plays for fact gathering as we can simply\ninclude both the source/remote hosts in a single pattern.\n\nFor the record, this was added because we were using local connections\nfor the undercloud when running under mistral however this is no longer\nthe case. Additionally I believe we stopped doing that later as well but\nthis may not be able to be backported to run under mistral. Original\ncontext https://review.opendev.org/#/c/518323/\n\nChange-Id: I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6\n""}, {'number': 3, 'created': '2020-07-21 01:48:30.000000000', 'files': ['common/deploy-steps-playbooks-common.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/27ec857cf2696a005eedb397207a0e78658b9989', 'message': ""Use a single task for fact gathering\n\nWe don't need to do different plays for fact gathering as we can simply\ninclude both the source/remote hosts in a single pattern.\n\nFor the record, this was added because we were using local connections\nfor the undercloud when running under mistral however this is no longer\nthe case. Additionally I believe we stopped doing that later as well but\nthis may not be able to be backported to run under mistral. Original\ncontext https://review.opendev.org/#/c/518323/\n\nChange-Id: I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6\n""}]",0,741316,27ec857cf2696a005eedb397207a0e78658b9989,15,5,3,14985,,,0,"Use a single task for fact gathering

We don't need to do different plays for fact gathering as we can simply
include both the source/remote hosts in a single pattern.

For the record, this was added because we were using local connections
for the undercloud when running under mistral however this is no longer
the case. Additionally I believe we stopped doing that later as well but
this may not be able to be backported to run under mistral. Original
context https://review.opendev.org/#/c/518323/

Change-Id: I4298855fe71b1035df81d5ce9c3cef2e3c96dbb6
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/16/741316/2 && git format-patch -1 --stdout FETCH_HEAD,['common/deploy-steps-playbooks-common.yaml'],1,12b9aa23f5374526373d8d060982c5e2309b3250,relax,"- hosts: ""{{ deploy_source_host }}:{{ deploy_target_host }}"" name: Gather facts","- hosts: ""{{ deploy_source_host }}"" name: Gather facts from undercloud gather_facts: yes any_errors_fatal: true ignore_unreachable: false become: false tags: - facts - hosts: ""{{ deploy_target_host }}"" name: Gather facts from overcloud",2,11
openstack%2Fironic-python-agent-builder~master~I2708b71abfe3bc24089f4a51514d362da1491c66,openstack/ironic-python-agent-builder,master,I2708b71abfe3bc24089f4a51514d362da1491c66,[tinyipa] Fix getting MTU via dhcp,MERGED,2020-05-27 07:36:11.000000000,2020-07-21 06:55:09.000000000,2020-07-21 06:52:37.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 14525}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2020-05-27 07:36:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/92c642ed489f82c4f0850bda555547799ac874d8', 'message': '[tinyipa] Fix getting MTU via dhcp\n\nThe patch updates udhcpc script to handle MTU option advertised\nby DHCP server.\n\nChange-Id: I2708b71abfe3bc24089f4a51514d362da1491c66\n'}, {'number': 2, 'created': '2020-05-27 07:41:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/ebc7b5165c7c08b86c467f5c527ed788c6df1a93', 'message': '[tinyipa] Fix getting MTU via dhcp\n\nThe patch updates udhcpc script to handle MTU option advertised\nby DHCP server.\n\nChange-Id: I2708b71abfe3bc24089f4a51514d362da1491c66\n'}, {'number': 3, 'created': '2020-05-27 12:33:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/a1cbe406c1c7e786a036b7db90bc657267e83939', 'message': '[tinyipa] Fix getting MTU via dhcp\n\nThe patch updates udhcpc script to handle MTU option advertised\nby DHCP server.\n\nChange-Id: I2708b71abfe3bc24089f4a51514d362da1491c66\n'}, {'number': 4, 'created': '2020-06-24 14:58:53.000000000', 'files': ['tinyipa/udhcpc.script', 'tinyipa/build_files/bootlocal.sh'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/ddd631aacba00e357bb53697aad60df5ee369959', 'message': '[tinyipa] Fix getting MTU via dhcp\n\nThe patch updates udhcpc script to handle MTU option advertised\nby DHCP server.\n\nChange-Id: I2708b71abfe3bc24089f4a51514d362da1491c66\n'}]",3,731095,ddd631aacba00e357bb53697aad60df5ee369959,34,5,4,14525,,,0,"[tinyipa] Fix getting MTU via dhcp

The patch updates udhcpc script to handle MTU option advertised
by DHCP server.

Change-Id: I2708b71abfe3bc24089f4a51514d362da1491c66
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/95/731095/4 && git format-patch -1 --stdout FETCH_HEAD,"['tinyipa/udhcpc.script', 'tinyipa/build_files/bootlocal.sh']",2,92c642ed489f82c4f0850bda555547799ac874d8,,"# Configure networking, use custom udhcpc script to handle MTU option configure_dhcp_network || exit 0 # Run IPA echo ""Starting Ironic Python Agent:"" date ironic-python-agent 2>&1 | tee /var/log/ironic-python-agent.log create_rescue_user() { crypted_pass=$(cat /etc/ipa-rescue-config/ipa-rescue-password) sudo adduser rescue -D -G root # no useradd echo ""rescue:$crypted_pass"" | sudo chpasswd -e sudo sh -c ""echo \""rescue ALL=(ALL) NOPASSWD: ALL\"" >> /etc/sudoers"" # no suooers.d in tiny core. # Restart sshd with allowing password authentication sudo sed -i -e 's/^PasswordAuthentication no/PasswordAuthentication yes/' /usr/local/etc/ssh/sshd_config sudo /usr/local/etc/init.d/openssh restart } ","# Run IPA echo ""Starting Ironic Python Agent:"" date ironic-python-agent 2>&1 | tee /var/log/ironic-python-agent.log create_rescue_user() { crypted_pass=$(cat /etc/ipa-rescue-config/ipa-rescue-password) sudo adduser rescue -D -G root # no useradd echo ""rescue:$crypted_pass"" | sudo chpasswd -e sudo sh -c ""echo \""rescue ALL=(ALL) NOPASSWD: ALL\"" >> /etc/sudoers"" # no suooers.d in tiny core. # Restart sshd with allowing password authentication sudo sed -i -e 's/^PasswordAuthentication no/PasswordAuthentication yes/' /usr/local/etc/ssh/sshd_config sudo /usr/local/etc/init.d/openssh restart } configure_dhcp_network || exit 0",21,18
openstack%2Fopenstack-ansible-os_keystone~master~I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3,openstack/openstack-ansible-os_keystone,master,I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3,Add Centos-8 support,MERGED,2020-06-15 10:59:09.000000000,2020-07-21 06:38:04.000000000,2020-07-05 19:17:06.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}, {'_account_id': 28752}]","[{'number': 1, 'created': '2020-06-15 10:59:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_keystone/commit/f76e181896283ea994b740133f65114bc498d563', 'message': 'Add Centos-8 support\n\nChange-Id: I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3\n'}, {'number': 2, 'created': '2020-06-15 11:01:41.000000000', 'files': ['vars/redhat.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_keystone/commit/be3a7c7e2bf63a73a1b971141e5f511bce2be5a9', 'message': 'Add Centos-8 support\n\nChange-Id: I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3\n'}]",2,735555,be3a7c7e2bf63a73a1b971141e5f511bce2be5a9,20,5,2,28619,,,0,"Add Centos-8 support

Change-Id: I018d1fc8ad637de8e76a98f22f6cef21e3f0b7c3
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_keystone refs/changes/55/735555/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/redhat.yml'],1,f76e181896283ea994b740133f65114bc498d563,osa/el8," - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('python-devel', 'python36-devel') }}"" - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('systemd-python', 'python3-systemd') }}"" - ""{{ ansible_distribution_major_version is version('8', '<') | ternary('uwsgi-plugin-python', 'uwsgi-plugin-python3') }}""", - python-devel - systemd-python - uwsgi-plugin-python,3,3
openstack%2Fironic-python-agent~master~I6c91e84366dcec7290456eea535a0b2bd3eda4d1,openstack/ironic-python-agent,master,I6c91e84366dcec7290456eea535a0b2bd3eda4d1,Set min version of tox to 3.2.1,MERGED,2020-07-15 13:28:00.000000000,2020-07-21 06:33:08.000000000,2020-07-21 06:31:18.000000000,"[{'_account_id': 4571}, {'_account_id': 11076}, {'_account_id': 15519}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 13:28:00.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/c66bec0f43cfeb371a8ac97df3eddca3853191dc', 'message': 'Set min version of tox to 3.2.1\n\nAs recommended, since version 3.2.0 tox switches pip invocations\nto use the module -m pip instead of direct invocation.\nWe set min version to 3.2.1 [1] to also fix the behavior of\n--parallel--safe-build\n\n[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10\n\nChange-Id: I6c91e84366dcec7290456eea535a0b2bd3eda4d1\n'}]",0,741187,c66bec0f43cfeb371a8ac97df3eddca3853191dc,9,4,1,23851,,,0,"Set min version of tox to 3.2.1

As recommended, since version 3.2.0 tox switches pip invocations
to use the module -m pip instead of direct invocation.
We set min version to 3.2.1 [1] to also fix the behavior of
--parallel--safe-build

[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10

Change-Id: I6c91e84366dcec7290456eea535a0b2bd3eda4d1
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/87/741187/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,c66bec0f43cfeb371a8ac97df3eddca3853191dc,tox-m-pip,minversion = 3.2.1,minversion = 3.1.0,1,1
openstack%2Fproject-config~master~I8250e82f8ad540fcce46a19b9890d31754719729,openstack/project-config,master,I8250e82f8ad540fcce46a19b9890d31754719729,Remove dragonflow from infra,MERGED,2020-06-23 16:32:17.000000000,2020-07-21 06:28:12.000000000,2020-07-21 05:56:00.000000000,"[{'_account_id': 6547}, {'_account_id': 7118}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-06-23 16:32:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/45e92ddb0e5fc0008df50bfdb3e26a1883d99fe5', 'message': 'Remove dragonflow from infra\n\nThis completes step 3 of the project retirement process for the\nopenstack/dragonflow repo.\n\nDepends-on: https://review.opendev.org/737564\n\nChange-Id: I8250e82f8ad540fcce46a19b9890d31754719729\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}, {'number': 2, 'created': '2020-06-23 16:37:21.000000000', 'files': ['zuul.d/projects.yaml', 'zuul/main.yaml', 'gerrit/projects.yaml', 'gerrit/acls/openstack/dragonflow.config'], 'web_link': 'https://opendev.org/openstack/project-config/commit/51bf34576d5ce54b871289d11e52e528793a0512', 'message': 'Remove dragonflow from infra\n\nThis completes step 3 of the project retirement process for the\nopenstack/dragonflow repo.\n\nDepends-on: https://review.opendev.org/737564\n\nChange-Id: I8250e82f8ad540fcce46a19b9890d31754719729\nSigned-off-by: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",1,737578,51bf34576d5ce54b871289d11e52e528793a0512,12,4,2,11904,,,0,"Remove dragonflow from infra

This completes step 3 of the project retirement process for the
openstack/dragonflow repo.

Depends-on: https://review.opendev.org/737564

Change-Id: I8250e82f8ad540fcce46a19b9890d31754719729
Signed-off-by: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/project-config refs/changes/78/737578/2 && git format-patch -1 --stdout FETCH_HEAD,"['accessbot/channels.yaml', 'gerrit/projects.yaml', 'zuul.d/projects.yaml', 'zuul/main.yaml', 'gerrit/acls/openstack/dragonflow.config']",5,45e92ddb0e5fc0008df50bfdb3e26a1883d99fe5,dragonflow,,"[access ""refs/heads/*""] abandon = group dragonflow-core label-Code-Review = -2..+2 group dragonflow-core label-Workflow = -1..+1 group dragonflow-core [access ""refs/heads/stable/*""] abandon = group Change Owner abandon = group Project Bootstrappers abandon = group dragonflow-release abandon = group stable-maint-core exclusiveGroupPermissions = abandon label-Code-Review label-Workflow label-Code-Review = -2..+2 group Project Bootstrappers label-Code-Review = -2..+2 group dragonflow-release label-Code-Review = -2..+2 group stable-maint-core label-Code-Review = -1..+1 group Registered Users label-Workflow = -1..+0 group Change Owner label-Workflow = -1..+1 group Project Bootstrappers label-Workflow = -1..+1 group dragonflow-release label-Workflow = -1..+1 group stable-maint-core [receive] requireChangeId = true requireContributorAgreement = true [submit] mergeContent = true ",2,35
openstack%2Fglance-specs~master~I3cdd88eef1a64171d2714034449ca2ddf85a214d,openstack/glance-specs,master,I3cdd88eef1a64171d2714034449ca2ddf85a214d,Add copy-unowned-image spec,MERGED,2020-07-02 14:49:18.000000000,2020-07-21 06:16:14.000000000,2020-07-09 14:58:40.000000000,"[{'_account_id': 4393}, {'_account_id': 5202}, {'_account_id': 5314}, {'_account_id': 9303}, {'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 26458}]","[{'number': 1, 'created': '2020-07-02 14:49:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/71704719fc373d555402484e583a84ad16c933d3', 'message': 'Add copy-unowned-image spec\n\nChange-Id: I3cdd88eef1a64171d2714034449ca2ddf85a214d\n'}, {'number': 2, 'created': '2020-07-06 13:36:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/b2a2c08c37cc0cd9252bbfa5460b70cf39fab4dd', 'message': 'Add copy-unowned-image spec\n\nChange-Id: I3cdd88eef1a64171d2714034449ca2ddf85a214d\n'}, {'number': 3, 'created': '2020-07-07 14:38:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/0836ebec6a4406841124e0359af671f9ca7ec0db', 'message': 'Add copy-unowned-image spec\n\nChange-Id: I3cdd88eef1a64171d2714034449ca2ddf85a214d\n'}, {'number': 4, 'created': '2020-07-08 13:36:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/cb564dd371bb574a19ea504844f8657c60ea2482', 'message': 'Add copy-unowned-image spec\n\nChange-Id: I3cdd88eef1a64171d2714034449ca2ddf85a214d\n'}, {'number': 5, 'created': '2020-07-08 14:13:25.000000000', 'files': ['specs/victoria/approved/glance/copy-unowned-image.rst'], 'web_link': 'https://opendev.org/openstack/glance-specs/commit/576a8e20cdc06e0a0ee9ba45f2b5bc977b0f7dea', 'message': 'Add copy-unowned-image spec\n\nChange-Id: I3cdd88eef1a64171d2714034449ca2ddf85a214d\n'}]",7,739062,576a8e20cdc06e0a0ee9ba45f2b5bc977b0f7dea,34,7,5,4393,,,0,"Add copy-unowned-image spec

Change-Id: I3cdd88eef1a64171d2714034449ca2ddf85a214d
",git fetch https://review.opendev.org/openstack/glance-specs refs/changes/62/739062/2 && git format-patch -1 --stdout FETCH_HEAD,"['specs/victoria/approved/glance/copy-unowned-image.rst', 'specs/victoria/approved/index.rst']",2,71704719fc373d555402484e583a84ad16c933d3,bp/copy-unowned-image,Victoria approved specs for Glance: .. toctree:: :glob: :maxdepth: 1 glance/*,TODO: fill this in until a new approved space is added. ,202,1
openstack%2Ftripleo-validations~master~Ia653292305d0493063b1ab8d22b4797cb8d077cc,openstack/tripleo-validations,master,Ia653292305d0493063b1ab8d22b4797cb8d077cc,Ignore an audit.log entry for qemu-kvm on /dev/mapper/control,ABANDONED,2020-07-20 09:42:40.000000000,2020-07-21 06:10:11.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-07-20 09:42:40.000000000', 'files': ['roles/validate_selinux/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/ea7d24934637c40adf09428617f87defef9a771d', 'message': ""Ignore an audit.log entry for qemu-kvm on /dev/mapper/control\n\nThis denial is shown when we create a new VM - nova_libvirt having /dev\nbind-mounted, it triggers some automated call in qemu-kvm checking the\naccess on this socket.\n\nIt can be safely ignored, and therefore shouldn't make the whole\nvalidation fail.\n\nChange-Id: Ia653292305d0493063b1ab8d22b4797cb8d077cc\n""}]",1,741903,ea7d24934637c40adf09428617f87defef9a771d,3,1,1,28223,,,0,"Ignore an audit.log entry for qemu-kvm on /dev/mapper/control

This denial is shown when we create a new VM - nova_libvirt having /dev
bind-mounted, it triggers some automated call in qemu-kvm checking the
access on this socket.

It can be safely ignored, and therefore shouldn't make the whole
validation fail.

Change-Id: Ia653292305d0493063b1ab8d22b4797cb8d077cc
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/03/741903/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/validate_selinux/defaults/main.yml'],1,ea7d24934637c40adf09428617f87defef9a771d,ignore-lvm-qemu,"validate_selinux_skip_list: - comment: | nova_libvirt container mounts /dev directly, exposing /dev/mapper/control. This leads to a non-blocking denial. We therefore can ignore this specific entry entry: 'denied { read write } for pid=[0-9]+ comm=""qemu-kvm"" path=""/dev/mapper/control"" dev=""devtmpfs"" .+ scontext=system_u:system_r:svirt_t:s0:[c0-9,]+ tcontext=system_u:object_r:lvm_control_t:s0 tclass=chr_file'",validate_selinux_skip_list: {},6,1
openstack%2Fpython-tripleoclient~master~I9edca394a9ce05796894e91d3d6e4707222afad4,openstack/python-tripleoclient,master,I9edca394a9ce05796894e91d3d6e4707222afad4,Remove useless validate_stack from update deployment plan,ABANDONED,2020-07-21 05:56:10.000000000,2020-07-21 06:03:53.000000000,,[],"[{'number': 1, 'created': '2020-07-21 05:56:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/d9a37cfb2979fe330f9cc4ac368ec3f7e79309b0', 'message': ""Remove useless validate_stack from update deployment plan\n\nCurrent tripleoclient doesn't provide any options to set validate_stack\nwhen updating deployment plan and this parameter is always False.\n\nThis patch removes that useless parameter.\n\nDepends-on: https://review.opendev.org/#/c/742068/\nChange-Id: I9edca394a9ce05796894e91d3d6e4707222afad4\n""}, {'number': 2, 'created': '2020-07-21 05:58:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/33626a5d76b352fb32c265c392fb3608a5d69a4d', 'message': ""Remove useless validate_stack from update deployment plan\n\nCurrent tripleoclient doesn't provide any options to set validate_stack\nwhen updating deployment plan and this parameter is always False.\n\nThis patch removes that useless parameter.\n\nChange-Id: I9edca394a9ce05796894e91d3d6e4707222afad4\n""}, {'number': 3, 'created': '2020-07-21 05:59:44.000000000', 'files': ['tripleoclient/workflows/plan_management.py', 'tripleoclient/tests/workflows/test_plan_management.py', 'tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/0a71f05298ff78e718cac8cd783efbb4fa4556c4', 'message': ""Remove useless validate_stack from update deployment plan\n\nCurrent tripleoclient doesn't provide any options to set validate_stack\nwhen updating deployment plan and this parameter is always False.\n\nThis patch removes that useless parameter.\n\nChange-Id: I9edca394a9ce05796894e91d3d6e4707222afad4\n""}]",0,742072,0a71f05298ff78e718cac8cd783efbb4fa4556c4,4,0,3,9816,,,0,"Remove useless validate_stack from update deployment plan

Current tripleoclient doesn't provide any options to set validate_stack
when updating deployment plan and this parameter is always False.

This patch removes that useless parameter.

Change-Id: I9edca394a9ce05796894e91d3d6e4707222afad4
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/72/742072/2 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/workflows/plan_management.py', 'tripleoclient/tests/workflows/test_plan_management.py', 'tripleoclient/v1/overcloud_deploy.py']",3,d9a37cfb2979fe330f9cc4ac368ec3f7e79309b0,kwargs,," validate_stack=False,",4,11
openstack%2Fopenstack-zuul-jobs~master~I0affa199406b82dc0315e4f1f6b0082ecde7aad4,openstack/openstack-zuul-jobs,master,I0affa199406b82dc0315e4f1f6b0082ecde7aad4,"Enable neutron-grenade again for Stein, Rocky and Queens",MERGED,2020-07-15 16:57:52.000000000,2020-07-21 05:57:03.000000000,2020-07-21 05:54:13.000000000,"[{'_account_id': 1131}, {'_account_id': 6547}, {'_account_id': 7118}, {'_account_id': 8556}, {'_account_id': 17685}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 16:57:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-zuul-jobs/commit/b13ac3beacd6f3dadcbc35e1e1c6fc80b575820c', 'message': 'Enable neutron-grenade again for Stein, Rocky, Queens and Pike\n\nDevstack and Tempest jobs were recently fixed for all of the branches\nback till Pike. Now we can restore the neutron-grenade testing, as they\nare also working fine (see passing neutron-grenade in experimental jobs\nin Rocky [1]).\n\n[1] https://review.opendev.org/#/c/738548/\n\nChange-Id: I0affa199406b82dc0315e4f1f6b0082ecde7aad4\n'}, {'number': 2, 'created': '2020-07-15 17:03:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-zuul-jobs/commit/21fb12d79479c88ea385526fa37d2bfdc968f8df', 'message': 'Enable neutron-grenade again for Stein, Rocky, Queens and Pike\n\nDevstack and Tempest jobs were recently fixed for all of the branches\nback till Pike. Now we can restore the neutron-grenade testing, as they\nare also working fine (see passing neutron-grenade in experimental jobs\nin Rocky [1]).\n\n[1] https://review.opendev.org/#/c/738548/\n\nChange-Id: I0affa199406b82dc0315e4f1f6b0082ecde7aad4\n'}, {'number': 3, 'created': '2020-07-16 10:38:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-zuul-jobs/commit/e2e3e07129c7b4ccf2a433deaba47ca9f6d24ab4', 'message': 'Enable neutron-grenade again for Stein, Rocky, Queens and Pike\n\nDevstack and Tempest jobs were recently fixed for all of the branches\nback till Pike. Now we can restore the neutron-grenade testing, as they\nare also working fine (see passing neutron-grenade in experimental jobs\nin Rocky [1]).\n\n[1] https://review.opendev.org/#/c/738548/\n\nChange-Id: I0affa199406b82dc0315e4f1f6b0082ecde7aad4\n'}, {'number': 4, 'created': '2020-07-16 10:43:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-zuul-jobs/commit/5f08408269fcb724ccbabaf26c80eb3a4f0adb6b', 'message': 'Enable neutron-grenade again for Stein, Rocky, Queens and Pike\n\nDevstack and Tempest jobs were recently fixed for all of the branches\nback till Pike. Now we can restore the neutron-grenade testing, as they\nare also working fine (see passing neutron-grenade in experimental jobs\nin Rocky [1]).\n\n[1] https://review.opendev.org/#/c/738548/\n\nChange-Id: I0affa199406b82dc0315e4f1f6b0082ecde7aad4\n'}, {'number': 5, 'created': '2020-07-20 15:50:54.000000000', 'files': ['zuul.d/zuul-legacy-project-templates.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-zuul-jobs/commit/2959fa84f48b78e91f7e4513db8a71140563a396', 'message': 'Enable neutron-grenade again for Stein, Rocky and Queens\n\nDevstack and Tempest jobs were recently fixed for all of the branches\nback till Pike. Now we can restore the neutron-grenade testing, as they\nare also working fine (see passing neutron-grenade in experimental jobs\nin Rocky [1]). As a successful grenade run on branch N needs a working\ndevstack and tempest on branch N-1, the first branch where grenade will\npass is Queens.\n\n[1] https://review.opendev.org/#/c/738548/\n\nChange-Id: I0affa199406b82dc0315e4f1f6b0082ecde7aad4\n'}]",6,741274,2959fa84f48b78e91f7e4513db8a71140563a396,24,7,5,17685,,,0,"Enable neutron-grenade again for Stein, Rocky and Queens

Devstack and Tempest jobs were recently fixed for all of the branches
back till Pike. Now we can restore the neutron-grenade testing, as they
are also working fine (see passing neutron-grenade in experimental jobs
in Rocky [1]). As a successful grenade run on branch N needs a working
devstack and tempest on branch N-1, the first branch where grenade will
pass is Queens.

[1] https://review.opendev.org/#/c/738548/

Change-Id: I0affa199406b82dc0315e4f1f6b0082ecde7aad4
",git fetch https://review.opendev.org/openstack/openstack-zuul-jobs refs/changes/74/741274/5 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/zuul-legacy-project-templates.yaml'],1,b13ac3beacd6f3dadcbc35e1e1c6fc80b575820c,grenade-em-nv, branches: ^stable/(pike|queens|rocky|stein|train).*$ bbranches: ^stable/(pike|queens|rocky|stein|train).*$, # NOTE(gmann): Do not run the grenade job for # Extended Maintainance or oldest stable branch. # Now this is only needed for stable/train as # stable/ussuri onwards we use integrated-gate-py3. branches: stable/train # NOTE(gmann): Do not run the grenade job for # Extended Maintainance or oldest stable branch. # Now this is only needed for stable/train as # stable/ussuri onwards we use integrated-gate-py3. branches: stable/train,2,10
openstack%2Ftripleo-common~stable%2Fussuri~I985ef22c340c4071866c8c51bf303a6f4ee7713c,openstack/tripleo-common,stable/ussuri,I985ef22c340c4071866c8c51bf303a6f4ee7713c,Don't assume default tag exists in container repo,MERGED,2020-07-17 11:41:18.000000000,2020-07-21 04:52:07.000000000,2020-07-21 04:50:55.000000000,"[{'_account_id': 3153}, {'_account_id': 9976}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-17 11:41:18.000000000', 'files': ['tripleo_common/tests/image/test_image_uploader.py', 'container-images/container_image_prepare_defaults.yaml', 'tripleo_common/image/kolla_builder.py', 'releasenotes/notes/check_for_default_tag-09fe34d2ac434890.yaml', 'tripleo_common/image/image_uploader.py', 'tripleo_common/tests/image/test_kolla_builder.py'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/ec65b686c38f696ac2aefc9d7dc9376f5637aa1d', 'message': ""Don't assume default tag exists in container repo\n\nWhen no tag is set for an entry in ContainerImagePrepare, the default\ntag from container-images/container_image_prepare_defaults.yaml will be\nassumed, which is typically current-tripleo, or a release version such\nas 16.0.\n\nIn most cases, this tag will exist. However, when using a satellite with\na content view that has been filtered on tags, it likely won't exist\nsince content views are often used with container image versions that\nare not the latest.\n\nIn the case where no tag is set in the entry in ContainerImagePrepare,\nand the default tag does not exist in the container repo, the latest tag\nfrom the repo will be assumed instead.\n\nChange-Id: I985ef22c340c4071866c8c51bf303a6f4ee7713c\nCloses-Bug: #1886547\nSigned-off-by: James Slagle <jslagle@redhat.com>\n(cherry picked from commit 0c4de9c771fad75ebabe2d18f5aef4b76613d52a)\n""}]",0,741621,ec65b686c38f696ac2aefc9d7dc9376f5637aa1d,13,4,1,7144,,,0,"Don't assume default tag exists in container repo

When no tag is set for an entry in ContainerImagePrepare, the default
tag from container-images/container_image_prepare_defaults.yaml will be
assumed, which is typically current-tripleo, or a release version such
as 16.0.

In most cases, this tag will exist. However, when using a satellite with
a content view that has been filtered on tags, it likely won't exist
since content views are often used with container image versions that
are not the latest.

In the case where no tag is set in the entry in ContainerImagePrepare,
and the default tag does not exist in the container repo, the latest tag
from the repo will be assumed instead.

Change-Id: I985ef22c340c4071866c8c51bf303a6f4ee7713c
Closes-Bug: #1886547
Signed-off-by: James Slagle <jslagle@redhat.com>
(cherry picked from commit 0c4de9c771fad75ebabe2d18f5aef4b76613d52a)
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/21/741621/1 && git format-patch -1 --stdout FETCH_HEAD,"['container-images/container_image_prepare_defaults.yaml', 'tripleo_common/tests/image/test_image_uploader.py', 'tripleo_common/image/kolla_builder.py', 'releasenotes/notes/check_for_default_tag-09fe34d2ac434890.yaml', 'tripleo_common/image/image_uploader.py', 'tripleo_common/tests/image/test_kolla_builder.py']",6,ec65b686c38f696ac2aefc9d7dc9376f5637aa1d,," 'default_tag': True, 'default_tag': False,",,56,32
openstack%2Fpython-tripleoclient~stable%2Fussuri~I0185cb54ac32e1ac8558d22ba4c735a02e80a470,openstack/python-tripleoclient,stable/ussuri,I0185cb54ac32e1ac8558d22ba4c735a02e80a470,[ussuri] squash for overcloud_deploy raise changes,MERGED,2020-07-20 13:32:12.000000000,2020-07-21 04:52:03.000000000,2020-07-21 04:50:52.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-20 13:32:12.000000000', 'files': ['tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/v1/overcloud_deploy.py'], 'web_link': 'https://opendev.org/openstack/python-tripleoclient/commit/a29f42a531ba1110b18063b859fe348b1c9b159c', 'message': '[ussuri] squash for overcloud_deploy raise changes\n\nThis squash allows to backport a feature without a regression that was\nintroduced. It has 2 commits:\n\n1) overcloud_deploy: raise at the end if Ansible Runner had exception\n\nIn the context of MaxFailPercentage, if a node (e.g. one of 100\ncomputes) has any fatal error during an Ansible play and we tolerate\nsome percentage of failure; we want to raise the error but at the very\nend of the deployment.\n\nSo this patch puts the following actions in a ""finally"" block so they\nalways execute:\n\n* Create overcloudrc\n* Sets the right permissions to the clouds.yaml\n* Execute _deploy_postconfig\n* Print infos like Keystone entpoint, Horizon URL, RC file location\n  and deploy message (saying if there is an error or not)\n\nAnd at the very end we raise the actual AnsibleRunner trace if the\ndeployment failed.\n\nSo even if a node failed and we tolerate it, we\'ll still finish the\ndeployment until the end, but for UX purpose we want to raise it at the\nvery end.\nNote that when it fails and it\'s tolerated, Ansible prints the node as\n""ignored"":\n\nPLAY RECAP ******************************************************************\ncompute-0    : ok=555  (...)  failed=0    skipped=484  rescued=0    ignored=0\ncompute-1    : ok=60   (...)  failed=1    skipped=40   rescued=0    ignored=1\ncontroller-0 : ok=960  (...)  failed=0    skipped=709  rescued=0    ignored=0\ncontroller-1 : ok=920  (...)  failed=0    skipped=693  rescued=0    ignored=0\ncontroller-2 : ok=919  (...)  failed=0    skipped=693  rescued=0    ignored=0\nundercloud   : ok=86   (...)  failed=0    skipped=57   rescued=0    ignored=0\n\nTo improve UX, we\'ll investigate an Ansible callback to properly tell\nwhat nodes needs to be re-deployed.\n\nNote: also mock copy_clouds_yaml since it wasn\'t tested before but it\'s\nfailing to reach the files on the filesystem.\nChange-Id: I7d733499e74abe2cdf91526df608dc7c273bf19e\n\n(cherry picked from commit 5b63958105d73eadac9c598982e68ef35defa4a1)\n\n2) Don\'t run config-download for --stack-only\n\nWe now seem to run config-download irrespective of the\n--stack-only flag. This moves the config-download\nrelated code within the if block.\n\nChange-Id: I0185cb54ac32e1ac8558d22ba4c735a02e80a470\nCloses-Bug: #1887811\n(cherry picked from commit 5805ee4dbedac673268c6c3cf2ef616b887a1a5d)\n'}]",0,741941,a29f42a531ba1110b18063b859fe348b1c9b159c,9,4,1,3153,,,0,"[ussuri] squash for overcloud_deploy raise changes

This squash allows to backport a feature without a regression that was
introduced. It has 2 commits:

1) overcloud_deploy: raise at the end if Ansible Runner had exception

In the context of MaxFailPercentage, if a node (e.g. one of 100
computes) has any fatal error during an Ansible play and we tolerate
some percentage of failure; we want to raise the error but at the very
end of the deployment.

So this patch puts the following actions in a ""finally"" block so they
always execute:

* Create overcloudrc
* Sets the right permissions to the clouds.yaml
* Execute _deploy_postconfig
* Print infos like Keystone entpoint, Horizon URL, RC file location
  and deploy message (saying if there is an error or not)

And at the very end we raise the actual AnsibleRunner trace if the
deployment failed.

So even if a node failed and we tolerate it, we'll still finish the
deployment until the end, but for UX purpose we want to raise it at the
very end.
Note that when it fails and it's tolerated, Ansible prints the node as
""ignored"":

PLAY RECAP ******************************************************************
compute-0    : ok=555  (...)  failed=0    skipped=484  rescued=0    ignored=0
compute-1    : ok=60   (...)  failed=1    skipped=40   rescued=0    ignored=1
controller-0 : ok=960  (...)  failed=0    skipped=709  rescued=0    ignored=0
controller-1 : ok=920  (...)  failed=0    skipped=693  rescued=0    ignored=0
controller-2 : ok=919  (...)  failed=0    skipped=693  rescued=0    ignored=0
undercloud   : ok=86   (...)  failed=0    skipped=57   rescued=0    ignored=0

To improve UX, we'll investigate an Ansible callback to properly tell
what nodes needs to be re-deployed.

Note: also mock copy_clouds_yaml since it wasn't tested before but it's
failing to reach the files on the filesystem.
Change-Id: I7d733499e74abe2cdf91526df608dc7c273bf19e

(cherry picked from commit 5b63958105d73eadac9c598982e68ef35defa4a1)

2) Don't run config-download for --stack-only

We now seem to run config-download irrespective of the
--stack-only flag. This moves the config-download
related code within the if block.

Change-Id: I0185cb54ac32e1ac8558d22ba4c735a02e80a470
Closes-Bug: #1887811
(cherry picked from commit 5805ee4dbedac673268c6c3cf2ef616b887a1a5d)
",git fetch https://review.opendev.org/openstack/python-tripleoclient refs/changes/41/741941/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleoclient/tests/v1/overcloud_deploy/test_overcloud_deploy.py', 'tripleoclient/v1/overcloud_deploy.py']",2,a29f42a531ba1110b18063b859fe348b1c9b159c,runner/2," deploy_status = 'DEPLOY_SUCCESS' deploy_message = 'without error' try: if parsed_args.config_download: print(""Deploying overcloud configuration"") deployment.set_deployment_status( clients=self.clients, plan=stack.stack_name, status='DEPLOYING' ) status=deploy_status) except Exception as deploy_e: deploy_status = 'DEPLOY_FAILED' deploy_message = 'with error' deploy_trace = deploy_e deployment.set_deployment_status( clients=self.clients, plan=stack.stack_name, status=deploy_status ) finally: # Force fetching of attributes stack.get() rcpath = deployment.create_overcloudrc( container=stack.stack_name, no_proxy=parsed_args.no_proxy) # Copy clouds.yaml to the cloud user directory user = \ getpwuid(os.stat(constants.CLOUD_HOME_DIR).st_uid).pw_name utils.copy_clouds_yaml(user) utils.create_tempest_deployer_input() # Run postconfig on create or force. Use force to makes sure # endpoints are created with deploy reruns and upgrades if (stack_create or parsed_args.force_postconfig and not parsed_args.skip_postconfig): self._deploy_postconfig(stack, parsed_args) overcloud_endpoint = utils.get_overcloud_endpoint(stack) horizon_url = deployment.get_horizon_url( stack=stack.stack_name) print(""Overcloud Endpoint: {0}"".format(overcloud_endpoint)) print(""Overcloud Horizon Dashboard URL: {0}"".format( horizon_url)) print(""Overcloud rc file: {0}"".format(rcpath)) print(""Overcloud Deployed {0}"".format(deploy_message)) if deploy_status == 'DEPLOY_FAILED': raise(deploy_trace)"," if parsed_args.config_download: print(""Deploying overcloud configuration"") deployment.set_deployment_status( clients=self.clients, plan=stack.stack_name, status='DEPLOYING' ) try: status='DEPLOY_SUCCESS') except Exception: deployment.set_deployment_status( clients=self.clients, plan=stack.stack_name, status='DEPLOY_FAILED' ) raise # Force fetching of attributes stack.get() rcpath = deployment.create_overcloudrc(container=stack.stack_name, no_proxy=parsed_args.no_proxy) # Copy clouds.yaml to the cloud user directory user = getpwuid(os.stat(constants.CLOUD_HOME_DIR).st_uid).pw_name utils.copy_clouds_yaml(user) utils.create_tempest_deployer_input() # Run postconfig on create or force. Use force to makes sure endpoints # are created with deploy reruns and upgrades if (stack_create or parsed_args.force_postconfig and not parsed_args.skip_postconfig): self._deploy_postconfig(stack, parsed_args) overcloud_endpoint = utils.get_overcloud_endpoint(stack) horizon_url = deployment.get_horizon_url(stack=stack.stack_name) print(""Overcloud Endpoint: {0}"".format(overcloud_endpoint)) print(""Overcloud Horizon Dashboard URL: {0}"".format(horizon_url)) print(""Overcloud rc file: {0}"".format(rcpath)) print(""Overcloud Deployed"")",50,36
openstack%2Ftripleo-heat-templates~master~I17d6c3a3af5b192b77d264ff3e94e64ef6064c77,openstack/tripleo-heat-templates,master,I17d6c3a3af5b192b77d264ff3e94e64ef6064c77,Add BarbicanClient service for configuring edge sites,MERGED,2020-07-02 16:36:39.000000000,2020-07-21 04:51:58.000000000,2020-07-21 04:50:49.000000000,"[{'_account_id': 6796}, {'_account_id': 6926}, {'_account_id': 7144}, {'_account_id': 9914}, {'_account_id': 18002}, {'_account_id': 18575}, {'_account_id': 21129}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-02 16:36:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/833263fc509710d41313e438fc5bd00e1d862454', 'message': 'Add BarbicanClient service for configuring edge sites\n\nA new BarbicanClient tripleo service provides a means of configuring\nthe barbican Key Manager settings for cinder, glance and nova services\nrunning at an edge site. This is necessary because the BarbicanApi\ntripleo service is only capable of configuring the Key Manager settings\nfor services running in the control plane.\n\nFor cinder, the BarbicanClient ensures the KeyManager settings are\navailable to the cinder-volume and cinder-backup services. This is\nnecessary because the Key Manager setttings are traditionally associated\nwith the cinder-api service, but cinder-api is not deployed at the edge.\n\nCloses-Bug: #1886070\nChange-Id: I17d6c3a3af5b192b77d264ff3e94e64ef6064c77\n'}, {'number': 2, 'created': '2020-07-10 13:35:30.000000000', 'files': ['roles/DistributedComputeHCI.yaml', 'roles/DistributedCompute.yaml', 'roles/DistributedComputeScaleOut.yaml', 'overcloud-resource-registry-puppet.j2.yaml', 'releasenotes/notes/add-barbican-client-for-dcn-7182e8bab41fce21.yaml', 'roles/DistributedComputeHCIScaleOut.yaml', 'environments/services/barbican-edge.yaml', 'deployment/barbican/barbican-client-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5080e45fd283c795f973c86719d1959948f642e3', 'message': 'Add BarbicanClient service for configuring edge sites\n\nA new BarbicanClient tripleo service provides a means of configuring\nthe barbican Key Manager settings for cinder, glance and nova services\nrunning at an edge site. This is necessary because the BarbicanApi\ntripleo service is only capable of configuring the Key Manager settings\nfor services running in the control plane.\n\nFor cinder, the BarbicanClient ensures the KeyManager settings are\navailable to the cinder-volume and cinder-backup services. This is\nnecessary because the Key Manager setttings are traditionally associated\nwith the cinder-api service, but cinder-api is not deployed at the edge.\n\nCloses-Bug: #1886070\nChange-Id: I17d6c3a3af5b192b77d264ff3e94e64ef6064c77\n'}]",4,739098,5080e45fd283c795f973c86719d1959948f642e3,19,9,2,21129,,,0,"Add BarbicanClient service for configuring edge sites

A new BarbicanClient tripleo service provides a means of configuring
the barbican Key Manager settings for cinder, glance and nova services
running at an edge site. This is necessary because the BarbicanApi
tripleo service is only capable of configuring the Key Manager settings
for services running in the control plane.

For cinder, the BarbicanClient ensures the KeyManager settings are
available to the cinder-volume and cinder-backup services. This is
necessary because the Key Manager setttings are traditionally associated
with the cinder-api service, but cinder-api is not deployed at the edge.

Closes-Bug: #1886070
Change-Id: I17d6c3a3af5b192b77d264ff3e94e64ef6064c77
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/98/739098/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles/DistributedComputeHCI.yaml', 'roles/DistributedCompute.yaml', 'roles/DistributedComputeScaleOut.yaml', 'overcloud-resource-registry-puppet.j2.yaml', 'environments/services/barbican-edge.yaml', 'roles/DistributedComputeHCIScaleOut.yaml', 'deployment/barbican/barbican-client-puppet.yaml']",7,833263fc509710d41313e438fc5bd00e1d862454,bug/1886070,"heat_template_version: rocky description: > OpenStack Barbican client configuration parameters: EndpointMap: default: {} description: Mapping of service endpoint -> protocol. Typically set via parameter_defaults in the resource registry. type: json ServiceData: default: {} description: Dictionary packing service data type: json ServiceNetMap: default: {} description: Mapping of service_name -> network name. Typically set via parameter_defaults in the resource registry. This mapping overrides those in ServiceNetMapDefaults. type: json DefaultPasswords: default: {} type: json RoleName: default: '' description: Role name on which the service is applied type: string RoleParameters: default: {} description: Parameters specific to the role type: json outputs: role_data: description: Role data for the Barbican client. value: service_name: barbican_client service_config_settings: nova_compute: nova::compute::keymgr_backend: barbican nova::compute::barbican_endpoint: get_param: [EndpointMap, BarbicanInternal, uri] nova::compute::barbican_auth_endpoint: get_param: [EndpointMap, KeystoneInternal, uri_no_suffix] cinder_volume: &cinder_barbican_config cinder::config::cinder_config: key_manager/backend: value: barbican barbican/barbican_endpoint: value: {get_param: [EndpointMap, BarbicanInternal, uri]} barbican/auth_endpoint: value: {get_param: [EndpointMap, KeystoneInternal, uri_no_suffix]} cinder_backup: *cinder_barbican_config glance_api: glance::api::keymgr_backend: barbican glance::api::keymgr_encryption_api_url: get_param: [EndpointMap, BarbicanInternal, uri] glance::api::keymgr_encryption_auth_url: get_param: [EndpointMap, KeystoneInternal, uri_no_suffix] ",,69,0
openstack%2Ftripleo-heat-templates~master~Ib7d22fee0219514aee7f8ef8798449b24c59f919,openstack/tripleo-heat-templates,master,Ib7d22fee0219514aee7f8ef8798449b24c59f919,Replace deprecated ironoc::inspector parameters in puppet-ironic,MERGED,2020-04-18 13:37:54.000000000,2020-07-21 04:50:53.000000000,2020-07-21 04:50:53.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 9816}, {'_account_id': 9976}, {'_account_id': 10239}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-04-18 13:37:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/751f82576e0aabb5a1cc725856161cb77d978a48', 'message': 'Replace deprecated ironoc::inspector parameters in puppet-ironic\n\nReplace some parameters in puppet-ironic, which were deprecated in\nrecent refactoring[1].\n\n[1] https://review.opendev.org/#/c/719454/\n\nChange-Id: Ib7d22fee0219514aee7f8ef8798449b24c59f919\n'}, {'number': 2, 'created': '2020-04-18 13:39:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1c3357ff24fe9a1fa08d9540cde879a7e42011bc', 'message': 'Replace deprecated ironoc::inspector parameters in puppet-ironic\n\nReplace some parameters in puppet-ironic, which were deprecated in\nrecent refactoring[1].\n\n[1] https://review.opendev.org/#/c/719454/\n\nChange-Id: Ib7d22fee0219514aee7f8ef8798449b24c59f919\n'}, {'number': 3, 'created': '2020-05-11 12:05:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/959f59b6886eaeb64088b85bce03f7ac0bf703da', 'message': 'Replace deprecated ironoc::inspector parameters in puppet-ironic\n\nReplace some parameters in puppet-ironic, which were deprecated in\nrecent refactoring[1].\n\n[1] https://review.opendev.org/#/c/719454/\n\nChange-Id: Ib7d22fee0219514aee7f8ef8798449b24c59f919\n'}, {'number': 4, 'created': '2020-07-18 23:33:39.000000000', 'files': ['deployment/ironic/ironic-inspector-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/b2909955986cc779feaeba2746c6512715809955', 'message': 'Replace deprecated ironoc::inspector parameters in puppet-ironic\n\nReplace some parameters in puppet-ironic, which were deprecated in\nrecent refactoring[1].\n\n[1] https://review.opendev.org/#/c/719454/\n\nChange-Id: Ib7d22fee0219514aee7f8ef8798449b24c59f919\n'}]",2,720885,b2909955986cc779feaeba2746c6512715809955,42,10,4,9816,,,0,"Replace deprecated ironoc::inspector parameters in puppet-ironic

Replace some parameters in puppet-ironic, which were deprecated in
recent refactoring[1].

[1] https://review.opendev.org/#/c/719454/

Change-Id: Ib7d22fee0219514aee7f8ef8798449b24c59f919
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/85/720885/4 && git format-patch -1 --stdout FETCH_HEAD,['deployment/ironic/ironic-inspector-container-puppet.yaml'],1,751f82576e0aabb5a1cc725856161cb77d978a48,inspector-auth," ironic::inspector::ironic::username: 'ironic' ironic::inspector::ironic::password: {get_param: IronicPassword} ironic::inspector::ironic::tenant_name: 'service' ironic::inspector::ironic::auth_url: {get_param: [EndpointMap, KeystoneInternal, uri_no_suffix]} ironic::inspector::ironic::max_retries: 6 ironic::inspector::ironic::retry_interval: 10 ironic::inspector::ironic::user_domain_name: 'Default' ironic::inspector::ironic::project_domain_name: 'Default' ironic::inspector::ironic::region_name: {get_param: KeystoneRegion} ironic::inspector::swift::username: 'ironic' ironic::inspector::swift::password: {get_param: IronicPassword} ironic::inspector::swift::projetc_name: 'service' ironic::inspector::swift::auth_url: {get_param: [EndpointMap, KeystoneInternal, uri_no_suffix]} ironic::inspector::swift::user_domain_name: 'Default' ironic::inspector::swift::project_domain_name: 'Default' ironic::inspector::swift::region_name: {get_param: KeystoneRegion}"," ironic::inspector::ironic_username: 'ironic' ironic::inspector::ironic_password: {get_param: IronicPassword} ironic::inspector::ironic_tenant_name: 'service' ironic::inspector::ironic_auth_url: {get_param: [EndpointMap, KeystoneInternal, uri_no_suffix]} ironic::inspector::ironic_max_retries: 6 ironic::inspector::ironic_retry_interval: 10 ironic::inspector::ironic_user_domain_name: 'Default' ironic::inspector::ironic_project_domain_name: 'Default' ironic::inspector::swift_username: 'ironic' ironic::inspector::swift_password: {get_param: IronicPassword} ironic::inspector::swift_tenant_name: 'service' ironic::inspector::swift_auth_url: {get_param: [EndpointMap, KeystoneInternal, uri_no_suffix]} ironic::inspector::swift_user_domain_name: 'Default' ironic::inspector::swift_project_domain_name: 'Default'",16,14
openstack%2Ftripleo-heat-templates~stable%2Fussuri~I1e7ddb3bbb3825db805f137ea9a2501878f380d4,openstack/tripleo-heat-templates,stable/ussuri,I1e7ddb3bbb3825db805f137ea9a2501878f380d4,Drop the relabel flag for bind-mount,MERGED,2020-07-20 16:10:08.000000000,2020-07-21 04:44:40.000000000,2020-07-21 04:44:40.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-20 16:10:08.000000000', 'files': ['deployment/nova/nova-libvirt-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/0d587d8ce00e58d8507632dd3c5ca513fb146fd8', 'message': 'Drop the relabel flag for bind-mount\n\nSince this bind-mount isn\'t shared with any other container, remove its\n""relabel"" flag (:z).\n\nThis relabelling is especially useless since the directory creation AND\nopenstack-selinux sets its type to a sensible value. We can therefore\nremove it and prevent possible issues in the future.\n\nCloses-Bug: #1888216\nChange-Id: I1e7ddb3bbb3825db805f137ea9a2501878f380d4\n(cherry picked from commit 98d2271d1a10a55d745056aef10c94cd4200b2d9)\n'}]",0,741980,0d587d8ce00e58d8507632dd3c5ca513fb146fd8,8,3,1,28223,,,0,"Drop the relabel flag for bind-mount

Since this bind-mount isn't shared with any other container, remove its
""relabel"" flag (:z).

This relabelling is especially useless since the directory creation AND
openstack-selinux sets its type to a sensible value. We can therefore
remove it and prevent possible issues in the future.

Closes-Bug: #1888216
Change-Id: I1e7ddb3bbb3825db805f137ea9a2501878f380d4
(cherry picked from commit 98d2271d1a10a55d745056aef10c94cd4200b2d9)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/80/741980/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/nova/nova-libvirt-container-puppet.yaml'],1,0d587d8ce00e58d8507632dd3c5ca513fb146fd8,, - /var/lib/vhost_sockets:/var/lib/vhost_sockets, - /var/lib/vhost_sockets:/var/lib/vhost_sockets:z,1,1
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I1e7ddb3bbb3825db805f137ea9a2501878f380d4,openstack/tripleo-heat-templates,stable/train,I1e7ddb3bbb3825db805f137ea9a2501878f380d4,Drop the relabel flag for bind-mount,MERGED,2020-07-20 16:11:03.000000000,2020-07-21 04:33:58.000000000,2020-07-21 04:33:58.000000000,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-20 16:11:03.000000000', 'files': ['deployment/nova/nova-libvirt-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/15df75c3143ca542f56bc2cea3460b6fd28f1195', 'message': 'Drop the relabel flag for bind-mount\n\nSince this bind-mount isn\'t shared with any other container, remove its\n""relabel"" flag (:z).\n\nThis relabelling is especially useless since the directory creation AND\nopenstack-selinux sets its type to a sensible value. We can therefore\nremove it and prevent possible issues in the future.\n\nCloses-Bug: #1888216\nChange-Id: I1e7ddb3bbb3825db805f137ea9a2501878f380d4\n(cherry picked from commit 98d2271d1a10a55d745056aef10c94cd4200b2d9)\n(cherry picked from commit 0d587d8ce00e58d8507632dd3c5ca513fb146fd8)\n'}]",0,741982,15df75c3143ca542f56bc2cea3460b6fd28f1195,8,3,1,28223,,,0,"Drop the relabel flag for bind-mount

Since this bind-mount isn't shared with any other container, remove its
""relabel"" flag (:z).

This relabelling is especially useless since the directory creation AND
openstack-selinux sets its type to a sensible value. We can therefore
remove it and prevent possible issues in the future.

Closes-Bug: #1888216
Change-Id: I1e7ddb3bbb3825db805f137ea9a2501878f380d4
(cherry picked from commit 98d2271d1a10a55d745056aef10c94cd4200b2d9)
(cherry picked from commit 0d587d8ce00e58d8507632dd3c5ca513fb146fd8)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/82/741982/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/nova/nova-libvirt-container-puppet.yaml'],1,15df75c3143ca542f56bc2cea3460b6fd28f1195,, - /var/lib/vhost_sockets:/var/lib/vhost_sockets, - /var/lib/vhost_sockets:/var/lib/vhost_sockets:z,1,1
openstack%2Fpuppet-tripleo~master~Iaecced845b80e958c7ad0ef96896f1202259cca2,openstack/puppet-tripleo,master,Iaecced845b80e958c7ad0ef96896f1202259cca2,Fix up cluster_setup_extras usage,MERGED,2020-07-08 09:17:35.000000000,2020-07-21 04:33:52.000000000,2020-07-21 04:33:52.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30126}]","[{'number': 1, 'created': '2020-07-08 09:17:35.000000000', 'files': ['manifests/profile/base/pacemaker.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/6cfb7d36b3d42fc8052c9392d4b747e8921106f2', 'message': 'Fix up cluster_setup_extras usage\n\nStarting with pcs 0.10 (CentOS/RHEL 8) the arguments to pcs cluster\nsetup changed completely in an incompatible way and in fact are ignored\nby puppet-pacemaker. As we would like to reenable them, we first need to\nmake sure that whatever we pass is not understood by pcs.\n\nWe can also drop ipv6 and encryption parameters as corosync/pcs do not\nneed them any longer.\n\nChange-Id: Iaecced845b80e958c7ad0ef96896f1202259cca2\nRelated-Bug: #1886789\n'}]",0,739933,6cfb7d36b3d42fc8052c9392d4b747e8921106f2,9,5,1,20172,,,0,"Fix up cluster_setup_extras usage

Starting with pcs 0.10 (CentOS/RHEL 8) the arguments to pcs cluster
setup changed completely in an incompatible way and in fact are ignored
by puppet-pacemaker. As we would like to reenable them, we first need to
make sure that whatever we pass is not understood by pcs.

We can also drop ipv6 and encryption parameters as corosync/pcs do not
need them any longer.

Change-Id: Iaecced845b80e958c7ad0ef96896f1202259cca2
Related-Bug: #1886789
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/33/739933/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/profile/base/pacemaker.pp'],1,6cfb7d36b3d42fc8052c9392d4b747e8921106f2,fix-extras," $cluster_setup_extras = { ""totem token=${hiera('corosync_token_timeout', 1000)}"" => '',"," $corosync_ipv6 = str2bool(hiera('corosync_ipv6', false)) if $corosync_ipv6 { $cluster_setup_extras_pre = { '--token' => hiera('corosync_token_timeout', 1000), '--ipv6' => '' } } else { $cluster_setup_extras_pre = { '--token' => hiera('corosync_token_timeout', 1000) } if $encryption { $cluster_setup_extras = merge($cluster_setup_extras_pre, {'--encryption' => '1'}) } else { $cluster_setup_extras = $cluster_setup_extras_pre }",2,15
openstack%2Ftripleo-quickstart~master~I24a8440a651c1d67c2fd5eac18a9b39b320e70df,openstack/tripleo-quickstart,master,I24a8440a651c1d67c2fd5eac18a9b39b320e70df,Add enable_centos_cr_repo var in release file,ABANDONED,2020-06-19 14:22:38.000000000,2020-07-21 04:32:03.000000000,,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10022}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 13861}, {'_account_id': 20182}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 30750}]","[{'number': 1, 'created': '2020-06-19 14:22:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/3f27bfdc847e420abcd3d7285045813daa7b5d8c', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 2, 'created': '2020-06-22 08:30:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/2d6810e7b5618ea8aa64d24d3edc3edf7cc31ed9', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 3, 'created': '2020-06-22 11:18:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/b213c72fe99cf057eabb9da306092a14242aa682', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 4, 'created': '2020-06-22 12:24:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/c2ca95b09a56962a35b24ff5c973920619e99f8b', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt includes the centos-cr repos layout.\n\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 5, 'created': '2020-06-24 08:58:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/fa1518f691841410a4492db7b4f6ceb3f9df44de', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 6, 'created': '2020-06-29 10:37:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/efdf5f1047fd36710aa17bc0ec331dca4862e5b8', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 7, 'created': '2020-07-02 06:47:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/e1f3388cdf735534ad276ccb3a25b533519d6151', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nCo-authored-by: Bhagyashri Shewale <bshewale@redhat.com>\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 8, 'created': '2020-07-02 07:12:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/b895e6186542630fce7569c80e88e0791374736a', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nCo-authored-by: Bhagyashri Shewale <bshewale@redhat.com>\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 9, 'created': '2020-07-02 12:16:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/e22089a2b367d627d70bd0b42d9328bb3e3a0b3e', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nCo-authored-by: Bhagyashri Shewale <bshewale@redhat.com>\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 10, 'created': '2020-07-02 13:27:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/e271d27a4fcdd81301d095b6cccf79294ccc43b4', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nCo-authored-by: Bhagyashri Shewale <bshewale@redhat.com>\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 11, 'created': '2020-07-02 14:13:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/e07f309aac163bd04695f665b0ee08381aaad1f0', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nCo-authored-by: Bhagyashri Shewale <bshewale@redhat.com>\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 12, 'created': '2020-07-03 05:23:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/07e50d92b46cd2ef4644e6f041e1d1f227c57656', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nCo-authored-by: Bhagyashri Shewale <bshewale@redhat.com>\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 13, 'created': '2020-07-13 06:02:33.000000000', 'files': ['config/release/tripleo-ci/CentOS-8/promotion-testing-hash-master.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-ussuri.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-train.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/ca13b4c0540fb08394e29e39e34242dd10792ff0', 'message': 'Add enable_centos_cr_repo var in release file\n\nBy setting enable_centos_cr_repo to true will enable centos-8\nbased cr [1.]repos and will help to test pre released contents\nearly.\n\nIn train release file, it is already present, we are adding the\nsame for ussuri and master.\n\nIt will be consumed in a new job which is based on fs02 in\nperiodic pipeline https://review.rdoproject.org/r/#/c/28168/\nand can be enabled via fs override and\nhttps://review.opendev.org/#/c/736999/ adds the same.\n\nThe job needs to be always passing and if it fails it should\nblock the promotion pipeline.\n\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nCo-authored-by: Bhagyashri Shewale <bshewale@redhat.com>\nChange-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}]",21,737015,ca13b4c0540fb08394e29e39e34242dd10792ff0,45,11,13,12393,,,0,"Add enable_centos_cr_repo var in release file

By setting enable_centos_cr_repo to true will enable centos-8
based cr [1.]repos and will help to test pre released contents
early.

In train release file, it is already present, we are adding the
same for ussuri and master.

It will be consumed in a new job which is based on fs02 in
periodic pipeline https://review.rdoproject.org/r/#/c/28168/
and can be enabled via fs override and
https://review.opendev.org/#/c/736999/ adds the same.

The job needs to be always passing and if it fails it should
block the promotion pipeline.

[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR
https://tree.taiga.io/project/tripleo-ci-board/task/1826

Co-authored-by: Bhagyashri Shewale <bshewale@redhat.com>
Change-Id: I24a8440a651c1d67c2fd5eac18a9b39b320e70df
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/15/737015/3 && git format-patch -1 --stdout FETCH_HEAD,"['config/release/tripleo-ci/CentOS-8/promotion-testing-hash-master.yml', 'config/release/tripleo-ci/CentOS-8/ussuri.yml', 'config/release/tripleo-ci/CentOS-8/promotion-testing-hash-ussuri.yml', 'config/release/tripleo-ci/CentOS-8/master.yml']",4,3f27bfdc847e420abcd3d7285045813daa7b5d8c,crrepo, # Enable CR repos {% if enable_centos_cr_repo|default(false)|bool %} dnf config-manager --set-enabled quickstart-centos-cr {% endif %},,16,2
openstack%2Ftripleo-ci~master~Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38,openstack/tripleo-ci,master,Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38,Add enable_centos_cr_repo to fs override,ABANDONED,2020-06-19 13:11:30.000000000,2020-07-21 04:31:58.000000000,,"[{'_account_id': 8449}, {'_account_id': 9592}, {'_account_id': 9976}, {'_account_id': 10969}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-19 13:11:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/6edd918c226aad6f04f19f7511a272654bfee82a', 'message': 'Add enable_centos_cr_repo to fs override\n\nenable_centos_cr_repo var is used to enable continouse release\nrepo so that we catch issues early in a pre-released centos-8.x\ncontents.\n\nAdding it to fs override makes it easier to enable to those\nrepos.\n\nChange-Id: Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 2, 'created': '2020-06-19 13:35:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/b63fea280f0e4f3230329ea376554e20b872adcf', 'message': 'Add enable_centos_cr_repo to fs override\n\nenable_centos_cr_repo var is used to enable continous release\nrepo so that we catch issues early in a pre-released centos-8.x\ncontents.\n\nAdding it to fs override makes it easier to enable to those\nrepos.\n\nChange-Id: Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 3, 'created': '2020-06-22 08:30:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/c6892962546a8958237d0cc988ef8bfd8f6c4464', 'message': 'Add enable_centos_cr_repo to fs override\n\nenable_centos_cr_repo var is used to enable continous release\nrepo so that we catch issues early in a pre-released centos-8.x\ncontents.\n\nAdding it to fs override makes it easier to enable to those\nrepos.\n\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n\nChange-Id: Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 4, 'created': '2020-06-24 08:39:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/fb36a80c3380816c340719b13f0d668714ef5642', 'message': 'Add enable_centos_cr_repo to fs override\n\nenable_centos_cr_repo var is used to enable continous release\nrepo so that we catch issues early in a pre-released centos-8.x\ncontents.\n\nAdding it to fs override makes it easier to enable to those\nrepos.\n\nhttps://review.opendev.org/737015 adds the same flag in TQ\nrelease file so that it can be enabled via featureset override.\n\nIt will be consumed a new job based on fs02, can be runned in\nperiodic pipeline here https://review.rdoproject.org/r/#/c/28168/.\n\nChange-Id: Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 5, 'created': '2020-06-24 08:39:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/0e727b683673b5475b4843ae9add4fcfb015f1d6', 'message': 'Add enable_centos_cr_repo to fs override\n\nenable_centos_cr_repo var is used to enable continous release\nrepo so that we catch issues early in a pre-released centos-8.x\ncontents.\n\nAdding it to fs override makes it easier to enable to those\nrepos.\n\nhttps://review.opendev.org/737015 adds the same flag in TQ\nrelease file so that it can be enabled via featureset override.\n\nIt will be consumed a new job based on fs02, can be runned in\nperiodic pipeline here https://review.rdoproject.org/r/#/c/28168/.\n\nChange-Id: Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}, {'number': 6, 'created': '2020-06-24 08:48:49.000000000', 'files': ['roles/run-test/tasks/main.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ci/commit/60ecfa956d07778f00c47a02e21c5063a020463a', 'message': 'Add enable_centos_cr_repo to fs override\n\nenable_centos_cr_repo var is used to enable continous release\nrepo [1.] so that we catch issues early in a pre-released\ncentos-8.x contents.\n\nAdding it to fs override makes it easier to enable to those\nrepos.\n\nhttps://review.opendev.org/737015 adds the same flag in TQ\nrelease file so that it can be enabled via featureset override.\n\nIt will be consumed a new job based on fs02, can be runned in\nperiodic pipeline here https://review.rdoproject.org/r/#/c/28168/.\n\nhttps://tree.taiga.io/project/tripleo-ci-board/task/1826\n[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR\n\nChange-Id: Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38\nSigned-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>\n'}]",3,736999,60ecfa956d07778f00c47a02e21c5063a020463a,19,7,6,12393,,,0,"Add enable_centos_cr_repo to fs override

enable_centos_cr_repo var is used to enable continous release
repo [1.] so that we catch issues early in a pre-released
centos-8.x contents.

Adding it to fs override makes it easier to enable to those
repos.

https://review.opendev.org/737015 adds the same flag in TQ
release file so that it can be enabled via featureset override.

It will be consumed a new job based on fs02, can be runned in
periodic pipeline here https://review.rdoproject.org/r/#/c/28168/.

https://tree.taiga.io/project/tripleo-ci-board/task/1826
[1.] https://wiki.centos.org/AdditionalResources/Repositories/CR

Change-Id: Ieb05b00ba9d0dd13b443b65d7f97d85cb75dae38
Signed-off-by: Chandan Kumar (raukadah) <chkumar@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ci refs/changes/99/736999/6 && git format-patch -1 --stdout FETCH_HEAD,['roles/run-test/tasks/main.yaml'],1,6edd918c226aad6f04f19f7511a272654bfee82a,crrepo, - 'enable_centos_cr_repo',,1,0
openstack%2Fnova~stable%2Ftrain~I04717b95dd44ae89f24bd74525d1c9607e3bc0fc,openstack/nova,stable/train,I04717b95dd44ae89f24bd74525d1c9607e3bc0fc,zuul: remove legacy-tempest-dsvm-neutron-dvr-multinode-full,MERGED,2020-07-17 21:18:09.000000000,2020-07-21 04:14:24.000000000,2020-07-21 04:11:47.000000000,"[{'_account_id': 4690}, {'_account_id': 10459}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-07-17 21:18:09.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/b1ead1fb2adf25493e5cab472d529fde31f985f0', 'message': 'zuul: remove legacy-tempest-dsvm-neutron-dvr-multinode-full\n\nThe job was part of the neutron experimental queue but then removed\nduring the ussuri lifecycle.\nSee https://review.opendev.org/#/c/693630/\n\nChange-Id: I04717b95dd44ae89f24bd74525d1c9607e3bc0fc\n(cherry picked from commit bce4a3ab97320bdc2a6a43e2a961a0aa0b8ffb63)\n(cherry picked from commit cf399a363ca530151895c4b7cf49ad7b2a79e01b)\n'}]",0,741720,b1ead1fb2adf25493e5cab472d529fde31f985f0,12,5,1,10459,,,0,"zuul: remove legacy-tempest-dsvm-neutron-dvr-multinode-full

The job was part of the neutron experimental queue but then removed
during the ussuri lifecycle.
See https://review.opendev.org/#/c/693630/

Change-Id: I04717b95dd44ae89f24bd74525d1c9607e3bc0fc
(cherry picked from commit bce4a3ab97320bdc2a6a43e2a961a0aa0b8ffb63)
(cherry picked from commit cf399a363ca530151895c4b7cf49ad7b2a79e01b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/20/741720/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,b1ead1fb2adf25493e5cab472d529fde31f985f0,native-zuulv3-migration,, - legacy-tempest-dsvm-neutron-dvr-multinode-full: irrelevant-files: *dsvm-irrelevant-files,0,2
openstack%2Fnova~stable%2Ftrain~I9f95a054de9d43ecaa50ff7ffc9343490e212d53,openstack/nova,stable/train,I9f95a054de9d43ecaa50ff7ffc9343490e212d53,compute: Allow snapshots to be created from PAUSED volume backed instances,MERGED,2020-05-19 08:48:16.000000000,2020-07-21 04:03:22.000000000,2020-07-21 04:01:36.000000000,"[{'_account_id': 4690}, {'_account_id': 10118}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-05-19 08:48:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3d6a468f7cbcf58a3617a94df259cb74e9066cac', 'message': 'compute: Allow snapshots to be created from PAUSED volume backed instances\n\nIabeb44f843c3c04f767c4103038fcf6c52966ff3 allowed snapshots to be\ncreated from PAUSED non-volume backed instances but missed the volume\nbacked use case.\n\nThis change simply adds PAUSED to the list of acceptable vm_states when\ncreating a snapshot from a volume backed instance in addition to the\nalready supported ACTIVE, STOPPED and SUSPENDED vm_states.\n\nCloses-Bug: #1878583\nChange-Id: I9f95a054de9d43ecaa50ff7ffc9343490e212d53\n(cherry picked from commit cfde53e4b402e71d7f53b6e0ab232854dba160dc)\n(cherry picked from commit a270eeeb9b1a65045c3a8bf3cfad5eee6415f63c)\n'}, {'number': 2, 'created': '2020-05-19 10:58:09.000000000', 'files': ['nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c93ca609568bac73210f39207c821867620b2f0e', 'message': 'compute: Allow snapshots to be created from PAUSED volume backed instances\n\nIabeb44f843c3c04f767c4103038fcf6c52966ff3 allowed snapshots to be\ncreated from PAUSED non-volume backed instances but missed the volume\nbacked use case.\n\nThis change simply adds PAUSED to the list of acceptable vm_states when\ncreating a snapshot from a volume backed instance in addition to the\nalready supported ACTIVE, STOPPED and SUSPENDED vm_states.\n\nCloses-Bug: #1878583\nChange-Id: I9f95a054de9d43ecaa50ff7ffc9343490e212d53\n(cherry picked from commit cfde53e4b402e71d7f53b6e0ab232854dba160dc)\n(cherry picked from commit a270eeeb9b1a65045c3a8bf3cfad5eee6415f63c)\n'}]",0,729175,c93ca609568bac73210f39207c821867620b2f0e,29,8,2,10135,,,0,"compute: Allow snapshots to be created from PAUSED volume backed instances

Iabeb44f843c3c04f767c4103038fcf6c52966ff3 allowed snapshots to be
created from PAUSED non-volume backed instances but missed the volume
backed use case.

This change simply adds PAUSED to the list of acceptable vm_states when
creating a snapshot from a volume backed instance in addition to the
already supported ACTIVE, STOPPED and SUSPENDED vm_states.

Closes-Bug: #1878583
Change-Id: I9f95a054de9d43ecaa50ff7ffc9343490e212d53
(cherry picked from commit cfde53e4b402e71d7f53b6e0ab232854dba160dc)
(cherry picked from commit a270eeeb9b1a65045c3a8bf3cfad5eee6415f63c)
",git fetch https://review.opendev.org/openstack/nova refs/changes/75/729175/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py']",2,3d6a468f7cbcf58a3617a94df259cb74e9066cac,bug/1878583," vm_states.PAUSED, vm_states.SUSPENDED])", vm_states.SUSPENDED]),6,1
openstack%2Fnetworking-generic-switch~master~I5afa874abb4d89f1dde183781a5cc0a3f10d4d02,openstack/networking-generic-switch,master,I5afa874abb4d89f1dde183781a5cc0a3f10d4d02,Set min version of tox to 3.2.1,MERGED,2020-07-15 13:39:03.000000000,2020-07-21 03:52:11.000000000,2020-07-21 03:50:56.000000000,"[{'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 13:39:03.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/networking-generic-switch/commit/efeba57e7b5a53dcf4b60d66f3c0c7748fb2dfd5', 'message': 'Set min version of tox to 3.2.1\n\nAs recommended, since version 3.2.0 tox switches pip invocations\nto use the module -m pip instead of direct invocation.\nWe set min version to 3.2.1 [1] to also fix the behavior of\n--parallel--safe-build\n\n[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10\n\nChange-Id: I5afa874abb4d89f1dde183781a5cc0a3f10d4d02\n'}]",0,741196,efeba57e7b5a53dcf4b60d66f3c0c7748fb2dfd5,8,3,1,23851,,,0,"Set min version of tox to 3.2.1

As recommended, since version 3.2.0 tox switches pip invocations
to use the module -m pip instead of direct invocation.
We set min version to 3.2.1 [1] to also fix the behavior of
--parallel--safe-build

[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10

Change-Id: I5afa874abb4d89f1dde183781a5cc0a3f10d4d02
",git fetch https://review.opendev.org/openstack/networking-generic-switch refs/changes/96/741196/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,efeba57e7b5a53dcf4b60d66f3c0c7748fb2dfd5,tox-m-pip,minversion = 3.2.1,minversion = 3.1.0,1,1
openstack%2Fnetworking-baremetal~master~I90dd5c4f2823e273b8218a351ad452f6f3b0f7b2,openstack/networking-baremetal,master,I90dd5c4f2823e273b8218a351ad452f6f3b0f7b2,Set min version of tox to 3.2.1,MERGED,2020-07-15 13:38:08.000000000,2020-07-21 03:50:19.000000000,2020-07-21 03:48:52.000000000,"[{'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 13:38:08.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/networking-baremetal/commit/1b922ca4b7c07f03b5981da2a81f3ad3ef6ba965', 'message': 'Set min version of tox to 3.2.1\n\nAs recommended, since version 3.2.0 tox switches pip invocations\nto use the module -m pip instead of direct invocation.\nWe set min version to 3.2.1 [1] to also fix the behavior of\n--parallel--safe-build\n\n[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10\n\nChange-Id: I90dd5c4f2823e273b8218a351ad452f6f3b0f7b2\n'}]",0,741195,1b922ca4b7c07f03b5981da2a81f3ad3ef6ba965,7,2,1,23851,,,0,"Set min version of tox to 3.2.1

As recommended, since version 3.2.0 tox switches pip invocations
to use the module -m pip instead of direct invocation.
We set min version to 3.2.1 [1] to also fix the behavior of
--parallel--safe-build

[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10

Change-Id: I90dd5c4f2823e273b8218a351ad452f6f3b0f7b2
",git fetch https://review.opendev.org/openstack/networking-baremetal refs/changes/95/741195/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,1b922ca4b7c07f03b5981da2a81f3ad3ef6ba965,tox-m-pip,minversion = 3.2.1,minversion = 3.1.0,1,1
openstack%2Fnova~stable%2Fqueens~Idf84ccff254d26fa13473fe9741ddac21cbcf321,openstack/nova,stable/queens,Idf84ccff254d26fa13473fe9741ddac21cbcf321,Reject boot request for unsupported images,MERGED,2020-02-19 10:38:13.000000000,2020-07-21 03:47:28.000000000,2020-07-21 03:45:55.000000000,"[{'_account_id': 4690}, {'_account_id': 5314}, {'_account_id': 10118}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-02-19 10:38:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4914f72513f6bab9d2984d1a4b069739aed6fd43', 'message': ""Reject boot request for unsupported images\n\nNova has never supported direct booting of an image of an encrypted\nvolume uploaded to Glance via the Cinder upload-volume-to-image\nprocess, but instead of rejecting such a request, an 'active' but\nunusable instance is created.  This patch allows Nova to use image\nmetadata to detect such an image and reject the boot request.\n\nChange-Id: Idf84ccff254d26fa13473fe9741ddac21cbcf321\nRelated-bug: #1852106\nCloses-bug: #1863611\n(cherry picked from commit 963fd8c0f956bdf5c6c8987aa5d9f836386fd5ed)\n(cherry picked from commit 5eebfdec553e839dee426a0286de075318cbe599)\n(cherry picked from commit 51dc6eb40adedd3fb44f4131fbdf6dce0ca00238)\n(cherry picked from commit 80d294ba905ca97da7cd66df7510fd0dc868144f)\n""}, {'number': 2, 'created': '2020-06-16 14:26:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4c3e9eb23fd4ace5cb83269882dddcc1dcf5e471', 'message': ""Reject boot request for unsupported images\n\nNova has never supported direct booting of an image of an encrypted\nvolume uploaded to Glance via the Cinder upload-volume-to-image\nprocess, but instead of rejecting such a request, an 'active' but\nunusable instance is created.  This patch allows Nova to use image\nmetadata to detect such an image and reject the boot request.\n\nChange-Id: Idf84ccff254d26fa13473fe9741ddac21cbcf321\nRelated-bug: #1852106\nCloses-bug: #1863611\n(cherry picked from commit 963fd8c0f956bdf5c6c8987aa5d9f836386fd5ed)\n(cherry picked from commit 240d0309023fcaf20df44f819e9b3e14af97f526)\n(cherry picked from commit 6e71909b0b8ad8d20d0863e714cad2a7b120f658)\n(cherry picked from commit 9597d8aa6ebf3c223c93b2f5704ecb4200f78fb2)\n""}, {'number': 3, 'created': '2020-07-15 19:59:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/06ca6ed80f3b16dfb79d7ec443d048c6903c0cd1', 'message': ""Reject boot request for unsupported images\n\nNova has never supported direct booting of an image of an encrypted\nvolume uploaded to Glance via the Cinder upload-volume-to-image\nprocess, but instead of rejecting such a request, an 'active' but\nunusable instance is created.  This patch allows Nova to use image\nmetadata to detect such an image and reject the boot request.\n\nChange-Id: Idf84ccff254d26fa13473fe9741ddac21cbcf321\nRelated-bug: #1852106\nCloses-bug: #1863611\n(cherry picked from commit 963fd8c0f956bdf5c6c8987aa5d9f836386fd5ed)\n(cherry picked from commit 240d0309023fcaf20df44f819e9b3e14af97f526)\n(cherry picked from commit 6e71909b0b8ad8d20d0863e714cad2a7b120f658)\n(cherry picked from commit 9597d8aa6ebf3c223c93b2f5704ecb4200f78fb2)\n""}, {'number': 4, 'created': '2020-07-17 12:05:47.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_serversV21.py', 'releasenotes/notes/cinder-detect-nonbootable-image-6fad7f865b45f879.yaml', 'nova/compute/api.py', 'nova/api/openstack/compute/servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/418b9450e4b9bab15a4a0f92d013e53d18de3342', 'message': ""Reject boot request for unsupported images\n\nNova has never supported direct booting of an image of an encrypted\nvolume uploaded to Glance via the Cinder upload-volume-to-image\nprocess, but instead of rejecting such a request, an 'active' but\nunusable instance is created.  This patch allows Nova to use image\nmetadata to detect such an image and reject the boot request.\n\nChange-Id: Idf84ccff254d26fa13473fe9741ddac21cbcf321\nRelated-bug: #1852106\nCloses-bug: #1863611\n(cherry picked from commit 963fd8c0f956bdf5c6c8987aa5d9f836386fd5ed)\n(cherry picked from commit 240d0309023fcaf20df44f819e9b3e14af97f526)\n(cherry picked from commit 6e71909b0b8ad8d20d0863e714cad2a7b120f658)\n(cherry picked from commit 02551d6d6a3baee49309cffbc3bef2508fcafe72)\n""}]",1,708609,418b9450e4b9bab15a4a0f92d013e53d18de3342,26,9,4,10135,,,0,"Reject boot request for unsupported images

Nova has never supported direct booting of an image of an encrypted
volume uploaded to Glance via the Cinder upload-volume-to-image
process, but instead of rejecting such a request, an 'active' but
unusable instance is created.  This patch allows Nova to use image
metadata to detect such an image and reject the boot request.

Change-Id: Idf84ccff254d26fa13473fe9741ddac21cbcf321
Related-bug: #1852106
Closes-bug: #1863611
(cherry picked from commit 963fd8c0f956bdf5c6c8987aa5d9f836386fd5ed)
(cherry picked from commit 240d0309023fcaf20df44f819e9b3e14af97f526)
(cherry picked from commit 6e71909b0b8ad8d20d0863e714cad2a7b120f658)
(cherry picked from commit 02551d6d6a3baee49309cffbc3bef2508fcafe72)
",git fetch https://review.opendev.org/openstack/nova refs/changes/09/708609/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/compute/api.py', 'releasenotes/notes/cinder-detect-nonbootable-image-6fad7f865b45f879.yaml', 'nova/api/openstack/compute/servers.py']",4,4914f72513f6bab9d2984d1a4b069739aed6fd43,bug/1863611," exception.ImageUnacceptable,",,52,0
openstack%2Fos-testr~master~I9ec9dd3b8b1936e6b5768b29a87ddec348bb842c,openstack/os-testr,master,I9ec9dd3b8b1936e6b5768b29a87ddec348bb842c,Fix hacking min version to 3.0.1,ABANDONED,2020-05-22 03:54:31.000000000,2020-07-21 02:54:36.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-05-22 03:54:31.000000000', 'files': ['test-requirements.txt'], 'web_link': 'https://opendev.org/openstack/os-testr/commit/b243822fc6adc39f5eb389cfe76d494c47da1dbd', 'message': 'Fix hacking min version to 3.0.1\n\nChange-Id: I9ec9dd3b8b1936e6b5768b29a87ddec348bb842c\n'}]",0,730189,b243822fc6adc39f5eb389cfe76d494c47da1dbd,4,2,1,30384,,,0,"Fix hacking min version to 3.0.1

Change-Id: I9ec9dd3b8b1936e6b5768b29a87ddec348bb842c
",git fetch https://review.opendev.org/openstack/os-testr refs/changes/89/730189/1 && git format-patch -1 --stdout FETCH_HEAD,['test-requirements.txt'],1,b243822fc6adc39f5eb389cfe76d494c47da1dbd,,"hacking>=3.0.1,<3.1.0 # Apache-2.0","hacking>=3.0,<3.1.0 # Apache-2.0",1,1
openstack%2Fos-net-config~master~I5f6a90b964091daa354652d4ac12c02164066be1,openstack/os-net-config,master,I5f6a90b964091daa354652d4ac12c02164066be1,Switch from unittest2 compat methods to Python 3.x methods,MERGED,2020-07-05 11:44:09.000000000,2020-07-21 02:54:09.000000000,2020-07-21 02:52:46.000000000,"[{'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-05 11:44:09.000000000', 'files': ['os_net_config/tests/test_cli.py', 'os_net_config/tests/test_objects.py'], 'web_link': 'https://opendev.org/openstack/os-net-config/commit/869d3c13e84c9ccd0944ca8d8854d136c2854f17', 'message': 'Switch from unittest2 compat methods to Python 3.x methods\n\nWith the removal of Python 2.x we can remove the unittest2 compat\nwrappers and switch to assertCountEqual instead of assertItemsEqual\n\nWe have been able to use them since then, because\ntesttools required unittest2, which still included it. With testtools\nremoving Python 2.7 support [3][4], we will lose support for\nassertItemsEqual, so we should switch to use assertCountEqual.\n\n[1] - https://bugs.python.org/issue17866\n[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd\n[3] - testing-cabal/testtools#286\n[4] - testing-cabal/testtools#277\n\nChange-Id: I5f6a90b964091daa354652d4ac12c02164066be1\n'}]",0,739358,869d3c13e84c9ccd0944ca8d8854d136c2854f17,9,4,1,17130,,,0,"Switch from unittest2 compat methods to Python 3.x methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277

Change-Id: I5f6a90b964091daa354652d4ac12c02164066be1
",git fetch https://review.opendev.org/openstack/os-net-config refs/changes/58/739358/1 && git format-patch -1 --stdout FETCH_HEAD,"['os_net_config/tests/test_cli.py', 'os_net_config/tests/test_objects.py']",2,869d3c13e84c9ccd0944ca8d8854d136c2854f17,," self.assertCountEqual([""bar"", self.assertCountEqual([""bar"","," self.assertItemsEqual([""bar"", self.assertItemsEqual([""bar"",",4,4
openstack%2Fpuppet-tripleo~master~I8ad037cf59a5216c0d799be8bd499b7fb2d811c9,openstack/puppet-tripleo,master,I8ad037cf59a5216c0d799be8bd499b7fb2d811c9,Remove support for token_flush cron job,MERGED,2020-07-06 00:04:50.000000000,2020-07-21 02:52:48.000000000,2020-07-21 02:52:48.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-06 00:04:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/0dd09f526bb4e19e6bd8e35d91a4ded21aca7862', 'message': ""Remove support for token_flush cron job\n\nThe token_flush cron job is no longer required, because now tripleo use\nfernet token which doesn't persist token in database.\n\nChange-Id: I8ad037cf59a5216c0d799be8bd499b7fb2d811c9\n""}, {'number': 2, 'created': '2020-07-06 00:35:20.000000000', 'files': ['manifests/profile/base/keystone.pp', 'spec/classes/tripleo_profile_base_keystone_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/a37229ff98c3db9f764a5f4914ee4cf44a03b117', 'message': ""Remove support for token_flush cron job\n\nThe token_flush cron job is no longer required, because now tripleo use\nfernet token which doesn't persist token in database.\n\nChange-Id: I8ad037cf59a5216c0d799be8bd499b7fb2d811c9\n""}]",0,739382,a37229ff98c3db9f764a5f4914ee4cf44a03b117,9,4,2,9816,,,0,"Remove support for token_flush cron job

The token_flush cron job is no longer required, because now tripleo use
fernet token which doesn't persist token in database.

Change-Id: I8ad037cf59a5216c0d799be8bd499b7fb2d811c9
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/82/739382/1 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/keystone.pp', 'spec/classes/tripleo_profile_base_keystone_spec.rb']",2,0dd09f526bb4e19e6bd8e35d91a4ded21aca7862,keystone_cron,, is_expected.to_not contain_class('keystone::cron::token_flush') is_expected.to_not contain_class('keystone::cron::token_flush') is_expected.to_not contain_class('keystone::cron::token_flush') is_expected.to_not contain_class('keystone::cron::token_flush') is_expected.to_not contain_class('keystone::cron::token_flush') is_expected.to_not contain_class('keystone::cron::token_flush') is_expected.to contain_class('keystone::cron::token_flush'),0,8
openstack%2Fpuppet-tripleo~master~Ic140f8466e5f561b2936e7e4b29fdd8393cea01c,openstack/puppet-tripleo,master,Ic140f8466e5f561b2936e7e4b29fdd8393cea01c,Add support for trust_flush cron job in keystone,MERGED,2020-07-06 00:04:50.000000000,2020-07-21 02:52:47.000000000,2020-07-21 02:52:46.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-06 00:04:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/a67c1855e6934ef4f8f80951708bb7e13df506da', 'message': 'Add support for trust_flush cron job in keystone\n\nThis patch introduces a cron job configuration to purge expired or\nsoft-deleted trust from keystone database.\n\nChange-Id: Ic140f8466e5f561b2936e7e4b29fdd8393cea01c\n'}, {'number': 2, 'created': '2020-07-06 00:35:20.000000000', 'files': ['manifests/profile/base/keystone.pp', 'spec/classes/tripleo_profile_base_keystone_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/4e8a3933308e9e562396e45554890441f6e17296', 'message': 'Add support for trust_flush cron job in keystone\n\nThis patch introduces a cron job configuration to purge expired or\nsoft-deleted trust from keystone database.\n\nDepends-on: https://review.opendev.org/#/c/739378/\nChange-Id: Ic140f8466e5f561b2936e7e4b29fdd8393cea01c\n'}]",0,739381,4e8a3933308e9e562396e45554890441f6e17296,9,4,2,9816,,,0,"Add support for trust_flush cron job in keystone

This patch introduces a cron job configuration to purge expired or
soft-deleted trust from keystone database.

Depends-on: https://review.opendev.org/#/c/739378/
Change-Id: Ic140f8466e5f561b2936e7e4b29fdd8393cea01c
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/81/739381/2 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/base/keystone.pp', 'spec/classes/tripleo_profile_base_keystone_spec.rb']",2,a67c1855e6934ef4f8f80951708bb7e13df506da,keystone_cron, is_expected.to_not contain_class('keystone::cron::trust_flush') is_expected.to_not contain_class('keystone::cron::trust_flush') is_expected.to_not contain_class('keystone::cron::trust_flush') is_expected.to_not contain_class('keystone::cron::trust_flush') is_expected.to_not contain_class('keystone::cron::trust_flush') it 'should not trigger purge configuration' do is_expected.to_not contain_class('keystone::cron::trust_flush') it 'should trigger purge configuration' do is_expected.to contain_class('keystone::cron::trust_flush'), it 'should not trigger token_flush configuration' do it 'should trigger token_flush configuration' do,10,2
openstack%2Ftripleo-heat-templates~stable%2Fstein~Ie8207cd3ca40d687b374d2f9ee3129f27245d290,openstack/tripleo-heat-templates,stable/stein,Ie8207cd3ca40d687b374d2f9ee3129f27245d290,Disable LoggingConfiguration by default,MERGED,2020-06-03 09:04:56.000000000,2020-07-21 02:52:44.000000000,2020-07-21 02:52:44.000000000,"[{'_account_id': 3153}, {'_account_id': 5241}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-03 09:04:56.000000000', 'files': ['environments/logging-environment.yaml', 'overcloud-resource-registry-puppet.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/576c067f0736af9108a7dd3c541efc63a8f0aa0d', 'message': 'Disable LoggingConfiguration by default\n\nThis patch makes it possible to avoid issues with LoggingConfiguration\nparameters during stack update.\n\nCloses-Bug: #1881871\nChange-Id: Ie8207cd3ca40d687b374d2f9ee3129f27245d290\n'}]",0,733074,576c067f0736af9108a7dd3c541efc63a8f0aa0d,13,5,1,5241,,,0,"Disable LoggingConfiguration by default

This patch makes it possible to avoid issues with LoggingConfiguration
parameters during stack update.

Closes-Bug: #1881871
Change-Id: Ie8207cd3ca40d687b374d2f9ee3129f27245d290
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/74/733074/1 && git format-patch -1 --stdout FETCH_HEAD,"['environments/logging-environment.yaml', 'overcloud-resource-registry-puppet.j2.yaml']",2,576c067f0736af9108a7dd3c541efc63a8f0aa0d,, OS::TripleO::LoggingConfiguration: OS::Heat::None, OS::TripleO::LoggingConfiguration: deployment/deprecated/logging/fluentd-config.yaml,2,2
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I04a6114ca3d2703ca2891d6807d49b78ffee0f97,openstack/tripleo-heat-templates,stable/train,I04a6114ca3d2703ca2891d6807d49b78ffee0f97,Simplify host entries generation,MERGED,2020-07-17 07:18:30.000000000,2020-07-21 02:52:42.000000000,2020-07-21 02:52:41.000000000,"[{'_account_id': 3153}, {'_account_id': 19138}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-17 07:18:30.000000000', 'files': ['overcloud.j2.yaml', 'puppet/role.role.j2.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/c33f910054fe02d8b9479e74b967428852436581', 'message': 'Simplify host entries generation\n\nThis removes a resource and the the unnecessary yaql function.\nAlso replaces json data types with lists to reduce memory\nfootprint.\n\nChange-Id: I04a6114ca3d2703ca2891d6807d49b78ffee0f97\nRelated-Bug: #1886203\n(cherry picked from commit d573f4e8787c99982f6172aae74042f05a750d56)\n'}]",0,741586,c33f910054fe02d8b9479e74b967428852436581,9,4,1,8833,,,0,"Simplify host entries generation

This removes a resource and the the unnecessary yaql function.
Also replaces json data types with lists to reduce memory
footprint.

Change-Id: I04a6114ca3d2703ca2891d6807d49b78ffee0f97
Related-Bug: #1886203
(cherry picked from commit d573f4e8787c99982f6172aae74042f05a750d56)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/86/741586/1 && git format-patch -1 --stdout FETCH_HEAD,"['overcloud.j2.yaml', 'puppet/role.role.j2.yaml']",2,c33f910054fe02d8b9479e74b967428852436581,," - str_replace: template: PRIMARYIP PRIMARYHOST.DOMAIN PRIMARYHOST params: PRIMARYIP: {get_attr: [NetIpMap, net_ip_map, {get_param: [ServiceNetMap, {{role.name}}HostnameResolveNetwork]}]} DOMAIN: {get_param: CloudDomain} PRIMARYHOST: {get_attr: [{{server_resource_name}}, name]} - str_replace: template: {{network.name}}IP {{network.name}}HOST.DOMAIN {{network.name}}HOST params: DOMAIN: {get_param: CloudDomain} {{network.name}}IP: {get_attr: [{{network.name}}Port, ip_address]} {{network.name}}HOST: {get_attr: [NetHostMap, value, {{network.name_lower|default(network.name.lower())}}, short]} - str_replace: template: CTLPLANEIP CTLPLANEHOST.DOMAIN CTLPLANEHOST params: DOMAIN: {get_param: CloudDomain} CTLPLANEIP: {get_attr: [{{server_resource_name}}, networks, ctlplane, 0]} CTLPLANEHOST: {get_attr: [NetHostMap, value, ctlplane, short]}"," entries: - str_replace: template: PRIMARYIP PRIMARYHOST.DOMAIN PRIMARYHOST params: PRIMARYIP: {get_attr: [NetIpMap, net_ip_map, {get_param: [ServiceNetMap, {{role.name}}HostnameResolveNetwork]}]} DOMAIN: {get_param: CloudDomain} PRIMARYHOST: {get_attr: [{{server_resource_name}}, name]} - str_replace: template: {{network.name}}IP {{network.name}}HOST.DOMAIN {{network.name}}HOST params: DOMAIN: {get_param: CloudDomain} {{network.name}}IP: {get_attr: [{{network.name}}Port, ip_address]} {{network.name}}HOST: {get_attr: [NetHostMap, value, {{network.name_lower|default(network.name.lower())}}, short]} - str_replace: template: CTLPLANEIP CTLPLANEHOST.DOMAIN CTLPLANEHOST params: DOMAIN: {get_param: CloudDomain} CTLPLANEIP: {get_attr: [{{server_resource_name}}, networks, ctlplane, 0]} CTLPLANEHOST: {get_attr: [NetHostMap, value, ctlplane, short]}",58,69
openstack%2Fnetworking-ovn~stable%2Fstein~Ib3edc101e9ee0fb53386fac0ae7f272ab3b3646b,openstack/networking-ovn,stable/stein,Ib3edc101e9ee0fb53386fac0ae7f272ab3b3646b,test_router: Verify the creation and removal of a lrp,MERGED,2020-05-15 19:31:53.000000000,2020-07-21 02:25:55.000000000,2020-07-21 02:24:45.000000000,"[{'_account_id': 1131}, {'_account_id': 5756}, {'_account_id': 6773}, {'_account_id': 11952}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 24791}]","[{'number': 1, 'created': '2020-05-15 19:31:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/f63a77dd0f3c17bb842942c7cff70c72e1e97d55', 'message': 'test_router: Verify the creation and removal of a lrp\n\nAdd test to ensure that logical router port associated\nwith an external network is created and removed as\nneeded: test_logical_router_port_creation. With that,\nthe test exercises the code-path where a gateway is\nremoved before a new one is set. In terms of OpenStack\nworkflow, that would look like:\n\n  openstack router set --external-gateway $EXT_NET_ID $RTR\n  openstack router unset --external-gateway $RTR\n  openstack router set --external-gateway $EXT_NET_ID2 $RTR\n\nAlso changed test_gateway_chassis_with_bridge_mappings\nto include docstring and have a lower bound count to the\nmocked objects it uses.\n\nChange-Id: Ib3edc101e9ee0fb53386fac0ae7f272ab3b3646b\nSigned-off-by: Flavio Fernandes <flaviof@redhat.com>\nRelated-Bug: #1843485\nCloses-Bug: #1844652\n(cherry picked from commit 5cffa92daa822116c1862dcd11ad156be444df75)\n(cherry picked from commit b9ab95036b3bbaf1a87b1c4beeed11f80036e8a0)\n'}, {'number': 2, 'created': '2020-05-15 19:33:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/165f91a80e2ba2743f802bd798fd9479810d01a0', 'message': 'test_router: Verify the creation and removal of a lrp\n\nAdd test to ensure that logical router port associated\nwith an external network is created and removed as\nneeded: test_logical_router_port_creation. With that,\nthe test exercises the code-path where a gateway is\nremoved before a new one is set. In terms of OpenStack\nworkflow, that would look like:\n\n  openstack router set --external-gateway $EXT_NET_ID $RTR\n  openstack router unset --external-gateway $RTR\n  openstack router set --external-gateway $EXT_NET_ID2 $RTR\n\nAlso changed test_gateway_chassis_with_bridge_mappings\nto include docstring and have a lower bound count to the\nmocked objects it uses.\n\nChange-Id: Ib3edc101e9ee0fb53386fac0ae7f272ab3b3646b\nSigned-off-by: Flavio Fernandes <flaviof@redhat.com>\nRelated-Bug: #1843485\nCloses-Bug: #1844652\n(cherry picked from commit 5cffa92daa822116c1862dcd11ad156be444df75)\n(cherry picked from commit b9ab95036b3bbaf1a87b1c4beeed11f80036e8a0)\n'}, {'number': 3, 'created': '2020-07-15 09:09:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/02b4716952c88d83d6a0106f117b764486312c9f', 'message': 'test_router: Verify the creation and removal of a lrp\n\nAdd test to ensure that logical router port associated\nwith an external network is created and removed as\nneeded: test_logical_router_port_creation. With that,\nthe test exercises the code-path where a gateway is\nremoved before a new one is set. In terms of OpenStack\nworkflow, that would look like:\n\n  openstack router set --external-gateway $EXT_NET_ID $RTR\n  openstack router unset --external-gateway $RTR\n  openstack router set --external-gateway $EXT_NET_ID2 $RTR\n\nAlso changed test_gateway_chassis_with_bridge_mappings\nto include docstring and have a lower bound count to the\nmocked objects it uses.\n\nChange-Id: Ib3edc101e9ee0fb53386fac0ae7f272ab3b3646b\nSigned-off-by: Flavio Fernandes <flaviof@redhat.com>\nRelated-Bug: #1843485\nCloses-Bug: #1844652\n(cherry picked from commit 5cffa92daa822116c1862dcd11ad156be444df75)\n(cherry picked from commit b9ab95036b3bbaf1a87b1c4beeed11f80036e8a0)\n'}, {'number': 4, 'created': '2020-07-15 16:53:10.000000000', 'files': ['networking_ovn/tests/functional/test_router.py'], 'web_link': 'https://opendev.org/openstack/networking-ovn/commit/23a0316193be494c8fba7f223ad40624698c05dc', 'message': 'test_router: Verify the creation and removal of a lrp\n\nAdd test to ensure that logical router port associated\nwith an external network is created and removed as\nneeded: test_logical_router_port_creation. With that,\nthe test exercises the code-path where a gateway is\nremoved before a new one is set. In terms of OpenStack\nworkflow, that would look like:\n\n  openstack router set --external-gateway $EXT_NET_ID $RTR\n  openstack router unset --external-gateway $RTR\n  openstack router set --external-gateway $EXT_NET_ID2 $RTR\n\nAlso changed test_gateway_chassis_with_bridge_mappings\nto include docstring and have a lower bound count to the\nmocked objects it uses.\n\nChange-Id: Ib3edc101e9ee0fb53386fac0ae7f272ab3b3646b\nSigned-off-by: Flavio Fernandes <flaviof@redhat.com>\nRelated-Bug: #1843485\nCloses-Bug: #1844652\n(cherry picked from commit 5cffa92daa822116c1862dcd11ad156be444df75)\n(cherry picked from commit b9ab95036b3bbaf1a87b1c4beeed11f80036e8a0)\n'}]",0,728562,23a0316193be494c8fba7f223ad40624698c05dc,49,7,4,5756,,,0,"test_router: Verify the creation and removal of a lrp

Add test to ensure that logical router port associated
with an external network is created and removed as
needed: test_logical_router_port_creation. With that,
the test exercises the code-path where a gateway is
removed before a new one is set. In terms of OpenStack
workflow, that would look like:

  openstack router set --external-gateway $EXT_NET_ID $RTR
  openstack router unset --external-gateway $RTR
  openstack router set --external-gateway $EXT_NET_ID2 $RTR

Also changed test_gateway_chassis_with_bridge_mappings
to include docstring and have a lower bound count to the
mocked objects it uses.

Change-Id: Ib3edc101e9ee0fb53386fac0ae7f272ab3b3646b
Signed-off-by: Flavio Fernandes <flaviof@redhat.com>
Related-Bug: #1843485
Closes-Bug: #1844652
(cherry picked from commit 5cffa92daa822116c1862dcd11ad156be444df75)
(cherry picked from commit b9ab95036b3bbaf1a87b1c4beeed11f80036e8a0)
",git fetch https://review.opendev.org/openstack/networking-ovn refs/changes/62/728562/1 && git format-patch -1 --stdout FETCH_HEAD,['networking_ovn/tests/functional/test_router.py'],1,f63a77dd0f3c17bb842942c7cff70c72e1e97d55,," def test_logical_router_port_creation(self): """"""Launchpad bug #1844652: Verify creation and removal of lrp This test verifies that logical router port is created and removed based on attaching and detaching the external network to a router. """""" router = self._create_router('router1', gw_info=None) router_id = router['id'] self.assertIsNone(self._get_gw_port(router_id), ""router logical port unexpected before ext net"") # Create external network and assign it to router ext1 = self._create_ext_network( 'ext1', 'flat', 'physnet3', None, gateway=None, cidr=None) gw_info = {'network_id': ext1['network']['id']} self.l3_plugin.update_router( self.context, router_id, {'router': {l3_apidef.EXTERNAL_GW_INFO: gw_info}}) self.assertIsNotNone(self._get_gw_port(router_id), ""router logical port missing after ext net add"") # Un-assign external network from router self.l3_plugin.update_router( self.context, router_id, {'router': {l3_apidef.EXTERNAL_GW_INFO: None}}) self.assertIsNone(self._get_gw_port(router_id), ""router logical port exists after ext net removal"") def test_gateway_chassis_with_bridge_mappings(self): """"""Check selected ovn chassis based on external network This test sets different gateway values to ensure that the proper chassis are candidates, based on the physical network mappings. """""" # However, we know for sure that these mocks must have been # called at least 3 times because that is the number of times # this test invokes them: 1x create_router + 2x update_router # for client_select mock; and 3x schedule_unhosted_gateways for # plugin_select mock. self.assertGreaterEqual(client_select.call_count, 3) self.assertGreaterEqual(plugin_select.call_count, 3)", def test_gateway_chassis_with_bridge_mappings(self): self.assertTrue(client_select.called) self.assertTrue(plugin_select.called),41,2
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I9e9d63a7ef2ef538f3c072e3f4a96ec25d7dc5f7,openstack/tripleo-heat-templates,stable/train,I9e9d63a7ef2ef538f3c072e3f4a96ec25d7dc5f7,Fix vbmc_setup.yaml for c8 standalone,MERGED,2020-07-17 07:34:19.000000000,2020-07-21 02:06:54.000000000,2020-07-21 02:06:54.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 8449}, {'_account_id': 12393}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 29775}]","[{'number': 1, 'created': '2020-07-17 07:34:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/41dab2b7630e7124dcdfcae9b820ca1dafd33524', 'message': ""Fix vbmc_setup.yaml for c8 standalone\n\nFixing vbmc_setup.yaml for c8 scenario012-standalone job with this\npatch.\n\nvbmc_setup.yaml was originally written for c7 multinode[0] to install\nvirtual BMC and a libvirt domain on the controller for ironic to\nmanage. In scenario012 we are trying to test something close to ironic\nin overcloud(Blueprint[1]).\n\nIn the past, We have moved scenario012 mutinode to standalone job and\nreused vbmc_setup.yaml.\n\nThe shell script in vbmc_setup.yaml need following modification as its\nnow a C8 standalone job:-\n\n* Added 'set -e' so that script exits immediately if a command exits\nwith a non-zero status so it would result in deployment failure.\nCurrently deployment is passing even if some commands in the bash\nscript are failing. Addition of 'set -e' will correct this behavior.\n* Replaced yum with dnf as yum not present in Centos8.\n* No need to override resolv.conf entry as standalone job already\nconfigure necessary nameserver entries.\n* No need to install additional repos as as standalone job already\nconfigure necessary repos.\n* When vbmc_setup.yaml was introduced intention was to do non-kvm\nemulation[2] and that was the reason qemu-system-x86 and qemu-kvm-ev\nwas pulled from epel, but for c8 these packages are no longer available\nin repos [3] including epel. We can use qemu-kvm package instead and\nwe will no longer need epel repos.\n* create-node.sh command option to use qemu-system have to be removed\nas qemu-system-x86 package is missing and we are using qemu-kvm\ninstead.\n* Temporary workaround[4] to upgrade ansible in the neutron container\ncan be removed as ansible version in container is now v2.5.8+.\nTest patch for tripleo-ci-centos-8-scenario012-standalone is here[5].\n\n[0] https://review.opendev.org/#/c/485261/\n[1]\nhttps://blueprints.launchpad.net/tripleo/+spec/ironic-overcloud-ci\n[2]\nhttps://review.opendev.org/#/c/485261/29/ci/common/vbmc_setup.yaml\n[3] https://bugzilla.redhat.com/show_bug.cgi?id=1715806\n[4] https://review.opendev.org/#/c/579603/\n[5] https://review.opendev.org/#/c/724119/\n\nCloses-Bug: #1875681\n(cherry picked from commit 84e016edb39f352c3f36d07f94831fe3a0874587)\n\n Conflicts:\n\tci/common/vbmc_setup.yaml\n\nChange-Id: I9e9d63a7ef2ef538f3c072e3f4a96ec25d7dc5f7\n""}, {'number': 2, 'created': '2020-07-20 08:22:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7b48b87f3da992c6c6f90598c38e23e1cd4a3767', 'message': ""Fix vbmc_setup.yaml for c8 standalone\n\nFixing vbmc_setup.yaml for c8 scenario012-standalone job with this\npatch.\n\nvbmc_setup.yaml was originally written for c7 multinode[0] to install\nvirtual BMC and a libvirt domain on the controller for ironic to\nmanage. In scenario012 we are trying to test something close to ironic\nin overcloud(Blueprint[1]).\n\nIn the past, We have moved scenario012 mutinode to standalone job and\nreused vbmc_setup.yaml.\n\nThe shell script in vbmc_setup.yaml need following modification as its\nnow a C8 standalone job:-\n\n* Added 'set -e' so that script exits immediately if a command exits\nwith a non-zero status so it would result in deployment failure.\nCurrently deployment is passing even if some commands in the bash\nscript are failing. Addition of 'set -e' will correct this behavior.\n* Replaced yum with dnf as yum not present in Centos8.\n* No need to override resolv.conf entry as standalone job already\nconfigure necessary nameserver entries.\n* No need to install additional repos as as standalone job already\nconfigure necessary repos.\n* When vbmc_setup.yaml was introduced intention was to do non-kvm\nemulation[2] and that was the reason qemu-system-x86 and qemu-kvm-ev\nwas pulled from epel, but for c8 these packages are no longer available\nin repos [3] including epel. We can use qemu-kvm package instead and\nwe will no longer need epel repos.\n* create-node.sh command option to use qemu-system have to be removed\nas qemu-system-x86 package is missing and we are using qemu-kvm\ninstead.\n* Temporary workaround[4] to upgrade ansible in the neutron container\ncan be removed as ansible version in container is now v2.5.8+.\nTest patch for tripleo-ci-centos-8-scenario012-standalone is here[5].\n\n[0] https://review.opendev.org/#/c/485261/\n[1]\nhttps://blueprints.launchpad.net/tripleo/+spec/ironic-overcloud-ci\n[2]\nhttps://review.opendev.org/#/c/485261/29/ci/common/vbmc_setup.yaml\n[3] https://bugzilla.redhat.com/show_bug.cgi?id=1715806\n[4] https://review.opendev.org/#/c/579603/\n[5] https://review.opendev.org/#/c/724119/\n\nCloses-Bug: #1875681\n(cherry picked from commit 84e016edb39f352c3f36d07f94831fe3a0874587)\n\n Conflicts:\n\tci/common/vbmc_setup.yaml\n\nChange-Id: I9e9d63a7ef2ef538f3c072e3f4a96ec25d7dc5f7\n""}, {'number': 3, 'created': '2020-07-20 08:46:47.000000000', 'files': ['ci/common/vbmc_setup.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/69d63e0bc13efbfaa990408afee984673bde49bb', 'message': ""Fix vbmc_setup.yaml for c8 standalone\n\nFixing vbmc_setup.yaml for c8 scenario012-standalone job with this\npatch.\n\nvbmc_setup.yaml was originally written for c7 multinode[0] to install\nvirtual BMC and a libvirt domain on the controller for ironic to\nmanage. In scenario012 we are trying to test something close to ironic\nin overcloud(Blueprint[1]).\n\nIn the past, We have moved scenario012 mutinode to standalone job and\nreused vbmc_setup.yaml.\n\nThe shell script in vbmc_setup.yaml need following modification as its\nnow a C8 standalone job:-\n\n* Added 'set -e' so that script exits immediately if a command exits\nwith a non-zero status so it would result in deployment failure.\nCurrently deployment is passing even if some commands in the bash\nscript are failing. Addition of 'set -e' will correct this behavior.\n* Replaced yum with dnf as yum not present in Centos8.\n* No need to override resolv.conf entry as standalone job already\nconfigure necessary nameserver entries.\n* No need to install additional repos as as standalone job already\nconfigure necessary repos.\n* When vbmc_setup.yaml was introduced intention was to do non-kvm\nemulation[2] and that was the reason qemu-system-x86 and qemu-kvm-ev\nwas pulled from epel, but for c8 these packages are no longer available\nin repos [3] including epel. We can use qemu-kvm package instead and\nwe will no longer need epel repos.\n* create-node.sh command option to use qemu-system have to be removed\nas qemu-system-x86 package is missing and we are using qemu-kvm\ninstead.\n* Temporary workaround[4] to upgrade ansible in the neutron container\ncan be removed as ansible version in container is now v2.5.8+.\nTest patch for tripleo-ci-centos-8-scenario012-standalone is here[5].\n\n[0] https://review.opendev.org/#/c/485261/\n[1]\nhttps://blueprints.launchpad.net/tripleo/+spec/ironic-overcloud-ci\n[2]\nhttps://review.opendev.org/#/c/485261/29/ci/common/vbmc_setup.yaml\n[3] https://bugzilla.redhat.com/show_bug.cgi?id=1715806\n[4] https://review.opendev.org/#/c/579603/\n[5] https://review.opendev.org/#/c/724119/\n\nCloses-Bug: #1875681\n(cherry picked from commit 84e016edb39f352c3f36d07f94831fe3a0874587)\n\n Conflicts:\n\tci/common/vbmc_setup.yaml\n\nChange-Id: I9e9d63a7ef2ef538f3c072e3f4a96ec25d7dc5f7\n""}]",3,741589,69d63e0bc13efbfaa990408afee984673bde49bb,18,8,3,20182,,,0,"Fix vbmc_setup.yaml for c8 standalone

Fixing vbmc_setup.yaml for c8 scenario012-standalone job with this
patch.

vbmc_setup.yaml was originally written for c7 multinode[0] to install
virtual BMC and a libvirt domain on the controller for ironic to
manage. In scenario012 we are trying to test something close to ironic
in overcloud(Blueprint[1]).

In the past, We have moved scenario012 mutinode to standalone job and
reused vbmc_setup.yaml.

The shell script in vbmc_setup.yaml need following modification as its
now a C8 standalone job:-

* Added 'set -e' so that script exits immediately if a command exits
with a non-zero status so it would result in deployment failure.
Currently deployment is passing even if some commands in the bash
script are failing. Addition of 'set -e' will correct this behavior.
* Replaced yum with dnf as yum not present in Centos8.
* No need to override resolv.conf entry as standalone job already
configure necessary nameserver entries.
* No need to install additional repos as as standalone job already
configure necessary repos.
* When vbmc_setup.yaml was introduced intention was to do non-kvm
emulation[2] and that was the reason qemu-system-x86 and qemu-kvm-ev
was pulled from epel, but for c8 these packages are no longer available
in repos [3] including epel. We can use qemu-kvm package instead and
we will no longer need epel repos.
* create-node.sh command option to use qemu-system have to be removed
as qemu-system-x86 package is missing and we are using qemu-kvm
instead.
* Temporary workaround[4] to upgrade ansible in the neutron container
can be removed as ansible version in container is now v2.5.8+.
Test patch for tripleo-ci-centos-8-scenario012-standalone is here[5].

[0] https://review.opendev.org/#/c/485261/
[1]
https://blueprints.launchpad.net/tripleo/+spec/ironic-overcloud-ci
[2]
https://review.opendev.org/#/c/485261/29/ci/common/vbmc_setup.yaml
[3] https://bugzilla.redhat.com/show_bug.cgi?id=1715806
[4] https://review.opendev.org/#/c/579603/
[5] https://review.opendev.org/#/c/724119/

Closes-Bug: #1875681
(cherry picked from commit 84e016edb39f352c3f36d07f94831fe3a0874587)

 Conflicts:
	ci/common/vbmc_setup.yaml

Change-Id: I9e9d63a7ef2ef538f3c072e3f4a96ec25d7dc5f7
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/89/741589/3 && git format-patch -1 --stdout FETCH_HEAD,['ci/common/vbmc_setup.yaml'],1,41dab2b7630e7124dcdfcae9b820ca1dafd33524,bug/1875681-train," set -e dnf install -y python3-virtualbmc libvirt-client libvirt-daemon libvirt qemu-kvm LIBVIRT_STORAGE_POOL=${LIBVIRT_STORAGE_POOL:-""default""} LIBVIRT_STORAGE_POOL_PATH=${LIBVIRT_STORAGE_POOL_PATH:-/var/lib/libvirt/images} mkdir -p $LIBVIRT_STORAGE_POOL_PATH if ! virsh pool-list --all | grep -q $LIBVIRT_STORAGE_POOL; then virsh pool-define-as --name $LIBVIRT_STORAGE_POOL dir --target $LIBVIRT_STORAGE_POOL_PATH virsh pool-autostart $LIBVIRT_STORAGE_POOL virsh pool-start $LIBVIRT_STORAGE_POOL fi pool_state=$(virsh pool-info $LIBVIRT_STORAGE_POOL | grep State | awk '{ print $2 }') if [ ""$pool_state"" != ""running"" ] ; then virsh pool-start $LIBVIRT_STORAGE_POOL fi /tmp/ironic/devstack/tools/ironic/scripts/create-node.sh -n node1 -c 1 -m 3072 -d 10 -b br-ex -p 1161 -M 1350 -f qcow2 -a x86_64 -E qemu -l /var/log/bmlogs -A 66:0d:1d:d8:0b:11 > /var/log/bmlogs/create-node-1.log 2>&1 < /dev/null /tmp/ironic/devstack/tools/ironic/scripts/create-node.sh -n node2 -c 1 -m 3072 -d 10 -b br-ex -p 1162 -M 1350 -f qcow2 -a x86_64 -E qemu -l /var/log/bmlogs -A 66:0d:1d:d8:0b:22 > /var/log/bmlogs/create-node-2.log 2>&1 < /dev/null", cd /etc/yum.repos.d echo 'nameserver 1.1.1.1' > /etc/resolv.conf curl https://opendev.org/openstack/tripleo-repos/raw/branch/master/tripleo_repos/main.py | python - current-tripleo yum install -y python2-virtualbmc epel-release libvirt-client libvirt-daemon libvirt qemu-kvm-ev yum install -y qemu-system-x86 # <-- needs epel yum remove -y epel-release # neutron_api workaround for https://github.com/ansible/ansible/issues/42108 # remove when ansible v2.5.8+ is in the container image cat << EOF | docker exec -i -u 0 neutron_api /bin/bash -x yum install -y epel-release yum update -y ansible EOF docker restart neutron_api # nohup needed as vbmc seems to keep stdin open nohup /tmp/ironic/devstack/tools/ironic/scripts/create-node.sh -n node1 -c 1 -m 3072 -d 10 -b br-ex -p 1161 -M 1350 -f qcow2 -a x86_64 -E qemu -e /usr/bin/qemu-system-x86_64 -l /var/log/bmlogs -A 66:0d:1d:d8:0b:11 > ~zuul/create-node-1.log 2>&1 < /dev/null nohup /tmp/ironic/devstack/tools/ironic/scripts/create-node.sh -n node2 -c 1 -m 3072 -d 10 -b br-ex -p 1162 -M 1350 -f qcow2 -a x86_64 -E qemu -e /usr/bin/qemu-system-x86_64 -l /var/log/bmlogs -A 66:0d:1d:d8:0b:22 > ~zuul/create-node-2.log 2>&1 < /dev/null &,17,16
openstack%2Fpuppet-tripleo~master~I152f5374abad19502c484f33a36eef1af3f05255,openstack/puppet-tripleo,master,I152f5374abad19502c484f33a36eef1af3f05255,Include placement::api class,MERGED,2020-06-01 16:24:50.000000000,2020-07-21 02:01:54.000000000,2020-07-21 02:01:54.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-01 16:24:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/45b63dc48f4e229f1a32247a26a7ce3d19c053a3', 'message': 'Include placement::api class\n\n... because the placement::api class will be required in a future\nrelease of puppet-placement.\n\nDepends-on: https://review.opendev.org/#/c/732016/\nChange-Id: I152f5374abad19502c484f33a36eef1af3f05255\n'}, {'number': 2, 'created': '2020-06-08 15:40:18.000000000', 'files': ['spec/classes/tripleo_profile_base_placement_api_spec.rb', 'manifests/profile/base/placement/api.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/7c485d8264ec7502973a665956dcc96626e7a582', 'message': 'Include placement::api class\n\n... because the placement::api class will be required in a future\nrelease of puppet-placement.\n\nDepends-On: https://review.opendev.org/#/c/732016/\nChange-Id: I152f5374abad19502c484f33a36eef1af3f05255\n'}]",0,732416,7c485d8264ec7502973a665956dcc96626e7a582,34,6,2,9816,,,0,"Include placement::api class

... because the placement::api class will be required in a future
release of puppet-placement.

Depends-On: https://review.opendev.org/#/c/732016/
Change-Id: I152f5374abad19502c484f33a36eef1af3f05255
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/16/732416/2 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/tripleo_profile_base_placement_api_spec.rb', 'manifests/profile/base/placement/api.pp']",2,45b63dc48f4e229f1a32247a26a7ce3d19c053a3,placement-api, include placement::api,,6,0
openstack%2Ftripleo-heat-templates~stable%2Fstein~I219e2a8a08bc9b47bd7110fadcb188ef703acfce,openstack/tripleo-heat-templates,stable/stein,I219e2a8a08bc9b47bd7110fadcb188ef703acfce,Configure SNMP on undercloud,MERGED,2020-05-28 15:50:01.000000000,2020-07-21 02:01:52.000000000,2020-07-21 02:01:51.000000000,"[{'_account_id': 3153}, {'_account_id': 5241}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-05-28 15:50:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/ec335fc6b39db48945ea08b0a32fc0850590860b', 'message': 'Configure SNMP on undercloud\n\nTransfering to containerized deployment of undercloud we lost automated\nconfiguration of SNMP for undercloud. Telemetry stack is now failing to\nHW monitor this node.\n\nChange-Id: I219e2a8a08bc9b47bd7110fadcb188ef703acfce\n(cherry picked from commit 897678b33f5414b137c1a399934c4721e46662d0)\n'}, {'number': 2, 'created': '2020-05-28 16:09:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/73138dfa6621aebeb7949e464641678438b59623', 'message': 'Configure SNMP on undercloud\n\nTransfering to containerized deployment of undercloud we lost automated\nconfiguration of SNMP for undercloud. Telemetry stack is now failing to\nHW monitor this node.\n\nPartial-Bug: #1881152\n\nChange-Id: I219e2a8a08bc9b47bd7110fadcb188ef703acfce\n(cherry picked from commit 897678b33f5414b137c1a399934c4721e46662d0)\n'}, {'number': 3, 'created': '2020-07-20 12:02:53.000000000', 'files': ['roles_data_undercloud.yaml', 'roles/Undercloud.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/29187adcff0e1652f27b39c8d4cbd1bfc765fe6b', 'message': 'Configure SNMP on undercloud\n\nTransfering to containerized deployment of undercloud we lost automated\nconfiguration of SNMP for undercloud. Telemetry stack is now failing to\nHW monitor this node.\n\nChange-Id: I219e2a8a08bc9b47bd7110fadcb188ef703acfce\n(cherry picked from commit 897678b33f5414b137c1a399934c4721e46662d0)\n'}]",0,731573,29187adcff0e1652f27b39c8d4cbd1bfc765fe6b,24,5,3,5241,,,0,"Configure SNMP on undercloud

Transfering to containerized deployment of undercloud we lost automated
configuration of SNMP for undercloud. Telemetry stack is now failing to
HW monitor this node.

Change-Id: I219e2a8a08bc9b47bd7110fadcb188ef703acfce
(cherry picked from commit 897678b33f5414b137c1a399934c4721e46662d0)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/73/731573/1 && git format-patch -1 --stdout FETCH_HEAD,"['roles_data_undercloud.yaml', 'roles/Undercloud.yaml']",2,ec335fc6b39db48945ea08b0a32fc0850590860b,snmpd-undercloud-stein, - OS::TripleO::Services::Snmp,,2,1
openstack%2Ftripleo-heat-templates~master~I1e7ddb3bbb3825db805f137ea9a2501878f380d4,openstack/tripleo-heat-templates,master,I1e7ddb3bbb3825db805f137ea9a2501878f380d4,Drop the relabel flag for bind-mount,MERGED,2020-07-20 11:24:45.000000000,2020-07-21 02:01:49.000000000,2020-07-21 02:01:49.000000000,"[{'_account_id': 3153}, {'_account_id': 4978}, {'_account_id': 10873}, {'_account_id': 11166}, {'_account_id': 14985}, {'_account_id': 18575}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23811}]","[{'number': 1, 'created': '2020-07-20 11:24:45.000000000', 'files': ['deployment/nova/nova-libvirt-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/98d2271d1a10a55d745056aef10c94cd4200b2d9', 'message': 'Drop the relabel flag for bind-mount\n\nSince this bind-mount isn\'t shared with any other container, remove its\n""relabel"" flag (:z).\n\nThis relabelling is especially useless since the directory creation AND\nopenstack-selinux sets its type to a sensible value. We can therefore\nremove it and prevent possible issues in the future.\n\nCloses-Bug: #1888216\nChange-Id: I1e7ddb3bbb3825db805f137ea9a2501878f380d4\n'}]",0,741921,98d2271d1a10a55d745056aef10c94cd4200b2d9,11,9,1,28223,,,0,"Drop the relabel flag for bind-mount

Since this bind-mount isn't shared with any other container, remove its
""relabel"" flag (:z).

This relabelling is especially useless since the directory creation AND
openstack-selinux sets its type to a sensible value. We can therefore
remove it and prevent possible issues in the future.

Closes-Bug: #1888216
Change-Id: I1e7ddb3bbb3825db805f137ea9a2501878f380d4
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/21/741921/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/nova/nova-libvirt-container-puppet.yaml'],1,98d2271d1a10a55d745056aef10c94cd4200b2d9,no-relabel-vhost_sockets, - /var/lib/vhost_sockets:/var/lib/vhost_sockets, - /var/lib/vhost_sockets:/var/lib/vhost_sockets:z,1,1
openstack%2Ftripleo-heat-templates~master~I1106ff3870fc765d7b1063f201b89bdd696d1735,openstack/tripleo-heat-templates,master,I1106ff3870fc765d7b1063f201b89bdd696d1735,Remove duplicated hieradata,MERGED,2020-07-13 06:32:09.000000000,2020-07-21 02:01:43.000000000,2020-07-21 02:01:43.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 9816}, {'_account_id': 13861}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-13 06:32:09.000000000', 'files': ['deployment/neutron/neutron-api-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/88156596054d5824da96f082746b769fa60df5ff', 'message': 'Remove duplicated hieradata\n\nTrivial-Fix\n\nChange-Id: I1106ff3870fc765d7b1063f201b89bdd696d1735\n'}]",0,740617,88156596054d5824da96f082746b769fa60df5ff,13,7,1,9816,,,0,"Remove duplicated hieradata

Trivial-Fix

Change-Id: I1106ff3870fc765d7b1063f201b89bdd696d1735
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/17/740617/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/neutron/neutron-api-container-puppet.yaml'],1,88156596054d5824da96f082746b769fa60df5ff,neutron-notifications,, neutron::server::notifications::region_name: {get_param: KeystoneRegion},0,1
openstack%2Ftripleo-heat-templates~stable%2Ftrain~I772ad486ca11525b8756a0b8cac7a5345373a5d3,openstack/tripleo-heat-templates,stable/train,I772ad486ca11525b8756a0b8cac7a5345373a5d3,Convert roles section into tasks-include_role in deploy-steps.j2.,MERGED,2020-07-16 10:21:08.000000000,2020-07-21 02:01:41.000000000,2020-07-21 02:01:41.000000000,"[{'_account_id': 3153}, {'_account_id': 11090}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 26343}]","[{'number': 1, 'created': '2020-07-16 10:21:08.000000000', 'files': ['common/deploy-steps.j2'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/7bd1d7379733961c0f74c0b0dee14ce32de2f359', 'message': ""Convert roles section into tasks-include_role in deploy-steps.j2.\n\nWhen executing the deployment_steps_playbook.yaml passing\na specific --tags, it looks like this play gets executed\neven though the tag passed in --tags isn't common_roles.\n\nThis patch converts the roles: structure into a:\ntasks:\n  - include_role:\n\nwhich is the prefered way since Ansible 2.4. This way, the\ntags work properly and the execution of both roles is skipped\nif the tag doesn't match common_roles.\n\nChange-Id: I772ad486ca11525b8756a0b8cac7a5345373a5d3\nCloses-Bug: #1885721\n(cherry picked from commit 70eacd3dab79a02e24bc30c97cdf5dc744908605)\n""}]",0,741423,7bd1d7379733961c0f74c0b0dee14ce32de2f359,10,6,1,6816,,,0,"Convert roles section into tasks-include_role in deploy-steps.j2.

When executing the deployment_steps_playbook.yaml passing
a specific --tags, it looks like this play gets executed
even though the tag passed in --tags isn't common_roles.

This patch converts the roles: structure into a:
tasks:
  - include_role:

which is the prefered way since Ansible 2.4. This way, the
tags work properly and the execution of both roles is skipped
if the tag doesn't match common_roles.

Change-Id: I772ad486ca11525b8756a0b8cac7a5345373a5d3
Closes-Bug: #1885721
(cherry picked from commit 70eacd3dab79a02e24bc30c97cdf5dc744908605)
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/23/741423/1 && git format-patch -1 --stdout FETCH_HEAD,['common/deploy-steps.j2'],1,7bd1d7379733961c0f74c0b0dee14ce32de2f359,ffwd-upgrade2-stable/train, tasks: - include_role: name: tripleo-bootstrap - include_role: name: tripleo-ssh-known-hosts, roles: - tripleo-bootstrap - tripleo-ssh-known-hosts,5,3
openstack%2Ftripleo-ansible~master~I31cf042b72aad5cdd2c7c1ae8bc319eca372acff,openstack/tripleo-ansible,master,I31cf042b72aad5cdd2c7c1ae8bc319eca372acff,Allow any_errors_fatal to be dynamic,MERGED,2020-07-16 19:45:52.000000000,2020-07-21 01:47:04.000000000,2020-07-21 01:32:14.000000000,"[{'_account_id': 3153}, {'_account_id': 7353}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-16 19:45:52.000000000', 'files': ['tripleo_ansible/ansible_plugins/strategy/tripleo_linear.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_free.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_base.py'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/28d4e52a16c21e5f87acdfe72a7f489611c841c9', 'message': ""Allow any_errors_fatal to be dynamic\n\nCurrently any_errors_fatal cannot be dynamic value based on the current\ntask vars. This change attempts to evaulate the provided value and\nverifies it's a boolean when using it to handle the any_errors_fatal\nlogic.\n\nRelated Upstream: https://github.com/ansible/ansible/pull/70694\nRelated-Bug: #1887702\n\nChange-Id: I31cf042b72aad5cdd2c7c1ae8bc319eca372acff\n""}]",0,741533,28d4e52a16c21e5f87acdfe72a7f489611c841c9,12,5,1,14985,,,0,"Allow any_errors_fatal to be dynamic

Currently any_errors_fatal cannot be dynamic value based on the current
task vars. This change attempts to evaulate the provided value and
verifies it's a boolean when using it to handle the any_errors_fatal
logic.

Related Upstream: https://github.com/ansible/ansible/pull/70694
Related-Bug: #1887702

Change-Id: I31cf042b72aad5cdd2c7c1ae8bc319eca372acff
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/33/741533/1 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/ansible_plugins/strategy/tripleo_linear.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_free.py', 'tripleo_ansible/ansible_plugins/strategy/tripleo_base.py']",3,28d4e52a16c21e5f87acdfe72a7f489611c841c9,bug/1887702," def _get_task_errors_fatal(self, task, templar): """"""Return parsed any_errors_fatal from a task"""""" return task.get_validated_value('any_errors_fatal', task._valid_attrs['any_errors_fatal'], templar.template( task.any_errors_fatal), None) ",,30,20
openstack%2Fneutron-tempest-plugin~master~I11c064c75be5152f07942ba4a9fb202e9a862468,openstack/neutron-tempest-plugin,master,I11c064c75be5152f07942ba4a9fb202e9a862468,"case for update qos rule, rule or policy non-existent",MERGED,2020-07-08 07:01:19.000000000,2020-07-21 01:43:48.000000000,2020-07-21 01:43:48.000000000,"[{'_account_id': 4694}, {'_account_id': 8313}, {'_account_id': 22348}, {'_account_id': 30409}, {'_account_id': 31280}]","[{'number': 1, 'created': '2020-07-08 07:01:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/0b410a2a2561993371b3d7f82242d70cab4239f3', 'message': 'case for update qos rule, rule or policy non-existent\n\nChange-Id: I11c064c75be5152f07942ba4a9fb202e9a862468\n'}, {'number': 2, 'created': '2020-07-09 00:56:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/303bfb066ea26cb427a479711f05c0eb77b796fa', 'message': 'case for update qos rule, rule or policy non-existent\n\nupdate qos rule, rule or policy non-existent\nChange-Id: I11c064c75be5152f07942ba4a9fb202e9a862468\n'}, {'number': 3, 'created': '2020-07-10 01:00:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/00ed280c278f5517bd73d2207f21cef46a88324c', 'message': 'case for update qos rule, rule or policy non-existent\n\nupdate qos rule, rule or policy non-existent, move case into\ntest_qos_negative.py\nChange-Id: I11c064c75be5152f07942ba4a9fb202e9a862468\n'}, {'number': 4, 'created': '2020-07-10 03:05:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/cbd097fb9dddd9224b1345f1f50166f8f805fae6', 'message': 'case for update qos rule, rule or policy non-existent\n\nupdate qos rule, rule or policy non-existent, move case into\ntest_qos_negative.py\nChange-Id: I11c064c75be5152f07942ba4a9fb202e9a862468\n'}, {'number': 5, 'created': '2020-07-11 01:25:45.000000000', 'files': ['neutron_tempest_plugin/api/test_qos_negative.py'], 'web_link': 'https://opendev.org/openstack/neutron-tempest-plugin/commit/dac25ac0b36e69019a08b479c67614a1d0275be3', 'message': 'case for update qos rule, rule or policy non-existent\n\nupdate qos rule, rule or policy non-existent, move case into\ntest_qos_negative.py\nChange-Id: I11c064c75be5152f07942ba4a9fb202e9a862468\n'}]",4,739906,dac25ac0b36e69019a08b479c67614a1d0275be3,24,5,5,31280,,,0,"case for update qos rule, rule or policy non-existent

update qos rule, rule or policy non-existent, move case into
test_qos_negative.py
Change-Id: I11c064c75be5152f07942ba4a9fb202e9a862468
",git fetch https://review.opendev.org/openstack/neutron-tempest-plugin refs/changes/06/739906/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron_tempest_plugin/api/test_qos.py'],1,0b410a2a2561993371b3d7f82242d70cab4239f3,neutron03," @decorators.idempotent_id('e9ce8042-c828-4cb9-b1f1-85bd35e6553a') def test_rule_update_rule_nonexistent_policy(self): non_exist_id = data_utils.rand_name('qos_policy') policy = self.create_qos_policy(name='test-policy', description='test policy', shared=False) rule = self.create_qos_bandwidth_limit_rule(policy_id=policy['id'], max_kbps=1, max_burst_kbps=1, direction=self.direction) self.assertRaises( exceptions.NotFound, self.admin_client.update_bandwidth_limit_rule, non_exist_id, rule['id'], 200, 1337, self.direction) @decorators.idempotent_id('a2c72066-0c32-4f28-be7f-78fa721588b6') def test_rule_update_rule_nonexistent_rule(self): non_exist_id = data_utils.rand_name('qos_rule') policy = self.create_qos_policy(name='test-policy', description='test policy', shared=False) self.assertRaises( exceptions.NotFound, self.admin_client.update_bandwidth_limit_rule, policy['id'], non_exist_id, 200, 1337, self.direction) ",,26,0
openstack%2Fironic~master~I13da6275c04ffc6237a7f2edf25c03b4ddee936a,openstack/ironic,master,I13da6275c04ffc6237a7f2edf25c03b4ddee936a,Update number of VM on ironic-base,MERGED,2020-07-18 08:57:35.000000000,2020-07-21 01:39:48.000000000,2020-07-21 01:02:39.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-07-18 08:57:35.000000000', 'files': ['zuul.d/ironic-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/dc87a189cb0d5bf2e96650ffd699fbaa972b7983', 'message': ""Update number of VM on ironic-base\n\nSince we merged the change to have partition and wholedisk\ntesting on basic_ops most of the jobs started requiring 2 VMs\nto run the tempest tets.\n\nLet's increase on the ironic-base so all jobs will be default to 2.\n\nRemoving IRONIC_VM_COUNT=2 from jobs that uses ironic-base as parent.\n\nChange-Id: I13da6275c04ffc6237a7f2edf25c03b4ddee936a\n""}]",0,741804,dc87a189cb0d5bf2e96650ffd699fbaa972b7983,11,5,1,15519,,,0,"Update number of VM on ironic-base

Since we merged the change to have partition and wholedisk
testing on basic_ops most of the jobs started requiring 2 VMs
to run the tempest tets.

Let's increase on the ironic-base so all jobs will be default to 2.

Removing IRONIC_VM_COUNT=2 from jobs that uses ironic-base as parent.

Change-Id: I13da6275c04ffc6237a7f2edf25c03b4ddee936a
",git fetch https://review.opendev.org/openstack/ironic refs/changes/04/741804/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/ironic-jobs.yaml'],1,dc87a189cb0d5bf2e96650ffd699fbaa972b7983,increase_vm_count, IRONIC_VM_COUNT: 2, IRONIC_VM_COUNT: 1 IRONIC_VM_COUNT: 2 IRONIC_VM_COUNT: 2 IRONIC_VM_COUNT: 2,1,4
openstack%2Fopenstack-helm-images~master~Ie7d86859e04fa884ed564889cb40b7bade72fae0,openstack/openstack-helm-images,master,Ie7d86859e04fa884ed564889cb40b7bade72fae0,Make python script parameter even more generic,ABANDONED,2019-07-03 21:34:00.000000000,2020-07-21 01:32:21.000000000,,"[{'_account_id': 17068}, {'_account_id': 17591}, {'_account_id': 17966}, {'_account_id': 18295}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 22604}, {'_account_id': 23928}, {'_account_id': 28618}, {'_account_id': 30120}, {'_account_id': 30166}]","[{'number': 1, 'created': '2019-07-03 21:34:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/1f9be664f999c04eb4b64e887a6038df7e276541', 'message': 'Make python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 2, 'created': '2019-07-09 19:41:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/f241a009d2a42e8aaf947c0d62489b01cc003f34', 'message': 'Multiple fixes to a number of reviews.\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 3, 'created': '2019-07-09 23:59:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/53ad0f2bfbc1b0a78381121e1bc2942a7b3b0d6a', 'message': 'Made fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 4, 'created': '2019-07-10 14:51:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/4902372bffcc8fa31ffec8808f717a169ef5a069', 'message': 'Make python script parameter even more generic\n\nMade fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 5, 'created': '2019-07-10 16:24:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/aadc1fd434a535b16d4532a2426bf891d8bd755b', 'message': 'Make python script parameter even more generic\n\nMade fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 6, 'created': '2019-07-10 22:19:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/9a41ba07d10a6c2b0010fb6942b7dd88d256c180', 'message': 'Make python script parameter even more generic\n\nMade fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 7, 'created': '2019-07-11 10:25:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/fbe140498b47e055a531b29ca14eb7942cde1c97', 'message': 'Make python script parameter even more generic\n\nMade fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 8, 'created': '2019-07-11 14:43:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/8aa64463b03af68eac531c7db3861d0bb5c9c85e', 'message': 'Make python script parameter even more generic\n\nMade fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 9, 'created': '2019-07-15 08:21:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/3f9c4530b0ab4797bccf24aef4720f3fd9fc7632', 'message': 'Make python script parameter even more generic\n\nMade fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}, {'number': 10, 'created': '2019-07-23 09:53:20.000000000', 'files': ['nagios/plugins/query_es_failedlogins.py'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/88d359285df6d28bfeab18f3ca1b4ba2c593b6d9', 'message': 'Make python script parameter even more generic\n\nMade fixes for third review!\n\nMake python script parameter even more generic\n\nChange-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0\n'}]",55,668997,88d359285df6d28bfeab18f3ca1b4ba2c593b6d9,46,12,10,30120,,,0,"Make python script parameter even more generic

Made fixes for third review!

Make python script parameter even more generic

Change-Id: Ie7d86859e04fa884ed564889cb40b7bade72fae0
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/97/668997/9 && git format-patch -1 --stdout FETCH_HEAD,['nagios/plugins/query_es_failedlogins.py'],1,1f9be664f999c04eb4b64e887a6038df7e276541,,"#!/usr/bin/env python # -*- coding: utf-8 -*- # # Copyright 2017 The Openstack-Helm Authors. # # Licensed under the Apache License, Version 2.0 (the ""License""); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. # """"""Query elasticsearch using a combination of simple query pattern, field matches, and/or query clause and evaluate the results against the alert threshold"""""" from __future__ import print_function import sys import argparse from datetime import datetime, timedelta import time import json import re import requests from nagiosutil import NagiosUtil def check_bool(value): """"""validate range"""""" return value.lower() in [ 'true', 'yes', 'on', 't', 'y', '1'] def check_range(value): """"""validate range"""""" minutes = int(value) if minutes < 1 or minutes > 1440: raise argparse.ArgumentTypeError('%s is an invalid search time range.' ' Valid values are between 1 and 1440' '(1 day) minutes.' % value) return minutes def check_threshold(value): """"""validate threshold"""""" threshold = int(value) if threshold < 1: raise argparse.ArgumentTypeError('%s is an invalid threshold' ' Valid threshold is > 0' % value) return threshold def check_match(value): """"""validate match clauses"""""" if not value: # tolerate empty match clause return try: match_fields = dict(item.split(':') for item in value.split(',')) return match_fields except BaseException: raise argparse.ArgumentTypeError('%s is an invalid match clause(s) list.' ' Valid format is a comma separated' ' list of field name and value pairs.' ' ex. field1:value1,field2:value2,...' % value) def check_datetime(value): the_datetime = None if not re.match(r'\d{4}\-\d{2}\-\d{2}T\d{2}\:\d{2}\:\d{2}(\.\d+){0,1}', value.strip()): raise argparse.ArgumentTypeError('%s is an invalid date format, expect YYYY-mm-dd' % value) else: the_datetime = datetime.strptime(value, '%Y-%m-%dT%H:%M:%S') return the_datetime def check_date(value): """"""validate date (only, no time) in standard format """""" the_date = None if not re.match(r'\d{4}\-\d{2}\-\d{2}', value.strip()): raise argparse.ArgumentTypeError('%s is an invalid date format, expect YYYY-mm-dd' % value) else: the_date = datetime.strptime(value, '%Y-%m-%d') return the_date def check_timezone(value): """"""validate timezone specification +/-hh:mm """""" text = value.strip() if not re.match(r'(\+|\-){1}\d{2}\:\d{2}', text): raise argparse.ArgumentTypeError('%s is an invalid timezone format, expect +/-hh:mm' % text) return text def get_utc_timezone(): return -1 * time.altzone / (60 * 60) def get_utc_timezone_str(): text = '' offset = get_utc_timezone() if offset < 0: text = '-' else: text = '+' offset = abs(offset) return text + format(offset, '02d') + ':00' def setup_argparse(parser): """"""setup argparse parser with arguments and help texts"""""" range_help = ('relative time range between now and x minutes ago.' ' must be between 1 <= x <=1440 minutes, default is 5') endpoint_help = 'elasticsearch API service endpoint url' simple_query_fields_help = ('fields to perform the parsed simple query' ' against') match_help = ('elasticsearch match clause(s), in the format of' ' comma separated list of field name and value pairs.' ' ex. field1:value1,field2:value2,...') critical_threshold_help = ('Status is Critical if the' ' number of hits >= the threshold') parser.add_argument('endpoint', help=endpoint_help) parser.add_argument('es_index_name', help='elasticsearch index name (mandatory, used to select es index file') parser.add_argument('es_index_type', help='elasticsearch index type (mandatory es index parameter)') parser.add_argument('ok_msg', help='OK status display message') parser.add_argument('critical_msg', help='Critical status display message') parser.add_argument('critical_threshold', type=check_threshold, help=critical_threshold_help) parser.add_argument('range', type=check_range, help=range_help) parser.add_argument('user_id_regex', help='Regular expression to recognize user id pattern') parser.add_argument('@@search_timestamp', type=check_datetime, help='timestamp to use for search (optional, defaults to now)') parser.add_argument('@@search_timezone', type=check_timezone, help='timezone to use for search (optional, defaults to +/-00:00)') parser.add_argument('@@es_index_date', type=check_date, help='elasticsearch index type (mandatory, but =null to not use it! used to build index file name..dated - defaults to now date)') parser.add_argument('@@only_nonpattern_user_id', type=check_bool, help='show only cases where the user id does not match pattern (default=false)') parser.add_argument('@@usr') parser.add_argument('@@pwd') parser.add_argument('@@debug', action='store_true') def build_url_index_section(index_name, base_date, offset_array): """""" for this use-case -> always work with two index files: 1) index of the day (i.e. gte_time) and 2) index of prior day """""" text_array = [] for day_offset in offset_array: offset_date = base_date + timedelta(days=day_offset) date_text = index_name + '-' + offset_date.strftime('%Y.%m.%d') text_array.append(date_text) merged_text = "","".join(text_array) return merged_text def adjust_missing_index_date(args, ref_datetime): """""" if es index date is missing, use the search date (only date) as value """""" if not args.es_index_date: args.es_index_date = ref_datetime.date() def evaluate_results(response, args): """"""evaluate the results of the query against the threshold to determine the nagios service status"""""" if (not response or not hasattr(response, 'status_code') or response.status_code < 200 or response.status_code >= 400 or not response.json()): NagiosUtil.service_unknown('Unexpected results found. ' + response.text) elif (not response.json()['hits'] or int(response.json()['hits']['total']) < 0): NagiosUtil.service_unknown('Unexpected results found. ' + str(response.json())) if args.debug: print(response.json()) results = response.json() hits = results['hits']['total'] result_array = results['hits']['hits'] result_string = build_detailed_string_from_results(args, result_array) message = ('Found %s >= %s(threshold) occurrences' ' within the last %s minute(s). %s results: %s') if hits >= args.critical_threshold: NagiosUtil.service_critical(message % (str(hits), args.critical_threshold, args.range, args.critical_msg, result_string)) else: NagiosUtil.service_ok(args.ok_msg) def build_detailed_string_from_results(args, result_array): returned_string = """" for i in range(len(result_array)): jobj = result_array[i] jsource = jobj['_source'] the_time = jsource['@timestamp'] the_reason = jsource['log'] the_who = '' the_who2 = '' match_obj = re.match(r'.*\: from user\: (\S+)\: to user\: (\S+).*', the_reason, re.M|re.I) if match_obj: the_who = match_obj.group(1) if the_who and the_who.lower() == 'root': the_who = '' the_who2 = match_obj.group(2) if the_who2 and the_who2.lower() == 'root': the_who2 = '' if args.only_nonpattern_user_id: uid_regex = args.user_id_regex if (not re.match(uid_regex,the_who)) or (not re.match(uid_regex,the_who2)): returned_string += ( '( ' + the_time + ' ; ' + the_who + ' ; ' + the_who2 + ' ; ' + the_reason + ' ) ' ) else: returned_string += ( '( ' + the_time + ' ; ' + the_who + ' ; ' + the_who2 + ' ; ' + the_reason + ' ) ' ) return returned_string def main(): """"""Query elasticsearch using a combination of simple query pattern, field matches, and/or query clause, then evaluate the results against the alert threshold, and finally return a status to nagios."""""" desc = ('Elasticsearch query using a combination of simple query pattern,' ' field matches, and/or query clause. Evaluate the results' ' against the alert threshold, and return a status to' ' nagios.' ' ex. \""query_elasticsearch.py endpoint index index_type' ' ok_msg critical_msg critical_threshold' ' --query_file query_file_name' ' --simple_query simple_query' ' --simple_query_fields fields' ' --match f1:v1,f2:v2 --range 5 --debug\""') parser = argparse.ArgumentParser(prefix_chars='@', description=desc) setup_argparse(parser) args = parser.parse_args() # find search date, etheir noew or parameter timestamp lt_time = datetime.utcnow() if args.search_timestamp: lt_time = args.search_timestamp gte_time = lt_time - timedelta(minutes=(int(args.range))) # if es_index_date was not passed as parameter, then create it and use search_timestamp as value adjust_missing_index_date(args, lt_time) if not args.search_timezone: args.search_timezone = get_utc_timezone_str() data_json = { ""source"": { ""explain"": ""true"", ""_source"": [ ""log"", ""@timestamp""], ""query"": { ""bool"": { ""filter"": { ""range"": { ""@timestamp"" : { ""gte"": ""{{target_gte_time}}"", ""lt"": ""{{target_lt_time}}"", ""time_zone"": ""{{target_timezone}}"" } } }, ""must"": { ""match"": { ""{{target_field}}"" : { ""query"": ""{{target_value}}"", ""type"": ""phrase"" } } } } }, ""size"" : ""{{want_size}}"" } } params = {} params['target_lt_time'] = lt_time.strftime(""%Y-%m-%dT%H:%M:%S"") + '.0' params['target_gte_time'] = gte_time.strftime(""%Y-%m-%dT%H:%M:%S"") + '.0' params['target_timezone'] = args.search_timezone params['target_field'] = ""log"" params['target_value'] = "" nologin: allowed: from user:"" params['want_size'] = 25 data_json['params'] = params url = (args.endpoint + '/' + build_url_index_section(args.es_index_name, args.es_index_date, [0, -1] ) + '/' + args.es_index_type + '/' + '_search/template') if args.debug: print('index name: ' + args.es_index_name) print('index type: ' + args.es_index_type) print('index date: ' + args.es_index_date.strftime(""%Y-%m-%d"")) print('lt_time: ' + lt_time.strftime(""%Y-%m-%dT%H:%M:%S"") ) print('gte_time: ' + gte_time.strftime(""%Y-%m-%dT%H:%M:%S"") ) print('search_timezone: ' + args.search_timezone) print('range: ' + str(args.range)) print('critial_threshold: ' + str(args.critical_threshold)) print('query url: ' + url) print('query data_json:') print(data_json) try: if args.usr and args.pwd: response = requests.post(url, data=json.dumps(data_json), headers={""Content-Type"": ""application/json""}, auth=(args.usr, args.pwd)) else: response = requests.post(url, data=json.dumps(data_json), headers={""Content-Type"": ""application/json""}) except requests.exceptions.RequestException as req_ex: NagiosUtil.service_unknown('Unexpected Error Occurred. ' + str(req_ex)) evaluate_results(response, args) if __name__ == '__main__': sys.exit(main()) ",,329,0
openstack%2Fopenstack-helm~master~Ic79f6593c6f6231aa9e9c217b1d60af2f2536728,openstack/openstack-helm,master,Ic79f6593c6f6231aa9e9c217b1d60af2f2536728,Create a experimental job for resource limits,ABANDONED,2019-08-26 14:32:05.000000000,2020-07-21 01:32:18.000000000,,"[{'_account_id': 12281}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-26 14:32:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/0cf081174d08f5ed4724112a189ab36eac5442be', 'message': 'Create a experimental job for resource limits\n\nWe are not testing the resource limits anywhere, so we dont know if\nthey are correct or need tweaking.\n\nThis patch creates a job that runs with all resources enabled\nso hopefully we will see if the current resources are ok or we\nneed to change them\n\nChange-Id: Ic79f6593c6f6231aa9e9c217b1d60af2f2536728\n'}, {'number': 2, 'created': '2019-08-27 08:20:21.000000000', 'files': ['keystone/values_overrides/limits.yaml', 'nova/values_overrides/limits.yaml', 'horizon/values_overrides/limits.yaml', 'glance/values_overrides/limits.yaml', 'heat/values_overrides/limits.yaml', 'zuul.d/project.yaml', 'zuul.d/jobs-openstack-helm.yaml', 'barbican/values_overrides/limits.yaml', 'neutron/values_overrides/limits.yaml', 'cinder/values_overrides/limits.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/3b1cfc51e69900c59a3d271bd15884673459b55f', 'message': 'Create a experimental job for resource limits\n\nWe are not testing the resource limits anywhere, so we dont know if\nthey are correct or need tweaking.\n\nThis patch creates a job that runs with all resources enabled\nso hopefully we will see if the current resources are ok or we\nneed to change them\n\nChange-Id: Ic79f6593c6f6231aa9e9c217b1d60af2f2536728\n'}]",0,678578,3b1cfc51e69900c59a3d271bd15884673459b55f,14,2,2,12281,,,0,"Create a experimental job for resource limits

We are not testing the resource limits anywhere, so we dont know if
they are correct or need tweaking.

This patch creates a job that runs with all resources enabled
so hopefully we will see if the current resources are ok or we
need to change them

Change-Id: Ic79f6593c6f6231aa9e9c217b1d60af2f2536728
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/78/678578/2 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/values_overrides/limits.yaml', 'nova/values_overrides/limits.yaml', 'horizon/values_overrides/limits.yaml', 'glance/values_overrides/limits.yaml', 'heat/values_overrides/limits.yaml', 'zuul.d/project.yaml', 'zuul.d/jobs-openstack-helm.yaml', 'barbican/values_overrides/limits.yaml', 'neutron/values_overrides/limits.yaml', 'cinder/values_overrides/limits.yaml']",10,0cf081174d08f5ed4724112a189ab36eac5442be,enable_resource_limits_job,pod: resources: enabled: true,,55,0
openstack%2Fopenstack-helm~master~Iea3ae31f0f9f6f5f996c42d357bda144a910e29c,openstack/openstack-helm,master,Iea3ae31f0f9f6f5f996c42d357bda144a910e29c,[DNM] Testing gates,ABANDONED,2019-08-26 15:42:50.000000000,2020-07-21 01:32:13.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2019-08-26 15:42:50.000000000', 'files': ['neutron/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/84d2a22a7f5aa8a6e60f43af63327123c2c989d4', 'message': '[DNM] Testing gates\n\nChange-Id: Iea3ae31f0f9f6f5f996c42d357bda144a910e29c\nSigned-off-by: Manuel Buil <mbuil@suse.com>\n'}]",0,678600,84d2a22a7f5aa8a6e60f43af63327123c2c989d4,3,1,1,21883,,,0,"[DNM] Testing gates

Change-Id: Iea3ae31f0f9f6f5f996c42d357bda144a910e29c
Signed-off-by: Manuel Buil <mbuil@suse.com>
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/00/678600/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/values.yaml'],1,84d2a22a7f5aa8a6e60f43af63327123c2c989d4,,,,1,0
openstack%2Fopenstack-helm-infra~master~Ib4a9ecaf94bd6923cb0a9bd17840c266609c12d3,openstack/openstack-helm-infra,master,Ib4a9ecaf94bd6923cb0a9bd17840c266609c12d3,[RabbitMQ] Add ability to configure more options in definitions.json,ABANDONED,2019-08-14 09:37:54.000000000,2020-07-21 01:32:00.000000000,,"[{'_account_id': 7769}, {'_account_id': 8898}, {'_account_id': 12281}, {'_account_id': 14525}, {'_account_id': 17591}, {'_account_id': 20466}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 29954}]","[{'number': 1, 'created': '2019-08-14 09:37:54.000000000', 'files': ['rabbitmq/templates/bin/_rabbitmq-password-hash.py.tpl', 'rabbitmq/values.yaml', 'rabbitmq/templates/statefulset.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/59a395a709964003bf372f5cd32f1eef58c90c03', 'message': '[RabbitMQ] Add ability to configure more options in definitions.json\n\nNow it is possible to configure policies, queues, exchanges, bindings\nthrough Values.conf.aux_conf.\n\nChange-Id: Ib4a9ecaf94bd6923cb0a9bd17840c266609c12d3\n'}]",0,676380,59a395a709964003bf372f5cd32f1eef58c90c03,5,10,1,18795,,,0,"[RabbitMQ] Add ability to configure more options in definitions.json

Now it is possible to configure policies, queues, exchanges, bindings
through Values.conf.aux_conf.

Change-Id: Ib4a9ecaf94bd6923cb0a9bd17840c266609c12d3
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/80/676380/1 && git format-patch -1 --stdout FETCH_HEAD,"['rabbitmq/templates/bin/_rabbitmq-password-hash.py.tpl', 'rabbitmq/values.yaml', 'rabbitmq/templates/statefulset.yaml']",3,59a395a709964003bf372f5cd32f1eef58c90c03,upstream_rabbit_aux_conf,"{{- if hasKey .Values.conf ""aux_conf"" }} - name: RABBITMQ_AUXILIARY_CONFIGURATION value: {{ toJson $envAll.Values.conf.aux_conf | quote }} {{- end }}",,36,0
openstack%2Fopenstack-helm-infra~master~Id1ba212611dc5e673d14fe3e92424451e93bbeaf,openstack/openstack-helm-infra,master,Id1ba212611dc5e673d14fe3e92424451e93bbeaf,Run ingress-error-pages and ingress pods with non-root users,ABANDONED,2019-04-24 22:11:06.000000000,2020-07-21 01:31:57.000000000,,"[{'_account_id': 7769}, {'_account_id': 8749}, {'_account_id': 8898}, {'_account_id': 17591}, {'_account_id': 17896}, {'_account_id': 20466}, {'_account_id': 22259}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 24816}, {'_account_id': 29161}]","[{'number': 1, 'created': '2019-04-24 22:11:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d1715c119fdddb2e4a3575b69e04fa7b36aed497', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted.\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 2, 'created': '2019-04-24 22:19:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/137b9f4537d62032fbbea78ea5868bebcc9cb586', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted.\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 3, 'created': '2019-04-26 21:23:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/cbce3df6968a6de5bd2bb16bea4d3c2232bc7a49', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted.\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 4, 'created': '2019-04-29 15:35:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/078224392c376bd5a4c0db8fbd6fc65a25d883e0', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted.\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 5, 'created': '2019-05-03 20:27:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/beaefcbc24076de8c5eeaf40b31530190e94c09d', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted.\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 6, 'created': '2019-05-06 15:01:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/409c6f96b8dda4a2d5f9a33c18b3fb5fd1070ce6', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 7, 'created': '2019-05-06 20:31:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0fa86eba4de4b8d1e21d2dbab3fa285b2504ed24', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 8, 'created': '2019-05-06 21:27:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6cb18cfa0df95b25bb63cfe845901e0fed25366b', 'message': ""Run ingress-error-pages container with the nobody user\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted.\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}, {'number': 9, 'created': '2019-05-09 22:59:02.000000000', 'files': ['ingress/templates/deployment-error.yaml', 'ingress/templates/bin/_ingress-error-pages.sh.tpl', 'ingress/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6d813d612087193eeaeba43d198db2a815d34565', 'message': ""Run ingress-error-pages and ingress pods with non-root users\n\nThis change enables the ingress-error-pages container to run with\nthe nobody user instead of the root user. For this to be possible,\nthe 'server' file ownership is changed to nobody:nobody, otherwise\na permission denied error arises.\n\nA ingress-error-pages-perms init container is used to change the\nownership of the 'server' file and additionally the 'server' file\nis copied into the mounted /tmp volume so that the file ownership\nchange is persisted.\n\nThe ingress and ingress-vip containers are setup to run with the\nwww-data (33) user\n\nChange-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf\n""}]",3,655578,6d813d612087193eeaeba43d198db2a815d34565,27,12,9,17896,,,0,"Run ingress-error-pages and ingress pods with non-root users

This change enables the ingress-error-pages container to run with
the nobody user instead of the root user. For this to be possible,
the 'server' file ownership is changed to nobody:nobody, otherwise
a permission denied error arises.

A ingress-error-pages-perms init container is used to change the
ownership of the 'server' file and additionally the 'server' file
is copied into the mounted /tmp volume so that the file ownership
change is persisted.

The ingress and ingress-vip containers are setup to run with the
www-data (33) user

Change-Id: Id1ba212611dc5e673d14fe3e92424451e93bbeaf
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/78/655578/2 && git format-patch -1 --stdout FETCH_HEAD,"['ingress/templates/deployment-error.yaml', 'ingress/templates/bin/_ingress-error-pages.sh.tpl']",2,d1715c119fdddb2e4a3575b69e04fa7b36aed497,ingress-error-pages_refactored, exec /tmp/server, exec /server,15,1
openstack%2Fopenstack-helm-images~master~Ia207e7397be1afe83dbc658b845fb3354879d54d,openstack/openstack-helm-images,master,Ia207e7397be1afe83dbc658b845fb3354879d54d,minimirror image build fix to avoid using cached layers,ABANDONED,2019-08-06 09:15:58.000000000,2020-07-21 01:31:45.000000000,,"[{'_account_id': 22348}, {'_account_id': 28618}]","[{'number': 1, 'created': '2019-08-06 09:15:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/6b61fb1a8904fc0b07727c65c956fdbf3534adf0', 'message': 'minimirror image build fix to avoid using cached layers\n\nThis ps fixes to build clean image of minimirror without using cached layers\n\nChange-Id: Ia207e7397be1afe83dbc658b845fb3354879d54d\n'}, {'number': 2, 'created': '2019-08-06 09:16:27.000000000', 'files': ['mini-mirror/build.sh'], 'web_link': 'https://opendev.org/openstack/openstack-helm-images/commit/4ec2797ca82e96fa0d2e4557a93f0f3d7526f1d3', 'message': 'minimirror image build fix to avoid using cached layers\n\nThis ps fixes to build clean image of minimirror\nwithout using cached layers\n\nChange-Id: Ia207e7397be1afe83dbc658b845fb3354879d54d\n'}]",0,674763,4ec2797ca82e96fa0d2e4557a93f0f3d7526f1d3,5,2,2,28518,,,0,"minimirror image build fix to avoid using cached layers

This ps fixes to build clean image of minimirror
without using cached layers

Change-Id: Ia207e7397be1afe83dbc658b845fb3354879d54d
",git fetch https://review.opendev.org/openstack/openstack-helm-images refs/changes/63/674763/1 && git format-patch -1 --stdout FETCH_HEAD,['mini-mirror/build.sh'],1,6b61fb1a8904fc0b07727c65c956fdbf3534adf0,,"docker build --force-rm --no-cache -f ""${IMAGE}""/Dockerfile.""${DISTRO}"" --network=host \","docker build -f ""${IMAGE}""/Dockerfile.""${DISTRO}"" --network=host \",1,1
openstack%2Fosprofiler~master~Ib1870a3d102116f84c7677601fd44fdac41a13a6,openstack/osprofiler,master,Ib1870a3d102116f84c7677601fd44fdac41a13a6,switch to importlib.metadata to find package version,MERGED,2020-07-05 23:35:52.000000000,2020-07-21 00:41:54.000000000,2020-07-21 00:34:30.000000000,"[{'_account_id': 5950}, {'_account_id': 6928}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-05 23:35:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/2e687ad78fce134e95e3856ac90365b5eb61fb11', 'message': 'switch to importlib.metadata to find package version\n\nImporting pkg_resources has a side-effect of reading all of the\nmetadata for every installed python package. The newer\nimportlib.metadata module can load the metadata for one package at a\ntime, which makes this library load more quickly and improves the\nstartup-time performance of applications that use it such as\npython-openstackclient.\n\nimportlib.metadata is part of the python 3.8 standard library and is\ndistributed separately for other versions of python.\n\nChange-Id: Ib1870a3d102116f84c7677601fd44fdac41a13a6\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\n'}, {'number': 2, 'created': '2020-07-06 09:07:19.000000000', 'files': ['requirements.txt', 'osprofiler/__init__.py', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/osprofiler/commit/e8dd381e626d48f11c6b8c9e296433b23e88124b', 'message': 'switch to importlib.metadata to find package version\n\nImporting pkg_resources has a side-effect of reading all of the\nmetadata for every installed python package. The newer\nimportlib.metadata module can load the metadata for one package at a\ntime, which makes this library load more quickly and improves the\nstartup-time performance of applications that use it such as\npython-openstackclient.\n\nimportlib.metadata is part of the python 3.8 standard library and is\ndistributed separately for other versions of python.\n\nChange-Id: Ib1870a3d102116f84c7677601fd44fdac41a13a6\nSigned-off-by: Doug Hellmann <doug@doughellmann.com>\n'}]",1,739379,e8dd381e626d48f11c6b8c9e296433b23e88124b,14,4,2,2472,,,0,"switch to importlib.metadata to find package version

Importing pkg_resources has a side-effect of reading all of the
metadata for every installed python package. The newer
importlib.metadata module can load the metadata for one package at a
time, which makes this library load more quickly and improves the
startup-time performance of applications that use it such as
python-openstackclient.

importlib.metadata is part of the python 3.8 standard library and is
distributed separately for other versions of python.

Change-Id: Ib1870a3d102116f84c7677601fd44fdac41a13a6
Signed-off-by: Doug Hellmann <doug@doughellmann.com>
",git fetch https://review.opendev.org/openstack/osprofiler refs/changes/79/739379/2 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'osprofiler/__init__.py', 'lower-constraints.txt']",3,2e687ad78fce134e95e3856ac90365b5eb61fb11,osc-performance,importlib_metadata==1.7.0,,9,2
openstack%2Fpuppet-openstacklib~master~Ia2cc46ae5a0e89de147f3fb18c585e573444a842,openstack/puppet-openstacklib,master,Ia2cc46ae5a0e89de147f3fb18c585e573444a842,Add support for python-osc-placmenet package,ABANDONED,2020-04-09 14:10:12.000000000,2020-07-21 00:40:59.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-04-09 14:10:12.000000000', 'files': ['spec/classes/openstacklib_openstackclient_placement_spec.rb', 'manifests/openstackclient/placement.pp', 'manifests/params.pp', 'releasenotes/notes/openstackclient-placement-d0c88066cc3f44c8.yaml'], 'web_link': 'https://opendev.org/openstack/puppet-openstacklib/commit/b2c1e222ee160a788f293c579b0d450e5ac3321c', 'message': 'Add support for python-osc-placmenet package\n\nThis patch introduces the new class to manage openstack client plugin\nfor placmenet service.\n\nChange-Id: Ia2cc46ae5a0e89de147f3fb18c585e573444a842\n'}]",0,718709,b2c1e222ee160a788f293c579b0d450e5ac3321c,3,1,1,9816,,,0,"Add support for python-osc-placmenet package

This patch introduces the new class to manage openstack client plugin
for placmenet service.

Change-Id: Ia2cc46ae5a0e89de147f3fb18c585e573444a842
",git fetch https://review.opendev.org/openstack/puppet-openstacklib refs/changes/09/718709/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/openstacklib_openstackclient_placement_spec.rb', 'manifests/openstackclient/placement.pp', 'manifests/params.pp', 'releasenotes/notes/openstackclient-placement-d0c88066cc3f44c8.yaml']",4,b2c1e222ee160a788f293c579b0d450e5ac3321c,ocs-placement,--- features: - | The new openstacklib::openstackclient::placement class is added to manage openstack client plugin for placment service. ,,93,1
openstack%2Fmanila~master~Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,openstack/manila,master,Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f,Update NFS helper restart,MERGED,2020-07-10 14:13:39.000000000,2020-07-21 00:34:28.000000000,2020-07-21 00:31:15.000000000,"[{'_account_id': 9003}, {'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 16643}, {'_account_id': 21884}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-10 14:13:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/d532b72db5d0fc5b1fd2696b1976e787dd5f7980', 'message': 'Update NFS helper restart\n\n``service`` commands are deprecated and really turn into\n``systemctl` commands that have different output than\nwhat is checked.\n\nupdate to proper systemctl commands and check output correctly.\n\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n'}, {'number': 2, 'created': '2020-07-11 13:04:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/a791e4b3c4100186d3ca3a7b6ff3b79c7096fec0', 'message': 'Update NFS helper restart\n\n``service`` commands are deprecated and really turn into\n``systemctl` commands that have different output than\nwhat is checked.\n\nupdate to proper systemctl commands and check output correctly.\n\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n'}, {'number': 3, 'created': '2020-07-13 18:02:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/36ed940157229aba47dab426588554b4d9455511', 'message': 'Update NFS helper restart\n\nBecause ``service`` commands are deprecated in favor of\n``systemctl` commands, the check to see if the service\ncommand succeeds in the NFS helper used by e.g. the\nlvm and generic back ends fails.  The string sought to\nindicate an error is never present.\n\nUpdate the helper to use ``systemctl`` commands instead\nand error check for them correctly.\n\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n'}, {'number': 4, 'created': '2020-07-15 17:04:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/1e49fe32b0a4128fdc35ca309c0ce8fcef800f4c', 'message': 'Update NFS helper restart\n\nBecause ``service`` commands are deprecated in favor of\n``systemctl` commands, the check to see if the service\ncommand succeeds in the NFS helper used by e.g. the\nlvm and generic back ends fails.  The string sought to\nindicate an error is never present.\n\nUpdate the helper to use ``systemctl`` commands instead\nand error check for them correctly.\n\nCloses-bug: #1887695\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n'}, {'number': 5, 'created': '2020-07-20 17:45:39.000000000', 'files': ['manila/share/drivers/helpers.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/391ec7dffa701f54843b3aafdc6d2f8b4dfe0504', 'message': 'Update NFS helper restart\n\nBecause ``service`` commands are deprecated in favor of\n``systemctl` commands, the check to see if the service\ncommand succeeds in the NFS helper used by e.g. the\nlvm and generic back ends fails.  The string sought to\nindicate an error is never present.\n\nUpdate the helper to use ``systemctl`` commands instead\nand error check for them correctly.\n\nCloses-bug: #1887695\nChange-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f\n'}]",0,740477,391ec7dffa701f54843b3aafdc6d2f8b4dfe0504,43,10,5,9003,,,0,"Update NFS helper restart

Because ``service`` commands are deprecated in favor of
``systemctl` commands, the check to see if the service
command succeeds in the NFS helper used by e.g. the
lvm and generic back ends fails.  The string sought to
indicate an error is never present.

Update the helper to use ``systemctl`` commands instead
and error check for them correctly.

Closes-bug: #1887695
Change-Id: Ibb1c15f997fa60e1ba5bfb7437502d8aa454d35f
",git fetch https://review.opendev.org/openstack/manila refs/changes/77/740477/5 && git format-patch -1 --stdout FETCH_HEAD,['manila/share/drivers/helpers.py'],1,d532b72db5d0fc5b1fd2696b1976e787dd5f7980,bug/1887695," server, ['sudo', 'systemctl', 'is-active', 'nfs-kernel-server', 'status'], if ""inactive"" in out: server, ['sudo', 'systemctl', 'restart', 'nfs-kernel-server'])"," server, ['sudo', 'service', 'nfs-kernel-server', 'status'], if ""not"" in out: server, ['sudo', 'service', 'nfs-kernel-server', 'restart'])",4,3
openstack%2Fpython-neutronclient~master~Ic8b68f900c2d42a3f5e1508ddde2821cb12b696e,openstack/python-neutronclient,master,Ic8b68f900c2d42a3f5e1508ddde2821cb12b696e,"lower-constraints: Drop os-testr, mox3",MERGED,2020-07-09 10:42:01.000000000,2020-07-21 00:26:40.000000000,2020-07-21 00:23:40.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-09 10:42:01.000000000', 'files': ['lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/python-neutronclient/commit/ada4229691fb0f6d1b41d2f49633e4f9f5b9ea0b', 'message': ""lower-constraints: Drop os-testr, mox3\n\nThey're no longer used.\n\nChange-Id: Ic8b68f900c2d42a3f5e1508ddde2821cb12b696e\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",0,740239,ada4229691fb0f6d1b41d2f49633e4f9f5b9ea0b,9,4,1,15334,,,0,"lower-constraints: Drop os-testr, mox3

They're no longer used.

Change-Id: Ic8b68f900c2d42a3f5e1508ddde2821cb12b696e
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/python-neutronclient refs/changes/39/740239/1 && git format-patch -1 --stdout FETCH_HEAD,['lower-constraints.txt'],1,ada4229691fb0f6d1b41d2f49633e4f9f5b9ea0b,drop-os-testr,,mox3==0.20.0os-testr==1.0.0,0,2
openstack%2Fpython-neutronclient~master~I29a0c87214c3c60084d0541f8b9a7abc72ff987f,openstack/python-neutronclient,master,I29a0c87214c3c60084d0541f8b9a7abc72ff987f,Fix description of bgp speaker set arg,MERGED,2020-07-12 21:16:15.000000000,2020-07-21 00:25:19.000000000,2020-07-21 00:23:39.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 22348}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-07-12 21:16:15.000000000', 'files': ['neutronclient/osc/v2/dynamic_routing/bgp_speaker.py'], 'web_link': 'https://opendev.org/openstack/python-neutronclient/commit/d1e5afb3510ef0196b40f8ac632987f44e6c4956', 'message': 'Fix description of bgp speaker set arg\n\nThe name argument for bgp speaker set defines the new name for the speaker,\nmake the description more clear about this.\n\nChange-Id: I29a0c87214c3c60084d0541f8b9a7abc72ff987f\n'}]",0,740599,d1e5afb3510ef0196b40f8ac632987f44e6c4956,9,4,1,13252,,,0,"Fix description of bgp speaker set arg

The name argument for bgp speaker set defines the new name for the speaker,
make the description more clear about this.

Change-Id: I29a0c87214c3c60084d0541f8b9a7abc72ff987f
",git fetch https://review.opendev.org/openstack/python-neutronclient refs/changes/99/740599/1 && git format-patch -1 --stdout FETCH_HEAD,['neutronclient/osc/v2/dynamic_routing/bgp_speaker.py'],1,d1e5afb3510ef0196b40f8ac632987f44e6c4956,fix-docs," help=_(""New name for the BGP speaker""))"," help=_(""Name of the BGP speaker to update""))",1,1
openstack%2Fcinder~master~Ibe1796e1380add34b6d8f19606bb55fda13c3c08,openstack/cinder,master,Ibe1796e1380add34b6d8f19606bb55fda13c3c08,zuul: collect cinderlib logs from tempest node(s) only,MERGED,2020-07-16 12:42:50.000000000,2020-07-21 00:24:08.000000000,2020-07-16 18:38:39.000000000,"[{'_account_id': 1736}, {'_account_id': 9008}, {'_account_id': 11904}, {'_account_id': 12016}, {'_account_id': 12032}, {'_account_id': 12033}, {'_account_id': 12369}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 15941}, {'_account_id': 19933}, {'_account_id': 22126}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 25678}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 28801}, {'_account_id': 29705}]","[{'number': 1, 'created': '2020-07-16 12:42:50.000000000', 'files': ['playbooks/post-cinderlib.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/9487f0f4087cecd08ae5beaf354a11ae0f8b609c', 'message': 'zuul: collect cinderlib logs from tempest node(s) only\n\nThe functional tests are executed from the tempest node(s), which means\nthat the collection must happen from the same place, not all nodes;\notherwise the playbook code fails on pure compute nodes.\n\nChange-Id: Ibe1796e1380add34b6d8f19606bb55fda13c3c08\n'}]",0,741441,9487f0f4087cecd08ae5beaf354a11ae0f8b609c,27,22,1,10459,,,0,"zuul: collect cinderlib logs from tempest node(s) only

The functional tests are executed from the tempest node(s), which means
that the collection must happen from the same place, not all nodes;
otherwise the playbook code fails on pure compute nodes.

Change-Id: Ibe1796e1380add34b6d8f19606bb55fda13c3c08
",git fetch https://review.opendev.org/openstack/cinder refs/changes/41/741441/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/post-cinderlib.yaml'],1,9487f0f4087cecd08ae5beaf354a11ae0f8b609c,fix-post-cinderlib-collect,- hosts: tempest,- hosts: all,1,1
openstack%2Fmanila~stable%2Ftrain~If5fe32c155fe0861b3ed86b862335e062796056b,openstack/manila,stable/train,If5fe32c155fe0861b3ed86b862335e062796056b,Enforce policy checks getting share-type by name,MERGED,2020-07-16 15:51:06.000000000,2020-07-20 23:42:26.000000000,2020-07-20 23:32:42.000000000,"[{'_account_id': 9003}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-16 15:51:06.000000000', 'files': ['manila/db/sqlalchemy/api.py', 'manila/api/v1/shares.py', 'releasenotes/notes/bug-1885956-enforce-policy-check-getting-share-type-by-name-5eca17b02bea5261.yaml'], 'web_link': 'https://opendev.org/openstack/manila/commit/2f2ed258f7c273543495b5476af2c3558d51384d', 'message': ""Enforce policy checks getting share-type by name\n\nPolicy checks are skipped when looking up a share-type\nby name.  This causes share creation attempts that specify\na valid share-type to pass the early API check on share type\neven if the share type named is private and not shared with\nthe user's project.  The share creation fails later, but after\nthe database record for the share is created.  Although the\noperation fails with an ERROR, the share is stuck in CREATING\nstate.\n\nFix this issue by checking the user's project in the database\nAPI just as we do for share type lookups by uuid.\n\nCloses-bug: #1885956\nChange-Id: If5fe32c155fe0861b3ed86b862335e062796056b\n(cherry picked from commit f877deed5186cff3a7ecfbce2536e72fc6013895)\n(cherry picked from commit e02cc6d6bc92e354bc7f4220a05ec6fedf2ecc9c)\n""}]",0,741487,2f2ed258f7c273543495b5476af2c3558d51384d,10,4,1,16643,,,0,"Enforce policy checks getting share-type by name

Policy checks are skipped when looking up a share-type
by name.  This causes share creation attempts that specify
a valid share-type to pass the early API check on share type
even if the share type named is private and not shared with
the user's project.  The share creation fails later, but after
the database record for the share is created.  Although the
operation fails with an ERROR, the share is stuck in CREATING
state.

Fix this issue by checking the user's project in the database
API just as we do for share type lookups by uuid.

Closes-bug: #1885956
Change-Id: If5fe32c155fe0861b3ed86b862335e062796056b
(cherry picked from commit f877deed5186cff3a7ecfbce2536e72fc6013895)
(cherry picked from commit e02cc6d6bc92e354bc7f4220a05ec6fedf2ecc9c)
",git fetch https://review.opendev.org/openstack/manila refs/changes/87/741487/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/db/sqlalchemy/api.py', 'manila/api/v1/shares.py', 'releasenotes/notes/bug-1885956-enforce-policy-check-getting-share-type-by-name-5eca17b02bea5261.yaml']",3,2f2ed258f7c273543495b5476af2c3558d51384d,,--- fixes: - | Fixed `launchpad bug #1885956 <https://bugs.launchpad.net/manila/+bug/1885956>`_ by ensuring that policy checks are enforced when looking up a share-type by name. This prevents a problem where shares could be stuck in CREATING status when a user attempts to create a share using the name of a private share-type to which the user lacks access. ,,11,3
openstack%2Fironic~master~Ia7209934d30f6a55879319ab6ca94d8bf8886073,openstack/ironic,master,Ia7209934d30f6a55879319ab6ca94d8bf8886073,Set min version of tox to 3.2.1,MERGED,2020-07-15 13:25:41.000000000,2020-07-20 23:33:40.000000000,2020-07-20 23:03:16.000000000,"[{'_account_id': 4571}, {'_account_id': 11655}, {'_account_id': 15519}, {'_account_id': 19339}, {'_account_id': 22348}, {'_account_id': 30100}]","[{'number': 1, 'created': '2020-07-15 13:25:41.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/ironic/commit/d430d1bdb976599eae74c93e3cb82dd96067374d', 'message': 'Set min version of tox to 3.2.1\n\nAs recommended, since version 3.2.0 tox switches pip invocations\nto use the module -m pip instead of direct invocation.\nWe set min version to 3.2.1 [1] to also fix the behavior of\n--parallel--safe-build\n\n[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10\n\nChange-Id: Ia7209934d30f6a55879319ab6ca94d8bf8886073\n'}]",0,741185,d430d1bdb976599eae74c93e3cb82dd96067374d,12,6,1,23851,,,0,"Set min version of tox to 3.2.1

As recommended, since version 3.2.0 tox switches pip invocations
to use the module -m pip instead of direct invocation.
We set min version to 3.2.1 [1] to also fix the behavior of
--parallel--safe-build

[1] https://tox.readthedocs.io/en/latest/changelog.html#v3-2-1-2018-08-10

Change-Id: Ia7209934d30f6a55879319ab6ca94d8bf8886073
",git fetch https://review.opendev.org/openstack/ironic refs/changes/85/741185/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,d430d1bdb976599eae74c93e3cb82dd96067374d,tox-m-pip,minversion = 3.2.1,minversion = 3.1.0,1,1
openstack%2Fneutron~stable%2Fqueens~Ief52fac479d4b3cfa5f90118235c241a14b1011f,openstack/neutron,stable/queens,Ief52fac479d4b3cfa5f90118235c241a14b1011f,[stable only] Configure logging in keepalived_state_change,MERGED,2020-07-17 09:33:00.000000000,2020-07-20 23:24:23.000000000,2020-07-20 23:24:23.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 9732}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-17 09:33:00.000000000', 'files': ['neutron/agent/l3/keepalived_state_change.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/fb0b2a8070fddac972ab6af9ef7aa0822d21c0d9', 'message': '[stable only] Configure logging in keepalived_state_change\n\nIn versions prior to Train, the ""keepalived-state-change"" monitor\ndoes not format correctly the log messages. That happens when the\n""Daemon.run()"" method executes ""unwatch_log"". After the privileges\nare dropped, the logging should be configured again.\n\nChange-Id: Ief52fac479d4b3cfa5f90118235c241a14b1011f\nCloses-Bug: #1886216\n(cherry picked from commit 6fd89dacf3b1a14e8f4b49ee719edc23981536d5)\n(cherry picked from commit 3b6005fec9c464b76127cbac38b7b68454ea10aa)\n'}]",0,741605,fb0b2a8070fddac972ab6af9ef7aa0822d21c0d9,9,5,1,16688,,,0,"[stable only] Configure logging in keepalived_state_change

In versions prior to Train, the ""keepalived-state-change"" monitor
does not format correctly the log messages. That happens when the
""Daemon.run()"" method executes ""unwatch_log"". After the privileges
are dropped, the logging should be configured again.

Change-Id: Ief52fac479d4b3cfa5f90118235c241a14b1011f
Closes-Bug: #1886216
(cherry picked from commit 6fd89dacf3b1a14e8f4b49ee719edc23981536d5)
(cherry picked from commit 3b6005fec9c464b76127cbac38b7b68454ea10aa)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/05/741605/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/agent/l3/keepalived_state_change.py'],1,fb0b2a8070fddac972ab6af9ef7aa0822d21c0d9,bug/1886216, config.setup_logging(), config.setup_logging(),1,1
openstack%2Fneutron~stable%2Frocky~Ief52fac479d4b3cfa5f90118235c241a14b1011f,openstack/neutron,stable/rocky,Ief52fac479d4b3cfa5f90118235c241a14b1011f,[stable only] Configure logging in keepalived_state_change,MERGED,2020-07-17 09:32:11.000000000,2020-07-20 23:20:11.000000000,2020-07-20 23:20:10.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-17 09:32:11.000000000', 'files': ['neutron/agent/l3/keepalived_state_change.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/3b6005fec9c464b76127cbac38b7b68454ea10aa', 'message': '[stable only] Configure logging in keepalived_state_change\n\nIn versions prior to Train, the ""keepalived-state-change"" monitor\ndoes not format correctly the log messages. That happens when the\n""Daemon.run()"" method executes ""unwatch_log"". After the privileges\nare dropped, the logging should be configured again.\n\nChange-Id: Ief52fac479d4b3cfa5f90118235c241a14b1011f\nCloses-Bug: #1886216\n(cherry picked from commit 6fd89dacf3b1a14e8f4b49ee719edc23981536d5)\n'}]",0,741604,3b6005fec9c464b76127cbac38b7b68454ea10aa,8,4,1,16688,,,0,"[stable only] Configure logging in keepalived_state_change

In versions prior to Train, the ""keepalived-state-change"" monitor
does not format correctly the log messages. That happens when the
""Daemon.run()"" method executes ""unwatch_log"". After the privileges
are dropped, the logging should be configured again.

Change-Id: Ief52fac479d4b3cfa5f90118235c241a14b1011f
Closes-Bug: #1886216
(cherry picked from commit 6fd89dacf3b1a14e8f4b49ee719edc23981536d5)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/04/741604/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/agent/l3/keepalived_state_change.py'],1,3b6005fec9c464b76127cbac38b7b68454ea10aa,bug/1886216, config.setup_logging(), config.setup_logging(),1,1
openstack%2Fheat~master~Ida9384c849cd664c5fc5d31449350d7cb6a68b78,openstack/heat,master,Ida9384c849cd664c5fc5d31449350d7cb6a68b78,Rename variables in sort key validation,MERGED,2020-07-14 16:40:53.000000000,2020-07-20 22:55:59.000000000,2020-07-20 22:54:06.000000000,"[{'_account_id': 4257}, {'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-14 16:40:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/c4606abbec3f7641769bb7750975ffe1e7459959', 'message': 'Rename variables in sort key validation\n\nAvoid unnecessarily divisive terms.\n\nChange-Id: Ida9384c849cd664c5fc5d31449350d7cb6a68b78\n'}, {'number': 2, 'created': '2020-07-14 18:54:23.000000000', 'files': ['heat/tests/db/test_sqlalchemy_api.py', 'heat/db/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/2c28e6b9786307585228d6eabfe14a890a175aea', 'message': 'Rename variables in sort key validation\n\nAvoid unnecessarily divisive terms.\n\nChange-Id: Ida9384c849cd664c5fc5d31449350d7cb6a68b78\n'}]",0,741003,2c28e6b9786307585228d6eabfe14a890a175aea,15,3,2,4257,,,0,"Rename variables in sort key validation

Avoid unnecessarily divisive terms.

Change-Id: Ida9384c849cd664c5fc5d31449350d7cb6a68b78
",git fetch https://review.opendev.org/openstack/heat refs/changes/03/741003/2 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/db/test_sqlalchemy_api.py', 'heat/db/sqlalchemy/api.py']",2,c4606abbec3f7641769bb7750975ffe1e7459959,," """"""Returns an array containing only allowed keys valid_sort_keys = _get_sort_keys(sort_keys, sort_key_map) valid_sort_keys, marker, sort_dir) valid_sort_keys = _get_sort_keys(sort_keys, sort_key_map) valid_sort_keys, marker, sort_dir)"," """"""Returns an array containing only whitelisted keys whitelisted_sort_keys = _get_sort_keys(sort_keys, sort_key_map) whitelisted_sort_keys, marker, sort_dir) whitelisted_sort_keys = _get_sort_keys(sort_keys, sort_key_map) whitelisted_sort_keys, marker, sort_dir)",10,10
openstack%2Fmanila-ui~stable%2Fussuri~Ibf35d7196d83e1018881776110ce173e68cf8286,openstack/manila-ui,stable/ussuri,Ibf35d7196d83e1018881776110ce173e68cf8286,Drop legacy dsvm job & change zuulv3 integration job,MERGED,2020-07-17 19:03:22.000000000,2020-07-20 22:41:31.000000000,2020-07-20 22:38:52.000000000,"[{'_account_id': 6413}, {'_account_id': 9003}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-17 19:03:22.000000000', 'files': ['playbooks/legacy/manila-ui-dsvm/run.yaml', '.zuul.yaml', 'playbooks/legacy/manila-ui-dsvm/post.yaml'], 'web_link': 'https://opendev.org/openstack/manila-ui/commit/c29dd15b4d0ed04968001919c3c25536d6d7c9f7', 'message': 'Drop legacy dsvm job & change zuulv3 integration job\n\nThe legacy job in this repository was just\nsetting up devstack with manila-ui enabled\nand doing nothing else.\n\nWe added an integration gate job a couple of\nreleases ago that does exactly what the above\njob does, and goes a step beyond by executing\ntests that check whether manila-ui is working.\n\nWe can make this job use the fake driver from\nmanila so we can add more interesting and useful\ntest cases without having to worry about any\nlacking capabilities.\n\nAlso make this integration job voting.\n\nChange-Id: Ibf35d7196d83e1018881776110ce173e68cf8286\nSigned-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>\n(cherry picked from commit 1f0754ff32660c3b669a1e12d302d4c4eea090a2)\n'}]",0,741701,c29dd15b4d0ed04968001919c3c25536d6d7c9f7,9,3,1,16643,,,0,"Drop legacy dsvm job & change zuulv3 integration job

The legacy job in this repository was just
setting up devstack with manila-ui enabled
and doing nothing else.

We added an integration gate job a couple of
releases ago that does exactly what the above
job does, and goes a step beyond by executing
tests that check whether manila-ui is working.

We can make this job use the fake driver from
manila so we can add more interesting and useful
test cases without having to worry about any
lacking capabilities.

Also make this integration job voting.

Change-Id: Ibf35d7196d83e1018881776110ce173e68cf8286
Signed-off-by: Goutham Pacha Ravi <gouthampravi@gmail.com>
(cherry picked from commit 1f0754ff32660c3b669a1e12d302d4c4eea090a2)
",git fetch https://review.opendev.org/openstack/manila-ui refs/changes/01/741701/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/legacy/manila-ui-dsvm/run.yaml', '.zuul.yaml', 'playbooks/legacy/manila-ui-dsvm/post.yaml']",3,c29dd15b4d0ed04968001919c3c25536d6d7c9f7,native-zuulv3-migration,,- hosts: primary tasks: - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=**/*nose_results.html - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=**/*testr_results.html.gz - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=/.testrepository/tmp* - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=**/*testrepository.subunit.gz - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}/tox' mode: pull copy_links: true verify_host: true rsync_opts: - --include=/.tox/*/log/* - --include=*/ - --exclude=* - --prune-empty-dirs - name: Copy files from {{ ansible_user_dir }}/workspace/ on node synchronize: src: '{{ ansible_user_dir }}/workspace/' dest: '{{ zuul.executor.log_root }}' mode: pull copy_links: true verify_host: true rsync_opts: - --include=/logs/** - --include=*/ - --exclude=* - --prune-empty-dirs ,52,182
openstack%2Fheat~master~I3aadca4e1e9db5da5d07d521c2313162062639b7,openstack/heat,master,I3aadca4e1e9db5da5d07d521c2313162062639b7,Improve naming of get_allowed_params() argument,MERGED,2020-07-14 16:40:53.000000000,2020-07-20 22:34:46.000000000,2020-07-20 22:24:42.000000000,"[{'_account_id': 4257}, {'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-14 16:40:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/28327a549cacef2422412cd74e424e090ef2e87b', 'message': ""Improve naming of get_allowed_params() argument\n\nThis used to be just a list of allowed names, but now it's a dict\nmapping names to types. Use variable names that reflect the current\nmeaning, fix the docs, and use named constants where available.\n\nChange-Id: I3aadca4e1e9db5da5d07d521c2313162062639b7\n""}, {'number': 2, 'created': '2020-07-14 18:54:23.000000000', 'files': ['heat/tests/api/openstack_v1/test_stacks.py', 'heat/tests/api/openstack_v1/test_events.py', 'heat/tests/api/openstack_v1/test_util.py', 'heat/api/openstack/v1/resources.py', 'heat/tests/api/openstack_v1/test_software_deployments.py', 'heat/api/openstack/v1/software_deployments.py', 'heat/api/openstack/v1/stacks.py', 'heat/api/openstack/v1/util.py', 'heat/api/openstack/v1/events.py', 'heat/api/openstack/v1/software_configs.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/73d05c0cdc388ef934663fe6439efa47ef906fdc', 'message': ""Improve naming of get_allowed_params() argument\n\nThis used to be just a list of allowed names, but now it's a dict\nmapping names to types. Use variable names that reflect the current\nmeaning, fix the docs, and use named constants where available.\n\nChange-Id: I3aadca4e1e9db5da5d07d521c2313162062639b7\n""}]",0,741002,73d05c0cdc388ef934663fe6439efa47ef906fdc,13,3,2,4257,,,0,"Improve naming of get_allowed_params() argument

This used to be just a list of allowed names, but now it's a dict
mapping names to types. Use variable names that reflect the current
meaning, fix the docs, and use named constants where available.

Change-Id: I3aadca4e1e9db5da5d07d521c2313162062639b7
",git fetch https://review.opendev.org/openstack/heat refs/changes/02/741002/1 && git format-patch -1 --stdout FETCH_HEAD,"['heat/tests/api/openstack_v1/test_stacks.py', 'heat/tests/api/openstack_v1/test_events.py', 'heat/tests/api/openstack_v1/test_util.py', 'heat/api/openstack/v1/resources.py', 'heat/tests/api/openstack_v1/test_software_deployments.py', 'heat/api/openstack/v1/software_deployments.py', 'heat/api/openstack/v1/stacks.py', 'heat/api/openstack/v1/events.py', 'heat/api/openstack/v1/util.py', 'heat/api/openstack/v1/software_configs.py']",10,28327a549cacef2422412cd74e424e090ef2e87b,," param_types = { params = util.get_allowed_params(req.params, param_types)"," whitelist = { params = util.get_allowed_params(req.params, whitelist)",62,62
openstack%2Frequirements~stable%2Fstein~Ic7019ec0b337886d7827bb6a7750d006477794f2,openstack/requirements,stable/stein,Ic7019ec0b337886d7827bb6a7750d006477794f2,update constraint for oslo.messaging to new release 9.5.2,MERGED,2020-07-20 09:39:14.000000000,2020-07-20 21:52:15.000000000,2020-07-20 21:52:15.000000000,"[{'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-20 09:39:14.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/0e4c22f53bc314d483eacb4032b16a32bad59a6f', 'message': 'update constraint for oslo.messaging to new release 9.5.2\n\nChange-Id: Ic7019ec0b337886d7827bb6a7750d006477794f2\nmeta:version: 9.5.2\nmeta:diff-start: -\nmeta:series: stein\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: no\nmeta:release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Change-Id: Ifdd08c9f3457470c6fc0a142c10982bcbfb0450e\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n'}]",0,741900,0e4c22f53bc314d483eacb4032b16a32bad59a6f,14,3,1,11131,,,0,"update constraint for oslo.messaging to new release 9.5.2

Change-Id: Ic7019ec0b337886d7827bb6a7750d006477794f2
meta:version: 9.5.2
meta:diff-start: -
meta:series: stein
meta:release-type: release
meta:pypi: yes
meta:first: no
meta:release:Author: Hervé Beraud <hberaud@redhat.com>
meta:release:Commit: Hervé Beraud <hberaud@redhat.com>
meta:release:Change-Id: Ifdd08c9f3457470c6fc0a142c10982bcbfb0450e
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/00/741900/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,0e4c22f53bc314d483eacb4032b16a32bad59a6f,new-release,oslo.messaging===9.5.2,oslo.messaging===9.5.1,1,1
openstack%2Fopenstack-helm-infra~master~I58bc16fc03b9234a08847d29aa14067bec05f1f1,openstack/openstack-helm-infra,master,I58bc16fc03b9234a08847d29aa14067bec05f1f1,[ceph-client] Add back a new version of reweight_osds(),MERGED,2020-07-17 19:38:59.000000000,2020-07-20 21:49:21.000000000,2020-07-20 21:47:44.000000000,"[{'_account_id': 8898}, {'_account_id': 17119}, {'_account_id': 18511}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 28372}, {'_account_id': 29974}, {'_account_id': 30777}]","[{'number': 1, 'created': '2020-07-17 19:38:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/cd8d519375abdf9dc60a42b393f401bd993223e7', 'message': ""[ceph-client] Add back a new version of reweight_osds()\n\nhttps://review.opendev.org/733193 removed the reweight_osds()\nfunction from the ceph-client and weighted OSDs as they are added\nin the ceph-osd chart instead. Since then some situations have\ncome up where OSDs were already deployed with incorrect weights\nand this function is needed in order to weight them properly later\non. This new version calculates an expected weight for each OSD,\ncompares it to the OSD's actual weight, and makes an adjustment if\nnecessary.\n\nChange-Id: I58bc16fc03b9234a08847d29aa14067bec05f1f1\n""}, {'number': 2, 'created': '2020-07-17 20:28:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/68f6b0c30f23a260eef70754bd17f43069d38d54', 'message': ""[ceph-client] Add back a new version of reweight_osds()\n\nhttps://review.opendev.org/733193 removed the reweight_osds()\nfunction from the ceph-client and weighted OSDs as they are added\nin the ceph-osd chart instead. Since then some situations have\ncome up where OSDs were already deployed with incorrect weights\nand this function is needed in order to weight them properly later\non. This new version calculates an expected weight for each OSD,\ncompares it to the OSD's actual weight, and makes an adjustment if\nnecessary.\n\nChange-Id: I58bc16fc03b9234a08847d29aa14067bec05f1f1\n""}, {'number': 3, 'created': '2020-07-20 13:40:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/b4a60460d61949a85e7d8287a01b87e60c2c16c5', 'message': ""[ceph-client] Add back a new version of reweight_osds()\n\nhttps://review.opendev.org/733193 removed the reweight_osds()\nfunction from the ceph-client and weighted OSDs as they are added\nin the ceph-osd chart instead. Since then some situations have\ncome up where OSDs were already deployed with incorrect weights\nand this function is needed in order to weight them properly later\non. This new version calculates an expected weight for each OSD,\ncompares it to the OSD's actual weight, and makes an adjustment if\nnecessary.\n\nChange-Id: I58bc16fc03b9234a08847d29aa14067bec05f1f1\n""}, {'number': 4, 'created': '2020-07-20 19:42:52.000000000', 'files': ['ceph-client/templates/bin/pool/_init.sh.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/aaf52acc278fb179b9fd88bb14d2188192eeb70b', 'message': ""[ceph-client] Add back a new version of reweight_osds()\n\nhttps://review.opendev.org/733193 removed the reweight_osds()\nfunction from the ceph-client and weighted OSDs as they are added\nin the ceph-osd chart instead. Since then some situations have\ncome up where OSDs were already deployed with incorrect weights\nand this function is needed in order to weight them properly later\non. This new version calculates an expected weight for each OSD,\ncompares it to the OSD's actual weight, and makes an adjustment if\nnecessary.\n\nChange-Id: I58bc16fc03b9234a08847d29aa14067bec05f1f1\n""}]",0,741704,aaf52acc278fb179b9fd88bb14d2188192eeb70b,20,8,4,29974,,,0,"[ceph-client] Add back a new version of reweight_osds()

https://review.opendev.org/733193 removed the reweight_osds()
function from the ceph-client and weighted OSDs as they are added
in the ceph-osd chart instead. Since then some situations have
come up where OSDs were already deployed with incorrect weights
and this function is needed in order to weight them properly later
on. This new version calculates an expected weight for each OSD,
compares it to the OSD's actual weight, and makes an adjustment if
necessary.

Change-Id: I58bc16fc03b9234a08847d29aa14067bec05f1f1
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/04/741704/2 && git format-patch -1 --stdout FETCH_HEAD,['ceph-client/templates/bin/pool/_init.sh.tpl'],1,cd8d519375abdf9dc60a42b393f401bd993223e7,,"function reweight_osds () { OSD_DF_OUTPUT=$(ceph --cluster ""${CLUSTER}"" osd df --format json-pretty) for OSD_ID in $(ceph --cluster ""${CLUSTER}"" osd ls); do OSD_EXPECTED_WEIGHT=$(echo ""${OSD_DF_OUTPUT}"" | grep -A7 ""\bosd.${OSD_ID}\b"" | awk '/""kb""/{ gsub("","",""""); d= $2/1073741824 ; r = sprintf(""%.2f"", d); print r }'); OSD_WEIGHT=$(echo ""${OSD_DF_OUTPUT}"" | grep -A3 ""\bosd.${OSD_ID}\b"" | awk '/crush_weight/{print $2}' | cut -d',' -f1) if [[ ""${OSD_WEIGHT}"" != ""${OSD_EXPECTED_WEIGHT}"" ]]; then ceph --cluster ""${CLUSTER}"" osd crush reweight osd.${OSD_ID} ${OSD_EXPECTED_WEIGHT}; fi done } reweight_osds ",,13,0
openstack%2Fopenstack-helm-infra~master~I9f1ca2069b181522b5d533e3f76a99f833acd8c0,openstack/openstack-helm-infra,master,I9f1ca2069b181522b5d533e3f76a99f833acd8c0,[WIP] ES shard allocation disrtribution,ABANDONED,2020-06-30 15:12:42.000000000,2020-07-20 21:44:36.000000000,,"[{'_account_id': 17591}, {'_account_id': 18295}, {'_account_id': 22348}, {'_account_id': 28237}, {'_account_id': 31713}]","[{'number': 1, 'created': '2020-06-30 15:12:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/3dae3e08d9c777f511f33e6a452349f2ea97f1d7', 'message': 'ES shard allocation disrtribution\n\nAfter the node or pod restart, the default\nallocation is set to primary node. As a result\nseeing unassinged shards.\n\nChange-Id: I9f1ca2069b181522b5d533e3f76a99f833acd8c0\n'}, {'number': 2, 'created': '2020-06-30 17:14:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6ad079595594529b67b8b42cc0cd044fc34b16f2', 'message': '[WP] ES shard allocation disrtribution\n\nAfter the node or pod restart, the default\nallocation is set to primary node. As a result\nseeing unassinged shards.\n\nChange-Id: I9f1ca2069b181522b5d533e3f76a99f833acd8c0\n'}, {'number': 3, 'created': '2020-06-30 17:14:50.000000000', 'files': ['elasticsearch/templates/bin/_elasticsearch.sh.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/22f54f7b94b5f17963941e61fe443c8f1af56a90', 'message': '[WIP] ES shard allocation disrtribution\n\nAfter the node or pod restart, the default\nallocation is set to primary node. As a result\nseeing unassinged shards.\n\nChange-Id: I9f1ca2069b181522b5d533e3f76a99f833acd8c0\n'}]",3,738646,22f54f7b94b5f17963941e61fe443c8f1af56a90,16,5,3,18295,,,0,"[WIP] ES shard allocation disrtribution

After the node or pod restart, the default
allocation is set to primary node. As a result
seeing unassinged shards.

Change-Id: I9f1ca2069b181522b5d533e3f76a99f833acd8c0
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/46/738646/3 && git format-patch -1 --stdout FETCH_HEAD,['elasticsearch/templates/bin/_elasticsearch.sh.tpl'],1,3dae3e08d9c777f511f33e6a452349f2ea97f1d7,," \""cluster.routing.allocation.enable\"": ""all"""," \""cluster.routing.allocation.enable\"": null",1,1
openstack%2Fcinder~stable%2Fstein~Icb621ff5966133f59d9d43ca2dd9f8e1919b1149,openstack/cinder,stable/stein,Icb621ff5966133f59d9d43ca2dd9f8e1919b1149,Fix cross-project incremental backups,MERGED,2020-07-06 21:19:13.000000000,2020-07-20 21:41:59.000000000,2020-07-20 21:39:50.000000000,"[{'_account_id': 7198}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 14567}, {'_account_id': 15670}, {'_account_id': 18883}, {'_account_id': 19933}, {'_account_id': 21863}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 28801}]","[{'number': 1, 'created': '2020-07-06 21:19:13.000000000', 'files': ['releasenotes/notes/bug-1869746-cross-project-incremental-backup-error.yaml', 'cinder/tests/unit/test_db_api.py', 'cinder/backup/api.py', 'cinder/tests/unit/objects/test_backup.py', 'cinder/db/api.py', 'cinder/tests/unit/backup/test_backup.py', 'cinder/objects/backup.py', 'cinder/db/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/5983eee1c35ababa1b6e2bad347cf98bd79b226f', 'message': ""Fix cross-project incremental backups\n\nThis patch addresses the scenario where an\nincremental backup can be created having a\nparent backup that was taken in a different\nproject. This scenario ultimately leads to\na silent error when creating/deleting the\nincremental backup and quotas going out of\nsync.\n\nThe proposed fix is to narrow the backup search\ndown to the same project. To achieve this, a\nmethod's signature had to be updated to achieve\nthe desired optimized behavior of passing the\nvolume's project_id parameter.\n\nCloses-bug: #1869746\nCloses-bug: #1873518\n\nChange-Id: Icb621ff5966133f59d9d43ca2dd9f8e1919b1149\n(cherry picked from commit 8ebeafcbbafb700052f3abfc1f7ba004269a92e8)\n(cherry picked from commit 5358c996b40bbb0fd749ec182ff3ef67f5d71c16)\n(cherry picked from commit f3cdc27563766b2f49a1d88500f32c8d86838c96)\n""}]",0,739607,5983eee1c35ababa1b6e2bad347cf98bd79b226f,39,19,1,14567,,,0,"Fix cross-project incremental backups

This patch addresses the scenario where an
incremental backup can be created having a
parent backup that was taken in a different
project. This scenario ultimately leads to
a silent error when creating/deleting the
incremental backup and quotas going out of
sync.

The proposed fix is to narrow the backup search
down to the same project. To achieve this, a
method's signature had to be updated to achieve
the desired optimized behavior of passing the
volume's project_id parameter.

Closes-bug: #1869746
Closes-bug: #1873518

Change-Id: Icb621ff5966133f59d9d43ca2dd9f8e1919b1149
(cherry picked from commit 8ebeafcbbafb700052f3abfc1f7ba004269a92e8)
(cherry picked from commit 5358c996b40bbb0fd749ec182ff3ef67f5d71c16)
(cherry picked from commit f3cdc27563766b2f49a1d88500f32c8d86838c96)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/07/739607/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1869746-cross-project-incremental-backup-error.yaml', 'cinder/tests/unit/test_db_api.py', 'cinder/backup/api.py', 'cinder/tests/unit/objects/test_backup.py', 'cinder/db/api.py', 'cinder/tests/unit/backup/test_backup.py', 'cinder/objects/backup.py', 'cinder/db/sqlalchemy/api.py']",8,5983eee1c35ababa1b6e2bad347cf98bd79b226f,bug/1869746,"def backup_get_all_by_volume(context, volume_id, vol_project_id, filters=None): authorize_project_context(context, vol_project_id)","def backup_get_all_by_volume(context, volume_id, filters=None): authorize_project_context(context, volume_id)",45,25
openstack%2Fcinder~stable%2Fstein~I1870633a5505bdb60d529fbda3147378b75e2b07,openstack/cinder,stable/stein,I1870633a5505bdb60d529fbda3147378b75e2b07,Rollback the quota_usages table when failed to create a incremental backup,MERGED,2020-07-06 21:19:13.000000000,2020-07-20 21:35:52.000000000,2020-07-20 21:33:56.000000000,"[{'_account_id': 7198}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 14567}, {'_account_id': 18883}, {'_account_id': 19933}, {'_account_id': 21863}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 27190}, {'_account_id': 28801}]","[{'number': 1, 'created': '2020-07-06 21:19:13.000000000', 'files': ['cinder/backup/api.py', 'releasenotes/notes/bug-1809323-fix-invalid-backup-4a341dc362ded88e.yaml', 'cinder/tests/unit/backup/test_backup.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/ef07bc95471101e42d531908a00c242710834784', 'message': 'Rollback the quota_usages table when failed to create a incremental backup\n\nIf we firstly create a incremental backup without parent backup\nor using unavailable backup file, like execute the command:\n``cinder backup-create --name test_backup --incremental\n2e3d9d0b-6b33-4cfe-a7c2-656415ee6f61``.\n\nTo satisfy one of the above reasons, we will be received an error\ninfo: ""Invalid backup: No backups available to do an incremental\nbackup. (HTTP 400)"". But the reserved value of the ``quota_usages``\ntable has been updated, so we need to roll back the ``quota_usages``\ntable. Otherwise, after repetitive operation for many times,\ncreate backup will be failed.\n\nCo-Authored-By: Brin Zhang <zhangbailin@inspur.com>\n\nCloses-Bug: #1809323\nChange-Id: I1870633a5505bdb60d529fbda3147378b75e2b07\n(cherry picked from commit a62fabfa65bf02ab91ff61ad2b74a6eb7509ee24)\n'}]",0,739606,ef07bc95471101e42d531908a00c242710834784,34,19,1,14567,,,0,"Rollback the quota_usages table when failed to create a incremental backup

If we firstly create a incremental backup without parent backup
or using unavailable backup file, like execute the command:
``cinder backup-create --name test_backup --incremental
2e3d9d0b-6b33-4cfe-a7c2-656415ee6f61``.

To satisfy one of the above reasons, we will be received an error
info: ""Invalid backup: No backups available to do an incremental
backup. (HTTP 400)"". But the reserved value of the ``quota_usages``
table has been updated, so we need to roll back the ``quota_usages``
table. Otherwise, after repetitive operation for many times,
create backup will be failed.

Co-Authored-By: Brin Zhang <zhangbailin@inspur.com>

Closes-Bug: #1809323
Change-Id: I1870633a5505bdb60d529fbda3147378b75e2b07
(cherry picked from commit a62fabfa65bf02ab91ff61ad2b74a6eb7509ee24)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/06/739606/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/backup/api.py', 'releasenotes/notes/bug-1809323-fix-invalid-backup-4a341dc362ded88e.yaml', 'cinder/tests/unit/backup/test_backup.py']",3,ef07bc95471101e42d531908a00c242710834784,bug/1869746,"from cinder.tests.unit.api.v2 import fakes as v2_fakes @mock.patch('cinder.db.backup_get_all_by_volume') @mock.patch('cinder.backup.rpcapi.BackupAPI.create_backup') @mock.patch.object(api.API, '_get_available_backup_service_host', return_value='fake_host') @mock.patch.object(quota.QUOTAS, 'rollback') @mock.patch.object(quota.QUOTAS, 'reserve') def test_create_backup_failed_with_empty_backup_objects( self, mock_reserve, mock_rollback, mock_get_service, mock_create, mock_get_backups): mock_get_backups.return_value = [v2_fakes.fake_backup('fake-1')] backups = objects.BackupList.get_all_by_volume(self.ctxt, fake.VOLUME_ID) backups.objects = [] is_incremental = True self.ctxt.user_id = 'fake_user' self.ctxt.project_id = 'fake_project' mock_reserve.return_value = 'fake_reservation' volume_id = self._create_volume_db_entry(status='available', host='testhost#rbd', size=1) self.assertRaises(exception.InvalidBackup, self.api.create, self.ctxt, None, None, volume_id, None, incremental=is_incremental) mock_rollback.assert_called_with(self.ctxt, ""fake_reservation"") @mock.patch('cinder.db.backup_get_all_by_volume', return_value=[v2_fakes.fake_backup('fake-1')]) @mock.patch('cinder.backup.rpcapi.BackupAPI.create_backup') @mock.patch.object(api.API, '_get_available_backup_service_host', return_value='fake_host') @mock.patch.object(quota.QUOTAS, 'rollback') @mock.patch.object(quota.QUOTAS, 'reserve') def test_create_backup_failed_with_backup_status_not_available( self, mock_reserve, mock_rollback, mock_get_service, mock_createi, mock_get_backups): is_incremental = True self.ctxt.user_id = 'fake_user' self.ctxt.project_id = 'fake_project' mock_reserve.return_value = 'fake_reservation' volume_id = self._create_volume_db_entry(status='available', host='testhost#rbd', size=1) self.assertRaises(exception.InvalidBackup, self.api.create, self.ctxt, None, None, volume_id, None, incremental=is_incremental) mock_rollback.assert_called_with(self.ctxt, ""fake_reservation"")",,65,0
openstack%2Fpuppet-tripleo~stable%2Fussuri~I96f5d349b94f05f4f66db6b85ba481deba0015d9,openstack/puppet-tripleo,stable/ussuri,I96f5d349b94f05f4f66db6b85ba481deba0015d9,Make promote timeout configurable,MERGED,2020-06-25 12:43:02.000000000,2020-07-20 21:30:13.000000000,2020-07-20 21:30:13.000000000,"[{'_account_id': 20172}, {'_account_id': 20778}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-25 12:43:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/bb219b99f4dd41fe9384e008effbd73e56463033', 'message': 'Make promote timeout configurable\n\nAllow override of galera promote timeout\n\nThis commit removes the hard coded value of pacemaker promote time out\n(currently 300s), and allows operators to override it via:\n\ntripleo::profile::pacemaker::database::mysql::promote_timeout\ntripleo::profile::pacemaker::database::mysql_bundle::promote_timeout\n\nCloses-Bug: #1883896\nChange-Id: I96f5d349b94f05f4f66db6b85ba481deba0015d9\n(cherry picked from commit 0606e22e245761f66baff3eb8846473d2eab5be3)\n'}, {'number': 2, 'created': '2020-07-14 06:41:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/4c71dd6bbc98d1f1d3b1e93d250c5715d65e6364', 'message': 'Make promote timeout configurable\n\nAllow override of galera promote timeout\n\nThis commit removes the hard coded value of pacemaker promote time out\n(currently 300s), and allows operators to override it via:\n\ntripleo::profile::pacemaker::database::mysql::promote_timeout\ntripleo::profile::pacemaker::database::mysql_bundle::promote_timeout\n\nCloses-Bug: #1883896\nChange-Id: I96f5d349b94f05f4f66db6b85ba481deba0015d9\n(cherry picked from commit 0606e22e245761f66baff3eb8846473d2eab5be3)\n'}, {'number': 3, 'created': '2020-07-16 17:26:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/03112f223050ffccd4084865eab7b9e3a3e561cf', 'message': 'Make promote timeout configurable\n\nAllow override of galera promote timeout\n\nThis commit removes the hard coded value of pacemaker promote time out\n(currently 300s), and allows operators to override it via:\n\ntripleo::profile::pacemaker::database::mysql::promote_timeout\ntripleo::profile::pacemaker::database::mysql_bundle::promote_timeout\n\nCloses-Bug: #1883896\nChange-Id: I96f5d349b94f05f4f66db6b85ba481deba0015d9\n(cherry picked from commit 0606e22e245761f66baff3eb8846473d2eab5be3)\n'}, {'number': 4, 'created': '2020-07-17 13:16:58.000000000', 'files': ['manifests/profile/pacemaker/database/mysql.pp', 'manifests/profile/pacemaker/database/mysql_bundle.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/9b02574d3a4e5566abd75b992a5078bc9cee2e32', 'message': 'Make promote timeout configurable\n\nAllow override of galera promote timeout\n\nThis commit removes the hard coded value of pacemaker promote time out\n(currently 300s), and allows operators to override it via:\n\ntripleo::profile::pacemaker::database::mysql::promote_timeout\ntripleo::profile::pacemaker::database::mysql_bundle::promote_timeout\n\nCloses-Bug: #1883896\nChange-Id: I96f5d349b94f05f4f66db6b85ba481deba0015d9\n(cherry picked from commit 0606e22e245761f66baff3eb8846473d2eab5be3)\n'}]",0,737996,9b02574d3a4e5566abd75b992a5078bc9cee2e32,22,4,4,20778,,,0,"Make promote timeout configurable

Allow override of galera promote timeout

This commit removes the hard coded value of pacemaker promote time out
(currently 300s), and allows operators to override it via:

tripleo::profile::pacemaker::database::mysql::promote_timeout
tripleo::profile::pacemaker::database::mysql_bundle::promote_timeout

Closes-Bug: #1883896
Change-Id: I96f5d349b94f05f4f66db6b85ba481deba0015d9
(cherry picked from commit 0606e22e245761f66baff3eb8846473d2eab5be3)
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/96/737996/3 && git format-patch -1 --stdout FETCH_HEAD,"['manifests/profile/pacemaker/database/mysql.pp', 'manifests/profile/pacemaker/database/mysql_bundle.pp']",2,bb219b99f4dd41fe9384e008effbd73e56463033,sst-promote-timeout-stable/ussuri,"# [*promote_timeout*] # (Optional) Maximum time in second for starting up a galera server # before pacemaker considers the operation timed out. # Defaults to 300 ## $promote_timeout = 300, op_params => ""promote timeout=${promote_timeout}s on-fail=block"","," op_params => 'promote timeout=300s on-fail=block',",15,2
openstack%2Fcharm-keystone~master~I51c7b1c0005d8f860f747257308ee80937f71553,openstack/charm-keystone,master,I51c7b1c0005d8f860f747257308ee80937f71553,Updates for 20.08 cycle start for groovy and libs,MERGED,2020-06-02 13:31:37.000000000,2020-07-20 21:22:32.000000000,2020-07-20 21:22:32.000000000,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 24824}, {'_account_id': 31289}]","[{'number': 1, 'created': '2020-06-02 13:31:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-keystone/commit/8727db04eb8dbdf50fa7b525f12fa21347cf0099', 'message': 'Updates for 20.08 cycle start for groovy and libs\n\n- Adds groovy to the series in the metadata\n- Classic charms: sync charm-helpers.\n- Classic ceph based charms:  also sync charms.ceph\n- Reactive charms: trigger a rebuild\n\nChange-Id: I51c7b1c0005d8f860f747257308ee80937f71553\n'}, {'number': 2, 'created': '2020-07-17 07:29:19.000000000', 'files': ['charmhelpers/contrib/peerstorage/__init__.py', 'metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-keystone/commit/5f8530d55f66671e5639cb0887ee4f81757d94be', 'message': 'Updates for 20.08 cycle start for groovy and libs\n\n- Adds groovy to the series in the metadata\n- Classic charms: sync charm-helpers.\n- Classic ceph based charms:  also sync charms.ceph\n- Reactive charms: trigger a rebuild\n\nChange-Id: I51c7b1c0005d8f860f747257308ee80937f71553\n'}]",0,732647,5f8530d55f66671e5639cb0887ee4f81757d94be,27,5,2,20870,,,0,"Updates for 20.08 cycle start for groovy and libs

- Adds groovy to the series in the metadata
- Classic charms: sync charm-helpers.
- Classic ceph based charms:  also sync charms.ceph
- Reactive charms: trigger a rebuild

Change-Id: I51c7b1c0005d8f860f747257308ee80937f71553
",git fetch https://review.opendev.org/openstack/charm-keystone refs/changes/47/732647/2 && git format-patch -1 --stdout FETCH_HEAD,"['charmhelpers/contrib/openstack/utils.py', 'charmhelpers/contrib/peerstorage/__init__.py', 'charmhelpers/fetch/snap.py', 'charmhelpers/contrib/storage/linux/ceph.py', 'metadata.yaml']",5,8727db04eb8dbdf50fa7b525f12fa21347cf0099,batch-groovy-ch-libs," Keystone is an OpenStack project that provides Identity, Token, Catalog and Policy services for use specifically by projects in the OpenStack family. It implements OpenStack's Identity API. tags: - openstack - identity - misc series: - xenial - bionic - eoan - focal - trusty - groovy"," Keystone is an OpenStack project that provides Identity, Token, Catalog and Policy services for use specifically by projects in the OpenStack family. It implements OpenStack's Identity API. tags: - openstack - identity - misc series: - xenial - bionic - eoan - focal - trusty",52,25
openstack%2Fcinder~stable%2Fstein~I2df6b567006e8a0d70f9a5f7b3ce0e01858c1ee7,openstack/cinder,stable/stein,I2df6b567006e8a0d70f9a5f7b3ce0e01858c1ee7,"Revert ""Make greande jobs n-v for EM and oldest stable""",MERGED,2020-07-09 13:00:57.000000000,2020-07-20 21:21:07.000000000,2020-07-20 21:18:10.000000000,"[{'_account_id': 7198}, {'_account_id': 10118}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 17685}, {'_account_id': 19933}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 28801}]","[{'number': 1, 'created': '2020-07-09 13:00:57.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/aa78aea3ae45f90056addccb12a6d528792bda39', 'message': 'Revert ""Make greande jobs n-v for EM and oldest stable""\n\nThis reverts commit 6a158d22c4a1011cc86a725023704ba2d0f96cc7.o\n\nNOTE(elod.illes): devstack in Rocky is fixed and grenade jobs started\nto pass. We can enable grenades again to restore testing as it was\nbefore.\n\nChange-Id: I2df6b567006e8a0d70f9a5f7b3ce0e01858c1ee7\n'}]",0,740272,aa78aea3ae45f90056addccb12a6d528792bda39,30,16,1,17685,,,0,"Revert ""Make greande jobs n-v for EM and oldest stable""

This reverts commit 6a158d22c4a1011cc86a725023704ba2d0f96cc7.o

NOTE(elod.illes): devstack in Rocky is fixed and grenade jobs started
to pass. We can enable grenades again to restore testing as it was
before.

Change-Id: I2df6b567006e8a0d70f9a5f7b3ce0e01858c1ee7
",git fetch https://review.opendev.org/openstack/cinder refs/changes/72/740272/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,aa78aea3ae45f90056addccb12a6d528792bda39,grenade-em-nv, - legacy-grenade-dsvm-cinder-mn-sub-volbak: irrelevant-files: *gate-irrelevant-files - neutron-grenade: irrelevant-files: *gate-irrelevant-files - grenade-py3: irrelevant-files: *gate-irrelevant-files, voting: false voting: false voting: false,6,3
openstack%2Fdevstack-gate~master~Ic84b2e5a2f3677156f6ddb523b9dc91abeda992b,openstack/devstack-gate,master,Ic84b2e5a2f3677156f6ddb523b9dc91abeda992b,Always assume glance is uwsgi mode for grenade,MERGED,2020-07-20 14:23:10.000000000,2020-07-20 21:18:12.000000000,2020-07-20 21:18:12.000000000,"[{'_account_id': 1}, {'_account_id': 4146}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 14:23:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/devstack-gate/commit/88ae53d272102c8e315e0ca2c0c87594fe812cda', 'message': 'Always assume glance is uwsgi mode for grenade\n\nSince older devstack versions do not support glance\nin standalone mode, make grenade configure the base\nand target for glance deployed with uwsgi.\n\nIt is failing in legacy grenade jobs[1], for devstack based\njobs it is taken care in https://review.opendev.org/#/c/741479/2\n\n[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-July/016006.html\n\nChange-Id: Ic84b2e5a2f3677156f6ddb523b9dc91abeda992b\n'}, {'number': 2, 'created': '2020-07-20 16:53:33.000000000', 'files': ['devstack-vm-gate.sh'], 'web_link': 'https://opendev.org/openstack/devstack-gate/commit/7a70f559c559e22b498d735b4ed20aadc71b7f39', 'message': 'Always assume glance is uwsgi mode for grenade\n\nSince older devstack versions do not support glance\nin standalone mode, make grenade configure the base\nand target for glance deployed with uwsgi.\n\nIt is failing in legacy grenade jobs[1], for devstack based\njobs it is taken care in https://review.opendev.org/#/c/741479/2\n\n[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-July/016006.html\n\nChange-Id: Ic84b2e5a2f3677156f6ddb523b9dc91abeda992b\n'}]",0,741955,7a70f559c559e22b498d735b4ed20aadc71b7f39,9,3,2,8556,,,0,"Always assume glance is uwsgi mode for grenade

Since older devstack versions do not support glance
in standalone mode, make grenade configure the base
and target for glance deployed with uwsgi.

It is failing in legacy grenade jobs[1], for devstack based
jobs it is taken care in https://review.opendev.org/#/c/741479/2

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-July/016006.html

Change-Id: Ic84b2e5a2f3677156f6ddb523b9dc91abeda992b
",git fetch https://review.opendev.org/openstack/devstack-gate refs/changes/55/741955/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack-vm-gate.sh'],1,88ae53d272102c8e315e0ca2c0c87594fe812cda,," localrc_set ""$localrc_file"" ""GLANCE_STANDALONE"" ""False""",,1,0
openstack%2Fglance~stable%2Fussuri~I93dc7c999ff7a180e6b3ff760fa65328b9a883f3,openstack/glance,stable/ussuri,I93dc7c999ff7a180e6b3ff760fa65328b9a883f3,Fix admin docs deploying under HTTPD,MERGED,2020-07-20 17:08:54.000000000,2020-07-20 21:14:15.000000000,2020-07-20 21:12:47.000000000,"[{'_account_id': 9303}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 17:08:54.000000000', 'files': ['releasenotes/notes/fix_httpd_docs-3efff0395f96a94d.yaml', 'doc/source/admin/apache-httpd.rst'], 'web_link': 'https://opendev.org/openstack/glance/commit/3a8fc940e271edfbd87369bb3920196c4dd5cf7e', 'message': ""Fix admin docs deploying under HTTPD\n\nDuring Pike cycle there was efforts to deploy services under\nApache HTTPD. It became clear very quickly that Glance did not\noperate properly when deployed as bare wsgi app under web\nserver but admin documentation was merged that indicated that\nbeing somehow the preferred method. It was added to the doc\nthat in Pike release there was issues in these models.\n\nThere was never interest nor resources to fix the underlying\nissues but the doc stayed in place indicating that those\nissues could be only Pike related when they in matter of\nfact has got even worse over the time. Due to the fact that\nGlance is even more relying on eventlet than back then it's\ntime to clarify the docs and make clear it's not adviced\ndeployment model, it won't work and there is no itention\nto change that.\n\nChange-Id: I93dc7c999ff7a180e6b3ff760fa65328b9a883f3\nCloses-Bug: #1887994\n(cherry picked from commit 785eefcf7853ccccfa9bec392e2271c3589a3927)\n""}]",0,741992,3a8fc940e271edfbd87369bb3920196c4dd5cf7e,7,2,1,5202,,,0,"Fix admin docs deploying under HTTPD

During Pike cycle there was efforts to deploy services under
Apache HTTPD. It became clear very quickly that Glance did not
operate properly when deployed as bare wsgi app under web
server but admin documentation was merged that indicated that
being somehow the preferred method. It was added to the doc
that in Pike release there was issues in these models.

There was never interest nor resources to fix the underlying
issues but the doc stayed in place indicating that those
issues could be only Pike related when they in matter of
fact has got even worse over the time. Due to the fact that
Glance is even more relying on eventlet than back then it's
time to clarify the docs and make clear it's not adviced
deployment model, it won't work and there is no itention
to change that.

Change-Id: I93dc7c999ff7a180e6b3ff760fa65328b9a883f3
Closes-Bug: #1887994
(cherry picked from commit 785eefcf7853ccccfa9bec392e2271c3589a3927)
",git fetch https://review.opendev.org/openstack/glance refs/changes/92/741992/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix_httpd_docs-3efff0395f96a94d.yaml', 'doc/source/admin/apache-httpd.rst']",2,3a8fc940e271edfbd87369bb3920196c4dd5cf7e,fix_adm_doc,"In short Glance will not operate properly if tried to be ran without eventlet and introducing another web server into the mix does not make it any better. This exercise failed without ever having proper interest or resources to fix the underlying issues. None of the models deploying Glance as bare wsgi app under some httpd are currently adviced. deploy this there are several patterns, which all fail different ways. This doc mentions three common ways of trying to deploy Glance with Apache HTTPD.This has never worked properly nor it has been of any development focus. The clearest we can say is just don't do it.This has not been doable since Ussuri as we only support Python 3. In theory the same applies as mod_wsgi but even without chunked encoding the code is still broken under uwsgi. specification.","deploy this there are several patterns. This doc shows two common ways of deploying Glance with Apache HTTPD.This is the current recommended way to deploy Glance with Apache HTTP and it is how we deploy Glance for testing every proposed commit to OpenStack. In this deployment method we use the uWSGI server as a web server bound to a random local port. Then we configure apache using mod_proxy to forward all incoming requests on the specified endpoint to that local webserver. This has the advantage of letting apache manage all inbound http connections, but letting uWSGI manage running the python code. It also means when we make changes to Glance code or configuration we don't need to restart all of apache (which may be running other services too) and just need to restart the local uWSGI daemon. The httpd/ directory contains sample files for configuring HTTPD to run Glance under the uWSGI server in this configuration. To use the sample configs simply copy `httpd/uwsgi-glance-api.conf` to the appropriate location for your Apache server. On Debian/Ubuntu systems it is:: /etc/apache2/sites-available/uwsgi-glance-api.conf On Red Hat based systems it is:: /etc/httpd/conf.d/uwsgi-glance-api.conf Enable mod_proxy by running ``sudo a2enmod proxy`` Then on Ubuntu/Debian systems enable the site by creating a symlink from the file in ``sites-available`` to ``sites-enabled``. (This is not required on Red Hat based systems):: ln -s /etc/apache2/sites-available/uwsgi-glance-api.conf /etc/apache2/sites-enabled Start or restart HTTPD to pick up the new configuration. .. NOTE:: Be careful when setting up other proxies/endpoints in the same VirtualHost on Apache HTTPD using. If any are using ``SetEnv proxy-sendcl 1`` then Apache HTTPD will buffer the incoming request to local disk before sending it to glance. This will likely cause problems when running in this configuration and is not necessary. (However, it is necessary if using mod_proxy_uwsgi.) For more details, see the section on :ref:`mod_proxy_uwsgi` below. Now we need to configure and start the uWSGi service. Copy the `httpd/glance-api-uwsgi.ini` file to `/etc/glance`. Update the file to match your system configuration (for example, you'll want to set the number of processes and threads). Install the uWSGI server and start the glance-api server using uWSGI:: sudo pip install uwsgi uwsgi --ini /etc/glance/glance-api-uwsgi.ini .. NOTE:: In the sample configs port 60999 is used, but this doesn't matter and is just a randomly selected number. This is not a contract on the port used for the local uwsgi daemon... WARNING:: Running Glance under HTTPD in this configuration will only work on Python 2 if you use ``Transfer-Encoding: chunked``. Also if running with Python 2 Apache will be buffering the chunked encoding before passing the request on to uWSGI. See bug: https://github.com/unbit/uwsgi/issues/1540 Instead of running uWSGI as a webserver listening on a local port and then having Apache HTTP proxy all the incoming requests with mod_proxy. The normally recommended way of deploying the uWSGI server with Apache HTTPD is to use mod_proxy_uwsgi and set up a local socket file for uWSGI to listen on. Apache will send the requests using the uwsgi protocol over this local socket file. However, there are issues with doing this and using chunked-encoding, so this is not recommended for use with Glance. You can work around these issues by configuring your Apache proxy to buffer the chunked data and send the full content length to the uWSGI server. You do this by adding:: SetEnv proxy-sendcl 1 to the apache config file using mod_proxy_uwsgi. For more details on using mod_proxy_uwsgi see the official docs: http://uwsgi-docs.readthedocs.io/en/latest/Apache.html?highlight=mod_uwsgi_proxy#mod-proxy-uwsgi There are some additional considerations when doing this though. Having Apache locally buffer the chunked data to disk before passing it to uWSGI means you'll need to have sufficient disk space in /tmp (or whatever you set TMPDIR to) to store all the disk files. The other aspect to consider is that this buffering can take some time to write the images to disk. To prevent random failures you'll likely have to increase timeout values in the uWSGI configuration file to ensure uWSGI will wait long enough for this to happen. (Depending on the uploaded image file sizes it may be necessary to set the timeouts to multiple minutes.) specification. (It is not recommended for use with Glance.)",22,92
openstack%2Fdevstack~master~I3bf3498d83607c5e98b70877c061dc54fc3c0a6e,openstack/devstack,master,I3bf3498d83607c5e98b70877c061dc54fc3c0a6e,Disable all import methods if glance is not standalone,MERGED,2020-07-16 17:49:17.000000000,2020-07-20 21:13:52.000000000,2020-07-20 21:12:46.000000000,"[{'_account_id': 8556}, {'_account_id': 9303}, {'_account_id': 22348}, {'_account_id': 30491}]","[{'number': 1, 'created': '2020-07-16 17:49:17.000000000', 'files': ['lib/glance'], 'web_link': 'https://opendev.org/openstack/devstack/commit/442c57e16855863346806bd6b21e82515158b9e8', 'message': 'Disable all import methods if glance is not standalone\n\nGlance should not be exposing import methods that cannot work via its\nAPI, but it does today. In order for tempest (et al) to be able to\nproperly detect whether import is possible, we must configure the\nimport methods in standalone mode, or disable them in wsgi mode. The\nreferenced Glance patch will make this a requirement.\n\nChange-Id: I3bf3498d83607c5e98b70877c061dc54fc3c0a6e\nNeeded-By: https://review.opendev.org/#/c/741497/\n'}]",0,741507,442c57e16855863346806bd6b21e82515158b9e8,10,4,1,4393,,,0,"Disable all import methods if glance is not standalone

Glance should not be exposing import methods that cannot work via its
API, but it does today. In order for tempest (et al) to be able to
properly detect whether import is possible, we must configure the
import methods in standalone mode, or disable them in wsgi mode. The
referenced Glance patch will make this a requirement.

Change-Id: I3bf3498d83607c5e98b70877c061dc54fc3c0a6e
Needed-By: https://review.opendev.org/#/c/741497/
",git fetch https://review.opendev.org/openstack/devstack refs/changes/07/741507/1 && git format-patch -1 --stdout FETCH_HEAD,['lib/glance'],1,442c57e16855863346806bd6b21e82515158b9e8,glance-standalone-default," if [[ ""$GLANCE_STANDALONE"" == ""False"" ]]; then # NOTE(danms): Do not advertise import methods if we are running in WSGI mode iniset $GLANCE_API_CONF enabled_import_methods [] fi ",,5,0
openstack%2Frequirements~stable%2Ftrain~I9356fa46689adb6f828c138afa705e200267a426,openstack/requirements,stable/train,I9356fa46689adb6f828c138afa705e200267a426,update constraint for castellan to new release 1.3.3,MERGED,2020-07-20 09:39:06.000000000,2020-07-20 21:12:44.000000000,2020-07-20 21:12:44.000000000,"[{'_account_id': 11904}, {'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-20 09:39:06.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/813275f3e020d7e0347406bdbe13aa93f343f6a8', 'message': 'update constraint for castellan to new release 1.3.3\n\nChange-Id: I9356fa46689adb6f828c138afa705e200267a426\nmeta:version: 1.3.3\nmeta:diff-start: -\nmeta:series: train\nmeta:release-type: release\nmeta:pypi: no\nmeta:first: no\nmeta:release:Author: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Commit: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Change-Id: Ie4f1057048bfdc55c1c403654da8831461199468\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>\n'}]",0,741899,813275f3e020d7e0347406bdbe13aa93f343f6a8,9,4,1,11131,,,0,"update constraint for castellan to new release 1.3.3

Change-Id: I9356fa46689adb6f828c138afa705e200267a426
meta:version: 1.3.3
meta:diff-start: -
meta:series: train
meta:release-type: release
meta:pypi: no
meta:first: no
meta:release:Author: Hervé Beraud <hberaud@redhat.com>
meta:release:Commit: Hervé Beraud <hberaud@redhat.com>
meta:release:Change-Id: Ie4f1057048bfdc55c1c403654da8831461199468
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta:release:Workflow+1: Thierry Carrez <thierry@openstack.org>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/99/741899/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,813275f3e020d7e0347406bdbe13aa93f343f6a8,new-release,castellan===1.3.3,castellan===1.3.2,1,1
openstack%2Fcharm-ceilometer~stable%2F20.05~I004bff0706362f893f2f69b07568be1034dbf574,openstack/charm-ceilometer,stable/20.05,I004bff0706362f893f2f69b07568be1034dbf574,Set the b64 encoded cert as a string,MERGED,2020-07-20 08:24:11.000000000,2020-07-20 21:10:51.000000000,2020-07-20 21:10:50.000000000,"[{'_account_id': 12549}, {'_account_id': 20648}, {'_account_id': 20805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 08:24:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceilometer/commit/fc12578ca56112c283b6dad26626db73fe96b100', 'message': 'Set the b64 encoded cert as a string\n\nSending a byte string to relation-set can result in the data\nbeing sent being prefixed with a ""b\'"". In this case it corrupts\nthe b64encoding and the receiving charm (ceilometer-agent) cannot\nb64decode the data.\n\nChange-Id: I004bff0706362f893f2f69b07568be1034dbf574\n(cherry picked from commit 7ad2d31417fa1836ca66195e57ade417d9de9cd3)\n'}, {'number': 2, 'created': '2020-07-20 10:33:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceilometer/commit/b8b6063f873e7cacd1bd1885a747f1ddf595482a', 'message': 'Set the b64 encoded cert as a string\n\nSending a byte string to relation-set can result in the data\nbeing sent being prefixed with a ""b\'"". In this case it corrupts\nthe b64encoding and the receiving charm (ceilometer-agent) cannot\nb64decode the data.\n\nChange-Id: I004bff0706362f893f2f69b07568be1034dbf574\n(cherry picked from commit 7ad2d31417fa1836ca66195e57ade417d9de9cd3)\n'}, {'number': 3, 'created': '2020-07-20 15:00:28.000000000', 'files': ['tests/bundles/trusty-mitaka.yaml', 'tests/bundles/xenial-ocata.yaml', 'hooks/ceilometer_hooks.py', 'unit_tests/test_ceilometer_hooks.py'], 'web_link': 'https://opendev.org/openstack/charm-ceilometer/commit/895dbee21d52139dd7d0f04e1ffdd2fb0b0a0f32', 'message': 'Set the b64 encoded cert as a string\n\nSending a byte string to relation-set can result in the data\nbeing sent being prefixed with a ""b\'"". In this case it corrupts\nthe b64encoding and the receiving charm (ceilometer-agent) cannot\nb64decode the data.\n\n* Backported test fixes too to fix the gate.\n\nChange-Id: I004bff0706362f893f2f69b07568be1034dbf574\n(cherry picked from commit 7ad2d31417fa1836ca66195e57ade417d9de9cd3)\n'}]",0,741887,895dbee21d52139dd7d0f04e1ffdd2fb0b0a0f32,19,4,3,12549,,,0,"Set the b64 encoded cert as a string

Sending a byte string to relation-set can result in the data
being sent being prefixed with a ""b'"". In this case it corrupts
the b64encoding and the receiving charm (ceilometer-agent) cannot
b64decode the data.

* Backported test fixes too to fix the gate.

Change-Id: I004bff0706362f893f2f69b07568be1034dbf574
(cherry picked from commit 7ad2d31417fa1836ca66195e57ade417d9de9cd3)
",git fetch https://review.opendev.org/openstack/charm-ceilometer refs/changes/87/741887/2 && git format-patch -1 --stdout FETCH_HEAD,"['hooks/ceilometer_hooks.py', 'unit_tests/test_ceilometer_hooks.py']",2,fc12578ca56112c283b6dad26626db73fe96b100,decode-cert-stable/20.05,"from mock import patch, MagicMock, call, mock_open self.get_ceilometer_context.return_value = { 'test': 'data', 'rabbit_ssl_ca': '/etc/certs/rabbit.pem'} with patch.object( hooks, 'open', mock_open(read_data=b'dGVzdCBjZXJ0Cg==')): hooks.hooks.execute(['hooks/ceilometer-service-relation-joined']) self.relation_set.assert_called_with( 'ceilometer:0', {'test': 'data', 'rabbit_ssl_ca': 'ZEdWemRDQmpaWEowQ2c9PQ=='})","from mock import patch, MagicMock, call self.get_ceilometer_context.return_value = {'test': 'data'} hooks.hooks.execute(['hooks/ceilometer-service-relation-joined']) self.relation_set.assert_called_with('ceilometer:0', {'test': 'data'})",13,6
openstack%2Fopenstack-helm~master~I68fd85ada78cd41108c2f292a8cb9a237cd79e8d,openstack/openstack-helm,master,I68fd85ada78cd41108c2f292a8cb9a237cd79e8d,Specify OPENSTACK_RELEASE for setup-client.sh constraints,MERGED,2020-07-14 16:56:30.000000000,2020-07-20 20:51:55.000000000,2020-07-20 20:49:35.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 20466}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 24780}, {'_account_id': 29161}]","[{'number': 1, 'created': '2020-07-14 16:56:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f321dd9245423441eff16e7455351c062a236f0b', 'message': 'Specify OPENSTACK_RELEASE for setup-client upper-constraints\n\nChange-Id: I68fd85ada78cd41108c2f292a8cb9a237cd79e8d\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 2, 'created': '2020-07-14 18:43:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/49d2f65594212fe5560f564494696fd3d76f9c09', 'message': 'Specify OPENSTACK_RELEASE for setup-client upper-constraints\n\nChange-Id: I68fd85ada78cd41108c2f292a8cb9a237cd79e8d\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 3, 'created': '2020-07-14 19:29:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/1d966d4ca18d76992086b70271324d8d76262985', 'message': 'Specify OPENSTACK_RELEASE for setup-client.sh constraints\n\nAlso include ensure-pip role to functional jobs.\n\nChange-Id: I68fd85ada78cd41108c2f292a8cb9a237cd79e8d\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 4, 'created': '2020-07-16 15:35:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/ced60923aafc910182df25800e29f5975f55c3be', 'message': 'Specify OPENSTACK_RELEASE for setup-client.sh constraints\n\nAlso include ensure-pip role to functional jobs.\n\nDepends-On: https://review.opendev.org/741485\nChange-Id: I68fd85ada78cd41108c2f292a8cb9a237cd79e8d\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}, {'number': 5, 'created': '2020-07-19 00:09:33.000000000', 'files': ['tools/deployment/common/setup-client.sh'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/dac7c4f8bde4d5809e97660eef63de7af8f7691a', 'message': 'Specify OPENSTACK_RELEASE for setup-client.sh constraints\n\nAlso include ensure-pip role to functional jobs.\n\nDepends-On: https://review.opendev.org/741485\nChange-Id: I68fd85ada78cd41108c2f292a8cb9a237cd79e8d\nSigned-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>\n'}]",0,741006,dac7c4f8bde4d5809e97660eef63de7af8f7691a,25,7,5,8863,,,0,"Specify OPENSTACK_RELEASE for setup-client.sh constraints

Also include ensure-pip role to functional jobs.

Depends-On: https://review.opendev.org/741485
Change-Id: I68fd85ada78cd41108c2f292a8cb9a237cd79e8d
Signed-off-by: Andrii Ostapenko <andrii.ostapenko@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/06/741006/2 && git format-patch -1 --stdout FETCH_HEAD,['tools/deployment/common/setup-client.sh'],1,f321dd9245423441eff16e7455351c062a236f0b,, -c${UPPER_CONSTRAINTS_FILE:=https://releases.openstack.org/constraints/upper/${OPENSTACK_RELEASE}} \, -c${UPPER_CONSTRAINTS_FILE:=https://releases.openstack.org/constraints/upper/master} \,1,1
openstack%2Fcinder~stable%2Fussuri~I88c5afacff5f1f780c2dc850e3af417b1b081592,openstack/cinder,stable/ussuri,I88c5afacff5f1f780c2dc850e3af417b1b081592,Kaminario: Fix unique_fqdn_network option,MERGED,2020-07-16 10:38:34.000000000,2020-07-20 20:50:00.000000000,2020-07-17 20:59:18.000000000,"[{'_account_id': 9535}, {'_account_id': 11904}, {'_account_id': 12032}, {'_account_id': 12369}, {'_account_id': 19933}, {'_account_id': 22248}, {'_account_id': 22348}, {'_account_id': 22510}, {'_account_id': 23613}, {'_account_id': 24921}, {'_account_id': 25243}, {'_account_id': 26077}, {'_account_id': 26537}, {'_account_id': 28801}, {'_account_id': 29122}, {'_account_id': 31254}]","[{'number': 1, 'created': '2020-07-16 10:38:34.000000000', 'files': ['doc/source/configuration/block-storage/drivers/hpe-3par-driver.rst', 'cinder/test.py', 'releasenotes/notes/fix-kaminario-unique_fqdn_network-ecde36f614c30733.yaml', 'cinder/volume/drivers/hpe/hpe_3par_iscsi.py', 'cinder/tests/unit/volume/drivers/test_kaminario.py', 'cinder/volume/drivers/kaminario/kaminario_common.py', 'cinder/volume/drivers/hpe/hpe_3par_fc.py', 'cinder/tests/unit/volume/drivers/hpe/test_hpe3par.py', 'cinder/volume/drivers/hpe/hpe_3par_common.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/33cf05eba2f9dfd09b6eceb75724af231be77d34', 'message': 'Kaminario: Fix unique_fqdn_network option\n\nThe Kaminario driver used to accept the unique_fqdn_network\nconfiguration option in the specific driver section, but when we moved\nthis option to be an option also used by 3PAR we introduced a regression\nwhere the parameter was now only used if it was defined in the shared\nconfiguration group.\n\nThis patch fixes this and makes it possible for the option to be defined\nin the shared configuration group as well as the driver specific\nsection.\n\nCloses-Bug: #1886042\nChange-Id: I88c5afacff5f1f780c2dc850e3af417b1b081592\n(cherry picked from commit 53504f82a53146151935e6aac301a41e2b387623)\n'}]",0,741428,33cf05eba2f9dfd09b6eceb75724af231be77d34,29,16,1,29122,,,0,"Kaminario: Fix unique_fqdn_network option

The Kaminario driver used to accept the unique_fqdn_network
configuration option in the specific driver section, but when we moved
this option to be an option also used by 3PAR we introduced a regression
where the parameter was now only used if it was defined in the shared
configuration group.

This patch fixes this and makes it possible for the option to be defined
in the shared configuration group as well as the driver specific
section.

Closes-Bug: #1886042
Change-Id: I88c5afacff5f1f780c2dc850e3af417b1b081592
(cherry picked from commit 53504f82a53146151935e6aac301a41e2b387623)
",git fetch https://review.opendev.org/openstack/cinder refs/changes/28/741428/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/configuration/block-storage/drivers/hpe-3par-driver.rst', 'cinder/test.py', 'releasenotes/notes/fix-kaminario-unique_fqdn_network-ecde36f614c30733.yaml', 'cinder/volume/drivers/hpe/hpe_3par_iscsi.py', 'cinder/tests/unit/volume/drivers/test_kaminario.py', 'cinder/volume/drivers/kaminario/kaminario_common.py', 'cinder/volume/drivers/hpe/hpe_3par_fc.py', 'cinder/tests/unit/volume/drivers/hpe/test_hpe3par.py', 'cinder/volume/drivers/hpe/hpe_3par_common.py']",9,33cf05eba2f9dfd09b6eceb75724af231be77d34,bug/1886042," def _safe_hostname(self, connector, configuration): hostname = connector['host'] unique_fqdn_network = configuration.unique_fqdn_network"," def _safe_hostname(self, hostname, connector=None): SHARED_CONF_GROUP = 'backend_defaults' shared_backend_conf = CONF._get(SHARED_CONF_GROUP) unique_fqdn_network = shared_backend_conf.unique_fqdn_network",67,49
openstack%2Floci~master~I781457ceeb821a0cad7edc9c0921736b989e9ec7,openstack/loci,master,I781457ceeb821a0cad7edc9c0921736b989e9ec7,Add collect_info.sh stage,MERGED,2019-10-08 07:13:15.000000000,2020-07-20 20:49:00.000000000,2020-07-20 20:49:00.000000000,"[{'_account_id': 1736}, {'_account_id': 2243}, {'_account_id': 8863}, {'_account_id': 9373}, {'_account_id': 14119}, {'_account_id': 14525}, {'_account_id': 17068}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 23928}]","[{'number': 1, 'created': '2019-10-08 07:13:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/967f1aa1a2eab235382d2e77372c02737142462f', 'message': 'Add collect_info.sh stage\n\nCollect info about installed packages versions and\npip packages into /etc/image_info folder\n\nChange-Id: I781457ceeb821a0cad7edc9c0921736b989e9ec7\n'}, {'number': 2, 'created': '2020-02-03 15:14:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/81ad39fbec5236ff8fc863311a7bce7c882be3ca', 'message': 'Add collect_info.sh stage\n\nCollect info about installed packages versions and\npip packages into /etc/image_info folder\n\nChange-Id: I781457ceeb821a0cad7edc9c0921736b989e9ec7\n'}, {'number': 3, 'created': '2020-05-20 18:01:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/loci/commit/e9e8d855a1dfeb249a18923b0c0cf6e54bf99ff3', 'message': 'Add collect_info.sh stage\n\nCollect info about installed packages versions and\npip packages into /etc/image_info folder\n\nChange-Id: I781457ceeb821a0cad7edc9c0921736b989e9ec7\n'}, {'number': 4, 'created': '2020-07-13 18:34:19.000000000', 'files': ['scripts/collect_info.sh', 'scripts/install.sh'], 'web_link': 'https://opendev.org/openstack/loci/commit/ec429cb082ef1c1dc5e781a131cbd61aecf3acd3', 'message': 'Add collect_info.sh stage\n\nCollect info about installed packages versions and\npip packages into /etc/image_info folder\n\nChange-Id: I781457ceeb821a0cad7edc9c0921736b989e9ec7\n'}]",0,687221,ec429cb082ef1c1dc5e781a131cbd61aecf3acd3,21,10,4,14525,,,0,"Add collect_info.sh stage

Collect info about installed packages versions and
pip packages into /etc/image_info folder

Change-Id: I781457ceeb821a0cad7edc9c0921736b989e9ec7
",git fetch https://review.opendev.org/openstack/loci refs/changes/21/687221/1 && git format-patch -1 --stdout FETCH_HEAD,"['scripts/collect_info.sh', 'scripts/install.sh']",2,967f1aa1a2eab235382d2e77372c02737142462f,rm,$(dirname $0)/collect_info.sh,,27,0
openstack%2Frequirements~master~I2c700adfb37b79769a66065ba3d8f00969898496,openstack/requirements,master,I2c700adfb37b79769a66065ba3d8f00969898496,Cap dnspython for breaking gate,ABANDONED,2020-07-20 20:21:27.000000000,2020-07-20 20:25:41.000000000,,[{'_account_id': 9303}],"[{'number': 1, 'created': '2020-07-20 20:21:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/65461a44e29c15dbe81c1c40e5666a1f082f469c', 'message': 'Cap dnpython for breaking gate\n\nGlance functional-py3* jobs fails with stestr after the dnspython\n2.0.0 release. Lets cap that until we figure out what actually is\nbreaking.\n\nChange-Id: I2c700adfb37b79769a66065ba3d8f00969898496\n'}, {'number': 2, 'created': '2020-07-20 20:21:58.000000000', 'files': ['global-requirements.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/8a4c6e5030ec76a5186ae29620796fc363db5d53', 'message': 'Cap dnspython for breaking gate\n\nGlance functional-py3* jobs fails with stestr after the dnspython\n2.0.0 release. Lets cap that until we figure out what actually is\nbreaking.\n\nChange-Id: I2c700adfb37b79769a66065ba3d8f00969898496\n'}]",0,742022,8a4c6e5030ec76a5186ae29620796fc363db5d53,4,1,2,5202,,,0,"Cap dnspython for breaking gate

Glance functional-py3* jobs fails with stestr after the dnspython
2.0.0 release. Lets cap that until we figure out what actually is
breaking.

Change-Id: I2c700adfb37b79769a66065ba3d8f00969898496
",git fetch https://review.opendev.org/openstack/requirements refs/changes/22/742022/1 && git format-patch -1 --stdout FETCH_HEAD,"['global-requirements.txt', 'upper-constraints.txt']",2,65461a44e29c15dbe81c1c40e5666a1f082f469c,,dnspython===1.16.0,dnspython===2.0.0,2,2
openstack%2Fkayobe~master~Iaa0a8c851dac8b2a71a8c021435b26cc8c1998da,openstack/kayobe,master,Iaa0a8c851dac8b2a71a8c021435b26cc8c1998da,Add common groups to kolla-ansible inventory,MERGED,2020-07-20 13:55:35.000000000,2020-07-20 20:22:38.000000000,2020-07-20 20:21:00.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 13:55:35.000000000', 'files': ['ansible/roles/kolla-ansible/templates/overcloud-services.j2', 'ansible/roles/kolla-ansible/templates/overcloud-components.j2'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f5816d791e2b190103aa5ff8e12668328ceca1ec', 'message': 'Add common groups to kolla-ansible inventory\n\nThese groups were added to kolla-ansible in\nI6a4676bf6efeebc61383ec7a406db07c7a868b2a. They are required for the\ncommon services to be deployed.\n\nChange-Id: Iaa0a8c851dac8b2a71a8c021435b26cc8c1998da\n'}]",0,741949,f5816d791e2b190103aa5ff8e12668328ceca1ec,7,2,1,14826,,,0,"Add common groups to kolla-ansible inventory

These groups were added to kolla-ansible in
I6a4676bf6efeebc61383ec7a406db07c7a868b2a. They are required for the
common services to be deployed.

Change-Id: Iaa0a8c851dac8b2a71a8c021435b26cc8c1998da
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/49/741949/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/kolla-ansible/templates/overcloud-services.j2', 'ansible/roles/kolla-ansible/templates/overcloud-components.j2']",2,f5816d791e2b190103aa5ff8e12668328ceca1ec,, [common:children] control network compute storage monitoring ,,21,0
openstack%2Fmanila-tempest-plugin~master~If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d,openstack/manila-tempest-plugin,master,If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d,Verify applying a new cephx rule after a previous failure,MERGED,2020-07-14 15:10:33.000000000,2020-07-20 20:10:20.000000000,2020-07-20 20:10:19.000000000,"[{'_account_id': 6413}, {'_account_id': 9003}, {'_account_id': 12017}, {'_account_id': 16643}, {'_account_id': 19262}, {'_account_id': 21884}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 30025}]","[{'number': 1, 'created': '2020-07-14 15:10:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/26fce44ca30306477b30bda34ed7ccad01893032', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall and will then create another access rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 2, 'created': '2020-07-14 17:54:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/fea8a53313ba2df01a7418a72dd6bfab7eb48412', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall and will then create another access rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 3, 'created': '2020-07-15 10:43:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/97e55f06f88110f7d5314d1f6d8f8dc4eed76792', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall into the error status and will then create another\naccess rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 4, 'created': '2020-07-16 04:34:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/e32f09e4c9347666216f75e1adc28666fc464290', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall into the error status and will then create another\naccess rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 5, 'created': '2020-07-16 06:20:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/61293a653de598fecc82b564f02b497e27289ca2', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall into the error status and will then create another\naccess rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 6, 'created': '2020-07-16 16:37:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/7ad766e29192a0d9bc935fb06ee267bb9c2caec8', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall into the error status and will then create another\naccess rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 7, 'created': '2020-07-17 13:11:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/4e6d105e3baf0cb1f42cd0eb4281438d0fdb6481', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall into the error status and will then create another\naccess rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nThis patch also refactors ""test_different_tenants_cannot_use_same_cephx_id""\nto use raise_rule_in_error_state=False.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 8, 'created': '2020-07-17 14:39:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/12df4e4b87d1177737c3f706d3306d62fd2cacf4', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall into the error status and will then create another\naccess rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nThis patch also refactors ""test_different_tenants_cannot_use_same_cephx_id""\nto use raise_rule_in_error_state=False.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}, {'number': 9, 'created': '2020-07-19 10:13:25.000000000', 'files': ['manila_tempest_tests/tests/api/base.py', 'manila_tempest_tests/services/share/json/shares_client.py', 'manila_tempest_tests/tests/api/test_rules_negative.py'], 'web_link': 'https://opendev.org/openstack/manila-tempest-plugin/commit/5af7cb48f33a4ce83d43ce9e37484e262f43b22e', 'message': 'Verify applying a new cephx rule after a previous failure\n\nThis test will create a share and will then assign an access rule\nthat will fall into the error status and will then create another\naccess rule on the share.\nThe test will then verify that the second access rule was applied\nsuccessfully.\n\nThis patch also refactors ""test_different_tenants_cannot_use_same_cephx_id""\nto use raise_rule_in_error_state=False.\n\nAdded: ""allow_access"" helper method the grants an access to a\nshare and deletes it at the end of the test.\n\nChange-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d\n'}]",16,740985,5af7cb48f33a4ce83d43ce9e37484e262f43b22e,47,9,9,19262,,,0,"Verify applying a new cephx rule after a previous failure

This test will create a share and will then assign an access rule
that will fall into the error status and will then create another
access rule on the share.
The test will then verify that the second access rule was applied
successfully.

This patch also refactors ""test_different_tenants_cannot_use_same_cephx_id""
to use raise_rule_in_error_state=False.

Added: ""allow_access"" helper method the grants an access to a
share and deletes it at the end of the test.

Change-Id: If9ffab7fcf37fab77bb4c9fd1863a0316f0a370d
",git fetch https://review.opendev.org/openstack/manila-tempest-plugin refs/changes/85/740985/8 && git format-patch -1 --stdout FETCH_HEAD,['manila_tempest_tests/tests/api/test_rules_negative.py'],1,26fce44ca30306477b30bda34ed7ccad01893032,rule_negative," @tc.attr(base.TAG_NEGATIVE, base.TAG_API) def test_can_apply_new_cephx_rules_when_one_is_in_error_state(self): share = self.create_share() self.assertRaises(lib_exc.BadRequest, self.shares_v2_client.create_access_rule, share['id'], self.access_type, 'jane.doe') access = self.shares_v2_client.create_access_rule( share['id'], self.access_type, self.access_to) self.shares_client.wait_for_access_rule_status( share['id'], access['id'], 'active') ",,13,0
openstack%2Fopenstack-tempest-skiplist~master~I792c32259378a779fab5455cf6c274fb0fe9756f,openstack/openstack-tempest-skiplist,master,I792c32259378a779fab5455cf6c274fb0fe9756f,Support non-zuul workflow for list_skipped_yaml_file,MERGED,2020-07-20 15:59:51.000000000,2020-07-20 20:09:01.000000000,2020-07-20 20:07:39.000000000,"[{'_account_id': 8367}, {'_account_id': 9592}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 15:59:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/70639970ac5dd0399ddeff3867206cfb9465ad90', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 2, 'created': '2020-07-20 16:01:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/040a64866436193f74ae255fdbdccefdd90c6e8e', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 3, 'created': '2020-07-20 16:28:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/c327913c4badf0a5247f1990ffeb06ae21804c6b', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 4, 'created': '2020-07-20 17:04:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/420c79cb5408273e55f09dcf0286d7fbd88a7cd5', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 5, 'created': '2020-07-20 17:34:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/11fabe3fdc52f3cbdf7b74d21068f97b1104421a', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 6, 'created': '2020-07-20 18:18:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/1dceeffd721b856c1eea456a974608e882a5727a', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 7, 'created': '2020-07-20 18:23:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/07451183a6f7ef568da4af242a56b93d0a9b2071', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 8, 'created': '2020-07-20 18:59:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/89cba4e4f12a3c17c79420fd3cf56f97afb57c10', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}, {'number': 9, 'created': '2020-07-20 19:13:35.000000000', 'files': ['playbooks/tempest_skip_install.yaml', 'playbooks/tempest_skip_validate.yaml', 'roles/install_skiplist/defaults/main.yaml', 'setup.cfg', 'roles/list_skipped/defaults/main.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-tempest-skiplist/commit/bca408e823c93382d0271620947ac9c76edbedef', 'message': 'Support non-zuul workflow for list_skipped_yaml_file\n\nCurrently, the step to install the tempest-skiplist\nfails on non-zuul platforms.\nThis review allows the test to source the skiplist\nfile from the local workspace if needed.\n\nChange-Id: I792c32259378a779fab5455cf6c274fb0fe9756f\nCloses-Bug: #1888244\n'}]",0,741977,bca408e823c93382d0271620947ac9c76edbedef,22,3,9,9976,,,0,"Support non-zuul workflow for list_skipped_yaml_file

Currently, the step to install the tempest-skiplist
fails on non-zuul platforms.
This review allows the test to source the skiplist
file from the local workspace if needed.

Change-Id: I792c32259378a779fab5455cf6c274fb0fe9756f
Closes-Bug: #1888244
",git fetch https://review.opendev.org/openstack/openstack-tempest-skiplist refs/changes/77/741977/3 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/tempest_skip_validate.yaml', 'setup.cfg']",2,70639970ac5dd0399ddeff3867206cfb9465ad90,BZ1888244, usr/local/share/ansible/roles/validate-tempest = roles/validate-tempest/*,,7,1
openstack%2Ftripleo-common~stable%2Ftrain~Ia7a440eeda789561d241e131bdf59968201b28ca,openstack/tripleo-common,stable/train,Ia7a440eeda789561d241e131bdf59968201b28ca,[DNM] ansible-2.9.10 testing,ABANDONED,2020-06-25 18:56:06.000000000,2020-07-20 19:58:46.000000000,,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-25 18:56:06.000000000', 'files': ['container-images/tripleo_kolla_template_overrides.j2', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/a68c82c94194101f720611232f41c26346f24bc0', 'message': '[DNM] ansible-2.9.10 testing\n\nDepends-On: https://review.opendev.org/#/c/722218/\nChange-Id: Ia7a440eeda789561d241e131bdf59968201b28ca\n'}]",0,738092,a68c82c94194101f720611232f41c26346f24bc0,7,3,1,14985,,,0,"[DNM] ansible-2.9.10 testing

Depends-On: https://review.opendev.org/#/c/722218/
Change-Id: Ia7a440eeda789561d241e131bdf59968201b28ca
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/92/738092/1 && git format-patch -1 --stdout FETCH_HEAD,"['container-images/tripleo_kolla_template_overrides.j2', 'zuul.d/layout.yaml']",2,a68c82c94194101f720611232f41c26346f24bc0,ansible-2.9.10,# DNM,,2,1
openstack%2Ftripleo-common~stable%2Fussuri~Ia7a440eeda789561d241e131bdf59968201b28ca,openstack/tripleo-common,stable/ussuri,Ia7a440eeda789561d241e131bdf59968201b28ca,[DNM] ansible-2.9.10 testing,ABANDONED,2020-06-25 18:55:30.000000000,2020-07-20 19:58:40.000000000,,"[{'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-06-25 18:55:30.000000000', 'files': ['container-images/tripleo_kolla_template_overrides.j2', 'zuul.d/layout.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-common/commit/fa927581039fd47c984490a8041a926a63644a1d', 'message': '[DNM] ansible-2.9.10 testing\n\nDepends-On: https://review.opendev.org/#/c/722218/\nChange-Id: Ia7a440eeda789561d241e131bdf59968201b28ca\n'}]",0,738091,fa927581039fd47c984490a8041a926a63644a1d,7,3,1,14985,,,0,"[DNM] ansible-2.9.10 testing

Depends-On: https://review.opendev.org/#/c/722218/
Change-Id: Ia7a440eeda789561d241e131bdf59968201b28ca
",git fetch https://review.opendev.org/openstack/tripleo-common refs/changes/91/738091/1 && git format-patch -1 --stdout FETCH_HEAD,"['container-images/tripleo_kolla_template_overrides.j2', 'zuul.d/layout.yaml']",2,fa927581039fd47c984490a8041a926a63644a1d,ansible-2.9.10,# DNM,,2,1
openstack%2Frequirements~master~I03814f3283dafe63a52d365d54d920c21fd6390e,openstack/requirements,master,I03814f3283dafe63a52d365d54d920c21fd6390e,update constraint for octavia-lib to new release 2.1.0,MERGED,2020-07-20 14:09:42.000000000,2020-07-20 19:58:16.000000000,2020-07-20 19:57:03.000000000,"[{'_account_id': 11904}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-07-20 14:09:42.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/11f2cbdf7daa041af6c4f0392607ca1c20c237ba', 'message': 'update constraint for octavia-lib to new release 2.1.0\n\nChange-Id: I03814f3283dafe63a52d365d54d920c21fd6390e\nmeta:version: 2.1.0\nmeta:diff-start: -\nmeta:series: victoria\nmeta:release-type: release\nmeta:pypi: yes\nmeta:first: yes\nmeta:release:Author: Carlos Goncalves <cgoncalves@redhat.com>\nmeta:release:Commit: Carlos Goncalves <cgoncalves@redhat.com>\nmeta:release:Change-Id: I2c67923f67d9922e1fcb9d6a915e099456072dcc\nmeta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>\nmeta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>\nmeta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>\n'}]",0,741952,11f2cbdf7daa041af6c4f0392607ca1c20c237ba,9,3,1,11131,,,0,"update constraint for octavia-lib to new release 2.1.0

Change-Id: I03814f3283dafe63a52d365d54d920c21fd6390e
meta:version: 2.1.0
meta:diff-start: -
meta:series: victoria
meta:release-type: release
meta:pypi: yes
meta:first: yes
meta:release:Author: Carlos Goncalves <cgoncalves@redhat.com>
meta:release:Commit: Carlos Goncalves <cgoncalves@redhat.com>
meta:release:Change-Id: I2c67923f67d9922e1fcb9d6a915e099456072dcc
meta:release:Code-Review+2: Hervé Beraud <hberaud@redhat.com>
meta:release:Code-Review+2: Sean McGinnis <sean.mcginnis@gmail.com>
meta:release:Workflow+1: Sean McGinnis <sean.mcginnis@gmail.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/52/741952/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,11f2cbdf7daa041af6c4f0392607ca1c20c237ba,new-release,octavia-lib===2.1.0,octavia-lib===2.0.0,1,1
openstack%2Fopenstack-ansible-os_neutron~master~I51c0212f41df5c740959be037bb0797a9ca45c64,openstack/openstack-ansible-os_neutron,master,I51c0212f41df5c740959be037bb0797a9ca45c64,VLAN tag support for ovs port,ABANDONED,2020-06-22 20:58:04.000000000,2020-07-20 19:41:01.000000000,,"[{'_account_id': 16011}, {'_account_id': 22348}, {'_account_id': 26647}]","[{'number': 1, 'created': '2020-06-22 20:58:04.000000000', 'files': ['tasks/providers/ovs_config.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_neutron/commit/5e0d367bf61d499aaf235d3cf74f85d6fb833958', 'message': 'VLAN tag support for ovs port\n\nWhen configuring Neutron to support multiple vlan provider networks\nand if provider network mapped to vlan tagged interface, ovs port\nneeds to be created with a tag\n\nFor example:\nneutron_provider_networks:\n  network_types: ""vlan""\n  network_vlan_ranges: ""physnet1:201:201,physnet2:202:202""\n  network_mappings: ""physnet1:br-ex,physnet2:br-ex2""\n  network_interface_mappings: ""br-ex:bond1,br-ex2:bond1.202""\n\nChange-Id: I51c0212f41df5c740959be037bb0797a9ca45c64\n'}]",0,737375,5e0d367bf61d499aaf235d3cf74f85d6fb833958,12,3,1,26647,,,0,"VLAN tag support for ovs port

When configuring Neutron to support multiple vlan provider networks
and if provider network mapped to vlan tagged interface, ovs port
needs to be created with a tag

For example:
neutron_provider_networks:
  network_types: ""vlan""
  network_vlan_ranges: ""physnet1:201:201,physnet2:202:202""
  network_mappings: ""physnet1:br-ex,physnet2:br-ex2""
  network_interface_mappings: ""br-ex:bond1,br-ex2:bond1.202""

Change-Id: I51c0212f41df5c740959be037bb0797a9ca45c64
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_neutron refs/changes/75/737375/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/providers/ovs_config.yml'],1,5e0d367bf61d499aaf235d3cf74f85d6fb833958,," tag: ""{{ interface_mapping.split(':')[1].split('.')[1] | default(omit) }}""",,1,0
openstack%2Foslo.messaging~master~I25ce9b1c8bf66bbeba7a0f55d836ffb3bd0ac080,openstack/oslo.messaging,master,I25ce9b1c8bf66bbeba7a0f55d836ffb3bd0ac080,Enable the rabbitmq failover test during the RabbitMQ functional test,NEW,2020-07-20 17:56:47.000000000,2020-07-20 19:37:26.000000000,,"[{'_account_id': 8770}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 17:56:47.000000000', 'files': ['oslo_messaging/tests/functional/test_rabbitmq.py', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/1fe9ecf72139d5e3d4ff671f651b89f29c8261c2', 'message': 'Enable the rabbitmq failover test during the RabbitMQ functional test\n\nChange-Id: I25ce9b1c8bf66bbeba7a0f55d836ffb3bd0ac080\nCloses-Bug: #1888281\n'}]",0,741998,1fe9ecf72139d5e3d4ff671f651b89f29c8261c2,3,2,1,8770,,,0,"Enable the rabbitmq failover test during the RabbitMQ functional test

Change-Id: I25ce9b1c8bf66bbeba7a0f55d836ffb3bd0ac080
Closes-Bug: #1888281
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/98/741998/1 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_messaging/tests/functional/test_rabbitmq.py', 'tox.ini']",2,1fe9ecf72139d5e3d4ff671f651b89f29c8261c2,bug/1888281, RABBIT_FAILOVER_TEST=1,,3,6
openstack%2Ftripleo-ansible~stable%2Fussuri~Ib2524cf97f97693d7d03c1bb4fb1c2bde40d3bec,openstack/tripleo-ansible,stable/ussuri,Ib2524cf97f97693d7d03c1bb4fb1c2bde40d3bec,Install osc-placement package during client package installation,MERGED,2020-07-06 07:23:54.000000000,2020-07-20 19:07:46.000000000,2020-07-20 19:07:46.000000000,"[{'_account_id': 3153}, {'_account_id': 9816}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-06 07:23:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/e9203024d3a97ce042ccc9ff637d0831e3b9c466', 'message': 'Install osc-placement package during client package installation\n\nThis patch makes osc-placmeent package installed as a part of client\npackages, because this package is required to manage resources in\nplacement service.\n\nChange-Id: Ib2524cf97f97693d7d03c1bb4fb1c2bde40d3bec\n(cherry picked from commit 8f758e5e4ffc9cbca2b979f730da0fa2cd461057)\n'}, {'number': 2, 'created': '2020-07-06 11:01:12.000000000', 'files': ['tripleo_ansible/roles/tripleo_clients_install/molecule/default/converge.yml', 'tripleo_ansible/roles/tripleo_clients_install/tasks/main.yml', 'tripleo_ansible/roles/tripleo_clients_install/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/80e0bf2e1fa3ab91f58601b0f15d1852b490821c', 'message': 'Install osc-placement package during client package installation\n\nThis patch makes osc-placmeent package installed as a part of client\npackages, because this package is required to manage resources in\nplacement service.\n\nChange-Id: Ib2524cf97f97693d7d03c1bb4fb1c2bde40d3bec\n(cherry picked from commit 8f758e5e4ffc9cbca2b979f730da0fa2cd461057)\n'}]",0,739417,80e0bf2e1fa3ab91f58601b0f15d1852b490821c,13,5,2,9816,,,0,"Install osc-placement package during client package installation

This patch makes osc-placmeent package installed as a part of client
packages, because this package is required to manage resources in
placement service.

Change-Id: Ib2524cf97f97693d7d03c1bb4fb1c2bde40d3bec
(cherry picked from commit 8f758e5e4ffc9cbca2b979f730da0fa2cd461057)
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/17/739417/2 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/roles/tripleo_clients_install/molecule/default/converge.yml', 'tripleo_ansible/roles/tripleo_clients_install/defaults/main.yml', 'tripleo_ansible/roles/tripleo_clients_install/tasks/main.yml']",3,e9203024d3a97ce042ccc9ff637d0831e3b9c466,, {% set pkg_name = tripleo_clients_install_python_prefix ~ '-' ~ k %}, {% set pkg_name = tripleo_clients_install_python_prefix ~ '-' ~ k ~ 'client' %},23,21
openstack%2Ftripleo-ansible~master~I3da2e72383787f96bf4d930e416b8fb5c0a4ff72,openstack/tripleo-ansible,master,I3da2e72383787f96bf4d930e416b8fb5c0a4ff72,Capture metalsmith python logging,MERGED,2020-07-13 01:22:23.000000000,2020-07-20 19:05:31.000000000,2020-07-20 19:05:31.000000000,"[{'_account_id': 3153}, {'_account_id': 4571}, {'_account_id': 6926}, {'_account_id': 7353}, {'_account_id': 10969}, {'_account_id': 14985}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 28223}]","[{'number': 1, 'created': '2020-07-13 01:22:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9d9c770221a038747eeeea59da43a6f24a8f4c7c', 'message': ""Capture metalsmith python logging\n\nThe metalsmith_instances module calls into metalsmith and there is\ncurrently no logging mechanism to see what is happening. This change\nis an attempt to improve this by configuring logging and adding the\noutput to the result dict as 'logging'.\n\nChange-Id: I3da2e72383787f96bf4d930e416b8fb5c0a4ff72\nRelated-Bug: #1879472\n""}, {'number': 2, 'created': '2020-07-13 02:57:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/9770190e62e4432d193467ed4fa267b484d8e04c', 'message': ""Capture metalsmith python logging\n\nThe metalsmith_instances module calls into metalsmith and there is\ncurrently no logging mechanism to see what is happening. This change\nis an attempt to improve this by configuring logging and adding the\noutput to the result dict as 'logging'.\n\nChange-Id: I3da2e72383787f96bf4d930e416b8fb5c0a4ff72\nRelated-Bug: #1879472\n""}, {'number': 3, 'created': '2020-07-13 20:38:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/0e8862064e23bf74bd06c75fa70230ab519b545c', 'message': ""Capture metalsmith python logging\n\nThe metalsmith_instances module calls into metalsmith and there is\ncurrently no logging mechanism to see what is happening. This change\nis an attempt to improve this by configuring logging and adding the\noutput to the result dict as 'logging'.\n\nChange-Id: I3da2e72383787f96bf4d930e416b8fb5c0a4ff72\nRelated-Bug: #1879472\n""}, {'number': 4, 'created': '2020-07-15 22:56:01.000000000', 'files': ['tripleo_ansible/ansible_plugins/modules/metalsmith_instances.py', 'tripleo_ansible/playbooks/cli-overcloud-node-provision.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/3ba91a22a4167790b9c723d21fdf5f5d94dd6443', 'message': ""Capture metalsmith python logging\n\nThe metalsmith_instances module calls into metalsmith and there is\ncurrently no logging mechanism to see what is happening. This change\nis an attempt to improve this by configuring logging and adding the\noutput to the result dict as 'logging'.\n\nChange-Id: I3da2e72383787f96bf4d930e416b8fb5c0a4ff72\nRelated-Bug: #1879472\n""}]",7,740606,3ba91a22a4167790b9c723d21fdf5f5d94dd6443,22,9,4,4571,,,0,"Capture metalsmith python logging

The metalsmith_instances module calls into metalsmith and there is
currently no logging mechanism to see what is happening. This change
is an attempt to improve this by configuring logging and adding the
output to the result dict as 'logging'.

Change-Id: I3da2e72383787f96bf4d930e416b8fb5c0a4ff72
Related-Bug: #1879472
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/06/740606/2 && git format-patch -1 --stdout FETCH_HEAD,"['tripleo_ansible/ansible_plugins/modules/metalsmith_instances.py', 'tripleo_ansible/playbooks/cli-overcloud-node-provision.yaml']",2,9d9c770221a038747eeeea59da43a6f24a8f4c7c,bug/1879472, - name: Metalsmith log for reserve instances debug: var: baremetal_reserved.logging - name: Metalsmith log for provision instances debug: var: baremetal_provisioned.logging ,,83,35
openstack%2Fswift~master~I13de27674c81977c2470d43bbb2126ecc4bdd85a,openstack/swift,master,I13de27674c81977c2470d43bbb2126ecc4bdd85a,docs: Improve replication-network remakerings,MERGED,2020-07-16 23:38:59.000000000,2020-07-20 18:57:19.000000000,2020-07-20 18:54:35.000000000,"[{'_account_id': 1179}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-16 23:38:59.000000000', 'files': ['doc/source/replication_network.rst'], 'web_link': 'https://opendev.org/openstack/swift/commit/c31e30ec2f1abd7b21d2e94b3bcf21d9f84888b0', 'message': 'docs: Improve replication-network remakerings\n\nLower the part-power -- 18 is way higher than is needed for a dev\nenvironment.\n\nAdd commands for reduced-redundancy and erasure-coded storage policies.\n\nRelated-Change: Ibe46011d8e6a6482d39b3a20ac9c091d9fbc6ef7\nRelated-Change: I6f11f7a1bdaa6f3defb3baa56a820050e5f727f1\nRelated-Change: I0403016a4bb7dad9535891632753b0e5e9d402eb\nChange-Id: I13de27674c81977c2470d43bbb2126ecc4bdd85a\n'}]",0,741559,c31e30ec2f1abd7b21d2e94b3bcf21d9f84888b0,7,2,1,15343,,,0,"docs: Improve replication-network remakerings

Lower the part-power -- 18 is way higher than is needed for a dev
environment.

Add commands for reduced-redundancy and erasure-coded storage policies.

Related-Change: Ibe46011d8e6a6482d39b3a20ac9c091d9fbc6ef7
Related-Change: I6f11f7a1bdaa6f3defb3baa56a820050e5f727f1
Related-Change: I0403016a4bb7dad9535891632753b0e5e9d402eb
Change-Id: I13de27674c81977c2470d43bbb2126ecc4bdd85a
",git fetch https://review.opendev.org/openstack/swift refs/changes/59/741559/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/replication_network.rst'],1,c31e30ec2f1abd7b21d2e94b3bcf21d9f84888b0,,"#. Create new script in ``~/bin/`` (for example: ``remakerings_new``):: set -e swift-ring-builder object.builder create 10 3 1 swift-ring-builder object-1.builder create 10 2 1 swift-ring-builder object-1.builder add z1-127.0.0.1:6010R127.0.0.1:6050/sdb1 1 swift-ring-builder object-1.builder add z2-127.0.0.1:6020R127.0.0.1:6060/sdb2 1 swift-ring-builder object-1.builder add z3-127.0.0.1:6030R127.0.0.1:6070/sdb3 1 swift-ring-builder object-1.builder add z4-127.0.0.1:6040R127.0.0.1:6080/sdb4 1 swift-ring-builder object-1.builder rebalance swift-ring-builder object-2.builder create 10 6 1 swift-ring-builder object-2.builder add z1-127.0.0.1:6010R127.0.0.1:6050/sdb1 1 swift-ring-builder object-2.builder add z1-127.0.0.1:6010R127.0.0.1:6050/sdb5 1 swift-ring-builder object-2.builder add z2-127.0.0.1:6020R127.0.0.1:6060/sdb2 1 swift-ring-builder object-2.builder add z2-127.0.0.1:6020R127.0.0.1:6060/sdb6 1 swift-ring-builder object-2.builder add z3-127.0.0.1:6030R127.0.0.1:6070/sdb3 1 swift-ring-builder object-2.builder add z3-127.0.0.1:6030R127.0.0.1:6070/sdb7 1 swift-ring-builder object-2.builder add z4-127.0.0.1:6040R127.0.0.1:6080/sdb4 1 swift-ring-builder object-2.builder add z4-127.0.0.1:6040R127.0.0.1:6080/sdb8 1 swift-ring-builder object-2.builder rebalance swift-ring-builder container.builder create 10 3 1 swift-ring-builder account.builder create 10 3 1 Syntax of adding device has been changed: ``R<ip_replication>:<port_replication>`` was added between ``z<zone>-<ip>:<port>`` and ``/<device_name>_<meta> <weight>``. Added devices will use <ip_replication> and <port_replication> for replication activities. #. Add next rows in ``/etc/rsyncd.conf``::#. Update configuration files in directories: delete all configuration options in section ``[<*>-replicator]`` #. Add configuration files for object-server, in ``/etc/swift/object-server/``#. Add configuration files for container-server, in ``/etc/swift/container-server/``#. Add configuration files for account-server, in ``/etc/swift/account-server/``","#. Create new script in ~/bin/ (for example: remakerings_new):: swift-ring-builder object.builder create 18 3 1 swift-ring-builder container.builder create 18 3 1 swift-ring-builder account.builder create 18 3 1 Syntax of adding device has been changed: R<ip_replication>:<port_replication> was added between z<zone>-<ip>:<port> and /<device_name>_<meta> <weight>. Added devices will use <ip_replication> and <port_replication> for replication activities. #. Add next rows in /etc/rsyncd.conf::#. Add changes in configuration files in directories: delete all configuration options in section [<*>-replicator] #. Add configuration files for object-server, in /etc/swift/object-server/#. Add configuration files for container-server, in /etc/swift/container-server/#. Add configuration files for account-server, in /etc/swift/account-server/",30,11
openstack%2Ftripleo-heat-templates~master~Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529,openstack/tripleo-heat-templates,master,Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529,Remove /run from some services,MERGED,2020-07-08 11:05:17.000000000,2020-07-20 18:55:33.000000000,2020-07-13 04:02:10.000000000,"[{'_account_id': 3153}, {'_account_id': 6926}, {'_account_id': 6968}, {'_account_id': 20172}, {'_account_id': 21909}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 23811}, {'_account_id': 28223}]","[{'number': 1, 'created': '2020-07-08 11:05:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/01ee716174cc84b3960296ff9bda0e26060a9a82', 'message': 'WIP Remove /run from some services\n\nThese services do not need /run bind mounted from the host.\n\nExplanation + History + testing results here\n\nChange-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529\nRelated-Bug: #1883849\n'}, {'number': 2, 'created': '2020-07-08 20:05:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/592cfe7159d00c6d751a8d13959a599d5ad0e3be', 'message': 'Remove /run from some services\n\nredis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind\nmounted from the host.  As a matter of fact bind-mounting /run is\nproblematic due to a number of reasons (see LP#1883849 for more\nbackground). In particular swift-proxy is the only swift container\n(out of 9) that has /run bind-mounted.\n\nThese three services always had /run from the very beginning:\n- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f\n- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456\n- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94\n\nTested this by applying this patch on a train deployment and\ndeployed an undercloud and an overcloud with it.\nVerified that:\nA) /run:/run is not present in the three containers\nB) Deploy of UC and OC worked correctly\nC) Tempest still works\nD) Restarting the swift_proxy and nova_scheduler works correctly\nE) Reboot the overcloud worked okay and tempest still works after the\n   full overcloud reboot\nF) Ran a minor UC update\nG) Ran a minor update on all nodes and tempest still worked\nH) Ran a redeploy on all nodes and tempest still worked\n\nNB: I did not investigate other containers that bind mount /run\nbecause they 1) seem to need it and 2) had no means to do proper\ntesting.\n\nNB2: Note that while once we rebuild containers with\nI81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not\nstrictly needed for the LP bug, but is a nice cleanup nonetheless.\nSo this is to be backported only if rebuilding containers is\na problematic/costly move\n\nChange-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529\nRelated-Bug: #1883849\n'}, {'number': 3, 'created': '2020-07-10 10:33:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/5d5a8dff8aa3527bac662c8662121ae10176ce92', 'message': 'Remove /run from some services\n\nredis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind\nmounted from the host.  As a matter of fact bind-mounting /run is\nproblematic due to a number of reasons (see LP#1883849 for more\nbackground). In particular swift-proxy is the only swift container\n(out of 9) that has /run bind-mounted.\n\nThese three services always had /run from the very beginning:\n- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f\n- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456\n- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94\n\nTested this by applying this patch on a train deployment and\ndeployed an undercloud and an overcloud with it.\nVerified that:\nA) /run:/run is not present in the three containers\nB) Deploy of UC and OC worked correctly\nC) Tempest still works\nD) Restarting the swift_proxy and nova_scheduler works correctly\nE) Reboot the overcloud worked okay and tempest still works after the\n   full overcloud reboot\nF) Ran a minor UC update\nG) Ran a minor update on all nodes and tempest still worked\nH) Ran a redeploy on all nodes and tempest still worked\n\nNB: I did not investigate other containers that bind mount /run\nbecause they 1) seem to need it and 2) had no means to do proper\ntesting.\n\nNB2: Note that while once we rebuild containers with\nI81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not\nstrictly needed for the LP bug, but is a nice cleanup nonetheless.\nSo this is to be backported only if rebuilding containers is\na problematic/costly move\n\nChange-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529\nRelated-Bug: #1883849\n'}, {'number': 4, 'created': '2020-07-11 07:03:24.000000000', 'files': ['deployment/database/redis-container-puppet.yaml', 'deployment/swift/swift-proxy-container-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/bd4b57c2690e7e341691bcf4e3aa15af36978936', 'message': 'Remove /run from some services\n\nredis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind\nmounted from the host.  As a matter of fact bind-mounting /run is\nproblematic due to a number of reasons (see LP#1883849 for more\nbackground). In particular swift-proxy is the only swift container\n(out of 9) that has /run bind-mounted.\n\nThese three services always had /run from the very beginning:\n- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f\n- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456\n- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94\n\nTested this by applying this patch on a train deployment and\ndeployed an undercloud and an overcloud with it.\nVerified that:\nA) /run:/run is not present in the three containers\nB) Deploy of UC and OC worked correctly\nC) Tempest still works\nD) Restarting the swift_proxy and nova_scheduler works correctly\nE) Reboot the overcloud worked okay and tempest still works after the\n   full overcloud reboot\nF) Ran a minor UC update\nG) Ran a minor update on all nodes and tempest still worked\nH) Ran a redeploy on all nodes and tempest still worked\n\nNB: I did not investigate other containers that bind mount /run\nbecause they 1) seem to need it and 2) had no means to do proper\ntesting.\n\nNB2: Note that while once we rebuild containers with\nI81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not\nstrictly needed for the LP bug, but is a nice cleanup nonetheless.\nSo this is to be backported only if rebuilding containers is\na problematic/costly move\n\nChange-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529\nRelated-Bug: #1883849\n'}]",0,739950,bd4b57c2690e7e341691bcf4e3aa15af36978936,22,9,4,20172,,,0,"Remove /run from some services

redis(non-pcmk), nova-scheduler and swift-proxy do not need /run bind
mounted from the host.  As a matter of fact bind-mounting /run is
problematic due to a number of reasons (see LP#1883849 for more
background). In particular swift-proxy is the only swift container
(out of 9) that has /run bind-mounted.

These three services always had /run from the very beginning:
- redis -> Ie750caa34c6fa22ca6eae6834b9ca20e15d97f7f
- nova-scheduler -> I39436783409ed752b08619b07b0a0c592bce0456
- swift-proxy -> I2d96514fb7aa51dffe8fe293bc950e0e99df5e94

Tested this by applying this patch on a train deployment and
deployed an undercloud and an overcloud with it.
Verified that:
A) /run:/run is not present in the three containers
B) Deploy of UC and OC worked correctly
C) Tempest still works
D) Restarting the swift_proxy and nova_scheduler works correctly
E) Reboot the overcloud worked okay and tempest still works after the
   full overcloud reboot
F) Ran a minor UC update
G) Ran a minor update on all nodes and tempest still worked
H) Ran a redeploy on all nodes and tempest still worked

NB: I did not investigate other containers that bind mount /run
because they 1) seem to need it and 2) had no means to do proper
testing.

NB2: Note that while once we rebuild containers with
I81e5b7abf4571fece13a029e25911e9e4dece673 this change here is not
strictly needed for the LP bug, but is a nice cleanup nonetheless.
So this is to be backported only if rebuilding containers is
a problematic/costly move

Change-Id: Ic1a892a7f78a54b5e149f5ce52cb9db68ebc9529
Related-Bug: #1883849
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/50/739950/4 && git format-patch -1 --stdout FETCH_HEAD,"['deployment/database/redis-container-puppet.yaml', 'deployment/nova/nova-scheduler-container-puppet.yaml', 'deployment/swift/swift-proxy-container-puppet.yaml']",3,01ee716174cc84b3960296ff9bda0e26060a9a82,prune-run,, - /run:/run,0,3
openstack%2Fneutron~stable%2Fqueens~I1b6154b9433a9442d3e0118dedfa01c4a9b4740b,openstack/neutron,stable/queens,I1b6154b9433a9442d3e0118dedfa01c4a9b4740b,Don't add arp responder for non tunnel network port,MERGED,2020-07-18 05:45:49.000000000,2020-07-20 18:54:33.000000000,2020-07-20 18:54:33.000000000,"[{'_account_id': 1131}, {'_account_id': 19956}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-18 05:45:49.000000000', 'files': ['neutron/plugins/ml2/drivers/l2pop/mech_driver.py', 'neutron/tests/unit/plugins/ml2/drivers/l2pop/test_mech_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/585ae323d2dc9dd2f196b5ce087010fd3f9f3d51', 'message': ""Don't add arp responder for non tunnel network port\n\nWhen the vlan and vxlan both exist in env, and l2population\nand arp_responder are enabled, if we update a port's ip address\nfrom vlan network, there will be arp responder related flows\nadded into br-tun, this will cause too many arp reply for\none arp request, and vm connections will be unnormal.\n\nCloses-Bug: #1824504\nChange-Id: I1b6154b9433a9442d3e0118dedfa01c4a9b4740b\n(cherry picked from commit 5301ecf41b18e83abdc3c828cd64ce0111f9fcd1)\n""}]",0,741798,585ae323d2dc9dd2f196b5ce087010fd3f9f3d51,7,4,1,29071,,,0,"Don't add arp responder for non tunnel network port

When the vlan and vxlan both exist in env, and l2population
and arp_responder are enabled, if we update a port's ip address
from vlan network, there will be arp responder related flows
added into br-tun, this will cause too many arp reply for
one arp request, and vm connections will be unnormal.

Closes-Bug: #1824504
Change-Id: I1b6154b9433a9442d3e0118dedfa01c4a9b4740b
(cherry picked from commit 5301ecf41b18e83abdc3c828cd64ce0111f9fcd1)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/98/741798/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/plugins/ml2/drivers/l2pop/mech_driver.py', 'neutron/tests/unit/plugins/ml2/drivers/l2pop/test_mech_driver.py']",2,585ae323d2dc9dd2f196b5ce087010fd3f9f3d51,bug/1824504-stable/queens," def test_fixed_ips_changed_vlan(self): self._register_ml2_agents() with self.subnet(network=self._network2) as subnet: host_arg = {portbindings.HOST_ID: HOST} fixed_ips = [{'subnet_id': subnet['subnet']['id'], 'ip_address': '10.0.0.2'}] with self.port(subnet=subnet, cidr='10.0.0.0/24', device_owner=DEVICE_OWNER_COMPUTE, arg_list=(portbindings.HOST_ID,), fixed_ips=fixed_ips, **host_arg) as port: p = port['port'] device = 'tap' + p['id'] self.callbacks.update_device_up(self.adminContext, agent_id=HOST, device=device) data = {'port': {'fixed_ips': [{'ip_address': '10.0.0.2'}, {'ip_address': '10.0.0.10'}]}} self.new_update_request('ports', data, p['id']) l2pop_mech = l2pop_mech_driver.L2populationMechanismDriver() l2pop_mech.L2PopulationAgentNotify = mock.Mock() l2notify = l2pop_mech.L2PopulationAgentNotify l2notify.update_fdb_entries = mock.Mock() self.assertFalse(l2notify.update_fdb_entries.called) ",,36,0
openstack%2Fcharm-nova-lxd~master~Ibf02186ea5977839e16fe03a3267fe92b84d83b9,openstack/charm-nova-lxd,master,Ibf02186ea5977839e16fe03a3267fe92b84d83b9,Remove disco support from the charm,ABANDONED,2020-02-18 15:40:40.000000000,2020-07-20 18:41:23.000000000,,"[{'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-02-18 15:40:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/5c84d88d733c5594107c634527a1a4fc12056946', 'message': 'Remove disco support from the charm\n\nAnd clean up the cosmic test and remove it as well.\n\nChange-Id: Ibf02186ea5977839e16fe03a3267fe92b84d83b9\n'}, {'number': 2, 'created': '2020-02-20 12:13:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/e5b5f23b0632c2a846904be6d12d59c652aefaa9', 'message': 'Remove disco support from the charm\n\nAnd clean up the cosmic test and remove it as well.\nAlso pin setuptools < 45 as version 45 onwards drops support for\nPython 2.7\n\nChange-Id: Ibf02186ea5977839e16fe03a3267fe92b84d83b9\n'}, {'number': 3, 'created': '2020-02-20 12:33:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/1386c2c185973bf071abd2f0ccd2bcc42837d8ee', 'message': 'Remove disco support from the charm\n\n* Remove the disco test artifacts\n* Remove the cosmic test artifacts\n* pin setuptools < 45 as version 45 onwards drops support for\n  Python 2.7\n* pin python-cinderclient < 3.1.1 to keep v1 client.\n\nChange-Id: Ibf02186ea5977839e16fe03a3267fe92b84d83b9\n'}, {'number': 4, 'created': '2020-02-20 12:57:20.000000000', 'files': ['requirements.txt', '.gitreview', 'test-requirements.txt', 'tests/dev-basic-disco-stein', 'tests/dev-basic-cosmic-rocky', 'metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-nova-lxd/commit/d0d502d824de059e6805a71b9b7a9603bd9b1178', 'message': 'Remove disco support from the charm\n\n* Remove the disco test artifacts\n* Remove the cosmic test artifacts\n* pin setuptools < 45 as version 45 onwards drops support for\n  Python 2.7\n* pin python-cinderclient < 3.1.1 to keep v1 client.\n* pin keyring < 19.0.0 to keep py27 support\n\nChange-Id: Ibf02186ea5977839e16fe03a3267fe92b84d83b9\n'}]",0,708422,d0d502d824de059e6805a71b9b7a9603bd9b1178,12,2,4,20870,,,0,"Remove disco support from the charm

* Remove the disco test artifacts
* Remove the cosmic test artifacts
* pin setuptools < 45 as version 45 onwards drops support for
  Python 2.7
* pin python-cinderclient < 3.1.1 to keep v1 client.
* pin keyring < 19.0.0 to keep py27 support

Change-Id: Ibf02186ea5977839e16fe03a3267fe92b84d83b9
",git fetch https://review.opendev.org/openstack/charm-nova-lxd refs/changes/22/708422/4 && git format-patch -1 --stdout FETCH_HEAD,"['.gitreview', 'tests/dev-basic-disco-stein', 'tests/dev-basic-cosmic-rocky', 'metadata.yaml']",4,5c84d88d733c5594107c634527a1a4fc12056946,de-disco,, - cosmic - disco,1,53
openstack%2Fcharm-aodh~master~Iba5c5474335a9547341e25c930f98d7760cf34c9,openstack/charm-aodh,master,Iba5c5474335a9547341e25c930f98d7760cf34c9,WIP - Fix charm to make more efficient use of handlers,ABANDONED,2019-08-10 15:56:01.000000000,2020-07-20 18:40:35.000000000,,"[{'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-10 15:56:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-aodh/commit/841f3fe188590efb2dcd6bd69363e816c0eceafa', 'message': ""WIP - Fix charm to make more efficient use of handlers\n\nWARNING - tests aren't quite ready, and this is fairly old (2017).  I\nstill think the changes are valid, but the tests still need some work.\n\ncharms.reactive is slightly 'odd' feature that ANY handler can run\nduring any hook.  The handlers in aodh didn't have guards which meant\nthat various setup actions that occured on relation connections ran on\nevery hook thereafter, including update-status.  This led to undesirable\nbehaviour such as (probably) restarting the services every 5 minutes.\n\nThis patch changes that by adding guard states so that configuration is\nonly performed once, but can be performed again if an interface\ndisconnects and reconnects.  It DOESN'T track if the data on an\ninterface changes, but for the interfaces used, this shouldn't be an\nissue.\n\nIt also takes advantage of some changes to charms.openstack to support\ncentralised mocking for test cases.\n\nChange-Id: Iba5c5474335a9547341e25c930f98d7760cf34c9\nDepends-On: I5ac40617ee30e5f421ec16fc7592177a5e6aa166\n""}, {'number': 2, 'created': '2019-08-20 13:37:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-aodh/commit/c9f17cd0039018abb8a01f3423ade18855eac21f', 'message': ""WIP - Fix charm to make more efficient use of handlers\n\nWARNING - tests aren't quite ready, and this is fairly old (2017).  I\nstill think the changes are valid, but the tests still need some work.\n\ncharms.reactive is slightly 'odd' feature that ANY handler can run\nduring any hook.  The handlers in aodh didn't have guards which meant\nthat various setup actions that occured on relation connections ran on\nevery hook thereafter, including update-status.  This led to undesirable\nbehaviour such as (probably) restarting the services every 5 minutes.\n\nThis patch changes that by adding guard states so that configuration is\nonly performed once, but can be performed again if an interface\ndisconnects and reconnects.  It DOESN'T track if the data on an\ninterface changes, but for the interfaces used, this shouldn't be an\nissue.\n\nIt also takes advantage of some changes to charms.openstack to support\ncentralised mocking for test cases.\n\nChange-Id: Iba5c5474335a9547341e25c930f98d7760cf34c9\nDepends-On: I5ac40617ee30e5f421ec16fc7592177a5e6aa166\n""}, {'number': 3, 'created': '2019-11-22 17:03:12.000000000', 'files': ['src/lib/charm/openstack/aodh.py', 'unit_tests/test_aodh_handlers.py', 'src/reactive/aodh_handlers.py'], 'web_link': 'https://opendev.org/openstack/charm-aodh/commit/5de8f2e1d75ff8984f9c98e169f9a7ba76ff1480', 'message': ""WIP - Fix charm to make more efficient use of handlers\n\nWARNING - tests aren't quite ready, and this is fairly old (2017).  I\nstill think the changes are valid, but the tests still need some work.\n\ncharms.reactive is slightly 'odd' feature that ANY handler can run\nduring any hook.  The handlers in aodh didn't have guards which meant\nthat various setup actions that occured on relation connections ran on\nevery hook thereafter, including update-status.  This led to undesirable\nbehaviour such as (probably) restarting the services every 5 minutes.\n\nThis patch changes that by adding guard states so that configuration is\nonly performed once, but can be performed again if an interface\ndisconnects and reconnects.  It DOESN'T track if the data on an\ninterface changes, but for the interfaces used, this shouldn't be an\nissue.\n\nIt also takes advantage of some changes to charms.openstack to support\ncentralised mocking for test cases.\n\nChange-Id: Iba5c5474335a9547341e25c930f98d7760cf34c9\nDepends-On: I5ac40617ee30e5f421ec16fc7592177a5e6aa166\n""}]",0,675736,5de8f2e1d75ff8984f9c98e169f9a7ba76ff1480,11,3,3,20870,,,0,"WIP - Fix charm to make more efficient use of handlers

WARNING - tests aren't quite ready, and this is fairly old (2017).  I
still think the changes are valid, but the tests still need some work.

charms.reactive is slightly 'odd' feature that ANY handler can run
during any hook.  The handlers in aodh didn't have guards which meant
that various setup actions that occured on relation connections ran on
every hook thereafter, including update-status.  This led to undesirable
behaviour such as (probably) restarting the services every 5 minutes.

This patch changes that by adding guard states so that configuration is
only performed once, but can be performed again if an interface
disconnects and reconnects.  It DOESN'T track if the data on an
interface changes, but for the interfaces used, this shouldn't be an
issue.

It also takes advantage of some changes to charms.openstack to support
centralised mocking for test cases.

Change-Id: Iba5c5474335a9547341e25c930f98d7760cf34c9
Depends-On: I5ac40617ee30e5f421ec16fc7592177a5e6aa166
",git fetch https://review.opendev.org/openstack/charm-aodh refs/changes/36/675736/1 && git format-patch -1 --stdout FETCH_HEAD,"['src/lib/charm/openstack/aodh.py', 'tox.ini', 'unit_tests/test_aodh_handlers.py', 'src/reactive/aodh_handlers.py']",4,841f3fe188590efb2dcd6bd69363e816c0eceafa,single-run-handlers,@reactive.when_not('setup_amqp_req_done') reactive.set_state('setup_amqp_req_done')@reactive.when_not('amqp.connected') @reactive.when('setup_amqp_req_done') def clear_setup_amqp_req_done(): reactive.remove_state('setup_amqp_req_done') @reactive.when_not('setup_database_done') reactive.set_state('setup_database_done')@reactive.when_not('shared-db.connected') @reactive.when('setup_database_done') def clear_setup_database_done(): reactive.remove_state('setup_database_done') @reactive.when_not('setup_endpoint_done') reactive.set_state('setup_endpoint_done')@reactive.when_not('identity-service.connected') @reactive.when('setup_endpoint_done') def clear_setup_endpoint_done(): reactive.remove_state('setup_endpoint_done') @reactive.when_not('config.complete')@reactive.when_not('config.complete')@reactive.when_not_all(*MINIMAL_INTERFACES) @reactive.when('config.complete') def clear_config_complete(*args): reactive.remove_state('config.complete') @reactive.when('config.changed') def clear_config_complate_when_changed(): reactive.remove_state('config.complete') @reactive.when_not('cluster_connected_done') reactive.set_state('cluster_connected_done') @reactive.when_not('ha.connected') @reactive.when('cluster_connected_done') def clear_cluster_connected_done(): reactive.remove_state('cluster_connected_done') @reactive.hook('upgrade-charm') def upgrade_charm(): reactive.remove_state('db.synced') reactive.remove_state('config.complete') aodh.install(),,68,6
openstack%2Fcharm-barbican~master~Ic1eee5f75e2875458bf8cdf92ce0ec14418747cb,openstack/charm-barbican,master,Ic1eee5f75e2875458bf8cdf92ce0ec14418747cb,WIP - fix-from-state - probably not needed,ABANDONED,2019-08-10 15:58:53.000000000,2020-07-20 18:39:57.000000000,,"[{'_account_id': 935}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2019-08-10 15:58:53.000000000', 'files': ['src/actions/actions.py'], 'web_link': 'https://opendev.org/openstack/charm-barbican/commit/d0658740e26e07e6101fb7fa10ce3e3011aa6cb0', 'message': 'WIP - fix-from-state - probably not needed\n\nChange-Id: Ic1eee5f75e2875458bf8cdf92ce0ec14418747cb\n'}]",0,675737,d0658740e26e07e6101fb7fa10ce3e3011aa6cb0,5,3,1,20870,,,0,"WIP - fix-from-state - probably not needed

Change-Id: Ic1eee5f75e2875458bf8cdf92ce0ec14418747cb
",git fetch https://review.opendev.org/openstack/charm-barbican refs/changes/37/675737/1 && git format-patch -1 --stdout FETCH_HEAD,['src/actions/actions.py'],1,d0658740e26e07e6101fb7fa10ce3e3011aa6cb0,fix-from-state,# import charms.reactive as reactive import charms.reactive.relations as relations # hsm = reactive.RelationBase.from_state('hsm.available') hsm = relations.endpoint_from_flag('hsm.available') # hsm = reactive.RelationBase.from_state('hsm.available') hsm = relations.endpoint_from_flag('hsm.available'),import charms.reactive as reactive hsm = reactive.RelationBase.from_state('hsm.available') hsm = reactive.RelationBase.from_state('hsm.available'),6,3
openstack%2Fcharm-guide~master~Iff155ef53eb9dcdce336e53c9fa4ed6e50ab3683,openstack/charm-guide,master,Iff155ef53eb9dcdce336e53c9fa4ed6e50ab3683,WIP - NO NEED FOR REVIEW YET - Software Engineering Guidelines,NEW,2019-08-10 17:05:49.000000000,2020-07-20 18:38:54.000000000,,"[{'_account_id': 935}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 30561}]","[{'number': 1, 'created': '2019-08-10 17:05:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/fd53ca408296e1679b48f0ce5e8647e85b0525b9', 'message': 'WIP - software engineering guidelines\n\nChange-Id: Iff155ef53eb9dcdce336e53c9fa4ed6e50ab3683\n'}, {'number': 2, 'created': '2019-10-10 09:03:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/aef29570fbb4d07fe0d433be5633c11ce2625074', 'message': 'WIP - NO NEED FOR REVIEW YET - Software Engineering Guidelines\n\nChange-Id: Iff155ef53eb9dcdce336e53c9fa4ed6e50ab3683\n'}, {'number': 3, 'created': '2019-10-10 15:39:45.000000000', 'files': ['doc/source/coding-guidelines.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/1031d1cb06bc5a01f814dab6d92bf1e3d50507b9', 'message': 'WIP - NO NEED FOR REVIEW YET - Software Engineering Guidelines\n\nChange-Id: Iff155ef53eb9dcdce336e53c9fa4ed6e50ab3683\n'}]",11,675739,1031d1cb06bc5a01f814dab6d92bf1e3d50507b9,12,4,3,20870,,,0,"WIP - NO NEED FOR REVIEW YET - Software Engineering Guidelines

Change-Id: Iff155ef53eb9dcdce336e53c9fa4ed6e50ab3683
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/39/675739/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/coding-guidelines.rst'],1,fd53ca408296e1679b48f0ce5e8647e85b0525b9,software-engineering-guidelines,".. note:: This is an evolving page and we update it fairly frequently as the whole team reflects on the practice of writing Openstack charms. Please do check back frequently as some of the advice may have changed! This page is split into the following sections: * Software Engineering Guidelines - a recap of software practices that particularly apply when writing charms. * Topics - various *best practices* that we have evolved as helping to create charms that are maintainable and easy to understand. Software Engineering Guidelines when writing OpenStack charms ------------------------------------------------------------- Writing **new** OpenStack charms should be done using the `charms.openstack <https://github.com/openstack/charms.openstack>`__ library, as this is the preferred way of creating a new charm. The :ref:`charm_anatomy` section goes into detail about how to do this. Existing charms are written in a more *direct* format, handling the hooks directly and using the `charm-helpers <https://github.com/juju/charm-helpers>`__ library. Books have been written about this Software Engineering, so this section won't try to reinvent the wheel. Instead it will offer some guidelines, and the interested reader should investigate the topics in more detail. The purpose of a charm ~~~~~~~~~~~~~~~~~~~~~~ Charms are essentially *side effect* factories. The whole purpose of a charm is to install and configure the payload software for the lifetime of the system that the charm is a part of. This is because the charm has to *read* the environment, config and relations, make decisions on what to do and configure, and then *write* to the environment. Functions that have *side effects* are harder to unit test, as they require mocks to handle the side effects. Pure functions are easier to test as they are always give the same results for the same set of inputs. Aim for pure functions ~~~~~~~~~~~~~~~~~~~~~~ These will generally be data transformation functions. E.g. taking config and relation data and transforming it into a *context* that can be used to render a configuration file. However, the urge when writing a function like this is to do something like: .. code:: python def some_function(): config = hookenv.config() relation_data = relation_get() # munge conf to ctx return ctx And, *presto*, an impure function with two ""input"" side-effects. To test this, ``hookenv.config()`` and ``relation_get()`` both have to be mocked out, leading to a more complex test. Instead if the function was arranged as: .. code:: python def some_function(config, relation_data): # munge conf to ctx return ctx Now the function is pure. Unit tests require no mocking. Refactoring is easier. Instead, the side-effects are hoisted out of the function. This style of code is known as *dependency injection*, with the purpose being that almost all functions have their dependencies handed to them in the params, and so (most) input side-effects are eliminated. This means that a hook function could be organised as: .. code:: python @hook('some-relation-changed') def some_relation_changed(): config = hookenv.config() relation_data = relation_get() ctx = {} ctx.update(somefunction(config, relation_data)) ctx.update(some_other_function(config, relation_data)) CONFIGS. # this is awkward due to how CONFIGS and contexts work. ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~",---------------------------------------------------------,77,2
openstack%2Fkolla~master~Idb0a675d92bab8b9a0cf5209f0a06e996e96033c,openstack/kolla,master,Idb0a675d92bab8b9a0cf5209f0a06e996e96033c,copy rootwarp files form venv in ironic base,MERGED,2020-07-06 22:52:47.000000000,2020-07-20 18:30:05.000000000,2020-07-20 12:47:31.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23181}]","[{'number': 1, 'created': '2020-07-06 22:52:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/d15f3c0a95edcdf0484de87203c3de8f66964f9e', 'message': '[WIP] copy rootwarp files form venv in ironic base\n\nThis change modifies the ironic base container\nto copy rootwarp filters form the virtual\nevn rather then source code directory. This\nis required because some required filters have\nbeen moved to ironic-lib and are not present in\nthe /ironic dir.\n\nChange-Id: Idb0a675d92bab8b9a0cf5209f0a06e996e96033c\nTODO: file bug and add number and update topic.\n'}, {'number': 2, 'created': '2020-07-07 13:20:30.000000000', 'files': ['docker/ironic/ironic-base/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/b6c7110409a5658de6e4d7d468d55a1d7ad49232', 'message': 'copy rootwarp files form venv in ironic base\n\nThis change modifies the ironic base container\nto copy rootwarp filters from the virtual\nenv rather than the source code directory. This\nis need because some required filters have\nbeen moved to ironic-lib and are not present in\nthe /ironic dir. The rootwrap filters are not\nautomitaclly installed in /etc/... due to kolla\nuse of virtual envs and https://github.com/pypa/wheel/issues/92\n\nCloses-Bug: #1886663\nChange-Id: Idb0a675d92bab8b9a0cf5209f0a06e996e96033c\n'}]",0,739622,b6c7110409a5658de6e4d7d468d55a1d7ad49232,16,4,2,11604,,,0,"copy rootwarp files form venv in ironic base

This change modifies the ironic base container
to copy rootwarp filters from the virtual
env rather than the source code directory. This
is need because some required filters have
been moved to ironic-lib and are not present in
the /ironic dir. The rootwrap filters are not
automitaclly installed in /etc/... due to kolla
use of virtual envs and https://github.com/pypa/wheel/issues/92

Closes-Bug: #1886663
Change-Id: Idb0a675d92bab8b9a0cf5209f0a06e996e96033c
",git fetch https://review.opendev.org/openstack/kolla refs/changes/22/739622/2 && git format-patch -1 --stdout FETCH_HEAD,['docker/ironic/ironic-base/Dockerfile.j2'],1,d15f3c0a95edcdf0484de87203c3de8f66964f9e,bug/1886663, && cp -r /var/lib/kolla/venv/etc/ironic/* /etc/ironic/ \, && cp -r /ironic/etc/ironic/* /etc/ironic/ \,1,1
openstack%2Fmanila~master~I410a10d4b57f6d84e2cda623f3969cc14ca0d50e,openstack/manila,master,I410a10d4b57f6d84e2cda623f3969cc14ca0d50e,Use assertEqual instead of assertItemsEqual,MERGED,2020-07-17 03:20:56.000000000,2020-07-20 18:26:34.000000000,2020-07-20 18:24:36.000000000,"[{'_account_id': 12016}, {'_account_id': 12017}, {'_account_id': 14384}, {'_account_id': 15386}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 25243}, {'_account_id': 29139}, {'_account_id': 30002}]","[{'number': 1, 'created': '2020-07-17 03:20:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/7e7a9e7d1ea0e3aa7b5ba7720074f4bcf339197e', 'message': 'Use assertCountEqual instead of assertItemsEqual\n\nThe assertItemsEqual method has been removed in Python 3.3 [1] but\nit was kept alive by unittest2, imported by testtools. For better\ncompatibility, change to assertCountEqual.\n\n[1] https://bugs.python.org/issue17866\n\nChange-Id: I410a10d4b57f6d84e2cda623f3969cc14ca0d50e\n'}, {'number': 2, 'created': '2020-07-20 01:27:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/20fdb1e6d2500ce1db49432566c19a76877c87c2', 'message': 'Use assertCountEqual instead of assertItemsEqual\n\nThe assertItemsEqual method has been removed in Python 3.3 [1] but\nit was kept alive by unittest2, imported by testtools. For better\ncompatibility, change to assertCountEqual.\n\n[1] https://bugs.python.org/issue17866\n\nChange-Id: I410a10d4b57f6d84e2cda623f3969cc14ca0d50e\n'}, {'number': 3, 'created': '2020-07-20 08:59:24.000000000', 'files': ['manila/tests/share/drivers/netapp/dataontap/cluster_mode/test_performance.py', 'manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'manila/tests/share_group/test_share_group_types.py', 'manila/tests/share/test_share_types.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/ccc4db699a1f2bc0003eba4b4b4144e3ef6f1320', 'message': 'Use assertEqual instead of assertItemsEqual\n\nThe assertItemsEqual method has been removed in Python 3.3 [1] but\nit was kept alive by unittest2, imported by testtools.\n\n[1] https://bugs.python.org/issue17866\n\nChange-Id: I410a10d4b57f6d84e2cda623f3969cc14ca0d50e\n'}]",20,741575,ccc4db699a1f2bc0003eba4b4b4144e3ef6f1320,29,9,3,29139,,,0,"Use assertEqual instead of assertItemsEqual

The assertItemsEqual method has been removed in Python 3.3 [1] but
it was kept alive by unittest2, imported by testtools.

[1] https://bugs.python.org/issue17866

Change-Id: I410a10d4b57f6d84e2cda623f3969cc14ca0d50e
",git fetch https://review.opendev.org/openstack/manila refs/changes/75/741575/3 && git format-patch -1 --stdout FETCH_HEAD,"['manila/tests/share/drivers/netapp/dataontap/cluster_mode/test_performance.py', 'manila/tests/share/drivers/netapp/dataontap/client/test_client_cmode.py', 'manila/tests/share_group/test_share_group_types.py', 'manila/tests/share/test_share_types.py']",4,7e7a9e7d1ea0e3aa7b5ba7720074f4bcf339197e,assertItemsEqual," self.assertCountEqual(share_type, returned_type) self.assertCountEqual(share_type, returned_type) self.assertCountEqual(share_type, returned_type) self.assertCountEqual(expected_return_types, returned_types)"," self.assertItemsEqual(share_type, returned_type) self.assertItemsEqual(share_type, returned_type) self.assertItemsEqual(share_type, returned_type) self.assertItemsEqual(expected_return_types, returned_types)",10,10
openstack%2Fopenstack-helm-infra~master~I3e27d51c055010cff982ddb0951d01ea8adac234,openstack/openstack-helm-infra,master,I3e27d51c055010cff982ddb0951d01ea8adac234,Enable Application Armor to all ceph key-generator pods.,MERGED,2020-07-01 20:37:27.000000000,2020-07-20 18:12:38.000000000,2020-07-20 18:11:03.000000000,"[{'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 20469}, {'_account_id': 21420}, {'_account_id': 22348}, {'_account_id': 28372}, {'_account_id': 29131}, {'_account_id': 29161}, {'_account_id': 29298}, {'_account_id': 30315}, {'_account_id': 30777}, {'_account_id': 30784}]","[{'number': 1, 'created': '2020-07-01 20:37:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/677e274ce1b0d38e7c8445aff28755fb8096df05', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 2, 'created': '2020-07-01 20:39:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/67a0c1336fff3294e5a0b4b0172b6f57584db9d0', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 3, 'created': '2020-07-01 23:39:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/3769f55be448eb1c0c8f2645d8cf3256d9686782', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 4, 'created': '2020-07-02 00:57:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f8d2dd0f8f4045ea6ee5b54f179cf73900b42b4e', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 5, 'created': '2020-07-02 00:58:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e0c72d446768357661bffd91aab41cec479ce9e0', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 6, 'created': '2020-07-13 00:52:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/86a158bc20dd523ed8ce53341f84c68bc4e65f95', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 7, 'created': '2020-07-13 01:22:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/96b4859bed7edd168b646e95ec10e82496361dae', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 8, 'created': '2020-07-13 01:33:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/ba789f5840cf9650d152d944bdcf418de15654c1', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 9, 'created': '2020-07-13 10:28:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/db4848846c2ee6304addf89b0ba1fdcec38dfbf2', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 10, 'created': '2020-07-13 11:15:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/71a082a2f2b0bc6ede8be74510b410b7818a461c', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 11, 'created': '2020-07-13 14:14:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/341f58cf2ae4bd2283fcb9576dc592c8a02e1b51', 'message': '[WIP] ceph-provisioner\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>'}, {'number': 12, 'created': '2020-07-14 15:24:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a9dba6904be383820cb106a96792633c30bdaa62', 'message': 'Enable Apparmor to ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 13, 'created': '2020-07-14 15:24:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d0dbfd829223158227a11a26c88b810196307b96', 'message': 'Enable Apparmor to ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 14, 'created': '2020-07-14 17:22:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/a56066da897656044709bead75a6f179d9e5f976', 'message': 'Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 15, 'created': '2020-07-14 21:36:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e14cfab26da5a51282ce762f64570563ce39baa3', 'message': 'Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 16, 'created': '2020-07-14 21:36:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/51e7441cff4335d1078ed233ca5f53a1f944e87d', 'message': 'Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 17, 'created': '2020-07-15 00:25:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6c81baed79256719e47eb585945e27dce05a4007', 'message': 'Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 18, 'created': '2020-07-15 00:26:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d4fbe5532a269ec92d9d9e583cc98b749d95cb59', 'message': 'Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 19, 'created': '2020-07-15 13:22:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/bba9bfae4f0a9497502a21442afbbb6a557c25bb', 'message': 'Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 20, 'created': '2020-07-15 13:22:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/63d16e611f5ede73e4fadf4e31dbd92459bd6f99', 'message': 'Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 21, 'created': '2020-07-15 13:56:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6dd29594bd45682900f9ebea60ce097f95dccf7a', 'message': '[WIP] Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 22, 'created': '2020-07-15 14:34:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/38545f9a1fd22ab154952a8354a7faef1c9fad32', 'message': '[WIP] Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 23, 'created': '2020-07-15 15:54:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/27deeb65636b98ef79e8f3c8175161e0e6dc4f56', 'message': '[WIP] Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 24, 'created': '2020-07-16 01:09:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/0b0170fa82f0bd6dd4ebd184af25b06cff1ce2e8', 'message': '[WIP] Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 25, 'created': '2020-07-16 01:10:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f99e6967c4668bc53f9394be59feb996fb8e0279', 'message': '[WIP] Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 26, 'created': '2020-07-16 01:11:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e55c2569f9637b0d12ca8469574a9a14bcc974cf', 'message': '[WIP] Enable Apparmor to  init container in ceph-cephfs-client-key-generator.\n\n 1) This takes care of dependent Utility containers under porthole.\n https://review.opendev.org/#/c/740002/\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 27, 'created': '2020-07-16 16:27:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/f5c77c697a6aaf831ad412f307fee7c3c856f145', 'message': 'Enable Application armor to all ceph key-generator pods.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 28, 'created': '2020-07-16 17:31:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/e9c7f4695523ce611fa690c5c8c42e98c6e9bf67', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1)Changed the container name to static so that it appends\n apparmor for mon,mgr,mds and osd.\n\n 2)Added Init container for ceph-provisioners.\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 29, 'created': '2020-07-16 22:41:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/94aeceecacc47d05d33378e2ecdb0966d8388698', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1)Changed the container name to static so that it appends\n apparmor for mon,mgr,mds and osd.\n\n 2)Added Init container for ceph-provisioners.\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 30, 'created': '2020-07-16 22:47:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/3fe843d4d97e4a9b3ebfb2c65173ab9b8023b016', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the container name to static so that it appends\n apparmor for mon,mgr,mds and osd.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 31, 'created': '2020-07-16 23:49:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/4ba58f073d797dc0f5a4443fbaba0a2a500f78d7', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the container name to static so that it appends\n apparmor for mon,mgr,mds and osd.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 32, 'created': '2020-07-17 16:59:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/218f2f79f0038c206d7452a62b6e195b978f6489', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the pod name and container name to pick name dynamically.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 33, 'created': '2020-07-17 18:27:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/51233ce955fc1d1046edae35d0b1b5c896a18da3', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the pod name and container name to pick name dynamically for\n   osd,mon,mgr and mds.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 34, 'created': '2020-07-17 20:08:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1c7e8d50f75b971f4db854491aa5408210ff1995', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the pod name and container name to pick name dynamically for\n   osd,mon,mgr and mds.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 35, 'created': '2020-07-17 20:44:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/bc9c46976a79f2259aa56184843de2b5938fb078', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the pod name and container name to pick name dynamically for\n   osd,mon,mgr and mds.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 36, 'created': '2020-07-17 21:41:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6e18506ba2169568cea88dd181d774f36cd689aa', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the pod name and container name to pick name dynamically for\n   osd,mon,mgr and mds.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}, {'number': 37, 'created': '2020-07-20 01:29:42.000000000', 'files': ['ceph-provisioners/templates/job-cephfs-client-key.yaml', 'ceph-mon/values_overrides/apparmor.yaml', 'ceph-provisioners/values_overrides/apparmor.yaml', 'ceph-mon/templates/job-keyring.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/5d504333629df97f20f6d2316d518153fa3dffde', 'message': 'Enable Application Armor to all ceph key-generator pods.\n\n1) Changed the pod name and container name to pick name dynamically for\n   osd,mon,mgr and mds.\n\n2) Added Init container for ceph-provisioners.\n\nChange-Id: I3e27d51c055010cff982ddb0951d01ea8adac234\nSigned-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>\n'}]",1,738936,5d504333629df97f20f6d2316d518153fa3dffde,122,12,37,29131,,,0,"Enable Application Armor to all ceph key-generator pods.

1) Changed the pod name and container name to pick name dynamically for
   osd,mon,mgr and mds.

2) Added Init container for ceph-provisioners.

Change-Id: I3e27d51c055010cff982ddb0951d01ea8adac234
Signed-off-by: diwakar thyagaraj <diwakar.chitoor.thyagaraj@att.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/36/738936/14 && git format-patch -1 --stdout FETCH_HEAD,[],0,677e274ce1b0d38e7c8445aff28755fb8096df05,Fix_apparmor,,,0,0
openstack%2Fnetworking-bagpipe~master~Ia86c627602deab43b695f60568927e737acf3417,openstack/networking-bagpipe,master,Ia86c627602deab43b695f60568927e737acf3417,Switch from unittest2 compat methods to Python 3.x methods,MERGED,2020-07-09 04:59:11.000000000,2020-07-20 18:05:10.000000000,2020-07-20 18:03:30.000000000,"[{'_account_id': 8313}, {'_account_id': 13995}, {'_account_id': 17130}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-09 04:59:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-bagpipe/commit/1e5f626847b3e0eda2b5567c6804500a69cee09b', 'message': 'Switch from unittest2 compat methods to Python 3.x methods\n\nWith the removal of Python 2.x we can remove the unittest2 compat\nwrappers and switch to assertCountEqual instead of assertItemsEqual\n\nWe have been able to use them since then, because\ntesttools required unittest2, which still included it. With testtools\nremoving Python 2.7 support [3][4], we will lose support for\nassertItemsEqual, so we should switch to use assertCountEqual.\n\n[1] - https://bugs.python.org/issue17866\n[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd\n[3] - testing-cabal/testtools#286\n[4] - testing-cabal/testtools#277\n\nChange-Id: Ia86c627602deab43b695f60568927e737acf3417\n'}, {'number': 2, 'created': '2020-07-10 11:45:51.000000000', 'files': ['networking_bagpipe/tests/unit/objects/test_bgpvpn.py', 'networking_bagpipe/tests/unit/agent/bgpvpn/test_agent_extension.py'], 'web_link': 'https://opendev.org/openstack/networking-bagpipe/commit/e5ffadc18cdb1dca579b08413ff072d3cebfdef4', 'message': 'Switch from unittest2 compat methods to Python 3.x methods\n\nWith the removal of Python 2.x we can remove the unittest2 compat\nwrappers and switch to assertCountEqual instead of assertItemsEqual\n\nWe have been able to use them since then, because\ntesttools required unittest2, which still included it. With testtools\nremoving Python 2.7 support [3][4], we will lose support for\nassertItemsEqual, so we should switch to use assertCountEqual.\n\n[1] - https://bugs.python.org/issue17866\n[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd\n[3] - testing-cabal/testtools#286\n[4] - testing-cabal/testtools#277\n\nChange-Id: Ia86c627602deab43b695f60568927e737acf3417\n'}]",0,740155,e5ffadc18cdb1dca579b08413ff072d3cebfdef4,16,4,2,17130,,,0,"Switch from unittest2 compat methods to Python 3.x methods

With the removal of Python 2.x we can remove the unittest2 compat
wrappers and switch to assertCountEqual instead of assertItemsEqual

We have been able to use them since then, because
testtools required unittest2, which still included it. With testtools
removing Python 2.7 support [3][4], we will lose support for
assertItemsEqual, so we should switch to use assertCountEqual.

[1] - https://bugs.python.org/issue17866
[2] - https://hg.python.org/cpython/rev/d9921cb6e3cd
[3] - testing-cabal/testtools#286
[4] - testing-cabal/testtools#277

Change-Id: Ia86c627602deab43b695f60568927e737acf3417
",git fetch https://review.opendev.org/openstack/networking-bagpipe refs/changes/55/740155/2 && git format-patch -1 --stdout FETCH_HEAD,"['networking_bagpipe/tests/unit/objects/test_bgpvpn.py', 'networking_bagpipe/tests/unit/agent/bgpvpn/test_agent_extension.py']",2,1e5f626847b3e0eda2b5567c6804500a69cee09b,," self.assertCountEqual(result['import_rt'], expected['import_rt']) self.assertCountEqual(result['export_rt'], expected['export_rt'])"," self.assertItemsEqual(result['import_rt'], expected['import_rt']) self.assertItemsEqual(result['export_rt'], expected['export_rt'])",8,8
openstack%2Fnetworking-bagpipe~master~I0cc70af50dbbad972baece017c7b31e0ae696579,openstack/networking-bagpipe,master,I0cc70af50dbbad972baece017c7b31e0ae696579,Fix pep8 job,MERGED,2020-07-09 13:26:34.000000000,2020-07-20 17:59:40.000000000,2020-07-20 17:56:37.000000000,"[{'_account_id': 11975}, {'_account_id': 12021}, {'_account_id': 13995}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-09 13:26:34.000000000', 'files': ['test-requirements.txt', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/networking-bagpipe/commit/30b058ec04f4ccbbbca41c36b72f877634873352', 'message': 'Fix pep8 job\n\nNew versions of isort broke pylint. This patch fixes it at 4.3.21.\n\nChange-Id: I0cc70af50dbbad972baece017c7b31e0ae696579\n'}]",0,740286,30b058ec04f4ccbbbca41c36b72f877634873352,9,5,1,8313,,,0,"Fix pep8 job

New versions of isort broke pylint. This patch fixes it at 4.3.21.

Change-Id: I0cc70af50dbbad972baece017c7b31e0ae696579
",git fetch https://review.opendev.org/openstack/networking-bagpipe refs/changes/86/740286/1 && git format-patch -1 --stdout FETCH_HEAD,"['test-requirements.txt', 'lower-constraints.txt']",2,30b058ec04f4ccbbbca41c36b72f877634873352,pep8-error,isort==4.3.21,,2,0
openstack%2Fkolla-ansible~stable%2Fussuri~I6a174468bd91d214c08477b93c88032a45c137be,openstack/kolla-ansible,stable/ussuri,I6a174468bd91d214c08477b93c88032a45c137be,Fix Barbican client (Castellan) with TLS,MERGED,2020-07-20 10:17:36.000000000,2020-07-20 17:48:20.000000000,2020-07-20 17:46:30.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2020-07-20 10:17:36.000000000', 'files': ['ansible/roles/nova/templates/nova.conf.j2', 'ansible/roles/cinder/templates/cinder.conf.j2', 'ansible/roles/glance/templates/glance-api.conf.j2', 'releasenotes/notes/bug-1886615-640e817dfdb93b8a.yaml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/aca3736e74abe9f155f36ccc6168b770a06bb121', 'message': 'Fix Barbican client (Castellan) with TLS\n\nThe Castellan (Barbican client) has different parameters to control\nthe used CA file.\nThis patch uses them.\nMoreover, this aligns Barbican with other services by defaulting\nits client config to the internal endpoint.\n\nSee also [1].\n\n[1] https://bugs.launchpad.net/castellan/+bug/1876102\n\nCloses-Bug: #1886615\n\nChange-Id: I6a174468bd91d214c08477b93c88032a45c137be\n(cherry picked from commit 0e9a81fdca4e94048b731bc4c79da8b397437365)\n'}]",0,741913,aca3736e74abe9f155f36ccc6168b770a06bb121,9,3,1,14826,,,0,"Fix Barbican client (Castellan) with TLS

The Castellan (Barbican client) has different parameters to control
the used CA file.
This patch uses them.
Moreover, this aligns Barbican with other services by defaulting
its client config to the internal endpoint.

See also [1].

[1] https://bugs.launchpad.net/castellan/+bug/1876102

Closes-Bug: #1886615

Change-Id: I6a174468bd91d214c08477b93c88032a45c137be
(cherry picked from commit 0e9a81fdca4e94048b731bc4c79da8b397437365)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/13/741913/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/nova/templates/nova.conf.j2', 'ansible/roles/cinder/templates/cinder.conf.j2', 'ansible/roles/glance/templates/glance-api.conf.j2', 'releasenotes/notes/bug-1886615-640e817dfdb93b8a.yaml']",4,aca3736e74abe9f155f36ccc6168b770a06bb121,bug/1886615-stable/ussuri,--- fixes: - | Fix Castellan (Barbican client) when used with enabled TLS. `LP#1886615 <https://bugs.launchpad.net/kolla-ansible/+bug/1886615>`__ ,,16,1
openstack%2Felection~master~Ic0721e60f6583abb52bb665fbf113c8017318e2c,openstack/election,master,Ic0721e60f6583abb52bb665fbf113c8017318e2c,Switch to newer openstackdocstheme version,MERGED,2020-06-10 14:20:37.000000000,2020-07-20 17:37:05.000000000,2020-07-20 17:35:42.000000000,"[{'_account_id': 2799}, {'_account_id': 5263}, {'_account_id': 6088}, {'_account_id': 12898}, {'_account_id': 14482}, {'_account_id': 16708}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2020-06-10 14:20:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/election/commit/cc509e2a2436cce19473ab33a13339dc50b26bdb', 'message': ""Switch to newer openstackdocstheme version\n\nSwitch to openstackdocstheme 2.2.1 version. Using\nthis version will allow especially:\n* Linking from HTML to PDF document\n* Allow parallel building of documents\n* Fix some rendering problems\n\nUpdate Sphinx version as well.\n\nDisable openstackdocs_auto_version to not auto-version the documents.\n\nDisable openstackdocs_auto_name to use 'project' variable as name.\n\nChange pygments_style to 'native' since old theme version always used\n'native' and the theme now respects the setting and using 'sphinx' can\nlead to some strange rendering.\n\nopenstackdocstheme renames some variables, so follow the renames\nbefore the next release removes them. A couple of variables are also\nnot needed anymore, remove them.\n\nSee also\nhttp://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html\n\nRemove python 2.7 stanza from setup.py, cleanup tox.ini for python3.\n\nChange-Id: Ic0721e60f6583abb52bb665fbf113c8017318e2c\n""}, {'number': 2, 'created': '2020-06-10 15:01:43.000000000', 'files': ['test-requirements.txt', 'openstack_election/cmds/ci_check_all_candidate_files.py', 'setup.py', 'doc/source/conf.py', 'doc/requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/election/commit/546b04680028f0c0599942fb2349763e0271f6dd', 'message': ""Switch to newer openstackdocstheme version\n\nSwitch to openstackdocstheme 2.2.1 version. Using\nthis version will allow especially:\n* Linking from HTML to PDF document\n* Allow parallel building of documents\n* Fix some rendering problems\n\nUpdate Sphinx version as well.\n\nDisable openstackdocs_auto_version to not auto-version the documents.\n\nDisable openstackdocs_auto_name to use 'project' variable as name.\n\nChange pygments_style to 'native' since old theme version always used\n'native' and the theme now respects the setting and using 'sphinx' can\nlead to some strange rendering.\n\nopenstackdocstheme renames some variables, so follow the renames\nbefore the next release removes them. A couple of variables are also\nnot needed anymore, remove them.\n\nSee also\nhttp://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html\n\nRemove python 2.7 stanza from setup.py, cleanup tox.ini for python3,\nupdate hacking version and fix problem found.\n\nChange-Id: Ic0721e60f6583abb52bb665fbf113c8017318e2c\n""}]",0,734854,546b04680028f0c0599942fb2349763e0271f6dd,11,8,2,6547,,,0,"Switch to newer openstackdocstheme version

Switch to openstackdocstheme 2.2.1 version. Using
this version will allow especially:
* Linking from HTML to PDF document
* Allow parallel building of documents
* Fix some rendering problems

Update Sphinx version as well.

Disable openstackdocs_auto_version to not auto-version the documents.

Disable openstackdocs_auto_name to use 'project' variable as name.

Change pygments_style to 'native' since old theme version always used
'native' and the theme now respects the setting and using 'sphinx' can
lead to some strange rendering.

openstackdocstheme renames some variables, so follow the renames
before the next release removes them. A couple of variables are also
not needed anymore, remove them.

See also
http://lists.openstack.org/pipermail/openstack-discuss/2020-May/014971.html

Remove python 2.7 stanza from setup.py, cleanup tox.ini for python3,
update hacking version and fix problem found.

Change-Id: Ic0721e60f6583abb52bb665fbf113c8017318e2c
",git fetch https://review.opendev.org/openstack/election refs/changes/54/734854/1 && git format-patch -1 --stdout FETCH_HEAD,"['setup.py', 'doc/source/conf.py', 'doc/requirements.txt', 'tox.ini']",4,cc509e2a2436cce19473ab33a13339dc50b26bdb,reno-openstackdocstheme, -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master},install_command = pip install -U {opts} {packages} -c{env:UPPER_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master},13,14
openstack%2Fheat~master~I86a06cd2c5cebcc3d2cd07b675f626a917bb9db4,openstack/heat,master,I86a06cd2c5cebcc3d2cd07b675f626a917bb9db4,Use 'skiplist' to describe skipped indices in ResourceGroup code,MERGED,2020-07-14 16:40:53.000000000,2020-07-20 17:36:01.000000000,2020-07-20 17:34:34.000000000,"[{'_account_id': 4257}, {'_account_id': 8833}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-14 16:40:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/d41ff9ebec3c2d53f972134a5ccdbc294c76a330', 'message': ""Use 'skiplist' to describe skipped indices in ResourceGroup code\n\nDon't use needlessly divisive terminology.\n\nChange-Id: I86a06cd2c5cebcc3d2cd07b675f626a917bb9db4\n""}, {'number': 2, 'created': '2020-07-14 18:54:23.000000000', 'files': ['heat/engine/resources/openstack/heat/software_deployment.py', 'heat/engine/resources/openstack/heat/resource_group.py', 'heat/tests/openstack/heat/test_resource_group.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/24bae944dc0804a1b0a2811aff3af572f7c3e296', 'message': ""Use 'skiplist' to describe skipped indices in ResourceGroup code\n\nDon't use needlessly divisive terminology.\n\nChange-Id: I86a06cd2c5cebcc3d2cd07b675f626a917bb9db4\n""}]",0,741001,24bae944dc0804a1b0a2811aff3af572f7c3e296,23,3,2,4257,,,0,"Use 'skiplist' to describe skipped indices in ResourceGroup code

Don't use needlessly divisive terminology.

Change-Id: I86a06cd2c5cebcc3d2cd07b675f626a917bb9db4
",git fetch https://review.opendev.org/openstack/heat refs/changes/01/741001/1 && git format-patch -1 --stdout FETCH_HEAD,"['heat/engine/resources/openstack/heat/software_deployment.py', 'heat/engine/resources/openstack/heat/resource_group.py', 'heat/tests/openstack/heat/test_resource_group.py']",3,d41ff9ebec3c2d53f972134a5ccdbc294c76a330,," def test_validate_with_skiplist(self): """"""This class tests ResourceGroup._name_skiplist()."""""" # 1) no resource_list, empty skiplist # 2) no resource_list, existing skiplist def test_skiplist(self): resg._update_name_skiplist(properties) self.assertEqual(set(self.expected), resg._name_skiplist()) # 1) no skiplist, 0 count # 2) no skiplist, x count # 3) skiplist (not effecting) # 4) skiplist with pruning ('1', dict(skiplist=[], count=0, ('2', dict(skiplist=[], count=4, ('3', dict(skiplist=['5', '6'], count=3, ('4', dict(skiplist=['2', '4'], count=4, resg._name_skiplist = mock.MagicMock(return_value=self.skiplist) def test_get_attribute_skiplist(self): # 2. min_in_service > count and existing with no skiplist # 3. min_in_service > count and existing with skiplist # 4. existing > count and min_in_service with skiplist # 5. existing > count and min_in_service with no skiplist # 6. all existing skipped # 7. count > existing and min_in_service with no skiplist # 8. count > existing and min_in_service with skiplist # 9. count < existing - skiplisted existing=['0', '1'], skipped=['0'], existing=['0', '1'], skipped=[], existing=['0', '1'], skipped=['0'], existing=['0', '1', '2', '3'], skipped=['2', '3'], existing=['0', '1', '2', '3'], skipped=[], existing=['0', '1'], skipped=['0', '1'], existing=['0', '1'], skipped=[], existing=['0', '1'], skipped=['0'], skipped=['0'], skipped=['0'], self.group._name_skiplist = mock.Mock( return_value=set(self.skipped)) # 1. No existing no skiplist # 2. Existing with no skiplist # 3. Existing with skiplist ('1', dict(existing=[], skipped=[], count=0)), ('2', dict(existing=['0', '1'], skipped=[], count=0)), ('3', dict(existing=['0', '1'], skipped=['0'], count=1)), ('4', dict(existing=['0', '1'], skipped=['1', '2'], count=1)) def test_count_skipped(self): resgrp._name_skiplist = mock.Mock(return_value=set(self.skipped)) rcount = resgrp._count_skipped(self.existing) self.grp._name_skiplist = mock.Mock(return_value={'0'})"," def test_validate_with_blacklist(self): """"""This class tests ResourceGroup._name_blacklist()."""""" # 1) no resource_list, empty blacklist # 2) no resource_list, existing blacklist def test_blacklist(self): resg._update_name_blacklist(properties) self.assertEqual(set(self.expected), resg._name_blacklist()) # 1) no blacklist, 0 count # 2) no blacklist, x count # 3) blacklist (not effecting) # 4) blacklist with pruning ('1', dict(blacklist=[], count=0, ('2', dict(blacklist=[], count=4, ('3', dict(blacklist=['5', '6'], count=3, ('4', dict(blacklist=['2', '4'], count=4, resg._name_blacklist = mock.MagicMock(return_value=self.blacklist) def test_get_attribute_blacklist(self): # 2. min_in_service > count and existing with no blacklist # 3. min_in_service > count and existing with blacklist # 4. existing > count and min_in_service with blacklist # 5. existing > count and min_in_service with no blacklist # 6. all existing blacklisted # 7. count > existing and min_in_service with no blacklist # 8. count > existing and min_in_service with blacklist # 9. count < existing - blacklisted existing=['0', '1'], black_listed=['0'], existing=['0', '1'], black_listed=[], existing=['0', '1'], black_listed=['0'], existing=['0', '1', '2', '3'], black_listed=['2', '3'], existing=['0', '1', '2', '3'], black_listed=[], existing=['0', '1'], black_listed=['0', '1'], existing=['0', '1'], black_listed=[], existing=['0', '1'], black_listed=['0'], black_listed=['0'], black_listed=['0'], self.group._name_blacklist = mock.Mock( return_value=set(self.black_listed)) # 1. No existing no blacklist # 2. Existing with no blacklist # 3. Existing with blacklist ('1', dict(existing=[], black_listed=[], count=0)), ('2', dict(existing=['0', '1'], black_listed=[], count=0)), ('3', dict(existing=['0', '1'], black_listed=['0'], count=1)), ('4', dict(existing=['0', '1'], black_listed=['1', '2'], count=1)) def test_count_black_listed(self): resgrp._name_blacklist = mock.Mock(return_value=set(self.black_listed)) rcount = resgrp._count_black_listed(self.existing) self.grp._name_blacklist = mock.Mock(return_value={'0'})",85,85
openstack%2Fpuppet-tripleo~master~I20d14dd2e55b3de797ce6f43595f14eddc5dec96,openstack/puppet-tripleo,master,I20d14dd2e55b3de797ce6f43595f14eddc5dec96,Test neutron::db inclusion,MERGED,2020-07-15 15:36:20.000000000,2020-07-20 17:19:22.000000000,2020-07-20 17:19:21.000000000,"[{'_account_id': 3153}, {'_account_id': 14985}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-15 15:36:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/2ad0332bccf1702f6887ed52ccc30b1918758da4', 'message': 'Test neutron::db inclusion\n\nThis patch is a follow-up of [1] and adds test cases to make sure that\nneutron::db class is included as expected.\n\n[1] https://review.opendev.org/#/c/738578/\n\nChange-Id: I20d14dd2e55b3de797ce6f43595f14eddc5dec96\n'}, {'number': 2, 'created': '2020-07-15 23:16:55.000000000', 'files': ['spec/classes/tripleo_profile_base_neutron_server_spec.rb'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/a4ea2451c43fd5cf3ef32a110f07d1c83840413b', 'message': 'Test neutron::db inclusion\n\nThis patch is a follow-up of [1] and adds test cases to make sure that\nneutron::db class is included as expected.\n\n[1] https://review.opendev.org/#/c/738578/\n\nChange-Id: I20d14dd2e55b3de797ce6f43595f14eddc5dec96\n'}]",0,741251,a4ea2451c43fd5cf3ef32a110f07d1c83840413b,9,3,2,9816,,,0,"Test neutron::db inclusion

This patch is a follow-up of [1] and adds test cases to make sure that
neutron::db class is included as expected.

[1] https://review.opendev.org/#/c/738578/

Change-Id: I20d14dd2e55b3de797ce6f43595f14eddc5dec96
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/51/741251/2 && git format-patch -1 --stdout FETCH_HEAD,['spec/classes/tripleo_profile_base_neutron_server_spec.rb'],1,2ad0332bccf1702f6887ed52ccc30b1918758da4,neutron-db, is_expected.to_not contain_class('neutron::db') is_expected.to_not contain_class('neutron::db') is_expected.to_not contain_class('neutron::db') is_expected.to contain_class('neutron::db') is_expected.to_not contain_class('neutron::db') is_expected.to contain_class('neutron::db'),,6,0
openstack%2Fglance~master~I93dc7c999ff7a180e6b3ff760fa65328b9a883f3,openstack/glance,master,I93dc7c999ff7a180e6b3ff760fa65328b9a883f3,Fix admin docs deplying under HTTPD,MERGED,2020-07-20 01:45:56.000000000,2020-07-20 17:07:20.000000000,2020-07-20 17:04:50.000000000,"[{'_account_id': 9008}, {'_account_id': 9303}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-07-20 01:45:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance/commit/632f4d18e8614b6bf46b96291503b605016d0892', 'message': ""Fix admin docs deplying under HTTPD\n\nDuring Pike cycle there was efforts to deploy services under\nApache HTTPD. It became clear very quickly that Glance did not\noperate properly when deployed as bare wsgi app under web\nserver but admin documentation was merged that indicated that\nbeing somehow the preferred method. It was added to the doc\nthat in Pike release there was issues in these models.\n\nThere was never interest nor resources to fix the underlying\nissues but the doc stayed in place indicating that those\nissues could be only Pike related when they in matter of\nfact has got even worse over the time. Due to the fact that\nGlance is even more relying on eventlet than back then it's\ntime to clarify the docs and make clear it's not adviced\ndeployment model, it won't work and there is no itention\nto change that.\n\nChange-Id: I93dc7c999ff7a180e6b3ff760fa65328b9a883f3\nCloses-Bug: #1887994\n""}, {'number': 2, 'created': '2020-07-20 11:15:21.000000000', 'files': ['releasenotes/notes/fix_httpd_docs-3efff0395f96a94d.yaml', 'doc/source/admin/apache-httpd.rst'], 'web_link': 'https://opendev.org/openstack/glance/commit/785eefcf7853ccccfa9bec392e2271c3589a3927', 'message': ""Fix admin docs deplying under HTTPD\n\nDuring Pike cycle there was efforts to deploy services under\nApache HTTPD. It became clear very quickly that Glance did not\noperate properly when deployed as bare wsgi app under web\nserver but admin documentation was merged that indicated that\nbeing somehow the preferred method. It was added to the doc\nthat in Pike release there was issues in these models.\n\nThere was never interest nor resources to fix the underlying\nissues but the doc stayed in place indicating that those\nissues could be only Pike related when they in matter of\nfact has got even worse over the time. Due to the fact that\nGlance is even more relying on eventlet than back then it's\ntime to clarify the docs and make clear it's not adviced\ndeployment model, it won't work and there is no itention\nto change that.\n\nChange-Id: I93dc7c999ff7a180e6b3ff760fa65328b9a883f3\nCloses-Bug: #1887994\n""}]",1,741859,785eefcf7853ccccfa9bec392e2271c3589a3927,12,3,2,5202,,,0,"Fix admin docs deplying under HTTPD

During Pike cycle there was efforts to deploy services under
Apache HTTPD. It became clear very quickly that Glance did not
operate properly when deployed as bare wsgi app under web
server but admin documentation was merged that indicated that
being somehow the preferred method. It was added to the doc
that in Pike release there was issues in these models.

There was never interest nor resources to fix the underlying
issues but the doc stayed in place indicating that those
issues could be only Pike related when they in matter of
fact has got even worse over the time. Due to the fact that
Glance is even more relying on eventlet than back then it's
time to clarify the docs and make clear it's not adviced
deployment model, it won't work and there is no itention
to change that.

Change-Id: I93dc7c999ff7a180e6b3ff760fa65328b9a883f3
Closes-Bug: #1887994
",git fetch https://review.opendev.org/openstack/glance refs/changes/59/741859/2 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix_httpd_docs-3efff0395f96a94d.yaml', 'doc/source/admin/apache-httpd.rst']",2,632f4d18e8614b6bf46b96291503b605016d0892,fix_admin_doc_httpd,"In short Glance will not operate properly if tried to be ran without eventlet and introducing another web server into the mix does not make it any better. This exercise failed without ever having proper interest or resources to fix the underlying issues. None of the models deplying Glance as bare wsgi app under some httpd are currently adviced. deploy this there are several patterns, which all fail different ways. This doc mentions three common ways of trying to deploy Glance with Apache HTTPD.This has never worked properly nor it has been of any development focus. The clearest we can say is just don't do it.This has not been doable since Ussuri as we only support Python 3. In theory the same applies as mod_wsgi but even without chunked encoding the code is still broken under uwsgi. specification.","deploy this there are several patterns. This doc shows two common ways of deploying Glance with Apache HTTPD.This is the current recommended way to deploy Glance with Apache HTTP and it is how we deploy Glance for testing every proposed commit to OpenStack. In this deployment method we use the uWSGI server as a web server bound to a random local port. Then we configure apache using mod_proxy to forward all incoming requests on the specified endpoint to that local webserver. This has the advantage of letting apache manage all inbound http connections, but letting uWSGI manage running the python code. It also means when we make changes to Glance code or configuration we don't need to restart all of apache (which may be running other services too) and just need to restart the local uWSGI daemon. The httpd/ directory contains sample files for configuring HTTPD to run Glance under the uWSGI server in this configuration. To use the sample configs simply copy `httpd/uwsgi-glance-api.conf` to the appropriate location for your Apache server. On Debian/Ubuntu systems it is:: /etc/apache2/sites-available/uwsgi-glance-api.conf On Red Hat based systems it is:: /etc/httpd/conf.d/uwsgi-glance-api.conf Enable mod_proxy by running ``sudo a2enmod proxy`` Then on Ubuntu/Debian systems enable the site by creating a symlink from the file in ``sites-available`` to ``sites-enabled``. (This is not required on Red Hat based systems):: ln -s /etc/apache2/sites-available/uwsgi-glance-api.conf /etc/apache2/sites-enabled Start or restart HTTPD to pick up the new configuration. .. NOTE:: Be careful when setting up other proxies/endpoints in the same VirtualHost on Apache HTTPD using. If any are using ``SetEnv proxy-sendcl 1`` then Apache HTTPD will buffer the incoming request to local disk before sending it to glance. This will likely cause problems when running in this configuration and is not necessary. (However, it is necessary if using mod_proxy_uwsgi.) For more details, see the section on :ref:`mod_proxy_uwsgi` below. Now we need to configure and start the uWSGi service. Copy the `httpd/glance-api-uwsgi.ini` file to `/etc/glance`. Update the file to match your system configuration (for example, you'll want to set the number of processes and threads). Install the uWSGI server and start the glance-api server using uWSGI:: sudo pip install uwsgi uwsgi --ini /etc/glance/glance-api-uwsgi.ini .. NOTE:: In the sample configs port 60999 is used, but this doesn't matter and is just a randomly selected number. This is not a contract on the port used for the local uwsgi daemon... WARNING:: Running Glance under HTTPD in this configuration will only work on Python 2 if you use ``Transfer-Encoding: chunked``. Also if running with Python 2 Apache will be buffering the chunked encoding before passing the request on to uWSGI. See bug: https://github.com/unbit/uwsgi/issues/1540 Instead of running uWSGI as a webserver listening on a local port and then having Apache HTTP proxy all the incoming requests with mod_proxy. The normally recommended way of deploying the uWSGI server with Apache HTTPD is to use mod_proxy_uwsgi and set up a local socket file for uWSGI to listen on. Apache will send the requests using the uwsgi protocol over this local socket file. However, there are issues with doing this and using chunked-encoding, so this is not recommended for use with Glance. You can work around these issues by configuring your Apache proxy to buffer the chunked data and send the full content length to the uWSGI server. You do this by adding:: SetEnv proxy-sendcl 1 to the apache config file using mod_proxy_uwsgi. For more details on using mod_proxy_uwsgi see the official docs: http://uwsgi-docs.readthedocs.io/en/latest/Apache.html?highlight=mod_uwsgi_proxy#mod-proxy-uwsgi There are some additional considerations when doing this though. Having Apache locally buffer the chunked data to disk before passing it to uWSGI means you'll need to have sufficient disk space in /tmp (or whatever you set TMPDIR to) to store all the disk files. The other aspect to consider is that this buffering can take some time to write the images to disk. To prevent random failures you'll likely have to increase timeout values in the uWSGI configuration file to ensure uWSGI will wait long enough for this to happen. (Depending on the uploaded image file sizes it may be necessary to set the timeouts to multiple minutes.) specification. (It is not recommended for use with Glance.)",22,92
