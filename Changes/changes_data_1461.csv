id,project,branch,change_id,subject,status,created,updated,submitted,reviewers,revisions,total_comment_count,number,current_revision,discussion_messages_count,reviewers_count,revisions_count,owner_account_id,owner_name,owner_username,is_owner_bot,commit_message,git_command,changed_files,files_count,commit_id,topic,added_lines,deleted_lines,insertions,deletions
openstack%2Fcinder~890988,openstack/cinder,master,Ibb5045f7b208f02bae4ccad65cc312bdddcdf6ff,Automate generation of workers api-ref samples,NEW,2023-08-09 22:18:16.000000000,2023-09-01 23:30:13.000000000,,"[{'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2023-08-09 22:18:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/230e238d199fe47fa6658f2216ae669dab14023c', 'message': 'Automate generation of workers api-ref samples\n\nThis patch adds the following tests:\n\n1) Cleanup workers(services)\n\nPartially-Implements: blueprint generating-sample-files\n\nChange-Id: Ibb5045f7b208f02bae4ccad65cc312bdddcdf6ff\nSigned-off-by: Toheeb <toheeb.olawale.to23@gmail.com>\n'}, {'number': 2, 'created': '2023-08-10 13:23:40.000000000', 'files': ['api-ref/source/v3/samples/workers/v3.24/worker-cleanup-request.json', 'api-ref/source/v3/worker-cleanup.inc', 'api-ref/source/v3/samples/workers/v3.24/worker-cleanup-response.json', 'cinder/tests/functional/api_sample_tests/samples/workers/v3.24/worker-cleanup-request.json.tpl', 'cinder/tests/functional/api_sample_tests/samples/workers/v3.24/worker-cleanup-response.json.tpl', 'cinder/tests/functional/api_sample_tests/test_workers.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/28fb3dadde4725b643a3597d1537a4f172831bf2', 'message': 'Automate generation of workers api-ref samples\n\nThis patch adds the following tests:\n\n1) Cleanup workers(services)\n\nPartially-Implements: blueprint generating-sample-files\n\nChange-Id: Ibb5045f7b208f02bae4ccad65cc312bdddcdf6ff\nSigned-off-by: Toheeb <toheeb.olawale.to23@gmail.com>\n'}]",1,890988,28fb3dadde4725b643a3597d1537a4f172831bf2,32,2,2,35836,,,0,"Automate generation of workers api-ref samples

This patch adds the following tests:

1) Cleanup workers(services)

Partially-Implements: blueprint generating-sample-files

Change-Id: Ibb5045f7b208f02bae4ccad65cc312bdddcdf6ff
Signed-off-by: Toheeb <toheeb.olawale.to23@gmail.com>
",git fetch https://review.opendev.org/openstack/cinder refs/changes/88/890988/1 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/v3/samples/workers/v3.24/worker-cleanup-request.json', 'api-ref/source/v3/worker-cleanup.inc', 'api-ref/source/v3/samples/workers/v3.24/worker-cleanup-response.json', 'cinder/tests/functional/api_sample_tests/samples/workers/v3.24/worker-cleanup-request.json.tpl', 'cinder/tests/functional/api_sample_tests/samples/workers/v3.24/worker-cleanup-response.json.tpl', 'cinder/tests/functional/api_sample_tests/test_workers.py']",6,230e238d199fe47fa6658f2216ae669dab14023c,test_cleanup_workers,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from oslo_serialization import jsonutils from cinder.api import microversions as mv from cinder.tests.functional import api_samples_test_base as test_base class WorkersSampleJsonTest(test_base.ApiSampleTestBase): sample_dir = ""workers"" def setUp(self): super(WorkersSampleJsonTest, self).setUp() self.response = self._do_get('os-services') service = jsonutils.loads(self.response.content)['services'][0] print(service) self.subs = { ""binary"": service[""binary""], ""host"": service[""host""], } @test_base.ApiSampleTestBase.override_mv(mv.WORKERS_CLEANUP) # 3.24 def test_cleanup_workers(self): service = self.subs subs = { ""host"": service[""host""], ""binary"": service[""binary""], ""cluster_name"": ""test"" } response = self._do_post(""workers/cleanup"", ""worker-cleanup-request"", subs) self._verify_response('worker-cleanup-response', {}, response, 202) ",,57,2
openstack%2Fironic~891630,openstack/ironic,master,Ifd7241f06648c8d73c1b97fcf08673496f049f45,Add service steps and initial docs,MERGED,2023-08-16 19:45:39.000000000,2023-09-01 23:16:52.000000000,2023-09-01 23:15:27.000000000,"[{'_account_id': 4571}, {'_account_id': 10342}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-16 19:45:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/5fcbe2357e5d69c1b3d2adc260e3c75b9d9bad01', 'message': 'WIP: Add some service steps\n\nAnd docs!\n\nChange-Id: Ifd7241f06648c8d73c1b97fcf08673496f049f45\n'}, {'number': 2, 'created': '2023-08-17 15:53:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/6afacf2f2aae97622aa9dd25b725a44dd1247185', 'message': 'WIP: Add some service steps\n\nAnd docs!\n\nChange-Id: Ifd7241f06648c8d73c1b97fcf08673496f049f45\n'}, {'number': 3, 'created': '2023-08-29 20:25:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/d1ccb631cbcaa631fdff4d8ebb55c78f2504b682', 'message': 'Add service steps and initial docs\n\nAdds service steps on a variety of internal interfaces,\nand begins to tie documentation together to provide clarity\non the use and purpose of service steps.\n\nChange-Id: Ifd7241f06648c8d73c1b97fcf08673496f049f45\n'}, {'number': 4, 'created': '2023-08-31 20:41:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/4a04b058870e45eed29c2592dd8c6d819903486d', 'message': 'Add service steps and initial docs\n\nAdds service steps on a variety of internal interfaces,\nand begins to tie documentation together to provide clarity\non the use and purpose of service steps.\n\nChange-Id: Ifd7241f06648c8d73c1b97fcf08673496f049f45\n'}, {'number': 5, 'created': '2023-09-01 20:30:48.000000000', 'files': ['ironic/drivers/modules/redfish/bios.py', 'ironic/drivers/modules/redfish/raid.py', 'doc/source/admin/index.rst', 'ironic/drivers/modules/agent.py', 'ironic/conductor/servicing.py', 'ironic/drivers/modules/agent_base.py', 'ironic/conductor/steps.py', 'ironic/drivers/modules/redfish/management.py', 'ironic/drivers/modules/ipmitool.py', 'doc/source/admin/servicing.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/646d452d667e5470d17c93fb3bfa882d03c06a9e', 'message': 'Add service steps and initial docs\n\nAdds service steps on a variety of internal interfaces,\nand begins to tie documentation together to provide clarity\non the use and purpose of service steps.\n\nChange-Id: Ifd7241f06648c8d73c1b97fcf08673496f049f45\n'}]",8,891630,646d452d667e5470d17c93fb3bfa882d03c06a9e,25,3,5,11655,,,0,"Add service steps and initial docs

Adds service steps on a variety of internal interfaces,
and begins to tie documentation together to provide clarity
on the use and purpose of service steps.

Change-Id: Ifd7241f06648c8d73c1b97fcf08673496f049f45
",git fetch https://review.opendev.org/openstack/ironic refs/changes/30/891630/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/drivers/modules/redfish/bios.py', 'ironic/drivers/modules/redfish/raid.py', 'doc/source/admin/index.rst', 'ironic/drivers/modules/agent.py', 'ironic/drivers/modules/redfish/management.py', 'ironic/drivers/modules/ipmitool.py']",6,5fcbe2357e5d69c1b3d2adc260e3c75b9d9bad01,sleep_step," @base.service_step(priority=0, argsinfo=_send_raw_step_args)",,22,7
openstack%2Fironic~893417,openstack/ironic,master,I8d052e5d26396737bc7d807cbafdc317cfd2f21f,Log an exception from heartbeat,MERGED,2023-08-31 16:54:27.000000000,2023-09-01 21:58:31.000000000,2023-09-01 21:57:16.000000000,"[{'_account_id': 4571}, {'_account_id': 10342}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 16:54:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/a166090f528d7f966b6aecce9710a2123bbd5551', 'message': 'Log an exception from heartbeat\n\nSo it seems we can have weirdness here which\ncan get lost in the mix because heartbeat operations\nget called with spawn_after on the task, and without\nan error handler. The net effect seems to be we can\neat errors, which maybe we should log.\n\nLogs a warning now and returns to the caller which will\nexit the task.\n\nChange-Id: I8d052e5d26396737bc7d807cbafdc317cfd2f21f\n'}, {'number': 2, 'created': '2023-08-31 17:13:17.000000000', 'files': ['ironic/drivers/modules/agent_base.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/3cd492d775cbd397a66fcdab0ebf6971bd6db6a6', 'message': 'Log an exception from heartbeat\n\nSo it seems we can have weirdness here which\ncan get lost in the mix because heartbeat operations\nget called with spawn_after on the task, and without\nan error handler. The net effect seems to be we can\neat errors, which maybe we should log.\n\nLogs a warning now and returns to the caller which will\nexit the task.\n\nChange-Id: I8d052e5d26396737bc7d807cbafdc317cfd2f21f\n'}]",1,893417,3cd492d775cbd397a66fcdab0ebf6971bd6db6a6,11,3,2,11655,,,0,"Log an exception from heartbeat

So it seems we can have weirdness here which
can get lost in the mix because heartbeat operations
get called with spawn_after on the task, and without
an error handler. The net effect seems to be we can
eat errors, which maybe we should log.

Logs a warning now and returns to the caller which will
exit the task.

Change-Id: I8d052e5d26396737bc7d807cbafdc317cfd2f21f
",git fetch https://review.opendev.org/openstack/ironic refs/changes/17/893417/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic/drivers/modules/agent_base.py'],1,a166090f528d7f966b6aecce9710a2123bbd5551,," except Exception as e: LOG.warning('Node %s failed to lock for a heartbeat operation ' 'with an unknown cause. Error: %s', e) return",,4,0
openstack%2Ftripleo-quickstart~893443,openstack/tripleo-quickstart,master,I3f2a2ddbc6770cb6a80c9e6c96e67d0bc412ec8a,"Revert ""Exclude affected podman version""",MERGED,2023-09-01 10:51:03.000000000,2023-09-01 21:18:09.000000000,2023-09-01 21:17:15.000000000,"[{'_account_id': 8449}, {'_account_id': 9816}, {'_account_id': 9976}, {'_account_id': 12393}, {'_account_id': 22348}, {'_account_id': 30002}]","[{'number': 1, 'created': '2023-09-01 10:51:03.000000000', 'files': ['config/release/tripleo-ci/CentOS-9/promotion-testing-hash-wallaby.yml', 'config/release/tripleo-ci/CentOS-9/wallaby.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/eec2ccef3626669d66dfedd3174d347c135ec10d', 'message': 'Revert ""Exclude affected podman version""\n\nThis reverts commit 2aa133c2aecb379ae6234a8879edb9f46bbeb166.\n\nReason for revert: Podman new version fixed\n\nChange-Id: I3f2a2ddbc6770cb6a80c9e6c96e67d0bc412ec8a\n'}]",2,893443,eec2ccef3626669d66dfedd3174d347c135ec10d,10,6,1,8367,,,0,"Revert ""Exclude affected podman version""

This reverts commit 2aa133c2aecb379ae6234a8879edb9f46bbeb166.

Reason for revert: Podman new version fixed

Change-Id: I3f2a2ddbc6770cb6a80c9e6c96e67d0bc412ec8a
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/43/893443/1 && git format-patch -1 --stdout FETCH_HEAD,"['config/release/tripleo-ci/CentOS-9/promotion-testing-hash-wallaby.yml', 'config/release/tripleo-ci/CentOS-9/wallaby.yml']",2,eec2ccef3626669d66dfedd3174d347c135ec10d,downgrade-podman,, exclude: - podman-4.6.0-3* #todo(ysandeep): remove once podman bug: https://bugzilla.redhat.com/show_bug.cgi?id=2230212 resolves.,0,4
openstack%2Fnova~893502,openstack/nova,master,I0ada59d8901f8620fd1f3dc20d6be303aa7dabca,only attempt to clean up dangling bdm if cinder is installed,MERGED,2023-09-01 11:48:24.000000000,2023-09-01 21:10:43.000000000,2023-09-01 21:09:41.000000000,"[{'_account_id': 4393}, {'_account_id': 7166}, {'_account_id': 22348}, {'_account_id': 34860}]","[{'number': 1, 'created': '2023-09-01 11:48:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9987ba2ab7357f88239e92d6c2986b241277b191', 'message': 'only attempt to clean up dangeling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangeling bdms if\ncinder is installed. It also modifies the nova-ovs-hybrid-plug\njob to disable cinder and swift to ensure we test for this going\nforward.\n\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}, {'number': 2, 'created': '2023-09-01 11:50:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ef7e78378ea5877b8219513c424cea41840ae208', 'message': 'only attempt to clean up dangeling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangeling bdms if\ncinder is installed. It also modifies the nova-ovs-hybrid-plug\njob to disable cinder and swift to ensure we test for this going\nforward.\n\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}, {'number': 3, 'created': '2023-09-01 11:53:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ef3423f361e1bd9d527886d79c8aa46271fa2183', 'message': 'only attempt to clean up dangeling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangeling bdms if\ncinder is installed. It also modifies the nova-ovs-hybrid-plug\njob to disable cinder and swift to ensure we test for this going\nforward.\n\nCloses-Bug: #2033752\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}, {'number': 4, 'created': '2023-09-01 12:51:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/481517881c7f81c988b4f0ebcaff83f56464a5e7', 'message': 'only attempt to clean up dangling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangling bdms if\ncinder is installed. It also modifies the nova-ovs-hybrid-plug\njob to disable cinder and swift to ensure we test for this going\nforward.\n\nCloses-Bug: #2033752\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}, {'number': 5, 'created': '2023-09-01 14:28:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/dd9a7c4f6df879757afa62e986bfa46502f9dfaf', 'message': 'only attempt to clean up dangling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangling bdms if\ncinder is installed. It also modifies the nova-ovs-hybrid-plug\njob to disable cinder and swift to ensure we test for this going\nforward.\n\nCloses-Bug: #2033752\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}, {'number': 6, 'created': '2023-09-01 15:42:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1643c8ebfaaae81017e4e7ff3ae25a32a0474cf1', 'message': 'only attempt to clean up dangling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangling bdms if\ncinder is installed and reachable. It also modifies the\nnova-ovs-hybrid-plug job to disable cinder and swift to\nensure we test for this going forward.\n\nCloses-Bug: #2033752\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}, {'number': 7, 'created': '2023-09-01 16:56:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2bd80da0ff9ff5284a02ca5daba7c472559894c9', 'message': 'only attempt to clean up dangling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangling bdms if\ncinder is installed and reachable. It also modifies the\nnova-ovs-hybrid-plug job to disable cinder and swift to\nensure we test for this going forward.\n\nCloses-Bug: #2033752\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}, {'number': 8, 'created': '2023-09-01 17:03:56.000000000', 'files': ['nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/68b2131d811c935af60eb6f563f4552d7287e3a8', 'message': 'only attempt to clean up dangling bdm if cinder is installed\n\nThis change ensure we only try to clean up dangling bdms if\ncinder is installed and reachable.\n\nCloses-Bug: #2033752\nChange-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca\n'}]",34,893502,68b2131d811c935af60eb6f563f4552d7287e3a8,38,4,8,11604,,,0,"only attempt to clean up dangling bdm if cinder is installed

This change ensure we only try to clean up dangling bdms if
cinder is installed and reachable.

Closes-Bug: #2033752
Change-Id: I0ada59d8901f8620fd1f3dc20d6be303aa7dabca
",git fetch https://review.opendev.org/openstack/nova refs/changes/02/893502/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', '.zuul.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py']",5,9987ba2ab7357f88239e92d6c2986b241277b191,dont-cleanup-bdms-if-cinder-not-installed," # if cidner is not deploy we never need to check for # attachments as there cannot be dangling bdms. if not cinder.has_cinder(context): LOG.debug( ""Cinder is not deployed, skipping deletion of"" "" dangling volume attachments."", instance=instance ) return",,84,0
openstack%2Fansible-collections-openstack~891975,openstack/ansible-collections-openstack,master,Ic7b43093d9c35de8962978e9ee108cf7b5379fcd,Adds stateful parameter to security groups,MERGED,2023-08-18 12:20:50.000000000,2023-09-01 20:33:35.000000000,2023-09-01 20:33:35.000000000,"[{'_account_id': 22348}, {'_account_id': 32962}]","[{'number': 1, 'created': '2023-08-18 12:20:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/da49836d436fd89bb79ac096538b27c70e6e6893', 'message': 'Adds stateful parameter to security groups\n\nThis is a missing option.\n\nChange-Id: Ic7b43093d9c35de8962978e9ee108cf7b5379fcd\n'}, {'number': 2, 'created': '2023-08-18 13:42:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/afe1e0fc3c62dbc845fdd445d8e513c8aae56424', 'message': 'Adds stateful parameter to security groups\n\nThis is a missing option.\n\nChange-Id: Ic7b43093d9c35de8962978e9ee108cf7b5379fcd\n'}, {'number': 3, 'created': '2023-08-18 14:30:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/dac254de65728dc8024cc6dcc2e09bca2ac6b89b', 'message': 'Adds stateful parameter to security groups\n\nThis is a missing option.\n\nChange-Id: Ic7b43093d9c35de8962978e9ee108cf7b5379fcd\n'}, {'number': 4, 'created': '2023-09-01 11:35:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/61b80f64a80c098b106555292d2fa5f636850761', 'message': 'Adds stateful parameter to security groups\n\nThis is a missing option.\n\nChange-Id: Ic7b43093d9c35de8962978e9ee108cf7b5379fcd\n'}, {'number': 5, 'created': '2023-09-01 17:53:32.000000000', 'files': ['plugins/modules/security_group.py', 'ci/roles/security_group/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/0aedc268f1a4509c7fb0dd21b50bd552f334207b', 'message': 'Adds stateful parameter to security groups\n\nThis is a missing option.\n\nChange-Id: Ic7b43093d9c35de8962978e9ee108cf7b5379fcd\n'}]",3,891975,0aedc268f1a4509c7fb0dd21b50bd552f334207b,17,2,5,28048,,,0,"Adds stateful parameter to security groups

This is a missing option.

Change-Id: Ic7b43093d9c35de8962978e9ee108cf7b5379fcd
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/75/891975/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/security_group.py', 'ci/roles/security_group/tasks/main.yml']",2,da49836d436fd89bb79ac096538b27c70e6e6893,,"- name: Create stateless security group openstack.cloud.security_group: cloud: ""{{ cloud }}"" name: ansible_security_group_stateless stateful: false state: present description: 'Created from Ansible playbook' register: security_group_stateless - name: Assert return values of security_group module assert: that: - security_group_stateless.security_group.name == 'ansible_security_group_stateless' - security_group_stateless.security_group.stateful == False - name: Delete stateless security group openstack.cloud.security_group: cloud: ""{{ cloud }}"" name: ansible_security_group_stateless state: absent ",,36,1
openstack%2Fhorizon~891287,openstack/horizon,master,Ib2fc75ae87cdcbfc2da77bead75c71aba387ad3a,Increase the default explicit_wait and page_timeout values,MERGED,2023-08-14 09:38:37.000000000,2023-09-01 20:18:19.000000000,2023-09-01 20:17:10.000000000,"[{'_account_id': 6914}, {'_account_id': 22348}, {'_account_id': 29313}, {'_account_id': 35133}]","[{'number': 1, 'created': '2023-08-14 09:38:37.000000000', 'files': ['openstack_dashboard/test/integration_tests/config.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/e001a590db273bea6dd319aa0c7aa644933caf6d', 'message': ""Increase the default explicit_wait and page_timeout values\n\nIt seems that our testing environment is becoming slower and slower\nevery day, and we are now getting test errors because a page didn't\nload in time, or a modal didn't load. Increasing the timeouts should\nhelp with that.\n\nChange-Id: Ib2fc75ae87cdcbfc2da77bead75c71aba387ad3a\n""}]",4,891287,e001a590db273bea6dd319aa0c7aa644933caf6d,25,4,1,8648,,,0,"Increase the default explicit_wait and page_timeout values

It seems that our testing environment is becoming slower and slower
every day, and we are now getting test errors because a page didn't
load in time, or a modal didn't load. Increasing the timeouts should
help with that.

Change-Id: Ib2fc75ae87cdcbfc2da77bead75c71aba387ad3a
",git fetch https://review.opendev.org/openstack/horizon refs/changes/87/891287/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_dashboard/test/integration_tests/config.py'],1,e001a590db273bea6dd319aa0c7aa644933caf6d,test-timeout," default=180, default=120,"," default=90, default=60,",2,2
openstack%2Fcinder~890655,openstack/cinder,master,I41629720fa6d682af9643af886c5f39f8a486f18,PoC: Test new location APIs,NEW,2023-08-07 13:35:42.000000000,2023-09-01 19:43:35.000000000,,"[{'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2023-08-07 13:35:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/d8b11a249e3e2c9086f9a833f8c6b3af35f9e37b', 'message': 'PoC: Test new location APIs\n\nSteps for testing:\n\n1) In the cinder.conf file, add the following line to the backend\ndriver configuration\n\n[cephdriver-1]\nimage_upload_use_cinder_backend = True\n\n2) Restart the cinder services (specifically c-vol)\n\nsudo systemctl restart devstack@c*\n\n3) perform upload volume to image operation\n\ncinder upload-to-image <volume-id> <image-name>\n\nChange-Id: I41629720fa6d682af9643af886c5f39f8a486f18\n'}, {'number': 2, 'created': '2023-08-09 09:44:45.000000000', 'files': ['cinder/image/glance.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/8b6fc6090856ad34108ae3f50a39362b1afca19c', 'message': 'PoC: Test new location APIs\n\nSteps for testing:\n\n1) In the cinder.conf file, add the following line to the backend\ndriver configuration\n\n[cephdriver-1]\nimage_upload_use_cinder_backend = True\nimage_upload_use_internal_tenant = True\n\n2) Restart the cinder services (specifically c-vol)\n\nsudo systemctl restart devstack@c*\n\n3) perform upload volume to image operation\n\ncinder upload-to-image <volume-id> <image-name>\n\nChange-Id: I41629720fa6d682af9643af886c5f39f8a486f18\n'}]",3,890655,8b6fc6090856ad34108ae3f50a39362b1afca19c,35,2,2,27615,,,0,"PoC: Test new location APIs

Steps for testing:

1) In the cinder.conf file, add the following line to the backend
driver configuration

[cephdriver-1]
image_upload_use_cinder_backend = True
image_upload_use_internal_tenant = True

2) Restart the cinder services (specifically c-vol)

sudo systemctl restart devstack@c*

3) perform upload volume to image operation

cinder upload-to-image <volume-id> <image-name>

Change-Id: I41629720fa6d682af9643af886c5f39f8a486f18
",git fetch https://review.opendev.org/openstack/cinder refs/changes/55/890655/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/image/glance.py'],1,d8b11a249e3e2c9086f9a833f8c6b3af35f9e37b,," return client.call(context, 'add_image_location', image_id, url, {})"," return client.call(context, 'add_location', image_id, url, metadata)",2,2
openstack%2Ftripleo-heat-templates~892914,openstack/tripleo-heat-templates,stable/wallaby,I3e8020457be89d7198b3cbff201e9470ffcb031b,Only run ovn_bgp_agent tasks from the tripleo_frr role,MERGED,2023-08-28 12:29:02.000000000,2023-09-01 19:27:09.000000000,2023-09-01 19:27:09.000000000,"[{'_account_id': 8833}, {'_account_id': 20778}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 12:29:02.000000000', 'files': ['deployment/ovn/ovn-bgp-agent-container-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/tripleo-heat-templates/commit/1ecdc0f98f8f4d03710a91843575eee43a518db2', 'message': 'Only run ovn_bgp_agent tasks from the tripleo_frr role\n\nCurrently simply importing the tripleo_frr role would override the\nfrr configuration, breaking per-role parameters and such.\nBy running only the necessary tasks we effectively split frr vs\novn_bgp_agent configuration steps so they do not clash with each other.\n\nChange-Id: I3e8020457be89d7198b3cbff201e9470ffcb031b\n'}]",3,892914,1ecdc0f98f8f4d03710a91843575eee43a518db2,15,3,1,30126,,,0,"Only run ovn_bgp_agent tasks from the tripleo_frr role

Currently simply importing the tripleo_frr role would override the
frr configuration, breaking per-role parameters and such.
By running only the necessary tasks we effectively split frr vs
ovn_bgp_agent configuration steps so they do not clash with each other.

Change-Id: I3e8020457be89d7198b3cbff201e9470ffcb031b
",git fetch https://review.opendev.org/openstack/tripleo-heat-templates refs/changes/14/892914/1 && git format-patch -1 --stdout FETCH_HEAD,['deployment/ovn/ovn-bgp-agent-container-ansible.yaml'],1,1ecdc0f98f8f4d03710a91843575eee43a518db2,split_tripleo_frr_role, tasks_from: ovn_bgp_agent,,1,0
openstack%2Fpython-swiftclient~893513,openstack/python-swiftclient,stable/2023.2,I96b53d5e761c15d29689c60981b2614443872ea6,Update .gitreview for stable/2023.2,MERGED,2023-09-01 13:36:07.000000000,2023-09-01 19:08:30.000000000,2023-09-01 19:07:24.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 13:36:07.000000000', 'files': ['.gitreview'], 'web_link': 'https://opendev.org/openstack/python-swiftclient/commit/7b5163a02f3abba1563f71cbe4015df0e8cf1d02', 'message': 'Update .gitreview for stable/2023.2\n\nChange-Id: I96b53d5e761c15d29689c60981b2614443872ea6\n'}]",0,893513,7b5163a02f3abba1563f71cbe4015df0e8cf1d02,7,2,1,22816,,,0,"Update .gitreview for stable/2023.2

Change-Id: I96b53d5e761c15d29689c60981b2614443872ea6
",git fetch https://review.opendev.org/openstack/python-swiftclient refs/changes/13/893513/1 && git format-patch -1 --stdout FETCH_HEAD,['.gitreview'],1,7b5163a02f3abba1563f71cbe4015df0e8cf1d02,create-2023.2,defaultbranch=stable/2023.2,,1,0
openstack%2Fswift~893516,openstack/swift,stable/2023.2,I7b04e128e93b8674141ec9f29b5176e07c9b5262,Update .gitreview for stable/2023.2,MERGED,2023-09-01 13:36:51.000000000,2023-09-01 19:08:21.000000000,2023-09-01 19:07:22.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 13:36:51.000000000', 'files': ['.gitreview'], 'web_link': 'https://opendev.org/openstack/swift/commit/468306d4f8fb12bd69cb9597f8c3b2c7b86b2942', 'message': 'Update .gitreview for stable/2023.2\n\nChange-Id: I7b04e128e93b8674141ec9f29b5176e07c9b5262\n'}]",0,893516,468306d4f8fb12bd69cb9597f8c3b2c7b86b2942,8,2,1,22816,,,0,"Update .gitreview for stable/2023.2

Change-Id: I7b04e128e93b8674141ec9f29b5176e07c9b5262
",git fetch https://review.opendev.org/openstack/swift refs/changes/16/893516/1 && git format-patch -1 --stdout FETCH_HEAD,['.gitreview'],1,468306d4f8fb12bd69cb9597f8c3b2c7b86b2942,create-2023.2,defaultbranch=stable/2023.2,,1,0
openstack%2Fcharm-mysql-innodb-cluster~892989,openstack/charm-mysql-innodb-cluster,master,I58fc489fd4cc4e06b11c293f63e73bd0ab18897f,Delay prom_exporter user creation until password is available.,MERGED,2023-08-28 19:02:33.000000000,2023-09-01 19:01:44.000000000,2023-09-01 19:01:44.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 19:02:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/f9ff0754c09ddb58ab64a70f3ad513ffeb7bdc13', 'message': 'DNM: Assert on empty password\n\nChange-Id: I58fc489fd4cc4e06b11c293f63e73bd0ab18897f\n'}, {'number': 2, 'created': '2023-08-28 20:30:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/fda62338f6c3fa2d7352360fe98ca34ac452abca', 'message': 'DNM: Assert on empty password\n\nChange-Id: I58fc489fd4cc4e06b11c293f63e73bd0ab18897f\n'}, {'number': 3, 'created': '2023-08-29 01:07:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/4d6988f565fad90b9dfae4714d3771a84f26dab1', 'message': ""Delay prom_exporter user creation until password is available.\n\nThere are situations where the create_local_prometheus_exporter_user()\nhandler could be executed in a follower unit before the leader units\ngets the chance to generate a password for the prom_exporter user and\nstore it in the leader databag, this has the consequence that the\nprom_exporter user is created with the password 'None' (string\nrepresentation of the `None` value), this leads to the problem that the\nmysql_exporter daemon can't connect to mysqld.\n\nThis patch checks that the password is available, if it isn't, then bail\nout and let subsequent executions to re-evaluate this condition.\n\nCloses-Bug: #2033306\nChange-Id: I58fc489fd4cc4e06b11c293f63e73bd0ab18897f\n""}, {'number': 4, 'created': '2023-08-29 01:12:46.000000000', 'files': ['unit_tests/test_prometheus_mysql_exporter_handlers.py', 'src/reactive/prometheus_mysql_exporter_handlers.py'], 'web_link': 'https://opendev.org/openstack/charm-mysql-innodb-cluster/commit/83bc7b36aeb038b7ce2d16ec023fa971bfc091f1', 'message': ""Delay prom_exporter user creation until password is available.\n\nThere are situations where the create_local_prometheus_exporter_user()\nhandler could be executed in a follower unit before the leader units\ngets the chance to generate a password for the prom_exporter user and\nstore it in the leader databag, this has the consequence that the\nprom_exporter user is created with the password 'None' (string\nrepresentation of the `None` value), this leads to the problem that the\nmysql_exporter daemon can't connect to mysqld.\n\nThis patch checks that the password is available, if it isn't, then bail\nout and let subsequent executions to re-evaluate this condition.\n\nCloses-Bug: #2033306\nChange-Id: I58fc489fd4cc4e06b11c293f63e73bd0ab18897f\n""}]",9,892989,83bc7b36aeb038b7ce2d16ec023fa971bfc091f1,29,4,4,2424,,,0,"Delay prom_exporter user creation until password is available.

There are situations where the create_local_prometheus_exporter_user()
handler could be executed in a follower unit before the leader units
gets the chance to generate a password for the prom_exporter user and
store it in the leader databag, this has the consequence that the
prom_exporter user is created with the password 'None' (string
representation of the `None` value), this leads to the problem that the
mysql_exporter daemon can't connect to mysqld.

This patch checks that the password is available, if it isn't, then bail
out and let subsequent executions to re-evaluate this condition.

Closes-Bug: #2033306
Change-Id: I58fc489fd4cc4e06b11c293f63e73bd0ab18897f
",git fetch https://review.opendev.org/openstack/charm-mysql-innodb-cluster refs/changes/89/892989/1 && git format-patch -1 --stdout FETCH_HEAD,['src/lib/charm/openstack/mysql_innodb_cluster.py'],1,f9ff0754c09ddb58ab64a70f3ad513ffeb7bdc13,bug/2033306," cluster but can't acquire a cluster rw db_helper object then it should assert password, ""Password can't be empty: %s"" % password query = SQL_CLUSTER_USER_CREATE.format( m_helper.execute(query) ch_core.hookenv.log( 'SQL_CLUSTER_CREATE: ' % query, 'INFO'", cluster but can't acquire a cluster rw db_helper object hen it should m_helper.execute(SQL_CLUSTER_USER_CREATE.format(,8,2
openstack%2Fkayobe~802865,openstack/kayobe,master,I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72,Kayobe environment dependencies,MERGED,2021-07-29 11:23:57.000000000,2023-09-01 18:14:08.000000000,2023-09-01 18:12:25.000000000,"[{'_account_id': 14200}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2021-07-29 11:23:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f1d9f4c4d7bde89d0064d25b805ae3e6a9018a04', 'message': 'Kayobe environment dependencies\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 2, 'created': '2021-07-30 18:06:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/639c3d1d52c56fa719186ac59c820806efb9264b', 'message': 'Kayobe environment dependencies\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 3, 'created': '2022-10-07 15:16:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f35866e099953ba4eea4c8c779eeaff3b426f0c9', 'message': 'Kayobe environment dependencies\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n(cherry picked from commit 639c3d1d52c56fa719186ac59c820806efb9264b)\n'}, {'number': 4, 'created': '2022-10-07 17:16:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/69db27fa0ad46ff034ec4c41acc381f4e4831a29', 'message': 'Kayobe environment dependencies\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n(cherry picked from commit 639c3d1d52c56fa719186ac59c820806efb9264b)\n'}, {'number': 5, 'created': '2022-10-20 13:23:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c434bd1851ff22960731c1dae7f8d947641861e7', 'message': 'Kayobe environment dependencies\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n(cherry picked from commit 639c3d1d52c56fa719186ac59c820806efb9264b)\n'}, {'number': 6, 'created': '2023-03-07 10:22:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/120a958e22d86934a7b885644c9f92e9e3afbcf6', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n(cherry picked from commit 639c3d1d52c56fa719186ac59c820806efb9264b)\n'}, {'number': 7, 'created': '2023-03-07 10:29:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b6a723dc4a6c8d60e27bd666175c5a9b378488d9', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n(cherry picked from commit 639c3d1d52c56fa719186ac59c820806efb9264b)\n'}, {'number': 8, 'created': '2023-03-08 17:47:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/a3d323f5d12c01529d541b2982c55f4f05d5d23b', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 9, 'created': '2023-04-19 14:07:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f7e307d4cd52c66f21814568c9e20b2c0578240f', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 10, 'created': '2023-04-19 14:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f066a7a14be712d7c40a63ac28d5126baf61ac3e', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 11, 'created': '2023-04-19 15:40:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c6922d40f2a198cd0d31ac1c7bd9149a4b1f6adb', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 12, 'created': '2023-04-20 09:19:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/7cd033e265d9a1274fa332c4a1fb03dd58c76eda', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 13, 'created': '2023-04-20 09:21:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f1e55d3cf7e8da83b9e9423a6699c538154845d0', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}, {'number': 14, 'created': '2023-05-30 19:20:55.000000000', 'files': ['ansible/inventory/group_vars/all/globals', 'kayobe/kolla_ansible.py', 'kayobe/tests/unit/test_utils.py', 'releasenotes/notes/environment-dependencies-22df2a38a653425b.yaml', 'ansible/kolla-ansible.yml', 'ansible/kolla-openstack.yml', 'doc/source/multiple-environments.rst', 'ansible/kolla-bifrost.yml', 'ansible/kolla-build.yml', 'requirements.txt', 'kayobe/ansible.py', 'kayobe/plugins/lookup/environments.py', 'kayobe/tests/unit/test_ansible.py', 'ansible/lookup_plugins/kayobe_environments.py', 'kayobe/utils.py'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/0ae9e8d4892c5e7a0fd3477452b1a134f5dc11d0', 'message': 'Kayobe environment dependencies\n\nAllows you to combine multiple environments by declaring any dependencies.\n\nStory: 2002009\nTask: 42911\nChange-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72\n'}]",59,802865,0ae9e8d4892c5e7a0fd3477452b1a134f5dc11d0,45,4,14,28048,,,0,"Kayobe environment dependencies

Allows you to combine multiple environments by declaring any dependencies.

Story: 2002009
Task: 42911
Change-Id: I4d9f96ec4cf3c6cd0d28dfe5ddb239d863498a72
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/65/802865/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'kayobe/ansible.py', 'ansible/group_vars/all/globals', 'ansible/kolla-ansible.yml', 'kayobe/utils.py', 'ansible/kolla-openstack.yml']",6,f1d9f4c4d7bde89d0064d25b805ae3e6a9018a04,merge-configs," kolla_config_paths_static: kolla_config_paths_extra: ""{{ kolla_config_paths_static + kayobe_env_search_paths }}"""," kolla_config_paths_extra: - ""{{ kayobe_env_config_path }}""",88,32
openstack%2Fkayobe~782749,openstack/kayobe,master,Id4588f4529a4522e68e22ce58711cb927fa68a9d,Use merge_configs and merge_yaml to generate Kolla custom config,MERGED,2021-03-24 14:03:07.000000000,2023-09-01 18:13:19.000000000,2023-09-01 18:12:17.000000000,"[{'_account_id': 14200}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 28048}]","[{'number': 1, 'created': '2021-03-24 14:03:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/1ce804e9f1e09fd9780ff9566a2590e5525faf64', 'message': 'WIP: Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\n'}, {'number': 2, 'created': '2021-05-24 09:34:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/a2f1f941918a682382bb4f74b4c80140a0125db7', 'message': 'WIP: Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\n'}, {'number': 3, 'created': '2021-05-24 15:12:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f2f2fcb9a3212604d564d94c9130cd47bb287800', 'message': 'WIP: Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\n'}, {'number': 4, 'created': '2021-05-25 15:33:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/50b94fa903f604a43b1f75da43a4519aefef097a', 'message': 'WIP: Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\n'}, {'number': 5, 'created': '2021-05-26 08:56:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/901b426a88aa130b6aa013204fcd58018d4e306d', 'message': 'WIP: Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\n'}, {'number': 6, 'created': '2021-07-08 16:56:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/40968f40e936d5d2fa459526714c05e697b5a7b7', 'message': 'WIP: Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\n'}, {'number': 7, 'created': '2021-07-28 18:42:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/7957a3f79df6a804dec9a1511e312779aae89e37', 'message': 'Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 8, 'created': '2021-07-29 08:43:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/425852a7f6a79bcd19a8b7c4d0dcb0e67c9e28cd', 'message': 'Use merge_configs and merge_yaml to generate custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 9, 'created': '2021-08-10 11:28:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/2abee026c1e44e89d4b3f9370aa0fa4583c06c94', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 10, 'created': '2022-09-15 08:41:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/747290f0a4ae1030c271efa424b1a83158b881d7', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 11, 'created': '2022-09-15 09:20:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/98bb887fb3161193e52e8e8612cde7a4fc95666f', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 12, 'created': '2022-09-15 09:22:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b8f6e0fd19259c16b8dfd1511609384c4c1895c0', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 13, 'created': '2022-12-12 17:05:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/ad21504c0fe3709411f4b4e5c948854d67158cc1', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 14, 'created': '2023-01-11 13:56:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c80af21def36606cfc4f19ea9f967555d17bb2e4', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 15, 'created': '2023-01-11 17:27:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/614b8bf0c1b0ee91185f73300d5c8b6e85ea7369', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 16, 'created': '2023-01-11 17:35:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/79e62f703bda0d9056732b928ff76c944757efef', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 17, 'created': '2023-03-07 10:22:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/c0e34b73bff41e0c30e7d033a276f5308f680893', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 18, 'created': '2023-03-07 10:29:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/3d7d5d2551496862564161670bc841e19890e867', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 19, 'created': '2023-04-19 14:07:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/9c1564232eebc6bdf72a2f6778076393165a2a60', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 20, 'created': '2023-04-19 14:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/373edbecb1d2603f6e25176fc0f9b47c34cd511e', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 21, 'created': '2023-04-19 15:40:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/2ea190f2b52fbab998149d26082102fc3f99aa32', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 22, 'created': '2023-04-20 09:19:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/9bfd19293b2686cfd94448ee72d37ee34e348592', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 23, 'created': '2023-05-30 15:52:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/955c15f13e727a79330fe3a1afef80b39f041ad8', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 24, 'created': '2023-05-30 15:54:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/526b37e99c556d9a40652902c9b3296a81eba0b8', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}, {'number': 25, 'created': '2023-05-30 16:47:14.000000000', 'files': ['ansible/roles/kolla-openstack/templates/kolla/config/neutron/ml2_conf.ini', 'ansible/roles/kolla-openstack/templates/kolla/config/barbican.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/neutron.conf', 'ansible/roles/kolla-openstack/molecule/enable-everything/prepare.yml', 'ansible/roles/kolla-openstack/molecule/enable-everything/tests/test_default.py', 'ansible/roles/kolla-openstack/templates/kolla/config/keystone.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/manila.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/multipath.conf', 'requirements.txt', 'ansible/roles/kolla-openstack/templates/kolla/config/magnum.conf', 'ansible/inventory/group_vars/all/kolla', 'ansible/roles/kolla-openstack/templates/kolla/config/ceilometer.conf', 'etc/kayobe/kolla.yml', 'ansible/roles/kolla-openstack/templates/kolla/config/placement.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/aodh.conf', 'kayobe/tests/molecule/utils.py', 'releasenotes/notes/feature-merge-kolla-configs-99773e2f0af2ea4b.yaml', 'ansible/roles/kolla-openstack/templates/kolla/config/sahara.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/nova.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/masakari.conf', 'ansible/roles/kolla-openstack/action_plugins/kolla_custom_config_info.py', 'ansible/roles/kolla-openstack/templates/kolla/config/cinder.conf', 'ansible/roles/image-download/tasks/main.yml', 'tools/test-molecule.sh', 'ansible/roles/kolla-openstack/templates/kolla/config/backup.my.cnf', 'ansible/roles/kolla-openstack/templates/kolla/config/ironic-inspector.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/blazar.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/galera.cnf', 'ansible/roles/kolla-openstack/molecule/enable-everything/destroy.yml', 'ansible/roles/kolla-openstack/molecule/default/tests/test_default.py', 'ansible/roles/kolla-openstack/templates/kolla/config/murano.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/octavia.conf', 'ansible/roles/kolla-openstack/molecule/enable-everything/molecule.yml', 'ansible/kolla-openstack.yml', 'doc/source/multiple-environments.rst', 'ansible/roles/kolla-openstack/vars/main.yml', 'ansible/roles/kolla-openstack/tasks/config.yml', 'ansible/roles/kolla-openstack/templates/kolla/config/glance.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/gnocchi.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/global.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/designate.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/ironic.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/cloudkitty.conf', 'ansible/roles/kolla-openstack/templates/kolla/config/grafana.ini', 'ansible/roles/kolla-openstack/defaults/main.yml', 'ansible/roles/kolla-openstack/templates/kolla/config/heat.conf'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/428ef10fa4d4a281f0c690876fc3cbfff41c2bbb', 'message': 'Use merge_configs and merge_yaml to generate Kolla custom config\n\nThis patch adds new functionality - merging base & environment specific\nkolla config. This allows you to place common settings in the base\nconfiguration and only keep environment specific settings in the\nenvironment directories.\n\nChange-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d\nStory: 2002009\nTask: 42903\n'}]",78,782749,428ef10fa4d4a281f0c690876fc3cbfff41c2bbb,64,4,25,14826,,,0,"Use merge_configs and merge_yaml to generate Kolla custom config

This patch adds new functionality - merging base & environment specific
kolla config. This allows you to place common settings in the base
configuration and only keep environment specific settings in the
environment directories.

Change-Id: Id4588f4529a4522e68e22ce58711cb927fa68a9d
Story: 2002009
Task: 42903
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/49/782749/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/kolla-openstack/templates/cloudkitty.conf.j2', 'ansible/roles/kolla-openstack/templates/manila.conf.j2', 'ansible/roles/kolla-openstack/templates/grafana.ini.j2', 'ansible/roles/kolla-openstack/molecule/enable-everything/prepare.yml', 'ansible/roles/kolla-openstack/templates/aodh.conf.j2', 'ansible/roles/kolla-openstack/templates/cinder.conf.j2', 'ansible/roles/kolla-openstack/templates/backup.my.cnf.j2', 'ansible/roles/kolla-openstack/templates/barbican.conf.j2', 'ansible/roles/kolla-openstack/templates/blazar.conf.j2', 'ansible/roles/public-openrc/templates/public-openrc.sh.j2', 'ansible/roles/kolla-build/tasks/main.yml', 'ansible/roles/kolla-openstack/templates/heat.conf.j2', 'ansible/kolla-bifrost.yml', 'ansible/roles/kolla-bifrost/defaults/main.yml', 'ansible/roles/kolla-openstack/templates/kafka.server.properties.j2', 'ansible/roles/kolla-openstack/templates/keystone.conf.j2', 'ansible/roles/kolla-openstack/templates/global.conf.j2', 'ansible/roles/kolla-openstack/templates/zookeeper.cfg.j2', 'ansible/roles/kolla-openstack/templates/glance.conf.j2', 'ansible/roles/kolla-openstack/templates/gnocchi.conf.j2', 'ansible/roles/kolla-openstack/templates/ceilometer.conf.j2', 'ansible/roles/kolla-openstack/templates/ml2_conf.ini.j2', 'ansible/roles/kolla-openstack/templates/neutron.conf.j2', 'ansible/roles/kolla-openstack/templates/octavia.conf.j2', 'ansible/roles/kolla-openstack/templates/sahara.conf.j2', 'ansible/roles/kolla-openstack/templates/galera.cnf.j2', 'ansible/roles/kolla-bifrost/tasks/main.yml', 'ansible/roles/kolla-openstack/templates/designate.conf.j2', 'tools/test-molecule.sh', 'ansible/roles/kolla-openstack/templates/murano.conf.j2', 'ansible/roles/kolla-openstack/molecule/default/molecule.yml', 'ansible/roles/kolla-openstack/molecule/enable-everything/molecule.yml', 'ansible/kolla-openstack.yml', 'ansible/roles/dell-switch-bmp/templates/dell-switch-bmp.conf.j2', 'ansible/roles/kolla-openstack/tasks/config.yml', 'ansible/roles/kolla-openstack/templates/masakari.conf.j2', 'ansible/roles/kolla-openstack/templates/nova.conf.j2', 'ansible/roles/kolla-build/templates/kolla-build.conf.j2', 'ansible/roles/kolla-openstack/templates/magnum.conf.j2', 'ansible/roles/kolla-build/templates/template-override.j2.j2', 'zuul.d/project.yaml', 'ansible/roles/kolla-openstack/templates/ironic.conf.j2', 'ansible/roles/kolla-openstack/defaults/main.yml']",43,1ce804e9f1e09fd9780ff9566a2590e5525faf64,merge-configs,# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:# Deprecated:,,126,247
openstack%2Fkayobe~803064,openstack/kayobe,master,I0748f7bd3e6f7f91e35b2178acb6973e99710f88,Add cached plugin,MERGED,2021-07-30 18:06:49.000000000,2023-09-01 18:12:23.000000000,2023-09-01 18:12:23.000000000,"[{'_account_id': 14200}, {'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2021-07-30 18:06:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/6405bb3468176460f01cbf910c603eb0bb893b20', 'message': 'Add cached plugin\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 2, 'created': '2022-10-07 15:16:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/0cecd10197978b2525ca3dd69272331cc886f32e', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 3, 'created': '2023-03-07 10:22:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/3889e13bf14542aa2806f67ce2e13e72dfff2cfe', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 4, 'created': '2023-03-07 10:29:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/6de6ca59b62a9457d71f86b88c8648c157abced0', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 5, 'created': '2023-04-19 14:07:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b8cb10e17970fb4d1a54bd4fb332210efb7990e7', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 6, 'created': '2023-04-19 14:09:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/f94c5901a61beee85cc9d5408e165107164487cd', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 7, 'created': '2023-04-19 15:40:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/406b40869b582e4e87e314511b4ffc11ed6b6af0', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 8, 'created': '2023-04-20 09:19:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/3c49d0a413e5ff711bbfdf0f651190101dcedc5e', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}, {'number': 9, 'created': '2023-05-30 19:18:26.000000000', 'files': ['requirements.txt', 'ansible/lookup_plugins/cached.py'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/a46b3ebc8e5ffbc4f175fa23cd103d595ea1ffed', 'message': 'Add cached plugin\n\nThis is useful to cache expensive lookups.\n\nChange-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88\n'}]",3,803064,a46b3ebc8e5ffbc4f175fa23cd103d595ea1ffed,25,4,9,28048,,,0,"Add cached plugin

This is useful to cache expensive lookups.

Change-Id: I0748f7bd3e6f7f91e35b2178acb6973e99710f88
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/64/803064/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'ansible/lookup_plugins/cached.py']",2,6405bb3468176460f01cbf910c603eb0bb893b20,merge-configs,from ansible_cached_lookup import LookupModule ,,2,0
openstack%2Frequirements~893526,openstack/requirements,master,I24de9a6c78e4aa48915082a298cb6d3cebb424e6,update constraint for python-troveclient to new release 8.2.1,MERGED,2023-09-01 14:43:40.000000000,2023-09-01 18:01:10.000000000,2023-09-01 18:00:20.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 14:43:40.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/9cce428bf71b07bddf724f0929f02e3a7efe62af', 'message': 'update constraint for python-troveclient to new release 8.2.1\n\nmeta: version: 8.2.1\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Herv Beraud <hberaud@redhat.com>\nmeta: release:Commit: Herv Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: I5364282e22c3b1f4267664e525248f2256db7a96\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: I24de9a6c78e4aa48915082a298cb6d3cebb424e6\n'}]",0,893526,9cce428bf71b07bddf724f0929f02e3a7efe62af,7,2,1,11131,,,0,"update constraint for python-troveclient to new release 8.2.1

meta: version: 8.2.1
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Herv Beraud <hberaud@redhat.com>
meta: release:Commit: Herv Beraud <hberaud@redhat.com>
meta: release:Change-Id: I5364282e22c3b1f4267664e525248f2256db7a96
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: I24de9a6c78e4aa48915082a298cb6d3cebb424e6
",git fetch https://review.opendev.org/openstack/requirements refs/changes/26/893526/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,9cce428bf71b07bddf724f0929f02e3a7efe62af,new-release,python-troveclient===8.2.1,python-troveclient===8.2.0,1,1
openstack%2Frequirements~893524,openstack/requirements,master,Id6b6f86de23c221fe31bac59173a63e79e47c68d,update constraint for python-cloudkittyclient to new release 4.8.0,MERGED,2023-09-01 14:38:32.000000000,2023-09-01 17:58:45.000000000,2023-09-01 17:57:56.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 14:38:32.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/359dca14a27551e362caaa90496ab068ca8e8f75', 'message': 'update constraint for python-cloudkittyclient to new release 4.8.0\n\nmeta: version: 4.8.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Herv Beraud <hberaud@redhat.com>\nmeta: release:Commit: Rafael Weingrtner <rafael@apache.org>\nmeta: release:Change-Id: I80a23149c189246141b140ffd52ecf05c7124cbf\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+1: Rafael Weingartner <rafael@apache.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: Id6b6f86de23c221fe31bac59173a63e79e47c68d\n'}]",0,893524,359dca14a27551e362caaa90496ab068ca8e8f75,7,2,1,11131,,,0,"update constraint for python-cloudkittyclient to new release 4.8.0

meta: version: 4.8.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Herv Beraud <hberaud@redhat.com>
meta: release:Commit: Rafael Weingrtner <rafael@apache.org>
meta: release:Change-Id: I80a23149c189246141b140ffd52ecf05c7124cbf
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+1: Rafael Weingartner <rafael@apache.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: Id6b6f86de23c221fe31bac59173a63e79e47c68d
",git fetch https://review.opendev.org/openstack/requirements refs/changes/24/893524/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,359dca14a27551e362caaa90496ab068ca8e8f75,new-release,python-cloudkittyclient===4.8.0,python-cloudkittyclient===4.7.0,1,1
openstack%2Fansible-collections-openstack~880534,openstack/ansible-collections-openstack,master,I9f1bdc06ab17e20c4d1d2c15880bded101d90c65,VPN ipsec policy module,NEW,2023-04-14 14:43:43.000000000,2023-09-01 17:54:01.000000000,,"[{'_account_id': 22348}, {'_account_id': 32962}]","[{'number': 1, 'created': '2023-04-14 14:43:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/188d978b26c09472169c13fe45050e2e0db1961a', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}, {'number': 2, 'created': '2023-04-14 16:38:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/768d855ec59b4e45a92010b0ac1bd1f6a06beade', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}, {'number': 3, 'created': '2023-04-14 17:41:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/469686a64dfa87317bcc8a12741aa0902f0311aa', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}, {'number': 4, 'created': '2023-05-04 14:56:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/42aa091d2293503fa3be63f10c41deb4c410c626', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}, {'number': 5, 'created': '2023-05-04 16:16:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/5b78e07a083775d4ee3683c87acc889c7e5d3725', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}, {'number': 6, 'created': '2023-05-04 20:47:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/d709e9160698ca08e51e82d379d48e3d619c2130', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}, {'number': 7, 'created': '2023-09-01 16:05:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/c706c60bd3e421a411a7f20eb3c11f177c4b5f91', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}, {'number': 8, 'created': '2023-09-01 16:13:19.000000000', 'files': ['plugins/modules/vpn_ipsec_policy.py', 'meta/runtime.yml', 'ci/roles/vpn_service/tasks/main.yml', 'ci/run-collection.yml'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/1c6909f448d0a4de7bfaec3aac122211b1357a61', 'message': 'VPN ipsec policy module\n\nChange-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65\n'}]",0,880534,1c6909f448d0a4de7bfaec3aac122211b1357a61,15,2,8,32787,,,0,"VPN ipsec policy module

Change-Id: I9f1bdc06ab17e20c4d1d2c15880bded101d90c65
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/34/880534/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/ipsec_policy.py', 'ci/roles/vpn_service/tasks/main.yml', 'ci/run-collection.yml', 'ci/roles/vpn_service/defaults/main.yml']",4,188d978b26c09472169c13fe45050e2e0db1961a,ipsec-policy,,,324,0
openstack%2Frequirements~893523,openstack/requirements,master,Iad22f9396285a73c8f84e390761e8d844b1cad86,update constraint for ceilometermiddleware to new release 3.2.0,MERGED,2023-09-01 14:32:36.000000000,2023-09-01 17:52:48.000000000,2023-09-01 17:51:50.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 14:32:36.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/5696760acccca5652528d12dcb2d643328d30706', 'message': 'update constraint for ceilometermiddleware to new release 3.2.0\n\nmeta: version: 3.2.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: I752557ff0f6cac6845b87ac207db6a8cba892371\nmeta: release:Code-Review+1: Matthias Runge <mrunge@redhat.com>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nChange-Id: Iad22f9396285a73c8f84e390761e8d844b1cad86\n'}]",0,893523,5696760acccca5652528d12dcb2d643328d30706,7,2,1,11131,,,0,"update constraint for ceilometermiddleware to new release 3.2.0

meta: version: 3.2.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: I752557ff0f6cac6845b87ac207db6a8cba892371
meta: release:Code-Review+1: Matthias Runge <mrunge@redhat.com>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
Change-Id: Iad22f9396285a73c8f84e390761e8d844b1cad86
",git fetch https://review.opendev.org/openstack/requirements refs/changes/23/893523/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,5696760acccca5652528d12dcb2d643328d30706,new-release,ceilometermiddleware===3.2.0,ceilometermiddleware===3.1.0,1,1
openstack%2Fbarbican-tempest-plugin~889354,openstack/barbican-tempest-plugin,master,I7aeb35ff90fcc3185ef850f883b275e73d7a9eab,"Revert ""Remove secgroups related methods""",ABANDONED,2023-07-25 18:50:35.000000000,2023-09-01 17:46:48.000000000,,"[{'_account_id': 7414}, {'_account_id': 9914}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 30674}, {'_account_id': 33732}, {'_account_id': 34120}]","[{'number': 1, 'created': '2023-07-25 18:50:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/fd48eddce21c59c547dc893c964cdb1b337683ef', 'message': 'Revert ""Remove secgroups related methods""\n\nThis reverts commit 29541dcf25610b5626ba0eb547fc0e16d6dfb8e6.\n\nReason for revert: This change broke the stable/victoria branch in openstack/barbican repo\n\nChange-Id: I7aeb35ff90fcc3185ef850f883b275e73d7a9eab\n'}, {'number': 2, 'created': '2023-07-25 18:56:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/3f92ff70566c01051ba2dc007ec932b1e007f0b9', 'message': 'Revert ""Remove secgroups related methods""\n\nThis reverts commit 29541dcf25610b5626ba0eb547fc0e16d6dfb8e6.\n\nReason for revert: This change broke the stable/victoria branch in\nthe openstack/barbican repo\n\nChange-Id: I7aeb35ff90fcc3185ef850f883b275e73d7a9eab\n'}, {'number': 3, 'created': '2023-07-25 19:41:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/bfb6f7f4de379a5837f841e3702a3d7932782cf7', 'message': 'Revert ""Remove secgroups related methods""\n\nThis reverts commit 29541dcf25610b5626ba0eb547fc0e16d6dfb8e6.\n\nReason for revert: This change broke the stable/victoria branch in\nthe openstack/barbican repo\n\nChange-Id: I7aeb35ff90fcc3185ef850f883b275e73d7a9eab\n'}, {'number': 4, 'created': '2023-07-25 19:49:52.000000000', 'files': ['barbican_tempest_plugin/tests/scenario/test_ephemeral_disk_encryption.py', 'barbican_tempest_plugin/tests/scenario/test_volume_encryption.py', 'tox.ini', 'barbican_tempest_plugin/tests/scenario/manager.py'], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/5069a42a508d2ef24fbb8e013d1c51a0d58c4531', 'message': 'Revert ""Remove secgroups related methods""\n\nThis reverts commit 29541dcf25610b5626ba0eb547fc0e16d6dfb8e6.\n\nReason for revert: This change broke the stable/victoria branch in\nthe openstack/barbican repo\n\nChange-Id: I7aeb35ff90fcc3185ef850f883b275e73d7a9eab\n'}]",6,889354,5069a42a508d2ef24fbb8e013d1c51a0d58c4531,14,8,4,7973,,,0,"Revert ""Remove secgroups related methods""

This reverts commit 29541dcf25610b5626ba0eb547fc0e16d6dfb8e6.

Reason for revert: This change broke the stable/victoria branch in
the openstack/barbican repo

Change-Id: I7aeb35ff90fcc3185ef850f883b275e73d7a9eab
",git fetch https://review.opendev.org/openstack/barbican-tempest-plugin refs/changes/54/889354/1 && git format-patch -1 --stdout FETCH_HEAD,"['barbican_tempest_plugin/tests/scenario/test_ephemeral_disk_encryption.py', 'barbican_tempest_plugin/tests/scenario/test_volume_encryption.py', 'barbican_tempest_plugin/tests/scenario/manager.py']",3,fd48eddce21c59c547dc893c964cdb1b337683ef,tempest-scenario-manager-cleanup,"from tempest.lib.common.utils import test_utils # Nova security groups client cls.compute_security_groups_client = ( cls.os_primary.compute_security_groups_client) cls.compute_security_group_rules_client = ( cls.os_primary.compute_security_group_rules_client) cls.servers_client = cls.os_primary.servers_client def _default_security_group(self, client=None, tenant_id=None): """"""Get default secgroup for given tenant_id. :returns: default secgroup for given tenant """""" if client is None: client = self.security_groups_client if not tenant_id: tenant_id = client.tenant_id sgs = [ sg for sg in list(client.list_security_groups().values())[0] if sg['tenant_id'] == tenant_id and sg['name'] == 'default' ] msg = ""No default security group for tenant %s."" % (tenant_id) self.assertGreater(len(sgs), 0, msg) return sgs[0] def _create_security_group(self): # Create security group sg_name = data_utils.rand_name(self.__class__.__name__) sg_desc = sg_name + "" description"" secgroup = self.compute_security_groups_client.create_security_group( name=sg_name, description=sg_desc)['security_group'] self.assertEqual(secgroup['name'], sg_name) self.assertEqual(secgroup['description'], sg_desc) self.addCleanup( test_utils.call_and_ignore_notfound_exc, self.compute_security_groups_client.delete_security_group, secgroup['id']) # Add rules to the security group self._create_loginable_secgroup_rule(secgroup['id']) return secgroup def _create_loginable_secgroup_rule(self, secgroup_id=None): _client = self.compute_security_groups_client _client_rules = self.compute_security_group_rules_client if secgroup_id is None: sgs = _client.list_security_groups()['security_groups'] for sg in sgs: if sg['name'] == 'default': secgroup_id = sg['id'] # These rules are intended to permit inbound ssh and icmp # traffic from all sources, so no group_id is provided. # Setting a group_id would only permit traffic from ports # belonging to the same security group. rulesets = [ { # ssh 'ip_protocol': 'tcp', 'from_port': 22, 'to_port': 22, 'cidr': '0.0.0.0/0', }, { # ping 'ip_protocol': 'icmp', 'from_port': -1, 'to_port': -1, 'cidr': '0.0.0.0/0', } ] rules = list() for ruleset in rulesets: sg_rule = _client_rules.create_security_group_rule( parent_group_id=secgroup_id, **ruleset)['security_group_rule'] rules.append(sg_rule) return rules def _create_security_group_rule(self, secgroup=None, sec_group_rules_client=None, tenant_id=None, security_groups_client=None, **kwargs): """"""Create a rule from a dictionary of rule parameters. Create a rule in a secgroup. if secgroup not defined will search for default secgroup in tenant_id. :param secgroup: the security group. :param tenant_id: if secgroup not passed -- the tenant in which to search for default secgroup :param kwargs: a dictionary containing rule parameters: for example, to allow incoming ssh: rule = { direction: 'ingress' protocol:'tcp', port_range_min: 22, port_range_max: 22 } """""" if sec_group_rules_client is None: sec_group_rules_client = self.security_group_rules_client if security_groups_client is None: security_groups_client = self.security_groups_client if not tenant_id: tenant_id = security_groups_client.tenant_id if secgroup is None: secgroup = self._default_security_group( client=security_groups_client, tenant_id=tenant_id) ruleset = dict(security_group_id=secgroup['id'], tenant_id=secgroup['tenant_id']) ruleset.update(kwargs) sg_rule = sec_group_rules_client.create_security_group_rule(**ruleset) sg_rule = sg_rule['security_group_rule'] self.assertEqual(secgroup['tenant_id'], sg_rule['tenant_id']) self.assertEqual(secgroup['id'], sg_rule['security_group_id']) return sg_rule",,124,3
openstack%2Fopenstack-ansible~890522,openstack/openstack-ansible,master,I5ed49878c192516a504a4a77902271214800c5b8,Enable multiple console proxies when required in deployments,MERGED,2023-08-04 12:57:59.000000000,2023-09-01 17:46:16.000000000,2023-09-01 17:45:10.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-04 12:57:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/f6a7226cbfc01c32f7721be4dbabcdf79f6d51ac', 'message': ""Enable multiple console proxies when required in deployments\n\nWhen Nova is deployed with a mix of x86 and arm systems\n(for example), it may be necessary to deploy both 'novnc' and\n'serialconsole' proxy services on the same host in order to\nservice the mixed compute estate.\n\nThis patch introduces a list which defines the required proxy\nconsole types.\n\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible-os_nova/+/890521\n\nChange-Id: I5ed49878c192516a504a4a77902271214800c5b8\n""}, {'number': 2, 'created': '2023-09-01 08:00:00.000000000', 'files': ['inventory/group_vars/nova_all/haproxy_service.yml', 'inventory/group_vars/all/nova.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/66d0dc7626656457b259a142c06bf8428a00c0b5', 'message': ""Enable multiple console proxies when required in deployments\n\nWhen Nova is deployed with a mix of x86 and arm systems\n(for example), it may be necessary to deploy both 'novnc' and\n'serialconsole' proxy services on the same host in order to\nservice the mixed compute estate.\n\nThis patch introduces a list which defines the required proxy\nconsole types.\n\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible-os_nova/+/890521\n\nChange-Id: I5ed49878c192516a504a4a77902271214800c5b8\n""}]",4,890522,66d0dc7626656457b259a142c06bf8428a00c0b5,20,3,2,31542,,,0,"Enable multiple console proxies when required in deployments

When Nova is deployed with a mix of x86 and arm systems
(for example), it may be necessary to deploy both 'novnc' and
'serialconsole' proxy services on the same host in order to
service the mixed compute estate.

This patch introduces a list which defines the required proxy
console types.

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible-os_nova/+/890521

Change-Id: I5ed49878c192516a504a4a77902271214800c5b8
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/22/890522/1 && git format-patch -1 --stdout FETCH_HEAD,"['inventory/group_vars/nova_all/haproxy_service.yml', 'inventory/group_vars/all/nova.yml']",2,f6a7226cbfc01c32f7721be4dbabcdf79f6d51ac,osa-nova-consoles,"# Default nova console proxy types nova_console_proxy_types: - ""{{ nova_console_type | default((ansible_facts['architecture'] == 'aarch64') | ternary('serialconsole', 'novnc')) }}"" - ""{{ ironic_console_type }}"" ","# Default nova console type nova_console_type: ""{{ (ansible_facts['architecture'] == 'aarch64') | ternary('serialconsole', 'novnc') }}""",8,6
openstack%2Frequirements~893519,openstack/requirements,master,I7b7a78e54ed6569dd6c26a3e61a23023c0c3123e,update constraint for python-swiftclient to new release 4.4.0,MERGED,2023-09-01 13:47:20.000000000,2023-09-01 17:41:12.000000000,2023-09-01 17:40:22.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 13:47:20.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/d6cc7d783e9559e2265510321f054967d791f935', 'message': 'update constraint for python-swiftclient to new release 4.4.0\n\nmeta: version: 4.4.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Tim Burke <tim.burke@gmail.com>\nmeta: release:Commit: Tim Burke <tim.burke@gmail.com>\nmeta: release:Change-Id: I78899b6d11c6b3338a626804335966c224c6e552\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nChange-Id: I7b7a78e54ed6569dd6c26a3e61a23023c0c3123e\n'}]",0,893519,d6cc7d783e9559e2265510321f054967d791f935,7,2,1,11131,,,0,"update constraint for python-swiftclient to new release 4.4.0

meta: version: 4.4.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Tim Burke <tim.burke@gmail.com>
meta: release:Commit: Tim Burke <tim.burke@gmail.com>
meta: release:Change-Id: I78899b6d11c6b3338a626804335966c224c6e552
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
Change-Id: I7b7a78e54ed6569dd6c26a3e61a23023c0c3123e
",git fetch https://review.opendev.org/openstack/requirements refs/changes/19/893519/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,d6cc7d783e9559e2265510321f054967d791f935,new-release,python-swiftclient===4.4.0,python-swiftclient===4.3.0,1,1
openstack%2Fansible-collections-openstack~880531,openstack/ansible-collections-openstack,master,I7c0680ca084d05ad46d25c6fe74fcee56482634d,VPN ike policy module,NEW,2023-04-14 14:04:46.000000000,2023-09-01 17:35:25.000000000,,"[{'_account_id': 22348}, {'_account_id': 27900}, {'_account_id': 32962}]","[{'number': 1, 'created': '2023-04-14 14:04:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/bc826c0212de4c3e105a83e863ebf9b82b672629', 'message': 'VPN ike policy module\n\nChange-Id: I7c0680ca084d05ad46d25c6fe74fcee56482634d\n'}, {'number': 2, 'created': '2023-04-14 21:13:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/060a1f6084749340868d9213160b5291c2c1134b', 'message': 'VPN ike policy module\n\nChange-Id: I7c0680ca084d05ad46d25c6fe74fcee56482634d\n'}, {'number': 3, 'created': '2023-04-18 10:24:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/20caae664b73db4a03969328a66d86f244e91605', 'message': 'VPN ike policy module\n\nChange-Id: I7c0680ca084d05ad46d25c6fe74fcee56482634d\n'}, {'number': 4, 'created': '2023-09-01 15:56:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/61e0a2acf0cbb23bb86e1957b59cfba07d75cad4', 'message': 'VPN ike policy module\n\nChange-Id: I7c0680ca084d05ad46d25c6fe74fcee56482634d\n'}, {'number': 5, 'created': '2023-09-01 15:58:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/0ab4b5f5cca51e8afeca51b99f1fed4055491b6f', 'message': 'VPN ike policy module\n\nChange-Id: I7c0680ca084d05ad46d25c6fe74fcee56482634d\n'}, {'number': 6, 'created': '2023-09-01 16:01:25.000000000', 'files': ['plugins/modules/vpn_ike_policy.py', 'meta/runtime.yml', 'ci/roles/vpn_service/tasks/main.yml', 'ci/roles/vpn_service/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/1c662e8280a931139a554de880f9071094b4834b', 'message': 'VPN ike policy module\n\nChange-Id: I7c0680ca084d05ad46d25c6fe74fcee56482634d\n'}]",20,880531,1c662e8280a931139a554de880f9071094b4834b,14,3,6,32787,,,0,"VPN ike policy module

Change-Id: I7c0680ca084d05ad46d25c6fe74fcee56482634d
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/31/880531/1 && git format-patch -1 --stdout FETCH_HEAD,"['meta/runtime.yml', 'plugins/modules/ike_policy.py', 'ci/roles/vpn_service/tasks/main.yml', 'ci/roles/vpn_service/defaults/main.yml']",4,bc826c0212de4c3e105a83e863ebf9b82b672629,ike-policy,,,283,0
openstack%2Fopenstack-ansible~893191,openstack/openstack-ansible,master,Ib7fc3068ecc339e02d641196513c1b676a9a9f69,Fix ansible_ssh_extra_args extra newline,MERGED,2023-08-30 13:57:55.000000000,2023-09-01 17:13:00.000000000,2023-09-01 17:11:46.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}, {'_account_id': 31542}]","[{'number': 1, 'created': '2023-08-30 13:57:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/63cb900b3861fce74d832775a74ea3341c13141b', 'message': 'Fix ansible_ssh_extra_args extra newline\n\nThis breaks the use of the ansible synchronize module\nwhen the parameter use_ssh_args is true with an error\nfrom ssh via rsync that there is an unknown parameter.\n\nRemoving the newline makes the synchronize module\nwork correctly.\n\nChange-Id: Ib7fc3068ecc339e02d641196513c1b676a9a9f69\n'}, {'number': 2, 'created': '2023-08-31 15:58:02.000000000', 'files': ['inventory/group_vars/all/all.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/a831e4b6c130742018ea28e61aeed09c933aea2e', 'message': 'Fix ansible_ssh_extra_args extra newline\n\nThis breaks the use of the ansible synchronize module\nwhen the parameter use_ssh_args is true with an error\nfrom ssh via rsync that there is an unknown parameter.\n\nRemoving the newline makes the synchronize module\nwork correctly.\n\nChange-Id: Ib7fc3068ecc339e02d641196513c1b676a9a9f69\n'}]",0,893191,a831e4b6c130742018ea28e61aeed09c933aea2e,11,3,2,25023,,,0,"Fix ansible_ssh_extra_args extra newline

This breaks the use of the ansible synchronize module
when the parameter use_ssh_args is true with an error
from ssh via rsync that there is an unknown parameter.

Removing the newline makes the synchronize module
work correctly.

Change-Id: Ib7fc3068ecc339e02d641196513c1b676a9a9f69
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/91/893191/1 && git format-patch -1 --stdout FETCH_HEAD,['inventory/group_vars/all/all.yml'],1,63cb900b3861fce74d832775a74ea3341c13141b,,ansible_ssh_extra_args: >-,ansible_ssh_extra_args: >,1,1
openstack%2Fplacement~840778,openstack/placement,stable/train,If7e6060c867df21360a1f588ca872d65d75eb3c1,Use 'functional-without-sample-db-tests' tox env for placement nova job,ABANDONED,2022-05-05 22:25:46.000000000,2023-09-01 17:08:02.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-05-05 22:25:46.000000000', 'files': ['requirements.txt', '.zuul.yaml', 'lower-constraints.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/placement/commit/42b153a52ca4e279d7b0e45ef42df442622fce0e', 'message': ""Use 'functional-without-sample-db-tests' tox env for placement nova job\n\nNOTE(melwitt): This is a combination of 2 commits needed to fix the\ngate, a chicken and egg problem where each fix depends on the other.\n\nNova defines (depends-on) a new tox env 'functional-without-sample-db-tests'\nto run the nova functional test by exlcuding the api|notification\nsample_tests, and db-related tests.\n\nWe can use that to fix the error  are facing currently for this job\n- https://zuul.openstack.org/build/a8c186b2c7124856ae32477f10e2b9a4\n\nDepends-On: https://review.opendev.org/c/openstack/nova/+/840777\n\nDrop lower-constraints.txt and its testing\n\nAs discussed in TC PTG[1] and TC resolution[2], we are\ndropping the lower-constraints.txt file and its testing.\nWe will keep lower bounds in the requirements.txt file but\nwith a note that these are not tested lower bounds and we\ntry our best to keep them updated.\n\nConflicts:\n    .zuul.yaml\n    lower-constraints.txt\n\nNOTE(melwitt): conflict is due to branch specific settings (job\ntemplate names, lower constraints changes).\n\n[1] https://etherpad.opendev.org/p/tc-zed-ptg#L326\n[2] https://governance.openstack.org/tc/resolutions/20220414-drop-lower-constraints.html#proposal\n\nChange-Id: Ieba7daf39fa3323e8c9a7396747449f24189fcd5\n(cherry picked from commit 03d567928e31d3dc85d4dd3f5617785e7380b6b1)\n(cherry picked from commit 4d3df47ee3e394e3178d58c15306620809ad2806)\n(cherry picked from commit f96984abd48f4d938d0fff0bab9b12ed933e320e)\n\nChange-Id: If7e6060c867df21360a1f588ca872d65d75eb3c1\n(cherry picked from commit 6d49b6df1d3f62e2003c55509875380148281a79)\n(cherry picked from commit 7422ed4d7adb26868602a3f4652119ff0392d298)\n(cherry picked from commit 69dcdcb2b7df0a81addec55804ce91c724ca0f54)\n(cherry picked from commit 503b1f27cefeadf127d3f9f274901eba52f67c01)\n(cherry picked from commit 445a7b544b5fce45a2e79046df1fdc2548e6db9e)\n""}]",0,840778,42b153a52ca4e279d7b0e45ef42df442622fce0e,3,1,1,4690,,,0,"Use 'functional-without-sample-db-tests' tox env for placement nova job

NOTE(melwitt): This is a combination of 2 commits needed to fix the
gate, a chicken and egg problem where each fix depends on the other.

Nova defines (depends-on) a new tox env 'functional-without-sample-db-tests'
to run the nova functional test by exlcuding the api|notification
sample_tests, and db-related tests.

We can use that to fix the error  are facing currently for this job
- https://zuul.openstack.org/build/a8c186b2c7124856ae32477f10e2b9a4

Depends-On: https://review.opendev.org/c/openstack/nova/+/840777

Drop lower-constraints.txt and its testing

As discussed in TC PTG[1] and TC resolution[2], we are
dropping the lower-constraints.txt file and its testing.
We will keep lower bounds in the requirements.txt file but
with a note that these are not tested lower bounds and we
try our best to keep them updated.

Conflicts:
    .zuul.yaml
    lower-constraints.txt

NOTE(melwitt): conflict is due to branch specific settings (job
template names, lower constraints changes).

[1] https://etherpad.opendev.org/p/tc-zed-ptg#L326
[2] https://governance.openstack.org/tc/resolutions/20220414-drop-lower-constraints.html#proposal

Change-Id: Ieba7daf39fa3323e8c9a7396747449f24189fcd5
(cherry picked from commit 03d567928e31d3dc85d4dd3f5617785e7380b6b1)
(cherry picked from commit 4d3df47ee3e394e3178d58c15306620809ad2806)
(cherry picked from commit f96984abd48f4d938d0fff0bab9b12ed933e320e)

Change-Id: If7e6060c867df21360a1f588ca872d65d75eb3c1
(cherry picked from commit 6d49b6df1d3f62e2003c55509875380148281a79)
(cherry picked from commit 7422ed4d7adb26868602a3f4652119ff0392d298)
(cherry picked from commit 69dcdcb2b7df0a81addec55804ce91c724ca0f54)
(cherry picked from commit 503b1f27cefeadf127d3f9f274901eba52f67c01)
(cherry picked from commit 445a7b544b5fce45a2e79046df1fdc2548e6db9e)
",git fetch https://review.opendev.org/openstack/placement refs/changes/78/840778/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', '.zuul.yaml', 'lower-constraints.txt', 'tox.ini']",4,42b153a52ca4e279d7b0e45ef42df442622fce0e,bug/1780799,," [testenv:lower-constraints] # When using pbr and in a git repo, 'setup.py install' does not install # packages. 'setup.py develop', used when usedevelop is True, does. usedevelop = False # Use our own install_command to turn off upper constraints, which conflicts # with lower constraints. install_command = pip install {opts} {packages} deps = -c{toxinidir}/lower-constraints.txt -r{toxinidir}/test-requirements.txt -r{toxinidir}/requirements.txt # Test with both functional and unit tests. commands = {[testenv]commands} stestr --test-path=./placement/tests run {posargs}",7,113
openstack%2Fplacement~840704,openstack/placement,stable/train,I569043dd9f1c964faf7d4fcbb901a93f9569bf3d,placement-status: check only consumers in allocation table,ABANDONED,2022-05-05 16:30:44.000000000,2023-09-01 17:07:55.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-05-05 16:30:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/placement/commit/7106835853bbd242e07333cb57cbef38697eef1c', 'message': ""placement-status: check only consumers in allocation table\n\nInitially, _check_incomplete_consumers was intended to find the case\nwhen consumers are mentioned in allocation but do not exist in the\nconsumer table. Due to a bug it's possible to have rows in the\nconsumer table those are not in the allocation table. The second case\nit seems was not expected and it can be tricky to automate a cleanup\nwith zero touch upgrade.\n\nThis patch modifies the check such way it counts only consumers\npresented in the allocation table.\n\nRelated-bug: #1780799\nChange-Id: I569043dd9f1c964faf7d4fcbb901a93f9569bf3d\n(cherry picked from commit 3253e2efc05836b0b5cefafbf2b2656e9e1a50c7)\n(cherry picked from commit 69a0fb8bae4bc2538df266d8cbd788ac2ad61094)\n(cherry picked from commit abbec22662a8ea949f252acee4eb5f8f4d2242a4)\n(cherry picked from commit d8bb1b06dd69834523ebec26f418ad08d982aecc)\n""}, {'number': 2, 'created': '2022-05-05 22:25:46.000000000', 'files': ['placement/tests/functional/db/test_consumer.py', 'placement/cmd/status.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/e58d4ab28fa51a2d7eeed99ff898bf1b8171fb48', 'message': ""placement-status: check only consumers in allocation table\n\nInitially, _check_incomplete_consumers was intended to find the case\nwhen consumers are mentioned in allocation but do not exist in the\nconsumer table. Due to a bug it's possible to have rows in the\nconsumer table those are not in the allocation table. The second case\nit seems was not expected and it can be tricky to automate a cleanup\nwith zero touch upgrade.\n\nThis patch modifies the check such way it counts only consumers\npresented in the allocation table.\n\nRelated-bug: #1780799\nChange-Id: I569043dd9f1c964faf7d4fcbb901a93f9569bf3d\n(cherry picked from commit 3253e2efc05836b0b5cefafbf2b2656e9e1a50c7)\n(cherry picked from commit 69a0fb8bae4bc2538df266d8cbd788ac2ad61094)\n(cherry picked from commit abbec22662a8ea949f252acee4eb5f8f4d2242a4)\n(cherry picked from commit d8bb1b06dd69834523ebec26f418ad08d982aecc)\n""}]",2,840704,e58d4ab28fa51a2d7eeed99ff898bf1b8171fb48,6,2,2,4690,,,0,"placement-status: check only consumers in allocation table

Initially, _check_incomplete_consumers was intended to find the case
when consumers are mentioned in allocation but do not exist in the
consumer table. Due to a bug it's possible to have rows in the
consumer table those are not in the allocation table. The second case
it seems was not expected and it can be tricky to automate a cleanup
with zero touch upgrade.

This patch modifies the check such way it counts only consumers
presented in the allocation table.

Related-bug: #1780799
Change-Id: I569043dd9f1c964faf7d4fcbb901a93f9569bf3d
(cherry picked from commit 3253e2efc05836b0b5cefafbf2b2656e9e1a50c7)
(cherry picked from commit 69a0fb8bae4bc2538df266d8cbd788ac2ad61094)
(cherry picked from commit abbec22662a8ea949f252acee4eb5f8f4d2242a4)
(cherry picked from commit d8bb1b06dd69834523ebec26f418ad08d982aecc)
",git fetch https://review.opendev.org/openstack/placement refs/changes/04/840704/1 && git format-patch -1 --stdout FETCH_HEAD,"['placement/tests/functional/db/test_consumer.py', 'placement/cmd/status.py']",2,7106835853bbd242e07333cb57cbef38697eef1c,bug/1780799," allocation = models.Allocation.__table__ consumer = models.Consumer.__table__ return ctxt.session.execute( sa.select([sa.func.count( sa.distinct(allocation.c.consumer_id))]) .select_from( allocation.outerjoin( consumer, allocation.c.consumer_id == consumer.c.uuid)) .where(consumer.c.id.is_(None))).fetchone()[0]", # Count the total number of consumers. num_consumers = ctxt.session.query(models.Consumer).count() # Count the total number of unique consumers in the allocations table. num_alloc_consumers = ctxt.session.query(models.Allocation).group_by( models.Allocation.consumer_id).count() return num_alloc_consumers - num_consumers,19,6
openstack%2Fos-vif~841779,openstack/os-vif,stable/train,I984ec62730276f8ee60d71a02a98fbfc4c37f7d8,Use TCP keepalives for ovsdb connections,ABANDONED,2022-05-13 16:14:20.000000000,2023-09-01 17:07:27.000000000,,"[{'_account_id': 11604}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-05-13 16:14:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/ea99a05cd26461ca0bb95156eca1a54eda671c08', 'message': ""Use TCP keepalives for ovsdb connections\n\nUltimately, this is something that should be fixed in python-ovs,\nbut setting the SO_KEEPALIVE socket option benefits the client by\nremoving the need to send 'echo' requests, which can time out on\nan overloaded ovsdb-server, which causes a disconnection which then#\nadds even more load on the ovsdb-server as it has to send the entire\ndb contents over the wire after the connection is restored.\n\nThis patch ports the optimisation form neutron to reduce the likelyhood\nof a reconnection which can cause the nova compute agent to hang\ntemporarily while the connection is reestablished.\n\nChange-Id: I984ec62730276f8ee60d71a02a98fbfc4c37f7d8\nRelated-Bug: #1930926\nPartial-Bug: #1929446\n(cherry picked from commit 09c0629bb728ad342a41d844143d8e7437c925c4)\n(cherry picked from commit 26f073f0969cfd9719375a4edfc16ce4ec139c4f)\n(cherry picked from commit 700b8cc377c6caa79e8d98cd55b34d77f23ff780)\n(cherry picked from commit 9d1279e3289662ba2dffea7db7427ac7d228bb2e)\n(cherry picked from commit c2d6bf427f014e319fe9ef6f336adc0ce36815ad)\n""}, {'number': 2, 'created': '2023-07-10 18:40:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/74888b2956ce97c9881452879fcce6529754c13a', 'message': ""Use TCP keepalives for ovsdb connections\n\nUltimately, this is something that should be fixed in python-ovs,\nbut setting the SO_KEEPALIVE socket option benefits the client by\nremoving the need to send 'echo' requests, which can time out on\nan overloaded ovsdb-server, which causes a disconnection which then#\nadds even more load on the ovsdb-server as it has to send the entire\ndb contents over the wire after the connection is restored.\n\nThis patch ports the optimisation form neutron to reduce the likelyhood\nof a reconnection which can cause the nova compute agent to hang\ntemporarily while the connection is reestablished.\n\nNote: explict use of new style classes is reintoduced for py27 pep8\nchecks in vif_plug_ovs/ovsdb/impl_idl.py\nNoProbesMixin: -> NoProbesMixin(object):\n\nChange-Id: I984ec62730276f8ee60d71a02a98fbfc4c37f7d8\nRelated-Bug: #1930926\nPartial-Bug: #1929446\n(cherry picked from commit 09c0629bb728ad342a41d844143d8e7437c925c4)\n(cherry picked from commit 26f073f0969cfd9719375a4edfc16ce4ec139c4f)\n(cherry picked from commit 700b8cc377c6caa79e8d98cd55b34d77f23ff780)\n(cherry picked from commit 9d1279e3289662ba2dffea7db7427ac7d228bb2e)\n(cherry picked from commit c2d6bf427f014e319fe9ef6f336adc0ce36815ad)\n""}, {'number': 3, 'created': '2023-07-10 19:08:13.000000000', 'files': ['vif_plug_ovs/ovsdb/impl_idl.py'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/ef5019e0e959e450069947738897b680ee3040c8', 'message': ""Use TCP keepalives for ovsdb connections\n\nUltimately, this is something that should be fixed in python-ovs,\nbut setting the SO_KEEPALIVE socket option benefits the client by\nremoving the need to send 'echo' requests, which can time out on\nan overloaded ovsdb-server, which causes a disconnection which then#\nadds even more load on the ovsdb-server as it has to send the entire\ndb contents over the wire after the connection is restored.\n\nThis patch ports the optimisation form neutron to reduce the likelyhood\nof a reconnection which can cause the nova compute agent to hang\ntemporarily while the connection is reestablished.\n\nNote: explict use of new style classes is reintoduced for py27 pep8\nchecks in vif_plug_ovs/ovsdb/impl_idl.py\nNoProbesMixin: -> NoProbesMixin(object):\n\nChange-Id: I984ec62730276f8ee60d71a02a98fbfc4c37f7d8\nRelated-Bug: #1930926\nPartial-Bug: #1929446\n(cherry picked from commit 09c0629bb728ad342a41d844143d8e7437c925c4)\n(cherry picked from commit 26f073f0969cfd9719375a4edfc16ce4ec139c4f)\n(cherry picked from commit 700b8cc377c6caa79e8d98cd55b34d77f23ff780)\n(cherry picked from commit 9d1279e3289662ba2dffea7db7427ac7d228bb2e)\n(cherry picked from commit 3c46ca71bfc1048c6021b2977fe9eadcd509443d)\n""}]",2,841779,ef5019e0e959e450069947738897b680ee3040c8,9,2,3,11604,,,0,"Use TCP keepalives for ovsdb connections

Ultimately, this is something that should be fixed in python-ovs,
but setting the SO_KEEPALIVE socket option benefits the client by
removing the need to send 'echo' requests, which can time out on
an overloaded ovsdb-server, which causes a disconnection which then#
adds even more load on the ovsdb-server as it has to send the entire
db contents over the wire after the connection is restored.

This patch ports the optimisation form neutron to reduce the likelyhood
of a reconnection which can cause the nova compute agent to hang
temporarily while the connection is reestablished.

Note: explict use of new style classes is reintoduced for py27 pep8
checks in vif_plug_ovs/ovsdb/impl_idl.py
NoProbesMixin: -> NoProbesMixin(object):

Change-Id: I984ec62730276f8ee60d71a02a98fbfc4c37f7d8
Related-Bug: #1930926
Partial-Bug: #1929446
(cherry picked from commit 09c0629bb728ad342a41d844143d8e7437c925c4)
(cherry picked from commit 26f073f0969cfd9719375a4edfc16ce4ec139c4f)
(cherry picked from commit 700b8cc377c6caa79e8d98cd55b34d77f23ff780)
(cherry picked from commit 9d1279e3289662ba2dffea7db7427ac7d228bb2e)
(cherry picked from commit 3c46ca71bfc1048c6021b2977fe9eadcd509443d)
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/79/841779/1 && git format-patch -1 --stdout FETCH_HEAD,['vif_plug_ovs/ovsdb/impl_idl.py'],1,ea99a05cd26461ca0bb95156eca1a54eda671c08,bug/1929446,"import functools import socket from ovs import socket_util from ovs import stream # this is derived form https://review.opendev.org/c/openstack/neutron/+/794892 def add_keepalives(fn): @functools.wraps(fn) def _open(*args, **kwargs): error, sock = fn(*args, **kwargs) try: sock.setsockopt(socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1) except socket.error as e: sock.close() return socket_util.get_exception_errno(e), None return error, sock return _open class NoProbesMixin: @staticmethod def needs_probes(): # If we are using keepalives, we can force probe_interval=0 return False class TCPStream(stream.TCPStream, NoProbesMixin): @classmethod @add_keepalives def _open(cls, suffix, dscp): return super()._open(suffix, dscp) class SSLStream(stream.SSLStream, NoProbesMixin): @classmethod @add_keepalives def _open(cls, suffix, dscp): return super()._open(suffix, dscp) # Overwriting globals in a library is clearly a good idea stream.Stream.register_method(""tcp"", TCPStream) stream.Stream.register_method(""ssl"", SSLStream)",,45,0
openstack%2Fos-vif~841780,openstack/os-vif,stable/train,I635dff2b4fcff905ca8f431eb7e928265200f92a,only register tables used by os-vif,ABANDONED,2022-05-13 16:14:20.000000000,2023-09-01 17:07:19.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-05-13 16:14:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/08df3491a14e25e1b2b6a891d89a5031ac3d5f82', 'message': 'only register tables used by os-vif\n\nThis change limits the tables registered in the native driver\nto the set actully used by os-vif. This will shorten the inital\nstartup time and reconnection time if the ovs db connection is dropped.\nas a result this will help mitigate bug #1929446 where on reconnection\nthe nova compute agent can stall until reconnection is completed.\n\nChange-Id: I635dff2b4fcff905ca8f431eb7e928265200f92a\nPartial-Bug: #1929446\n(cherry picked from commit e4dc8b5664ccee8bde9e90fc9e618d6b705a0b68)\n(cherry picked from commit e6e791bd0af560ac501e383814fa7a5bce004536)\n(cherry picked from commit bac7f7d9d4337c60bf684d5b518c79f9aff95771)\n(cherry picked from commit 037e83f1b593153547e5c26a0ecb2dc918b90152)\n(cherry picked from commit ce81fb99c0e86792cde7c4e532d8abcbddb4aab8)\n'}, {'number': 2, 'created': '2023-07-10 18:40:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/ae71e848238837667effdca867853afa5194f0d7', 'message': 'only register tables used by os-vif\n\nThis change limits the tables registered in the native driver\nto the set actully used by os-vif. This will shorten the inital\nstartup time and reconnection time if the ovs db connection is dropped.\nas a result this will help mitigate bug #1929446 where on reconnection\nthe nova compute agent can stall until reconnection is completed.\n\nChange-Id: I635dff2b4fcff905ca8f431eb7e928265200f92a\nPartial-Bug: #1929446\n(cherry picked from commit e4dc8b5664ccee8bde9e90fc9e618d6b705a0b68)\n(cherry picked from commit e6e791bd0af560ac501e383814fa7a5bce004536)\n(cherry picked from commit bac7f7d9d4337c60bf684d5b518c79f9aff95771)\n(cherry picked from commit 037e83f1b593153547e5c26a0ecb2dc918b90152)\n'}, {'number': 3, 'created': '2023-07-10 19:08:13.000000000', 'files': ['vif_plug_ovs/ovsdb/impl_idl.py'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/a8b8766a3e56b3b5d999a2c75b4a3dcc4b6ae0c4', 'message': 'only register tables used by os-vif\n\nThis change limits the tables registered in the native driver\nto the set actully used by os-vif. This will shorten the inital\nstartup time and reconnection time if the ovs db connection is dropped.\nas a result this will help mitigate bug #1929446 where on reconnection\nthe nova compute agent can stall until reconnection is completed.\n\nChange-Id: I635dff2b4fcff905ca8f431eb7e928265200f92a\nPartial-Bug: #1929446\n(cherry picked from commit e4dc8b5664ccee8bde9e90fc9e618d6b705a0b68)\n(cherry picked from commit e6e791bd0af560ac501e383814fa7a5bce004536)\n(cherry picked from commit bac7f7d9d4337c60bf684d5b518c79f9aff95771)\n(cherry picked from commit 037e83f1b593153547e5c26a0ecb2dc918b90152)\n(cherry picked from commit a2b91e8b42f47e805b8199b3ae9d73a284f72f1f)\n'}]",1,841780,a8b8766a3e56b3b5d999a2c75b4a3dcc4b6ae0c4,6,1,3,11604,,,0,"only register tables used by os-vif

This change limits the tables registered in the native driver
to the set actully used by os-vif. This will shorten the inital
startup time and reconnection time if the ovs db connection is dropped.
as a result this will help mitigate bug #1929446 where on reconnection
the nova compute agent can stall until reconnection is completed.

Change-Id: I635dff2b4fcff905ca8f431eb7e928265200f92a
Partial-Bug: #1929446
(cherry picked from commit e4dc8b5664ccee8bde9e90fc9e618d6b705a0b68)
(cherry picked from commit e6e791bd0af560ac501e383814fa7a5bce004536)
(cherry picked from commit bac7f7d9d4337c60bf684d5b518c79f9aff95771)
(cherry picked from commit 037e83f1b593153547e5c26a0ecb2dc918b90152)
(cherry picked from commit a2b91e8b42f47e805b8199b3ae9d73a284f72f1f)
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/80/841780/1 && git format-patch -1 --stdout FETCH_HEAD,['vif_plug_ovs/ovsdb/impl_idl.py'],1,08df3491a14e25e1b2b6a891d89a5031ac3d5f82,bug/1929446,"REQUIRED_TABLES = ('Interface', 'Port', 'Bridge', 'Open_vSwitch') for table in REQUIRED_TABLES: helper.register_table(table)", helper.register_all(),4,1
openstack%2Fos-vif~765970,openstack/os-vif,stable/train,I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7,Fix - os-vif fails to get the correct UpLink Representor,ABANDONED,2020-12-08 11:24:53.000000000,2023-09-01 17:07:13.000000000,,"[{'_account_id': 11604}, {'_account_id': 12171}, {'_account_id': 22348}, {'_account_id': 28714}]","[{'number': 1, 'created': '2020-12-08 11:24:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/39f9bef58e7758164c30a63931f34aaa68c0df12', 'message': 'Fix - os-vif fails to get the correct UpLink Representor\n\nTill kernel 5.7 PF and VF representors are exposed as virtual device.\nThey are not linked to its parent PCI device like how uplink\nrepresentor is linked.\n\nStarting from kernel 5.8 due to new change [1] the PF and VF representors are\nlinked to their parent PCI device, and so ""get_ifname_by_pci_address"" fails\nto get the correct UpLink Representor.\n\nThis patch modifys the behviour of ""get_ifname_by_pci_address"" to\ncheck the physical port name of the netdev in\nvf_pci_addr_path/physfn/net to match the formart for the uplink ""p\\d+"".\n\n[1] https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=123f0f53dd64b67e34142485fe866a8a581f12f1\n\nCloses-Bug: #1892132\nChange-Id: I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7\n(cherry picked from commit b37de19c58c877f5174d76d0a4ba5ab519f464e8)\n'}, {'number': 2, 'created': '2020-12-16 08:20:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/00edcb6b639f80bd1b2efe7eb6b6ab35485ce4a7', 'message': 'Fix - os-vif fails to get the correct UpLink Representor\n\nTill kernel 5.7 PF and VF representors are exposed as virtual device.\nThey are not linked to its parent PCI device like how uplink\nrepresentor is linked.\n\nStarting from kernel 5.8 due to new change [1] the PF and VF representors are\nlinked to their parent PCI device, and so ""get_ifname_by_pci_address"" fails\nto get the correct UpLink Representor.\n\nThis patch modifys the behviour of ""get_ifname_by_pci_address"" to\ncheck the physical port name of the netdev in\nvf_pci_addr_path/physfn/net to match the formart for the uplink ""p\\d+"".\n\n[1] https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=123f0f53dd64b67e34142485fe866a8a581f12f1\n\nCloses-Bug: #1892132\nChange-Id: I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7\n(cherry picked from commit 8fa7d59be755ffcb61a37b493ed7a8e2b0c8757c)\n'}, {'number': 3, 'created': '2021-01-05 07:25:13.000000000', 'files': ['releasenotes/notes/bug-1892132-812e6d5ce0588ebb.yaml', 'vif_plug_ovs/linux_net.py', 'vif_plug_ovs/tests/unit/test_linux_net.py'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/3c63ee065a53649c700121a7947c399f23dca95a', 'message': 'Fix - os-vif fails to get the correct UpLink Representor\n\nTill kernel 5.7 PF and VF representors are exposed as virtual device.\nThey are not linked to its parent PCI device like how uplink\nrepresentor is linked.\n\nStarting from kernel 5.8 due to new change [1] the PF and VF representors are\nlinked to their parent PCI device, and so ""get_ifname_by_pci_address"" fails\nto get the correct UpLink Representor.\n\nThis patch modifys the behviour of ""get_ifname_by_pci_address"" to\ncheck the physical port name of the netdev in\nvf_pci_addr_path/physfn/net to match the formart for the uplink ""p\\d+"".\n\n[1] https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=123f0f53dd64b67e34142485fe866a8a581f12f1\n\nCloses-Bug: #1892132\nChange-Id: I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7\n(cherry picked from commit 1226d46cc8bde9531821c68465a05292528142f0)\n'}]",0,765970,3c63ee065a53649c700121a7947c399f23dca95a,22,4,3,32296,,,0,"Fix - os-vif fails to get the correct UpLink Representor

Till kernel 5.7 PF and VF representors are exposed as virtual device.
They are not linked to its parent PCI device like how uplink
representor is linked.

Starting from kernel 5.8 due to new change [1] the PF and VF representors are
linked to their parent PCI device, and so ""get_ifname_by_pci_address"" fails
to get the correct UpLink Representor.

This patch modifys the behviour of ""get_ifname_by_pci_address"" to
check the physical port name of the netdev in
vf_pci_addr_path/physfn/net to match the formart for the uplink ""p\d+"".

[1] https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net.git/commit/?id=123f0f53dd64b67e34142485fe866a8a581f12f1

Closes-Bug: #1892132
Change-Id: I49f6ae3f0e6bfbf555c8284bfd70371ce90da0c7
(cherry picked from commit 1226d46cc8bde9531821c68465a05292528142f0)
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/70/765970/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1892132-812e6d5ce0588ebb.yaml', 'vif_plug_ovs/linux_net.py', 'vif_plug_ovs/tests/unit/test_linux_net.py']",3,39f9bef58e7758164c30a63931f34aaa68c0df12,train-fix-swirchdev," @mock.patch.object(linux_net, ""_get_phys_port_name"") self, mock__get_phys_port_name, mock__get_phys_switch_id, mock_listdir): mock__get_phys_port_name.side_effect = ([""p1""]) @mock.patch.object(linux_net, ""_get_phys_switch_id"") @mock.patch.object(linux_net, ""_get_phys_port_name"") self, mock__get_phys_port_name, mock__get_phys_switch_id, mock_listdir): mock__get_phys_port_name.side_effect = ([""p1s0""]) @mock.patch.object(linux_net, ""_get_phys_switch_id"") @mock.patch.object(linux_net, ""_get_phys_port_name"") def test_physical_function_interface_name_with_representors( self, mock__get_phys_port_name, mock__get_phys_switch_id, mock_listdir): # Get the PF that matches the phys_port_name regex mock_listdir.return_value = ['enp2s0f0_0', 'enp2s0f0_1', 'enp2s0f0'] mock__get_phys_switch_id.side_effect = ( ['valid_switch', 'valid_switch', 'valid_switch']) mock__get_phys_port_name.side_effect = ([""pf0vf0"", ""pf0vf1"", ""p0""]) ifname = linux_net.get_ifname_by_pci_address( '0000:00:00.1', pf_interface=True, switchdev=True) self.assertEqual(ifname, 'enp2s0f0') @mock.patch.object(os, 'listdir') @mock.patch.object(linux_net, ""_get_phys_switch_id"") @mock.patch.object(linux_net, ""_get_phys_port_name"") def test_physical_function_interface_name_with_fallback_To_first_netdev( self, mock__get_phys_port_name, mock__get_phys_switch_id, mock_listdir): # Try with switchdev mode to get PF but fail because there is no match # for the phys_port_name then fallback to first interface found mock_listdir.return_value = ['enp2s0f0_0', 'enp2s0f0_1', 'enp2s0f0'] mock__get_phys_switch_id.side_effect = (['valid_switch', 'valid_switch', 'valid_switch']) mock__get_phys_port_name.side_effect = ([""pf0vf0"", ""pf0vf1"", ""pf0vf2""]) ifname = linux_net.get_ifname_by_pci_address( '0000:00:00.1', pf_interface=True, switchdev=True) self.assertEqual(ifname, 'enp2s0f0_0') @mock.patch.object(os, 'listdir')"," self, mock__get_phys_switch_id, mock_listdir): @mock.patch.object(linux_net, '_get_phys_switch_id') self, mock__get_phys_switch_id, mock_listdir):",74,8
openstack%2Fos-vif~765912,openstack/os-vif,stable/train,I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76,Refactor code of linux_net to more cleaner and increase performace,ABANDONED,2020-12-08 07:37:45.000000000,2023-09-01 17:07:07.000000000,,"[{'_account_id': 11604}, {'_account_id': 12171}, {'_account_id': 22348}, {'_account_id': 28714}]","[{'number': 1, 'created': '2020-12-08 07:37:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/7f05023b8389c2184565b4ae9cae82487198bc06', 'message': 'Refactor code of linux_net to more cleaner and increase performace\n\nThe patch adds new functions \'_get_phys_port_name\' for reading physical\nport name of the SR-IOV port and \'_get_phys_switch_id\' for reading\nphysical port switch ID of the SR-IOV port, in addition to refactoring\n\'get_representor_port\' to use the new functions and decrease calls for\n""_get_pf_func"" and netdevs associated with the PF will now be processed\nin the loop, however it will not be matching \'phys_port_name\' which\nensures the correct behaviour.\n\nIn addition to updating the unit test for linux_net and remove not\nneeded mocks\n\nRelated-Bug: #1892132\nChange-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76\n(cherry picked from commit 76f7565b99e637d74878955a0033f35e9eb0e13f)\n'}, {'number': 2, 'created': '2020-12-09 08:25:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/5b69b8cd6b88547b062da7435157b5ded41bee58', 'message': 'Refactor code of linux_net to more cleaner and increase performace\n\nThe patch adds new functions \'_get_phys_port_name\' for reading physical\nport name of the SR-IOV port and \'_get_phys_switch_id\' for reading\nphysical port switch ID of the SR-IOV port, in addition to refactoring\n\'get_representor_port\' to use the new functions and decrease calls for\n""_get_pf_func"" and netdevs associated with the PF will now be processed\nin the loop, however it will not be matching \'phys_port_name\' which\nensures the correct behaviour.\n\nIn addition to updating the unit test for linux_net and remove not\nneeded mocks\n\nRelated-Bug: #1892132\nChange-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76\n(cherry picked from commit 76f7565b99e637d74878955a0033f35e9eb0e13f)\n'}, {'number': 3, 'created': '2020-12-13 10:52:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/aa21fd38f6a34b071859ed26a9e85894b7390a0b', 'message': 'Refactor code of linux_net to more cleaner and increase performace\n\nThe patch adds new functions \'_get_phys_port_name\' for reading physical\nport name of the SR-IOV port and \'_get_phys_switch_id\' for reading\nphysical port switch ID of the SR-IOV port, in addition to refactoring\n\'get_representor_port\' to use the new functions and decrease calls for\n""_get_pf_func"" and netdevs associated with the PF will now be processed\nin the loop, however it will not be matching \'phys_port_name\' which\nensures the correct behaviour.\n\nIn addition to updating the unit test for linux_net and remove not\nneeded mocks\n\nRelated-Bug: #1892132\nChange-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76\n(cherry picked from commit 76f7565b99e637d74878955a0033f35e9eb0e13f)\n(cherry picked from commit 167bb030f1143f37ce189673d831bd572f64d4ad)\n(cherry picked from commit a8270fd85a0edb5e5808bb5e777a63a309b5d38a)\n'}, {'number': 4, 'created': '2020-12-14 13:15:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/c3e25c7e7a871d317b82549f66721d786b51a801', 'message': 'Refactor code of linux_net to more cleaner and increase performace\n\nThe patch adds new functions \'_get_phys_port_name\' for reading physical\nport name of the SR-IOV port and \'_get_phys_switch_id\' for reading\nphysical port switch ID of the SR-IOV port, in addition to refactoring\n\'get_representor_port\' to use the new functions and decrease calls for\n""_get_pf_func"" and netdevs associated with the PF will now be processed\nin the loop, however it will not be matching \'phys_port_name\' which\nensures the correct behaviour.\n\nIn addition to updating the unit test for linux_net and remove not\nneeded mocks\n\nRelated-Bug: #1892132\nChange-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76\n(cherry picked from commit 1255c4280b415d89f9de7a756c4666d948712801)\n'}, {'number': 5, 'created': '2020-12-31 09:54:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/os-vif/commit/17496c060c30802d0647ec4b6ee2d1fe21416620', 'message': 'Refactor code of linux_net to more cleaner and increase performace\n\nThe patch adds new functions \'_get_phys_port_name\' for reading physical\nport name of the SR-IOV port and \'_get_phys_switch_id\' for reading\nphysical port switch ID of the SR-IOV port, in addition to refactoring\n\'get_representor_port\' to use the new functions and decrease calls for\n""_get_pf_func"" and netdevs associated with the PF will now be processed\nin the loop, however it will not be matching \'phys_port_name\' which\nensures the correct behaviour.\n\nIn addition to updating the unit test for linux_net and remove not\nneeded mocks\n\nRelated-Bug: #1892132\nChange-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76\n(cherry picked from commit 3e1d898b752c327165aeca1fec0919d858a87ec4)\n'}, {'number': 6, 'created': '2021-01-05 07:17:15.000000000', 'files': ['vif_plug_ovs/linux_net.py', 'vif_plug_ovs/tests/unit/test_linux_net.py'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/cda2a020f1ef92ebdd62c592cbad987977f240e6', 'message': 'Refactor code of linux_net to more cleaner and increase performace\n\nThe patch adds new functions \'_get_phys_port_name\' for reading physical\nport name of the SR-IOV port and \'_get_phys_switch_id\' for reading\nphysical port switch ID of the SR-IOV port, in addition to refactoring\n\'get_representor_port\' to use the new functions and decrease calls for\n""_get_pf_func"" and netdevs associated with the PF will now be processed\nin the loop, however it will not be matching \'phys_port_name\' which\nensures the correct behaviour.\n\nIn addition to updating the unit test for linux_net and remove not\nneeded mocks\n\nRelated-Bug: #1892132\nChange-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76\n(cherry picked from commit 3e1d898b752c327165aeca1fec0919d858a87ec4)\n'}]",4,765912,cda2a020f1ef92ebdd62c592cbad987977f240e6,34,4,6,32296,,,0,"Refactor code of linux_net to more cleaner and increase performace

The patch adds new functions '_get_phys_port_name' for reading physical
port name of the SR-IOV port and '_get_phys_switch_id' for reading
physical port switch ID of the SR-IOV port, in addition to refactoring
'get_representor_port' to use the new functions and decrease calls for
""_get_pf_func"" and netdevs associated with the PF will now be processed
in the loop, however it will not be matching 'phys_port_name' which
ensures the correct behaviour.

In addition to updating the unit test for linux_net and remove not
needed mocks

Related-Bug: #1892132
Change-Id: I3fdbea4f48cb79ebfd03a4da21e2232ccafb7a76
(cherry picked from commit 3e1d898b752c327165aeca1fec0919d858a87ec4)
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/12/765912/1 && git format-patch -1 --stdout FETCH_HEAD,"['vif_plug_ovs/linux_net.py', 'vif_plug_ovs/tests/unit/test_linux_net.py']",2,7f05023b8389c2184565b4ae9cae82487198bc06,train-refactor-linux-net," @mock.patch.object(linux_net, '_get_phys_switch_id') def test_is_switchdev_ioerror(self, mock__get_phys_switch_id): mock__get_phys_switch_id.side_effect = ([IOError()]) @mock.patch.object(linux_net, '_get_phys_switch_id') def test_is_switchdev_empty(self, mock__get_phys_switch_id): mock__get_phys_switch_id.return_value = '' @mock.patch.object(linux_net, '_get_phys_switch_id') def test_is_switchdev_positive(self, mock__get_phys_switch_id): mock__get_phys_switch_id.return_value = 'pf_sw_id' @mock.patch.object(linux_net, ""_get_pf_func"") @mock.patch.object(linux_net, ""_get_phys_port_name"") @mock.patch.object(linux_net, '_get_phys_switch_id') def test_get_representor_port(self, mock__get_phys_switch_id, mock__get_phys_port_name, mock__get_pf_func, mock_listdir): mock__get_phys_switch_id.return_value = 'pf_sw_id' mock__get_pf_func.return_value = ""0"" mock__get_phys_port_name.side_effect = (['1', ""pf0vf1"", ""pf0vf2""]) @mock.patch.object(linux_net, ""_get_pf_func"") @mock.patch.object(linux_net, ""_get_phys_port_name"") @mock.patch.object(linux_net, ""_get_phys_switch_id"") self, mock__get_phys_switch_id, mock__get_phys_port_name, mock__get_pf_func, mock_listdir): mock__get_phys_switch_id.return_value = 'pf_sw_id' mock__get_pf_func.return_value = ""2"" mock__get_phys_port_name.side_effect = ( [""p1"", ""p2"", ""VF1@PF1"", ""pf2vf1"", ""vf2@pf1"", ""pf2vf2""]) @mock.patch.object(linux_net, ""_get_pf_func"") @mock.patch.object(linux_net, ""_get_phys_switch_id"") @mock.patch.object(linux_net, ""_get_phys_port_name"") self, mock__get_phys_port_name, mock__get_phys_switch_id, mock__get_pf_func, mock_listdir): mock__get_phys_switch_id.return_value = 'pf_sw_id' mock__get_pf_func.return_value = ""0"" mock__get_phys_port_name.side_effect = ( [""p0"", ""1"", ""2""]) @mock.patch.object(linux_net, ""_get_pf_func"") @mock.patch.object(linux_net, ""_get_phys_port_name"") @mock.patch.object(linux_net, ""_get_phys_switch_id"") self, mock__get_phys_switch_id, mock__get_phys_port_name, mock__get_pf_func, mock_listdir): mock__get_phys_switch_id.side_effect = ( mock__get_pf_func.return_value = ""0"" mock__get_phys_port_name.side_effect = ( [""p0"", ""pf0vf0"", ""pf0vf1""]) @mock.patch.object(linux_net, ""_get_pf_func"") @mock.patch.object(linux_net, ""_get_phys_port_name"") @mock.patch.object(linux_net, ""_get_phys_switch_id"") self, mock__get_phys_switch_id, mock__get_phys_port_name, mock__get_pf_func, mock_listdir): mock__get_phys_switch_id.return_value = 'pf_sw_id' mock__get_phys_port_name.side_effect = (['p0', '1', 'a']) mock__get_pf_func.return_value = ""0"" @mock.patch.object(linux_net, '_get_phys_switch_id') def test_physical_function_interface_name( self, mock__get_phys_switch_id, mock_listdir): mock__get_phys_switch_id.side_effect = ( @mock.patch.object(linux_net, '_get_phys_switch_id') def test_physical_function_interface_name_with_switchdev( self, mock__get_phys_switch_id, mock_listdir): mock__get_phys_switch_id.side_effect = ( @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') def test__get_phys_port_name(self, mock_isfile, mock_open): mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.return_value = 'pf0vf0' mock_isfile.return_value = True phys_port_name = linux_net._get_phys_port_name(""vf_ifname"") self.assertEqual(phys_port_name, 'pf0vf0') @mock.patch.object(os.path, 'isfile') def test__get_phys_port_name_not_found(self, mock_isfile): mock_isfile.return_value = False phys_port_name = linux_net._get_phys_port_name(""vf_ifname"") self.assertIsNone(phys_port_name) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') def test__get_phys_switch_id(self, mock_isfile, mock_open): mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.return_value = '66e40000039b0398' mock_isfile.return_value = True phys_port_name = linux_net._get_phys_switch_id(""ifname"") self.assertEqual(phys_port_name, '66e40000039b0398') @mock.patch.object(os.path, 'isfile') def test__get_phys_switch_id_not_found(self, mock_isfile): mock_isfile.return_value = False phys_port_name = linux_net._get_phys_switch_id(""ifname"") self.assertIsNone(phys_port_name)"," @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') def test_is_switchdev_ioerror(self, mock_isfile, mock_open): mock_isfile.side_effect = [True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( [IOError()]) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') def test_is_switchdev_empty(self, mock_isfile, mock_open): mock_isfile.side_effect = [True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( ['']) open_calls = ( [mock.call('/sys/class/net/pf_ifname/phys_switch_id', 'r'), mock.call().readline(), mock.call().__exit__(None, None, None)]) mock_open.assert_has_calls(open_calls) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') def test_is_switchdev_positive(self, mock_isfile, mock_open): mock_isfile.side_effect = [True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( ['pf_sw_id']) open_calls = ( [mock.call('/sys/class/net/pf_ifname/phys_switch_id', 'r'), mock.call().readline(), mock.call().__exit__(None, None, None)]) mock_open.assert_has_calls(open_calls) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') @mock.patch.object(linux_net, ""get_function_by_ifname"") def test_get_representor_port(self, mock_get_function_by_ifname, mock_listdir, mock_isfile, mock_open): mock_isfile.side_effect = [True, True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( ['pf_sw_id', 'pf_sw_id', '1', 'pf_sw_id', 'pf0vf2']) # PCI IDs mocked: # PF0: 0000:0a:00.0 # PF0VF1: 0000:0a:02.1 PF0VF2: 0000:0a:02.2 mock_get_function_by_ifname.side_effect = ( [(""0000:0a:00.0"", True), (""0000:0a:02.1"", False), (""0000:0a:02.2"", False), (""0000:0a:00.0"", True)]) open_calls = ( [mock.call('/sys/class/net/pf_ifname/phys_switch_id', 'r'), mock.call().readline(), mock.call().__exit__(None, None, None), mock.call('/sys/class/net/rep_vf_1/phys_switch_id', 'r'), mock.call().readline(), mock.call().__exit__(None, None, None), mock.call('/sys/class/net/rep_vf_1/phys_port_name', 'r'), mock.call().readline(), mock.call().__exit__(None, None, None), mock.call('/sys/class/net/rep_vf_2/phys_switch_id', 'r'), mock.call().readline(), mock.call().__exit__(None, None, None), mock.call('/sys/class/net/rep_vf_2/phys_port_name', 'r'), mock.call().readline(), mock.call().__exit__(None, None, None)]) mock_open.assert_has_calls(open_calls) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') @mock.patch.object(linux_net, ""get_function_by_ifname"") self, mock_get_function_by_ifname, mock_listdir, mock_isfile, mock_open): mock_isfile.side_effect = [True, True, True, True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( ['pf_sw_id', 'pf_sw_id', 'VF1@PF1', 'pf_sw_id', 'vf2@pf1', 'pf_sw_id', 'pf2vf1', 'pf_sw_id', 'pf2vf2']) # PCI IDs mocked: # PF1: 0000:0a:00.1 PF2: 0000:0a:00.2 # PF1VF1: 0000:0a:02.1 PF1VF2: 0000:0a:02.2 # PF2VF1: 0000:0a:04.1 PF2VF2: 0000:0a:04.2 mock_get_function_by_ifname.side_effect = ( [(""0000:0a:00.1"", True), (""0000:0a:00.2"", True), (""0000:0a:02.1"", False), (""0000:0a:00.2"", True), (""0000:0a:02.2"", False), (""0000:0a:00.2"", True), (""0000:0a:04.1"", False), (""0000:0a:00.2"", True), (""0000:0a:04.2"", False), (""0000:0a:00.2"", True)]) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') @mock.patch.object(linux_net, ""get_function_by_ifname"") self, mock_get_function_by_ifname, mock_listdir, mock_isfile, mock_open): mock_isfile.side_effect = [True, True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( ['pf_sw_id', 'pf_sw_id', '1', 'pf_sw_id', '2']) # PCI IDs mocked: # PF0: 0000:0a:00.0 # PF0VF1: 0000:0a:02.1 PF0VF2: 0000:0a:02.2 mock_get_function_by_ifname.side_effect = ( [(""0000:0a:00.0"", True), (""0000:0a:02.1"", False), (""0000:0a:02.2"", False)]) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') @mock.patch.object(linux_net, ""get_function_by_ifname"") self, mock_get_function_by_ifname, mock_listdir, mock_isfile, mock_open): mock_isfile.side_effect = [True, True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( # PCI IDs mocked: # PF0: 0000:0a:00.0 # PF0VF1: 0000:0a:02.1 PF0VF2: 0000:0a:02.2 mock_get_function_by_ifname.side_effect = ( [(""0000:0a:00.0"", True), (""0000:0a:02.1"", False), (""0000:0a:02.2"", False), (""0000:0a:00.0"", True)]) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') @mock.patch.object(linux_net, ""get_function_by_ifname"") self, mock_get_function_by_ifname, mock_listdir, mock_isfile, mock_open): mock_isfile.side_effect = [True, True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( ['pf_sw_id', 'pf_sw_id', '1', 'pf_sw_id', 'a']) # PCI IDs mocked: # PF0: 0000:0a:00.0 # PF0VF1: 0000:0a:02.1 PF0VF2: 0000:0a:02.2 mock_get_function_by_ifname.side_effect = ( [(""0000:0a:00.0"", True), (""0000:0a:02.1"", False), (""0000:0a:02.2"", False)]) @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') def test_physical_function_inferface_name( self, mock_listdir, mock_isfile, mock_open): mock_isfile.side_effect = [True, True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = ( @mock.patch('six.moves.builtins.open') @mock.patch.object(os.path, 'isfile') def test_physical_function_inferface_name_with_switchdev( self, mock_listdir, mock_isfile, mock_open): mock_isfile.side_effect = [True, True] mock_open.return_value.__enter__ = lambda s: s readline_mock = mock_open.return_value.readline readline_mock.side_effect = (",139,187
openstack%2Fos-vif~807839,openstack/os-vif,stable/train,Iba8de3d17c7352138db316b9f842a4702a2648fb,[stable-only] Fix lower-constraints,ABANDONED,2021-09-08 08:55:10.000000000,2023-09-01 17:07:02.000000000,,"[{'_account_id': 7634}, {'_account_id': 11604}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-08 08:55:10.000000000', 'files': ['requirements.txt', 'lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/e86ca7df91d9f694fdd191bcde4b88faa768bb98', 'message': '[stable-only] Fix lower-constraints\n\nWith the new pip resolver lower-constraints job fails due to\ncontradicting requirements. This patch eliminates all those\ncontradictions.\n\nChange-Id: Iba8de3d17c7352138db316b9f842a4702a2648fb\n'}]",0,807839,e86ca7df91d9f694fdd191bcde4b88faa768bb98,6,3,1,17685,,,0,"[stable-only] Fix lower-constraints

With the new pip resolver lower-constraints job fails due to
contradicting requirements. This patch eliminates all those
contradictions.

Change-Id: Iba8de3d17c7352138db316b9f842a4702a2648fb
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/39/807839/1 && git format-patch -1 --stdout FETCH_HEAD,"['requirements.txt', 'lower-constraints.txt']",2,e86ca7df91d9f694fdd191bcde4b88faa768bb98,,flake8==2.6.0hacking==1.1.0MarkupSafe==1.1oslo.concurrency==3.25.0oslo.log==3.36.0pika==0.10.0,flake8==2.2.4hacking==0.10.2MarkupSafe==1.0oslo.concurrency==3.20.0oslo.log==3.30.0pika==0.11.2,8,8
openstack%2Fos-vif~794211,openstack/os-vif,stable/train,I6d4a52369eda020a997a2d5521af011725f73c72,[Stable Only] Drop lower constraints testing,ABANDONED,2021-06-02 12:41:20.000000000,2023-09-01 17:06:52.000000000,,"[{'_account_id': 7634}, {'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-02 12:41:20.000000000', 'files': ['.zuul.yaml', 'lower-constraints.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/a66d7408dea01141d3ab4d38f2b6cd4a72991f48', 'message': '[Stable Only] Drop lower constraints testing\n\nThis is broken with the resolver introduced in pip 20.3. It likely never\nworked as expected. There is limited/no value in resolving these issues\nnow, so simply drop the job.\n\nChange-Id: I6d4a52369eda020a997a2d5521af011725f73c72\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n'}]",0,794211,a66d7408dea01141d3ab4d38f2b6cd4a72991f48,8,5,1,15334,,,0,"[Stable Only] Drop lower constraints testing

This is broken with the resolver introduced in pip 20.3. It likely never
worked as expected. There is limited/no value in resolving these issues
now, so simply drop the job.

Change-Id: I6d4a52369eda020a997a2d5521af011725f73c72
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/11/794211/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'lower-constraints.txt', 'tox.ini']",3,a66d7408dea01141d3ab4d38f2b6cd4a72991f48,drop-lc,,"[testenv:lower-constraints] deps = -c{toxinidir}/lower-constraints.txt -r{toxinidir}/requirements.txt -r{toxinidir}/test-requirements.txt -r{toxinidir}/doc/requirements.txt commands = stestr run --black-regex "".tests.functional"" {posargs} sphinx-build -W doc/source doc/build ",0,104
openstack%2Fos-vif~766975,openstack/os-vif,stable/train,Iccc3f0c71b7ec2d3f494a2e0b5fe1c99b241260f,DNM: testing lower-constraints,ABANDONED,2020-12-14 15:41:50.000000000,2023-09-01 17:06:45.000000000,,"[{'_account_id': 22348}, {'_account_id': 25733}]","[{'number': 1, 'created': '2020-12-14 15:41:50.000000000', 'files': ['lower-constraints.txt'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/b350c85b5951ba4cb286f2eb0faba4b9de6c9792', 'message': 'DNM: testing lower-constraints\n\n* The new pip resolver in 20.3 is causing some interesting failures.\n* This tweaks the versions to see if this makes it pass the\n  lower-constraints job,\n\nChange-Id: Iccc3f0c71b7ec2d3f494a2e0b5fe1c99b241260f\n'}]",0,766975,b350c85b5951ba4cb286f2eb0faba4b9de6c9792,5,2,1,25733,,,0,"DNM: testing lower-constraints

* The new pip resolver in 20.3 is causing some interesting failures.
* This tweaks the versions to see if this makes it pass the
  lower-constraints job,

Change-Id: Iccc3f0c71b7ec2d3f494a2e0b5fe1c99b241260f
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/75/766975/1 && git format-patch -1 --stdout FETCH_HEAD,['lower-constraints.txt'],1,b350c85b5951ba4cb286f2eb0faba4b9de6c9792,,flake8==2.6.0hacking==1.1.0MarkupSafe==1.1.0oslo.concurrency==3.25.0oslo.log==3.36.0pika==0.10.0,flake8==2.2.4hacking==0.10.2MarkupSafe==1.0oslo.concurrency==3.20.0oslo.log==3.30.0pika==0.11.2,6,6
openstack%2Fnova~796936,openstack/nova,stable/train,Ia91b63c0676f42ad8a7a0d16e6870bafc2ee7675,Detach is broken for multi-attached fs-based volumes,ABANDONED,2021-06-17 18:19:07.000000000,2023-09-01 17:04:08.000000000,,"[{'_account_id': 22348}, {'_account_id': 29568}]","[{'number': 1, 'created': '2021-06-17 18:19:07.000000000', 'files': ['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug-1888022-detach-multiattached-volumes-5fa862aea7f237ea.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/2f7bef5cf8fc925deec74e3dd43f8a87ae61a9f6', 'message': 'Detach is broken for multi-attached fs-based volumes\n\nFixed an issue with detaching multi-attached fs-based volumes.\nVolume drivers using _HostMountStateManager are special case.\n_HostMountStateManager ensures that the compute node only attempts\nto mount a single mountpoint in use by multiple attachments once,\nand that it is not unmounted until it is no longer in use by any\nattachments. So we can skip the multiattach check for volume drivers\nthat based on LibvirtMountedFileSystemVolumeDriver.\n\nNOTE(lyarwood): Conflicts as I0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5\nand Ia500eb614cf575ab846f64f4b69c9068274c8c1f are not present on\nstable/train.\n\nConflicts:\n  nova/tests/unit/virt/libvirt/test_driver.py\n\nCloses-Bug: 1888022\nChange-Id: Ia91b63c0676f42ad8a7a0d16e6870bafc2ee7675\n(cherry picked from commit 806575cfd5327f96e62462f484118d06d17cbe8d)\n(cherry picked from commit e683f8f0e6cec81b7ef61fc3e76a3f54399f34ff)\n'}]",0,796936,2f7bef5cf8fc925deec74e3dd43f8a87ae61a9f6,5,2,1,10135,,,0,"Detach is broken for multi-attached fs-based volumes

Fixed an issue with detaching multi-attached fs-based volumes.
Volume drivers using _HostMountStateManager are special case.
_HostMountStateManager ensures that the compute node only attempts
to mount a single mountpoint in use by multiple attachments once,
and that it is not unmounted until it is no longer in use by any
attachments. So we can skip the multiattach check for volume drivers
that based on LibvirtMountedFileSystemVolumeDriver.

NOTE(lyarwood): Conflicts as I0bdf9ccf7bf3fb1f3136c1e4267b9c99732908d5
and Ia500eb614cf575ab846f64f4b69c9068274c8c1f are not present on
stable/train.

Conflicts:
  nova/tests/unit/virt/libvirt/test_driver.py

Closes-Bug: 1888022
Change-Id: Ia91b63c0676f42ad8a7a0d16e6870bafc2ee7675
(cherry picked from commit 806575cfd5327f96e62462f484118d06d17cbe8d)
(cherry picked from commit e683f8f0e6cec81b7ef61fc3e76a3f54399f34ff)
",git fetch https://review.opendev.org/openstack/nova refs/changes/36/796936/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug-1888022-detach-multiattached-volumes-5fa862aea7f237ea.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py']",3,2f7bef5cf8fc925deec74e3dd43f8a87ae61a9f6,,"from nova.virt.libvirt.volume import fs as fs_drivers def test_should_disconnect_target_multi_attach_filesystem_driver(self): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) volume_driver = mock.MagicMock( spec=fs_drivers.LibvirtMountedFileSystemVolumeDriver) self.assertTrue(drvr._should_disconnect_target( self.context, None, True, volume_driver, None)) def test_should_disconnect_target_single_attach_filesystem_driver(self): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) volume_driver = mock.MagicMock( spec=fs_drivers.LibvirtMountedFileSystemVolumeDriver) self.assertTrue(drvr._should_disconnect_target( self.context, None, False, volume_driver, None)) ",,63,30
openstack%2Fnova~796937,openstack/nova,stable/train,I06a67355baaa493313aea83b198d2bce620074db,Handle unset 'connection_info',ABANDONED,2021-06-17 18:19:07.000000000,2023-09-01 17:04:01.000000000,,"[{'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-17 18:19:07.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/67f3eea96e1550494213880698e51db19b7f2955', 'message': ""Handle unset 'connection_info'\n\nAs noted inline, it's possible for this to be unset if a boot from\nvolume request failed early in the process.\n\nChange-Id: I06a67355baaa493313aea83b198d2bce620074db\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1730549\n(cherry picked from commit 9804bf97679a38a99c4a305ec5b477d40e0d1d32)\n""}]",0,796937,67f3eea96e1550494213880698e51db19b7f2955,5,2,1,10135,,,0,"Handle unset 'connection_info'

As noted inline, it's possible for this to be unset if a boot from
volume request failed early in the process.

Change-Id: I06a67355baaa493313aea83b198d2bce620074db
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Closes-Bug: #1730549
(cherry picked from commit 9804bf97679a38a99c4a305ec5b477d40e0d1d32)
",git fetch https://review.opendev.org/openstack/nova refs/changes/37/796937/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",2,67f3eea96e1550494213880698e51db19b7f2955,," def test_cleanup_pass_with_no_connection_info(self, undefine, unplug): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI()) drvr._disconnect_volume = mock.Mock() fake_inst = objects.Instance(**self.test_instance) fake_bdms = [{'connection_info': None}] with mock.patch('nova.virt.driver' '.block_device_info_get_mapping', return_value=fake_bdms): drvr.cleanup('ctxt', fake_inst, 'netinfo', destroy_disks=False) self.assertFalse(drvr._disconnect_volume.called) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._unplug_vifs') @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._undefine_domain')",,18,0
openstack%2Fnova~796642,openstack/nova,stable/train,I11131a3f90b8af85e7151b519fb26d225629c391,libvirt: Set driver_iommu when attaching virtio devices to SEV instance,ABANDONED,2021-06-16 12:28:19.000000000,2023-09-01 17:03:54.000000000,,"[{'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-16 12:28:19.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/virt/libvirt/migration.py', 'nova/tests/unit/virt/libvirt/test_designer.py', 'nova/tests/unit/virt/libvirt/test_migration.py', 'nova/virt/libvirt/designer.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/9587cad6a1d58045394c4e669a0949baf016d7ac', 'message': 'libvirt: Set driver_iommu when attaching virtio devices to SEV instance\n\nAs called out in the original spec [1] virtio devices attached to a SEV\nenabled instance must have the iommu attribute enabled. This was done\nwithin the original implementation of the spec for all virtio devices\ndefined when initially spawning the instance but does not include volume\nand interfaces that are later hot plugged.\n\nThis change corrects this for both volumes and nics and in doing so\nslightly refactors the original designer code to make it usable in both\ncases.\n\n[1] https://specs.openstack.org/openstack/nova-specs/specs/train/implemented/amd-sev-libvirt-support.html#proposed-change\n\nNOTE(lyarwood): Conflicts caused by I5c346e690148678a2f0dc63f4f516a944c3db8cd,\nI8e8035dcf508f5215bba9b7575c5c6abfe41da31 and\nI3448b89f58f3c3a85d15ee5a870c24b4b7f201df not being present in\nstable/train.\n\nConflicts:\n  nova/tests/unit/virt/libvirt/test_driver.py\n  nova/virt/libvirt/driver.py\n  nova/virt/libvirt/migration.py\n\nCloses-Bug: #1930734\nChange-Id: I11131a3f90b8af85e7151b519fb26d225629c391\n(cherry picked from commit 4d8bf15fec15dc3416023e577e0f2c277c216506)\n(cherry picked from commit 5d65680095298764466af532381b81b604429426)\n(cherry picked from commit 4985667efced966d0a47ac9f8d31d73ae7409b0a)\n(cherry picked from commit 4c38a3c2d5194dbddc94339f3992dc5b70a52556)\n'}]",7,796642,9587cad6a1d58045394c4e669a0949baf016d7ac,7,2,1,10135,,,0,"libvirt: Set driver_iommu when attaching virtio devices to SEV instance

As called out in the original spec [1] virtio devices attached to a SEV
enabled instance must have the iommu attribute enabled. This was done
within the original implementation of the spec for all virtio devices
defined when initially spawning the instance but does not include volume
and interfaces that are later hot plugged.

This change corrects this for both volumes and nics and in doing so
slightly refactors the original designer code to make it usable in both
cases.

[1] https://specs.openstack.org/openstack/nova-specs/specs/train/implemented/amd-sev-libvirt-support.html#proposed-change

NOTE(lyarwood): Conflicts caused by I5c346e690148678a2f0dc63f4f516a944c3db8cd,
I8e8035dcf508f5215bba9b7575c5c6abfe41da31 and
I3448b89f58f3c3a85d15ee5a870c24b4b7f201df not being present in
stable/train.

Conflicts:
  nova/tests/unit/virt/libvirt/test_driver.py
  nova/virt/libvirt/driver.py
  nova/virt/libvirt/migration.py

Closes-Bug: #1930734
Change-Id: I11131a3f90b8af85e7151b519fb26d225629c391
(cherry picked from commit 4d8bf15fec15dc3416023e577e0f2c277c216506)
(cherry picked from commit 5d65680095298764466af532381b81b604429426)
(cherry picked from commit 4985667efced966d0a47ac9f8d31d73ae7409b0a)
(cherry picked from commit 4c38a3c2d5194dbddc94339f3992dc5b70a52556)
",git fetch https://review.opendev.org/openstack/nova refs/changes/42/796642/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/virt/libvirt/migration.py', 'nova/tests/unit/virt/libvirt/test_designer.py', 'nova/tests/unit/virt/libvirt/test_migration.py', 'nova/virt/libvirt/designer.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",6,9587cad6a1d58045394c4e669a0949baf016d7ac,," @mock.patch.object(designer, 'set_driver_iommu_for_all_devices') @mock.patch.object(designer, 'set_driver_iommu_for_all_devices') @mock.patch.object(libvirt_driver.LibvirtDriver, '_sev_enabled', new=mock.Mock(return_value=False)) def test_get_volume_config(self, mock_set_cache_mode, mock_get_config): instance = objects.Instance(**self.test_instance) connection_info = { 'driver_volume_type': 'fake', 'data': { 'device_path': '/fake', 'access_mode': 'rw' } } generated_config = self._fake_libvirt_config_guest_disk() mock_get_config.return_value = copy.deepcopy(generated_config) returned_config = drvr._get_volume_config( instance, connection_info, mock.sentinel.disk_info) mock_get_config.assert_called_once_with( connection_info, mock.sentinel.disk_info) mock_set_cache_mode.assert_called_once_with(returned_config) self.assertEqual(generated_config.to_xml(), returned_config.to_xml()) @mock.patch.object(libvirt_driver.LibvirtDriver, '_sev_enabled', new=mock.Mock(return_value=True)) @mock.patch.object(libvirt_driver.LibvirtDriver, '_set_cache_mode', new=mock.Mock()) @mock.patch.object(volume_drivers.LibvirtFakeVolumeDriver, 'get_config') def test_get_volume_config_sev(self, mock_get_config): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) instance = objects.Instance(**self.test_instance) connection_info = { 'driver_volume_type': 'fake', 'data': { 'device_path': '/fake', 'access_mode': 'rw' } } generated_config = self._fake_libvirt_config_guest_disk() generated_config.target_bus = 'virtio' mock_get_config.return_value = copy.deepcopy(generated_config) returned_config = drvr._get_volume_config( instance, connection_info, mock.sentinel.disk_info) # Assert that driver_iommu is enabled for this virtio volume self.assertTrue(returned_config.driver_iommu) instance, connection_info, disk_info) instance_ref, guest, migrate_data, mock.ANY, get_vif_config=None, ) def fake_get_updated_guest_xml( instance, guest, migrate_data, get_volume_config, get_vif_config=None, ): instance = objects.Instance(**self.test_instance) mock.patch.object( drvr, '_get_volume_config', return_value=conf ), mock.patch.object( guest, 'get_xml_desc', return_value=initial_xml ), mock.patch.object( drvr, '_sev_enabled', new=mock.Mock(return_value=False) ) ): config = libvirt_migrate.get_updated_guest_xml( instance, guest, objects.LibvirtLiveMigrateData(bdms=[bdmi]), drvr._get_volume_config ) instance = objects.Instance(**self.test_instance) mock.patch.object( drvr, '_get_volume_config', return_value=conf ), mock.patch.object( guest, 'get_xml_desc', return_value=initial_xml ), mock.patch.object( drvr, '_sev_enabled', new=mock.Mock(return_value=False) ) ): config = libvirt_migrate.get_updated_guest_xml( instance, guest, drvr._get_volume_config ) instance = objects.Instance(**self.test_instance) mock.patch.object( drvr, '_get_volume_config', return_value=conf ), mock.patch.object( guest, 'get_xml_desc', return_value=initial_xml ), mock.patch.object( drvr, '_sev_enabled', new=mock.Mock(return_value=False) ) ): instance, drvr._get_volume_config ) get_volume_config.assert_called_with( instance, bdm['connection_info'], @mock.patch('nova.virt.libvirt.designer.set_driver_iommu_for_device') @mock.patch.object(libvirt_driver.LibvirtDriver, '_sev_enabled') mock_info, mock_build, mock_save, mock_sev_enabled, mock_designer_set_iommu, sev_enabled=False): mock_sev_enabled.return_value = sev_enabled if sev_enabled: mock_designer_set_iommu.assert_called_once_with(expected) def test_attach_interface_with_sev(self): self._test_attach_interface( power_state.RUNNING, (fakelibvirt.VIR_DOMAIN_AFFECT_CONFIG | fakelibvirt.VIR_DOMAIN_AFFECT_LIVE), sev_enabled=True) "," @mock.patch.object(designer, 'set_driver_iommu_for_sev') @mock.patch.object(designer, 'set_driver_iommu_for_sev') def test_get_volume_config(self, _set_cache_mode, get_config): connection_info = {'driver_volume_type': 'fake', 'data': {'device_path': '/fake', 'access_mode': 'rw'}} disk_info = {'bus': 'fake-bus', 'type': 'fake-type', 'dev': 'vdb'} config_guest_disk = self._fake_libvirt_config_guest_disk() get_config.return_value = copy.deepcopy(config_guest_disk) config = drvr._get_volume_config(connection_info, disk_info) get_config.assert_called_once_with(connection_info, disk_info) _set_cache_mode.assert_called_once_with(config) self.assertEqual(config_guest_disk.to_xml(), config.to_xml()) connection_info, disk_info) guest, migrate_data, mock.ANY, get_vif_config=None) def fake_get_updated_guest_xml(guest, migrate_data, get_volume_config, get_vif_config=None): mock.patch.object(drvr, '_get_volume_config', return_value=conf), mock.patch.object(guest, 'get_xml_desc', return_value=initial_xml)): config = libvirt_migrate.get_updated_guest_xml(guest, objects.LibvirtLiveMigrateData(bdms=[bdmi]), drvr._get_volume_config) mock.patch.object(drvr, '_get_volume_config', return_value=conf), mock.patch.object(guest, 'get_xml_desc', return_value=initial_xml)): config = libvirt_migrate.get_updated_guest_xml(guest, drvr._get_volume_config) mock.patch.object(drvr, '_get_volume_config', return_value=conf), mock.patch.object(guest, 'get_xml_desc', return_value=initial_xml)): drvr._get_volume_config) get_volume_config.assert_called_with(bdm['connection_info'], mock_info, mock_build, mock_save):",204,65
openstack%2Fnova~794041,openstack/nova,stable/train,I603212f2d3cbbd482a2a68cd835af0261a85c392,Replace 'fake' with a real project ID,ABANDONED,2021-06-01 20:50:26.000000000,2023-09-01 17:03:47.000000000,,"[{'_account_id': 7634}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-01 20:50:26.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_server_metadata.py', 'nova/tests/unit/api/openstack/compute/test_volumes.py', 'nova/tests/unit/api/openstack/compute/test_extended_hypervisors.py', 'nova/tests/unit/api/openstack/compute/test_hosts.py', 'nova/tests/unit/api/openstack/compute/test_security_group_default_rules.py', 'nova/tests/unit/api/openstack/compute/test_server_topology.py', 'nova/tests/unit/api/openstack/compute/test_floating_ips.py', 'nova/tests/unit/api/openstack/compute/test_neutron_security_groups.py', 'nova/tests/unit/api/openstack/compute/test_hypervisor_status.py', 'nova/tests/unit/api/openstack/compute/test_server_actions.py', 'nova/tests/unit/api/openstack/compute/test_floating_ip_pools.py', 'nova/tests/unit/api/openstack/compute/test_instance_actions.py', 'nova/tests/unit/api/openstack/compute/test_availability_zone.py', 'nova/tests/unit/api/openstack/compute/test_networks.py', 'nova/tests/unit/api/openstack/compute/test_snapshots.py', 'nova/tests/unit/api/openstack/compute/test_shelve.py', 'nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/tests/unit/api/openstack/test_api_version_request.py', 'nova/tests/unit/api/openstack/compute/test_deferred_delete.py', 'nova/tests/unit/api/openstack/compute/test_security_groups.py', 'nova/tests/unit/api/openstack/compute/test_services.py', 'nova/tests/unit/api/openstack/compute/test_certificates.py', 'nova/tests/unit/api/openstack/compute/test_server_groups.py', 'nova/tests/unit/api/openstack/compute/test_consoles.py', 'nova/tests/unit/api/openstack/compute/test_flavor_manage.py', 'nova/tests/unit/api/openstack/compute/test_flavor_access.py', 'nova/tests/unit/api/openstack/compute/test_quotas.py', 'nova/tests/unit/api/openstack/compute/test_cloudpipe.py', 'nova/tests/unit/api/openstack/compute/test_image_metadata.py', 'nova/tests/unit/api/openstack/compute/test_migrations.py', 'nova/tests/unit/api/openstack/compute/test_flavors_extra_specs.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/26f76afa4ea3e23d4fa6e480aa88f478f071796b', 'message': ""Replace 'fake' with a real project ID\n\nThis patch is a follow-up for I3eac9ac0a2a698a3c72b4e646cdcaf293ec4b057.\nReplace 'fake' with a real project ID in URL paths and related places\nin unit tests.\n\nNOTE(lyarwood): Conflict caused by\nIdd0b741760601aaccca4adfc5101c3539ba9ec09 not being present in\nstable/train.\n\nConflicts:\n    nova/tests/unit/api/openstack/compute/test_neutron_security_groups.py\n\nChange-Id: I603212f2d3cbbd482a2a68cd835af0261a85c392\n(cherry picked from commit 9ce6b3bb762100e8ae03ea5400269db93d0ae040)\n""}]",0,794041,26f76afa4ea3e23d4fa6e480aa88f478f071796b,5,2,1,10135,,,0,"Replace 'fake' with a real project ID

This patch is a follow-up for I3eac9ac0a2a698a3c72b4e646cdcaf293ec4b057.
Replace 'fake' with a real project ID in URL paths and related places
in unit tests.

NOTE(lyarwood): Conflict caused by
Idd0b741760601aaccca4adfc5101c3539ba9ec09 not being present in
stable/train.

Conflicts:
    nova/tests/unit/api/openstack/compute/test_neutron_security_groups.py

Change-Id: I603212f2d3cbbd482a2a68cd835af0261a85c392
(cherry picked from commit 9ce6b3bb762100e8ae03ea5400269db93d0ae040)
",git fetch https://review.opendev.org/openstack/nova refs/changes/41/794041/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/api/openstack/compute/test_server_metadata.py', 'nova/tests/unit/api/openstack/compute/test_volumes.py', 'nova/tests/unit/api/openstack/compute/test_extended_hypervisors.py', 'nova/tests/unit/api/openstack/compute/test_hosts.py', 'nova/tests/unit/api/openstack/compute/test_security_group_default_rules.py', 'nova/tests/unit/api/openstack/compute/test_server_topology.py', 'nova/tests/unit/api/openstack/compute/test_floating_ips.py', 'nova/tests/unit/api/openstack/compute/test_neutron_security_groups.py', 'nova/tests/unit/api/openstack/compute/test_hypervisor_status.py', 'nova/tests/unit/api/openstack/compute/test_server_actions.py', 'nova/tests/unit/api/openstack/compute/test_floating_ip_pools.py', 'nova/tests/unit/api/openstack/compute/test_instance_actions.py', 'nova/tests/unit/api/openstack/compute/test_availability_zone.py', 'nova/tests/unit/api/openstack/compute/test_networks.py', 'nova/tests/unit/api/openstack/compute/test_snapshots.py', 'nova/tests/unit/api/openstack/compute/test_shelve.py', 'nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/tests/unit/api/openstack/test_api_version_request.py', 'nova/tests/unit/api/openstack/compute/test_deferred_delete.py', 'nova/tests/unit/api/openstack/compute/test_security_groups.py', 'nova/tests/unit/api/openstack/compute/test_services.py', 'nova/tests/unit/api/openstack/compute/test_certificates.py', 'nova/tests/unit/api/openstack/compute/test_server_groups.py', 'nova/tests/unit/api/openstack/compute/test_consoles.py', 'nova/tests/unit/api/openstack/compute/test_flavor_manage.py', 'nova/tests/unit/api/openstack/compute/test_flavor_access.py', 'nova/tests/unit/api/openstack/compute/test_quotas.py', 'nova/tests/unit/api/openstack/compute/test_cloudpipe.py', 'nova/tests/unit/api/openstack/compute/test_image_metadata.py', 'nova/tests/unit/api/openstack/compute/test_migrations.py', 'nova/tests/unit/api/openstack/compute/test_flavors_extra_specs.py']",31,26f76afa4ea3e23d4fa6e480aa88f478f071796b,," req_url = '/v2/%s/flavors/%s' % (fakes.FAKE_PROJECT_ID, url)", req_url = '/v2/fake/flavors/' + url,220,155
openstack%2Fnova~788469,openstack/nova,stable/train,I0e068043d8267ab91535413d950a3e154c2234f7,libvirt: Ignore device already in the process of unplug errors,ABANDONED,2021-04-28 10:26:30.000000000,2023-09-01 17:03:40.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-04-28 10:26:30.000000000', 'files': ['nova/tests/unit/virt/libvirt/test_guest.py', 'nova/virt/libvirt/guest.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1032219508e5ac0c2819b80010840eb00afe3313', 'message': 'libvirt: Ignore device already in the process of unplug errors\n\nAt present QEMU will raise an error to libvirt when a device_del request\nis made for a device that has already partially detached through a\nprevious request. This is outlined in more detail in the following\ndownstream Red Hat QEMU bug report:\n\nGet libvirtError ""Device XX is already in the process of unplug"" [..]\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1878659\n\nWithin Nova we can actually ignore this error and allow our existing\nretry logic to attempt again after a short wait, hopefully allowing the\noriginal request to complete removing the device from the domain.\n\nThis change does this and should result in one of the following\ndevice_del requests raising a VIR_ERR_DEVICE_MISSING error from libvirt.\n_try_detach_device should then translate that libvirt error into a\nDeviceNotFound exception which is itself then ignored by all\ndetach_device_with_retry callers and taken to mean that the device has\ndetached successfully.\n\nCloses-Bug: #1923206\nChange-Id: I0e068043d8267ab91535413d950a3e154c2234f7\n(cherry picked from commit 0a7d3794c6dc39976b4cbfe12b1688230ac895a8)\n(cherry picked from commit 972a86d61f6b6f0f3d1af549b081854e6ff016bc)\n(cherry picked from commit 4496dfe72020a9e658b04edcba90ddf7f578465f)\n(cherry picked from commit 5acc9316310028ccb3603d1ff7f0870018f834cd)\n'}]",0,788469,1032219508e5ac0c2819b80010840eb00afe3313,5,1,1,10135,,,0,"libvirt: Ignore device already in the process of unplug errors

At present QEMU will raise an error to libvirt when a device_del request
is made for a device that has already partially detached through a
previous request. This is outlined in more detail in the following
downstream Red Hat QEMU bug report:

Get libvirtError ""Device XX is already in the process of unplug"" [..]
https://bugzilla.redhat.com/show_bug.cgi?id=1878659

Within Nova we can actually ignore this error and allow our existing
retry logic to attempt again after a short wait, hopefully allowing the
original request to complete removing the device from the domain.

This change does this and should result in one of the following
device_del requests raising a VIR_ERR_DEVICE_MISSING error from libvirt.
_try_detach_device should then translate that libvirt error into a
DeviceNotFound exception which is itself then ignored by all
detach_device_with_retry callers and taken to mean that the device has
detached successfully.

Closes-Bug: #1923206
Change-Id: I0e068043d8267ab91535413d950a3e154c2234f7
(cherry picked from commit 0a7d3794c6dc39976b4cbfe12b1688230ac895a8)
(cherry picked from commit 972a86d61f6b6f0f3d1af549b081854e6ff016bc)
(cherry picked from commit 4496dfe72020a9e658b04edcba90ddf7f578465f)
(cherry picked from commit 5acc9316310028ccb3603d1ff7f0870018f834cd)
",git fetch https://review.opendev.org/openstack/nova refs/changes/69/788469/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/libvirt/test_guest.py', 'nova/virt/libvirt/guest.py']",2,1032219508e5ac0c2819b80010840eb00afe3313,bug/1923206, # NOTE(lyarwood): https://bugzilla.redhat.com/1878659 # Ignore this known QEMU bug for the time being # allowing our retry logic to fire again and hopefully # see that the device has been removed asynchronously # by QEMU in the meantime when the next call to detach # raises VIR_ERR_DEVICE_MISSING. if 'already in the process of unplug' in errmsg: LOG.debug('Ignoring QEMU rejecting our request to ' 'detach as it is caused by a previous ' 'request still being in progress.') return,,55,1
openstack%2Fnova~772482,openstack/nova,stable/train,Ifd9657f3357bc39cb904caa65168d38def8c9184,api: Log os-resetState as an instance action,ABANDONED,2021-01-26 09:19:19.000000000,2023-09-01 17:03:32.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-01-26 09:19:19.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_server_reset_state.py', 'nova/api/openstack/compute/admin_actions.py', 'releasenotes/notes/bug-1911924-6e93d8a5038d18c1.yaml', 'nova/compute/instance_actions.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/b9ce3617c7c7bbd4ad10ce02d88e84712e761345', 'message': 'api: Log os-resetState as an instance action\n\nIt appears this was missed as this action never hits the compute API and\nis fully handled within the API itself. This change simply records an\ninstance action directly in the API for this admin action providing a\nbreadcrumb to operators and users.\n\nCloses-Bug: #1911924\nChange-Id: Ifd9657f3357bc39cb904caa65168d38def8c9184\n(cherry picked from commit 534b4f38958af2fbf4392e445ddb1b2bad4179ed)\n(cherry picked from commit 3d84097eab617d8e29754160c2f6eb6e1a024f76)\n(cherry picked from commit 282e6a8497e7966baea36de25992e1c5f654116b)\n'}]",1,772482,b9ce3617c7c7bbd4ad10ce02d88e84712e761345,6,1,1,10135,,,0,"api: Log os-resetState as an instance action

It appears this was missed as this action never hits the compute API and
is fully handled within the API itself. This change simply records an
instance action directly in the API for this admin action providing a
breadcrumb to operators and users.

Closes-Bug: #1911924
Change-Id: Ifd9657f3357bc39cb904caa65168d38def8c9184
(cherry picked from commit 534b4f38958af2fbf4392e445ddb1b2bad4179ed)
(cherry picked from commit 3d84097eab617d8e29754160c2f6eb6e1a024f76)
(cherry picked from commit 282e6a8497e7966baea36de25992e1c5f654116b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/82/772482/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/api/openstack/compute/test_server_reset_state.py', 'nova/api/openstack/compute/admin_actions.py', 'releasenotes/notes/bug-1911924-6e93d8a5038d18c1.yaml', 'nova/compute/instance_actions.py']",4,b9ce3617c7c7bbd4ad10ce02d88e84712e761345,bug/1911924,RESET_STATE = 'resetState',,44,2
openstack%2Fnova~785583,openstack/nova,stable/train,I212a2db8d71702d330b146dc6f871b402a309e74,compute: Reject requests to commit intermediary snapshot of an inactive instance,ABANDONED,2021-04-09 09:17:06.000000000,2023-09-01 17:03:26.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-04-09 09:17:06.000000000', 'files': ['nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/97e78d0b66c9246acb077749eea2a79f0709371b', 'message': ""compute: Reject requests to commit intermediary snapshot of an inactive instance\n\nIntroduced by I76eb2e4da027a13525314bd58264f482374d270d the\nos-assisted-volume-snapshots API is only implemented by the libvirt virt\ndriver and should only be called by c-vol as part of an orchestrated\nremotefs based volume snapshot creation or deletion workflow.\n\nWhile not documented clearly in the current api-ref there are code\ncomments within the compute API suggesting that this API can be called\nagainst a volume attached to an instance that is in *any* vm_state.\n\nThis however is not correct when deleting and in turn committing an\nintermediary volume snapshot of an instance that is not running given\nthe current implementation within the libvirt driver. With a request to\nvirDomainBlockCommit being made that fails if the instance and\nunderlying domain is not running.\n\nAdding support for an offline commit isn't trivial and would be\nconsidered a new feature and not something we could backport on the\nstable branches. As such this change seeks to ensure requests to commit\nan intermediary volume snapshot from an inactive instance are rejected\nquickly and clearly by the compute API to the caller before we cast to\nthe compute.\n\nCloses-Bug: #1919487\nChange-Id: I212a2db8d71702d330b146dc6f871b402a309e74\n(cherry picked from commit 99409375a03e6f923a8b6b00a5dd653bab74caaf)\n(cherry picked from commit 200c743400ed3fd5240fd25d0396eb6180b3f26a)\n(cherry picked from commit 8a41605a78173207746a38350d7fb554f2701b7a)\n(cherry picked from commit 57a810c0bddb2d5fb8c8e97bba07a1c4eeb2a11a)\n""}]",0,785583,97e78d0b66c9246acb077749eea2a79f0709371b,6,1,1,10135,,,0,"compute: Reject requests to commit intermediary snapshot of an inactive instance

Introduced by I76eb2e4da027a13525314bd58264f482374d270d the
os-assisted-volume-snapshots API is only implemented by the libvirt virt
driver and should only be called by c-vol as part of an orchestrated
remotefs based volume snapshot creation or deletion workflow.

While not documented clearly in the current api-ref there are code
comments within the compute API suggesting that this API can be called
against a volume attached to an instance that is in *any* vm_state.

This however is not correct when deleting and in turn committing an
intermediary volume snapshot of an instance that is not running given
the current implementation within the libvirt driver. With a request to
virDomainBlockCommit being made that fails if the instance and
underlying domain is not running.

Adding support for an offline commit isn't trivial and would be
considered a new feature and not something we could backport on the
stable branches. As such this change seeks to ensure requests to commit
an intermediary volume snapshot from an inactive instance are rejected
quickly and clearly by the compute API to the caller before we cast to
the compute.

Closes-Bug: #1919487
Change-Id: I212a2db8d71702d330b146dc6f871b402a309e74
(cherry picked from commit 99409375a03e6f923a8b6b00a5dd653bab74caaf)
(cherry picked from commit 200c743400ed3fd5240fd25d0396eb6180b3f26a)
(cherry picked from commit 8a41605a78173207746a38350d7fb554f2701b7a)
(cherry picked from commit 57a810c0bddb2d5fb8c8e97bba07a1c4eeb2a11a)
",git fetch https://review.opendev.org/openstack/nova refs/changes/83/785583/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py']",2,97e78d0b66c9246acb077749eea2a79f0709371b,bug/1919487," # FIXME(lyarwood): Avoid bug #1919487 by rejecting the request # to delete an intermediary volume snapshot offline as this isn't # currently implemented within the libvirt driver and will fail. # This should be fixed in a future release but as it is essentially # a new feature wouldn't be something we could backport. As such # reject the request here so n-api can respond correctly to c-vol. if (delete_info.get('merge_target_file') is not None and instance.vm_state != vm_states.ACTIVE ): raise exception.InstanceInvalidState( attr='vm_state', instance_uuid=instance.uuid, state=instance.vm_state, method='volume_snapshot_delete' ) ", # We allow deleting the snapshot in any vm_state as long as there is # no task being performed on the instance and it has a host.,66,9
openstack%2Fnova~779294,openstack/nova,stable/train,I873b0c1e6e695ae88241bbf75ac9f80ecc6f5664,Add upgrade check about old computes,ABANDONED,2021-03-08 16:42:41.000000000,2023-09-01 17:03:17.000000000,,"[{'_account_id': 10135}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-03-08 16:42:41.000000000', 'files': ['nova/tests/unit/cmd/test_status.py', 'doc/source/cli/nova-status.rst', 'nova/cmd/status.py', 'doc/source/install/verify.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/39d9debc62fdee5099df91981cf9681266a367ba', 'message': 'Add upgrade check about old computes\n\nReport a warning during upgrade checks if there are computes older than\nthe previous major nova release in the system.\n\nSo if code is upgraded to N+1 and the upgrade check was run before\nthe restart of the services with N+1 code then the check warns for N-1\ncomputes in the system.\n\nConflicts:\n  doc/source/cli/nova-status.rst\n  doc/source/install/verify.rst\n  nova/cmd/status.py\n  nova/tests/unit/cmd/test_status.py\n\nNote: Fixed trivial conflicts due to different amount of upgrade\nchecks exists on train than on ussuri due to\nId9cd65877e53577bff22e408ca07bbeec4407f6e\n\nRelated-Bug: #1903545\n\nChange-Id: I873b0c1e6e695ae88241bbf75ac9f80ecc6f5664\n(cherry picked from commit 3b8257cd239d0bb52cb654d709cc579ca9841628)\n(cherry picked from commit 4e5b92545db5f5434bcfeab90bae1a8555a54dd4)\n(cherry picked from commit cff48e2cd4d9b99c673e6597d9871a2fa8a7e748)\n'}]",0,779294,39d9debc62fdee5099df91981cf9681266a367ba,8,3,1,9708,,,0,"Add upgrade check about old computes

Report a warning during upgrade checks if there are computes older than
the previous major nova release in the system.

So if code is upgraded to N+1 and the upgrade check was run before
the restart of the services with N+1 code then the check warns for N-1
computes in the system.

Conflicts:
  doc/source/cli/nova-status.rst
  doc/source/install/verify.rst
  nova/cmd/status.py
  nova/tests/unit/cmd/test_status.py

Note: Fixed trivial conflicts due to different amount of upgrade
checks exists on train than on ussuri due to
Id9cd65877e53577bff22e408ca07bbeec4407f6e

Related-Bug: #1903545

Change-Id: I873b0c1e6e695ae88241bbf75ac9f80ecc6f5664
(cherry picked from commit 3b8257cd239d0bb52cb654d709cc579ca9841628)
(cherry picked from commit 4e5b92545db5f5434bcfeab90bae1a8555a54dd4)
(cherry picked from commit cff48e2cd4d9b99c673e6597d9871a2fa8a7e748)
",git fetch https://review.opendev.org/openstack/nova refs/changes/94/779294/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/cmd/test_status.py', 'doc/source/cli/nova-status.rst', 'nova/cmd/status.py', 'doc/source/install/verify.rst']",4,39d9debc62fdee5099df91981cf9681266a367ba,bug/1904181, | Check: Older than N-1 computes | | Result: Success | | Details: None | +--------------------------------------------------------------------+,,49,0
openstack%2Fnova~765771,openstack/nova,stable/train,Ia2007bc63ef09931ea0197cef29d6a5614ed821a,libvirt: Skip encryption metadata lookups if secret already exists on host,ABANDONED,2020-12-07 09:39:11.000000000,2023-09-01 17:03:09.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-12-07 09:39:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d47679779189e43941881c6212d6db2052a19867', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 2, 'created': '2020-12-09 09:57:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/adf15ef0919c58419947ee254a4acca69bff547a', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nDepends-On: https://review.opendev.org/c/openstack/requirements/+/766170\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 3, 'created': '2020-12-09 10:13:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/108f70ad253cbcfa257550df9c0eac890fdfd8c6', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 4, 'created': '2020-12-09 10:20:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8361575595f6b1f96c2bce3c94665813c74be6b5', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 5, 'created': '2020-12-09 11:09:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/edaa9939976e868359322eab2822075a84e46b1c', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 6, 'created': '2020-12-09 11:13:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d4ae00f29ad1b471ac8d8276e930734780c227a0', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 7, 'created': '2020-12-09 11:16:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b473ec726ffb2f9445c7c0fc912f524379cdef2e', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 8, 'created': '2020-12-09 11:22:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/206f9397535b02befb4775973731fce9b97ba81e', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 9, 'created': '2020-12-09 12:13:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0b8cdbaa507170bef4dc39e620551bcb6d4ee495', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 10, 'created': '2020-12-09 12:40:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/eb475dd4394ff76ba79082072150085d837980c1', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}, {'number': 11, 'created': '2021-04-09 09:32:13.000000000', 'files': ['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug_1905701-fdc7402ffe70d104.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/95ed4f56a9e24e2dc9b58787ca436fdd9ef0ecd7', 'message': 'libvirt: Skip encryption metadata lookups if secret already exists on host\n\nWhen connecting an encrypted volume to a host the _attach_encryptor\nmethod will be called in order to either call a legacy os-brick\nencryptor *or* configure a libvirt secret used by libvirt and QEMU to\nnatively decrypt LUKSv1 encrypted volumes. To create this libvirt secret\nthe configured key manager will be queried to provide and then decode\nthe associated secret before this is stashed within libvirt.\n\nThis change simply skips the above when an existing libvirt secret\nassociated with the target volume is found on the host already.\n\nWhile this obviously optimises basic instance lifecycle flows such as a\nsimple power off and on it additionally resolves a more convoluted use\ncase when the ``[DEFAULT]/resume_guests_state_on_host_boot``\nconfigurable is enabled. In this case the compute service has no request\ncontext with which to query the key manager when attempting to restart\ninstances with encrypted volumes attached. As a result any attempt by\nthe compute service to restart an instance with an attached encrypted\nvolume would previously fail.\n\nCloses-Bug: #1905701\nChange-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a\n(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)\n(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)\n(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)\n'}]",0,765771,95ed4f56a9e24e2dc9b58787ca436fdd9ef0ecd7,22,1,11,10135,,,0,"libvirt: Skip encryption metadata lookups if secret already exists on host

When connecting an encrypted volume to a host the _attach_encryptor
method will be called in order to either call a legacy os-brick
encryptor *or* configure a libvirt secret used by libvirt and QEMU to
natively decrypt LUKSv1 encrypted volumes. To create this libvirt secret
the configured key manager will be queried to provide and then decode
the associated secret before this is stashed within libvirt.

This change simply skips the above when an existing libvirt secret
associated with the target volume is found on the host already.

While this obviously optimises basic instance lifecycle flows such as a
simple power off and on it additionally resolves a more convoluted use
case when the ``[DEFAULT]/resume_guests_state_on_host_boot``
configurable is enabled. In this case the compute service has no request
context with which to query the key manager when attempting to restart
instances with encrypted volumes attached. As a result any attempt by
the compute service to restart an instance with an attached encrypted
volume would previously fail.

Closes-Bug: #1905701
Change-Id: Ia2007bc63ef09931ea0197cef29d6a5614ed821a
(cherry picked from commit a107a5099e86c3da80a6feeca6f840d5a3ad11b9)
(cherry picked from commit af5b87874254aeb42931e3bb4faab3a2620b6894)
(cherry picked from commit a1cb246e5d2d9ade01cc26087e361169e3aa624c)
",git fetch https://review.opendev.org/openstack/nova refs/changes/71/765771/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug_1905701-fdc7402ffe70d104.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py']",3,d47679779189e43941881c6212d6db2052a19867,bug/1905701," # Mock out find_secret so we don't skip ahead drvr._host.find_secret.return_value = None @mock.patch.object(key_manager, 'API') def test_attach_encryptor_secret_exists(self, mock_key_manager_api): connection_info = {'data': {'volume_id': uuids.volume_id}} drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) with test.nested( mock.patch.object(drvr, '_get_volume_encryption'), mock.patch.object(drvr._host, 'find_secret') ) as (mock_get_volume_encryption, mock_find_secret): drvr._attach_encryptor(self.context, connection_info, None) # Assert we called find_secret and nothing else mock_find_secret.assert_called_once_with('volume', uuids.volume_id) mock_get_volume_encryption.assert_not_called() mock_key_manager_api.assert_not_called() ",,42,1
openstack%2Fnova~766210,openstack/nova,stable/train,I41b7c1653c6a887ee4b08e588c5d422409aebfba,libvirt: Remove native LUKS compat code,ABANDONED,2020-12-09 12:13:57.000000000,2023-09-01 17:03:02.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-12-09 12:13:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3a996853f7a2f167f698b4e6c2ce87056d06fb23', 'message': 'libvirt: Remove native LUKS compat code\n\nI408baef12358a83921c4693b847a692f6c19e36f bumped the MIN versions of\nLibvirt and QEMU past the required versions for native LUKS decryption\nsupport during the Stein cycle.\n\nAs a result and building on I5a0de814f2868f1a4980a69b72b45ee829cedb94 we\ncan now remove various bits of compatibility code introduced to support\nthe use of native LUKS decryption in environments with mixed versions of\nLibvirt and QEMU. This includes code used during N to N+1 upgrades that\nis no longer required as both ends of a migration during an upgrade\nshould now have the required versions of Libvirt and QEMU.\n\nAn _is_luks_v1 utility method is retained to ensure the native approach\nis only used when using LUKS v1 volumes as native LUKS v2 support is not\ncurrently available within QEMU.\n\nChange-Id: I41b7c1653c6a887ee4b08e588c5d422409aebfba\n(cherry picked from commit 649236bbb1d1a204a308a9dad55b7a4d5a2a1021)\n'}, {'number': 2, 'created': '2020-12-09 12:40:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9adaa4ad280911bdf36cc77feb57b8167a2f797d', 'message': 'libvirt: Remove native LUKS compat code\n\nI408baef12358a83921c4693b847a692f6c19e36f bumped the MIN versions of\nLibvirt and QEMU past the required versions for native LUKS decryption\nsupport during the Stein cycle.\n\nAs a result and building on I5a0de814f2868f1a4980a69b72b45ee829cedb94 we\ncan now remove various bits of compatibility code introduced to support\nthe use of native LUKS decryption in environments with mixed versions of\nLibvirt and QEMU. This includes code used during N to N+1 upgrades that\nis no longer required as both ends of a migration during an upgrade\nshould now have the required versions of Libvirt and QEMU.\n\nAn _is_luks_v1 utility method is retained to ensure the native approach\nis only used when using LUKS v1 volumes as native LUKS v2 support is not\ncurrently available within QEMU.\n\nChange-Id: I41b7c1653c6a887ee4b08e588c5d422409aebfba\n(cherry picked from commit 649236bbb1d1a204a308a9dad55b7a4d5a2a1021)\n'}, {'number': 3, 'created': '2021-04-09 09:32:13.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/61a477e83abb6c241120759a28e9ccf10771d1a7', 'message': 'libvirt: Remove native LUKS compat code\n\nI408baef12358a83921c4693b847a692f6c19e36f bumped the MIN versions of\nLibvirt and QEMU past the required versions for native LUKS decryption\nsupport during the Stein cycle.\n\nAs a result and building on I5a0de814f2868f1a4980a69b72b45ee829cedb94 we\ncan now remove various bits of compatibility code introduced to support\nthe use of native LUKS decryption in environments with mixed versions of\nLibvirt and QEMU. This includes code used during N to N+1 upgrades that\nis no longer required as both ends of a migration during an upgrade\nshould now have the required versions of Libvirt and QEMU.\n\nAn _is_luks_v1 utility method is retained to ensure the native approach\nis only used when using LUKS v1 volumes as native LUKS v2 support is not\ncurrently available within QEMU.\n\nChange-Id: I41b7c1653c6a887ee4b08e588c5d422409aebfba\n(cherry picked from commit 649236bbb1d1a204a308a9dad55b7a4d5a2a1021)\n'}]",0,766210,61a477e83abb6c241120759a28e9ccf10771d1a7,10,1,3,10135,,,0,"libvirt: Remove native LUKS compat code

I408baef12358a83921c4693b847a692f6c19e36f bumped the MIN versions of
Libvirt and QEMU past the required versions for native LUKS decryption
support during the Stein cycle.

As a result and building on I5a0de814f2868f1a4980a69b72b45ee829cedb94 we
can now remove various bits of compatibility code introduced to support
the use of native LUKS decryption in environments with mixed versions of
Libvirt and QEMU. This includes code used during N to N+1 upgrades that
is no longer required as both ends of a migration during an upgrade
should now have the required versions of Libvirt and QEMU.

An _is_luks_v1 utility method is retained to ensure the native approach
is only used when using LUKS v1 volumes as native LUKS v2 support is not
currently available within QEMU.

Change-Id: I41b7c1653c6a887ee4b08e588c5d422409aebfba
(cherry picked from commit 649236bbb1d1a204a308a9dad55b7a4d5a2a1021)
",git fetch https://review.opendev.org/openstack/nova refs/changes/10/766210/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",2,3a996853f7a2f167f698b4e6c2ce87056d06fb23,," self.context, connection_info, encryption) self.context, connection_info, encryption) @mock.patch.object(libvirt_driver.LibvirtDriver, '_is_luks_v1') def test_connect_volume_luks(self, mock_is_volume_luks, mock_host, mock_get_volume_encryptor, mock_is_luks_v1, mock_is_volume_luks.return_value = True # _connect_volume when _is_luks_v1 is True mock_is_luks_v1.return_value = True # assert that the encryptor is used if is_luks is False mock_is_luks_v1.return_value = False # assert that we format the volume if it is not already formatted mock_is_luks_v1.return_value = True mock_is_volume_luks.return_value = False def test_disconnect_volume_luks(self, mock_get_volume_encryptor): drvr._attach_encryptor(self.context, connection_info, None) drvr._attach_encryptor(self.context, connection_info, None) drvr._attach_encryptor(self.context, connection_info, encryption) encryption = {'provider': encryptors.PLAIN, 'control_location': 'front-end'} drvr._attach_encryptor(self.context, connection_info, None) encryption = {'provider': encryptors.PLAIN, 'control_location': 'front-end'} drvr._attach_encryptor(self.context, connection_info, encryption) with mock.patch.object(drvr, '_is_luks_v1', return_value=True): encryption) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._is_luks_v1') mock_is_luks_v1, mock_get_encryptor, mock_get_metadata): mock_is_luks_v1.return_value = False @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._is_luks_v1') mock_is_luks_v1, mock_get_encryptor, mock_get_metadata): mock_is_luks_v1.return_value = False @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._is_luks_v1') mock_get_encryptor, mock_is_luks_v1, mock_find_secret): mock_is_luks_v1.return_value = True def test_is_luks_v1(self): self.assertFalse(drvr._is_luks_v1({})) self.assertFalse(drvr._is_luks_v1({ self.assertFalse(drvr._is_luks_v1({ self.assertFalse(drvr._is_luks_v1({ self.assertTrue(drvr._is_luks_v1({ self.assertTrue(drvr._is_luks_v1({ self.assertTrue(drvr._is_luks_v1({ target_ret=None): mock.call(c, v['connection_info'], instance)) inst_ref) @mock.patch.object(libvirt_driver.LibvirtDriver, '_is_luks_v1') def test_swap_volume_native_luks_blocked(self, mock_is_luks_v1, mock_is_luks_v1.return_value = True"," self.context, connection_info, encryption, True) self.context, connection_info, encryption, True) @mock.patch.object(libvirt_driver.LibvirtDriver, '_use_native_luks') def test_connect_volume_native_luks(self, mock_is_luks, mock_host, mock_get_volume_encryptor, mock_use_native_luks, mock_is_luks.return_value = True # _connect_volume when use_native_luks is True mock_use_native_luks.return_value = True # assert that the encryptor is used if use_native_luks is False mock_use_native_luks.return_value = False # assert that we format the volume if is_luks is False mock_use_native_luks.return_value = True mock_is_luks.return_value = False # assert that os-brick is used when allow_native_luks is False mock_encryptor.attach_volume.reset_mock() mock_is_luks.return_value = True drvr._connect_volume(self.context, connection_info, instance, encryption=encryption, allow_native_luks=False) mock_encryptor.attach_volume.assert_called_once_with(self.context, **encryption) def test_disconnect_volume_native_luks(self, mock_get_volume_encryptor): drvr._attach_encryptor(self.context, connection_info, None, False) drvr._attach_encryptor(self.context, connection_info, None, False) drvr._attach_encryptor(self.context, connection_info, encryption, False) encryption = {'provider': 'luks', 'control_location': 'front-end'} drvr._attach_encryptor(self.context, connection_info, None, False) encryption = {'provider': 'luks', 'control_location': 'front-end'} drvr._attach_encryptor(self.context, connection_info, encryption, False) with mock.patch.object(drvr, '_use_native_luks', return_value=True): encryption, allow_native_luks=True) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._use_native_luks') mock_use_native_luks, mock_get_encryptor, mock_get_metadata): mock_use_native_luks.return_value = False @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._use_native_luks') mock_use_native_luks, mock_get_encryptor, mock_get_metadata): mock_use_native_luks.return_value = False @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._use_native_luks') mock_get_encryptor, mock_use_native_luks, mock_find_secret): mock_use_native_luks.return_value = True @mock.patch.object(host.Host, ""has_min_version"") def test_use_native_luks(self, mock_has_min_version): # The required QEMU and Libvirt versions are always available # on the host and a valid LUKS provider is present within the # encryption metadata dict. mock_has_min_version.return_value = True self.assertFalse(drvr._use_native_luks({})) self.assertFalse(drvr._use_native_luks({ self.assertFalse(drvr._use_native_luks({ self.assertFalse(drvr._use_native_luks({ self.assertTrue(drvr._use_native_luks({ self.assertTrue(drvr._use_native_luks({ self.assertTrue(drvr._use_native_luks({ src_supports_native_luks=True, def test_pre_live_migration_only_dest_supports_native_luks(self): # Assert that allow_native_luks is False when src_supports_native_luks # is missing from migrate data during a P to Q LM. self._test_pre_live_migration_works_correctly_mocked( src_supports_native_luks=None, dest_supports_native_luks=True, allow_native_luks=False) target_ret=None, src_supports_native_luks=True, dest_supports_native_luks=True, allow_native_luks=True): mock.call(c, v['connection_info'], instance, allow_native_luks=allow_native_luks)) if src_supports_native_luks: migrate_data.src_supports_native_luks = True else: target_ret.pop('src_supports_native_luks') src_supports_native_luks=True, src_supports_native_luks=True inst_ref, allow_native_luks=True) @mock.patch.object(libvirt_driver.LibvirtDriver, '_use_native_luks') def test_swap_volume_native_luks_blocked(self, mock_use_native_luks, mock_use_native_luks.return_value = True",59,110
openstack%2Fnova~785075,openstack/nova,stable/train,Ie653e5ec69d16ae469f1f8171fee85aea754edff,Dynamically archive FK related records in archive_deleted_rows,ABANDONED,2021-04-06 23:10:05.000000000,2023-09-01 17:02:54.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-06 23:10:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b1bf80455c3d0464bab6928377bf5955311bd865', 'message': 'Dynamically archive FK related records in archive_deleted_rows\n\nCurrently, it is possible to ""partially archive"" the database by\nrunning \'nova-manage db archive_deleted_rows\' with --max_rows or by\ninterrupting the archive process in any way. When this happens, it is\npossible to have archived a record with a foreign key relationship to a\nparent record (example: \'instance_extra\' table record is archived while\nthe \'instances\' table record remains).\n\nWhen an instance\'s records become ""split"" in this way, any API request\nthat can (1) access the deleted instance and (2) tries to access data\nthat should be in a child table (example: the embedded flavor for an\ninstance) will fail with an OrphanedObjectError and HTTP 500 to the\nuser. Examples of APIs that are affected by this are the tenant usage\nAPIs and listing of deleted instances as admin.\n\nIn the tenant usage example, the API looks at deleted instances to\ncalculate usage over a time period. It pulls deleted and non-deleted\ninstances and does instance.get_flavor() to calculate their usage. The\nflavor data is expected to be present because\nexpecteds_attrs=[\'flavor\'] is used to do a join with the\n\'instance_extra\' table and populate the instance object\'s flavor data.\nWhen get_flavor() is called, it tries to access the instance.flavor\nattribute (which hasn\'t been populated because the \'instance_extra\'\nrecord is gone). That triggers a lazy-load of the flavor which loads\nthe instance from the database again with expected_attrs=[\'flavor\']\nagain which doesn\'t populate instance.flavor (again) because the\n\'instance_extra\' record is gone. Then the Instance._load_flavor code\nintentionally orphans the instance record to avoid triggering\nlazy-loads while it attempts to populate instance.flavor,\ninstance.new_flavor, and instance.old_flavor. Finally, another\nlazy-load is triggered (because instance.flavor is still not populated)\nand fails with OrphanedObjectError.\n\nOne way to solve this problem is to make it impossible for\narchive_deleted_records to orphan records that are related by foreign\nkey relationships. The approach is to process parent tables first\n(opposite of today where we process child tables first) and find all of\nthe tables that refer to it by foreign keys, create and collect\ninsert/delete statements for those child records, and then put them all\ntogether in a single database transaction to archive all related\nrecords ""atomically"". The idea is that if anything were to interrupt\nthe transaction (errors or other) it would roll back and keep all the\nrelated records together. Either all or archived or none are archived.\n\nThis changes the logic of the per table archive to discover tables that\nrefer to the table by foreign keys and generates insert/delete query\nstatements to execute in the same database transaction as the table\narchive itself. The extra records archived along with the table are\nadded to the rows_archived result. The existing code for ""archiving\nrecords if instance is deleted"" also has to be removed along with this\nbecause the new logic does the same thing dynamically and makes it\nobsolete. Finally, some assertions in the unit tests need to be changed\nor removed because they were assuming certain types of archiving\nfailures due to foreign key constraint violations that can no longer\noccur with the new dynamic logic for archiving child records.\n\nCloses-Bug: #1837995\n\nChange-Id: Ie653e5ec69d16ae469f1f8171fee85aea754edff\n(cherry picked from commit becb94ae643ab4863daa564783646921b4a2b372)\n(cherry picked from commit 513ed1dd3c60954dc467a64fdfd849a989cae56c)\n(cherry picked from commit ac89b8fbe524f333b8bb8531f5be0a7f03c5289d)\n'}, {'number': 2, 'created': '2021-04-07 16:02:04.000000000', 'files': ['nova/tests/functional/db/test_archive.py', 'nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/0743eb227cf6114f00ba2be94dabff6e24ca1f24', 'message': 'Dynamically archive FK related records in archive_deleted_rows\n\nCurrently, it is possible to ""partially archive"" the database by\nrunning \'nova-manage db archive_deleted_rows\' with --max_rows or by\ninterrupting the archive process in any way. When this happens, it is\npossible to have archived a record with a foreign key relationship to a\nparent record (example: \'instance_extra\' table record is archived while\nthe \'instances\' table record remains).\n\nWhen an instance\'s records become ""split"" in this way, any API request\nthat can (1) access the deleted instance and (2) tries to access data\nthat should be in a child table (example: the embedded flavor for an\ninstance) will fail with an OrphanedObjectError and HTTP 500 to the\nuser. Examples of APIs that are affected by this are the tenant usage\nAPIs and listing of deleted instances as admin.\n\nIn the tenant usage example, the API looks at deleted instances to\ncalculate usage over a time period. It pulls deleted and non-deleted\ninstances and does instance.get_flavor() to calculate their usage. The\nflavor data is expected to be present because\nexpecteds_attrs=[\'flavor\'] is used to do a join with the\n\'instance_extra\' table and populate the instance object\'s flavor data.\nWhen get_flavor() is called, it tries to access the instance.flavor\nattribute (which hasn\'t been populated because the \'instance_extra\'\nrecord is gone). That triggers a lazy-load of the flavor which loads\nthe instance from the database again with expected_attrs=[\'flavor\']\nagain which doesn\'t populate instance.flavor (again) because the\n\'instance_extra\' record is gone. Then the Instance._load_flavor code\nintentionally orphans the instance record to avoid triggering\nlazy-loads while it attempts to populate instance.flavor,\ninstance.new_flavor, and instance.old_flavor. Finally, another\nlazy-load is triggered (because instance.flavor is still not populated)\nand fails with OrphanedObjectError.\n\nOne way to solve this problem is to make it impossible for\narchive_deleted_records to orphan records that are related by foreign\nkey relationships. The approach is to process parent tables first\n(opposite of today where we process child tables first) and find all of\nthe tables that refer to it by foreign keys, create and collect\ninsert/delete statements for those child records, and then put them all\ntogether in a single database transaction to archive all related\nrecords ""atomically"". The idea is that if anything were to interrupt\nthe transaction (errors or other) it would roll back and keep all the\nrelated records together. Either all or archived or none are archived.\n\nThis changes the logic of the per table archive to discover tables that\nrefer to the table by foreign keys and generates insert/delete query\nstatements to execute in the same database transaction as the table\narchive itself. The extra records archived along with the table are\nadded to the rows_archived result. The existing code for ""archiving\nrecords if instance is deleted"" also has to be removed along with this\nbecause the new logic does the same thing dynamically and makes it\nobsolete. Finally, some assertions in the unit tests need to be changed\nor removed because they were assuming certain types of archiving\nfailures due to foreign key constraint violations that can no longer\noccur with the new dynamic logic for archiving child records.\n\nCloses-Bug: #1837995\n\nChange-Id: Ie653e5ec69d16ae469f1f8171fee85aea754edff\n(cherry picked from commit becb94ae643ab4863daa564783646921b4a2b372)\n(cherry picked from commit 7b4f4796478941eafa9c0997f7ef03293c442d94)\n(cherry picked from commit 8a858eca55544f25427c3762f14523b1507261ee)\n'}]",3,785075,0743eb227cf6114f00ba2be94dabff6e24ca1f24,10,2,2,4690,,,0,"Dynamically archive FK related records in archive_deleted_rows

Currently, it is possible to ""partially archive"" the database by
running 'nova-manage db archive_deleted_rows' with --max_rows or by
interrupting the archive process in any way. When this happens, it is
possible to have archived a record with a foreign key relationship to a
parent record (example: 'instance_extra' table record is archived while
the 'instances' table record remains).

When an instance's records become ""split"" in this way, any API request
that can (1) access the deleted instance and (2) tries to access data
that should be in a child table (example: the embedded flavor for an
instance) will fail with an OrphanedObjectError and HTTP 500 to the
user. Examples of APIs that are affected by this are the tenant usage
APIs and listing of deleted instances as admin.

In the tenant usage example, the API looks at deleted instances to
calculate usage over a time period. It pulls deleted and non-deleted
instances and does instance.get_flavor() to calculate their usage. The
flavor data is expected to be present because
expecteds_attrs=['flavor'] is used to do a join with the
'instance_extra' table and populate the instance object's flavor data.
When get_flavor() is called, it tries to access the instance.flavor
attribute (which hasn't been populated because the 'instance_extra'
record is gone). That triggers a lazy-load of the flavor which loads
the instance from the database again with expected_attrs=['flavor']
again which doesn't populate instance.flavor (again) because the
'instance_extra' record is gone. Then the Instance._load_flavor code
intentionally orphans the instance record to avoid triggering
lazy-loads while it attempts to populate instance.flavor,
instance.new_flavor, and instance.old_flavor. Finally, another
lazy-load is triggered (because instance.flavor is still not populated)
and fails with OrphanedObjectError.

One way to solve this problem is to make it impossible for
archive_deleted_records to orphan records that are related by foreign
key relationships. The approach is to process parent tables first
(opposite of today where we process child tables first) and find all of
the tables that refer to it by foreign keys, create and collect
insert/delete statements for those child records, and then put them all
together in a single database transaction to archive all related
records ""atomically"". The idea is that if anything were to interrupt
the transaction (errors or other) it would roll back and keep all the
related records together. Either all or archived or none are archived.

This changes the logic of the per table archive to discover tables that
refer to the table by foreign keys and generates insert/delete query
statements to execute in the same database transaction as the table
archive itself. The extra records archived along with the table are
added to the rows_archived result. The existing code for ""archiving
records if instance is deleted"" also has to be removed along with this
because the new logic does the same thing dynamically and makes it
obsolete. Finally, some assertions in the unit tests need to be changed
or removed because they were assuming certain types of archiving
failures due to foreign key constraint violations that can no longer
occur with the new dynamic logic for archiving child records.

Closes-Bug: #1837995

Change-Id: Ie653e5ec69d16ae469f1f8171fee85aea754edff
(cherry picked from commit becb94ae643ab4863daa564783646921b4a2b372)
(cherry picked from commit 7b4f4796478941eafa9c0997f7ef03293c442d94)
(cherry picked from commit 8a858eca55544f25427c3762f14523b1507261ee)
",git fetch https://review.opendev.org/openstack/nova refs/changes/75/785075/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/db/test_archive.py', 'nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py']",3,b1bf80455c3d0464bab6928377bf5955311bd865,bug/1837995,"def _get_tables_with_fk_to_table(table): """"""Get a list of tables that refer to the given table by foreign key (FK). :param table: Table object (parent) for which to find references by FK :returns: A list of Table objects that refer to the specified table by FK tables = [] for t in models.BASE.metadata.tables.values(): for fk in t.foreign_keys: if fk.references(table): tables.append(t) return tables def _get_fk_stmts(metadata, conn, table, column, records): """"""Find records related to this table by foreign key (FK) and create and return insert/delete statements for them. Logic is: find the tables that reference the table passed to this method and walk the tree of references by FK. As child records are found, prepend them to deques to execute later in a single database transaction (to avoid orphaning related records if any one insert/delete fails or the archive process is otherwise interrupted). :param metadata: Metadata object to use to construct a shadow Table object :param conn: Connection object to use to select records related by FK :param table: Table object (parent) for which to find references by FK :param column: Column object (parent) to use to select records related by FK :param records: A list of records (column values) to use to select records related by FK :returns: tuple of (insert statements, delete statements) for records related by FK to insert into shadow tables and delete from main tables """""" inserts = collections.deque() deletes = collections.deque() fk_tables = _get_tables_with_fk_to_table(table) for fk_table in fk_tables: # Create the shadow table for the referencing table. fk_shadow_tablename = _SHADOW_TABLE_PREFIX + fk_table.name try: fk_shadow_table = Table(fk_shadow_tablename, metadata, autoload=True) except NoSuchTableError: # No corresponding shadow table; skip it. continue # TODO(stephenfin): Drop this when we drop the table if fk_table.name == ""dns_domains"": # We have one table (dns_domains) where the key is called # ""domain"" rather than ""id"" fk_column = fk_table.c.domain else: fk_column = fk_table.c.id for fk in fk_table.foreign_keys: # We need to find the records in the referring (child) table that # correspond to the records in our (parent) table so we can archive # them. # First, select the column in the parent referenced by the child # table that corresponds to the parent table records that were # passed in. # Example: table = 'instances' and fk_table = 'instance_extra' # fk.parent = instance_extra.instance_uuid # fk.column = instances.uuid # SELECT instances.uuid FROM instances, instance_extra # WHERE instance_extra.instance_uuid = instances.uuid # AND instance.id IN (<ids>) # We need the instance uuids for the <ids> in order to # look up the matching instance_extra records. select = sql.select([fk.column]).where( sql.and_(fk.parent == fk.column, column.in_(records))) rows = conn.execute(select).fetchall() p_records = [r[0] for r in rows] # Then, select rows in the child table that correspond to the # parent table records that were passed in. # Example: table = 'instances' and fk_table = 'instance_extra' # fk.parent = instance_extra.instance_uuid # fk.column = instances.uuid # SELECT instance_extra.id FROM instance_extra, instances # WHERE instance_extra.instance_uuid = instances.uuid # AND instances.uuid IN (<uuids>) # We will get the instance_extra ids we need to archive # them. fk_select = sql.select([fk_column]).where( sql.and_(fk.parent == fk.column, fk.column.in_(p_records))) fk_rows = conn.execute(fk_select).fetchall() fk_records = [r[0] for r in fk_rows] if fk_records: # If we found any records in the child table, create shadow # table insert statements for them and prepend them to the # deque. fk_columns = [c.name for c in fk_table.c] fk_insert = fk_shadow_table.insert(inline=True).\ from_select(fk_columns, sql.select([fk_table], fk_column.in_(fk_records))) inserts.appendleft(fk_insert) # Create main table delete statements and prepend them to the # deque. fk_delete = fk_table.delete().where(fk_column.in_(fk_records)) deletes.appendleft(fk_delete) # Repeat for any possible nested child tables. i, d = _get_fk_stmts(metadata, conn, fk_table, fk_column, fk_records) inserts.extendleft(i) deletes.extendleft(d) return inserts, deletes Will also follow FK constraints and archive all referring rows. Example: archving a record from the 'instances' table will also archive the 'instance_extra' record before archiving the 'instances' record. :returns: 3-item tuple: - number of extra rows archived (due to FK constraints) dict of {tablename: rows_archived} return rows_archived, deleted_instance_uuids, {} # We will archive deleted rows for this table and also generate insert and # delete statements for extra rows we may archive by following FK # relationships. Because we are iterating over the sorted_tables (list of # Table objects sorted in order of foreign key dependency), new inserts and # deletes (""leaves"") will be added to the fronts of the deques created in # _get_fk_stmts. This way, we make sure we delete child table records # before we delete their parent table records. # Keep track of any extra tablenames to number of rows that we archive by # following FK relationships. # {tablename: extra_rows_archived} extras = collections.defaultdict(int) # Walk FK relationships and add insert/delete statements for rows that # refer to this table via FK constraints. fk_inserts and fk_deletes # will be prepended to by _get_fk_stmts if referring rows are found by # FK constraints. fk_inserts, fk_deletes = _get_fk_stmts( metadata, conn, table, column, records) for fk_insert in fk_inserts: conn.execute(fk_insert) for fk_delete in fk_deletes: result_fk_delete = conn.execute(fk_delete) extras[fk_delete.table.name] += result_fk_delete.rowcount rows_archived += result_delete.rowcount return rows_archived, deleted_instance_uuids, extras table_to_rows_archived = collections.defaultdict(int) # Get the sorted list of tables in order of foreign key dependency. # Process the parent tables and find their dependent records in order to # archive the related records in a single database transactions. The goal # is to avoid a situation where, for example, an 'instances' table record # is missing its corresponding 'instance_extra' record due to running the # archive_deleted_rows command with max_rows. for table in meta.sorted_tables: rows_archived, _deleted_instance_uuids, extras = ( for tablename, extra_rows_archived in extras.items(): table_to_rows_archived[tablename] += extra_rows_archived total_rows_archived += extra_rows_archived","def _archive_if_instance_deleted(table, shadow_table, instances, conn, max_rows, before): """"""Look for records that pertain to deleted instances, but may not be deleted themselves. This catches cases where we delete an instance, but leave some residue because of a failure in a cleanup path or similar. Logic is: if I have a column called instance_uuid, and that instance is deleted, then I can be deleted. # NOTE(jake): handle instance_actions_events differently as it relies on # instance_actions.id not instances.uuid if table.name == ""instance_actions_events"": instance_actions = models.BASE.metadata.tables[""instance_actions""] query_select = sql.select( [table], and_(instances.c.deleted != instances.c.deleted.default.arg, instances.c.uuid == instance_actions.c.instance_uuid, instance_actions.c.id == table.c.action_id)) else: query_select = sql.select( [table], and_(instances.c.deleted != instances.c.deleted.default.arg, instances.c.uuid == table.c.instance_uuid)) if before: query_select = query_select.where(instances.c.deleted_at < before) query_select = query_select.order_by(table.c.id).limit(max_rows) query_insert = shadow_table.insert(inline=True).\ from_select([c.name for c in table.c], query_select) delete_statement = DeleteFromSelect(table, query_select, table.c.id) :returns: 2-item tuple: return rows_archived, deleted_instance_uuids rows_archived = result_delete.rowcount # NOTE(jake): instance_actions_events doesn't have a instance_uuid column # but still needs to be archived as it is a FK constraint if ((max_rows is None or rows_archived < max_rows) and # NOTE(melwitt): The pci_devices table uses the 'instance_uuid' # column to track the allocated association of a PCI device and its # records are not tied to the lifecycles of instance records. (tablename != 'pci_devices' and 'instance_uuid' in columns or tablename == 'instance_actions_events')): instances = models.BASE.metadata.tables['instances'] limit = max_rows - rows_archived if max_rows is not None else None extra = _archive_if_instance_deleted(table, shadow_table, instances, conn, limit, before) rows_archived += extra return rows_archived, deleted_instance_uuids table_to_rows_archived = {} # Reverse sort the tables so we get the leaf nodes first for processing. for table in reversed(meta.sorted_tables): rows_archived, _deleted_instance_uuids = (",166,80
openstack%2Fnova~785074,openstack/nova,stable/train,Ia225ee86536248d2540de0d7a1cd012333e708a2,Add functional test for bug 1837995,ABANDONED,2021-04-06 23:10:05.000000000,2023-09-01 17:02:48.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-04-06 23:10:05.000000000', 'files': ['nova/tests/functional/db/test_archive.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/6cda0f5e31df7ef802c087cacf60974b374b852c', 'message': ""Add functional test for bug 1837995\n\nThis adds a functional test to reproduce the bug where when calling an\nAPI that will examine a deleted instance record (examples: GET /servers/detail\nand GET /os-simple-tenant-usage), if that instance's related records\nhave only been partially archived (example: 'instance_extra' record was\narchived but 'instances' record has not been archived yet) then the API\ncall fails with the following error:\n\n  Unexpected API Error ... <class 'nova.exception.OrphanedObjectError'>\n  (HTTP 500)\n\nRelated-Bug: #1837995\n\nChange-Id: Ia225ee86536248d2540de0d7a1cd012333e708a2\n(cherry picked from commit 3d4e53f832792cc49001f1588164e28b84c16d7a)\n(cherry picked from commit 21241b38dd4bc2c74a69aed489ada5c611395920)\n(cherry picked from commit 37cff3c74d54bf0d19abe9502e5979b81e24f918)\n""}]",0,785074,6cda0f5e31df7ef802c087cacf60974b374b852c,4,1,1,4690,,,0,"Add functional test for bug 1837995

This adds a functional test to reproduce the bug where when calling an
API that will examine a deleted instance record (examples: GET /servers/detail
and GET /os-simple-tenant-usage), if that instance's related records
have only been partially archived (example: 'instance_extra' record was
archived but 'instances' record has not been archived yet) then the API
call fails with the following error:

  Unexpected API Error ... <class 'nova.exception.OrphanedObjectError'>
  (HTTP 500)

Related-Bug: #1837995

Change-Id: Ia225ee86536248d2540de0d7a1cd012333e708a2
(cherry picked from commit 3d4e53f832792cc49001f1588164e28b84c16d7a)
(cherry picked from commit 21241b38dd4bc2c74a69aed489ada5c611395920)
(cherry picked from commit 37cff3c74d54bf0d19abe9502e5979b81e24f918)
",git fetch https://review.opendev.org/openstack/nova refs/changes/74/785074/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/db/test_archive.py'],1,6cda0f5e31df7ef802c087cacf60974b374b852c,bug/1837995," def test_archive_deleted_rows_incomplete(self): """"""This tests a scenario where archive_deleted_rows is run with --max_rows and does not run to completion. That is, the archive is stopped before all archivable records have been archived. Specifically, the problematic state is when a single instance becomes partially archived (example: 'instance_extra' record for one instance has been archived while its 'instances' record remains). Any access of the instance (example: listing deleted instances) that triggers the retrieval of a dependent record that has been archived away, results in undefined behavior that may raise an error. We will force the system into a state where a single deleted instance is partially archived. We want to verify that we can, for example, successfully do a GET /servers/detail at any point between partial archive_deleted_rows runs without errors. """""" # Boots a server, deletes it, and then tries to archive it. server = self._create_server() server_id = server['id'] # Assert that there are instance_actions. instance_actions are # interesting since we don't soft delete them but they have a foreign # key back to the instances table. actions = self.api.get_instance_actions(server_id) self.assertTrue(len(actions), 'No instance actions for server: %s' % server_id) self._delete_server(server) # Archive deleted records iteratively, 1 row at a time, and try to do a # GET /servers/detail between each run. All should succeed. exceptions = [] while True: _, _, archived = db.archive_deleted_rows(max_rows=1) try: # Need to use the admin API to list deleted servers. self.admin_api.get_servers(search_opts={'deleted': True}) except Exception as ex: exceptions.append(ex) if archived == 0: break # FIXME(melwitt): OrphanedObjectError is raised because of the bug. self.assertTrue(exceptions) for ex in exceptions: self.assertEqual(500, ex.response.status_code) self.assertIn('OrphanedObjectError', str(ex)) # FIXME(melwitt): Uncomment when the bug is fixed. # self.assertFalse(exceptions) ",,47,0
openstack%2Fnova~785073,openstack/nova,stable/train,Idcf026d020e63e4e6ece1db46e4cdc7b7742b76f,Centralize sqlite FK constraint enforcement,ABANDONED,2021-04-06 23:10:05.000000000,2023-09-01 17:02:42.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-04-06 23:10:05.000000000', 'files': ['nova/tests/functional/test_nova_manage.py', 'nova/tests/functional/db/test_archive.py', 'nova/test.py', 'nova/tests/unit/db/test_db_api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/261f4f614e4b0e7ea7dcb3dddbe2a34bd0deea4b', 'message': ""Centralize sqlite FK constraint enforcement\n\nThere's a TODO in the code to centralize foreign key constraint\nenforcement for sqlite for unit and functional tests and we're missing\nenforcement of FK constraints in a couple of test classes that should\nhave it.\n\nThis resolves the TODO and turns on FK constraint enforcement where it\nis missing. Do this to enhance testing in preparation for a proposed\nchange to the database archiving logic later in this patch series.\n\nConflicts:\n    nova/test.py\n\nNOTE(melwitt): The conflicts are because the following changes are\nnot in Train:\n\n  * Ia33ec2604b2fc2d3b6830b596cac669cc3ad6c96 (nova-net: Kill it)\n  * I33d8ac0a1cae0b2d275a21287d5e44c008a68122 (func tests: move\n    _run_periodics() into base class)\n\nChange-Id: Idcf026d020e63e4e6ece1db46e4cdc7b7742b76f\n(cherry picked from commit 172024db7174bdac05a3d3172c645b0db83ae41e)\n(cherry picked from commit 382d64ea36e5cf3b47929fee0b93539d2f126975)\n(cherry picked from commit a8624cdaa292591db616b9ab17d27f2cd0bb00a7)\n""}]",0,785073,261f4f614e4b0e7ea7dcb3dddbe2a34bd0deea4b,5,1,1,4690,,,0,"Centralize sqlite FK constraint enforcement

There's a TODO in the code to centralize foreign key constraint
enforcement for sqlite for unit and functional tests and we're missing
enforcement of FK constraints in a couple of test classes that should
have it.

This resolves the TODO and turns on FK constraint enforcement where it
is missing. Do this to enhance testing in preparation for a proposed
change to the database archiving logic later in this patch series.

Conflicts:
    nova/test.py

NOTE(melwitt): The conflicts are because the following changes are
not in Train:

  * Ia33ec2604b2fc2d3b6830b596cac669cc3ad6c96 (nova-net: Kill it)
  * I33d8ac0a1cae0b2d275a21287d5e44c008a68122 (func tests: move
    _run_periodics() into base class)

Change-Id: Idcf026d020e63e4e6ece1db46e4cdc7b7742b76f
(cherry picked from commit 172024db7174bdac05a3d3172c645b0db83ae41e)
(cherry picked from commit 382d64ea36e5cf3b47929fee0b93539d2f126975)
(cherry picked from commit a8624cdaa292591db616b9ab17d27f2cd0bb00a7)
",git fetch https://review.opendev.org/openstack/nova refs/changes/73/785073/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_nova_manage.py', 'nova/tests/functional/db/test_archive.py', 'nova/test.py', 'nova/tests/unit/db/test_db_api.py']",4,261f4f614e4b0e7ea7dcb3dddbe2a34bd0deea4b,bug/1837995, self.enforce_fk_constraints(engine=self.engine),"from sqlalchemy.dialects import sqlite dialect = self.engine.url.get_dialect() if dialect == sqlite.dialect: # We're seeing issues with foreign key support in SQLite 3.6.20 # SQLAlchemy doesn't support it at all with < SQLite 3.6.19 # It works fine in SQLite 3.7. # So return early to skip this test if running SQLite < 3.7 import sqlite3 tup = sqlite3.sqlite_version_info if tup[0] < 3 or (tup[0] == 3 and tup[1] < 7): self.skipTest( 'sqlite version too old for reliable SQLA foreign_keys') self.conn.execute(""PRAGMA foreign_keys = ON"")",26,30
openstack%2Fnova~784071,openstack/nova,stable/train,I6c585a34d6e774f890f992be647214e7e1073edb,WIP: live migration: Pass limits onto scheduler-chosen destination,ABANDONED,2021-03-31 10:55:31.000000000,2023-09-01 17:02:35.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-03-31 10:55:31.000000000', 'files': ['nova/conductor/tasks/live_migrate.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ac00833545669b2efb80f6b18fb1e751e845375b', 'message': ""WIP: live migration: Pass limits onto scheduler-chosen destination\n\nIf a live migration without a specific destination has been requested,\nthe conductor will get a list of potential destinations from the\nscheduler. The conductor will then proceed to check if the destination\ncan accommodate the instance by calling check_can_live_migrate_destination.\n\nHowever, this call is made in _find_destination by calling\n_call_livem_checks_on_host, which will then remotely call the method\nmentioned above, and passing it self.limits, which at that point is still None.\n\nOn the nova-compute side, check_can_live_migrate_destination will also create\nthe resource claim, which also includes the soon-to-used NUMA topology that\nwill be used by the live-migrated instance. For this, the function\nnuma_fit_instance_to_host is called, which will return the first match that\nwill fit the instance NUMA topology. This function will also receive those\nlimits from the conductor, and because it's always None, CPU and memory\nallocation ratios are never respected for the NUMA node 0, so NUMA node 0\nis always a valid candidate for Live Migrations, which means that with\nevery Live Migration the NUMA node 0 will get more and more overcommited,\neventually causing VMs to get into OOM as well.\n\nThis commit simply passes those limits received from the scheduler onto\nnova-compute, so they can be used to make sure we don't overcommit NUMA nodes.\nThose limits are created by the NUMATopologyFilter.\n\nChange-Id: I6c585a34d6e774f890f992be647214e7e1073edb\n""}]",0,784071,ac00833545669b2efb80f6b18fb1e751e845375b,6,1,1,8213,,,0,"WIP: live migration: Pass limits onto scheduler-chosen destination

If a live migration without a specific destination has been requested,
the conductor will get a list of potential destinations from the
scheduler. The conductor will then proceed to check if the destination
can accommodate the instance by calling check_can_live_migrate_destination.

However, this call is made in _find_destination by calling
_call_livem_checks_on_host, which will then remotely call the method
mentioned above, and passing it self.limits, which at that point is still None.

On the nova-compute side, check_can_live_migrate_destination will also create
the resource claim, which also includes the soon-to-used NUMA topology that
will be used by the live-migrated instance. For this, the function
numa_fit_instance_to_host is called, which will return the first match that
will fit the instance NUMA topology. This function will also receive those
limits from the conductor, and because it's always None, CPU and memory
allocation ratios are never respected for the NUMA node 0, so NUMA node 0
is always a valid candidate for Live Migrations, which means that with
every Live Migration the NUMA node 0 will get more and more overcommited,
eventually causing VMs to get into OOM as well.

This commit simply passes those limits received from the scheduler onto
nova-compute, so they can be used to make sure we don't overcommit NUMA nodes.
Those limits are created by the NUMATopologyFilter.

Change-Id: I6c585a34d6e774f890f992be647214e7e1073edb
",git fetch https://review.opendev.org/openstack/nova refs/changes/71/784071/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/conductor/tasks/live_migrate.py'],1,ac00833545669b2efb80f6b18fb1e751e845375b,," self._call_livem_checks_on_host(self.destination, self.limits) def _call_livem_checks_on_host(self, destination, limits): self.migration, limits) self._call_livem_checks_on_host(host, selection.limits)"," self._call_livem_checks_on_host(self.destination) def _call_livem_checks_on_host(self, destination): self.migration, self.limits) self._call_livem_checks_on_host(host)",4,4
openstack%2Fnova~752489,openstack/nova,stable/train,Ic92cab7362fa25050e5bbef5c3e360108365b5c7,compute: Skip cinder_encryption_key_id check when booting from volume,ABANDONED,2020-09-17 15:01:00.000000000,2023-09-01 17:02:29.000000000,,"[{'_account_id': 7634}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-09-17 15:01:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9ee54a580c62249e1682595b84479e7747ee8737', 'message': ""compute: Skip cinder_encryption_key_id check when booting from volume\n\nIdf84ccff254d26fa13473fe9741ddac21cbcf321 added this check in order for\nNova to avoid booting encrypted images created by Cinder as there is\ncurrently no support for using such images (rotating keys etc).\n\nThe check however missed the slightly convoluted use case where this\nimage property is found against a volume after the volume in question is\ncreated using an encrypted image created by cinder from an encrypted\nvolume. In other words:\n\n- Cinder creates an encrypted volume A\n- Glance creates an encrypted image A from volume A\n- Cinder creates an encrypted volume B from image A\n- Nova attempts to boot an instance using volume B\n\nNote that Nova may request the creation of volume B or a user could also\ndo this directly through Cinder.\n\nAs such this change simply ensures that the instance isn't booting from\na volume when preforming the check as it is only valid when booting from\nan image.\n\nNOTE(lyarwood): Changes required for stable/train include the use of\nInstanceHelperMixin to provide _wait_for_state_change and the passing of\nself.api to these methods.\n\nCloses-Bug: #1895696\nChange-Id: Ic92cab7362fa25050e5bbef5c3e360108365b5c7\n(cherry picked from commit f9b67893acf94c06fd41be36b80b99788dc77e48)\n(cherry picked from commit 297435ad9ed8b8cfed98617f5ec6774a17cb28ef)\n""}, {'number': 2, 'created': '2020-09-17 15:28:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/654069877249e4c9c7445774f53d932ae597ace2', 'message': ""compute: Skip cinder_encryption_key_id check when booting from volume\n\nIdf84ccff254d26fa13473fe9741ddac21cbcf321 added this check in order for\nNova to avoid booting encrypted images created by Cinder as there is\ncurrently no support for using such images (rotating keys etc).\n\nThe check however missed the slightly convoluted use case where this\nimage property is found against a volume after the volume in question is\ncreated using an encrypted image created by cinder from an encrypted\nvolume. In other words:\n\n- Cinder creates an encrypted volume A\n- Glance creates an encrypted image A from volume A\n- Cinder creates an encrypted volume B from image A\n- Nova attempts to boot an instance using volume B\n\nNote that Nova may request the creation of volume B or a user could also\ndo this directly through Cinder.\n\nAs such this change simply ensures that the instance isn't booting from\na volume when preforming the check as it is only valid when booting from\nan image.\n\nNOTE(lyarwood): Changes required for stable/train include the use of\nInstanceHelperMixin to provide _wait_for_state_change and the passing of\nself.api to these methods.\n\nCloses-Bug: #1895696\nChange-Id: Ic92cab7362fa25050e5bbef5c3e360108365b5c7\n(cherry picked from commit f9b67893acf94c06fd41be36b80b99788dc77e48)\n(cherry picked from commit 297435ad9ed8b8cfed98617f5ec6774a17cb28ef)\n""}, {'number': 3, 'created': '2021-03-23 08:45:23.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1895696.py', 'nova/compute/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/2424397e9b68c7137337a94784f651e462810d3f', 'message': ""compute: Skip cinder_encryption_key_id check when booting from volume\n\nIdf84ccff254d26fa13473fe9741ddac21cbcf321 added this check in order for\nNova to avoid booting encrypted images created by Cinder as there is\ncurrently no support for using such images (rotating keys etc).\n\nThe check however missed the slightly convoluted use case where this\nimage property is found against a volume after the volume in question is\ncreated using an encrypted image created by cinder from an encrypted\nvolume. In other words:\n\n- Cinder creates an encrypted volume A\n- Glance creates an encrypted image A from volume A\n- Cinder creates an encrypted volume B from image A\n- Nova attempts to boot an instance using volume B\n\nNote that Nova may request the creation of volume B or a user could also\ndo this directly through Cinder.\n\nAs such this change simply ensures that the instance isn't booting from\na volume when preforming the check as it is only valid when booting from\nan image.\n\nNOTE(lyarwood): Changes required for stable/train include the use of\nInstanceHelperMixin to provide _wait_for_state_change and the passing of\nself.api to these methods.\n\nCloses-Bug: #1895696\nChange-Id: Ic92cab7362fa25050e5bbef5c3e360108365b5c7\n(cherry picked from commit f9b67893acf94c06fd41be36b80b99788dc77e48)\n(cherry picked from commit 297435ad9ed8b8cfed98617f5ec6774a17cb28ef)\n""}]",3,752489,2424397e9b68c7137337a94784f651e462810d3f,30,8,3,10135,,,0,"compute: Skip cinder_encryption_key_id check when booting from volume

Idf84ccff254d26fa13473fe9741ddac21cbcf321 added this check in order for
Nova to avoid booting encrypted images created by Cinder as there is
currently no support for using such images (rotating keys etc).

The check however missed the slightly convoluted use case where this
image property is found against a volume after the volume in question is
created using an encrypted image created by cinder from an encrypted
volume. In other words:

- Cinder creates an encrypted volume A
- Glance creates an encrypted image A from volume A
- Cinder creates an encrypted volume B from image A
- Nova attempts to boot an instance using volume B

Note that Nova may request the creation of volume B or a user could also
do this directly through Cinder.

As such this change simply ensures that the instance isn't booting from
a volume when preforming the check as it is only valid when booting from
an image.

NOTE(lyarwood): Changes required for stable/train include the use of
InstanceHelperMixin to provide _wait_for_state_change and the passing of
self.api to these methods.

Closes-Bug: #1895696
Change-Id: Ic92cab7362fa25050e5bbef5c3e360108365b5c7
(cherry picked from commit f9b67893acf94c06fd41be36b80b99788dc77e48)
(cherry picked from commit 297435ad9ed8b8cfed98617f5ec6774a17cb28ef)
",git fetch https://review.opendev.org/openstack/nova refs/changes/89/752489/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/regressions/test_bug_1895696.py', 'nova/compute/api.py']",2,9ee54a580c62249e1682595b84479e7747ee8737,bug/1895696, # NOTE(lyarwood) Skip this check when image_id is None indicating that # the instance is booting from a volume that was itself initially # created from an image. As such we don't care if # cinder_encryption_key_id was against the original image as we are now # booting from an encrypted volume. if image_properties.get('cinder_encryption_key_id') and image_id:, if image_properties.get('cinder_encryption_key_id'):,14,20
openstack%2Fnova~752488,openstack/nova,stable/train,I30a49c9e085cffc071d0ba332db67945e116bc80,Create volume attachment during boot from volume in compute,ABANDONED,2020-09-17 15:01:00.000000000,2023-09-01 17:02:21.000000000,,"[{'_account_id': 6873}, {'_account_id': 10118}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-09-17 15:01:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9fc52332809728182399f408929fc3b5e49cc2a7', 'message': 'Create volume attachment during boot from volume in compute\n\nWhen performing a boot from volume with an existing volume the compute\nAPI creates a volume attachment for the BDM so that we do a new-style\nattach flow in DriverVolumeBlockDevice.attach.\n\nHowever, when booting from source_type of blank, image or snapshot, where\nnova-compute creates the volume and then attaches it, we were still doing\nthe legacy attach flow because there was no attachment_id on the BDM.\n\nThis change fixes that so when nova creates the volume we also create the\nvolume attachment so we can go down the new style attach flow. Note that\nwe unconditionally create the volume attachment record since we require\nCinder Queens since Nova Train [1][2].\n\nThis is important for eventually migrating off the old attach flow so we\ncan drop that code. In other words, doing this means we eventually have\nfewer data records to migrate before we can drop the compat code.\n\n[1] I6a777b4b7a5729488f939df8c40e49bd40aec3dd\n[2] Ic9d1fb364e06e08250c7c5d7d4bdb956cb60e678\n\nNOTE(lyarwood): Conflict as Ic749c49e227e41732dbe04acea303b303acd264a\nwas backported to stable/train first.\n\nChange-Id: I30a49c9e085cffc071d0ba332db67945e116bc80\nCloses-Bug: #1747693\n(cherry picked from commit de5bce6ea23e16c976b64fdf5b0daf06c540eb8b)\n'}, {'number': 2, 'created': '2020-09-17 15:28:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/bd44c85ac59ab61465c577453cb54b0a5b80f4bf', 'message': 'Create volume attachment during boot from volume in compute\n\nWhen performing a boot from volume with an existing volume the compute\nAPI creates a volume attachment for the BDM so that we do a new-style\nattach flow in DriverVolumeBlockDevice.attach.\n\nHowever, when booting from source_type of blank, image or snapshot, where\nnova-compute creates the volume and then attaches it, we were still doing\nthe legacy attach flow because there was no attachment_id on the BDM.\n\nThis change fixes that so when nova creates the volume we also create the\nvolume attachment so we can go down the new style attach flow. Note that\nwe unconditionally create the volume attachment record since we require\nCinder Queens since Nova Train [1][2].\n\nThis is important for eventually migrating off the old attach flow so we\ncan drop that code. In other words, doing this means we eventually have\nfewer data records to migrate before we can drop the compat code.\n\n[1] I6a777b4b7a5729488f939df8c40e49bd40aec3dd\n[2] Ic9d1fb364e06e08250c7c5d7d4bdb956cb60e678\n\nConflicts:\n    nova/virt/block_device.py\n\nNOTE(lyarwood): Conflict as Ic749c49e227e41732dbe04acea303b303acd264a\nwas backported to stable/train first.\n\nChange-Id: I30a49c9e085cffc071d0ba332db67945e116bc80\nCloses-Bug: #1747693\n(cherry picked from commit de5bce6ea23e16c976b64fdf5b0daf06c540eb8b)\n'}, {'number': 3, 'created': '2021-03-23 08:45:23.000000000', 'files': ['nova/tests/unit/virt/test_block_device.py', 'nova/tests/unit/virt/libvirt/test_driver.py', 'nova/virt/block_device.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/0389235ef053be43a7cd4d1bf6671ee3c96dc5c5', 'message': 'Create volume attachment during boot from volume in compute\n\nWhen performing a boot from volume with an existing volume the compute\nAPI creates a volume attachment for the BDM so that we do a new-style\nattach flow in DriverVolumeBlockDevice.attach.\n\nHowever, when booting from source_type of blank, image or snapshot, where\nnova-compute creates the volume and then attaches it, we were still doing\nthe legacy attach flow because there was no attachment_id on the BDM.\n\nThis change fixes that so when nova creates the volume we also create the\nvolume attachment so we can go down the new style attach flow. Note that\nwe unconditionally create the volume attachment record since we require\nCinder Queens since Nova Train [1][2].\n\nThis is important for eventually migrating off the old attach flow so we\ncan drop that code. In other words, doing this means we eventually have\nfewer data records to migrate before we can drop the compat code.\n\n[1] I6a777b4b7a5729488f939df8c40e49bd40aec3dd\n[2] Ic9d1fb364e06e08250c7c5d7d4bdb956cb60e678\n\nConflicts:\n    nova/virt/block_device.py\n\nNOTE(lyarwood): Conflict as Ic749c49e227e41732dbe04acea303b303acd264a\nwas backported to stable/train first.\n\nChange-Id: I30a49c9e085cffc071d0ba332db67945e116bc80\nCloses-Bug: #1747693\n(cherry picked from commit de5bce6ea23e16c976b64fdf5b0daf06c540eb8b)\n'}]",2,752488,0389235ef053be43a7cd4d1bf6671ee3c96dc5c5,20,7,3,10135,,,0,"Create volume attachment during boot from volume in compute

When performing a boot from volume with an existing volume the compute
API creates a volume attachment for the BDM so that we do a new-style
attach flow in DriverVolumeBlockDevice.attach.

However, when booting from source_type of blank, image or snapshot, where
nova-compute creates the volume and then attaches it, we were still doing
the legacy attach flow because there was no attachment_id on the BDM.

This change fixes that so when nova creates the volume we also create the
volume attachment so we can go down the new style attach flow. Note that
we unconditionally create the volume attachment record since we require
Cinder Queens since Nova Train [1][2].

This is important for eventually migrating off the old attach flow so we
can drop that code. In other words, doing this means we eventually have
fewer data records to migrate before we can drop the compat code.

[1] I6a777b4b7a5729488f939df8c40e49bd40aec3dd
[2] Ic9d1fb364e06e08250c7c5d7d4bdb956cb60e678

Conflicts:
    nova/virt/block_device.py

NOTE(lyarwood): Conflict as Ic749c49e227e41732dbe04acea303b303acd264a
was backported to stable/train first.

Change-Id: I30a49c9e085cffc071d0ba332db67945e116bc80
Closes-Bug: #1747693
(cherry picked from commit de5bce6ea23e16c976b64fdf5b0daf06c540eb8b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/88/752488/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/test_block_device.py', 'nova/tests/unit/virt/libvirt/test_driver.py', 'nova/virt/block_device.py']",3,9fc52332809728182399f408929fc3b5e49cc2a7,bug/1895696," 'device_type': None, # needed for boot from volume for blank/image/snapshot 'attachment_id': None} """"""Create a volume and attachment record. :param context: nova auth RequestContext :param instance: Instance object to which the created volume will be attached. :param volume_api: nova.volume.cinder.API instance :param size: The size of the volume to create in GiB. :param wait_func: Optional callback function to wait for the volume to reach some status before continuing with a signature of:: wait_func(context, volume_id) :param create_kwargs: Additional optional parameters used to create the volume. See nova.volume.cinder.API.create for keys. :return: A two-item tuple of volume ID and attachment ID. """""" # Unconditionally create an attachment record for the volume so the # attach/detach flows use the ""new style"" introduced in Queens. Note # that nova required the Cinder Queens level APIs (3.44+) starting in # Train. attachment_id = ( volume_api.attachment_create( context, vol['id'], instance.uuid)['id']) return vol['id'], attachment_id self.volume_id, self.attachment_id = self._create_volume( self.volume_id, self.attachment_id = self._create_volume( self.volume_id, self.attachment_id = self._create_volume(", 'device_type': None} return vol vol = self._create_volume( self.volume_id = vol['id'] # TODO(mriedem): Create an attachment to reserve the volume and # make us go down the new-style attach flow. vol = self._create_volume( self.volume_id = vol['id'] # TODO(mriedem): Create an attachment to reserve the volume and # make us go down the new-style attach flow. vol = self._create_volume( self.volume_id = vol['id'] # TODO(mriedem): Create an attachment to reserve the volume and # make us go down the new-style attach flow. ,120,86
openstack%2Fnova~752487,openstack/nova,stable/train,I15271fb0b8de7f1184acddd607d605837e2eb7d4,Add regression test for bug #1895696,ABANDONED,2020-09-17 15:01:00.000000000,2023-09-01 17:02:15.000000000,,"[{'_account_id': 10135}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-09-17 15:01:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b84301d1b23d78904b32a3d6656f2b3749255ff0', 'message': ""Add regression test for bug #1895696\n\nNOTE(lyarwood): The following changes are required for this test to work\non stable/train.\n\n- Adding TestNonBootableImageMeta to super() as\n  functional tests run against py27\n- Adding api_major_version='v2.1'\n- Removing the use of _build_server and crafting the server creation\n  request by hand\n\nRelated-Bug: #1895696\nChange-Id: I15271fb0b8de7f1184acddd607d605837e2eb7d4\n(cherry picked from commit e76cccddd3ac64d8cc3e7e63e1772d5d23f20669)\n(cherry picked from commit f1bae873e39c39ab558914fef828a63bacde6180)\n""}, {'number': 2, 'created': '2021-03-23 08:45:23.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1895696.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a4b91e002b0f599133a7415c55a0f36c400cd437', 'message': ""Add regression test for bug #1895696\n\nNOTE(lyarwood): The following changes are required for this test to work\non stable/train.\n\n- Adding TestNonBootableImageMeta to super() as\n  functional tests run against py27\n- Adding api_major_version='v2.1'\n- Removing the use of _build_server and crafting the server creation\n  request by hand\n\nRelated-Bug: #1895696\nChange-Id: I15271fb0b8de7f1184acddd607d605837e2eb7d4\n(cherry picked from commit e76cccddd3ac64d8cc3e7e63e1772d5d23f20669)\n(cherry picked from commit f1bae873e39c39ab558914fef828a63bacde6180)\n""}]",2,752487,a4b91e002b0f599133a7415c55a0f36c400cd437,14,5,2,10135,,,0,"Add regression test for bug #1895696

NOTE(lyarwood): The following changes are required for this test to work
on stable/train.

- Adding TestNonBootableImageMeta to super() as
  functional tests run against py27
- Adding api_major_version='v2.1'
- Removing the use of _build_server and crafting the server creation
  request by hand

Related-Bug: #1895696
Change-Id: I15271fb0b8de7f1184acddd607d605837e2eb7d4
(cherry picked from commit e76cccddd3ac64d8cc3e7e63e1772d5d23f20669)
(cherry picked from commit f1bae873e39c39ab558914fef828a63bacde6180)
",git fetch https://review.opendev.org/openstack/nova refs/changes/87/752487/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1895696.py'],1,b84301d1b23d78904b32a3d6656f2b3749255ff0,bug/1895696,"# Copyright 2020, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import datetime from oslo_utils.fixture import uuidsentinel as uuids from nova.tests import fixtures as nova_fixtures from nova.tests.functional.api import client from nova.tests.functional import integrated_helpers class TestNonBootableImageMeta(integrated_helpers._IntegratedTestBase): """"""Regression test for bug 1895696 This regression test asserts the behaviour of server creation requests when using an image with nonbootable properties either directly in the request or to create a volume that is then booted from. """""" api_major_version = 'v2.1' microversion = 'latest' def setUp(self): super(TestNonBootableImageMeta, self).setUp() # Add an image to the Glance fixture with cinder_encryption_key set timestamp = datetime.datetime(2011, 1, 1, 1, 2, 3) cinder_encrypted_image = { 'id': uuids.cinder_encrypted_image_uuid, 'name': 'cinder_encryption_key_image', 'created_at': timestamp, 'updated_at': timestamp, 'deleted_at': None, 'deleted': False, 'status': 'active', 'is_public': False, 'container_format': 'ova', 'disk_format': 'vhd', 'size': '74185822', 'min_ram': 0, 'min_disk': 0, 'protected': False, 'visibility': 'public', 'tags': [], 'properties': { 'cinder_encryption_key_id': uuids.cinder_encryption_key_id, } } self.fake_image_service.create(None, cinder_encrypted_image) self.cinder = self.useFixture(nova_fixtures.CinderFixture(self)) # Mock out nova.volume.cinder.API.{create,get} so that when n-api # requests that c-api create a volume from the above image that the # response includes cinder_encryption_key_id in the # volume_image_metadata cinder_encrypted_volume = { 'status': 'available', 'display_name': 'cinder_encrypted_volume', 'attach_status': 'detached', 'id': uuids.cinder_encrypted_volume_uuid, 'multiattach': False, 'size': 1, 'encrypted': True, 'volume_image_metadata': { 'cinder_encryption_key_id': uuids.cinder_encryption_key_id } } def fake_cinder_create(self_api, context, size, name, description, snapshot=None, image_id=None, volume_type=None, metadata=None, availability_zone=None): if image_id == uuids.cinder_encrypted_image_uuid: return cinder_encrypted_volume self.stub_out( 'nova.volume.cinder.API.create', fake_cinder_create) def fake_cinder_get(self_api, context, volume_id, microversion=None): return cinder_encrypted_volume self.stub_out( 'nova.volume.cinder.API.get', fake_cinder_get) def test_nonbootable_metadata_image_metadata(self): """"""Assert behaviour when booting from an encrypted image """""" server = { 'name': 'test_nonbootable_metadata_image_metadata', 'flavorRef': 1, 'imageRef': uuids.cinder_encrypted_image_uuid, 'networks': 'none', } # NOTE(lyarwood): This should always fail as Nova will attempt to boot # directly from this encrypted image. ex = self.assertRaises( client.OpenStackApiException, self.api.post_server, {'server': server}) self.assertEqual(400, ex.response.status_code) self.assertIn( ""Direct booting of an image uploaded from an encrypted volume is "" ""unsupported"", str(ex)) def test_nonbootable_metadata_bfv_image_metadata(self): """"""Assert behaviour when n-api creates volume using an encrypted image """""" server = { 'name': 'test_nonbootable_metadata_bfv_image_metadata', 'flavorRef': 1, 'networks': 'none', 'block_device_mapping_v2': [{ 'source_type': 'image', 'destination_type': 'volume', 'boot_index': 0, 'uuid': uuids.cinder_encrypted_image_uuid, 'volume_size': 1, }] } # FIXME(lyarwood) n-api should ignore cinder_encryption_key_id in the # original image in this case and accept the request. ex = self.assertRaises( client.OpenStackApiException, self.api.post_server, {'server': server}) self.assertEqual(400, ex.response.status_code) self.assertIn( ""Direct booting of an image uploaded from an encrypted volume is "" ""unsupported"", str(ex)) def test_nonbootable_metadata_bfv_volume_image_metadata(self): """"""Assert behaviour when c-api has created volume using encrypted image """""" server = { 'name': 'test_nonbootable_metadata_bfv_volume_image_metadata', 'flavorRef': 1, 'networks': 'none', 'block_device_mapping_v2': [{ 'source_type': 'volume', 'destination_type': 'volume', 'boot_index': 0, 'uuid': uuids.cinder_encrypted_volume_uuid, }] } # FIXME(lyarwood) n-api should ignore cinder_encryption_key_id in the # volume volume_image_metadata in this case and accept the request. ex = self.assertRaises( client.OpenStackApiException, self.api.post_server, {'server': server}) self.assertEqual(400, ex.response.status_code) self.assertIn( ""Direct booting of an image uploaded from an encrypted volume is "" ""unsupported"", str(ex)) ",,163,0
openstack%2Fnova~751369,openstack/nova,stable/train,I29d6f4a78c0206385a550967ce244794e71cef6d,Move revert resize under semaphore,ABANDONED,2020-09-11 17:20:55.000000000,2023-09-01 17:02:08.000000000,,"[{'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-09-11 17:20:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/13787c36d5d93b38b6a8835de46057078fec2eea', 'message': 'Move revert resize under semaphore\n\nAs discussed in change I26b050c402f5721fc490126e9becb643af9279b4, the\nresource tracker\'s periodic task is reliant on the status of migrations\nto determine whether to include usage from these migrations in the\ntotal, and races between setting the migration status and decrementing\nresource usage via \'drop_move_claim\' can result in incorrect usage.\nThat change tackled the confirm resize operation. This one changes the\nrevert resize operation, and is a little trickier due to kinks in how\nboth the same-cell and cross-cell resize revert operations work.\n\nFor same-cell resize revert, the \'ComputeManager.revert_resize\'\nfunction, running on the destination host, sets the migration status to\n\'reverted\' before dropping the move claim. This exposes the same race\nthat we previously saw with the confirm resize operation. It then calls\nback to \'ComputeManager.finish_revert_resize\' on the source host to boot\nup the instance itself. This is kind of weird, because, even ignoring\nthe race, we\'re marking the migration as \'reverted\' before we\'ve done\nany of the necessary work on the source host.\n\nThe cross-cell resize revert splits dropping of the move claim and\nsetting of the migration status between the source and destination host\ntasks. Specifically, we do cleanup on the destination and drop the move\nclaim first, via \'ComputeManager.revert_snapshot_based_resize_at_dest\'\nbefore resuming the instance and setting the migration status on the\nsource via\n\'ComputeManager.finish_revert_snapshot_based_resize_at_source\'. This\nwould appear to avoid the weird quirk of same-cell migration, however,\nin typical weird cross-cell fashion, these are actually different\ninstances and different migration records.\n\nThe solution is once again to move the setting of the migration status\nand the dropping of the claim under \'COMPUTE_RESOURCE_SEMAPHORE\'. This\nintroduces the weird setting of migration status before completion to\nthe cross-cell resize case and perpetuates it in the same-cell case, but\nthis seems like a suitable compromise to avoid attempts to do things\nlike unplugging already unplugged PCI devices or unpinning already\nunpinned CPUs. From an end-user perspective, instance state changes are\nwhat really matter and once a revert is completed on the destination\nhost and the instance has been marked as having returned to the source\nhost, hard reboots can help us resolve any remaining issues.\n\nConflicts:\n  nova/compute/manager.py\n  nova/compute/resource_tracker.py\n  nova/tests/unit/compute/test_compute_mgr.py\n\nNOTE(stephenfin): The bulk of the conflicts are due to the absence of\nvarious cross-cell resize related patches. The only exception is the\nconflict in \'nova/compute/resource_tracker.py\', which is due to the\nabsence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair\nlocks in resource tracker"") which we can\'t backport since it requires a\nfeature only found in newer versions of \'oslo.concurrency\' and mandates\na lower constraint bump.\n\nChange-Id: I29d6f4a78c0206385a550967ce244794e71cef6d\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1879878\n(cherry picked from commit dc9c7a5ebf11253f86127238d33dff7401465155)\n(cherry picked from commit 79a467e1cfa05b1c281e592e69549716c11892e5)\n'}, {'number': 2, 'created': '2020-09-14 10:40:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0c394d79b3ead53e7c7fae0665c579ab5b06b11e', 'message': 'Move revert resize under semaphore\n\nAs discussed in change I26b050c402f5721fc490126e9becb643af9279b4, the\nresource tracker\'s periodic task is reliant on the status of migrations\nto determine whether to include usage from these migrations in the\ntotal, and races between setting the migration status and decrementing\nresource usage via \'drop_move_claim\' can result in incorrect usage.\nThat change tackled the confirm resize operation. This one changes the\nrevert resize operation, and is a little trickier due to kinks in how\nboth the same-cell and cross-cell resize revert operations work.\n\nFor same-cell resize revert, the \'ComputeManager.revert_resize\'\nfunction, running on the destination host, sets the migration status to\n\'reverted\' before dropping the move claim. This exposes the same race\nthat we previously saw with the confirm resize operation. It then calls\nback to \'ComputeManager.finish_revert_resize\' on the source host to boot\nup the instance itself. This is kind of weird, because, even ignoring\nthe race, we\'re marking the migration as \'reverted\' before we\'ve done\nany of the necessary work on the source host.\n\nThe cross-cell resize revert splits dropping of the move claim and\nsetting of the migration status between the source and destination host\ntasks. Specifically, we do cleanup on the destination and drop the move\nclaim first, via \'ComputeManager.revert_snapshot_based_resize_at_dest\'\nbefore resuming the instance and setting the migration status on the\nsource via\n\'ComputeManager.finish_revert_snapshot_based_resize_at_source\'. This\nwould appear to avoid the weird quirk of same-cell migration, however,\nin typical weird cross-cell fashion, these are actually different\ninstances and different migration records.\n\nThe solution is once again to move the setting of the migration status\nand the dropping of the claim under \'COMPUTE_RESOURCE_SEMAPHORE\'. This\nintroduces the weird setting of migration status before completion to\nthe cross-cell resize case and perpetuates it in the same-cell case, but\nthis seems like a suitable compromise to avoid attempts to do things\nlike unplugging already unplugged PCI devices or unpinning already\nunpinned CPUs. From an end-user perspective, instance state changes are\nwhat really matter and once a revert is completed on the destination\nhost and the instance has been marked as having returned to the source\nhost, hard reboots can help us resolve any remaining issues.\n\nConflicts:\n  nova/compute/manager.py\n  nova/compute/resource_tracker.py\n  nova/tests/unit/compute/test_compute_mgr.py\n\nNOTE(stephenfin): The bulk of the conflicts are due to the absence of\nvarious cross-cell resize related patches. The only exception is the\nconflict in \'nova/compute/resource_tracker.py\', which is due to the\nabsence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair\nlocks in resource tracker"") which we can\'t backport since it requires a\nfeature only found in newer versions of \'oslo.concurrency\' and mandates\na lower constraint bump.\n\nChange-Id: I29d6f4a78c0206385a550967ce244794e71cef6d\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1879878\n(cherry picked from commit dc9c7a5ebf11253f86127238d33dff7401465155)\n(cherry picked from commit 79a467e1cfa05b1c281e592e69549716c11892e5)\n'}, {'number': 3, 'created': '2021-02-04 17:13:23.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/functional/regressions/test_bug_1879878.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/66184692cca3239ea750d258e5659e149d56526d', 'message': 'Move revert resize under semaphore\n\nAs discussed in change I26b050c402f5721fc490126e9becb643af9279b4, the\nresource tracker\'s periodic task is reliant on the status of migrations\nto determine whether to include usage from these migrations in the\ntotal, and races between setting the migration status and decrementing\nresource usage via \'drop_move_claim\' can result in incorrect usage.\nThat change tackled the confirm resize operation. This one changes the\nrevert resize operation, and is a little trickier due to kinks in how\nboth the same-cell and cross-cell resize revert operations work.\n\nFor same-cell resize revert, the \'ComputeManager.revert_resize\'\nfunction, running on the destination host, sets the migration status to\n\'reverted\' before dropping the move claim. This exposes the same race\nthat we previously saw with the confirm resize operation. It then calls\nback to \'ComputeManager.finish_revert_resize\' on the source host to boot\nup the instance itself. This is kind of weird, because, even ignoring\nthe race, we\'re marking the migration as \'reverted\' before we\'ve done\nany of the necessary work on the source host.\n\nThe cross-cell resize revert splits dropping of the move claim and\nsetting of the migration status between the source and destination host\ntasks. Specifically, we do cleanup on the destination and drop the move\nclaim first, via \'ComputeManager.revert_snapshot_based_resize_at_dest\'\nbefore resuming the instance and setting the migration status on the\nsource via\n\'ComputeManager.finish_revert_snapshot_based_resize_at_source\'. This\nwould appear to avoid the weird quirk of same-cell migration, however,\nin typical weird cross-cell fashion, these are actually different\ninstances and different migration records.\n\nThe solution is once again to move the setting of the migration status\nand the dropping of the claim under \'COMPUTE_RESOURCE_SEMAPHORE\'. This\nintroduces the weird setting of migration status before completion to\nthe cross-cell resize case and perpetuates it in the same-cell case, but\nthis seems like a suitable compromise to avoid attempts to do things\nlike unplugging already unplugged PCI devices or unpinning already\nunpinned CPUs. From an end-user perspective, instance state changes are\nwhat really matter and once a revert is completed on the destination\nhost and the instance has been marked as having returned to the source\nhost, hard reboots can help us resolve any remaining issues.\n\nConflicts:\n  nova/compute/manager.py\n  nova/compute/resource_tracker.py\n  nova/tests/unit/compute/test_compute_mgr.py\n\nNOTE(stephenfin): The bulk of the conflicts are due to the absence of\nvarious cross-cell resize related patches. The only exception is the\nconflict in \'nova/compute/resource_tracker.py\', which is due to the\nabsence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair\nlocks in resource tracker"") which we can\'t backport since it requires a\nfeature only found in newer versions of \'oslo.concurrency\' and mandates\na lower constraint bump.\n\nChange-Id: I29d6f4a78c0206385a550967ce244794e71cef6d\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1879878\n(cherry picked from commit dc9c7a5ebf11253f86127238d33dff7401465155)\n(cherry picked from commit 79a467e1cfa05b1c281e592e69549716c11892e5)\n'}]",0,751369,66184692cca3239ea750d258e5659e149d56526d,25,7,3,15334,,,0,"Move revert resize under semaphore

As discussed in change I26b050c402f5721fc490126e9becb643af9279b4, the
resource tracker's periodic task is reliant on the status of migrations
to determine whether to include usage from these migrations in the
total, and races between setting the migration status and decrementing
resource usage via 'drop_move_claim' can result in incorrect usage.
That change tackled the confirm resize operation. This one changes the
revert resize operation, and is a little trickier due to kinks in how
both the same-cell and cross-cell resize revert operations work.

For same-cell resize revert, the 'ComputeManager.revert_resize'
function, running on the destination host, sets the migration status to
'reverted' before dropping the move claim. This exposes the same race
that we previously saw with the confirm resize operation. It then calls
back to 'ComputeManager.finish_revert_resize' on the source host to boot
up the instance itself. This is kind of weird, because, even ignoring
the race, we're marking the migration as 'reverted' before we've done
any of the necessary work on the source host.

The cross-cell resize revert splits dropping of the move claim and
setting of the migration status between the source and destination host
tasks. Specifically, we do cleanup on the destination and drop the move
claim first, via 'ComputeManager.revert_snapshot_based_resize_at_dest'
before resuming the instance and setting the migration status on the
source via
'ComputeManager.finish_revert_snapshot_based_resize_at_source'. This
would appear to avoid the weird quirk of same-cell migration, however,
in typical weird cross-cell fashion, these are actually different
instances and different migration records.

The solution is once again to move the setting of the migration status
and the dropping of the claim under 'COMPUTE_RESOURCE_SEMAPHORE'. This
introduces the weird setting of migration status before completion to
the cross-cell resize case and perpetuates it in the same-cell case, but
this seems like a suitable compromise to avoid attempts to do things
like unplugging already unplugged PCI devices or unpinning already
unpinned CPUs. From an end-user perspective, instance state changes are
what really matter and once a revert is completed on the destination
host and the instance has been marked as having returned to the source
host, hard reboots can help us resolve any remaining issues.

Conflicts:
  nova/compute/manager.py
  nova/compute/resource_tracker.py
  nova/tests/unit/compute/test_compute_mgr.py

NOTE(stephenfin): The bulk of the conflicts are due to the absence of
various cross-cell resize related patches. The only exception is the
conflict in 'nova/compute/resource_tracker.py', which is due to the
absence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair
locks in resource tracker"") which we can't backport since it requires a
feature only found in newer versions of 'oslo.concurrency' and mandates
a lower constraint bump.

Change-Id: I29d6f4a78c0206385a550967ce244794e71cef6d
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Closes-Bug: #1879878
(cherry picked from commit dc9c7a5ebf11253f86127238d33dff7401465155)
(cherry picked from commit 79a467e1cfa05b1c281e592e69549716c11892e5)
",git fetch https://review.opendev.org/openstack/nova refs/changes/69/751369/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/functional/regressions/test_bug_1879878.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py']",7,13787c36d5d93b38b6a8835de46057078fec2eea,bug/1879878," def drop_move_claim_at_dest(self, context, instance, migration): """"""Drop a move claim after reverting a resize or cold migration."""""" # NOTE(stephenfin): This runs on the destination, before we return to # the source and resume the instance there. As such, the migration # isn't really really reverted yet, but this status is what we use to # indicate that we no longer needs to account for usage on this host migration.status = 'reverted' migration.save() self._drop_move_claim( context, instance, migration.dest_node, instance.new_flavor, prefix='new_') instance.revert_migration_context() instance.save(expected_task_state=[task_states.RESIZE_REVERTING]) @utils.synchronized(COMPUTE_RESOURCE_SEMAPHORE)",,63,45
openstack%2Fnova~768194,openstack/nova,stable/train,I5dda9e8bca5fbaae77ece12b67176945ca4d9a4c,compute: Don't detach volumes when RescheduledException raised without retry,ABANDONED,2020-12-22 11:43:06.000000000,2023-09-01 17:02:02.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-12-22 11:43:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/528807e7ffcc0468c4117c0c0e408d8798dc2ea9', 'message': ""compute: Don't detach volumes when RescheduledException raised without retry\n\nI8b1c05317734e14ea73dc868941351bb31210bf0 introduced a crude call to\n_cleanup_volumes within _do_build_and_run_instance when handling a\nRescheduledException exception raised from _build_and_run_instance\nwithout any retry information provided from the scheduler.\n\nThis situation can arise when using the 'availability_zone' parameter to\nskip the scheduler by providing both a target availability_zone and host\nin the format of `$availability_zone:$host`. If the instance is unable\nto build on the compute the failure will eventually lead to\n_cleanup_volumes calling DriverVolumeBlockDevice.detach that will either\ndetach (cinderv2) or delete the associated volume attachments (cinderv3)\nmoving the volume to an `available` state, assuming it isn't\nmulti-attached etc.\n\nThe issue with this is that this behaviour is in stark contrast to that\nof volumes associated with instances that have failed to schedule. In\nthat case the volumes remain marked as reserved and associated with the\nERROR'd out instance until the instance itself is deleted.\n\nThis change aims to align both cases by removing the call to\n_cleanup_volumes and in doing so keeping any volumes in a `reserved`\nstate until the underlying instance is deleted.\n\nNote that leaving these volumes associated with ERROR'd out instances is\nnow safe after I4dc6c8bd3bb6c135f8a698af41f5d0e026c39117 landed and now\nensures that ports and volumes associated with such an instance are\ncorrectly cleaned up.\n\nNOTE(lyarwood): Conflict as I26395d57bd4ba55276b7514baa808f9888639e11\nisn't present on stable/train.\n\nConflicts:\n  nova/tests/unit/compute/test_compute_mgr.py\n\nCloses-Bug: #1899649\nChange-Id: I5dda9e8bca5fbaae77ece12b67176945ca4d9a4c\n(cherry picked from commit 26c46a409fa3a75f11fe0ecfc3cf1a8e77da8f51)\n(cherry picked from commit d0daac2c089b015c28e02e7965afdb22f08e42a1)\n(cherry picked from commit 643d01970ec2dc8e9c15612af7279f9a5df57745)\n""}, {'number': 2, 'created': '2020-12-22 11:59:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b6a5fa288eb32db6f4e236b77fb0bed98bcbb9b0', 'message': ""compute: Don't detach volumes when RescheduledException raised without retry\n\nI8b1c05317734e14ea73dc868941351bb31210bf0 introduced a crude call to\n_cleanup_volumes within _do_build_and_run_instance when handling a\nRescheduledException exception raised from _build_and_run_instance\nwithout any retry information provided from the scheduler.\n\nThis situation can arise when using the 'availability_zone' parameter to\nskip the scheduler by providing both a target availability_zone and host\nin the format of `$availability_zone:$host`. If the instance is unable\nto build on the compute the failure will eventually lead to\n_cleanup_volumes calling DriverVolumeBlockDevice.detach that will either\ndetach (cinderv2) or delete the associated volume attachments (cinderv3)\nmoving the volume to an `available` state, assuming it isn't\nmulti-attached etc.\n\nThe issue with this is that this behaviour is in stark contrast to that\nof volumes associated with instances that have failed to schedule. In\nthat case the volumes remain marked as reserved and associated with the\nERROR'd out instance until the instance itself is deleted.\n\nThis change aims to align both cases by removing the call to\n_cleanup_volumes and in doing so keeping any volumes in a `reserved`\nstate until the underlying instance is deleted.\n\nNote that leaving these volumes associated with ERROR'd out instances is\nnow safe after I4dc6c8bd3bb6c135f8a698af41f5d0e026c39117 landed and now\nensures that ports and volumes associated with such an instance are\ncorrectly cleaned up.\n\nNOTE(lyarwood): Conflict as I26395d57bd4ba55276b7514baa808f9888639e11\nisn't present on stable/train.\n\nConflicts:\n  nova/tests/unit/compute/test_compute_mgr.py\n\nCloses-Bug: #1899649\nChange-Id: I5dda9e8bca5fbaae77ece12b67176945ca4d9a4c\n(cherry picked from commit 26c46a409fa3a75f11fe0ecfc3cf1a8e77da8f51)\n(cherry picked from commit d0daac2c089b015c28e02e7965afdb22f08e42a1)\n(cherry picked from commit 643d01970ec2dc8e9c15612af7279f9a5df57745)\n""}, {'number': 3, 'created': '2020-12-22 16:24:39.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/functional/regressions/test_bug_1899649.py', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/fd298bf8c7f28056390fc3004414049f53bb1d0d', 'message': ""compute: Don't detach volumes when RescheduledException raised without retry\n\nI8b1c05317734e14ea73dc868941351bb31210bf0 introduced a crude call to\n_cleanup_volumes within _do_build_and_run_instance when handling a\nRescheduledException exception raised from _build_and_run_instance\nwithout any retry information provided from the scheduler.\n\nThis situation can arise when using the 'availability_zone' parameter to\nskip the scheduler by providing both a target availability_zone and host\nin the format of `$availability_zone:$host`. If the instance is unable\nto build on the compute the failure will eventually lead to\n_cleanup_volumes calling DriverVolumeBlockDevice.detach that will either\ndetach (cinderv2) or delete the associated volume attachments (cinderv3)\nmoving the volume to an `available` state, assuming it isn't\nmulti-attached etc.\n\nThe issue with this is that this behaviour is in stark contrast to that\nof volumes associated with instances that have failed to schedule. In\nthat case the volumes remain marked as reserved and associated with the\nERROR'd out instance until the instance itself is deleted.\n\nThis change aims to align both cases by removing the call to\n_cleanup_volumes and in doing so keeping any volumes in a `reserved`\nstate until the underlying instance is deleted.\n\nNote that leaving these volumes associated with ERROR'd out instances is\nnow safe after I4dc6c8bd3bb6c135f8a698af41f5d0e026c39117 landed and now\nensures that ports and volumes associated with such an instance are\ncorrectly cleaned up.\n\nNOTE(lyarwood): Conflict as I26395d57bd4ba55276b7514baa808f9888639e11\nisn't present on stable/train.\n\nConflicts:\n  nova/tests/unit/compute/test_compute_mgr.py\n\nCloses-Bug: #1899649\nChange-Id: I5dda9e8bca5fbaae77ece12b67176945ca4d9a4c\n(cherry picked from commit 26c46a409fa3a75f11fe0ecfc3cf1a8e77da8f51)\n(cherry picked from commit d0daac2c089b015c28e02e7965afdb22f08e42a1)\n(cherry picked from commit 643d01970ec2dc8e9c15612af7279f9a5df57745)\n""}]",0,768194,fd298bf8c7f28056390fc3004414049f53bb1d0d,10,1,3,10135,,,0,"compute: Don't detach volumes when RescheduledException raised without retry

I8b1c05317734e14ea73dc868941351bb31210bf0 introduced a crude call to
_cleanup_volumes within _do_build_and_run_instance when handling a
RescheduledException exception raised from _build_and_run_instance
without any retry information provided from the scheduler.

This situation can arise when using the 'availability_zone' parameter to
skip the scheduler by providing both a target availability_zone and host
in the format of `$availability_zone:$host`. If the instance is unable
to build on the compute the failure will eventually lead to
_cleanup_volumes calling DriverVolumeBlockDevice.detach that will either
detach (cinderv2) or delete the associated volume attachments (cinderv3)
moving the volume to an `available` state, assuming it isn't
multi-attached etc.

The issue with this is that this behaviour is in stark contrast to that
of volumes associated with instances that have failed to schedule. In
that case the volumes remain marked as reserved and associated with the
ERROR'd out instance until the instance itself is deleted.

This change aims to align both cases by removing the call to
_cleanup_volumes and in doing so keeping any volumes in a `reserved`
state until the underlying instance is deleted.

Note that leaving these volumes associated with ERROR'd out instances is
now safe after I4dc6c8bd3bb6c135f8a698af41f5d0e026c39117 landed and now
ensures that ports and volumes associated with such an instance are
correctly cleaned up.

NOTE(lyarwood): Conflict as I26395d57bd4ba55276b7514baa808f9888639e11
isn't present on stable/train.

Conflicts:
  nova/tests/unit/compute/test_compute_mgr.py

Closes-Bug: #1899649
Change-Id: I5dda9e8bca5fbaae77ece12b67176945ca4d9a4c
(cherry picked from commit 26c46a409fa3a75f11fe0ecfc3cf1a8e77da8f51)
(cherry picked from commit d0daac2c089b015c28e02e7965afdb22f08e42a1)
(cherry picked from commit 643d01970ec2dc8e9c15612af7279f9a5df57745)
",git fetch https://review.opendev.org/openstack/nova refs/changes/94/768194/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/functional/regressions/test_bug_1899649.py', 'nova/compute/manager.py']",3,528807e7ffcc0468c4117c0c0e408d8798dc2ea9,bug/1899649,," self._cleanup_volumes(context, instance, block_device_mapping, raise_exc=False)",5,35
openstack%2Fnova~768180,openstack/nova,stable/train,If795b603d812917c9257ee5166a979c1fd6687f3,Add regression test for bug #1899649,ABANDONED,2020-12-22 09:23:10.000000000,2023-09-01 17:01:56.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-12-22 09:23:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a07b232ebea16cba7ccd8c52c55f717f15ac8e36', 'message': 'WIP Add regression test for bug #1899649\n\nNOTE(lyarwood): The following changes were required on stable/train:\n\n* Add class name back to super.\n\n* Add ADMIN_API = True\n\nRelated-Bug: #1899649\nChange-Id: If795b603d812917c9257ee5166a979c1fd6687f3\n(cherry picked from commit 770c139edbd2a2c90d6cb2915948e1718dd1deca)\n(cherry picked from commit c860b92cf7b2ae63138a83728b788ffdc64145f9)\n(cherry picked from commit b1812aa18db793b50a682b995e0ae24f6fe23cfa)\n'}, {'number': 2, 'created': '2020-12-22 11:43:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3da30ac94be64d8775b891f5edd0bab724e7535b', 'message': 'Add regression test for bug #1899649\n\nNOTE(lyarwood): The following changes were required on stable/train:\n\n* test_failure_to_build_with_az_and_host must now wait until the volume\n  attachments are removed from the fixture as prior to Ussuri instances\n  are placed into an ERROR state ahead of volume attachments being\n  removed.\n\n* Added TestVolAttachmentsAfterFailureToScheduleOrBuild to super()\n\n* Added ADMIN_API = True\n\nRelated-Bug: #1899649\nChange-Id: If795b603d812917c9257ee5166a979c1fd6687f3\n(cherry picked from commit 770c139edbd2a2c90d6cb2915948e1718dd1deca)\n(cherry picked from commit c860b92cf7b2ae63138a83728b788ffdc64145f9)\n(cherry picked from commit b1812aa18db793b50a682b995e0ae24f6fe23cfa)\n'}, {'number': 3, 'created': '2020-12-22 11:59:33.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1899649.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ae9c14bd64e9dd5a2a96ec3ede25730ee9e4b029', 'message': 'Add regression test for bug #1899649\n\nNOTE(lyarwood): The following changes were required on stable/train:\n\n* test_failure_to_build_with_az_and_host must now wait until the volume\n  attachments are removed from the fixture as prior to Ussuri instances\n  are placed into an ERROR state ahead of volume attachments being\n  removed.\n\n* Added TestVolAttachmentsAfterFailureToScheduleOrBuild to super()\n\n* Added ADMIN_API = True\n\nRelated-Bug: #1899649\nChange-Id: If795b603d812917c9257ee5166a979c1fd6687f3\n(cherry picked from commit 770c139edbd2a2c90d6cb2915948e1718dd1deca)\n(cherry picked from commit c860b92cf7b2ae63138a83728b788ffdc64145f9)\n(cherry picked from commit b1812aa18db793b50a682b995e0ae24f6fe23cfa)\n'}]",0,768180,ae9c14bd64e9dd5a2a96ec3ede25730ee9e4b029,8,1,3,10135,,,0,"Add regression test for bug #1899649

NOTE(lyarwood): The following changes were required on stable/train:

* test_failure_to_build_with_az_and_host must now wait until the volume
  attachments are removed from the fixture as prior to Ussuri instances
  are placed into an ERROR state ahead of volume attachments being
  removed.

* Added TestVolAttachmentsAfterFailureToScheduleOrBuild to super()

* Added ADMIN_API = True

Related-Bug: #1899649
Change-Id: If795b603d812917c9257ee5166a979c1fd6687f3
(cherry picked from commit 770c139edbd2a2c90d6cb2915948e1718dd1deca)
(cherry picked from commit c860b92cf7b2ae63138a83728b788ffdc64145f9)
(cherry picked from commit b1812aa18db793b50a682b995e0ae24f6fe23cfa)
",git fetch https://review.opendev.org/openstack/nova refs/changes/80/768180/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1899649.py'],1,a07b232ebea16cba7ccd8c52c55f717f15ac8e36,bug/1899649,"# Copyright 2020, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova.tests import fixtures as nova_fixtures from nova.tests.functional.libvirt import base from nova.tests.unit.virt.libvirt import fakelibvirt class TestVolAttachmentsAfterFailureToScheduleOrBuild(base.ServersTestBase): """"""Regression test for bug . This regression test aims to ensure a volume attachment remains in place after a failure to either schedule a server or when building a server directly on a compute after skipping the scheduler. A volume attachment is required to remain after such failures to ensure the volume itself remains marked as reserved. To ensure this is as accurate as possible the tests use the libvirt functional base class to mimic a real world example with NUMA nodes being requested via flavor extra specs. The underlying compute being unable to meet this request ensuring a failure. """""" # Required to schedule an instance to a specific host ADMIN_API = True def setUp(self): super(TestVolAttachmentsAfterFailureToScheduleOrBuild, self).setUp() # We use the cinderfixture to assert if volume attachments remain self.cinder = self.useFixture(nova_fixtures.CinderFixture(self)) # Launch a single libvirt based compute service with a single NUMA node host_info = fakelibvirt.HostInfo( cpu_nodes=1, cpu_sockets=1, cpu_cores=2, kB_mem=15740000) self.start_computes(host_info_dict={'compute1': host_info}) # Use a flavor requesting 2 NUMA nodes that we know will always fail self.flavor_id = self._create_flavor(extra_spec={'hw:numa_nodes': '2'}) # Craft a common bfv server request for use within each test self.volume_id = nova_fixtures.CinderFixture.IMAGE_BACKED_VOL self.server = { 'name': 'test', 'flavorRef': self.flavor_id, 'imageRef': '', 'networks': [], 'block_device_mapping_v2': [{ 'source_type': 'volume', 'destination_type': 'volume', 'boot_index': 0, 'uuid': self.volume_id}] } def _assert_failure_and_volume_attachments(self, server): # Assert that the server is in an ERROR state self._wait_for_state_change(server, 'ERROR') # Assert that the volume is in a reserved state. As this isn't modelled # by the CinderFixture we just assert that a single volume attachment # remains after the failure and that it is referenced by the server. attachments = self.cinder.volume_to_attachment.get(self.volume_id) self.assertEqual(1, len(attachments)) self.assertIn( self.volume_id, self.cinder.volume_ids_for_instance(server['id'])) def test_failure_to_schedule(self): # Assert that a volume attachment remains after a failure to schedule server = self.api.post_server({'server': self.server}) self._assert_failure_and_volume_attachments(server) def test_failure_to_schedule_with_az(self): # Assert that a volume attachment remains after a failure to schedule # with the addition of an availability_zone in the request self.server['availability_zone'] = 'nova' server = self.api.post_server({'server': self.server}) self._assert_failure_and_volume_attachments(server) def test_failure_to_schedule_with_host(self): # Assert that a volume attachment remains after a failure to schedule # using the optional host parameter introduced in microversion 2.74 self.server['host'] = 'compute1' server = self.api.post_server({'server': self.server}) self._assert_failure_and_volume_attachments(server) def test_failure_to_build_with_az_and_host(self): # Assert that a volume attachments does not remain after a failure to # build and reschedule by providing an availability_zone *and* host, # skipping the scheduler. This is bug #1899649. self.server['availability_zone'] = 'nova:compute1' server = self.api.post_server({'server': self.server}) # Assert the server ends up in an ERROR state self._wait_for_state_change(server, 'ERROR') # FIXME(lyarwood): A single volume attachment should be present for the # instance at this stage as the volume *can* otherwise be marked as # available within Cinder if it isn't multi-attached. attachments = self.cinder.volume_to_attachment.get(self.volume_id) self.assertEqual(0, len(attachments)) self.assertNotIn( self.volume_id, self.cinder.volume_ids_for_instance(server['id'])) ",,114,0
openstack%2Fnova~766463,openstack/nova,stable/train,Ie46470f10acaa705a0550b4a928c3fa17fc9633e,DNM: tox constraints test,ABANDONED,2020-12-10 13:07:24.000000000,2023-09-01 17:01:49.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2020-12-10 13:07:24.000000000', 'files': ['nova/wsgi.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c01d9f7dd47491a6c58135576f0daf3c57fe5e6c', 'message': 'DNM: tox constraints test\n\nDepends-On: https://review.opendev.org/766441\nDepends-On: https://review.opendev.org/766443\nChange-Id: Ie46470f10acaa705a0550b4a928c3fa17fc9633e\n'}]",0,766463,c01d9f7dd47491a6c58135576f0daf3c57fe5e6c,6,1,1,17685,,,0,"DNM: tox constraints test

Depends-On: https://review.opendev.org/766441
Depends-On: https://review.opendev.org/766443
Change-Id: Ie46470f10acaa705a0550b4a928c3fa17fc9633e
",git fetch https://review.opendev.org/openstack/nova refs/changes/63/766463/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/wsgi.py'],1,c01d9f7dd47491a6c58135576f0daf3c57fe5e6c,constrain-tox-install,# dummy change,,1,0
openstack%2Fnova~764515,openstack/nova,stable/train,Id6e2be2b407eb08e269c35e0f89d235c67a1ab99,Retry on vmware create_vm when it fails,ABANDONED,2020-11-30 10:28:41.000000000,2023-09-01 17:01:42.000000000,,"[{'_account_id': 17685}, {'_account_id': 20363}, {'_account_id': 22348}]","[{'number': 1, 'created': '2020-11-30 10:28:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/edf5028d5afb361847c43121313153334f52a37c', 'message': 'Retry on vmware create_vm when it fails\n\nIn some cases the logical switch is not ready when the VM is booted,\nso retry can help avoid the error.\n\nChange-Id: Id6e2be2b407eb08e269c35e0f89d235c67a1ab99\n'}, {'number': 2, 'created': '2020-12-01 06:25:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/263231205ed3104e1a9c55c3814582ad83238f06', 'message': 'Retry on vmware create_vm when it fails\n\nIn some cases the logical switch is not ready when the VM is booted,\nso retry can help avoid the error.\n\nChange-Id: Id6e2be2b407eb08e269c35e0f89d235c67a1ab99\n(Cherry picked from commit: Id6e2be2b407eb08e269c35e0f89d235c67a1ab99)\n'}, {'number': 3, 'created': '2020-12-02 08:45:33.000000000', 'files': ['nova/virt/vmwareapi/vm_util.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/b42bc2aa5e89e4cc62a9a7692a591af83a86e284', 'message': 'Retry on vmware create_vm when it fails\n\nIn some cases the logical switch is not ready when the VM is booted,\nso retry can help avoid the error.\n\nChange-Id: Id6e2be2b407eb08e269c35e0f89d235c67a1ab99\n(Cherry picked from commit: Id6e2be2b407eb08e269c35e0f89d235c67a1ab99)\n'}]",1,764515,b42bc2aa5e89e4cc62a9a7692a591af83a86e284,17,3,3,20363,,,0,"Retry on vmware create_vm when it fails

In some cases the logical switch is not ready when the VM is booted,
so retry can help avoid the error.

Change-Id: Id6e2be2b407eb08e269c35e0f89d235c67a1ab99
(Cherry picked from commit: Id6e2be2b407eb08e269c35e0f89d235c67a1ab99)
",git fetch https://review.opendev.org/openstack/nova refs/changes/15/764515/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/virt/vmwareapi/vm_util.py'],1,edf5028d5afb361847c43121313153334f52a37c,,"from oslo_service import loopingcall@loopingcall.RetryDecorator( max_retry_count=5, inc_sleep_time=2, max_sleep_time=10, exceptions=(vexc.VimFaultException,))",,4,0
openstack%2Fnova~751753,openstack/nova,stable/train,Id094dd90efde09b9a835d4492f4a92b8f8ad296e,Fix invalid assert_has_calls,ABANDONED,2020-09-14 10:31:34.000000000,2023-09-01 17:01:33.000000000,,"[{'_account_id': 7634}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 20190}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-09-14 10:31:34.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c02a60265319281c2bf385360102c69fdccf3676', 'message': 'Fix invalid assert_has_calls\n\nThis is to fix the invalid assert_has_calls usage,\n""assert_has_calls = "" should be ""assert_has_calls("".\n\nChange-Id: Id094dd90efde09b9a835d4492f4a92b8f8ad296e\n(cherry picked from commit 8cb9b84f283e58841a58d5d79b15268ca5da504d)\n(cherry picked from commit 674d1cbabcf5ab2a84718cd1fc7eccaabbb59839)\n'}]",0,751753,c02a60265319281c2bf385360102c69fdccf3676,13,7,1,10135,,,0,"Fix invalid assert_has_calls

This is to fix the invalid assert_has_calls usage,
""assert_has_calls = "" should be ""assert_has_calls("".

Change-Id: Id094dd90efde09b9a835d4492f4a92b8f8ad296e
(cherry picked from commit 8cb9b84f283e58841a58d5d79b15268ca5da504d)
(cherry picked from commit 674d1cbabcf5ab2a84718cd1fc7eccaabbb59839)
",git fetch https://review.opendev.org/openstack/nova refs/changes/53/751753/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/compute/test_compute_mgr.py'],1,c02a60265319281c2bf385360102c69fdccf3676,," mock_remove_vol_conn.assert_has_calls([ bdm in bdms]) mock_delete_attachment.assert_has_calls([ mock.call(self.context, uuids.vol2_attach)])"," mock_remove_vol_conn.assert_has_calls = [ bdm in bdms] mock_delete_attachment.assert_has_calls = [ mock.call(self.context, uuids.vol2_attach)]",4,4
openstack%2Fnova~758242,openstack/nova,stable/train,Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c,libvirt: Log exception when unable to import rbd or rados,ABANDONED,2020-10-14 20:25:05.000000000,2023-09-01 17:01:24.000000000,,"[{'_account_id': 9732}, {'_account_id': 10118}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-10-14 20:25:05.000000000', 'files': ['nova/virt/libvirt/storage/rbd_utils.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/9c58a663b7999260e1683bae6a828d118aa44fd5', 'message': ""libvirt: Log exception when unable to import rbd or rados\n\nThis should help provide some context when the RbdDriver later raises a\nRuntimeError if rbd or rados hasn't been imported correctly.\n\nChange-Id: Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c\n(cherry picked from commit aa16dd09ebeb21d0b81682b0b6026de0fe4f23b7)\n(cherry picked from commit 961a355fb314975ee169cbe9ef88eb8537294253)\n(cherry picked from commit 22c86f92ce7ef86675ee8265d43b21997e0df4bc)\n""}]",0,758242,9c58a663b7999260e1683bae6a828d118aa44fd5,7,5,1,10135,,,0,"libvirt: Log exception when unable to import rbd or rados

This should help provide some context when the RbdDriver later raises a
RuntimeError if rbd or rados hasn't been imported correctly.

Change-Id: Ie8bb5e5622bd37dfe8073cca12f77174e8e7d98c
(cherry picked from commit aa16dd09ebeb21d0b81682b0b6026de0fe4f23b7)
(cherry picked from commit 961a355fb314975ee169cbe9ef88eb8537294253)
(cherry picked from commit 22c86f92ce7ef86675ee8265d43b21997e0df4bc)
",git fetch https://review.opendev.org/openstack/nova refs/changes/42/758242/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/virt/libvirt/storage/rbd_utils.py'],1,9c58a663b7999260e1683bae6a828d118aa44fd5,,"# NOTE(lyarwood): Log exceptions if we fail to import rbd or rados in order to # provide context later if we end up attempting to use the RbdDriver and # raising RuntimeError try: import rados except ImportError: rados = None LOG.exception( ""Unable to import the rados module, this can be ignored if Ceph is "" ""not used within this environment"") try: import rbd except ImportError: rbd = None LOG.exception( ""Unable to import the rbd module, this can be ignored if Ceph is not "" ""used within this environment"") ",try: import rados import rbd except ImportError: rados = None rbd = None ,20,7
openstack%2Fnova~701756,openstack/nova,stable/train,I93e27d907a237ae16b6b4c7202ad157b067aa30e,Add recreate test for bug 1855927,ABANDONED,2020-01-09 15:53:57.000000000,2023-09-01 17:01:18.000000000,,"[{'_account_id': 6873}, {'_account_id': 7166}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-01-09 15:53:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4174ef20370c5f999a5d488286ebf7cfdda7929e', 'message': 'Add recreate test for bug 1855927\n\nWhen _poll_unconfirmed_resizes runs, if the actual resize\nconfirm fails on the source host the migration status may\nbe stuck in ""confirming"" status if it never reached the\nsource compute. Subsequent runs of _poll_unconfirmed_resizes\nwill not be able to auto-confirm the resize nor will the user\nbe able to manually confirm the resize. An admin could reset\nthe status on the server to ACTIVE or ERROR but that means\nthe source compute never gets cleaned up since you can only\nconfirm or revert a resize on a server with VERIFY_RESIZE status.\n\nThis adds a functional recreate test for the bug.\n\nNote that if the request does get to the source compute and fails,\nthe _error_out_instance_on_exception context manager should set\nthe instance to ERROR status and the errors_out_migration decorator\nshould set the migration status to ""error"". The problem is if we\nnever get that far we can\'t recover automatically or via the API\nwithout operator intervention.\n\nChange-Id: I93e27d907a237ae16b6b4c7202ad157b067aa30e\nRelated-Bug: #1855927\n(cherry picked from commit 95c9d710dd6a06b8d2fcd941343075872cdf95d5)\n'}, {'number': 2, 'created': '2020-01-09 20:14:33.000000000', 'files': ['nova/tests/functional/test_servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/d86ea479e81c98c98c0c405e0032243cbcd7a39f', 'message': 'Add recreate test for bug 1855927\n\nWhen _poll_unconfirmed_resizes runs, if the actual resize\nconfirm fails on the source host the migration status may\nbe stuck in ""confirming"" status if it never reached the\nsource compute. Subsequent runs of _poll_unconfirmed_resizes\nwill not be able to auto-confirm the resize nor will the user\nbe able to manually confirm the resize. An admin could reset\nthe status on the server to ACTIVE or ERROR but that means\nthe source compute never gets cleaned up since you can only\nconfirm or revert a resize on a server with VERIFY_RESIZE status.\n\nThis adds a functional recreate test for the bug.\n\nNote that if the request does get to the source compute and fails,\nthe _error_out_instance_on_exception context manager should set\nthe instance to ERROR status and the errors_out_migration decorator\nshould set the migration status to ""error"". The problem is if we\nnever get that far we can\'t recover automatically or via the API\nwithout operator intervention.\n\nConflicts:\n    nova/tests/functional/test_servers.py\n\nNOTE(lyarwood): Conflicts as I8c96b337f32148f8f5899c9b87af331b1fa41424\nis not present on stable/train.\n\nChange-Id: I93e27d907a237ae16b6b4c7202ad157b067aa30e\nRelated-Bug: #1855927\n(cherry picked from commit 95c9d710dd6a06b8d2fcd941343075872cdf95d5)\n'}]",0,701756,d86ea479e81c98c98c0c405e0032243cbcd7a39f,12,6,2,10135,,,0,"Add recreate test for bug 1855927

When _poll_unconfirmed_resizes runs, if the actual resize
confirm fails on the source host the migration status may
be stuck in ""confirming"" status if it never reached the
source compute. Subsequent runs of _poll_unconfirmed_resizes
will not be able to auto-confirm the resize nor will the user
be able to manually confirm the resize. An admin could reset
the status on the server to ACTIVE or ERROR but that means
the source compute never gets cleaned up since you can only
confirm or revert a resize on a server with VERIFY_RESIZE status.

This adds a functional recreate test for the bug.

Note that if the request does get to the source compute and fails,
the _error_out_instance_on_exception context manager should set
the instance to ERROR status and the errors_out_migration decorator
should set the migration status to ""error"". The problem is if we
never get that far we can't recover automatically or via the API
without operator intervention.

Conflicts:
    nova/tests/functional/test_servers.py

NOTE(lyarwood): Conflicts as I8c96b337f32148f8f5899c9b87af331b1fa41424
is not present on stable/train.

Change-Id: I93e27d907a237ae16b6b4c7202ad157b067aa30e
Related-Bug: #1855927
(cherry picked from commit 95c9d710dd6a06b8d2fcd941343075872cdf95d5)
",git fetch https://review.opendev.org/openstack/nova refs/changes/56/701756/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/test_servers.py'],1,4174ef20370c5f999a5d488286ebf7cfdda7929e,bug/1855927,"from oslo_utils import fixture as osloutils_fixturefrom nova.tests.unit import cast_as_callclass PollUnconfirmedResizesTest(integrated_helpers.ProviderUsageBaseTestCase): """"""Tests for the _poll_unconfirmed_resizes periodic task."""""" compute_driver = 'fake.MediumFakeDriver' def setUp(self): super(PollUnconfirmedResizesTest, self).setUp() # Start two computes for the resize. self._start_compute('host1') self._start_compute('host2') def test_source_host_down_during_confirm(self): """"""Tests the scenario that between the time that the server goes to VERIFY_RESIZE status and the _poll_unconfirmed_resizes periodic task runs the source compute service goes down so the confirm task fails. """""" server = self._build_minimal_create_server_request( name='test_source_host_down_during_confirm', image_uuid=nova.tests.unit.image.fake.get_valid_image_id(), networks='none', host='host1') server = self.api.post_server({'server': server}) server = self._wait_for_state_change(server, 'ACTIVE') # Cold migrate the server to the other host. self.api.post_server_action(server['id'], {'migrate': None}) server = self._wait_for_state_change(server, 'VERIFY_RESIZE') self.assertEqual('host2', server['OS-EXT-SRV-ATTR:host']) # Make sure the migration is finished. self._wait_for_migration_status(server, ['finished']) # Stop and force down the source compute service. self.computes['host1'].stop() source_service = self.api.get_services( binary='nova-compute', host='host1')[0] self.api.put_service( source_service['id'], {'status': 'disabled', 'forced_down': True}) # Now configure auto-confirm and call the method on the target compute # so we do not have to wait for the periodic to run. Also configure # the RPC call from the API to the source compute to timeout after 1 # second. self.flags(resize_confirm_window=1, rpc_response_timeout=1) # Stub timeutils so the DB API query finds the unconfirmed migration. future = timeutils.utcnow() + datetime.timedelta(hours=1) ctxt = context.get_admin_context() with osloutils_fixture.TimeFixture(future): # Use the CastAsCall fixture since the fake rpc is not going to # simulate a failure from the service being down. with cast_as_call.CastAsCall(self): self.computes['host2'].manager._poll_unconfirmed_resizes(ctxt) self.assertIn('Error auto-confirming resize', self.stdlog.logger.output) self.assertIn('No reply on topic compute', self.stdlog.logger.output) # FIXME(mriedem): This is bug 1855927 where the migration status is # left in ""confirming"" so the _poll_unconfirmed_resizes task will not # process it again nor can the user confirm the resize in the API since # the migration status is not ""finished"". self._wait_for_migration_status(server, ['confirming']) ex = self.assertRaises(client.OpenStackApiException, self.api.post_server_action, server['id'], {'confirmResize': None}) self.assertEqual(400, ex.response.status_code) self.assertIn('Instance has not been resized', six.text_type(ex)) # That error message is bogus because the server is resized. server = self.api.get_server(server['id']) self.assertEqual('VERIFY_RESIZE', server['status']) ",,66,0
openstack%2Fnova~829507,openstack/nova,stable/train,I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527,Gracefull recovery when attaching volume fails,ABANDONED,2022-02-16 09:25:55.000000000,2023-09-01 17:00:34.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-02-16 09:25:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2a5ab6a82f21008ed3f350d9116a017e4dd7dd5f', 'message': 'Gracefull recovery when attaching volume fails\n\nWhen trying to attach a volume to an already running instance the nova-api\nrequests the nova-compute service to create a BlockDeviceMapping. If the\nnova-api does not receive a response within `rpc_response_timeout` it will\ntreat the request as failed and raise an exception.\n\nThere are multiple cases where nova-compute actually already processed the\nrequest and just the reply did not reach the nova-api in time (see bug report).\nAfter the failed request the database will contain a BlockDeviceMapping entry\nfor the volume + instance combination that will never be cleaned up again.\nThis entry also causes the nova-api to reject all future attachments of this\nvolume to this instance (as it assumes it is already attached).\n\nTo work around this we check if a BlockDeviceMapping has already been created\nwhen we see a messaging timeout. If this is the case we can safely delete it\nas the compute node has already finished processing and we will no longer pick\nit up.\nThis allows users to try the request again.\n\nA previous fix was abandoned but without a clear reason ([1]).\n\n[1]: https://review.opendev.org/c/openstack/nova/+/731804\n\nCloses-Bug: 1960401\nChange-Id: I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527\n(cherry picked from commit 9eb116b99ce32bc69c4abf8ec3b0179ef89a8860)\n'}, {'number': 2, 'created': '2022-02-18 08:00:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/75e7c498788b600c989e39b0df4ffa854a63a6bb', 'message': 'Gracefull recovery when attaching volume fails\n\nWhen trying to attach a volume to an already running instance the nova-api\nrequests the nova-compute service to create a BlockDeviceMapping. If the\nnova-api does not receive a response within `rpc_response_timeout` it will\ntreat the request as failed and raise an exception.\n\nThere are multiple cases where nova-compute actually already processed the\nrequest and just the reply did not reach the nova-api in time (see bug report).\nAfter the failed request the database will contain a BlockDeviceMapping entry\nfor the volume + instance combination that will never be cleaned up again.\nThis entry also causes the nova-api to reject all future attachments of this\nvolume to this instance (as it assumes it is already attached).\n\nTo work around this we check if a BlockDeviceMapping has already been created\nwhen we see a messaging timeout. If this is the case we can safely delete it\nas the compute node has already finished processing and we will no longer pick\nit up.\nThis allows users to try the request again.\n\nA previous fix was abandoned but without a clear reason ([1]).\n\n[1]: https://review.opendev.org/c/openstack/nova/+/731804\n\nCloses-Bug: 1960401\nChange-Id: I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527\n(cherry picked from commit 9eb116b99ce32bc69c4abf8ec3b0179ef89a8860)\n'}, {'number': 3, 'created': '2022-02-18 14:06:37.000000000', 'files': ['releasenotes/notes/bug-1960401-504eb255253d966a.yaml', 'nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3fd5fea19f84e3847a499c1d353cdc497598031a', 'message': 'Gracefull recovery when attaching volume fails\n\nWhen trying to attach a volume to an already running instance the nova-api\nrequests the nova-compute service to create a BlockDeviceMapping. If the\nnova-api does not receive a response within `rpc_response_timeout` it will\ntreat the request as failed and raise an exception.\n\nThere are multiple cases where nova-compute actually already processed the\nrequest and just the reply did not reach the nova-api in time (see bug report).\nAfter the failed request the database will contain a BlockDeviceMapping entry\nfor the volume + instance combination that will never be cleaned up again.\nThis entry also causes the nova-api to reject all future attachments of this\nvolume to this instance (as it assumes it is already attached).\n\nTo work around this we check if a BlockDeviceMapping has already been created\nwhen we see a messaging timeout. If this is the case we can safely delete it\nas the compute node has already finished processing and we will no longer pick\nit up.\nThis allows users to try the request again.\n\nA previous fix was abandoned but without a clear reason ([1]).\n\n[1]: https://review.opendev.org/c/openstack/nova/+/731804\n\nCloses-Bug: 1960401\nChange-Id: I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527\n(cherry picked from commit 9eb116b99ce32bc69c4abf8ec3b0179ef89a8860)\n'}]",1,829507,3fd5fea19f84e3847a499c1d353cdc497598031a,13,1,3,29074,,,0,"Gracefull recovery when attaching volume fails

When trying to attach a volume to an already running instance the nova-api
requests the nova-compute service to create a BlockDeviceMapping. If the
nova-api does not receive a response within `rpc_response_timeout` it will
treat the request as failed and raise an exception.

There are multiple cases where nova-compute actually already processed the
request and just the reply did not reach the nova-api in time (see bug report).
After the failed request the database will contain a BlockDeviceMapping entry
for the volume + instance combination that will never be cleaned up again.
This entry also causes the nova-api to reject all future attachments of this
volume to this instance (as it assumes it is already attached).

To work around this we check if a BlockDeviceMapping has already been created
when we see a messaging timeout. If this is the case we can safely delete it
as the compute node has already finished processing and we will no longer pick
it up.
This allows users to try the request again.

A previous fix was abandoned but without a clear reason ([1]).

[1]: https://review.opendev.org/c/openstack/nova/+/731804

Closes-Bug: 1960401
Change-Id: I17f4d7d2cb129c4ec1479cc4e5d723da75d3a527
(cherry picked from commit 9eb116b99ce32bc69c4abf8ec3b0179ef89a8860)
",git fetch https://review.opendev.org/openstack/nova refs/changes/07/829507/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1960401-504eb255253d966a.yaml', 'nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py']",3,2a5ab6a82f21008ed3f350d9116a017e4dd7dd5f,," try: volume_bdm = self._create_volume_bdm( context, instance, device, volume, disk_bus=disk_bus, device_type=device_type, tag=tag, delete_on_termination=delete_on_termination) except oslo_exceptions.MessagingTimeout: # The compute node might have already created the attachment but # we never received the answer. In this case it is safe to delete # the attachment as nobody will ever pick it up again. with excutils.save_and_reraise_exception(): try: objects.BlockDeviceMapping.get_by_volume_and_instance( context, volume['id'], instance.uuid).destroy() LOG.debug(""Delete BDM after compute did not respond to "" f""attachment request for volume {volume['id']}"") except exception.VolumeBDMNotFound: LOG.debug(""BDM not found, ignoring removal. "" f""Error attaching volume {volume['id']}"")"," volume_bdm = self._create_volume_bdm( context, instance, device, volume, disk_bus=disk_bus, device_type=device_type, tag=tag, delete_on_termination=delete_on_termination)",57,5
openstack%2Fnova~805631,openstack/nova,stable/train,I2da867f2734b590a884b1fe1200c402cbf7e9e1c,workarounds: Add libvirt_disable_apic,ABANDONED,2021-08-23 13:00:59.000000000,2023-09-01 17:00:27.000000000,,"[{'_account_id': 11604}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-08-23 13:00:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1f84f326a9ac6cb635985b4f16956f50b96b93b4', 'message': 'workarounds: Add libvirt_disable_apic\n\nThis change adds a new workaround config option to allow disabling the\nguest apic.\n\nNOTE(lyarwood): Conflicts caused by\nIf874f018ea996587e178219569c2903c2ee923cf,\nIed3732042738a6194b635c55e0304d71a6fb66e3 and\nIa500eb614cf575ab846f64f4b69c9068274c8c1f not being present in\nstable/train.\n\nConflicts:\n    nova/conf/workarounds.py\n\nCo-authored-by: Lee Yarwood <lyarwood@redhat.com>\nRelated-Bug: #1939108\nChange-Id: I2da867f2734b590a884b1fe1200c402cbf7e9e1c\n(cherry picked from commit ec48e1523dfdd0f1031e1a70c28c56962db66e8a)\n(cherry picked from commit 220c5a444729781f0cb74ca73edc7886d9ec56c4)\n(cherry picked from commit 04b49b9e42cff19e219cb330ffe2b35dd11f6322)\n(cherry picked from commit 633dfb9b1a3fe3ba1af3bb2e8bd932ac0d002133)\n'}, {'number': 2, 'created': '2021-08-23 14:33:35.000000000', 'files': ['nova/virt/libvirt/driver.py', 'releasenotes/notes/libvirt-disable-apic-39599bdc2d110a1f.yaml', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c50e6a501e6340efb1af98135c3b3ce4b826930c', 'message': 'workarounds: Add libvirt_disable_apic\n\nThis change adds a new workaround config option to allow disabling the\nguest apic.\n\nNOTE(lyarwood): Conflicts caused by\nIf874f018ea996587e178219569c2903c2ee923cf,\nIed3732042738a6194b635c55e0304d71a6fb66e3 and\nIa500eb614cf575ab846f64f4b69c9068274c8c1f not being present in\nstable/train.\n\nConflicts:\n    nova/conf/workarounds.py\n\nCo-authored-by: Lee Yarwood <lyarwood@redhat.com>\nRelated-Bug: #1939108\nChange-Id: I2da867f2734b590a884b1fe1200c402cbf7e9e1c\n(cherry picked from commit ec48e1523dfdd0f1031e1a70c28c56962db66e8a)\n(cherry picked from commit caeecdec5f32e4c63f3edf6442734e44cfb06f14)\n(cherry picked from commit 0c5d9d1d257b6afa88f3e5d1bd2c0f6b42e161a2)\n(cherry picked from commit 3240f9c28411e5e7efe04a3fcbe1465ec016c65b)\n'}]",0,805631,c50e6a501e6340efb1af98135c3b3ce4b826930c,7,2,2,10135,,,0,"workarounds: Add libvirt_disable_apic

This change adds a new workaround config option to allow disabling the
guest apic.

NOTE(lyarwood): Conflicts caused by
If874f018ea996587e178219569c2903c2ee923cf,
Ied3732042738a6194b635c55e0304d71a6fb66e3 and
Ia500eb614cf575ab846f64f4b69c9068274c8c1f not being present in
stable/train.

Conflicts:
    nova/conf/workarounds.py

Co-authored-by: Lee Yarwood <lyarwood@redhat.com>
Related-Bug: #1939108
Change-Id: I2da867f2734b590a884b1fe1200c402cbf7e9e1c
(cherry picked from commit ec48e1523dfdd0f1031e1a70c28c56962db66e8a)
(cherry picked from commit caeecdec5f32e4c63f3edf6442734e44cfb06f14)
(cherry picked from commit 0c5d9d1d257b6afa88f3e5d1bd2c0f6b42e161a2)
(cherry picked from commit 3240f9c28411e5e7efe04a3fcbe1465ec016c65b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/31/805631/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'releasenotes/notes/libvirt-disable-apic-39599bdc2d110a1f.yaml', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",4,1f84f326a9ac6cb635985b4f16956f50b96b93b4,workaround-disable-apic," @mock.patch.object(host.Host, 'has_min_version', new=mock.Mock(return_value=True)) def test_get_guest_config_apic_workaround(self): self.flags(virt_type='qemu', group='libvirt') drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), True) instance_ref = objects.Instance(**self.test_instance) image_meta = objects.ImageMeta.from_dict(self.test_image_meta) disk_info = blockinfo.get_disk_info( CONF.libvirt.virt_type, instance_ref, image_meta) cfg = drvr._get_guest_config( instance_ref, _fake_network_info(self), image_meta, disk_info) self.assertEqual(3, len(cfg.features)) self.assertIsInstance( cfg.features[0], vconfig.LibvirtConfigGuestFeatureACPI) self.assertIsInstance( cfg.features[1], vconfig.LibvirtConfigGuestFeatureAPIC) self.assertIsInstance( cfg.features[2], vconfig.LibvirtConfigGuestFeatureVMCoreInfo) self.flags(libvirt_disable_apic=True, group='workarounds') cfg = drvr._get_guest_config( instance_ref, _fake_network_info(self), image_meta, disk_info) self.assertEqual(2, len(cfg.features)) self.assertIsInstance( cfg.features[0], vconfig.LibvirtConfigGuestFeatureACPI) self.assertIsInstance( cfg.features[1], vconfig.LibvirtConfigGuestFeatureVMCoreInfo) ",,56,1
openstack%2Fnova~827126,openstack/nova,stable/train,Ie90fb83662dd06e7188f042fc6340596f93c5ef9,api: Reject duplicate port IDs in server create,ABANDONED,2022-01-31 15:15:40.000000000,2023-09-01 17:00:21.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-01-31 15:15:40.000000000', 'files': ['releasenotes/notes/bug-1821088-reject-duplicate-port-ids-a38739d67d5d7c5d.yaml', 'nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/api/openstack/compute/servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3243420b0f8010d779a73ff6160eb50655f940d0', 'message': 'api: Reject duplicate port IDs in server create\n\nSpecifying a duplicate port ID is currently ""allowed"" but results in an\nintegrity error when nova attempts to create a duplicate\n\'VirtualInterface\' entry. Start rejecting these requests by checking for\nduplicate IDs and rejecting offending requests. This is arguably an API\nchange because there isn\'t a HTTP 5xx error (server create is an async\noperation), however, users shouldn\'t have to opt in to non-broken\nbehavior and the underlying instance was never actually created\npreviously, meaning automation that relied on this ""feature"" was always\ngoing to fail in a later step. We\'re also silently failing to do what\nthe user asked (per flow chart at [1]).\n\n[1] https://docs.openstack.org/nova/latest/contributor/microversions.html#when-do-i-need-a-new-microversion\n\nConflicts:\n  nova/api/openstack/compute/servers.py\n  nova/tests/unit/api/openstack/compute/test_serversV21.py\n\nNOTE(stephenfin): Conflicts are due to change\nIfa9c5c468400261a5e1f66b72c575845173a4f8f (""nova-net: Remove final\nreferences to nova-network"") and change\nIbd97a0be22e0a894f3b1fdea052ee6359753457c (""nova-net: Remove unnecessary\n\'neutronv2\' prefixes""), neither of which are backportable.\n\nChange-Id: Ie90fb83662dd06e7188f042fc6340596f93c5ef9\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1821088\n(cherry picked from commit 9fe465427310f8215890d26bf169617653605e23)\n(cherry picked from commit d4c92bc2314c6402c4e3464a5aa61a94293eaf91)\n(cherry picked from commit fcbe6eecd7358dfa22b2dca8eca2afaa11f882f3)\n(cherry picked from commit 3731d1f5afe28b1cb6d36e88c407b65d1653a6df)\n(cherry picked from commit 23e7e6011b9087e25ca14f0da42ebafb0bef653a)\n'}]",1,827126,3243420b0f8010d779a73ff6160eb50655f940d0,7,1,1,15334,,,0,"api: Reject duplicate port IDs in server create

Specifying a duplicate port ID is currently ""allowed"" but results in an
integrity error when nova attempts to create a duplicate
'VirtualInterface' entry. Start rejecting these requests by checking for
duplicate IDs and rejecting offending requests. This is arguably an API
change because there isn't a HTTP 5xx error (server create is an async
operation), however, users shouldn't have to opt in to non-broken
behavior and the underlying instance was never actually created
previously, meaning automation that relied on this ""feature"" was always
going to fail in a later step. We're also silently failing to do what
the user asked (per flow chart at [1]).

[1] https://docs.openstack.org/nova/latest/contributor/microversions.html#when-do-i-need-a-new-microversion

Conflicts:
  nova/api/openstack/compute/servers.py
  nova/tests/unit/api/openstack/compute/test_serversV21.py

NOTE(stephenfin): Conflicts are due to change
Ifa9c5c468400261a5e1f66b72c575845173a4f8f (""nova-net: Remove final
references to nova-network"") and change
Ibd97a0be22e0a894f3b1fdea052ee6359753457c (""nova-net: Remove unnecessary
'neutronv2' prefixes""), neither of which are backportable.

Change-Id: Ie90fb83662dd06e7188f042fc6340596f93c5ef9
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Closes-Bug: #1821088
(cherry picked from commit 9fe465427310f8215890d26bf169617653605e23)
(cherry picked from commit d4c92bc2314c6402c4e3464a5aa61a94293eaf91)
(cherry picked from commit fcbe6eecd7358dfa22b2dca8eca2afaa11f882f3)
(cherry picked from commit 3731d1f5afe28b1cb6d36e88c407b65d1653a6df)
(cherry picked from commit 23e7e6011b9087e25ca14f0da42ebafb0bef653a)
",git fetch https://review.opendev.org/openstack/nova refs/changes/26/827126/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/bug-1821088-reject-duplicate-port-ids-a38739d67d5d7c5d.yaml', 'nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/api/openstack/compute/servers.py']",3,3243420b0f8010d779a73ff6160eb50655f940d0,bug/1821088," port_uuids = [] if request.port_id in port_uuids: msg = _( ""Port ID '%(port)s' was specified twice: you "" ""cannot attach a port multiple times."" ) % { ""port"": request.port_id, } if request.address is not None: msg = _( ""Specified Fixed IP '%(addr)s' cannot be used "" ""with port '%(port)s': the two cannot be "" ""specified together."" ) % { ""addr"": request.address, ""port"": request.port_id, } raise exc.HTTPBadRequest(explanation=msg) request.network_id = None port_uuids.append(request.port_id)"," request.network_id = None if request.address is not None: msg = _(""Specified Fixed IP '%(addr)s' cannot be used "" ""with port '%(port)s': the two cannot be "" ""specified together."") % { ""addr"": request.address, ""port"": request.port_id}",58,16
openstack%2Fnova~818598,openstack/nova,stable/train,Ie904d1513b5cf76d6d5f6877545e8eb378dd5499,Add a WA flag waiting for vif-plugged event during reboot,ABANDONED,2021-11-19 16:42:05.000000000,2023-09-01 17:00:09.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-19 16:42:05.000000000', 'files': ['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug-1946729-wait-for-vif-plugged-event-during-hard-reboot-fb491f6a68370bab.yaml', '.zuul.yaml', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/870d8148ef1fc0c72554f24a20aec091e69a5656', 'message': 'Add a WA flag waiting for vif-plugged event during reboot\n\nThe libvirt driver power on and hard reboot destroys the domain first\nand unplugs the vifs then recreate the domain and replug the vifs.\nHowever nova does not wait for the network-vif-plugged event before\nunpause the domain. This can cause that the domain starts running and\nrequesting IP via DHCP before the networking backend finished plugging\nthe vifs.\n\nSo this patch adds a workaround config option to nova to wait for\nnetwork-vif-plugged events during hard reboot the same way as nova waits\nfor this event during new instance spawn.\n\nThis logic cannot be enabled unconditionally as not all neutron\nnetworking backend sending plug time events to wait for. Also the logic\nneeds to be vnic_type dependent as ml2/ovs and the in tree sriov backend\noften deployed together on the same compute. While ml2/ovs sends plug\ntime event the sriov backend does not send it reliably. So the\nconfiguration is not just a boolean flag but a list of vnic_types\ninstead. This way the waiting for the plug time event for a vif that is\nhandled by ml2/ovs is possible while the instance has other vifs handled\nby the sriov backend where no event can be expected.\n\nConflicts:\n      nova/conf/workarounds.py due to\n      Ia500eb614cf575ab846f64f4b69c9068274c8c1f and\n      Ied3732042738a6194b635c55e0304d71a6fb66e3 are not in stable/train\n\nChange-Id: Ie904d1513b5cf76d6d5f6877545e8eb378dd5499\nCloses-Bug: #1946729\n(cherry picked from commit 68c970ea9915a95f9828239006559b84e4ba2581)\n(cherry picked from commit 0c41bfb8c5c60f1cc930ae432e6be460ee2e97ac)\n(cherry picked from commit 89c4ff5f7b45f1a5bed8b6b9b4586fceaa391bfb)\n(cherry picked from commit c531fdcc192afb5af628ac567cb0ff8aa3eab052)\n(cherry picked from commit 35e071470e2c5597444a7b85211a01e7fbc7c68b)\n'}]",0,818598,870d8148ef1fc0c72554f24a20aec091e69a5656,4,1,1,9708,,,0,"Add a WA flag waiting for vif-plugged event during reboot

The libvirt driver power on and hard reboot destroys the domain first
and unplugs the vifs then recreate the domain and replug the vifs.
However nova does not wait for the network-vif-plugged event before
unpause the domain. This can cause that the domain starts running and
requesting IP via DHCP before the networking backend finished plugging
the vifs.

So this patch adds a workaround config option to nova to wait for
network-vif-plugged events during hard reboot the same way as nova waits
for this event during new instance spawn.

This logic cannot be enabled unconditionally as not all neutron
networking backend sending plug time events to wait for. Also the logic
needs to be vnic_type dependent as ml2/ovs and the in tree sriov backend
often deployed together on the same compute. While ml2/ovs sends plug
time event the sriov backend does not send it reliably. So the
configuration is not just a boolean flag but a list of vnic_types
instead. This way the waiting for the plug time event for a vif that is
handled by ml2/ovs is possible while the instance has other vifs handled
by the sriov backend where no event can be expected.

Conflicts:
      nova/conf/workarounds.py due to
      Ia500eb614cf575ab846f64f4b69c9068274c8c1f and
      Ied3732042738a6194b635c55e0304d71a6fb66e3 are not in stable/train

Change-Id: Ie904d1513b5cf76d6d5f6877545e8eb378dd5499
Closes-Bug: #1946729
(cherry picked from commit 68c970ea9915a95f9828239006559b84e4ba2581)
(cherry picked from commit 0c41bfb8c5c60f1cc930ae432e6be460ee2e97ac)
(cherry picked from commit 89c4ff5f7b45f1a5bed8b6b9b4586fceaa391bfb)
(cherry picked from commit c531fdcc192afb5af628ac567cb0ff8aa3eab052)
(cherry picked from commit 35e071470e2c5597444a7b85211a01e7fbc7c68b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/98/818598/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug-1946729-wait-for-vif-plugged-event-during-hard-reboot-fb491f6a68370bab.yaml', '.zuul.yaml', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",5,870d8148ef1fc0c72554f24a20aec091e69a5656,bug/1946729," block_device_info=block_device_info, vifs_already_plugged=True, external_events=[]) @mock.patch('oslo_utils.fileutils.ensure_tree', new=mock.Mock()) @mock.patch('nova.virt.libvirt.LibvirtDriver.get_info') @mock.patch('nova.virt.libvirt.LibvirtDriver._create_domain_and_network') @mock.patch('nova.virt.libvirt.LibvirtDriver._get_guest_xml') @mock.patch('nova.virt.libvirt.LibvirtDriver.destroy', new=mock.Mock()) @mock.patch( 'nova.virt.libvirt.LibvirtDriver._get_all_assigned_mediated_devices', new=mock.Mock(return_value={})) def test_hard_reboot_wait_for_plug( self, mock_get_guest_xml, mock_create_domain_and_network, mock_get_info ): self.flags( group=""workarounds"", wait_for_vif_plugged_event_during_hard_reboot=[""normal""]) self.context.auth_token = None instance = objects.Instance(**self.test_instance) network_info = _fake_network_info(self, num_networks=4) network_info[0][""vnic_type""] = ""normal"" network_info[1][""vnic_type""] = ""direct"" network_info[2][""vnic_type""] = ""normal"" network_info[3][""vnic_type""] = ""direct-physical"" block_device_info = None return_values = [hardware.InstanceInfo(state=power_state.SHUTDOWN), hardware.InstanceInfo(state=power_state.RUNNING)] mock_get_info.side_effect = return_values mock_get_guest_xml.return_value = mock.sentinel.xml drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) drvr._hard_reboot( self.context, instance, network_info, block_device_info) mock_create_domain_and_network.assert_called_once_with( self.context, mock.sentinel.xml, instance, network_info, block_device_info=block_device_info, vifs_already_plugged=False, external_events=[ ('network-vif-plugged', uuids.vif1), ('network-vif-plugged', uuids.vif3), ] )"," block_device_info=block_device_info, vifs_already_plugged=True)",145,9
openstack%2Fnova~792117,openstack/nova,stable/train,I59a0746b864610b6a314078cf5661d3d2b84b1d4,Ignore PCI devices with 32bit domain,ABANDONED,2021-05-19 09:52:46.000000000,2023-09-01 17:00:02.000000000,,"[{'_account_id': 9708}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-05-19 09:52:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/602b7ffd62d2315dd5c94bdb0230dbe4dec85468', 'message': 'Ignore PCI devices with 32bit domain\n\nNova and QEMU[1] supports PCI devices with a PCI address that has 16 bit\ndomain. However there are hypervisors that reports PCI addresses with\n32 bit domain. While today we cannot assign these to guests this should\nnot prevent the nova-compute service to start.\n\nThis patch changes the PCI manager to ignore such PCI devices.\n\nPlease note that this patch does not change fact that nova does not\nallow specifying PCI addresses with 32bit domain in the\n[pci]/passthrough_whitelist configuration. Such configuration is still\nrejected at nova-compute service startup.\n\nCloses-Bug: #1897528\n\n[1] https://github.com/qemu/qemu/blob/f2a1cf9180f63e88bb38ff21c169da97c3f2bad5/hw/core/qdev-properties.c#L993\n\nChange-Id: I59a0746b864610b6a314078cf5661d3d2b84b1d4\n(cherry picked from commit 8c9d6fc8f073cde78b79ae259c9915216f5d59b0)\n(cherry picked from commit 90ffc553d7f4152a6a4a8708787150d3c3c40b03)\n(cherry picked from commit d311cae258714d4538a868e72801724d6f93ecb8)\n'}, {'number': 2, 'created': '2021-06-16 13:13:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b025c5a29980fd868b8d8481e270f883e03164f5', 'message': ""Ignore PCI devices with 32bit domain\n\nNova and QEMU[1] supports PCI devices with a PCI address that has 16 bit\ndomain. However there are hypervisors that reports PCI addresses with\n32 bit domain. While today we cannot assign these to guests this should\nnot prevent the nova-compute service to start.\n\nThis patch changes the PCI manager to ignore such PCI devices.\n\nPlease note that this patch does not change fact that nova does not\nallow specifying PCI addresses with 32bit domain in the\n[pci]/passthrough_whitelist configuration. Such configuration is still\nrejected at nova-compute service startup.\n\nChanges:\n  nova/pci/manager.py\n\nNOTE(stephenfin): We need to replace a use of 'str(exc)' with\n'six.text_type(exc)' to keep pep8/Python 2.7 happy.\n\nCloses-Bug: #1897528\n\n[1] https://github.com/qemu/qemu/blob/f2a1cf9180f63e88bb38ff21c169da97c3f2bad5/hw/core/qdev-properties.c#L993\n\nChange-Id: I59a0746b864610b6a314078cf5661d3d2b84b1d4\n(cherry picked from commit 8c9d6fc8f073cde78b79ae259c9915216f5d59b0)\n(cherry picked from commit 90ffc553d7f4152a6a4a8708787150d3c3c40b03)\n(cherry picked from commit d311cae258714d4538a868e72801724d6f93ecb8)\n""}, {'number': 3, 'created': '2021-06-17 09:53:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/542b2deb4655d1ce189d056ddd3fb2f9244f0f92', 'message': 'Ignore PCI devices with 32bit domain\n\nNova and QEMU[1] supports PCI devices with a PCI address that has 16 bit\ndomain. However there are hypervisors that reports PCI addresses with\n32 bit domain. While today we cannot assign these to guests this should\nnot prevent the nova-compute service to start.\n\nThis patch changes the PCI manager to ignore such PCI devices.\n\nPlease note that this patch does not change fact that nova does not\nallow specifying PCI addresses with 32bit domain in the\n[pci]/passthrough_whitelist configuration. Such configuration is still\nrejected at nova-compute service startup.\n\nCloses-Bug: #1897528\n\n[1] https://github.com/qemu/qemu/blob/f2a1cf9180f63e88bb38ff21c169da97c3f2bad5/hw/core/qdev-properties.c#L993\n\nChange-Id: I59a0746b864610b6a314078cf5661d3d2b84b1d4\n(cherry picked from commit 8c9d6fc8f073cde78b79ae259c9915216f5d59b0)\n(cherry picked from commit 90ffc553d7f4152a6a4a8708787150d3c3c40b03)\n(cherry picked from commit 22daca3e7f33e89b937f03a89db63cf25489e3c9)\n'}, {'number': 4, 'created': '2021-11-04 12:24:51.000000000', 'files': ['nova/pci/manager.py', 'doc/source/admin/networking.rst', 'nova/conf/pci.py', 'nova/tests/unit/pci/test_manager.py', 'doc/source/admin/pci-passthrough.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/f03f46ee8846571be44e6995eafcb400a0f492e5', 'message': 'Ignore PCI devices with 32bit domain\n\nNova and QEMU[1] supports PCI devices with a PCI address that has 16 bit\ndomain. However there are hypervisors that reports PCI addresses with\n32 bit domain. While today we cannot assign these to guests this should\nnot prevent the nova-compute service to start.\n\nThis patch changes the PCI manager to ignore such PCI devices.\n\nPlease note that this patch does not change fact that nova does not\nallow specifying PCI addresses with 32bit domain in the\n[pci]/passthrough_whitelist configuration. Such configuration is still\nrejected at nova-compute service startup.\n\nCloses-Bug: #1897528\n\n[1] https://github.com/qemu/qemu/blob/f2a1cf9180f63e88bb38ff21c169da97c3f2bad5/hw/core/qdev-properties.c#L993\n\nChange-Id: I59a0746b864610b6a314078cf5661d3d2b84b1d4\n(cherry picked from commit 8c9d6fc8f073cde78b79ae259c9915216f5d59b0)\n(cherry picked from commit 90ffc553d7f4152a6a4a8708787150d3c3c40b03)\n(cherry picked from commit 22daca3e7f33e89b937f03a89db63cf25489e3c9)\n'}]",1,792117,f03f46ee8846571be44e6995eafcb400a0f492e5,16,2,4,15334,,,0,"Ignore PCI devices with 32bit domain

Nova and QEMU[1] supports PCI devices with a PCI address that has 16 bit
domain. However there are hypervisors that reports PCI addresses with
32 bit domain. While today we cannot assign these to guests this should
not prevent the nova-compute service to start.

This patch changes the PCI manager to ignore such PCI devices.

Please note that this patch does not change fact that nova does not
allow specifying PCI addresses with 32bit domain in the
[pci]/passthrough_whitelist configuration. Such configuration is still
rejected at nova-compute service startup.

Closes-Bug: #1897528

[1] https://github.com/qemu/qemu/blob/f2a1cf9180f63e88bb38ff21c169da97c3f2bad5/hw/core/qdev-properties.c#L993

Change-Id: I59a0746b864610b6a314078cf5661d3d2b84b1d4
(cherry picked from commit 8c9d6fc8f073cde78b79ae259c9915216f5d59b0)
(cherry picked from commit 90ffc553d7f4152a6a4a8708787150d3c3c40b03)
(cherry picked from commit 22daca3e7f33e89b937f03a89db63cf25489e3c9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/17/792117/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/pci/manager.py', 'doc/source/admin/networking.rst', 'nova/conf/pci.py', 'nova/tests/unit/pci/test_manager.py', 'doc/source/admin/pci-passthrough.rst']",5,602b7ffd62d2315dd5c94bdb0230dbe4dec85468,bug/1897528,.. note:: Nova only supports PCI addresses where the fields are restricted to the following maximum value: * domain - 0xFFFF * bus - 0xFF * slot - 0x1F * function - 0x7 Nova will ignore PCI devices reported by the hypervisor if the address is outside of these ranges.,,77,16
openstack%2Fnova~792116,openstack/nova,stable/train,I48dcb7faa17fe9f8346445a1746cff5845baf358,Reproduce bug 1897528,ABANDONED,2021-05-19 09:52:46.000000000,2023-09-01 16:59:52.000000000,,"[{'_account_id': 9708}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-05-19 09:52:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/52d58070bf2d2b05b7a18fe7f6aef8886751a590', 'message': 'Reproduce bug 1897528\n\nThe nova-compute fails to start if the hypervisor has PCI addresses\n32bit domain.\n\nChange-Id: I48dcb7faa17fe9f8346445a1746cff5845baf358\nRelated-Bug: #1897528\n(cherry picked from commit 976ac722d36439d16ea4ec1bf5037c482c89ef55)\n(cherry picked from commit 0354d4d9f47354e2b4fc0b2343c27e734fe2e494)\n(cherry picked from commit e0993099ca47c372092dad13390e4b436eccc4e8)\n'}, {'number': 2, 'created': '2021-06-16 13:13:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/dae1923132cf1f3a5fef6c2f9426206884981211', 'message': 'Reproduce bug 1897528\n\nThe nova-compute fails to start if the hypervisor has PCI addresses\n32bit domain.\n\nChange-Id: I48dcb7faa17fe9f8346445a1746cff5845baf358\nRelated-Bug: #1897528\n(cherry picked from commit 976ac722d36439d16ea4ec1bf5037c482c89ef55)\n(cherry picked from commit 0354d4d9f47354e2b4fc0b2343c27e734fe2e494)\n(cherry picked from commit e0993099ca47c372092dad13390e4b436eccc4e8)\n'}, {'number': 3, 'created': '2021-06-17 09:53:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2a5ed71d542f0cba0624dcaa97030893f3545e1d', 'message': 'Reproduce bug 1897528\n\nThe nova-compute fails to start if the hypervisor has PCI addresses\n32bit domain.\n\nChange-Id: I48dcb7faa17fe9f8346445a1746cff5845baf358\nRelated-Bug: #1897528\n(cherry picked from commit 976ac722d36439d16ea4ec1bf5037c482c89ef55)\n(cherry picked from commit 0354d4d9f47354e2b4fc0b2343c27e734fe2e494)\n(cherry picked from commit 8e9859b95c537738d97ade41a8d09670de27ef8d)\n'}, {'number': 4, 'created': '2021-11-04 12:24:28.000000000', 'files': ['nova/tests/unit/pci/test_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a0d3e6846c8e03ff141343c9bab9d4cbd2066dfc', 'message': 'Reproduce bug 1897528\n\nThe nova-compute fails to start if the hypervisor has PCI addresses\n32bit domain.\n\nChange-Id: I48dcb7faa17fe9f8346445a1746cff5845baf358\nRelated-Bug: #1897528\n(cherry picked from commit 976ac722d36439d16ea4ec1bf5037c482c89ef55)\n(cherry picked from commit 0354d4d9f47354e2b4fc0b2343c27e734fe2e494)\n(cherry picked from commit 8e9859b95c537738d97ade41a8d09670de27ef8d)\n'}]",0,792116,a0d3e6846c8e03ff141343c9bab9d4cbd2066dfc,12,2,4,15334,,,0,"Reproduce bug 1897528

The nova-compute fails to start if the hypervisor has PCI addresses
32bit domain.

Change-Id: I48dcb7faa17fe9f8346445a1746cff5845baf358
Related-Bug: #1897528
(cherry picked from commit 976ac722d36439d16ea4ec1bf5037c482c89ef55)
(cherry picked from commit 0354d4d9f47354e2b4fc0b2343c27e734fe2e494)
(cherry picked from commit 8e9859b95c537738d97ade41a8d09670de27ef8d)
",git fetch https://review.opendev.org/openstack/nova refs/changes/16/792116/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/pci/test_manager.py'],1,52d58070bf2d2b05b7a18fe7f6aef8886751a590,bug/1897528,"from nova import exception def test_update_devices_from_hypervisor_resources_32bit_domain(self): self.flags( group='pci', passthrough_whitelist=[ '{""product_id"":""2032"", ""vendor_id"":""8086""}']) # There are systems where 32 bit PCI domain is used. See bug 1897528 # for example. While nova (and qemu) does not support assigning such # devices but the existence of such device in the system should not # lead to an error. fake_pci = { 'compute_node_id': 1, 'address': '10000:00:02.0', 'product_id': '2032', 'vendor_id': '8086', 'request_id': None, 'status': fields.PciDeviceStatus.AVAILABLE, 'dev_type': fields.PciDeviceType.STANDARD, 'parent_addr': None, 'numa_node': 0} fake_pci_devs = [fake_pci] fake_pci_devs_json = jsonutils.dumps(fake_pci_devs) tracker = manager.PciDevTracker(self.fake_context) # We expect that the device with 32bit PCI domain is ignored # tracker.update_devices_from_hypervisor_resources(fake_pci_devs_json) # self.assertEqual(0, len(tracker.pci_devs)) # # This is the bug 1897528 ex = self.assertRaises( exception.PciConfigInvalidWhitelist, tracker.update_devices_from_hypervisor_resources, fake_pci_devs_json) self.assertEqual( 'Invalid PCI devices Whitelist config: property domain (10000) is ' 'greater than the maximum allowable value (FFFF).', str(ex)) ",,37,0
openstack%2Fnova~811823,openstack/nova,stable/train,Ia53ff43e6964963cdf295604ba0fb7171389606e,Invalidate provider tree when compute node disappears,ABANDONED,2021-09-30 01:58:04.000000000,2023-09-01 16:59:45.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d2a0961e220f83b63ab0584adff1b413fb5c07e9', 'message': 'Invalidate provider tree when compute node disappears\n\nThere is a race condition in nova-compute with the ironic virt driver\nas nodes get rebalanced. It can lead to compute nodes being removed in\nthe DB and not repopulated. Ultimately this prevents these nodes from\nbeing scheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a\nhost which thinks it is an orphan, then the resource provider for that\nnode might also be deleted. The compute host that owns the node might\nnot recreate the resource provider if it exists in the provider tree\ncache.\n\nThis change fixes the issue by clearing resource providers from the\nprovider tree cache for which a compute node entry does not exist. Then,\nwhen the available resource for the node is updated, the resource\nproviders are not found in the cache and get recreated in placement.\n\nChange-Id: Ia53ff43e6964963cdf295604ba0fb7171389606e\nRelated-Bug: #1853009\nRelated-Bug: #1841481\n(cherry picked from commit 2bb4527228c8e6fa4a1fa6cfbe80e8790e4e0789)\n(cherry picked from commit 0fc104eeea065579f7fa9b52794d5151baefc84c)\n(cherry picked from commit 456bcc784340a5674d25fbe6e707c36c583b504f)\n(cherry picked from commit 8fa5b881c9b8fb78ceca7ae02d808f1fe64d72e4)\n'}, {'number': 2, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/compute/test_resource_tracker.py', 'nova/scheduler/client/report.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/accb4fe445eaede719ad70502647365738c4d362', 'message': 'Invalidate provider tree when compute node disappears\n\nThere is a race condition in nova-compute with the ironic virt driver\nas nodes get rebalanced. It can lead to compute nodes being removed in\nthe DB and not repopulated. Ultimately this prevents these nodes from\nbeing scheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a\nhost which thinks it is an orphan, then the resource provider for that\nnode might also be deleted. The compute host that owns the node might\nnot recreate the resource provider if it exists in the provider tree\ncache.\n\nThis change fixes the issue by clearing resource providers from the\nprovider tree cache for which a compute node entry does not exist. Then,\nwhen the available resource for the node is updated, the resource\nproviders are not found in the cache and get recreated in placement.\n\nChange-Id: Ia53ff43e6964963cdf295604ba0fb7171389606e\nRelated-Bug: #1853009\nRelated-Bug: #1841481\n(cherry picked from commit 2bb4527228c8e6fa4a1fa6cfbe80e8790e4e0789)\n(cherry picked from commit 0fc104eeea065579f7fa9b52794d5151baefc84c)\n(cherry picked from commit 456bcc784340a5674d25fbe6e707c36c583b504f)\n(cherry picked from commit 8fa5b881c9b8fb78ceca7ae02d808f1fe64d72e4)\n'}]",2,811823,accb4fe445eaede719ad70502647365738c4d362,12,2,2,4690,,,0,"Invalidate provider tree when compute node disappears

There is a race condition in nova-compute with the ironic virt driver
as nodes get rebalanced. It can lead to compute nodes being removed in
the DB and not repopulated. Ultimately this prevents these nodes from
being scheduled to.

The issue being addressed here is that if a compute node is deleted by a
host which thinks it is an orphan, then the resource provider for that
node might also be deleted. The compute host that owns the node might
not recreate the resource provider if it exists in the provider tree
cache.

This change fixes the issue by clearing resource providers from the
provider tree cache for which a compute node entry does not exist. Then,
when the available resource for the node is updated, the resource
providers are not found in the cache and get recreated in placement.

Change-Id: Ia53ff43e6964963cdf295604ba0fb7171389606e
Related-Bug: #1853009
Related-Bug: #1841481
(cherry picked from commit 2bb4527228c8e6fa4a1fa6cfbe80e8790e4e0789)
(cherry picked from commit 0fc104eeea065579f7fa9b52794d5151baefc84c)
(cherry picked from commit 456bcc784340a5674d25fbe6e707c36c583b504f)
(cherry picked from commit 8fa5b881c9b8fb78ceca7ae02d808f1fe64d72e4)
",git fetch https://review.opendev.org/openstack/nova refs/changes/23/811823/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_resource_tracker.py', 'nova/scheduler/client/report.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",4,d2a0961e220f83b63ab0584adff1b413fb5c07e9,bug/1853009," # FIXME(mgoddard): Resource provider not recreated here, due to # https://bugs.launchpad.net/nova/+bug/1853159. self.assertFalse(host_b.manager.rt.reportclient._provider_tree.exists( # The resource provider has now been created. self.assertEqual(1, len(rps), rps) self.assertEqual(self.nodename, rps[0]['name'])"," # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. # There is still no RP. self.assertEqual(0, len(rps), rps) # But the RP it exists in the provider tree. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename))",25,20
openstack%2Fnova~811822,openstack/nova,stable/train,I39241223b447fcc671161c370dbf16e1773b684a,Clear rebalanced compute nodes from resource tracker,ABANDONED,2021-09-30 01:58:04.000000000,2023-09-01 16:59:38.000000000,,"[{'_account_id': 4690}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4c5791175c9416644d995a09f30fb1f1c3e5ad5a', 'message': 'Clear rebalanced compute nodes from resource tracker\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a host\nwhich thinks it is an orphan, then the compute host that actually owns the node\nmight not recreate it if the node is already in its resource tracker cache.\n\nThis change fixes the issue by clearing nodes from the resource tracker cache\nfor which a compute node entry does not exist. Then, when the available\nresource for the node is updated, the compute node object is not found in the\ncache and gets recreated.\n\nConflicts:\n    nova/compute/resource_tracker.py\n    nova/tests/unit/compute/test_compute_mgr.py\n    nova/tests/unit/compute/test_resource_tracker.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * Ica180165184b319651d22fe77e076af036228860 (Set instance host and\n    drop migration under lock)\n  * Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (Use fair locks in\n    resource tracker)\n  * I739025dacbcaa0f7adbe612c064f979bf6390880 (Ensures that\n    COMPUTE_RESOURCE_SEMAPHORE usage is fair)\n  * I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n    _delete_provider)\n\nChange-Id: I39241223b447fcc671161c370dbf16e1773b684a\nPartial-Bug: #1853009\n(cherry picked from commit 32676a9f45807ea8770dc7bdff1e859673af1b61)\n(cherry picked from commit f950cedf17cc4c3ce9d094dbfde5e4cf013260f7)\n(cherry picked from commit 32887f82c9bd430f285ff4418811dffdd88e398f)\n(cherry picked from commit 4b5d0804749685c8afe182b716b7536045432a7e)\n'}, {'number': 2, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/53d0851d01097912b1b4c785a124a7320f3c4c3d', 'message': 'Clear rebalanced compute nodes from resource tracker\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe issue being addressed here is that if a compute node is deleted by a host\nwhich thinks it is an orphan, then the compute host that actually owns the node\nmight not recreate it if the node is already in its resource tracker cache.\n\nThis change fixes the issue by clearing nodes from the resource tracker cache\nfor which a compute node entry does not exist. Then, when the available\nresource for the node is updated, the compute node object is not found in the\ncache and gets recreated.\n\nConflicts:\n    nova/compute/resource_tracker.py\n    nova/tests/unit/compute/test_compute_mgr.py\n    nova/tests/unit/compute/test_resource_tracker.py\n\nNOTE(melwitt): The conflicts and difference from the cherry picked\nchange are because the following changes are not in Train:\n\n  * Ica180165184b319651d22fe77e076af036228860 (Set instance host and\n    drop migration under lock)\n  * Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (Use fair locks in\n    resource tracker)\n  * I739025dacbcaa0f7adbe612c064f979bf6390880 (Ensures that\n    COMPUTE_RESOURCE_SEMAPHORE usage is fair)\n  * I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n    _delete_provider)\n\nChange-Id: I39241223b447fcc671161c370dbf16e1773b684a\nPartial-Bug: #1853009\n(cherry picked from commit 32676a9f45807ea8770dc7bdff1e859673af1b61)\n(cherry picked from commit f950cedf17cc4c3ce9d094dbfde5e4cf013260f7)\n(cherry picked from commit 32887f82c9bd430f285ff4418811dffdd88e398f)\n(cherry picked from commit 4b5d0804749685c8afe182b716b7536045432a7e)\n'}]",4,811822,53d0851d01097912b1b4c785a124a7320f3c4c3d,12,3,2,4690,,,0,"Clear rebalanced compute nodes from resource tracker

There is a race condition in nova-compute with the ironic virt driver as
nodes get rebalanced. It can lead to compute nodes being removed in the
DB and not repopulated. Ultimately this prevents these nodes from being
scheduled to.

The issue being addressed here is that if a compute node is deleted by a host
which thinks it is an orphan, then the compute host that actually owns the node
might not recreate it if the node is already in its resource tracker cache.

This change fixes the issue by clearing nodes from the resource tracker cache
for which a compute node entry does not exist. Then, when the available
resource for the node is updated, the compute node object is not found in the
cache and gets recreated.

Conflicts:
    nova/compute/resource_tracker.py
    nova/tests/unit/compute/test_compute_mgr.py
    nova/tests/unit/compute/test_resource_tracker.py

NOTE(melwitt): The conflicts and difference from the cherry picked
change are because the following changes are not in Train:

  * Ica180165184b319651d22fe77e076af036228860 (Set instance host and
    drop migration under lock)
  * Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (Use fair locks in
    resource tracker)
  * I739025dacbcaa0f7adbe612c064f979bf6390880 (Ensures that
    COMPUTE_RESOURCE_SEMAPHORE usage is fair)
  * I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from
    _delete_provider)

Change-Id: I39241223b447fcc671161c370dbf16e1773b684a
Partial-Bug: #1853009
(cherry picked from commit 32676a9f45807ea8770dc7bdff1e859673af1b61)
(cherry picked from commit f950cedf17cc4c3ce9d094dbfde5e4cf013260f7)
(cherry picked from commit 32887f82c9bd430f285ff4418811dffdd88e398f)
(cherry picked from commit 4b5d0804749685c8afe182b716b7536045432a7e)
",git fetch https://review.opendev.org/openstack/nova refs/changes/22/811822/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",5,4c5791175c9416644d995a09f30fb1f1c3e5ad5a,bug/1853009," # Verify that the node was recreated. self._assert_hypervisor_api(self.nodename, 'host_b') # But due to https://bugs.launchpad.net/nova/+bug/1853159 the compute # node is not cached in the RT. self.assertNotIn(self.nodename, host_b.manager.rt.compute_nodes) # host_b[1]: Should add compute node to RT cache and recreate resource # provider. # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. host_b.manager.update_available_resource(self.ctxt) # Verify that the node still exists. self._assert_hypervisor_api(self.nodename, 'host_b') # And it is now in the RT cache. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes) # There is still no RP. rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # But the RP it exists in the provider tree. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename)) "," cn_host_b_node = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_b', 'host_b', ) self.assertIn( 'Deleting orphan compute node %s hypervisor host ' 'is host_b, nodes are' % cn_host_b_node.id, self.stdlog.logger.output) # FIXME(mgoddard): Compute node not recreated here, because it is # already in RT.compute_nodes. See # https://bugs.launchpad.net/nova/+bug/1853009. # Verify that the node was not recreated. hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) # But the compute node exists in the RT. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes)",66,18
openstack%2Fnova~811824,openstack/nova,stable/train,I260c1fded79a85d4899e94df4d9036a1ee437f02,Prevent deletion of a compute node belonging to another host,ABANDONED,2021-09-30 01:58:04.000000000,2023-09-01 16:59:30.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/491bc64dff7a1c1f74d957daa7323085c729f915', 'message': 'Prevent deletion of a compute node belonging to another host\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe main race condition involved is in update_available_resources in\nthe compute manager. When the list of compute nodes is queried, there is\na compute node belonging to the host that it does not expect to be\nmanaging, i.e. it is an orphan. Between that time and deleting the\norphan, the real owner of the compute node takes ownership of it ( in\nthe resource tracker). However, the node is still deleted as the first\nhost is unaware of the ownership change.\n\nThis change prevents this from occurring by filtering on the host when\ndeleting a compute node. If another compute host has taken ownership of\na node, it will have updated the host field and this will prevent\ndeletion from occurring. The first host sees this has happened via the\nComputeHostNotFound exception, and avoids deleting its resource\nprovider.\n\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nConflicts:\n    nova/compute/manager.py\n\nNOTE(melwitt): The conflict is because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nCloses-Bug: #1853009\nRelated-Bug: #1841481\n\nChange-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02\n(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)\n(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)\n(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)\n(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)\n'}, {'number': 2, 'created': '2021-09-30 04:25:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a42f3ac4d3de8289f08debd731979c053a8d8e53', 'message': ""Prevent deletion of a compute node belonging to another host\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe main race condition involved is in update_available_resources in\nthe compute manager. When the list of compute nodes is queried, there is\na compute node belonging to the host that it does not expect to be\nmanaging, i.e. it is an orphan. Between that time and deleting the\norphan, the real owner of the compute node takes ownership of it ( in\nthe resource tracker). However, the node is still deleted as the first\nhost is unaware of the ownership change.\n\nThis change prevents this from occurring by filtering on the host when\ndeleting a compute node. If another compute host has taken ownership of\na node, it will have updated the host field and this will prevent\ndeletion from occurring. The first host sees this has happened via the\nComputeHostNotFound exception, and avoids deleting its resource\nprovider.\n\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nConflicts:\n    nova/compute/manager.py\n\nNOTE(melwitt): The conflict is because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nNOTE(melwitt): Difference from the cherry picked change: the 'uuid'\nattribute needed to be added to the Mock spec in\nnova/tests/unit/compute/test_compute_mgr.py because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nCloses-Bug: #1853009\nRelated-Bug: #1841481\n\nChange-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02\n(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)\n(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)\n(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)\n(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)\n""}, {'number': 3, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/objects/compute_node.py', 'nova/tests/unit/objects/test_compute_node.py', 'releasenotes/notes/bug-1853009-99414e14d1491b5f.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py', 'nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e159304647a66800dff9aa9d84af983505aa856b', 'message': ""Prevent deletion of a compute node belonging to another host\n\nThere is a race condition in nova-compute with the ironic virt driver as\nnodes get rebalanced. It can lead to compute nodes being removed in the\nDB and not repopulated. Ultimately this prevents these nodes from being\nscheduled to.\n\nThe main race condition involved is in update_available_resources in\nthe compute manager. When the list of compute nodes is queried, there is\na compute node belonging to the host that it does not expect to be\nmanaging, i.e. it is an orphan. Between that time and deleting the\norphan, the real owner of the compute node takes ownership of it ( in\nthe resource tracker). However, the node is still deleted as the first\nhost is unaware of the ownership change.\n\nThis change prevents this from occurring by filtering on the host when\ndeleting a compute node. If another compute host has taken ownership of\na node, it will have updated the host field and this will prevent\ndeletion from occurring. The first host sees this has happened via the\nComputeHostNotFound exception, and avoids deleting its resource\nprovider.\n\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nConflicts:\n    nova/compute/manager.py\n\nNOTE(melwitt): The conflict is because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nNOTE(melwitt): Difference from the cherry picked change: the 'uuid'\nattribute needed to be added to the Mock spec in\nnova/tests/unit/compute/test_compute_mgr.py because change\nI8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from\n_delete_provider) is not in Train.\n\nCloses-Bug: #1853009\nRelated-Bug: #1841481\n\nChange-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02\n(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)\n(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)\n(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)\n(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)\n""}]",2,811824,e159304647a66800dff9aa9d84af983505aa856b,14,2,3,4690,,,0,"Prevent deletion of a compute node belonging to another host

There is a race condition in nova-compute with the ironic virt driver as
nodes get rebalanced. It can lead to compute nodes being removed in the
DB and not repopulated. Ultimately this prevents these nodes from being
scheduled to.

The main race condition involved is in update_available_resources in
the compute manager. When the list of compute nodes is queried, there is
a compute node belonging to the host that it does not expect to be
managing, i.e. it is an orphan. Between that time and deleting the
orphan, the real owner of the compute node takes ownership of it ( in
the resource tracker). However, the node is still deleted as the first
host is unaware of the ownership change.

This change prevents this from occurring by filtering on the host when
deleting a compute node. If another compute host has taken ownership of
a node, it will have updated the host field and this will prevent
deletion from occurring. The first host sees this has happened via the
ComputeHostNotFound exception, and avoids deleting its resource
provider.

Co-Authored-By: melanie witt <melwittt@gmail.com>

Conflicts:
    nova/compute/manager.py

NOTE(melwitt): The conflict is because change
I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from
_delete_provider) is not in Train.

NOTE(melwitt): Difference from the cherry picked change: the 'uuid'
attribute needed to be added to the Mock spec in
nova/tests/unit/compute/test_compute_mgr.py because change
I8403a841f21a624a546ae5f26bb9ba19318ece6a (Remove @safe_connect from
_delete_provider) is not in Train.

Closes-Bug: #1853009
Related-Bug: #1841481

Change-Id: I260c1fded79a85d4899e94df4d9036a1ee437f02
(cherry picked from commit a8492e88783b40f6dc61888fada232f0d00d6acf)
(cherry picked from commit cbbca58504275f194ec55eeb89dad4a496d98060)
(cherry picked from commit 8f825c303355fbd652b87b0720942f57ff1675bb)
(cherry picked from commit fa91eb2696f5f5866837db20bc0bfeae38312783)
",git fetch https://review.opendev.org/openstack/nova refs/changes/24/811824/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/objects/compute_node.py', 'nova/tests/unit/objects/test_compute_node.py', 'releasenotes/notes/bug-1853009-99414e14d1491b5f.yaml', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py', 'nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",9,491bc64dff7a1c1f74d957daa7323085c729f915,bug/1853009," # Verify that the node was almost deleted, but was saved by the host # check self.assertIn( 'Ignoring failure to delete orphan compute node %s on ' 'hypervisor host fake-node' % cn.id, self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, 'host_b') self.assertEqual(1, len(rps), rps) self.assertEqual(self.nodename, rps[0]['name']) # Simulate deletion of an orphan by host_a. It shouldn't happen # anymore, but let's assume it already did. cn = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_b', self.nodename) cn.destroy() host_a.manager.rt.remove_node(cn.hypervisor_hostname) host_a.manager.reportclient.delete_resource_provider( self.ctxt, cn, cascade=True)"," # FIXME(mgoddard): Ideally host_a would not delete a node that does not # belong to it. See https://bugs.launchpad.net/nova/+bug/1853009. # Verify that the node was deleted. hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) self.assertEqual(0, len(rps), rps)",123,23
openstack%2Fnova~811825,openstack/nova,stable/train,Iae119ea8776bc7f2e5dbe2e502a743217beded73,Fix inactive session error in compute node creation,ABANDONED,2021-09-30 01:58:04.000000000,2023-09-01 16:59:22.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ff3081b9e2ec3bf563a97688806f436025f56ed8', 'message': ""Fix inactive session error in compute node creation\n\nIn the fix for bug 1839560 [1][2], soft-deleted compute nodes may be\nrestored, to ensure we can reuse ironic node UUIDs as compute node\nUUIDs. While this seems to largely work, it results in some nasty errors\nbeing generated [3]:\n\n    InvalidRequestError This session is in 'inactive' state, due to the\n    SQL transaction being rolled back; no further SQL can be emitted\n    within this transaction.\n\nThis happens because compute_node_create is decorated with\npick_context_manager_writer, which begins a transaction. While\n_compute_node_get_and_update_deleted claims that calling a second\npick_context_manager_writer decorated function will begin a new\nsubtransaction, this does not appear to be the case.\n\nThis change removes pick_context_manager_writer from the\ncompute_node_create function, and adds a new _compute_node_create\nfunction which ensures the transaction is finished if\n_compute_node_get_and_update_deleted is called.\n\nThe new unit test added here fails without this change.\n\nThis change marks the removal of the final FIXME from the functional\ntest added in [4].\n\n[1] https://bugs.launchpad.net/nova/+bug/1839560\n[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411\n[3] http://paste.openstack.org/show/786350/\n[4] https://review.opendev.org/#/c/695012/\n\nChange-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73\nCloses-Bug: #1853159\nRelated-Bug: #1853009\n(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)\n(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)\n(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)\n(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)\n""}, {'number': 2, 'created': '2021-09-30 04:25:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/10a3f74540895d1dcdc3553a86caebae0c12b15f', 'message': ""Fix inactive session error in compute node creation\n\nIn the fix for bug 1839560 [1][2], soft-deleted compute nodes may be\nrestored, to ensure we can reuse ironic node UUIDs as compute node\nUUIDs. While this seems to largely work, it results in some nasty errors\nbeing generated [3]:\n\n    InvalidRequestError This session is in 'inactive' state, due to the\n    SQL transaction being rolled back; no further SQL can be emitted\n    within this transaction.\n\nThis happens because compute_node_create is decorated with\npick_context_manager_writer, which begins a transaction. While\n_compute_node_get_and_update_deleted claims that calling a second\npick_context_manager_writer decorated function will begin a new\nsubtransaction, this does not appear to be the case.\n\nThis change removes pick_context_manager_writer from the\ncompute_node_create function, and adds a new _compute_node_create\nfunction which ensures the transaction is finished if\n_compute_node_get_and_update_deleted is called.\n\nThe new unit test added here fails without this change.\n\nThis change marks the removal of the final FIXME from the functional\ntest added in [4].\n\n[1] https://bugs.launchpad.net/nova/+bug/1839560\n[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411\n[3] http://paste.openstack.org/show/786350/\n[4] https://review.opendev.org/#/c/695012/\n\nChange-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73\nCloses-Bug: #1853159\nRelated-Bug: #1853009\n(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)\n(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)\n(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)\n(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)\n""}, {'number': 3, 'created': '2021-10-29 01:48:21.000000000', 'files': ['nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4482f5b1e8d48adf3479ea4192f2998302318fee', 'message': ""Fix inactive session error in compute node creation\n\nIn the fix for bug 1839560 [1][2], soft-deleted compute nodes may be\nrestored, to ensure we can reuse ironic node UUIDs as compute node\nUUIDs. While this seems to largely work, it results in some nasty errors\nbeing generated [3]:\n\n    InvalidRequestError This session is in 'inactive' state, due to the\n    SQL transaction being rolled back; no further SQL can be emitted\n    within this transaction.\n\nThis happens because compute_node_create is decorated with\npick_context_manager_writer, which begins a transaction. While\n_compute_node_get_and_update_deleted claims that calling a second\npick_context_manager_writer decorated function will begin a new\nsubtransaction, this does not appear to be the case.\n\nThis change removes pick_context_manager_writer from the\ncompute_node_create function, and adds a new _compute_node_create\nfunction which ensures the transaction is finished if\n_compute_node_get_and_update_deleted is called.\n\nThe new unit test added here fails without this change.\n\nThis change marks the removal of the final FIXME from the functional\ntest added in [4].\n\n[1] https://bugs.launchpad.net/nova/+bug/1839560\n[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411\n[3] http://paste.openstack.org/show/786350/\n[4] https://review.opendev.org/#/c/695012/\n\nChange-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73\nCloses-Bug: #1853159\nRelated-Bug: #1853009\n(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)\n(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)\n(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)\n(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)\n""}]",1,811825,4482f5b1e8d48adf3479ea4192f2998302318fee,15,2,3,4690,,,0,"Fix inactive session error in compute node creation

In the fix for bug 1839560 [1][2], soft-deleted compute nodes may be
restored, to ensure we can reuse ironic node UUIDs as compute node
UUIDs. While this seems to largely work, it results in some nasty errors
being generated [3]:

    InvalidRequestError This session is in 'inactive' state, due to the
    SQL transaction being rolled back; no further SQL can be emitted
    within this transaction.

This happens because compute_node_create is decorated with
pick_context_manager_writer, which begins a transaction. While
_compute_node_get_and_update_deleted claims that calling a second
pick_context_manager_writer decorated function will begin a new
subtransaction, this does not appear to be the case.

This change removes pick_context_manager_writer from the
compute_node_create function, and adds a new _compute_node_create
function which ensures the transaction is finished if
_compute_node_get_and_update_deleted is called.

The new unit test added here fails without this change.

This change marks the removal of the final FIXME from the functional
test added in [4].

[1] https://bugs.launchpad.net/nova/+bug/1839560
[2] https://git.openstack.org/cgit/openstack/nova/commit/?id=89dd74ac7f1028daadf86cb18948e27fe9d1d411
[3] http://paste.openstack.org/show/786350/
[4] https://review.opendev.org/#/c/695012/

Change-Id: Iae119ea8776bc7f2e5dbe2e502a743217beded73
Closes-Bug: #1853159
Related-Bug: #1853009
(cherry picked from commit 2383cbb4a518821d245fce316b3778c8ba8e5246)
(cherry picked from commit 665c053315439e1345aa131f4839945d662fb3f3)
(cherry picked from commit ddaa8215d2f2151f5d6d3d2946b87fb93d6f0a98)
(cherry picked from commit 37d7bf909b4767760531c118fd35f0654b4b86e8)
",git fetch https://review.opendev.org/openstack/nova refs/changes/25/811825/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/db/test_db_api.py', 'nova/db/sqlalchemy/api.py', 'nova/tests/functional/regressions/test_bug_1853009.py']",3,ff3081b9e2ec3bf563a97688806f436025f56ed8,bug/1853009,," # FIXME(mgoddard): This shows a traceback with SQL rollback due to # soft-deleted node. The create seems to succeed but breaks the RT # update for this node. See # https://bugs.launchpad.net/nova/+bug/1853159. # FIXME(mgoddard): Resource provider not recreated here, due to # https://bugs.launchpad.net/nova/+bug/1853159. # But due to https://bugs.launchpad.net/nova/+bug/1853159 the compute # node is not cached in the RT. self.assertNotIn(self.nodename, host_b.manager.rt.compute_nodes) # There is no RP. rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # But the RP exists in the provider tree. self.assertFalse(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename)) # host_b[1]: Should add compute node to RT cache and recreate resource # provider. host_b.manager.update_available_resource(self.ctxt) # Verify that the node still exists. self._assert_hypervisor_api(self.nodename, 'host_b') # And it is now in the RT cache. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes) # This fails due to the lack of a resource provider. self.assertIn( 'Skipping removal of allocations for deleted instances', self.stdlog.logger.output)",31,35
openstack%2Fnova~811821,openstack/nova,stable/train,Ice4071722de54e8d20bb8c3795be22f1995940cd,Add functional regression test for bug 1853009,ABANDONED,2021-09-30 01:58:04.000000000,2023-09-01 16:59:15.000000000,,"[{'_account_id': 14826}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-30 01:58:04.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1853009.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/bb91677cf7006fc5310bad826dad2570873b6d70', 'message': 'Add functional regression test for bug 1853009\n\nBug 1853009 describes a race condition involving multiple nova-compute\nservices with ironic. As the compute services start up, the hash ring\nrebalances, and the compute services have an inconsistent view of which\nis responsible for a compute node.\n\nThe sequence of actions here is adapted from a real world log [1], where\nmultiple nova-compute services were started simultaneously. In some\ncases mocks are used to simulate race conditions.\n\nThere are three main issues with the behaviour:\n\n* host2 deletes the orphan node compute node after host1 has taken\n  ownership of it.\n\n* host1 assumes that another compute service will not delete its nodes.\n  Once a node is in rt.compute_nodes, it is not removed again unless the\n  node is orphaned. This prevents host1 from recreating the compute\n  node.\n\n* host1 assumes that another compute service will not delete its\n  resource providers. Once an RP is in the provider tree, it is not\n  removed.\n\nThis functional test documents the current behaviour, with the idea that\nit can be updated as this behaviour is fixed.\n\n[1] http://paste.openstack.org/show/786272/\n\nCo-Authored-By: Matt Riedemann <mriedem.os@gmail.com>\n\nChange-Id: Ice4071722de54e8d20bb8c3795be22f1995940cd\nRelated-Bug: #1853009\nRelated-Bug: #1853159\n(cherry picked from commit 59d9871e8a0672538f8ffc43ae99b3d1c4b08909)\n(cherry picked from commit c260e75d012cc4fae596d5de185afad6fb24068c)\n(cherry picked from commit 34d5bca6bc612f41ac3fc33447cd2ba83bf446ba)\n(cherry picked from commit f57c4965eef8e25656635897f46dccfe23c3fa5c)\n'}]",2,811821,bb91677cf7006fc5310bad826dad2570873b6d70,7,2,1,4690,,,0,"Add functional regression test for bug 1853009

Bug 1853009 describes a race condition involving multiple nova-compute
services with ironic. As the compute services start up, the hash ring
rebalances, and the compute services have an inconsistent view of which
is responsible for a compute node.

The sequence of actions here is adapted from a real world log [1], where
multiple nova-compute services were started simultaneously. In some
cases mocks are used to simulate race conditions.

There are three main issues with the behaviour:

* host2 deletes the orphan node compute node after host1 has taken
  ownership of it.

* host1 assumes that another compute service will not delete its nodes.
  Once a node is in rt.compute_nodes, it is not removed again unless the
  node is orphaned. This prevents host1 from recreating the compute
  node.

* host1 assumes that another compute service will not delete its
  resource providers. Once an RP is in the provider tree, it is not
  removed.

This functional test documents the current behaviour, with the idea that
it can be updated as this behaviour is fixed.

[1] http://paste.openstack.org/show/786272/

Co-Authored-By: Matt Riedemann <mriedem.os@gmail.com>

Change-Id: Ice4071722de54e8d20bb8c3795be22f1995940cd
Related-Bug: #1853009
Related-Bug: #1853159
(cherry picked from commit 59d9871e8a0672538f8ffc43ae99b3d1c4b08909)
(cherry picked from commit c260e75d012cc4fae596d5de185afad6fb24068c)
(cherry picked from commit 34d5bca6bc612f41ac3fc33447cd2ba83bf446ba)
(cherry picked from commit f57c4965eef8e25656635897f46dccfe23c3fa5c)
",git fetch https://review.opendev.org/openstack/nova refs/changes/21/811821/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1853009.py'],1,bb91677cf7006fc5310bad826dad2570873b6d70,bug/1853009,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import mock from nova import context from nova import objects from nova.tests.functional import integrated_helpers class NodeRebalanceDeletedComputeNodeRaceTestCase( integrated_helpers.ProviderUsageBaseTestCase, ): """"""Regression test for bug 1853009 observed in Rocky & later. When an ironic node re-balances from one host to another, there can be a race where the old host deletes the orphan compute node after the new host has taken ownership of it which results in the new host failing to create the compute node and resource provider because the ResourceTracker does not detect a change. """""" # Make sure we're using the fake driver that has predictable uuids # for each node. compute_driver = 'fake.PredictableNodeUUIDDriver' def _assert_hypervisor_api(self, nodename, expected_host): # We should have one compute node shown by the API. hypervisors = self.api.api_get( '/os-hypervisors/detail' ).body['hypervisors'] self.assertEqual(1, len(hypervisors), hypervisors) hypervisor = hypervisors[0] self.assertEqual(nodename, hypervisor['hypervisor_hostname']) self.assertEqual(expected_host, hypervisor['service']['host']) def _start_compute(self, host): host = self.start_service('compute', host) # Ironic compute driver has rebalances_nodes = True. host.manager.driver.rebalances_nodes = True return host def setUp(self): super(NodeRebalanceDeletedComputeNodeRaceTestCase, self).setUp() self.nodename = 'fake-node' self.ctxt = context.get_admin_context() def test_node_rebalance_deleted_compute_node_race(self): # Simulate a service running and then stopping. host_a runs, creates # fake-node, then is stopped. The fake-node compute node is destroyed. # This leaves a soft-deleted node in the DB. host_a = self._start_compute('host_a') host_a.manager.driver._set_nodes([self.nodename]) host_a.manager.update_available_resource(self.ctxt) host_a.stop() cn = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_a', self.nodename, ) cn.destroy() self.assertEqual(0, len(objects.ComputeNodeList.get_all(self.ctxt))) # Now we create a new compute service to manage our node. host_b = self._start_compute('host_b') host_b.manager.driver._set_nodes([self.nodename]) # When start_service runs, it will create a host_b ComputeNode. We want # to delete that and inject our fake node into the driver which will # be re-balanced to another host later. First assert this actually # exists. self._assert_hypervisor_api('host_b', expected_host='host_b') # Now run the update_available_resource periodic to register fake-node # and have it managed by host_b. This will also detect the ""host_b"" # node as orphaned and delete it along with its resource provider. cn_host_b_node = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_b', 'host_b', ) # host_b[1]: Finds no compute record in RT. Tries to create one # (_init_compute_node). # FIXME(mgoddard): This shows a traceback with SQL rollback due to # soft-deleted node. The create seems to succeed but breaks the RT # update for this node. See # https://bugs.launchpad.net/nova/+bug/1853159. host_b.manager.update_available_resource(self.ctxt) self.assertIn( 'Deleting orphan compute node %s hypervisor host ' 'is host_b, nodes are' % cn_host_b_node.id, self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, expected_host='host_b') # There should only be one resource provider (fake-node). original_rps = self._get_all_providers() self.assertEqual(1, len(original_rps), original_rps) self.assertEqual(self.nodename, original_rps[0]['name']) # Simulate a re-balance by restarting host_a and make it manage # fake-node. At this point both host_b and host_a think they own # fake-node. host_a = self._start_compute('host_a') host_a.manager.driver._set_nodes([self.nodename]) # host_a[1]: Finds no compute record in RT, 'moves' existing node from # host_b host_a.manager.update_available_resource(self.ctxt) # Assert that fake-node was re-balanced from host_b to host_a. self.assertIn( 'ComputeNode fake-node moving from host_b to host_a', self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, expected_host='host_a') # host_a[2]: Begins periodic update, queries compute nodes for this # host, finds the fake-node. cn = objects.ComputeNode.get_by_host_and_nodename( self.ctxt, 'host_a', self.nodename, ) # host_b[2]: Finds no compute record in RT, 'moves' existing node from # host_a host_b.manager.update_available_resource(self.ctxt) # Assert that fake-node was re-balanced from host_a to host_b. self.assertIn( 'ComputeNode fake-node moving from host_a to host_b', self.stdlog.logger.output) self._assert_hypervisor_api(self.nodename, expected_host='host_b') # Complete rebalance, as host_a realises it does not own fake-node. host_a.manager.driver._set_nodes([]) # host_a[2]: Deletes orphan compute node. # Mock out the compute node query to simulate a race condition where # the list includes an orphan compute node that is newly owned by # host_b by the time host_a attempts to delete it. # FIXME(mgoddard): Ideally host_a would not delete a node that does not # belong to it. See https://bugs.launchpad.net/nova/+bug/1853009. with mock.patch( 'nova.compute.manager.ComputeManager._get_compute_nodes_in_db' ) as mock_get: mock_get.return_value = [cn] host_a.manager.update_available_resource(self.ctxt) # Verify that the node was deleted. self.assertIn( 'Deleting orphan compute node %s hypervisor host ' 'is fake-node, nodes are' % cn.id, self.stdlog.logger.output) hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # host_b[3]: Should recreate compute node and resource provider. # FIXME(mgoddard): Compute node not recreated here, because it is # already in RT.compute_nodes. See # https://bugs.launchpad.net/nova/+bug/1853009. # FIXME(mgoddard): Resource provider not recreated here, because it # exists in the provider tree. See # https://bugs.launchpad.net/nova/+bug/1841481. host_b.manager.update_available_resource(self.ctxt) # Verify that the node was not recreated. hypervisors = self.api.api_get( '/os-hypervisors/detail').body['hypervisors'] self.assertEqual(0, len(hypervisors), hypervisors) # But the compute node exists in the RT. self.assertIn(self.nodename, host_b.manager.rt.compute_nodes) # There is no RP. rps = self._get_all_providers() self.assertEqual(0, len(rps), rps) # But the RP exists in the provider tree. self.assertTrue(host_b.manager.rt.reportclient._provider_tree.exists( self.nodename)) # This fails due to the lack of a resource provider. self.assertIn( 'Skipping removal of allocations for deleted instances', self.stdlog.logger.output) ",,190,0
openstack%2Fnova~796863,openstack/nova,stable/train,Idf4650f36952331f02d7512580c21451f3ee3b63,Allow X-OpenStack-Nova-API-Version header in CORS,ABANDONED,2021-06-17 14:07:02.000000000,2023-09-01 16:59:07.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-17 14:07:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7a9b3557ad2393dc0d659ab4d94d4da1c79b17d6', 'message': ""Allow X-OpenStack-Nova-API-Version header in CORS\n\nBy default, we don't currently allow the Nova microversion\nheader for CORS requests.  It should be something that is\nincluded out of the box because it's part of the core API.\n\nDeployers can workaround this by overriding allow_headers,\nbut we should provide a better experience out of the box.\n\nCloses-Bug: #1931908\nChange-Id: Idf4650f36952331f02d7512580c21451f3ee3b63\n(cherry picked from commit b02a95a18b5da37db6d4f30a5dea07e2a4187245)\n""}, {'number': 2, 'created': '2021-09-08 13:39:30.000000000', 'files': ['nova/middleware.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c5a4ea70ffee3ce0429f77a30bc34a54156ef674', 'message': ""Allow X-OpenStack-Nova-API-Version header in CORS\n\nBy default, we don't currently allow the Nova microversion\nheader for CORS requests.  It should be something that is\nincluded out of the box because it's part of the core API.\n\nDeployers can workaround this by overriding allow_headers,\nbut we should provide a better experience out of the box.\n\nCloses-Bug: #1931908\nChange-Id: Idf4650f36952331f02d7512580c21451f3ee3b63\n(cherry picked from commit b02a95a18b5da37db6d4f30a5dea07e2a4187245)\n(cherry picked from commit e045d0115dfe3f4a4776c9d82af46cddded83e7c)\n(cherry picked from commit 6305ae491e86ee1a408213da9d89d5cdecbaa869)\n(cherry picked from commit d68a3f3b83964b5bd0152a3fa8f72610df17da91)\n""}]",0,796863,c5a4ea70ffee3ce0429f77a30bc34a54156ef674,13,2,2,1004,,,0,"Allow X-OpenStack-Nova-API-Version header in CORS

By default, we don't currently allow the Nova microversion
header for CORS requests.  It should be something that is
included out of the box because it's part of the core API.

Deployers can workaround this by overriding allow_headers,
but we should provide a better experience out of the box.

Closes-Bug: #1931908
Change-Id: Idf4650f36952331f02d7512580c21451f3ee3b63
(cherry picked from commit b02a95a18b5da37db6d4f30a5dea07e2a4187245)
(cherry picked from commit e045d0115dfe3f4a4776c9d82af46cddded83e7c)
(cherry picked from commit 6305ae491e86ee1a408213da9d89d5cdecbaa869)
(cherry picked from commit d68a3f3b83964b5bd0152a3fa8f72610df17da91)
",git fetch https://review.opendev.org/openstack/nova refs/changes/63/796863/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/middleware.py'],1,7a9b3557ad2393dc0d659ab4d94d4da1c79b17d6,bug/1931908," 'X-Tenant-Id', 'X-OpenStack-Nova-API-Version', 'OpenStack-API-Version'], 'X-Service-Token', 'X-OpenStack-Nova-API-Version', 'OpenStack-API-Version'],"," 'X-Tenant-Id'], 'X-Service-Token'],",6,2
openstack%2Fnova~785848,openstack/nova,stable/train,I2881d77d52bcbde9f3ac6a6ddfb4a22a9bd45c8a,api: Reject volume attach requests when an active bdm exists,ABANDONED,2021-04-12 10:40:00.000000000,2023-09-01 16:58:59.000000000,,"[{'_account_id': 10135}, {'_account_id': 11604}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-12 10:40:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f48f079959fcf6bc740237b99d74299724d81a11', 'message': 'api: Reject volume attach requests when an active bdm exists\n\nWhen attaching volumes to instances Nova has previously relied on checks\ncarried out by c-api to ensure that a single non-multiattach volume is\nnot attached to multiple instances at once. While this works well in\nmost cases it does not handle PEBKAC issues when admins reset the state\nof a volume to available, allowing users to request that Nova attach the\nvolume to another instance.\n\nThis change aims to address this by including a simple check in the\nattach flow for non-multiattach volumes ensuring that there are no\nexisting active block device mapping records for the volume already\npresent within Nova.\n\nConflicts:\n    nova/tests/functional/regressions/test_bug_1908075.py\n\nNOTE(lyarwood): Conflicts caused by changes made in\nI639dd5af7c039da546eaf9ccce56cbaaa38fa79a to allow the functional test\nto pass on stable/train.\n\nCloses-Bug: #1908075\nChange-Id: I2881d77d52bcbde9f3ac6a6ddfb4a22a9bd45c8a\n(cherry picked from commit 1252588d4e48da1d3a753639a8a4d937acf3e037)\n(cherry picked from commit 75cdbdd9c64353e8b73c36b184ea2140f0a4861d)\n(cherry picked from commit 3252399fc742994c37a6f9948a01c46cf59c5a2e)\n'}, {'number': 2, 'created': '2021-04-12 13:35:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/561f1037cc17d08f6859e66afc82a3cd6b0a696d', 'message': ""api: Reject volume attach requests when an active bdm exists\n\nWhen attaching volumes to instances Nova has previously relied on checks\ncarried out by c-api to ensure that a single non-multiattach volume is\nnot attached to multiple instances at once. While this works well in\nmost cases it does not handle PEBKAC issues when admins reset the state\nof a volume to available, allowing users to request that Nova attach the\nvolume to another instance.\n\nThis change aims to address this by including a simple check in the\nattach flow for non-multiattach volumes ensuring that there are no\nexisting active block device mapping records for the volume already\npresent within Nova.\n\nConflicts:\n    nova/tests/functional/regressions/test_bug_1908075.py\n\nNOTE(lyarwood): Conflicts caused by changes made in\nI639dd5af7c039da546eaf9ccce56cbaaa38fa79a to allow the functional test\nto pass on stable/train.\n\nNOTE(lyarwood): In addition to the conflicts the use of mypy is also\ndropped as this wasn't supported on py2.7 on stable/train.\n\nCloses-Bug: #1908075\nChange-Id: I2881d77d52bcbde9f3ac6a6ddfb4a22a9bd45c8a\n(cherry picked from commit 1252588d4e48da1d3a753639a8a4d937acf3e037)\n(cherry picked from commit 75cdbdd9c64353e8b73c36b184ea2140f0a4861d)\n(cherry picked from commit 3252399fc742994c37a6f9948a01c46cf59c5a2e)\n""}, {'number': 3, 'created': '2021-04-12 16:38:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/68a7db6be0b79980a16424cdbc2006c7d785f0ae', 'message': ""api: Reject volume attach requests when an active bdm exists\n\nWhen attaching volumes to instances Nova has previously relied on checks\ncarried out by c-api to ensure that a single non-multiattach volume is\nnot attached to multiple instances at once. While this works well in\nmost cases it does not handle PEBKAC issues when admins reset the state\nof a volume to available, allowing users to request that Nova attach the\nvolume to another instance.\n\nThis change aims to address this by including a simple check in the\nattach flow for non-multiattach volumes ensuring that there are no\nexisting active block device mapping records for the volume already\npresent within Nova.\n\nConflicts:\n    nova/tests/functional/regressions/test_bug_1908075.py\n\nNOTE(lyarwood): Conflicts caused by changes made in\nI639dd5af7c039da546eaf9ccce56cbaaa38fa79a to allow the functional test\nto pass on stable/train.\n\nNOTE(lyarwood): In addition to the conflicts the use of mypy is also\ndropped as this wasn't supported on py2.7 on stable/train.\n\nResolves: rhbz#1948515\nUpstream-Train: https://review.opendev.org/c/openstack/nova/+/785848\nCloses-Bug: #1908075\nChange-Id: I2881d77d52bcbde9f3ac6a6ddfb4a22a9bd45c8a\n(cherry picked from commit 1252588d4e48da1d3a753639a8a4d937acf3e037)\n(cherry picked from commit 75cdbdd9c64353e8b73c36b184ea2140f0a4861d)\n(cherry picked from commit 3252399fc742994c37a6f9948a01c46cf59c5a2e)\n""}, {'number': 4, 'created': '2021-04-20 08:24:27.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1908075.py', 'nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4423b212e74e9b2f39f96f16c96384bc4c449b86', 'message': ""api: Reject volume attach requests when an active bdm exists\n\nWhen attaching volumes to instances Nova has previously relied on checks\ncarried out by c-api to ensure that a single non-multiattach volume is\nnot attached to multiple instances at once. While this works well in\nmost cases it does not handle PEBKAC issues when admins reset the state\nof a volume to available, allowing users to request that Nova attach the\nvolume to another instance.\n\nThis change aims to address this by including a simple check in the\nattach flow for non-multiattach volumes ensuring that there are no\nexisting active block device mapping records for the volume already\npresent within Nova.\n\nConflicts:\n    nova/tests/functional/regressions/test_bug_1908075.py\n\nNOTE(lyarwood): Conflicts caused by changes made in\nI639dd5af7c039da546eaf9ccce56cbaaa38fa79a to allow the functional test\nto pass on stable/train.\n\nNOTE(lyarwood): In addition to the conflicts the use of mypy is also\ndropped as this wasn't supported on py2.7 on stable/train.\n\nCloses-Bug: #1908075\nChange-Id: I2881d77d52bcbde9f3ac6a6ddfb4a22a9bd45c8a\n(cherry picked from commit 1252588d4e48da1d3a753639a8a4d937acf3e037)\n(cherry picked from commit 75cdbdd9c64353e8b73c36b184ea2140f0a4861d)\n(cherry picked from commit 3252399fc742994c37a6f9948a01c46cf59c5a2e)\n""}]",2,785848,4423b212e74e9b2f39f96f16c96384bc4c449b86,18,3,4,10135,,,0,"api: Reject volume attach requests when an active bdm exists

When attaching volumes to instances Nova has previously relied on checks
carried out by c-api to ensure that a single non-multiattach volume is
not attached to multiple instances at once. While this works well in
most cases it does not handle PEBKAC issues when admins reset the state
of a volume to available, allowing users to request that Nova attach the
volume to another instance.

This change aims to address this by including a simple check in the
attach flow for non-multiattach volumes ensuring that there are no
existing active block device mapping records for the volume already
present within Nova.

Conflicts:
    nova/tests/functional/regressions/test_bug_1908075.py

NOTE(lyarwood): Conflicts caused by changes made in
I639dd5af7c039da546eaf9ccce56cbaaa38fa79a to allow the functional test
to pass on stable/train.

NOTE(lyarwood): In addition to the conflicts the use of mypy is also
dropped as this wasn't supported on py2.7 on stable/train.

Closes-Bug: #1908075
Change-Id: I2881d77d52bcbde9f3ac6a6ddfb4a22a9bd45c8a
(cherry picked from commit 1252588d4e48da1d3a753639a8a4d937acf3e037)
(cherry picked from commit 75cdbdd9c64353e8b73c36b184ea2140f0a4861d)
(cherry picked from commit 3252399fc742994c37a6f9948a01c46cf59c5a2e)
",git fetch https://review.opendev.org/openstack/nova refs/changes/48/785848/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/regressions/test_bug_1908075.py', 'nova/tests/unit/compute/test_compute_api.py', 'nova/compute/api.py']",3,f48f079959fcf6bc740237b99d74299724d81a11,bug/1908075," def _check_volume_already_attached( self, context: nova_context.RequestContext, volume_id: str ): """"""Avoid allowing a non-multiattach volumes being attached twice Unlike the above _check_volume_already_attached_to_instance check we also need to ensure that non-multiattached volumes are not attached to multiple instances. This check is also carried out later by c-api itself but it can however be circumvented by admins resetting the state of an attached volume to available. As a result we also need to perform a check within Nova before creating a new BDM for the attachment. """""" try: bdm = objects.BlockDeviceMapping.get_by_volume( context, volume_id) msg = _(""volume %(volume_id)s is already attached to instance "" ""%(instance_uuid)s"") % {'volume_id': volume_id, 'instance_uuid': bdm.instance_uuid} raise exception.InvalidVolume(reason=msg) except exception.VolumeBDMNotFound: pass # NOTE(lyarwood): Ensure that non multiattach volumes don't already # have active block device mappings present in Nova. # TODO(lyarwood): Merge this into the # _check_volume_already_attached_to_instance check once # BlockDeviceMappingList provides a list of active bdms per volume so # we can preform a single lookup for both checks. if not volume.get('multiattach', False): self._check_volume_already_attached(context, volume_id) ",,89,27
openstack%2Fnova~785847,openstack/nova,stable/train,I639dd5af7c039da546eaf9ccce56cbaaa38fa79a,Add regression test for bug #1908075,ABANDONED,2021-04-12 10:40:00.000000000,2023-09-01 16:58:53.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-04-12 10:40:00.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1908075.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/d19e1c26f3f9252d0d9a445a27e5d827f3496e15', 'message': 'Add regression test for bug #1908075\n\nNOTE(lyarwood): The following changes are required to allow the test to\npass on stable/train.\n\n- InstanceHelperMixin pulled in for access to a better\n  _build_minimal_create_server_request method\n- api_major_version defined in test class\n- Fake image service stubbed out directing in test class\n- A simple _create_server method is in-lined within the class\n\nRelated-Bug: #1908075\nChange-Id: I639dd5af7c039da546eaf9ccce56cbaaa38fa79a\n(cherry picked from commit ee3a8f02253f1f652785c07ea0be6464ab4bcc11)\n(cherry picked from commit 8e2a3dd2f08a2f0c420bc1da9c02ff6b128c06c5)\n(cherry picked from commit 92ee874947f745508bcd4636fc3f9551bde28b9e)\n'}]",0,785847,d19e1c26f3f9252d0d9a445a27e5d827f3496e15,5,1,1,10135,,,0,"Add regression test for bug #1908075

NOTE(lyarwood): The following changes are required to allow the test to
pass on stable/train.

- InstanceHelperMixin pulled in for access to a better
  _build_minimal_create_server_request method
- api_major_version defined in test class
- Fake image service stubbed out directing in test class
- A simple _create_server method is in-lined within the class

Related-Bug: #1908075
Change-Id: I639dd5af7c039da546eaf9ccce56cbaaa38fa79a
(cherry picked from commit ee3a8f02253f1f652785c07ea0be6464ab4bcc11)
(cherry picked from commit 8e2a3dd2f08a2f0c420bc1da9c02ff6b128c06c5)
(cherry picked from commit 92ee874947f745508bcd4636fc3f9551bde28b9e)
",git fetch https://review.opendev.org/openstack/nova refs/changes/47/785847/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1908075.py'],1,d19e1c26f3f9252d0d9a445a27e5d827f3496e15,bug/1908075,"# Copyright 2020, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import nova.tests.unit.image.fake from nova.tests import fixtures as nova_fixtures from nova.tests.functional import integrated_helpers class TestVolAttachCinderReset( integrated_helpers.InstanceHelperMixin, integrated_helpers._IntegratedTestBase ): """"""Regression test for bug 1908075. This regression test aims to assert if n-api allows a non-multiattached volume to be attached to multiple instances after an admin has forcibly reset the state of the volume in Cinder. """""" api_major_version = 'v2.1' microversion = 'latest' def setUp(self): super(TestVolAttachCinderReset, self).setUp() self.cinder = self.useFixture(nova_fixtures.CinderFixture(self)) self.fake_image_service =\ nova.tests.unit.image.fake.stub_out_image_service(self) self.image_uuid = list(self.fake_image_service.images)[0] def _create_server(self, name): server = self._build_minimal_create_server_request( self.api, name, image_uuid=self.image_uuid, networks='none') server = self.api.post_server({'server': server}) return self._wait_for_state_change(self.api, server, 'ACTIVE') def test_volume_attach_after_cinder_reset_state(self): volume_id = self.cinder.IMAGE_BACKED_VOL # Launch a server and attach a volume server_a = self._create_server('server_a') self.api.post_server_volume( server_a['id'], {'volumeAttachment': {'volumeId': volume_id}} ) # reset-state of the volume within the cinder fixture, we don't model # the state of the volume within the fixture so this will have to do. del self.cinder.volume_to_attachment[volume_id] self.assertNotIn( volume_id, self.cinder.volume_ids_for_instance(server_a['id'])) # Launch a second server and attempt to attach the same volume again server_b = self._create_server('server_b') # FIXME(lyarwood): n-api shouldn't accept this request as we already # have an active bdm record for this non-multiattach volume. self.api.post_server_volume( server_b['id'], {'volumeAttachment': {'volumeId': volume_id}} ) # Assert that we have bdms within Nova still for this attachment self.assertEqual( volume_id, self.api.get_server_volumes(server_a['id'])[0].get('volumeId')) self.assertEqual( volume_id, self.api.get_server_volumes(server_b['id'])[0].get('volumeId')) # Assert that the new attachment is the only one in the fixture self.assertIn( volume_id, self.cinder.volume_ids_for_instance(server_b['id'])) def test_volume_attach_after_cinder_reset_state_multiattach_volume(self): volume_id = self.cinder.MULTIATTACH_VOL # Launch a server and attach a volume server_a = self._create_server('server_a') self.api.post_server_volume( server_a['id'], {'volumeAttachment': {'volumeId': volume_id}} ) # reset-state of the volume within the cinder fixture, we don't model # the state of the volume within the fixture so this will have to do. del self.cinder.volume_to_attachment[volume_id] self.assertNotIn( volume_id, self.cinder.volume_ids_for_instance(server_a['id'])) # Launch a second server and attempt to attach the same volume again server_b = self._create_server('server_b') # NOTE(lyarwood): Unlike non-multiattach volumes this should always be # allowed as we can have multiple active bdms for multiattached volumes self.api.post_server_volume( server_b['id'], {'volumeAttachment': {'volumeId': volume_id}} ) # Assert that we have bdms within Nova still for this attachment self.assertEqual( volume_id, self.api.get_server_volumes(server_a['id'])[0].get('volumeId')) self.assertEqual( volume_id, self.api.get_server_volumes(server_b['id'])[0].get('volumeId')) # Assert that the new attachment is the only one in the fixture self.assertIn( volume_id, self.cinder.volume_ids_for_instance(server_b['id'])) ",,122,0
openstack%2Fnova~796938,openstack/nova,stable/train,I92e57aefeb909297cf3d4f566a3308aa9312bb02,Trival Change: Remove redundant code in instance delete,ABANDONED,2021-06-17 18:19:07.000000000,2023-09-01 16:58:47.000000000,,"[{'_account_id': 22348}, {'_account_id': 31412}]","[{'number': 1, 'created': '2021-06-17 18:19:07.000000000', 'files': ['nova/virt/libvirt/driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/fc87d7eb7cd9f257fbcd62d5c7aff110dbcc656e', 'message': 'Trival Change: Remove redundant code in instance delete\n\nChange-Id: I92e57aefeb909297cf3d4f566a3308aa9312bb02\n(cherry picked from commit 0be00cd58af97d6289bbfd19bdf1a2357383614d)\n(cherry picked from commit a1387297dcd956f870327b9415cf6ffbbc7f0da3)\n(cherry picked from commit 068cf11a764ddce5191514e16fe99369cd12b383)\n'}]",0,796938,fc87d7eb7cd9f257fbcd62d5c7aff110dbcc656e,8,2,1,10135,,,0,"Trival Change: Remove redundant code in instance delete

Change-Id: I92e57aefeb909297cf3d4f566a3308aa9312bb02
(cherry picked from commit 0be00cd58af97d6289bbfd19bdf1a2357383614d)
(cherry picked from commit a1387297dcd956f870327b9415cf6ffbbc7f0da3)
(cherry picked from commit 068cf11a764ddce5191514e16fe99369cd12b383)
",git fetch https://review.opendev.org/openstack/nova refs/changes/38/796938/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/virt/libvirt/driver.py'],1,fc87d7eb7cd9f257fbcd62d5c7aff110dbcc656e,bug/1905701,," disk_dev = vol['mount_device'] if disk_dev is not None: disk_dev = disk_dev.rpartition(""/"")[2]",0,3
openstack%2Fnova~794043,openstack/nova,stable/train,I66299e97bdb5b95e149b1780231a1c1bbdbd9865,hardware: Use image_meta.id within get_mem_encryption_constraint,ABANDONED,2021-06-01 20:50:26.000000000,2023-09-01 16:58:39.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-06-01 20:50:26.000000000', 'files': ['nova/tests/unit/virt/test_hardware.py', 'nova/virt/hardware.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/91ee5b3a844806cbd42a1cd8cca854904c6b9dcb', 'message': 'hardware: Use image_meta.id within get_mem_encryption_constraint\n\nThis change resolves bug #1928063 by replacing the use of\nimage_meta.name with image_meta.id as\nI55d66c3a6cbd50da90065f4a58f77b5cd29ce9ea should ensure it is always\navailable. The removal of other references to image_meta.name within\nvirt.hardware is left for follow ups to keep this change small and\nbackportable.\n\nNOTE(lyarwood): The functional test is dropped as part of the backport\nto stable/train as the dependency tree has grown too large and complex.\n\nConflicts:\n    nova/tests/functional/regressions/test_bug_1928063.py\n\nCloses-Bug: #1928063\nChange-Id: I66299e97bdb5b95e149b1780231a1c1bbdbd9865\n(cherry picked from commit e98994027f0af0b22277bcfaed4ab6e6f4a2c74e)\n(cherry picked from commit 625e4e0fab5a34aa9f0b2f4a94f1559362821a37)\n(cherry picked from commit 880a7d77a66f89ff9e95029c5f1f4a22bb5777b3)\n(cherry picked from commit fcec038c3b6e8cc457c4b7476d3ab06a1c569e93)\n'}]",0,794043,91ee5b3a844806cbd42a1cd8cca854904c6b9dcb,10,1,1,10135,,,0,"hardware: Use image_meta.id within get_mem_encryption_constraint

This change resolves bug #1928063 by replacing the use of
image_meta.name with image_meta.id as
I55d66c3a6cbd50da90065f4a58f77b5cd29ce9ea should ensure it is always
available. The removal of other references to image_meta.name within
virt.hardware is left for follow ups to keep this change small and
backportable.

NOTE(lyarwood): The functional test is dropped as part of the backport
to stable/train as the dependency tree has grown too large and complex.

Conflicts:
    nova/tests/functional/regressions/test_bug_1928063.py

Closes-Bug: #1928063
Change-Id: I66299e97bdb5b95e149b1780231a1c1bbdbd9865
(cherry picked from commit e98994027f0af0b22277bcfaed4ab6e6f4a2c74e)
(cherry picked from commit 625e4e0fab5a34aa9f0b2f4a94f1559362821a37)
(cherry picked from commit 880a7d77a66f89ff9e95029c5f1f4a22bb5777b3)
(cherry picked from commit fcec038c3b6e8cc457c4b7476d3ab06a1c569e93)
",git fetch https://review.opendev.org/openstack/nova refs/changes/43/794043/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/test_hardware.py', 'nova/virt/hardware.py']",2,91ee5b3a844806cbd42a1cd8cca854904c6b9dcb,bug/1928063, image_meta.id), image_meta.name),5,5
openstack%2Fnova~785064,openstack/nova,stable/train,I2bd360dcc6501feea7baf02d4510b282205fc061,Initialize global data separately and run_once in WSGI app init,ABANDONED,2021-04-06 22:28:45.000000000,2023-09-01 16:58:33.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2021-04-06 22:28:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c3669195b248239d65d7ed9dc0fff3b70c63b9b3', 'message': ""Initialize global data separately and run_once in WSGI app init\n\nWe have discovered that if an exception is raised at any point during\nthe running of the init_application WSGI script in an apache/mod_wsgi\nDaemon Mode environment, it will prompt apache/mod_wsgi to re-run the\nscript without starting a fresh python process. Because we initialize\nglobal data structures during app init, subsequent runs of the script\nblow up as some global data do *not* support re-initialization. It is\nanyway not safe to assume that init of global data is safe to run\nmultiple times.\n\nThis mod_wsgi behavior appears to be a special situation that does not\nbehave the same as a normal reload in Daemon Mode as the script file is\nbeing reloaded upon failure instead of the daemon process being\nshutdown and restarted as described in the documentation [1].\n\nIn order to handle this situation, we can move the initialization of\nglobal data structures to a helper method that is decorated to run only\nonce per python interpreter instance. This way, we will not attempt to\nre-initialize global data that are not safe to init more than once.\n\nCo-Authored-By: Michele Baldessari <michele@redhat.com>\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nCloses-Bug: #1882094\n\nNOTE(melwitt): The differences from the original change are because\nchange If5808075d853341bf274f35b7fcf0e0712f8f77a (trivial: Remove\n'run_once' helper) is not in Train.\n\n[1] https://modwsgi.readthedocs.io/en/develop/user-guides/reloading-source-code.html#reloading-in-daemon-mode\n\nChange-Id: I2bd360dcc6501feea7baf02d4510b282205fc061\n(cherry picked from commit 7c9edc02eda45aafbbb539b759e6b92f7aeb5ea8)\n(cherry picked from commit ac0b2900a3a75fee405d0d5ff6575a15910af5fe)\n(cherry picked from commit c621875c4f3f82fa79c93f13fa2302b3f5223548)\n""}, {'number': 2, 'created': '2021-04-06 22:56:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/82e1c64d78cd172d438474830aa69c63d774ac24', 'message': ""Initialize global data separately and run_once in WSGI app init\n\nWe have discovered that if an exception is raised at any point during\nthe running of the init_application WSGI script in an apache/mod_wsgi\nDaemon Mode environment, it will prompt apache/mod_wsgi to re-run the\nscript without starting a fresh python process. Because we initialize\nglobal data structures during app init, subsequent runs of the script\nblow up as some global data do *not* support re-initialization. It is\nanyway not safe to assume that init of global data is safe to run\nmultiple times.\n\nThis mod_wsgi behavior appears to be a special situation that does not\nbehave the same as a normal reload in Daemon Mode as the script file is\nbeing reloaded upon failure instead of the daemon process being\nshutdown and restarted as described in the documentation [1].\n\nIn order to handle this situation, we can move the initialization of\nglobal data structures to a helper method that is decorated to run only\nonce per python interpreter instance. This way, we will not attempt to\nre-initialize global data that are not safe to init more than once.\n\nCo-Authored-By: Michele Baldessari <michele@redhat.com>\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nCloses-Bug: #1882094\n\nNOTE(melwitt): The differences from the original change are because\nthe following changes are not in Train:\n\n  * Ie15ec8299ae52ae8f5334d591ed3944e9585cf71 (Prevent starting services\n    with older than N-1 computes)\n  * If5808075d853341bf274f35b7fcf0e0712f8f77a (trivial: Remove\n    'run_once' helper) is not in Train.\n\n[1] https://modwsgi.readthedocs.io/en/develop/user-guides/reloading-source-code.html#reloading-in-daemon-mode\n\nChange-Id: I2bd360dcc6501feea7baf02d4510b282205fc061\n(cherry picked from commit 7c9edc02eda45aafbbb539b759e6b92f7aeb5ea8)\n(cherry picked from commit ac0b2900a3a75fee405d0d5ff6575a15910af5fe)\n(cherry picked from commit c621875c4f3f82fa79c93f13fa2302b3f5223548)\n""}, {'number': 3, 'created': '2021-07-08 19:59:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/433dc51e75d25992d9de67f257a3bb97ef29e90f', 'message': ""Initialize global data separately and run_once in WSGI app init\n\nNOTE(melwitt): This is a combination of two changes to avoid\nintermittent test failure that was introduced by the original bug fix,\nand was fixed by change I2bd360dcc6501feea7baf02d4510b282205fc061.\n\nWe have discovered that if an exception is raised at any point during\nthe running of the init_application WSGI script in an apache/mod_wsgi\nDaemon Mode environment, it will prompt apache/mod_wsgi to re-run the\nscript without starting a fresh python process. Because we initialize\nglobal data structures during app init, subsequent runs of the script\nblow up as some global data do *not* support re-initialization. It is\nanyway not safe to assume that init of global data is safe to run\nmultiple times.\n\nThis mod_wsgi behavior appears to be a special situation that does not\nbehave the same as a normal reload in Daemon Mode as the script file is\nbeing reloaded upon failure instead of the daemon process being\nshutdown and restarted as described in the documentation [1].\n\nIn order to handle this situation, we can move the initialization of\nglobal data structures to a helper method that is decorated to run only\nonce per python interpreter instance. This way, we will not attempt to\nre-initialize global data that are not safe to init more than once.\n\nCo-Authored-By: Michele Baldessari <michele@redhat.com>\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nCloses-Bug: #1882094\n\nNOTE(melwitt): The differences from the original change are because\nthe following changes are not in Train:\n\n  * Ie15ec8299ae52ae8f5334d591ed3944e9585cf71 (Prevent starting services\n    with older than N-1 computes)\n  * If5808075d853341bf274f35b7fcf0e0712f8f77a (trivial: Remove\n    'run_once' helper)\n\n[1] https://modwsgi.readthedocs.io/en/develop/user-guides/reloading-source-code.html#reloading-in-daemon-mode\n\nReset global wsgi app state in unit test\n\nSince I2bd360dcc6501feea7baf02d4510b282205fc061 there is a global state\nset during the wsgi_app init making our unit test cases\nnon-deterministic based on the order of them. This patch makes sure\nthat the global state is reset for each test case.\n\nCloses-Bug: #1921098\n(cherry picked from commit bc2c19bb2db901af0c48d34fb15a335f4e343361)\n\nChange-Id: I2bd360dcc6501feea7baf02d4510b282205fc061\n(cherry picked from commit 7c9edc02eda45aafbbb539b759e6b92f7aeb5ea8)\n(cherry picked from commit e3085fa6310ddeaafa493c3f718aab0ce64f0994)\n(cherry picked from commit 59249697bf09ca1a560defdd550be7e3c439b5b7)\n""}, {'number': 4, 'created': '2021-07-08 21:01:36.000000000', 'files': ['nova/api/openstack/wsgi_app.py', 'nova/test.py', 'nova/tests/unit/api/openstack/test_wsgi_app.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/809c60704f983c0e5ebb73d0ff2d4393bda189e2', 'message': ""Initialize global data separately and run_once in WSGI app init\n\nNOTE(melwitt): This is a combination of two changes to avoid\nintermittent test failure that was introduced by the original bug fix,\nand was fixed by change I2bd360dcc6501feea7baf02d4510b282205fc061.\n\nWe have discovered that if an exception is raised at any point during\nthe running of the init_application WSGI script in an apache/mod_wsgi\nDaemon Mode environment, it will prompt apache/mod_wsgi to re-run the\nscript without starting a fresh python process. Because we initialize\nglobal data structures during app init, subsequent runs of the script\nblow up as some global data do *not* support re-initialization. It is\nanyway not safe to assume that init of global data is safe to run\nmultiple times.\n\nThis mod_wsgi behavior appears to be a special situation that does not\nbehave the same as a normal reload in Daemon Mode as the script file is\nbeing reloaded upon failure instead of the daemon process being\nshutdown and restarted as described in the documentation [1].\n\nIn order to handle this situation, we can move the initialization of\nglobal data structures to a helper method that is decorated to run only\nonce per python interpreter instance. This way, we will not attempt to\nre-initialize global data that are not safe to init more than once.\n\nCo-Authored-By: Michele Baldessari <michele@redhat.com>\nCo-Authored-By: melanie witt <melwittt@gmail.com>\n\nCloses-Bug: #1882094\n\nNOTE(melwitt): The differences from the original change are because\nthe following changes are not in Train:\n\n  * Ie15ec8299ae52ae8f5334d591ed3944e9585cf71 (Prevent starting services\n    with older than N-1 computes)\n  * If5808075d853341bf274f35b7fcf0e0712f8f77a (trivial: Remove\n    'run_once' helper)\n\n[1] https://modwsgi.readthedocs.io/en/develop/user-guides/reloading-source-code.html#reloading-in-daemon-mode\n\nReset global wsgi app state in unit test\n\nSince I2bd360dcc6501feea7baf02d4510b282205fc061 there is a global state\nset during the wsgi_app init making our unit test cases\nnon-deterministic based on the order of them. This patch makes sure\nthat the global state is reset for each test case.\n\nCloses-Bug: #1921098\n(cherry picked from commit bc2c19bb2db901af0c48d34fb15a335f4e343361)\n\nChange-Id: I2bd360dcc6501feea7baf02d4510b282205fc061\n(cherry picked from commit 7c9edc02eda45aafbbb539b759e6b92f7aeb5ea8)\n(cherry picked from commit e3085fa6310ddeaafa493c3f718aab0ce64f0994)\n(cherry picked from commit 59249697bf09ca1a560defdd550be7e3c439b5b7)\n""}]",1,785064,809c60704f983c0e5ebb73d0ff2d4393bda189e2,21,3,4,4690,,,0,"Initialize global data separately and run_once in WSGI app init

NOTE(melwitt): This is a combination of two changes to avoid
intermittent test failure that was introduced by the original bug fix,
and was fixed by change I2bd360dcc6501feea7baf02d4510b282205fc061.

We have discovered that if an exception is raised at any point during
the running of the init_application WSGI script in an apache/mod_wsgi
Daemon Mode environment, it will prompt apache/mod_wsgi to re-run the
script without starting a fresh python process. Because we initialize
global data structures during app init, subsequent runs of the script
blow up as some global data do *not* support re-initialization. It is
anyway not safe to assume that init of global data is safe to run
multiple times.

This mod_wsgi behavior appears to be a special situation that does not
behave the same as a normal reload in Daemon Mode as the script file is
being reloaded upon failure instead of the daemon process being
shutdown and restarted as described in the documentation [1].

In order to handle this situation, we can move the initialization of
global data structures to a helper method that is decorated to run only
once per python interpreter instance. This way, we will not attempt to
re-initialize global data that are not safe to init more than once.

Co-Authored-By: Michele Baldessari <michele@redhat.com>
Co-Authored-By: melanie witt <melwittt@gmail.com>

Closes-Bug: #1882094

NOTE(melwitt): The differences from the original change are because
the following changes are not in Train:

  * Ie15ec8299ae52ae8f5334d591ed3944e9585cf71 (Prevent starting services
    with older than N-1 computes)
  * If5808075d853341bf274f35b7fcf0e0712f8f77a (trivial: Remove
    'run_once' helper)

[1] https://modwsgi.readthedocs.io/en/develop/user-guides/reloading-source-code.html#reloading-in-daemon-mode

Reset global wsgi app state in unit test

Since I2bd360dcc6501feea7baf02d4510b282205fc061 there is a global state
set during the wsgi_app init making our unit test cases
non-deterministic based on the order of them. This patch makes sure
that the global state is reset for each test case.

Closes-Bug: #1921098
(cherry picked from commit bc2c19bb2db901af0c48d34fb15a335f4e343361)

Change-Id: I2bd360dcc6501feea7baf02d4510b282205fc061
(cherry picked from commit 7c9edc02eda45aafbbb539b759e6b92f7aeb5ea8)
(cherry picked from commit e3085fa6310ddeaafa493c3f718aab0ce64f0994)
(cherry picked from commit 59249697bf09ca1a560defdd550be7e3c439b5b7)
",git fetch https://review.opendev.org/openstack/nova refs/changes/64/785064/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/api/openstack/wsgi_app.py', 'nova/tests/unit/api/openstack/test_wsgi_app.py']",2,c3669195b248239d65d7ed9dc0fff3b70c63b9b3,bug/1882094,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import tempfile import fixtures import mock from oslo_config import fixture as config_fixture from oslotest import base from nova.api.openstack import wsgi_app from nova import test from nova.tests import fixtures as nova_fixtures class WSGIAppTest(base.BaseTestCase): _paste_config = """""" [app:nova-api] use = egg:Paste#static document_root = /tmp """""" def setUp(self): # Ensure BaseTestCase's ConfigureLogging fixture is disabled since # we're using our own (StandardLogging). with fixtures.EnvironmentVariable('OS_LOG_CAPTURE', '0'): super(WSGIAppTest, self).setUp() self.stdlog = self.useFixture(nova_fixtures.StandardLogging()) self.conf = tempfile.NamedTemporaryFile(mode='w+t') self.conf.write(self._paste_config.lstrip()) self.conf.seek(0) self.conf.flush() self.addCleanup(self.conf.close) # Use of this fixture takes care of cleaning up config settings for # subsequent tests. self.useFixture(config_fixture.Config()) @mock.patch('sys.argv', return_value=mock.sentinel.argv) @mock.patch('nova.db.sqlalchemy.api.configure') @mock.patch('nova.api.openstack.wsgi_app._setup_service') @mock.patch('nova.api.openstack.wsgi_app._get_config_files') def test_init_application_called_twice(self, mock_get_files, mock_setup, mock_db_configure, mock_argv): """"""Test that init_application can tolerate being called twice in a single python interpreter instance. When nova-api is run via mod_wsgi, if any exception is raised during init_application, mod_wsgi will re-run the WSGI script without restarting the daemon process even when configured for Daemon Mode. We access the database as part of init_application, so if nova-api starts up before the database is up, we'll get, for example, a DBConnectionError raised during init_application and our WSGI script will get reloaded/re-run by mod_wsgi. """""" mock_get_files.return_value = [self.conf.name] mock_setup.side_effect = [test.TestingException, None] # We need to mock the global database configure() method, else we will # be affected by global database state altered by other tests that ran # before this test, causing this test to fail with # oslo_db.sqlalchemy.enginefacade.AlreadyStartedError. We can instead # mock the method to raise an exception if it's called a second time in # this test to simulate the fact that the database does not tolerate # re-init [after a database query has been made]. mock_db_configure.side_effect = [None, test.TestingException] # Run init_application the first time, simulating an exception being # raised during it. self.assertRaises(test.TestingException, wsgi_app.init_application, 'nova-api') # Now run init_application a second time, it should succeed since no # exception is being raised (the init of global data should not be # re-attempted). wsgi_app.init_application('nova-api') self.assertIn('Global data already initialized, not re-initializing.', self.stdlog.logger.output) ",,107,2
openstack%2Fnova~795177,openstack/nova,stable/train,I8296e4be9f0706fab043451b856efadbb7bd41f6,Honor [neutron]http_retries in the manual client,ABANDONED,2021-06-07 20:20:53.000000000,2023-09-01 16:58:10.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-06-07 20:20:53.000000000', 'files': ['nova/network/neutronv2/api.py', 'nova/tests/unit/network/test_neutronv2.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/74e6c821fcb8f686a9b91c093b1db834b59c2856', 'message': 'Honor [neutron]http_retries in the manual client\n\nChange Ifb3afb13aff7e103c2e80ade817d0e63b624604a added a nova side\nconfig option for specifying neutron client retries that maps to the\nksa connect_retries config option to provide parity with the cinder and\nglance clients that have nova side config options.\n\nThat change missed passing CONF.neutron.http_retries to the manual\nclient used for calling the port binding API. This sets the\nconnect_retries attribute on the manual ksa client so http_retries\nwill be honored.\n\nCloses-Bug: #1929886\nRelated-Bug: #1866937\n\nChange-Id: I8296e4be9f0706fab043451b856efadbb7bd41f6\n(cherry picked from commit 56eb253e9febccf721df6bca4eb851ad26cb70a6)\n(cherry picked from commit 46aa3f4ec769e948d9eb73604bf9b66f4b0230b0)\n(cherry picked from commit f20346bc00a30c914cbefb48009db776f8e00b09)\n(cherry picked from commit b96f93ed8633d6fd0725c4a11366ffbf38056e65)\n'}]",0,795177,74e6c821fcb8f686a9b91c093b1db834b59c2856,9,2,1,4690,,,0,"Honor [neutron]http_retries in the manual client

Change Ifb3afb13aff7e103c2e80ade817d0e63b624604a added a nova side
config option for specifying neutron client retries that maps to the
ksa connect_retries config option to provide parity with the cinder and
glance clients that have nova side config options.

That change missed passing CONF.neutron.http_retries to the manual
client used for calling the port binding API. This sets the
connect_retries attribute on the manual ksa client so http_retries
will be honored.

Closes-Bug: #1929886
Related-Bug: #1866937

Change-Id: I8296e4be9f0706fab043451b856efadbb7bd41f6
(cherry picked from commit 56eb253e9febccf721df6bca4eb851ad26cb70a6)
(cherry picked from commit 46aa3f4ec769e948d9eb73604bf9b66f4b0230b0)
(cherry picked from commit f20346bc00a30c914cbefb48009db776f8e00b09)
(cherry picked from commit b96f93ed8633d6fd0725c4a11366ffbf38056e65)
",git fetch https://review.opendev.org/openstack/nova refs/changes/77/795177/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/network/neutronv2/api.py', 'nova/tests/unit/network/test_neutronv2.py']",2,74e6c821fcb8f686a9b91c093b1db834b59c2856,bug/1929886," kcl = neutronapi._get_ksa_client(my_context) self.assertEqual(retries, kcl.connect_retries)",,3,0
openstack%2Fnova~794042,openstack/nova,stable/train,I55d66c3a6cbd50da90065f4a58f77b5cd29ce9ea,image_meta: Provide image_ref as the id when fetching from instance,ABANDONED,2021-06-01 20:50:26.000000000,2023-09-01 16:58:03.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-06-01 20:50:26.000000000', 'files': ['nova/tests/unit/compute/test_compute_api.py', 'nova/tests/unit/virt/vmwareapi/test_driver_api.py', 'nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/unit/virt/libvirt/test_vif.py', 'nova/tests/unit/api/openstack/fakes.py', 'nova/tests/unit/virt/test_configdrive.py', 'nova/objects/image_meta.py', 'nova/tests/unit/objects/test_instance.py', 'nova/tests/unit/api/openstack/compute/test_server_actions.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/97ca8a8728250fe612f6fc9ecd29caa0e78e36c7', 'message': 'image_meta: Provide image_ref as the id when fetching from instance\n\nAt present various users of instance.image_meta expect it to be a fully\npopulated ImageMeta object. However when the instance is pulled from the\ndatabase the ImageMeta object is only partially populated via\ninstance.system_metadata with a limited set of attributes such as\nmin_ram, min_disk, disk_format and container_format. This can result in\nNotImplementedErrors being raised by o.vo as seen in bug #1928063 when\nan attempt is made to access common attributes such as id or name.\n\nTo avoid this the id is now provided by instance.image_ref when\navailable.\n\nThe majority of the change is test fallout and ensuring that valid UUIDs\nare provided as instance.image_ref and used by instance.image_meta.\n\nNOTE(lyarwood): Conflicts caused by\nI3eac9ac0a2a698a3c72b4e646cdcaf293ec4b057,\nI25eff0271c856a8d3e83867b448e1dec6f6732ab and\nI0b81282eba8238d8b64a67e38cf9d6392de1f85c not being present on\nstable/train.\n\nConflicts:\n  nova/tests/unit/api/openstack/compute/test_serversV21.py\n  nova/tests/unit/compute/test_compute_api.py\n  nova/tests/unit/virt/libvirt/test_driver.py\n\nRelated-Bug: #1928063\nChange-Id: I55d66c3a6cbd50da90065f4a58f77b5cd29ce9ea\n(cherry picked from commit 9d037f7d199443da0f2c6c1755704e589d52e730)\n(cherry picked from commit a2791fb5d2ae30d2861c2f04627eb48df01a30e7)\n(cherry picked from commit bc579db23a259dd0061fbba3f56655eea2b798e7)\n(cherry picked from commit b383f17dfbc2e7ff3fc099a5f276ae646ce0ece3)\n'}]",0,794042,97ca8a8728250fe612f6fc9ecd29caa0e78e36c7,6,1,1,10135,,,0,"image_meta: Provide image_ref as the id when fetching from instance

At present various users of instance.image_meta expect it to be a fully
populated ImageMeta object. However when the instance is pulled from the
database the ImageMeta object is only partially populated via
instance.system_metadata with a limited set of attributes such as
min_ram, min_disk, disk_format and container_format. This can result in
NotImplementedErrors being raised by o.vo as seen in bug #1928063 when
an attempt is made to access common attributes such as id or name.

To avoid this the id is now provided by instance.image_ref when
available.

The majority of the change is test fallout and ensuring that valid UUIDs
are provided as instance.image_ref and used by instance.image_meta.

NOTE(lyarwood): Conflicts caused by
I3eac9ac0a2a698a3c72b4e646cdcaf293ec4b057,
I25eff0271c856a8d3e83867b448e1dec6f6732ab and
I0b81282eba8238d8b64a67e38cf9d6392de1f85c not being present on
stable/train.

Conflicts:
  nova/tests/unit/api/openstack/compute/test_serversV21.py
  nova/tests/unit/compute/test_compute_api.py
  nova/tests/unit/virt/libvirt/test_driver.py

Related-Bug: #1928063
Change-Id: I55d66c3a6cbd50da90065f4a58f77b5cd29ce9ea
(cherry picked from commit 9d037f7d199443da0f2c6c1755704e589d52e730)
(cherry picked from commit a2791fb5d2ae30d2861c2f04627eb48df01a30e7)
(cherry picked from commit bc579db23a259dd0061fbba3f56655eea2b798e7)
(cherry picked from commit b383f17dfbc2e7ff3fc099a5f276ae646ce0ece3)
",git fetch https://review.opendev.org/openstack/nova refs/changes/42/794042/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_api.py', 'nova/tests/unit/virt/vmwareapi/test_driver_api.py', 'nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/unit/virt/libvirt/test_vif.py', 'nova/tests/unit/api/openstack/fakes.py', 'nova/tests/unit/virt/test_configdrive.py', 'nova/objects/image_meta.py', 'nova/tests/unit/objects/test_instance.py', 'nova/tests/unit/api/openstack/compute/test_server_actions.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",11,97ca8a8728250fe612f6fc9ecd29caa0e78e36c7,bug/1928063," instance_ref['image_ref'] = uuids.image_ref instance_ref['image_ref'] = uuids.image_ref instance_ref['image_ref'] = uuids.image_ref {'filename': imagecache.get_cache_fname(uuids.image_ref), self.assertEqual(wantFiles, gotFiles) instance_ref['image_ref'] = uuids.image_ref return_value={}) return_value={}) return_value={}) image_ref=uuids.image_ref) shelved_image_ref = uuids.shelved_image_ref self.inst['image_ref'] = ''"," instance_ref['image_ref'] = 1 instance_ref['image_ref'] = 'my_fake_image' instance_ref['image_ref'] = 1 {'filename': '356a192b7913b04c54574d18c28d46e6395428ab', self.assertEqual(gotFiles, wantFiles) instance_ref['image_ref'] = 1 return_value=None) return_value=None) return_value=None) image_ref='my_fake_image') shelved_image_ref = 'shelved_image_ref'",125,91
openstack%2Fnova~796939,openstack/nova,stable/train,I3d1b21ba6eb3f5eb728693197c24b4b315eef821,libvirt: Do not destroy volume secrets during _hard_reboot,ABANDONED,2021-06-17 18:19:07.000000000,2023-09-01 16:57:58.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-06-17 18:19:07.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/780f5e8b3df203795b73d7fb6d4c5092f596399e', 'message': ""libvirt: Do not destroy volume secrets during _hard_reboot\n\nIa2007bc63ef09931ea0197cef29d6a5614ed821a unfortunately missed that\nresume_state_on_host_boot calls down into _hard_reboot always removing\nvolume secrets rendering that change useless.\n\nThis change seeks to address this by using the destroy_secrets kwarg\nintroduced by I856268b371f7ba712b02189db3c927cd762a4dc3 within the\n_hard_reboot method of the libvirt driver to ensure secrets are not\nremoved during a hard reboot.\n\nThis resolves the original issue in bug #1905701 *and* allows admins to\nhard reboot a users instance when that instance has encrypted volumes\nattached with secrets stored in Barbican. This latter use case being\nsomething we can easily test within tempest unlike the compute reboot in\nbug #1905701.\n\nThis change is kept small as it should ideally be backported alongside\nIa2007bc63ef09931ea0197cef29d6a5614ed821a to stable/queens. Follow up\nchanges on master will improve formatting, doc text and introduce\nfunctional tests to further validate this new behaviour of hard reboot\nwithin the libvirt driver.\n\nNOTE(lyarwood): Conflict as I41b7c1653c6a887ee4b08e588c5d422409aebfba\nisn't present on stable/train.\n\nConflicts:\n  nova/tests/unit/virt/libvirt/test_driver.py\n\nCloses-Bug: #1905701\nChange-Id: I3d1b21ba6eb3f5eb728693197c24b4b315eef821\n(cherry picked from commit 26d65fc882e42b824409dff87ff026dee1debe20)\n(cherry picked from commit 9cac2a8822ab81b7a0aa1f5b4472b306e4b68f93)\n(cherry picked from commit ac3fc65f5ee62dd60525fce3e8b881e1389cca43)\n(cherry picked from commit 7a69f9800b97606cd05068d3ad4fc6d0061a7a55)\n""}]",0,796939,780f5e8b3df203795b73d7fb6d4c5092f596399e,6,1,1,10135,,,0,"libvirt: Do not destroy volume secrets during _hard_reboot

Ia2007bc63ef09931ea0197cef29d6a5614ed821a unfortunately missed that
resume_state_on_host_boot calls down into _hard_reboot always removing
volume secrets rendering that change useless.

This change seeks to address this by using the destroy_secrets kwarg
introduced by I856268b371f7ba712b02189db3c927cd762a4dc3 within the
_hard_reboot method of the libvirt driver to ensure secrets are not
removed during a hard reboot.

This resolves the original issue in bug #1905701 *and* allows admins to
hard reboot a users instance when that instance has encrypted volumes
attached with secrets stored in Barbican. This latter use case being
something we can easily test within tempest unlike the compute reboot in
bug #1905701.

This change is kept small as it should ideally be backported alongside
Ia2007bc63ef09931ea0197cef29d6a5614ed821a to stable/queens. Follow up
changes on master will improve formatting, doc text and introduce
functional tests to further validate this new behaviour of hard reboot
within the libvirt driver.

NOTE(lyarwood): Conflict as I41b7c1653c6a887ee4b08e588c5d422409aebfba
isn't present on stable/train.

Conflicts:
  nova/tests/unit/virt/libvirt/test_driver.py

Closes-Bug: #1905701
Change-Id: I3d1b21ba6eb3f5eb728693197c24b4b315eef821
(cherry picked from commit 26d65fc882e42b824409dff87ff026dee1debe20)
(cherry picked from commit 9cac2a8822ab81b7a0aa1f5b4472b306e4b68f93)
(cherry picked from commit ac3fc65f5ee62dd60525fce3e8b881e1389cca43)
(cherry picked from commit 7a69f9800b97606cd05068d3ad4fc6d0061a7a55)
",git fetch https://review.opendev.org/openstack/nova refs/changes/39/796939/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",2,780f5e8b3df203795b73d7fb6d4c5092f596399e,bug/1905701," # assert that no attempt to remove the secret is made when # destroy_secrets=False drvr._host.find_secret.reset_mock() drvr._host.delete_secret.reset_mock() drvr._disconnect_volume( self.context, connection_info, instance, encryption=encryption, destroy_secrets=False ) drvr._host.delete_secret.assert_not_called() @mock.patch('nova.virt.libvirt.host.Host.delete_secret') @mock.patch('nova.virt.libvirt.host.Host.find_secret', new=mock.Mock()) def test_detach_encryptor_skip_secret_removal(self, mock_delete_secret): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) drvr._detach_encryptor( self.context, { 'data': { 'volume_id': uuids.volume_id } }, None, destroy_secrets=False ) # Assert that no attempt is made to delete the volume secert mock_delete_secret.assert_not_called() drvr._detach_encryptor( self.context, { 'data': { 'volume_id': uuids.volume_id } }, None, destroy_secrets=True ) # Assert that volume secert is deleted mock_delete_secret.assert_called_once_with('volume', uuids.volume_id) network_info, None, False, destroy_secrets=True) network_info, None, False, destroy_secrets=True) block_device_info=block_device_info, destroy_secrets=False) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._disconnect_volume') @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._undefine_domain', new=mock.Mock()) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver._get_vpmems', new=mock.Mock(return_value=None)) def test_cleanup_destroy_secrets(self, mock_disconnect_volume): block_device_info = { 'block_device_mapping': [ { 'connection_info': mock.sentinel.connection_info } ] } instance = objects.Instance(self.context, **self.test_instance) drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI()) # Pass destroy_vifs=False and destroy_disks=False as we only care about # asserting the behaviour of destroy_secrets in this test. drvr.cleanup( self.context, instance, network_info={}, block_device_info=block_device_info, destroy_vifs=False, destroy_disks=False, destroy_secrets=False ) drvr.cleanup( self.context, instance, network_info={}, block_device_info=block_device_info, destroy_vifs=False, destroy_disks=False, ) # Assert that disconnect_volume is called with destroy_secrets=False # and destroy_secrets=True by default mock_disconnect_volume.assert_has_calls([ mock.call( self.context, mock.sentinel.connection_info, instance, destroy_secrets=False ), mock.call( self.context, mock.sentinel.connection_info, instance, destroy_secrets=True ) ]) "," network_info, None, False) network_info, None, False) block_device_info=block_device_info)",124,11
openstack%2Fnova~796935,openstack/nova,stable/train,I856268b371f7ba712b02189db3c927cd762a4dc3,virt: Add destroy_secrets kwarg to destroy and cleanup,ABANDONED,2021-06-17 18:19:07.000000000,2023-09-01 16:57:50.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-06-17 18:19:07.000000000', 'files': ['nova/virt/hyperv/driver.py', 'nova/virt/ironic/driver.py', 'nova/virt/libvirt/driver.py', 'nova/virt/xenapi/driver.py', 'nova/virt/fake.py', 'nova/virt/vmwareapi/driver.py', 'nova/virt/driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/2944675d63a796de8c60efdddfe55dfb4912451e', 'message': ""virt: Add destroy_secrets kwarg to destroy and cleanup\n\nThis change adds a simple optional kwarg to the virt driver signature of\ndestroy and cleanup to allow for callers to control when secrets should\nbe removed.\n\nNOTE(lyarwood): Conflict as Ia5892e1d2cb7c7685e104466f83df7bb00b168c0\nisn't present on stable/train.\n\nConflicts:\n  nova/virt/fake.py\n\nChange-Id: I856268b371f7ba712b02189db3c927cd762a4dc3\n(cherry picked from commit 1cc52fd2f22ec37194519e473c88260bf90a3c8c)\n(cherry picked from commit f2ba67184d3801fdca4a33aa744a3471bcd21de2)\n(cherry picked from commit f805779363b9933386eee4222de15466c547ba38)\n(cherry picked from commit 94dd3679f9a78f45edd11dd3d6bb2b3f4caec41b)\n""}]",0,796935,2944675d63a796de8c60efdddfe55dfb4912451e,6,1,1,10135,,,0,"virt: Add destroy_secrets kwarg to destroy and cleanup

This change adds a simple optional kwarg to the virt driver signature of
destroy and cleanup to allow for callers to control when secrets should
be removed.

NOTE(lyarwood): Conflict as Ia5892e1d2cb7c7685e104466f83df7bb00b168c0
isn't present on stable/train.

Conflicts:
  nova/virt/fake.py

Change-Id: I856268b371f7ba712b02189db3c927cd762a4dc3
(cherry picked from commit 1cc52fd2f22ec37194519e473c88260bf90a3c8c)
(cherry picked from commit f2ba67184d3801fdca4a33aa744a3471bcd21de2)
(cherry picked from commit f805779363b9933386eee4222de15466c547ba38)
(cherry picked from commit 94dd3679f9a78f45edd11dd3d6bb2b3f4caec41b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/35/796935/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/hyperv/driver.py', 'nova/virt/ironic/driver.py', 'nova/virt/libvirt/driver.py', 'nova/virt/xenapi/driver.py', 'nova/virt/fake.py', 'nova/virt/vmwareapi/driver.py', 'nova/virt/driver.py']",7,2944675d63a796de8c60efdddfe55dfb4912451e,bug/1905701," destroy_disks=True, destroy_secrets=True): :param destroy_secrets: Indicates if secrets should be destroyed destroy_disks=True, migrate_data=None, destroy_vifs=True, destroy_secrets=True): :param destroy_vifs: Indicates if vifs should be unplugged :param destroy_secrets: Indicates if secrets should be destroyed"," destroy_disks=True): destroy_disks=True, migrate_data=None, destroy_vifs=True):",26,13
openstack%2Fnova~802849,openstack/nova,stable/train,I2f9ad3df25306e070c8c3538bfed1212d6d8682f,Allow deletion of compute service with no compute nodes,ABANDONED,2021-07-29 09:01:01.000000000,2023-09-01 16:57:42.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-29 09:01:01.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_services.py', 'nova/api/openstack/compute/services.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e9ba530b5213c5e0992a2900cc03cf5e1e694f34', 'message': ""Allow deletion of compute service with no compute nodes\n\nConsider the following situation:\n\n- Using the Ironic virt driver\n- Replacing (so removing and re-adding) all baremetal nodes\n  associated with a single nova-compute service\n\nThe update resources periodic will have destroyed the compute node\nrecords because they're no longer being reported by the virt driver.\nIf we then attempt to manually delete the compute service record, the\ndatbase layer will raise an exception, as there are no longer any\ncompute node records for the host. Previously, this exception would\nget bubbled up as an error 500 in the API. This patch catches it and\nallows service deletion to complete succefully.\n\nCloses bug: 1860312\nChange-Id: I2f9ad3df25306e070c8c3538bfed1212d6d8682f\n(cherry picked from commit 880611df0b6b967adabd3f08886e385d0a100c5c)\n(cherry picked from commit df5158bf3f80fd4362725dc280de67b88ece9952)\n(cherry picked from commit e238cc9cd6ee7ba9d556c0c29f6f69dc3e3a7af9)\n(cherry picked from commit ced6595af4b73f24cfef66623bc3ad9a00091952)\n""}]",0,802849,e9ba530b5213c5e0992a2900cc03cf5e1e694f34,3,1,1,8864,,,0,"Allow deletion of compute service with no compute nodes

Consider the following situation:

- Using the Ironic virt driver
- Replacing (so removing and re-adding) all baremetal nodes
  associated with a single nova-compute service

The update resources periodic will have destroyed the compute node
records because they're no longer being reported by the virt driver.
If we then attempt to manually delete the compute service record, the
datbase layer will raise an exception, as there are no longer any
compute node records for the host. Previously, this exception would
get bubbled up as an error 500 in the API. This patch catches it and
allows service deletion to complete succefully.

Closes bug: 1860312
Change-Id: I2f9ad3df25306e070c8c3538bfed1212d6d8682f
(cherry picked from commit 880611df0b6b967adabd3f08886e385d0a100c5c)
(cherry picked from commit df5158bf3f80fd4362725dc280de67b88ece9952)
(cherry picked from commit e238cc9cd6ee7ba9d556c0c29f6f69dc3e3a7af9)
(cherry picked from commit ced6595af4b73f24cfef66623bc3ad9a00091952)
",git fetch https://review.opendev.org/openstack/nova refs/changes/49/802849/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/api/openstack/compute/test_services.py', 'nova/api/openstack/compute/services.py']",2,e9ba530b5213c5e0992a2900cc03cf5e1e694f34,bug/1860312," compute_nodes = [] try: compute_nodes = objects.ComputeNodeList.get_all_by_host( context, service.host) self._assert_no_in_progress_migrations( context, id, compute_nodes) except exception.ComputeHostNotFound: # NOTE(artom) Consider the following situation: # - Using the Ironic virt driver # - Replacing (so removing and re-adding) all baremetal # nodes associated with a single nova-compute service # The update resources periodic will have destroyed the # compute node records because they're no longer being # reported by the virt driver. If we then attempt to # manually delete the compute service record, # get_all_host() above will raise, as there are no longer # any compute node records for the host. Catch it here and # continue to allow compute service deletion. pass"," compute_nodes = objects.ComputeNodeList.get_all_by_host( context, service.host) self._assert_no_in_progress_migrations( context, id, compute_nodes)",20,9
openstack%2Fnova~802848,openstack/nova,stable/train,I03eec634b25582ec9643cacf3e5868c101176983,Reproducer unit test for bug 1860312,ABANDONED,2021-07-29 09:01:01.000000000,2023-09-01 16:57:35.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-29 09:01:01.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_services.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/538aeb98446e2230e44c579ed1f971fa7883826d', 'message': ""Reproducer unit test for bug 1860312\n\nConsider the following situation:\n\n- Using the Ironic virt driver\n- Replacing (so removing and re-adding) all baremetal nodes\n  associated with a single nova-compute service\n\nThe update resources periodic will have destroyed the compute node\nrecords because they're no longer being reported by the virt driver.\nIf we then attempt to manually delete the compute service record, the\ndatbase layer will raise an exception, as there are no longer any\ncompute node records for the host. This exception gets bubbled up as\nan error 500 in the API. This patch adds a unit test to demonstrate\nthis.\n\nRelated bug: 1860312\nChange-Id: I03eec634b25582ec9643cacf3e5868c101176983\n(cherry picked from commit 32257a2a6d159406577c885a9d7e366cbf0c72b9)\n(cherry picked from commit e6cd23c3b4928b421b8c706f9cc218020779e367)\n(cherry picked from commit 9efdd0b085733a0a4c4192aab8fc870c8aadf316)\n(cherry picked from commit 075817983ae2ab71e6fe0b539da67a768d109478)\n""}]",0,802848,538aeb98446e2230e44c579ed1f971fa7883826d,3,1,1,8864,,,0,"Reproducer unit test for bug 1860312

Consider the following situation:

- Using the Ironic virt driver
- Replacing (so removing and re-adding) all baremetal nodes
  associated with a single nova-compute service

The update resources periodic will have destroyed the compute node
records because they're no longer being reported by the virt driver.
If we then attempt to manually delete the compute service record, the
datbase layer will raise an exception, as there are no longer any
compute node records for the host. This exception gets bubbled up as
an error 500 in the API. This patch adds a unit test to demonstrate
this.

Related bug: 1860312
Change-Id: I03eec634b25582ec9643cacf3e5868c101176983
(cherry picked from commit 32257a2a6d159406577c885a9d7e366cbf0c72b9)
(cherry picked from commit e6cd23c3b4928b421b8c706f9cc218020779e367)
(cherry picked from commit 9efdd0b085733a0a4c4192aab8fc870c8aadf316)
(cherry picked from commit 075817983ae2ab71e6fe0b539da67a768d109478)
",git fetch https://review.opendev.org/openstack/nova refs/changes/48/802848/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/api/openstack/compute/test_services.py'],1,538aeb98446e2230e44c579ed1f971fa7883826d,bug/1860312," @mock.patch( 'nova.objects.ComputeNodeList.get_all_by_host', side_effect=exception.ComputeHostNotFound(host='fake-compute-host')) def test_services_delete_compute_host_not_found( self, mock_get_all_by_host): compute = objects.Service(self.ctxt, **{'host': 'fake-compute-host', 'binary': 'nova-compute', 'topic': 'compute', 'report_count': 0}) compute.create() # FIXME(artom) Until bug 1860312 is fixed, the ComputeHostNotFound # error will get bubbled up to the API as an error 500. self.assertRaises( webob.exc.HTTPInternalServerError, self.controller.delete, self.req, compute.id) mock_get_all_by_host.assert_called_with( self.req.environ['nova.context'], 'fake-compute-host') ",,19,0
openstack%2Fnova~802241,openstack/nova,stable/train,Iac0e634e66cd4e150a50935cf635f626fc11b70e,api: Align availability zone info with forced host,ABANDONED,2021-07-26 08:37:17.000000000,2023-09-01 16:57:28.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-07-26 08:37:17.000000000', 'files': ['nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/compute/api.py', 'nova/api/openstack/compute/servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/dac4c22ff519e5fd32202a4392a7e53fe3ed86ad', 'message': 'api: Align availability zone info with forced host\n\nUsers can create a server like so:\n\n  $ openstack server create --availability-zone az:host ...\n\nThis is a historical way to request that an instance be scheduled to a\nspecific host and it causes the scheduler to be bypassed. However, no\nvalidation of this availability zone-host combo takes place. The host\ncould in fact belong to a different availability zone. If it does, we\'ll\nend up in a very odd situation whereby the RequestSpec record for the\ninstance will record the availability zone requested by the user at\ncreate time, but the Instance record itself will record the availability\nzone of the host on which the instance was scheduled. This leads to even\nmore confusing behavior when we attempt to do something like live\nmigrate the instance since the RequestSpec record, with its original and\npossibly invalid availability zone information, is used. The\n\'AvailabilityZoneFilter\' will fail an error message like the following:\n\n  Availability Zone \'foo\' requested. ... has AZs: bar\n\nbut the \'openstack server list --long\' command will show a non-foo value\nfor the availability zone column.\n\nThe solution is simple: when given an availability zone-host combo, make\nsure the availability zone requested matches that of the host (or, more\nspecifically, the host is a member of the host aggregates that form the\navailability zone [1]). If not, simply ignore the requested availability\nzone information in favour of using the availability zone of the host,\nlogging a warning just for record keeping purposes. This is deemed\npreferable to failing with HTTP 400 (Bad Request) since what users are\nreally requesting by using this was to schedule to a specific host: the\navailability zone portion of the request is really irrelevant and just\nan artifact of this legacy mechanism to request hosts. If users wish to\ntruly validate a host-availability zone combo, they can use the \'host\'\nfield introduced in microversion 2.74 along with the \'availability_zone\'\nfield:\n\n  $ openstack server create --availability-zone az --host host ...\n\nConflicts:\n  nova/tests/unit/policies/test_servers.py\n\nNOTE(stephenfin): Conflicts are due to the absence of change\nI3fbb5c8a9cfe94b63fcffb8dfc6ee9065be1ba64 (""Add test coverage of\nexisting server policies"") which we don\'t need to backport here.\n\n[1] https://docs.openstack.org/nova/latest/admin/aggregates.html\n\nChange-Id: Iac0e634e66cd4e150a50935cf635f626fc11b70e\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nCloses-Bug: #1934770\n(cherry picked from commit 8f21ee42bd66b62e75e14acf4e91b786d78b9168)\n(cherry picked from commit 58782403cdaad33856fd59715525cee3c63ee3cf)\n(cherry picked from commit bf235c0ed0a1a867ab1b6e5ff34eaf7a8dee6c55)\n(cherry picked from commit 6ae2be6f6ebb47703159161df34abb57fe875ad2)\n'}]",0,802241,dac4c22ff519e5fd32202a4392a7e53fe3ed86ad,3,1,1,15334,,,0,"api: Align availability zone info with forced host

Users can create a server like so:

  $ openstack server create --availability-zone az:host ...

This is a historical way to request that an instance be scheduled to a
specific host and it causes the scheduler to be bypassed. However, no
validation of this availability zone-host combo takes place. The host
could in fact belong to a different availability zone. If it does, we'll
end up in a very odd situation whereby the RequestSpec record for the
instance will record the availability zone requested by the user at
create time, but the Instance record itself will record the availability
zone of the host on which the instance was scheduled. This leads to even
more confusing behavior when we attempt to do something like live
migrate the instance since the RequestSpec record, with its original and
possibly invalid availability zone information, is used. The
'AvailabilityZoneFilter' will fail an error message like the following:

  Availability Zone 'foo' requested. ... has AZs: bar

but the 'openstack server list --long' command will show a non-foo value
for the availability zone column.

The solution is simple: when given an availability zone-host combo, make
sure the availability zone requested matches that of the host (or, more
specifically, the host is a member of the host aggregates that form the
availability zone [1]). If not, simply ignore the requested availability
zone information in favour of using the availability zone of the host,
logging a warning just for record keeping purposes. This is deemed
preferable to failing with HTTP 400 (Bad Request) since what users are
really requesting by using this was to schedule to a specific host: the
availability zone portion of the request is really irrelevant and just
an artifact of this legacy mechanism to request hosts. If users wish to
truly validate a host-availability zone combo, they can use the 'host'
field introduced in microversion 2.74 along with the 'availability_zone'
field:

  $ openstack server create --availability-zone az --host host ...

Conflicts:
  nova/tests/unit/policies/test_servers.py

NOTE(stephenfin): Conflicts are due to the absence of change
I3fbb5c8a9cfe94b63fcffb8dfc6ee9065be1ba64 (""Add test coverage of
existing server policies"") which we don't need to backport here.

[1] https://docs.openstack.org/nova/latest/admin/aggregates.html

Change-Id: Iac0e634e66cd4e150a50935cf635f626fc11b70e
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Closes-Bug: #1934770
(cherry picked from commit 8f21ee42bd66b62e75e14acf4e91b786d78b9168)
(cherry picked from commit 58782403cdaad33856fd59715525cee3c63ee3cf)
(cherry picked from commit bf235c0ed0a1a867ab1b6e5ff34eaf7a8dee6c55)
(cherry picked from commit 6ae2be6f6ebb47703159161df34abb57fe875ad2)
",git fetch https://review.opendev.org/openstack/nova refs/changes/41/802241/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/api/openstack/compute/test_serversV21.py', 'nova/compute/api.py', 'nova/api/openstack/compute/servers.py']",3,dac4c22ff519e5fd32202a4392a7e53fe3ed86ad,bug/1934770," def _validate_host_availability_zone(context, availability_zone, host): """"""Ensure the host belongs in the availability zone. This is slightly tricky and it's probably worth recapping how host aggregates and availability zones are related before reading. Hosts can belong to zero or more host aggregates, but they will always belong to exactly one availability zone. If the user has set the availability zone key on one of the host aggregates that the host is a member of then the host will belong to this availability zone. If the user has not set the availability zone key on any of the host aggregates that the host is a member of or the host is not a member of any host aggregates, then the host will belong to the default availability zone. Setting the availability zone key on more than one of host aggregates that the host is a member of is an error and will be rejected by the API. Given the above, our host-availability zone check needs to vary behavior based on whether we're requesting the default availability zone or not. If we are not, then we simply ask ""does this host belong to a host aggregate and, if so, do any of the host aggregates have the requested availability zone metadata set"". By comparison, if we *are* requesting the default availability zone then we want to ask the inverse, or ""does this host not belong to a host aggregate or, if it does, is the availability zone information unset (or, naughty naughty, set to the default) for each of the host aggregates"". If both cases, if the answer is no then we warn about the mismatch and then use the actual availability zone of the host to avoid mismatches. :param context: The nova auth request context :param availability_zone: The name of the requested availability zone :param host: The name of the requested host :returns: The availability zone that should actually be used for the request """""" aggregates = objects.AggregateList.get_by_host(context, host=host) if not aggregates: # a host is assigned to the default availability zone if it is not # a member of any host aggregates if availability_zone == CONF.default_availability_zone: return availability_zone LOG.warning( ""Requested availability zone '%s' but forced host '%s' "" ""does not belong to any availability zones; ignoring "" ""requested availability zone to avoid bug #1934770"", availability_zone, host, ) return None # only one host aggregate will have the availability_zone field set so # use the first non-null value host_availability_zone = next( (a.availability_zone for a in aggregates if a.availability_zone), None, ) if availability_zone == host_availability_zone: # if there's an exact match, use what the user requested return availability_zone if ( availability_zone == CONF.default_availability_zone and host_availability_zone is None ): # special case the default availability zone since this won't (or # rather shouldn't) be explicitly stored on any host aggregate return availability_zone # no match, so use the host's availability zone information, if any LOG.warning( ""Requested availability zone '%s' but forced host '%s' "" ""does not belong to this availability zone; overwriting "" ""requested availability zone to avoid bug #1934770"", availability_zone, host, ) return None @staticmethod availability_zone = self._validate_host_availability_zone( context, availability_zone, host)",,214,25
openstack%2Fnova~802240,openstack/nova,stable/train,I7a563386bd2f5d1930b5eb2cfc00425a19747e24,Fix error that cannot overwrite policy rule for 'forced_host',ABANDONED,2021-07-26 08:37:17.000000000,2023-09-01 16:57:22.000000000,,"[{'_account_id': 22348}, {'_account_id': 23950}]","[{'number': 1, 'created': '2021-07-26 08:37:17.000000000', 'files': ['nova/api/openstack/compute/servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ec6db6efde6486b778c9a0477d31554feac38f79', 'message': ""Fix error that cannot overwrite policy rule for 'forced_host'\n\nWhen configure 'os_compute_api:servers:create:forced_host' to\n'rule:admin_or_owner', but still doesn't allow.\nIn nova/api/openstack/compute/servers.py#L669, the target is\nset to '{}' that is not equal None, so then it will not be set\nin nova/policy.py#L205.\nThis patch configures the target param.\n\nChange-Id: I7a563386bd2f5d1930b5eb2cfc00425a19747e24\nCloses-Bug: #1894975\n(cherry picked from commit fd99a7ca0f56223d878142a58525d9ed64c84ed1)\n(cherry picked from commit 35ec9357a1f249cc1309c92006a5a1f48a8ff025)\n""}]",0,802240,ec6db6efde6486b778c9a0477d31554feac38f79,4,2,1,15334,,,0,"Fix error that cannot overwrite policy rule for 'forced_host'

When configure 'os_compute_api:servers:create:forced_host' to
'rule:admin_or_owner', but still doesn't allow.
In nova/api/openstack/compute/servers.py#L669, the target is
set to '{}' that is not equal None, so then it will not be set
in nova/policy.py#L205.
This patch configures the target param.

Change-Id: I7a563386bd2f5d1930b5eb2cfc00425a19747e24
Closes-Bug: #1894975
(cherry picked from commit fd99a7ca0f56223d878142a58525d9ed64c84ed1)
(cherry picked from commit 35ec9357a1f249cc1309c92006a5a1f48a8ff025)
",git fetch https://review.opendev.org/openstack/nova refs/changes/40/802240/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/api/openstack/compute/servers.py'],1,ec6db6efde6486b778c9a0477d31554feac38f79,bug/1934770," context.can(server_policies.SERVERS % 'create:forced_host', target=target)"," context.can(server_policies.SERVERS % 'create:forced_host', {})",2,1
openstack%2Fnova~859434,openstack/nova,stable/train,I2c195df5fcf844c0587933b5b5995bdca1a3ebed,Fix unplugging VIF when migrate/resize VM,ABANDONED,2022-09-27 13:35:33.000000000,2023-09-01 16:56:41.000000000,,"[{'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 35349}]","[{'number': 1, 'created': '2022-09-27 13:35:33.000000000', 'files': ['releasenotes/notes/unplug-vifs-in-resize_instance-fcd98ea44e4b8725.yaml', 'nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e30d5343f3c711ef323885a21e7ac1170d2a5ccd', 'message': 'Fix unplugging VIF when migrate/resize VM\n\nWhen migrating/resizing VM to destination\nhost that has VIF type difference from source VIF\ntype, it fails due to exception in unplugging\nVIF on source host after user perform a confirmation\naction.\n\nThis change unplugs the vifs in resize_instance and\nwraps the call to unplug in confirm with an try except\nblock. the call to unplug_vifs in confirm is not removed\nto support rolling upgrades but a todo is added to remove\nit after the Wallaby release.\n\nChange-Id: I2c195df5fcf844c0587933b5b5995bdca1a3ebed\nCloses-Bug: #1895220\n(cherry picked from commit 66c7f00e1d9d7c0eebe46eb4b24b2b21f7413789)\n(cherry picked from commit 95614f600bdc09c2c96ca61a6e7e5d66cc93e9d7)\n    Conflicts:\n        nova/tests/unit/virt/libvirt/test_driver.py\n(cherry picked from commit bff5eb26737093851b08707c93704ddb09badf4d)\n    Conflicts:\n        nova/virt/libvirt/driver.py\n'}]",0,859434,e30d5343f3c711ef323885a21e7ac1170d2a5ccd,5,3,1,15554,,,0,"Fix unplugging VIF when migrate/resize VM

When migrating/resizing VM to destination
host that has VIF type difference from source VIF
type, it fails due to exception in unplugging
VIF on source host after user perform a confirmation
action.

This change unplugs the vifs in resize_instance and
wraps the call to unplug in confirm with an try except
block. the call to unplug_vifs in confirm is not removed
to support rolling upgrades but a todo is added to remove
it after the Wallaby release.

Change-Id: I2c195df5fcf844c0587933b5b5995bdca1a3ebed
Closes-Bug: #1895220
(cherry picked from commit 66c7f00e1d9d7c0eebe46eb4b24b2b21f7413789)
(cherry picked from commit 95614f600bdc09c2c96ca61a6e7e5d66cc93e9d7)
    Conflicts:
        nova/tests/unit/virt/libvirt/test_driver.py
(cherry picked from commit bff5eb26737093851b08707c93704ddb09badf4d)
    Conflicts:
        nova/virt/libvirt/driver.py
",git fetch https://review.opendev.org/openstack/nova refs/changes/34/859434/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/unplug-vifs-in-resize_instance-fcd98ea44e4b8725.yaml', 'nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",3,e30d5343f3c711ef323885a21e7ac1170d2a5ccd,bug/1895220," @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.unplug_vifs') @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.' '_get_instance_disk_info') mock_get_disk_info, mock_unplug_vifs, block_device_info=None, params_for_instance=None): """"""Test for nova.virt.libvirt.driver.LivirtConnection mock_unplug_vifs.assert_called_once() mock_unplug_vifs.reset_mock() mock_unplug_vifs.assert_called_once() @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.unplug_vifs', new=mock.Mock()) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.unplug_vifs', new=mock.Mock()) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.unplug_vifs', new=mock.Mock()) @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.unplug_vifs', new=mock.Mock()) def test_cleanup_resize_not_same_host_works_when_unplug_fails(self): CONF.set_override('policy_dirs', [], group='oslo_policy') host = 'not' + CONF.host instance = self._create_instance({'host': host}) instance.old_flavor = instance.flavor instance.new_flavor = instance.flavor fake_net = _fake_network_info(self) drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) with test.nested( mock.patch('nova.compute.utils.is_volume_backed_instance', return_value=False), mock.patch.object(os.path, 'exists'), mock.patch.object(libvirt_utils, 'get_instance_path'), mock.patch.object(shutil, 'rmtree'), mock.patch.object(drvr.image_backend, 'by_name', new_callable=mock.NonCallableMock), mock.patch.object(drvr, '_undefine_domain'), mock.patch.object(drvr, 'unplug_vifs'), mock.patch('nova.virt.libvirt.driver.LOG.debug') ) as (mock_volume_backed, mock_exists, mock_get_path, mock_rmtree, mock_image_by_name, mock_undef, mock_unplug, mock_log): mock_exists.return_value = True mock_get_path.return_value = '/fake/inst' error = exception.InternalError(""fake error"") mock_unplug.side_effect = error drvr._cleanup_resize(self.context, instance, fake_net) mock_get_path.assert_called_once_with(instance) self.assertEqual(5, mock_rmtree.call_count) mock_undef.assert_called_once_with(instance) mock_unplug.assert_called_once_with(instance, fake_net) mock_log.assert_called_once_with(error, instance=instance) @mock.patch('time.sleep', new=mock.Mock())"," @mock.patch(('nova.virt.libvirt.driver.LibvirtDriver.' '_get_instance_disk_info')) mock_get_disk_info, block_device_info=None, params_for_instance=None): """"""Test for nova.virt.libvirt.libvirt_driver.LivirtConnection",74,8
openstack%2Fnova~851861,openstack/nova,stable/train,If316c39b4916a7185a160fe6560d765bb9187ee2,DNM: test preinstall of python3-yaml,ABANDONED,2022-08-02 13:46:16.000000000,2023-09-01 16:56:32.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-08-02 13:46:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/dc78c24193222956bbcd0e911f98cd08672c0956', 'message': 'DNM: test preinstall of python3-yaml\n\nChange-Id: If316c39b4916a7185a160fe6560d765bb9187ee2\n'}, {'number': 2, 'created': '2022-08-02 14:06:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/de26f61394fffe5f09d028c7df92fe64b15d93d4', 'message': 'DNM: test preinstall of python3-yaml\n\nChange-Id: If316c39b4916a7185a160fe6560d765bb9187ee2\n'}, {'number': 3, 'created': '2022-08-16 12:25:14.000000000', 'files': ['.zuul.yaml', 'playbooks/legacy/nova-grenade-multinode/pre.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/7c434aca52942b8061624b6508135db59f7ca7c7', 'message': 'DNM: test preinstall of python3-yaml\n\nChange-Id: If316c39b4916a7185a160fe6560d765bb9187ee2\n'}]",0,851861,7c434aca52942b8061624b6508135db59f7ca7c7,9,1,3,17685,,,0,"DNM: test preinstall of python3-yaml

Change-Id: If316c39b4916a7185a160fe6560d765bb9187ee2
",git fetch https://review.opendev.org/openstack/nova refs/changes/61/851861/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'playbooks/legacy/nova-grenade-multinode/pre.yaml']",2,dc78c24193222956bbcd0e911f98cd08672c0956,,- hosts: primary tasks: - name: Preinstall python3-yaml apt: name: python3-yaml state: latest ,,8,43
openstack%2Fnova~779293,openstack/nova,stable/train,Ie15ec8299ae52ae8f5334d591ed3944e9585cf71,Warn when starting services with older than N-1 computes,ABANDONED,2021-03-08 16:42:41.000000000,2023-09-01 16:56:24.000000000,,"[{'_account_id': 9708}, {'_account_id': 10135}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-03-08 16:42:41.000000000', 'files': ['releasenotes/notes/warn-when-services-started-with-old-compute-fc80b4ff58a2aaea.yaml', 'nova/api/openstack/wsgi_app.py', 'nova/objects/service.py', 'nova/tests/unit/api/openstack/test_requestlog.py', 'nova/tests/unit/test_utils.py', 'nova/tests/unit/test_fixtures.py', 'nova/tests/functional/test_service.py', 'nova/service.py', 'nova/tests/unit/test_service.py', 'nova/exception.py', 'doc/source/contributor/ptl-guide.rst', 'nova/utils.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/e83e55328f189804357f6128158b12ab6fa5f765', 'message': ""Warn when starting services with older than N-1 computes\n\nNova services only support computes that are not older than\nthe previous major release. This patch introduces a check in the\nservice startup that warns at staring the service if too old computes\nare detected.\n\nThis is a partial backport from master. As we agreed on the Wallaby PTG\n[1] we would like to backport the check but we don't want to make it a\nhard failure of the service startup as that felt too harsh for a stable\nbranch. So this patch changes the behavior from hard failure to emitting\na warning in the log.\n\nThis commit also contains two bugfixes from master squashed into it to\navoid merging broken code:\n\n* Improve error handling during service level check\n  Change-Id: I89cdf3852266ed93a2ac7cd6261fe269932026ac\n  cherry picked from commit 3b44275868e08992a36e9163f533d689f27a0119\n\n* Restore retrying the RPC connection to conductor\n  Change-Id: Iad0ba1a02868eebc2f43b1ac843fcc5096cd5c47\n  cherry picked from commit 433bee58bc8d7d65edb6a0805021e51972e6bed6\n\nstable/ussuri specific change:\n* need to use six.text_type() instead of str() as we still support\n  python2.7\n\n[1] https://etherpad.opendev.org/p/nova-wallaby-ptg\n\nCloses-Bug: #1903545\nRelated-Bug: #1871482\nCloses-Bug: #1904181\n\nChange-Id: Ie15ec8299ae52ae8f5334d591ed3944e9585cf71\n(cherry picked from commit aa7c6f87699ec1340bd446a7d47e1453847a637f)\n(cherry picked from commit 0c5ca351e27ca74610478d8af9777de0db5c0acc)\n(cherry picked from commit 75bac345d5d579591f6f7f047f0c8f68b4e89002)\n""}]",2,779293,e83e55328f189804357f6128158b12ab6fa5f765,6,4,1,9708,,,0,"Warn when starting services with older than N-1 computes

Nova services only support computes that are not older than
the previous major release. This patch introduces a check in the
service startup that warns at staring the service if too old computes
are detected.

This is a partial backport from master. As we agreed on the Wallaby PTG
[1] we would like to backport the check but we don't want to make it a
hard failure of the service startup as that felt too harsh for a stable
branch. So this patch changes the behavior from hard failure to emitting
a warning in the log.

This commit also contains two bugfixes from master squashed into it to
avoid merging broken code:

* Improve error handling during service level check
  Change-Id: I89cdf3852266ed93a2ac7cd6261fe269932026ac
  cherry picked from commit 3b44275868e08992a36e9163f533d689f27a0119

* Restore retrying the RPC connection to conductor
  Change-Id: Iad0ba1a02868eebc2f43b1ac843fcc5096cd5c47
  cherry picked from commit 433bee58bc8d7d65edb6a0805021e51972e6bed6

stable/ussuri specific change:
* need to use six.text_type() instead of str() as we still support
  python2.7

[1] https://etherpad.opendev.org/p/nova-wallaby-ptg

Closes-Bug: #1903545
Related-Bug: #1871482
Closes-Bug: #1904181

Change-Id: Ie15ec8299ae52ae8f5334d591ed3944e9585cf71
(cherry picked from commit aa7c6f87699ec1340bd446a7d47e1453847a637f)
(cherry picked from commit 0c5ca351e27ca74610478d8af9777de0db5c0acc)
(cherry picked from commit 75bac345d5d579591f6f7f047f0c8f68b4e89002)
",git fetch https://review.opendev.org/openstack/nova refs/changes/93/779293/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/warn-when-services-started-with-old-compute-fc80b4ff58a2aaea.yaml', 'nova/api/openstack/wsgi_app.py', 'nova/objects/service.py', 'nova/tests/unit/api/openstack/test_requestlog.py', 'nova/tests/unit/test_utils.py', 'nova/tests/unit/test_fixtures.py', 'nova/tests/functional/test_service.py', 'nova/service.py', 'nova/tests/unit/test_service.py', 'nova/exception.py', 'doc/source/contributor/ptl-guide.rst', 'nova/utils.py']",12,e83e55328f189804357f6128158b12ab6fa5f765,bug/1904181," def raise_if_old_compute(): # to avoid circular imports from nova import context as nova_context from nova.objects import service ctxt = nova_context.get_admin_context() if CONF.api_database.connection is not None: scope = 'system' try: current_service_version = service.get_minimum_version_all_cells( ctxt, ['nova-compute']) except exception.DBNotAllowed: # This most likely means we are in a nova-compute service # which is configured with a connection to the API database. # We should not be attempting to ""get out"" of our cell to # look at the minimum versions of nova-compute services in other # cells, so DBNotAllowed was raised. Leave a warning message # and fall back to only querying computes in our cell. LOG.warning( 'This service is configured for access to the API database ' 'but is not allowed to directly access the database. You ' 'should run this service without the ' '[api_database]/connection config option. The service version ' 'check will only query the local cell.') scope = 'cell' current_service_version = service.Service.get_minimum_version( ctxt, 'nova-compute') else: scope = 'cell' # We in a cell so target our query to the current cell only current_service_version = service.Service.get_minimum_version( ctxt, 'nova-compute') if current_service_version == 0: # 0 means no compute in the system, # probably a fresh install before the computes are registered return oldest_supported_service_level = service.SERVICE_VERSION_ALIASES[ service.OLDEST_SUPPORTED_SERVICE_VERSION] if current_service_version < oldest_supported_service_level: raise exception.TooOldComputeService( oldest_supported_version=service.OLDEST_SUPPORTED_SERVICE_VERSION, scope=scope, min_service_level=current_service_version, oldest_supported_service=oldest_supported_service_level)",,244,1
openstack%2Fnova~836994,openstack/nova,stable/train,Ic0d6c59147abe5e094e8f13e0d3523b178daeba9,Store old_flavor already on source host during resize,ABANDONED,2022-04-07 15:55:33.000000000,2023-09-01 16:56:13.000000000,,"[{'_account_id': 6062}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 34325}]","[{'number': 1, 'created': '2022-04-07 15:55:33.000000000', 'files': ['nova/compute/manager.py', 'nova/tests/functional/libvirt/test_numa_servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/d779e46eef2474d2bed6865481af64176116ab0d', 'message': ""Store old_flavor already on source host during resize\n\nDuring resize, on the source host, in resize_instance(), the instance.host\nand .node is updated to point to the destination host. This indicates to\nthe source host's resource tracker that the allocation of this instance\ndoes not need to be tracked as an instance but as an outbound migration\ninstead. However for the source host's resource tracker to do that it,\nneeds to use the instance.old_flavor. Unfortunately the\ninstance.old_flavor is only set during finish_resize() on the\ndestination host. (resize_instance cast to the finish_resize). So it is\npossible that a running resize_instance() set the instance.host to point\nto the destination and then before the finish_resize could set the\nold_flavor an update_available_resources periodic runs on the source\nhost. This causes that the allocation of this instance is not tracked as\nan instance as the instance.host point to the destination but it is not\ntracked as a migration either as the instance.old_flavor is not yet set.\nSo the allocation on the source host is simply dropped by the periodic\njob.\n\nWhen such migration is confirmed the confirm_resize() tries to drop\nthe same resource allocation again but fails as the pinned CPUs of the\ninstance already freed.\n\nWhen such migration is reverted instead, then revert succeeds but the\nsource host resource allocation will not contain the resource allocation\nof the instance until the next update_available_resources periodic runs\nand corrects it.\n\nThis does not affect resources tracked exclusively in placement (e.g.\nVCPU, MEMORY_MB, DISK_GB) but it does affect NUMA related resource that\nare still tracked in the resource tracker (e.g. huge pages, pinned\nCPUs).\n\nThis patch moves the instance.old_flavor setting to the source node to\nthe same transaction that sets the instance.host to point to the\ndestination host. Hence solving the race condition.\n\nChange-Id: Ic0d6c59147abe5e094e8f13e0d3523b178daeba9\nCloses-Bug: #1944759\n(cherry picked from commit b841e553214be9a732703e2dfed6c97698ef9b71)\n(cherry picked from commit d4edcd62bae44c01885268a6cf7b7fae92617060)\n(cherry picked from commit c8b04d183f560a616a79577c4d4ae9465d03e541)\n(cherry picked from commit 34e0c0205b1053d3bbe064177740aba654997fe0)\n(cherry picked from commit daf4d622e87b2d76764faedac5b4885bf810ea68)\n""}]",1,836994,d779e46eef2474d2bed6865481af64176116ab0d,11,4,1,9708,,,0,"Store old_flavor already on source host during resize

During resize, on the source host, in resize_instance(), the instance.host
and .node is updated to point to the destination host. This indicates to
the source host's resource tracker that the allocation of this instance
does not need to be tracked as an instance but as an outbound migration
instead. However for the source host's resource tracker to do that it,
needs to use the instance.old_flavor. Unfortunately the
instance.old_flavor is only set during finish_resize() on the
destination host. (resize_instance cast to the finish_resize). So it is
possible that a running resize_instance() set the instance.host to point
to the destination and then before the finish_resize could set the
old_flavor an update_available_resources periodic runs on the source
host. This causes that the allocation of this instance is not tracked as
an instance as the instance.host point to the destination but it is not
tracked as a migration either as the instance.old_flavor is not yet set.
So the allocation on the source host is simply dropped by the periodic
job.

When such migration is confirmed the confirm_resize() tries to drop
the same resource allocation again but fails as the pinned CPUs of the
instance already freed.

When such migration is reverted instead, then revert succeeds but the
source host resource allocation will not contain the resource allocation
of the instance until the next update_available_resources periodic runs
and corrects it.

This does not affect resources tracked exclusively in placement (e.g.
VCPU, MEMORY_MB, DISK_GB) but it does affect NUMA related resource that
are still tracked in the resource tracker (e.g. huge pages, pinned
CPUs).

This patch moves the instance.old_flavor setting to the source node to
the same transaction that sets the instance.host to point to the
destination host. Hence solving the race condition.

Change-Id: Ic0d6c59147abe5e094e8f13e0d3523b178daeba9
Closes-Bug: #1944759
(cherry picked from commit b841e553214be9a732703e2dfed6c97698ef9b71)
(cherry picked from commit d4edcd62bae44c01885268a6cf7b7fae92617060)
(cherry picked from commit c8b04d183f560a616a79577c4d4ae9465d03e541)
(cherry picked from commit 34e0c0205b1053d3bbe064177740aba654997fe0)
(cherry picked from commit daf4d622e87b2d76764faedac5b4885bf810ea68)
",git fetch https://review.opendev.org/openstack/nova refs/changes/94/836994/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/compute/manager.py', 'nova/tests/functional/libvirt/test_numa_servers.py']",2,d779e46eef2474d2bed6865481af64176116ab0d,bug/1944759," # we have 2 cpus pinned on both computes. The source should have it # due to the outbound migration and the destination due to the # instance running there self._assert_pinned_cpus(src_host, 2) self.api.post_server_action(server['id'], post) self._wait_for_state_change(server, 'ACTIVE') # the resource allocation reflects that the VM is running on the dest # node # and running periodics does not break it either # After the revert the source host should have 2 cpus pinned due to # the instance. self._assert_pinned_cpus(src_host, 2) # running the periodic job will not break it either"," # This is a resource accounting bug, we should have 2 cpus pinned on # both computes. The source should have it due to the outbound # migration and the destination due to the instance running there self._assert_pinned_cpus(src_host, 0) # FIXME(gibi): This is bug 1944759 where during resize, on the source # node the resize_instance() call at the point of calling finish_resize # overlaps with a update_available_resources() periodic job. This # causes that the periodic job will not track the migration nor the # instance and therefore freeing the resource allocation. Then when # later the resize is confirmed the confirm_resize on the source # compute also wants to free up the resources, the pinned CPUs, and it # fails as they are already freed. exc = self.assertRaises( client.OpenStackApiException, self.api.post_server_action, server['id'], post ) self.assertEqual(500, exc.response.status_code) self.assertIn('CPUUnpinningInvalid', str(exc)) # confirm failed above but the resource allocation reflects that the # VM is running on the dest node # and such allocation situation is stable so as a recovery the VM # can be reset-state to ACTIVE without problem. # This is a resource accounting bug. After the revert the source host # should have 2 cpus pinned due to the instance. self._assert_pinned_cpus(src_host, 0) # running the periodic job will fix the resource accounting # this is now correct",25,27
openstack%2Fnova~843959,openstack/nova,stable/train,I3f1073d70e4332737e33f3c9c00cf129d0ef76b4,Add a regression test for bug 1939545,ABANDONED,2022-05-30 20:25:37.000000000,2023-09-01 16:56:06.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-05-30 20:25:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d0fd01b417a52b8ec8a555ba98c9fd8944983387', 'message': ""Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn't being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 57cab3144860b2a34b661dba8290b3687d9ce365)\n(cherry picked from commit 42a6589091b480578a9e2d79d7d3b64e57dca611)\n(cherry picked from commit 47938c4891a72373486b2357e005ba464f55c3ce)\n""}, {'number': 2, 'created': '2022-06-05 16:59:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7ddfa3be02cbc16abe4fd0598c9f4d92e92e456a', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Align how the compute service is started with fakelibvirt\'s HostInfo\n  with how it\'s done in stable/train, and add mocking to enable\n  starting of two services with different hostnames.\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 57cab3144860b2a34b661dba8290b3687d9ce365)\n(cherry picked from commit 79e7dc3889a1aea0c72838ffe22980004c6ee493)\n(cherry picked from commit d59e5b4e5f1e2d2de22ad67b2aea0c0e9a8c9d8b)\n'}, {'number': 3, 'created': '2022-06-05 19:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b5d6358012dcf9f96cb38afc0ad11786c20b84a3', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Align how the compute service is started with fakelibvirt\'s HostInfo\n  with how it\'s done in stable/train, and add mocking to enable\n  starting of two services with different hostnames.\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 57cab3144860b2a34b661dba8290b3687d9ce365)\n(cherry picked from commit 79e7dc3889a1aea0c72838ffe22980004c6ee493)\n(cherry picked from commit d59e5b4e5f1e2d2de22ad67b2aea0c0e9a8c9d8b)\n'}, {'number': 4, 'created': '2022-06-06 14:38:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9ec769ce007a640e1187aba2fb20ac98c70ea9ec', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Implement the _start_compute() helper from scratch in the libvirt\n  func tests base class. We could have inlined this in the new test,\n  but subsequent backports will need it.\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 57cab3144860b2a34b661dba8290b3687d9ce365)\n(cherry picked from commit 79e7dc3889a1aea0c72838ffe22980004c6ee493)\n(cherry picked from commit d59e5b4e5f1e2d2de22ad67b2aea0c0e9a8c9d8b)\n'}, {'number': 5, 'created': '2022-06-08 21:33:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/4e5c85bf627be41eeabe0cfe36a4344ca87ee89c', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Implement the _start_compute() helper from scratch in the libvirt\n  func tests base class. We could have inlined this in the new test,\n  but subsequent backports will need it.\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 57cab3144860b2a34b661dba8290b3687d9ce365)\n(cherry picked from commit 79e7dc3889a1aea0c72838ffe22980004c6ee493)\n(cherry picked from commit d59e5b4e5f1e2d2de22ad67b2aea0c0e9a8c9d8b)\n'}, {'number': 6, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9375bb391b25f4c9af66122467180c88fbb53c36', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 57cab3144860b2a34b661dba8290b3687d9ce365)\n(cherry picked from commit 79e7dc3889a1aea0c72838ffe22980004c6ee493)\n(cherry picked from commit d59e5b4e5f1e2d2de22ad67b2aea0c0e9a8c9d8b)\n'}, {'number': 7, 'created': '2022-06-17 17:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d516ddb68736fbc4800dbbc6599416c99abc1089', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 44ec33ded0f154e487c2ce1ec45509696fac806c)\n(cherry picked from commit 0de53e24739af7284327d9e0a79909bac7c7f9fa)\n(cherry picked from commit 7df4197482210ba0912a99d68ac5e6974ce96e3c)\n'}, {'number': 8, 'created': '2022-06-17 19:11:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/bd63c64e7d6ec033779c8e11663c8862a857be1f', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry-picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 093d8bc637d47f92cdba830cc71a8204b6e0bde7)\n(cherry picked from commit 4c599d0690e238c2b7224a28c54218d55e065e11)\n(cherry picked from commit 2f7b98861a387c1d90616899832ef7a9a0d92543)\n'}, {'number': 9, 'created': '2022-06-17 21:23:13.000000000', 'files': ['nova/tests/fixtures.py', 'nova/tests/functional/regressions/test_bug_1939545.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/fa69b4c438276ea1f03782b77afce0c8a5814201', 'message': 'Add a regression test for bug 1939545\n\nAssert the behaviour of the libvirt driver during pre_live_migration\nwith instances that have block based volumes attached.\n\nBug #1939545 covering the case where the returned path from os-brick\nisn\'t being saved into the connection_info of the associated bdm in\nNova.\n\nThe cinder fixture is extended as part of this change to offer\nconnection_info listing the iscsi volume type in order to correctly\nassert the behaviour of the associated libvirt volume driver.\n\nNOTE(artom) Changes to make this work on stable/train\n* Fix super() call to be correct for Python 2\n* Adjust usage of _wait_for_state_change() to match the stable/train\n  variant.\n* Do the live migration ""manually"", as the _live_migrate() does not\n  exist in stable/train.\n\nRelated-Bug: #1939545\nChange-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4\n(cherry picked from commit 268b7169554f871d3813d78e79861934d086484d)\n(cherry picked from commit 9f7b81c4cfe9f6a41fb28ec3b9d20616817ceab5)\n(cherry picked from commit 02854cc4458f1a68deaf840a49f7cab7aed0cb05)\n(cherry picked from commit 15bde1b68d10f940a349e46b4bd5abaafc5899ef)\n'}]",14,843959,fa69b4c438276ea1f03782b77afce0c8a5814201,35,2,9,8864,,,0,"Add a regression test for bug 1939545

Assert the behaviour of the libvirt driver during pre_live_migration
with instances that have block based volumes attached.

Bug #1939545 covering the case where the returned path from os-brick
isn't being saved into the connection_info of the associated bdm in
Nova.

The cinder fixture is extended as part of this change to offer
connection_info listing the iscsi volume type in order to correctly
assert the behaviour of the associated libvirt volume driver.

NOTE(artom) Changes to make this work on stable/train
* Fix super() call to be correct for Python 2
* Adjust usage of _wait_for_state_change() to match the stable/train
  variant.
* Do the live migration ""manually"", as the _live_migrate() does not
  exist in stable/train.

Related-Bug: #1939545
Change-Id: I3f1073d70e4332737e33f3c9c00cf129d0ef76b4
(cherry picked from commit 268b7169554f871d3813d78e79861934d086484d)
(cherry picked from commit 9f7b81c4cfe9f6a41fb28ec3b9d20616817ceab5)
(cherry picked from commit 02854cc4458f1a68deaf840a49f7cab7aed0cb05)
(cherry picked from commit 15bde1b68d10f940a349e46b4bd5abaafc5899ef)
",git fetch https://review.opendev.org/openstack/nova refs/changes/59/843959/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/fixtures.py', 'nova/tests/functional/regressions/test_bug_1939545.py']",2,d0fd01b417a52b8ec8a555ba98c9fd8944983387,bug/1939545,"# Copyright 2021, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import fixtures import mock from oslo_serialization import jsonutils from nova import context from nova import objects from nova.tests import fixtures as nova_fixtures from nova.tests.functional import integrated_helpers from nova.tests.functional.libvirt import base from nova.tests.unit.virt.libvirt import fakelibvirt from nova.tests.unit.virt.libvirt import fake_os_brick_connector class TestLiveMigrateUpdateDevicePath( base.ServersTestBase, integrated_helpers.InstanceHelperMixin ): """"""Regression test for bug 1939545 Assert the behaviour of the libvirt driver during pre_live_migration with instances that have block based volumes attached. Bug #1939545 covering the case where the returned path from os-brick isn't being saved into the connection_info of the associated bdm in Nova. """""" api_major_version = 'v2.1' microversion = 'latest' ADMIN_API = True def setUp(self): super().setUp() self.useFixture(fixtures.MonkeyPatch( 'nova.virt.libvirt.driver.connector', fake_os_brick_connector)) # TODO(lyarwood): Move into base.ServersTestBase to allow live # migrations to pass without changes by the test classes. self.useFixture(fixtures.MonkeyPatch( 'nova.tests.fixtures.libvirt.Domain.migrateToURI3', self._migrate_stub)) self.start_compute( hostname='src', host_info=fakelibvirt.HostInfo( cpu_nodes=1, cpu_sockets=1, cpu_cores=4, cpu_threads=1)) self.start_compute( hostname='dest', host_info=fakelibvirt.HostInfo( cpu_nodes=1, cpu_sockets=1, cpu_cores=4, cpu_threads=1)) def _migrate_stub(self, domain, destination, params, flags): dest = self.computes['dest'] dest.driver._host.get_connection().createXML( params['destination_xml'], 'fake-createXML-doesnt-care-about-flags') source = self.computes['src'] conn = source.driver._host.get_connection() dom = conn.lookupByUUIDString(self.server['id']) dom.complete_job() # TODO(lyarwood): Move this into the os-brick fixture and repeat for all # provided connectors at runtime. @mock.patch( 'os_brick.initiator.connectors.iscsi.ISCSIConnector.connect_volume') @mock.patch( 'os_brick.initiator.connectors.iscsi.ISCSIConnector.disconnect_volume') def test_live_migrate_update_device_path( self, mock_disconnect_volume, mock_connect_volume ): self.server = self._create_server(host='src', networks='none') volume_id = self.cinder.ISCSI_BACKED_VOL # TODO(lyarwood): As above, move this into the os-brick fixture. mock_connect_volume.return_value = {'path': '/dev/sda'} self.api.post_server_volume( self.server['id'], {'volumeAttachment': {'volumeId': volume_id}}) # Get the volume bdm and assert that the connection_info is set with # device_path from the volume driver. ctxt = context.get_admin_context() bdm = objects.BlockDeviceMapping.get_by_volume_and_instance( ctxt, volume_id, self.server['id']) connection_info = jsonutils.loads(bdm.connection_info) self.assertIn('device_path', connection_info.get('data')) # Live migrate the instance to another host self._live_migrate(self.server) # FIXME(lyarwood): This is bug #1939545, again get the volume bdm and # assert that the saved connection_info doesn't contain device_path. bdm = objects.BlockDeviceMapping.get_by_volume_and_instance( ctxt, volume_id, self.server['id']) connection_info = jsonutils.loads(bdm.connection_info) self.assertNotIn('device_path', connection_info.get('data')) ",,155,13
openstack%2Fnova~843960,openstack/nova,stable/train,Iea8896682fc28e3a5cd25afa45238272bee745e1,compute: Ensure updates to bdms during pre_live_migration are saved,ABANDONED,2022-05-30 20:25:37.000000000,2023-09-01 16:55:58.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-05-30 20:25:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c16cb9cc52ab35312ef724140916bf2d299dd174', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts:\n* nova/compute/manager.py\n  6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removed nova-net firewall\n  support in ussuri and changed the context around this change.\n* nova/tests/functional/compute/test_live_migration.py\n  2c949cb3eea9cd9282060da12d32771582953aa2 added Neutron live\n  migration tests in ussuri and changed the context around this\n  change.\n\nThis includes the following commits that were squashed into the\nprevious backports:\n\nfup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n\nfup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit 9ccd2bc36287e0cc217609c503d74bb036b9d93b)\n(cherry picked from commit d016f3b3539587e6c8230d26f03d4d82d634d5d0)\n(cherry picked from commit 5a70e92f577417e7b0c992d79fab3a4075fe59be)\n'}, {'number': 2, 'created': '2022-06-05 16:59:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7cc52ddbc2b1246617a7a3dfe344c18e93348ef3', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit aad7dabc5a9d790193d42b2155f186e7ec74a408)\n(cherry picked from commit 012c635a38c686b37456c1d86a58a1fc26fde9e2)\n(cherry picked from commit 8d1933a969a8b530e984b5781261e111c32587b6)\n'}, {'number': 3, 'created': '2022-06-05 19:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f3c5043da54ce8ea723a4410e8769769571dd3e6', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit aad7dabc5a9d790193d42b2155f186e7ec74a408)\n(cherry picked from commit 012c635a38c686b37456c1d86a58a1fc26fde9e2)\n(cherry picked from commit 8d1933a969a8b530e984b5781261e111c32587b6)\n'}, {'number': 4, 'created': '2022-06-06 14:38:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/50666a8beeffd66e485c00ab853edc1b34b2e22c', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit aad7dabc5a9d790193d42b2155f186e7ec74a408)\n(cherry picked from commit 012c635a38c686b37456c1d86a58a1fc26fde9e2)\n(cherry picked from commit 8d1933a969a8b530e984b5781261e111c32587b6)\n'}, {'number': 5, 'created': '2022-06-08 21:33:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a573bc9aaf8668e1474b6922fc6bc7b5ddd224a4', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit aad7dabc5a9d790193d42b2155f186e7ec74a408)\n(cherry picked from commit 012c635a38c686b37456c1d86a58a1fc26fde9e2)\n(cherry picked from commit 8d1933a969a8b530e984b5781261e111c32587b6)\n'}, {'number': 6, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/398ab575375c90f05bb98178fc50508073e18d51', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit aad7dabc5a9d790193d42b2155f186e7ec74a408)\n(cherry picked from commit 012c635a38c686b37456c1d86a58a1fc26fde9e2)\n(cherry picked from commit 8d1933a969a8b530e984b5781261e111c32587b6)\n'}, {'number': 7, 'created': '2022-06-17 17:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/50fd0f26468a1faa24d3774ba4ebd58458dd3b22', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit 1e819ad7245e8ef69fa4d5ef48453b895b453717)\n(cherry picked from commit e8974b27ac346c2b982f688371498f73875157ca)\n(cherry picked from commit 2157ac01516fe12079872684349e347759441257)\n'}, {'number': 8, 'created': '2022-06-17 19:11:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/cab47867d74b7d67e62ff9f98eef410ede7a2079', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit 573e767ea53a5077ac5cc56fff642d16b067947c)\n(cherry picked from commit f607260a6061e1867b1dcda7cf1ab3bd9b298d8d)\n(cherry picked from commit 459557d3089a677dc33cf9d689c326626b91937e)\n'}, {'number': 9, 'created': '2022-06-17 21:23:13.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/compute/manager.py', 'nova/tests/functional/regressions/test_bug_1939545.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/12d9f408b3147c50145c38000e9c26c156eeed12', 'message': 'compute: Ensure updates to bdms during pre_live_migration are saved\n\nWhen connecting volumes to the underlying host the virt drivers can\nattempt to stash additional metadata returned from os-brick into the\nconnection_info associated with a bdm. This pretty janky behaviour\nrelies on someone later calling .save() against the underlying\nBlockDeviceMapping object to persist these changes into the database as\nhappens in the driver block device layer during a standard volume\nattach.\n\nHowever during pre_live_migration no call was made to .save() resulting\nin the changes made to the connection_info being lost. This change\nsimply introduces this call at the end of the pre_live_migration method\non the destination via the driver bdm objects we provide in\nblock_device_info.\n\nConflicts in nova/compute/manager.py due to\n6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall\nsupport in ussuri and changing the context around this change.\n\nCloses-Bug: #1939545\nChange-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1\n(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)\n(cherry picked from commit 9bccc5a04354b0490fbe7e0f0b98cf55d4b7c9c4)\n(cherry picked from commit 911d1063e06684137952aec6b260cc54738ee5de)\n(cherry picked from commit caa6d8e0a21e9dd0e6de61acf974846f40323d9e)\n'}]",6,843960,12d9f408b3147c50145c38000e9c26c156eeed12,28,2,9,8864,,,0,"compute: Ensure updates to bdms during pre_live_migration are saved

When connecting volumes to the underlying host the virt drivers can
attempt to stash additional metadata returned from os-brick into the
connection_info associated with a bdm. This pretty janky behaviour
relies on someone later calling .save() against the underlying
BlockDeviceMapping object to persist these changes into the database as
happens in the driver block device layer during a standard volume
attach.

However during pre_live_migration no call was made to .save() resulting
in the changes made to the connection_info being lost. This change
simply introduces this call at the end of the pre_live_migration method
on the destination via the driver bdm objects we provide in
block_device_info.

Conflicts in nova/compute/manager.py due to
6af7c36ac737c4a5a5a16f01f91b6fd8f529feb7 removing nova-net firewall
support in ussuri and changing the context around this change.

Closes-Bug: #1939545
Change-Id: Iea8896682fc28e3a5cd25afa45238272bee745e1
(cherry picked from commit 962eda94d52321c3237da870c3d0455c6f0e851b)
(cherry picked from commit 9bccc5a04354b0490fbe7e0f0b98cf55d4b7c9c4)
(cherry picked from commit 911d1063e06684137952aec6b260cc54738ee5de)
(cherry picked from commit caa6d8e0a21e9dd0e6de61acf974846f40323d9e)
",git fetch https://review.opendev.org/openstack/nova refs/changes/60/843960/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/fixtures.py', 'nova/tests/functional/compute/test_live_migration.py', 'nova/compute/manager.py', 'nova/tests/functional/regressions/test_bug_1939545.py']",5,c16cb9cc52ab35312ef724140916bf2d299dd174,bug/1939545," # Again get the volume bdm and assert that the saved connection_info # contains device_path. self.assertIn('device_path', connection_info.get('data'))"," # FIXME(lyarwood): This is bug #1939545, again get the volume bdm and # assert that the saved connection_info doesn't contain device_path. self.assertNotIn('device_path', connection_info.get('data'))",191,15
openstack%2Fnova~844745,openstack/nova,stable/train,If1a45886adfc6448a626a54449ff66f400879b83,func: Add live migration rollback volume attachment tests,ABANDONED,2022-06-05 16:59:52.000000000,2023-09-01 16:55:50.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-06-05 16:59:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/e83643e80505e05cf7aede037c593cf6c6e0758e', 'message': 'func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n'}, {'number': 2, 'created': '2022-06-05 19:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/09ec6bda92d2b14f5a5795ed02cfd5d1bdbeadca', 'message': 'func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n'}, {'number': 3, 'created': '2022-06-05 21:13:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/53a8a07af3ea6ca9035574c643df2198cc709bf3', 'message': 'func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) A tiny manual change was needed to fix the way super() is\ncalled to match the Python 2 style.\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n'}, {'number': 4, 'created': '2022-06-06 14:38:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/384bd40a3811b3d39f45a3bf85db4f207d5365d2', 'message': 'func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) A tiny manual change was needed to fix the way super() is\ncalled to match the Python 2 style.\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n'}, {'number': 5, 'created': '2022-06-08 21:33:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a7a726d102b2c002e0120bb60efb55d31b4decf2', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style.\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 6, 'created': '2022-06-09 13:43:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a6a2bc0bf6768d0e1e0fe1fe9a006e94776dc28b', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style.\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 7, 'created': '2022-06-09 15:54:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b574d4e5953c88be4695db0eeb7f1a038078ada4', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style.\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 8, 'created': '2022-06-09 18:03:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/11f60b8f1853cdd53fc81c142ffc6c0f0c9fbf5f', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style.\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter to the new test class, needed by the\n  stable/train version of the _build_server() helper.\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 9, 'created': '2022-06-09 18:53:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d63b2e11c82c1821ce45c09b523917f13ec3f222', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style.\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper.\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 10, 'created': '2022-06-10 00:45:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c23e4e0aa7c9f4a34d38df354fac0a6f0c28715c', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style.\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper.\n* make the new test class inherit from the InstanceHelperMixin, as\n  that's there the _wait_for_state_change() helper is in stable/train.\n* call _wait_for_state_change() in the stable/train fashion, passing\n  self.api in addition to the server and state.\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 11, 'created': '2022-06-10 09:48:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a7b54e06a48fdb7d89985089b628cd66b4ab2c18', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper\n* make the new test class inherit from the InstanceHelperMixin, as\n  that's there the _wait_for_state_change() helper is in stable/train\n* call _wait_for_state_change() in the stable/train fashion, passing\n  self.api in addition to the server and state\n* use the NeutronFixture explicitly\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 12, 'created': '2022-06-10 13:28:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/5d177b5f5e7b64e51b91e4d0bab5ad59e87c679e', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style\n* calls to the non-existent in stable/train_start_compute() helper\n  replaced with start_service('compute')\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper\n* make the new test class inherit from the InstanceHelperMixin, as\n  that's there the _wait_for_state_change() helper is in stable/train\n* call _wait_for_state_change() in the stable/train fashion, passing\n  self.api in addition to the server and state\n* declare USE_NEUTRON explicitly\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 13, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d23955613a7e1d134d843b6dc2ccaa38d48c83ad', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper\n* make the new test class inherit from the InstanceHelperMixin, as\n  that's there the _wait_for_state_change() helper is in stable/train\n* call _wait_for_state_change() in the stable/train fashion, passing\n  self.api in addition to the server and state\n* declare USE_NEUTRON explicitly\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 14, 'created': '2022-06-17 17:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f7edd86b3b01dc50cec0a6db461a8459d615cacd', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper\n* make the new test class inherit from the InstanceHelperMixin, as\n  that's there the _wait_for_state_change() helper is in stable/train\n* call _wait_for_state_change() in the stable/train fashion, passing\n  self.api in addition to the server and state\n* declare USE_NEUTRON explicitly\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 15, 'created': '2022-06-17 19:11:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b8435f9aca54a21d99cdec768b8ddccc22dbf356', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper\n* make the new test class inherit from the InstanceHelperMixin, as\n  that's there the _wait_for_state_change() helper is in stable/train\n* call _wait_for_state_change() in the stable/train fashion, passing\n  self.api in addition to the server and state\n* declare USE_NEUTRON explicitly\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}, {'number': 16, 'created': '2022-06-17 21:23:13.000000000', 'files': ['nova/tests/functional/compute/test_live_migration.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/13fe11120f4e6bc063587e26ddeec63dd4cb210d', 'message': ""func: Add live migration rollback volume attachment tests\n\nThis test asserts that the original source host volume attachments\nremain intact after a failure and rollback during the main live\nmigration flow on the virt driver.\n\nNOTE(artom) Changes for the cherry-pick:\n* a tiny manual change was needed to fix the way super() is called to\n  match the Python 2 style\n* add self.api_major_version to be compatible with stable/train\n  _setup_services()\n* adjust usage of the _builder_server() helper to be compatible with\n  the stable/train way\n* add self._image_ref_parameter and self._flavor_ref_parameter to the\n  new test class, needed by the stable/train version of the\n  _build_server() helper\n* make the new test class inherit from the InstanceHelperMixin, as\n  that's there the _wait_for_state_change() helper is in stable/train\n* call _wait_for_state_change() in the stable/train fashion, passing\n  self.api in addition to the server and state\n* declare USE_NEUTRON explicitly\n\nChange-Id: If1a45886adfc6448a626a54449ff66f400879b83\n(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)\n(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)\n""}]",2,844745,13fe11120f4e6bc063587e26ddeec63dd4cb210d,41,2,16,8864,,,0,"func: Add live migration rollback volume attachment tests

This test asserts that the original source host volume attachments
remain intact after a failure and rollback during the main live
migration flow on the virt driver.

NOTE(artom) Changes for the cherry-pick:
* a tiny manual change was needed to fix the way super() is called to
  match the Python 2 style
* add self.api_major_version to be compatible with stable/train
  _setup_services()
* adjust usage of the _builder_server() helper to be compatible with
  the stable/train way
* add self._image_ref_parameter and self._flavor_ref_parameter to the
  new test class, needed by the stable/train version of the
  _build_server() helper
* make the new test class inherit from the InstanceHelperMixin, as
  that's there the _wait_for_state_change() helper is in stable/train
* call _wait_for_state_change() in the stable/train fashion, passing
  self.api in addition to the server and state
* declare USE_NEUTRON explicitly

Change-Id: If1a45886adfc6448a626a54449ff66f400879b83
(cherry picked from commit e6c2a863286bae6a8a8caff0d6a54c001e0a2ffb)
(cherry picked from commit 6070c55793d184bb3484b6af8ccadded0a907cbb)
",git fetch https://review.opendev.org/openstack/nova refs/changes/45/844745/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/compute/test_live_migration.py'],1,e83643e80505e05cf7aede037c593cf6c6e0758e,bug/1939545,"import mockfrom nova import test class TestVolAttachmentsDuringLiveMigration( integrated_helpers._IntegratedTestBase ): """"""Assert the lifecycle of volume attachments during LM rollbacks """""" # Default self.api to the self.admin_api as live migration is admin only ADMIN_API = True microversion = 'latest' def setUp(self): super().setUp() self.cinder = self.useFixture(nova_fixtures.CinderFixture(self)) def _setup_compute_service(self): self._start_compute('src') self._start_compute('dest') @mock.patch('nova.virt.fake.FakeDriver.live_migration') def test_vol_attachments_during_driver_live_mig_failure(self, mock_lm): """"""Assert volume attachments during live migration rollback * Mock live_migration to always rollback and raise a failure within the fake virt driver * Launch a boot from volume instance * Assert that the volume is attached correctly to the instance * Live migrate the instance to another host invoking the mocked live_migration method * Assert that the instance is still on the source host * Assert that the original source host volume attachment remains """""" # Mock out driver.live_migration so that we always rollback def _fake_live_migration_with_rollback( context, instance, dest, post_method, recover_method, block_migration=False, migrate_data=None): # Just call the recover_method to simulate a rollback recover_method(context, instance, dest, migrate_data) # raise test.TestingException here to imitate a virt driver raise test.TestingException() mock_lm.side_effect = _fake_live_migration_with_rollback volume_id = nova_fixtures.CinderFixture.IMAGE_BACKED_VOL server = self._build_server( name='test_bfv_live_migration_failure', image_uuid='', networks='none' ) server['block_device_mapping_v2'] = [{ 'source_type': 'volume', 'destination_type': 'volume', 'boot_index': 0, 'uuid': volume_id }] server = self.api.post_server({'server': server}) self._wait_for_state_change(server, 'ACTIVE') # Fetch the source host for use later server = self.api.get_server(server['id']) src_host = server['OS-EXT-SRV-ATTR:host'] # Assert that the volume is connected to the instance self.assertIn( volume_id, self.cinder.volume_ids_for_instance(server['id'])) # Assert that we have an active attachment in the fixture attachments = self.cinder.volume_to_attachment.get(volume_id) self.assertEqual(1, len(attachments)) # Fetch the attachment_id for use later once we have migrated src_attachment_id = list(attachments.keys())[0] # Migrate the instance and wait until the migration errors out thanks # to our mocked version of live_migration raising TestingException self.api.post_server_action( server['id'], {'os-migrateLive': {'host': None, 'block_migration': 'auto'}}) self._wait_for_migration_status(server, ['error']) # Assert that we called the fake live_migration method mock_lm.assert_called_once() # Assert that the instance is listed as ERROR on the source self._wait_for_state_change(server, 'ERROR') server = self.api.get_server(server['id']) self.assertEqual(src_host, server['OS-EXT-SRV-ATTR:host']) # Assert that the src attachment is still present attachments = self.cinder.volume_to_attachment.get(volume_id) self.assertIn(src_attachment_id, attachments.keys()) self.assertEqual(1, len(attachments))",,93,0
openstack%2Fnova~844746,openstack/nova,stable/train,Ib8009f38f20b008d08148f7f591af13b1ca5b420,fup: Assert state of connection_info during LM rollback in func tests,ABANDONED,2022-06-05 16:59:52.000000000,2023-09-01 16:55:44.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-06-05 16:59:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1f3a54dbc467bfff2a4981ee8037b3b408f33485', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 2, 'created': '2022-06-05 19:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/d034d9336f1f851627c2d96de4fe9aa6ab78132e', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 3, 'created': '2022-06-05 21:13:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9c6c9acab9846b02416135adf9a951d9bc212282', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 4, 'created': '2022-06-06 14:38:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b24bb324f96db8c2f9ba4ae08302e186dc03fbe4', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 5, 'created': '2022-06-08 21:33:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b0dd461ae56423da176013ecb9f2ce6e2da54131', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 6, 'created': '2022-06-09 13:43:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f0405e9eb2a578e6d861cafd30e94fa2cf375aa6', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 7, 'created': '2022-06-09 15:54:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/5d356120b4ce43fcacb3c969dc34501b55f89f39', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\nAlso, as in the previous patch, fix how we use the _build_server()\nhelper to match how it works in stable/train.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 8, 'created': '2022-06-09 18:03:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/79dd72142f7425c32b5c99409eef3865199ec93d', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\nAlso, as in the previous patch, fix how we use the _build_server()\nhelper to match how it works in stable/train.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 9, 'created': '2022-06-09 18:53:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/21b52404d178bb1598103c04d2897db3e1757bbb', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\nAlso, as in the previous patch, fix how we use the _build_server()\nhelper to match how it works in stable/train.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 10, 'created': '2022-06-09 21:30:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9588a8316e796fbda834d42e2ff4c0d49a9155a4', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\nAlso, as in the previous patch, fix how we use the _build_server()\nhelper to match how it works in stable/train.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 11, 'created': '2022-06-10 00:45:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/bc3800acf1018be92fc9e05ea3e6696fc761d8f6', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\nAlso, as in the previous patch, fix how we use the _build_server()\nhelper to match how it works in stable/train.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 12, 'created': '2022-06-10 09:48:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/288094aa2e6611edaea776599da1ceb2795efa24', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nConflicts in nova/tests/functional/compute/test_live_migration.py due\nto 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\nmigration tests in ussuri and changing the context around this change.\nAlso, as in the previous patch, fix how we use the _build_server()\nhelper to match how it works in stable/train.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 13, 'created': '2022-06-10 13:28:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6d58370f7c8890bce4cde3a2606606eac1ae3da4', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nNOTE(artom) Conflicts and changes:\n* Conflicts in nova/tests/functional/compute/test_live_migration.py due\n  to 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\n  migration tests in ussuri and changing the context around this change.\n* Fix how we use the _build_server() helper to match how it works in\n  stable/train.\n* Stop using the _live_migrate() helper as it does not exist in\n  stable/train, and use an explicit self.api.post_server_action()\n  call.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 14, 'created': '2022-06-10 14:37:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c5b8935f80a99d38281bb30d1e331f24c2614fe2', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nNOTE(artom) Conflicts and changes:\n* Conflicts in nova/tests/functional/compute/test_live_migration.py due\n  to 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\n  migration tests in ussuri and changing the context around this change.\n* Fix how we use the _build_server() helper to match how it works in\n  stable/train.\n* Stop using the _live_migrate() helper as it does not exist in\n  stable/train, and use an explicit self.api.post_server_action()\n  call.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 15, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6649b37ac1a60ebf451e54a5f596ba5a319424b1', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nNOTE(artom) Conflicts and changes:\n* Conflicts in nova/tests/functional/compute/test_live_migration.py due\n  to 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\n  migration tests in ussuri and changing the context around this change.\n* Fix how we use the _build_server() helper to match how it works in\n  stable/train.\n* Stop using the _live_migrate() helper as it does not exist in\n  stable/train, and use an explicit self.api.post_server_action()\n  call.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 53d37de10ff5e389f2916b43a2246b62fb6af23d)\n(cherry picked from commit f1c931c992c95f10ab30f709ac101fd76a4ec406)\n(cherry picked from commit 6cdd1504cd33067a2ba56189ee61e65639126ce2)\n'}, {'number': 16, 'created': '2022-06-17 17:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/246ab1751487e788077fd089100e673ab58b64f0', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nNOTE(artom) Conflicts and changes:\n* Conflicts in nova/tests/functional/compute/test_live_migration.py due\n  to 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\n  migration tests in ussuri and changing the context around this change.\n* Fix how we use the _build_server() helper to match how it works in\n  stable/train.\n* Stop using the _live_migrate() helper as it does not exist in\n  stable/train, and use an explicit self.api.post_server_action()\n  call.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit 3d9a91329838a494671e407a0f35c33d55369172)\n(cherry picked from commit 5a660194218b78798e46531fcdc323bcbc346a18)\n(cherry picked from commit bac8397cc0b7169668ce8240f16a2fa2a55cce19)\n'}, {'number': 17, 'created': '2022-06-17 19:11:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/62bce68c02658083d91653d31a7de23bf5b25072', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nNOTE(artom) Conflicts and changes:\n* Conflicts in nova/tests/functional/compute/test_live_migration.py due\n  to 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\n  migration tests in ussuri and changing the context around this change.\n* Fix how we use the _build_server() helper to match how it works in\n  stable/train.\n* Stop using the _live_migrate() helper as it does not exist in\n  stable/train, and use an explicit self.api.post_server_action()\n  call.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit c3aa302b4e4f7bfb273360fe0f0ff0e4bbcb78e0)\n(cherry picked from commit 95e22786e456f840f3caa4ab435fd39f05e7da47)\n(cherry picked from commit b6059dcd28a1f83e15b0f1c0d7e3121c94c8164c)\n'}, {'number': 18, 'created': '2022-06-17 21:23:13.000000000', 'files': ['nova/tests/functional/compute/test_live_migration.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1032302c8e87e84e6a08397fe15625514136797a', 'message': 'fup: Assert state of connection_info during LM rollback in func tests\n\nThis came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as\nsomething we should be asserting in our func tests somewhere. I had\nthought it already was but this is as close as we got. Add that coverage\nhere.\n\nNOTE(artom) Conflicts and changes:\n* Conflicts in nova/tests/functional/compute/test_live_migration.py due\n  to 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live\n  migration tests in ussuri and changing the context around this change.\n* Fix how we use the _build_server() helper to match how it works in\n  stable/train.\n* Stop using the _live_migrate() helper as it does not exist in\n  stable/train, and use an explicit self.api.post_server_action()\n  call.\n\nChange-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420\n(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)\n(cherry picked from commit c248986eeb8e9b9c3586c83b01663d3585132c3f)\n(cherry picked from commit 212ef3e9753a3bc6cd1dbd6aa1bd48fd56fbbf96)\n(cherry picked from commit 58264ad5bb8c3b2e64f7a0d5d02461ec26d802f8)\n'}]",4,844746,1032302c8e87e84e6a08397fe15625514136797a,47,2,18,8864,,,0,"fup: Assert state of connection_info during LM rollback in func tests

This came up during Iea8896682fc28e3a5cd25afa45238272bee745e1 as
something we should be asserting in our func tests somewhere. I had
thought it already was but this is as close as we got. Add that coverage
here.

NOTE(artom) Conflicts and changes:
* Conflicts in nova/tests/functional/compute/test_live_migration.py due
  to 2c949cb3eea9cd9282060da12d32771582953aa2 adding Neutron live
  migration tests in ussuri and changing the context around this change.
* Fix how we use the _build_server() helper to match how it works in
  stable/train.
* Stop using the _live_migrate() helper as it does not exist in
  stable/train, and use an explicit self.api.post_server_action()
  call.

Change-Id: Ib8009f38f20b008d08148f7f591af13b1ca5b420
(cherry picked from commit 31bedfc09c1d35242e0b8101343f6e64ac63157d)
(cherry picked from commit c248986eeb8e9b9c3586c83b01663d3585132c3f)
(cherry picked from commit 212ef3e9753a3bc6cd1dbd6aa1bd48fd56fbbf96)
(cherry picked from commit 58264ad5bb8c3b2e64f7a0d5d02461ec26d802f8)
",git fetch https://review.opendev.org/openstack/nova refs/changes/46/844746/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/compute/test_live_migration.py'],1,1f3a54dbc467bfff2a4981ee8037b3b408f33485,bug/1939545,"from oslo_serialization import jsonutilsfrom nova import contextfrom nova import objects * Launch a boot from volume instance on src * Assert that the expected source attachment is recorded in the bdm * Wrap pre_live_migration on the dest and assert that we switch over to the new attachment and connection_info on the dest. * Assert that the original src connection_info is in the bdm name='test_bfv_live_migration_failure', image_uuid='', networks='none', host='src' 'uuid': volume_id, # Assert that the instance has landed correctly on src self.assertEqual('src', server['OS-EXT-SRV-ATTR:host']) # Assert that this attachment_id is stashed in the connection_info # of the bdm so we can assert things again after the failure ctxt = context.get_admin_context() bdm = objects.BlockDeviceMapping.get_by_volume_and_instance( ctxt, volume_id, server['id']) self.assertEqual(src_attachment_id, bdm.attachment_id) connection_info = jsonutils.loads(bdm.connection_info) self.assertIn('attachment_id', connection_info['data']) self.assertEqual( src_attachment_id, connection_info['data']['attachment_id']) dest_pre_live_mig = self.computes['dest'].manager.pre_live_migration # Wrap pre_live_migration on the destination so we can assert that # we do switch over to the new attachment before the failure # and then later rollback to the source attachment def wrap_pre_live_migration(*args, **kwargs): # Continue with pre_live_migration before we assert anything migrate_data = dest_pre_live_mig(*args, **kwargs) # Assert that we now have two attachments in the fixture, one for # the src and another for the dest. attachments = self.cinder.volume_to_attachment.get(volume_id) self.assertEqual(2, len(attachments)) # Assert that the dest attachment id is saved in the bdm # and the connection_info. bdm = objects.BlockDeviceMapping.get_by_volume_and_instance( ctxt, volume_id, server['id']) self.assertNotEqual(src_attachment_id, bdm.attachment_id) dest_attachment_id = bdm.attachment_id connection_info = jsonutils.loads(bdm.connection_info) self.assertIn('attachment_id', connection_info['data']) self.assertEqual( dest_attachment_id, connection_info['data']['attachment_id']) return migrate_data with mock.patch.object( self.computes['dest'].manager, 'pre_live_migration', wrap_pre_live_migration ): # Migrate the instance and wait until the migration errors out # thanks to our mocked version of live_migration raising # TestingException self._live_migrate(server, 'error', server_expected_state='ERROR') self.assertEqual('src', server['OS-EXT-SRV-ATTR:host']) # Assert that the connection_info has reverted back to the src bdm = objects.BlockDeviceMapping.get_by_volume_and_instance( ctxt, volume_id, server['id']) self.assertEqual(src_attachment_id, bdm.attachment_id) connection_info = jsonutils.loads(bdm.connection_info) self.assertIn('attachment_id', connection_info['data']) self.assertEqual( src_attachment_id, connection_info['data']['attachment_id'])"," * Launch a boot from volume instance name='test_bfv_live_migration_failure', image_uuid='', networks='none' 'uuid': volume_id # Fetch the source host for use later src_host = server['OS-EXT-SRV-ATTR:host'] # Migrate the instance and wait until the migration errors out thanks # to our mocked version of live_migration raising TestingException self.api.post_server_action( server['id'], {'os-migrateLive': {'host': None, 'block_migration': 'auto'}}) self._wait_for_migration_status(server, ['error']) self.assertEqual(src_host, server['OS-EXT-SRV-ATTR:host'])",72,13
openstack%2Fnova~844744,openstack/nova,stable/train,Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa,fup: Make connection_info returned by CinderFixture unique per attachment,ABANDONED,2022-06-05 16:59:52.000000000,2023-09-01 16:55:37.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-06-05 16:59:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0398b26f97930a76a0de210ae2d0697c33dd0d1c', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit f76fdd63cd350a20b0a0bf4605130d7796702b8a)\n(cherry picked from commit 3b138ac9f4a716e6c6155c595425c2a304366d97)\n(cherry picked from commit 5f70c6dbf716d2e031dfd368395a40e17d1bec5b)\n'}, {'number': 2, 'created': '2022-06-05 19:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3a7ae8e171eb5b23152fbc26a49f6789a29f8687', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit f76fdd63cd350a20b0a0bf4605130d7796702b8a)\n(cherry picked from commit 3b138ac9f4a716e6c6155c595425c2a304366d97)\n(cherry picked from commit 5f70c6dbf716d2e031dfd368395a40e17d1bec5b)\n'}, {'number': 3, 'created': '2022-06-06 14:38:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0e6b50761e7e5ad40a6b17a9fc54d510ad897515', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit f76fdd63cd350a20b0a0bf4605130d7796702b8a)\n(cherry picked from commit 3b138ac9f4a716e6c6155c595425c2a304366d97)\n(cherry picked from commit 5f70c6dbf716d2e031dfd368395a40e17d1bec5b)\n'}, {'number': 4, 'created': '2022-06-08 21:33:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b76e3475cad7749ef6e879e13310d465a17336c0', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit f76fdd63cd350a20b0a0bf4605130d7796702b8a)\n(cherry picked from commit 3b138ac9f4a716e6c6155c595425c2a304366d97)\n(cherry picked from commit 5f70c6dbf716d2e031dfd368395a40e17d1bec5b)\n'}, {'number': 5, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/aa11942a532686b571e0c5badc7565ad7b18907c', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit f76fdd63cd350a20b0a0bf4605130d7796702b8a)\n(cherry picked from commit 3b138ac9f4a716e6c6155c595425c2a304366d97)\n(cherry picked from commit 5f70c6dbf716d2e031dfd368395a40e17d1bec5b)\n'}, {'number': 6, 'created': '2022-06-17 17:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b5ba23d7e5fd79f0c4834f289a056e3511f410b3', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit df36aa8807e7fbb4d3c9ed3729ab35121eebd878)\n(cherry picked from commit 5b487a4bd92df8239d81c4b0aad752dde2e8d73e)\n(cherry picked from commit 0708b2f72475eb01afbaa617ca59d35b72085443)\n'}, {'number': 7, 'created': '2022-06-17 19:11:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7644d80480eccd982c2fd64a6467c2f1b0f61337', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit 2737c52af0f8bac0d46d3e9d960093aed6ca9a76)\n(cherry picked from commit 5b24574c6485f4fb452be87db53652fc3f7fd001)\n(cherry picked from commit 6053d1373823e00388eb7253e7ec914ce86a91e6)\n'}, {'number': 8, 'created': '2022-06-17 21:23:13.000000000', 'files': ['nova/tests/fixtures.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ea8d60f72592d31e7b84de7cc00ed8ad90e8b9d6', 'message': 'fup: Make connection_info returned by CinderFixture unique per attachment\n\nChange-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa\n(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)\n(cherry picked from commit 8e008925343f27f017b8c3d6d49a2cfa2aea8aeb)\n(cherry picked from commit a26bdac24c1eb2e6503bd2683c935799096d93e9)\n(cherry picked from commit 48b04ccbd42c257c4978ff021ac0bb523ae51eb9)\n'}]",1,844744,ea8d60f72592d31e7b84de7cc00ed8ad90e8b9d6,24,2,8,8864,,,0,"fup: Make connection_info returned by CinderFixture unique per attachment

Change-Id: Iff3a3d13fb43357b4ae6fcd52b6197635e1c00fa
(cherry picked from commit d4cc10d7bbc1448ae8a38da63ebe2ee8c3243d30)
(cherry picked from commit 8e008925343f27f017b8c3d6d49a2cfa2aea8aeb)
(cherry picked from commit a26bdac24c1eb2e6503bd2683c935799096d93e9)
(cherry picked from commit 48b04ccbd42c257c4978ff021ac0bb523ae51eb9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/44/844744/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/fixtures.py'],1,0398b26f97930a76a0de210ae2d0697c33dd0d1c,bug/1939545," # Dict of connection_info for the above volumes keyed by the volume id def _find_connection_info(volume_id, attachment_id): """"""Find the connection_info associated with an attachment :returns: A connection_info dict based on a deepcopy associated with the volume_id but containing the attachment_id, making it unique for the attachment. """""" connection_info = copy.deepcopy( self.VOLUME_CONNECTION_INFO.get( volume_id, self.VOLUME_CONNECTION_INFO.get('fake') ) ) connection_info['data']['attachment_id'] = attachment_id return connection_info attachment['connection_info'] = _find_connection_info( volume_id, attachment_id) 'connection_info': _find_connection_info( volume_id, attachment_id) 'connection_info': _find_connection_info( volume_id, attachment_id)"," # Dict of connection_info for the above volumes key'd by the volume id # TODO(lyarwood): Make this unique and tracked per attachment somehow. connection_info = self.VOLUME_CONNECTION_INFO.get( volume_id, self.VOLUME_CONNECTION_INFO.get('fake')) attachment['connection_info'] = copy.deepcopy(connection_info) 'connection_info': copy.deepcopy( self.VOLUME_CONNECTION_INFO.get( volume_id, self.VOLUME_CONNECTION_INFO.get('fake'))) 'connection_info': copy.deepcopy( self.VOLUME_CONNECTION_INFO.get( volume_id, self.VOLUME_CONNECTION_INFO.get('fake')))",22,12
openstack%2Fnova~843958,openstack/nova,stable/train,I066fb5617bae944a03273049117fc2b5bf329283,fake: Ensure need_legacy_block_device_info returns False,ABANDONED,2022-05-30 20:25:37.000000000,2023-09-01 16:55:29.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-05-30 20:25:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8503e8868275593c1a9adc23a88695af487969fe', 'message': ""fake: Ensure need_legacy_block_device_info returns False\n\nThe legacy block_device_info format has not been used for a while in the\nvirt drivers and the Fake virt drivers shouldn't be using it anymore.\n\nSome compute tests have been updated as they were previously asserting\nthe legacy format incorrectly. TODOs are also left to remove support for\nthe legacy format in a follow up change.\n\nChange-Id: I066fb5617bae944a03273049117fc2b5bf329283\n(cherry-picked from commit d102b751b743b5315557cac0997198152c0cac74)\n(cherry picked from commit c5bed50368196cdc45d1dfa68da927a0a7bc0ff8)\n(cherry picked from commit 113414eaf4d74f0ec257bf3a3ff7836dffc6dd07)\n(cherry picked from commit f48591c7f367bddf38ef91dd868c3f35ef1be425)\n""}, {'number': 2, 'created': '2022-06-05 16:59:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b9e7081c426e6d8fa8d23ab68b8fd6bf32bbe977', 'message': ""fake: Ensure need_legacy_block_device_info returns False\n\nThe legacy block_device_info format has not been used for a while in the\nvirt drivers and the Fake virt drivers shouldn't be using it anymore.\n\nSome compute tests have been updated as they were previously asserting\nthe legacy format incorrectly. TODOs are also left to remove support for\nthe legacy format in a follow up change.\n\nChange-Id: I066fb5617bae944a03273049117fc2b5bf329283\n(cherry-picked from commit d102b751b743b5315557cac0997198152c0cac74)\n(cherry picked from commit c5bed50368196cdc45d1dfa68da927a0a7bc0ff8)\n(cherry picked from commit 113414eaf4d74f0ec257bf3a3ff7836dffc6dd07)\n(cherry picked from commit ec73ce4022a600896b25186715e17b3dcb2f6cc8)\n""}, {'number': 3, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/911a686ba3266d636c09f6dc357ad55970529bad', 'message': ""fake: Ensure need_legacy_block_device_info returns False\n\nThe legacy block_device_info format has not been used for a while in the\nvirt drivers and the Fake virt drivers shouldn't be using it anymore.\n\nSome compute tests have been updated as they were previously asserting\nthe legacy format incorrectly. TODOs are also left to remove support for\nthe legacy format in a follow up change.\n\nChange-Id: I066fb5617bae944a03273049117fc2b5bf329283\n(cherry-picked from commit d102b751b743b5315557cac0997198152c0cac74)\n(cherry picked from commit c5bed50368196cdc45d1dfa68da927a0a7bc0ff8)\n(cherry picked from commit 113414eaf4d74f0ec257bf3a3ff7836dffc6dd07)\n(cherry picked from commit ec73ce4022a600896b25186715e17b3dcb2f6cc8)\n""}, {'number': 4, 'created': '2022-06-17 17:18:07.000000000', 'files': ['nova/virt/fake.py', 'nova/tests/unit/compute/test_compute.py', 'nova/virt/driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/d719add14f3c97e17ee3c385374c476d70e5cc10', 'message': ""fake: Ensure need_legacy_block_device_info returns False\n\nThe legacy block_device_info format has not been used for a while in the\nvirt drivers and the Fake virt drivers shouldn't be using it anymore.\n\nSome compute tests have been updated as they were previously asserting\nthe legacy format incorrectly. TODOs are also left to remove support for\nthe legacy format in a follow up change.\n\nChange-Id: I066fb5617bae944a03273049117fc2b5bf329283\n(cherry-picked from commit d102b751b743b5315557cac0997198152c0cac74)\n(cherry picked from commit 74160240526ccc64b7c86b66969b2e22f8a2c683)\n(cherry picked from commit 2ce7dc32d5f58e0be4c464faff00b53fb4671a22)\n(cherry picked from commit 62106532d010808c3609be89ac3c6485eba7bacd)\n""}]",1,843958,d719add14f3c97e17ee3c385374c476d70e5cc10,15,2,4,8864,,,0,"fake: Ensure need_legacy_block_device_info returns False

The legacy block_device_info format has not been used for a while in the
virt drivers and the Fake virt drivers shouldn't be using it anymore.

Some compute tests have been updated as they were previously asserting
the legacy format incorrectly. TODOs are also left to remove support for
the legacy format in a follow up change.

Change-Id: I066fb5617bae944a03273049117fc2b5bf329283
(cherry-picked from commit d102b751b743b5315557cac0997198152c0cac74)
(cherry picked from commit 74160240526ccc64b7c86b66969b2e22f8a2c683)
(cherry picked from commit 2ce7dc32d5f58e0be4c464faff00b53fb4671a22)
(cherry picked from commit 62106532d010808c3609be89ac3c6485eba7bacd)
",git fetch https://review.opendev.org/openstack/nova refs/changes/58/843958/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/fake.py', 'nova/tests/unit/compute/test_compute.py', 'nova/virt/driver.py']",3,8503e8868275593c1a9adc23a88695af487969fe,bug/1939545, # TODO(lyarwood): This is no longer used and should be removed.,,31,19
openstack%2Fnova~844743,openstack/nova,stable/train,Ie74fcd689a627c178f80ec60df2dfef40576f182,tests: work around malformed serial XML,ABANDONED,2022-06-05 16:59:52.000000000,2023-09-01 16:55:21.000000000,,"[{'_account_id': 4690}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-06-05 16:59:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/e55fa2597b4fa49cc8a8b85157e1e1d571e7ba28', 'message': ""tests: work around malformed serial XML\n\nThe serial elements in fakelibvirt's XMLDesc() are malformed. They are\nonly enough to pass existing unit tests, but are not future-proof, and\nwould not work with something like migration._update_serial_xml(). In\naddition, two of them (type=file and type=pty) are not actually used by\nanything.\n\nThis patch removes the unused types and starts checking the\nCONF.serial_console.enabled flag before including any serial XML in\nthe fake domain. This allows tests that don't set\nserial_console_enabled (like the subsequent NUMA LM func test) to not\nhave to deal with the broken serial XML, while tests that relied on it\nin the past now just set serial_console_enabled = True.\n\nNOTE(artom) This enables the live migration functional test in the\nsubsequent patch to work.\n\nChange-Id: Ie74fcd689a627c178f80ec60df2dfef40576f182\n(cherry picked from commit 4ba00c803b8707ca40492f493997df058696ca15)\n""}, {'number': 2, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/08334dae2959b664b5fd395728ed299543bca4da', 'message': ""tests: work around malformed serial XML\n\nThe serial elements in fakelibvirt's XMLDesc() are malformed. They are\nonly enough to pass existing unit tests, but are not future-proof, and\nwould not work with something like migration._update_serial_xml(). In\naddition, two of them (type=file and type=pty) are not actually used by\nanything.\n\nThis patch removes the unused types and starts checking the\nCONF.serial_console.enabled flag before including any serial XML in\nthe fake domain. This allows tests that don't set\nserial_console_enabled (like the subsequent NUMA LM func test) to not\nhave to deal with the broken serial XML, while tests that relied on it\nin the past now just set serial_console_enabled = True.\n\nNOTE(artom) This enables the live migration functional test in the\nsubsequent patch to work.\n\nChange-Id: Ie74fcd689a627c178f80ec60df2dfef40576f182\n(cherry picked from commit 4ba00c803b8707ca40492f493997df058696ca15)\n""}, {'number': 3, 'created': '2022-06-17 17:18:07.000000000', 'files': ['nova/tests/unit/virt/libvirt/fakelibvirt.py', 'nova/tests/unit/virt/test_virt_drivers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a863d808260547e62c8eb09452963b8fe07af713', 'message': ""tests: work around malformed serial XML\n\nThe serial elements in fakelibvirt's XMLDesc() are malformed. They are\nonly enough to pass existing unit tests, but are not future-proof, and\nwould not work with something like migration._update_serial_xml(). In\naddition, two of them (type=file and type=pty) are not actually used by\nanything.\n\nThis patch removes the unused types and starts checking the\nCONF.serial_console.enabled flag before including any serial XML in\nthe fake domain. This allows tests that don't set\nserial_console_enabled (like the subsequent NUMA LM func test) to not\nhave to deal with the broken serial XML, while tests that relied on it\nin the past now just set serial_console_enabled = True.\n\nNOTE(artom) This enables the live migration functional test in the\nsubsequent patch to work.\n\nChange-Id: Ie74fcd689a627c178f80ec60df2dfef40576f182\n(cherry picked from commit 4ba00c803b8707ca40492f493997df058696ca15)\n""}]",1,844743,a863d808260547e62c8eb09452963b8fe07af713,11,2,3,8864,,,0,"tests: work around malformed serial XML

The serial elements in fakelibvirt's XMLDesc() are malformed. They are
only enough to pass existing unit tests, but are not future-proof, and
would not work with something like migration._update_serial_xml(). In
addition, two of them (type=file and type=pty) are not actually used by
anything.

This patch removes the unused types and starts checking the
CONF.serial_console.enabled flag before including any serial XML in
the fake domain. This allows tests that don't set
serial_console_enabled (like the subsequent NUMA LM func test) to not
have to deal with the broken serial XML, while tests that relied on it
in the past now just set serial_console_enabled = True.

NOTE(artom) This enables the live migration functional test in the
subsequent patch to work.

Change-Id: Ie74fcd689a627c178f80ec60df2dfef40576f182
(cherry picked from commit 4ba00c803b8707ca40492f493997df058696ca15)
",git fetch https://review.opendev.org/openstack/nova refs/changes/43/844743/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/libvirt/fakelibvirt.py', 'nova/tests/unit/virt/test_virt_drivers.py']",2,e55fa2597b4fa49cc8a8b85157e1e1d571e7ba28,bug/1939545," self.flags(enabled=True, group='serial_console')",,12,12
openstack%2Fnova~844750,openstack/nova,stable/train,Iab455e22aa075bb1b3fb9b7d1870b1eb7314e320,functional: Use tempdir for CONF.instances_path,ABANDONED,2022-06-05 19:58:10.000000000,2023-09-01 16:55:15.000000000,,"[{'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-06-05 19:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ed83edec0c3ebd7c7d38db6e72e959fe372f7a3b', 'message': ""functional: Use tempdir for CONF.instances_path\n\nThis was being set in an ad-hoc manner throughout the code, but it's\nnecessary for all kinds of live migration and evacuation operations.\nJust centralize the configuration.\n\nConflicts:\n* nova/tests/functional/libvirt/base.py due to 6c4d1a6aabb changing\n the context around the line this cherry-pick adds.\n* nova/tests/functional/libvirt/test_numa_live_migration.py didn't\n  exist in stable/train.\n\nNOTE(artom) This is needed to prevent the live migration test added\nin the subsequent patch from failing in the gate (and only in the\ngate, the failure could not be reproduced locally) with `No such file\nor directory:\n'/home/zuul/src/opendev.org/openstack/nova/instances/tmpif84g_jd'`.\n\nChange-Id: Iab455e22aa075bb1b3fb9b7d1870b1eb7314e320\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n(cherry picked from commit 980711f3d3f2db9dfd792a8c6fd15cb45a85f615)\n""}, {'number': 2, 'created': '2022-06-15 16:32:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3aacc07d734398b324f69e5982ec689b1571f064', 'message': ""functional: Use tempdir for CONF.instances_path\n\nThis was being set in an ad-hoc manner throughout the code, but it's\nnecessary for all kinds of live migration and evacuation operations.\nJust centralize the configuration.\n\nConflicts:\n* nova/tests/functional/libvirt/base.py due to 6c4d1a6aabb changing\n the context around the line this cherry-pick adds.\n* nova/tests/functional/libvirt/test_numa_live_migration.py didn't\n  exist in stable/train.\n\nNOTE(artom) This is needed to prevent the live migration test added\nin the subsequent patch from failing in the gate (and only in the\ngate, the failure could not be reproduced locally) with `No such file\nor directory:\n'/home/zuul/src/opendev.org/openstack/nova/instances/tmpif84g_jd'`.\n\nChange-Id: Iab455e22aa075bb1b3fb9b7d1870b1eb7314e320\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n(cherry picked from commit 980711f3d3f2db9dfd792a8c6fd15cb45a85f615)\n""}, {'number': 3, 'created': '2022-06-17 17:18:07.000000000', 'files': ['nova/tests/functional/libvirt/test_evacuate.py', 'nova/tests/functional/libvirt/base.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ef66e1a44ac4544e37a7cdced86444d6e2ddc9a8', 'message': ""functional: Use tempdir for CONF.instances_path\n\nThis was being set in an ad-hoc manner throughout the code, but it's\nnecessary for all kinds of live migration and evacuation operations.\nJust centralize the configuration.\n\nNOTE(artom) This is being backported because a functional test failure\nwas observed when running functional tests that are added by\nsubsequent patches. The specific error was:\n\nNo such file or directory:\n'/home/zuul/src/opendev.org/openstack/nova/instances/tmpif84g_jd\n\nThe failure is not always reproducible, but never happened again with\nthis patch included in the series.\n\nChange-Id: Iab455e22aa075bb1b3fb9b7d1870b1eb7314e320\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n(cherry picked from commit 980711f3d3f2db9dfd792a8c6fd15cb45a85f615)\n(cherry picked from commit 05c88a4e21b523ad30ab133093b627a0fae78adf)\n""}]",1,844750,ef66e1a44ac4544e37a7cdced86444d6e2ddc9a8,11,2,3,8864,,,0,"functional: Use tempdir for CONF.instances_path

This was being set in an ad-hoc manner throughout the code, but it's
necessary for all kinds of live migration and evacuation operations.
Just centralize the configuration.

NOTE(artom) This is being backported because a functional test failure
was observed when running functional tests that are added by
subsequent patches. The specific error was:

No such file or directory:
'/home/zuul/src/opendev.org/openstack/nova/instances/tmpif84g_jd

The failure is not always reproducible, but never happened again with
this patch included in the series.

Change-Id: Iab455e22aa075bb1b3fb9b7d1870b1eb7314e320
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
(cherry picked from commit 980711f3d3f2db9dfd792a8c6fd15cb45a85f615)
(cherry picked from commit 05c88a4e21b523ad30ab133093b627a0fae78adf)
",git fetch https://review.opendev.org/openstack/nova refs/changes/50/844750/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/libvirt/test_evacuate.py', 'nova/tests/functional/libvirt/base.py']",2,ed83edec0c3ebd7c7d38db6e72e959fe372f7a3b,bug/1939545, self.flags(instances_path=self.useFixture(fixtures.TempDir()).path) ,,2,5
openstack%2Fnova~751368,openstack/nova,stable/train,I26b050c402f5721fc490126e9becb643af9279b4,Move confirm resize under semaphore,ABANDONED,2020-09-11 17:20:55.000000000,2023-09-01 16:55:00.000000000,,"[{'_account_id': 9708}, {'_account_id': 10118}, {'_account_id': 10135}, {'_account_id': 14595}, {'_account_id': 15334}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26515}, {'_account_id': 29963}]","[{'number': 1, 'created': '2020-09-11 17:20:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/78a4ec49bf735cba5477b030537074a627032e55', 'message': 'Move confirm resize under semaphore\n\nThe \'ResourceTracker.update_available_resource\' periodic task builds\nusage information for the current host by inspecting instances and\nin-progress migrations, combining the two. Specifically, it finds all\ninstances that are not in the \'DELETED\' or \'SHELVED_OFFLOADED\' state,\ncalculates the usage from these, then finds all in-progress migrations\nfor the host that don\'t have an associated instance (to prevent double\naccounting) and includes the usage for these.\n\nIn addition to the periodic task, the \'ResourceTracker\' class has a\nnumber of helper functions to make or drop claims for the inventory\ngenerated by the \'update_available_resource\' periodic task as part of\nthe various instance operations. These helpers naturally assume that\nwhen making a claim for a particular instance or migration, there\nshouldn\'t already be resources allocated for same. Conversely, when\ndropping claims, the resources should currently be allocated. However,\nthe check for *active* instances and *in-progress* migrations in the\nperiodic task means we have to be careful in how we make changes to a\ngiven instance or migration record. Running the periodic task between\nsuch an operation and an attempt to make or drop a claim can result in\nTOCTOU-like races.\n\nThis generally isn\'t an issue: we use the \'COMPUTE_RESOURCE_SEMAPHORE\'\nsemaphore to prevent the periodic task running while we\'re claiming\nresources in helpers like \'ResourceTracker.instance_claim\' and we make\nour changes to the instances and migrations within this context. There\nis one exception though: the \'drop_move_claim\' helper. This function is\nused when dropping a claim for either a cold migration, a resize or a\nlive migration, and will drop usage from either the source host (based\non the ""old"" flavor) for a resize confirm or the destination host (based\non the ""new"" flavor) for a resize revert or live migration rollback.\nUnfortunately, while the function itself is wrapped in the semaphore, no\nchanges to the state or the instance or migration in question are\nprotected by it.\n\nConsider the confirm resize case, which we\'re addressing here. If we\nmark the migration as \'confirmed\' before running \'drop_move_claim\', then\nthe periodic task running between these steps will not account for the\nusage on the source since the migration is allegedly \'confirmed\'. The\ncall to \'drop_move_claim\' will then result in the tracker dropping usage\nthat we\'re no longer accounting for. This ""set migration status before\ndropping usage"" is the current behaviour for both same-cell and\ncross-cell resize, via the \'ComputeManager.confirm_resize\' and\n\'ComputeManager.confirm_snapshot_based_resize_at_source\' functions,\nrespectively. We could reverse those calls and run \'drop_move_claim\'\nbefore marking the migration as \'confirmed\', but while our usage will be\nmomentarily correct, the periodic task running between these steps will\nre-add the usage we just dropped since the migration isn\'t yet\n\'confirmed\'. The correct solution is to close this gap between setting\nthe migration status and dropping the move claim to zero. We do this by\nputting both operations behind the \'COMPUTE_RESOURCE_SEMAPHORE\', just\nlike the claim operations.\n\nConflicts:\n  nova/compute/manager.py\n  nova/compute/resource_tracker.py\n  nova/conductor/tasks/cross_cell_migrate.py\n  nova/tests/unit/compute/test_compute_mgr.py\n\nNOTE(stephenfin): The bulk of the conflicts are due to the absence of\nvarious cross-cell resize related patches. The only exception is the\nconflict in \'nova/compute/resource_tracker.py\', which is due to the\nabsence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair\nlocks in resource tracker"") which we can\'t backport since it requires a\nfeature only found in newer versions of \'oslo.concurrency\' and mandates\na lower constraint bump.\n\nChange-Id: I26b050c402f5721fc490126e9becb643af9279b4\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nPartial-Bug: #1879878\n(cherry picked from commit a57800d3825ef2fb833d8024c6f7e5c550f55e2f)\n(cherry picked from commit 4fcada57d6c569a3b9c8094cdfb37b77ec2a8cb5)\n'}, {'number': 2, 'created': '2020-09-14 10:40:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/602a219f26cbe0cae34b68f69b2398e0042338d5', 'message': 'Move confirm resize under semaphore\n\nThe \'ResourceTracker.update_available_resource\' periodic task builds\nusage information for the current host by inspecting instances and\nin-progress migrations, combining the two. Specifically, it finds all\ninstances that are not in the \'DELETED\' or \'SHELVED_OFFLOADED\' state,\ncalculates the usage from these, then finds all in-progress migrations\nfor the host that don\'t have an associated instance (to prevent double\naccounting) and includes the usage for these.\n\nIn addition to the periodic task, the \'ResourceTracker\' class has a\nnumber of helper functions to make or drop claims for the inventory\ngenerated by the \'update_available_resource\' periodic task as part of\nthe various instance operations. These helpers naturally assume that\nwhen making a claim for a particular instance or migration, there\nshouldn\'t already be resources allocated for same. Conversely, when\ndropping claims, the resources should currently be allocated. However,\nthe check for *active* instances and *in-progress* migrations in the\nperiodic task means we have to be careful in how we make changes to a\ngiven instance or migration record. Running the periodic task between\nsuch an operation and an attempt to make or drop a claim can result in\nTOCTOU-like races.\n\nThis generally isn\'t an issue: we use the \'COMPUTE_RESOURCE_SEMAPHORE\'\nsemaphore to prevent the periodic task running while we\'re claiming\nresources in helpers like \'ResourceTracker.instance_claim\' and we make\nour changes to the instances and migrations within this context. There\nis one exception though: the \'drop_move_claim\' helper. This function is\nused when dropping a claim for either a cold migration, a resize or a\nlive migration, and will drop usage from either the source host (based\non the ""old"" flavor) for a resize confirm or the destination host (based\non the ""new"" flavor) for a resize revert or live migration rollback.\nUnfortunately, while the function itself is wrapped in the semaphore, no\nchanges to the state or the instance or migration in question are\nprotected by it.\n\nConsider the confirm resize case, which we\'re addressing here. If we\nmark the migration as \'confirmed\' before running \'drop_move_claim\', then\nthe periodic task running between these steps will not account for the\nusage on the source since the migration is allegedly \'confirmed\'. The\ncall to \'drop_move_claim\' will then result in the tracker dropping usage\nthat we\'re no longer accounting for. This ""set migration status before\ndropping usage"" is the current behaviour for both same-cell and\ncross-cell resize, via the \'ComputeManager.confirm_resize\' and\n\'ComputeManager.confirm_snapshot_based_resize_at_source\' functions,\nrespectively. We could reverse those calls and run \'drop_move_claim\'\nbefore marking the migration as \'confirmed\', but while our usage will be\nmomentarily correct, the periodic task running between these steps will\nre-add the usage we just dropped since the migration isn\'t yet\n\'confirmed\'. The correct solution is to close this gap between setting\nthe migration status and dropping the move claim to zero. We do this by\nputting both operations behind the \'COMPUTE_RESOURCE_SEMAPHORE\', just\nlike the claim operations.\n\nConflicts:\n  nova/compute/manager.py\n  nova/compute/resource_tracker.py\n  nova/conductor/tasks/cross_cell_migrate.py\n  nova/tests/unit/compute/test_compute_mgr.py\n\nNOTE(stephenfin): The bulk of the conflicts are due to the absence of\nvarious cross-cell resize related patches. The only exception is the\nconflict in \'nova/compute/resource_tracker.py\', which is due to the\nabsence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair\nlocks in resource tracker"") which we can\'t backport since it requires a\nfeature only found in newer versions of \'oslo.concurrency\' and mandates\na lower constraint bump.\n\nChange-Id: I26b050c402f5721fc490126e9becb643af9279b4\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nPartial-Bug: #1879878\n(cherry picked from commit a57800d3825ef2fb833d8024c6f7e5c550f55e2f)\n(cherry picked from commit 4fcada57d6c569a3b9c8094cdfb37b77ec2a8cb5)\n'}, {'number': 3, 'created': '2021-02-04 17:13:23.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/functional/regressions/test_bug_1879878.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c957bd81bae1f23b566b6a51ae96bdca89897719', 'message': 'Move confirm resize under semaphore\n\nThe \'ResourceTracker.update_available_resource\' periodic task builds\nusage information for the current host by inspecting instances and\nin-progress migrations, combining the two. Specifically, it finds all\ninstances that are not in the \'DELETED\' or \'SHELVED_OFFLOADED\' state,\ncalculates the usage from these, then finds all in-progress migrations\nfor the host that don\'t have an associated instance (to prevent double\naccounting) and includes the usage for these.\n\nIn addition to the periodic task, the \'ResourceTracker\' class has a\nnumber of helper functions to make or drop claims for the inventory\ngenerated by the \'update_available_resource\' periodic task as part of\nthe various instance operations. These helpers naturally assume that\nwhen making a claim for a particular instance or migration, there\nshouldn\'t already be resources allocated for same. Conversely, when\ndropping claims, the resources should currently be allocated. However,\nthe check for *active* instances and *in-progress* migrations in the\nperiodic task means we have to be careful in how we make changes to a\ngiven instance or migration record. Running the periodic task between\nsuch an operation and an attempt to make or drop a claim can result in\nTOCTOU-like races.\n\nThis generally isn\'t an issue: we use the \'COMPUTE_RESOURCE_SEMAPHORE\'\nsemaphore to prevent the periodic task running while we\'re claiming\nresources in helpers like \'ResourceTracker.instance_claim\' and we make\nour changes to the instances and migrations within this context. There\nis one exception though: the \'drop_move_claim\' helper. This function is\nused when dropping a claim for either a cold migration, a resize or a\nlive migration, and will drop usage from either the source host (based\non the ""old"" flavor) for a resize confirm or the destination host (based\non the ""new"" flavor) for a resize revert or live migration rollback.\nUnfortunately, while the function itself is wrapped in the semaphore, no\nchanges to the state or the instance or migration in question are\nprotected by it.\n\nConsider the confirm resize case, which we\'re addressing here. If we\nmark the migration as \'confirmed\' before running \'drop_move_claim\', then\nthe periodic task running between these steps will not account for the\nusage on the source since the migration is allegedly \'confirmed\'. The\ncall to \'drop_move_claim\' will then result in the tracker dropping usage\nthat we\'re no longer accounting for. This ""set migration status before\ndropping usage"" is the current behaviour for both same-cell and\ncross-cell resize, via the \'ComputeManager.confirm_resize\' and\n\'ComputeManager.confirm_snapshot_based_resize_at_source\' functions,\nrespectively. We could reverse those calls and run \'drop_move_claim\'\nbefore marking the migration as \'confirmed\', but while our usage will be\nmomentarily correct, the periodic task running between these steps will\nre-add the usage we just dropped since the migration isn\'t yet\n\'confirmed\'. The correct solution is to close this gap between setting\nthe migration status and dropping the move claim to zero. We do this by\nputting both operations behind the \'COMPUTE_RESOURCE_SEMAPHORE\', just\nlike the claim operations.\n\nConflicts:\n  nova/compute/manager.py\n  nova/compute/resource_tracker.py\n  nova/conductor/tasks/cross_cell_migrate.py\n  nova/tests/unit/compute/test_compute_mgr.py\n\nNOTE(stephenfin): The bulk of the conflicts are due to the absence of\nvarious cross-cell resize related patches. The only exception is the\nconflict in \'nova/compute/resource_tracker.py\', which is due to the\nabsence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair\nlocks in resource tracker"") which we can\'t backport since it requires a\nfeature only found in newer versions of \'oslo.concurrency\' and mandates\na lower constraint bump.\n\nChange-Id: I26b050c402f5721fc490126e9becb643af9279b4\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\nPartial-Bug: #1879878\n(cherry picked from commit a57800d3825ef2fb833d8024c6f7e5c550f55e2f)\n(cherry picked from commit 4fcada57d6c569a3b9c8094cdfb37b77ec2a8cb5)\n'}]",5,751368,c957bd81bae1f23b566b6a51ae96bdca89897719,22,9,3,15334,,,0,"Move confirm resize under semaphore

The 'ResourceTracker.update_available_resource' periodic task builds
usage information for the current host by inspecting instances and
in-progress migrations, combining the two. Specifically, it finds all
instances that are not in the 'DELETED' or 'SHELVED_OFFLOADED' state,
calculates the usage from these, then finds all in-progress migrations
for the host that don't have an associated instance (to prevent double
accounting) and includes the usage for these.

In addition to the periodic task, the 'ResourceTracker' class has a
number of helper functions to make or drop claims for the inventory
generated by the 'update_available_resource' periodic task as part of
the various instance operations. These helpers naturally assume that
when making a claim for a particular instance or migration, there
shouldn't already be resources allocated for same. Conversely, when
dropping claims, the resources should currently be allocated. However,
the check for *active* instances and *in-progress* migrations in the
periodic task means we have to be careful in how we make changes to a
given instance or migration record. Running the periodic task between
such an operation and an attempt to make or drop a claim can result in
TOCTOU-like races.

This generally isn't an issue: we use the 'COMPUTE_RESOURCE_SEMAPHORE'
semaphore to prevent the periodic task running while we're claiming
resources in helpers like 'ResourceTracker.instance_claim' and we make
our changes to the instances and migrations within this context. There
is one exception though: the 'drop_move_claim' helper. This function is
used when dropping a claim for either a cold migration, a resize or a
live migration, and will drop usage from either the source host (based
on the ""old"" flavor) for a resize confirm or the destination host (based
on the ""new"" flavor) for a resize revert or live migration rollback.
Unfortunately, while the function itself is wrapped in the semaphore, no
changes to the state or the instance or migration in question are
protected by it.

Consider the confirm resize case, which we're addressing here. If we
mark the migration as 'confirmed' before running 'drop_move_claim', then
the periodic task running between these steps will not account for the
usage on the source since the migration is allegedly 'confirmed'. The
call to 'drop_move_claim' will then result in the tracker dropping usage
that we're no longer accounting for. This ""set migration status before
dropping usage"" is the current behaviour for both same-cell and
cross-cell resize, via the 'ComputeManager.confirm_resize' and
'ComputeManager.confirm_snapshot_based_resize_at_source' functions,
respectively. We could reverse those calls and run 'drop_move_claim'
before marking the migration as 'confirmed', but while our usage will be
momentarily correct, the periodic task running between these steps will
re-add the usage we just dropped since the migration isn't yet
'confirmed'. The correct solution is to close this gap between setting
the migration status and dropping the move claim to zero. We do this by
putting both operations behind the 'COMPUTE_RESOURCE_SEMAPHORE', just
like the claim operations.

Conflicts:
  nova/compute/manager.py
  nova/compute/resource_tracker.py
  nova/conductor/tasks/cross_cell_migrate.py
  nova/tests/unit/compute/test_compute_mgr.py

NOTE(stephenfin): The bulk of the conflicts are due to the absence of
various cross-cell resize related patches. The only exception is the
conflict in 'nova/compute/resource_tracker.py', which is due to the
absence of change Ia5e521e0f0c7a78b5ace5de9f343e84d872553f9 (""Use fair
locks in resource tracker"") which we can't backport since it requires a
feature only found in newer versions of 'oslo.concurrency' and mandates
a lower constraint bump.

Change-Id: I26b050c402f5721fc490126e9becb643af9279b4
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
Partial-Bug: #1879878
(cherry picked from commit a57800d3825ef2fb833d8024c6f7e5c550f55e2f)
(cherry picked from commit 4fcada57d6c569a3b9c8094cdfb37b77ec2a8cb5)
",git fetch https://review.opendev.org/openstack/nova refs/changes/68/751368/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/compute/test_resource_tracker.py', 'nova/tests/unit/compute/test_compute.py', 'nova/tests/functional/regressions/test_bug_1879878.py', 'nova/compute/manager.py', 'nova/compute/resource_tracker.py']",6,78a4ec49bf735cba5477b030537074a627032e55,bug/1879878," def drop_move_claim_at_source(self, context, instance, migration): """"""Drop a move claim after confirming a resize or cold migration."""""" migration.status = 'confirmed' migration.save() self._drop_move_claim( context, instance, migration.source_node, instance.old_flavor, prefix='old_') # NOTE(stephenfin): Unsetting this is unnecessary for cross-cell # resize, since the source and dest instance objects are different and # the source instance will be deleted soon. It's easier to just do it # though. instance.drop_migration_context() @utils.synchronized(COMPUTE_RESOURCE_SEMAPHORE) self._drop_move_claim( context, instance, nodename, instance_type, prefix='new_') def _drop_move_claim( self, context, instance, nodename, instance_type=None, prefix='new_', ):",,47,43
openstack%2Fnova~842963,openstack/nova,stable/train,Id908a7224ff3378b3b51726bbfa8b5805d38ca59,Fix instance's image_ref lost on failed unshelving,ABANDONED,2022-05-23 11:23:45.000000000,2023-09-01 16:54:52.000000000,,"[{'_account_id': 22348}, {'_account_id': 29037}]","[{'number': 1, 'created': '2022-05-23 11:23:45.000000000', 'files': ['nova/tests/unit/compute/test_shelve.py', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3ac37f362583f2dbac922b20db9c3c3df2c84792', 'message': ""Fix instance's image_ref lost on failed unshelving\n\nCloses-Bug: #1934094\n\nSigned-off-by: Pierre-Samuel Le Stang <pierre-samuel.le-stang@corp.ovh.com>\nChange-Id: Id908a7224ff3378b3b51726bbfa8b5805d38ca59\n(cherry picked from commit 518b952bdeb6ec29252b56527b8c8d7b32abe1b5)\n(cherry picked from commit 076f95371a093a0e594c0d08e410676c9a73c9d0)\n(cherry picked from commit 328cf1073dca4c092f29cf192aaab14eae03143b)\n(cherry picked from commit f03334323c212a6f98ca94643ec258139068a071)\n(cherry picked from commit 7b790694fdb219222cdc42423cacbc8d1dbf60be)\n""}]",2,842963,3ac37f362583f2dbac922b20db9c3c3df2c84792,10,2,1,9708,,,0,"Fix instance's image_ref lost on failed unshelving

Closes-Bug: #1934094

Signed-off-by: Pierre-Samuel Le Stang <pierre-samuel.le-stang@corp.ovh.com>
Change-Id: Id908a7224ff3378b3b51726bbfa8b5805d38ca59
(cherry picked from commit 518b952bdeb6ec29252b56527b8c8d7b32abe1b5)
(cherry picked from commit 076f95371a093a0e594c0d08e410676c9a73c9d0)
(cherry picked from commit 328cf1073dca4c092f29cf192aaab14eae03143b)
(cherry picked from commit f03334323c212a6f98ca94643ec258139068a071)
(cherry picked from commit 7b790694fdb219222cdc42423cacbc8d1dbf60be)
",git fetch https://review.opendev.org/openstack/nova refs/changes/63/842963/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_shelve.py', 'nova/compute/manager.py']",2,3ac37f362583f2dbac922b20db9c3c3df2c84792,bug/1934094, # Set the image_ref back to initial image_ref because instance # object might have been saved with image['id'] # https://bugs.launchpad.net/nova/+bug/1934094 instance.image_ref = shelved_image_ref,,6,6
openstack%2Fnova~839718,openstack/nova,stable/train,I7b432d7a32aeb1ab765d1f731691c7841a8f1440,Simulate bug 1969496,ABANDONED,2022-04-28 10:50:56.000000000,2023-09-01 16:54:45.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-04-28 10:50:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/39536a1170cdaa1a0fdf649cba836c0d3523f1b7', 'message': ""Simulate bug 1969496\n\nAs If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 stated there is a way for\nthe pci_device table to become inconsistent. Parent PF can be in\n'available' state while children VFs are still in 'unavailable' state.\nIn this situation the PF is schedulable but the PCI claim will fail to\nwhen try to mark the dependent VFs unavailable.\n\nThis patch adds a test case that shows the error.\n\nRelated-Bug: #1969496\n\nChange-Id: I7b432d7a32aeb1ab765d1f731691c7841a8f1440\n""}, {'number': 2, 'created': '2022-05-06 09:20:21.000000000', 'files': ['nova/tests/unit/pci/test_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/b5787eeb121434bd3ae737be7b381a959df5ac20', 'message': ""Simulate bug 1969496\n\nAs If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 stated there is a way for\nthe pci_device table to become inconsistent. Parent PF can be in\n'available' state while children VFs are still in 'unavailable' state.\nIn this situation the PF is schedulable but the PCI claim will fail to\nwhen try to mark the dependent VFs unavailable.\n\nThis patch adds a test case that shows the error.\n\nRelated-Bug: #1969496\n\nChange-Id: I7b432d7a32aeb1ab765d1f731691c7841a8f1440\n(cherry picked from commit 9ee5d2c66255f83cc8a66f1b5648fa13e1d73f47)\n(cherry picked from commit 23c48b670668e9cae886b5113c776077780f5581)\n(cherry picked from commit 96e00c30fc7356874a13f75eb5ee46c87fb448d0)\n(cherry picked from commit e153335a5e70f7e694d344665614279fc6d58136)\n(cherry picked from commit 0c671b354ca99aaadf2f3eaab8c40490c6c76707)\n(cherry picked from commit 6d60c87299a9cb9e908448d630456977a0c350b4)\n""}]",1,839718,b5787eeb121434bd3ae737be7b381a959df5ac20,12,1,2,9708,,,0,"Simulate bug 1969496

As If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 stated there is a way for
the pci_device table to become inconsistent. Parent PF can be in
'available' state while children VFs are still in 'unavailable' state.
In this situation the PF is schedulable but the PCI claim will fail to
when try to mark the dependent VFs unavailable.

This patch adds a test case that shows the error.

Related-Bug: #1969496

Change-Id: I7b432d7a32aeb1ab765d1f731691c7841a8f1440
(cherry picked from commit 9ee5d2c66255f83cc8a66f1b5648fa13e1d73f47)
(cherry picked from commit 23c48b670668e9cae886b5113c776077780f5581)
(cherry picked from commit 96e00c30fc7356874a13f75eb5ee46c87fb448d0)
(cherry picked from commit e153335a5e70f7e694d344665614279fc6d58136)
(cherry picked from commit 0c671b354ca99aaadf2f3eaab8c40490c6c76707)
(cherry picked from commit 6d60c87299a9cb9e908448d630456977a0c350b4)
",git fetch https://review.opendev.org/openstack/nova refs/changes/18/839718/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/pci/test_manager.py'],1,39536a1170cdaa1a0fdf649cba836c0d3523f1b7,bug/1969496,"from nova import exception def test_claim_available_pf_while_child_vf_is_unavailable(self): # NOTE(gibi): this is bug 1969496. The state created here is # inconsistent and should not happen. But it did happen in some cases # where we were not able to track down the way how it happened. # We start with a PF parent and a VF child. The PF is available and # the VF is unavailable. pf = copy.deepcopy(fake_db_dev_3) vf = copy.deepcopy(fake_db_dev_4) vf['status'] = fields.PciDeviceStatus.UNAVAILABLE self._create_tracker([pf, vf]) pf_dev = self._get_device_by_address(pf['address']) self.assertEqual('available', pf_dev.status) vf_dev = self._get_device_by_address(vf['address']) self.assertEqual('unavailable', vf_dev.status) pci_requests_obj = self._create_pci_requests_object( [ { 'count': 1, 'spec': [{'dev_type': fields.PciDeviceType.SRIOV_PF}] } ], instance_uuid=uuidsentinel.instance1, ) # now try to claim and allocate the PF. It should work as it is # available # This is bug 1969496 as the claim fails with exception ex = self.assertRaises( exception.PciDevicePoolEmpty, self.tracker.claim_instance, mock.sentinel.context, pci_requests_obj, None ) self.assertIn( 'Attempt to consume PCI device 1:0000:00:02.1 from empty pool', str(ex) ) pf_dev = self._get_device_by_address(pf['address']) self.assertEqual('available', pf_dev.status) vf_dev = self._get_device_by_address(vf['address']) self.assertEqual('unavailable', vf_dev.status) # This should work when the bug is fixed # self.tracker.claim_instance( # mock.sentinel.context, pci_requests_obj, None) # self.tracker.allocate_instance({'uuid': uuidsentinel.instance1}) # pf_dev = self._get_device_by_address(pf['address']) # self.assertEqual('allocated', pf_dev.status) # vf_dev = self._get_device_by_address(vf['address']) # self.assertEqual('unavailable', vf_dev.status) ",,56,0
openstack%2Fnova~836993,openstack/nova,stable/train,Icb7e3379248fe00f9a94f9860181b5de44902379,Reproduce bug 1944759,ABANDONED,2022-04-07 15:55:33.000000000,2023-09-01 16:54:36.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-04-07 15:55:33.000000000', 'files': ['nova/tests/functional/libvirt/test_numa_servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/61538121ebadaff2ccc4b4814e38481b540c1bde', 'message': 'Reproduce bug 1944759\n\nAdd functional tests to reproduce the race between resize_instance()\nand update_available_resources().\n\nConflict:\n  tests/functional/libvirt/test_numa_servers.py due to missing\n  _create_server helper and the need not to wait for vif plug in the\n  test.\n\nRelated-Bug: #1944759\n\nChange-Id: Icb7e3379248fe00f9a94f9860181b5de44902379\n(cherry picked from commit 3e4e4489b7a6e9cdefcc6ff02ed99a0a70420fca)\n(cherry picked from commit e6c6880465824f1e327a54143f32bb5a5816ff6c)\n(cherry picked from commit 140ae45d98dabd30aef5c0ac075346de4eabcea1)\n(cherry picked from commit 0b1fa9b4ae01114299c5225d66e1f6eba25be43e)\n(cherry picked from commit da328a814453ed2eea7108a23c498c4cf3ebe438)\n'}]",2,836993,61538121ebadaff2ccc4b4814e38481b540c1bde,8,1,1,9708,,,0,"Reproduce bug 1944759

Add functional tests to reproduce the race between resize_instance()
and update_available_resources().

Conflict:
  tests/functional/libvirt/test_numa_servers.py due to missing
  _create_server helper and the need not to wait for vif plug in the
  test.

Related-Bug: #1944759

Change-Id: Icb7e3379248fe00f9a94f9860181b5de44902379
(cherry picked from commit 3e4e4489b7a6e9cdefcc6ff02ed99a0a70420fca)
(cherry picked from commit e6c6880465824f1e327a54143f32bb5a5816ff6c)
(cherry picked from commit 140ae45d98dabd30aef5c0ac075346de4eabcea1)
(cherry picked from commit 0b1fa9b4ae01114299c5225d66e1f6eba25be43e)
(cherry picked from commit da328a814453ed2eea7108a23c498c4cf3ebe438)
",git fetch https://review.opendev.org/openstack/nova refs/changes/93/836993/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/libvirt/test_numa_servers.py'],1,61538121ebadaff2ccc4b4814e38481b540c1bde,bug/1944759," def _assert_pinned_cpus(self, hostname, expected_number_of_pinned): numa_topology = objects.NUMATopology.obj_from_db_obj( objects.ComputeNode.get_by_nodename( self.ctxt, hostname, ).numa_topology, ) self.assertEqual( expected_number_of_pinned, len(numa_topology.cells[0].pinned_cpus)) def _create_server_and_resize_bug_1944759(self): self.flags( cpu_dedicated_set='0-3', cpu_shared_set='4-7', group='compute') self.flags(vcpu_pin_set=None) # don't bother waiting for neutron events since we don't actually have # neutron self.flags(vif_plugging_timeout=0) # start services self.start_computes() flavor_a_id = self._create_flavor( vcpu=2, extra_spec={'hw:cpu_policy': 'dedicated'}) server = self.api.post_server( {'server': self._build_server(flavor_a_id)} ) server = self._wait_for_state_change(server, 'BUILD') src_host = server['OS-EXT-SRV-ATTR:host'] self._assert_pinned_cpus(src_host, 2) # we don't really care what the new flavor is, so long as the old # flavor is using pinning. We use a similar flavor for simplicity. flavor_b_id = self._create_flavor( vcpu=2, extra_spec={'hw:cpu_policy': 'dedicated'}) orig_rpc_finish_resize = nova.compute.rpcapi.ComputeAPI.finish_resize # Simulate that the finish_resize call overlaps with an # update_available_resource periodic job def inject_periodic_to_finish_resize(*args, **kwargs): self._run_periodics() return orig_rpc_finish_resize(*args, **kwargs) self.stub_out( 'nova.compute.rpcapi.ComputeAPI.finish_resize', inject_periodic_to_finish_resize, ) # TODO(stephenfin): The mock of 'migrate_disk_and_power_off' should # probably be less...dumb with mock.patch( 'nova.virt.libvirt.driver.LibvirtDriver' '.migrate_disk_and_power_off', return_value='{}', ): post = {'resize': {'flavorRef': flavor_b_id}} self.api.post_server_action(server['id'], post) server = self._wait_for_state_change(server, 'VERIFY_RESIZE') dst_host = server['OS-EXT-SRV-ATTR:host'] # This is a resource accounting bug, we should have 2 cpus pinned on # both computes. The source should have it due to the outbound # migration and the destination due to the instance running there self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 2) return server, src_host, dst_host def test_resize_confirm_bug_1944759(self): server, src_host, dst_host = ( self._create_server_and_resize_bug_1944759()) # Now confirm the resize post = {'confirmResize': None} # FIXME(gibi): This is bug 1944759 where during resize, on the source # node the resize_instance() call at the point of calling finish_resize # overlaps with a update_available_resources() periodic job. This # causes that the periodic job will not track the migration nor the # instance and therefore freeing the resource allocation. Then when # later the resize is confirmed the confirm_resize on the source # compute also wants to free up the resources, the pinned CPUs, and it # fails as they are already freed. exc = self.assertRaises( client.OpenStackApiException, self.api.post_server_action, server['id'], post ) self.assertEqual(500, exc.response.status_code) self.assertIn('CPUUnpinningInvalid', str(exc)) # confirm failed above but the resource allocation reflects that the # VM is running on the dest node self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 2) self._run_periodics() # and such allocation situation is stable so as a recovery the VM # can be reset-state to ACTIVE without problem. self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 2) def test_resize_revert_bug_1944759(self): server, src_host, dst_host = ( self._create_server_and_resize_bug_1944759()) # Now revert the resize post = {'revertResize': None} # reverts actually succeeds (not like confirm) but the resource # allocation is still flaky self.api.post_server_action(server['id'], post) self._wait_for_state_change(server, 'ACTIVE') # This is a resource accounting bug. After the revert the source host # should have 2 cpus pinned due to the instance. self._assert_pinned_cpus(src_host, 0) self._assert_pinned_cpus(dst_host, 0) # running the periodic job will fix the resource accounting self._run_periodics() # this is now correct self._assert_pinned_cpus(src_host, 2) self._assert_pinned_cpus(dst_host, 0) ",,126,0
openstack%2Fnova~840854,openstack/nova,stable/train,I20fb4ea96d5dfabfc4be3b5ecec0e4e6c5b3a318,Isolate PCI tracker unit tests,ABANDONED,2022-05-06 09:20:21.000000000,2023-09-01 16:54:29.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-05-06 09:20:21.000000000', 'files': ['nova/tests/unit/pci/test_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/f893777553857f7901354333d77e21431aa80a93', 'message': 'Isolate PCI tracker unit tests\n\nDuring the testing If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 we noticed\nthat the unit test cases of PciTracker._set_hvdev are changing and\nleaking global state leading to unstable tests.\n\nTo reproduce on master, duplicate the\ntest_set_hvdev_remove_tree_maintained_with_allocations test case and run\nPciDevTrackerTestCase serially. The duplicated test case will fail with\n\n  File ""/nova/nova/objects/pci_device.py"", line 238, in _from_db_object\n  setattr(pci_device, key, db_dev[key])\n  KeyError: \'id\'\n\nThis is caused by the fact that the test data is defined on module\nlevel, both _create_tracker and _set_hvdevs modifies the devices\npassed to them, and some test mixes passing db dicts to _set_hvdevs\nthat expects pci dicts from the hypervisor.\n\nThis patch fixes multiple related issues:\n* always deepcopy what _create_tracker takes as that list is later\n  returned to the PciTracker via a mock and the tracker might modify\n  what it got\n\n* ensure that _create_tracker takes db dicts (with id field) while\n  _set_hvdevs takes pci dicts in the hypervisor format (without id\n  field)\n\n* always deepcopy what is passed to _set_hvdevs as the PciTracker modify\n  what it gets.\n\n* normalize when the deepcopy happens to give a safe patter for future\n  test cases\n\nChange-Id: I20fb4ea96d5dfabfc4be3b5ecec0e4e6c5b3a318\n(cherry picked from commit c58376db75917444831934963fa75b4b57f08818)\n(cherry picked from commit f04cfd42359d555e746df0e2c48d989d0c3244f1)\n(cherry picked from commit 1023580f6d9008f5e56f6d3905b6e227bd2bff67)\n(cherry picked from commit 3335d9317994ea3490fbc9945e0e961c42aef907)\n(cherry picked from commit 2fb300f71e87490f3e91d03dd5ce8eb88a5996a7)\n(cherry picked from commit cc705b6258c2ca270922c5f07d55e2413c16ec40)\n'}]",1,840854,f893777553857f7901354333d77e21431aa80a93,6,1,1,9708,,,0,"Isolate PCI tracker unit tests

During the testing If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 we noticed
that the unit test cases of PciTracker._set_hvdev are changing and
leaking global state leading to unstable tests.

To reproduce on master, duplicate the
test_set_hvdev_remove_tree_maintained_with_allocations test case and run
PciDevTrackerTestCase serially. The duplicated test case will fail with

  File ""/nova/nova/objects/pci_device.py"", line 238, in _from_db_object
  setattr(pci_device, key, db_dev[key])
  KeyError: 'id'

This is caused by the fact that the test data is defined on module
level, both _create_tracker and _set_hvdevs modifies the devices
passed to them, and some test mixes passing db dicts to _set_hvdevs
that expects pci dicts from the hypervisor.

This patch fixes multiple related issues:
* always deepcopy what _create_tracker takes as that list is later
  returned to the PciTracker via a mock and the tracker might modify
  what it got

* ensure that _create_tracker takes db dicts (with id field) while
  _set_hvdevs takes pci dicts in the hypervisor format (without id
  field)

* always deepcopy what is passed to _set_hvdevs as the PciTracker modify
  what it gets.

* normalize when the deepcopy happens to give a safe patter for future
  test cases

Change-Id: I20fb4ea96d5dfabfc4be3b5ecec0e4e6c5b3a318
(cherry picked from commit c58376db75917444831934963fa75b4b57f08818)
(cherry picked from commit f04cfd42359d555e746df0e2c48d989d0c3244f1)
(cherry picked from commit 1023580f6d9008f5e56f6d3905b6e227bd2bff67)
(cherry picked from commit 3335d9317994ea3490fbc9945e0e961c42aef907)
(cherry picked from commit 2fb300f71e87490f3e91d03dd5ce8eb88a5996a7)
(cherry picked from commit cc705b6258c2ca270922c5f07d55e2413c16ec40)
",git fetch https://review.opendev.org/openstack/nova refs/changes/54/840854/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/pci/test_manager.py'],1,f893777553857f7901354333d77e21431aa80a93,bug/1969496,"fake_pci_devs = [fake_pci, fake_pci_1, fake_pci_2] fake_pci_devs_tree = [fake_pci_3, fake_pci_4, fake_pci_5] self.fake_devs = copy.deepcopy(fake_devs) self.fake_devs = copy.deepcopy(fake_db_devs) self._create_tracker(fake_db_devs) fake_pci_devs = [fake_pci, fake_pci_1, fake_pci_2, fake_pci_3] self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs)) fake_pci_devs = [fake_pci_3, fake_pci_4, fake_pci_5, fake_new_device] self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs)) fake_pci_devs = [fake_pci, fake_pci_2, fake_pci_v2] self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs)) self.tracker._set_hvdevs(copy.deepcopy([fake_pci])) fake_pci_devs = [fake_pci_3, fake_pci_4] self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs)) all_db_devs = fake_db_devs_tree all_pci_devs = fake_pci_devs_tree self._create_tracker(all_db_devs) self.tracker._set_hvdevs(copy.deepcopy(all_pci_devs)) fake_pci_devs = [dev for dev in all_pci_devs self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs)) self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs)) fake_pci_devs = [fake_pci, fake_pci_2, fake_pci_3] self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs)) fake_pci_3 = dict(fake_pci_1, address='0000:00:00.4') fake_devs_numa = copy.deepcopy(fake_pci_devs) fake_devs_numa.append(fake_pci_3) self.tracker = manager.PciDevTracker(mock.sentinel.context, 1) self.tracker._set_hvdevs(copy.deepcopy(fake_devs_numa)) fake_pci_devs = [fake_pci, fake_pci_2, fake_pci_v3] self.tracker._set_hvdevs(copy.deepcopy(fake_pci_devs))"," self.fake_devs = fake_devs self.fake_devs = fake_db_devs[:] self._create_tracker(fake_db_devs[:]) fake_pci_devs = [copy.deepcopy(fake_pci), copy.deepcopy(fake_pci_1), copy.deepcopy(fake_pci_2), copy.deepcopy(fake_pci_3)] self.tracker._set_hvdevs(fake_pci_devs) fake_pci_devs = [copy.deepcopy(fake_pci_3), copy.deepcopy(fake_pci_4), copy.deepcopy(fake_pci_5), copy.deepcopy(fake_new_device)] self.tracker._set_hvdevs(fake_pci_devs) fake_pci_devs = [copy.deepcopy(fake_pci), copy.deepcopy(fake_pci_2), copy.deepcopy(fake_pci_v2)] self.tracker._set_hvdevs(fake_pci_devs) self.tracker._set_hvdevs([fake_pci]) fake_pci_devs = [copy.deepcopy(fake_pci_3), copy.deepcopy(fake_pci_4)] self.tracker._set_hvdevs(fake_pci_devs) all_devs = fake_db_devs_tree[:] self._create_tracker(all_devs) self.tracker._set_hvdevs(all_devs) fake_pci_devs = [dev for dev in all_devs self.tracker._set_hvdevs(fake_pci_devs) self.tracker._set_hvdevs(fake_pci_devs) fake_pci_devs = [copy.deepcopy(fake_pci), copy.deepcopy(fake_pci_2), copy.deepcopy(fake_pci_3)] self.tracker._set_hvdevs(fake_pci_devs) fake_db_dev_3 = dict(fake_db_dev_1, id=4, address='0000:00:00.4') fake_devs_numa = copy.deepcopy(fake_db_devs) fake_devs_numa.append(fake_db_dev_3) self.tracker = manager.PciDevTracker(1) self.tracker._set_hvdevs(fake_devs_numa) fake_pci_devs = [copy.deepcopy(fake_pci), copy.deepcopy(fake_pci_2), copy.deepcopy(fake_pci_v3)] self.tracker._set_hvdevs(fake_pci_devs)",31,34
openstack%2Fnova~839719,openstack/nova,stable/train,I575ce06bcc913add7db0849f85728371da2032fc,Allow claiming PCI PF if child VF is unavailable,ABANDONED,2022-04-28 10:50:56.000000000,2023-09-01 16:54:22.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-04-28 10:50:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1ee4acf37233e50e7e810d005d8b77992c89bdfc', 'message': ""Allow claiming PCI PF if child VF is unavailable\n\nAs If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 stated there is a way for\nthe pci_device table to become inconsistent. Parent PF can be in\n'available' state while children VFs are still in 'unavailable' state.\nIn this situation the PF is schedulable but the PCI claim will fail\nwhen try to mark the dependent VFs unavailable.\n\nThis patch changes the PCI claim logic to allow claiming the parent PF\nin the inconsistent situation as we assume that it is safe to do so.\nThis claim also fixed the inconsistency so that when the parent PF is\nfreed the children VFs become available again.\n\nCloses-Bug: #1969496\nChange-Id: I575ce06bcc913add7db0849f85728371da2032fc\n""}, {'number': 2, 'created': '2022-05-06 09:20:21.000000000', 'files': ['nova/objects/pci_device.py', 'nova/tests/unit/pci/test_manager.py', 'nova/pci/stats.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c1856bc630ddfb900da64631c636b1ba4662b025', 'message': ""Allow claiming PCI PF if child VF is unavailable\n\nAs If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 stated there is a way for\nthe pci_device table to become inconsistent. Parent PF can be in\n'available' state while children VFs are still in 'unavailable' state.\nIn this situation the PF is schedulable but the PCI claim will fail\nwhen try to mark the dependent VFs unavailable.\n\nThis patch changes the PCI claim logic to allow claiming the parent PF\nin the inconsistent situation as we assume that it is safe to do so.\nThis claim also fixed the inconsistency so that when the parent PF is\nfreed the children VFs become available again.\n\nCloses-Bug: #1969496\nChange-Id: I575ce06bcc913add7db0849f85728371da2032fc\n(cherry picked from commit 3af2ecc13fa9334de8418accaed4fffefefb41da)\n(cherry picked from commit 4ca4b2e6bc84ca2c209653b46d7428c6c7cbd270)\n(cherry picked from commit 1dbd45be4556c034eb469462698804984d95b503)\n(cherry picked from commit a763104217f2188b398d7eddaf3d21b91c66d2fa)\n(cherry picked from commit 5d484576efca56aebc36a60abaf410c4e3bb2727)\n(cherry picked from commit 57f6772912004bbf1fff9234b9177bb00aacb661)\n""}]",1,839719,c1856bc630ddfb900da64631c636b1ba4662b025,13,1,2,9708,,,0,"Allow claiming PCI PF if child VF is unavailable

As If9ab424cc7375a1f0d41b03f01c4a823216b3eb8 stated there is a way for
the pci_device table to become inconsistent. Parent PF can be in
'available' state while children VFs are still in 'unavailable' state.
In this situation the PF is schedulable but the PCI claim will fail
when try to mark the dependent VFs unavailable.

This patch changes the PCI claim logic to allow claiming the parent PF
in the inconsistent situation as we assume that it is safe to do so.
This claim also fixed the inconsistency so that when the parent PF is
freed the children VFs become available again.

Closes-Bug: #1969496
Change-Id: I575ce06bcc913add7db0849f85728371da2032fc
(cherry picked from commit 3af2ecc13fa9334de8418accaed4fffefefb41da)
(cherry picked from commit 4ca4b2e6bc84ca2c209653b46d7428c6c7cbd270)
(cherry picked from commit 1dbd45be4556c034eb469462698804984d95b503)
(cherry picked from commit a763104217f2188b398d7eddaf3d21b91c66d2fa)
(cherry picked from commit 5d484576efca56aebc36a60abaf410c4e3bb2727)
(cherry picked from commit 57f6772912004bbf1fff9234b9177bb00aacb661)
",git fetch https://review.opendev.org/openstack/nova refs/changes/19/839719/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/objects/pci_device.py', 'nova/tests/unit/pci/test_manager.py', 'nova/pci/stats.py']",3,1ee4acf37233e50e7e810d005d8b77992c89bdfc,bug/1969496, free_devs = self.get_free_devs() for vf in vfs_list: # NOTE(gibi): do not try to remove a device that are # already removed if vf in free_devs: self.remove_device(vf), for vf in vfs_list: self.remove_device(vf),61,27
openstack%2Fnova~839717,openstack/nova,stable/train,If9ab424cc7375a1f0d41b03f01c4a823216b3eb8,Remove unavailable but not reported PCI devices at startup,ABANDONED,2022-04-28 10:50:56.000000000,2023-09-01 16:54:16.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-04-28 10:50:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ae29dc2b9c8db6ee4094112b17374399ea5bee81', 'message': 'Remove unavailable but not reported PCI devices at startup\n\nWe saw in the field that the pci_devices table can end up in\ninconsistent state after a compute node HW failure and re-deployment.\nThere could be dependent devices where the parent PF is in available\nstate while the children VFs are in unavailable state. (Before the HW\nfault the PF was allocated hence the VFs was marked unavailable).\n\nIn this state this PF is still schedulable but during the\nPCI claim the handling of dependent devices in the PCI tracker fill fail\nwith the error: ""Attempt to consume PCI device XXX from empty pool"".\n\nThe reason of the failure is that when the PF is claimed, all the\nchildren VFs are marked unavailable. But if the VF is already\nunavailable such step fails.\n\nOne way the deployer might try to recover from this state is to remove\nthe VFs from the hypervisor and restart the compute agent. The compute\nstartup already has a logic to delete PCI devices that are unused and\nnot reported by the hypervisor. However this logic only removed devices\nin \'available\' state and ignored devices in \'unavailable\' state.\n\nIf a device is unused and the hypervisor is not reporting the device any\nmore then it is safe to delete that device from the PCI tracker. So this\npatch extends the logic to allow deleting \'unavailable\' devices. There\nis a small window when dependent PCI device is in \'unclaimable\' state.\nFrom cleanup perspective this is an analogous state. So it is also\nadded to the cleanup logic.\n\nRelated-Bug: #1969496\n\nChange-Id: If9ab424cc7375a1f0d41b03f01c4a823216b3eb8\n'}, {'number': 2, 'created': '2022-05-06 09:20:21.000000000', 'files': ['nova/objects/pci_device.py', 'nova/pci/manager.py', 'nova/tests/unit/objects/test_pci_device.py', 'nova/tests/unit/pci/test_manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3a73728d287d2fa4a7444fa565e4310662fc7653', 'message': 'Remove unavailable but not reported PCI devices at startup\n\nWe saw in the field that the pci_devices table can end up in\ninconsistent state after a compute node HW failure and re-deployment.\nThere could be dependent devices where the parent PF is in available\nstate while the children VFs are in unavailable state. (Before the HW\nfault the PF was allocated hence the VFs was marked unavailable).\n\nIn this state this PF is still schedulable but during the\nPCI claim the handling of dependent devices in the PCI tracker fill fail\nwith the error: ""Attempt to consume PCI device XXX from empty pool"".\n\nThe reason of the failure is that when the PF is claimed, all the\nchildren VFs are marked unavailable. But if the VF is already\nunavailable such step fails.\n\nOne way the deployer might try to recover from this state is to remove\nthe VFs from the hypervisor and restart the compute agent. The compute\nstartup already has a logic to delete PCI devices that are unused and\nnot reported by the hypervisor. However this logic only removed devices\nin \'available\' state and ignored devices in \'unavailable\' state.\n\nIf a device is unused and the hypervisor is not reporting the device any\nmore then it is safe to delete that device from the PCI tracker. So this\npatch extends the logic to allow deleting \'unavailable\' devices. There\nis a small window when dependent PCI device is in \'unclaimable\' state.\nFrom cleanup perspective this is an analogous state. So it is also\nadded to the cleanup logic.\n\nRelated-Bug: #1969496\nChange-Id: If9ab424cc7375a1f0d41b03f01c4a823216b3eb8\n(cherry picked from commit 284ea72e96604bdf16d1c5c4db47247334841b2f)\n(cherry picked from commit d7bca631fea348fb56cc46c5680643bacd82513e)\n(cherry picked from commit 580a4b14ae367e327229482decca0cb6cdf6e9d8)\n(cherry picked from commit 59ae44754ebce106b23bc697a822d181cdda41c6)\n(cherry picked from commit fdf52a1b099683ec65f6f0488ef73c952d90e002)\n(cherry picked from commit 28c8ebc7b21a4606c7c652c185ba80eaefd5d537)\n'}]",1,839717,3a73728d287d2fa4a7444fa565e4310662fc7653,13,1,2,9708,,,0,"Remove unavailable but not reported PCI devices at startup

We saw in the field that the pci_devices table can end up in
inconsistent state after a compute node HW failure and re-deployment.
There could be dependent devices where the parent PF is in available
state while the children VFs are in unavailable state. (Before the HW
fault the PF was allocated hence the VFs was marked unavailable).

In this state this PF is still schedulable but during the
PCI claim the handling of dependent devices in the PCI tracker fill fail
with the error: ""Attempt to consume PCI device XXX from empty pool"".

The reason of the failure is that when the PF is claimed, all the
children VFs are marked unavailable. But if the VF is already
unavailable such step fails.

One way the deployer might try to recover from this state is to remove
the VFs from the hypervisor and restart the compute agent. The compute
startup already has a logic to delete PCI devices that are unused and
not reported by the hypervisor. However this logic only removed devices
in 'available' state and ignored devices in 'unavailable' state.

If a device is unused and the hypervisor is not reporting the device any
more then it is safe to delete that device from the PCI tracker. So this
patch extends the logic to allow deleting 'unavailable' devices. There
is a small window when dependent PCI device is in 'unclaimable' state.
From cleanup perspective this is an analogous state. So it is also
added to the cleanup logic.

Related-Bug: #1969496
Change-Id: If9ab424cc7375a1f0d41b03f01c4a823216b3eb8
(cherry picked from commit 284ea72e96604bdf16d1c5c4db47247334841b2f)
(cherry picked from commit d7bca631fea348fb56cc46c5680643bacd82513e)
(cherry picked from commit 580a4b14ae367e327229482decca0cb6cdf6e9d8)
(cherry picked from commit 59ae44754ebce106b23bc697a822d181cdda41c6)
(cherry picked from commit fdf52a1b099683ec65f6f0488ef73c952d90e002)
(cherry picked from commit 28c8ebc7b21a4606c7c652c185ba80eaefd5d537)
",git fetch https://review.opendev.org/openstack/nova refs/changes/17/839717/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/objects/pci_device.py', 'nova/pci/manager.py', 'nova/tests/unit/objects/test_pci_device.py', 'nova/tests/unit/pci/test_manager.py']",4,ae29dc2b9c8db6ee4094112b17374399ea5bee81,bug/1969496," def _get_device_by_address(self, address): devs = [dev for dev in self.tracker.pci_devs if dev.address == address] if len(devs) == 1: return devs[0] if devs: raise ValueError('ambiguous address', devs) else: raise ValueError('device not found', address) def test_set_hvdevs_unavailable_vf_removed(self): # We start with a PF parent and two VF children self._create_tracker([fake_db_dev_3, fake_db_dev_4, fake_db_dev_5]) pci_requests_obj = self._create_pci_requests_object( [ { 'count': 1, 'spec': [{'dev_type': fields.PciDeviceType.SRIOV_PF}] } ], instance_uuid=uuidsentinel.instance1, ) # then claim and allocate the PF that makes the VFs unavailable self.tracker.claim_instance( mock.sentinel.context, pci_requests_obj, None) self.tracker.allocate_instance({'uuid': uuidsentinel.instance1}) dev3_pf = self._get_device_by_address(fake_db_dev_3['address']) self.assertEqual('allocated', dev3_pf.status) self.assertEqual(uuidsentinel.instance1, dev3_pf.instance_uuid) dev4_vf = self._get_device_by_address(fake_db_dev_4['address']) self.assertEqual('unavailable', dev4_vf.status) dev5_vf = self._get_device_by_address(fake_db_dev_5['address']) self.assertEqual('unavailable', dev5_vf.status) # now simulate that one VF (dev_5) is removed from the hypervisor and # the compute is restarted. As the VF is not claimed or allocated we # are free to remove it from the tracker. self.tracker._set_hvdevs([fake_db_dev_3, fake_db_dev_4]) dev3_pf = self._get_device_by_address(fake_db_dev_3['address']) self.assertEqual('allocated', dev3_pf.status) self.assertEqual(uuidsentinel.instance1, dev3_pf.instance_uuid) dev4_vf = self._get_device_by_address(fake_db_dev_4['address']) self.assertEqual('unavailable', dev4_vf.status) dev5_vf = self._get_device_by_address(fake_db_dev_5['address']) self.assertEqual('removed', dev5_vf.status) def test_set_hvdevs_unavailable_pf_removed(self): # We start with one PF parent and one child VF self._create_tracker([fake_db_dev_3, fake_db_dev_4]) pci_requests_obj = self._create_pci_requests_object( [ { 'count': 1, 'spec': [{'dev_type': fields.PciDeviceType.SRIOV_VF}] } ], instance_uuid=uuidsentinel.instance1, ) # Then we claim and allocate the VF that makes the PF unavailable self.tracker.claim_instance( mock.sentinel.context, pci_requests_obj, None) self.tracker.allocate_instance({'uuid': uuidsentinel.instance1}) dev3_pf = self._get_device_by_address(fake_db_dev_3['address']) self.assertEqual('unavailable', dev3_pf.status) dev4_vf = self._get_device_by_address(fake_db_dev_4['address']) self.assertEqual('allocated', dev4_vf.status) self.assertEqual(uuidsentinel.instance1, dev4_vf.instance_uuid) # now simulate that the parent PF is removed from the hypervisor and # the compute is restarted. As the PF is not claimed or allocated we # are free to remove it from the tracker. self.tracker._set_hvdevs([fake_db_dev_4]) dev3_pf = self._get_device_by_address(fake_db_dev_3['address']) self.assertEqual('removed', dev3_pf.status) dev4_vf = self._get_device_by_address(fake_db_dev_4['address']) self.assertEqual('allocated', dev4_vf.status) self.assertEqual(uuidsentinel.instance1, dev4_vf.instance_uuid) ",,123,7
openstack%2Fnova~842962,openstack/nova,stable/train,I8f7f26e10519c87e06de47bd4d9845151f889129,Reproducer unit test for bug 1934094,ABANDONED,2022-05-23 11:23:45.000000000,2023-09-01 16:54:08.000000000,,"[{'_account_id': 22348}, {'_account_id': 29037}]","[{'number': 1, 'created': '2022-05-23 11:23:45.000000000', 'files': ['nova/tests/unit/compute/test_shelve.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/51652f4d19059e4ee8e622e8ba32d25722e33b04', 'message': 'Reproducer unit test for bug 1934094\n\nRelated bug: #1934094\n\nConflicts:\n      nova/tests/unit/compute/test_shelve.py due to\nI678722b3cf295c89110967d5ad8c0c964df4cb42 not in stable/train\n\nSigned-off-by: Pierre-Samuel Le Stang <pierre-samuel.le-stang@corp.ovh.com>\nChange-Id: I8f7f26e10519c87e06de47bd4d9845151f889129\n(cherry picked from commit 78e10f5f14a018fd1d96ea242923631459acb62c)\n(cherry picked from commit ec73ff1f78714eb62686d0f39fc4e79ffdf559af)\n(cherry picked from commit 77b9bbd0e5926ffad382ae97099cc829153000a5)\n(cherry picked from commit 7cda2f49ff93011b6f8a3bccf2a4c8b7fa73fc20)\n(cherry picked from commit 0a99f3c0bf03e9b908612bc052765aed82bdf74c)\n'}]",0,842962,51652f4d19059e4ee8e622e8ba32d25722e33b04,4,2,1,9708,,,0,"Reproducer unit test for bug 1934094

Related bug: #1934094

Conflicts:
      nova/tests/unit/compute/test_shelve.py due to
I678722b3cf295c89110967d5ad8c0c964df4cb42 not in stable/train

Signed-off-by: Pierre-Samuel Le Stang <pierre-samuel.le-stang@corp.ovh.com>
Change-Id: I8f7f26e10519c87e06de47bd4d9845151f889129
(cherry picked from commit 78e10f5f14a018fd1d96ea242923631459acb62c)
(cherry picked from commit ec73ff1f78714eb62686d0f39fc4e79ffdf559af)
(cherry picked from commit 77b9bbd0e5926ffad382ae97099cc829153000a5)
(cherry picked from commit 7cda2f49ff93011b6f8a3bccf2a4c8b7fa73fc20)
(cherry picked from commit 0a99f3c0bf03e9b908612bc052765aed82bdf74c)
",git fetch https://review.opendev.org/openstack/nova refs/changes/62/842962/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/compute/test_shelve.py'],1,51652f4d19059e4ee8e622e8ba32d25722e33b04,bug/1934094," def test_unshelve_spawn_fails_cleanup_instance_image_ref(self): """"""Tests error handling when a instance fails to unshelve and makes sure to revert instance.image_ref to the initial value instead of keeping the one of shelved image https://bugs.launchpad.net/nova/+bug/1934094 """""" instance = self._create_fake_instance_obj() # TODO(pslestang) to uncomment when bug 1934094 is fixed # initial_image_ref = instance.image_ref fake_spec = objects.RequestSpec() shelved_image = {'id': uuids.image_id} with mock.patch.object(self.compute.driver, 'spawn', side_effect=test.TestingException('Spawn Failed')): self.assertRaises(test.TestingException, self.compute.unshelve_instance, self.context, instance, image=shelved_image, filter_properties={}, node='fake-node', request_spec=fake_spec) # FIXME(pslestang) Until bug 1934094 is fixed # The instance.image_ref is set to shelved_image.id but should be # equal to initial_image_ref self.assertEqual(instance.image_ref, shelved_image['id']) ",,24,0
openstack%2Fnova~842592,openstack/nova,stable/train,Id04e0df12829df4d8929e03a8b76b5cbe0549059,neutron: Unbind remaining ports after PortNotFound,ABANDONED,2022-05-19 18:03:03.000000000,2023-09-01 16:54:02.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-05-19 18:03:03.000000000', 'files': ['nova/network/neutronv2/api.py', 'nova/tests/unit/network/test_neutronv2.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/ed58ebceb8612207e3ebad95f271d17c3bfa3f7d', 'message': 'neutron: Unbind remaining ports after PortNotFound\n\nJust because we encountered a PortNotFound error when unbinding a port\ndoesn\'t mean we should stop unbinding the remaining ports. If this error\nis encountered, simply continue with the other ports.\n\nWhile we\'re here, we clean up some other tests related to \'_unbind_port\'\nsince they\'re clearly duplicates.\n\nConflicts:\n  nova/tests/unit/network/test_neutronv2.py\n\nNOTE(stephenfin): Conflicts are due to the absence of change\nI329f0fd589a4b2e0426485f09f6782f94275cc07 (""nova-net: Remove layer of\nindirection in \'nova.network\'"") which we don\'t want to backport.\n\nChange-Id: Id04e0df12829df4d8929e03a8b76b5cbe0549059\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\nCloses-Bug: #1974173\n(cherry picked from commit 9e0dcb52ab308a63c6a18e47d1850cc3ade4d807)\n(cherry picked from commit 6f32b118640ee466b58155b5ecd50e041b4a2e7e)\n(cherry picked from commit d322f8e8b5a95fd60dab9c6c543b4c77ea893836)\n(cherry picked from commit a49a0b970a0072bfddc1b403c75c3c4cd6636f83)\n(cherry picked from commit 581cffad7ba0a4f9950943bc029903d40f581207)\n(cherry picked from commit 5ae9813ea92f60d39346b811bbc1c92786b57f06)\n'}]",0,842592,ed58ebceb8612207e3ebad95f271d17c3bfa3f7d,4,1,1,15334,,,0,"neutron: Unbind remaining ports after PortNotFound

Just because we encountered a PortNotFound error when unbinding a port
doesn't mean we should stop unbinding the remaining ports. If this error
is encountered, simply continue with the other ports.

While we're here, we clean up some other tests related to '_unbind_port'
since they're clearly duplicates.

Conflicts:
  nova/tests/unit/network/test_neutronv2.py

NOTE(stephenfin): Conflicts are due to the absence of change
I329f0fd589a4b2e0426485f09f6782f94275cc07 (""nova-net: Remove layer of
indirection in 'nova.network'"") which we don't want to backport.

Change-Id: Id04e0df12829df4d8929e03a8b76b5cbe0549059
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
Closes-Bug: #1974173
(cherry picked from commit 9e0dcb52ab308a63c6a18e47d1850cc3ade4d807)
(cherry picked from commit 6f32b118640ee466b58155b5ecd50e041b4a2e7e)
(cherry picked from commit d322f8e8b5a95fd60dab9c6c543b4c77ea893836)
(cherry picked from commit a49a0b970a0072bfddc1b403c75c3c4cd6636f83)
(cherry picked from commit 581cffad7ba0a4f9950943bc029903d40f581207)
(cherry picked from commit 5ae9813ea92f60d39346b811bbc1c92786b57f06)
",git fetch https://review.opendev.org/openstack/nova refs/changes/92/842592/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/network/neutronv2/api.py', 'nova/tests/unit/network/test_neutronv2.py']",2,ed58ebceb8612207e3ebad95f271d17c3bfa3f7d,bug/1974173," @mock.patch('nova.network.neutron.get_client') def test_unbind_ports_get_client(self, mock_neutron): @mock.patch('nova.network.neutronv2.api.get_client') def test_unbind_ports(self, mock_neutron, mock_show): @mock.patch('nova.network.neutron.API._show_port') @mock.patch('nova.network.neutronv2.api.API._show_port') @mock.patch.object(neutronapi, 'LOG') def test_unbind_ports_port_show_portnotfound_multiple_ports( self, mock_log, mock_show, ): """"""Ensure we continue unbinding ports even when one isn't found."""""" mock_show.side_effect = [ exception.PortNotFound(port_id=uuids.port_a), {'id': uuids.port_b}, ] api = neutronapi.API() neutron_client = mock.Mock() api._unbind_ports( self.context, [uuids.port_a, uuids.port_b], neutron_client, neutron_client, ) mock_show.assert_has_calls( [ mock.call( self.context, uuids.port_a, fields=['binding:profile', 'network_id'], neutron_client=neutron_client, ), mock.call( self.context, uuids.port_b, fields=['binding:profile', 'network_id'], neutron_client=neutron_client, ), ] ) # Only the port that exists should be updated neutron_client.update_port.assert_called_once_with( uuids.port_b, { 'port': { 'device_id': '', 'device_owner': '', 'binding:profile': {}, 'binding:host_id': None, } } ) mock_log.exception.assert_not_called() mock_log.debug.assert_called_with( 'Unable to show port %s as it no longer exists.', uuids.port_a, ) def test_unbind_ports_port_update_portnotfound(self, mock_log, mock_show): def test_unbind_ports_port_update_unexpected_error( self, mock_log, mock_show, ):"," def _test_unbind_ports_get_client(self, mock_neutron): @mock.patch('nova.network.neutronv2.api.get_client') def test_unbind_ports_get_client_binding_extension(self, mock_neutron): self._test_unbind_ports_get_client(mock_neutron) @mock.patch('nova.network.neutronv2.api.get_client') def test_unbind_ports_get_client(self, mock_neutron): self._test_unbind_ports_get_client(mock_neutron) def _test_unbind_ports(self, mock_neutron, mock_show): @mock.patch('nova.network.neutronv2.api.get_client') def test_unbind_ports_binding_ext(self, mock_neutron): self._test_unbind_ports(mock_neutron) @mock.patch('nova.network.neutronv2.api.get_client') def test_unbind_ports(self, mock_neutron): self._test_unbind_ports(mock_neutron) mock_show.return_value = {'id': uuids.port} def test_unbind_ports_portnotfound(self, mock_log, mock_show): def test_unbind_ports_unexpected_error(self, mock_log, mock_show):",65,23
openstack%2Fnova~838050,openstack/nova,stable/train,Ibf8dca4bd57b3bddb39955b53cc03564506f5754,Lookup nic feature by PCI address,ABANDONED,2022-04-14 23:08:18.000000000,2023-09-01 16:53:56.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-04-14 23:08:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/40fb276ee61c5d375eb788c7ce1a0241bb13f436', 'message': ""Lookup nic feature by PCI address\n\nIn some environments the libvirt nodedev list can become out of sync\nwith the current MAC address assigned to a netdev, As a result the\nnodedev lookup can fail. This results in an uncaught libvirt exception\nwhich breaks the update_available_resource function resultingin an\nincorrect resource view in the database.\n\ne.g. libvirt.libvirtError: Node device not found:\nno node device with matching name 'net_enp7s0f3v1_ea_60_77_1f_21_50'\n\nThis change removes the dependency on the nodedev name when looking up\nnic feature flags.\n\nConflicts:\n    nova/tests/unit/virt/libvirt/fakelibvirt.py\n\nNOTE(melwitt): The conflicts are because change\nIb5dbcee295d8a78b9a55806054de6265c3663343 (Functional test with pGPUs)\nis not in Train.\n\nChange-Id: Ibf8dca4bd57b3bddb39955b53cc03564506f5754\nCloses-Bug: #1883671\n(cherry picked from commit efc27ff84c3f38fbcbf75b0dc230963c58d093e4)\n(cherry picked from commit ffdf208f22f2ec64eb7172a18889a46c96d36915)\n""}, {'number': 2, 'created': '2022-04-14 23:55:21.000000000', 'files': ['nova/tests/unit/virt/libvirt/test_host.py', 'nova/pci/utils.py', 'nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_fakelibvirt.py', 'nova/virt/libvirt/host.py', 'nova/tests/unit/virt/libvirt/fakelibvirt.py', 'nova/tests/unit/pci/test_utils.py', 'releasenotes/notes/libvirt-nodedev-lookup-d80174ac30bc82f0.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/17ca3d5ed348af5e91d59790e1fbdb481b89b538', 'message': ""Lookup nic feature by PCI address\n\nIn some environments the libvirt nodedev list can become out of sync\nwith the current MAC address assigned to a netdev, As a result the\nnodedev lookup can fail. This results in an uncaught libvirt exception\nwhich breaks the update_available_resource function resultingin an\nincorrect resource view in the database.\n\ne.g. libvirt.libvirtError: Node device not found:\nno node device with matching name 'net_enp7s0f3v1_ea_60_77_1f_21_50'\n\nThis change removes the dependency on the nodedev name when looking up\nnic feature flags.\n\nConflicts:\n    nova/tests/unit/virt/libvirt/fakelibvirt.py\n\nNOTE(melwitt): The conflicts are because change\nIb5dbcee295d8a78b9a55806054de6265c3663343 (Functional test with pGPUs)\nis not in Train.\n\nChange-Id: Ibf8dca4bd57b3bddb39955b53cc03564506f5754\nCloses-Bug: #1883671\n(cherry picked from commit efc27ff84c3f38fbcbf75b0dc230963c58d093e4)\n(cherry picked from commit 82182cb343e3ae6c95392a54f5e21d38ac7ab6af)\n""}]",0,838050,17ca3d5ed348af5e91d59790e1fbdb481b89b538,7,1,2,4690,,,0,"Lookup nic feature by PCI address

In some environments the libvirt nodedev list can become out of sync
with the current MAC address assigned to a netdev, As a result the
nodedev lookup can fail. This results in an uncaught libvirt exception
which breaks the update_available_resource function resultingin an
incorrect resource view in the database.

e.g. libvirt.libvirtError: Node device not found:
no node device with matching name 'net_enp7s0f3v1_ea_60_77_1f_21_50'

This change removes the dependency on the nodedev name when looking up
nic feature flags.

Conflicts:
    nova/tests/unit/virt/libvirt/fakelibvirt.py

NOTE(melwitt): The conflicts are because change
Ib5dbcee295d8a78b9a55806054de6265c3663343 (Functional test with pGPUs)
is not in Train.

Change-Id: Ibf8dca4bd57b3bddb39955b53cc03564506f5754
Closes-Bug: #1883671
(cherry picked from commit efc27ff84c3f38fbcbf75b0dc230963c58d093e4)
(cherry picked from commit 82182cb343e3ae6c95392a54f5e21d38ac7ab6af)
",git fetch https://review.opendev.org/openstack/nova refs/changes/50/838050/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/libvirt/test_host.py', 'nova/pci/utils.py', 'nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_fakelibvirt.py', 'nova/virt/libvirt/host.py', 'nova/tests/unit/virt/libvirt/fakelibvirt.py', 'nova/tests/unit/pci/test_utils.py', 'releasenotes/notes/libvirt-nodedev-lookup-d80174ac30bc82f0.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py']",9,40fb276ee61c5d375eb788c7ce1a0241bb13f436,bug/1883671,"_fake_NodeDevXml = { ""pci_0000_04_00_3"": """""" <parent>pci_0000_04_00_3</parent> <parent>pci_0000_04_00_3</parent> ""net_enp2s1_02_9a_a1_37_be_54"": """""" <device> <name>net_enp2s1_02_9a_a1_37_be_54</name> <path>/sys/devices/pci0000:00/0000:04:00.3/0000:04:10.7/net/enp2s1</path> <parent>pci_0000_04_10_7</parent> <capability type='net'> <interface>enp2s1</interface> <address>02:9a:a1:37:be:54</address> <link state='down'/> <feature name='rx'/> <feature name='tx'/> <feature name='sg'/> <feature name='tso'/> <feature name='gso'/> <feature name='gro'/> <feature name='rxvlan'/> <feature name='txvlan'/> <capability type='80203'/> </capability> </device>"""""",_fake_NodeDevXml_parents = { name: etree.fromstring(xml).find(""parent"").text for name, xml in _fake_NodeDevXml.items() } _fake_NodeDevXml_children = defaultdict(list) for key, val in _fake_NodeDevXml_parents.items(): _fake_NodeDevXml_children[val].append(key) net_dev = fakelibvirt.NodeDevice( drvr._get_connection(), xml=_fake_NodeDevXml[dev_name]) pci_dev = fakelibvirt.NodeDevice( drvr._get_connection(), xml=_fake_NodeDevXml[parent_address]) actualvf = drvr._get_pcinet_info(pci_dev, [net_dev]) expect_vf = [""rx"", ""tx"", ""sg"", ""tso"", ""gso"", ""gro"", ""rxvlan"", ""txvlan""] self.assertEqual(expect_vf, actualvf) dev_name = ""pci_0000_04_11_7"" pci_dev = fakelibvirt.NodeDevice( drvr._get_connection(), xml=_fake_NodeDevXml[dev_name]) actual_vf = drvr._get_pcidev_info(dev_name, pci_dev, []) expect_vf = { ""dev_id"": dev_name, ""address"": ""0000:04:11.7"", ""product_id"": '1520', ""numa_node"": 0, ""vendor_id"": '8086', ""label"": 'label_8086_1520', } self.assertEqual(expect_vf, actual_vf) mock_get_ifname.assert_not_called() devs = { ""pci_0000_04_00_3"", ""pci_0000_04_10_7"", ""pci_0000_04_11_7"", ""pci_0000_04_00_1"", ""pci_0000_03_00_0"", ""pci_0000_03_00_1"" } node_devs = {} for dev_name in devs: node_devs[dev_name] = ( fakelibvirt.NodeDevice( drvr._get_connection(), xml=_fake_NodeDevXml[dev_name])) for child in _fake_NodeDevXml_children[dev_name]: node_devs[child] = ( fakelibvirt.NodeDevice( drvr._get_connection(), xml=_fake_NodeDevXml[child])) net_devs = [ dev for dev in node_devs.values() if dev.name() not in devs] name = ""pci_0000_04_00_3"" actual_vf = drvr._get_pcidev_info(name, node_devs[name], net_devs) self.assertEqual(expect_vf, actual_vf) name = ""pci_0000_04_10_7"" actual_vf = drvr._get_pcidev_info(name, node_devs[name], net_devs) ""capabilities"": { ""network"": [""rx"", ""tx"", ""sg"", ""tso"", ""gso"", ""gro"", ""rxvlan"", ""txvlan""]}, } self.assertEqual(expect_vf, actual_vf) name = ""pci_0000_04_11_7"" actual_vf = drvr._get_pcidev_info(name, node_devs[name], net_devs) expect_vf = { ""dev_id"": ""pci_0000_04_11_7"", ""address"": ""0000:04:11.7"", ""product_id"": '1520', ""vendor_id"": '8086', ""numa_node"": 0, ""label"": 'label_8086_1520', ""dev_type"": fields.PciDeviceType.SRIOV_VF, ""parent_addr"": '0000:04:00.3', ""capabilities"": { ""network"": [""rx"", ""tx"", ""sg"", ""tso"", ""gso"", ""gro"", ""rxvlan"", ""txvlan""]}, ""parent_ifname"": ""ens1"", } self.assertEqual(expect_vf, actual_vf) name = ""pci_0000_04_00_1"" actual_vf = drvr._get_pcidev_info(name, node_devs[name], net_devs) self.assertEqual(expect_vf, actual_vf) name = ""pci_0000_03_00_0"" actual_vf = drvr._get_pcidev_info(name, node_devs[name], net_devs) self.assertEqual(expect_vf, actual_vf) name = ""pci_0000_03_00_1"" actual_vf = drvr._get_pcidev_info(name, node_devs[name], net_devs) self.assertEqual(expect_vf, actual_vf) devs = ['pci_0000_04_00_3', 'pci_0000_04_10_7', 'pci_0000_04_11_7'] node_devs = {} for dev_name in devs: node_devs[dev_name] = ( fakelibvirt.NodeDevice( drvr._get_connection(), xml=_fake_NodeDevXml[dev_name])) for child in _fake_NodeDevXml_children[dev_name]: node_devs[child] = ( fakelibvirt.NodeDevice( drvr._get_connection(), xml=_fake_NodeDevXml[child])) self.useFixture(fixtures.MockPatchObject( drvr._host, 'list_all_devices', return_value=node_devs.values())) self.stub_out( 'nova.virt.libvirt.host.Host.device_lookup_by_name', lambda self, name: node_devs.get(name)) actjson = drvr._get_pci_passthrough_devices() mock_list.assert_not_called() if key not in ['phys_function', 'virt_functions', 'label', 'capabilities']:","_fake_NodeDevXml = \ {""pci_0000_04_00_3"": """""" <parent>pci_0000_00_01_1</parent> <parent>pci_0000_00_01_1</parent> node_dev = FakeNodeDevice(_fake_NodeDevXml[dev_name]) with mock.patch.object(pci_utils, 'get_net_name_by_vf_pci_address', return_value=dev_name) as mock_get_net_name, \ mock.patch.object(drvr._host, 'device_lookup_by_name', return_value=node_dev) as mock_dev_lookup: actualvf = drvr._get_pcinet_info(parent_address) expect_vf = { ""name"": dev_name, ""capabilities"": [""rx"", ""tx"", ""sg"", ""tso"", ""gso"", ""gro"", ""rxvlan"", ""txvlan""] } self.assertEqual(expect_vf, actualvf) mock_get_net_name.assert_called_once_with(parent_address) mock_dev_lookup.assert_called_once_with(dev_name) def test_get_pcinet_info_raises(self): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) dev_name = ""net_enp2s2_02_9a_a1_37_be_54"" parent_address = ""pci_0000_04_11_7"" with mock.patch.object(pci_utils, 'get_net_name_by_vf_pci_address', return_value=dev_name) as mock_get_net_name, \ mock.patch.object( drvr._host, 'device_lookup_by_name', side_effect=fakelibvirt.libvirtError(""message"") ) as mock_dev_lookup: actualvf = drvr._get_pcinet_info(parent_address) self.assertIsNone(actualvf) mock_get_net_name.assert_called_once_with(parent_address) mock_dev_lookup.assert_called_once_with(dev_name) self.stub_out('nova.virt.libvirt.host.Host.device_lookup_by_name', lambda self, name: FakeNodeDevice( _fake_NodeDevXml[name])) id = ""pci_0000_04_10_7"" mock_get_ifname.side_effect = exception.PciDeviceNotFoundById(id=id) actualvf = drvr._get_pcidev_info(id) expect_vf = { ""dev_id"": id, ""address"": ""0000:04:10.7"", ""product_id"": '1520', ""numa_node"": None, ""vendor_id"": '8086', ""label"": 'label_8086_1520', } self.assertEqual(expect_vf, actualvf) self.stub_out('nova.virt.libvirt.host.Host.device_lookup_by_name', lambda self, name: FakeNodeDevice( _fake_NodeDevXml[name])) actualvf = drvr._get_pcidev_info(""pci_0000_04_00_3"") self.assertEqual(expect_vf, actualvf) actualvf = drvr._get_pcidev_info(""pci_0000_04_10_7"") } self.assertEqual(expect_vf, actualvf) with mock.patch.object(pci_utils, 'get_net_name_by_vf_pci_address', return_value=""net_enp2s2_02_9a_a1_37_be_54""): actualvf = drvr._get_pcidev_info(""pci_0000_04_11_7"") expect_vf = { ""dev_id"": ""pci_0000_04_11_7"", ""address"": ""0000:04:11.7"", ""product_id"": '1520', ""vendor_id"": '8086', ""numa_node"": 0, ""label"": 'label_8086_1520', ""dev_type"": fields.PciDeviceType.SRIOV_VF, ""parent_addr"": '0000:04:00.3', ""capabilities"": { ""network"": [""rx"", ""tx"", ""sg"", ""tso"", ""gso"", ""gro"", ""rxvlan"", ""txvlan""]}, ""parent_ifname"": ""ens1"", } self.assertEqual(expect_vf, actualvf) actualvf = drvr._get_pcidev_info(""pci_0000_04_00_1"") self.assertEqual(expect_vf, actualvf) actualvf = drvr._get_pcidev_info(""pci_0000_03_00_0"") self.assertEqual(expect_vf, actualvf) actualvf = drvr._get_pcidev_info(""pci_0000_03_00_1"") self.assertEqual(expect_vf, actualvf) def test_list_devices_not_supported(self): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) # Handle just the NO_SUPPORT error not_supported_exc = fakelibvirt.make_libvirtError( fakelibvirt.libvirtError, 'this function is not supported by the connection driver:' ' virNodeNumOfDevices', error_code=fakelibvirt.VIR_ERR_NO_SUPPORT) with mock.patch.object(host.Host, '_list_devices', side_effect=not_supported_exc): self.assertEqual('[]', drvr._get_pci_passthrough_devices()) # We cache not supported status to avoid emitting too many logging # messages. Clear this value to test the other exception case. del drvr._list_devices_supported # Other errors should not be caught other_exc = fakelibvirt.make_libvirtError( fakelibvirt.libvirtError, 'other exc', error_code=fakelibvirt.VIR_ERR_NO_DOMAIN) with mock.patch.object(host.Host, '_list_devices', side_effect=other_exc): self.assertRaises(fakelibvirt.libvirtError, drvr._get_pci_passthrough_devices) self.stub_out('nova.virt.libvirt.host.Host.device_lookup_by_name', lambda self, name: FakeNodeDevice( _fake_NodeDevXml[name])) actjson = drvr._get_pci_passthrough_devices() if key not in ['phys_function', 'virt_functions', 'label']: mock_list.assert_called_once_with() mock.call('0000:04:10.7', False), mock.call('0000:04:11.7', False)",281,246
openstack%2Fnova~836607,openstack/nova,stable/train,Id0539d2ee909d86ffef07ae566697db8ae0f83b4,extend_volume of libvirt/volume/iscsi should not use device_path,ABANDONED,2022-04-05 19:17:42.000000000,2023-09-01 16:53:50.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-04-05 19:17:42.000000000', 'files': ['nova/virt/libvirt/volume/iscsi.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/f6eb03dc22a8556213c555a4d9ba52525a5085d5', 'message': ""extend_volume of libvirt/volume/iscsi should not use device_path\n\nThe connection_info['data']['device_path'] field is not always\navailable. In cases that it was not available, it would cause\nthe debug code to raise a KeyError instead of proceeding.\n\nOther similar debug messages in the same file do not include\ndevice_path. As a simple fix, just drop the device_path from\nthe log.\n\nCloses-Bug: #1936439\n\nChange-Id: Id0539d2ee909d86ffef07ae566697db8ae0f83b4\nSigned-off-by: Mark Mielke <mark.mielke@gmail.com>\n(cherry picked from commit ad60f23be3d562422b350aade04aa92ade39fb32)\n""}]",0,836607,f6eb03dc22a8556213c555a4d9ba52525a5085d5,4,1,1,8864,,,0,"extend_volume of libvirt/volume/iscsi should not use device_path

The connection_info['data']['device_path'] field is not always
available. In cases that it was not available, it would cause
the debug code to raise a KeyError instead of proceeding.

Other similar debug messages in the same file do not include
device_path. As a simple fix, just drop the device_path from
the log.

Closes-Bug: #1936439

Change-Id: Id0539d2ee909d86ffef07ae566697db8ae0f83b4
Signed-off-by: Mark Mielke <mark.mielke@gmail.com>
(cherry picked from commit ad60f23be3d562422b350aade04aa92ade39fb32)
",git fetch https://review.opendev.org/openstack/nova refs/changes/07/836607/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/virt/libvirt/volume/iscsi.py'],1,f6eb03dc22a8556213c555a4d9ba52525a5085d5,libvirt_iscsi_extend_volume_device_path_failure-stable/wallaby-stable/victoria-stable/ussuri-stable/train," LOG.debug(""Extend iSCSI Volume: new_size=%s"","," LOG.debug(""Extend iSCSI Volume %s; new_size=%s"", connection_info['data']['device_path'],",1,2
openstack%2Fnova~803727,openstack/nova,stable/train,I332d4f33ea6b9506cc24ac12e5c0994f208a3107,Add functional test for bug 1937375,ABANDONED,2021-08-06 10:43:55.000000000,2023-09-01 16:53:44.000000000,,"[{'_account_id': 22348}, {'_account_id': 29074}]","[{'number': 1, 'created': '2021-08-06 10:43:55.000000000', 'files': ['nova/tests/functional/regressions/test_bug_1937375.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/051a14674195e5d37b931d3b59366656801bc8a1', 'message': 'Add functional test for bug 1937375\n\n- InstanceHelperMixin pulled in for access to a better\n  _build_minimal_create_server_request method\n- api_major_version defined in test class\n- Fake image service stubbed out directing in test class\n- A simple _create_server method is in-lined within the class\n\nRelated-Bug: #1937375\nChange-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107\n(cherry picked from commit 2ffd9738602531e93495a1feca76bbb687c3e72c)\n(cherry picked from commit 7a9e3dcd172f187cf93f406b09f49d2ded9bd90d)\n(cherry picked from commit 68b2d5f797896768229db1cf28feb22a984daf81)\n(cherry picked from commit 2a67e8794f916af07a05c550dca01d7fca625caf)\n'}]",0,803727,051a14674195e5d37b931d3b59366656801bc8a1,6,2,1,10135,,,0,"Add functional test for bug 1937375

- InstanceHelperMixin pulled in for access to a better
  _build_minimal_create_server_request method
- api_major_version defined in test class
- Fake image service stubbed out directing in test class
- A simple _create_server method is in-lined within the class

Related-Bug: #1937375
Change-Id: I332d4f33ea6b9506cc24ac12e5c0994f208a3107
(cherry picked from commit 2ffd9738602531e93495a1feca76bbb687c3e72c)
(cherry picked from commit 7a9e3dcd172f187cf93f406b09f49d2ded9bd90d)
(cherry picked from commit 68b2d5f797896768229db1cf28feb22a984daf81)
(cherry picked from commit 2a67e8794f916af07a05c550dca01d7fca625caf)
",git fetch https://review.opendev.org/openstack/nova refs/changes/27/803727/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/regressions/test_bug_1937375.py'],1,051a14674195e5d37b931d3b59366656801bc8a1,bug/1937375,"# Copyright 2020, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import mock import time import nova.tests.unit.image.fake from nova import context from nova import objects from nova.tests import fixtures as nova_fixtures from nova.tests.functional import integrated_helpers class TestDuplicateVolAttachRace( integrated_helpers.InstanceHelperMixin, integrated_helpers._IntegratedTestBase ): """"""Regression test for bug #1937375 A regression test to assert the behaviour of bug #1937375 where calls to reserve_block_device_name can race and create duplicate bdm records. As we can't recreate the race with pure API driven requests in our functional tests this instead makes duplicate calls to reserve_block_device_name during an attach to mimic the behaviour. """""" api_major_version = 'v2.1' microversion = 'latest' def setUp(self): super(TestDuplicateVolAttachRace, self).setUp() self.cinder = self.useFixture(nova_fixtures.CinderFixture(self)) self.fake_image_service =\ nova.tests.unit.image.fake.stub_out_image_service(self) self.image_uuid = list(self.fake_image_service.images)[0] def _create_server(self): server = self._build_minimal_create_server_request( self.api, 'test', image_uuid=self.image_uuid, networks='none') server = self.api.post_server({'server': server}) return self._wait_for_state_change(self.api, server, 'ACTIVE') # TODO(lyarwood): Copied from test_bug_1675570.py, move both into # _IntegratedTestBase. def _wait_for_volume_attach(self, server_id, volume_id): timeout = 0.0 server = self.api.get_server(server_id) attached_vols = [vol['id'] for vol in server['os-extended-volumes:volumes_attached']] while volume_id not in attached_vols and timeout < 10.0: time.sleep(.1) timeout += .1 server = self.api.get_server(server_id) attached_vols = [vol['id'] for vol in server['os-extended-volumes:volumes_attached']] if volume_id not in attached_vols: self.fail('Timed out waiting for volume %s to be attached to ' 'server %s. Currently attached volumes: %s' % (volume_id, server_id, attached_vols)) def test_duplicate_volume_attach_race(self): ctxt = context.get_admin_context() volume_id = self.cinder.IMAGE_BACKED_VOL server_id = self._create_server()['id'] original_reserve_name = self.compute.manager.reserve_block_device_name def wrap_reserve_block_device_name(*args, **kwargs): # We can't cause a race with duplicate API requests as functional # tests are single threaded and the first would always complete # before the second was serviced. Instead we can wrap # reserve_block_device_name on the compute manager and call it # twice to mimic two callers racing each other after the checks on # the api. original_bdm = original_reserve_name(*args, **kwargs) original_reserve_name(*args, **kwargs) return original_bdm with mock.patch.object( self.compute.manager, 'reserve_block_device_name', wrap_reserve_block_device_name ): self.api.post_server_volume( server_id, {'volumeAttachment': {'volumeId': volume_id}}) # Wait for a volume to be attached self._wait_for_volume_attach(server_id, volume_id) # Fetch all bdms for the instance to assert what we have bdms = objects.BlockDeviceMappingList.get_by_instance_uuid( ctxt, server_id) # FIXME(lyarwood): This is bug #1937375, we now have 3 bdms for the # instance, the original root disk and two duplicate volume bdms for # the same volume attachment. self.assertEqual(3, len(bdms)) self.assertEqual(volume_id, bdms[2].volume_id) self.assertEqual(volume_id, bdms[1].volume_id) self.assertEqual('local', bdms[0].destination_type) ",,115,0
openstack%2Fnova~803728,openstack/nova,stable/train,I92f35514efddcb071c7094370b79d91d34c5bc72,compute: Avoid duplicate BDMs during reserve_block_device_name,ABANDONED,2021-08-06 10:43:55.000000000,2023-09-01 16:53:38.000000000,,"[{'_account_id': 22348}, {'_account_id': 29074}]","[{'number': 1, 'created': '2021-08-06 10:43:55.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/functional/regressions/test_bug_1937375.py', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/6ef97792387bf010b92da1e06beefc04d22ff5ff', 'message': 'compute: Avoid duplicate BDMs during reserve_block_device_name\n\nWhen attaching a volume to a running instance the nova-api validates\nthat the volume is not already attached to the instance. However\nnova-compute is responsible for actually creating the BDM entry in the\ndatabase. If sending attach requests fast enough it can be possible\nthat the same ""attach_volume"" request can be sent to nova-compute for\nthe same volume/instance combination.\n\nTo work around this we add a check in nova-compute to validate that\nthe volume has not been attached in the mean time.\n\nCloses-Bug: #1937375\nChange-Id: I92f35514efddcb071c7094370b79d91d34c5bc72\n(cherry picked from commit 2209b0007fe85d7c5439e0bfdfe2120c63898fa2)\n(cherry picked from commit 2bee83b8a980b2bd9e276b75aa74253f8c0d0a70)\n(cherry picked from commit 303c7a7c35044240f1546a5f960c1a4e6482f385)\n(cherry picked from commit deefea82efd87b001acce7cf8d0fc2915062228b)\n'}]",0,803728,6ef97792387bf010b92da1e06beefc04d22ff5ff,8,2,1,10135,,,0,"compute: Avoid duplicate BDMs during reserve_block_device_name

When attaching a volume to a running instance the nova-api validates
that the volume is not already attached to the instance. However
nova-compute is responsible for actually creating the BDM entry in the
database. If sending attach requests fast enough it can be possible
that the same ""attach_volume"" request can be sent to nova-compute for
the same volume/instance combination.

To work around this we add a check in nova-compute to validate that
the volume has not been attached in the mean time.

Closes-Bug: #1937375
Change-Id: I92f35514efddcb071c7094370b79d91d34c5bc72
(cherry picked from commit 2209b0007fe85d7c5439e0bfdfe2120c63898fa2)
(cherry picked from commit 2bee83b8a980b2bd9e276b75aa74253f8c0d0a70)
(cherry picked from commit 303c7a7c35044240f1546a5f960c1a4e6482f385)
(cherry picked from commit deefea82efd87b001acce7cf8d0fc2915062228b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/28/803728/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/functional/regressions/test_bug_1937375.py', 'nova/compute/manager.py']",3,6ef97792387bf010b92da1e06beefc04d22ff5ff,bug/1937375," # Now that we have the lock check that we haven't raced another # request and ensure there is no existing attachment if any(b for b in bdms if b.volume_id == volume_id): msg = _(""volume %s already attached"") % volume_id raise exception.InvalidVolume(reason=msg) ",,41,6
openstack%2Fnova~888509,openstack/nova,stable/train,I4ab97626c10052c7af9934a80ff8db9ddab82738,Enforce quota usage from placement when unshelving,ABANDONED,2023-07-13 22:40:42.000000000,2023-09-01 16:52:49.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-07-13 22:40:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/91364740da3650f22a567b564ddd2852013cf649', 'message': 'Enforce quota usage from placement when unshelving\n\nWhen [quota]count_usage_from_placement = true or\n[quota]driver = nova.quota.UnifiedLimitsDriver, cores and ram quota\nusage are counted from placement. When an instance is SHELVED_OFFLOADED,\nit will not have allocations in placement, so its cores and ram should\nnot count against quota during that time.\n\nThis means however that when an instance is unshelved, there is a\npossibility of going over quota if the cores and ram it needs were\nallocated by some other instance(s) while it was SHELVED_OFFLOADED.\n\nThis fixes a bug where quota was not being properly enforced during\nunshelve of a SHELVED_OFFLOADED instance when quota usage is counted\nfrom placement. Test coverage is also added for the ""recheck"" quota\ncases.\n\nNOTE(melwitt): The difference from the cherry picked change is\nbecause change I5d6db24a440397e588ba69f98a9cd2b8a846adc2 (tests: Add\nhelpers for rebuild, cold migrate, and shelve/unshelve) is not in\nUssuri.\n\nConflicts:\n    nova/conductor/manager.py\n    nova/tests/unit/conductor/test_conductor.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * I497180fb81fd966d1d3d4b54ac66d2609347583e (Restrict RequestSpec to\n    cell when evacuating)\n  * I52499ff6639c1a5815a8557b22dd33106dcc386b (Use provider mappings\n    from Placement (mostly))\n\nCloses-Bug: #2003991\n\nChange-Id: I4ab97626c10052c7af9934a80ff8db9ddab82738\n(cherry picked from commit 6f79d6321e7c3edaab2eb911198b7b7f851371b3)\n(cherry picked from commit c67e69c0e35d837fcefd7e4ea010a956569c3a55)\n(cherry picked from commit 490d5de6bb9ef3123cbbcea50e08ad0ad2edcbbe)\n(cherry picked from commit da4b7d1e70486402635a009724b263981cd22861)\n(cherry picked from commit 746bc7222276a8c6bb4f0f9317802e332d25b756)\n(cherry picked from commit c13c26f88edea2d762aef97013662859496dd3e6)\n(cherry picked from commit da5e34e33d8ad0f85da1dd83c0e020efb6fc3978)\n(cherry picked from commit d5c9b39f6e5ccdefbc3e47645e6fc9e0b1c7e000)\n'}, {'number': 2, 'created': '2023-07-14 00:27:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/58f5abfa07da39c1832b6910d8c4549912e12065', 'message': 'Enforce quota usage from placement when unshelving\n\nWhen [quota]count_usage_from_placement = true or\n[quota]driver = nova.quota.UnifiedLimitsDriver, cores and ram quota\nusage are counted from placement. When an instance is SHELVED_OFFLOADED,\nit will not have allocations in placement, so its cores and ram should\nnot count against quota during that time.\n\nThis means however that when an instance is unshelved, there is a\npossibility of going over quota if the cores and ram it needs were\nallocated by some other instance(s) while it was SHELVED_OFFLOADED.\n\nThis fixes a bug where quota was not being properly enforced during\nunshelve of a SHELVED_OFFLOADED instance when quota usage is counted\nfrom placement. Test coverage is also added for the ""recheck"" quota\ncases.\n\nNOTE(melwitt): The difference from the cherry picked change is\nbecause change I5d6db24a440397e588ba69f98a9cd2b8a846adc2 (tests: Add\nhelpers for rebuild, cold migrate, and shelve/unshelve) is not in\nUssuri.\n\nConflicts:\n    nova/conductor/manager.py\n    nova/tests/unit/conductor/test_conductor.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * I497180fb81fd966d1d3d4b54ac66d2609347583e (Restrict RequestSpec to\n    cell when evacuating)\n  * I52499ff6639c1a5815a8557b22dd33106dcc386b (Use provider mappings\n    from Placement (mostly))\n\nCloses-Bug: #2003991\n\nChange-Id: I4ab97626c10052c7af9934a80ff8db9ddab82738\n(cherry picked from commit 6f79d6321e7c3edaab2eb911198b7b7f851371b3)\n(cherry picked from commit c67e69c0e35d837fcefd7e4ea010a956569c3a55)\n(cherry picked from commit 490d5de6bb9ef3123cbbcea50e08ad0ad2edcbbe)\n(cherry picked from commit da4b7d1e70486402635a009724b263981cd22861)\n(cherry picked from commit 746bc7222276a8c6bb4f0f9317802e332d25b756)\n(cherry picked from commit c13c26f88edea2d762aef97013662859496dd3e6)\n(cherry picked from commit da5e34e33d8ad0f85da1dd83c0e020efb6fc3978)\n(cherry picked from commit d5c9b39f6e5ccdefbc3e47645e6fc9e0b1c7e000)\n'}, {'number': 3, 'created': '2023-07-14 01:12:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/a8fd5db06c8aeeb7d94ec06549851d8738fa10cb', 'message': 'Enforce quota usage from placement when unshelving\n\nWhen [quota]count_usage_from_placement = true or\n[quota]driver = nova.quota.UnifiedLimitsDriver, cores and ram quota\nusage are counted from placement. When an instance is SHELVED_OFFLOADED,\nit will not have allocations in placement, so its cores and ram should\nnot count against quota during that time.\n\nThis means however that when an instance is unshelved, there is a\npossibility of going over quota if the cores and ram it needs were\nallocated by some other instance(s) while it was SHELVED_OFFLOADED.\n\nThis fixes a bug where quota was not being properly enforced during\nunshelve of a SHELVED_OFFLOADED instance when quota usage is counted\nfrom placement. Test coverage is also added for the ""recheck"" quota\ncases.\n\nNOTE(melwitt): The difference from the cherry picked change is\nbecause change I5d6db24a440397e588ba69f98a9cd2b8a846adc2 (tests: Add\nhelpers for rebuild, cold migrate, and shelve/unshelve) is not in\nUssuri.\n\nConflicts:\n    nova/conductor/manager.py\n    nova/tests/unit/conductor/test_conductor.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * I497180fb81fd966d1d3d4b54ac66d2609347583e (Restrict RequestSpec to\n    cell when evacuating)\n  * I52499ff6639c1a5815a8557b22dd33106dcc386b (Use provider mappings\n    from Placement (mostly))\n\nCloses-Bug: #2003991\n\nChange-Id: I4ab97626c10052c7af9934a80ff8db9ddab82738\n(cherry picked from commit 6f79d6321e7c3edaab2eb911198b7b7f851371b3)\n(cherry picked from commit c67e69c0e35d837fcefd7e4ea010a956569c3a55)\n(cherry picked from commit 490d5de6bb9ef3123cbbcea50e08ad0ad2edcbbe)\n(cherry picked from commit da4b7d1e70486402635a009724b263981cd22861)\n(cherry picked from commit 746bc7222276a8c6bb4f0f9317802e332d25b756)\n(cherry picked from commit c13c26f88edea2d762aef97013662859496dd3e6)\n(cherry picked from commit da5e34e33d8ad0f85da1dd83c0e020efb6fc3978)\n(cherry picked from commit d5c9b39f6e5ccdefbc3e47645e6fc9e0b1c7e000)\n'}, {'number': 4, 'created': '2023-07-14 02:02:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6254c698ace8143c646e5623e7d0ca0bb83fa625', 'message': 'Enforce quota usage from placement when unshelving\n\nWhen [quota]count_usage_from_placement = true or\n[quota]driver = nova.quota.UnifiedLimitsDriver, cores and ram quota\nusage are counted from placement. When an instance is SHELVED_OFFLOADED,\nit will not have allocations in placement, so its cores and ram should\nnot count against quota during that time.\n\nThis means however that when an instance is unshelved, there is a\npossibility of going over quota if the cores and ram it needs were\nallocated by some other instance(s) while it was SHELVED_OFFLOADED.\n\nThis fixes a bug where quota was not being properly enforced during\nunshelve of a SHELVED_OFFLOADED instance when quota usage is counted\nfrom placement. Test coverage is also added for the ""recheck"" quota\ncases.\n\nNOTE(melwitt): The difference from the cherry picked change is\nbecause change I5d6db24a440397e588ba69f98a9cd2b8a846adc2 (tests: Add\nhelpers for rebuild, cold migrate, and shelve/unshelve) is not in\nUssuri.\n\nConflicts:\n    nova/conductor/manager.py\n    nova/tests/unit/conductor/test_conductor.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * I497180fb81fd966d1d3d4b54ac66d2609347583e (Restrict RequestSpec to\n    cell when evacuating)\n  * I52499ff6639c1a5815a8557b22dd33106dcc386b (Use provider mappings\n    from Placement (mostly))\n\nCloses-Bug: #2003991\n\nChange-Id: I4ab97626c10052c7af9934a80ff8db9ddab82738\n(cherry picked from commit 6f79d6321e7c3edaab2eb911198b7b7f851371b3)\n(cherry picked from commit c67e69c0e35d837fcefd7e4ea010a956569c3a55)\n(cherry picked from commit 490d5de6bb9ef3123cbbcea50e08ad0ad2edcbbe)\n(cherry picked from commit da4b7d1e70486402635a009724b263981cd22861)\n(cherry picked from commit 746bc7222276a8c6bb4f0f9317802e332d25b756)\n(cherry picked from commit c13c26f88edea2d762aef97013662859496dd3e6)\n(cherry picked from commit da5e34e33d8ad0f85da1dd83c0e020efb6fc3978)\n(cherry picked from commit d5c9b39f6e5ccdefbc3e47645e6fc9e0b1c7e000)\n'}, {'number': 5, 'created': '2023-07-14 22:18:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ced8a9b76ff05f69f4b3d90ba77867bb2b0b5667', 'message': 'Enforce quota usage from placement when unshelving\n\nWhen [quota]count_usage_from_placement = true or\n[quota]driver = nova.quota.UnifiedLimitsDriver, cores and ram quota\nusage are counted from placement. When an instance is SHELVED_OFFLOADED,\nit will not have allocations in placement, so its cores and ram should\nnot count against quota during that time.\n\nThis means however that when an instance is unshelved, there is a\npossibility of going over quota if the cores and ram it needs were\nallocated by some other instance(s) while it was SHELVED_OFFLOADED.\n\nThis fixes a bug where quota was not being properly enforced during\nunshelve of a SHELVED_OFFLOADED instance when quota usage is counted\nfrom placement. Test coverage is also added for the ""recheck"" quota\ncases.\n\nNOTE(melwitt): The difference from the cherry picked change is\nbecause change I5d6db24a440397e588ba69f98a9cd2b8a846adc2 (tests: Add\nhelpers for rebuild, cold migrate, and shelve/unshelve) is not in\nUssuri.\n\nConflicts:\n    nova/conductor/manager.py\n    nova/tests/unit/conductor/test_conductor.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * I497180fb81fd966d1d3d4b54ac66d2609347583e (Restrict RequestSpec to\n    cell when evacuating)\n  * I52499ff6639c1a5815a8557b22dd33106dcc386b (Use provider mappings\n    from Placement (mostly))\n\nand the difference in test_conductor.py from the cherry picked change\nis because change I3cfb1edc30b0bda4671e0d2cc2a8993055dcc9ff (Default\nuser_id when not specified in check_num_instances_quota) is not in\nTrain.\n\nCloses-Bug: #2003991\n\nChange-Id: I4ab97626c10052c7af9934a80ff8db9ddab82738\n(cherry picked from commit 6f79d6321e7c3edaab2eb911198b7b7f851371b3)\n(cherry picked from commit c67e69c0e35d837fcefd7e4ea010a956569c3a55)\n(cherry picked from commit 490d5de6bb9ef3123cbbcea50e08ad0ad2edcbbe)\n(cherry picked from commit da4b7d1e70486402635a009724b263981cd22861)\n(cherry picked from commit 746bc7222276a8c6bb4f0f9317802e332d25b756)\n(cherry picked from commit c13c26f88edea2d762aef97013662859496dd3e6)\n(cherry picked from commit da5e34e33d8ad0f85da1dd83c0e020efb6fc3978)\n(cherry picked from commit d5c9b39f6e5ccdefbc3e47645e6fc9e0b1c7e000)\n'}, {'number': 6, 'created': '2023-07-17 22:20:45.000000000', 'files': ['releasenotes/notes/quota-unshelve-offloaded-e4ea2d6a1449f549.yaml', 'nova/api/openstack/compute/shelve.py', 'nova/tests/unit/conductor/test_conductor.py', 'nova/conductor/manager.py', 'nova/tests/functional/test_servers.py', 'nova/compute/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/64c709ed589f1fb02b4f2b15c29bedcb5558051b', 'message': 'Enforce quota usage from placement when unshelving\n\nWhen [quota]count_usage_from_placement = true or\n[quota]driver = nova.quota.UnifiedLimitsDriver, cores and ram quota\nusage are counted from placement. When an instance is SHELVED_OFFLOADED,\nit will not have allocations in placement, so its cores and ram should\nnot count against quota during that time.\n\nThis means however that when an instance is unshelved, there is a\npossibility of going over quota if the cores and ram it needs were\nallocated by some other instance(s) while it was SHELVED_OFFLOADED.\n\nThis fixes a bug where quota was not being properly enforced during\nunshelve of a SHELVED_OFFLOADED instance when quota usage is counted\nfrom placement. Test coverage is also added for the ""recheck"" quota\ncases.\n\nNOTE(melwitt): The difference from the cherry picked change is\nbecause change I5d6db24a440397e588ba69f98a9cd2b8a846adc2 (tests: Add\nhelpers for rebuild, cold migrate, and shelve/unshelve) is not in\nUssuri.\n\nConflicts:\n    nova/conductor/manager.py\n    nova/tests/unit/conductor/test_conductor.py\n\nNOTE(melwitt): The conflicts are because the following changes are not\nin Train:\n\n  * I497180fb81fd966d1d3d4b54ac66d2609347583e (Restrict RequestSpec to\n    cell when evacuating)\n  * I52499ff6639c1a5815a8557b22dd33106dcc386b (Use provider mappings\n    from Placement (mostly))\n\nand the difference in test_conductor.py from the cherry picked change\nis because change I3cfb1edc30b0bda4671e0d2cc2a8993055dcc9ff (Default\nuser_id when not specified in check_num_instances_quota) is not in\nTrain. Type hints have also been removed as they are not supported in\nPython 2.7.\n\nCloses-Bug: #2003991\n\nChange-Id: I4ab97626c10052c7af9934a80ff8db9ddab82738\n(cherry picked from commit 6f79d6321e7c3edaab2eb911198b7b7f851371b3)\n(cherry picked from commit c67e69c0e35d837fcefd7e4ea010a956569c3a55)\n(cherry picked from commit 490d5de6bb9ef3123cbbcea50e08ad0ad2edcbbe)\n(cherry picked from commit da4b7d1e70486402635a009724b263981cd22861)\n(cherry picked from commit 746bc7222276a8c6bb4f0f9317802e332d25b756)\n(cherry picked from commit c13c26f88edea2d762aef97013662859496dd3e6)\n(cherry picked from commit da5e34e33d8ad0f85da1dd83c0e020efb6fc3978)\n(cherry picked from commit d5c9b39f6e5ccdefbc3e47645e6fc9e0b1c7e000)\n'}]",0,888509,64c709ed589f1fb02b4f2b15c29bedcb5558051b,10,1,6,4690,,,0,"Enforce quota usage from placement when unshelving

When [quota]count_usage_from_placement = true or
[quota]driver = nova.quota.UnifiedLimitsDriver, cores and ram quota
usage are counted from placement. When an instance is SHELVED_OFFLOADED,
it will not have allocations in placement, so its cores and ram should
not count against quota during that time.

This means however that when an instance is unshelved, there is a
possibility of going over quota if the cores and ram it needs were
allocated by some other instance(s) while it was SHELVED_OFFLOADED.

This fixes a bug where quota was not being properly enforced during
unshelve of a SHELVED_OFFLOADED instance when quota usage is counted
from placement. Test coverage is also added for the ""recheck"" quota
cases.

NOTE(melwitt): The difference from the cherry picked change is
because change I5d6db24a440397e588ba69f98a9cd2b8a846adc2 (tests: Add
helpers for rebuild, cold migrate, and shelve/unshelve) is not in
Ussuri.

Conflicts:
    nova/conductor/manager.py
    nova/tests/unit/conductor/test_conductor.py

NOTE(melwitt): The conflicts are because the following changes are not
in Train:

  * I497180fb81fd966d1d3d4b54ac66d2609347583e (Restrict RequestSpec to
    cell when evacuating)
  * I52499ff6639c1a5815a8557b22dd33106dcc386b (Use provider mappings
    from Placement (mostly))

and the difference in test_conductor.py from the cherry picked change
is because change I3cfb1edc30b0bda4671e0d2cc2a8993055dcc9ff (Default
user_id when not specified in check_num_instances_quota) is not in
Train. Type hints have also been removed as they are not supported in
Python 2.7.

Closes-Bug: #2003991

Change-Id: I4ab97626c10052c7af9934a80ff8db9ddab82738
(cherry picked from commit 6f79d6321e7c3edaab2eb911198b7b7f851371b3)
(cherry picked from commit c67e69c0e35d837fcefd7e4ea010a956569c3a55)
(cherry picked from commit 490d5de6bb9ef3123cbbcea50e08ad0ad2edcbbe)
(cherry picked from commit da4b7d1e70486402635a009724b263981cd22861)
(cherry picked from commit 746bc7222276a8c6bb4f0f9317802e332d25b756)
(cherry picked from commit c13c26f88edea2d762aef97013662859496dd3e6)
(cherry picked from commit da5e34e33d8ad0f85da1dd83c0e020efb6fc3978)
(cherry picked from commit d5c9b39f6e5ccdefbc3e47645e6fc9e0b1c7e000)
",git fetch https://review.opendev.org/openstack/nova refs/changes/09/888509/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/quota-unshelve-offloaded-e4ea2d6a1449f549.yaml', 'nova/api/openstack/compute/shelve.py', 'nova/tests/unit/conductor/test_conductor.py', 'nova/conductor/manager.py', 'nova/tests/functional/test_servers.py', 'nova/compute/api.py']",6,91364740da3650f22a567b564ddd2852013cf649,bug/2003991," @staticmethod def _check_quota_unshelve_offloaded( context: nova_context.RequestContext, instance: 'objects.Instance', request_spec: 'objects.RequestSpec' ): if not CONF.quota.count_usage_from_placement: return # TODO(melwitt): This is ugly but we have to do it this way because # instances quota is currently counted from the API database but cores # and ram are counted from placement. That means while an instance is # SHELVED_OFFLOADED, it will still consume instances quota but it will # not consume cores and ram. So we need an instances delta of # 0 but cores and ram deltas from the flavor. # Once instances usage is also being counted from placement, we can # replace this method with a normal check_num_instances_quota() call. vcpus = instance.flavor.vcpus memory_mb = instance.flavor.memory_mb # We are not looking to create a new server, we are unshelving an # existing one. deltas = {'instances': 0, 'cores': vcpus, 'ram': memory_mb} objects.Quotas.check_deltas( context, deltas, context.project_id, user_id=context.user_id, check_project_id=instance.project_id, check_user_id=instance.user_id, ) # Check quota before we save any changes to the database, but only if # we are counting quota usage from placement. When an instance is # SHELVED_OFFLOADED, it will not consume cores or ram resources in # placement. This means it is possible that an unshelve would cause the # project/user to go over quota. if instance.vm_state == vm_states.SHELVED_OFFLOADED: self._check_quota_unshelve_offloaded( context, instance, request_spec) ",,215,23
openstack%2Fnova~888508,openstack/nova,stable/train,Icc9b6366aebba2f8468e2127da7b7e099098513a,Reproducer for bug 2003991 unshelving offloaded instance,ABANDONED,2023-07-13 22:40:42.000000000,2023-09-01 16:52:40.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-07-13 22:40:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/90be9c66c25b38ef5ce8e6a81a9446988bbc4bb7', 'message': 'Reproducer for bug 2003991 unshelving offloaded instance\n\nThis adds test coverage for:\n\n  * Shelve/unshelve offloaded with legacy quota usage\n  * Shelve/unshelve offloaded with quota usage from placement\n  * Shelve/unshelve with legacy quota usage\n  * Shelve/unshelve with quota usage from placement\n\nRelated-Bug: #2003991\n\nChange-Id: Icc9b6366aebba2f8468e2127da7b7e099098513a\n(cherry picked from commit 427b2cb4d61cdfaf18b2467eb50b3772dffd3def)\n(cherry picked from commit 004a773a3a286f39889519bb5b2009fb9bf44fb1)\n(cherry picked from commit 710116f4beadb1553c9ad7991ea69b0e286657d6)\n(cherry picked from commit 291c02a7d51585551266fe5b7e7afd9726317671)\n(cherry picked from commit dc2d308118a126e087431d5c7810e1f958cbe895)\n(cherry picked from commit 1d91e71e74b57b0f2f108faeb522244a03540485)\n(cherry picked from commit c0f06628eb883aa6d213cc9b57ffb8f5b3a64372)\n(cherry picked from commit 882f0a038ea6b2f4cd75c8d761fe3effebf67cf9)\n'}, {'number': 2, 'created': '2023-07-14 00:27:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/60fb01f496d3ef5056de68f50a6222ffaf9d2ce3', 'message': ""Reproducer for bug 2003991 unshelving offloaded instance\n\nThis adds test coverage for:\n\n  * Shelve/unshelve offloaded with legacy quota usage\n  * Shelve/unshelve offloaded with quota usage from placement\n  * Shelve/unshelve with legacy quota usage\n  * Shelve/unshelve with quota usage from placement\n\nRelated-Bug: #2003991\n\nNOTE(melwitt): The differences from the cherry picked change are\nbecause change I84c58de90dad6d86271767363aef90ddac0f1730 (functional:\nAdd '_create_server' helper) is not in Train.\n\nChange-Id: Icc9b6366aebba2f8468e2127da7b7e099098513a\n(cherry picked from commit 427b2cb4d61cdfaf18b2467eb50b3772dffd3def)\n(cherry picked from commit 004a773a3a286f39889519bb5b2009fb9bf44fb1)\n(cherry picked from commit 710116f4beadb1553c9ad7991ea69b0e286657d6)\n(cherry picked from commit 291c02a7d51585551266fe5b7e7afd9726317671)\n(cherry picked from commit dc2d308118a126e087431d5c7810e1f958cbe895)\n(cherry picked from commit 1d91e71e74b57b0f2f108faeb522244a03540485)\n(cherry picked from commit c0f06628eb883aa6d213cc9b57ffb8f5b3a64372)\n(cherry picked from commit 882f0a038ea6b2f4cd75c8d761fe3effebf67cf9)\n""}, {'number': 3, 'created': '2023-07-14 01:12:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/48fc3cc4ce7b30f3c1971fed95e8e681cdcd0e2b', 'message': ""Reproducer for bug 2003991 unshelving offloaded instance\n\nThis adds test coverage for:\n\n  * Shelve/unshelve offloaded with legacy quota usage\n  * Shelve/unshelve offloaded with quota usage from placement\n  * Shelve/unshelve with legacy quota usage\n  * Shelve/unshelve with quota usage from placement\n\nRelated-Bug: #2003991\n\nNOTE(melwitt): The differences from the cherry picked change are\nbecause change I84c58de90dad6d86271767363aef90ddac0f1730 (functional:\nAdd '_create_server' helper) is not in Train.\n\nChange-Id: Icc9b6366aebba2f8468e2127da7b7e099098513a\n(cherry picked from commit 427b2cb4d61cdfaf18b2467eb50b3772dffd3def)\n(cherry picked from commit 004a773a3a286f39889519bb5b2009fb9bf44fb1)\n(cherry picked from commit 710116f4beadb1553c9ad7991ea69b0e286657d6)\n(cherry picked from commit 291c02a7d51585551266fe5b7e7afd9726317671)\n(cherry picked from commit dc2d308118a126e087431d5c7810e1f958cbe895)\n(cherry picked from commit 1d91e71e74b57b0f2f108faeb522244a03540485)\n(cherry picked from commit c0f06628eb883aa6d213cc9b57ffb8f5b3a64372)\n(cherry picked from commit 882f0a038ea6b2f4cd75c8d761fe3effebf67cf9)\n""}, {'number': 4, 'created': '2023-07-14 02:02:22.000000000', 'files': ['nova/tests/functional/test_servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/6e3c72a71d60df4bab2aaaec833dcca3d91b31ab', 'message': ""Reproducer for bug 2003991 unshelving offloaded instance\n\nThis adds test coverage for:\n\n  * Shelve/unshelve offloaded with legacy quota usage\n  * Shelve/unshelve offloaded with quota usage from placement\n  * Shelve/unshelve with legacy quota usage\n  * Shelve/unshelve with quota usage from placement\n\nRelated-Bug: #2003991\n\nNOTE(melwitt): The differences from the cherry picked change are\nbecause change I84c58de90dad6d86271767363aef90ddac0f1730 (functional:\nAdd '_create_server' helper) is not in Train.\n\nChange-Id: Icc9b6366aebba2f8468e2127da7b7e099098513a\n(cherry picked from commit 427b2cb4d61cdfaf18b2467eb50b3772dffd3def)\n(cherry picked from commit 004a773a3a286f39889519bb5b2009fb9bf44fb1)\n(cherry picked from commit 710116f4beadb1553c9ad7991ea69b0e286657d6)\n(cherry picked from commit 291c02a7d51585551266fe5b7e7afd9726317671)\n(cherry picked from commit dc2d308118a126e087431d5c7810e1f958cbe895)\n(cherry picked from commit 1d91e71e74b57b0f2f108faeb522244a03540485)\n(cherry picked from commit c0f06628eb883aa6d213cc9b57ffb8f5b3a64372)\n(cherry picked from commit 882f0a038ea6b2f4cd75c8d761fe3effebf67cf9)\n""}]",0,888508,6e3c72a71d60df4bab2aaaec833dcca3d91b31ab,8,1,4,4690,,,0,"Reproducer for bug 2003991 unshelving offloaded instance

This adds test coverage for:

  * Shelve/unshelve offloaded with legacy quota usage
  * Shelve/unshelve offloaded with quota usage from placement
  * Shelve/unshelve with legacy quota usage
  * Shelve/unshelve with quota usage from placement

Related-Bug: #2003991

NOTE(melwitt): The differences from the cherry picked change are
because change I84c58de90dad6d86271767363aef90ddac0f1730 (functional:
Add '_create_server' helper) is not in Train.

Change-Id: Icc9b6366aebba2f8468e2127da7b7e099098513a
(cherry picked from commit 427b2cb4d61cdfaf18b2467eb50b3772dffd3def)
(cherry picked from commit 004a773a3a286f39889519bb5b2009fb9bf44fb1)
(cherry picked from commit 710116f4beadb1553c9ad7991ea69b0e286657d6)
(cherry picked from commit 291c02a7d51585551266fe5b7e7afd9726317671)
(cherry picked from commit dc2d308118a126e087431d5c7810e1f958cbe895)
(cherry picked from commit 1d91e71e74b57b0f2f108faeb522244a03540485)
(cherry picked from commit c0f06628eb883aa6d213cc9b57ffb8f5b3a64372)
(cherry picked from commit 882f0a038ea6b2f4cd75c8d761fe3effebf67cf9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/08/888508/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/test_servers.py'],1,90be9c66c25b38ef5ce8e6a81a9446988bbc4bb7,bug/2003991," def test_unshelve_offloaded_overquota(self): # Use a quota limit of 3 vcpus. self.flags(cores=3, group='quota') # Use flavor that has vcpus = 1. for i in range(0, 3): server = self._create_server(flavor_id=1) # We should be at the quota limit now. Shelve an instance and wait for # it to become SHELVED_OFFLOADED. self.api.post_server_action(server['id'], {'shelve': {}}) self._wait_for_state_change(server, 'SHELVED_OFFLOADED') # Try to boot another instance. It should fail because shelved # offloaded instances still consume quota. ex = self.assertRaises(client.OpenStackApiException, self._create_server, flavor_id=1) self.assertEqual(403, ex.response.status_code) # Unshelving the instance should also succeed. self.api.post_server_action(server['id'], {'unshelve': {}}) self._wait_for_state_change(server, 'ACTIVE') def _test_unshelve_offloaded_overquota_placement(self): # Use flavor that has vcpus = 1. for i in range(0, 3): server = self._create_server(flavor_id=1) # We should be at the quota limit now. Shelve an instance and wait for # it to become SHELVED_OFFLOADED. self.api.post_server_action(server['id'], {'shelve': {}}) self._wait_for_state_change(server, 'SHELVED_OFFLOADED') # Try to boot another instance. It should succeed because with # placement, shelved offloaded instances do not consume cores/ram # quota. self._create_server(flavor_id=1) # FIXME(melwitt): This is bug #2003991, the unshelve is supposed to # fail if we would be over quota after unshelving. # Now try to unshelve the earlier instance. It should fail because it # would put us over quota to have 4 running instances. # ex = self.assertRaises(client.OpenStackApiException, # self._unshelve_server, # server) # self.assertEqual(403, ex.response.status_code) self.api.post_server_action(server['id'], {'unshelve': {}}) self._wait_for_state_change(server, 'ACTIVE') def test_unshelve_offloaded_overquota_placement(self): # Count quota usage from placement. self.flags(count_usage_from_placement=True, group='quota') # Use a quota limit of 3 vcpus. self.flags(cores=3, group='quota') self._test_unshelve_offloaded_overquota_placement() def test_unshelve_overquota(self): # Test for behavior where the shelved instance is not offloaded. self.flags(shelved_offload_time=3600) # Use a quota limit of 3 vcpus. self.flags(cores=3, group='quota') # Use flavor that has vcpus = 1. for i in range(0, 3): server = self._create_server(flavor_id=1) # We should be at the quota limit now. Shelve an instance. self.api.post_server_action(server['id'], {'shelve': {}}) self._wait_for_state_change(server, 'SHELVED') # Try to boot another instance. It should fail because shelved # instances still consume quota. ex = self.assertRaises(client.OpenStackApiException, self._create_server, flavor_id=1) self.assertEqual(403, ex.response.status_code) # Verify that it's still SHELVED. self._wait_for_state_change(server, 'SHELVED') # Unshelving the instance should also succeed. self.api.post_server_action(server['id'], {'unshelve': {}}) self._wait_for_state_change(server, 'ACTIVE') def test_unshelve_overquota_placement(self): # Count quota usage from placement, should behave the same as legacy. self.flags(count_usage_from_placement=True, group='quota') self.test_unshelve_overquota() ",,90,0
openstack%2Fnova~833438,openstack/nova,stable/train,Ia511879d2f5f50a3f63d180258abccf046a7264e,reenable greendns in nova.,ABANDONED,2022-03-11 16:23:47.000000000,2023-09-01 16:52:33.000000000,,"[{'_account_id': 20733}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-03-11 16:23:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/15d352069bbb41f2087dd68a89b22843d5b590d8', 'message': 'reenable greendns in nova.\n\nBack in the days of centos 6 and python 2.6 eventlet\ngreendns monkeypatching broke ipv6. As a result nova\nhas run without greendns monkey patching ever since.\nThis removes that old workaround allowing modern\neventlet to use greendns for non blocking dns lookups.\n\nCloses-Bug: #1964149\nChange-Id: Ia511879d2f5f50a3f63d180258abccf046a7264e\n(cherry picked from commit fe1ebe69f358cbed62434da3f1537a94390324bb)\n(cherry picked from commit a913ab1aabb827771e54ef64b579cebe44ad53d1)\n(cherry picked from commit edb8bcb0294fb1488c49ad76f2422378d0c495eb)\n(cherry picked from commit 15ac1554be0026e1d131761492dba3eab73d4c81)\n(cherry picked from commit dc4317e1773958c29b34f42b8bf02722620149b6)\n'}, {'number': 2, 'created': '2023-01-27 16:02:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/58435067c47b1c56f32d2f1f153214613fd986c1', 'message': 'reenable greendns in nova.\n\nBack in the days of centos 6 and python 2.6 eventlet\ngreendns monkeypatching broke ipv6. As a result nova\nhas run without greendns monkey patching ever since.\nThis removes that old workaround allowing modern\neventlet to use greendns for non blocking dns lookups.\n\nCloses-Bug: #1964149\nChange-Id: Ia511879d2f5f50a3f63d180258abccf046a7264e\n(cherry picked from commit fe1ebe69f358cbed62434da3f1537a94390324bb)\n(cherry picked from commit a913ab1aabb827771e54ef64b579cebe44ad53d1)\n(cherry picked from commit edb8bcb0294fb1488c49ad76f2422378d0c495eb)\n(cherry picked from commit 15ac1554be0026e1d131761492dba3eab73d4c81)\n(cherry picked from commit dc4317e1773958c29b34f42b8bf02722620149b6)\n'}, {'number': 3, 'created': '2023-01-27 16:04:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/332742e4e0c55dedbe25592909fd685a0f85089c', 'message': 'reenable greendns in nova.\n\nBack in the days of centos 6 and python 2.6 eventlet\ngreendns monkeypatching broke ipv6. As a result nova\nhas run without greendns monkey patching ever since.\nThis removes that old workaround allowing modern\neventlet to use greendns for non blocking dns lookups.\n\nCloses-Bug: #1964149\nChange-Id: Ia511879d2f5f50a3f63d180258abccf046a7264e\n(cherry picked from commit fe1ebe69f358cbed62434da3f1537a94390324bb)\n(cherry picked from commit a913ab1aabb827771e54ef64b579cebe44ad53d1)\n(cherry picked from commit edb8bcb0294fb1488c49ad76f2422378d0c495eb)\n(cherry picked from commit 15ac1554be0026e1d131761492dba3eab73d4c81)\n(cherry picked from commit 09446c8f89b21c003842df059d9c62a58e8e71f4)\n'}, {'number': 4, 'created': '2023-01-27 16:04:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c6ca2be6d9236bedfdde12bceaf7b678be9a65c5', 'message': 'reenable greendns in nova.\n\nBack in the days of centos 6 and python 2.6 eventlet\ngreendns monkeypatching broke ipv6. As a result nova\nhas run without greendns monkey patching ever since.\nThis removes that old workaround allowing modern\neventlet to use greendns for non blocking dns lookups.\n\nCloses-Bug: #1964149\nChange-Id: Ia511879d2f5f50a3f63d180258abccf046a7264e\n(cherry picked from commit fe1ebe69f358cbed62434da3f1537a94390324bb)\n(cherry picked from commit a913ab1aabb827771e54ef64b579cebe44ad53d1)\n(cherry picked from commit edb8bcb0294fb1488c49ad76f2422378d0c495eb)\n(cherry picked from commit d2fdd6d86ee315e218a0f4f7b9fd83e8ce2845f8)\n(cherry picked from commit 09446c8f89b21c003842df059d9c62a58e8e71f4)\n'}, {'number': 5, 'created': '2023-02-09 12:13:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7182d73caea5223d96e68577fcd67a9617e79146', 'message': 'reenable greendns in nova.\n\nBack in the days of centos 6 and python 2.6 eventlet\ngreendns monkeypatching broke ipv6. As a result nova\nhas run without greendns monkey patching ever since.\nThis removes that old workaround allowing modern\neventlet to use greendns for non blocking dns lookups.\n\nCloses-Bug: #1964149\nChange-Id: Ia511879d2f5f50a3f63d180258abccf046a7264e\n(cherry picked from commit fe1ebe69f358cbed62434da3f1537a94390324bb)\n(cherry picked from commit a913ab1aabb827771e54ef64b579cebe44ad53d1)\n(cherry picked from commit edb8bcb0294fb1488c49ad76f2422378d0c495eb)\n(cherry picked from commit d2fdd6d86ee315e218a0f4f7b9fd83e8ce2845f8)\n(cherry picked from commit 93bd6b8e48b001d05ff8a0a658b57619dedfe98b)\n'}, {'number': 6, 'created': '2023-03-01 16:33:06.000000000', 'files': ['nova/monkey_patch.py', 'releasenotes/notes/greendns-34df7f9fba952bcd.yaml', 'nova/tests/functional/test_monkey_patch.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/74d087c2ab793cef83812cb02c569347d4c6dc60', 'message': 'reenable greendns in nova.\n\nBack in the days of centos 6 and python 2.6 eventlet\ngreendns monkeypatching broke ipv6. As a result nova\nhas run without greendns monkey patching ever since.\nThis removes that old workaround allowing modern\neventlet to use greendns for non blocking dns lookups.\n\nCloses-Bug: #1964149\nChange-Id: Ia511879d2f5f50a3f63d180258abccf046a7264e\n(cherry picked from commit fe1ebe69f358cbed62434da3f1537a94390324bb)\n(cherry picked from commit a913ab1aabb827771e54ef64b579cebe44ad53d1)\n(cherry picked from commit edb8bcb0294fb1488c49ad76f2422378d0c495eb)\n(cherry picked from commit d2fdd6d86ee315e218a0f4f7b9fd83e8ce2845f8)\n(cherry picked from commit 93bd6b8e48b001d05ff8a0a658b57619dedfe98b)\n'}]",8,833438,74d087c2ab793cef83812cb02c569347d4c6dc60,30,2,6,11604,,,0,"reenable greendns in nova.

Back in the days of centos 6 and python 2.6 eventlet
greendns monkeypatching broke ipv6. As a result nova
has run without greendns monkey patching ever since.
This removes that old workaround allowing modern
eventlet to use greendns for non blocking dns lookups.

Closes-Bug: #1964149
Change-Id: Ia511879d2f5f50a3f63d180258abccf046a7264e
(cherry picked from commit fe1ebe69f358cbed62434da3f1537a94390324bb)
(cherry picked from commit a913ab1aabb827771e54ef64b579cebe44ad53d1)
(cherry picked from commit edb8bcb0294fb1488c49ad76f2422378d0c495eb)
(cherry picked from commit d2fdd6d86ee315e218a0f4f7b9fd83e8ce2845f8)
(cherry picked from commit 93bd6b8e48b001d05ff8a0a658b57619dedfe98b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/38/833438/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/monkey_patch.py', 'releasenotes/notes/greendns-34df7f9fba952bcd.yaml', 'nova/tests/functional/test_monkey_patch.py']",3,15d352069bbb41f2087dd68a89b22843d5b590d8,bug/1964149,,"# Copyright 2020 Red Hat, Inc. All rights reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # NOTE(artom) This file exists to test eventlet monkeypatching. How and what # eventlet monkeypatches can be controlled by environment variables that # are processed by eventlet at import-time (for exmaple, EVENTLET_NO_GREENDNS). # Nova manages all of this in nova.monkey_patch. Therefore, nova.monkey_patch # must be the first thing to import eventlet. As nova.tests.functional.__init__ # imports nova.monkey_patch, we're OK here. import socket import traceback from nova import test class TestMonkeyPatch(test.TestCase): def test_greendns_is_disabled(self): """"""Try to resolve a fake fqdn. If we see greendns mentioned in the traceback of the raised exception, it means we've not actually disabled greendns. See the TODO and NOTE in nova.monkey_patch to understand why greendns needs to be disabled. """""" raised = False try: socket.gethostbyname('goat.fake') except Exception: tb = traceback.format_exc() # NOTE(artom) If we've correctly disabled greendns, we expect the # traceback to not contain any reference to it. self.assertNotIn('greendns.py', tb) raised = True self.assertTrue(raised) ",16,58
openstack%2Fnova~837323,openstack/nova,stable/train,Ia593b500425c81e54eb401e38264db5cc5fc1f93,libvirt: Abort live-migration job when monitoring fails,ABANDONED,2022-04-11 19:24:39.000000000,2023-09-01 16:52:24.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-04-11 19:24:39.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/00c103adaf4ef3887af3d38c2e6f0fe0614dd905', 'message': 'libvirt: Abort live-migration job when monitoring fails\n\nDuring live migration process, a _live_migration_monitor thread\nchecks progress of migration on source host, if for any reason\nwe hit infrastructure issue involving a DB/RPC/libvirt-timeout\nfailure, an Exception is raised to the nova-compute service and\ninstance/migration is set to ERROR state.\n\nThe issue is that we may let live-migration job running out of nova\ncontrol. At the end of job, guest is resumed on target host while\nnova still reports it on source host, this may lead to a split-brain\nsituation if instance is restarted.\n\nThis change proposes to abort live-migration job if issue occurs\nduring _live_migration_monitor.\n\nChange-Id: Ia593b500425c81e54eb401e38264db5cc5fc1f93\nCloses-Bug: #1905944\n(cherry picked from commit 39f0af5d18d6bea34fa15b8f7778115b25432749)\n'}]",4,837323,00c103adaf4ef3887af3d38c2e6f0fe0614dd905,15,1,1,7130,,,0,"libvirt: Abort live-migration job when monitoring fails

During live migration process, a _live_migration_monitor thread
checks progress of migration on source host, if for any reason
we hit infrastructure issue involving a DB/RPC/libvirt-timeout
failure, an Exception is raised to the nova-compute service and
instance/migration is set to ERROR state.

The issue is that we may let live-migration job running out of nova
control. At the end of job, guest is resumed on target host while
nova still reports it on source host, this may lead to a split-brain
situation if instance is restarted.

This change proposes to abort live-migration job if issue occurs
during _live_migration_monitor.

Change-Id: Ia593b500425c81e54eb401e38264db5cc5fc1f93
Closes-Bug: #1905944
(cherry picked from commit 39f0af5d18d6bea34fa15b8f7778115b25432749)
",git fetch https://review.opendev.org/openstack/nova refs/changes/23/837323/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",2,00c103adaf4ef3887af3d38c2e6f0fe0614dd905,bug/1905944," @mock.patch.object(libvirt_driver.LibvirtDriver, ""live_migration_abort"") def _test_live_migration_main(self, mock_abort, mock_copy_disk_path, mock_running, mock_guest, mock_monitor, mock_thread, mock_conn, mon_side_effect=None): mock_monitor.side_effect = mon_side_effect if mon_side_effect: self.assertRaises(mon_side_effect, drvr._live_migration, self.context, instance, ""fakehost"", fake_post, fake_recover, True, migrate_data) mock_abort.assert_called_once_with(instance) else: drvr._live_migration(self.context, instance, ""fakehost"", fake_post, fake_recover, True, migrate_data) def test_live_migration_main(self): self._test_live_migration_main() def test_live_migration_main_monitoring_failed(self): self._test_live_migration_main(mon_side_effect=Exception) "," def test_live_migration_main(self, mock_copy_disk_path, mock_running, mock_guest, mock_monitor, mock_thread, mock_conn): drvr._live_migration(self.context, instance, ""fakehost"", fake_post, fake_recover, True, migrate_data)",33,6
openstack%2Fnova~883933,openstack/nova,stable/train,I73c9ae27e9c42ee211a53bed3d849650b65f08be,Update RequestSpec.pci_request for resize,ABANDONED,2023-05-23 12:13:34.000000000,2023-09-01 16:52:17.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-05-23 12:13:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/98c4831dd690db87769dc1a9b80d5fd3026f81f6', 'message': 'Update RequestSpec.pci_request for resize\n\nNova uses the RequestSpec.pci_request in the PciPassthroughFilter to\ndecide if the PCI devicesm, requested via the pci_alias in the flavor\nextra_spec, are available on a potential target host. During resize the\nnew flavor might contain different pci_alias request than the old flavor\nof the instance. In this case Nova should use the pci_alias from the new\nflavor to scheduler the destination host of the resize. However this\nlogic was missing and Nova used the old pci_request value based on the\nold flavor. This patch adds the missing logic.\n\nCloses-Bug: #1983753\nCloses-Bug: #1941005\nChange-Id: I73c9ae27e9c42ee211a53bed3d849650b65f08be\n(cherry picked from commit a93092e0d5c1483f9ad48276708ee35c54ce44fe)\n(cherry picked from commit b6c7ee07ad2a6503b8aad0921cca70e61e60259d)\n(cherry picked from commit 696d27a0e2ccf0916fc6bd3eabf73f2b007e7830)\n(cherry picked from commit 35ad4bbaf8b383436d3b972daa58e05a47e36d82)\n(cherry picked from commit c530350360d1f003156ba0c4820047d336bba4d1)\n(cherry picked from commit 4321efe80e25809ef5eb68152b7b3c7bc1dc52fe)\n'}, {'number': 2, 'created': '2023-05-23 16:08:00.000000000', 'files': ['nova/tests/unit/compute/test_compute_api.py', 'nova/tests/functional/regressions/test_bug_1983753.py', 'nova/compute/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/00817a82268e1c7ab292f4e90ea2bcb89032c080', 'message': 'Update RequestSpec.pci_request for resize\n\nNova uses the RequestSpec.pci_request in the PciPassthroughFilter to\ndecide if the PCI devicesm, requested via the pci_alias in the flavor\nextra_spec, are available on a potential target host. During resize the\nnew flavor might contain different pci_alias request than the old flavor\nof the instance. In this case Nova should use the pci_alias from the new\nflavor to scheduler the destination host of the resize. However this\nlogic was missing and Nova used the old pci_request value based on the\nold flavor. This patch adds the missing logic.\n\nCloses-Bug: #1983753\nCloses-Bug: #1941005\nChange-Id: I73c9ae27e9c42ee211a53bed3d849650b65f08be\n(cherry picked from commit a93092e0d5c1483f9ad48276708ee35c54ce44fe)\n(cherry picked from commit b6c7ee07ad2a6503b8aad0921cca70e61e60259d)\n(cherry picked from commit 696d27a0e2ccf0916fc6bd3eabf73f2b007e7830)\n(cherry picked from commit 35ad4bbaf8b383436d3b972daa58e05a47e36d82)\n(cherry picked from commit c530350360d1f003156ba0c4820047d336bba4d1)\n(cherry picked from commit 4321efe80e25809ef5eb68152b7b3c7bc1dc52fe)\n'}]",1,883933,00817a82268e1c7ab292f4e90ea2bcb89032c080,8,1,2,9708,,,0,"Update RequestSpec.pci_request for resize

Nova uses the RequestSpec.pci_request in the PciPassthroughFilter to
decide if the PCI devicesm, requested via the pci_alias in the flavor
extra_spec, are available on a potential target host. During resize the
new flavor might contain different pci_alias request than the old flavor
of the instance. In this case Nova should use the pci_alias from the new
flavor to scheduler the destination host of the resize. However this
logic was missing and Nova used the old pci_request value based on the
old flavor. This patch adds the missing logic.

Closes-Bug: #1983753
Closes-Bug: #1941005
Change-Id: I73c9ae27e9c42ee211a53bed3d849650b65f08be
(cherry picked from commit a93092e0d5c1483f9ad48276708ee35c54ce44fe)
(cherry picked from commit b6c7ee07ad2a6503b8aad0921cca70e61e60259d)
(cherry picked from commit 696d27a0e2ccf0916fc6bd3eabf73f2b007e7830)
(cherry picked from commit 35ad4bbaf8b383436d3b972daa58e05a47e36d82)
(cherry picked from commit c530350360d1f003156ba0c4820047d336bba4d1)
(cherry picked from commit 4321efe80e25809ef5eb68152b7b3c7bc1dc52fe)
",git fetch https://review.opendev.org/openstack/nova refs/changes/33/883933/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_api.py', 'nova/tests/functional/regressions/test_bug_1983753.py', 'nova/compute/api.py']",3,98c4831dd690db87769dc1a9b80d5fd3026f81f6,bug/1941005," # if the flavor is changed then we need to recalculate the # pci_requests as well because the new flavor might request # different pci_aliases new_pci_requests = pci_request.get_pci_requests_from_flavor( new_instance_type) new_pci_requests.instance_uuid = instance.uuid # The neutron based InstancePCIRequest cannot change during resize, # so we just need to copy them from the old request for request in request_spec.pci_requests.requests or []: if request.source == objects.InstancePCIRequest.NEUTRON_PORT: new_pci_requests.requests.append(request) request_spec.pci_requests = new_pci_requests ",,29,24
openstack%2Fnova~883932,openstack/nova,stable/train,Ic6566272b8c5af57cd1c73c73b3cba6cd265bebe,Reproducer for bug 1983753,ABANDONED,2023-05-23 12:13:34.000000000,2023-09-01 16:52:11.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-05-23 12:13:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/829f4285cdb7e84fc657050a33001c008e9a3656', 'message': 'Reproducer for bug 1983753\n\nThere is stable/train related changes in test_bug_1983753.py due to\nmany test helpers like _create_server, _resize_server, and\n_confirm_resize is missing in stable/train.\n\nRelated-Bug: #1983753\nChange-Id: Ic6566272b8c5af57cd1c73c73b3cba6cd265bebe\n(cherry picked from commit 6d602c6b734c2e360fa319ba22c2fced02ad3d29)\n(cherry picked from commit bdc32226e2d9ce4a073306f8f6267fbe305e64e4)\n(cherry picked from commit 87a8a7df9800f3c81dba2e2c0520168115ad1b28)\n(cherry picked from commit 81741d7ce8031367ca4055227ecd55014d0aced8)\n(cherry picked from commit 7f97c65b8c56facedc0fe69d150c22d7d9218b52)\n(cherry picked from commit 1d021463d18eba72de75c3eb4b30c154ed913f7b)\n'}, {'number': 2, 'created': '2023-05-23 16:08:00.000000000', 'files': ['nova/tests/functional/libvirt/test_pci_sriov_servers.py', 'nova/tests/functional/regressions/test_bug_1983753.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3877ac52eb10f9423e4e81575b882ce762921002', 'message': 'Reproducer for bug 1983753\n\nThere is stable/train related changes in test_bug_1983753.py due to\nmany test helpers like _create_server, _resize_server, and\n_confirm_resize is missing in stable/train. Also support for py 2.7 is\nadded back as train needs to support it.\n\nRelated-Bug: #1983753\nChange-Id: Ic6566272b8c5af57cd1c73c73b3cba6cd265bebe\n(cherry picked from commit 6d602c6b734c2e360fa319ba22c2fced02ad3d29)\n(cherry picked from commit bdc32226e2d9ce4a073306f8f6267fbe305e64e4)\n(cherry picked from commit 87a8a7df9800f3c81dba2e2c0520168115ad1b28)\n(cherry picked from commit 81741d7ce8031367ca4055227ecd55014d0aced8)\n(cherry picked from commit 7f97c65b8c56facedc0fe69d150c22d7d9218b52)\n(cherry picked from commit 1d021463d18eba72de75c3eb4b30c154ed913f7b)\n'}]",1,883932,3877ac52eb10f9423e4e81575b882ce762921002,7,1,2,9708,,,0,"Reproducer for bug 1983753

There is stable/train related changes in test_bug_1983753.py due to
many test helpers like _create_server, _resize_server, and
_confirm_resize is missing in stable/train. Also support for py 2.7 is
added back as train needs to support it.

Related-Bug: #1983753
Change-Id: Ic6566272b8c5af57cd1c73c73b3cba6cd265bebe
(cherry picked from commit 6d602c6b734c2e360fa319ba22c2fced02ad3d29)
(cherry picked from commit bdc32226e2d9ce4a073306f8f6267fbe305e64e4)
(cherry picked from commit 87a8a7df9800f3c81dba2e2c0520168115ad1b28)
(cherry picked from commit 81741d7ce8031367ca4055227ecd55014d0aced8)
(cherry picked from commit 7f97c65b8c56facedc0fe69d150c22d7d9218b52)
(cherry picked from commit 1d021463d18eba72de75c3eb4b30c154ed913f7b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/32/883932/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/libvirt/test_pci_sriov_servers.py', 'nova/tests/functional/regressions/test_bug_1983753.py']",2,829f4285cdb7e84fc657050a33001c008e9a3656,bug/1941005,"# All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import fixtures from oslo_serialization import jsonutils from nova.tests.functional.api import client from nova.tests.functional.libvirt import test_pci_sriov_servers from nova.tests.unit.virt.libvirt import fakelibvirt class TestPciResize(test_pci_sriov_servers._PCIServersTestBase): # these tests use multiple different configs so the whitelist is set by # each testcase individually PCI_PASSTHROUGH_WHITELIST = [] PCI_ALIAS = [ jsonutils.dumps(x) for x in [ { ""vendor_id"": fakelibvirt.PCI_VEND_ID, ""product_id"": fakelibvirt.PCI_PROD_ID, ""name"": ""a-pci-dev"", }, { ""vendor_id"": fakelibvirt.PCI_VEND_ID, ""product_id"": fakelibvirt.PF_PROD_ID, ""device_type"": ""type-PF"", ""name"": ""a-pf"", }, { ""vendor_id"": fakelibvirt.PCI_VEND_ID, ""product_id"": fakelibvirt.VF_PROD_ID, ""device_type"": ""type-VF"", ""name"": ""a-vf"", }, ] ] def setUp(self): super().setUp() self.useFixture( fixtures.MockPatch( 'nova.virt.libvirt.driver.LibvirtDriver.' 'migrate_disk_and_power_off', return_value='{}' ) ) # These tests should not depend on the host's sysfs self.useFixture( fixtures.MockPatch('nova.pci.utils.is_physical_function')) self.useFixture( fixtures.MockPatch( 'nova.pci.utils.get_function_by_ifname', return_value=(None, False) ) ) def _test_resize_from_two_devs_to_one_dev(self, num_pci_on_dest): # The fake libvirt will emulate on the host: # * two type-PCI in slot 0, 1 compute1_pci_info = fakelibvirt.HostPCIDevicesInfo(num_pci=2) # the config matches the PCI dev compute1_device_spec = [ jsonutils.dumps(x) for x in [ { ""vendor_id"": fakelibvirt.PCI_VEND_ID, ""product_id"": fakelibvirt.PCI_PROD_ID, }, ] ] self.flags(group='pci', passthrough_whitelist=compute1_device_spec) host_info = fakelibvirt.HostInfo(cpu_nodes=2, cpu_sockets=1, cpu_cores=2, cpu_threads=2, kB_mem=15740000) fake_connection = self._get_connection(host_info, pci_info=compute1_pci_info, hostname='compute1') self.mock_conn.return_value = fake_connection self.compute = self.start_service('compute', host='compute1') self.assertPCIDeviceCounts(""compute1"", total=2, free=2) # create a server that requests two PCI devs extra_spec = {""pci_passthrough:alias"": ""a-pci-dev:2""} flavor_id = self._create_flavor(extra_spec=extra_spec) server = self._build_server(flavor_id=flavor_id) server = self.api.post_server({'server': server}) server = self._wait_for_state_change(server, 'BUILD') self.assertEqual('ACTIVE', server['status']) self.assertPCIDeviceCounts(""compute1"", total=2, free=0) # start another compute with a different amount of PCI dev available compute2_pci_info = fakelibvirt.HostPCIDevicesInfo( num_pci=num_pci_on_dest) # the config matches the PCI dev compute2_device_spec = [ jsonutils.dumps(x) for x in [ { ""vendor_id"": fakelibvirt.PCI_VEND_ID, ""product_id"": fakelibvirt.PCI_PROD_ID, }, ] ] self.flags(group='pci', passthrough_whitelist=compute2_device_spec) fake_connection = self._get_connection(host_info, pci_info=compute2_pci_info, hostname='compute2') self.mock_conn.return_value = fake_connection self.compute = self.start_service('compute', host='compute2') self.assertPCIDeviceCounts( ""compute2"", total=num_pci_on_dest, free=num_pci_on_dest) # resize the server to request only one PCI dev instead of the current # two. This should fit to compute2 having at least one dev extra_spec = {""pci_passthrough:alias"": ""a-pci-dev:1""} flavor_id = self._create_flavor(extra_spec=extra_spec) # resize post = {'resize': {""flavorRef"": flavor_id}} self.api.post_server_action(server['id'], post) server = self._wait_for_state_change(server, 'RESIZE') self.assertEqual('VERIFY_RESIZE', server['status']) # confirm post = {'confirmResize': {}} self.api.post_server_action(server['id'], post) server = self._wait_for_state_change(server, 'CONFIRM_RESIZE') self.assertEqual('ACTIVE', server['status']) self.assertPCIDeviceCounts(""compute1"", total=2, free=2) self.assertPCIDeviceCounts( ""compute2"", total=num_pci_on_dest, free=num_pci_on_dest - 1) def test_resize_from_two_devs_to_one_dev_dest_has_two_devs(self): # this works self._test_resize_from_two_devs_to_one_dev(num_pci_on_dest=2) def test_resize_from_two_devs_to_one_dev_dest_has_one_dev(self): # This is bug 1983753 as nova uses the old InstancePciRequest during # the scheduling and therefore tries to find a compute with two PCI # devs even though the flavor only requests one. ex = self.assertRaises( client.OpenStackApiException, self._test_resize_from_two_devs_to_one_dev, num_pci_on_dest=1 ) self.assertIn( 'No valid host was found. No valid host found for resize', str(ex)) def test_resize_from_vf_to_pf(self): # The fake libvirt will emulate on the host: # * one type-PF in slot 0 with one VF compute1_pci_info = fakelibvirt.HostPCIDevicesInfo( num_pfs=1, num_vfs=1) # the config matches only the VF compute1_device_spec = [ jsonutils.dumps(x) for x in [ { ""vendor_id"": fakelibvirt.PCI_VEND_ID, ""product_id"": fakelibvirt.VF_PROD_ID, }, ] ] self.flags(group='pci', passthrough_whitelist=compute1_device_spec) host_info = fakelibvirt.HostInfo(cpu_nodes=2, cpu_sockets=1, cpu_cores=2, cpu_threads=2, kB_mem=15740000) fake_connection = self._get_connection(host_info, pci_info=compute1_pci_info, hostname='compute1') self.mock_conn.return_value = fake_connection self.compute = self.start_service('compute', host='compute1') self.assertPCIDeviceCounts(""compute1"", total=1, free=1) # create a server that requests one Vf extra_spec = {""pci_passthrough:alias"": ""a-vf:1""} flavor_id = self._create_flavor(extra_spec=extra_spec) server = self._build_server(flavor_id=flavor_id) server = self.api.post_server({'server': server}) server = self._wait_for_state_change(server, 'BUILD') self.assertEqual('ACTIVE', server['status']) self.assertPCIDeviceCounts(""compute1"", total=1, free=0) # start another compute with a single PF dev available # The fake libvirt will emulate on the host: # * one type-PF in slot 0 with 1 VF compute2_pci_info = fakelibvirt.HostPCIDevicesInfo( num_pfs=1, num_vfs=1) # the config matches the PF dev but not the VF compute2_device_spec = [ jsonutils.dumps(x) for x in [ { ""vendor_id"": fakelibvirt.PCI_VEND_ID, ""product_id"": fakelibvirt.PF_PROD_ID, }, ] ] self.flags(group='pci', passthrough_whitelist=compute2_device_spec) host_info = fakelibvirt.HostInfo(cpu_nodes=2, cpu_sockets=1, cpu_cores=2, cpu_threads=2, kB_mem=15740000) fake_connection = self._get_connection(host_info, pci_info=compute2_pci_info, hostname='compute2') self.mock_conn.return_value = fake_connection self.compute = self.start_service('compute', host='compute2') self.assertPCIDeviceCounts(""compute2"", total=1, free=1) # resize the server to request on PF dev instead of the current VF # dev. This should fit to compute2 having exactly one PF dev. extra_spec = {""pci_passthrough:alias"": ""a-pf:1""} flavor_id = self._create_flavor(extra_spec=extra_spec) # This is bug 1983753 as nova uses the old InstancePciRequest during # the scheduling and therefore tries to find a compute with a VF dev # even though the flavor only requests a PF dev. post = {'resize': {""flavorRef"": flavor_id}} ex = self.assertRaises( client.OpenStackApiException, self.api.post_server_action, server['id'], post, ) self.assertIn( 'No valid host was found. No valid host found for resize', str(ex)) ",,249,0
openstack%2Fnova~883934,openstack/nova,stable/train,I16ed1143ead3779c87698aa29bac005678db2993,Add reno for fixing bug 1941005,ABANDONED,2023-05-23 12:13:34.000000000,2023-09-01 16:52:02.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-05-23 12:13:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/67000e074512a8e00ca28033d3327b2a3d438d62', 'message': 'Add reno for fixing bug 1941005\n\nRelated-Bug: #1941005\nRelated-Bug: #1983753\nChange-Id: I16ed1143ead3779c87698aa29bac005678db2993\n(cherry picked from commit 82cdfa23c7a0e269ab038e241bb7428b7f1391aa)\n(cherry picked from commit 19bac6e9c362ee692f4be92041bb3f6c3b9b6c23)\n(cherry picked from commit cbf785709968fffc0a760e28f1cdb5c38b254232)\n(cherry picked from commit 63c21cf68502a6c61727d9080e13a3882b9e7c11)\n(cherry picked from commit 82e1524d07389958098b66a726d71b10bbaaf049)\n(cherry picked from commit 4f5e0b3338e130a629bbc2d3d89ed907c610f7a9)\n'}, {'number': 2, 'created': '2023-05-23 16:08:00.000000000', 'files': ['releasenotes/notes/bug-1983753-update-requestspec-pci_request-for-resize-a3c6b0a979db723f.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/21b9a0732e32fa9301679b94f1f0ab467f1a725a', 'message': 'Add reno for fixing bug 1941005\n\nRelated-Bug: #1941005\nRelated-Bug: #1983753\nChange-Id: I16ed1143ead3779c87698aa29bac005678db2993\n(cherry picked from commit 82cdfa23c7a0e269ab038e241bb7428b7f1391aa)\n(cherry picked from commit 19bac6e9c362ee692f4be92041bb3f6c3b9b6c23)\n(cherry picked from commit cbf785709968fffc0a760e28f1cdb5c38b254232)\n(cherry picked from commit 63c21cf68502a6c61727d9080e13a3882b9e7c11)\n(cherry picked from commit 82e1524d07389958098b66a726d71b10bbaaf049)\n(cherry picked from commit 4f5e0b3338e130a629bbc2d3d89ed907c610f7a9)\n'}]",0,883934,21b9a0732e32fa9301679b94f1f0ab467f1a725a,5,1,2,9708,,,0,"Add reno for fixing bug 1941005

Related-Bug: #1941005
Related-Bug: #1983753
Change-Id: I16ed1143ead3779c87698aa29bac005678db2993
(cherry picked from commit 82cdfa23c7a0e269ab038e241bb7428b7f1391aa)
(cherry picked from commit 19bac6e9c362ee692f4be92041bb3f6c3b9b6c23)
(cherry picked from commit cbf785709968fffc0a760e28f1cdb5c38b254232)
(cherry picked from commit 63c21cf68502a6c61727d9080e13a3882b9e7c11)
(cherry picked from commit 82e1524d07389958098b66a726d71b10bbaaf049)
(cherry picked from commit 4f5e0b3338e130a629bbc2d3d89ed907c610f7a9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/34/883934/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/notes/bug-1983753-update-requestspec-pci_request-for-resize-a3c6b0a979db723f.yaml'],1,67000e074512a8e00ca28033d3327b2a3d438d62,bug/1941005,--- fixes: - | `Bug #1941005 <https://bugs.launchpad.net/nova/+bug/1941005>`_ is fixed. During resize Nova now uses the PCI requests from the new flavor to select the destination host. ,,6,0
openstack%2Fnova~879706,openstack/nova,stable/train,Ib775c2210349b72b3dc033554ac6d8b35b8d2d79,Don't provide MTU value in metadata service if DHCP is enabled,ABANDONED,2023-04-06 13:53:59.000000000,2023-09-01 16:51:53.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-04-06 13:53:59.000000000', 'files': ['releasenotes/notes/Do-not-send-mtu-value-in-metadata-for-networks-with-enabled-dhcp-641506f2a13b540f.yaml', 'nova/tests/unit/virt/test_netutils.py', 'nova/virt/netutils.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/468c1d77e39b8755f483a857ee3267915180f2ad', 'message': 'Don\'t provide MTU value in metadata service if DHCP is enabled\n\nFor networks with subnets with enabled DHCP service don\'t provide\nmtu value in the metadata. That way cloud-init will not configure it\n""statically"" in e.g. netplan\'s config file and guest OS will use MTU\nvalue provided by the DHCP service.\n\n\nCloses-Bug: #1899487\nChange-Id: Ib775c2210349b72b3dc033554ac6d8b35b8d2d79\n(cherry picked from commit 6bdc79af30151f683c0f462bc6c69da30ebcbcf9)\n'}]",1,879706,468c1d77e39b8755f483a857ee3267915180f2ad,9,1,1,16207,,,0,"Don't provide MTU value in metadata service if DHCP is enabled

For networks with subnets with enabled DHCP service don't provide
mtu value in the metadata. That way cloud-init will not configure it
""statically"" in e.g. netplan's config file and guest OS will use MTU
value provided by the DHCP service.


Closes-Bug: #1899487
Change-Id: Ib775c2210349b72b3dc033554ac6d8b35b8d2d79
(cherry picked from commit 6bdc79af30151f683c0f462bc6c69da30ebcbcf9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/06/879706/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/Do-not-send-mtu-value-in-metadata-for-networks-with-enabled-dhcp-641506f2a13b540f.yaml', 'nova/tests/unit/virt/test_netutils.py', 'nova/virt/netutils.py']",3,468c1d77e39b8755f483a857ee3267915180f2ad,bug/1899487," 'mtu': _get_link_mtu(vif),def _get_link_mtu(vif): for subnet in vif['network']['subnets']: if subnet['meta'].get('dhcp_server'): return None return vif['network']['meta'].get('mtu') "," 'mtu': vif['network']['meta'].get('mtu'),",36,1
openstack%2Fnova~866090,openstack/nova,stable/train,I741cb6b29a67da8c60708c6251c441d778ca74d0,Fix the wrong exception used to retry detach API calls,ABANDONED,2022-11-29 23:19:15.000000000,2023-09-01 16:51:32.000000000,,"[{'_account_id': 4690}, {'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 20733}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-11-29 23:19:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ba03c7cc33843d263b35f86d123877cf16ac9add', 'message': 'Fix the wrong exception used to retry detach API calls\n\nWhen cinderclient receives an error response from API, it raises one\nof the exceptions from the cinderclient.exceptions module instead of\nthe cinderclient.apiclient.exceptions module.\n\nThis change fixes the wrong exception used to detect 500 error from\ncinder API, so that API calls to detach volumes are properly retried.\n\nCloses-Bug: #1944043\nChange-Id: I741cb6b29a67da8c60708c6251c441d778ca74d0\n(cherry picked from commit f6206269b71d9bcaf65aa0313c21cc6b75a54fb3)\n(cherry picked from commit 513241a7e4f3f3246c75e66a910db6c864c3981e)\n(cherry picked from commit 7168314dd125fca8d1cecac035477ea0314ab828)\n(cherry picked from commit ba3a6f385512c352374425972791084cb54ab7ee)\n(cherry picked from commit 7c4ee8097c6a194e0968ef45482045d74a82c43f)\n'}, {'number': 2, 'created': '2022-12-07 01:09:57.000000000', 'files': ['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/56ae96c0f999046cfa9c15c5206ff73989d8f313', 'message': 'Fix the wrong exception used to retry detach API calls\n\nWhen cinderclient receives an error response from API, it raises one\nof the exceptions from the cinderclient.exceptions module instead of\nthe cinderclient.apiclient.exceptions module.\n\nThis change fixes the wrong exception used to detect 500 error from\ncinder API, so that API calls to detach volumes are properly retried.\n\nNOTE(melwitt): The difference from the cherry picked change is due to\none unit test failing under python 2.7 with the following error:\n\n      [...]\n\n      File ""/usr/lib/python2.7/copy.py"", line 257, in _deepcopy_dict\n        y[deepcopy(key, memo)] = deepcopy(value, memo)\n      File ""/usr/lib/python2.7/copy.py"", line 190, in deepcopy\n        y = _reconstruct(x, rv, 1, memo)\n      File ""/usr/lib/python2.7/copy.py"", line 329, in _reconstruct\n        y = callable(*args)\n    TypeError: __init__() takes at least 2 arguments (1 given)\n\nThe error was raised in test_detach_internal_server_error from the\nunmocked nova.volume.cinder.API.get() method. Because the error was\nbeing raised from get() and get() is unrelated to the detach() test and\nshould be mocked anyway, this cherry pick was modified to also mock\nnova.volume.cinder.API.get() to avoid the error.\n\nCloses-Bug: #1944043\nChange-Id: I741cb6b29a67da8c60708c6251c441d778ca74d0\n(cherry picked from commit f6206269b71d9bcaf65aa0313c21cc6b75a54fb3)\n(cherry picked from commit 513241a7e4f3f3246c75e66a910db6c864c3981e)\n(cherry picked from commit 7168314dd125fca8d1cecac035477ea0314ab828)\n(cherry picked from commit ba3a6f385512c352374425972791084cb54ab7ee)\n(cherry picked from commit 7c4ee8097c6a194e0968ef45482045d74a82c43f)\n'}]",9,866090,56ae96c0f999046cfa9c15c5206ff73989d8f313,11,5,2,4690,,,0,"Fix the wrong exception used to retry detach API calls

When cinderclient receives an error response from API, it raises one
of the exceptions from the cinderclient.exceptions module instead of
the cinderclient.apiclient.exceptions module.

This change fixes the wrong exception used to detect 500 error from
cinder API, so that API calls to detach volumes are properly retried.

NOTE(melwitt): The difference from the cherry picked change is due to
one unit test failing under python 2.7 with the following error:

      [...]

      File ""/usr/lib/python2.7/copy.py"", line 257, in _deepcopy_dict
        y[deepcopy(key, memo)] = deepcopy(value, memo)
      File ""/usr/lib/python2.7/copy.py"", line 190, in deepcopy
        y = _reconstruct(x, rv, 1, memo)
      File ""/usr/lib/python2.7/copy.py"", line 329, in _reconstruct
        y = callable(*args)
    TypeError: __init__() takes at least 2 arguments (1 given)

The error was raised in test_detach_internal_server_error from the
unmocked nova.volume.cinder.API.get() method. Because the error was
being raised from get() and get() is unrelated to the detach() test and
should be mocked anyway, this cherry pick was modified to also mock
nova.volume.cinder.API.get() to avoid the error.

Closes-Bug: #1944043
Change-Id: I741cb6b29a67da8c60708c6251c441d778ca74d0
(cherry picked from commit f6206269b71d9bcaf65aa0313c21cc6b75a54fb3)
(cherry picked from commit 513241a7e4f3f3246c75e66a910db6c864c3981e)
(cherry picked from commit 7168314dd125fca8d1cecac035477ea0314ab828)
(cherry picked from commit ba3a6f385512c352374425972791084cb54ab7ee)
(cherry picked from commit 7c4ee8097c6a194e0968ef45482045d74a82c43f)
",git fetch https://review.opendev.org/openstack/nova refs/changes/90/866090/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py']",2,ba03c7cc33843d263b35f86d123877cf16ac9add,bug/1978444," (isinstance(e, cinder_exception.ClientException) and e.code == 500)) (isinstance(e, cinder_exception.ClientException) and e.code == 500)) (isinstance(e, cinder_exception.ClientException) and e.code == 500))",from cinderclient import apiclient as cinder_apiclient type(e) == cinder_apiclient.exceptions.InternalServerError) type(e) == cinder_apiclient.exceptions.InternalServerError) type(e) == cinder_apiclient.exceptions.InternalServerError),30,22
openstack%2Fnova~873722,openstack/nova,stable/train,I8ef9db851b37c5249d2efbe09a15a1ddbae8205d,libvirt: At start-up rework compareCPU() usage with a workaround,ABANDONED,2023-02-14 15:25:27.000000000,2023-09-01 16:51:25.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-02-14 15:25:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/696f9623bd5a922f1e4e63855eca76b114269a3e', 'message': ""libvirt: At start-up rework compareCPU() usage with a workaround\n\nIn this patch:\n\n  - Remove the first compareCPU() call (called via the wrapper\n    _compare_cpu()) in _check_cpu_compatibility(), and let libvirt\n    handle it.  (QEMU >=2.9 and libvirt >= 4.4.0 are the mininum\n    required versions, and upstream Nova satisfies them by a good\n    margin.)\n\n  - Validate the user-configured CPU models from\n    _get_cpu_model_mapping().  And take into account all the CPU flags\n    before calling _compare_cpu().\n\n    (Suggested-by: Sean Mooney -- thanks!)\n\n  - Add a workaround to allow skipping the remaining compareCPU() call\n    in _check_cpu_compatibility() as a potential future-proof (because\n    we cannot test all possible CPU models and hardware).  Unlike the\n    removed first call, this call takes into account the extra CPU flags\n    provided by the user into account when evaluating guest CPU model\n    compatibility.\n\nAs a follow up comes the patch[1] that replaces the older libvirt CPU\nAPI with the newer one.\n\nConflicts (Train):\n  - workarounds.py: Small rearrangement; this stable/train backport\n    hasn't merged yet:\n    https://review.opendev.org/c/openstack/nova/+/851226 -- Add a\n    workaround to skip hypervisor version check on LM\n  - libvirt/driver.py: Readjust the 'if' block in that validates CPU\n    model in _check_cpu_compatibility()\n  - libvirt/test_driver.py: Small adjustments; some tests from Wallaby\n    aren't in Train.\n\n[1] https://review.opendev.org/c/openstack/nova/+/869950 -- libvirt:\n    Replace usage of compareCPU() with compareHypervisorCPU()\n\nChange-Id: I8ef9db851b37c5249d2efbe09a15a1ddbae8205d\nSigned-off-by: Kashyap Chamarthy <kchamart@redhat.com>\n(cherry picked from commit 9caaaf1f221063a4329c72c8b67a6015648644a2)\n(cherry picked from commit 7c7c8442d3b02f7bb296b79574610e6b6036aefa)\n(cherry picked from commit 023244c83043b3cb1b1c2725e80b2955498e7971)\n(cherry picked from commit b6526563d4718a589f9f5645842cdbd69c759cad)\n""}, {'number': 2, 'created': '2023-02-14 16:10:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f31c69d5a05958f459eeacc40c0f056eed2670f1', 'message': ""libvirt: At start-up rework compareCPU() usage with a workaround\n\nIn this patch:\n\n  - Remove the first compareCPU() call (called via the wrapper\n    _compare_cpu()) in _check_cpu_compatibility(), and let libvirt\n    handle it.  (QEMU >=2.9 and libvirt >= 4.4.0 are the mininum\n    required versions, and upstream Nova satisfies them by a good\n    margin.)\n\n  - Validate the user-configured CPU models from\n    _get_cpu_model_mapping().  And take into account all the CPU flags\n    before calling _compare_cpu().\n\n    (Suggested-by: Sean Mooney -- thanks!)\n\n  - Add a workaround to allow skipping the remaining compareCPU() call\n    in _check_cpu_compatibility() as a potential future-proof (because\n    we cannot test all possible CPU models and hardware).  Unlike the\n    removed first call, this call takes into account the extra CPU flags\n    provided by the user into account when evaluating guest CPU model\n    compatibility.\n\nAs a follow up comes the patch[1] that replaces the older libvirt CPU\nAPI with the newer one.\n\nConflicts (Train):\n  - workarounds.py: Small rearrangement; this stable/train backport\n    hasn't merged yet:\n    https://review.opendev.org/c/openstack/nova/+/851226 -- Add a\n    workaround to skip hypervisor version check on LM\n  - libvirt/driver.py: Readjust the 'if' block in that validates CPU\n    model in _check_cpu_compatibility()\n  - libvirt/test_driver.py: Small adjustments; some tests from Wallaby\n    aren't in Train.\n\n[1] https://review.opendev.org/c/openstack/nova/+/869950 -- libvirt:\n    Replace usage of compareCPU() with compareHypervisorCPU()\n\nChange-Id: I8ef9db851b37c5249d2efbe09a15a1ddbae8205d\nSigned-off-by: Kashyap Chamarthy <kchamart@redhat.com>\n(cherry picked from commit 9caaaf1f221063a4329c72c8b67a6015648644a2)\n(cherry picked from commit 7c7c8442d3b02f7bb296b79574610e6b6036aefa)\n(cherry picked from commit 023244c83043b3cb1b1c2725e80b2955498e7971)\n(cherry picked from commit b6526563d4718a589f9f5645842cdbd69c759cad)\n""}, {'number': 3, 'created': '2023-02-15 15:39:29.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/541d64d3a3b22e5ec2b47d93fe5da8360e467d55', 'message': ""libvirt: At start-up rework compareCPU() usage with a workaround\n\nIn this patch:\n\n  - Remove the first compareCPU() call (called via the wrapper\n    _compare_cpu()) in _check_cpu_compatibility(), and let libvirt\n    handle it.  (QEMU >=2.9 and libvirt >= 4.4.0 are the mininum\n    required versions, and upstream Nova satisfies them by a good\n    margin.)\n\n  - Validate the user-configured CPU models from\n    _get_cpu_model_mapping().  And take into account all the CPU flags\n    before calling _compare_cpu().\n\n    (Suggested-by: Sean Mooney -- thanks!)\n\n  - Add a workaround to allow skipping the remaining compareCPU() call\n    in _check_cpu_compatibility() as a potential future-proof (because\n    we cannot test all possible CPU models and hardware).  Unlike the\n    removed first call, this call takes into account the extra CPU flags\n    provided by the user into account when evaluating guest CPU model\n    compatibility.\n\nAs a follow up comes the patch[1] that replaces the older libvirt CPU\nAPI with the newer one.\n\nConflicts (Train):\n  - workarounds.py: Small rearrangement; this stable/train backport\n    hasn't merged yet:\n    https://review.opendev.org/c/openstack/nova/+/851226 -- Add a\n    workaround to skip hypervisor version check on LM\n  - libvirt/driver.py: Readjust the 'if' block in that validates CPU\n    model in _check_cpu_compatibility()\n  - libvirt/test_driver.py: Small adjustments; some tests from Wallaby\n    aren't in Train.\n\n[1] https://review.opendev.org/c/openstack/nova/+/869950 -- libvirt:\n    Replace usage of compareCPU() with compareHypervisorCPU()\n\nChange-Id: I8ef9db851b37c5249d2efbe09a15a1ddbae8205d\nSigned-off-by: Kashyap Chamarthy <kchamart@redhat.com>\n(cherry picked from commit 9caaaf1f221063a4329c72c8b67a6015648644a2)\n(cherry picked from commit 7c7c8442d3b02f7bb296b79574610e6b6036aefa)\n(cherry picked from commit 023244c83043b3cb1b1c2725e80b2955498e7971)\n(cherry picked from commit b6526563d4718a589f9f5645842cdbd69c759cad)\n""}]",4,873722,541d64d3a3b22e5ec2b47d93fe5da8360e467d55,7,1,3,6962,,,0,"libvirt: At start-up rework compareCPU() usage with a workaround

In this patch:

  - Remove the first compareCPU() call (called via the wrapper
    _compare_cpu()) in _check_cpu_compatibility(), and let libvirt
    handle it.  (QEMU >=2.9 and libvirt >= 4.4.0 are the mininum
    required versions, and upstream Nova satisfies them by a good
    margin.)

  - Validate the user-configured CPU models from
    _get_cpu_model_mapping().  And take into account all the CPU flags
    before calling _compare_cpu().

    (Suggested-by: Sean Mooney -- thanks!)

  - Add a workaround to allow skipping the remaining compareCPU() call
    in _check_cpu_compatibility() as a potential future-proof (because
    we cannot test all possible CPU models and hardware).  Unlike the
    removed first call, this call takes into account the extra CPU flags
    provided by the user into account when evaluating guest CPU model
    compatibility.

As a follow up comes the patch[1] that replaces the older libvirt CPU
API with the newer one.

Conflicts (Train):
  - workarounds.py: Small rearrangement; this stable/train backport
    hasn't merged yet:
    https://review.opendev.org/c/openstack/nova/+/851226 -- Add a
    workaround to skip hypervisor version check on LM
  - libvirt/driver.py: Readjust the 'if' block in that validates CPU
    model in _check_cpu_compatibility()
  - libvirt/test_driver.py: Small adjustments; some tests from Wallaby
    aren't in Train.

[1] https://review.opendev.org/c/openstack/nova/+/869950 -- libvirt:
    Replace usage of compareCPU() with compareHypervisorCPU()

Change-Id: I8ef9db851b37c5249d2efbe09a15a1ddbae8205d
Signed-off-by: Kashyap Chamarthy <kchamart@redhat.com>
(cherry picked from commit 9caaaf1f221063a4329c72c8b67a6015648644a2)
(cherry picked from commit 7c7c8442d3b02f7bb296b79574610e6b6036aefa)
(cherry picked from commit 023244c83043b3cb1b1c2725e80b2955498e7971)
(cherry picked from commit b6526563d4718a589f9f5645842cdbd69c759cad)
",git fetch https://review.opendev.org/openstack/nova refs/changes/22/873722/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",3,696f9623bd5a922f1e4e63855eca76b114269a3e,," @mock.patch('nova.virt.libvirt.host.libvirt.Connection.compareCPU') def test__check_cpu_compatibility_skip_compare_at_init( self, mocked_compare ): self.flags(group='workarounds', skip_cpu_compare_at_startup=True) self.flags(cpu_mode=""custom"", cpu_models=[""Icelake-Server-noTSX""], cpu_model_extra_flags = [""-mpx""], group=""libvirt"") drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), True) drvr.init_host(""dummyhost"") mocked_compare.assert_not_called() mocked_compare.side_effect = (-1, 0) mocked_compare.side_effect = (-1, 0)"," mocked_compare.side_effect = (2, 0) mocked_compare.side_effect = (2, 0)",48,36
openstack%2Fnova~851226,openstack/nova,stable/train,Iec387dcbc49ddb91ebf5cfd188224eaf6021c0e1,Add a workaround to skip hypervisor version check on LM,ABANDONED,2022-07-27 13:38:25.000000000,2023-09-01 16:51:16.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-07-27 13:38:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b8ea6774e337208ed09266d73f5893e9c4c6ca50', 'message': ""Add a workaround to skip hypervisor version check on LM\n\nWhen turned on, this will disable the version-checking of hypervisors\nduring live-migration.  This can be useful for operators in certain\nscenarios when upgrading.  E.g. if you want to relocate all instances\noff a compute node due to an emergency hardware issue, and you only have\nanother old compute node ready at the time.\n\nNote, though: libvirt will do its own internal compatibility checks, and\nmight still reject live migration if the destination is incompatible.\n\nConflicts: nova/conf/workarounds.py,\n           nova/tests/unit/conductor/tasks/test_live_migrate.py\n             - Some of the config options are not present in\n               'stable/victoria'; and the modification to\n               test_check_requested_destination()' is not applicable to\n               'stable/train'\n\nCloses-Bug: #1982853\n\nChange-Id: Iec387dcbc49ddb91ebf5cfd188224eaf6021c0e1\nSigned-off-by: Kashyap Chamarthy <kchamart@redhat.com>\n(cherry picked from commit 5032cb62e6458282e1282ac64cf7dd49a2497ac1)\n(cherry picked from commit 0e3b4424b7f587e3e274a5ef81ac35cfd14f0c96)\n(cherry picked from commit 21f92d4b576fc2c309713c369041dd434d605cc6)\n(cherry picked from commit d04e925a029f38c3d38f52e40d5bc5d8db41cf9f)\n(cherry picked from commit 6bb930fee89bdaa0023f0f9ded34ef91e1b099a9)\n""}, {'number': 2, 'created': '2023-02-14 15:25:27.000000000', 'files': ['releasenotes/notes/skip-hypervisor-version-check-on-lm-a87f2dcb4f8bf0f2.yaml', 'nova/conductor/tasks/live_migrate.py', 'nova/conf/workarounds.py', 'nova/tests/unit/conductor/tasks/test_live_migrate.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a121db00089e13a9b0b41583ad406f4e21dc60db', 'message': ""Add a workaround to skip hypervisor version check on LM\n\nWhen turned on, this will disable the version-checking of hypervisors\nduring live-migration.  This can be useful for operators in certain\nscenarios when upgrading.  E.g. if you want to relocate all instances\noff a compute node due to an emergency hardware issue, and you only have\nanother old compute node ready at the time.\n\nNote, though: libvirt will do its own internal compatibility checks, and\nmight still reject live migration if the destination is incompatible.\n\nConflicts: nova/conf/workarounds.py,\n           nova/tests/unit/conductor/tasks/test_live_migrate.py\n             - Some of the config options are not present in\n               'stable/victoria'; and the modification to\n               test_check_requested_destination()' is not applicable to\n               'stable/train'\n\nCloses-Bug: #1982853\n\nChange-Id: Iec387dcbc49ddb91ebf5cfd188224eaf6021c0e1\nSigned-off-by: Kashyap Chamarthy <kchamart@redhat.com>\n(cherry picked from commit 5032cb62e6458282e1282ac64cf7dd49a2497ac1)\n(cherry picked from commit 0e3b4424b7f587e3e274a5ef81ac35cfd14f0c96)\n(cherry picked from commit 21f92d4b576fc2c309713c369041dd434d605cc6)\n(cherry picked from commit d04e925a029f38c3d38f52e40d5bc5d8db41cf9f)\n(cherry picked from commit 6bb930fee89bdaa0023f0f9ded34ef91e1b099a9)\n""}]",3,851226,a121db00089e13a9b0b41583ad406f4e21dc60db,13,1,2,6962,,,0,"Add a workaround to skip hypervisor version check on LM

When turned on, this will disable the version-checking of hypervisors
during live-migration.  This can be useful for operators in certain
scenarios when upgrading.  E.g. if you want to relocate all instances
off a compute node due to an emergency hardware issue, and you only have
another old compute node ready at the time.

Note, though: libvirt will do its own internal compatibility checks, and
might still reject live migration if the destination is incompatible.

Conflicts: nova/conf/workarounds.py,
           nova/tests/unit/conductor/tasks/test_live_migrate.py
             - Some of the config options are not present in
               'stable/victoria'; and the modification to
               test_check_requested_destination()' is not applicable to
               'stable/train'

Closes-Bug: #1982853

Change-Id: Iec387dcbc49ddb91ebf5cfd188224eaf6021c0e1
Signed-off-by: Kashyap Chamarthy <kchamart@redhat.com>
(cherry picked from commit 5032cb62e6458282e1282ac64cf7dd49a2497ac1)
(cherry picked from commit 0e3b4424b7f587e3e274a5ef81ac35cfd14f0c96)
(cherry picked from commit 21f92d4b576fc2c309713c369041dd434d605cc6)
(cherry picked from commit d04e925a029f38c3d38f52e40d5bc5d8db41cf9f)
(cherry picked from commit 6bb930fee89bdaa0023f0f9ded34ef91e1b099a9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/26/851226/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/skip-hypervisor-version-check-on-lm-a87f2dcb4f8bf0f2.yaml', 'nova/conductor/tasks/live_migrate.py', 'nova/conf/workarounds.py', 'nova/tests/unit/conductor/tasks/test_live_migrate.py']",4,b8ea6774e337208ed09266d73f5893e9c4c6ca50,bug/1982853," @mock.patch.object(live_migrate.LiveMigrationTask, '_get_compute_info') def test_skip_hypervisor_version_check_on_lm_raise_ex(self, mock_get_info): host1 = {'hypervisor_type': 'a', 'hypervisor_version': 7} host2 = {'hypervisor_type': 'a', 'hypervisor_version': 6} self.flags(group='workarounds', skip_hypervisor_version_check_on_lm=False) mock_get_info.side_effect = [objects.ComputeNode(**host1), objects.ComputeNode(**host2)] self.assertRaises(exception.DestinationHypervisorTooOld, self.task._check_compatible_with_source_hypervisor, self.destination) self.assertEqual([mock.call(self.instance_host), mock.call(self.destination)], mock_get_info.call_args_list) @mock.patch.object(live_migrate.LiveMigrationTask, '_get_compute_info') def test_skip_hypervisor_version_check_on_lm_do_not_raise_ex( self, mock_get_info ): host1 = {'hypervisor_type': 'a', 'hypervisor_version': 7} host2 = {'hypervisor_type': 'a', 'hypervisor_version': 6} self.flags(group='workarounds', skip_hypervisor_version_check_on_lm=True) mock_get_info.side_effect = [objects.ComputeNode(**host1), objects.ComputeNode(**host2)] self.task._check_compatible_with_source_hypervisor(self.destination) self.assertEqual([mock.call(self.instance_host), mock.call(self.destination)], mock_get_info.call_args_list) ",,53,2
openstack%2Fnova~869674,openstack/nova,stable/train,I1719f8eda04e8d15a3b01f0612977164c4e55e85,Gracefully ERROR in _init_instance if vnic_type changed,ABANDONED,2023-01-10 10:47:12.000000000,2023-09-01 16:51:07.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-01-10 10:47:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8f3712af87b677ee8cf7e41008f45438c9c3e46a', 'message': 'Gracefully ERROR in _init_instance if vnic_type changed\n\nIf the vnic_type of a bound port changes from ""direct"" to ""macvtap"" and\nthen the compute service is restarted then during _init_instance nova\ntries to plug the vif of the changed port. However as it now has macvtap\nvnic_type nova tries to look up the netdev of the parent VF. Still that\nVF is consumed by the instance so there is no such netdev on the host\nOS. This error killed the compute service at startup due to unhandled\nexception. This patch adds the exception handler, logs an ERROR and\ncontinue initializing other instances on the host.\n\nAlso this patch adds a detailed ERROR log when nova detects that the\nvnic_type changed during _heal_instance_info_cache periodic.\n\nThe stable/train only change is due to neutron module rename between\nussuri and train.\n\nCloses-Bug: #1981813\nChange-Id: I1719f8eda04e8d15a3b01f0612977164c4e55e85\n(cherry picked from commit e43bf900dc8ca66578603bed333c56b215b1876e)\n(cherry picked from commit 1cdeb44f798fce2ce014a3d7de2310d82a4fd34f)\n(cherry picked from commit 4464141d393a1f3ffd25fec6b5d907ce0320e872)\n(cherry picked from commit f1ec1e38d7eb81fa65a4ca7628c363921923833f)\n(cherry picked from commit e624300e4a2b008283d33bd6f85ea6d5e604fe4b)\n(cherry picked from commit 9f7702b833116b9590a3ce69f0bec13346005dcc)\n'}, {'number': 2, 'created': '2023-01-25 16:59:20.000000000', 'files': ['nova/network/neutronv2/api.py', 'nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/network/test_neutronv2.py', 'nova/tests/functional/libvirt/test_pci_sriov_servers.py', 'releasenotes/notes/bug-1981813-vnic-type-change-9f3e16fae885b57f.yaml', 'nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c86883595d7d3cd719c71805661c617c1fd08268', 'message': 'Gracefully ERROR in _init_instance if vnic_type changed\n\nIf the vnic_type of a bound port changes from ""direct"" to ""macvtap"" and\nthen the compute service is restarted then during _init_instance nova\ntries to plug the vif of the changed port. However as it now has macvtap\nvnic_type nova tries to look up the netdev of the parent VF. Still that\nVF is consumed by the instance so there is no such netdev on the host\nOS. This error killed the compute service at startup due to unhandled\nexception. This patch adds the exception handler, logs an ERROR and\ncontinue initializing other instances on the host.\n\nAlso this patch adds a detailed ERROR log when nova detects that the\nvnic_type changed during _heal_instance_info_cache periodic.\n\nThe stable/train only change is due to neutron module rename between\nussuri and train.\n\nCloses-Bug: #1981813\nChange-Id: I1719f8eda04e8d15a3b01f0612977164c4e55e85\n(cherry picked from commit e43bf900dc8ca66578603bed333c56b215b1876e)\n(cherry picked from commit a28c82719545d5c8ee7f3ff1361b3a796e05095a)\n(cherry picked from commit 1a98a1a650d065a8ab3e1c474f3b9fd537dc2206)\n(cherry picked from commit e5838298e7189f01a1eb99e90a9b4da6e1925c36)\n(cherry picked from commit 88df0d05e6ba4e2a5a4eb1185ad8cde6a9797c89)\n(cherry picked from commit 7dbb2ac7d8d554b1eed10c084532fd735270f0a8)\n'}]",2,869674,c86883595d7d3cd719c71805661c617c1fd08268,11,1,2,9708,,,0,"Gracefully ERROR in _init_instance if vnic_type changed

If the vnic_type of a bound port changes from ""direct"" to ""macvtap"" and
then the compute service is restarted then during _init_instance nova
tries to plug the vif of the changed port. However as it now has macvtap
vnic_type nova tries to look up the netdev of the parent VF. Still that
VF is consumed by the instance so there is no such netdev on the host
OS. This error killed the compute service at startup due to unhandled
exception. This patch adds the exception handler, logs an ERROR and
continue initializing other instances on the host.

Also this patch adds a detailed ERROR log when nova detects that the
vnic_type changed during _heal_instance_info_cache periodic.

The stable/train only change is due to neutron module rename between
ussuri and train.

Closes-Bug: #1981813
Change-Id: I1719f8eda04e8d15a3b01f0612977164c4e55e85
(cherry picked from commit e43bf900dc8ca66578603bed333c56b215b1876e)
(cherry picked from commit a28c82719545d5c8ee7f3ff1361b3a796e05095a)
(cherry picked from commit 1a98a1a650d065a8ab3e1c474f3b9fd537dc2206)
(cherry picked from commit e5838298e7189f01a1eb99e90a9b4da6e1925c36)
(cherry picked from commit 88df0d05e6ba4e2a5a4eb1185ad8cde6a9797c89)
(cherry picked from commit 7dbb2ac7d8d554b1eed10c084532fd735270f0a8)
",git fetch https://review.opendev.org/openstack/nova refs/changes/74/869674/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/network/neutronv2/api.py', 'nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/network/test_neutronv2.py', 'nova/tests/functional/libvirt/test_pci_sriov_servers.py', 'releasenotes/notes/bug-1981813-vnic-type-change-9f3e16fae885b57f.yaml', 'nova/compute/manager.py']",6,8f3712af87b677ee8cf7e41008f45438c9c3e46a,bug/1981813," except exception.PciDeviceNotFoundById: # This is bug 1981813 where the bound port vnic_type has changed # from direct to macvtap. Nova does not support that and it # already printed an ERROR when the change is detected during # _heal_instance_info_cache. Now we print an ERROR again and skip # plugging the vifs but let the service startup continue to init # the other instances LOG.exception( 'Virtual interface plugging failed for instance. Probably the ' 'vnic_type of the bound port has been changed. Nova does not ' 'support such change.', instance=instance ) return",,252,7
openstack%2Fnova~869673,openstack/nova,stable/train,I9367b7ed475917bdb05eb3f209ce1a4e646534e2,Reproduce bug 1981813 in func env,ABANDONED,2023-01-10 10:47:12.000000000,2023-09-01 16:50:58.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-01-10 10:47:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/883d5799d497613d9336036ba563526f62e4c4e5', 'message': 'Reproduce bug 1981813 in func env\n\nThere stable/train only changes:\n* removed type annotation to support py27\n* _create_server not exists here so used a different way to create the\n  server\n* needed to define physnet in the whitelist to allow booting with a\n  neutron port\n* manually created the port in the neutron fixture as create_port does\n  not work here\n* extended the port with vif_type and vif_details to allow booting with\n  the port\n\nRelated-Bug: #1981813\nChange-Id: I9367b7ed475917bdb05eb3f209ce1a4e646534e2\n(cherry picked from commit f8c91eb75fc5504a37fc3b4be1d65d33dbc9b511)\n(cherry picked from commit 76bcc21e0a47221ce8fdfa126172af546f7028cc)\n(cherry picked from commit d25b2a94e5cf84550dc05c377c12a1fe88e2a74f)\n(cherry picked from commit 4663dd7ded5610630c39a8678e57d96430ae0842)\n(cherry picked from commit c5cdccb32378163a28caea7474be02c48e830284)\n(cherry picked from commit a4bb1cad95e34db573e343fc64c87356d97696dc)\n'}, {'number': 2, 'created': '2023-01-25 16:59:20.000000000', 'files': ['nova/tests/functional/libvirt/test_pci_sriov_servers.py', 'nova/tests/fixtures.py', 'nova/tests/unit/virt/libvirt/fakelibvirt.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/95c7df9df1543e366d221796a08e3b7ff0c0867a', 'message': 'Reproduce bug 1981813 in func env\n\nThere stable/train only changes:\n* removed type annotation to support py27\n* _create_server not exists here so used a different way to create the\n  server\n* needed to define physnet in the whitelist to allow booting with a\n  neutron port\n* manually created the port in the neutron fixture as create_port does\n  not work here\n* extended the port with vif_type and vif_details to allow booting with\n  the port\n\nRelated-Bug: #1981813\nChange-Id: I9367b7ed475917bdb05eb3f209ce1a4e646534e2\n(cherry picked from commit f8c91eb75fc5504a37fc3b4be1d65d33dbc9b511)\n(cherry picked from commit 4954f993680c75fd9d3d507f2dcd00300c9b3d44)\n(cherry picked from commit 0c87681135cfb3ce61d2a0392928c1dbc1fe5fde)\n(cherry picked from commit cb4c2b6c04232901f4c5adae724697fec3aed4e8)\n(cherry picked from commit 231881b214e36f256bfb95d806557e6a0852f5e3)\n(cherry picked from commit fd4870b8dcfbc35117b967b703aac40ddbba3b35)\n'}]",0,869673,95c7df9df1543e366d221796a08e3b7ff0c0867a,5,1,2,9708,,,0,"Reproduce bug 1981813 in func env

There stable/train only changes:
* removed type annotation to support py27
* _create_server not exists here so used a different way to create the
  server
* needed to define physnet in the whitelist to allow booting with a
  neutron port
* manually created the port in the neutron fixture as create_port does
  not work here
* extended the port with vif_type and vif_details to allow booting with
  the port

Related-Bug: #1981813
Change-Id: I9367b7ed475917bdb05eb3f209ce1a4e646534e2
(cherry picked from commit f8c91eb75fc5504a37fc3b4be1d65d33dbc9b511)
(cherry picked from commit 4954f993680c75fd9d3d507f2dcd00300c9b3d44)
(cherry picked from commit 0c87681135cfb3ce61d2a0392928c1dbc1fe5fde)
(cherry picked from commit cb4c2b6c04232901f4c5adae724697fec3aed4e8)
(cherry picked from commit 231881b214e36f256bfb95d806557e6a0852f5e3)
(cherry picked from commit fd4870b8dcfbc35117b967b703aac40ddbba3b35)
",git fetch https://review.opendev.org/openstack/nova refs/changes/73/869673/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/libvirt/test_pci_sriov_servers.py', 'nova/tests/fixtures.py', 'nova/tests/unit/virt/libvirt/fakelibvirt.py']",3,883d5799d497613d9336036ba563526f62e4c4e5,bug/1981813," self.mock_get_ifname_by_pci_address = self.useFixture( fixtures.MockPatch( ""nova.pci.utils.get_ifname_by_pci_address"", return_value=""fake_pf_interface_name"", ) ).mock"," self.useFixture(fixtures.MockPatch( 'nova.pci.utils.get_ifname_by_pci_address', return_value='fake_pf_interface_name'))",105,3
openstack%2Fnova~866091,openstack/nova,stable/train,I593011d9f4c43cdae7a3d53b556c6e2a2b939989,Retry attachment delete API call for 504 Gateway Timeout,ABANDONED,2022-11-29 23:19:15.000000000,2023-09-01 16:50:49.000000000,,"[{'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 22348}, {'_account_id': 32238}]","[{'number': 1, 'created': '2022-11-29 23:19:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1be189e041b6eecc452420f9768f576d37a82084', 'message': 'Retry attachment delete API call for 504 Gateway Timeout\n\nWhen cinder-api runs behind a load balancer(eg haproxy), the load\nbalancer can return 504 Gateway Timeout when cinder-api does not\nrespond within timeout. This change ensures nova retries deleting\na volume attachment in that case.\n\nAlso this change makes nova ignore 404 in the API call. This is\nrequired because cinder might continue deleting the attachment even if\nthe load balancer returns 504. This also helps us in the situation\nwhere the volume attachment was accidentally removed by users.\n\nCloses-Bug: #1978444\nChange-Id: I593011d9f4c43cdae7a3d53b556c6e2a2b939989\n(cherry picked from commit 8f4b740ca5292556f8e953a30f2a11ed4fbc2945)\n(cherry picked from commit b94ffb1123b1a6cf0a8675e0d6f1072e9625f570)\n(cherry picked from commit 14f9b7627e8a48f546e2f1c79d4336e1e4923501)\n(cherry picked from commit 9b1c078112f11eafbd8e174efbd0e0f9d2c951ee)\n(cherry picked from commit 3cb1e35b5e3a3f8949bb0fd31fb8a246c5346703)\n(cherry picked from commit 2f67eb3c12efd3269968946276244b181a365da8)\n'}, {'number': 2, 'created': '2022-12-07 01:09:57.000000000', 'files': ['nova/tests/unit/volume/test_cinder.py', 'releasenotes/notes/bug-1978444-db46df5f3d5ea19e.yaml', 'nova/volume/cinder.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3e4fbfd7473735a46cdbf24c83a0c31fa85b9a3c', 'message': 'Retry attachment delete API call for 504 Gateway Timeout\n\nWhen cinder-api runs behind a load balancer(eg haproxy), the load\nbalancer can return 504 Gateway Timeout when cinder-api does not\nrespond within timeout. This change ensures nova retries deleting\na volume attachment in that case.\n\nAlso this change makes nova ignore 404 in the API call. This is\nrequired because cinder might continue deleting the attachment even if\nthe load balancer returns 504. This also helps us in the situation\nwhere the volume attachment was accidentally removed by users.\n\nCloses-Bug: #1978444\nChange-Id: I593011d9f4c43cdae7a3d53b556c6e2a2b939989\n(cherry picked from commit 8f4b740ca5292556f8e953a30f2a11ed4fbc2945)\n(cherry picked from commit b94ffb1123b1a6cf0a8675e0d6f1072e9625f570)\n(cherry picked from commit 14f9b7627e8a48f546e2f1c79d4336e1e4923501)\n(cherry picked from commit 9b1c078112f11eafbd8e174efbd0e0f9d2c951ee)\n(cherry picked from commit 3cb1e35b5e3a3f8949bb0fd31fb8a246c5346703)\n(cherry picked from commit 2f67eb3c12efd3269968946276244b181a365da8)\n'}]",3,866091,3e4fbfd7473735a46cdbf24c83a0c31fa85b9a3c,10,4,2,4690,,,0,"Retry attachment delete API call for 504 Gateway Timeout

When cinder-api runs behind a load balancer(eg haproxy), the load
balancer can return 504 Gateway Timeout when cinder-api does not
respond within timeout. This change ensures nova retries deleting
a volume attachment in that case.

Also this change makes nova ignore 404 in the API call. This is
required because cinder might continue deleting the attachment even if
the load balancer returns 504. This also helps us in the situation
where the volume attachment was accidentally removed by users.

Closes-Bug: #1978444
Change-Id: I593011d9f4c43cdae7a3d53b556c6e2a2b939989
(cherry picked from commit 8f4b740ca5292556f8e953a30f2a11ed4fbc2945)
(cherry picked from commit b94ffb1123b1a6cf0a8675e0d6f1072e9625f570)
(cherry picked from commit 14f9b7627e8a48f546e2f1c79d4336e1e4923501)
(cherry picked from commit 9b1c078112f11eafbd8e174efbd0e0f9d2c951ee)
(cherry picked from commit 3cb1e35b5e3a3f8949bb0fd31fb8a246c5346703)
(cherry picked from commit 2f67eb3c12efd3269968946276244b181a365da8)
",git fetch https://review.opendev.org/openstack/nova refs/changes/91/866091/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/volume/test_cinder.py', 'releasenotes/notes/bug-1978444-db46df5f3d5ea19e.yaml', 'nova/volume/cinder.py']",3,1be189e041b6eecc452420f9768f576d37a82084,bug/1978444," e.code in (500, 504))) if ex.code == 404: LOG.warning('Attachment %(id)s does not exist. Ignoring.', {'id': attachment_id}) else: with excutils.save_and_reraise_exception(): LOG.error(('Delete attachment failed for attachment ' '%(id)s. Error: %(msg)s Code: %(code)s'), {'id': attachment_id, 'msg': six.text_type(ex), 'code': getattr(ex, 'code', None)})"," e.code == 500)) with excutils.save_and_reraise_exception(): LOG.error(('Delete attachment failed for attachment ' '%(id)s. Error: %(msg)s Code: %(code)s'), {'id': attachment_id, 'msg': six.text_type(ex), 'code': getattr(ex, 'code', None)})",54,11
openstack%2Fnova~787903,openstack/nova,stable/train,I1c12b2903c1e5bf3a88394493456ad33233f3cd8,guestfs: With libguestfs >= v1.41.1 decode returned bytes to string,ABANDONED,2021-04-25 20:35:09.000000000,2023-09-01 16:50:41.000000000,,"[{'_account_id': 10135}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-25 20:35:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/de79a540a08006f91b0908ba6b1756e67bf27740', 'message': ""guestfs: With libguestfs >= v1.41.1 decode returned bytes to string\n\nlibguestfs >= v1.41.1 and commit 0ee02e0117527 changed the return type\nof read_file from string to bytes.\n\nhttps://github.com/libguestfs/libguestfs/commit/0ee02e0117527b86a31b2a88a14994ce7f15571f\n\nAs we don't check the version of libguestfs installed this change\nhandles both the original behaviour where a string is returned and the\nnewer behaviour by decoding any returned bytes to a string.\n\nCloses-Bug: #1882421\nChange-Id: I1c12b2903c1e5bf3a88394493456ad33233f3cd8\n(cherry picked from commit 606d588e3eca1d88ad26b4c2cfa3f2e1d5ed553e)\n(cherry picked from commit e98935f705a931e3ae666820387a419be1622b64)\n(cherry picked from commit 210abc09b857880aa7665fb540f46cb53662a600)\n(cherry picked from commit 637402eec7f3f7f552bfc30d16c5960e3a651395)\n""}, {'number': 2, 'created': '2021-04-26 09:33:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/55de335e4c9d1617ece5c4b0a0e5039d6492f7de', 'message': ""guestfs: With libguestfs >= v1.41.1 decode returned bytes to string\n\nlibguestfs >= v1.41.1 and commit 0ee02e0117527 changed the return type\nof read_file from string to bytes.\n\nhttps://github.com/libguestfs/libguestfs/commit/0ee02e0117527b86a31b2a88a14994ce7f15571f\n\nAs we don't check the version of libguestfs installed this change\nhandles both the original behaviour where a string is returned and the\nnewer behaviour by decoding any returned bytes to a string.\n\nNOTE(lyarwood): As stable/train is supported on both py2 and py3 the use\nof six.PY2 has been introduced to avoid the isinstance conditional\nincorrectly passing as bytes was an alias to str in py2.\n\nCloses-Bug: #1882421\nChange-Id: I1c12b2903c1e5bf3a88394493456ad33233f3cd8\n(cherry picked from commit 606d588e3eca1d88ad26b4c2cfa3f2e1d5ed553e)\n(cherry picked from commit e98935f705a931e3ae666820387a419be1622b64)\n(cherry picked from commit 210abc09b857880aa7665fb540f46cb53662a600)\n(cherry picked from commit 637402eec7f3f7f552bfc30d16c5960e3a651395)\n""}, {'number': 3, 'created': '2021-09-14 10:58:45.000000000', 'files': ['nova/tests/unit/virt/disk/vfs/fakeguestfs.py', 'nova/virt/disk/vfs/guestfs.py', 'nova/virt/disk/api.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/9e7b975725f33c2f77a5ae49c39d229f5ec68345', 'message': ""guestfs: With libguestfs >= v1.41.1 decode returned bytes to string\n\nlibguestfs >= v1.41.1 and commit 0ee02e0117527 changed the return type\nof read_file from string to bytes.\n\nhttps://github.com/libguestfs/libguestfs/commit/0ee02e0117527b86a31b2a88a14994ce7f15571f\n\nAs we don't check the version of libguestfs installed this change\nhandles both the original behaviour where a string is returned and the\nnewer behaviour by decoding any returned bytes to a string.\n\nNOTE(lyarwood): As stable/train is supported on both py2 and py3 the use\nof six.PY2 has been introduced to avoid the isinstance conditional\nincorrectly passing as bytes was an alias to str in py2.\n\nCloses-Bug: #1882421\nChange-Id: I1c12b2903c1e5bf3a88394493456ad33233f3cd8\n(cherry picked from commit 606d588e3eca1d88ad26b4c2cfa3f2e1d5ed553e)\n(cherry picked from commit e98935f705a931e3ae666820387a419be1622b64)\n(cherry picked from commit 210abc09b857880aa7665fb540f46cb53662a600)\n(cherry picked from commit 637402eec7f3f7f552bfc30d16c5960e3a651395)\n""}]",2,787903,9e7b975725f33c2f77a5ae49c39d229f5ec68345,21,2,3,10135,,,0,"guestfs: With libguestfs >= v1.41.1 decode returned bytes to string

libguestfs >= v1.41.1 and commit 0ee02e0117527 changed the return type
of read_file from string to bytes.

https://github.com/libguestfs/libguestfs/commit/0ee02e0117527b86a31b2a88a14994ce7f15571f

As we don't check the version of libguestfs installed this change
handles both the original behaviour where a string is returned and the
newer behaviour by decoding any returned bytes to a string.

NOTE(lyarwood): As stable/train is supported on both py2 and py3 the use
of six.PY2 has been introduced to avoid the isinstance conditional
incorrectly passing as bytes was an alias to str in py2.

Closes-Bug: #1882421
Change-Id: I1c12b2903c1e5bf3a88394493456ad33233f3cd8
(cherry picked from commit 606d588e3eca1d88ad26b4c2cfa3f2e1d5ed553e)
(cherry picked from commit e98935f705a931e3ae666820387a419be1622b64)
(cherry picked from commit 210abc09b857880aa7665fb540f46cb53662a600)
(cherry picked from commit 637402eec7f3f7f552bfc30d16c5960e3a651395)
",git fetch https://review.opendev.org/openstack/nova refs/changes/03/787903/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/disk/vfs/fakeguestfs.py', 'nova/virt/disk/vfs/guestfs.py', 'nova/virt/disk/api.py']",3,de79a540a08006f91b0908ba6b1756e67bf27740,bug/1882421, :param passwd_data: Data from the passwd file decoded as a string :param shadow_data: Data from the shadow file decoded as a string, :param passwd_data: path to the passwd file :param shadow_data: path to the shadow password file,11,4
openstack%2Fnova~853901,openstack/nova,stable/train,I73cf760a0ec6235e3bedc603219701c4946f819c,remove redundant statement,ABANDONED,2022-08-22 03:10:31.000000000,2023-09-01 16:50:27.000000000,,"[{'_account_id': 7634}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-08-22 03:10:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/dfced086adea8fcba5eace6881cfd8ba49aa5dc6', 'message': 'remove redundant statement in SecurityGroupDefaultRulesController\n\nremove redundant statement in SecurityGroupDefaultRulesController\n\nChange-Id: I73cf760a0ec6235e3bedc603219701c4946f819c\n'}, {'number': 2, 'created': '2022-08-22 03:11:22.000000000', 'files': ['nova/api/openstack/compute/security_group_default_rules.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3cadc6e1de30f5ebab9b254b9ee4767629809d32', 'message': 'remove redundant statement\n\nremove redundant statement in SecurityGroupDefaultRulesController\n\nChange-Id: I73cf760a0ec6235e3bedc603219701c4946f819c\n'}]",3,853901,3cadc6e1de30f5ebab9b254b9ee4767629809d32,8,3,2,29539,,,0,"remove redundant statement

remove redundant statement in SecurityGroupDefaultRulesController

Change-Id: I73cf760a0ec6235e3bedc603219701c4946f819c
",git fetch https://review.opendev.org/openstack/nova refs/changes/01/853901/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/api/openstack/compute/security_group_default_rules.py'],1,dfced086adea8fcba5eace6881cfd8ba49aa5dc6,train,, sg_rule['ip_range'] = {},0,1
openstack%2Fnova~839355,openstack/nova,stable/train,Icaad155e22c9e2d86e464a0deb741c73f0dfb28a,[rt] Apply migration context for incoming migrations,ABANDONED,2022-04-26 10:30:28.000000000,2023-09-01 16:50:19.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-04-26 10:30:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0b03d66a44b9c57c615e275938480c368112ea97', 'message': '[rt] Apply migration context for incoming migrations\n\nThere is a race condition between an incoming resize and an\nupdate_available_resource periodic in the resource tracker. The race\nwindow starts when the resize_instance RPC finishes  and ends when the\nfinish_resize compute RPC finally applies the migration context on the\ninstance.\n\nIn the race window, if the update_available_resource periodic is run on\nthe destination node, then it will see the instance as being tracked on\nthis host as the instance.node is already pointing to the dest. But the\ninstance.numa_topology still points to the source host topology as the\nmigration context is not applied yet. This leads to CPU pinning error if\nthe source topology does not fit to the dest topology. Also it stops the\nperiodic task and leaves the tracker in an inconsistent state. The\ninconsistent state only cleanup up after the periodic is run outside of\nthe race window.\n\nThis patch applies the migration context temporarily to the specific\ninstances during the periodic to keep resource accounting correct.\n\nConflicts: vif_plugging_timeout=0 added for the functional test\nto avoid test timeouts this was added in ussuri by\nI63c1109dcdb9132cdbc41010654c5fdb31a4fe31 that is not in stable/train.\n\nChange-Id: Icaad155e22c9e2d86e464a0deb741c73f0dfb28a\nCloses-Bug: #1953359\nCloses-Bug: #1952915\n(cherry picked from commit 32c1044d86a8d02712c8e3abdf8b3e4cff234a9c)\n(cherry picked from commit 1235dc324ebc1c6ac6dc94da0f45ffffcc546d2c)\n(cherry picked from commit 5f2f283a75243d2e2629d3c5f7e5ef4b3994972d)\n(cherry picked from commit d54bd316b331d439a26a7318ca68cab5f6280ab2)\n(cherry picked from commit 1d0b7051da430ed00ae49901a32ec6af46c1a64e)\n'}, {'number': 2, 'created': '2022-06-01 09:22:53.000000000', 'files': ['nova/tests/functional/libvirt/test_numa_servers.py', 'nova/compute/resource_tracker.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/98be985e11a2d5cbbd59faed32b0286b0361cc0d', 'message': '[rt] Apply migration context for incoming migrations\n\nThere is a race condition between an incoming resize and an\nupdate_available_resource periodic in the resource tracker. The race\nwindow starts when the resize_instance RPC finishes  and ends when the\nfinish_resize compute RPC finally applies the migration context on the\ninstance.\n\nIn the race window, if the update_available_resource periodic is run on\nthe destination node, then it will see the instance as being tracked on\nthis host as the instance.node is already pointing to the dest. But the\ninstance.numa_topology still points to the source host topology as the\nmigration context is not applied yet. This leads to CPU pinning error if\nthe source topology does not fit to the dest topology. Also it stops the\nperiodic task and leaves the tracker in an inconsistent state. The\ninconsistent state only cleanup up after the periodic is run outside of\nthe race window.\n\nThis patch applies the migration context temporarily to the specific\ninstances during the periodic to keep resource accounting correct.\n\nConflicts: vif_plugging_timeout=0 added for the functional test\nto avoid test timeouts this was added in ussuri by\nI63c1109dcdb9132cdbc41010654c5fdb31a4fe31 that is not in stable/train.\n\nChange-Id: Icaad155e22c9e2d86e464a0deb741c73f0dfb28a\nCloses-Bug: #1953359\nCloses-Bug: #1952915\n(cherry picked from commit 32c1044d86a8d02712c8e3abdf8b3e4cff234a9c)\n(cherry picked from commit 1235dc324ebc1c6ac6dc94da0f45ffffcc546d2c)\n(cherry picked from commit 5f2f283a75243d2e2629d3c5f7e5ef4b3994972d)\n(cherry picked from commit d54bd316b331d439a26a7318ca68cab5f6280ab2)\n(cherry picked from commit 1d0b7051da430ed00ae49901a32ec6af46c1a64e)\n'}]",10,839355,98be985e11a2d5cbbd59faed32b0286b0361cc0d,20,2,2,9708,,,0,"[rt] Apply migration context for incoming migrations

There is a race condition between an incoming resize and an
update_available_resource periodic in the resource tracker. The race
window starts when the resize_instance RPC finishes  and ends when the
finish_resize compute RPC finally applies the migration context on the
instance.

In the race window, if the update_available_resource periodic is run on
the destination node, then it will see the instance as being tracked on
this host as the instance.node is already pointing to the dest. But the
instance.numa_topology still points to the source host topology as the
migration context is not applied yet. This leads to CPU pinning error if
the source topology does not fit to the dest topology. Also it stops the
periodic task and leaves the tracker in an inconsistent state. The
inconsistent state only cleanup up after the periodic is run outside of
the race window.

This patch applies the migration context temporarily to the specific
instances during the periodic to keep resource accounting correct.

Conflicts: vif_plugging_timeout=0 added for the functional test
to avoid test timeouts this was added in ussuri by
I63c1109dcdb9132cdbc41010654c5fdb31a4fe31 that is not in stable/train.

Change-Id: Icaad155e22c9e2d86e464a0deb741c73f0dfb28a
Closes-Bug: #1953359
Closes-Bug: #1952915
(cherry picked from commit 32c1044d86a8d02712c8e3abdf8b3e4cff234a9c)
(cherry picked from commit 1235dc324ebc1c6ac6dc94da0f45ffffcc546d2c)
(cherry picked from commit 5f2f283a75243d2e2629d3c5f7e5ef4b3994972d)
(cherry picked from commit d54bd316b331d439a26a7318ca68cab5f6280ab2)
(cherry picked from commit 1d0b7051da430ed00ae49901a32ec6af46c1a64e)
",git fetch https://review.opendev.org/openstack/nova refs/changes/55/839355/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/libvirt/test_numa_servers.py', 'nova/compute/resource_tracker.py']",2,0b03d66a44b9c57c615e275938480c368112ea97,bug/1953359," # Check for tracked instances with in-progress, incoming, but not # finished migrations. For those instance the migration context # is not applied yet (it will be during finish_resize when the # migration goes to finished state). We need to manually and # temporary apply the migration context here when the resource usage is # updated. See bug 1953359 for more details. instance_by_uuid = {instance.uuid: instance for instance in instances} for migration in migrations: if ( migration.instance_uuid in instance_by_uuid and migration.dest_compute == self.host and migration.dest_node == nodename ): # we does not check for the 'post-migrating' migration status # as applying the migration context for an instance already # in finished migration status is a no-op anyhow. instance = instance_by_uuid[migration.instance_uuid] LOG.debug( 'Applying migration context for instance %s as it has an ' 'incoming, in-progress migration %s. ' 'Migration status is %s', migration.instance_uuid, migration.uuid, migration.status ) # It is OK not to revert the migration context at the end of # the periodic as the instance is not saved during the periodic instance.apply_migration_context() # Now calculate usage based on instance utilization: instance_by_uuid = self._update_usage_from_instances( context, instances, nodename) "," # Now calculate usage based on instance utilization: instance_by_uuid = self._update_usage_from_instances( context, instances, nodename) ",45,27
openstack%2Fnova~839354,openstack/nova,stable/train,I57982131768d87e067d1413012b96f1baa68052b,Extend the reproducer for 1953359 and 1952915,ABANDONED,2022-04-26 10:30:28.000000000,2023-09-01 16:50:09.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-04-26 10:30:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c5a7757b8c58d7f6ca41850abd45a533e9ccec17', 'message': 'Extend the reproducer for 1953359 and 1952915\n\nThis patch extends the original reproduction\nI4be429c56aaa15ee12f448978c38214e741eae63 to cover\nbug 1952915 as well as they have a common root cause.\n\nChange-Id: I57982131768d87e067d1413012b96f1baa68052b\nRelated-Bug: #1953359\nRelated-Bug: #1952915\n(cherry picked from commit 9f296d775d8f58fcbd03393c81a023268c7071cb)\n(cherry picked from commit 0411962938ae1de39f8dccb03efe4567f82ad671)\n(cherry picked from commit 94f17be190cce060ba8afcafbade4247b27b86f0)\n(cherry picked from commit 8d4487465b60cd165dc76dea5a9fdb3c4dbf5740)\n(cherry picked from commit 9b8e5cec303a621824366e1794665d6b849fefad)\n'}, {'number': 2, 'created': '2022-06-01 09:22:53.000000000', 'files': ['nova/tests/functional/libvirt/test_numa_servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/42c6707c1e4c03186964586100f99accec52b71d', 'message': 'Extend the reproducer for 1953359 and 1952915\n\nThis patch extends the original reproduction\nI4be429c56aaa15ee12f448978c38214e741eae63 to cover\nbug 1952915 as well as they have a common root cause.\n\nChange-Id: I57982131768d87e067d1413012b96f1baa68052b\nRelated-Bug: #1953359\nRelated-Bug: #1952915\n(cherry picked from commit 9f296d775d8f58fcbd03393c81a023268c7071cb)\n(cherry picked from commit 0411962938ae1de39f8dccb03efe4567f82ad671)\n(cherry picked from commit 94f17be190cce060ba8afcafbade4247b27b86f0)\n(cherry picked from commit 8d4487465b60cd165dc76dea5a9fdb3c4dbf5740)\n(cherry picked from commit 9b8e5cec303a621824366e1794665d6b849fefad)\n'}]",7,839354,42c6707c1e4c03186964586100f99accec52b71d,11,2,2,9708,,,0,"Extend the reproducer for 1953359 and 1952915

This patch extends the original reproduction
I4be429c56aaa15ee12f448978c38214e741eae63 to cover
bug 1952915 as well as they have a common root cause.

Change-Id: I57982131768d87e067d1413012b96f1baa68052b
Related-Bug: #1953359
Related-Bug: #1952915
(cherry picked from commit 9f296d775d8f58fcbd03393c81a023268c7071cb)
(cherry picked from commit 0411962938ae1de39f8dccb03efe4567f82ad671)
(cherry picked from commit 94f17be190cce060ba8afcafbade4247b27b86f0)
(cherry picked from commit 8d4487465b60cd165dc76dea5a9fdb3c4dbf5740)
(cherry picked from commit 9b8e5cec303a621824366e1794665d6b849fefad)
",git fetch https://review.opendev.org/openstack/nova refs/changes/54/839354/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/libvirt/test_numa_servers.py'],1,c5a7757b8c58d7f6ca41850abd45a533e9ccec17,bug/1953359,"from nova.compute import manager orig_finish_resize = manager.ComputeManager.finish_resize log = self.stdlog.logger.output # The resize_claim correctly calculates that the instance should be # pinned to pcpu id 1 instead of 0 self.assertIn( 'Computed NUMA topology CPU pinning: usable pCPUs: [[1]], ' 'vCPUs mapping: [(0, 1)]', log, ) # But the periodic fails as it tries to apply the source topology # on the dest. This is bug 1953359. log = self.stdlog.logger.output self.assertIn('Error updating resources for node compute2', log) self.assertIn( 'CPUPinningInvalid: CPU set to pin [0] must be ' 'a subset of free CPU set [1]', log, ) # now let the resize finishes return orig_finish_resize(*args, **kwargs) 'nova.compute.manager.ComputeManager.finish_resize', new=fake_finish_resize, ): # this is expected to succeed but logs are emitted # from the racing periodic task. See fake_finish_resize # for the asserts server = self._wait_for_state_change(server, 'VERIFY_RESIZE') # as the periodic job raced and failed during the resize if we revert # the instance now then it tries to unpin its cpus from the dest host # but those was never pinned as the periodic failed. So the unpinning # will fail too. post = {'revertResize': {}} ex = self.assertRaises( client.OpenStackApiException, self.admin_api.post_server_action, server['id'], post # This is still bug 1953359. self.assertEqual(500, ex.response.status_code) server = self.api.get_server(server['id']) self.assertEqual('ERROR', server['status']) self.stdlog.logger.output,"," 'nova.compute.manager.ComputeManager.finish_resize' ) as mock_finish_resize: mock_finish_resize.side_effect = fake_finish_resize log = self.stdlog.logger.output # The resize_claim correctly calculates that the inst1 should be pinned # to pcpu id 1 instead of 0 self.assertIn( 'Computed NUMA topology CPU pinning: usable pCPUs: [[1]], ' 'vCPUs mapping: [(0, 1)]', log, # But the periodic fails as it tries to apply the source topology on # the dest. This is bug 1953359. log = self.stdlog.logger.output self.assertIn('Error updating resources for node compute2', log) log,",43,15
openstack%2Fnova~839353,openstack/nova,stable/train,I4be429c56aaa15ee12f448978c38214e741eae63,Reproduce bug 1953359,ABANDONED,2022-04-26 10:30:28.000000000,2023-09-01 16:50:00.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-04-26 10:30:28.000000000', 'files': ['nova/tests/functional/libvirt/test_numa_servers.py', 'nova/tests/functional/test_servers.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/9b58ea81aa6145140c55841eccc50588ced9aaa1', 'message': ""Reproduce bug 1953359\n\nThis patch adds a functional test that reproduces a race between\nincoming migration and the update_available_resource periodic\n\nConflicts: The '_create_server' helper\ndon't exist here, so we need to use direct api calls instead.\n\n[1] Later change that bumps API version on parent classes\nhttps://review.opendev.org/c/openstack/nova/+/741282\n\nCo-Authored-By: Gabriel Silva Trevisan <gabriel.silvatrevisan@windriver.com>\n\nChange-Id: I4be429c56aaa15ee12f448978c38214e741eae63\nRelated-Bug: #1953359\n(cherry picked from commit c59224d715a21998f40f72cf4e37efdc990e4d7e)\n(cherry picked from commit f0a6d946aaa6c30f826cfced75c2fb06fdb379a8)\n(cherry picked from commit d8859e4f95f5abb20c844d914f2716cba047630e)\n(cherry picked from commit e549fec76fd2015e6e21ee5138bf06142a71e71a)\n(cherry picked from commit c92e7821e3b97c8469fc2a68621428549d36d755)\n""}]",6,839353,9b58ea81aa6145140c55841eccc50588ced9aaa1,9,2,1,9708,,,0,"Reproduce bug 1953359

This patch adds a functional test that reproduces a race between
incoming migration and the update_available_resource periodic

Conflicts: The '_create_server' helper
don't exist here, so we need to use direct api calls instead.

[1] Later change that bumps API version on parent classes
https://review.opendev.org/c/openstack/nova/+/741282

Co-Authored-By: Gabriel Silva Trevisan <gabriel.silvatrevisan@windriver.com>

Change-Id: I4be429c56aaa15ee12f448978c38214e741eae63
Related-Bug: #1953359
(cherry picked from commit c59224d715a21998f40f72cf4e37efdc990e4d7e)
(cherry picked from commit f0a6d946aaa6c30f826cfced75c2fb06fdb379a8)
(cherry picked from commit d8859e4f95f5abb20c844d914f2716cba047630e)
(cherry picked from commit e549fec76fd2015e6e21ee5138bf06142a71e71a)
(cherry picked from commit c92e7821e3b97c8469fc2a68621428549d36d755)
",git fetch https://review.opendev.org/openstack/nova refs/changes/53/839353/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/libvirt/test_numa_servers.py', 'nova/tests/functional/test_servers.py']",2,9b58ea81aa6145140c55841eccc50588ced9aaa1,bug/1953359, api_major_version = 'v2.1', api_major_version = 'v2',99,1
openstack%2Fneutron~893097,openstack/neutron,master,Ia261b4c62db9a99ef6eb161acb4609520e45d101,[Fullstack] Use new DB for each running test,MERGED,2023-08-29 17:54:56.000000000,2023-09-01 16:49:59.000000000,2023-08-30 17:28:16.000000000,"[{'_account_id': 1131}, {'_account_id': 13861}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-29 17:54:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/041fb2408810eceb58b99007afb94e8eb431f30e', 'message': ""[Fullstack] Use new DB for each running test\n\nUntil now neutron fullstack tests which were run by the same worker were\nusing same DB but after test content of the DB was cleaned.\nThis could cause problems e.g. for default security group rules which\nweren't created properly in second test run by the same worker.\n\nTo fix that issue patch [1] was proposed and merged some time ago. But\nthis didn't solve the problem so this patch is effectively reverting [1]\nand proposing another solution which will make each fullstack test to\nuse own DB and run db migration script.\n\n[1] https://review.opendev.org/c/openstack/neutron/+/891040\n\nRelated-bug: #1983053\nChange-Id: Ia261b4c62db9a99ef6eb161acb4609520e45d101\n""}, {'number': 2, 'created': '2023-08-30 10:18:06.000000000', 'files': ['neutron/tests/fullstack/base.py', 'neutron/tests/unit/testlib_api.py', 'zuul.d/base.yaml', 'neutron/tests/fullstack/test_securitygroup.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/78bc33d300dc268d193fd2a895ed26079d441c3d', 'message': ""[Fullstack] Use new DB for each running test\n\nUntil now neutron fullstack tests which were run by the same worker were\nusing same DB but after test content of the DB was cleaned.\nThis could cause problems e.g. for default security group rules which\nweren't created properly in second test run by the same worker.\n\nTo fix that issue patch [1] was proposed and merged some time ago. But\nthis didn't solve the problem so this patch is effectively reverting [1]\nand proposing another solution which will make each fullstack test to\nuse own DB and run db migration script.\n\nAs running DB migration before every test makes this jobs to run a bit\nlonger than it took before, this patch also increases timeout for the\nfullstack job(s) to 3h (10800 seconds).\n\n[1] https://review.opendev.org/c/openstack/neutron/+/891040\n\nRelated-bug: #1983053\nChange-Id: Ia261b4c62db9a99ef6eb161acb4609520e45d101\n""}]",3,893097,78bc33d300dc268d193fd2a895ed26079d441c3d,19,4,2,11975,,,0,"[Fullstack] Use new DB for each running test

Until now neutron fullstack tests which were run by the same worker were
using same DB but after test content of the DB was cleaned.
This could cause problems e.g. for default security group rules which
weren't created properly in second test run by the same worker.

To fix that issue patch [1] was proposed and merged some time ago. But
this didn't solve the problem so this patch is effectively reverting [1]
and proposing another solution which will make each fullstack test to
use own DB and run db migration script.

As running DB migration before every test makes this jobs to run a bit
longer than it took before, this patch also increases timeout for the
fullstack job(s) to 3h (10800 seconds).

[1] https://review.opendev.org/c/openstack/neutron/+/891040

Related-bug: #1983053
Change-Id: Ia261b4c62db9a99ef6eb161acb4609520e45d101
",git fetch https://review.opendev.org/openstack/neutron refs/changes/97/893097/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/fullstack/base.py', 'neutron/tests/unit/testlib_api.py', 'neutron/tests/fullstack/test_securitygroup.py']",3,041fb2408810eceb58b99007afb94e8eb431f30e,bug/1983053,, # NOTE(slaweq): Those SG tests are run serially by same worker thus we need # to run db migration script before each test because in some cases cleanup # after one test may clean data from the db and next test run by same # worker will have empty tables FORCE_DB_MIGRATION = True ,16,12
openstack%2Fnova~865302,openstack/nova,stable/train,I83621804da9f70832c8662ba6d2f1122e94ad37b,DNM: test nova-multi-cell job,ABANDONED,2022-11-22 15:46:48.000000000,2023-09-01 16:49:48.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-11-22 15:46:48.000000000', 'files': ['nova/utils.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/c3ac06804aab99f73c8527520d6041b3ec74546e', 'message': 'DNM: test nova-multi-cell job\n\nDepends-On: https://review.opendev.org/c/openstack/tempest/+/865300\nChange-Id: I83621804da9f70832c8662ba6d2f1122e94ad37b\n'}]",0,865302,c3ac06804aab99f73c8527520d6041b3ec74546e,3,1,1,17685,,,0,"DNM: test nova-multi-cell job

Depends-On: https://review.opendev.org/c/openstack/tempest/+/865300
Change-Id: I83621804da9f70832c8662ba6d2f1122e94ad37b
",git fetch https://review.opendev.org/openstack/nova refs/changes/02/865302/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/utils.py'],1,c3ac06804aab99f73c8527520d6041b3ec74546e,,# dummy change,,1,0
openstack%2Fnova~864692,openstack/nova,stable/train,I7412b16be310632da59a6139df9f0913281b5d77,Cleanup old resize instances dir before resize,ABANDONED,2022-11-16 13:51:12.000000000,2023-09-01 16:49:37.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-11-16 13:51:12.000000000', 'files': ['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug-1960230-cleanup-instances-dir-resize-56282e1b436a4908.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3b92ac85e3a38d37caa8ba0d9d525f58556b6e7d', 'message': 'Cleanup old resize instances dir before resize\n\nIf there is a failed resize that also failed the cleanup\nprocess performed by _cleanup_remote_migration() the retry\nof the resize will fail because it cannot rename the current\ninstances directory to _resize.\n\nThis renames the _cleanup_failed_migration() that does the\nsame logic we want to _cleanup_failed_instance_base() and\nuses it for both migration and resize cleanup of directory.\n\nIt then simply calls _cleanup_failed_instances_base() with\nthe resize dir path before trying a resize.\n\nCloses-Bug: 1960230\nChange-Id: I7412b16be310632da59a6139df9f0913281b5d77\n(cherry picked from commit 9111b99f739d41c092db8d01712a5aa72388b5fb)\n(cherry picked from commit 31179f62f1c832e0e894d04e9c9dd59978577cc0)\n(cherry picked from commit 88954da0c5670d6c8469b4b91cca1929a5a2a147)\n(cherry picked from commit 3d2219111126873c5797da60088ee924b69acae1)\n'}]",1,864692,3b92ac85e3a38d37caa8ba0d9d525f58556b6e7d,7,1,1,19234,,,0,"Cleanup old resize instances dir before resize

If there is a failed resize that also failed the cleanup
process performed by _cleanup_remote_migration() the retry
of the resize will fail because it cannot rename the current
instances directory to _resize.

This renames the _cleanup_failed_migration() that does the
same logic we want to _cleanup_failed_instance_base() and
uses it for both migration and resize cleanup of directory.

It then simply calls _cleanup_failed_instances_base() with
the resize dir path before trying a resize.

Closes-Bug: 1960230
Change-Id: I7412b16be310632da59a6139df9f0913281b5d77
(cherry picked from commit 9111b99f739d41c092db8d01712a5aa72388b5fb)
(cherry picked from commit 31179f62f1c832e0e894d04e9c9dd59978577cc0)
(cherry picked from commit 88954da0c5670d6c8469b4b91cca1929a5a2a147)
(cherry picked from commit 3d2219111126873c5797da60088ee924b69acae1)
",git fetch https://review.opendev.org/openstack/nova refs/changes/92/864692/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'releasenotes/notes/bug-1960230-cleanup-instances-dir-resize-56282e1b436a4908.yaml', 'nova/tests/unit/virt/libvirt/test_driver.py']",3,3b92ac85e3a38d37caa8ba0d9d525f58556b6e7d,bug/1960230," @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.' '_cleanup_failed_instance_base') @mock.patch('nova.virt.libvirt.driver.LibvirtDriver.' '_get_instance_disk_info') mock_get_disk_info, mock_cleanup, block_device_info=None, mock_cleanup.assert_called_once() mock_cleanup.reset_mock() mock_cleanup.assert_called_once() def test_cleanup_failed_instance_base(self, mock_rmtree): self.drvr._cleanup_failed_instance_base('/fake/inst')"," @mock.patch(('nova.virt.libvirt.driver.LibvirtDriver.' '_get_instance_disk_info')) mock_get_disk_info, block_device_info=None, def test_cleanup_failed_migration(self, mock_rmtree): self.drvr._cleanup_failed_migration('/fake/inst')",25,9
openstack%2Fnova~825177,openstack/nova,stable/train,I7a6a6fe5f5b23e76948b59a85ca9be075a1c2d6d,libvirt: Add announce-self post live-migration workaround,ABANDONED,2022-01-18 21:37:19.000000000,2023-09-01 16:49:29.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-01-18 21:37:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/391c1817b310c48612dca9c7de1593067d128d21', 'message': 'libvirt: Add announce-self post live-migration workaround\n\nThis patch adds a workaround that can be enabled\nto send an announce_self QEMU monitor command\npost live-migration to send out RARP frames\nthat was lost due to port binding or flows not\nbeing installed.\n\nPlease note that this makes marks the domain\nin libvirt as tainted.\n\nSee previous information about this issue in\nthe [1] bug.\n\n[1] https://bugs.launchpad.net/nova/+bug/1815989\n\nConflicts:\n    nova/conf/workarounds.py\n\nChange-Id: I7a6a6fe5f5b23e76948b59a85ca9be075a1c2d6d\nRelated-Bug: 1815989\n(cherry picked from commit d44e24efe28e825fbfd2c75a032bf2d10109a439)\n(cherry picked from commit 72a7d72e52e62f99202258f5bc261872ff558a2a)\n(cherry picked from commit bece8dbb93536c9ad31f37e2be9d054348f83cdb)\n(cherry picked from commit 19920b7c766458ac599688ea9b73f7b53957bd95)\n'}, {'number': 2, 'created': '2022-01-18 21:51:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/e5de5bf32cee1902bf30c3b78eed6dba18bff10a', 'message': 'libvirt: Add announce-self post live-migration workaround\n\nThis patch adds a workaround that can be enabled\nto send an announce_self QEMU monitor command\npost live-migration to send out RARP frames\nthat was lost due to port binding or flows not\nbeing installed.\n\nPlease note that this makes marks the domain\nin libvirt as tainted.\n\nSee previous information about this issue in\nthe [1] bug.\n\n[1] https://bugs.launchpad.net/nova/+bug/1815989\n\nConflicts:\n    nova/conf/workarounds.py\n\nChange-Id: I7a6a6fe5f5b23e76948b59a85ca9be075a1c2d6d\nRelated-Bug: 1815989\n(cherry picked from commit d44e24efe28e825fbfd2c75a032bf2d10109a439)\n(cherry picked from commit 72a7d72e52e62f99202258f5bc261872ff558a2a)\n(cherry picked from commit 77e00be26658a14d6e02b12cc8115d07051faddc)\n(cherry picked from commit 8b4b5b2c13a54e8a6890fbced0bb9e39b7942710)\n(cherry picked from commit 7e06a7af997035c34d718f0ef0093015d84a8437)\n'}, {'number': 3, 'created': '2022-01-28 08:50:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/5ef7827075b85a6746b82200ea013e7eb30248ab', 'message': 'libvirt: Add announce-self post live-migration workaround\n\nThis patch adds a workaround that can be enabled\nto send an announce_self QEMU monitor command\npost live-migration to send out RARP frames\nthat was lost due to port binding or flows not\nbeing installed.\n\nPlease note that this makes marks the domain\nin libvirt as tainted.\n\nSee previous information about this issue in\nthe [1] bug.\n\n[1] https://bugs.launchpad.net/nova/+bug/1815989\n\nConflicts:\n    nova/conf/workarounds.py\n\nChange-Id: I7a6a6fe5f5b23e76948b59a85ca9be075a1c2d6d\nRelated-Bug: 1815989\n(cherry picked from commit d44e24efe28e825fbfd2c75a032bf2d10109a439)\n(cherry picked from commit 72a7d72e52e62f99202258f5bc261872ff558a2a)\n(cherry picked from commit 77e00be26658a14d6e02b12cc8115d07051faddc)\n(cherry picked from commit 8b4b5b2c13a54e8a6890fbced0bb9e39b7942710)\n(cherry picked from commit 7e06a7af997035c34d718f0ef0093015d84a8437)\n'}, {'number': 4, 'created': '2022-03-04 16:31:59.000000000', 'files': ['nova/virt/libvirt/driver.py', 'releasenotes/notes/announce-self-post-live-migration-936721b1ab887514.yaml', 'nova/conf/workarounds.py', 'nova/virt/libvirt/guest.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/373ee810d7bd20f3bc72220fcdb8c8b3ad5e87af', 'message': 'libvirt: Add announce-self post live-migration workaround\n\nNOTE(melwitt): This is the combination of two commits, the workaround\nconfig option and a followup change to add a note that enabling the\nworkaround will cause the guest domain to be considered tainted by\nlibvirt.\n\nThis patch adds a workaround that can be enabled\nto send an announce_self QEMU monitor command\npost live-migration to send out RARP frames\nthat was lost due to port binding or flows not\nbeing installed.\n\nPlease note that this makes marks the domain\nin libvirt as tainted.\n\nSee previous information about this issue in\nthe [1] bug.\n\n[1] https://bugs.launchpad.net/nova/+bug/1815989\n\nRelated-Bug: 1815989\n\nUpdate announce self workaround opt description\n\nThis updates the announce self workaround config opt\ndescription to include info about instance being set\nas tainted by libvirt.\n\nChange-Id: I8140c8fe592dd54fc09a9510723892806db49a56\n(cherry picked from commit 2aa1ed5810b67b9a8f18b2ec5e21004f93831168)\n\nConflicts:\n    nova/conf/workarounds.py\n\nChange-Id: I7a6a6fe5f5b23e76948b59a85ca9be075a1c2d6d\n(cherry picked from commit d44e24efe28e825fbfd2c75a032bf2d10109a439)\n(cherry picked from commit a8981422afdd09f8cfea053e592c15e771fbe969)\n(cherry picked from commit c578b5d094a37719aa8e22e52fdd0c3a525011e0)\n(cherry picked from commit 410cfb07bd08efac6d2073141211c3195808e87a)\n(cherry picked from commit 30592556d30a7e8beccb55f292e44c5a35f7dbb8)\n'}]",0,825177,373ee810d7bd20f3bc72220fcdb8c8b3ad5e87af,11,1,4,11604,,,0,"libvirt: Add announce-self post live-migration workaround

NOTE(melwitt): This is the combination of two commits, the workaround
config option and a followup change to add a note that enabling the
workaround will cause the guest domain to be considered tainted by
libvirt.

This patch adds a workaround that can be enabled
to send an announce_self QEMU monitor command
post live-migration to send out RARP frames
that was lost due to port binding or flows not
being installed.

Please note that this makes marks the domain
in libvirt as tainted.

See previous information about this issue in
the [1] bug.

[1] https://bugs.launchpad.net/nova/+bug/1815989

Related-Bug: 1815989

Update announce self workaround opt description

This updates the announce self workaround config opt
description to include info about instance being set
as tainted by libvirt.

Change-Id: I8140c8fe592dd54fc09a9510723892806db49a56
(cherry picked from commit 2aa1ed5810b67b9a8f18b2ec5e21004f93831168)

Conflicts:
    nova/conf/workarounds.py

Change-Id: I7a6a6fe5f5b23e76948b59a85ca9be075a1c2d6d
(cherry picked from commit d44e24efe28e825fbfd2c75a032bf2d10109a439)
(cherry picked from commit a8981422afdd09f8cfea053e592c15e771fbe969)
(cherry picked from commit c578b5d094a37719aa8e22e52fdd0c3a525011e0)
(cherry picked from commit 410cfb07bd08efac6d2073141211c3195808e87a)
(cherry picked from commit 30592556d30a7e8beccb55f292e44c5a35f7dbb8)
",git fetch https://review.opendev.org/openstack/nova refs/changes/77/825177/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'releasenotes/notes/announce-self-post-live-migration-936721b1ab887514.yaml', 'nova/conf/workarounds.py', 'nova/virt/libvirt/guest.py']",4,391c1817b310c48612dca9c7de1593067d128d21,bug/1815989,"try: import libvirtmod_qemu except ImportError: libvirtmod_qemu = None def announce_self(self): libvirtmod_qemu.virDomainQemuMonitorCommand( self._domain._o, 'announce_self', 1) ",,50,0
openstack%2Fnova~857877,openstack/nova,stable/train,I3cb39a9ec2c260f422b3c48122b9db512cdd799b,"Revert ""Revert resize: wait for events according to hybrid plug""",ABANDONED,2022-09-15 13:14:44.000000000,2023-09-01 16:49:19.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-09-15 13:14:44.000000000', 'files': ['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/network/test_network_info.py', 'nova/tests/unit/objects/test_migration.py', 'nova/virt/libvirt/driver.py', 'nova/network/model.py', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py', 'nova/objects/migration.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1131a965d5ccd915fbd3da4217b5cb36a4e22499', 'message': 'Revert ""Revert resize: wait for events according to hybrid plug""\n\nThis reverts commit 7a7a223602ca5aa0aca8f65a6ab143f1d8f8ec1b.\n\nThat commit was added because - tl\'dr - upon revert resize, Neutron\nwith the OVS backend and the iptables security group driver would send\nus the network-vif-plugged event as soon as we updated the port\nbinding.\n\nThat behaviour has changed with commit 66c7f00e1d9. With that commit,\nwe started unplugging the vifs on the source compute host when doing a\nresize. When reverting the resize, the vifs had to be re-plugged again,\nregarldess of the networking backend in use. This renders commit\n7a7a223602ca5aa0aca8f65a6ab143f1d8f8ec1b. pointless, and it can be\nreverted.\n\nBackport is clean from master, and the TODO that was present in the\ncommit message on master is removed, as its a driver interface change\nand can only be done on master.\n\nCloses-bug: 1952003\nChange-Id: I3cb39a9ec2c260f422b3c48122b9db512cdd799b\n(cherry picked from commit 0b0f40d1b308b29da537859b72080488560c23d4)\n(cherry picked from commit c3ebe0f39e82cf1df6886cfd03fd8de62548fb26)\n(cherry picked from commit 36378de1bdfe451d683ed1028ffd5f6c7130c6ee)\n    Conflicts:\n        zuul.yaml\n(cherry picked from commit 00b43470956339f8ba00a4ddd99ab88a855e84ba)\n    Conflicts:\n        nova/objects/migration.py\n        nova/tests/unit/network/test_network_info.py\n        nova/tests/unit/virt/libvirt/test_driver.py\n        nova/virt/libvirt/driver.py\n(cherry picked from commit e765e1f96a0837daedcb11439d17fd19696d4ee8)\n    Conflicts:\n        nova/compute/manager.py\n        nova/tests/unit/compute/test_compute_mgr.py\n        nova/tests/unit/virt/libvirt/test_driver.py\n        nova/virt/libvirt/driver.py\n'}]",3,857877,1131a965d5ccd915fbd3da4217b5cb36a4e22499,9,1,1,15554,,,0,"Revert ""Revert resize: wait for events according to hybrid plug""

This reverts commit 7a7a223602ca5aa0aca8f65a6ab143f1d8f8ec1b.

That commit was added because - tl'dr - upon revert resize, Neutron
with the OVS backend and the iptables security group driver would send
us the network-vif-plugged event as soon as we updated the port
binding.

That behaviour has changed with commit 66c7f00e1d9. With that commit,
we started unplugging the vifs on the source compute host when doing a
resize. When reverting the resize, the vifs had to be re-plugged again,
regarldess of the networking backend in use. This renders commit
7a7a223602ca5aa0aca8f65a6ab143f1d8f8ec1b. pointless, and it can be
reverted.

Backport is clean from master, and the TODO that was present in the
commit message on master is removed, as its a driver interface change
and can only be done on master.

Closes-bug: 1952003
Change-Id: I3cb39a9ec2c260f422b3c48122b9db512cdd799b
(cherry picked from commit 0b0f40d1b308b29da537859b72080488560c23d4)
(cherry picked from commit c3ebe0f39e82cf1df6886cfd03fd8de62548fb26)
(cherry picked from commit 36378de1bdfe451d683ed1028ffd5f6c7130c6ee)
    Conflicts:
        zuul.yaml
(cherry picked from commit 00b43470956339f8ba00a4ddd99ab88a855e84ba)
    Conflicts:
        nova/objects/migration.py
        nova/tests/unit/network/test_network_info.py
        nova/tests/unit/virt/libvirt/test_driver.py
        nova/virt/libvirt/driver.py
(cherry picked from commit e765e1f96a0837daedcb11439d17fd19696d4ee8)
    Conflicts:
        nova/compute/manager.py
        nova/tests/unit/compute/test_compute_mgr.py
        nova/tests/unit/virt/libvirt/test_driver.py
        nova/virt/libvirt/driver.py
",git fetch https://review.opendev.org/openstack/nova refs/changes/77/857877/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/compute/test_compute_mgr.py', 'nova/tests/unit/network/test_network_info.py', 'nova/tests/unit/objects/test_migration.py', 'nova/virt/libvirt/driver.py', 'nova/network/model.py', 'nova/tests/unit/compute/test_compute.py', 'nova/compute/manager.py', 'nova/objects/migration.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",9,1131a965d5ccd915fbd3da4217b5cb36a4e22499,bug/1952003," power_on=True): power_on=power_on) if utils.is_neutron() and CONF.vif_plugging_timeout and power_on: def _test_finish_revert_migration(self, power_on): .finish_revert_m'aigration. vifs_already_plugged=None): context.get_admin_context(), ins_ref, network_model.NetworkInfo(), objects.Migration(), None, power_on) self._test_finish_revert_migration(True) self._test_finish_revert_migration(False)"," power_on=True, events=None): events_passed_to_prepare = [] events_passed_to_prepare.append((name, tag)) power_on=power_on, external_events=events) if events and utils.is_neutron() and CONF.vif_plugging_timeout: self.assertEqual(events_passed_to_prepare, events) elif utils.is_neutron() and CONF.vif_plugging_timeout and power_on: @mock.patch('nova.utils.is_neutron', new=mock.Mock(return_value=True)) def test_create_with_network_events_passed_in(self): self._test_create_with_network_events( events=[('network-vif-plugged', uuids.fake_vif)]) @mock.patch('nova.utils.is_neutron', new=mock.Mock(return_value=False)) def test_create_with_network_events_passed_in_nova_net(self): self._test_create_with_network_events( events=[('network-vif-plugged', uuids.fake_vif)]) @mock.patch('nova.utils.is_neutron', new=mock.Mock(return_value=True)) def test_create_with_network_events_passed_in_0_timeout(self): self.flags(vif_plugging_timeout=0) self._test_create_with_network_events( events=[('network-vif-plugged', uuids.fake_vif)]) def _test_finish_revert_migration(self, power_on, migration): .finish_revert_migration. vifs_already_plugged=None, external_events=None): self.assertEqual(self.events_passed_to_fake_create, external_events) network_info = network_model.NetworkInfo( [network_model.VIF(id=uuids.normal_vif), network_model.VIF(id=uuids.hybrid_vif, details={'ovs_hybrid_plug': True})]) if migration.is_same_host(): # Same host is all plug-time self.events_passed_to_fake_create = [ ('network-vif-plugged', uuids.normal_vif), ('network-vif-plugged', uuids.hybrid_vif)] else: # For different host migration only non-hybrid plug # (""normal"") VIFs ""emit"" plug-time events. self.events_passed_to_fake_create = [ ('network-vif-plugged', uuids.normal_vif)] context.get_admin_context(), ins_ref, network_info, migration, None, power_on) migration = objects.Migration(id=42, source_compute='fake-host1', dest_compute='fake-host2') self._test_finish_revert_migration(power_on=True, migration=migration) migration = objects.Migration(id=42, source_compute='fake-host1', dest_compute='fake-host2') self._test_finish_revert_migration(power_on=False, migration=migration) def test_finish_revert_migration_same_host(self): migration = objects.Migration(id=42, source_compute='fake-host', dest_compute='fake-host') self._test_finish_revert_migration(power_on=True, migration=migration) def test_finish_revert_migration_diff_host(self): migration = objects.Migration(id=42, source_compute='fake-host1', dest_compute='fake-host2') self._test_finish_revert_migration(power_on=True, migration=migration)",35,296
openstack%2Fnova~860739,openstack/nova,stable/train,I77fdfa9cffbd44b2889f49f266b2582bcc6a4267,"Handle ""no RAM info was set"" migration case",ABANDONED,2022-10-07 18:49:15.000000000,2023-09-01 16:49:09.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-10-07 18:49:15.000000000', 'files': ['nova/tests/unit/virt/libvirt/test_guest.py', 'nova/virt/libvirt/guest.py', 'releasenotes/notes/bug-1982284-libvirt-handle-no-ram-info-was-set-99784934ed80fd72.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/a9df3e769507983ac5acca81230dfbdd65d6d116', 'message': 'Handle ""no RAM info was set"" migration case\n\nThis handles the case where the live migration monitoring thread may\nrace and call jobStats() after the migration has completed resulting in\nthe following error:\n\n    libvirt.libvirtError: internal error: migration was active, but no\n    RAM info was set\n\nCloses-Bug: #1982284\nChange-Id: I77fdfa9cffbd44b2889f49f266b2582bcc6a4267\n(cherry picked from commit 9fea934c71d3c2fa7fdd80c67d94e18466c5cf9a)\n(cherry picked from commit 00396fa9396324780c09161ed57a86b7e458c26f)\n(cherry picked from commit 4316234e63b76e4f9877ec6e924b5c54ea761bbb)\n(cherry picked from commit 98d9936e54b900db1bd2d5477a9a1d7e5a7be104)\n(cherry picked from commit 6d68aee626875a165667e04c4ccc54ff3073e4ff)\n(cherry picked from commit 13c2e5b2d7a2d3ac7384dc17cbe74b9faca2762c)\n(cherry picked from commit 6ef7778c7628b9bd7f79e90b4a7f8c6b27457e54)\n'}]",0,860739,a9df3e769507983ac5acca81230dfbdd65d6d116,4,1,1,4690,,,0,"Handle ""no RAM info was set"" migration case

This handles the case where the live migration monitoring thread may
race and call jobStats() after the migration has completed resulting in
the following error:

    libvirt.libvirtError: internal error: migration was active, but no
    RAM info was set

Closes-Bug: #1982284
Change-Id: I77fdfa9cffbd44b2889f49f266b2582bcc6a4267
(cherry picked from commit 9fea934c71d3c2fa7fdd80c67d94e18466c5cf9a)
(cherry picked from commit 00396fa9396324780c09161ed57a86b7e458c26f)
(cherry picked from commit 4316234e63b76e4f9877ec6e924b5c54ea761bbb)
(cherry picked from commit 98d9936e54b900db1bd2d5477a9a1d7e5a7be104)
(cherry picked from commit 6d68aee626875a165667e04c4ccc54ff3073e4ff)
(cherry picked from commit 13c2e5b2d7a2d3ac7384dc17cbe74b9faca2762c)
(cherry picked from commit 6ef7778c7628b9bd7f79e90b4a7f8c6b27457e54)
",git fetch https://review.opendev.org/openstack/nova refs/changes/39/860739/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/libvirt/test_guest.py', 'nova/virt/libvirt/guest.py', 'releasenotes/notes/bug-1982284-libvirt-handle-no-ram-info-was-set-99784934ed80fd72.yaml']",3,a9df3e769507983ac5acca81230dfbdd65d6d116,bug/1982284,"--- other: - | A workaround has been added to the libvirt driver to catch and pass migrations that were previously failing with the error: ``libvirt.libvirtError: internal error: migration was active, but no RAM info was set`` See `bug 1982284`_ for more details. .. _bug 1982284: https://bugs.launchpad.net/nova/+bug/1982284 ",,40,0
openstack%2Fnova~885355,openstack/nova,stable/train,I2ba035c09ace20e9835d9d12a5c5bee17d616718,Fix failed count for anti-affinity check,ABANDONED,2023-06-06 10:19:14.000000000,2023-09-01 16:48:33.000000000,,"[{'_account_id': 22348}, {'_account_id': 34951}]","[{'number': 1, 'created': '2023-06-06 10:19:14.000000000', 'files': ['nova/tests/functional/test_server_group.py', 'nova/tests/unit/compute/test_compute_mgr.py', 'nova/exception.py', 'nova/compute/manager.py', 'nova/compute/build_results.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3bc08ed29646ddfa71443978a1ae670e33a5c718', 'message': 'Fix failed count for anti-affinity check\n\nThe late anti-affinity check runs in the compute manager to avoid\nparallel scheduling requests to invalidate the anti-affinity server\ngroup policy. When the check fails the instance is re-scheduled.\nHowever this failure counted as a real instance boot failure of the\ncompute host and can lead to de-prioritization of the compute host\nin the scheduler via BuildFailureWeigher. As the late anti-affinity\ncheck does not indicate any fault of the compute host itself it\nshould not be counted towards the build failure counter.\nThis patch adds new build results to handle this case.\n\nConflicts:\n  nova/tests/unit/compute/test_compute_mgr.py dropped accel_uuid for\n  function signatures\n\nCloses-Bug: #1996732\nChange-Id: I2ba035c09ace20e9835d9d12a5c5bee17d616718\nSigned-off-by: Yusuke Okada <okada.yusuke@fujitsu.com>\n(cherry picked from commit 56d320a203a13f262a2e94e491af222032e453d3)\n(cherry picked from commit 1b56714e9119ab4152e6f33985a499b2d83a491b)\n(cherry picked from commit 2f1d65774fbcf5c25c4ba53583b6a802a03f4c4d)\n(cherry picked from commit cd0403dd3b1099bd13da503500a50249db8e49ea)\n(cherry picked from commit 87488180e5633db5ef8d684684a4355de48ef428)\n(cherry picked from commit e48fb15aaa462813fe9334a83bc76b43eb465fbd)\n(cherry picked from commit 3853ccc5fdf2abaabe9a5810af3343f5c86790e6)\n(cherry picked from commit 97ec3b54302b8d8d45ee0248187f9e79f7f2f80b)\n'}]",3,885355,3bc08ed29646ddfa71443978a1ae670e33a5c718,9,2,1,9708,,,0,"Fix failed count for anti-affinity check

The late anti-affinity check runs in the compute manager to avoid
parallel scheduling requests to invalidate the anti-affinity server
group policy. When the check fails the instance is re-scheduled.
However this failure counted as a real instance boot failure of the
compute host and can lead to de-prioritization of the compute host
in the scheduler via BuildFailureWeigher. As the late anti-affinity
check does not indicate any fault of the compute host itself it
should not be counted towards the build failure counter.
This patch adds new build results to handle this case.

Conflicts:
  nova/tests/unit/compute/test_compute_mgr.py dropped accel_uuid for
  function signatures

Closes-Bug: #1996732
Change-Id: I2ba035c09ace20e9835d9d12a5c5bee17d616718
Signed-off-by: Yusuke Okada <okada.yusuke@fujitsu.com>
(cherry picked from commit 56d320a203a13f262a2e94e491af222032e453d3)
(cherry picked from commit 1b56714e9119ab4152e6f33985a499b2d83a491b)
(cherry picked from commit 2f1d65774fbcf5c25c4ba53583b6a802a03f4c4d)
(cherry picked from commit cd0403dd3b1099bd13da503500a50249db8e49ea)
(cherry picked from commit 87488180e5633db5ef8d684684a4355de48ef428)
(cherry picked from commit e48fb15aaa462813fe9334a83bc76b43eb465fbd)
(cherry picked from commit 3853ccc5fdf2abaabe9a5810af3343f5c86790e6)
(cherry picked from commit 97ec3b54302b8d8d45ee0248187f9e79f7f2f80b)
",git fetch https://review.opendev.org/openstack/nova refs/changes/55/885355/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_server_group.py', 'nova/tests/unit/compute/test_compute_mgr.py', 'nova/exception.py', 'nova/compute/manager.py', 'nova/compute/build_results.py']",5,3bc08ed29646ddfa71443978a1ae670e33a5c718,bug/1996732,"# Instance failed by policy violation (such as affinity or anti-affinity) # and was not rescheduled. In this case, the node's failed count won't be # increased. FAILED_BY_POLICY = 'failed_by_policy' # Instance failed by policy violation (such as affinity or anti-affinity) # but was rescheduled. In this case, the node's failed count won't be # increased. RESCHEDULED_BY_POLICY = 'rescheduled_by_policy'",,252,13
openstack%2Fmagnum~875312,openstack/magnum,master,I0eb12bf77e0e786652e674c787b2821415bd4506,Add policies unit tests (Part one),MERGED,2023-02-26 09:32:18.000000000,2023-09-01 16:46:06.000000000,2023-09-01 16:45:03.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-02-26 09:32:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/e7cac865d191cd373ccf2ca783bc0c6c3d57e220', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 2, 'created': '2023-02-26 11:28:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/1b66f9fabccc9e96afbbe171809d25d8a7961e10', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 3, 'created': '2023-02-26 12:23:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/3352400b0572c18d429597fa4c23615b44ae0e48', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 4, 'created': '2023-02-26 13:27:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/84b2b9dba48a8b0fdeb7cdc5ff4b0d02f30dd36e', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 5, 'created': '2023-02-26 17:33:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/454c7d83388af0b140ffc45bc59312eb83c8d3a8', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 6, 'created': '2023-02-26 17:39:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/36e284bf9c5d0df61905599a264d96a86b7fd8f2', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 7, 'created': '2023-02-26 17:44:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/8416ace9e7b958365a1c5a970e325f4a7ce4977f', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 8, 'created': '2023-02-28 09:31:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/610c63e43acfea8e3fd811f383168b7274c65a19', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 9, 'created': '2023-02-28 13:44:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/5858616de36b6960facceb60f497c02ba0f30f91', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 10, 'created': '2023-03-01 10:27:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/7153d5f126658c8e71a8d4a414a536953b19adca', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 11, 'created': '2023-03-07 13:30:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/31db71ea56beee03175e3c8906905fc06743a1d3', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 12, 'created': '2023-03-07 17:48:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/028f87952855a672c1d118ce441c2369bf26c494', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 13, 'created': '2023-03-07 17:51:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/c86e8a619e934a910552829abec589f61422fc85', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 14, 'created': '2023-03-08 06:55:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/0cf475fc1ed792b7e90a6172b2332a85411827f1', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 15, 'created': '2023-03-08 08:06:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/5ba41c35a7a1c9fa5e0a2916a92ca0840aba3b13', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 16, 'created': '2023-03-08 13:40:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/a3596977830b3b62cfdb396cd5cc6c75a8e7067d', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 17, 'created': '2023-03-08 14:36:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/7ce577d00615c6ead834bb35104f6dabe17e16db', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 18, 'created': '2023-03-09 07:26:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/6c44724d3946a5535c4714055937db1313fb6cfb', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 19, 'created': '2023-03-09 09:01:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/28dba09fcd49a23f43a3b271aa51aa22a241c25e', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 20, 'created': '2023-03-13 05:51:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/139ec539d7c74f1d7c1e4943c4d232d752e498ee', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 21, 'created': '2023-03-14 07:47:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/c94028f2a74fd436e36018a5bb85aa4f770811f1', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 22, 'created': '2023-05-11 13:28:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/5baa9726ddbd4a9310f81a6300a64e3242a43518', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 23, 'created': '2023-05-31 18:16:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/c2ad2c9a64f870d6875746ad484b7d4e94199e15', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 24, 'created': '2023-06-29 09:46:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/351cb956346c8cc2b37026b2ad9682049cc2be75', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 25, 'created': '2023-07-18 06:19:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/7cfa26a4c81511f0b9d228ce66f0ba74e01f31e9', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 26, 'created': '2023-07-21 02:59:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/b8eb62e2070de4fb877046334125f16dd471f36a', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 27, 'created': '2023-07-25 09:01:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/e7aa065c4abefcf4625241b9cb7c7430567ca573', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 28, 'created': '2023-08-10 08:48:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/47d277f1da6ce3a9da85748da0b705f14194b6a8', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 29, 'created': '2023-08-29 08:32:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/b64cb09dd3cc75a0cae0a97476f3735e23bdc624', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}, {'number': 30, 'created': '2023-08-29 16:35:57.000000000', 'files': ['magnum/tests/unit/common/policies/test_stats_policy.py', 'magnum/tests/unit/common/policies/base.py', 'magnum/tests/unit/common/policies/test_federation_policy.py', 'magnum/tests/unit/common/policies/__init__.py', 'magnum/tests/unit/common/policies/test_quota_policy.py'], 'web_link': 'https://opendev.org/openstack/magnum/commit/916784bf1fbeab37420b945f01a189b522e101f4', 'message': 'Add policies unit tests (Part one)\n\nAdd plicies unit test base function\nand tests for federation, quotas and stats.\n\nChange-Id: I0eb12bf77e0e786652e674c787b2821415bd4506\n'}]",4,875312,916784bf1fbeab37420b945f01a189b522e101f4,63,3,30,12404,,,0,"Add policies unit tests (Part one)

Add plicies unit test base function
and tests for federation, quotas and stats.

Change-Id: I0eb12bf77e0e786652e674c787b2821415bd4506
",git fetch https://review.opendev.org/openstack/magnum refs/changes/12/875312/1 && git format-patch -1 --stdout FETCH_HEAD,"['magnum/tests/unit/common/policies/test_stats_policy.py', 'magnum/tests/unit/common/policies/base.py', 'magnum/tests/unit/common/policies/test_federation_policy.py', 'magnum/tests/unit/common/policies/__init__.py']",4,e7cac865d191cd373ccf2ca783bc0c6c3d57e220,secure-rbac,,,141,0
openstack%2Fmagnum~875625,openstack/magnum,master,I9a3003963bf13a591cc363fa04ec8e5719ae9114,Allow Admin to perform all API requests,MERGED,2023-02-28 09:31:03.000000000,2023-09-01 16:42:35.000000000,2023-09-01 16:39:55.000000000,"[{'_account_id': 1004}, {'_account_id': 8064}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-02-28 09:31:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/fe43270fe3d1612b0934e96fe62e2e123b65143c', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 2, 'created': '2023-02-28 13:44:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/e2c177f435db247f2c7724dac0bc84e844e3c20d', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 3, 'created': '2023-03-07 13:30:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/aa0fcf7a6e3b86bbe7424c8ead7e34bcda527af4', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 4, 'created': '2023-03-07 17:48:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/b57a1527f222145ccf1197effe5fbf171c1554b8', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 5, 'created': '2023-03-07 17:51:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/a02096b8850b84a20fd0489d208df5a604233195', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 6, 'created': '2023-03-08 06:55:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/b7cb7a53e619a3333c60ebf95012df91e907fa08', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 7, 'created': '2023-03-08 08:06:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/ce7fbfea2ead9d524f67e730886a9d03a11c5804', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 8, 'created': '2023-03-08 13:40:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/d976a2346dd4ce82ff4952ffccde46ca818d7765', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 9, 'created': '2023-03-08 14:36:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/668677442f877faddcbff7f23ef8e2617a85dea4', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 10, 'created': '2023-03-09 07:26:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/a73c4b8c9f1e306c4db98caf5d02acc4a56df2f4', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 11, 'created': '2023-03-09 09:01:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/8ae865b123e3bc2cf40947e511817696ed9b1b8e', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 12, 'created': '2023-03-13 05:51:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/d2ffe72e9f151dde25d9919b80d5228affe6c6c7', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 13, 'created': '2023-03-14 07:47:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/cb94bf72505f19c09a5bc855543cfe2f09d6ef06', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 14, 'created': '2023-05-11 13:28:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/59462b91f80d2c15ce80b45191d73b406acb4312', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 15, 'created': '2023-05-31 18:16:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/25dfd55bb9202ef54267f5d2e5b7420e15eb1e9e', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 16, 'created': '2023-06-29 09:46:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/408b8206e4c4930253b0131d5e3c29ddd2d1670f', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 17, 'created': '2023-07-18 06:19:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/9e69bc72c83cf04cc27c4456bd805fdd447c364a', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 18, 'created': '2023-07-21 02:59:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/99e9d3a221964f21995b5ce0b2c4e4c87460a6c4', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 19, 'created': '2023-07-25 09:01:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/c2bfa4cf3c88ec8caf2be0dd9abe8977dc2f7a33', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 20, 'created': '2023-08-10 08:48:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/0334ea4f9ed4fe506bb6f8d98f493d5187d9449c', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 21, 'created': '2023-08-29 08:31:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/d0060786812f4a265cc12aa10f54c736980ea1e1', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 22, 'created': '2023-08-29 08:32:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/87008aeb45dd86d262f978896d2a4a32cd638637', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}, {'number': 23, 'created': '2023-08-29 16:35:57.000000000', 'files': ['magnum/common/policies/federation.py', 'releasenotes/notes/allow_admin_perform_acitons-cc988655bb72b3f3.yaml', 'magnum/common/policies/cluster_template.py', 'magnum/common/policies/cluster.py', 'magnum/common/policies/base.py'], 'web_link': 'https://opendev.org/openstack/magnum/commit/74897768e30995d8b5806e8688b8d3907733ccca', 'message': 'Allow Admin to perform all API requests\n\nThis propose changes is base on same concerns as this bug in neutron\nhttps://bugs.launchpad.net/neutron/+bug/1997089\n\nThis propose to keep and make sure ADMIN can perform all API requests.\n\nChange-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114\n'}]",5,875625,74897768e30995d8b5806e8688b8d3907733ccca,57,5,23,12404,,,0,"Allow Admin to perform all API requests

This propose changes is base on same concerns as this bug in neutron
https://bugs.launchpad.net/neutron/+bug/1997089

This propose to keep and make sure ADMIN can perform all API requests.

Change-Id: I9a3003963bf13a591cc363fa04ec8e5719ae9114
",git fetch https://review.opendev.org/openstack/magnum refs/changes/25/875625/1 && git format-patch -1 --stdout FETCH_HEAD,"['magnum/common/policies/federation.py', 'magnum/common/policies/bay.py', 'magnum/common/policies/cluster_template.py', 'magnum/common/policies/cluster.py', 'magnum/common/policies/baymodel.py']",5,fe43270fe3d1612b0934e96fe62e2e123b65143c,secure-rbac," check_str=base.ADMIN_OR_PROJECT_MEMBER_DENY_CLUSTER_USER, check_str=base.ADMIN_OR_PROJECT_MEMBER_DENY_CLUSTER_USER, check_str=base.ADMIN_OR_PROJECT_READER_DENY_CLUSTER_USER, check_str=base.ADMIN_OR_PROJECT_READER_DENY_CLUSTER_USER, check_str=base.ADMIN_OR_PROJECT_READER_DENY_CLUSTER_USER, check_str=base.ADMIN_OR_PROJECT_MEMBER_DENY_CLUSTER_USER,"," check_str=base.PROJECT_MEMBER_DENY_CLUSTER_USER, check_str=base.PROJECT_MEMBER_DENY_CLUSTER_USER, check_str=base.PROJECT_READER_DENY_CLUSTER_USER, check_str=base.PROJECT_READER_DENY_CLUSTER_USER, check_str=base.PROJECT_READER_DENY_CLUSTER_USER, check_str=base.PROJECT_MEMBER_DENY_CLUSTER_USER,",30,30
openstack%2Fmagnum~874945,openstack/magnum,master,I249942a355577c4f1ef51b3988f0cc4979959d0b,Support enables rbac policies new defaults,MERGED,2023-02-23 17:38:54.000000000,2023-09-01 16:41:32.000000000,2023-09-01 16:39:53.000000000,"[{'_account_id': 1004}, {'_account_id': 5046}, {'_account_id': 8064}, {'_account_id': 8556}, {'_account_id': 12404}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-02-23 17:38:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/de0a1fa15dd60624b578a00ca728f9320742fec1', 'message': '[WIP]The Magnum service enables policies new defaults\n\nTODO: Add unit tests\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 2, 'created': '2023-02-26 09:32:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/10efa2c4261833259f188d548e4781a65718a83b', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 3, 'created': '2023-02-26 11:28:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/63b9eb4478a45da87ce7db2a1206efc54339c9ac', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 4, 'created': '2023-02-26 12:23:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/04e73b6cb2bf50aa90cbbcf881e45b698b4f2b41', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 5, 'created': '2023-02-26 13:27:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/b868d9553814aa91d73cae33093e2afa6b4e9fe0', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 6, 'created': '2023-02-26 17:39:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/988520475b95443555158794c7287c7b8bd3b106', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nDepends-On: https://review.opendev.org/c/openstack/magnum-tempest-plugin/+/875322\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 7, 'created': '2023-02-26 17:44:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/9c85a4c59c555050cd5910ead49d2b3c3f7c5498', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nDepends-On: https://review.opendev.org/c/openstack/magnum-tempest-plugin/+/875322\nDepends-On: https://review.opendev.org/c/openstack/magnum/+/874823\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 8, 'created': '2023-02-28 09:31:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/d3a34e2c7ea825a45b99b52559964b6c69f830a7', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nDepends-On: https://review.opendev.org/c/openstack/magnum/+/874823\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 9, 'created': '2023-02-28 13:44:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/bfda105d267087e319a19a37e07ebd6a813140dc', 'message': 'The Magnum service enables policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nDepends-On: https://review.opendev.org/c/openstack/magnum/+/874823\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 10, 'created': '2023-03-07 13:30:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/012aa7558683c6cc95ca123504db5306a7dbe98d', 'message': 'Enables rbac policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nDepends-On: https://review.opendev.org/c/openstack/magnum/+/874823\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 11, 'created': '2023-03-07 17:48:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/647010288f0bc22818d74d5c22a788d4cc05dc9a', 'message': 'Enables rbac policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 12, 'created': '2023-03-07 17:51:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/68475d4221bc6c7b3cbbda7580b74f415c69f85c', 'message': 'Enables rbac policies new defaults\n\nThe Magnum service enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` have been changed\nto ``True``.\n\nIf you want to disable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=False\n  enforce_scope=False\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 13, 'created': '2023-03-08 06:55:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/ac10e9fdacb61198f247998d1b2d87c9a1d09071', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 14, 'created': '2023-03-08 08:06:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/19cf531dc8da7e7ce66c397bdfc781a03e5d88ea', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 15, 'created': '2023-03-08 13:40:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/e9049c082bcad8dcb2a488d33cf915c19a524fe1', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 16, 'created': '2023-03-08 14:36:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/0e296843c5998cab17ea15f5d8e28cb882c9bcee', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 17, 'created': '2023-03-09 07:26:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/c222235f3c54e44c5d666a243f84f9605f731dec', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 18, 'created': '2023-03-09 09:01:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/05a32415124deda2fc2392f845ea3df0c968b936', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 19, 'created': '2023-03-13 05:51:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/cada13b7a9e2db37253ae7c6639aca5824c3b826', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 20, 'created': '2023-03-14 07:47:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/28172e91965956b114c62d6642f4ae0436b30e81', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 21, 'created': '2023-05-11 13:28:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/4bae8265d8d62142de6b52e8a156f6ab3700e9c8', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 22, 'created': '2023-05-31 18:16:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/23efb30d398c2433f07152ff70855a71a70cf8c8', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 23, 'created': '2023-06-29 09:46:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/04198f23909245929d92698076461d728ffeb11d', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults.\nThe default value of config option\n``[oslo_policy] oslo_policy.enforce_new_defaults`` is ``False``,\nbut will change to ``True`` in following cycles.\n\nTo enable it, you can modify the below config option value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 24, 'created': '2023-07-18 06:19:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/229c47b4e77b3007237c980b130b9809ccb2a8b3', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 25, 'created': '2023-07-21 02:59:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/5e80d53dbede8234eb5f1a496ab4a5f0c3bac876', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 26, 'created': '2023-07-25 09:01:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/ef1e85e82affbd6cc92302c7cf45e323bcdcbc74', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 27, 'created': '2023-08-10 08:48:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/83257f729f176fc29c1b674fcd2b4151f32d68a6', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 28, 'created': '2023-08-29 08:31:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/73062510dd762ceb1a2c01b89c5b2b7d52c031f9', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 29, 'created': '2023-08-29 08:32:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/429e90900038bd3ef71256347a17c212ee2dd2fa', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}, {'number': 30, 'created': '2023-08-29 16:35:57.000000000', 'files': ['magnum/tests/unit/api/controllers/v1/test_certificate.py', 'magnum/tests/unit/api/test_hooks.py', 'devstack/lib/magnum', 'magnum/common/policies/cluster.py', 'magnum/tests/unit/api/controllers/v1/test_stats.py', 'devstack/settings', 'magnum/tests/fakes.py', 'requirements.txt', 'magnum/common/context.py', 'magnum/tests/unit/api/base.py', 'magnum/tests/unit/api/controllers/v1/test_cluster_actions.py', 'magnum/tests/unit/api/controllers/test_root.py', 'magnum/api/hooks.py', 'magnum/common/policies/stats.py', 'releasenotes/notes/enable-enforce-scope-and-new-defaults-7e6e503f74283071.yaml', 'magnum/common/policies/certificate.py', 'magnum/common/policies/nodegroup.py', 'magnum/common/policies/federation.py', 'magnum/tests/unit/api/controllers/v1/test_quota.py', 'magnum/tests/unit/common/test_context.py', 'magnum/common/policies/cluster_template.py', 'magnum/common/policies/base.py', 'magnum/tests/unit/api/controllers/v1/test_cluster.py', 'magnum/tests/unit/api/controllers/v1/test_nodegroup.py', 'magnum/common/policies/quota.py', 'magnum/common/policy.py'], 'web_link': 'https://opendev.org/openstack/magnum/commit/5971243169c5df863ebe81cff7ebd07f190b840a', 'message': 'Support enables rbac policies new defaults\n\nThe Magnum service allow enables policies (RBAC) new defaults and scope by\ndefault. The Default value of config options ``[oslo_policy] enforce_scope``\nand ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to\n``False``, but will change to ``True`` in following cycles.\n\nTo enable them then modify the below config options value in\n``magnum.conf`` file::\n\n  [oslo_policy]\n  enforce_new_defaults=True\n  enforce_scope=True\n\nreference tc goal for more detail:\nhttps://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html\n\nRelated blueprint secure-rbac\n\nChange-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b\n'}]",95,874945,5971243169c5df863ebe81cff7ebd07f190b840a,99,7,30,12404,,,0,"Support enables rbac policies new defaults

The Magnum service allow enables policies (RBAC) new defaults and scope by
default. The Default value of config options ``[oslo_policy] enforce_scope``
and ``[oslo_policy] oslo_policy.enforce_new_defaults`` are both to
``False``, but will change to ``True`` in following cycles.

To enable them then modify the below config options value in
``magnum.conf`` file::

  [oslo_policy]
  enforce_new_defaults=True
  enforce_scope=True

reference tc goal for more detail:
https://governance.openstack.org/tc/goals/selected/consistent-and-secure-rbac.html

Related blueprint secure-rbac

Change-Id: I249942a355577c4f1ef51b3988f0cc4979959d0b
",git fetch https://review.opendev.org/openstack/magnum refs/changes/45/874945/1 && git format-patch -1 --stdout FETCH_HEAD,"['magnum/common/policies/stats.py', 'releasenotes/notes/enable-enforce-scope-and-new-defaults-7e6e503f74283071.yaml', 'magnum/common/policies/certificate.py', 'magnum/common/policies/cluster.py', 'magnum/common/policies/baymodel.py', 'magnum/common/policies/nodegroup.py', 'magnum/common/policies/federation.py', 'magnum/common/policies/bay.py', 'requirements.txt', 'magnum/common/policies/cluster_template.py', 'magnum/common/policies/base.py', 'magnum/common/policies/quota.py', 'magnum/common/policy.py']",13,de0a1fa15dd60624b578a00ca728f9320742fec1,secure-rbac,"# TODO(ricolin): Remove overriding the default value of config options # 'policy_file', 'enforce_scope', and 'enforce_new_defaults' once # oslo_policy change their default value to what is overridden here.opts.set_defaults( CONF, DEFAULT_POLICY_FILE, enforce_scope=True, enforce_new_defaults=True )","# TODO(gmann): Remove setting the default value of config policy_file # once oslo_policy change the default value to 'policy.yaml'. # https://github.com/openstack/oslo.policy/blob/a626ad12fe5a3abd49d70e3e5b95589d279ab578/oslo_policy/opts.py#L49opts.set_defaults(CONF, DEFAULT_POLICY_FILE)",439,94
openstack%2Fbarbican-tempest-plugin~890784,openstack/barbican-tempest-plugin,master,Ia4a30d12de1a58b93a06979188e662edeef21ec6,Pin barbican-tempest-plugin for jobs in EM,MERGED,2023-08-08 11:46:07.000000000,2023-09-01 16:36:07.000000000,2023-09-01 16:36:07.000000000,"[{'_account_id': 7414}, {'_account_id': 7973}, {'_account_id': 10459}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 22873}, {'_account_id': 32761}]","[{'number': 1, 'created': '2023-08-08 11:46:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/43d437bfebb03aed49750aef44cf9e8d9fe94963', 'message': '[DNM] Pin barbican-tempes-plugin version for victoria\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n'}, {'number': 2, 'created': '2023-08-08 11:47:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/e9f2ce72845e4dd7e4f4a79a635eeee02a7e100a', 'message': '[DNM] Pin barbican-tempes-plugin version for victoria\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n'}, {'number': 3, 'created': '2023-08-11 12:47:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/535678e32f698dd2f106e161bcc06f895249c159', 'message': '[DNM] Pin barbican-tempes-plugin version for victoria\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n'}, {'number': 4, 'created': '2023-08-15 09:48:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/96070cf171304469b9cb84d69adea8066343250a', 'message': '[DNM] Pin barbican-tempes-plugin version for victoria\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n'}, {'number': 5, 'created': '2023-08-15 11:30:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/4ee38cdcf85162f596d20960871abb14898a935f', 'message': '[DNM] Pin barbican-tempes-plugin version for victoria\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n'}, {'number': 6, 'created': '2023-08-15 12:03:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/2dfc7f73047ffc88f644c83229b28b9071d49eaf', 'message': 'Pin barbican-tempest-plugin branches in extended maintenance\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n'}, {'number': 7, 'created': '2023-08-17 07:51:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/4bd4387bbaca9b71042421bafd51fb112bf1c3b9', 'message': ""Pin barbican-tempest-plugin branches in extended maintenance\n\nLet's pin barbican-tempest-plugin for jobs that run code from branches in extended maintenance.\n\nThis change is required because these jobs install older version of tempest that does not contain all functions consumed by master barbicna-tempest-plugin.\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n""}, {'number': 8, 'created': '2023-08-17 07:52:28.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/barbican-tempest-plugin/commit/638efcc3a01f0570cc384d7c9a1490cc910b2db4', 'message': ""Pin barbican-tempest-plugin for jobs in EM\n\nLet's pin barbican-tempest-plugin for jobs that run code from branches in extended maintenance.\n\nThis change is required because these jobs install older version of tempest that does not contain all functions consumed by master barbicna-tempest-plugin.\n\nChange-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6\n""}]",0,890784,638efcc3a01f0570cc384d7c9a1490cc910b2db4,26,7,8,30674,,,0,"Pin barbican-tempest-plugin for jobs in EM

Let's pin barbican-tempest-plugin for jobs that run code from branches in extended maintenance.

This change is required because these jobs install older version of tempest that does not contain all functions consumed by master barbicna-tempest-plugin.

Change-Id: Ia4a30d12de1a58b93a06979188e662edeef21ec6
",git fetch https://review.opendev.org/openstack/barbican-tempest-plugin refs/changes/84/890784/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,43d437bfebb03aed49750aef44cf9e8d9fe94963,pin-barbican-tempest-plugin, required-projects: &barbican-tempest-reqs - opendev.org/openstack/barbican - name: opendev.org/openstack/barbican-tempest-plugin override-checkout: victoria-last - opendev.org/openstack/python-barbicanclient required-projects: &barbican-tempest-reqs - opendev.org/openstack/barbican - name: opendev.org/openstack/barbican-tempest-plugin override-checkout: victoria-last - opendev.org/openstack/python-barbicanclient,,10,0
openstack%2Fansible-collections-openstack~880565,openstack/ansible-collections-openstack,master,If04d04b41b0b51b3fd0de4391422b09393ae4c81,Vpn service module,NEW,2023-04-15 19:59:33.000000000,2023-09-01 16:30:21.000000000,,"[{'_account_id': 22348}, {'_account_id': 32962}]","[{'number': 1, 'created': '2023-04-15 19:59:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/1fd7059d18e5512feace879629f9567aa761f0d6', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 2, 'created': '2023-04-17 09:56:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/6618c1920ae4ff914cc64ccabdf69dc16307c824', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 3, 'created': '2023-05-04 15:49:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/aaf277d2c1359c32a9cf482b02a68983e008f7cb', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 4, 'created': '2023-05-04 17:50:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/192e01239fdb449fe3546a608993f5939134ac71', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 5, 'created': '2023-09-01 16:12:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/60b06115377107aacaa87806bbf4dae569b4f343', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 6, 'created': '2023-09-01 16:12:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/3e13890895860f87097c14b6b9f5ff5cfd2feee5', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 7, 'created': '2023-09-01 16:13:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/77bcb870f1ef8e5a2f98d345100e611a8c1fb819', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 8, 'created': '2023-09-01 16:14:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/a821c28db890d62782f2c273ee8f4912641bfc54', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 9, 'created': '2023-09-01 16:17:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/c3ea56f6efcf374ab2afddbb87d5d32dab64bfea', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}, {'number': 10, 'created': '2023-09-01 16:19:04.000000000', 'files': ['meta/runtime.yml', 'plugins/modules/vpn_service.py', 'ci/roles/vpn_service/tasks/main.yml'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/b327e0b50ff50917cb096a66abd0eeec3b0f8f53', 'message': 'Vpn service module\n\nChange-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81\n'}]",6,880565,b327e0b50ff50917cb096a66abd0eeec3b0f8f53,15,2,10,32787,,,0,"Vpn service module

Change-Id: If04d04b41b0b51b3fd0de4391422b09393ae4c81
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/65/880565/1 && git format-patch -1 --stdout FETCH_HEAD,"['plugins/modules/vpn_service.py', 'ci/roles/vpn_service/tasks/main.yml', 'ci/roles/vpn_service/defaults/main.yml']",3,1fd7059d18e5512feace879629f9567aa761f0d6,vpn-service,,,409,0
openstack%2Fopenstack-helm-infra~893376,openstack/openstack-helm-infra,master,I2f00fa655bf5359dcc80c36d6c2ce33e3ce33166,[ceph-osd] Add disk zap to OSD init forced repair case,MERGED,2023-08-31 14:04:22.000000000,2023-09-01 16:05:30.000000000,2023-09-01 16:04:13.000000000,"[{'_account_id': 3009}, {'_account_id': 8898}, {'_account_id': 15232}, {'_account_id': 21040}, {'_account_id': 22348}, {'_account_id': 34520}, {'_account_id': 35948}]","[{'number': 1, 'created': '2023-08-31 14:04:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/1199c9a8bd564e7b43982a4bf728b9b0fb9abee0', 'message': '[ceph-osd] Add disk zap to OSD init forced repair case\n\nThere exists a case for bluestore OSDs where the OSD init process\ndetects that an OSD has already been initialized in the deployed\nCeph cluster, but the cluster osdmap does not have an entry for it.\nThis change corrects this case to zap and reinitialize the disk\nwhen OSD_FORCE_REPAIR is set to 1. It also clarifies a log message\nin this case when OSD_FORCE_REPAIR is 0 to state that a manual\nrepair is necessary.\n\nChange-Id: I2f00fa655bf5359dcc80c36d6c2ce33e3ce33166\n'}, {'number': 2, 'created': '2023-08-31 14:05:53.000000000', 'files': ['ceph-osd/templates/bin/osd/ceph-volume/_init-ceph-volume-helper-bluestore.sh.tpl', 'ceph-osd/Chart.yaml', 'releasenotes/notes/ceph-osd.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d29efccdbb7a8397515346de72e075de02288ff2', 'message': '[ceph-osd] Add disk zap to OSD init forced repair case\n\nThere exists a case for bluestore OSDs where the OSD init process\ndetects that an OSD has already been initialized in the deployed\nCeph cluster, but the cluster osdmap does not have an entry for it.\nThis change corrects this case to zap and reinitialize the disk\nwhen OSD_FORCE_REPAIR is set to 1. It also clarifies a log message\nin this case when OSD_FORCE_REPAIR is 0 to state that a manual\nrepair is necessary.\n\nChange-Id: I2f00fa655bf5359dcc80c36d6c2ce33e3ce33166\n'}]",0,893376,d29efccdbb7a8397515346de72e075de02288ff2,12,7,2,29974,,,0,"[ceph-osd] Add disk zap to OSD init forced repair case

There exists a case for bluestore OSDs where the OSD init process
detects that an OSD has already been initialized in the deployed
Ceph cluster, but the cluster osdmap does not have an entry for it.
This change corrects this case to zap and reinitialize the disk
when OSD_FORCE_REPAIR is set to 1. It also clarifies a log message
in this case when OSD_FORCE_REPAIR is 0 to state that a manual
repair is necessary.

Change-Id: I2f00fa655bf5359dcc80c36d6c2ce33e3ce33166
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/76/893376/1 && git format-patch -1 --stdout FETCH_HEAD,['ceph-osd/templates/bin/osd/ceph-volume/_init-ceph-volume-helper-bluestore.sh.tpl'],1,1199c9a8bd564e7b43982a4bf728b9b0fb9abee0,," ZAP_DEVICE=1 echo ""OSD initialized for this cluster, but OSD ID not found in the cluster, repair manually"""," echo ""OSD initialized for this cluster, but OSD ID not found in the cluster""",2,1
openstack%2Frequirements~893408,openstack/requirements,master,Ifc9abd9d655e722c630fa4e96558aa899305b135,Replace pypy to pypy3 to make *py311 jobs pass,MERGED,2023-08-31 15:41:17.000000000,2023-09-01 15:57:48.000000000,2023-09-01 15:56:44.000000000,"[{'_account_id': 10342}, {'_account_id': 13252}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-31 15:41:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/b5d398e84b0b25c4e8e1189a0f0bb377ff3d66c6', 'message': 'Replace pypy to pypy3 to make *py311 jobs pass\n\nPy311 based jobs can fail as there is no pypy binary package in\ndebian-bookworm anymore, but there is pypy3 instead.\n\nChange-Id: Ifc9abd9d655e722c630fa4e96558aa899305b135\n'}, {'number': 2, 'created': '2023-08-31 20:31:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/2e140d265fda125ffe5a89553b7cc5c5fa20b631', 'message': 'Replace pypy to pypy3 to make *py311 jobs pass\n\nPy311 based jobs can fail as there is no pypy binary package in\ndebian-bookworm anymore, but there is pypy3 instead.\n\nChange-Id: Ifc9abd9d655e722c630fa4e96558aa899305b135\n'}, {'number': 3, 'created': '2023-08-31 20:49:03.000000000', 'files': ['bindep.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/b0b8347fdb48007e1ea3ce152aebb20d608e81bc', 'message': 'Replace pypy to pypy3 to make *py311 jobs pass\n\nPy311 based jobs can fail as there is no pypy binary package in\ndebian-bookworm anymore, but there is pypy3 instead.\n\nChange-Id: Ifc9abd9d655e722c630fa4e96558aa899305b135\n'}]",6,893408,b0b8347fdb48007e1ea3ce152aebb20d608e81bc,18,5,3,17685,,,0,"Replace pypy to pypy3 to make *py311 jobs pass

Py311 based jobs can fail as there is no pypy binary package in
debian-bookworm anymore, but there is pypy3 instead.

Change-Id: Ifc9abd9d655e722c630fa4e96558aa899305b135
",git fetch https://review.opendev.org/openstack/requirements refs/changes/08/893408/1 && git format-patch -1 --stdout FETCH_HEAD,['bindep.txt'],1,b5d398e84b0b25c4e8e1189a0f0bb377ff3d66c6,,pypy3 [platform:dpkg] pypy3-dev [platform:dpkg],pypy [platform:dpkg] pypy-dev [platform:dpkg],2,2
openstack%2Fansible-collections-openstack~880027,openstack/ansible-collections-openstack,master,Ie3672022386bf06a95a53497c04ac8936237b679,Treat empty default_project_name as missing one,ABANDONED,2023-04-11 08:10:24.000000000,2023-09-01 15:55:08.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-04-11 08:10:24.000000000', 'files': ['plugins/modules/identity_user.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/4c00d19e418d9b48f14d7ffc87a5db9c4394d64f', 'message': 'Treat empty default_project_name as missing one\n\nAt the moment identity_user module treats empty default_project_name\nargument that is provided as an empty string, as valid name_or_id.\n\nAs it\'s quite tricky to ""undefine"" a variable on a role level playbooks might\nbe quite tricky, as in example [1]. So quite much complexity must be\nadded to such roles to use omit when resulting variable is an empty\nstring. At the same time providing empty string worked nicely before\nrefactoring [2] made for collection version 2.0.\n\nSo it\'s way easier to change condition in the module to ensure that\nempty strings are not treated as valid name_or_id.\n\n[1] https://opendev.org/openstack/openstack-ansible-plugins/src/branch/master/roles/service_setup/tasks/main.yml#L68-L90\n[2] https://opendev.org/openstack/ansible-collections-openstack/commit/c9afdbfd73d788450d0e9f28ffc6893e350c0460\n\nChange-Id: Ie3672022386bf06a95a53497c04ac8936237b679\n'}]",4,880027,4c00d19e418d9b48f14d7ffc87a5db9c4394d64f,6,1,1,28619,,,0,"Treat empty default_project_name as missing one

At the moment identity_user module treats empty default_project_name
argument that is provided as an empty string, as valid name_or_id.

As it's quite tricky to ""undefine"" a variable on a role level playbooks might
be quite tricky, as in example [1]. So quite much complexity must be
added to such roles to use omit when resulting variable is an empty
string. At the same time providing empty string worked nicely before
refactoring [2] made for collection version 2.0.

So it's way easier to change condition in the module to ensure that
empty strings are not treated as valid name_or_id.

[1] https://opendev.org/openstack/openstack-ansible-plugins/src/branch/master/roles/service_setup/tasks/main.yml#L68-L90
[2] https://opendev.org/openstack/ansible-collections-openstack/commit/c9afdbfd73d788450d0e9f28ffc6893e350c0460

Change-Id: Ie3672022386bf06a95a53497c04ac8936237b679
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/27/880027/1 && git format-patch -1 --stdout FETCH_HEAD,['plugins/modules/identity_user.py'],1,4c00d19e418d9b48f14d7ffc87a5db9c4394d64f,, if default_project_name_or_id:, if default_project_name_or_id is not None:,1,1
openstack%2Fansible-collections-openstack~881205,openstack/ansible-collections-openstack,master,I0738ff564f81a31690872450a4731340ed6bbeb1,Add inactive state for the images,NEW,2023-04-21 10:23:39.000000000,2023-09-01 15:53:30.000000000,,"[{'_account_id': 10969}, {'_account_id': 22348}, {'_account_id': 27900}, {'_account_id': 32962}]","[{'number': 1, 'created': '2023-04-21 10:23:39.000000000', 'files': ['ci/roles/image/tasks/main.yml', 'plugins/modules/image.py', 'changelogs/fragments/image_deactivate_reactivate.yml'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/6637556e7633636806d1d10e60af3ab33dcc1a23', 'message': ""Add inactive state for the images\n\nGlance images can be deactivated ad reactivated with corresponding\nAPI calls. It might be useful for operators to be able to control\nthese states through ansible modules as well. Instead of introduction\nof the new parameter we're adding new state for the image that is\n`inactive`.\n\nChange-Id: I0738ff564f81a31690872450a4731340ed6bbeb1\n""}]",2,881205,6637556e7633636806d1d10e60af3ab33dcc1a23,4,4,1,28619,,,0,"Add inactive state for the images

Glance images can be deactivated ad reactivated with corresponding
API calls. It might be useful for operators to be able to control
these states through ansible modules as well. Instead of introduction
of the new parameter we're adding new state for the image that is
`inactive`.

Change-Id: I0738ff564f81a31690872450a4731340ed6bbeb1
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/05/881205/1 && git format-patch -1 --stdout FETCH_HEAD,"['ci/roles/image/tasks/main.yml', 'plugins/modules/image.py', 'changelogs/fragments/image_deactivate_reactivate.yml']",3,6637556e7633636806d1d10e60af3ab33dcc1a23,,--- minor_changes: - | openstack.cloud.image - Added new `inactive` option for the image `state` It will deactivate the image. Setting state `present` can re-activate it again for deactivated previously images. ,,57,4
openstack%2Fneutron~884474,openstack/neutron,master,Iaf27deb955c3844409fcd36239511478e9607a82,Default SG rules - use new rules templates to create rules for SGs,MERGED,2023-05-26 10:02:59.000000000,2023-09-01 15:52:12.000000000,2023-08-31 19:05:49.000000000,"[{'_account_id': 8313}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 13861}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-26 10:02:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/4103b1f25a79658b5cfcd470baa1bec4f30550b5', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 2, 'created': '2023-05-31 10:56:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8dd99ca1633681b1162a2c28cdae75763c72d20a', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 3, 'created': '2023-06-01 10:40:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3c866f6b5274990db664afbd041f016e9b3aac3b', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 4, 'created': '2023-06-01 10:41:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d81c0f0d2a524bca619fa8d69def8d406db6bbf8', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 5, 'created': '2023-06-22 07:39:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f6d0ae47508f1c7279d4854317a2f09bc43f47ae', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 6, 'created': '2023-06-26 14:56:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/81b71cbaed27fcf7fdb98e61cc752d370895ecb7', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 7, 'created': '2023-06-27 08:26:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1af4eb6603fa3edee8774afa499d324bc4a975c7', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 8, 'created': '2023-06-29 09:52:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a1e3da1fea65690aeb00b8193342f12853627f09', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 9, 'created': '2023-07-05 10:13:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e01faab2ba9f864796cc5f6e83e0afab341d61c6', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 10, 'created': '2023-07-07 08:44:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e6f0706e38fbfd835ba816bfdc945d8a028091e1', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 11, 'created': '2023-07-17 10:42:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/625acf8dea224b966768038ecd56d2ae9f1df231', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 12, 'created': '2023-08-10 14:47:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/578644998a0a4ad84bcd6843e74ae294a4e4a330', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 13, 'created': '2023-08-11 07:00:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/35acd57db3fad582e7010580c4e6ae14a2d986fd', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 14, 'created': '2023-08-23 10:37:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/16899bede2cf0059abd9eaaba70f5435059c0c76', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 15, 'created': '2023-08-29 17:54:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d98d8324bd065d17a5d5b0baa45ba847716af65d', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 16, 'created': '2023-08-30 10:06:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f5164695a81e2046a4a6a08f914a5239f3f22ef9', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}, {'number': 17, 'created': '2023-08-30 10:18:19.000000000', 'files': ['neutron/extensions/security_groups_default_rules.py', 'neutron/db/securitygroups_db.py', 'neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/tests/unit/db/test_securitygroups_db.py', 'neutron/tests/unit/plugins/ml2/test_security_group.py', 'neutron/tests/unit/agent/test_securitygroups_rpc.py', 'neutron/tests/functional/base.py', 'neutron/tests/unit/plugins/ml2/test_tracked_resources.py', 'neutron/tests/unit/services/logapi/common/test_db_api.py', 'neutron/tests/unit/extensions/test_securitygroup.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/a4c8392209f7935cc6699c1cf9dc36d483b2f864', 'message': 'Default SG rules - use new rules templates to create rules for SGs\n\nDefault SG rules created as template in the Neutron DB are now used to\ncreate security group rules for each new default and non-default SG\ncreated in Neutron.\n\nCloses-bug: #1983053\nChange-Id: Iaf27deb955c3844409fcd36239511478e9607a82\n'}]",35,884474,a4c8392209f7935cc6699c1cf9dc36d483b2f864,132,6,17,11975,,,0,"Default SG rules - use new rules templates to create rules for SGs

Default SG rules created as template in the Neutron DB are now used to
create security group rules for each new default and non-default SG
created in Neutron.

Closes-bug: #1983053
Change-Id: Iaf27deb955c3844409fcd36239511478e9607a82
",git fetch https://review.opendev.org/openstack/neutron refs/changes/74/884474/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/extensions/security_groups_default_rules.py', 'neutron/db/securitygroups_db.py', 'neutron/tests/unit/db/test_securitygroups_db.py', 'neutron/tests/unit/extensions/test_securitygroup.py']",4,4103b1f25a79658b5cfcd470baa1bec4f30550b5,bug/1983053," default_sg_rules = [ { 'direction': 'egress', 'ethertype': const.IPv4, 'remote_group_id': None, 'remote_ip_prefix': None, 'protocol': None, 'port_range_max': None, 'port_range_min': None, 'used_in_default_sg': True, 'used_in_non_default_sg': True }, { 'direction': 'egress', 'ethertype': const.IPv6, 'remote_group_id': None, 'remote_ip_prefix': None, 'protocol': None, 'port_range_max': None, 'port_range_min': None, 'used_in_default_sg': True, 'used_in_non_default_sg': True } ] with mock.patch.object( SecurityGroupTestPlugin, 'get_default_security_group_rules', return_value=default_sg_rules): with self.security_group(name, description) as security_group: for k, v, in keys: self.assertEqual(v, security_group['security_group'][k]) # Verify that egress rules have been created as defined in the template # above with mock.patch.object( SecurityGroupTestPlugin, 'get_default_security_group_rules', return_value=[]): with self.security_group(name, description) as sg: remote_group_id = sg['security_group']['id'] res = self.new_show_request('security-groups', remote_group_id) security_group_id = sg['security_group']['id'] direction = ""ingress"" remote_ip_prefix = ""10.0.0.0/24"" protocol = const.PROTO_NAME_TCP port_range_min = 22 port_range_max = 22 keys = [('remote_ip_prefix', remote_ip_prefix), ('security_group_id', security_group_id), ('direction', direction), ('protocol', protocol), ('port_range_min', port_range_min), ('port_range_max', port_range_max)] with self.security_group_rule( security_group_id, direction=direction, protocol=protocol, port_range_min=port_range_min, port_range_max=port_range_max, remote_ip_prefix=remote_ip_prefix): group = self.deserialize( self.fmt, res.get_response(self.ext_api)) sg_rules = group['security_group']['security_group_rules'] self.assertEqual(remote_group_id, group['security_group']['id']) self.assertEqual(1, len(sg_rules)) for k, v, in keys: self.assertEqual(v, sg_rules[0][k]) self.assertEqual(3, len(rules)) self.assertNotEqual('admin-tenant', rules[1]['tenant_id']) self.assertEqual('admin-tenant', rules[2]['tenant_id']) default_sg_rules = [ { 'direction': 'egress', 'ethertype': const.IPv4, 'remote_group_id': None, 'remote_ip_prefix': None, 'protocol': None, 'port_range_max': None, 'port_range_min': None, 'used_in_default_sg': True, 'used_in_non_default_sg': True }, { 'direction': 'egress', 'ethertype': const.IPv6, 'remote_group_id': None, 'remote_ip_prefix': None, 'protocol': None, 'port_range_max': None, 'port_range_min': None, 'used_in_default_sg': True, 'used_in_non_default_sg': True }, { 'direction': 'ingress', 'ethertype': const.IPv4, 'remote_group_id': 'PARENT', 'remote_ip_prefix': None, 'protocol': None, 'port_range_max': None, 'port_range_min': None, 'used_in_default_sg': True, 'used_in_non_default_sg': False }, { 'direction': 'ingress', 'ethertype': const.IPv6, 'remote_group_id': 'PARENT', 'remote_ip_prefix': None, 'protocol': None, 'port_range_max': None, 'port_range_min': None, 'used_in_default_sg': True, 'used_in_non_default_sg': False } ] with mock.patch.object( SecurityGroupTestPlugin, 'get_default_security_group_rules', return_value=default_sg_rules):"," with self.security_group(name, description) as security_group: for k, v, in keys: self.assertEqual(v, security_group['security_group'][k]) # Verify that default egress rules have been created with self.security_group(name, description) as sg: remote_group_id = sg['security_group']['id'] res = self.new_show_request('security-groups', remote_group_id) security_group_id = sg['security_group']['id'] direction = ""ingress"" remote_ip_prefix = ""10.0.0.0/24"" protocol = const.PROTO_NAME_TCP port_range_min = 22 port_range_max = 22 keys = [('remote_ip_prefix', remote_ip_prefix), ('security_group_id', security_group_id), ('direction', direction), ('protocol', protocol), ('port_range_min', port_range_min), ('port_range_max', port_range_max)] with self.security_group_rule(security_group_id, direction=direction, protocol=protocol, port_range_min=port_range_min, port_range_max=port_range_max, remote_ip_prefix=remote_ip_prefix): group = self.deserialize( self.fmt, res.get_response(self.ext_api)) sg_rule = group['security_group']['security_group_rules'] self.assertEqual(remote_group_id, group['security_group']['id']) self.assertEqual(3, len(sg_rule)) sg_rule = [r for r in sg_rule if r['direction'] == 'ingress'] for k, v, in keys: self.assertEqual(v, sg_rule[0][k]) self.assertEqual(5, len(rules)) self.assertNotEqual('admin-tenant', rules[3]['tenant_id']) self.assertEqual('admin-tenant', rules[4]['tenant_id']) with self.network():",159,60
openstack%2Fopenstack-ansible~893413,openstack/openstack-ansible,stable/2023.1,If31036f2bcb80795e573b43c541bacf1af7567d1,Bump SHAs for 2023.1,MERGED,2023-08-31 16:18:10.000000000,2023-09-01 15:13:17.000000000,2023-09-01 15:11:44.000000000,"[{'_account_id': 13095}, {'_account_id': 22348}, {'_account_id': 31542}, {'_account_id': 32666}]","[{'number': 1, 'created': '2023-08-31 16:18:10.000000000', 'files': ['ansible-collection-requirements.yml', 'inventory/group_vars/cinder_all/source_git.yml', 'inventory/group_vars/manila_all/source_git.yml', 'releasenotes/notes/fix_lxc_cache_expiration-1656b5758c4ec24e.yaml', 'inventory/group_vars/ironic_all/source_git.yml', 'inventory/group_vars/ceilometer_all/source_git.yml', 'inventory/group_vars/keystone_all/source_git.yml', 'inventory/group_vars/all/source_git.yml', 'inventory/group_vars/magnum_all/source_git.yml', 'inventory/group_vars/horizon_all/source_git.yml', 'ansible-role-requirements.yml', 'inventory/group_vars/gnocchi_all/source_git.yml', 'releasenotes/notes/mariabackup-compression-337b04c68f370c1d.yaml', 'inventory/group_vars/designate_all/source_git.yml', 'inventory/group_vars/swift_all/source_git.yml', 'inventory/group_vars/neutron_all/source_git.yml', 'inventory/group_vars/nova_all/source_git.yml', 'inventory/group_vars/octavia_all/source_git.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/52288afd4a3055deb8ad65a6ef7548af10a1b967', 'message': 'Bump SHAs for 2023.1\n\nChange-Id: If31036f2bcb80795e573b43c541bacf1af7567d1\n'}]",3,893413,52288afd4a3055deb8ad65a6ef7548af10a1b967,14,4,1,28619,,,0,"Bump SHAs for 2023.1

Change-Id: If31036f2bcb80795e573b43c541bacf1af7567d1
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/13/893413/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible-collection-requirements.yml', 'inventory/group_vars/cinder_all/source_git.yml', 'inventory/group_vars/manila_all/source_git.yml', 'releasenotes/notes/fix_lxc_cache_expiration-1656b5758c4ec24e.yaml', 'inventory/group_vars/ironic_all/source_git.yml', 'inventory/group_vars/ceilometer_all/source_git.yml', 'inventory/group_vars/keystone_all/source_git.yml', 'inventory/group_vars/all/source_git.yml', 'inventory/group_vars/magnum_all/source_git.yml', 'inventory/group_vars/horizon_all/source_git.yml', 'ansible-role-requirements.yml', 'inventory/group_vars/gnocchi_all/source_git.yml', 'releasenotes/notes/mariabackup-compression-337b04c68f370c1d.yaml', 'inventory/group_vars/designate_all/source_git.yml', 'inventory/group_vars/swift_all/source_git.yml', 'inventory/group_vars/neutron_all/source_git.yml', 'inventory/group_vars/nova_all/source_git.yml', 'inventory/group_vars/octavia_all/source_git.yml']",18,52288afd4a3055deb8ad65a6ef7548af10a1b967,bump_osa,### HEAD as of 31.08.2023 ###octavia_git_install_branch: 8b196bb3bb05c9d87dae688750457dbb944d4d1boctavia_ovn_octavia_provider_git_install_branch: 8652e4c4ba52ef0924c2acc87610123a34bc0ba2,### HEAD as of 03.07.2023 ###octavia_git_install_branch: 34d95db1332dea340ec1ca492cca71cdda53d7c2octavia_ovn_octavia_provider_git_install_branch: 217d1ab4317b886ef3544c029819121c91f0709f,144,106
openstack%2Fcharm-glance-simplestreams-sync~809392,openstack/charm-glance-simplestreams-sync,master,Id15fab364c27242347c520b959065c490e4da6b6,Add support of image format conversion on importing,MERGED,2021-09-16 10:47:40.000000000,2023-09-01 14:53:34.000000000,2023-09-01 14:53:34.000000000,"[{'_account_id': 10058}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-16 10:47:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/d329cb2d38f24a163aebcbeaeb3c3a0d539e4f48', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 2, 'created': '2022-07-07 03:29:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/b2af9ed056284e7bcf1890cdc019d9d4c032d018', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 3, 'created': '2022-09-16 12:11:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/09570d2985561cd5c78428203d1f090267b485e5', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 4, 'created': '2022-09-16 12:15:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/81304c2630c809206a13a0eb6e3468e402b64354', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 5, 'created': '2022-10-25 08:59:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/cfc023bffb276adf733ab08593e11247dbe75a49', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 6, 'created': '2022-10-26 04:46:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/73d21af8abce6f4e39afbf35f0778acd80a564b1', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 7, 'created': '2023-01-25 06:58:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/9564e7bc8623d0eac28fe3d331daeedf4698cdd0', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 8, 'created': '2023-04-13 00:49:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/b2386791575848398e1b9cf9f06ba6ebdc1dd18e', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 9, 'created': '2023-04-27 03:10:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/8497c63e9096152eae0118a60857c15fbaa3d264', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 10, 'created': '2023-08-30 04:51:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/ddfdb077d7d86bac14557fc7679a8d83daf23374', 'message': 'Add support for importing images\n\nEnable conversion of images to raw format\nby importing the images to Glance.\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}, {'number': 11, 'created': '2023-08-30 04:56:29.000000000', 'files': ['hooks/hooks.py', 'files/glance_simplestreams_sync.py', 'config.yaml', 'templates/mirrors.yaml'], 'web_link': 'https://opendev.org/openstack/charm-glance-simplestreams-sync/commit/536540781ae15c9793120f875a196f1954968d01', 'message': 'Add support of image format conversion on importing\n\nOptinally enable conversion of images to raw format when uploading\nimages to Glance. Only supported when ""image_conversion"" is enabled in\nGlance.\n\nThis is an equivalent change to the one in simplestreams:\nhttps://git.launchpad.net/simplestreams/commit/?id=cbc0ac9\n\nCloses-Bug: #1889729\nChange-Id: Id15fab364c27242347c520b959065c490e4da6b6\n'}]",20,809392,536540781ae15c9793120f875a196f1954968d01,61,4,11,11582,,,0,"Add support of image format conversion on importing

Optinally enable conversion of images to raw format when uploading
images to Glance. Only supported when ""image_conversion"" is enabled in
Glance.

This is an equivalent change to the one in simplestreams:
https://git.launchpad.net/simplestreams/commit/?id=cbc0ac9

Closes-Bug: #1889729
Change-Id: Id15fab364c27242347c520b959065c490e4da6b6
",git fetch https://review.opendev.org/openstack/charm-glance-simplestreams-sync refs/changes/92/809392/1 && git format-patch -1 --stdout FETCH_HEAD,"['hooks/hooks.py', 'files/glance_simplestreams_sync.py', 'config.yaml', 'templates/mirrors.yaml']",4,d329cb2d38f24a163aebcbeaeb3c3a0d539e4f48,bug/1889729,image_import_conversion: {{ image_import_conversion }},,13,1
openstack%2Freleases~892951,openstack/releases,master,I67e146bd5a72dc529fb19297b592a636807e812f,Release final python-manilaclient for 2023.2 Bobcat,MERGED,2023-08-28 13:17:00.000000000,2023-09-01 14:26:06.000000000,2023-09-01 14:26:06.000000000,"[{'_account_id': 308}, {'_account_id': 16643}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 29632}]","[{'number': 1, 'created': '2023-08-28 13:17:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/5681e6b258384bc1a649673dea5bc6f7e1f9f394', 'message': ""Release final python-manilaclient for 2023.2 Bobcat\n\nThis is a release for python-manilaclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 4.5.1..4eccd68\n4eccd68 Allow restricting access rules\n1734b45 Support for resource locks\n7a15a2a Add '--count' option for snapshot list API.\n0a0d610 [CI] switch to using osc for bootstrap\n\nChange-Id: I67e146bd5a72dc529fb19297b592a636807e812f\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n""}, {'number': 2, 'created': '2023-08-31 18:32:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/7435ce06e9cca38e07a7849ab543f9ddd264dcdc', 'message': 'Release final python-manilaclient for 2023.2 Bobcat\n\nThis is a release for python-manilaclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline 4.5.1..2cdbf4e\n2cdbf4e Merge ""Deprecate ""manila"" CLI client""\n8a3f65b Merge ""Implement share backup""\n32f1a9a Bump tox version\n5e24577 Implement share backup\n4eccd68 Allow restricting access rules\n1734b45 Support for resource locks\nba9a388 Deprecate ""manila"" CLI client\n7a15a2a Add \'--count\' option for snapshot list API.\n0a0d610 [CI] switch to using osc for bootstrap\n\nChange-Id: I67e146bd5a72dc529fb19297b592a636807e812f\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 3, 'created': '2023-09-01 12:55:56.000000000', 'files': ['deliverables/bobcat/python-manilaclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/b2270eea1d5bda548ffc685c9743290d268efbf4', 'message': 'Release final python-manilaclient for 2023.2 Bobcat\n\nThis is a release for python-manilaclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline 4.5.1..2cdbf4e\n2cdbf4e Merge ""Deprecate ""manila"" CLI client""\n8a3f65b Merge ""Implement share backup""\n32f1a9a Bump tox version\n5e24577 Implement share backup\n4eccd68 Allow restricting access rules\n1734b45 Support for resource locks\nba9a388 Deprecate ""manila"" CLI client\n7a15a2a Add \'--count\' option for snapshot list API.\n0a0d610 [CI] switch to using osc for bootstrap\n\nChange-Id: I67e146bd5a72dc529fb19297b592a636807e812f\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",9,892951,b2270eea1d5bda548ffc685c9743290d268efbf4,21,5,3,28522,,,0,"Release final python-manilaclient for 2023.2 Bobcat

This is a release for python-manilaclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline 4.5.1..2cdbf4e
2cdbf4e Merge ""Deprecate ""manila"" CLI client""
8a3f65b Merge ""Implement share backup""
32f1a9a Bump tox version
5e24577 Implement share backup
4eccd68 Allow restricting access rules
1734b45 Support for resource locks
ba9a388 Deprecate ""manila"" CLI client
7a15a2a Add '--count' option for snapshot list API.
0a0d610 [CI] switch to using osc for bootstrap

Change-Id: I67e146bd5a72dc529fb19297b592a636807e812f
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/51/892951/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-manilaclient.yaml'],1,5681e6b258384bc1a649673dea5bc6f7e1f9f394,bobcat-milestone-3, - version: 4.6.0 projects: - repo: openstack/python-manilaclient hash: 4eccd687941af466973d8a795ea7d7f543958f10,,4,0
openstack%2Freleases~892945,openstack/releases,master,I49bdfe06e18dd0c8cc46c2456152e686f88ac025,Release final python-ironicclient for 2023.2 Bobcat,MERGED,2023-08-28 13:14:24.000000000,2023-09-01 14:26:04.000000000,2023-09-01 14:26:04.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-28 13:14:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/a1b2f741bedcc8d3b2ae19f4a5a4cc77aedc8fcb', 'message': 'Release final python-ironicclient for 2023.2 Bobcat\n\nThis is a release for python-ironicclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 5.3.0..6a363db\n8bcf52e Followup: Remove print statements from test\nfb03b3e tox: Remove basepython\n11d09bc Add python3.10 support in testing runtime\n048f5fd These should be indented 4 spaces to match the other things in this block\n508073d Add baremetal node unhold\nb57429f Add support for parent node\n\nChange-Id: I49bdfe06e18dd0c8cc46c2456152e686f88ac025\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 2, 'created': '2023-08-31 14:46:32.000000000', 'files': ['deliverables/bobcat/python-ironicclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/4d31ab868ee5cbb57fda1cf5e920e5028c265889', 'message': 'Release final python-ironicclient for 2023.2 Bobcat\n\nThis is a release for python-ironicclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 5.3.0..6a363db\n8bcf52e Followup: Remove print statements from test\nfb03b3e tox: Remove basepython\n11d09bc Add python3.10 support in testing runtime\n048f5fd These should be indented 4 spaces to match the other things in this block\n508073d Add baremetal node unhold\nb57429f Add support for parent node\n\nChange-Id: I49bdfe06e18dd0c8cc46c2456152e686f88ac025\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",4,892945,4d31ab868ee5cbb57fda1cf5e920e5028c265889,16,6,2,28522,,,0,"Release final python-ironicclient for 2023.2 Bobcat

This is a release for python-ironicclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 5.3.0..6a363db
8bcf52e Followup: Remove print statements from test
fb03b3e tox: Remove basepython
11d09bc Add python3.10 support in testing runtime
048f5fd These should be indented 4 spaces to match the other things in this block
508073d Add baremetal node unhold
b57429f Add support for parent node

Change-Id: I49bdfe06e18dd0c8cc46c2456152e686f88ac025
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/45/892945/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-ironicclient.yaml'],1,a1b2f741bedcc8d3b2ae19f4a5a4cc77aedc8fcb,bobcat-milestone-3, - version: 5.4.0 projects: - repo: openstack/python-ironicclient hash: 6a363dbff3f315d68b38b1fcf65e54ce68edeab6,,4,0
openstack%2Freleases~892961,openstack/releases,master,I5364282e22c3b1f4267664e525248f2256db7a96,Release final python-troveclient for 2023.2 Bobcat,MERGED,2023-08-28 13:25:51.000000000,2023-09-01 14:24:33.000000000,2023-09-01 14:24:33.000000000,"[{'_account_id': 308}, {'_account_id': 6732}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26285}]","[{'number': 1, 'created': '2023-08-28 13:25:51.000000000', 'files': ['deliverables/bobcat/python-troveclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/2590e13828f5f8f4ee105f2a885cd5a25751d466', 'message': 'Release final python-troveclient for 2023.2 Bobcat\n\nThis is a release for python-troveclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 8.2.0..0415e4b\n0415e4b Drop openstack-lower-constraints-jobs\n\nChange-Id: I5364282e22c3b1f4267664e525248f2256db7a96\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892961,2590e13828f5f8f4ee105f2a885cd5a25751d466,7,5,1,28522,,,0,"Release final python-troveclient for 2023.2 Bobcat

This is a release for python-troveclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 8.2.0..0415e4b
0415e4b Drop openstack-lower-constraints-jobs

Change-Id: I5364282e22c3b1f4267664e525248f2256db7a96
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/61/892961/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-troveclient.yaml'],1,2590e13828f5f8f4ee105f2a885cd5a25751d466,bobcat-milestone-3, - version: 8.2.1 projects: - repo: openstack/python-troveclient hash: 0415e4bc884b4acb341960f35678c6b93f262518,,4,0
openstack%2Freleases~892960,openstack/releases,master,I03126ffc673ca8639837261fb4e38658d411958d,Release final python-tackerclient for 2023.2 Bobcat,MERGED,2023-08-28 13:25:27.000000000,2023-09-01 14:24:30.000000000,2023-09-01 14:24:30.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 25701}]","[{'number': 1, 'created': '2023-08-28 13:25:27.000000000', 'files': ['deliverables/bobcat/python-tackerclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/1d42119776faee258c5b981330b7722a6ae0ba80', 'message': 'Release final python-tackerclient for 2023.2 Bobcat\n\nThis is a release for python-tackerclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 1.13.0..e8460be\ne8460be Update metadata in setup.cfg\n863c377 Update master for stable/2023.1\n\nChange-Id: I03126ffc673ca8639837261fb4e38658d411958d\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892960,1d42119776faee258c5b981330b7722a6ae0ba80,7,4,1,28522,,,0,"Release final python-tackerclient for 2023.2 Bobcat

This is a release for python-tackerclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 1.13.0..e8460be
e8460be Update metadata in setup.cfg
863c377 Update master for stable/2023.1

Change-Id: I03126ffc673ca8639837261fb4e38658d411958d
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/60/892960/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-tackerclient.yaml'],1,1d42119776faee258c5b981330b7722a6ae0ba80,bobcat-milestone-3,releases: - version: 1.14.0 projects: - repo: openstack/python-tackerclient hash: e8460be8c53ad5dfbac720367cf0ae2c3291dc3b,,5,0
openstack%2Freleases~892952,openstack/releases,master,Iae90d77ad8dd3baf0a53d14350c036dfbe8ca1f4,Release final python-masakariclient for 2023.2 Bobcat,MERGED,2023-08-28 13:17:24.000000000,2023-09-01 14:24:28.000000000,2023-09-01 14:24:28.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 30623}]","[{'number': 1, 'created': '2023-08-28 13:17:24.000000000', 'files': ['deliverables/bobcat/python-masakariclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/59af76fc971004fbed0da5f4167dbcfdd6ab5162', 'message': 'Release final python-masakariclient for 2023.2 Bobcat\n\nThis is a release for python-masakariclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 8.1.0..8a832d9\n8a832d9 Update master for stable/2023.1\n\nChange-Id: Iae90d77ad8dd3baf0a53d14350c036dfbe8ca1f4\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892952,59af76fc971004fbed0da5f4167dbcfdd6ab5162,8,4,1,28522,,,0,"Release final python-masakariclient for 2023.2 Bobcat

This is a release for python-masakariclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 8.1.0..8a832d9
8a832d9 Update master for stable/2023.1

Change-Id: Iae90d77ad8dd3baf0a53d14350c036dfbe8ca1f4
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/52/892952/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-masakariclient.yaml'],1,59af76fc971004fbed0da5f4167dbcfdd6ab5162,bobcat-milestone-3,releases: - version: 8.2.0 projects: - repo: openstack/python-masakariclient hash: 8a832d984e66893a377c8bbeb94e14a792caaba0,,5,0
openstack%2Freleases~892941,openstack/releases,master,I9c480456d3cf3891319cad859adb618ce9d5b6d9,Release final python-cyborgclient for 2023.2 Bobcat,MERGED,2023-08-28 13:13:06.000000000,2023-09-01 14:24:26.000000000,2023-09-01 14:24:26.000000000,"[{'_account_id': 308}, {'_account_id': 13629}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26458}, {'_account_id': 31412}]","[{'number': 1, 'created': '2023-08-28 13:13:06.000000000', 'files': ['deliverables/bobcat/python-cyborgclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/21ba8cdf859a5f5cbb6427928dc49b7d4f40814d', 'message': 'Release final python-cyborgclient for 2023.2 Bobcat\n\nThis is a release for python-cyborgclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 2.2.0..51c06d5\n51c06d5 add nagative unittest for program deployable in cyborg module\ndfff421 add negative unittest for deployable program in cyborg module\n0d04902 add unittest for program deployable in cyborg module\nf397f0d add unittest for delete accelerator with instance uuid\n4a99d71 add unittest for show device profile with not exist id\nf07398d add unittest for show device profile with id\nf4331b8 line too long\n\nChange-Id: I9c480456d3cf3891319cad859adb618ce9d5b6d9\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892941,21ba8cdf859a5f5cbb6427928dc49b7d4f40814d,7,6,1,28522,,,0,"Release final python-cyborgclient for 2023.2 Bobcat

This is a release for python-cyborgclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 2.2.0..51c06d5
51c06d5 add nagative unittest for program deployable in cyborg module
dfff421 add negative unittest for deployable program in cyborg module
0d04902 add unittest for program deployable in cyborg module
f397f0d add unittest for delete accelerator with instance uuid
4a99d71 add unittest for show device profile with not exist id
f07398d add unittest for show device profile with id
f4331b8 line too long

Change-Id: I9c480456d3cf3891319cad859adb618ce9d5b6d9
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/41/892941/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-cyborgclient.yaml'],1,21ba8cdf859a5f5cbb6427928dc49b7d4f40814d,bobcat-milestone-3, - version: 2.2.1 projects: - repo: openstack/python-cyborgclient hash: 51c06d55f1f44ff615e8def144356afe54ebcc2c,,4,0
openstack%2Freleases~892934,openstack/releases,master,I7c6ebdd55d7c973aee201d47465dbb2f457d0bd6,Release final python-blazarclient for 2023.2 Bobcat,MERGED,2023-08-28 13:11:17.000000000,2023-09-01 14:24:24.000000000,2023-09-01 14:24:24.000000000,"[{'_account_id': 308}, {'_account_id': 15197}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:11:17.000000000', 'files': ['deliverables/bobcat/python-blazarclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/64572e04387a712788e3b30d8ce73e08f68b6937', 'message': 'Release final python-blazarclient for 2023.2 Bobcat\n\nThis is a release for python-blazarclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 3.6.0..9acb735\n9acb735 Update master for stable/2023.1\n\nChange-Id: I7c6ebdd55d7c973aee201d47465dbb2f457d0bd6\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892934,64572e04387a712788e3b30d8ce73e08f68b6937,9,4,1,28522,,,0,"Release final python-blazarclient for 2023.2 Bobcat

This is a release for python-blazarclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 3.6.0..9acb735
9acb735 Update master for stable/2023.1

Change-Id: I7c6ebdd55d7c973aee201d47465dbb2f457d0bd6
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/34/892934/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-blazarclient.yaml'],1,64572e04387a712788e3b30d8ce73e08f68b6937,bobcat-milestone-3,releases: - version: 3.7.0 projects: - repo: openstack/python-blazarclient hash: 9acb735cfe952f1b945d0a99caf561dcda16a58f,,5,0
openstack%2Freleases~892940,openstack/releases,master,I80a23149c189246141b140ffd52ecf05c7124cbf,Release final python-cloudkittyclient for 2023.2 Bobcat,MERGED,2023-08-28 13:12:24.000000000,2023-09-01 14:24:22.000000000,2023-09-01 14:24:22.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28356}]","[{'number': 1, 'created': '2023-08-28 13:12:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/b992b6078df0d64db9e34117ddb4074d6e1a9d65', 'message': 'Release final python-cloudkittyclient for 2023.2 Bobcat\n\nThis is a release for python-cloudkittyclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 4.7.0..0835706\n0835706 Update master for stable/2023.1\n\nChange-Id: I80a23149c189246141b140ffd52ecf05c7124cbf\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 2, 'created': '2023-09-01 10:32:07.000000000', 'files': ['deliverables/bobcat/python-cloudkittyclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/c72c6a23affe705cfe512c958b7a5d2a31dd53cb', 'message': 'Release final python-cloudkittyclient for 2023.2 Bobcat\n\nThis is a release for python-cloudkittyclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 4.7.0..0835706\n0835706 Update master for stable/2023.1\n\nChange-Id: I80a23149c189246141b140ffd52ecf05c7124cbf\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",2,892940,c72c6a23affe705cfe512c958b7a5d2a31dd53cb,14,4,2,28522,,,0,"Release final python-cloudkittyclient for 2023.2 Bobcat

This is a release for python-cloudkittyclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 4.7.0..0835706
0835706 Update master for stable/2023.1

Change-Id: I80a23149c189246141b140ffd52ecf05c7124cbf
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/40/892940/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-cloudkittyclient.yaml'],1,b992b6078df0d64db9e34117ddb4074d6e1a9d65,bobcat-milestone-3,releases: - version: 4.8.0 projects: - repo: openstack/python-cloudkittyclient hash: 08357067384504c1b514b7e2f0df498de25943b8,,5,0
openstack%2Freleases~892935,openstack/releases,master,I30d4a5f605b515d9e03e7cf73344496622b3a224,Release final python-brick-cinderclient-ext for 2023.2 Bobcat,MERGED,2023-08-28 13:11:37.000000000,2023-09-01 14:22:30.000000000,2023-09-01 14:22:30.000000000,"[{'_account_id': 308}, {'_account_id': 9236}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2023-08-28 13:11:37.000000000', 'files': ['deliverables/bobcat/python-brick-cinderclient-ext.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/bfc51bf1c18aef212c2e0fd621a4459b94c4c049', 'message': 'Release final python-brick-cinderclient-ext for 2023.2 Bobcat\n\nThis is a release for python-brick-cinderclient-ext to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 2.1.0..a0aa649\na0aa649 Update functional jobs for 2023.2\ne0a4a0c Add Python 3.10 to setup.cfg metadata\n1a33b25 Update master for stable/2023.1\n\nChange-Id: I30d4a5f605b515d9e03e7cf73344496622b3a224\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",3,892935,bfc51bf1c18aef212c2e0fd621a4459b94c4c049,10,5,1,28522,,,0,"Release final python-brick-cinderclient-ext for 2023.2 Bobcat

This is a release for python-brick-cinderclient-ext to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 2.1.0..a0aa649
a0aa649 Update functional jobs for 2023.2
e0a4a0c Add Python 3.10 to setup.cfg metadata
1a33b25 Update master for stable/2023.1

Change-Id: I30d4a5f605b515d9e03e7cf73344496622b3a224
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/35/892935/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-brick-cinderclient-ext.yaml'],1,bfc51bf1c18aef212c2e0fd621a4459b94c4c049,bobcat-milestone-3,releases: - version: 2.2.0 projects: - repo: openstack/python-brick-cinderclient-ext hash: a0aa649ed92c8f6a582182514f9bfcf4fd3e1aa1,,5,0
openstack%2Freleases~892937,openstack/releases,master,I45708ae2b6d8d29aae98f70b5f5e1a20b1f3ae4e,Release final python-cinderclient for 2023.2 Bobcat,MERGED,2023-08-28 13:11:57.000000000,2023-09-01 14:22:28.000000000,2023-09-01 14:22:28.000000000,"[{'_account_id': 308}, {'_account_id': 9236}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2023-08-28 13:11:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/5c6e9b73bf7b28fa9dc820cc8a7323a8c76f08fc', 'message': 'Release final python-cinderclient for 2023.2 Bobcat\n\nThis is a release for python-cinderclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 9.3.0..f64df99\n26115ba Update functional jobs for 2023.2\n1260de9 Use tox 4\ne16ae76 Remove USE_PYTHON3 setting from .zuul.yaml\na75c5bf Add Python 3.10 to setup.cfg metadata\nc2dced2 Update master for stable/2023.1\n\nChange-Id: I45708ae2b6d8d29aae98f70b5f5e1a20b1f3ae4e\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 2, 'created': '2023-08-31 15:41:30.000000000', 'files': ['deliverables/bobcat/python-cinderclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/db1873c51282f1f6effa04b38a0ed27c1a3d64f9', 'message': 'Release final python-cinderclient for 2023.2 Bobcat\n\nThis is a release for python-cinderclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 9.3.0..f1f14\nf1f14df (HEAD -> master, origin/master, origin/HEAD) Use tox 4.11.0\n26115ba Update functional jobs for 2023.2\n1260de9 Use tox 4\ne16ae76 Remove USE_PYTHON3 setting from .zuul.yaml\na75c5bf Add Python 3.10 to setup.cfg metadata\nc2dced2 Update master for stable/2023.1\n\nChange-Id: I45708ae2b6d8d29aae98f70b5f5e1a20b1f3ae4e\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",4,892937,db1873c51282f1f6effa04b38a0ed27c1a3d64f9,13,5,2,28522,,,0,"Release final python-cinderclient for 2023.2 Bobcat

This is a release for python-cinderclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 9.3.0..f1f14
f1f14df (HEAD -> master, origin/master, origin/HEAD) Use tox 4.11.0
26115ba Update functional jobs for 2023.2
1260de9 Use tox 4
e16ae76 Remove USE_PYTHON3 setting from .zuul.yaml
a75c5bf Add Python 3.10 to setup.cfg metadata
c2dced2 Update master for stable/2023.1

Change-Id: I45708ae2b6d8d29aae98f70b5f5e1a20b1f3ae4e
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/37/892937/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-cinderclient.yaml'],1,5c6e9b73bf7b28fa9dc820cc8a7323a8c76f08fc,bobcat-milestone-3,releases: - version: 9.4.0 projects: - repo: openstack/python-cinderclient hash: f64df99134c95bb5f9e7d24deeb7869cd828aa4b,,5,0
openstack%2Freleases~892180,openstack/releases,master,I752557ff0f6cac6845b87ac207db6a8cba892371,Release final ceilometermiddleware for 2023.2 Bobcat,MERGED,2023-08-21 20:09:45.000000000,2023-09-01 14:20:33.000000000,2023-09-01 14:20:33.000000000,"[{'_account_id': 308}, {'_account_id': 4264}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-21 20:09:45.000000000', 'files': ['deliverables/bobcat/ceilometermiddleware.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/c0a8fecc7a14a698f491a91bc79d5e870ca24bf1', 'message': ""Release final ceilometermiddleware for 2023.2 Bobcat\n\nThis proposed a release for ceilometermiddleware to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 3.1.0..10e3d15\n10e3d15 Add 'check_requirements' to CI\n\nChange-Id: I752557ff0f6cac6845b87ac207db6a8cba892371\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n""}]",4,892180,c0a8fecc7a14a698f491a91bc79d5e870ca24bf1,12,4,1,17685,,,0,"Release final ceilometermiddleware for 2023.2 Bobcat

This proposed a release for ceilometermiddleware to get any final merged
changes out prior to the lib freeze for 2023.2 Bobcat going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, August 25th.

$ git log --oneline --no-merges 3.1.0..10e3d15
10e3d15 Add 'check_requirements' to CI

Change-Id: I752557ff0f6cac6845b87ac207db6a8cba892371
Signed-off-by: Elod Illes <elod.illes@est.tech>
",git fetch https://review.opendev.org/openstack/releases refs/changes/80/892180/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/ceilometermiddleware.yaml'],1,c0a8fecc7a14a698f491a91bc79d5e870ca24bf1,bobcat-final-non-client-libs,releases: - version: 3.2.0 projects: - repo: openstack/ceilometermiddleware hash: 10e3d1500056f2d17907fa79e8012a08fc35010b,,5,0
openstack%2Fhorizon~892133,openstack/horizon,master,I8255b6082ffdfd4d90a26cc7d06b9049cae27594,pytest-based selenium tests add first image test,MERGED,2023-08-21 11:03:15.000000000,2023-09-01 14:03:46.000000000,2023-09-01 14:02:45.000000000,"[{'_account_id': 6914}, {'_account_id': 8648}, {'_account_id': 22348}, {'_account_id': 29313}, {'_account_id': 35133}, {'_account_id': 35153}]","[{'number': 1, 'created': '2023-08-21 11:03:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/dbb029688eddc484bcdb9d0da5f4d8b9c465b2b3', 'message': 'pytest-based selenium tests add first image test\n\ntest_image_create_from_local_file_demo\n\nChange-Id: I8255b6082ffdfd4d90a26cc7d06b9049cae27594\n'}, {'number': 2, 'created': '2023-08-22 11:49:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/8abbe7bff6f2bc79cd5e753fc2ed8b2db6905985', 'message': 'pytest-based selenium tests add first image test\n\ntest_image_create_from_local_file_demo\n\nChange-Id: I8255b6082ffdfd4d90a26cc7d06b9049cae27594\n'}, {'number': 3, 'created': '2023-08-23 08:44:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/2a360f60716c37ed9e3168302ca7ce7c66e1538c', 'message': 'pytest-based selenium tests add first image test\n\ntest_image_create_from_local_file_demo\n\nChange-Id: I8255b6082ffdfd4d90a26cc7d06b9049cae27594\n'}, {'number': 4, 'created': '2023-08-23 11:54:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/587c8c1ac8e33ffd8ad61041a032b173535aaedc', 'message': 'pytest-based selenium tests add first image test\n\ntest_image_create_from_local_file_demo\n\nChange-Id: I8255b6082ffdfd4d90a26cc7d06b9049cae27594\n'}, {'number': 5, 'created': '2023-08-24 09:40:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/1a666ec621f29effcb318a02f5dae7561322ec50', 'message': 'pytest-based selenium tests add first image test\n\ntest_image_create_from_local_file_demo\n\nChange-Id: I8255b6082ffdfd4d90a26cc7d06b9049cae27594\n'}, {'number': 6, 'created': '2023-08-31 11:17:11.000000000', 'files': ['openstack_dashboard/test/selenium/widgets.py', 'openstack_dashboard/test/selenium/integration/test_images.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/9c59a3dd9879dce540e61b575f306756ff994bd3', 'message': 'pytest-based selenium tests add first image test\n\ntest_image_create_from_local_file_demo\n\nChange-Id: I8255b6082ffdfd4d90a26cc7d06b9049cae27594\n'}]",37,892133,9c59a3dd9879dce540e61b575f306756ff994bd3,44,6,6,35133,,,0,"pytest-based selenium tests add first image test

test_image_create_from_local_file_demo

Change-Id: I8255b6082ffdfd4d90a26cc7d06b9049cae27594
",git fetch https://review.opendev.org/openstack/horizon refs/changes/33/892133/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack_dashboard/test/selenium/widgets.py', 'openstack_dashboard/test/selenium/integration/test_images.py']",2,dbb029688eddc484bcdb9d0da5f4d8b9c465b2b3,,"# Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. import contextlib import os import tempfile import pytest from oslo_utils import uuidutils from openstack_dashboard.test.selenium import widgets @pytest.fixture def image_name(): return 'xhorizon_image_%s' % uuidutils.generate_uuid(dashed=False) @pytest.fixture def clear_image_demo(image_name, openstack_demo): yield None openstack_demo.delete_image( image_name, wait=True, ) def locate_angular_table_action(driver, action): all_action_list_el = driver.find_elements_by_css_selector( ""actions.hz-dynamic-table-actions > action-list"") for element in all_action_list_el: if element.text == action: return element @contextlib.contextmanager def gen_temporary_file(name='', suffix='.qcow2', size=10485760): """"""Generate temporary file with provided parameters. :param name: file name except the extension /suffix :param suffix: file extension/suffix :param size: size of the file to create, bytes are generated randomly :return: path to the generated file """""" with tempfile.NamedTemporaryFile(prefix=name, suffix=suffix) as tmp_file: tmp_file.write(os.urandom(size)) yield tmp_file.name def test_image_create_from_local_file_demo(login, driver, image_name, clear_image_demo, config): login('user', 'demo') url = '/'.join(( config.dashboard.dashboard_url, 'project', 'images', )) driver.get(url) with gen_temporary_file() as file_name: locate_angular_table_action(driver, ""Create Image"").click() wizard = driver.find_element_by_css_selector(""wizard"") wizard.find_element_by_id(""imageForm-name"").send_keys(image_name) select_element = wizard.find_element_by_xpath( ""//*[@name='image_file']"") select_element.send_keys(os.path.join(os.getcwd(), file_name)) wizard.find_element_by_id(""imageForm-format"").click() wizard.find_element_by_xpath( ""//*[@label='QCOW2 - QEMU Emulator']"").click() wizard.find_element_by_css_selector(""button.btn-primary.finish"").click() widgets.wait_till_button_spin_disappear(driver, config) messages = widgets.get_and_dismiss_messages(driver) assert f""Success: Image {image_name} was successfully"" f"" created."" in messages widgets.find_already_visible_element_by_xpath( f""//*[contains(text(),'{image_name}')]//ancestor::tr/td"" f""//*[contains(text(),'Active')]"", driver) assert True ",,105,2
openstack%2Fopenstack-helm~893166,openstack/openstack-helm,master,Ib169ca0dff1a32a055c62a1bd9e9c1636a7f6634,Fix VNC configs,MERGED,2023-08-30 12:40:59.000000000,2023-09-01 13:51:37.000000000,2023-09-01 13:48:10.000000000,"[{'_account_id': 3009}, {'_account_id': 22348}, {'_account_id': 29974}]","[{'number': 1, 'created': '2023-08-30 12:40:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f331ed357a542c8b5a3497de74936f93e954a9fa', 'message': 'Fix VNC configs\n\nChange-Id: Ib169ca0dff1a32a055c62a1bd9e9c1636a7f6634\n'}, {'number': 2, 'created': '2023-08-30 19:03:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/8198cd9786308080291cce134804750f8859c3b4', 'message': 'Fix VNC configs\n\nChange-Id: Ib169ca0dff1a32a055c62a1bd9e9c1636a7f6634\n'}, {'number': 3, 'created': '2023-08-31 22:03:51.000000000', 'files': ['nova/templates/bin/_nova-console-proxy-init.sh.tpl', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/5aa17f74d8788d17919c44260b35f969b8fb2705', 'message': 'Fix VNC configs\n\nChange-Id: Ib169ca0dff1a32a055c62a1bd9e9c1636a7f6634\n'}]",2,893166,5aa17f74d8788d17919c44260b35f969b8fb2705,16,3,3,35691,,,0,"Fix VNC configs

Change-Id: Ib169ca0dff1a32a055c62a1bd9e9c1636a7f6634
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/66/893166/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/templates/bin/_nova-console-proxy-init.sh.tpl', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml']",3,f331ed357a542c8b5a3497de74936f93e954a9fa,fix-vnc-config,version: 0.3.20,version: 0.3.19,4,3
openstack%2Fopenstack-helm~888520,openstack/openstack-helm,master,I56d7ba489746ab4f818086440a7783f4b1ecb292,Add Tacker chart,MERGED,2023-07-14 06:28:24.000000000,2023-09-01 13:50:31.000000000,2023-09-01 13:48:02.000000000,"[{'_account_id': 3009}, {'_account_id': 22348}, {'_account_id': 29974}, {'_account_id': 31857}]","[{'number': 1, 'created': '2023-07-14 06:28:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/831393ff5e717ff97790a8ee37280ac6f716cd98', 'message': 'Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 2, 'created': '2023-07-14 07:05:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a284a7d1af55837c1410ce943281fe8a6db25624', 'message': 'Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 3, 'created': '2023-07-14 07:25:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/15a481f6eb9f930143bd77ba6bbf2b991d3d31a8', 'message': 'Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 4, 'created': '2023-07-28 02:25:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/c1768822f2616de16488519d2fbc407d0d3bb918', 'message': 'Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 5, 'created': '2023-08-18 18:18:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/df6ab9d52a0c13fb1d63f17b80c79c477e0ca818', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 6, 'created': '2023-08-18 19:02:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/447426716bb9adef572937e0c44b3189e63efe67', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 7, 'created': '2023-08-18 19:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/c07f821acc99194e86c140b3b8c410f3324fac62', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 8, 'created': '2023-08-18 19:27:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/204583bfb09cdca72872631a5ac525b228845e5d', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 9, 'created': '2023-08-18 19:38:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/35e4c4ea2bcfdd31b327116c69936d271736b08d', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 10, 'created': '2023-08-18 19:44:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/27df5e3c343113b54fec16617f2415506d32c5c7', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 11, 'created': '2023-08-18 20:35:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/147adfa06e4bee41bc4d224900f55f9abd7b3554', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 12, 'created': '2023-08-18 23:45:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/97121a3216d7a5b7e62efe25d8051d357044609b', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 13, 'created': '2023-08-18 23:49:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/39c843344471dadc77d90837c5b32124cdc2577d', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 14, 'created': '2023-08-20 16:55:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/0d2297b7e8e3eec2141bace54b643428fee45616', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 15, 'created': '2023-08-20 21:11:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/875a4ca9cca31e99f8fd39f4c7505b97c2503002', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 16, 'created': '2023-08-20 21:21:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/6a0f87c338e98d868a45513416adb3b8c237fdd9', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 17, 'created': '2023-08-20 21:22:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/476ae06d02ac40157e9286cf1fdeb9d9f8938543', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 18, 'created': '2023-08-20 21:51:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9c075b35d1a509ebdf260ec929895b1dcbb3077e', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 19, 'created': '2023-08-21 12:16:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/32e7ec85761881805286ce30c1b80c0c6485fe0f', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 20, 'created': '2023-08-21 12:17:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/77e6969de54468822d09800619988ebefcd45b59', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 21, 'created': '2023-08-21 12:57:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/8f079752249fbb8e62939fcb2227384ed9a1f8af', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 22, 'created': '2023-08-21 20:30:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/5dbe70f690f5ff733a12075e984753f584290de3', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 23, 'created': '2023-08-21 20:44:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/6afd27203e79b434e0cc889ae13d56e7ebc99d49', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 24, 'created': '2023-08-21 22:35:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d0904bed4bb1136cbcd7b2170b76a8f5da11a6dd', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 25, 'created': '2023-08-22 12:13:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/6ee42530a7f7845ce424a467c85f4582464b4ae1', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 26, 'created': '2023-08-22 19:25:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/e25c3b8d5cf7ade10bdace1390ecf38c5ef122c9', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 27, 'created': '2023-08-23 21:45:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/2769c10c53ac9420fefa4523c65447eab8f73959', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 28, 'created': '2023-08-23 22:12:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/dfeed68027b92ef1be917658178d143cdb7088b0', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 29, 'created': '2023-08-24 08:52:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9c158d552d1f056fd98d80a3f37e2116061fec10', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 30, 'created': '2023-08-24 12:26:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/922d24ad95f083b91a5fe74feca9662723266151', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 31, 'created': '2023-08-24 12:55:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/85eb8e291f4bd2a8c49a38031bda282b5595be9f', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 32, 'created': '2023-08-24 14:43:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/e1de3ae068905bf6c84bc6b395a377ba5401dbad', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 33, 'created': '2023-08-24 15:36:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/2db5a1e04b14d81ce02d8a43d6cbeb7e4138af6a', 'message': 'WIP: Add Tacker chart\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 34, 'created': '2023-08-24 17:10:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b2ad1ac645bfcdd03589c5d0f1abf7b5c08b7cd5', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 35, 'created': '2023-08-24 20:40:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/03720b0d966296a78e752305c6f0438bbef1b047', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 36, 'created': '2023-08-29 20:19:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/72648a712ad0142212a0008b2ec65307222ca70e', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 37, 'created': '2023-08-29 21:07:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/b6e254db42d54ce30ed795e791d96fb290d5b8a5', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 38, 'created': '2023-08-30 13:54:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/ec799a7c183f9839fd1d2256beda7f9673869faf', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 39, 'created': '2023-08-30 13:59:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/a289a162293ea810f02ed32dc568b1e919a45cd0', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 40, 'created': '2023-08-30 14:35:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/34b88c6c5b3919af871731c93591754801f8439c', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 41, 'created': '2023-08-30 18:03:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/92e9797b36960b7b19b2b05e468489fa9519bfb5', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}, {'number': 42, 'created': '2023-09-01 05:09:07.000000000', 'files': ['tacker/values.yaml', 'tacker/requirements.yaml', 'tacker/templates/job-db-drop.yaml', 'tacker/templates/job-db-sync.yaml', 'tacker/templates/job-ks-endpoints.yaml', 'tacker/templates/bin/_db-sync.sh.tpl', 'tacker/templates/job-rabbit-init.yaml', 'zuul.d/jobs-openstack-helm.yaml', 'tacker/templates/job-db-init.yaml', 'tacker/templates/deployment-conductor.yaml', 'tacker/templates/pvc.yaml', 'tacker/templates/deployment-server.yaml', 'tacker/templates/ingress-api.yaml', 'tacker/templates/bin/_tacker_server.sh.tpl', 'tacker/templates/service-api.yaml', 'tacker/values_overrides/2023.1-ubuntu_focal.yaml', 'tacker/templates/service-ingress-api.yaml', 'releasenotes/notes/tacker.yaml', 'tools/deployment/component/tacker/tacker.sh', 'tacker/Chart.yaml', 'tacker/templates/bin/_tacker_conductor.sh.tpl', 'tacker/templates/configmap-bin.yaml', 'tacker/templates/job-ks-service.yaml', 'tacker/templates/secret-rabbitmq.yaml', 'tacker/templates/configmap-etc.yaml', 'tacker/templates/job-ks-user.yaml', 'tacker/templates/secret-keystone.yaml', 'tacker/templates/secret-db.yaml', 'zuul.d/project.yaml', 'tacker/.helmignore', 'tacker/values_overrides/zed-ubuntu_focal.yaml', 'tacker/templates/service-conductor.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/97c1c61ea2c774ac99fb255511bbf193be9545b0', 'message': 'Add Tacker chart\n\nAt this point it requires nfs provisioner that provides\nReadWriteMany volumes for vnfpackages, csar files and\nalso the same storage class is used for logs.\n\nAlso this patch adds a job that only deploys Tacker but\ndoes not tests it in any way. This job is put to the experimental\npipeline.\n\nCo-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>\n\nStory: 2010682\nTask: 47771\nChange-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292\n'}]",9,888520,97c1c61ea2c774ac99fb255511bbf193be9545b0,83,4,42,31857,,,0,"Add Tacker chart

At this point it requires nfs provisioner that provides
ReadWriteMany volumes for vnfpackages, csar files and
also the same storage class is used for logs.

Also this patch adds a job that only deploys Tacker but
does not tests it in any way. This job is put to the experimental
pipeline.

Co-authored-by: Vladimir Kozhukalov <kozhukalov@gmail.com>

Story: 2010682
Task: 47771
Change-Id: I56d7ba489746ab4f818086440a7783f4b1ecb292
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/20/888520/1 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/templates/utils/_daemonset_overrides.tpl', 'tacker/templates/utils/_to_k8s_env_secret_vars.tpl', 'tacker/values.yaml', 'tacker/templates/job-db-sync.yaml', 'tacker/templates/job-ks-endpoints.yaml', 'tacker/templates/utils/_template.tpl', 'tacker/templates/job-rabbit-init.yaml', 'tacker/templates/scripts/_ks-service.sh.tpl', 'tacker/templates/pvc-tacker.yaml', 'tacker/templates/job-db-init.yaml', 'tacker/templates/utils/_joinListWithPrefix.tpl', 'tacker/templates/utils/_host_list.tpl', 'tacker/templates/utils/_joinListWithSpace.tpl', 'tacker/templates/ingress-api.yaml', 'tacker/templates/utils/_merge.tpl', 'tacker/templates/scripts/_db-sync.sh.tpl', 'tacker/templates/service-api.yaml', 'tacker/templates/utils/_to_ini.tpl', 'tacker/templates/utils/_joinListWithComma.tpl', 'tacker/Chart.yaml', 'tacker/templates/configmap-bin.yaml', 'tacker/templates/scripts/_ks-user.sh.tpl', 'tacker/templates/utils/_configmap_templater.tpl', 'tacker/templates/utils/_hash.tpl', 'tacker/templates/secret-rabbitmq.yaml', 'tacker/templates/utils/_comma_joined_service_list.tpl', 'tacker/templates/job-ks-user.yaml', 'tacker/templates/secret-keystone.yaml', 'tacker/templates/configs/_api-paste.ini.tpl', 'tacker/templates/configs/_conductor-config.json.tpl', 'tacker/.helmignore', 'tacker/values_overrides/zed-ubuntu_focal.yaml', 'tacker/templates/job-db-drop.yaml', 'tacker/templates/utils/_joinListWithCommaAndSingleQuotes.tpl', 'tacker/templates/utils/_image_sync_list.tpl', 'tacker/templates/configs/_server-config.json.tpl', 'tacker/templates/scripts/_db-init.py.tpl', 'tacker/templates/deployment-conductor.yaml', 'tacker/templates/utils/_to_kv_list.tpl', 'tacker/templates/deployment-server.yaml', 'tacker/templates/scripts/_db-drop.py.tpl', 'tacker/templates/secret-etc.yaml', 'tacker/values_overrides/2023.1-ubuntu_focal.yaml', 'tacker/templates/scripts/_rabbit-init.sh.tpl', 'tacker/templates/service.yaml', 'tacker/templates/utils/_dependency_resolver.tpl', 'tacker/templates/utils/_to_oslo_conf.tpl', 'tacker/templates/job-ks-service.yaml', 'tacker/templates/scripts/_ks-endpoints.sh.tpl', 'tacker/templates/secret-db.yaml', 'tacker/templates/utils/_to_k8s_env_vars.tpl']",51,831393ff5e717ff97790a8ee37280ac6f716cd98,tacker,"{{/* Licensed under the Apache License, Version 2.0 (the ""License""); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. */}} {{/* abstract: | Returns key value pair formatted to be used in k8s templates as container env vars. values: | test: foo: bar usage: | {{ include ""helm-toolkit.utils.to_k8s_env_vars"" .Values.test }} return: | - name: foo value: ""bar"" */}} {{- define ""helm-toolkit.utils.to_k8s_env_vars"" -}} {{range $key, $value := . -}} {{- if kindIs ""slice"" $value -}} - name: {{ $key }} value: {{ include ""helm-toolkit.utils.joinListWithComma"" $value | quote }} {{else -}} - name: {{ $key }} value: {{ $value | quote }} {{ end -}} {{- end -}} {{- end -}} ",,3987,0
openstack%2Fpython-ironic-inspector-client~891823,openstack/python-ironic-inspector-client,master,Idb9dbe53534a6a925a3f34993bca1ca2076871d6,DNM: dummy change to test gate health,ABANDONED,2023-08-17 15:07:18.000000000,2023-09-01 13:35:10.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 15:07:18.000000000', 'files': ['ironic_inspector_client/version.py'], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/db07a4463ab31e4a2075f4fabb9ef5ac80367563', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: Idb9dbe53534a6a925a3f34993bca1ca2076871d6\n'}]",0,891823,db07a4463ab31e4a2075f4fabb9ef5ac80367563,3,1,1,17685,,,0,"DNM: dummy change to test gate health

Change-Id: Idb9dbe53534a6a925a3f34993bca1ca2076871d6
",git fetch https://review.opendev.org/openstack/python-ironic-inspector-client refs/changes/23/891823/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic_inspector_client/version.py'],1,db07a4463ab31e4a2075f4fabb9ef5ac80367563,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Fpython-brick-cinderclient-ext~891817,openstack/python-brick-cinderclient-ext,master,Icd31f190b46c8dbf20a8a66c041e5791d84ac0d1,DNM: dummy change to test gate health,ABANDONED,2023-08-17 15:04:56.000000000,2023-09-01 13:33:44.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 15:04:56.000000000', 'files': ['brick_cinderclient_ext/version.py'], 'web_link': 'https://opendev.org/openstack/python-brick-cinderclient-ext/commit/ef76f7bf52b031acad285f42e65d76b5057a159a', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: Icd31f190b46c8dbf20a8a66c041e5791d84ac0d1\n'}]",2,891817,ef76f7bf52b031acad285f42e65d76b5057a159a,7,1,1,17685,,,0,"DNM: dummy change to test gate health

Change-Id: Icd31f190b46c8dbf20a8a66c041e5791d84ac0d1
",git fetch https://review.opendev.org/openstack/python-brick-cinderclient-ext refs/changes/17/891817/1 && git format-patch -1 --stdout FETCH_HEAD,['brick_cinderclient_ext/version.py'],1,ef76f7bf52b031acad285f42e65d76b5057a159a,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Fpython-cinderclient~891819,openstack/python-cinderclient,master,I663b42d6c08f0c98c5109052d554e017cd3a4331,DNM: dummy change to test gate health,ABANDONED,2023-08-17 15:06:04.000000000,2023-09-01 13:33:12.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 15:06:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/ea1541e05f55541fcb81c161d7b0151a54b866c6', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: I663b42d6c08f0c98c5109052d554e017cd3a4331\n'}, {'number': 2, 'created': '2023-08-30 20:41:24.000000000', 'files': ['cinderclient/extension.py'], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/82e7d9eba93be29e482e4bf8274642436bf0b43e', 'message': 'DNM: dummy change to test gate health\n\nThe original failure of the python-cinderclient-functional-py39 job\nis being masked by a different failure that hopefully is addressed\nby the following:\nDepends-on: https://review.opendev.org/c/openstack/python-cinderclient/+/893288\n\nChange-Id: I663b42d6c08f0c98c5109052d554e017cd3a4331\n'}]",4,891819,82e7d9eba93be29e482e4bf8274642436bf0b43e,9,1,2,17685,,,0,"DNM: dummy change to test gate health

The original failure of the python-cinderclient-functional-py39 job
is being masked by a different failure that hopefully is addressed
by the following:
Depends-on: https://review.opendev.org/c/openstack/python-cinderclient/+/893288

Change-Id: I663b42d6c08f0c98c5109052d554e017cd3a4331
",git fetch https://review.opendev.org/openstack/python-cinderclient refs/changes/19/891819/1 && git format-patch -1 --stdout FETCH_HEAD,['cinderclient/extension.py'],1,ea1541e05f55541fcb81c161d7b0151a54b866c6,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Freleases~893009,openstack/releases,master,I78899b6d11c6b3338a626804335966c224c6e552,Release swift & python-swiftclient for Bobcat,MERGED,2023-08-29 05:43:30.000000000,2023-09-01 13:32:21.000000000,2023-09-01 13:32:21.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-29 05:43:30.000000000', 'files': ['deliverables/bobcat/swift.yaml', 'deliverables/bobcat/python-swiftclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e96484f33dc432a5498861b69101bec5d32eb036', 'message': 'Release swift & python-swiftclient for Bobcat\n\nChange-Id: I78899b6d11c6b3338a626804335966c224c6e552\n'}]",5,893009,e96484f33dc432a5498861b69101bec5d32eb036,12,3,1,15343,,,0,"Release swift & python-swiftclient for Bobcat

Change-Id: I78899b6d11c6b3338a626804335966c224c6e552
",git fetch https://review.opendev.org/openstack/releases refs/changes/09/893009/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/bobcat/swift.yaml', 'deliverables/bobcat/python-swiftclient.yaml']",2,e96484f33dc432a5498861b69101bec5d32eb036,bobcat-milestone-3, - version: 4.4.0 projects: - repo: openstack/python-swiftclient hash: 54fbfa8bc9c10feb48fbce843d6ba6fcf6533ece branches: - name: stable/2023.2 location: 4.4.0,,15,0
openstack%2Fos-vif~891812,openstack/os-vif,master,If5b69c290f76a50938455b4f30990deeb206982a,DNM: dummy change to test gate health,ABANDONED,2023-08-17 15:03:32.000000000,2023-09-01 13:31:43.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 15:03:32.000000000', 'files': ['vif_plug_noop/noop.py'], 'web_link': 'https://opendev.org/openstack/os-vif/commit/9fa4e80cd03cabb1ed216a27a9295495308c6e20', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: If5b69c290f76a50938455b4f30990deeb206982a\n'}]",2,891812,9fa4e80cd03cabb1ed216a27a9295495308c6e20,7,1,1,17685,,,0,"DNM: dummy change to test gate health

Change-Id: If5b69c290f76a50938455b4f30990deeb206982a
",git fetch https://review.opendev.org/openstack/os-vif refs/changes/12/891812/1 && git format-patch -1 --stdout FETCH_HEAD,['vif_plug_noop/noop.py'],1,9fa4e80cd03cabb1ed216a27a9295495308c6e20,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Freleases~892959,openstack/releases,master,I3d88a77624f325e1e31dd648872a7ea33fa54aa1,Release final python-swiftclient for 2023.2 Bobcat,ABANDONED,2023-08-28 13:24:43.000000000,2023-09-01 13:25:42.000000000,,"[{'_account_id': 15343}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:24:43.000000000', 'files': ['deliverables/bobcat/python-swiftclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/eb8b356289b72f70d5c59966f1bc279847dbcd6a', 'message': 'Release final python-swiftclient for 2023.2 Bobcat\n\nThis is a release for python-swiftclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 4.3.0..54fbfa8\n54fbfa8 ChangeLog for 4.4.0\neb5d5d4 Clean up CI jobs\nff8731b Remove pypy from bindep.txt\n9331880 tests: Fix timeout assertion for py36, py37\n90f5650 Declare py311 support\n\nChange-Id: I3d88a77624f325e1e31dd648872a7ea33fa54aa1\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892959,eb8b356289b72f70d5c59966f1bc279847dbcd6a,4,3,1,28522,,,0,"Release final python-swiftclient for 2023.2 Bobcat

This is a release for python-swiftclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 4.3.0..54fbfa8
54fbfa8 ChangeLog for 4.4.0
eb5d5d4 Clean up CI jobs
ff8731b Remove pypy from bindep.txt
9331880 tests: Fix timeout assertion for py36, py37
90f5650 Declare py311 support

Change-Id: I3d88a77624f325e1e31dd648872a7ea33fa54aa1
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/59/892959/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-swiftclient.yaml'],1,eb8b356289b72f70d5c59966f1bc279847dbcd6a,bobcat-milestone-3, - version: 4.3.1 projects: - repo: openstack/python-swiftclient hash: 54fbfa8bc9c10feb48fbce843d6ba6fcf6533ece,,4,0
openstack%2Fkeystone~892865,openstack/keystone,stable/xena,I8d0bb2438b23227b5a66b94af6f8e198084fcd8d,Force algo specific maximum length & Properly trimm bcrypt hashed passwords,MERGED,2023-08-28 09:06:08.000000000,2023-09-01 13:20:45.000000000,2023-09-01 13:19:11.000000000,"[{'_account_id': 14250}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-28 09:06:08.000000000', 'files': ['keystone/tests/unit/common/test_utils.py', 'keystone/conf/identity.py', 'releasenotes/notes/max-password-length-truncation-and-warning-bd69090315ec18a7.yaml', 'releasenotes/notes/bcrypt_truncation_fix-674dc5d7f1e776f2.yaml', 'keystone/common/password_hashing.py', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/keystone/commit/a38ba2a70cdf7e72c0f17bb80d895ccc1e39a010', 'message': 'Force algo specific maximum length & Properly trimm bcrypt hashed passwords\n\nThis is the squash of 2 patches related to bcrypt hashing settings.\n\n1.\nForce algo specific maximum length\n\nThe bcrypt algorithm that we use for password hashing silently\nlength limits the size of the password that is hashed giving the\nuser a false sense of security [0].  This patch adds a check\nin the verify_length_and_trunc_password function for the hash in\nuse and updates the max_length accordingly, this will override\nthe configured value and log a warning if the password is truncated.\n\nConflicts:\n* tox.ini\n\n[0]: https://passlib.readthedocs.io/en/stable/lib/passlib.hash.bcrypt.html#security-issues\n\n2.\nProperly trimm bcrypt hashed passwords\n\nbcrypt  hashing algorythm has a limitation on length of passwords it\ncan hash on 72 bytes. In [1] a password trimm to 54 symbols has been\nimplemented, which resulted in password being invalidated after the\nkeystone upgrade, since passwords are trimmed differently by bcrypt\nitself, as well as len(str()) is not always equal to\nlen(str().encode()) as trimming should be done based on bytes and not\nstring itself.\n\nWith the change we return a byte object from\n`verify_length_and_trunc_password`, so it does not need to\nbe encoded afterwards, since we need to strip based on bytes\nrather then on length of the string.\n\n[1] https://review.opendev.org/c/openstack/keystone/+/828595\n\nCloses-Bug: #2028809\nRelated-Bug: #1901891\noriginal change id: Iea95a3c2df041a0046647b3d3dadead1a6d054d1\n(cherry picked from commit 6730c761d18aa547998f2add833c13f45f257fe7)\n(cherry picked from commit 65f1fb6b4a54386f473369b05c8d10d77fb6710c)\n\nCloses-bug: #1901891\nChange-Id: I8d0bb2438b23227b5a66b94af6f8e198084fcd8d\n(cherry picked from commit 3288af579de8ee312c36fb78ac9309ce8c554827)\n(cherry picked from commit 1b3536a7a4d72e7f7b95cc1874a450accad3ec8d)\n(cherry picked from commit 7852ca24a4eb86cb271ef7ec5e07f8f9c97f926d)\n'}]",1,892865,a38ba2a70cdf7e72c0f17bb80d895ccc1e39a010,11,4,1,8313,,,0,"Force algo specific maximum length & Properly trimm bcrypt hashed passwords

This is the squash of 2 patches related to bcrypt hashing settings.

1.
Force algo specific maximum length

The bcrypt algorithm that we use for password hashing silently
length limits the size of the password that is hashed giving the
user a false sense of security [0].  This patch adds a check
in the verify_length_and_trunc_password function for the hash in
use and updates the max_length accordingly, this will override
the configured value and log a warning if the password is truncated.

Conflicts:
* tox.ini

[0]: https://passlib.readthedocs.io/en/stable/lib/passlib.hash.bcrypt.html#security-issues

2.
Properly trimm bcrypt hashed passwords

bcrypt  hashing algorythm has a limitation on length of passwords it
can hash on 72 bytes. In [1] a password trimm to 54 symbols has been
implemented, which resulted in password being invalidated after the
keystone upgrade, since passwords are trimmed differently by bcrypt
itself, as well as len(str()) is not always equal to
len(str().encode()) as trimming should be done based on bytes and not
string itself.

With the change we return a byte object from
`verify_length_and_trunc_password`, so it does not need to
be encoded afterwards, since we need to strip based on bytes
rather then on length of the string.

[1] https://review.opendev.org/c/openstack/keystone/+/828595

Closes-Bug: #2028809
Related-Bug: #1901891
original change id: Iea95a3c2df041a0046647b3d3dadead1a6d054d1
(cherry picked from commit 6730c761d18aa547998f2add833c13f45f257fe7)
(cherry picked from commit 65f1fb6b4a54386f473369b05c8d10d77fb6710c)

Closes-bug: #1901891
Change-Id: I8d0bb2438b23227b5a66b94af6f8e198084fcd8d
(cherry picked from commit 3288af579de8ee312c36fb78ac9309ce8c554827)
(cherry picked from commit 1b3536a7a4d72e7f7b95cc1874a450accad3ec8d)
(cherry picked from commit 7852ca24a4eb86cb271ef7ec5e07f8f9c97f926d)
",git fetch https://review.opendev.org/openstack/keystone refs/changes/65/892865/1 && git format-patch -1 --stdout FETCH_HEAD,"['keystone/tests/unit/common/test_utils.py', 'keystone/conf/identity.py', 'releasenotes/notes/max-password-length-truncation-and-warning-bd69090315ec18a7.yaml', 'releasenotes/notes/bcrypt_truncation_fix-674dc5d7f1e776f2.yaml', 'keystone/common/password_hashing.py', 'tox.ini']",6,a38ba2a70cdf7e72c0f17bb80d895ccc1e39a010,bug/1901891,per-file-ignores = # URL lines too long keystone/common/password_hashing.py: E501,,64,11
openstack%2Fnova~893489,openstack/nova,master,Ie7ce1e6312dc29c40e2f626c8c922dca4b857f9c,Addis a try-catch for cinder unavailability.,ABANDONED,2023-09-01 10:50:11.000000000,2023-09-01 13:05:47.000000000,,"[{'_account_id': 7166}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 10:50:11.000000000', 'files': ['nova/compute/manager.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/abd61ab78a2a9a8b8b7b78beb213d67a5a24fc26', 'message': 'Addis a try-catch for cinder unavailability.\n\nadds a try-catch block to check for the cinder accessible exception.\nand skip the stale attachment deletion.\n\nRelated-Bug: 2033752\nChange-Id: Ie7ce1e6312dc29c40e2f626c8c922dca4b857f9c\n'}]",1,893489,abd61ab78a2a9a8b8b7b78beb213d67a5a24fc26,6,2,1,34860,,,0,"Addis a try-catch for cinder unavailability.

adds a try-catch block to check for the cinder accessible exception.
and skip the stale attachment deletion.

Related-Bug: 2033752
Change-Id: Ie7ce1e6312dc29c40e2f626c8c922dca4b857f9c
",git fetch https://review.opendev.org/openstack/nova refs/changes/89/893489/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/compute/manager.py'],1,abd61ab78a2a9a8b8b7b78beb213d67a5a24fc26,cinderapi-check," :param bdms: BlockDeviceMappingList list object. try: cinder_attachments = self.volume_api.attachment_get_all( context, instance.uuid) cinder_attachments = [each['id'] for each in cinder_attachments] if len(set(cinder_attachments) - set(nova_attachments)): LOG.info( ""Removing stale volume attachments of instance from "" ""Cinder"", instance=instance) for each_attach in set(cinder_attachments) - set(nova_attachments): # delete only cinder known attachments, from cinder DB. LOG.debug( f""Removing attachment '{each_attach}'"", instance=instance) self.volume_api.attachment_delete(context, each_attach) except (cinder_exception.EndpointNotFound, keystone_exception.EndpointNotFound) as exc: f""Skipping removing stale volume attachment from Cinder "" f""because: {exc}"", instance=instance) except Exception as exc: LOG.info( f""Skipping removing stale volume attachment from Cinder "" f""because: {exc}"", instance=instance)"," :param instance: BlockDeviceMappingList list object. cinder_attachments = self.volume_api.attachment_get_all( context, instance.uuid) cinder_attachments = [each['id'] for each in cinder_attachments] if len(set(cinder_attachments) - set(nova_attachments)): ""Removing stale volume attachments of instance from "" ""Cinder"", instance=instance) for each_attach in set(cinder_attachments) - set(nova_attachments): # delete only cinder known attachments, from cinder DB. LOG.debug( f""Removing attachment '{each_attach}'"", instance=instance) self.volume_api.attachment_delete(context, each_attach)",23,12
openstack%2Fneutron~890189,openstack/neutron,master,I5e011a2916e9c57a5b951a6ae77973597a4bb55e,DNM just test for the neutron-fullstack tests,ABANDONED,2023-08-01 10:39:15.000000000,2023-09-01 12:58:56.000000000,,"[{'_account_id': 9845}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-01 10:39:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ffd06c3fc36a316939d51676dc0e982d3f920f2b', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 2, 'created': '2023-08-01 10:40:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/cef0fa760d47320567eaa94b3e2d4169f278fc30', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 3, 'created': '2023-08-01 10:43:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0be53469dbce3d1e2f47f44f1c03a19e3a2f9cb0', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 4, 'created': '2023-08-10 10:18:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/dab770b012f93bdb16da792d6e37170771606d20', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 5, 'created': '2023-08-10 14:47:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a11c71ea976e99cedebc3deb1bd791d2ba5fa0ec', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 6, 'created': '2023-08-11 07:00:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/85773388645f70728acc0128f38815a1c7b5bd24', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 7, 'created': '2023-08-23 10:38:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f841c2c8db0c8e3f69369725231d1551452b0edf', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 8, 'created': '2023-08-29 17:54:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/bb73711fa37a9d15f5c205314497a93abc14348e', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}, {'number': 9, 'created': '2023-08-30 10:21:22.000000000', 'files': ['neutron/db/securitygroups_db.py', 'zuul.d/base.yaml', 'zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/28313ce5fbcbc58187e4a3fecaeb28bbee2971cf', 'message': 'DNM just test for the neutron-fullstack tests\n\nChange-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e\n'}]",5,890189,28313ce5fbcbc58187e4a3fecaeb28bbee2971cf,27,2,9,11975,,,0,"DNM just test for the neutron-fullstack tests

Change-Id: I5e011a2916e9c57a5b951a6ae77973597a4bb55e
",git fetch https://review.opendev.org/openstack/neutron refs/changes/89/890189/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,ffd06c3fc36a316939d51676dc0e982d3f920f2b,bug/1983053, - neutron-fullstack-with-uwsgi-2: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-3: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-4: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-5: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-6: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-7: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-8: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-9: parent: neutron-fullstack-with-uwsgi - neutron-fullstack-with-uwsgi-10: parent: neutron-fullstack-with-uwsgi, templates: - neutron-tempest-plugin-jobs - openstack-cover-jobs - openstack-python3-jobs - openstack-python3-jobs-arm64 - publish-openstack-docs-pti - periodic-stable-jobs - check-requirements - release-notes-jobs-python3 - neutron-experimental-jobs - neutron-periodic-jobs - neutron-tox-override-jobs - neutron-skip-level-jobs - neutron-functional-with-uwsgi - neutron-ovs-grenade-multinode - neutron-ovs-grenade-dvr-multinode - neutron-ovs-tempest-multinode-full - neutron-ovs-tempest-dvr-ha-multinode-full - neutron-ovn-tempest-ipv6-only-ovs-release - neutron-ovs-rally-task - neutron-ovn-rally-task - tempest-integrated-networking: irrelevant-files: &ovn-irrelevant-files - ^\.pylintrc$ - ^test-requirements.txt$ - ^releasenotes/.*$ - ^doc/.*$ - ^setup.cfg$ - ^.*\.conf\.sample$ - ^.*\.rst$ - ^neutron/locale/.*$ - ^neutron/tests/.*$ - ^tools/.*$ - ^tox.ini$ - ^neutron/agent/dhcp/.*$ - ^neutron/agent/l2/.*$ - ^neutron/agent/l3/.*$ - ^neutron/agent/metadata/.*$ - ^neutron/agent/windows/.*$ - ^neutron/agent/dhcp_agent.py - ^neutron/agent/l3_agent.py - ^neutron/agent/metadata_agent.py - ^neutron/agent/resource_cache.py - ^neutron/agent/rpc.py - ^neutron/agent/securitygroup_rpc.py - ^neutron/plugins/ml2/drivers/linuxbridge/.*$ - ^neutron/plugins/ml2/drivers/openvswitch/.*$ - ^neutron/plugins/ml2/drivers/macvtap/.*$ - ^neutron/plugins/ml2/drivers/mech_sriov/.*$ - ^neutron/services/qos/drivers/linuxbridge/.*$ - ^neutron/services/qos/drivers/openvswitch/.*$ - ^neutron/services/trunk/drivers/linuxbridge/.*$ - ^neutron/services/trunk/drivers/openvswitch/.*$ - ^neutron/scheduler/.*$ - ^roles/.*functional.*$ - ^playbooks/.*functional.*$ - ^zuul.d/(?!(project)).*\.yaml gate: jobs: - neutron-functional-with-uwsgi - neutron-fullstack-with-uwsgi - neutron-ovs-tempest-multinode-full - neutron-ovs-grenade-multinode - neutron-ovs-grenade-dvr-multinode - neutron-ovn-tempest-ipv6-only-ovs-release - tempest-integrated-networking: irrelevant-files: *ovn-irrelevant-files,18,68
openstack%2Fnova~893470,openstack/nova,stable/zed,I8619d898f68250bf70a17b1e6b8b0c249245b43b,Add function to get all attachments in Cinder.API module,ABANDONED,2023-09-01 06:47:08.000000000,2023-09-01 12:56:55.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 06:47:08.000000000', 'files': ['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', 'nova/tests/fixtures/cinder.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a80cee8266dea5ed57a5a19d3ea67aa0baf4f049', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n(cherry picked from commit 32ed205794e0676f9555b084b9774ab08a7d96ce)\n(cherry picked from commit b982b8124fa72b2ef4f7d8c189bf2be0d530dafd)\n'}]",0,893470,a80cee8266dea5ed57a5a19d3ea67aa0baf4f049,5,1,1,34860,,,0,"Add function to get all attachments in Cinder.API module

- Added function to get all attachments by instance or volume id from Cinder in Cinder.API
- Updated CinderFixture to add mock get_all_attachment functionality.
- Added unit tests get_all_attachments.

Related-Bug: 2019078

Change-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b
(cherry picked from commit 32ed205794e0676f9555b084b9774ab08a7d96ce)
(cherry picked from commit b982b8124fa72b2ef4f7d8c189bf2be0d530dafd)
",git fetch https://review.opendev.org/openstack/nova refs/changes/70/893470/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', 'nova/tests/fixtures/cinder.py']",3,a80cee8266dea5ed57a5a19d3ea67aa0baf4f049,dangling-volumes," self.useFixture(fixtures.MockPatch( 'nova.volume.cinder.API.attachment_get_all', side_effect=self.fake_attachment_get_all, autospec=False)) def fake_attachment_get_all( self, context, instance_id=None, volume_id=None): if not instance_id and not volume_id: raise exception.InvalidRequest( ""Either instance or volume id must be passed."") if volume_id in self.volume_to_attachment: return self.volume_to_attachment[volume_id] all_attachments = [] for _, attachments in self.volume_to_attachment.items(): all_attachments.extend( [attach for attach in attachments.values() if instance_id == attach['instance_uuid']]) return all_attachments def create_vol_attachment(self, volume_id, instance_id): attachment_id = uuidutils.generate_uuid() if self.attachment_error_id is not None: attachment_id = self.attachment_error_id attachment = {'id': attachment_id} self.volume_to_attachment[volume_id][attachment_id] = { 'id': attachment_id, 'instance_uuid': instance_id, } return attachment def get_vol_attachment(self, _id): for _, attachments in self.volume_to_attachment.items(): for attachment_id in attachments: if _id == attachment_id: # return because attachment id is unique return attachments[attachment_id] def delete_vol_attachment(self, vol_id): del self.volume_to_attachment[vol_id]",,112,0
openstack%2Fnova~893471,openstack/nova,stable/zed,Ieb76b00600acc9c7610546f5a1afab5b65903825,Reproducer for dangling bdms,ABANDONED,2023-09-01 06:47:08.000000000,2023-09-01 12:56:48.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 06:47:08.000000000', 'files': ['nova/tests/functional/integrated_helpers.py', 'nova/tests/functional/compute/test_attached_volumes.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/7bedc050ebeeab23512fa1e1213b0d26c0f4df41', 'message': 'Reproducer for dangling bdms\n\n- Added reproducer test for dangling BDMs\n\nRelated-Bug: 2019078\nChange-Id: Ieb76b00600acc9c7610546f5a1afab5b65903825\n(cherry picked from commit c33a9ccf4c2c996f5bb2e43fb6107072a9d2c66e)\n(cherry picked from commit 7b8c0986a5df3e698b3cc9d26f7a69e0105c9116)\n'}]",0,893471,7bedc050ebeeab23512fa1e1213b0d26c0f4df41,5,1,1,34860,,,0,"Reproducer for dangling bdms

- Added reproducer test for dangling BDMs

Related-Bug: 2019078
Change-Id: Ieb76b00600acc9c7610546f5a1afab5b65903825
(cherry picked from commit c33a9ccf4c2c996f5bb2e43fb6107072a9d2c66e)
(cherry picked from commit 7b8c0986a5df3e698b3cc9d26f7a69e0105c9116)
",git fetch https://review.opendev.org/openstack/nova refs/changes/71/893471/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/integrated_helpers.py', 'nova/tests/functional/compute/test_attached_volumes.py']",2,7bedc050ebeeab23512fa1e1213b0d26c0f4df41,dangling-volumes,"# Copyright 2023, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova import context from nova import objects from nova.tests.functional import integrated_helpers from nova.tests.functional.libvirt import base class TestAttachedVolumes( base.ServersTestBase, integrated_helpers.InstanceHelperMixin): microversion = 'latest' def setUp(self): super(TestAttachedVolumes, self).setUp() self.admin_api = self.api_fixture.admin_api self.start_compute() def _get_bdm_list(self, server): ctxt = context.get_admin_context() bdms = objects.BlockDeviceMappingList.get_by_instance_uuid( ctxt, server['id']) return [( bdm.volume_id, bdm.attachment_id) for bdm in bdms if bdm.volume_id] def test_delete_stale_attachment_from_nova(self): volume_id = 'aeb9b5f4-1fe9-4964-ab65-5e168be4de8e' # create a server server = self._create_server(networks=[]) server = self._attach_volumes(server, [volume_id]) # verify if volume attachment created at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(1, len(attached_volume_ids)) # verify if volume attachment created at nova bdm_list = self._get_bdm_list(server) self.assertEqual(1, len(bdm_list)) self.assertEqual(volume_id, bdm_list[0][0]) # delete volume attachment using cinder api self.cinder.delete_vol_attachment(bdm_list[0][0]) # rebooting server should remove stale attachments server = self._reboot_server(server, hard=True) # verify if volume attachment is present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(0, len(attached_volume_ids)) # verify if volume attachment is present at nova bdm_list = self._get_bdm_list(server) # TODO(auniyal): Reboot should remove stale bdms # after fix bdm should not have any volume self.assertEqual(1, len(bdm_list)) self.assertEqual(volume_id, bdm_list[0][0]) def test_delete_multiple_stale_attachment_from_nova(self): volumes = [ '543c6517-e1f7-4327-968d-7be8246b798a', 'f37d7501-f1dd-428f-a1f8-6a9eb951f247', '45990290-ef3d-410c-b8cc-45f7830b5a8f', '6addafaf-9dc8-470e-88d2-288d0daa616c', ] # create a server server = self._create_server(networks='none') server = self._attach_volumes(server, volumes) # verify if volume attachment created at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(4, len(attached_volume_ids)) # verify if volume attachment created at nova bdm_list = self._get_bdm_list(server) bdm_attc_vols = set([bdm[0] for bdm in bdm_list]) self.assertEqual(4, len(bdm_list)) self.assertEqual(set(volumes), set(bdm_attc_vols)) # delete 2 volume attachment using cinder api self.cinder.delete_vol_attachment(bdm_list[1][0]) self.cinder.delete_vol_attachment(bdm_list[3][0]) server = self._reboot_server(server, hard=True) # verify if volume attachment is present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(2, len(attached_volume_ids)) # verify if volume attachment is present at nova bdm_list_2 = self._get_bdm_list(server) bdm_attc_vols = [bdm[0] for bdm in bdm_list_2] # after fix only 2 volumes should be attached instead 4 self.assertEqual(4, len(bdm_list_2)) self.assertIn(bdm_list[0][0], bdm_attc_vols) self.assertIn(bdm_list[1][0], bdm_attc_vols) self.assertIn(bdm_list[2][0], bdm_attc_vols) self.assertIn(bdm_list[3][0], bdm_attc_vols) def test_delete_multiple_stale_attachment_from_cinder(self): volume_id = 'aeb9b5f4-1fe9-4964-ab65-5e168be4de8e' server = self._create_server(networks=[]) # this will create a valid attachments server = self._attach_volumes(server, [volume_id]) attachments = 4 # create stale attachments at cinder self._create_vol_attachments_by_cinder(volume_id, server, attachments) # verify if volume attachment created at cinder # get attachment id by server from cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) # here we are checking with +1 because we had attached # a valid attachment at L145. # this is to differentiate that reboot should not remove # a valid attachment and only remove dangling one. self.assertEqual(attachments + 1, len(attached_volume_ids)) for _id in attached_volume_ids: _ = self.cinder.get_vol_attachment(_id) self.assertEqual(_['instance_uuid'], server['id']) # verify if nova aware of new attachments bdm_list = self._get_bdm_list(server) self.assertEqual(1, len(bdm_list)) # rebooting server should remove stale attachments server = self._reboot_server(server, hard=True) # TODO(auniyal): Reboot should remove only stale attachments # from cinder too # verify if how many volume attachments are present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(attachments + 1, len(attached_volume_ids)) ",,185,0
openstack%2Fnova~893472,openstack/nova,stable/zed,Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29,Delete dangling bdms,ABANDONED,2023-09-01 06:47:08.000000000,2023-09-01 12:56:40.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 06:47:08.000000000', 'files': ['nova/tests/functional/test_server_faults.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'releasenotes/notes/delete-dangling-volumes-2615100187fe29fb.yaml', 'doc/source/admin/manage-volumes.rst', 'nova/compute/manager.py', 'nova/tests/functional/compute/test_attached_volumes.py', 'nova/tests/functional/regressions/test_bug_1835822.py', 'nova/tests/functional/test_instance_actions.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/fb19d3f5f969ba981b56c1414dae7c75ea7481c9', 'message': 'Delete dangling bdms\n\nOn reboot, check the instance volume status on the cinder side.\nVerify if volume exists and cinder has an attachment ID, else\ndelete its BDMS data from nova DB and vice versa.\n\nUpdated existing test cases to use CinderFixture while rebooting as\nreboot calls get_all_attachments\n\nImplements: blueprint https://blueprints.launchpad.net/nova/+spec/cleanup-dangling-volume-attachments\nCloses-Bug: 2019078\n\nChange-Id: Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29\n(cherry picked from commit 9d5935d007e5a50a4fd61ad033cd0135fdcaa2eb)\n(cherry picked from commit 4b1794e7c6bf8e9a68a29a0eb2925e8103144fe6)\n'}]",0,893472,fb19d3f5f969ba981b56c1414dae7c75ea7481c9,5,1,1,34860,,,0,"Delete dangling bdms

On reboot, check the instance volume status on the cinder side.
Verify if volume exists and cinder has an attachment ID, else
delete its BDMS data from nova DB and vice versa.

Updated existing test cases to use CinderFixture while rebooting as
reboot calls get_all_attachments

Implements: blueprint https://blueprints.launchpad.net/nova/+spec/cleanup-dangling-volume-attachments
Closes-Bug: 2019078

Change-Id: Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29
(cherry picked from commit 9d5935d007e5a50a4fd61ad033cd0135fdcaa2eb)
(cherry picked from commit 4b1794e7c6bf8e9a68a29a0eb2925e8103144fe6)
",git fetch https://review.opendev.org/openstack/nova refs/changes/72/893472/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_server_faults.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'releasenotes/notes/delete-dangling-volumes-2615100187fe29fb.yaml', 'doc/source/admin/manage-volumes.rst', 'nova/compute/manager.py', 'nova/tests/functional/compute/test_attached_volumes.py', 'nova/tests/functional/regressions/test_bug_1835822.py', 'nova/tests/functional/test_instance_actions.py']",9,fb19d3f5f969ba981b56c1414dae7c75ea7481c9,dangling-volumes, self.useFixture(nova_fixtures.CinderFixture(self)),,233,15
openstack%2Fnova~893465,openstack/nova,stable/2023.1,I8619d898f68250bf70a17b1e6b8b0c249245b43b,Add function to get all attachments in Cinder.API module,ABANDONED,2023-09-01 06:33:56.000000000,2023-09-01 12:56:02.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 06:33:56.000000000', 'files': ['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', 'nova/tests/fixtures/cinder.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/b982b8124fa72b2ef4f7d8c189bf2be0d530dafd', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n(cherry picked from commit 32ed205794e0676f9555b084b9774ab08a7d96ce)\n'}]",0,893465,b982b8124fa72b2ef4f7d8c189bf2be0d530dafd,5,1,1,34860,,,0,"Add function to get all attachments in Cinder.API module

- Added function to get all attachments by instance or volume id from Cinder in Cinder.API
- Updated CinderFixture to add mock get_all_attachment functionality.
- Added unit tests get_all_attachments.

Related-Bug: 2019078

Change-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b
(cherry picked from commit 32ed205794e0676f9555b084b9774ab08a7d96ce)
",git fetch https://review.opendev.org/openstack/nova refs/changes/65/893465/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', 'nova/tests/fixtures/cinder.py']",3,b982b8124fa72b2ef4f7d8c189bf2be0d530dafd,dangling-volumes," self.useFixture(fixtures.MockPatch( 'nova.volume.cinder.API.attachment_get_all', side_effect=self.fake_attachment_get_all, autospec=False)) def fake_attachment_get_all( self, context, instance_id=None, volume_id=None): if not instance_id and not volume_id: raise exception.InvalidRequest( ""Either instance or volume id must be passed."") if volume_id in self.volume_to_attachment: return self.volume_to_attachment[volume_id] all_attachments = [] for _, attachments in self.volume_to_attachment.items(): all_attachments.extend( [attach for attach in attachments.values() if instance_id == attach['instance_uuid']]) return all_attachments def create_vol_attachment(self, volume_id, instance_id): attachment_id = uuidutils.generate_uuid() if self.attachment_error_id is not None: attachment_id = self.attachment_error_id attachment = {'id': attachment_id} self.volume_to_attachment[volume_id][attachment_id] = { 'id': attachment_id, 'instance_uuid': instance_id, } return attachment def get_vol_attachment(self, _id): for _, attachments in self.volume_to_attachment.items(): for attachment_id in attachments: if _id == attachment_id: # return because attachment id is unique return attachments[attachment_id] def delete_vol_attachment(self, vol_id): del self.volume_to_attachment[vol_id]",,112,0
openstack%2Fnova~893466,openstack/nova,stable/2023.1,Ieb76b00600acc9c7610546f5a1afab5b65903825,Reproducer for dangling bdms,ABANDONED,2023-09-01 06:33:56.000000000,2023-09-01 12:55:45.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 06:33:56.000000000', 'files': ['nova/tests/functional/integrated_helpers.py', 'nova/tests/functional/compute/test_attached_volumes.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/7b8c0986a5df3e698b3cc9d26f7a69e0105c9116', 'message': 'Reproducer for dangling bdms\n\n- Added reproducer test for dangling BDMs\n\nRelated-Bug: 2019078\nChange-Id: Ieb76b00600acc9c7610546f5a1afab5b65903825\n(cherry picked from commit c33a9ccf4c2c996f5bb2e43fb6107072a9d2c66e)\n'}]",0,893466,7b8c0986a5df3e698b3cc9d26f7a69e0105c9116,5,1,1,34860,,,0,"Reproducer for dangling bdms

- Added reproducer test for dangling BDMs

Related-Bug: 2019078
Change-Id: Ieb76b00600acc9c7610546f5a1afab5b65903825
(cherry picked from commit c33a9ccf4c2c996f5bb2e43fb6107072a9d2c66e)
",git fetch https://review.opendev.org/openstack/nova refs/changes/66/893466/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/integrated_helpers.py', 'nova/tests/functional/compute/test_attached_volumes.py']",2,7b8c0986a5df3e698b3cc9d26f7a69e0105c9116,dangling-volumes,"# Copyright 2023, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova import context from nova import objects from nova.tests.functional import integrated_helpers from nova.tests.functional.libvirt import base class TestAttachedVolumes( base.ServersTestBase, integrated_helpers.InstanceHelperMixin): microversion = 'latest' def setUp(self): super(TestAttachedVolumes, self).setUp() self.admin_api = self.api_fixture.admin_api self.start_compute() def _get_bdm_list(self, server): ctxt = context.get_admin_context() bdms = objects.BlockDeviceMappingList.get_by_instance_uuid( ctxt, server['id']) return [( bdm.volume_id, bdm.attachment_id) for bdm in bdms if bdm.volume_id] def test_delete_stale_attachment_from_nova(self): volume_id = 'aeb9b5f4-1fe9-4964-ab65-5e168be4de8e' # create a server server = self._create_server(networks=[]) server = self._attach_volumes(server, [volume_id]) # verify if volume attachment created at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(1, len(attached_volume_ids)) # verify if volume attachment created at nova bdm_list = self._get_bdm_list(server) self.assertEqual(1, len(bdm_list)) self.assertEqual(volume_id, bdm_list[0][0]) # delete volume attachment using cinder api self.cinder.delete_vol_attachment(bdm_list[0][0]) # rebooting server should remove stale attachments server = self._reboot_server(server, hard=True) # verify if volume attachment is present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(0, len(attached_volume_ids)) # verify if volume attachment is present at nova bdm_list = self._get_bdm_list(server) # TODO(auniyal): Reboot should remove stale bdms # after fix bdm should not have any volume self.assertEqual(1, len(bdm_list)) self.assertEqual(volume_id, bdm_list[0][0]) def test_delete_multiple_stale_attachment_from_nova(self): volumes = [ '543c6517-e1f7-4327-968d-7be8246b798a', 'f37d7501-f1dd-428f-a1f8-6a9eb951f247', '45990290-ef3d-410c-b8cc-45f7830b5a8f', '6addafaf-9dc8-470e-88d2-288d0daa616c', ] # create a server server = self._create_server(networks='none') server = self._attach_volumes(server, volumes) # verify if volume attachment created at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(4, len(attached_volume_ids)) # verify if volume attachment created at nova bdm_list = self._get_bdm_list(server) bdm_attc_vols = set([bdm[0] for bdm in bdm_list]) self.assertEqual(4, len(bdm_list)) self.assertEqual(set(volumes), set(bdm_attc_vols)) # delete 2 volume attachment using cinder api self.cinder.delete_vol_attachment(bdm_list[1][0]) self.cinder.delete_vol_attachment(bdm_list[3][0]) server = self._reboot_server(server, hard=True) # verify if volume attachment is present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(2, len(attached_volume_ids)) # verify if volume attachment is present at nova bdm_list_2 = self._get_bdm_list(server) bdm_attc_vols = [bdm[0] for bdm in bdm_list_2] # after fix only 2 volumes should be attached instead 4 self.assertEqual(4, len(bdm_list_2)) self.assertIn(bdm_list[0][0], bdm_attc_vols) self.assertIn(bdm_list[1][0], bdm_attc_vols) self.assertIn(bdm_list[2][0], bdm_attc_vols) self.assertIn(bdm_list[3][0], bdm_attc_vols) def test_delete_multiple_stale_attachment_from_cinder(self): volume_id = 'aeb9b5f4-1fe9-4964-ab65-5e168be4de8e' server = self._create_server(networks=[]) # this will create a valid attachments server = self._attach_volumes(server, [volume_id]) attachments = 4 # create stale attachments at cinder self._create_vol_attachments_by_cinder(volume_id, server, attachments) # verify if volume attachment created at cinder # get attachment id by server from cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) # here we are checking with +1 because we had attached # a valid attachment at L145. # this is to differentiate that reboot should not remove # a valid attachment and only remove dangling one. self.assertEqual(attachments + 1, len(attached_volume_ids)) for _id in attached_volume_ids: _ = self.cinder.get_vol_attachment(_id) self.assertEqual(_['instance_uuid'], server['id']) # verify if nova aware of new attachments bdm_list = self._get_bdm_list(server) self.assertEqual(1, len(bdm_list)) # rebooting server should remove stale attachments server = self._reboot_server(server, hard=True) # TODO(auniyal): Reboot should remove only stale attachments # from cinder too # verify if how many volume attachments are present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(attachments + 1, len(attached_volume_ids)) ",,185,0
openstack%2Fnova~893467,openstack/nova,stable/2023.1,Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29,Delete dangling bdms,ABANDONED,2023-09-01 06:33:56.000000000,2023-09-01 12:55:37.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 06:33:56.000000000', 'files': ['nova/tests/functional/test_server_faults.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'releasenotes/notes/delete-dangling-volumes-2615100187fe29fb.yaml', 'doc/source/admin/manage-volumes.rst', 'nova/compute/manager.py', 'nova/tests/functional/compute/test_attached_volumes.py', 'nova/tests/functional/regressions/test_bug_1835822.py', 'nova/tests/functional/test_instance_actions.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/4b1794e7c6bf8e9a68a29a0eb2925e8103144fe6', 'message': 'Delete dangling bdms\n\nOn reboot, check the instance volume status on the cinder side.\nVerify if volume exists and cinder has an attachment ID, else\ndelete its BDMS data from nova DB and vice versa.\n\nUpdated existing test cases to use CinderFixture while rebooting as\nreboot calls get_all_attachments\n\nImplements: blueprint https://blueprints.launchpad.net/nova/+spec/cleanup-dangling-volume-attachments\nCloses-Bug: 2019078\n\nChange-Id: Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29\n(cherry picked from commit 9d5935d007e5a50a4fd61ad033cd0135fdcaa2eb)\n'}]",0,893467,4b1794e7c6bf8e9a68a29a0eb2925e8103144fe6,5,1,1,34860,,,0,"Delete dangling bdms

On reboot, check the instance volume status on the cinder side.
Verify if volume exists and cinder has an attachment ID, else
delete its BDMS data from nova DB and vice versa.

Updated existing test cases to use CinderFixture while rebooting as
reboot calls get_all_attachments

Implements: blueprint https://blueprints.launchpad.net/nova/+spec/cleanup-dangling-volume-attachments
Closes-Bug: 2019078

Change-Id: Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29
(cherry picked from commit 9d5935d007e5a50a4fd61ad033cd0135fdcaa2eb)
",git fetch https://review.opendev.org/openstack/nova refs/changes/67/893467/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_server_faults.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'releasenotes/notes/delete-dangling-volumes-2615100187fe29fb.yaml', 'doc/source/admin/manage-volumes.rst', 'nova/compute/manager.py', 'nova/tests/functional/compute/test_attached_volumes.py', 'nova/tests/functional/regressions/test_bug_1835822.py', 'nova/tests/functional/test_instance_actions.py']",9,4b1794e7c6bf8e9a68a29a0eb2925e8103144fe6,dangling-volumes, self.useFixture(nova_fixtures.CinderFixture(self)),,233,15
openstack%2Fnova~893476,openstack/nova,stable/yoga,I8619d898f68250bf70a17b1e6b8b0c249245b43b,Add function to get all attachments in Cinder.API module,ABANDONED,2023-09-01 07:27:39.000000000,2023-09-01 12:54:43.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 07:27:39.000000000', 'files': ['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', 'nova/tests/fixtures/cinder.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/438b70d1a0ea16c3c1c868da040a84bbb4bc5a51', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n(cherry picked from commit 32ed205794e0676f9555b084b9774ab08a7d96ce)\n(cherry picked from commit b982b8124fa72b2ef4f7d8c189bf2be0d530dafd)\n(cherry picked from commit a80cee8266dea5ed57a5a19d3ea67aa0baf4f049)\n'}]",0,893476,438b70d1a0ea16c3c1c868da040a84bbb4bc5a51,4,1,1,34860,,,0,"Add function to get all attachments in Cinder.API module

- Added function to get all attachments by instance or volume id from Cinder in Cinder.API
- Updated CinderFixture to add mock get_all_attachment functionality.
- Added unit tests get_all_attachments.

Related-Bug: 2019078

Change-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b
(cherry picked from commit 32ed205794e0676f9555b084b9774ab08a7d96ce)
(cherry picked from commit b982b8124fa72b2ef4f7d8c189bf2be0d530dafd)
(cherry picked from commit a80cee8266dea5ed57a5a19d3ea67aa0baf4f049)
",git fetch https://review.opendev.org/openstack/nova refs/changes/76/893476/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', 'nova/tests/fixtures/cinder.py']",3,438b70d1a0ea16c3c1c868da040a84bbb4bc5a51,," self.useFixture(fixtures.MockPatch( 'nova.volume.cinder.API.attachment_get_all', side_effect=self.fake_attachment_get_all, autospec=False)) def fake_attachment_get_all( self, context, instance_id=None, volume_id=None): if not instance_id and not volume_id: raise exception.InvalidRequest( ""Either instance or volume id must be passed."") if volume_id in self.volume_to_attachment: return self.volume_to_attachment[volume_id] all_attachments = [] for _, attachments in self.volume_to_attachment.items(): all_attachments.extend( [attach for attach in attachments.values() if instance_id == attach['instance_uuid']]) return all_attachments def create_vol_attachment(self, volume_id, instance_id): attachment_id = uuidutils.generate_uuid() if self.attachment_error_id is not None: attachment_id = self.attachment_error_id attachment = {'id': attachment_id} self.volume_to_attachment[volume_id][attachment_id] = { 'id': attachment_id, 'instance_uuid': instance_id, } return attachment def get_vol_attachment(self, _id): for _, attachments in self.volume_to_attachment.items(): for attachment_id in attachments: if _id == attachment_id: # return because attachment id is unique return attachments[attachment_id] def delete_vol_attachment(self, vol_id): del self.volume_to_attachment[vol_id]",,112,0
openstack%2Fnova~893477,openstack/nova,stable/yoga,Ieb76b00600acc9c7610546f5a1afab5b65903825,Reproducer for dangling bdms,ABANDONED,2023-09-01 07:27:39.000000000,2023-09-01 12:54:35.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 07:27:39.000000000', 'files': ['nova/tests/functional/integrated_helpers.py', 'nova/tests/functional/compute/test_attached_volumes.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/99223ea98891f67624ed4977aa8dc7a98f326b61', 'message': 'Reproducer for dangling bdms\n\n- Added reproducer test for dangling BDMs\n\nRelated-Bug: 2019078\nChange-Id: Ieb76b00600acc9c7610546f5a1afab5b65903825\n(cherry picked from commit c33a9ccf4c2c996f5bb2e43fb6107072a9d2c66e)\n(cherry picked from commit 7b8c0986a5df3e698b3cc9d26f7a69e0105c9116)\n(cherry picked from commit 7bedc050ebeeab23512fa1e1213b0d26c0f4df41)\n'}]",0,893477,99223ea98891f67624ed4977aa8dc7a98f326b61,4,1,1,34860,,,0,"Reproducer for dangling bdms

- Added reproducer test for dangling BDMs

Related-Bug: 2019078
Change-Id: Ieb76b00600acc9c7610546f5a1afab5b65903825
(cherry picked from commit c33a9ccf4c2c996f5bb2e43fb6107072a9d2c66e)
(cherry picked from commit 7b8c0986a5df3e698b3cc9d26f7a69e0105c9116)
(cherry picked from commit 7bedc050ebeeab23512fa1e1213b0d26c0f4df41)
",git fetch https://review.opendev.org/openstack/nova refs/changes/77/893477/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/integrated_helpers.py', 'nova/tests/functional/compute/test_attached_volumes.py']",2,99223ea98891f67624ed4977aa8dc7a98f326b61,,"# Copyright 2023, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova import context from nova import objects from nova.tests.functional import integrated_helpers from nova.tests.functional.libvirt import base class TestAttachedVolumes( base.ServersTestBase, integrated_helpers.InstanceHelperMixin): microversion = 'latest' def setUp(self): super(TestAttachedVolumes, self).setUp() self.admin_api = self.api_fixture.admin_api self.start_compute() def _get_bdm_list(self, server): ctxt = context.get_admin_context() bdms = objects.BlockDeviceMappingList.get_by_instance_uuid( ctxt, server['id']) return [( bdm.volume_id, bdm.attachment_id) for bdm in bdms if bdm.volume_id] def test_delete_stale_attachment_from_nova(self): volume_id = 'aeb9b5f4-1fe9-4964-ab65-5e168be4de8e' # create a server server = self._create_server(networks=[]) server = self._attach_volumes(server, [volume_id]) # verify if volume attachment created at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(1, len(attached_volume_ids)) # verify if volume attachment created at nova bdm_list = self._get_bdm_list(server) self.assertEqual(1, len(bdm_list)) self.assertEqual(volume_id, bdm_list[0][0]) # delete volume attachment using cinder api self.cinder.delete_vol_attachment(bdm_list[0][0]) # rebooting server should remove stale attachments server = self._reboot_server(server, hard=True) # verify if volume attachment is present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(0, len(attached_volume_ids)) # verify if volume attachment is present at nova bdm_list = self._get_bdm_list(server) # TODO(auniyal): Reboot should remove stale bdms # after fix bdm should not have any volume self.assertEqual(1, len(bdm_list)) self.assertEqual(volume_id, bdm_list[0][0]) def test_delete_multiple_stale_attachment_from_nova(self): volumes = [ '543c6517-e1f7-4327-968d-7be8246b798a', 'f37d7501-f1dd-428f-a1f8-6a9eb951f247', '45990290-ef3d-410c-b8cc-45f7830b5a8f', '6addafaf-9dc8-470e-88d2-288d0daa616c', ] # create a server server = self._create_server(networks='none') server = self._attach_volumes(server, volumes) # verify if volume attachment created at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(4, len(attached_volume_ids)) # verify if volume attachment created at nova bdm_list = self._get_bdm_list(server) bdm_attc_vols = set([bdm[0] for bdm in bdm_list]) self.assertEqual(4, len(bdm_list)) self.assertEqual(set(volumes), set(bdm_attc_vols)) # delete 2 volume attachment using cinder api self.cinder.delete_vol_attachment(bdm_list[1][0]) self.cinder.delete_vol_attachment(bdm_list[3][0]) server = self._reboot_server(server, hard=True) # verify if volume attachment is present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(2, len(attached_volume_ids)) # verify if volume attachment is present at nova bdm_list_2 = self._get_bdm_list(server) bdm_attc_vols = [bdm[0] for bdm in bdm_list_2] # after fix only 2 volumes should be attached instead 4 self.assertEqual(4, len(bdm_list_2)) self.assertIn(bdm_list[0][0], bdm_attc_vols) self.assertIn(bdm_list[1][0], bdm_attc_vols) self.assertIn(bdm_list[2][0], bdm_attc_vols) self.assertIn(bdm_list[3][0], bdm_attc_vols) def test_delete_multiple_stale_attachment_from_cinder(self): volume_id = 'aeb9b5f4-1fe9-4964-ab65-5e168be4de8e' server = self._create_server(networks=[]) # this will create a valid attachments server = self._attach_volumes(server, [volume_id]) attachments = 4 # create stale attachments at cinder self._create_vol_attachments_by_cinder(volume_id, server, attachments) # verify if volume attachment created at cinder # get attachment id by server from cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) # here we are checking with +1 because we had attached # a valid attachment at L145. # this is to differentiate that reboot should not remove # a valid attachment and only remove dangling one. self.assertEqual(attachments + 1, len(attached_volume_ids)) for _id in attached_volume_ids: _ = self.cinder.get_vol_attachment(_id) self.assertEqual(_['instance_uuid'], server['id']) # verify if nova aware of new attachments bdm_list = self._get_bdm_list(server) self.assertEqual(1, len(bdm_list)) # rebooting server should remove stale attachments server = self._reboot_server(server, hard=True) # TODO(auniyal): Reboot should remove only stale attachments # from cinder too # verify if how many volume attachments are present at cinder attached_volume_ids = self.cinder.attachment_ids_for_instance( server['id']) self.assertEqual(attachments + 1, len(attached_volume_ids)) ",,185,0
openstack%2Fnova~893478,openstack/nova,stable/yoga,Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29,Delete dangling bdms,ABANDONED,2023-09-01 07:27:39.000000000,2023-09-01 12:54:26.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-09-01 07:27:39.000000000', 'files': ['nova/tests/functional/test_server_faults.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'releasenotes/notes/delete-dangling-volumes-2615100187fe29fb.yaml', 'doc/source/admin/manage-volumes.rst', 'nova/compute/manager.py', 'nova/tests/functional/compute/test_attached_volumes.py', 'nova/tests/functional/regressions/test_bug_1835822.py', 'nova/tests/functional/test_instance_actions.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/a7bc84a96904952f3a9afff5f1b072c8e80aa991', 'message': 'Delete dangling bdms\n\nOn reboot, check the instance volume status on the cinder side.\nVerify if volume exists and cinder has an attachment ID, else\ndelete its BDMS data from nova DB and vice versa.\n\nUpdated existing test cases to use CinderFixture while rebooting as\nreboot calls get_all_attachments\n\nImplements: blueprint https://blueprints.launchpad.net/nova/+spec/cleanup-dangling-volume-attachments\nCloses-Bug: 2019078\n\nChange-Id: Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29\n(cherry picked from commit 9d5935d007e5a50a4fd61ad033cd0135fdcaa2eb)\n(cherry picked from commit 4b1794e7c6bf8e9a68a29a0eb2925e8103144fe6)\n(cherry picked from commit fb19d3f5f969ba981b56c1414dae7c75ea7481c9)\n'}]",0,893478,a7bc84a96904952f3a9afff5f1b072c8e80aa991,4,1,1,34860,,,0,"Delete dangling bdms

On reboot, check the instance volume status on the cinder side.
Verify if volume exists and cinder has an attachment ID, else
delete its BDMS data from nova DB and vice versa.

Updated existing test cases to use CinderFixture while rebooting as
reboot calls get_all_attachments

Implements: blueprint https://blueprints.launchpad.net/nova/+spec/cleanup-dangling-volume-attachments
Closes-Bug: 2019078

Change-Id: Ieb619d4bfe0a6472aefb118b58283d7ad8d24c29
(cherry picked from commit 9d5935d007e5a50a4fd61ad033cd0135fdcaa2eb)
(cherry picked from commit 4b1794e7c6bf8e9a68a29a0eb2925e8103144fe6)
(cherry picked from commit fb19d3f5f969ba981b56c1414dae7c75ea7481c9)
",git fetch https://review.opendev.org/openstack/nova refs/changes/78/893478/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/functional/test_server_faults.py', 'nova/tests/functional/integrated_helpers.py', 'nova/tests/unit/compute/test_compute.py', 'releasenotes/notes/delete-dangling-volumes-2615100187fe29fb.yaml', 'doc/source/admin/manage-volumes.rst', 'nova/compute/manager.py', 'nova/tests/functional/compute/test_attached_volumes.py', 'nova/tests/functional/regressions/test_bug_1835822.py', 'nova/tests/functional/test_instance_actions.py']",9,a7bc84a96904952f3a9afff5f1b072c8e80aa991,, self.useFixture(nova_fixtures.CinderFixture(self)),,233,15
openstack%2Fcinder~890194,openstack/cinder,master,I78f20113b127245f46ec8e0203a3f3a93d364b5d,Automate generation of backend storage pool api-ref samples,NEW,2023-08-01 11:27:49.000000000,2023-09-01 12:43:40.000000000,,"[{'_account_id': 5314}, {'_account_id': 22348}, {'_account_id': 27615}, {'_account_id': 32029}, {'_account_id': 35851}]","[{'number': 1, 'created': '2023-08-01 11:27:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/c5f7a91c7f09ba828d024b5d7d6d3a8d52e79006', 'message': 'Automate generation of services api-ref samples\n\nThis patch adds test for backend storage pools.\n\nPartially-Implements: blueprint generating-sample-files\nChange-Id: I78f20113b127245f46ec8e0203a3f3a93d364b5d\nSigned-off-by: Toheeb <toheeb.olawale.to23@gmail.com>\n'}, {'number': 2, 'created': '2023-08-01 17:06:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/98f5bed642ee5777e5dcb37b359ebe642a4d7933', 'message': 'Automate generation of services api-ref samples\n\nThis patch adds test for backend storage pools\n\nPartially-Implements: blueprint generating-sample-files\nChange-Id: I78f20113b127245f46ec8e0203a3f3a93d364b5d\nSigned-off-by: Toheeb <toheeb.olawale.to23@gmail.com>\n'}, {'number': 3, 'created': '2023-08-01 20:24:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/7feb16f05fa69611d44ed13ed30fece5b61d0c62', 'message': 'Automate generation of services api-ref samples\n\nThis patch adds test for backend storage pools\n\nPartially-Implements: blueprint generating-sample-files\nChange-Id: I78f20113b127245f46ec8e0203a3f3a93d364b5d\nSigned-off-by: Toheeb <toheeb.olawale.to23@gmail.com>\n'}, {'number': 4, 'created': '2023-08-04 23:16:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/69c6051928f08d08227ad3c984d39aea914388e0', 'message': 'Automate generation of backend storage pool api-ref samples\n\nThis patch adds test for backend storage pools\n\nPartially-Implements: blueprint generating-sample-files\nChange-Id: I78f20113b127245f46ec8e0203a3f3a93d364b5d\nSigned-off-by: Toheeb <toheeb.olawale.to23@gmail.com>\n'}, {'number': 5, 'created': '2023-08-07 14:39:16.000000000', 'files': ['cinder/tests/functional/api_sample_tests/test_pools.py', 'api-ref/source/v3/samples/pools/pools-list-detailed-response.json', 'api-ref/source/v3/samples/pools-list-detailed-response.json', 'api-ref/source/v3/os-vol-pool-v3.inc', 'cinder/tests/functional/api_sample_tests/samples/pools/pools-list-detailed-response.json.tpl'], 'web_link': 'https://opendev.org/openstack/cinder/commit/80a04868ad1a6d79bdfad18936c23b51321566e6', 'message': 'Automate generation of backend storage pool api-ref samples\n\nThis patch adds test for backend storage pools\n\nPartially-Implements: blueprint generating-sample-files\nChange-Id: I78f20113b127245f46ec8e0203a3f3a93d364b5d\nSigned-off-by: Toheeb <toheeb.olawale.to23@gmail.com>\n'}]",7,890194,80a04868ad1a6d79bdfad18936c23b51321566e6,94,5,5,35836,,,0,"Automate generation of backend storage pool api-ref samples

This patch adds test for backend storage pools

Partially-Implements: blueprint generating-sample-files
Change-Id: I78f20113b127245f46ec8e0203a3f3a93d364b5d
Signed-off-by: Toheeb <toheeb.olawale.to23@gmail.com>
",git fetch https://review.opendev.org/openstack/cinder refs/changes/94/890194/1 && git format-patch -1 --stdout FETCH_HEAD,"['api-ref/source/v3/samples/volume_pools/pools-list-detailed-response.json', 'cinder/tests/functional/api_sample_tests/test_volume_pools.py', 'cinder/tests/functional/api_sample_tests/samples/volume_pools/pools-list-detailed-response.json.tpl', 'api-ref/source/v3/samples/pools-list-detailed-response.json', 'api-ref/source/v3/os-vol-pool-v3.inc']",5,c5f7a91c7f09ba828d024b5d7d6d3a8d52e79006,test_backend_storage_pools,.. literalinclude:: ./samples/volume_pools/pools-list-detailed-response.json,.. literalinclude:: ./samples/pools-list-detailed-response.json,80,31
openstack%2Fopenstack-ansible~893419,openstack/openstack-ansible,stable/zed,Ieed1d10080be8575032bc77d8aa84b472ea8a1e2,Bump SHAs for Zed,MERGED,2023-08-31 17:15:57.000000000,2023-09-01 12:23:02.000000000,2023-09-01 12:21:42.000000000,"[{'_account_id': 22348}, {'_account_id': 31542}, {'_account_id': 32666}]","[{'number': 1, 'created': '2023-08-31 17:15:57.000000000', 'files': ['playbooks/defaults/repo_packages/openstack_services.yml', 'ansible-collection-requirements.yml', 'releasenotes/notes/fix_lxc_cache_expiration-1656b5758c4ec24e.yaml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'releasenotes/notes/el_ovs_3.1_stable-951c1b8a148bbcaf.yaml', 'ansible-role-requirements.yml', 'releasenotes/notes/mariabackup-compression-337b04c68f370c1d.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/312f4ba6ffca5059830689c7682ab79c4378cd28', 'message': 'Bump SHAs for Zed\n\nChange-Id: Ieed1d10080be8575032bc77d8aa84b472ea8a1e2\n'}]",0,893419,312f4ba6ffca5059830689c7682ab79c4378cd28,8,3,1,28619,,,0,"Bump SHAs for Zed

Change-Id: Ieed1d10080be8575032bc77d8aa84b472ea8a1e2
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/19/893419/1 && git format-patch -1 --stdout FETCH_HEAD,"['playbooks/defaults/repo_packages/openstack_services.yml', 'ansible-collection-requirements.yml', 'releasenotes/notes/fix_lxc_cache_expiration-1656b5758c4ec24e.yaml', 'playbooks/defaults/repo_packages/gnocchi.yml', 'playbooks/defaults/repo_packages/nova_consoles.yml', 'releasenotes/notes/el_ovs_3.1_stable-951c1b8a148bbcaf.yaml', 'ansible-role-requirements.yml', 'releasenotes/notes/mariabackup-compression-337b04c68f370c1d.yaml']",8,312f4ba6ffca5059830689c7682ab79c4378cd28,bump_osa,"--- features: - | Adds optional compression for backups created with mariabackup. Adds two new CLI parameters to the mariabackup script that are used to enable compression and to choose a compression tool. * ``--compress=True|False`` * ``--compressor=<compressor>`` Also introduces new Ansible variables that control the above mentioned parameters. * ``galera_mariadb_backups_compress`` * ``galera_mariadb_backups_compressor`` Each backup archive is stored in a dedicated directory, alongside the backup metadata. upgrade: - | Backup compression is disabled by default, so no changes need to be made for existing deployments. Should compression be desired, set ``galera_mariadb_backups_compress`` to ``True``. Choose a compression tool with ``galera_mariadb_backups_compressor``, default is ``gzip``. others: - | Compressed backups cannot be prepared in advance, this step must be manually carried out by the user before importing it into MariaDB. ",,116,55
openstack%2Fpython-cloudkittyclient~891820,openstack/python-cloudkittyclient,master,Ia09293232cfb348e74919cad8bfe783d53a5ec8c,DNM: dummy change to test gate health,ABANDONED,2023-08-17 15:06:20.000000000,2023-09-01 11:57:58.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 15:06:20.000000000', 'files': ['cloudkittyclient/format.py'], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/5b77f74b243b96136f9f288ed5e7d2f7f13fe208', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: Ia09293232cfb348e74919cad8bfe783d53a5ec8c\n'}]",1,891820,5b77f74b243b96136f9f288ed5e7d2f7f13fe208,5,1,1,17685,,,0,"DNM: dummy change to test gate health

Change-Id: Ia09293232cfb348e74919cad8bfe783d53a5ec8c
",git fetch https://review.opendev.org/openstack/python-cloudkittyclient refs/changes/20/891820/1 && git format-patch -1 --stdout FETCH_HEAD,['cloudkittyclient/format.py'],1,5b77f74b243b96136f9f288ed5e7d2f7f13fe208,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Fgovernance~892652,openstack/governance,master,I60fac7028ef9c8f20a81bdcedbc7740acec30b1b,Add magnum k8s charm,MERGED,2023-08-24 09:00:14.000000000,2023-09-01 11:45:04.000000000,2023-09-01 11:43:59.000000000,"[{'_account_id': 935}, {'_account_id': 8556}, {'_account_id': 16465}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-24 09:00:14.000000000', 'files': ['reference/projects.yaml'], 'web_link': 'https://opendev.org/openstack/governance/commit/38fc620693358ff92802581d2d13e644ba855c08', 'message': 'Add magnum k8s charm\n\nAdd the magnum k8s charmed operator to the Openstack sunbeam project.\n\nDepends-On: Ic30e7d39b641ef58d9a299c704be056e63c7a5d3\nChange-Id: I60fac7028ef9c8f20a81bdcedbc7740acec30b1b\n'}]",4,892652,38fc620693358ff92802581d2d13e644ba855c08,21,4,1,35761,,,0,"Add magnum k8s charm

Add the magnum k8s charmed operator to the Openstack sunbeam project.

Depends-On: Ic30e7d39b641ef58d9a299c704be056e63c7a5d3
Change-Id: I60fac7028ef9c8f20a81bdcedbc7740acec30b1b
",git fetch https://review.opendev.org/openstack/governance refs/changes/52/892652/1 && git format-patch -1 --stdout FETCH_HEAD,['reference/projects.yaml'],1,38fc620693358ff92802581d2d13e644ba855c08,project-update, - openstack/charm-magnum-k8s,,1,0
openstack%2Fneutron~886860,openstack/neutron,stable/zed,I34bb6f178c314907bdf9f76789777f6736938b67,[OVN][Trunk] Add port binding info on subport when parent is bound,MERGED,2023-06-23 16:51:35.000000000,2023-09-01 11:43:37.000000000,2023-06-26 11:44:41.000000000,"[{'_account_id': 11975}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 34118}]","[{'number': 1, 'created': '2023-06-23 16:51:35.000000000', 'files': ['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/bba43f1e090c278921f9cf564b199170f0a9304e', 'message': ""[OVN][Trunk] Add port binding info on subport when parent is bound\n\nThe host ID and VIF details are added on the subport when the trunk is\ncreated, if it's created when it's not attached to any VM this fields\nwill remain empty and be filled on the parent port when it gets bound\nto a host, but there's no callback to add this info on the subport.\n\nCloses-Bug: #2018289\nCloses-Bug: #2024160\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)\n""}]",1,886860,bba43f1e090c278921f9cf564b199170f0a9304e,11,4,1,16688,,,0,"[OVN][Trunk] Add port binding info on subport when parent is bound

The host ID and VIF details are added on the subport when the trunk is
created, if it's created when it's not attached to any VM this fields
will remain empty and be filled on the parent port when it gets bound
to a host, but there's no callback to add this info on the subport.

Closes-Bug: #2018289
Closes-Bug: #2024160
Change-Id: I34bb6f178c314907bdf9f76789777f6736938b67
(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/60/886860/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py']",3,bba43f1e090c278921f9cf564b199170f0a9304e,bug/2018289,"from neutron_lib.api.definitions import portbindingsfrom neutron_lib.db import api as db_apifrom neutron.objects import ports as port_obj from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import base def setUp(self, **kwargs): super().setUp(**kwargs) with self.port(subnet=subnet, device_owner='compute:nova') as parent_port: def _verify_trunk_info(self, trunk, has_items, host=''): # Check the subport binding. pb = port_obj.PortBinding.get_object( self.context, port_id=subport['port_id'], host=host) self.assertEqual(n_consts.PORT_STATUS_ACTIVE, pb.status) self.assertEqual(host, pb.host) def _bind_port(self, port_id, host): with db_api.CONTEXT_WRITER.using(self.context): pb = port_obj.PortBinding.get_object(self.context, port_id=port_id, host='') pb.delete() port_obj.PortBinding(self.context, port_id=port_id, host=host, vif_type=portbindings.VIF_TYPE_OVS).create() # Bind parent port. That will trigger the binding of the # trunk subports too, using the same host ID. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(new_trunk, has_items=True, host='host1') # Bind parent port. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(trunk, has_items=True, host='host1') ","from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import basefrom neutron_lib.objects import registry as obj_reg def setUp(self): super(TestOVNTrunkDriver, self).setUp() with self.port(subnet=subnet) as parent_port: revision_number = row.external_ids[ ovn_const.OVN_REV_NUM_EXT_ID_KEY] 'revision_number': revision_number, def _verify_trunk_info(self, trunk, has_items): 'revision_number': '2', # Check that the subport has the binding is active. binding = obj_reg.load_class('PortBinding').get_object( self.context, port_id=subport['port_id'], host='') self.assertEqual(n_consts.PORT_STATUS_ACTIVE, binding['status'])",62,20
openstack%2Fneutron~886862,openstack/neutron,stable/xena,I34bb6f178c314907bdf9f76789777f6736938b67,[OVN][Trunk] Add port binding info on subport when parent is bound,MERGED,2023-06-23 16:52:06.000000000,2023-09-01 11:43:32.000000000,2023-06-26 14:52:10.000000000,"[{'_account_id': 11975}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 34118}]","[{'number': 1, 'created': '2023-06-23 16:52:06.000000000', 'files': ['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/744d364141a8efc10590367a5071eebf34bb0827', 'message': ""[OVN][Trunk] Add port binding info on subport when parent is bound\n\nThe host ID and VIF details are added on the subport when the trunk is\ncreated, if it's created when it's not attached to any VM this fields\nwill remain empty and be filled on the parent port when it gets bound\nto a host, but there's no callback to add this info on the subport.\n\nCloses-Bug: #2018289\nCloses-Bug: #2024160\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)\n""}]",4,886862,744d364141a8efc10590367a5071eebf34bb0827,17,4,1,16688,,,0,"[OVN][Trunk] Add port binding info on subport when parent is bound

The host ID and VIF details are added on the subport when the trunk is
created, if it's created when it's not attached to any VM this fields
will remain empty and be filled on the parent port when it gets bound
to a host, but there's no callback to add this info on the subport.

Closes-Bug: #2018289
Closes-Bug: #2024160
Change-Id: I34bb6f178c314907bdf9f76789777f6736938b67
(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/62/886862/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py']",3,744d364141a8efc10590367a5071eebf34bb0827,bug/2018289,"from neutron_lib.api.definitions import portbindingsfrom neutron_lib.db import api as db_apifrom neutron.objects import ports as port_obj from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import base def setUp(self, **kwargs): super().setUp(**kwargs) with self.port(subnet=subnet, device_owner='compute:nova') as parent_port: def _verify_trunk_info(self, trunk, has_items, host=''): # Check the subport binding. pb = port_obj.PortBinding.get_object( self.context, port_id=subport['port_id'], host=host) self.assertEqual(n_consts.PORT_STATUS_ACTIVE, pb.status) self.assertEqual(host, pb.host) def _bind_port(self, port_id, host): with db_api.CONTEXT_WRITER.using(self.context): pb = port_obj.PortBinding.get_object(self.context, port_id=port_id, host='') pb.delete() port_obj.PortBinding(self.context, port_id=port_id, host=host, vif_type=portbindings.VIF_TYPE_OVS).create() # Bind parent port. That will trigger the binding of the # trunk subports too, using the same host ID. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(new_trunk, has_items=True, host='host1') # Bind parent port. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(trunk, has_items=True, host='host1') ","from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import basefrom neutron_lib.objects import registry as obj_reg def setUp(self): super(TestOVNTrunkDriver, self).setUp() with self.port(subnet=subnet) as parent_port: revision_number = row.external_ids[ ovn_const.OVN_REV_NUM_EXT_ID_KEY] 'revision_number': revision_number, def _verify_trunk_info(self, trunk, has_items): 'revision_number': '2', # Check that the subport has the binding is active. binding = obj_reg.load_class('PortBinding').get_object( self.context, port_id=subport['port_id'], host='') self.assertEqual(n_consts.PORT_STATUS_ACTIVE, binding['status'])",62,20
openstack%2Fneutron~882581,openstack/neutron,master,I34bb6f178c314907bdf9f76789777f6736938b67,[OVN][Trunk] Add port binding info on subport when parent is bound,MERGED,2023-05-08 16:01:18.000000000,2023-09-01 11:43:24.000000000,2023-06-26 21:45:50.000000000,"[{'_account_id': 5948}, {'_account_id': 8313}, {'_account_id': 9845}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 32586}, {'_account_id': 34118}]","[{'number': 1, 'created': '2023-05-08 16:01:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/97cf55270031b5f1197ea1232b1ef92706c33767', 'message': ""[OVN trunk][WIP] Add bound info on subport when parent is bound\n\nThe host-id and vif_details are added on the subport when the\ntrunk is created, if it's created when it's not attached to any\nVM this fields will remain empty and be filled on the parent port\nwhen it gets binded to a host, but there's no callback to add\nthis info on the subport.\n\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}, {'number': 2, 'created': '2023-05-10 08:42:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/58d6940e7a7e194f01c5ba1236d7b3bca6ed306b', 'message': ""[OVN trunk][WIP] Add bound info on subport when parent is bound\n\nThe host-id and vif_details are added on the subport when the\ntrunk is created, if it's created when it's not attached to any\nVM this fields will remain empty and be filled on the parent port\nwhen it gets binded to a host, but there's no callback to add\nthis info on the subport.\n\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}, {'number': 3, 'created': '2023-05-15 11:20:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0c7e6f8b154397a2667d9653dded2299c703fad1', 'message': ""[OVN trunk][WIP] Add bound info on subport when parent is bound\n\nThe host-id and vif_details are added on the subport when the\ntrunk is created, if it's created when it's not attached to any\nVM this fields will remain empty and be filled on the parent port\nwhen it gets binded to a host, but there's no callback to add\nthis info on the subport.\n\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}, {'number': 4, 'created': '2023-05-15 14:40:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8355011a023bf320a95f480aefa0a3dfa8df5d70', 'message': ""[OVN trunk][WIP] Add bound info on subport when parent is bound\n\nThe host-id and vif_details are added on the subport when the\ntrunk is created, if it's created when it's not attached to any\nVM this fields will remain empty and be filled on the parent port\nwhen it gets binded to a host, but there's no callback to add\nthis info on the subport.\n\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}, {'number': 5, 'created': '2023-05-19 10:35:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0f3b659c0716e004c0e89264451e50f043bdbc37', 'message': ""[OVN trunk] Add bound info on subport when parent is bound\n\nThe host-id and vif_details are added on the subport when the\ntrunk is created, if it's created when it's not attached to any\nVM this fields will remain empty and be filled on the parent port\nwhen it gets binded to a host, but there's no callback to add\nthis info on the subport.\n\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}, {'number': 6, 'created': '2023-06-21 16:46:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/b58e12a4e4eadf86f1b225428775610e26cf89e4', 'message': ""[OVN trunk] Add bound info on subport when parent is bound\n\nThe host-id and vif_details are added on the subport when the\ntrunk is created, if it's created when it's not attached to any\nVM this fields will remain empty and be filled on the parent port\nwhen it gets binded to a host, but there's no callback to add\nthis info on the subport.\n\nCloses-Bug: #2018289\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}, {'number': 7, 'created': '2023-06-21 16:47:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a017672d330bed2a97534b9415ec35d77a21e754', 'message': ""[OVN[[Trunk] Add bound info on subport when parent is bound\n\nThe host-id and vif_details are added on the subport when the\ntrunk is created, if it's created when it's not attached to any\nVM this fields will remain empty and be filled on the parent port\nwhen it gets binded to a host, but there's no callback to add\nthis info on the subport.\n\nCloses-Bug: #2018289\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}, {'number': 8, 'created': '2023-06-22 08:00:22.000000000', 'files': ['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/955e621167987626806128d259a29d4e62acf102', 'message': ""[OVN][Trunk] Add port binding info on subport when parent is bound\n\nThe host ID and VIF details are added on the subport when the trunk is\ncreated, if it's created when it's not attached to any VM this fields\nwill remain empty and be filled on the parent port when it gets bound\nto a host, but there's no callback to add this info on the subport.\n\nCloses-Bug: #2018289\nCloses-Bug: #2024160\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n""}]",25,882581,955e621167987626806128d259a29d4e62acf102,67,7,8,34118,,,0,"[OVN][Trunk] Add port binding info on subport when parent is bound

The host ID and VIF details are added on the subport when the trunk is
created, if it's created when it's not attached to any VM this fields
will remain empty and be filled on the parent port when it gets bound
to a host, but there's no callback to add this info on the subport.

Closes-Bug: #2018289
Closes-Bug: #2024160
Change-Id: I34bb6f178c314907bdf9f76789777f6736938b67
",git fetch https://review.opendev.org/openstack/neutron refs/changes/81/882581/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/services/trunk/plugin.py']",2,97cf55270031b5f1197ea1232b1ef92706c33767,bug/2024160,"from neutron_lib.plugins import constants as plugin_constantsfrom neutron.common.ovn import constants as ovn_constfrom neutron.objects import ports as port_objects def _get_subport(self, context, subport_id): """"""Return the trunk object or raise if not found."""""" obj = port_objects.Port.get_object(context, id=subport_id) if obj is None: raise trunk_exc.SubPortNotFound(port_id=subport_id) return obj def bound_subport(self, context, subport_id, vif_type, vif_details, parent_host): l3plugin = directory.get_plugin(plugin_constants.L3) if not l3plugin: return ovn_client = l3plugin._ovn_client db_subport = self._get_subport(context, subport_id) options = {} check_rev_cmd = ovn_client._nb_idl.check_revision_number( subport_id, db_subport, ovn_const.TYPE_PORTS) with ovn_client._nb_idl.transaction(check_error=True, revision_mismatch_raise=True) as txn: txn.add(check_rev_cmd) options[portbindings.HOST_ID] = parent_host options[portbindings.VIF_TYPE] = vif_type options[ovn_const.LSP_OPTIONS_REQUESTED_CHASSIS_KEY] = parent_host # new_options[portbindings.VIF_DETAILS] = vif_details txn.add(ovn_client._nb_idl.set_lswitch_port( lport_name=subport_id, if_exists=False, options=options,)) @db_base_plugin_common.convert_result_to_dict vif_has_been_bound = True if vif_type_changed and \ new_vif_type != (portbindings.VIF_TYPE_UNBOUND or portbindings.VIF_TYPE_BINDING_FAILED) else False if vif_type_changed and vif_has_been_bound: vif_details = updated_port.get(portbindings.VIF_DETAILS) # Bound the subport on the same host than the parent for subport_id in trunk_details['sub_ports']: self.bound_subport( context, subport_id['port_id'], new_vif_type, vif_details, updated_port.get(portbindings.HOST_ID))",,52,2
openstack%2Fneutron~886861,openstack/neutron,stable/yoga,I34bb6f178c314907bdf9f76789777f6736938b67,[OVN][Trunk] Add port binding info on subport when parent is bound,MERGED,2023-06-23 16:51:54.000000000,2023-09-01 11:43:19.000000000,2023-06-26 21:45:56.000000000,"[{'_account_id': 11975}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 34118}]","[{'number': 1, 'created': '2023-06-23 16:51:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e3dd7dc4a561c6a8993af18bb8370830cd5595c3', 'message': ""[OVN][Trunk] Add port binding info on subport when parent is bound\n\nThe host ID and VIF details are added on the subport when the trunk is\ncreated, if it's created when it's not attached to any VM this fields\nwill remain empty and be filled on the parent port when it gets bound\nto a host, but there's no callback to add this info on the subport.\n\nCloses-Bug: #2018289\nCloses-Bug: #2024160\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)\n""}, {'number': 2, 'created': '2023-06-23 16:52:18.000000000', 'files': ['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/cd4f345f60c29900f8c7ca64ae7a1f396d98d28d', 'message': ""[OVN][Trunk] Add port binding info on subport when parent is bound\n\nThe host ID and VIF details are added on the subport when the trunk is\ncreated, if it's created when it's not attached to any VM this fields\nwill remain empty and be filled on the parent port when it gets bound\nto a host, but there's no callback to add this info on the subport.\n\nCloses-Bug: #2018289\nCloses-Bug: #2024160\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)\n""}]",3,886861,cd4f345f60c29900f8c7ca64ae7a1f396d98d28d,20,4,2,16688,,,0,"[OVN][Trunk] Add port binding info on subport when parent is bound

The host ID and VIF details are added on the subport when the trunk is
created, if it's created when it's not attached to any VM this fields
will remain empty and be filled on the parent port when it gets bound
to a host, but there's no callback to add this info on the subport.

Closes-Bug: #2018289
Closes-Bug: #2024160
Change-Id: I34bb6f178c314907bdf9f76789777f6736938b67
(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/61/886861/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py']",3,e3dd7dc4a561c6a8993af18bb8370830cd5595c3,bug/2018289,"from neutron_lib.api.definitions import portbindingsfrom neutron_lib.db import api as db_apifrom neutron.objects import ports as port_obj from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import base def setUp(self, **kwargs): super().setUp(**kwargs) with self.port(subnet=subnet, device_owner='compute:nova') as parent_port: def _verify_trunk_info(self, trunk, has_items, host=''): # Check the subport binding. pb = port_obj.PortBinding.get_object( self.context, port_id=subport['port_id'], host=host) self.assertEqual(n_consts.PORT_STATUS_ACTIVE, pb.status) self.assertEqual(host, pb.host) def _bind_port(self, port_id, host): with db_api.CONTEXT_WRITER.using(self.context): pb = port_obj.PortBinding.get_object(self.context, port_id=port_id, host='') pb.delete() port_obj.PortBinding(self.context, port_id=port_id, host=host, vif_type=portbindings.VIF_TYPE_OVS).create() # Bind parent port. That will trigger the binding of the # trunk subports too, using the same host ID. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(new_trunk, has_items=True, host='host1') # Bind parent port. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(trunk, has_items=True, host='host1') ","from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import basefrom neutron_lib.objects import registry as obj_reg def setUp(self): super(TestOVNTrunkDriver, self).setUp() with self.port(subnet=subnet) as parent_port: revision_number = row.external_ids[ ovn_const.OVN_REV_NUM_EXT_ID_KEY] 'revision_number': revision_number, def _verify_trunk_info(self, trunk, has_items): 'revision_number': '2', # Check that the subport has the binding is active. binding = obj_reg.load_class('PortBinding').get_object( self.context, port_id=subport['port_id'], host='') self.assertEqual(n_consts.PORT_STATUS_ACTIVE, binding['status'])",62,20
openstack%2Fneutron~886859,openstack/neutron,stable/2023.1,I34bb6f178c314907bdf9f76789777f6736938b67,[OVN][Trunk] Add port binding info on subport when parent is bound,MERGED,2023-06-23 16:51:22.000000000,2023-09-01 11:43:15.000000000,2023-06-27 22:05:29.000000000,"[{'_account_id': 11975}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 32029}, {'_account_id': 34118}]","[{'number': 1, 'created': '2023-06-23 16:51:22.000000000', 'files': ['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/5358eb0389d8def12faa9bdfe7db21b125fa3511', 'message': ""[OVN][Trunk] Add port binding info on subport when parent is bound\n\nThe host ID and VIF details are added on the subport when the trunk is\ncreated, if it's created when it's not attached to any VM this fields\nwill remain empty and be filled on the parent port when it gets bound\nto a host, but there's no callback to add this info on the subport.\n\nCloses-Bug: #2018289\nCloses-Bug: #2024160\nChange-Id: I34bb6f178c314907bdf9f76789777f6736938b67\n(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)\n""}]",8,886859,5358eb0389d8def12faa9bdfe7db21b125fa3511,27,5,1,16688,,,0,"[OVN][Trunk] Add port binding info on subport when parent is bound

The host ID and VIF details are added on the subport when the trunk is
created, if it's created when it's not attached to any VM this fields
will remain empty and be filled on the parent port when it gets bound
to a host, but there's no callback to add this info on the subport.

Closes-Bug: #2018289
Closes-Bug: #2024160
Change-Id: I34bb6f178c314907bdf9f76789777f6736938b67
(cherry picked from commit 955e621167987626806128d259a29d4e62acf102)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/59/886859/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/services/trunk/drivers/ovn/test_trunk_driver.py', 'neutron/services/trunk/drivers/ovn/trunk_driver.py', 'neutron/tests/functional/services/trunk/drivers/ovn/test_trunk_driver.py']",3,5358eb0389d8def12faa9bdfe7db21b125fa3511,bug/2018289,"from neutron_lib.api.definitions import portbindingsfrom neutron_lib.db import api as db_apifrom neutron.objects import ports as port_obj from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import base def setUp(self, **kwargs): super().setUp(**kwargs) with self.port(subnet=subnet, device_owner='compute:nova') as parent_port: def _verify_trunk_info(self, trunk, has_items, host=''): # Check the subport binding. pb = port_obj.PortBinding.get_object( self.context, port_id=subport['port_id'], host=host) self.assertEqual(n_consts.PORT_STATUS_ACTIVE, pb.status) self.assertEqual(host, pb.host) def _bind_port(self, port_id, host): with db_api.CONTEXT_WRITER.using(self.context): pb = port_obj.PortBinding.get_object(self.context, port_id=port_id, host='') pb.delete() port_obj.PortBinding(self.context, port_id=port_id, host=host, vif_type=portbindings.VIF_TYPE_OVS).create() # Bind parent port. That will trigger the binding of the # trunk subports too, using the same host ID. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(new_trunk, has_items=True, host='host1') # Bind parent port. self._bind_port(trunk['port_id'], 'host1') self.mech_driver.set_port_status_up(trunk['port_id']) self._verify_trunk_info(trunk, has_items=True, host='host1') ","from neutron.services.trunk import plugin as trunk_plugin from neutron.tests.functional import basefrom neutron_lib.objects import registry as obj_reg def setUp(self): super(TestOVNTrunkDriver, self).setUp() with self.port(subnet=subnet) as parent_port: revision_number = row.external_ids[ ovn_const.OVN_REV_NUM_EXT_ID_KEY] 'revision_number': revision_number, def _verify_trunk_info(self, trunk, has_items): 'revision_number': '2', # Check that the subport has the binding is active. binding = obj_reg.load_class('PortBinding').get_object( self.context, port_id=subport['port_id'], host='') self.assertEqual(n_consts.PORT_STATUS_ACTIVE, binding['status'])",62,20
openstack%2Fgovernance~893118,openstack/governance,master,I656d220e5341c04572d5d0968a494b7cacecdeda,Add magnum-capi-helm-charts to Magnum project,MERGED,2023-08-30 00:50:10.000000000,2023-09-01 11:27:11.000000000,2023-09-01 11:26:07.000000000,"[{'_account_id': 8064}, {'_account_id': 8556}, {'_account_id': 16465}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-08-30 00:50:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/governance/commit/27f0c77339d0d035452c7048b670b6af54d7449c', 'message': 'Add magnum-capi-helm-charts to Magnum project\n\nThis repository will contain Helm charts that are used by the\nnew Cluster API driver.\n\nNeeded-By: https://review.opendev.org/c/openstack/project-config/+/893117\n\nChange-Id: I656d220e5341c04572d5d0968a494b7cacecdeda\n'}, {'number': 2, 'created': '2023-08-30 00:52:50.000000000', 'files': ['reference/projects.yaml'], 'web_link': 'https://opendev.org/openstack/governance/commit/9a89ea5189f22f134f554056a7244e00c89a2495', 'message': 'Add magnum-capi-helm-charts to Magnum project\n\nThis repository will contain Helm charts that are used by the\nnew Cluster API driver.\n\nDepends-On: https://review.opendev.org/c/openstack/project-config/+/893117\n\nChange-Id: I656d220e5341c04572d5d0968a494b7cacecdeda\n'}]",2,893118,9a89ea5189f22f134f554056a7244e00c89a2495,14,5,2,14394,,,0,"Add magnum-capi-helm-charts to Magnum project

This repository will contain Helm charts that are used by the
new Cluster API driver.

Depends-On: https://review.opendev.org/c/openstack/project-config/+/893117

Change-Id: I656d220e5341c04572d5d0968a494b7cacecdeda
",git fetch https://review.opendev.org/openstack/governance refs/changes/18/893118/1 && git format-patch -1 --stdout FETCH_HEAD,['reference/projects.yaml'],1,27f0c77339d0d035452c7048b670b6af54d7449c,project-update, magnum-capi-helm-charts: repos: - openstack/magnum-capi-helm-charts,,3,0
openstack%2Fcinder~890460,openstack/cinder,master,Ieb9e931e5f9a33f11b741b8d37e883090fa65048,LVM: Use --readonly where possible for lvs/vgs,NEW,2023-08-03 20:24:59.000000000,2023-09-01 11:00:10.000000000,,"[{'_account_id': 597}, {'_account_id': 4523}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-03 20:24:59.000000000', 'files': ['cinder/brick/local_dev/lvm.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/9e1f1140b6eb8fcad68d12d7b0f06939563908a9', 'message': 'LVM: Use --readonly where possible for lvs/vgs\n\nRun lvs/vgs commands with --readonly where possible\nto improve performance and reduce lock contention around\nLVM metadata.\n\nChange-Id: Ieb9e931e5f9a33f11b741b8d37e883090fa65048\n'}]",2,890460,9e1f1140b6eb8fcad68d12d7b0f06939563908a9,20,3,1,4523,,,0,"LVM: Use --readonly where possible for lvs/vgs

Run lvs/vgs commands with --readonly where possible
to improve performance and reduce lock contention around
LVM metadata.

Change-Id: Ieb9e931e5f9a33f11b741b8d37e883090fa65048
",git fetch https://review.opendev.org/openstack/cinder refs/changes/60/890460/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/brick/local_dev/lvm.py'],1,9e1f1140b6eb8fcad68d12d7b0f06939563908a9,," '-o', 'name', '--readonly', self.vg_name] ':', '--nosuffix', '--readonly'] '--nosuffix', '--readonly']"," '-o', 'name', self.vg_name] ':', '--nosuffix'] '--nosuffix']",3,3
openstack%2Ftripleo-quickstart~890838,openstack/tripleo-quickstart,master,Ia8bc8c9ca8c65181e049f1d579757883a40a31b0,Exclude affected podman version,MERGED,2023-08-09 00:20:42.000000000,2023-09-01 10:51:03.000000000,2023-08-09 11:31:19.000000000,"[{'_account_id': 8449}, {'_account_id': 9816}, {'_account_id': 12393}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-09 00:20:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/67820082dd279d6eab828df4f3266a3e6e8e160e', 'message': 'DNM - Testing podman downgrade\n\nChange-Id: Ia8bc8c9ca8c65181e049f1d579757883a40a31b0\n'}, {'number': 2, 'created': '2023-08-09 05:35:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/036eb37742a0b8ccfac4754d7336bccd37665252', 'message': 'Exclude affected podman version\n\nLatest version of podman broke tripleo C9 jobs,\ndetails are in Closes-Bug\n\n~~~\nlast good version: podman-4.6.0-1.el9.x86_64\naffected version: podman-4.6.0-3.el9.x86_64\n~~~\n\nExcluding affected podman version to get around this issue.\n\nCloses-Bug: #2030841\nChange-Id: Ia8bc8c9ca8c65181e049f1d579757883a40a31b0\n'}, {'number': 3, 'created': '2023-08-09 05:43:35.000000000', 'files': ['config/release/tripleo-ci/CentOS-9/promotion-testing-hash-wallaby.yml', 'config/release/tripleo-ci/CentOS-9/wallaby.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-quickstart/commit/2aa133c2aecb379ae6234a8879edb9f46bbeb166', 'message': 'Exclude affected podman version\n\nLatest version of podman broke tripleo C9 jobs,\ndetails are in Closes-Bug\n\n~~~\nlast good version: podman-4.6.0-1.el9.x86_64\naffected version: podman-4.6.0-3.el9.x86_64\n~~~\n\nExcluding affected podman version to get around this issue.\n\nRelated-Bug: #2030841\nChange-Id: Ia8bc8c9ca8c65181e049f1d579757883a40a31b0\n'}]",6,890838,2aa133c2aecb379ae6234a8879edb9f46bbeb166,17,4,3,9976,,,0,"Exclude affected podman version

Latest version of podman broke tripleo C9 jobs,
details are in Closes-Bug

~~~
last good version: podman-4.6.0-1.el9.x86_64
affected version: podman-4.6.0-3.el9.x86_64
~~~

Excluding affected podman version to get around this issue.

Related-Bug: #2030841
Change-Id: Ia8bc8c9ca8c65181e049f1d579757883a40a31b0
",git fetch https://review.opendev.org/openstack/tripleo-quickstart refs/changes/38/890838/1 && git format-patch -1 --stdout FETCH_HEAD,"['config/release/tripleo-ci/CentOS-9/promotion-testing-hash-wallaby.yml', 'config/release/tripleo-ci/CentOS-9/wallaby.yml']",2,67820082dd279d6eab828df4f3266a3e6e8e160e,downgrade-podman, exclude: - podman-4.6.0-3.el9.x86_64 # TODO: remove once podman bug is fixed,,4,0
openstack%2Fpython-openstackclient~882813,openstack/python-openstackclient,master,I0bb7f75ed3e03965ecd4d260c1299b46dcbf4b1b,tox: Bump min_version to 4.3.0,MERGED,2023-05-10 10:00:06.000000000,2023-09-01 10:44:37.000000000,2023-09-01 10:43:30.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-05-10 10:00:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/6ae03a2057d141a2b1bfdd17df36cd1cdfb15370', 'message': 'tox: Bump min_version to 4.3.0\n\ntox 4 is significantly faster when it comes to creating virtualenvs and\nis far better and detecting e.g. changes to requirements. tox 4.3.0\nincludes many of the fixes for bugs introduced by tox 4.0 and is a good\ndefault candidate.\n\nChange-Id: I0bb7f75ed3e03965ecd4d260c1299b46dcbf4b1b\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n'}, {'number': 2, 'created': '2023-08-25 10:35:24.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/194f59bea39ca3870815511b3437c19110b772c1', 'message': 'tox: Bump min_version to 4.3.0\n\ntox 4 is significantly faster when it comes to creating virtualenvs and\nis far better and detecting e.g. changes to requirements. tox 4.3.0\nincludes many of the fixes for bugs introduced by tox 4.0 and is a good\ndefault candidate.\n\nChange-Id: I0bb7f75ed3e03965ecd4d260c1299b46dcbf4b1b\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n'}]",2,882813,194f59bea39ca3870815511b3437c19110b772c1,16,3,2,15334,,,0,"tox: Bump min_version to 4.3.0

tox 4 is significantly faster when it comes to creating virtualenvs and
is far better and detecting e.g. changes to requirements. tox 4.3.0
includes many of the fixes for bugs introduced by tox 4.0 and is a good
default candidate.

Change-Id: I0bb7f75ed3e03965ecd4d260c1299b46dcbf4b1b
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/13/882813/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,6ae03a2057d141a2b1bfdd17df36cd1cdfb15370,tox-4,minversion = 4.3.0usedevelop = truecommands = stestr run {posargs}setenv =passenv = -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -r{toxinidir}/requirements.txt -r{toxinidir}/doc/requirements.txt commands = {posargs} -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -r{toxinidir}/doc/requirements.txt sphinx-build -a -E -W -d doc/build/doctrees -b html doc/source doc/build/html sphinx-build -a -E -W -d doc/build/doctrees -b man doc/source doc/build/man # Validate redirects (must be done after the docs build whereto doc/build/html/.htaccess doc/test/redirect-tests.txt -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -r{toxinidir}/doc/requirements.txt sphinx-build -a -E -W -d releasenotes/build/doctrees -b html releasenotes/source releasenotes/build/htmlshow-source = true,minversion = 3.18.0#skipsdist = True # Automatic envs (pyXX) will only use the python version appropriate to that # env and ignore basepython inherited from [testenv] if we set # ignore_basepython_conflict. ignore_basepython_conflict = Trueusedevelop = True basepython = python3commands = stestr run {posargs} allowlist_externals = stestrallowlist_externals = stestrsetenv = passenv = -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -r{toxinidir}/requirements.txt -r{toxinidir}/doc/requirements.txt commands = {posargs} -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -r{toxinidir}/doc/requirements.txt sphinx-build -a -E -W -d doc/build/doctrees -b html doc/source doc/build/html sphinx-build -a -E -W -d doc/build/doctrees -b man doc/source doc/build/man # Validate redirects (must be done after the docs build whereto doc/build/html/.htaccess doc/test/redirect-tests.txt -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} -r{toxinidir}/doc/requirements.txt sphinx-build -a -E -W -d releasenotes/build/doctrees -b html releasenotes/source releasenotes/build/htmlshow-source = True,21,27
openstack%2Fansible-collections-openstack~893193,openstack/ansible-collections-openstack,master,I5ce547352097ea821be4c9bbc18147575986c740,Fix usage of subnet_id key for router,MERGED,2023-08-30 14:11:31.000000000,2023-09-01 10:36:13.000000000,2023-09-01 10:36:13.000000000,"[{'_account_id': 22348}, {'_account_id': 32962}]","[{'number': 1, 'created': '2023-08-30 14:11:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/b0823690b339f9c75453fb8606e1860c6a19ad05', 'message': 'Fix usage of subnet_id key for router\n\nAt the moment `subnet` is an alias of `subnet_id`. The way, how aliases\nwork in ansible modules, is that ansible does add intended key to param\nin case alias is used. When riginal key is used, aliases are not\npopulated.\n\nRight now in case user define `subnet_id` instead of its alias `subnet`\nmodule will fail with KeyError.\n\nChange-Id: I5ce547352097ea821be4c9bbc18147575986c740\n'}, {'number': 2, 'created': '2023-08-31 09:56:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/803e5f563afc5a33691a713fc1d8f6fa979c8090', 'message': 'Fix usage of subnet_id key for router\n\nAt the moment `subnet` is an alias of `subnet_id`. The way, how aliases\nwork in ansible modules, is that ansible does add intended key to param\nin case alias is used. When riginal key is used, aliases are not\npopulated.\n\nRight now in case user define `subnet_id` instead of its alias `subnet`\nmodule will fail with KeyError.\n\nChange-Id: I5ce547352097ea821be4c9bbc18147575986c740\n'}, {'number': 3, 'created': '2023-08-31 13:09:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/a0f97c40da0446b28b579010a8a6843d341db0e7', 'message': 'Fix usage of subnet_id key for router\n\nAt the moment `subnet` is an alias of `subnet_id`. The way, how aliases\nwork in ansible modules, is that ansible does add intended key to param\nin case alias is used. When riginal key is used, aliases are not\npopulated.\n\nRight now in case user define `subnet_id` instead of its alias `subnet`\nmodule will fail with KeyError.\n\nChange-Id: I5ce547352097ea821be4c9bbc18147575986c740\n'}, {'number': 4, 'created': '2023-09-01 07:20:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/6538e3a32a13aa3775e5ef55a498cfd6c1eb59f9', 'message': 'Fix usage of subnet_id key for router\n\nAt the moment `subnet` is an alias of `subnet_id`. The way, how aliases\nwork in ansible modules, is that ansible does add intended key to param\nin case alias is used. When riginal key is used, aliases are not\npopulated.\n\nRight now in case user define `subnet_id` instead of its alias `subnet`\nmodule will fail with KeyError.\n\nChange-Id: I5ce547352097ea821be4c9bbc18147575986c740\n'}, {'number': 5, 'created': '2023-09-01 07:23:05.000000000', 'files': ['ci/roles/router/tasks/main.yml', 'plugins/modules/router.py'], 'web_link': 'https://opendev.org/openstack/ansible-collections-openstack/commit/9b47cb4b5933d862cbc739b1d819a424937a08cd', 'message': 'Fix usage of subnet_id key for router\n\nAt the moment `subnet` is an alias of `subnet_id`. The way, how aliases\nwork in ansible modules, is that ansible does add intended key to param\nin case alias is used. When riginal key is used, aliases are not\npopulated.\n\nRight now in case user define `subnet_id` instead of its alias `subnet`\nmodule will fail with KeyError.\n\nChange-Id: I5ce547352097ea821be4c9bbc18147575986c740\n'}]",0,893193,9b47cb4b5933d862cbc739b1d819a424937a08cd,13,2,5,28619,,,0,"Fix usage of subnet_id key for router

At the moment `subnet` is an alias of `subnet_id`. The way, how aliases
work in ansible modules, is that ansible does add intended key to param
in case alias is used. When riginal key is used, aliases are not
populated.

Right now in case user define `subnet_id` instead of its alias `subnet`
module will fail with KeyError.

Change-Id: I5ce547352097ea821be4c9bbc18147575986c740
",git fetch https://review.opendev.org/openstack/ansible-collections-openstack refs/changes/93/893193/1 && git format-patch -1 --stdout FETCH_HEAD,"['ci/roles/router/tasks/main.yml', 'plugins/modules/router.py']",2,b0823690b339f9c75453fb8606e1860c6a19ad05,," iface['subnet_id'], ignore_missing=False, **filters) iface['subnet_id'], ignore_missing=False, **filters)"," iface['subnet'], ignore_missing=False, **filters) iface['subnet'], ignore_missing=False, **filters)",15,15
openstack%2Fnova~871968,openstack/nova,stable/zed,I8ef9db851b37c5249d2efbe09a15a1ddbae8205d,libvirt: At start-up rework compareCPU() usage with a workaround,MERGED,2023-01-27 09:40:53.000000000,2023-09-01 10:25:10.000000000,2023-09-01 10:23:55.000000000,"[{'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 34860}]","[{'number': 1, 'created': '2023-01-27 09:40:53.000000000', 'files': ['nova/virt/libvirt/driver.py', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/1e1e40433c5df3cea099adc2894895701672cbeb', 'message': 'libvirt: At start-up rework compareCPU() usage with a workaround\n\nIn this patch:\n\n  - Remove the first compareCPU() call (called via the wrapper\n    _compare_cpu()) in _check_cpu_compatibility(), and let libvirt\n    handle it.  (QEMU >=2.9 and libvirt >= 4.4.0 are the mininum\n    required versions, and upstream Nova satisfies them by a good\n    margin.)\n\n  - Validate the user-configured CPU models from\n    _get_cpu_model_mapping().  And take into account all the CPU flags\n    before calling _compare_cpu().\n\n    (Suggested-by: Sean Mooney -- thanks!)\n\n  - Add a workaround to allow skipping the remaining compareCPU() call\n    in _check_cpu_compatibility() as a potential future-proof (because\n    we cannot test all possible CPU models and hardware).  Unlike the\n    removed first call, this call takes into account the extra CPU flags\n    provided by the user into account when evaluating guest CPU model\n    compatibility.\n\nAs a follow up comes the patch[1] that replaces the older libvirt CPU\nAPI with the newer one.\n\n[1] https://review.opendev.org/c/openstack/nova/+/869950 -- libvirt:\n    Replace usage of compareCPU() with compareHypervisorCPU()\n\nChange-Id: I8ef9db851b37c5249d2efbe09a15a1ddbae8205d\nSigned-off-by: Kashyap Chamarthy <kchamart@redhat.com>\n(cherry picked from commit 9caaaf1f221063a4329c72c8b67a6015648644a2)\n'}]",12,871968,1e1e40433c5df3cea099adc2894895701672cbeb,25,5,1,6962,,,0,"libvirt: At start-up rework compareCPU() usage with a workaround

In this patch:

  - Remove the first compareCPU() call (called via the wrapper
    _compare_cpu()) in _check_cpu_compatibility(), and let libvirt
    handle it.  (QEMU >=2.9 and libvirt >= 4.4.0 are the mininum
    required versions, and upstream Nova satisfies them by a good
    margin.)

  - Validate the user-configured CPU models from
    _get_cpu_model_mapping().  And take into account all the CPU flags
    before calling _compare_cpu().

    (Suggested-by: Sean Mooney -- thanks!)

  - Add a workaround to allow skipping the remaining compareCPU() call
    in _check_cpu_compatibility() as a potential future-proof (because
    we cannot test all possible CPU models and hardware).  Unlike the
    removed first call, this call takes into account the extra CPU flags
    provided by the user into account when evaluating guest CPU model
    compatibility.

As a follow up comes the patch[1] that replaces the older libvirt CPU
API with the newer one.

[1] https://review.opendev.org/c/openstack/nova/+/869950 -- libvirt:
    Replace usage of compareCPU() with compareHypervisorCPU()

Change-Id: I8ef9db851b37c5249d2efbe09a15a1ddbae8205d
Signed-off-by: Kashyap Chamarthy <kchamart@redhat.com>
(cherry picked from commit 9caaaf1f221063a4329c72c8b67a6015648644a2)
",git fetch https://review.opendev.org/openstack/nova refs/changes/68/871968/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/libvirt/driver.py', 'nova/conf/workarounds.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",3,1e1e40433c5df3cea099adc2894895701672cbeb,fix_compareCPU_usage," @mock.patch('nova.virt.libvirt.host.libvirt.Connection.compareCPU') def test__check_cpu_compatibility_skip_compare_at_init( self, mocked_compare ): self.flags(group='workarounds', skip_cpu_compare_at_startup=True) self.flags(cpu_mode=""custom"", cpu_models=[""Icelake-Server-noTSX""], cpu_model_extra_flags = [""-mpx""], group=""libvirt"") drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), True) drvr.init_host(""dummyhost"") mocked_compare.assert_not_called() @mock.patch.object(libvirt_driver.LibvirtDriver, '_register_all_undefined_instance_details', new=mock.Mock()) mocked_compare.side_effect = (-1, 0) mocked_compare.side_effect = (-1, 0) mocked_compare.side_effect = (-1, 0)"," mocked_compare.side_effect = (2, 0) mocked_compare.side_effect = (2, 0) mocked_compare.side_effect = (2, 0)",46,30
openstack%2Fkolla~893423,openstack/kolla,stable/yoga,I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2,Pin iptables to 1.8.4 in Centos Stream 8,MERGED,2023-08-31 17:57:48.000000000,2023-09-01 10:23:34.000000000,2023-09-01 10:22:37.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}]","[{'number': 1, 'created': '2023-08-31 17:57:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/20f5159456e295aac202f0a1f4dac6aea90559e4', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nBug in Centos Stream 8:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501\n\nChange-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2\n(cherry picked from commit 8f076857fde79477432c1377559a452c265297ce)\n'}, {'number': 2, 'created': '2023-08-31 18:36:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/5ea1e8d41bf9a40a9d889caa5e83b5fe7d6cacdf', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nBug in Centos Stream 8:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501\n\nChange-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2\n(cherry picked from commit 8f076857fde79477432c1377559a452c265297ce)\nSigned-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>\n'}, {'number': 3, 'created': '2023-09-01 07:22:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/65d140e6af18535e3e005b1e416db576ffb73284', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nBug in Centos Stream 8:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501\n\nChange-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2\n(cherry picked from commit 8f076857fde79477432c1377559a452c265297ce)\n'}, {'number': 4, 'created': '2023-09-01 07:24:48.000000000', 'files': ['docker/neutron/neutron-base/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/a76d93dfb9592830623cce46e2033d3542fd1da4', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nBug in Centos Stream 8:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501\n\nChange-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2\n(cherry picked from commit 8f076857fde79477432c1377559a452c265297ce)\n'}]",1,893423,a76d93dfb9592830623cce46e2033d3542fd1da4,18,3,4,14200,,,0,"Pin iptables to 1.8.4 in Centos Stream 8

Bug in Centos Stream 8:
[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501

Change-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2
(cherry picked from commit 8f076857fde79477432c1377559a452c265297ce)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/23/893423/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/neutron/neutron-base/Dockerfile.j2'],1,20f5159456e295aac202f0a1f4dac6aea90559e4,," 'iptables-1.8.4*',"," 'iptables',",1,1
openstack%2Fneutron~893030,openstack/neutron,master,Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a,[OVN] Cleanup old Hash Ring node entries,MERGED,2023-08-29 10:40:18.000000000,2023-09-01 10:04:36.000000000,2023-08-30 11:12:21.000000000,"[{'_account_id': 1131}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 30772}, {'_account_id': 32761}, {'_account_id': 35676}]","[{'number': 1, 'created': '2023-08-29 10:40:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ed18fb814bc7c85c6656fb44c83eff8adb91d958', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n""}, {'number': 2, 'created': '2023-08-29 10:51:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/7ec7dff051b427aa8afe487eb251712585f62822', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n""}, {'number': 3, 'created': '2023-08-29 11:09:43.000000000', 'files': ['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/7f777c223e557f7bb0e0290090019eaa60095b50', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n""}]",5,893030,7f777c223e557f7bb0e0290090019eaa60095b50,21,6,3,6773,,,0,"[OVN] Cleanup old Hash Ring node entries

This patch introduces a maintenance task that runs once a day and is
responsible for cleaning up Hash Ring nodes that haven't been updated in
5 days or more.

Change-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a
Closes-Bug: #2033281
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
",git fetch https://review.opendev.org/openstack/neutron refs/changes/30/893030/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py']",3,ed18fb814bc7c85c6656fb44c83eff8adb91d958,bug/2033281-hash-ring-cleanup," @periodics.periodic(spacing=86400, run_immediately=True) def cleanup_old_hash_ring_nodes(self): """"""Daily task to cleanup old stable Hash Ring node entries. Runs once a day and clean up Hash Ring entries that haven't been udpated in more than 5 days. See LP #2033281 for more information. """""" if not self.has_lock: return context = n_context.get_admin_context() hash_ring_db.cleanup_old_nodes(context, days=5) ",,48,0
openstack%2Fopenstack-ansible-os_neutron~886266,openstack/openstack-ansible-os_neutron,master,I122a7e2df0d546c18e4ec607abeb36cb0cec196f,Stop haproxy on ovn-controller nodes,MERGED,2023-06-16 15:01:25.000000000,2023-09-01 09:41:00.000000000,2023-09-01 09:40:02.000000000,"[{'_account_id': 13095}, {'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-06-16 15:01:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_neutron/commit/ea588f84f359df5103ab1fb141118e0da73135ef', 'message': 'Stop haproxy on ovn-controller nodes\n\ninclude ovn-controller nodes.\n\nChange-Id: I122a7e2df0d546c18e4ec607abeb36cb0cec196f\n'}, {'number': 2, 'created': '2023-08-21 13:32:57.000000000', 'files': ['tasks/neutron_post_install.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_neutron/commit/a3c09f159bf4dc545db18d16be32488e8ff85fb7', 'message': 'Stop haproxy on ovn-controller nodes\n\ninclude ovn-controller nodes.\n\nChange-Id: I122a7e2df0d546c18e4ec607abeb36cb0cec196f\n'}]",2,886266,a3c09f159bf4dc545db18d16be32488e8ff85fb7,13,4,2,13095,,,0,"Stop haproxy on ovn-controller nodes

include ovn-controller nodes.

Change-Id: I122a7e2df0d546c18e4ec607abeb36cb0cec196f
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_neutron refs/changes/66/886266/1 && git format-patch -1 --stdout FETCH_HEAD,['tasks/neutron_post_install.yml'],1,ea588f84f359df5103ab1fb141118e0da73135ef,ovn-haproxy-service, - ansible_facts['hostname'] in groups['neutron_metadata_agent'] or ansible_facts['hostname'] in groups['neutron_ovn_controller'], - ansible_facts['hostname'] in groups['neutron_metadata_agent'],1,1
openstack%2Fneutron~892903,openstack/neutron,master,I0162cf74e74ff915918d36bd1150d2ac474ac882,Update QoS config document: use YAML config examples,MERGED,2023-08-28 10:14:00.000000000,2023-09-01 09:08:09.000000000,2023-09-01 09:06:51.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 22348}, {'_account_id': 32761}]","[{'number': 1, 'created': '2023-08-28 10:14:00.000000000', 'files': ['doc/source/admin/config-qos.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/fa130f29f781006527d5846070d9040e8f56d414', 'message': 'Update QoS config document: use YAML config examples\n\nCloses-Bug: #2033203\nChange-Id: I0162cf74e74ff915918d36bd1150d2ac474ac882\n'}]",0,892903,fa130f29f781006527d5846070d9040e8f56d414,9,4,1,16688,,,0,"Update QoS config document: use YAML config examples

Closes-Bug: #2033203
Change-Id: I0162cf74e74ff915918d36bd1150d2ac474ac882
",git fetch https://review.opendev.org/openstack/neutron refs/changes/03/892903/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/config-qos.rst'],1,fa130f29f781006527d5846070d9040e8f56d414,bug/2033203," ""get_policy"": ""rule:regular_user"" ""create_policy"": ""rule:regular_user"" ""update_policy"": ""rule:regular_user"" ""delete_policy"": ""rule:regular_user"" ""get_rule_type"": ""rule:regular_user"" ""get_policy_bandwidth_limit_rule"": ""rule:regular_user"" ""create_policy_bandwidth_limit_rule"": ""rule:regular_user"" ""delete_policy_bandwidth_limit_rule"": ""rule:regular_user"" ""update_policy_bandwidth_limit_rule"": ""rule:regular_user"" ""get_policy_dscp_marking_rule"": ""rule:regular_user"" ""create_policy_dscp_marking_rule"": ""rule:regular_user"" ""delete_policy_dscp_marking_rule"": ""rule:regular_user"" ""update_policy_dscp_marking_rule"": ""rule:regular_user"" ""get_policy_minimum_bandwidth_rule"": ""rule:regular_user"" ""create_policy_minimum_bandwidth_rule"": ""rule:regular_user"" ""delete_policy_minimum_bandwidth_rule"": ""rule:regular_user"" ""update_policy_minimum_bandwidth_rule"": ""rule:regular_user"" ""get_policy_minimum_packet_rate_rule"": ""rule:regular_user"" ""create_policy_minimum_packet_rate_rule"": ""rule:regular_user"" ""delete_policy_minimum_packet_rate_rule"": ""rule:regular_user"" ""update_policy_minimum_packet_rate_rule"": ""rule:regular_user"""," ""get_policy"": ""rule:regular_user"", ""create_policy"": ""rule:regular_user"", ""update_policy"": ""rule:regular_user"", ""delete_policy"": ""rule:regular_user"", ""get_rule_type"": ""rule:regular_user"", ""get_policy_bandwidth_limit_rule"": ""rule:regular_user"", ""create_policy_bandwidth_limit_rule"": ""rule:regular_user"", ""delete_policy_bandwidth_limit_rule"": ""rule:regular_user"", ""update_policy_bandwidth_limit_rule"": ""rule:regular_user"", ""get_policy_dscp_marking_rule"": ""rule:regular_user"", ""create_policy_dscp_marking_rule"": ""rule:regular_user"", ""delete_policy_dscp_marking_rule"": ""rule:regular_user"", ""update_policy_dscp_marking_rule"": ""rule:regular_user"", ""get_policy_minimum_bandwidth_rule"": ""rule:regular_user"", ""create_policy_minimum_bandwidth_rule"": ""rule:regular_user"", ""delete_policy_minimum_bandwidth_rule"": ""rule:regular_user"", ""update_policy_minimum_bandwidth_rule"": ""rule:regular_user"", ""get_policy_minimum_packet_rate_rule"": ""rule:regular_user"", ""create_policy_minimum_packet_rate_rule"": ""rule:regular_user"", ""delete_policy_minimum_packet_rate_rule"": ""rule:regular_user"", ""update_policy_minimum_packet_rate_rule"": ""rule:regular_user"",",21,21
openstack%2Fglance~893439,openstack/glance,master,Ifdf4a3d844cc4ed4a3cb3225220a5a01ff961f43,Fix openstack-tox-py311 job,MERGED,2023-08-31 22:15:04.000000000,2023-09-01 09:08:01.000000000,2023-09-01 09:06:48.000000000,"[{'_account_id': 9303}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 22:15:04.000000000', 'files': ['bindep.txt'], 'web_link': 'https://opendev.org/openstack/glance/commit/b5f3a1dc5c52ebd2f72b4f0aa555c08b6c740e32', 'message': ""Fix openstack-tox-py311 job\n\nThe openstack-tox-py311 job (change I725b94bee6601a) was added to\nthe testing template by change I3b22ff95ab7b83a.  Since it uses a\ndebian bookworm nodeset, follow change I736ecb2a18d3 in adjusting\nglance's bindep.txt.\n\nChange-Id: Ifdf4a3d844cc4ed4a3cb3225220a5a01ff961f43\n""}]",2,893439,b5f3a1dc5c52ebd2f72b4f0aa555c08b6c740e32,13,2,1,5314,,,0,"Fix openstack-tox-py311 job

The openstack-tox-py311 job (change I725b94bee6601a) was added to
the testing template by change I3b22ff95ab7b83a.  Since it uses a
debian bookworm nodeset, follow change I736ecb2a18d3 in adjusting
glance's bindep.txt.

Change-Id: Ifdf4a3d844cc4ed4a3cb3225220a5a01ff961f43
",git fetch https://review.opendev.org/openstack/glance refs/changes/39/893439/1 && git format-patch -1 --stdout FETCH_HEAD,['bindep.txt'],1,b5f3a1dc5c52ebd2f72b4f0aa555c08b6c740e32,py311,mariadb-server [platform:redhat platform:debian]libmariadb-dev-compat [platform:debian] libmysqlclient-dev [platform:ubuntu]mysql-client [platform:dpkg !platform:debian] mysql-server [platform:dpkg !platform:debian],mariadb-server [platform:redhat]libmysqlclient-dev [platform:dpkg]mysql-client [platform:dpkg] mysql-server [platform:dpkg],5,4
openstack%2Fmagnum~824528,openstack/magnum,master,I507247d102a28542727d2725dcf0ddc64a6514a8,WIP: CI: Add functional devstack job,ABANDONED,2022-01-13 11:12:15.000000000,2023-09-01 08:29:33.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-01-13 11:12:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/eaad4c57306d884381095426e755f3ba69aaf061', 'message': 'WIP: CI: Add functional devstack job\n\nChange-Id: I507247d102a28542727d2725dcf0ddc64a6514a8\n'}, {'number': 2, 'created': '2022-01-13 11:46:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/834bf3fb9b830efde7f78bd4e64ec90963044eea', 'message': 'WIP: CI: Add functional devstack job\n\nChange-Id: I507247d102a28542727d2725dcf0ddc64a6514a8\n'}, {'number': 3, 'created': '2022-01-13 12:22:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/d6d6742d77b9f746c850cf3cb86434a467743407', 'message': 'WIP: CI: Add functional devstack job\n\nChange-Id: I507247d102a28542727d2725dcf0ddc64a6514a8\n'}, {'number': 4, 'created': '2022-01-13 15:12:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/fd2439c61c89721139c42a94b0d615044b58efbe', 'message': 'WIP: CI: Add functional devstack job\n\nChange-Id: I507247d102a28542727d2725dcf0ddc64a6514a8\n'}, {'number': 5, 'created': '2022-01-13 16:55:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/80bc66a5950aa947de3b8ef7021a9e5df1dd0fe9', 'message': 'WIP: CI: Add functional devstack job\n\nChange-Id: I507247d102a28542727d2725dcf0ddc64a6514a8\n'}, {'number': 6, 'created': '2022-01-14 07:27:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum/commit/88afba98d9bedecbca88803010b577e80e4cd356', 'message': 'WIP: CI: Add functional devstack job\n\nChange-Id: I507247d102a28542727d2725dcf0ddc64a6514a8\n'}, {'number': 7, 'created': '2022-01-14 09:03:41.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/magnum/commit/e5b0aa0e18b69156ea8067a80782ad42fcdbe709', 'message': 'WIP: CI: Add functional devstack job\n\nChange-Id: I507247d102a28542727d2725dcf0ddc64a6514a8\n'}]",1,824528,e5b0aa0e18b69156ea8067a80782ad42fcdbe709,15,1,7,22629,,,0,"WIP: CI: Add functional devstack job

Change-Id: I507247d102a28542727d2725dcf0ddc64a6514a8
",git fetch https://review.opendev.org/openstack/magnum refs/changes/28/824528/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,eaad4c57306d884381095426e755f3ba69aaf061,,- job: name: magnum-functional-devstack parent: devstack description: | Magnum functional tests job based on devstack (single-node). pre-run: playbooks/devstack/pre.yaml run: - playbooks/devstack/run-devstack.yaml - playbooks/devstack/run-tox.yaml post-run: playbooks/devstack/post.yaml required-projects: - openstack/magnum - openstack/magnum-tempest-plugin irrelevant-files: - ^api-ref/ - ^doc/ - ^magnum/tests/unit/ - ^releasenotes/ - ^\.coveragerc$ - ^\.gitignore$ - ^\.gitreview$ - ^\.mailmap$ - ^\.zuul\.yaml$ - ^LICENSE$ - ^.*[^/]+\.rst$ - ^bindep\.txt$ vars: devstack_plugins: magnum: https://opendev.org/openstack/magnum devstack_services: # NOTE(mnasiadka): Disable controller's swift (s-* services). # It is enabled by default by the parent job (devstack) definition. swift: false #- openstack-cover-jobs #- openstack-python3-victoria-jobs #- check-requirements #- publish-openstack-docs-pti #- release-notes-jobs-python3 - magnum-functional-devstack #- magnum-tempest-plugin-tests-api-temporary #- magnum-container-build, - openstack-cover-jobs - openstack-python3-victoria-jobs - check-requirements - publish-openstack-docs-pti - release-notes-jobs-python3 - magnum-tempest-plugin-tests-api-temporary - magnum-container-build,42,7
openstack%2Fopenstack-ansible~893407,openstack/openstack-ansible,master,I6579d1ef078e24eabce9051a7907bf6a3db7b9a8,Set correct language for docs,MERGED,2023-08-31 15:39:45.000000000,2023-09-01 08:23:19.000000000,2023-09-01 08:21:51.000000000,"[{'_account_id': 22348}, {'_account_id': 31542}, {'_account_id': 32666}]","[{'number': 1, 'created': '2023-08-31 15:39:45.000000000', 'files': ['doc/source/conf.py'], 'web_link': 'https://opendev.org/openstack/openstack-ansible/commit/8111839099114b33080a0a5b0c51971cb26c8837', 'message': ""Set correct language for docs\n\nHaving language set to None results in a warning since it is not an\nappropriate lagnuage name. Setting it to the default 'en'.\n\nChange-Id: I6579d1ef078e24eabce9051a7907bf6a3db7b9a8\n""}]",0,893407,8111839099114b33080a0a5b0c51971cb26c8837,8,3,1,28619,,,0,"Set correct language for docs

Having language set to None results in a warning since it is not an
appropriate lagnuage name. Setting it to the default 'en'.

Change-Id: I6579d1ef078e24eabce9051a7907bf6a3db7b9a8
",git fetch https://review.opendev.org/openstack/openstack-ansible refs/changes/07/893407/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/conf.py'],1,8111839099114b33080a0a5b0c51971cb26c8837,,language = 'en',language = None,1,1
openstack%2Fneutron-dynamic-routing~893189,openstack/neutron-dynamic-routing,master,Ie22d9bcb943205e20380b92dc33d48f398a86470,Bump Neutron to 23.0.0.0b3,MERGED,2023-08-30 13:55:36.000000000,2023-09-01 08:20:53.000000000,2023-09-01 08:19:52.000000000,"[{'_account_id': 13252}, {'_account_id': 16137}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 13:55:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-dynamic-routing/commit/3e350d54f3f7cfd921e2d04129b39276a221d565', 'message': 'Bump Neutron to 23.0.0.0b3\n\nThat syncs the Neutron code with the latest neutron-lib version\nreleased (3.8.0).\n\nCloses-Bug: #2033493\nChange-Id: Ie22d9bcb943205e20380b92dc33d48f398a86470\n'}, {'number': 2, 'created': '2023-08-31 11:04:55.000000000', 'files': ['requirements.txt', 'neutron_dynamic_routing/tests/unit/db/test_bgp_db.py'], 'web_link': 'https://opendev.org/openstack/neutron-dynamic-routing/commit/f7baab86ac94bd53bae10e25ea08c4f1b93b9e31', 'message': 'Bump Neutron to 23.0.0.0b3\n\nThat syncs the Neutron code with the latest neutron-lib version\nreleased (3.8.0).\n\nThis patch also adds the ""network.ha"" definition extension to\nthe tests core plugin.\n\nNOTE: both LP bugs must be fixed in one patch to fix the unit\ntests CI job.\n\nCloses-Bug: #2033493\nCloses-Bug: #2033508\nChange-Id: Ie22d9bcb943205e20380b92dc33d48f398a86470\n'}]",1,893189,f7baab86ac94bd53bae10e25ea08c4f1b93b9e31,12,4,2,16688,,,0,"Bump Neutron to 23.0.0.0b3

That syncs the Neutron code with the latest neutron-lib version
released (3.8.0).

This patch also adds the ""network.ha"" definition extension to
the tests core plugin.

NOTE: both LP bugs must be fixed in one patch to fix the unit
tests CI job.

Closes-Bug: #2033493
Closes-Bug: #2033508
Change-Id: Ie22d9bcb943205e20380b92dc33d48f398a86470
",git fetch https://review.opendev.org/openstack/neutron-dynamic-routing refs/changes/89/893189/1 && git format-patch -1 --stdout FETCH_HEAD,['requirements.txt'],1,3e350d54f3f7cfd921e2d04129b39276a221d565,bug/2033493,neutron>=23.0.0.0b3 # Apache-2.0,neutron>=23.0.0.0b2 # Apache-2.0,1,1
openstack%2Fcinder~798384,openstack/cinder,master,Ia0af0777eeae18cfabefb5df4fdeb562382c2299,NetApp ONTAP: Fix create FlexVol pool replica,MERGED,2021-06-28 21:11:14.000000000,2023-09-01 08:18:06.000000000,2023-09-01 01:03:50.000000000,"[{'_account_id': 4523}, {'_account_id': 22348}, {'_account_id': 27615}, {'_account_id': 29122}, {'_account_id': 30615}, {'_account_id': 33301}, {'_account_id': 33431}, {'_account_id': 33648}, {'_account_id': 35063}]","[{'number': 1, 'created': '2021-06-28 21:11:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/9bcf6229f7037681caa034b0360cc571cbec9a8d', 'message': 'NetApp ONTAP: Fix create FlexVol pool replica\n\nThe replication needs to map the origin cluster aggregates to destination.\nThe origin is got from the provisioning options that contains the aggregate\nas a list for FlexGroup pool and a string for FlexVol pool. This patch\nfixes the create operation by adding that aggregate condition check.\n\nChange-Id: Ia0af0777eeae18cfabefb5df4fdeb562382c2299\nCloses-Bug: #1927784\n'}, {'number': 2, 'created': '2023-05-24 13:44:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/b1e5c6686e25b3455f01151a01cf0bd077590cad', 'message': 'NetApp ONTAP: Fix create FlexVol pool replica\n\nThe replication needs to map the origin cluster aggregates to destination.\nThe origin is got from the provisioning options that contains the aggregate\nas a list for FlexGroup pool and a string for FlexVol pool. This patch\nfixes the create operation by adding that aggregate condition check.\n\nChange-Id: Ia0af0777eeae18cfabefb5df4fdeb562382c2299\nCloses-Bug: #1927784\n'}, {'number': 3, 'created': '2023-06-06 18:51:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/b35128078ca580c3bccf21f25ad302d81cd9bf20', 'message': 'NetApp ONTAP: Fix create FlexVol pool replica\n\nThe replication needs to map the origin cluster aggregates to destination.\nThe origin is got from the provisioning options that contains the aggregate\nas a list for FlexGroup pool and a string for FlexVol pool. This patch\nfixes the create operation by adding that aggregate condition check.\n\nChange-Id: Ia0af0777eeae18cfabefb5df4fdeb562382c2299\nCloses-Bug: #1927784\n'}, {'number': 4, 'created': '2023-06-23 20:19:50.000000000', 'files': ['cinder/tests/unit/volume/drivers/netapp/dataontap/client/fakes.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/utils/fakes.py', 'cinder/volume/drivers/netapp/dataontap/client/client_cmode_rest.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/client/test_client_cmode_rest.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/client/test_client_cmode.py', 'cinder/volume/drivers/netapp/dataontap/client/client_cmode.py', 'cinder/volume/drivers/netapp/dataontap/utils/capabilities.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/utils/test_data_motion.py', 'releasenotes/notes/netapp-ontap-fix-flexvol-replica-create-c7772837df20021f.yaml'], 'web_link': 'https://opendev.org/openstack/cinder/commit/0dc8d75229fec860c6fd82ecd772c242839e4e87', 'message': 'NetApp ONTAP: Fix create FlexVol pool replica\n\nThe replication needs to map the origin cluster aggregates to destination.\nThe origin is got from the provisioning options that contains the aggregate\nas a list for FlexGroup pool and a string for FlexVol pool. This patch\nfixes the create operation by adding that aggregate condition check.\n\nChange-Id: Ia0af0777eeae18cfabefb5df4fdeb562382c2299\nCloses-Bug: #1927784\n'}]",20,798384,0dc8d75229fec860c6fd82ecd772c242839e4e87,132,9,4,31721,,,0,"NetApp ONTAP: Fix create FlexVol pool replica

The replication needs to map the origin cluster aggregates to destination.
The origin is got from the provisioning options that contains the aggregate
as a list for FlexGroup pool and a string for FlexVol pool. This patch
fixes the create operation by adding that aggregate condition check.

Change-Id: Ia0af0777eeae18cfabefb5df4fdeb562382c2299
Closes-Bug: #1927784
",git fetch https://review.opendev.org/openstack/cinder refs/changes/84/798384/1 && git format-patch -1 --stdout FETCH_HEAD,"['cinder/volume/drivers/netapp/dataontap/utils/data_motion.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/utils/fakes.py', 'cinder/tests/unit/volume/drivers/netapp/dataontap/utils/test_data_motion.py', 'releasenotes/notes/netapp-ontap-fix-flexvol-replica-create-c7772837df20021f.yaml']",4,9bcf6229f7037681caa034b0360cc571cbec9a8d,bug/1927784,--- fixes: - | NetApp ONTAP driver `Bug #1927784 <https://bugs.launchpad.net/cinder/+bug/1927784>`_: Fixed the replication setup with FlexVol pools. ,,43,15
openstack%2Freleases~885702,openstack/releases,master,If4a52285959846f25f3ddd0d5914c639dd9a1e80,[watcher-tempest-plugin] Tag xena-last,MERGED,2023-06-09 06:09:12.000000000,2023-09-01 08:16:58.000000000,2023-09-01 08:16:58.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28748}]","[{'number': 1, 'created': '2023-06-09 06:09:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/b5ae9b942dcb6da773a9d734add0ceff3b4f8cc0', 'message': ""[watcher-tempest-plugin] Tag xena-last\n\nXena branch is in Extended Maintenance now[1]. Tempest and\ntempest plugins are branchless which means master version of\nTempest and its plugins is used to test the supported stable\nbranches.\n\nOnce any stable branch is moved to EM state then, Tempest and\nits plugins compatible tag[2] needs to be released so that we can\nkeep testing the EM stable branches with that tag once master\nTempest and its plugins are not compatible[3].\n\nTagging 'xena-last' with the latest hash which is nothing but 2.6.0\ntag.\n\n[1] https://review.opendev.org/c/openstack/releases/+/881254\n[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html\n[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html\n\nChange-Id: If4a52285959846f25f3ddd0d5914c639dd9a1e80\n""}, {'number': 2, 'created': '2023-08-31 17:04:32.000000000', 'files': ['deliverables/xena/watcher-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/29175cf61ecbf2f64f7095a7a4206cd6a2f2ed78', 'message': ""[watcher-tempest-plugin] Tag xena-last\n\nXena branch is in Extended Maintenance now[1]. Tempest and\ntempest plugins are branchless which means master version of\nTempest and its plugins is used to test the supported stable\nbranches.\n\nOnce any stable branch is moved to EM state then, Tempest and\nits plugins compatible tag[2] needs to be released so that we can\nkeep testing the EM stable branches with that tag once master\nTempest and its plugins are not compatible[3].\n\nTagging 'xena-last' with the latest hash which is nothing but 2.6.0\ntag.\n\n[1] https://review.opendev.org/c/openstack/releases/+/881254\n[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html\n[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html\n\nChange-Id: If4a52285959846f25f3ddd0d5914c639dd9a1e80\n""}]",6,885702,29175cf61ecbf2f64f7095a7a4206cd6a2f2ed78,20,4,2,8556,,,0,"[watcher-tempest-plugin] Tag xena-last

Xena branch is in Extended Maintenance now[1]. Tempest and
tempest plugins are branchless which means master version of
Tempest and its plugins is used to test the supported stable
branches.

Once any stable branch is moved to EM state then, Tempest and
its plugins compatible tag[2] needs to be released so that we can
keep testing the EM stable branches with that tag once master
Tempest and its plugins are not compatible[3].

Tagging 'xena-last' with the latest hash which is nothing but 2.6.0
tag.

[1] https://review.opendev.org/c/openstack/releases/+/881254
[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html

Change-Id: If4a52285959846f25f3ddd0d5914c639dd9a1e80
",git fetch https://review.opendev.org/openstack/releases refs/changes/02/885702/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/watcher-tempest-plugin.yaml'],1,b5ae9b942dcb6da773a9d734add0ceff3b4f8cc0,xena-last, - version: xena-last projects: - repo: openstack/watcher-tempest-plugin hash: 01ab036562b346bf2a558d96308c7e2d24f65f57,,4,0
openstack%2Frequirements~893363,openstack/requirements,master,I51b8e173d3571d4c9064c101d4ae29732ada83a7,update constraint for python-novaclient to new release 18.4.0,MERGED,2023-08-31 12:31:09.000000000,2023-09-01 07:44:27.000000000,2023-09-01 03:39:45.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-31 12:31:09.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/ece73b3ff7c11899b67a1c73fe5fd898d1fc58c9', 'message': 'update constraint for python-novaclient to new release 18.4.0\n\nmeta: version: 18.4.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Herv Beraud <hberaud@redhat.com>\nmeta: release:Commit: Herv Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: I1e3d71119f8dd4c689203d1c9e1d2b7c70f36f37\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+1: Amit Uniyal <auniyal@redhat.com>\nmeta: release:Code-Review+1: Sylvain Bauza <sbauza@redhat.com>\nChange-Id: I51b8e173d3571d4c9064c101d4ae29732ada83a7\n'}]",1,893363,ece73b3ff7c11899b67a1c73fe5fd898d1fc58c9,10,3,1,11131,,,0,"update constraint for python-novaclient to new release 18.4.0

meta: version: 18.4.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Herv Beraud <hberaud@redhat.com>
meta: release:Commit: Herv Beraud <hberaud@redhat.com>
meta: release:Change-Id: I1e3d71119f8dd4c689203d1c9e1d2b7c70f36f37
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+1: Amit Uniyal <auniyal@redhat.com>
meta: release:Code-Review+1: Sylvain Bauza <sbauza@redhat.com>
Change-Id: I51b8e173d3571d4c9064c101d4ae29732ada83a7
",git fetch https://review.opendev.org/openstack/requirements refs/changes/63/893363/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,ece73b3ff7c11899b67a1c73fe5fd898d1fc58c9,new-release,python-novaclient===18.4.0,python-novaclient===18.3.0,1,1
openstack%2Fkayobe~893435,openstack/kayobe,stable/xena,Ifadb3a8c52d39efe1aa0dc242827e7febce69e2c,Remove upgrade jobs following Wallaby EOL,MERGED,2023-08-31 20:19:15.000000000,2023-09-01 07:41:44.000000000,2023-09-01 07:39:38.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-08-31 20:19:15.000000000', 'files': ['zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/55e83aff27ccf64cb41874c6d90dc2aabf1c1936', 'message': 'Remove upgrade jobs following Wallaby EOL\n\nThe stable/wallaby branch was deleted with the end of life of the\nWallaby release [1], which will cause Xena upgrade jobs to fail.\n\nAlso re-enable Ubuntu jobs which were disabled due to RabbitMQ packaging\nissues.\n\n[1] https://review.opendev.org/c/openstack/releases/+/886978\n\nChange-Id: Ifadb3a8c52d39efe1aa0dc242827e7febce69e2c\n'}]",0,893435,55e83aff27ccf64cb41874c6d90dc2aabf1c1936,7,2,1,15197,,,0,"Remove upgrade jobs following Wallaby EOL

The stable/wallaby branch was deleted with the end of life of the
Wallaby release [1], which will cause Xena upgrade jobs to fail.

Also re-enable Ubuntu jobs which were disabled due to RabbitMQ packaging
issues.

[1] https://review.opendev.org/c/openstack/releases/+/886978

Change-Id: Ifadb3a8c52d39efe1aa0dc242827e7febce69e2c
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/35/893435/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/project.yaml'],1,55e83aff27ccf64cb41874c6d90dc2aabf1c1936,, - kayobe-overcloud-ubuntu-focal - kayobe-overcloud-ubuntu-focal," # - kayobe-overcloud-ubuntu-focal Note(mattcrees): Job temporarily disabled until fix is merged, see: https://review.opendev.org/c/openstack/kolla/+/885857 - kayobe-overcloud-upgrade-centos8s # - kayobe-overcloud-upgrade-ubuntu-focal Note(mattcrees): Job temporarily disabled until fix is merged, see: https://review.opendev.org/c/openstack/kolla/+/885857 - kayobe-seed-upgrade-centos8s - kayobe-seed-upgrade-ubuntu-focal # - kayobe-overcloud-ubuntu-focal Note(mattcrees): Job temporarily disabled until fix is merged, see: https://review.opendev.org/c/openstack/kolla/+/885857 - kayobe-overcloud-upgrade-centos8s # - kayobe-overcloud-upgrade-ubuntu-focal Note(mattcrees): Job temporarily disabled until fix is merged, see: https://review.opendev.org/c/openstack/kolla/+/885857 - kayobe-seed-upgrade-centos8s - kayobe-seed-upgrade-ubuntu-focal",2,10
openstack%2Fcharm-ceph-radosgw~893461,openstack/charm-ceph-radosgw,stable/quincy.2,Id6777eb23b3b4cc6b0fb239a61d64502a5d74451,Add build-on/run-on to support Ubuntu 20.04,MERGED,2023-09-01 01:28:24.000000000,2023-09-01 07:21:48.000000000,2023-09-01 07:21:48.000000000,"[{'_account_id': 8992}, {'_account_id': 15382}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-09-01 01:28:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-ceph-radosgw/commit/dc038f5132b6fa73be3a6d48ff741381f27a2b16', 'message': 'Add build-on/run-on to support Ubuntu 20.04\n\nCloses-Bug: #2033673\nChange-Id: Id6777eb23b3b4cc6b0fb239a61d64502a5d74451\n'}, {'number': 2, 'created': '2023-09-01 01:42:06.000000000', 'files': ['test-requirements.txt', 'charmcraft.yaml'], 'web_link': 'https://opendev.org/openstack/charm-ceph-radosgw/commit/c9d220af1fa50b51fbbcd4961337f3d2503fefbc', 'message': ""Add build-on/run-on to support Ubuntu 20.04\n\nTo fix the build jsonschema is pinned to the latest version that doesn't\ndepend (indirectly) on Rust.\n\nCloses-Bug: #2033673\nChange-Id: Id6777eb23b3b4cc6b0fb239a61d64502a5d74451\n""}]",1,893461,c9d220af1fa50b51fbbcd4961337f3d2503fefbc,11,5,2,2424,,,0,"Add build-on/run-on to support Ubuntu 20.04

To fix the build jsonschema is pinned to the latest version that doesn't
depend (indirectly) on Rust.

Closes-Bug: #2033673
Change-Id: Id6777eb23b3b4cc6b0fb239a61d64502a5d74451
",git fetch https://review.opendev.org/openstack/charm-ceph-radosgw refs/changes/61/893461/1 && git format-patch -1 --stdout FETCH_HEAD,['charmcraft.yaml'],1,dc038f5132b6fa73be3a6d48ff741381f27a2b16,bug/2033673," channel: ""20.04"" channel: ""20.04"" architectures: [amd64, s390x, ppc64el, arm64] - name: ubuntu"," channel: ""22.04""",4,1
openstack%2Fkolla~893359,openstack/kolla,stable/yoga,I123a3e69d454b1a8d828b35d1bae116d358791f6,Pin iptables to 1.8.4 in Centos Stream 8,ABANDONED,2023-08-31 11:29:24.000000000,2023-09-01 07:21:19.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-31 11:29:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/881e05f1924ce1414e46208657b980734739e5ed', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nChange-Id: I123a3e69d454b1a8d828b35d1bae116d358791f6\n'}, {'number': 2, 'created': '2023-08-31 13:39:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/fefc25a3c5b6c77561a8ceff35d3fbd33bb24616', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nBug in Centos Stream 8:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501\n\nChange-Id: I123a3e69d454b1a8d828b35d1bae116d358791f6\n'}, {'number': 3, 'created': '2023-09-01 06:37:00.000000000', 'files': ['docker/neutron/neutron-base/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/5dad535fff2865c42663481bab9a44cd623d3653', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nBug in Centos Stream 8:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501\n\nChange-Id: I123a3e69d454b1a8d828b35d1bae116d358791f6\n(cherry picked from commit 8f076857fde79477432c1377559a452c265297ce)\n'}]",1,893359,5dad535fff2865c42663481bab9a44cd623d3653,8,1,3,23084,,,0,"Pin iptables to 1.8.4 in Centos Stream 8

Bug in Centos Stream 8:
[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501

Change-Id: I123a3e69d454b1a8d828b35d1bae116d358791f6
(cherry picked from commit 8f076857fde79477432c1377559a452c265297ce)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/59/893359/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/neutron/neutron-base/Dockerfile.j2'],1,881e05f1924ce1414e46208657b980734739e5ed,," {% if base_distro == ""centos"" and base_distro_tag.startswith('stream8') %} {% set neutron_base_packages = neutron_base_packages + [ 'iptables-1.8.4*' ] %} {% else %} {% set neutron_base_packages = neutron_base_packages + [ 'iptables' ] %} {% endif %} "," 'iptables',",10,1
openstack%2Fneutron~893028,openstack/neutron,master,I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""",MERGED,2023-08-29 10:19:06.000000000,2023-09-01 07:10:07.000000000,2023-08-29 18:10:10.000000000,"[{'_account_id': 1131}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-29 10:19:06.000000000', 'files': ['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4', 'message': '[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""\n\nThe functional test ""TestMaintenance.test_port_forwarding"" is checking\nthe ""registry.publish"" call after calling\n""delete_floatingip_port_forwarding"". This patch makes this check\nexplicit for the expected call.\n\nCloses-Bug: #2033387\nChange-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0\n'}]",0,893028,d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4,9,3,1,16688,,,0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""

The functional test ""TestMaintenance.test_port_forwarding"" is checking
the ""registry.publish"" call after calling
""delete_floatingip_port_forwarding"". This patch makes this check
explicit for the expected call.

Closes-Bug: #2033387
Change-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0
",git fetch https://review.opendev.org/openstack/neutron refs/changes/28/893028/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'],1,d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4,bug/2033387," call = mock.call('port_forwarding', 'after_delete', self.pf_plugin, payload=mock.ANY) m_publish.assert_has_calls([call])", m_publish.assert_called_once(),3,1
openstack%2Fpython-cloudkittyclient~893046,openstack/python-cloudkittyclient,master,Id8249ebb15d4047dcc6181908eae66eb39722863,Fix passenv declaration in tox.ini and function tests python env,MERGED,2023-08-29 12:44:50.000000000,2023-09-01 06:46:16.000000000,2023-09-01 00:39:22.000000000,"[{'_account_id': 22348}, {'_account_id': 28356}]","[{'number': 1, 'created': '2023-08-29 12:44:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/aa90e416ed80cb93512f21c3c2475c0b710e1fb0', 'message': ""Fix passenv declaration in tox.ini\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 2, 'created': '2023-08-29 13:35:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/bc178c39923e3d08a9a6e0092b309cac43a021ed', 'message': ""Fix passenv declaration in tox.ini\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 3, 'created': '2023-08-29 20:09:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/8e5f5db54b7ea34fe792d46bf801ba2f5c61361c', 'message': ""Fix passenv declaration in tox.ini\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 4, 'created': '2023-08-29 20:10:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/086788eef8b135002ae7b84493349fe14539eeec', 'message': ""Fix passenv declaration in tox.ini\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 5, 'created': '2023-08-29 22:47:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/6c3670e5e0caa243f6c9e5f4a43009b9664f416e', 'message': ""Fix passenv declaration in tox.ini\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 6, 'created': '2023-08-29 22:49:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/c0b6b30235993b7070e323bc8d6f2d1213ff2b51', 'message': ""Fix passenv declaration in tox.ini\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 7, 'created': '2023-08-30 10:41:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/5df368b88dea071d1ac7e2d379dba142dc42c17f', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 8, 'created': '2023-08-30 11:00:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/fc4584d110b44753ff5a4a64547b916dff0b3e1b', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 9, 'created': '2023-08-30 12:39:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/1c5578ab0ad4840a4cc86ec4c2217fcf96a4cd71', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 10, 'created': '2023-08-30 14:00:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/89b567a31ee67388ecc2da9fce3ae43c1d147ecd', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 11, 'created': '2023-08-30 14:21:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/248dbda10316005b5e40d440b9729b7cf75cf3d9', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 12, 'created': '2023-08-30 19:08:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/53f0e7392abbe6b4b354a9a540768498af111a29', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 13, 'created': '2023-08-30 19:56:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/c45ad92e9ddcbb76eef6a0698d223bd45a6858b3', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 14, 'created': '2023-08-31 11:04:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/518ccb8c6fa2a997f41640519fe2373566845c98', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 15, 'created': '2023-08-31 11:29:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/65abdaa0204c7c918b8ca9472a5770f3d6609d91', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 16, 'created': '2023-08-31 12:42:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/1c94ce4a3f5aa2fdb44068f036fa97dd7925de37', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 17, 'created': '2023-08-31 13:44:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/3a6fd6e902c27c2c74707424e23f7451f0d8220c', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 18, 'created': '2023-08-31 14:36:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/34ae6e8aaf4c457b1956b917407cc5f67088d03d', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 19, 'created': '2023-08-31 16:11:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/16fad1681b099f12e2f969210514f5ccfc10b9b1', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 20, 'created': '2023-08-31 17:33:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/9989a404c8f32a41618aa9c13ff0bd87848062bd', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 21, 'created': '2023-08-31 17:59:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/b730152bbf9319218844993aa79b86e49e4bb544', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 22, 'created': '2023-08-31 18:47:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/09208ae2706fab256d2c080d76a06c5731215070', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 23, 'created': '2023-08-31 18:56:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/d3cd1258934c758420e7925e3f4aa6566fc9b3b9', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 24, 'created': '2023-08-31 19:28:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/855ae46e6e36547c27650715445794dc101208db', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 25, 'created': '2023-08-31 20:23:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/8f40229224fb007185ba87b0f1aca4efa7950314', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 26, 'created': '2023-08-31 20:29:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/e2e15029e50599dbfe2778726d036afe59d40684', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 27, 'created': '2023-08-31 20:38:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/f760308973199b00c041e1969f7219aa5cbdd041', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}, {'number': 28, 'created': '2023-08-31 23:18:48.000000000', 'files': ['.gitignore', 'tox.ini', 'cloudkittyclient/tests/functional/base.py'], 'web_link': 'https://opendev.org/openstack/python-cloudkittyclient/commit/244f229af7cb95b82118da9a4873806942a895ef', 'message': ""Fix passenv declaration in tox.ini and function tests python env\n\nWhile running the tests with the latest tox I was getting the following error message:\n```\nfailed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'\n\n```\n\nThat error is happening because of the passenv declaration. This patch is proposing a fix for that.\n\nBesides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.\nThis patches presents a solution to run tests using the virtual env of DevStack.\n\nChange-Id: Id8249ebb15d4047dcc6181908eae66eb39722863\n""}]",10,893046,244f229af7cb95b82118da9a4873806942a895ef,60,2,28,28356,,,0,"Fix passenv declaration in tox.ini and function tests python env

While running the tests with the latest tox I was getting the following error message:
```
failed with pass_env values cannot contain whitespace, use comma to have multiple values in a single line'

```

That error is happening because of the passenv declaration. This patch is proposing a fix for that.

Besides the `tox` issue, we also needed to create a patch for the use of virtual env inside DevStack.
This patches presents a solution to run tests using the virtual env of DevStack.

Change-Id: Id8249ebb15d4047dcc6181908eae66eb39722863
",git fetch https://review.opendev.org/openstack/python-cloudkittyclient refs/changes/46/893046/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,aa90e416ed80cb93512f21c3c2475c0b710e1fb0,fix-ci,passenv = OS_CLOUD OS_PROJECT_DOMAIN_ID OS_USER_DOMAIN_ID OS_PROJECT_DOMAIN_NAME OS_USER_DOMAIN_NAME OS_PROJECT_NAME OS_IDENTITY_API_VERSION OS_PASSWORD OS_AUTH_TYPE OS_AUTH_URL OS_USERNAME OS_ENDPOINTpassenv = OS_CLOUD OS_PROJECT_DOMAIN_ID OS_USER_DOMAIN_ID OS_PROJECT_DOMAIN_NAME OS_USER_DOMAIN_NAME OS_PROJECT_NAME OS_IDENTITY_API_VERSION OS_PASSWORD OS_AUTH_TYPE OS_AUTH_URL OS_USERNAME OS_ENDPOINT,passenv = OS_CLOUD OS_PROJECT_DOMAIN_ID OS_USER_DOMAIN_ID OS_PROJECT_DOMAIN_NAME OS_USER_DOMAIN_NAME OS_PROJECT_NAME OS_IDENTITY_API_VERSION OS_PASSWORD OS_AUTH_TYPE OS_AUTH_URL OS_USERNAME OS_ENDPOINTpassenv = OS_CLOUD OS_PROJECT_DOMAIN_ID OS_USER_DOMAIN_ID OS_PROJECT_DOMAIN_NAME OS_USER_DOMAIN_NAME OS_PROJECT_NAME OS_IDENTITY_API_VERSION OS_PASSWORD OS_AUTH_TYPE OS_AUTH_URL OS_USERNAME OS_ENDPOINT,25,2
openstack%2Fsenlin~892619,openstack/senlin,master,I9c6f20bca9681a3076e30cb67155d5ba0ce56045,Senlin release notes for Bobcat,MERGED,2023-08-30 10:22:18.000000000,2023-09-01 05:56:56.000000000,2023-08-30 11:09:02.000000000,"[{'_account_id': 22348}, {'_account_id': 22998}]","[{'number': 1, 'created': '2023-08-30 10:22:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/senlin/commit/5529c8dfdb6af7ee19dc9971d00f73790af0b16f', 'message': 'Senlin release notes for Bobcat\n\nChange-Id: I9c6f20bca9681a3076e30cb67155d5ba0ce56045\n'}, {'number': 2, 'created': '2023-08-30 10:35:51.000000000', 'files': ['releasenotes/notes/switch-to-alembic-migrations-f442d0b58c3f13a6.yaml', 'releasenotes/notes/health-add-cleanup-2d5143ec2bb78e55.yaml', 'releasenotes/notes/db-switch-alembic-ab4b5e2f2a85974d.yaml', 'releasenotes/notes/support-volume-type-07d608097c711460.yaml', 'releasenotes/notes/support-subnet-c2492ce8a377b1af.yaml'], 'web_link': 'https://opendev.org/openstack/senlin/commit/f6edeaba3e3fc3cbf2d3536831b0fbf624cca1d0', 'message': 'Senlin release notes for Bobcat\n\nChange-Id: I9c6f20bca9681a3076e30cb67155d5ba0ce56045\n'}]",3,892619,f6edeaba3e3fc3cbf2d3536831b0fbf624cca1d0,11,2,2,22998,,,0,"Senlin release notes for Bobcat

Change-Id: I9c6f20bca9681a3076e30cb67155d5ba0ce56045
",git fetch https://review.opendev.org/openstack/senlin refs/changes/19/892619/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/switch-to-alembic-migrations-f442d0b58c3f13a6.yaml', 'releasenotes/notes/health-add-cleanup-2d5143ec2bb78e55.yaml', 'releasenotes/notes/db-switch-alembic-ab4b5e2f2a85974d.yaml', 'releasenotes/notes/support-volume-type-07d608097c711460.yaml', 'releasenotes/notes/support-subnet-c2492ce8a377b1af.yaml']",5,5529c8dfdb6af7ee19dc9971d00f73790af0b16f,,"--- features: - Support create profile with subnet. Allow to define subnet in profile, default network port will find a random subnet to create port on, user can define specific subnet. ",,18,0
openstack%2Fsenlin~893248,openstack/senlin,master,Ica7d4dafe0ff1b65853155e79c11da7ab7e392ed,Remove duplicate note for db switch,MERGED,2023-08-31 07:32:23.000000000,2023-09-01 05:55:29.000000000,2023-09-01 02:56:21.000000000,"[{'_account_id': 22348}, {'_account_id': 22623}, {'_account_id': 22998}]","[{'number': 1, 'created': '2023-08-31 07:32:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/senlin/commit/42015a92a07d6c8db20a233437516a2c72a44245', 'message': 'Remove duplicate note for db switch\n\nChange-Id: Ica7d4dafe0ff1b65853155e79c11da7ab7e392ed\n'}, {'number': 2, 'created': '2023-08-31 08:17:17.000000000', 'files': ['releasenotes/notes/db-switch-alembic-ab4b5e2f2a85974d.yaml'], 'web_link': 'https://opendev.org/openstack/senlin/commit/cef004c05bbc209239e749270ad090063971b4d7', 'message': 'Remove duplicate note for db switch\n\nChange-Id: Ica7d4dafe0ff1b65853155e79c11da7ab7e392ed\n'}]",1,893248,cef004c05bbc209239e749270ad090063971b4d7,11,3,2,22998,,,0,"Remove duplicate note for db switch

Change-Id: Ica7d4dafe0ff1b65853155e79c11da7ab7e392ed
",git fetch https://review.opendev.org/openstack/senlin refs/changes/48/893248/1 && git format-patch -1 --stdout FETCH_HEAD,[],0,42015a92a07d6c8db20a233437516a2c72a44245,,,,0,0
openstack%2Fironic~893379,openstack/ironic,master,I3c76ddfb89b92d3d4bc29b7ccab4362604775568,log the version of the conductor starting,MERGED,2023-08-31 14:22:11.000000000,2023-09-01 05:38:13.000000000,2023-09-01 05:36:57.000000000,"[{'_account_id': 4571}, {'_account_id': 10342}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 14:22:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/eafd8167b10c54d08d1673b789ec223947696574', 'message': ""log the version of the conductor starting\n\nJulia, who has been looking at Metal3 container logs a lot, is tired of\nnot being able to easily figure out when on the timeline of the git repo\nthat the container's source code was running from. So instead of guessing\nand having to figure out based upon behavior/logs, just log the version\nthe software believes itself to be using the existing version info,\nsimilar to how we do it with IPA.\n\nChange-Id: I3c76ddfb89b92d3d4bc29b7ccab4362604775568\n""}, {'number': 2, 'created': '2023-08-31 14:22:23.000000000', 'files': ['ironic/conductor/base_manager.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/6d2243b916ef5503f3524a7424ca69a963dc2d16', 'message': ""log the version of the conductor starting\n\nJulia, who has been looking at Metal3 container logs a lot, is tired of\nnot being able to easily figure out when on the timeline of the git repo\nthat the container's source code was running from. So instead of guessing\nand having to figure out based upon behavior/logs, just log the version\nthe software believes itself to be using the existing version info,\nsimilar to how we do it with IPA.\n\nChange-Id: I3c76ddfb89b92d3d4bc29b7ccab4362604775568\n""}]",1,893379,6d2243b916ef5503f3524a7424ca69a963dc2d16,10,3,2,11655,,,0,"log the version of the conductor starting

Julia, who has been looking at Metal3 container logs a lot, is tired of
not being able to easily figure out when on the timeline of the git repo
that the container's source code was running from. So instead of guessing
and having to figure out based upon behavior/logs, just log the version
the software believes itself to be using the existing version info,
similar to how we do it with IPA.

Change-Id: I3c76ddfb89b92d3d4bc29b7ccab4362604775568
",git fetch https://review.opendev.org/openstack/ironic refs/changes/79/893379/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic/conductor/base_manager.py'],1,eafd8167b10c54d08d1673b789ec223947696574,ovn-devstack,"from ironic import version LOG.debug('Started Ironic Conductor - %s', version.version_info.release_string())",,3,1
openstack%2Fcinder~889998,openstack/cinder,master,Ib4dbc1396e2c814e4d3c4a15f9c488088571e6e0,Imported Translations from Zanata,MERGED,2023-07-29 03:21:41.000000000,2023-09-01 04:48:34.000000000,2023-08-16 16:16:44.000000000,"[{'_account_id': 5314}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-07-29 03:21:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/b002214456161d487afa2515e404b5ca23f489ac', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: Ib4dbc1396e2c814e4d3c4a15f9c488088571e6e0\n'}, {'number': 2, 'created': '2023-08-03 04:09:53.000000000', 'files': ['releasenotes/source/locale/en_GB/LC_MESSAGES/releasenotes.po'], 'web_link': 'https://opendev.org/openstack/cinder/commit/24c712f49dd74362a0e1cf283e6e74e406a81ba3', 'message': 'Imported Translations from Zanata\n\nFor more information about this automatic import see:\nhttps://docs.openstack.org/i18n/latest/reviewing-translation-import.html\n\nChange-Id: Ib4dbc1396e2c814e4d3c4a15f9c488088571e6e0\n'}]",1,889998,24c712f49dd74362a0e1cf283e6e74e406a81ba3,45,2,2,11131,,,0,"Imported Translations from Zanata

For more information about this automatic import see:
https://docs.openstack.org/i18n/latest/reviewing-translation-import.html

Change-Id: Ib4dbc1396e2c814e4d3c4a15f9c488088571e6e0
",git fetch https://review.opendev.org/openstack/cinder refs/changes/98/889998/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/source/locale/en_GB/LC_MESSAGES/releasenotes.po'],1,b002214456161d487afa2515e404b5ca23f489ac,zanata/translations,"""POT-Creation-Date: 2023-07-27 08:59+0000\n""""PO-Revision-Date: 2023-07-29 01:44+0000\n""msgid ""17.4.0-11"" msgstr ""17.4.0-11""msgid ""20.3.0-7"" msgstr ""20.3.0-7""msgid ""21.3.0-5"" msgstr ""21.3.0-5""msgid ""22.0.0.0rc1-90"" msgstr ""22.0.0.0rc1-90""msgid ""22.1.0-3"" msgstr ""22.1.0-3""msgid ""Yadro Tatlin Unified: Added initial version of the FC driver."" msgstr ""Yadro Tatlin Unified: Added initial version of the FC driver."" ""[Pure Storage] 'bug #2028380 <https://bugs.launchpad.net/cinder/"" ""+bug/2028380>'_: Fixed issue with cinder replication failover failing due to "" ""incorrect REST call."" msgstr """" ""[Pure Storage] 'bug #2028380 <https://bugs.launchpad.net/cinder/"" ""+bug/2028380>'_: Fixed issue with Cinder replication failover failing due to "" ""incorrect REST call."" msgid """"","""POT-Creation-Date: 2023-07-18 13:06+0000\n""""PO-Revision-Date: 2023-07-20 12:17+0000\n""msgid ""17.4.0-10"" msgstr ""17.4.0-10""msgid ""20.3.0-3"" msgstr ""20.3.0-3""msgid ""21.3.0-3"" msgstr ""21.3.0-3""msgid ""22.0.0.0rc1-83"" msgstr ""22.0.0.0rc1-83""msgid ""22.1.0-2"" msgstr ""22.1.0-2""",24,12
openstack%2Frequirements~893353,openstack/requirements,master,I75fbed9895fa8b71ec33645a6e520413a96d5ac7,update constraint for metalsmith to new release 2.0.1,MERGED,2023-08-31 10:21:26.000000000,2023-09-01 04:33:28.000000000,2023-09-01 04:31:53.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 10:21:26.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/50ed40d772899e65e1d62c894565a8333699b02e', 'message': 'update constraint for metalsmith to new release 2.0.1\n\nmeta: version: 2.0.1\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: no\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Riccardo Pittau <elfosardo@gmail.com>\nmeta: release:Change-Id: I2f5264b77374a76047eab4657741ab2d7cd947f9\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+1: Riccardo Pittau <elfosardo@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: I75fbed9895fa8b71ec33645a6e520413a96d5ac7\n'}]",1,893353,50ed40d772899e65e1d62c894565a8333699b02e,9,2,1,11131,,,0,"update constraint for metalsmith to new release 2.0.1

meta: version: 2.0.1
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: no
meta: first: no
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Riccardo Pittau <elfosardo@gmail.com>
meta: release:Change-Id: I2f5264b77374a76047eab4657741ab2d7cd947f9
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+1: Riccardo Pittau <elfosardo@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: I75fbed9895fa8b71ec33645a6e520413a96d5ac7
",git fetch https://review.opendev.org/openstack/requirements refs/changes/53/893353/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,50ed40d772899e65e1d62c894565a8333699b02e,new-release,metalsmith===2.0.1,metalsmith===2.0.0,1,1
openstack%2Frequirements~893350,openstack/requirements,master,I8475e7cb101f58dc3e5b9e51427a7649c27e269c,update constraint for python-zunclient to new release 4.7.0,MERGED,2023-08-31 10:17:56.000000000,2023-09-01 04:32:46.000000000,2023-09-01 04:31:48.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 10:17:56.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/ee72eb3526d47d05fda419fd296ac4b3460ba6c2', 'message': 'update constraint for python-zunclient to new release 4.7.0\n\nmeta: version: 4.7.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Herv Beraud <hberaud@redhat.com>\nmeta: release:Commit: Herv Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: Ifae084610be836ffee2915aea121c3992526007d\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+1: hongbin <hongbin034@gmail.com>\nChange-Id: I8475e7cb101f58dc3e5b9e51427a7649c27e269c\n'}]",1,893350,ee72eb3526d47d05fda419fd296ac4b3460ba6c2,9,2,1,11131,,,0,"update constraint for python-zunclient to new release 4.7.0

meta: version: 4.7.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Herv Beraud <hberaud@redhat.com>
meta: release:Commit: Herv Beraud <hberaud@redhat.com>
meta: release:Change-Id: Ifae084610be836ffee2915aea121c3992526007d
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+1: hongbin <hongbin034@gmail.com>
Change-Id: I8475e7cb101f58dc3e5b9e51427a7649c27e269c
",git fetch https://review.opendev.org/openstack/requirements refs/changes/50/893350/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,ee72eb3526d47d05fda419fd296ac4b3460ba6c2,new-release,python-zunclient===4.7.0,python-zunclient===4.6.0,1,1
openstack%2Frequirements~893351,openstack/requirements,master,I2d06fd16894a60e37e2e7a0d0283aad744e9d1fc,update constraint for openstacksdk to new release 1.5.0,MERGED,2023-08-31 10:18:54.000000000,2023-09-01 04:31:51.000000000,2023-09-01 04:31:51.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 10:18:54.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/68d42f7512bc6a7b030a024a6f3b0d8f10f1f223', 'message': 'update constraint for openstacksdk to new release 1.5.0\n\nmeta: version: 1.5.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Artem Goncharov <artem.goncharov@gmail.com>\nmeta: release:Change-Id: Ib894e366e7916aa240b70c7462cf8783b2ab0cab\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+1: Lajos Katona <katonalala@gmail.com>\nChange-Id: I2d06fd16894a60e37e2e7a0d0283aad744e9d1fc\n'}]",1,893351,68d42f7512bc6a7b030a024a6f3b0d8f10f1f223,8,2,1,11131,,,0,"update constraint for openstacksdk to new release 1.5.0

meta: version: 1.5.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Artem Goncharov <artem.goncharov@gmail.com>
meta: release:Change-Id: Ib894e366e7916aa240b70c7462cf8783b2ab0cab
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+1: Lajos Katona <katonalala@gmail.com>
Change-Id: I2d06fd16894a60e37e2e7a0d0283aad744e9d1fc
",git fetch https://review.opendev.org/openstack/requirements refs/changes/51/893351/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,68d42f7512bc6a7b030a024a6f3b0d8f10f1f223,new-release,openstacksdk===1.5.0,openstacksdk===1.4.0,1,1
openstack%2Frequirements~893347,openstack/requirements,master,I7e7c06839785f929f6d1296a413549ee543d2598,update constraint for automaton to new release 3.2.0,MERGED,2023-08-31 10:10:50.000000000,2023-09-01 03:53:46.000000000,2023-09-01 03:52:53.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 10:10:50.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/b2e97b491190d0d0f0724e409a6bf9a9c1dc9f6b', 'message': 'update constraint for automaton to new release 3.2.0\n\nmeta: version: 3.2.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: I9c90a1a42a18725151288ba13ee4192b48f911a0\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+1: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nChange-Id: I7e7c06839785f929f6d1296a413549ee543d2598\n'}]",1,893347,b2e97b491190d0d0f0724e409a6bf9a9c1dc9f6b,9,2,1,11131,,,0,"update constraint for automaton to new release 3.2.0

meta: version: 3.2.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: I9c90a1a42a18725151288ba13ee4192b48f911a0
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+1: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
Change-Id: I7e7c06839785f929f6d1296a413549ee543d2598
",git fetch https://review.opendev.org/openstack/requirements refs/changes/47/893347/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,b2e97b491190d0d0f0724e409a6bf9a9c1dc9f6b,new-release,automaton===3.2.0,automaton===3.1.0,1,1
openstack%2Frequirements~893139,openstack/requirements,master,Iaf6710b1dba066ccd96ee258bd3cb919170d5a45,update constraint for python-octaviaclient to new release 3.5.0,MERGED,2023-08-30 09:35:49.000000000,2023-09-01 03:41:36.000000000,2023-09-01 03:39:49.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-30 09:35:49.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/2ad92026d5183dcb497abf029d39e52ebf107fe1', 'message': 'update constraint for python-octaviaclient to new release 3.5.0\n\nmeta: version: 3.5.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Herv Beraud <hberaud@redhat.com>\nmeta: release:Commit: Gregory Thiemonge <gthiemon@redhat.com>\nmeta: release:Change-Id: I50f7c238140e2c1cabee13d1aa2e8868cd7907f5\nmeta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nChange-Id: Iaf6710b1dba066ccd96ee258bd3cb919170d5a45\n'}]",1,893139,2ad92026d5183dcb497abf029d39e52ebf107fe1,10,3,1,11131,,,0,"update constraint for python-octaviaclient to new release 3.5.0

meta: version: 3.5.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Herv Beraud <hberaud@redhat.com>
meta: release:Commit: Gregory Thiemonge <gthiemon@redhat.com>
meta: release:Change-Id: I50f7c238140e2c1cabee13d1aa2e8868cd7907f5
meta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
Change-Id: Iaf6710b1dba066ccd96ee258bd3cb919170d5a45
",git fetch https://review.opendev.org/openstack/requirements refs/changes/39/893139/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,2ad92026d5183dcb497abf029d39e52ebf107fe1,new-release,python-octaviaclient===3.5.0,python-octaviaclient===3.4.0,1,1
openstack%2Frequirements~893358,openstack/requirements,stable/yoga,Id615a264f3d6dfab9e63eb37d3e9522c88e4208a,update constraint for sushy to new release 4.1.6,MERGED,2023-08-31 10:31:10.000000000,2023-09-01 03:39:43.000000000,2023-09-01 03:39:43.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-31 10:31:10.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/335c498d7de98e6cc57e486443cb285ba5e9e606', 'message': 'update constraint for sushy to new release 4.1.6\n\nmeta: version: 4.1.6\nmeta: diff-start: -\nmeta: series: yoga\nmeta: branch: stable/yoga\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: no\nmeta: release:Author: Herv Beraud <hberaud@redhat.com>\nmeta: release:Commit: Herv Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: I955048b04020ae98f556906455f01378b4d1f6c2\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+1: Jay Faulkner <jay@jvf.cc>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nChange-Id: Id615a264f3d6dfab9e63eb37d3e9522c88e4208a\n'}]",0,893358,335c498d7de98e6cc57e486443cb285ba5e9e606,8,3,1,11131,,,0,"update constraint for sushy to new release 4.1.6

meta: version: 4.1.6
meta: diff-start: -
meta: series: yoga
meta: branch: stable/yoga
meta: release-type: release
meta: pypi: no
meta: first: no
meta: release:Author: Herv Beraud <hberaud@redhat.com>
meta: release:Commit: Herv Beraud <hberaud@redhat.com>
meta: release:Change-Id: I955048b04020ae98f556906455f01378b4d1f6c2
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+1: Jay Faulkner <jay@jvf.cc>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
Change-Id: Id615a264f3d6dfab9e63eb37d3e9522c88e4208a
",git fetch https://review.opendev.org/openstack/requirements refs/changes/58/893358/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,335c498d7de98e6cc57e486443cb285ba5e9e606,new-release,sushy===4.1.6,sushy===4.1.5,1,1
openstack%2Frequirements~893356,openstack/requirements,stable/yoga,Ib04c299c36ce6f5d7463e5b13d8e2433e4aa082d,update constraint for metalsmith to new release 1.6.4,MERGED,2023-08-31 10:23:01.000000000,2023-09-01 03:26:54.000000000,2023-09-01 03:26:54.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-31 10:23:01.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/b31a68d71f4a04af9434749be881eff737d3769c', 'message': 'update constraint for metalsmith to new release 1.6.4\n\nmeta: version: 1.6.4\nmeta: diff-start: -\nmeta: series: yoga\nmeta: branch: stable/yoga\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: no\nmeta: release:Author: Herv Beraud <hberaud@redhat.com>\nmeta: release:Commit: Herv Beraud <hberaud@redhat.com>\nmeta: release:Change-Id: I3582d14073008537d22125e8549eba73c41a968b\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+1: Jay Faulkner <jay@jvf.cc>\nChange-Id: Ib04c299c36ce6f5d7463e5b13d8e2433e4aa082d\n'}]",0,893356,b31a68d71f4a04af9434749be881eff737d3769c,8,3,1,11131,,,0,"update constraint for metalsmith to new release 1.6.4

meta: version: 1.6.4
meta: diff-start: -
meta: series: yoga
meta: branch: stable/yoga
meta: release-type: release
meta: pypi: no
meta: first: no
meta: release:Author: Herv Beraud <hberaud@redhat.com>
meta: release:Commit: Herv Beraud <hberaud@redhat.com>
meta: release:Change-Id: I3582d14073008537d22125e8549eba73c41a968b
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+1: Jay Faulkner <jay@jvf.cc>
Change-Id: Ib04c299c36ce6f5d7463e5b13d8e2433e4aa082d
",git fetch https://review.opendev.org/openstack/requirements refs/changes/56/893356/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,b31a68d71f4a04af9434749be881eff737d3769c,new-release,metalsmith===1.6.4,metalsmith===1.6.3,1,1
openstack%2Fpython-openstackclient~889748,openstack/python-openstackclient,master,Icfadd65b92f4cd343bc327d33e29767bc9b969f9,Migrate backup commands to SDK,MERGED,2023-07-26 19:18:40.000000000,2023-09-01 02:48:38.000000000,2023-09-01 02:45:27.000000000,"[{'_account_id': 9236}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-07-26 19:18:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/e8c2a433c9af0b21e94e4e18bacb67e8d3b2b9d5', 'message': 'Migrate backup commands to SDK\n\nThis patch migrates the following backup commands to SDK:\n\n* Create Backup\n* Show Backup\n* List Backup\n* Restore Backup\n* Delete Backup\n\nChange-Id: Icfadd65b92f4cd343bc327d33e29767bc9b969f9\n'}, {'number': 2, 'created': '2023-08-17 05:34:51.000000000', 'files': ['openstackclient/tests/unit/volume/v2/test_volume_backup.py', 'openstackclient/volume/v2/volume_backup.py', 'openstackclient/tests/unit/volume/v2/fakes.py', 'releasenotes/notes/migrate-backup-commands-0becc8f18cf9737b.yaml'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/bfd6170b03ab5c20cafdc96443cd73b3e8f3ae82', 'message': 'Migrate backup commands to SDK\n\nThis patch migrates the following backup commands to SDK:\n\n* Create Backup\n* Show Backup\n* List Backup\n* Restore Backup\n* Delete Backup\n\nChange-Id: Icfadd65b92f4cd343bc327d33e29767bc9b969f9\n'}]",13,889748,bfd6170b03ab5c20cafdc96443cd73b3e8f3ae82,23,4,2,27615,,,0,"Migrate backup commands to SDK

This patch migrates the following backup commands to SDK:

* Create Backup
* Show Backup
* List Backup
* Restore Backup
* Delete Backup

Change-Id: Icfadd65b92f4cd343bc327d33e29767bc9b969f9
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/48/889748/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/volume/v2/test_volume_backup.py', 'openstackclient/volume/v2/volume_backup.py', 'openstackclient/tests/unit/volume/v2/fakes.py', 'releasenotes/notes/migrate-backup-commands-0becc8f18cf9737b.yaml']",4,e8c2a433c9af0b21e94e4e18bacb67e8d3b2b9d5,cinderclient-sdk-migration,--- features: - | Migrated the following backup commands to SDK: * Create Backup * Show Backup * List Backup * Restore Backup * Delete Backup ,,225,145
openstack%2Fnova~873221,openstack/nova,master,If6c7169b7b8f43ad15a8992831824fb546e85aab,libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support,MERGED,2023-02-09 06:05:33.000000000,2023-09-01 01:55:24.000000000,2023-08-31 02:47:00.000000000,"[{'_account_id': 4393}, {'_account_id': 4690}, {'_account_id': 7166}, {'_account_id': 9708}, {'_account_id': 20733}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-02-09 06:05:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/528cfaa212f198b071a60e2763ae5c07ff6b2d5b', 'message': ""libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support\n\nBased on the Libvirt and QEMU versions, two traits,\nCOMPUTE_ADDRESS_SPACE_PASSTHROUGH and COMPUTE_ADDRESS_SPACE_EMULATED,\nare controlled. Since the two are supported from the same version on\nthe Libvirt and QEMU, Nova handles them in the same way.\n\nBlueprint: libvirt-maxphysaddr-support\nDepends-On: https://review.opendev.org/c/openstack/os-traits/+/871226\nSigned-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>\nChange-Id: If6c7169b7b8f43ad15a8992831824fb546e85aab\n""}, {'number': 2, 'created': '2023-02-13 02:33:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/854c91e8f5513d095d51d0ddfbbe9cb472339f54', 'message': ""libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support\n\nBased on the Libvirt and QEMU versions, two traits,\nCOMPUTE_ADDRESS_SPACE_PASSTHROUGH and COMPUTE_ADDRESS_SPACE_EMULATED,\nare controlled. Since the two are supported from the same version on\nthe Libvirt and QEMU, Nova handles them in the same way.\n\nBlueprint: libvirt-maxphysaddr-support\nDepends-On: https://review.opendev.org/c/openstack/os-traits/+/871226\nSigned-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>\nChange-Id: If6c7169b7b8f43ad15a8992831824fb546e85aab\n""}, {'number': 3, 'created': '2023-02-17 09:02:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/7760a4bccb89761074a91f1584de4022c80c748f', 'message': ""libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support\n\nBased on the Libvirt and QEMU versions, two traits,\nCOMPUTE_ADDRESS_SPACE_PASSTHROUGH and COMPUTE_ADDRESS_SPACE_EMULATED,\nare controlled. Since the two are supported from the same version on\nthe Libvirt and QEMU, Nova handles them in the same way.\n\nBlueprint: libvirt-maxphysaddr-support\nDepends-On: https://review.opendev.org/c/openstack/os-traits/+/871226\nSigned-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>\nChange-Id: If6c7169b7b8f43ad15a8992831824fb546e85aab\n""}, {'number': 4, 'created': '2023-03-29 02:20:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/afeb130f27a49ba1344f58798ae19d1ca06e116c', 'message': ""libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support\n\nBased on the Libvirt and QEMU versions, two traits,\nCOMPUTE_ADDRESS_SPACE_PASSTHROUGH and COMPUTE_ADDRESS_SPACE_EMULATED,\nare controlled. Since the two are supported from the same version on\nthe Libvirt and QEMU, Nova handles them in the same way.\n\nBlueprint: libvirt-maxphysaddr-support\nDepends-On: https://review.opendev.org/c/openstack/os-traits/+/871226\nSigned-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>\nChange-Id: If6c7169b7b8f43ad15a8992831824fb546e85aab\n""}, {'number': 5, 'created': '2023-07-10 09:49:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/30754632a1901dd02df375ff0564677e00e20917', 'message': ""libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support\n\nBased on the Libvirt and QEMU versions, two traits,\nCOMPUTE_ADDRESS_SPACE_PASSTHROUGH and COMPUTE_ADDRESS_SPACE_EMULATED,\nare controlled. Since the two are supported from the same version on\nthe Libvirt and QEMU, Nova handles them in the same way.\n\nBlueprint: libvirt-maxphysaddr-support\nDepends-On: https://review.opendev.org/c/openstack/os-traits/+/871226\nSigned-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>\nChange-Id: If6c7169b7b8f43ad15a8992831824fb546e85aab\n""}, {'number': 6, 'created': '2023-07-24 08:13:05.000000000', 'files': ['nova/virt/hyperv/driver.py', 'nova/virt/ironic/driver.py', 'nova/virt/libvirt/driver.py', 'nova/virt/zvm/driver.py', 'requirements.txt', 'nova/virt/fake.py', 'nova/virt/vmwareapi/driver.py', 'nova/virt/driver.py', 'nova/tests/functional/test_servers_provider_tree.py', 'nova/tests/unit/virt/libvirt/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/2fd034ec487f8352c12d09f5cd4fe4798ade8d96', 'message': ""libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support\n\nBased on the Libvirt and QEMU versions, two traits,\nCOMPUTE_ADDRESS_SPACE_PASSTHROUGH and COMPUTE_ADDRESS_SPACE_EMULATED,\nare controlled. Since the two are supported from the same version on\nthe Libvirt and QEMU, Nova handles them in the same way.\n\nBlueprint: libvirt-maxphysaddr-support\nDepends-On: https://review.opendev.org/c/openstack/os-traits/+/871226\nSigned-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>\nChange-Id: If6c7169b7b8f43ad15a8992831824fb546e85aab\n""}]",57,873221,2fd034ec487f8352c12d09f5cd4fe4798ade8d96,110,6,6,31652,,,0,"libvirt: Add 'COMPUTE_ADDRESS_SPACE_*' traits support

Based on the Libvirt and QEMU versions, two traits,
COMPUTE_ADDRESS_SPACE_PASSTHROUGH and COMPUTE_ADDRESS_SPACE_EMULATED,
are controlled. Since the two are supported from the same version on
the Libvirt and QEMU, Nova handles them in the same way.

Blueprint: libvirt-maxphysaddr-support
Depends-On: https://review.opendev.org/c/openstack/os-traits/+/871226
Signed-off-by: Nobuhiro MIKI <nmiki@yahoo-corp.jp>
Change-Id: If6c7169b7b8f43ad15a8992831824fb546e85aab
",git fetch https://review.opendev.org/openstack/nova refs/changes/21/873221/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/virt/libvirt/test_host.py', 'nova/virt/hyperv/driver.py', 'nova/virt/ironic/driver.py', 'nova/virt/libvirt/driver.py', 'nova/virt/zvm/driver.py', 'nova/virt/fake.py', 'nova/virt/libvirt/host.py', 'nova/virt/vmwareapi/driver.py', 'nova/virt/driver.py', 'nova/tests/unit/virt/libvirt/test_driver.py']",10,528cfaa212f198b071a60e2763ae5c07ff6b2d5b,libvirt-maxphysaddr-support," @mock.patch.object( libvirt_driver.LibvirtDriver, '_register_all_undefined_instance_details', new=mock.Mock()) @mock.patch.object( host.Host, 'supports_address_space_passthrough', new_callable=mock.PropertyMock) def test_driver_capabilities_address_space_passthrough(self, mock_supports): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) drvr.init_host(""dummyhost"") self.assertTrue( drvr.capabilities['supports_address_space_passthrough'], ""Driver capabilities for 'supports_address_space_passthrough' "" ""is invalid when host should support this feature"" ) mock_supports.assert_called_once_with() @mock.patch.object( libvirt_driver.LibvirtDriver, '_register_all_undefined_instance_details', new=mock.Mock()) @mock.patch.object( host.Host, 'supports_address_space_emulated', new_callable=mock.PropertyMock) def test_driver_capabilities_address_space_emulated(self, mock_supports): drvr = libvirt_driver.LibvirtDriver(fake.FakeVirtAPI(), False) drvr.init_host(""dummyhost"") self.assertTrue( drvr.capabilities['supports_address_space_emulated'], ""Driver capabilities for 'supports_address_space_emulated' "" ""is invalid when host should support this feature"" ) mock_supports.assert_called_once_with() ",,105,1
openstack%2Fcharm-guide~893436,openstack/charm-guide,master,I6bbfc14a445a972eb48aab8894d633f1aa5a5e6f,Fix described hacluster behaviour for series upgrades,MERGED,2023-08-31 20:19:21.000000000,2023-09-01 01:48:17.000000000,2023-09-01 01:47:15.000000000,"[{'_account_id': 2424}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 20:19:21.000000000', 'files': ['doc/source/admin/upgrades/series-openstack.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/9967a8f91b22a06cf81c4c97ca2617941149ac8e', 'message': 'Fix described hacluster behaviour for series upgrades\n\nCorrect documented steps that suggest that pausing hacluster\nunits during a series upgrade makes a difference in terms\nof preventing downtime. This has not been the case since\nearly 2020 (commit-wise).\n\nCloses-Bug: #2033546\nRelates-To: Id9167534e8933312c561a6acba40399bca437706\nChange-Id: I6bbfc14a445a972eb48aab8894d633f1aa5a5e6f\nSigned-off-by: Peter Matulis <peter.matulis@canonical.com>\n'}]",1,893436,9967a8f91b22a06cf81c4c97ca2617941149ac8e,8,2,1,30561,,,0,"Fix described hacluster behaviour for series upgrades

Correct documented steps that suggest that pausing hacluster
units during a series upgrade makes a difference in terms
of preventing downtime. This has not been the case since
early 2020 (commit-wise).

Closes-Bug: #2033546
Relates-To: Id9167534e8933312c561a6acba40399bca437706
Change-Id: I6bbfc14a445a972eb48aab8894d633f1aa5a5e6f
Signed-off-by: Peter Matulis <peter.matulis@canonical.com>
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/36/893436/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/upgrades/series-openstack.rst'],1,9967a8f91b22a06cf81c4c97ca2617941149ac8e,lp2033546-pausing-hacluster-series-upgrade,"A clustered application, working in tandem with hacluster, will be unavailable during a series upgrade. The service VIP will go offline due to the resource management software being shut down.#. Repeat step 3 for each of the principal non-leader machines:applications there will be no units to pause.","For those applications working in tandem with hacluster, as will be shown, some hacluster units will need to be paused before the upgrade. One should assume that the commencement of an outage coincides with this step (it will cause cluster quorum heartbeats to fail and the service VIP will consequently go offline).#. If hacluster is used, pause the hacluster units not associated with the principal leader machine. #. Pause the hacluster units not associated with the principal leader machine: .. code-block:: none juju run --wait percona-cluster-hacluster/0 pause juju run --wait percona-cluster-hacluster/1 pause #. Repeat step 4 for each of the principal non-leader machines:#. Pause the hacluster units not associated with the principal leader machine: .. code-block:: none juju run --wait keystone-hacluster/0 pause juju run --wait keystone-hacluster/1 pause #. Pause the hacluster units not associated with their principal leader machines: .. code-block:: none juju run --wait glance-hacluster/1 pause juju run --wait glance-hacluster/2 pause juju run --wait nova-cloud-controller-hacluster/1 pause juju run --wait nova-cloud-controller-hacluster/2 pause applications, and because the hacluster application is not present, there will be no units to pause.",5,35
openstack%2Frequirements~892857,openstack/requirements,master,I198da441e3b5fd225b61bf49900d15a7dec97464,update constraint for openstackdocstheme to new release 3.2.0,MERGED,2023-08-28 08:25:44.000000000,2023-09-01 01:04:50.000000000,2023-09-01 01:03:46.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 08:25:44.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/bdc967ad286938698acdd3e481bf095369a92565', 'message': 'update constraint for openstackdocstheme to new release 3.2.0\n\nmeta: version: 3.2.0\nmeta: diff-start: -\nmeta: series: independent\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: no\nmeta: release:Author: Stephen Finucane <sfinucan@redhat.com>\nmeta: release:Commit: Stephen Finucane <sfinucan@redhat.com>\nmeta: release:Change-Id: I666db7404214b292e02f09b3f83f99c108bec179\nmeta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nChange-Id: I198da441e3b5fd225b61bf49900d15a7dec97464\n'}]",1,892857,bdc967ad286938698acdd3e481bf095369a92565,11,2,1,11131,,,0,"update constraint for openstackdocstheme to new release 3.2.0

meta: version: 3.2.0
meta: diff-start: -
meta: series: independent
meta: branch: master
meta: release-type: release
meta: pypi: no
meta: first: no
meta: release:Author: Stephen Finucane <sfinucan@redhat.com>
meta: release:Commit: Stephen Finucane <sfinucan@redhat.com>
meta: release:Change-Id: I666db7404214b292e02f09b3f83f99c108bec179
meta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
Change-Id: I198da441e3b5fd225b61bf49900d15a7dec97464
",git fetch https://review.opendev.org/openstack/requirements refs/changes/57/892857/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,bdc967ad286938698acdd3e481bf095369a92565,new-release,openstackdocstheme===3.2.0,openstackdocstheme===3.1.1,1,1
openstack%2Fnova-powervm~850975,openstack/nova-powervm,master,Ibe287639fa510bc1fe59906825f6ac9c0d74c725,Use TOX_CONSTRAINTS_FILE,NEW,2022-07-26 06:45:59.000000000,2023-09-01 00:57:03.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-07-26 06:45:59.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/nova-powervm/commit/cf248a33f5eb601864ffaf10eb51a431fa32b621', 'message': 'Use TOX_CONSTRAINTS_FILE\n\nUPPER_CONSTRAINTS_FILE is old name and deprecated\nThis allows to use upper-constraints file as more\nreadable way instead of UPPER_CONSTRAINTS_FILE=<lower-constraints file>.\n\nChange-Id: Ibe287639fa510bc1fe59906825f6ac9c0d74c725\n'}]",1,850975,cf248a33f5eb601864ffaf10eb51a431fa32b621,7,1,1,35058,,,0,"Use TOX_CONSTRAINTS_FILE

UPPER_CONSTRAINTS_FILE is old name and deprecated
This allows to use upper-constraints file as more
readable way instead of UPPER_CONSTRAINTS_FILE=<lower-constraints file>.

Change-Id: Ibe287639fa510bc1fe59906825f6ac9c0d74c725
",git fetch https://review.opendev.org/openstack/nova-powervm refs/changes/75/850975/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,cf248a33f5eb601864ffaf10eb51a431fa32b621,, -c{env:TOX_CONSTRAINTS_FILE:https://git.openstack.org/cgit/openstack/requirements/plain/upper-constraints.txt} -c{env:TOX_CONSTRAINTS_FILE:https://git.openstack.org/cgit/openstack/requirements/plain/upper-constraints.txt}, -c{env:UPPER_CONSTRAINTS_FILE:https://git.openstack.org/cgit/openstack/requirements/plain/upper-constraints.txt} -c{env:UPPER_CONSTRAINTS_FILE:https://git.openstack.org/cgit/openstack/requirements/plain/upper-constraints.txt},2,2
openstack%2Fkeystone~787022,openstack/keystone,master,If33fd6a29f6b3f8d9f6d852bc44df4e89a62bb36,Use py3 as the default runtime for tox,ABANDONED,2021-04-20 02:21:55.000000000,2023-09-01 00:37:05.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-20 02:21:55.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/keystone/commit/d40f22da8f947c50ae8ff7a25aa3c98a86e0e384', 'message': ""Use py3 as the default runtime for tox\n\nMoving on py3 as the default runtime for tox to avoid to update this at\neach new cycle.\n\nWallaby support officially the following runtimes [1]:\n- Python 3.6\n- Python 3.8\n\nDuring Victoria Python 3.7 was used as the default runtime [2] however this\nversion isn't longer officially supported.\n\n[1] https://governance.openstack.org/tc/reference/runtimes/wallaby.html#python-runtimes-for-wallaby\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html#python-runtimes-for-victoria\n\nChange-Id: If33fd6a29f6b3f8d9f6d852bc44df4e89a62bb36\n""}]",1,787022,d40f22da8f947c50ae8ff7a25aa3c98a86e0e384,5,2,1,31412,,,0,"Use py3 as the default runtime for tox

Moving on py3 as the default runtime for tox to avoid to update this at
each new cycle.

Wallaby support officially the following runtimes [1]:
- Python 3.6
- Python 3.8

During Victoria Python 3.7 was used as the default runtime [2] however this
version isn't longer officially supported.

[1] https://governance.openstack.org/tc/reference/runtimes/wallaby.html#python-runtimes-for-wallaby
[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html#python-runtimes-for-victoria

Change-Id: If33fd6a29f6b3f8d9f6d852bc44df4e89a62bb36
",git fetch https://review.opendev.org/openstack/keystone refs/changes/22/787022/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,d40f22da8f947c50ae8ff7a25aa3c98a86e0e384,,"envlist = py3,pep8,api-ref,docs,genconfig,genpolicy,releasenotes,protection","envlist = py37,pep8,api-ref,docs,genconfig,genpolicy,releasenotes,protection",1,1
openstack%2Frequirements~893037,openstack/requirements,master,I0007b262c7e9dfd4c1faf127d8f6677d72bbd6c2,update constraint for heat-translator to new release 2.8.0,MERGED,2023-08-29 11:46:26.000000000,2023-09-01 00:07:38.000000000,2023-09-01 00:06:14.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-29 11:46:26.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/700f1f157b21ab30c5627ae736b00eef7e723f9b', 'message': 'update constraint for heat-translator to new release 2.8.0\n\nmeta: version: 2.8.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Yasufumi Ogawa <yasufum.o@gmail.com>\nmeta: release:Change-Id: Ib97ce0f389e6c9e28133f59bf557426303343662\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+1: Yasufumi Ogawa <yasufum.o@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nChange-Id: I0007b262c7e9dfd4c1faf127d8f6677d72bbd6c2\n'}]",1,893037,700f1f157b21ab30c5627ae736b00eef7e723f9b,12,3,1,11131,,,0,"update constraint for heat-translator to new release 2.8.0

meta: version: 2.8.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Yasufumi Ogawa <yasufum.o@gmail.com>
meta: release:Change-Id: Ib97ce0f389e6c9e28133f59bf557426303343662
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+1: Yasufumi Ogawa <yasufum.o@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
Change-Id: I0007b262c7e9dfd4c1faf127d8f6677d72bbd6c2
",git fetch https://review.opendev.org/openstack/requirements refs/changes/37/893037/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,700f1f157b21ab30c5627ae736b00eef7e723f9b,new-release,heat-translator===2.8.0,heat-translator===2.7.0,1,1
openstack%2Frequirements~892924,openstack/requirements,master,If73c229c08ab34ee5f8aa1a811665f98e3afc0e6,update constraint for oslo.limit to new release 2.2.0,MERGED,2023-08-28 13:02:57.000000000,2023-09-01 00:06:56.000000000,2023-09-01 00:05:59.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-28 13:02:57.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/c8112c40db62a7b57005095d5baee5cce744a5c2', 'message': 'update constraint for oslo.limit to new release 2.2.0\n\nmeta: version: 2.2.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: I5169efcc9244d825171bde286f8af25ec6bc9ac8\nmeta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nChange-Id: If73c229c08ab34ee5f8aa1a811665f98e3afc0e6\n'}]",1,892924,c8112c40db62a7b57005095d5baee5cce744a5c2,15,4,1,11131,,,0,"update constraint for oslo.limit to new release 2.2.0

meta: version: 2.2.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: I5169efcc9244d825171bde286f8af25ec6bc9ac8
meta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
Change-Id: If73c229c08ab34ee5f8aa1a811665f98e3afc0e6
",git fetch https://review.opendev.org/openstack/requirements refs/changes/24/892924/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,c8112c40db62a7b57005095d5baee5cce744a5c2,new-release,oslo.limit===2.2.0,oslo.limit===2.1.0,1,1
openstack%2Frequirements~892922,openstack/requirements,master,I969d69278b0ffd68bfbf0263f889ac1350b4e499,update constraint for oslo.context to new release 5.2.0,MERGED,2023-08-28 13:01:01.000000000,2023-09-01 00:06:11.000000000,2023-09-01 00:06:11.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-28 13:01:01.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/70c80d133c698527e24cd43a1b6f68b004b004ba', 'message': 'update constraint for oslo.context to new release 5.2.0\n\nmeta: version: 5.2.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: I4cd6e6d8a75960d70ded9a371fa05ee6900064e7\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>\nChange-Id: I969d69278b0ffd68bfbf0263f889ac1350b4e499\n'}]",1,892922,70c80d133c698527e24cd43a1b6f68b004b004ba,14,4,1,11131,,,0,"update constraint for oslo.context to new release 5.2.0

meta: version: 5.2.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: I4cd6e6d8a75960d70ded9a371fa05ee6900064e7
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>
Change-Id: I969d69278b0ffd68bfbf0263f889ac1350b4e499
",git fetch https://review.opendev.org/openstack/requirements refs/changes/22/892922/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,70c80d133c698527e24cd43a1b6f68b004b004ba,new-release,oslo.context===5.2.0,oslo.context===5.1.1,1,1
openstack%2Frequirements~893060,openstack/requirements,master,I7080abace3fe17850c62e0baa961be8f7092a60b,update constraint for keystoneauth1 to new release 5.3.0,MERGED,2023-08-29 13:21:27.000000000,2023-09-01 00:06:08.000000000,2023-09-01 00:06:08.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-29 13:21:27.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/4c5c7277028bab848010d1c211cf96fe89504b3a', 'message': 'update constraint for keystoneauth1 to new release 5.3.0\n\nmeta: version: 5.3.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: Ie51b3dce149245a8450f254d24ef1b99ebac9e7e\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nChange-Id: I7080abace3fe17850c62e0baa961be8f7092a60b\n'}]",1,893060,4c5c7277028bab848010d1c211cf96fe89504b3a,11,3,1,11131,,,0,"update constraint for keystoneauth1 to new release 5.3.0

meta: version: 5.3.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: Ie51b3dce149245a8450f254d24ef1b99ebac9e7e
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
Change-Id: I7080abace3fe17850c62e0baa961be8f7092a60b
",git fetch https://review.opendev.org/openstack/requirements refs/changes/60/893060/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,4c5c7277028bab848010d1c211cf96fe89504b3a,new-release,keystoneauth1===5.3.0,keystoneauth1===5.2.1,1,1
openstack%2Frequirements~892882,openstack/requirements,master,Ic6cc1afbeacfeb6c4060d2493a38015cec1620d5,update constraint for os-brick to new release 6.4.0,MERGED,2023-08-28 08:49:32.000000000,2023-09-01 00:06:05.000000000,2023-09-01 00:06:05.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 08:49:32.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/18268c5dc108550b87f3f7a16019d670d8788ddc', 'message': 'update constraint for os-brick to new release 6.4.0\n\nmeta: version: 6.4.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Eld Ills <elod.illes@est.tech>\nmeta: release:Change-Id: Icd4ca8c37cd958b7468c1afc6087e32464d21732\nmeta: release:Code-Review+1: Rajat Dhasmana <rajatdhasmana@gmail.com>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nChange-Id: Ic6cc1afbeacfeb6c4060d2493a38015cec1620d5\n'}]",1,892882,18268c5dc108550b87f3f7a16019d670d8788ddc,10,2,1,11131,,,0,"update constraint for os-brick to new release 6.4.0

meta: version: 6.4.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Eld Ills <elod.illes@est.tech>
meta: release:Change-Id: Icd4ca8c37cd958b7468c1afc6087e32464d21732
meta: release:Code-Review+1: Rajat Dhasmana <rajatdhasmana@gmail.com>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
Change-Id: Ic6cc1afbeacfeb6c4060d2493a38015cec1620d5
",git fetch https://review.opendev.org/openstack/requirements refs/changes/82/892882/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,18268c5dc108550b87f3f7a16019d670d8788ddc,new-release,os-brick===6.4.0,os-brick===6.3.0,1,1
openstack%2Frequirements~893038,openstack/requirements,master,I147b4fde7a601bf80ebdac2eeb04c24d9326e6ff,update constraint for kuryr-lib to new release 2.8.0,MERGED,2023-08-29 12:09:30.000000000,2023-09-01 00:06:02.000000000,2023-09-01 00:06:02.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-29 12:09:30.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/9a14217c9846b4a253f969e5b0cf4288dd996b8f', 'message': 'update constraint for kuryr-lib to new release 2.8.0\n\nmeta: version: 2.8.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: If2231b017543aa9101ba5a4797e4ca64b4e7c0ee\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nChange-Id: I147b4fde7a601bf80ebdac2eeb04c24d9326e6ff\n'}]",1,893038,9a14217c9846b4a253f969e5b0cf4288dd996b8f,11,3,1,11131,,,0,"update constraint for kuryr-lib to new release 2.8.0

meta: version: 2.8.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: no
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: If2231b017543aa9101ba5a4797e4ca64b4e7c0ee
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
Change-Id: I147b4fde7a601bf80ebdac2eeb04c24d9326e6ff
",git fetch https://review.opendev.org/openstack/requirements refs/changes/38/893038/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,9a14217c9846b4a253f969e5b0cf4288dd996b8f,new-release,kuryr-lib===2.8.0,kuryr-lib===2.7.0,1,1
openstack%2Fnova~893127,openstack/nova,master,I3951317111396aa4df36c5700b4d4dd33e721a74,Add documentation for unified limits,MERGED,2023-08-30 04:33:17.000000000,2023-08-31 23:56:28.000000000,2023-08-31 23:54:17.000000000,"[{'_account_id': 7166}, {'_account_id': 11604}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 04:33:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ca3c6a3736068e28224bb352b1d532f04da9179b', 'message': 'Add documentation for unified limits\n\nThis adds documentation for unified limits and signals deprecation of\nthe nova.quota.DbQuotaDriver.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I3951317111396aa4df36c5700b4d4dd33e721a74\n'}, {'number': 2, 'created': '2023-08-30 06:44:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/45a372571ccd471b81aab0fe276d9f76e0c28118', 'message': 'Add documentation for unified limits\n\nThis adds documentation for unified limits and signals deprecation of\nthe nova.quota.DbQuotaDriver.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I3951317111396aa4df36c5700b4d4dd33e721a74\n'}, {'number': 3, 'created': '2023-08-30 09:21:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/5fbf329afb249927679e35967b9ab9ede61edd25', 'message': 'Add documentation for unified limits\n\nThis adds documentation for unified limits and signals deprecation of\nthe nova.quota.DbQuotaDriver.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I3951317111396aa4df36c5700b4d4dd33e721a74\n'}, {'number': 4, 'created': '2023-08-30 19:23:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/45d46904ef5c02111fde1a49157c0245be810354', 'message': 'Add documentation for unified limits\n\nThis adds documentation for unified limits and signals deprecation of\nthe nova.quota.DbQuotaDriver.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I3951317111396aa4df36c5700b4d4dd33e721a74\n'}, {'number': 5, 'created': '2023-08-30 19:34:04.000000000', 'files': ['doc/source/admin/quotas.rst', 'doc/source/admin/index.rst', 'doc/source/index.rst', 'releasenotes/notes/deprecate-legacy-quota-driver-56906ca0e2842839.yaml', 'doc/source/admin/unified-limits.rst', 'nova/conf/quota.py', 'doc/source/admin/cells.rst', 'doc/source/user/unified-limits.rst', 'doc/source/user/quotas.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/8f0817f078308ffd98031e48f82f7de32ed5d9ab', 'message': 'Add documentation for unified limits\n\nThis adds documentation for unified limits and signals deprecation of\nthe nova.quota.DbQuotaDriver.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I3951317111396aa4df36c5700b4d4dd33e721a74\n'}]",29,893127,8f0817f078308ffd98031e48f82f7de32ed5d9ab,24,3,5,4690,,,0,"Add documentation for unified limits

This adds documentation for unified limits and signals deprecation of
the nova.quota.DbQuotaDriver.

Related to blueprint unified-limits-nova-tool-and-docs

Change-Id: I3951317111396aa4df36c5700b4d4dd33e721a74
",git fetch https://review.opendev.org/openstack/nova refs/changes/27/893127/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/quotas.rst', 'doc/source/admin/index.rst', 'doc/source/index.rst', 'releasenotes/notes/deprecate-legacy-quota-driver-56906ca0e2842839.yaml', 'doc/source/admin/unified-limits.rst', 'nova/conf/quota.py', 'doc/source/user/unified-limits.rst', 'doc/source/user/quotas.rst']",8,ca3c6a3736068e28224bb352b1d532f04da9179b,bp/unified-limits-nova-tool-and-docs,".. warning:: As of Nova release 2023.2 (Bobcat), the ``nova.quota.DbQuotaDriver`` has been deprecated and the default quota driver configuration will be changed to the ``nova.quota.UnifiedLimitsDriver`` in 2024.1 (Caracal) release. See the :doc:`unified limits documentation </user/unified-limits>`. ",,375,9
openstack%2Frequirements~893040,openstack/requirements,master,I54a88149f9ce1ff924c1bd19dc82e1d5940fffe8,update constraint for monasca-common to new release 3.8.0,MERGED,2023-08-29 12:21:04.000000000,2023-08-31 23:55:57.000000000,2023-08-31 23:54:29.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-29 12:21:04.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/f0b3f70bae9e0e79919492f18f2a090f24079622', 'message': 'update constraint for monasca-common to new release 3.8.0\n\nmeta: version: 3.8.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: no\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: Ifa678c016fb37c3bd5059af87fea4c20ae4ab1cf\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>\nmeta: release:Code-Review+1: Hasan Acar <hasan.acar@tubitak.gov.tr>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nChange-Id: I54a88149f9ce1ff924c1bd19dc82e1d5940fffe8\n'}]",1,893040,f0b3f70bae9e0e79919492f18f2a090f24079622,11,2,1,11131,,,0,"update constraint for monasca-common to new release 3.8.0

meta: version: 3.8.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: no
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: Ifa678c016fb37c3bd5059af87fea4c20ae4ab1cf
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Workflow+1: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+2: Thierry Carrez <thierry@openstack.org>
meta: release:Code-Review+1: Hasan Acar <hasan.acar@tubitak.gov.tr>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
Change-Id: I54a88149f9ce1ff924c1bd19dc82e1d5940fffe8
",git fetch https://review.opendev.org/openstack/requirements refs/changes/40/893040/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,f0b3f70bae9e0e79919492f18f2a090f24079622,new-release,monasca-common===3.8.0,monasca-common===3.7.0,1,1
openstack%2Fnova~891646,openstack/nova,master,I5536010ea1212918e61b3f4f22c2077fadc5ebfe,nova-manage: Add 'limits migrate_to_unified_limits',MERGED,2023-08-17 04:44:46.000000000,2023-08-31 23:55:39.000000000,2023-08-31 23:54:10.000000000,"[{'_account_id': 782}, {'_account_id': 7166}, {'_account_id': 11604}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-17 04:44:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/2119c2cc23f69b886d03f20744c3c497f588bf17', 'message': ""WIP nova-manage: Add 'limits migrate_to_unified_limits'\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I5536010ea1212918e61b3f4f22c2077fadc5ebfe\n""}, {'number': 2, 'created': '2023-08-29 08:24:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8d3cf5072404f15239ca23f70c3ed3493a54109f', 'message': ""nova-manage: Add 'limits migrate_to_unified_limits'\n\nThis command aims to help migrate to unified limits quotas by reading\nlegacy quota limits from the Nova database and calling the Keystone API\nto create corresponding unified limits.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I5536010ea1212918e61b3f4f22c2077fadc5ebfe\n""}, {'number': 3, 'created': '2023-08-30 00:01:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/02cc0b1fc7d792ad9593cbc44020f640b6d47e2c', 'message': ""nova-manage: Add 'limits migrate_to_unified_limits'\n\nThis command aims to help migrate to unified limits quotas by reading\nlegacy quota limits from the Nova database and calling the Keystone API\nto create corresponding unified limits.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I5536010ea1212918e61b3f4f22c2077fadc5ebfe\n""}, {'number': 4, 'created': '2023-08-30 01:26:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3b86d5100b10e3840c9da0bd24bf3efd92981e83', 'message': ""nova-manage: Add 'limits migrate_to_unified_limits'\n\nThis command aims to help migrate to unified limits quotas by reading\nlegacy quota limits from the Nova database and calling the Keystone API\nto create corresponding unified limits.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I5536010ea1212918e61b3f4f22c2077fadc5ebfe\n""}, {'number': 5, 'created': '2023-08-30 19:23:51.000000000', 'files': ['releasenotes/notes/nova-manage-limits-migrate-d1de95d20991674c.yaml', 'nova/conf/keystone.py', 'nova/tests/functional/test_nova_manage.py', 'nova/tests/fixtures/nova.py', 'doc/source/cli/nova-manage.rst', 'nova/cmd/manage.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/395501c8766d3c1fefabd54ac9ebc363eabce3ea', 'message': ""nova-manage: Add 'limits migrate_to_unified_limits'\n\nThis command aims to help migrate to unified limits quotas by reading\nlegacy quota limits from the Nova database and calling the Keystone API\nto create corresponding unified limits.\n\nRelated to blueprint unified-limits-nova-tool-and-docs\n\nChange-Id: I5536010ea1212918e61b3f4f22c2077fadc5ebfe\n""}]",19,891646,395501c8766d3c1fefabd54ac9ebc363eabce3ea,25,4,5,4690,,,0,"nova-manage: Add 'limits migrate_to_unified_limits'

This command aims to help migrate to unified limits quotas by reading
legacy quota limits from the Nova database and calling the Keystone API
to create corresponding unified limits.

Related to blueprint unified-limits-nova-tool-and-docs

Change-Id: I5536010ea1212918e61b3f4f22c2077fadc5ebfe
",git fetch https://review.opendev.org/openstack/nova refs/changes/46/891646/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/conf/keystone.py', 'nova/cmd/manage.py']",2,2119c2cc23f69b886d03f20744c3c497f588bf17,bp/unified-limits-nova-tool-and-docs,"# from keystoneauth1 import loading as ks_loadingfrom nova.limit import local as local_limit from nova.limit import placement as placement_limitimport nova.quotaclass LimitsCommands(): def _create_unified_limits(self, ctxt, legacy_defaults, project_id, output, dry_run): return_code = 0 # Create registered (default) limits first. ul_names_to_legacy_names = dict(**local_limit.LEGACY_LIMITS, **placement_limit.LEGACY_LIMITS) legacy_names_to_ul_names = dict(zip(ul_names_to_legacy_names.values(), ul_names_to_legacy_names.keys())) # For auth, a section for [keystone] is required in the config: # # [keystone] # region_name = RegionOne # user_domain_name = Default # password = <password> # username = <username> # auth_url = http://127.0.0.1/identity # auth_type = password # system_scope = all # # The configured user needs 'role:admin and system_scope:all' in order # to create limits in Keystone. keystone_api = utils.get_sdk_adapter('identity') service_id = keystone_api.find_service('nova').id # TODO(melwitt): Do we also need region? Would we have it as a command # option? # Retrieve the existing resource limits from Keystone. registered_limits = keystone_api.registered_limits() ul_defaults = { rl.resource_name: rl.default_limit for rl in registered_limits} msg = f'Found default limits in Keystone: {ul_defaults} ...' output(_(msg)) # Determine which resource limits are missing in Keystone so that we # can create them. output(_('Creating default limits in Keystone ...')) for resource, rlimit in legacy_defaults.items(): ul_resource_name = legacy_names_to_ul_names[resource] if ul_resource_name not in ul_defaults: msg = f'Creating default limit: {ul_resource_name} = {rlimit}' output(_(msg)) if not dry_run: try: keystone_api.create_registered_limit( resource_name=ul_resource_name, default_limit=rlimit, service_id=service_id) except Exception as e: msg = f'Failed to create default limit: {str(e)}' print(_(msg)) return_code = 1 # Create project limits if there are any. output(_('Reading project limits from the Nova API database ...')) legacy_projects = objects.Quotas.get_all_by_project(ctxt, project_id) legacy_projects.pop('project_id', None) msg = f'Found project limits in the database: {legacy_projects} ...' output(_(msg)) # Retrieve existing limits from Keystone. project_limits = keystone_api.limits() ul_projects = { pl.resource_name: pl.resource_limit for pl in project_limits} msg = f'Found project limits in Keystone: {ul_projects} ...' output(_(msg)) output(_('Creating project limits in Keystone ...')) for resource, plimit in legacy_projects.items(): ul_resource_name = legacy_names_to_ul_names[resource] if ul_resource_name not in ul_projects: msg = ( f'Creating project limit: {ul_resource_name} = {plimit} ' f'for project {project_id}') output(_(msg)) if not dry_run: try: keystone_api.create_limit( resource_name=ul_resource_name, resource_limit=plimit, project_id=project_id, service_id=service_id) except Exception as e: msg = f'Failed to create project limit: {str(e)}' print(_(msg)) return_code = 1 return return_code @action_description( _(""Copy quota limits from the Nova API database to Keystone."")) @args('--project', metavar='<project_id>', dest='project_id', required=True, help='Project ID for which to migrate quota limits') @args('--verbose', action='store_true', dest='verbose', default=False, help='Provide verbose output during execution.') @args('--dry-run', action='store_true', dest='dry_run', default=False, help='Show what limits would be created without creating them.') def migrate_to_unified_limits(self, project_id=None, verbose=False, dry_run=False): """"""Migrate quota limits from legacy quotas to unified limits. Return codes: * 0: Command completed successfully. * 1: An unexpected error happened. * 2: Failed to connect to the database. """""" ctxt = context.get_admin_context() output = lambda msg: None if verbose: output = lambda msg: print(msg) output(_('Reading default limits from the Nova API database ...')) try: # This will look for limits in the 'default' quota class first and # then fall back to the [quota] config options. legacy_defaults = nova.quota.QUOTAS.get_defaults(ctxt) except db_exc.CantStartEngineError: print(_('Failed to connect to the database so aborting this ' 'migration attempt. Please check your config file to make ' 'sure that [api_database]/connection and ' '[database]/connection are set and run this ' 'command again.')) return 2 # Remove obsolete resource limits. for resource in ('fixed_ips', 'floating_ips', 'security_groups', 'security_group_rules'): legacy_defaults.pop(resource, None) msg = ( f'Found default limits in the database: {legacy_defaults} ...') output(_(msg)) try: return self._create_unified_limits( ctxt, legacy_defaults, project_id, output, dry_run) except Exception as e: msg = (f'Unexpected error, see nova-manage.log for the full ' f'trace: {str(e)}') print(_(msg)) LOG.exception('Unexpected error') return 1 'limits': LimitsCommands,",,154,1
openstack%2Frequirements~893035,openstack/requirements,master,I89897c387726fc27f042c1d9e5d01f1dcadc74d9,update constraint for taskflow to new release 5.4.0,MERGED,2023-08-29 11:31:11.000000000,2023-08-31 23:55:19.000000000,2023-08-31 23:54:22.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-29 11:31:11.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/97647e397638e1ace502cfe11b3a0bf789078d3c', 'message': 'update constraint for taskflow to new release 5.4.0\n\nmeta: version: 5.4.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: no\nmeta: release:Author: Eld Ills <elod.illes@est.tech>\nmeta: release:Commit: Eld Ills <elod.illes@est.tech>\nmeta: release:Change-Id: I68234f7eb2281729d695984c18ee0d42718c753d\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Workflow+1: Elod Illes <elod.illes@est.tech>\nChange-Id: I89897c387726fc27f042c1d9e5d01f1dcadc74d9\n'}]",1,893035,97647e397638e1ace502cfe11b3a0bf789078d3c,12,3,1,11131,,,0,"update constraint for taskflow to new release 5.4.0

meta: version: 5.4.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: no
meta: release:Author: Eld Ills <elod.illes@est.tech>
meta: release:Commit: Eld Ills <elod.illes@est.tech>
meta: release:Change-Id: I68234f7eb2281729d695984c18ee0d42718c753d
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Workflow+1: Elod Illes <elod.illes@est.tech>
Change-Id: I89897c387726fc27f042c1d9e5d01f1dcadc74d9
",git fetch https://review.opendev.org/openstack/requirements refs/changes/35/893035/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,97647e397638e1ace502cfe11b3a0bf789078d3c,new-release,taskflow===5.4.0,taskflow===5.3.0,1,1
openstack%2Frequirements~892930,openstack/requirements,master,Ib9eb984d19e8cc0bcba4e41ef80fd4d4daf1765a,update constraint for oslo.i18n to new release 6.1.0,MERGED,2023-08-28 13:07:09.000000000,2023-08-31 23:54:26.000000000,2023-08-31 23:54:26.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-28 13:07:09.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/7bbdd866a3f1de9e43ef2af6c6d0a56a83371e90', 'message': 'update constraint for oslo.i18n to new release 6.1.0\n\nmeta: version: 6.1.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: I19dd497ca227df83334f702b6d228d5a048d482e\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nChange-Id: Ib9eb984d19e8cc0bcba4e41ef80fd4d4daf1765a\n'}]",1,892930,7bbdd866a3f1de9e43ef2af6c6d0a56a83371e90,13,3,1,11131,,,0,"update constraint for oslo.i18n to new release 6.1.0

meta: version: 6.1.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: I19dd497ca227df83334f702b6d228d5a048d482e
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
Change-Id: Ib9eb984d19e8cc0bcba4e41ef80fd4d4daf1765a
",git fetch https://review.opendev.org/openstack/requirements refs/changes/30/892930/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,7bbdd866a3f1de9e43ef2af6c6d0a56a83371e90,new-release,oslo.i18n===6.1.0,oslo.i18n===6.0.0,1,1
openstack%2Frequirements~892950,openstack/requirements,master,I6a4f14326b8739036f0230f456f8cb6c7df37868,update constraint for oslo.vmware to new release 4.2.0,MERGED,2023-08-28 13:16:39.000000000,2023-08-31 23:35:36.000000000,2023-08-31 23:34:43.000000000,"[{'_account_id': 14288}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:16:39.000000000', 'files': ['upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/fae081059a6578737bb22887e941357fcfaa9f6c', 'message': 'update constraint for oslo.vmware to new release 4.2.0\n\nmeta: version: 4.2.0\nmeta: diff-start: -\nmeta: series: bobcat\nmeta: branch: master\nmeta: release-type: release\nmeta: pypi: yes\nmeta: first: yes\nmeta: release:Author: Elod Illes <elod.illes@est.tech>\nmeta: release:Commit: Elod Illes <elod.illes@est.tech>\nmeta: release:Change-Id: If63afe5c5e5b77e5dd50ae9b4253d86c0d314f0c\nmeta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>\nmeta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>\nmeta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>\nChange-Id: I6a4f14326b8739036f0230f456f8cb6c7df37868\n'}]",2,892950,fae081059a6578737bb22887e941357fcfaa9f6c,15,2,1,11131,,,0,"update constraint for oslo.vmware to new release 4.2.0

meta: version: 4.2.0
meta: diff-start: -
meta: series: bobcat
meta: branch: master
meta: release-type: release
meta: pypi: yes
meta: first: yes
meta: release:Author: Elod Illes <elod.illes@est.tech>
meta: release:Commit: Elod Illes <elod.illes@est.tech>
meta: release:Change-Id: If63afe5c5e5b77e5dd50ae9b4253d86c0d314f0c
meta: release:Code-Review+2: Herv Beraud <herveberaud.pro@gmail.com>
meta: release:Code-Review+2: Elod Illes <elod.illes@est.tech>
meta: release:Workflow+1: Herv Beraud <herveberaud.pro@gmail.com>
Change-Id: I6a4f14326b8739036f0230f456f8cb6c7df37868
",git fetch https://review.opendev.org/openstack/requirements refs/changes/50/892950/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,fae081059a6578737bb22887e941357fcfaa9f6c,new-release,oslo.vmware===4.2.0,oslo.vmware===4.1.1,1,1
openstack%2Fneutron~825413,openstack/neutron,master,I1c8c6850faa7741afabe31889cdad0228a366310,Update dns_assignment attribute documentation,MERGED,2022-01-20 00:46:41.000000000,2023-08-31 22:55:21.000000000,2022-01-27 22:36:33.000000000,"[{'_account_id': 1131}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2022-01-20 00:46:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/9b045906d1fb459c04550ee2b419e831ab020e46', 'message': ""Update dns_assignment attribute documentation\n\nAfter the implementation of [1], the calculation of the port's\ndns_assignment attribute changed for some use cases of the Neutron\nintegration with an external DNS service. This change updates the\ndocumentation accordingly\n\n[1] https://specs.openstack.org/openstack/neutron-specs/specs/victoria/port_dns_assignment.html\n\nChange-Id: I1c8c6850faa7741afabe31889cdad0228a366310\n""}, {'number': 2, 'created': '2022-01-27 00:25:59.000000000', 'files': ['doc/source/admin/config-dns-int.rst', 'doc/source/admin/config-dns-int-ext-serv.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/94b961f179039af84ada3366220d9c9b861e88b4', 'message': ""Update dns_assignment attribute documentation\n\nAfter the implementation of [1], the calculation of the port's\ndns_assignment attribute changed for some use cases of the Neutron\nintegration with an external DNS service. This change updates the\ndocumentation accordingly\n\n[1] https://specs.openstack.org/openstack/neutron-specs/specs/victoria/port_dns_assignment.html\n\nPartial-Bug: #1956632\nChange-Id: I1c8c6850faa7741afabe31889cdad0228a366310\n""}]",7,825413,94b961f179039af84ada3366220d9c9b861e88b4,15,3,2,4694,,,0,"Update dns_assignment attribute documentation

After the implementation of [1], the calculation of the port's
dns_assignment attribute changed for some use cases of the Neutron
integration with an external DNS service. This change updates the
documentation accordingly

[1] https://specs.openstack.org/openstack/neutron-specs/specs/victoria/port_dns_assignment.html

Partial-Bug: #1956632
Change-Id: I1c8c6850faa7741afabe31889cdad0228a366310
",git fetch https://review.opendev.org/openstack/neutron refs/changes/13/825413/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/admin/config-dns-int.rst', 'doc/source/admin/config-dns-int-ext-serv.rst']",2,9b045906d1fb459c04550ee2b419e831ab020e46,fix-dns-assignment-doc," The port's ``dns_assignment`` attribute with use case 3 ------------------------------------------------------- The ``dns_assignment`` attribute is not calculated as described in :ref:`config-dns-int` when a port is created under use case 3. Instead of concatenating the port's ``dns_name`` with the value configured in the ``dns_domain`` parameter in ``neutron.conf``, the ``dns_name`` is concatenated with the ``dns_domain`` of either the port or the network, depending on whether the use case is 3a, 3b or 3c. For example: .. code-block:: console $ openstack network show external | grep dns_domain | dns_domain | dns-domain-1.org. $ cat /etc/neutron/neutron.conf | grep dns_domain dns_domain = my-domain.org $ openstack recordset list dns-domain-1.org. +--------------------------------------+-------------------+------+-----------------------------------------------------------------------+--------+--------+ | id | name | type | records | status | action | +--------------------------------------+-------------------+------+-----------------------------------------------------------------------+--------+--------+ | 2b3e9ea4-8035-4595-955d-ec8c55816111 | dns-domain-1.org. | SOA | ns1.devstack.org. mlavalle.redhat.com. 1642583355 3517 600 86400 3600 | ACTIVE | NONE | | 801dd911-43e6-430a-a80b-ea09af76a9a4 | dns-domain-1.org. | NS | ns1.devstack.org. | ACTIVE | NONE | +--------------------------------------+-------------------+------+-----------------------------------------------------------------------+--------+--------+ $ openstack port create --dns-name a-port --network external a_port +-------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +-------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ | admin_state_up | UP | | allowed_address_pairs | | | binding_host_id | None | | binding_profile | None | | binding_vif_details | None | | binding_vif_type | None | | binding_vnic_type | normal | | created_at | 2022-01-19T09:15:34Z | | data_plane_status | None | | description | | | device_id | | | device_owner | | | device_profile | None | | dns_assignment | fqdn='a-port.dns-domain-1.org.', hostname='a-port', ip_address='172.31.251.113' | | | fqdn='a-port.dns-domain-1.org.', hostname='a-port', ip_address='fd5e:7a6b:1a62::a3' | | dns_domain | | | dns_name | a-port | | extra_dhcp_opts | | | fixed_ips | ip_address='172.31.251.113', subnet_id='6795a775-4a76-49b0-bac6-ba8a8b62bd22' | | | ip_address='fd5e:7a6b:1a62::a3', subnet_id='97b719f8-2307-4162-bf08-523d9c0fc6a9' | | id | 080f01e7-78b9-43ed-a807-1e0d59099bed | | ip_allocation | None | | location | Munch({'cloud': '', 'region_name': 'RegionOne', 'zone': None, 'project': Munch({'id': 'afc55714081b4ef29f99ec128cb1fa30', 'name': 'demo', 'domain_id': 'default', 'domain_name': None})}) | | mac_address | fa:16:3e:4d:fa:33 | | name | a_port | | network_id | 2d696f10-97a4-454c-a411-ea8d4d685636 | | numa_affinity_policy | None | | port_security_enabled | True | | project_id | afc55714081b4ef29f99ec128cb1fa30 | | propagate_uplink_status | None | | qos_network_policy_id | None | | qos_policy_id | None | | resource_request | None | | revision_number | 1 | | security_group_ids | 1a350403-cad3-4a2d-b30a-73815bd96e0f | | status | DOWN | | tags | | | trunk_details | None | | updated_at | 2022-01-19T09:15:34Z | +-------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ $ openstack recordset list dns-domain-1.org. +--------------------------------------+--------------------------+------+-----------------------------------------------------------------------+--------+--------+ | id | name | type | records | status | action | +--------------------------------------+--------------------------+------+-----------------------------------------------------------------------+--------+--------+ | 2b3e9ea4-8035-4595-955d-ec8c55816111 | dns-domain-1.org. | SOA | ns1.devstack.org. mlavalle.redhat.com. 1642583736 3517 600 86400 3600 | ACTIVE | NONE | | 801dd911-43e6-430a-a80b-ea09af76a9a4 | dns-domain-1.org. | NS | ns1.devstack.org. | ACTIVE | NONE | | 61597628-dafe-4aba-8e30-1d45b4e59874 | a-port.dns-domain-1.org. | AAAA | fd5e:7a6b:1a62::a3 | ACTIVE | NONE | | 83fe489f-2ebc-4911-a67e-bef688833f31 | a-port.dns-domain-1.org. | A | 172.31.251.113 | ACTIVE | NONE | +--------------------------------------+--------------------------+------+-----------------------------------------------------------------------+--------+--------+ In this manner, the ``FQDN`` in the ``dns_assignment`` attribute is compatible with what is being published by the external DNS service.",,86,0
openstack%2Fneutron~892895,openstack/neutron,master,I5f11b568bab4518617409b7c3a02c7222df80a92,[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN,MERGED,2023-08-28 09:59:42.000000000,2023-08-31 22:46:33.000000000,2023-08-31 11:37:30.000000000,"[{'_account_id': 1131}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 32761}]","[{'number': 1, 'created': '2023-08-28 09:59:42.000000000', 'files': ['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/0545f40a0401629e68561a54e4a576a9fb15f7fc', 'message': ""[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN\n\nCloses-Bug: #2032770\nChange-Id: I5f11b568bab4518617409b7c3a02c7222df80a92\n""}]",0,892895,0545f40a0401629e68561a54e4a576a9fb15f7fc,11,5,1,16688,,,0,"[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN

Closes-Bug: #2032770
Change-Id: I5f11b568bab4518617409b7c3a02c7222df80a92
",git fetch https://review.opendev.org/openstack/neutron refs/changes/95/892895/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py']",2,0545f40a0401629e68561a54e4a576a9fb15f7fc,bug/2032770,"from neutron_lib.api.definitions import uplink_status_propagation uplink_status_propagation.ALIAS,",,9,0
openstack%2Fmanila~893384,openstack/manila,master,Ia5b4e0d57294c3972f55f4fa9a2750ab0251f7bf,"Revert ""Improve scheduler performance when thin provisioning""",MERGED,2023-08-31 17:23:10.000000000,2023-08-31 22:14:53.000000000,2023-08-31 20:14:22.000000000,"[{'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 31721}, {'_account_id': 33038}]","[{'number': 1, 'created': '2023-08-31 17:23:10.000000000', 'files': ['manila/db/api.py', 'manila/db/sqlalchemy/api.py', 'manila/scheduler/host_manager.py', 'manila/tests/scheduler/test_host_manager.py', 'releasenotes/notes/bug-2020187-scheduler-performance-2edc4c706b2fea2f.yaml'], 'web_link': 'https://opendev.org/openstack/manila/commit/4b57e249cf07a25687b0b30b2ec916935c298d9f', 'message': 'Revert ""Improve scheduler performance when thin provisioning""\n\nThis reverts commit e885852648c5593d8662b30eb7cef0e08dfe0b70.\n\nReason for revert: This change is breaking drivers that are able to thin provisioning shares. The shares join in the sqlalchemy/api is not working properly, as the share doesn\'t have an attribute called shares. The join should be performed differently.\n\nChange-Id: Ia5b4e0d57294c3972f55f4fa9a2750ab0251f7bf\n'}]",2,893384,4b57e249cf07a25687b0b30b2ec916935c298d9f,17,5,1,29632,,,0,"Revert ""Improve scheduler performance when thin provisioning""

This reverts commit e885852648c5593d8662b30eb7cef0e08dfe0b70.

Reason for revert: This change is breaking drivers that are able to thin provisioning shares. The shares join in the sqlalchemy/api is not working properly, as the share doesn't have an attribute called shares. The join should be performed differently.

Change-Id: Ia5b4e0d57294c3972f55f4fa9a2750ab0251f7bf
",git fetch https://review.opendev.org/openstack/manila refs/changes/84/893384/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/db/api.py', 'manila/db/sqlalchemy/api.py', 'manila/scheduler/host_manager.py', 'manila/tests/scheduler/test_host_manager.py', 'releasenotes/notes/bug-2020187-scheduler-performance-2edc4c706b2fea2f.yaml']",5,4b57e249cf07a25687b0b30b2ec916935c298d9f,bug/2020187,,--- fixes: - | Improve scheduler performance to estimate the allocated capacity for thin provisioning hosts. ,15,31
openstack%2Frequirements~891224,openstack/requirements,master,I46348e7a081628c1298d8bb5e82233f65339df9c,"tox: Drop python3.6, python3.7 from generate env",MERGED,2023-08-11 17:56:22.000000000,2023-08-31 21:46:03.000000000,2023-08-31 21:45:01.000000000,"[{'_account_id': 10342}, {'_account_id': 13252}, {'_account_id': 14288}, {'_account_id': 22348}, {'_account_id': 32238}]","[{'number': 1, 'created': '2023-08-11 17:56:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/4df4cf523c77c38b3452ed1cb6a5a71b8d14cd4f', 'message': 'tox: Drop python3.6, python3.7 from generate env\n\nThese are no longer officially supported.\n\nChange-Id: I46348e7a081628c1298d8bb5e82233f65339df9c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 2, 'created': '2023-08-31 16:19:11.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/requirements/commit/e75a249fbd3927c5a3a1f10adffe002576f2a3f3', 'message': 'tox: Drop python3.6, python3.7 from generate env\n\nThese are no longer officially supported.\n\nChange-Id: I46348e7a081628c1298d8bb5e82233f65339df9c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",0,891224,e75a249fbd3927c5a3a1f10adffe002576f2a3f3,13,5,2,15334,,,0,"tox: Drop python3.6, python3.7 from generate env

These are no longer officially supported.

Change-Id: I46348e7a081628c1298d8bb5e82233f65339df9c
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/24/891224/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,4df4cf523c77c38b3452ed1cb6a5a71b8d14cd4f,drop-ryu,commands = generate-constraints {posargs: -b blacklist.txt -r global-requirements.txt -p python3.8 -p python3.9 -p python3.10 > upper-constraints.txt},commands = generate-constraints {posargs: -b blacklist.txt -r global-requirements.txt -p python3.6 -p python3.7 -p python3.8 -p python3.9 -p python3.10 > upper-constraints.txt},1,1
openstack%2Fkolla-ansible~892427,openstack/kolla-ansible,master,Ief8dca4e27197c9576e215cbd960da75f6fdc20c,Fix designate-producers not running properly,MERGED,2023-08-23 14:29:13.000000000,2023-08-31 21:30:29.000000000,2023-08-31 21:29:35.000000000,"[{'_account_id': 13252}, {'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 32553}, {'_account_id': 32761}]","[{'number': 1, 'created': '2023-08-23 14:29:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b1774e232186be2fc748b4bbb580da68afd6aad2', 'message': 'Fix designate-producers not running properly\n\nKolla is setting the producer tasks to None, and this\nprevents designate from incrementing the zone serial.\n\nChange-Id: Ief8dca4e27197c9576e215cbd960da75f6fdc20c\n'}, {'number': 2, 'created': '2023-08-23 14:32:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/11dbf20ffff0254d241934dc9c50e97e8ac04152', 'message': 'Fix designate-producers not running properly\n\nKolla is setting the producer tasks to None, and this\ndisables all producer tasks.\n\nStarting with the next release of Designate a new job\nwas added to the producer named increment_serial that\nis responsible for incrementing the serial for each zone.\nhttps://github.com/openstack/designate/commit/fb9c2da977a36afc695b1e75a81aa85d8e56ef0a\n\nChange-Id: Ief8dca4e27197c9576e215cbd960da75f6fdc20c\n'}, {'number': 3, 'created': '2023-08-23 17:26:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f27c8fd6a68926553844d28a27c40436482787ef', 'message': 'Fix designate-producers not running properly\n\nKolla is setting the producer tasks to None, and this\ndisables all producer tasks.\n\nStarting with the next release of Designate a new task\nwas added to the producer named increment_serial that\nis now critical path for incrementing the serial for each zone.\nhttps://github.com/openstack/designate/commit/fb9c2da977a36afc695b1e75a81aa85d8e56ef0a\n\nCloses-Bug: #1879557\nChange-Id: Ief8dca4e27197c9576e215cbd960da75f6fdc20c\n'}, {'number': 4, 'created': '2023-08-28 22:33:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/43cf7e4d2386d5c1d50eefb4c118a877968e76ba', 'message': 'Fix designate-producers not running properly\n\nKolla is setting the producer tasks to None, and this\ndisables all producer tasks.\n\nStarting with the next release of Designate a new task\nwas added to the producer named increment_serial that\nis now critical path for incrementing the serial for each zone.\nhttps://github.com/openstack/designate/commit/fb9c2da977a36afc695b1e75a81aa85d8e56ef0a\n\nCloses-Bug: #1879557\nChange-Id: Ief8dca4e27197c9576e215cbd960da75f6fdc20c\n'}, {'number': 5, 'created': '2023-08-29 10:07:32.000000000', 'files': ['ansible/roles/designate/templates/designate.conf.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/8e3c16890862337525289fa63724c8d78831e563', 'message': 'Fix designate-producers not running properly\n\nKolla is setting the producer tasks to None, and this\ndisables all producer tasks.\n\nStarting with the next release of Designate a new task\nwas added to the producer named increment_serial that\nis now critical path for incrementing the serial for each zone.\nhttps://github.com/openstack/designate/commit/fb9c2da977a36afc695b1e75a81aa85d8e56ef0a\n\nCloses-Bug: #1879557\nChange-Id: Ief8dca4e27197c9576e215cbd960da75f6fdc20c\n'}]",8,892427,8e3c16890862337525289fa63724c8d78831e563,34,6,5,22623,,,0,"Fix designate-producers not running properly

Kolla is setting the producer tasks to None, and this
disables all producer tasks.

Starting with the next release of Designate a new task
was added to the producer named increment_serial that
is now critical path for incrementing the serial for each zone.
https://github.com/openstack/designate/commit/fb9c2da977a36afc695b1e75a81aa85d8e56ef0a

Closes-Bug: #1879557
Change-Id: Ief8dca4e27197c9576e215cbd960da75f6fdc20c
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/27/892427/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/designate/templates/designate.conf.j2'],1,b1774e232186be2fc748b4bbb580da68afd6aad2,,,enabled_tasks = None,0,1
openstack%2Fnova~891033,openstack/nova,master,I9c27caa869d72e06e84bcf84ceedb586ed3bc8e9,Fix tox docs target,MERGED,2023-08-10 13:24:01.000000000,2023-08-31 21:04:39.000000000,2023-08-31 21:02:48.000000000,"[{'_account_id': 7634}, {'_account_id': 8556}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-10 13:24:01.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/nova/commit/56adc9bd85ecd5b1f401fd32cf63201b8db28cc7', 'message': 'Fix tox docs target\n\nWhen the upper constraint usage moved to install_command in tox.ini, it\nwas not removed from docs target\'s deps list, where it\'s now not\nnecessary, and even could cause issues when overriding\nTOX_CONSTRAINTS_FILE.\n\nThis patch replaces the old UPPER_CONSTRAINTS_FILE to the ""new""\nTOX_CONSTRAINTS_FILE in the install_command, too.\n\nChange-Id: I9c27caa869d72e06e84bcf84ceedb586ed3bc8e9\n'}]",2,891033,56adc9bd85ecd5b1f401fd32cf63201b8db28cc7,10,4,1,17685,,,0,"Fix tox docs target

When the upper constraint usage moved to install_command in tox.ini, it
was not removed from docs target's deps list, where it's now not
necessary, and even could cause issues when overriding
TOX_CONSTRAINTS_FILE.

This patch replaces the old UPPER_CONSTRAINTS_FILE to the ""new""
TOX_CONSTRAINTS_FILE in the install_command, too.

Change-Id: I9c27caa869d72e06e84bcf84ceedb586ed3bc8e9
",git fetch https://review.opendev.org/openstack/nova refs/changes/33/891033/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,56adc9bd85ecd5b1f401fd32cf63201b8db28cc7,tox-docs-fix-upper,install_command = python -I -m pip install -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} {opts} {packages},install_command = python -I -m pip install -c{env:UPPER_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master} {opts} {packages} -c{env:TOX_CONSTRAINTS_FILE:https://releases.openstack.org/constraints/upper/master},1,2
openstack%2Fnova~867789,openstack/nova,master,I179720d6ed6dd2d1aca682cd1213c4d6c77ebcfe,Remove unused mocks,MERGED,2022-12-15 12:50:57.000000000,2023-08-31 21:02:39.000000000,2023-08-31 21:02:39.000000000,"[{'_account_id': 8556}, {'_account_id': 10239}, {'_account_id': 11604}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 32761}]","[{'number': 1, 'created': '2022-12-15 12:50:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/f6224be62e93a8d19d55d24472220080a58bc5db', 'message': ""Remove unused mocks\n\nChange I764b0086d0bf39d4ca8cb308696169282b12b42b removed the final use\nof 'get_by_instance_uuid'. These mocks have been unused since.\n\nChange-Id: I179720d6ed6dd2d1aca682cd1213c4d6c77ebcfe\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 2, 'created': '2022-12-20 16:32:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/077edc67f75ca528b043262f44d0555d66dc5915', 'message': ""Remove unused mocks\n\nChange I764b0086d0bf39d4ca8cb308696169282b12b42b removed the final use\nof 'get_by_instance_uuid'. These mocks have been unused since.\n\nChange-Id: I179720d6ed6dd2d1aca682cd1213c4d6c77ebcfe\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}, {'number': 3, 'created': '2023-07-26 12:41:49.000000000', 'files': ['nova/tests/unit/virt/ironic/test_driver.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/3e1cfcefc2cef3e3418b4310e6c4c49d43c1d80b', 'message': ""Remove unused mocks\n\nChange I764b0086d0bf39d4ca8cb308696169282b12b42b removed the final use\nof 'get_by_instance_uuid'. These mocks have been unused since.\n\nChange-Id: I179720d6ed6dd2d1aca682cd1213c4d6c77ebcfe\nSigned-off-by: Stephen Finucane <sfinucan@redhat.com>\n""}]",1,867789,3e1cfcefc2cef3e3418b4310e6c4c49d43c1d80b,19,6,3,15334,,,0,"Remove unused mocks

Change I764b0086d0bf39d4ca8cb308696169282b12b42b removed the final use
of 'get_by_instance_uuid'. These mocks have been unused since.

Change-Id: I179720d6ed6dd2d1aca682cd1213c4d6c77ebcfe
Signed-off-by: Stephen Finucane <sfinucan@redhat.com>
",git fetch https://review.opendev.org/openstack/nova refs/changes/89/867789/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/unit/virt/ironic/test_driver.py'],1,f6224be62e93a8d19d55d24472220080a58bc5db,bp/openstacksdk-in-nova," def test_get_info_cached(self, mock_svc_by_hv,"," @mock.patch.object(FAKE_CLIENT.node, 'get_by_instance_uuid') def test_get_info_cached(self, mock_gbiu, mock_svc_by_hv, mock_gbiu.return_value = node mock_gbiu.assert_not_called() mock_node.get_by_instance_uuid.return_value = node mock_node.get_by_instance_uuid.return_value = node node = _get_cached_node(driver='fake', uuid=node_uuid) mock_node.get_by_instance_uuid.return_value = node",1,8
openstack%2Fnova~878080,openstack/nova,master,If6617f169d1221b4c43938bdfd37207d079cc7da,Update serial console example client for py3,MERGED,2023-03-21 14:32:24.000000000,2023-08-31 21:02:32.000000000,2023-08-31 21:02:32.000000000,"[{'_account_id': 4690}, {'_account_id': 8556}, {'_account_id': 20733}, {'_account_id': 22348}, {'_account_id': 32238}, {'_account_id': 35507}]","[{'number': 1, 'created': '2023-03-21 14:32:24.000000000', 'files': ['doc/source/contributor/testing/serial-console.rst'], 'web_link': 'https://opendev.org/openstack/nova/commit/23c345d61da7d0b763fd04db8259fbd6cfe1ec53', 'message': 'Update serial console example client for py3\n\nA very limited and minimal serial console example client code exists\nin the documentation [1] for testing purposes. This code was not\nupdated to python 3. This patch updates the example code to be python3\ncompatible.\n\n[1] https://docs.openstack.org/nova/latest/contributor/testing/serial-console.html#testing-the-api\n\nCloses-Bug: #2009956\nChange-Id: If6617f169d1221b4c43938bdfd37207d079cc7da\n'}]",2,878080,23c345d61da7d0b763fd04db8259fbd6cfe1ec53,12,6,1,17685,,,0,"Update serial console example client for py3

A very limited and minimal serial console example client code exists
in the documentation [1] for testing purposes. This code was not
updated to python 3. This patch updates the example code to be python3
compatible.

[1] https://docs.openstack.org/nova/latest/contributor/testing/serial-console.html#testing-the-api

Closes-Bug: #2009956
Change-Id: If6617f169d1221b4c43938bdfd37207d079cc7da
",git fetch https://review.opendev.org/openstack/nova refs/changes/80/878080/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/contributor/testing/serial-console.rst'],1,23c345d61da7d0b763fd04db8259fbd6cfe1ec53,bug/2009956," while len(b) > 0: # websocket data: opcode + length + data word = b[2:b[1]+2] b = b[b[1]+2:] sys.stdout.buffer.write(word) sys.stdout.flush() print(""Usage %s: Please use websocket url"") print(""Example: ws://127.0.0.1:6083/?token=xxx"") ws.send(c.encode('utf-8'), binary=True)"," sys.stdout.write(b) sys.stdout.flush() print ""Usage %s: Please use websocket url"" print ""Example: ws://127.0.0.1:6083/?token=xxx"" ws.send(c)",9,5
openstack%2Fneutron~892897,openstack/neutron,stable/zed,I5f11b568bab4518617409b7c3a02c7222df80a92,[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN,MERGED,2023-08-28 10:00:35.000000000,2023-08-31 21:01:46.000000000,2023-08-31 21:00:28.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 10:00:35.000000000', 'files': ['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/e369dbf32ee70e18b0dc7c5e8a4257c0652da407', 'message': ""[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN\n\nCloses-Bug: #2032770\nChange-Id: I5f11b568bab4518617409b7c3a02c7222df80a92\n(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)\n""}]",2,892897,e369dbf32ee70e18b0dc7c5e8a4257c0652da407,17,3,1,16688,,,0,"[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN

Closes-Bug: #2032770
Change-Id: I5f11b568bab4518617409b7c3a02c7222df80a92
(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/97/892897/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py']",2,e369dbf32ee70e18b0dc7c5e8a4257c0652da407,bug/2032770,"from neutron_lib.api.definitions import uplink_status_propagation uplink_status_propagation.ALIAS,",,9,0
openstack%2Fplacement~809948,openstack/placement,master,I42f808d042bb52e70e2a5e10206c95698e3bfc42,Modify the comment that is confused,MERGED,2021-09-19 06:42:16.000000000,2023-08-31 21:01:38.000000000,2023-08-31 21:00:31.000000000,"[{'_account_id': 8556}, {'_account_id': 15334}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-09-19 06:42:16.000000000', 'files': ['placement/objects/research_context.py'], 'web_link': 'https://opendev.org/openstack/placement/commit/d84c28391b89c17e5caa3a14853ff78ca03925ee', 'message': 'Modify the comment that is confused\n\nThis SQL clause is confused and `usage` is the keyword of MySql.\n\nChange-Id: I42f808d042bb52e70e2a5e10206c95698e3bfc42\n'}]",2,809948,d84c28391b89c17e5caa3a14853ff78ca03925ee,16,3,1,31412,,,0,"Modify the comment that is confused

This SQL clause is confused and `usage` is the keyword of MySql.

Change-Id: I42f808d042bb52e70e2a5e10206c95698e3bfc42
",git fetch https://review.opendev.org/openstack/placement refs/changes/48/809948/1 && git format-patch -1 --stdout FETCH_HEAD,['placement/objects/research_context.py'],1,d84c28391b89c17e5caa3a14853ff78ca03925ee,," # ON rp.id = inv.resource_provider_id # AND inv.resource_class_id = $RC_ID # allocs.resource_provider_id, # FROM allocations AS allocs # ) AS usaged # ON inv.resource_provider_id = usaged.resource_provider_id # AND $AMOUNT % inv.step_size = 0"," # ON rp.id = inv.resource_provider_id # AND inv.resource_class_id = $RC_ID # alloc.resource_provider_id, # FROM allocations AS alloc # ) AS usage # ON inv.resource_provider_id = usage.resource_provider_id # AND $AMOUNT % inv.step_size == 0",7,7
openstack%2Fnova~886980,openstack/nova,master,I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6,Limit nodes by ironic shard key,MERGED,2023-06-26 11:00:14.000000000,2023-08-31 21:01:35.000000000,2023-08-31 21:00:22.000000000,"[{'_account_id': 782}, {'_account_id': 7166}, {'_account_id': 10342}, {'_account_id': 11604}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-26 11:00:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0e830ad066057f6647e073d0ee5c0b5fa42b54ad', 'message': 'WIP: Limit nodes by ironic shard key\n\nIronic in API 1.82 added the option for nodes to be associated with\na specific shard key. This means you can partition up the nodes within\na single ironic conductor group into smaller sets of nodes that can\neach be managed by their own nova-compute ironic service.\n\nblueprint ironic-shards\n\nChange-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6\n'}, {'number': 2, 'created': '2023-06-26 11:10:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/fe854659bf0bade079a8e66c81dee6ca8e648ee5', 'message': 'WIP: Limit nodes by ironic shard key\n\nIronic in API 1.82 added the option for nodes to be associated with\na specific shard key. This means you can partition up the nodes within\na single ironic conductor group into smaller sets of nodes that can\neach be managed by their own nova-compute ironic service.\n\nblueprint ironic-shards\n\nChange-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6\n'}, {'number': 3, 'created': '2023-06-26 16:00:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/417e50cc3e5188358d030862164f0704b68d2e76', 'message': 'Limit nodes by ironic shard key\n\nIronic in API 1.82 added the option for nodes to be associated with\na specific shard key. This means you can partition up the nodes within\na single ironic conductor group into smaller sets of nodes that can\neach be managed by their own nova-compute ironic service.\n\nblueprint ironic-shards\n\nChange-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6\n'}, {'number': 4, 'created': '2023-06-27 10:06:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/73db9f9dd353031d3ba934be48411c553d34b4da', 'message': 'Limit nodes by ironic shard key\n\nIronic in API 1.82 added the option for nodes to be associated with\na specific shard key. This means you can partition up the nodes within\na single ironic conductor group into smaller sets of nodes that can\neach be managed by their own nova-compute ironic service.\n\nblueprint ironic-shards\n\nChange-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6\n'}, {'number': 5, 'created': '2023-06-28 11:20:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0834fa1d6833a8738a8788743f8e0e04237e4a90', 'message': 'Limit nodes by ironic shard key\n\nIronic in API 1.82 added the option for nodes to be associated with\na specific shard key. This can be used to partition up the nodes within\na single ironic conductor group into smaller sets of nodes that can\neach be managed by their own nova-compute ironic service.\n\nWe add a new [ironic]shard config option to allow operators to say\nwhich shard each nova-compute process should target.\nAs such, when the shard is set we ignore the peer_list setting\nand always have a hash ring of one.\n\nblueprint ironic-shards\n\nChange-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6\n'}, {'number': 6, 'created': '2023-06-28 11:24:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9ef50ecb3085d76701809e66593d5d9f71617390', 'message': 'Limit nodes by ironic shard key\n\nIronic in API 1.82 added the option for nodes to be associated with\na specific shard key. This can be used to partition up the nodes within\na single ironic conductor group into smaller sets of nodes that can\neach be managed by their own nova-compute ironic service.\n\nWe add a new [ironic]shard config option to allow operators to say\nwhich shard each nova-compute process should target.\nAs such, when the shard is set we ignore the peer_list setting\nand always have a hash ring of one.\n\nblueprint ironic-shards\n\nChange-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6\n'}, {'number': 7, 'created': '2023-08-31 13:31:15.000000000', 'files': ['nova/virt/ironic/driver.py', 'releasenotes/notes/ironic-shards-5641e4b1ab5bb7aa.yaml', 'nova/tests/unit/virt/ironic/test_driver.py', 'nova/virt/ironic/client_wrapper.py', 'nova/conf/ironic.py', 'nova/tests/unit/virt/ironic/test_client_wrapper.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/f5a12f511b26858131ee79ae5bce38e3f60b156d', 'message': 'Limit nodes by ironic shard key\n\nIronic in API 1.82 added the option for nodes to be associated with\na specific shard key. This can be used to partition up the nodes within\na single ironic conductor group into smaller sets of nodes that can\neach be managed by their own nova-compute ironic service.\n\nWe add a new [ironic]shard config option to allow operators to say\nwhich shard each nova-compute process should target.\nAs such, when the shard is set we ignore the peer_list setting\nand always have a hash ring of one.\n\nblueprint ironic-shards\n\nChange-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6\n'}]",24,886980,f5a12f511b26858131ee79ae5bce38e3f60b156d,37,6,7,782,,,0,"Limit nodes by ironic shard key

Ironic in API 1.82 added the option for nodes to be associated with
a specific shard key. This can be used to partition up the nodes within
a single ironic conductor group into smaller sets of nodes that can
each be managed by their own nova-compute ironic service.

We add a new [ironic]shard config option to allow operators to say
which shard each nova-compute process should target.
As such, when the shard is set we ignore the peer_list setting
and always have a hash ring of one.

blueprint ironic-shards

Change-Id: I5c1b5688c96096f4cfecfc5b16ea59d2ee5756d6
",git fetch https://review.opendev.org/openstack/nova refs/changes/80/886980/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/ironic/driver.py', 'nova/conf/ironic.py']",2,0e830ad066057f6647e073d0ee5c0b5fa42b54ad,ironic-shards," cfg.StrOpt( 'shard', default=None, mutable=True, max_length=255, regex=r'^[a-zA-Z0-9_.-]*$', help='Specify which ironic shard this nova-compute will manage. ' 'This allows you to shard ironic nodes between compute ' 'services without the need to create conductor groups.'),",,25,13
openstack%2Fmanila~893223,openstack/manila,master,Ifb660688c590fb1c32cbe0ae03e0ea444f19cbb8,Add default to read_deleted in context's from_dict,MERGED,2023-08-30 15:31:46.000000000,2023-08-31 20:35:23.000000000,2023-08-31 19:37:07.000000000,"[{'_account_id': 10342}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}, {'_account_id': 30407}]","[{'number': 1, 'created': '2023-08-30 15:31:46.000000000', 'files': ['manila/context.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/f1e255b4d3abc9970198e3aa8037f758a38aa49b', 'message': ""Add default to read_deleted in context's from_dict\n\nthis is follow-up to Ic94323658c89df1c1ff32f511ca23502317d0f00\n\ncurrently the defaults in __init__ and from_dict of RequestContext\nfor read_deleted property are different:\n- in __init__ it is 'no'\n- in from_dict, it is effectively None.\nAnd at the same time, this property is not allowed to be None.\n\nAs a result, the new _sanitize_context in oslo.messaging can not create\na sanitized context copy with error\n\nread_deleted can only be one of 'no', 'yes' or 'only', not None\n\nRelated-Bug: #2030976\nChange-Id: Ifb660688c590fb1c32cbe0ae03e0ea444f19cbb8\n""}]",4,893223,f1e255b4d3abc9970198e3aa8037f758a38aa49b,27,5,1,9542,,,0,"Add default to read_deleted in context's from_dict

this is follow-up to Ic94323658c89df1c1ff32f511ca23502317d0f00

currently the defaults in __init__ and from_dict of RequestContext
for read_deleted property are different:
- in __init__ it is 'no'
- in from_dict, it is effectively None.
And at the same time, this property is not allowed to be None.

As a result, the new _sanitize_context in oslo.messaging can not create
a sanitized context copy with error

read_deleted can only be one of 'no', 'yes' or 'only', not None

Related-Bug: #2030976
Change-Id: Ifb660688c590fb1c32cbe0ae03e0ea444f19cbb8
",git fetch https://review.opendev.org/openstack/manila refs/changes/23/893223/1 && git format-patch -1 --stdout FETCH_HEAD,['manila/context.py'],1,f1e255b4d3abc9970198e3aa8037f758a38aa49b,bug/2030976," read_deleted=values.get('read_deleted', 'no'),"," read_deleted=values.get('read_deleted'),",1,1
openstack%2Fironic-inspector~840891,openstack/ironic-inspector,master,I454ccc5a4648264b8af667f4ea58cdcdac5b72e6,[DNM] Testing Gate,NEW,2022-05-06 12:52:02.000000000,2023-08-31 20:27:22.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-05-06 12:52:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/32f8db34d4c823a97c241dc9ce5679aaf1a8f9d5', 'message': '[DNM] Testing CI with LIBVIRT_STORAGE_POOL_PATH\n\nChange-Id: I454ccc5a4648264b8af667f4ea58cdcdac5b72e6\n'}, {'number': 2, 'created': '2022-05-06 14:45:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/7b4dfe1f502fe8b81890ff031b492f858c165165', 'message': '[DNM] Testing CI with LIBVIRT_STORAGE_POOL_PATH\n\nChange-Id: I454ccc5a4648264b8af667f4ea58cdcdac5b72e6\n'}, {'number': 3, 'created': '2022-05-06 19:21:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/9520791c3d16496a5e844ef4dec847a25880207a', 'message': '[DNM] Testing CI with LIBVIRT_STORAGE_POOL_PATH\n\nChange-Id: I454ccc5a4648264b8af667f4ea58cdcdac5b72e6\n'}, {'number': 4, 'created': '2022-05-06 21:01:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/26b49e2fc63f368bb6da85454316832218584dec', 'message': 'Fix CI jobs\n\n- removing l-c job from CI testing (just to unblock the gate)\n- move grenade job to bios and increase grenade_test_timeout\n- increase the vm disk for testing to 6Gb\n\nChange-Id: I454ccc5a4648264b8af667f4ea58cdcdac5b72e6\n'}, {'number': 5, 'created': '2023-08-23 10:16:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/129abfaf4d7a41d6498d2e412f918e5299fa6ac7', 'message': '[DNM] Testing Gate\n\nChange-Id: I454ccc5a4648264b8af667f4ea58cdcdac5b72e6\n'}, {'number': 6, 'created': '2023-08-31 19:18:10.000000000', 'files': ['setup.py'], 'web_link': 'https://opendev.org/openstack/ironic-inspector/commit/e020536183ddbded31248bfc4944dd68a670e8e7', 'message': '[DNM] Testing Gate\n\nChange-Id: I454ccc5a4648264b8af667f4ea58cdcdac5b72e6\n'}]",1,840891,e020536183ddbded31248bfc4944dd68a670e8e7,15,1,6,15519,,,0,"[DNM] Testing Gate

Change-Id: I454ccc5a4648264b8af667f4ea58cdcdac5b72e6
",git fetch https://review.opendev.org/openstack/ironic-inspector refs/changes/91/840891/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'zuul.d/ironic-inspector-jobs.yaml']",2,32f8db34d4c823a97c241dc9ce5679aaf1a8f9d5,test_ci, LIBVIRT_STORAGE_POOL_PATH: /opt/libvirt/images,,1,7
openstack%2Fzaqar~892620,openstack/zaqar,master,I1f20eb22d6e922d12e0d88aae5bf47c032db3cb3,Fix devstack plugin to support centos/rhel 9,MERGED,2023-08-30 21:23:48.000000000,2023-08-31 20:23:23.000000000,2023-08-31 20:22:24.000000000,"[{'_account_id': 8846}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 21:23:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/277a3c238358766ed4c35b0c7a88893a33347038', 'message': 'Fix devstack plugin to support centos/rhel 9\n\nSince there is no official repo of MongoDB\nfor Centos-Stream-9 or Rhel-9, we will build\nthe repo by script.\n\nChange-Id: I1f20eb22d6e922d12e0d88aae5bf47c032db3cb3\n'}, {'number': 2, 'created': '2023-08-30 23:49:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/zaqar/commit/c8a663210ffaf459f8455eea8a40b2b4b14f3ac8', 'message': 'Fix devstack plugin to support centos/rhel 9\n\nSince there is no official repo of MongoDB\nfor Centos-Stream-9 or Rhel-9, we will build\nthe repo by script.\n\nChange-Id: I1f20eb22d6e922d12e0d88aae5bf47c032db3cb3\n'}, {'number': 3, 'created': '2023-08-31 00:13:17.000000000', 'files': ['bindep.txt', 'devstack/plugin.sh', 'tools/test-setup.sh'], 'web_link': 'https://opendev.org/openstack/zaqar/commit/3c1627dbca84c97e4ef2422e86d46d41e839713e', 'message': 'Fix devstack plugin to support centos/rhel 9\n\nSince there is no official repo of MongoDB\nfor Centos-Stream-9 or Rhel-9, we will build\nthe repo by script.\n\nChange-Id: I1f20eb22d6e922d12e0d88aae5bf47c032db3cb3\n'}]",1,892620,3c1627dbca84c97e4ef2422e86d46d41e839713e,18,2,3,8846,,,0,"Fix devstack plugin to support centos/rhel 9

Since there is no official repo of MongoDB
for Centos-Stream-9 or Rhel-9, we will build
the repo by script.

Change-Id: I1f20eb22d6e922d12e0d88aae5bf47c032db3cb3
",git fetch https://review.opendev.org/openstack/zaqar refs/changes/20/892620/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/plugin.sh'],1,277a3c238358766ed4c35b0c7a88893a33347038,fix-devstack-in-centos-9, fedora_version=$(source /etc/os-release ; echo $VERSION_ID) if [[ $fedora_version == '9' ]]; then cat > /etc/yum.repos.d/mongodb-org-6.0.repo << __EOF__ [mongodb-org-6.0] name=MongoDB Repository baseurl=https://repo.mongodb.org/yum/redhat/8/mongodb-org/6.0/x86_64/ gpgcheck=1 enabled=1 gpgkey=https://www.mongodb.org/static/pgp/server-6.0.asc __EOF__ install_package mongodb-org restart_service mongod else install_package mongodb install_package mongodb-server restart_service mongod fi, install_package mongodb install_package mongodb-server restart_service mongod,17,3
openstack%2Fpython-ironic-inspector-client~891976,openstack/python-ironic-inspector-client,master,Ie98396f411817126482fdad8729537ce296308dd,Fix Gate,MERGED,2023-08-18 12:32:03.000000000,2023-08-31 19:42:23.000000000,2023-08-31 19:41:26.000000000,"[{'_account_id': 4571}, {'_account_id': 10342}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-18 12:32:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/629fd2a40ddcd2eb97bbe0f4650547afb6f110af', 'message': '[WIP] Test Fix\n\nChange-Id: Ie98396f411817126482fdad8729537ce296308dd\n'}, {'number': 2, 'created': '2023-08-18 12:34:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/1bfc25b5bb8242c7ebbb0562a94ea32955f8edd3', 'message': '[WIP] Test Fix\n\nChange-Id: Ie98396f411817126482fdad8729537ce296308dd\n'}, {'number': 3, 'created': '2023-08-18 12:53:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/a61fde262fd73132986d86d6d0761cfff8daf425', 'message': '[WIP] Test Fix\n\nChange-Id: Ie98396f411817126482fdad8729537ce296308dd\n'}, {'number': 4, 'created': '2023-08-31 13:41:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/6be2f218824186b044c6949babfc9049cf88af05', 'message': '[WIP] Test Fix\n\nChange-Id: Ie98396f411817126482fdad8729537ce296308dd\n'}, {'number': 5, 'created': '2023-08-31 14:20:47.000000000', 'files': ['functest-requirements.txt', 'setup.cfg', 'tox.ini', 'ironic_inspector_client/tests/functional.py'], 'web_link': 'https://opendev.org/openstack/python-ironic-inspector-client/commit/79d979c7190f8df5bc62a5d4824554d8cb52cf30', 'message': 'Fix Gate\n\n- update commit in functest-requirements.txt\n- update setup.cfg to match other ironic projects\n- clean-up tox.ini\n- added workaround to test_abort_introspection to unblock CI\n\nChange-Id: Ie98396f411817126482fdad8729537ce296308dd\n'}]",5,891976,79d979c7190f8df5bc62a5d4824554d8cb52cf30,19,3,5,15519,,,0,"Fix Gate

- update commit in functest-requirements.txt
- update setup.cfg to match other ironic projects
- clean-up tox.ini
- added workaround to test_abort_introspection to unblock CI

Change-Id: Ie98396f411817126482fdad8729537ce296308dd
",git fetch https://review.opendev.org/openstack/python-ironic-inspector-client refs/changes/76/891976/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/project.yaml', 'tox.ini']",2,629fd2a40ddcd2eb97bbe0f4650547afb6f110af,fix,[testenv:functional-py310] basepython = python3.10,[testenv:functional-py39] basepython = python3.9,2,3
openstack%2Ftacker~893298,openstack/tacker,master,I999b2498cde5576c4cf6c275a6b29f7072c6eb28,Use tox 4.11.0,MERGED,2023-08-31 00:55:39.000000000,2023-08-31 19:41:55.000000000,2023-08-31 19:40:50.000000000,"[{'_account_id': 17255}, {'_account_id': 22348}, {'_account_id': 25701}]","[{'number': 1, 'created': '2023-08-31 00:55:39.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/tacker/commit/9c7918f0b501cdeaffae40f585b76fc92b8e196e', 'message': ""Use tox 4.11.0\n\nWe're hitting the similar issue of pyproject-api [1] on\nthe functional jobs in the gate, which are using the system tox. So\ntell tox to upgrade itself to the version that gets around that issue.\n\n[1] https://github.com/tox-dev/pyproject-api/issues/101\n\nChange-Id: I999b2498cde5576c4cf6c275a6b29f7072c6eb28\n""}]",8,893298,9c7918f0b501cdeaffae40f585b76fc92b8e196e,19,3,1,31857,,,0,"Use tox 4.11.0

We're hitting the similar issue of pyproject-api [1] on
the functional jobs in the gate, which are using the system tox. So
tell tox to upgrade itself to the version that gets around that issue.

[1] https://github.com/tox-dev/pyproject-api/issues/101

Change-Id: I999b2498cde5576c4cf6c275a6b29f7072c6eb28
",git fetch https://review.opendev.org/openstack/tacker refs/changes/98/893298/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,9c7918f0b501cdeaffae40f585b76fc92b8e196e,use-tox-4.11.0,minversion = 4.11.0,minversion = 3.18.0,1,1
openstack%2Fneutron~857012,openstack/neutron,master,I881f6e3f3220c3ebd72cc34deae4719a3312ad7b,"[ovn]Allowed address pairs which is netmask, can be applied",NEW,2022-09-12 07:22:33.000000000,2023-08-31 19:30:54.000000000,,"[{'_account_id': 9845}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23567}]","[{'number': 1, 'created': '2022-09-12 07:22:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f3714d74073b1114f409fffecc1023e98b36c80e', 'message': '[ovn]Allowed address pairs is netmask, can be applied\n\nWhen the netmask is applied, if the host portion is non-zone.\nthe host can only use the specified address in the arp.spa[1].\n\n[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333\n\nChange-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b\n'}, {'number': 2, 'created': '2022-09-13 01:02:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f7caa0667419efcfb8f2d8a428e009c421488dc7', 'message': '[ovn]Allowed address pairs which is netmask, can be applied\n\nWhen the netmask is applied, if the host portion is non-zero.\nthe host can only use the specified address in the arp.spa[1].\n\nThis patch covert allowed address pairs, ensure if address is\nnetmask, the host portion is zero.\n\n[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333\n\nCloses-bug: #1989391\n\nChange-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b\n'}, {'number': 3, 'created': '2023-07-07 01:06:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/9f67a8fab6b042067aa2f1b77019dfd98e87d809', 'message': '[ovn]Allowed address pairs which is netmask, can be applied\n\nWhen the netmask is applied, if the host portion is non-zero.\nthe host can only use the specified address in the arp.spa[1].\n\nThis patch covert allowed address pairs, ensure if address is\nnetmask, the host portion is zero.\n\n[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333\n\nCloses-bug: #1989391\n\nChange-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b\n'}, {'number': 4, 'created': '2023-07-07 02:05:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6203c1b7b8cb446621eb3f658ab3b47647329228', 'message': '[ovn]Allowed address pairs which is netmask, can be applied\n\nWhen the netmask is applied, if the host portion is non-zero.\nthe host can only use the specified address in the arp.spa[1].\n\nThis patch covert allowed address pairs, ensure if address is\nnetmask, the host portion is zero.\n\n[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333\n\nCloses-Bug: #1989391\n\nChange-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b\n'}, {'number': 5, 'created': '2023-07-07 06:41:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/16efb297f5868e49e2ba9038fce5bd2560143ac3', 'message': '[ovn]Allowed address pairs which is netmask, can be applied\n\nWhen the netmask is applied, if the host portion is non-zero.\nthe host can only use the specified address in the arp.spa[1].\n\nThis patch covert allowed address pairs, ensure if address is\nnetmask, the host portion is zero.\n\n[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333\n\nCloses-Bug: #1989391\n\nChange-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b\n'}, {'number': 6, 'created': '2023-07-07 07:09:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c64f42ea52da2c3a017867c85e7f996041f73395', 'message': '[ovn]Allowed address pairs which is netmask, can be applied\n\nWhen the netmask is applied, if the host portion is non-zero.\nthe host can only use the specified address in the arp.spa[1].\n\nThis patch covert allowed address pairs, ensure if address is\nnetmask, the host portion is zero.\n\n[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333\n\nCloses-Bug: #1989391\n\nChange-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b\n'}, {'number': 7, 'created': '2023-08-28 05:58:44.000000000', 'files': ['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/test_mech_driver.py', 'neutron/tests/unit/db/test_db_base_plugin_v2.py', 'neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovn_client.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/db3147e9cbe123b75b8a211b6b25f698eb394c4a', 'message': '[ovn]Allowed address pairs which is netmask, can be applied\n\nWhen the netmask is applied, if the host portion is non-zero.\nthe host can only use the specified address in the arp.spa[1].\n\nThis patch covert allowed address pairs, ensure if address is\nnetmask, the host portion is zero.\n\n[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333\n\nCloses-Bug: #1989391\n\nChange-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b\n'}]",8,857012,db3147e9cbe123b75b8a211b6b25f698eb394c4a,44,4,7,30380,,,0,"[ovn]Allowed address pairs which is netmask, can be applied

When the netmask is applied, if the host portion is non-zero.
the host can only use the specified address in the arp.spa[1].

This patch covert allowed address pairs, ensure if address is
netmask, the host portion is zero.

[1]https://github.com/ovn-org/ovn/blob/98bac97c656c720780fae9b1e4c700eb13c36c29/northd/ovn-northd.c#L4333

Closes-Bug: #1989391

Change-Id: I881f6e3f3220c3ebd72cc34deae4719a3312ad7b
",git fetch https://review.opendev.org/openstack/neutron refs/changes/12/857012/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovn_client.py'],1,f3714d74073b1114f409fffecc1023e98b36c80e,, _cidr = str(netaddr.IPNetwork(allowed_address['ip_address']).cidr) if allowed_address['mac_address'] == port['mac_address']: addresses += ' ' + _cidr _cidr), if allowed_address['mac_address'] == port['mac_address']: addresses += ' ' + allowed_address['ip_address'] allowed_address['ip_address']),3,2
openstack%2Fkeystone-tempest-plugin~787053,openstack/keystone-tempest-plugin,master,Ideeefd81058c52863e247b5c1228e0978133b656,Use py3 as the default runtime for tox,NEW,2021-04-20 03:16:41.000000000,2023-08-31 19:30:40.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-20 03:16:41.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/keystone-tempest-plugin/commit/6424c16fb35de85929965e579bd5d82ba2e35ce1', 'message': ""Use py3 as the default runtime for tox\n\nMoving on py3 as the default runtime for tox to avoid to update this at\neach new cycle.\n\nWallaby support officially the following runtimes [1]:\n- Python 3.6\n- Python 3.8\n\nDuring Victoria Python 3.7 was used as the default runtime [2] however this\nversion isn't longer officially supported.\n\n[1] https://governance.openstack.org/tc/reference/runtimes/wallaby.html#python-runtimes-for-wallaby\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html#python-runtimes-for-victoria\n\nChange-Id: Ideeefd81058c52863e247b5c1228e0978133b656\n""}]",2,787053,6424c16fb35de85929965e579bd5d82ba2e35ce1,5,2,1,31412,,,0,"Use py3 as the default runtime for tox

Moving on py3 as the default runtime for tox to avoid to update this at
each new cycle.

Wallaby support officially the following runtimes [1]:
- Python 3.6
- Python 3.8

During Victoria Python 3.7 was used as the default runtime [2] however this
version isn't longer officially supported.

[1] https://governance.openstack.org/tc/reference/runtimes/wallaby.html#python-runtimes-for-wallaby
[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html#python-runtimes-for-victoria

Change-Id: Ideeefd81058c52863e247b5c1228e0978133b656
",git fetch https://review.opendev.org/openstack/keystone-tempest-plugin refs/changes/53/787053/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,6424c16fb35de85929965e579bd5d82ba2e35ce1,,"envlist = py3,pypy,pep8","envlist = py36,pypy,pep8",1,1
openstack%2Fmonasca-events-api~787072,openstack/monasca-events-api,master,I3ba7351e2bf74917277d0b627a0b2318bbb1501b,Use py3 as the default runtime for tox,NEW,2021-04-20 05:43:49.000000000,2023-08-31 19:30:18.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-20 05:43:49.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/monasca-events-api/commit/6246db197545c07244b6a4d540ce4b83dbf3c36d', 'message': ""Use py3 as the default runtime for tox\n\nMoving on py3 as the default runtime for tox to avoid to update this at\neach new cycle.\n\nWallaby support officially the following runtimes [1]:\n- Python 3.6\n- Python 3.8\n\nDuring Victoria Python 3.7 was used as the default runtime [2] however this\nversion isn't longer officially supported.\n\n[1] https://governance.openstack.org/tc/reference/runtimes/wallaby.html#python-runtimes-for-wallaby\n[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html#python-runtimes-for-victoria\n\nChange-Id: I3ba7351e2bf74917277d0b627a0b2318bbb1501b\n""}]",2,787072,6246db197545c07244b6a4d540ce4b83dbf3c36d,5,2,1,31412,,,0,"Use py3 as the default runtime for tox

Moving on py3 as the default runtime for tox to avoid to update this at
each new cycle.

Wallaby support officially the following runtimes [1]:
- Python 3.6
- Python 3.8

During Victoria Python 3.7 was used as the default runtime [2] however this
version isn't longer officially supported.

[1] https://governance.openstack.org/tc/reference/runtimes/wallaby.html#python-runtimes-for-wallaby
[2] https://governance.openstack.org/tc/reference/runtimes/victoria.html#python-runtimes-for-victoria

Change-Id: I3ba7351e2bf74917277d0b627a0b2318bbb1501b
",git fetch https://review.opendev.org/openstack/monasca-events-api refs/changes/72/787072/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,6246db197545c07244b6a4d540ce4b83dbf3c36d,,"envlist = py3,pep8,cover","envlist = py37,pep8,cover",1,1
openstack%2Fopenstack-helm~893294,openstack/openstack-helm,master,I425dac241cbf454d91c644e7d2ef65625f70e01c,Fix getting IP  when there are multiple IPs assigned,MERGED,2023-08-30 22:29:20.000000000,2023-08-31 19:20:36.000000000,2023-08-31 19:19:23.000000000,"[{'_account_id': 22348}, {'_account_id': 29974}]","[{'number': 1, 'created': '2023-08-30 22:29:20.000000000', 'files': ['neutron/templates/bin/_neutron-linuxbridge-agent-init.sh.tpl', 'neutron/Chart.yaml', 'releasenotes/notes/neutron.yaml', 'neutron/templates/bin/_neutron-openvswitch-agent-init.sh.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/9b46e06062842a78a71d41c1d8fecbc061eddc26', 'message': 'Fix getting IP  when there are multiple IPs assigned\n\nStory: 2003851\nTask: 26644\nChange-Id: I425dac241cbf454d91c644e7d2ef65625f70e01c\n'}]",1,893294,9b46e06062842a78a71d41c1d8fecbc061eddc26,7,2,1,3009,,,0,"Fix getting IP  when there are multiple IPs assigned

Story: 2003851
Task: 26644
Change-Id: I425dac241cbf454d91c644e7d2ef65625f70e01c
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/94/893294/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/templates/bin/_neutron-linuxbridge-agent-init.sh.tpl', 'neutron/Chart.yaml', 'releasenotes/notes/neutron.yaml', 'neutron/templates/bin/_neutron-openvswitch-agent-init.sh.tpl']",4,9b46e06062842a78a71d41c1d8fecbc061eddc26,," local ip=$(ip -4 -o addr s ""${interface}"" | awk '{ print $4; exit }' | awk -F '/' 'NR==1 {print $1}') local prefix=$(ip -4 -o addr s ""${interface}"" | awk '{ print $4; exit }' | awk -F '/' 'NR==1 {print $2}')"," local ip=$(ip -4 -o addr s ""${interface}"" | awk '{ print $4; exit }' | awk -F '/' '{print $1}') local prefix=$(ip -4 -o addr s ""${interface}"" | awk '{ print $4; exit }' | awk -F '/' '{print $2}')",5,4
openstack%2Fopenstack-helm~892704,openstack/openstack-helm,master,I9d0e2a49aabf81eb2d4e00ad2a9d42125261489e,Allows keep glance-images PVC once defined,MERGED,2023-08-24 18:17:01.000000000,2023-08-31 19:18:21.000000000,2023-08-31 19:17:19.000000000,"[{'_account_id': 1004}, {'_account_id': 3009}, {'_account_id': 22348}, {'_account_id': 29974}]","[{'number': 1, 'created': '2023-08-24 18:17:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/16eb3b974e6a92d04e9583597d74363ae6187025', 'message': ""Keep glance-images PVC once defined\n\nGlance image PVC contains requires images that should be careful handled\nduring changing glance storage when migrate out of PVC mode for glance\nstorage.\nWhich in migrate/upgrade path, should be be correctly moved and deleted\nthe PVC after.\n\nOn the other hand, it's also possible to accidentally changes storage\nmode out of `pvc` and lose the `glance-images` PVC which is unbearable\nmistake.\n\nOnce storage mode set to `pvc, we should allow that PVC to be able to\nstay and ready for reuse again until it's mannually deleted.\n\nChange-Id: I9d0e2a49aabf81eb2d4e00ad2a9d42125261489e\n""}, {'number': 2, 'created': '2023-08-29 04:37:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/bb1d8366e9414e953a6476574f7615a321ed9831', 'message': ""Allows keep glance-images PVC once defined\n\nGlance image PVC contains requires images that should be careful handled\nduring changing glance storage when migrate out of PVC mode for glance\nstorage.\nWhich in migrate/upgrade path, should be be correctly moved and deleted\nthe PVC after.\n\nOn the other hand, it's also possible to accidentally changes storage\nmode out of `pvc` and lose the `glance-images` PVC which is unbearable\nmistake.\n\nOnce storage mode set to `pvc, we should allow that PVC to be able to\nstay and ready for reuse again until it's mannually deleted.\n\nThis add flag `keep_pvc` (default to false).\nSet it to true to set helm/resource-policy to keep for glance-images.\n\nChange-Id: I9d0e2a49aabf81eb2d4e00ad2a9d42125261489e\n""}, {'number': 3, 'created': '2023-08-31 04:14:24.000000000', 'files': ['glance/Chart.yaml', 'releasenotes/notes/glance.yaml', 'glance/templates/pvc-images.yaml', 'glance/values.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/f074a65ba1e76b2d308d2c8a1497d91dae2938d3', 'message': ""Allows keep glance-images PVC once defined\n\nGlance image PVC contains requires images that should be careful handled\nduring changing glance storage when migrate out of PVC mode for glance\nstorage.\nWhich in migrate/upgrade path, should be be correctly moved and deleted\nthe PVC after.\n\nOn the other hand, it's also possible to accidentally changes storage\nmode out of `pvc` and lose the `glance-images` PVC which is unbearable\nmistake.\n\nOnce storage mode set to `pvc, we should allow that PVC to be able to\nstay and ready for reuse again until it's mannually deleted.\n\nThis add flag `keep_pvc` (default to true).\nSet it to true to set helm/resource-policy to keep for glance-images.\nSet it to false to allow helm delete glance-images PVC when request.\n\nChange-Id: I9d0e2a49aabf81eb2d4e00ad2a9d42125261489e\n""}]",4,892704,f074a65ba1e76b2d308d2c8a1497d91dae2938d3,16,4,3,12404,,,0,"Allows keep glance-images PVC once defined

Glance image PVC contains requires images that should be careful handled
during changing glance storage when migrate out of PVC mode for glance
storage.
Which in migrate/upgrade path, should be be correctly moved and deleted
the PVC after.

On the other hand, it's also possible to accidentally changes storage
mode out of `pvc` and lose the `glance-images` PVC which is unbearable
mistake.

Once storage mode set to `pvc, we should allow that PVC to be able to
stay and ready for reuse again until it's mannually deleted.

This add flag `keep_pvc` (default to true).
Set it to true to set helm/resource-policy to keep for glance-images.
Set it to false to allow helm delete glance-images PVC when request.

Change-Id: I9d0e2a49aabf81eb2d4e00ad2a9d42125261489e
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/04/892704/1 && git format-patch -1 --stdout FETCH_HEAD,"['glance/Chart.yaml', 'releasenotes/notes/glance.yaml', 'glance/templates/pvc-images.yaml']",3,16eb3b974e6a92d04e9583597d74363ae6187025,keep-glance-pvc, annotations: helm.sh/resource-policy: keep,,4,1
openstack%2Fopenstack-helm~893178,openstack/openstack-helm,master,I12a3ea4061d5c13879b878b85eb206726b5db27c,Update health probe script in nova,MERGED,2023-08-30 13:12:26.000000000,2023-08-31 19:15:13.000000000,2023-08-31 19:13:56.000000000,"[{'_account_id': 3009}, {'_account_id': 22348}, {'_account_id': 29974}]","[{'number': 1, 'created': '2023-08-30 13:12:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/ee4280c5b98cd3b9ef0e3150172309b5e496858a', 'message': 'Update health probe script in nova\n\nIf we define ovsdb_connection in os_vif_ovs config group, health\nprobe fails for nova-compute because of the wrong condition to\ndetect db connection string from configuration file.\nThis patch detects db connection string using string.startswith()\nin a more strict way.\n\nChange-Id: I12a3ea4061d5c13879b878b85eb206726b5db27c\n'}, {'number': 2, 'created': '2023-08-31 15:29:50.000000000', 'files': ['nova/templates/bin/_health-probe.py.tpl', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/bd955f077f9a8ec4523a32e3e5c21cc08d224575', 'message': 'Update health probe script in nova\n\nIf we define ovsdb_connection in os_vif_ovs config group, health\nprobe fails for nova-compute because of the wrong condition to\ndetect db connection string from configuration file.\nThis patch detects db connection string using string.startswith()\nin a more strict way.\n\nChange-Id: I12a3ea4061d5c13879b878b85eb206726b5db27c\n'}]",2,893178,bd955f077f9a8ec4523a32e3e5c21cc08d224575,12,3,2,31746,,,0,"Update health probe script in nova

If we define ovsdb_connection in os_vif_ovs config group, health
probe fails for nova-compute because of the wrong condition to
detect db connection string from configuration file.
This patch detects db connection string using string.startswith()
in a more strict way.

Change-Id: I12a3ea4061d5c13879b878b85eb206726b5db27c
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/78/893178/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/templates/bin/_health-probe.py.tpl', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml']",3,ee4280c5b98cd3b9ef0e3150172309b5e496858a,,version: 0.3.20,version: 0.3.19,3,2
openstack%2Fneutron~892889,openstack/neutron,stable/wallaby,I81390af2ea2fc384423518b84de3acf7adaf9193,[OVN] Skip the port status UP update during a live migration,MERGED,2023-08-28 08:55:12.000000000,2023-08-31 19:08:25.000000000,2023-08-31 19:06:54.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 08:55:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/b0184e52e8faf69d006a24aa6b96f583b6835e6b', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nConflicts:\n    neutron/common/ovn/utils.py\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)\n(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)\n'}, {'number': 2, 'created': '2023-08-29 08:13:28.000000000', 'files': ['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/common/ovn/constants.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/7912903b488faf16a9c914b2d1a9994e90e718bf', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nConflicts:\n    neutron/common/ovn/utils.py\n    neutron/common/ovn/constants.py\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)\n(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)\n(cherry picked from commit f2a74b8c4cc5326ee78fc1aada2e624f9a48ddfc)\n'}]",0,892889,7912903b488faf16a9c914b2d1a9994e90e718bf,12,3,2,16688,,,0,"[OVN] Skip the port status UP update during a live migration

Skip the port status UP update during a live migration due to a
``PortBindingChassisUpdateEvent`` event.

The port status will be set by  the ``LogicalSwitchPortCreateUpEvent``
and ``LogicalSwitchPortCreateDownEvent`` events, that will be issued
when the port is deleted from the source host and created in the
destination host. This is a planned operation and controlled by Nova,
not a reactive event due to an unplanned host down event.

Conflicts:
    neutron/common/ovn/utils.py
    neutron/common/ovn/constants.py

Related-Bug: #2027605
Change-Id: I81390af2ea2fc384423518b84de3acf7adaf9193
(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)
(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)
(cherry picked from commit f2a74b8c4cc5326ee78fc1aada2e624f9a48ddfc)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/89/892889/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py']",3,b0184e52e8faf69d006a24aa6b96f583b6835e6b,bug/2027605," self.driver.set_port_status_up.reset_mock() # Port binding change. 'type': '_fake_', 'logical_port': 'foo', 'options': {}}), ovsdb_row(attrs={'_table': pbtable, 'chassis': 'two', 'type': '_fake_'})) # Port binding change because of a live migration in progress. options = { ovn_const.LSP_OPTIONS_REQUESTED_CHASSIS_KEY: 'chassis1,chassis2'} self._test_event( self.event.ROW_UPDATE, ovsdb_row(attrs={'_table': pbtable, 'chassis': 'one', 'type': '_fake_', 'logical_port': 'foo', 'options': options}),"," 'type': '_fake_', 'logical_port': 'foo'}),",32,1
openstack%2Fneutron~887664,openstack/neutron,master,I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b,Default SG rules template - Update related docs and add release note,MERGED,2023-07-05 10:13:29.000000000,2023-08-31 19:08:19.000000000,2023-08-31 19:05:54.000000000,"[{'_account_id': 8313}, {'_account_id': 13861}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 32238}, {'_account_id': 32761}]","[{'number': 1, 'created': '2023-07-05 10:13:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/244cf53b2a405cb630a7c24cd0605f90427e1ad7', 'message': 'Default SG rules template - Update related docs and add release note\n\nThis patch updates docs related to the Security Groups to add info about\npossibility to change default set of rules created in every new security\ngroup.\nIt also adds release note about this new API in Neutron.\n\nCloses-Bug: #1983053\nChange-Id: I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b\n'}, {'number': 2, 'created': '2023-07-07 08:44:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/44a1339f6bb721ead0c079cf082f0e7ca8f28dea', 'message': 'Default SG rules template - Update related docs and add release note\n\nThis patch updates docs related to the Security Groups to add info about\npossibility to change default set of rules created in every new security\ngroup.\nIt also adds release note about this new API in Neutron.\n\nCloses-Bug: #1983053\nChange-Id: I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b\n'}, {'number': 3, 'created': '2023-07-17 10:42:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/53d98674751b73fc0d72e19f776003e92c66e7ea', 'message': 'Default SG rules template - Update related docs and add release note\n\nThis patch updates docs related to the Security Groups to add info about\npossibility to change default set of rules created in every new security\ngroup.\nIt also adds release note about this new API in Neutron.\n\nCloses-Bug: #1983053\nChange-Id: I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b\n'}, {'number': 4, 'created': '2023-08-23 10:38:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/77f61082a74b72deafad3d36a9fa8c7225e07b30', 'message': 'Default SG rules template - Update related docs and add release note\n\nThis patch updates docs related to the Security Groups to add info about\npossibility to change default set of rules created in every new security\ngroup.\nIt also adds release note about this new API in Neutron.\n\nCloses-Bug: #1983053\nChange-Id: I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b\n'}, {'number': 5, 'created': '2023-08-29 17:55:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/7269eccf5f16c2f032386997ecf44f9a26506c5d', 'message': 'Default SG rules template - Update related docs and add release note\n\nThis patch updates docs related to the Security Groups to add info about\npossibility to change default set of rules created in every new security\ngroup.\nIt also adds release note about this new API in Neutron.\n\nCloses-Bug: #1983053\nChange-Id: I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b\n'}, {'number': 6, 'created': '2023-08-30 10:18:34.000000000', 'files': ['releasenotes/notes/Default-security-group-rules-added-94a9ac6cdd1c538e.yaml', 'doc/source/admin/intro-os-networking.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/5c2f54ca0364384352035cd1d80acc6e2ffa9f12', 'message': 'Default SG rules template - Update related docs and add release note\n\nThis patch updates docs related to the Security Groups to add info about\npossibility to change default set of rules created in every new security\ngroup.\nIt also adds release note about this new API in Neutron.\n\nCloses-Bug: #1983053\nChange-Id: I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b\n'}]",1,887664,5c2f54ca0364384352035cd1d80acc6e2ffa9f12,22,6,6,11975,,,0,"Default SG rules template - Update related docs and add release note

This patch updates docs related to the Security Groups to add info about
possibility to change default set of rules created in every new security
group.
It also adds release note about this new API in Neutron.

Closes-Bug: #1983053
Change-Id: I0f6ecc5cf374a0090930e9786834ed7a1be3dc0b
",git fetch https://review.opendev.org/openstack/neutron refs/changes/64/887664/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/Default-security-group-rules-added-94a9ac6cdd1c538e.yaml', 'doc/source/admin/intro-os-networking.rst']",2,244cf53b2a405cb630a7c24cd0605f90427e1ad7,bug/1983053,"Each project contains a ``default`` security group that by default allows all egress traffic and denies all ingress traffic. You can change the rules in the ``default`` security group. Admin user can also define own set of security group rules which will be added by default to each new ``default`` and each new non default (custom) security group created for every project in the cloud. There is ``security-group-default-rules`` API extension which allows to define such own set of the default security group rules. If you launch an instance without specifying a security group, the ``default`` security group automatically applies to it. Similarly, if you create a port without specifying a security group, the ``default`` security group automatically applies to it.Those rules mentioned above are added automatically by neutron and cannot be changed using ``default security group rules`` API provided by the ``security-group-default-rules`` extensions. ","Each project contains a ``default`` security group that allows all egress traffic and denies all ingress traffic. You can change the rules in the ``default`` security group. If you launch an instance without specifying a security group, the ``default`` security group automatically applies to it. Similarly, if you create a port without specifying a security group, the ``default`` security group automatically applies to it.",38,6
openstack%2Fneutron~892885,openstack/neutron,stable/xena,I81390af2ea2fc384423518b84de3acf7adaf9193,[OVN] Skip the port status UP update during a live migration,MERGED,2023-08-28 08:54:10.000000000,2023-08-31 19:08:00.000000000,2023-08-31 19:06:45.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 08:54:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1ee35c78b0e2db63c8e6f748ba2848ffa4075271', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nConflicts:\n    neutron/common/ovn/utils.py\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)\n(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)\n'}, {'number': 2, 'created': '2023-08-29 08:12:15.000000000', 'files': ['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/common/ovn/constants.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/f2a74b8c4cc5326ee78fc1aada2e624f9a48ddfc', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nConflicts:\n    neutron/common/ovn/utils.py\n    neutron/common/ovn/constants.py\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)\n(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)\n'}]",0,892885,f2a74b8c4cc5326ee78fc1aada2e624f9a48ddfc,12,3,2,16688,,,0,"[OVN] Skip the port status UP update during a live migration

Skip the port status UP update during a live migration due to a
``PortBindingChassisUpdateEvent`` event.

The port status will be set by  the ``LogicalSwitchPortCreateUpEvent``
and ``LogicalSwitchPortCreateDownEvent`` events, that will be issued
when the port is deleted from the source host and created in the
destination host. This is a planned operation and controlled by Nova,
not a reactive event due to an unplanned host down event.

Conflicts:
    neutron/common/ovn/utils.py
    neutron/common/ovn/constants.py

Related-Bug: #2027605
Change-Id: I81390af2ea2fc384423518b84de3acf7adaf9193
(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)
(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/85/892885/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py']",3,1ee35c78b0e2db63c8e6f748ba2848ffa4075271,bug/2027605," self.driver.set_port_status_up.reset_mock() # Port binding change. 'type': '_fake_', 'logical_port': 'foo', 'options': {}}), ovsdb_row(attrs={'_table': pbtable, 'chassis': 'two', 'type': '_fake_'})) # Port binding change because of a live migration in progress. options = { ovn_const.LSP_OPTIONS_REQUESTED_CHASSIS_KEY: 'chassis1,chassis2'} self._test_event( self.event.ROW_UPDATE, ovsdb_row(attrs={'_table': pbtable, 'chassis': 'one', 'type': '_fake_', 'logical_port': 'foo', 'options': options}),"," 'type': '_fake_', 'logical_port': 'foo'}),",32,1
openstack%2Fneutron~892887,openstack/neutron,stable/yoga,I81390af2ea2fc384423518b84de3acf7adaf9193,[OVN] Skip the port status UP update during a live migration,MERGED,2023-08-28 08:54:43.000000000,2023-08-31 19:08:00.000000000,2023-08-31 19:06:18.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 08:54:43.000000000', 'files': ['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/9186d511a510bd39215581918ffb298ae6c2c4f3', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nConflicts:\n    neutron/common/ovn/utils.py\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)\n(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)\n'}]",0,892887,9186d511a510bd39215581918ffb298ae6c2c4f3,10,3,1,16688,,,0,"[OVN] Skip the port status UP update during a live migration

Skip the port status UP update during a live migration due to a
``PortBindingChassisUpdateEvent`` event.

The port status will be set by  the ``LogicalSwitchPortCreateUpEvent``
and ``LogicalSwitchPortCreateDownEvent`` events, that will be issued
when the port is deleted from the source host and created in the
destination host. This is a planned operation and controlled by Nova,
not a reactive event due to an unplanned host down event.

Conflicts:
    neutron/common/ovn/utils.py

Related-Bug: #2027605
Change-Id: I81390af2ea2fc384423518b84de3acf7adaf9193
(cherry picked from commit e1f887ca9ffa73dde8ab41590f2131f3297aa3cd)
(cherry picked from commit 6a9990dba1777dc5510d4fc2b249d8adc98e3e12)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/87/892887/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py']",3,9186d511a510bd39215581918ffb298ae6c2c4f3,bug/2027605," self.driver.set_port_status_up.reset_mock() # Port binding change. 'type': '_fake_', 'logical_port': 'foo', 'options': {}}), ovsdb_row(attrs={'_table': pbtable, 'chassis': 'two', 'type': '_fake_'})) # Port binding change because of a live migration in progress. options = { ovn_const.LSP_OPTIONS_REQUESTED_CHASSIS_KEY: 'chassis1,chassis2'} self._test_event( self.event.ROW_UPDATE, ovsdb_row(attrs={'_table': pbtable, 'chassis': 'one', 'type': '_fake_', 'logical_port': 'foo', 'options': options}),"," 'type': '_fake_', 'logical_port': 'foo'}),",32,1
openstack%2Frequirements~893403,openstack/requirements,master,I23ba892e6dd7f2566e5af6626c072c2dcc5a4382,Fix gate by bumping tox version and removing ryu,MERGED,2023-08-31 14:58:17.000000000,2023-08-31 19:07:43.000000000,2023-08-31 19:06:26.000000000,"[{'_account_id': 10342}, {'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-31 14:58:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/2deb473473ff2e8e9e62b44ce546d18685dd5095', 'message': 'WIP: gate fix\n\nChange-Id: I23ba892e6dd7f2566e5af6626c072c2dcc5a4382\n'}, {'number': 2, 'created': '2023-08-31 15:26:33.000000000', 'files': ['global-requirements.txt', 'tox.ini', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/b3ccca8516377c16663217efe20efa1593d74727', 'message': 'Fix gate by bumping tox version and removing ryu\n\nGating jobs started to fail with latest pyproject-api (1.6.1) release.\nThis release would need latest tox (4.11.0) to not fail, but we are\npinning tox via pinning virtualenv in tox.ini.\nTo resolve this we have to remove the virtualenv pinning, which was a\n""temporary"" hack to avoid py3*-check-uc jobs to break. This job is\nfailing because of ryu package, which is unmaintained and projects\nstarted to use os_ken instead, which ""is a fork of the Ryu library\ntailored for OpenStack Neutron"" [1]. Hence, this patch removes ryu\nfrom requirements files to eliminate the need of pinning virtualenv.\n\n[1] https://opendev.org/openstack/os-ken\n\nChange-Id: I23ba892e6dd7f2566e5af6626c072c2dcc5a4382\n'}]",2,893403,b3ccca8516377c16663217efe20efa1593d74727,11,4,2,17685,,,0,"Fix gate by bumping tox version and removing ryu

Gating jobs started to fail with latest pyproject-api (1.6.1) release.
This release would need latest tox (4.11.0) to not fail, but we are
pinning tox via pinning virtualenv in tox.ini.
To resolve this we have to remove the virtualenv pinning, which was a
""temporary"" hack to avoid py3*-check-uc jobs to break. This job is
failing because of ryu package, which is unmaintained and projects
started to use os_ken instead, which ""is a fork of the Ryu library
tailored for OpenStack Neutron"" [1]. Hence, this patch removes ryu
from requirements files to eliminate the need of pinning virtualenv.

[1] https://opendev.org/openstack/os-ken

Change-Id: I23ba892e6dd7f2566e5af6626c072c2dcc5a4382
",git fetch https://review.opendev.org/openstack/requirements refs/changes/03/893403/1 && git format-patch -1 --stdout FETCH_HEAD,"['global-requirements.txt', 'tox.ini', 'upper-constraints.txt']",3,2deb473473ff2e8e9e62b44ce546d18685dd5095,,,ryu===4.34,1,7
openstack%2Fnova~883346,openstack/nova,master,Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2,Deprecate ironic.peer_list,MERGED,2023-05-17 10:33:33.000000000,2023-08-31 19:07:40.000000000,2023-08-31 19:06:07.000000000,"[{'_account_id': 782}, {'_account_id': 4393}, {'_account_id': 7166}, {'_account_id': 10342}, {'_account_id': 11604}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-17 10:33:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9f9d25e4534a0fccc1435be70823fde47fc22270', 'message': 'WIP: Deprecate ironic.peer_list\n\nAs part of the move to using Ironic shards, we document that the best\npractice for scaling Ironic and Nova deployments is to shard Ironic\nnodes between nova-compute processes, rather than attempting to\nuser the peer_list.\n\nCurrently, we only allow users to do this using conductor groups.\nThis works well for those wanting a conductor group per L2 network\ndomain. But in general, conductor groups per nova-compute are\na very poor trade off in terms of ironic deployment complexity.\nFuther patches will look to enable the use of ironic shards,\nalongside conductor groups, to more easily shard your ironic nodes\nbetween nova-compute processes.\n\nTo avoid confusion, we rename the partition_key configuration\nvalue to conductor_group.\n\nblueprint ironic-shards\n\nChange-Id: Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2\n'}, {'number': 2, 'created': '2023-06-26 08:59:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/19c90b332bd68710c5d75b5100ec6cc543520313', 'message': 'Deprecate ironic.peer_list\n\nAs part of the move to using Ironic shards, we document that the best\npractice for scaling Ironic and Nova deployments is to shard Ironic\nnodes between nova-compute processes, rather than attempting to\nuser the peer_list.\n\nCurrently, we only allow users to do this using conductor groups.\nThis works well for those wanting a conductor group per L2 network\ndomain. But in general, conductor groups per nova-compute are\na very poor trade off in terms of ironic deployment complexity.\nFuther patches will look to enable the use of ironic shards,\nalongside conductor groups, to more easily shard your ironic nodes\nbetween nova-compute processes.\n\nTo avoid confusion, we rename the partition_key configuration\nvalue to conductor_group.\n\nblueprint ironic-shards\n\nChange-Id: Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2\n'}, {'number': 3, 'created': '2023-06-26 11:09:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9d7073da38be10b009612f6b451f862b8f7a35f4', 'message': 'Deprecate ironic.peer_list\n\nAs part of the move to using Ironic shards, we document that the best\npractice for scaling Ironic and Nova deployments is to shard Ironic\nnodes between nova-compute processes, rather than attempting to\nuser the peer_list.\n\nCurrently, we only allow users to do this using conductor groups.\nThis works well for those wanting a conductor group per L2 network\ndomain. But in general, conductor groups per nova-compute are\na very poor trade off in terms of ironic deployment complexity.\nFuther patches will look to enable the use of ironic shards,\nalongside conductor groups, to more easily shard your ironic nodes\nbetween nova-compute processes.\n\nTo avoid confusion, we rename the partition_key configuration\nvalue to conductor_group.\n\nblueprint ironic-shards\n\nChange-Id: Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2\n'}, {'number': 4, 'created': '2023-06-27 10:06:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/cd769b164b1e66267e4295ed49ea041e52c831f5', 'message': 'Deprecate ironic.peer_list\n\nAs part of the move to using Ironic shards, we document that the best\npractice for scaling Ironic and Nova deployments is to shard Ironic\nnodes between nova-compute processes, rather than attempting to\nuser the peer_list.\n\nCurrently, we only allow users to do this using conductor groups.\nThis works well for those wanting a conductor group per L2 network\ndomain. But in general, conductor groups per nova-compute are\na very poor trade off in terms of ironic deployment complexity.\nFuther patches will look to enable the use of ironic shards,\nalongside conductor groups, to more easily shard your ironic nodes\nbetween nova-compute processes.\n\nTo avoid confusion, we rename the partition_key configuration\nvalue to conductor_group.\n\nblueprint ironic-shards\n\nChange-Id: Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2\n'}, {'number': 5, 'created': '2023-08-31 08:55:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/263d55e87da18f03cee38348056a3a223b113bdb', 'message': 'Deprecate ironic.peer_list\n\nAs part of the move to using Ironic shards, we document that the best\npractice for scaling Ironic and Nova deployments is to shard Ironic\nnodes between nova-compute processes, rather than attempting to\nuser the peer_list.\n\nCurrently, we only allow users to do this using conductor groups.\nThis works well for those wanting a conductor group per L2 network\ndomain. But in general, conductor groups per nova-compute are\na very poor trade off in terms of ironic deployment complexity.\nFuther patches will look to enable the use of ironic shards,\nalongside conductor groups, to more easily shard your ironic nodes\nbetween nova-compute processes.\n\nTo avoid confusion, we rename the partition_key configuration\nvalue to conductor_group.\n\nblueprint ironic-shards\n\nChange-Id: Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2\n'}, {'number': 6, 'created': '2023-08-31 08:56:10.000000000', 'files': ['nova/virt/ironic/driver.py', 'releasenotes/notes/deprecate-ironic-peer-list-ff8a502935faa045.yaml', 'nova/tests/unit/virt/ironic/test_driver.py', 'doc/source/admin/configuration/hypervisor-ironic.rst', 'nova/conf/ironic.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/cbf400df1dc3e26f4f2e655ca47db7fb097b3531', 'message': 'Deprecate ironic.peer_list\n\nAs part of the move to using Ironic shards, we document that the best\npractice for scaling Ironic and Nova deployments is to shard Ironic\nnodes between nova-compute processes, rather than attempting to\nuser the peer_list.\n\nCurrently, we only allow users to do this using conductor groups.\nThis works well for those wanting a conductor group per L2 network\ndomain. But in general, conductor groups per nova-compute are\na very poor trade off in terms of ironic deployment complexity.\nFuther patches will look to enable the use of ironic shards,\nalongside conductor groups, to more easily shard your ironic nodes\nbetween nova-compute processes.\n\nTo avoid confusion, we rename the partition_key configuration\nvalue to conductor_group.\n\nblueprint ironic-shards\n\nChange-Id: Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2\n'}]",41,883346,cbf400df1dc3e26f4f2e655ca47db7fb097b3531,43,7,6,782,,,0,"Deprecate ironic.peer_list

As part of the move to using Ironic shards, we document that the best
practice for scaling Ironic and Nova deployments is to shard Ironic
nodes between nova-compute processes, rather than attempting to
user the peer_list.

Currently, we only allow users to do this using conductor groups.
This works well for those wanting a conductor group per L2 network
domain. But in general, conductor groups per nova-compute are
a very poor trade off in terms of ironic deployment complexity.
Futher patches will look to enable the use of ironic shards,
alongside conductor groups, to more easily shard your ironic nodes
between nova-compute processes.

To avoid confusion, we rename the partition_key configuration
value to conductor_group.

blueprint ironic-shards

Change-Id: Ia2e23a59dbd2f13c6f74ca975c249751bebf54b2
",git fetch https://review.opendev.org/openstack/nova refs/changes/46/883346/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/virt/ironic/driver.py', 'doc/source/admin/configuration/hypervisor-ironic.rst', 'nova/conf/ironic.py']",3,9f9d25e4534a0fccc1435be70823fde47fc22270,ironic-shards," 'conductor_group', deprecated_name='partition_key', deprecated_for_removal=True, deprecated_since='28.0.0', deprecated_reason=""""""\ We do not recomend using nova-compute ha, please use passive failover of a single nova-compute service instead."""""", 'this host) with this conductor_group config value. ' 'Nodes matching the conductor_group value will be distributed ' 'If conductor_group is unset, this option is ignored.'),"," 'partition_key', 'this host) with this partition_key config value. ' 'Nodes matching the partition_key value will be distributed ' 'If partition_key is unset, this option is ignored.'),",39,14
openstack%2Fneutron~893374,openstack/neutron,stable/wallaby,I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""",MERGED,2023-08-31 13:56:31.000000000,2023-08-31 19:07:29.000000000,2023-08-31 19:06:02.000000000,"[{'_account_id': 1131}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 13:56:31.000000000', 'files': ['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/03f3b8ded732932182b5b03e9602baad8e2e57b7', 'message': '[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""\n\nThe functional test ""TestMaintenance.test_port_forwarding"" is checking\nthe ""registry.publish"" call after calling\n""delete_floatingip_port_forwarding"". This patch makes this check\nexplicit for the expected call.\n\nCloses-Bug: #2033387\nChange-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0\n(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)\n(cherry picked from commit 4acbf7a15cf13257b5f5916024aca45d70963ae7)\nConflicts:\n\tneutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py\n'}]",0,893374,03f3b8ded732932182b5b03e9602baad8e2e57b7,8,3,1,13861,,,0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""

The functional test ""TestMaintenance.test_port_forwarding"" is checking
the ""registry.publish"" call after calling
""delete_floatingip_port_forwarding"". This patch makes this check
explicit for the expected call.

Closes-Bug: #2033387
Change-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0
(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)
(cherry picked from commit 4acbf7a15cf13257b5f5916024aca45d70963ae7)
Conflicts:
	neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py
",git fetch https://review.opendev.org/openstack/neutron refs/changes/74/893374/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'],1,03f3b8ded732932182b5b03e9602baad8e2e57b7,bug/2033387," call = mock.call('port_forwarding', 'after_delete', self.pf_plugin, payload=mock.ANY) m_notify.assert_has_calls([call])", m_notify.assert_called_once(),3,1
openstack%2Fneutron~892896,openstack/neutron,stable/2023.1,I5f11b568bab4518617409b7c3a02c7222df80a92,[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN,MERGED,2023-08-28 10:00:21.000000000,2023-08-31 19:07:29.000000000,2023-08-31 19:05:58.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 10:00:21.000000000', 'files': ['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/4f707101d965e41f4211ccf19a3bbdfcd04c9fe7', 'message': ""[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN\n\nCloses-Bug: #2032770\nChange-Id: I5f11b568bab4518617409b7c3a02c7222df80a92\n(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)\n""}]",1,892896,4f707101d965e41f4211ccf19a3bbdfcd04c9fe7,14,3,1,16688,,,0,"[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN

Closes-Bug: #2032770
Change-Id: I5f11b568bab4518617409b7c3a02c7222df80a92
(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/96/892896/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py']",2,4f707101d965e41f4211ccf19a3bbdfcd04c9fe7,bug/2032770,"from neutron_lib.api.definitions import uplink_status_propagation uplink_status_propagation.ALIAS,",,9,0
openstack%2Fnova~881457,openstack/nova,master,I8619d898f68250bf70a17b1e6b8b0c249245b43b,Add function to get all attachments in Cinder.API module,MERGED,2023-04-25 10:01:17.000000000,2023-08-31 19:06:30.000000000,2023-08-31 19:06:30.000000000,"[{'_account_id': 4393}, {'_account_id': 7166}, {'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 22348}, {'_account_id': 32238}, {'_account_id': 32761}]","[{'number': 1, 'created': '2023-04-25 10:01:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/ddeb07b661a2fccd0dfeab735acb6095fee32abd', 'message': 'WIP: Reproducer for dangling volumes\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 2, 'created': '2023-05-05 06:49:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c940765c853901cf0eab4cda8ec1cb759f2acf25', 'message': 'WIP: Reproducer for dangling volumes\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 3, 'created': '2023-05-10 07:38:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/18382a76696e65571bc36c37480bd4d6681a8a37', 'message': 'WIP: Reproducer for dangling volumes\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 4, 'created': '2023-05-12 07:14:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/08db45bfb65f2412c42c40864d1a097ae3b65829', 'message': 'WIP: Reproducer for dangling volumes\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 5, 'created': '2023-05-12 09:55:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/dba0986b14008ebd5291217c0739fff25736a9aa', 'message': 'WIP: Reproducer for dangling volumes\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 6, 'created': '2023-05-22 11:32:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/04bf44a49745842513441d3ca4d78af115c59543', 'message': 'WIP: Reproducer for dangling volumes\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 7, 'created': '2023-05-23 10:24:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/c1537859310e44d852d80c8258d00bec7077d5aa', 'message': 'WIP: Reproducer for dangling volumes\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 8, 'created': '2023-05-23 10:54:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/85558557deb458b3953229cd33a9b7d5a8f75f1f', 'message': 'WIP: Reproducer for dangling volumes\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 9, 'created': '2023-05-23 15:55:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/55ecd414ddda0137cf18ad4f4f526f158d5b06b9', 'message': 'WIP: Reproducer for dangling volumes\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 10, 'created': '2023-05-31 12:12:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6f0a147c3cf76023a7cd1a75eaeb7976d3550447', 'message': 'Reproducer for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 11, 'created': '2023-06-05 11:57:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/169e46313f56afd6b97f1be723b980b483750d48', 'message': 'Reproducer for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 12, 'created': '2023-06-05 15:53:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/55680f1d1e639603908322187a7f21da57d55957', 'message': 'Reproducer for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 13, 'created': '2023-06-06 14:12:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/96c5f4892a45d688ac88e4435c3d56e331d22708', 'message': 'Reproducer for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 14, 'created': '2023-06-06 17:18:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/428921533c79088e844e90aea7d6060027414dcb', 'message': 'Reproducer for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 15, 'created': '2023-06-07 06:08:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/fb2bb7eb2c5050be63746b0a697f16701f66574d', 'message': 'Reproducer for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 16, 'created': '2023-06-08 11:54:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/daa10025c5fdb8b5569f4e8429cca23ad503cd47', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 17, 'created': '2023-06-08 14:15:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/94db0e45c5f942549d85c6a8d6f3452072eb3a49', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 18, 'created': '2023-06-09 12:59:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/734e4aa00c4fe84b29725cb02999d0ab76964df4', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 19, 'created': '2023-06-11 16:19:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8b65200136171235b36c69a1a35c85a01df2b519', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 20, 'created': '2023-06-12 06:47:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/0b42cd54eac11f337ae2da18a3c179bd0616f404', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 21, 'created': '2023-06-12 07:38:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/316f9bc8fe0e51ee22899ccc1de6d6bbd8a59ace', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 22, 'created': '2023-06-12 11:12:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/1f673e4879358b63d8ecaaa2bda529e037bb95bd', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 23, 'created': '2023-07-03 13:23:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6a7623aa57b689eaf15fbc2f731ecbf8d07f7fa1', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 24, 'created': '2023-07-03 14:29:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8f5c8008e2c93e4796609b9f7d605d841555554c', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 25, 'created': '2023-07-05 10:28:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/44d58e5d2a38995da4f95ba98ed4396cdfa741b2', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 26, 'created': '2023-07-05 10:41:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/480bba937b732fc93da63a6de0b63de59976c574', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 27, 'created': '2023-07-11 06:21:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/361c1ccc8a733be1c2b99a7918db219b93d454b9', 'message': 'Reproducer for dangling bdms\n\nAdded function to get all attachments by instance or volume id from Cinder in Cinder.API\nUpdated CinderFixture to stub get all attachments fucntionality\nAdded unit tests for git al attachments function\nUpdated existing tests case to use CinderFixture while rebooting\n\nAdded reproducer test for dangling bdms\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 28, 'created': '2023-07-12 13:21:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/81fdad229734f601a18bcd086a50d8b1c43de373', 'message': 'Reproducer for dangling bdms\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n- Updated existing test cases to use CinderFixture while rebooting\n- Added reproducer test for dangling BDMs\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 29, 'created': '2023-07-12 14:20:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/b20339369096657633c62e1222d063e0a5760a8f', 'message': 'Reproducer for dangling bdms\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n- Updated existing test cases to use CinderFixture while rebooting\n- Added reproducer test for dangling BDMs\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 30, 'created': '2023-07-20 08:09:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/9c6138635107f3ba32e4d3da94738e38985d5fe9', 'message': 'Reproducer for dangling bdms\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n- Updated existing test cases to use CinderFixture while rebooting\n- Added reproducer test for dangling BDMs\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 31, 'created': '2023-07-28 11:20:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/30b055501271f7dd1f92195e80a5d23d13d2bdc2', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n- Updated existing test cases to use CinderFixture while rebooting\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 32, 'created': '2023-07-28 11:24:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/337e0435048fb50685da25a2e39f7e6f5553653d', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n- Updated existing test cases to use CinderFixture while rebooting\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 33, 'created': '2023-07-28 11:54:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/13ff219821672746e5a805245361da8f78986068', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 34, 'created': '2023-08-25 16:46:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/00df387a99717f3eb148cddb62ddd009f51b5d03', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n\nUnrelated to patch, fixed pep8 in\n  nova/tests/unit/api/openstack/compute/test_server_topology.py\n  nova/compute/manager.py\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}, {'number': 35, 'created': '2023-08-25 17:03:12.000000000', 'files': ['nova/tests/unit/volume/test_cinder.py', 'nova/volume/cinder.py', 'nova/tests/fixtures/cinder.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/32ed205794e0676f9555b084b9774ab08a7d96ce', 'message': 'Add function to get all attachments in Cinder.API module\n\n- Added function to get all attachments by instance or volume id from Cinder in Cinder.API\n- Updated CinderFixture to add mock get_all_attachment functionality.\n- Added unit tests get_all_attachments.\n\nRelated-Bug: 2019078\n\nChange-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b\n'}]",87,881457,32ed205794e0676f9555b084b9774ab08a7d96ce,164,7,35,34860,,,0,"Add function to get all attachments in Cinder.API module

- Added function to get all attachments by instance or volume id from Cinder in Cinder.API
- Updated CinderFixture to add mock get_all_attachment functionality.
- Added unit tests get_all_attachments.

Related-Bug: 2019078

Change-Id: I8619d898f68250bf70a17b1e6b8b0c249245b43b
",git fetch https://review.opendev.org/openstack/nova refs/changes/57/881457/1 && git format-patch -1 --stdout FETCH_HEAD,['nova/tests/functional/compute/test_attached_volumes.py'],1,ddeb07b661a2fccd0dfeab735acb6095fee32abd,dangling-volumes,"# Copyright 2023, Red Hat, Inc. All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. from nova.tests.functional import integrated_helpers # from nova.tests import fixtures as nova_fixtures # from unittest import mock # from nova.tests.functional.api import client # from oslo_concurrency import processutils class TestAttachedVolumes(integrated_helpers._IntegratedTestBase): microversion = 'latest' def setUp(self): super(TestAttachedVolumes, self).setUp() # self.useFixture(nova_fixtures.CinderFixture(self)) self.admin_api = self.api_fixture.admin_api def _get_server_with_attached_volume(self, volume_id): # create a server server = self._create_server(networks='none') # attach volume to server self.api.post_server_volume( server['id'], {'volumeAttachment': {'volumeId': volume_id}}) self._wait_for_volume_attach(server['id'], volume_id) return self._wait_for_state_change(server, expected_status='ACTIVE') # @mock.patch('nova.privsep.fs.blockdev_size', # side_effect=processutils.ProcessExecutionError( # stderr=('blockdev: cannot open /dev/foo: ' # 'No such device or address'))) def test_delete_volumeattachment_by_cinder(self): # create a server volume_id = self.cinder.IMAGE_BACKED_VOL server = self._get_server_with_attached_volume(volume_id) volumes = self.cinder.attachment_ids_for_instance(server['id']) self.assertEqual(1, len(volumes)) # delete volume attachment id from cider side using cinder client del self.cinder.volume_to_attachment[volume_id] # verification from cinder side volumes = self.cinder.attachment_ids_for_instance(server['id']) self.assertEqual(0, len(volumes)) # verification from nova side # do something to refresh server object self.assertEqual( 1, len(server['os-extended-volumes:volumes_attached'])) # verify nova bdm db if volume is listed as attached for server # TODO(auniyal): verify from DB # or test by reboot, so reboot should have made this vm to error # didn't happend, need to mock it!! # self.assertRaises(Exception, self._reboot_server(server, hard=True)) ",,73,0
openstack%2Fzaqar-specs~778842,openstack/zaqar-specs,master,I300ec5342988cae134e9d1d472684715ee7e9317,Add spec folder for Xena,NEW,2021-03-05 06:17:14.000000000,2023-08-31 18:48:49.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-03-05 06:17:14.000000000', 'files': ['specs/index.rst', 'specs/xena/index.rst', 'specs/xena/support-extra-specs-to-subscription-confirming.rst'], 'web_link': 'https://opendev.org/openstack/zaqar-specs/commit/bf3ce72f9a29b9c29a7ad4ba7e761eda51c0c056', 'message': 'Add spec folder for Xena\n\nChange-Id: I300ec5342988cae134e9d1d472684715ee7e9317\n'}]",1,778842,bf3ce72f9a29b9c29a7ad4ba7e761eda51c0c056,3,2,1,31412,,,0,"Add spec folder for Xena

Change-Id: I300ec5342988cae134e9d1d472684715ee7e9317
",git fetch https://review.opendev.org/openstack/zaqar-specs refs/changes/42/778842/1 && git format-patch -1 --stdout FETCH_HEAD,"['specs/index.rst', 'specs/xena/index.rst', 'specs/xena/support-extra-specs-to-subscription-confirming.rst']",3,bf3ce72f9a29b9c29a7ad4ba7e761eda51c0c056,create_xena_directory,".. This template should be in ReSTructured text. The filename in the git repository should match the launchpad URL, for example a URL of https://blueprints.launchpad.net/zaqar/+spec/awesome-thing should be named awesome-thing.rst. Please do not delete any of the sections in this template. If you have nothing to say for a whole section, just write: None For help with syntax, see http://sphinx-doc.org/rest.html To test out your formatting, see http://www.tele3.cz/jbar/rest/rest.html ============================================== Support Extra Specs to Subscription-confirming ============================================== https://blueprints.launchpad.net/zaqar/+spec/support-extra-specs-to-subscription-confirming This requirement came from a true scenariowhen people use the subscription function of Zaqar, for example, text messages, they need to return some extra information like message authentication code in confirming process. Now Zaqar still cant support it, that will impact the usage of subscription. Problem description =================== Currently, Zaqar can't support extra information in subscription confirming process. This will block user to input information that is needed when subcription is confirming. There is a true case that came from Zaqar's user. They want to input the message authentication code into Zaqar when the subscription is confirming, the code will be used to identify the subscriber. So Zaqar should support this kind of mechanism. Proposed change =============== 1. Introduce a key-value called ""extra_spec"" in confirming request body. 2. Introduce a driver mechanism to let vendors to implement what they want to do with extra_spec information. API Impact ----------- Subscription confirming request: .. code-block:: PUT: /v2/subscriptions/subscription_id/confirm RESPONSE CODE: 204 REQUEST BODY: { ""confirmed"": true, ""extra_spec"": {""message_authentication_code"": ""xxxxxx""} } Drawbacks --------- None Alternatives ------------ None Implementation ============== Assignee(s) ----------- Primary assignee: wanghao <sxmatch1986@gmail.com> Secondary assignee: None Milestones ---------- Target Milestone for completion: wallaby M-2 Work Items ---------- #. Modify api and transport code. #. Add driver mechanism to handler the extra spec. #. Add release note for this feature. #. Update API reference. #. Change unit, functional and tempest tests accordingly. #. Add client support. Dependencies ============ None References ========== None ",,115,0
openstack%2Fmanila~787862,openstack/manila,master,I9380599a6ee3f32f1a7a779b9ba5757a422604b2,Dropping lower constraints testing,NEW,2021-04-25 02:57:14.000000000,2023-08-31 18:46:04.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-04-25 02:57:14.000000000', 'files': ['lower-constraints.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/manila/commit/7c3e4b84a93c3d75042aa916c6437972d8875bac', 'message': 'Dropping lower constraints testing\n\nWe facing errors related to the new pip resolver, this\ntopic was discussed on the ML and QA team proposed to\nto test lower-constraints [1].\n\nI propose to drop this test because the complexity and recurring pain needed\nto maintain that now exceeds the benefits provided by this mechanismes.\n\n[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-December/019390.html\n\nChange-Id: I9380599a6ee3f32f1a7a779b9ba5757a422604b2\n'}]",1,787862,7c3e4b84a93c3d75042aa916c6437972d8875bac,6,2,1,31412,,,0,"Dropping lower constraints testing

We facing errors related to the new pip resolver, this
topic was discussed on the ML and QA team proposed to
to test lower-constraints [1].

I propose to drop this test because the complexity and recurring pain needed
to maintain that now exceeds the benefits provided by this mechanismes.

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-December/019390.html

Change-Id: I9380599a6ee3f32f1a7a779b9ba5757a422604b2
",git fetch https://review.opendev.org/openstack/manila refs/changes/62/787862/1 && git format-patch -1 --stdout FETCH_HEAD,"['lower-constraints.txt', 'tox.ini']",2,7c3e4b84a93c3d75042aa916c6437972d8875bac,,, [testenv:lower-constraints] deps = -c{toxinidir}/lower-constraints.txt -r{toxinidir}/test-requirements.txt -r{toxinidir}/requirements.txt,0,141
openstack%2Fironic~893424,openstack/ironic,master,I30b404df293d91981e59356df3944ee0ee331d17,DNM: Testing against newer alembic,ABANDONED,2023-08-31 18:01:15.000000000,2023-08-31 18:44:33.000000000,,[],"[{'number': 1, 'created': '2023-08-31 18:01:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/0d806c5d7bbabaf282e83008626d4c53b0c5a21d', 'message': 'DNM: Testing against newer alembic\n\nI think the change that required nova to do\nhttps://review.opendev.org/c/openstack/nova/+/883344 may impact us, too.\n\nChange-Id: I30b404df293d91981e59356df3944ee0ee331d17\n'}, {'number': 2, 'created': '2023-08-31 18:28:03.000000000', 'files': ['requirements.txt', 'tox.ini'], 'web_link': 'https://opendev.org/openstack/ironic/commit/413d8fa89e73798990fbefc52b83dc3c67a7395c', 'message': 'DNM: Testing against newer alembic\n\nI think the change that required nova to do\nhttps://review.opendev.org/c/openstack/nova/+/883344 may impact us, too.\n\nChange-Id: I30b404df293d91981e59356df3944ee0ee331d17\n'}]",0,893424,413d8fa89e73798990fbefc52b83dc3c67a7395c,4,0,2,10342,,,0,"DNM: Testing against newer alembic

I think the change that required nova to do
https://review.opendev.org/c/openstack/nova/+/883344 may impact us, too.

Change-Id: I30b404df293d91981e59356df3944ee0ee331d17
",git fetch https://review.opendev.org/openstack/ironic refs/changes/24/893424/1 && git format-patch -1 --stdout FETCH_HEAD,['requirements.txt'],1,0d806c5d7bbabaf282e83008626d4c53b0c5a21d,,alembic>=1.12.0 # MIT,alembic>=1.4.2 # MIT,1,1
openstack%2Fmistral-tempest-plugin~822470,openstack/mistral-tempest-plugin,master,I9ceecaa9acfb246cc1660fbc2631819f1a5d3568,Update python testing classifier,NEW,2021-12-21 10:33:24.000000000,2023-08-31 18:43:33.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-12-21 10:33:24.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/mistral-tempest-plugin/commit/e769077689fe143cbcd1d0b70bb82b0a0f4837eb', 'message': 'Update python testing classifier\n\nWe facing errors related to the new pip resolver, this\ntopic was discussed on the ML and QA team proposed to\nto test lower-constraints [1].\n\nI propose to drop this test because the complexity and recurring pain needed\nto maintain that now exceeds the benefits provided by this mechanismes.\n\n[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-December/019390.html\n\nChange-Id: I9ceecaa9acfb246cc1660fbc2631819f1a5d3568\n'}]",3,822470,e769077689fe143cbcd1d0b70bb82b0a0f4837eb,3,2,1,31412,,,0,"Update python testing classifier

We facing errors related to the new pip resolver, this
topic was discussed on the ML and QA team proposed to
to test lower-constraints [1].

I propose to drop this test because the complexity and recurring pain needed
to maintain that now exceeds the benefits provided by this mechanismes.

[1] http://lists.openstack.org/pipermail/openstack-discuss/2020-December/019390.html

Change-Id: I9ceecaa9acfb246cc1660fbc2631819f1a5d3568
",git fetch https://review.opendev.org/openstack/mistral-tempest-plugin refs/changes/70/822470/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,e769077689fe143cbcd1d0b70bb82b0a0f4837eb,, Programming Language :: Python :: 3.9,,1,0
openstack%2Fmistral-lib~822464,openstack/mistral-lib,master,I48b934c79f313a1c5186b63a809780e39b069ffc,Update python testing classifier,NEW,2021-12-21 10:24:06.000000000,2023-08-31 18:42:18.000000000,,"[{'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 32102}]","[{'number': 1, 'created': '2021-12-21 10:24:06.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/mistral-lib/commit/fbc800df14bf01dc66a10262a120d0506eccb589', 'message': 'Update python testing classifier\n\nYoga testing runtime[1] has been updated to add py39\ntesting as voting. Unit tests update are handled by the\njob template change in openstack-zuul-job\n\n- https://review.opendev.org/c/openstack/openstack-zuul-jobs/+/820286\n\nthis commit updates the classifier in setup.cfg file.\n\n[1] https://governance.openstack.org/tc/reference/runtimes/yoga.html\n\nChange-Id: I48b934c79f313a1c5186b63a809780e39b069ffc\n'}]",3,822464,fbc800df14bf01dc66a10262a120d0506eccb589,5,3,1,31412,,,0,"Update python testing classifier

Yoga testing runtime[1] has been updated to add py39
testing as voting. Unit tests update are handled by the
job template change in openstack-zuul-job

- https://review.opendev.org/c/openstack/openstack-zuul-jobs/+/820286

this commit updates the classifier in setup.cfg file.

[1] https://governance.openstack.org/tc/reference/runtimes/yoga.html

Change-Id: I48b934c79f313a1c5186b63a809780e39b069ffc
",git fetch https://review.opendev.org/openstack/mistral-lib refs/changes/64/822464/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,fbc800df14bf01dc66a10262a120d0506eccb589,, Programming Language :: Python :: 3.9,,1,0
openstack%2Fironic~887996,openstack/ironic,master,Ia4113124b415bd647e3c984e587828eb5b612eee,Fully monkey patch eventlet for consistent behavior,MERGED,2023-07-07 20:02:59.000000000,2023-08-31 18:30:56.000000000,2023-08-31 18:28:54.000000000,"[{'_account_id': 4571}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-07-07 20:02:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/3a5e9598dfa5ba988617904d819a976a9b20f4c6', 'message': ""Limit to eventlet 0.30.1 and newer\n\nThis is taken from the nova requirements.txt, under a hunch that we are\nseeing unit test and standalone job failures because we're getting\ndifferent/worse eventlet than if we are coinstalled with nova.\n\nChange-Id: Ia4113124b415bd647e3c984e587828eb5b612eee\n""}, {'number': 2, 'created': '2023-07-07 21:05:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/b3cd648e501d8a73a3490a64b33779bdc86afed4', 'message': 'DNM: Eventlet science\n\nChange-Id: Ia4113124b415bd647e3c984e587828eb5b612eee\n'}, {'number': 3, 'created': '2023-07-10 17:22:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/c255a7789fce4919c2263cbacbc89ccb8bff23ac', 'message': 'DNM: Eventlet science\n\nChange-Id: Ia4113124b415bd647e3c984e587828eb5b612eee\n'}, {'number': 4, 'created': '2023-07-11 09:14:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/811500fdd60a88fe27018293825115f7af496848', 'message': 'DNM: Eventlet science\n\nChange-Id: Ia4113124b415bd647e3c984e587828eb5b612eee\n'}, {'number': 5, 'created': '2023-07-13 13:50:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/5755147b247d1f009288680fd78099ad846b2ca5', 'message': 'DNM: Eventlet science\n\nChange-Id: Ia4113124b415bd647e3c984e587828eb5b612eee\n'}, {'number': 6, 'created': '2023-08-30 20:08:54.000000000', 'files': ['ironic/cmd/__init__.py', 'ironic/tests/unit/__init__.py', 'requirements.txt'], 'web_link': 'https://opendev.org/openstack/ironic/commit/69bdbfb6e97e53998d5a30c60f621131d899d47e', 'message': 'Fully monkey patch eventlet for consistent behavior\n\nEventlet expects to have green versions of every module loaded, including OS. The reasons we originally did not patch os are lost\nto time, but there have been many releases of eventlet since, and we should return to a reasonable baseline.\n\nChange-Id: Ia4113124b415bd647e3c984e587828eb5b612eee\n'}]",2,887996,69bdbfb6e97e53998d5a30c60f621131d899d47e,32,3,6,10342,,,0,"Fully monkey patch eventlet for consistent behavior

Eventlet expects to have green versions of every module loaded, including OS. The reasons we originally did not patch os are lost
to time, but there have been many releases of eventlet since, and we should return to a reasonable baseline.

Change-Id: Ia4113124b415bd647e3c984e587828eb5b612eee
",git fetch https://review.opendev.org/openstack/ironic refs/changes/96/887996/1 && git format-patch -1 --stdout FETCH_HEAD,['requirements.txt'],1,3a5e9598dfa5ba988617904d819a976a9b20f4c6,,eventlet>=0.30.1 # MIT,"eventlet!=0.18.3,!=0.20.1,>=0.18.2 # MIT",1,1
openstack%2Fglance_store~799105,openstack/glance_store,master,Id4466e29b4de6c7add445be455a430fa0e706838,Honor cinder_catalog_info for Cinder service user,NEW,2021-07-01 16:44:32.000000000,2023-08-31 18:03:03.000000000,,"[{'_account_id': 4393}, {'_account_id': 22348}]","[{'number': 1, 'created': '2021-07-01 16:44:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance_store/commit/efeadf18dadb1b4e515ab8999ed0a5eedc67edef', 'message': ""Honor cinder_catalog_info for cinder service user\n\ncurrently the service user is always using the public endpoint and 'volumev3'\nservice type when accessing Cinder (defaults in cinderclient.v3)\nwhich are not optimal for some deployments.\n\nThis patch makes the service user honor the interface and service type\nset in the cinder_catalog_info config option.\n\nChange-Id: Id4466e29b4de6c7add445be455a430fa0e706838\nRelated-Bug: #1930299\n""}, {'number': 2, 'created': '2022-05-13 14:29:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance_store/commit/3d69da251e821cf9f5e67ba9a9d5015877afd448', 'message': ""Honor cinder_catalog_info for Cinder service user\n\ncurrently the Cinder service user is always using the public endpoint\n(and 'volumev3' service type) when accessing Cinder\n(per defaults in cinderclient.v3) which are not optimal for some deployments.\n\nThis patch makes the Cinder service user to actually honor\nthe interface and service type set in the cinder_catalog_info config option.\n\nChange-Id: Id4466e29b4de6c7add445be455a430fa0e706838\nRelated-Bug: #1930299\n""}, {'number': 3, 'created': '2023-08-31 15:24:13.000000000', 'files': ['glance_store/tests/unit/cinder/test_multistore_cinder.py', 'glance_store/_drivers/cinder/store.py', 'glance_store/tests/unit/cinder/test_cinder_store.py', 'glance_store/tests/unit/cinder/test_cinder_base.py'], 'web_link': 'https://opendev.org/openstack/glance_store/commit/0769ad7af3a3999be6f807fd18c0bd84c7f0321a', 'message': ""Honor cinder_catalog_info for Cinder service user\n\ncurrently the Cinder service user is always using the public endpoint\n(and 'volumev3' service type) when accessing Cinder\n(per defaults in cinderclient.v3) which are not optimal for some deployments.\n\nThis patch makes the Cinder service user to actually honor\nthe interface and service type set in the cinder_catalog_info config option.\n\nChange-Id: Id4466e29b4de6c7add445be455a430fa0e706838\nRelated-Bug: #1930299\n""}]",11,799105,0769ad7af3a3999be6f807fd18c0bd84c7f0321a,11,2,3,9542,,,0,"Honor cinder_catalog_info for Cinder service user

currently the Cinder service user is always using the public endpoint
(and 'volumev3' service type) when accessing Cinder
(per defaults in cinderclient.v3) which are not optimal for some deployments.

This patch makes the Cinder service user to actually honor
the interface and service type set in the cinder_catalog_info config option.

Change-Id: Id4466e29b4de6c7add445be455a430fa0e706838
Related-Bug: #1930299
",git fetch https://review.opendev.org/openstack/glance_store refs/changes/05/799105/1 && git format-patch -1 --stdout FETCH_HEAD,['glance_store/_drivers/cinder.py'],1,efeadf18dadb1b4e515ab8999ed0a5eedc67edef,cinder-iface," info = self.store_conf.cinder_catalog_info service_type, service_name, interface = info.split(':') endpoint_type=interface, service_type=service_type,"," info = self.store_conf.cinder_catalog_info service_type, service_name, interface = info.split(':')",3,2
openstack%2Foctavia~860221,openstack/octavia,master,Ia8c35071f54e6988d9b2ff682a529bd477b93b74,Add octavia-grenade-slurp CI job,MERGED,2022-10-04 08:57:18.000000000,2023-08-31 17:26:39.000000000,2023-08-31 17:24:04.000000000,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 29244}, {'_account_id': 31664}, {'_account_id': 32761}, {'_account_id': 34429}]","[{'number': 1, 'created': '2022-10-04 08:57:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/3a89c55c751339670825fa18b3649d287c7cd7b8', 'message': 'Add grenade-skip-level CI job\n\nAdded new job according to [1] to test the new tick-tock upgrade\nstrategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 2, 'created': '2022-10-04 08:58:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/15f992a450edc308e1a0db447dfff5a89206ef99', 'message': 'Add octavia-grenade-tick-tock CI job\n\nAdded new job according to [1] to test the new tick-tock upgrade\nstrategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 3, 'created': '2023-02-08 10:51:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/1bdf7e3dbca71f0111fc6fb1a16404e0e8983734', 'message': 'Add octavia-grenade-tick-tock CI job\n\nAdded new job according to [1] to test the new tick-tock upgrade\nstrategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 4, 'created': '2023-02-08 11:06:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/1462a7ce8d3803fbb16b6f6ff657e9f2231d06e2', 'message': 'Add octavia-grenade-tick-tock CI job\n\nAdded new job according to [1] to test the new tick-tock upgrade\nstrategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 5, 'created': '2023-02-08 16:35:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/9523c30afc305e3cc72aec3e0095f447dc39f53d', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 6, 'created': '2023-02-10 08:10:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/58e30483cefdb3110c3887b1e0cfe8fec314a5c3', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 7, 'created': '2023-03-28 13:32:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/f5f8011a21fa05730da7a5fa343ee254ed316e8e', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\nBecause Bobcat/2023.2 will not be a SLURP release the master branch\nstays excluded in this release cycle.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 8, 'created': '2023-03-28 13:36:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/6ad6f374c9bbd4e7fad8986ab06bad053578b936', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\nBecause Bobcat/2023.2 will not be a SLURP release the master branch\nstays excluded in this release cycle.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 9, 'created': '2023-03-29 10:09:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/f12aa4c771eb3f150c8f9cd0395cecd67287d956', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 10, 'created': '2023-03-29 10:23:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/1e965d99c45461bd43b5430bef336f112a33095a', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 11, 'created': '2023-03-29 10:27:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia/commit/65b88e844536c56e88069012e70d5bd3dea7cd3e', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}, {'number': 12, 'created': '2023-03-29 12:00:36.000000000', 'files': ['zuul.d/projects.yaml', 'zuul.d/jobs.yaml'], 'web_link': 'https://opendev.org/openstack/octavia/commit/5eb234b827fc630cbb19c432513601d3971cff34', 'message': 'Add octavia-grenade-slurp CI job\n\nAdded new job according to [1] to test the new SLURP (a.k.a tick-tock)\nupgrade strategy.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html\n\nChange-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74\n'}]",13,860221,5eb234b827fc630cbb19c432513601d3971cff34,37,6,12,34429,,,0,"Add octavia-grenade-slurp CI job

Added new job according to [1] to test the new SLURP (a.k.a tick-tock)
upgrade strategy.

[1] https://lists.openstack.org/pipermail/openstack-discuss/2022-September/030654.html

Change-Id: Ia8c35071f54e6988d9b2ff682a529bd477b93b74
",git fetch https://review.opendev.org/openstack/octavia refs/changes/21/860221/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/jobs.yaml'],1,3a89c55c751339670825fa18b3649d287c7cd7b8,grenade-skiplevel," name: octavia-grenade-tick-tock # See comments in job definition in # https://review.opendev.org/c/openstack/manila/+/859875/1/zuul.d/grenade-jobs.yaml description: | Grenade job that skips a release, validating that deployers can skip specific releases as prescribed by our process. parent: octavia-grenade branches: ^(?!stable/(pike|queens|rocky|stein|train|ussuri|victoria|wallaby|xena|zed)).*$ vars: grenade_from_branch: stable/yoga grenade_localrc: NOVA_ENABLE_UPGRADE_WORKAROUND: True - job:",,14,0
openstack%2Fos-client-config~874366,openstack/os-client-config,master,I6f3694640727d5d60bb50c34b2d2038eb978fda4,Remove ceilometerclient,MERGED,2023-02-20 03:08:59.000000000,2023-08-31 17:21:09.000000000,2023-08-31 17:18:57.000000000,"[{'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-02-20 03:08:59.000000000', 'files': ['os_client_config/constructors.json'], 'web_link': 'https://opendev.org/openstack/os-client-config/commit/1971cbdc72aa497ef5281c529021704025094942', 'message': 'Remove ceilometerclient\n\n... because ceilometerclient was retired a long ago.\n\nChange-Id: I6f3694640727d5d60bb50c34b2d2038eb978fda4\n'}]",1,874366,1971cbdc72aa497ef5281c529021704025094942,9,2,1,9816,,,0,"Remove ceilometerclient

... because ceilometerclient was retired a long ago.

Change-Id: I6f3694640727d5d60bb50c34b2d2038eb978fda4
",git fetch https://review.opendev.org/openstack/os-client-config refs/changes/66/874366/1 && git format-patch -1 --stdout FETCH_HEAD,['os_client_config/constructors.json'],1,1971cbdc72aa497ef5281c529021704025094942,,," ""metering"": ""ceilometerclient.client.Client"",",0,1
openstack%2Fos-client-config~893132,openstack/os-client-config,master,I429d4a01b0fa782d6a65d180d57c49e842f199ff,"replace ""-"" with ""_"" in setup.cfg",MERGED,2023-08-30 07:16:32.000000000,2023-08-31 17:20:09.000000000,2023-08-31 17:18:56.000000000,"[{'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-08-30 07:16:32.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/os-client-config/commit/f81a146e3be1f2c8056b90ff122a465c51d006e9', 'message': 'replace ""-"" with ""_"" in setup.cfg\n\nTime is ticking and a deadline is approaching fast for ""-"" in setup.cfg\nto stop working.\n\nChange-Id: I429d4a01b0fa782d6a65d180d57c49e842f199ff\n'}]",1,893132,f81a146e3be1f2c8056b90ff122a465c51d006e9,8,3,1,27900,,,0,"replace ""-"" with ""_"" in setup.cfg

Time is ticking and a deadline is approaching fast for ""-"" in setup.cfg
to stop working.

Change-Id: I429d4a01b0fa782d6a65d180d57c49e842f199ff
",git fetch https://review.opendev.org/openstack/os-client-config refs/changes/32/893132/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,f81a146e3be1f2c8056b90ff122a465c51d006e9,,description_file =author_email = openstack-discuss@lists.openstack.org home_page = https://docs.openstack.org/os-client-config/latest python_requires = >=3.5,description-file =author-email = openstack-discuss@lists.openstack.org home-page = https://docs.openstack.org/os-client-config/latest python-requires = >=3.5,4,4
openstack%2Fkolla~893364,openstack/kolla,stable/xena,I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2,Pin iptables to 1.8.4 in Centos Stream 8,MERGED,2023-08-31 12:46:45.000000000,2023-08-31 17:08:41.000000000,2023-08-31 17:01:08.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-08-31 12:46:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/cd8f9c36788a7907c070b1e0065aa9b5d3342487', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nChange-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2\n'}, {'number': 2, 'created': '2023-08-31 14:00:37.000000000', 'files': ['docker/neutron/neutron-base/Dockerfile.j2'], 'web_link': 'https://opendev.org/openstack/kolla/commit/8f076857fde79477432c1377559a452c265297ce', 'message': 'Pin iptables to 1.8.4 in Centos Stream 8\n\nBug in Centos Stream 8:\n[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501\n\nChange-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2\n'}]",1,893364,8f076857fde79477432c1377559a452c265297ce,10,2,2,23084,,,0,"Pin iptables to 1.8.4 in Centos Stream 8

Bug in Centos Stream 8:
[1] https://bugzilla.redhat.com/show_bug.cgi?id=2236501

Change-Id: I87c5c3792c400f9bc90d00ebc5fc858f3a2b02e2
",git fetch https://review.opendev.org/openstack/kolla refs/changes/64/893364/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/neutron/neutron-base/Dockerfile.j2'],1,cd8f9c36788a7907c070b1e0065aa9b5d3342487,," 'iptables-1.8.4*',"," 'iptables',",1,1
openstack%2Felection~893299,openstack/election,master,I9e0b1522a4f398ddabdf75013ca68a7f509ba017,Update governance tag 0.15.0 to configuration,MERGED,2023-08-31 01:00:37.000000000,2023-08-31 17:01:10.000000000,2023-08-31 16:59:53.000000000,"[{'_account_id': 8556}, {'_account_id': 12898}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 01:00:37.000000000', 'files': ['configuration.yaml'], 'web_link': 'https://opendev.org/openstack/election/commit/1faa45491a8fe8d50cadd7f7b83fd4dbffb14fa9', 'message': 'Update governance tag 0.15.0 to configuration\n\nDepends-On: Ia9bb663777b6f07abc4d18e7ee26adf728f767c5\nChange-Id: I9e0b1522a4f398ddabdf75013ca68a7f509ba017\n'}]",1,893299,1faa45491a8fe8d50cadd7f7b83fd4dbffb14fa9,8,3,1,14482,,,0,"Update governance tag 0.15.0 to configuration

Depends-On: Ia9bb663777b6f07abc4d18e7ee26adf728f767c5
Change-Id: I9e0b1522a4f398ddabdf75013ca68a7f509ba017
",git fetch https://review.opendev.org/openstack/election refs/changes/99/893299/1 && git format-patch -1 --stdout FETCH_HEAD,['configuration.yaml'],1,1faa45491a8fe8d50cadd7f7b83fd4dbffb14fa9,tag-sept-2023,tag: 0.15.0,tag: to-be-released,1,1
openstack%2Fpython-openstackclient~893343,openstack/python-openstackclient,master,I4a442708a5b47f573cd2333545531499b9eae0f1,Propocol release versions properly,MERGED,2023-08-31 09:27:30.000000000,2023-08-31 16:47:11.000000000,2023-08-31 16:45:49.000000000,"[{'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-08-31 09:27:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/5d2f83f1350aca508800fef4e43e39df36121043', 'message': 'Propocol release versions properly\n\nOn the index page we stopped updating versions table since train. Add\nmissing entries.\n\nChange-Id: I4a442708a5b47f573cd2333545531499b9eae0f1\n'}, {'number': 2, 'created': '2023-08-31 09:39:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/2a010382a22490a7933fb2a0a16c548609ed87b0', 'message': 'Propocol release versions properly\n\nOn the index page we stopped updating versions table since train. Add\nmissing entries.\n\nAlso small rephrasement in the into on backwards compatibility not to\nstick with an ancient release name.\n\nChange-Id: I4a442708a5b47f573cd2333545531499b9eae0f1\n'}, {'number': 3, 'created': '2023-08-31 09:42:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/d9fb3a7b7166c3889f79a469baccb96f008d469d', 'message': 'Propocol release versions properly\n\nOn the index page we stopped updating versions table since train. Add\nmissing entries.\n\nAlso small rephrasement in the into on backwards compatibility not to\nstick with an ancient release name.\nSet oldest release on unreleased page correspndingly.\n\nChange-Id: I4a442708a5b47f573cd2333545531499b9eae0f1\n'}, {'number': 4, 'created': '2023-08-31 09:51:41.000000000', 'files': ['releasenotes/source/unreleased.rst', 'releasenotes/source/index.rst'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/c7c79c9fe42e45026f42c10068edad680bd0a3a7', 'message': 'Propocol release versions properly\n\nOn the index page we stopped updating versions table since train. Add\nmissing entries.\n\nAlso small rephrasement in the into on backwards compatibility not to\nstick with an ancient release name.\nSet oldest release on unreleased page correspondingly.\n\nChange-Id: I4a442708a5b47f573cd2333545531499b9eae0f1\n'}]",6,893343,c7c79c9fe42e45026f42c10068edad680bd0a3a7,13,3,4,27900,,,0,"Propocol release versions properly

On the index page we stopped updating versions table since train. Add
missing entries.

Also small rephrasement in the into on backwards compatibility not to
stick with an ancient release name.
Set oldest release on unreleased page correspondingly.

Change-Id: I4a442708a5b47f573cd2333545531499b9eae0f1
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/43/893343/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/source/index.rst'],1,5d2f83f1350aca508800fef4e43e39df36121043,,Antelope 6.1.0 Zed 6.0.0 Yoga 5.7.0 Xena 5.6.0 Wallaby 5.5.0 Victoria 5.3.0 Ussuri 5.0.0,,7,0
openstack%2Frequirements~879180,openstack/requirements,master,Id31b9613bf367ce2538c7d530413d7aa696857f6,"Revert ""Cap virtualenv (<20.18.0) to unblock gate""",ABANDONED,2023-04-02 09:55:54.000000000,2023-08-31 16:26:45.000000000,,"[{'_account_id': 7166}, {'_account_id': 11655}, {'_account_id': 11904}, {'_account_id': 13252}, {'_account_id': 14288}, {'_account_id': 16688}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-04-02 09:55:54.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/requirements/commit/2fac876afb95c7bd2be5562fcf9c01941df3a9c2', 'message': 'Revert ""Cap virtualenv (<20.18.0) to unblock gate""\n\nThis reverts commit 7c3cb297573b5dbec634e53829ec183ed7ba3068.\n\nReason for revert: We cannot pin virtualenv forever, let\'s see what needs to be done in order to fix this properly.\n\nChange-Id: Id31b9613bf367ce2538c7d530413d7aa696857f6\n'}]",1,879180,2fac876afb95c7bd2be5562fcf9c01941df3a9c2,6,9,1,13252,,,0,"Revert ""Cap virtualenv (<20.18.0) to unblock gate""

This reverts commit 7c3cb297573b5dbec634e53829ec183ed7ba3068.

Reason for revert: We cannot pin virtualenv forever, let's see what needs to be done in order to fix this properly.

Change-Id: Id31b9613bf367ce2538c7d530413d7aa696857f6
",git fetch https://review.opendev.org/openstack/requirements refs/changes/80/879180/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,2fac876afb95c7bd2be5562fcf9c01941df3a9c2,cap-virtualenv-setuptools,,# NOTE(elod.illes): with latest virtualenv (and setuptools bundled in # it) py3*-check-uc jobs started to fail as pkg_resources' __getattr__ # breaks on packages metadata requires = virtualenv<20.18,0,4
openstack%2Frequirements~881897,openstack/requirements,master,I8a784e446c730153ec2696ccdbd9502dde199168,Updated from generate-constraints,ABANDONED,2023-04-29 08:11:25.000000000,2023-08-31 16:26:03.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-04-29 08:11:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/f2dd2496f5c6711816ef9e2cb95e7a5270fac37c', 'message': 'Updated from generate-constraints\n\nChange-Id: I8a784e446c730153ec2696ccdbd9502dde199168\n'}, {'number': 2, 'created': '2023-05-06 08:22:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/3750e060e99994195b43add5cc461a294980ca37', 'message': 'Updated from generate-constraints\n\nChange-Id: I8a784e446c730153ec2696ccdbd9502dde199168\n'}, {'number': 3, 'created': '2023-05-13 08:15:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/d9ff69b019d436fbcf01b2ee13e802a4c6d864a1', 'message': 'Updated from generate-constraints\n\nChange-Id: I8a784e446c730153ec2696ccdbd9502dde199168\n'}, {'number': 4, 'created': '2023-05-20 08:40:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/3079edd511ff763d31b7b2e583c53fdfddfb32a1', 'message': 'Updated from generate-constraints\n\nChange-Id: I8a784e446c730153ec2696ccdbd9502dde199168\n'}, {'number': 5, 'created': '2023-05-21 11:12:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/19bbf4110974e7147708ac6862a55d96976794bb', 'message': ""Updated from generate-constraints\n\nheld back:\n\n    SQLA 2\n    alembic\n    olso.db\n\nCapped tooz for python_version=='3.8'\n\nChange-Id: I8a784e446c730153ec2696ccdbd9502dde199168\n""}, {'number': 6, 'created': '2023-05-21 17:21:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/requirements/commit/7db656e4a86a2f0ebbaa126d286b5e8c4b33f5d6', 'message': ""Updated from generate-constraints\n\nheld back:\n\n    SQLA 2\n    alembic\n    olso.db\n    castellan\n\nCapped tooz and pysaml2 for python_version=='3.8'\n\nChange-Id: I8a784e446c730153ec2696ccdbd9502dde199168\n""}, {'number': 7, 'created': '2023-05-23 05:02:51.000000000', 'files': ['global-requirements.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/43379c00cb20ce5765c06ae8eb9ebcad945a798c', 'message': ""Updated from generate-constraints\n\nheld back:\n\n    SQLA 2\n    alembic\n    olso.db\n    castellan\n    XStatic-Font-Awesome\n    Werkzeug\n\nCapped tooz and pysaml2 for python_version=='3.8'\n\nChange-Id: I8a784e446c730153ec2696ccdbd9502dde199168\n""}]",1,881897,43379c00cb20ce5765c06ae8eb9ebcad945a798c,16,1,7,11131,,,0,"Updated from generate-constraints

held back:

    SQLA 2
    alembic
    olso.db
    castellan
    XStatic-Font-Awesome
    Werkzeug

Capped tooz and pysaml2 for python_version=='3.8'

Change-Id: I8a784e446c730153ec2696ccdbd9502dde199168
",git fetch https://review.opendev.org/openstack/requirements refs/changes/97/881897/1 && git format-patch -1 --stdout FETCH_HEAD,['upper-constraints.txt'],1,f2dd2496f5c6711816ef9e2cb95e7a5270fac37c,noclob,XStatic-Font-Awesome===6.2.1.1moto===4.1.8types-paramiko===3.0.0.8zeroconf===0.58.2SQLAlchemy===2.0.11pyasn1-lextudio===1.1.2pyspnego===0.9.0requests===2.29.0termcolor===2.3.0SQLAlchemy-Utils===0.41.1coverage===7.2.4platformdirs===3.5.0boto3===1.26.123pysmi-lextudio===1.1.13tooz===4.0.0pysaml2===7.4.1pysnmp-lextudio===5.0.27pyasn1-modules-lextudio===0.2.9numpy===1.24.3pysnmpcrypto===0.0.4dogpile.cache===1.2.0blinker===1.6.2botocore===1.29.123oslo.db===13.0.0Werkzeug===2.3.2diskimage-builder===3.30.0alembic===1.10.4Flask===2.3.1virtualenv===20.23.0,XStatic-Font-Awesome===4.7.0.0pysnmp-lextudio===5.0.26moto===4.1.7types-paramiko===3.0.0.7zeroconf===0.56.0SQLAlchemy===1.4.41pyspnego===0.8.0requests===2.28.2termcolor===2.2.0SQLAlchemy-Utils===0.41.0coverage===7.2.3platformdirs===3.2.0boto3===1.26.118tooz===3.2.0pysaml2===7.3.1numpy===1.24.2dogpile.cache===1.1.8botocore===1.29.118pyasn1-lextudio===1.1.2oslo.db===12.3.1Werkzeug===2.2.3pyasn1-modules-lextudio===0.2.9diskimage-builder===3.29.0alembic===1.9.4Flask===2.2.3virtualenv===20.22.0,29,26
openstack%2Frequirements~879230,openstack/requirements,master,Iff1489f1b0abe5d4b01f2137aa61b889f48454cb,DNM: run all jobs on virtualenv uncap,ABANDONED,2023-04-02 12:18:52.000000000,2023-08-31 16:22:13.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-04-02 12:18:52.000000000', 'files': ['bindep.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/e7b63c587ae81b0f35192cba8d03dd37b865f47d', 'message': 'DNM: run all jobs on virtualenv uncap\n\nChange-Id: Iff1489f1b0abe5d4b01f2137aa61b889f48454cb\n'}]",0,879230,e7b63c587ae81b0f35192cba8d03dd37b865f47d,4,1,1,13252,,,0,"DNM: run all jobs on virtualenv uncap

Change-Id: Iff1489f1b0abe5d4b01f2137aa61b889f48454cb
",git fetch https://review.opendev.org/openstack/requirements refs/changes/30/879230/1 && git format-patch -1 --stdout FETCH_HEAD,"['bindep.txt', 'upper-constraints.txt']",2,e7b63c587ae81b0f35192cba8d03dd37b865f47d,cap-virtualenv-setuptools,sphinxcontrib-applehelp===1.0.4 scikit-learn===1.2.2,sphinxcontrib-applehelp===1.0.2 scikit-learn===1.1.2 pytest-cov===4.0.0,3,3
openstack%2Frequirements~891223,openstack/requirements,master,I7cda2519d9039f93bde243e263709e9afb956c41,Drop ryu dependency,ABANDONED,2023-08-11 17:56:22.000000000,2023-08-31 16:18:52.000000000,,"[{'_account_id': 8313}, {'_account_id': 11904}, {'_account_id': 11975}, {'_account_id': 14288}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 32238}]","[{'number': 1, 'created': '2023-08-11 17:56:22.000000000', 'files': ['global-requirements.txt', 'upper-constraints.txt'], 'web_link': 'https://opendev.org/openstack/requirements/commit/73b3cd6e1e74b7868054d70d907f11f1120a6b1d', 'message': ""Drop ryu dependency\n\nNeutron hasn't used it in years [1], it's unmaintained [2] and it\ndoesn't work with recent version of setuptools due to its use of\ndeprecated easy_install args [3]. Drop it.\n\n[1] https://review.opendev.org/c/openstack/neutron/+/607008\n[2] https://github.com/faucetsdn/ryu#readme\n[3] https://github.com/faucetsdn/ryu/blob/d6cda4f4/ryu/hooks.py#L36\n\nChange-Id: I7cda2519d9039f93bde243e263709e9afb956c41\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",2,891223,73b3cd6e1e74b7868054d70d907f11f1120a6b1d,9,7,1,15334,,,0,"Drop ryu dependency

Neutron hasn't used it in years [1], it's unmaintained [2] and it
doesn't work with recent version of setuptools due to its use of
deprecated easy_install args [3]. Drop it.

[1] https://review.opendev.org/c/openstack/neutron/+/607008
[2] https://github.com/faucetsdn/ryu#readme
[3] https://github.com/faucetsdn/ryu/blob/d6cda4f4/ryu/hooks.py#L36

Change-Id: I7cda2519d9039f93bde243e263709e9afb956c41
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/requirements refs/changes/23/891223/1 && git format-patch -1 --stdout FETCH_HEAD,"['global-requirements.txt', 'upper-constraints.txt']",2,73b3cd6e1e74b7868054d70d907f11f1120a6b1d,drop-ryu,,ryu===4.34,0,2
openstack%2Fcinder~826036,openstack/cinder,master,Ib57090b484c2ca23b5e555c28ad843f6fec504e2,RBD: more safe revert-to-snapshot,NEW,2022-01-24 09:55:17.000000000,2023-08-31 16:17:12.000000000,,"[{'_account_id': 4523}, {'_account_id': 14200}, {'_account_id': 20813}, {'_account_id': 22348}, {'_account_id': 30615}, {'_account_id': 33473}]","[{'number': 1, 'created': '2022-01-24 09:55:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/1dacd099a03a55ea5c376d0d7b0ad2198e3500fe', 'message': 'Rbd: more safe revert-to-snapshot\n\nIn order to prevent cases when volume is actually used by the\nbackend added a check of number of watchers.\n\nCloses-Bug: 1958845\nChange-Id: Ib57090b484c2ca23b5e555c28ad843f6fec504e2\n'}, {'number': 2, 'created': '2022-01-24 16:19:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/a50bfcd3a518056972b6e7f86688f61d64e6c05f', 'message': 'RBD: more safe revert-to-snapshot\n\nIn order to prevent cases when volume is actually used by the\nbackend added a check of number of watchers.\n\nCloses-Bug: 1958845\nChange-Id: Ib57090b484c2ca23b5e555c28ad843f6fec504e2\n'}, {'number': 3, 'created': '2022-02-09 06:27:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/075988ff62d4bd465a819a9bf11bad4b4007ecd8', 'message': ""RBD: more safe revert-to-snapshot\n\nThere is a possibility for a volume to be actually busy while\nin 'available' status. One of the examples will be the result of\n'openstack volume reset state' command. Another example would be\nincomplete execution of the detach command.\nIn case of rollback of the volume with watchers all the data are\ntotally damaged.\nThere is a possibiliy to check if a volume is actually busy just\nbefore we run rollback command on the ceph rbd backend.\n\nCloses-Bug: 1958845\nChange-Id: Ib57090b484c2ca23b5e555c28ad843f6fec504e2\n""}, {'number': 4, 'created': '2022-11-29 14:01:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/cinder/commit/e088215376faf8e2b47f8c876c598a991b074a84', 'message': ""RBD: more safe revert-to-snapshot\n\nThere is a possibility for a volume to be actually busy while\nin 'available' status. One of the examples will be the result of\n'openstack volume reset state' command. Another example would be\nincomplete execution of the detach command.\nIn case of rollback of the volume with watchers all the data are\ntotally damaged.\nThere is a possibiliy to check if a volume is actually busy just\nbefore we run rollback command on the ceph rbd backend.\n\nCloses-Bug: 1958845\nChange-Id: Ib57090b484c2ca23b5e555c28ad843f6fec504e2\n""}, {'number': 5, 'created': '2023-08-29 13:32:08.000000000', 'files': ['cinder/volume/drivers/rbd.py', 'cinder/tests/unit/volume/drivers/test_rbd.py'], 'web_link': 'https://opendev.org/openstack/cinder/commit/02c78de47674ab891fac553abf0b91d933a05d03', 'message': ""RBD: more safe revert-to-snapshot\n\nThere is a possibility for a volume to be actually busy while\nin 'available' status. One of the examples will be the result of\n'openstack volume reset state' command. Another example would be\nincomplete execution of the detach command.\nIn case of rollback of the volume with watchers all the data are\ntotally damaged.\nThere is a possibiliy to check if a volume is actually busy just\nbefore we run rollback command on the ceph rbd backend.\n\nCloses-Bug: 1958845\nChange-Id: Ib57090b484c2ca23b5e555c28ad843f6fec504e2\n""}]",11,826036,02c78de47674ab891fac553abf0b91d933a05d03,121,6,5,23871,,,0,"RBD: more safe revert-to-snapshot

There is a possibility for a volume to be actually busy while
in 'available' status. One of the examples will be the result of
'openstack volume reset state' command. Another example would be
incomplete execution of the detach command.
In case of rollback of the volume with watchers all the data are
totally damaged.
There is a possibiliy to check if a volume is actually busy just
before we run rollback command on the ceph rbd backend.

Closes-Bug: 1958845
Change-Id: Ib57090b484c2ca23b5e555c28ad843f6fec504e2
",git fetch https://review.opendev.org/openstack/cinder refs/changes/36/826036/1 && git format-patch -1 --stdout FETCH_HEAD,['cinder/volume/drivers/rbd.py'],1,1dacd099a03a55ea5c376d0d7b0ad2198e3500fe,rbd-rollback-check-watchers," if len(self._get_image_status(volume.name)['watchers']) > 0: # If the num of watchers of image is >= 1, then the # image is considered to be used by client(s). msg = _('Failed to Rollback Volume: Image is busy ' '%(volname)s') % {'volname': volume.name} LOG.error(msg) raise exception.VolumeBackendAPIException(data=msg) else: with RBDVolumeProxy(self, volume.name) as image: image.rollback_to_snap(snapshot.name) LOG.debug(""Rollback volume %(volname)s to snapshot %(snapname)s"", {'volname': volume.name, 'snapname': snapshot.name})"," with RBDVolumeProxy(self, volume.name) as image: image.rollback_to_snap(snapshot.name)",12,2
openstack%2Fironic~893225,openstack/ironic,master,Ic51ca8df82552b9a8b6765cc0237f84e468e2fd8,Correct bindep.txt entries for bookworm,MERGED,2023-08-30 16:31:21.000000000,2023-08-31 16:13:51.000000000,2023-08-31 16:12:03.000000000,"[{'_account_id': 4571}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 16:31:21.000000000', 'files': ['bindep.txt'], 'web_link': 'https://opendev.org/openstack/ironic/commit/a2919f7a75e894dcbf2175d477f9829a23eeda77', 'message': 'Correct bindep.txt entries for bookworm\n\nDebian bookworm is where our unit tests run for py3.11. This change\npermits them to configure and run.\n\nChange-Id: Ic51ca8df82552b9a8b6765cc0237f84e468e2fd8\n'}]",2,893225,a2919f7a75e894dcbf2175d477f9829a23eeda77,20,3,1,10342,,,0,"Correct bindep.txt entries for bookworm

Debian bookworm is where our unit tests run for py3.11. This change
permits them to configure and run.

Change-Id: Ic51ca8df82552b9a8b6765cc0237f84e468e2fd8
",git fetch https://review.opendev.org/openstack/ironic refs/changes/25/893225/1 && git format-patch -1 --stdout FETCH_HEAD,['bindep.txt'],1,a2919f7a75e894dcbf2175d477f9829a23eeda77,,mariadb-server [platform:rpm platform:debian-bookworm]mysql-client [platform:dpkg !platform:debian-bookworm] mysql-server [platform:dpkg !platform:debian-bookworm] mariadb-client [platform:debian-bookworm] ,mariadb-server [platform:rpm]mysql-client [platform:dpkg] mysql-server [platform:dpkg],5,3
openstack%2Fopenstack-ansible-os_neutron~889811,openstack/openstack-ansible-os_neutron,stable/2023.1,If87cf7cfa1788d68c9a4013d7f4877692f2bb11c,Configure OVN NB and SB DB Connection probes,MERGED,2023-07-28 10:55:38.000000000,2023-08-31 16:07:23.000000000,2023-08-31 16:06:18.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-07-28 10:55:38.000000000', 'files': ['templates/ovn-northd-opts.j2', 'defaults/main.yml', 'tasks/providers/ovn_cluster_setup.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_neutron/commit/3e5c4c115674769031e8e52821df253c39882ce9', 'message': 'Configure OVN NB and SB DB Connection probes\n\nAllow configuration of `inactivity_probe` in Connection table in NB and\nSB for new installations.\n\nIssues, which successfully resolve by using this as a workaround:\n1. https://www.mail-archive.com/ovs-discuss@openvswitch.org/msg07431.html\n2. https://bugs.launchpad.net/kolla-ansible/+bug/1917484\n\nAccording to the OVN ML, specifically this part [1], there is no other\nway to set `inactivity_probe` other than using Connection table. And the\nonly valid option for it would be `0.0.0.0`, so that it could be applied\nto all connections.\n\n`ovn-ctl` forces `ovsdb-server` to look for addresses to listen on in\nConnection table with `db-nb-use-remote-in-db` and\n`db-sb-use-remote-in-db` options which are enabled by default.\n\nIf `db-nb-create-insecure-remote` and `db-sb-create-insecure-remote` are\nset to `yes` (when `neutron_ovn_ssl` is `False`), this would result in\nflooding OVN logs with `Address already in use` errors.\n\nSo we will rely on default value `no` for them from now on and only\nlisten on and with whatever options are provided in Connection tables.\n\n[1] https://www.mail-archive.com/ovs-discuss@openvswitch.org/msg07476.html\n\nChange-Id: If87cf7cfa1788d68c9a4013d7f4877692f2bb11c\n(cherry picked from commit d35c27bf718be54aa0c73eee8ecdd9cf0f8ef98f)\n'}]",2,889811,3e5c4c115674769031e8e52821df253c39882ce9,12,3,1,28619,,,0,"Configure OVN NB and SB DB Connection probes

Allow configuration of `inactivity_probe` in Connection table in NB and
SB for new installations.

Issues, which successfully resolve by using this as a workaround:
1. https://www.mail-archive.com/ovs-discuss@openvswitch.org/msg07431.html
2. https://bugs.launchpad.net/kolla-ansible/+bug/1917484

According to the OVN ML, specifically this part [1], there is no other
way to set `inactivity_probe` other than using Connection table. And the
only valid option for it would be `0.0.0.0`, so that it could be applied
to all connections.

`ovn-ctl` forces `ovsdb-server` to look for addresses to listen on in
Connection table with `db-nb-use-remote-in-db` and
`db-sb-use-remote-in-db` options which are enabled by default.

If `db-nb-create-insecure-remote` and `db-sb-create-insecure-remote` are
set to `yes` (when `neutron_ovn_ssl` is `False`), this would result in
flooding OVN logs with `Address already in use` errors.

So we will rely on default value `no` for them from now on and only
listen on and with whatever options are provided in Connection tables.

[1] https://www.mail-archive.com/ovs-discuss@openvswitch.org/msg07476.html

Change-Id: If87cf7cfa1788d68c9a4013d7f4877692f2bb11c
(cherry picked from commit d35c27bf718be54aa0c73eee8ecdd9cf0f8ef98f)
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_neutron refs/changes/11/889811/1 && git format-patch -1 --stdout FETCH_HEAD,"['templates/ovn-northd-opts.j2', 'defaults/main.yml', 'tasks/providers/ovn_cluster_setup.yml']",3,3e5c4c115674769031e8e52821df253c39882ce9,configure_ovn_db_connections-stable/2023.1,"- name: Configure connection settings for ovn-nb and ovn-sb - ""ovn-nbctl --inactivity-probe={{ neutron_ovn_nb_inactivity_probe }} set-connection p{{ ovn_proto }}:6641"" - ""ovn-sbctl --inactivity-probe={{ neutron_ovn_sb_inactivity_probe }} set-connection p{{ ovn_proto }}:6642"" when:","- name: set ssl for ovn-nb and ovn-sb - ""ovn-nbctl set-connection pssl:6641"" - ""ovn-sbctl set-connection pssl:6642"" when: - neutron_ovn_ssl",5,6
openstack%2Fmanila~880852,openstack/manila,master,If07b35727f03328fb2637811e083552bc2b137b1,Removes stanza check on netapp driver,NEW,2023-04-19 14:48:57.000000000,2023-08-31 15:47:45.000000000,,"[{'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 33301}, {'_account_id': 33648}, {'_account_id': 35586}, {'_account_id': 36178}]","[{'number': 1, 'created': '2023-04-19 14:48:57.000000000', 'files': ['manila/share/drivers/netapp/dataontap/cluster_mode/data_motion.py', 'manila/tests/share/drivers/netapp/dataontap/cluster_mode/test_data_motion.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/af60683c141dd102b405269dd4986123a9f5a383', 'message': 'Removes stanza check on netapp driver\n\nCloses-Bug: #2012742\nChange-Id: If07b35727f03328fb2637811e083552bc2b137b1\n'}]",4,880852,af60683c141dd102b405269dd4986123a9f5a383,11,7,1,35879,,,0,"Removes stanza check on netapp driver

Closes-Bug: #2012742
Change-Id: If07b35727f03328fb2637811e083552bc2b137b1
",git fetch https://review.opendev.org/openstack/manila refs/changes/52/880852/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/share/drivers/netapp/dataontap/cluster_mode/data_motion.py', 'manila/tests/share/drivers/netapp/dataontap/cluster_mode/test_data_motion.py']",2,af60683c141dd102b405269dd4986123a9f5a383,bug/fix-2012742,," @ddt.data([], ['fake_backend1', 'fake_backend2']) def test_get_config_for_backend_not_configured(self, conf_sections): self.mock_object(data_motion, ""CONF"") data_motion.CONF.list_all_sections.return_value = conf_sections self.assertRaises(exception.BadConfigurationException, data_motion.get_backend_configuration, self.backend) ",0,21
openstack%2Fopenstack-ansible-os_sahara~892095,openstack/openstack-ansible-os_sahara,stable/2023.1,Ie43a6edc4ef44b7b92905cf9d59be53edeb1b946,Stop reffering _member_ role,MERGED,2023-08-21 13:14:09.000000000,2023-08-31 15:47:19.000000000,2023-08-31 15:46:23.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-21 13:14:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_sahara/commit/46c444a587ad36820f6fbd0f2aee4e33cc60aa91', 'message': 'Stop reffering _member_ role\n\nKeystone has stopped providing or reffering `_member_` role for a while,\nthus role should not be refferenced anymore.\n\nMoreover, with 2023.1 service policies have dropped `_member_`\nwhich resulted in the role to be insufficient for basic operations.\n\nChange-Id: Ie43a6edc4ef44b7b92905cf9d59be53edeb1b946\nRelated-Bug: #2029486\n'}, {'number': 2, 'created': '2023-08-21 19:56:58.000000000', 'files': ['doc/source/configure-sahara.rst', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_sahara/commit/de7a652715d74c49d11db2a7cd09feab4fd6bbdc', 'message': 'Stop reffering _member_ role\n\nKeystone has stopped providing or reffering `_member_` role for a while,\nthus role should not be refferenced anymore.\n\nMoreover, with 2023.1 service policies have dropped `_member_`\nwhich resulted in the role to be insufficient for basic operations.\n\nChange-Id: Ie43a6edc4ef44b7b92905cf9d59be53edeb1b946\nRelated-Bug: #2029486\n'}]",4,892095,de7a652715d74c49d11db2a7cd09feab4fd6bbdc,18,3,2,28619,,,0,"Stop reffering _member_ role

Keystone has stopped providing or reffering `_member_` role for a while,
thus role should not be refferenced anymore.

Moreover, with 2023.1 service policies have dropped `_member_`
which resulted in the role to be insufficient for basic operations.

Change-Id: Ie43a6edc4ef44b7b92905cf9d59be53edeb1b946
Related-Bug: #2029486
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_sahara refs/changes/95/892095/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/configure-sahara.rst', 'defaults/main.yml']",2,46c444a587ad36820f6fbd0f2aee4e33cc60aa91,cherrypick-osa/member_role-nokmt6f95v,sahara_proxy_user_role_names: member,sahara_proxy_user_role_names: _member_,3,3
openstack%2Fopenstack-ansible-os_tacker~892359,openstack/openstack-ansible-os_tacker,stable/2023.1,I7835892960360ddea73ba98ed1cbdc8268d5e71e,Use proper galera port in configuration,MERGED,2023-08-23 07:26:08.000000000,2023-08-31 15:41:53.000000000,2023-08-31 15:40:56.000000000,"[{'_account_id': 13095}, {'_account_id': 22348}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-23 07:26:08.000000000', 'files': ['templates/tacker.conf.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_tacker/commit/fa39e1b7805f600a3d287c19385d84d2b1db30ef', 'message': ""Use proper galera port in configuration\n\nWhile <service>_galera_port is defined and used for db_setup\nrole, it's not in fact used in a connection string for oslo.db.\n\nChange-Id: I7835892960360ddea73ba98ed1cbdc8268d5e71e\n""}]",3,892359,fa39e1b7805f600a3d287c19385d84d2b1db30ef,14,3,1,28619,,,0,"Use proper galera port in configuration

While <service>_galera_port is defined and used for db_setup
role, it's not in fact used in a connection string for oslo.db.

Change-Id: I7835892960360ddea73ba98ed1cbdc8268d5e71e
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_tacker refs/changes/59/892359/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/tacker.conf.j2'],1,fa39e1b7805f600a3d287c19385d84d2b1db30ef,cherrypick-osa/db_port-24yhx0eaik,connection = mysql+pymysql://{{ tacker_galera_user }}:{{ tacker_container_mysql_password }}@{{ tacker_galera_address }}:{{ tacker_galera_port }}/{{ tacker_galera_database }}?charset=utf8{% if tacker_galera_use_ssl | bool %}&ssl_verify_cert=true{% if tacker_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ tacker_galera_ssl_ca_cert }}{% endif %}{% endif +%},connection = mysql+pymysql://{{ tacker_galera_user }}:{{ tacker_container_mysql_password }}@{{ tacker_galera_address }}/{{ tacker_galera_database }}?charset=utf8{% if tacker_galera_use_ssl | bool %}&ssl_verify_cert=true{% if tacker_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ tacker_galera_ssl_ca_cert }}{% endif %}{% endif +%},1,1
openstack%2Foctavia-dashboard~835176,openstack/octavia-dashboard,master,I04e2f87c923dc439f1bc9412f935b2ad712ce10e,Additional VIP support in the LB creation form,NEW,2022-03-25 08:15:44.000000000,2023-08-31 15:37:17.000000000,,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 29244}, {'_account_id': 34429}]","[{'number': 1, 'created': '2022-03-25 08:15:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/1d66e050b24fe7b2dbdde4c6b348206a184efe14', 'message': 'WIP Additional VIP support in horizon\n\nWIP: tests, display the multiple subnet IDs, cleanup of the unused\nvip_address, vip_subnet_id in the dashboard\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 2, 'created': '2022-03-28 11:17:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/5cdd94dabf95a925d1c8d011aaa3b5e8ef02ac6c', 'message': 'WIP Additional VIP support in the LB creation form\n\nWIP: tests, display the multiple subnet IDs, cleanup of the unused\nvip_address, vip_subnet_id in the dashboard\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 3, 'created': '2022-03-29 07:37:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/8eb8a833ffdc060d25ddc9671b0cd35d4c6e0e2b', 'message': 'WIP Additional VIP support in the LB creation form\n\nWIP: code coverage\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 4, 'created': '2022-08-17 13:24:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/097034c5401c11d021e34326a9ffb4539b7829e6', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nWIP: code coverage\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 5, 'created': '2022-08-17 16:27:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/dde2fdbd64dfbee1cb5ada809da7507e6e9db3a0', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 6, 'created': '2022-08-17 19:00:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/cb8c8dcb7d4776f599590d72859f53dcb581c267', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 7, 'created': '2022-08-23 06:53:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/9b98a4b20b24acf3aec6049e9e8ff7233422abc4', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 8, 'created': '2022-08-23 07:15:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/edfa5932636042170e66b46b09d020863a231669', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 9, 'created': '2022-08-29 14:48:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/f3bd1b8713b135b1cfb2fdb2fef8bfd8fa235c73', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 10, 'created': '2022-09-01 10:44:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/b61e81ec889b0c9d5a385e48b21601cc1f548cd8', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nDepends-On: https://review.opendev.org/c/openstack/openstacksdk/+/835175\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 11, 'created': '2022-12-07 08:53:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/c78fa2dbcee0145a89a1e4d815112592101addaf', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}, {'number': 12, 'created': '2023-08-31 07:20:53.000000000', 'files': ['octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/actions/associate-ip/modal.controller.spec.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/loadbalancers.module.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/loadbalancers.service.spec.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/details/detail.html', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/loadbalancers.service.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/actions/associate-ip/modal.controller.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/model.service.spec.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/model.service.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/details/drawer.html', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/loadbalancer/loadbalancer.html', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/details/detail.controller.spec.js', 'octavia_dashboard/api/rest/lbaasv2.py', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/details/detail.controller.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/loadbalancer/loadbalancer.controller.spec.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/loadbalancer/loadbalancer.controller.js'], 'web_link': 'https://opendev.org/openstack/octavia-dashboard/commit/87b14b2a9292953e7a8d2a7bf59091e3307f89db', 'message': 'Additional VIP support in the LB creation form\n\nAdd support for additional VIPs when creating/display a load balancer.\nIt merges the vip_subnet param and the additional_vips param from the\nAPI into a single form entry.\n\nStory 2005608\nTask 30848\n\nChange-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e\n'}]",31,835176,87b14b2a9292953e7a8d2a7bf59091e3307f89db,56,4,12,29244,,,0,"Additional VIP support in the LB creation form

Add support for additional VIPs when creating/display a load balancer.
It merges the vip_subnet param and the additional_vips param from the
API into a single form entry.

Story 2005608
Task 30848

Change-Id: I04e2f87c923dc439f1bc9412f935b2ad712ce10e
",git fetch https://review.opendev.org/openstack/octavia-dashboard refs/changes/76/835176/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia_dashboard/api/rest/lbaasv2.py', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/loadbalancers.module.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/details/detail.controller.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/loadbalancers/details/detail.html', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/loadbalancer/loadbalancer.controller.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/model.service.js', 'octavia_dashboard/static/dashboard/project/lbaasv2/workflow/loadbalancer/loadbalancer.html']",7,1d66e050b24fe7b2dbdde4c6b348206a184efe14,multi-vip," <div class=""row"" ng-if=""model.context.id""> <table st-table=""ctrl.tableData.displayedAllocated"" st-safe-src=""ctrl.tableData.allocated"" hz-table class=""table table-striped table-rsp table-detail""> <thead> <tr> <th st-sort=""name"" st-sort-default class=""rsp-p1"" translate>Subnet</th> <th st-sort=""id"" st-sort-default class=""rsp-p1"" translate>Subnet Id</th> <th st-sort=""network_name"" st-sort-default class=""rsp-p1"" translate>Network</th> <th st-sort=""id"" st-sort-default class=""rsp-p1"" translate>Network Id</th> <th st-sort=""ip_address"" st-sort-default class=""rsp-p1"" translate>IP Address</th> </tr> </thead> <tbody> <tr ng-repeat=""row in ctrl.tableData.displayedAllocated track by row.id""> <td class=""rsp-p1"">{$ ctrl.getSubnetName(row.id) $}</td> <td class=""rsp-p1"">{$ row.id $}</td> <td class=""rsp-p1"">{$ ctrl.getNetworkName(row.id) $}</td> <td class=""rsp-p1"">{$ ctrl.getNetworkId(row.id) $}</td> <td class=""rsp-p1"">{$ row.ip_address $}</td> </tr> <tr table-status table=""table"" column-count=""10""></tr> </tbody> </table> </div> </div> <div class=""row"" ng-if=""!model.context.id""> <div class=""col-xs-12 col-sm-12 col-md-12""> <transfer-table tr-model=""ctrl.tableData"" limits=""::ctrl.tableLimits"" help-text=""::ctrl.tableHelp""> <!-- Allocated--> <allocated ng-model=""ctrl.tableData.allocated.length"" validate-number-min=""1""> <table st-table=""ctrl.tableData.displayedAllocated"" st-safe-src=""ctrl.tableData.allocated"" hz-table class=""table table-striped table-rsp table-detail""> <thead> <tr> <th class=""rsp-p1""> <translate>Subnet</translate> <span class=""hz-icon-required fa fa-asterisk"" ng-show=""ctrl.tableData.displayedAllocated.length > 0""> </th> <th class=""rsp-p1""> <translate>IP Address</translate> </th> <th class=""actions_column""></th> </tr> </thead> <tbody> <tr ng-if=""ctrl.tableData.allocated.length === 0""> <td colspan=""5""> <div class=""no-rows-help""> {$ ::trCtrl.helpText.noneAllocText $} </div> </td> </tr> <tr ng-repeat=""row in ctrl.tableData.displayedAllocated track by row.id""> <td class=""rsp-p1""> {$ ctrl.shorthand(ctrl.getSubnet(row.id)) $} </td> <td class=""rsp-p1""> <div class=""form-group required"" ng-class=""{ 'has-error': loadBalancerDetailsForm['{$ ::row.id $}-address'].$invalid && loadBalancerDetailsForm['{$ ::row.id $}-address'].$dirty }""> <input name=""{$ ::row.id $}-address"" type=""text"" class=""form-control"" ng-model=""row.ip_address"" ng-pattern=""::ctrl.ipPattern"" ng-required=""false"" popover-placement=""top"" popover-append-to-body=""true"" popover-trigger=""focus"" ng-attr-popover=""{$ loadBalancerDetailsForm[row.id + '-address'].$invalid && loadBalancerDetailsForm[row.id + '-address'].$dirty ? ctrl.ipError : '' $}""> </div> </td> <td class=""actions_column""> <action-list> <action action-classes=""'btn btn-sm btn-default'"" callback=""trCtrl.deallocate"" item=""row""> <span translate>Remove</span> </action> </action-list> </td> </tr> <tr table-status table=""table"" column-count=""10""></tr> </tbody> </table> </allocated> <!-- Available --> <available> <table st-table=""ctrl.tableData.displayedAvailable"" st-safe-src=""ctrl.tableData.available"" hz-table class=""table table-striped table-rsp table-detail""> <thead> <tr> <th class=""search-header"" colspan=""5""> <hz-search-bar icon-classes=""fa-search""></hz-search-bar> </th> </tr> <tr> <th st-sort=""name"" st-sort-default class=""rsp-p1"" translate>Subnet</th> <th st-sort=""id"" st-sort-default class=""rsp-p1"" translate>Subnet Id</th> <th st-sort=""network_name"" st-sort-default class=""rsp-p1"" translate>Network</th> <th st-sort=""id"" st-sort-default class=""rsp-p1"" translate>Network Id</th> <th st-sort=""cidr"" st-sort-default class=""rsp-p1"" translate>CIDR</th> <th class=""actions_column""></th> </tr> </thead> <tbody> <tr ng-if=""ctrl.tableData.available.length === 0""> <td colspan=""6""> <div class=""no-rows-help""> {$ ::trCtrl.helpText.noneAvailText $} </div> </td> </tr> <tr ng-repeat=""row in ctrl.tableData.displayedAvailable track by row.id"" ng-if=""!trCtrl.allocatedIds[row.id] && ctrl.checkSubnet(row)""> <td class=""rsp-p1"">{$ ctrl.getSubnetName(row.id) $}</td> <td class=""rsp-p1"">{$ row.id $}</td> <td class=""rsp-p1"">{$ ctrl.getNetworkName(row.id) $}</td> <td class=""rsp-p1"">{$ ctrl.getNetworkId(row.id) $}</td> <td class=""rsp-p1"">{$ ctrl.getSubnetCIDR(row.id) $}</td> <td class=""actions_column""> <action-list> <action action-classes=""'btn btn-sm btn-default'"" callback=""trCtrl.allocate"" item=""row""> <span translate>Add</span> </action> </action-list> </td> </tr> </tbody> </table> </available> </transfer-table>"," <div class=""col-xs-12 col-sm-8 col-md-6""> <div class=""form-group"" ng-class=""{ 'has-error': loadBalancerDetailsForm.ip.$invalid && loadBalancerDetailsForm.ip.$dirty }""> <label translate class=""control-label"" for=""ip"">IP address</label> <input name=""ip"" id=""ip"" type=""text"" class=""form-control"" ng-model=""model.spec.loadbalancer.vip_address"" ng-pattern=""::ctrl.ipPattern"" ng-disabled=""model.context.id""> <span class=""help-block"" ng-show=""loadBalancerDetailsForm.ip.$invalid && loadBalancerDetailsForm.ip.$dirty""> {$ ::ctrl.ipError $} </span> </div> </div> <div class=""row""> <div class=""form-group""> <label class=""control-label""> <translate>Subnet</translate> <span class=""hz-icon-required fa fa-asterisk""></span> </label> <!-- value=""model.spec.loadbalancer.vip_subnet_id"" --> <filter-select shorthand=""ctrl.shorthand"" on-select=""ctrl.setSubnet(option)"" disabled=""model.context.id"" columns=""ctrl.subnetColumns"" options=""ctrl.subnetOptions"" loaded=""ctrl.dataLoaded"" ng-required=""true"" ng-model=""model.spec.loadbalancer.vip_subnet_id"" ></filter-select> </div>",278,41
openstack%2Fcharm-keystone-k8s~893153,openstack/charm-keystone-k8s,stable/2023.1.2,Ia2e7a25da9b623bd2b4fc3b4a54bda76fb6ced79,2023.1.2 release updates,MERGED,2023-08-30 10:49:31.000000000,2023-08-31 15:18:25.000000000,2023-08-31 14:54:41.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:49:31.000000000', 'files': ['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml'], 'web_link': 'https://opendev.org/openstack/charm-keystone-k8s/commit/90ca778d87aaa3d78970cd11010cbc54ddafaa26', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: Ia2e7a25da9b623bd2b4fc3b4a54bda76fb6ced79\n'}]",2,893153,90ca778d87aaa3d78970cd11010cbc54ddafaa26,11,2,1,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: Ia2e7a25da9b623bd2b4fc3b4a54bda76fb6ced79
",git fetch https://review.opendev.org/openstack/charm-keystone-k8s refs/changes/53/893153/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml']",3,90ca778d87aaa3d78970cd11010cbc54ddafaa26,, channel: 3.9/candidate channel: 2023.1/candidate, channel: 3.9/edge channel: 2023.1/edge,4,4
openstack%2Fcharm-cinder-ceph-k8s~893146,openstack/charm-cinder-ceph-k8s,stable/2023.1.2,I07b1102010ce403ce17e00dd641abc5b066e551f,2023.1.2 release updates,MERGED,2023-08-30 10:38:07.000000000,2023-08-31 15:11:37.000000000,2023-08-31 14:53:35.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:38:07.000000000', 'files': ['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml'], 'web_link': 'https://opendev.org/openstack/charm-cinder-ceph-k8s/commit/34da9b847b3a7a81bcf4666299c314d6e1a0bfbb', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: I07b1102010ce403ce17e00dd641abc5b066e551f\n'}]",2,893146,34da9b847b3a7a81bcf4666299c314d6e1a0bfbb,11,2,1,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: I07b1102010ce403ce17e00dd641abc5b066e551f
",git fetch https://review.opendev.org/openstack/charm-cinder-ceph-k8s refs/changes/46/893146/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml']",3,34da9b847b3a7a81bcf4666299c314d6e1a0bfbb,, channel: 3.9/candidate channel: 2023.1/candidate channel: 2023.1/candidate, channel: 3.9/edge channel: 2023.1/edge channel: 2023.1/edge,5,5
openstack%2Fcharm-glance-k8s~893148,openstack/charm-glance-k8s,stable/2023.1.2,I53cddcbcf8696ef4471c2a0f95ccb620afab01af,2023.1.2 release updates,MERGED,2023-08-30 10:42:51.000000000,2023-08-31 15:09:26.000000000,2023-08-31 14:50:44.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:42:51.000000000', 'files': ['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml'], 'web_link': 'https://opendev.org/openstack/charm-glance-k8s/commit/6bdb099b1a0064016a84a859d9812f1028a241bb', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: I53cddcbcf8696ef4471c2a0f95ccb620afab01af\n'}]",2,893148,6bdb099b1a0064016a84a859d9812f1028a241bb,11,2,1,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: I53cddcbcf8696ef4471c2a0f95ccb620afab01af
",git fetch https://review.opendev.org/openstack/charm-glance-k8s refs/changes/48/893148/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml']",3,6bdb099b1a0064016a84a859d9812f1028a241bb,, channel: 3.9/candidate channel: 2023.1/candidate, channel: 3.9/edge channel: 2023.1/edge,4,4
openstack%2Fcharm-openstack-hypervisor~893199,openstack/charm-openstack-hypervisor,stable/2023.1.2,I6aa68295f02515be08b5040ed8915d7b9dfc4537,2023.1.2 release updates,MERGED,2023-08-30 14:39:15.000000000,2023-08-31 15:06:56.000000000,2023-08-31 14:51:09.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 14:39:15.000000000', 'files': ['osci.yaml', '.gitreview'], 'web_link': 'https://opendev.org/openstack/charm-openstack-hypervisor/commit/d7afaf4cae41165bd22d9998298e72ae072efbba', 'message': '2023.1.2 release updates\n\nUpdate target branch for reviews.\n\nTarget candidate channel for charm builds.\n\nChange-Id: I6aa68295f02515be08b5040ed8915d7b9dfc4537\n'}]",0,893199,d7afaf4cae41165bd22d9998298e72ae072efbba,7,2,1,935,,,0,"2023.1.2 release updates

Update target branch for reviews.

Target candidate channel for charm builds.

Change-Id: I6aa68295f02515be08b5040ed8915d7b9dfc4537
",git fetch https://review.opendev.org/openstack/charm-openstack-hypervisor refs/changes/99/893199/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview']",2,d7afaf4cae41165bd22d9998298e72ae072efbba,,defaultbranch=stable/2023.1.2,defaultbranch=main,2,2
openstack%2Fcharm-neutron-k8s~893154,openstack/charm-neutron-k8s,stable/2023.1.2,Iebc823b06e3db9feb5a8c60c82f07c64b96001d5,2023.1.2 release updates,MERGED,2023-08-30 10:49:59.000000000,2023-08-31 15:06:15.000000000,2023-08-31 14:49:36.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:49:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-k8s/commit/d516d6595b28bf00e2613e287c13e3d0d3b8b59c', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: Iebc823b06e3db9feb5a8c60c82f07c64b96001d5\n'}, {'number': 2, 'created': '2023-08-30 10:50:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-neutron-k8s/commit/06d5f6e78316a9ea6e5253eff449070235dc7b5d', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: Iebc823b06e3db9feb5a8c60c82f07c64b96001d5\n'}, {'number': 3, 'created': '2023-08-31 09:21:47.000000000', 'files': ['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml'], 'web_link': 'https://opendev.org/openstack/charm-neutron-k8s/commit/0fb9e8b98c1caeebb3a15fd534d4939da99e7e79', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: Iebc823b06e3db9feb5a8c60c82f07c64b96001d5\n'}]",3,893154,0fb9e8b98c1caeebb3a15fd534d4939da99e7e79,16,2,3,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: Iebc823b06e3db9feb5a8c60c82f07c64b96001d5
",git fetch https://review.opendev.org/openstack/charm-neutron-k8s refs/changes/54/893154/1 && git format-patch -1 --stdout FETCH_HEAD,"['1', 'osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml']",4,d516d6595b28bf00e2613e287c13e3d0d3b8b59c,, channel: 3.9/candidate channel: yoga/candidate channel: 23.03/candidate channel: candidate, channel: 3.9/edge channel: yoga/edge channel: 23.03/edge channel: edge,27,6
openstack%2Fcharm-placement-k8s~893155,openstack/charm-placement-k8s,stable/2023.1.2,I0926871cc46e623d843a161e2ad11fc57dce0294,2023.1.2 release updates,MERGED,2023-08-30 10:50:48.000000000,2023-08-31 15:05:59.000000000,2023-08-31 14:49:46.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:50:48.000000000', 'files': ['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml'], 'web_link': 'https://opendev.org/openstack/charm-placement-k8s/commit/0f4e3feb83c3a930ae1dbab7ebec0577625ea684', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: I0926871cc46e623d843a161e2ad11fc57dce0294\n'}]",3,893155,0f4e3feb83c3a930ae1dbab7ebec0577625ea684,13,2,1,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: I0926871cc46e623d843a161e2ad11fc57dce0294
",git fetch https://review.opendev.org/openstack/charm-placement-k8s refs/changes/55/893155/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml']",3,0f4e3feb83c3a930ae1dbab7ebec0577625ea684,, channel: candidate channel: 3.9/candidate channel: 2023.1/candidate channel: 2023.1/candidate, channel: edge channel: 3.9/edge channel: 2023.1/edge channel: 2023.1/edge,6,6
openstack%2Fcharm-horizon-k8s~893152,openstack/charm-horizon-k8s,stable/2023.1.2,I67452ac4a9165d363b1087744a7ed5247049aeef,2023.1.2 release updates,MERGED,2023-08-30 10:48:55.000000000,2023-08-31 15:05:09.000000000,2023-08-31 14:48:39.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:48:55.000000000', 'files': ['osci.yaml', '.gitreview'], 'web_link': 'https://opendev.org/openstack/charm-horizon-k8s/commit/5265b8433b152a860c80f1c8ab0440b2adaea0c9', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: I67452ac4a9165d363b1087744a7ed5247049aeef\n'}]",0,893152,5265b8433b152a860c80f1c8ab0440b2adaea0c9,7,2,1,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: I67452ac4a9165d363b1087744a7ed5247049aeef
",git fetch https://review.opendev.org/openstack/charm-horizon-k8s refs/changes/52/893152/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview']",2,5265b8433b152a860c80f1c8ab0440b2adaea0c9,,defaultbranch=stable/2023.1.2,defaultbranch=main,2,2
openstack%2Fcharm-heat-k8s~893149,openstack/charm-heat-k8s,stable/2023.1.2,I5ddd4e069dc96fb13f5563a96e88cc46ba008e58,2023.1.2 release updates,MERGED,2023-08-30 10:47:39.000000000,2023-08-31 15:04:35.000000000,2023-08-31 14:48:01.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:47:39.000000000', 'files': ['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml'], 'web_link': 'https://opendev.org/openstack/charm-heat-k8s/commit/972d07726d3c34a9b3e966459e48c7f2373ba6e8', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: I5ddd4e069dc96fb13f5563a96e88cc46ba008e58\n'}]",2,893149,972d07726d3c34a9b3e966459e48c7f2373ba6e8,11,2,1,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: I5ddd4e069dc96fb13f5563a96e88cc46ba008e58
",git fetch https://review.opendev.org/openstack/charm-heat-k8s refs/changes/49/893149/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml']",3,972d07726d3c34a9b3e966459e48c7f2373ba6e8,, channel: 3.9/candidate channel: 2023.1/candidate, channel: 3.9/edge channel: 2023.1/edge,4,4
openstack%2Fcharm-cinder-k8s~893147,openstack/charm-cinder-k8s,stable/2023.1.2,I67e50e70dd2ac68b5155b2709f2fc2fbd9f43664,2023.1.2 release updates,MERGED,2023-08-30 10:40:24.000000000,2023-08-31 15:00:41.000000000,2023-08-31 14:52:10.000000000,"[{'_account_id': 12549}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:40:24.000000000', 'files': ['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml'], 'web_link': 'https://opendev.org/openstack/charm-cinder-k8s/commit/71684cc6b87842eed3acaea4f2c187c9606d8f74', 'message': '2023.1.2 release updates\n\nUpdate publishing target to push to candidate channel.\n\nRefresh bundles to deploy from candidate channel for testing.\n\nUpdate .gitreview default branch.\n\nChange-Id: I67e50e70dd2ac68b5155b2709f2fc2fbd9f43664\n'}]",2,893147,71684cc6b87842eed3acaea4f2c187c9606d8f74,11,2,1,935,,,0,"2023.1.2 release updates

Update publishing target to push to candidate channel.

Refresh bundles to deploy from candidate channel for testing.

Update .gitreview default branch.

Change-Id: I67e50e70dd2ac68b5155b2709f2fc2fbd9f43664
",git fetch https://review.opendev.org/openstack/charm-cinder-k8s refs/changes/47/893147/1 && git format-patch -1 --stdout FETCH_HEAD,"['osci.yaml', '.gitreview', 'tests/bundles/smoke.yaml']",3,71684cc6b87842eed3acaea4f2c187c9606d8f74,, channel: 3.9/candidate channel: 2023.1/candidate, channel: 3.9/edge channel: 2023.1/edge,4,4
openstack%2Foslo.messaging~892372,openstack/oslo.messaging,stable/victoria,Ic94323658c89df1c1ff32f511ca23502317d0f00,Only allow safe context fields in notifications,ABANDONED,2023-08-22 15:51:51.000000000,2023-08-31 14:34:10.000000000,,"[{'_account_id': 9542}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-22 15:51:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/2470886ec42e779e87234f5dcb0ff5e3057cc71a', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nRelated-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}, {'number': 2, 'created': '2023-08-28 14:58:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/07b280a6f55383d196692b383ebcbe19c4483fd4', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nCloses-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}, {'number': 3, 'created': '2023-08-29 19:30:01.000000000', 'files': ['oslo_messaging/tests/notify/test_notifier.py', 'oslo_messaging/tests/notify/test_listener.py', 'oslo_messaging/notify/notifier.py'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/abd3ae4ccf601fc29daf9b671b7604caf38a6d0c', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nDepends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/892873\nCloses-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}]",1,892372,abd3ae4ccf601fc29daf9b671b7604caf38a6d0c,9,2,3,10342,,,0,"Only allow safe context fields in notifications

Publishing a fully hydrated context object in a notification would give
someone with access to that notification the ability to impersonate the
original actor through inclusion of sensitive fields.

Now, instead, we pare down the context object to the bare minimum before
passing it for serialization in notification workflows.

Depends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/892873
Closes-bug: 2030976
Change-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00
(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/72/892372/1 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_messaging/tests/notify/test_notifier.py', 'oslo_messaging/tests/notify/test_listener.py', 'oslo_messaging/notify/notifier.py']",3,2470886ec42e779e87234f5dcb0ff5e3057cc71a,,"def _sanitize_context(ctxt): # NOTE(JayF): The below values are in the same order they are in # oslo_context.context.RequestContext.__init__() safe_keys = ( 'user_id', 'project_id', 'domain_id', 'user_domain_id', 'project_domain_id', 'request_id', 'roles', 'user_name', 'project_name', 'domain_name', 'user_domain_name', 'project_domain_name', 'service_user_id', 'service_user_domain_id', 'service_user_domain_name', 'service_project_id', 'service_project_name', 'service_project_domain_id', 'service_project_domain_name', 'service_roles', 'global_request_id', 'system_scope', # NOTE(JayF) These have been renamed but may show up in notifications 'user', 'domain', 'user_domain', 'project_domain', ) ctxt_dict = ctxt if isinstance(ctxt, dict) else ctxt.to_dict() safe_dict = {k: v for k, v in ctxt_dict.items() if k in safe_keys} if ctxt_dict is ctxt: return safe_dict else: return ctxt.__class__.from_dict(safe_dict) # NOTE(JayF): We must remove secure information from notification # payloads, otherwise we risk sending sensitive creds # to a notification bus. safe_ctxt = _sanitize_context(ctxt) ctxt = self._serializer.serialize_context(safe_ctxt)", ctxt = self._serializer.serialize_context(ctxt),223,25
openstack%2Foslo.messaging~891746,openstack/oslo.messaging,stable/wallaby,Ic94323658c89df1c1ff32f511ca23502317d0f00,Only allow safe context fields in notifications,ABANDONED,2023-08-17 14:10:40.000000000,2023-08-31 14:33:53.000000000,,"[{'_account_id': 9542}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-17 14:10:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/29df2494cd6d8a5ba4d9d5678b60cb3fbb6662fa', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nRelated-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}, {'number': 2, 'created': '2023-08-28 14:57:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/d5fc7b8ad3fdf993fab3b3c2c63692d259fff39b', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nCloses-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}, {'number': 3, 'created': '2023-08-29 19:24:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/cf84388930548f9fcb937d89f78ba5adc71a148f', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nCloses-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}, {'number': 4, 'created': '2023-08-29 19:27:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/36b9701317be8fad79c0b80ca524702d94402951', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nCloses-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}, {'number': 5, 'created': '2023-08-29 21:46:36.000000000', 'files': ['oslo_messaging/tests/notify/test_notifier.py', 'oslo_messaging/tests/notify/test_listener.py', 'oslo_messaging/notify/notifier.py'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/76fe7668194e692386340596dc9f9d3086761f26', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nCloses-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}]",5,891746,76fe7668194e692386340596dc9f9d3086761f26,16,2,5,10342,,,0,"Only allow safe context fields in notifications

Publishing a fully hydrated context object in a notification would give
someone with access to that notification the ability to impersonate the
original actor through inclusion of sensitive fields.

Now, instead, we pare down the context object to the bare minimum before
passing it for serialization in notification workflows.

Closes-bug: 2030976
Change-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00
(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/46/891746/1 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_messaging/tests/notify/test_notifier.py', 'oslo_messaging/tests/notify/test_listener.py', 'oslo_messaging/notify/notifier.py']",3,29df2494cd6d8a5ba4d9d5678b60cb3fbb6662fa,,"def _sanitize_context(ctxt): # NOTE(JayF): The below values are in the same order they are in # oslo_context.context.RequestContext.__init__() safe_keys = ( 'user_id', 'project_id', 'domain_id', 'user_domain_id', 'project_domain_id', 'request_id', 'roles', 'user_name', 'project_name', 'domain_name', 'user_domain_name', 'project_domain_name', 'service_user_id', 'service_user_domain_id', 'service_user_domain_name', 'service_project_id', 'service_project_name', 'service_project_domain_id', 'service_project_domain_name', 'service_roles', 'global_request_id', 'system_scope', # NOTE(JayF) These have been renamed but may show up in notifications 'user', 'domain', 'user_domain', 'project_domain', ) ctxt_dict = ctxt if isinstance(ctxt, dict) else ctxt.to_dict() safe_dict = {k: v for k, v in ctxt_dict.items() if k in safe_keys} if ctxt_dict is ctxt: return safe_dict else: return ctxt.__class__.from_dict(safe_dict) # NOTE(JayF): We must remove secure information from notification # payloads, otherwise we risk sending sensitive creds # to a notification bus. safe_ctxt = _sanitize_context(ctxt) ctxt = self._serializer.serialize_context(safe_ctxt)", ctxt = self._serializer.serialize_context(ctxt),223,25
openstack%2Fpython-manilaclient~344671,openstack/python-manilaclient,master,I2c3848cbbeb921ede74756e25e58ef82277e0d2b,Implement share backup,MERGED,2016-07-20 09:14:15.000000000,2023-08-31 14:31:59.000000000,2023-08-31 14:30:51.000000000,"[{'_account_id': 14567}, {'_account_id': 15100}, {'_account_id': 16203}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30407}, {'_account_id': 32594}]","[{'number': 1, 'created': '2016-07-20 09:14:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/578b4f0624152bed23acf5883f118f3163e37f31', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\nImplement: blueprint share-backup\n'}, {'number': 2, 'created': '2016-07-20 13:37:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/2a719b944f90589d83183a5d693fce418d3d2123', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 3, 'created': '2016-07-20 14:53:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/f19839250d570a997c8af5b88f9407719720c4bc', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 4, 'created': '2016-07-27 08:52:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/77f2dbc3fd602df1952256f4a1cc5c55a295eb60', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 5, 'created': '2016-08-15 08:19:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/ba58bc104deac6a756848016e832898619d7c889', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 6, 'created': '2016-08-16 03:05:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/ca49f1032098a86a3d111eff2b9d5adf9f58cfe6', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 7, 'created': '2022-04-30 17:57:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/4f8de662037cd0c4c493da34101eaa13827089d7', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 8, 'created': '2022-05-07 13:19:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/21d40b2bb9bca2224b5c1e4202062c8893ab43ce', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 9, 'created': '2022-05-29 14:33:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/b357953525d4bc4be4526184a12e799b71ad25c0', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 10, 'created': '2022-06-27 16:52:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/24b82cbadc7a2adb2b9d81f4617212704276fcb5', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 11, 'created': '2022-09-06 08:19:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/29114597abc30607436b7cf1562239ea312c5ea4', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 12, 'created': '2022-10-13 20:24:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/ea5d07a673d0317d17b6f1df045bc1512c53507a', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 13, 'created': '2022-10-15 14:46:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/b3f23e906b3aa674fce3a68446ee37b54fc4b2b3', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 14, 'created': '2022-10-29 14:02:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/12c9a6eecf399a26ddbd18c620fa4db7a046ee1a', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 15, 'created': '2022-10-29 14:23:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/266bc8dc1981fd91046e8aadbe911af8f10a6055', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 16, 'created': '2023-01-04 12:36:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/e94f6699b39ff0ecb57d63b178996a168a546a34', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 17, 'created': '2023-03-12 11:34:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/f0690d451693bca0fc962e7502cd13093ea645d9', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 18, 'created': '2023-06-16 10:04:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/3d03b5f9d29b4809e701c8d1160a1f23f25dbc29', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 19, 'created': '2023-08-07 12:47:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/1f0b0cbe2d28dfb91aac05de2c571f6b68bee7e9', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 20, 'created': '2023-08-15 17:13:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/e6f511dfc5a699ac9eda1d5fc6d24288b1fa4df7', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 21, 'created': '2023-08-16 09:49:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/2e10c948e93a92fb305260eb0ff0b87d863caccc', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 22, 'created': '2023-08-16 16:56:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/255b70616cd863089e57e977a1e5da5142e7f8f6', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 23, 'created': '2023-08-18 11:37:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/8a9ac6f01bd21373d5fa957250cfb9e784161b4a', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 24, 'created': '2023-08-23 12:41:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/30366dfd20e271adddfae369751393c01ff05e8f', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 25, 'created': '2023-08-24 14:54:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/cb62f5cea3071fa82da7ccf0d49d540c4aa81a0f', 'message': 'Implement share backup\n\nAdd share backup feature in Data Copy Service and\nShare Service. It will allow the user to create, restore\nand delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: I7d10cf47864cd21932315375d84dc728ff738f23\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 26, 'created': '2023-08-25 14:07:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/2fad6ef934a856481d891f6fec520644bfefd36d', 'message': 'Implement share backup\n\nAdd share backup feature. This will allow the user to create,\nrestore and delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 27, 'created': '2023-08-25 16:19:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/4306c445e74796ed06b71f6dfa7049a5a8b19b92', 'message': 'Implement share backup\n\nAdd share backup feature. This will allow the user to create,\nrestore and delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 28, 'created': '2023-08-26 13:22:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/cd93db9cbf2e213c58aef19aef70bafb50ab7a53', 'message': 'Implement share backup\n\nAdd share backup feature. This will allow the user to create,\nrestore and delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 29, 'created': '2023-08-26 14:33:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/758318e7fac161c2a3a1843c73cbe326786be755', 'message': 'Implement share backup\n\nAdd share backup feature. This will allow the user to create,\nrestore and delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 30, 'created': '2023-08-26 16:24:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/72dcffb8c5efb5de66162ab77a99d0fb2995ad19', 'message': 'Implement share backup\n\nAdd share backup feature. This will allow the user to create,\nrestore and delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 31, 'created': '2023-08-28 07:35:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/b9ee8ec2c03ebf8313a66ec39fefd2d0eb1289bf', 'message': 'Implement share backup\n\nAdd share backup feature. This will allow the user to create,\nrestore and delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}, {'number': 32, 'created': '2023-08-29 07:01:05.000000000', 'files': ['manilaclient/tests/unit/v2/test_share_backups.py', 'manilaclient/tests/unit/osc/v2/test_share_backups.py', 'manilaclient/tests/unit/osc/v2/fakes.py', 'releasenotes/notes/share-backup-98e11c6a28897e94.yaml', 'manilaclient/common/constants.py', 'manilaclient/v2/share_backups.py', 'manilaclient/v2/client.py', 'manilaclient/tests/functional/osc/base.py', 'setup.cfg', 'manilaclient/tests/functional/osc/test_share_backups.py', 'manilaclient/osc/v2/share_backups.py'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/5e24577904927930489ddf6f879856c86d6fb440', 'message': 'Implement share backup\n\nAdd share backup feature. This will allow the user to create,\nrestore and delete backups as well as listing backups and showing\nthe details of a specific backup.\n\nImplement: blueprint share-backup\nDepends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca\nChange-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b\n'}]",95,344671,5e24577904927930489ddf6f879856c86d6fb440,111,8,32,15100,,,0,"Implement share backup

Add share backup feature. This will allow the user to create,
restore and delete backups as well as listing backups and showing
the details of a specific backup.

Implement: blueprint share-backup
Depends-On: Ice01ab7892b1eb52b3202f2c79957977f73f3aca
Change-Id: I2c3848cbbeb921ede74756e25e58ef82277e0d2b
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/71/344671/1 && git format-patch -1 --stdout FETCH_HEAD,"['manilaclient/tests/unit/v2/test_share_backups.py', 'manilaclient/v2/shell.py', 'manilaclient/v2/share_backups.py', 'manilaclient/v2/client.py', 'manilaclient/api_versions.py']",5,578b4f0624152bed23acf5883f118f3163e37f31,bp/share-backup,MAX_VERSION = '2.19',MAX_VERSION = '2.17',331,1
openstack%2Fdiskimage-builder~893077,openstack/diskimage-builder,master,Ib5b3a7690c35d6859e2e0fdac2326dcd16c051d3,Deprecate legacy deployment elements,MERGED,2023-08-29 15:13:06.000000000,2023-08-31 14:24:33.000000000,2023-08-31 14:23:21.000000000,"[{'_account_id': 4146}, {'_account_id': 4571}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-29 15:13:06.000000000', 'files': ['diskimage_builder/elements/deploy-tgtadm/README.rst', 'diskimage_builder/elements/deploy-targetcli/README.rst', 'releasenotes/notes/deprecation-of-legacy-deploy-elements-1665af6e87103c5f.yaml', 'diskimage_builder/elements/deploy-baremetal/README.rst'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/a692673b900bd0b7004d9fb10e50e6471b8361da', 'message': 'Deprecate legacy deployment elements\n\nLegacy elements deploy-tgtadm, deploy-targetcli, and deploy-baremetal\nhave not seen use in ages. Another element seems to date back to this,\ndeploy-kexec, but appears to see no actual use as the underlying methods\nleveraged by these elements were long moved away from. iSCSI based\ndeployment being the last, and even then it required the\nironic-python-agent.\n\nChange-Id: Ib5b3a7690c35d6859e2e0fdac2326dcd16c051d3\n'}]",0,893077,a692673b900bd0b7004d9fb10e50e6471b8361da,8,3,1,11655,,,0,"Deprecate legacy deployment elements

Legacy elements deploy-tgtadm, deploy-targetcli, and deploy-baremetal
have not seen use in ages. Another element seems to date back to this,
deploy-kexec, but appears to see no actual use as the underlying methods
leveraged by these elements were long moved away from. iSCSI based
deployment being the last, and even then it required the
ironic-python-agent.

Change-Id: Ib5b3a7690c35d6859e2e0fdac2326dcd16c051d3
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/77/893077/1 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/deploy-tgtadm/README.rst', 'diskimage_builder/elements/deploy-targetcli/README.rst', 'releasenotes/notes/deprecation-of-legacy-deploy-elements-1665af6e87103c5f.yaml', 'diskimage_builder/elements/deploy-baremetal/README.rst']",4,a692673b900bd0b7004d9fb10e50e6471b8361da,, .. Warning:: Ironic has not supported this style of deployment element since it's early days. Please consult `ironic-python-agent-builder <https://docs.openstack.org/ironic-python-agent-builder>`_.,,27,2
openstack%2Fneutron~881826,openstack/neutron,master,I82225fcc6248bb0fd68959ceb1daabff423d81ff,Fix race condition when creating two routers without HA network,MERGED,2023-04-28 14:01:21.000000000,2023-08-31 14:17:27.000000000,2023-08-29 03:39:27.000000000,"[{'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 6773}, {'_account_id': 8313}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 21798}, {'_account_id': 22348}, {'_account_id': 32586}]","[{'number': 1, 'created': '2023-04-28 14:01:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0c63d8a154923740adffba2f1fc8afe47be95be3', 'message': '[WIP] Fix race condition when creating two routers without HA network\n\nTODO: testing\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 2, 'created': '2023-04-28 16:23:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/db0d6221c88543f75675bc3dbc6fac1617a00240', 'message': '[WIP] Fix race condition when creating two routers without HA network\n\nTODO: testing\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 3, 'created': '2023-05-03 14:11:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/1e07c13fd6e12284226c09b6ccb0dcaf24434bae', 'message': '[WIP] Fix race condition when creating two routers without HA network\n\nTODO: testing\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 4, 'created': '2023-05-03 14:46:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/dd45588d2b3d3039ea85701937f27755970421a4', 'message': '[WIP] Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 5, 'created': '2023-05-03 14:46:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/3eef119829d411781094bb3886b6d330fec3e061', 'message': 'Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 6, 'created': '2023-05-04 14:27:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6084c1b79a6969126c34d69668f06fcd0db29580', 'message': '[WIP] Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 7, 'created': '2023-05-05 12:59:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/e778d500944132d7c77322090df7a9adbacc2a5b', 'message': '[WIP] Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 8, 'created': '2023-05-05 13:36:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/6118b49ae89804c549aec8b6a73113713b9ef0e6', 'message': 'Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 9, 'created': '2023-05-08 08:11:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/95714f4704207b99792237f30bdd12dd3e863af8', 'message': 'Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 10, 'created': '2023-05-08 09:42:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f980e537fdf1146ecff7a94965d4d5d5cd256923', 'message': 'Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 11, 'created': '2023-05-17 10:50:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f3f6c3ec4a0aace47e45e8b9d4471f127af3e2d8', 'message': 'Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}, {'number': 12, 'created': '2023-08-25 08:43:46.000000000', 'files': ['neutron/db/l3_hamode_db.py', 'neutron/tests/unit/db/test_l3_hamode_db.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/e6fb32e27d1141ca4b00c3758ee44bfe2f060ccf', 'message': 'Fix race condition when creating two routers without HA network\n\nWhen a HA router is created and the HA is not yet, before creating\nthe router, the Neutron server creates the HA network and the\ncorresponding subnet.\n\nThe HA network cannot be duplicated (see previous patches related to\nthis bug). But the subnet, that is created in another database\ntransaction, cannot be present when the router creation call tries\nto create the HA port.\n\nThis patch adds a HA subnet check before creating the router and the\nHA port. Even if the subnet check fails and the worker tries to\ncreate this subnet, if the process fails with ``InvalidInput``, that\nmeans other worker created the subnet before and the current one\nfails because tries to create the same subnet with the same CIDR.\nIn this case, we dismiss the exception and continue with the router\ncreation.\n\nCloses-Bug: #2016198\n\nChange-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff\n'}]",11,881826,e6fb32e27d1141ca4b00c3758ee44bfe2f060ccf,60,9,12,16688,,,0,"Fix race condition when creating two routers without HA network

When a HA router is created and the HA is not yet, before creating
the router, the Neutron server creates the HA network and the
corresponding subnet.

The HA network cannot be duplicated (see previous patches related to
this bug). But the subnet, that is created in another database
transaction, cannot be present when the router creation call tries
to create the HA port.

This patch adds a HA subnet check before creating the router and the
HA port. Even if the subnet check fails and the worker tries to
create this subnet, if the process fails with ``InvalidInput``, that
means other worker created the subnet before and the current one
fails because tries to create the same subnet with the same CIDR.
In this case, we dismiss the exception and continue with the router
creation.

Closes-Bug: #2016198

Change-Id: I82225fcc6248bb0fd68959ceb1daabff423d81ff
",git fetch https://review.opendev.org/openstack/neutron refs/changes/26/881826/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/db/l3_hamode_db.py'],1,0c63d8a154923740adffba2f1fc8afe47be95be3,bug/2016198," project_id = router['project_id'] ha_network = self.get_ha_network(context, project_id) if not ha_network: self._create_ha_network(context, project_id) else: # Check the HA network subnet. As reported in LP#2016198, two # consecutive router creation can try to create the HA network at # the same time. Because the network and subnet creation operations # cannot be executed in the same transaction, it is needed to make # this check before leaving this callback. if self._core_plugin.get_subnet( context, filters={'network_id': ha_network['network_id']}): return try: self._create_ha_subnet(context, ha_network['network_id'], project_id) except n_exc.InvalidInput: # That could happen when the previous method tries to create # the HA subnet with the same CIDR. In this case, dismiss the # exception. pass"," if not self.get_ha_network(context, router['tenant_id']): self._create_ha_network(context, router['tenant_id'])",21,2
openstack%2Fopenstack-ansible-os_glance~892463,openstack/openstack-ansible-os_glance,stable/2023.1,I6967d3832396f375580039c73510ea4f02002b3b,Use proper galera port in configuration,MERGED,2023-08-23 07:26:13.000000000,2023-08-31 14:07:08.000000000,2023-08-31 14:06:04.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-23 07:26:13.000000000', 'files': ['templates/glance-manage.conf.j2', 'templates/glance-api.conf.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_glance/commit/32f729b3674c2de9c5e3adaa9e09f3ac1e6f0c56', 'message': ""Use proper galera port in configuration\n\nWhile <service>_galera_port is defined and used for db_setup\nrole, it's not in fact used in a connection string for oslo.db.\n\nChange-Id: I6967d3832396f375580039c73510ea4f02002b3b\n""}]",2,892463,32f729b3674c2de9c5e3adaa9e09f3ac1e6f0c56,12,3,1,28619,,,0,"Use proper galera port in configuration

While <service>_galera_port is defined and used for db_setup
role, it's not in fact used in a connection string for oslo.db.

Change-Id: I6967d3832396f375580039c73510ea4f02002b3b
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_glance refs/changes/63/892463/1 && git format-patch -1 --stdout FETCH_HEAD,"['templates/glance-manage.conf.j2', 'templates/glance-api.conf.j2']",2,32f729b3674c2de9c5e3adaa9e09f3ac1e6f0c56,cherrypick-osa/db_port-24yhx0eaik,connection = mysql+pymysql://{{ glance_galera_user }}:{{ glance_container_mysql_password }}@{{ glance_galera_address }}:{{ glance_galera_port }}/{{ glance_galera_database }}?charset=utf8{% if glance_galera_use_ssl | bool %}&ssl_verify_cert=true{% if glance_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ glance_galera_ssl_ca_cert }}{% endif %}{% endif +%},connection = mysql+pymysql://{{ glance_galera_user }}:{{ glance_container_mysql_password }}@{{ glance_galera_address }}/{{ glance_galera_database }}?charset=utf8{% if glance_galera_use_ssl | bool %}&ssl_verify_cert=true{% if glance_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ glance_galera_ssl_ca_cert }}{% endif %}{% endif +%},2,2
openstack%2Fneutron~892900,openstack/neutron,stable/wallaby,I5f11b568bab4518617409b7c3a02c7222df80a92,[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN,MERGED,2023-08-28 10:02:22.000000000,2023-08-31 13:54:31.000000000,2023-08-31 13:53:16.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 10:02:22.000000000', 'files': ['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/f6e486ce29350c4b7321650435d9abe9fb0204e7', 'message': ""[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN\n\nConflicts:\n    neutron/common/ovn/extensions.py\n\nCloses-Bug: #2032770\nChange-Id: I5f11b568bab4518617409b7c3a02c7222df80a92\n(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)\n(cherry picked from commit 62ed750a1596c875bb38e0094a553f11a33d29ec)\n""}]",0,892900,f6e486ce29350c4b7321650435d9abe9fb0204e7,10,3,1,16688,,,0,"[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN

Conflicts:
    neutron/common/ovn/extensions.py

Closes-Bug: #2032770
Change-Id: I5f11b568bab4518617409b7c3a02c7222df80a92
(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)
(cherry picked from commit 62ed750a1596c875bb38e0094a553f11a33d29ec)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/00/892900/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py']",2,f6e486ce29350c4b7321650435d9abe9fb0204e7,bug/2032770,"from neutron_lib.api.definitions import uplink_status_propagation uplink_status_propagation.ALIAS,",,9,0
openstack%2Fpuppet-neutron~871077,openstack/puppet-neutron,master,I3a784588435619418cfd51a1ceffd9fd0ecd5e63,Fix wrong bridge name if bridge_mappings is commma-separated string,MERGED,2023-01-19 10:29:19.000000000,2023-08-31 13:46:58.000000000,2023-01-24 17:22:08.000000000,"[{'_account_id': 14985}, {'_account_id': 16137}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-01-19 10:29:19.000000000', 'files': ['spec/classes/neutron_agents_ml2_ovs_spec.rb', 'manifests/agents/ml2/ovs.pp'], 'web_link': 'https://opendev.org/openstack/puppet-neutron/commit/05b043698f1fc7511e3087bea6a4dada515e54a9', 'message': ""Fix wrong bridge name if bridge_mappings is commma-separated string\n\nThis change ensures the value is properly translated to a list even\nif it's a flat string so that the bridge name is properly picked up.\n\nThis also fixes a few wrong assertions done in unit tests.\n\nCloses-Bug: #2003324\nChange-Id: I3a784588435619418cfd51a1ceffd9fd0ecd5e63\n""}]",3,871077,05b043698f1fc7511e3087bea6a4dada515e54a9,14,3,1,9816,,,0,"Fix wrong bridge name if bridge_mappings is commma-separated string

This change ensures the value is properly translated to a list even
if it's a flat string so that the bridge name is properly picked up.

This also fixes a few wrong assertions done in unit tests.

Closes-Bug: #2003324
Change-Id: I3a784588435619418cfd51a1ceffd9fd0ecd5e63
",git fetch https://review.opendev.org/openstack/puppet-neutron refs/changes/77/871077/1 && git format-patch -1 --stdout FETCH_HEAD,"['spec/classes/neutron_agents_ml2_ovs_spec.rb', 'manifests/agents/ml2/ovs.pp']",2,05b043698f1fc7511e3087bea6a4dada515e54a9,bug/2003324, neutron::plugins::ovs::bridge{ $bridge_mappings_real:, neutron::plugins::ovs::bridge{ $bridge_mappings:,52,15
openstack%2Freleases~892955,openstack/releases,master,I1e3d71119f8dd4c689203d1c9e1d2b7c70f36f37,Release final python-novaclient for 2023.2 Bobcat,MERGED,2023-08-28 13:22:31.000000000,2023-08-31 13:42:11.000000000,2023-08-31 12:13:38.000000000,"[{'_account_id': 308}, {'_account_id': 7166}, {'_account_id': 11604}, {'_account_id': 16207}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 34860}]","[{'number': 1, 'created': '2023-08-28 13:22:31.000000000', 'files': ['deliverables/bobcat/python-novaclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/971776c5c1f312c522f7b0ef643b57bec7f4995b', 'message': 'Release final python-novaclient for 2023.2 Bobcat\n\nThis is a release for python-novaclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 18.3.0..e464940f\ne464940f Typo - nova CLI deprecation warning\n67caa104 Update master for stable/2023.1\n\nChange-Id: I1e3d71119f8dd4c689203d1c9e1d2b7c70f36f37\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",11,892955,971776c5c1f312c522f7b0ef643b57bec7f4995b,15,7,1,28522,,,0,"Release final python-novaclient for 2023.2 Bobcat

This is a release for python-novaclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 18.3.0..e464940f
e464940f Typo - nova CLI deprecation warning
67caa104 Update master for stable/2023.1

Change-Id: I1e3d71119f8dd4c689203d1c9e1d2b7c70f36f37
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/55/892955/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-novaclient.yaml'],1,971776c5c1f312c522f7b0ef643b57bec7f4995b,bobcat-milestone-3,releases: - version: 18.4.0 projects: - repo: openstack/python-novaclient hash: e464940f39d1643128c9cef0b92e02c3d0e754c7,,5,0
openstack%2Fopenstack-ansible-os_barbican~892469,openstack/openstack-ansible-os_barbican,stable/2023.1,I707dd7ccaa112cc11c3ee32c3fc8029352c8649a,Use proper galera port in configuration,MERGED,2023-08-23 07:26:21.000000000,2023-08-31 13:40:18.000000000,2023-08-31 13:39:04.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-23 07:26:21.000000000', 'files': ['templates/barbican.conf.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_barbican/commit/622071f51db7dde7b53d565d7f12dbf1e4bb3031', 'message': ""Use proper galera port in configuration\n\nWhile <service>_galera_port is defined and used for db_setup\nrole, it's not in fact used in a connection string for oslo.db.\n\nChange-Id: I707dd7ccaa112cc11c3ee32c3fc8029352c8649a\n""}]",1,892469,622071f51db7dde7b53d565d7f12dbf1e4bb3031,10,3,1,28619,,,0,"Use proper galera port in configuration

While <service>_galera_port is defined and used for db_setup
role, it's not in fact used in a connection string for oslo.db.

Change-Id: I707dd7ccaa112cc11c3ee32c3fc8029352c8649a
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_barbican refs/changes/69/892469/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/barbican.conf.j2'],1,622071f51db7dde7b53d565d7f12dbf1e4bb3031,cherrypick-osa/db_port-24yhx0eaik,sql_connection = mysql+pymysql://{{ barbican_galera_user }}:{{ barbican_galera_password }}@{{ barbican_galera_address }}:{{ barbican_galera_port }}/{{ barbican_galera_database }}?charset=utf8{% if barbican_galera_use_ssl | bool %}&ssl_verify_cert=true{% if barbican_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ barbican_galera_ssl_ca_cert }}{% endif %}{% endif +%},sql_connection = mysql+pymysql://{{ barbican_galera_user }}:{{ barbican_galera_password }}@{{ barbican_galera_address }}/{{ barbican_galera_database }}?charset=utf8{% if barbican_galera_use_ssl | bool %}&ssl_verify_cert=true{% if barbican_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ barbican_galera_ssl_ca_cert }}{% endif %}{% endif +%},1,1
openstack%2Fneutron~881742,openstack/neutron,master,Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e,Use the new network HA parameter,MERGED,2023-04-27 16:08:31.000000000,2023-08-31 13:39:02.000000000,2023-08-29 03:34:52.000000000,"[{'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 5948}, {'_account_id': 6773}, {'_account_id': 8313}, {'_account_id': 9531}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 32586}, {'_account_id': 34271}]","[{'number': 1, 'created': '2023-04-27 16:08:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f6edbfd2d8503c7de4bb53dfb9906a842bd19ad1', 'message': '[WIP] Use the new network HA parameter\n\nTODO: testing\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nDepends-On: https://review.opendev.org/c/openstack/neutron-lib/+/881734\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 2, 'created': '2023-04-27 16:38:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/25312e83993e5a98b28193d90f967b491ea39fcf', 'message': '[WIP] Use the new network HA parameter\n\nTODO: testing\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nDepends-On: https://review.opendev.org/c/openstack/neutron-lib/+/881734\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 3, 'created': '2023-04-28 10:53:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/cc3c66775ed80de9cf394e980336f173ef5df399', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nDepends-On: https://review.opendev.org/c/openstack/neutron-lib/+/881734\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 4, 'created': '2023-04-28 11:06:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/bc6724de37a26615efcbe8f1fd536fcf37b4cb5e', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nDepends-On: https://review.opendev.org/c/openstack/neutron-lib/+/881734\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 5, 'created': '2023-04-28 16:23:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/238ad5474ef8a39303fd349349872148203248ed', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nDepends-On: https://review.opendev.org/c/openstack/neutron-lib/+/881734\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 6, 'created': '2023-05-03 08:47:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/aa545f177ae2ccf1654b649c5b2da564aa52c26a', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 7, 'created': '2023-05-03 09:15:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/eedcb0b74770f20aa4acccc904f08ac53d2be0d4', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 8, 'created': '2023-05-03 10:32:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/5fa446084226ffe89b97d4cbce734a552f7ce9e4', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 9, 'created': '2023-05-03 11:43:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/f46a60892b3ca836b658c1009834e618aa5660ac', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 10, 'created': '2023-05-08 08:11:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a8bbbfc5ef31b2b89e037f8d371068358e7984fe', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 11, 'created': '2023-05-08 09:41:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/978f752f7f881a1f73c1dde4c80f682b83a96354', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 12, 'created': '2023-05-17 10:50:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8db03715206a954968970bebcfc33b28a6f9f36a', 'message': 'Use the new network HA parameter\n\nThis patch implementes the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 13, 'created': '2023-06-05 11:18:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/868af9e2b20fc0b9aa3b7decaef0196118140baa', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 14, 'created': '2023-06-15 16:45:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/9fdf2e68d58608fa698b77b5f68379938d95e634', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 15, 'created': '2023-06-21 10:57:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/2e9f217438c4a4d4b3b9aa8aceaaf3e7310978d3', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nOnce https://review.opendev.org/c/openstack/neutron-lib/+/881734 is\nmerged and released, the API definition file will be imported from\nneutron-lib.\n\nPartial-Bug: #2016198\n\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 16, 'created': '2023-06-26 14:00:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/a399a4d794f41de1c4ad5572a9a60c71fd67470b', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nPartial-Bug: #2016198\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 17, 'created': '2023-07-04 10:58:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/42a565a4b13685b7d06d2e94635d785fc5bfa7e7', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nPartial-Bug: #2016198\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 18, 'created': '2023-07-20 10:05:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/90e040c9483b8948ab6ec813ac722f7fe2eb73f7', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nPartial-Bug: #2016198\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 19, 'created': '2023-07-20 14:23:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ef91e1a9878267526de9cc57c754193507413bab', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nPartial-Bug: #2016198\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}, {'number': 20, 'created': '2023-08-25 08:43:37.000000000', 'files': ['releasenotes/notes/network_ha_extension-99578e7ee47f47db.yaml', 'requirements.txt', 'neutron/db/l3_hamode_db.py', 'neutron/tests/unit/plugins/ml2/drivers/l2pop/test_mech_driver.py', 'neutron/tests/functional/scheduler/test_l3_agent_scheduler.py', 'neutron/services/l3_router/l3_router_plugin.py', 'neutron/tests/unit/scheduler/test_l3_agent_scheduler.py', 'neutron/common/ovn/extensions.py', 'neutron/tests/unit/db/test_l3_hamode_db.py', 'neutron/extensions/network_ha.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/4109ee9bb44a1dbaf520c6bdb051c8f63328e23f', 'message': 'Use the new network HA parameter\n\nThis patch implements the new network HA boolean field API extension.\nThis field is an input only parameter for POST operations (creation).\nBy default is ""False"". When enabled, the Neutron server will create\na ``ha_router_networks`` register in the same transaction of the\nnetwork creation.\n\nIf by any circumstance (a race condition, for example), another\n``ha_router_networks`` exists in the same project, a\n``DBDuplicateEntry`` exception will be raised and the transaction\nwill be rolled back.\n\nPartial-Bug: #2016198\nChange-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e\n'}]",38,881742,4109ee9bb44a1dbaf520c6bdb051c8f63328e23f,127,12,20,16688,,,0,"Use the new network HA parameter

This patch implements the new network HA boolean field API extension.
This field is an input only parameter for POST operations (creation).
By default is ""False"". When enabled, the Neutron server will create
a ``ha_router_networks`` register in the same transaction of the
network creation.

If by any circumstance (a race condition, for example), another
``ha_router_networks`` exists in the same project, a
``DBDuplicateEntry`` exception will be raised and the transaction
will be rolled back.

Partial-Bug: #2016198
Change-Id: Ie42c13ecbe4abcad9229b71f6942e393fd0f2e4e
",git fetch https://review.opendev.org/openstack/neutron refs/changes/42/881742/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/db/l3_hamode_db.py', 'neutron/extensions/network_ha.py', 'neutron/plugins/ml2/plugin.py']",3,f6edbfd2d8503c7de4bb53dfb9906a842bd19ad1,bug/2016198,"from neutron_lib.api.definitions import network_ha as nha_def nha_def.ALIAS,",,38,26
openstack%2Fopenstack-ansible-os_blazar~892465,openstack/openstack-ansible-os_blazar,stable/2023.1,I753c328569e1ee6d69a0ad2168b6493a3c7438f9,Use proper galera port in configuration,MERGED,2023-08-23 07:26:20.000000000,2023-08-31 13:37:49.000000000,2023-08-31 13:36:50.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-23 07:26:20.000000000', 'files': ['templates/blazar.conf.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_blazar/commit/35b17e66da0e4a0bfa030976db2358164c8c587d', 'message': ""Use proper galera port in configuration\n\nWhile <service>_galera_port is defined and used for db_setup\nrole, it's not in fact used in a connection string for oslo.db.\n\nChange-Id: I753c328569e1ee6d69a0ad2168b6493a3c7438f9\n""}]",2,892465,35b17e66da0e4a0bfa030976db2358164c8c587d,12,3,1,28619,,,0,"Use proper galera port in configuration

While <service>_galera_port is defined and used for db_setup
role, it's not in fact used in a connection string for oslo.db.

Change-Id: I753c328569e1ee6d69a0ad2168b6493a3c7438f9
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_blazar refs/changes/65/892465/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/blazar.conf.j2'],1,35b17e66da0e4a0bfa030976db2358164c8c587d,cherrypick-osa/db_port-24yhx0eaik,connection = mysql+pymysql://{{ blazar_galera_user }}:{{ blazar_container_mysql_password }}@{{ blazar_galera_address }}:{{ blazar_galera_port }}/{{ blazar_galera_database }}?charset=utf8{% if blazar_galera_use_ssl | bool %}&ssl_verify_cert=true{% if blazar_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ blazar_galera_ssl_ca_cert }}{% endif %}{% endif +%},connection = mysql+pymysql://{{ blazar_galera_user }}:{{ blazar_container_mysql_password }}@{{ blazar_galera_address }}/{{ blazar_galera_database }}?charset=utf8{% if blazar_galera_use_ssl | bool %}&ssl_verify_cert=true{% if blazar_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ blazar_galera_ssl_ca_cert }}{% endif %}{% endif +%},1,1
openstack%2Fopenstack-ansible-os_murano~892360,openstack/openstack-ansible-os_murano,stable/2023.1,I3b0657b8d3b062eb6c8af44f0905066dba150a88,Use proper galera port in configuration,MERGED,2023-08-23 07:26:13.000000000,2023-08-31 13:37:46.000000000,2023-08-31 13:36:43.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-23 07:26:13.000000000', 'files': ['templates/murano.conf.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_murano/commit/9e630ff3998eac9c9238aa71c7607372f0a2a635', 'message': ""Use proper galera port in configuration\n\nWhile <service>_galera_port is defined and used for db_setup\nrole, it's not in fact used in a connection string for oslo.db.\n\nChange-Id: I3b0657b8d3b062eb6c8af44f0905066dba150a88\n""}]",1,892360,9e630ff3998eac9c9238aa71c7607372f0a2a635,10,3,1,28619,,,0,"Use proper galera port in configuration

While <service>_galera_port is defined and used for db_setup
role, it's not in fact used in a connection string for oslo.db.

Change-Id: I3b0657b8d3b062eb6c8af44f0905066dba150a88
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_murano refs/changes/60/892360/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/murano.conf.j2'],1,9e630ff3998eac9c9238aa71c7607372f0a2a635,cherrypick-osa/db_port-24yhx0eaik,connection = mysql+pymysql://{{ murano_galera_user }}:{{ murano_galera_password }}@{{ murano_galera_address }}:{{ murano_galera_port }}/{{ murano_galera_database }}?charset=utf8{% if murano_galera_use_ssl | bool %}&ssl_verify_cert=true{% if murano_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ murano_galera_ssl_ca_cert }}{% endif %}{% endif +%},connection = mysql+pymysql://{{ murano_galera_user }}:{{ murano_galera_password }}@{{ murano_galera_address }}/{{ murano_galera_database }}?charset=utf8{% if murano_galera_use_ssl | bool %}&ssl_verify_cert=true{% if murano_galera_ssl_ca_cert | length > 0 %}&ssl_ca={{ murano_galera_ssl_ca_cert }}{% endif %}{% endif +%},1,1
openstack%2Freleases~885365,openstack/releases,master,I7734344c6696e0f44a8557cf537e64a215fff88a,EOL Nova stable/train release,MERGED,2023-06-06 15:16:23.000000000,2023-08-31 13:37:11.000000000,2023-08-31 13:37:11.000000000,"[{'_account_id': 4393}, {'_account_id': 7166}, {'_account_id': 8556}, {'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 16207}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 34860}]","[{'number': 1, 'created': '2023-06-06 15:16:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/5b3c1afe48529a3a99d69d03e7972ecb7d0e1c04', 'message': 'EOL Nova stable/train release\n\nAs discussed in the ML [1], we want to EOL stable/train due to some CVE fixes\nnot backported.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2023-May/033833.html\n\nChange-Id: I7734344c6696e0f44a8557cf537e64a215fff88a\n'}, {'number': 2, 'created': '2023-07-07 12:49:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/3fe85c09cd040462d7ac70f51d1954e54ffab94c', 'message': 'EOL Nova stable/train release\n\nAs discussed in the ML [1], we want to EOL stable/train due to some CVE fixes\nnot backported.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2023-May/033833.html\n\nChange-Id: I7734344c6696e0f44a8557cf537e64a215fff88a\n'}, {'number': 3, 'created': '2023-07-19 11:24:18.000000000', 'files': ['deliverables/train/placement.yaml', 'deliverables/train/os-vif.yaml', 'deliverables/train/osc-placement.yaml', 'deliverables/train/python-novaclient.yaml', 'deliverables/train/nova.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/450362a50919c4b4a9741c8324f2caf1d2a88424', 'message': 'EOL Nova stable/train release\n\nAs discussed in the ML [1], we want to EOL stable/train due to some CVE fixes\nnot backported.\n\n[1] https://lists.openstack.org/pipermail/openstack-discuss/2023-May/033833.html\n\nChange-Id: I7734344c6696e0f44a8557cf537e64a215fff88a\n'}]",15,885365,450362a50919c4b4a9741c8324f2caf1d2a88424,29,10,3,7166,,,0,"EOL Nova stable/train release

As discussed in the ML [1], we want to EOL stable/train due to some CVE fixes
not backported.

[1] https://lists.openstack.org/pipermail/openstack-discuss/2023-May/033833.html

Change-Id: I7734344c6696e0f44a8557cf537e64a215fff88a
",git fetch https://review.opendev.org/openstack/releases refs/changes/65/885365/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/train/nova.yaml'],1,5b3c1afe48529a3a99d69d03e7972ecb7d0e1c04,nova_train_eol, - version: train-eol projects: - repo: openstack/nova hash: 8a24acd9240f2a2705ccd979577e0e2338a238ef,,4,0
openstack%2Freleases~892931,openstack/releases,master,If3d6894a0ddf168fbdc645870c347777c27062b4,Release final osc-placement for 2023.2 Bobcat,MERGED,2023-08-28 13:10:18.000000000,2023-08-31 13:32:49.000000000,2023-08-31 13:32:49.000000000,"[{'_account_id': 7166}, {'_account_id': 16207}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 34860}]","[{'number': 1, 'created': '2023-08-28 13:10:18.000000000', 'files': ['deliverables/bobcat/osc-placement.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/1fccdfa3f44d06a191dba9141ce245a92c5926ed', 'message': 'Release final osc-placement for 2023.2 Bobcat\n\nThis is a release for osc-placement to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 4.1.0..ffa3822\nffa3822 Update master for stable/2023.1\n\nChange-Id: If3d6894a0ddf168fbdc645870c347777c27062b4\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",3,892931,1fccdfa3f44d06a191dba9141ce245a92c5926ed,9,6,1,28522,,,0,"Release final osc-placement for 2023.2 Bobcat

This is a release for osc-placement to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 4.1.0..ffa3822
ffa3822 Update master for stable/2023.1

Change-Id: If3d6894a0ddf168fbdc645870c347777c27062b4
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/31/892931/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/osc-placement.yaml'],1,1fccdfa3f44d06a191dba9141ce245a92c5926ed,bobcat-milestone-3,releases: - version: 4.2.0 projects: - repo: openstack/osc-placement hash: ffa3822bc8fa912e0dda1d6433536c0a438fb632,,5,0
openstack%2Freleases~889429,openstack/releases,master,If60cd5a902b0d99b4f8ea5776b8c89f2302476d0,[Yoga] Release cinderlib,ABANDONED,2023-07-25 14:22:01.000000000,2023-08-31 13:31:50.000000000,,"[{'_account_id': 9236}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 27615}]","[{'number': 1, 'created': '2023-07-25 14:22:01.000000000', 'files': ['deliverables/yoga/cinderlib.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/124fa81c952d8272d5d58287eb703a57257e8ada', 'message': ""[Yoga] Release cinderlib\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 4.2.0..4f8a6a5\n4f8a6a5 Update deprecated zuul syntax\n29ee063 Don't use yum to install ceph\n5f690e0 Update .gitreview for stable/yoga\n\nChange-Id: If60cd5a902b0d99b4f8ea5776b8c89f2302476d0\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n""}]",1,889429,124fa81c952d8272d5d58287eb703a57257e8ada,4,4,1,28522,,,0,"[Yoga] Release cinderlib

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 4.2.0..4f8a6a5
4f8a6a5 Update deprecated zuul syntax
29ee063 Don't use yum to install ceph
5f690e0 Update .gitreview for stable/yoga

Change-Id: If60cd5a902b0d99b4f8ea5776b8c89f2302476d0
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/29/889429/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/cinderlib.yaml'],1,124fa81c952d8272d5d58287eb703a57257e8ada,yoga-convenience-before-em, - version: 4.2.1 projects: - repo: openstack/cinderlib hash: 4f8a6a5e6200e0f84b4bc4bf96487e8b65d97edc,,4,0
openstack%2Freleases~889474,openstack/releases,master,Ia80f22b527489379d30cdaaa305231c113bc8f85,[Yoga] Release kuryr-libnetwork,ABANDONED,2023-07-25 14:59:03.000000000,2023-08-31 13:31:37.000000000,,"[{'_account_id': 13692}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-07-25 14:59:03.000000000', 'files': ['deliverables/yoga/kuryr-libnetwork.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/5f5b7db53d5a40a7a34cb69b30cbb97ce3e7e076', 'message': '[Yoga] Release kuryr-libnetwork\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 9.0.0..4907800\n4907800 Fix the bindir path\n2832521 Update TOX_CONSTRAINTS_FILE for stable/yoga\n7b0529d Update .gitreview for stable/yoga\n\nChange-Id: Ia80f22b527489379d30cdaaa305231c113bc8f85\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",2,889474,5f5b7db53d5a40a7a34cb69b30cbb97ce3e7e076,8,3,1,28522,,,0,"[Yoga] Release kuryr-libnetwork

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 9.0.0..4907800
4907800 Fix the bindir path
2832521 Update TOX_CONSTRAINTS_FILE for stable/yoga
7b0529d Update .gitreview for stable/yoga

Change-Id: Ia80f22b527489379d30cdaaa305231c113bc8f85
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/74/889474/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/kuryr-libnetwork.yaml'],1,5f5b7db53d5a40a7a34cb69b30cbb97ce3e7e076,yoga-convenience-before-em, - version: 9.0.1 projects: - repo: openstack/kuryr-libnetwork hash: 49078002d6575ec6ba4121c3b3fe8d6517ba36e3,,4,0
openstack%2Freleases~886978,openstack/releases,master,I3a9918cd27556477022aa35029911eee45fbdc9d,kolla: Mark kolla/kolla-ansible/kayobe wallaby EOL,MERGED,2023-06-26 10:42:46.000000000,2023-08-31 13:31:30.000000000,2023-08-31 13:31:30.000000000,"[{'_account_id': 308}, {'_account_id': 13252}, {'_account_id': 14826}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23084}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-06-26 10:42:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/a46c9d7a4e3810e0ab8c2db288e10e81c9d2c476', 'message': 'kolla: Mark kolla/kolla-ansible/kayobe wallaby EOL\n\nChange-Id: I3a9918cd27556477022aa35029911eee45fbdc9d\n'}, {'number': 2, 'created': '2023-06-27 20:20:24.000000000', 'files': ['deliverables/wallaby/kolla.yaml', 'deliverables/wallaby/kayobe.yaml', 'deliverables/wallaby/kolla-ansible.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/33e26c95eaea9f68d5df62893aa12e68cf0efa5e', 'message': 'kolla: Mark kolla/kolla-ansible/kayobe wallaby EOL\n\nChange-Id: I3a9918cd27556477022aa35029911eee45fbdc9d\n'}]",3,886978,33e26c95eaea9f68d5df62893aa12e68cf0efa5e,15,7,2,22629,,,0,"kolla: Mark kolla/kolla-ansible/kayobe wallaby EOL

Change-Id: I3a9918cd27556477022aa35029911eee45fbdc9d
",git fetch https://review.opendev.org/openstack/releases refs/changes/78/886978/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/wallaby/kolla.yaml', 'deliverables/wallaby/kayobe.yaml', 'deliverables/wallaby/kolla-ansible.yaml']",3,a46c9d7a4e3810e0ab8c2db288e10e81c9d2c476,, - version: wallaby-eol projects: - repo: openstack/kolla-ansible hash: 69179ea9b1b37fd881acb467e775d24b19adfe61,,16,0
openstack%2Freleases~889497,openstack/releases,master,Idbc88c3c202259c1219ea3229209d9128d2c9328,[Yoga] Release monasca-notification,ABANDONED,2023-07-25 15:14:00.000000000,2023-08-31 13:30:49.000000000,,"[{'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 35988}]","[{'number': 1, 'created': '2023-07-25 15:14:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/5ae98066ee2893d4b79202848f89232c549737d6', 'message': '[Yoga] Release monasca-notification\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 6.0.0..50dac47\n50dac47 Drop lower-constraints.txt and its testing\n4d98249 Set upper-constraints redirection URL\n481df37 Update TOX_CONSTRAINTS_FILE for stable/yoga\n9ab4162 Update .gitreview for stable/yoga\n\nChange-Id: Idbc88c3c202259c1219ea3229209d9128d2c9328\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 2, 'created': '2023-07-28 13:19:23.000000000', 'files': ['deliverables/yoga/monasca-notification.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/7fdd1c09ae2220bca0c505cc25aef77a0d0e0f7f', 'message': '[Yoga] Release monasca-notification\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 6.0.0..50dac47\n50dac47 Drop lower-constraints.txt and its testing\n4d98249 Set upper-constraints redirection URL\n481df37 Update TOX_CONSTRAINTS_FILE for stable/yoga\n9ab4162 Update .gitreview for stable/yoga\n\nChange-Id: Idbc88c3c202259c1219ea3229209d9128d2c9328\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",2,889497,7fdd1c09ae2220bca0c505cc25aef77a0d0e0f7f,6,3,2,28522,,,0,"[Yoga] Release monasca-notification

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 6.0.0..50dac47
50dac47 Drop lower-constraints.txt and its testing
4d98249 Set upper-constraints redirection URL
481df37 Update TOX_CONSTRAINTS_FILE for stable/yoga
9ab4162 Update .gitreview for stable/yoga

Change-Id: Idbc88c3c202259c1219ea3229209d9128d2c9328
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/97/889497/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/monasca-notification.yaml'],1,5ae98066ee2893d4b79202848f89232c549737d6,yoga-convenience-before-em, - version: 6.0.1 projects: - repo: openstack/monasca-notification hash: 50dac47ff801b784b9ad3cb701f6c9b04d0fa350release-notes: https://docs.openstack.org/releasenotes/monasca-notification/yoga.html,release-notes: https://docs.openstack.org/releasenotes/monasca-notification/yoga.html,6,1
openstack%2Fneutron~893143,openstack/neutron,stable/xena,Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a,[OVN] Cleanup old Hash Ring node entries,MERGED,2023-08-30 10:34:29.000000000,2023-08-31 13:29:50.000000000,2023-08-31 13:27:32.000000000,"[{'_account_id': 1131}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:34:29.000000000', 'files': ['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/98a1476ed88027ea6b88515163428fae9663c776', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)\n""}]",5,893143,98a1476ed88027ea6b88515163428fae9663c776,24,3,1,6773,,,0,"[OVN] Cleanup old Hash Ring node entries

This patch introduces a maintenance task that runs once a day and is
responsible for cleaning up Hash Ring nodes that haven't been updated in
5 days or more.

Change-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a
Closes-Bug: #2033281
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/43/893143/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py']",4,98a1476ed88027ea6b88515163428fae9663c776,," @periodics.periodic(spacing=86400, run_immediately=True) def cleanup_old_hash_ring_nodes(self): """"""Daily task to cleanup old stable Hash Ring node entries. Runs once a day and clean up Hash Ring entries that haven't been updated in more than 5 days. See LP #2033281 for more information. """""" if not self.has_lock: return context = n_context.get_admin_context() hash_ring_db.cleanup_old_nodes(context, days=5) ",,55,0
openstack%2Fneutron~892898,openstack/neutron,stable/yoga,I5f11b568bab4518617409b7c3a02c7222df80a92,[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN,MERGED,2023-08-28 10:01:40.000000000,2023-08-31 13:29:02.000000000,2023-08-31 13:27:23.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 10:01:40.000000000', 'files': ['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/62ed750a1596c875bb38e0094a553f11a33d29ec', 'message': ""[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN\n\nConflicts:\n    neutron/common/ovn/extensions.py\n\nCloses-Bug: #2032770\nChange-Id: I5f11b568bab4518617409b7c3a02c7222df80a92\n(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)\n""}]",0,892898,62ed750a1596c875bb38e0094a553f11a33d29ec,9,3,1,16688,,,0,"[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN

Conflicts:
    neutron/common/ovn/extensions.py

Closes-Bug: #2032770
Change-Id: I5f11b568bab4518617409b7c3a02c7222df80a92
(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/98/892898/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py']",2,62ed750a1596c875bb38e0094a553f11a33d29ec,bug/2032770,"from neutron_lib.api.definitions import uplink_status_propagation uplink_status_propagation.ALIAS,",,9,0
openstack%2Fneutron~892899,openstack/neutron,stable/xena,I5f11b568bab4518617409b7c3a02c7222df80a92,[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN,MERGED,2023-08-28 10:02:03.000000000,2023-08-31 13:28:50.000000000,2023-08-31 13:27:27.000000000,"[{'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 10:02:03.000000000', 'files': ['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/5e8a6b1add51f06e9a360f186c5921c460070624', 'message': ""[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN\n\nConflicts:\n    neutron/common/ovn/extensions.py\n\nCloses-Bug: #2032770\nChange-Id: I5f11b568bab4518617409b7c3a02c7222df80a92\n(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)\n(cherry picked from commit 62ed750a1596c875bb38e0094a553f11a33d29ec)\n""}]",0,892899,5e8a6b1add51f06e9a360f186c5921c460070624,9,3,1,16688,,,0,"[OVN] Add the 'uplink-status-propagation' extension to ML2/OVN

Conflicts:
    neutron/common/ovn/extensions.py

Closes-Bug: #2032770
Change-Id: I5f11b568bab4518617409b7c3a02c7222df80a92
(cherry picked from commit 0545f40a0401629e68561a54e4a576a9fb15f7fc)
(cherry picked from commit 62ed750a1596c875bb38e0094a553f11a33d29ec)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/99/892899/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovn-add-extension-uplink-status-propagation-4c232954f8b4f0ef.yaml', 'neutron/common/ovn/extensions.py']",2,5e8a6b1add51f06e9a360f186c5921c460070624,bug/2032770,"from neutron_lib.api.definitions import uplink_status_propagation uplink_status_propagation.ALIAS,",,9,0
openstack%2Fcharm-guide~893228,openstack/charm-guide,master,I32dcda326733563e18d9960564988153bea6bacb,Release note for unify nova-compute Ceph credentials,MERGED,2023-08-30 16:46:57.000000000,2023-08-31 13:18:54.000000000,2023-08-31 13:17:54.000000000,"[{'_account_id': 2424}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 16:46:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/80e2ae8fe9c8eb28fb8e2ccb9cffd0aa643e8f45', 'message': 'Add reno about LP#2028559\n\nChange-Id: I32dcda326733563e18d9960564988153bea6bacb\n'}, {'number': 2, 'created': '2023-08-30 16:47:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/15d3335bc1328dba1e1bf349abd2a8ea3cbfffeb', 'message': 'Add reno about LP#2028559\n\nChange-Id: I32dcda326733563e18d9960564988153bea6bacb\n'}, {'number': 3, 'created': '2023-08-30 16:48:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/d786d98f6115ed2637058aec9008f9991c363af2', 'message': 'Add reno about LP#2028559\n\nRelated-bug: #2028559\nChange-Id: I32dcda326733563e18d9960564988153bea6bacb\n'}, {'number': 4, 'created': '2023-08-30 18:18:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/c7b5327a37226818590e8bf8c3dea3537d7c4acf', 'message': 'Add reno about LP#2028559\n\nRelated-bug: #2028559\nChange-Id: I32dcda326733563e18d9960564988153bea6bacb\n'}, {'number': 5, 'created': '2023-08-31 12:46:24.000000000', 'files': ['doc/source/release-notes/2023.2-bobcat.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/e4539bb2053893d48a02fe767fffc6425a2b1d28', 'message': 'Release note for unify nova-compute Ceph credentials\n\nCloses-bug: #2028559\nChange-Id: I32dcda326733563e18d9960564988153bea6bacb\n'}]",4,893228,e4539bb2053893d48a02fe767fffc6425a2b1d28,15,2,5,14567,,,0,"Release note for unify nova-compute Ceph credentials

Closes-bug: #2028559
Change-Id: I32dcda326733563e18d9960564988153bea6bacb
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/28/893228/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/release-notes/2023.2-bobcat.rst'],1,80e2ae8fe9c8eb28fb8e2ccb9cffd0aa643e8f45,,"Adjust ceph credentials to be the same across nova-compute apps ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ When using the config libvirt-image-backend=rbd, VMs created from image have their disk data stored in ceph instead of the compute node itself. When performing live-migrations, both nodes need to access the same ceph credentials to access the VM's disk in ceph. Previously, each nova-compute charm app had a different credential according to the app name. Now every nova-compute charm app uses the ``nova-compute`` ceph credential. Upon performing the upgrade, any previously running VM will continue to use the old credential until fully stopped and then started to refresh the libvirt XML for the VM. While using the old credentials, the VMs can still continue to operate without disruption and can be live-migrated to nodes pertaning to the same nova-compute charm app. The old credential file remains alongside the new one in the nova-compute node and is not cleaned up until the relation between nova-compute and ceph-mon is removed. For more details see bug `LP #2028559`_. .. _LP #2028559: https://bugs.launchpad.net/charm-nova-compute/+bug/2028559",,29,0
openstack%2Fkayobe~893205,openstack/kayobe,stable/wallaby,I341075115442a38c327e3ade74b81b1b9e7e85c6,Speed up calls to Bifrost,ABANDONED,2023-08-30 14:34:20.000000000,2023-08-31 13:09:03.000000000,,"[{'_account_id': 14200}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 14:34:20.000000000', 'files': ['ansible/overcloud-hardware-inspect.yml', 'ansible/overcloud-bios-raid.yml', 'ansible/overcloud-provision.yml', 'ansible/overcloud-deprovision.yml', 'ansible/overcloud-introspection-data-save.yml', 'releasenotes/notes/bifrost-speedup-9902552b86150ad4.yaml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/18b5fa92d6bc9f616e922bdb793464c3190e2e92', 'message': ""Speed up calls to Bifrost\n\nFor overcloud commands involving Bifrost (e.g. overcloud provision), we\nuse the Bifrost dynamic inventory. This runs bifrost_inventory.py which\ngathers node and port information for all bare metal hosts. Because this\ngets executed for each node in our inventory, it produces a large number\nof API requests to Ironic, which grows as the number of hosts increases.\n\nHalve the number of calls using the BIFROST_NODE_NAMES environment\nvariable, which restricts fetching port information to just the node\nbeing queried. bifrost_inventory.py still performs one call for each\nnode, which must be fixed separately in Bifrost [1].\n\nTime to query overcloud nodes' hardware introspection data for 44 hosts:\n\n* before patch: 823 seconds\n* after patch: 415 seconds\n\nWith the patch to Bifrost [1], this is further reduced to 46 seconds.\n\n[1] https://review.opendev.org/c/openstack/bifrost/+/882950\n\nChange-Id: I341075115442a38c327e3ade74b81b1b9e7e85c6\n(cherry picked from commit 3e03884c476604a717c1fa5fb35771f60e39dd8f)\n""}]",1,893205,18b5fa92d6bc9f616e922bdb793464c3190e2e92,5,2,1,15197,,,0,"Speed up calls to Bifrost

For overcloud commands involving Bifrost (e.g. overcloud provision), we
use the Bifrost dynamic inventory. This runs bifrost_inventory.py which
gathers node and port information for all bare metal hosts. Because this
gets executed for each node in our inventory, it produces a large number
of API requests to Ironic, which grows as the number of hosts increases.

Halve the number of calls using the BIFROST_NODE_NAMES environment
variable, which restricts fetching port information to just the node
being queried. bifrost_inventory.py still performs one call for each
node, which must be fixed separately in Bifrost [1].

Time to query overcloud nodes' hardware introspection data for 44 hosts:

* before patch: 823 seconds
* after patch: 415 seconds

With the patch to Bifrost [1], this is further reduced to 46 seconds.

[1] https://review.opendev.org/c/openstack/bifrost/+/882950

Change-Id: I341075115442a38c327e3ade74b81b1b9e7e85c6
(cherry picked from commit 3e03884c476604a717c1fa5fb35771f60e39dd8f)
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/05/893205/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/overcloud-hardware-inspect.yml', 'ansible/overcloud-bios-raid.yml', 'ansible/overcloud-provision.yml', 'ansible/overcloud-deprovision.yml', 'ansible/overcloud-introspection-data-save.yml', 'releasenotes/notes/bifrost-speedup-9902552b86150ad4.yaml']",6,18b5fa92d6bc9f616e922bdb793464c3190e2e92,bifrost-speedup-stable/wallaby,--- fixes: - | Improves performance of Bifrost operations by preventing unnecessary requests to the Ironic API. ,,19,1
openstack%2Fkayobe~883263,openstack/kayobe,master,I201faf14da5d143670250052ab15fc285f24868c,Fix firewalld configuration for monitoring hosts,MERGED,2023-05-16 13:58:09.000000000,2023-08-31 12:34:32.000000000,2023-08-31 12:33:28.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 35263}]","[{'number': 1, 'created': '2023-05-16 13:58:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/dca2079ac89567939efe644493219806821d8406', 'message': 'Fix firewalld configuration for monitoring hosts\n\nThere was a stray double quote in the firewalld config for monitoring\nhosts, resulting in the following error when firewalld is enabled:\n\n  ValueError: No closing quotation\n\nCloses-Bug: 2019867\nChange-Id: I201faf14da5d143670250052ab15fc285f24868c\n'}, {'number': 2, 'created': '2023-07-26 13:17:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/5b6105a7b18e6dbf1ab266276cf53d0ddf6b7cc6', 'message': 'Fix firewalld configuration for monitoring hosts\n\nThere was a stray double quote in the firewalld config for monitoring\nhosts, resulting in the following error when firewalld is enabled:\n\n  ValueError: No closing quotation\n\nCloses-Bug: 2019867\nChange-Id: I201faf14da5d143670250052ab15fc285f24868c\n'}, {'number': 3, 'created': '2023-08-24 12:42:14.000000000', 'files': ['ansible/inventory/group_vars/monitoring/firewall'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/b7e95c83d3ea22bdccb5a5440e677c8a36f4cf61', 'message': 'Fix firewalld configuration for monitoring hosts\n\nThere was a stray double quote in the firewalld config for monitoring\nhosts, resulting in the following error when firewalld is enabled:\n\n  ValueError: No closing quotation\n\nCloses-Bug: 2019867\nChange-Id: I201faf14da5d143670250052ab15fc285f24868c\n'}]",3,883263,b7e95c83d3ea22bdccb5a5440e677c8a36f4cf61,26,5,3,14826,,,0,"Fix firewalld configuration for monitoring hosts

There was a stray double quote in the firewalld config for monitoring
hosts, resulting in the following error when firewalld is enabled:

  ValueError: No closing quotation

Closes-Bug: 2019867
Change-Id: I201faf14da5d143670250052ab15fc285f24868c
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/63/883263/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/inventory/group_vars/monitoring/firewall'],1,dca2079ac89567939efe644493219806821d8406,, monitoring_firewalld_default_zone }} monitoring_firewalld_rules }}," monitoring_firewalld_default_zone }}"" monitoring_firewalld_rules }}""",2,2
openstack%2Freleases~893274,openstack/releases,master,I406449c54c58515045e75233a9ed6c8189c75b76,Release ironic-ui for bobcat,MERGED,2023-08-30 18:55:14.000000000,2023-08-31 12:31:19.000000000,2023-08-31 12:31:19.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 18:55:14.000000000', 'files': ['deliverables/bobcat/ironic-ui.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e9af081b35ba84163a935b838f9b1f21501e01af', 'message': 'Release ironic-ui for bobcat\n\nChange-Id: I406449c54c58515045e75233a9ed6c8189c75b76\n'}]",6,893274,e9af081b35ba84163a935b838f9b1f21501e01af,13,6,1,10342,,,0,"Release ironic-ui for bobcat

Change-Id: I406449c54c58515045e75233a9ed6c8189c75b76
",git fetch https://review.opendev.org/openstack/releases refs/changes/74/893274/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/ironic-ui.yaml'],1,e9af081b35ba84163a935b838f9b1f21501e01af,,releases: - version: 6.2.0 projects: - repo: openstack/ironic-ui hash: 93ca4f46d2f6084f9eaef31f7f5e19cc36ff3ebd,,5,0
openstack%2Freleases~893268,openstack/releases,master,I3d1f7546b4ccd37df1e868d1651349b62118c7d0,Release bifrost for bobcat,MERGED,2023-08-30 18:45:42.000000000,2023-08-31 12:27:42.000000000,2023-08-31 12:27:42.000000000,"[{'_account_id': 308}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 18:45:42.000000000', 'files': ['deliverables/bobcat/bifrost.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/6a1c94bc60fc76dadaa35a02bb176c299c19d47e', 'message': 'Release bifrost for bobcat\n\nChose a major version bump since this marks the end of upstream testing\nfor Fedora-based bifrost installs.\n\nChange-Id: I3d1f7546b4ccd37df1e868d1651349b62118c7d0\n'}]",1,893268,6a1c94bc60fc76dadaa35a02bb176c299c19d47e,8,5,1,10342,,,0,"Release bifrost for bobcat

Chose a major version bump since this marks the end of upstream testing
for Fedora-based bifrost installs.

Change-Id: I3d1f7546b4ccd37df1e868d1651349b62118c7d0
",git fetch https://review.opendev.org/openstack/releases refs/changes/68/893268/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/bifrost.yaml'],1,6a1c94bc60fc76dadaa35a02bb176c299c19d47e,,releases: - version: 17.0.0 projects: - repo: openstack/bifrost hash: 16b34f378d013b118fa0bfa2c9aa77c517ebc4e3,,5,0
openstack%2Freleases~893269,openstack/releases,master,I3785506a7c874bedf67a20ce2cddf24440d309ad,Release ironic-prometheus-exporter for Bobcat,MERGED,2023-08-30 18:47:02.000000000,2023-08-31 12:23:45.000000000,2023-08-31 12:23:45.000000000,"[{'_account_id': 308}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 18:47:02.000000000', 'files': ['deliverables/bobcat/ironic-prometheus-exporter.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/b50174c4505df48d41b7dcaba07bdf6138d19e46', 'message': 'Release ironic-prometheus-exporter for Bobcat\n\nMinor release bump chosen as this adds a feature to also export\napplication metrics.\n\nChange-Id: I3785506a7c874bedf67a20ce2cddf24440d309ad\n'}]",1,893269,b50174c4505df48d41b7dcaba07bdf6138d19e46,8,5,1,10342,,,0,"Release ironic-prometheus-exporter for Bobcat

Minor release bump chosen as this adds a feature to also export
application metrics.

Change-Id: I3785506a7c874bedf67a20ce2cddf24440d309ad
",git fetch https://review.opendev.org/openstack/releases refs/changes/69/893269/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/ironic-prometheus-exporter.yaml'],1,b50174c4505df48d41b7dcaba07bdf6138d19e46,,releases: - version: 4.2.0 projects: - repo: openstack/ironic-prometheus-exporter hash: 9a29488f195479ca90abad72fc1d344839b25b6e,,5,0
openstack%2Fpython-manilaclient~893234,openstack/python-manilaclient,master,Ib2a3ddb4bc8175f2769d1cd3510f00485349192a,Bump tox version,MERGED,2023-08-30 17:45:13.000000000,2023-08-31 12:13:22.000000000,2023-08-31 12:12:18.000000000,"[{'_account_id': 22348}, {'_account_id': 30002}, {'_account_id': 30407}]","[{'number': 1, 'created': '2023-08-30 17:45:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/3961019e7a9414f82e9e5a44dd259868c3430330', 'message': '[DNM] Check manila jobs health\n\nChange-Id: Ib2a3ddb4bc8175f2769d1cd3510f00485349192a\n'}, {'number': 2, 'created': '2023-08-30 19:41:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/c871a02c26ceb19eddf4b685129a686be7290711', 'message': '[DNM] Check Manila jobs health\n\nChange-Id: Ib2a3ddb4bc8175f2769d1cd3510f00485349192a\n'}, {'number': 3, 'created': '2023-08-30 20:47:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/73fb4c99a40837d50236d92ee8f51c8727f2a1db', 'message': '[WIP] Change functional testenv\n\nChange-Id: Ib2a3ddb4bc8175f2769d1cd3510f00485349192a\n'}, {'number': 4, 'created': '2023-08-30 21:27:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/db26249d76698fdcf2498f909492273cdeef0835', 'message': '[WIP] Bump tox version and change functional testenv\n\nChange-Id: Ib2a3ddb4bc8175f2769d1cd3510f00485349192a\n'}, {'number': 5, 'created': '2023-08-31 10:23:50.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/python-manilaclient/commit/32f1a9a9430f7b7ce070d0952cadae671faffb78', 'message': 'Bump tox version\n\nThis issue [1] is showing up on the functional jobs in the gate,\nwhich are using the system tox.  So tell tox to upgrade itself\nto the version that gets around that issue.\n\n[1] https://github.com/tox-dev/pyproject-api/issues/101\n\nChange-Id: Ib2a3ddb4bc8175f2769d1cd3510f00485349192a\n'}]",3,893234,32f1a9a9430f7b7ce070d0952cadae671faffb78,16,3,5,29632,,,0,"Bump tox version

This issue [1] is showing up on the functional jobs in the gate,
which are using the system tox.  So tell tox to upgrade itself
to the version that gets around that issue.

[1] https://github.com/tox-dev/pyproject-api/issues/101

Change-Id: Ib2a3ddb4bc8175f2769d1cd3510f00485349192a
",git fetch https://review.opendev.org/openstack/python-manilaclient refs/changes/34/893234/1 && git format-patch -1 --stdout FETCH_HEAD,['manilaclient/tests/functional/osc/test_share_access_rules.py'],1,3961019e7a9414f82e9e5a44dd259868c3430330,," access_to='192.168.0.102',"," access_to='192.168.0.101',",1,1
openstack%2Fopenstack-helm-infra~893282,openstack/openstack-helm-infra,master,I744b721750c474db9fecbd46280d30cfb8347a6f,Make selenium v4 syntax optional,MERGED,2023-08-30 20:12:00.000000000,2023-08-31 12:09:05.000000000,2023-08-31 12:08:02.000000000,"[{'_account_id': 3009}, {'_account_id': 22348}, {'_account_id': 29974}, {'_account_id': 34520}, {'_account_id': 35948}]","[{'number': 1, 'created': '2023-08-30 20:12:00.000000000', 'files': ['grafana/values.yaml', 'releasenotes/notes/grafana.yaml', 'grafana/Chart.yaml', 'grafana/templates/bin/_selenium-tests.py.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/6df0925b25dc0e4c9dfdcc4cbd1b2f6e1099f85c', 'message': 'Make selenium v4 syntax optional\n\nMake selenium v4 syntax optional using the same pattern as\n\nhttps://review.opendev.org/c/openstack/openstack-helm-infra/+/892708\n\nSee:\n\nhttps: //review.opendev.org/c/openstack/openstack-helm-infra/+/883894/5/grafana/templates/bin/_selenium-tests.py.tpl\nChange-Id: I744b721750c474db9fecbd46280d30cfb8347a6f\n'}]",0,893282,6df0925b25dc0e4c9dfdcc4cbd1b2f6e1099f85c,10,5,1,32190,,,0,"Make selenium v4 syntax optional

Make selenium v4 syntax optional using the same pattern as

https://review.opendev.org/c/openstack/openstack-helm-infra/+/892708

See:

https: //review.opendev.org/c/openstack/openstack-helm-infra/+/883894/5/grafana/templates/bin/_selenium-tests.py.tpl
Change-Id: I744b721750c474db9fecbd46280d30cfb8347a6f
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/82/893282/1 && git format-patch -1 --stdout FETCH_HEAD,"['grafana/values.yaml', 'releasenotes/notes/grafana.yaml', 'grafana/Chart.yaml', 'grafana/templates/bin/_selenium-tests.py.tpl']",4,6df0925b25dc0e4c9dfdcc4cbd1b2f6e1099f85c,selenium,"{{- if .Values.selenium_v4 }}{{- end }}{{- if .Values.selenium_v4 }}{{- else }} browser = webdriver.Chrome(chrome_driver, chrome_options=options) {{- end }}{{- if .Values.selenium_v4 }}{{- else }} browser.find_element_by_name('user').send_keys(username) browser.find_element_by_name('password').send_keys(password) browser.find_element_by_css_selector('[aria-label=""Login button""]').click() {{- end }}",,17,1
openstack%2Fironic~893232,openstack/ironic,master,I55cb0c9735b1b9c0d365bdd6262fdc48b0ac03c9,Add missing release mappings for 22.0 and 22.1,MERGED,2023-08-30 17:33:35.000000000,2023-08-31 12:07:46.000000000,2023-08-31 12:06:20.000000000,"[{'_account_id': 10342}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 17:33:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/32002b1fdd4ab52b1fcc27f451afdb0233c6a4f0', 'message': 'Add missing release mappings for 22.0 and 22.1\n\nJust adds the entries in case anyone needs to pin and upgrade\nwith those releases.\n\nChange-Id: I55cb0c9735b1b9c0d365bdd6262fdc48b0ac03c9\n'}, {'number': 2, 'created': '2023-08-30 18:05:53.000000000', 'files': ['ironic/common/release_mappings.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/30e4881c9e2577d8673c81b588033c3193590ba5', 'message': 'Add missing release mappings for 22.0 and 22.1\n\nJust adds the entries in case anyone needs to pin and upgrade\nwith those releases.\n\nChange-Id: I55cb0c9735b1b9c0d365bdd6262fdc48b0ac03c9\n'}]",2,893232,30e4881c9e2577d8673c81b588033c3193590ba5,13,3,2,11655,,,0,"Add missing release mappings for 22.0 and 22.1

Just adds the entries in case anyone needs to pin and upgrade
with those releases.

Change-Id: I55cb0c9735b1b9c0d365bdd6262fdc48b0ac03c9
",git fetch https://review.opendev.org/openstack/ironic refs/changes/32/893232/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic/common/release_mappings.py'],1,32002b1fdd4ab52b1fcc27f451afdb0233c6a4f0,," '22.0': { 'api': '1.83', 'rpc': '1.55', 'objects': { 'Allocation': ['1.1'], 'BIOSSetting': ['1.1'], 'Node': ['1.38', '1.37'], 'NodeHistory': ['1.0'], 'NodeInventory': ['1.0'], 'Conductor': ['1.3'], 'Chassis': ['1.3'], 'Deployment': ['1.0'], 'DeployTemplate': ['1.1'], 'Port': ['1.11'], 'Portgroup': ['1.5'], 'Trait': ['1.0'], 'TraitList': ['1.0'], 'VolumeConnector': ['1.0'], 'VolumeTarget': ['1.0'], } }, '22.1': { 'api': '1.86', 'rpc': '1.56', 'objects': { 'Allocation': ['1.1'], 'BIOSSetting': ['1.1'], 'Node': ['1.39', '1.38', '1.37'], 'NodeHistory': ['1.0'], 'NodeInventory': ['1.0'], 'Conductor': ['1.3'], 'Chassis': ['1.3'], 'Deployment': ['1.0'], 'DeployTemplate': ['1.1'], 'Port': ['1.11'], 'Portgroup': ['1.5'], 'Trait': ['1.0'], 'TraitList': ['1.0'], 'VolumeConnector': ['1.0'], 'VolumeTarget': ['1.0'], 'FirmwareComponent': ['1.0'], } },",,43,0
openstack%2Fpuppet-tripleo~887286,openstack/puppet-tripleo,stable/wallaby,I714c3a648d02be24eb8b79be21a219289ebe5684,Recreate libvirt/passwd.db if not compatible,ABANDONED,2023-06-29 14:06:48.000000000,2023-08-31 12:00:12.000000000,,"[{'_account_id': 6962}, {'_account_id': 9816}, {'_account_id': 9914}, {'_account_id': 11166}, {'_account_id': 14250}, {'_account_id': 22348}, {'_account_id': 22954}, {'_account_id': 30073}]","[{'number': 1, 'created': '2023-06-29 14:06:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/a84bc73060df33da1b9298cc715553703ae713b9', 'message': 'Recreate libvirt/passwd.db if not compatible\n\nWith compute livemigration in TLS setups, there might be\nincompatibilities with the auth db ABI, for example between\nmajor OS versions in the mixed scenarios.\n\nFor a rhel8 vs rhel9 particular case, cyrus-sasl cannot read the auth\ndb because of gnudb vs berklydb mismatch.\n\nAdd self-healing logic around using the saslpasswd2 command,\nwhich is recreating /etc/libvirt/passwd.db from scratch, whenever\nits contents cannot be read with sasldblistusers2.\n\nRelated: rhbz#2186553\n\nChange-Id: I714c3a648d02be24eb8b79be21a219289ebe5684\nSigned-off-by: Bogdan Dobrelya <bdobreli@redhat.com>\n'}, {'number': 2, 'created': '2023-06-29 14:08:40.000000000', 'files': ['manifests/profile/base/nova/libvirt.pp'], 'web_link': 'https://opendev.org/openstack/puppet-tripleo/commit/0cb8b1cfa8f932d19a4b07e3b60235caaf975576', 'message': 'Recreate libvirt/passwd.db if not compatible\n\nWith compute livemigration in TLS setups, there might be\nincompatibilities with the auth db ABI, for example between\nmajor OS versions in the mixed scenarios.\n\nFor a rhel8 vs rhel9 particular case, cyrus-sasl cannot read the auth\ndb because of gnudb vs berklydb mismatch.\n\nAdd self-healing logic around using the saslpasswd2 command,\nwhich is recreating /etc/libvirt/passwd.db from scratch, whenever\nits contents cannot be read with sasldblistusers2.\n\nRelated: rhbz#2186553\n\nChange-Id: I714c3a648d02be24eb8b79be21a219289ebe5684\nSigned-off-by: Bogdan Dobrelya <bdobreli@redhat.com>\n'}]",2,887286,0cb8b1cfa8f932d19a4b07e3b60235caaf975576,6,8,2,6926,,,0,"Recreate libvirt/passwd.db if not compatible

With compute livemigration in TLS setups, there might be
incompatibilities with the auth db ABI, for example between
major OS versions in the mixed scenarios.

For a rhel8 vs rhel9 particular case, cyrus-sasl cannot read the auth
db because of gnudb vs berklydb mismatch.

Add self-healing logic around using the saslpasswd2 command,
which is recreating /etc/libvirt/passwd.db from scratch, whenever
its contents cannot be read with sasldblistusers2.

Related: rhbz#2186553

Change-Id: I714c3a648d02be24eb8b79be21a219289ebe5684
Signed-off-by: Bogdan Dobrelya <bdobreli@redhat.com>
",git fetch https://review.opendev.org/openstack/puppet-tripleo refs/changes/86/887286/1 && git format-patch -1 --stdout FETCH_HEAD,['manifests/profile/base/nova/libvirt.pp'],1,a84bc73060df33da1b9298cc715553703ae713b9,wallaby," $libvirt_sasl_command = ""sasldblistusers2 -f /etc/libvirt/passwd.db 2>&1 | grep -q ""unexpected file type or format"" && sudo rm -f /etc/libvirt/passwd.db; echo \""\${TLS_PASSWORD}\"" | saslpasswd2 -p -a libvirt -u overcloud migration"""," $libvirt_sasl_command = ""echo \""\${TLS_PASSWORD}\"" | saslpasswd2 -p -a libvirt -u overcloud migration""",1,1
openstack%2Fpython-openstackclient~893316,openstack/python-openstackclient,master,Ie1a61e9b3ee5d727d59525efe34aea696538e2b3,Fix ReleaseNotes build,MERGED,2023-08-31 08:45:32.000000000,2023-08-31 11:38:42.000000000,2023-08-31 11:37:34.000000000,"[{'_account_id': 13252}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-08-31 08:45:32.000000000', 'files': ['releasenotes/source/conf.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/010ef0fdf5a5a1705b2ff3b93c68e9cae4b41a8e', 'message': 'Fix ReleaseNotes build\n\nfor some reason (clearly another change somewhere in the Sphinx)\nextlinks extension used in the releasenotes is failing when extlink\ncaption is not having substitues same as in the link itself.\n\n>     title = caption % part\n>             ~~~~~~~~^~~~~~\n> TypeError: not all arguments converted during string formatting\n\nNow the extension supports setting link capturion to None which works as\nwe need.\n\nChange-Id: Ie1a61e9b3ee5d727d59525efe34aea696538e2b3\n'}]",2,893316,010ef0fdf5a5a1705b2ff3b93c68e9cae4b41a8e,8,3,1,27900,,,0,"Fix ReleaseNotes build

for some reason (clearly another change somewhere in the Sphinx)
extlinks extension used in the releasenotes is failing when extlink
caption is not having substitues same as in the link itself.

>     title = caption % part
>             ~~~~~~~~^~~~~~
> TypeError: not all arguments converted during string formatting

Now the extension supports setting link capturion to None which works as
we need.

Change-Id: Ie1a61e9b3ee5d727d59525efe34aea696538e2b3
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/16/893316/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/source/conf.py'],1,010ef0fdf5a5a1705b2ff3b93c68e9cae4b41a8e,," 'Bug %s', None, None,"," 'Bug ', '', '',",3,3
openstack%2Fopenstack-ansible-galera_server~887143,openstack/openstack-ansible-galera_server,stable/zed,I28c6a0e0b41d4d29c3e79e601de45ea373dee4fb,Add optional compression to mariabackup,MERGED,2023-06-28 07:58:22.000000000,2023-08-31 10:47:41.000000000,2023-08-31 10:46:40.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}, {'_account_id': 34150}, {'_account_id': 34411}]","[{'number': 1, 'created': '2023-06-28 07:58:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-galera_server/commit/e21d80924c08aa0af809389bc068217d491b6080', 'message': 'Add optional compression to mariabackup\n\nAs database backups can grow substantially in size, compressing backups\nhelps to preserve disk space.\nWhile the mariabackup utility offers no compression by itself, we can\nstream the backup into a compression tool to create an archive [1].\nThe xtrabackup_checkpoints file, which contains metadata on a backup,\ngets stored alongside the archive, allowing to create incremental\nbackups from non-compressed backups and vice-versa [2].\nOne thing to note, is that compressed backups cannot be prepared in\nadvance, this step must be manually carried out by the user.\nBackup compression is disabled by default and different compressors\ncan be chosen (zstd, xz, ...), with gzip being the default.\n\n[1] https://mariadb.com/kb/en/using-encryption-and-compression-tools-with-mariabackup/\n[2] https://mariadb.com/kb/en/incremental-backup-and-restore-with-mariabackup/#combining-with-stream-output\n\nChange-Id: I28c6a0e0b41d4d29c3e79e601de45ea373dee4fb\nSigned-off-by: Simon Hensel <simon.hensel@inovex.de>\n(cherry picked from commit 60009ed7cebe9c082592fd564b1577068ef94b6c)\n(cherry picked from commit 41801ab04d3c64d61b881d410691e05e0312114d)\n'}, {'number': 2, 'created': '2023-07-20 07:44:11.000000000', 'files': ['tasks/galera_server_backups.yml', 'defaults/main.yml', 'releasenotes/notes/mariabackup-compression-337b04c68f370c1d.yaml', 'templates/mariabackup_script.py.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-galera_server/commit/03ad7d6ace52cfef9976315d918b8f58e94d1539', 'message': 'Add optional compression to mariabackup\n\nAs database backups can grow substantially in size, compressing backups\nhelps to preserve disk space.\nWhile the mariabackup utility offers no compression by itself, we can\nstream the backup into a compression tool to create an archive [1].\nThe xtrabackup_checkpoints file, which contains metadata on a backup,\ngets stored alongside the archive, allowing to create incremental\nbackups from non-compressed backups and vice-versa [2].\nOne thing to note, is that compressed backups cannot be prepared in\nadvance, this step must be manually carried out by the user.\nBackup compression is disabled by default and different compressors\ncan be chosen (zstd, xz, ...), with gzip being the default.\n\n[1] https://mariadb.com/kb/en/using-encryption-and-compression-tools-with-mariabackup/\n[2] https://mariadb.com/kb/en/incremental-backup-and-restore-with-mariabackup/#combining-with-stream-output\n\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/888437\n\nChange-Id: I28c6a0e0b41d4d29c3e79e601de45ea373dee4fb\nSigned-off-by: Simon Hensel <simon.hensel@inovex.de>\n(cherry picked from commit 60009ed7cebe9c082592fd564b1577068ef94b6c)\n(cherry picked from commit 41801ab04d3c64d61b881d410691e05e0312114d)\n'}]",8,887143,03ad7d6ace52cfef9976315d918b8f58e94d1539,25,5,2,32755,,,0,"Add optional compression to mariabackup

As database backups can grow substantially in size, compressing backups
helps to preserve disk space.
While the mariabackup utility offers no compression by itself, we can
stream the backup into a compression tool to create an archive [1].
The xtrabackup_checkpoints file, which contains metadata on a backup,
gets stored alongside the archive, allowing to create incremental
backups from non-compressed backups and vice-versa [2].
One thing to note, is that compressed backups cannot be prepared in
advance, this step must be manually carried out by the user.
Backup compression is disabled by default and different compressors
can be chosen (zstd, xz, ...), with gzip being the default.

[1] https://mariadb.com/kb/en/using-encryption-and-compression-tools-with-mariabackup/
[2] https://mariadb.com/kb/en/incremental-backup-and-restore-with-mariabackup/#combining-with-stream-output

Depends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/888437

Change-Id: I28c6a0e0b41d4d29c3e79e601de45ea373dee4fb
Signed-off-by: Simon Hensel <simon.hensel@inovex.de>
(cherry picked from commit 60009ed7cebe9c082592fd564b1577068ef94b6c)
(cherry picked from commit 41801ab04d3c64d61b881d410691e05e0312114d)
",git fetch https://review.opendev.org/openstack/openstack-ansible-galera_server refs/changes/43/887143/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/galera_server_backups.yml', 'defaults/main.yml', 'releasenotes/notes/mariabackup-compression-337b04c68f370c1d.yaml', 'templates/mariabackup_script.py.j2']",4,e21d80924c08aa0af809389bc068217d491b6080,,"from subprocess import Popen, PIPE, check_output, run ""--compress"", dest=""compress_flag"", default=False, type=eval, choices=[True, False], help=""Flag to compress created backups"", ) parser.add_argument( ""--compressor"", dest=""compressor"", default=""gzip"", type=str, help=""The compressor to use when compressing backups (default: gzip)"", ) parser.add_argument(def create_full_backup(dest, curtime, full_backup_filename, extra_mariabackup_args, compress, compressor): if compress: #Creating compressed full backup os.makedirs(dest+""/""+full_backup_filename+curtime, exist_ok=True) mariabackup_run = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--backup"", ""--stream=xbstream"", ""--extra-lsndir=""+os.path.normpath(dest+""/""+full_backup_filename+curtime)], stdout=PIPE, stderr=err ) compressed_backup = open(os.path.normpath(dest+""/""+full_backup_filename+curtime+""/""+full_backup_filename+curtime), ""wb"") run([compressor], stdin=mariabackup_run.stdout, stdout=compressed_backup) mariabackup_run.wait() mariabackup_res = mariabackup_run.communicate() if mariabackup_run.returncode: print(mariabackup_res[1]) compressed_backup.close() else: #Creating full backup mariabackup_run = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--backup"", ""--target-dir=""+os.path.normpath(dest+""/""+full_backup_filename+curtime)], stdout=None, stderr=err ) mariabackup_run.wait() mariabackup_res = mariabackup_run.communicate() if mariabackup_run.returncode: print(mariabackup_res[1]) #Preparing full backup err_p = open(os.path.normpath(dest+""/prepare.log""), ""w"") mariabackup_prep = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--prepare"", ""--target-dir=""+os.path.normpath(dest+""/""+full_backup_filename+curtime)], stdout=None, stderr=err_p ) mariabackup_prep.wait() mariabackup_prep_res = mariabackup_prep.communicate() if mariabackup_prep.returncode: print(mariabackup_prep_res[1]) err_p.close()def create_increment_backup(dest, curtime, increment_backup_filename, extra_mariabackup_args, compress, compressor): if compress: #Creating compressed incremental backup os.makedirs(dest+""/""+increment_backup_filename+curtime, exist_ok=True) mariabackup_run = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--backup"", ""--stream=xbstream"", ""--incremental-basedir=""+basedir, ""--extra-lsndir=""+os.path.normpath(dest+""/""+increment_backup_filename+curtime)], stdout=PIPE, stderr=err ) compressed_backup = open(os.path.normpath(dest+""/""+increment_backup_filename+curtime+""/""+increment_backup_filename+curtime), ""wb"") run([compressor], stdin=mariabackup_run.stdout, stdout=compressed_backup) mariabackup_run.wait() mariabackup_res = mariabackup_run.communicate() if mariabackup_run.returncode: print(mariabackup_res[1]) compressed_backup.close() else: #Creating incremental backup mariabackup_run = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--backup"", ""--target-dir=""+os.path.normpath(dest+""/""+increment_backup_filename+curtime), ""--incremental-basedir=""+basedir], stdout=None, stderr=err ) mariabackup_run.wait() mariabackup_res = mariabackup_run.communicate() if mariabackup_run.returncode: print(mariabackup_res[1]) create_full_backup(opts.destdir, curtime, full_backup_filename, extra_mariabackup_args, opts.compress_flag, opts.compressor) create_increment_backup(opts.destdir, curtime, increment_backup_filename, extra_mariabackup_args, opts.compress_flag, opts.compressor)","from subprocess import Popen, PIPEimport socketdef create_full_backup(dest, curtime, full_backup_filename, extra_mariabackup_args): #Creating full backup mariabackup_run = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--backup"", ""--target-dir=""+os.path.normpath(dest+""/""+full_backup_filename+curtime)], stdout=None, stderr=err ) mariabackup_run.wait() mariabackup_res = mariabackup_run.communicate() if mariabackup_run.returncode: print(mariabackup_res[1]) #Preparing full backup err_p = open(os.path.normpath(dest+""/prepare.log""), ""w"") mariabackup_prep = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--prepare"", ""--target-dir=""+os.path.normpath(dest+""/""+full_backup_filename+curtime)], stdout=None, stderr=err_p ) mariabackup_prep.wait() mariabackup_prep_res = mariabackup_prep.communicate() if mariabackup_prep.returncode: print(mariabackup_prep_res[1]) err_p.close()def create_increment_backup(dest, curtime, increment_backup_filename, extra_mariabackup_args): #Creating incremental backup mariabackup_run = Popen( [""/usr/bin/mariabackup""] + extra_mariabackup_args + [""--backup"", ""--target-dir=""+os.path.normpath(dest+""/""+increment_backup_filename+curtime), ""--incremental-basedir=""+basedir], stdout=None, stderr=err ) mariabackup_run.wait() mariabackup_res = mariabackup_run.communicate() if mariabackup_run.returncode: print(mariabackup_res[1]) create_full_backup(opts.destdir, curtime, full_backup_filename, extra_mariabackup_args) create_increment_backup(opts.destdir, curtime, increment_backup_filename, extra_mariabackup_args)",106,32
openstack%2Fneutron~891232,openstack/neutron,master,I58dd1973b73aa006234e7b808b6a3f357182a4b3,Fix ovn-metadata agent sync of unused namespaces,MERGED,2023-08-11 20:14:12.000000000,2023-08-31 10:35:46.000000000,2023-08-25 11:46:19.000000000,"[{'_account_id': 1131}, {'_account_id': 6773}, {'_account_id': 9656}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-11 20:14:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/5ed1970bc432b6fbd76c71c9b7bc4e1e42147d7d', 'message': 'Fix ovn-metadata agent sync of unused namespaces\n\nWIP, this is just a quick fix, still need to review tests\n\nMetadata_namespaces_names contained datapath uuid and not the\nneutron network id. This broke the logic of namespaces which\nneeded to be cleaned up. I have also updated some function names\nand comments to make the code purpose clearer.\n\nCloses-Bug: #2031184\nChange-Id: I58dd1973b73aa006234e7b808b6a3f357182a4b3\n'}, {'number': 2, 'created': '2023-08-15 19:00:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/ad1dd72927f346206022fb183882538518d19c94', 'message': 'Fix ovn-metadata agent sync of unused namespaces\n\nmetadata_namespaces_names contained datapath uuid and not the\nneutron network id. This broke the logic of for namespaces clean up,\nresulting in all namespaces getting torn down and recreated at each\nmetadata agent restart. I also did a little(not complete) function\nname cleanup.\n\nCloses-Bug: #2031184\nChange-Id: I58dd1973b73aa006234e7b808b6a3f357182a4b3\n'}, {'number': 3, 'created': '2023-08-16 12:28:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/b4dd0700c26a74c0a6b1e84f82c1b2896ec04fbf', 'message': 'Fix ovn-metadata agent sync of unused namespaces\n\nmetadata_namespaces contained datapath uuid and not the\nneutron network uuid. This broke the logic for namespaces clean up,\nresulting in all namespaces getting torn down and recreated at each\nmetadata agent restart. I also did a little(not complete) function\ncleanup.\n\nCloses-Bug: #2031184\nChange-Id: I58dd1973b73aa006234e7b808b6a3f357182a4b3\n'}, {'number': 4, 'created': '2023-08-17 15:16:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/8177004401d88b1d8e198e2e474187ec54e64d50', 'message': 'Fix ovn-metadata agent sync of unused namespaces\n\nmetadata_namespaces contained datapath uuid and not the\nneutron network uuid. This broke the logic for namespaces clean up,\nresulting in all namespaces getting torn down and recreated at each\nmetadata agent sync.\n\nCloses-Bug: #2031184\nChange-Id: I58dd1973b73aa006234e7b808b6a3f357182a4b3\n'}, {'number': 5, 'created': '2023-08-24 19:19:06.000000000', 'files': ['neutron/agent/ovn/metadata/agent.py', 'neutron/tests/unit/agent/ovn/metadata/test_agent.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/87b2f34a98349012ecceed0e54dc766d36024685', 'message': 'Fix ovn-metadata agent sync of unused namespaces\n\nmetadata_namespaces contained datapath uuid and not the\nneutron network uuid. This broke the logic for namespaces clean up,\nresulting in all namespaces getting torn down and recreated at each\nmetadata agent sync.\n\nCloses-Bug: #2031184\nChange-Id: I58dd1973b73aa006234e7b808b6a3f357182a4b3\n'}]",16,891232,87b2f34a98349012ecceed0e54dc766d36024685,36,6,5,34271,,,0,"Fix ovn-metadata agent sync of unused namespaces

metadata_namespaces contained datapath uuid and not the
neutron network uuid. This broke the logic for namespaces clean up,
resulting in all namespaces getting torn down and recreated at each
metadata agent sync.

Closes-Bug: #2031184
Change-Id: I58dd1973b73aa006234e7b808b6a3f357182a4b3
",git fetch https://review.opendev.org/openstack/neutron refs/changes/32/891232/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/agent/ovn/metadata/agent.py', 'neutron/tests/unit/agent/ovn/metadata/test_agent.py']",2,5ed1970bc432b6fbd76c71c9b7bc4e1e42147d7d,bug/2031184, self.agent.teardown_namespace('1'), self.agent.teardown_datapath('1'),24,20
openstack%2Fkolla-ansible~893215,openstack/kolla-ansible,stable/zed,I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a,Fix D001 Line too long in mariadb-guide,MERGED,2023-08-30 15:16:04.000000000,2023-08-31 10:31:31.000000000,2023-08-31 10:29:58.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 27339}]","[{'number': 1, 'created': '2023-08-30 15:16:04.000000000', 'files': ['doc/source/reference/databases/mariadb-guide.rst'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/916587d6b0d2de38dfd3fb00003b2d3a247eb3eb', 'message': 'Fix D001 Line too long in mariadb-guide\n\nChange-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a\n(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)\n'}]",0,893215,916587d6b0d2de38dfd3fb00003b2d3a247eb3eb,7,4,1,14200,,,0,"Fix D001 Line too long in mariadb-guide

Change-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a
(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/15/893215/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/reference/databases/mariadb-guide.rst'],1,916587d6b0d2de38dfd3fb00003b2d3a247eb3eb,,"The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.","The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.",3,2
openstack%2Fkolla-ansible~893216,openstack/kolla-ansible,stable/yoga,I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a,Fix D001 Line too long in mariadb-guide,MERGED,2023-08-30 15:16:20.000000000,2023-08-31 10:31:25.000000000,2023-08-31 10:29:56.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 27339}]","[{'number': 1, 'created': '2023-08-30 15:16:20.000000000', 'files': ['doc/source/reference/databases/mariadb-guide.rst'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/13b4487f239998db0c32485ec6ac273b63979818', 'message': 'Fix D001 Line too long in mariadb-guide\n\nChange-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a\n(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)\n'}]",0,893216,13b4487f239998db0c32485ec6ac273b63979818,7,4,1,14200,,,0,"Fix D001 Line too long in mariadb-guide

Change-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a
(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/16/893216/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/reference/databases/mariadb-guide.rst'],1,13b4487f239998db0c32485ec6ac273b63979818,,"The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.","The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.",3,2
openstack%2Fkolla-ansible~893217,openstack/kolla-ansible,stable/xena,I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a,Fix D001 Line too long in mariadb-guide,MERGED,2023-08-30 15:16:33.000000000,2023-08-31 10:31:19.000000000,2023-08-31 10:29:54.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 27339}]","[{'number': 1, 'created': '2023-08-30 15:16:33.000000000', 'files': ['doc/source/reference/databases/mariadb-guide.rst'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/810c04d5654b336ec6aff435e9e6a8a0acfe9dbb', 'message': 'Fix D001 Line too long in mariadb-guide\n\nChange-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a\n(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)\n'}]",0,893217,810c04d5654b336ec6aff435e9e6a8a0acfe9dbb,7,4,1,14200,,,0,"Fix D001 Line too long in mariadb-guide

Change-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a
(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/17/893217/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/reference/databases/mariadb-guide.rst'],1,810c04d5654b336ec6aff435e9e6a8a0acfe9dbb,,"The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.","The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.",3,2
openstack%2Fkolla-ansible~893214,openstack/kolla-ansible,stable/2023.1,I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a,Fix D001 Line too long in mariadb-guide,MERGED,2023-08-30 15:15:52.000000000,2023-08-31 10:31:13.000000000,2023-08-31 10:29:53.000000000,"[{'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 27339}]","[{'number': 1, 'created': '2023-08-30 15:15:52.000000000', 'files': ['doc/source/reference/databases/mariadb-guide.rst'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/c3541ad72982a631738c4c99c9b526503ce2432c', 'message': 'Fix D001 Line too long in mariadb-guide\n\nChange-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a\n(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)\n'}]",0,893214,c3541ad72982a631738c4c99c9b526503ce2432c,7,4,1,14200,,,0,"Fix D001 Line too long in mariadb-guide

Change-Id: I0aff87f0392b43671c6e9fc3fae3cdb0f7ce118a
(cherry picked from commit 106a21fb6c7fe97246abfc9d09edbcc459669e2e)
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/14/893214/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/reference/databases/mariadb-guide.rst'],1,c3541ad72982a631738c4c99c9b526503ce2432c,,"The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.","The default shard, defined by ``mariadb_default_database_shard_id`` (default 0), identifies the shard that will be accessible via HAProxy and available for backing up.",3,2
openstack%2Fkolla-ansible~879426,openstack/kolla-ansible,master,I6ea0949d58e38e2cda41c9702001e7bd500f23f1,Change regex for the multiline parser at the fluentd rabbitmq input,MERGED,2023-04-04 07:46:45.000000000,2023-08-31 10:31:10.000000000,2023-08-31 10:29:50.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 32553}]","[{'number': 1, 'created': '2023-04-04 07:46:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/d10dc33dd2c0015ed4fdf6b18b47eac0ae28ba3a', 'message': 'Change regex for the multiline parser at the fluentd rabbitmq input.\n\nChange-Id: I6ea0949d58e38e2cda41c9702001e7bd500f23f1\n'}, {'number': 2, 'created': '2023-04-04 07:53:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f3c83cfc4c2eddce9bdfbae0c7f85dbdf4884d59', 'message': 'Change regex for the multiline parser at the fluentd rabbitmq input.\nRelated-Bug: #2015184\n\nChange-Id: I6ea0949d58e38e2cda41c9702001e7bd500f23f1\n'}, {'number': 3, 'created': '2023-04-04 07:56:33.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/9270572b83aaee2ed9ef1c44c30abe339bae3519', 'message': 'Change regex for the multiline parser at the fluentd rabbitmq input\n\nRelated-Bug: #2015184\n\nChange-Id: I6ea0949d58e38e2cda41c9702001e7bd500f23f1\n'}, {'number': 4, 'created': '2023-04-04 08:19:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/628cb3f579d4ee47b93593b7edd275e01764e54d', 'message': 'Change regex for the multiline parser at the fluentd rabbitmq input\n\nRelated-Bug: #2015184\n\nCloses-Bug: #2015184\n\nChange-Id: I6ea0949d58e38e2cda41c9702001e7bd500f23f1\n'}, {'number': 5, 'created': '2023-08-30 12:25:00.000000000', 'files': ['ansible/roles/common/templates/conf/input/03-rabbitmq.conf.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b9f2ad94a7bbd2d02d8ba69106e4d7a64d04f82a', 'message': 'Change regex for the multiline parser at the fluentd rabbitmq input\n\nRelated-Bug: #2015184\n\nCloses-Bug: #2015184\n\nChange-Id: I6ea0949d58e38e2cda41c9702001e7bd500f23f1\n'}]",8,879426,b9f2ad94a7bbd2d02d8ba69106e4d7a64d04f82a,22,5,5,35875,,,0,"Change regex for the multiline parser at the fluentd rabbitmq input

Related-Bug: #2015184

Closes-Bug: #2015184

Change-Id: I6ea0949d58e38e2cda41c9702001e7bd500f23f1
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/26/879426/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/common/templates/conf/input/03-rabbitmq.conf.j2'],1,d10dc33dd2c0015ed4fdf6b18b47eac0ae28ba3a,fluentd-rabbitmq-input-fix, format_firstline /^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3})(\d+\+\d{2}:\d{2})?/ format1 /^(?<Timestamp>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3})(\d+\+\d{2}:\d{2})? \[(?<log_level>\w+)\] (?<Payload>.*)/, format_firstline /^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}/ format1 /^(?<Timestamp>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}) \[(?<log_level>\w+)\] (?<Payload>.*)/,2,2
openstack%2Fhorizon~893135,openstack/horizon,master,Ie2d271c8cfbccd21aae1902ede49ac22321a67c6,Fix sphinx extlinks captions,MERGED,2023-08-30 08:05:26.000000000,2023-08-31 10:09:51.000000000,2023-08-31 10:08:32.000000000,"[{'_account_id': 6914}, {'_account_id': 22348}, {'_account_id': 29313}, {'_account_id': 35133}]","[{'number': 1, 'created': '2023-08-30 08:05:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/837440070ead8510d18f0f6266a932021cf9fa8f', 'message': 'Fix sphinx extlinks captions\n\nWe are hitting tps://github.com/sphinx-doc/sphinx/issues/11094 due\nto changes in Sphinx.\n\nChange-Id: Ie2d271c8cfbccd21aae1902ede49ac22321a67c6\n'}, {'number': 2, 'created': '2023-08-30 08:05:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/ffe8b2e49b228654624febfb58110d132c953256', 'message': 'Fix sphinx extlinks captions\n\nWe are hitting https://github.com/sphinx-doc/sphinx/issues/11094 due\nto changes in Sphinx.\n\nChange-Id: Ie2d271c8cfbccd21aae1902ede49ac22321a67c6\n'}, {'number': 3, 'created': '2023-08-30 08:35:56.000000000', 'files': ['doc/source/conf.py'], 'web_link': 'https://opendev.org/openstack/horizon/commit/80f1e309028d266b60b33324e7e74675279a7131', 'message': 'Fix sphinx extlinks captions\n\nWe are hitting https://github.com/sphinx-doc/sphinx/issues/11094 due\nto changes in Sphinx.\n\nChange-Id: Ie2d271c8cfbccd21aae1902ede49ac22321a67c6\n'}]",1,893135,80f1e309028d266b60b33324e7e74675279a7131,12,4,3,8648,,,0,"Fix sphinx extlinks captions

We are hitting https://github.com/sphinx-doc/sphinx/issues/11094 due
to changes in Sphinx.

Change-Id: Ie2d271c8cfbccd21aae1902ede49ac22321a67c6
",git fetch https://review.opendev.org/openstack/horizon refs/changes/35/893135/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/conf.py'],1,837440070ead8510d18f0f6266a932021cf9fa8f,sphinx-extlinks-captions," None, ) 'launchpad:%s', 'storyboard:%s',"," '', ), 'launchpad ', 'storyboard ',",4,4
openstack%2Freleases~893296,openstack/releases,master,Ia9bb663777b6f07abc4d18e7ee26adf728f767c5,Tag governance 0.15.0 for Sept 2023 elections,MERGED,2023-08-30 23:06:16.000000000,2023-08-31 10:08:28.000000000,2023-08-31 10:08:28.000000000,"[{'_account_id': 308}, {'_account_id': 8556}, {'_account_id': 14482}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 23:06:16.000000000', 'files': ['deliverables/_independent/openstack-governance.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/c7bb9814fda01367b452519e0e09c85a4436b34f', 'message': 'Tag governance 0.15.0 for Sept 2023 elections\n\nOpenStack Election system requires tagging the\ngovernance repos. Tagging 0.15.0 for Sept 2023\nelections.\n\nHash used for this tag is as per the election\nemail deadline is taken: 2023-08-30T00:00\n\nhttps: //github.com/openstack/election/blob/204eb5040006e23cc650c79b20bb793e8734f612/configuration.yaml#L10\nChange-Id: Ia9bb663777b6f07abc4d18e7ee26adf728f767c5\n'}]",4,893296,c7bb9814fda01367b452519e0e09c85a4436b34f,10,5,1,8556,,,0,"Tag governance 0.15.0 for Sept 2023 elections

OpenStack Election system requires tagging the
governance repos. Tagging 0.15.0 for Sept 2023
elections.

Hash used for this tag is as per the election
email deadline is taken: 2023-08-30T00:00

https: //github.com/openstack/election/blob/204eb5040006e23cc650c79b20bb793e8734f612/configuration.yaml#L10
Change-Id: Ia9bb663777b6f07abc4d18e7ee26adf728f767c5
",git fetch https://review.opendev.org/openstack/releases refs/changes/96/893296/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/_independent/openstack-governance.yaml'],1,c7bb9814fda01367b452519e0e09c85a4436b34f,, - version: 0.15.0 projects: - repo: openstack/governance hash: 8d7d972d11eb038aa1f3f65237b5235328e12a73 tarball-base: openstack-governance,,5,0
openstack%2Freleases~885691,openstack/releases,master,I2e1227f2b8f8a242e41319e3443bc827b0a3bee1,[magnum-tempest-plugin] Tag xena-last,MERGED,2023-06-09 05:50:00.000000000,2023-08-31 10:08:26.000000000,2023-08-31 10:08:26.000000000,"[{'_account_id': 308}, {'_account_id': 8064}, {'_account_id': 17685}, {'_account_id': 20498}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-09 05:50:00.000000000', 'files': ['deliverables/xena/magnum-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/8922a267d3c99ef073586bc8afd3e03c46fe9b74', 'message': ""[magnum-tempest-plugin] Tag xena-last\n\nXena branch is in Extended Maintenance now[1]. Tempest and\ntempest plugins are branchless which means master version of\nTempest and its plugins is used to test the supported stable\nbranches.\n\nOnce any stable branch is moved to EM state then, Tempest and\nits plugins compatible tag[2] needs to be released so that we can\nkeep testing the EM stable branches with that tag once master\nTempest and its plugins are not compatible[3].\n\nTagging 'xena-last' with the latest hash which is nothing but 2.0.0\ntag.\n\n[1] https://review.opendev.org/c/openstack/releases/+/881254\n[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html\n[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html\n\nChange-Id: I2e1227f2b8f8a242e41319e3443bc827b0a3bee1\n""}]",1,885691,8922a267d3c99ef073586bc8afd3e03c46fe9b74,9,5,1,8556,,,0,"[magnum-tempest-plugin] Tag xena-last

Xena branch is in Extended Maintenance now[1]. Tempest and
tempest plugins are branchless which means master version of
Tempest and its plugins is used to test the supported stable
branches.

Once any stable branch is moved to EM state then, Tempest and
its plugins compatible tag[2] needs to be released so that we can
keep testing the EM stable branches with that tag once master
Tempest and its plugins are not compatible[3].

Tagging 'xena-last' with the latest hash which is nothing but 2.0.0
tag.

[1] https://review.opendev.org/c/openstack/releases/+/881254
[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html

Change-Id: I2e1227f2b8f8a242e41319e3443bc827b0a3bee1
",git fetch https://review.opendev.org/openstack/releases refs/changes/91/885691/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/magnum-tempest-plugin.yaml'],1,8922a267d3c99ef073586bc8afd3e03c46fe9b74,xena-last, - version: xena-last projects: - repo: openstack/magnum-tempest-plugin hash: 0805f24e65a8b622649bfc12f9a6657b03b8b683,,4,0
openstack%2Freleases~885692,openstack/releases,master,I85f3a7f66a30789be7d56877a2ed5369a28d1e75,[heat-tempest-plugin] Tag xena-last,MERGED,2023-06-09 05:52:15.000000000,2023-08-31 10:05:21.000000000,2023-08-31 10:05:21.000000000,"[{'_account_id': 308}, {'_account_id': 9816}, {'_account_id': 12404}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-09 05:52:15.000000000', 'files': ['deliverables/xena/heat-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/379e9544d9e4ad2a5964ed613ca9adf6a2708db9', 'message': ""[heat-tempest-plugin] Tag xena-last\n\nXena branch is in Extended Maintenance now[1]. Tempest and\ntempest plugins are branchless which means master version of\nTempest and its plugins is used to test the supported stable\nbranches.\n\nOnce any stable branch is moved to EM state then, Tempest and\nits plugins compatible tag[2] needs to be released so that we can\nkeep testing the EM stable branches with that tag once master\nTempest and its plugins are not compatible[3].\n\nTagging 'xena-last' with the latest hash which is nothing but 1.7.1\ntag.\n\n[1] https://review.opendev.org/c/openstack/releases/+/881254\n[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html\n[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html\n\nChange-Id: I85f3a7f66a30789be7d56877a2ed5369a28d1e75\n""}]",1,885692,379e9544d9e4ad2a5964ed613ca9adf6a2708db9,9,5,1,8556,,,0,"[heat-tempest-plugin] Tag xena-last

Xena branch is in Extended Maintenance now[1]. Tempest and
tempest plugins are branchless which means master version of
Tempest and its plugins is used to test the supported stable
branches.

Once any stable branch is moved to EM state then, Tempest and
its plugins compatible tag[2] needs to be released so that we can
keep testing the EM stable branches with that tag once master
Tempest and its plugins are not compatible[3].

Tagging 'xena-last' with the latest hash which is nothing but 1.7.1
tag.

[1] https://review.opendev.org/c/openstack/releases/+/881254
[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html

Change-Id: I85f3a7f66a30789be7d56877a2ed5369a28d1e75
",git fetch https://review.opendev.org/openstack/releases refs/changes/92/885692/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/xena/heat-tempest-plugin.yaml'],1,379e9544d9e4ad2a5964ed613ca9adf6a2708db9,xena-last, - version: xena-last projects: - repo: openstack/heat-tempest-plugin hash: a3719a852c4485ec4a1269f6b4acf7e18432365a,,4,0
openstack%2Freleases~889462,openstack/releases,master,I814b869c2e2b1464e3989cb8b0477b61b12bb330,[Yoga] Release ironic-python-agent,MERGED,2023-07-25 14:49:26.000000000,2023-08-31 10:05:18.000000000,2023-08-31 10:05:18.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-07-25 14:49:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/176f3a87b3fdaff0785b907822edac74a906b8b1', 'message': '[Yoga] Release ironic-python-agent\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 8.5.1..9f84c8b3\n9f84c8b3 Fix UTF-16 result handling for efibootmgr\n8e77848c Make reno ignore bugfix eol tags\n1d4ea491 Fixes for tox 4.0\nde4cf64c Warn when smartctl not found\n57f1e530 Drop python2 from bindep.txt\n\nChange-Id: I814b869c2e2b1464e3989cb8b0477b61b12bb330\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 2, 'created': '2023-07-28 13:20:50.000000000', 'files': ['deliverables/yoga/ironic-python-agent.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/dfba5d3958125c5dc325299e1e1bf92059650128', 'message': '[Yoga] Release ironic-python-agent\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 8.5.1..9f84c8b3\n9f84c8b3 Fix UTF-16 result handling for efibootmgr\n8e77848c Make reno ignore bugfix eol tags\n1d4ea491 Fixes for tox 4.0\nde4cf64c Warn when smartctl not found\n57f1e530 Drop python2 from bindep.txt\n\nChange-Id: I814b869c2e2b1464e3989cb8b0477b61b12bb330\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,889462,dfba5d3958125c5dc325299e1e1bf92059650128,11,6,2,28522,,,0,"[Yoga] Release ironic-python-agent

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 8.5.1..9f84c8b3
9f84c8b3 Fix UTF-16 result handling for efibootmgr
8e77848c Make reno ignore bugfix eol tags
1d4ea491 Fixes for tox 4.0
de4cf64c Warn when smartctl not found
57f1e530 Drop python2 from bindep.txt

Change-Id: I814b869c2e2b1464e3989cb8b0477b61b12bb330
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/62/889462/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/ironic-python-agent.yaml'],1,176f3a87b3fdaff0785b907822edac74a906b8b1,yoga-convenience-before-em, - version: 8.5.2 projects: - repo: openstack/ironic-python-agent hash: 9f84c8b3d1fa0e08bf1f799f37a11698f8da07a4release-notes: https://docs.openstack.org/releasenotes/ironic-python-agent/yoga.html,release-notes: https://docs.openstack.org/releasenotes/ironic-python-agent/yoga.html,6,1
openstack%2Freleases~889461,openstack/releases,master,Idfa5cef800faaf108d0d7dd2573f44d75ee6b051,[Yoga] Release ironic-python-agent-builder,MERGED,2023-07-25 14:48:39.000000000,2023-08-31 10:05:11.000000000,2023-08-31 10:05:11.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-07-25 14:48:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/bb398b26e2d91ba2dc4f87403c765dfe02db5ae3', 'message': '[Yoga] Release ironic-python-agent-builder\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 4.0.1..693ba68\n693ba68 Remove /var/tmp/* from images\n9126ce0 Add smartmontools package to DIB image\ne36e306 Update TOX_CONSTRAINTS_FILE for stable/yoga\nfbd15b4 Update .gitreview for stable/yoga\n\nChange-Id: Idfa5cef800faaf108d0d7dd2573f44d75ee6b051\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 2, 'created': '2023-07-28 13:24:09.000000000', 'files': ['deliverables/yoga/ironic-python-agent-builder.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/f6a5ce230e3b2587ecd04350ceb2dc369b093377', 'message': '[Yoga] Release ironic-python-agent-builder\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 4.0.1..693ba68\n693ba68 Remove /var/tmp/* from images\n9126ce0 Add smartmontools package to DIB image\ne36e306 Update TOX_CONSTRAINTS_FILE for stable/yoga\nfbd15b4 Update .gitreview for stable/yoga\n\nChange-Id: Idfa5cef800faaf108d0d7dd2573f44d75ee6b051\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,889461,f6a5ce230e3b2587ecd04350ceb2dc369b093377,11,6,2,28522,,,0,"[Yoga] Release ironic-python-agent-builder

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 4.0.1..693ba68
693ba68 Remove /var/tmp/* from images
9126ce0 Add smartmontools package to DIB image
e36e306 Update TOX_CONSTRAINTS_FILE for stable/yoga
fbd15b4 Update .gitreview for stable/yoga

Change-Id: Idfa5cef800faaf108d0d7dd2573f44d75ee6b051
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/61/889461/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/ironic-python-agent-builder.yaml'],1,bb398b26e2d91ba2dc4f87403c765dfe02db5ae3,yoga-convenience-before-em, - version: 4.1.0 projects: - repo: openstack/ironic-python-agent-builder hash: 693ba68aa43153b025c4f18d0776af011e408ce4release-notes: https://docs.openstack.org/releasenotes/ironic-python-agent-builder/yoga.html,release-notes: https://docs.openstack.org/releasenotes/ironic-python-agent-builder/yoga.html,6,1
openstack%2Freleases~889418,openstack/releases,master,I741e995b8b31ade3da656492ade02a05b3f192d6,[Yoga] Release bifrost,MERGED,2023-07-25 14:16:24.000000000,2023-08-31 10:05:09.000000000,2023-08-31 10:05:09.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-07-25 14:16:24.000000000', 'files': ['deliverables/yoga/bifrost.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/8e999ad012ba3764e6da5267392a4ad6a035d890', 'message': '[Yoga] Release bifrost\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 14.0.0..6412c7a1\nd094d5de Skip unnecessary SDK get_machine calls\n835bd278 CI: Update cached cirros image to 0.5.3\n6f92fa44 Backport the jammy shimx64.efi.signed fix including focal\n247888ab Allow for almalinux and rocky installations\nfddf7f02 Use curl to download deploy image if get_url fails\n01133f6f Fix CI\n9aabd8cd Create /run/ironic runtime directory when service starts\nedba45ab Do not install grub2 and shim on the host system\n9083535d Set git_branch et al to stable/yoga\nb90e2934 Use libvirt-python from the distribution on Red Hat systems\n189c57a5 Prevent the enroll/deploy commands from running without venv\nae26ffdb Update TOX_CONSTRAINTS_FILE for stable/yoga\n24eeb889 Update .gitreview for stable/yoga\n\nChange-Id: I741e995b8b31ade3da656492ade02a05b3f192d6\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,889418,8e999ad012ba3764e6da5267392a4ad6a035d890,9,6,1,28522,,,0,"[Yoga] Release bifrost

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 14.0.0..6412c7a1
d094d5de Skip unnecessary SDK get_machine calls
835bd278 CI: Update cached cirros image to 0.5.3
6f92fa44 Backport the jammy shimx64.efi.signed fix including focal
247888ab Allow for almalinux and rocky installations
fddf7f02 Use curl to download deploy image if get_url fails
01133f6f Fix CI
9aabd8cd Create /run/ironic runtime directory when service starts
edba45ab Do not install grub2 and shim on the host system
9083535d Set git_branch et al to stable/yoga
b90e2934 Use libvirt-python from the distribution on Red Hat systems
189c57a5 Prevent the enroll/deploy commands from running without venv
ae26ffdb Update TOX_CONSTRAINTS_FILE for stable/yoga
24eeb889 Update .gitreview for stable/yoga

Change-Id: I741e995b8b31ade3da656492ade02a05b3f192d6
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/18/889418/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/bifrost.yaml'],1,8e999ad012ba3764e6da5267392a4ad6a035d890,yoga-convenience-before-em, - version: 14.1.0 projects: - repo: openstack/bifrost hash: 6412c7a1bfcea63ea83bba3186a9a58c88db600f,,4,0
openstack%2Freleases~889488,openstack/releases,master,I3582d14073008537d22125e8549eba73c41a968b,[Yoga] Release metalsmith,MERGED,2023-07-25 15:08:48.000000000,2023-08-31 10:05:04.000000000,2023-08-31 10:05:04.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-07-25 15:08:48.000000000', 'files': ['deliverables/yoga/metalsmith.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/94148d74a66ea32841a55195eff7b3319a6a6d11', 'message': ""[Yoga] Release metalsmith\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 1.6.3..f890ade\nf890ade Get ports by 'binding:host_id' query filter\n74a858b test_provision: don't assert provision_node call order\ncc9f88b list_instances - cache allocations\n04aebc7 Use a network cache in Instance\n3035757 Fixes for tox 4.0\n3071dd9 Allow to use Ansible OpenStack Col. 1.x.x with openstacksdk >=0.99.0\n\nChange-Id: I3582d14073008537d22125e8549eba73c41a968b\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n""}]",0,889488,94148d74a66ea32841a55195eff7b3319a6a6d11,9,6,1,28522,,,0,"[Yoga] Release metalsmith

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 1.6.3..f890ade
f890ade Get ports by 'binding:host_id' query filter
74a858b test_provision: don't assert provision_node call order
cc9f88b list_instances - cache allocations
04aebc7 Use a network cache in Instance
3035757 Fixes for tox 4.0
3071dd9 Allow to use Ansible OpenStack Col. 1.x.x with openstacksdk >=0.99.0

Change-Id: I3582d14073008537d22125e8549eba73c41a968b
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/88/889488/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/metalsmith.yaml'],1,94148d74a66ea32841a55195eff7b3319a6a6d11,yoga-convenience-before-em, - version: 1.6.4 projects: - repo: openstack/metalsmith hash: f890ade4c5d06b6eb802d52eb3d6ee0a9fd36290,,4,0
openstack%2Freleases~889621,openstack/releases,master,I955048b04020ae98f556906455f01378b4d1f6c2,[Yoga] Release sushy,MERGED,2023-07-25 16:30:17.000000000,2023-08-31 10:05:02.000000000,2023-08-31 10:05:02.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-07-25 16:30:17.000000000', 'files': ['deliverables/yoga/sushy.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/18ca133b5e7ac3a73f2191aabc0555a5dfe62126', 'message': '[Yoga] Release sushy\n\nThis is a convenience release before moving Yoga to extended maintenance\n(estimated 2023-11-02).\n\n$ git log --oneline --no-merges 4.1.5..5f67448\n5f67448 Requests must always have a read/connect timeout\ne5a43fa Exclude all files starting with . from flake8 tests\n288260d Fix volume deletion on newer iDRACs\n37171ad Retry on iDRAC SYS518 errors for all requests\n972f173 Handle proper code_status in unit test\ne06f1c3 Handle a different error code for missing TransferProtocolType\n\nChange-Id: I955048b04020ae98f556906455f01378b4d1f6c2\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",0,889621,18ca133b5e7ac3a73f2191aabc0555a5dfe62126,9,6,1,28522,,,0,"[Yoga] Release sushy

This is a convenience release before moving Yoga to extended maintenance
(estimated 2023-11-02).

$ git log --oneline --no-merges 4.1.5..5f67448
5f67448 Requests must always have a read/connect timeout
e5a43fa Exclude all files starting with . from flake8 tests
288260d Fix volume deletion on newer iDRACs
37171ad Retry on iDRAC SYS518 errors for all requests
972f173 Handle proper code_status in unit test
e06f1c3 Handle a different error code for missing TransferProtocolType

Change-Id: I955048b04020ae98f556906455f01378b4d1f6c2
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/21/889621/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/sushy.yaml'],1,18ca133b5e7ac3a73f2191aabc0555a5dfe62126,yoga-convenience-before-em, - version: 4.1.6 projects: - repo: openstack/sushy hash: 5f6744887e6ea1e56e6b6d96db3783d072c57f04,,4,0
openstack%2Freleases~893320,openstack/releases,master,Ie7a609f78760071ac18ee705d4aaec575d76723a,[yoga] release oslo.messaging 12.13.2,MERGED,2023-08-31 09:12:33.000000000,2023-08-31 10:04:21.000000000,2023-08-31 10:04:21.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 09:12:33.000000000', 'files': ['deliverables/yoga/oslo.messaging.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/1260f7973b03d82cce7f307c71790eed5a74ba49', 'message': '[yoga] release oslo.messaging 12.13.2\n\nChange-Id: Ie7a609f78760071ac18ee705d4aaec575d76723a\n'}]",1,893320,1260f7973b03d82cce7f307c71790eed5a74ba49,8,3,1,28522,,,0,"[yoga] release oslo.messaging 12.13.2

Change-Id: Ie7a609f78760071ac18ee705d4aaec575d76723a
",git fetch https://review.opendev.org/openstack/releases refs/changes/20/893320/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/yoga/oslo.messaging.yaml'],1,1260f7973b03d82cce7f307c71790eed5a74ba49,bug-2030976, - version: 12.13.2 projects: - repo: openstack/oslo.messaging hash: 8ee7638a860c48785d94bfda8d336b6239da5013,,4,0
openstack%2Fopenstack-ansible-haproxy_server~888762,openstack/openstack-ansible-haproxy_server,master,I0d97e0b90a8d18a7b69e880e4effa851238d51d1,Do not use notify inside handlers,MERGED,2023-07-18 10:37:53.000000000,2023-08-31 10:04:01.000000000,2023-08-31 10:03:02.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 32666}]","[{'number': 1, 'created': '2023-07-18 10:37:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/2236ee2c48d4839768ef60d5aa57e588c855c0e0', 'message': 'Do not use notify inside handlers\n\nSince latest ansible handlers are not triggered inside the same\nhandlers flush, which means that triggering mysql restart\nthe way we did does not work anymore. So instead of\nnotifying inside handlers, we add listen key to tasks\nthat are triggered by these newly produced notifications.\n\nThis could be due to the bug [1], but ansible-core version that has\nbackport included still shows inconsistent behaviour\n\n[1] https://github.com/ansible/ansible/issues/80880\n\nChange-Id: I0d97e0b90a8d18a7b69e880e4effa851238d51d1\n'}, {'number': 2, 'created': '2023-07-18 11:30:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/ad2269f241d9c1103f7dc24ec84c4c05192c4f1e', 'message': 'Do not use notify inside handlers\n\nSince latest ansible handlers are not triggered inside the same\nhandlers flush, which means that triggering mysql restart\nthe way we did does not work anymore. So instead of\nnotifying inside handlers, we add listen key to tasks\nthat are triggered by these newly produced notifications.\n\nThis could be due to the bug [1], but ansible-core version that has\nbackport included still shows inconsistent behaviour\n\n[1] https://github.com/ansible/ansible/issues/80880\n\nChange-Id: I0d97e0b90a8d18a7b69e880e4effa851238d51d1\n'}, {'number': 3, 'created': '2023-07-19 11:44:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/71d2179668ace8254f8a63dc7b29394813512544', 'message': 'Do not use notify inside handlers\n\nSince latest ansible handlers are not triggered inside the same\nhandlers flush, which means that triggering mysql restart\nthe way we did does not work anymore. So instead of\nnotifying inside handlers, we add listen key to tasks\nthat are triggered by these newly produced notifications.\n\nThis could be due to the bug [1], but ansible-core version that has\nbackport included still shows inconsistent behaviour\n\n[1] https://github.com/ansible/ansible/issues/80880\n\nChange-Id: I0d97e0b90a8d18a7b69e880e4effa851238d51d1\n'}, {'number': 4, 'created': '2023-08-07 06:55:52.000000000', 'files': ['handlers/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/b6e04fea1f98d817a419d0f941484bac55007f78', 'message': 'Do not use notify inside handlers\n\nSince latest ansible handlers are not triggered inside the same\nhandlers flush, which means that triggering mysql restart\nthe way we did does not work anymore. So instead of\nnotifying inside handlers, we add listen key to tasks\nthat are triggered by these newly produced notifications.\n\nThis could be due to the bug [1], but ansible-core version that has\nbackport included still shows inconsistent behaviour\n\n[1] https://github.com/ansible/ansible/issues/80880\n\nChange-Id: I0d97e0b90a8d18a7b69e880e4effa851238d51d1\n'}]",0,888762,b6e04fea1f98d817a419d0f941484bac55007f78,14,3,4,28619,,,0,"Do not use notify inside handlers

Since latest ansible handlers are not triggered inside the same
handlers flush, which means that triggering mysql restart
the way we did does not work anymore. So instead of
notifying inside handlers, we add listen key to tasks
that are triggered by these newly produced notifications.

This could be due to the bug [1], but ansible-core version that has
backport included still shows inconsistent behaviour

[1] https://github.com/ansible/ansible/issues/80880

Change-Id: I0d97e0b90a8d18a7b69e880e4effa851238d51d1
",git fetch https://review.opendev.org/openstack/openstack-ansible-haproxy_server refs/changes/62/888762/1 && git format-patch -1 --stdout FETCH_HEAD,['handlers/main.yml'],1,2236ee2c48d4839768ef60d5aa57e588c855c0e0,osa/core-2.15, listen: - Regen pem - Regenerate maps - Regenerate haproxy configuration, notify: Reload haproxy notify: Reload haproxy notify: Reload haproxy,4,3
openstack%2Freleases~893318,openstack/releases,master,I5942f57805269764db4f3fcc796bedcd8ef42376,[zed] release oslo.messaging 14.0.2,MERGED,2023-08-31 09:09:39.000000000,2023-08-31 10:02:08.000000000,2023-08-31 10:02:08.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 09:09:39.000000000', 'files': ['deliverables/zed/oslo.messaging.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/6b306f08d95401739eab5318b23e907919a4b1b5', 'message': '[zed] release oslo.messaging 14.0.2\n\nChange-Id: I5942f57805269764db4f3fcc796bedcd8ef42376\n'}]",1,893318,6b306f08d95401739eab5318b23e907919a4b1b5,8,3,1,28522,,,0,"[zed] release oslo.messaging 14.0.2

Change-Id: I5942f57805269764db4f3fcc796bedcd8ef42376
",git fetch https://review.opendev.org/openstack/releases refs/changes/18/893318/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/zed/oslo.messaging.yaml'],1,6b306f08d95401739eab5318b23e907919a4b1b5,bug-2030976, - version: 14.0.2 projects: - repo: openstack/oslo.messaging hash: bf0710d60fda74ec9d5afc31266edcee717c00eb,,4,0
openstack%2Freleases~893317,openstack/releases,master,Ib93ad4296ea1b2daf671fa6e88fedd66ad990e07,[antelope] release oslo.messaging 14.2.2,MERGED,2023-08-31 09:06:46.000000000,2023-08-31 10:02:06.000000000,2023-08-31 10:02:06.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-31 09:06:46.000000000', 'files': ['deliverables/antelope/oslo.messaging.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/3f508f34f1714c58656f30931f5e75e82cc4d8c5', 'message': '[antelope] release oslo.messaging 14.2.2\n\nChange-Id: Ib93ad4296ea1b2daf671fa6e88fedd66ad990e07\n'}]",1,893317,3f508f34f1714c58656f30931f5e75e82cc4d8c5,9,3,1,28522,,,0,"[antelope] release oslo.messaging 14.2.2

Change-Id: Ib93ad4296ea1b2daf671fa6e88fedd66ad990e07
",git fetch https://review.opendev.org/openstack/releases refs/changes/17/893317/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/antelope/oslo.messaging.yaml'],1,3f508f34f1714c58656f30931f5e75e82cc4d8c5,bug-2030976, - version: 14.2.2 projects: - repo: openstack/oslo.messaging hash: 6aa3c6fd389289507f40d22a83253100ddbb169d,,4,0
openstack%2Freleases~893273,openstack/releases,master,I419de013cfeacbccf656a11e8481cdf4ecc7f93b,Release NGS for Bobcat,MERGED,2023-08-30 18:54:40.000000000,2023-08-31 10:02:04.000000000,2023-08-31 10:02:04.000000000,"[{'_account_id': 308}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 18:54:40.000000000', 'files': ['deliverables/bobcat/networking-generic-switch.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/f7234bbc5d670c4f672889ed0c127410690f653c', 'message': 'Release NGS for Bobcat\n\nNetworking generic switch has minor changes for this release.\n\nChange-Id: I419de013cfeacbccf656a11e8481cdf4ecc7f93b\n'}]",1,893273,f7234bbc5d670c4f672889ed0c127410690f653c,8,5,1,10342,,,0,"Release NGS for Bobcat

Networking generic switch has minor changes for this release.

Change-Id: I419de013cfeacbccf656a11e8481cdf4ecc7f93b
",git fetch https://review.opendev.org/openstack/releases refs/changes/73/893273/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/networking-generic-switch.yaml'],1,f7234bbc5d670c4f672889ed0c127410690f653c,,releases: - version: 7.2.0 projects: - repo: openstack/networking-generic-switch hash: 5246705d24224d9c5cb6d9befd0542162c4ff737,,5,0
openstack%2Freleases~892206,openstack/releases,master,I2f5264b77374a76047eab4657741ab2d7cd947f9,Release final metalsmith for 2023.2 Bobcat,MERGED,2023-08-21 20:14:50.000000000,2023-08-31 10:02:02.000000000,2023-08-31 10:02:02.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-21 20:14:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/fbe2e450fd7f2121c690cd0862638132048ab41e', 'message': 'Release final metalsmith for 2023.2 Bobcat\n\nThis proposed a release for metalsmith to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 2.0.0..97b95f1\n97b95f1 Add centos9 based job\n\nChange-Id: I2f5264b77374a76047eab4657741ab2d7cd947f9\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n'}, {'number': 2, 'created': '2023-08-28 09:41:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/11663fd3b34defcc589d480641b4d5a9a39f47ac', 'message': 'Release final metalsmith for 2023.2 Bobcat\n\nThis proposed a release for metalsmith to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 2.0.0..a3b966d\na3b966d Add a CentOS Stream 9 bios job\nb63793d Use jammy nodes to run CI jobs\n97b95f1 Add centos9 based job\n\nChange-Id: I2f5264b77374a76047eab4657741ab2d7cd947f9\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n'}, {'number': 3, 'created': '2023-08-31 07:23:46.000000000', 'files': ['deliverables/bobcat/metalsmith.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/ca89f8d2e399cc15cc6273cd860904c56e6321c5', 'message': 'Release final metalsmith for 2023.2 Bobcat\n\nThis proposed a release for metalsmith to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 2.0.0..968c9a0\n968c9a0 Remove CentOS Stream 8 jobs\na3b966d Add a CentOS Stream 9 bios job\nb63793d Use jammy nodes to run CI jobs\n97b95f1 Add centos9 based job\n\nChange-Id: I2f5264b77374a76047eab4657741ab2d7cd947f9\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n'}]",6,892206,ca89f8d2e399cc15cc6273cd860904c56e6321c5,17,6,3,17685,,,0,"Release final metalsmith for 2023.2 Bobcat

This proposed a release for metalsmith to get any final merged
changes out prior to the lib freeze for 2023.2 Bobcat going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, August 25th.

$ git log --oneline --no-merges 2.0.0..968c9a0
968c9a0 Remove CentOS Stream 8 jobs
a3b966d Add a CentOS Stream 9 bios job
b63793d Use jammy nodes to run CI jobs
97b95f1 Add centos9 based job

Change-Id: I2f5264b77374a76047eab4657741ab2d7cd947f9
Signed-off-by: Elod Illes <elod.illes@est.tech>
",git fetch https://review.opendev.org/openstack/releases refs/changes/06/892206/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/metalsmith.yaml'],1,fbe2e450fd7f2121c690cd0862638132048ab41e,bobcat-final-non-client-libs, - version: 2.0.1 projects: - repo: openstack/metalsmith hash: 97b95f16865fe9a563e14f10897c20dca5d9a908,,4,0
openstack%2Freleases~892964,openstack/releases,master,Ifae084610be836ffee2915aea121c3992526007d,Release final python-zunclient for 2023.2 Bobcat,MERGED,2023-08-28 13:28:19.000000000,2023-08-31 10:02:00.000000000,2023-08-31 10:02:00.000000000,"[{'_account_id': 308}, {'_account_id': 11536}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:28:19.000000000', 'files': ['deliverables/bobcat/python-zunclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/c828eb9bc36ee0f1bad1d5e05d6085a6afc52d56', 'message': 'Release final python-zunclient for 2023.2 Bobcat\n\nThis is a release for python-zunclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 4.6.0..fae90ce\nfae90ce Fix pep8 job\n8af0647 Update master for stable/2023.1\n\nChange-Id: Ifae084610be836ffee2915aea121c3992526007d\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",0,892964,c828eb9bc36ee0f1bad1d5e05d6085a6afc52d56,9,4,1,28522,,,0,"Release final python-zunclient for 2023.2 Bobcat

This is a release for python-zunclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 4.6.0..fae90ce
fae90ce Fix pep8 job
8af0647 Update master for stable/2023.1

Change-Id: Ifae084610be836ffee2915aea121c3992526007d
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/64/892964/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-zunclient.yaml'],1,c828eb9bc36ee0f1bad1d5e05d6085a6afc52d56,bobcat-milestone-3,releases: - version: 4.7.0 projects: - repo: openstack/python-zunclient hash: fae90cee448c17c48a872201f44b42648163f28f,,5,0
openstack%2Freleases~892212,openstack/releases,master,Ib894e366e7916aa240b70c7462cf8783b2ab0cab,Release final openstacksdk for 2023.2 Bobcat,MERGED,2023-08-21 20:20:07.000000000,2023-08-31 09:59:13.000000000,2023-08-31 09:59:13.000000000,"[{'_account_id': 308}, {'_account_id': 8313}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-08-21 20:20:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/e70e0cd0359f2d6e40b9c91c5d92253311303683', 'message': ""Release final openstacksdk for 2023.2 Bobcat\n\nThis proposed a release for openstacksdk to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 1.4.0..21aade2f\nc05e17a0 image: Fixed URL for stores_info\nc6aaae56 Add image metadef object operations\n7b5356f3 Support manage/unmanage shares with manila\n8f9aa3b7 fix memory leak of Connections\nbb4f5f1e tests: Skip intermittently failing placement traits test\n8ee8f57a Stop randomly sorting error lines\n460cee1f Cleanup logic to either dry-run, bulk_delete or do single object deletes\nd7cb495b Fix manila access rules functional tests\n84f28505 tox: Add environment documentation\n82ee4444 cloud: Remove '_object_store_client'\n7852d957 cloud: Remove '_{service}_client' properties\n0f7aeda9 cloud: Remove '_is_client_version'\n6ef2af39 Implemented methods for share metadata\n\nChange-Id: Ib894e366e7916aa240b70c7462cf8783b2ab0cab\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n""}, {'number': 2, 'created': '2023-08-24 15:15:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/468675682f2818ffc027f4177b649c686e083c21', 'message': ""Release final openstacksdk for 2023.2 Bobcat\n\nThis proposed a release for openstacksdk to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 1.4.0..21aade2f\nc05e17a0 image: Fixed URL for stores_info\nc6aaae56 Add image metadef object operations\n7b5356f3 Support manage/unmanage shares with manila\n8f9aa3b7 fix memory leak of Connections\nbb4f5f1e tests: Skip intermittently failing placement traits test\n8ee8f57a Stop randomly sorting error lines\n460cee1f Cleanup logic to either dry-run, bulk_delete or do single object deletes\nd7cb495b Fix manila access rules functional tests\n84f28505 tox: Add environment documentation\n82ee4444 cloud: Remove '_object_store_client'\n7852d957 cloud: Remove '_{service}_client' properties\n0f7aeda9 cloud: Remove '_is_client_version'\n6ef2af39 Implemented methods for share metadata\n\nChange-Id: Ib894e366e7916aa240b70c7462cf8783b2ab0cab\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n""}, {'number': 3, 'created': '2023-08-29 06:47:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/c4ab1599b66807868033b4edd3a94cc30af9a463', 'message': ""Release final openstacksdk for 2023.2 Bobcat\n\nThis proposed a release for openstacksdk to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 1.4.0..21aade2f\nc05e17a0 image: Fixed URL for stores_info\nc6aaae56 Add image metadef object operations\n7b5356f3 Support manage/unmanage shares with manila\n8f9aa3b7 fix memory leak of Connections\nbb4f5f1e tests: Skip intermittently failing placement traits test\n8ee8f57a Stop randomly sorting error lines\n460cee1f Cleanup logic to either dry-run, bulk_delete or do single object deletes\nd7cb495b Fix manila access rules functional tests\n84f28505 tox: Add environment documentation\n82ee4444 cloud: Remove '_object_store_client'\n7852d957 cloud: Remove '_{service}_client' properties\n0f7aeda9 cloud: Remove '_is_client_version'\n6ef2af39 Implemented methods for share metadata\n\nChange-Id: Ib894e366e7916aa240b70c7462cf8783b2ab0cab\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n""}, {'number': 4, 'created': '2023-08-29 10:51:04.000000000', 'files': ['deliverables/bobcat/openstacksdk.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/21f1b998e58052a1ad16e3ed8a725b5da88fa4b1', 'message': ""Release final openstacksdk for 2023.2 Bobcat\n\nThis proposed a release for openstacksdk to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 1.4.0..21aade2f\nc05e17a0 image: Fixed URL for stores_info\nc6aaae56 Add image metadef object operations\n7b5356f3 Support manage/unmanage shares with manila\n8f9aa3b7 fix memory leak of Connections\nbb4f5f1e tests: Skip intermittently failing placement traits test\n8ee8f57a Stop randomly sorting error lines\n460cee1f Cleanup logic to either dry-run, bulk_delete or do single object deletes\nd7cb495b Fix manila access rules functional tests\n84f28505 tox: Add environment documentation\n82ee4444 cloud: Remove '_object_store_client'\n7852d957 cloud: Remove '_{service}_client' properties\n0f7aeda9 cloud: Remove '_is_client_version'\n6ef2af39 Implemented methods for share metadata\n\nChange-Id: Ib894e366e7916aa240b70c7462cf8783b2ab0cab\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n""}]",6,892212,21f1b998e58052a1ad16e3ed8a725b5da88fa4b1,22,5,4,17685,,,0,"Release final openstacksdk for 2023.2 Bobcat

This proposed a release for openstacksdk to get any final merged
changes out prior to the lib freeze for 2023.2 Bobcat going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, August 25th.

$ git log --oneline --no-merges 1.4.0..21aade2f
c05e17a0 image: Fixed URL for stores_info
c6aaae56 Add image metadef object operations
7b5356f3 Support manage/unmanage shares with manila
8f9aa3b7 fix memory leak of Connections
bb4f5f1e tests: Skip intermittently failing placement traits test
8ee8f57a Stop randomly sorting error lines
460cee1f Cleanup logic to either dry-run, bulk_delete or do single object deletes
d7cb495b Fix manila access rules functional tests
84f28505 tox: Add environment documentation
82ee4444 cloud: Remove '_object_store_client'
7852d957 cloud: Remove '_{service}_client' properties
0f7aeda9 cloud: Remove '_is_client_version'
6ef2af39 Implemented methods for share metadata

Change-Id: Ib894e366e7916aa240b70c7462cf8783b2ab0cab
Signed-off-by: Elod Illes <elod.illes@est.tech>
",git fetch https://review.opendev.org/openstack/releases refs/changes/12/892212/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/openstacksdk.yaml'],1,e70e0cd0359f2d6e40b9c91c5d92253311303683,bobcat-final-non-client-libs, - version: 1.5.0 projects: - repo: openstack/openstacksdk hash: 21aade2f9b5b490aebf591ab3b82bbe7e614fcab,,4,0
openstack%2Freleases~893138,openstack/releases,master,I9b6fa84c43ef659a14416af5fe41643de2c2698a,Release Neutron 23.0.0.0b3 (Neutron Bobcat beta 3),MERGED,2023-08-30 08:53:52.000000000,2023-08-31 09:59:11.000000000,2023-08-31 09:59:11.000000000,"[{'_account_id': 308}, {'_account_id': 1131}, {'_account_id': 4694}, {'_account_id': 8313}, {'_account_id': 11975}, {'_account_id': 13252}, {'_account_id': 16688}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 26285}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-30 08:53:52.000000000', 'files': ['deliverables/bobcat/neutron.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/e5d960cd4112f1f3ccf43ffabf668f04210d6c03', 'message': 'Release Neutron 23.0.0.0b3 (Neutron Bobcat beta 3)\n\nThis release is in sync with the ""neutron-lib"" library, version\n3.8.0, released last week.\n\n$ git log --oneline --no-merges 23.0.0.0b2..f06e659170\nd9eb04478e [FT] Make explicit the ""publish"" call check in ""test_port_forwarding""\n0e5c91c499 Add some more known issues to the OVN gap document\ne6fb32e27d Fix race condition when creating two routers without HA network\n4109ee9bb4 Use the new network HA parameter\n87b2f34a98 Fix ovn-metadata agent sync of unused namespaces\n7ed79c1f78 [OVN][Trunk] Set the subports correct host during live migration\ne1f887ca9f [OVN] Skip the port status UP update during a live migration\n7848eb0bf9 Add ""openstack-tox-py310-with-sqlalchemy-master"" to check queue\n24a645d1d7 Fix bindep for Debian bookworm\n72b5120ac2 Remove local CI job ""tox-py311"" superseded by ""openstack-tox-py311""\n06dbc5227b [OVN] Disable the mcast_flood_reports option for LSPs\n4295598261 Use SQLAlchemy expression ""select""\n49fcd2f515 Force DB migration script to be run before some fullstack tests\n43b4c9ebc5 [sqlalchemy-20] TableClause.insert constructs Insert object\n3044b938b9 [OVN] Retry retrieving LSP hosting information\nafcce6d749 Initialize logger for rpc-server and wsgi script\n4693836a1b [OVN] ovn-db-sync check for router port differences\n395dd237d1 Fix missing oslo.versionedobjects library option\n6fef1e6525 Add max limit to agent_down_time\n0741a0d5a5 Add NET_OWNER_MEMBER and NET_OWNER_READER policy rules\n5b7031841e Create is_ovn_metadata_port() method\na505ff7dbb hash-ring: Retry all DB operations if inactive\n14b2f4f60f [UT] Create network to make lazy loading in the models_v2 possible\n4757b46646 Fix some new pylint ""W"" warnings\n9e8e3a7867 [OVN] Hash Ring: Better handle Neutron worker failures\n019d3421f2 Update Cirros to 0.6.2\nba6f7bf83e dvr: Avoid installing non-dvr openflow rule on startup\n89702218db Add extra router attributes for ECMP and BFD\n6c513217c2 ovs-agent: React to DB down just like to server down\n36db70a718 Add sanity check for dnsmasq 2.86\n321182980d Follow up on a small nit from patch 875989 [1]\n96fd203a14 For hosts in DVR mode, only fetch bound FIPs\n5db57734aa Initialize config in DietTestCase class\n929b383743 Fix some new pylint ""R"" warnings\naeb8036393 [sqlalchemy-20] Replace Query.get() with Session.get()\nc831771053 [PostgreSQL] Subnet entity with ServiceType grouped by both tables\ncc38cb0cee [sqlalchemy-20] Use the correct OVO field type\nc94fb2bb88 [sqlalchemy-20] Define one DB model per ""FromClause.join"" clause\na9c8bf5c06 [neutron-api] remove leader_only for sb connection\n32121ee638 Add unit tests periodic jobs to the experimental queue\nb2f1cc724a Add ""openstack-tox-py310-with-sqlalchemy-master"" CI job\n49b68d36a0 [Docs] Add recommendation about usage of cache in the neutron-metadata-agent\n67be07fd5b Add new DEFAULT option named ""my_ipv6""\ne41fae522b Default SG api rules template - DB and OVO models\n670675dd17 [sqlalchemy-20] Network ""repr"" should be tested with any order\n02b12b0917 Refactor for ovs qos driver meter limit features\n65bbbcee76 Set result when lswitch port exist\n26a2266cf4 [FT] Move ``BaseOVSTestCase`` class to concurrency 1 executor\n80ad28e696 Define the port ""fixed_ips"" in the creation call\n68ecae5ff9 [OVN] Prevent binding a virtual type port\nb4eb5d71ab Drop redundant index on ports table\n42ae944870 Switch fullstack/functional fips jobs to 9-stream\nf2dd2d3cac doc: fix typo in metering-agent.rst\n4a71a7f82f Remove unused method from OVN L3 plugin\n833a6d82cd [OVN] Prevent Trunk creation/deletion with parent port bound\n28926957d6 [OVN] Expose chassis hosting information in LSP\nb92d133de6 [OVN] Read the necessary configuration options in the OVN agent load\nc8c74f12e0 Load FIP information during initialize not init\n0090572b93 Ensure traffic is not centralized if DVR is enabled\n024704625a Add missing port_binding policies\n39e167ab27 Add neutron-tempest-plugin-linuxbridge job to the periodic queue\n4a97429e7f [OVN] Improve ovn_l3/plugin.py exception logging\nadd2a6eb8c [ovn][ipv6] Add some more tests to skiplist\nb084213382 Add more debugging to common agent code\n8cd949fc9b Increase timeout in test_get_all_devices()\n22ace8a752 [OVS] Check the datapath ID set by the creation method\n6632420675 Revert ""Use ``TextClause`` to define the DB model ""server_default""""\n7b85f9c244 [OVN][L3] Optimize FIP update operation\n32d589f03e Don\'t allow deletion of the router ports without IP addresses\n576c468b71 Disable pool recycle in tests\n67a0b07287 Delete sg rule which remote is the deleted sg\na174467639 Explicitly define the subnet creating a new port\n08fe84f443 [sqlalchemy-20] Remove redundant indexes from some tables\n126d54badc Fix some new pylint ""E"" warnings\ndfe29e6760 Delete network namespace on last port deletion\n9d9f47c20c [OVN] Remove SB ""Chassis""/""Chassis_Private"" duplicated registers\n8887cdf5d3 Imported Translations from Zanata\n955e621167 [OVN][Trunk] Add port binding info on subport when parent is bound\nf2e3ab3805 [OVN] Hash Ring: Set nodes as offline upon exit\n6e3525188f [S-RBAC] Fix policies for CUD subnets APIs\nec4bfb91f0 [qos] _validate_create_network_callback return in no network\n593278550a Functional: assert multiple calls for update_virtual_port_host\n0c66dfaed8 [OVN] The all() and count() methods should be inside a DB txn\n8b0c7d2c8d Return back the test_dvr_ha_router_interface_mtu_update test case\n57e860ca19 Return back the test_dvr_router_interface_mtu_update test case\nafa20faec3 [OVN] Improve Hash Ring logs\n0c09dbdb2a Subnet now inherit the sRBAC perm. from the parent resource Network\n9ca0e34a5e Delete the ""Chassis_Private"" register when deleting an agent\n5e0c102830 Send ovn heatbeat more often.\n15fb672641 dhcp/agent: add more detail to a todo note regarding call_driver\na9323f0325 dhcp/agent: fix \'get_metadata_bind_interface\' driver call\n050536c66e Stop the RPC connections when the agent exits\nce12b6ac19 Do not query neutron-rpc for sg rules upon sg deletion\n1f5f8965c3 gate: bump ovn to the latest LTS release (22.03)\n2a8c7ff4f0 [ovn][ipv6] Skip test_update_router_admin_state\nf9be5d886d Fix \'consider-using-with\' warning\nf070ba6f9d Revert ""[OVN] Remove backwards compatibility with OVN < v20.09""\ne8cd39b3d7 Make DB migration creating indexes in RBACs conditional\n61b358b6b5 [S-RBAC] Add API policies for get and activate port bindings\nb6ce722324 Raise the timeout of ""neutron-ovn-rally-task"" to 9000\ne9da29d16c Change RBAC relationship loading method to ""joined""\n37dda9bc69 Move ``determine_bind_host`` to ``ovn.utils``\nac24dbed1c Implement ``get_port_type_virtual_and_parents`` method\na22b1dedc2 Implement ``get_subnets_address_scopes`` method\n9f6f6d5082 Return 409 Conflict to tenant user deleting port attached to FIP\n2fbfe3855e Improve the ``PortBindingUpdateVirtualPortsEvent`` match filter\n413044f253 [OVN] The L3 scheduler does not use all chassis by default\n1b9a16c956 Add description field to the security_group_default_rules resource\na72e97ddff Update api extension for default sg rules API\na221764751 Allow Multiple External Gateways\n0b67da59c6 [sqlalchemy-20] Open a connection to execute a command\nac231c8174 Improve ""sync_ha_chassis_group"" method\n35cb164ea5 [ovn]disable security group notifier\n9e6675ec06 Increase the waiting period to receive a port creation event\n43ef447a57 SG rule dict method allows DB object and Neutron OVO\n846003c437 Start metadata proxy even if IPv6 DAD fails\n452973c0db Revert ""Use a writer context for the online alembic migrations""\nf42d86cc0d Bump neutron-lib to 3.6.1\nebc0658d55 Revert ""Delete sg rule which remote is the deleted sg""\ne0a2427a2f [ovn] Avoid unwanted ACL_NOT_FOUND error when deleting log objects\nb677d65b2d [OVN][Migration] Enable settings backup subnet for NFS clients\n6fa3d8019f Use ``TextClause`` to define the DB model ""server_default""\n1d0335810d Disable mysql gather performance in jobs\n10ff1caaca Fix some new pylint ""C"" warnings\ned274efcf7 Update pylint version\n5f4a41326d Add rate-limiting to metadata agents\n43c756d728 [alembic] Alembic operations require keywords only arguments\n0959e452d3 [sqlalchemy-20] Retrieve the ``URL`` string with the password\na86e300a0b Handle no more IP addresses available during a network sync\na612346146 Fix not working use_random_fully config option\na06b44e12d Imported Translations from Zanata\n01af4b2cda Remove the neutron-debug tool\n3b7699bc66 Add scope ID to the ""GROUP BY"" clause in ``get_scoped_floating_ips``\n01de74dedf [S-RBAC] Get QoS rule types API available for READER role\n7573fca58c Notify neutron-server ovs is restarted\nd409296bde docs: Deindent code blocks\n043a8ecad9 [OVN] Use the API context in ``OVNClient._add_router_ext_gw`` method\n363c690529 Replace ""tenant_id"" with ""project_id"" in address scope\n6a2ccfac32 Make ""project_id"" in ""L3HARouterNetwork"" unique constraint\n98ac1fa31a [sqlalchemy-20] Add the transaction context to the upgrade checks methods\n3e65ef863c Mark ""ipv6_pd_enabled"" as deprecated and experimental.\n4edff4fe8d [S-RBAC] Fix new policies for FIP PFs APIs\nbe0dc09d52 [S-RBAC] Fix new policies for get QoS rules APIs\n97d658c4ce port-hint-ovs-tx-steering: shim extension\n6b55589ae0 port-hint-ovs-tx-steering: agent side\n0390ada97c port-hints: api extension\nbe4e150de9 [OVN] Remove backwards compatibility with OVN < v20.09\ndde1d69c78 Add host metadata haproxy manager\n78dbe55f19 Add extra log to help figuring out OVS events\nadaba13bdb Add new DEFAULT option named ""my_ip""\nf23d7af8d7 Use explicit inner join for networks in port query\n33cf2cdc83 Fix ACL sync when default sg group is created\n5c60d697c3 OVN agent: Stop registering unused options\nf3c743d090 Do not update static routes in snat-ns for dvr router with ha\n\nChange-Id: I9b6fa84c43ef659a14416af5fe41643de2c2698a\n'}]",6,893138,e5d960cd4112f1f3ccf43ffabf668f04210d6c03,18,11,1,16688,,,0,"Release Neutron 23.0.0.0b3 (Neutron Bobcat beta 3)

This release is in sync with the ""neutron-lib"" library, version
3.8.0, released last week.

$ git log --oneline --no-merges 23.0.0.0b2..f06e659170
d9eb04478e [FT] Make explicit the ""publish"" call check in ""test_port_forwarding""
0e5c91c499 Add some more known issues to the OVN gap document
e6fb32e27d Fix race condition when creating two routers without HA network
4109ee9bb4 Use the new network HA parameter
87b2f34a98 Fix ovn-metadata agent sync of unused namespaces
7ed79c1f78 [OVN][Trunk] Set the subports correct host during live migration
e1f887ca9f [OVN] Skip the port status UP update during a live migration
7848eb0bf9 Add ""openstack-tox-py310-with-sqlalchemy-master"" to check queue
24a645d1d7 Fix bindep for Debian bookworm
72b5120ac2 Remove local CI job ""tox-py311"" superseded by ""openstack-tox-py311""
06dbc5227b [OVN] Disable the mcast_flood_reports option for LSPs
4295598261 Use SQLAlchemy expression ""select""
49fcd2f515 Force DB migration script to be run before some fullstack tests
43b4c9ebc5 [sqlalchemy-20] TableClause.insert constructs Insert object
3044b938b9 [OVN] Retry retrieving LSP hosting information
afcce6d749 Initialize logger for rpc-server and wsgi script
4693836a1b [OVN] ovn-db-sync check for router port differences
395dd237d1 Fix missing oslo.versionedobjects library option
6fef1e6525 Add max limit to agent_down_time
0741a0d5a5 Add NET_OWNER_MEMBER and NET_OWNER_READER policy rules
5b7031841e Create is_ovn_metadata_port() method
a505ff7dbb hash-ring: Retry all DB operations if inactive
14b2f4f60f [UT] Create network to make lazy loading in the models_v2 possible
4757b46646 Fix some new pylint ""W"" warnings
9e8e3a7867 [OVN] Hash Ring: Better handle Neutron worker failures
019d3421f2 Update Cirros to 0.6.2
ba6f7bf83e dvr: Avoid installing non-dvr openflow rule on startup
89702218db Add extra router attributes for ECMP and BFD
6c513217c2 ovs-agent: React to DB down just like to server down
36db70a718 Add sanity check for dnsmasq 2.86
321182980d Follow up on a small nit from patch 875989 [1]
96fd203a14 For hosts in DVR mode, only fetch bound FIPs
5db57734aa Initialize config in DietTestCase class
929b383743 Fix some new pylint ""R"" warnings
aeb8036393 [sqlalchemy-20] Replace Query.get() with Session.get()
c831771053 [PostgreSQL] Subnet entity with ServiceType grouped by both tables
cc38cb0cee [sqlalchemy-20] Use the correct OVO field type
c94fb2bb88 [sqlalchemy-20] Define one DB model per ""FromClause.join"" clause
a9c8bf5c06 [neutron-api] remove leader_only for sb connection
32121ee638 Add unit tests periodic jobs to the experimental queue
b2f1cc724a Add ""openstack-tox-py310-with-sqlalchemy-master"" CI job
49b68d36a0 [Docs] Add recommendation about usage of cache in the neutron-metadata-agent
67be07fd5b Add new DEFAULT option named ""my_ipv6""
e41fae522b Default SG api rules template - DB and OVO models
670675dd17 [sqlalchemy-20] Network ""repr"" should be tested with any order
02b12b0917 Refactor for ovs qos driver meter limit features
65bbbcee76 Set result when lswitch port exist
26a2266cf4 [FT] Move ``BaseOVSTestCase`` class to concurrency 1 executor
80ad28e696 Define the port ""fixed_ips"" in the creation call
68ecae5ff9 [OVN] Prevent binding a virtual type port
b4eb5d71ab Drop redundant index on ports table
42ae944870 Switch fullstack/functional fips jobs to 9-stream
f2dd2d3cac doc: fix typo in metering-agent.rst
4a71a7f82f Remove unused method from OVN L3 plugin
833a6d82cd [OVN] Prevent Trunk creation/deletion with parent port bound
28926957d6 [OVN] Expose chassis hosting information in LSP
b92d133de6 [OVN] Read the necessary configuration options in the OVN agent load
c8c74f12e0 Load FIP information during initialize not init
0090572b93 Ensure traffic is not centralized if DVR is enabled
024704625a Add missing port_binding policies
39e167ab27 Add neutron-tempest-plugin-linuxbridge job to the periodic queue
4a97429e7f [OVN] Improve ovn_l3/plugin.py exception logging
add2a6eb8c [ovn][ipv6] Add some more tests to skiplist
b084213382 Add more debugging to common agent code
8cd949fc9b Increase timeout in test_get_all_devices()
22ace8a752 [OVS] Check the datapath ID set by the creation method
6632420675 Revert ""Use ``TextClause`` to define the DB model ""server_default""""
7b85f9c244 [OVN][L3] Optimize FIP update operation
32d589f03e Don't allow deletion of the router ports without IP addresses
576c468b71 Disable pool recycle in tests
67a0b07287 Delete sg rule which remote is the deleted sg
a174467639 Explicitly define the subnet creating a new port
08fe84f443 [sqlalchemy-20] Remove redundant indexes from some tables
126d54badc Fix some new pylint ""E"" warnings
dfe29e6760 Delete network namespace on last port deletion
9d9f47c20c [OVN] Remove SB ""Chassis""/""Chassis_Private"" duplicated registers
8887cdf5d3 Imported Translations from Zanata
955e621167 [OVN][Trunk] Add port binding info on subport when parent is bound
f2e3ab3805 [OVN] Hash Ring: Set nodes as offline upon exit
6e3525188f [S-RBAC] Fix policies for CUD subnets APIs
ec4bfb91f0 [qos] _validate_create_network_callback return in no network
593278550a Functional: assert multiple calls for update_virtual_port_host
0c66dfaed8 [OVN] The all() and count() methods should be inside a DB txn
8b0c7d2c8d Return back the test_dvr_ha_router_interface_mtu_update test case
57e860ca19 Return back the test_dvr_router_interface_mtu_update test case
afa20faec3 [OVN] Improve Hash Ring logs
0c09dbdb2a Subnet now inherit the sRBAC perm. from the parent resource Network
9ca0e34a5e Delete the ""Chassis_Private"" register when deleting an agent
5e0c102830 Send ovn heatbeat more often.
15fb672641 dhcp/agent: add more detail to a todo note regarding call_driver
a9323f0325 dhcp/agent: fix 'get_metadata_bind_interface' driver call
050536c66e Stop the RPC connections when the agent exits
ce12b6ac19 Do not query neutron-rpc for sg rules upon sg deletion
1f5f8965c3 gate: bump ovn to the latest LTS release (22.03)
2a8c7ff4f0 [ovn][ipv6] Skip test_update_router_admin_state
f9be5d886d Fix 'consider-using-with' warning
f070ba6f9d Revert ""[OVN] Remove backwards compatibility with OVN < v20.09""
e8cd39b3d7 Make DB migration creating indexes in RBACs conditional
61b358b6b5 [S-RBAC] Add API policies for get and activate port bindings
b6ce722324 Raise the timeout of ""neutron-ovn-rally-task"" to 9000
e9da29d16c Change RBAC relationship loading method to ""joined""
37dda9bc69 Move ``determine_bind_host`` to ``ovn.utils``
ac24dbed1c Implement ``get_port_type_virtual_and_parents`` method
a22b1dedc2 Implement ``get_subnets_address_scopes`` method
9f6f6d5082 Return 409 Conflict to tenant user deleting port attached to FIP
2fbfe3855e Improve the ``PortBindingUpdateVirtualPortsEvent`` match filter
413044f253 [OVN] The L3 scheduler does not use all chassis by default
1b9a16c956 Add description field to the security_group_default_rules resource
a72e97ddff Update api extension for default sg rules API
a221764751 Allow Multiple External Gateways
0b67da59c6 [sqlalchemy-20] Open a connection to execute a command
ac231c8174 Improve ""sync_ha_chassis_group"" method
35cb164ea5 [ovn]disable security group notifier
9e6675ec06 Increase the waiting period to receive a port creation event
43ef447a57 SG rule dict method allows DB object and Neutron OVO
846003c437 Start metadata proxy even if IPv6 DAD fails
452973c0db Revert ""Use a writer context for the online alembic migrations""
f42d86cc0d Bump neutron-lib to 3.6.1
ebc0658d55 Revert ""Delete sg rule which remote is the deleted sg""
e0a2427a2f [ovn] Avoid unwanted ACL_NOT_FOUND error when deleting log objects
b677d65b2d [OVN][Migration] Enable settings backup subnet for NFS clients
6fa3d8019f Use ``TextClause`` to define the DB model ""server_default""
1d0335810d Disable mysql gather performance in jobs
10ff1caaca Fix some new pylint ""C"" warnings
ed274efcf7 Update pylint version
5f4a41326d Add rate-limiting to metadata agents
43c756d728 [alembic] Alembic operations require keywords only arguments
0959e452d3 [sqlalchemy-20] Retrieve the ``URL`` string with the password
a86e300a0b Handle no more IP addresses available during a network sync
a612346146 Fix not working use_random_fully config option
a06b44e12d Imported Translations from Zanata
01af4b2cda Remove the neutron-debug tool
3b7699bc66 Add scope ID to the ""GROUP BY"" clause in ``get_scoped_floating_ips``
01de74dedf [S-RBAC] Get QoS rule types API available for READER role
7573fca58c Notify neutron-server ovs is restarted
d409296bde docs: Deindent code blocks
043a8ecad9 [OVN] Use the API context in ``OVNClient._add_router_ext_gw`` method
363c690529 Replace ""tenant_id"" with ""project_id"" in address scope
6a2ccfac32 Make ""project_id"" in ""L3HARouterNetwork"" unique constraint
98ac1fa31a [sqlalchemy-20] Add the transaction context to the upgrade checks methods
3e65ef863c Mark ""ipv6_pd_enabled"" as deprecated and experimental.
4edff4fe8d [S-RBAC] Fix new policies for FIP PFs APIs
be0dc09d52 [S-RBAC] Fix new policies for get QoS rules APIs
97d658c4ce port-hint-ovs-tx-steering: shim extension
6b55589ae0 port-hint-ovs-tx-steering: agent side
0390ada97c port-hints: api extension
be4e150de9 [OVN] Remove backwards compatibility with OVN < v20.09
dde1d69c78 Add host metadata haproxy manager
78dbe55f19 Add extra log to help figuring out OVS events
adaba13bdb Add new DEFAULT option named ""my_ip""
f23d7af8d7 Use explicit inner join for networks in port query
33cf2cdc83 Fix ACL sync when default sg group is created
5c60d697c3 OVN agent: Stop registering unused options
f3c743d090 Do not update static routes in snat-ns for dvr router with ha

Change-Id: I9b6fa84c43ef659a14416af5fe41643de2c2698a
",git fetch https://review.opendev.org/openstack/releases refs/changes/38/893138/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/neutron.yaml'],1,e5d960cd4112f1f3ccf43ffabf668f04210d6c03,neutron_bobcat_beta3, - version: 23.0.0.0b3 projects: - repo: openstack/neutron hash: f06e6591709114c148ab806334b41ec4cff3f2f7,,4,0
openstack%2Freleases~893271,openstack/releases,master,I3bfaceb3045a847ec02b1ed8316520de1f59d7a0,Release networking-baremetal for bobcat,MERGED,2023-08-30 18:51:44.000000000,2023-08-31 09:59:09.000000000,2023-08-31 09:59:09.000000000,"[{'_account_id': 308}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 18:51:44.000000000', 'files': ['deliverables/bobcat/networking-baremetal.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/490d8482034f547d2d50cbc4b8702d64058102b9', 'message': 'Release networking-baremetal for bobcat\n\nNo changes this cycle; but bumping the minor version to allow room for\nfuture stable releases.\n\nChange-Id: I3bfaceb3045a847ec02b1ed8316520de1f59d7a0\n'}]",1,893271,490d8482034f547d2d50cbc4b8702d64058102b9,9,5,1,10342,,,0,"Release networking-baremetal for bobcat

No changes this cycle; but bumping the minor version to allow room for
future stable releases.

Change-Id: I3bfaceb3045a847ec02b1ed8316520de1f59d7a0
",git fetch https://review.opendev.org/openstack/releases refs/changes/71/893271/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/networking-baremetal.yaml'],1,490d8482034f547d2d50cbc4b8702d64058102b9,,releases: - version: 6.2.0 projects: - repo: openstack/networking-baremetal hash: 639b0afd18d149e2368de718f4f23b6fee742a65,,5,0
openstack%2Freleases~893270,openstack/releases,master,I52c4fd4f954e2d7b0f4cb1a21cf7853bf0ff8cb6,Release IPA-builder for Bobcat,MERGED,2023-08-30 18:48:32.000000000,2023-08-31 09:59:06.000000000,2023-08-31 09:59:06.000000000,"[{'_account_id': 308}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 18:48:32.000000000', 'files': ['deliverables/bobcat/ironic-python-agent-builder.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/5db71d5b1ef54e392aab71681de4c338430a3789', 'message': 'Release IPA-builder for Bobcat\n\nMinor version chosen to give room for later releases of stable/2023.1\n\nChange-Id: I52c4fd4f954e2d7b0f4cb1a21cf7853bf0ff8cb6\n'}]",1,893270,5db71d5b1ef54e392aab71681de4c338430a3789,8,5,1,10342,,,0,"Release IPA-builder for Bobcat

Minor version chosen to give room for later releases of stable/2023.1

Change-Id: I52c4fd4f954e2d7b0f4cb1a21cf7853bf0ff8cb6
",git fetch https://review.opendev.org/openstack/releases refs/changes/70/893270/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/ironic-python-agent-builder.yaml'],1,5db71d5b1ef54e392aab71681de4c338430a3789,,releases: - version: 5.2.0 projects: - repo: openstack/ironic-python-agent-builder hash: 7c2e1b341d6ddc8340b232be92b0e379ce861d41,,5,0
openstack%2Freleases~885709,openstack/releases,master,Ib09542fe62875045db2c332d83b1089f0a1bef36,[barbican-tempest-plugin] Tag xena-last,MERGED,2023-06-09 06:25:47.000000000,2023-08-31 09:57:41.000000000,2023-08-31 09:57:41.000000000,"[{'_account_id': 308}, {'_account_id': 7973}, {'_account_id': 9914}, {'_account_id': 14250}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-09 06:25:47.000000000', 'files': ['deliverables/xena/barbican-tempest-plugin.yaml', 'deliverables/bobcat/barbican-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/1d6288bbc2607a858b6d0c33d2dab5a78f2cc461', 'message': ""[barbican-tempest-plugin] Tag xena-last\n\nXena branch is in Extended Maintenance now[1]. Tempest and\ntempest plugins are branchless which means master version of\nTempest and its plugins is used to test the supported stable\nbranches.\n\nOnce any stable branch is moved to EM state then, Tempest and\nits plugins compatible tag[2] needs to be released so that we can\nkeep testing the EM stable branches with that tag once master\nTempest and its plugins are not compatible[3].\n\nTagging 'xena-last' as well as a new version also with same hash.\n\n[1] https://releases.openstack.org/wallaby/index.html\n[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html\n[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html\n\nChange-Id: Ib09542fe62875045db2c332d83b1089f0a1bef36\n""}]",1,885709,1d6288bbc2607a858b6d0c33d2dab5a78f2cc461,9,6,1,8556,,,0,"[barbican-tempest-plugin] Tag xena-last

Xena branch is in Extended Maintenance now[1]. Tempest and
tempest plugins are branchless which means master version of
Tempest and its plugins is used to test the supported stable
branches.

Once any stable branch is moved to EM state then, Tempest and
its plugins compatible tag[2] needs to be released so that we can
keep testing the EM stable branches with that tag once master
Tempest and its plugins are not compatible[3].

Tagging 'xena-last' as well as a new version also with same hash.

[1] https://releases.openstack.org/wallaby/index.html
[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html

Change-Id: Ib09542fe62875045db2c332d83b1089f0a1bef36
",git fetch https://review.opendev.org/openstack/releases refs/changes/09/885709/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/xena/barbican-tempest-plugin.yaml', 'deliverables/bobcat/barbican-tempest-plugin.yaml']",2,1d6288bbc2607a858b6d0c33d2dab5a78f2cc461,xena-last,releases: - version: 2.1.0 projects: - repo: openstack/barbican-tempest-plugin hash: e765946be16235dafa82809183a4b9e2fa14e078,,9,0
openstack%2Freleases~885720,openstack/releases,master,Icef4f9e5422c34b3c52958a2ea9fddcf022aa244,[keystone-tempest-plugin] Tag xena-last,MERGED,2023-06-09 06:42:19.000000000,2023-08-31 09:57:20.000000000,2023-08-31 09:57:20.000000000,"[{'_account_id': 308}, {'_account_id': 7414}, {'_account_id': 16465}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-09 06:42:19.000000000', 'files': ['deliverables/bobcat/keystone-tempest-plugin.yaml', 'deliverables/xena/keystone-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/b9644b2bd5ea31005b7c24daa80792d1c68a6dfb', 'message': ""[keystone-tempest-plugin] Tag xena-last\n\nXena branch is in Extended Maintenance now[1]. Tempest and\ntempest plugins are branchless which means master version of\nTempest and its plugins is used to test the supported stable\nbranches.\n\nOnce any stable branch is moved to EM state then, Tempest and\nits plugins compatible tag[2] needs to be released so that we can\nkeep testing the EM stable branches with that tag once master\nTempest and its plugins are not compatible[3].\n\nTagging 'xena-last' as well as a new version also with same hash.\n\n[1] https://releases.openstack.org/wallaby/index.html\n[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html\n[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html\n\nChange-Id: Icef4f9e5422c34b3c52958a2ea9fddcf022aa244\n""}]",0,885720,b9644b2bd5ea31005b7c24daa80792d1c68a6dfb,9,5,1,8556,,,0,"[keystone-tempest-plugin] Tag xena-last

Xena branch is in Extended Maintenance now[1]. Tempest and
tempest plugins are branchless which means master version of
Tempest and its plugins is used to test the supported stable
branches.

Once any stable branch is moved to EM state then, Tempest and
its plugins compatible tag[2] needs to be released so that we can
keep testing the EM stable branches with that tag once master
Tempest and its plugins are not compatible[3].

Tagging 'xena-last' as well as a new version also with same hash.

[1] https://releases.openstack.org/wallaby/index.html
[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html

Change-Id: Icef4f9e5422c34b3c52958a2ea9fddcf022aa244
",git fetch https://review.opendev.org/openstack/releases refs/changes/20/885720/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/bobcat/keystone-tempest-plugin.yaml', 'deliverables/xena/keystone-tempest-plugin.yaml']",2,b9644b2bd5ea31005b7c24daa80792d1c68a6dfb,xena-last, - version: xena-last projects: - repo: openstack/keystone-tempest-plugin hash: dbe56f0a07febd9e8babf54b88c63084b59f0b39,,9,0
openstack%2Freleases~885713,openstack/releases,master,If9adb2f68664c6526908186dc0c11649d27bb55e,[ironic-tempest-plugin] Tag xena-last,MERGED,2023-06-09 06:34:21.000000000,2023-08-31 09:56:58.000000000,2023-08-31 09:56:58.000000000,"[{'_account_id': 308}, {'_account_id': 10342}, {'_account_id': 15519}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-06-09 06:34:21.000000000', 'files': ['deliverables/bobcat/ironic-tempest-plugin.yaml', 'deliverables/xena/ironic-tempest-plugin.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/d52b3296c493fc6aa562256a7f724cea9f1669a3', 'message': ""[ironic-tempest-plugin] Tag xena-last\n\nXena branch is in Extended Maintenance now[1]. Tempest and\ntempest plugins are branchless which means master version of\nTempest and its plugins is used to test the supported stable\nbranches.\n\nOnce any stable branch is moved to EM state then, Tempest and\nits plugins compatible tag[2] needs to be released so that we can\nkeep testing the EM stable branches with that tag once master\nTempest and its plugins are not compatible[3].\n\nTagging 'xena-last' as well as a new version also with same hash.\n\n[1] https://releases.openstack.org/wallaby/index.html\n[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html\n[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html\n\nChange-Id: If9adb2f68664c6526908186dc0c11649d27bb55e\n""}]",0,885713,d52b3296c493fc6aa562256a7f724cea9f1669a3,9,6,1,8556,,,0,"[ironic-tempest-plugin] Tag xena-last

Xena branch is in Extended Maintenance now[1]. Tempest and
tempest plugins are branchless which means master version of
Tempest and its plugins is used to test the supported stable
branches.

Once any stable branch is moved to EM state then, Tempest and
its plugins compatible tag[2] needs to be released so that we can
keep testing the EM stable branches with that tag once master
Tempest and its plugins are not compatible[3].

Tagging 'xena-last' as well as a new version also with same hash.

[1] https://releases.openstack.org/wallaby/index.html
[2] https://docs.openstack.org/tempest/latest/stable_branch_support_policy.html
[3] https://docs.openstack.org/tempest/latest/tempest_and_plugins_compatible_version_policy.html

Change-Id: If9adb2f68664c6526908186dc0c11649d27bb55e
",git fetch https://review.opendev.org/openstack/releases refs/changes/13/885713/1 && git format-patch -1 --stdout FETCH_HEAD,"['deliverables/bobcat/ironic-tempest-plugin.yaml', 'deliverables/xena/ironic-tempest-plugin.yaml']",2,d52b3296c493fc6aa562256a7f724cea9f1669a3,xena-last, - version: xena-last projects: - repo: openstack/ironic-tempest-plugin hash: 3c8235ed02c10940fc3889ae04d9ba7a6a8bbb34,,9,0
openstack%2Freleases~892942,openstack/releases,master,I271f3ecf1c60a0405289b72d3dff97c1813c0eaf,Release final python-designateclient for 2023.2 Bobcat,MERGED,2023-08-28 13:13:27.000000000,2023-08-31 09:54:53.000000000,2023-08-31 09:54:53.000000000,"[{'_account_id': 308}, {'_account_id': 11628}, {'_account_id': 17685}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:13:27.000000000', 'files': ['deliverables/bobcat/python-designateclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/a210235bb58c87720806d56be237e00bfbb2ab7e', 'message': 'Release final python-designateclient for 2023.2 Bobcat\n\nThis is a release for python-designateclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 5.2.0..4796812\n4796812 Add python3.9 support in testing runtime\nd7bca35 Update master for stable/2023.1\n34292ee Add hacking check for line continuation backslash\na692fd5 Drop explicit queue configuration\n\nChange-Id: I271f3ecf1c60a0405289b72d3dff97c1813c0eaf\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",2,892942,a210235bb58c87720806d56be237e00bfbb2ab7e,9,4,1,28522,,,0,"Release final python-designateclient for 2023.2 Bobcat

This is a release for python-designateclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 5.2.0..4796812
4796812 Add python3.9 support in testing runtime
d7bca35 Update master for stable/2023.1
34292ee Add hacking check for line continuation backslash
a692fd5 Drop explicit queue configuration

Change-Id: I271f3ecf1c60a0405289b72d3dff97c1813c0eaf
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/42/892942/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-designateclient.yaml'],1,a210235bb58c87720806d56be237e00bfbb2ab7e,bobcat-milestone-3,releases: - version: 5.3.0 projects: - repo: openstack/python-designateclient hash: 479681254387e1199a260ec825f10476827569c3,,5,0
openstack%2Fopenstack-ansible-haproxy_server~888143,openstack/openstack-ansible-haproxy_server,master,I8c316dd62ac22ccd9578bb0199ab8f25c0104f9a,Fix linters issue and metadata,MERGED,2023-07-11 16:54:10.000000000,2023-08-31 09:54:45.000000000,2023-08-31 09:53:51.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 31542}, {'_account_id': 32666}]","[{'number': 1, 'created': '2023-07-11 16:54:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/7e6f72321e2c7684623cc911713bb75b70721311', 'message': ""Fix linters issue and metadata\n\nWith update of ansible-lint to version >=6.0.0 a lot of new\nlinters were added, that enabled by default. In order to comply\nwith linter rules we're applying changes to the role.\n\nWith that we also update metdata to reflect current state.\n\nChange-Id: I8c316dd62ac22ccd9578bb0199ab8f25c0104f9a\n""}, {'number': 2, 'created': '2023-07-12 15:35:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/96f55bb20d14e73dc18150ddb760a907d1d2d52f', 'message': ""Fix linters issue and metadata\n\nWith update of ansible-lint to version >=6.0.0 a lot of new\nlinters were added, that enabled by default. In order to comply\nwith linter rules we're applying changes to the role.\n\nWith that we also update metdata to reflect current state.\n\nChange-Id: I8c316dd62ac22ccd9578bb0199ab8f25c0104f9a\n""}, {'number': 3, 'created': '2023-07-19 11:43:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/196feec942fb26a34355798b3e1266b8fe5b4bd3', 'message': ""Fix linters issue and metadata\n\nWith update of ansible-lint to version >=6.0.0 a lot of new\nlinters were added, that enabled by default. In order to comply\nwith linter rules we're applying changes to the role.\n\nWith that we also update metdata to reflect current state.\n\nChange-Id: I8c316dd62ac22ccd9578bb0199ab8f25c0104f9a\n""}, {'number': 4, 'created': '2023-08-07 06:55:22.000000000', 'files': ['tasks/haproxy_post_install.yml', 'tasks/main.yml', 'tasks/haproxy_install.yml', 'tasks/haproxy_ssl_letsencrypt.yml', 'handlers/main.yml', 'tasks/haproxy_pre_install.yml', 'tasks/haproxy_service_config.yml', 'defaults/main.yml', 'vars/main.yml', 'meta/main.yml', 'tasks/haproxy_service_config_external.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/c0da2e50952d530bc3e773832b55bf30a16956aa', 'message': ""Fix linters issue and metadata\n\nWith update of ansible-lint to version >=6.0.0 a lot of new\nlinters were added, that enabled by default. In order to comply\nwith linter rules we're applying changes to the role.\n\nWith that we also update metdata to reflect current state.\n\nChange-Id: I8c316dd62ac22ccd9578bb0199ab8f25c0104f9a\n""}]",4,888143,c0da2e50952d530bc3e773832b55bf30a16956aa,21,4,4,28619,,,0,"Fix linters issue and metadata

With update of ansible-lint to version >=6.0.0 a lot of new
linters were added, that enabled by default. In order to comply
with linter rules we're applying changes to the role.

With that we also update metdata to reflect current state.

Change-Id: I8c316dd62ac22ccd9578bb0199ab8f25c0104f9a
",git fetch https://review.opendev.org/openstack/openstack-ansible-haproxy_server refs/changes/43/888143/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/haproxy_post_install.yml', 'tasks/main.yml', 'tasks/haproxy_install.yml', 'tasks/haproxy_ssl_letsencrypt.yml', 'handlers/main.yml', 'tasks/haproxy_pre_install.yml', 'tasks/haproxy_service_config.yml', 'defaults/main.yml', 'vars/main.yml', 'meta/main.yml', 'tasks/haproxy_service_config_external.yml']",11,7e6f72321e2c7684623cc911713bb75b70721311,osa/core-2.15,- name: Including haproxy_service_config tasks include_tasks: haproxy_service_config.yml,- include_tasks: haproxy_service_config.yml,96,48
openstack%2Fdiskimage-builder~869077,openstack/diskimage-builder,master,Ie0c05ba9ba2d8d24d395801364078e7a9b0f80bc,Fix for cloud-user home being owned by root,ABANDONED,2023-01-03 12:06:45.000000000,2023-08-31 09:52:22.000000000,,"[{'_account_id': 7118}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-01-03 12:06:45.000000000', 'files': ['diskimage_builder/elements/yum-minimal/root.d/08-yum-chroot', 'releasenotes/notes/clean_cache-589c11fccdb1eb0a.yaml'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/ee48068d9b8edd335bda8a954ddef514705a6260', 'message': 'Fix for cloud-user home being owned by root\n\nCloses bug https://bugs.launchpad.net/diskimage-builder/+bug/2000913\n\nChange-Id: Ie0c05ba9ba2d8d24d395801364078e7a9b0f80bc\n'}]",5,869077,ee48068d9b8edd335bda8a954ddef514705a6260,15,2,1,34940,,,0,"Fix for cloud-user home being owned by root

Closes bug https://bugs.launchpad.net/diskimage-builder/+bug/2000913

Change-Id: Ie0c05ba9ba2d8d24d395801364078e7a9b0f80bc
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/77/869077/1 && git format-patch -1 --stdout FETCH_HEAD,"['diskimage_builder/elements/yum-minimal/root.d/08-yum-chroot', 'releasenotes/notes/clean_cache-589c11fccdb1eb0a.yaml']",2,ee48068d9b8edd335bda8a954ddef514705a6260,clean_cache_fix,--- fixes: - | Fix for cloud-user home being owned by root after the image is built from a non-root user. https://bugs.launchpad.net/diskimage-builder/+bug/2000913 ,,7,1
openstack%2Freleases~892177,openstack/releases,master,I9c90a1a42a18725151288ba13ee4192b48f911a0,Release final automaton for 2023.2 Bobcat,MERGED,2023-08-21 20:07:52.000000000,2023-08-31 09:50:09.000000000,2023-08-31 09:50:09.000000000,"[{'_account_id': 308}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 31245}]","[{'number': 1, 'created': '2023-08-21 20:07:52.000000000', 'files': ['deliverables/bobcat/automaton.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/d87501abae52872792353f3206f03e381a2e7d4e', 'message': 'Release final automaton for 2023.2 Bobcat\n\nThis proposed a release for automaton to get any final merged\nchanges out prior to the lib freeze for 2023.2 Bobcat going into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, August 25th.\n\n$ git log --oneline --no-merges 3.1.0..9255778\n9255778 Update master for stable/2023.1\n\nChange-Id: I9c90a1a42a18725151288ba13ee4192b48f911a0\nSigned-off-by: Elod Illes <elod.illes@est.tech>\n'}]",4,892177,d87501abae52872792353f3206f03e381a2e7d4e,11,5,1,17685,,,0,"Release final automaton for 2023.2 Bobcat

This proposed a release for automaton to get any final merged
changes out prior to the lib freeze for 2023.2 Bobcat going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, August 25th.

$ git log --oneline --no-merges 3.1.0..9255778
9255778 Update master for stable/2023.1

Change-Id: I9c90a1a42a18725151288ba13ee4192b48f911a0
Signed-off-by: Elod Illes <elod.illes@est.tech>
",git fetch https://review.opendev.org/openstack/releases refs/changes/77/892177/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/automaton.yaml'],1,d87501abae52872792353f3206f03e381a2e7d4e,bobcat-final-non-client-libs,releases: - version: 3.2.0 projects: - repo: openstack/automaton hash: 925577850dd413344c762032dfae5424b12aa10c,,5,0
openstack%2Fneutron~893171,openstack/neutron,stable/xena,I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""",MERGED,2023-08-30 12:46:08.000000000,2023-08-31 09:49:52.000000000,2023-08-31 09:48:37.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 13861}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 12:46:08.000000000', 'files': ['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/4acbf7a15cf13257b5f5916024aca45d70963ae7', 'message': '[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""\n\nThe functional test ""TestMaintenance.test_port_forwarding"" is checking\nthe ""registry.publish"" call after calling\n""delete_floatingip_port_forwarding"". This patch makes this check\nexplicit for the expected call.\n\nCloses-Bug: #2033387\nChange-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0\n(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)\n'}]",1,893171,4acbf7a15cf13257b5f5916024aca45d70963ae7,9,4,1,16688,,,0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""

The functional test ""TestMaintenance.test_port_forwarding"" is checking
the ""registry.publish"" call after calling
""delete_floatingip_port_forwarding"". This patch makes this check
explicit for the expected call.

Closes-Bug: #2033387
Change-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0
(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/71/893171/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'],1,4acbf7a15cf13257b5f5916024aca45d70963ae7,bug/2033387," call = mock.call('port_forwarding', 'after_delete', self.pf_plugin, payload=mock.ANY) m_publish.assert_has_calls([call])", m_publish.assert_called_once(),3,1
openstack%2Fopenstack-ansible-os_cinder~887058,openstack/openstack-ansible-os_cinder,stable/zed,I711241af8f7520b97f2b1cafd1406ff705fb78a6,Use v3 service type in keystone_authtoken config,MERGED,2023-06-27 15:09:40.000000000,2023-08-31 09:42:38.000000000,2023-08-31 09:41:40.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-06-27 15:09:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/0bb696f5d79dca04bc83556960bafc93755b77ae', 'message': 'Use v3 service type in keystone_authtoken config\n\nThe service type in this config section must match the service\ntype in the service catalog, otherwise limited scope application\ncredentials will not work with the cinder API [1].\n\n[1] https://docs.openstack.org/keystone/2023.1/user/application_credentials.html#access-rules\n\nChange-Id: I711241af8f7520b97f2b1cafd1406ff705fb78a6\n(cherry picked from commit 2820fcc1d6f0b48e9d25a6bdf5f78d629efb1f0c)\n'}, {'number': 2, 'created': '2023-06-28 11:00:00.000000000', 'files': ['templates/cinder.conf.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_cinder/commit/f33184e470f1e1d80d1a05c6fd400fdcb2695fc5', 'message': 'Use v3 service type in keystone_authtoken config\n\nThe service type in this config section must match the service\ntype in the service catalog, otherwise limited scope application\ncredentials will not work with the cinder API [1].\n\n[1] https://docs.openstack.org/keystone/2023.1/user/application_credentials.html#access-rules\n\nChange-Id: I711241af8f7520b97f2b1cafd1406ff705fb78a6\n(cherry picked from commit 2820fcc1d6f0b48e9d25a6bdf5f78d629efb1f0c)\nDepends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/887157\n'}]",1,887058,f33184e470f1e1d80d1a05c6fd400fdcb2695fc5,12,3,2,28619,,,0,"Use v3 service type in keystone_authtoken config

The service type in this config section must match the service
type in the service catalog, otherwise limited scope application
credentials will not work with the cinder API [1].

[1] https://docs.openstack.org/keystone/2023.1/user/application_credentials.html#access-rules

Change-Id: I711241af8f7520b97f2b1cafd1406ff705fb78a6
(cherry picked from commit 2820fcc1d6f0b48e9d25a6bdf5f78d629efb1f0c)
Depends-On: https://review.opendev.org/c/openstack/openstack-ansible/+/887157
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_cinder refs/changes/58/887058/1 && git format-patch -1 --stdout FETCH_HEAD,['templates/cinder.conf.j2'],1,0bb696f5d79dca04bc83556960bafc93755b77ae,,service_type = {{ cinder_service_v3_type }},service_type = {{ cinder_service_type }},1,1
openstack%2Fopenstack-ansible-haproxy_server~891572,openstack/openstack-ansible-haproxy_server,master,Ib14f031f3c61f31bf7aaf345a3ba635ca5fb9ff8,Add HTTP/2 support for frontends/backends,MERGED,2023-08-16 08:37:06.000000000,2023-08-31 09:38:15.000000000,2023-08-31 09:37:17.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}, {'_account_id': 32666}]","[{'number': 1, 'created': '2023-08-16 08:37:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/2d5eb07d8cccdad54e546b77b7173ca678204772', 'message': 'Add HTTP/2 support for frontends/backends\n\nThis patch implements extra variables/keys that can be used to\nenable HTTP/2 protocol for frontends and backends.\n\nWith that patch does not add HTTP/2 support for any redirect frontends\nsince they can not be configured to use TLS and this it will\ncause such redirect backends to be HTTP/2 only, which might break old\nclients.\n\nWith that regular frontends, that are not terminating TLS can be\nconfigured to be HTTP/2 only as well as TCP backends.\n\nChange-Id: Ib14f031f3c61f31bf7aaf345a3ba635ca5fb9ff8\n'}, {'number': 2, 'created': '2023-08-16 09:21:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/2e499c045b35787d1e16f1bdf09593730f36b585', 'message': 'Add HTTP/2 support for frontends/backends\n\nThis patch implements extra variables/keys that can be used to\nenable HTTP/2 protocol for frontends and backends.\n\nWith that patch does not add HTTP/2 support for any redirect frontends\nsince they can not be configured to use TLS and this it will\ncause such redirect backends to be HTTP/2 only, which might break old\nclients.\n\nWith that regular frontends, that are not terminating TLS can be\nconfigured to be HTTP/2 only as well as TCP backends.\n\nChange-Id: Ib14f031f3c61f31bf7aaf345a3ba635ca5fb9ff8\n'}, {'number': 3, 'created': '2023-08-23 13:20:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/70f93dccbf124461d499a73e1d9f2b6407f720ee', 'message': 'Add HTTP/2 support for frontends/backends\n\nThis patch implements extra variables/keys that can be used to\nenable HTTP/2 protocol for frontends and backends.\n\nWith that patch does not add HTTP/2 support for any redirect frontends\nsince they can not be configured to use TLS and this it will\ncause such redirect backends to be HTTP/2 only, which might break old\nclients.\n\nWith that regular frontends, that are not terminating TLS can be\nconfigured to be HTTP/2 only as well as TCP backends.\n\nChange-Id: Ib14f031f3c61f31bf7aaf345a3ba635ca5fb9ff8\n'}, {'number': 4, 'created': '2023-08-23 13:22:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/871a3d5fdf996f780be57a2622bc484ab750adec', 'message': 'Add HTTP/2 support for frontends/backends\n\nThis patch implements extra variables/keys that can be used to\nenable HTTP/2 protocol for frontends and backends.\n\nWith that patch does not add HTTP/2 support for any redirect frontends\nsince they can not be configured to use TLS and this it will\ncause such redirect backends to be HTTP/2 only, which might break old\nclients.\n\nWith that regular frontends, that are not terminating TLS can be\nconfigured to be HTTP/2 only as well as TCP backends.\n\nChange-Id: Ib14f031f3c61f31bf7aaf345a3ba635ca5fb9ff8\n'}, {'number': 5, 'created': '2023-08-23 13:24:43.000000000', 'files': ['templates/service.j2', 'releasenotes/notes/h2_initial_support-99a3277939942405.yaml', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-haproxy_server/commit/67e19ebccd67d582e8770b1608307430d1ce5570', 'message': 'Add HTTP/2 support for frontends/backends\n\nThis patch implements extra variables/keys that can be used to\nenable HTTP/2 protocol for frontends and backends.\n\nWith that patch does not add HTTP/2 support for any redirect frontends\nsince they can not be configured to use TLS and this it will\ncause such redirect backends to be HTTP/2 only, which might break old\nclients.\n\nWith that regular frontends, that are not terminating TLS can be\nconfigured to be HTTP/2 only as well as TCP backends.\n\nChange-Id: Ib14f031f3c61f31bf7aaf345a3ba635ca5fb9ff8\n'}]",2,891572,67e19ebccd67d582e8770b1608307430d1ce5570,17,4,5,28619,,,0,"Add HTTP/2 support for frontends/backends

This patch implements extra variables/keys that can be used to
enable HTTP/2 protocol for frontends and backends.

With that patch does not add HTTP/2 support for any redirect frontends
since they can not be configured to use TLS and this it will
cause such redirect backends to be HTTP/2 only, which might break old
clients.

With that regular frontends, that are not terminating TLS can be
configured to be HTTP/2 only as well as TCP backends.

Change-Id: Ib14f031f3c61f31bf7aaf345a3ba635ca5fb9ff8
",git fetch https://review.opendev.org/openstack/openstack-ansible-haproxy_server refs/changes/72/891572/1 && git format-patch -1 --stdout FETCH_HEAD,"['templates/service.j2', 'releasenotes/notes/h2_initial_support-99a3277939942405.yaml', 'defaults/main.yml']",3,2d5eb07d8cccdad54e546b77b7173ca678204772,osa/h2,# HTTP/2 support variables haproxy_backend_h2_enable: False haproxy_frontend_h2_enable: False # haproxy_frontend_h2: True # haproxy_backend_h2: False,,27,1
openstack%2Fopenstack-ansible-os_horizon~892354,openstack/openstack-ansible-os_horizon,stable/zed,Ida72c712153dcda4cd06e0959f98ade4fee8dfbd,Fix wrong neutron_ml2_drivers_type,MERGED,2023-08-23 07:13:20.000000000,2023-08-31 09:34:56.000000000,2023-08-31 09:33:56.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-23 07:13:20.000000000', 'files': ['defaults/main.yml', 'templates/horizon_local_settings.py.j2'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_horizon/commit/65fb550c5c9d6d7ff04696756808bf31ff2bbbe2', 'message': 'Fix wrong neutron_ml2_drivers_type\n\nneutron_ml2_drivers_type is a string, not a list, while default\nvalue for it is a list. Local settings also assume that it is a list.\n\nSo we ensure that the falue is a string by default now and\ntreat it as string in the code.\n\nChange-Id: Ida72c712153dcda4cd06e0959f98ade4fee8dfbd\n(cherry picked from commit 5d635c469af4e9c9bb85615257e3bb3738ce3a29)\n'}]",1,892354,65fb550c5c9d6d7ff04696756808bf31ff2bbbe2,10,3,1,28619,,,0,"Fix wrong neutron_ml2_drivers_type

neutron_ml2_drivers_type is a string, not a list, while default
value for it is a list. Local settings also assume that it is a list.

So we ensure that the falue is a string by default now and
treat it as string in the code.

Change-Id: Ida72c712153dcda4cd06e0959f98ade4fee8dfbd
(cherry picked from commit 5d635c469af4e9c9bb85615257e3bb3738ce3a29)
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_horizon refs/changes/54/892354/1 && git format-patch -1 --stdout FETCH_HEAD,"['defaults/main.yml', 'templates/horizon_local_settings.py.j2']",2,65fb550c5c9d6d7ff04696756808bf31ff2bbbe2,," 'supported_provider_types': {{ horizon_network_provider_types.split(',') | to_json }},"," 'supported_provider_types': {{ horizon_network_provider_types | to_json }},",2,2
openstack%2Fneutron~892578,openstack/neutron,master,If90e4233c599b0ab4363d7eea6b00436bf7ab92c,Add some more known issues to the OVN gap document,MERGED,2023-08-23 18:54:24.000000000,2023-08-31 09:19:54.000000000,2023-08-29 20:27:06.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-23 18:54:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/0e4a433ebc26b449f570dafd0a021bed204e081d', 'message': 'Add some more known issues to the OVN gap document\n\nSee the related bugs.\n\nRelated-Bug: #2030294\nRelated-Bug: #2030295\nChange-Id: If90e4233c599b0ab4363d7eea6b00436bf7ab92c\n'}, {'number': 2, 'created': '2023-08-27 13:27:24.000000000', 'files': ['doc/source/ovn/gaps.rst'], 'web_link': 'https://opendev.org/openstack/neutron/commit/0e5c91c4996418147cc329f60ce8b0d0eb539f72', 'message': 'Add some more known issues to the OVN gap document\n\nSee the related bugs.\n\nRelated-Bug: #2030294\nRelated-Bug: #2030295\nChange-Id: If90e4233c599b0ab4363d7eea6b00436bf7ab92c\n'}]",10,892578,0e5c91c4996418147cc329f60ce8b0d0eb539f72,22,4,2,13252,,,0,"Add some more known issues to the OVN gap document

See the related bugs.

Related-Bug: #2030294
Related-Bug: #2030295
Change-Id: If90e4233c599b0ab4363d7eea6b00436bf7ab92c
",git fetch https://review.opendev.org/openstack/neutron refs/changes/78/892578/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/ovn/gaps.rst'],1,0e4a433ebc26b449f570dafd0a021bed204e081d,ovn-gaps," OVN answers queries for hosts and IP addresses in tenant networks be spoofing responses from the configured dns_servers. This may lead to confusion in debugging. OVN can only answer queries that are sent via UDP, queries that use TCP will be ignored by OVN and forwarded to the configured resolvers. OVN can only answer queries with no additional options being set (EDNS). Such queries depending on the OVN version will either get broken responses or will also be forwarded to the configured resolvers. * Metadata via IPv6 The OVN metadata agent currently does not allow access via IPv6. ",,15,0
openstack%2Ftripleo-ansible~893177,openstack/tripleo-ansible,master,Ifa0def0eb6fb21a7bb9313a88ff5f4de2e811c27,tripleo_ovs_dpdk: add support for pmd load based sleeping,ABANDONED,2023-08-30 13:05:41.000000000,2023-08-31 09:12:36.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-30 13:05:41.000000000', 'files': ['doc/source/roles/role-tripleo-ovs-dpdk.rst', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/default/tests/test_default.py', 'tripleo_ansible/playbooks/cli-overcloud-openvswitch-dpdk.yaml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/positive/converge.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/positive/tests/test_positive.py', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-ansible/commit/da9deb97ac5af0e42eb42e9840218aafacc3eccf', 'message': 'tripleo_ovs_dpdk: add support for pmd load based sleeping\n\nPMD threads constantly poll Rx queues which are assigned to them. In\norder to reduce the CPU cycles they use, they can sleep for small\nperiods of time when there is no load or very-low load on all the Rx\nqueues they poll.\n\nThis can be enabled by setting the max requested sleep time (in\nmicroseconds) for any PMD thread:\n\n  $ ovs-vsctl set open_vswitch . other_config:pmd-maxsleep=50\n\nWith a non-zero max value a PMD may request to sleep by an incrementing\namount of time up to the maximum time. If at any point the threshold of\nat least half a batch of packets (i.e. 16) is received from an Rx queue\nthat the PMD is polling is met, the requested sleep time will be reset\nto 0. At that point no sleeps will occur until the no/low load\nconditions return.\n\nSleeping in a PMD thread will mean there is a period of time when the\nPMD thread will not process packets. Sleep times requested are not\nguaranteed and can differ significantly depending on system\nconfiguration. The actual time not processing packets will be determined\nby the sleep and processor wake-up times and should be tested with each\nsystem configuration.\n\nLink: https://github.com/openvswitch/ovs/blob/v3.1.2/Documentation/topics/dpdk/pmd.rst#pmd-load-based-sleeping-experimental\nCc: Christophe Fontaine <cfontain@redhat.com>\nChange-Id: Ifa0def0eb6fb21a7bb9313a88ff5f4de2e811c27\nSigned-off-by: Robin Jarry <rjarry@redhat.com>\n'}]",0,893177,da9deb97ac5af0e42eb42e9840218aafacc3eccf,3,1,1,35960,,,0,"tripleo_ovs_dpdk: add support for pmd load based sleeping

PMD threads constantly poll Rx queues which are assigned to them. In
order to reduce the CPU cycles they use, they can sleep for small
periods of time when there is no load or very-low load on all the Rx
queues they poll.

This can be enabled by setting the max requested sleep time (in
microseconds) for any PMD thread:

  $ ovs-vsctl set open_vswitch . other_config:pmd-maxsleep=50

With a non-zero max value a PMD may request to sleep by an incrementing
amount of time up to the maximum time. If at any point the threshold of
at least half a batch of packets (i.e. 16) is received from an Rx queue
that the PMD is polling is met, the requested sleep time will be reset
to 0. At that point no sleeps will occur until the no/low load
conditions return.

Sleeping in a PMD thread will mean there is a period of time when the
PMD thread will not process packets. Sleep times requested are not
guaranteed and can differ significantly depending on system
configuration. The actual time not processing packets will be determined
by the sleep and processor wake-up times and should be tested with each
system configuration.

Link: https://github.com/openvswitch/ovs/blob/v3.1.2/Documentation/topics/dpdk/pmd.rst#pmd-load-based-sleeping-experimental
Cc: Christophe Fontaine <cfontain@redhat.com>
Change-Id: Ifa0def0eb6fb21a7bb9313a88ff5f4de2e811c27
Signed-off-by: Robin Jarry <rjarry@redhat.com>
",git fetch https://review.opendev.org/openstack/tripleo-ansible refs/changes/77/893177/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/roles/role-tripleo-ovs-dpdk.rst', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/default/tests/test_default.py', 'tripleo_ansible/playbooks/cli-overcloud-openvswitch-dpdk.yaml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/positive/converge.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/tasks/config.yml', 'tripleo_ansible/roles/tripleo_ovs_dpdk/molecule/positive/tests/test_positive.py', 'tripleo_ansible/roles/tripleo_ovs_dpdk/defaults/main.yml']",7,da9deb97ac5af0e42eb42e9840218aafacc3eccf,,"tripleo_ovs_dpdk_pmd_sleep_max: """"",,44,0
openstack%2Fopenstack-ansible-os_senlin~881988,openstack/openstack-ansible-os_senlin,stable/zed,I67c96653332be40ec575032abc2829daae65d1b5,Ensure service is restarted on unit file changes,MERGED,2023-05-02 11:01:34.000000000,2023-08-31 09:02:22.000000000,2023-08-31 09:01:23.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-05-02 11:01:34.000000000', 'files': ['handlers/main.yml', 'vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_senlin/commit/2821d0b5cda97250d057e416d9c87878b24676ed', 'message': ""Ensure service is restarted on unit file changes\n\nAt the moment we don't restart services if systemd unit file is changed.\n\nWe knowingly prevent systemd_service role handlers to execute\nby providing `state: started` as otherwise service will be restarted twice.\nWith that now  we ensure that role handlers will also listen for systemd\nunit changes.\n\nChange-Id: I67c96653332be40ec575032abc2829daae65d1b5\n""}]",1,881988,2821d0b5cda97250d057e416d9c87878b24676ed,10,3,1,28619,,,0,"Ensure service is restarted on unit file changes

At the moment we don't restart services if systemd unit file is changed.

We knowingly prevent systemd_service role handlers to execute
by providing `state: started` as otherwise service will be restarted twice.
With that now  we ensure that role handlers will also listen for systemd
unit changes.

Change-Id: I67c96653332be40ec575032abc2829daae65d1b5
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_senlin refs/changes/88/881988/1 && git format-patch -1 --stdout FETCH_HEAD,"['handlers/main.yml', 'vars/main.yml']",2,2821d0b5cda97250d057e416d9c87878b24676ed,cherrypick-osa/systemd_restart_on_unit_change-hbqfsn1p95," 'enabled': value['enabled'] | default(True), 'state': value['state'] | default('started'),"," 'enabled': 'yes', 'state': 'started',",3,2
openstack%2Fneutron~889071,openstack/neutron,master,I9c7ecc9f52a67bbed5d6377bd9e1c58c13fd6d3f,[UT] Reduce the binding retry loop in ``L3HATestFramework``,MERGED,2023-07-20 10:17:07.000000000,2023-08-31 08:46:31.000000000,2023-08-31 08:45:21.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 9845}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-07-20 10:17:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/c5c01a181881a512afb167a743455856bd15d0ec', 'message': '[UT] Reduce the binding retry loop in ``L3HATestFramework``\n\nThat reduces the test execution time.\n\nTrivial-Fix\n\nChange-Id: I9c7ecc9f52a67bbed5d6377bd9e1c58c13fd6d3f\n'}, {'number': 2, 'created': '2023-08-30 15:14:06.000000000', 'files': ['neutron/tests/unit/db/test_l3_hamode_db.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/b250b8577054c63b0971382b11f06cd27b2b46e9', 'message': '[UT] Reduce the binding retry loop in ``L3HATestFramework``\n\nThat reduces the test execution time.\n\nTrivial-Fix\n\nChange-Id: I9c7ecc9f52a67bbed5d6377bd9e1c58c13fd6d3f\n'}]",2,889071,b250b8577054c63b0971382b11f06cd27b2b46e9,15,4,2,16688,,,0,"[UT] Reduce the binding retry loop in ``L3HATestFramework``

That reduces the test execution time.

Trivial-Fix

Change-Id: I9c7ecc9f52a67bbed5d6377bd9e1c58c13fd6d3f
",git fetch https://review.opendev.org/openstack/neutron refs/changes/71/889071/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/unit/db/test_l3_hamode_db.py'],1,c5c01a181881a512afb167a743455856bd15d0ec,reduce_binding_loop,from neutron.plugins.ml2 import plugin as ml2_plugin self._mock_max_bind_tries() def _mock_max_bind_tries(self): self._max_bind_retries = ml2_plugin.MAX_BIND_TRIES ml2_plugin.MAX_BIND_TRIES = 1 self.addCleanup(self._restore_max_bind_retries) def _restore_max_bind_retries(self): ml2_plugin.MAX_BIND_TRIES = self._max_bind_retries,,10,0
openstack%2Fneutron~893170,openstack/neutron,stable/yoga,I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""",MERGED,2023-08-30 12:45:58.000000000,2023-08-31 08:43:51.000000000,2023-08-31 08:42:29.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 12:45:58.000000000', 'files': ['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/22c3951a93f2834010cf9bd8a30a41b4d570b8b0', 'message': '[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""\n\nThe functional test ""TestMaintenance.test_port_forwarding"" is checking\nthe ""registry.publish"" call after calling\n""delete_floatingip_port_forwarding"". This patch makes this check\nexplicit for the expected call.\n\nCloses-Bug: #2033387\nChange-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0\n(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)\n'}]",0,893170,22c3951a93f2834010cf9bd8a30a41b4d570b8b0,8,3,1,16688,,,0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""

The functional test ""TestMaintenance.test_port_forwarding"" is checking
the ""registry.publish"" call after calling
""delete_floatingip_port_forwarding"". This patch makes this check
explicit for the expected call.

Closes-Bug: #2033387
Change-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0
(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/70/893170/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'],1,22c3951a93f2834010cf9bd8a30a41b4d570b8b0,bug/2033387," call = mock.call('port_forwarding', 'after_delete', self.pf_plugin, payload=mock.ANY) m_publish.assert_has_calls([call])", m_publish.assert_called_once(),3,1
openstack%2Fansible-role-pki~893247,openstack/ansible-role-pki,stable/2023.1,Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8,Add defaults for owner/group/mode on pki_install_host,MERGED,2023-08-30 18:35:46.000000000,2023-08-31 08:37:35.000000000,2023-08-31 08:36:36.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}, {'_account_id': 31542}]","[{'number': 1, 'created': '2023-08-30 18:35:46.000000000', 'files': ['tasks/main_certs.yml', 'tasks/main_ca.yml', 'vars/standalone_cert.yml', 'tasks/standalone/create_ca.yml', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/a7e919fee7fba4aea1b54f66cf1e17806b335cae', 'message': ""Add defaults for owner/group/mode on pki_install_host\n\nReverts the default user/group from\nI4a90479261b2721c08e9034fbae0d56de9308676\n\nAdds global default options so user/group etc can\nbe overridden on the setup host\n\nSome cases of 'omit' for file modes are changed to a\nrole-defined default which will override any system umask\npreferences.\n\nRelated-Bug: #2029253\nChange-Id: Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8\n(cherry picked from commit 307c1feb50e7ae95829ff085a760cf3e1f51abc7)\n""}]",0,893247,a7e919fee7fba4aea1b54f66cf1e17806b335cae,8,3,1,25023,,,0,"Add defaults for owner/group/mode on pki_install_host

Reverts the default user/group from
I4a90479261b2721c08e9034fbae0d56de9308676

Adds global default options so user/group etc can
be overridden on the setup host

Some cases of 'omit' for file modes are changed to a
role-defined default which will override any system umask
preferences.

Related-Bug: #2029253
Change-Id: Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8
(cherry picked from commit 307c1feb50e7ae95829ff085a760cf3e1f51abc7)
",git fetch https://review.opendev.org/openstack/ansible-role-pki refs/changes/47/893247/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main_certs.yml', 'tasks/main_ca.yml', 'vars/standalone_cert.yml', 'tasks/standalone/create_ca.yml', 'defaults/main.yml']",5,a7e919fee7fba4aea1b54f66cf1e17806b335cae,bug/2029253-stable/2023.1," # Default permissions used on pki_setup_host # pki_owner: ""root"" # pki_group: ""root"" pki_cert_mode: ""0644"" pki_cert_dir_mode: ""0755"" pki_key_mode: ""0600"" pki_key_dir_mode: ""0700""",,30,20
openstack%2Fmagnum-ui~893308,openstack/magnum-ui,master,I287d4d0c56dbb31530fef0f5577a6b7c27fe32b8,Bump magnumclient to support cluster config,MERGED,2023-08-31 04:27:29.000000000,2023-08-31 08:08:40.000000000,2023-08-31 08:07:36.000000000,"[{'_account_id': 1004}, {'_account_id': 8064}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-08-31 04:27:29.000000000', 'files': ['requirements.txt'], 'web_link': 'https://opendev.org/openstack/magnum-ui/commit/e9dd132879b888c4736859fb3117bb6b7048890e', 'message': 'Bump magnumclient to support cluster config\n\nBump magnumclient in requirements to make sure we support feature\ncluster config.\n\nChange-Id: I287d4d0c56dbb31530fef0f5577a6b7c27fe32b8\n'}]",0,893308,e9dd132879b888c4736859fb3117bb6b7048890e,9,4,1,12404,,,0,"Bump magnumclient to support cluster config

Bump magnumclient in requirements to make sure we support feature
cluster config.

Change-Id: I287d4d0c56dbb31530fef0f5577a6b7c27fe32b8
",git fetch https://review.opendev.org/openstack/magnum-ui refs/changes/08/893308/1 && git format-patch -1 --stdout FETCH_HEAD,['requirements.txt'],1,e9dd132879b888c4736859fb3117bb6b7048890e,cluster-config-support,python-magnumclient>=4.2.0 # Apache-2.0,python-magnumclient>=2.15.0 # Apache-2.0,1,1
openstack%2Ftap-as-a-service~817449,openstack/tap-as-a-service,master,I2f5e2254801e9a554926eb645cfee8b07475a19e,WIP: Make ovs-taas start in VLAN only env,ABANDONED,2021-11-10 15:38:06.000000000,2023-08-31 08:06:47.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2021-11-10 15:38:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/8bda5b7cf5dfd88b0f896b4661d508415279e182', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 2, 'created': '2021-11-17 12:44:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/26288c156a283702c4b2c2209a42748290514660', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 3, 'created': '2021-12-07 16:42:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/dd1b05f8b577892ea817303062c6b67262d294e8', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 4, 'created': '2021-12-07 16:45:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/bfcdd71acd4182db15b6dbee1fdf2eccf8e068dd', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 5, 'created': '2021-12-20 10:14:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/d2aba037b2d02fdf9d443daed0d4d22ee67ff670', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 6, 'created': '2022-01-18 17:09:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/2c37e2c866c40ff3715d90cc154466aa41f8dde4', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 7, 'created': '2022-01-19 11:52:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/6c7e8068c68a1ef84df0aaad7dbd305d79241902', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 8, 'created': '2022-01-27 13:09:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/5c1154fb05d2ec21026795ba86a10b01c72f96be', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 9, 'created': '2022-01-28 07:12:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/8dab9b8b5c450f7e1a32dc77732436a36442a936', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 10, 'created': '2022-01-28 07:19:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/32b052ad59cb4a42c689f17265786c2761d1d7aa', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 11, 'created': '2022-01-28 12:39:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/346b86276d69f29af175bad73215e76ff6b07423', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 12, 'created': '2022-02-01 19:41:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/31ed50a52f73ecab47e4494da9ecb46a4f17c3db', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 13, 'created': '2022-02-15 09:00:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/9810c0a1c62474e9e539e1d38b72e2f2194c4396', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled and not listed in\nmirror_network_types config option, make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 14, 'created': '2022-02-16 08:38:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/a08770b058a5529d0edb70b3280d9746abf30d08', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled and not listed in\nmirror_network_types config option, make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 15, 'created': '2022-04-21 12:11:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/211cccee4b3955094fb5f091ffc3b674db50b47f', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled and not listed in\nmirror_network_types config option, make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 16, 'created': '2022-05-30 14:18:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/ee1bb9597903f35bde28136c240d766f3ae31d25', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled and not listed in\nmirror_network_types config option, make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}, {'number': 17, 'created': '2023-01-30 12:50:19.000000000', 'files': ['neutron_taas/services/taas/drivers/linux/ovs_exceptions.py', 'neutron_taas/services/taas/agents/extensions/taas.py', 'neutron_taas/services/taas/drivers/linux/ovs_taas.py'], 'web_link': 'https://opendev.org/openstack/tap-as-a-service/commit/3cab16db02ee0522a800164f9fe98aa3f7b1e6c1', 'message': 'WIP: Make ovs-taas start in VLAN only env\n\nIn case of tunneling is not enabled and not listed in\nmirror_network_types config option, make OvsTaasDriver skip br-tun\nrelated actions, and make mirroring work in this case.\n\nTODO:\n* tests? not sure if unit tests are available and helpful.\n* Documentation, like what is the packet flow to make debugging easier.\n\nChange-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e\nCloses-Bug: #1950179\n'}]",7,817449,3cab16db02ee0522a800164f9fe98aa3f7b1e6c1,41,1,17,8313,,,0,"WIP: Make ovs-taas start in VLAN only env

In case of tunneling is not enabled and not listed in
mirror_network_types config option, make OvsTaasDriver skip br-tun
related actions, and make mirroring work in this case.

TODO:
* tests? not sure if unit tests are available and helpful.
* Documentation, like what is the packet flow to make debugging easier.

Change-Id: I2f5e2254801e9a554926eb645cfee8b07475a19e
Closes-Bug: #1950179
",git fetch https://review.opendev.org/openstack/tap-as-a-service refs/changes/49/817449/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron_taas/services/taas/drivers/linux/ovs_taas.py'],1,8bda5b7cf5dfd88b0f896b4661d508415279e182,rehome-ovs-constants," if self.tun_br: # # Regenerate the flow in br-tun's TAAS_SEND_FLOOD table # to ensure all existing tunnel ports are included. # self.update_tunnel_flood_flow() def _clean_tun_bridge_flows(self, patch_tun_tap_id): def _setup_tun_bridge_flows(self, patch_tun_tap_id): taas_ovs_consts.TAAS_SEND_UCAST) taas_ovs_consts.TAAS_SEND_FLOOD) taas_ovs_consts.TAAS_DST_CHECK) taas_ovs_consts.TAAS_DST_CHECK) taas_ovs_consts.TAAS_SRC_CHECK) self.tun_br.add_flow( table=taas_ovs_consts.TAAS_DST_RESPOND, priority=1, reg0=1, actions=(""output:%s,move:NXM_OF_VLAN_TCI[0..11]->NXM_NX_TUN_ID"" ""[0..11],mod_vlan_vid:2,output:in_port"" % str(patch_tun_tap_id))) self.tun_br.add_flow( table=taas_ovs_consts.TAAS_SRC_RESPOND, priority=1, actions=(""learn(table=%s,hard_timeout=60,priority=1,"" ""NXM_OF_VLAN_TCI[0..11],"" ""load:NXM_OF_VLAN_TCI[0..11]->NXM_NX_TUN_ID[0..11],"" ""load:0->NXM_OF_VLAN_TCI[0..11],"" ""output:NXM_OF_IN_PORT[])"" % taas_ovs_consts.TAAS_SEND_UCAST)) def setup_ovs_bridges(self): # # br-int : Integration Bridge # br-tap : Tap Bridge # br-tun : Tunnel Bridge # # Create br-tap self.tap_br.create() # Connect br-tap to br-int and br-tun self.int_br.add_patch_port('patch-int-tap', 'patch-tap-int') self.tap_br.add_patch_port('patch-tap-int', 'patch-int-tap') if self.tun_br: self.tun_br.add_patch_port('patch-tun-tap', 'patch-tap-tun') self.tap_br.add_patch_port('patch-tap-tun', 'patch-tun-tap') # Get patch port IDs patch_tap_tun_id = self.tap_br.get_port_ofport('patch-tap-tun') patch_tun_tap_id = self.tun_br.get_port_ofport('patch-tun-tap') patch_tap_int_id = self.tap_br.get_port_ofport('patch-tap-int') # Purge all existing Taas flows from br-tap and br-tun self.tap_br.delete_flows(table=0) self.tap_br.delete_flows(table=taas_ovs_consts.TAAS_RECV_LOC) self.tap_br.delete_flows(table=taas_ovs_consts.TAAS_RECV_REM) if self.tun_br: self._clean_tun_bridge_flows(patch_tun_tap_id) # # Configure standard TaaS flows in br-tap # self.tap_br.add_flow(table=0, in_port=patch_tap_int_id, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_RECV_LOC) if self.tun_br: self.tap_br.add_flow(table=0, priority=1, in_port=patch_tap_tun_id, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_RECV_REM) self.tap_br.add_flow(table=0, priority=0, actions=""drop"") if self.tun_br: self.tap_br.add_flow(table=taas_ovs_consts.TAAS_RECV_LOC, priority=0, actions=""output:%s"" % str(patch_tap_tun_id)) self.tap_br.add_flow(table=taas_ovs_consts.TAAS_RECV_REM, priority=0, actions=""drop"") if self.tun_br: self._setup_tun_bridge_flows() if self.tun_br: # Add flow(s) in br-tun for tunnel_type in n_consts.TUNNEL_NETWORK_TYPES: self.tun_br.add_flow( table=n_consts.TUN_TABLE[tunnel_type], priority=1, tun_id=taas_id, actions=(""move:NXM_OF_VLAN_TCI[0..11]->NXM_NX_REG0"" ""[0..11],move:NXM_NX_TUN_ID[0..11]->"" ""NXM_OF_VLAN_TCI[0..11],resubmit(,%s)"" % taas_ovs_consts.TAAS_CLASSIFY)) self.tun_br.add_flow( table=taas_ovs_consts.TAAS_DST_CHECK, priority=1, tun_id=taas_id, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_DST_RESPOND) if self.tun_br: # Delete flow(s) from br-tun for tunnel_type in n_consts.TUNNEL_NETWORK_TYPES: self.tun_br.delete_flows( table=n_consts.TUN_TABLE[tunnel_type], tun_id=taas_id) self.tun_br.delete_flows(table=taas_ovs_consts.TAAS_DST_CHECK, self.tun_br.delete_flows(table=taas_ovs_consts.TAAS_SRC_CHECK, tun_id=taas_id) if self.tun_br: # Add flow(s) in br-tun for tunnel_type in n_consts.TUNNEL_NETWORK_TYPES: self.tun_br.add_flow( table=n_consts.TUN_TABLE[tunnel_type], priority=1, tun_id=taas_id, actions=(""move:NXM_OF_VLAN_TCI[0..11]->"" ""NXM_NX_REG0[0..11],move:NXM_NX_TUN_ID"" ""[0..11]->NXM_OF_VLAN_TCI[0..11],resubmit(,%s)"" % taas_ovs_consts.TAAS_CLASSIFY)) self.tun_br.add_flow(table=taas_ovs_consts.TAAS_SRC_CHECK, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_SRC_RESPOND)"," # # Regenerate the flow in br-tun's TAAS_SEND_FLOOD table # to ensure all existing tunnel ports are included. # self.update_tunnel_flood_flow() def setup_ovs_bridges(self): # # br-int : Integration Bridge # br-tap : Tap Bridge # br-tun : Tunnel Bridge # # Create br-tap self.tap_br.create() # Connect br-tap to br-int and br-tun self.int_br.add_patch_port('patch-int-tap', 'patch-tap-int') self.tap_br.add_patch_port('patch-tap-int', 'patch-int-tap') self.tun_br.add_patch_port('patch-tun-tap', 'patch-tap-tun') self.tap_br.add_patch_port('patch-tap-tun', 'patch-tun-tap') # Get patch port IDs patch_tap_int_id = self.tap_br.get_port_ofport('patch-tap-int') patch_tap_tun_id = self.tap_br.get_port_ofport('patch-tap-tun') patch_tun_tap_id = self.tun_br.get_port_ofport('patch-tun-tap') # Purge all existing Taas flows from br-tap and br-tun self.tap_br.delete_flows(table=0) self.tap_br.delete_flows(table=taas_ovs_consts.TAAS_RECV_LOC) self.tap_br.delete_flows(table=taas_ovs_consts.TAAS_RECV_REM) # # Configure standard TaaS flows in br-tap # self.tap_br.add_flow(table=0, priority=1, in_port=patch_tap_int_id, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_RECV_LOC) self.tap_br.add_flow(table=0, priority=1, in_port=patch_tap_tun_id, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_RECV_REM) self.tap_br.add_flow(table=0, priority=0, actions=""drop"") self.tap_br.add_flow(table=taas_ovs_consts.TAAS_RECV_LOC, priority=0, actions=""output:%s"" % str(patch_tap_tun_id)) self.tap_br.add_flow(table=taas_ovs_consts.TAAS_RECV_REM, priority=0, actions=""drop"") taas_ovs_consts.TAAS_SEND_UCAST) taas_ovs_consts.TAAS_SEND_FLOOD) taas_ovs_consts.TAAS_DST_CHECK) taas_ovs_consts.TAAS_DST_CHECK) taas_ovs_consts.TAAS_SRC_CHECK) self.tun_br.add_flow(table=taas_ovs_consts.TAAS_DST_RESPOND, priority=1, reg0=1, actions=( ""output:%s,"" ""move:NXM_OF_VLAN_TCI[0..11]->NXM_NX_TUN_ID"" ""[0..11],mod_vlan_vid:2,output:in_port"" % str(patch_tun_tap_id))) self.tun_br.add_flow(table=taas_ovs_consts.TAAS_SRC_RESPOND, actions=( ""learn(table=%s,hard_timeout=60,"" ""priority=1,NXM_OF_VLAN_TCI[0..11],"" ""load:NXM_OF_VLAN_TCI[0..11]->NXM_NX_TUN_ID"" ""[0..11],load:0->NXM_OF_VLAN_TCI[0..11],"" ""output:NXM_OF_IN_PORT[])"" % taas_ovs_consts.TAAS_SEND_UCAST)) # Add flow(s) in br-tun for tunnel_type in n_consts.TUNNEL_NETWORK_TYPES: self.tun_br.add_flow(table=n_consts.TUN_TABLE[tunnel_type], priority=1, tun_id=taas_id, actions=( ""move:NXM_OF_VLAN_TCI[0..11]->"" ""NXM_NX_REG0[0..11],move:NXM_NX_TUN_ID"" ""[0..11]->NXM_OF_VLAN_TCI[0..11],"" ""resubmit(,%s)"" % taas_ovs_consts.TAAS_CLASSIFY)) self.tun_br.add_flow(table=taas_ovs_consts.TAAS_DST_CHECK, priority=1, tun_id=taas_id, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_DST_RESPOND) # Delete flow(s) from br-tun for tunnel_type in n_consts.TUNNEL_NETWORK_TYPES: self.tun_br.delete_flows(table=n_consts.TUN_TABLE[tunnel_type], self.tun_br.delete_flows(table=taas_ovs_consts.TAAS_DST_CHECK, tun_id=taas_id) self.tun_br.delete_flows(table=taas_ovs_consts.TAAS_SRC_CHECK, tun_id=taas_id) # Add flow(s) in br-tun for tunnel_type in n_consts.TUNNEL_NETWORK_TYPES: self.tun_br.add_flow(table=n_consts.TUN_TABLE[tunnel_type], actions=( ""move:NXM_OF_VLAN_TCI[0..11]->"" ""NXM_NX_REG0[0..11],move:NXM_NX_TUN_ID"" ""[0..11]->NXM_OF_VLAN_TCI[0..11],"" ""resubmit(,%s)"" % taas_ovs_consts.TAAS_CLASSIFY)) self.tun_br.add_flow(table=taas_ovs_consts.TAAS_SRC_CHECK, priority=1, tun_id=taas_id, actions=""resubmit(,%s)"" % taas_ovs_consts.TAAS_SRC_RESPOND)",132,118
openstack%2Fopenstack-ansible-apt_package_pinning~888172,openstack/openstack-ansible-apt_package_pinning,master,I31d93b2147838f04750bb1380602406484ba400b,Fix linters issue and metadata,MERGED,2023-07-11 19:20:53.000000000,2023-08-31 08:06:45.000000000,2023-08-31 08:05:49.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 32666}]","[{'number': 1, 'created': '2023-07-11 19:20:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-apt_package_pinning/commit/d918234457e3f2184e95341e0d07684c04d3ca25', 'message': ""Fix linters issue and metadata\n\nWith update of ansible-lint to version >=6.0.0 a lot of new\nlinters were added, that enabled by default. In order to comply\nwith linter rules we're applying changes to the role.\n\nWith that we also update metdata to reflect current state.\n\nChange-Id: I31d93b2147838f04750bb1380602406484ba400b\n""}, {'number': 2, 'created': '2023-08-22 08:02:54.000000000', 'files': ['tasks/main.yml', 'defaults/main.yml', 'meta/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-apt_package_pinning/commit/b7b2134b9db6fdeac7dcdde3c42f2329616acf5e', 'message': ""Fix linters issue and metadata\n\nWith update of ansible-lint to version >=6.0.0 a lot of new\nlinters were added, that enabled by default. In order to comply\nwith linter rules we're applying changes to the role.\n\nWith that we also update metdata to reflect current state.\n\nChange-Id: I31d93b2147838f04750bb1380602406484ba400b\n""}]",2,888172,b7b2134b9db6fdeac7dcdde3c42f2329616acf5e,13,3,2,28619,,,0,"Fix linters issue and metadata

With update of ansible-lint to version >=6.0.0 a lot of new
linters were added, that enabled by default. In order to comply
with linter rules we're applying changes to the role.

With that we also update metdata to reflect current state.

Change-Id: I31d93b2147838f04750bb1380602406484ba400b
",git fetch https://review.opendev.org/openstack/openstack-ansible-apt_package_pinning refs/changes/72/888172/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main.yml', 'defaults/main.yml', 'meta/main.yml']",3,d918234457e3f2184e95341e0d07684c04d3ca25,osa/core-2.15," role_name: apt_cache_pinning namespace: openstack min_ansible_version: ""2.10"" - buster - bullseye - focal - jammy galaxy_tags:", min_ansible_version: 1.6.6 - stretch - xenial categories:,10,5
openstack%2Fneutron-lib~881350,openstack/neutron-lib,master,I72a188bc767c15ab28a216be860f4dd27edc699c,Move to python3.9 as minimal python version,ABANDONED,2023-04-24 10:01:56.000000000,2023-08-31 08:05:13.000000000,,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-04-24 10:01:56.000000000', 'files': ['setup.cfg'], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/be8c1d09cbd6cb2ba6e749a40d32431b31ca2f7b', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates neutron-lib jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I72a188bc767c15ab28a216be860f4dd27edc699c\nCloses-Bug: #2017478\n'}]",4,881350,be8c1d09cbd6cb2ba6e749a40d32431b31ca2f7b,9,5,1,8313,,,0,"Move to python3.9 as minimal python version

2023.2 release is targetting python3.9 as
minimal testing rutime[1]. openstack-tox-py38
job started to fail as libraries(like tooz) already
dropped py3.8 support.

This patch updates neutron-lib jobs and
setup.cfg to reflect the same.

[1] https://review.opendev.org/c/openstack/governance/+/872232

Change-Id: I72a188bc767c15ab28a216be860f4dd27edc699c
Closes-Bug: #2017478
",git fetch https://review.opendev.org/openstack/neutron-lib refs/changes/50/881350/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,be8c1d09cbd6cb2ba6e749a40d32431b31ca2f7b,bug/2017478,python_requires = >=3.9 Programming Language :: Python :: 3.10,python_requires = >=3.8 Programming Language :: Python :: 3.8,2,2
openstack%2Fnetworking-bgpvpn~881345,openstack/networking-bgpvpn,master,If091f4df266bd9cf201350d274a871b4dfbf5bbb,Move to python3.9 as minimal python version,ABANDONED,2023-04-24 09:49:30.000000000,2023-08-31 08:05:05.000000000,,"[{'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 22348}, {'_account_id': 23567}]","[{'number': 1, 'created': '2023-04-24 09:49:30.000000000', 'files': ['.zuul.yaml', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/networking-bgpvpn/commit/61b27985d0c723bca7790c0b6fef06de45abc50b', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates networking-bgpvpn jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: If091f4df266bd9cf201350d274a871b4dfbf5bbb\nCloses-Bug: #2017478\n'}]",5,881345,61b27985d0c723bca7790c0b6fef06de45abc50b,9,5,1,8313,,,0,"Move to python3.9 as minimal python version

2023.2 release is targetting python3.9 as
minimal testing rutime[1]. openstack-tox-py38
job started to fail as libraries(like tooz) already
dropped py3.8 support.

This patch updates networking-bgpvpn jobs and
setup.cfg to reflect the same.

[1] https://review.opendev.org/c/openstack/governance/+/872232

Change-Id: If091f4df266bd9cf201350d274a871b4dfbf5bbb
Closes-Bug: #2017478
",git fetch https://review.opendev.org/openstack/networking-bgpvpn refs/changes/45/881345/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg']",2,61b27985d0c723bca7790c0b6fef06de45abc50b,bug/2017478,python_requires = >=3.9 Programming Language :: Python :: 3.10,python_requires = >=3.8 Programming Language :: Python :: 3.8,6,6
openstack%2Fneutron-vpnaas~881353,openstack/neutron-vpnaas,master,I837fae6cabd7f98530588de4985c14c8041bf76b,Move to python3.9 as minimal python version,ABANDONED,2023-04-24 10:07:07.000000000,2023-08-31 08:04:56.000000000,,"[{'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-04-24 10:07:07.000000000', 'files': ['.zuul.yaml', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/neutron-vpnaas/commit/c95e361535d62dbae3ea480e7ee6d936c8589ee2', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates neutron-vpnaas jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I837fae6cabd7f98530588de4985c14c8041bf76b\nCloses-Bug: #2017478\n'}]",4,881353,c95e361535d62dbae3ea480e7ee6d936c8589ee2,8,4,1,8313,,,0,"Move to python3.9 as minimal python version

2023.2 release is targetting python3.9 as
minimal testing rutime[1]. openstack-tox-py38
job started to fail as libraries(like tooz) already
dropped py3.8 support.

This patch updates neutron-vpnaas jobs and
setup.cfg to reflect the same.

[1] https://review.opendev.org/c/openstack/governance/+/872232

Change-Id: I837fae6cabd7f98530588de4985c14c8041bf76b
Closes-Bug: #2017478
",git fetch https://review.opendev.org/openstack/neutron-vpnaas refs/changes/53/881353/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg']",2,c95e361535d62dbae3ea480e7ee6d936c8589ee2,bug/2017478,python_requires = >=3.9 Programming Language :: Python :: 3.10,python_requires = >=3.8 Programming Language :: Python :: 3.8,2,8
openstack%2Fnetworking-bagpipe~881343,openstack/networking-bagpipe,master,I92e8d0b989ab911860381f5d2ab4b1929d79e7ed,Move to python3.9 as minimal python version,ABANDONED,2023-04-24 09:24:50.000000000,2023-08-31 08:04:50.000000000,,"[{'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-04-24 09:24:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-bagpipe/commit/2a485306c60ace71e45264e647da7a90b8f8a7d0', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates networking-bagpipe jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I92e8d0b989ab911860381f5d2ab4b1929d79e7ed\nCloses-Bug: #2017478\n'}, {'number': 2, 'created': '2023-04-24 11:04:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-bagpipe/commit/2012730b493fafc5d440e540d722d82670aefd5a', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as minimal\ntesting rutime[1]. Some libraries (like tooz) dropped\npy3.8 support.\n\n[1]https://review.opendev.org/c/openstack/governance/+/872232\n\nRelated-Bug: #2017478\nChange-Id: I92e8d0b989ab911860381f5d2ab4b1929d79e7ed\n'}, {'number': 3, 'created': '2023-04-27 06:58:48.000000000', 'files': ['.zuul.yaml', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/networking-bagpipe/commit/51fb42188074c129a909f4cb8a4a63a00a91cca1', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as minimal\ntesting rutime[1]. Some libraries (like tooz) dropped\npy3.8 support.\nChange the nodeset for temest from focal to jammy.\n\n[1]https://review.opendev.org/c/openstack/governance/+/872232\n\nRelated-Bug: #2017478\nChange-Id: I92e8d0b989ab911860381f5d2ab4b1929d79e7ed\n'}]",4,881343,51fb42188074c129a909f4cb8a4a63a00a91cca1,12,4,3,8313,,,0,"Move to python3.9 as minimal python version

2023.2 release is targetting python3.9 as minimal
testing rutime[1]. Some libraries (like tooz) dropped
py3.8 support.
Change the nodeset for temest from focal to jammy.

[1]https://review.opendev.org/c/openstack/governance/+/872232

Related-Bug: #2017478
Change-Id: I92e8d0b989ab911860381f5d2ab4b1929d79e7ed
",git fetch https://review.opendev.org/openstack/networking-bagpipe refs/changes/43/881343/1 && git format-patch -1 --stdout FETCH_HEAD,"['.zuul.yaml', 'setup.cfg']",2,2a485306c60ace71e45264e647da7a90b8f8a7d0,bug/2017478,python_requires = >=3.9 Programming Language :: Python :: 3.10,python_requires = >=3.8 Programming Language :: Python :: 3.8,3,7
openstack%2Fneutron-fwaas~881351,openstack/neutron-fwaas,master,I6df7da08b1d807e9c5b60d26ee93542085a2e955,Move to python3.9 as minimal python version,ABANDONED,2023-04-24 10:03:42.000000000,2023-08-31 08:04:44.000000000,,"[{'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-04-24 10:03:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-fwaas/commit/350830c5a58f0dce464d2c83b92e0440e16ca031', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates neutron-fwaas jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I6df7da08b1d807e9c5b60d26ee93542085a2e955\nCloses-Bug: #2017478\n'}, {'number': 2, 'created': '2023-04-27 07:36:24.000000000', 'files': ['.zuul.yaml', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/neutron-fwaas/commit/f753459363b8392348e3745b1bd59ef4fe28cfb8', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates neutron-fwaas jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I6df7da08b1d807e9c5b60d26ee93542085a2e955\nCloses-Bug: #2017478\n'}]",4,881351,f753459363b8392348e3745b1bd59ef4fe28cfb8,10,4,2,8313,,,0,"Move to python3.9 as minimal python version

2023.2 release is targetting python3.9 as
minimal testing rutime[1]. openstack-tox-py38
job started to fail as libraries(like tooz) already
dropped py3.8 support.

This patch updates neutron-fwaas jobs and
setup.cfg to reflect the same.

[1] https://review.opendev.org/c/openstack/governance/+/872232

Change-Id: I6df7da08b1d807e9c5b60d26ee93542085a2e955
Closes-Bug: #2017478
",git fetch https://review.opendev.org/openstack/neutron-fwaas refs/changes/51/881351/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,350830c5a58f0dce464d2c83b92e0440e16ca031,bug/2017478,python_requires = >=3.9 Programming Language :: Python :: 3.10,python_requires = >=3.8 Programming Language :: Python :: 3.8,2,2
openstack%2Fneutron-dynamic-routing~881352,openstack/neutron-dynamic-routing,master,I6a33e41f1ca53461f8a814a1efe16e04371c2ffc,Move to python3.9 as minimal python version,ABANDONED,2023-04-24 10:05:14.000000000,2023-08-31 08:04:36.000000000,,"[{'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 16688}, {'_account_id': 22348}, {'_account_id': 23567}]","[{'number': 1, 'created': '2023-04-24 10:05:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-dynamic-routing/commit/b8e288d9cf52a65f9c1b5740df163e92a8f76c05', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates neutron-dynamic-routing jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I6a33e41f1ca53461f8a814a1efe16e04371c2ffc\nCloses-Bug: #2017478\n'}, {'number': 2, 'created': '2023-04-24 11:04:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron-dynamic-routing/commit/2ae2756f7ef31e88fa2e4bc465432adc8b4275bf', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as minimal\ntesting rutime[1]. Some libraries (like tooz) dropped\npy3.8 support.\n\n[1]https://review.opendev.org/c/openstack/governance/+/872232\n\nRelated-Bug: #2017478\nChange-Id: I6a33e41f1ca53461f8a814a1efe16e04371c2ffc\n'}, {'number': 3, 'created': '2023-04-27 07:41:24.000000000', 'files': ['.zuul.yaml', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/neutron-dynamic-routing/commit/46dbedff478dd52b6b7edd8b3336ca9bfcc0bc3a', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as minimal\ntesting rutime[1]. Some libraries (like tooz) dropped\npy3.8 support.\n\n[1]https://review.opendev.org/c/openstack/governance/+/872232\n\nRelated-Bug: #2017478\nChange-Id: I6a33e41f1ca53461f8a814a1efe16e04371c2ffc\n'}]",10,881352,46dbedff478dd52b6b7edd8b3336ca9bfcc0bc3a,16,6,3,8313,,,0,"Move to python3.9 as minimal python version

2023.2 release is targetting python3.9 as minimal
testing rutime[1]. Some libraries (like tooz) dropped
py3.8 support.

[1]https://review.opendev.org/c/openstack/governance/+/872232

Related-Bug: #2017478
Change-Id: I6a33e41f1ca53461f8a814a1efe16e04371c2ffc
",git fetch https://review.opendev.org/openstack/neutron-dynamic-routing refs/changes/52/881352/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,b8e288d9cf52a65f9c1b5740df163e92a8f76c05,bug/2017478,python_requires = >=3.9 Programming Language :: Python :: 3.10,python_requires = >=3.8 Programming Language :: Python :: 3.8,2,2
openstack%2Fneutron~893169,openstack/neutron,stable/zed,I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""",MERGED,2023-08-30 12:45:46.000000000,2023-08-31 08:04:28.000000000,2023-08-31 08:03:09.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 12:45:46.000000000', 'files': ['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/d08194bbb756b41cd3d7c78f5ac363c2ca1ede0e', 'message': '[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""\n\nThe functional test ""TestMaintenance.test_port_forwarding"" is checking\nthe ""registry.publish"" call after calling\n""delete_floatingip_port_forwarding"". This patch makes this check\nexplicit for the expected call.\n\nCloses-Bug: #2033387\nChange-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0\n(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)\n'}]",0,893169,d08194bbb756b41cd3d7c78f5ac363c2ca1ede0e,8,3,1,16688,,,0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""

The functional test ""TestMaintenance.test_port_forwarding"" is checking
the ""registry.publish"" call after calling
""delete_floatingip_port_forwarding"". This patch makes this check
explicit for the expected call.

Closes-Bug: #2033387
Change-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0
(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/69/893169/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'],1,d08194bbb756b41cd3d7c78f5ac363c2ca1ede0e,bug/2033387," call = mock.call('port_forwarding', 'after_delete', self.pf_plugin, payload=mock.ANY) m_publish.assert_has_calls([call])", m_publish.assert_called_once(),3,1
openstack%2Fnetworking-sfc~881348,openstack/networking-sfc,master,I079ce4192baf91b10c4a29a8344fd3feec055b44,Move to python3.9 as minimal python version,ABANDONED,2023-04-24 10:00:01.000000000,2023-08-31 08:04:13.000000000,,"[{'_account_id': 8313}, {'_account_id': 8556}, {'_account_id': 13861}, {'_account_id': 21798}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-04-24 10:00:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/networking-sfc/commit/75b6b0223c96e2b2089efbab66489bf1d8578f37', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates networking-sfc jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I079ce4192baf91b10c4a29a8344fd3feec055b44\nCloses-Bug: #2017478\n'}, {'number': 2, 'created': '2023-04-27 08:47:27.000000000', 'files': ['zuul.d/projects.yaml', 'setup.cfg'], 'web_link': 'https://opendev.org/openstack/networking-sfc/commit/0fe826ff4d9c1cb4eb4bb356fdd6eeffbb1bd87d', 'message': 'Move to python3.9 as minimal python version\n\n2023.2 release is targetting python3.9 as\nminimal testing rutime[1]. openstack-tox-py38\njob started to fail as libraries(like tooz) already\ndropped py3.8 support.\n\nThis patch updates networking-sfc jobs and\nsetup.cfg to reflect the same.\n\n[1] https://review.opendev.org/c/openstack/governance/+/872232\n\nChange-Id: I079ce4192baf91b10c4a29a8344fd3feec055b44\nCloses-Bug: #2017478\n'}]",5,881348,0fe826ff4d9c1cb4eb4bb356fdd6eeffbb1bd87d,11,5,2,8313,,,0,"Move to python3.9 as minimal python version

2023.2 release is targetting python3.9 as
minimal testing rutime[1]. openstack-tox-py38
job started to fail as libraries(like tooz) already
dropped py3.8 support.

This patch updates networking-sfc jobs and
setup.cfg to reflect the same.

[1] https://review.opendev.org/c/openstack/governance/+/872232

Change-Id: I079ce4192baf91b10c4a29a8344fd3feec055b44
Closes-Bug: #2017478
",git fetch https://review.opendev.org/openstack/networking-sfc refs/changes/48/881348/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.cfg'],1,75b6b0223c96e2b2089efbab66489bf1d8578f37,bug/2017478,python-requires = >=3.9 Programming Language :: Python :: 3.10,python-requires = >=3.8 Programming Language :: Python :: 3.8,2,2
openstack%2Fneutron~893168,openstack/neutron,stable/2023.1,I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""",MERGED,2023-08-30 12:45:32.000000000,2023-08-31 08:02:27.000000000,2023-08-31 08:01:15.000000000,"[{'_account_id': 1131}, {'_account_id': 8313}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 12:45:32.000000000', 'files': ['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/234a098d7b10261037c97d1b1e04f45dc122f8b2', 'message': '[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""\n\nThe functional test ""TestMaintenance.test_port_forwarding"" is checking\nthe ""registry.publish"" call after calling\n""delete_floatingip_port_forwarding"". This patch makes this check\nexplicit for the expected call.\n\nCloses-Bug: #2033387\nChange-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0\n(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)\n'}]",0,893168,234a098d7b10261037c97d1b1e04f45dc122f8b2,8,3,1,16688,,,0,"[FT] Make explicit the ""publish"" call check in ""test_port_forwarding""

The functional test ""TestMaintenance.test_port_forwarding"" is checking
the ""registry.publish"" call after calling
""delete_floatingip_port_forwarding"". This patch makes this check
explicit for the expected call.

Closes-Bug: #2033387
Change-Id: I95074a0fe071e3ed8bf58c9210d63a2f30ee68a0
(cherry picked from commit d9eb04478e0d9e8a7de3e1eee1138be05e64c9a4)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/68/893168/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron/tests/functional/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_maintenance.py'],1,234a098d7b10261037c97d1b1e04f45dc122f8b2,bug/2033387," call = mock.call('port_forwarding', 'after_delete', self.pf_plugin, payload=mock.ANY) m_publish.assert_has_calls([call])", m_publish.assert_called_once(),3,1
openstack%2Fcinder~890213,openstack/cinder,master,I3ae05e12608bb708a1765f812ecffb03d4eafb6b,docs: add missing space,MERGED,2023-08-01 14:49:11.000000000,2023-08-31 07:53:29.000000000,2023-08-02 13:27:12.000000000,"[{'_account_id': 5314}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-01 14:49:11.000000000', 'files': ['doc/source/configuration/block-storage/drivers/ibm-gpfs-volume-driver.rst'], 'web_link': 'https://opendev.org/openstack/cinder/commit/ff4b1c910e65274efcbc0fd052f1f9bc5a643603', 'message': 'docs: add missing space\n\nChange-Id: I3ae05e12608bb708a1765f812ecffb03d4eafb6b\n'}]",1,890213,ff4b1c910e65274efcbc0fd052f1f9bc5a643603,22,2,1,15197,,,0,"docs: add missing space

Change-Id: I3ae05e12608bb708a1765f812ecffb03d4eafb6b
",git fetch https://review.opendev.org/openstack/cinder refs/changes/13/890213/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/configuration/block-storage/drivers/ibm-gpfs-volume-driver.rst'],1,ff4b1c910e65274efcbc0fd052f1f9bc5a643603,," to use Spectrum Scale storage. For more details, please refer to"," to use Spectrum Scale storage.For more details, please refer to",1,1
openstack%2Fnova~886779,openstack/nova,master,Icc8580835beb2b4d40341f81c25eb1f024e70ade,Remove deprecated AZ filter.,MERGED,2023-06-22 18:31:48.000000000,2023-08-31 07:22:49.000000000,2023-08-31 07:21:33.000000000,"[{'_account_id': 7166}, {'_account_id': 8556}, {'_account_id': 9708}, {'_account_id': 11604}, {'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 32238}]","[{'number': 1, 'created': '2023-06-22 18:31:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/3f7ac009683e8bcb6a62f0097b2a3e0a8604236a', 'message': 'Remove deprecated AZ filter.\n\nThis change remvoes the az filter and always enabled\nthe placement pre-filter. As part of this removal\nthe config option to control enabling the pre-filter\nis removed as it is not mandatory.\n\nThe AZ filter docs and tests are also removed and an upgrade\nrelease note is added.\n\nChange-Id: Icc8580835beb2b4d40341f81c25eb1f024e70ade\n'}, {'number': 2, 'created': '2023-06-26 10:02:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/8952c94191359c469fe9cb3ce87f45936ab6d4e3', 'message': 'Remove deprecated AZ filter.\n\nThis change remvoes the az filter and always enabled\nthe placement pre-filter. As part of this removal\nthe config option to control enabling the pre-filter\nis removed as it is not mandatory.\n\nThe AZ filter docs and tests are also removed and an upgrade\nrelease note is added.\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/886972\nChange-Id: Icc8580835beb2b4d40341f81c25eb1f024e70ade\n'}, {'number': 3, 'created': '2023-07-17 11:20:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/32cf4855e81f69cd81d5e556013bfaf649f6a3c8', 'message': 'Remove deprecated AZ filter.\n\nThis change remvoes the az filter and always enabled\nthe placement pre-filter. As part of this removal\nthe config option to control enabling the pre-filter\nis removed as it is not mandatory.\n\nThe AZ filter docs and tests are also removed and an upgrade\nrelease note is added.\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/886972\nChange-Id: Icc8580835beb2b4d40341f81c25eb1f024e70ade\n'}, {'number': 4, 'created': '2023-07-17 11:22:32.000000000', 'files': ['doc/source/contributor/testing/libvirt-numa.rst', 'nova/objects/selection.py', 'nova/tests/functional/api_sample_tests/api_sample_base.py', 'nova/scheduler/filters/availability_zone_filter.py', 'doc/source/admin/scheduling.rst', 'nova/conf/scheduler.py', 'doc/source/admin/availability-zones.rst', 'nova/tests/functional/test_aggregates.py', 'nova/tests/functional/test_cross_az_attach.py', 'nova/tests/unit/scheduler/test_request_filter.py', 'nova/tests/unit/scheduler/filters/test_availability_zone_filters.py', 'releasenotes/notes/az-filter-removal-587f7337040b6216.yaml', 'nova/scheduler/request_filter.py'], 'web_link': 'https://opendev.org/openstack/nova/commit/5edd805fe2395f35ecdfe5b589a51dc00565852f', 'message': 'Remove deprecated AZ filter.\n\nThis change remvoes the az filter and always enabled\nthe placement pre-filter. As part of this removal\nthe config option to control enabling the pre-filter\nis removed as it is now mandatory.\n\nThe AZ filter docs and tests are also removed and an upgrade\nrelease note is added.\n\nDepends-On: https://review.opendev.org/c/openstack/devstack/+/886972\nChange-Id: Icc8580835beb2b4d40341f81c25eb1f024e70ade\n'}]",21,886779,5edd805fe2395f35ecdfe5b589a51dc00565852f,50,7,4,11604,,,0,"Remove deprecated AZ filter.

This change remvoes the az filter and always enabled
the placement pre-filter. As part of this removal
the config option to control enabling the pre-filter
is removed as it is now mandatory.

The AZ filter docs and tests are also removed and an upgrade
release note is added.

Depends-On: https://review.opendev.org/c/openstack/devstack/+/886972
Change-Id: Icc8580835beb2b4d40341f81c25eb1f024e70ade
",git fetch https://review.opendev.org/openstack/nova refs/changes/79/886779/1 && git format-patch -1 --stdout FETCH_HEAD,"['doc/source/contributor/testing/libvirt-numa.rst', 'nova/objects/selection.py', 'nova/tests/functional/api_sample_tests/api_sample_base.py', 'nova/scheduler/filters/availability_zone_filter.py', 'doc/source/admin/scheduling.rst', 'nova/conf/scheduler.py', 'doc/source/admin/availability-zones.rst', 'nova/tests/functional/test_aggregates.py', 'nova/tests/functional/test_cross_az_attach.py', 'nova/tests/unit/scheduler/test_request_filter.py', 'nova/tests/unit/scheduler/filters/test_availability_zone_filters.py', 'releasenotes/notes/az-filter-removal-587f7337040b6216.yaml', 'nova/scheduler/request_filter.py']",13,3f7ac009683e8bcb6a62f0097b2a3e0a8604236a,az-filter-removal,, if not CONF.scheduler.query_placement_for_availability_zone: return False,20,248
openstack%2Fglance_store~890532,openstack/glance_store,master,Ifbef97eb95e6400ec7efa1058791e6f0f90e4459,test CI,ABANDONED,2023-08-04 15:07:40.000000000,2023-08-31 07:20:08.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-04 15:07:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/glance_store/commit/ed2fbbb226e6bee2cea0139e5e1f4cfd8b84a805', 'message': 'test CI\n\nChange-Id: Ifbef97eb95e6400ec7efa1058791e6f0f90e4459\n'}]",0,890532,ed2fbbb226e6bee2cea0139e5e1f4cfd8b84a805,5,1,1,9542,,,0,"test CI

Change-Id: Ifbef97eb95e6400ec7efa1058791e6f0f90e4459
",git fetch https://review.opendev.org/openstack/glance_store refs/changes/32/890532/1 && git format-patch -1 --stdout FETCH_HEAD,[],0,ed2fbbb226e6bee2cea0139e5e1f4cfd8b84a805,,,,0,0
openstack%2Fheat~852537,openstack/heat,master,I16c6d38747d0fedb945e7fde72a17056c8a96f55,WiP Support system scope for role assignments,ABANDONED,2022-08-09 10:32:39.000000000,2023-08-31 07:19:49.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2022-08-09 10:32:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/heat/commit/d1a602f836edaf10ccfa26f11e0c2c08ec17f7a4', 'message': 'WiP Support system scope for role assignments\n\nChange-Id: I16c6d38747d0fedb945e7fde72a17056c8a96f55\n'}, {'number': 2, 'created': '2022-08-09 11:35:27.000000000', 'files': ['heat/engine/resources/openstack/keystone/role_assignments.py'], 'web_link': 'https://opendev.org/openstack/heat/commit/1409190373cfa558cabb70953bf61ce550e5ad0d', 'message': 'WiP Support system scope for role assignments\n\nChange-Id: I16c6d38747d0fedb945e7fde72a17056c8a96f55\nStory: 2010223\nTask: 45977\n'}]",5,852537,1409190373cfa558cabb70953bf61ce550e5ad0d,10,1,2,9542,,,0,"WiP Support system scope for role assignments

Change-Id: I16c6d38747d0fedb945e7fde72a17056c8a96f55
Story: 2010223
Task: 45977
",git fetch https://review.opendev.org/openstack/heat refs/changes/37/852537/1 && git format-patch -1 --stdout FETCH_HEAD,['heat/engine/resources/openstack/keystone/role_assignments.py'],1,d1a602f836edaf10ccfa26f11e0c2c08ec17f7a4,story/2010223," ROLE, DOMAIN, PROJECT, SYSTEM 'role', 'domain', 'project', 'system' SYSTEM: properties.Schema( properties.Schema.STRING, _('Keystone system.'), constraints=[constraints.AllowedValues(['all',])] ), elif role_assignment.get(self.SYSTEM) is not None: self.client().roles.grant( role=role_assignment.get(self.ROLE), system=role_assignment.get(self.SYSTEM), group=group_id ) elif role_assignment.get(self.SYSTEM) is not None: self.client().roles.grant( role=role_assignment.get(self.ROLE), system=role_assignment.get(self.SYSTEM), user=user_id ) elif role_assignment.get(self.SYSTEM) is not None: self.client().roles.revoke( role=role_assignment.get(self.ROLE), system=role_assignment.get(self.SYSTEM), group=group_id ) elif role_assignment.get(self.SYSTEM) is not None: self.client().roles.revoke( role=role_assignment.get(self.ROLE), system=role_assignment.get(self.SYSTEM), user=user_id ) get_domain_id(domain)) if domain else None, self.SYSTEM: role_assignment.get(self.SYSTEM) # TODO(pas-ha): handle system scope system = role_assignment.get(self.SYSTEM) only_one_required = [bool(domain), bool(project), bool(system), ] if sum(only_one_required) > 1: self.DOMAIN, self.SYSTEM) if sum(only_one_required) == 0: msg = _('Either project, domain or system must be ' 'specified for role %s' ) % role_assignment.get(self.ROLE) self.SYSTEM: (values.get('scope') and values.get('scope').get('system')),"," ROLE, DOMAIN, PROJECT 'role', 'domain', 'project' get_domain_id(domain)) if domain else None if project is not None and domain is not None: self.DOMAIN) if project is None and domain is None: msg = _('Either project or domain must be specified for' ' role %s') % role_assignment.get(self.ROLE)",50,8
openstack%2Fneutron~888769,openstack/neutron,master,I81390af2ea2fc384423518b84de3acf7adaf9193,[OVN] Skip the port status UP update during a live migration,MERGED,2023-07-18 13:42:14.000000000,2023-08-31 07:02:40.000000000,2023-08-25 18:01:17.000000000,"[{'_account_id': 1131}, {'_account_id': 6773}, {'_account_id': 8313}, {'_account_id': 8655}, {'_account_id': 9845}, {'_account_id': 11975}, {'_account_id': 22348}, {'_account_id': 34118}]","[{'number': 1, 'created': '2023-07-18 13:42:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/bd4b240075a13cab05957e7ace652a4d648cd653', 'message': '[WIP][DNM] Skip the port status UP update during a live migration\n\nTODO: testing, documentation\n\nSkip the port status UP update during a live migration. The port status\nwill be set by the ``LogicalSwitchPortCreate*`` events. The\n``PortBindingChassisUpdateEvent`` should only catch Port_Binding updates\nwhen, for example, a chassis went down.\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n'}, {'number': 2, 'created': '2023-07-19 13:11:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/69a73f144c74f98592e40fe0c04b8435435a26b1', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n'}, {'number': 3, 'created': '2023-07-19 13:26:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d3f9440cc628d21aacf8fc155395727c8cfd954a', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n'}, {'number': 4, 'created': '2023-07-20 17:22:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/d2d9ef989fb5c9af1a64e7a0241ecb59132e29d3', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n'}, {'number': 5, 'created': '2023-08-14 14:58:10.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/def960f6fc43f859c0e8598ea3f3e54689125449', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n'}, {'number': 6, 'created': '2023-08-22 09:58:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/neutron/commit/110a07b8827e3e852e65f66d260d2c88bdb227c3', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n'}, {'number': 7, 'created': '2023-08-24 09:03:06.000000000', 'files': ['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py', 'neutron/tests/unit/plugins/ml2/drivers/ovn/mech_driver/ovsdb/test_ovsdb_monitor.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/e1f887ca9ffa73dde8ab41590f2131f3297aa3cd', 'message': '[OVN] Skip the port status UP update during a live migration\n\nSkip the port status UP update during a live migration due to a\n``PortBindingChassisUpdateEvent`` event.\n\nThe port status will be set by  the ``LogicalSwitchPortCreateUpEvent``\nand ``LogicalSwitchPortCreateDownEvent`` events, that will be issued\nwhen the port is deleted from the source host and created in the\ndestination host. This is a planned operation and controlled by Nova,\nnot a reactive event due to an unplanned host down event.\n\nRelated-Bug: #2027605\nChange-Id: I81390af2ea2fc384423518b84de3acf7adaf9193\n'}]",9,888769,e1f887ca9ffa73dde8ab41590f2131f3297aa3cd,41,8,7,16688,,,0,"[OVN] Skip the port status UP update during a live migration

Skip the port status UP update during a live migration due to a
``PortBindingChassisUpdateEvent`` event.

The port status will be set by  the ``LogicalSwitchPortCreateUpEvent``
and ``LogicalSwitchPortCreateDownEvent`` events, that will be issued
when the port is deleted from the source host and created in the
destination host. This is a planned operation and controlled by Nova,
not a reactive event due to an unplanned host down event.

Related-Bug: #2027605
Change-Id: I81390af2ea2fc384423518b84de3acf7adaf9193
",git fetch https://review.opendev.org/openstack/neutron refs/changes/69/888769/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/common/ovn/utils.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/ovsdb_monitor.py']",2,bd4b240075a13cab05957e7ace652a4d648cd653,bug/2027605," req_chassis = utils.get_requested_chassis( row.options.get(ovn_const.LSP_OPTIONS_REQUESTED_CHASSIS_KEY, '')) if len(req_chassis) > 1: # This event has been issued during a LSP migration. The port # status update is skipped. return False ",,12,0
openstack%2Fdiskimage-builder~747220,openstack/diskimage-builder,master,Idc1aa86f10cddcd4549066d8ea1d6df6fd906bac,Don't remove packages that are requested to be installed,MERGED,2020-08-20 15:41:06.000000000,2023-08-31 06:10:41.000000000,2023-08-31 06:09:41.000000000,"[{'_account_id': 4146}, {'_account_id': 4162}, {'_account_id': 6469}, {'_account_id': 7118}, {'_account_id': 10118}, {'_account_id': 11628}, {'_account_id': 11655}, {'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 23181}, {'_account_id': 32029}]","[{'number': 1, 'created': '2020-08-20 15:41:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/fc823444b61ce566073261b442438a7d10ab9321', 'message': ""Don't remove packages that are requested to be installed\n\nRecently the source-repositories element was updated [0] to set git as a\nbuild-only dep. This is fine if you don't request to install git\nelsewhere as a regular package install [1]. If you mix the two then git\ngets uninstalled when you expect it to be installed.\n\nAddress this by checking if a package is already requested to be\ninstalled when we find a removal or build-only request. Similarly remove\na package from the uninstall list if we ask for it to be installed\nnormally. This means that explicit installs override any cleanup\nactions.\n\n[0] https://review.opendev.org/#/c/745678/1/diskimage_builder/elements/source-repositories/package-installs.yaml\n[1] https://opendev.org/openstack/project-config/src/branch/master/nodepool/elements/infra-package-needs/package-installs.yaml#L22\n\nChange-Id: Idc1aa86f10cddcd4549066d8ea1d6df6fd906bac\n""}, {'number': 2, 'created': '2020-08-20 18:06:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/75027cf664d8baad50ebe518ae11e9f6add6bee1', 'message': ""Don't remove packages that are requested to be installed\n\nRecently the source-repositories element was updated [0] to set git as a\nbuild-only dep. This is fine if you don't request to install git\nelsewhere as a regular package install [1]. If you mix the two then git\ngets uninstalled when you expect it to be installed.\n\nAddress this by checking if a package is already requested to be\ninstalled when we find a removal or build-only request. Similarly remove\na package from the uninstall list if we ask for it to be installed\nnormally. This means that explicit installs override any cleanup\nactions.\n\n[0] https://review.opendev.org/#/c/745678/1/diskimage_builder/elements/source-repositories/package-installs.yaml\n[1] https://opendev.org/openstack/project-config/src/branch/master/nodepool/elements/infra-package-needs/package-installs.yaml#L22\n\nChange-Id: Idc1aa86f10cddcd4549066d8ea1d6df6fd906bac\n""}, {'number': 3, 'created': '2020-08-21 15:30:29.000000000', 'files': ['diskimage_builder/elements/package-installs/bin/package-installs-squash', 'diskimage_builder/elements/package-installs/tests/test_package_squash.py'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/788224cfe074a55dfe4ffcf5f77f05bd5c32a8b5', 'message': ""Don't remove packages that are requested to be installed\n\nRecently the source-repositories element was updated [0] to set git as a\nbuild-only dep. This is fine if you don't request to install git\nelsewhere as a regular package install [1]. If you mix the two then git\ngets uninstalled when you expect it to be installed.\n\nAddress this by checking if a package is already requested to be\ninstalled when we find a removal or build-only request. Similarly remove\na package from the uninstall list if we ask for it to be installed\nnormally. This means that explicit installs override any cleanup\nactions.\n\n[0] https://review.opendev.org/#/c/745678/1/diskimage_builder/elements/source-repositories/package-installs.yaml\n[1] https://opendev.org/openstack/project-config/src/branch/master/nodepool/elements/infra-package-needs/package-installs.yaml#L22\n\nChange-Id: Idc1aa86f10cddcd4549066d8ea1d6df6fd906bac\n""}]",11,747220,788224cfe074a55dfe4ffcf5f77f05bd5c32a8b5,39,11,3,4146,,,0,"Don't remove packages that are requested to be installed

Recently the source-repositories element was updated [0] to set git as a
build-only dep. This is fine if you don't request to install git
elsewhere as a regular package install [1]. If you mix the two then git
gets uninstalled when you expect it to be installed.

Address this by checking if a package is already requested to be
installed when we find a removal or build-only request. Similarly remove
a package from the uninstall list if we ask for it to be installed
normally. This means that explicit installs override any cleanup
actions.

[0] https://review.opendev.org/#/c/745678/1/diskimage_builder/elements/source-repositories/package-installs.yaml
[1] https://opendev.org/openstack/project-config/src/branch/master/nodepool/elements/infra-package-needs/package-installs.yaml#L22

Change-Id: Idc1aa86f10cddcd4549066d8ea1d6df6fd906bac
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/20/747220/1 && git format-patch -1 --stdout FETCH_HEAD,['diskimage_builder/elements/package-installs/bin/package-installs-squash'],1,fc823444b61ce566073261b442438a7d10ab9321,dont-remove-requested-packages," if (('uninstall' in param or 'build-only' in param) and (pkg_name in data[phase][""install""] and pkg_name not in data[phase][""uninstall""])): # We don't add the package to the uninstall list as # something else has requested we install it without # removing it. continue if 'build-only' not in param and 'uninstall' not in param: # Remove any uninstallations if we are trying to install # the package. while pkg_name in data[phase][""uninstall""]: data[phase][""uninstall""].remove(pkg_name)",,12,0
openstack%2Fos-net-config~888665,openstack/os-net-config,master,I435d0e0ac93943bd57621d993f85a31536a3dbdc,Renamed variable/method names to suit the usages.,MERGED,2023-07-17 08:08:22.000000000,2023-08-31 06:01:17.000000000,2023-08-31 06:00:20.000000000,"[{'_account_id': 12398}, {'_account_id': 18575}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-07-17 08:08:22.000000000', 'files': ['os_net_config/cli.py'], 'web_link': 'https://opendev.org/openstack/os-net-config/commit/8134e6ce5f65e8756ec695b4ea7e712c1e20c1ba', 'message': 'Renamed variable/method names to suit the usages.\n\nChange-Id: I435d0e0ac93943bd57621d993f85a31536a3dbdc\n'}]",1,888665,8134e6ce5f65e8756ec695b4ea7e712c1e20c1ba,9,3,1,18904,,,0,"Renamed variable/method names to suit the usages.

Change-Id: I435d0e0ac93943bd57621d993f85a31536a3dbdc
",git fetch https://review.opendev.org/openstack/os-net-config refs/changes/65/888665/1 && git format-patch -1 --stdout FETCH_HEAD,['os_net_config/cli.py'],1,8134e6ce5f65e8756ec695b4ea7e712c1e20c1ba,,def _is_sriovpf_obj_found(obj): configure_sriov = _is_sriovpf_obj_found(member) sriovpf_bond_ovs_ports = [] if _is_sriovpf_obj_found(obj): sriovpf_bond_ovs_ports.extend( if sriovpf_bond_ovs_ports: disable_ipv6_for_netdevs(sriovpf_bond_ovs_ports) restart_ovs = bool(sriovpf_bond_ovs_ports) if not _is_sriovpf_obj_found(obj):,def check_configure_sriov(obj): configure_sriov = check_configure_sriov(member) sriovpf_member_of_bond_ovs_port_list = [] if check_configure_sriov(obj): sriovpf_member_of_bond_ovs_port_list.extend( if sriovpf_member_of_bond_ovs_port_list: disable_ipv6_for_netdevs(sriovpf_member_of_bond_ovs_port_list) restart_ovs = bool(sriovpf_member_of_bond_ovs_port_list) if not check_configure_sriov(obj):,9,9
openstack%2Fironic~879215,openstack/ironic,master,I6021152c83ab5025a9a9e6d8d24c64278c4c1053,Utilize the JSON-RPC port,MERGED,2023-04-01 03:50:01.000000000,2023-08-31 04:46:27.000000000,2023-08-31 04:45:05.000000000,"[{'_account_id': 4571}, {'_account_id': 10342}, {'_account_id': 22348}, {'_account_id': 32761}, {'_account_id': 35099}]","[{'number': 1, 'created': '2023-04-01 03:50:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/2c76b10ff677f75ad98ac2ad957affec094ef6e1', 'message': 'WIP: use json port configured on remote conductor\n\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 2, 'created': '2023-04-01 04:06:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/d8430528d83abbb07a9af6c4ec39087ce9c34eb2', 'message': 'WIP: use json port configured on remote conductor\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 3, 'created': '2023-04-03 21:55:06.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/a466e82fa028011111e5ed309f304f78c1fe8c69', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 4, 'created': '2023-06-06 16:23:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/3a133d5cb73fba90c0fda88cce4a17c400ba2cc7', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 5, 'created': '2023-06-23 16:17:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/21903689071cd3bf5a6b3f1f484fe3a38487539c', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 6, 'created': '2023-06-30 14:50:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/b5ed4479d5aa04a80285aa57719073126bf1b733', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 7, 'created': '2023-06-30 16:27:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/c97c58bad2653bbff60b60b63f7e357d2416107e', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 8, 'created': '2023-07-07 15:48:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/cee779f7c0cc8eb6cb5b907c788788e056e84836', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 9, 'created': '2023-07-26 13:59:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/18f474e99d6df026463c500e5636dd3094375e2e', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}, {'number': 10, 'created': '2023-08-30 15:56:24.000000000', 'files': ['ironic/tests/unit/conductor/test_base_manager.py', 'requirements.txt', 'ironic/conductor/manager.py', 'releasenotes/notes/use-port-in-hostname-for-jsonrpc-cdcd2c20a68a22c1.yaml', 'ironic/conductor/base_manager.py', 'ironic/common/release_mappings.py', 'ironic/conductor/rpcapi.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/c84fe147a3e4345cf18d1c80d1ded2889c13c3e4', 'message': 'Utilize the JSON-RPC port\n\nAdds storage of the json-rpc port number to the conductor hostname\nto enable rpc clients to understand which rpc servies they need to\nconnect to.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211\nChange-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053\n'}]",7,879215,c84fe147a3e4345cf18d1c80d1ded2889c13c3e4,51,5,10,11655,,,0,"Utilize the JSON-RPC port

Adds storage of the json-rpc port number to the conductor hostname
to enable rpc clients to understand which rpc servies they need to
connect to.

Depends-On: https://review.opendev.org/c/openstack/ironic-lib/+/879211
Change-Id: I6021152c83ab5025a9a9e6d8d24c64278c4c1053
",git fetch https://review.opendev.org/openstack/ironic refs/changes/15/879215/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic/common/hash_ring.py', 'ironic/db/sqlalchemy/api.py', 'ironic/conductor/rpcapi.py']",3,2c76b10ff677f75ad98ac2ad957affec094ef6e1,," request_port = self.get_conductor_port(host) if request_port: return self.client.prepare(topic=topic, version=version, port=request_port) else: return self.client.prepare(topic=topic, version=version) def get_conductor_port(self, node): """"""Get the port from the hash ring cache manager. If json-rpc is in use, this method returns the port to utilize for a connection to json-rpc by consulting the cached item. :param node: The hostname to utilize fo ror the lookup. """""" if CONF.rpc_transport != 'json-rpc': return None try: port = self.ring_manager.port_cache[node] except KeyError: return None "," return self.client.prepare(topic=topic, version=version)",41,7
openstack%2Fdiskimage-builder~886908,openstack/diskimage-builder,master,I9efcd9cb6621e6403df6de14f122b1cf371bd800,Append detailed printing information when exec_sudo fails,MERGED,2023-06-25 07:33:03.000000000,2023-08-31 04:39:41.000000000,2023-08-31 04:38:24.000000000,"[{'_account_id': 4571}, {'_account_id': 11655}, {'_account_id': 20722}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-25 07:33:03.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/bf9f9e24141a04317c3c971b7ce5e1e17dc4f675', 'message': 'Append detailed printing information when exec_sudo fails\n\nThis patch tries to add more detailed info by appending\nerror output to exec_sudo print.\n\nIn current implementation, only a simple static note `Exception:\nexec_sudo failed` is printed:\n```\nINFO diskimage_builder.block_device.utils [-] Calling [sudo sgdisk\n /tmp/dib_image.jZaDPxtX/image0.raw -n 1:0:+550M -t 1:EF00 -c 1:ESP\n -n 2:0:+8M -t 2:EF02 -c 2:BSP -n 3:0:+2077M -t 3:8300 -c 3:root]\nERROR diskimage_builder.block_device.blockdevice [-] Create failed;\n rollback initiated\n// ... ...\ndiskimage_builder.block_device.exception.BlockDeviceSetupException:\n exec_sudo failed\n```\n\nbut the root reason is missing. We cant get more error info to\nmake sure what the real root reason even a simple problem like\n`command not found`, we have to reproduce locally and manually.\n\nAfter this patch, the error message like:\n```\nINFO diskimage_builder.block_device.utils [-] Calling [sudo sgdisk\n /tmp/dib_image.jZaDPxtX/image0.raw -n 1:0:+550M -t 1:EF00 -c 1:ESP\n -n 2:0:+8M -t 2:EF02 -c 2:BSP -n 3:0:+2077M -t 3:8300 -c 3:root]\nERROR diskimage_builder.block_device.blockdevice [-] Create failed;\n rollback initiated\n// ... ...\ndiskimage_builder.block_device.exception.BlockDeviceSetupException:\n exec_sudo failed: sudo: sgdisk: command not found\n```\nWe can easily find the real problem and solve it.\n\nChange-Id: I9efcd9cb6621e6403df6de14f122b1cf371bd800\n'}, {'number': 2, 'created': '2023-06-25 08:02:58.000000000', 'files': ['diskimage_builder/block_device/utils.py'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/864ae115091964a4648667bc72e2c5d8f41effae', 'message': 'Append detailed printing information when exec_sudo fails\n\nThis patch tries to add more detailed info by appending\nerror output to exec_sudo print.\n\nIn current implementation, only a simple static note `Exception:\nexec_sudo failed` is printed:\n```\nINFO diskimage_builder.block_device.utils [-] Calling [sudo sgdisk\n /tmp/dib_image.jZaDPxtX/image0.raw -n 1:0:+550M -t 1:EF00 -c 1:ESP\n -n 2:0:+8M -t 2:EF02 -c 2:BSP -n 3:0:+2077M -t 3:8300 -c 3:root]\nERROR diskimage_builder.block_device.blockdevice [-] Create failed;\n rollback initiated\n// ... ...\ndiskimage_builder.block_device.exception.BlockDeviceSetupException:\n exec_sudo failed\n```\n\nbut the root reason is missing. We cant get more error info to\nmake sure what the real root reason even a simple problem like\n`command not found`, we have to reproduce locally and manually.\n\nAfter this patch, the error message like:\n```\nINFO diskimage_builder.block_device.utils [-] Calling [sudo sgdisk\n /tmp/dib_image.jZaDPxtX/image0.raw -n 1:0:+550M -t 1:EF00 -c 1:ESP\n -n 2:0:+8M -t 2:EF02 -c 2:BSP -n 3:0:+2077M -t 3:8300 -c 3:root]\nERROR diskimage_builder.block_device.blockdevice [-] Create failed;\n rollback initiated\n// ... ...\ndiskimage_builder.block_device.exception.BlockDeviceSetupException:\n exec_sudo failed: sudo: sgdisk: command not found\n```\nWe can easily find the real problem and solve it.\n\nCloses-Bug: #2024980\n\nChange-Id: I9efcd9cb6621e6403df6de14f122b1cf371bd800\n'}]",3,886908,864ae115091964a4648667bc72e2c5d8f41effae,16,4,2,36126,,,0,"Append detailed printing information when exec_sudo fails

This patch tries to add more detailed info by appending
error output to exec_sudo print.

In current implementation, only a simple static note `Exception:
exec_sudo failed` is printed:
```
INFO diskimage_builder.block_device.utils [-] Calling [sudo sgdisk
 /tmp/dib_image.jZaDPxtX/image0.raw -n 1:0:+550M -t 1:EF00 -c 1:ESP
 -n 2:0:+8M -t 2:EF02 -c 2:BSP -n 3:0:+2077M -t 3:8300 -c 3:root]
ERROR diskimage_builder.block_device.blockdevice [-] Create failed;
 rollback initiated
// ... ...
diskimage_builder.block_device.exception.BlockDeviceSetupException:
 exec_sudo failed
```

but the root reason is missing. We cant get more error info to
make sure what the real root reason even a simple problem like
`command not found`, we have to reproduce locally and manually.

After this patch, the error message like:
```
INFO diskimage_builder.block_device.utils [-] Calling [sudo sgdisk
 /tmp/dib_image.jZaDPxtX/image0.raw -n 1:0:+550M -t 1:EF00 -c 1:ESP
 -n 2:0:+8M -t 2:EF02 -c 2:BSP -n 3:0:+2077M -t 3:8300 -c 3:root]
ERROR diskimage_builder.block_device.blockdevice [-] Create failed;
 rollback initiated
// ... ...
diskimage_builder.block_device.exception.BlockDeviceSetupException:
 exec_sudo failed: sudo: sgdisk: command not found
```
We can easily find the real problem and solve it.

Closes-Bug: #2024980

Change-Id: I9efcd9cb6621e6403df6de14f122b1cf371bd800
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/08/886908/1 && git format-patch -1 --stdout FETCH_HEAD,['diskimage_builder/block_device/utils.py'],1,bf9f9e24141a04317c3c971b7ce5e1e17dc4f675,fix/diskimage-builder," e = BlockDeviceSetupException(""exec_sudo failed: %s"" % out)"," e = BlockDeviceSetupException(""exec_sudo failed"")",1,1
openstack%2Fswift~892982,openstack/swift,master,Id1095be78ed50516d98b71b9f85e05c7faeba392,Add additional description about locations of username and password for tempauth in SAIO in doc/source/development_saio.rst,NEW,2023-08-28 16:57:01.000000000,2023-08-31 04:26:23.000000000,,"[{'_account_id': 7233}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 16:57:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/e5e1df612275be7b8302b1a22f100fc2e34f15a1', 'message': 'title: Add additional description about location of username and password for\ntempauth in SAIO in doc/source/development_saio.rst\n\nFor beginners who are yet familiar with Swift Authentication\nmiddlewares, including tempauth, they may be confused about where\nusername and password used in the example are located. Thus, add an\nadditional description informing that these authentication infos are\nlocated in a tempauth filter section in proxy-server configuration,\nso that beginners can see and possibly modify the configuration file\nfor authentication.\n\nChange-Id: Id1095be78ed50516d98b71b9f85e05c7faeba392\n'}, {'number': 2, 'created': '2023-08-30 11:49:44.000000000', 'files': ['doc/source/development_saio.rst'], 'web_link': 'https://opendev.org/openstack/swift/commit/0e4d75ab5181367bc083ae04710301bc7d391600', 'message': 'Add additional description about locations of username and password for\ntempauth in SAIO in doc/source/development_saio.rst\n\nFor beginners who are yet familiar with Swift Authentication\nmiddlewares, including tempauth, they may be confused about where\nusername and password used in the example are located. Thus, add an\nadditional description informing that these authentication infos are located in a tempauth filter section in proxy-server configuration,\nso that beginners can see and possibly modify the configuration file\nfor authentication.\n\nChange-Id: Id1095be78ed50516d98b71b9f85e05c7faeba392\n'}]",4,892982,0e4d75ab5181367bc083ae04710301bc7d391600,6,2,2,36165,,,0,"Add additional description about locations of username and password for
tempauth in SAIO in doc/source/development_saio.rst

For beginners who are yet familiar with Swift Authentication
middlewares, including tempauth, they may be confused about where
username and password used in the example are located. Thus, add an
additional description informing that these authentication infos are located in a tempauth filter section in proxy-server configuration,
so that beginners can see and possibly modify the configuration file
for authentication.

Change-Id: Id1095be78ed50516d98b71b9f85e05c7faeba392
",git fetch https://review.opendev.org/openstack/swift refs/changes/82/892982/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/development_saio.rst'],1,e5e1df612275be7b8302b1a22f100fc2e34f15a1,," (username (and group) and password for authentication can be found in a tempauth filter section in proxy-server configuration file (i.e. ``/etc/swift/proxy-server.conf``). For more information about tempauth, see :mod:`swift.common.middleware.tempauth`. ",,2,0
openstack%2Fneutron~893144,openstack/neutron,stable/wallaby,Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a,[OVN] Cleanup old Hash Ring node entries,MERGED,2023-08-30 10:34:46.000000000,2023-08-31 02:14:25.000000000,2023-08-31 02:04:12.000000000,"[{'_account_id': 1131}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:34:46.000000000', 'files': ['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/ba6c2eeeb7c6573ff5d33b459e89adaccccfa8ac', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)\n""}]",1,893144,ba6c2eeeb7c6573ff5d33b459e89adaccccfa8ac,12,3,1,6773,,,0,"[OVN] Cleanup old Hash Ring node entries

This patch introduces a maintenance task that runs once a day and is
responsible for cleaning up Hash Ring nodes that haven't been updated in
5 days or more.

Change-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a
Closes-Bug: #2033281
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/44/893144/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py']",4,ba6c2eeeb7c6573ff5d33b459e89adaccccfa8ac,," @periodics.periodic(spacing=86400, run_immediately=True) def cleanup_old_hash_ring_nodes(self): """"""Daily task to cleanup old stable Hash Ring node entries. Runs once a day and clean up Hash Ring entries that haven't been updated in more than 5 days. See LP #2033281 for more information. """""" if not self.has_lock: return context = n_context.get_admin_context() hash_ring_db.cleanup_old_nodes(context, days=5) ",,55,0
openstack%2Felection~893297,openstack/election,master,Icb8c3ff0772b541806371fce058c6e23f3167c66,[WIP] Fix on combined election nomination end template,NEW,2023-08-31 00:45:02.000000000,2023-08-31 00:53:05.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-31 00:45:02.000000000', 'files': ['openstack_election/templates/combined_end_nominations.j2'], 'web_link': 'https://opendev.org/openstack/election/commit/88b80365bc1fd728f1232ca3ab7b2a124d973617', 'message': '[WIP] Fix on combined election nomination end template\n\nChange-Id: Icb8c3ff0772b541806371fce058c6e23f3167c66\n'}]",5,893297,88b80365bc1fd728f1232ca3ab7b2a124d973617,3,1,1,14482,,,0,"[WIP] Fix on combined election nomination end template

Change-Id: Icb8c3ff0772b541806371fce058c6e23f3167c66
",git fetch https://review.opendev.org/openstack/election refs/changes/97/893297/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack_election/templates/combined_end_nominations.j2'],1,88b80365bc1fd728f1232ca3ab7b2a124d973617,template-fix,The details for those will be posted around polling start date after we setup the CIVS system. -- TC Election Details --[0] https://governance.openstack.org/election/#ptl-candidates [1] https://governance.openstack.org/election/#tc-candidates,-- TC Election Details --[0] https://governance.openstack.org/election/#{{ release }}-ptl-candidates [1] https://governance.openstack.org/election/#{{ release }}-tc-candidates,6,3
openstack%2Felection~893281,openstack/election,master,Ibd9ab22e4c9ea8d2d8a5695d73da85d5eafa11d4,Tim Burke candidacy for Swift PTL (Caracal),MERGED,2023-08-30 19:56:31.000000000,2023-08-31 00:26:43.000000000,2023-08-31 00:25:12.000000000,"[{'_account_id': 7233}, {'_account_id': 14482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 19:56:31.000000000', 'files': ['candidates/2024.1/Swift/tburke@nvidia.com'], 'web_link': 'https://opendev.org/openstack/election/commit/987e9058fde69e5f4073053525b996011941b213', 'message': 'Tim Burke candidacy for Swift PTL (Caracal)\n\nChange-Id: Ibd9ab22e4c9ea8d2d8a5695d73da85d5eafa11d4\n'}]",3,893281,987e9058fde69e5f4073053525b996011941b213,9,3,1,15343,,,0,"Tim Burke candidacy for Swift PTL (Caracal)

Change-Id: Ibd9ab22e4c9ea8d2d8a5695d73da85d5eafa11d4
",git fetch https://review.opendev.org/openstack/election refs/changes/81/893281/1 && git format-patch -1 --stdout FETCH_HEAD,['candidates/2024.1/Swift/tburke@nvidia.com'],1,987e9058fde69e5f4073053525b996011941b213,,"It would be my pleasure to continue serving as Swift PTL for the Caracal cycle. I forsee us grappling with several challenges over the next few cycles: Successful clusters expand until they hit a wall, whether that's due to budget or physical space constraints. Swift will need to adapt to operate in more constrained environments. Total disk capacity is not the only measure of a cluster. Network bandwidth (both aggregate across the cluster as well as single-stream) and requests per second drive much of the client experience. Swift will need to be able to ration those between tenants, similar to how it can enforce capacity quotas. Operators are not the only ones interested in metrics and storage insights. Users want to know what their individual access patterns are like and how that has changed over time. I'm excited to see how much we can achieve in Caracal. Tim Burke ",,22,0
openstack%2Felection~893179,openstack/election,master,I73856dc4e048f597040916360b7ac6e77344793d,Add Dave Wilde candicacy for Keystone 2024.1 PTL,MERGED,2023-08-30 13:32:24.000000000,2023-08-31 00:26:02.000000000,2023-08-31 00:25:11.000000000,"[{'_account_id': 14482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 13:32:24.000000000', 'files': ['candidates/2024.1/Keystone/dwilde@redhat.com'], 'web_link': 'https://opendev.org/openstack/election/commit/b5d5f851a8b2a4230fa821399d9aeadba431eca0', 'message': 'Add Dave Wilde candicacy for Keystone 2024.1 PTL\n\nChange-Id: I73856dc4e048f597040916360b7ac6e77344793d\n'}]",2,893179,b5d5f851a8b2a4230fa821399d9aeadba431eca0,8,2,1,7414,,,0,"Add Dave Wilde candicacy for Keystone 2024.1 PTL

Change-Id: I73856dc4e048f597040916360b7ac6e77344793d
",git fetch https://review.opendev.org/openstack/election refs/changes/79/893179/1 && git format-patch -1 --stdout FETCH_HEAD,['candidates/2024.1/Keystone/dwilde@redhat.com'],1,b5d5f851a8b2a4230fa821399d9aeadba431eca0,,"Hey folks, It's Dave here, your current OpenStack Keystone PTL. I'd like to submit my candidacy to again act as the PTL for the 2024.1 cycle. We're making great progress with Keystone, and I would like to continue with that excellent work. As PTL in this cycle here are some of the things I'd like to focus on: - Finish the manager role and ensure that the SRBAC implied roles are correct for manager and member - Continue the OAuth 2.0 Implementation - Start a known issues section in the Keystone documentation - Start a documentation audit to ensure that our documentation is of the highest quality Of course we will continue the weekly meetings and the reviewathons. I think the reviewathons have been very successful and I'm keen on keeping them going. I'm looking forward to another successful cycle and working with everyone again! Thank you! /Dave ",,24,0
openstack%2Felection~893130,openstack/election,master,Ic52dd1febc8e1e21b6cc6ba17a4d80db0e6af993,Adding Takashi Kajinami candidacy for Puppet OpenStack PTL,MERGED,2023-08-30 06:58:45.000000000,2023-08-31 00:19:19.000000000,2023-08-31 00:18:12.000000000,"[{'_account_id': 14482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 06:58:45.000000000', 'files': ['candidates/2024.1/Puppet_OpenStack/tkajinam@redhat.com'], 'web_link': 'https://opendev.org/openstack/election/commit/8af807db77f38096dcc74cfebf285dcc26f92139', 'message': 'Adding Takashi Kajinami candidacy for Puppet OpenStack PTL\n\nChange-Id: Ic52dd1febc8e1e21b6cc6ba17a4d80db0e6af993\n'}]",2,893130,8af807db77f38096dcc74cfebf285dcc26f92139,8,2,1,9816,,,0,"Adding Takashi Kajinami candidacy for Puppet OpenStack PTL

Change-Id: Ic52dd1febc8e1e21b6cc6ba17a4d80db0e6af993
",git fetch https://review.opendev.org/openstack/election refs/changes/30/893130/1 && git format-patch -1 --stdout FETCH_HEAD,['candidates/2024.1/Puppet_OpenStack/tkajinam@redhat.com'],1,8af807db77f38096dcc74cfebf285dcc26f92139,,"Hello, I'd like to announce my candidacy for the PTL role in Puppet OpenStack during 2024.1 cycle. I'd like to list up a few focus points for the upcoming cycle. - Keep our CI healthy - Keep our modules concistent with updates in OpenStack component - Consider working on some modernization of our modules - Removal of validate_legacy is prioritized to adapt to new stdlib - We also have a few other topics we may work on but with lower prioeiry Thank you for your consideration. Thank you, Takashi ",,20,0
openstack%2Felection~893128,openstack/election,master,I82fdd140b28cf4f5265ffa08e70bce5af8fde1a7,Add Pranali Deore's candidacy for Glance PTL 2024.1,MERGED,2023-08-30 05:20:54.000000000,2023-08-31 00:16:30.000000000,2023-08-31 00:15:37.000000000,"[{'_account_id': 14482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 05:20:54.000000000', 'files': ['candidates/2024.1/Glance/pdeore@redhat.com'], 'web_link': 'https://opendev.org/openstack/election/commit/26b41443456ed2a454eac7051b9abafcd537aab5', 'message': ""Add Pranali Deore's candidacy for Glance PTL 2024.1\n\nChange-Id: I82fdd140b28cf4f5265ffa08e70bce5af8fde1a7\n""}]",2,893128,26b41443456ed2a454eac7051b9abafcd537aab5,8,2,1,19138,,,0,"Add Pranali Deore's candidacy for Glance PTL 2024.1

Change-Id: I82fdd140b28cf4f5265ffa08e70bce5af8fde1a7
",git fetch https://review.opendev.org/openstack/election refs/changes/28/893128/1 && git format-patch -1 --stdout FETCH_HEAD,['candidates/2024.1/Glance/pdeore@redhat.com'],1,26b41443456ed2a454eac7051b9abafcd537aab5,ptl-candidacy,"Hello Everyone, I would like to announce my candidacy for Glance PTL for the 2024.1 (Caracal) cycle. I have been the Glance PTL for the last 2 cycles. Over the past couple of years we've had a small team looking after Glance and planned the priorities accordingly. During Bobcat cycle we continued putting efforts in bridging the gap between glanceclient and openstackclient and adding support of new location APIs to mitigate the security issues. We have added the support to configure weight for each store to get rid of the problem with existing location strategy while downloading the image from specific store when multiple stores of same type are avialble. In 2024.1 (Caracal) cycle I would keep driving the key priorities, finishing the work we've had in flight and focus on making glance to configure multiple stores by default. I'm thankful for all the support I've had from the team. Thank you for taking my self nomination into consideration, Pranali Deore (pdeore) ",,25,0
openstack%2Felection~893126,openstack/election,master,Idcf07aa07dc58a21a53a409e52f81fd95fed2f43,Adding Takashi Kajinami candidacy for Heat PTL,MERGED,2023-08-30 04:14:22.000000000,2023-08-31 00:14:28.000000000,2023-08-31 00:13:36.000000000,"[{'_account_id': 8833}, {'_account_id': 14482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 04:14:22.000000000', 'files': ['candidates/2024.1/Heat/tkajinam@redhat.com'], 'web_link': 'https://opendev.org/openstack/election/commit/be76e29e12a64f196f52f6ba0f566f4d9ea843a0', 'message': 'Adding Takashi Kajinami candidacy for Heat PTL\n\nChange-Id: Idcf07aa07dc58a21a53a409e52f81fd95fed2f43\n'}]",2,893126,be76e29e12a64f196f52f6ba0f566f4d9ea843a0,9,3,1,9816,,,0,"Adding Takashi Kajinami candidacy for Heat PTL

Change-Id: Idcf07aa07dc58a21a53a409e52f81fd95fed2f43
",git fetch https://review.opendev.org/openstack/election refs/changes/26/893126/1 && git format-patch -1 --stdout FETCH_HEAD,['candidates/2024.1/Heat/tkajinam@redhat.com'],1,be76e29e12a64f196f52f6ba0f566f4d9ea843a0,,"Hello, I'd like to announce my candidacy for Heat PTL during 2024.1 cycle to continue my PTL role for the next cycle. Our team is small and have limited resources now. As the PTL I'd propose that we focus on the following priorities. * Keep CI green This is always our top-priority to move our development as well as maintanence forward. * Adoption to sqlalchemy 2.0 This would be our biggest priority for the next cycle (and the subsequent cycle) before the bump is made in upper-constraints. * Adoption to SRBAC design update The current implementation in Heat is based on old design which was updated several times. We have to adapt to the new design to provide the consistent experience with the OpenStack components. Thank you for your consideration ! Thank you, Takashi ",,29,0
openstack%2Felection~893123,openstack/election,master,I01a279c657c4fcd5d5292252ac0a833b124c84c1,Adding Takashi Kajinami candidacy for Storlets PTL,MERGED,2023-08-30 02:28:25.000000000,2023-08-31 00:12:24.000000000,2023-08-31 00:11:25.000000000,"[{'_account_id': 14482}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 02:28:25.000000000', 'files': ['candidates/2024.1/Storlets/tkajinam@redhat.com'], 'web_link': 'https://opendev.org/openstack/election/commit/dc086a631ebffdd85f84363d7436f8253e655f3c', 'message': 'Adding Takashi Kajinami candidacy for Storlets PTL\n\nChange-Id: I01a279c657c4fcd5d5292252ac0a833b124c84c1\n'}]",2,893123,dc086a631ebffdd85f84363d7436f8253e655f3c,8,2,1,9816,,,0,"Adding Takashi Kajinami candidacy for Storlets PTL

Change-Id: I01a279c657c4fcd5d5292252ac0a833b124c84c1
",git fetch https://review.opendev.org/openstack/election refs/changes/23/893123/1 && git format-patch -1 --stdout FETCH_HEAD,['candidates/2024.1/Storlets/tkajinam@redhat.com'],1,dc086a631ebffdd85f84363d7436f8253e655f3c,,"Hi All, I'd like to announce my candidacy for PTL of Storlets during 2024.1 cycle, to continue my current PTL role for the next cycle. The project is now very small and has not be much active. Our continuous focus is to maintain CI and adapt to any changes in swift and dependencies, to keep our software functional. Thank you for your consideration. Thank you, Takashi ",,15,0
openstack%2Fironic-python-agent-builder~892968,openstack/ironic-python-agent-builder,stable/xena,I6128fbad5d9db2ea6469f196f3ee13b6fab76837,Add checksum generation support,MERGED,2023-08-28 13:42:53.000000000,2023-08-31 00:04:36.000000000,2023-08-31 00:03:35.000000000,"[{'_account_id': 10342}, {'_account_id': 11655}, {'_account_id': 14200}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:42:53.000000000', 'files': ['dib/ironic-ramdisk-base/environment.d/10-checksum.bash', 'dib/ironic-ramdisk-base/cleanup.d/99-ramdisk-create'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/b791de076aaa4df60d7560c5381aa13a48ac692f', 'message': 'Add checksum generation support\n\nDIB_CHECKSUM is set by the disk-image-create --checksum flag, and for\nother images results in checksum files being generated for the\nimage[1].\n\nThis change ensures checksum files are generated for built\nramdisk/kernel as well.\n\n[1] https://opendev.org/openstack/diskimage-builder/src/branch/master/diskimage_builder/lib/common-functions#L68\n\nChange-Id: I6128fbad5d9db2ea6469f196f3ee13b6fab76837\n(cherry picked from commit 59d79f6ccd45e55ca72d7c971a74eb202702ce4e)\n'}]",1,892968,b791de076aaa4df60d7560c5381aa13a48ac692f,12,4,1,14200,,,0,"Add checksum generation support

DIB_CHECKSUM is set by the disk-image-create --checksum flag, and for
other images results in checksum files being generated for the
image[1].

This change ensures checksum files are generated for built
ramdisk/kernel as well.

[1] https://opendev.org/openstack/diskimage-builder/src/branch/master/diskimage_builder/lib/common-functions#L68

Change-Id: I6128fbad5d9db2ea6469f196f3ee13b6fab76837
(cherry picked from commit 59d79f6ccd45e55ca72d7c971a74eb202702ce4e)
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/68/892968/1 && git format-patch -1 --stdout FETCH_HEAD,"['dib/ironic-ramdisk-base/environment.d/10-checksum.bash', 'dib/ironic-ramdisk-base/cleanup.d/99-ramdisk-create']",2,b791de076aaa4df60d7560c5381aa13a48ac692f,extend-dib-checksum,"if [ ""$DIB_CHECKSUM"" == ""1"" ]; then pushd $(dirname ${IMAGE_PATH}) md5sum ${IMAGE_NAME}.initramfs ${IMAGE_NAME}.kernel > ${IMAGE_NAME}.md5 sha256sum ${IMAGE_NAME}.initramfs ${IMAGE_NAME}.kernel > ${IMAGE_NAME}.sha256 popd fi",,7,0
openstack%2Fneutron~893142,openstack/neutron,stable/yoga,Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a,[OVN] Cleanup old Hash Ring node entries,MERGED,2023-08-30 10:34:17.000000000,2023-08-30 23:52:36.000000000,2023-08-30 23:51:25.000000000,"[{'_account_id': 1131}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:34:17.000000000', 'files': ['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/79010935c0441598c2ce6d82f59d1fb828f3437e', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)\n""}]",3,893142,79010935c0441598c2ce6d82f59d1fb828f3437e,18,3,1,6773,,,0,"[OVN] Cleanup old Hash Ring node entries

This patch introduces a maintenance task that runs once a day and is
responsible for cleaning up Hash Ring nodes that haven't been updated in
5 days or more.

Change-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a
Closes-Bug: #2033281
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/42/893142/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py']",4,79010935c0441598c2ce6d82f59d1fb828f3437e,," @periodics.periodic(spacing=86400, run_immediately=True) def cleanup_old_hash_ring_nodes(self): """"""Daily task to cleanup old stable Hash Ring node entries. Runs once a day and clean up Hash Ring entries that haven't been updated in more than 5 days. See LP #2033281 for more information. """""" if not self.has_lock: return context = n_context.get_admin_context() hash_ring_db.cleanup_old_nodes(context, days=5) ",,55,0
openstack%2Fironic~889122,openstack/ironic,master,I4b40ffb3e3ef1fa5f291d202e005fa38ef890d19,DNM: Testing Nova-Ironic driver lessee change.,ABANDONED,2023-07-20 19:33:41.000000000,2023-08-30 23:28:44.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-07-20 19:33:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/fffd28d757e1bb2803e332a1d06d1f2ac1a9eb59', 'message': 'DNM: Testing Nova-Ironic driver lessee change.\n\nDepends-On: https://review.opendev.org/c/openstack/nova/+/888290\nChange-Id: I4b40ffb3e3ef1fa5f291d202e005fa38ef890d19\n'}, {'number': 2, 'created': '2023-08-30 20:21:10.000000000', 'files': ['ironic/cmd/__init__.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/d219ff369292f24ee153db762846588e43c3d1a5', 'message': 'DNM: Testing Nova-Ironic driver lessee change.\n\nDepends-On: https://review.opendev.org/c/openstack/nova/+/888290\nChange-Id: I4b40ffb3e3ef1fa5f291d202e005fa38ef890d19\n'}]",2,889122,d219ff369292f24ee153db762846588e43c3d1a5,8,1,2,10342,,,0,"DNM: Testing Nova-Ironic driver lessee change.

Depends-On: https://review.opendev.org/c/openstack/nova/+/888290
Change-Id: I4b40ffb3e3ef1fa5f291d202e005fa38ef890d19
",git fetch https://review.opendev.org/openstack/ironic refs/changes/22/889122/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic/cmd/__init__.py'],1,fffd28d757e1bb2803e332a1d06d1f2ac1a9eb59,,#actually run tests,,1,0
openstack%2Fbifrost~893291,openstack/bifrost,master,I4fbfc00c26030c86de377850be4f1a8b21ffb89e,DNM: Verify bifrost jobs can be run w/zuul on ansible 8,ABANDONED,2023-08-30 21:24:01.000000000,2023-08-30 23:20:47.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-30 21:24:01.000000000', 'files': ['zuul.d/bifrost-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/bifrost/commit/995c5c1ddaf07f1c732977037d325b8608f11061', 'message': 'DNM: Verify bifrost jobs can be run w/zuul on ansible 8\n\nChange-Id: I4fbfc00c26030c86de377850be4f1a8b21ffb89e\n'}]",0,893291,995c5c1ddaf07f1c732977037d325b8608f11061,3,1,1,10342,,,0,"DNM: Verify bifrost jobs can be run w/zuul on ansible 8

Change-Id: I4fbfc00c26030c86de377850be4f1a8b21ffb89e
",git fetch https://review.opendev.org/openstack/bifrost refs/changes/91/893291/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/bifrost-jobs.yaml'],1,995c5c1ddaf07f1c732977037d325b8608f11061,, ansible-version: '8',,1,0
openstack%2Fpython-cinderclient~893288,openstack/python-cinderclient,master,Ifabdce8876d287c52cdec9777393fcb7c82c8fc1,Use tox 4.11.0,MERGED,2023-08-30 20:39:12.000000000,2023-08-30 23:17:03.000000000,2023-08-30 23:16:01.000000000,"[{'_account_id': 4523}, {'_account_id': 5314}, {'_account_id': 9236}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 20:39:12.000000000', 'files': ['tox.ini'], 'web_link': 'https://opendev.org/openstack/python-cinderclient/commit/f1f14dfbb77dd24e2a9c8688bb6ec688d0f8229c', 'message': ""Use tox 4.11.0\n\nWe're hitting https://github.com/tox-dev/pyproject-api/issues/101 on\nthe functional jobs in the gate, which are using the system tox.  So\ntell tox to upgrade itself to the version that gets around that issue.\n\nChange-Id: Ifabdce8876d287c52cdec9777393fcb7c82c8fc1\n""}]",2,893288,f1f14dfbb77dd24e2a9c8688bb6ec688d0f8229c,10,4,1,5314,,,0,"Use tox 4.11.0

We're hitting https://github.com/tox-dev/pyproject-api/issues/101 on
the functional jobs in the gate, which are using the system tox.  So
tell tox to upgrade itself to the version that gets around that issue.

Change-Id: Ifabdce8876d287c52cdec9777393fcb7c82c8fc1
",git fetch https://review.opendev.org/openstack/python-cinderclient refs/changes/88/893288/1 && git format-patch -1 --stdout FETCH_HEAD,['tox.ini'],1,f1f14dfbb77dd24e2a9c8688bb6ec688d0f8229c,use-tox-4.11.0,minversion = 4.11.0,minversion = 4.4.1,1,1
openstack%2Fgovernance~893222,openstack/governance,master,I4f719f3bbf32e0cff185b0bfe16592baa154b1bc,Fix sphinx extlinks captions,MERGED,2023-08-30 15:08:01.000000000,2023-08-30 22:59:05.000000000,2023-08-30 22:58:02.000000000,"[{'_account_id': 4393}, {'_account_id': 8556}, {'_account_id': 10342}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 15:08:01.000000000', 'files': ['doc/source/conf.py'], 'web_link': 'https://opendev.org/openstack/governance/commit/8d7d972d11eb038aa1f3f65237b5235328e12a73', 'message': 'Fix sphinx extlinks captions\n\nWe were hitting [1] after Sphinx was bumped to newer version with [2].\nWith this patch our docs should be compatible with new Sphinx.\n\n[1] https://github.com/sphinx-doc/sphinx/issues/11094\n[2] https://review.opendev.org/c/openstack/requirements/+/891751/\n\nChange-Id: I4f719f3bbf32e0cff185b0bfe16592baa154b1bc\n'}]",1,893222,8d7d972d11eb038aa1f3f65237b5235328e12a73,11,4,1,11975,,,0,"Fix sphinx extlinks captions

We were hitting [1] after Sphinx was bumped to newer version with [2].
With this patch our docs should be compatible with new Sphinx.

[1] https://github.com/sphinx-doc/sphinx/issues/11094
[2] https://review.opendev.org/c/openstack/requirements/+/891751/

Change-Id: I4f719f3bbf32e0cff185b0bfe16592baa154b1bc
",git fetch https://review.opendev.org/openstack/governance refs/changes/22/893222/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/conf.py'],1,8d7d972d11eb038aa1f3f65237b5235328e12a73,code-change," 'repo': ('https://opendev.org/%s', None),"," 'repo': ('https://opendev.org/%s', ''),",1,1
openstack%2Fhorizon~890619,openstack/horizon,master,I4fd81adf11f02ace4f0ec31bd1fdc07be8acc119,Add Persian translation,NEW,2023-08-07 05:28:11.000000000,2023-08-30 22:43:21.000000000,,"[{'_account_id': 136}, {'_account_id': 22348}, {'_account_id': 22655}, {'_account_id': 29313}, {'_account_id': 36274}]","[{'number': 1, 'created': '2023-08-07 05:28:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/horizon/commit/0e95e7e42648d3035150d7ee1729f3d1f46ed280', 'message': 'Add Persian translation\n\nChange-Id: I4fd81adf11f02ace4f0ec31bd1fdc07be8acc119\n'}, {'number': 2, 'created': '2023-08-07 06:43:49.000000000', 'files': ['horizon/locale/fa/LC_MESSAGES/djangojs.po'], 'web_link': 'https://opendev.org/openstack/horizon/commit/60d1f932fb14139b2430a3728016f9dda6e39d87', 'message': 'Add Persian translation\n\nAdded Persian translation in Backend of the Django for support fa in Accept-Language in HTTP_HEADER\n\nChange-Id: I4fd81adf11f02ace4f0ec31bd1fdc07be8acc119\n'}]",3,890619,60d1f932fb14139b2430a3728016f9dda6e39d87,6,5,2,36274,,,0,"Add Persian translation

Added Persian translation in Backend of the Django for support fa in Accept-Language in HTTP_HEADER

Change-Id: I4fd81adf11f02ace4f0ec31bd1fdc07be8acc119
",git fetch https://review.opendev.org/openstack/horizon refs/changes/19/890619/1 && git format-patch -1 --stdout FETCH_HEAD,['horizon/locale/fa/LC_MESSAGES/djangojs.po'],1,0e95e7e42648d3035150d7ee1729f3d1f46ed280,add_persian_language,"# OpenStack Infra <zanata@openstack.org>, 2015. #zanata # Andreas Jaeger <jaegerandi@gmail.com>, 2018. #zanata # Majed Alangari <mangari@stcs.com.sa>, 2018. #zanata msgid """" msgstr """" ""Project-Id-Version: horizon VERSION\n"" ""Report-Msgid-Bugs-To: https://bugs.launchpad.net/openstack-i18n/\n"" ""POT-Creation-Date: 2019-09-03 20:32+0000\n"" ""MIME-Version: 1.0\n"" ""Content-Type: text/plain; charset=UTF-8\n"" ""Content-Transfer-Encoding: 8bit\n"" ""PO-Revision-Date: 2018-11-30 11:32+0000\n"" ""Last-Translator: Andreas Jaeger <jaegerandi@gmail.com>\n"" ""Language-Team: Arabic\n"" ""Language: ar\n"" ""X-Generator: Zanata 4.3.3\n"" ""Plural-Forms: nplurals=6; plural= n==0 ? 0 : n==1 ? 1 : n==2 ? 2 : n%100>=3 "" ""&& n%100<=10 ? 3 : n%100>=11 ? 4 : 5;\n"" #, python-format msgid ""%s GB"" msgstr ""%s GB"" #, python-format msgid ""%s KB"" msgstr ""%s KB"" #, python-format msgid ""%s MB"" msgstr ""%s MB"" #, python-format msgid ""%s TB"" msgstr ""%s TB"" #, python-format msgid ""%s bytes"" msgstr ""%s bytes"" msgid ""(Modified)"" msgstr ""( )"" msgid ""-"" msgstr ""-"" msgid ""0 GB"" msgstr ""0 GB"" msgid ""0 MB"" msgstr ""0 MB"" msgid ""Active"" msgstr """" msgid ""Add"" msgstr "" "" msgid ""Added"" msgstr "" "" msgid ""Additional items not allowed"" msgstr ""   "" msgid ""Additional properties not allowed"" msgstr ""   "" msgid ""Allocated"" msgstr ""  "" msgid ""An error occurred while updating."" msgstr ""    ."" msgid ""An error occurred. Please try again later."" msgstr ""  .     ."" msgid ""Array items must be unique"" msgstr ""       "" msgid ""Available"" msgstr """" msgid ""Available Metadata"" msgstr ""  "" msgid ""Back"" msgstr """" msgid ""Cancel"" msgstr """" msgid ""Click each item to get its description here."" msgstr ""         ."" msgid ""Click here for filters or full text search."" msgstr ""        ."" msgid ""Click here to expand the row and view the errors."" msgstr ""        ."" msgid ""Click to see more details"" msgstr ""     ."" msgid ""Click to show or hide"" msgstr ""      ."" msgid ""Close"" msgstr """" #, python-format msgid ""Confirm %s"" msgstr "" %s"" #. Strings between {$ and $} should be left untranslated. msgid """" ""Content size: {$ (textBytes || 0) | bytes $} of {$ ::maxBytes | bytes $}"" msgstr """" "" : {$ (textBytes || 0) | bytes $}  {$ ::maxBytes | bytes $}"" msgid ""Current Usage"" msgstr "" "" msgid ""Custom"" msgstr """" msgid ""Danger"" msgstr """" msgid ""Danger: "" msgstr "":"" msgid ""Data does not match any schemas from 'anyOf'"" msgstr ""      'anyOf'  "" msgid ""Data does not match any schemas from 'oneOf'"" msgstr ""      'oneOf'  "" msgid ""Data is valid against more than one schema from 'oneOf'"" msgstr ""       'oneOf'  "" msgid ""Data matches schema from 'not'"" msgstr ""   'not'  "" msgid ""Delete"" msgstr """" #, python-format msgid ""Deleted : %s."" msgstr "" : %s."" msgid ""Dependency failed - key must exist"" msgstr ""   -     "" msgid ""Detail Information"" msgstr "" "" #, python-format msgid ""Displaying %(count)s of %(total)s items"" msgstr "" %(count)s  %(total)s "" #, fuzzy, python-format msgid ""Displaying %s item"" msgid_plural ""Displaying %s items"" msgstr[0] "" %s "" msgstr[1] "" %s "" msgstr[2] ""   "" msgstr[3] ""   "" msgstr[4] ""   "" msgstr[5] ""   "" msgid ""Duplicate keys are not allowed"" msgstr ""   "" msgid ""Error"" msgstr """" msgid ""Error: "" msgstr "": "" msgid ""Example"" msgstr """" msgid ""Existing Metadata"" msgstr ""  "" msgid ""Expand to see allocated items"" msgstr ""      "" msgid ""Expand to see available items"" msgstr ""     "" msgid ""Filter"" msgstr """" msgid ""Finish"" msgstr """" msgid ""Flavor"" msgstr """" msgid ""Format validation failed"" msgstr ""   "" msgid ""Full Text Search"" msgstr ""  "" msgid ""Info"" msgstr """" msgid ""Integer required"" msgstr ""    "" msgid ""Invalid type, expected {$schema.type$}"" msgstr ""    {$schema.type$} "" msgid ""Load {$ ::title $} from a file"" msgstr ""{$ ::title $}      "" msgid ""Loading"" msgstr """" msgid ""Max"" msgstr """" msgid ""Max length"" msgstr "" "" msgid ""Min"" msgstr """" msgid ""Min length"" msgstr "" "" msgid ""Name"" msgstr """" msgid ""Next"" msgstr """" msgid ""No"" msgstr """" msgid ""No Limit"" msgstr "" "" msgid ""No available items"" msgstr ""   "" msgid ""No available metadata"" msgstr ""    "" msgid ""No data available."" msgstr ""    ."" msgid ""No existing metadata"" msgstr ""    "" msgid ""No items to display."" msgstr ""     ."" msgid ""No roles"" msgstr ""   "" msgid ""None"" msgstr """" msgid ""Notice: "" msgstr "":"" msgid ""Passwords do not match."" msgstr ""  ."" msgid ""Pattern mismatch"" msgstr ""  "" msgid ""Please Wait"" msgstr ""  "" msgid ""Please confirm your selection. "" msgstr ""     ."" msgid ""Prev"" msgstr """" msgid ""Prompt"" msgstr """" msgid ""Re-order items using drag and drop"" msgstr ""       "" msgid ""Remaining"" msgstr """" msgid ""Remove"" msgstr """" msgid ""Required"" msgstr """" msgid ""Roles"" msgstr """" msgid ""Search in current results"" msgstr ""   "" msgid ""Select an item from Available items below"" msgstr ""        "" msgid ""Select one"" msgstr ""   "" msgid ""Server Name"" msgstr "" "" msgid ""Shutdown"" msgstr """" msgid ""Status"" msgstr """" msgid ""Submit"" msgstr """" msgid ""Success"" msgstr """" msgid ""Success: "" msgstr "":"" msgid ""Text"" msgstr """" msgid """" ""The action cannot be performed. The contents of this row have errors or are "" ""missing information."" msgstr ""   .         ."" msgid ""The content is larger than the maximum byte size"" msgstr ""       "" msgid ""The data in this field is invalid"" msgstr ""     "" msgid ""There was a problem communicating with the server, please try again."" msgstr ""          ."" msgid ""There was an error submitting the form. Please try again."" msgstr ""      .    ."" msgid ""Toggle navigation"" msgstr "" "" #, python-format msgid ""Unable to delete: %s."" msgstr ""   : %s."" msgid ""Unauthorized. Redirecting to login"" msgstr "".     "" msgid ""Unknown property (not in schema)"" msgstr ""  (  )"" msgid ""Unlimited"" msgstr """" msgid ""Uploading image"" msgstr ""   "" msgid ""Warning"" msgstr """" msgid ""Warning: "" msgstr "":"" msgid ""Working"" msgstr ""  "" msgid ""Yes"" msgstr """" msgid """" ""You can specify resource metadata by moving items from the left column to "" ""the right column. In the left column there are metadata definitions from the "" ""Glance Metadata Catalog. Use the \""Custom\"" option to add metadata with "" ""the key of your choice."" msgstr """" ""                 .            Glance  .   \""\""          ."" msgid ""description"" msgstr """" msgid ""m1.small"" msgstr ""m1.small"" msgid ""m1.tiny"" msgstr ""m1.tiny"" #, python-format msgid ""selected \""%s\"""" msgstr ""  \""%s\"""" msgid ""{$schema.title$} is a required field"" msgstr ""{$schema.title$}    "" msgid ""{$viewValue$} is equal to the exclusive maximum {$schema.maximum$}"" msgstr ""{$viewValue$}     {$schema.maximum$}"" msgid ""{$viewValue$} is equal to the exclusive minimum {$schema.minimum$}"" msgstr ""{$viewValue$}     {$schema.minimum$}"" msgid ""{$viewValue$} is greater than the allowed maximum of {$schema.maximum$}"" msgstr ""{$viewValue$}     {$schema.maximum$}"" msgid ""{$viewValue$} is less than the allowed minimum of {$schema.minimum$}"" msgstr ""{$viewValue$}     {$schema.minimum$}"" msgid ""{$viewValue$} is not a multiple of {$schema.multipleOf$}"" msgstr ""{$viewValue$}   {$schema.multipleOf$} "" msgid ""{$viewValue$} is not a valid number"" msgstr ""{$viewValue$}    "" ",,420,0
openstack%2Fpbr~884789,openstack/pbr,master,Icf00beee255aba3da2b81d9dc5b1f8130bbcd869,Replace imp with importlib.machinery,MERGED,2023-05-30 22:27:53.000000000,2023-08-30 22:34:56.000000000,2023-08-30 22:33:58.000000000,"[{'_account_id': 4146}, {'_account_id': 5263}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-30 22:27:53.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/pbr/commit/744b520290fc74ee88838c7403dea5f531c812f8', 'message': 'Replace imp with importlib.machinery\n\nThe imp was removed in Python 3.12 [1]. This commit replaces\nget_suffixes() method call with _SUFFIXES array from\nimportlib.machinery.\n\nThis was imported from https://github.com/openstack/pbr/pull/22\non behalf of the Gentoo maintainer who proposed it.\n\nCo-Authored-By: Petr Vank <arkamar@atlas.cz>\nChange-Id: Icf00beee255aba3da2b81d9dc5b1f8130bbcd869\n'}, {'number': 2, 'created': '2023-05-30 22:53:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/pbr/commit/dfa46f148c066158ed0e9363fd08145c5fe5d39c', 'message': 'Replace imp with importlib.machinery\n\nThe imp was removed in Python 3.12 [1]. This commit replaces\nget_suffixes() method call with _SUFFIXES array from\nimportlib.machinery.\n\nThis was imported from https://github.com/openstack/pbr/pull/22\non behalf of the Gentoo maintainer who proposed it.\n\nCo-Authored-By: Petr Vank <arkamar@atlas.cz>\nChange-Id: Icf00beee255aba3da2b81d9dc5b1f8130bbcd869\n'}, {'number': 3, 'created': '2023-06-01 17:40:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/pbr/commit/6419714cf26300f3e44efb886ccbd4c284280ec7', 'message': 'Replace imp with importlib.machinery\n\nThe imp was removed in Python 3.12 [1]. This commit replaces\nget_suffixes() method call with _SUFFIXES array from\nimportlib.machinery.\n\nThis was imported from https://github.com/openstack/pbr/pull/22\non behalf of the Gentoo maintainer who proposed it.\n\nCo-Authored-By: Petr Vank <arkamar@atlas.cz>\nChange-Id: Icf00beee255aba3da2b81d9dc5b1f8130bbcd869\n'}, {'number': 4, 'created': '2023-06-01 17:56:36.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/pbr/commit/715e7c134a55da13089d9d3d464811c2fd8ac7e3', 'message': 'Replace imp with importlib.machinery\n\nThe imp was removed in Python 3.12 [1]. This commit replaces\nget_suffixes() method call with _SUFFIXES array from\nimportlib.machinery.\n\nThis was imported from https://github.com/openstack/pbr/pull/22\non behalf of the Gentoo maintainer who proposed it.\n\nCo-Authored-By: Petr Vank <arkamar@atlas.cz>\nChange-Id: Icf00beee255aba3da2b81d9dc5b1f8130bbcd869\n'}, {'number': 5, 'created': '2023-06-02 18:45:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/pbr/commit/04ddbb39f4852da6860c154f1c001fe6a32c69c0', 'message': 'Replace imp with importlib.machinery\n\nThe imp was removed in Python 3.12 [1]. This commit replaces\nget_suffixes() method call with _SUFFIXES array from\nimportlib.machinery.\n\nThis was imported from https://github.com/openstack/pbr/pull/22\non behalf of the Gentoo maintainer who proposed it.\n\nCo-Authored-By: Petr Vank <arkamar@atlas.cz>\nChange-Id: Icf00beee255aba3da2b81d9dc5b1f8130bbcd869\n'}, {'number': 6, 'created': '2023-06-02 18:46:35.000000000', 'files': ['pbr/tests/test_packaging.py'], 'web_link': 'https://opendev.org/openstack/pbr/commit/d03d617c09e7ba8ddf62d1e53d71685cd708e2da', 'message': 'Replace imp with importlib.machinery\n\nThe imp was removed in Python 3.12 [1]. This commit replaces\nget_suffixes() method call with _SUFFIXES array from\nimportlib.machinery.\n\nThis was imported from https://github.com/openstack/pbr/pull/22\non behalf of the Gentoo maintainer who proposed it.\n\nCo-Authored-By: Petr Vank <arkamar@atlas.cz>\nChange-Id: Icf00beee255aba3da2b81d9dc5b1f8130bbcd869\n'}]",9,884789,d03d617c09e7ba8ddf62d1e53d71685cd708e2da,19,3,6,10342,,,0,"Replace imp with importlib.machinery

The imp was removed in Python 3.12 [1]. This commit replaces
get_suffixes() method call with _SUFFIXES array from
importlib.machinery.

This was imported from https://github.com/openstack/pbr/pull/22
on behalf of the Gentoo maintainer who proposed it.

Co-Authored-By: Petr Vank <arkamar@atlas.cz>
Change-Id: Icf00beee255aba3da2b81d9dc5b1f8130bbcd869
",git fetch https://review.opendev.org/openstack/pbr refs/changes/89/884789/1 && git format-patch -1 --stdout FETCH_HEAD,['pbr/tests/test_packaging.py'],1,744b520290fc74ee88838c7403dea5f531c812f8,,"import importlib for suffix, _, _ in importlib.machinery._SUFFIXES:","import imp for suffix, _, _ in imp.get_suffixes():",2,2
openstack%2Fswift~892494,openstack/swift,master,Ie1c70a0ada9883cc4c16b7fc8c2d91a50f4a91b7,s3api: use string for swift info request method,MERGED,2023-08-23 10:52:52.000000000,2023-08-30 22:11:08.000000000,2023-08-30 22:09:48.000000000,"[{'_account_id': 15343}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-23 10:52:52.000000000', 'files': ['swift/common/middleware/s3api/s3request.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/68b71752a1a30de885700a1b3df8daab8523b05b', 'message': ""s3api: use string for swift info request method\n\nA swift request was being constructed with its request method equal to\nthe s3api's ListingEtagMiddleware. This was benign because the swift\nrequest is just used as a context to get container info, and its\nmethod is never used. However, it is better to use a dummy string\nvalue for the method. 'TEST' has been previously when an auth request\nis needed prior to getting container info, so the same is employed\nhere.\n\nChange-Id: Ie1c70a0ada9883cc4c16b7fc8c2d91a50f4a91b7\n""}]",1,892494,68b71752a1a30de885700a1b3df8daab8523b05b,8,2,1,7847,,,0,"s3api: use string for swift info request method

A swift request was being constructed with its request method equal to
the s3api's ListingEtagMiddleware. This was benign because the swift
request is just used as a context to get container info, and its
method is never used. However, it is better to use a dummy string
value for the method. 'TEST' has been previously when an auth request
is needed prior to getting container info, so the same is employed
here.

Change-Id: Ie1c70a0ada9883cc4c16b7fc8c2d91a50f4a91b7
",git fetch https://review.opendev.org/openstack/swift refs/changes/94/892494/1 && git format-patch -1 --stdout FETCH_HEAD,['swift/common/middleware/s3api/s3request.py'],1,68b71752a1a30de885700a1b3df8daab8523b05b,p-s3api-sw-req-method," sw_req = self.to_swift_req('TEST', self.container_name, None)"," sw_req = self.to_swift_req(app, self.container_name, None)",1,1
openstack%2Fopenstack-helm-infra~672966,openstack/openstack-helm-infra,master,I1d5fe3ea2d3b79b80b87d143d5f762f7c64a1a40,Map pipped to sha256 does not provide same output on successive executions,ABANDONED,2019-07-26 12:16:27.000000000,2023-08-30 22:07:53.000000000,,"[{'_account_id': 7769}, {'_account_id': 8749}, {'_account_id': 8863}, {'_account_id': 8898}, {'_account_id': 12281}, {'_account_id': 17591}, {'_account_id': 20466}, {'_account_id': 22348}, {'_account_id': 22477}, {'_account_id': 23928}, {'_account_id': 28707}, {'_account_id': 28743}, {'_account_id': 28747}, {'_account_id': 28758}, {'_account_id': 28849}]","[{'number': 1, 'created': '2019-07-26 12:16:27.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/d95ace0b93aeb52abad97cbe9627c2f4eaf5394c', 'message': 'Map pipped to sha256 does not provide same output on successive executions\n\nMaps in GO are not sorted, to solve this we need to pipe the output\nthrough a function that orders the content.\n\nOne such function is toJson which calls json.Marshal, a function that\nencodes maps to JSON and provides a sorted output as described here:\nhttps://golang.org/pkg/encoding/json/#Marshal\n\nFor more details on the impact see the storyboard description.\n\nChange-Id: I1d5fe3ea2d3b79b80b87d143d5f762f7c64a1a40\nTask: 2006278\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n'}, {'number': 2, 'created': '2019-07-26 12:17:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/9fed7d2a8c735211e363f58fe2507519d21f1a69', 'message': 'Map pipped to sha256 does not provide same output on successive executions\n\nMaps in GO are not sorted, to solve this we need to pipe the output\nthrough a function that orders the content.\n\nOne such function is toJson which calls json.Marshal, a function that\nencodes maps to JSON and provides a sorted output as described here:\nhttps://golang.org/pkg/encoding/json/#Marshal\n\nFor more details on the impact see the storyboard description.\n\nChange-Id: I1d5fe3ea2d3b79b80b87d143d5f762f7c64a1a40\nTask: 35979\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n'}, {'number': 3, 'created': '2019-08-12 04:18:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/076fedf35ffb732f698e55f6a4559e83a2b6a024', 'message': 'Map pipped to sha256 does not provide same output on successive executions\n\nMaps in GO are not sorted, to solve this we need to pipe the output\nthrough a function that orders the content.\n\nOne such function is toJson which calls json.Marshal, a function that\nencodes maps to JSON and provides a sorted output as described here:\nhttps://golang.org/pkg/encoding/json/#Marshal\n\nFor more details on the impact see the storyboard description.\n\nChange-Id: I1d5fe3ea2d3b79b80b87d143d5f762f7c64a1a40\nTask: 35979\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n'}, {'number': 4, 'created': '2020-06-24 09:44:18.000000000', 'files': ['ceph-osd/templates/utils/_osd_daemonset_overrides.tpl', 'helm-toolkit/templates/utils/_hash.tpl', 'helm-toolkit/templates/utils/_daemonset_overrides.tpl'], 'web_link': 'https://opendev.org/openstack/openstack-helm-infra/commit/438e693c165cdc78a6fc4ab8a57ad43636016dda', 'message': 'Map pipped to sha256 does not provide same output on successive executions\n\nMaps in GO are not sorted, to solve this we need to pipe the output\nthrough a function that orders the content.\n\nOne such function is toJson which calls json.Marshal, a function that\nencodes maps to JSON and provides a sorted output as described here:\nhttps://golang.org/pkg/encoding/json/#Marshal\n\nFor more details on the impact see the storyboard description.\n\nChange-Id: I1d5fe3ea2d3b79b80b87d143d5f762f7c64a1a40\nTask: 35979\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n'}]",7,672966,438e693c165cdc78a6fc4ab8a57ad43636016dda,21,15,4,28747,,,0,"Map pipped to sha256 does not provide same output on successive executions

Maps in GO are not sorted, to solve this we need to pipe the output
through a function that orders the content.

One such function is toJson which calls json.Marshal, a function that
encodes maps to JSON and provides a sorted output as described here:
https://golang.org/pkg/encoding/json/#Marshal

For more details on the impact see the storyboard description.

Change-Id: I1d5fe3ea2d3b79b80b87d143d5f762f7c64a1a40
Task: 35979
Signed-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>
",git fetch https://review.opendev.org/openstack/openstack-helm-infra refs/changes/66/672966/1 && git format-patch -1 --stdout FETCH_HEAD,"['ceph-osd/templates/utils/_osd_daemonset_overrides.tpl', 'helm-toolkit/templates/utils/_hash.tpl', 'helm-toolkit/templates/utils/_daemonset_overrides.tpl']",3,d95ace0b93aeb52abad97cbe9627c2f4eaf5394c,," {{- $_ := set $current_dict ""dns_1123_name"" (printf (print $name_format2 ""-"" ($current_dict.matchExpressions | toJson | sha256sum | trunc 8))) }} {{- $values_hash := $cmap | toJson | sha256sum }}"," {{- $_ := set $current_dict ""dns_1123_name"" (printf (print $name_format2 ""-"" ($current_dict.matchExpressions | quote | sha256sum | trunc 8))) }} {{- $values_hash := $cmap | quote | sha256sum }}",6,6
openstack%2Fneutron~893141,openstack/neutron,stable/zed,Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a,[OVN] Cleanup old Hash Ring node entries,MERGED,2023-08-30 10:33:54.000000000,2023-08-30 22:06:17.000000000,2023-08-30 22:05:06.000000000,"[{'_account_id': 1131}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:33:54.000000000', 'files': ['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/850da2af847742e483c70c1cb36b11154e5e141a', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)\n""}]",0,893141,850da2af847742e483c70c1cb36b11154e5e141a,9,3,1,6773,,,0,"[OVN] Cleanup old Hash Ring node entries

This patch introduces a maintenance task that runs once a day and is
responsible for cleaning up Hash Ring nodes that haven't been updated in
5 days or more.

Change-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a
Closes-Bug: #2033281
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/41/893141/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py']",4,850da2af847742e483c70c1cb36b11154e5e141a,," @periodics.periodic(spacing=86400, run_immediately=True) def cleanup_old_hash_ring_nodes(self): """"""Daily task to cleanup old stable Hash Ring node entries. Runs once a day and clean up Hash Ring entries that haven't been updated in more than 5 days. See LP #2033281 for more information. """""" if not self.has_lock: return context = n_context.get_admin_context() hash_ring_db.cleanup_old_nodes(context, days=5) ",,55,0
openstack%2Fneutron~893140,openstack/neutron,stable/2023.1,Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a,[OVN] Cleanup old Hash Ring node entries,MERGED,2023-08-30 10:33:27.000000000,2023-08-30 22:06:10.000000000,2023-08-30 22:04:57.000000000,"[{'_account_id': 1131}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:33:27.000000000', 'files': ['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py'], 'web_link': 'https://opendev.org/openstack/neutron/commit/adfe0659c619ad82761c9622bdcfdffed09248da', 'message': ""[OVN] Cleanup old Hash Ring node entries\n\nThis patch introduces a maintenance task that runs once a day and is\nresponsible for cleaning up Hash Ring nodes that haven't been updated in\n5 days or more.\n\nChange-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a\nCloses-Bug: #2033281\nSigned-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>\n(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)\n""}]",0,893140,adfe0659c619ad82761c9622bdcfdffed09248da,9,3,1,6773,,,0,"[OVN] Cleanup old Hash Ring node entries

This patch introduces a maintenance task that runs once a day and is
responsible for cleaning up Hash Ring nodes that haven't been updated in
5 days or more.

Change-Id: Ibed9e0d77500570c3d0f9f39bfe40cb9239d0d7a
Closes-Bug: #2033281
Signed-off-by: Lucas Alvares Gomes <lucasagomes@gmail.com>
(cherry picked from commit 7f777c223e557f7bb0e0290090019eaa60095b50)
",git fetch https://review.opendev.org/openstack/neutron refs/changes/40/893140/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/tests/unit/db/test_ovn_hash_ring_db.py', 'releasenotes/notes/hash-ring-cleanup-1079d2375082cebe.yaml', 'neutron/db/ovn_hash_ring_db.py', 'neutron/plugins/ml2/drivers/ovn/mech_driver/ovsdb/maintenance.py']",4,adfe0659c619ad82761c9622bdcfdffed09248da,," @periodics.periodic(spacing=86400, run_immediately=True) def cleanup_old_hash_ring_nodes(self): """"""Daily task to cleanup old stable Hash Ring node entries. Runs once a day and clean up Hash Ring entries that haven't been updated in more than 5 days. See LP #2033281 for more information. """""" if not self.has_lock: return context = n_context.get_admin_context() hash_ring_db.cleanup_old_nodes(context, days=5) ",,55,0
openstack%2Ftacker~891647,openstack/tacker,master,I8ddc184d52b922afb3a41b24176ed727a067ca45,Fix Instantiate rollback not deleting glance image,MERGED,2023-08-17 05:17:48.000000000,2023-08-30 21:28:27.000000000,2023-08-30 21:27:07.000000000,"[{'_account_id': 4149}, {'_account_id': 22348}, {'_account_id': 25701}, {'_account_id': 31668}, {'_account_id': 31857}, {'_account_id': 32707}]","[{'number': 1, 'created': '2023-08-17 05:17:48.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/f0e7a29382c5fa4b0e817cc76354d9e0d52e4374', 'message': 'Fix Instantiate rollback not deleting glance image\n\nThis patch fixes a problem where the glance image remains\nwhen successful rollback after Instantiate fails of the v2 API.\nWhen Instantiate rollback succeeds, the glance image is deleted.\n\nCloses-Bug: #2025425\nChange-Id: I8ddc184d52b922afb3a41b24176ed727a067ca45\n'}, {'number': 2, 'created': '2023-08-23 09:23:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/tacker/commit/578ff18c084ba59e00fa465d26d00a2fd60c0d61', 'message': 'Fix Instantiate rollback not deleting glance image\n\nThis patch fixes a problem where the glance image remains\nwhen successful rollback after Instantiate fails of the v2 API.\nWhen Instantiate rollback succeeds, the glance image is deleted.\n\nCloses-Bug: #2025425\nChange-Id: I8ddc184d52b922afb3a41b24176ed727a067ca45\n'}, {'number': 3, 'created': '2023-08-29 01:35:30.000000000', 'files': ['tacker/tests/unit/sol_refactored/nfvo/test_local_nfvo.py', 'tacker/tests/functional/sol_v2/test_vnflcm_error_handling.py', 'tacker/sol_refactored/nfvo/local_nfvo.py'], 'web_link': 'https://opendev.org/openstack/tacker/commit/945f38a62b999adde91123d6f59f648b82525b6a', 'message': 'Fix Instantiate rollback not deleting glance image\n\nThis patch fixes a problem where the glance image remains\nwhen successful rollback after Instantiate fails of the v2 API.\nWhen Instantiate rollback succeeds, the glance image is deleted.\n\nCloses-Bug: #2025425\nChange-Id: I8ddc184d52b922afb3a41b24176ed727a067ca45\n'}]",11,891647,945f38a62b999adde91123d6f59f648b82525b6a,25,6,3,34226,,,0,"Fix Instantiate rollback not deleting glance image

This patch fixes a problem where the glance image remains
when successful rollback after Instantiate fails of the v2 API.
When Instantiate rollback succeeds, the glance image is deleted.

Closes-Bug: #2025425
Change-Id: I8ddc184d52b922afb3a41b24176ed727a067ca45
",git fetch https://review.opendev.org/openstack/tacker refs/changes/47/891647/1 && git format-patch -1 --stdout FETCH_HEAD,"['tacker/tests/unit/sol_refactored/nfvo/test_local_nfvo.py', 'tacker/sol_refactored/nfvo/local_nfvo.py']",2,f0e7a29382c5fa4b0e817cc76354d9e0d52e4374,bug/2025425," elif lcmocc.operation == v2_fields.LcmOperationType.INSTANTIATE: if (lcmocc.operationState == v2_fields.LcmOperationStateType.ROLLED_BACK): vim_info = inst_utils.select_vim_info(inst.vimConnectionInfo) if vim_info is None: # never happen. just for code consistency. return if vim_info.vimType == 'ETSINFV.OPENSTACK_KEYSTONE.V_3': self._glance_delete_images(vim_info, inst.id)",,40,1
openstack%2Fproject-config~893145,openstack/project-config,master,Ia2b737e197483f9080b719bab0ca23461850e157,Unpause image uploads for rax-iad part 2,MERGED,2023-08-30 10:36:11.000000000,2023-08-30 21:01:49.000000000,2023-08-30 20:54:40.000000000,"[{'_account_id': 1}, {'_account_id': 5263}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 10:36:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/c90fe62fb6e1c8a9593d4fb84ac98db7f7bfd796', 'message': 'Unpause image uploads for rax-iad part 2\n\nEnable uploads for all images again for rax-iad, but set max-concurrency\nto 1, so that we will have at most two parallel uploads (one per\nbuilder).\n\nChange-Id: Ia2b737e197483f9080b719bab0ca23461850e157\n'}, {'number': 2, 'created': '2023-08-30 19:08:28.000000000', 'files': ['nodepool/nodepool.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/407f859232e704e9f8f2d1e04a243930a60dce2d', 'message': 'Unpause image uploads for rax-iad part 2\n\nEnable uploads for all images again for rax-iad. We have configured the\nnodepool-builders to run with only 1 upload thread, so we will have at\nmost two parallel uploads (one per builder).\n\nChange-Id: Ia2b737e197483f9080b719bab0ca23461850e157\n'}]",1,893145,407f859232e704e9f8f2d1e04a243930a60dce2d,12,3,2,13252,,,0,"Unpause image uploads for rax-iad part 2

Enable uploads for all images again for rax-iad. We have configured the
nodepool-builders to run with only 1 upload thread, so we will have at
most two parallel uploads (one per builder).

Change-Id: Ia2b737e197483f9080b719bab0ca23461850e157
",git fetch https://review.opendev.org/openstack/project-config refs/changes/45/893145/1 && git format-patch -1 --stdout FETCH_HEAD,['nodepool/nodepool.yaml'],1,c90fe62fb6e1c8a9593d4fb84ac98db7f7bfd796,rax-iad, max-concurrency: 1, pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true pause: true,1,16
openstack%2Fironic-python-agent-builder~892966,openstack/ironic-python-agent-builder,stable/yoga,I6128fbad5d9db2ea6469f196f3ee13b6fab76837,Add checksum generation support,MERGED,2023-08-28 13:42:09.000000000,2023-08-30 20:54:16.000000000,2023-08-30 20:53:11.000000000,"[{'_account_id': 10342}, {'_account_id': 11655}, {'_account_id': 14200}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:42:09.000000000', 'files': ['dib/ironic-ramdisk-base/environment.d/10-checksum.bash', 'dib/ironic-ramdisk-base/cleanup.d/99-ramdisk-create'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/b42bc1f34b2ceb997158900b057a373516f274c2', 'message': 'Add checksum generation support\n\nDIB_CHECKSUM is set by the disk-image-create --checksum flag, and for\nother images results in checksum files being generated for the\nimage[1].\n\nThis change ensures checksum files are generated for built\nramdisk/kernel as well.\n\n[1] https://opendev.org/openstack/diskimage-builder/src/branch/master/diskimage_builder/lib/common-functions#L68\n\nChange-Id: I6128fbad5d9db2ea6469f196f3ee13b6fab76837\n(cherry picked from commit 59d79f6ccd45e55ca72d7c971a74eb202702ce4e)\n'}]",0,892966,b42bc1f34b2ceb997158900b057a373516f274c2,10,4,1,14200,,,0,"Add checksum generation support

DIB_CHECKSUM is set by the disk-image-create --checksum flag, and for
other images results in checksum files being generated for the
image[1].

This change ensures checksum files are generated for built
ramdisk/kernel as well.

[1] https://opendev.org/openstack/diskimage-builder/src/branch/master/diskimage_builder/lib/common-functions#L68

Change-Id: I6128fbad5d9db2ea6469f196f3ee13b6fab76837
(cherry picked from commit 59d79f6ccd45e55ca72d7c971a74eb202702ce4e)
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/66/892966/1 && git format-patch -1 --stdout FETCH_HEAD,"['dib/ironic-ramdisk-base/environment.d/10-checksum.bash', 'dib/ironic-ramdisk-base/cleanup.d/99-ramdisk-create']",2,b42bc1f34b2ceb997158900b057a373516f274c2,extend-dib-checksum,"if [ ""$DIB_CHECKSUM"" == ""1"" ]; then pushd $(dirname ${IMAGE_PATH}) md5sum ${IMAGE_NAME}.initramfs ${IMAGE_NAME}.kernel > ${IMAGE_NAME}.md5 sha256sum ${IMAGE_NAME}.initramfs ${IMAGE_NAME}.kernel > ${IMAGE_NAME}.sha256 popd fi",,7,0
openstack%2Fpython-openstackclient~893277,openstack/python-openstackclient,master,Ifc616b51636442277d9f14c17f0038c87a8e8196,Migrate volume type commands to SDK,NEW,2023-08-30 19:28:14.000000000,2023-08-30 20:38:06.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-30 19:28:14.000000000', 'files': ['openstackclient/tests/unit/volume/v2/fakes.py', 'releasenotes/notes/migrate-volume-type-commands-fd8afedb5a2fe645.yaml', 'openstackclient/volume/v2/volume_type.py', 'openstackclient/tests/unit/volume/v2/test_volume_type.py'], 'web_link': 'https://opendev.org/openstack/python-openstackclient/commit/832fd09a51496123d79acd01b0630b23488e7859', 'message': 'Migrate volume type commands to SDK\n\nThis patch migrates the following Volume Type commands to SDK:\n\n* Create Volume Type\n* Show Volume Type\n* List Volume Type\n* Set Volume Type\n* Unset Volume Type\n* Delete Volume Type\n\nChange-Id: Ifc616b51636442277d9f14c17f0038c87a8e8196\n'}]",0,893277,832fd09a51496123d79acd01b0630b23488e7859,2,1,1,27615,,,0,"Migrate volume type commands to SDK

This patch migrates the following Volume Type commands to SDK:

* Create Volume Type
* Show Volume Type
* List Volume Type
* Set Volume Type
* Unset Volume Type
* Delete Volume Type

Change-Id: Ifc616b51636442277d9f14c17f0038c87a8e8196
",git fetch https://review.opendev.org/openstack/python-openstackclient refs/changes/77/893277/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstackclient/tests/unit/volume/v2/fakes.py', 'releasenotes/notes/migrate-volume-type-commands-fd8afedb5a2fe645.yaml', 'openstackclient/volume/v2/volume_type.py', 'openstackclient/tests/unit/volume/v2/test_volume_type.py']",4,832fd09a51496123d79acd01b0630b23488e7859,cinderclient-sdk-migration," self.app.client_manager.sdk_connection = mock.Mock() self.app.client_manager.sdk_connection.volume = mock.Mock() self.sdk_client = self.app.client_manager.sdk_connection.volume self.sdk_client.create_type.return_value = self.new_volume_type self.sdk_client.create_type.assert_called_with( name=self.new_volume_type.name, self.sdk_client.create_type.assert_called_with( name=self.new_volume_type.name, 'encryption_id': 'fake-encryption-id', self.sdk_client.create_type.return_value = self.new_volume_type self.sdk_client.create_type_encryption.return_value = encryption_type self.sdk_client.create_type.assert_called_with( name=self.new_volume_type.name, self.sdk_client.create_type_encryption.assert_called_with( **body, self.sdk_client.find_type = volume_fakes.get_volume_types( self.sdk_client.delete_type.return_value = None self.sdk_client.delete_type.assert_called_with(self.volume_types[0].id) calls.append(call(t.id)) self.sdk_client.delete_type.assert_has_calls(calls) self.sdk_client, 'find_type', side_effect=find_mock_result find_mock.assert_any_call(self.volume_types[0].id) find_mock.assert_any_call('unexist_type') self.sdk_client.delete_type.assert_called_once_with( self.volume_types[0].id self.sdk_client.types.return_value = self.volume_types self.sdk_client.types.assert_called_once_with(is_public=None) self.sdk_client.types.assert_called_once_with(is_public=True) self.sdk_client.types.assert_called_once_with(is_public=False) encryption_type = volume_fakes.create_one_encryption_volume_type_list( self.sdk_client.types.assert_called_once_with(is_public=None) self.sdk_client.find_type.return_value = self.volume_type # Return a project self.projects_mock.get.return_value = self.project self.sdk_client.create_type_encryption.return_value = None self.sdk_client.update_type_encryption.return_value = None # Get the command object to test self.sdk_client.update_type.assert_called_with( self.sdk_client.add_type_access.assert_not_called() self.sdk_client.update_type_encryption.assert_not_called() self.sdk_client.create_type_encryption.assert_not_called() self.cmd.take_action(parsed_args) self.sdk_client.update_type_extra_specs.assert_called_once_with( self.volume_type.id, myprop='myvalue', self.sdk_client.update_type_extra_specs.assert_not_called() self.sdk_client.add_type_access.assert_not_called() self.sdk_client.update_type_encryption.assert_not_called() self.sdk_client.create_type_encryption.assert_not_called() self.sdk_client.update_type_extra_specs.assert_not_called() self.sdk_client.add_type_access.assert_called_with( self.sdk_client.update_type_encryption.side_effect = ( self.sdk_client.update_type_encryption.assert_called_with( volume_type=self.volume_type, **body, self.sdk_client.create_type_encryption.assert_called_with( **body, def test_type_set_with_existing_encryption(self): self.sdk_client.find_type.side_effect = [ self.volume_type, ""existing_encryption_type"", ] self.sdk_client.update_type_extra_specs.assert_not_called() self.sdk_client.update_type_encryption.assert_called_with( volume_type=self.volume_type, **body, self.sdk_client.create_type_encryption.assert_not_called() self.assertIsNone(result) self.sdk_client.update_type_encryption.side_effect = ( self.sdk_client.update_type_extra_specs.assert_not_called() self.sdk_client.update_type_encryption.assert_called_with( volume_type=self.volume_type, **body, self.sdk_client.create_type_encryption.assert_not_called() self.sdk_client.find_type.return_value = self.volume_type self.sdk_client.find_type.assert_called_with(self.volume_type.id) self.sdk_client, 'find_type', self.sdk_client.find_type.assert_called_once_with( self.sdk_client, 'find_type', return_value=private_type self.sdk_client.find_type.assert_called_once_with( 'encryption_id': 'fake-encryption-id', self.sdk_client.find_type.return_value = self.volume_type self.sdk_client.get_type_encryption.return_value = encryption_type self.sdk_client.find_type.assert_called_with(self.volume_type.id) self.sdk_client.get_type_encryption.assert_called_with( self.sdk_client.find_type.return_value = self.volume_type self.sdk_client.delete_type_extra_specs.assert_called_once_with( self.volume_type.id, ['property', 'multi_property'] self.sdk_client.remove_type_access.assert_called_with( self.sdk_client.delete_type_encryption.assert_not_called() self.assertFalse(self.sdk_client.remove_type_access.called) self.sdk_client.delete_type_encryption.assert_called_with( volume_type=self.volume_type"," self.volume_types_mock.create.return_value = self.new_volume_type self.volume_types_mock.create.assert_called_with( self.new_volume_type.name, self.volume_types_mock.create.assert_called_with( self.new_volume_type.name, self.volume_types_mock.create.return_value = self.new_volume_type self.volume_encryption_types_mock.create.return_value = encryption_type self.volume_types_mock.create.assert_called_with( self.new_volume_type.name, self.volume_encryption_types_mock.create.assert_called_with( body, self.volume_types_mock.get = volume_fakes.get_volume_types( self.volume_types_mock.delete.return_value = None self.volume_types_mock.delete.assert_called_with(self.volume_types[0]) calls.append(call(t)) self.volume_types_mock.delete.assert_has_calls(calls) utils, 'find_resource', side_effect=find_mock_result find_mock.assert_any_call( self.volume_types_mock, self.volume_types[0].id ) find_mock.assert_any_call(self.volume_types_mock, 'unexist_type') self.volume_types_mock.delete.assert_called_once_with( self.volume_types[0] self.volume_types_mock.list.return_value = self.volume_types self.volume_types_mock.list.assert_called_once_with(is_public=None) self.volume_types_mock.list.assert_called_once_with(is_public=True) self.volume_types_mock.list.assert_called_once_with(is_public=False) encryption_type = volume_fakes.create_one_encryption_volume_type( self.volume_types_mock.list.assert_called_once_with(is_public=None) self.volume_types_mock.get.return_value = self.volume_type self.volume_encryption_types_mock.create.return_value = None self.volume_encryption_types_mock.update.return_value = None self.volume_types_mock.update.assert_called_with( self.volume_type_access_mock.add_project_access.assert_not_called() self.volume_encryption_types_mock.update.assert_not_called() self.volume_encryption_types_mock.create.assert_not_called() result = self.cmd.take_action(parsed_args) self.assertIsNone(result) self.volume_type.set_keys.assert_called_once_with( {'myprop': 'myvalue'} self.volume_type.set_keys.assert_not_called() self.volume_type_access_mock.add_project_access.assert_not_called() self.volume_encryption_types_mock.update.assert_not_called() self.volume_encryption_types_mock.create.assert_not_called() self.volume_type.set_keys.assert_not_called() self.volume_type_access_mock.add_project_access.assert_called_with( self.volume_encryption_types_mock.update.side_effect = ( self.volume_encryption_types_mock.update.assert_called_with( self.volume_type, body, self.volume_encryption_types_mock.create.assert_called_with( body, @mock.patch.object(utils, 'find_resource') def test_type_set_with_existing_encryption(self, mock_find): mock_find.side_effect = [self.volume_type, ""existing_encryption_type""] self.volume_type.set_keys.assert_not_called() self.volume_encryption_types_mock.update.assert_called_with( self.volume_type, body, self.volume_encryption_types_mock.create.assert_not_called() self.volume_encryption_types_mock.update.side_effect = ( self.volume_type.set_keys.assert_not_called() self.volume_encryption_types_mock.update.assert_called_with( self.volume_type, body, self.volume_encryption_types_mock.create.assert_not_called() self.volume_types_mock.get.return_value = self.volume_type self.volume_types_mock.get.assert_called_with(self.volume_type.id) self.volume_types_mock, 'get', self.volume_types_mock.get.assert_called_once_with( self.volume_types_mock, 'get', return_value=private_type self.volume_types_mock.get.assert_called_once_with( self.volume_types_mock.get.return_value = self.volume_type self.volume_encryption_types_mock.get.return_value = encryption_type self.volume_types_mock.get.assert_called_with(self.volume_type.id) self.volume_encryption_types_mock.get.assert_called_with( self.volume_types_mock.get.return_value = self.volume_type self.volume_type.unset_keys.assert_called_once_with( ['property', 'multi_property'] self.volume_type_access_mock.remove_project_access.assert_called_with( self.volume_encryption_types_mock.delete.assert_not_called() self.assertFalse( self.volume_type_access_mock.remove_project_access.called ) self.volume_encryption_types_mock.delete.assert_called_with( self.volume_type",227,160
openstack%2Fneutron~891246,openstack/neutron,master,Ia493c79a1f879844509e49d375bb586e96a02b04,DNM: Testing against oslo.messaging change,ABANDONED,2023-08-12 00:43:27.000000000,2023-08-30 20:20:57.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-12 00:43:27.000000000', 'files': ['neutron/__init__.py', 'zuul.d/tempest-multinode.yaml', 'zuul.d/tempest-singlenode.yaml', 'zuul.d/base.yaml', 'zuul.d/project.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/5bbb9898c6de5b12c5893c2615ad0cd13a039f45', 'message': 'DNM: Testing against oslo.messaging change\n\nDepends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/891096\nChange-Id: Ia493c79a1f879844509e49d375bb586e96a02b04\n'}]",1,891246,5bbb9898c6de5b12c5893c2615ad0cd13a039f45,5,1,1,10342,,,0,"DNM: Testing against oslo.messaging change

Depends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/891096
Change-Id: Ia493c79a1f879844509e49d375bb586e96a02b04
",git fetch https://review.opendev.org/openstack/neutron refs/changes/46/891246/1 && git format-patch -1 --stdout FETCH_HEAD,"['neutron/__init__.py', 'zuul.d/tempest-multinode.yaml', 'zuul.d/tempest-singlenode.yaml', 'zuul.d/base.yaml', 'zuul.d/project.yaml']",5,5bbb9898c6de5b12c5893c2615ad0cd13a039f45,,, - neutron-ovs-grenade-multinode - neutron-ovs-grenade-dvr-multinode,5,2
openstack%2Fnova~891245,openstack/nova,master,Iaaf08e07a5b62e2c5ed1c6cc380769f7b6ab9658,DNM: Testing against oslo.messaging change,ABANDONED,2023-08-12 00:39:41.000000000,2023-08-30 20:20:49.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-12 00:39:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/6e4cbbed54bb5fb7b23d39298efe0aaaf20958d0', 'message': 'DNM: Testing against oslo.messaging change\n\nDepends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/891096\nChange-Id: Iaaf08e07a5b62e2c5ed1c6cc380769f7b6ab9658\n'}, {'number': 2, 'created': '2023-08-12 14:22:57.000000000', 'files': ['nova/__init__.py', '.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/c37c09d778b4d10dbbd76a50a465fbb3501be5eb', 'message': 'DNM: Testing against oslo.messaging change\n\nDepends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/891096\nChange-Id: Iaaf08e07a5b62e2c5ed1c6cc380769f7b6ab9658\n'}]",1,891245,c37c09d778b4d10dbbd76a50a465fbb3501be5eb,11,1,2,10342,,,0,"DNM: Testing against oslo.messaging change

Depends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/891096
Change-Id: Iaaf08e07a5b62e2c5ed1c6cc380769f7b6ab9658
",git fetch https://review.opendev.org/openstack/nova refs/changes/45/891245/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/__init__.py', '.zuul.yaml']",2,6e4cbbed54bb5fb7b23d39298efe0aaaf20958d0,, - openstack/oslo.messaging - openstack/oslo.messaging - openstack/oslo.messaging required-projects: - openstack/oslo.messaging required-projects: - openstack/oslo.messaging required-projects: - openstack/oslo.messaging required-projects: - openstack/oslo.messaging required-projects: - openstack/oslo.messaging - openstack/oslo.messaging required-projects: - openstack/oslo.messaging - openstack/oslo.messaging required-projects: - openstack/oslo.messaging - openstack/oslo.messaging - openstack/oslo.messaging, # We define our own irrelevant-files so we don't run the job # on things like nova docs-only changes. - ironic-tempest-ipa-wholedisk-bios-agent_ipmitool-tinyipa: voting: false irrelevant-files: *nova-base-irrelevant-files - nova-tox-validate-backport: voting: false - tempest-integrated-compute: # NOTE(gmann): Policies changes do not need to run all the # integration test jobs. Running only tempest and grenade # common jobs will be enough along with nova functional # and unit tests. irrelevant-files: &policies-irrelevant-files - ^api-.*$ - ^(test-|)requirements.txt$ - ^.*\.rst$ - ^.git.*$ - ^doc/.*$ - ^nova/hacking/.*$ - ^nova/locale/.*$ - ^nova/tests/.*$ - ^nova/test.py$ - ^releasenotes/.*$ - ^setup.cfg$ - ^tools/.*$ - ^tox.ini$ - tempest-integrated-compute-enforce-scope-new-defaults: irrelevant-files: *policies-irrelevant-files - tempest-integrated-compute-rbac-old-defaults: irrelevant-files: *policies-irrelevant-files - grenade-skip-level-always: irrelevant-files: *policies-irrelevant-files - nova-grenade-multinode: irrelevant-files: *policies-irrelevant-files,22,34
openstack%2Fironic~891243,openstack/ironic,master,I78d581806f32c094996d2a429f31cff58e0be957,DNM: Testing Ironic against oslo.messaging patch,ABANDONED,2023-08-12 00:03:47.000000000,2023-08-30 20:20:43.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-12 00:03:47.000000000', 'files': ['zuul.d/ironic-jobs.yaml'], 'web_link': 'https://opendev.org/openstack/ironic/commit/35d0a4a62c538c609e6f1db1028ee2daa0fa9251', 'message': 'DNM: Testing Ironic against oslo.messaging patch\n\nDepends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/891096\nChange-Id: I78d581806f32c094996d2a429f31cff58e0be957\n'}]",0,891243,35d0a4a62c538c609e6f1db1028ee2daa0fa9251,5,1,1,10342,,,0,"DNM: Testing Ironic against oslo.messaging patch

Depends-on: https://review.opendev.org/c/openstack/oslo.messaging/+/891096
Change-Id: I78d581806f32c094996d2a429f31cff58e0be957
",git fetch https://review.opendev.org/openstack/ironic refs/changes/43/891243/1 && git format-patch -1 --stdout FETCH_HEAD,['zuul.d/ironic-jobs.yaml'],1,35d0a4a62c538c609e6f1db1028ee2daa0fa9251,, - opendev.org/openstack/oslo.messaging,,1,0
openstack%2Fironic~887234,openstack/ironic,master,I866aef2d227a33f8ea39b843861d790e5a7015cb,Drop databases in unit tests instead of contents,ABANDONED,2023-06-28 22:16:58.000000000,2023-08-30 20:20:11.000000000,,"[{'_account_id': 10342}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-28 22:16:58.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/44d47a0ce29ef67271de4676f7500bd9559a4323', 'message': ""Drop databases in unit tests instead of contents\n\nThis is a mitigation for an issue where sometimes, when tests are\ntearing down, an FK is left on a table, and when that table is dropped\ntests go boom (if we're lucky) or freeze indefinately.\n\nThis is obviously not an ideal solution, but if it works, we prove\nwhere the problem is and mitigate it for all other developers while\nwe work on a long-term solution.\n\nRelated-Bug: https://bugs.launchpad.net/ironic/+bug/2023316\nChange-Id: I866aef2d227a33f8ea39b843861d790e5a7015cb\n""}, {'number': 2, 'created': '2023-06-28 22:34:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic/commit/bb75e243dc39906387eb241b1e1af5f96598e19d', 'message': ""Drop databases in unit tests instead of contents\n\nThis is a mitigation for an issue where sometimes, when tests are\ntearing down, an FK is left on a table, and when that table is dropped\ntests go boom (if we're lucky) or freeze indefinately.\n\nThis is obviously not an ideal solution, but if it works, we prove\nwhere the problem is and mitigate it for all other developers while\nwe work on a long-term solution.\n\nDepends-On: https://review.opendev.org/c/openstack/ironic/+/885507\nRelated-Bug: https://bugs.launchpad.net/ironic/+bug/2023316\nChange-Id: I866aef2d227a33f8ea39b843861d790e5a7015cb\n""}, {'number': 3, 'created': '2023-07-11 13:08:29.000000000', 'files': ['ironic/db/sqlalchemy/__init__.py'], 'web_link': 'https://opendev.org/openstack/ironic/commit/74111fde878076050170596066507f2b681da3cf', 'message': ""Drop databases in unit tests instead of contents\n\nThis is a mitigation for an issue where sometimes, when tests are\ntearing down, an FK is left on a table, and when that table is dropped\ntests go boom (if we're lucky) or freeze indefinately.\n\nThis is obviously not an ideal solution, but if it works, we prove\nwhere the problem is and mitigate it for all other developers while\nwe work on a long-term solution.\n\nChange-Id: I866aef2d227a33f8ea39b843861d790e5a7015cb\n""}]",1,887234,74111fde878076050170596066507f2b681da3cf,12,2,3,10342,,,0,"Drop databases in unit tests instead of contents

This is a mitigation for an issue where sometimes, when tests are
tearing down, an FK is left on a table, and when that table is dropped
tests go boom (if we're lucky) or freeze indefinately.

This is obviously not an ideal solution, but if it works, we prove
where the problem is and mitigate it for all other developers while
we work on a long-term solution.

Change-Id: I866aef2d227a33f8ea39b843861d790e5a7015cb
",git fetch https://review.opendev.org/openstack/ironic refs/changes/34/887234/1 && git format-patch -1 --stdout FETCH_HEAD,['ironic/db/sqlalchemy/__init__.py'],1,44d47a0ce29ef67271de4676f7500bd9559a4323,,"from oslo_db.sqlalchemy import provision # NOTE(JayF): oslo.db uses a strategy of deleting all objects in the database # instead of dropping and recreating it. We believe in some cases, # this tear down may be causing our unit tests to fail/freeze. # This is not a permanent solution, we'll track that in # https://bugs.launchpad.net/ironic/+bug/2023316 def drop_all_objects(self, engine): ident = engine.url.database self.drop_named_database(engine, ident) self.create_named_database(engine, ident) provision.MySQLBackendImpl.drop_all_objects = drop_all_objects ",,15,0
openstack%2Fcharm-guide~891010,openstack/charm-guide,master,I706f9ad162a06e577af53f7c694b1d97a1d399b0,Add note for glance custom-image-properties,MERGED,2023-08-10 04:43:38.000000000,2023-08-30 19:21:37.000000000,2023-08-30 19:20:34.000000000,"[{'_account_id': 2424}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-10 04:43:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/250eebd879ade0d8bf8a5a70d6d4c2811b59e624', 'message': ""Add note for glance custom-image-properties\n\nDocument new config option 'custom-image-properties' for glance\nintroduced by:\n\nhttps://review.opendev.org/c/openstack/charm-glance/+/875797\n\nRelated-Bug: 1994053\nChange-Id: I706f9ad162a06e577af53f7c694b1d97a1d399b0\n""}, {'number': 2, 'created': '2023-08-11 06:01:41.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/67670d75fbc3a3c5013b8ad614c64827fd3fc020', 'message': ""Add note for glance custom-image-properties\n\nDocument new config option 'custom-image-properties' for glance\nintroduced by:\n\nhttps://review.opendev.org/c/openstack/charm-glance/+/875797\n\nRelated-Bug: 1994053\nChange-Id: I706f9ad162a06e577af53f7c694b1d97a1d399b0\n""}, {'number': 3, 'created': '2023-08-23 23:31:15.000000000', 'files': ['doc/source/release-notes/2023.2-bobcat.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/3b32a4af1d0205bceb54330de2b727d6f57205b3', 'message': ""Add note for glance custom-image-properties\n\nDocument new config option 'custom-image-properties' for glance\nintroduced by:\n\nhttps://review.opendev.org/c/openstack/charm-glance/+/875797\n\nCloses-Bug: #1994053\nChange-Id: I706f9ad162a06e577af53f7c694b1d97a1d399b0\n""}]",6,891010,3b32a4af1d0205bceb54330de2b727d6f57205b3,14,2,3,27231,,,0,"Add note for glance custom-image-properties

Document new config option 'custom-image-properties' for glance
introduced by:

https://review.opendev.org/c/openstack/charm-glance/+/875797

Closes-Bug: #1994053
Change-Id: I706f9ad162a06e577af53f7c694b1d97a1d399b0
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/10/891010/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/release-notes/2023.2-bobcat.rst'],1,250eebd879ade0d8bf8a5a70d6d4c2811b59e624,bug/1994053,"Glance custom image properties ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ The glance charm now supports configuring automatic custom image properties for imported images. The specified properties will be automatically added to all images that go through the `interoperable import image process <https://docs.openstack.org/glance/latest/admin/interoperable-image-import.html>`_. To add the custom properties use a comma delimited string of key:value pairs as follows: .. code-block:: none juju config glance custom-import-properties='property1:value1,property2:value2,property3:value3' Note properties will only be added to images that go through the interoperable import process such as ``openstack image create --import``, but will not be applied to regular image uploads. ",,16,0
openstack%2Fswift~887904,openstack/swift,master,Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6,wsgi: bad request syntax response missing txn-id,MERGED,2023-07-06 20:57:04.000000000,2023-08-30 19:20:31.000000000,2023-08-30 19:19:31.000000000,"[{'_account_id': 1179}, {'_account_id': 7847}, {'_account_id': 15343}, {'_account_id': 22348}, {'_account_id': 34892}]","[{'number': 1, 'created': '2023-07-06 20:57:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/a4b2a90f4fc03557749a17d3420510d3e34ecb2d', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 2, 'created': '2023-07-06 21:30:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/7ba0348c3896ff589405e022c9b869a8e6e21160', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 3, 'created': '2023-07-07 22:10:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/a3b7b68465affe30e04071bcbeb285154a209c4d', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 4, 'created': '2023-07-10 17:04:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/093c2b09c32ba8391265ae2805539850a788b51e', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 5, 'created': '2023-07-10 17:19:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/4eca1914ffc633d3008460a0bbca8685df2c3ae1', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 6, 'created': '2023-07-10 17:22:34.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/dd4b40a7b1e6475a8e9aaa70999dc6c00675524d', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 7, 'created': '2023-07-10 17:33:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/a861d02ad8a79951cd46a93dc628ec8270aaf7f3', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 8, 'created': '2023-07-10 23:15:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/ce6b6ea82822b4ae31d50ca4e6f5f6f4fbadc40a', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 9, 'created': '2023-07-10 23:32:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/f6505904a0520e87639b5756093ca88a3d116882', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 10, 'created': '2023-07-11 17:36:45.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/e05405dc19e5c744798c7b7f3e391bc2541df8ba', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 11, 'created': '2023-07-11 17:40:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/a97c6f40eacd89df1c647bb726759c72518449e7', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 12, 'created': '2023-07-21 13:14:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/102737fb6312fc935486d2b9cd2e02b7b5ec3635', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 13, 'created': '2023-07-21 13:53:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/e3d8fea9ec5823543fd9c36dd7e6201015d9577f', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 14, 'created': '2023-07-21 14:38:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/f2ece0711b4a676eb8616272fb8d3c7fde19993a', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 15, 'created': '2023-07-21 14:40:28.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/554226847613caffc5cfb8507668ac4696433a80', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 16, 'created': '2023-07-21 15:31:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/4fcbfcf497b1b8381d2640e486bc208c0f66a030', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 17, 'created': '2023-07-21 15:44:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/ff17f0764a75fb6d3638f782c19f512f8e9766f6', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 18, 'created': '2023-07-21 15:45:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/630be1621f00bb2ba6b55a2b0cd6017a2e8285f6', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 19, 'created': '2023-07-22 02:03:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/93a5b55f8bd24a2b10698b31ef4956e04146a947', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 20, 'created': '2023-07-24 16:09:47.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/cbf2c263bf967f28c43a523602f2a337c860f419', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 21, 'created': '2023-07-24 16:20:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/1a531e35f29ee354dc3ced89a8bee7250ab5267f', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details\nabout about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 22, 'created': '2023-07-24 16:20:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/adec9a3c0f3d7fdef4861247ad9bc4fec1e4414c', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details\nabout about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 23, 'created': '2023-07-24 18:04:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/2d00a1cce16610b49b531cae30b3c4f502b6078a', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 24, 'created': '2023-07-24 18:08:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/2c5d410d03600da46c76ad1173f052e9387ae774', 'message': 'bad request syntax response missing txn-id\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 25, 'created': '2023-07-24 18:12:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/be811d2c3dc3661b2544cdd0b4f118e4adc43b5c', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 26, 'created': '2023-07-24 22:47:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/6736e94f9c2830cd2db0547905faec896ff91f06', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 27, 'created': '2023-07-25 16:11:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/3860dd108d54f61e4f2affb8511db6958f658419', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 28, 'created': '2023-07-25 18:35:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/7f9d0acc39f756977109a58c259ff4969fd9c30f', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 29, 'created': '2023-07-25 18:36:01.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/2e6039ecaf41671d769b766d29f5361dc980c9b6', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 30, 'created': '2023-08-02 16:25:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/8a48f3d4fe57db4f60256464d19fc02a5ef5168f', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 31, 'created': '2023-08-02 17:01:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/7aecf06856a254dcd47a5c783d6ad304e1f486c1', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 32, 'created': '2023-08-05 01:39:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/1384760ce28408b26b80f2975c541b6a99bc5774', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 33, 'created': '2023-08-07 17:14:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/19ad68082e08e4fd2a6c85187ba3afb86fc69bfd', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 34, 'created': '2023-08-07 19:13:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/8e55c3b2b52864753ab245c1ac62c041c6d42194', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 35, 'created': '2023-08-09 17:11:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/cf90dbcdfd9e584d076f64d80b98e9e0546d7ce4', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 36, 'created': '2023-08-09 23:47:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/79a6de7779b0d8364a17dc285355c6cd2208df99', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 37, 'created': '2023-08-09 23:56:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/c97d3e06cb9d51256590ac8c9e3559958bbea1a3', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 38, 'created': '2023-08-10 03:50:19.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/b63f8fa76eb41b18c7e873c09cac80c6e9da7f58', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 39, 'created': '2023-08-10 18:53:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/38a9650ce5ef1bc786d552f7d8687c5bcac5f7df', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 40, 'created': '2023-08-21 23:36:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/swift/commit/6d042f65987a2a88bc3871716425cbe1109b817c', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}, {'number': 41, 'created': '2023-08-21 23:54:02.000000000', 'files': ['test/unit/common/test_http_protocol.py', 'swift/common/http_protocol.py', 'test/functional/test_protocol.py'], 'web_link': 'https://opendev.org/openstack/swift/commit/7b39698d0dfb463c376c7e799711a66431a24641', 'message': 'wsgi: bad request syntax response missing txn-id\n\nWhen a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.\nWe want to include a transaction-id and ensure we log details about about the ""bad request syntax""\n\nChange-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6\n'}]",204,887904,7b39698d0dfb463c376c7e799711a66431a24641,115,5,41,34892,,,0,"wsgi: bad request syntax response missing txn-id

When a client sends a malformed http request our server returns a valid http error response with Connection: close and closes the connection.
We want to include a transaction-id and ensure we log details about about the ""bad request syntax""

Change-Id: Ic0ee1e4fd4d434d442fcffa68da77e862b37d4c6
",git fetch https://review.opendev.org/openstack/swift refs/changes/04/887904/1 && git format-patch -1 --stdout FETCH_HEAD,"['test/unit/common/test_http_protocol.py', 'test/functional/test_account.py', 'swift/common/http_protocol.py']",3,a4b2a90f4fc03557749a17d3420510d3e34ecb2d,bad-req-txn,"import htmlfrom swift.common.utils import generate_trans_id from eventlet.green.http import client as http_client, HTTPStatus txn_id = generate_trans_id('') txn_id = self.txn_id logger.error(txn_id) self.server.log.info(txn_id) """""" Subclass to see when the client didn't provide a Content-Type """""" txn_id = self.txn_id ""Bad request version (%r)"" % version, trans_id=txn_id) ""Invalid HTTP version (%s)"" % base_version_number, trans_id=self.txn_id) ""Bad request syntax (%r)"" % requestline, trans_id=txn_id) ""Bad HTTP/0.9 request type (%r)"" % command, trans_id=self.txn_id) str(err), trans_id=txn_id) str(err), trans_id=txn_id def send_error(self, code, message=None, explain=None, trans_id=None): """"""Send and log an error reply. Arguments are * code: an HTTP error code 3 digits * message: a simple optional 1 line reason phrase. *( HTAB / SP / VCHAR / %x80-FF ) defaults to short entry matching the response code * explain: a detailed message defaults to the long entry matching the response code. This sends an error response (so it must be called before any output has been generated), logs the error, and finally sends a piece of HTML explaining the error to the user. """""" try: shortmsg, longmsg = self.responses[code] except KeyError: shortmsg, longmsg = '???', '???' if message is None: message = shortmsg if explain is None: explain = longmsg self.log_error(""code %d, message %s"", code, message) self.send_response(code, message) self.send_header('Connection', 'close') # Message body is omitted for cases described in: # - RFC7230: 3.3. 1xx, 204(No Content), 304(Not Modified) # - RFC7231: 6.3.6. 205(Reset Content) body = None if (code >= 200 and code not in (HTTPStatus.NO_CONTENT, HTTPStatus.RESET_CONTENT, HTTPStatus.NOT_MODIFIED)): # HTML encode to prevent Cross Site Scripting attacks # (see bug #1100201) content = (self.error_message_format % { 'code': code, 'message': html.escape(message, quote=False), 'explain': html.escape(explain, quote=False), 'txn_id': html.escape(trans_id, quote=False) }) body = content.encode('UTF-8', 'replace') self.send_header(""Content-Type"", self.error_content_type) self.send_header('Content-Length', str(len(body))) if code >= 400: self.send_header('X-Trans-Id', trans_id) self.send_header('X-Openstack-Request-Id', trans_id) self.end_headers() if self.command != 'HEAD' and body: self.wfile.write(body) trans_id = self.txn_id self.send_error(400, msg, trans_id=trans_id) trans_id = self.txn_id trans_id_extra = environ.get('HTTP_X_TRANS_ID_EXTRA') if trans_id_extra: trans_id += '-' + trans_id_extra[:32] environ['swift.trans_id'] = trans_id"," from eventlet.green.http import client as http_client '''Subclass to see when the client didn't provide a Content-Type''' ""Bad request version (%r)"" % version) ""Invalid HTTP version (%s)"" % base_version_number) ""Bad request syntax (%r)"" % requestline) ""Bad HTTP/0.9 request type (%r)"" % command) str(err)) str(err) self.send_error(400, msg)",102,11
openstack%2Fopenstack-helm~892128,openstack/openstack-helm,master,Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf,nova: Add cinder auth config,MERGED,2023-08-21 09:58:56.000000000,2023-08-30 19:00:31.000000000,2023-08-30 18:59:05.000000000,"[{'_account_id': 3009}, {'_account_id': 22348}, {'_account_id': 29974}]","[{'number': 1, 'created': '2023-08-21 09:58:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/471ad5cbc43b4d0d91f932dbe970d469fe180989', 'message': 'nova: Add cinder auth config\n\nChange-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf\n'}, {'number': 2, 'created': '2023-08-21 11:51:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/8c255208edc547cb7edae23b86a7171af73327ce', 'message': 'nova: Add cinder auth config\n\nChange-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf\n'}, {'number': 3, 'created': '2023-08-21 11:54:46.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/62e64a28f17a67dded8a53d022c7b8dd7b0e98f0', 'message': 'nova: Add cinder auth config\n\nChange-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf\n'}, {'number': 4, 'created': '2023-08-21 11:59:59.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/d918cbc0bfdadd3b33419c734dc05eb4fbf5d4f4', 'message': 'nova: Add cinder auth config\n\nChange-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf\n'}, {'number': 5, 'created': '2023-08-21 12:20:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/877845cc571142e1f7fd0d7e9faf23f1b5b815e4', 'message': 'nova: Add cinder auth config\n\nChange-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf\n'}, {'number': 6, 'created': '2023-08-25 16:40:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/4e97da12335bd8d2b26caccb8a2ca1959b087940', 'message': 'nova: Add cinder auth config\n\nChange-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf\n'}, {'number': 7, 'created': '2023-08-29 23:36:43.000000000', 'files': ['nova/templates/configmap-etc.yaml', 'nova/values.yaml', 'releasenotes/notes/nova.yaml', 'nova/Chart.yaml'], 'web_link': 'https://opendev.org/openstack/openstack-helm/commit/7d39af25fddbf5fc67e15c92a9265f28567a214e', 'message': 'nova: Add cinder auth config\n\nChange-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf\n'}]",4,892128,7d39af25fddbf5fc67e15c92a9265f28567a214e,21,3,7,31746,,,0,"nova: Add cinder auth config

Change-Id: Ieaf2400f73e5a9b940539a22ae696f19a6a1e2bf
",git fetch https://review.opendev.org/openstack/openstack-helm refs/changes/28/892128/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/templates/configmap-etc.yaml', 'nova/values.yaml', 'releasenotes/notes/cinder.yaml', 'nova/Chart.yaml']",4,471ad5cbc43b4d0d91f932dbe970d469fe180989,add-cinder-auth,version: 0.3.17,version: 0.3.16,37,1
openstack%2Fnova~886232,openstack/nova,master,Id232c2caf29d3443c61c0329d573a34a7481fd57,Add a new NumInstancesWeigher,MERGED,2023-06-15 23:49:49.000000000,2023-08-30 18:47:28.000000000,2023-08-30 18:46:10.000000000,"[{'_account_id': 4393}, {'_account_id': 7166}, {'_account_id': 7634}, {'_account_id': 11604}, {'_account_id': 16207}, {'_account_id': 22348}, {'_account_id': 34860}]","[{'number': 1, 'created': '2023-06-15 23:49:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/271b441bbc9f1f7306653cdf32fac0c1fe552dd7', 'message': 'Add a new NumInstancesWeigher\n\nDespite having a NumInstancesFilter, we miss a weigher that would classify hosts\nbased on their instance usage.\n\nChange-Id: Id232c2caf29d3443c61c0329d573a34a7481fd57\nImplements-Blueprint: bp/num-instances-weigher\n'}, {'number': 2, 'created': '2023-06-22 10:30:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/e77ffd1ae664bdb0a16bf238afc05f87d2cd657f', 'message': 'Add a new NumInstancesWeigher\n\nDespite having a NumInstancesFilter, we miss a weigher that would classify hosts\nbased on their instance usage.\n\nChange-Id: Id232c2caf29d3443c61c0329d573a34a7481fd57\nImplements-Blueprint: bp/num-instances-weigher\n'}, {'number': 3, 'created': '2023-07-20 15:02:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/nova/commit/19957a58c4cc12d7763429b1dcd607c1d645667c', 'message': 'Add a new NumInstancesWeigher\n\nDespite having a NumInstancesFilter, we miss a weigher that would classify hosts\nbased on their instance usage.\n\nChange-Id: Id232c2caf29d3443c61c0329d573a34a7481fd57\nImplements-Blueprint: bp/num-instances-weigher\n'}, {'number': 4, 'created': '2023-07-21 13:51:06.000000000', 'files': ['nova/tests/unit/scheduler/weights/test_weights_num_instances.py', 'doc/source/admin/scheduling.rst', 'nova/scheduler/weights/num_instances.py', 'nova/conf/scheduler.py', 'releasenotes/notes/bp-num_instances_weigher-bba342c82aac5509.yaml'], 'web_link': 'https://opendev.org/openstack/nova/commit/ca3fbb4d1595011e87b011153942c8b204971389', 'message': 'Add a new NumInstancesWeigher\n\nDespite having a NumInstancesFilter, we miss a weigher that would classify hosts\nbased on their instance usage.\n\nChange-Id: Id232c2caf29d3443c61c0329d573a34a7481fd57\nImplements-Blueprint: bp/num-instances-weigher\n'}]",57,886232,ca3fbb4d1595011e87b011153942c8b204971389,84,7,4,7166,,,0,"Add a new NumInstancesWeigher

Despite having a NumInstancesFilter, we miss a weigher that would classify hosts
based on their instance usage.

Change-Id: Id232c2caf29d3443c61c0329d573a34a7481fd57
Implements-Blueprint: bp/num-instances-weigher
",git fetch https://review.opendev.org/openstack/nova refs/changes/32/886232/1 && git format-patch -1 --stdout FETCH_HEAD,"['nova/tests/unit/scheduler/weights/test_weights_num_instances.py', 'doc/source/admin/scheduling.rst', 'nova/scheduler/weights/num_instances.py', 'nova/conf/scheduler.py', 'releasenotes/notes/bp-num_instances_weigher-bba342c82aac5509.yaml']",5,271b441bbc9f1f7306653cdf32fac0c1fe552dd7,bp/num-instances-weigher,"--- features: - | A new `num_instances_weigher` weigher has been added. This weigher will compare the number of instances between each node and order the list of filtered results by its number, the default being to favor the host with the smaller number of instances for spreading even with heterogenous hardware. You can modify its behavior by changing the value of ``[filter_scheduler]/num_instances_weight_multiplier`` config option where a positive value will favor the host with the higher number of running instances (ie. packing strategy). upgrade: - | Since by default the newly introduced ``[filter_scheduler]/num_instances_weight_multiplier`` config option defaults to a negative value that makes the instances be spread across the less charged hosts, we recommend you to either disable the weigher (by putting its value to 0.0) or set it with a positive value if you already have a packing strategy defined by the other existing weighers. ",,205,0
openstack%2Fpython-ironicclient~891560,openstack/python-ironicclient,master,I90146439768444a92a586cb96c5ab1fca9899653,Firmware Interface support,MERGED,2023-08-16 03:25:00.000000000,2023-08-30 18:43:49.000000000,2023-08-30 18:42:53.000000000,"[{'_account_id': 10342}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-16 03:25:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironicclient/commit/5d73bc7ffcb99994d575ac1be43b8f6c3c856302', 'message': 'Firmware Interface support\n\nCommand to list firmware components of a node:\n* ``openstack baremetal node firmware list <node_ident>``\n\nThe `firmware_interface` can be specified in the commands below:\n* ``openstack baremetal node create``\n* ``openstack baremetal node show``\n* ``openstack baremetal node set``\n* ``openstack baremetal node unset``\n* ``openstack baremetal driver list``\n* ``openstack baremetal driver show``\n\nBumping API to match the required version for it and added unit testing.\n\nChange-Id: I90146439768444a92a586cb96c5ab1fca9899653\n'}, {'number': 2, 'created': '2023-08-29 01:39:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/python-ironicclient/commit/ae7830dde8c9fe766a77317ac3703443035110e9', 'message': 'Firmware Interface support\n\nCommand to list firmware components of a node:\n* ``openstack baremetal node firmware list <node_ident>``\n\nThe `firmware_interface` can be specified in the commands below:\n* ``openstack baremetal node create``\n* ``openstack baremetal node show``\n* ``openstack baremetal node set``\n* ``openstack baremetal node unset``\n* ``openstack baremetal driver list``\n* ``openstack baremetal driver show``\n\nBumping API to match the required version for it and added unit testing.\n\nChange-Id: I90146439768444a92a586cb96c5ab1fca9899653\n'}, {'number': 3, 'created': '2023-08-29 20:44:03.000000000', 'files': ['releasenotes/notes/firmware-interface-ad0e9d58e4f61b2d.yaml', 'ironicclient/tests/unit/osc/v1/fakes.py', 'ironicclient/v1/node.py', 'ironicclient/common/http.py', 'ironicclient/tests/unit/osc/v1/test_baremetal_driver.py', 'ironicclient/tests/unit/v1/test_driver.py', 'setup.cfg', 'ironicclient/v1/resource_fields.py', 'ironicclient/osc/v1/baremetal_node.py', 'ironicclient/tests/unit/osc/v1/test_baremetal_node.py'], 'web_link': 'https://opendev.org/openstack/python-ironicclient/commit/cea2c5a574f2213f644aa0fef8f3aeecc1d56476', 'message': 'Firmware Interface support\n\nCommand to list firmware components of a node:\n* ``openstack baremetal node firmware list <node_ident>``\n\nThe `firmware_interface` can be specified in the commands below:\n* ``openstack baremetal node create``\n* ``openstack baremetal node show``\n* ``openstack baremetal node set``\n* ``openstack baremetal node unset``\n* ``openstack baremetal driver list``\n* ``openstack baremetal driver show``\n\nBumping API to match the required version for it and added unit testing.\n\nChange-Id: I90146439768444a92a586cb96c5ab1fca9899653\n'}]",5,891560,cea2c5a574f2213f644aa0fef8f3aeecc1d56476,18,3,3,15519,,,0,"Firmware Interface support

Command to list firmware components of a node:
* ``openstack baremetal node firmware list <node_ident>``

The `firmware_interface` can be specified in the commands below:
* ``openstack baremetal node create``
* ``openstack baremetal node show``
* ``openstack baremetal node set``
* ``openstack baremetal node unset``
* ``openstack baremetal driver list``
* ``openstack baremetal driver show``

Bumping API to match the required version for it and added unit testing.

Change-Id: I90146439768444a92a586cb96c5ab1fca9899653
",git fetch https://review.opendev.org/openstack/python-ironicclient refs/changes/60/891560/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/firmware-interface-ad0e9d58e4f61b2d.yaml', 'ironicclient/tests/unit/osc/v1/fakes.py', 'ironicclient/v1/node.py', 'ironicclient/common/http.py', 'ironicclient/tests/unit/osc/v1/test_baremetal_driver.py', 'ironicclient/tests/unit/v1/test_driver.py', 'setup.cfg', 'ironicclient/v1/resource_fields.py', 'ironicclient/osc/v1/baremetal_node.py', 'ironicclient/tests/unit/osc/v1/test_baremetal_node.py']",10,5d73bc7ffcb99994d575ac1be43b8f6c3c856302,firmware_interface," def test_baremetal_create_with_firmware_interface(self): self.check_with_options(['--firmware-interface', 'firmware'], [('firmware_interface', 'firmware')], {'firmware_interface': 'firmware'}) 'Firmware Interface', def test_baremetal_set_firmware_interface(self): self._test_baremetal_set_hardware_interface('firmware') def test_baremetal_reset_firmware_interface(self): self._test_baremetal_reset_hardware_interface('firmware') class TestListFirmwareComponents(TestBaremetal): def setUp(self): super(TestListFirmwareComponents, self).setUp() self.baremetal_mock.node.list_firmware_components.return_value = ( baremetal_fakes.FIRMWARE_COMPONENTS) # Get the command object to test self.cmd = baremetal_node.ListFirmwareComponentBaremetalNode(self.app, None) def test_baremetal_list_firmware_components(self): arglist = ['node_uuid'] verifylist = [('node', 'node_uuid')] parsed_args = self.check_parser(self.cmd, arglist, verifylist) columns, data = self.cmd.take_action(parsed_args) self.baremetal_mock.node.list_firmware_components \ .assert_called_once_with('node_uuid') expected_columns = ('Component', 'Initial Version', 'Current Version', 'Last Version Flashed', 'Created At', 'Updated At') self.assertEqual(expected_columns, columns) expected_data = ( [(fw['component'], fw['initial_version'], fw['current_version'], fw['last_version_flashed'], fw['created_at'], fw['updated_at']) for fw in baremetal_fakes.FIRMWARE_COMPONENTS]) self.assertEqual(tuple(expected_data), tuple(data))",,181,5
openstack%2Fironic-python-agent~892593,openstack/ironic-python-agent,stable/2023.1,I97d3e27e2adb731794a7746737d3788c6e7977a0,Handle the node being locked,MERGED,2023-08-24 15:31:22.000000000,2023-08-30 18:41:26.000000000,2023-08-30 18:40:09.000000000,"[{'_account_id': 10239}, {'_account_id': 10342}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-24 15:31:22.000000000', 'files': ['ironic_python_agent/tests/unit/test_ironic_api_client.py', 'releasenotes/notes/understand-node-conflict-is-locked-2ea21dd45abfe4f7.yaml', 'ironic_python_agent/ironic_api_client.py'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/804567831cf1d21aa362f80f8eb397cccb6b383e', 'message': ""Handle the node being locked\n\nIf the node is locked, a lookup cannot be performed when an agent\ntoken needs to be generated, which tends to error like this:\n\n  ironic_python_agent.ironic_api_client [-] Failed looking up node\n  with addresses '00:6f:bb:34:b3:4d,00:6f:bb:34:b3:4b' at\n  https://172.22.0.2:6385. Error 409: Node\n  c25e451b-d2fb-4168-b690-f15bc8365520 is locked by host 172.22.0.2,\n  please retry after the current operation is completed..\n  Check if inspection has completed.\n\nProblem is, if we keep pounding on the door, we can actually worsen\nthe situation, and previously we would just just let tenacity\nretry.\n\nWe will now hold for 30 seconds before proceeding, so we have\nhopefully allowed the operation to complete.\n\nAlso fixes the error logging to help human's sanity.\n\nChange-Id: I97d3e27e2adb731794a7746737d3788c6e7977a0\n(cherry picked from commit 5ed520df895997e571732c305b3f1ac2f954209a)\n""}]",0,892593,804567831cf1d21aa362f80f8eb397cccb6b383e,10,3,1,11655,,,0,"Handle the node being locked

If the node is locked, a lookup cannot be performed when an agent
token needs to be generated, which tends to error like this:

  ironic_python_agent.ironic_api_client [-] Failed looking up node
  with addresses '00:6f:bb:34:b3:4d,00:6f:bb:34:b3:4b' at
  https://172.22.0.2:6385. Error 409: Node
  c25e451b-d2fb-4168-b690-f15bc8365520 is locked by host 172.22.0.2,
  please retry after the current operation is completed..
  Check if inspection has completed.

Problem is, if we keep pounding on the door, we can actually worsen
the situation, and previously we would just just let tenacity
retry.

We will now hold for 30 seconds before proceeding, so we have
hopefully allowed the operation to complete.

Also fixes the error logging to help human's sanity.

Change-Id: I97d3e27e2adb731794a7746737d3788c6e7977a0
(cherry picked from commit 5ed520df895997e571732c305b3f1ac2f954209a)
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/93/892593/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/tests/unit/test_ironic_api_client.py', 'releasenotes/notes/understand-node-conflict-is-locked-2ea21dd45abfe4f7.yaml', 'ironic_python_agent/ironic_api_client.py']",3,804567831cf1d21aa362f80f8eb397cccb6b383e,,"import time lookup_lock_pause = 0 node_uuid=None, max_interval=60): if response.status_code == requests.codes.CONFLICT: if self.lookup_lock_pause == 0: self.lookup_lock_pause = 5 elif self.lookup_lock_pause == 5: self.lookup_lock_pause = 10 elif self.lookup_lock_pause == 10: # If we're reaching this point, we've got a long held # persistent lock, which means things can go very sideways # or the ironic deployment is downright grumpy. Either way, # we need to slow things down. self.lookup_lock_pause = 30 LOG.warning( 'Ironic has responded with a conflict, signaling the ' 'node is locked. We will wait %(time)s seconds before trying ' 'again. %(err)s', {'time': self.lookup_lock_pause, 'error': self._error_from_response(response)} ) time.sleep(self.lookup_lock_pause) return False 'Check if inspection has completed? %s',"," node_uuid=None, max_interval=30): '%s. Check if inspection has completed.',",65,2
openstack%2Fironic-python-agent-builder~892925,openstack/ironic-python-agent-builder,stable/zed,I6128fbad5d9db2ea6469f196f3ee13b6fab76837,Add checksum generation support,MERGED,2023-08-28 13:03:55.000000000,2023-08-30 18:35:44.000000000,2023-08-30 18:34:26.000000000,"[{'_account_id': 10342}, {'_account_id': 11655}, {'_account_id': 14200}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-28 13:03:55.000000000', 'files': ['dib/ironic-ramdisk-base/environment.d/10-checksum.bash', 'dib/ironic-ramdisk-base/cleanup.d/99-ramdisk-create'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/dbd66345ee86f3d3232c951ae754a3585cc7e4ad', 'message': 'Add checksum generation support\n\nDIB_CHECKSUM is set by the disk-image-create --checksum flag, and for\nother images results in checksum files being generated for the\nimage[1].\n\nThis change ensures checksum files are generated for built\nramdisk/kernel as well.\n\n[1] https://opendev.org/openstack/diskimage-builder/src/branch/master/diskimage_builder/lib/common-functions#L68\n\nChange-Id: I6128fbad5d9db2ea6469f196f3ee13b6fab76837\n(cherry picked from commit 59d79f6ccd45e55ca72d7c971a74eb202702ce4e)\n'}]",0,892925,dbd66345ee86f3d3232c951ae754a3585cc7e4ad,10,4,1,14200,,,0,"Add checksum generation support

DIB_CHECKSUM is set by the disk-image-create --checksum flag, and for
other images results in checksum files being generated for the
image[1].

This change ensures checksum files are generated for built
ramdisk/kernel as well.

[1] https://opendev.org/openstack/diskimage-builder/src/branch/master/diskimage_builder/lib/common-functions#L68

Change-Id: I6128fbad5d9db2ea6469f196f3ee13b6fab76837
(cherry picked from commit 59d79f6ccd45e55ca72d7c971a74eb202702ce4e)
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/25/892925/1 && git format-patch -1 --stdout FETCH_HEAD,"['dib/ironic-ramdisk-base/environment.d/10-checksum.bash', 'dib/ironic-ramdisk-base/cleanup.d/99-ramdisk-create']",2,dbd66345ee86f3d3232c951ae754a3585cc7e4ad,extend-dib-checksum,"if [ ""$DIB_CHECKSUM"" == ""1"" ]; then pushd $(dirname ${IMAGE_PATH}) md5sum ${IMAGE_NAME}.initramfs ${IMAGE_NAME}.kernel > ${IMAGE_NAME}.md5 sha256sum ${IMAGE_NAME}.initramfs ${IMAGE_NAME}.kernel > ${IMAGE_NAME}.sha256 popd fi",,7,0
openstack%2Fansible-role-pki~890793,openstack/ansible-role-pki,master,Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8,Add defaults for owner/group/mode on pki_install_host,MERGED,2023-08-08 13:15:49.000000000,2023-08-30 18:33:27.000000000,2023-08-30 18:31:40.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-08 13:15:49.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/e6ebbb1cb56870654962b42a301ac480ee1b3da5', 'message': ""Add defaults for owner/group/mode on pki_install_host\n\nWIP\n- reverts the default user/group from\nI4a90479261b2721c08e9034fbae0d56de9308676\n- adds global default options so user/group etc can\nbe overridden on the setup host\n\nThere is at least one behaviour change here at present\nwhere a mode may be specified and was previously 'omit'.\nThis will override the default umask. TBC if this matters\nfor existing deployments.\n\nRelated-Bug: #2029253\nChange-Id: Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8\n""}, {'number': 2, 'created': '2023-08-21 12:42:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/330b516dd53c45385e1fc433981df0d646963498', 'message': ""Add defaults for owner/group/mode on pki_install_host\n\nReverts the default user/group from\nI4a90479261b2721c08e9034fbae0d56de9308676\n\nAdds global default options so user/group etc can\nbe overridden on the setup host\n\nSome cases of 'omit' for file modes are changed to a\nrole-defined default which will override any system umask\npreferences.\n\nRelated-Bug: #2029253\nChange-Id: Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8\n""}, {'number': 3, 'created': '2023-08-30 10:51:51.000000000', 'files': ['tasks/main_certs.yml', 'tasks/main_ca.yml', 'vars/standalone_cert.yml', 'tasks/standalone/create_ca.yml', 'defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/ansible-role-pki/commit/307c1feb50e7ae95829ff085a760cf3e1f51abc7', 'message': ""Add defaults for owner/group/mode on pki_install_host\n\nReverts the default user/group from\nI4a90479261b2721c08e9034fbae0d56de9308676\n\nAdds global default options so user/group etc can\nbe overridden on the setup host\n\nSome cases of 'omit' for file modes are changed to a\nrole-defined default which will override any system umask\npreferences.\n\nRelated-Bug: #2029253\nChange-Id: Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8\n""}]",13,890793,307c1feb50e7ae95829ff085a760cf3e1f51abc7,24,3,3,31542,,,0,"Add defaults for owner/group/mode on pki_install_host

Reverts the default user/group from
I4a90479261b2721c08e9034fbae0d56de9308676

Adds global default options so user/group etc can
be overridden on the setup host

Some cases of 'omit' for file modes are changed to a
role-defined default which will override any system umask
preferences.

Related-Bug: #2029253
Change-Id: Id999ccf5f42ee7f6b6b08db67276bb77bc9a21d8
",git fetch https://review.opendev.org/openstack/ansible-role-pki refs/changes/93/890793/1 && git format-patch -1 --stdout FETCH_HEAD,"['tasks/main_certs.yml', 'tasks/main_ca.yml', 'vars/standalone_cert.yml', 'tasks/standalone/create_ca.yml', 'defaults/main.yml']",5,e6ebbb1cb56870654962b42a301ac480ee1b3da5,bug/2029253," # Default permissions used on pki_setup_host # pki_owner: ""root"" # pki_group: ""root"" pki_cert_mode: ""0644"" pki_cert_dir_mode: ""0755"" pki_key_mode: ""0600"" pki_key_dir_mode: ""0700""",,30,19
openstack%2Fironic-python-agent~511066,openstack/ironic-python-agent,master,Ic2abdb685093785dab9625996f984dbd6520a8f9,Detect when log messages are mis-formatted,ABANDONED,2017-10-10 22:22:08.000000000,2023-08-30 18:13:02.000000000,,"[{'_account_id': 3}, {'_account_id': 14760}, {'_account_id': 22348}]","[{'number': 1, 'created': '2017-10-10 22:22:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/5a633e5d000fc74ba012b8793b7a23e9fd590717', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}, {'number': 2, 'created': '2017-10-10 23:04:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/ae9cf304587be81fa5c0aea172f8b1d16fa44793', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}, {'number': 3, 'created': '2017-10-10 23:36:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/fbe583e0478e2ef5dbe9a817a2064e5f879e9c43', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}, {'number': 4, 'created': '2017-10-10 23:39:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/582d7b1fcc9a455b78be68def26ed0cb0a368168', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}, {'number': 5, 'created': '2017-10-17 23:10:11.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/a10ab84bbebf8e52f08799dbc3e23af47592b5b7', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nNote: This will not catch errors in log messages if 1) The call to the\nlogger is mocked out, or 2) The unit test never exercises the logging\ncall.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}, {'number': 6, 'created': '2017-10-27 15:50:24.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/7c70dff26d24700eb5fea1b6a1f121affd02ec3d', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nNote: This will not catch errors in log messages if 1) The call to the\nlogger is mocked out, or 2) The unit test never exercises the logging\ncall.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}, {'number': 7, 'created': '2017-10-27 16:18:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/8cfbe314d0fca9fdc18692332ae4abf1817f0e8f', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nNote: This will not catch errors in log messages if 1) The call to the\nlogger is mocked out, or 2) The unit test never exercises the logging\ncall.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}, {'number': 8, 'created': '2023-06-25 21:41:35.000000000', 'files': ['ironic_python_agent/tests/unit/test_ironic_fixtures.py', 'ironic_python_agent/tests/unit/test_inspector.py', 'ironic_python_agent/tests/unit/base.py', 'ironic_python_agent/tests/unit/test_agent.py', 'ironic_python_agent/tests/unit/ironic_fixtures.py'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent/commit/f35ffccde7c169f5bd3025d211bc84d3fa40c174', 'message': ""Detect when log messages are mis-formatted\n\nThis is a cross-port of part of the fixtures.py file from Nova as\nironic_fixtures.py.\n\nThere are a number of things we want to handle with logging in tests:\n\n* Redirect the logging to somewhere that we can test or dump it later.\n\n* Ensure that as many DEBUG messages as possible are actually\n   executed, to ensure they are actually syntactically valid (they\n   often have not been).\n\n* Ensure that we create useful output for tests that doesn't\n  overwhelm the testing system (which means we can't capture the\n  100 MB of debug logging on every run).\n\nTo do this we create a logger fixture at the root level, which\ndefaults to INFO and create a Null Logger at DEBUG which lets\nus execute log messages at DEBUG but not keep the output.\n\nTo support local debugging OS_DEBUG=True can be set in the\nenvironment, which will print out the full debug logging.\n\nThere are also a set of overrides for particularly verbose\nmodules to be even less than INFO.\n\nNote: This will not catch errors in log messages if 1) The call to the\nlogger is mocked out, or 2) The unit test never exercises the logging\ncall.\n\nChange-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9\nCloses-Bug: #1503086\n""}]",5,511066,f35ffccde7c169f5bd3025d211bc84d3fa40c174,31,3,8,14760,,,0,"Detect when log messages are mis-formatted

This is a cross-port of part of the fixtures.py file from Nova as
ironic_fixtures.py.

There are a number of things we want to handle with logging in tests:

* Redirect the logging to somewhere that we can test or dump it later.

* Ensure that as many DEBUG messages as possible are actually
   executed, to ensure they are actually syntactically valid (they
   often have not been).

* Ensure that we create useful output for tests that doesn't
  overwhelm the testing system (which means we can't capture the
  100 MB of debug logging on every run).

To do this we create a logger fixture at the root level, which
defaults to INFO and create a Null Logger at DEBUG which lets
us execute log messages at DEBUG but not keep the output.

To support local debugging OS_DEBUG=True can be set in the
environment, which will print out the full debug logging.

There are also a set of overrides for particularly verbose
modules to be even less than INFO.

Note: This will not catch errors in log messages if 1) The call to the
logger is mocked out, or 2) The unit test never exercises the logging
call.

Change-Id: Ic2abdb685093785dab9625996f984dbd6520a8f9
Closes-Bug: #1503086
",git fetch https://review.opendev.org/openstack/ironic-python-agent refs/changes/66/511066/1 && git format-patch -1 --stdout FETCH_HEAD,"['ironic_python_agent/tests/unit/test_ironic_fixtures.py', 'ironic_python_agent/tests/unit/test_inspector.py', 'ironic_python_agent/tests/unit/base.py', 'ironic_python_agent/tests/unit/test_agent.py', 'ironic_python_agent/tests/unit/ironic_fixtures.py']",5,5a633e5d000fc74ba012b8793b7a23e9fd590717,,"# Copyright 2010 United States Government as represented by the # Administrator of the National Aeronautics and Space Administration. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. """"""Fixtures for Ironic tests."""""" from __future__ import absolute_import import logging as std_logging import os import re import fixtures from oslo_log import log import six _TRUE_VALUES = ('True', 'true', '1', 'yes') class NullHandler(std_logging.Handler): """"""custom default NullHandler to attempt to format the record. Used in conjunction with log_fixture.get_logging_handle_error_fixture to detect formatting errors in debug level logs without saving the logs. """""" def handle(self, record): self.format(record) def emit(self, record): pass def createLock(self): self.lock = None SPECIFIER_MISSING_REGEX = re.compile(r'%\([^)]+\)( |$)') def check_log_message_specifiers(msg): # Check if a log message is missing a specifier. For example: # ""%(value) "" is missing a specifier like 's' or 'd'. It should be: # ""%(value)s"" # The reason for this test is that the format operation will convert this: # This: ""%(value) seconds"" % {'value': 1} # To ->: ""1econds"" # Which is not what we want result = SPECIFIER_MISSING_REGEX.search(msg) if result: raise ValueError( ""The log message: {!r} appears to be mis-formatted"".format(msg)) class PassthruFormatter(std_logging.Formatter): """"""custom default PassthruFormatter to check log messages"""""" def format(self, record): if not isinstance(record.msg, six.string_types): raise ValueError( ""The log message: {!r} is of type {!r} which is not a string "" ""data type"".format( record.msg, type(record.msg))) check_log_message_specifiers(record.msg) return super(PassthruFormatter, self).format(record) class StandardLogging(fixtures.Fixture): """"""Setup Logging redirection for tests. There are a number of things we want to handle with logging in tests: * Redirect the logging to somewhere that we can test or dump it later. * Ensure that as many DEBUG messages as possible are actually executed, to ensure they are actually syntactically valid (they often have not been). * Ensure that we create useful output for tests that doesn't overwhelm the testing system (which means we can't capture the 100 MB of debug logging on every run). To do this we create a logger fixture at the root level, which defaults to INFO and create a Null Logger at DEBUG which lets us execute log messages at DEBUG but not keep the output. To support local debugging OS_DEBUG=True can be set in the environment, which will print out the full debug logging. There are also a set of overrides for particularly verbose modules to be even less than INFO. """""" def setUp(self): super(StandardLogging, self).setUp() # set root logger to debug root = std_logging.getLogger() root.setLevel(std_logging.DEBUG) self.LOG = log.getLogger(__name__) self.addCleanup(self.check_logger_is_enabled) # supports collecting debug level for local runs if os.environ.get('OS_DEBUG') in _TRUE_VALUES: level = std_logging.DEBUG else: level = std_logging.INFO # Collect logs fs = '%(asctime)s %(levelname)s [%(name)s] %(message)s' self.logger = self.useFixture( fixtures.FakeLogger( format=fs, level=None, formatter=PassthruFormatter)) # self.logger = self.useFixture( # fixtures.FakeLogger(format=fs, level=None)) # TODO(sdague): why can't we send level through the fake # logger? Tests prove that it breaks, but it's worth getting # to the bottom of. root.handlers[0].setLevel(level) if level > std_logging.DEBUG: # Just attempt to format debug level logs, but don't save them handler = NullHandler() self.useFixture(fixtures.LogHandler(handler, nuke_handlers=False)) handler.setLevel(std_logging.DEBUG) # Don't log every single DB migration step std_logging.getLogger( 'migrate.versioning.api').setLevel(std_logging.WARNING) def check_logger_is_enabled(self): # We want to make sure that the logger has not been disabled somehow. # For example it can be disabled with a call to: # logging.log_config.fileConfig() if self.LOG.logger.disabled: raise ValueError( ""The logger has been disabled during the test run. Unable to "" ""verify log messages are correct."") ",,231,4
openstack%2Foctavia~886446,openstack/octavia,master,I45500d618b307f740b8e692c49f5efdd27dc10a0,Fix haproxy global maxconn with disabled listeners,MERGED,2023-06-20 05:23:35.000000000,2023-08-30 18:06:53.000000000,2023-08-30 18:05:38.000000000,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 31664}, {'_account_id': 32761}, {'_account_id': 34429}]","[{'number': 1, 'created': '2023-06-20 05:23:35.000000000', 'files': ['octavia/common/jinja/haproxy/combined_listeners/jinja_cfg.py', 'releasenotes/notes/fix-haproxy-maxconn-with-disabled-listeners-fa89f762a94b8fe9.yaml', 'octavia/tests/unit/common/jinja/haproxy/combined_listeners/test_jinja_cfg.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/21682f7056d9c08a322bcfddac3f075be939805d', 'message': 'Fix haproxy global maxconn with disabled listeners\n\nglobal maxconn value is based on the connection-limit of the listeners\nof a LB, but it includes the connection-limit of disabled listeners.\nDisabled listeners are now skipped.\n\nCloses-Bug: #2024371\n\nChange-Id: I45500d618b307f740b8e692c49f5efdd27dc10a0\n'}]",3,886446,21682f7056d9c08a322bcfddac3f075be939805d,12,5,1,29244,,,0,"Fix haproxy global maxconn with disabled listeners

global maxconn value is based on the connection-limit of the listeners
of a LB, but it includes the connection-limit of disabled listeners.
Disabled listeners are now skipped.

Closes-Bug: #2024371

Change-Id: I45500d618b307f740b8e692c49f5efdd27dc10a0
",git fetch https://review.opendev.org/openstack/octavia refs/changes/46/886446/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia/common/jinja/haproxy/combined_listeners/jinja_cfg.py', 'releasenotes/notes/fix-haproxy-maxconn-with-disabled-listeners-fa89f762a94b8fe9.yaml', 'octavia/tests/unit/common/jinja/haproxy/combined_listeners/test_jinja_cfg.py']",3,21682f7056d9c08a322bcfddac3f075be939805d,," def test_transform_with_disabled_listeners(self): in_amphora = sample_configs_combined.sample_amphora_tuple() in_listeners = [] connection_limit_sum = 0 in_listener = ( sample_configs_combined.sample_listener_tuple()) connection_limit_sum += constants.HAPROXY_DEFAULT_MAXCONN in_listeners.append(in_listener) disabled_listener = ( sample_configs_combined.sample_listener_tuple(enabled=False)) in_listeners.append(disabled_listener) ret = self.jinja_cfg._transform_loadbalancer( in_amphora, in_listeners[0].load_balancer, in_listeners, None, {}) self.assertEqual(ret['global_connection_limit'], connection_limit_sum) ",,30,0
openstack%2Fdiskimage-builder~893196,openstack/diskimage-builder,master,I1d1ecb05e61f3995a98de450705451b94b437a08,Fix and issue with wait_for,MERGED,2023-08-30 14:32:12.000000000,2023-08-30 17:59:18.000000000,2023-08-30 17:58:07.000000000,"[{'_account_id': 4146}, {'_account_id': 4571}, {'_account_id': 10342}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 14:32:12.000000000', 'files': ['diskimage_builder/lib/common-functions'], 'web_link': 'https://opendev.org/openstack/diskimage-builder/commit/0322695a5e509f524e6b333c48d5d6b512b73ce4', 'message': ""Fix and issue with wait_for\n\nFollowup I2dd1c60e3bfd9c823a7382b1390b1d40c52a5c97.\nThe 'wait_for' array always updated even the command not executed\nafter test because of '&' control operator, so lets wrap construction\nin standard 'if..then' case instead of using '&&' control operator.\n\nChange-Id: I1d1ecb05e61f3995a98de450705451b94b437a08\nSigned-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>\n""}]",1,893196,0322695a5e509f524e6b333c48d5d6b512b73ce4,10,5,1,14200,,,0,"Fix and issue with wait_for

Followup I2dd1c60e3bfd9c823a7382b1390b1d40c52a5c97.
The 'wait_for' array always updated even the command not executed
after test because of '&' control operator, so lets wrap construction
in standard 'if..then' case instead of using '&&' control operator.

Change-Id: I1d1ecb05e61f3995a98de450705451b94b437a08
Signed-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>
",git fetch https://review.opendev.org/openstack/diskimage-builder refs/changes/96/893196/1 && git format-patch -1 --stdout FETCH_HEAD,['diskimage_builder/lib/common-functions'],1,0322695a5e509f524e6b333c48d5d6b512b73ce4,extend-dib-checksum," if [[ ""$DIB_CHECKSUM"" == *md5* ]]; then md5sum $1 > $1.md5 & wait_for+=($!); fi if [[ ""$DIB_CHECKSUM"" == *sha256* ]]; then sha256sum $1 > $1.sha256 & wait_for+=($!); fi"," [[ ""$DIB_CHECKSUM"" == *md5* ]] && md5sum $1 > $1.md5 & wait_for+=($!) [[ ""$DIB_CHECKSUM"" == *sha256* ]] && sha256sum $1 > $1.sha256 & wait_for+=($!)",2,2
openstack%2Fironic-python-agent-builder~886489,openstack/ironic-python-agent-builder,stable/zed,I2028ac1cf350d86903a33e4bd91c209887de1e5c,Add libaio engine for fio on Centos/Rhel9,MERGED,2023-06-21 16:55:00.000000000,2023-08-30 17:52:12.000000000,2023-08-30 17:51:12.000000000,"[{'_account_id': 10239}, {'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-06-21 16:55:00.000000000', 'files': ['dib/burn-in/package-installs.yaml', 'dib/extra-hardware/package-installs.yaml'], 'web_link': 'https://opendev.org/openstack/ironic-python-agent-builder/commit/b09798696268a81e7f2e92c10d40a5eac97a1a04', 'message': ""Add libaio engine for fio on Centos/Rhel9\n\nfio packaging previously contained everything in one RPM,\nbut at some point for EL9 builds, this was split into multiple\nRPMs where each engine used was put into it's own RPM.\n\nIn order for integrated disk benchmarking to work with\nintrospection, we use python-hardware. Python-hardware uses\nfio, with libaio as a default option.\n\nSo now, we will attempt to install the other package which\nshould make users of the feature happier as their ramdisk\nimages will come with the contents required to do a benchmark\nupfront.\n\nChange-Id: I2028ac1cf350d86903a33e4bd91c209887de1e5c\n(cherry picked from commit 1c1b8cf663598a74ee9391023e7b376f2dc6ea5a)\n""}]",1,886489,b09798696268a81e7f2e92c10d40a5eac97a1a04,10,3,1,11655,,,0,"Add libaio engine for fio on Centos/Rhel9

fio packaging previously contained everything in one RPM,
but at some point for EL9 builds, this was split into multiple
RPMs where each engine used was put into it's own RPM.

In order for integrated disk benchmarking to work with
introspection, we use python-hardware. Python-hardware uses
fio, with libaio as a default option.

So now, we will attempt to install the other package which
should make users of the feature happier as their ramdisk
images will come with the contents required to do a benchmark
upfront.

Change-Id: I2028ac1cf350d86903a33e4bd91c209887de1e5c
(cherry picked from commit 1c1b8cf663598a74ee9391023e7b376f2dc6ea5a)
",git fetch https://review.opendev.org/openstack/ironic-python-agent-builder refs/changes/89/886489/1 && git format-patch -1 --stdout FETCH_HEAD,"['dib/burn-in/package-installs.yaml', 'dib/extra-hardware/package-installs.yaml']",2,b09798696268a81e7f2e92c10d40a5eac97a1a04,,fio-engine-libaio: when: - IPA_DISTRO_FAMILY = rh - DIB_RELEASE != 7 - DIB_RELEASE != 8,,10,0
openstack%2Foctavia~889697,openstack/octavia,master,Idccb8734c1acf9f05cca1ec5f184410e98b819c1,Fix UDP pool's member status in LB with additional VIPs,MERGED,2023-07-26 11:24:09.000000000,2023-08-30 17:50:41.000000000,2023-08-30 17:49:12.000000000,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 34429}]","[{'number': 1, 'created': '2023-07-26 11:24:09.000000000', 'files': ['releasenotes/notes/fix-udp-member-status-with-additional-vips-7511690a0c112b44.yaml', 'octavia/amphorae/backends/utils/keepalivedlvs_query.py', 'octavia/tests/unit/amphorae/backends/utils/test_keepalivedlvs_query.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/58d0ede1e5ed9ac1349b48ed0336d8e5ce4e3f1f', 'message': ""Fix UDP pool's member status in LB with additional VIPs\n\nWith UDP LBs with additional VIPs, the status of the members included\nonly the IPv4 (or IPv6) members, but not both. The members were marked\nas DOWN.\n\nPartial-Bug: #2028751\n\nChange-Id: Idccb8734c1acf9f05cca1ec5f184410e98b819c1\n""}]",1,889697,58d0ede1e5ed9ac1349b48ed0336d8e5ce4e3f1f,8,3,1,29244,,,0,"Fix UDP pool's member status in LB with additional VIPs

With UDP LBs with additional VIPs, the status of the members included
only the IPv4 (or IPv6) members, but not both. The members were marked
as DOWN.

Partial-Bug: #2028751

Change-Id: Idccb8734c1acf9f05cca1ec5f184410e98b819c1
",git fetch https://review.opendev.org/openstack/octavia refs/changes/97/889697/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/fix-udp-member-status-with-additional-vips-7511690a0c112b44.yaml', 'octavia/amphorae/backends/utils/keepalivedlvs_query.py', 'octavia/tests/unit/amphorae/backends/utils/test_keepalivedlvs_query.py']",3,58d0ede1e5ed9ac1349b48ed0336d8e5ce4e3f1f,,"KERNEL_FILE_SAMPLE_MIXED = ( ""IP Virtual Server version 1.2.1 (size=4096)\n"" ""Prot LocalAddress:Port Scheduler Flags\n"" "" -> RemoteAddress:Port Forward Weight ActiveConn InActConn\n"" ""UDP [fd79:35e2:9963:0000:f816:3eff:fe6d:7a2a]:1E61 rr\n"" "" -> [fd79:35e2:9963:0000:f816:3eff:feca:b7bf]:08AE "" ""Masq 3 0 0\n"" "" -> [fd79:35e2:9963:0000:f816:3eff:fe9d:94df]:0D05 "" ""Masq 2 0 0\n"" "" -> [fd79:35e2::8f3f]:115C "" ""Masq 2 0 0\n"" ""UDP 0A000025:1E61 rr\n"" "" -> 0A000023:0D05 Masq 2 0 0\n"" "" -> 0A000019:08AE Masq 3 0 0\n"" ""UDP 0A000025:FF12 rr\n"" "" -> 0A000023:12AB Masq 2 0 0\n"" "" -> 0A000019:BF2E Masq 3 0 0"") self.assertEqual(expected, result) self.assertEqual(expected, result) # mixed resolver input_listener_ip_port = [ '[fd79:35e2:9963:0:f816:3eff:fe6d:7a2a]:7777', '10.0.0.37:7777'] mock_check_output.return_value = KERNEL_FILE_SAMPLE_MIXED result = lvs_query.get_listener_realserver_mapping( target_ns, input_listener_ip_port, health_monitor_enabled=True) expected = {'[fd79:35e2:9963:0:f816:3eff:feca:b7bf]:2222': {'status': constants.UP, 'Forward': 'Masq', 'Weight': '3', 'ActiveConn': '0', 'InActConn': '0'}, '[fd79:35e2:9963:0:f816:3eff:fe9d:94df]:3333': {'status': constants.UP, 'Forward': 'Masq', 'Weight': '2', 'ActiveConn': '0', 'InActConn': '0'}, '[fd79:35e2::8f3f]:4444': {'status': constants.UP, 'Forward': 'Masq', 'Weight': '2', 'ActiveConn': '0', 'InActConn': '0'}, '10.0.0.25:2222': {'status': 'UP', 'Forward': 'Masq', 'Weight': '3', 'ActiveConn': '0', 'InActConn': '0'}, '10.0.0.35:3333': {'status': 'UP', 'Forward': 'Masq', 'Weight': '2', 'ActiveConn': '0', 'InActConn': '0'}} self.assertEqual(expected, result) self.assertEqual({}, result) self.assertEqual({}, result) mock_get_mapping.return_value = {}"," self.assertEqual((True, expected), result) self.assertEqual((True, expected), result) self.assertEqual((False, {}), result) self.assertEqual((False, {}), result) mock_get_mapping.return_value = (False, {})",73,14
openstack%2Fopenstacksdk~889870,openstack/openstacksdk,master,I01955f42ca54d23c2a89f4e0636312e25f95b41c,cloud: Convert 'get_volume_limits' to use proxy layer,MERGED,2023-07-27 14:16:14.000000000,2023-08-30 17:31:55.000000000,2023-08-30 17:28:25.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-07-27 14:16:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/a84871b135fdf1980555b5c1da194104c332e301', 'message': ""cloud: Convert 'get_volume_limits' to use proxy layer\n\nWe missed this in 1.0.\n\nChange-Id: I01955f42ca54d23c2a89f4e0636312e25f95b41c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2023-07-27 17:16:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/c6d0cc143ee0ccebfe2447bb88391d24abfbf981', 'message': ""cloud: Convert 'get_volume_limits' to use proxy layer\n\nWe missed this in 1.0.\n\nChange-Id: I01955f42ca54d23c2a89f4e0636312e25f95b41c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 3, 'created': '2023-07-28 10:31:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/ea01b798512116966cd6b2d0d31e4b4480c5cd53', 'message': ""cloud: Convert 'get_volume_limits' to use proxy layer\n\nWe missed this in 1.0.\n\nChange-Id: I01955f42ca54d23c2a89f4e0636312e25f95b41c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 4, 'created': '2023-08-29 13:27:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/cf17138f97b22ee625af44eb39d18cd25c2008dd', 'message': ""cloud: Convert 'get_volume_limits' to use proxy layer\n\nWe missed this in 1.0.\n\nChange-Id: I01955f42ca54d23c2a89f4e0636312e25f95b41c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 5, 'created': '2023-08-29 16:29:06.000000000', 'files': ['openstack/block_storage/v3/_proxy.py', 'openstack/cloud/_block_storage.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/d474eb84c605c429bb9cccb166cabbdd1654d73c', 'message': ""cloud: Convert 'get_volume_limits' to use proxy layer\n\nWe missed this in 1.0.\n\nChange-Id: I01955f42ca54d23c2a89f4e0636312e25f95b41c\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",1,889870,d474eb84c605c429bb9cccb166cabbdd1654d73c,20,3,5,15334,,,0,"cloud: Convert 'get_volume_limits' to use proxy layer

We missed this in 1.0.

Change-Id: I01955f42ca54d23c2a89f4e0636312e25f95b41c
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/70/889870/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/cloud/_block_storage.py'],1,a84871b135fdf1980555b5c1da194104c332e301,cleanup, return self.volume.get_limits(**params),"from openstack import proxy # TODO(stephenfin): Convert to use proxy error_msg = ""Failed to get limits"" error_msg = ""{msg} for the project: {project} "".format( msg=error_msg, project=name_or_id ) data = proxy._json_response( self.block_storage.get('/limits', params=params) ) limits = self._get_and_munchify('limits', data) return limits",1,12
openstack%2Fneutron~893184,openstack/neutron,master,I5b4579a96152b8bdb1d34e59fb492c6f2a01b71e,Drop release notes for l3-ext-gw-multihoming and adjacent features,MERGED,2023-08-30 13:35:47.000000000,2023-08-30 17:31:54.000000000,2023-08-30 17:28:28.000000000,"[{'_account_id': 8313}, {'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 13:35:47.000000000', 'files': ['releasenotes/notes/l3-ext-gw-multihoming-99be481ddeaa3a6d.yaml', 'releasenotes/notes/enable-default-route-bfd-and-ecmp-2cbb3be64ee25410.yaml'], 'web_link': 'https://opendev.org/openstack/neutron/commit/c6b6ecc75196bd47ebcea0284e7d714c861fa630', 'message': 'Drop release notes for l3-ext-gw-multihoming and adjacent features\n\nWe did unfortunately not make it into Bobcat, and will try again\nto get it into Caracal.\n\nPartial-Bug: #2002687\nChange-Id: I5b4579a96152b8bdb1d34e59fb492c6f2a01b71e\n'}]",3,893184,c6b6ecc75196bd47ebcea0284e7d714c861fa630,10,3,1,13686,,,0,"Drop release notes for l3-ext-gw-multihoming and adjacent features

We did unfortunately not make it into Bobcat, and will try again
to get it into Caracal.

Partial-Bug: #2002687
Change-Id: I5b4579a96152b8bdb1d34e59fb492c6f2a01b71e
",git fetch https://review.opendev.org/openstack/neutron refs/changes/84/893184/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/l3-ext-gw-multihoming-99be481ddeaa3a6d.yaml', 'releasenotes/notes/enable-default-route-bfd-and-ecmp-2cbb3be64ee25410.yaml']",2,c6b6ecc75196bd47ebcea0284e7d714c861fa630,2023-aa-l3-gw-multihoming,,--- features: - | Add ``enable_default_route_bfd`` and ``enable_default_route_ecmp`` configuration options which control default behavior for enabling BFD and ECMP on default routes for newly created routers. Both configuration options have a default value of 'False' and are only supported with the OVN driver. ,0,14
openstack%2Foctavia~889696,openstack/octavia,master,I7141258bfee69606a6749cd17e524b7932359d7a,Fix error in agent-agent with empty UDP pools in IPv4+IPv6 LBs,MERGED,2023-07-26 11:24:09.000000000,2023-08-30 17:31:07.000000000,2023-08-30 17:29:58.000000000,"[{'_account_id': 11628}, {'_account_id': 22348}, {'_account_id': 32029}, {'_account_id': 34429}, {'_account_id': 36201}]","[{'number': 1, 'created': '2023-07-26 11:24:09.000000000', 'files': ['octavia/amphorae/backends/utils/keepalivedlvs_query.py', 'releasenotes/notes/fix-error-amphora-agent-udp-pools-dual-stack-lb-b298ded551ac97e1.yaml', 'octavia/tests/unit/amphorae/backends/utils/test_keepalivedlvs_query.py'], 'web_link': 'https://opendev.org/openstack/octavia/commit/72f59a34fe85921e67c53011bd5894f07c97dca0', 'message': 'Fix error in agent-agent with empty UDP pools in IPv4+IPv6 LBs\n\nWith dual stack LBs (IPv4+IPv6) and UDP pools, the amphora-agent\ntriggered an exception when a pool contained only IPv4 or only IPv6\nmembers.\nThis commit fixes this issue.\n\nCloses-Bug: #2028751\n\nChange-Id: I7141258bfee69606a6749cd17e524b7932359d7a\n'}]",4,889696,72f59a34fe85921e67c53011bd5894f07c97dca0,12,5,1,29244,,,0,"Fix error in agent-agent with empty UDP pools in IPv4+IPv6 LBs

With dual stack LBs (IPv4+IPv6) and UDP pools, the amphora-agent
triggered an exception when a pool contained only IPv4 or only IPv6
members.
This commit fixes this issue.

Closes-Bug: #2028751

Change-Id: I7141258bfee69606a6749cd17e524b7932359d7a
",git fetch https://review.opendev.org/openstack/octavia refs/changes/96/889696/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia/amphorae/backends/utils/keepalivedlvs_query.py', 'releasenotes/notes/fix-error-amphora-agent-udp-pools-dual-stack-lb-b298ded551ac97e1.yaml', 'octavia/tests/unit/amphorae/backends/utils/test_keepalivedlvs_query.py']",3,72f59a34fe85921e67c53011bd5894f07c97dca0,,"CFG_FILE_TEMPLATE_mixed_no_ipv6_member = ( ""# Configuration for Listener %(listener_id)s\n\n"" ""net_namespace %(ns_name)s\n\n"" ""virtual_server_group ipv4-group {\n"" "" 10.0.0.37 7777\n"" ""}\n\n"" ""virtual_server group ipv4-group {\n"" "" lb_algo rr\n"" "" lvs_method NAT\n"" "" protocol udp\n\n\n"" "" # Configuration for Pool %(pool_id)s\n"" "" # Configuration for Member %(member_id1)s\n"" "" real_server 10.0.0.25 2222 {\n"" "" weight 3\n"" "" MISC_CHECK {\n\n"" "" misc_path \""/usr/bin/check_script.sh\""\n\n"" "" misc_timeout 5\n\n"" "" }\n\n"" "" }\n\n"" "" # Member %(member_id2)s is disabled\n\n"" ""}\n"" ""virtual_server_group ipv6-group {\n"" "" fd79:35e2:9963:0:f816:3eff:fe6d:7a2a 7777\n"" ""}\n\n"" ""virtual_server group ipv6-group {\n"" "" lb_algo rr\n"" "" lvs_method NAT\n"" "" protocol udp\n\n\n"" "" # Configuration for Pool %(pool_id)s\n"" ""}"") self.listener_id_mixed_no_ipv6_member = uuidutils.generate_uuid() cfg_content_mixed_no_ipv6_member = ( CFG_FILE_TEMPLATE_mixed_no_ipv6_member % { 'listener_id': self.listener_id_mixed, 'ns_name': constants.AMPHORA_NAMESPACE, 'pool_id': self.pool_id_mixed, 'member_id1': self.member_id1_v4, 'member_id2': self.member_id2_v4 } ) util.keepalived_lvs_cfg_path( self.listener_id_mixed_no_ipv6_member), cfg_content_mixed_no_ipv6_member)) self.useFixture(test_utils.OpenFixture( # listener for both ipv4 and ipv6, but no member in the ipv6 pool mock_is_running.return_value = True mock_get_listener.return_value = [ self.listener_id_mixed_no_ipv6_member] output_list = list() output_list.append(IPVSADM_OUTPUT_TEMPLATE % { ""listener_ipport"": ""10.0.0.37:7777"", ""member1_ipport"": ""10.0.0.25:2222"", ""member2_ipport"": ""10.0.0.35:3333""}) output_list.append(IPVSADM_STATS_OUTPUT_TEMPLATE % { ""listener_ipport"": ""10.0.0.37:7777"", ""member1_ipport"": ""10.0.0.25:2222"", ""member2_ipport"": ""10.0.0.35:3333""}) mock_check_output.side_effect = output_list res = lvs_query.get_lvs_listeners_stats() # We can check the expected result reference the stats sample, # that means this func can compute the stats info of single listener. expected = {self.listener_id_mixed_no_ipv6_member: { 'status': constants.OPEN, 'stats': {'bin': 6387472, 'stot': 5, 'bout': 7490, 'ereq': 0, 'scur': 0}}} self.assertEqual(expected, res) ",,76,0
openstack%2Fkeystone~892864,openstack/keystone,stable/2023.1,I911fec106178ebf37e004767cf8d0bdc8f001297,Respect cached tokens issued before upgrade,MERGED,2023-08-28 08:07:31.000000000,2023-08-30 17:30:56.000000000,2023-08-30 17:28:31.000000000,"[{'_account_id': 7414}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 32666}, {'_account_id': 34411}]","[{'number': 1, 'created': '2023-08-28 08:07:31.000000000', 'files': ['keystone/common/render_token.py'], 'web_link': 'https://opendev.org/openstack/keystone/commit/50495ae263daee3966dd0192692f7109e9926077', 'message': 'Respect cached tokens issued before upgrade\n\nRight after keystone is upgraded from Zed to 2023.1\nattempt to use previously cached tokens fails with\nAttributeError, as tokens do not have oauth2_thumbprint\nattribute yet.\n\nThus, services misbehave until cache is exipred or flushed.\n\nIn order to prevent this from happening, we use safe\ngetattr() instead of just assuming that attribute is there.\n\nChange-Id: I911fec106178ebf37e004767cf8d0bdc8f001297\nCloses-Bug: #2029134\n(cherry picked from commit 0970481a5017e8896045050a2a4b3f2e00e8a4b0)\n'}]",1,892864,50495ae263daee3966dd0192692f7109e9926077,11,5,1,28619,,,0,"Respect cached tokens issued before upgrade

Right after keystone is upgraded from Zed to 2023.1
attempt to use previously cached tokens fails with
AttributeError, as tokens do not have oauth2_thumbprint
attribute yet.

Thus, services misbehave until cache is exipred or flushed.

In order to prevent this from happening, we use safe
getattr() instead of just assuming that attribute is there.

Change-Id: I911fec106178ebf37e004767cf8d0bdc8f001297
Closes-Bug: #2029134
(cherry picked from commit 0970481a5017e8896045050a2a4b3f2e00e8a4b0)
",git fetch https://review.opendev.org/openstack/keystone refs/changes/64/892864/1 && git format-patch -1 --stdout FETCH_HEAD,['keystone/common/render_token.py'],1,50495ae263daee3966dd0192692f7109e9926077,," # NOTE(noonedeadpunk): We are using getattr as previously cached tokens # won't have the attribute and keystone will fail # with AttributeError for TTL of the cache. token_oauth2_thumbprint = getattr(token, 'oauth2_thumbprint', None) if token_oauth2_thumbprint:", if token.oauth2_thumbprint:,5,1
openstack%2Fopenstacksdk~884500,openstack/openstacksdk,master,I1f9b72cc41339eb25f055c2bab252a6040025500,cloud: Remove dead method,MERGED,2023-05-26 13:12:17.000000000,2023-08-30 17:30:56.000000000,2023-08-30 17:28:19.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-05-26 13:12:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/2133a63b396592969f72536d519e95ec735a3d87', 'message': 'cloud: Remove dead method\n\nChange Ie358fb1e79c7047453807b0b969077996bfc3a23 should have removed\nthis also. Whoops.\n\nChange-Id: I1f9b72cc41339eb25f055c2bab252a6040025500\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 2, 'created': '2023-07-27 14:16:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/f0f5cdbd31b9904c3c03e12088372322031f9e0f', 'message': 'cloud: Remove dead method\n\nChange Ie358fb1e79c7047453807b0b969077996bfc3a23 should have removed\nthis also. Whoops.\n\nChange-Id: I1f9b72cc41339eb25f055c2bab252a6040025500\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 3, 'created': '2023-07-27 17:16:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/0f820ab6912c5beded6be29879cd799e1654034c', 'message': 'cloud: Remove dead method\n\nChange Ie358fb1e79c7047453807b0b969077996bfc3a23 should have removed\nthis also. Whoops.\n\nChange-Id: I1f9b72cc41339eb25f055c2bab252a6040025500\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 4, 'created': '2023-07-28 10:31:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/73e4c334fc226ef9c3bfed3d197efe6affd7f47d', 'message': 'cloud: Remove dead method\n\nChange Ie358fb1e79c7047453807b0b969077996bfc3a23 should have removed\nthis also. Whoops.\n\nChange-Id: I1f9b72cc41339eb25f055c2bab252a6040025500\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}, {'number': 5, 'created': '2023-08-29 13:27:56.000000000', 'files': ['openstack/cloud/openstackcloud.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/2f5c12dab8d7c50a0d4a76e1708589b956c503f8', 'message': 'cloud: Remove dead method\n\nChange Ie358fb1e79c7047453807b0b969077996bfc3a23 should have removed\nthis also. Whoops.\n\nChange-Id: I1f9b72cc41339eb25f055c2bab252a6040025500\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n'}]",2,884500,2f5c12dab8d7c50a0d4a76e1708589b956c503f8,20,3,5,15334,,,0,"cloud: Remove dead method

Change Ie358fb1e79c7047453807b0b969077996bfc3a23 should have removed
this also. Whoops.

Change-Id: I1f9b72cc41339eb25f055c2bab252a6040025500
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/00/884500/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/cloud/openstackcloud.py'],1,2133a63b396592969f72536d519e95ec735a3d87,cleanup,," # TODO(stephenfin): This looks unused? Can we delete it? def _get_identity_location(self): '''Identity resources do not exist inside of projects.''' return utils.Munch( cloud=self.name, region_name=None, zone=None, project=utils.Munch( id=None, name=None, domain_id=None, domain_name=None ), ) ",0,12
openstack%2Fopenstacksdk~889942,openstack/openstacksdk,master,If289e6b83d23c30e57cc81d127b288e3605bd832,cloud: Remove '_get_raw_client',MERGED,2023-07-28 10:31:30.000000000,2023-08-30 17:28:23.000000000,2023-08-30 17:28:23.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-07-28 10:31:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/c8b16898c2f23a600f7215809cd574ea8f932d04', 'message': ""cloud: Remove '_get_raw_client'\n\nWe have removed the final users of this method.\n\nChange-Id: If289e6b83d23c30e57cc81d127b288e3605bd832\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2023-08-29 13:27:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/26505ded0b10a01a4833ba49c3036ddf9443a12a', 'message': ""cloud: Remove '_get_raw_client'\n\nWe have removed the final users of this method.\n\nChange-Id: If289e6b83d23c30e57cc81d127b288e3605bd832\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 3, 'created': '2023-08-29 16:29:06.000000000', 'files': ['openstack/cloud/openstackcloud.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/e8bece4aec3135b39aebf8f1fdca87d19f1bc117', 'message': ""cloud: Remove '_get_raw_client'\n\nWe have removed the final users of this method.\n\nChange-Id: If289e6b83d23c30e57cc81d127b288e3605bd832\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",2,889942,e8bece4aec3135b39aebf8f1fdca87d19f1bc117,15,3,3,15334,,,0,"cloud: Remove '_get_raw_client'

We have removed the final users of this method.

Change-Id: If289e6b83d23c30e57cc81d127b288e3605bd832
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/42/889942/1 && git format-patch -1 --stdout FETCH_HEAD,['openstack/cloud/openstackcloud.py'],1,c8b16898c2f23a600f7215809cd574ea8f932d04,cleanup,," # TODO(shade) This should be replaced with using openstack Connection # object. def _get_raw_client( self, service_type, api_version=None, endpoint_override=None ): return proxy.Proxy( session=self.session, service_type=self.config.get_service_type(service_type), service_name=self.config.get_service_name(service_type), interface=self.config.get_interface(service_type), endpoint_override=self.config.get_endpoint(service_type) or endpoint_override, region_name=self.config.get_region_name(service_type), ) ",0,15
openstack%2Fopenstacksdk~884498,openstack/openstacksdk,master,I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628,cloud: Remove '_orchestration_client',MERGED,2023-05-26 13:12:17.000000000,2023-08-30 17:28:21.000000000,2023-08-30 17:28:21.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 27900}]","[{'number': 1, 'created': '2023-05-26 13:12:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/418b61d832d90ab80c9891627f1231ace05c8616', 'message': ""cloud: Remove '_orchestration_client'\n\nThis is one of the final two users of the raw clients. Replace the use\nof raw clients with a REST request using our normal clients.\n\nChange-Id: I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 2, 'created': '2023-07-27 14:16:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/a0d46349069efd3408037846ade6dbb955774f53', 'message': ""cloud: Remove '_orchestration_client'\n\nThis is one of the final two users of the raw clients. Replace the use\nof raw clients with a REST request using our normal clients.\n\nChange-Id: I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 3, 'created': '2023-07-27 17:16:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/b7d227154bd3fd82845ac43b3d0733eea5cfde0c', 'message': ""cloud: Remove '_orchestration_client'\n\nReplace the use of raw clients with a REST request using our normal\nclients.\n\nChange-Id: I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 4, 'created': '2023-07-28 10:31:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/fd0ded3221cbe5beb581c7518edfdbea6c633a21', 'message': ""cloud: Remove '_orchestration_client'\n\nReplace the use of raw clients with a REST request using our normal\nclients.\n\nChange-Id: I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 5, 'created': '2023-08-29 13:27:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/b6dc387f390a3ea327bb44ef78e4e704bfc30138', 'message': ""cloud: Remove '_orchestration_client'\n\nReplace the use of raw clients with a REST request using our normal\nclients.\n\nChange-Id: I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}, {'number': 6, 'created': '2023-08-29 16:29:06.000000000', 'files': ['openstack/cloud/_orchestration.py', 'openstack/orchestration/util/event_utils.py'], 'web_link': 'https://opendev.org/openstack/openstacksdk/commit/fc9ca79242647f80ed6390b99fdfb75b46a960a5', 'message': ""cloud: Remove '_orchestration_client'\n\nReplace the use of raw clients with a REST request using our normal\nclients.\n\nChange-Id: I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628\nSigned-off-by: Stephen Finucane <stephenfin@redhat.com>\n""}]",2,884498,fc9ca79242647f80ed6390b99fdfb75b46a960a5,21,3,6,15334,,,0,"cloud: Remove '_orchestration_client'

Replace the use of raw clients with a REST request using our normal
clients.

Change-Id: I320ea0f5b1a8147c8e059844fdb9ec3b8f9f2628
Signed-off-by: Stephen Finucane <stephenfin@redhat.com>
",git fetch https://review.opendev.org/openstack/openstacksdk refs/changes/98/884498/1 && git format-patch -1 --stdout FETCH_HEAD,"['openstack/cloud/_orchestration.py', 'openstack/orchestration/util/event_utils.py']",2,418b61d832d90ab80c9891627f1231ace05c8616,cleanup," # TODO(stephenfin): Convert to use real resources data = cloud.orchestration.get( f'/stacks/{stack_id}/events', params=params, ).json()","from openstack import proxy # TODO(stephenfin): Convert to use proxy data = proxy._json_response( cloud._orchestration_client.get( '/stacks/{id}/events'.format(id=stack_id), params=params, ) )",5,21
openstack%2Fkolla-ansible~886747,openstack/kolla-ansible,master,I0401bfc03cd31d72c5a2ae0a111889d5c29a8aa2,Use better default bind address for ironic-tftp,MERGED,2023-06-22 12:53:05.000000000,2023-08-30 17:04:56.000000000,2023-08-30 17:03:38.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 27339}, {'_account_id': 28595}]","[{'number': 1, 'created': '2023-06-22 12:53:05.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/50112267dd1d9d7eff18f50f930c71a06508cd1f', 'message': 'Use better default bind address for ironic-tftp\n\nironic tftp service binds on 0.0.0.0. This may be\nan issue in some setup. This patch propose a better\ndefault, such as using the same listen address as\nthe dnsmasq service\n\nChange-Id: I0401bfc03cd31d72c5a2ae0a111889d5c29a8aa2\n'}, {'number': 2, 'created': '2023-06-22 13:12:59.000000000', 'files': ['ansible/group_vars/all.yml', 'ansible/roles/ironic/defaults/main.yml', 'ansible/roles/ironic/templates/ironic-tftp.json.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/81948f5b16babde3b77af4c8af5ee9dbb8d7fcc3', 'message': 'Use better default bind address for ironic-tftp\n\nironic tftp service binds on 0.0.0.0. This may be\nan issue in some setup. This patch propose a better\ndefault, such as using the same listen address as\nthe dnsmasq service\n\nCloses-Bug: #2024664\n\nChange-Id: I0401bfc03cd31d72c5a2ae0a111889d5c29a8aa2\n'}]",7,886747,81948f5b16babde3b77af4c8af5ee9dbb8d7fcc3,18,5,2,28338,,,0,"Use better default bind address for ironic-tftp

ironic tftp service binds on 0.0.0.0. This may be
an issue in some setup. This patch propose a better
default, such as using the same listen address as
the dnsmasq service

Closes-Bug: #2024664

Change-Id: I0401bfc03cd31d72c5a2ae0a111889d5c29a8aa2
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/47/886747/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/group_vars/all.yml', 'ansible/roles/ironic/defaults/main.yml', 'ansible/roles/ironic/templates/ironic-tftp.json.j2']",3,50112267dd1d9d7eff18f50f930c71a06508cd1f,betterdefaultfortftpbindaddress," ""command"": ""/usr/sbin/in.tftpd --verbose --foreground --user nobody --address {{ ironic_tftp_listen_address }}:69 --map-file /map-file /var/lib/ironic/tftpboot"","," ""command"": ""/usr/sbin/in.tftpd --verbose --foreground --user nobody --address 0.0.0.0:69 --map-file /map-file /var/lib/ironic/tftpboot"",",5,1
openstack%2Fopenstack-ansible-galera_server~892879,openstack/openstack-ansible-galera_server,stable/2023.1,I99d993a7c466cb744136bd06f4ab2e21c2569151,Remove galera-4 package during upgrades to force version up,MERGED,2023-08-30 10:13:52.000000000,2023-08-30 16:27:40.000000000,2023-08-30 16:26:37.000000000,"[{'_account_id': 22348}, {'_account_id': 28619}, {'_account_id': 31542}]","[{'number': 1, 'created': '2023-08-30 10:13:52.000000000', 'files': ['vars/debian.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-galera_server/commit/da20aed93e6cdd2c52a72cd1bcb78fb10eef701e', 'message': 'Remove galera-4 package during upgrades to force version up\n\nCurrent upgrades leave the galera-4 package in place which\ncan cause incompatibilities when the mariadb binaries are\nupdated.\n\nBy forcing removal of this package during upgrades it should\nbe re-installed with a version matching the rest of the\nmariadb packages.\n\nRHEL distros already have a removal step for galera-*\n\nChange-Id: I99d993a7c466cb744136bd06f4ab2e21c2569151\nCloses-Bug: #2028946\n(cherry picked from commit 27cd830c654dc7dbb8930d208cfbcebf72637503)\n'}]",0,892879,da20aed93e6cdd2c52a72cd1bcb78fb10eef701e,8,3,1,28619,,,0,"Remove galera-4 package during upgrades to force version up

Current upgrades leave the galera-4 package in place which
can cause incompatibilities when the mariadb binaries are
updated.

By forcing removal of this package during upgrades it should
be re-installed with a version matching the rest of the
mariadb packages.

RHEL distros already have a removal step for galera-*

Change-Id: I99d993a7c466cb744136bd06f4ab2e21c2569151
Closes-Bug: #2028946
(cherry picked from commit 27cd830c654dc7dbb8930d208cfbcebf72637503)
",git fetch https://review.opendev.org/openstack/openstack-ansible-galera_server refs/changes/79/892879/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/debian.yml'],1,da20aed93e6cdd2c52a72cd1bcb78fb10eef701e,bug/2028946-stable/2023.1, - galera-*,,1,0
openstack%2Fmetalsmith~892965,openstack/metalsmith,master,I7382a2868d911c2f7944cbf63ce549d9cec9450c,Remove CentOS Stream 8 jobs,MERGED,2023-08-28 13:39:51.000000000,2023-08-30 16:15:10.000000000,2023-08-30 16:12:14.000000000,"[{'_account_id': 10342}, {'_account_id': 22348}, {'_account_id': 23851}, {'_account_id': 24245}]","[{'number': 1, 'created': '2023-08-28 13:39:51.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/metalsmith/commit/968c9a0608970ef255a6228092159dd7142d8759', 'message': ""Remove CentOS Stream 8 jobs\n\nThey've been supersided by CS9 jobs\n\nChange-Id: I7382a2868d911c2f7944cbf63ce549d9cec9450c\n""}]",5,892965,968c9a0608970ef255a6228092159dd7142d8759,17,4,1,23851,,,0,"Remove CentOS Stream 8 jobs

They've been supersided by CS9 jobs

Change-Id: I7382a2868d911c2f7944cbf63ce549d9cec9450c
",git fetch https://review.opendev.org/openstack/metalsmith refs/changes/65/892965/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,968c9a0608970ef255a6228092159dd7142d8759,remove-cs8,," name: metalsmith-integration-glance-centos8-uefi description: | Integration job using Glance as image source and CentOS8 with local boot and UEFI. Images are built with diskimage-builder. parent: metalsmith-integration-base timeout: 8500 run: playbooks/integration/centos8-integration.yaml vars: devstack_localrc: # NOTE(dtantsur): we need to use streaming, otherwise the image won't # fit in RAM. IRONIC_AGENT_IMAGE_DOWNLOAD_SOURCE: http IRONIC_VM_SPECS_RAM: 3072 devstack_services: # Since we're using streaming, try non-swift backends. s-account: false s-container: false s-object: false s-proxy: false configure_instance_user: metalsmith metalsmith_precreate_port: false metalsmith_partition_image: test-centos-partition metalsmith_whole_disk_image: test-centos-wholedisk metalsmith_swap_size: 1024 metalsmith_traits: [CUSTOM_GOLD] - job: name: metalsmith-integration-glance-centos8-legacy parent: metalsmith-integration-glance-centos8-uefi vars: devstack_localrc: IRONIC_BOOT_MODE: bios metalsmith_boot_mode: bios - job: - metalsmith-integration-glance-centos8-uefi: voting: false - metalsmith-integration-glance-centos8-legacy: voting: false",0,39
openstack%2Fkolla~891098,openstack/kolla,master,I14ba7e0319b7eb0390361d397d4baad0e9a3f0b1,Add server-status handler to Rocky/Centos Apache conf,MERGED,2023-08-10 19:10:07.000000000,2023-08-30 16:09:24.000000000,2023-08-30 16:08:15.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 27339}, {'_account_id': 32553}]","[{'number': 1, 'created': '2023-08-10 19:10:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/5984fbb2e284fe4917e33492d3023fe61b8c6ba2', 'message': 'Add server-status handler to Rocky/Centos Apache conf\n\nThis added to make Rocky/Centos similar to Ubuntu/Debian\nto provide /server-status handler for local monitoring of the Apache.\nSince I3ec1af6353c3ecc64589599abe375b0ae9b14d5c is merged it safe\nto add this change.\n\nChange-Id: I14ba7e0319b7eb0390361d397d4baad0e9a3f0b1\nSigned-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>\n'}, {'number': 2, 'created': '2023-08-18 14:11:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla/commit/55c8391eb21b6f8b85ab47c89ef3ff07a8ede012', 'message': 'Add server-status handler to Rocky/Centos Apache conf\n\nThis added to make Rocky/Centos similar to Ubuntu/Debian\nto provide /server-status handler for local monitoring of the Apache.\nSince I3ec1af6353c3ecc64589599abe375b0ae9b14d5c is merged it safe\nto add this change.\n\nChange-Id: I14ba7e0319b7eb0390361d397d4baad0e9a3f0b1\nSigned-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>\n'}, {'number': 3, 'created': '2023-08-22 13:02:46.000000000', 'files': ['docker/base/httpd_setup.sh'], 'web_link': 'https://opendev.org/openstack/kolla/commit/daf9fdd3a6e96d417f19440d59452e3b271ec9d9', 'message': 'Add server-status handler to Rocky/Centos Apache conf\n\nThis added to make Rocky/Centos similar to Ubuntu/Debian\nto provide /server-status handler for local monitoring of the Apache.\nSince I3ec1af6353c3ecc64589599abe375b0ae9b14d5c is merged it safe\nto add this change.\n\nChange-Id: I14ba7e0319b7eb0390361d397d4baad0e9a3f0b1\nSigned-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>\n'}]",5,891098,daf9fdd3a6e96d417f19440d59452e3b271ec9d9,23,6,3,14200,,,0,"Add server-status handler to Rocky/Centos Apache conf

This added to make Rocky/Centos similar to Ubuntu/Debian
to provide /server-status handler for local monitoring of the Apache.
Since I3ec1af6353c3ecc64589599abe375b0ae9b14d5c is merged it safe
to add this change.

Change-Id: I14ba7e0319b7eb0390361d397d4baad0e9a3f0b1
Signed-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>
",git fetch https://review.opendev.org/openstack/kolla refs/changes/98/891098/1 && git format-patch -1 --stdout FETCH_HEAD,['docker/base/httpd_setup.sh'],1,5984fbb2e284fe4917e33492d3023fe61b8c6ba2,add-server-status-redhat," # NOTE(mmalchuk): This added to make Rocky/Centos similar to Ubuntu/Debian # to provide /server-status handler for local monitoring of the Apache. # The module already loaded in the /etc/httpd/conf.modules.d/00-base.conf. cat << EOF >/etc/httpd/conf.modules.d/99-server-status.conf <Location ""/server-status""> SetHandler server-status Require local </Location> EOF",,9,0
openstack%2Fironic~892606,openstack/ironic,master,I0d472ec90e89a0f5b9957a91a23489e7fe8aeb26,Add a way to set up a tftp without xinetd,NEW,2023-08-25 04:26:51.000000000,2023-08-30 16:08:51.000000000,,"[{'_account_id': 11655}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-25 04:26:51.000000000', 'files': ['doc/source/install/configure-pxe.rst'], 'web_link': 'https://opendev.org/openstack/ironic/commit/30ad17a8471fb3fb5c8ae85c6369242ee76c2297', 'message': 'Add a way to set up a tftp without xinetd\n\nFor RHEL9/CentOS9 and above, xinetd is not available.\nAs an example of alternatives, Add a way to set up\na tftp server by using systemd socket.\n\nChange-Id: I0d472ec90e89a0f5b9957a91a23489e7fe8aeb26\n'}]",3,892606,30ad17a8471fb3fb5c8ae85c6369242ee76c2297,4,2,1,35307,,,0,"Add a way to set up a tftp without xinetd

For RHEL9/CentOS9 and above, xinetd is not available.
As an example of alternatives, Add a way to set up
a tftp server by using systemd socket.

Change-Id: I0d472ec90e89a0f5b9957a91a23489e7fe8aeb26
",git fetch https://review.opendev.org/openstack/ironic refs/changes/06/892606/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/install/configure-pxe.rst'],1,30ad17a8471fb3fb5c8ae85c6369242ee76c2297,," .. note:: For RHEL9/CentOS9 and above, xinetd is not avaiable. As an alternative, set up a tftp server by using systemd socket. Install tftp-server:: sudo dnf install tftp-server .. note:: If systemd socket is used for RHEL9/CentOS9, edit ``/usr/lib/systemd/system/tftp.socket``. For example:: [Unit] Description=Tftp Server Activation Socket [Socket] ListenDatagram=69 [Install] WantedBy=sockets.target Edit ``/usr/lib/systemd/system/tftp.service``. For example:: [Unit] Description=Tftp Server Requires=tftp.socket [Service] ExecStart=/usr/sbin/in.tftpd -v -v -v -v -v --map-file /tftpboot/map-file /tftpboot StandardInput=socket User=root Group=root [Install] WantedBy=tftp.socket Enable and start tftp socket:: sudo systemctl enable tftp.socket sudo systemctl start tftp.socket ",,42,0
openstack%2Fmanila~891019,openstack/manila,master,I4b8e9344c36aa874b95fce3e0989d34b690159d6,Include share_type information in notifications,MERGED,2023-08-10 09:21:43.000000000,2023-08-30 16:07:31.000000000,2023-08-30 14:01:34.000000000,"[{'_account_id': 6413}, {'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}]","[{'number': 1, 'created': '2023-08-10 09:21:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/ea6bf3fcc719521d093c6b28527d6acbad55d4e0', 'message': ""Include share_type information in notifications\n\nFor the purposes of billing, it's useful to provide the information\nabout share type in oslo.messaging notifications.\n\nDifferent share types can have different quality of service, limits,\nquotas or even be backed by entirely different backends, so it makes\nsense to bill shares of different types differently. For example,\na customer may want to choose to create a share with higher performace\nvia an appropriate share type and thus be charged more for such a share.\n\nChange-Id: I4b8e9344c36aa874b95fce3e0989d34b690159d6\nSigned-off-by: Mariusz Adamski <mariusz.adamski@ovhcloud.com>\n""}, {'number': 2, 'created': '2023-08-18 06:54:27.000000000', 'files': ['manila/share/utils.py', 'releasenotes/notes/add-share-type-info-to-notifications-7fb4597642a6e8e5.yaml', 'manila/tests/api/v2/test_share_transfer.py', 'manila/tests/share/test_manager.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/94b71a5faf5fe161e2a74b36f99d6a0bd17b32a5', 'message': ""Include share_type information in notifications\n\nFor the purposes of billing, it's useful to provide the information\nabout share type in oslo.messaging notifications.\n\nDifferent share types can have different quality of service, limits,\nquotas or even be backed by entirely different backends, so it makes\nsense to bill shares of different types differently. For example,\na customer may want to choose to create a share with higher performace\nvia an appropriate share type and thus be charged more for such a share.\n\nChange-Id: I4b8e9344c36aa874b95fce3e0989d34b690159d6\nSigned-off-by: Mariusz Adamski <mariusz.adamski@ovhcloud.com>\n""}]",10,891019,94b71a5faf5fe161e2a74b36f99d6a0bd17b32a5,37,4,2,36240,,,0,"Include share_type information in notifications

For the purposes of billing, it's useful to provide the information
about share type in oslo.messaging notifications.

Different share types can have different quality of service, limits,
quotas or even be backed by entirely different backends, so it makes
sense to bill shares of different types differently. For example,
a customer may want to choose to create a share with higher performace
via an appropriate share type and thus be charged more for such a share.

Change-Id: I4b8e9344c36aa874b95fce3e0989d34b690159d6
Signed-off-by: Mariusz Adamski <mariusz.adamski@ovhcloud.com>
",git fetch https://review.opendev.org/openstack/manila refs/changes/19/891019/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/share/utils.py', 'manila/tests/api/v2/test_share_transfer.py', 'manila/tests/share/test_manager.py']",3,ea6bf3fcc719521d093c6b28527d6acbad55d4e0,ceilometer-integration-share-type-info," share_type = db_utils.create_share_type() share_type_id=share_type['id'], share_type_id=share_type['id'], share_type_id=share_type['id'], share_type_id=share_type['id'], share_type_id=share_type['id'], share_type_id=share_type['id'], id='fake_id_7', share_type_id=share_type['id'], status=constants.STATUS_CREATING_FROM_SNAPSHOT, share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(replication_type='writable', share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share( share_network_id=share_network_id, share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share( share_network_id=share_net['id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_network_id=share_network['id'], size=1, share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_network_id='fake-net-id', share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_type_id=share_type['id'], share_type = db_utils.create_share_type() share = db_utils.create_share(share_network_id=share_net['id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_type_id=share_type['id'], share_type = db_utils.create_share_type() share_type_id=share_type['id'], share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(availability_zone=None, share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_server_id=share_srv['id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_server_id=share_srv['id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_server_id=share_srv['id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_server_id=share_srv['id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share_server_id=share_srv['id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type_id=share_type['id'], share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) user_id=share['user_id'], share_type_id=share_type['id']) share_type = db_utils.create_share_type() share = db_utils.create_share(size=2, share_type_id=share_type['id']) share_type_id=share_type['id'], user_id=share['user_id'], share_type_id=share_type['id'], user_id=share['user_id'], share_type = db_utils.create_share_type() share = db_utils.create_share(size=size, share_type_id=share_type['id']) share_type_id=share_type['id'], share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) share_type_id=share_type['id'], user_id=share['user_id'], share_type_id=share_type['id'], user_id=share['user_id'], share_type = db_utils.create_share_type() share = db_utils.create_share(share_type_id=share_type['id']) 'share_type_id': share_type['id'], share_type_id=share_type['id'], user_id=share['user_id'],"," id='fake_id_7', status=constants.STATUS_CREATING_FROM_SNAPSHOT, share = db_utils.create_share() share = db_utils.create_share() share = db_utils.create_share() share = db_utils.create_share() share = db_utils.create_share() share = db_utils.create_share() share = db_utils.create_share(replication_type='writable') share = db_utils.create_share(share_network_id=share_network_id) share = db_utils.create_share(share_network_id=share_net['id']) share_network_id=share_network['id'], size=1) share = db_utils.create_share(share_network_id='fake-net-id') share = db_utils.create_share(share_network_id=share_net['id']) share = db_utils.create_share() share = db_utils.create_share() share = db_utils.create_share() share = db_utils.create_share(availability_zone=None) share_server_id=share_srv['id']) share_server_id=share_srv['id']) share_server_id=share_srv['id']) share_server_id=share_srv['id']) share_server_id=share_srv['id']) share = db_utils.create_share() share_type_id=None, share = db_utils.create_share() user_id=share['user_id'], share_type_id=None) share = db_utils.create_share(size=2) share_type_id=None, user_id=share['user_id'], share_type_id=None, user_id=share['user_id'], share = db_utils.create_share(size=size) share_type_id=None, share = db_utils.create_share() share_type_id=None, user_id=share['user_id'], share_type_id=None, user_id=share['user_id'], share = db_utils.create_share() 'share_type_id': None, share_type_id=None, user_id=share['user_id'],",97,39
openstack%2Fmagnum-tempest-plugin~890507,openstack/magnum-tempest-plugin,master,I7c735a461440bc1222f2f56d709e738c7bfde365,Cleanup py27 support,MERGED,2023-08-04 07:02:35.000000000,2023-08-30 15:25:50.000000000,2023-08-30 15:25:50.000000000,"[{'_account_id': 8064}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-08-04 07:02:35.000000000', 'files': ['setup.py'], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/c471391f3559d7c765341053f7e6d7e7441df748', 'message': ""Cleanup py27 support\n\nThis repo is now testing only with Python 3, so let's make\na few cleanups:\n- Remove python 2.7 stanza from setup.py\n\nChange-Id: I7c735a461440bc1222f2f56d709e738c7bfde365\n""}]",0,890507,c471391f3559d7c765341053f7e6d7e7441df748,7,3,1,35058,,,0,"Cleanup py27 support

This repo is now testing only with Python 3, so let's make
a few cleanups:
- Remove python 2.7 stanza from setup.py

Change-Id: I7c735a461440bc1222f2f56d709e738c7bfde365
",git fetch https://review.opendev.org/openstack/magnum-tempest-plugin refs/changes/07/890507/1 && git format-patch -1 --stdout FETCH_HEAD,['setup.py'],1,c471391f3559d7c765341053f7e6d7e7441df748,,,"# THIS FILE IS MANAGED BY THE GLOBAL REQUIREMENTS REPO - DO NOT EDIT# In python < 2.7.4, a lazy loading of package `pbr` will break # setuptools if some other modules registered functions in `atexit`. # solution from: http://bugs.python.org/issue15881#msg170215 try: import multiprocessing # noqa except ImportError: pass ",0,9
openstack%2Fpython-aodhclient~891814,openstack/python-aodhclient,master,Ic519efa2113036dc41c4f14a653874760f9c3615,DNM: dummy change to test gate health,ABANDONED,2023-08-17 15:04:05.000000000,2023-08-30 15:25:39.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 15:04:05.000000000', 'files': ['aodhclient/i18n.py'], 'web_link': 'https://opendev.org/openstack/python-aodhclient/commit/293769b474797927288465420d1fb5cb88bfc265', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: Ic519efa2113036dc41c4f14a653874760f9c3615\n'}]",1,891814,293769b474797927288465420d1fb5cb88bfc265,5,1,1,17685,,,0,"DNM: dummy change to test gate health

Change-Id: Ic519efa2113036dc41c4f14a653874760f9c3615
",git fetch https://review.opendev.org/openstack/python-aodhclient refs/changes/14/891814/1 && git format-patch -1 --stdout FETCH_HEAD,['aodhclient/i18n.py'],1,293769b474797927288465420d1fb5cb88bfc265,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Foslo.messaging~891744,openstack/oslo.messaging,stable/yoga,Ic94323658c89df1c1ff32f511ca23502317d0f00,Only allow safe context fields in notifications,MERGED,2023-08-17 14:09:44.000000000,2023-08-30 15:24:57.000000000,2023-08-29 16:04:46.000000000,"[{'_account_id': 15334}, {'_account_id': 22348}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-17 14:09:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/86a256949671461025d38330641f3d210142d688', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nRelated-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}, {'number': 2, 'created': '2023-08-28 14:57:34.000000000', 'files': ['oslo_messaging/tests/notify/test_notifier.py', 'oslo_messaging/tests/notify/test_listener.py', 'oslo_messaging/notify/notifier.py'], 'web_link': 'https://opendev.org/openstack/oslo.messaging/commit/8ee7638a860c48785d94bfda8d336b6239da5013', 'message': 'Only allow safe context fields in notifications\n\nPublishing a fully hydrated context object in a notification would give\nsomeone with access to that notification the ability to impersonate the\noriginal actor through inclusion of sensitive fields.\n\nNow, instead, we pare down the context object to the bare minimum before\npassing it for serialization in notification workflows.\n\nCloses-bug: 2030976\nChange-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00\n(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)\n'}]",1,891744,8ee7638a860c48785d94bfda8d336b6239da5013,13,3,2,10342,,,0,"Only allow safe context fields in notifications

Publishing a fully hydrated context object in a notification would give
someone with access to that notification the ability to impersonate the
original actor through inclusion of sensitive fields.

Now, instead, we pare down the context object to the bare minimum before
passing it for serialization in notification workflows.

Closes-bug: 2030976
Change-Id: Ic94323658c89df1c1ff32f511ca23502317d0f00
(cherry picked from commit 1b315615e7dc61dbf845bd663560fc8d5a18fa09)
",git fetch https://review.opendev.org/openstack/oslo.messaging refs/changes/44/891744/1 && git format-patch -1 --stdout FETCH_HEAD,"['oslo_messaging/tests/notify/test_notifier.py', 'oslo_messaging/tests/notify/test_listener.py', 'oslo_messaging/notify/notifier.py']",3,86a256949671461025d38330641f3d210142d688,,"def _sanitize_context(ctxt): # NOTE(JayF): The below values are in the same order they are in # oslo_context.context.RequestContext.__init__() safe_keys = ( 'user_id', 'project_id', 'domain_id', 'user_domain_id', 'project_domain_id', 'request_id', 'roles', 'user_name', 'project_name', 'domain_name', 'user_domain_name', 'project_domain_name', 'service_user_id', 'service_user_domain_id', 'service_user_domain_name', 'service_project_id', 'service_project_name', 'service_project_domain_id', 'service_project_domain_name', 'service_roles', 'global_request_id', 'system_scope', # NOTE(JayF) These have been renamed but may show up in notifications 'user', 'domain', 'user_domain', 'project_domain', ) ctxt_dict = ctxt if isinstance(ctxt, dict) else ctxt.to_dict() safe_dict = {k: v for k, v in ctxt_dict.items() if k in safe_keys} if ctxt_dict is ctxt: return safe_dict else: return ctxt.__class__.from_dict(safe_dict) # NOTE(JayF): We must remove secure information from notification # payloads, otherwise we risk sending sensitive creds # to a notification bus. safe_ctxt = _sanitize_context(ctxt) ctxt = self._serializer.serialize_context(safe_ctxt)", ctxt = self._serializer.serialize_context(ctxt),223,25
openstack%2Fmistral-lib~891791,openstack/mistral-lib,master,Ie0c0f897cdda185c2bfe62f3c3f616b9aa6bf6f2,DNM: dummy change to test gate health,ABANDONED,2023-08-17 14:57:33.000000000,2023-08-30 15:22:43.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 14:57:33.000000000', 'files': ['mistral_lib/exceptions.py'], 'web_link': 'https://opendev.org/openstack/mistral-lib/commit/64a87aa443d9084512b2a61f058f917767f2b412', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: Ie0c0f897cdda185c2bfe62f3c3f616b9aa6bf6f2\n'}]",1,891791,64a87aa443d9084512b2a61f058f917767f2b412,5,1,1,17685,,,0,"DNM: dummy change to test gate health

Change-Id: Ie0c0f897cdda185c2bfe62f3c3f616b9aa6bf6f2
",git fetch https://review.opendev.org/openstack/mistral-lib refs/changes/91/891791/1 && git format-patch -1 --stdout FETCH_HEAD,['mistral_lib/exceptions.py'],1,64a87aa443d9084512b2a61f058f917767f2b412,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Fmistral-lib~869561,openstack/mistral-lib,master,I6cf77cff4f5aa540ce0c8c470071969612b1abc9,DNM: CI health check,ABANDONED,2023-01-09 13:14:38.000000000,2023-08-30 15:14:21.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-01-09 13:14:38.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/mistral-lib/commit/1b40e9b8432f75a00cd95d0c1f65ef282865c68d', 'message': 'DNM: CI health check\n\nChange-Id: I6cf77cff4f5aa540ce0c8c470071969612b1abc9\n'}, {'number': 2, 'created': '2023-01-10 08:30:50.000000000', 'files': ['mistral_lib/__init__.py'], 'web_link': 'https://opendev.org/openstack/mistral-lib/commit/7889a014cace37fd435173666ab48a27b1f4819b', 'message': 'DNM: CI health check\n\nChange-Id: I6cf77cff4f5aa540ce0c8c470071969612b1abc9\n'}]",1,869561,7889a014cace37fd435173666ab48a27b1f4819b,6,1,2,17685,,,0,"DNM: CI health check

Change-Id: I6cf77cff4f5aa540ce0c8c470071969612b1abc9
",git fetch https://review.opendev.org/openstack/mistral-lib refs/changes/61/869561/1 && git format-patch -1 --stdout FETCH_HEAD,['mistral_lib/__init__.py'],1,1b40e9b8432f75a00cd95d0c1f65ef282865c68d,inactive-projects-ci-test,# dummy change,,1,0
openstack%2Fpython-keystoneclient~891824,openstack/python-keystoneclient,master,I53c6fdb7a9cb904b93f73cd5de439bd530508c9c,DNM: dummy change to test gate health,ABANDONED,2023-08-17 15:07:38.000000000,2023-08-30 15:12:44.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-17 15:07:38.000000000', 'files': ['keystoneclient/i18n.py'], 'web_link': 'https://opendev.org/openstack/python-keystoneclient/commit/74e13e271c67b7f976d1d7d4b68048707c21ff34', 'message': 'DNM: dummy change to test gate health\n\nChange-Id: I53c6fdb7a9cb904b93f73cd5de439bd530508c9c\n'}]",1,891824,74e13e271c67b7f976d1d7d4b68048707c21ff34,5,1,1,17685,,,0,"DNM: dummy change to test gate health

Change-Id: I53c6fdb7a9cb904b93f73cd5de439bd530508c9c
",git fetch https://review.opendev.org/openstack/python-keystoneclient refs/changes/24/891824/1 && git format-patch -1 --stdout FETCH_HEAD,['keystoneclient/i18n.py'],1,74e13e271c67b7f976d1d7d4b68048707c21ff34,release-health-check-cwi-bobcat,# dummy change,,1,0
openstack%2Fmagnum-tempest-plugin~876045,openstack/magnum-tempest-plugin,master,I847efff138dc4c3dbae686310221e1dfd0423587,Add clients to tempest plugins,MERGED,2023-03-02 09:49:07.000000000,2023-08-30 15:03:20.000000000,2023-08-30 15:03:20.000000000,"[{'_account_id': 1004}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-03-02 09:49:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/cd15947ab797062d157fee7727137afbd3b755d0', 'message': '[WIP] Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 2, 'created': '2023-03-03 09:24:12.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/02fda8c3bf36670c4edb2da580ecfcac8d954b6d', 'message': '[WIP] Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 3, 'created': '2023-03-03 10:46:51.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/4571aad9cd9f292837b2992668687e6bee9008e6', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 4, 'created': '2023-03-04 08:35:43.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/93da7c68d8f15c176e4955e5d5e0451eefe8caba', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 5, 'created': '2023-03-04 09:13:13.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/0ef075b88a857bba34c12004755f9a137bea8029', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 6, 'created': '2023-03-04 10:16:15.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/2daa2269b1eaf31c7d0fcb68c749170cd788982a', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 7, 'created': '2023-03-04 13:13:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/db34db76b67e3e35347d87409cb9e030ec2c9e81', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 8, 'created': '2023-03-04 13:24:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/a854dc4b74fa2303741852e57650a125a9629658', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 9, 'created': '2023-03-04 16:05:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/50f5e8a409de74bc2db9dd2d7b63a7f8fed6451e', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 10, 'created': '2023-03-09 08:01:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/0f3d9acea5a9835575686b099f520dd5c41a19af', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 11, 'created': '2023-03-09 17:29:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/2cccb194db67c7a89d50d211c500f1b3f0283a06', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 12, 'created': '2023-03-10 05:04:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/18ca6661162d92fe09bb706464276eaf84bf6877', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 13, 'created': '2023-03-10 06:27:42.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/dacfb23ad7075c43c29749ab8071e845eddedc3f', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 14, 'created': '2023-03-10 07:49:02.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/3bbd9d3398c5328c7a47945a1d11dbb734f91f56', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 15, 'created': '2023-06-29 09:48:44.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/a2a3766fa72684f20052c1d8d142440966eede6a', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}, {'number': 16, 'created': '2023-07-18 06:20:47.000000000', 'files': ['magnum_tempest_plugin/plugin.py', 'magnum_tempest_plugin/common/client.py', 'magnum_tempest_plugin/tests/api/v1/clients/__init__.py', 'magnum_tempest_plugin/config.py'], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/89cba9b96cf30f9aa90b9ae471a6ba30cb99c427', 'message': 'Add clients to tempest plugins\n\nChange-Id: I847efff138dc4c3dbae686310221e1dfd0423587\n'}]",9,876045,89cba9b96cf30f9aa90b9ae471a6ba30cb99c427,38,3,16,12404,,,0,"Add clients to tempest plugins

Change-Id: I847efff138dc4c3dbae686310221e1dfd0423587
",git fetch https://review.opendev.org/openstack/magnum-tempest-plugin refs/changes/45/876045/1 && git format-patch -1 --stdout FETCH_HEAD,"['magnum_tempest_plugin/tests/api/base.py', 'magnum_tempest_plugin/plugin.py', 'magnum_tempest_plugin/tests/api/v1/clients/__init__.py', 'magnum_tempest_plugin/tests/api/v1/test_cluster_template_admin.py']",4,cd15947ab797062d157fee7727137afbd3b755d0,secure-rbac," credentials = ('admin', 'primary') ",,41,1
openstack%2Fcharm-ceph-fs~892597,openstack/charm-ceph-fs,stable/quincy.2,I4b117272f68a27732809d0dddc31ac9cf69c60d9,Add docs key and point at Discourse,MERGED,2023-08-24 19:07:02.000000000,2023-08-30 15:02:54.000000000,2023-08-30 15:02:54.000000000,"[{'_account_id': 20648}, {'_account_id': 22348}, {'_account_id': 33717}]","[{'number': 1, 'created': '2023-08-24 19:07:02.000000000', 'files': ['src/metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-ceph-fs/commit/968255572dcd5ecd79711056b0ceb1b72dce0f2b', 'message': ""Add docs key and point at Discourse\n\nAdd the 'docs' key and point it at a Discourse topic\npreviously populated with the charm's README contents.\n\nWhen the new charm revision is released to the Charmhub,\nthis Discourse-based content will be displayed there. In\nthe absense of the this new key, the Charmhub's default\nbehaviour is to display the value of the charm's\n'description' key.\n\nChange-Id: I4b117272f68a27732809d0dddc31ac9cf69c60d9\n(cherry picked from commit 4210d634e7169a0c499eecd49b0f4825f28de81e)\n""}]",1,892597,968255572dcd5ecd79711056b0ceb1b72dce0f2b,7,3,1,30561,,,0,"Add docs key and point at Discourse

Add the 'docs' key and point it at a Discourse topic
previously populated with the charm's README contents.

When the new charm revision is released to the Charmhub,
this Discourse-based content will be displayed there. In
the absense of the this new key, the Charmhub's default
behaviour is to display the value of the charm's
'description' key.

Change-Id: I4b117272f68a27732809d0dddc31ac9cf69c60d9
(cherry picked from commit 4210d634e7169a0c499eecd49b0f4825f28de81e)
",git fetch https://review.opendev.org/openstack/charm-ceph-fs refs/changes/97/892597/1 && git format-patch -1 --stdout FETCH_HEAD,['src/metadata.yaml'],1,968255572dcd5ecd79711056b0ceb1b72dce0f2b,charmhub-pop-stable/quincy.2,docs: https://discourse.charmhub.io/t/ceph-fs-docs-index/11223,,1,0
openstack%2Fneutron-dynamic-routing~893192,openstack/neutron-dynamic-routing,master,I8b666b8d4243a1018c8d5877bd655e67bd19bc69,DNM Test with latest neutron,NEW,2023-08-30 14:06:06.000000000,2023-08-30 15:00:38.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-08-30 14:06:06.000000000', 'files': ['neutron_dynamic_routing/api/rpc/handlers/bgp_speaker_rpc.py'], 'web_link': 'https://opendev.org/openstack/neutron-dynamic-routing/commit/11bfc550ea0dc6fd7cc83755c92d113dff3e7858', 'message': 'DNM Test with latest neutron\n\nChange-Id: I8b666b8d4243a1018c8d5877bd655e67bd19bc69\n'}]",0,893192,11bfc550ea0dc6fd7cc83755c92d113dff3e7858,2,1,1,31068,,,0,"DNM Test with latest neutron

Change-Id: I8b666b8d4243a1018c8d5877bd655e67bd19bc69
",git fetch https://review.opendev.org/openstack/neutron-dynamic-routing refs/changes/92/893192/1 && git format-patch -1 --stdout FETCH_HEAD,['neutron_dynamic_routing/api/rpc/handlers/bgp_speaker_rpc.py'],1,11bfc550ea0dc6fd7cc83755c92d113dff3e7858,, # DNM: test patch only,,1,0
openstack%2Fcharm-ceph-dashboard~888797,openstack/charm-ceph-dashboard,master,I4c9f607213138adff0af434a417048c9d40af2a4,Add docs key and point at Discourse,MERGED,2023-07-18 18:26:03.000000000,2023-08-30 15:00:24.000000000,2023-08-30 15:00:24.000000000,"[{'_account_id': 2424}, {'_account_id': 20648}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-07-18 18:26:03.000000000', 'files': ['metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-ceph-dashboard/commit/66ca6be4ba7caf1ab7ec6a5c5a6dbe9b785819ad', 'message': ""Add docs key and point at Discourse\n\nAdd the 'docs' key and point it at a Discourse topic\npreviously populated with the charm's README contents.\n\nWhen the new charm revision is released to the Charmhub,\nthis Discourse-based content will be displayed there. In\nthe absense of the this new key, the Charmhub's default\nbehaviour is to display the value of the charm's\n'description' key.\n\nChange-Id: I4c9f607213138adff0af434a417048c9d40af2a4\n""}]",4,888797,66ca6be4ba7caf1ab7ec6a5c5a6dbe9b785819ad,12,3,1,31203,,,0,"Add docs key and point at Discourse

Add the 'docs' key and point it at a Discourse topic
previously populated with the charm's README contents.

When the new charm revision is released to the Charmhub,
this Discourse-based content will be displayed there. In
the absense of the this new key, the Charmhub's default
behaviour is to display the value of the charm's
'description' key.

Change-Id: I4c9f607213138adff0af434a417048c9d40af2a4
",git fetch https://review.opendev.org/openstack/charm-ceph-dashboard refs/changes/97/888797/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.yaml'],1,66ca6be4ba7caf1ab7ec6a5c5a6dbe9b785819ad,charmhub-pop,docs: https://discourse.charmhub.io/t/ceph-dashboard-docs-index/11007,,1,0
openstack%2Fcharm-guide~893197,openstack/charm-guide,master,I6a6fc1b9ffe95ea758cd44256078dece22efcac5,Fix ambiguous relation on load balancing page,MERGED,2023-08-30 14:38:08.000000000,2023-08-30 14:59:05.000000000,2023-08-30 14:57:32.000000000,"[{'_account_id': 2424}, {'_account_id': 11805}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 14:38:08.000000000', 'files': ['doc/source/admin/networking/load-balancing.rst'], 'web_link': 'https://opendev.org/openstack/charm-guide/commit/74d0eea30bb8e75a908a733b729ada99859f213f', 'message': 'Fix ambiguous relation on load balancing page\n\nCloses-Bug: #2033457\nChange-Id: I6a6fc1b9ffe95ea758cd44256078dece22efcac5\nSigned-off-by: Peter Matulis <peter.matulis@canonical.com>\n'}]",1,893197,74d0eea30bb8e75a908a733b729ada99859f213f,7,3,1,30561,,,0,"Fix ambiguous relation on load balancing page

Closes-Bug: #2033457
Change-Id: I6a6fc1b9ffe95ea758cd44256078dece22efcac5
Signed-off-by: Peter Matulis <peter.matulis@canonical.com>
",git fetch https://review.opendev.org/openstack/charm-guide refs/changes/97/893197/1 && git format-patch -1 --stdout FETCH_HEAD,['doc/source/admin/networking/load-balancing.rst'],1,74d0eea30bb8e75a908a733b729ada99859f213f,lp2033457-fix-relations-octavia-page, juju integrate octavia:ovsdb-subordinate ovn-chassis:ovsdb-subordinate, juju integrate octavia ovn-chassis,1,1
openstack%2Fkolla-ansible~891923,openstack/kolla-ansible,master,I5799f7a6fa4f52c2904b14fc02ed18443f4194bd,Fixes WEBSSO_KEYSTONE_URL Value,MERGED,2023-08-18 19:58:54.000000000,2023-08-30 14:52:41.000000000,2023-08-30 14:50:37.000000000,"[{'_account_id': 13252}, {'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 32553}, {'_account_id': 34437}, {'_account_id': 34579}]","[{'number': 1, 'created': '2023-08-18 19:58:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f9c86c464cfa867b3099ca646ae29806105085d1', 'message': ""bugfix: adds /v3/' to 'local_settings.j2 [PRWHITECLO-577].\n\nChange-Id: I5799f7a6fa4f52c2904b14fc02ed18443f4194bd\n""}, {'number': 2, 'created': '2023-08-18 20:22:20.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b7222247bf26c2151682ef16e72e765248b877cf', 'message': 'Fixes WEBSSO_KEYSTONE_URL Value\n\nChange #843748 removed the `/v3` prefix from the\nWEBSSO_KEYSTONE_URL variable. However, keystone\nendpoints do in fact have the `/v3` prefix, and\nHorizon expects the WEBSSO_KEYSTONE_URL variable\nto already contain the prefix.\n\nThis patch adds the prefix again so that SSO\nworks with Horizon again.\n\nCloses-Bug: #2028921\nChange-Id: I5799f7a6fa4f52c2904b14fc02ed18443f4194bd\nSigned-off-by: Juan Pablo Suazo <jsuazo@whitestack.com>\n'}, {'number': 3, 'created': '2023-08-21 14:19:01.000000000', 'files': ['ansible/roles/horizon/templates/local_settings.j2'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/59204b2fee66d8985a151dc1441aecb88c705a9f', 'message': 'Fixes WEBSSO_KEYSTONE_URL Value\n\nChange I60162b54bc06e158534d29311d4474b34750c64d\nremoved the `/v3` prefix from the WEBSSO_KEYSTONE_URL\nvariable. However, keystone endpoints do in fact\nhave the `/v3` prefix, and Horizon expects the\nWEBSSO_KEYSTONE_URL variable to already contain\nthe prefix.\n\nThis patch adds the prefix again so that SSO\nworks with Horizon again.\n\nCloses-Bug: #2028921\nChange-Id: I5799f7a6fa4f52c2904b14fc02ed18443f4194bd\nSigned-off-by: Juan Pablo Suazo <jsuazo@whitestack.com>\n'}]",3,891923,59204b2fee66d8985a151dc1441aecb88c705a9f,20,8,3,34579,,,0,"Fixes WEBSSO_KEYSTONE_URL Value

Change I60162b54bc06e158534d29311d4474b34750c64d
removed the `/v3` prefix from the WEBSSO_KEYSTONE_URL
variable. However, keystone endpoints do in fact
have the `/v3` prefix, and Horizon expects the
WEBSSO_KEYSTONE_URL variable to already contain
the prefix.

This patch adds the prefix again so that SSO
works with Horizon again.

Closes-Bug: #2028921
Change-Id: I5799f7a6fa4f52c2904b14fc02ed18443f4194bd
Signed-off-by: Juan Pablo Suazo <jsuazo@whitestack.com>
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/23/891923/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/horizon/templates/local_settings.j2'],1,f9c86c464cfa867b3099ca646ae29806105085d1,HORIZON-SSO-FIX,"WEBSSO_KEYSTONE_URL = ""{{ keystone_public_url }}/v3""","WEBSSO_KEYSTONE_URL = ""{{ keystone_public_url }}""",1,1
openstack%2Fkolla-ansible~892837,openstack/kolla-ansible,master,Id8bf642a57b54ecafe0ee6981e044b1aba872ef7,Drop useless DUMMY_ENVIRONMENT environment for cron container,MERGED,2023-08-26 23:21:18.000000000,2023-08-30 14:51:42.000000000,2023-08-30 14:49:27.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 32553}]","[{'number': 1, 'created': '2023-08-26 23:21:18.000000000', 'files': ['ansible/roles/common/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/b205dad892d2c09286777256cc5c05dd2adac469', 'message': 'Drop useless DUMMY_ENVIRONMENT environment for cron container\n\nSince I033c51704bfb806f6515db26b8159fae12469ba5 the DUMMY_ENVIRONMENT\nenvironment for cron container is useless, lets drop it.\n\nTrivial-Fix\n\nChange-Id: Id8bf642a57b54ecafe0ee6981e044b1aba872ef7\nSigned-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>\n'}]",1,892837,b205dad892d2c09286777256cc5c05dd2adac469,11,5,1,14200,,,0,"Drop useless DUMMY_ENVIRONMENT environment for cron container

Since I033c51704bfb806f6515db26b8159fae12469ba5 the DUMMY_ENVIRONMENT
environment for cron container is useless, lets drop it.

Trivial-Fix

Change-Id: Id8bf642a57b54ecafe0ee6981e044b1aba872ef7
Signed-off-by: Maksim Malchuk <maksim.malchuk@gmail.com>
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/37/892837/1 && git format-patch -1 --stdout FETCH_HEAD,['ansible/roles/common/defaults/main.yml'],1,b205dad892d2c09286777256cc5c05dd2adac469,drop_dummy_environment,, # DUMMY_ENVIRONMENT is needed because empty environment is not supported DUMMY_ENVIRONMENT: kolla_useless_env,0,2
openstack%2Fkolla-ansible~892613,openstack/kolla-ansible,master,Iae8a937bb2c35d2eb83e2c4522d829a6cfe25f0d,Fixes task name in notify module to the actual task name,MERGED,2023-08-29 16:51:54.000000000,2023-08-30 14:50:40.000000000,2023-08-30 14:49:25.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 27339}, {'_account_id': 32553}]","[{'number': 1, 'created': '2023-08-29 16:51:54.000000000', 'files': ['releasenotes/notes/ovs-dpdk-task-name-bugfix-099b386886a40236.yaml', 'ansible/roles/ovs-dpdk/handlers/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/95317e5df28cc6641cb705b4c2dd5c9cf20d5586', 'message': 'Fixes task name in notify module to the actual task name\n\nAn OVS-DPDK task had part of its name capitalized,\npresumably due to the newly added ansible linter,\nbut this change was not reflected in the notify\nmodule which calls the task. This results in an\ninability to deploy openstack with OVS-DPDK.\n\nThis commit fixes the name of the task in the\nnotify module.\n\nCloses-Bug: #2033413\nChange-Id: Iae8a937bb2c35d2eb83e2c4522d829a6cfe25f0d\nSigned-off-by: Juan Pablo Suazo <jsuazo@whitestack.com>\n'}]",1,892613,95317e5df28cc6641cb705b4c2dd5c9cf20d5586,12,5,1,34579,,,0,"Fixes task name in notify module to the actual task name

An OVS-DPDK task had part of its name capitalized,
presumably due to the newly added ansible linter,
but this change was not reflected in the notify
module which calls the task. This results in an
inability to deploy openstack with OVS-DPDK.

This commit fixes the name of the task in the
notify module.

Closes-Bug: #2033413
Change-Id: Iae8a937bb2c35d2eb83e2c4522d829a6cfe25f0d
Signed-off-by: Juan Pablo Suazo <jsuazo@whitestack.com>
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/13/892613/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/ovs-dpdk-task-name-bugfix-099b386886a40236.yaml', 'ansible/roles/ovs-dpdk/handlers/main.yml']",2,95317e5df28cc6641cb705b4c2dd5c9cf20d5586,OVS_DPDK_TASK_NAME_BUGFIX, - OVS-DPDK gather facts, - ovs-dpdk gather facts,6,1
openstack%2Fkayobe~882951,openstack/kayobe,master,I341075115442a38c327e3ade74b81b1b9e7e85c6,Speed up calls to Bifrost,MERGED,2023-05-11 13:33:29.000000000,2023-08-30 14:12:57.000000000,2023-08-30 14:11:39.000000000,"[{'_account_id': 14200}, {'_account_id': 14826}, {'_account_id': 15197}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 35263}]","[{'number': 1, 'created': '2023-05-11 13:33:29.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/63b1aba5f2e825ef7c5182ab4f6d36bc5d0e7fa3', 'message': ""Speed up calls to Bifrost\n\nFor overcloud commands involving Bifrost (e.g. overcloud provision), we\nuse the Bifrost dynamic inventory. This runs bifrost_inventory.py which\ngathers node and port information for all bare metal hosts. Because this\ngets executed for each node in our inventory, it produces a large number\nof API requests to Ironic, which grows exponentially as the number of\nhosts increases.\n\nHalve the number of calls using the BIFROST_NODE_NAMES environment\nvariable, which restricts fetching port information to just the node\nbeing queried. bifrost_inventory.py still performs one call for each\nnode, which must be fixed separately in Bifrost [1].\n\nTime to query overcloud nodes' hardware introspection data for 44 hosts:\n\n* before patch: 823 seconds\n* after patch: 415 seconds\n\nWith the patch to Bifrost [1], this is further reduced to 46 seconds.\n\n[1] https://review.opendev.org/c/openstack/bifrost/+/882950\n\nChange-Id: I341075115442a38c327e3ade74b81b1b9e7e85c6\n""}, {'number': 2, 'created': '2023-05-11 19:45:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/ea9b7050b0e3e71f2b49d89d7d9e5f0d7bbe6774', 'message': ""Speed up calls to Bifrost\n\nFor overcloud commands involving Bifrost (e.g. overcloud provision), we\nuse the Bifrost dynamic inventory. This runs bifrost_inventory.py which\ngathers node and port information for all bare metal hosts. Because this\ngets executed for each node in our inventory, it produces a large number\nof API requests to Ironic, which grows exponentially as the number of\nhosts increases.\n\nHalve the number of calls using the BIFROST_NODE_NAMES environment\nvariable, which restricts fetching port information to just the node\nbeing queried. bifrost_inventory.py still performs one call for each\nnode, which must be fixed separately in Bifrost [1].\n\nTime to query overcloud nodes' hardware introspection data for 44 hosts:\n\n* before patch: 823 seconds\n* after patch: 415 seconds\n\nWith the patch to Bifrost [1], this is further reduced to 46 seconds.\n\n[1] https://review.opendev.org/c/openstack/bifrost/+/882950\n\nChange-Id: I341075115442a38c327e3ade74b81b1b9e7e85c6\n""}, {'number': 3, 'created': '2023-08-29 14:53:18.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kayobe/commit/d265d82ab33ac6ed7fc797893382cd5ca3fd83fc', 'message': ""Speed up calls to Bifrost\n\nFor overcloud commands involving Bifrost (e.g. overcloud provision), we\nuse the Bifrost dynamic inventory. This runs bifrost_inventory.py which\ngathers node and port information for all bare metal hosts. Because this\ngets executed for each node in our inventory, it produces a large number\nof API requests to Ironic, which grows exponentially as the number of\nhosts increases.\n\nHalve the number of calls using the BIFROST_NODE_NAMES environment\nvariable, which restricts fetching port information to just the node\nbeing queried. bifrost_inventory.py still performs one call for each\nnode, which must be fixed separately in Bifrost [1].\n\nTime to query overcloud nodes' hardware introspection data for 44 hosts:\n\n* before patch: 823 seconds\n* after patch: 415 seconds\n\nWith the patch to Bifrost [1], this is further reduced to 46 seconds.\n\n[1] https://review.opendev.org/c/openstack/bifrost/+/882950\n\nChange-Id: I341075115442a38c327e3ade74b81b1b9e7e85c6\n""}, {'number': 4, 'created': '2023-08-29 14:54:04.000000000', 'files': ['ansible/overcloud-hardware-inspect.yml', 'ansible/overcloud-bios-raid.yml', 'ansible/overcloud-provision.yml', 'ansible/overcloud-deprovision.yml', 'ansible/overcloud-introspection-data-save.yml', 'releasenotes/notes/bifrost-speedup-9902552b86150ad4.yaml'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/3e03884c476604a717c1fa5fb35771f60e39dd8f', 'message': ""Speed up calls to Bifrost\n\nFor overcloud commands involving Bifrost (e.g. overcloud provision), we\nuse the Bifrost dynamic inventory. This runs bifrost_inventory.py which\ngathers node and port information for all bare metal hosts. Because this\ngets executed for each node in our inventory, it produces a large number\nof API requests to Ironic, which grows as the number of hosts increases.\n\nHalve the number of calls using the BIFROST_NODE_NAMES environment\nvariable, which restricts fetching port information to just the node\nbeing queried. bifrost_inventory.py still performs one call for each\nnode, which must be fixed separately in Bifrost [1].\n\nTime to query overcloud nodes' hardware introspection data for 44 hosts:\n\n* before patch: 823 seconds\n* after patch: 415 seconds\n\nWith the patch to Bifrost [1], this is further reduced to 46 seconds.\n\n[1] https://review.opendev.org/c/openstack/bifrost/+/882950\n\nChange-Id: I341075115442a38c327e3ade74b81b1b9e7e85c6\n""}]",8,882951,3e03884c476604a717c1fa5fb35771f60e39dd8f,26,6,4,15197,,,0,"Speed up calls to Bifrost

For overcloud commands involving Bifrost (e.g. overcloud provision), we
use the Bifrost dynamic inventory. This runs bifrost_inventory.py which
gathers node and port information for all bare metal hosts. Because this
gets executed for each node in our inventory, it produces a large number
of API requests to Ironic, which grows as the number of hosts increases.

Halve the number of calls using the BIFROST_NODE_NAMES environment
variable, which restricts fetching port information to just the node
being queried. bifrost_inventory.py still performs one call for each
node, which must be fixed separately in Bifrost [1].

Time to query overcloud nodes' hardware introspection data for 44 hosts:

* before patch: 823 seconds
* after patch: 415 seconds

With the patch to Bifrost [1], this is further reduced to 46 seconds.

[1] https://review.opendev.org/c/openstack/bifrost/+/882950

Change-Id: I341075115442a38c327e3ade74b81b1b9e7e85c6
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/51/882951/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/overcloud-hardware-inspect.yml', 'ansible/overcloud-bios-raid.yml', 'ansible/overcloud-provision.yml', 'ansible/overcloud-deprovision.yml', 'ansible/overcloud-introspection-data-save.yml']",5,63b1aba5f2e825ef7c5182ab4f6d36bc5d0e7fa3,bifrost-speedup," env BIFROST_INVENTORY_SOURCE=ironic BIFROST_NODE_NAMES=""{{ inventory_hostname }}"" OS_CLOUD=bifrost", env BIFROST_INVENTORY_SOURCE=ironic OS_CLOUD=bifrost,15,1
openstack%2Fmagnum-tempest-plugin~872752,openstack/magnum-tempest-plugin,master,I60c8f8eedb1518ab3174fc3b2d6e795671e170ac,WIP: Boot clusters in CI,ABANDONED,2023-02-06 13:58:22.000000000,2023-08-30 14:07:57.000000000,,[{'_account_id': 22348}],"[{'number': 1, 'created': '2023-02-06 13:58:22.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/fb72fd71a67c1dd59ffb39e0f0041ff8eef329af', 'message': 'WIP: Boot clusters in CI\n\nChange-Id: I60c8f8eedb1518ab3174fc3b2d6e795671e170ac\n'}, {'number': 2, 'created': '2023-02-06 14:19:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/aa255dc57e96aef7145809786766469eb1cf104b', 'message': 'WIP: Boot clusters in CI\n\nChange-Id: I60c8f8eedb1518ab3174fc3b2d6e795671e170ac\n'}, {'number': 3, 'created': '2023-02-06 14:29:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/e3d339ce7b0890bf17e1142ad4c5f160e3ad305d', 'message': 'WIP: Boot clusters in CI\n\nChange-Id: I60c8f8eedb1518ab3174fc3b2d6e795671e170ac\n'}, {'number': 4, 'created': '2023-02-06 16:24:54.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/9a44c042265a29ec56025385b692d8d17a1f27c1', 'message': 'WIP: Boot clusters in CI\n\nChange-Id: I60c8f8eedb1518ab3174fc3b2d6e795671e170ac\n'}, {'number': 5, 'created': '2023-02-16 12:44:03.000000000', 'files': ['.zuul.yaml'], 'web_link': 'https://opendev.org/openstack/magnum-tempest-plugin/commit/d65f22f181cc6578028006393e6997b53dd40c11', 'message': 'WIP: Boot clusters in CI\n\nChange-Id: I60c8f8eedb1518ab3174fc3b2d6e795671e170ac\n'}]",0,872752,d65f22f181cc6578028006393e6997b53dd40c11,9,1,5,22629,,,0,"WIP: Boot clusters in CI

Change-Id: I60c8f8eedb1518ab3174fc3b2d6e795671e170ac
",git fetch https://review.opendev.org/openstack/magnum-tempest-plugin refs/changes/52/872752/1 && git format-patch -1 --stdout FETCH_HEAD,['.zuul.yaml'],1,fb72fd71a67c1dd59ffb39e0f0041ff8eef329af,, tempest_exclude_regex: (test_create_cluster_with_zero_nodes), tempest_exclude_regex: (test_create_list_sign_delete_clusters|test_create_cluster_with_zero_nodes),1,1
openstack%2Fironic~893151,openstack/ironic,master,Ic90f7c93d9a7b86fbf3f2cdef46bc1b2bbea489d,devstack - fix IPv6 ping,MERGED,2023-08-30 10:48:44.000000000,2023-08-30 13:59:08.000000000,2023-08-30 13:57:44.000000000,"[{'_account_id': 11655}, {'_account_id': 22348}, {'_account_id': 23851}]","[{'number': 1, 'created': '2023-08-30 10:48:44.000000000', 'files': ['devstack/lib/ironic'], 'web_link': 'https://opendev.org/openstack/ironic/commit/aa2dad9f7594682e3118eb9d940f883a02cdd553', 'message': ""devstack - fix IPv6 ping\n\nRemove the $ in the condition so that we don't attept to\nexecute the output from ping (i.e PING - unknown command)\n\nChange-Id: Ic90f7c93d9a7b86fbf3f2cdef46bc1b2bbea489d\n""}]",2,893151,aa2dad9f7594682e3118eb9d940f883a02cdd553,9,3,1,24245,,,0,"devstack - fix IPv6 ping

Remove the $ in the condition so that we don't attept to
execute the output from ping (i.e PING - unknown command)

Change-Id: Ic90f7c93d9a7b86fbf3f2cdef46bc1b2bbea489d
",git fetch https://review.opendev.org/openstack/ironic refs/changes/51/893151/1 && git format-patch -1 --stdout FETCH_HEAD,['devstack/lib/ironic'],1,aa2dad9f7594682e3118eb9d940f883a02cdd553,fix-devstack-ipv6-ping-condition, if ! ( ping -c1 -w1 $IRONIC_HOST_IPV6 ); then, if ! $( ping -c1 -w1 $IRONIC_HOST_IPV6 ); then,1,1
openstack%2Fcharm-openstack-dashboard~884727,openstack/charm-openstack-dashboard,stable/zed,I13b51b851a79a946bbbe51f79c4ecb42fb49667c,Use vault from 1.7/edge on Jammy for testing,NEW,2023-05-30 16:53:31.000000000,2023-08-30 13:51:57.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-30 16:53:31.000000000', 'files': ['tests/bundles/jammy-vault.yaml'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/056c4d26c8d9915b76db36471f9c393268bd85fe', 'message': 'Use vault from 1.7/edge on Jammy for testing\n\nChange-Id: I13b51b851a79a946bbbe51f79c4ecb42fb49667c\n'}]",0,884727,056c4d26c8d9915b76db36471f9c393268bd85fe,4,4,1,2424,,,0,"Use vault from 1.7/edge on Jammy for testing

Change-Id: I13b51b851a79a946bbbe51f79c4ecb42fb49667c
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/27/884727/1 && git format-patch -1 --stdout FETCH_HEAD,['tests/bundles/jammy-vault.yaml'],1,056c4d26c8d9915b76db36471f9c393268bd85fe,, channel: 1.7/edge, series: bionic channel: latest/edge,1,2
openstack%2Fcharm-openstack-dashboard~884726,openstack/charm-openstack-dashboard,stable/zed,I43048928cf319b5ca9a8af68000736ca26ffcf0e,Fix placement of vault unit.,NEW,2023-05-30 16:53:31.000000000,2023-08-30 13:51:38.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-30 16:53:31.000000000', 'files': ['tests/bundles/jammy-vault.yaml'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/3a8502cfe9c76210cc682c046a98d8585c0d8a58', 'message': 'Fix placement of vault unit.\n\nChange-Id: I43048928cf319b5ca9a8af68000736ca26ffcf0e\n(cherry picked from commit cc904247a2ab14efdb5f5318158025927bf249a1)\n'}]",0,884726,3a8502cfe9c76210cc682c046a98d8585c0d8a58,4,4,1,2424,,,0,"Fix placement of vault unit.

Change-Id: I43048928cf319b5ca9a8af68000736ca26ffcf0e
(cherry picked from commit cc904247a2ab14efdb5f5318158025927bf249a1)
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/26/884726/1 && git format-patch -1 --stdout FETCH_HEAD,['tests/bundles/jammy-vault.yaml'],1,3a8502cfe9c76210cc682c046a98d8585c0d8a58,, - '3', - '4',1,1
openstack%2Fcharm-openstack-dashboard~884724,openstack/charm-openstack-dashboard,stable/2023.1,I43048928cf319b5ca9a8af68000736ca26ffcf0e,Fix placement of vault unit.,NEW,2023-05-30 16:50:57.000000000,2023-08-30 13:51:20.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-30 16:50:57.000000000', 'files': ['tests/bundles/jammy-vault.yaml'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/2de677098dd453358f36131598fec2e6901d5b9b', 'message': 'Fix placement of vault unit.\n\nChange-Id: I43048928cf319b5ca9a8af68000736ca26ffcf0e\n(cherry picked from commit cc904247a2ab14efdb5f5318158025927bf249a1)\n'}]",0,884724,2de677098dd453358f36131598fec2e6901d5b9b,4,4,1,2424,,,0,"Fix placement of vault unit.

Change-Id: I43048928cf319b5ca9a8af68000736ca26ffcf0e
(cherry picked from commit cc904247a2ab14efdb5f5318158025927bf249a1)
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/24/884724/1 && git format-patch -1 --stdout FETCH_HEAD,['tests/bundles/jammy-vault.yaml'],1,2de677098dd453358f36131598fec2e6901d5b9b,, - '3', - '4',1,1
openstack%2Fcharm-openstack-dashboard~884729,openstack/charm-openstack-dashboard,stable/yoga,I43048928cf319b5ca9a8af68000736ca26ffcf0e,Fix placement of vault unit.,NEW,2023-05-30 16:59:12.000000000,2023-08-30 13:51:08.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-30 16:59:12.000000000', 'files': ['tests/bundles/jammy-vault.yaml'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/2ddd70e477749e0a35e75b1fd3d71540e3cf98d5', 'message': 'Fix placement of vault unit.\n\nChange-Id: I43048928cf319b5ca9a8af68000736ca26ffcf0e\n(cherry picked from commit cc904247a2ab14efdb5f5318158025927bf249a1)\n'}]",0,884729,2ddd70e477749e0a35e75b1fd3d71540e3cf98d5,4,4,1,2424,,,0,"Fix placement of vault unit.

Change-Id: I43048928cf319b5ca9a8af68000736ca26ffcf0e
(cherry picked from commit cc904247a2ab14efdb5f5318158025927bf249a1)
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/29/884729/1 && git format-patch -1 --stdout FETCH_HEAD,['tests/bundles/jammy-vault.yaml'],1,2ddd70e477749e0a35e75b1fd3d71540e3cf98d5,, - '3', - '4',1,1
openstack%2Fcharm-openstack-dashboard~884750,openstack/charm-openstack-dashboard,stable/yoga,I18216686a083e19362cf61cd677f41a24577ac9b,Deploy vault on jammy (instead of bionic),NEW,2023-05-30 16:59:12.000000000,2023-08-30 13:50:55.000000000,,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-05-30 16:59:12.000000000', 'files': ['tests/bundles/jammy-vault.yaml'], 'web_link': 'https://opendev.org/openstack/charm-openstack-dashboard/commit/68475d7341f13965683568daf3400c16147f1aff', 'message': 'Deploy vault on jammy (instead of bionic)\n\nChange-Id: I18216686a083e19362cf61cd677f41a24577ac9b\n'}]",0,884750,68475d7341f13965683568daf3400c16147f1aff,4,4,1,2424,,,0,"Deploy vault on jammy (instead of bionic)

Change-Id: I18216686a083e19362cf61cd677f41a24577ac9b
",git fetch https://review.opendev.org/openstack/charm-openstack-dashboard refs/changes/50/884750/1 && git format-patch -1 --stdout FETCH_HEAD,['tests/bundles/jammy-vault.yaml'],1,68475d7341f13965683568daf3400c16147f1aff,,, series: bionic,0,1
openstack%2Fneutron-lib~893182,openstack/neutron-lib,master,Ic76edc43303330d2f5e9155bff52710288dbabe6,Add release note for l3-ext-gw-multihoming and adjacent features,ABANDONED,2023-08-30 13:34:28.000000000,2023-08-30 13:49:57.000000000,,"[{'_account_id': 13686}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 13:34:28.000000000', 'files': ['releasenotes/notes/l3-ext-gw-multihoming-1a7b556c541923cf.yaml'], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/2d2a896440f32ad6d0b2a48dee46a8c3f47b6025', 'message': 'Add release note for l3-ext-gw-multihoming and adjacent features\n\nThese features was added to Caracal.\n\nRelated-Bug: #2002687\nChange-Id: Ic76edc43303330d2f5e9155bff52710288dbabe6\n'}]",1,893182,2d2a896440f32ad6d0b2a48dee46a8c3f47b6025,4,2,1,13686,,,0,"Add release note for l3-ext-gw-multihoming and adjacent features

These features was added to Caracal.

Related-Bug: #2002687
Change-Id: Ic76edc43303330d2f5e9155bff52710288dbabe6
",git fetch https://review.opendev.org/openstack/neutron-lib refs/changes/82/893182/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/notes/l3-ext-gw-multihoming-1a7b556c541923cf.yaml'],1,2d2a896440f32ad6d0b2a48dee46a8c3f47b6025,2023-aa-l3-gw-multihoming,--- features: - | A definition for API extension: ``external-gateway-multihoming``. Allows multiple gateway ports to be configured per router for the L3 service plugins implementing this functionality. - | A definition for API extension: ``enable-default-route-ecmp``. Allows ECMP to be enabled or disabled for default routes inferred from subnets of router's gateway ports. - | A definition for API extension: ``enable-default-route-bfd``. Allows BFD to be enabled or disabled for default routes inferred from subnets of router's gateway ports. ,,14,0
openstack%2Fneutron-lib~893181,openstack/neutron-lib,master,I999b959731ce28acaee28f3ee45bd100c2a8d172,Drop release note for l3-ext-gw-multihoming and adjacent features,ABANDONED,2023-08-30 13:34:28.000000000,2023-08-30 13:49:23.000000000,,"[{'_account_id': 16688}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-30 13:34:28.000000000', 'files': ['releasenotes/notes/l3-ext-gw-multihoming-1a7b556c541923cf.yaml'], 'web_link': 'https://opendev.org/openstack/neutron-lib/commit/7474c080be4bfedb0afd96acbb6a6030637df199', 'message': 'Drop release note for l3-ext-gw-multihoming and adjacent features\n\nWe did unfortunately not make it into Bobcat, and will try again\nto get it into Caracal.\n\nRelated-Bug: #2002687\nChange-Id: I999b959731ce28acaee28f3ee45bd100c2a8d172\n'}]",2,893181,7474c080be4bfedb0afd96acbb6a6030637df199,5,2,1,13686,,,0,"Drop release note for l3-ext-gw-multihoming and adjacent features

We did unfortunately not make it into Bobcat, and will try again
to get it into Caracal.

Related-Bug: #2002687
Change-Id: I999b959731ce28acaee28f3ee45bd100c2a8d172
",git fetch https://review.opendev.org/openstack/neutron-lib refs/changes/81/893181/1 && git format-patch -1 --stdout FETCH_HEAD,['releasenotes/notes/l3-ext-gw-multihoming-1a7b556c541923cf.yaml'],1,7474c080be4bfedb0afd96acbb6a6030637df199,2023-aa-l3-gw-multihoming,,--- features: - | A definition for API extension: ``external-gateway-multihoming``. Allows multiple gateway ports to be configured per router for the L3 service plugins implementing this functionality. - | A definition for API extension: ``enable-default-route-ecmp``. Allows ECMP to be enabled or disabled for default routes inferred from subnets of router's gateway ports. - | A definition for API extension: ``enable-default-route-bfd``. Allows BFD to be enabled or disabled for default routes inferred from subnets of router's gateway ports. ,0,14
openstack%2Fmanila~833793,openstack/manila,master,I9a4e5763927b7585a8fbd6b0004d6a123dcd7fae,[NetApp] Fixed replica promotion to updated autosize attributes,MERGED,2022-03-15 13:50:09.000000000,2023-08-30 12:49:23.000000000,2023-08-30 12:47:53.000000000,"[{'_account_id': 16643}, {'_account_id': 22348}, {'_account_id': 29632}, {'_account_id': 30002}, {'_account_id': 30555}, {'_account_id': 31721}]","[{'number': 1, 'created': '2022-03-15 13:50:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/bb6efcbff55eb49fef91970ab90080409a447e26', 'message': 'WIP: [NetApp] Fixed replica promotion to updated autosize attributes\n\nWhen a volume is created in NetApp ONTAP, it has a few autosize\nattributes that are set by default. The values of the attributes\nare defined according to the volume type (DP/RW).\n\nDuring the replica promotion, the types are swaped between source\nand destination volumes, but the autosize values were not being\nupdated. This patch fixes this behavior, calling an autosize reset\nafter promoting the replica.\n\nChange-Id: I9a4e5763927b7585a8fbd6b0004d6a123dcd7fae\n'}, {'number': 2, 'created': '2022-03-15 13:55:26.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/acaee5db10a3dd6c794bb45014f52fbf38686195', 'message': 'WIP: [NetApp] Fixed replica promotion to updated autosize attributes\n\nWhen a volume is created in NetApp ONTAP, it has a few autosize\nattributes that are set by default. The values of the attributes\nare defined according to the volume type (DP/RW).\n\nDuring the replica promotion, the types are swaped between source\nand destination volumes, but the autosize values were not being\nupdated. This patch fixes this behavior, calling an autosize reset\nafter promoting the replica.\n\nCloses-Bug: #1957075\nChange-Id: I9a4e5763927b7585a8fbd6b0004d6a123dcd7fae\n'}, {'number': 3, 'created': '2022-07-28 16:18:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/manila/commit/e82e32c0faca39d2c0df22f1c5755b5d614135f6', 'message': '[NetApp] Fixed replica promotion to updated autosize attributes\n\nWhen a volume is created in NetApp ONTAP, it has a few autosize\nattributes that are set by default. The values of the attributes\nare defined according to the volume type (DP/RW).\n\nDuring the replica promotion, the types are swaped between source\nand destination volumes, but the autosize values were not being\nupdated. This patch fixes this behavior, calling an autosize reset\nafter promoting the replica.\n\nCloses-Bug: #1957075\nChange-Id: I9a4e5763927b7585a8fbd6b0004d6a123dcd7fae\n'}, {'number': 4, 'created': '2023-07-31 20:36:52.000000000', 'files': ['manila/share/drivers/netapp/dataontap/cluster_mode/lib_base.py', 'releasenotes/notes/bug-1957075-fix-replica-promote-autosize-attributes-c180bb7db328bece.yaml', 'manila/tests/share/drivers/netapp/dataontap/cluster_mode/test_lib_base.py'], 'web_link': 'https://opendev.org/openstack/manila/commit/8896534bb4860d6bf4ad7d6f016b9a38e85c9840', 'message': '[NetApp] Fixed replica promotion to updated autosize attributes\n\nWhen a volume is created in NetApp ONTAP, it has a few autosize\nattributes that are set by default. The values of the attributes\nare defined according to the volume type (DP/RW).\n\nDuring the replica promotion, the types are swaped between source\nand destination volumes, but the autosize values were not being\nupdated. This patch fixes this behavior, calling an autosize reset\nafter promoting the replica.\n\nCloses-Bug: #1957075\nChange-Id: I9a4e5763927b7585a8fbd6b0004d6a123dcd7fae\n'}]",20,833793,8896534bb4860d6bf4ad7d6f016b9a38e85c9840,40,6,4,33648,,,0,"[NetApp] Fixed replica promotion to updated autosize attributes

When a volume is created in NetApp ONTAP, it has a few autosize
attributes that are set by default. The values of the attributes
are defined according to the volume type (DP/RW).

During the replica promotion, the types are swaped between source
and destination volumes, but the autosize values were not being
updated. This patch fixes this behavior, calling an autosize reset
after promoting the replica.

Closes-Bug: #1957075
Change-Id: I9a4e5763927b7585a8fbd6b0004d6a123dcd7fae
",git fetch https://review.opendev.org/openstack/manila refs/changes/93/833793/1 && git format-patch -1 --stdout FETCH_HEAD,"['manila/share/drivers/netapp/dataontap/cluster_mode/lib_base.py', 'releasenotes/notes/bug-1957075-fix-replica-promote-autosize-attributes-c180bb7db328bece.yaml', 'manila/tests/share/drivers/netapp/dataontap/cluster_mode/test_lib_base.py']",3,bb6efcbff55eb49fef91970ab90080409a447e26,bug/1957075," self.mock_object(self.library, '_update_autosize_attributes_after_promote_replica') self.mock_object(self.library, '_update_autosize_attributes_after_promote_replica') self.mock_object(self.library, '_update_autosize_attributes_after_promote_replica') self.mock_object(self.library, '_update_autosize_attributes_after_promote_replica') self.mock_object(self.library, '_update_autosize_attributes_after_promote_replica') self.mock_object(self.library, '_update_autosize_attributes_after_promote_replica')",,101,1
openstack%2Freleases~892962,openstack/releases,master,Ib903b55e9bc9e20691f5644e3a5919529609e75c,Release final python-venusclient for 2023.2 Bobcat,MERGED,2023-08-28 13:26:13.000000000,2023-08-30 12:28:48.000000000,2023-08-30 12:28:48.000000000,"[{'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 24061}, {'_account_id': 26458}, {'_account_id': 27565}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-28 13:26:13.000000000', 'files': ['deliverables/bobcat/python-venusclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/ceb58e8192d9d0218e72ca7be797f4cf91e96829', 'message': 'Release final python-venusclient for 2023.2 Bobcat\n\nThis is a release for python-venusclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 2.0.1..2a40024\n9403066 Add get analyse logs  to venusclient\nd8213ba Add AnomalyManager record_list to venusclient\n909640c Updated links in documentation to be safe links\n930883a Document Format Modification\nac3f880 Document Format Modification\n971f4a7 Add AnomalyManager to venusclient\nfbdd40f add get instance request id list\n7629d16 Document Format Modification\nb91b0a1 Updated links in documentation to be safe links\nba69579 log analysis api params add\n29da5d8 Update master for stable/2023.1\n\nChange-Id: Ib903b55e9bc9e20691f5644e3a5919529609e75c\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892962,ceb58e8192d9d0218e72ca7be797f4cf91e96829,9,6,1,28522,,,0,"Release final python-venusclient for 2023.2 Bobcat

This is a release for python-venusclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 2.0.1..2a40024
9403066 Add get analyse logs  to venusclient
d8213ba Add AnomalyManager record_list to venusclient
909640c Updated links in documentation to be safe links
930883a Document Format Modification
ac3f880 Document Format Modification
971f4a7 Add AnomalyManager to venusclient
fbdd40f add get instance request id list
7629d16 Document Format Modification
b91b0a1 Updated links in documentation to be safe links
ba69579 log analysis api params add
29da5d8 Update master for stable/2023.1

Change-Id: Ib903b55e9bc9e20691f5644e3a5919529609e75c
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/62/892962/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-venusclient.yaml'],1,ceb58e8192d9d0218e72ca7be797f4cf91e96829,bobcat-milestone-3,releases: - version: 2.1.0 projects: - repo: openstack/python-venusclient hash: 2a400245988498b3f8043557b8505514c2b1e943,,5,0
openstack%2Freleases~892958,openstack/releases,master,I84c96ccda68982e01462125c021849c6be8f880a,Release final python-senlinclient for 2023.2 Bobcat,MERGED,2023-08-28 13:24:10.000000000,2023-08-30 12:28:46.000000000,2023-08-30 12:28:46.000000000,"[{'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 22998}, {'_account_id': 28522}]","[{'number': 1, 'created': '2023-08-28 13:24:10.000000000', 'files': ['deliverables/bobcat/python-senlinclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/93260c4029e085e9f46cd81bba499ea2e12de7ac', 'message': 'Release final python-senlinclient for 2023.2 Bobcat\n\nThis is a release for python-senlinclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 3.0.0..1644b1b\n1644b1b Imported Translations from Zanata\n9bf0bd6 Update master for stable/2023.1\n\nChange-Id: I84c96ccda68982e01462125c021849c6be8f880a\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",2,892958,93260c4029e085e9f46cd81bba499ea2e12de7ac,10,4,1,28522,,,0,"Release final python-senlinclient for 2023.2 Bobcat

This is a release for python-senlinclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 3.0.0..1644b1b
1644b1b Imported Translations from Zanata
9bf0bd6 Update master for stable/2023.1

Change-Id: I84c96ccda68982e01462125c021849c6be8f880a
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/58/892958/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-senlinclient.yaml'],1,93260c4029e085e9f46cd81bba499ea2e12de7ac,bobcat-milestone-3,releases: - version: 3.1.0 projects: - repo: openstack/python-senlinclient hash: 1644b1bc334cf1d100556995758a64dfbf1df00f,,5,0
openstack%2Freleases~892963,openstack/releases,master,I55c38f2113b1dbaddca308740eadc0221d579e7e,Release final python-vitrageclient for 2023.2 Bobcat,MERGED,2023-08-28 13:26:49.000000000,2023-08-30 12:26:07.000000000,2023-08-30 12:26:07.000000000,"[{'_account_id': 17685}, {'_account_id': 19134}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-28 13:26:49.000000000', 'files': ['deliverables/bobcat/python-vitrageclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/a08e51692baef886c74f04547f5d73abffac39eb', 'message': 'Release final python-vitrageclient for 2023.2 Bobcat\n\nThis is a release for python-vitrageclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 4.7.0..cf150d2\ncf150d2 Update master for stable/2023.1\n\nChange-Id: I55c38f2113b1dbaddca308740eadc0221d579e7e\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",1,892963,a08e51692baef886c74f04547f5d73abffac39eb,9,5,1,28522,,,0,"Release final python-vitrageclient for 2023.2 Bobcat

This is a release for python-vitrageclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 4.7.0..cf150d2
cf150d2 Update master for stable/2023.1

Change-Id: I55c38f2113b1dbaddca308740eadc0221d579e7e
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/63/892963/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-vitrageclient.yaml'],1,a08e51692baef886c74f04547f5d73abffac39eb,bobcat-milestone-3,releases: - version: 4.8.0 projects: - repo: openstack/python-vitrageclient hash: cf150d2b96b492bf549295655a5a0dbf08e28ea5,,5,0
openstack%2Foctavia-tempest-plugin~832199,openstack/octavia-tempest-plugin,master,If0b55cd8d8d1de009005c2a724b069284231c30e,Add additional subnets in LoadBalancerBaseTest class,NEW,2022-03-07 08:29:39.000000000,2023-08-30 12:17:13.000000000,,"[{'_account_id': 22348}, {'_account_id': 31664}, {'_account_id': 34451}]","[{'number': 1, 'created': '2022-03-07 08:29:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/979cdc8774fe7451ade11415e9119b5fc71f72d4', 'message': 'Add additional subnets in LoadBalancerBaseTest class\n\nAdd subnets for new tests:\n- add a 2nd IPv4 subnet for the VIP network\n- add a 2nd IPv4 subnet for the member_1 network\n\nChange-Id: If0b55cd8d8d1de009005c2a724b069284231c30e\n'}, {'number': 2, 'created': '2022-08-17 12:50:07.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/8669722d8223d50880017f8538ffac11b93bd870', 'message': 'Add additional subnets in LoadBalancerBaseTest class\n\nAdd subnets for new tests:\n- add a 2nd IPv4 subnet for the VIP network\n- add a 2nd IPv4 subnet for the member_1 network\n\nChange-Id: If0b55cd8d8d1de009005c2a724b069284231c30e\n'}, {'number': 3, 'created': '2023-07-13 14:21:55.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/555b9df9d8209a3efcad38c9a2c44e444cb6951d', 'message': 'Add additional subnets in LoadBalancerBaseTest class\n\nAdd subnets for new tests:\n- add a 2nd IPv4 subnet for the VIP network\n- add a 2nd IPv4 subnet for the member_1 network\n\nChange-Id: If0b55cd8d8d1de009005c2a724b069284231c30e\n'}, {'number': 4, 'created': '2023-08-28 09:26:34.000000000', 'files': ['octavia_tempest_plugin/config.py', 'octavia_tempest_plugin/tests/test_base.py'], 'web_link': 'https://opendev.org/openstack/octavia-tempest-plugin/commit/4941f72355aabe8ce9cb81999f57916145fb199f', 'message': 'Add additional subnets in LoadBalancerBaseTest class\n\nAdd subnets for new tests:\n- add a 2nd IPv4 subnet and a 2nd IPv6 subnet to the VIP network\n- add a 2nd IPv4 subnet to the member_1 network\n\nChange-Id: If0b55cd8d8d1de009005c2a724b069284231c30e\n'}]",5,832199,4941f72355aabe8ce9cb81999f57916145fb199f,12,3,4,29244,,,0,"Add additional subnets in LoadBalancerBaseTest class

Add subnets for new tests:
- add a 2nd IPv4 subnet and a 2nd IPv6 subnet to the VIP network
- add a 2nd IPv4 subnet to the member_1 network

Change-Id: If0b55cd8d8d1de009005c2a724b069284231c30e
",git fetch https://review.opendev.org/openstack/octavia-tempest-plugin refs/changes/99/832199/1 && git format-patch -1 --stdout FETCH_HEAD,"['octavia_tempest_plugin/config.py', 'octavia_tempest_plugin/tests/test_base.py']",2,979cdc8774fe7451ade11415e9119b5fc71f72d4,multi-vip," def resource_setup(cls, extra_subnets=False): if extra_subnets: cls.lb_member_vip_subnet2 = {'id': uuidutils.generate_uuid()} cls.lb_member_1_subnet2 = {'id': uuidutils.generate_uuid()} if extra_subnets: cls.lb_member_vip_ipv6_subnet2 = { 'id': uuidutils.generate_uuid()} cls.lb_member_vip_subnet2 = override_subnet cls.lb_member_1_subnet2 = override_subnet cls.lb_member_vip_ipv6_subnet2 = override_ipv6_subnet cls.lb_member_vip_ipv6_subnet2 = None cls._create_networks(extra_subnets) LOG.debug('Octavia Setup: lb_member_1_net = {}'.format( cls.lb_member_1_net[const.ID])) LOG.debug('Octavia Setup: lb_member_2_net = {}'.format( cls.lb_member_2_net[const.ID])) if extra_subnets and cls.lb_member_vip_subnet2: LOG.debug('Octavia Setup: lb_member_vip_subnet2 = {}'.format( cls.lb_member_vip_subnet2[const.ID])) if extra_subnets and cls.lb_member_1_subnet2: LOG.debug('Octavia Setup: lb_member_1_subnet2 = {}'.format( cls.lb_member_1_subnet2[const.ID])) if cls.lb_member_vip_ipv6_subnet: LOG.debug('Octavia Setup: lb_member_vip_ipv6_subnet = ' '{}'.format(cls.lb_member_vip_ipv6_subnet[const.ID])) if extra_subnets and cls.lb_member_vip_ipv6_subnet2: LOG.debug('Octavia Setup: lb_member_vip_ipv6_subnet2 = ' '{}'.format(cls.lb_member_vip_ipv6_subnet2[const.ID])) if cls.lb_member_1_ipv6_subnet: LOG.debug('Octavia Setup: lb_member_1_ipv6_subnet = {}'.format( cls.lb_member_1_ipv6_subnet[const.ID])) if cls.lb_member_2_ipv6_subnet: LOG.debug('Octavia Setup: lb_member_2_ipv6_subnet = {}'.format( cls.lb_member_2_ipv6_subnet[const.ID])) def _create_networks(cls, extra_subnets=False): cls.lb_member_vip_subnet2 (optional) cls.lb_member_vip_ipv6_subnet2 (optional) cls.lb_member_1_subnet2 (optional) # Create optional 2nd tenant VIP subnet if extra_subnets: subnet_kwargs = { 'name': data_utils.rand_name(""lb_member_vip_subnet2""), 'network_id': cls.lb_member_vip_net['id'], 'cidr': CONF.load_balancer.vip_subnet2_cidr, 'ip_version': 4} result = cls.lb_mem_subnet_client.create_subnet(**subnet_kwargs) cls.lb_member_vip_subnet2 = result['subnet'] cls.addClassResourceCleanup( waiters.wait_for_not_found, cls._logging_delete_subnet, cls.lb_mem_subnet_client.show_subnet, cls.lb_member_vip_subnet2['id']) else: cls.lb_member_vip_subnet2 = None LOG.info('lb_member_vip_subnet2: {}'.format( cls.lb_member_vip_subnet2)) if extra_subnets: subnet_kwargs = { 'name': data_utils.rand_name(""lb_member_vip_ipv6_subnet2""), 'network_id': cls.lb_member_vip_net['id'], 'ip_version': 6} if subnetpool_name: subnetpool = ( cls.os_admin_subnetpools_client.list_subnetpools( name=subnetpool_name)['subnetpools']) if len(subnetpool) == 1: subnetpool = subnetpool[0] subnet_kwargs['subnetpool_id'] = subnetpool['id'] if 'subnetpool_id' not in subnet_kwargs: subnet_kwargs['cidr'] = ( CONF.load_balancer.vip_ipv6_subnet2_cidr) result = cls.lb_mem_subnet_client.create_subnet( **subnet_kwargs) cls.lb_member_vip_ipv6_subnet2 = result['subnet'] cls.addClassResourceCleanup( waiters.wait_for_not_found, cls._logging_delete_subnet, cls.lb_mem_subnet_client.show_subnet, cls.lb_member_vip_ipv6_subnet2['id']) else: cls.lb_member_vip_ipv6_subnet2 = None LOG.info('lb_member_vip_ipv6_subnet2: {}'.format( cls.lb_member_vip_ipv6_subnet2)) if extra_subnets: # Create 2nd tenant member 1 subnet subnet_kwargs = { 'name': data_utils.rand_name(""lb_member_1_subnet2""), 'network_id': cls.lb_member_1_net['id'], 'cidr': CONF.load_balancer.member_1_ipv4_subnet2_cidr, 'ip_version': 4} result = cls.lb_mem_subnet_client.create_subnet(**subnet_kwargs) cls.lb_member_1_subnet2 = result['subnet'] cls.addClassResourceCleanup( waiters.wait_for_not_found, cls._logging_delete_subnet, cls.lb_mem_subnet_client.show_subnet, cls.lb_member_1_subnet2['id']) else: cls.lb_member_1_subnet2 = None LOG.info('lb_member_1_subnet2: {}'.format(cls.lb_member_1_subnet2)) def resource_setup(cls, extra_subnets=False): super(LoadBalancerBaseTestWithCompute, cls).resource_setup( extra_subnets) def _create_networks(cls, extra_subnets=False): super(LoadBalancerBaseTestWithCompute, cls)._create_networks( extra_subnets) if extra_subnets: # Add VIP2 subnet to router cls.lb_mem_routers_client.add_router_interface( cls.lb_member_router['id'], subnet_id=cls.lb_member_vip_subnet2['id']) cls.addClassResourceCleanup( waiters.wait_for_not_found, cls.lb_mem_routers_client.remove_router_interface, cls.lb_mem_routers_client.remove_router_interface, cls.lb_member_router['id'], subnet_id=cls.lb_member_vip_subnet2['id']) if extra_subnets: # Add IPv6 VIP subnet2 to router1 cls.os_admin_routers_client.add_router_interface( router['id'], subnet_id=cls.lb_member_vip_ipv6_subnet2['id']) cls.addClassResourceCleanup( waiters.wait_for_not_found, cls.os_admin_routers_client.remove_router_interface, cls.os_admin_routers_client.remove_router_interface, router['id'], subnet_id=cls.lb_member_vip_ipv6_subnet2['id']) if extra_subnets: # Add 2nd member subnet 1 to router cls.lb_mem_routers_client.add_router_interface( cls.lb_member_router['id'], subnet_id=cls.lb_member_1_subnet2['id']) cls.addClassResourceCleanup( waiters.wait_for_not_found, cls.lb_mem_routers_client.remove_router_interface, cls.lb_mem_routers_client.remove_router_interface, cls.lb_member_router['id'], subnet_id=cls.lb_member_1_subnet2['id']) "," def resource_setup(cls): cls._create_networks() LOG.debug('Octavia Setup: lb_member_1_net = {}'.format( cls.lb_member_1_net[const.ID])) LOG.debug('Octavia Setup: lb_member_2_net = {}'.format( cls.lb_member_2_net[const.ID])) if CONF.load_balancer.test_with_ipv6: if cls.lb_member_vip_ipv6_subnet: LOG.debug('Octavia Setup: lb_member_vip_ipv6_subnet = ' '{}'.format(cls.lb_member_vip_ipv6_subnet[const.ID])) if cls.lb_member_1_ipv6_subnet: LOG.debug('Octavia Setup: lb_member_1_ipv6_subnet = {}'.format( cls.lb_member_1_ipv6_subnet[const.ID])) if cls.lb_member_2_ipv6_subnet: LOG.debug('Octavia Setup: lb_member_2_ipv6_subnet = {}'.format( cls.lb_member_2_ipv6_subnet[const.ID])) def _create_networks(cls): def resource_setup(cls): super(LoadBalancerBaseTestWithCompute, cls).resource_setup() def _create_networks(cls): super(LoadBalancerBaseTestWithCompute, cls)._create_networks()",159,21
openstack%2Fproject-config~893117,openstack/project-config,master,I7ff294486bc917587d1f9397e609188afb3a3a0a,Add magnum-capi-helm-charts to Magnum project,MERGED,2023-08-30 00:47:08.000000000,2023-08-30 12:09:56.000000000,2023-08-30 11:56:20.000000000,"[{'_account_id': 5263}, {'_account_id': 8064}, {'_account_id': 8556}, {'_account_id': 22348}, {'_account_id': 22629}]","[{'number': 1, 'created': '2023-08-30 00:47:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/47b2efd5e4122f0e4ef8b03af3134746f6f044a1', 'message': 'Add magnum-capi-helm-charts to Magnum project\n\nThis new project is used by the new cluster api driver.\n\nChange-Id: I7ff294486bc917587d1f9397e609188afb3a3a0a\n'}, {'number': 2, 'created': '2023-08-30 00:52:50.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/project-config/commit/1cf373288c6f946478495a0ad1ee1d62b45b897a', 'message': 'Add magnum-capi-helm-charts to Magnum project\n\nThis new project is used by the new cluster api driver.\n\nNeeded-By: https://review.opendev.org/c/openstack/governance/+/893118\n\nChange-Id: I7ff294486bc917587d1f9397e609188afb3a3a0a\n'}, {'number': 3, 'created': '2023-08-30 01:53:36.000000000', 'files': ['gerritbot/channels.yaml', 'gerrit/projects.yaml', 'zuul/main.yaml'], 'web_link': 'https://opendev.org/openstack/project-config/commit/459be8d4c6374cc8f5d9ab2ae8d649ef5cba18c1', 'message': 'Add magnum-capi-helm-charts to Magnum project\n\nThis new project is used by the new cluster api driver.\n\nNeeded-By: https://review.opendev.org/c/openstack/governance/+/893118\n\nChange-Id: I7ff294486bc917587d1f9397e609188afb3a3a0a\n'}]",1,893117,459be8d4c6374cc8f5d9ab2ae8d649ef5cba18c1,12,5,3,14394,,,0,"Add magnum-capi-helm-charts to Magnum project

This new project is used by the new cluster api driver.

Needed-By: https://review.opendev.org/c/openstack/governance/+/893118

Change-Id: I7ff294486bc917587d1f9397e609188afb3a3a0a
",git fetch https://review.opendev.org/openstack/project-config refs/changes/17/893117/1 && git format-patch -1 --stdout FETCH_HEAD,"['gerritbot/channels.yaml', 'gerrit/projects.yaml', 'zuul/main.yaml']",3,47b2efd5e4122f0e4ef8b03af3134746f6f044a1,magnum-capi-helm, - openstack/magnum-capi-helm-charts,,7,0
openstack%2Fcharm-rabbitmq-server~889342,openstack/charm-rabbitmq-server,stable/jammy,Idd4eb37dd413b49a99b8b81fd15d0b45f75ae97e,Add docs key and point at Discourse,MERGED,2023-07-24 17:31:42.000000000,2023-08-30 11:08:58.000000000,2023-08-30 11:08:58.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31203}]","[{'number': 1, 'created': '2023-07-24 17:31:42.000000000', 'files': ['metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-rabbitmq-server/commit/efc3d7d46d707227b656c5e7d77c0c6b4815661c', 'message': ""Add docs key and point at Discourse\n\nAdd the 'docs' key and point it at a Discourse topic\npreviously populated with the charm's README contents.\n\nWhen the new charm revision is released to the Charmhub,\nthis Discourse-based content will be displayed there. In\nthe absense of the this new key, the Charmhub's default\nbehaviour is to display the value of the charm's\n'description' key.\n\nChange-Id: Idd4eb37dd413b49a99b8b81fd15d0b45f75ae97e\n(cherry picked from commit 84b8605ed6cfd439a9163b5e41eee24a4bcc2eb6)\n""}]",1,889342,efc3d7d46d707227b656c5e7d77c0c6b4815661c,9,5,1,2424,,,0,"Add docs key and point at Discourse

Add the 'docs' key and point it at a Discourse topic
previously populated with the charm's README contents.

When the new charm revision is released to the Charmhub,
this Discourse-based content will be displayed there. In
the absense of the this new key, the Charmhub's default
behaviour is to display the value of the charm's
'description' key.

Change-Id: Idd4eb37dd413b49a99b8b81fd15d0b45f75ae97e
(cherry picked from commit 84b8605ed6cfd439a9163b5e41eee24a4bcc2eb6)
",git fetch https://review.opendev.org/openstack/charm-rabbitmq-server refs/changes/42/889342/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.yaml'],1,efc3d7d46d707227b656c5e7d77c0c6b4815661c,charmhub-pop-stable/jammy,docs: https://discourse.charmhub.io/t/rabbitmq-server-docs-index/10546,,1,0
openstack%2Fcharm-ceilometer~889813,openstack/charm-ceilometer,stable/yoga,I3cbd3c8f3a57be26a599b32973d319f3994377f2,Add docs key and point at Discourse,MERGED,2023-07-28 13:20:59.000000000,2023-08-30 11:06:56.000000000,2023-08-30 11:06:56.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31203}]","[{'number': 1, 'created': '2023-07-28 13:20:59.000000000', 'files': ['metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-ceilometer/commit/9ce37981efe0dc3f38e031d728e3fd62c6a8dc6c', 'message': ""Add docs key and point at Discourse\n\nAdd the 'docs' key and point it at a Discourse topic\npreviously populated with the charm's README contents.\n\nWhen the new charm revision is released to the Charmhub,\nthis Discourse-based content will be displayed there. In\nthe absense of the this new key, the Charmhub's default\nbehaviour is to display the value of the charm's\n'description' key.\n\nChange-Id: I3cbd3c8f3a57be26a599b32973d319f3994377f2\n(cherry picked from commit d8fd7492d89f130eea558d4c48d5f771b0b7c98f)\n""}]",2,889813,9ce37981efe0dc3f38e031d728e3fd62c6a8dc6c,10,5,1,2424,,,0,"Add docs key and point at Discourse

Add the 'docs' key and point it at a Discourse topic
previously populated with the charm's README contents.

When the new charm revision is released to the Charmhub,
this Discourse-based content will be displayed there. In
the absense of the this new key, the Charmhub's default
behaviour is to display the value of the charm's
'description' key.

Change-Id: I3cbd3c8f3a57be26a599b32973d319f3994377f2
(cherry picked from commit d8fd7492d89f130eea558d4c48d5f771b0b7c98f)
",git fetch https://review.opendev.org/openstack/charm-ceilometer refs/changes/13/889813/1 && git format-patch -1 --stdout FETCH_HEAD,['metadata.yaml'],1,9ce37981efe0dc3f38e031d728e3fd62c6a8dc6c,charmhub-pop-stable/yoga,docs: https://discourse.charmhub.io/t/ceilometer-docs-index/11219,,1,0
openstack%2Fcharm-designate~889812,openstack/charm-designate,stable/yoga,I2836aadfe6b9a035c6838b144e3f65436e4c184e,Add docs key and point at Discourse,MERGED,2023-07-28 13:20:33.000000000,2023-08-30 11:04:17.000000000,2023-08-30 11:04:17.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31203}]","[{'number': 1, 'created': '2023-07-28 13:20:33.000000000', 'files': ['src/metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-designate/commit/52b0920c411c3bd61d631ef83d3305bff64ac860', 'message': ""Add docs key and point at Discourse\n\nAdd the 'docs' key and point it at a Discourse topic\npreviously populated with the charm's README contents.\n\nWhen the new charm revision is released to the Charmhub,\nthis Discourse-based content will be displayed there. In\nthe absense of the this new key, the Charmhub's default\nbehaviour is to display the value of the charm's\n'description' key.\n\nChange-Id: I2836aadfe6b9a035c6838b144e3f65436e4c184e\n(cherry picked from commit 73a39d4c148a303df403a7be2099663d22c24a42)\n""}]",2,889812,52b0920c411c3bd61d631ef83d3305bff64ac860,9,5,1,2424,,,0,"Add docs key and point at Discourse

Add the 'docs' key and point it at a Discourse topic
previously populated with the charm's README contents.

When the new charm revision is released to the Charmhub,
this Discourse-based content will be displayed there. In
the absense of the this new key, the Charmhub's default
behaviour is to display the value of the charm's
'description' key.

Change-Id: I2836aadfe6b9a035c6838b144e3f65436e4c184e
(cherry picked from commit 73a39d4c148a303df403a7be2099663d22c24a42)
",git fetch https://review.opendev.org/openstack/charm-designate refs/changes/12/889812/1 && git format-patch -1 --stdout FETCH_HEAD,['src/metadata.yaml'],1,52b0920c411c3bd61d631ef83d3305bff64ac860,charmhub-pop-stable/yoga,docs: https://discourse.charmhub.io/t/designate-docs-index/11220,,1,0
openstack%2Fcharm-octavia~889814,openstack/charm-octavia,stable/yoga,I50e457e3b9affdd0ca83602c1e580b75c6aa5434,Add docs key and point at Discourse,MERGED,2023-07-28 13:21:15.000000000,2023-08-30 11:03:41.000000000,2023-08-30 11:03:41.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}, {'_account_id': 31203}]","[{'number': 1, 'created': '2023-07-28 13:21:15.000000000', 'files': ['src/metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-octavia/commit/128e4d7df0320875933b680ee77e571df10d9d52', 'message': ""Add docs key and point at Discourse\n\nAdd the 'docs' key and point it at a Discourse topic\npreviously populated with the charm's README contents.\n\nWhen the new charm revision is released to the Charmhub,\nthis Discourse-based content will be displayed there. In\nthe absense of the this new key, the Charmhub's default\nbehaviour is to display the value of the charm's\n'description' key.\n\nChange-Id: I50e457e3b9affdd0ca83602c1e580b75c6aa5434\n(cherry picked from commit e3b8b03378793562740590d8f849876aee0d1f15)\n""}]",4,889814,128e4d7df0320875933b680ee77e571df10d9d52,15,5,1,2424,,,0,"Add docs key and point at Discourse

Add the 'docs' key and point it at a Discourse topic
previously populated with the charm's README contents.

When the new charm revision is released to the Charmhub,
this Discourse-based content will be displayed there. In
the absense of the this new key, the Charmhub's default
behaviour is to display the value of the charm's
'description' key.

Change-Id: I50e457e3b9affdd0ca83602c1e580b75c6aa5434
(cherry picked from commit e3b8b03378793562740590d8f849876aee0d1f15)
",git fetch https://review.opendev.org/openstack/charm-octavia refs/changes/14/889814/1 && git format-patch -1 --stdout FETCH_HEAD,['src/metadata.yaml'],1,128e4d7df0320875933b680ee77e571df10d9d52,charmhub-pop-stable/yoga,docs: https://discourse.charmhub.io/t/octavia-docs-index/11221,,1,0
openstack%2Fcharm-placement~892872,openstack/charm-placement,stable/yoga,I8ce65b31e286ee9b081a1dc5b7f27bde8a2ba5d2,Add docs key and point at Discourse,MERGED,2023-08-29 19:13:59.000000000,2023-08-30 11:02:34.000000000,2023-08-30 11:02:34.000000000,"[{'_account_id': 11805}, {'_account_id': 20648}, {'_account_id': 20870}, {'_account_id': 22348}]","[{'number': 1, 'created': '2023-08-29 19:13:59.000000000', 'files': ['src/metadata.yaml'], 'web_link': 'https://opendev.org/openstack/charm-placement/commit/3878ea777077803652a7a5f40b9d18e53a0e0b57', 'message': ""Add docs key and point at Discourse\n\nAdd the 'docs' key and point it at a Discourse topic previously populated with the charm's README contents.\n\nWhen the new charm revision is released to the Charmhub,\nthis Discourse-based content will be displayed there. In\nthe absense of the this new key, the Charmhub's default\nbehaviour is to display the value of the charm's\n'description' key.\n\nChange-Id: I8ce65b31e286ee9b081a1dc5b7f27bde8a2ba5d2\n(cherry picked from commit 2685a63ab0f3a10e7108856b120ef5696c646710)\n""}]",1,892872,3878ea777077803652a7a5f40b9d18e53a0e0b57,9,4,1,30561,,,0,"Add docs key and point at Discourse

Add the 'docs' key and point it at a Discourse topic previously populated with the charm's README contents.

When the new charm revision is released to the Charmhub,
this Discourse-based content will be displayed there. In
the absense of the this new key, the Charmhub's default
behaviour is to display the value of the charm's
'description' key.

Change-Id: I8ce65b31e286ee9b081a1dc5b7f27bde8a2ba5d2
(cherry picked from commit 2685a63ab0f3a10e7108856b120ef5696c646710)
",git fetch https://review.opendev.org/openstack/charm-placement refs/changes/72/892872/1 && git format-patch -1 --stdout FETCH_HEAD,['src/metadata.yaml'],1,3878ea777077803652a7a5f40b9d18e53a0e0b57,charmhub-pop-stable/yoga,docs: https://discourse.charmhub.io/t/placement-docs-index/10547,,1,0
openstack%2Ftripleo-validations~893034,openstack/tripleo-validations,stable/wallaby,I0b6ce54ae46e843c846d9e72784efcc4f4a77647,Setting default value for the enabled_services var,MERGED,2023-08-29 11:28:30.000000000,2023-08-30 10:58:44.000000000,2023-08-30 10:58:44.000000000,"[{'_account_id': 6681}, {'_account_id': 16515}, {'_account_id': 22348}, {'_account_id': 27427}, {'_account_id': 32432}, {'_account_id': 32926}]","[{'number': 1, 'created': '2023-08-29 11:28:30.000000000', 'files': ['roles/frr_status/defaults/main.yml'], 'web_link': 'https://opendev.org/openstack/tripleo-validations/commit/97bd5ebc73f5ba5f2bfa5da1b08f6020dfd19f60', 'message': 'Setting default value for the enabled_services var\n\nResolves: rhbz#2234929\n\nSigned-off-by: Jiri Podivin <jpodivin@redhat.com>\nChange-Id: I0b6ce54ae46e843c846d9e72784efcc4f4a77647\n'}]",5,893034,97bd5ebc73f5ba5f2bfa5da1b08f6020dfd19f60,11,6,1,32926,,,0,"Setting default value for the enabled_services var

Resolves: rhbz#2234929

Signed-off-by: Jiri Podivin <jpodivin@redhat.com>
Change-Id: I0b6ce54ae46e843c846d9e72784efcc4f4a77647
",git fetch https://review.opendev.org/openstack/tripleo-validations refs/changes/34/893034/1 && git format-patch -1 --stdout FETCH_HEAD,['roles/frr_status/defaults/main.yml'],1,97bd5ebc73f5ba5f2bfa5da1b08f6020dfd19f60,frr-defaults,"--- # Copyright 2023 Red Hat, Inc. # All Rights Reserved. # # Licensed under the Apache License, Version 2.0 (the ""License""); you may # not use this file except in compliance with the License. You may obtain # a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the # License for the specific language governing permissions and limitations # under the License. # All variables intended for modification should be placed in this file. enabled_services: - frr ",,21,0
openstack%2Fkolla-ansible~874380,openstack/kolla-ansible,master,I6d421effd833d2e0524dd0b81736445c9a730ea9,Add ironic-prometheus-exporter,MERGED,2023-02-20 10:21:04.000000000,2023-08-30 10:57:33.000000000,2023-08-30 10:56:16.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}, {'_account_id': 32553}]","[{'number': 1, 'created': '2023-02-20 10:21:04.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/a81bb30c88b2c96eec20ea2e57d56659d2fb5030', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 2, 'created': '2023-02-20 12:37:21.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/d8c67d410bedb1ce1e0a8b8056fe1d2f5a5b6497', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/874415\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 3, 'created': '2023-03-20 21:18:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/000b572c57b59be10a000c055f25e0142dcefe2d', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 4, 'created': '2023-03-21 07:49:57.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/1d6dc1e8d572163825ce93d132899ec323e72ad9', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 5, 'created': '2023-05-18 05:29:39.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/1639c6d616841d574a7776247855123727af26a5', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 6, 'created': '2023-05-18 05:31:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/783231b538ef2df42ca5d7eac26a864a445f100d', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 7, 'created': '2023-05-18 05:32:00.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/3e5833b7102c5ea88347d76960c3da4da25eeb8b', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.' [0]\n\nPrometheus has been enabled in CI jobs to ensure test coverage.\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 8, 'created': '2023-05-18 07:20:35.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/eb2577e535f6408405a56e3fa77eea260ef83b03', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.' [0]\n\nPrometheus has been enabled in CI jobs to ensure test coverage.\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 9, 'created': '2023-05-18 07:54:32.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/e5ef05130ee53b11863811c7d7c5504ca22369d5', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.' [0]\n\nPrometheus has been enabled in CI jobs to ensure test coverage.\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/874415\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 10, 'created': '2023-06-29 09:56:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/6cddc0258926a87f626f46ce48bc80dddbb1bab9', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://github.com/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 11, 'created': '2023-06-29 10:14:09.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/5786f914fd285d2b68eca4480d06cd4bf1048fbe', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\n[0] https://opendev.org/openstack/ironic-prometheus-exporter\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 12, 'created': '2023-06-29 22:36:08.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/f8ba80c85ae73b3f478c6d244b618d5fba7c61f3', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\nPrometheus has been enabled in CI jobs to ensure test coverage.\n\n[0] https://opendev.org/openstack/ironic-prometheus-exporter\n\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/874415\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 13, 'created': '2023-06-30 11:27:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/40e839beb959269d3debd53ed27ce172330ee7eb', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\nPrometheus has been enabled in CI jobs to ensure test coverage.\n\n[0] https://opendev.org/openstack/ironic-prometheus-exporter\n\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/874415\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 14, 'created': '2023-08-29 12:40:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/7773caefd2673fc8e6f7977dea676397baf71162', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\nPrometheus has been enabled in CI jobs to ensure test coverage.\n\n[0] https://opendev.org/openstack/ironic-prometheus-exporter\n\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/874415\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}, {'number': 15, 'created': '2023-08-30 07:25:28.000000000', 'files': ['ansible/roles/ironic/templates/ironic.conf.j2', 'ansible/roles/ironic/tasks/precheck.yml', 'ansible/roles/prometheus/templates/prometheus.yml.j2', 'ansible/roles/ironic/templates/ironic-conductor.json.j2', 'ansible/roles/ironic/templates/ironic-prometheus-exporter.json.j2', 'ansible/group_vars/all.yml', 'releasenotes/notes/add-ironic-prometheus-exporter-218a9985905602fd.yaml', 'ansible/roles/ironic/defaults/main.yml', 'ansible/roles/ironic/templates/ironic-prometheus-exporter-wsgi.conf.j2', 'ansible/roles/ironic/tasks/config.yml', 'etc/kolla/globals.yml', 'ansible/roles/ironic/handlers/main.yml'], 'web_link': 'https://opendev.org/openstack/kolla-ansible/commit/9a9c8fe794508465badd2272c1c1a3165ff01650', 'message': ""Add ironic-prometheus-exporter\n\nThis commit adds the ironic-prometheus-exporter, following the\nconventions used by the previously integrated exporters. '[The] Ironic\nPrometheus Exporter is a Tool to expose hardware sensor data in the\nPrometheus format through an HTTP endpoint.'[0]\n\nPrometheus has been enabled in CI jobs to ensure test coverage.\n\n[0] https://opendev.org/openstack/ironic-prometheus-exporter\n\nDepends-On: https://review.opendev.org/c/openstack/kolla/+/874415\n\nChange-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9\n""}]",14,874380,9a9c8fe794508465badd2272c1c1a3165ff01650,64,5,15,35767,,,0,"Add ironic-prometheus-exporter

This commit adds the ironic-prometheus-exporter, following the
conventions used by the previously integrated exporters. '[The] Ironic
Prometheus Exporter is a Tool to expose hardware sensor data in the
Prometheus format through an HTTP endpoint.'[0]

Prometheus has been enabled in CI jobs to ensure test coverage.

[0] https://opendev.org/openstack/ironic-prometheus-exporter

Depends-On: https://review.opendev.org/c/openstack/kolla/+/874415

Change-Id: I6d421effd833d2e0524dd0b81736445c9a730ea9
",git fetch https://review.opendev.org/openstack/kolla-ansible refs/changes/80/874380/1 && git format-patch -1 --stdout FETCH_HEAD,"['ansible/roles/ironic/templates/ironic-conductor.json.j2', 'ansible/roles/ironic/templates/ironic.conf.j2', 'ansible/roles/ironic/templates/ironic-prometheus-exporter.json.j2', 'ansible/group_vars/all.yml', 'ansible/roles/ironic/defaults/main.yml', 'ansible/roles/ironic/tasks/precheck.yml', 'ansible/roles/ironic/templates/ironic-prometheus-exporter-wsgi.conf.j2', 'ansible/roles/ironic/tasks/config.yml', 'ansible/roles/prometheus/templates/prometheus.yml.j2', 'ansible/roles/ironic/handlers/main.yml']",10,a81bb30c88b2c96eec20ea2e57d56659d2fb5030,feature/ironic_prometheus_exporter," - name: Restart ironic-prometheus-exporter container vars: service_name: ""ironic-prometheus-exporter"" service: ""{{ ironic_services[service_name] }}"" become: true kolla_docker: action: ""recreate_or_restart_container"" common_options: ""{{ docker_common_options }}"" name: ""{{ service.container_name }}"" image: ""{{ service.image }}"" volumes: ""{{ service.volumes }}"" dimensions: ""{{ service.dimensions }}"" when: - kolla_action != ""config""",,171,2
openstack%2Fsenlin~892618,openstack/senlin,master,I6a3c771546102f33f292d0d9aeffbc19573a24ab,Senlin release notes for Bobcat,ABANDONED,2023-08-30 10:08:20.000000000,2023-08-30 10:23:22.000000000,,[],"[{'number': 1, 'created': '2023-08-30 10:08:20.000000000', 'files': ['releasenotes/notes/switch-to-alembic-migrations-f442d0b58c3f13a6.yaml', 'senlin/profiles/os/nova/server.py', 'senlin/tests/unit/profiles/test_nova_server_update.py', 'releasenotes/notes/db-switch-alembic-ab4b5e2f2a85974d.yaml', 'releasenotes/notes/support-volume-type-07d608097c711460.yaml', 'releasenotes/notes/support-subnet-c2492ce8a377b1af.yaml', 'senlin/tests/unit/drivers/test_cinder_v2.py', 'senlin/drivers/os/cinder_v2.py', 'releasenotes/notes/health-add-cleanup-2d5143ec2bb78e55.yaml', 'senlin/tests/unit/profiles/test_nova_server.py', 'senlin/db/sqlalchemy/alembic/legacy_utils.py', 'senlin/tests/unit/profiles/test_nova_server_validate.py'], 'web_link': 'https://opendev.org/openstack/senlin/commit/8ffac8b30569511fcc3d29a6dc57ef5272b9f656', 'message': 'Senlin release notes for Bobcat\n\nChange-Id: I6a3c771546102f33f292d0d9aeffbc19573a24ab\n'}]",0,892618,8ffac8b30569511fcc3d29a6dc57ef5272b9f656,2,0,1,22998,,,0,"Senlin release notes for Bobcat

Change-Id: I6a3c771546102f33f292d0d9aeffbc19573a24ab
",git fetch https://review.opendev.org/openstack/senlin refs/changes/18/892618/1 && git format-patch -1 --stdout FETCH_HEAD,"['releasenotes/notes/switch-to-alembic-migrations-f442d0b58c3f13a6.yaml', 'senlin/profiles/os/nova/server.py', 'senlin/tests/unit/profiles/test_nova_server_update.py', 'releasenotes/notes/db-switch-alembic-ab4b5e2f2a85974d.yaml', 'releasenotes/notes/support-volume-type-07d608097c711460.yaml', 'releasenotes/notes/support-subnet-c2492ce8a377b1af.yaml', 'senlin/tests/unit/drivers/test_cinder_v2.py', 'senlin/drivers/os/cinder_v2.py', 'releasenotes/notes/health-add-cleanup-2d5143ec2bb78e55.yaml', 'senlin/tests/unit/profiles/test_nova_server.py', 'senlin/db/sqlalchemy/alembic/legacy_utils.py', 'senlin/tests/unit/profiles/test_nova_server_validate.py']",12,8ffac8b30569511fcc3d29a6dc57ef5272b9f656,," 'subnet': 'FAKE_SUBNET',",,196,20
openstack%2Fopenstack-ansible-galera_server~890787,openstack/openstack-ansible-galera_server,master,I99d993a7c466cb744136bd06f4ab2e21c2569151,Remove galera-4 package during upgrades to force version up,MERGED,2023-08-08 12:41:52.000000000,2023-08-30 10:11:02.000000000,2023-08-30 10:10:00.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}]","[{'number': 1, 'created': '2023-08-08 12:41:52.000000000', 'files': ['vars/debian.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-galera_server/commit/27cd830c654dc7dbb8930d208cfbcebf72637503', 'message': 'Remove galera-4 package during upgrades to force version up\n\nCurrent upgrades leave the galera-4 package in place which\ncan cause incompatibilities when the mariadb binaries are\nupdated.\n\nBy forcing removal of this package during upgrades it should\nbe re-installed with a version matching the rest of the\nmariadb packages.\n\nRHEL distros already have a removal step for galera-*\n\nChange-Id: I99d993a7c466cb744136bd06f4ab2e21c2569151\nCloses-Bug: #2028946\n'}]",0,890787,27cd830c654dc7dbb8930d208cfbcebf72637503,9,3,1,31542,,,0,"Remove galera-4 package during upgrades to force version up

Current upgrades leave the galera-4 package in place which
can cause incompatibilities when the mariadb binaries are
updated.

By forcing removal of this package during upgrades it should
be re-installed with a version matching the rest of the
mariadb packages.

RHEL distros already have a removal step for galera-*

Change-Id: I99d993a7c466cb744136bd06f4ab2e21c2569151
Closes-Bug: #2028946
",git fetch https://review.opendev.org/openstack/openstack-ansible-galera_server refs/changes/87/890787/1 && git format-patch -1 --stdout FETCH_HEAD,['vars/debian.yml'],1,27cd830c654dc7dbb8930d208cfbcebf72637503,bug/2028946, - galera-*,,1,0
openstack%2Fkayobe~893098,openstack/kayobe,master,Idbbe0dd57acc9b7a9440a67c2b677e526a6be917,Work around failing RabbitMQ precheck,MERGED,2023-08-29 18:02:21.000000000,2023-08-30 10:00:58.000000000,2023-08-30 09:59:50.000000000,"[{'_account_id': 14826}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 35263}]","[{'number': 1, 'created': '2023-08-29 18:02:21.000000000', 'files': ['playbooks/kayobe-overcloud-upgrade-base/globals.yml.j2'], 'web_link': 'https://opendev.org/openstack/kayobe/commit/014446251d54091c174815865e1cda925f31ffe2', 'message': 'Work around failing RabbitMQ precheck\n\nKolla Ansible enabled RabbitMQ HA queues by default, which require a\nmanual migration step [1]. Work around the failing precheck by enabling\nHA queues in the previous release until we implement migration code in\nKayobe CI jobs.\n\n[1] https://review.opendev.org/c/openstack/kolla-ansible/+/882825\n\nChange-Id: Idbbe0dd57acc9b7a9440a67c2b677e526a6be917\n'}]",2,893098,014446251d54091c174815865e1cda925f31ffe2,11,4,1,15197,,,0,"Work around failing RabbitMQ precheck

Kolla Ansible enabled RabbitMQ HA queues by default, which require a
manual migration step [1]. Work around the failing precheck by enabling
HA queues in the previous release until we implement migration code in
Kayobe CI jobs.

[1] https://review.opendev.org/c/openstack/kolla-ansible/+/882825

Change-Id: Idbbe0dd57acc9b7a9440a67c2b677e526a6be917
",git fetch https://review.opendev.org/openstack/kayobe refs/changes/98/893098/1 && git format-patch -1 --stdout FETCH_HEAD,['playbooks/kayobe-overcloud-upgrade-base/globals.yml.j2'],1,014446251d54091c174815865e1cda925f31ffe2,rabbitmq-ci-fix, # TODO(priteau): Replace with steps to migrate RabbitMQ transient non-mirrored # queues to durable mirrored queues for 2023.1 to 2023.2 upgrade jobs. om_enable_rabbitmq_high_availability: true,,4,0
openstack%2Fkolla~892877,openstack/kolla,stable/zed,I67f5f12700d7b55f26bff81e9b54559303da6d83,Add comprehensive checks for container restarts,MERGED,2023-08-30 07:13:58.000000000,2023-08-30 09:58:08.000000000,2023-08-30 09:57:06.000000000,"[{'_account_id': 14200}, {'_account_id': 22348}, {'_account_id': 22629}, {'_account_id': 23084}]","[{'number': 1, 'created': '2023-08-30 07:13:58.000000000', 'files': ['docker/base/set_configs.py', 'releasenotes/notes/fixes-container-restart-conditions-57d36b13b0aa964b.yaml', 'tests/test_set_config.py'], 'web_link': 'https://opendev.org/openstack/kolla/commit/3684f67fee9026ff85771517af32f12d48e9c625', 'message': ""Add comprehensive checks for container restarts\n\nWhen adding a dashboard to grafana the containers aren't restarted when\nthey should be. This is due to a bug in Kolla where the logic to\ndetermine whether or the container needs to be restarted fails in the\ncase where the file does not exist in the container. This patch adds\nmore comprehensive checks for container restarts in the set_configs.py\nfile. This patch also adds a test to ensure that the functions work as\nexpected.\n\nCloses-Bug: #1997984\nCo-Authored-By: Will Szumski <will@stackhpc.com>\nChange-Id: I67f5f12700d7b55f26bff81e9b54559303da6d83\n(cherry picked from commit d9a6c5f3901e078a30d341397ac57d867d8191cc)\n""}]",0,892877,3684f67fee9026ff85771517af32f12d48e9c625,10,4,1,22629,,,0,"Add comprehensive checks for container restarts

When adding a dashboard to grafana the containers aren't restarted when
they should be. This is due to a bug in Kolla where the logic to
determine whether or the container needs to be restarted fails in the
case where the file does not exist in the container. This patch adds
more comprehensive checks for container restarts in the set_configs.py
file. This patch also adds a test to ensure that the functions work as
expected.

Closes-Bug: #1997984
Co-Authored-By: Will Szumski <will@stackhpc.com>
Change-Id: I67f5f12700d7b55f26bff81e9b54559303da6d83
(cherry picked from commit d9a6c5f3901e078a30d341397ac57d867d8191cc)
",git fetch https://review.opendev.org/openstack/kolla refs/changes/77/892877/1 && git format-patch -1 --stdout FETCH_HEAD,"['docker/base/set_configs.py', 'releasenotes/notes/fixes-container-restart-conditions-57d36b13b0aa964b.yaml', 'tests/test_set_config.py']",3,3684f67fee9026ff85771517af32f12d48e9c625,bugfix/kolla_container_restarts-stable/zed," @mock.patch('glob.glob') def test_check_non_optional_src_file_not_exists(self, mock_glob): config_file = set_configs.ConfigFile( '/var/lib/kolla/config_files/bar', '/foo', 'user1', '0644') mock_glob.return_value = [] self.assertRaises(set_configs.MissingRequiredSource, config_file.check) @mock.patch('glob.glob') def test_check_optional_src_file_not_exists(self, mock_glob): config_file = set_configs.ConfigFile( '/var/lib/kolla/config_files/bar', '/foo', 'user1', '0644', optional=True) mock_glob.return_value = [] self.assertIsNone(config_file.check()) @mock.patch('glob.glob') @mock.patch('os.path.isdir') @mock.patch.object(set_configs.ConfigFile, '_cmp_file') def test_check_raises_config_bad_state(self, mock_cmp_file, mock_isdir, mock_glob): config_file = set_configs.ConfigFile( '/var/lib/kolla/config_files/bar', '/foo', 'user1', '0644', optional=True) mock_cmp_file.return_value = False mock_isdir.return_value = False mock_glob.return_value = ['/var/lib/kolla/config_files/bar'] self.assertRaises(set_configs.ConfigFileBadState, config_file.check) @mock.patch('os.path.exists', autospec=True) def test_cmp_file_optional_src_exists_dest_no_exists(self, mock_os_exists): config_file = set_configs.ConfigFile( '/var/lib/kolla/config_files/bar', '/foo', 'user1', '0644', optional=True) def fake_exists(path): if path == '/var/lib/kolla/config_files/bar': return True return False mock_os_exists.side_effect = fake_exists self.assertIs(False, config_file._cmp_file('/var/lib/kolla/config_files/bar', '/foo')) @mock.patch('os.path.exists', autospec=True) def test_cmp_file_optional_src_no_exists_dest_exists(self, mock_os_exists): config_file = set_configs.ConfigFile( '/var/lib/kolla/config_files/bar', '/foo', 'user1', '0644', optional=True) def fake_exists(path): if path == '/var/lib/kolla/config_files/bar': return False return True mock_os_exists.side_effect = fake_exists self.assertIs(False, config_file._cmp_file('/var/lib/kolla/config_files/bar', '/foo'))",,80,1
openstack%2Fopenstack-ansible-os_nova~890521,openstack/openstack-ansible-os_nova,master,I93cece8babf35854e5a30938eeb9b25538fb37f6,Enable multiple console proxies where requried in deployments,MERGED,2023-08-04 12:56:52.000000000,2023-08-30 09:50:25.000000000,2023-08-30 09:49:31.000000000,"[{'_account_id': 22348}, {'_account_id': 25023}, {'_account_id': 28619}, {'_account_id': 31542}]","[{'number': 1, 'created': '2023-08-04 12:56:52.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_nova/commit/ae0801d036baf39bb2f0ce637022c460208d1440', 'message': ""Enable multiple console proxies where requried in deployments\n\nWhen Nova is deployed with a mix of x86 and arm systems\n(for example), it may be necessary to deploy both 'novnc' and\n'serialconsole' proxy services on the same host in order to\nservice the mixed compute estate.\n\nThis patch introduces a list which defines the required proxy\nconsole types.\n\nChange-Id: I93cece8babf35854e5a30938eeb9b25538fb37f6\n""}, {'number': 2, 'created': '2023-08-07 07:19:48.000000000', 'files': ['releasenotes/notes/nova_console_proxies-98f7705e3ecec051.yaml', 'vars/distro_install.yml', 'templates/nova.conf.j2', 'tasks/nova_install.yml', 'defaults/main.yml', 'vars/main.yml'], 'web_link': 'https://opendev.org/openstack/openstack-ansible-os_nova/commit/d0877c6fd315e5fb99a3515e527f46186305e86a', 'message': ""Enable multiple console proxies where requried in deployments\n\nWhen Nova is deployed with a mix of x86 and arm systems\n(for example), it may be necessary to deploy both 'novnc' and\n'serialconsole' proxy services on the same host in order to\nservice the mixed compute estate.\n\nThis patch introduces a list which defines the required proxy\nconsole types.\n\nChange-Id: I93cece8babf35854e5a30938eeb9b25538fb37f6\n""}]",6,890521,d0877c6fd315e5fb99a3515e527f46186305e86a,15,4,2,31542,,,0,"Enable multiple console proxies where requried in deployments

When Nova is deployed with a mix of x86 and arm systems
(for example), it may be necessary to deploy both 'novnc' and
'serialconsole' proxy services on the same host in order to
service the mixed compute estate.

This patch introduces a list which defines the required proxy
console types.

Change-Id: I93cece8babf35854e5a30938eeb9b25538fb37f6
",git fetch https://review.opendev.org/openstack/openstack-ansible-os_nova refs/changes/21/890521/1 && git format-patch -1 --stdout FETCH_HEAD,"['vars/distro_install.yml', 'templates/nova.conf.j2', 'tasks/nova_install.yml', 'defaults/main.yml', 'vars/main.yml']",5,ae0801d036baf39bb2f0ce637022c460208d1440,osa-nova-consoles, {%- if ('novnc' in nova_console_proxy_types) %}, {%- if (nova_console_type == 'novnc') %},27,36
openstack%2Freleases~892956,openstack/releases,master,I50f7c238140e2c1cabee13d1aa2e8868cd7907f5,Release final python-octaviaclient for 2023.2 Bobcat,MERGED,2023-08-28 13:22:56.000000000,2023-08-30 09:19:38.000000000,2023-08-30 09:19:38.000000000,"[{'_account_id': 6469}, {'_account_id': 11628}, {'_account_id': 17685}, {'_account_id': 22348}, {'_account_id': 28522}, {'_account_id': 29244}]","[{'number': 1, 'created': '2023-08-28 13:22:56.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/releases/commit/51bf3c6a81f8691a0c3cafa6f86693e533378a86', 'message': 'Release final python-octaviaclient for 2023.2 Bobcat\n\nThis is a release for python-octaviaclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 3.4.0..468fba0\n468fba0 Add extra validation for HSTS related arguments\n15a8d74 Add support for HTTP Strict Transport Security\n98beca9 Update master for stable/2023.1\n\nChange-Id: I50f7c238140e2c1cabee13d1aa2e8868cd7907f5\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}, {'number': 2, 'created': '2023-08-28 15:41:30.000000000', 'files': ['deliverables/bobcat/python-octaviaclient.yaml'], 'web_link': 'https://opendev.org/openstack/releases/commit/f3d7f26157698d38a75f84e6157d78290762f601', 'message': 'Release final python-octaviaclient for 2023.2 Bobcat\n\nThis is a release for python-octaviaclient to get any merged but\nunreleased changes out prior to the client lib freeze for 2023.2 Bobcat\ngoing into effect.\n\nIf the team is ready to proceed, please leave a +1 to acknowledge this\nrelease and we will process right away. If the team is working on any\nfinal merges, leave a -1 with some detail on the status and update the\npatch with the new commit hash to use when ready.\n\nPatches with no response will be merged by Friday, September 1st.\n\n$ git log --oneline --no-merges 3.4.0..7ce6349\n7ce6349 Fix validation of HSTS attributes\n138eda3 Fix inconsistency in validation error message for HSTS\n468fba0 Add extra validation for HSTS related arguments\n15a8d74 Add support for HTTP Strict Transport Security\n98beca9 Update master for stable/2023.1\n\nChange-Id: I50f7c238140e2c1cabee13d1aa2e8868cd7907f5\nSigned-off-by: Herv Beraud <hberaud@redhat.com>\n'}]",3,892956,f3d7f26157698d38a75f84e6157d78290762f601,12,6,2,28522,,,0,"Release final python-octaviaclient for 2023.2 Bobcat

This is a release for python-octaviaclient to get any merged but
unreleased changes out prior to the client lib freeze for 2023.2 Bobcat
going into effect.

If the team is ready to proceed, please leave a +1 to acknowledge this
release and we will process right away. If the team is working on any
final merges, leave a -1 with some detail on the status and update the
patch with the new commit hash to use when ready.

Patches with no response will be merged by Friday, September 1st.

$ git log --oneline --no-merges 3.4.0..7ce6349
7ce6349 Fix validation of HSTS attributes
138eda3 Fix inconsistency in validation error message for HSTS
468fba0 Add extra validation for HSTS related arguments
15a8d74 Add support for HTTP Strict Transport Security
98beca9 Update master for stable/2023.1

Change-Id: I50f7c238140e2c1cabee13d1aa2e8868cd7907f5
Signed-off-by: Herv Beraud <hberaud@redhat.com>
",git fetch https://review.opendev.org/openstack/releases refs/changes/56/892956/1 && git format-patch -1 --stdout FETCH_HEAD,['deliverables/bobcat/python-octaviaclient.yaml'],1,51bf3c6a81f8691a0c3cafa6f86693e533378a86,bobcat-milestone-3,releases: - version: 3.5.0 projects: - repo: openstack/python-octaviaclient hash: 468fba0e6c13a5acd01b7500c899adb0dde1e60d,,5,0
openstack%2Ftrove~891644,openstack/trove,master,I6f24cf623aa2836517dffda99305d127413d9df2,Fix: failed to create the replicas,MERGED,2023-08-17 02:55:30.000000000,2023-08-30 08:53:19.000000000,2023-08-30 08:52:15.000000000,"[{'_account_id': 22348}, {'_account_id': 26285}]","[{'number': 1, 'created': '2023-08-17 02:55:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/135efa319c88a4eb8c3559fb7d700e8736ca801f', 'message': ""Fix: failed to create the replicas\n\nguest-agent should get the user-defined port's ip for primay instance\nrather than the management ip when network_isolation is set to true.\n\nthis change also adds a zuul job to test postgres replication\n\nChange-Id: I6f24cf623aa2836517dffda99305d127413d9df2\n""}, {'number': 2, 'created': '2023-08-17 03:02:17.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/6eced01cc9dab1cea2af599f6084910c47b1dae9', 'message': ""Fix: failed to create the replicas\n\nguest-agent should get the user-defined port's ip for primay instance\nrather than the management ip when network_isolation is set to true.\n\nthis change also adds a zuul job to test postgres replication\n\nChange-Id: I6f24cf623aa2836517dffda99305d127413d9df2\n""}, {'number': 3, 'created': '2023-08-17 05:20:23.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/2c6040668d11c05af1ca3937ccf97cc019b6ddd0', 'message': ""Fix: failed to create the replicas\n\nguest-agent should get the user-defined port's ip for primay instance\nrather than the management ip when network_isolation is set to true.\n\nthis change also adds a zuul job to test postgres replication\n\nChange-Id: I6f24cf623aa2836517dffda99305d127413d9df2\n""}, {'number': 4, 'created': '2023-08-28 02:06:37.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/3bdb5aba42d1e4e0025c069b11308a1609a3be83', 'message': ""Fix: failed to create the replicas\n\nguest-agent should get the user-defined port's ip for primay instance\nrather than the management ip when network_isolation is set to true.\n\nthis change also adds a zuul job to test postgres replication\n\nChange-Id: I6f24cf623aa2836517dffda99305d127413d9df2\n""}, {'number': 5, 'created': '2023-08-28 03:11:14.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/258d7aab86c8ccec9784904966b138f9d7b4365e', 'message': ""Fix: failed to create the replicas\n\nguest-agent should get the user-defined port's ip for primay instance\nrather than the management ip when network_isolation is set to true.\n\nthis change also adds a zuul job to test postgres replication\n\nChange-Id: I6f24cf623aa2836517dffda99305d127413d9df2\n""}, {'number': 6, 'created': '2023-08-28 14:16:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/trove/commit/586a058f2905dfb2b604c4cdc5fea13fca45bc51', 'message': ""Fix: failed to create the replicas\n\nguest-agent should get the user-defined port's ip for primay instance\nrather than the management ip when network_isolation is set to true.\n\nthis change also adds a zuul job to test postgres replication\n\nChange-Id: I6f24cf623aa2836517dffda99305d127413d9df2\n""}, {'number': 7, 'created': '2023-08-29 03:11:08.000000000', 'files': ['trove/guestagent/strategies/replication/mysql_base.py', 'trove/guestagent/strategies/replication/postgresql.py'], 'web_link': 'https://opendev.org/openstack/trove/commit/ae3c0a225a70155f54aa20a08f16b30c57eb9d20', 'message': ""Fix: failed to create the replicas\n\nguest-agent should get the user-defined port's ip for primay instance\nrather than the management ip when network_isolation is set to true.\n\nChange-Id: I6f24cf623aa2836517dffda99305d127413d9df2\n""}]",4,891644,ae3c0a225a70155f54aa20a08f16b30c57eb9d20,24,2,7,26285,,,0,"Fix: failed to create the replicas

guest-agent should get the user-defined port's ip for primay instance
rather than the management ip when network_isolation is set to true.

Change-Id: I6f24cf623aa2836517dffda99305d127413d9df2
",git fetch https://review.opendev.org/openstack/trove refs/changes/44/891644/1 && git format-patch -1 --stdout FETCH_HEAD,"['zuul.d/projects.yaml', 'zuul.d/jobs.yaml', 'trove/guestagent/strategies/replication/mysql_base.py', 'trove/guestagent/strategies/replication/postgresql.py']",4,135efa319c88a4eb8c3559fb7d700e8736ca801f,fix-replics-error,"import jsonfrom trove.common import constants ip_address = None if CONF.network_isolation and \ os.path.exists(constants.ETH1_CONFIG_PATH): # get IP_address from eth1.json, ipv4 was prefered. with open(constants.ETH1_CONFIG_PATH) as fd: eth1_config = json.load(fd) ip_address = eth1_config.get(""ipv4_address"", None) or \ eth1_config.get(""ipv6_address"", None) if not ip_address: ip_address = netutils.get_my_ipv4() master_ref = { 'host': ip_address,"," master_ref = { 'host': netutils.get_my_ipv4(),",45,3
openstack%2Fcharm-keystone-k8s~892780,openstack/charm-keystone-k8s,main,Ia77fa388e238ca13a7194a3d38de33a42f57538b,Enable notifications,MERGED,2023-08-25 11:12:30.000000000,2023-08-30 08:36:16.000000000,2023-08-30 08:12:05.000000000,"[{'_account_id': 10366}, {'_account_id': 22348}, {'_account_id': 35761}]","[{'number': 1, 'created': '2023-08-25 11:12:30.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-keystone-k8s/commit/9d562e60444ff3dee952e12b57e5b72c9a016f4b', 'message': 'Enable notifications\n\nCurrently the notifications are not sent by the service.\nEnable notification driver to send notifications over amqp.\nSet notification driver to messagingv2\n\nChange-Id: Ia77fa388e238ca13a7194a3d38de33a42f57538b\n'}, {'number': 2, 'created': '2023-08-29 09:42:40.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-keystone-k8s/commit/0871185125c75be15b6ed392f39046631f67ec15', 'message': 'Enable notifications\n\nCurrently the notifications are not sent by the service.\nAdd configuration parameter enable-telemetry-notifications\nto toggle notifications. Set notification driver to messagingv2\nwhen the parameter is set to True.\nUpdate metadata.yaml to include amqp as an optional interface.\n\nChange-Id: Ia77fa388e238ca13a7194a3d38de33a42f57538b\n'}, {'number': 3, 'created': '2023-08-29 10:17:16.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-keystone-k8s/commit/85c22c4f0e611f52f484584b65e64afe6eedfa88', 'message': 'Enable notifications\n\nCurrently the notifications are not sent by the service.\nAdd configuration parameter enable-telemetry-notifications\nto toggle notifications. Set notification driver to messagingv2\nwhen the parameter is set to True.\nUpdate metadata.yaml to include amqp as an optional interface.\n\nChange-Id: Ia77fa388e238ca13a7194a3d38de33a42f57538b\n'}, {'number': 4, 'created': '2023-08-29 10:25:31.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-keystone-k8s/commit/bbb0802d5c93fc56acf778863d398f50bb8c1804', 'message': 'Enable notifications\n\nCurrently the notifications are not sent by the service.\nAdd configuration parameter enable-telemetry-notifications\nto toggle notifications. Set notification driver to messagingv2\nwhen the parameter is set to True.\nUpdate metadata.yaml to include amqp as an optional interface.\n\nChange-Id: Ia77fa388e238ca13a7194a3d38de33a42f57538b\n'}, {'number': 5, 'created': '2023-08-29 10:57:25.000000000', 'files': [], 'web_link': 'https://opendev.org/openstack/charm-keystone-k8s/commit/3b05c648be1cdc6e1bacf3e39fc12af0ca36f290', 'message': 'Enable notifications\n\nCurrently the notifications are not sent by the service.\nAdd configuration parameter enable-telemetry-notifications\nto toggle notifications. Set notification driver to messagingv2\nwhen the parameter is set to True.\nUpdate metadata.yaml to include amqp as an optional interface.\n\nChange-Id: Ia77fa388e238ca13a7194a3d38de33a42f57538b\n'}, {'number': 6, 'created': '2023-08-30 01:39:18.000000000', 'files': ['src/templates/parts/section-oslo-notifications', 'tests/bundles/smoke.yaml', 'src/templates/keystone.conf.j2', 'config.yaml', 'lib/charms/rabbitmq_k8s/v0/rabbitmq.py', 'src/charm.py', 'metadata.yaml', 'fetch-libs.sh'], 'web_link': 'https://opendev.org/openstack/charm-keystone-k8s/commit/53b848b2f4303f892ca763d1628bf9d4b524a833', 'message': 'Enable notifications\n\nCurrently the notifications are not sent by the service.\nAdd configuration parameter enable-telemetry-notifications\nto toggle notifications. Set notification driver to messagingv2\nwhen the parameter is set to True.\nUpdate metadata.yaml to include amqp as an optional interface.\n\nChange-Id: Ia77fa388e238ca13a7194a3d38de33a42f57538b\n'}]",1,892780,53b848b2f4303f892ca763d1628bf9d4b524a833,15,3,6,10366,,,0,"Enable notifications

Currently the notifications are not sent by the service.
Add configuration parameter enable-telemetry-notifications
to toggle notifications. Set notification driver to messagingv2
when the parameter is set to True.
Update metadata.yaml to include amqp as an optional interface.

Change-Id: Ia77fa388e238ca13a7194a3d38de33a42f57538b
",git fetch https://review.opendev.org/openstack/charm-keystone-k8s refs/changes/80/892780/1 && git format-patch -1 --stdout FETCH_HEAD,"['src/templates/parts/section-oslo-notifications', 'src/templates/keystone.conf.j2']",2,9d562e60444ff3dee952e12b57e5b72c9a016f4b,fix-notifications," {% include ""section-oslo-notifications"" %}",,4,0
